[{"tags": ["node.js", "typescript", "firebase", "google-cloud-firestore", "google-cloud-functions"], "comments": [{"owner": {"reputation": 10308, "user_id": 1738915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YXjto.jpg?s=128&g=1", "display_name": "Kolban", "link": "https://stackoverflow.com/users/1738915/kolban"}, "edited": false, "score": 1, "creation_date": 1565223197, "post_id": 57403552, "comment_id": 101288815, "body": "Another idea might be to surround your code with a try/catch.  When an await call fails it throws an exception.  If an exception is thrown at the await statement, you won&#39;t execute the other log calls ... would you see an exception?"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 1, "creation_date": 1565231012, "post_id": 57403552, "comment_id": 101290172, "body": "Async/await is not exactly compatible with forEach in terms of normal expectations of what a forEach loop normally does.  You will need to make sure your code returns a promise the resolves only after all the async work is complete, which you are not doing here.  <a href=\"https://stackoverflow.com/questions/37576685/using-async-await-with-a-foreach-loop\" title=\"using async await with a foreach loop\">stackoverflow.com/questions/37576685/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 574461, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 5, "last_activity_date": 1565223851, "last_edit_date": 1565223851, "creation_date": 1565223085, "answer_id": 57403663, "question_id": 57403552, "link": "https://stackoverflow.com/questions/57403552/await-function-never-executes/57403663#57403663", "title": "Await function never executes", "body": "<p>My guess is that you have a timing issue.  <code>.forEach()</code> does not wait for your asynchronous operations to complete before going on to the next iteration (it does not look at the promise that your code is returning from the async callback) and thus after the <code>.forEach()</code> your second array will always be empty after the <code>.forEach()</code> loop because it has not yet been populated (the asynchonous calls in the loop have not yet finished).</p>\n\n<p>So basically, you rarely ever want to use <code>async/await</code> inside a <code>.forEach()</code> callback because the loop doesn't respect it and you have no way of knowing outside the loop when everything is done.</p>\n\n<p>While you don't show a larger context for this code, the usual solution here is to use a regular <code>for</code> lop or a <code>for/of</code> loop which will wait for the <code>await</code> statements and thus you can more easily know when everything is done.</p>\n\n<p>Here's one way to do that:</p>\n\n<pre><code>async function someFunction() {\n\n    // other code here\n\n\n    for (let id of candidates) {\n      try {\n          console.log('user log ' + id);\n\n          const snap2 = await db.doc('communities_data/' + community.id + '/profiles/' + id).get();\n          const user = snap2.data();\n          console.log('user ' + user);\n\n          if (user !== undefined) {\n            console.log(user + ' just user');\n            const reputation = (user.reputation as number);\n            candidatesWithReputation.push(new UserAndReputation(id, reputation));\n          } else {\n            console.log('user undefined ');\n          };\n      } catch(e) {\n          console.log(e);\n          // decide what to do upon error, \n          //     skip it and proceed?\n          //     stop further processing?\n      }\n    }\n    // candidatesWithReputation should now be valid here\n    console.log(candidatesWithReputation);\n\n   // other code here\n}\n</code></pre>\n\n<p>Note that the containing function has to be declared <code>async</code> to allow you to use <code>await</code> inside the <code>for</code> loop.</p>\n\n<hr>\n\n<p>For possibly better performance, you could also do all these lookups in parallel and use <code>Promise.all()</code> to see when they're all done:</p>\n\n<pre><code>function someFunction() {\n\n    // other code here\n\n    Promise.all(candidates.map(id =&gt; {\n        return db.doc('communities_data/' + community.id + '/profiles/' + id).get().then(snap2 =&gt; {\n            return snap2.data();\n        }).catch(err =&gt; {\n            // decide what to do about an error here\n            // this implementation skips any queries with error and proceeds with the others\n            return undefined;\n        });\n    })).then(users =&gt; {\n        let candidatesWithReputation = [];\n        for (user of users) {\n            if (user !== undefined) {\n                // I've not seen this \"user.reputation as number\" syntax??  Typescript?\n                const reputation = (user.reputation as number);\n                candidatesWithReputation.push(new UserAndReputation(id, reputation));\n            }\n        }\n        return candidatesWithReputation;\n    }).then(users =&gt; {\n        // list of users with reputation here\n        console.log(users);\n        // further processing here\n    }).catch(err =&gt; {\n        console.log(err);\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 1670, "user_id": 9774624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f8e7e947e5c7b3d9e21830d0a6be5c?s=128&d=identicon&r=PG&f=1", "display_name": "Tsabary", "link": "https://stackoverflow.com/users/9774624/tsabary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57403663, "answer_count": 1, "score": 0, "last_activity_date": 1565223851, "creation_date": 1565221955, "last_edit_date": 1565223064, "question_id": 57403552, "link": "https://stackoverflow.com/questions/57403552/await-function-never-executes", "title": "Await function never executes", "body": "<p>I have this function, that iterates through an array of strings, where each string represents a user's UID. The function is supposed to go to each user's profile, check for their most current reputation (same like SO), and then push a map of uid and reputation to a new array.</p>\n\n<p>The second array always came out empty so I've placed a few logs to check what is happening. This is my function:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>candidates.forEach(async id =&gt; {\n  console.log('user log ' + id);\n\n  const snap2 = await db.doc('communities_data/' + community.id + '/profiles/' + id).get();\n  const user = snap2.data();\n  console.log('user ' + user);\n\n  if (user !== undefined) {\n    console.log(user + ' just user');\n    const reputation = (user.reputation as number);\n    candidatesWithReputation.push(new UserAndReputation(id, reputation));\n  } else {\n    console.log('user undefined ');\n  };\n});\n</code></pre>\n\n\n\n<p>the first which says <code>'user log ' +id</code> always prints and it prints the id of the user as it should, so I know the first array is just fine.\nBut none of the other logs print. ever. My first thought was that maybe I got the path wrong? But I've checked a million times, this is the path in which a user's profile would be in my DB.</p>\n\n<p>for example, this could be a path to a profile:\n<code>communities_data/hfd98HDKKhfEwe6W/profiles/bqSFS04LKJDbfhdwU</code></p>\n\n<p>Any idea where it fails</p>\n"}, {"tags": ["javascript", "typescript", "fullcalendar", "fullcalendar-4"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "edited": false, "score": 0, "creation_date": 1565286374, "post_id": 57409457, "comment_id": 101315859, "body": "I&#39;ve copied and pasted the code from above into the database and the event is still not populating."}, {"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "reply_to_user": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "edited": false, "score": 0, "creation_date": 1565288286, "post_id": 57409457, "comment_id": 101316687, "body": "Hmm. Without seeing a worked example of exactly what you did, and exactly what data is coming into fullCalendar as a result, then I can&#39;t tell you what went wrong. As you can see from my CodePen demo, if you give exactly that data to fullCalendar, without the daysOfWeek property included, then it works properly. The concept is correct, but maybe there is some other fault in your code which means the event is not being sent to the calendar or does not contain the correct properties. I can help, if you can provide a reproducible  full example"}, {"owner": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "edited": false, "score": 0, "creation_date": 1565300689, "post_id": 57409457, "comment_id": 101321248, "body": "I found that removing the &quot;daysOfWeek&quot; field from the document and the model allowed my single all day events to render properly. Unfortunately, that isn&#39;t a solid solution for someone who has this same problem who wants to use recurring events. Because FC doesn&#39;t build individual objects for each recurring event, the recurring event feature isn&#39;t useful to me and I&#39;ll have to populate those manually. Thanks for the tip."}, {"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "reply_to_user": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "edited": false, "score": 0, "creation_date": 1565301118, "post_id": 57409457, "comment_id": 101321360, "body": "@MVM I&#39;m not really sure I get your point...you can either include the daysOfWeek field, or not, as required in each case. If it&#39;s not going to be a recurring event, then don&#39;t create that property in your object. It shouldn&#39;t be hard to implement that, surely? Or if you prefer you could switch to defining recurring events using RRule, as provided by the <a href=\"https://fullcalendar.io/docs/rrule-plugin\" rel=\"nofollow noreferrer\">relevant fullCalendar plugin</a> - maybe that would suit you better somehow? And of course if you have a suggestion to improve this part of fullCalendar, you can always send them a feature request."}, {"owner": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "edited": false, "score": 0, "creation_date": 1565360984, "post_id": 57409457, "comment_id": 101342433, "body": "The recurring event feature takes one event from the database and populates the calendar not producing event objects for the other events. Is that incorrect? I need an individual object for each recurring event as I need to mark whether the event is completed, assign the event to a user, and keep track of the beginning and finish time for each event. This information is required for our analytics/ML. Am I wrong about how the calendar works?"}, {"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "reply_to_user": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "edited": false, "score": 0, "creation_date": 1565376750, "post_id": 57409457, "comment_id": 101349141, "body": "No, you&#39;re correct about that. I was just confused because it seemed unrelated to your question, I didn&#39;t get why you thought my answer was not a &quot;solid solution&quot;. So yes, in your case you will need to create each event individually I believe"}, {"owner": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "edited": false, "score": 1, "creation_date": 1565646808, "post_id": 57409457, "comment_id": 101410425, "body": "Ahh, I meant my solution  &quot;removing the &quot;daysOfWeek&quot; field from the document and the model&quot; wasn&#39;t a solid solution. Thanks for your help."}], "tags": [], "owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "is_accepted": true, "score": 3, "last_activity_date": 1565256765, "creation_date": 1565256765, "answer_id": 57409457, "question_id": 57403085, "link": "https://stackoverflow.com/questions/57403085/fullcalendar-v4-allday-events-not-rendering/57409457#57409457", "title": "FullCalendar-v4 allDay events not rendering", "body": "<p>setting <code>\"daysOfWeek\" : [],</code> means that you are telling the calendar it cannot show the event on any day of the week. That's why it won't appear.</p>\n\n<p>Simply don't set that option in your code for single events, and it will be fine:</p>\n\n<pre><code>{\n    \"_id\" : ObjectId(\"5d4b455e121f726f510f2b5c\"),\n    \"batchId\" : ObjectId(\"5d28f52d823083adfc6e8c4d\"),\n    \"locationId\" : ObjectId(\"5d28cad23f49646797e05adc\"),\n    \"end\" : null,\n    \"startRecur\" : \"\",\n    \"endRecur\" : \"\",\n    \"allDay\" : true,\n    \"start\" : \"2019-08-08\",\n    \"title\" : \"First Transplant\",\n    \"backgroundColor\" : \"rgb(87, 87, 244)\",\n    \"interval\" : \"Single Event\",\n    \"category\" : \"Cultivation\",\n    \"monday\" : false,\n    \"tuesday\" : false,\n    \"wednesday\" : false,\n    \"thursday\" : false,\n    \"friday\" : false,\n    \"saturday\" : false,\n    \"sunday\" : false,\n    \"completed\" : false,\n    \"__v\" : 0\n}\n</code></pre>\n\n<p>Demo: <a href=\"https://codepen.io/ADyson82/pen/LwdgeG\" rel=\"nofollow noreferrer\">https://codepen.io/ADyson82/pen/LwdgeG</a></p>\n\n<p>P.S. There's nothing wrong with your date string.</p>\n"}], "owner": {"reputation": 127, "user_id": 11343305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10107026941380035/picture?type=large", "display_name": "MVM", "link": "https://stackoverflow.com/users/11343305/mvm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 57409457, "answer_count": 1, "score": 1, "last_activity_date": 1565256950, "creation_date": 1565217565, "last_edit_date": 1565256950, "question_id": 57403085, "link": "https://stackoverflow.com/questions/57403085/fullcalendar-v4-allday-events-not-rendering", "title": "FullCalendar-v4 allDay events not rendering", "body": "<p>I have managed to get my recurring events to show up on the calendar, but my single allDay events will not render and I believe its a field problem.</p>\n\n<p>I've tried making the event's start time an iso date which doesn't seem to matter as my recurring events are being saved as a string.</p>\n\n<p>This is a recurring event and shows up on the calendar</p>\n\n<pre><code>{\n    \"_id\" : ObjectId(\"5d4af079f91ff532f8fc0385\"),\n    \"daysOfWeek\" : [ \n        1, \n        2, \n        3\n    ],\n    \"locationId\" : ObjectId(\"5d28cad23f49646797e05adc\"),\n    \"allDay\" : true,\n    \"start\" : \"2019-08-07\",\n    \"end\" : \"2019-08-07\",\n    \"startRecur\" : \"2019-08-07\",\n    \"endRecur\" : \"2019-08-31\",\n    \"title\" : \"Change Bulbs\",\n    \"backgroundColor\" : \"rgb(87, 87, 244)\",\n    \"source\" : null,\n    \"interval\" : \"Weekly\",\n    \"category\" : \"Facility\",\n    \"monday\" : true,\n    \"tuesday\" : true,\n    \"wednesday\" : true,\n    \"completed\" : false,\n    \"frequency\" : null,\n    \"__v\" : 0\n}\n</code></pre>\n\n<p>this is a single event that showed up in FC-v3 but wont in v4</p>\n\n<pre><code>{\n    \"_id\" : ObjectId(\"5d4b455e121f726f510f2b5c\"),\n    \"daysOfWeek\" : [],\n    \"batchId\" : ObjectId(\"5d28f52d823083adfc6e8c4d\"),\n    \"locationId\" : ObjectId(\"5d28cad23f49646797e05adc\"),\n    \"end\" : null,\n    \"startRecur\" : \"\",\n    \"endRecur\" : \"\",\n    \"allDay\" : true,\n    \"start\" : \"2019-08-08\",\n    \"title\" : \"First Transplant\",\n    \"backgroundColor\" : \"rgb(87, 87, 244)\",\n    \"interval\" : \"Single Event\",\n    \"category\" : \"Cultivation\",\n    \"monday\" : false,\n    \"tuesday\" : false,\n    \"wednesday\" : false,\n    \"thursday\" : false,\n    \"friday\" : false,\n    \"saturday\" : false,\n    \"sunday\" : false,\n    \"completed\" : false,\n    \"__v\" : 0\n}\n</code></pre>\n\n<p>so i made an event with the proper ISO Date and it failed as well</p>\n\n<pre><code>{\n    \"_id\" : ObjectId(\"5d4b4f9a56114f747c7ddcef\"),\n    \"daysOfWeek\" : [],\n    \"batchId\" : ObjectId(\"5d28f52d823083adfc6e8c4d\"),\n    \"locationId\" : ObjectId(\"5d28cad23f49646797e05adc\"),\n    \"allDay\" : true,\n    \"start\" : ISODate(\"2019-08-08T00:00:00.000Z\"),\n    \"end\" : null,\n    \"title\" : \"IMP\",\n    \"backgroundColor\" : \"rgb(87, 87, 244)\",\n    \"interval\" : \"Single Event\",\n    \"category\" : \"Cultivation\",\n    \"monday\" : false,\n    \"tuesday\" : false,\n    \"wednesday\" : false,\n    \"thursday\" : false,\n    \"friday\" : false,\n    \"saturday\" : false,\n    \"sunday\" : false,\n    \"completed\" : false,\n    \"__v\" : 0\n}\n</code></pre>\n\n<p>comp.ts code</p>\n\n<pre><code>createEvent(form) {\n        if (form.valid) {\n            this.newEvent.category = 'Cultivation';\n            this.newEvent.completed = false;\n            this.newEvent.allDay = true;\n            this.newEvent.locationId = this.selectedLocation._id;\n            this.newEvent.batchId = this.selectedBatch._id;\n            this.newEvent.start = moment(this.newEvent.start).utc();\n            this.newEvent.start.hours(0).minutes(0).seconds(0);\n            // this.newEvent.source =  null;\n            // this.newEvent.daysOfWeek = [];\n            if (this.newEvent.interval === 'Single Event') {\n                this.newEvent.end = null;\n                // this.newEvent.startRecur = '';\n                // this.newEvent.endRecur = '';\n                this.newEvent.monday = false;\n                this.newEvent.tuesday = false;\n                this.newEvent.wednesday = false;\n                this.newEvent.thursday = false;\n                this.newEvent.friday = false;\n                this.newEvent.saturday = false;\n                this.newEvent.sunday = false;\n            }\n            // if ( this.newEvent.interval === 'Daily'  || this.newEvent.interval === 'Weekly'){\n            // }\n            if (this.newEvent.interval === 'Weekly') {\n                this.newEvent.startRecur = this.newEvent.start;\n                this.newEvent.end = this.newEvent.start;\n                this.newEvent.frequency = NaN;\n                if (this.newEvent.sunday) {\n                    this.newEvent.daysOfWeek.push(0);\n                }\n                if (this.newEvent.monday) {\n                    this.newEvent.daysOfWeek.push(1);\n                }\n                if (this.newEvent.tuesday) {\n                    this.newEvent.daysOfWeek.push(2);\n                }\n                if (this.newEvent.wednesday) {\n                    this.newEvent.daysOfWeek.push(3);\n                }\n                if (this.newEvent.thursday) {\n                    this.newEvent.daysOfWeek.push(4);\n                }\n                if (this.newEvent.friday) {\n                    this.newEvent.daysOfWeek.push(5);\n                }\n                if (this.newEvent.saturday) {\n                    this.newEvent.daysOfWeek.push(6);\n                }\n            }\n...sub to database\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1565234718, "post_id": 57402745, "comment_id": 101290839, "body": "Looks like instead of using <code>new this()</code> I need to use <code>Reflect.construct(this, [])</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9738, "user_id": 4858777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R121o.png?s=128&g=1", "display_name": "Valeriy Katkov", "link": "https://stackoverflow.com/users/4858777/valeriy-katkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1565420280, "creation_date": 1565420280, "answer_id": 57440054, "question_id": 57402745, "link": "https://stackoverflow.com/questions/57402745/create-instance-inside-abstract-class-of-child-using-this/57440054#57440054", "title": "Create instance inside abstract class of child using this", "body": "<p>The first problem of your solution - it isn't safe, <code>T</code> type may not contain empty constructor. The second problem: even if you call <code>find()</code> on <code>A</code> class, return type will be inferred as <code>Model</code> if it isn't set explicitly.</p>\n\n<p>Because anyway you should specify A type when you call <code>find</code>, it would be better to pass the type constructor to the find method, in this case both problems will be solved.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>abstract class Model {\n  static find&lt;T extends Model&gt;(ModelClass: new () =&gt; T, param: string): T {\n    let inst = new ModelClass()\n    // Do some extra stuff with the instance\n    return inst;\n  }\n}\n\nclass A extends Model {}\nconst a = Model.find(A, \"param\");\n</code></pre>\n"}], "owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565420280, "creation_date": 1565214841, "last_edit_date": 1565233095, "question_id": 57402745, "link": "https://stackoverflow.com/questions/57402745/create-instance-inside-abstract-class-of-child-using-this", "title": "Create instance inside abstract class of child using this", "body": "<p>I have an abstract class that does <code>new this()</code>, however, it isn't creating an instance of itself, but it is creating an instance of the class that extended it.</p>\n\n<p>This works in JavaScript when compiled and returns the proper class. However, TypeScript is complaining.</p>\n\n<blockquote>\n  <p>Cannot create an instance of an abstract class.</p>\n</blockquote>\n\n<pre><code>abstract class Model {\n  static find&lt;T extends Model&gt;(someVar) {\n    let inst = new this() as T\n    // Do some extra stuff with the instance\n    return inst\n  }\n}\n\nclass A extends Model { }\n\nA.find()\n</code></pre>\n"}, {"tags": ["typescript", "google-maps-api-3", "async-await"], "answers": [{"tags": [], "owner": {"reputation": 6413, "user_id": 5555803, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4823cf23548ba1e4634ad67e78468e67?s=128&d=identicon&r=PG&f=1", "display_name": "Orkhan Alikhanov", "link": "https://stackoverflow.com/users/5555803/orkhan-alikhanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1565219369, "creation_date": 1565219369, "answer_id": 57403273, "question_id": 57402672, "link": "https://stackoverflow.com/questions/57402672/async-await-for-synchronous-google-maps-elevation-request/57403273#57403273", "title": "Async/Await for Synchronous Google Maps Elevation Request", "body": "<p>You can't do <code>await getElevationForLocations</code>. It does not return <code>Promise</code>. It calls callback on completion which can be wrapped in a <code>Promise</code>:</p>\n\n<pre><code>public async encodeElevations(): Promise&lt;void&gt; {\n    let x = 0\n    console.warn(x++, 'start')\n    const instructions = this.$instructions.filter(ins =&gt; ins instanceof PosInstruction &amp;&amp; ins.$alt === -1);\n    const promiseArray = instructions.map((ins) =&gt; {\n      console.warn(x++, 'topForEach')\n      const reqPoint: google.maps.LocationElevationRequest = { locations: [ins.$latLng] }\n      return new Promise((resolve, reject) =&gt; {\n        google.maps.ElevationService.prototype.getElevationForLocations(reqPoint, (results: google.maps.ElevationResult[], status) =&gt; {\n          if (status === google.maps.ElevationStatus.OK) {\n            console.warn(x++, 'status ok')\n            ins.setAlt(results[0].elevation)\n            resolve(ins);\n          } else {\n            reject(new Error(`encodeElevations() -- ${status.toString()}`));\n          }\n        });\n\n        console.warn(x++, 'after getElev')\n      });\n    })\n\n    const array = await Promise.all(promiseArray);\n\n    console.warn(x++, 'done')\n  }\n</code></pre>\n"}], "owner": {"reputation": 651, "user_id": 7049687, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10207887708890701/picture?type=large", "display_name": "Franklin Harvey", "link": "https://stackoverflow.com/users/7049687/franklin-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 57403273, "answer_count": 1, "score": 0, "last_activity_date": 1565219369, "creation_date": 1565214309, "question_id": 57402672, "link": "https://stackoverflow.com/questions/57402672/async-await-for-synchronous-google-maps-elevation-request", "title": "Async/Await for Synchronous Google Maps Elevation Request", "body": "<p>I'm having a hard time figuring out how to run this sequentially. I've tried all sorts of <code>Promise.all</code> and callback hell kinda stuff, but ultimately I need to get an elevation for each point that doesn't have <code>-1</code> for an altitude, and not return until all of them have been set. </p>\n\n<p>Bonus points for only calling <code>google.maps.ElevationService.prototype.getElevationForLocations()</code> once with a filtered list where <code>ins instanceof PosInstruction &amp;&amp; ins.$alt === -1</code>)</p>\n\n<pre><code>public async encodeElevations(): Promise&lt;void&gt; {\n    let x = 0\n    console.warn(x++, 'start')\n    await this.$instructions.forEach(async (ins) =&gt; {\n        console.warn(x++, 'topForEach')\n\n        if (ins instanceof PosInstruction &amp;&amp; ins.$alt === -1) {\n            const reqPoint: google.maps.LocationElevationRequest = { locations: [ins.$latLng] }\n\n            await google.maps.ElevationService.prototype.getElevationForLocations(reqPoint, async (results: google.maps.ElevationResult[], status) =&gt; {\n                if (status === google.maps.ElevationStatus.OK) {\n                    console.warn(x++, 'status ok')\n                    ins.setAlt(results[0].elevation)\n                }\n                else throw new Error(`encodeElevations() -- ${status.toString()}`)\n            })\n\n            console.warn(x++, 'after getElev')\n        }\n    })\n\n    console.warn(x++, 'done')\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 524, "user_id": 4904285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aed1ca8f3e70c78d88b24c42c6033e8?s=128&d=identicon&r=PG&f=1", "display_name": "Noremac", "link": "https://stackoverflow.com/users/4904285/noremac"}, "is_accepted": false, "score": 0, "last_activity_date": 1565213695, "creation_date": 1565213695, "answer_id": 57402573, "question_id": 57402352, "link": "https://stackoverflow.com/questions/57402352/dropdown-in-parent-to-pass-selected-value-to-child-component-and-call-different/57402573#57402573", "title": "Dropdown in parent to pass selected value to child component and call different http requests", "body": "<p>The code processing <code>@Input() Type</code> should not be in the <code>constructor</code> because none of the data bindings have been setup by angular yet. To process any <code>@Input()</code> variables you must do that in <code>ngOnInit()</code> or <code>ngOnChanges()</code>. </p>\n\n<p>The <a href=\"https://angular.io/api/core/OnInit\" rel=\"nofollow noreferrer\">documentation</a> for <code>ngOnInit()</code> it states it is \"A lifecycle hook that is called after Angular has initialized all data-bound properties of a directive\". </p>\n\n<p>You should instead use the <code>ngOnChanges()</code> (<a href=\"https://angular.io/api/core/OnChanges\" rel=\"nofollow noreferrer\">documentation link</a>) lifecycle hook because it \"is called when any data-bound property of a directive changes\" which is exactly what you're looking for.</p>\n\n<p>Move your code from the <code>constructor</code> into <code>ngOnChanges()</code>.</p>\n\n<pre><code>child-component.ts\n\n@Input() type;\nprivate data: any;\n\nconstructor(private apiService: ApiService){\n}\n\nngOnInit(){\n}\n\nngOnChanges() {\n    if (this.type) {\n        switch(this.type) {\n            case 't1': \n            this.apiService.getAllByT1(this.type).subscribe(result =&gt; {\n                this.data = result;\n            });\n            break;\n            case 't2': \n            this.apiService.getAllByT2(this.type).subscribe(result =&gt; {\n                this.data = result;\n            });\n            break;\n            case 't3': \n            this.apiService.getAllByT3(this.type).subscribe(result =&gt; {\n                this.data = result;\n            });\n            break;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 9347301, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4151622c92b98be775eabe5f9c9f93db?s=128&d=identicon&r=PG&f=1", "display_name": "sai123", "link": "https://stackoverflow.com/users/9347301/sai123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1008, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565213695, "creation_date": 1565212354, "question_id": 57402352, "link": "https://stackoverflow.com/questions/57402352/dropdown-in-parent-to-pass-selected-value-to-child-component-and-call-different", "title": "Dropdown in parent to pass selected value to child component and call different http requests", "body": "<p>I need help with making http requests to methods in service based on dropdown search type with Rxjs Observables when i change the dropdown in angular and I am passing the dropdown value to the child component. Thank You in advance.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>child-component.ts\r\n\r\n@Input() Type;\r\nprivate data: any;\r\n\r\nconstructor(private apiService: ApiService){\r\nswitch(this.Type){\r\n  case 't1': this.apiService.getAllByT1(this.Type).subscribe(result =&gt;   {\r\n    this.data = result;\r\n  });\r\n  break;\r\n  case 't2': this.apiService.getAllByT2(this.Type).subscribe(result =&gt;   {\r\n    this.data = result;\r\n  });\r\n  break;\r\n  case 't3': this.apiService.getAllByT3(this.Type).subscribe(result =&gt;   {\r\n    this.data = result;\r\n  })\r\n}\r\n\r\nngOnInit(){\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>parent-component.html\r\n\r\n&lt;select [(ngModel)]=\"Type\" class=\"form-control\" (change)='onOptionsSelected($event)'&gt;\r\n&lt;option id=\"1\" value=\"t1\"&gt;t1&lt;/option&gt;\r\n&lt;option id=\"2\" value=\"t2\"&gt;t2&lt;/option&gt;\r\n&lt;option id=\"3\" value=\"t3\"&gt;t3&lt;/option&gt;\r\n&lt;/select&gt;\r\n\r\n&lt;app-child [Type]=\"Type\" (getAPI)=\"onOptionsSelected($event)\"&gt;&lt;/app-child&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["angular", "typescript", "fabricjs"], "answers": [{"tags": [], "owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1565904649, "creation_date": 1565904649, "answer_id": 57516498, "question_id": 57402047, "link": "https://stackoverflow.com/questions/57402047/adding-custom-attribute-to-fabric-js-object-using-angular/57516498#57516498", "title": "adding custom attribute to fabric.js Object using Angular", "body": "<p>Only solution I've found so far is changing <code>IObjectOptions</code> definition and adding a <code>my</code>property to add any custom variable inside of it in <code>node_modules/@types/fabric/fabric-impl.d.ts</code> here is a sample</p>\n\n<pre><code>interface IObjectOptions {\n\n  /**\n  *Custom properties\n  *\n  */\n  my?: any;\n  /**\n  * Type of an object (rect, circle, path, etc.).\n  * Note that this property is meant to be read-only and not meant to be modified.\n  * If you modify, certain parts of Fabric (such as JSON loading) won't work correctly.\n  */\n  type?: string;\n  ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "edited": false, "score": 0, "creation_date": 1593636312, "post_id": 62672405, "comment_id": 110854058, "body": "didn&#39;t tested it but I will and then upvote it. Many thanks for your answer"}], "tags": [], "owner": {"reputation": 13660, "user_id": 393984, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ad1eabf5d0b6cbdb2d24db2e8d16e1b9?s=128&d=identicon&r=PG", "display_name": "grunk", "link": "https://stackoverflow.com/users/393984/grunk"}, "is_accepted": true, "score": 2, "last_activity_date": 1593590983, "creation_date": 1593590983, "answer_id": 62672405, "question_id": 57402047, "link": "https://stackoverflow.com/questions/57402047/adding-custom-attribute-to-fabric-js-object-using-angular/62672405#62672405", "title": "adding custom attribute to fabric.js Object using Angular", "body": "<p>You can simply create an interface which inherit from the original one. For instance , if i want to add an id to a rectangle :</p>\n<pre><code>interface IRectWithId extends fabric.IRectOptions {\n    id: number;\n}\n</code></pre>\n<p>And then use it as a parameter of your rect</p>\n<pre><code>const opt = {\n    left: left,\n    top: top,\n    strokeWidth: 1,\n    width: width,\n    height: height,\n    fill: 'rgba(98,98,98,0.8)',\n    stroke: 'rgba(98,98,98,1)',\n    hasControls: true,\n    id: this.masks.length\n} as IRectWithId;\n\nconst rect = new fabric.Rect(opt);\n</code></pre>\n"}], "owner": {"reputation": 3555, "user_id": 1713208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vbQQH.jpg?s=128&g=1", "display_name": "JSmith", "link": "https://stackoverflow.com/users/1713208/jsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "accepted_answer_id": 62672405, "answer_count": 2, "score": 1, "last_activity_date": 1593590983, "creation_date": 1565210515, "question_id": 57402047, "link": "https://stackoverflow.com/questions/57402047/adding-custom-attribute-to-fabric-js-object-using-angular", "title": "adding custom attribute to fabric.js Object using Angular", "body": "<p>As told in the question I'm trying to add a custom property to a Fabric.js object.</p>\n\n<p>I've tried</p>\n\n<pre><code>rect.customAttribute = value\n</code></pre>\n\n<p>but this stucks the compilation I get the following error:</p>\n\n<blockquote>\n  <p>Object literal may only specify known properties, and 'customAttribute' does not exist in type 'IRectOptions'.</p>\n</blockquote>\n\n<p>I've also tried the function <code>toObject()</code> but couldn't find back my attribute and set it. Also after using <code>toObject()</code> then trying to set my added attribute with the previous method I logically get the same error.</p>\n\n<pre><code>let rect = new fabric.Rect(\n    {\n        left:0,\n        top: 0,\n        width: 60\n        height:60,\n        fill: 'orange',\n        selectable: true,\n        evented: true,\n        name: 'rect',\n        cornerColor:'red',\n        cornerSize:5,\n        borderColor:'red',\n        borderScaleFactor: 5,\n        noScaleCache:false,\n        customAttribute:false\n    })\nrect.toObject(['customAttribute'])\n</code></pre>\n"}, {"tags": ["typescript", "jestjs", "babeljs"], "comments": [{"owner": {"reputation": 2835, "user_id": 10428030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4ZBN.png?s=128&g=1", "display_name": "aviya.developer", "link": "https://stackoverflow.com/users/10428030/aviya-developer"}, "edited": false, "score": 1, "creation_date": 1565211616, "post_id": 57401931, "comment_id": 101286005, "body": "<code>This usually means that you are trying to import a file which Jest cannot parse, e.g. it&#39;s not plain JavaScript.</code> Why should it be able to parse <code>.ts</code> when you don&#39;t give it any transformer to do so? Why not use <code>ts-jest</code>?"}, {"owner": {"reputation": 14961, "user_id": 627569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9f2b56bf8356b62c928e303545640a69?s=128&d=identicon&r=PG", "display_name": "citizen conn", "link": "https://stackoverflow.com/users/627569/citizen-conn"}, "reply_to_user": {"reputation": 2835, "user_id": 10428030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d4ZBN.png?s=128&g=1", "display_name": "aviya.developer", "link": "https://stackoverflow.com/users/10428030/aviya-developer"}, "edited": false, "score": 0, "creation_date": 1565211916, "post_id": 57401931, "comment_id": 101286096, "body": "Why do I need a dependency when jest says they support TS out of the box?"}, {"owner": {"reputation": 2337, "user_id": 11769253, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iLLz21kSgKQ/AAAAAAAAAAI/AAAAAAAAAEI/aVqtKan34pQ/photo.jpg?sz=128", "display_name": "Tien Duong", "link": "https://stackoverflow.com/users/11769253/tien-duong"}, "edited": false, "score": 0, "creation_date": 1565221259, "post_id": 57401931, "comment_id": 101288401, "body": "Jest supports TypeScript, via Babel. <a href=\"https://jestjs.io/docs/en/getting-started#using-typescript\" rel=\"nofollow noreferrer\">jestjs.io/docs/en/getting-started#using-typescript</a>. So you need to config babel preset and include .ts or .tsx extension for babel-loader"}], "owner": {"reputation": 14961, "user_id": 627569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9f2b56bf8356b62c928e303545640a69?s=128&d=identicon&r=PG", "display_name": "citizen conn", "link": "https://stackoverflow.com/users/627569/citizen-conn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1340, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565211395, "creation_date": 1565209891, "last_edit_date": 1565211395, "question_id": 57401931, "link": "https://stackoverflow.com/questions/57401931/jest-not-transforming-imported-typescript", "title": "Jest not transforming imported typescript", "body": "<p>I am not using ts-jest. <a href=\"https://jestjs.io/docs/en/getting-started\" rel=\"nofollow noreferrer\">According to this guide</a>, I shouldn't have to in order to test my typescript modules.</p>\n\n<p>I have a simple project setup with jest and typescript. <a href=\"https://github.com/tedconn/ts-test\" rel=\"nofollow noreferrer\">You can see the code here</a>.</p>\n\n<p>When I run <code>jest</code>, I am always getting an error like the following:</p>\n\n<pre><code>[ts-test] jest\n FAIL  src/__test__/index.spec.ts\n  \u25cf Test suite failed to run\n\n    Jest encountered an unexpected token\n\n    This usually means that you are trying to import a file which Jest cannot parse, e.g. it's not plain JavaScript.\n\n    By default, if Jest sees a Babel config, it will use that to transform your files, ignoring \"node_modules\".\n\n    Here's what you can do:\n     \u2022 To have some of your \"node_modules\" files transformed, you can specify a custom \"transformIgnorePatterns\" in your config.\n     \u2022 If you need a custom transformation specify a \"transform\" option in your config.\n     \u2022 If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the \"moduleNameMapper\" config option.\n\n    You'll find more details and examples of these config options in the docs:\n    https://jestjs.io/docs/en/configuration.html\n\n    Details:\n\n    /Users/tconn/dev/ts-test/src/index.ts:9\n      static type = \"something\";\n                  ^\n\n    SyntaxError: Unexpected token =\n\n    &gt; 1 | import Animal from '../index'\n        | ^\n      2 |\n      3 | describe('generate', () =&gt; {\n      4 |   it('does something', () =&gt; {\n\n      at ScriptTransformer._transformAndBuildScript (../../../../usr/local/lib/node_modules/jest/node_modules/@jest/transform/build/ScriptTransformer.js:451:17)\n      at Object.&lt;anonymous&gt; (src/__test__/index.spec.ts:1:1)\n\nTest Suites: 1 failed, 1 total\nTests:       0 total\nSnapshots:   0 total\nTime:        1.411s\nRan all test suites.\n</code></pre>\n\n<p>Essentially it seems like the imported class is not being transpiled to JS but the test is. As the jest site indicates, I have the right settings in my babel config.</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "behaviorsubject"], "comments": [{"owner": {"reputation": 46655, "user_id": 1647604, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/de0a77110ab57284e2a8d57858f714a3?s=128&d=identicon&r=PG", "display_name": "DeborahK", "link": "https://stackoverflow.com/users/1647604/deborahk"}, "edited": false, "score": 0, "creation_date": 1565219480, "post_id": 57401705, "comment_id": 101288042, "body": "I&#39;m not sure I understand the first question. But to answer the second question, your BehaviorSubject is private, so you would not be able to call it from the component. It&#39;s a good idea for the BehaviorSubject to be private to the service to ensure that no other code modifies it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5871859"}, "reply_to_user": {"reputation": 46655, "user_id": 1647604, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/de0a77110ab57284e2a8d57858f714a3?s=128&d=identicon&r=PG", "display_name": "DeborahK", "link": "https://stackoverflow.com/users/1647604/deborahk"}, "edited": false, "score": 0, "creation_date": 1565239220, "post_id": 57401705, "comment_id": 101291675, "body": "@DeborahK Thanks for reply. Actually first question mentioned that <i>what if I call the setEvent() in the create() method of my service (not this proxyService, I meant other service where I keep my CRUD methods)?</i> Any idea?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5871859"}, "reply_to_user": {"reputation": 46655, "user_id": 1647604, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/de0a77110ab57284e2a8d57858f714a3?s=128&d=identicon&r=PG", "display_name": "DeborahK", "link": "https://stackoverflow.com/users/1647604/deborahk"}, "edited": false, "score": 0, "creation_date": 1565239495, "post_id": 57401705, "comment_id": 101291740, "body": "@DeborahK For the second question, I asked that <i>I call the next() via setEvent() method in the CRUD methods, after create, update, delete operations are completed. Is it a good approach, it is there a better way in real world examples e.g. calling next() in the service (CRUD) as I asked in the first question.</i> Any idea?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5871859"}, "edited": false, "score": 0, "creation_date": 1565239914, "post_id": 57405078, "comment_id": 101291849, "body": "Thanks for reply. <b>1)</b> If you use BehaviorSubject in your apps, what do you in in real world projects? Do you call next (here setEvent() method) from Controller&#39;s CRUD method (create(), update(), etc) after CRUD operation done? <b>2)</b> On the other hand, if I call the next() in the Component level, for example create() method, I will have to call the next() for each create()  method calls. For this reason I think of calling next() on service (crud) level (create method in the service that is called from the create method in the Component). Any idea?"}], "tags": [], "owner": {"reputation": 291, "user_id": 11879161, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ppJL492aqkE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcjpqLccH8z5z_gz5SE4eqrSEuRzw/photo.jpg?sz=128", "display_name": "Jan-Niklas Wortmann", "link": "https://stackoverflow.com/users/11879161/jan-niklas-wortmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1565237302, "creation_date": 1565237302, "answer_id": 57405078, "question_id": 57401705, "link": "https://stackoverflow.com/questions/57401705/rxjs-behaviorsubjects-next-method-in-service/57405078#57405078", "title": "RxJs BehaviorSubject&#39;s next() method in service", "body": "<p>I personally think your current approach is totally valid. You could consider adding restriction rules, like you already mentioned, to just call <code>setEvent</code> from your service layer. This would improve the single responsibility of your component. Anyway I think this really depends on the size and the lifetime of your project. For beginning a project so would definitely do it the same way you did!</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5871859"}, "edited": false, "score": 0, "creation_date": 1566240684, "post_id": 57407698, "comment_id": 101586537, "body": "What about using a single subscription as mentioned on <a href=\"https://stackoverflow.com/questions/57562345/using-a-single-subscription-variable-with-behaviorsubject\">Using a single subscription variable with BehaviorSubject</a>? Any idea about that?"}], "tags": [], "owner": {"reputation": 3974, "user_id": 9764133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qcf47.jpg?s=128&g=1", "display_name": "ganesh045", "link": "https://stackoverflow.com/users/9764133/ganesh045"}, "is_accepted": true, "score": 0, "last_activity_date": 1565259399, "last_edit_date": 1565259399, "creation_date": 1565250584, "answer_id": 57407698, "question_id": 57401705, "link": "https://stackoverflow.com/questions/57401705/rxjs-behaviorsubjects-next-method-in-service/57407698#57407698", "title": "RxJs BehaviorSubject&#39;s next() method in service", "body": "<p>I think your design is pretty much fine with <strong><a href=\"http://reactivex.io/RxJava/javadoc/rx/subjects/BehaviorSubject.html\" rel=\"nofollow noreferrer\"><code>BehaviourSubject</code></a></strong> (at least in my prospective).</p>\n\n<p>One thing I can advice is use <strong><code>BehaviourSubject</code></strong> in the root scope singleton service. (which i can't notice in your case)</p>\n\n<blockquote>\n  <p>what if I call the setEvent() in the create() method of my service (not this proxyService, I meant other service where I keep my CRUD\n  methods)</p>\n</blockquote>\n\n<p>If I Understood your question properly, Answer is NO.</p>\n\n<p>Because calling a service method from another service is not Advisable, So keep things simple.In real world projects once the CRUD methods gets executed then we will try to refresh the data from the Component itself with the help of Service methods (but not in the service).</p>\n\n<blockquote>\n  <p>I call the next() via setEvent() method in the CRUD methods, after create, update, delete operations are completed. Is it a good\n  approach, it is there a better way in real world examples e.g. calling\n  next() in the service (CRUD) as I asked in the first question</p>\n</blockquote>\n\n<p>Yes, it is a good approach.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5871859"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 57407698, "answer_count": 2, "score": -1, "last_activity_date": 1565259399, "creation_date": 1565208806, "last_edit_date": 1565212483, "question_id": 57401705, "link": "https://stackoverflow.com/questions/57401705/rxjs-behaviorsubjects-next-method-in-service", "title": "RxJs BehaviorSubject&#39;s next() method in service", "body": "<p>I use the following approach in order to refresh <code>Details</code> page after a new record added. I also need to refresh after updating a record as well.</p>\n\n<p><strong><em>EventProxyService</em></strong></p>\n\n<pre><code>export class EventProxyService {\n    private eventTracker = new BehaviorSubject&lt;any&gt;();\n\n    getEvent(): Observable&lt;any&gt; {\n        return this.eventTracker.asObservable();\n    }\n\n    setEvent(param: any): void {\n        this.eventTracker.next(param);\n    }\n}\n</code></pre>\n\n<p><strong><em>CreateComponent:</em></strong></p>\n\n<pre><code>export class CreateComponent implements OnInit {\n\n    constructor(private eventProxyService: EventProxyService) { }\n\n    create(param: any): void {\n        //other staff related to creating record\n\n        this.eventProxyService.setEvent(param);\n    }\n}\n</code></pre>\n\n<p><strong><em>DetailsComponent:</em></strong></p>\n\n<pre><code>export class DetailsComponent implements OnInit {\n\n    subscription;\n\n    constructor(private eventProxyService: EventProxyService) { }\n\n    ngOnInit() {\n        this.subscription = this.eventProxyService.getEvent().subscribe((param: any) =&gt; {\n            this.refresh(param);\n        );\n    }\n\n    refresh(param) {\n        this.record = param; //update record via new one passed from service\n    }\n\n    ngOnDestroy(): void {\n        this.subscription.unsubscribe();\n    }\n}\n</code></pre>\n\n<p>The approach works well but I am a little bit confused regarding to the following issues:</p>\n\n<p><strong>1)</strong> Because I also call <code>this.eventProxyService.setEvent(param);</code> in <code>update()</code> method like in <code>create()</code> method, would it be good idea to call this in my service level instead of component level?</p>\n\n<p><strong>2)</strong> Is there anything wrong when firing next() method in  <code>CreateComponent</code> above?</p>\n"}, {"tags": ["typescript", "async-await"], "comments": [{"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1565211203, "post_id": 57401704, "comment_id": 101285862, "body": "<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Return_value\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/API/&hellip;</a>"}, {"owner": {"reputation": 853, "user_id": 160419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979ee669cf5b9536d64d14f4577cf5b1?s=128&d=identicon&r=PG", "display_name": "dezfowler", "link": "https://stackoverflow.com/users/160419/dezfowler"}, "edited": false, "score": 0, "creation_date": 1565211335, "post_id": 57401704, "comment_id": 101285915, "body": "Fetch definitions are in TypeScript 2.2 in lib.dom.d.ts"}, {"owner": {"reputation": 6413, "user_id": 5555803, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4823cf23548ba1e4634ad67e78468e67?s=128&d=identicon&r=PG&f=1", "display_name": "Orkhan Alikhanov", "link": "https://stackoverflow.com/users/5555803/orkhan-alikhanov"}, "edited": false, "score": 0, "creation_date": 1565219571, "post_id": 57401704, "comment_id": 101288060, "body": "<code>Promise&lt;any&gt;</code> should work at least."}, {"owner": {"reputation": 139, "user_id": 10118974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faff401882dc0abd4784f5c131bf94c2?s=128&d=identicon&r=PG&f=1", "display_name": "slondr", "link": "https://stackoverflow.com/users/10118974/slondr"}, "reply_to_user": {"reputation": 6413, "user_id": 5555803, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4823cf23548ba1e4634ad67e78468e67?s=128&d=identicon&r=PG&f=1", "display_name": "Orkhan Alikhanov", "link": "https://stackoverflow.com/users/5555803/orkhan-alikhanov"}, "edited": false, "score": 0, "creation_date": 1565270398, "post_id": 57401704, "comment_id": 101307223, "body": "@OrkhanAlikhanov Unfortunately it doesn&#39;t - see my response to the answer below."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 10118974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faff401882dc0abd4784f5c131bf94c2?s=128&d=identicon&r=PG&f=1", "display_name": "slondr", "link": "https://stackoverflow.com/users/10118974/slondr"}, "edited": false, "score": 0, "creation_date": 1565270419, "post_id": 57406385, "comment_id": 101307239, "body": "When I defined the function as <code>Promise&lt;any&gt;</code>, I get the following error: &quot;An async function or method requires the &#39;Promise&#39; constructor.&quot;"}, {"owner": {"reputation": 627, "user_id": 10422906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdc46240d4746dc19dfb03f4cca8ce0?s=128&d=identicon&r=PG&f=1", "display_name": "nktshn", "link": "https://stackoverflow.com/users/10422906/nktshn"}, "reply_to_user": {"reputation": 139, "user_id": 10118974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faff401882dc0abd4784f5c131bf94c2?s=128&d=identicon&r=PG&f=1", "display_name": "slondr", "link": "https://stackoverflow.com/users/10118974/slondr"}, "edited": false, "score": 0, "creation_date": 1565331032, "post_id": 57406385, "comment_id": 101327067, "body": "@slondr in your tsconfig add this: <code>&quot;lib&quot;: [       &quot;es2015&quot;     ],</code>"}], "tags": [], "owner": {"reputation": 627, "user_id": 10422906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdc46240d4746dc19dfb03f4cca8ce0?s=128&d=identicon&r=PG&f=1", "display_name": "nktshn", "link": "https://stackoverflow.com/users/10422906/nktshn"}, "is_accepted": false, "score": 0, "last_activity_date": 1565245648, "creation_date": 1565245648, "answer_id": 57406385, "question_id": 57401704, "link": "https://stackoverflow.com/questions/57401704/what-are-the-proper-type-annotations-for-an-awaited-fetch-call-in-typescript/57406385#57406385", "title": "What are the proper type annotations for an awaited fetch() call in TypeScript?", "body": "<p>it returns the same that fetch function returns, because after the \"=>\" return keyword is hidden. So, it's a Promise.</p>\n"}], "owner": {"reputation": 139, "user_id": 10118974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faff401882dc0abd4784f5c131bf94c2?s=128&d=identicon&r=PG&f=1", "display_name": "slondr", "link": "https://stackoverflow.com/users/10118974/slondr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565245648, "creation_date": 1565208803, "question_id": 57401704, "link": "https://stackoverflow.com/questions/57401704/what-are-the-proper-type-annotations-for-an-awaited-fetch-call-in-typescript", "title": "What are the proper type annotations for an awaited fetch() call in TypeScript?", "body": "<p>I'm trying to convert a small existing JavaScript codebase to TypeScript, and in my efforts to write type annotations for every function I'm fighting with one that returns from an <code>await fetch</code> call.</p>\n\n<p>Visual Studio is yelling at me when I try some reasonable choices - Firefox gives me a <code>Response</code> object when I run something simple (like <code>await fetch('google.com');</code>) in the console, so I tried some variations of Response or Promise but VS gives me the following error: \"[Type] is not a valid async function return type because it does not refer to a Promise-compatible constructor value.\" I'm at my wits end here.</p>\n\n<p>Here's the function in question:</p>\n\n<pre><code>const updateLinkCount = async (id: string) /* : What type? */ =&gt; await fetch(uri, {\n    method: 'POST',\n    body: JSON.stringify({ id: id }),\n    headers: { 'Content-Type': 'application/json' }\n});\n</code></pre>\n"}, {"tags": ["typescript", "google-cloud-platform", "google-cloud-functions"], "answers": [{"tags": [], "owner": {"reputation": 7796, "user_id": 633267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2039c76871a343a2acd51950fe4c36d6?s=128&d=identicon&r=PG", "display_name": "Tod", "link": "https://stackoverflow.com/users/633267/tod"}, "is_accepted": false, "score": 0, "last_activity_date": 1565207650, "creation_date": 1565207650, "answer_id": 57401479, "question_id": 57401478, "link": "https://stackoverflow.com/questions/57401478/google-cloud-function-error-function-failed-on-loading-user-code-with-typescr/57401479#57401479", "title": "Google Cloud Function Error &quot;Function failed on loading user code.&quot; with Typescript Functions", "body": "<p>The problem occurs when you don't specify a <code>.gcloudignore</code> file. The gcloud SDK tries to help, and supply one for you. \nThe very end of that file has this line:<br>\n<code>#!include:.gitignore</code><br>\nWhich I was ignoring because it looks like a comment line. Bad idea on my part. While it strikes me as a violation of the principle of least astonishment it turns out if you read the top of the auto-generated file, it points out that the<br>\n<code>#!include:</code><br>\nsyntax includes the contents of the specified file in the <code>.gitcloudignore</code> file. Since I don't want my <code>build</code> folder added to git that means it also doesn't get uploaded to my function. Easy enough to fix, once the rabbit-holes are exited. Just delete that line from the auto-generated <code>.gcloudignore</code> file. </p>\n"}], "owner": {"reputation": 7796, "user_id": 633267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2039c76871a343a2acd51950fe4c36d6?s=128&d=identicon&r=PG", "display_name": "Tod", "link": "https://stackoverflow.com/users/633267/tod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 578, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565207650, "creation_date": 1565207650, "question_id": 57401478, "link": "https://stackoverflow.com/questions/57401478/google-cloud-function-error-function-failed-on-loading-user-code-with-typescr", "title": "Google Cloud Function Error &quot;Function failed on loading user code.&quot; with Typescript Functions", "body": "<p>When I first create a Google Cloud Function with Typescript I run into the error<br>\n<code>Function failed on loading user code. Error message: Provided code is not a loadable module. Could not load the function, shutting down.</code>  </p>\n\n<p>In my package.json I have specified the main property as <code>\"./build/app.js\"</code> </p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1565206264, "post_id": 57400961, "comment_id": 101283927, "body": "If <code>target</code> and <code>item</code> properties are both of type <code>any</code>, then it&#39;s not surprising that assigning them to new variables will preserve the <code>any</code> type.  Looks like <code>dropModel</code> should be typed differently, but without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> it&#39;s hard to say to what it should be changed.  I suppose you can do <code>({target: team, item: car}:{target: Team, item: Car}) =&gt; ...</code>?  I&#39;d like a self-contained reproducible example to be sure, though."}, {"owner": {"reputation": 853, "user_id": 160419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979ee669cf5b9536d64d14f4577cf5b1?s=128&d=identicon&r=PG", "display_name": "dezfowler", "link": "https://stackoverflow.com/users/160419/dezfowler"}, "edited": false, "score": 1, "creation_date": 1565206269, "post_id": 57400961, "comment_id": 101283930, "body": "Why are you not giving target and item a type in the function declaration?"}, {"owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "reply_to_user": {"reputation": 853, "user_id": 160419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979ee669cf5b9536d64d14f4577cf5b1?s=128&d=identicon&r=PG", "display_name": "dezfowler", "link": "https://stackoverflow.com/users/160419/dezfowler"}, "edited": false, "score": 0, "creation_date": 1565250796, "post_id": 57400961, "comment_id": 101296050, "body": "@dezfowler <code>dropModel</code> is not my function"}, {"owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565251732, "post_id": 57400961, "comment_id": 101296516, "body": "@jcalz updated my question with an stackBlitz demo"}, {"owner": {"reputation": 853, "user_id": 160419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/979ee669cf5b9536d64d14f4577cf5b1?s=128&d=identicon&r=PG", "display_name": "dezfowler", "link": "https://stackoverflow.com/users/160419/dezfowler"}, "edited": false, "score": 0, "creation_date": 1565251735, "post_id": 57400961, "comment_id": 101296521, "body": "You could just override the type definition. Redefine dropModel something like this...  <code>dropModel(groupName: &#39;cars&#39;): Observable&lt;{target: Team, item: Car}&gt;</code>. See the interface IDocument example here: <a href=\"https://www.typescriptlang.org/docs/handbook/declaration-merging.html\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/declaration-merging.html</a>"}, {"owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "edited": false, "score": 0, "creation_date": 1565251996, "post_id": 57400961, "comment_id": 101296661, "body": "I guess I can do that, but my question is more global. I mean that this is just a specific case, what with other cases? Each time I&#39;ll need to re-define the source function? It&#39;s not making any sense..."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565279848, "post_id": 57400961, "comment_id": 101312941, "body": "@benshabatnoam For that example I&#39;d probably just call it like <code>this.dragulaService.dropModel&lt;Vemp&gt;(&quot;VAMPIRES&quot;)...</code> since <code>dropModel</code> is generic in the type of <code>item</code>.  It&#39;s not much safer than a type assertion, but it does avoid using <code>any</code>.  I&#39;ll turn this into an answer if you edit the code in the question to be an actual <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>; externally linked code is a nice extra but can&#39;t be relied on since it can change.  Please consult the guidelines for <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a good question</a> for more info.  Good luck!"}, {"owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565285532, "post_id": 57400961, "comment_id": 101315514, "body": "Hello @jcalz, I know I can do that in the demo but it is not my question. That&#39;s why in my question I didn&#39;t reviled that <code>dropModel</code> is generic. This is just a quick demo I found demonstrating my question. I guess it&#39;s not the best one. My question is what if <code>dropModel</code> is not generic, what can I do?"}], "answers": [{"tags": [], "owner": {"reputation": 9738, "user_id": 4858777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R121o.png?s=128&g=1", "display_name": "Valeriy Katkov", "link": "https://stackoverflow.com/users/4858777/valeriy-katkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1565514799, "creation_date": 1565514799, "answer_id": 57448719, "question_id": 57400961, "link": "https://stackoverflow.com/questions/57400961/aliasing-objects-property-name-defining-its-type/57448719#57448719", "title": "Aliasing object&#39;s property name + defining it&#39;s type", "body": "<p>You can specify the type of your aliased object, like:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>dropModel('cars').subscribe(({\n  target: team,\n  item: car\n}: { \n  target: Team,\n  item: Car\n}) =&gt; {\n  const targetTeamId = team.id;\n  const droppedCarId = car.id;\n});\n</code></pre>\n\n<p>But, it would be more convenient to declare the result type:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface TargetItem&lt;TTarget, TItem&gt; {\n  target: TTarget,\n  item: TItem\n}\n\nconst dropModel: (groupName?: string) =&gt; Observable&lt;TargetItem&lt;any, any&gt;&gt; = ...\n\ndropModel('cars').subscribe(({ target: team, item: car }: TargetItem&lt;Team, Car&gt;) =&gt; {\n  const targetTeamId = team.id;\n  const droppedCarId = car.id;\n});\n</code></pre>\n\n<p>Or use generic function instead:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const dropModel: &lt;TTarget, TItem&gt;(groupName?: string) =&gt; Observable&lt;{\n  target: TTarget;\n  item: TItem;\n}&gt; = ...;\n\ndropModel&lt;Team, Car&gt;('cars').subscribe(({target: team, item: car}) =&gt; {\n  const targetTeamId = team.id;\n  const droppedCarId = car.id;\n})\n</code></pre>\n"}], "owner": {"reputation": 5335, "user_id": 2342414, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VSR39.jpg?s=128&g=1", "display_name": "benshabatnoam", "link": "https://stackoverflow.com/users/2342414/benshabatnoam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 57448719, "answer_count": 1, "score": 2, "last_activity_date": 1565514799, "creation_date": 1565205293, "last_edit_date": 1565251883, "question_id": 57400961, "link": "https://stackoverflow.com/questions/57400961/aliasing-objects-property-name-defining-its-type", "title": "Aliasing object&#39;s property name + defining it&#39;s type", "body": "<p>I'm trying to <strong>(1)</strong> alias a returning object's property name + <strong>(2)</strong> defining it's type.</p>\n\n<p>So far it was easy to alias the property name, but I can't find a way to define it's type.</p>\n\n<p><strong>NOTE:</strong> I know I can cast it in my function body like this <code>(&lt;Car&gt;car).id</code>, but I want to know if I can define it in the parameters declaration.</p>\n\n<p><strong>NOTE:</strong> <code>dropModel</code> is not my function, it's an imported package's function.</p>\n\n<hr>\n\n<p>Here is a simple <a href=\"https://stackblitz.com/edit/nbs-angular-alias-type-definition\" rel=\"nofollow noreferrer\">StackBlitz demo</a> with my problem. look at <code>app.component.ts</code> file for line 33 and see that my item is <code>any</code>. How do I defines it as <code>Vemp</code> class?</p>\n\n<hr>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>this.myService.dropModel('cars').subscribe(({ target: team, item: car }) =&gt; {\n  const targetTeamId = team.id;\n  const droppedCarId = car.id;\n})\n</code></pre>\n\n<p>As you can see, I've aliased <code>target</code> property to be <code>team</code> and <code>item</code> to <code>car</code>, now I can use them in my code and it's much better to understand it.</p>\n\n<p>The problem that this code is not type safe, <code>team</code> and <code>car</code> are <code>any</code>.</p>\n\n<hr>\n\n<p><strong>dropModel Function declaration:</strong></p>\n\n<pre><code>dropModel: (groupName?: string) =&gt; Observable&lt;{\n  target: any;\n  item: any;\n}&gt;;\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11897981, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yqUl3M_RkE8/AAAAAAAAAAI/AAAAAAAAAAc/tY0eVNU33Ps/photo.jpg?sz=128", "display_name": "krishna moorthy", "link": "https://stackoverflow.com/users/11897981/krishna-moorthy"}, "edited": false, "score": 0, "creation_date": 1565271853, "post_id": 57400807, "comment_id": 101308243, "body": "thanks for your answer. without using for loop if I want to email and color means how can I do it"}], "tags": [], "owner": {"reputation": 1, "user_id": 10615297, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qOR3kDJZ2nY/AAAAAAAAAAI/AAAAAAAAApE/TFJuCJp6BL4/photo.jpg?sz=128", "display_name": "rahul2240", "link": "https://stackoverflow.com/users/10615297/rahul2240"}, "is_accepted": false, "score": 0, "last_activity_date": 1565204513, "creation_date": 1565204513, "answer_id": 57400807, "question_id": 57400675, "link": "https://stackoverflow.com/questions/57400675/how-to-get-specific-key-value-from-json-file/57400807#57400807", "title": "how to get specific key value from json file?", "body": "<p>If you just want email then you can use</p>\n\n<pre><code>console.log(d[\"data\"][0]['email'])\n</code></pre>\n\n<p>to access the first email. </p>\n\n<p>Similarly, you can use iterators/loops to access each email.</p>\n\n<pre><code>for (var _i = 0; _i &lt; d[\"data\"].length; _i++) {\n   console.log(d[\"data\"][_i]['email'])\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11897981, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yqUl3M_RkE8/AAAAAAAAAAI/AAAAAAAAAAc/tY0eVNU33Ps/photo.jpg?sz=128", "display_name": "krishna moorthy", "link": "https://stackoverflow.com/users/11897981/krishna-moorthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1565271914, "creation_date": 1565203925, "last_edit_date": 1565271914, "question_id": 57400675, "link": "https://stackoverflow.com/questions/57400675/how-to-get-specific-key-value-from-json-file", "title": "how to get specific key value from json file?", "body": "<p>I want to get only a specific field data from the list of JSON</p>\n\n<p>MyJSON</p>\n\n<pre><code>{\n\"data\": [\n    {\"answer\": \"Yes\",\"email\": \"aaaa.cpm\",\"color\": \"Maroon\"},\n    {\"answer\": \"No\",\"email\": \"bbbb.cpm\",\"color\": \"White\"},\n    {\"answer\": \"Yes\",\"email\": \"cccc.cpm\",\"color\": \"Black\"}\n]}\n</code></pre>\n\n<p>service file</p>\n\n<pre><code> getCarsSmall() {\n    return this.http.get&lt;any&gt;('assets/data/cars-large.json').suscribe(d=&gt;{\nconsole.log(d)\n})     \n  }\n</code></pre>\n\n<p>I want to display the result like this </p>\n\n<p>Output</p>\n\n<pre><code> [{\"email\": \"aaaa.cpm\",\"color\": \"Maroon\"},{\"email\": \"bbbb.cpm\",\"color\": \"White\"},{\"email\": \"cccc.cpm\",\"color\": \"Black\"}]\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "typescript", "react-native"], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "edited": false, "score": 0, "creation_date": 1565204626, "post_id": 57400615, "comment_id": 101283252, "body": "That was a typo, I currently already have an array of objects. I can get the correct index of the object I want to update by using players[1] but the update part doesn&#39;t seem to work."}, {"owner": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "edited": false, "score": 0, "creation_date": 1565205416, "post_id": 57400615, "comment_id": 101283562, "body": "Really does not  like the way the setState part is formed. Not sure if this is a typescript issue or not?"}, {"owner": {"reputation": 1646, "user_id": 6591688, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b96a2c6a534e4f6450c81b8c91fc3eda?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/6591688/idan"}, "reply_to_user": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "edited": false, "score": 0, "creation_date": 1565205811, "post_id": 57400615, "comment_id": 101283730, "body": "I edited again and added your function if it&#39;s not working tell me why and what happened after setState"}, {"owner": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "edited": false, "score": 0, "creation_date": 1565208425, "post_id": 57400615, "comment_id": 101284782, "body": "Unexpected token, expected &quot;,&quot; (52:23)    50 |         this.setState({players: {   51 |                 ...this.state.players, &gt; 52 |                 players[id]: {...player}      |                        ^   53 |     }   54 |     })   55 |     }"}, {"owner": {"reputation": 1646, "user_id": 6591688, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b96a2c6a534e4f6450c81b8c91fc3eda?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/6591688/idan"}, "reply_to_user": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "edited": false, "score": 0, "creation_date": 1565209269, "post_id": 57400615, "comment_id": 101285119, "body": "You right! i forgot something - change it to <code>[players[id]]: {...player}</code>"}, {"owner": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "edited": false, "score": 0, "creation_date": 1565209914, "post_id": 57400615, "comment_id": 101285382, "body": "Looks correct now! However... Different error: undefined is not an object (evaluating player.lives)"}, {"owner": {"reputation": 1646, "user_id": 6591688, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b96a2c6a534e4f6450c81b8c91fc3eda?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/6591688/idan"}, "reply_to_user": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "edited": false, "score": 0, "creation_date": 1565210514, "post_id": 57400615, "comment_id": 101285622, "body": "I think your id is out of range (0-1 in this case)"}], "tags": [], "owner": {"reputation": 1646, "user_id": 6591688, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b96a2c6a534e4f6450c81b8c91fc3eda?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/6591688/idan"}, "is_accepted": false, "score": 0, "last_activity_date": 1565205733, "last_edit_date": 1565205733, "creation_date": 1565203670, "answer_id": 57400615, "question_id": 57400524, "link": "https://stackoverflow.com/questions/57400524/react-native-updating-single-property-of-nested-object-in-state/57400615#57400615", "title": "React Native updating single property of nested object in state", "body": "<p>Because your <code>state</code> contains an object of objects I suggest you yo make it an array of objects :</p>\n\n<pre><code>this.state = {\n  players: [\n    {id: 1, lives: 3, name: something},\n    {id: 2, lives: 3, name: something}\n  ]\n}\n</code></pre>\n\n<p>you need to handle update like this (update player in index 1 for example):</p>\n\n<pre><code>this.setState({\n    players: {...this.state.players, \n       players[1]: {...this.state.players[1], lives: this.state.players[1].lives + 1 }\n    }\n})\n</code></pre>\n\n<p>or try it (i follow your function):</p>\n\n<pre><code>public removeLife(id): void {\n   const player = this.state.players[id];\n   player.lives = player.lives - 1;\n   this.setState({players: {\n       ...this.state.players,\n       players[id]: {...player}\n       }\n   })\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "is_accepted": true, "score": 2, "last_activity_date": 1565616801, "creation_date": 1565616801, "answer_id": 57462222, "question_id": 57400524, "link": "https://stackoverflow.com/questions/57400524/react-native-updating-single-property-of-nested-object-in-state/57462222#57462222", "title": "React Native updating single property of nested object in state", "body": "<p>After doing some research I found that the best way to update a single object within a nested state is to shallow copy the state, change the object then re-assign the shallowed state object back to the state. Like this:</p>\n\n<pre><code>    public removeLife(event, id): void {\n    const newState = Object.assign([], this.state.players);\n    const indexOfPlayer = newState.findIndex(selectedPlayer =&gt; selectedPlayer.id === id);\n    const player = newState[indexOfPlayer];\n\n    player.lives = player.lives - 1;\n\n    this.setState({players: newState})\n}\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 7269033, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205940915320889/picture?type=large", "display_name": "Brad Waterhouse", "link": "https://stackoverflow.com/users/7269033/brad-waterhouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 57462222, "answer_count": 2, "score": 4, "last_activity_date": 1565616801, "creation_date": 1565203272, "last_edit_date": 1565205197, "question_id": 57400524, "link": "https://stackoverflow.com/questions/57400524/react-native-updating-single-property-of-nested-object-in-state", "title": "React Native updating single property of nested object in state", "body": "<p>I am attempting to update a single property of a nested state object and return it to the state. I have the index of the object that I need to update but I am struggling to change one property and add the new object back to the state. </p>\n\n<p>My state object looks like this and I am trying to reduce the lives of a player on a button press.</p>\n\n<p>I have been playing around with using array filter, trying to copy the object and add it back into the state but this then loses the objects position.</p>\n\n<pre><code>this.state = {\n  players: {\n    {id: 1, lives: 3, name: something},\n    {id: 2, lives: 3, name: something}\n  }\n} \n</code></pre>\n\n<pre><code>public removeLife(id): void {\n   const player = this.state.players[id];\n   player.lives = player.lives - 1;\n   this.setState({players[id]: {...player}\n   })\n}\n\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "typescript-typings"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1565203242, "post_id": 57400484, "comment_id": 101282569, "body": "<a href=\"https://mariusschulz.com/blog/typing-destructured-object-parameters-in-typescript\" rel=\"nofollow noreferrer\">mariusschulz.com/blog/&hellip;</a>. Searching for your exact title brought that up as the first result. Sometimes (almost always) searching is faster."}], "answers": [{"tags": [], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "is_accepted": true, "score": 3, "last_activity_date": 1565203575, "last_edit_date": 1565203575, "creation_date": 1565203238, "answer_id": 57400514, "question_id": 57400484, "link": "https://stackoverflow.com/questions/57400484/how-to-assign-types-to-destructured-variables-in-typescript/57400514#57400514", "title": "How to assign types to destructured variables in Typescript?", "body": "<p>You have to type the object being destructured, fully.</p>\n\n<pre><code>const Auth = ({ history, match, path }: {\n  history: string,\n  match: string,\n  path: string\n}) =&gt; {\n    //content\n}\n</code></pre>\n\n<p>Typescript will then lookup the types of those properties and then correctly infer the proper types.</p>\n\n<hr>\n\n<p>Some variations.</p>\n\n<p>Make a discrete type for the object being destructured. (I use this pattern for react props quite a bit):</p>\n\n<pre><code>interface AuthInfo {\n  history: string,\n  match: string,\n  path: string\n}\n\nconst Auth = ({ history, match, path }: AuthInfo) =&gt; {\n    //content\n}\n</code></pre>\n\n<p>Or less strongly typed:</p>\n\n<pre><code>const Auth = ({ history, match, path }: { [key: string]: string }) =&gt; {\n    //content\n}\n</code></pre>\n\n<p>Different types for different keys:</p>\n\n<pre><code>const Foo = ({ a, b }: { a: string, b: number[] }) =&gt; {\n    //content\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1565204427, "post_id": 57400634, "comment_id": 101283164, "body": "This does not do what you think it does. This is object destructuring with renaming; it is passed through untouched by the TS compiler. Also discussed in the link I commented on, but this is just standard ES6 syntax."}], "tags": [], "owner": {"reputation": 1, "user_id": 7826698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcf6428586c302927b7b77d0d65e941e?s=128&d=identicon&r=PG&f=1", "display_name": "Hk_developer", "link": "https://stackoverflow.com/users/7826698/hk-developer"}, "is_accepted": false, "score": -3, "last_activity_date": 1565211689, "last_edit_date": 1565211689, "creation_date": 1565203764, "answer_id": 57400634, "question_id": 57400484, "link": "https://stackoverflow.com/questions/57400484/how-to-assign-types-to-destructured-variables-in-typescript/57400634#57400634", "title": "How to assign types to destructured variables in Typescript?", "body": "<p>In typescript, it is better use this syntax:</p>\n\n<pre><code>const Auth = ({ history:object, match:string, path :string}) =&gt;\n  { // function contents\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 9316554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zPE6g.jpg?s=128&g=1", "display_name": "p4m", "link": "https://stackoverflow.com/users/9316554/p4m"}, "is_accepted": false, "score": 1, "last_activity_date": 1565203823, "creation_date": 1565203823, "answer_id": 57400652, "question_id": 57400484, "link": "https://stackoverflow.com/questions/57400484/how-to-assign-types-to-destructured-variables-in-typescript/57400652#57400652", "title": "How to assign types to destructured variables in Typescript?", "body": "<p>You would need to declare the type of the whole object being passed as the argument to <code>Auth</code>, i.e.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const Auth = ({ match, path }: {match: string, path: string[]}) =&gt; {\n}\n</code></pre>\n\n<p>Everything to the right of <code>:</code> is the type of the parameter. Unfortunately this can get pretty verbose and repetitive.</p>\n\n<p>Note that you have to do this as well in your initial code - your example function accepts a <strong>single parameter of type string</strong> and tries to de-structure it. This won't compile, string has no properties named <code>path</code> and <code>history</code> (it does have a method named <code>match</code> so that one will work, but probably isn't what you intended)</p>\n"}], "owner": {"reputation": 2527, "user_id": 10116367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ixorG.jpg?s=128&g=1", "display_name": "Kevvv", "link": "https://stackoverflow.com/users/10116367/kevvv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "closed_date": 1602297391, "accepted_answer_id": 57400514, "answer_count": 3, "score": 1, "last_activity_date": 1565211689, "creation_date": 1565203100, "question_id": 57400484, "link": "https://stackoverflow.com/questions/57400484/how-to-assign-types-to-destructured-variables-in-typescript", "closed_reason": "Duplicate", "title": "How to assign types to destructured variables in Typescript?", "body": "<p>If I wanted to assign different types to each of the destructured parameters being passed into a function, instead of a uniform type, what should the format be?</p>\n\n<p>For example, if I wanted all three variables to be string, the it would be the following format:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const Auth = ({ history, match, path }: string) =&gt; {\n    //content\n}\n</code></pre>\n\n<p>But, what if I wanted the first one to be an object, second a string, and a third to be an array?</p>\n"}, {"tags": ["angular", "forms", "typescript", "service", "angular8"], "comments": [{"owner": {"reputation": 45843, "user_id": 2349407, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/GLI4g.png?s=128&g=1", "display_name": "Vivek Doshi", "link": "https://stackoverflow.com/users/2349407/vivek-doshi"}, "edited": false, "score": 0, "creation_date": 1565207489, "post_id": 57400172, "comment_id": 101284441, "body": "can you create a demo over stackblitz?"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11885576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d5d455e8d2ade47392612462cdacc4?s=128&d=identicon&r=PG&f=1", "display_name": "Zxcid", "link": "https://stackoverflow.com/users/11885576/zxcid"}, "edited": false, "score": 0, "creation_date": 1565808819, "post_id": 57401655, "comment_id": 101470394, "body": "Hi vivek, sorry for the late answer. Anyway, your solution worked, thank you!!"}], "tags": [], "owner": {"reputation": 45843, "user_id": 2349407, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/GLI4g.png?s=128&g=1", "display_name": "Vivek Doshi", "link": "https://stackoverflow.com/users/2349407/vivek-doshi"}, "is_accepted": true, "score": 0, "last_activity_date": 1565208503, "creation_date": 1565208503, "answer_id": 57401655, "question_id": 57400172, "link": "https://stackoverflow.com/questions/57400172/how-to-add-navigation-without-destroying-component-data-in-angular-8/57401655#57401655", "title": "How to add navigation without destroying component data in angular 8?", "body": "<p>First of all, data is not being destroyed,</p>\n\n<p>This is how <code>Subject</code> works , in your case you can use <code>BehaviorSubject</code></p>\n\n<p><strong>So change from :</strong></p>\n\n<pre><code>private myUser = new Subject();\n</code></pre>\n\n<p><strong>To :</strong></p>\n\n<pre><code>private myUser = new BehaviorSubject(null);\n</code></pre>\n\n<p><strong><a href=\"https://stackblitz.com/edit/angular-behaviour-subject-vs-subject\" rel=\"nofollow noreferrer\">WORKING DEMO</a></strong></p>\n\n<blockquote>\n  <p>For testing open <code>user.service.ts</code></p>\n  \n  <p>Try both method one by one private myUser = new Subject(); \n  private myUser = new BehaviorSubject(null);</p>\n  \n  <p>For More Detail : <strong><a href=\"https://stackoverflow.com/a/43351340/2349407\">DO READ</a></strong></p>\n</blockquote>\n"}], "owner": {"reputation": 5, "user_id": 11885576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d5d455e8d2ade47392612462cdacc4?s=128&d=identicon&r=PG&f=1", "display_name": "Zxcid", "link": "https://stackoverflow.com/users/11885576/zxcid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 57401655, "answer_count": 1, "score": 0, "last_activity_date": 1565208503, "creation_date": 1565201780, "question_id": 57400172, "link": "https://stackoverflow.com/questions/57400172/how-to-add-navigation-without-destroying-component-data-in-angular-8", "title": "How to add navigation without destroying component data in angular 8?", "body": "<p>I'm setting up a new app consisting in three components. The first one is a form, submitting it I store the data in a singleton service and then navigate to the second component. Clicking a button on this second component I navigate to the third one where should be displayed the data submitted in the form. But those data gets destroyed during navigation, even if I jump the second component.\nWhen the two component where both displayed on the page, the data were printed normally via string interpolation.\nI thought that the service, being a singleton and on the app.component level, should store those data even after the component destruction but it doesn't.</p>\n\n<p>So my question is, is there a way to save the data even after the first component destruction?</p>\n\n<p>I'll attach the .ts file of the form-component, the service and the output component without the navigation to the middle component.</p>\n\n<p>Form.component.ts:</p>\n\n<pre><code>import { Component, OnInit, ViewChild, } from '@angular/core';\nimport { userDataService } from '../shared/user-data.service';\nimport { NgForm } from '@angular/forms';\nimport { User } from '../shared/user.model';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-home-form',\n  templateUrl: './home-form.component.html',\n  styleUrls: ['./home-form.component.css']\n})\n\nexport class HomeFormComponent implements OnInit {\n\n\n @ViewChild('myForm', { static: false }) userForm: NgForm;\n\n  constructor(private userData: userDataService,\n              private router: Router) {}\n\n  ngOnInit() {\n  }\n\n  onSubmit(){\n    const newUser = new User(this.userForm.value['name'], this.userForm.value['surname'], this.userForm.value['gender'], this.userForm.value['email']);\n    this.userData.addUser(newUser);\n    this.userForm.reset();\n    this.router.navigate(['/user']);\n  }\n}\n</code></pre>\n\n<p>user-data.service.ts</p>\n\n<pre><code>import { User } from './user.model';\nimport { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({providedIn: 'root'})\n\nexport class userDataService {\n\n    private myUser = new Subject&lt;User&gt;();\n    myUserObservable = this.myUser.asObservable(); \n\n    addUser(user: User){\n        this.myUser.next(user);\n    }\n}\n</code></pre>\n\n<p>user-profile.component.ts</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { userDataService } from '../shared/user-data.service';\nimport { User } from '../shared/user.model';\n\n@Component({\n  selector: 'app-user-profile',\n  templateUrl: './user-profile.component.html',\n  styleUrls: ['./user-profile.component.css'],\n})\nexport class UserProfileComponent implements OnInit {\n  user: User = {\n    name: '',\n    surname: '',\n    gender: '',\n    email: ''\n  }\n\n\n  constructor(private userData: userDataService) {}\n\n  ngOnInit() {\n    this.userData.myUserObservable.subscribe(\n      (user: User) =&gt; {\n        this.user = user;\n      }\n    );\n  }\n}\n</code></pre>\n"}, {"tags": ["typescript", "react-tsx"], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 9316554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zPE6g.jpg?s=128&g=1", "display_name": "p4m", "link": "https://stackoverflow.com/users/9316554/p4m"}, "is_accepted": true, "score": 4, "last_activity_date": 1565202766, "last_edit_date": 1565202766, "creation_date": 1565202110, "answer_id": 57400251, "question_id": 57400088, "link": "https://stackoverflow.com/questions/57400088/how-to-extract-the-enum-type-out-of-a-properties-from-an-interface/57400251#57400251", "title": "How to extract the &quot;enum type&quot; out of a properties from an interface?", "body": "<p>You don't need the <code>typeof</code>, just use <code>TextStyle[\"textAlign\"]</code> by itself.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const renderX = ({\n  title = \"title\",\n  textAlign = \"center\"\n}: {\n  title: string;\n  textAlign?: TextStyle[\"textAlign\"];\n}) =&gt; {\n  return (\n      &lt;Text style={{ textAlign }]}&gt;\n        {title.toUpperCase()}\n      &lt;/Text&gt;\n\n  );\n};\n</code></pre>\n\n<p>The <code>typeof</code> takes an identifier of a value and returns its type. But <code>TextStyle</code> is already a type, which is why it cannot be used with typeof.</p>\n"}, {"comments": [{"owner": {"reputation": 322, "user_id": 848755, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/395af5ebfceaffc8fc9d82f079fcc97f?s=128&d=identicon&r=PG", "display_name": "hugomosh", "link": "https://stackoverflow.com/users/848755/hugomosh"}, "edited": false, "score": 0, "creation_date": 1565211192, "post_id": 57400315, "comment_id": 101285856, "body": "Oh, didn&#39;t try that one. Thanks"}], "tags": [], "owner": {"reputation": 1372, "user_id": 3183170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c61a5a5b406e6209d0e8b1f845830259?s=128&d=identicon&r=PG", "display_name": "adrice727", "link": "https://stackoverflow.com/users/3183170/adrice727"}, "is_accepted": false, "score": 1, "last_activity_date": 1565202386, "creation_date": 1565202386, "answer_id": 57400315, "question_id": 57400088, "link": "https://stackoverflow.com/questions/57400088/how-to-extract-the-enum-type-out-of-a-properties-from-an-interface/57400315#57400315", "title": "How to extract the &quot;enum type&quot; out of a properties from an interface?", "body": "<p>You can use <code>TextStyle[\"textAlign\"]</code> as a type:</p>\n\n<pre><code>interface TextStyle {\n    color?: string;\n    fontFamily?: string;\n    fontSize?: number;\n    fontStyle?: \"normal\" | \"italic\";\n    fontWeight?: \"normal\" | \"bold\" | \"100\" | \"200\" | \"300\" | \"400\" | \"500\" | \"600\" | \"700\" | \"800\" | \"900\";\n    letterSpacing?: number;\n    lineHeight?: number;\n    textAlign?: \"auto\" | \"left\" | \"right\" | \"center\" | \"justify\";\n    textDecorationLine?: \"none\" | \"underline\" | \"line-through\" | \"underline line-through\";\n    textDecorationStyle?: \"solid\" | \"double\" | \"dotted\" | \"dashed\";\n    textDecorationColor?: string;\n    textShadowColor?: string;\n    textShadowOffset?: { width: number; height: number };\n    textShadowRadius?: number;\n    testID?: string;\n}\n\n\nconst a1: TextStyle[\"textAlign\"] = \"left\"; // ok\nconst a2: TextStyle[\"textAlign\"] = \"center\"; // ok\nconst a3: TextStyle[\"textAlign\"] = \"middle\";  // error \n</code></pre>\n"}], "owner": {"reputation": 322, "user_id": 848755, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/395af5ebfceaffc8fc9d82f079fcc97f?s=128&d=identicon&r=PG", "display_name": "hugomosh", "link": "https://stackoverflow.com/users/848755/hugomosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "accepted_answer_id": 57400251, "answer_count": 2, "score": 0, "last_activity_date": 1565202766, "creation_date": 1565201389, "question_id": 57400088, "link": "https://stackoverflow.com/questions/57400088/how-to-extract-the-enum-type-out-of-a-properties-from-an-interface", "title": "How to extract the &quot;enum type&quot; out of a properties from an interface?", "body": "<p>I have a React interface, ex: TextStyle. And I need to use a dynamic value like textAlign. But this text align has to match the interface enum. How do I do this?</p>\n\n<p>I have tried <code>typeof TextStyle[\"textAlign\"]</code> but I get <code>'TextStyle' only refers to a type, but is being used as a value here.</code></p>\n\n<pre><code>// @see https://facebook.github.io/react-native/docs/text.html#style\nexport interface TextStyle extends TextStyleIOS, TextStyleAndroid, ViewStyle {\n    color?: string;\n    fontFamily?: string;\n    fontSize?: number;\n    fontStyle?: \"normal\" | \"italic\";\n    /**\n     * Specifies font weight. The values 'normal' and 'bold' are supported\n     * for most fonts. Not all fonts have a variant for each of the numeric\n     * values, in that case the closest one is chosen.\n     */\n    fontWeight?: \"normal\" | \"bold\" | \"100\" | \"200\" | \"300\" | \"400\" | \"500\" | \"600\" | \"700\" | \"800\" | \"900\";\n    letterSpacing?: number;\n    lineHeight?: number;\n    textAlign?: \"auto\" | \"left\" | \"right\" | \"center\" | \"justify\";\n    textDecorationLine?: \"none\" | \"underline\" | \"line-through\" | \"underline line-through\";\n    textDecorationStyle?: \"solid\" | \"double\" | \"dotted\" | \"dashed\";\n    textDecorationColor?: string;\n    textShadowColor?: string;\n    textShadowOffset?: { width: number; height: number };\n    textShadowRadius?: number;\n    testID?: string;\n}\n</code></pre>\n\n<p>I want to extract the enum out of the TextStyle interface to have <code>type TextAligEnum = \"auto\" | \"left\" | \"right\" | \"center\" | \"justify\";</code></p>\n\n<p>For example:</p>\n\n<pre><code>const renderX = ({\n  title = \"title\",\n  textAlign = \"center\"\n}: {\n  title: string;\n  textAlign?: typeof TextStyle[\"textAlign\"];\n                     ^^^^^^^^^ 'TextStyle' only refers to a type, but is being used as a value here.\n}) =&gt; {\n  return (\n      &lt;Text style={{ textAlign }]}&gt;\n        {title.toUpperCase()}\n      &lt;/Text&gt;\n\n  );\n};\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript", "express"], "comments": [{"owner": {"reputation": 8815, "user_id": 4468021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NVYBZ.jpg?s=128&g=1", "display_name": "Clarity", "link": "https://stackoverflow.com/users/4468021/clarity"}, "edited": false, "score": 0, "creation_date": 1565200387, "post_id": 57399834, "comment_id": 101281354, "body": "I think this is because you&#39;re trying to access private field in a public method, change User to be public."}, {"owner": {"reputation": 710, "user_id": 5677183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfe62a6f3865d77bb68d8562e60ed4c3?s=128&d=identicon&r=PG&f=1", "display_name": "L&#233;o Martin", "link": "https://stackoverflow.com/users/5677183/l%c3%a9o-martin"}, "reply_to_user": {"reputation": 8815, "user_id": 4468021, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NVYBZ.jpg?s=128&g=1", "display_name": "Clarity", "link": "https://stackoverflow.com/users/4468021/clarity"}, "edited": false, "score": 0, "creation_date": 1565200835, "post_id": 57399834, "comment_id": 101281546, "body": "@Clarity private means it&#39;s not available from outside class&#39;s methods"}, {"owner": {"reputation": 3, "user_id": 11897677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac7a896f87ee5ff34f965cc1f03868d3?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Mello", "link": "https://stackoverflow.com/users/11897677/igor-mello"}, "edited": false, "score": 0, "creation_date": 1565201082, "post_id": 57399834, "comment_id": 101281650, "body": "i&#39;ve tried to change from private to public but the result is the same"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1565202441, "post_id": 57399834, "comment_id": 101282184, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20279484/how-to-access-the-correct-this-inside-a-callback\">How to access the correct `this` inside a callback?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8188, "user_id": 7838401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8avnB.png?s=128&g=1", "display_name": "Steve Holgado", "link": "https://stackoverflow.com/users/7838401/steve-holgado"}, "is_accepted": true, "score": 2, "last_activity_date": 1605264784, "last_edit_date": 1605264784, "creation_date": 1565201594, "answer_id": 57400130, "question_id": 57399834, "link": "https://stackoverflow.com/questions/57399834/typeerror-cannot-read-property-user-of-undefined-in-typescript-code/57400130#57400130", "title": "TypeError: Cannot read property &#39;User&#39; of undefined in typescript code", "body": "<p>Use an arrow function for the <code>index</code> method to ensure that <code>this</code> is bound to your instance of <code>UserController</code>:</p>\n<pre><code>public index = async (req: Request, res: Response): Promise &lt;Response&gt; =&gt; {\n  return res.json(this.User)\n}\n</code></pre>\n<hr />\n<p>Alternatively, you could use what you have already and bind the <code>index</code> method to the instance in the constructor:</p>\n<pre><code>class UserController {\n  private User: UserModel[] = [\n    {\n      id: 1,\n      name: 'Test 1',\n      email: 'test1@test.com.br'\n    },\n    {\n      id: 2,\n      name: 'Test2 2',\n      email: 'test2@test.com.br'\n    }\n  ]\n\n  constructor() {\n    this.index = this.index.bind(this)\n  }\n\n  /**\n   * [GET] /users\n   * @param req: Request\n   * @param res: Response\n   */\n  public async index (req: Request, res: Response): Promise &lt;Response&gt; {\n    return res.json(this.User)\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11897677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac7a896f87ee5ff34f965cc1f03868d3?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Mello", "link": "https://stackoverflow.com/users/11897677/igor-mello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "accepted_answer_id": 57400130, "answer_count": 1, "score": 0, "last_activity_date": 1605264784, "creation_date": 1565200244, "question_id": 57399834, "link": "https://stackoverflow.com/questions/57399834/typeerror-cannot-read-property-user-of-undefined-in-typescript-code", "title": "TypeError: Cannot read property &#39;User&#39; of undefined in typescript code", "body": "<p>I can't access an user private property of typescript class</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\nimport { Request, Response } from 'express'\nimport UserModel from '../models/UserModel'\n\nclass UserController {\n  private User: UserModel[] = [\n    {\n      id: 1,\n      name: 'Test 1',\n      email: 'test1@test.com.br'\n    },\n    {\n      id: 2,\n      name: 'Test2 2',\n      email: 'test2@test.com.br'\n    }\n  ]\n\n  /**\n   * [GET] /users\n   * @param req: Request\n   * @param res: Response\n   */\n  public async index (req: Request, res: Response): Promise &lt;Response&gt; {\n    return res.json(this.User)\n  }\n}\n\nexport default new UserController()\n</code></pre>\n\n<p>When i access the route [GET] /users i've got the \"TypeError: Cannot read property 'User' of undefined\" error.\nI'm using async method because in a near future this route will be connected to database and now i'm testing the class with static users.\nHow can i fix? Thanks</p>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 6366, "user_id": 4636680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cVphcj8umyU/AAAAAAAAAAI/AAAAAAAAAMA/h77C6Fp3D08/photo.jpg?sz=128", "display_name": "Eduardo Vargas", "link": "https://stackoverflow.com/users/4636680/eduardo-vargas"}, "edited": false, "score": 0, "creation_date": 1565199985, "post_id": 57399724, "comment_id": 101281188, "body": "try calling the asObservable metod before the pipe"}, {"owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "reply_to_user": {"reputation": 6366, "user_id": 4636680, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cVphcj8umyU/AAAAAAAAAAI/AAAAAAAAAMA/h77C6Fp3D08/photo.jpg?sz=128", "display_name": "Eduardo Vargas", "link": "https://stackoverflow.com/users/4636680/eduardo-vargas"}, "edited": false, "score": 0, "creation_date": 1565200305, "post_id": 57399724, "comment_id": 101281311, "body": "@EduardoVargas I have tried that as well and I receive a similar issue where &quot;ERROR: TypeError ... foo$.asObservable is not a function&quot;"}, {"owner": {"reputation": 45843, "user_id": 2349407, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/GLI4g.png?s=128&g=1", "display_name": "Vivek Doshi", "link": "https://stackoverflow.com/users/2349407/vivek-doshi"}, "edited": false, "score": 0, "creation_date": 1565200439, "post_id": 57399724, "comment_id": 101281377, "body": "Will you please post updateProperty?"}, {"owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "reply_to_user": {"reputation": 45843, "user_id": 2349407, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/GLI4g.png?s=128&g=1", "display_name": "Vivek Doshi", "link": "https://stackoverflow.com/users/2349407/vivek-doshi"}, "edited": false, "score": 0, "creation_date": 1565200542, "post_id": 57399724, "comment_id": 101281418, "body": "@VivekDoshi added"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565201437, "post_id": 57399724, "comment_id": 101281775, "body": "Can you show us where you declare foo$? Are you importing everything correctly?"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 1, "creation_date": 1565201856, "post_id": 57399724, "comment_id": 101281940, "body": "You are passing a <code>Subscription</code> object as the <code>value</code> to <code>updateProperty()</code>. Is that your intention because the code inside that function does not appear to have anything to do with subscriptions."}, {"owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565201945, "post_id": 57399724, "comment_id": 101281976, "body": "@WillAlexander added where the method is called"}, {"owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1565202032, "post_id": 57399724, "comment_id": 101282012, "body": "@Reactgular the model I am updating has a property called foodSubscription which holds the subscription which I am updating. So you&#39;re correct that the code inside does not have anything to do with subscriptions, but it can altar a property which deals with subscriptions."}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565202446, "post_id": 57399724, "comment_id": 101282186, "body": "I think the simple answer is that <code>foo$</code> is not a Subject. If it was, you would be able to pipe it."}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565202616, "post_id": 57399724, "comment_id": 101282260, "body": "Your <code>getProperty</code> call doesn&#39;t return a Subject: it returns whatever is emitted by the Observable pipe. If you are trying to emit a Subject\u2026there&#39;s a better way to do things."}, {"owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565202857, "post_id": 57399724, "comment_id": 101282363, "body": "@WillAlexander that does make sense that getProperty isn&#39;t giving a subject back now that I am looking at it. It strange though coming from other languages that I was even allowed to get to this point in the code with foo$ not coming in as my expected type."}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 1, "creation_date": 1565202928, "post_id": 57399724, "comment_id": 101282400, "body": "A decent IDE which has indexed your project will underline that as an error."}, {"owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565202988, "post_id": 57399724, "comment_id": 101282430, "body": "@WillAlexander Do you have a recommendation other than VSCode by any chance?"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565203001, "post_id": 57399724, "comment_id": 101282437, "body": "WebStorm all the way :)"}, {"owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565203022, "post_id": 57399724, "comment_id": 101282458, "body": "@WillAlexander I&#39;ll give it a try :) thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "is_accepted": true, "score": 0, "last_activity_date": 1565203055, "creation_date": 1565203055, "answer_id": 57400469, "question_id": 57399724, "link": "https://stackoverflow.com/questions/57399724/why-would-i-be-unable-to-access-a-pipe-method-on-a-subject/57400469#57400469", "title": "Why would I be unable to access a pipe method on a Subject?", "body": "<p>Your <code>getProperty</code> call is not returning a <code>Subject</code> (or any other <code>Observable</code>-like, so the rest of the code cannot work. Try simply returning the result of the <code>pipe</code> without the <code>subscribe</code> call.</p>\n"}], "owner": {"reputation": 214, "user_id": 6312337, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/1207460665932043/picture?type=large", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6312337/michael-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57400469, "answer_count": 1, "score": 1, "last_activity_date": 1565203055, "creation_date": 1565199717, "last_edit_date": 1565201906, "question_id": 57399724, "link": "https://stackoverflow.com/questions/57399724/why-would-i-be-unable-to-access-a-pipe-method-on-a-subject", "title": "Why would I be unable to access a pipe method on a Subject?", "body": "<p>When passing in a Subject object to a method I have created I believe that the subject, foo$ as shown below, should have access to a pipe() method due to the class definition of Subject which extends Observable but I have no access to the pipe() method during runtime. The code compiles fine and there is no issue in VSCode.</p>\n\n<p>I have tried using foo$.asObservable() right before the .pipe() but a similar issue happens where I am told at runtime that \"foo$.asObservable is not a function\". I have also tried casting foo$ to an Observable or Subject because when I log the type of foo$ in this method only \"object\" is shown.</p>\n\n<p>When using of(foo$) right before the pipe to create an observable this does work, but I no longer have access to the _.change or _.list values which I need in my code below. I have tried to play with this implementation to store those values elsewhere but I have been unable to come up with anything.</p>\n\n<pre><code>ngOnInit() {\n    super.init();\n    const config = super.getCurrentConfig();\n    this.model.updateProperties([['graphicName', '/' + config.graphicName]]);\n    this.model.updateProperties([['inputs', config.inputs ? config.inputs : []], ['identifier', config.identifer ? config.identifier : '']]);\n    this.systemMessageBusService.push(new SystemMessage(SystemMessageAction.GET_THE_FOO, name));\n    this.subscriptions.push(\n        this.model\n        .getProperty('foo$')\n        .pipe(filterNotNulls(), distinctUntilChanged())\n        .subscribe(_ =&gt; this.subscriptionUpdated(_))\n    );\n}\n\nprivate subscriptionUpdated(foo$: Subject&lt;ListValue&lt;BarFoo&gt;&gt;) {\n    this.model.updateProperty('foosSubscription', foo$\n        .pipe(filterNotNulls())\n        .subscribe(_ =&gt; {\n            if (!_.change) {\n                this.myClass.doThis(_.list);\n            } else {\n                this.myClass.doThat(_.change);\n            }\n        })\n    );\n}\n\n\nupdateProperty&lt;K extends keyof T&gt;(propertyName: K, value: any) {\n    const currentValue: T = Object.assign({}, this.getCurrentValue());\n    currentValue[propertyName] = value;\n    this.update(currentValue);\n}\n</code></pre>\n\n<p>Expected result: I am able to use the .pipe method on my Subject.</p>\n\n<p>Actual result: \"foo$.pipe is not a function\"</p>\n"}, {"tags": ["javascript", "typescript", "google-chrome", "debugging", "webpack"], "owner": {"reputation": 36339, "user_id": 30946, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/350f30695a2ab75b99d3fce947e856b9?s=128&d=identicon&r=PG", "display_name": "jcollum", "link": "https://stackoverflow.com/users/30946/jcollum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1565201894, "creation_date": 1565199122, "last_edit_date": 1565201894, "question_id": 57399599, "link": "https://stackoverflow.com/questions/57399599/is-there-a-way-to-log-source-mapped-variables-in-chrome-logpoints", "title": "Is there a way to log source-mapped variables in Chrome logpoints?", "body": "<p><a href=\"https://developers.google.com/web/updates/2019/01/devtools\" rel=\"nofollow noreferrer\">Logpoints</a></p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/33149499/is-there-a-way-to-evaluate-variable-in-source-map-inside-the-chrome-developer-to\">Is there a way to evaluate variable in source map inside the Chrome Developer tools?</a></p>\n\n<p>Like a lot of devs I am writing in a JS language and then using a tool to transpile down to a browser-friendly version of my code. </p>\n\n<p>This seems to break the logpoints in Chrome. For instance, I want to log <code>segmentParameters</code>: </p>\n\n<p><a href=\"https://i.stack.imgur.com/Sw9Vr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sw9Vr.png\" alt=\"segment code\"></a> </p>\n\n<p>So I add a logpoint: </p>\n\n<p><a href=\"https://i.stack.imgur.com/M3Wvj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M3Wvj.png\" alt=\"add log point\"></a></p>\n\n<p>But it seems like this doesn't work because <code>segmentParameters</code> is actually called something else like <code>_a</code> or something equally cryptic in the live (local machine, transpiled) code. The code is definitely being hit but the logpoint isn't doing anything. I can debug it and store that local value in a temp variable and get to <code>segmentParameters</code> that way (I suspect Chrome is doing a little magic to match up the running code to the transpiled code).  </p>\n\n<p>BTW the console won't do this either: </p>\n\n<p><a href=\"https://i.stack.imgur.com/VfU5z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VfU5z.png\" alt=\"console access doesn&#39;t work either\"></a></p>\n\n<p>Are there any tricks to getting logpoints working with transpiled code? Something I'm doing wrong? </p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "typescript-typings", "react-hooks"], "comments": [{"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1565197631, "post_id": 57399205, "comment_id": 101280107, "body": "Declare a type with optional properties like <code>interface MyContextType = { dispatch: Function, state: { latlng?: string, ... } }</code> then use <code>createContext&lt;MyContextType&gt;({ ... })</code>"}, {"owner": {"reputation": 2527, "user_id": 10116367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ixorG.jpg?s=128&g=1", "display_name": "Kevvv", "link": "https://stackoverflow.com/users/10116367/kevvv"}, "reply_to_user": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1565199113, "post_id": 57399205, "comment_id": 101280813, "body": "@p.s.w.g I made the change as you mentioned, but am still getting the error"}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1565199318, "post_id": 57399205, "comment_id": 101280898, "body": "Sorry, for not being more explicit. You&#39;ll have to provide the <code>dispatch</code> and wrap <code>state</code> as well to match exactly what you expect to use in<code>&lt;Context.Provider value={}</code>, e.g. <code>createContext&lt;MyContextType&gt;({ dispatch: null, state: { latlng: null, ... }})</code>."}, {"owner": {"reputation": 2527, "user_id": 10116367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ixorG.jpg?s=128&g=1", "display_name": "Kevvv", "link": "https://stackoverflow.com/users/10116367/kevvv"}, "reply_to_user": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1565200808, "post_id": 57399205, "comment_id": 101281535, "body": "@p.s.w.g It seems that if I match the interface to the states in <code>context.jsx</code>, it solves the type error within <code>context.jsx</code>, but it causes an error in <code>app.jsx</code> where state from value doesn&#39;t recognize <code>MyContextType</code>"}, {"owner": {"reputation": 135520, "user_id": 1715579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/4B4y1.png?s=128&g=1", "display_name": "p.s.w.g", "link": "https://stackoverflow.com/users/1715579/p-s-w-g"}, "edited": false, "score": 0, "creation_date": 1565202514, "post_id": 57399205, "comment_id": 101282222, "body": "Maybe you need <code>interface MyContextType = { dispatch: Dispatch&lt;any&gt;, state: any }</code>? That would sacrifice significant type safety, but it seems like your state object is very loosely defined anyway."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 4627043, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/8TRXt.jpg?s=128&g=1", "display_name": "NaNa", "link": "https://stackoverflow.com/users/4627043/nana"}, "is_accepted": true, "score": 2, "last_activity_date": 1570173627, "last_edit_date": 1570173627, "creation_date": 1570169694, "answer_id": 58230858, "question_id": 57399205, "link": "https://stackoverflow.com/questions/57399205/typescript-error-when-using-react-usecontext-and-usereducer/58230858#58230858", "title": "Typescript error when using React useContext and useReducer", "body": "<p>Add 'as type' when you pass prop to <code>Store.Provider</code>, it can fix this error. Like this:</p>\n\n<pre><code>const [state, dispatch] = React.useReducer(reducer, initialState);\nconst value = { state, dispatch };\nreturn &lt;Store.Provider value={value as MyContextType}&gt;{props.children}&lt;/Store.Provider&gt;;\n</code></pre>\n\n<p>Let me know if this solves your issue.</p>\n"}], "owner": {"reputation": 2527, "user_id": 10116367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ixorG.jpg?s=128&g=1", "display_name": "Kevvv", "link": "https://stackoverflow.com/users/10116367/kevvv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5007, "favorite_count": 0, "accepted_answer_id": 58230858, "answer_count": 1, "score": 4, "last_activity_date": 1570173627, "creation_date": 1565197249, "last_edit_date": 1565200068, "question_id": 57399205, "link": "https://stackoverflow.com/questions/57399205/typescript-error-when-using-react-usecontext-and-usereducer", "title": "Typescript error when using React useContext and useReducer", "body": "<p>I'm new to Typescript and I'm getting the following error on my variable <code>state</code> in using <code>useContext</code> and <code>useReducer</code> hooks:</p>\n\n<blockquote>\n  <p>Type '{ state: {}; dispatch: Dispatch; }' is not assignable to\n  type '{ latlng: null; searchTerm: null; bookingId: null; myPin: null;\n  selectedPin: null; selectedCard: null; selectedCardPin: null; }'.<br>\n  Object literal may only specify known properties, and 'state' does not\n  exist in type '{ latlng: null; searchTerm: null; bookingId: null;\n  myPin: null; selectedPin: null; selectedCard: null; selectedCardPin:\n  null; }'.ts(2322)</p>\n</blockquote>\n\n<p>This is my <code>app.tsx</code>:</p>\n\n<pre><code>const App = () =&gt; {   \n  const initialState = useContext(Context)   \n  const [state, dispatch] = useReducer(reducer, initialState)    \n  return(\n    &lt;Context.Provider value={{ state // &lt;-this is where the error occurs//, dispatch }}&gt;\n         ...\n    &lt;/Context.Provider&gt;    \n  )\n</code></pre>\n\n<p>Following is my <code>context.jsx</code>:</p>\n\n<pre><code>const Context = createContext({\n    latlng: null,\n    searchTerm: null,\n    bookingId: null,\n    myPin: null,\n    selectedPin: null,\n    selectedCard: null, \n    selectedCardPin: null,\n})\n</code></pre>\n\n<p>Revision:</p>\n\n<p>according to the advise, I've changed my `context.tsx' to the following, but still getting the error message:</p>\n\n<blockquote>\n  <p>Argument of type '{ latlng: null; searchTerm: null; bookingId: null;\n  myPin: null; selectedPin: null; selectedCard: null; selectedCardPin:\n  null; }' is not assignable to parameter of type 'MyContextType'.<br>\n  Object literal may only specify known properties, and 'latlng' does\n  not exist in type 'MyContextType'.ts(2345)</p>\n</blockquote>\n\n<pre><code>import { createContext } from 'react'\n\ninterface MyContextType {\n    dispatch: React.Dispatch&lt;any&gt;,\n    state: {\n      latlng?: any,\n      searchTerm?: any,\n      bookingId?: any,\n      myPin?: any,\n      selectedPin?: any,\n      selectedCard?: any, \n      selectedCardPin?: any,\n    }\n}\n\nconst Context = createContext&lt;MyContextType&gt;({\n    latlng: null,\n    searchTerm: null,\n    bookingId: null,\n    myPin: null,\n    selectedPin: null,\n    selectedCard: null, \n    selectedCardPin: null,\n})\n\nexport default Context\n</code></pre>\n\n<p>2nd revision: </p>\n\n<p>When I change my <code>context.jsx</code> to match the contents of <code>createContext</code> as following: </p>\n\n<pre><code>interface MyContextType {\n    latlng?: any,\n    searchTerm?: any,\n    bookingId?: any,\n    myPin?: any,\n    selectedPin?: any,\n    selectedCard?: any, \n    selectedCardPin?: any,\n}\n\nconst Context = createContext&lt;MyContextType&gt;({\n    latlng: null,\n    searchTerm: null,\n    bookingId: null,\n    myPin: null,\n    selectedPin: null,\n    selectedCard: null,\n    selectedCardPin: null,\n})\n</code></pre>\n\n<p>the error is gone in <code>context.jsx</code>, but it causes a type error in app.jsx. </p>\n\n<blockquote>\n  <p>Type '{ state: {}; dispatch: Dispatch; }' is not assignable to\n  type 'MyContextType'.   Object literal may only specify known\n  properties, and 'state' does not exist in type\n  'MyContextType'.ts(2322)</p>\n</blockquote>\n\n<pre><code>    &lt;Context.Provider value={{ state //&lt;-- here //, dispatch }}&gt;\n    &lt;/Context.Provider&gt;\n\n</code></pre>\n"}, {"tags": ["javascript", "html", "regex", "typescript", "code-injection"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1565195913, "post_id": 57398785, "comment_id": 101279311, "body": "In addition to using <a href=\"https://caniuse.com/#search=sandbox\" rel=\"nofollow noreferrer\">the sandbox attribute</a>, you probably don&#39;t want to build your iframe content from string, but using DOM manipulation functions where you create an <code>iframe</code> element and then assign it content using DOM building functions and property assignment as much as possible?"}, {"owner": {"reputation": 163, "user_id": 8411483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GItGb.png?s=128&g=1", "display_name": "Dusan Malusev", "link": "https://stackoverflow.com/users/8411483/dusan-malusev"}, "edited": false, "score": 0, "creation_date": 1565206442, "post_id": 57398785, "comment_id": 101284006, "body": "Checkout DOMPurify library for sanitizing the elements <a href=\"https://github.com/cure53/DOMPurify\" rel=\"nofollow noreferrer\">github.com/cure53/DOMPurify</a>"}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 4903624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569d650e0b9617eb633e130986aa3e72?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfury2", "link": "https://stackoverflow.com/users/4903624/dragonfury2"}, "edited": false, "score": 0, "creation_date": 1565256588, "post_id": 57403167, "comment_id": 101299148, "body": "Thanks, this almost works but ends up looking like this when I enter <code>&quot;&lt;&#47;span&gt;</code> into the URL field: <a href=\"https://imgur.com/h6tRKly\" rel=\"nofollow noreferrer\">link</a> How do I tell the regex to also match when the first occurrence of the character <code>&quot;</code> then replace with nothing?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 316, "user_id": 4903624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569d650e0b9617eb633e130986aa3e72?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfury2", "link": "https://stackoverflow.com/users/4903624/dragonfury2"}, "edited": false, "score": 0, "creation_date": 1565299156, "post_id": 57403167, "comment_id": 101320755, "body": "<code>Thanks, this almost works but ends up looking like this when I enter &quot;&lt;&#47;span&gt; into the URL</code> Well buddy, that&#39;s why I put this link in my answer <a href=\"https://regex101.com/r/qwEyED/1\" rel=\"nofollow noreferrer\">regex101.com/r/qwEyED/1</a> so nobody can come back and say what I just quoted you as saying.  Cool, huh ?"}, {"owner": {"reputation": 316, "user_id": 4903624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569d650e0b9617eb633e130986aa3e72?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfury2", "link": "https://stackoverflow.com/users/4903624/dragonfury2"}, "edited": false, "score": 0, "creation_date": 1565350264, "post_id": 57403167, "comment_id": 101336076, "body": "Sorry I dont understand. The problem I&#39;m having is the <code>&quot;</code> character I enter at the start in the user input field closes the <code>&lt;input type=&quot;text&quot; value=&quot;</code> in the html, this then causes the program to become buggy. (See example in link pic above)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 316, "user_id": 4903624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569d650e0b9617eb633e130986aa3e72?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfury2", "link": "https://stackoverflow.com/users/4903624/dragonfury2"}, "edited": false, "score": 0, "creation_date": 1565381627, "post_id": 57403167, "comment_id": 101350739, "body": "@dragonfury2 - You don&#39;t understand, html will be <i>STRIPPED</i> the *** out of your input. And your question is about what, a double quote ?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 1, "last_activity_date": 1565218491, "last_edit_date": 1565218491, "creation_date": 1565218184, "answer_id": 57403167, "question_id": 57398785, "link": "https://stackoverflow.com/questions/57398785/prevent-html-injections-with-javascript-typescript/57403167#57403167", "title": "Prevent html Injections with Javascript/Typescript", "body": "<p>I would strip <em>all</em> html from the URL variable:</p>\n\n<pre><code>url = url.replace( /&lt;(?:(?:(?:(script|style|object|embed|applet|noframes|noscript|noembed)(?:\\s+(?:\"[\\S\\s]*?\"|'[\\S\\s]*?'|(?:(?!\\/&gt;)[^&gt;])?)+)?\\s*&gt;)[\\S\\s]*?&lt;\\/\\1\\s*(?=&gt;))|(?:\\/?[\\w:]+\\s*\\/?)|(?:[\\w:]+\\s+(?:\"[\\S\\s]*?\"|'[\\S\\s]*?'|[^&gt;]?)+\\s*\\/?)|\\?[\\S\\s]*?\\?|(?:!(?:(?:DOCTYPE[\\S\\s]*?)|(?:\\[CDATA\\[[\\S\\s]*?\\]\\])|(?:--[\\S\\s]*?--)|(?:ATTLIST[\\S\\s]*?)|(?:ENTITY[\\S\\s]*?)|(?:ELEMENT[\\S\\s]*?))))&gt;/g,\n             \"\");\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/qwEyED/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/qwEyED/1</a></p>\n\n<p>Then do a validation on the URL:  </p>\n\n<pre><code>var patURL = /^(?!mailto:)(?:(?:https?|ftp):\\/\\/)?(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:\\/[^\\s]*)?$/;\n\nvar res = patURL.test( url );\nif ( res != true )\n    // bad url\n</code></pre>\n"}], "owner": {"reputation": 316, "user_id": 4903624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569d650e0b9617eb633e130986aa3e72?s=128&d=identicon&r=PG&f=1", "display_name": "dragonfury2", "link": "https://stackoverflow.com/users/4903624/dragonfury2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 57403167, "answer_count": 1, "score": 4, "last_activity_date": 1565218491, "creation_date": 1565195431, "question_id": 57398785, "link": "https://stackoverflow.com/questions/57398785/prevent-html-injections-with-javascript-typescript", "title": "Prevent html Injections with Javascript/Typescript", "body": "<p>So I have a simple app where a user can insert a URL into an iframe window. Problem is this allows for html injection which screws up the display.</p>\n\n<p>Is there a simple way to prevent this from happening? Like a regex escape function etc?</p>\n\n<p>TS/JS code for iframe window:</p>\n\n<pre><code>public renderPlot(): void {\n    let ht: string = '';\n\n    let url: string = this.configPBg[EConfigPKeys.IFrameAddress];\n\n    if (url == undefined || url.length === 0) {\n        this.renderWarningMessage('No valid address configured');\n        return;\n    }\n\n    // auto stream with url like this : https://www.youtube.com/embed/jdnhfg?&amp;autoplay=1&amp;mute=1\n    ht += '&lt;iframe width=\"' + this.chartWindowSize.width + '\" height=\"' + this.chartWindowSize.plotHeight + '\" ';\n    ht += 'src=\"' + url + '\" ';\n    ht += 'frameborder=\"0\" ';\n    ht += '&gt;';\n    ht += '&lt;/iframe&gt;';\n</code></pre>\n\n<p>I tried adding this but failed to catch anything:</p>\n\n<pre><code>url.replace(/&lt;/g, \"&amp;lt;\").replace(/&gt;/g, \"&amp;gt;\");\n</code></pre>\n\n<p>the URL entry form looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pRnMO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pRnMO.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["typescript", "typescript-typings"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 2, "creation_date": 1565196412, "post_id": 57398734, "comment_id": 101279553, "body": "Not possible directly, control flow analysis will narrow the type on assignments (<a href=\"https://www.typescriptlang.org/play/#code/DYUwLgBAbghgTgSxgI1ALggZzIgdgcwgB8JcBXAW2RDgG4AoWRFUCCAXggCIuGmlUIAHTIE+ABQBKCAHoZEBJiw4EBCEA)/\" rel=\"nofollow noreferrer\">typescriptlang.org/play/#code/&hellip;</a> type guards (<a href=\"https://www.typescriptlang.org/play/#code/DYUwLgBAbghgTgSxgI1ALggZzIgdgcwgB8JcBXAW2RDggF4IBZGMACwDo4ZcATAewoAKAJQQAfBAAM7AKwQA-BABESiGgCMAbgBQCAGaCwATwAOIPnujwkqEPToMl2PPiWiA3tojeriFKHZkBHwRCAB6MIgETCwcBAIIbQBfCBBgTDtPH18bALA+AFEADxM+XBBcMCRgUIiomPIqGmSgA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/#code/&hellip;</a>):"}, {"owner": {"reputation": 660, "user_id": 2305386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c65a8842e1b89c2074c6e308b2657264?s=128&d=identicon&r=PG", "display_name": "user44", "link": "https://stackoverflow.com/users/2305386/user44"}, "edited": false, "score": 0, "creation_date": 1565203916, "post_id": 57398734, "comment_id": 101282890, "body": "If you use the <i>any</i> variable type, you will achieve the result you mentioned - the variable will change type at runtime depending on the assigned value."}], "answers": [{"comments": [{"owner": {"reputation": 1280, "user_id": 10226440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c441d4834677341f39d2cd431570562d?s=128&d=identicon&r=PG&f=1", "display_name": "MaximilianMairinger", "link": "https://stackoverflow.com/users/10226440/maximilianmairinger"}, "edited": false, "score": 0, "creation_date": 1565258974, "post_id": 57406486, "comment_id": 101300539, "body": "My question provides a simplified problem, ofc I know how to parse primitives in js, but this does not narrow the type of variable as shown here:  <a href=\"https://www.typescriptlang.org/play/index.html#code/DYUwLgBAbgXBDOYBOBLAdgcwgHwmgrgLYBGISA3AFCUD0NAAmPALQoZoD2SIlUEAvBAByRUkgAUUAJTU6KeAjApgwCBwDWvARABEAQ3gATHUA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/index.html#code/&hellip;</a>"}], "tags": [], "owner": {"reputation": 627, "user_id": 10422906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efdc46240d4746dc19dfb03f4cca8ce0?s=128&d=identicon&r=PG&f=1", "display_name": "nktshn", "link": "https://stackoverflow.com/users/10422906/nktshn"}, "is_accepted": false, "score": 0, "last_activity_date": 1565246076, "creation_date": 1565246076, "answer_id": 57406486, "question_id": 57398734, "link": "https://stackoverflow.com/questions/57398734/how-to-reassign-a-type-to-a-variable-in-typescript/57406486#57406486", "title": "How to reassign a type to a variable in typescript", "body": "<p>if you control the values and ensured that everything is correct, you can use simple javascript's type convertation:</p>\n\n<pre><code>let variable: string | number = \"1\";\nvariable = Number(variable) // here your type will be number\n</code></pre>\n"}], "owner": {"reputation": 1280, "user_id": 10226440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c441d4834677341f39d2cd431570562d?s=128&d=identicon&r=PG&f=1", "display_name": "MaximilianMairinger", "link": "https://stackoverflow.com/users/10226440/maximilianmairinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565246076, "creation_date": 1565195230, "question_id": 57398734, "link": "https://stackoverflow.com/questions/57398734/how-to-reassign-a-type-to-a-variable-in-typescript", "title": "How to reassign a type to a variable in typescript", "body": "<p>How to reassign a different type to a variable in typescript without creating a new variable?</p>\n\n<pre><code>let variable: string | number;\n\n\n//somewhat like one of those not working examples\ndeclare let variable: string;\nvaraible: string;\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "edited": false, "score": 3, "creation_date": 1565194858, "post_id": 57398507, "comment_id": 101278749, "body": "there&#39;s on-(and off-)going discussion about this on <a href=\"https://github.com/Microsoft/TypeScript/issues/1897\" rel=\"nofollow noreferrer\">github</a>, started in 2015"}], "owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565194871, "creation_date": 1565194345, "last_edit_date": 1565194871, "question_id": 57398507, "link": "https://stackoverflow.com/questions/57398507/how-to-describe-a-value-that-can-be-serialized-correctly", "title": "How to describe a value that can be serialized correctly?", "body": "<p>I have a function that only works correctly if the object passed can be serialized, in other words if it contains no Symbols and functions:</p>\n\n<pre><code> createHash(\"test\"); // Will work\n createHash({ test: \"test\", method() { } }); // Will not work, throw type error\n\n function createHash&lt;T&gt;(data: Serializable&lt;T&gt;): Hash&lt;T&gt; {\n   const salt = createSalt();\n   return { salt, hash: CryptoJS.PBKDF2(JSON.stringify(data), salt).toString(), };\n }\n</code></pre>\n\n<p>I was able to write the following type definition:</p>\n\n<pre><code>type Serializable&lt;T&gt; = \n  T extends (Function | symbol) ? never : \n  T extends (string | number | boolean) ? T : \n  { [K in keyof T]: Serializable&lt;T[K]&gt; }; \n</code></pre>\n\n<p>But this does not work in all cases, namely when passing those Serializables between two functions I get:</p>\n\n<pre><code>Argument of type 'Serializable&lt;T&gt;' is not assignable to parameter of type 'T'.\n'Serializable&lt;T&gt;' is assignable to the constraint of type 'T', but 'T' could be instantiated with a different subtype of constraint '{}'.\n</code></pre>\n\n<p>... and the error it provides is also not quite useful:</p>\n\n<pre><code>createHash({ test: \"test\", method() { } }); // Type \"() =&gt; void is not assignable to type never\"\n</code></pre>\n\n<p>So my question is: How can I type Serializable in a way that it generates useful error messages and works without manually specifying T?</p>\n"}, {"tags": ["html", "angular", "typescript", "google-analytics"], "comments": [{"owner": {"reputation": 664, "user_id": 8351493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f51ee7d1ce3d03323a059cb2f53f01d?s=128&d=identicon&r=PG&f=1", "display_name": "Barkha", "link": "https://stackoverflow.com/users/8351493/barkha"}, "edited": false, "score": 0, "creation_date": 1565192886, "post_id": 57398037, "comment_id": 101277790, "body": "you do the push inside someFunc() function"}, {"owner": {"reputation": 61, "user_id": 9959589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61005347b3a4d4388c7846f7e8f7d14d?s=128&d=identicon&r=PG&f=1", "display_name": "user9959589", "link": "https://stackoverflow.com/users/9959589/user9959589"}, "reply_to_user": {"reputation": 664, "user_id": 8351493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f51ee7d1ce3d03323a059cb2f53f01d?s=128&d=identicon&r=PG&f=1", "display_name": "Barkha", "link": "https://stackoverflow.com/users/8351493/barkha"}, "edited": false, "score": 0, "creation_date": 1565193109, "post_id": 57398037, "comment_id": 101277903, "body": "Tried that as well, didnt work"}, {"owner": {"reputation": 664, "user_id": 8351493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f51ee7d1ce3d03323a059cb2f53f01d?s=128&d=identicon&r=PG&f=1", "display_name": "Barkha", "link": "https://stackoverflow.com/users/8351493/barkha"}, "edited": false, "score": 0, "creation_date": 1565193269, "post_id": 57398037, "comment_id": 101277990, "body": "were you getting same not recognised issue there as well?"}, {"owner": {"reputation": 9819, "user_id": 1422333, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/027550664136fcfca3d91b7852196bae?s=128&d=identicon&r=PG", "display_name": "Zell B.", "link": "https://stackoverflow.com/users/1422333/zell-b"}, "edited": false, "score": 0, "creation_date": 1565193645, "post_id": 57398037, "comment_id": 101278180, "body": "just remove &#39;this&#39; from this.dataLayer.push({&#39;event&#39;: &#39;Some event&#39;})"}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 11890407, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8hYC6jWrwi0/AAAAAAAAAAI/AAAAAAAAADc/izm1nZC4BeM/photo.jpg?sz=128", "display_name": "Samuel S&#225;nchez Bl&#252;mli", "link": "https://stackoverflow.com/users/11890407/samuel-s%c3%a1nchez-bl%c3%bcmli"}, "is_accepted": false, "score": 0, "last_activity_date": 1565193254, "creation_date": 1565193254, "answer_id": 57398224, "question_id": 57398037, "link": "https://stackoverflow.com/questions/57398037/how-to-include-datalayer-function-in-angular-click-method/57398224#57398224", "title": "How to include dataLayer function in angular (click) method", "body": "<p>You can add the push in the function that is being called on the click event.</p>\n\n<pre><code>&lt;div class=\"clickable\" (click)=\"someFunc()\"&gt;Click here&lt;/div&gt;\n\nsomeFunc() {\n    this.dataLayer.push({'event': 'Some event'});\n}\n</code></pre>\n\n<p>The way you are using the angular click event is correct.</p>\n"}], "owner": {"reputation": 61, "user_id": 9959589, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61005347b3a4d4388c7846f7e8f7d14d?s=128&d=identicon&r=PG&f=1", "display_name": "user9959589", "link": "https://stackoverflow.com/users/9959589/user9959589"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1565198767, "creation_date": 1565192544, "last_edit_date": 1565198767, "question_id": 57398037, "link": "https://stackoverflow.com/questions/57398037/how-to-include-datalayer-function-in-angular-click-method", "title": "How to include dataLayer function in angular (click) method", "body": "<p>I want to include dataLater.push with the click handler in angular </p>\n\n<pre><code>(click)=\"someFunc(); this.dataLayer.push({'event': 'Some event'})\"\n</code></pre>\n\n<p>This works but not what I want:\n<code>\nonclick=\"dataLayer.push({'event': 'Some event'});\"\n</code></p>\n\n<p>I also tried using a function referenced in my ts file:</p>\n\n<pre><code>  dataLayer: any[];\n someFunc(){\n    this.dataLayer.push({'event': 'Some event'});\n  }\n</code></pre>\n\n<p>The function is not recognized, although when using javascript onClick method it works, how can I use it in angular click handler.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "ecmascript-6"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565193493, "post_id": 57397986, "comment_id": 101278094, "body": "Please consider editing this code to be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as described in the guidelines for <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a good question</a>.  Ideally the code would have no external dependencies and could demonstrate your issue in a standalone IDE like <a href=\"https://www.typescriptlang.org/play/\" rel=\"nofollow noreferrer\">The Playground</a>."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565193588, "post_id": 57397986, "comment_id": 101278149, "body": "Without such a reproducible example, I can only really guess what will fix your issue because I can&#39;t test it. My guess: <code>get(userInfo, &#39;phone&#39;, [] as Phone[])</code> or <code>const noPhones: Phone[] = []; get(userInfo, &#39;phone&#39;, noPhones)</code>"}, {"owner": {"reputation": 7629, "user_id": 4371033, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-qmPW-NvFpV4/AAAAAAAAAAI/AAAAAAAAABM/lSGlag6WF30/photo.jpg?sz=128", "display_name": "Non", "link": "https://stackoverflow.com/users/4371033/non"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565225302, "post_id": 57397986, "comment_id": 101289191, "body": "Hi @jcalz put it as an answer so I can give you the proper vote."}], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 4, "last_activity_date": 1565228293, "creation_date": 1565228293, "answer_id": 57404143, "question_id": 57397986, "link": "https://stackoverflow.com/questions/57397986/ts-error-cannot-invoke-an-expression-whose-type-lacks-a-call-signature/57404143#57404143", "title": "TS error: Cannot invoke an expression whose type lacks a call signature", "body": "<p>Since I don't have lodash typings available, I'll just assume that the <code>get()</code> function behaves more or less as follows:</p>\n\n<pre><code>type ReplaceUndefined&lt;T, V&gt; = T extends undefined ? V : T;\n\ndeclare function get&lt;T, K extends keyof T, V&gt;(\n  obj: T,\n  key: K,\n  dflt: V\n): ReplaceUndefined&lt;T[K], V&gt;;\n</code></pre>\n\n<p>This means that if <code>key</code> of type <code>K</code> is a key of <code>obj</code> of type <code>T</code>, then <code>get()</code> will return a value of type <code>T[K]</code>... unless that value may be <code>undefined</code>, in which case it will replace <code>undefined</code> with the type of the <code>dflt</code> value, like this:</p>\n\n<pre><code>const val = get({ a: Math.random() &lt; 0.5 ? \"a\" : undefined }, \"a\", 123); // string | number\n</code></pre>\n\n<p>Also, I'm asssuming the following type and value declarations:</p>\n\n<pre><code>interface Phone {\n  type: string;\n  num: string;\n}\ndeclare const userInfo: { phone?: Phone[] };\n</code></pre>\n\n<hr>\n\n<p>Now I'm ready to start answering the question.  When I try to call <code>get()</code> like this, we get an error:</p>\n\n<pre><code>get(userInfo, \"phone\", []).map((item, index) =&gt; \"Number: \" + item.num); // error!\n// \"cannot invoke an expression that lacks a call signature\"\n</code></pre>\n\n<p>The problem is that the default value <code>[]</code> is inferred by the compiler to be of type <code>never[]</code>.  This the return value of <code>get()</code> will be the union type <code>Phone[] | never[]</code>, and thus the <code>map</code> method of this union will itself be a union of the method types for <code>Phone[]</code> and for <code>never[]</code>.  It is a longstanding issue in TypeScript that <a href=\"https://github.com/microsoft/TypeScript/issues/7294\" rel=\"nofollow noreferrer\">you usually can't call unions of functions</a>.  This has been <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#improved-behavior-for-calling-union-types\" rel=\"nofollow noreferrer\">improved</a> in recent language versions, but there are still <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#caveats-2\" rel=\"nofollow noreferrer\">limitations</a>, such as when more than one function in the union is generic.  And since <code>map()</code> is generic, TypeScript doesn't know how to call it on <code>Phone[] | never[]</code>.</p>\n\n<hr>\n\n<p>The obvious fix here is that you don't want <code>[]</code> to be treated as <code>never[]</code>; instead you'd like it to be treated as an empty <code>Phone[]</code>.  If you can do that, then what comes out of <code>get()</code> will be <code>Phone[] | Phone[]</code>, which is just <code>Phone[]</code>, and therefore its <code>map()</code> method is no longer a union type, and is callable.</p>\n\n<p>Here are two ways to do it... one is with a <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">type assertion</a>:</p>\n\n<pre><code>get(userInfo, \"phone\", [] as Phone[]).map((item, index) =&gt; \"Number: \" + item.num); // okay\n</code></pre>\n\n<p>and the other is with a type annotation on a new variable:</p>\n\n<pre><code>const noPhones: Phone[] = [];\nget(userInfo, \"phone\", noPhones).map((item, index) =&gt; \"Number: \" + item.num); // okay\n</code></pre>\n\n<p>Okay, hope that helps.  Good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/C4TwDgpgBAShYBsCGBjCBVAdgEwgMwEtMJsAeAFQBooA1APigF4pyoIAPYCHAZygFcc+IiSgB+WlABcLANwBYAFBLcKZACdoeQSmAEA9pigBzCMArUA0m07dsfANYQQ+vC2r0AFEqhR9AIwArGSofKCcQGUtKMOw8BGAZGiUAShk4RFQMIUJiMnIAbUsAXQ86BWVFFEMeYCgANyQEJhMzTwBvKCQZAFkkYAALADp1JBx9AFtPFKhSKAAGIYBWcSgAIiQ16QEckWwoAF9qDbXqAEYAJgBmFNkoAHp7qFr1ImMoAB8oTH4J-wh1EolEQuOo8FkoAAFAaGaDtMKgSAyF5vCq+H4TZHAV6YYwVA4qCBqJCaKDVTC1AQ8AEASUweH0Mk6YBhxDEMmhsIKxUOFSUpmAnn41PUdIZxxZsNOUG5KSGEyQYE8ngIXAm1CIuHYM0YDDWADlfv91DItgBqKCqiATIYY24PJ4A9T6dQAQiUj3WKDGmH0dSI9X0Ti6Rg4YE0PB4BiMg36UGQKAcfCQZKazSjxkw-X4mjWQMUAqFIrF+glrIg0u5XT4nOIsvliu8il8KrVGqE2qYesNfwBpqgFqtNoxqT5VRqdV9tYgPA55arzG5FULwtp9NL60lxGlU-LPDlCqVret7a1Ou7Rr76wHlrVtt+tyUQA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 7629, "user_id": 4371033, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh4.googleusercontent.com/-qmPW-NvFpV4/AAAAAAAAAAI/AAAAAAAAABM/lSGlag6WF30/photo.jpg?sz=128", "display_name": "Non", "link": "https://stackoverflow.com/users/4371033/non"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7479, "favorite_count": 0, "accepted_answer_id": 57404143, "answer_count": 1, "score": 0, "last_activity_date": 1565228293, "creation_date": 1565192357, "last_edit_date": 1565192908, "question_id": 57397986, "link": "https://stackoverflow.com/questions/57397986/ts-error-cannot-invoke-an-expression-whose-type-lacks-a-call-signature", "title": "TS error: Cannot invoke an expression whose type lacks a call signature", "body": "<p>I am using lodash on a TypeScript app and I am getting an error</p>\n\n<blockquote>\n  <p>Cannot invoke an expression whose type lacks a call signature. Type '((callbackfn: (value: never, index: number, array: never[]) => U, thisArg?: any) => U[]) | ((callbackfn: (value: Phone, index: number, array: Phone[]) => U, thisArg?: any) => U[])' has no compatible call signatures.ts(2349)</p>\n</blockquote>\n\n<p>Function:</p>\n\n<pre><code>        {get(userInfo, 'phone', []).map((item, index) =&gt; (\n          &lt;View style={styles.userPhone} key={index}&gt;\n            {item.type === 'Desk' &amp;&amp; &lt;Text&gt;Phone: {item.num}&lt;/Text&gt;}\n            {item.type === 'Mobile' &amp;&amp; &lt;Text&gt;Mobile: {item.num}&lt;/Text&gt;}\n          &lt;/View&gt;\n        ))}\n</code></pre>\n\n<p>If I do this it works correctly:</p>\n\n<pre><code>        {userInfo.phone &amp;&amp;\n           userInfo.phone.map((item, index) =&gt; (\n            &lt;View style={styles.userPhone} key={index}&gt;\n              {item.type === 'Desk' &amp;&amp; &lt;Text&gt;Phone: {item.num}&lt;/Text&gt;}\n              {item.type === 'Mobile' &amp;&amp; &lt;Text&gt;Mobile: {item.num}&lt;/Text&gt;}\n            &lt;/View&gt;\n        ))}\n</code></pre>\n\n<p>So what could I be missing?</p>\n\n<p>PS:\nLodash <code>get</code> docs: <a href=\"https://lodash.com/docs/#get\" rel=\"nofollow noreferrer\">https://lodash.com/docs/#get</a></p>\n\n<p>I have installed types package for lodash -> <a href=\"https://www.npmjs.com/package/@types/lodash\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/@types/lodash</a></p>\n\n<p>The thing is that I can not do it like this <code>{userInfo.phone &amp;&amp; userInfo.phone.map(...)}</code> because we are enforced to use <code>get</code> for this type of things.</p>\n"}, {"tags": ["typescript", "unit-testing", "jestjs", "ts-jest"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1565191407, "post_id": 57397699, "comment_id": 101276997, "body": "You need to pass a callable that errors on invocation, otherwise the error occurs <i>before</i> you actually call <code>expect</code>. Read <a href=\"https://jestjs.io/docs/en/expect#tothrowerror\" rel=\"nofollow noreferrer\">the example</a> more carefully: <i>&quot;Note: <b>You must wrap the code in a function</b>, otherwise the error will not be caught and the assertion will fail&quot;</i> (emphasis mine)."}, {"owner": {"reputation": 5941, "user_id": 1520278, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c7daf889ee792d6d9c7460e244ae3b0c?s=128&d=identicon&r=PG&f=1", "display_name": "AdityaParab", "link": "https://stackoverflow.com/users/1520278/adityaparab"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1565191446, "post_id": 57397699, "comment_id": 101277024, "body": "you mean <code>expect(() =&gt; arr.random())</code> or something like this?"}], "owner": {"reputation": 5941, "user_id": 1520278, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c7daf889ee792d6d9c7460e244ae3b0c?s=128&d=identicon&r=PG&f=1", "display_name": "AdityaParab", "link": "https://stackoverflow.com/users/1520278/adityaparab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 14, "favorite_count": 0, "closed_date": 1565199398, "answer_count": 0, "score": 0, "last_activity_date": 1565191667, "creation_date": 1565191333, "last_edit_date": 1565191667, "question_id": 57397699, "link": "https://stackoverflow.com/questions/57397699/test-exceptions-in-jest", "closed_reason": "Duplicate", "title": "Test exceptions in jest", "body": "<p>I have a new <code>Array.prototype</code> method</p>\n\n<pre><code>// tslint:disable-next-line: interface-name\ninterface Array&lt;T&gt; {\n    random(): T;\n    randomInRange(): T;\n}\n\nArray.prototype.random = function random() {\n    if (this.length &lt; 3) {\n        throw new Error();\n    }\n    return this[Math.floor(Math.random() * this.length)];\n};\n</code></pre>\n\n<p>How do I write test case to verify if an error is thrown?</p>\n\n<pre><code>// prototypes.test.ts\nimport './prototypes';\n\ndescribe('Test Array.prototype.random method', () =&gt; {\n    it('should return a random number from the array', () =&gt; {\n        const arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n        const random = arr.random();\n        const isNumberPresentInArray = arr.includes(random);\n\n        expect(isNumberPresentInArray).toBe(true);\n    });\n\n    it('should throw error if there are less than 3 elements in the array', () =&gt; {\n        const arr = [1, 2];\n        expect(arr.random()).toThrow(new Error());\n    });\n});\n</code></pre>\n\n<p>I tried with <code>toThrowError</code> as well, but no luck.</p>\n"}, {"tags": ["node.js", "typescript", "firebase", "google-cloud-functions"], "answers": [{"comments": [{"owner": {"reputation": 470, "user_id": 2267386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5469465257bb6df59eec6bf7bcfceca4?s=128&d=identicon&r=PG", "display_name": "Bob.B", "link": "https://stackoverflow.com/users/2267386/bob-b"}, "edited": false, "score": 1, "creation_date": 1565234898, "post_id": 57398217, "comment_id": 101290863, "body": "Global Scope would be after after import? Sorry, I am very new to this"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 470, "user_id": 2267386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5469465257bb6df59eec6bf7bcfceca4?s=128&d=identicon&r=PG", "display_name": "Bob.B", "link": "https://stackoverflow.com/users/2267386/bob-b"}, "edited": false, "score": 2, "creation_date": 1565235257, "post_id": 57398217, "comment_id": 101290925, "body": "Any place that&#39;s not inside a function or other block with curly braces, where you typically don&#39;t indent."}, {"owner": {"reputation": 470, "user_id": 2267386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5469465257bb6df59eec6bf7bcfceca4?s=128&d=identicon&r=PG", "display_name": "Bob.B", "link": "https://stackoverflow.com/users/2267386/bob-b"}, "edited": false, "score": 1, "creation_date": 1565256002, "post_id": 57398217, "comment_id": 101298799, "body": "Can you please explain what    &quot;Don&#39;t pass any parameters to accept the default service account, which should have permission to read and write your Cloud Firestore database.&quot; means? I am getting This error now &quot;  error: Error: Could not load the default credentials. Browse to <a href=\"https://cloud.google.com/docs/authentication/getting-started\" rel=\"nofollow noreferrer\">cloud.google.com/docs/authentication/getting-started</a> for more information.&quot; and seems it is related to the service account related issue."}, {"owner": {"reputation": 470, "user_id": 2267386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5469465257bb6df59eec6bf7bcfceca4?s=128&d=identicon&r=PG", "display_name": "Bob.B", "link": "https://stackoverflow.com/users/2267386/bob-b"}, "edited": false, "score": 0, "creation_date": 1565258525, "post_id": 57398217, "comment_id": 101300292, "body": "Also, the function works correctly if I deploy it to firebase so the error is only in the local server only."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 470, "user_id": 2267386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5469465257bb6df59eec6bf7bcfceca4?s=128&d=identicon&r=PG", "display_name": "Bob.B", "link": "https://stackoverflow.com/users/2267386/bob-b"}, "edited": false, "score": 0, "creation_date": 1565281157, "post_id": 57398217, "comment_id": 101313597, "body": "Make sure you have the latest version of the emulator.  This means updating the global firebase-tools module."}, {"owner": {"reputation": 470, "user_id": 2267386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5469465257bb6df59eec6bf7bcfceca4?s=128&d=identicon&r=PG", "display_name": "Bob.B", "link": "https://stackoverflow.com/users/2267386/bob-b"}, "edited": false, "score": 0, "creation_date": 1565329131, "post_id": 57398217, "comment_id": 101326493, "body": "I did &quot;npm install -g firebase-tools&quot;  and it updated the package but I am still getting the same error.  I am sorry, I am just so new to all this and can&#39;t just figure out what i am missing."}, {"owner": {"reputation": 309, "user_id": 2388205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc69af5396264a24344fc315405f50e3?s=128&d=identicon&r=PG&f=1", "display_name": "Tadej", "link": "https://stackoverflow.com/users/2388205/tadej"}, "edited": false, "score": 0, "creation_date": 1579490612, "post_id": 57398217, "comment_id": 105771313, "body": "Today, this works for running on production, but on local I0m successfully using this: <code>admin.initializeApp({     credential: admin.credential.cert(serviceAccount),     databaseURL: &#39;localhost:8080&#39;, });</code>"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 17, "last_activity_date": 1565193217, "creation_date": 1565193217, "answer_id": 57398217, "question_id": 57397608, "link": "https://stackoverflow.com/questions/57397608/the-default-firebase-app-does-not-exist-make-sure-you-call-initializeapp-befo/57398217#57398217", "title": "The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services. at FirebaseAppError", "body": "<p>You should just call <code>admin.initializeApp()</code> at the global scope of your code.  Don't pass any parameters to accept the default service account, which should have permission to read and write your Cloud Firestore database.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 11061755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e20ad5026d84c1cf5834a202901f55?s=128&d=identicon&r=PG&f=1", "display_name": "Shanga", "link": "https://stackoverflow.com/users/11061755/shanga"}, "is_accepted": false, "score": 5, "last_activity_date": 1567848510, "creation_date": 1567848510, "answer_id": 57832395, "question_id": 57397608, "link": "https://stackoverflow.com/questions/57397608/the-default-firebase-app-does-not-exist-make-sure-you-call-initializeapp-befo/57832395#57832395", "title": "The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services. at FirebaseAppError", "body": "<p>This might sound like crazy, But I had the same issue. Then I've changed my \"admin.initializeApp();\" place like below. Then it works.</p>\n\n<pre><code>const functions = require('firebase-functions');\nconst admin = require('firebase-admin');\nconst express = require('express');\nconst app = express();\n//put here.\nadmin.initializeApp();\n\nconst db = admin.firestore();\n\nconst firebaseConfig = {\n// config data\n};\n\nconst firebase = require('firebase');\n\nfirebase.initializeApp(firebaseConfig);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13927391, "user_type": "registered", "profile_image": "https://graph.facebook.com/117810226663937/picture?type=large", "display_name": "\u0411\u0435\u0436\u0430\u043d \u0410\u0431\u0434\u0443\u043b\u0445\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/13927391/%d0%91%d0%b5%d0%b6%d0%b0%d0%bd-%d0%90%d0%b1%d0%b4%d1%83%d0%bb%d1%85%d0%b0%d0%b5%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1594716493, "last_edit_date": 1594716493, "creation_date": 1594712176, "answer_id": 62890190, "question_id": 57397608, "link": "https://stackoverflow.com/questions/57397608/the-default-firebase-app-does-not-exist-make-sure-you-call-initializeapp-befo/62890190#62890190", "title": "The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services. at FirebaseAppError", "body": "<p>Try it:</p>\n<pre><code>const functions = require('firebase-functions');\nconst admin = require('firebase-admin');\nconst app = require('express')();\nconst firebase = require('firebase');    \n\n// service account file custom for serve    \nvar serviceAccount = require(&quot;serviceAccount.json&quot;); // for deploying you need to delete it\n\n// admin credential for localhost or emulator\nadmin.initializeApp({\n    credential: admin.credential.cert(serviceAccount),\n    databaseURL: &quot;database_url&quot;\n});\n\n// Firebase SDK configuration        \nconst config ={\n    //firebase config\n};\n\nfirebase.initializeApp(config);\n    \nconst db = admin.firestore();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 14177690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6gs9e.jpg?s=128&g=1", "display_name": "Natalia Kolisnyk", "link": "https://stackoverflow.com/users/14177690/natalia-kolisnyk"}, "is_accepted": false, "score": 6, "last_activity_date": 1604741152, "creation_date": 1604741152, "answer_id": 64726221, "question_id": 57397608, "link": "https://stackoverflow.com/questions/57397608/the-default-firebase-app-does-not-exist-make-sure-you-call-initializeapp-befo/64726221#64726221", "title": "The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services. at FirebaseAppError", "body": "<p>word of advice, sometimes this comes even if you initialized the app properly, at that point just check whether your db instance is placed inside the function not global.</p>\n<p>#nodejs</p>\n<pre><code>var db = admin.database();//inside function\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 10562345, "user_type": "registered", "profile_image": "https://graph.facebook.com/1961646510803821/picture?type=large", "display_name": "Theja Wijesiriwardane", "link": "https://stackoverflow.com/users/10562345/theja-wijesiriwardane"}, "is_accepted": false, "score": 3, "last_activity_date": 1605868375, "creation_date": 1605868375, "answer_id": 64927875, "question_id": 57397608, "link": "https://stackoverflow.com/questions/57397608/the-default-firebase-app-does-not-exist-make-sure-you-call-initializeapp-befo/64927875#64927875", "title": "The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services. at FirebaseAppError", "body": "<p>you have to initialize app admin.initializeApp() before you use firestore or any other feature.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15034476, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UKqxnvOa5-c/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucl-xP2aqYWeFGpLLeFEe78198O52A/s96-c/photo.jpg?sz=128", "display_name": "Octavio Gomez", "link": "https://stackoverflow.com/users/15034476/octavio-gomez"}, "is_accepted": false, "score": 0, "last_activity_date": 1611041560, "last_edit_date": 1611041560, "creation_date": 1611033326, "answer_id": 65785804, "question_id": 57397608, "link": "https://stackoverflow.com/questions/57397608/the-default-firebase-app-does-not-exist-make-sure-you-call-initializeapp-befo/65785804#65785804", "title": "The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services. at FirebaseAppError", "body": "<p>i am use typescript, a pattner singleton, because admin.initializeApp(); needs a only instance</p>\n<pre><code>import admin from 'firebase-admin';\nexport default class firebaseDAO {\n\n    private static _intance: firebaseDAO;\n    db: any;\n    private constructor() {\n\n        admin.initializeApp();\n        this.db = admin.firestore();\n    }\n\n    public static get instance() {\n        return this._intance || (this._intance = new this());\n    }\n\n    // iniciar un metodo\n    start() {\n    }\n}\n</code></pre>\n<p>create a DAO</p>\n<pre><code>import firebaseDAO from '../database/firebase.dao';\n\nconstructor(){\n    this.db =  firebaseDAO.instance.db;\n}\n\nasync getPacientes() {\n    try {\n        const userQuerySnapshot = await this.db.collection('pacientes').get();\n        const users: any[] = [];\n        userQuerySnapshot.forEach(\n            (doc: any) =&gt; {\n                users.push({\n                    id: doc.id,\n                    data: doc.data()\n                });\n            }\n        );\n        this.response.resultado=users;\n        return  this.response;\n    } catch (error) {\n        this.response.resultado=null;\n        return  this.response;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 470, "user_id": 2267386, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5469465257bb6df59eec6bf7bcfceca4?s=128&d=identicon&r=PG", "display_name": "Bob.B", "link": "https://stackoverflow.com/users/2267386/bob-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11810, "favorite_count": 0, "accepted_answer_id": 57398217, "answer_count": 6, "score": 15, "last_activity_date": 1611041560, "creation_date": 1565191064, "last_edit_date": 1565258573, "question_id": 57397608, "link": "https://stackoverflow.com/questions/57397608/the-default-firebase-app-does-not-exist-make-sure-you-call-initializeapp-befo", "title": "The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services. at FirebaseAppError", "body": "<p>I am learning to use Firebase Cloud Function and I am following Firebase's official tutorial video for <a href=\"https://www.youtube.com/watch?v=7IkUgCLr5oA\" rel=\"noreferrer\">Learn JavaScript Promises (Pt.1)</a> </p>\n\n<p>When I run a local server and  go to the HTTP link I get </p>\n\n<p>Error: The default Firebase app does not exist. Make sure you call initializeApp() before using any of the Firebase services.</p>\n\n<p>I tried finding the solution but couldn't find anywhere. I got some vaguely related question but for javascript and my code is in typescript. I did add the suggested syntax in both .js and .ts file</p>\n\n<pre><code>admin.initializeApp(functions.config().firebase);\n</code></pre>\n\n<p>But still, I get the same error</p>\n\n<p>Here is my index.tcs.</p>\n\n<pre><code>import * as functions from 'firebase-functions';\nimport * as admin from 'firebase-admin';\n\n// Start writing Firebase Functions\n// https://firebase.google.com/docs/functions/typescript\n\nexport const getVoucher = functions.https.onRequest((request, response) =&gt; {\n    const promise = admin.firestore().doc('/voucher/Eg2AtnGmKmX8Y0vBZiBG').get()\n    const p2 = promise.then(snapshot=&gt;{\n        const data = snapshot.data()\n        response.send(data)\n    })\n    p2.catch(error =&gt; {\n        //Handlle the error\n        console.log('error: '+error)\n        response.status(500).send(error)\n    })\n});\n</code></pre>\n\n<p>The function works as intended when deployed to firebase tho. </p>\n"}, {"tags": ["angular", "typescript", "nativescript", "nativescript-angular"], "answers": [{"comments": [{"owner": {"reputation": 800, "user_id": 1865988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1F6WO.jpg?s=128&g=1", "display_name": "RichardMc", "link": "https://stackoverflow.com/users/1865988/richardmc"}, "edited": false, "score": 0, "creation_date": 1565253558, "post_id": 57399702, "comment_id": 101297457, "body": "When I said I had programmatically set the date that was the method I had used, I was still having the issue."}, {"owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "reply_to_user": {"reputation": 800, "user_id": 1865988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1F6WO.jpg?s=128&g=1", "display_name": "RichardMc", "link": "https://stackoverflow.com/users/1865988/richardmc"}, "edited": false, "score": 0, "creation_date": 1565253837, "post_id": 57399702, "comment_id": 101297608, "body": "The code in the OP seems not relevant then, please share a Playground Sample of the issue."}], "tags": [], "owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "is_accepted": false, "score": 0, "last_activity_date": 1565199594, "creation_date": 1565199594, "answer_id": 57399702, "question_id": 57397527, "link": "https://stackoverflow.com/questions/57397527/navigating-radcalender-with-buttons-instead-of-swipe/57399702#57399702", "title": "Navigating radcalender with buttons instead of swipe", "body": "<p><code>selectedDate</code> has nothing to do with what is the current dates / month being displayed in calendar, use <a href=\"https://docs.nativescript.org/ns-ui-api-reference/classes/radcalendar#gotodate\" rel=\"nofollow noreferrer\">goToDate(date)</a> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 800, "user_id": 1865988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1F6WO.jpg?s=128&g=1", "display_name": "RichardMc", "link": "https://stackoverflow.com/users/1865988/richardmc"}, "is_accepted": true, "score": 1, "last_activity_date": 1565253821, "creation_date": 1565253821, "answer_id": 57408563, "question_id": 57397527, "link": "https://stackoverflow.com/questions/57397527/navigating-radcalender-with-buttons-instead-of-swipe/57408563#57408563", "title": "Navigating radcalender with buttons instead of swipe", "body": "<p>Looks like the issue was caused by the dateSelected event on the radcalendar somehow triggering instead of the navigation on initial load (no idea why this is the case). This stopped occurring once I added the loaded event and loaded the calendar into a local object a different way:</p>\n\n<pre><code>&lt;RadCalendar eventsViewMode=\"Inline\" \n        selectionMode=\"Single\" \n        viewMode=\"Month\" \n        transitionMode=\"Slide\"\n        locale=\"en-US\" \n        (dateSelected)=\"onDateSelected($event)\"\n        (loaded)=\"calendarLoaded($event)\"&gt;\n&lt;/RadCalendar&gt;\n\n\n\n  import { RadCalendar } from \"nativescript-ui-calendar\";\n\n  mainCalendar: RadCalendar;\n\n  calendarLoaded(args) {\n    this.mainCalendar = &lt;RadCalendar&gt;args.object;\n  }\n\n  forward() {  \n    this.mainCalendar.navigateForward(); \n  }\n\n  back() { \n    this.mainCalendar.navigateBack(); \n  }\n</code></pre>\n"}], "owner": {"reputation": 800, "user_id": 1865988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/1F6WO.jpg?s=128&g=1", "display_name": "RichardMc", "link": "https://stackoverflow.com/users/1865988/richardmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 57408563, "answer_count": 2, "score": 0, "last_activity_date": 1565253821, "creation_date": 1565190811, "last_edit_date": 1565229807, "question_id": 57397527, "link": "https://stackoverflow.com/questions/57397527/navigating-radcalender-with-buttons-instead-of-swipe", "title": "Navigating radcalender with buttons instead of swipe", "body": "<p>I am attempting to add buttons for navigating through months on a radcalendar (older users struggling with the concept of swiping on phones). App is only used on phones and not tablets.</p>\n\n<p>What I have so far works but only once the user manually selects a date separate to the one that was programmatically set when constructing the calendar. Otherwise, nothing happens at all.</p>\n\n<pre><code>&lt;DockLayout stretchLastChild=\"true\"&gt;\n    &lt;GridLayout columns=\"auto,auto\" rows=\"auto\" dock=\"top\" &gt;\n            &lt;Button col=\"0\" text=\"back\" (tap)=\"back()\"&gt;&lt;/Button&gt;\n            &lt;Button col=\"1\" text=\"forward\" (tap)=\"forward()\"&gt;&lt;/Button&gt;\n    &lt;/GridLayout&gt;\n\n    &lt;StackLayout&gt;\n            &lt;RadCalendar #calendar \n                eventsViewMode=\"Inline\" \n                selectionMode=\"Single\" \n                viewMode=\"Month\" \n                transitionMode=\"Slide\"\n                locale=\"en-US\" \n                [displayedDate]=\"selectedDate\"\n                [selectedDate]=\"selectedDate\"\n                (dateSelected)=\"onDateSelected($event)\"&gt;\n            &lt;/RadCalendar&gt;\n    &lt;/StackLayout&gt;\n&lt;/DockLayout&gt;\n\n\n\nimport { Component, OnInit, ChangeDetectorRef, ViewChild } from \"@angular/core\";\nimport { RadCalendarComponent } from \"nativescript-ui-calendar/angular\";\nimport { ModalDialogParams } from \"nativescript-angular/directives/dialogs\";\n\n\n@Component({\n  selector: 'app-date-selector-modal-view',\n  templateUrl: './date-selector-modal-view.component.html'\n})\nexport class DateSelectorModalViewComponent implements OnInit {\n  @ViewChild(\"calendar\") calendarView: RadCalendarComponent;\n  selectedDate: Date = new Date();\n  hideFutureDates:boolean = false;\n\n  public constructor(public params: ModalDialogParams, private cdRef:ChangeDetectorRef) { }\n\n  ngOnInit() {\n    let defaultDate = this.params.context.defaultDate;\n    if(defaultDate){\n      this.selectedDate = defaultDate;\n      this.cdRef.detectChanges();\n    }\n  }\n\n  forward() {  \n    this.calendarView.calendar.navigateForward(); \n  }\n\n  back() { \n    this.calendarView.calendar.navigateBack(); \n  }\n\n  // On save button close\n  save() {\n    this.close(this.selectedDate);\n  }\n\n  // Update selected date on change\n  onDateSelected(args) {\n    this.selectedDate = args.date;\n  }\n\n  /* close modal and return date */\n  public close(date: Date) {         \n    this.params.closeCallback(date);\n  }\n}\n</code></pre>\n\n<p>I've tried a few things like manually giving focus to the calendar and even setting the date programmatically to the next date and back but to no avail.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1565190969, "post_id": 57397395, "comment_id": 101276753, "body": "I don&#39;t see useRef here ..."}, {"owner": {"reputation": 13703, "user_id": 142240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XMQbP.jpg?s=128&g=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/142240/isaac"}, "reply_to_user": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1565191050, "post_id": 57397395, "comment_id": 101276806, "body": "It&#39;s within the <code>Day</code> component, not within Container."}, {"owner": {"reputation": 28847, "user_id": 43848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6ogn.png?s=128&g=1", "display_name": "artem", "link": "https://stackoverflow.com/users/43848/artem"}, "edited": false, "score": 3, "creation_date": 1565191512, "post_id": 57397395, "comment_id": 101277049, "body": "The message tells that hooks are called by <code>Container</code>, not by &#39;Day&#39;. This seems strange. By any chance, is <code>Event.Event()</code> using hooks?"}, {"owner": {"reputation": 13703, "user_id": 142240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XMQbP.jpg?s=128&g=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/142240/isaac"}, "edited": false, "score": 0, "creation_date": 1565231860, "post_id": 57397395, "comment_id": 101290329, "body": "Yes, it is, <code>useDrag</code>, at the top-level. The ref from it is used, as well as a value returned by a monitor within a closure. Happy to include it, it&#39;s the same sort of thing as with <code>Day</code> and <code>Container</code>, though."}, {"owner": {"reputation": 28393, "user_id": 5669456, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/aeueo.png?s=128&g=1", "display_name": "ford04", "link": "https://stackoverflow.com/users/5669456/ford04"}, "edited": false, "score": 0, "creation_date": 1565437777, "post_id": 57397395, "comment_id": 101360050, "body": "How does your <code>Event</code>/<code>Event.Event()</code> look like?"}, {"owner": {"reputation": 6490, "user_id": 95369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952c464d3926e4b65ce81276fc2fee38?s=128&d=identicon&r=PG", "display_name": "OlliM", "link": "https://stackoverflow.com/users/95369/ollim"}, "edited": false, "score": 3, "creation_date": 1565446894, "post_id": 57397395, "comment_id": 101361957, "body": "If Event.Event is a react component like Day (as I understand from your comment), the problem is that you are calling it directly <code>Event.Event()</code> rather than returning jsx <code>return isTodays &amp;&amp; &lt;Event.Event dayHeight={dayHeight} event={e} &#47;&gt;</code>"}, {"owner": {"reputation": 13703, "user_id": 142240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XMQbP.jpg?s=128&g=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/142240/isaac"}, "reply_to_user": {"reputation": 6490, "user_id": 95369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952c464d3926e4b65ce81276fc2fee38?s=128&d=identicon&r=PG", "display_name": "OlliM", "link": "https://stackoverflow.com/users/95369/ollim"}, "edited": false, "score": 0, "creation_date": 1565457202, "post_id": 57397395, "comment_id": 101364366, "body": "@OlliM That solved it, thank you! I&#39;d love to give you the bounty I put on this if you make this an answer, and would love if you could provide a link/explain why this is the case while you&#39;re at it?"}], "answers": [{"tags": [], "owner": {"reputation": 6490, "user_id": 95369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952c464d3926e4b65ce81276fc2fee38?s=128&d=identicon&r=PG", "display_name": "OlliM", "link": "https://stackoverflow.com/users/95369/ollim"}, "is_accepted": true, "score": 31, "last_activity_date": 1596745837, "last_edit_date": 1596745837, "creation_date": 1565588988, "answer_id": 57456179, "question_id": 57397395, "link": "https://stackoverflow.com/questions/57397395/react-has-detected-a-change-in-the-order-of-hooks-but-hooks-seem-to-be-invoked/57456179#57456179", "title": "&quot;React has detected a change in the order of Hooks&quot; but Hooks seem to be invoked in order", "body": "<p>Writing my comment as an answer:</p>\n<p>The problem is that you're calling <code>Event.Event()</code> directly, even though it is a react component. That causes react to treat the hook calls inside the function as part of <code>Container</code>, even though you meant for them to be part of Event.</p>\n<p>The solution is to use JSX:</p>\n<p><code>return isTodays &amp;&amp; &lt;Event.Event dayHeight={dayHeight} event={e} /&gt;</code></p>\n<p>Why this works is clearer when you replace the JSX with the resulting JS code:</p>\n<p><code>return isTodays &amp;&amp; React.createElement(Event.Event, { dayHeight, event: e })</code></p>\n<p>See <a href=\"https://reactjs.org/docs/react-api.html#createelement\" rel=\"noreferrer\">https://reactjs.org/docs/react-api.html#createelement</a>. You never want to call the function components directly, how react works is that you always hand a reference the component to react and let it call the function at the correct time.</p>\n"}, {"comments": [{"owner": {"reputation": 932, "user_id": 4060922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpl7T.jpg?s=128&g=1", "display_name": "Damiano", "link": "https://stackoverflow.com/users/4060922/damiano"}, "edited": false, "score": 1, "creation_date": 1574163520, "post_id": 57931828, "comment_id": 104125455, "body": "Same here, I did const x = something ? 0 : useMemo();"}, {"owner": {"reputation": 335, "user_id": 659989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c7dd42fa912223c422afd7a18a4014?s=128&d=identicon&r=PG", "display_name": "pdenya", "link": "https://stackoverflow.com/users/659989/pdenya"}, "edited": false, "score": 0, "creation_date": 1617125638, "post_id": 57931828, "comment_id": 118214223, "body": "Thanks!  Similarly, conditionally using selectors is not possible. eg: <code>let client = client_id &amp;&amp; useSelector(state =&gt; state.clients[client_id])</code> is bad but <code>let client = useSelector(state =&gt; client_id ? state.clients[client_id] : null)</code> works fine."}], "tags": [], "owner": {"reputation": 5865, "user_id": 4415493, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/CidOV.jpg?s=128&g=1", "display_name": "JamesFaix", "link": "https://stackoverflow.com/users/4415493/jamesfaix"}, "is_accepted": false, "score": 35, "last_activity_date": 1568424882, "creation_date": 1568424882, "answer_id": 57931828, "question_id": 57397395, "link": "https://stackoverflow.com/questions/57397395/react-has-detected-a-change-in-the-order-of-hooks-but-hooks-seem-to-be-invoked/57931828#57931828", "title": "&quot;React has detected a change in the order of Hooks&quot; but Hooks seem to be invoked in order", "body": "<p>I ran into this same error message in a component I was writing due to use of short-circuiting logic.</p>\n\n<p>This resulted in an error:</p>\n\n<pre><code>const x = useSelector(state =&gt; state.foo);\nif (!x) { return ; }\nconst y = useSelector(state =&gt; state.bar);\n\n</code></pre>\n\n<p>This is because when <code>x</code> is truthy the list of hooks has length 2, but when <code>x</code> is falsey the list has length 1.</p>\n\n<p>To resolve the error I had to put all hook use before any early terminations.</p>\n\n<pre><code>const x = useSelector(state =&gt; state.foo);\nconst y = useSelector(state =&gt; state.bar);\nif (!x) { return ; }\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 462, "user_id": 4659366, "user_type": "registered", "profile_image": "https://graph.facebook.com/945869572097724/picture?type=large", "display_name": "Allan Felipe Murara", "link": "https://stackoverflow.com/users/4659366/allan-felipe-murara"}, "is_accepted": false, "score": 0, "last_activity_date": 1612555530, "creation_date": 1612555530, "answer_id": 66069897, "question_id": 57397395, "link": "https://stackoverflow.com/questions/57397395/react-has-detected-a-change-in-the-order-of-hooks-but-hooks-seem-to-be-invoked/66069897#66069897", "title": "&quot;React has detected a change in the order of Hooks&quot; but Hooks seem to be invoked in order", "body": "<p>It is not the question scenario, but it is the error itself, hopefully, it will help somebody :)</p>\n<pre><code>  const { chatSession, userBelongsToSession } = useChatSession(session_id)\n  const { activeSession, setActiveSession } = useActiveChatSession()\n\n  const isCurrentActiveSession = useMemo(() =&gt; activeSession != null &amp;&amp; activeSession.session_id === session_id, [activeSession, session_id])\n\n  if (chatSession == null || activeSession == null) {\n    return (&lt;div&gt;&lt;/div&gt;)\n  }\n\n  const Container = styled(BorderedContainer)`height: 72px; cursor: pointer;`\n</code></pre>\n<p>The same error happens to me in this piece of code and is related to useRef being called by styled-components and not being called before because of conditional rendering</p>\n<pre><code>if (chatSession == null || activeSession == null) {\n  return (&lt;div&gt;&lt;/div&gt;)\n}\n</code></pre>\n<p>by default, the hooks will return null and my component will render  with no useRef, although when the hooks are actually populated, styled-components will then generate a component with useRef.</p>\n<pre><code>  if (chatSession == null || activeSession == null) {\n    return (&lt;div&gt;&lt;/div&gt;)\n  }\n\nconst Container = styled(BorderedContainer)`height: 72px; cursor: pointer;\n</code></pre>\n"}], "owner": {"reputation": 13703, "user_id": 142240, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XMQbP.jpg?s=128&g=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/142240/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29171, "favorite_count": 5, "accepted_answer_id": 57456179, "answer_count": 3, "score": 45, "last_activity_date": 1612555530, "creation_date": 1565190348, "last_edit_date": 1565332970, "question_id": 57397395, "link": "https://stackoverflow.com/questions/57397395/react-has-detected-a-change-in-the-order-of-hooks-but-hooks-seem-to-be-invoked", "title": "&quot;React has detected a change in the order of Hooks&quot; but Hooks seem to be invoked in order", "body": "<p>I am trying to use <code>Context</code> and <code>Reducers</code> via React's hooks, and running into problems with the order of the hooks not being constant. My understanding was that as long as the order of the <code>useHook(\u2026)</code> remained the same, it was fine to invoke the returned state/update function/reducer in any sort of control flow. Otherwise, I'm invoking the hooks at the very beginning of the FunctionComponents. </p>\n\n<p>Is it that I'm generating <code>Days</code> in a loop? Or missing something else?</p>\n\n<pre><code>Warning: React has detected a change in the order of Hooks\ncalled by Container. This will lead to bugs and errors if not fixed. For\nmore information, read the Rules of Hooks:\nhttps://reactjs.org/docs/hooks-rules.html\n\n   Previous render            Next render\n   ------------------------------------------------------\n1. useContext                 useContext\n2. undefined                  useRef\n   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>The full version of <code>Container</code> is below. An excerpt from <code>Day</code> is below, and has a ref from <code>react-dnd</code>'s <code>useDrop</code>. </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export const Container: FunctionComponent&lt;Props&gt; = () =&gt; {\n  let events = useContext(State.StateContext)\n  //let events: Array&lt;Event.Event&gt; = [] &lt;- with this, no warning\n\n  const getDaysEvents = (day: Event.Time, events: Array&lt;Event.Event&gt;) =&gt; {\n    return events.map(e =&gt; {\n      const isTodays = e.startTime.hasSame(day, \"day\")\n      return isTodays &amp;&amp; Event.Event({ dayHeight, event: e })\n    })\n  }\n\n  let days = []\n  for (let i = 0; i &lt; 7; i++) {\n    const day = DateTime.today().plus({ days: i })\n    days.push(\n      &lt;Day key={day.toISO()} height={dayHeight} date={day}&gt;\n        {getDaysEvents(day, events)}\n      &lt;/Day&gt;\n    )\n  }\n  return &lt;div className=\"Container\"&gt;{days}&lt;/div&gt;\n}\n</code></pre>\n\n<p>An excerpt from <code>Day</code> (<code>Event</code> similarly uses a <code>useDrag</code> hook, also called at the top level just like here).</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const Day: FunctionComponent&lt;DayProps&gt; = ({ date, height, children }) =&gt; {\n  const dispatch = useContext(State.DispatchContext)\n  const [{ isOver, offset }, dropRef] = useDrop({\n    // \u2026uses the dispatch function within\u2026\n    // \u2026\n  })\n  // \u2026\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "ionic-framework", "html5-audio"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11896457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8CdPLEElDgI/AAAAAAAAAAI/AAAAAAAADbw/wqkr-WIG9z4/photo.jpg?sz=128", "display_name": "KJelles", "link": "https://stackoverflow.com/users/11896457/kjelles"}, "is_accepted": false, "score": 0, "last_activity_date": 1565203905, "creation_date": 1565203905, "answer_id": 57400672, "question_id": 57396536, "link": "https://stackoverflow.com/questions/57396536/javascript-audio-playing-multiple-times-whilst-using-same-audio-object/57400672#57400672", "title": "JavaScript audio playing multiple times whilst using same audio object", "body": "<p>Fixed!</p>\n\n<p>Turns out i called the function from another instance, i used a provider which created a new instance of the Home Class, creating a new Audio object every time playSound was called from the sidemenu.</p>\n"}], "owner": {"reputation": 11, "user_id": 11896457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8CdPLEElDgI/AAAAAAAAAAI/AAAAAAAADbw/wqkr-WIG9z4/photo.jpg?sz=128", "display_name": "KJelles", "link": "https://stackoverflow.com/users/11896457/kjelles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565203905, "creation_date": 1565187540, "question_id": 57396536, "link": "https://stackoverflow.com/questions/57396536/javascript-audio-playing-multiple-times-whilst-using-same-audio-object", "title": "JavaScript audio playing multiple times whilst using same audio object", "body": "<p>I've got a function to play JavaScript audio like the following:</p>\n\n<pre><code>  playSound(sub) {\n    console.log(sub);\n    if (sub.audio.paused) {\n      sub.audio.ontimeupdate = function (i) {\n        if ((this.currentTime / this.duration) &gt; 0.9) {\n          this.currentTime = 0;\n          this.play();\n        }\n      };\n      sub.audio.play();\n    } else {\n      sub.audio.pause();\n      sub.audio.currentTime = 0;\n    }\n  }\n</code></pre>\n\n<p>I call this function in my HTML like so:</p>\n\n<pre><code>(click)=\"playSound(sub)\"\n</code></pre>\n\n<p>All is well and working perfectly fine until i programatically try to play the audio, i call the playSound() function in another function in an if-statement. The audio plays succesfully but whenever i try to call the exact same function in the HTML with the above (click) function with (as far as i know) the exact same Audio object given in the parameter, the sound plays double?</p>\n\n<p>Is it a caching issue? or an Angular issue which makes a copy of the original so the audio instance plays multiple times?</p>\n\n<p>I've tried HowlerJS also which gave me the exact same problem, Howler seemed to make different ID's upon playing.</p>\n\n<p>This is where the playSound function gets called</p>\n\n<pre><code>  setSleepyset() {\n    this.muteAll();\n    for (let i = 0; i &lt; this.items.length; i++) {\n      for (let x = 0; x &lt; this.items[i].subitems.length; x++) {\n        if (localStorage.getItem(this.items[i].subitems[x].audio.src) !== null) {\n          this.playSound(this.items[i].subitems[x]);\n        } else {\n          this.items[i].subitems[x].audio.pause();\n          this.items[i].subitems[x].audio.currentTime = 0;\n        }\n      }\n    }\n  }\n</code></pre>\n\n<p>And this is where the HTML audio objects are made:</p>\n\n<pre><code>items = [\n    {\n      category: \"Weather\",\n      expanded: true,\n      subitems: [\n        {\n          name: \"Rain\",\n          background: \"../assets/backgrounds/rain.jpg\",\n          sound: \"../assets/sounds/rain.ogg\",\n          audio: new Audio('../assets/sounds/rain.ogg'),\n          icon: \"../assets/icons/rain.png\",\n          playing: false\n        },\n        {\n          name: \"Thunder\",\n          background: \"../assets/backgrounds/thunder.jpg\",\n          sound: \"../assets/sounds/thunder.ogg\",\n          audio: new Audio('../assets/sounds/thunder.ogg'),\n          icon: \"../assets/icons/thunder.png\",\n          playing: false\n        },\n        {\n          name: \"Wind\",\n          background: \"../assets/backgrounds/wind.jpg\",\n          sound: \"../assets/sounds/wind.ogg\",\n          audio: new Audio('../assets/sounds/wind.ogg'),\n          icon: \"../assets/icons/wind.png\",\n          playing: false\n        }\n      ]\n    }\n]\n</code></pre>\n\n<p>The goal is to play multiple sounds at the same time and load them at the same time, a global Audio variable is not a solution unless i can play / pause multiple audio sources within the same variable.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1565187948, "post_id": 57396594, "comment_id": 101275054, "body": "in case we don&#39;t need to use async pipe you answer correct \ud83d\udc4d,well done"}], "tags": [], "owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "is_accepted": true, "score": 1, "last_activity_date": 1565187723, "creation_date": 1565187723, "answer_id": 57396594, "question_id": 57396499, "link": "https://stackoverflow.com/questions/57396499/how-to-subscribe-to-an-observable-in-angular/57396594#57396594", "title": "How to subscribe to an Observable in Angular", "body": "<p>In your code <code>player$</code> is not an observable, it's already the result of the observable.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>player: Player; // &lt;-- here\nsubPlayer: Subscription;\n\nselectPlayer(matEvent: MatAutocompleteSelectedEvent): void {\n    this.inputFriends = matEvent.option.value;\n    this.selectedPlayer = matEvent.option.value;\n    this.inputP = false;\n\n    this.subPlayer = this.playerProvider.get$(matEvent.option.value.userUid).subscribe(\n      (player: Player) =&gt; {\n        this.player = player; // &lt;-- here\n      }\n    );\n  }\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div *ngIf=\"player\"&gt; &lt;!-- here --&gt;\n  &lt;div *ngIf=\"player.characterUid\"&gt;\n    {{player.characterName}}\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": false, "score": 2, "last_activity_date": 1565189983, "last_edit_date": 1565189983, "creation_date": 1565187766, "answer_id": 57396611, "question_id": 57396499, "link": "https://stackoverflow.com/questions/57396499/how-to-subscribe-to-an-observable-in-angular/57396611#57396611", "title": "How to subscribe to an Observable in Angular", "body": "<p>you don't need to subscribe , async pipe will subscribe and get the value for you \ud83e\uddd9\u200d\u2642\ufe0f</p>\n\n<pre><code>player$: Observable&lt;Player&gt;;\n\nselectPlayer(matEvent: MatAutocompleteSelectedEvent): void {\n    this.inputFriends = matEvent.option.value;\n    this.selectedPlayer = matEvent.option.value;\n    this.inputP = false;\n\n    this.player$= this.playerProvider.get$(matEvent.option.value.userUid);\n\n  }\n</code></pre>\n\n<blockquote>\n  <p>The async pipe takes care of subscribing and unwrapping the data as\n  well as unsubscribing when the component is destroyed, so you don't need <strong>subPlayer</strong> </p>\n</blockquote>\n\n<p><em>template</em> </p>\n\n<pre><code>&lt;ng-container *ngIf=\"(player$ | async) as player\"&gt;\n  &lt;div *ngIf=\"player.characterUid\"&gt;\n    {{player.characterName}}\n  &lt;/div&gt;\n&lt;/ng-container&gt;\n</code></pre>\n\n<p><a href=\"https://angular.io/api/common/AsyncPipe\" rel=\"nofollow noreferrer\">Async Pipe \ud83d\udd25</a></p>\n"}, {"comments": [{"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1565189754, "post_id": 57396706, "comment_id": 101276083, "body": "the async pipe approuter is more cleaner and handling the subscribe is great thing \ud83d\udc4d"}], "tags": [], "owner": {"reputation": 1320, "user_id": 6196099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-45hNp81idDE/AAAAAAAAAAI/AAAAAAAAAB4/OLaZOd7rtF0/photo.jpg?sz=128", "display_name": "Florian", "link": "https://stackoverflow.com/users/6196099/florian"}, "is_accepted": false, "score": 1, "last_activity_date": 1565188027, "creation_date": 1565188027, "answer_id": 57396706, "question_id": 57396499, "link": "https://stackoverflow.com/questions/57396499/how-to-subscribe-to-an-observable-in-angular/57396706#57396706", "title": "How to subscribe to an Observable in Angular", "body": "<blockquote>\n  <p>I'm just trying to assign player$ so I can display it in the HTML</p>\n</blockquote>\n\n<p><code>this.player$ = this.playerProvider.get$(matEvent.option.value.userUid);</code></p>\n\n<p>this method returns an observable, so if you want to assign <code>player$</code>, you can do it that way. In your html template, you're using <code>| async</code> which handles subscribe/unsubscribe automagically.</p>\n"}], "owner": {"reputation": 89, "user_id": 11896497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7e75ed73e7e0f6bbd58f1ea6ad8d03b?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Malone", "link": "https://stackoverflow.com/users/11896497/kevin-malone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 57396594, "answer_count": 3, "score": 2, "last_activity_date": 1565189983, "creation_date": 1565187373, "question_id": 57396499, "link": "https://stackoverflow.com/questions/57396499/how-to-subscribe-to-an-observable-in-angular", "title": "How to subscribe to an Observable in Angular", "body": "<p>I'm trying to subscribe to an Observable so I can display it in HTML with Angular, doing <code>console.log(player)</code> works fine however I get </p>\n\n<pre><code>Type 'Player' is missing the following properties from type 'Observable&lt;Player&gt;': _isScalar, source, operator, lift, and 6 more.ts(2740)\n</code></pre>\n\n<p>I've tried using <code>.pipe()</code>, </p>\n\n<p>HTML: </p>\n\n<pre><code>&lt;div *ngIf=\"(player$ | async) as player\"&gt;\n  &lt;div *ngIf=\"player.characterUid\"&gt;\n    {{player.characterName}}\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Component:</p>\n\n<pre><code>player$: Observable&lt;Player&gt;;\nsubPlayer: Subscription;\n\nselectPlayer(matEvent: MatAutocompleteSelectedEvent): void {\n    this.inputFriends = matEvent.option.value;\n    this.selectedPlayer = matEvent.option.value;\n    this.inputP = false;\n\n    this.subPlayer = this.playerProvider.get$(matEvent.option.value.userUid).subscribe(\n      (player: Player) =&gt; {\n        this.player$ = player; // Type 'Player' is missing the following properties from type 'Observable&lt;Player&gt;': _isScalar, source, operator, lift, and 6 more.ts(2740)\n      }\n    );\n  }\n</code></pre>\n\n<p>Provider:</p>\n\n<pre><code>get$(uid: string): Observable&lt;Player&gt; {\n    return this._getDoc(uid)\n      .valueChanges()\n      .pipe(\n        map((sPlayer: ServerPlayer) =&gt; sPlayer ? new Player(sPlayer) : null)\n      );\n  }\n\n  private _getDoc(uid: string): AngularFirestoreDocument {\n    return this.afs.doc(`players/${uid}`);\n  }\n</code></pre>\n\n<p>I'm just trying to assign <code>player$</code> so I can display it in the HTML</p>\n"}, {"tags": ["typescript", "nativescript", "nativescript-angular"], "owner": {"reputation": 4134, "user_id": 6513723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1164703250267724/picture?type=large", "display_name": "pascalpuetz", "link": "https://stackoverflow.com/users/6513723/pascalpuetz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 5, "answer_count": 0, "score": 7, "last_activity_date": 1567655090, "creation_date": 1565186659, "question_id": 57396269, "link": "https://stackoverflow.com/questions/57396269/nativescript-storybook-or-alternative", "title": "NativeScript Storybook or alternative", "body": "<p>Since a year, we are using <a href=\"https://storybook.js.org/\" rel=\"noreferrer\">storybook</a> to develop our angular web applications, as well as our ionic cordova apps. </p>\n\n<p>Now we want to evaluate if NativeScript might be a better solution for our needs. We are currently wondering if it is possible to make storybook work with NativeScript as it has proven to be quite useful for UI development. </p>\n\n<p>I know that NativeScript is officially not supported by storybook - but React Native is so in theory it should be possible, though I couldn't find any information on this. </p>\n\n<p>My question now is: Has anyone been able to make storybook work with NativeScript? Or does an alternative exist that I'm just unable to find? Or are there at least some concepts/tools to develop components in isolation?</p>\n"}, {"tags": ["typescript", "dialogflow-es", "actions-on-google"], "answers": [{"comments": [{"owner": {"reputation": 2589, "user_id": 6351280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xG2IH.jpg?s=128&g=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6351280/jordi"}, "edited": false, "score": 0, "creation_date": 1565249003, "post_id": 57397822, "comment_id": 101295195, "body": "Yup, the declaration needed the generics. I improved it a bit by created an empty interface which extended the string that you mentioned, now I can just use my DialogflowEndpoint interface instead of the long string."}], "tags": [], "owner": {"reputation": 10420, "user_id": 1491707, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/rOXkJ.png?s=128&g=1", "display_name": "Nick Felker", "link": "https://stackoverflow.com/users/1491707/nick-felker"}, "is_accepted": true, "score": 1, "last_activity_date": 1565191717, "creation_date": 1565191717, "answer_id": 57397822, "question_id": 57396209, "link": "https://stackoverflow.com/questions/57396209/dialogflow-endpoint-type-in-typescript/57397822#57397822", "title": "Dialogflow endpoint type in typescript", "body": "<p>Opening up a project in VSCode, I wrote:</p>\n\n<pre><code>import { dialogflow } from 'actions-on-google'\n\nconst endpoint = dialogflow()\n</code></pre>\n\n<p>Hovering over <code>endpoint</code>, VSCode shows me some metadata on the variable:</p>\n\n<p><code>const endpoint: OmniHandler &amp; BaseApp &amp; DialogflowApp&lt;{}, {}, Contexts, DialogflowConversation&lt;{}, {}, Contexts&gt;&gt;</code></p>\n\n<p>Maybe your <code>DialogflowApp</code> declaration needs the generics, or maybe you can just copy that string directly.</p>\n"}], "owner": {"reputation": 2589, "user_id": 6351280, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xG2IH.jpg?s=128&g=1", "display_name": "Jordi", "link": "https://stackoverflow.com/users/6351280/jordi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 57397822, "answer_count": 1, "score": 0, "last_activity_date": 1565191717, "creation_date": 1565186444, "question_id": 57396209, "link": "https://stackoverflow.com/questions/57396209/dialogflow-endpoint-type-in-typescript", "title": "Dialogflow endpoint type in typescript", "body": "<p>I've implemented a webhook for Dialogflow in Typescript and I would like my endpoint for Google to only support the Dialogflow SDK object. Currently my controller looks something like this:</p>\n\n<pre><code>import {dialogflow, DialogflowConversation} from \"actions-on-google\";\n\nexport class GoogleController {\n  public endpoint: any;\n\nconstructor() {\n  this.endpoint = dialogflow();\n  this.endpoint.intent(\"Welcome\", (conv: DialogflowConversation) =&gt; {\n    return conv.ask(\"Hey There\");\n  });\n};\n</code></pre>\n\n<p>Currently I've made the endpoint be of type any, but I would like to change this to a Dialogflow object. I've tried importing DialogflowApp objects from the SDK, but those don't seem to work. Either they don't match the object returned by the dialogflow() call or the interface doesn't have the .intent function.</p>\n\n<p>Does anyone know how to achieve this?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1565187987, "post_id": 57396177, "comment_id": 101275075, "body": "I think I love the fact that there are at least three ways to do what you&#39;re trying to do above, that you can pick between based on other factors. I either love it, or it bothers me. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565186725, "post_id": 57396249, "comment_id": 101274269, "body": "I was going to suggest sprinkling some generic type parameters to preserver the string literal type. This also works, really depends how important preserving it is for the use case.."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565186747, "post_id": 57396249, "comment_id": 101274283, "body": "Ex: <a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgZWhgGEIAbM4bGBCJAQWtqQB4AVOUVJAEwGc4fGFGQBzAHxwA3gCg48uDACeYYAC44bOQrCYlZCJh4bZCs3HQJgZY4OFjt5uDwRQqNOhqEikox3ABfGSCZUEhYCwBXJCY6QSJSCndmdk4Qbn47HwkACmVVDTYAGgsrGy97XxKXN1ikCuyASg1CWETKOsYPVjZJUwU3GEioJGl-M3z1RRVgIvGdPQMjE3mnS2tbdZs5pyca5M9nVwOkVcD-IJDsOiE4ABkASXw2AH18AHkAJQ4AXjgAckezzeXzY-xkMmQqAwODwrRgdwQQi6zDSGQE8PaJxRdBYkwg6HuT1eH2+fWCEPQ0Tq8VgiKEOS2tm8YmqxzqDTEzQIRHpMBxo368kGw1GfAS5A63RyQJJoJKTLZtW6jTgwSAA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/#code/&hellip;</a>"}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565186748, "post_id": 57396249, "comment_id": 101274282, "body": "@TitianCernicova-Dragomir - Cool, would be keen to see an answer with your take!"}, {"owner": {"reputation": 596, "user_id": 1032752, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/882c3ddbfd286ff010276cb96dab3db5?s=128&d=identicon&r=PG", "display_name": "user1032752", "link": "https://stackoverflow.com/users/1032752/user1032752"}, "edited": false, "score": 0, "creation_date": 1565187205, "post_id": 57396249, "comment_id": 101274569, "body": "Thanks for the quick response! That really helps. I&#39;m confused as to why <code>const LIST_SORT = &#39;LIST_SORT&#39;;</code> doesn&#39;t automatically cast that as a string. E.g. why the explicit &#39;: string&#39; is necessary if this is a string assigned to a constant."}, {"owner": {"reputation": 596, "user_id": 1032752, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/882c3ddbfd286ff010276cb96dab3db5?s=128&d=identicon&r=PG", "display_name": "user1032752", "link": "https://stackoverflow.com/users/1032752/user1032752"}, "edited": false, "score": 0, "creation_date": 1565187544, "post_id": 57396249, "comment_id": 101274790, "body": "In fact, ESLint complains that the <code>:string</code> annotation should be removed because it&#39;s &quot;trivially inferred&quot;."}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "reply_to_user": {"reputation": 596, "user_id": 1032752, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/882c3ddbfd286ff010276cb96dab3db5?s=128&d=identicon&r=PG", "display_name": "user1032752", "link": "https://stackoverflow.com/users/1032752/user1032752"}, "edited": false, "score": 0, "creation_date": 1565187847, "post_id": 57396249, "comment_id": 101274983, "body": "@user1032752 - The inferred type of <code>const LIST_SORT = &#39;LIST_SORT&#39;</code> is the <a href=\"http://www.typescriptlang.org/docs/handbook/advanced-types.html#string-literal-types\" rel=\"nofollow noreferrer\">string literal type</a> <code>&#39;LIST_SORT&#39;</code>. That inference can be widened to <code>string</code> in some cases (<a href=\"http://www.typescriptlang.org/play/index.html#code/GYVwdgxgLglg9mABMOcAUAPAXIgzlAJxjAHMBKHANzhgBNEBvAKEVcQgVzgBsBTAOm5wSmMgG4mAXyYcw+RABkAkgGUAKgH0VAeQBKaxAF5EAcmXqtetSYkp05zTv3igA\" rel=\"nofollow noreferrer\">example</a>) but apparently not in your case as we can see from the fact changing it makes TS happy. :-) I have to say I don&#39;t know the rules governing that. :-|"}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "reply_to_user": {"reputation": 596, "user_id": 1032752, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/882c3ddbfd286ff010276cb96dab3db5?s=128&d=identicon&r=PG", "display_name": "user1032752", "link": "https://stackoverflow.com/users/1032752/user1032752"}, "edited": false, "score": 0, "creation_date": 1565187889, "post_id": 57396249, "comment_id": 101275011, "body": "@user1032752 - The fact it doesn&#39;t always work suggests that ESLint&#39;s rule is slightly optimistic. :-)"}, {"owner": {"reputation": 596, "user_id": 1032752, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/882c3ddbfd286ff010276cb96dab3db5?s=128&d=identicon&r=PG", "display_name": "user1032752", "link": "https://stackoverflow.com/users/1032752/user1032752"}, "edited": false, "score": 1, "creation_date": 1565187924, "post_id": 57396249, "comment_id": 101275034, "body": "@T.J.Crowder - Makes sense. Thanks again!"}], "tags": [], "owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "is_accepted": true, "score": 2, "last_activity_date": 1565186575, "creation_date": 1565186575, "answer_id": 57396249, "question_id": 57396177, "link": "https://stackoverflow.com/questions/57396177/abstracting-functions-in-typescript-causing-incompatibility-between-types/57396249#57396249", "title": "Abstracting functions in TypeScript causing incompatibility between types", "body": "<p>If the <code>type</code> field is going to have any number of values, it should be of type <code>string</code>. You can make <code>LIST_SORT</code> a string like this:</p>\n\n<pre><code>const LIST_SORT: string = 'LIST_SORT';\n</code></pre>\n\n<p><a href=\"http://www.typescriptlang.org/play/index.html#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgZWhgGEIAbM4bGBCJAQWtqTgG8AoOLuGATzGAAuOAGcYUZAHNO3MJl5kImACbCO3DXHQJgZVaPFSZmuMoRQqNOsLESk0jQF92z9qEiwtAVyRM6oolIKS2YACj4BG0N7ABotHT0ou0k4sws-JCSpAEphQlggygzGKxZ1bgsYLygy400IoR5+YBi6jTkFJX1ykw1tXX1+vVbezTSQ61NzCaQ27mcnF3Z2bDoxOAAZAEl8ABUAfXwAeQAlXaz7OABeOABybb3D093b5eRUDBw8fJgNhDESsw4KBUEhlCICIFyEVSoD-D0mpFEcAIOhNjsDsczkt2OgfBkArA-mJQkN9LYpKlphkLpJcpCif8YHDahpKtUWCIocEMqEHpjnnEyVT0qVsnAXEA\" rel=\"nofollow noreferrer\">On the playground</a>.</p>\n\n<p>If you're going to constrain <code>type</code> so that it can only be one of a set of values, you probably want a <a href=\"http://www.typescriptlang.org/docs/handbook/enums.html#string-enums\" rel=\"nofollow noreferrer\">string enum</a> instead:</p>\n\n<pre><code>enum ListType {\n    LIST_SORT = 'LIST_SORT',\n    // ...\n}\n</code></pre>\n\n<p>Then you'd use <code>ListType</code> for the <code>type</code> field.</p>\n\n<p><a href=\"http://www.typescriptlang.org/play/index.html#code/KYDwDg9gTgLgBMAdgVwLZwDIEsDOMAqAnmMHAN4BQc1mAkgMr4D69A8gEr5wC8cA5BgbM2nPgBoqNAPRS4AOgUUAvhQqhIsOFkQxgUAGYBDAMal60GAGEIAGxvBjMLBEQBBR88TlJ1GMWAAXJi4BP4+cGCGhDYQhgAmQZQ0yXD6WMA2CXB4UNoA5uHJcVhQDk4uQTn54SoqauAWqciIHi7ZFtZ2ZZ4AFH4kQdh4RCRiqemZlTC5iHljxaWtiFMzeQCUQeawnfZL7uVeSTSlMMhQh4U0-YFw1xIpNJHRsVlHD8lpGVmfmffvRSVuhU4AsgYhLtQVMlaqptLoDCYzBYhjB9p4ECBdIg4jg4FsrLZdgc0W03rd-IMQiNgHJBIwWBx8MpVPpmkt2rAUT0flkqrN5oClit8hs8ciQiSLskTmcvDgOoSwT0UdTaUIGZwxjyBYsDms4MogA\" rel=\"nofollow noreferrer\">On the playground</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 3, "last_activity_date": 1565186956, "last_edit_date": 1565186956, "creation_date": 1565186870, "answer_id": 57396328, "question_id": 57396177, "link": "https://stackoverflow.com/questions/57396177/abstracting-functions-in-typescript-causing-incompatibility-between-types/57396328#57396328", "title": "Abstracting functions in TypeScript causing incompatibility between types", "body": "<p>If you want to preserve the string literal type, your best approach would be to add a generic type parameter to <code>SortCollectionAction</code> and <code>sortCollection</code>.</p>\n\n<pre><code>export interface SortCollectionAction&lt;T extends string&gt; {\n    type: T\n    payload: {\n        field: string\n        direction: string\n    }\n}\n\nexport function sortCollection&lt;T extends string&gt;(type: T, field: string, direction: string): SortCollectionAction&lt;T&gt; {\n    return {\n        type: type,\n        payload: {\n            field: field,\n            direction: direction\n        }\n    }\n}\n\nconst LIST_SORT = 'LIST_SORT'\n\ninterface SortListAction extends SortCollectionAction&lt;typeof LIST_SORT&gt; {\n}\n\nfunction sortList(field: string, direction: string): SortListAction {\n    return sortCollection(LIST_SORT, field, direction) \n}\n\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgZWhgGEIAbM4bGBCJAQWtqQB4AVOUVJAEwGc4fGFGQBzAHxwA3gCg48uDACeYYAC44bOQrCYlZCJh4bZCs3HQJgZY4OFjt5uDwRQqNOhqEikox3ABfGSCZUEhYCwBXJCY6QSJSCndmdk4Qbn47HwkACmVVDTYAGgsrGy97XxKXN1ikCuyASg1CWETKOsYPVjZJUwU3GEioJGl-M3z1RRVgIvGdPQMjE3mnS2tbdZs5pyca5M9nVwOkVcD-IJDsOiE4ABkASXw2AH18AHkAJQ4AXjgAckezzeXzY-xkMmQqAwODwrRgdwQQi6zDSGQE8PaJxRdBYkwg6HuT1eH2+fWCEPQ0Tq8VgiKEOS2tm8YmqxzqDTEzQIRHpMBxo368kGw1GfAS5A63RyQJJoJKTLZtW6jTgwSAA\" rel=\"nofollow noreferrer\">Play</a></p>\n\n<p>It really depends what you plan to do later with <code>type</code> if this added complexity is worth it. </p>\n"}], "owner": {"reputation": 596, "user_id": 1032752, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/882c3ddbfd286ff010276cb96dab3db5?s=128&d=identicon&r=PG", "display_name": "user1032752", "link": "https://stackoverflow.com/users/1032752/user1032752"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 57396249, "answer_count": 2, "score": 2, "last_activity_date": 1565186956, "creation_date": 1565186345, "question_id": 57396177, "link": "https://stackoverflow.com/questions/57396177/abstracting-functions-in-typescript-causing-incompatibility-between-types", "title": "Abstracting functions in TypeScript causing incompatibility between types", "body": "<p>I'm trying to DRY up some of my redux action creators but am having a hard time with coming up with the proper types. Take this simplified example:</p>\n\n<pre><code>export interface SortCollectionAction {\n    type: string\n    payload: {\n        field: string\n        direction: string\n    }\n}\n\nexport function sortCollection(type: string, field: string, direction: string): SortCollectionAction {\n    return {\n        type: type,\n        payload: {\n            field: field,\n            direction: direction\n        }\n    }\n}\n\nconst LIST_SORT = 'LIST_SORT'\n\ninterface SortListAction extends SortCollectionAction {\n    type: typeof LIST_SORT\n}\n\nfunction sortList(field: string, direction: string): SortListAction {\n    return sortCollection(LIST_SORT, field, direction) \n}\n</code></pre>\n\n<p>The compiler complains that the type 'string' is not assignable to '\"LIST_SORT\"'. What would be the right way to express the above?</p>\n\n<p>Should I be using generics or casting the return value or is there a more straight-forward way to accomplish this?</p>\n"}, {"tags": ["css", "angular", "typescript", "angular-material"], "answers": [{"comments": [{"owner": {"reputation": 17877, "user_id": 6782707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=128&d=identicon&r=PG", "display_name": "Edric", "link": "https://stackoverflow.com/users/6782707/edric"}, "edited": false, "score": 0, "creation_date": 1565187177, "post_id": 57396056, "comment_id": 101274552, "body": "Please consider explaining what you&#39;ve done to solve OP&#39;s question instead of providing only code for copying."}], "tags": [], "owner": {"reputation": 1190, "user_id": 6853068, "user_type": "registered", "profile_image": "https://graph.facebook.com/1234074719957575/picture?type=large", "display_name": "Akshay Rana", "link": "https://stackoverflow.com/users/6853068/akshay-rana"}, "is_accepted": false, "score": 0, "last_activity_date": 1565186284, "last_edit_date": 1565186284, "creation_date": 1565185962, "answer_id": 57396056, "question_id": 57395872, "link": "https://stackoverflow.com/questions/57395872/styling-mat-select-value-per-component/57396056#57396056", "title": "Styling mat-select-value per component", "body": "<p>Try using :</p>\n\n<pre><code>  &lt;mat-select class=\"main\" placeholder=\"Main\"&gt; ....\n\n  /deep/ .main .mat-select-value{\n    color: red;\n  }\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-rucggb?file=src/app/main-component.css\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-rucggb?file=src/app/main-component.css</a></p>\n"}], "owner": {"reputation": 87, "user_id": 273385, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/63c153cd224bd1ec65f1b95c4e0bb03b?s=128&d=identicon&r=PG", "display_name": "Thijs Cramer", "link": "https://stackoverflow.com/users/273385/thijs-cramer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565186284, "creation_date": 1565185329, "question_id": 57395872, "link": "https://stackoverflow.com/questions/57395872/styling-mat-select-value-per-component", "title": "Styling mat-select-value per component", "body": "<p>I'm trying to style mat-select's differently per component. I have 1 main select in my (always visible) header, and multiple in different components within my SPA. I'm trying to style the header mat-select differently because it has a dark background, the rest should be unstyled, and not affected by the header styling.</p>\n\n<p>I've tried using ngClass &amp; ngStyle, but they don't add the required classes to childs, just to the main class. I've tried using ::ng-deep and /deep/ but they alter the styling of components in other parts of the application. So technically they work, but with the wrong result.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-kzwatd\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-kzwatd</a></p>\n\n<p>I'm hoping to just alter the text color to white, since the background of the mat-select is dark.</p>\n\n<p>Anyone have any clue why the stackblitz is not working?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "is_accepted": true, "score": 0, "last_activity_date": 1565185099, "last_edit_date": 1565185099, "creation_date": 1565184697, "answer_id": 57395695, "question_id": 57395638, "link": "https://stackoverflow.com/questions/57395638/i-am-having-an-error-property-length-does-not-exist-on-type-quotation/57395695#57395695", "title": "I am having an error Property &#39;length&#39; does not exist on type &#39;Quotation&#39;", "body": "<p>The Observable returned by your <code>getQuotationDocumentNumber()</code> is emitting a <code>Quotation</code> type, which does not have a <code>length</code> property.</p>\n\n<p>EDIT: modify your service method to return the type you're looking for. Alternatively, if it's a specific field on the <code>Quotation</code> type, don't forget to extract it.</p>\n"}], "owner": {"reputation": 3, "user_id": 11834731, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43z9GVzjww4/AAAAAAAAAAI/AAAAAAAABCk/vgPmcqo11ac/photo.jpg?sz=128", "display_name": "Keep Watching Madani Channel", "link": "https://stackoverflow.com/users/11834731/keep-watching-madani-channel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 57395695, "answer_count": 1, "score": 0, "last_activity_date": 1565185099, "creation_date": 1565184502, "question_id": 57395638, "link": "https://stackoverflow.com/questions/57395638/i-am-having-an-error-property-length-does-not-exist-on-type-quotation", "title": "I am having an error Property &#39;length&#39; does not exist on type &#39;Quotation&#39;", "body": "<p>I am having an error in my component \nProperty 'length' does not exist on type 'Quotation'.\nI am getting error on this line\nfor (let i = 0; i &lt; data.<em>length</em>; i++) </p>\n\n<p>component</p>\n\n<pre><code>getQuotationDocumentNumber(): void {\n    this.quotationservice.getQuotationDocumentNumber(this.objQuotationDocument.QuotationFinancialYearId, this.objQuotationDocument.CustomerId).subscribe(\n      data =&gt; {\n        this.quotationdocument = Array(); \n        for (let i = 0; i &lt; data.length; i++) {\n          this.quotationdocument.push({ Id: data[i].Id, SerialNumber: data[i].SerialNumber, FinancialYear: data[i].FinancialYear.ShortTitle });\n        }\n      });\n  }\n</code></pre>\n\n<p>Model</p>\n\n<pre><code>import { Customer } from './customer';\nimport { Quotation } from './Quotation';\n\nexport interface QuotationDocument\n{\n    CustomerId: number;   \n    Customer: Customer;\n    CustomerName: string;\n    QuotationId: number;   \n    QuotationFinancialYearId: number;\n    Quotation: Quotation;\n    QuotationSerialNumber: number;\n}\n</code></pre>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1565184861, "creation_date": 1565184861, "answer_id": 57395744, "question_id": 57395252, "link": "https://stackoverflow.com/questions/57395252/fixing-type-errors-when-accessing-object-value-dynamically-i-e-myobjectvalue/57395744#57395744", "title": "Fixing type errors when accessing object value dynamically i.e. myObject[`VALUE_${variable}`]", "body": "<p>I don't think it's possible to use string concatenation/interpolation if you're doing this. There's a similar example explained <a href=\"https://github.com/piotrwitek/typesafe-actions#constants\" rel=\"nofollow noreferrer\">here</a> where it says:</p>\n\n<blockquote>\n  <p>...make sure to use simple string literal assignment with const. This limitation is coming from the type-system, because all the dynamic string operations (e.g. string concatenation, template strings and also object used as a map) will widen the literal type to its super-type, <code>string</code></p>\n</blockquote>\n\n<p>So I think your best bet might be to have a function which converts your variant to the specific string literals which represent properties of <code>CHARACTER_ITEMS</code>.  Here's one possible solution:</p>\n\n<pre><code>const convert = (member: \"ARMS\" | \"LEGS\", weight: \"LIGHT\" | \"HEAVY\") : keyof typeof CHARACTER_ITEMS =&gt; {\n    if (member === \"ARMS\")\n        return weight === \"LIGHT\" ? \"ITEM_ARMS_LIGHT\" : \"ITEM_ARMS_HEAVY\"\n    else\n        return weight === \"LIGHT\" ? \"ITEM_LEGS_LIGHT\" : \"ITEM_LEGS_HEAVY\"\n}\n\nconst variant = 'HEAVY'; // This is dynamic, based on server response\n//const arms = CHARACTER_ITEMS[`ITEM_LEGS_${variant}`]\nconst arms = CHARACTER_ITEMS[convert(\"ARMS\", variant)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4301, "user_id": 10326373, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gELRFaHltbo/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsdj9V1baYsQJixyXkjgDgjTYtUg/mo/photo.jpg?sz=128", "display_name": "Yoni Gibbs", "link": "https://stackoverflow.com/users/10326373/yoni-gibbs"}, "edited": false, "score": 0, "creation_date": 1565272037, "post_id": 57413864, "comment_id": 101308358, "body": "Is that giving you type safety? You can pass anything into the <code>path</code> parameter, and you&#39;re then using an unsafe cast, so it isn&#39;t quite type-safe as far as I can see?"}], "tags": [], "owner": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "is_accepted": true, "score": 0, "last_activity_date": 1565271170, "creation_date": 1565271170, "answer_id": 57413864, "question_id": 57395252, "link": "https://stackoverflow.com/questions/57395252/fixing-type-errors-when-accessing-object-value-dynamically-i-e-myobjectvalue/57413864#57413864", "title": "Fixing type errors when accessing object value dynamically i.e. myObject[`VALUE_${variable}`]", "body": "<p>Thus far cleanest way I found is to create a helper function like this</p>\n\n<pre><code>export function getDynamicAsset&lt;T&gt;(resource: T, path: string) {\n  const typedPath = path as keyof typeof resource;\n\n  return resource[typedPath];\n}\n</code></pre>\n\n<p>And use it this way</p>\n\n<pre><code>getDynamicAsset(CHARACTER_ITEMS, `ITEM_LEGS_${variant}`)\n</code></pre>\n"}], "owner": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "accepted_answer_id": 57413864, "answer_count": 2, "score": 2, "last_activity_date": 1565271170, "creation_date": 1565183360, "question_id": 57395252, "link": "https://stackoverflow.com/questions/57395252/fixing-type-errors-when-accessing-object-value-dynamically-i-e-myobjectvalue", "title": "Fixing type errors when accessing object value dynamically i.e. myObject[`VALUE_${variable}`]", "body": "<p>I've got following object</p>\n\n<pre><code>const CHARACTER_ITEMS = {\n  ITEM_ARMS_LIGHT: \"\",\n  ITEM_LEGS_LIGHT: \"\",\n  ITEM_ARMS_HEAVY: \"\",\n  ITEM_LEGS_HEAVY: \"\"\n}\n</code></pre>\n\n<p>I then want to access some values of this object in a dynamic way i.e </p>\n\n<pre><code>const variant = 'HEAVY'; // This is dynamic, based on server response\nconst arms = CHARACTER_ITEMS[`ITEM_LEGS_${variant}`]\n</code></pre>\n\n<p>Unfortunately this throws an error</p>\n\n<blockquote>\n  <p>No index signature with a parameter of type 'string' was found on\n  type '{ ITEM_ARMS_LIGHT: any; ...</p>\n</blockquote>\n\n<p>I tried typing my <code>variant</code> like this</p>\n\n<pre><code>const variant: 'HEAVY' | 'LIGHT' = 'HEAVY';\n</code></pre>\n\n<p>but had no luck, same error comes up. Is there any way to fix this without using a disable comment and preserving type safety? i.e. <code>variant</code> will always have correct value that resolves to entry in <code>CHARACTER_ITEMS</code></p>\n"}, {"tags": ["typescript", "plugins", "vuex", "nuxt.js"], "owner": {"reputation": 173, "user_id": 3364551, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003343624349/picture?type=large", "display_name": "Moritz H&#252;bner", "link": "https://stackoverflow.com/users/3364551/moritz-h%c3%bcbner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1036, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1565238882, "creation_date": 1565183090, "last_edit_date": 1565238882, "question_id": 57395180, "link": "https://stackoverflow.com/questions/57395180/typescript-definition-of-nuxt-plugins-global-methods-has-type-any", "title": "Typescript definition of nuxt plugins global methods has type any?", "body": "<p>I have written a Nuxt.js plugin which provides global methods defined by inject property because I need them to be accessible in Vuex store instances either. I have written a type definition file, which I have included in <code>tsconfig.json</code>. When I access this global methods in my Nuxt.js application like in a page typing works as expected. When I try to access this methods in an action method inside a store it has type any. How can I augment the types in <code>vuex/types/index.d.ts</code> to access my methods with intellisense support and the right typings? This would be great.</p>\n\n<p>Best regards\nMoritz</p>\n\n<p>What I have tried out:</p>\n\n<p>After reading this <a href=\"https://vuejs.org/v2/guide/typescript.html\" rel=\"nofollow noreferrer\">guide</a> I was able to complete my plugins type definitions. In a similar way I have to do this for Vuex, but I can not figure out which module I have to use. </p>\n\n<p><code>plugin-web-connection.ts</code>:</p>\n\n<pre><code>export default ({store, isHMR, app}, inject) =&gt; {\n\n  app.store.registerModule('oauth', oAuthStore);\n  app.store.registerModule('app-config', appConfigStore);\n\n  inject(\"getOAuthCredentials\", function(stringProp: string) : string {\n\n    console.log(\"This is an example for getting oAuth: \", stringProp);\n    return stringProp;\n  });\n\n  inject(\"doWebRequest\", function&lt;T&gt;(method: string, params: any) : \nPromise&lt;T&gt; {\n // content of method does not matter\n    }\n</code></pre>\n\n<p><code>plugin-web-connection.d.ts</code>:</p>\n\n<pre><code>// 1. Make sure to import 'vue' before declaring augmented types\nimport Vue from 'vue'\n\n// 2. Specify a file with the types you want to augment\n//    Vue has the constructor type in types/vue.d.ts\ndeclare module 'vue/types/vue' {\n  // 3. Declare augmentation for Vue\n  interface Vue {\n    $getOAuthCredentials(stringProp: string): string,\n    $doWebRequest&lt;T&gt;(method: string, params: any, storeCommit: string): \nPromise&lt;T&gt;\n  }\n}\n</code></pre>\n\n<p><code>menu-store.ts</code>:</p>\n\n<pre><code>export const state = (): sabioTree =&gt; ({\n\n});\n\nexport const mutations = {\n    setMenu(state: sabioTree, newState: sabioTree) {}\n}\n\nexport const actions = {\n\n    retrieveMenu(context: any, data: any) {\n\n        var method: string = data.method;\n        var parametersObj: any = data.parameters;\n        var storeCommit: string = data.storeCommit;\n\n        debugger;\n\n        // this is underlined red by VS-Code because of the generic!! this.$doWebRequest has type any\n        this.$doWebRequest&lt;sabioTree&gt;(method, parametersObj, storeCommit).\n        then(function(s) {})\n    }\n }\n</code></pre>\n"}, {"tags": ["typescript", "vue.js", "storybook"], "comments": [{"owner": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1565859822, "post_id": 57395162, "comment_id": 101482475, "body": "Have you tried deleting your <code>node_modules</code> folder, and running <code>yarn cache clean</code>, then re-install the packages (<code>yarn</code>)? Possibly also updating your dependencies? I have had similar issues before which was fixed upstream, but did not get imported due to cache. (albeit not in vue)"}, {"owner": {"reputation": 569, "user_id": 3218464, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xXTB7.jpg?s=128&g=1", "display_name": "Cornel Janssen", "link": "https://stackoverflow.com/users/3218464/cornel-janssen"}, "reply_to_user": {"reputation": 10662, "user_id": 741850, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4a92d66111d2f71d36b14aec1741fb14?s=128&d=identicon&r=PG", "display_name": "Automatico", "link": "https://stackoverflow.com/users/741850/automatico"}, "edited": false, "score": 0, "creation_date": 1565951773, "post_id": 57395162, "comment_id": 101512730, "body": "Yes, It looks like it&#39;s a tsconfig issue with the declaration of my roots."}], "owner": {"reputation": 569, "user_id": 3218464, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xXTB7.jpg?s=128&g=1", "display_name": "Cornel Janssen", "link": "https://stackoverflow.com/users/3218464/cornel-janssen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1618, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1565356035, "creation_date": 1565183018, "question_id": 57395162, "link": "https://stackoverflow.com/questions/57395162/storybook-vue-typescript-module-not-found-error-cant-resolve", "title": "Storybook Vue Typescript: Module not found: Error: Can&#39;t resolve", "body": "<p>I have a Typescript Vue monorepo project (yarn workspaces) that includes 3 packages: web, styles and components. For the component package, I want to utilize storybook for visual testing and isolated development.</p>\n\n<p>The components work correctly when I import them in the web project, but when I run storybook I get the following error:</p>\n\n<pre><code>Module not found: Error: Can't resolve './../components' in 'jdk-darts-frontend/packages/jdk-darts-components/.storybook'\n @ ./.storybook/config.ts \n</code></pre>\n\n<p>It looks like there is a typescript/vue import issue with the storybook manager webpack configuration.</p>\n\n<p>Storybook config:</p>\n\n<pre><code>import Vue from 'vue';\nimport {addParameters, configure} from '@storybook/vue';\nimport {Button, Card, FinalInput, Icon, Input, Modal, Table} from './../components';\n\n...\n\nVue.component('d-button', Button);\nVue.component('d-card', Card);\nVue.component('d-icon', Icon);\nVue.component('d-input', Input);\nVue.component('d-final-form-input', FinalInput);\nVue.component('d-modal', Modal);\nVue.component('d-table', Table);\n\nfunction loadStories() {\n  const req = require.context('../components', true, /\\.stories\\.ts$/);\n  req.keys().forEach(filename =&gt; req(filename));\n}\n\nconfigure(loadStories, module);\n</code></pre>\n\n<p>Storybook manager webpack config:</p>\n\n<pre><code>async function managerWebpack(config, options) {\n  config.resolve.extensions.push('.ts', '.tsx', '.vue', '.css', '.scss', '.html');\n\n  config.module.rules.push({\n    test: /\\.ts$/,\n    exclude: /node_modules/,\n    use: [\n      {\n        loader: 'ts-loader',\n        options: {\n          appendTsSuffixTo: [/\\.vue$/],\n          transpileOnly: true,\n        },\n      },\n    ],\n  });\n\n  config.resolve = {\n    alias: {\n      'vue$': 'vue/dist/vue.esm.js',\n      '@': path.dirname(path.resolve(__dirname, \"../components\")),\n    },\n  };\n\n  return config;\n}\n\nmodule.exports = {\n  managerWebpack: managerWebpack,\n};\n</code></pre>\n\n<p>Storybook template webpack config</p>\n\n<pre><code>module.exports = async ({config}) =&gt; {\n  config.resolve.extensions.push('.ts', '.tsx', '.vue', '.css', '.scss', '.html');\n\n  config.module.rules.push({\n    test: /\\.ts$/,\n    exclude: /node_modules/,\n    use: [\n      {\n        loader: 'ts-loader',\n        options: {\n          appendTsSuffixTo: [/\\.vue$/],\n          transpileOnly: true,\n        },\n      },\n    ],\n  });\n\n    config.module.rules.push({\n        test: /\\.scss$/,\n        use: [\n            'vue-style-loader',\n            'css-loader',\n            {\n                loader: 'sass-loader',\n                options: {\n          data: `@import \"~jdk-darts-styles/scss/index.scss\";`,\n          implementation: require('sass'),\n        },\n      },\n        ],\n    });\n\n    config.resolve = {\n        alias: {\n            'vue$': 'vue/dist/vue.esm.js',\n      '@': path.dirname(path.resolve(__dirname, \"../src\")),\n    },\n    };\n\n    return config;\n};\n</code></pre>\n\n<p>The components are imported using multiple index.ts files.</p>\n\n<p>GIT Repository: <a href=\"https://bitbucket.org/jdkdarts/jdk-darts-frontend/src/31606627861f8674486b854de520e294d7aa6ab2/?at=feature/JDKDAR-03_create_new_game\" rel=\"nofollow noreferrer\">https://bitbucket.org/jdkdarts/jdk-darts-frontend/src/31606627861f8674486b854de520e294d7aa6ab2/?at=feature/JDKDAR-03_create_new_game</a></p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 567, "user_id": 7382664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6874610d364c84094f83060a0d3f7ef1?s=128&d=identicon&r=PG&f=1", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7382664/chaitanya"}, "edited": false, "score": 0, "creation_date": 1565184280, "post_id": 57395022, "comment_id": 101272662, "body": "Do you need to disable <code>ivy</code> in <code>AngularCompiler</code>?"}, {"owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "reply_to_user": {"reputation": 567, "user_id": 7382664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6874610d364c84094f83060a0d3f7ef1?s=128&d=identicon&r=PG&f=1", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7382664/chaitanya"}, "edited": false, "score": 0, "creation_date": 1565184531, "post_id": 57395022, "comment_id": 101272839, "body": "But Ivy is the future and I&#39;m thinking about putting it in the library, so I don&#39;t want to create something that will soon stop working."}, {"owner": {"reputation": 567, "user_id": 7382664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6874610d364c84094f83060a0d3f7ef1?s=128&d=identicon&r=PG&f=1", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7382664/chaitanya"}, "edited": false, "score": 0, "creation_date": 1565185159, "post_id": 57395022, "comment_id": 101273276, "body": "To disable use <code>&quot;angularCompilerOptions&quot;: {... &quot;enableIvy&quot;: false,...}</code> in your <code>tsconfig.json</code> file"}, {"owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "reply_to_user": {"reputation": 567, "user_id": 7382664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6874610d364c84094f83060a0d3f7ef1?s=128&d=identicon&r=PG&f=1", "display_name": "Chaitanya", "link": "https://stackoverflow.com/users/7382664/chaitanya"}, "edited": false, "score": 0, "creation_date": 1565185219, "post_id": 57395022, "comment_id": 101273322, "body": "I know how to do that but I won&#39;t. As I wrote above..."}], "owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565182577, "creation_date": 1565182577, "question_id": 57395022, "link": "https://stackoverflow.com/questions/57395022/override-life-cycle-method-in-ivy", "title": "override life cycle method in ivy", "body": "<p>I want to override some life cycle methods of Angular Components when I have just an instance of the component so extending is not a deal.</p>\n\n<p>I want to achieve something like that\n<a href=\"https://github.com/NetanelBasal/ngx-take-until-destroy/blob/master/src/take-until-destroy.ts\" rel=\"nofollow noreferrer\">https://github.com/NetanelBasal/ngx-take-until-destroy/blob/master/src/take-until-destroy.ts</a>\nto run some code before or after the lifecycle is called.</p>\n\n<p>The way from the library works on the ViewEngine but doesn't with Ivy.</p>\n\n<p>During my researches I noticed that the ViewEngine runs method from the class so I have a place to override that before the function is called but Ivy collect all lifecycles at the begining in core.js so my changes will not have affect because they don't change function stored in view.destroyHooks array. </p>\n\n<p>Do you have any idea how to achieve that goal?</p>\n\n<p>core.js</p>\n\n<pre><code>/** Calls onDestroy hooks for this view */\nfunction executeOnDestroys(view) {\n    var tView = view[TVIEW];\n    var destroyHooks;\n    if (tView != null &amp;&amp; (destroyHooks = tView.destroyHooks) != null) {\n        for (var i = 0; i &lt; destroyHooks.length; i += 2) {\n            var context = view[destroyHooks[i]];\n            // Only call the destroy hook if the context has been requested.\n            if (!(context instanceof NodeInjectorFactory)) {\n                destroyHooks[i + 1].call(context);\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "ecmascript-6", "es6-modules"], "owner": {"reputation": 31, "user_id": 11676920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f77c71c52152f960a3589e4ed824efc?s=128&d=identicon&r=PG&f=1", "display_name": "Romain Fallet", "link": "https://stackoverflow.com/users/11676920/romain-fallet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1418, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1565180972, "creation_date": 1565180601, "last_edit_date": 1565180972, "question_id": 57394431, "link": "https://stackoverflow.com/questions/57394431/how-to-set-up-a-basic-angular-8-application-with-es6-es2015-modules-native-supp", "title": "How to set up a basic angular 8 application with ES6/ES2015 modules (native support)?", "body": "<p>Since native support of ES6 modules is quite well implemented in latest browsers (see <a href=\"https://caniuse.com/#feat=es6-module\" rel=\"nofollow noreferrer\">https://caniuse.com/#feat=es6-module</a> and <a href=\"https://caniuse.com/#feat=es6-module-dynamic-import\" rel=\"nofollow noreferrer\">https://caniuse.com/#feat=es6-module-dynamic-import</a>), I am trying to set up a very basic Angular 8 application using no module loader at all, manually, for testing/learning purpose (so please, don't suggest to use Angular CLI).</p>\n\n<p><strong>My problem is that I am having trouble with importing the Component decorator from @angular/core.</strong></p>\n\n<p>Here is my project structure:</p>\n\n<pre><code>+---dist\n+---node_modules\n+---src\n|   +---app\n|   |   +---app.component.ts\n|   |   +---app.module.ts\n|   +---main.ts\n+---index.html\n+---package.json\n+---tsconfig.json\n</code></pre>\n\n<p>Here is my ./tsconfig.json:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n    \"compilerOptions\": {\n        \"outDir\": \"dist\",\n        \"target\": \"ES2015\",\n        \"module\": \"ES2015\",\n        \"moduleResolution\": \"node\",\n        \"experimentalDecorators\": true,\n        \"emitDecoratorMetadata\": true\n    }\n}\n</code></pre>\n\n<p>Here is my ./package.json:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n    \"name\": \"angular-starter\",\n    \"version\": \"1.0.0\",\n    \"private\": true,\n    \"scripts\": {\n        \"start\": \"live-server\"\n    },\n    \"dependencies\": {\n        \"@angular/common\": \"8.2.0\",\n        \"@angular/compiler\": \"8.2.0\",\n        \"@angular/core\": \"8.2.0\",\n        \"@angular/platform-browser\": \"8.2.0\",\n        \"@angular/platform-browser-dynamic\": \"8.2.0\",\n        \"rxjs\": \"6.5.2\",\n        \"tslib\": \"1.10.0\",\n        \"zone.js\": \"0.10.1\"\n    },\n    \"devDependencies\": {\n        \"live-server\": \"1.2.1\"\n    }\n}\n</code></pre>\n\n<p>Here is my ./src/main.ts file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import \"zone.js/dist/zone\";\n\nimport { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\n\nimport { AppModule } from \"./app/app.module\";\n\nplatformBrowserDynamic()\n    .bootstrapModule(AppModule)\n    .catch(err =&gt; console.error(err));\n</code></pre>\n\n<p>Here is my ./src/app/app.module.ts file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { BrowserModule } from \"@angular/platform-browser\";\nimport { NgModule } from \"@angular/core\";\n\nimport { AppComponent } from \"./app.component\";\n\n@NgModule({\n    declarations: [AppComponent],\n    imports: [BrowserModule],\n    providers: [],\n    bootstrap: [AppComponent]\n})\nexport class AppModule {}\n</code></pre>\n\n<p>Here is my ./src/app/app.component.ts file:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"app-root\",\n    template: \"&lt;h1&gt;Welcome to {{ title }}!&lt;/h1&gt;\"\n})\nexport class AppComponent {\n    title = \"Angular\";\n}\n</code></pre>\n\n<p>I have typescript@3.5.3 installed globally.</p>\n\n<h1>My steps</h1>\n\n<p>First, I run the Typescript compiler:</p>\n\n<pre><code>tsc\n</code></pre>\n\n<p>This command generates theses files under my ./dist folder:</p>\n\n<pre><code>+---dist\n|   +---app\n|   |   +---app.component.js\n|   |   +---app.module.js\n|   +---main.js\n</code></pre>\n\n<p>Then, If I run the live server, I get the following output in the console:</p>\n\n<pre><code>TypeError: Error resolving module specifier: zone.js/dist/zone main.js:1:7\n\n</code></pre>\n\n<p>This is normal, since Typescript imports are not ES6 standards. I have to update them manually to make them correct (referencing js files with file extension).</p>\n\n<p>So I change each dependencies imports, referencing the main entry file found in each package.json of each dependency and adding \".js\" to my project files.</p>\n\n<p><strong>In ./dist/main.js:</strong></p>\n\n<pre><code>import \"./../node_modules/zone.js/dist/zone-node.js\";\nimport { platformBrowserDynamic } from \"./../node_modules/@angular/platform-browser-dynamic/bundles/platform-browser-dynamic.umd.js\";\nimport { AppModule } from \"./app/app.module.js\";\nplatformBrowserDynamic()\n    .bootstrapModule(AppModule)\n    .catch(err =&gt; console.error(err));\n</code></pre>\n\n<p><strong>In ./dist/app/app.module.js:</strong></p>\n\n<pre><code>var __decorate = (this &amp;&amp; this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c &lt; 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" &amp;&amp; typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i &gt;= 0; i--) if (d = decorators[i]) r = (c &lt; 3 ? d(r) : c &gt; 3 ? d(target, key, r) : d(target, key)) || r;\n    return c &gt; 3 &amp;&amp; r &amp;&amp; Object.defineProperty(target, key, r), r;\n};\nimport { BrowserModule } from \"./../../node_modules/@angular/platform-browser/bundles/platform-browser.umd.js\";\nimport { NgModule } from \"./../../node_modules/@angular/core/bundles/core.umd.js\";\nimport { AppComponent } from \"./app.component.js\";\nlet AppModule = class AppModule {\n};\nAppModule = __decorate([\n    NgModule({\n        declarations: [AppComponent],\n        imports: [BrowserModule],\n        providers: [],\n        bootstrap: [AppComponent]\n    })\n], AppModule);\nexport { AppModule };\n</code></pre>\n\n<p><strong>In ./dist/app/app.component.js:</strong></p>\n\n<pre><code>var __decorate = (this &amp;&amp; this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c &lt; 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" &amp;&amp; typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i &gt;= 0; i--) if (d = decorators[i]) r = (c &lt; 3 ? d(r) : c &gt; 3 ? d(target, key, r) : d(target, key)) || r;\n    return c &gt; 3 &amp;&amp; r &amp;&amp; Object.defineProperty(target, key, r), r;\n};\nimport { Component } from \"./../../node_modules/@angular/core/bundles/core.umd.js\";\nlet AppComponent = class AppComponent {\n    constructor() {\n        this.title = \"Angular\";\n    }\n};\nAppComponent = __decorate([\n    Component({\n        selector: \"app-root\",\n        template: \"&lt;h1&gt;Welcome to {{ title }}!&lt;/h1&gt;\"\n    })\n], AppComponent);\nexport { AppComponent };\n</code></pre>\n\n<p>All imports seems to work properly, except the last one in ./dist/app/app.component.js:</p>\n\n<pre><code>SyntaxError: import not found: Component\n</code></pre>\n\n<p>This error says that there is nothing exporting the \"Component\" decorator in @angular/core/bundles/core.umd.js.</p>\n\n<p>Why? What did I miss?</p>\n"}, {"tags": ["typescript", "ionic-framework", "angular7", "ionic4"], "comments": [{"owner": {"reputation": 8264, "user_id": 2118360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLaPr.jpg?s=128&g=1", "display_name": "TheParam", "link": "https://stackoverflow.com/users/2118360/theparam"}, "edited": false, "score": 0, "creation_date": 1565181039, "post_id": 57394251, "comment_id": 101270584, "body": "Hey Divyesh. just create a directive like below answer provide and apply it anywhere in your code."}, {"owner": {"reputation": 8264, "user_id": 2118360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLaPr.jpg?s=128&g=1", "display_name": "TheParam", "link": "https://stackoverflow.com/users/2118360/theparam"}, "edited": false, "score": 0, "creation_date": 1565181887, "post_id": 57394251, "comment_id": 101271049, "body": "I have updated the  answer please check now"}, {"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "reply_to_user": {"reputation": 8264, "user_id": 2118360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLaPr.jpg?s=128&g=1", "display_name": "TheParam", "link": "https://stackoverflow.com/users/2118360/theparam"}, "edited": false, "score": 0, "creation_date": 1565186403, "post_id": 57394251, "comment_id": 101274076, "body": "Still not working"}, {"owner": {"reputation": 8264, "user_id": 2118360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLaPr.jpg?s=128&g=1", "display_name": "TheParam", "link": "https://stackoverflow.com/users/2118360/theparam"}, "edited": false, "score": 0, "creation_date": 1565244546, "post_id": 57394251, "comment_id": 101293204, "body": "&lt;ion-input type=&quot;number&quot; value=&quot;333&quot;&gt;&lt;/ion-input&gt; have you checked this?"}, {"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "reply_to_user": {"reputation": 8264, "user_id": 2118360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLaPr.jpg?s=128&g=1", "display_name": "TheParam", "link": "https://stackoverflow.com/users/2118360/theparam"}, "edited": false, "score": 0, "creation_date": 1565270478, "post_id": 57394251, "comment_id": 101307278, "body": "Yes, still it&#39;s accepting + . ? ! everything"}, {"owner": {"reputation": 192, "user_id": 4706024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cEjUQ.png?s=128&g=1", "display_name": "Mitesh Shah", "link": "https://stackoverflow.com/users/4706024/mitesh-shah"}, "edited": false, "score": 0, "creation_date": 1584618057, "post_id": 57394251, "comment_id": 107494336, "body": "can&#39;t you use <code>type=&quot;number&quot;</code> or <code>type=&quot;tel&quot;</code> ?"}, {"owner": {"reputation": 246, "user_id": 9065901, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bcc79e7635497f7e7cf31ea5e8dd50e5?s=128&d=identicon&r=PG&f=1", "display_name": "Shaik", "link": "https://stackoverflow.com/users/9065901/shaik"}, "edited": false, "score": 0, "creation_date": 1610974988, "post_id": 57394251, "comment_id": 116294187, "body": "hi @DivyeshSavaliya, i too have the same requirement, can you please help me which one worked for you. thank you"}, {"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 0, "creation_date": 1611072217, "post_id": 57394251, "comment_id": 116329712, "body": "I am able to do it using simple HTML input instead of using ionic input"}], "answers": [{"comments": [{"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 0, "creation_date": 1565180660, "post_id": 57394389, "comment_id": 101270350, "body": "Tried this, not working. it&#39;s accepting + . ? ! everything and its also updating ngModel as well with all those special characters"}, {"owner": {"reputation": 344, "user_id": 4898313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LcgTjzfTd-8/AAAAAAAAAAI/AAAAAAAAACY/_ur8guXhM0Y/photo.jpg?sz=128", "display_name": "Virendra Yadav", "link": "https://stackoverflow.com/users/4898313/virendra-yadav"}, "reply_to_user": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 1, "creation_date": 1565181498, "post_id": 57394389, "comment_id": 101270822, "body": "Hello please replace the line of the pattern with &quot;const pattern = /[0-9]/;&quot;"}, {"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 0, "creation_date": 1565181814, "post_id": 57394389, "comment_id": 101271013, "body": "Tried that, still no luck"}, {"owner": {"reputation": 126, "user_id": 5503582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CByUC.jpg?s=128&g=1", "display_name": "BHinkson", "link": "https://stackoverflow.com/users/5503582/bhinkson"}, "edited": false, "score": 0, "creation_date": 1617741792, "post_id": 57394389, "comment_id": 118389470, "body": "This works but text to speech will not run through this.  (dealing with that now)"}], "tags": [], "owner": {"reputation": 344, "user_id": 4898313, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-LcgTjzfTd-8/AAAAAAAAAAI/AAAAAAAAACY/_ur8guXhM0Y/photo.jpg?sz=128", "display_name": "Virendra Yadav", "link": "https://stackoverflow.com/users/4898313/virendra-yadav"}, "is_accepted": false, "score": 16, "last_activity_date": 1597789134, "last_edit_date": 1597789134, "creation_date": 1565180444, "answer_id": 57394389, "question_id": 57394251, "link": "https://stackoverflow.com/questions/57394251/ionic-4-ion-input-allow-number-only-restrict-alphabet-and-special-character/57394389#57394389", "title": "Ionic 4 ion-input allow number only, restrict alphabet and special character", "body": "<p><strong>You should use keypress event</strong>\nHere is the example\n<em>TS File</em></p>\n<pre><code>  numberOnlyValidation(event: any) {\n    const pattern = /[0-9.,]/;\n    let inputChar = String.fromCharCode(event.charCode);\n\n    if (!pattern.test(inputChar)) {\n      // invalid character, prevent input\n      event.preventDefault();\n    }\n  }\n</code></pre>\n<p><em>HTML File</em></p>\n<pre><code>&lt;ion-input type=&quot;text&quot; placeholder=&quot;Enter number&quot;\n        [(ngModel)]=&quot;userCount&quot; \n        name=&quot;userCount&quot; \n        (keypress)=&quot;numberOnlyValidation($event)&quot;\n &lt;/ion-input&gt;\n</code></pre>\n<p>It will resolve your issue.</p>\n<p><strong>Using directive in Ionic 5:</strong></p>\n<pre><code>import { Directive, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[appIntegerInput]'\n})\nexport class IntegerInputDirective {\n\n  constructor() { }\n\n  @HostListener('keypress', ['$event'])\n  onInput(event: any) {\n    const pattern = /[0-9]/; // without ., for integer only\n    let inputChar = String.fromCharCode(event.which ? event.which : event.keyCode);\n\n    if (!pattern.test(inputChar)) {\n      // invalid character, prevent input\n      event.preventDefault();\n      return false;\n    }\n    return true;\n  }\n\n}\n</code></pre>\n<p>HTML File</p>\n<pre><code>&lt;ion-input appIntegerInput inputmode=&quot;numeric&quot; type=&quot;number&quot;&gt;&lt;/ion-input&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 0, "creation_date": 1565180810, "post_id": 57394450, "comment_id": 101270437, "body": "Tried this, its keep adding value, i.e if I type 5 and then + then it will show 55. After that, If I type 1 then it shows 55551"}, {"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 0, "creation_date": 1565181143, "post_id": 57394450, "comment_id": 101270648, "body": "Yes, I tried. I am testing on android device and it&#39;s not working as expected."}], "tags": [], "owner": {"reputation": 653, "user_id": 8036445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ed1c3c2b3b03d10f179fb8f4078c?s=128&d=identicon&r=PG", "display_name": "Velusamy Venkatraman", "link": "https://stackoverflow.com/users/8036445/velusamy-venkatraman"}, "is_accepted": false, "score": 0, "last_activity_date": 1565180648, "creation_date": 1565180648, "answer_id": 57394450, "question_id": 57394251, "link": "https://stackoverflow.com/questions/57394251/ionic-4-ion-input-allow-number-only-restrict-alphabet-and-special-character/57394450#57394450", "title": "Ionic 4 ion-input allow number only, restrict alphabet and special character", "body": "<p>Change your code like this. I hope it will fix</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>countChange(event) {\r\n   \r\n   this.userCount += event.target.value.replace(/[^0-9]*/g, '');\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ion-input type=\"text\" placeholder=\"Enter number\"\r\n         name=\"userCount\" \r\n        (change)=\"countChange($event)\"&gt;\r\n &lt;/ion-input&gt;\r\n Usercount: {{userCount}}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 0, "creation_date": 1565181431, "post_id": 57394557, "comment_id": 101270787, "body": "It is working with &lt;input&gt; tag, but my problem is when we use &lt;ion-input&gt;, I tried with ion-input and its not working"}, {"owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "edited": false, "score": 0, "creation_date": 1565182510, "post_id": 57394557, "comment_id": 101271483, "body": "I tried your updated answer, it&#39;s not working. to debug I console evt.which, its 0 for all the keys. its 0 with both ion-input and only input"}, {"owner": {"reputation": 129, "user_id": 2878290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/42a031d024dded3ebacbacfb265ff43d?s=128&d=identicon&r=PG&f=1", "display_name": "karthik elavan", "link": "https://stackoverflow.com/users/2878290/karthik-elavan"}, "edited": false, "score": 0, "creation_date": 1588080204, "post_id": 57394557, "comment_id": 108757469, "body": "Dear team, i am using ionic3 and we want stop to enter the numeric value in ion-input type box, please help me"}, {"owner": {"reputation": 129, "user_id": 2878290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/42a031d024dded3ebacbacfb265ff43d?s=128&d=identicon&r=PG&f=1", "display_name": "karthik elavan", "link": "https://stackoverflow.com/users/2878290/karthik-elavan"}, "edited": false, "score": 0, "creation_date": 1588080237, "post_id": 57394557, "comment_id": 108757481, "body": "it should allow alphabets only not in numeric"}], "tags": [], "owner": {"reputation": 8264, "user_id": 2118360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yLaPr.jpg?s=128&g=1", "display_name": "TheParam", "link": "https://stackoverflow.com/users/2118360/theparam"}, "is_accepted": false, "score": 0, "last_activity_date": 1585130012, "last_edit_date": 1585130012, "creation_date": 1565180965, "answer_id": 57394557, "question_id": 57394251, "link": "https://stackoverflow.com/questions/57394251/ionic-4-ion-input-allow-number-only-restrict-alphabet-and-special-character/57394557#57394557", "title": "Ionic 4 ion-input allow number only, restrict alphabet and special character", "body": "<p>Here is a very simple solution to your problem.</p>\n\n<p><strong>Step 1:</strong> Create a number-only directive and place it in a directive folder.</p>\n\n<p><strong>number-only.directive.ts</strong></p>\n\n<pre><code>import { Directive, ElementRef, HostListener, Input } from '@angular/core';\nimport { NgControl } from '@angular/forms';\n\n@Directive({\n  selector: 'input[numbersOnly]'\n})\nexport class NumberDirective {\n\n  constructor(private _el: ElementRef) { }\n\n  @HostListener('input', ['$event']) onInputChange(evt) {\n\n    if (evt.which === 8 || evt.which === 0) {\n        return true;\n    }\n\n    const regex = new RegExp(\"^[0-9\\~]*$\");\n    var key = String.fromCharCode(!evt.charCode ? evt.which : evt.charCode);\n    // console.log(regex.test(key))\n    if (!regex.test(key)) {\n        evt.preventDefault();\n        return false;\n    }\n    return true;\n  }\n\n}\n</code></pre>\n\n<p>**Step 2: ** import it in a app.module file.</p>\n\n<pre><code>import { NumberDirective } from './directive/number-only.directive';\n@NgModule({\n  imports: [\n    CommonModule,\n  ],\n  declarations: [NumberDirective],\n  exports: []\n})\nexport class AppModule { }\n</code></pre>\n\n<p><strong>Step 3:</strong> Apply directive to input field like below.</p>\n\n<pre><code>  &lt;input type=\"text\" numbersOnly placeholder=\"Enter Mobile/Phone Number\"&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4990, "user_id": 1713345, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/y2dEr.jpg?s=128&g=1", "display_name": "sagits", "link": "https://stackoverflow.com/users/1713345/sagits"}, "edited": false, "score": 0, "creation_date": 1597840340, "post_id": 62234447, "comment_id": 112263850, "body": "Remember to use type=&quot;text&quot; inputmode=&quot;numeric&quot; , if you use type=&quot;number&quot; its not going to work because It will try to use .replace (string method) on an int value. inputmode=&quot;numeric&quot; show only numbers keyboard (even on type text). Another option is to use type=&quot;tel&quot;."}], "tags": [], "owner": {"reputation": 31, "user_id": 2140318, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KacjI.jpg?s=128&g=1", "display_name": "felipesntsassis", "link": "https://stackoverflow.com/users/2140318/felipesntsassis"}, "is_accepted": false, "score": 3, "last_activity_date": 1591533925, "last_edit_date": 1591533925, "creation_date": 1591459776, "answer_id": 62234447, "question_id": 57394251, "link": "https://stackoverflow.com/questions/57394251/ionic-4-ion-input-allow-number-only-restrict-alphabet-and-special-character/62234447#62234447", "title": "Ionic 4 ion-input allow number only, restrict alphabet and special character", "body": "<p>I solved my problem purging the alphabetic characters input following these steps:</p>\n\n<ol>\n<li>I create a util class with method:</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>export class StringUtil {\r\n \r\n    /**\r\n     * Removes all non numeric characters from string.\r\n     * @param str string\r\n     */\r\n    static removeNonNumerics = (str: string) =&gt; str.replace(/\\D/g, '');\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ol start=\"2\">\n<li>Created my directive:</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import { Directive, HostListener } from '@angular/core';\r\n\r\nimport { StringUtil } from 'src/app/shared/utils/string.util';\r\n\r\n@Directive({\r\n    selector: '[appInputInteger]'\r\n})\r\nexport class InputIntegerDirective {\r\n\r\n    constructor() { }\r\n\r\n    @HostListener('input', ['$event'])\r\n    onInput(event: any) {\r\n        event.target.value = StringUtil.removeNonNumerics(event.target.value);\r\n    }\r\n\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ol start=\"3\">\n<li>I've imported the <strong>InputIntegerDirective</strong> in my page module:</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DeliveryTimePageRoutingModule } from './delivery-time-routing.module';\r\n\r\nimport { DirectivesModule } from 'src/app/shared/directives/directives.module';\r\nimport { UiModule } from 'src/app/shared/ui/ui.module';\r\nimport { DeliveryTimePage } from './delivery-time.page';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        DirectivesModule,\r\n        FontAwesomeModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        DeliveryTimePageRoutingModule,\r\n        ReactiveFormsModule,\r\n        UiModule\r\n    ],\r\n    declarations: [DeliveryTimePage]\r\n})\r\nexport class DeliveryTimePageModule { }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ol start=\"4\">\n<li>And finally used it at page:</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ion-input type=\"text\" inputmode=\"numeric\" formControlName=\"deliveryTime\" maxlength=\"3\" placeholder=\"Tempo de Entrega\" [required]=\"true\" appInputInteger&gt;\r\n&lt;/ion-input&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This directive worked well on the web browser and my mobile device too.</p>\n"}], "owner": {"reputation": 2443, "user_id": 5928577, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/de0bfac7a6c5d48b56618a605088d145?s=128&d=identicon&r=PG&f=1", "display_name": "Divyesh Savaliya", "link": "https://stackoverflow.com/users/5928577/divyesh-savaliya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12159, "favorite_count": 0, "answer_count": 4, "score": 8, "last_activity_date": 1597789134, "creation_date": 1565179987, "last_edit_date": 1565181076, "question_id": 57394251, "link": "https://stackoverflow.com/questions/57394251/ionic-4-ion-input-allow-number-only-restrict-alphabet-and-special-character", "title": "Ionic 4 ion-input allow number only, restrict alphabet and special character", "body": "<p>I am creating an app in ionic4, I have a functionality where user can enter the only integer number (0-9), so I want to restrict any other character i.e alphabets, dot, plus everything.<br>\nI tried to restrict is using the following directive</p>\n\n<pre><code> @HostListener('input', ['$event']) onInputChange(event) {\n    this.inputElement = this._el.nativeElement.getElementsByTagName('input')[0];\n    const initalValue = this.inputElement.value;\n    this.inputElement.value = initalValue.replace(/[^0-9]*/g, '');\n    if (initalValue !== this.inputElement.value) {\n       event.stopPropagation();\n    }\n}\n</code></pre>\n\n<p>It is updating ngModel correctly but still, an invalid character is visible in the input field.</p>\n\n<p>I tried another option as following</p>\n\n<blockquote>\n  <p>html</p>\n</blockquote>\n\n<pre><code>&lt;ion-input type=\"text\" placeholder=\"Enter number\"\n        [(ngModel)]=\"userCount\" \n        name=\"userCount\" \n        (ionInput)=\"countChange($event)\"&gt;\n &lt;/ion-input&gt;\n Usercount: {{userCount}}\n</code></pre>\n\n<blockquote>\n  <p>Typescript</p>\n</blockquote>\n\n<pre><code>countChange(event) {\n    event.target.value = event.target.value.replace(/[^0-9]*/g, '');\n}\n</code></pre>\n\n<p>With above its printing value in HTML correct without invalid character, but its showing invalid character in input.<br></p>\n\n<p>If I enter 5+ in input, the value in ngModel shows 5 but input field showing 5+</p>\n\n<p>When I type 5++ and then type 5 again, input field shows 55 now.</p>\n\n<p>How can I restrict input to accept only integer values [0-9]</p>\n"}, {"tags": ["angular", "typescript", "sass"], "comments": [{"owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "edited": false, "score": 0, "creation_date": 1565178625, "post_id": 57393782, "comment_id": 101269234, "body": "Scss files are transpiled into css and aren&#39;t available at runtime. And you can&#39;t alter a css file that way anyway."}, {"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1565261068, "post_id": 57393782, "comment_id": 101301723, "body": "did you check my answer \ud83e\udd14\ud83e\udd14 ?"}, {"owner": {"reputation": 622, "user_id": 3352844, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7947c72104ebe37a33a9159145c63373?s=128&d=identicon&r=PG&f=1", "display_name": "Ravinder Kumar", "link": "https://stackoverflow.com/users/3352844/ravinder-kumar"}, "edited": false, "score": 0, "creation_date": 1565261654, "post_id": 57393782, "comment_id": 101301990, "body": "This is the wrong way of styling your view. You should play with CSS only. TS is not responsible for handling view but logic. Read about <code>@host</code> in scss."}], "answers": [{"tags": [], "owner": {"reputation": 1918, "user_id": 1984657, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/w2sc2.jpg?s=128&g=1", "display_name": "Friso", "link": "https://stackoverflow.com/users/1984657/friso"}, "is_accepted": false, "score": 0, "last_activity_date": 1565178884, "creation_date": 1565178884, "answer_id": 57393906, "question_id": 57393782, "link": "https://stackoverflow.com/questions/57393782/how-to-import-css-inside-typescript/57393906#57393906", "title": "How to import css inside typescript", "body": "<p>during build transpile it into css and then link that file in your <code>index.html</code> file:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;link rel=\"stylesheet\" href=\"dist/colors-variables.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565261091, "last_edit_date": 1565261091, "creation_date": 1565180998, "answer_id": 57394567, "question_id": 57393782, "link": "https://stackoverflow.com/questions/57393782/how-to-import-css-inside-typescript/57394567#57394567", "title": "How to import css inside typescript", "body": "<p>sass variable will compiled during the build ant the will not be accessible in run time so you can use css variables \ud83d\ude03</p>\n\n<p><em>style.scss</em></p>\n\n<pre><code>:root {\n  --primary-lightest-color: brown;\n}\n</code></pre>\n\n<p><em>sideWindowStyle</em> </p>\n\n<pre><code>get sideWindowStyle(): any {\n    switch (this.windowStyle) {\n      case 'classicStyle': {\n        return {\n          'background-color': 'var(--primary-lightest-color);'\n        };\n      }\n      case 'lightStyle': {\n        return {\n          'background-color': '#ffffff'\n        };\n      }\n      default: {\n        return {\n          'background-color': '#f1f9fe'\n        };\n      }\n    }\n  }\n</code></pre>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties\" rel=\"nofollow noreferrer\"><strong>CSS variables MDN \ud83c\udfaf</strong></a> </p>\n"}, {"tags": [], "owner": {"reputation": 622, "user_id": 3352844, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7947c72104ebe37a33a9159145c63373?s=128&d=identicon&r=PG&f=1", "display_name": "Ravinder Kumar", "link": "https://stackoverflow.com/users/3352844/ravinder-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1565262249, "creation_date": 1565262249, "answer_id": 57411106, "question_id": 57393782, "link": "https://stackoverflow.com/questions/57393782/how-to-import-css-inside-typescript/57411106#57411106", "title": "How to import css inside typescript", "body": "<p>If window.style is a class in template then you can achieve required style using Host:</p>\n\n<pre><code>:host(.classicStyle) { 'background-color': '$primary-lightest-color' }\n:host(.lightStyle) { 'background-color': '#ffffff' }\nbackground-color: '#f1f9fe'\n</code></pre>\n\n<p>This piece of code will automatically change your background-color property if either of these two class will be there on the container of your element.</p>\n\n<p>If window.style is a TS object then on the basis of its value, change the host element's class to <code>classicStyle</code> or <code>lightStyle</code> and then the given <code>host</code> code will work.</p>\n"}], "owner": {"reputation": 75, "user_id": 11468663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7516ddfeec9af42d95778d410b44bf83?s=128&d=identicon&r=PG&f=1", "display_name": "obar", "link": "https://stackoverflow.com/users/11468663/obar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 780, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1565262249, "creation_date": 1565178531, "question_id": 57393782, "link": "https://stackoverflow.com/questions/57393782/how-to-import-css-inside-typescript", "title": "How to import css inside typescript", "body": "<p>I have global css file where i have defined all colors. I tried to import that value inside typescript but it's don't work. This is my last try:</p>\n\n<pre><code>get sideWindowStyle(): any {\n    switch (this.windowStyle) {\n      case 'classicStyle': {\n        return {\n          '@import' : 'src/styles-library/colors-variables.scss',\n          'background-color': '$primary-lightest-color'\n        };\n      }\n      case 'lightStyle': {\n        return {\n          'background-color': '#ffffff'\n        };\n      }\n      default: {\n        return {\n          'background-color': '#f1f9fe'\n        };\n      }\n    }\n  }\n</code></pre>\n\n<p>Without import or with it its still didn't working.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "dependency-injection", "frontend"], "owner": {"reputation": 4533, "user_id": 3023947, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/LnmhP.jpg?s=128&g=1", "display_name": "charliebrownie", "link": "https://stackoverflow.com/users/3023947/charliebrownie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1565178842, "creation_date": 1565178528, "last_edit_date": 1565178842, "question_id": 57393779, "link": "https://stackoverflow.com/questions/57393779/angular-di-injecting-a-service-with-multiple-parameter-values", "title": "Angular DI: Injecting a Service with multiple parameter values", "body": "<h3>Introduction</h3>\n\n<p>I am coding some services for an Angular project, were I am trying to follow good practices (such as <em>SOLID principles</em>) to avoid coupling and depend on abstractions.</p>\n\n<p>For one of these services, I have defined the following interface:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface BrowserMessageChannel&lt;T&gt; {\n  postMessage(message: T): void;\n  onMessage$(): Observable&lt;T&gt;;\n  close(): void;\n}\n</code></pre>\n\n<p>This <em>Browser Message Channel</em> is nothing more that the abstraction, which hides the implementation details, of having a shared message space that apps opened in different tabs can use to communicate between each other. This API will also use observables so clients can subscribe to new messages.</p>\n\n<h3>Implementation</h3>\n\n<p>This service could be implemented in many ways but I decided to make use of the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API\" rel=\"nofollow noreferrer\">BroadcastChannel API</a> underneath:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>class BcBrowserMessageChannel&lt;T&gt; implements BrowserMessageChannel&lt;T&gt; {\n  private onMessage: Subject&lt;T&gt;;\n\n  constructor(private broadcastChannel: BroadcastChannel) {\n    this.setUpOnMessage();\n  }\n\n  postMessage(message: T): void {\n    this.broadcastChannel.postMessage(message);\n  }\n\n  onMessage$(): Observable&lt;T&gt; {\n    return this.onMessage;\n  }\n\n  close(): void {\n    this.broadcastChannel.close();\n    this.onMessage.complete();\n  }\n\n  private setUpOnMessage(): void {\n    this.onMessage = new Subject();\n\n    this.broadcastChannel.onmessage = ({ data }: { data: T }) =&gt; {\n      this.onMessage.next(data);\n    };\n  }\n}\n</code></pre>\n\n<p>And provide it so whenever a <code>BrowserMessageChannel</code> is needed we will have a particular implementation under the hoods:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@NgModule({\n  providers: [{\n    provide: BrowserMessageChannel,\n    useClass: BcBrowserMessageChannel\n  }]\n})\nclass CommunicationModule {\n}\n</code></pre>\n\n<h2>Problem within the Angular Framework</h2>\n\n<p>A <code>BroadcastChannel</code> object must be passed into the <code>BcBrowserMessageChannel</code>'s constructor and a channel name (string) must be passed also into the <code>BroadcastChannel</code>'s constructor too. In plain TypeScript code, this would look like the following:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const bc: BroadCastChannel = new BroadcastChannel(channelName);\nconst channel: BrowserMessageChannel = new BcBrowserMessageChannel(bc);\n</code></pre>\n\n<p>How can I fit this situation in an Angular solution?</p>\n\n<p>How to achieve this with the framework's Dependency Injection mechanism, where the following would not be enough?:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>@Component({\n  ...\n})\nclass MyComponent {\n  constructor(private browserMessageChannel: BrowserMessageChannel) {\n    // In my scenario, I would need to specify a channel name to \n    // BrowserMessageChannel, so in this component I can post messages and\n    // subscribe to new ones in that particular one\n  }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs"], "comments": [{"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1565178071, "post_id": 57393553, "comment_id": 101268940, "body": "Have you considerer what may happen if your responseBlob is undefined? in  <code>const responseBlob = ...... : undefined</code>"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1565178160, "post_id": 57393553, "comment_id": 101268995, "body": "@MikNiller as a matter of fact i was also seeing this error during post requests <code>blobToText(...).mergeMap is not a function</code>"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1565178222, "post_id": 57393553, "comment_id": 101269034, "body": "but my post requests were working so i paid no attention to it too"}, {"owner": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1565178331, "post_id": 57393553, "comment_id": 101269102, "body": "By inspecting your code it looks like you may be in trouble if <code>response</code> in  <code>processGetClientData</code> is not of type <code>HttpResponse </code>"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 1126, "user_id": 7678543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780b5ce4ef85fc4c423c16f5b67d84ca?s=128&d=identicon&r=PG", "display_name": "MikNiller", "link": "https://stackoverflow.com/users/7678543/mikniller"}, "edited": false, "score": 0, "creation_date": 1565178578, "post_id": 57393553, "comment_id": 101269214, "body": "@MikNiller i never studied too much about responses but right now i need to get this error to go away to move further. Can you please tell me what do i need to do?"}, {"owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1565180139, "post_id": 57393553, "comment_id": 101270057, "body": "What is <code>throwException</code>? Is it rxjs operator? are you using rxjs ver. 5? Make sure <code>throwException</code> returns an observable."}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 1, "creation_date": 1565180407, "post_id": 57393553, "comment_id": 101270215, "body": "Which version of RxJS are you using? Does blobToText return an Observable?"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1565180427, "post_id": 57393553, "comment_id": 101270226, "body": "@user2216584 i have changed my services code with rxjs ver 6+. Also i have edited my code and now the errors are gone but still i am not getting any data from API. Hitting the API with postman is returning me the result but not through this service"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565180615, "post_id": 57393553, "comment_id": 101270318, "body": "@WillAlexander see my last comment. I have changed my code according to latest version of rxjs"}, {"owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 2, "creation_date": 1565180690, "post_id": 57393553, "comment_id": 101270371, "body": "I hope you are subscribing the observable in the upper layers of your app code [i.e. Component/service]?"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "edited": false, "score": 0, "creation_date": 1565180769, "post_id": 57393553, "comment_id": 101270412, "body": "@user2216584 yes i am subscribing like this    <code>this._clientService.GetClientData().     .subscribe((result: any) =&gt; {       this.clients = result;       console.log(result);   });</code>"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 1, "creation_date": 1565180845, "post_id": 57393553, "comment_id": 101270456, "body": "That isn&#39;t normal RxJS 6 code. I don&#39;t know where all the <code>_observable</code> stuff is coming from. Does <code>blobToText</code> return an Observable? Is an HTTP call actually made? Does the API allow OPTIONS calls?"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565181066, "post_id": 57393553, "comment_id": 101270602, "body": "@WillAlexander no they returned me nothing. Why is it that?"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 1, "creation_date": 1565181125, "post_id": 57393553, "comment_id": 101270635, "body": "I&#39;m sorry @ahsannissar I need a bit more detail. Can you answer all of my questions please?"}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565181242, "post_id": 57393553, "comment_id": 101270699, "body": "@WillAlexander i have edited the code and added my cloud function here too. See if i have allowed OPTIONS call"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 1, "creation_date": 1565181550, "post_id": 57393553, "comment_id": 101270853, "body": "Add &#39;OPTIONS&#39; here:   <code>res.set(&#39;Access-Control-Allow-Methods&#39;, &#39;GET&#39;, &#39;POST&#39;, &#39;OPTIONS&#39;);</code> \u2014 your browser sends a pre-flight OPTIONS call. This may not solve everything."}, {"owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1565182031, "post_id": 57393553, "comment_id": 101271140, "body": "@WillAlexander yes it did not solve everything even after i added the OPTIONS in the right place as asked by you. I am still not getting return anything in Obserable"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "reply_to_user": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "edited": false, "score": 0, "creation_date": 1565182176, "post_id": 57393553, "comment_id": 101271253, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/197609/discussion-between-will-alexander-and-ahsan-nissar\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1422, "user_id": 453959, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6a822c3ad319ca7f0d44309584610d42?s=128&d=identicon&r=PG", "display_name": "spierala", "link": "https://stackoverflow.com/users/453959/spierala"}, "edited": false, "score": 2, "creation_date": 1578479018, "post_id": 57395267, "comment_id": 105448722, "body": "e.g. <code>catchError(err =&gt; EMPTY)</code> to let the stream continue also in case of error"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "reply_to_user": {"reputation": 1422, "user_id": 453959, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/6a822c3ad319ca7f0d44309584610d42?s=128&d=identicon&r=PG", "display_name": "spierala", "link": "https://stackoverflow.com/users/453959/spierala"}, "edited": false, "score": 1, "creation_date": 1614954069, "post_id": 57395267, "comment_id": 117550310, "body": "I&#39;d say it really depends on the implementation, because sometimes you want to return a specific type/object/value etc. when your request errors out. Doing just that at the moment on a client project, passing on a special string in case of error."}], "tags": [], "owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "is_accepted": true, "score": 6, "last_activity_date": 1565183394, "creation_date": 1565183394, "answer_id": 57395267, "question_id": 57393553, "link": "https://stackoverflow.com/questions/57393553/error-typeerror-you-provided-undefined-where-a-stream-was-expected-you-can-p/57395267#57395267", "title": "ERROR TypeError: You provided &#39;undefined&#39; where a stream was expected. You can provide an Observable, Promise, Array, or Iterable in Angular Services", "body": "<p>Something along these lines:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>return this.http.get(url_, options_).pipe(\n  map(data =&gt; {\n    // Transform data here\n  }),\n  catchError(err =&gt; {\n    // Handle errors here\n  })\n);\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 11746564, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-saAEkVD-KOc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIayFY7-WHRDjwMc5TbKXc62l4yA/photo.jpg?sz=128", "display_name": "ahsan nissar", "link": "https://stackoverflow.com/users/11746564/ahsan-nissar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6356, "favorite_count": 0, "accepted_answer_id": 57395267, "answer_count": 1, "score": 5, "last_activity_date": 1565183394, "creation_date": 1565177831, "last_edit_date": 1565181206, "question_id": 57393553, "link": "https://stackoverflow.com/questions/57393553/error-typeerror-you-provided-undefined-where-a-stream-was-expected-you-can-p", "title": "ERROR TypeError: You provided &#39;undefined&#39; where a stream was expected. You can provide an Observable, Promise, Array, or Iterable in Angular Services", "body": "<p>I have written multiple services to hit different APIs. The services written for post are working somehow but giving this error</p>\n\n<blockquote>\n  <p>ERROR TypeError: You provided 'undefined' where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.\n      at subscribeTo (subscribeTo.js:27)</p>\n</blockquote>\n\n<p>As for the services written for the GET method the same error is shown but i get no data in return. \nHere is my service</p>\n\n<pre><code>GetClientData(): Observable&lt;ClientDto&gt; {\n    let url_ = this.baseUrl + \"https://xxxxxxxxxxxxxxxx/getClients\";\n    url_ = url_.replace(/[?&amp;]$/, \"\");\n\n    let options_ : any = {\n        observe: \"response\",\n        responseType: \"blob\",\n        headers: new HttpHeaders({\n            \"Accept\": \"application/json\"\n        })\n    };\n\n    return this.http.request(\"get\", url_, options_).pipe(_observableMergeMap((response_ : any) =&gt; {\n        return this.processGetAllPermissions(response_);\n    })).pipe(_observableCatch((response_: any) =&gt; {\n        if (response_ instanceof HttpResponseBase) {\n            try {\n                return this.processGetAllPermissions(&lt;any&gt;response_);\n            } catch (e) {\n                return &lt;Observable&lt;ClientDto&gt;&gt;&lt;any&gt;_observableThrow(e);\n            }\n        } else\n            return &lt;Observable&lt;ClientDto&gt;&gt;&lt;any&gt;_observableThrow(response_);\n    }));\n}\n\nprotected processGetAllPermissions(response: HttpResponseBase): Observable&lt;ClientDto&gt; {\n    const status = response.status;\n    const responseBlob = \n        response instanceof HttpResponse ? response.body : \n        (&lt;any&gt;response).error instanceof Blob ? (&lt;any&gt;response).error : undefined;\n\n    let _headers: any = {}; if (response.headers) { for (let key of response.headers.keys()) { _headers[key] = response.headers.get(key); }};\n    if (status === 200) {\n        return blobToText(responseBlob).pipe(_observableMergeMap(_responseText =&gt; {\n        let result200: any = null;\n        let resultData200 = _responseText === \"\" ? null : JSON.parse(_responseText, this.jsonParseReviver);\n        result200 = resultData200 ? ClientDto.fromJS(resultData200) : new ClientDto();\n        return _observableOf(result200);\n        }));\n    } else if (status !== 200 &amp;&amp; status !== 204) {\n        return blobToText(responseBlob).pipe(_observableMergeMap(_responseText =&gt; {\n        return throwException(\"An unexpected server error occurred.\", status, _responseText, _headers);\n        }));\n    }\n    return _observableOf&lt;ClientDto&gt;(&lt;any&gt;null);\n}\n</code></pre>\n\n<p>Cloud Function</p>\n\n<pre><code>exports.getClients = functions.https.onRequest((req, res) =&gt; {\n\n    res.set('Access-Control-Allow-Origin', 'http://localhost:4200');\n    res.set('Access-Control-Allow-Methods', 'GET', 'POST');\n    res.set('Access-Control-Allow-Headers', 'Content-Type');\n\n    if (req.method === 'OPTIONS') {\n        res.end();\n    }\n\n    else\n    {\n\n        let allClients = [];\n        usersClients.get()\n            .then(snapshot =&gt; {\n                snapshot.forEach(doc =&gt; {\n                    allClients.push(doc.data());\n                });\n                res.send(200, {\n                    \"data\": allClients\n                })\n            })\n            .catch(err =&gt; {\n                console.log(\"Error getting data\", err);\n            });\n    }\n});\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "sharepoint", "document-ready", "spfx"], "answers": [{"comments": [{"owner": {"reputation": 1644, "user_id": 8990695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sG6bg.jpg?s=128&g=1", "display_name": "Mr. Roshan", "link": "https://stackoverflow.com/users/8990695/mr-roshan"}, "edited": false, "score": 0, "creation_date": 1565781701, "post_id": 57474292, "comment_id": 101457083, "body": "Thanks. I already did this but it&#39;s not working as SPFx webpart takes more time to load."}], "tags": [], "owner": {"reputation": 1657, "user_id": 2764486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TEI8y.png?s=128&g=1", "display_name": "Spark Fountain", "link": "https://stackoverflow.com/users/2764486/spark-fountain"}, "is_accepted": false, "score": 1, "last_activity_date": 1565686479, "last_edit_date": 1592644375, "creation_date": 1565686479, "answer_id": 57474292, "question_id": 57393492, "link": "https://stackoverflow.com/questions/57393492/javascript-getting-called-before-the-spfx-webpart-loaded-on-the-sharepoint-page/57474292#57474292", "title": "Javascript getting called before the SPFX Webpart loaded on the sharepoint page", "body": "<p>You can control the loading behaviour of external scripts with the attributes <code>async</code> and <code>defer</code>.</p>\n<p>From the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script\" rel=\"nofollow noreferrer\">MDN web docs</a>:</p>\n<blockquote>\n<p><strong>defer</strong>: This Boolean attribute is set to indicate to a browser that the script is meant to be executed after the document has been parsed, but before firing DOMContentLoaded.</p>\n<p><strong>async</strong>: This is a Boolean attribute indicating that the browser should, if possible, load the script asynchronously.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 1644, "user_id": 8990695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sG6bg.jpg?s=128&g=1", "display_name": "Mr. Roshan", "link": "https://stackoverflow.com/users/8990695/mr-roshan"}, "edited": false, "score": 0, "creation_date": 1566216107, "post_id": 57547649, "comment_id": 101574297, "body": "Thanks.! There is one problem if we use setTimeout function then  it will work fine but in the low bandwidth it is not good approach and also decreases the performance"}], "tags": [], "owner": {"reputation": 1503, "user_id": 1627640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b50ab4ab23b54bb6b3c0d54d3352718?s=128&d=identicon&r=PG", "display_name": "Shahar", "link": "https://stackoverflow.com/users/1627640/shahar"}, "is_accepted": false, "score": 2, "last_activity_date": 1566155913, "creation_date": 1566155913, "answer_id": 57547649, "question_id": 57393492, "link": "https://stackoverflow.com/questions/57393492/javascript-getting-called-before-the-spfx-webpart-loaded-on-the-sharepoint-page/57547649#57547649", "title": "Javascript getting called before the SPFX Webpart loaded on the sharepoint page", "body": "<p>Basically, in case, it is just a simple wait, one thing you can do is to wait for <code>DOMContentLoaded</code>. This is a cross-browser event listener that works in firefox and even goes back all the way to ie9. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Option 1\r\n    window.addEventListener(\"DOMContentLoaded\", function () {\r\n        console.log('ready')\r\n    }, false);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In case your SPFx code creates the element only later on, you can wait for one of the elements it creates, check for if it exists and only then invokes your function like so:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Option 2\r\n// Wait for the DOM element to be in the DOM\r\nconst inDom = (selector, timeout = 1000, callback) =&gt; {\r\n    const interval = setInterval(() =&gt; {\r\n        const elem = document.querySelector(selector);\r\n        if (elem) {\r\n            clearInterval(interval);\r\n            // Do stuff\r\n            callback()\r\n        } else {\r\n            console.log('Not in dom')\r\n        }\r\n    }, timeout);\r\n};\r\n\r\n// Wait 3 seconds and add the element to the DOM\r\nsetTimeout(() =&gt; {\r\n    document.body.innerHTML = document.body.innerHTML + \"&lt;div id='test-div'&gt;TEST&lt;/div&gt;\";\r\n}, 3000);\r\n\r\nconst myAwesomeFunction = () =&gt; console.log('Element in dom');\r\n\r\ninDom('#test-div', 1000, myAwesomeFunction)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>P.S. You probably would like to add a fallback in case the element is nowhere to be found after some period, otherwise the interval will run forever.</p>\n"}], "owner": {"reputation": 1644, "user_id": 8990695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sG6bg.jpg?s=128&g=1", "display_name": "Mr. Roshan", "link": "https://stackoverflow.com/users/8990695/mr-roshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1566155913, "creation_date": 1565177645, "question_id": 57393492, "link": "https://stackoverflow.com/questions/57393492/javascript-getting-called-before-the-spfx-webpart-loaded-on-the-sharepoint-page", "title": "Javascript getting called before the SPFX Webpart loaded on the sharepoint page", "body": "<p>I have created Sharepoint Page with custom masterpage where I have deployed my SPFx Webpart which needs some javascript files.</p>\n\n<p>Sometimes the Webpart works fine but sometimes not due to my javascript called before SPFx gets loaded on DOM.(I also tried to put javascript in custom masterpage still facing same issue)</p>\n\n<p>I googled out for the same and  <a href=\"https://stackoverflow.com/questions/2926227/how-to-do-jquery-code-after-page-loading\">Reference</a></p>\n\n<p>I did the modification in the javascript function with same by calling function on load event instead of ready function. After modification it works fine in chrome browser but it's not working properly in IE and Firefox.</p>\n\n<p>Is there any other way to get the proper outcome.</p>\n"}, {"tags": ["javascript", "c#", "angular", "typescript", "dotnetbrowser"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1565185170, "post_id": 57393330, "comment_id": 101273283, "body": "Show what the JavaScript would look like. I think you are misunderstanding scope."}, {"owner": {"reputation": 11, "user_id": 4456508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dff9f0f42e782e98b99311e984ddbfd?s=128&d=identicon&r=PG&f=1", "display_name": "Rohini Singh", "link": "https://stackoverflow.com/users/4456508/rohini-singh"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1565237081, "post_id": 57393330, "comment_id": 101291247, "body": "Hi Aluan, Do I have to call typescript function from the Javascript function? And Javascript will be imported into Angular2 component. I am sorry for asking such basic questions but I am completely new to this."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1565277191, "post_id": 57393330, "comment_id": 101311437, "body": "It&#39;s all JavaScript. TypeScript is JavaScript. There is no interop between them whatsoever because they are both JavaScript."}], "owner": {"reputation": 11, "user_id": 4456508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dff9f0f42e782e98b99311e984ddbfd?s=128&d=identicon&r=PG&f=1", "display_name": "Rohini Singh", "link": "https://stackoverflow.com/users/4456508/rohini-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565244622, "creation_date": 1565177093, "last_edit_date": 1565244622, "question_id": 57393330, "link": "https://stackoverflow.com/questions/57393330/how-to-call-typescript-function-instead-of-javascript-function-from-dotnetbrowse", "title": "How to call typescript function instead of javascript function from dotnetbrowser c# code?", "body": "<p>I am trying to embed my angular app inside DotNetBrowser control inside a WPF application. I do not want to write javascript in my angular component and invoke the same from dot net browser c# code. Can I invoke the typescript component function instead of javascript function?</p>\n\n<p>C# code for invoking typescipt function:-</p>\n\n<pre><code>JSValue returnValue =browserViewControl.Browser.ExecuteJavaScriptAndReturnValue(\"onGetAllCallBack\");\n            // Make sure that return value is a function.\n            if (returnValue.IsFunction())\n            {\n                String val = \"Hello World\";\n                returnValue.AsFunction().Invoke(null, val);\n            }\n</code></pre>\n\n<p>Angular component:-</p>\n\n<pre><code>import { Component } from '@angular/core';\n\n    let onGetAllCallBack: (para: string) =&gt; void;\n\n    Component({\n      selector: 'app-root',\n      templateUrl: './app.component.html',\n      styleUrls: ['./app.component.css']\n    })\n    export class AppComponent {\n    contextList = 'No Context Available!';\n    onGetAllCallBack = function (pass: string): void {\n        this.contextList = pass;\n      };\n\n    }        \n</code></pre>\n\n<p>The above code </p>\n\n<blockquote>\n  <p><code>browserViewControl.Browser.ExecuteJavaScriptAndReturnValue(\"onGetAllCallBack\");</code>\n  does not invoke the typescript function.Is it the right way to invoke\n  it?Can anyone help?</p>\n</blockquote>\n"}, {"tags": ["angular", "typescript", "webpack", "angular-cli", "object-hash"], "answers": [{"tags": [], "owner": {"reputation": 4498, "user_id": 11579919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uHipY.jpg?s=128&g=1", "display_name": "nickbullock", "link": "https://stackoverflow.com/users/11579919/nickbullock"}, "is_accepted": false, "score": 0, "last_activity_date": 1575141734, "creation_date": 1575141734, "answer_id": 59119463, "question_id": 57393092, "link": "https://stackoverflow.com/questions/57393092/using-object-hash-in-an-angular-8-project-causes-cannot-read-property-crypto/59119463#59119463", "title": "Using object-hash in an Angular 8 project causes &quot;Cannot read property &#39;crypto&#39; of undefined&quot; error", "body": "<p>I think the easiest way is to use custom webpack configuration as in the <a href=\"https://github.com/angular/angular-cli/issues/1548#issuecomment-450891241\" rel=\"nofollow noreferrer\">issue</a> you mentioned, because it is a build phase problem, not runtime. As i can see angular core members will not fix this problem soon.  </p>\n\n<p>You will get all the features from <code>angular/cli</code> build (because <code>@angular-builders/custom-webpack</code> is based on default angular builder), but will be able to write your own webpack rules. In my opinion it is very safe additional config:</p>\n\n<pre><code>module.exports = {\n  node: {\n    path: true,\n    crypto: true,\n    fs: 'empty'\n  }\n}\n</code></pre>\n\n<p>and i think you will never break something with <code>@angular</code> upgrades.\nFor example on my work project we use <code>@angular-builders/custom-webpack</code> in more aggressive manner: we replace some plugins and loaders and use ours. And sometimes it just breaks.</p>\n"}, {"tags": [], "owner": {"reputation": 12486, "user_id": 5640649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab190da855988ffae29d287c7d55ebbe?s=128&d=identicon&r=PG", "display_name": "lealceldeiro", "link": "https://stackoverflow.com/users/5640649/lealceldeiro"}, "is_accepted": true, "score": 3, "last_activity_date": 1575314186, "last_edit_date": 1575314186, "creation_date": 1575303944, "answer_id": 59142951, "question_id": 57393092, "link": "https://stackoverflow.com/questions/57393092/using-object-hash-in-an-angular-8-project-causes-cannot-read-property-crypto/59142951#59142951", "title": "Using object-hash in an Angular 8 project causes &quot;Cannot read property &#39;crypto&#39; of undefined&quot; error", "body": "<p>After the commit <a href=\"https://github.com/puleos/object-hash/commit/1e0835cad7d273b521b8a3beee6c7cb8bd778bee\" rel=\"nofollow noreferrer\">1e0835c</a>, upgrading <a href=\"/questions/tagged/object-hash\" class=\"post-tag\" title=\"show questions tagged &#39;object-hash&#39;\" rel=\"tag\">object-hash</a> to <code>v2.0.1</code> should solve the problem (see the <a href=\"https://github.com/puleos/object-hash/issues/71#issuecomment-560028463\" rel=\"nofollow noreferrer\">author's comment</a> in the reported issue)</p>\n"}], "owner": {"reputation": 2652, "user_id": 3088826, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/E3JIU.png?s=128&g=1", "display_name": "caitlin", "link": "https://stackoverflow.com/users/3088826/caitlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 1, "accepted_answer_id": 59142951, "answer_count": 2, "score": 7, "last_activity_date": 1575314186, "creation_date": 1565176320, "last_edit_date": 1575139423, "question_id": 57393092, "link": "https://stackoverflow.com/questions/57393092/using-object-hash-in-an-angular-8-project-causes-cannot-read-property-crypto", "title": "Using object-hash in an Angular 8 project causes &quot;Cannot read property &#39;crypto&#39; of undefined&quot; error", "body": "<p>I have an Angular-CLI project which makes use of the <a href=\"https://github.com/puleos/object-hash\" rel=\"nofollow noreferrer\">object-hash</a> library for creating hashes from objects. Normally I would just put</p>\n\n<p><code>import * as objectHash from 'object-hash'</code></p>\n\n<p>at the top of one of my component files and then do <code>const hash = objectHash(obj)</code> anywhere I needed a hash.</p>\n\n<p>I just upgraded my project to <em>Angular 8</em> and suddenly, the Angular project <em>serves</em> great, but when I run a production build, I get an error: <code>Cannot read property 'crypto' of undefined</code>.</p>\n\n<p>This is because Angular 8 generates <em>differential JavaScript</em>, generating some bundles for newer browsers as <code>&lt;script type=\"module\"&gt;</code> and older browsers as <code>&lt;script nomodule&gt;</code>. When a script has <code>type=\"module\"</code>, apparently <code>this</code> is treated differently- so the <em>object-hash</em> library's reference to <code>this</code> is broken: <a href=\"https://github.com/puleos/object-hash/issues/71\" rel=\"nofollow noreferrer\">https://github.com/puleos/object-hash/issues/71</a></p>\n\n<p><strong>Does anyone have any insight into how I might resolve this?</strong></p>\n\n<p>Potential solutions I'm seeing are:</p>\n\n<ul>\n<li><p>Importing the <em>object-hash</em> library differently somehow</p></li>\n<li><p>Using a completely different browser-compatible object-hashing library (I haven't found one yet)</p></li>\n<li>Getting Angular-CLI v8 to stop generating differential JS and just spit out old-fashioned bundles (I haven't found a solution to this\none yet)</li>\n<li>Downgrading to Angular 7</li>\n</ul>\n"}, {"tags": ["typescript", "any", "explicit"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 2, "creation_date": 1565175690, "post_id": 57392881, "comment_id": 101267545, "body": "There is also a rule <code>no-any</code> for tslint i believe. Other than that no, there is no way to get a warning. Use <code>unknown</code> instead and void <code>any</code> at all cost"}, {"owner": {"reputation": 33, "user_id": 9875784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ilYTYr5Z4l4/AAAAAAAAAAI/AAAAAAAAABw/fM56VMoV57E/photo.jpg?sz=128", "display_name": "Gytis Vinclovas", "link": "https://stackoverflow.com/users/9875784/gytis-vinclovas"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565178463, "post_id": 57392881, "comment_id": 101269164, "body": "Thank you very much. Unknown is exactly what was needed. I will add tslint no-any rule and ignore all current any, so we could rewrite them to unknown or type def them as time goes."}], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1565178753, "creation_date": 1565178753, "answer_id": 57393868, "question_id": 57392881, "link": "https://stackoverflow.com/questions/57392881/explicitly-assign-any-type-in-typescript/57393868#57393868", "title": "Explicitly assign any type in typescript", "body": "<p>Ideally you should avoid <code>any</code>. <code>any</code> is by definition assignable to anything and from anything. It is mean to be unsafe and it also has the unfortunate habit of spreading.</p>\n\n<p>You can use the safer <code>unknown</code> type. This is similar to <code>any</code> in that you can assign anything to it and is meant to represent data for which you don't have a well defined type. Unlike <code>any</code> however you can't do anything with it without a type assertion or type guard. <a href=\"https://stackoverflow.com/questions/51439843/unknown-vs-any/51439876#51439876\">See <code>any</code> vs <code>unknown</code></a> </p>\n\n<p>Other that that enable the tslint <code>no-any</code> to stop everyone from using <code>any</code> and take care with predefined functions such as <code>JSON.parse</code> which may still sneak in an <code>any</code> now and then.</p>\n"}], "owner": {"reputation": 33, "user_id": 9875784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ilYTYr5Z4l4/AAAAAAAAAAI/AAAAAAAAABw/fM56VMoV57E/photo.jpg?sz=128", "display_name": "Gytis Vinclovas", "link": "https://stackoverflow.com/users/9875784/gytis-vinclovas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57393868, "answer_count": 1, "score": 3, "last_activity_date": 1565178753, "creation_date": 1565175614, "question_id": 57392881, "link": "https://stackoverflow.com/questions/57392881/explicitly-assign-any-type-in-typescript", "title": "Explicitly assign any type in typescript", "body": "<p>Currently we are migrating our codebase to typescript and we have many places with any type. So I am trying to enforce explicit setting variables as any.</p>\n\n<p>Here is example snippet.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const a: string = 'h';\nconst b: any = 4;\n\nconst message = a || b; \n// Here I would like to get warning that I am assigning any to the message,\n// so I would have to write const message: any = a || b;\n\nfunction say(x: string) {\n    console.log(x);\n} \n\nsay(message);\n</code></pre>\n\n<p>I am aware about the tslint rule <code>typedef</code> (It requires to typedef all variables and not only in cases of any), also <code>no-unsafe-any</code> (doesn't work in this case).</p>\n\n<p>Is there a way to require explicitly define any type if you are trying to assign any to it?</p>\n"}, {"tags": ["typescript", "angular7"], "comments": [{"owner": {"reputation": 1874, "user_id": 1700846, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rlrkw.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1700846/tom"}, "edited": false, "score": 0, "creation_date": 1565175904, "post_id": 57392819, "comment_id": 101267685, "body": "You need to be clearer about what your input is, and the code you&#39;ve tried already."}, {"owner": {"reputation": 15, "user_id": 5005855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VB450bI7l54/AAAAAAAAAAI/AAAAAAAAAIA/_PYcuREf41k/photo.jpg?sz=128", "display_name": "madhu kanduri", "link": "https://stackoverflow.com/users/5005855/madhu-kanduri"}, "reply_to_user": {"reputation": 1874, "user_id": 1700846, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Rlrkw.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/1700846/tom"}, "edited": false, "score": 0, "creation_date": 1565176555, "post_id": 57392819, "comment_id": 101268041, "body": "Data i get from service :{location: [&quot;Manheim&quot;, &quot;Adessa&quot;] model:  [&quot;Lincoln&quot;, &quot;Ford&quot;] series:  [&quot;s-160&quot;, &quot;B-140&quot;] year:  [&quot;2019&quot;, &quot;2018&quot;, &quot;2017&quot;]}"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1565179248, "post_id": 57392819, "comment_id": 101269577, "body": "You can try to iterate over the given properties and <code>map</code> every property to an element of the expected data structure - <code>Object.keys(src).map((e) =&gt; ({ type: e }))</code>"}, {"owner": {"reputation": 15, "user_id": 5005855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VB450bI7l54/AAAAAAAAAAI/AAAAAAAAAIA/_PYcuREf41k/photo.jpg?sz=128", "display_name": "madhu kanduri", "link": "https://stackoverflow.com/users/5005855/madhu-kanduri"}, "edited": false, "score": 0, "creation_date": 1565179448, "post_id": 57392819, "comment_id": 101269693, "body": "can you give the code to execute . Iam new in this."}, {"owner": {"reputation": 15, "user_id": 5005855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VB450bI7l54/AAAAAAAAAAI/AAAAAAAAAIA/_PYcuREf41k/photo.jpg?sz=128", "display_name": "madhu kanduri", "link": "https://stackoverflow.com/users/5005855/madhu-kanduri"}, "edited": false, "score": 0, "creation_date": 1565180332, "post_id": 57392819, "comment_id": 101270167, "body": "how to attach options array in each mapped object ?"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1565182269, "post_id": 57392819, "comment_id": 101271307, "body": "@madhukanduri Good question. In JavaScript you could write <code>options: src[e].map((o) =&gt; ({ [e]: o }))</code> but not in TypeScript."}, {"owner": {"reputation": 15, "user_id": 5005855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VB450bI7l54/AAAAAAAAAAI/AAAAAAAAAIA/_PYcuREf41k/photo.jpg?sz=128", "display_name": "madhu kanduri", "link": "https://stackoverflow.com/users/5005855/madhu-kanduri"}, "edited": false, "score": 0, "creation_date": 1565183164, "post_id": 57392819, "comment_id": 101271947, "body": "Thanq so much :)"}], "answers": [{"tags": [], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "is_accepted": true, "score": 0, "last_activity_date": 1565190536, "creation_date": 1565190536, "answer_id": 57397461, "question_id": 57392819, "link": "https://stackoverflow.com/questions/57392819/how-to-structure-string-data-with-key-value-pair/57397461#57397461", "title": "How to structure string data with key value pair", "body": "<p>You could <code>map</code> every property of the source structure to your target structure. To dynamicly access the properties for the the <code>options</code> the properties should be literals instead of <code>string</code>. Therefore you can use <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-4.html#const-assertions\" rel=\"nofollow noreferrer\"><code>as const</code></a>.</p>\n\n<pre><code>const src = {\n    location: [\"Manheim\", \"Adessa\"],\n    model: [\"Lincoln\", \"Ford\"],\n    series: [\"s-160\", \"B-140\"],\n    year: [\"2019\", \"2018\", \"2017\"]\n}\n\nconst keys = ['location', 'model', 'series', 'year'] as const\nconst result = keys.map((e) =&gt; ({\n    label: e.replace(/^./, (c) =&gt; c.toUpperCase()),\n    options: src[e].map((o) =&gt; ({ [e]: o })),\n    type: e\n}))\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5005855, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VB450bI7l54/AAAAAAAAAAI/AAAAAAAAAIA/_PYcuREf41k/photo.jpg?sz=128", "display_name": "madhu kanduri", "link": "https://stackoverflow.com/users/5005855/madhu-kanduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 2, "accepted_answer_id": 57397461, "answer_count": 1, "score": 1, "last_activity_date": 1565190536, "creation_date": 1565175429, "last_edit_date": 1565179114, "question_id": 57392819, "link": "https://stackoverflow.com/questions/57392819/how-to-structure-string-data-with-key-value-pair", "title": "How to structure string data with key value pair", "body": "<p>structure i need :</p>\n\n<pre><code>[{ label:'Year',\n   type:'year',\n   options:[{ year:'2019' },{ year:'2018' },{ year:'2017' },{ year:'2016' }] },\n { label:'Make',\n   type:'make',\n   options:[{ make:'Ford' },{ make:'BMW' }] },\n { label:'Model',\n   type:'model',\n   options:[{ model:'Freestyle' },{ model:'Mustang' }] },\n { label:'Location',\n   type:'location',\n   options:[{ location:'Manheim' },{ location:'Adessa' },{ location:'Manheim, Georgia' }] }]\n</code></pre>\n\n<p>service data i get is :</p>\n\n<pre><code>{ location: [\"Manheim\", \"Adessa\"],\n  model: [\"Lincoln\", \"Ford\"], \n  series: [\"s-160\", \"B-140\"], \n  year: [\"2019\", \"2018\", \"2017\"] }\n</code></pre>\n\n<p>please help me out for structure i need</p>\n"}, {"tags": ["typescript", "angular8"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 1, "creation_date": 1565175457, "post_id": 57392735, "comment_id": 101267417, "body": "<code>LastName</code> and <code>FirstName</code> are defined on <code>IProviderDatas</code> why do you expect them to exist on <code>this</code> (which is the <code>HomeComponent </code>)"}, {"owner": {"reputation": 1, "user_id": 11895221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e36836bc99597af2e05ff2e6567d616?s=128&d=identicon&r=PG&f=1", "display_name": "Kirubakaran", "link": "https://stackoverflow.com/users/11895221/kirubakaran"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565176366, "post_id": 57392735, "comment_id": 101267943, "body": "If i remove this, then its error as &quot;cannot find LastName&quot;. If i &quot;provider.LastName&quot; then its error as Cannot find name &#39;provider&#39;. Did you mean the instance member &#39;this.provider&#39;?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565177755, "post_id": 57392735, "comment_id": 101268755, "body": "But <code>provider</code> is an array of <code>IProviderDatas</code>. You could do <code>this.provider.push(data[0])</code> or <code>this.provider[0].LastName = data[0].LastName</code> (providing the array is initialized suitably)  but more likely you want <code>this.provider = data</code> to set the data with the array that comes from the request .. but I am just guessing your intentions here.."}, {"owner": {"reputation": 1, "user_id": 11895221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e36836bc99597af2e05ff2e6567d616?s=128&d=identicon&r=PG&f=1", "display_name": "Kirubakaran", "link": "https://stackoverflow.com/users/11895221/kirubakaran"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565187261, "post_id": 57392735, "comment_id": 101274603, "body": "&quot;you want this.provider = data to set the data with the array that comes from the request&quot;. Yes. I want this only. within provider interface i want to set the data. As the data can be of &#39;n&#39; number of records (which is json format) i need to put this n number of records inside IProviderdatas. Looking forward your help"}], "answers": [{"tags": [], "owner": {"reputation": 6768, "user_id": 1331040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRC2U.png?s=128&g=1", "display_name": "Harun Yilmaz", "link": "https://stackoverflow.com/users/1331040/harun-yilmaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1565175480, "creation_date": 1565175480, "answer_id": 57392838, "question_id": 57392735, "link": "https://stackoverflow.com/questions/57392735/property-lastname-does-not-exist-on-type-homecomponent/57392838#57392838", "title": "Property &#39;LastName&#39; does not exist on type &#39;HomeComponent&#39;", "body": "<p>You need to define <code>FirstName</code> and <code>LastName</code> members of the class.</p>\n\n<pre><code>export class HomeComponent implements OnInit {\n\n  public FirstName;\n  public LastName\n\n  provider : IProviderDatas[];\n  constructor(private providerdataservice : ProviderDataService) {\n  }\n  ngOnInit() {\n    this.providerdataservice.return_providerData().subscribe(\n      data =&gt; {\n        this.LastName = data[0].LastName\n        this.FirstName = data[0].FirstName\n      }\n  )\n  }\n\n}\n</code></pre>\n\n<p>But be careful. If you want to use it in the template, it will throw <code>undefined</code> error because they are assigned values <strong>after</strong> <code>return_providerData</code> observable emits a value.</p>\n\n<p>In order to avoid it, you can use <code>async</code> pipe in your template instead of manually subscribing.</p>\n"}], "owner": {"reputation": 1, "user_id": 11895221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e36836bc99597af2e05ff2e6567d616?s=128&d=identicon&r=PG&f=1", "display_name": "Kirubakaran", "link": "https://stackoverflow.com/users/11895221/kirubakaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565175480, "creation_date": 1565175125, "question_id": 57392735, "link": "https://stackoverflow.com/questions/57392735/property-lastname-does-not-exist-on-type-homecomponent", "title": "Property &#39;LastName&#39; does not exist on type &#39;HomeComponent&#39;", "body": "<p>I am getting Error : <strong>Property 'LastName' does not exist on type 'HomeComponent'</strong> would like to know how to implement interface into ngoninit</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\nimport { ProviderDataService } from '../Shared/Services/retriveProviderData.service'\n\nexport interface IProviderDatas\n{\n  LastName: string;\n  FirstName: string;\n}\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\n\nexport class HomeComponent implements OnInit {\n  provider : IProviderDatas[];\n  constructor(private providerdataservice : ProviderDataService) {\n  }\n  ngOnInit() {\n    this.providerdataservice.return_providerData().subscribe(\n      data =&gt; {\n        this.LastName = data[0].LastName\n        this.FirstName = data[0].FirstName\n      }\n  )\n  }\n\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 45843, "user_id": 2349407, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/GLI4g.png?s=128&g=1", "display_name": "Vivek Doshi", "link": "https://stackoverflow.com/users/2349407/vivek-doshi"}, "edited": false, "score": 0, "creation_date": 1565173874, "post_id": 57392284, "comment_id": 101266563, "body": "You might have not define formSubmitted in your component , please share the code of component."}, {"owner": {"reputation": 5, "user_id": 11525551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e62b9366c8e9a2642a2af992326308?s=128&d=identicon&r=PG&f=1", "display_name": "Impavid", "link": "https://stackoverflow.com/users/11525551/impavid"}, "reply_to_user": {"reputation": 45843, "user_id": 2349407, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/GLI4g.png?s=128&g=1", "display_name": "Vivek Doshi", "link": "https://stackoverflow.com/users/2349407/vivek-doshi"}, "edited": false, "score": 0, "creation_date": 1565174046, "post_id": 57392284, "comment_id": 101266669, "body": "I did not, I never found an example where they did. Would &quot;declare var form-submitted: any&quot; work?"}, {"owner": {"reputation": 630270, "user_id": 571407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2f0d9dec16bae1e06552af55ddefc11f?s=128&d=identicon&r=PG", "display_name": "JB Nizet", "link": "https://stackoverflow.com/users/571407/jb-nizet"}, "edited": false, "score": 0, "creation_date": 1565174689, "post_id": 57392284, "comment_id": 101267006, "body": "@Impavid no. <code>[ngClass]=&quot;{&#39;form-submitted&#39;: formSubmitted}</code> means: &quot;go look at the value of the property formSubmitted of the component. If it&#39;s truthy, add the CSS class form-submitted&quot;. Why do you expect this to be correct if you never defined any <code>formSubmitted</code> property in the component. Where do you expect this property to come from if you don&#39;t define it yourself?"}, {"owner": {"reputation": 5, "user_id": 11525551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e62b9366c8e9a2642a2af992326308?s=128&d=identicon&r=PG&f=1", "display_name": "Impavid", "link": "https://stackoverflow.com/users/11525551/impavid"}, "edited": false, "score": 0, "creation_date": 1565175395, "post_id": 57392284, "comment_id": 101267383, "body": "JB, this is my first angular website, I expected it to work because it worked on debug build, it only crashed while building it for release. Anyway, I have solved it with help of ngfelixl."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11525551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e62b9366c8e9a2642a2af992326308?s=128&d=identicon&r=PG&f=1", "display_name": "Impavid", "link": "https://stackoverflow.com/users/11525551/impavid"}, "edited": false, "score": 1, "creation_date": 1565175327, "post_id": 57392593, "comment_id": 101267357, "body": "I suggest an edit. Considering I do not need to set the value of formSubmitted manually, I only added <code>formSubmitted: boolean;</code> and it works. I haven&#39;t even changed my html. Thank you for your answer."}], "tags": [], "owner": {"reputation": 4725, "user_id": 8808496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSryZ.jpg?s=128&g=1", "display_name": "Felix Lemke", "link": "https://stackoverflow.com/users/8808496/felix-lemke"}, "is_accepted": true, "score": 0, "last_activity_date": 1565174687, "creation_date": 1565174687, "answer_id": 57392593, "question_id": 57392284, "link": "https://stackoverflow.com/questions/57392284/property-formsubmitted-does-not-exist-on-type-contactcomponent/57392593#57392593", "title": "Property &#39;formSubmitted&#39; does not exist on type &#39;ContactComponent&#39;", "body": "<p>You have to define the property <code>formSubmitted</code> publically in your component class.</p>\n\n<pre><code>@Component({ ... })\nexport class ContactComponent {\n  formSubmitted = false;\n  // ...\n}\n</code></pre>\n\n<p>When the user submits the form the function <code>onFormSubmit()</code> is executed. Implement this function in your component class above and set the <code>formSubmitted</code> property to <code>true</code> here.</p>\n\n<pre><code>onFormSubmit() {\n  this.formSubmitted = true;\n  // ...\n}\n</code></pre>\n\n<p>and in your template you can apply the class by</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form [class.form-submitted]=\"formSubmitted\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11525551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80e62b9366c8e9a2642a2af992326308?s=128&d=identicon&r=PG&f=1", "display_name": "Impavid", "link": "https://stackoverflow.com/users/11525551/impavid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57392593, "answer_count": 1, "score": 0, "last_activity_date": 1565174687, "creation_date": 1565173628, "last_edit_date": 1565174244, "question_id": 57392284, "link": "https://stackoverflow.com/questions/57392284/property-formsubmitted-does-not-exist-on-type-contactcomponent", "title": "Property &#39;formSubmitted&#39; does not exist on type &#39;ContactComponent&#39;", "body": "<p>I used ngClass for a form so I can color it depending on if the field is valid or not, when i build it locally for testing (debug build) the webpage works correctly, form inputs get colored. \nIf I try to publish the website using FTP, it will fail on build (release build). I am building the website from Visual Studio, because I am working on ASP + Angular, but my question with asp tag did not get any luck.</p>\n\n<pre><code>&lt;form [formGroup]=\"emailForm\" (ngSubmit)=\"onFormSubmit()\" [ngClass]=\"{'form-submitted': formSubmitted}\"&gt;\n// here come form inputs which all highlight correctly on local test build (I can post them if neccessary)\n&lt;/form&gt;\n</code></pre>\n\n<p>.ts file imports</p>\n\n<pre><code>import { Component, OnInit, Inject } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { FormGroup, FormBuilder, FormControl, Validators } from '@angular/forms';\n</code></pre>\n\n<p>.ts code regarding the form</p>\n\n<pre><code> emailForm: FormGroup;\n  email: Email;\n  emailString: string;\n\n  constructor(private formBuilder: FormBuilder,\n    private http: HttpClient,\n    @Inject('BASE_URL') private baseUrl: string) { }\n\n  ngOnInit() {\n    this.emailForm = this.formBuilder.group({\n      senderName: new FormControl('', [Validators.required, Validators.minLength(5)]),\n      senderEmail: new FormControl('', [Validators.required, Validators.email]),\n      senderSubject: new FormControl('', [Validators.required, Validators.minLength(5)]),\n      senderMessage: new FormControl('', [Validators.required, Validators.minLength(5)])\n    });\n  }\n</code></pre>\n\n<p>The exact error I am getting while publishing is: ERROR in src\\app\\contact\\contact.component.html(4,63): : Property 'formSubmitted' does not exist on type 'ContactComponent'. Did you mean 'onFormSubmit'?</p>\n"}, {"tags": ["typescript", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 3879, "user_id": 6599814, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/f1fsf.jpg?s=128&g=1", "display_name": "Micha\u0142 Pietraszko", "link": "https://stackoverflow.com/users/6599814/micha%c5%82-pietraszko"}, "is_accepted": true, "score": 1, "last_activity_date": 1565180299, "creation_date": 1565180299, "answer_id": 57394345, "question_id": 57392210, "link": "https://stackoverflow.com/questions/57392210/reflect-decorate-vs-decorating-manually-in-typescript/57394345#57394345", "title": "Reflect.decorate VS decorating manually in TypeScript", "body": "<p>To achieve similar behaviour with <code>Reflect.decorate</code>, you have to pass the prototype of the class.</p>\n\n<pre><code>import \"reflect-metadata\";\n\nconst enum MetadataTypes {\n  Type = \"design:type\",\n  Paramtypes = \"design:paramtypes\",\n  ReturnType = \"design:returntype\"\n}\n\nfunction Decorator1(target: any, key: string): void {\n  console.log(`Applied Decorator1 to ${key} on ${target.constructor.name}`);\n  const type = Reflect.getMetadata(MetadataTypes.Type, target, key);\n  console.log(type.name);\n}\n\nexport class MyClass {\n  private foo: string;\n}\n\nReflect.decorate([Decorator1], MyClass.prototype, \"foo\");\n\n// Output:\n// Applied Decorator1 to foo on MyClass\n// undefined\n</code></pre>\n\n<p>The problem is that the metadata is not generated when <code>Reflect.decorate</code> is used.</p>\n\n<p>Using a decorator syntax makes the compiler save metadata (when <code>emitDecoratorMetadata</code> is config option enabled) that can be accessed via <code>Reflect.getMetadata</code>.</p>\n\n<p>You can read about it here: <a href=\"https://github.com/Microsoft/TypeScript/issues/2577\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/TypeScript/issues/2577</a></p>\n"}], "owner": {"reputation": 10107, "user_id": 142191, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/aqN2A.png?s=128&g=1", "display_name": "Ali Habibzadeh", "link": "https://stackoverflow.com/users/142191/ali-habibzadeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 57394345, "answer_count": 1, "score": 1, "last_activity_date": 1565180299, "creation_date": 1565173379, "last_edit_date": 1565173769, "question_id": 57392210, "link": "https://stackoverflow.com/questions/57392210/reflect-decorate-vs-decorating-manually-in-typescript", "title": "Reflect.decorate VS decorating manually in TypeScript", "body": "<p>I have two decorators as follow:</p>\n\n<pre><code>import \"reflect-metadata\";\n\nconst enum MetadataTypes {\n  Type = \"design:type\",\n  Paramtypes = \"design:paramtypes\",\n  ReturnType = \"design:returntype\"\n}\n\nfunction Decorator1(target: any, key: string): void {\n  console.log(`Applied Decorator1 to ${key} on ${target.constructor.name}`);\n  const type = Reflect.getMetadata(MetadataTypes.Type, target, key);\n  console.log(type.name);\n}\n\nfunction Decorator2(target: any, key: string): void {\n  console.log(`Applied Decorator2 to ${key} on ${target.name}`);\n  const type = Reflect.getMetadata(MetadataTypes.Type, target, key);\n  console.log(type);\n}\n</code></pre>\n\n<p>One is applied manually:</p>\n\n<pre><code>export class MyClass {\n  @Decorator1\n  private foo: string;\n}\n</code></pre>\n\n<p>and the other using <code>Reflect.decorate</code>:</p>\n\n<pre><code>Reflect.decorate([Decorator2], MyClass, \"foo\");\n</code></pre>\n\n<p>Why the decorator applied using Reflect is not able to retrieve the data type?</p>\n\n<p>Logoutput is:</p>\n\n<pre><code>Applied Decorator1 to foo on MyClass\nString\n\nApplied Decorator2 to foo on MyClass\nundefined\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "edited": false, "score": 0, "creation_date": 1565175588, "post_id": 57392094, "comment_id": 101267488, "body": "What do you mean by &quot;emits again after the first time formChanges$ emits every time the form controls are updated&quot;  Because the last solution with switchMap looks really well"}, {"owner": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "reply_to_user": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "edited": false, "score": 0, "creation_date": 1565178776, "post_id": 57392094, "comment_id": 101269312, "body": "In some scenarios the dataFetchedEvent$ can emit more than one time. The first time , when the component is created, all works as I would like: while the form controls are created the formChanges$ stream don&#39;t emit because is not still subscribed. But while the user is still in the same component (he didn&#39;t change page) If the conditions are met for dataFetchedEvent$ stream to emit again , the formChanges$ is now listening so it emits values while I&#39;m updating the form controls with the new fetched data and this is the situation I would like to avoid. Hope I explained myself."}, {"owner": {"reputation": 704, "user_id": 1448660, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3dctW.jpg?s=128&g=1", "display_name": "wolverine", "link": "https://stackoverflow.com/users/1448660/wolverine"}, "edited": false, "score": 0, "creation_date": 1565178930, "post_id": 57392094, "comment_id": 101269397, "body": "why don&#39;t you try disabling the form before <code>createFormControls</code> and enabling it after creating/updating all the controls"}, {"owner": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "edited": false, "score": 0, "creation_date": 1565179081, "post_id": 57392094, "comment_id": 101269477, "body": "What do you mean with &quot;enabling and disabling&quot;? You mean I have to unsubscribe <code>formChanges$</code>  before <code>createFormControls</code> and resubscribe after?"}, {"owner": {"reputation": 704, "user_id": 1448660, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3dctW.jpg?s=128&g=1", "display_name": "wolverine", "link": "https://stackoverflow.com/users/1448660/wolverine"}, "edited": false, "score": 0, "creation_date": 1565179138, "post_id": 57392094, "comment_id": 101269517, "body": "check this <a href=\"https://angular.io/api/forms/AbstractControl#disable\" rel=\"nofollow noreferrer\">angular.io/api/forms/AbstractControl#disable</a>"}, {"owner": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "reply_to_user": {"reputation": 704, "user_id": 1448660, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3dctW.jpg?s=128&g=1", "display_name": "wolverine", "link": "https://stackoverflow.com/users/1448660/wolverine"}, "edited": false, "score": 0, "creation_date": 1565180885, "post_id": 57392094, "comment_id": 101270490, "body": "@wolverine Your approach seemed to be simple and clear , I tried it out but the formChanges$ still to emit while the form is disabled, as if it ignored that. I used <code>this.form.disable({onlySelf: false, emitEvent: false});</code> before <code>createFormControls</code> and <code>this.form.enable()</code> after..."}, {"owner": {"reputation": 704, "user_id": 1448660, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/3dctW.jpg?s=128&g=1", "display_name": "wolverine", "link": "https://stackoverflow.com/users/1448660/wolverine"}, "edited": false, "score": 0, "creation_date": 1565182167, "post_id": 57392094, "comment_id": 101271244, "body": "sorry, it won&#39;t work, the flag is to not emit event at the time of disabling, but it will emit after that"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "edited": false, "score": 0, "creation_date": 1565180546, "post_id": 57394154, "comment_id": 101270284, "body": "I tried but as in my example with switchMap/mergeMap , if dataFetchedEvent$ emits again after the first time while I&#39;m updating the controls the formChanges$ stream emits value."}, {"owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "reply_to_user": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "edited": false, "score": 0, "creation_date": 1565181119, "post_id": 57394154, "comment_id": 101270631, "body": "@berno Could you send the body of the registerPostOrderHooks? I want to check how the formChanges$ is created"}, {"owner": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "edited": false, "score": 0, "creation_date": 1565181869, "post_id": 57394154, "comment_id": 101271037, "body": "sorry I never use it before, can you explain me what I have to do?"}, {"owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "reply_to_user": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "edited": false, "score": 0, "creation_date": 1565181985, "post_id": 57394154, "comment_id": 101271114, "body": "sorry, some bad copy paste. I want body of your createFormControls"}, {"owner": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "edited": false, "score": 0, "creation_date": 1565183647, "post_id": 57394154, "comment_id": 101272240, "body": "I updated my answer to show you the form and the real createFormControls"}, {"owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "reply_to_user": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "edited": false, "score": 0, "creation_date": 1565184420, "post_id": 57394154, "comment_id": 101272764, "body": "I see only that my solution require recreating the formChanges$ because it will stops emit after the next dataFetchedEvent. Maybe try the easiest way which is: <code>filter(() =&gt; !!this.controlsCreation)</code> in the first or second pipe"}], "tags": [], "owner": {"reputation": 585, "user_id": 7974341, "user_type": "registered", "profile_image": "https://graph.facebook.com/2256495541243065/picture?type=large", "display_name": "Maciej Sikorski", "link": "https://stackoverflow.com/users/7974341/maciej-sikorski"}, "is_accepted": false, "score": 0, "last_activity_date": 1565179663, "creation_date": 1565179663, "answer_id": 57394154, "question_id": 57392094, "link": "https://stackoverflow.com/questions/57392094/how-to-synchronize-two-subscriptions-so-that-one-starts-only-when-other-emits/57394154#57394154", "title": "how to synchronize two subscriptions so that one starts only when other emits", "body": "<p>Check this out </p>\n\n<pre><code>const dataFetchedEvent$ = this.event.asObservable()\n  .pipe(\n    tap((fetchedData) =&gt; {\n      this.createFormControls(fetchedData); \n    }));\n\n  dataFetchedEvent$\n    .pipe(\n      switchMap(() =&gt; formChanges$.pipe(takeUntil(dataFetchedEvent)),\n      takeUntil(this.componentDestroyed)\n  ).subscribe();\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5635645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b896408796322b720ffc2508d35684c1?s=128&d=identicon&r=PG&f=1", "display_name": "berno", "link": "https://stackoverflow.com/users/5635645/berno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565183612, "creation_date": 1565172985, "last_edit_date": 1565183612, "question_id": 57392094, "link": "https://stackoverflow.com/questions/57392094/how-to-synchronize-two-subscriptions-so-that-one-starts-only-when-other-emits", "title": "how to synchronize two subscriptions so that one starts only when other emits", "body": "<p>I'm developing an angular app, I have this situation: an observable which signals that some data have been fetched from remote (<code>dataFetchedEvent$</code>) and a form which uses that remote data and listens user changes (<code>formChanges$</code>). </p>\n\n<pre><code>   const dataFetchedEvent$ = this.event.asObservable()\n      .pipe(\n        tap((fetchedData) =&gt; {\n          this.createFormControls(fetchedData); // creates the reactive form control based on the data fecthed from remote\n        }),\n        takeUntil(this.componentDestroyed) // fired when in the ngOnDestroy of the component\n      );\n\n    const formChanges$ = this.form.valueChanges // listen form changes\n      .pipe(\n        switchMap((formDataRaw) =&gt; this.formatData(formDataRaw)), // transform data\n        takeUntil(this.componentDestroyed)\n      );\n\n    dataFetchedEvent$.subscribe();\n\n    formChanges$.subscribe(\n      (formattedFormData) =&gt; {\n        // do stuff...\n      }\n    );\n</code></pre>\n\n<p>With this code all works but when is fired <code>dataFetchedEvent$</code> the  <code>formChanges$</code> subscription is invoked every single time a control is changed by <code>this.createFormControls(fetchedData)</code> and I want to avoid it.\nMy goal is to listen form changes only after the form controls were created or updated.\nI tried multiple solutions but each has some limit:</p>\n\n<p>with <strong>skipUntil</strong></p>\n\n<pre><code>   const formChanges$ = this.form.valueChanges // listen form changes\n      .pipe(\n        skipUntil(dataFetchedEvent$),\n        switchMap((formDataRaw) =&gt; this.formatData(formDataRaw)), // transform data\n        takeUntil(this.componentDestroyed)\n      );\n</code></pre>\n\n<p>This solution avoids the multiple emissions of <code>formChanges$</code> stream while the controls are created and works when the component is destroyed an recreated (for example when the user changes page and returns) but for the behavior of skipUntil the <code>dataFetchedEvent$</code> is unsubscribed after the first emission and I have some cases in which the <code>dataFetchedEvent$</code> must emit again and update the form controls.</p>\n\n<p>with <strong>concat</strong></p>\n\n<pre><code>   const formChanges$ = this.form.valueChanges // listen form changes\n      .pipe(\n        switchMap((formDataRaw) =&gt; this.formatData(formDataRaw)), // transform data\n        tap((formattedFormData) =&gt; {\n          // do stuff...\n        }),\n        takeUntil(this.componentDestroyed)\n      );\n\n    concat(dataFetchedEvent$, formChanges$).subscribe();\n</code></pre>\n\n<p>In this situation the <code>formChanges$</code> stream is never subscribed, I think this happens because dataFetchedEvent$ don't complete.</p>\n\n<p>with <strong>combineLatest</strong></p>\n\n<pre><code>combineLatest(dataFetchedEvent$, formChanges$).subscribe([val1, val2] =&gt; { // do stuff... });\n</code></pre>\n\n<p>It's not that I'm looking for because the formChanges$ stream still emits when I am creating the controls.</p>\n\n<p>with <strong>mergeMap or switchMap</strong></p>\n\n<pre><code>const dataFetchedEvent$ = this.event.asObservable()\n  .pipe(\n    tap((fetchedData) =&gt; {\n      this.createFormControls(fetchedData); // creates the reactive form control based on the data fecthed from remote\n    }),\n    mergeMap(() =&gt; formChanges$),\n    takeUntil(this.componentDestroyed) // fired when in the ngOnDestroy of the component\n  );\n\n  dataFetchedEvent$.subscribe();\n</code></pre>\n\n<p>This works the first time or if the component is destroyed and recreated, but if the <code>dataFetchedEvent$</code> emits again after the first time <code>formChanges$</code> emits every time the form controls are updated. With <code>switchMap</code> the behavior is the same.</p>\n\n<p>Which is the best approach to reach my goal?</p>\n\n<p>------ EDIT ------</p>\n\n<p>In my example the code was generic and simplified.</p>\n\n<p>Here are the form controls</p>\n\n<pre><code>form = this.fb.group({\n    tourLength: this.fb.group({\n      length: [false]\n    }),\n    types: this.fb.group({\n      type: [false]\n    }),\n    categories: this.fb.group({}),\n    languages: this.fb.group({\n      lang: [false]\n    }),\n    prices: this.fb.group({\n      opt: [false]\n    })\n  });\n</code></pre>\n\n<p>The only group that changes is categories, when <code>dataFetchedEvent$</code> emits means that new categories was fecthed from remote and I update the controls with <code>_createControlsCategories()</code> which is the previous <code>createFormControls</code> </p>\n\n<pre><code>private _createControlsCategories(categories) {\n   const categoriesGroup: FormGroup = this.filterForm.get('categories') as FormGroup;\n   categoriesGroup.controls = {};\n   for (const cat of categories) {         \n      categoriesGroup.addControl(cat.id_remote, new FormControl(false));\n   }\n</code></pre>\n\n<p>}</p>\n\n<p>every category is binded to a checkbox in the view.</p>\n"}, {"tags": ["typescript", "typescript-generics"], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 4095989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12dad014bc943a5af02bfddec2dd0bea?s=128&d=identicon&r=PG&f=1", "display_name": "fabiossa", "link": "https://stackoverflow.com/users/4095989/fabiossa"}, "edited": false, "score": 0, "creation_date": 1565193373, "post_id": 57391600, "comment_id": 101278039, "body": "I expected it to be much more complex than this. Many Thanks"}], "tags": [], "owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "is_accepted": true, "score": 5, "last_activity_date": 1565171550, "creation_date": 1565171550, "answer_id": 57391600, "question_id": 57391539, "link": "https://stackoverflow.com/questions/57391539/typescript-use-derived-class-as-return-type-of-method/57391600#57391600", "title": "Typescript Use Derived Class as Return Type of Method", "body": "<p>You might be looking for the <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#polymorphic-this-types\" rel=\"noreferrer\">polymorphic this type</a>.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export abstract class Wizard {\n   ...\n\n   public onPageChanging(handler: PageChangingHandler): this { // &lt;-- here\n       this.onPageChangingHandler = handler;\n       return this;\n   }\n\n   public onPageChanged(handler: PageChangedHandler): this { // &lt;-- here\n       this.onPageChangedHandler = handler;\n       return this;\n   }\n   ...\n}\n</code></pre>\n"}], "owner": {"reputation": 136, "user_id": 4095989, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12dad014bc943a5af02bfddec2dd0bea?s=128&d=identicon&r=PG&f=1", "display_name": "fabiossa", "link": "https://stackoverflow.com/users/4095989/fabiossa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57391600, "answer_count": 1, "score": 0, "last_activity_date": 1565171550, "creation_date": 1565171372, "question_id": 57391539, "link": "https://stackoverflow.com/questions/57391539/typescript-use-derived-class-as-return-type-of-method", "title": "Typescript Use Derived Class as Return Type of Method", "body": "<p>I have an abstract class in typescript which has a method to supply a callback for later use. The return type of the method is the class, so that I can use fluent style coding. I am trying to extend the class but am unsure how to get the method to return the derived class type:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export abstract class Wizard {\n   ...\n\n   public onPageChanging(handler: PageChangingHandler): Wizard { // Returns Wizard (but I would like this to be the derived class instead)\n       this.onPageChangingHandler = handler;\n       return this;\n   }\n\n   public onPageChanged(handler: PageChangedHandler): Wizard { // Returns Wizard (but I would like this to be the derived class instead)\n       this.onPageChangedHandler = handler;\n       return this;\n   }\n   ...\n}\n\nexport class StepWizard extends Wizard {\n   ...\n}\n</code></pre>\n\n<p>Calling code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>\nexport class Foo {\n\n    private wizard: StepWizard;\n\n    ...\n    wireUpWizard() {\n        this.wizard = new StepWizard({ \n             elem: HTMLElement,\n        }).onPageChanging(pc =&gt; {\n          // Handle Page Changing\n        }).onPageChanged(pc =&gt; {\n          // Handler Page Changed\n        });\n\n        // ISSUE: Can't use fluent chaining, as onPageChanging/onPageChanged returns Wizard instead of StepWizard\n    }\n\n    ...\n\n}\n\n</code></pre>\n\n<p>I know I need to use Generics in some fashion to return a Generic type from onPageChanging and onPageChanged, but I have not been able to do it so far.</p>\n\n<p>Could anyone help?</p>\n"}, {"tags": ["typescript", "firebase", "google-cloud-functions", "firebase-admin"], "answers": [{"comments": [{"owner": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "edited": false, "score": 0, "creation_date": 1565175222, "post_id": 57392598, "comment_id": 101267289, "body": "It&#39;s for serverside in my case (cloud function)"}, {"owner": {"reputation": 2423, "user_id": 8437740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/PsSye.png?s=128&g=1", "display_name": "Jithin", "link": "https://stackoverflow.com/users/8437740/jithin"}, "reply_to_user": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "edited": false, "score": 0, "creation_date": 1565176401, "post_id": 57392598, "comment_id": 101267960, "body": "Yes, I got you, but in that case, it&#39;s not needed. It is recommnded in the official docs only on the client sdk but not in the firebase-admin sdk. YOu will be alright"}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1565194355, "post_id": 57392598, "comment_id": 101278502, "body": "The Firebase client libraries mentioned here are not a replacement for the server side Admin SDK. They won&#39;t work in Cloud Functions.  This is not an appropriate answer."}, {"owner": {"reputation": 2423, "user_id": 8437740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/PsSye.png?s=128&g=1", "display_name": "Jithin", "link": "https://stackoverflow.com/users/8437740/jithin"}, "edited": false, "score": 0, "creation_date": 1565195351, "post_id": 57392598, "comment_id": 101279002, "body": "I answered to the question that is asked. User just wants to know whether we can import like client sdk"}], "tags": [], "owner": {"reputation": 2423, "user_id": 8437740, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/PsSye.png?s=128&g=1", "display_name": "Jithin", "link": "https://stackoverflow.com/users/8437740/jithin"}, "is_accepted": false, "score": 2, "last_activity_date": 1565174692, "creation_date": 1565174692, "answer_id": 57392598, "question_id": 57391458, "link": "https://stackoverflow.com/questions/57391458/import-only-used-bits-from-firebase-admin-when-using-typescript-in-cloud-functio/57392598#57392598", "title": "Import only used bits from firebase-admin when using Typescript in Cloud Functions", "body": "<p>In case of <code>firebase-admin</code> such a thing is not mentioned in the docs, since <code>firebase-admin</code> sdk is meant for the server side of things.</p>\n\n<p>But there is definitely one for <code>firebase</code> client sdk.</p>\n\n<p><code>\nconst firebase = require('firebase/app');\nrequire('firebase/auth');\nrequire('firebase/firestore');</code></p>\n\n<p>And I think by the look of your question you need the client sdk.</p>\n"}, {"tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 1, "last_activity_date": 1565194572, "creation_date": 1565194572, "answer_id": 57398569, "question_id": 57391458, "link": "https://stackoverflow.com/questions/57391458/import-only-used-bits-from-firebase-admin-when-using-typescript-in-cloud-functio/57398569#57398569", "title": "Import only used bits from firebase-admin when using Typescript in Cloud Functions", "body": "<p>When you <code>require('firebase-admin')</code> (or import in TypeScript, it's the same thing), it doesn't matter what symbols you import into your code.  The same thing will happen regardless - the entire module will be loaded.  Importing individual symbols from the library does not change this fact, it just changes which symbols you have available in your code.  If you are trying to optimize your code by only choosing certain symbols to import, that's not really a valid optimization in JavaScript.  All you can really do is not use the parts of the SDK that you don't need.</p>\n"}, {"tags": [], "owner": {"reputation": 5314, "user_id": 5190886, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YLo4CPWOOeA/AAAAAAAAAAI/AAAAAAAAAAA/NEX8mDWN_F0/photo.jpg?sz=128", "display_name": "Hiranya Jayathilaka", "link": "https://stackoverflow.com/users/5190886/hiranya-jayathilaka"}, "is_accepted": false, "score": 3, "last_activity_date": 1565215594, "creation_date": 1565215594, "answer_id": 57402839, "question_id": 57391458, "link": "https://stackoverflow.com/questions/57391458/import-only-used-bits-from-firebase-admin-when-using-typescript-in-cloud-functio/57402839#57402839", "title": "Import only used bits from firebase-admin when using Typescript in Cloud Functions", "body": "<p><code>firebase-admin</code> is a monolithic package. It just exports a single entity; namely the <code>admin</code> namespace. Therefore it's not possible to import just bits and pieces of it. However, the package also implements a bunch of lazy loading stuff internally, which make sure that only the things that developers use get loaded.</p>\n\n<pre><code>const admin = require('firebase-admin');\n// The admin namespace is now loaded. But none of the API services \n// haven't loaded yet.\n\nadmin.auth();\n// This loads the Auth service code, and any dependencies it uses.\n\nadmin.firestore();\n// This loads the @google-cloud/firestore package.\n</code></pre>\n\n<p>In an environment like Cloud Functions, this makes sure that the package only loads the necessary source files and dependencies. So you should simply import the <code>admin</code> namespace, and call methods on it and let the SDK import the necessary services/components on-demand.</p>\n"}], "owner": {"reputation": 35300, "user_id": 911930, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/HtpZB.jpg?s=128&g=1", "display_name": "Ilja", "link": "https://stackoverflow.com/users/911930/ilja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 57398569, "answer_count": 3, "score": 1, "last_activity_date": 1565215594, "creation_date": 1565171092, "question_id": 57391458, "link": "https://stackoverflow.com/questions/57391458/import-only-used-bits-from-firebase-admin-when-using-typescript-in-cloud-functio", "title": "Import only used bits from firebase-admin when using Typescript in Cloud Functions", "body": "<p>I glanced at my transpiled code from cloud functions and following typescript import</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { auth, firestore } from 'firebase-admin';\n</code></pre>\n\n<p>is transpiled to</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const firebase_admin_1 = require(\"firebase-admin\");\n</code></pre>\n\n<p>Looking at this it imports whole admin library as opposed to just bits I need and I assume this will contribute to bigger cold start times.</p>\n\n<p>I tried to require these in my ts code using require i.e.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const { auth, firestore } = require('firebase-admin');\n</code></pre>\n\n<p>but doing so makes it loose it's type definitions.</p>\n\n<p>I wanted to ask if there is a way to use only what I need from firebase-admin lib, without compromising typescript definitions?</p>\n"}, {"tags": ["node.js", "regex", "mongodb", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11835011, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B7YIZGAKhwY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rczTgq-pLSx4ctSXiRfgbvSIOn2-w/photo.jpg?sz=128", "display_name": "Marius", "link": "https://stackoverflow.com/users/11835011/marius"}, "is_accepted": false, "score": 0, "last_activity_date": 1565182898, "last_edit_date": 1565182898, "creation_date": 1565180566, "answer_id": 57394422, "question_id": 57391258, "link": "https://stackoverflow.com/questions/57391258/mongodb-reverse-match-api-endpoint-path/57394422#57394422", "title": "Mongodb reverse match API endpoint path", "body": "<p>Ok, I'm just lacking sleep, I've approached this the wrong way.</p>\n\n<p>One solution would be to just call the <code>path-to-regexp</code> method on the endpoint provided by the user when registering the webhook, that way a true expression would be stored alongside the endpoint but hidden to the user.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as pathToRegexp from 'path-to-regexp';  \n\npublic async Create(webhook: IWebhook): Promise&lt;any&gt; {\n  let pattern = pathToRegexp(webhook.endpoint.original, []);\n  webhook.endpoint.pattern = pattern;\n\n  const createdWebhook = await MongoDb.Instance.Models.Webhook.create(webhook);\n\n  this.setStatus(201);\n  return createdWebhook;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11835011, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B7YIZGAKhwY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rczTgq-pLSx4ctSXiRfgbvSIOn2-w/photo.jpg?sz=128", "display_name": "Marius", "link": "https://stackoverflow.com/users/11835011/marius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565182898, "creation_date": 1565170407, "question_id": 57391258, "link": "https://stackoverflow.com/questions/57391258/mongodb-reverse-match-api-endpoint-path", "title": "Mongodb reverse match API endpoint path", "body": "<p>Trying to set up a webhook system where the user can hook into any method of my express server by providing a method and an endpoint to listen to (eg <code>PUT /movies/*</code>). This would send the edited movie to the user's callback url.</p>\n\n<p>The challenges I'm facing here are:</p>\n\n<ol>\n<li>Not forcing the user to write a full-on regular expression (something like bash wildcards would be ideal, or the way node <code>path-to-regexp</code> library works)</li>\n<li>Retrieving all the hooks matching an endpoint when it is called</li>\n</ol>\n\n<p>I'm really not sure how to deal with the first point, however I was able retrieve my webhooks using the solution provided here <a href=\"https://stackoverflow.com/questions/15966991/mongodb-reverse-regex\">MongoDB reverse regex</a></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  private static async getWebhooks(endpoint: string, method: string): Promise&lt;any[]&gt; {\n    return await MongoDb.Instance.Models.Webhook.find({\n      $where: `\"${endpoint}\".match(this.endpoint)`,\n      method: method,\n    });\n  }\n</code></pre>\n\n<p>This doesn't exactly work as expected. Provided <code>GET /movies/*</code> this matches both the <code>GET /movies</code> and the <code>GET /movies/:movieId</code> endpoints when it should only match the latter.</p>\n"}, {"tags": ["javascript", "node.js", "typescript", "firebase-admin"], "comments": [{"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1565170588, "post_id": 57391255, "comment_id": 101264769, "body": "Where&#39;s the import of <code>Auth</code>?"}, {"owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "reply_to_user": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1565170873, "post_id": 57391255, "comment_id": 101264927, "body": "@T.J.Crowder.  It has been used in a class named <code>AuthService</code>, which in turn is used for logging in"}, {"owner": {"reputation": 871364, "user_id": 157247, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4HovX.jpg?s=128&g=1", "display_name": "T.J. Crowder", "link": "https://stackoverflow.com/users/157247/t-j-crowder"}, "edited": false, "score": 0, "creation_date": 1565170970, "post_id": 57391255, "comment_id": 101264982, "body": "You&#39;ve said changing what <code>auth.ts</code> exports changes the problem. So we need to see the code that <i>imports</i> it to know how it&#39;s being used."}], "answers": [{"tags": [], "owner": {"reputation": 5314, "user_id": 5190886, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YLo4CPWOOeA/AAAAAAAAAAI/AAAAAAAAAAA/NEX8mDWN_F0/photo.jpg?sz=128", "display_name": "Hiranya Jayathilaka", "link": "https://stackoverflow.com/users/5190886/hiranya-jayathilaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1565215870, "creation_date": 1565215870, "answer_id": 57402877, "question_id": 57391255, "link": "https://stackoverflow.com/questions/57391255/instantiating-object-returns-an-error-after-export-default-in-typescript/57402877#57402877", "title": "instantiating object returns an error after export default in typescript", "body": "<p>Following in not a valid import for the Admin SDK.</p>\n\n<pre><code>import { firestore } from 'firebase-admin';\n</code></pre>\n\n<p>It has to be:</p>\n\n<pre><code>import * as admin from 'firebase-admin'\n\nadmin.initializeApp();\nconst firestore = admin.firestore();\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/57391458/import-only-used-bits-from-firebase-admin-when-using-typescript-in-cloud-functio\">Import only used bits from firebase-admin when using Typescript in Cloud Functions</a></p>\n"}], "owner": {"reputation": 637, "user_id": 4336438, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/702a473396a4d036b71ebccd8d3045b6?s=128&d=identicon&r=PG&f=1", "display_name": "Reyn", "link": "https://stackoverflow.com/users/4336438/reyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565215870, "creation_date": 1565170383, "last_edit_date": 1565171509, "question_id": 57391255, "link": "https://stackoverflow.com/questions/57391255/instantiating-object-returns-an-error-after-export-default-in-typescript", "title": "instantiating object returns an error after export default in typescript", "body": "<p>I have a models dir: </p>\n\n<pre><code>models/\n-- index.ts\n-- basemodel.ts\n-- auth.ts\n-- validator.ts\n</code></pre>\n\n<p>of all the models only <strong>auth.ts inherits basemodel</strong></p>\n\n<p><strong>models/index.ts</strong></p>\n\n<pre><code>export { default as BaseModel } from './basemodel.ts';\nexport { default as Auth } from './auth.ts';\nexport { default as Validator } from './validator.ts';\n</code></pre>\n\n<p><strong>models/basemodel.ts</strong></p>\n\n<pre><code>import { firestore } from 'firebase-admin';\n\nexport default abstract class BaseModel {\n  private _collection: firestore.Firestore;\n\n  get collection(): firestore.Firestore {\n    return this._collection\n  }\n\n  constructor() {\n    this._collection = firestore().collection(\n      this.constructor.name.toLowerCase()\n    )\n  }\n\n\n  //... more codes\n}\n</code></pre>\n\n<p><strong>models/auth.ts</strong></p>\n\n<pre><code>import { BaseModel } from '.';\n\nexport default new (class Auth extends BaseModel)()\n</code></pre>\n\n<p>now I created a file in <strong>middleware/input-validator.ts</strong></p>\n\n<pre><code>import * as joi from 'joi';\nimport { Validator } from '../models';\n\nexport default (schema) =&gt; (req, res, next) =&gt; {\n  const result = new Validator(schema,  req.body, //... callback codes removed)\n\n  //.. if result true then next() else throw response err\n}\n</code></pre>\n\n<p>now when I try to serve the <strong>function</strong>(<code>I am using firebase function with TS</code>)</p>\n\n<p>it returns an error:</p>\n\n<pre><code>Cannot read property 'firestore' of undefined\n</code></pre>\n\n<p>Now I tried to remove the <strong>new</strong> inside the <strong>auth.ts</strong> as shown below:</p>\n\n<p><strong>models/auth.ts</strong></p>\n\n<pre><code>import { BaseModel } from '.';\n\nexport default class Auth extends BaseModel {};\n</code></pre>\n\n<p>and tried to <code>serve</code> and it worked;</p>\n\n<p>now my question is, how did it occur?</p>\n\n<p>I tried to check the stack trace but it points out the <code>base model</code> being the <code>firestore to be undefined</code>;</p>\n\n<p>is this a gotcha in modules or other stuff in typescript or es6 in general(or the lack of it)?</p>\n\n<p>also here's my <code>tsconfig</code></p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"module\": \"commonjs\",\n    \"noImplicitReturns\": true,\n    \"noUnusedLocals\": true,\n    \"outDir\": \"lib\",\n    \"sourceMap\": true,\n    \"strict\": true,\n    \"target\": \"es2017\",\n    \"resolveJsonModule\": true\n  },\n  \"compileOnSave\": true,\n  \"include\": [\"src\"],\n  \"exclude\": [\"node_modules\"]\n}\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I forgot to add, the service that the auth is being called to.</p>\n\n<p><strong>services/auth-service.ts</strong></p>\n\n<pre><code>import { Auth } from '../models';\n\nexport default class AuthService {\n   constructor() { \n     this.model = Auth;\n   }\n}\n</code></pre>\n\n<p>now its being using in a post</p>\n\n<pre><code>import * as AuthService from './services';\n\napp.post(\"/login\", (req, res) =&gt; { \n const { email, password } = req.body;\n\n new AuthService().login(email, password)\n\n //.. create token and respond with token\n})\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "typescript", "express", "yup"], "owner": {"reputation": 31, "user_id": 11894710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a07d11fe9db46912c93287993eb2ddb?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfram Deus", "link": "https://stackoverflow.com/users/11894710/wolfram-deus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565170333, "creation_date": 1565170333, "question_id": 57391241, "link": "https://stackoverflow.com/questions/57391241/how-do-i-generate-a-yup-scheme-on-server-side-and-send-it-to-browser-for-use", "title": "How do I generate a yup scheme on server side and send it to browser for use?", "body": "<p>I have got a project with forms. The only 1 thing I want to do, is to generate forms dynamically, depending on theme scheme, returned by server side. </p>\n\n<p>For schema generating I use <code>yup</code>. Is there any methods inside <code>yup</code> that could convert generated scheme to JSON on server side and convert from JSON to Scheme object in browser?</p>\n"}, {"tags": ["reactjs", "typescript", "material-ui", "tsx"], "comments": [{"owner": {"reputation": 1310, "user_id": 11673149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nc6tF.png?s=128&g=1", "display_name": "Rich Warrior", "link": "https://stackoverflow.com/users/11673149/rich-warrior"}, "edited": false, "score": 0, "creation_date": 1565169987, "post_id": 57390540, "comment_id": 101264457, "body": "Can add your code to codesandbox ?"}, {"owner": {"reputation": 87, "user_id": 6782186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154298138067400/picture?type=large", "display_name": "Michael Titi Kantz", "link": "https://stackoverflow.com/users/6782186/michael-titi-kantz"}, "reply_to_user": {"reputation": 1310, "user_id": 11673149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nc6tF.png?s=128&g=1", "display_name": "Rich Warrior", "link": "https://stackoverflow.com/users/11673149/rich-warrior"}, "edited": false, "score": 0, "creation_date": 1565178338, "post_id": 57390540, "comment_id": 101269106, "body": "@RichWarrior, I added codesandbox"}, {"owner": {"reputation": 1310, "user_id": 11673149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nc6tF.png?s=128&g=1", "display_name": "Rich Warrior", "link": "https://stackoverflow.com/users/11673149/rich-warrior"}, "edited": false, "score": 0, "creation_date": 1565180584, "post_id": 57390540, "comment_id": 101270307, "body": "I looked at the code and everything works fine"}, {"owner": {"reputation": 87, "user_id": 6782186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154298138067400/picture?type=large", "display_name": "Michael Titi Kantz", "link": "https://stackoverflow.com/users/6782186/michael-titi-kantz"}, "reply_to_user": {"reputation": 1310, "user_id": 11673149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nc6tF.png?s=128&g=1", "display_name": "Rich Warrior", "link": "https://stackoverflow.com/users/11673149/rich-warrior"}, "edited": false, "score": 0, "creation_date": 1565242828, "post_id": 57390540, "comment_id": 101292595, "body": "There is some problem using material-ui-icon with <code>.tsx</code> components. Probably related to the material-ui-icon old version i have. I managed to solve it by creating a <code>.jsx</code> &quot;transition&quot; component that calls the material-ui-icon.."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6782186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154298138067400/picture?type=large", "display_name": "Michael Titi Kantz", "link": "https://stackoverflow.com/users/6782186/michael-titi-kantz"}, "edited": false, "score": 0, "creation_date": 1565174045, "post_id": 57391373, "comment_id": 101266668, "body": "Doesn&#39;t seem to solve the problem. in fact, its not a legit import in this case."}, {"owner": {"reputation": 116, "user_id": 8205068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8d8c9293d39912a4e8aa3634626a84?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Mehra", "link": "https://stackoverflow.com/users/8205068/robin-mehra"}, "reply_to_user": {"reputation": 87, "user_id": 6782186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154298138067400/picture?type=large", "display_name": "Michael Titi Kantz", "link": "https://stackoverflow.com/users/6782186/michael-titi-kantz"}, "edited": false, "score": 0, "creation_date": 1565178325, "post_id": 57391373, "comment_id": 101269098, "body": "try this library instead. sorry about the earlier comment. <a href=\"https://www.npmjs.com/package/@material-ui/icons\" rel=\"nofollow noreferrer\">npmjs.com/package/@material-ui/icons</a>"}], "tags": [], "owner": {"reputation": 116, "user_id": 8205068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e8d8c9293d39912a4e8aa3634626a84?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Mehra", "link": "https://stackoverflow.com/users/8205068/robin-mehra"}, "is_accepted": false, "score": 0, "last_activity_date": 1565170808, "creation_date": 1565170808, "answer_id": 57391373, "question_id": 57390540, "link": "https://stackoverflow.com/questions/57390540/how-to-use-material-ui-icon-v1-0-0-beta-36-in-tsx-component/57391373#57391373", "title": "how to use material ui icon v1.0.0-beta.36 in .tsx component", "body": "<p>you need to import it like this :</p>\n\n<pre><code>import {Search} from 'material-ui-icons/Search';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 6782186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154298138067400/picture?type=large", "display_name": "Michael Titi Kantz", "link": "https://stackoverflow.com/users/6782186/michael-titi-kantz"}, "is_accepted": true, "score": 0, "last_activity_date": 1565268346, "last_edit_date": 1565268346, "creation_date": 1565267944, "answer_id": 57412808, "question_id": 57390540, "link": "https://stackoverflow.com/questions/57390540/how-to-use-material-ui-icon-v1-0-0-beta-36-in-tsx-component/57412808#57412808", "title": "how to use material ui icon v1.0.0-beta.36 in .tsx component", "body": "<p>I ended up solving that by declaring the icon with <code>any</code> type: </p>\n\n<pre><code>const SearchIcon: any = Search\n</code></pre>\n\n<p>and then use it as a regular component:</p>\n\n<pre><code>&lt;SearchIcon /&gt;\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 6782186, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154298138067400/picture?type=large", "display_name": "Michael Titi Kantz", "link": "https://stackoverflow.com/users/6782186/michael-titi-kantz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 57412808, "answer_count": 2, "score": 0, "last_activity_date": 1565268346, "creation_date": 1565168097, "last_edit_date": 1565178280, "question_id": 57390540, "link": "https://stackoverflow.com/questions/57390540/how-to-use-material-ui-icon-v1-0-0-beta-36-in-tsx-component", "title": "how to use material ui icon v1.0.0-beta.36 in .tsx component", "body": "<p>I'm using material-ui-icons v1.0.0-beta.36.</p>\n\n<p>I'm trying to use a <code>Search</code> icon in a .tsx component.</p>\n\n<p><code>.tsx</code> component:</p>\n\n<pre><code>import React, { Component, ReactElement } from 'react'\nimport Search from 'material-ui-icons/Search'\n\nimport { Button, CustomInput } from '../thirdParty/CreativeTim/components'\nimport { ENTER_KEY_CODE } from '../../../Services/Constants'\nimport { SvgIconProps } from 'material-ui/SvgIcon'\n\nlet SearchIcon: ReactElement&lt;SvgIconProps&gt; = &lt;Search /&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/CibOc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CibOc.png\" alt=\"enter image description here\"></a></p>\n\n<p>Getting this error on the <code>&lt;Search /&gt;</code> component:</p>\n\n<pre><code>JSX element type 'ReactElement&lt;any, string | ((props: any) =&gt; ReactElement&lt;any, string | ... | (new (props: any) =&gt; Component&lt;any, any, any&gt;)&gt; | null) | (new (props: any) =&gt; Component&lt;any, any, any&gt;)&gt; | Component&lt;...&gt; | null' is not a constructor function for JSX elements.\n  Type 'Component&lt;SvgIconProps, any, any&gt;' is not assignable to type 'Element | ElementClass | null'.\n    Type 'Component&lt;SvgIconProps, any, any&gt;' is not assignable to type 'ElementClass'.ts(2605)\n</code></pre>\n\n<p>Also, tried using it without assigning the variable: </p>\n\n<p><code>.tsx</code> component:</p>\n\n<pre><code>import React, { Component, ReactElement } from 'react'\nimport Search from 'material-ui-icons/Search'\n\nimport { Button, CustomInput } from '../thirdParty/CreativeTim/components'\nimport { ENTER_KEY_CODE } from '../../../Services/Constants'\nimport { SvgIconProps } from 'material-ui/SvgIcon'\n\n...\n\n  render() {\n    return (\n      &lt;div&gt;\n        ...\n        &lt;Button\n          onClick={this.onSearchclick}\n          color=\"white\"\n          aria-label=\"edit\"\n          justIcon\n          round\n        &gt;\n          &lt;Search /&gt;\n        &lt;/Button&gt;\n      &lt;/div&gt;\n    )\n  }\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/lX747.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lX747.png\" alt=\"enter image description here\"></a></p>\n\n<p>Getting kind of a same error on the <code>&lt;Search /&gt;</code> component:</p>\n\n<pre><code>JSX element type 'ReactElement&lt;any, string | ((props: any) =&gt; ReactElement&lt;any, string | ... | (new (props: any) =&gt; Component&lt;any, any, any&gt;)&gt; | null) | (new (props: any) =&gt; Component&lt;any, any, any&gt;)&gt; | Component&lt;...&gt; | null' is not a constructor function for JSX elements.\n  Type 'Component&lt;SvgIconProps, any, any&gt;' is not assignable to type 'Element | ElementClass | null'.\n    Type 'Component&lt;SvgIconProps, any, any&gt;' is not assignable to type 'ElementClass'.\n      Types of property 'render' are incompatible.\n        Type '() =&gt; ReactNode' is not assignable to type '{ (): ReactNode; (): false | Element | null; }'.\n          Type 'ReactNode' is not assignable to type 'false | Element | null'.\n            Type 'undefined' is not assignable to type 'false | Element | null'.ts(2605)\n</code></pre>\n\n<p>Couldn't find anything online with a solution for that..</p>\n\n<p>Any help would be appreciated.</p>\n\n<p><a href=\"https://codesandbox.io/s/zealous-curran-xuyth?fontsize=14\" rel=\"nofollow noreferrer\"><img src=\"https://codesandbox.io/static/img/play-codesandbox.svg\" alt=\"Edit zealous-curran-xuyth\"></a></p>\n"}, {"tags": ["angular", "typescript", "angular8"], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 11884455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/693980852437f57c4f0c3e113ca6b59b?s=128&d=identicon&r=PG&f=1", "display_name": "Ana_30", "link": "https://stackoverflow.com/users/11884455/ana-30"}, "edited": false, "score": 0, "creation_date": 1565170101, "post_id": 57390948, "comment_id": 101264512, "body": "Thank you so much!!  I really have been overthinking this."}], "tags": [], "owner": {"reputation": 586, "user_id": 9744670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b82ecf640578ce82084f25a57faa68?s=128&d=identicon&r=PG&f=1", "display_name": "Kinjal", "link": "https://stackoverflow.com/users/9744670/kinjal"}, "is_accepted": true, "score": 0, "last_activity_date": 1565169350, "creation_date": 1565169350, "answer_id": 57390948, "question_id": 57390514, "link": "https://stackoverflow.com/questions/57390514/angular-menu-unable-to-pass-data-to-sub-menu-two/57390948#57390948", "title": "Angular Menu. Unable to pass data to sub-menu-two", "body": "<p>You have to add same Input and output in sub-menu-two</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-pmyw2q\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-pmyw2q</a></p>\n"}, {"tags": [], "owner": {"reputation": 1519, "user_id": 3725110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9f66f0714823c629bdc232d32584be?s=128&d=identicon&r=PG", "display_name": "Piyush Jain", "link": "https://stackoverflow.com/users/3725110/piyush-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1565174346, "creation_date": 1565174346, "answer_id": 57392497, "question_id": 57390514, "link": "https://stackoverflow.com/questions/57390514/angular-menu-unable-to-pass-data-to-sub-menu-two/57392497#57392497", "title": "Angular Menu. Unable to pass data to sub-menu-two", "body": "<p>Please check updated url - its working now - <a href=\"https://stackblitz.com/edit/angular-o9an35\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-o9an35</a></p>\n\n<p>direct-access-page.component.html</p>\n\n<pre><code>&lt;app-main-menu \n  (changeMainMenu)=\"changeMainMenu($event)\" \n  style=\"float: left; width: 150px;\"&gt;\n&lt;/app-main-menu&gt;\n&lt;app-sub-menu-one \n  [menuItems]=\"mainMenuChildren\" \n  (changeSubMenuOne)=\"changeSubMenuOne($event)\"  \n  style=\"float: left; width: 150px;\"&gt;\n&lt;/app-sub-menu-one&gt;\n&lt;app-sub-menu-two  \n  [menuItemsTwo]=\"subMenuTwoChildren\"\n  style=\"float: left; width: 150px;\"&gt;\n&lt;/app-sub-menu-two&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>direct-access-page.component.ts</p>\n\n<pre><code>export class DirectAccessPageComponent implements OnInit {\n  //@Input() mainMenuIndex = new EventEmitter()\n  public mainMenuChildren: [{}];\n  public subMenuTwoChildren: [{}];\n  constructor() {}\n\n  ngOnInit() {}\n\n  changeMainMenu(children: [{}]) {\n    console.log('changeMainMenu', children);\n    this.mainMenuChildren = children;\n  }\n\n  changeSubMenuOne(children: [{}]) {\n    console.log('changeSubMenuOne', children);\n    this.subMenuTwoChildren = children;\n  }\n}\n</code></pre>\n\n<p>sub-menu-two.component.ts</p>\n\n<pre><code>export class SubMenuTwoComponent implements OnInit {\n  @Input() menuItemsTwo: [{}];\n  constructor() {}\n\n  ngOnInit() {}\n}\n</code></pre>\n\n<p>sub-menu-two-component.html</p>\n\n<pre><code>*ngFor=\"let item of menuItemsTwo\" \n</code></pre>\n\n<p>sub-menu-one.component.html</p>\n\n<pre><code>&lt;div  \n    class=\"ax_default t-menu\" \n    *ngFor=\"let item of menuItems\" \n    (click)=\"showSubMenuTwo(item)\"\n    style=\"border: 1px green solid\"&gt;\n    &lt;div &gt;\n      &lt;p&gt;\n        &lt;span&gt;{{ item[\"name\"] }}&lt;/span&gt;\n      &lt;/p&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Let me know if you need any help.</p>\n"}], "owner": {"reputation": 395, "user_id": 11884455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/693980852437f57c4f0c3e113ca6b59b?s=128&d=identicon&r=PG&f=1", "display_name": "Ana_30", "link": "https://stackoverflow.com/users/11884455/ana-30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57390948, "answer_count": 2, "score": 1, "last_activity_date": 1565174346, "creation_date": 1565168004, "last_edit_date": 1565168911, "question_id": 57390514, "link": "https://stackoverflow.com/questions/57390514/angular-menu-unable-to-pass-data-to-sub-menu-two", "title": "Angular Menu. Unable to pass data to sub-menu-two", "body": "<p>I have a Main Menu, Sub Menu One and Sub Menu Two.</p>\n\n<p>When I click on a Main Menu item Sub Menu One is displayed. </p>\n\n<p>When I click on a Sub Menu One item, I would like Sub Menu Two to be displayed. At the moment I cannot do this.</p>\n\n<p>I have finally managed to get Main Menu and Sub Menu One working correctly but I don't know how to integrate Sub Menu Two.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-o9an35\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-o9an35</a></p>\n\n<p>When I click on an item within Sub Menu One, I would like relevant Sub Menu Two to be displayed.</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 0, "last_activity_date": 1565196496, "creation_date": 1565196496, "answer_id": 57399033, "question_id": 57390305, "link": "https://stackoverflow.com/questions/57390305/trying-to-get-fromentries-type-right/57399033#57399033", "title": "Trying to get fromEntries type right", "body": "<p>Shouldn't the type of the <code>devices</code> property be declared not as <code>{ [P in keyof Breakpoint]: number }</code> but as <code>{ [P in Breakpoint]: string }</code> (or equivalently <code>Record&lt;Breakpoint, string&gt;</code>)?  <code>keyof Breakpoint</code> is basically <code>keyof string</code>, the names of properties and methods on a <code>string</code>, like <code>length</code> and <code>charAt</code>... not what you want.  And you the values you are using inside <code>theme.devices</code> are strings, not numbers.</p>\n\n<p>I will assume this definition of <code>DefaultTheme</code>:</p>\n\n<pre><code>export interface DefaultTheme {\n  devices: { [P in Breakpoint]: string };\n  colors: {\n    main: string;\n    secondary: string;\n  };\n}\n</code></pre>\n\n<hr>\n\n<p>On to <code>Object.fromEntries()</code> and <code>Object.entries()</code>.  The type system isn't really expressive enough to guarantee that objects only have known property keys.  Object types in TypeScript are extendable/open; they are not <a href=\"https://github.com/Microsoft/TypeScript/issues/12936\" rel=\"nofollow noreferrer\">exact</a>.  If I have an <code>interface Obj { someProp: string }</code> and an <code>interface ObjX extends Obj { extraProp: number }</code>, and you hand me an object <code>obj</code> of type <code>Obj</code>, for all I know it may also be of type <code>ObjX</code> and has an <code>extraProp</code> key.  And for all I know it may be of some other type that extends <code>Obj</code> and has all sorts of unknown extra keys.  Thus  <a href=\"https://stackoverflow.com/questions/55012174/why-doesnt-object-keys-return-a-keyof-type-in-typescript\"><code>Object.keys(obj)</code> returns <code>string[]</code> and not <code>Array&lt;keyof Obj&gt;</code></a>, and similarly <code>Object.entries(obj)</code> returns <code>Array&lt;[string, any]&gt;</code> (or maybe <code>Array&lt;[string, V]&gt;</code> for some value type <code>V</code> if <code>obj</code> is an indexable type).  And <code>Object.fromEntries()</code> <a href=\"https://github.com/microsoft/TypeScript/blob/v3.5.1/lib/lib.es2019.object.d.ts#L28\" rel=\"nofollow noreferrer\">is just as weakly-keyed</a>, turning any set of entries into an object of type <code>{[k: string]: V}</code> where <code>V</code> is the union of all entry value types.  The compiler doesn't know how to verify that <code>Object.fromEntries(Object.entries()...)</code> turns an object type <code>T</code> into some related object type, and so it doesn't even try.</p>\n\n<p>Therefore I'd suggest that you will have to use a <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#type-assertions\" rel=\"nofollow noreferrer\">type assertion</a> somewhere to tell the compiler that you are verifying that the types are correct.  In this case, if you find yourself mapping over values and preserving keys often, I might make a helper function with just one type assertion, and you can reuse that function elsewhere:</p>\n\n<pre><code>function mapValues&lt;T extends object, V&gt;(obj: T, valueMapper: (k: T[keyof T]) =&gt; V) {\n  return Object.fromEntries(\n    Object.entries(obj).map(([k, v]) =&gt; [k, valueMapper(v)])\n  ) as { [K in keyof T]: V };\n}\n</code></pre>\n\n<p>This just asserts that <code>mapValues(obj, valueMapper)</code> will return an object with the same keys as <code>obj</code> and whose values will all be that of the return type of <code>valueMapper</code>.  You can use it like this:</p>\n\n<pre><code>const theme: DefaultTheme = {\n  devices: mapValues(breakpoints, v =&gt; `(min-width: ${v}px`),\n  colors: {\n    main: \"blue\",\n    secondary: \"red\"\n  }\n};\n</code></pre>\n\n<p>And that should hopefully compile without errors.  Good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/PTAEBMFMGMBsEMBO8AuBLA9gO1AW0ogOaSgBmiGuoAogMoBykAHigLABQaWKBp80JAPIAjAFYwUAYWwBnFIgCu0FBkSgA3h1DayFXNW6I0kGQB4AKqAC8oeFgCeAPgAUkQ8ZkAuUAEkeyYVhIU0RIeHBsWHtQAG0ABQoABwIUewBpSHsAGlBzAF1HAEpvdViAa1AuUASMZMRUjPs870sAXwBuLR1ySgN5D1d3E28-AnhA4NDwyOi7exiC4tsHTvYdUDd+kwsXDBLYr1A5IyxCZtzQVtAAH1AAQURkewAZNDLg8yLvGOOuQhz8gtVutNkYTM49hpWksfv1Tjk5nkgRxWhw0exUslQAAhKZlRIYLgoaygABEMlw8FgsFJNzJ+HAaAUuFpt1JCCIkFZZOY8ngpNWHCJvH4JAAIpA+ApYChzAALSD4DRdKAANzQAkOpXilRwuLC+MJ3HOv1Ol2BoGgGFgqi1XW0lK43lNhAt2hkMGw4CQ9mdcNdXQ6KPRVqwclAwjxBKJMhJmjWR0p1O8AFYAOwANiyXQZTNw3kzAA5swmOcRvABOCsAJhL2l5yG8AEZqwAGVsowXsUgKLDKTA4SmJABqVIU20svLc4FjGDEEhyw5cXTnohaddAqrHkAAsvBEnVvM4yi0Yu97BhSLk8oVrI5QMOOLf49pQigFIgcCJxMoAHQ9fQhhkZx7VAb8JF-UEBlXQpfyHZxnDPHJVRvO9ymQ7c9wPAhnFVQoby6W94FjbU0l1UBz0va9vGHc1g3YDhQ3DFAFXwbwJSlGV5UVEgbBfCBIHVTVvCHUdYHHYDIwNaNuBkZC0IAA2cXAuAAWgAdzQcAWO8AASdRVVaRImAUwoNytG1EDtBMHXgJ0yUCcdSQ3d1PSwb1EF9MlQnAUlA07DggA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10471818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 57399033, "answer_count": 1, "score": 1, "last_activity_date": 1565196496, "creation_date": 1565167282, "question_id": 57390305, "link": "https://stackoverflow.com/questions/57390305/trying-to-get-fromentries-type-right", "title": "Trying to get fromEntries type right", "body": "<p>I am extending the styled-components module like</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import \"styled-components\";\n\ndeclare module \"styled-components\" {\n  type Breakpoint = \"small\" | \"medium\" | \"large\" | \"extra\";\n\n  export interface DefaultTheme {\n    devices: { [P in keyof Breakpoint]: number };\n    colors: {\n      main: string;\n      secondary: string;\n    };\n  }\n}\n</code></pre>\n\n<p>I use it here</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { DefaultTheme } from \"styled-components\";\n\nconst breakpoints = {\n  small: 576,\n  medium: 768,\n  large: 992,\n  extra: 1200\n};\n\nconst theme: DefaultTheme = {\n  devices: Object.fromEntries&lt;string&gt;(\n    Object.entries(breakpoints).map(([k, v]) =&gt; [k, `(min-width: ${v}px)`])\n  ),\n  colors: {\n    main: \"blue\",\n    secondary: \"red\"\n  }\n};\n\nexport default theme;\n</code></pre>\n\n<p>How can I get proper type safety here? 2 issues I'm having:\n<code>theme.devices</code>:</p>\n\n<pre><code>Type '{ [x: string]: string; [x: number]: string; }' is missing the following properties from type '{ [x: number]: number; toString: number; charAt: number; charCodeAt: number; concat: number; indexOf: number; lastIndexOf: number; localeCompare: number; match: number; replace: number; search: number; slice: number; ... 34 more ...; trimRight: number; }': charAt, charCodeAt, concat, indexOf, and 40 more.\n</code></pre>\n\n<p>And where I try to use it I get all string methods along with the custom breakpoints properties while I would only like to have the breakpoints properties</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>`@media ${props =&gt; props.theme.devices.small}` {\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1565167762, "post_id": 57390107, "comment_id": 101263231, "body": "i was building app where backend and frontend was separated but with same api type. both in typescript. so i created another project where was only api types on github and included it in be and fe in package.json."}, {"owner": {"reputation": 5594, "user_id": 1179379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf2d2e692a814340e2b10a9f61507f2?s=128&d=identicon&r=PG", "display_name": "cancerbero", "link": "https://stackoverflow.com/users/1179379/cancerbero"}, "edited": false, "score": 0, "creation_date": 1565168761, "post_id": 57390107, "comment_id": 101263785, "body": "with &quot;modules&quot; you refer to TypeScript modules or to TypeScript projects  ? (a project having its own tsconfig.json and package.json)"}, {"owner": {"reputation": 151, "user_id": 7138270, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e3ba8f371a00b9bae425a480fda3c3a?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Blue", "link": "https://stackoverflow.com/users/7138270/kyle-blue"}, "reply_to_user": {"reputation": 5594, "user_id": 1179379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf2d2e692a814340e2b10a9f61507f2?s=128&d=identicon&r=PG", "display_name": "cancerbero", "link": "https://stackoverflow.com/users/1179379/cancerbero"}, "edited": false, "score": 0, "creation_date": 1565169959, "post_id": 57390107, "comment_id": 101264432, "body": "@cancerbero When I say &quot;modules&quot; I am referring to Typescript modules that have been imported in the same project."}, {"owner": {"reputation": 5594, "user_id": 1179379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf2d2e692a814340e2b10a9f61507f2?s=128&d=identicon&r=PG", "display_name": "cancerbero", "link": "https://stackoverflow.com/users/1179379/cancerbero"}, "edited": false, "score": 0, "creation_date": 1565739296, "post_id": 57390107, "comment_id": 101443933, "body": "Kyle, is not clear yet. Are you referring to other files that you just <code>import {foo} from &#39;.&#47;the&#47;other&#47;module&#39;</code> ? or are you referring to other packages, like in <code>import {Component} from &#39;react&#39;</code>. TypeScript ambient modules like in <code>declare module Foo</code> or plain old modules that just exported something like in export const c = 1`?"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 7138270, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e3ba8f371a00b9bae425a480fda3c3a?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Blue", "link": "https://stackoverflow.com/users/7138270/kyle-blue"}, "edited": false, "score": 0, "creation_date": 1565170256, "post_id": 57391121, "comment_id": 101264596, "body": "Strange, this may be a vscode issue then... My type declarations do not seem to be shared between modules, and create nasty linting errors..."}, {"owner": {"reputation": 5594, "user_id": 1179379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bf2d2e692a814340e2b10a9f61507f2?s=128&d=identicon&r=PG", "display_name": "cancerbero", "link": "https://stackoverflow.com/users/1179379/cancerbero"}, "edited": false, "score": 0, "creation_date": 1565739340, "post_id": 57391121, "comment_id": 101443942, "body": "Can you share a link to the project or example ?"}], "tags": [], "owner": {"reputation": 18854, "user_id": 1083572, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9xSFI.png?s=128&g=1", "display_name": "Kokodoko", "link": "https://stackoverflow.com/users/1083572/kokodoko"}, "is_accepted": true, "score": 1, "last_activity_date": 1565170000, "creation_date": 1565170000, "answer_id": 57391121, "question_id": 57390107, "link": "https://stackoverflow.com/questions/57390107/what-is-the-best-practice-to-sharing-types-accross-modules-in-typescript/57391121#57391121", "title": "What is the best practice to sharing types accross modules in Typescript?", "body": "<p>Your types are automatically shared between all files in a typescript project. You only need a \u2018type definition\u2019 file if you want to use an untyped javascript library. When working with modules you still need to use export and import of course.</p>\n"}], "owner": {"reputation": 151, "user_id": 7138270, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8e3ba8f371a00b9bae425a480fda3c3a?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Blue", "link": "https://stackoverflow.com/users/7138270/kyle-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 57391121, "answer_count": 1, "score": 0, "last_activity_date": 1565170000, "creation_date": 1565166650, "question_id": 57390107, "link": "https://stackoverflow.com/questions/57390107/what-is-the-best-practice-to-sharing-types-accross-modules-in-typescript", "title": "What is the best practice to sharing types accross modules in Typescript?", "body": "<p>I was wondering what the best practice is to sharing types accross modules in typescript. I initally thought it be a good idea to export types in a types file, and include this types file among other modules, though, I am not sure if there is another way.\nThanks</p>\n"}, {"tags": ["angular", "typescript", "xml-parsing"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 9934156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FHwPz.jpg?s=128&g=1", "display_name": "Cowboy_Patrick", "link": "https://stackoverflow.com/users/9934156/cowboy-patrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1565268081, "creation_date": 1565268081, "answer_id": 57412847, "question_id": 57389937, "link": "https://stackoverflow.com/questions/57389937/angular-with-typescript-builds-xml-tree-in-wrong-order/57412847#57412847", "title": "Angular (with typescript) builds XML-Tree in wrong order", "body": "<p>I found a solution to my problem:</p>\n\n<pre><code>        range(1, newTabAmount).subscribe(x =&gt; {\n        templateData.forEach((templateDataElement, i) =&gt; {\n            const xmlRawDataElement: any = {};\n\n            xmlRawDataElement.repeatPos = newTabStartId + x;\n            xmlRawDataElement.Id = idIterator;\n\n            xmlRawData.push(xmlRawDataElement);\n\n            ++idIterator;\n        });\n    });\n</code></pre>\n\n<p>By building an assingnable model first and then applying it to my XML-model it works. I assume that because the XML-DOM operation take some time angular tries to perform the other tasks in another thread even if the neccessary variables for the next step aren't set properly yet. So if you encounter the same problem with wrong order try to build the gist of your XML-Model in a small JSON at first and assing it afterwards if you have calculated everything properly :)</p>\n"}], "owner": {"reputation": 53, "user_id": 9934156, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FHwPz.jpg?s=128&g=1", "display_name": "Cowboy_Patrick", "link": "https://stackoverflow.com/users/9934156/cowboy-patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565268081, "creation_date": 1565166054, "last_edit_date": 1565186912, "question_id": 57389937, "link": "https://stackoverflow.com/questions/57389937/angular-with-typescript-builds-xml-tree-in-wrong-order", "title": "Angular (with typescript) builds XML-Tree in wrong order", "body": "<p>In Angular I have written the following code wich is supposed to create an XML-Document which can then be sent to an external API.</p>\n\n<pre><code>        range(1, newTabAmount + 1).subscribe(x =&gt; {\n        templateData.forEach((templateDataElement, i) =&gt; {\n            if (i !== 0) {\n                //clone intial item\n                const item: XMLDocument = xmlDoc.getElementsByTagName('a:ChangeSetEntry')[0];\n                const target: XMLDocument = xmlDoc.getElementsByTagName('changeSet')[0];\n                const clone: Node = item.cloneNode(true);\n\n                target.appendChild(clone);\n            }\n\n            const changeSetEntry: any = xmlDoc.getElementsByTagName('a:ChangeSetEntry')[i];\n\n            const entity: XMLDocument = changeSetEntry.getElementsByTagName('a:Entity')[0];\n\n            console.log('repeat-position: ' + (newTabStartId + x));\n            entity.getElementsByTagName('c:RepeatPosition')[0].textContent = String(newTabStartId + x); //set amout of tab you want to add\n            entity.getElementsByTagName('c:MetaAttributeKey')[0].textContent = String(templateDataElement.MetaAttributeKey);\n            entity.getElementsByTagName('c:ReferenceKey')[0].textContent = String(referenceKey);\n\n\n            console.log('current id: ' + curId);\n            console.log('iterator;' + idIterator);\n            changeSetEntry.getElementsByTagName('a:Id')[0].textContent = String(idIterator);\n            changeSetEntry.getElementsByTagName('a:Operation')[0].textContent = 'Insert';\n\n            ++idIterator;\n        });\n    });\n</code></pre>\n\n<p>This code gives me the following output:</p>\n\n<blockquote>\n<pre><code>&gt; repeat-position: 11 iterator;0 repeat-position: 11 iterator;1\n&gt; repeat-position: 11 iterator;2 repeat-position: 11 iterator;3\n&gt; repeat-position: 12 iterator;4 repeat-position: 12 iterator;5\n&gt; repeat-position: 12 iterator;6 repeat-position: 12 iterator;7\n&gt; repeat-position: 13 iterator;8 repeat-position: 13 iterator;9\n&gt; repeat-position: 13 iterator;10 repeat-position: 13 iterator;11\n&gt; repeat-position: 14 iterator;12 repeat-position: 14 iterator;13\n&gt; repeat-position: 14 iterator;14 repeat-position: 14 iterator;15\n&gt; request started...\n</code></pre>\n</blockquote>\n\n<p>And additionally I get an XML-Document as output wich strangely has a completely different order compared to the console.log() - Outputs. </p>\n\n<p><a href=\"https://i.stack.imgur.com/YVF8A.png\" rel=\"nofollow noreferrer\">XML-Output in Google Chrome</a></p>\n\n<p>Interesting is that the first 4 elements (the come form the first iteration of the inner loop) have a valid Id. But the next 4 elements all have tha value 4 and (I haven't added this otherwise the screenshot would've been too big) from iteration 8 to 12 all elements have the Id 8. Do you have any idea why the order is different in the XML-document compared to the console.log() output? I have no explanaition for this unfortunately. </p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 4632, "user_id": 674906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Qo3i.jpg?s=128&g=1", "display_name": "scgough", "link": "https://stackoverflow.com/users/674906/scgough"}, "edited": false, "score": 1, "creation_date": 1565165890, "post_id": 57389852, "comment_id": 101262203, "body": "you&#39;re adding <code>email</code> in <code>user6</code> which doesn&#39;t exist in your definition. The lack of &#39;id&#39; looks like it is trying to force map the structure to the type and failing. On <code>user3</code> you have a full definition <i>plus</i> excess fields (which it looks like it&#39;s ignoring)."}, {"owner": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "edited": false, "score": 0, "creation_date": 1565166170, "post_id": 57389852, "comment_id": 101262350, "body": "please check out the <code>strictFunctionTypes</code> ( can be also configured in <code>tsconfig</code> file) <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-6.html\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/release-notes/&hellip;</a>"}, {"owner": {"reputation": 21257, "user_id": 3783478, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fMtGE.jpg?s=128&g=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/3783478/rajesh"}, "edited": false, "score": 0, "creation_date": 1565166387, "post_id": 57389852, "comment_id": 101262454, "body": "Should you not define type as <code>const user: User</code> instead of typecasting?"}, {"owner": {"reputation": 59, "user_id": 8551895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGMMoqDSbBc/AAAAAAAAAAI/AAAAAAAAACA/aArHVNFQrQk/photo.jpg?sz=128", "display_name": "Dennis Cual", "link": "https://stackoverflow.com/users/8551895/dennis-cual"}, "reply_to_user": {"reputation": 4632, "user_id": 674906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1Qo3i.jpg?s=128&g=1", "display_name": "scgough", "link": "https://stackoverflow.com/users/674906/scgough"}, "edited": false, "score": 0, "creation_date": 1565166516, "post_id": 57389852, "comment_id": 101262517, "body": "@scgough Yeah I thought so."}, {"owner": {"reputation": 59, "user_id": 8551895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGMMoqDSbBc/AAAAAAAAAAI/AAAAAAAAACA/aArHVNFQrQk/photo.jpg?sz=128", "display_name": "Dennis Cual", "link": "https://stackoverflow.com/users/8551895/dennis-cual"}, "reply_to_user": {"reputation": 21257, "user_id": 3783478, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/fMtGE.jpg?s=128&g=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/3783478/rajesh"}, "edited": false, "score": 0, "creation_date": 1565166676, "post_id": 57389852, "comment_id": 101262594, "body": "@Rajesh I know my sample codes are not that intuitive and you have the point. But the idea is how type assertion works on different structures."}, {"owner": {"reputation": 59, "user_id": 8551895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGMMoqDSbBc/AAAAAAAAAAI/AAAAAAAAACA/aArHVNFQrQk/photo.jpg?sz=128", "display_name": "Dennis Cual", "link": "https://stackoverflow.com/users/8551895/dennis-cual"}, "reply_to_user": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "edited": false, "score": 0, "creation_date": 1565166706, "post_id": 57389852, "comment_id": 101262608, "body": "@ymz will check. Thanks!"}, {"owner": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "edited": false, "score": 1, "creation_date": 1565167587, "post_id": 57389852, "comment_id": 101263132, "body": "Great! I hope you share your insights when you are done :)"}], "answers": [{"tags": [], "owner": {"reputation": 1622, "user_id": 187292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b11abdb7bd691dedd5be5494026098f4?s=128&d=identicon&r=PG", "display_name": "kristaps", "link": "https://stackoverflow.com/users/187292/kristaps"}, "is_accepted": false, "score": 0, "last_activity_date": 1565166226, "creation_date": 1565166226, "answer_id": 57389984, "question_id": 57389852, "link": "https://stackoverflow.com/questions/57389852/typescript-error-on-converting-type-into-different-type/57389984#57389984", "title": "Typescript error on converting type into different type", "body": "<p>Unless TypeScript <a href=\"https://basarat.gitbooks.io/typescript/content/docs/options/strictNullChecks.html\" rel=\"nofollow noreferrer\">strict null checks</a> are enabled, <code>null</code> and <code>undefined</code> can be assigned to any type. In your <code>user5</code> test <code>id</code> is <code>undefined</code> implicitly and the compiler is happy with that.</p>\n"}], "owner": {"reputation": 59, "user_id": 8551895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-vGMMoqDSbBc/AAAAAAAAAAI/AAAAAAAAACA/aArHVNFQrQk/photo.jpg?sz=128", "display_name": "Dennis Cual", "link": "https://stackoverflow.com/users/8551895/dennis-cual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2280, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1565171450, "creation_date": 1565165698, "last_edit_date": 1565171450, "question_id": 57389852, "link": "https://stackoverflow.com/questions/57389852/typescript-error-on-converting-type-into-different-type", "title": "Typescript error on converting type into different type", "body": "<p>I'm just trying to know following error better: </p>\n\n<blockquote>\n  <p>Conversion of type 'A' to type 'B' may be a mistake because neither\n  type sufficiently overlaps with the other.</p>\n</blockquote>\n\n<p>Then when I tried to do some tests, I got a weird error.</p>\n\n<p>These our my codes:</p>\n\n<pre><code>type User = {\n  id: string\n  username: string\n  age?: number\n}\n\nconst user1 = {\n  id: '123',\n  username: 'user',\n} as User // OK\n\nconst user2 = {\n  id: '123',\n  username: 'user',\n  age: 5\n} as User // OK\n\nconst user3 = {\n  id: '123',\n  username: 'user',\n  age: 5,\n  email: '1234'\n} as User // OK\n\nconst user4 = {\n  id: '123',\n  username: 'user',\n  age: '5',\n} as User // Error, the age type is different\n</code></pre>\n\n<p>These tests look straight forward.</p>\n\n<p>But when I tried these:</p>\n\n<pre><code>const user5 = {\n  username: 'user',\n  age: 5,\n} as User // OK even though the ID is not exist\n\n// Weird part\nconst user6 = {\n  username: 'user',\n  age: 5,\n  email: '123'\n} as User // Error, when we add unknown field without Id field\n`\n</code></pre>\n\n<p>Based on the <code>user5</code>, the assertion is correct. But in <code>user6</code> it doesn't which I didn't understand. Can someone here help me to understand whats going on? Thanks.</p>\n"}, {"tags": ["typescript", "typescript3.0", "union-types"], "answers": [{"tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": false, "score": 3, "last_activity_date": 1565166035, "creation_date": 1565166035, "answer_id": 57389930, "question_id": 57389826, "link": "https://stackoverflow.com/questions/57389826/typescript-union-of-type-is-resolved-as-intersection-of-types/57389930#57389930", "title": "TypeScript union of type is resolved as intersection of types", "body": "<p>There is no relation between <code>key</code> and <code>data</code>, so you could call test with <code>test( \"json\", new B())</code> and the assignment would not be valid.</p>\n\n<p>If you use a generic type parameter (lets call it <code>K</code>) for the key and type <code>data</code> as <code>Cache[K]</code>, typescript will allow the assignment. (Even though it is still not 100% type safe as <code>K</code> could be a union and the same issue as described above could happen):</p>\n\n<pre><code>class J {\n  constructor(public foo: number) {}\n}\n\nclass B {\n constructor(public bar: string) {}\n}\n\ninterface Cache {\n json?: J;\n binary?: B;\n}\n\nfunction test&lt;K extends keyof Cache&gt;(key: K, data: Cache[K], obj: Cache) {\n  obj[key] = data;\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/MYGwhgzhAEBS0G8BQ1rAPYDsIBcBOArsDungBQAOBARiAJbDQBm66AXNJgQLbUCmeAJSIAvkjFJQkGACFEKDNnxES5KrQbRqYPB1x46mAObCEYiYZwCmYYH2gBhWwAt7yaACsIWAPwdYANwo1IY6AJ5+0DJBEkwEmMR0WNBWuAA8ANLQfAAeVpgAJjAA1nxh6EyOLnwAfGSlYRwZADTQBWA4YBxOwK4A2hkAuq3o1B7d1aYo0KMefQ2D0AC8bR1gMUA\" rel=\"nofollow noreferrer\">Play</a></p>\n"}, {"comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565166841, "post_id": 57389944, "comment_id": 101262669, "body": "@rocketer <code>Partial</code> is a much better choice here IMO. I would go with this if you don&#39;t have other constraints."}, {"owner": {"reputation": 1000, "user_id": 3791924, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9b6259843b8c2d7089497a62ba3c798e?s=128&d=identicon&r=PG&f=1", "display_name": "rocketer", "link": "https://stackoverflow.com/users/3791924/rocketer"}, "reply_to_user": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565167282, "post_id": 57389944, "comment_id": 101262940, "body": "@TitianCernicova-Dragomir I agree, I also don&#39;t want to use generics in that case"}], "tags": [], "owner": {"reputation": 3140, "user_id": 11852431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLmB1.png?s=128&g=1", "display_name": "Morphyish", "link": "https://stackoverflow.com/users/11852431/morphyish"}, "is_accepted": true, "score": 2, "last_activity_date": 1565166081, "creation_date": 1565166081, "answer_id": 57389944, "question_id": 57389826, "link": "https://stackoverflow.com/questions/57389826/typescript-union-of-type-is-resolved-as-intersection-of-types/57389944#57389944", "title": "TypeScript union of type is resolved as intersection of types", "body": "<p>Typescript can't tell which property of <code>Cache</code> you are trying to update, and when in doubt he considers that the value you are trying to insert should be able to fit both. Which the <code>J | B can't.</code></p>\n\n<p>You could change your <code>test</code> function signature slightly to use <a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#partialt\" rel=\"nofollow noreferrer\">Partial</a></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function test(update: Partial&lt;Cache&gt;, obj: Cache) {\n    Object.assign(obj, update);\n}\n</code></pre>\n\n<p>That way Typescript can be sure that the key/value pairs you are passing it are valid for the <code>Cache</code> class.</p>\n"}], "owner": {"reputation": 1000, "user_id": 3791924, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9b6259843b8c2d7089497a62ba3c798e?s=128&d=identicon&r=PG&f=1", "display_name": "rocketer", "link": "https://stackoverflow.com/users/3791924/rocketer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 57389944, "answer_count": 2, "score": 1, "last_activity_date": 1565166081, "creation_date": 1565165612, "question_id": 57389826, "link": "https://stackoverflow.com/questions/57389826/typescript-union-of-type-is-resolved-as-intersection-of-types", "title": "TypeScript union of type is resolved as intersection of types", "body": "<p>I have this snippet</p>\n\n<pre><code>class J {\n  constructor(public foo: number) {}\n}\n\nclass B {\n constructor(public bar: string) {}\n}\n\ninterface Cache {\n json?: J;\n binary?: B;\n}\n\nfunction test(key: \"json\" | \"binary\", data: J | B, obj: Cache) {\n  obj[key] = data;\n}\n</code></pre>\n\n<p>If you try this code in <a href=\"https://www.typescriptlang.org/play/\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/play/</a>, the line <code>obj[key] = data;</code> is having the following error</p>\n\n<blockquote>\n  <p>Type 'J | B' is not assignable to type 'J &amp; B'.\n    Type 'J' is not assignable to type 'J &amp; B'.\n      Property 'bar' is missing in type 'J' but required in type 'B'.</p>\n</blockquote>\n\n<p>There's obviously something I am missing but I can't figure out what. Any idea?</p>\n"}, {"tags": ["angular", "typescript", "angular7"], "comments": [{"owner": {"reputation": 7217, "user_id": 293316, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c37e23435362dbc4d65b670585d4b9c?s=128&d=identicon&r=PG", "display_name": "Robus", "link": "https://stackoverflow.com/users/293316/robus"}, "edited": false, "score": 0, "creation_date": 1565164552, "post_id": 57389404, "comment_id": 101261589, "body": "It would appear authToken is undefined."}], "answers": [{"tags": [], "owner": {"reputation": 939, "user_id": 6449592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb076a7006291c56553180c24da280f3?s=128&d=identicon&r=PG&f=1", "display_name": "sagat", "link": "https://stackoverflow.com/users/6449592/sagat"}, "is_accepted": false, "score": 0, "last_activity_date": 1565165273, "last_edit_date": 1565165273, "creation_date": 1565164929, "answer_id": 57389632, "question_id": 57389404, "link": "https://stackoverflow.com/questions/57389404/when-i-try-to-make-middle-ware-for-authentication-error-is-occurred/57389632#57389632", "title": "When I try to make middle-ware for authentication error is occurred", "body": "<p>This is a simplified version but it works like a charm in my app:</p>\n\n<pre><code>public intercept(\n            req: HttpRequest&lt;any&gt;,\n            next: HttpHandler\n        ): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n\n        req = this.addAuthHeader(req);\n    }\n\n    addAuthHeader(request) {\n         const r: HttpRequest&lt;any&gt; = request.clone({\n             headers: new HttpHeaders({\n                    Authorization: 'Bearer ' + this.authService.getToken()\n             })\n         });\n         return r;\n    }\n</code></pre>\n\n<p>for reference --> <a href=\"https://stackoverflow.com/questions/48683476/how-to-add-multiple-headers-in-angular-5-httpinterceptor?rq=1\">how-to-add-multiple-headers-in-angular-5-httpinterceptor</a> and <a href=\"https://stackoverflow.com/questions/45552677/interceptor-angular-4-3-set-multiple-headers-on-the-cloned-request\">interceptor-angular-4-3-set-multiple-headers-on-the-cloned-request</a></p>\n\n<p>regards</p>\n"}], "owner": {"reputation": 196, "user_id": 7596996, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xy0h6_l01wM/AAAAAAAAAAI/AAAAAAAAALQ/opw5s8lq_B4/photo.jpg?sz=128", "display_name": "Chamin  Thilakarathne", "link": "https://stackoverflow.com/users/7596996/chamin-thilakarathne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565165273, "creation_date": 1565164069, "last_edit_date": 1565164433, "question_id": 57389404, "link": "https://stackoverflow.com/questions/57389404/when-i-try-to-make-middle-ware-for-authentication-error-is-occurred", "title": "When I try to make middle-ware for authentication error is occurred", "body": "<p>I try to hang jwt web token to my outgoing request, I used interceptor approach after the adding interceptor \"ERROR TypeError: Cannot read property 'length' of undefined\" is shown.\nwhen interceptor file is removed app work correctly\n <a href=\"https://i.stack.imgur.com/PJV4U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PJV4U.png\" alt=\"This is my dev console\"></a></p>\n\n<p>this is my intercept class</p>\n\n<p><a href=\"https://i.stack.imgur.com/5Ryam.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Ryam.png\" alt=\"interceptor\"></a></p>\n"}, {"tags": ["angular", "typescript", "angular6"], "answers": [{"tags": [], "owner": {"reputation": 586, "user_id": 9744670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b82ecf640578ce82084f25a57faa68?s=128&d=identicon&r=PG&f=1", "display_name": "Kinjal", "link": "https://stackoverflow.com/users/9744670/kinjal"}, "is_accepted": false, "score": 2, "last_activity_date": 1565163733, "creation_date": 1565163733, "answer_id": 57389312, "question_id": 57389128, "link": "https://stackoverflow.com/questions/57389128/removing-a-dom-element-in-angular-6/57389312#57389312", "title": "Removing a DOM element in angular 6", "body": "<p>If you don't want to remove item from array and just want to remove element then</p>\n\n<p>You have to add <code>#item</code> into tr tag and then you have to change <code>items.remove()</code> to <code>item.remove()</code></p>\n\n<p>Ex:</p>\n\n<pre><code>&lt;tr *ngFor=\"let items of uploaded_files\" #item&gt;\n    &lt;th width=\"90%\"&gt;{{uploaded_files}} &lt;/th&gt;\n    &lt;th class=\"text-center\" width=\"10%\"&gt;\n        &lt;mat-icon (click)=\"item.remove()\"&gt;delete&lt;/mat-icon&gt;\n    &lt;/th&gt;\n&lt;/tr&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7217, "user_id": 293316, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c37e23435362dbc4d65b670585d4b9c?s=128&d=identicon&r=PG", "display_name": "Robus", "link": "https://stackoverflow.com/users/293316/robus"}, "is_accepted": false, "score": 1, "last_activity_date": 1565164165, "last_edit_date": 1565164165, "creation_date": 1565163764, "answer_id": 57389319, "question_id": 57389128, "link": "https://stackoverflow.com/questions/57389128/removing-a-dom-element-in-angular-6/57389319#57389319", "title": "Removing a DOM element in angular 6", "body": "<p>Presumably <code>uploaded_files</code> is an array, and as such does not necessarily have a delete function on its elements.</p>\n\n<p>You could, however, remove elements by index eg</p>\n\n<pre><code>public removeUploadedFile(index: number): void {\n   uploaded_files.splice(index, 1);\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;tr *ngFor=\"let items of uploaded_files; let i = index\"&gt;\n  &lt;th width=\"90%\"&gt;{{uploaded_files}} &lt;/th&gt;\n  &lt;th class=\"text-center\" width=\"10%\"&gt;\n    &lt;mat-icon (click)=\"removeUploadedFile(i)\"&gt;delete&lt;/mat-icon&gt;\n  &lt;/th&gt;\n&lt;/tr&gt;\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10882542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34481599600ddde3a951b93454d49e8c?s=128&d=identicon&r=PG&f=1", "display_name": "Raru Chempazhanthy", "link": "https://stackoverflow.com/users/10882542/raru-chempazhanthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2213, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565164165, "creation_date": 1565163137, "question_id": 57389128, "link": "https://stackoverflow.com/questions/57389128/removing-a-dom-element-in-angular-6", "title": "Removing a DOM element in angular 6", "body": "<p>I want to remove a particular block of HTML tags from DOM onclick.</p>\n\n<pre><code>&lt;tr *ngFor=\"let item of uploader.queue\"&gt;\n  &lt;th width=\"90%\"&gt;{{ item.file.name}}({{item.file.size/1000000}} MB)&lt;/th&gt;\n  &lt;th class=\"text-center\" width=\"10%\"&gt;\n    &lt;mat-icon (click)=\"item.remove()\"&gt;delete&lt;/mat-icon&gt;\n  &lt;/th&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Here .remove() is working properly.</p>\n\n<pre><code>&lt;tr *ngFor=\"let items of uploaded_files\"&gt;\n  &lt;th width=\"90%\"&gt;{{uploaded_files}} &lt;/th&gt;\n  &lt;th class=\"text-center\" width=\"10%\"&gt;\n    &lt;mat-icon (click)=\"items.remove()\"&gt;delete&lt;/mat-icon&gt;\n  &lt;/th&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>Here .remove() is not working properly.\nWhich shows an error as follows :\n_v.context.$implicit.remove is not a function(\u2026)</p>\n"}, {"tags": ["node.js", "typescript", "eslint"], "comments": [{"owner": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "edited": false, "score": 0, "creation_date": 1565166310, "post_id": 57388991, "comment_id": 101262420, "body": "you should use <code>&#39;.&#47;path&#39;</code> to reference your local files (<code>&#39;path&#39;</code> references to node modules and since you are not using such a module you are getting an error)"}, {"owner": {"reputation": 2093, "user_id": 1763258, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ff3c16d057ab1f59f5bc9983ce4d82d3?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1763258/ben"}, "edited": false, "score": 0, "creation_date": 1566080553, "post_id": 57388991, "comment_id": 101544864, "body": "Curious if there is a better way to solve this, and if it&#39;s something new. I just installed it in my dev dependencies since, in my project, I&#39;m only using it in my webpack config."}], "owner": {"reputation": 1877, "user_id": 11169941, "user_type": "registered", "profile_image": "https://graph.facebook.com/2341214042556921/picture?type=large", "display_name": "Joseph Wang", "link": "https://stackoverflow.com/users/11169941/joseph-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 532, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1565162606, "creation_date": 1565162606, "question_id": 57388991, "link": "https://stackoverflow.com/questions/57388991/eslint-yells-that-path-should-be-listed-in-the-projects-dependencies-but-pa", "title": "Eslint yells that &#39;path&#39; should be listed in the project&#39;s dependencies. But `path` is default by node right?", "body": "<p>My eslint keeps yelling at me this error message:</p>\n\n<pre><code>'path' should be listed in the project's dependencies. Run 'npm i -S path' to add iteslint(import/no-extraneous-dependencies)\n</code></pre>\n\n<p>I didn't even have a <code>tsconfig.json</code> file in my project root, why is this happening?</p>\n\n<p><a href=\"https://i.stack.imgur.com/A8MoJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A8MoJ.png\" alt=\"\"></a></p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "edited": false, "score": 0, "creation_date": 1565162461, "post_id": 57388866, "comment_id": 101260635, "body": "<i>First:</i> please ensure that when you send you form you are not submitting it.. it will refresh your from state and maybe you relay on this state for your validation. <i>Second:</i> please add <code>console.log(this.objAppUser)</code> in <code>validate</code> method and send it here please"}, {"owner": {"reputation": 586, "user_id": 9744670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64b82ecf640578ce82084f25a57faa68?s=128&d=identicon&r=PG&f=1", "display_name": "Kinjal", "link": "https://stackoverflow.com/users/9744670/kinjal"}, "edited": false, "score": 0, "creation_date": 1565162635, "post_id": 57388866, "comment_id": 101260703, "body": "You forgot to add <code>[(ngModel)]=&quot;objAppUser.ConfirmPassword&quot;</code> in confirm password field. As you are checking <code>if (this.objAppUser.Password !== this.objAppUser.ConfirmPassword)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 45843, "user_id": 2349407, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/GLI4g.png?s=128&g=1", "display_name": "Vivek Doshi", "link": "https://stackoverflow.com/users/2349407/vivek-doshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565163762, "last_edit_date": 1565163762, "creation_date": 1565162465, "answer_id": 57388955, "question_id": 57388866, "link": "https://stackoverflow.com/questions/57388866/validations-for-password-and-confirm-password/57388955#57388955", "title": "Validations for password and confirm password", "body": "<p>You can use : <strong><a href=\"https://www.npmjs.com/package/ngx-custom-validators\" rel=\"nofollow noreferrer\">ngx-custom-validators</a></strong> , that will make your work too easy ( for all kind of custom validations too )</p>\n\n<p>With this, all we need to do is <code>[equalTo]=\"password\"</code></p>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;form [formGroup]='changePasswordForm' novalidate&gt;\n    &lt;div class=\"ele\"&gt;\n        &lt;label&gt;New Password&lt;/label&gt;\n        &lt;input type=\"password\" ngModel name=\"password\" #password=\"ngModel\" required&gt;\n        &lt;p *ngIf=\"password.errors?.required\"&gt;required error&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"ele\"&gt;\n        &lt;label&gt;Confirm Password&lt;/label&gt;\n        &lt;input type=\"password\" ngModel name=\"certainPassword\" #certainPassword=\"ngModel\" [equalTo]=\"password\"&gt;\n        &lt;p *ngIf=\"certainPassword.errors?.equalTo\"&gt;equalTo error&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong><a href=\"https://stackblitz.com/edit/angular-confirm-password\" rel=\"nofollow noreferrer\">WORKING DEMO</a></strong> ( Reactive + TemplateDriven )</p>\n"}], "owner": {"reputation": 3, "user_id": 11834731, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-43z9GVzjww4/AAAAAAAAAAI/AAAAAAAABCk/vgPmcqo11ac/photo.jpg?sz=128", "display_name": "Keep Watching Madani Channel", "link": "https://stackoverflow.com/users/11834731/keep-watching-madani-channel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565163762, "creation_date": 1565162099, "question_id": 57388866, "link": "https://stackoverflow.com/questions/57388866/validations-for-password-and-confirm-password", "title": "Validations for password and confirm password", "body": "<p>I want my password and confirm password should be compare the value input.\nWhen i input the same value in both password and confirm password, then also it is showing the 'Password does not match' error</p>\n\n<p>Component</p>\n\n<pre><code>validate(): boolean {\n    this.appErrors = [];\n\n    if (this.objAppUser.UserName == '') {\n      this.appErrors.push({ Title: 'User name cannot be blank.' });\n    }\n    if (this.objAppUser.LoginName == '') {\n      this.appErrors.push({ Title: 'Login name cannot be blank.' });\n    }\n    if (this.objAppUser.Password == '') {\n      this.appErrors.push({ Title: 'Password cannot be blank.' });\n    }    \n    if (this.objAppUser.Password !== this.objAppUser.ConfirmPassword) {\n      this.appErrors.push({ Title: 'Password does not match.' });\n    }\n    if (this.objAppUser.UserCategoryId == 0) {\n      this.appErrors.push({ Title: 'UserCategory name cannot be blank.' });\n    }\n\n    if (this.appErrors.length &gt; 0) {\n      return false;\n    }\n    else {\n      return true;\n    }\n  }\n</code></pre>\n\n<p>html</p>\n\n<pre><code>  &lt;div&gt;\n                    &lt;mat-form-field class=\"width-size\"&gt;\n                        &lt;input type=\"password\" matInput [(ngModel)]=\"objAppUser.password\" placeholder=\"Password\" name=\"passwordCtrl\"&gt;\n                    &lt;/mat-form-field&gt;\n                &lt;/div&gt;\n\n                &lt;div&gt;\n                    &lt;mat-form-field class=\"width-size\"&gt;\n                        &lt;input type=\"password\" matInput placeholder=\"Confirm Password\" name=\"confirmpasswordCtrl\"&gt;\n                    &lt;/mat-form-field&gt;\n                &lt;/div&gt;\n\n</code></pre>\n"}, {"tags": ["arrays", "typescript"], "comments": [{"owner": {"reputation": 893, "user_id": 8825698, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596242750435604/picture?type=large", "display_name": "Umaiz Khan", "link": "https://stackoverflow.com/users/8825698/umaiz-khan"}, "edited": false, "score": 0, "creation_date": 1565161570, "post_id": 57388626, "comment_id": 101260196, "body": "I already check this question but they are filtering  simple values in filter . I need to filter it by claim_id."}, {"owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "edited": false, "score": 0, "creation_date": 1565161604, "post_id": 57388626, "comment_id": 101260216, "body": "This is indeed not a duplicate, I&#39;ve reopened it"}, {"owner": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "edited": false, "score": 0, "creation_date": 1565161728, "post_id": 57388626, "comment_id": 101260279, "body": "what have you tried until now?"}, {"owner": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "reply_to_user": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "edited": false, "score": 0, "creation_date": 1565161862, "post_id": 57388626, "comment_id": 101260344, "body": "@PierreDuc Note that the question linked as dup has indeed answers that generalize the approach to allow the selection of a &quot;key&quot; value..."}, {"owner": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "edited": false, "score": 0, "creation_date": 1565161953, "post_id": 57388626, "comment_id": 101260376, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1960473/get-all-unique-values-in-a-javascript-array-remove-duplicates\">Get all unique values in a JavaScript array (remove duplicates)</a>"}, {"owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "reply_to_user": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "edited": false, "score": 0, "creation_date": 1565161967, "post_id": 57388626, "comment_id": 101260387, "body": "@Jota.Toledo I tried to look for them there, couldn&#39;t find it. Maybe you can link an answer in the comments"}, {"owner": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "edited": false, "score": 0, "creation_date": 1565161983, "post_id": 57388626, "comment_id": 101260399, "body": "<a href=\"https://stackoverflow.com/a/57040361/5394220\">stackoverflow.com/a/57040361/5394220</a>"}, {"owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "reply_to_user": {"reputation": 21940, "user_id": 5394220, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2VGk.jpg?s=128&g=1", "display_name": "Jota.Toledo", "link": "https://stackoverflow.com/users/5394220/jota-toledo"}, "edited": false, "score": 0, "creation_date": 1565162441, "post_id": 57388626, "comment_id": 101260625, "body": "@Jota.Toledo although that is an answer, it&#39;s not upvoted a lot, and quite complex for what&#39;s required here"}], "answers": [{"comments": [{"owner": {"reputation": 893, "user_id": 8825698, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596242750435604/picture?type=large", "display_name": "Umaiz Khan", "link": "https://stackoverflow.com/users/8825698/umaiz-khan"}, "edited": false, "score": 0, "creation_date": 1565162680, "post_id": 57388876, "comment_id": 101260723, "body": "Thanks for your answer but I think this code doubled the arrays. Mean i have 13701 arrays after using this code its showing above 20,000 arrays"}, {"owner": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "reply_to_user": {"reputation": 893, "user_id": 8825698, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596242750435604/picture?type=large", "display_name": "Umaiz Khan", "link": "https://stackoverflow.com/users/8825698/umaiz-khan"}, "edited": false, "score": 0, "creation_date": 1565162803, "post_id": 57388876, "comment_id": 101260777, "body": "you should update your question and add the code you applied so it will be as clear as possible what exactly what&#39;s going on"}], "tags": [], "owner": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "is_accepted": false, "score": 0, "last_activity_date": 1565162171, "creation_date": 1565162171, "answer_id": 57388876, "question_id": 57388626, "link": "https://stackoverflow.com/questions/57388626/remove-duplicate-objects-from-object-array/57388876#57388876", "title": "Remove duplicate objects from object array", "body": "<p>To solve this easily let's use this strategy:</p>\n\n<ul>\n<li>Extract values from the array to an object (used as a dictionary)</li>\n<li>Eliminating duplication</li>\n<li>Extract values to a new array</li>\n</ul>\n\n<p>so....</p>\n\n<pre><code>const dic = {}\n\nfor (const item of originalArray) {\n    dic[item.claim_id] = item\n}\n\nconst groupedArray = Object.values(dic)\n</code></pre>\n\n<p>The only question is... where's typescript? we used native JS and managed just fine :)</p>\n"}, {"tags": [], "owner": {"reputation": 57430, "user_id": 3106920, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pO5sC.jpg?s=128&g=1", "display_name": "Poul Kruijt", "link": "https://stackoverflow.com/users/3106920/poul-kruijt"}, "is_accepted": true, "score": 1, "last_activity_date": 1565162779, "last_edit_date": 1565162779, "creation_date": 1565162408, "answer_id": 57388947, "question_id": 57388626, "link": "https://stackoverflow.com/questions/57388626/remove-duplicate-objects-from-object-array/57388947#57388947", "title": "Remove duplicate objects from object array", "body": "<p>You can use a <code>filter</code> and <code>findIndex</code> to find duplicates. If the index does not equal the current item, there is a duplicate. </p>\n\n<p>The performance impact is maximum 1.5x the size of the array:</p>\n\n<pre><code>const unique = data.filter((item, index) =&gt; \n  data.findIndex(({ claim_id }) =&gt; item.claim_id === claim_id) === index\n);\n</code></pre>\n"}], "owner": {"reputation": 893, "user_id": 8825698, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596242750435604/picture?type=large", "display_name": "Umaiz Khan", "link": "https://stackoverflow.com/users/8825698/umaiz-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 57388947, "answer_count": 2, "score": 0, "last_activity_date": 1565162779, "creation_date": 1565161248, "last_edit_date": 1565161531, "question_id": 57388626, "link": "https://stackoverflow.com/questions/57388626/remove-duplicate-objects-from-object-array", "title": "Remove duplicate objects from object array", "body": "<p>I have a list of arrays i need to hide the duplicates of array </p>\n\n<pre><code>   {\n        \"company_name\": \"SERVICE INDUSTRIES LTD.\",\n        \"claim_id\": \"2017\\/04\\/LHRHHDP00015-2018-00702\",         \n    },\n    {\n\n        \"company_name\": \"KARACHI CHAMBER OF COMMERCE &amp; INDUSTRY\",\n        \"claim_id\": \"2018\\/03\\/HOHHDP00013-2019-00098\",\n\n    },\n    {\n        \"company_name\": \"PAKISTAN RED CRESCENT SOCIETY\",\n        \"claim_id\": \"2017\\/04\\/LHRHHDP00015-2018-00702\",\n\n    },\n    {\n        \"company_name\": \"SERVICE INDUSTRIES LTD.\",\n        \"claim_id\": \"2018\\/04\\/LHRHHDP00022-2019-01292\",     \n    },\n    {\n        \"company_name\": \"U MICROFINANCE BANK LTD\",\n        \"claim_id\": \"2017\\/04\\/LHRHHDP00015-2018-00702\",    \n    }\n</code></pre>\n\n<p>This is the example array i need to hide the array which have duplicate claim_id.</p>\n"}, {"tags": ["html", "angular", "typescript"], "comments": [{"owner": {"reputation": 2863, "user_id": 9395772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKP1C.png?s=128&g=1", "display_name": "G&#233;r&#244;me Grignon", "link": "https://stackoverflow.com/users/9395772/g%c3%a9r%c3%b4me-grignon"}, "edited": false, "score": 0, "creation_date": 1565160765, "post_id": 57388437, "comment_id": 101259864, "body": "You didn&#39;t replace the import as stated as MatFormField is still included in your imports. Remove it."}, {"owner": {"reputation": 1, "user_id": 11893802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0167166a73ed99d4b5823ea68701f64?s=128&d=identicon&r=PG&f=1", "display_name": "JaegerAurora", "link": "https://stackoverflow.com/users/11893802/jaegeraurora"}, "reply_to_user": {"reputation": 2863, "user_id": 9395772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GKP1C.png?s=128&g=1", "display_name": "G&#233;r&#244;me Grignon", "link": "https://stackoverflow.com/users/9395772/g%c3%a9r%c3%b4me-grignon"}, "edited": false, "score": 0, "creation_date": 1565161116, "post_id": 57388437, "comment_id": 101260018, "body": "Its in the imports at the top but not in @NgModule. I removed it from the imports at the top but it didnt change anything"}, {"owner": {"reputation": 59546, "user_id": 6294072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wT1Nn.jpg?s=128&g=1", "display_name": "AJT82", "link": "https://stackoverflow.com/users/6294072/ajt82"}, "edited": false, "score": 0, "creation_date": 1565199774, "post_id": 57388437, "comment_id": 101281084, "body": "Your code works perfectly, and shouldn&#39;t even have <code>MatFormFieldModule</code> imported. Please recreate the issue by forking this stackblitz: <a href=\"https://stackblitz.com/edit/angular-6wrd3c?file=app/form-field-overview-example.ts\" rel=\"nofollow noreferrer\">stackblitz.com/edit/angular-6wrd3c?file=app/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11893802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0167166a73ed99d4b5823ea68701f64?s=128&d=identicon&r=PG&f=1", "display_name": "JaegerAurora", "link": "https://stackoverflow.com/users/11893802/jaegeraurora"}, "edited": false, "score": 0, "creation_date": 1565244175, "post_id": 57388437, "comment_id": 101293083, "body": "I managed to fix the issue by reinstalling material in the projects directory"}], "answers": [{"tags": [], "owner": {"reputation": 4033, "user_id": 4062197, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-A6knQfVHgGE/AAAAAAAAAAI/AAAAAAAAAGA/QoP7ZbSy4uk/photo.jpg?sz=128", "display_name": "ymz", "link": "https://stackoverflow.com/users/4062197/ymz"}, "is_accepted": false, "score": 0, "last_activity_date": 1565161824, "creation_date": 1565161824, "answer_id": 57388790, "question_id": 57388437, "link": "https://stackoverflow.com/questions/57388437/why-is-my-code-for-mat-form-field-not-working/57388790#57388790", "title": "Why is my code for &#39;mat-form-field&#39; not working?", "body": "<p><code>emailFormControl</code> should be define with <code>ViewChild</code> annotation, like this:</p>\n\n<pre><code>import { Component, ElementRef, ViewChild } from '@angular/core'\n\n...\n\n@ViewChild('emailFormControl') emailFormControl: ElementRef  \n</code></pre>\n\n<p>In short, <code>ViewChild</code> allows us to query elements (from the docs: <a href=\"https://angular.io/api/core/ViewChild\" rel=\"nofollow noreferrer\">https://angular.io/api/core/ViewChild</a>)</p>\n\n<p>In this example we used the query target our <code>emailFormControl</code> an get a valid reference</p>\n"}], "owner": {"reputation": 1, "user_id": 11893802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0167166a73ed99d4b5823ea68701f64?s=128&d=identicon&r=PG&f=1", "display_name": "JaegerAurora", "link": "https://stackoverflow.com/users/11893802/jaegeraurora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2077, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565161824, "creation_date": 1565160492, "question_id": 57388437, "link": "https://stackoverflow.com/questions/57388437/why-is-my-code-for-mat-form-field-not-working", "title": "Why is my code for &#39;mat-form-field&#39; not working?", "body": "<p>I'm totaly new to angular, and i was practicing using material and adding form fields. I followed all the guides, downloaded all the packages and my code is just copy-pased from a guide but it's still not displaying on my browser.</p>\n\n<p>My console initialy showed </p>\n\n<p>\"Unexpected directive 'MatFormField' imported by the module 'AppModule'. Please add a @NgModule annotation.\" </p>\n\n<p>and after googling it I was told to replace it with \"MatFormFieldModule\" but after i did i got this error</p>\n\n<p>\"NullInjectorError: StaticInjectorError(AppModule)[CdkObserveContent -> ElementRef]: \n  StaticInjectorError(Platform: core)[CdkObserveContent -> ElementRef]: \n    NullInjectorError: No provider for ElementRef!\"</p>\n\n<p>My code:</p>\n\n<p><b>app.component.html</b></p>\n\n<pre><code>    &lt;p&gt;works&lt;/p&gt;\n    &lt;form class = \"tp-form\"&gt;\n      &lt;mat-form-field class = \"tp-full-width\"&gt;\n         &lt;input matInput placeholder = \"Favorite Food\" value = \"Pasta\"&gt;\n      &lt;/mat-form-field&gt;\n      &lt;mat-form-field class = \"tp-full-width\"&gt;\n         &lt;textarea matInput placeholder = \"Enter your comment\"&gt;&lt;/textarea&gt;\n      &lt;/mat-form-field&gt;\n      &lt;mat-form-field class = \"tp-full-width\"&gt;\n         &lt;input matInput placeholder = \"Email\" [formControl] = \n    \"emailFormControl\"&gt;\n         &lt;mat-error *ngIf = \"emailFormControl.hasError('email') \n            &amp;&amp; !emailFormControl.hasError('required')\"&gt;\n            Please enter a valid email address\n         &lt;/mat-error&gt;\n         &lt;mat-error *ngIf = \"emailFormControl.hasError('required')\"&gt;\n            Email is &lt;strong&gt;required&lt;/strong&gt;\n         &lt;/mat-error&gt;\n      &lt;/mat-form-field&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p><b>app.module.ts</b></p>\n\n<pre><code>    import { BrowserModule } from '@angular/platform-browser';\n    import { NgModule } from '@angular/core';\n\n    import { AppRoutingModule } from './app-routing.module';\n    import { AppComponent } from './app.component';\n    import { CourseComponent } from './course/course.component';\n\n    import {BrowserAnimationsModule} from '@angular/platform- \n    browser/animations';\n    import {MatInputModule, MatFormField, MatFormFieldModule} from \n    '@angular/material'\n    import {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\n    import { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\n\n    const modules =  [\n      BrowserAnimationsModule,\n          MatInputModule,\n          FormsModule,\n          ReactiveFormsModule,\n          MatFormFieldModule\n\n    ]\n\n    @NgModule({\n      declarations: [\n        AppComponent,\n        CourseComponent\n      ],\n      imports: [\n        BrowserModule,\n        AppRoutingModule,\n          ...modules\n      ],\n      exports:[\n        ...modules\n      ],\n      providers: [],\n      bootstrap: [AppComponent]\n      ,\n      schemas: [CUSTOM_ELEMENTS_SCHEMA]\n    })\n    export class AppModule { }\n</code></pre>\n\n<p><b>app.component.ts</b></p>\n\n<pre><code>    import { Component } from '@angular/core';\n    import { FormControl } from \"@angular/forms\";\n    import { Validators } from '@angular/forms';\n\n    @Component({\n      selector: 'app-root',\n      templateUrl: './app.component.html',\n      styleUrls: ['./app.component.css']\n    })\n    export class AppComponent {\n      title = 'materialApp';\n       emailFormControl = new FormControl('', [\n          Validators.required,\n          Validators.email,\n      ]);\n    }\n</code></pre>\n\n<p>Currently my browser is only showing \"works\".</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 1, "creation_date": 1565159399, "post_id": 57388181, "comment_id": 101259277, "body": "You&#39;re destructring in object where as it should be <code>[ ...ClassName.urlA, ...ClassName.urlB ]</code>"}, {"owner": {"reputation": 4016, "user_id": 2202748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9tSQE.jpg?s=128&g=1", "display_name": "Joel Joseph", "link": "https://stackoverflow.com/users/2202748/joel-joseph"}, "edited": false, "score": 0, "creation_date": 1565159573, "post_id": 57388181, "comment_id": 101259344, "body": "<code>public static urls = [ ...this.urlA, ...this.urlB ];</code> since you are using it in same class and if used in another class then <code>public static urls = [ ...ClassName.urlA, ...ClassName.urlB ];</code>"}], "answers": [{"tags": [], "owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "is_accepted": true, "score": 2, "last_activity_date": 1565160492, "last_edit_date": 1565160492, "creation_date": 1565159568, "answer_id": 57388234, "question_id": 57388181, "link": "https://stackoverflow.com/questions/57388181/merging-two-objects-and-then-filtering-not-working/57388234#57388234", "title": "Merging two objects and then filtering not working", "body": "<p>Filter is a method available on array's not objects, spread into an array not into object</p>\n\n<p>change this </p>\n\n<pre><code>public static urls = { ...ClassName.urlA, ...ClassName.urlB };\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>public static urls = [ ...ClassName.urlA, ...ClassName.urlB ];\n</code></pre>\n"}], "owner": {"reputation": 777, "user_id": 9042256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/842cbd80d238af6bf9464e6ee58d8360?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh", "link": "https://stackoverflow.com/users/9042256/ramesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57388234, "answer_count": 1, "score": 2, "last_activity_date": 1565160492, "creation_date": 1565159290, "last_edit_date": 1565159386, "question_id": 57388181, "link": "https://stackoverflow.com/questions/57388181/merging-two-objects-and-then-filtering-not-working", "title": "Merging two objects and then filtering not working", "body": "<p>I have two objects as follows. Calling filter method works on individual objects but on a merged object, it is not working...</p>\n\n<pre><code>export class ClassName {\n  public static urlsA = [\n    { url: '/url1', roles: ['Admin', 'User'] } ,\n    { url: '/url2', roles: ['Admin', 'Sale'] } ,\n  ];\n\n  public static urlsB = [\n    { url: '/url11', roles: ['Admin', 'User'] } ,\n    { url: '/url22', roles: ['Admin', 'Sale'] } ,\n  ];\n\n   public static urls = { ...ClassName.urlA, ...ClassName.urlB };\n\n}\n</code></pre>\n\n<p>I am using the above code in another class like below.</p>\n\n<pre><code>  const a = ClassName.urls.filter(f =&gt; f.url === 'requiredURL')[0]; // throws Classname.urls.filter is not a function\n  const a = ClassName.urlsA.filter(f =&gt; f.url === 'requiredURL')[0]; // Working...\n  console.error(a);\n  console.error(ClassName.urls); // showing in console.\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "mongoose", "ecmascript-6", "nestjs"], "comments": [{"owner": {"reputation": 598, "user_id": 4211588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OoK3N.jpg?s=128&g=1", "display_name": "nivendha", "link": "https://stackoverflow.com/users/4211588/nivendha"}, "edited": false, "score": 0, "creation_date": 1565159084, "post_id": 57388095, "comment_id": 101259159, "body": "Has it installed <code>mongoose</code> in the <code>node_modules</code>? was there any error in npm installation?"}, {"owner": {"reputation": 14080, "user_id": 1253156, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/EqBbg.png?s=128&g=1", "display_name": "Patrick Hund", "link": "https://stackoverflow.com/users/1253156/patrick-hund"}, "edited": false, "score": 1, "creation_date": 1565159130, "post_id": 57388095, "comment_id": 101259174, "body": "To be clear, when you replace the first line of your code example with <code>const mongoose = require(&#39;mongoose&#39;);</code> it works? Are you executing this code with Node.js?"}, {"owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "reply_to_user": {"reputation": 598, "user_id": 4211588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OoK3N.jpg?s=128&g=1", "display_name": "nivendha", "link": "https://stackoverflow.com/users/4211588/nivendha"}, "edited": false, "score": 0, "creation_date": 1565159136, "post_id": 57388095, "comment_id": 101259177, "body": "@nivendha Yea, I have it in my package.json already and it&#39;s also existing in the node_modules folder"}, {"owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "reply_to_user": {"reputation": 14080, "user_id": 1253156, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/EqBbg.png?s=128&g=1", "display_name": "Patrick Hund", "link": "https://stackoverflow.com/users/1253156/patrick-hund"}, "edited": false, "score": 0, "creation_date": 1565159168, "post_id": 57388095, "comment_id": 101259193, "body": "@PatrickHund Yes and yes, and I&#39;m using NestJS as a framework"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1565159574, "post_id": 57388095, "comment_id": 101259345, "body": "Import syntax mandates the file extension so <code>import mongoose from &#39;mongoose.js&#39;</code>. Also, you cannot mix and match import and require syntax. Commonjs (nodejs) modules <b>must</b> use <code>require</code> and cannot use <code>import</code>. ES6 modules <b>must</b> use <code>import</code> and cannot user <code>require</code>. There is a possibility of writing modules that export both but not all do (in fact most don&#39;t)"}, {"owner": {"reputation": 1617, "user_id": 2870548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vHuKW.jpg?s=128&g=1", "display_name": "Binit Ghetiya", "link": "https://stackoverflow.com/users/2870548/binit-ghetiya"}, "edited": false, "score": 2, "creation_date": 1565159647, "post_id": 57388095, "comment_id": 101259368, "body": "<code>import * as mongoose from &#39;mongoose&#39;;</code> try this"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1565159663, "post_id": 57388095, "comment_id": 101259373, "body": "The reason for this is that the ES standards committee, being mostly browser developers, have defined the behavior of ES6 module loading that is not compatible with nodejs old module system"}, {"owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "reply_to_user": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1565160137, "post_id": 57388095, "comment_id": 101259575, "body": "@slebetman <code>import mongoose from &#39;mongoose.js&#39;</code> doesn&#39;t seem to work."}, {"owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "reply_to_user": {"reputation": 1617, "user_id": 2870548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vHuKW.jpg?s=128&g=1", "display_name": "Binit Ghetiya", "link": "https://stackoverflow.com/users/2870548/binit-ghetiya"}, "edited": false, "score": 0, "creation_date": 1565160222, "post_id": 57388095, "comment_id": 101259617, "body": "@BinitGhetiya <code>import * as mongoose from &#39;mongoose&#39;;</code> works amazingly! I think I also found the problem upon using this. It seems like Mongoose does not have a default export as reported by VS Code after installing <code>@types&#47;mongoose</code>, that being the case, doing <code>import mongoose</code> explicitly will not work."}, {"owner": {"reputation": 84, "user_id": 6907784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MYEpn.jpg?s=128&g=1", "display_name": "Hamid Raza Noori", "link": "https://stackoverflow.com/users/6907784/hamid-raza-noori"}, "edited": false, "score": 0, "creation_date": 1565160245, "post_id": 57388095, "comment_id": 101259625, "body": "Are you using babel js for ES6"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 84, "user_id": 6907784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MYEpn.jpg?s=128&g=1", "display_name": "Hamid Raza Noori", "link": "https://stackoverflow.com/users/6907784/hamid-raza-noori"}, "edited": false, "score": 0, "creation_date": 1565160392, "post_id": 57388095, "comment_id": 101259698, "body": "@HamidRazaNoori Either that or is a Typescript compiler thing"}, {"owner": {"reputation": 1617, "user_id": 2870548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vHuKW.jpg?s=128&g=1", "display_name": "Binit Ghetiya", "link": "https://stackoverflow.com/users/2870548/binit-ghetiya"}, "edited": false, "score": 0, "creation_date": 1565163466, "post_id": 57388095, "comment_id": 101261104, "body": "@AbanaClara I have added answer please mark it correct Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1565160857, "post_id": 57388493, "comment_id": 101259907, "body": "Note that this is a Typescript specific syntax and breaks the ES6 standards. For now it works but in the future when Typescript re-aligns with ES6 this may break (or it may not, depends on what Microsoft wants to do with the language they invented). See: <a href=\"https://stackoverflow.com/questions/29596714/new-es6-syntax-for-importing-commonjs-amd-modules-i-e-import-foo-require\" title=\"new es6 syntax for importing commonjs amd modules i e import foo require\">stackoverflow.com/questions/29596714/&hellip;</a>"}], "tags": [], "owner": {"reputation": 121, "user_id": 8202576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7be7bcb4c6aa4ceff5cbb2db33f014f9?s=128&d=identicon&r=PG", "display_name": "huzaifamansoor", "link": "https://stackoverflow.com/users/8202576/huzaifamansoor"}, "is_accepted": false, "score": 0, "last_activity_date": 1565160693, "creation_date": 1565160693, "answer_id": 57388493, "question_id": 57388095, "link": "https://stackoverflow.com/questions/57388095/mongoose-is-undefined-when-using-import-syntax-and-not-when-using-require/57388493#57388493", "title": "Mongoose is undefined when using import syntax and not when using require", "body": "<p><strong>Just change the import as follows:</strong></p>\n\n<pre><code>import * as mongoose from 'mongoose';\n</code></pre>\n\n<p><strong>Here is an example:</strong></p>\n\n<pre><code>import * as mongoose from 'mongoose';\n\nexport class MyModule {\n\n   constructor(){\n       //do\n   }\n\n   create(str){\n      mongoose.connect(str);\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "is_accepted": false, "score": 1, "last_activity_date": 1565164399, "last_edit_date": 1565164399, "creation_date": 1565162593, "answer_id": 57388987, "question_id": 57388095, "link": "https://stackoverflow.com/questions/57388095/mongoose-is-undefined-when-using-import-syntax-and-not-when-using-require/57388987#57388987", "title": "Mongoose is undefined when using import syntax and not when using require", "body": "<p>After installing <code>@types/mongoose</code>, VS Code reports that mongoose does not have a default export (all being named exports) that being the case, doing</p>\n\n<pre><code>import mongoose from `mongoose`\n</code></pre>\n\n<p>will not work. This also explains why getting individual properties instead works:</p>\n\n<pre><code>import { connect } from `mongoose`\n</code></pre>\n\n<p>As a workaround, thanks to @Binit Ghetiya who first mentioned it in this thread, you should do this instead:</p>\n\n<pre><code>import * as mongoose from `mongoose`\n</code></pre>\n\n<p>Which compiles every named export from Mongoose into the variable <code>mongoose</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "edited": false, "score": 0, "creation_date": 1565164324, "post_id": 57389224, "comment_id": 101261494, "body": "Unfortunately this does not work as an acceptable answer to my problem (those useful for future readers). I have personally written an answer with a decent explanation and mention your handle instead."}, {"owner": {"reputation": 1617, "user_id": 2870548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vHuKW.jpg?s=128&g=1", "display_name": "Binit Ghetiya", "link": "https://stackoverflow.com/users/2870548/binit-ghetiya"}, "reply_to_user": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "edited": false, "score": 0, "creation_date": 1565170317, "post_id": 57389224, "comment_id": 101264622, "body": "@AbanaClara No worries :), hope you got your answer."}], "tags": [], "owner": {"reputation": 1617, "user_id": 2870548, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vHuKW.jpg?s=128&g=1", "display_name": "Binit Ghetiya", "link": "https://stackoverflow.com/users/2870548/binit-ghetiya"}, "is_accepted": true, "score": 4, "last_activity_date": 1565163429, "last_edit_date": 1592644375, "creation_date": 1565163429, "answer_id": 57389224, "question_id": 57388095, "link": "https://stackoverflow.com/questions/57388095/mongoose-is-undefined-when-using-import-syntax-and-not-when-using-require/57389224#57389224", "title": "Mongoose is undefined when using import syntax and not when using require", "body": "<blockquote>\n<p>There are total 2 syntex we can use here.</p>\n</blockquote>\n<h1>ES15 (NodeJS)</h1>\n<pre><code>const mongoose = require('mongoose');\n</code></pre>\n<p>then use <strong>mongoose.connect</strong></p>\n<h1>ES16 (import/export)</h1>\n<pre><code>import * as mongoose from `mongoose`;\n</code></pre>\n<p>then use <strong>mongoose.connect</strong></p>\n<h3>or</h3>\n<pre><code>import {connect} from `mongoose`;\n</code></pre>\n<p>then use <strong>connect</strong> directly</p>\n"}, {"comments": [{"owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "edited": false, "score": 0, "creation_date": 1565328137, "post_id": 57419113, "comment_id": 101326253, "body": "Wow this is definitely good info. I wish this answer came when this post was hot."}], "tags": [], "owner": {"reputation": 563, "user_id": 4447651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zfkr8.jpg?s=128&g=1", "display_name": "nerdy beast", "link": "https://stackoverflow.com/users/4447651/nerdy-beast"}, "is_accepted": false, "score": 2, "last_activity_date": 1565290715, "creation_date": 1565290715, "answer_id": 57419113, "question_id": 57388095, "link": "https://stackoverflow.com/questions/57388095/mongoose-is-undefined-when-using-import-syntax-and-not-when-using-require/57419113#57419113", "title": "Mongoose is undefined when using import syntax and not when using require", "body": "<p>In your <code>tsconfig.json</code> file, you can set</p>\n\n<pre><code>\"allowSyntheticDefaultImports\": true,\n\"esModuleInterop\": true\n</code></pre>\n\n<p>This will allow you to use the syntax</p>\n\n<pre><code>import mongoose from 'mongoose';\n</code></pre>\n"}], "owner": {"reputation": 3554, "user_id": 7325182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Clk0X.png?s=128&g=1", "display_name": "Abana Clara", "link": "https://stackoverflow.com/users/7325182/abana-clara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "accepted_answer_id": 57389224, "answer_count": 4, "score": 4, "last_activity_date": 1565290715, "creation_date": 1565158866, "last_edit_date": 1565159931, "question_id": 57388095, "link": "https://stackoverflow.com/questions/57388095/mongoose-is-undefined-when-using-import-syntax-and-not-when-using-require", "title": "Mongoose is undefined when using import syntax and not when using require", "body": "<p>So I have my module written as such</p>\n\n<pre><code>import mongoose from 'mongoose';\n\nexport class MyModule {\n   constructor(){\n       //do\n   }\n\n   create(str){\n      mongoose.connect(str); //cannot find property 'connect' of undefined\n   }\n\n}\n</code></pre>\n\n<p>When using the import syntax, I get the <code>cannot find property 'connect' of undefined</code> error; it works as intended when using require.</p>\n\n<p>Weirdly enough, importing individual properties via import syntax works as intended,</p>\n\n<pre><code>import { connect } from 'mongoose'\n</code></pre>\n\n<p>but I need access to the entire ORM for some other reasons.</p>\n\n<p>Why is it like so? Am I doing something wrong? To be fair, I don't have much experience in ES6 module system, TypeScript and Node.js so I might be missing something here.</p>\n\n<hr>\n\n<p>I'm running this on Node.js with NestJS, on a typescript file.</p>\n"}, {"tags": ["javascript", "typescript", "lazy-loading", "polymer-3.x", "iron-list"], "comments": [{"owner": {"reputation": 712, "user_id": 6778270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZiGmk.jpg?s=128&g=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/6778270/koga"}, "edited": false, "score": 0, "creation_date": 1565159570, "post_id": 57387583, "comment_id": 101259342, "body": "Have you tried wrapping iron-list from iron-scroll-threshold?  &lt;iron-scroll-threshold id=&quot;scrollTheshold&quot;  lower-threshold=&quot;200&quot; on-lower-threshold=&quot;${this._loadData()}&quot;&gt;  &lt;iron-list .items=${this.items} as=&quot;item&quot; scroll-target=&quot;scrollTheshold&quot;&gt;      &lt;template&gt;            &lt;div&gt;content here.....&lt;/div&gt;       &lt;/template&gt;   &lt;/iron-list&gt;   &lt;/iron-scroll-threshold&gt;"}, {"owner": {"reputation": 168, "user_id": 2689369, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/D9QpN.jpg?s=128&g=1", "display_name": "DRK", "link": "https://stackoverflow.com/users/2689369/drk"}, "reply_to_user": {"reputation": 712, "user_id": 6778270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZiGmk.jpg?s=128&g=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/6778270/koga"}, "edited": false, "score": 0, "creation_date": 1565160058, "post_id": 57387583, "comment_id": 101259532, "body": "@Priyalal Koggalage Yes I checked above scenario also. But not working"}, {"owner": {"reputation": 712, "user_id": 6778270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZiGmk.jpg?s=128&g=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/6778270/koga"}, "edited": false, "score": 0, "creation_date": 1565161071, "post_id": 57387583, "comment_id": 101260000, "body": "Can you please try calling your function as on-lower-threshold=&quot;_loadData()&quot; and check whether it hits? And is your items populates to the list? Is your list element reaching the given lower threshold value?"}, {"owner": {"reputation": 168, "user_id": 2689369, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/D9QpN.jpg?s=128&g=1", "display_name": "DRK", "link": "https://stackoverflow.com/users/2689369/drk"}, "reply_to_user": {"reputation": 712, "user_id": 6778270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZiGmk.jpg?s=128&g=1", "display_name": "Koga", "link": "https://stackoverflow.com/users/6778270/koga"}, "edited": false, "score": 0, "creation_date": 1565162715, "post_id": 57387583, "comment_id": 101260738, "body": "on-lower-threshold=&quot;_loadData()&quot;  in this way function not triggered"}, {"owner": {"reputation": 2962, "user_id": 5347610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hYd0a.jpg?s=128&g=1", "display_name": "HakanC", "link": "https://stackoverflow.com/users/5347610/hakanc"}, "edited": false, "score": 0, "creation_date": 1565173222, "post_id": 57387583, "comment_id": 101266212, "body": "@DRK  the usage in javascript is : <code>on-lower-threshold=&quot;_loadData&quot; </code> instead of  <code>on-lower-threshold=&quot;_loadData()&quot; </code>"}, {"owner": {"reputation": 168, "user_id": 2689369, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/D9QpN.jpg?s=128&g=1", "display_name": "DRK", "link": "https://stackoverflow.com/users/2689369/drk"}, "reply_to_user": {"reputation": 2962, "user_id": 5347610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hYd0a.jpg?s=128&g=1", "display_name": "HakanC", "link": "https://stackoverflow.com/users/5347610/hakanc"}, "edited": false, "score": 0, "creation_date": 1565173908, "post_id": 57387583, "comment_id": 101266584, "body": "@HakanC yes but I am using typescipt, How to use it in typescript?"}, {"owner": {"reputation": 470, "user_id": 6752039, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/1qK2B.jpg?s=128&g=1", "display_name": "shabarinath", "link": "https://stackoverflow.com/users/6752039/shabarinath"}, "edited": false, "score": 1, "creation_date": 1565699929, "post_id": 57387583, "comment_id": 101427578, "body": "try arrow function:  on-lower-threshold=&quot;${() =&gt; this._loadData()}&quot;"}], "owner": {"reputation": 168, "user_id": 2689369, "user_type": "registered", "accept_rate": 10, "profile_image": "https://i.stack.imgur.com/D9QpN.jpg?s=128&g=1", "display_name": "DRK", "link": "https://stackoverflow.com/users/2689369/drk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565156212, "creation_date": 1565156212, "question_id": 57387583, "link": "https://stackoverflow.com/questions/57387583/how-to-implement-iron-list-lazy-loading-with-typescript", "title": "How to implement iron-list lazy-loading with typescript?", "body": "<p>I want to implement lazy-loading with iron-list. I am using typescript for my application. I found theshold example. But it is not working with typescript. The event is not triggered when scroll down. It is triggered when click on list item. How to implement when scrolling down?. My iron-list is some part of the page so when scroll down to end of the list I want to add more result from server</p>\n\n<pre><code>&lt;iron-list .items=${this.items} as=\"item\" scroll-target=\"scrollTheshold\"&gt;\n     &lt;template&gt;\n           &lt;div&gt;content here.....&lt;/div&gt;\n      &lt;/template&gt;\n  &lt;/iron-list&gt;\n&lt;iron-scroll-threshold id=\"scrollTheshold\"  lower-threshold=\"200\" on-lower-threshold=\"${this._loadData()}\"&gt;\n  &lt;/iron-scroll-threshold&gt;\n</code></pre>\n"}, {"tags": ["angular", "typescript", "rxjs", "angular7", "rxjs6"], "answers": [{"tags": [], "owner": {"reputation": 1382, "user_id": 5485675, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156060018765161/picture?type=large", "display_name": "Eliran Eliassy", "link": "https://stackoverflow.com/users/5485675/eliran-eliassy"}, "is_accepted": false, "score": -1, "last_activity_date": 1565157488, "creation_date": 1565157488, "answer_id": 57387801, "question_id": 57387352, "link": "https://stackoverflow.com/questions/57387352/can-i-use-distinctuntilkeychanged-for-removing-duplicate-objects/57387801#57387801", "title": "Can i use distinctUntilKeyChanged for removing duplicate objects?", "body": "<p><code>distinctUntilChanged</code> operator will ignore new results from the stream which are exactly the same, here u have a stream with only one result on it which is the array of users.</p>\n\n<p>What you should do is use the <code>map</code> operator and use arrays <code>filter</code> to remove duplicates from your array.</p>\n\n<pre><code>this.UserService.getusers().pipe(\n   map((users) =&gt; users.filter((v,i) =&gt; users.indexOf(v) === i))\n   .subscribe(console.log);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3272, "user_id": 4269187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yhb5z.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/4269187/carsten"}, "edited": false, "score": 1, "creation_date": 1565158337, "post_id": 57387890, "comment_id": 101258885, "body": "Do you realise your answer is incomplete? The result of the distinct pipe is single objects. Not an array."}, {"owner": {"reputation": 23, "user_id": 10379165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pbVOElJK8G0/AAAAAAAAAAI/AAAAAAAAAAw/nTIUjwAy46A/photo.jpg?sz=128", "display_name": "Educ Dev Team", "link": "https://stackoverflow.com/users/10379165/educ-dev-team"}, "edited": false, "score": 0, "creation_date": 1565160759, "post_id": 57387890, "comment_id": 101259863, "body": "i got your point @nash11, can i directly use the returned responce in component by the way it came from service? if can help , it ill be nice"}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 3272, "user_id": 4269187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yhb5z.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/4269187/carsten"}, "edited": false, "score": 0, "creation_date": 1565161459, "post_id": 57387890, "comment_id": 101260153, "body": "@Carsten - My bad, he mentioned in his question that he was getting an array as his output so I assumed was doing that. I have updated my answer"}, {"owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "reply_to_user": {"reputation": 23, "user_id": 10379165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pbVOElJK8G0/AAAAAAAAAAI/AAAAAAAAAAw/nTIUjwAy46A/photo.jpg?sz=128", "display_name": "Educ Dev Team", "link": "https://stackoverflow.com/users/10379165/educ-dev-team"}, "edited": false, "score": 0, "creation_date": 1565161516, "post_id": 57387890, "comment_id": 101260173, "body": "@EducDevTeam - check out the updated answer to see how to get the output as an array."}, {"owner": {"reputation": 23, "user_id": 10379165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pbVOElJK8G0/AAAAAAAAAAI/AAAAAAAAAAw/nTIUjwAy46A/photo.jpg?sz=128", "display_name": "Educ Dev Team", "link": "https://stackoverflow.com/users/10379165/educ-dev-team"}, "edited": false, "score": 0, "creation_date": 1565161779, "post_id": 57387890, "comment_id": 101260307, "body": "@nash11, got the answer as an array but the array contains duplicate name, may be my bad"}, {"owner": {"reputation": 3272, "user_id": 4269187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yhb5z.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/4269187/carsten"}, "reply_to_user": {"reputation": 23, "user_id": 10379165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pbVOElJK8G0/AAAAAAAAAAI/AAAAAAAAAAw/nTIUjwAy46A/photo.jpg?sz=128", "display_name": "Educ Dev Team", "link": "https://stackoverflow.com/users/10379165/educ-dev-team"}, "edited": false, "score": 0, "creation_date": 1565167671, "post_id": 57387890, "comment_id": 101263175, "body": "@EducDevTeam this answer is correct. Minimal test results in what you want. (from(this.test).pipe(distinct(a =&gt; a.name), toArray()).subscribe(console.log);) (this.test being your array)."}, {"owner": {"reputation": 23, "user_id": 10379165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pbVOElJK8G0/AAAAAAAAAAI/AAAAAAAAAAw/nTIUjwAy46A/photo.jpg?sz=128", "display_name": "Educ Dev Team", "link": "https://stackoverflow.com/users/10379165/educ-dev-team"}, "reply_to_user": {"reputation": 3272, "user_id": 4269187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yhb5z.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/4269187/carsten"}, "edited": false, "score": 0, "creation_date": 1565176750, "post_id": 57387890, "comment_id": 101268165, "body": "@Carsten, i want avoid the duplicates in the result but am getting the same result as it come from Api , Sorry my question is about &quot;remove objects that are having same name&quot;"}, {"owner": {"reputation": 3272, "user_id": 4269187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yhb5z.jpg?s=128&g=1", "display_name": "Carsten", "link": "https://stackoverflow.com/users/4269187/carsten"}, "reply_to_user": {"reputation": 23, "user_id": 10379165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pbVOElJK8G0/AAAAAAAAAAI/AAAAAAAAAAw/nTIUjwAy46A/photo.jpg?sz=128", "display_name": "Educ Dev Team", "link": "https://stackoverflow.com/users/10379165/educ-dev-team"}, "edited": false, "score": 0, "creation_date": 1565177590, "post_id": 57387890, "comment_id": 101268659, "body": "@EducDevTeam Then you&#39;re doing something wrong.. The answer is correct."}], "tags": [], "owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "is_accepted": true, "score": 2, "last_activity_date": 1565161035, "last_edit_date": 1565161035, "creation_date": 1565157954, "answer_id": 57387890, "question_id": 57387352, "link": "https://stackoverflow.com/questions/57387352/can-i-use-distinctuntilkeychanged-for-removing-duplicate-objects/57387890#57387890", "title": "Can i use distinctUntilKeyChanged for removing duplicate objects?", "body": "<p>Your idea of how <code>distinctUntilKeyChanged</code> and <code>distinctUntilChanged</code> works is incorrect. As per the docs</p>\n\n<blockquote>\n  <ul>\n  <li><code>distinctUntilKeyChanged</code> only emits when the specified key value has changed. (Source: <a href=\"https://www.learnrxjs.io/operators/filtering/distinctuntilkeychanged.html\" rel=\"nofollow noreferrer\">docs</a>)</li>\n  <li><code>distinctUntilChanged</code> only emits when the current value is different than the last. (Source: <a href=\"https://www.learnrxjs.io/operators/filtering/distinctuntilchanged.html\" rel=\"nofollow noreferrer\">docs</a>)</li>\n  </ul>\n</blockquote>\n\n<p>Since in each object the <code>name</code> changes from the last object, it will emit each time. In your case, <code>distinctUntilKeyChanged</code> or <code>distinctUntilChanged</code> will only work if your \"distinct\" items are in order like below</p>\n\n<pre><code>[\n  { id: 3, name: \"Ellaware\", email: \"abhi@gmail.com\", email_verified_at: null, type: \"user\" },\n  { id: 2, name: \"alshoja\", email: \"alshoja@gmail.com\", email_verified_at: null, type: \"admin\" },\n  { id: 17, name: \"alshoja\", email: \"c@g.com\", email_verified_at: null, type: \"user\" }\n]\n</code></pre>\n\n<p>You can use <code>distinct</code> instead</p>\n\n<pre><code>import { distinct, toArray } from 'rxjs/operators';\n\npublic Duchanged() {\n  this.UserService.getusers()\n  .pipe(\n    distinct(user =&gt; user.name),\n    toArray()\n  )\n  .subscribe(console.log);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11737623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bIiooasKPp0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf1GYOdIUUeWtEUDcN8dczMChNKUA/photo.jpg?sz=128", "display_name": "Leela", "link": "https://stackoverflow.com/users/11737623/leela"}, "is_accepted": false, "score": -1, "last_activity_date": 1565158161, "creation_date": 1565158161, "answer_id": 57387944, "question_id": 57387352, "link": "https://stackoverflow.com/questions/57387352/can-i-use-distinctuntilkeychanged-for-removing-duplicate-objects/57387944#57387944", "title": "Can i use distinctUntilKeyChanged for removing duplicate objects?", "body": "<pre><code>distinctUntilChanged -&gt; It will check only current and prev object.Before passing the JSON ,You should sort based on name then use distinctUntilChanged();\nthe result of this.UserService.getusers() should be like this:\n[\n{id: 2, name: \"alshoja\", email: \"alshoja@gmail.com\", email_verified_at: null, type: \"admin\"},\n{id: 17, name: \"alshoja\", email: \"c@g.com\", email_verified_at: null, type: \"user\"},\n{id: 3, name: \"Ellaware\", email: \"abhi@gmail.com\", email_verified_at: null, type: \"user\"}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10379165, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pbVOElJK8G0/AAAAAAAAAAI/AAAAAAAAAAw/nTIUjwAy46A/photo.jpg?sz=128", "display_name": "Educ Dev Team", "link": "https://stackoverflow.com/users/10379165/educ-dev-team"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 57387890, "answer_count": 3, "score": 2, "last_activity_date": 1565161035, "creation_date": 1565154831, "last_edit_date": 1565155729, "question_id": 57387352, "link": "https://stackoverflow.com/questions/57387352/can-i-use-distinctuntilkeychanged-for-removing-duplicate-objects", "title": "Can i use distinctUntilKeyChanged for removing duplicate objects?", "body": "<p>I'm new to rxjs in Angular 7 , i have an api that returns the user details.I want to remove objects that are having same name,i hardly tried it using distinctUntilKeyChanged() but getting output in console as same as from the api response. and also can i directly use returned data  from service as the responce is already a Observable using Interface without using From() or 0f() in component.</p>\n\n<p>This is for angular 7 and Rxjs 6 , i have been using angular for one year but i didnt used Rxjs till now,am getting lots of confusions in Rxjs, that can i use the Http response from service directly in component or else do i want to use any operators for converting the response as stream in brief can i use the Json responce directly in component for using different operators like find(),first(),ignoreElements etc... </p>\n\n<p>user.service.ts</p>\n\n<pre><code>  private urlLara = 'http://laravel.technalatus.com/public/api/'\n  public getusers(): Observable&lt;User&gt; {\n    const head = new HttpHeaders({\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    })\n    return this.http.get&lt;User&gt;(this.urlLara + 'users', { headers: head \n    });\n  }\n</code></pre>\n\n<p>component.ts</p>\n\n<pre><code>export class AppComponent implements OnInit {\n  title = 'angularrxjs';\n  items: {};\n  post: Post;\n  user: User;\n  public searchTerm: string;\n\n  constructor(private UserService: UserService) {\n\n  }\n\n  ngOnInit() {\n    this.distinct()\n  }\n\n  public Duchanged() {\n    // custom compare for name\n    this.UserService.getusers().pipe(distinctUntilChanged((prev, curr) =&gt; prev.name === curr.name))\n      .subscribe(console.log);\n\n  }\n</code></pre>\n\n<p>Getting output as </p>\n\n<pre><code>[\n{id: 2, name: \"alshoja\", email: \"alshoja@gmail.com\", email_verified_at: null, type: \"admin\"},\n{id: 3, name: \"Ellaware\", email: \"abhi@gmail.com\", email_verified_at: null, type: \"user\"},\n{id: 17, name: \"alshoja\", email: \"c@g.com\", email_verified_at: null, type: \"user\"}\n]\n</code></pre>\n\n<p>Expecting Output as </p>\n\n<pre><code>[\n{id: 2, name: \"alshoja\", email: \"alshoja@gmail.com\", email_verified_at: null, type: \"admin\"},\n{id: 3, name: \"Ellaware\", email: \"abhi@gmail.com\", email_verified_at: null, type: \"user\"},\n]\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "is_accepted": false, "score": 0, "last_activity_date": 1565154920, "creation_date": 1565154920, "answer_id": 57387369, "question_id": 57387132, "link": "https://stackoverflow.com/questions/57387132/angular-typescript-readonly-modifier-is-not-working/57387369#57387369", "title": "Angular/Typescript: Readonly modifier is not working", "body": "<blockquote>\n  <p>TypeScript comes with a ReadonlyArray type that is the same as\n  Array with all mutating methods removed, so you can make sure you\n  don\u2019t change your arrays after creation</p>\n</blockquote>\n\n<pre><code> cars :ReadonlyArray&lt;any&gt;;\n</code></pre>\n\n<p>Forked Example: <a href=\"https://stackblitz.com/edit/angular-g8pmdr\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-g8pmdr</a></p>\n\n<p>Ref:<a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html#readonly-properties\" rel=\"nofollow noreferrer\">https://www.typescriptlang.org/docs/handbook/interfaces.html#readonly-properties</a></p>\n"}, {"comments": [{"owner": {"reputation": 2460, "user_id": 2466342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4hkq.png?s=128&g=1", "display_name": "terahertz", "link": "https://stackoverflow.com/users/2466342/terahertz"}, "edited": false, "score": 0, "creation_date": 1565158491, "post_id": 57387451, "comment_id": 101258946, "body": "Thanks for explaining in detail, that makes a lot sense. Anyway, fyi, your stackblitz doesn&#39;t work though. Not that it matters cause your answer does explain everything but do remember to press the fork button next time =P"}, {"owner": {"reputation": 2441, "user_id": 6816518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MpJyjagijP8/AAAAAAAAAAI/AAAAAAAAAgM/JNeyZ_dDCTQ/photo.jpg?sz=128", "display_name": "alt255", "link": "https://stackoverflow.com/users/6816518/alt255"}, "reply_to_user": {"reputation": 2460, "user_id": 2466342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4hkq.png?s=128&g=1", "display_name": "terahertz", "link": "https://stackoverflow.com/users/2466342/terahertz"}, "edited": false, "score": 0, "creation_date": 1565199095, "post_id": 57387451, "comment_id": 101280805, "body": "Thanks for letting me know about link."}], "tags": [], "owner": {"reputation": 2441, "user_id": 6816518, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MpJyjagijP8/AAAAAAAAAAI/AAAAAAAAAgM/JNeyZ_dDCTQ/photo.jpg?sz=128", "display_name": "alt255", "link": "https://stackoverflow.com/users/6816518/alt255"}, "is_accepted": true, "score": 2, "last_activity_date": 1565199045, "last_edit_date": 1565199045, "creation_date": 1565155411, "answer_id": 57387451, "question_id": 57387132, "link": "https://stackoverflow.com/questions/57387132/angular-typescript-readonly-modifier-is-not-working/57387451#57387451", "title": "Angular/Typescript: Readonly modifier is not working", "body": "<p><strong>readonly</strong>\nThis keyword is used in interface or class to mark a property as ready only</p>\n\n<pre><code>class Employee {\n    readonly empCode: number;\n    empName: string;\n\n    constructor(code: number, name: string)     {\n        this.empCode = code;\n        this.empName = name;\n    }\n}\nlet emp = new Employee(10, \"John\");\nemp.empCode = 20; //Compiler Error\nemp.empName = 'Bill'; //Compiler Error\n</code></pre>\n\n<p>Note that property marked readonly can be only assigned value in constructor or when declaring the property.</p>\n\n<p>A property marked readyonly can not be reassigned.</p>\n\n<p>In your code example:</p>\n\n<pre><code> modifyCars() {\n    this.cars[0] = { id: -1, name: 'MODIFIED BY BUTTON' };\n  }\n</code></pre>\n\n<p>You are not reassigning, instead you are mutating array. To prevent array mutation you can use ReadOnly mapped type.</p>\n\n<p>replace </p>\n\n<pre><code>  readonly cars;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>readonly cars: Readonly&lt;{ id: number, name: string }[]&gt;;\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/angular-qfpbnd?file=src/app/app.component.ts\" rel=\"nofollow noreferrer\">Full example</a></p>\n"}], "owner": {"reputation": 2460, "user_id": 2466342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4hkq.png?s=128&g=1", "display_name": "terahertz", "link": "https://stackoverflow.com/users/2466342/terahertz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 57387451, "answer_count": 2, "score": 0, "last_activity_date": 1565498314, "creation_date": 1565153368, "last_edit_date": 1565498314, "question_id": 57387132, "link": "https://stackoverflow.com/questions/57387132/angular-typescript-readonly-modifier-is-not-working", "title": "Angular/Typescript: Readonly modifier is not working", "body": "<p><strong>I am trying to make a property in a component read-only.</strong> However, it seems like the readonly modifier doesn't do anything at all.</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-3a1p1x\" rel=\"nofollow noreferrer\"><strong>Example stackblitz</strong></a></p>\n\n<p>Based on the <a href=\"https://www.typescriptlang.org/docs/handbook/classes.html#readonly-modifier\" rel=\"nofollow noreferrer\">documentation</a>, I shouldn't be able to modify the <code>cars</code> property declared in AppComponent once I have initialized in the <code>constructor()</code>.</p>\n\n<p><strong>What I've tried:</strong></p>\n\n<p>At first I was able to modify <code>cars</code> in AppComponent's <code>ngOnInit()</code> and I thought that this is probably an <em>allowed</em> behaviour because the component is still being \"constructed\". So I created a button that calls a function and tries to modify the property, yet, again I could do so. So I thought maybe the readonly modifier only applies to outside classes accessing the property. But yet, again I am able to modify <code>cars</code> in <code>HelloComponent</code>.</p>\n\n<p>Am I using readonly wrongly? How do I use it correctly or make a property accessible in public but not \"modified-able\" (readonly) by outside?</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 332, "user_id": 8778930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1a2346b21fe5f024d1be413eb2588b?s=128&d=identicon&r=PG&f=1", "display_name": "mewi", "link": "https://stackoverflow.com/users/8778930/mewi"}, "is_accepted": false, "score": 2, "last_activity_date": 1565153523, "last_edit_date": 1565153523, "creation_date": 1565153171, "answer_id": 57387103, "question_id": 57387062, "link": "https://stackoverflow.com/questions/57387062/angular-7-display-value-when-click-on-radio-button/57387103#57387103", "title": "Angular 7: Display value when click on Radio button", "body": "<p>If you'd like to use this value outside of just displaying it, you will want to use ngModel. To do so in your case:</p>\n\n<p>Change your input to</p>\n\n<pre><code>&lt;input [(ngModel)]=\"selection\" type=\"radio\" class=\"justify-right\" formControlName=\"options\" name=\"options\" [value]=\"radiobutton.id\"&gt;\n</code></pre>\n\n<p>And then add this to your typescript file under options</p>\n\n<pre><code>selection: String;\n</code></pre>\n\n<p>And change your selection print to</p>\n\n<pre><code>Selection: {{selection}}\n</code></pre>\n\n<p>Now if you want to use this value at any point in your TypeScript functions, simply call it using <strong>this.selection</strong></p>\n"}, {"tags": [], "owner": {"reputation": 1562, "user_id": 10218688, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9xM7c7fOonQ/AAAAAAAAAAI/AAAAAAAAD_E/b21v5-5cXCw/photo.jpg?sz=128", "display_name": "PALLAMOLLA SAI", "link": "https://stackoverflow.com/users/10218688/pallamolla-sai"}, "is_accepted": true, "score": 1, "last_activity_date": 1565153428, "creation_date": 1565153428, "answer_id": 57387140, "question_id": 57387062, "link": "https://stackoverflow.com/questions/57387062/angular-7-display-value-when-click-on-radio-button/57387140#57387140", "title": "Angular 7: Display value when click on Radio button", "body": "<p>You just need to replace one line.</p>\n\n<p>with</p>\n\n<pre><code>&lt;p&gt;Selection: {{options.name}}&lt;/p&gt;\n</code></pre>\n\n<p>below one.</p>\n\n<pre><code>&lt;p&gt;Selection: {{form.controls['options'].value}}&lt;/p&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14745, "user_id": 7790376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i3Pxbe4117Y/AAAAAAAAAAI/AAAAAAAAAEw/r6BT0yIo_4E/photo.jpg?sz=128", "display_name": "Chellappan \u0bb5", "link": "https://stackoverflow.com/users/7790376/chellappan-%e0%ae%b5"}, "is_accepted": false, "score": 1, "last_activity_date": 1565153950, "creation_date": 1565153950, "answer_id": 57387212, "question_id": 57387062, "link": "https://stackoverflow.com/questions/57387062/angular-7-display-value-when-click-on-radio-button/57387212#57387212", "title": "Angular 7: Display value when click on Radio button", "body": "<p>Since you have a formcontrol assosiated with formGroup you can't access options form control like options.name instead you can use getters</p>\n\n<blockquote>\n  <p>A getter provides easy access to the aliases in the form control\n  instance compared to repeating the form.get('options') method to get\n  each instance.</p>\n</blockquote>\n\n<pre><code>get Options(){\n        return this.form.get('options').value;\n }\n</code></pre>\n\n<p>Ref:<a href=\"https://angular.io/guide/reactive-forms#step-3-accessing-the-formarray-control\" rel=\"nofollow noreferrer\">https://angular.io/guide/reactive-forms#step-3-accessing-the-formarray-control</a></p>\n\n<p>Example:<a href=\"https://stackblitz.com/edit/angular-dynamic-radio-list-pyad5s\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-dynamic-radio-list-pyad5s</a></p>\n"}, {"tags": [], "owner": {"reputation": 6304, "user_id": 9739129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1264b7591b5bd70e6284cc120b5c0d96?s=128&d=identicon&r=PG&f=1", "display_name": "nash11", "link": "https://stackoverflow.com/users/9739129/nash11"}, "is_accepted": false, "score": 1, "last_activity_date": 1565155587, "creation_date": 1565155587, "answer_id": 57387480, "question_id": 57387062, "link": "https://stackoverflow.com/questions/57387062/angular-7-display-value-when-click-on-radio-button/57387480#57387480", "title": "Angular 7: Display value when click on Radio button", "body": "<p>You can either use the <code>form</code> variable to access the <code>options</code> directly in the HTML or you can use a getter in your component and display that in your HTML.</p>\n\n<p>To display selected value directly using <code>form</code></p>\n\n<pre><code>&lt;p&gt;Selection: {{form.get('options').value}}&lt;/p&gt;\n</code></pre>\n\n<p>To display selected value using a getter</p>\n\n<p><strong>component</strong></p>\n\n<pre><code>get optionsValue() {\n  return this.form.get('options').value;\n}\n</code></pre>\n\n<p><strong>HTML</strong></p>\n\n<pre><code>&lt;p&gt;Selection: {{optionsValue}}&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 9097559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4346ebb2e24b52684a2dfabc815c5ba9?s=128&d=identicon&r=PG&f=1", "display_name": "Shah", "link": "https://stackoverflow.com/users/9097559/shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1134, "favorite_count": 0, "accepted_answer_id": 57387140, "answer_count": 4, "score": 0, "last_activity_date": 1565930243, "creation_date": 1565152804, "last_edit_date": 1565930243, "question_id": 57387062, "link": "https://stackoverflow.com/questions/57387062/angular-7-display-value-when-click-on-radio-button", "title": "Angular 7: Display value when click on Radio button", "body": "<p>I have some problem with radio button. I need to display value when click on the radio button. Let say, when click on weekly it display \"weekly\" at \"Selection\" element. I've tried to make it but it not work. Could you teach me where should I change or add to make it display.</p>\n\n<p>This is my code.</p>\n\n<p>HTML</p>\n\n<pre><code>    &lt;form [formGroup]=\"form\" (ngSubmit)=\"submit()\"&gt;\n\n  &lt;label *ngFor=\"let order of orders\"&gt;\n    &lt;input formControlName=\"orders\" type=\"radio\" name=\"orders\" [value]=\"order.id\" /&gt;\n    {{order.name}}\n  &lt;/label&gt;\n\n  &lt;br&gt;\n  &lt;label *ngFor=\"let radiobutton of options\"&gt;\n    &lt;input type=\"radio\" class=\"justify-right\" formControlName=\"options\" name=\"options\" [value]=\"radiobutton.id\"&gt;{{radiobutton.name}}\n    &lt;/label&gt;\n\n   &lt;p&gt;Selection: {{options.name}}&lt;/p&gt;\n  &lt;button&gt;submit&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>And this is my component code</p>\n\n<p>TS</p>\n\n<pre><code>    form: FormGroup;\n  orders = [];\n  options = []\n\n  constructor(private formBuilder: FormBuilder) {\n    this.form = this.formBuilder.group({\n      orders: [''],\n      options: ['']\n    });\n\n    // mimic async orders\n    of(this.getOrders()).subscribe(orders =&gt; {\n      this.orders = orders;\n      this.form.controls.orders.patchValue(this.orders[0].id);\n    });\n\n    // getOptions\n    of(this.getOptions()).subscribe(options =&gt; {\n      this.options = options;\n      this.form.controls.options.patchValue(this.options[0].id);\n    })\n\n    // synchronous orders\n    // this.orders = this.getOrders();\n    // this.form.controls.orders.patchValue(this.orders[0].id);\n  }\n\n  getOrders() {\n    return [\n      { id: 100, name: 'order 1' },\n      { id: 200, name: 'order 2' },\n      { id: 300, name: 'order 3' },\n      { id: 400, name: 'order 4' }\n    ];\n  }\n\n  getOptions(){\n        return[\n          {id: 'Once', name: 'Once'},\n          {id: 'Daily', name: 'Daily'},\n          {id: 'Weekly', name: 'Weekly'},\n          {id: 'Interval', name: 'Interval'},\n        ]\n      }\n\n      ngOnInit(){\n        this.options\n      }\n\n  submit() {\n    console.log(this.form.value);\n  }\n</code></pre>\n\n<p>For reference you can refer <a href=\"https://stackblitz.com/edit/angular-dynamic-radio-list\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Hope you all can help..</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["typescript", "design-patterns"], "answers": [{"tags": [], "owner": {"reputation": 851, "user_id": 6275101, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b71a2795836ca053ea1850774d029ed?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6275101/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1565153445, "creation_date": 1565153445, "answer_id": 57387144, "question_id": 57386976, "link": "https://stackoverflow.com/questions/57386976/factory-pattern-property-findbyemail-is-missing-in-type-ibasedao-but-requir/57387144#57387144", "title": "Factory Pattern, Property &#39;findByEmail&#39; is missing in type &#39;IBaseDao&#39; but required in type &#39;IUserDao&#39;", "body": "<p>It's not possible to infer a type at compile-time from a runtime value (like your 'daoName' string) - the compiler doesn't know what concrete type the function will return.</p>\n\n<p>You'll need to implement separate methods for constructing your different object types (e.g. createUser(), createPost()), which is much clearer and easier to understand anyway. </p>\n"}], "owner": {"reputation": 36140, "user_id": 6463558, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/g22sX.jpg?s=128&g=1", "display_name": "slideshowp2", "link": "https://stackoverflow.com/users/6463558/slideshowp2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565153445, "creation_date": 1565152127, "question_id": 57386976, "link": "https://stackoverflow.com/questions/57386976/factory-pattern-property-findbyemail-is-missing-in-type-ibasedao-but-requir", "title": "Factory Pattern, Property &#39;findByEmail&#39; is missing in type &#39;IBaseDao&#39; but required in type &#39;IUserDao&#39;", "body": "<p>I am trying to using the Factory Pattern to create DAO. Here is my code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface IBaseDao {\n  findOne(): Promise&lt;any&gt;;\n}\n\nabstract class BaseDao implements IBaseDao {\n  public async findOne() {}\n}\n\ninterface IUserDao extends IBaseDao {\n  findByEmail(email: string): Promise&lt;any&gt;;\n}\n\nclass UserDaoImpl extends BaseDao implements IUserDao {\n  public async findByEmail(email: string) {}\n}\n\ninterface IPostDao extends IBaseDao {\n  findByTitle(title: string): Promise&lt;any&gt;;\n}\nclass PostDaoImpl extends BaseDao implements IPostDao {\n  public async findByTitle(title: string) {}\n}\n\nclass DaoFactory {\n  public static create(daoName: string): IBaseDao {\n    switch (daoName) {\n      case 'user':\n        return new UserDaoImpl();\n      case 'post':\n        return new PostDaoImpl();\n      default:\n        throw new Error(`no DAO for daoName = ${daoName}`);\n    }\n  }\n}\n\n\nconst userDao: IUserDao = DaoFactory.create('user');\nuserDao.findByEmail();\n\n</code></pre>\n\n<p>But got this error:</p>\n\n<blockquote>\n  <p>Property 'findByEmail' is missing in type 'IBaseDao' but required in type 'IUserDao'.ts(2741)</p>\n</blockquote>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 40765, "user_id": 140827, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48b95af4d9e286f3baf107f8188dd186?s=128&d=identicon&r=PG", "display_name": "erjiang", "link": "https://stackoverflow.com/users/140827/erjiang"}, "edited": false, "score": 0, "creation_date": 1565152902, "post_id": 57387033, "comment_id": 101257416, "body": "With the generic type on the interface, I&#39;m running into an issue where the interface is unioned with a bunch of other types, e.g. <code>PetUpdate</code> = <code>CatUpdate</code> | <code>DogUpdate</code>, but TS complains that I need to provide T in <code>CatUpdate</code> when defining <code>PetUpdate</code>. I&#39;m thinking I&#39;ll probably have to redo the structure entirely to get what I want."}, {"owner": {"reputation": 851, "user_id": 6275101, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b71a2795836ca053ea1850774d029ed?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6275101/daniel"}, "reply_to_user": {"reputation": 40765, "user_id": 140827, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48b95af4d9e286f3baf107f8188dd186?s=128&d=identicon&r=PG", "display_name": "erjiang", "link": "https://stackoverflow.com/users/140827/erjiang"}, "edited": false, "score": 0, "creation_date": 1565153761, "post_id": 57387033, "comment_id": 101257615, "body": "Yeah, this won&#39;t work well with unions. Still, it shouldn&#39;t be necessary to use unions unless I&#39;m missing something (assuming <code>Cat</code> extends <code>Pet</code>): ` interface PetUpdate&lt;TPet extends Pet, TKey extends keyof TPet&gt; {   field: TKey;   value: TPet[TKey]; }  function getCatUpdate&lt;T extends keyof Cat&gt;(field: T, value: Cat[T]): PetUpdate&lt;Cat, T&gt; {     return {         field,         value     } } ` EDIT: ugh, excuse the code formatting."}], "tags": [], "owner": {"reputation": 851, "user_id": 6275101, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b71a2795836ca053ea1850774d029ed?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6275101/daniel"}, "is_accepted": false, "score": 3, "last_activity_date": 1565152604, "creation_date": 1565152604, "answer_id": 57387033, "question_id": 57386913, "link": "https://stackoverflow.com/questions/57386913/typescript-look-up-fields-type-based-on-another-field/57387033#57387033", "title": "TypeScript: Look up field&#39;s type based on another field", "body": "<p>One way is to use a generic type:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface CatUpdate&lt;T extends keyof Cat&gt; {\n  field: T;\n  value: Cat[T];\n}\n</code></pre>\n\n<p>It works, but it means you'll need to be a little bit more verbose when creating the object.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// Error\nconst x: CatUpdate&lt;\"name\"&gt; = {\n  field: \"name\",\n  value: 12\n}\n\n// No error\nconst y: CatUpdate&lt;\"name\"&gt; = {\n  field: \"name\",\n  value: \"Dave\"\n}\n</code></pre>\n\n<p>One solution would be to use a function for instantiation which can infer the type based on the parameters:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function getCatUpdate&lt;T extends keyof Cat&gt;(field: T, value: Cat[T]): CatUpdate&lt;T&gt; {\n    return {\n        field,\n        value\n    }\n}\n</code></pre>\n\n<p>Which you could call like:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// Error\nconst x = getCatUpdate(\"name\", 12);\n\n// No error\nconst y = getCatUpdate(\"name\", \"Dave\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 1, "last_activity_date": 1565197141, "creation_date": 1565197141, "answer_id": 57399179, "question_id": 57386913, "link": "https://stackoverflow.com/questions/57386913/typescript-look-up-fields-type-based-on-another-field/57399179#57399179", "title": "TypeScript: Look up field&#39;s type based on another field", "body": "<p>My inclination would be to make <code>CatUpdate</code> a union type and not an interface, like this:</p>\n\n<pre><code>interface Cat {\n  weight: number;\n  name: string;\n  adoptable: boolean;\n}\n\ntype PropUpdate&lt;T extends object&gt; = {\n  [K in keyof T]: { field: K; value: T[K] }\n}[keyof T];\n\n\ntype CatUpdate = PropUpdate&lt;Cat&gt;;\n/* \ntype CatUpdate = {\n    field: \"weight\";\n    value: number;\n} | {\n    field: \"name\";\n    value: string;\n} | {\n    field: \"adoptable\";\n    value: boolean;\n}\n*/\n</code></pre>\n\n<p>That should work well enough on your mentioned use case:</p>\n\n<pre><code>const x: CatUpdate = {\n  field: \"name\",\n  value: 12\n} // error!\n</code></pre>\n\n<p>And you should be able to compose those (<code>CatUpdate | DogUpdate</code>) if you need to, although without a particular use case it's hard to know if such composition is appropriate (Can <code>Cat</code> and <code>Dog</code> be discriminated from each other?  That is, is <code>Cat &amp; Dog</code> impossible?  If <code>Cat &amp; Dog</code> is possible, then <code>CatUpdate | DogUpdate</code> can only be used to update a <code>Cat &amp; Dog</code>.  If it's impossible, then <code>CatUpdate | DogUpdate</code> should probably be replaced with a discriminated union instead like <code>(CatUpdate &amp; {kind: \"CatUpdate\"}) | (DogUpdate &amp; {kind: \"DogUpdate\"})</code>.)</p>\n\n<p>Hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgMJzMg3gWAFDLIDuEwA5gBZgBcyIArgLYBG0A3PoSHIxLQM5gooMhwLI4AEwD2ABzBxmAGz7Jm06SrggxAX3z4wAT1koAClDkBVWZIwQAPABVkEAB6QQk-smnMAVhAIYAB8yAC82JzIANoA0sigyADWEEbSMMhOALq0WMgwwBBKkrRxbMgAbnBK9KpO8dnI+ni6ManpmTliBnjGpmgYNnaQEcgW1rb2DuihYgD0AFTIhiYos8P2Y7jihIXFpcgARCTkVEdihITVtaoMLOz4usgAPlG7BUUltEfcvBfRa41OoCIQiPSvd5XT4HH5SOQKZQQAEfG4gtQaLQ6J74RbzXoIaQgQTINy0DZTUaRHZ7L6HX48ZEAGmiaNUAEYAExPZDzeauKCWKAAQiAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}, {"tags": [], "owner": {"reputation": 2076, "user_id": 10312920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b27b2d022cfa46946734570ecc2ddcf?s=128&d=identicon&r=PG", "display_name": "Ken Mueller", "link": "https://stackoverflow.com/users/10312920/ken-mueller"}, "is_accepted": false, "score": 0, "last_activity_date": 1565207985, "creation_date": 1565207985, "answer_id": 57401552, "question_id": 57386913, "link": "https://stackoverflow.com/questions/57386913/typescript-look-up-fields-type-based-on-another-field/57401552#57401552", "title": "TypeScript: Look up field&#39;s type based on another field", "body": "<p>Unfortunately, TypeScript does not have what you are looking for, but you can hardcode the types:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type CatUpdate \n    = { field: 'weight', value: number }\n    | { field: 'name', value: string }\n    | { field: 'adoptable', value: boolean }\n</code></pre>\n"}], "owner": {"reputation": 40765, "user_id": 140827, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/48b95af4d9e286f3baf107f8188dd186?s=128&d=identicon&r=PG", "display_name": "erjiang", "link": "https://stackoverflow.com/users/140827/erjiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1565207985, "creation_date": 1565151677, "question_id": 57386913, "link": "https://stackoverflow.com/questions/57386913/typescript-look-up-fields-type-based-on-another-field", "title": "TypeScript: Look up field&#39;s type based on another field", "body": "<p>Let's say I have an interface like this:</p>\n\n<pre><code>interface Cat {\n  weight: number;\n  name: string;\n  adoptable: boolean;\n}\n</code></pre>\n\n<p>I want to define the following interface that can be used to set values on <code>Cat</code>:</p>\n\n<pre><code>interface CatUpdate {\n  field: keyof Cat;\n  value: ???\n}\n</code></pre>\n\n<p>and I want TypeScript to enforce that value is the appropriate type based on field. E.g., this should be invalid:</p>\n\n<pre><code>const x: CatUpdate = {\n  field: \"name\",\n  value: 12\n}\n</code></pre>\n\n<p>How do I define the type of <code>CatUpdate.value</code>?</p>\n"}, {"tags": ["typescript", "express", "visual-studio-code"], "answers": [{"comments": [{"owner": {"reputation": 10267, "user_id": 936293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HpwXZ.png?s=128&g=1", "display_name": "Old Geezer", "link": "https://stackoverflow.com/users/936293/old-geezer"}, "edited": false, "score": 0, "creation_date": 1565152143, "post_id": 57386940, "comment_id": 101257243, "body": "Thanks. I have since found that Code Intellisense pops up a list of <code>Response</code> names, and I can move the cursor down each one to show where it is declared. After selecting one, Code will automatically create that import statement you have shown."}], "tags": [], "owner": {"reputation": 851, "user_id": 6275101, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6b71a2795836ca053ea1850774d029ed?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6275101/daniel"}, "is_accepted": true, "score": 2, "last_activity_date": 1565151884, "creation_date": 1565151884, "answer_id": 57386940, "question_id": 57386634, "link": "https://stackoverflow.com/questions/57386634/finding-out-the-fully-qualified-name-of-a-type/57386940#57386940", "title": "Finding out the fully qualified name of a type", "body": "<p>Typescript doesn't really have 'qualified names', a module can only export one symbol with a specific name. Perhaps your IDE is showing it ambiguously, but assuming the module in question is called <code>[this-express-module]</code>, all you need to do is:</p>\n\n<p><code>import { Response } from \"[this-express-module]\";</code></p>\n\n<p>If this conflicts with a <code>Response</code> that is already imported in your module, you can do </p>\n\n<p><code>import { Response as MyResponse } from \"[this-express-module]\";</code></p>\n"}], "owner": {"reputation": 10267, "user_id": 936293, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HpwXZ.png?s=128&g=1", "display_name": "Old Geezer", "link": "https://stackoverflow.com/users/936293/old-geezer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 57386940, "answer_count": 1, "score": 0, "last_activity_date": 1565151884, "creation_date": 1565149000, "last_edit_date": 1565149601, "question_id": 57386634, "link": "https://stackoverflow.com/questions/57386634/finding-out-the-fully-qualified-name-of-a-type", "title": "Finding out the fully qualified name of a type", "body": "<p>I have a Node Express project in Typescript in Visual Studio Code.</p>\n\n<p>The <code>express.Router</code> handler methods use the <code>Response</code> and <code>Request</code> parameters. Looking at the definition of the <code>Response</code> type, it is defined in node_modules/@types/express-serve-static-core/index.d.ts as:</p>\n\n<pre><code>export interface Response extends http.ServerResponse, Express.Response { ...\n</code></pre>\n\n<p>I now want to create a helper method that uses a parameter of this <code>Response</code> type. Unfortunately, the name <code>Response</code> on its own is ambiguous as there are more than one entities having that name.</p>\n\n<p>How do I find out the fully qualified name of that <code>Response</code> type?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "lodash"], "answers": [{"comments": [{"owner": {"reputation": 15130, "user_id": 1679126, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/82c8608808b8c4c719e9d0c71fb5c366?s=128&d=identicon&r=PG", "display_name": "Adrian Brand", "link": "https://stackoverflow.com/users/1679126/adrian-brand"}, "edited": false, "score": 1, "creation_date": 1565148636, "post_id": 57386553, "comment_id": 101256523, "body": "This will only work if we know all the collection properties are the same in each node. It will work in OP posted data set but not in all possible data sets."}, {"owner": {"reputation": 151, "user_id": 6404253, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pCSh55YyGfc/AAAAAAAAAAI/AAAAAAAAAGM/BVRuikfYCH0/photo.jpg?sz=128", "display_name": "raf", "link": "https://stackoverflow.com/users/6404253/raf"}, "edited": false, "score": 0, "creation_date": 1565148663, "post_id": 57386553, "comment_id": 101256529, "body": "This is what I am looking for. You are right I forgot to map the product_id. Thank you so much."}], "tags": [], "owner": {"reputation": 2280, "user_id": 3038089, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ce22d79a5480acddad242a6b224a8535?s=128&d=identicon&r=PG&f=1", "display_name": "Dan D", "link": "https://stackoverflow.com/users/3038089/dan-d"}, "is_accepted": true, "score": 4, "last_activity_date": 1565148315, "creation_date": 1565148315, "answer_id": 57386553, "question_id": 57386513, "link": "https://stackoverflow.com/questions/57386513/iterate-array-of-object-to-merge-new-object/57386553#57386553", "title": "Iterate array of object to merge new object", "body": "<p><code>item</code> in your case is an array, but you are accessing it as if there was a <code>product_id</code> field on the array itself, you'll have to map all <code>product_id</code> properties from each item in the array:</p>\n\n<pre><code>map(this.products, (item, key) =&gt; {\n   return {\n      collection: item[0].collection,\n      product_ids: item.map(i =&gt; i.product_id)\n   };\n});\n</code></pre>\n\n<p>Also, if the map function returns an array, for each item in the initial array it transforms it into a new format, so you can return and assign to <code>this.arr</code> instead of pushing to <code>this.arr</code> within the map function.</p>\n"}, {"tags": [], "owner": {"reputation": 15130, "user_id": 1679126, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/82c8608808b8c4c719e9d0c71fb5c366?s=128&d=identicon&r=PG", "display_name": "Adrian Brand", "link": "https://stackoverflow.com/users/1679126/adrian-brand"}, "is_accepted": false, "score": 0, "last_activity_date": 1565148490, "creation_date": 1565148490, "answer_id": 57386578, "question_id": 57386513, "link": "https://stackoverflow.com/questions/57386513/iterate-array-of-object-to-merge-new-object/57386578#57386578", "title": "Iterate array of object to merge new object", "body": "<p>You could use nested reduce functions.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const collect = data =&gt; data.reduce((results, item) =&gt; {\r\n  item.reduce((results, subItem) =&gt; {\r\n    const current = results.find(i =&gt; i.collection === subItem.collection);\r\n    if (current) {\r\n      current.product_ids.push(subItem.product_id);\r\n    } else {\r\n      results.push({ collection: subItem.collection, product_ids: [subItem.product_id] });\r\n    }\r\n    return results;\r\n  }, results);\r\n  return results;\r\n}, []);\r\n\r\nconst data = [\r\n  [\r\n    {\r\n      \"id\": \"b7079be6-c9ab-4d24-9a1d-38eddde926c2\",\r\n      \"collection\": \"mortgages\",\r\n      \"product_id\": \"854174665132787596022\"\r\n    },\r\n    {\r\n      \"id\": \"0da12779-6fe9-45d5-afbf-91d2466e5b7e\",\r\n      \"collection\": \"mortgages\",\r\n      \"product_id\": \"304285269353822734222\"\r\n    },\r\n    {\r\n      \"id\": \"87a137ba-5f66-4e94-8d5d-698dfbaa08ec\",\r\n      \"collection\": \"mortgages\",\r\n      \"product_id\": \"-304414504724243127922\"\r\n    }\r\n  ],\r\n  [\r\n    {\r\n      \"id\": \"522f4b83-4c5a-4ffe-836d-33a51325d251\",\r\n      \"collection\": \"carinsurance\",\r\n      \"product_id\": \"10413803\"\r\n    },\r\n    {\r\n      \"id\": \"02b79566-9cf7-48fa-a8d3-eecf951b5a76\",\r\n      \"collection\": \"carinsurance\",\r\n      \"product_id\": \"10397803\"\r\n    }\r\n  ]\r\n];\r\n\r\nconsole.log(collect(data));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 151, "user_id": 6404253, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pCSh55YyGfc/AAAAAAAAAAI/AAAAAAAAAGM/BVRuikfYCH0/photo.jpg?sz=128", "display_name": "raf", "link": "https://stackoverflow.com/users/6404253/raf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57386553, "answer_count": 2, "score": 1, "last_activity_date": 1565148490, "creation_date": 1565147937, "question_id": 57386513, "link": "https://stackoverflow.com/questions/57386513/iterate-array-of-object-to-merge-new-object", "title": "Iterate array of object to merge new object", "body": "<p>I'm trying to create new object with array. I've already try it using lodash map. But my problem is how do i get the product_ids in specific collection and put it in array. </p>\n\n<p>This is the object</p>\n\n<pre><code>[\n  [\n    {\n      \"id\": \"b7079be6-c9ab-4d24-9a1d-38eddde926c2\",\n      \"collection\": \"mortgages\",\n      \"product_id\": \"854174665132787596022\"\n    },\n    {\n      \"id\": \"0da12779-6fe9-45d5-afbf-91d2466e5b7e\",\n      \"collection\": \"mortgages\",\n      \"product_id\": \"304285269353822734222\"\n    },\n    {\n      \"id\": \"87a137ba-5f66-4e94-8d5d-698dfbaa08ec\",\n      \"collection\": \"mortgages\",\n      \"product_id\": \"-304414504724243127922\"\n    }\n  ],\n  [\n    {\n      \"id\": \"522f4b83-4c5a-4ffe-836d-33a51325d251\",\n      \"collection\": \"carinsurance\",\n      \"product_id\": \"10413803\"\n    },\n    {\n      \"id\": \"02b79566-9cf7-48fa-a8d3-eecf951b5a76\",\n      \"collection\": \"carinsurance\",\n      \"product_id\": \"10397803\"\n    }\n  ]\n]\n</code></pre>\n\n<p>I've already tried this code</p>\n\n<pre><code>map(this.products, (item, key) =&gt; {\n   this.arr.push({\n      collection: item[0].collection,\n      product_ids: item.product_id\n   });\n});\n</code></pre>\n\n<p>I want to have a result like this.</p>\n\n<pre><code>{\n    \"collection\": \"mortgages\",\n    \"product_ids\": [\n        \"304285269353822734222\",\n        \"854174665132787596022\",\n        \"-304414504724243127922\"\n    ]\n},\n{\n    \"collection\": \"carinsurance\",\n    \"product_ids\": [\n        \"10413803\",\n        \"10397803\"\n    ]\n}\n</code></pre>\n\n<p>But I am getting this result. Can somebody help me to this one.</p>\n\n<pre><code>{\n    \"collection\": \"mortgages\",\n    \"product_ids\": undefined\n},\n{\n    \"collection\": \"carinsurance\",\n    \"product_ids\": undefined\n}\n</code></pre>\n"}, {"tags": ["reactjs", "typescript", "routing", "react-router"], "answers": [{"comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1565147634, "post_id": 57386456, "comment_id": 101256366, "body": "I recommend asking follow-up questions by editing your post, or creating a new question."}, {"owner": {"reputation": 627, "user_id": 4286669, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/96zjn.jpg?s=128&g=1", "display_name": "Desmond", "link": "https://stackoverflow.com/users/4286669/desmond"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1565147972, "post_id": 57386456, "comment_id": 101256424, "body": "@ggorlen sure. Thanks. I\u2019m searching for existing answers first."}], "tags": [], "owner": {"reputation": 627, "user_id": 4286669, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/96zjn.jpg?s=128&g=1", "display_name": "Desmond", "link": "https://stackoverflow.com/users/4286669/desmond"}, "is_accepted": false, "score": 0, "last_activity_date": 1565147439, "creation_date": 1565147439, "answer_id": 57386456, "question_id": 57386411, "link": "https://stackoverflow.com/questions/57386411/react-router-with-typescript-match-parameters-are-always-undefined/57386456#57386456", "title": "React-router with TypeScript, match parameters are always undefined", "body": "<p>Use <code>this.props.match.params.page</code> instead of <code>this.props.page</code> solves the problem.</p>\n\n<p>But it's still not perfect. <code>this.props.match.params.page</code> has a type as <code>any</code>. How can I restrict it.</p>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 11844308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d403221875adf808070953f765894768?s=128&d=identicon&r=PG&f=1", "display_name": "freedev111", "link": "https://stackoverflow.com/users/11844308/freedev111"}, "is_accepted": false, "score": 1, "last_activity_date": 1565149817, "creation_date": 1565149817, "answer_id": 57386712, "question_id": 57386411, "link": "https://stackoverflow.com/questions/57386411/react-router-with-typescript-match-parameters-are-always-undefined/57386712#57386712", "title": "React-router with TypeScript, match parameters are always undefined", "body": "<p>This is the solution:</p>\n\n<pre><code>import { match } from \"react-router-dom\";\n\ninterface DetailParams {\n  id: string;\n}\n\ninterface DetailsProps {\n  required: string;\n  match?: match&lt;DetailParams&gt;;\n}\n\n\nclass Signup extends React.Component&lt;DetailsProps, any&gt; {\n  render(){\n    const match = this.props.match;\n    console.log(match.params.page)\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 627, "user_id": 4286669, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/96zjn.jpg?s=128&g=1", "display_name": "Desmond", "link": "https://stackoverflow.com/users/4286669/desmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1750, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565149817, "creation_date": 1565146960, "question_id": 57386411, "link": "https://stackoverflow.com/questions/57386411/react-router-with-typescript-match-parameters-are-always-undefined", "title": "React-router with TypeScript, match parameters are always undefined", "body": "<p>I want to do this kind of routing: <code>localhost:3000/function/page</code> where <code>function</code> tells the app which function should take care of this url, and <code>page</code> tells which part we are inside a specific function.    </p>\n\n<pre><code>const App: React.FC = () =&gt; {\n  return (\n    &lt;Router&gt;\n      &lt;div className=\"App\"&gt;\n        &lt;Route component={SignUp} path=\"/signup/:page\" /&gt;\n      &lt;/div&gt;\n    &lt;/Router&gt;\n  );\n}\n\ninterface MatchProps extends RouteComponentProps&lt;any&gt; {\n  page: string;\n}\n\nclass SignUp extends React.Component&lt;MatchProps&gt; {\n  public render(){\n    console.log(this.props.page)\n  }\n}\n</code></pre>\n\n<p>Then I access this page via <code>localhost:3000/signup/1</code>, in console I can only get an <code>undefined</code> result.</p>\n"}, {"tags": ["regex", "typescript", "angular-router"], "comments": [{"owner": {"reputation": 105827, "user_id": 3037257, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nq6Zo.jpg?s=128&g=1", "display_name": "Pranav C Balan", "link": "https://stackoverflow.com/users/3037257/pranav-c-balan"}, "edited": false, "score": 1, "creation_date": 1565147237, "post_id": 57386406, "comment_id": 101256317, "body": "<code>this.router.url.replace(&#47;[\\d\\&#47;]+&#47;g, &#39;.&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": true, "score": 1, "last_activity_date": 1565147295, "creation_date": 1565147295, "answer_id": 57386439, "question_id": 57386406, "link": "https://stackoverflow.com/questions/57386406/replace-duplicate-values-of-incoming-string/57386439#57386439", "title": "Replace duplicate values of incoming string", "body": "<p>You can add a <code>+</code> to your regex to make the characters inside the bracket match one or more, effectively \"squeezing\" the result to one <code>.</code> character:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>console.log(\"/project/1/cost-estimate\".replace(/[\\d\\/]+/g, '.'));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 754, "user_id": 9282381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f4ae9dfe85d463dcca2356b564a2997b?s=128&d=identicon&r=PG&f=1", "display_name": "batgerel.e", "link": "https://stackoverflow.com/users/9282381/batgerel-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 57386439, "answer_count": 1, "score": 0, "last_activity_date": 1565164025, "creation_date": 1565146878, "last_edit_date": 1565164025, "question_id": 57386406, "link": "https://stackoverflow.com/questions/57386406/replace-duplicate-values-of-incoming-string", "title": "Replace duplicate values of incoming string", "body": "<p>I have a problem with replacing some strings with duplicated values. Here is snippet:</p>\n\n<pre><code>const firstStep = this.router.url.replace(/[\\d\\/]/g, '.');\n</code></pre>\n\n<p>Above returns when url like <code>/project/1/cost-estimate</code> it gives me <code>.project...cost-estimate</code>. So i need to replace this <code>...</code> to <code>.</code> or <code>project.project</code> -> <code>project.</code>. How i do that ? Any advice ?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 129, "user_id": 11846532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84b3e0a9e1b90702534c83b4d9926249?s=128&d=identicon&r=PG&f=1", "display_name": "TeamworkGuy2", "link": "https://stackoverflow.com/users/11846532/teamworkguy2"}, "edited": false, "score": 0, "creation_date": 1565142521, "post_id": 57385552, "comment_id": 101255570, "body": "which version of TypeScript are you compiling against and what does your tsconfig.json (or equivalent command line call) look like?  I ask because TypeScript&#39;s flow analysis, especially of null/undefined types has changed a lot over the last ~2 yrs."}], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 7, "last_activity_date": 1565143347, "creation_date": 1565143347, "answer_id": 57386066, "question_id": 57385552, "link": "https://stackoverflow.com/questions/57385552/object-is-possibly-undefined-in-typescript/57386066#57386066", "title": "&quot;Object is possibly &#39;undefined&#39;.&quot; in TypeScript", "body": "<p>The error happens because <a href=\"https://github.com/microsoft/TypeScript/issues/9998\" rel=\"noreferrer\">control flow analysis is difficult</a>, especially when the information you want to keep track of cannot be represented in the type system.  </p>\n\n<p>In the general case, the compiler really cannot figure out much about what happens when functions accept callbacks that mutate variables.  The control flow inside such functions is a complete mystery; maybe the callback will be called immediately and exactly once.  Maybe the callback will never be called.  Maybe the callback will be called a million times.  Or maybe it will be called asynchronously, far in the future.  Since the general case is so hopeless, the compiler doesn't even really try.  It uses some heuristics which work for a lot of cases, and which also necessarily fail for a lot of cases.<br>\nYou picked one of the failures.</p>\n\n<p>The heuristic used here is that inside of a callback, all narrowings which occurred in the wider scope are reset.  That does reasonable things for code like this:</p>\n\n<pre><code>// who knows when this actually calls its callback?\ndeclare function mysteryCallbackCaller(cb: () =&gt; void): void;\n\nlet a: string | undefined = \"hey\";\nmysteryCallbackCaller(() =&gt; a.charAt(0)); // error!  a may be undefined\na = undefined;\n</code></pre>\n\n<p>The compiler doesn't know when or if <code>() =&gt; a.charAt(0)</code> gets invoked.  If it gets invoked immediately when <code>mysteryCallbackCaller()</code> is called, then <code>a</code> will be defined.  But if it gets called sometime later, <code>a</code> may be undefined.  Since the compiler cannot guarantee safety here, it reports an error.</p>\n\n<hr>\n\n<p>So what can we do to address this issue in your case?  There are two main solutions I can think of.  One is to just tell the compiler that it's wrong and that you are sure that <code>obj</code> will be defined.  This can be done using the <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#non-null-assertion-operator\" rel=\"noreferrer\"><code>!</code> non-null assertion operator</a>:</p>\n\n<pre><code>map2.forEach(v =&gt; {\n  obj!.field1 += \",\" + v; // okay now\n});\n</code></pre>\n\n<p>This works with no compile time error.  The caveat to this solution is that the responsibility for ensuring <code>obj</code> is defined is now only yours and not the compiler's. If you change the preceding code and <code>obj</code> truly is possibly undefined, then the type assertion will still suppress the error, and you'll have issues at runtime.</p>\n\n<hr>\n\n<p>The other solution is to change what you're doing so that the compiler <em>can</em> verify that your callback is safe.  The easiest way to do that is to use a new variable:</p>\n\n<pre><code>// over here the compiler knows obj is defined\nconst constObj = obj; // type is inferred as TestIF\nmap2.forEach(v =&gt; {\n  constObj.field1 += \",\" + v; // okay, constObj is TestIF, so this works\n});\n</code></pre>\n\n<p>All I've done here is assign <code>obj</code> to <code>constObj</code>.  But at the time this assignment takes place, <code>obj</code> cannot be <code>undefined</code>.  Thus <code>constObj</code> is just a <code>TestIF</code>, and not a <code>TestIF | undefined</code>.  And since <code>constObj</code> is never reassigned and cannot be <code>undefined</code>, the rest of the code works.</p>\n\n<hr>\n\n<p>Okay, hope that helps.  Good luck! </p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/PTAEHcAsHtQawHbXAZwpApg0AXSBLNAQwGMcBXIgGyoE9QTqq18c1GaAjUuAfgCgAJhhJUiAJwygAZuQRl80bAFtaKHBnG0Awk24k4umpoAUJTgC5QJgJSgAvAD5QAN2j5BNq248BufvxUGDigRFbq4vgIAOagAD6gcsLSURiCDqAARJi0mf6q6po6ejxGQeImtg7ORAB0JJASAII4JgAMNja+oCCgmuLQ4gCEoKGgykT0nFJJGCkIafxEGbPzaf78URri0qRSACoY6gCSAGKgAN78oykYVIIAjOE4kTH+AL4BGAAeAA6DIVERBQaAAsjoxCDLtdcEdWl5XO50ldRqMSEp1OMiL8nqBQdiADwRKLRAA0oEOJ1OznsoAW4Dx2Ns-lRDAxIQmvwATFZ8b8iS8SeTiTEaXSMAy+cyAqz0QhMXAMPRaZlOYrcizUUEQtBOAArDKch61aLBEzqrow0b4aTWXUG+y0hDkGh2FGs0D2jIXGT4O6PKyZDTqYM4TKgd6a1lG2ooM3q8n2y2sz5WrHc2rSQYAUVIkBMLmq0I9nv1Q0zfvuD1AAGoVaTwzXXN1etA4JM6cg0+9LWnWy5NKBMJJcJg2cpfvhyvAkKhSwbCKBkqlBGm5Zj1zgAPL6jL2ltgHC0X5SRdRaT9NKhNCUnBnNOcrmZnN5gtF92y9k7vUV-3VutZA2tbNj0YBtpM5Kbt+oCLreZzCrAeCLuAgxwCg3bJhG-CfEAA\" rel=\"noreferrer\">Link to code</a></p>\n"}, {"tags": [], "owner": {"reputation": 644, "user_id": 1256169, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d7ecdb1fe3ca322b368090eb18fa8b02?s=128&d=identicon&r=PG", "display_name": "Joshua Davison", "link": "https://stackoverflow.com/users/1256169/joshua-davison"}, "is_accepted": false, "score": 0, "last_activity_date": 1565145319, "creation_date": 1565145319, "answer_id": 57386258, "question_id": 57385552, "link": "https://stackoverflow.com/questions/57385552/object-is-possibly-undefined-in-typescript/57386258#57386258", "title": "&quot;Object is possibly &#39;undefined&#39;.&quot; in TypeScript", "body": "<p>The Map's <code>get</code> method is defined as <code>Map&lt;string, TestIF&gt;.get(key: string): TestIF | undefined</code>, so when you set <code>obj</code>, it's type is <code>TestIF | undefined</code>.</p>\n\n<p>When you (re-set) <code>obj</code>'s type inside the <code>if</code> block, it's in a different scope. When you read <code>obj</code> inside the <code>forEach</code>,  it's also in another scope. The TypeScript compiler is unable to establish the correct type in the changed scopes.</p>\n\n<p>Consider this (working) code:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    const key = 'mapkey';\n    let obj: TestIF; // Create variable with a Type\n    if (map1.has(key)) { // We know (with certainty) that obj exists!\n      obj = map1.get(key) as TestIF; // We use 'as' because we know it can't be Undefined\n    } else {\n      obj = { field1: 'testtest' };\n      map1.set(key, obj);\n    }\n</code></pre>\n\n<p>Even though Map.get() will always return <code>V | undefined</code>, when we used <code>as</code>, we forced TypeScript to treat is as <code>V</code>. I use <code>as</code> with caution, but in this case we know it exists as we have called  <code>Map.has()</code> to check it's existence.</p>\n\n<p>Also, I want to stress that <code>(obj === undefined)</code> is much better than <code>(obj == null)</code>, which just checks for falsyness. <a href=\"https://codeburst.io/javascript-null-vs-undefined-20f955215a2\" rel=\"nofollow noreferrer\">[more info]</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12431849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96a4fa960ac6485dd74dd7467220c12e?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/12431849/gabriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1602861635, "last_edit_date": 1602861635, "creation_date": 1602858888, "answer_id": 64391224, "question_id": 57385552, "link": "https://stackoverflow.com/questions/57385552/object-is-possibly-undefined-in-typescript/64391224#64391224", "title": "&quot;Object is possibly &#39;undefined&#39;.&quot; in TypeScript", "body": "<p>I was suffering with the same problem now, and the solution to me was (adapted to your case):</p>\n<pre><code>if (!obj) {\n   return ( ... );\n}\n</code></pre>\n"}], "owner": {"reputation": 1713, "user_id": 4052858, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/710d5f65b404307fea9b5a1564c60549?s=128&d=identicon&r=PG&f=1", "display_name": "N.F.", "link": "https://stackoverflow.com/users/4052858/n-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9696, "favorite_count": 0, "accepted_answer_id": 57386066, "answer_count": 3, "score": 4, "last_activity_date": 1602861635, "creation_date": 1565138046, "question_id": 57385552, "link": "https://stackoverflow.com/questions/57385552/object-is-possibly-undefined-in-typescript", "title": "&quot;Object is possibly &#39;undefined&#39;.&quot; in TypeScript", "body": "<p>The code below throws <code>Object is possibly 'undefined'.</code> at <code>obj.field1 += ',' + v;</code>. TypeScript says the <code>obj</code> may be undefined, but the <code>obj</code> can not be undefined at this point because <code>{field1: 'testtest'}</code> is assigned in case <code>map.get(key)</code> returns undefined.</p>\n\n<p>Why I got this error? How can I fix this?</p>\n\n<pre><code>interface TestIF {\n  field1: string;\n}\n\nexport class MyClass {\n  test(): void {\n    const map1: Map&lt;string, TestIF&gt; = new Map();\n    const map2: Map&lt;string, string&gt; = new Map();\n\n    const key = 'mapkey';\n    let obj = map1.get(key);\n    if (obj == null) {\n      obj = {field1: 'testtest'};\n      map1.set(key, obj);\n    }\n\n    map2.forEach( v =&gt; {\n      obj.field1 += ',' + v;  // Object is possibly 'undefined'.\n    });\n  }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 29, "user_id": 11406989, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTeguJH_d_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7bN6EEhZHjgC9C6vY-1cciAXkxg/mo/photo.jpg?sz=128", "display_name": "Xiao", "link": "https://stackoverflow.com/users/11406989/xiao"}, "edited": false, "score": 0, "creation_date": 1565138176, "post_id": 57385184, "comment_id": 101254852, "body": "No idea why my question is downvoted... but I tried to use different versions (7.0 and 6.0) of @angular/core but gives more errors, and tried to config tsconfig.json file with what list here on angular website: <a href=\"https://angular.io/guide/typescript-configuration\" rel=\"nofollow noreferrer\">angular.io/guide/typescript-configuration</a> but it didn&#39;t work neither. I&#39;m new to Angular and not sure how to fix dependency problems... It would be really appreciate if you have any idea what I&#39;m missing here... thanks"}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1565146063, "post_id": 57385184, "comment_id": 101256149, "body": "Try upgrading typescript instead. They should all be mostly backwards compatible."}, {"owner": {"reputation": 29, "user_id": 11406989, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTeguJH_d_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7bN6EEhZHjgC9C6vY-1cciAXkxg/mo/photo.jpg?sz=128", "display_name": "Xiao", "link": "https://stackoverflow.com/users/11406989/xiao"}, "reply_to_user": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1565197728, "post_id": 57385184, "comment_id": 101280157, "body": "Thanks Evert, the problem is I&#39;m working on a small part of the project and can&#39;t update typescript that will break other parts... Thanks anyway!"}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "edited": false, "score": 0, "creation_date": 1565200795, "post_id": 57385184, "comment_id": 101281528, "body": "are you sure it will break other parts? If so, it might still be less work to do that, instead of trying to get an old library work with another old library."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 11406989, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTeguJH_d_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7bN6EEhZHjgC9C6vY-1cciAXkxg/mo/photo.jpg?sz=128", "display_name": "Xiao", "link": "https://stackoverflow.com/users/11406989/xiao"}, "is_accepted": true, "score": 1, "last_activity_date": 1565298872, "creation_date": 1565298872, "answer_id": 57420675, "question_id": 57385184, "link": "https://stackoverflow.com/questions/57385184/what-is-the-compatible-version-of-angular-core-for-typescript-2-5/57420675#57420675", "title": "What is the compatible version of @angular/core for typescript 2.5?", "body": "<p>Searched two days found</p>\n\n<p><code>\"@angular/router\": \"^5.0.0\",\n \"@angular/core\": \"^5.0.0\"\n</code></p>\n\n<p>works for ts 2.5, yay~</p>\n"}], "owner": {"reputation": 29, "user_id": 11406989, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gTeguJH_d_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7bN6EEhZHjgC9C6vY-1cciAXkxg/mo/photo.jpg?sz=128", "display_name": "Xiao", "link": "https://stackoverflow.com/users/11406989/xiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1838, "favorite_count": 0, "accepted_answer_id": 57420675, "answer_count": 1, "score": -2, "last_activity_date": 1565298872, "creation_date": 1565134087, "question_id": 57385184, "link": "https://stackoverflow.com/questions/57385184/what-is-the-compatible-version-of-angular-core-for-typescript-2-5", "title": "What is the compatible version of @angular/core for typescript 2.5?", "body": "<p>I'm using typescript 2.5.3 and can't upgrade it due to other dependencies. Is there a compatible version of @angular/core for ts 2.5? Installing the latest @angular/core gives me error as below: </p>\n\n<pre><code>angular-js/node_modules/@angular/core/core.d.ts(12341,86): error TS1110: Type expected.\nangular-js/node_modules/@angular/core/core.d.ts(12341,92): error TS1005: '=' expected.\nangular-js/node_modules/@angular/core/core.d.ts(12341,94): error TS1005: ')' expected.\nangular-js/node_modules/@angular/core/core.d.ts(12341,95): error TS1128: Declaration or statement expected.\nangular-js/node_modules/@angular/core/core.d.ts(12341,96): error TS1128: Declaration or statement expected.\n</code></pre>\n\n<p>package.json:</p>\n\n<pre><code> \"@angular/core\": \"^8.2.0\",\n \"typescript\": \"2.5.3\"\n</code></pre>\n\n<p>tsconfig.json:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"sourceMap\": true,\n    \"inlineSources\": true,\n    \"noImplicitAny\": false,\n    \"module\": \"es6\",\n    \"moduleResolution\": \"Node\",\n    \"target\": \"es5\",\n    \"alwaysStrict\": true,\n    \"suppressImplicitAnyIndexErrors\": true,\n    \"allowSyntheticDefaultImports\": true,\n    \"importHelpers\": true,\n    \"noEmitHelpers\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"declaration\": true,\n    \"declarationMap\": true,\n    \"declarationDir\": angular-js/types\",\n    \"outDir\": \"dist-esm\",\n    \"rootDir\": \"angular-js/src\"\n  },\n  \"include\": [\n    \"./src/*.ts\"\n  ],\n  \"exclude\": [\n    \"node_modules\"\n  ]\n}\n</code></pre>\n"}, {"tags": ["node.js", "mongodb", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "is_accepted": true, "score": 2, "last_activity_date": 1565131584, "creation_date": 1565131584, "answer_id": 57384921, "question_id": 57384807, "link": "https://stackoverflow.com/questions/57384807/how-to-solve-circular-dependency-error-in-nodejs/57384921#57384921", "title": "How to solve Circular dependency error in nodejs?", "body": "<p>The function <code>insertOne()</code> doesn't return an <code>_id</code>, it returns a <a href=\"https://mongodb.github.io/node-mongodb-native/3.2/api/Collection.html#~insertOneWriteOpResult\" rel=\"nofollow noreferrer\"><code>InsertOneWriteOpResult</code></a>. This has a <code>connection</code> field which will likely have circular references.</p>\n\n<p>Use <code>insertedId</code> from the result object instead of the whole object itself.</p>\n"}], "owner": {"reputation": 1562, "user_id": 8539680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/deSEA.png?s=128&g=1", "display_name": "Rohan Agarwal", "link": "https://stackoverflow.com/users/8539680/rohan-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57384921, "answer_count": 1, "score": 0, "last_activity_date": 1565131584, "creation_date": 1565130685, "question_id": 57384807, "link": "https://stackoverflow.com/questions/57384807/how-to-solve-circular-dependency-error-in-nodejs", "title": "How to solve Circular dependency error in nodejs?", "body": "<p>I am executing the following code inside a post request:</p>\n\n<pre><code>try{\n  const _id = await db.collection('UserInformation').insertOne(userObj);\n  await db.collection('LoggedInUser').updateOne({ userId: _id }, { '$set': { \n  'isLoggedIn': true } }, { upsert: true });  \n}\ncatch(e){\n  console.log(e);\n}\n</code></pre>\n\n<p>and I am getting the circular dependency error.</p>\n\n<p>When I comment out the following line, everything works fine.</p>\n\n<pre><code>await db.collection('LoggedInUser').updateOne({ userId: _id }, { '$set': { \n  'isLoggedIn': true } }, { upsert: true });\n</code></pre>\n\n<p>Kindly let me know what may be the issue here and how to rectify it.</p>\n"}, {"tags": ["typescript", "typescript-typings"], "answers": [{"comments": [{"owner": {"reputation": 690, "user_id": 6352986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/396868ca48830abedbc0c02e8125d86d?s=128&d=identicon&r=PG&f=1", "display_name": "Furman", "link": "https://stackoverflow.com/users/6352986/furman"}, "edited": false, "score": 1, "creation_date": 1565157421, "post_id": 57386444, "comment_id": 101258568, "body": "Works like charm, very clever!"}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 6, "last_activity_date": 1565147324, "creation_date": 1565147324, "answer_id": 57386444, "question_id": 57384765, "link": "https://stackoverflow.com/questions/57384765/typescript-conditional-exclude-type-exclude-from-interface/57386444#57386444", "title": "TypeScript conditional Exclude type exclude from interface", "body": "<p>To get this effect you need to figure out which properties match <code>Function</code>, and then selectively exclude them.  Equivalently we find which properties do not match <code>Function</code>, and then selectively include them.  This is more involved than just excluding some pieces of a union; it involves <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types\" rel=\"noreferrer\">mapped types</a> as well as <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#conditional-types\" rel=\"noreferrer\">conditional types</a>.</p>\n\n<p>One way to do this is as follows:</p>\n\n<pre><code>type ExcludeMatchingProperties&lt;T, V&gt; = Pick&lt;\n  T,\n  { [K in keyof T]-?: T[K] extends V ? never : K }[keyof T]\n&gt;;\n\ntype T02 = ExcludeMatchingProperties&lt;Test, Function&gt;;\n// type T02 = {\n// a: string;\n// b: number;\n// }\n</code></pre>\n\n<hr>\n\n<p>Examining <code>ExcludeMatchingProperties&lt;T, V&gt;</code>, we can note that the type <code>{ [K in keyof T]-?: T[K] extends V ? never : K }[keyof T]</code> will return the keys in <code>T</code> whose properties are not assignable to <code>V</code>.  </p>\n\n<p>If <code>T</code> is <code>Test</code> and <code>V</code> is <code>Function</code>, this becomes something like </p>\n\n<pre><code>{ \n  a: string extends Function ? never : \"a\"; \n  b: number extends Function ? never : \"b\"; \n  c: ()=&gt;void extends Function ? never : \"c\" \n}[\"a\"|\"b\"|\"c\"]\n</code></pre>\n\n<p>, which becomes </p>\n\n<pre><code>{ a: \"a\"; b: \"b\"; c: never }[\"a\"|\"b\"|\"c\"]\n</code></pre>\n\n<p>, which becomes </p>\n\n<pre><code>{ a: \"a\"; b: \"b\"; c: never }[\"a\"] | \n{ a: \"a\"; b: \"b\"; c: never }[\"b\"] | \n{ a: \"a\"; b: \"b\"; c: never }[\"c\"]\n</code></pre>\n\n<p>, or </p>\n\n<pre><code>\"a\" | \"b\" | never\n</code></pre>\n\n<p>, or </p>\n\n<pre><code>\"a\" | \"b\"\n</code></pre>\n\n<p>Once we have those keys, we <code>Pick</code> their properties them from <code>T</code> (using the <code>Pick&lt;T, K&gt;</code> <a href=\"https://www.typescriptlang.org/docs/handbook/utility-types.html#picktk\" rel=\"noreferrer\">utility type</a>):</p>\n\n<pre><code>Pick&lt;Test, \"a\" | \"b\"&gt;\n</code></pre>\n\n<p>which becomes the desired type</p>\n\n<pre><code>{\n  a: string,\n  b: number\n}\n</code></pre>\n\n<p>Okay, hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgCoQM5mQbwFDLJwBcyWUoA5gNwHIBGpIArgLb3S2EKkAUAlMgC8APmQA3APbAAJrQC+ePGACeABxQBRAB4IANsxkQAsnDAIAFlQAKUSRqhhgmADyoANMgBqYocmvACADWLnQedDjIANoA0sigyEEQKpIwaAC6ALQA-KSosenIENqQIDIY3sjZyCAQ4tDIpHHyUUkpaajpeCK0yuooqAAMAEzCyDr6hiZmljZ2Dk6u6FieAGLMIAhOkiA9eAD0+8iqGmgjY-iHRKTkVLRXjDVsHFD3R4pAA\" rel=\"noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 690, "user_id": 6352986, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/396868ca48830abedbc0c02e8125d86d?s=128&d=identicon&r=PG&f=1", "display_name": "Furman", "link": "https://stackoverflow.com/users/6352986/furman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "accepted_answer_id": 57386444, "answer_count": 1, "score": 1, "last_activity_date": 1565147324, "creation_date": 1565130339, "question_id": 57384765, "link": "https://stackoverflow.com/questions/57384765/typescript-conditional-exclude-type-exclude-from-interface", "title": "TypeScript conditional Exclude type exclude from interface", "body": "<p>According to documentation, I can use predefined Exclude type to exclude certain properties from certain type:</p>\n\n<pre><code>type Test = string | number | (() =&gt; void);\n\ntype T02 = Exclude&lt;Test, Function&gt;;\n</code></pre>\n\n<p>However if instead of Test type I'd have Test interface, it doesn't seems to work. How can I achieve similiar result in below case?</p>\n\n<pre><code>interface Test {\n  a: string;\n  b: number;\n  c: () =&gt; void;\n} \n\n// get somehow interface with excluded function properties??\n</code></pre>\n"}, {"tags": ["javascript", "angular", "typescript", "web-worker"], "comments": [{"owner": {"reputation": 170, "user_id": 10370549, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3fCZHbS3Glw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNTrHlwPpV9i9C_AFIRSOQi1_nLPQ/mo/photo.jpg?sz=128", "display_name": "Tethys Zhang", "link": "https://stackoverflow.com/users/10370549/tethys-zhang"}, "edited": false, "score": 0, "creation_date": 1571811855, "post_id": 57384696, "comment_id": 103359531, "body": "Exactly the same problem, I even include the script path in angular.json script but still do not work.. Have you got any updates?"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 4452091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fdr0r.jpg?s=128&g=1", "display_name": "Puneet Sharma", "link": "https://stackoverflow.com/users/4452091/puneet-sharma"}, "edited": false, "score": 1, "creation_date": 1574915723, "post_id": 58735357, "comment_id": 104400142, "body": "If this answer helpfull Please rate up. Thank you"}, {"owner": {"reputation": 1124, "user_id": 1429439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed40f1bce0e0cfbc1502a80d10211c4?s=128&d=identicon&r=PG", "display_name": "C.M.", "link": "https://stackoverflow.com/users/1429439/c-m"}, "edited": false, "score": 0, "creation_date": 1576598923, "post_id": 58735357, "comment_id": 104948270, "body": "For me this introduced all sorts of type conflicts. One way I&#39;ve gotten a worker running under Angular quickly is serving the worker as a .js file from the assets folder."}], "tags": [], "owner": {"reputation": 175, "user_id": 4452091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fdr0r.jpg?s=128&g=1", "display_name": "Puneet Sharma", "link": "https://stackoverflow.com/users/4452091/puneet-sharma"}, "is_accepted": true, "score": 3, "last_activity_date": 1573060433, "creation_date": 1573060433, "answer_id": 58735357, "question_id": 57384696, "link": "https://stackoverflow.com/questions/57384696/the-url-to-web-worker-script-is-not-found-with-angular-7/58735357#58735357", "title": "The URL to Web Worker script is not found with Angular 7+", "body": "<p>I was also facing same issue with this code</p>\n\n<pre><code>const worker = new Worker('./web-worker/messenger.worker');\n</code></pre>\n\n<p>Change to </p>\n\n<pre><code>const worker = new Worker('./web-worker/messenger.worker', { type: `module` });\n</code></pre>\n\n<p>After this I am not getting this issue with web worker.</p>\n\n<blockquote>\n  <p>I am using this code on Angular 8.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 1188562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03398e338d2a6190681c004e32ac2ee4?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Rangel", "link": "https://stackoverflow.com/users/1188562/jo%c3%a3o-rangel"}, "is_accepted": false, "score": 0, "last_activity_date": 1576698840, "creation_date": 1576698840, "answer_id": 59399163, "question_id": 57384696, "link": "https://stackoverflow.com/questions/57384696/the-url-to-web-worker-script-is-not-found-with-angular-7/59399163#59399163", "title": "The URL to Web Worker script is not found with Angular 7+", "body": "<p>For me it just worked by putting the path <code>src/app/web-worker/messenger.worker</code>.</p>\n\n<p>Then try the following:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const worker = new Worker('src/app/web-worker/messenger.worker', { type: `module` });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 10370549, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3fCZHbS3Glw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNTrHlwPpV9i9C_AFIRSOQi1_nLPQ/mo/photo.jpg?sz=128", "display_name": "Tethys Zhang", "link": "https://stackoverflow.com/users/10370549/tethys-zhang"}, "is_accepted": false, "score": 2, "last_activity_date": 1584812486, "creation_date": 1584812486, "answer_id": 60791163, "question_id": 57384696, "link": "https://stackoverflow.com/questions/57384696/the-url-to-web-worker-script-is-not-found-with-angular-7/60791163#60791163", "title": "The URL to Web Worker script is not found with Angular 7+", "body": "<p>Do not forget to run: <code>ng generate web-worker</code> \nAnd then restart the angular serve , if not ,it will not compile your worker file into webpack.</p>\n"}], "owner": {"reputation": 147, "user_id": 9626867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6972d0f1119dfcc1a10b0ae3fb40c230?s=128&d=identicon&r=PG&f=1", "display_name": "Alberto Siurob", "link": "https://stackoverflow.com/users/9626867/alberto-siurob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 1, "accepted_answer_id": 58735357, "answer_count": 3, "score": 1, "last_activity_date": 1584812486, "creation_date": 1565129860, "question_id": 57384696, "link": "https://stackoverflow.com/questions/57384696/the-url-to-web-worker-script-is-not-found-with-angular-7", "title": "The URL to Web Worker script is not found with Angular 7+", "body": "<p>I\u00b4m testing Web Workers and combining them with Angular 7+</p>\n\n<p>This is my app.component.html</p>\n\n<pre><code>&lt;div&gt;\n  &lt;input type=\"text\" name=\"lat\" placeholder=\"Latitude\" #lat (input)=\"updateMap( lat )\"&gt;\n  &lt;input type=\"text\" name=\"lng\" placeholder=\"Longitude\" #lng (input)=\"updateMap( lng )\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This is my app.component.ts</p>\n\n<pre><code>import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  title = 'mapa';\n  coords: any = {lat: 0, lng: 0};\n  worker: Worker;\n\n  ngOnInit() {\n      this.worker = new Worker( './app.component.worker.js' );\n  }\n\n  updateMap( selector: any ) {\n    const key   = selector.getAttribute('name');\n    const value = Number(selector.value);\n    this.coords[ key ] = value;\n\n    this.worker.postMessage( this.coords );\n  }\n}\n</code></pre>\n\n<p>This is my Webworker definition app.component.worker.js</p>\n\n<pre><code>onmessage = ( e ) =&gt; {\n    console.log( e );\n};\n</code></pre>\n\n<p>All the files are at the same level.</p>\n\n<pre><code>project\n -e2e\n -node_modules\n -src\n   -app\n     -app-routing.module.ts\n     -app.component.css\n     -app.component.html\n     -app.component.ts\n     -app.component.worker.js\n   -lot of files\n -lot of files\n</code></pre>\n\n<p>When the local server runs, appears this message</p>\n\n<blockquote>\n  <p>GET <a href=\"http://localhost:4200/app.component.worker.js\" rel=\"nofollow noreferrer\">http://localhost:4200/app.component.worker.js</a> 404 (Not Found)</p>\n</blockquote>\n\n<p>I tried to set as relative path</p>\n\n<pre><code>'./src/app/app.component.worker.js'\n</code></pre>\n\n<p>But stills not working</p>\n\n<p>What is wrong with my code?\nDoes exists a best way to do all with Typescript?</p>\n"}, {"tags": ["angular", "typescript", "angular-httpclient"], "answers": [{"tags": [], "owner": {"reputation": 9413, "user_id": 3534636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/PdxWC.png?s=128&g=1", "display_name": "JayChase", "link": "https://stackoverflow.com/users/3534636/jaychase"}, "is_accepted": false, "score": 0, "last_activity_date": 1565131882, "creation_date": 1565131882, "answer_id": 57384949, "question_id": 57384500, "link": "https://stackoverflow.com/questions/57384500/httpheaders-instantiate-with-constructor-vs-using-set/57384949#57384949", "title": "HttpHeaders instantiate with constructor vs using Set", "body": "<p>It looks like <strong>otpAuth</strong> being a number causes a problem. If it is converted to a string the constructor approach works.</p>\n\n<pre><code>  const httpHeaders = new HttpHeaders ({\n        'X-OTP': '' + otpAuth\n    });\n</code></pre>\n"}], "owner": {"reputation": 6079, "user_id": 6694645, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/RWjiK.jpg?s=128&g=1", "display_name": "Dino", "link": "https://stackoverflow.com/users/6694645/dino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565160715, "creation_date": 1565128471, "last_edit_date": 1565160715, "question_id": 57384500, "link": "https://stackoverflow.com/questions/57384500/httpheaders-instantiate-with-constructor-vs-using-set", "title": "HttpHeaders instantiate with constructor vs using Set", "body": "<p>I noticed a really strange behavior of HttpHeaders not applying correctly if instantiating the custom headers in a constructor.</p>\n\n<pre><code>public signIn(otpAuth): Observable&lt;any&gt; {\n    const url = 'https://jsonplaceholder.typicode.com/todos/1';\n    const httpHeaders = new HttpHeaders ({\n        'X-OTP': otpAuth\n    });\n    return this.http.get(url, {headers: httpHeaders});\n}\n</code></pre>\n\n<p>This will not work, the headers are not visible in a network request. <strong><s>One thing I noticed is if I hardcode the <code>otpAuth</code> it will work as expected.</s> (if hardcoded as string)</strong></p>\n\n<p>The second approach is using <code>HttpHeaders().set()</code> and works without flaws.</p>\n\n<pre><code>public signIn(otpAuth): Observable&lt;any&gt; {\n    const url = 'https://jsonplaceholder.typicode.com/todos/1';\n    const headers = new HttpHeaders().set('X-OTP', otpAuth);\n    return this.http.get(url, {headers: headers});\n}\n</code></pre>\n\n<p><code>otpAuth</code> is always defined. Even if I log it, it is there, so why does the first approach seem to ignore it?</p>\n\n<p><a href=\"https://stackblitz.com/edit/angular-5w1fgr?file=src%2Fapp%2Fmy.service.ts\" rel=\"nofollow noreferrer\"><strong>STACKBLITZ</strong></a></p>\n"}, {"tags": ["typescript", "react-native", "jestjs", "expo", "react-testing-library"], "owner": {"reputation": 2646, "user_id": 1747336, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17ced1937d8d05804c7e3fdb2f0047a0?s=128&d=identicon&r=PG", "display_name": "TheSoul", "link": "https://stackoverflow.com/users/1747336/thesoul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 410, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1565162065, "creation_date": 1565126552, "last_edit_date": 1565162065, "question_id": 57384184, "link": "https://stackoverflow.com/questions/57384184/react-native-jest-cannot-read-property-default-of-undefined", "title": "react-native jest: cannot read property &#39;default&#39; of undefined", "body": "<p>I have looked at a number of solutions for this problem online but none has worked for me (e.g <a href=\"https://stackoverflow.com/questions/56814268/how-to-mock-a-third-party-react-native-component-with-jest\">this</a>). \nSo I am trying to run my tests in a react-native + expo + typescript project. Here is my test (where I am mocking a dependency):</p>\n\n<pre><code>import * as React from 'react';\nimport { render } from 'react-native-testing-library';\nimport { MyComponent } from './MyComponent';\nimport * as MyDependency from './MyDependency';\n\ndescribe('MyComponent', () =&gt;\n    it('should render', () =&gt; {\n        const mock = jest.spyOn(MyDependency, 'myFunction');\n        mockUser.mockImplementation(() =&gt; {\n            return 'stubbed response';\n        });\n        const { getByText } = render(&lt;MyComponent /&gt;);\n        expect(getByText('Hello World')).toBeTruthy();\n        mockUser.mockRestore();\n    }));\n</code></pre>\n\n<p><code>MyDependency.ts</code> is a file which contains a very simple function:</p>\n\n<pre><code>export const myFunction = () =&gt; {\n  return 'long backend process...'\n}\n</code></pre>\n\n<p>This function is referenced and called inside the component (<code>MyComponent</code>) under test.</p>\n\n<p>And here is my <code>jest.config.js</code> file:</p>\n\n<pre><code>const { defaults: tsjPreset } = require(\"ts-jest/presets\");\nmodule.exports = {\n  ...tsjPreset,\n  preset: \"jest-expo\",\n  transform: {\n    \"^.+\\\\.tsx?$\": \"ts-jest\",\n    '^.+\\\\.tsx?$': 'babel-jest',\n    \"^.+\\\\.js$\": \"&lt;rootDir&gt;/node_modules/react-native/jest/preprocessor.js\",\n  },\n  testMatch: [\"**/__tests__/**/*.ts?(x)\", \"**/?(*.)+(spec|test).ts?(x)\"],\n  moduleFileExtensions: [\"js\", \"ts\", \"tsx\"],\n  globals: {\n    \"ts-jest\": {\n      tsConfig: \"tsconfig.json\",\n      diagnostics: false\n    }\n  }\n};\n</code></pre>\n\n<p>But every time I run <code>yarn test</code>, I get the error:\n<code>Typeerror: cannot read property 'default' of undefined</code></p>\n\n<p>Any help would be greatly appreciated</p>\n"}, {"tags": ["javascript", "node.js", "typescript", "jestjs", "nestjs"], "answers": [{"tags": [], "owner": {"reputation": 32017, "user_id": 4694994, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Fnpae.jpg?s=128&g=1", "display_name": "Kim Kern", "link": "https://stackoverflow.com/users/4694994/kim-kern"}, "is_accepted": true, "score": 1, "last_activity_date": 1565178433, "creation_date": 1565178433, "answer_id": 57393748, "question_id": 57383233, "link": "https://stackoverflow.com/questions/57383233/how-to-create-custom-provider-for-third-party-library-in-nestjs-with-access-to-r/57393748#57393748", "title": "How to create custom provider for third-party library in nestjs with access to request and response", "body": "<p>In this case I'd suggest to write a facade (wrapper) around the library. The facade does not need to be unit tested since it simply propagates the parameters and does not contain logic (you could write a \"facade test\" instead which essentially tests the library code, I'd say an integration test is a better fit):</p>\n\n<pre><code>@Injectable()\nexport class WebHookClientFacade {\n  create(request, response) {\n    return new dialogflow.WebhookClient({ request, response });\n  }\n}\n</code></pre>\n\n<p>And use the facade in your controller that is now testable:</p>\n\n<pre><code>constructor(private webHookClientBuilder: WebHookClientFacade) {}\n\n@Post()\nasync fulfill(@Req() request: Request, @Res() response: Response) {\n    const agent = this.webHookClientBuilder.create(request, response);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 15073, "user_id": 2279488, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/c41VI.jpg?s=128&g=1", "display_name": "Reza", "link": "https://stackoverflow.com/users/2279488/reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 57393748, "answer_count": 1, "score": 1, "last_activity_date": 1565178451, "creation_date": 1565121784, "last_edit_date": 1565178451, "question_id": 57383233, "link": "https://stackoverflow.com/questions/57383233/how-to-create-custom-provider-for-third-party-library-in-nestjs-with-access-to-r", "title": "How to create custom provider for third-party library in nestjs with access to request and response", "body": "<p>I have a controller in <code>nestjs</code> as below</p>\n\n<pre><code>import * as dialogflow from 'dialogflow-fulfillment';\nimport { Request, Response } from 'express';\n\n@Controller('dialogflow-fulfillment')\nexport class DialogflowFulfillmentController {\n\n    @Post()\n    async fulfill(@Req() request: Request, @Res() response: Response) {\n\n        const agent = new dialogflow.WebhookClient({ request, response });\n\n    }\n}\n</code></pre>\n\n<p>Now for being able to unit test this controller I want to use custom provider and provide an instance of WebhookClient.</p>\n\n<p>Something like below</p>\n\n<pre><code>    {\n      provide: 'WebhookService',\n      useFactory: async () =&gt; new dialogflow.WebhookClient({??,??})\n    }\n</code></pre>\n\n<p>but problem is I need to get access to instance of <code>request</code> and <code>response</code> to create a new instance.</p>\n\n<p>How can I do that? And how to inject it in each calls of <code>fulfill</code>?</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 4832, "user_id": 258894, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4e52f8ae459fe3a2793b570a851275e6?s=128&d=identicon&r=PG", "display_name": "GaryO", "link": "https://stackoverflow.com/users/258894/garyo"}, "edited": false, "score": 0, "creation_date": 1565121691, "post_id": 57383182, "comment_id": 101250745, "body": "Yeah, I get that it&#39;s a weird case. I don&#39;t intend to do it often. I have a particular use case in mind for this though. Given that, how can I import my type with its alias and make sure my implementation conforms to that type?"}, {"owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "reply_to_user": {"reputation": 4832, "user_id": 258894, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4e52f8ae459fe3a2793b570a851275e6?s=128&d=identicon&r=PG", "display_name": "GaryO", "link": "https://stackoverflow.com/users/258894/garyo"}, "edited": false, "score": 1, "creation_date": 1565127490, "post_id": 57383182, "comment_id": 101252690, "body": "<code>import { a as alias }</code> is the main syntax. To define a function that uses a specific namespace, use <code>const functionName: functionType = () =&gt; { .. implementation .. };</code>"}], "tags": [], "owner": {"reputation": 74246, "user_id": 80911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9e9b4f80c65dc6076d74cd421084e4fc?s=128&d=identicon&r=PG", "display_name": "Evert", "link": "https://stackoverflow.com/users/80911/evert"}, "is_accepted": false, "score": 1, "last_activity_date": 1565121583, "creation_date": 1565121583, "answer_id": 57383182, "question_id": 57383099, "link": "https://stackoverflow.com/questions/57383099/typescript-function-declaration-separate-from-implementation/57383182#57383182", "title": "Typescript function declaration separate from implementation", "body": "<p>In typescript definitions and implementations are in the same namespace.</p>\n\n<p>If you want to have a type, and an implementation that fulfills that type, they must have different names.</p>\n\n<p>However, when you import a type, you can give it an alias allowing you to use the same name in 2 different files.</p>\n\n<p>I would question the sanity of doing this for every function you write though. Even if it's a habit, it tends to be a good idea to try to mimic what developers in a new ecosystem do, before introducing your own variations to it. Master the rules before you break them.</p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 3, "last_activity_date": 1565122296, "creation_date": 1565122296, "answer_id": 57383335, "question_id": 57383099, "link": "https://stackoverflow.com/questions/57383099/typescript-function-declaration-separate-from-implementation/57383335#57383335", "title": "Typescript function declaration separate from implementation", "body": "<p>TypeScript doesn't support forward function declarations like this.  In the future it <a href=\"https://github.com/microsoft/TypeScript/issues/31894\" rel=\"nofollow noreferrer\">might support forward type/interface declarations</a>, but I don't know if that would help your use case (and it's not available in TS as of TS3.5 anyway)</p>\n\n<hr>\n\n<p>Workaround: instead of trying to <code>declare</code> your function, maybe give it a type:</p>\n\n<pre><code>type FooFuncType = (s: string, i: number) =&gt; number; // int ain't a thing in JS/TS\n</code></pre>\n\n<p>And then later when you implement your function</p>\n\n<pre><code>function foo(s: string, i: number) {\n  return s.length + i;\n}\n</code></pre>\n\n<p>You can create either a value or type artifact that only compiles cleanly if <code>foo</code> conforms to <code>FooFuncType</code>:</p>\n\n<pre><code>const fooIsRightType: FooFuncType = foo; // okay\n// or\ntype FooIsRightType&lt;T extends FooFuncType = typeof foo&gt; = true; // okay\n</code></pre>\n\n<p>If you do something that doesn't match, like</p>\n\n<pre><code>function foo(s: string, i: number) {\n  return s + i;\n}\n</code></pre>\n\n<p>You get errors:</p>\n\n<pre><code>const fooIsRightType: FooFuncType = foo; // error\n//    ~~~~~~~~~~~~~~ &lt;-- string is not assignable to number\n// or\ntype FooIsRightType&lt;T extends FooFuncType = typeof foo&gt; = true; // error\n//   -------------------------------------&gt; ~~~~~~~~~~\n// (s: string, i: number)=&gt;string does not satisdy FooFuncType\n</code></pre>\n\n<p>Hope that helps; good luck!</p>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/HYQwtgpgzgDiDGEAEB5A1iAnkg3gKCSQBdMZkAxAe0vIFdh4AVU5AXiQAooAuJKIgE4BLYAHMANEiG9gtMACMIAgJRJWAPiSyFSgNxIA9AanAiSECIDkZkMQAWI0SaQApAMoHGbvASQAzengiIUpgf2ouXn5hMUlpLTlFFVxfQgEIIloBMKgAOgAbCDEiOyQAaildXwBfX3hQ-nDKAEkoACUhUTsiZjJeKhpA3rYm-SMkSgxMX3HKAV8SMiQB1o6unpYAHkYkCAAPIiKAEyhl6joGYbViFko-Js12QVoIMeNJrDxavFBIWARkAAhEBHFKERYUc5DFjXSJ8QSOOIyRJKVQaBI6ARvEw2Kw2eyOZzuTzeXwBBjBUJNOHRRFSZGY1T4QhpDJZHLlSo1OoNMx+airTrdYb9KGXGHsfmUbFKARzGbGFkAPxVqrVaqQmwAtFr4TEnEJTsBKDYoFBOqB5IViJQMUkFRN5uCYSt2kKNmRtrsDsdTgMLkwJTcyHcHtdnq9DMZZfLCONCDrE0nkynU2mdZp1eqHTSEbF6XbURpaWIkEdKNAtCa+CBglAjth-dCyF88EA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 4832, "user_id": 258894, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4e52f8ae459fe3a2793b570a851275e6?s=128&d=identicon&r=PG", "display_name": "GaryO", "link": "https://stackoverflow.com/users/258894/garyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1226, "favorite_count": 0, "accepted_answer_id": 57383335, "answer_count": 2, "score": 2, "last_activity_date": 1565122296, "creation_date": 1565121206, "question_id": 57383099, "link": "https://stackoverflow.com/questions/57383099/typescript-function-declaration-separate-from-implementation", "title": "Typescript function declaration separate from implementation", "body": "<p>I'd like to write a specification for a set of Typescript functions with the implementations in a separate file, and then have tsc check that the actual implementations match the specification.</p>\n\n<p>Something like this:</p>\n\n<p>f-spec.ts:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export declare function foo(s: string, i: int): int;\n</code></pre>\n\n<p>and then in another source file:</p>\n\n<p>f.ts:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// import { foo } from './f-spec' &lt;&lt;&lt; Doesn't work, gives error\nexport foo(s: string, i: int) { return i }\n</code></pre>\n\n<p>When I actually try to include that import, I get an error \"Import declaration conflicts with local definition\".</p>\n\n<p>How should I declare the function in one file and implement it in a separate file? (Yes, I'm an old C++ guy and thinking about this as if it were a C++ header file, I know. But this is how I need it in this case.)</p>\n"}, {"tags": ["typescript", "node-modules"], "answers": [{"comments": [{"owner": {"reputation": 2084, "user_id": 1608979, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/1gcCJ.jpg?s=128&g=1", "display_name": "DennyHiu", "link": "https://stackoverflow.com/users/1608979/dennyhiu"}, "edited": false, "score": 0, "creation_date": 1583131484, "post_id": 57383664, "comment_id": 106999210, "body": "I know it&#39;s late, but do you still remember where do you get this from ?  I had fixed the same problem with my code, thanks to your explanation"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "reply_to_user": {"reputation": 2084, "user_id": 1608979, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/1gcCJ.jpg?s=128&g=1", "display_name": "DennyHiu", "link": "https://stackoverflow.com/users/1608979/dennyhiu"}, "edited": false, "score": 0, "creation_date": 1583168099, "post_id": 57383664, "comment_id": 107016822, "body": "Where do I get what from?"}], "tags": [], "owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "is_accepted": true, "score": 17, "last_activity_date": 1611332720, "last_edit_date": 1611332720, "creation_date": 1565123830, "answer_id": 57383664, "question_id": 57383049, "link": "https://stackoverflow.com/questions/57383049/typescript-esnext-compiler-option-destroys-es6-import-from-external-lib/57383664#57383664", "title": "Typescript: esnext compiler option destroys es6 import from external lib", "body": "<p>When <code>&quot;module&quot;</code> is anything aside from <code>&quot;commonjs&quot;</code> you need to specifiy a <code>&quot;moduleResolution&quot;</code> value of <code>&quot;node&quot;</code>. Specifying <code>&quot;commonjs&quot;</code> sets this implicitly.</p>\n<p>I strongly recommend that you always specify the output module format explicitly.</p>\n<p>Additionally, despite the names of certain options, <code>&quot;target&quot;</code> and <code>&quot;module&quot;</code> are independent and orthogonal. They mean very different things and must not be confused.</p>\n<pre><code>{\n  &quot;compilerOptions&quot;: {\n    &quot;outDir&quot;: &quot;./dist/&quot;,\n    &quot;module&quot;: &quot;esnext&quot;,\n    &quot;moduleResolution&quot;: &quot;node&quot;,\n    &quot;target&quot;: &quot;esnext&quot;, // this isn't relevant\n    &quot;allowJs&quot;: true,\n    &quot;sourceMap&quot;: true\n  }\n}\n</code></pre>\n<p><code>&quot;commonjs&quot;</code> is an <em>output</em> module format. ESNext <code>import(...)</code> statements are a transpiled into the output module format just like other module syntax such as ES2015 <code>import</code> and <code>export</code> statements.</p>\n<p>When you specify <code>--module esnext</code>, you are telling TypeScript not to transpile any module syntax at all. That's the point of <code>--module</code> it specifies the output module format, not the source module format.</p>\n"}], "owner": {"reputation": 1280, "user_id": 10226440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c441d4834677341f39d2cd431570562d?s=128&d=identicon&r=PG&f=1", "display_name": "MaximilianMairinger", "link": "https://stackoverflow.com/users/10226440/maximilianmairinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9044, "favorite_count": 4, "accepted_answer_id": 57383664, "answer_count": 1, "score": 13, "last_activity_date": 1611332720, "creation_date": 1565121008, "question_id": 57383049, "link": "https://stackoverflow.com/questions/57383049/typescript-esnext-compiler-option-destroys-es6-import-from-external-lib", "title": "Typescript: esnext compiler option destroys es6 import from external lib", "body": "<p>When setting ether the <code>module</code> or <code>target</code> property of the compiler options to esnext (id like to use <code>import(\"example\")</code> statements), es6 import statements stop working for <code>npm install</code>ed librarys (local modules sill work: e.g. <code>\"./test.ts\"</code>).</p>\n\n<p>So this <code>import * as asd from \"testmodule\";</code> throws <code>cannot find module 'testmodule'</code>. However omitting both properies makes it work. Why is this and what es standard should I use to keep <code>import(\"example\")</code> and <code>import * as asd from \"testmodule\";</code> statements?</p>\n\n<hr>\n\n<p>Here is my full tsconfig.json:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"outDir\": \"./dist/\",\n    \"module\": \"esnext\",\n    \"target\": \"esnext\",\n    \"allowJs\": true,\n    \"sourceMap\": true\n  }\n}\n\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "is_accepted": true, "score": 3, "last_activity_date": 1565119916, "creation_date": 1565119916, "answer_id": 57382833, "question_id": 57382644, "link": "https://stackoverflow.com/questions/57382644/angular-ngmodule-imports-dont-see-modules-if-use-a-concat-for-combine-sev/57382833#57382833", "title": "Angular @NgModule imports don`t see modules if use a [].concat() for combine several arrays", "body": "<p>It's difficult to answer this question, because this aspect of the Angular compiler doesn't have much documentation. Under the <em>hood</em> the AOT compiler <em>rewrites</em> a lot of the metadata used by the decorators, and I would suspect this is an example of something it can not transform correctly.</p>\n\n<p>I can tell you that this has nothing to do with TypeScript or JavaScript. It is a problem with the AOT compiler.</p>\n\n<p>You can read about transformers in this blog:</p>\n\n<p><a href=\"https://blog.angularindepth.com/do-you-know-how-angular-transforms-your-code-7943b9d32829\" rel=\"nofollow noreferrer\">https://blog.angularindepth.com/do-you-know-how-angular-transforms-your-code-7943b9d32829</a></p>\n\n<p>You can find the source code to the transformers here:</p>\n\n<p><a href=\"https://github.com/angular/angular/tree/master/packages/compiler-cli/src/transformers\" rel=\"nofollow noreferrer\">https://github.com/angular/angular/tree/master/packages/compiler-cli/src/transformers</a></p>\n"}], "owner": {"reputation": 1013, "user_id": 11664469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e25ff15ab546620ddda37e3dcfa2d145?s=128&d=identicon&r=PG&f=1", "display_name": "Maksym Petrenko", "link": "https://stackoverflow.com/users/11664469/maksym-petrenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57382833, "answer_count": 1, "score": 5, "last_activity_date": 1565119916, "creation_date": 1565119047, "question_id": 57382644, "link": "https://stackoverflow.com/questions/57382644/angular-ngmodule-imports-dont-see-modules-if-use-a-concat-for-combine-sev", "title": "Angular @NgModule imports don`t see modules if use a [].concat() for combine several arrays", "body": "<p>I have a lot of modules and want to sort and split it by several arrays by types</p>\n\n<pre><code>const aModules: any[] = [\n  Module1,\n  Module2,\n  Module3,\n  Module4\n];\n\nconst bModules: any[] = [\n  Module5,\n  Module6,\n  Module7,\n  Module8\n]\n</code></pre>\n\n<p>It will works if use a spread operator</p>\n\n<pre><code>imports: [Module0, ...aModules, ...bModules]\n</code></pre>\n\n<p>But it not works if use a concat method, any components will not works if use next approach:</p>\n\n<pre><code>imports: [Module0].concat(aModules, bModules)\n</code></pre>\n\n<p>What difference for typescript compiler for this both methods? Cause if we see</p>\n\n<pre><code>console.log([Module0, ...aModules, ...bModules]);\nconsole.log([Module0].concat(aModules, bModules));\n</code></pre>\n\n<p>Both results looks the same</p>\n"}, {"tags": ["reactjs", "typescript", "types", "material-ui"], "comments": [{"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 0, "creation_date": 1565118627, "post_id": 57382423, "comment_id": 101249385, "body": "<code>But it give error of syntax in consola, and VSC shows few errors about types.</code> Please show us those errors."}, {"owner": {"reputation": 160, "user_id": 7550044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0b2d6889c4465bad60ce18f91af4dab8?s=128&d=identicon&r=PG&f=1", "display_name": "Eva", "link": "https://stackoverflow.com/users/7550044/eva"}, "reply_to_user": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "edited": false, "score": 0, "creation_date": 1565120994, "post_id": 57382423, "comment_id": 101250418, "body": "@Nicholas Tower, I edited my post, added it"}], "owner": {"reputation": 160, "user_id": 7550044, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0b2d6889c4465bad60ce18f91af4dab8?s=128&d=identicon&r=PG&f=1", "display_name": "Eva", "link": "https://stackoverflow.com/users/7550044/eva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565120644, "creation_date": 1565118046, "last_edit_date": 1592644375, "question_id": 57382423, "link": "https://stackoverflow.com/questions/57382423/material-ui-usestate-give-error-of-types-in-typescript", "title": "material-ui, useState give error of types in typescript", "body": "<p>I try to use drawer from material-ui typescript. Unfortunately they have some problem with types, I think so.</p>\n<p>So according to material-ui dock I should to add:</p>\n<pre><code>    const [open, setOpen] = React.useState(false);\n</code></pre>\n<p>But it give error of syntax in consola, and VSC shows few errors about types:</p>\n<blockquote>\n<p>Parameter 'open' implicitly has an 'any' type</p>\n<p>Parameter 'setOpen' implicitly has an 'any' type</p>\n<p>'useState', which lacks return-type annotation, implicitly has an 'any' return type</p>\n</blockquote>\n<p>So I found that I can use it that:</p>\n<pre><code>...\nexport interface iOpen {\n    open: any;\n}\n\nclass Topbar extends Component&lt;{}, iOpen&gt;{\n\n    const [open, setOpen] = React.useState&lt;iOpen&gt;(false);\n...\n</code></pre>\n<p>I thing there is problem, or with &quot;open&quot; variable that should have types, or useState, but I really don't know how it should to looks like. I'm new in types.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565119644, "post_id": 57382380, "comment_id": 101249817, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/57325035/in-typescript-is-it-possible-to-infer-string-literal-types-for-discriminated-uni\">In TypeScript is it possible to infer string literal types for Discriminated Unions from input type of string?</a>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565119718, "post_id": 57382380, "comment_id": 101249846, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/56043642/can-i-use-type-as-value-or-correctly-infer-generic-class-type-from-constructor\">Can I use type as value (or correctly infer generic class type from constructor parameter)?</a>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1565119768, "post_id": 57382380, "comment_id": 101249867, "body": "<a href=\"https://github.com/Microsoft/TypeScript/issues/26242\" rel=\"nofollow noreferrer\">Relevant GitHub issue</a>"}], "answers": [{"comments": [{"owner": {"reputation": 860, "user_id": 3080299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C4uFd.jpg?s=128&g=1", "display_name": "wilsonhobbs", "link": "https://stackoverflow.com/users/3080299/wilsonhobbs"}, "edited": false, "score": 0, "creation_date": 1565118431, "post_id": 57382462, "comment_id": 101249309, "body": "I need the &lt;T&gt; generic at the top level because it returns an object map of functions, as in the example I posted."}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "reply_to_user": {"reputation": 860, "user_id": 3080299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C4uFd.jpg?s=128&g=1", "display_name": "wilsonhobbs", "link": "https://stackoverflow.com/users/3080299/wilsonhobbs"}, "edited": false, "score": 1, "creation_date": 1565118607, "post_id": 57382462, "comment_id": 101249381, "body": "So you are saying you need to <i>fix</i> <code>T</code> to <i>prevent</i> it from being inferred later?"}, {"owner": {"reputation": 860, "user_id": 3080299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C4uFd.jpg?s=128&g=1", "display_name": "wilsonhobbs", "link": "https://stackoverflow.com/users/3080299/wilsonhobbs"}, "edited": false, "score": 1, "creation_date": 1565122960, "post_id": 57382462, "comment_id": 101251185, "body": "Kinda. T and Tkey need to be fixed, and both need to be declared on the top level. This is because it returns an object of functions, and they all use that T and Tkey. It&#39;s just that, since Tkey is the exact same as the function argument, there should be someway to have Tkey inferred automatically, so that I can call <code>createActions&lt;SomeTValue&gt;(&#39;myKeyValue&#39;)</code>"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "reply_to_user": {"reputation": 860, "user_id": 3080299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C4uFd.jpg?s=128&g=1", "display_name": "wilsonhobbs", "link": "https://stackoverflow.com/users/3080299/wilsonhobbs"}, "edited": false, "score": 0, "creation_date": 1565123476, "post_id": 57382462, "comment_id": 101251356, "body": "It looks like that isn&#39;t supported."}], "tags": [], "owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "is_accepted": false, "score": 2, "last_activity_date": 1565118739, "last_edit_date": 1565118739, "creation_date": 1565118244, "answer_id": 57382462, "question_id": 57382380, "link": "https://stackoverflow.com/questions/57382380/how-can-you-imply-some-parts-of-the-generic-from-usage-in-typescript/57382462#57382462", "title": "How can you imply some parts of the generic from usage in TypeScript?", "body": "<p>Simply declare the type parameter at the appropriate level, that which corresponds to its parameter inference context, to gain the inference desired</p>\n\n<pre><code>function createActions&lt;Tkey extends string&gt;(key: Tkey) {\n    return function&lt;T&gt;(obj: T) {\n        return {[key]: obj};\n    };\n}\n\nconst createPerson = createActions('person');\n\nconst hasPerson = createPerson({name: 'Robert', id: 1});\n\nconsole.log(hasPerson.person.name);\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html#code/GYVwdgxgLglg9mABBATgUwIZTQQWvMAZwB4AVAazQE9E0APbMAE0MUKhRjAHMA+ACkpUAXIgrUAlIgDeAKESJ0UECiShIsBGQFwARgCtRpKXIUKlKpNMQBtIQF1Re-YgC+AbnlvPr2bIgI7MjoWGgACmgohAiIALzBmNh4mkT8AEQADpHRYGkSnv6BUIgAFhiEEVEx8aiJ4dkI-NZgGAC2aKJpAEp6kVBpADSIMEyiAIxu+X5lFQ1gAHRZVQst7bJAA\" rel=\"nofollow noreferrer\">Playground link</a></p>\n"}], "owner": {"reputation": 860, "user_id": 3080299, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C4uFd.jpg?s=128&g=1", "display_name": "wilsonhobbs", "link": "https://stackoverflow.com/users/3080299/wilsonhobbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565118739, "creation_date": 1565117866, "question_id": 57382380, "link": "https://stackoverflow.com/questions/57382380/how-can-you-imply-some-parts-of-the-generic-from-usage-in-typescript", "title": "How can you imply some parts of the generic from usage in TypeScript?", "body": "<p>I'm sure there is a way to do this, but I'm not quite sure how I'd go about doing this. We have a method called <code>createActions</code>, which takes an object type and a string to act as the key.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function createActions&lt;T, Tkey extends string&gt;(key: Tkey) {\n    return function(obj: T) {\n        return {[key]: obj}\n    }\n}\n</code></pre>\n\n<p>I'd like to be able to infer Tkey \u2013 however, <code>T</code> should be defined for good typing. The use case is so that I can access whatever property the developer defines in a well-typed way. In other words, if the supplied key is <code>a</code>, <code>createActions('a')({}).b</code> will throw a compiler error since <code>b</code> does not exist on type <code>{a: {}}</code>.</p>\n\n<p>This is a bit of an extrapolation of the actual implementation, which can be found here: <a href=\"https://github.com/CaliStyle/ngrx-poly/blob/master/src/app/ngrx-poly/actions/depth-one-action-map.ts\" rel=\"nofollow noreferrer\">https://github.com/CaliStyle/ngrx-poly/blob/master/src/app/ngrx-poly/actions/depth-one-action-map.ts</a>.\n Does anyone know how to do something like this?</p>\n"}, {"tags": ["typescript", "promise"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 0, "creation_date": 1565118119, "post_id": 57382327, "comment_id": 101249172, "body": "What value (ie type safety) is added <code>| Promise&lt;T&gt;</code>. This would work just as well: <a href=\"https://www.typescriptlang.org/play/#code/KYDwDg9gTgLgBASwHY2FAZgQwMbDgWQiQRmmABMB5MNTGBIuAbwCg44AeAFTgF45MSAJ4A+ABQQaUOgyQA5TAFtgALjgBnGFGQBzADRxJtekTViAlHxFwu5tVwDcLAL4sW2ADaZ16uAA1mNjgwbQA3OjxFIhIyKikZIgBCNUJiUigKamNZILAAVwAjDwRsAXJyOTzFArR1AEF1ISRsMSQARjUkKpqoAyQAJk7utD6AZiHqkbgkABYJnrs4AAUoCEUEdWAOLsmoa1Z2dgyYPKgkOBgACw2AOii02KzpEyQxACJMcsrd9TeDCysy1W602Nwy6ggHlCwFabTgAGppv0EdNRijZuZzE52K5XG58SwgA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/#code/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16348, "user_id": 1287183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d77d4eb94f1394ff4da699b6f65b743?s=128&d=identicon&r=PG", "display_name": "Michael Best", "link": "https://stackoverflow.com/users/1287183/michael-best"}, "edited": false, "score": 0, "creation_date": 1565132317, "post_id": 57382545, "comment_id": 101253876, "body": "I need both possible types because my implementation of this interface needs to distinguish between them. Your second solution therefore works well. Thanks."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 16348, "user_id": 1287183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d77d4eb94f1394ff4da699b6f65b743?s=128&d=identicon&r=PG", "display_name": "Michael Best", "link": "https://stackoverflow.com/users/1287183/michael-best"}, "edited": false, "score": 0, "creation_date": 1565159506, "post_id": 57382545, "comment_id": 101259316, "body": "@MichaelBest if it&#39;s just an implementation detail why not just use a separate implementation signature:<a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgLIHsTDOqEAmA8gA7RxjCbIDeAUMsgDwAqyAvMnCAJ4B8AFOlJRylEADk4AWwgAuZAGcwUUAHMANMiFkKmefwCU7XsmYH5zANy0AvrRgBXEAl0hkUzNlwESOsS3ZOHgFtEVdJGXklFRANLWFRPWRDY1NzU2tHZ1d3Txw8IgTXFhCisQi5RWU1TVDEkH0jNhMABSh0KWAFCBLkAB80+TaOrp7mEwHWOgY8MAcoNzrXQ2s7WgAbCDB3eQwsfJ8yqg4Pfe9Cv0xLZAB6G-QAayA\" rel=\"nofollow noreferrer\">typescriptlang.org/play/#code/&hellip;</a>"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1565121957, "last_edit_date": 1565121957, "creation_date": 1565118612, "answer_id": 57382545, "question_id": 57382327, "link": "https://stackoverflow.com/questions/57382327/how-do-i-specify-a-return-type-based-on-callbacks-return-type/57382545#57382545", "title": "How do I specify a return type based on callback&#39;s return type?", "body": "<p>I am not sure what is gained by the <code>| Promise&lt;T&gt;</code>. The behavior of the function from a type perspective is actually correct without it. <code>monitoredOperation</code> returns what the callback returns, whatever that is, <code>Promise</code> or otherwise:</p>\n\n<pre><code>interface MonitoredOperation {\n  &lt;T = any&gt;(operationName: string, operation: () =&gt; T): T;\n}\n\nclass X {\n  private monitoredOperation!: MonitoredOperation\n  public addNumbersAsync(n1: number, n2: number, n3: number, n4: number): Promise&lt;number&gt; {\n    return this.monitoredOperation(\"addNumbers\", () =&gt; Promise.resolve(n1 + n2 + n3 + n4));\n  }\n}\n\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgLIHsTDOqEAmA8gA7RxjCbIDeAUMsgDwAqyAvMnCAJ4B8AFOlJRylEADk4AWwgAuZAGcwUUAHMANMiFkKmefwCU7XsmYH5zANy0AvrVoIANnAULkADRr1kxFQDdyFClMbFwCEh0xAEJ5DCwcPCJhUUxvYgBXACNHYAROfHxxdKlM6AUAQQVuEAR+EABGeRBi0qhNEAAmJpbodoBmbpLe5BAAFkHW82QABSh0KWAFCEZmoagTOgYGPDB0qBBkMAALRYA6YPiwpMjMfgAiOAKitYU7zUNjGbmFpdO8BXQjj8EDq9WQAGoRh0ISM+jCxgYDNYGHYbEA\" rel=\"nofollow noreferrer\">Play</a></p>\n\n<p>If you want to keep the <code>Promise</code> in the signature (perhaps for documentation, hinting at special <code>Promise</code> behavior) overloads will work better:</p>\n\n<pre><code>interface MonitoredOperation {\n  &lt;T = any&gt;(operationName: string, operation: () =&gt; Promise&lt;T&gt;): Promise&lt;T&gt;;\n  &lt;T = any&gt;(operationName: string, operation: () =&gt; T): T;\n}\n\nclass X {\n  private monitoredOperation!: MonitoredOperation\n  public addNumbersAsync(n1: number, n2: number, n3: number, n4: number): Promise&lt;number&gt; {\n    return this.monitoredOperation(\"addNumbers\", () =&gt; Promise.resolve(n1 + n2 + n3 + n4));\n  }\n}\n</code></pre>\n\n<p><a href=\"https://www.typescriptlang.org/play/#code/JYOwLgpgTgZghgYwgAgLIHsTDOqEAmA8gA7RxjCbIDeAUMsgDwAqyAvMnCAJ4B8AFOlJRylEADk4AWwgAuZAGcwUUAHMANMiFkKmefwCU7XsgAKUdFOAKILXgfnnL12814Buek1YcufQcKimJIy8koqIBpagbog+kZsJswOyMyeAL60tAgANnAKCsgAGjRexCoAbuQoUpjYuAQkOmIAhPIYWDh4RDFiZQCuAEY5wAic+Pji-VKD0AoAggrcIAj8IACM8iDTs1CaIABMWzvQ+wDMxzOnyCAALJe7KU5WNozbV1AmdAwMeGD9UBAyDAAAtrAA6WqdBo9ZqYfgAIjgEymHwUCM0hmMZgsLwg4LwCnQOQqEDW62QAGobgcqTcznS7gYDJ4GJl0kA\" rel=\"nofollow noreferrer\">Play</a> </p>\n"}], "owner": {"reputation": 16348, "user_id": 1287183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d77d4eb94f1394ff4da699b6f65b743?s=128&d=identicon&r=PG", "display_name": "Michael Best", "link": "https://stackoverflow.com/users/1287183/michael-best"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57382545, "answer_count": 1, "score": 0, "last_activity_date": 1565132271, "creation_date": 1565117641, "last_edit_date": 1565132271, "question_id": 57382327, "link": "https://stackoverflow.com/questions/57382327/how-do-i-specify-a-return-type-based-on-callbacks-return-type", "title": "How do I specify a return type based on callback&#39;s return type?", "body": "<p>The following interface defines a function that takes a callback function and returns the value returned by the callback.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export interface MonitoredOperation {\n    &lt;T = any&gt;(operationName: string, operation: () =&gt; T | Promise&lt;T&gt;): T | Promise&lt;T&gt;;\n}\n</code></pre>\n\n<p>The problem is that if I use this function in a context where the callback will always return one of the types, TypeScript still thinks the outer function can return either type.</p>\n\n<p>For example, if I write the following code,</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>public addNumbersAsync(n1: number, n2: number, n3: number, n4: number): Promise&lt;number&gt; {\n    return this.monitoredOperation(\"addNumbers\", () =&gt; Promise.resolve(n1 + n2 + n3 + n4));\n}\n</code></pre>\n\n<p>TypeScript complains that it can't assign <code>number | Promise&lt;number&gt;</code> to <code>Promise&lt;number&gt;</code>.</p>\n\n<p>I've seen some examples where <code>infer</code> is used to capture the return value of a function, but I'm not sure how to apply that here.</p>\n\n<p>How can I tell TypeScript both the information I have here and that the return types must match?</p>\n\n<p>EDIT:</p>\n\n<p>I need both possible types because my implementation of this interface needs to distinguish between them. If my interface only uses <code>T</code>, I get an error of <code>Type 'Promise&lt;any&gt;' is not assignable to type 'T'</code>. Here is a simplified version:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function monitoredOperation&lt;T&gt;(operationName: string, operation: () =&gt; T | Promise&lt;T&gt;): T | Promise&lt;T&gt; {\n    let onSuccess = (value: T): T =&gt; {\n        broadcast(\"finished\");\n        return value;\n    }\n    let onFailure = (error: any): never =&gt; {\n        broadcast(\"failed\");\n        throw error;\n    }\n\n    try {\n        let result = operation();\n\n        if (isPromise(result)) {\n            return result.then(onSuccess, onFailure);\n        } else {\n            return onSuccess(result);\n        }\n    }\n    catch (e) {\n        onFailure(e);\n    }\n}\n</code></pre>\n"}, {"tags": ["angular", "image", "typescript", "download", "zip"], "comments": [{"owner": {"reputation": 701, "user_id": 4680387, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7986f29d0ade5d7c5789eccc4da51027?s=128&d=identicon&r=PG", "display_name": "Gary", "link": "https://stackoverflow.com/users/4680387/gary"}, "edited": false, "score": 0, "creation_date": 1565118434, "post_id": 57382138, "comment_id": 101249311, "body": "In the browser or in a node.js based server function called from your Angular app?"}], "answers": [{"comments": [{"owner": {"reputation": 1722, "user_id": 1445636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce613754fb9ecb706d600079297cdecc?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1445636/michael"}, "edited": false, "score": 1, "creation_date": 1565529443, "post_id": 57382595, "comment_id": 101375659, "body": "The example provided on the JSZip homepage linked includes taking an image in base64 representation (in this case a gif), and adding it to a zip file. I&#39;d suggest following that pattern. You should be able to use this library either client or server side, as your requirements dictate"}, {"owner": {"reputation": 506, "user_id": 4398257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MT0sS.jpg?s=128&g=1", "display_name": "hashedram", "link": "https://stackoverflow.com/users/4398257/hashedram"}, "edited": false, "score": 0, "creation_date": 1565695150, "post_id": 57382595, "comment_id": 101425153, "body": "Unless the file is immense or requires a lot of processing before download, it should be perfectly fine to convert it into a zip file in the browser. JSZip just converts string buffers to a different format, so it should be equally trivial in the browser."}], "tags": [], "owner": {"reputation": 701, "user_id": 4680387, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7986f29d0ade5d7c5789eccc4da51027?s=128&d=identicon&r=PG", "display_name": "Gary", "link": "https://stackoverflow.com/users/4680387/gary"}, "is_accepted": false, "score": 3, "last_activity_date": 1565119449, "last_edit_date": 1565119449, "creation_date": 1565118843, "answer_id": 57382595, "question_id": 57382138, "link": "https://stackoverflow.com/questions/57382138/angular-4-download-array-of-base64-images-as-zip-file/57382595#57382595", "title": "Angular 4 Download array of base64 images as ZIP file", "body": "<p>You'll probably need to do this on a server in Node.</p>\n\n<p>You have two questions here:</p>\n\n<p><strong>To convert the data string to an image</strong></p>\n\n<p>This is tough in the browser.  You can render the data string as an img tag src and trigger a download of the image via javascript.  I don't think you can write it to disk in the browser though so that a zip file utility can use it.  This would be trivial in Node though.</p>\n\n<p><strong>To create a zip file</strong></p>\n\n<p>You should use an NPM package.  Most are geared toward Node. You might have luck creating zip files directly in the browser using something like <a href=\"https://stuk.github.io/jszip/\" rel=\"nofollow noreferrer\">JSZip</a>.  Search Google for \"npm zip\" to see many other packages.</p>\n"}, {"tags": [], "owner": {"reputation": 3093, "user_id": 7672014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91fd0095c66b334d8946e1aa9cad8ea1?s=128&d=identicon&r=PG&f=1", "display_name": "Swoox", "link": "https://stackoverflow.com/users/7672014/swoox"}, "is_accepted": true, "score": 6, "last_activity_date": 1565615306, "creation_date": 1565615306, "answer_id": 57461824, "question_id": 57382138, "link": "https://stackoverflow.com/questions/57382138/angular-4-download-array-of-base64-images-as-zip-file/57461824#57461824", "title": "Angular 4 Download array of base64 images as ZIP file", "body": "<p>@gary gave a good explanation.\nI found a few examples on stackoverflow:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/51099549/is-it-possible-to-generate-zip-file-and-download-in-angular-4\">Is it possible to generate zip file and download in Angular 4?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/27980612/converting-base64-to-blob-in-javascript\">Converting base64 to blob in javascript</a>\nCan also use <code>@types/jszip</code>.</p>\n\n<p>I builded an example that does the following:</p>\n\n<ul>\n<li>It get the array as you described from an API (mock);</li>\n<li>It convert each item of that array to an blob;</li>\n<li>It add the blob as a file to the zip file;</li>\n<li>And last create the zip file;</li>\n<li>I only had png base64 so change that to jpg.</li>\n</ul>\n\n<p><a href=\"https://stackblitz.com/edit/angular-jzqtrk?file=src%2Fapp%2Fapp.component.ts\" rel=\"noreferrer\">https://stackblitz.com/edit/angular-jzqtrk?file=src%2Fapp%2Fapp.component.ts</a></p>\n"}], "owner": {"reputation": 737, "user_id": 8747207, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh5.googleusercontent.com/-R1BCkXtE1t4/AAAAAAAAAAI/AAAAAAAAABk/04aQ8PYOW6s/photo.jpg?sz=128", "display_name": "Sergio Mendez", "link": "https://stackoverflow.com/users/8747207/sergio-mendez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2073, "favorite_count": 2, "accepted_answer_id": 57461824, "answer_count": 2, "score": 4, "last_activity_date": 1565615306, "creation_date": 1565116682, "question_id": 57382138, "link": "https://stackoverflow.com/questions/57382138/angular-4-download-array-of-base64-images-as-zip-file", "title": "Angular 4 Download array of base64 images as ZIP file", "body": "<p>I'm working in a Angular2 v4 app with Typescript and I need a way to download many images (in base64 format) into a Zip file.</p>\n\n<p>For example:\nI have an array like this (fake base64 images just for example)</p>\n\n<pre><code>data = [\n  'data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAUA ...',\n  'data:image/png;base64, iVBTYu0KGgoBBBBNSUhYUgJJJJUA ...',\n  'data:image/png;base64, CGBHHFGY0goAAAANSUhEUgAAAAUA ...',\n  ...\n]\n</code></pre>\n\n<p>I need a way to download it converting each image to a .jpg or .png image first and then compile all images and dowload as a zip file. Something like this (I dont know the code, I just need something like this)</p>\n\n<pre><code>downloadZip() {\n  const arrayAsJPG = [];\n  this.data.forEach(i =&gt; {\n    const imageInJpg = i.convertToJPGfile(); // this is not code, this is a function that converts the base64 to a jpg file\n    arrayAsJPG.push(imageInJpg);\n  });\n  ZipFileSaver.save(arrayAsJPG, 'myImageReport.zip'); // this isn't code neither, just and interpretation of what I need\n\n}\n</code></pre>\n\n<p>There is any way to make that?</p>\n"}, {"tags": ["javascript", "html", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1970, "user_id": 15526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WqTIm.png?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/15526/steve"}, "is_accepted": true, "score": 0, "last_activity_date": 1565123452, "last_edit_date": 1565123452, "creation_date": 1565116800, "answer_id": 57382164, "question_id": 57382017, "link": "https://stackoverflow.com/questions/57382017/how-to-concatenate-values-using-reactive-forms/57382164#57382164", "title": "How to concatenate values using Reactive Forms?", "body": "<p>One approach is that you can use reference variables to refer to controls within the template. Like so</p>\n\n<pre><code>&lt;label \n id=\"identificationCode\"\n name=\"identificationCode\"&gt;{{reference.value + \" - \" + publicacion.value}}&lt;/label&gt;\n\n&lt;input type=\"text\" \n id=\"reference\"\n name=\"reference\"\n formControlName=\"txtReference\"\n maxlength=\"250\"\n #reference&gt;\n\n&lt;input type=\"text\" \n id=\"publicacion\"\n name=\"publicacion\"\n formControlName=\"txtPublicacion\"\n maxlength=\"250\"\n #publicacion&gt;\n</code></pre>\n\n<p>The important parts are the <code>#reference</code> and <code>#publicacion</code> on each of the inputs. This links the controls to the variables.</p>\n\n<p>You can then use these variables within an Angular interpolation block like <code>{{reference.value + \" - \" + publicacion.value}}</code>. You can combine the values however you want inside this block.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7600806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca49528ba6023d33fd4979ebe1eac1c4?s=128&d=identicon&r=PG&f=1", "display_name": "Rydyell", "link": "https://stackoverflow.com/users/7600806/rydyell"}, "is_accepted": false, "score": 0, "last_activity_date": 1565116948, "creation_date": 1565116948, "answer_id": 57382185, "question_id": 57382017, "link": "https://stackoverflow.com/questions/57382017/how-to-concatenate-values-using-reactive-forms/57382185#57382185", "title": "How to concatenate values using Reactive Forms?", "body": "<p>Try using the form values, just like you'd use in the .ts file.</p>\n\n<pre><code>&lt;label \n     id=\"identificationCode\"\n     name=\"identificationCode\"\n     formControlName=\"lblIdCode\"&gt;\n     {{form.value.reference + ' ' + form.value.publicacion}}\n&lt;/label&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7665, "user_id": 894532, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/epFXH.jpg?s=128&g=1", "display_name": "Maihan Nijat", "link": "https://stackoverflow.com/users/894532/maihan-nijat"}, "is_accepted": false, "score": 2, "last_activity_date": 1565117608, "last_edit_date": 1565117608, "creation_date": 1565117223, "answer_id": 57382242, "question_id": 57382017, "link": "https://stackoverflow.com/questions/57382017/how-to-concatenate-values-using-reactive-forms/57382242#57382242", "title": "How to concatenate values using Reactive Forms?", "body": "<p>Use label to display the information. The label is not meant to bind with Reactive Form. If you need concatenate values to pass to API or for any use then try on TS. User cannot change the value of Label so there is no point to bind it, but just display the concatenated value. </p>\n\n<p>Remove <code>formControlName=\"lblIdCode\"</code> from your label and add <code>for</code> attribute.</p>\n\n<pre><code>&lt;label&gt;{{form.get('txtReference').value}} - {{form.get('txtPublicacion').value}}&lt;/label&gt;\n</code></pre>\n\n<p>And concatenate on TS:</p>\n\n<pre><code>const lblIdCode = this.form.get('txtReference').value + this.form.get('txtPublicacion').value\n</code></pre>\n\n<p><strong>The definition of label:</strong></p>\n\n<p>The HTML  element represents a caption for an item in a user interface.</p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/label</a></p>\n"}, {"tags": [], "owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565119522, "last_edit_date": 1565119522, "creation_date": 1565118359, "answer_id": 57382492, "question_id": 57382017, "link": "https://stackoverflow.com/questions/57382017/how-to-concatenate-values-using-reactive-forms/57382492#57382492", "title": "How to concatenate values using Reactive Forms?", "body": "<p>you can create a get property base of these values like in</p>\n\n<p>componenpe ts </p>\n\n<pre><code>get referencePublicacionValues() : string {\n return `${this.form.get(txtReference).value} ${this.form.get('txtPublicacion').value}`\n}\n</code></pre>\n\n<p><em>template</em> </p>\n\n<pre><code>&lt;label \n     id=\"identificationCode\"\n     name=\"identificationCode\"&gt;\n     {{referencePublicacionValues}}\n&lt;/label&gt;\n</code></pre>\n\n<p>now you have the value in reference Publicacion Values property any change the value will reflect to the ui</p>\n\n<blockquote>\n  <p>you can't use formControlName directive on labels if you want to set\n  the formcontrol <code>lblIdCode</code> you can use <strong>form valueChanges</strong></p>\n</blockquote>\n\n<pre><code>this.form.valueChanges.subscribe( () =&gt; {\n this.form.get('lblIdCode').setValue(this.referencePublicacionValues,{emitEvent: false})\n})\n</code></pre>\n\n<p><a href=\"https://stackblitz.com/edit/ractive-form-without-form-tag-hherdu\" rel=\"nofollow noreferrer\"><strong>demo \ud83d\udd25\ud83d\udd25</strong></a></p>\n"}, {"comments": [{"owner": {"reputation": 18485, "user_id": 3980621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EBFzE.png?s=128&g=1", "display_name": "malbarmavi", "link": "https://stackoverflow.com/users/3980621/malbarmavi"}, "edited": false, "score": 0, "creation_date": 1565165684, "post_id": 57383843, "comment_id": 101262102, "body": "\ud83d\udc4d ,you are completely correct I like the reactive thinking but it &#39;s look like we need to set form control lblIdCode this what I got from the answer not just concat  , this just assimtion in both case you answer goal  work well \ud83c\udf1f"}], "tags": [], "owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "is_accepted": false, "score": 1, "last_activity_date": 1565165477, "last_edit_date": 1565165477, "creation_date": 1565124759, "answer_id": 57383843, "question_id": 57382017, "link": "https://stackoverflow.com/questions/57382017/how-to-concatenate-values-using-reactive-forms/57383843#57383843", "title": "How to concatenate values using Reactive Forms?", "body": "<p>Although given answers work fine. There could be another declarative approach which will take advantage of <code>valueChanges</code> observables of the input text. We can combine the input texts' <code>valuechanges</code> observables and map to the desired output i.e. concatenate the <code>Reference + Publicacion</code> like this:</p>\n\n<p><strong>Component.ts:</strong></p>\n\n<pre><code>export class FormreactiveComponent implements OnInit {\n  lblIdCode$: Observable&lt;string&gt;;\n\n  form = new FormGroup({\n    txtReference: new FormControl(''),\n    txtPublicacion: new FormControl('')    \n   });\n\n  constructor() { }\n\n  ngOnInit() {\n\n    const refCtrl = this.form.get('txtReference');\n    const pubCtrl = this.form.get('txtPublicacion');\n\n    this.lblIdCode$ = combineLatest(refCtrl.valueChanges.pipe(startWith(refCtrl.value)), \n                                   pubCtrl.valueChanges.pipe(startWith(pubCtrl.value)))\n                      .pipe(map(([firstName, lastName]) =&gt; {\n                        return `${firstName} ${lastName}`;\n                      }));\n  }    \n}\n</code></pre>\n\n<p><strong>Template:</strong></p>\n\n<pre><code>&lt;form name=\"form\" [formGroup]=\"form\"&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"txtReference\"&gt;Reference&lt;/label&gt;\n        &lt;input type=\"text\"  class=\"form-control\" formControlName=\"txtReference\"/&gt;            \n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"txtPublicacion\"&gt;Publicacion&lt;/label&gt;\n        &lt;input type=\"text\" class=\"form-control\" formControlName=\"txtPublicacion\"/&gt;            \n      &lt;/div&gt; \n      &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"lblIdCode\"&gt;{{lblIdCode$ | async}}&lt;/label&gt;             \n      &lt;/div&gt;          \n&lt;/form&gt;\n</code></pre>\n\n<p><a href=\"http://%20https://stackblitz.com/edit/angular-6-reactive-forms-hnwbsn?file=src/app/formreactive/formreactive.component.html\" rel=\"nofollow noreferrer\">Working example</a></p>\n"}], "owner": {"reputation": 105, "user_id": 618668, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cba21c20e5ba4ac05f96bfaeb76158fc?s=128&d=identicon&r=PG", "display_name": "White Knight", "link": "https://stackoverflow.com/users/618668/white-knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1895, "favorite_count": 0, "accepted_answer_id": 57382164, "answer_count": 5, "score": 3, "last_activity_date": 1565165477, "creation_date": 1565116121, "last_edit_date": 1565117476, "question_id": 57382017, "link": "https://stackoverflow.com/questions/57382017/how-to-concatenate-values-using-reactive-forms", "title": "How to concatenate values using Reactive Forms?", "body": "<p>I want to concatenate 2 values into 1 label using Reactive Forms.\nIn this case i'm not using ngModel binding.</p>\n\n<pre><code> &lt;label \n                     id=\"identificationCode\"\n                     name=\"identificationCode\"\n                     formControlName=\"lblIdCode\"&gt;______&lt;/label&gt;\n\n&lt;input type=\"text\" \n                        id=\"reference\"\n                        name=\"reference\"\n                        formControlName=\"txtReference\"\n                        maxlength=\"250\"\n                        (change)=\"handleIdCode($event)\"&gt;\n\n&lt;input type=\"text\" \n                        id=\"publicacion\"\n                        name=\"publicacion\"\n                        formControlName=\"txtPublicacion\"\n                        maxlength=\"250\"\n                        (change)=\"handleIdCode($event)\"&gt;\n</code></pre>\n\n<p>I want to concatenate those 2 input text when user is writing and automatically reflect the value into the label.  Is there any way like we do it with model binding without <strong><em>change event</em></strong>??</p>\n"}]