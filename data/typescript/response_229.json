[{"tags": ["typescript", "azure", "tfs", "azure-devops", "azure-pipelines"], "comments": [{"owner": {"reputation": 1173, "user_id": 1793379, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iTg4p.jpg?s=128&g=1", "display_name": "PatrickNolan", "link": "https://stackoverflow.com/users/1793379/patricknolan"}, "edited": false, "score": 0, "creation_date": 1561114112, "post_id": 56369857, "comment_id": 99967348, "body": "Does anyone have any clues?"}], "answers": [{"tags": [], "owner": {"reputation": 1241, "user_id": 1542187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iAeLX.jpg?s=128&g=1", "display_name": "JoshuaTheMiller", "link": "https://stackoverflow.com/users/1542187/joshuathemiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1612229461, "creation_date": 1612229461, "answer_id": 66002486, "question_id": 56369857, "link": "https://stackoverflow.com/questions/56369857/how-to-use-a-connected-service-from-a-custom-azure-devops-extension-index-ts/66002486#66002486", "title": "How to use a connected service from a custom Azure Devops extension index.ts?", "body": "<p>The trick is to use some more functions from <code>azure-pipelines-task-lib/task</code> (in your case, <code>tl</code>):</p>\n<p>If your custom Connected Service adds an authentication scheme of type <code>ms.vss-endpoint.endpoint-auth-scheme-token</code>, then the <code>id</code> of the token input would be <code>apitoken</code>, and the code you would need to add would look something like the following:</p>\n<pre class=\"lang-js prettyprint-override\"><code>const endpoint = tl.getEndpointUrl(serviceString, true);\n// The second parameter here is the name of the associated input \n// value(s) of the specific authenticationSchemes type (more on that later).\nconst token = tl.getEndpointAuthorizationParameter(serviceString, &quot;apitoken&quot;, false)\n</code></pre>\n<p>How do I know this? <a href=\"https://github.com/JoshuaTheMiller/HelloWorld-AzureDevOpsPlugin\" rel=\"nofollow noreferrer\">Experimentation</a>.</p>\n<h2>Other Authentication Types</h2>\n<p>My current experience echoes that of <a href=\"https://jessehouwing.net/vsts-build-release-define-custom-authentication-scheme/\" rel=\"nofollow noreferrer\">others'</a> from the past: <em>Azure DevOps does not play nicely with fully custom Connected Services</em>. It does ship with a few that cover most bases. Depending on which one(s) you use, the value you pass for the second parameter of <code>tl.getEndpointAuthorizationParameter</code> changes:</p>\n<h3>ms.vss-endpoint.endpoint-auth-scheme-token</h3>\n<p>Ships with one standard input:</p>\n<ol>\n<li><code>apitoken</code></li>\n</ol>\n<h3>ms.vss-endpoint.endpoint-auth-scheme-basic</h3>\n<p>Ships with two inputs:</p>\n<ol>\n<li><code>username</code></li>\n<li><code>password</code></li>\n</ol>\n<h2>Example Plus Suggestion</h2>\n<p>Suggestion first: to make your code clearer, rename your <code>serviceString</code> variable to <code>connectedServiceId</code> (or some variation to be clear that is represents the <strong>ID</strong> of your connected service).</p>\n<pre class=\"lang-js prettyprint-override\"><code>import tl = require('azure-pipelines-task-lib/task');\n\nasync function run() {\n    try {\n        const connectedServiceId = tl.getInput('TestService', true);\n\n        if (connectedServiceId == 'bad' || connectedServiceId == undefined) {\n            tl.setResult(tl.TaskResult.Failed, 'Bad input was given');\n            return;\n        }\n\n        const endpoint = tl.getEndpointUrl(connectedServiceId, true);\n        const token = tl.getEndpointAuthorizationParameter(connectedServiceId, &quot;apitoken&quot;, false)\n    }\n    finally {\n        // Probably report some failure here, right?\n    }\n}\n</code></pre>\n<p>Additionally, adding the <code>connectedServiceId == undefined</code> check allows for safe usage of <code>connectedServiceId</code> in later function calls.</p>\n<h2>Examples I found helpful/created</h2>\n<ul>\n<li><a href=\"https://github.com/SonarSource/sonar-scanner-vsts\" rel=\"nofollow noreferrer\">SonarQube's extensions</a></li>\n<li><a href=\"https://github.com/cloudpups/universal-git-tags\" rel=\"nofollow noreferrer\">Universal Git Tags</a></li>\n</ul>\n"}], "owner": {"reputation": 1173, "user_id": 1793379, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iTg4p.jpg?s=128&g=1", "display_name": "PatrickNolan", "link": "https://stackoverflow.com/users/1793379/patricknolan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1612229461, "creation_date": 1559173206, "question_id": 56369857, "link": "https://stackoverflow.com/questions/56369857/how-to-use-a-connected-service-from-a-custom-azure-devops-extension-index-ts", "title": "How to use a connected service from a custom Azure Devops extension index.ts?", "body": "<p>I've written a custom extension for Azure Devops which contains a custom Connected Service and Build task. I can use the Connected Service when configuring the task via the pipeline visual designer to select a service and then use that service to populate a picklist with data from my API.</p>\n\n<p>However, how do I use the selected service when the task is executed. I need to access the service from the index.ts. The service tells me the endpoint and the API Key.</p>\n\n<p>In the index.ts I can access the Guid of the service using something like the following code but can I use the Guid to get the service or it's details?</p>\n\n<pre><code>import tl = require('azure-pipelines-task-lib/task');\nasync function run() {\ntry {\n    const serviceString: string = tl.getInput('TestService', true);\n    if (serviceString == 'bad') {\n        tl.setResult(tl.TaskResult.Failed, 'Bad input was given');\n         return;\n    } ...\n</code></pre>\n\n<p>I've done lots of searching and reading (including the following articles) but haven't been able to find any examples.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/devops/extend/develop/add-build-task?view=azure-devops\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/azure/devops/extend/develop/add-build-task?view=azure-devops</a></p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/azure/devops/extend/develop/service-endpoints?view=azure-devops\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/azure/devops/extend/develop/service-endpoints?view=azure-devops</a></p>\n"}, {"tags": ["typescript", "rollup", "rollupjs"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 12420440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd88e1c05d184119feb2c94938ca9fa?s=128&d=identicon&r=PG&f=1", "display_name": "Vignesh Pushkaran", "link": "https://stackoverflow.com/users/12420440/vignesh-pushkaran"}, "is_accepted": false, "score": 3, "last_activity_date": 1582222831, "creation_date": 1582222831, "answer_id": 60326300, "question_id": 56369740, "link": "https://stackoverflow.com/questions/56369740/rollup-typescript-load-image-as-base64/60326300#60326300", "title": "Rollup + Typescript + load image as base64", "body": "<p>Replace <strong>rollup-plugin-image</strong> package  with this <a href=\"https://www.npmjs.com/package/rollup-plugin-img\" rel=\"nofollow noreferrer\">package</a> in rollup.config.js.<br>\nAnd add something like this below in plugins</p>\n\n<pre><code>plugins: [\nimage({\n  extensions: /\\.(png|jpg|jpeg|gif|svg)$/,\n  limit: 10000\n}),........\n</code></pre>\n\n<p>Then create a file name <strong><code>declaration.d.ts</code></strong> in the root project. Add below snippet</p>\n\n<pre><code>declare module '*.png' {\nconst value: any;\nexport default value;\n</code></pre>\n\n<p>}</p>\n\n<p>add this snippet in your <strong>tsconfig.json</strong></p>\n\n<pre><code>\"include\": [\"src\",\"src/declaration.d.ts\"],\n</code></pre>\n\n<p>Re-Run rollup in CLI. It will work!!\ud83d\udc4d</p>\n"}], "owner": {"reputation": 822, "user_id": 5298800, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/qmaKk.jpg?s=128&g=1", "display_name": "Anton Pilyak", "link": "https://stackoverflow.com/users/5298800/anton-pilyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1582222831, "creation_date": 1559172286, "last_edit_date": 1559201844, "question_id": 56369740, "link": "https://stackoverflow.com/questions/56369740/rollup-typescript-load-image-as-base64", "title": "Rollup + Typescript + load image as base64", "body": "<p>Have a problem trying to preload image with Rollup. All the crap that should work just doesn't, have no clue why. Did anybody managed to make it working? \nHere is what I have in rollup.congig.js:</p>\n\n<pre><code>import image from 'rollup-plugin-image'\n...\nplugins: [\n        image(),\n        json(),\n        resolve(),\n        commonjs(),\n        typescript({\n            typescript: require('typescript'),\n        }),\n        (process.env.BUILD === 'production' ? terser() : {})\n</code></pre>\n\n<p>Here is what I have in the sources:</p>\n\n<pre><code>import CAR_IMAGE from \"../resources/expand.png\";\n</code></pre>\n\n<p>And in the end I get an error from rtp2 pluging which says:</p>\n\n<p><strong>semantic error TS 2307, cannot find a module \"../resources/expand.png\"</strong></p>\n\n<p>What is strange, that I'm getting the same with variety of other image-loading plugins for rollup. The path is correct, the image is there. I'm already going mad with this error =(( </p>\n\n<p><strong>Update: here is the repository with this bug reproducible:</strong></p>\n\n<p><a href=\"https://github.com/AntonPilyak/rollup-image-bug\" rel=\"nofollow noreferrer\">https://github.com/AntonPilyak/rollup-image-bug</a></p>\n\n<p><strong>Update 2: have created bugs:</strong></p>\n\n<p><a href=\"https://github.com/rollup/rollup-plugin-url/issues/22\" rel=\"nofollow noreferrer\">https://github.com/rollup/rollup-plugin-url/issues/22</a></p>\n\n<p><a href=\"https://github.com/alwaysonlinetxm/rollup-plugin-img/issues/5\" rel=\"nofollow noreferrer\">https://github.com/alwaysonlinetxm/rollup-plugin-img/issues/5</a></p>\n\n<p><a href=\"https://github.com/rollup/rollup-plugin-image/issues/10\" rel=\"nofollow noreferrer\">https://github.com/rollup/rollup-plugin-image/issues/10</a></p>\n\n<p>How can it be SO crappy? =(((</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 136, "user_id": 8476013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L-cULMc8RL0/AAAAAAAAAAI/AAAAAAAAABI/0IiVLZZkgcc/photo.jpg?sz=128", "display_name": "Lachlan Walls", "link": "https://stackoverflow.com/users/8476013/lachlan-walls"}, "edited": false, "score": 1, "creation_date": 1559171677, "post_id": 56369639, "comment_id": 99341848, "body": "It&#39;s hard to tell what you&#39;re looking for. It depends a lot on what you&#39;re using this for and how data is stored on the API. Is it possible you could provide more information? The 2 possible solutions I see are either moving this code to the server, or making a system where you send the second call only when it is actually needed - but this second solution will greatly depend on the application."}, {"owner": {"reputation": 503, "user_id": 7996703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKDvn.jpg?s=128&g=1", "display_name": "Jonathan K", "link": "https://stackoverflow.com/users/7996703/jonathan-k"}, "edited": false, "score": 1, "creation_date": 1559171819, "post_id": 56369639, "comment_id": 99341876, "body": "Do you have access to the Backend, if you do, alter the logic to accept multiple IDs. Then you can just send all IDs once and get all profiles, then match the profiles here"}, {"owner": {"reputation": 407, "user_id": 3452039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lxR1D.jpg?s=128&g=1", "display_name": "Mehdi Benmesssaoud", "link": "https://stackoverflow.com/users/3452039/mehdi-benmesssaoud"}, "edited": false, "score": 0, "creation_date": 1559175718, "post_id": 56369639, "comment_id": 99342690, "body": "Maybe you can use, async/await, and forEach just to make the code more readable. To optimise this, i think you need to work on the backend, if it&#39;s your API"}, {"owner": {"reputation": 796, "user_id": 5284439, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3151bf63e7763a0e3dff9524d82f3cc5?s=128&d=identicon&r=PG&f=1", "display_name": "Manit", "link": "https://stackoverflow.com/users/5284439/manit"}, "reply_to_user": {"reputation": 136, "user_id": 8476013, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L-cULMc8RL0/AAAAAAAAAAI/AAAAAAAAABI/0IiVLZZkgcc/photo.jpg?sz=128", "display_name": "Lachlan Walls", "link": "https://stackoverflow.com/users/8476013/lachlan-walls"}, "edited": false, "score": 1, "creation_date": 1559177475, "post_id": 56369639, "comment_id": 99343000, "body": "I agree with @LachlanWalls and jonathan as well. Just create an api which should send you all the details rather than you making so many calls. Now how you load the data is another thing you might have to address."}], "answers": [{"tags": [], "owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "is_accepted": false, "score": 0, "last_activity_date": 1559172994, "creation_date": 1559172994, "answer_id": 56369828, "question_id": 56369639, "link": "https://stackoverflow.com/questions/56369639/removing-nested-api-call-from-for-loop/56369828#56369828", "title": "Removing nested api call from for loop", "body": "<p>One possible solution is to use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function\" rel=\"nofollow noreferrer\">async/await</a>. Although this will not remove nested loop, but make code look better</p>\n\n<p>Example</p>\n\n<pre><code>async function getUsersAndProfiles () {\n    try {\n        this.users = await api.get(...); \n        for(let i=0; i&lt;this.users.length; i++){\n            let response = await api.get(...this.users[i].id);\n            if (response.name == this.users[i].name)\n                this.newList.push(response);\n        }\n    }\n    catch (e)\n        console.log(e);\n}\n</code></pre>\n\n<p>You can even move api call for user profile to another async function for possible future reuse and better code structure</p>\n"}, {"tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559187339, "creation_date": 1559187339, "answer_id": 56371278, "question_id": 56369639, "link": "https://stackoverflow.com/questions/56369639/removing-nested-api-call-from-for-loop/56371278#56371278", "title": "Removing nested api call from for loop", "body": "<p>Just push array of request into array after that we can use Promise.all() to make a request at a time, then we could create newList based on results array.</p>\n\n<pre><code> api.get(...).then(response =&gt; {\n    this.users = response;\n    const promises = this.users.map(user =&gt; api.get(...user.id))\n    const result = Promise.all(promises).then(result =&gt; {\n        this.newList = results.filter((user, i) =&gt; user.name === this.users[i].name)\n    })\n})\n</code></pre>\n"}], "owner": {"reputation": 1011, "user_id": 7088371, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4f2a62081d43b21c757cff113c83fda8?s=128&d=identicon&r=PG&f=1", "display_name": "bluePearl", "link": "https://stackoverflow.com/users/7088371/bluepearl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559187339, "creation_date": 1559171394, "question_id": 56369639, "link": "https://stackoverflow.com/questions/56369639/removing-nested-api-call-from-for-loop", "title": "Removing nested api call from for loop", "body": "<p>i made an api call to return a set of data(ex: users - list type, with the returned data i created a for loop and and within my for loop i make another api call to get the user's profile detail based on the user's id. I know this isn't the best practice and i was wondering how i could go about refactoring it. </p>\n\n<pre><code>api.get(...).then(response =&gt; { \n   this.users = response; \n   for(let i=0; i&lt;this.users.length; i++){\n     api.get(...this.users[i].id).then(response =&gt; {\n       if(response.name == this.users[i].name)\n         this.newList.push(response);\n     })\n   }\n})\n</code></pre>\n\n<p>and in my html i loop over this.newList to display the info that i need. </p>\n\n<p>How can i remove the nested api call from within the for loop and still get the same results?</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 10585, "user_id": 3505900, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f97fa5f3c78a38e538f0e415ffaa5e82?s=128&d=identicon&r=PG", "display_name": "unional", "link": "https://stackoverflow.com/users/3505900/unional"}, "edited": false, "score": 0, "creation_date": 1559166944, "post_id": 56368830, "comment_id": 99340679, "body": "My answer would be &quot;test&quot;. Type system and language can only capture some categories of error. Same as you can&#39;t expect a program would not crash if it compiles in statically typed language such as Java/C#."}, {"owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "edited": false, "score": 3, "creation_date": 1559171168, "post_id": 56368830, "comment_id": 99341745, "body": "This happens due to hoisting in JS (function is hoisted, const - not). It seems that ts does not checks such things as hoisting. You may look at <a href=\"https://github.com/Microsoft/TypeScript/issues/19819\" rel=\"nofollow noreferrer\">github.com/Microsoft/TypeScript/issues/19819</a> This issue also with hoisting, but nothing has been suggested"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559176178, "post_id": 56368830, "comment_id": 99342773, "body": "I think it&#39;s hard for static analysis to accurately detect <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone\" rel=\"nofollow noreferrer\">temporal dead zone</a> errors.  It looks like TypeScript generally <a href=\"https://github.com/microsoft/TypeScript/issues/4244#issuecomment-129591399\" rel=\"nofollow noreferrer\">prefers false negatives to false positives</a> for this kind of thing."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1559176382, "post_id": 56368830, "comment_id": 99342811, "body": "Also see <a href=\"https://github.com/microsoft/TypeScript/issues/13638\" rel=\"nofollow noreferrer\">Microsoft/TypeScript#13638</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6269864"}, "edited": false, "score": 0, "creation_date": 1559185780, "post_id": 56368830, "comment_id": 99344520, "body": "interesting. Even <code>no-use-before-declare</code> rule in tslint didn&#39;t catch that."}], "answers": [{"comments": [{"owner": {"reputation": 3488, "user_id": 152711, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c7564ed5b848eda69e4fea42ab2323b5?s=128&d=identicon&r=PG", "display_name": "Freewalker", "link": "https://stackoverflow.com/users/152711/freewalker"}, "edited": false, "score": 0, "creation_date": 1559232768, "post_id": 56373052, "comment_id": 99364159, "body": "&quot;Always use lambda&quot; looks like a reasonable solution.  Previously we were always using the <code>function</code> keyword at top level (global/module scope) primarily to get better call stacks.  (See <a href=\"https://stackoverflow.com/a/23045200/152711\">stackoverflow.com/a/23045200/152711</a>)  But on testing now, node (ts-node in this case) actually gives us call stacks which include named lambdas like <code>const someLambda = () =&gt; null;</code>.  So I don&#39;t think there&#39;s a compelling reason to use <code>function</code> keyword at all for our purposes.  I also like that using <code>const</code> not <code>function</code> keeps our files organized consistently."}], "tags": [], "owner": {"reputation": 3835, "user_id": 2476884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9e6937def916fce7ecfb45345ffc44?s=128&d=identicon&r=PG", "display_name": "danielnixon", "link": "https://stackoverflow.com/users/2476884/danielnixon"}, "is_accepted": true, "score": 3, "last_activity_date": 1559201496, "last_edit_date": 1559201496, "creation_date": 1559198635, "answer_id": 56373052, "question_id": 56368830, "link": "https://stackoverflow.com/questions/56368830/why-doesnt-typescript-catch-that-a-const-is-being-used-before-assignment/56373052#56373052", "title": "Why doesn&#39;t TypeScript catch that a const is being used before assignment?", "body": "<p>You could enable tslint's <a href=\"https://palantir.github.io/tslint/rules/only-arrow-functions/\" rel=\"nofollow noreferrer\"><code>only-arrow-functions</code></a> and then replace your <code>function getValue()</code> with</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const getValue = function(): string {\n  return value;\n}\n</code></pre>\n\n<p>or even</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const getValue = (): string =&gt; value;\n</code></pre>\n\n<p>At that point your first line will be a compiler error:</p>\n\n<pre><code>Block-scoped variable 'getValue' used before its declaration\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18854, "user_id": 1083572, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9xSFI.png?s=128&g=1", "display_name": "Kokodoko", "link": "https://stackoverflow.com/users/1083572/kokodoko"}, "is_accepted": false, "score": 0, "last_activity_date": 1559204340, "creation_date": 1559204340, "answer_id": 56374344, "question_id": 56368830, "link": "https://stackoverflow.com/questions/56368830/why-doesnt-typescript-catch-that-a-const-is-being-used-before-assignment/56374344#56374344", "title": "Why doesn&#39;t TypeScript catch that a const is being used before assignment?", "body": "<p>I think the arrow function answer above answers your question the best, but just as a sidenote: deciding on a strict workflow will also prevent hoisting errors: declare vars, declare functions, call init function:</p>\n\n<pre><code>const value = \"some string\"\n\nfunction startApp() { \n    console.log(getValue());\n}\n\nfunction getValue() {\n    console.log(\"yo \" + value)\n    return value;\n}\n\nstartApp()\n</code></pre>\n"}], "owner": {"reputation": 3488, "user_id": 152711, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/c7564ed5b848eda69e4fea42ab2323b5?s=128&d=identicon&r=PG", "display_name": "Freewalker", "link": "https://stackoverflow.com/users/152711/freewalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 3, "accepted_answer_id": 56373052, "answer_count": 2, "score": 10, "last_activity_date": 1559204340, "creation_date": 1559165650, "question_id": 56368830, "link": "https://stackoverflow.com/questions/56368830/why-doesnt-typescript-catch-that-a-const-is-being-used-before-assignment", "title": "Why doesn&#39;t TypeScript catch that a const is being used before assignment?", "body": "<p>I have a very simple example where TypeScript (3.5.1) is fine with the code, but it immediately throws an error when run.</p>\n\n<p>I believe the issue here is that essentially <code>value</code> is <em>declared</em> but not <em>initialized</em> prior to <code>getValue</code> running.  This is pretty unintuitive imo but I understand this is how JS works.</p>\n\n<p>However, why can't TS detect this issue in such a simple example?  Since <code>value</code> is a const, it seems to me TS should be able to determine exactly when it's set and predict that this code crashes.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>console.log(getValue());\n\nconst value = \"some string\";\n\nfunction getValue() {\n  return value;\n}\n</code></pre>\n\n<p>In a second example without a function call, TS does catch that the variable is used before assignment:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>console.log(value);\nconst value = \"some string\";\n</code></pre>\n\n<p>TSLint's no-use-before-declare also does not appear applicable.</p>\n\n<p>Assuming TS/linting will not be able to catch this, is there a best practice to apply in the initial example that will avoid this crash?  \"Always declare module-level consts at top of file\" for example.</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 7026, "user_id": 7141073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0f2e16c86753e559fdd61cce2051b1?s=128&d=identicon&r=PG&f=1", "display_name": "Fyodor", "link": "https://stackoverflow.com/users/7141073/fyodor"}, "is_accepted": false, "score": 0, "last_activity_date": 1559177483, "last_edit_date": 1559177483, "creation_date": 1559174210, "answer_id": 56369981, "question_id": 56368755, "link": "https://stackoverflow.com/questions/56368755/typescript-get-the-type-of-the-last-parameter-of-a-function-type/56369981#56369981", "title": "Typescript: Get the type of the last parameter of a function type", "body": "<p>For function with 3 args solution wil be</p>\n\n<pre><code>type somefntype = (a: number, b: string, ddd: boolean) =&gt; void\ntype LastParameter&lt;T&gt; = T extends (a: infer A1, b: infer A2, c: infer A3) =&gt; any ? A3 : never;\n\ntype lastArg = LastParameter&lt;somefntype&gt;;  // === boolean\n</code></pre>\n\n<p>Name of function agruments does not metter.</p>\n\n<p>For function with arbitrary number of arguments task become a bit complicated. We may use <code>...rest</code> but it will be array.</p>\n\n<pre><code>type LastParameter&lt;T&gt; = T extends (...rest: infer A3) =&gt; any ?\n    A3 : never;\ntype lastArg = LastParameter&lt;somefntype&gt;; // lastArg === [number, string, boolean]\n</code></pre>\n\n<p>Get last element of resulting tuple is a bit challenging. One possible solution has been inspired from this <a href=\"https://dev.to/miracleblue/how-2-typescript-get-the-last-item-type-from-a-tuple-of-types-3fh3\" rel=\"nofollow noreferrer\">article</a>.</p>\n\n<pre><code>type Prev&lt;T extends number&gt; = [-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62][T];\ntype GetLength&lt;original extends any[]&gt; = original extends { length: infer L } ? L : never;\ntype GetLast&lt;original extends any[]&gt; = original[Prev&lt;GetLength&lt;original&gt;&gt;]\n\ntype somefntype = (a: number, b: string, ddd: boolean) =&gt; void\ntype LastParameter1&lt;T&gt; = T extends (...rest: infer A3) =&gt; any ?\n    A3 extends any[] ? GetLast&lt;A3&gt; : never\n    : never;\ntype lastArg = LastParameter&lt;somefntype&gt;; // boolean for 3 arg function\n</code></pre>\n\n<p>Second solution has limitaion on number of arguments of the function.</p>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 13, "last_activity_date": 1600693973, "last_edit_date": 1600693973, "creation_date": 1559177720, "answer_id": 56370310, "question_id": 56368755, "link": "https://stackoverflow.com/questions/56368755/typescript-get-the-type-of-the-last-parameter-of-a-function-type/56370310#56370310", "title": "Typescript: Get the type of the last parameter of a function type", "body": "<p>Update: TypeScript 4.0 introduced <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-0.html#variadic-tuple-types\" rel=\"nofollow noreferrer\">variadic tuple types</a>, which means that <code>Last</code> can now be implemented simply as</p>\n<pre><code>type Last&lt;T extends any[]&gt; = T extends [...infer I, infer L] ? L : never; \n</code></pre>\n<p>And the rest works as normal:</p>\n<pre><code>type LastParameter&lt;F extends (...args: any)=&gt;any&gt; = Last&lt;Parameters&lt;F&gt;&gt;;\ntype somefntype = (a: number, b: string, c: boolean) =&gt; void\ntype lastparamtype = LastParameter&lt;somefntype&gt; // boolean\n</code></pre>\n<p><a href=\"https://www.typescriptlang.org/play?#code/C4TwDgpgBAMghgZ2AHgCpQgD2BAdgEwSjlxAG0BdAPigF4p0scCiyA6DgS1wDMIAnKAEkANFG59BMClAD8sKAC4ouCADcBAbigAoUJFiJgABTj84AWwg5+yAGIZseQlAAUHNmYDmCZSRAAlHQ0-jT08EjIpuZWNgj2VFSaOnrg0AgA9lY8uPrQ9K5wyrgArhYARgJi5cpI-NxeYgDGyuUZGQA2ECRBtDRqGZz4yXlQHUZgZpaj4UbRltYCyJnZuWlJUAD0m1Btnd24OkA\" rel=\"nofollow noreferrer\">Playground link to code</a></p>\n<hr />\n<p>TypeScript 3.0 introduced <a href=\"https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#tuples-in-rest-parameters-and-spread-expressions\" rel=\"nofollow noreferrer\">tuple types in rest and spread expressions</a>, specifically to allow programmatic conversion between the types of function parameter lists and <a href=\"https://www.typescriptlang.org/docs/handbook/basic-types.html#tuple\" rel=\"nofollow noreferrer\">tuples</a>.  There's a type alias called <code>Parameters&lt;F&gt;</code> <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.4.5/lib/lib.es5.d.ts#L1471-L1474\" rel=\"nofollow noreferrer\">defined in the standard library</a> that returns the parameter list of a function as a tuple.</p>\n<p>It's annoying but possible to get the last element of a tuple type with a fixed but arbitrary length:</p>\n<pre><code>// Tail&lt;T&gt; returns a tuple with the first element removed\n// so Tail&lt;[1, 2, 3]&gt; is [2, 3]\n// (works by using rest tuples)\ntype Tail&lt;T extends any[]&gt; = \n  ((...t: T)=&gt;void) extends ((h: any, ...r: infer R)=&gt;void) ? R : never;\n\n// Last&lt;T&gt; returns the last element of the tuple\n// (works by finding the one property key in T which is not in Tail&lt;T&gt;)\ntype Last&lt;T extends any[]&gt; = T[Exclude&lt;keyof T, keyof Tail&lt;T&gt;&gt;];\n</code></pre>\n<p>Putting those together you get</p>\n<pre><code>type LastParameter&lt;F extends (...args: any)=&gt;any&gt; = Last&lt;Parameters&lt;F&gt;&gt;;\n</code></pre>\n<p>And we can test it:</p>\n<pre><code>type somefntype = (a: number, b: string, c: boolean) =&gt; void\ntype lastparamtype = LastParameter&lt;somefntype&gt; // boolean\n</code></pre>\n<p>Looks good to me.  <a href=\"https://typescript-play.js.org/#code/C4TwDgpgBAKghgSwDYB4ZQgD2BAdgEwGco5cQBtAXQD4oBeKACkYDo3gAuWASntoDcA9gny8sOAsWYAoKFAAWXUiAA0sqGxYAnLglwAzCFqgAlabzoDho9QH5T6rrgj8jAbmmhIUADJxCwGgY2HhEJGRUtAww5ACimADGSACu+BAoANYQIIL6sCpQWTl58Mho1NSUHl7QfgEACnBacAC2EDhaKABiwRJhrGxNAOaESmQWtMpRvv6Bjc1tHYTdFR6e4NCEgm36uDX0THBOyS0ARkYFp1wBWnpDBQlcp4KCSBCkE1BCItUbUEizMBNVr7Bh1YDzVrtIwoLY7PYbahuKAAehRUGer3euGkQA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}, {"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559221182, "post_id": 56377641, "comment_id": 99357788, "body": "Unfortunately, <a href=\"https://github.com/Microsoft/TypeScript/issues/26980\" rel=\"nofollow noreferrer\">recursive conditional types</a> are <a href=\"https://github.com/Microsoft/TypeScript/issues/26980#issuecomment-421354117\" rel=\"nofollow noreferrer\">not supported</a>.  The official word is <a href=\"https://github.com/Microsoft/TypeScript/pull/24897#issuecomment-401418254\" rel=\"nofollow noreferrer\">&quot;don&#39;t do it&quot;</a>, and <a href=\"https://github.com/Microsoft/TypeScript/issues/26980#issuecomment-438722312\" rel=\"nofollow noreferrer\">&quot;we&#39;re not ready to support this sort of thing&quot;</a>.  For now I&#39;d keep code like this in a sandbox for fun, but not let it anywhere near a production/shared environment."}, {"owner": {"reputation": 3218, "user_id": 3440266, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9d37ddb4e007bfd22023d6d5b95f0a45?s=128&d=identicon&r=PG&f=1", "display_name": "macabeus", "link": "https://stackoverflow.com/users/3440266/macabeus"}, "edited": false, "score": 0, "creation_date": 1583519976, "post_id": 56377641, "comment_id": 107157897, "body": "I think that would be better to use <code>unknown</code> instead of <code>any</code>: <code>type Head&lt;T extends unknown[]&gt; = T extends [unknown, ...unknown[]] ? T[0] : never</code>"}], "tags": [], "owner": {"reputation": 8213, "user_id": 796036, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0wtlj.png?s=128&g=1", "display_name": "Christian Ivicevic", "link": "https://stackoverflow.com/users/796036/christian-ivicevic"}, "is_accepted": false, "score": 2, "last_activity_date": 1559216519, "creation_date": 1559216519, "answer_id": 56377641, "question_id": 56368755, "link": "https://stackoverflow.com/questions/56368755/typescript-get-the-type-of-the-last-parameter-of-a-function-type/56377641#56377641", "title": "Typescript: Get the type of the last parameter of a function type", "body": "<p>Here is yet a another solution which is a slight modification of jcalz answer to make it more generic using some recursive conditional types:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type Head&lt;T extends any[]&gt; = T extends [any, ...any[]] ? T[0] : never;\ntype Tail&lt;T extends any[]&gt; =\n    ((...t: T) =&gt; any) extends ((_: any, ...tail: infer U) =&gt; any)\n        ? U\n        : [];\ntype HasTail&lt;T extends any[]&gt; = T extends ([] | [any]) ? false : true;\n\ntype Last&lt;T extends any[]&gt; = {\n    0: Last&lt;Tail&lt;T&gt;&gt;\n    1: Head&lt;T&gt;\n}[\n    HasTail&lt;T&gt; extends true ? 0 : 1\n];\n\ntype LastType = Last&lt;Parameters&lt;somefntype&gt;&gt;; // boolean\n</code></pre>\n\n<p>It might be interesting to consider replacing <code>any</code> with <code>unknown</code> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 1160, "user_id": 233884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84593f39ce6862b5579849a82dd1303d?s=128&d=identicon&r=PG", "display_name": "mkrause", "link": "https://stackoverflow.com/users/233884/mkrause"}, "is_accepted": false, "score": 1, "last_activity_date": 1593212918, "creation_date": 1593212918, "answer_id": 62604057, "question_id": 56368755, "link": "https://stackoverflow.com/questions/56368755/typescript-get-the-type-of-the-last-parameter-of-a-function-type/62604057#62604057", "title": "Typescript: Get the type of the last parameter of a function type", "body": "<p>As of TypeScript 4.0 with variadic tuple support, it's also possible to use the following to get the last type in a tuple type:</p>\n<pre><code>type LastType&lt;T extends [unknown, ...Array&lt;unknown&gt;]&gt; = T extends [...infer A, infer L] ? L : never;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11575193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d34c832713df78dc24ccc43145656fa?s=128&d=identicon&r=PG&f=1", "display_name": "ksm0816", "link": "https://stackoverflow.com/users/11575193/ksm0816"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 3, "accepted_answer_id": 56370310, "answer_count": 4, "score": 6, "last_activity_date": 1600693973, "creation_date": 1559165190, "question_id": 56368755, "link": "https://stackoverflow.com/questions/56368755/typescript-get-the-type-of-the-last-parameter-of-a-function-type", "title": "Typescript: Get the type of the last parameter of a function type", "body": "<p>Assume I have a function type, e.g.</p>\n\n<pre><code>type somefntype = (a: number, b: string, c: boolean) =&gt; void\n</code></pre>\n\n<p>I need the type of that function types last parameter:</p>\n\n<pre><code>type lastparamtype = LastParameter&lt;somefntype&gt; // lastparamtype == boolean\n</code></pre>\n\n<p>How do I define <code>LastParameter</code>?</p>\n"}, {"tags": ["typescript", "graphql", "sequelize.js"], "answers": [{"tags": [], "owner": {"reputation": 36705, "user_id": 306149, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/99b44e3cb23b76ce97baac83f20c6c86?s=128&d=identicon&r=PG", "display_name": "Matt Bierner", "link": "https://stackoverflow.com/users/306149/matt-bierner"}, "is_accepted": true, "score": 1, "last_activity_date": 1559166986, "creation_date": 1559166986, "answer_id": 56369060, "question_id": 56368676, "link": "https://stackoverflow.com/questions/56368676/typescript-complaining-about-type-on-destructuring/56369060#56369060", "title": "Typescript complaining about type on destructuring", "body": "<p>TypeScript cannot infer what type the <code>System</code> value should be from your code (or, more specifically, it cannot infer the type of first parameter to function <code>a</code>). Just add an explicit type annotation to fix this:</p>\n\n<pre><code>let a = ({System}: { System: string }) =&gt; ({\n\n});\n</code></pre>\n\n<p>Replace <code>string</code> with the actual type of <code>System</code> (perhaps <code>typeof systemType</code>?)</p>\n"}], "owner": {"reputation": 2648, "user_id": 1029654, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/11d1ed3a2d884420ff403355cd257814?s=128&d=identicon&r=PG", "display_name": "fonini", "link": "https://stackoverflow.com/users/1029654/fonini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 1, "accepted_answer_id": 56369060, "answer_count": 1, "score": 0, "last_activity_date": 1559166986, "creation_date": 1559164794, "question_id": 56368676, "link": "https://stackoverflow.com/questions/56368676/typescript-complaining-about-type-on-destructuring", "title": "Typescript complaining about type on destructuring", "body": "<p>I have the following code:</p>\n\n<pre><code>import { GraphQLNonNull, GraphQLString, GraphQLList, GraphQLInt } from 'graphql';\n\nimport systemType from './type';\nimport { resolver } from 'graphql-sequelize';\n\nlet a = ({System}) =&gt; ({\n  system: {\n    type: systemType,\n    args: {\n      id: {\n        description: 'ID of system',\n        type: new GraphQLNonNull(GraphQLInt)\n      }\n    },\n    resolve: resolver(System, {\n      after: (result: any[]) =&gt; (result &amp;&amp; result.length ? result[0] : result)\n    })\n  },\n  systems: {\n    type: new GraphQLList(systemType),\n    args: {\n      names: {\n        description: 'List option names to retrieve',\n        type: new GraphQLList(GraphQLString)\n      },\n      limit: {\n        type: GraphQLInt\n      },\n      order: {\n        type: GraphQLString\n      }\n    },\n    resolve: resolver(System, {\n      before: (findOptions: any, { query }: any) =&gt; ({\n        order: [['name', 'DESC']],\n        ...findOptions\n      })\n    })\n  }\n});\n\nexport = { a: a };\n</code></pre>\n\n<p>The VSCode is complaining with the TS7031 warning: </p>\n\n<pre><code>Binding element 'System' implicitly has an 'any' type\n</code></pre>\n\n<p>How can I get rid of that warning?</p>\n"}, {"tags": ["javascript", "typescript", "ecmascript-6", "momentjs"], "comments": [{"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "reply_to_user": {"reputation": 112, "user_id": 8132083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d196817ebafbbe58a47dee3056c13f25?s=128&d=identicon&r=PG", "display_name": "salixor", "link": "https://stackoverflow.com/users/8132083/salixor"}, "edited": false, "score": 0, "creation_date": 1559164554, "post_id": 56368592, "comment_id": 99340006, "body": "But that question talks about array source and filtering. Mine is string."}, {"owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "reply_to_user": {"reputation": 112, "user_id": 8132083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d196817ebafbbe58a47dee3056c13f25?s=128&d=identicon&r=PG", "display_name": "salixor", "link": "https://stackoverflow.com/users/8132083/salixor"}, "edited": false, "score": 0, "creation_date": 1559164585, "post_id": 56368592, "comment_id": 99340016, "body": "Ah got it answer shows isAfter usage."}], "owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 12, "favorite_count": 0, "closed_date": 1559164597, "answer_count": 0, "score": 0, "last_activity_date": 1559164367, "creation_date": 1559164367, "question_id": 56368592, "link": "https://stackoverflow.com/questions/56368592/how-to-check-if-given-time-in-utc-is-max-10-minutes-time-frame", "closed_reason": "Duplicate", "title": "How to check if given time (in UTC) is max.10 minutes time frame", "body": "<p>I have a time string and moment to parse like this:</p>\n\n<pre><code>const d: string = '2019-05-30T00:05:46.987Z'\nconst date: Date = moment.utc(d)\n</code></pre>\n\n<p>What I want is to check this time if its in <strong>max. 10 min. old</strong>. If its more than 10 minutes then <code>false</code> should given. I want to do this checking against <code>UTC</code> and not the timezone by browser/user.</p>\n\n<p>How can I do that?</p>\n\n<p>I am trying to determine if given object and its time is fresh or not.</p>\n"}, {"tags": ["arrays", "json", "typescript", "deserialization", "angular-httpclient"], "comments": [{"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 0, "creation_date": 1559161123, "post_id": 56367902, "comment_id": 99338818, "body": "Interesting, perhaps trace through the debugger to see where it fails?"}, {"owner": {"reputation": 23, "user_id": 9121027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a04eff4e598c248728ee0e7f2b6181?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Felipe Ferreira Amazona", "link": "https://stackoverflow.com/users/9121027/marcos-felipe-ferreira-amazona"}, "reply_to_user": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 0, "creation_date": 1559163098, "post_id": 56367902, "comment_id": 99339525, "body": "How can I do that?"}], "owner": {"reputation": 23, "user_id": 9121027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a04eff4e598c248728ee0e7f2b6181?s=128&d=identicon&r=PG&f=1", "display_name": "Marcos Felipe Ferreira Amazona", "link": "https://stackoverflow.com/users/9121027/marcos-felipe-ferreira-amazona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1058, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559244538, "creation_date": 1559160988, "last_edit_date": 1559244538, "question_id": 56367902, "link": "https://stackoverflow.com/questions/56367902/how-to-deserialize-a-response-containing-an-array-of-objects-with-typescript-and", "title": "How to deserialize a response containing an array of objects with typescript and serialize?", "body": "<p>I'm developing a social network application comprised of a Rails based API and a Angular7 web application. Basically the Angular application is a web interface to the API.</p>\n\n<p>I'm using the serialize Typescript library to map the return of the rails API to my Angular models, the goal is to map the json response from snake_case to camelCase.</p>\n\n<p>Basically I'm able to deserialise one object, but I can't deserialize an array of objects. </p>\n\n<p>Specifically in my case I'm trying to log in in the application and than make a request to get all of the logged user friendships, because of that I've modeled a class named CurrentUser which corresponds to the login response and Friendship which corresponds to the friendship response.</p>\n\n<p>Here's one of the API's responses and how I'm mapping it  to one of my models with the library, specifically this model maps the response of the login process:</p>\n\n<p>The response:</p>\n\n<pre><code>loginResponse: {\n   created_at: \"2019-05-25T09:18:55.708-03:00\"\n   email: \"diego@gmail.com\"\n   enabled: true\n   expire_at: \"2019-05-29T14:45:51.000-03:00\"\n   id: 2\n   login: \"Diego\"\n   name: \"Diego\"\n   profile_id: 2\n   token: \"65zWGEea6M9DCn2PsL-z\"\n\n   user_image: {\n      enabled: true\n      id: 2\n      public_image_path: \"http://localhost:3000/images/users`\n   }\n}\n</code></pre>\n\n<p>The TS mode class:</p>\n\n<pre><code>export class CurrentUser {\n  // * ============================================\n  // * Attributes\n  // * ============================================\n  @autoserialize id: number;\n  @autoserialize name: string;\n  @autoserialize email: string;\n  @autoserialize  login: string;\n  @autoserialize enabled: boolean;\n  @autoserializeAs('profile_id') profileId: number;\n  @autoserializeAs('created_at') createdAt: Date;\n\n  @autoserialize token: string;\n  @autoserializeAs('expire_at') expireAt: Date;\n\n  @deserializeAs(UserImage, 'user_image')  userImage: UserImage;\n\n  // * ============================================\n  // * Methodds\n  // * ============================================\n  constructor() { }\n}\n</code></pre>\n\n<p>The TS service class that performs the request:</p>\n\n<pre><code>export class LoginService {\n  // * ============================================\n  // * Attributes\n  // * ============================================\n  private resourceLogin = \n  'http://localhost:3000/api/v1/logins';\n\n  private resourceAuthToken = \n  'http://localhost:3000/api/v1/core_module/permission_module/authtokens';\n\n  // * ============================================\n  // * Methodds\n  // * ============================================\n  constructor(\n    private http: HttpClient,\n    private router: Router,\n    private friendshipService: FriendshipService\n  ) {}\n\n  **THIS IS THE METHOD THAT PERFORMS THE REQUEST**\n  public doLogin(login: Login): Observable&lt;CurrentUser&gt; {\n    let httpParams = new HttpParams();\n    httpParams = httpParams.set('login[email]', login.email.toString());\n    httpParams = httpParams.set('login[password]', login.password.toString());\n\n    return this.http\n      .post&lt;Login&gt;(this.resourceLogin, httpParams)\n      .pipe(map((data) =&gt; Deserialize(data, CurrentUser)));\n  }\n}\n</code></pre>\n\n<p>This process work perfectly, it transforms all of the annotated properties.\nThe problem emerges when I try to map the response of the method that request all of the logged user friendships, I've tried 2 ways of writing the code.</p>\n\n<p>Here's the method that performs the friendships request to the api:</p>\n\n<pre><code>// FIRST VERSION\npublic findUserFriendships(currentUser: CurrentUser): Observable&lt;Friendship[]&gt; {\n    let httpParams = new HttpParams();\n    httpParams = httpParams.set('user_friendships', 'true');\n    httpParams = httpParams.set('user_id', currentUser.id.toString());\n\n    return this.http\n      .get&lt;Friendship[]&gt;(this.resourceFriendship, {params: httpParams})\n      .pipe(map((data) =&gt; Deserialize(data, Friendship)));\n  }\n\n\n// SECOND VERSION\npublic findUserFriendships(currentUser: CurrentUser): Observable&lt;Friendship[]&gt; {\n    let httpParams = new HttpParams();\n    httpParams = httpParams.set('user_friendships', 'true');\n    httpParams = httpParams.set('user_id', currentUser.id.toString());\n\n    return this.http\n      .get&lt;Friendship[]&gt;(this.resourceFriendship, {params: httpParams})\n      .pipe(map((data) =&gt; data.map((item) =&gt; Deserialize(item, Friendship))));\n  }\n</code></pre>\n\n<p>I'm debugging the the application with the debugger term, so I basically write debugger in my code and when the code reaches that point the application stops.</p>\n\n<p>Through this debug method I was able to find out that when I use the First version of the findUserFriendships method I get an Friendship empty object, and when I user the second version of the findUserFriendships I get nothing, I doesn't even stop at the debugger;</p>\n\n<p>Anyways the end goal is to map all of the Friendship objects in the Friendships array.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular7"], "comments": [{"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 2, "creation_date": 1559158132, "post_id": 56367278, "comment_id": 99337627, "body": "Have you tried removing the initialisation from the constructor? That doesn&#39;t need to be there. You should avoid putting anything other than dependency injection in the constructor."}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1559158212, "post_id": 56367278, "comment_id": 99337658, "body": "Please try to create an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, I recommend <a href=\"https://stackblitz.com\" rel=\"nofollow noreferrer\">stackblitz.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 490, "user_id": 6393934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e5589a34f9ba7a4a85fa584c648616?s=128&d=identicon&r=PG&f=1", "display_name": "Shifenis", "link": "https://stackoverflow.com/users/6393934/shifenis"}, "is_accepted": true, "score": 5, "last_activity_date": 1559159521, "creation_date": 1559159521, "answer_id": 56367600, "question_id": 56367278, "link": "https://stackoverflow.com/questions/56367278/input-property-in-angular-component-returns-empty-array/56367600#56367600", "title": "@Input() property in angular component returns empty array", "body": "<p>Delete <code>this.data = []</code> from constructor, avoid change anything when you use dependecy injecton.</p>\n\n<p>And use <code>set</code> and <code>get</code> for each <code>Input()</code> that you want to use in your template, it's a best practice.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  private _data: CalendarDay[];\n\n  @Input() set data(data: CalendarDay[]) {\n    if(data) {\n     this._data = data;\n    }\n  }\n\n  get data(): CalendarDay[] {\n    return this._data;\n  }\n</code></pre>\n\n<p>And in your HTML you should pass it with:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;app-calendar [data]=\"calendarData\"&gt;&lt;/app-calendar&gt;\n</code></pre>\n\n<p>In calendar component you can use with</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div *ngFor=\"let item of data\"&gt;{{item.date}}&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9883056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb5c261b575131a3fc023e35a61b298?s=128&d=identicon&r=PG&f=1", "display_name": "Rintales", "link": "https://stackoverflow.com/users/9883056/rintales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1403, "favorite_count": 1, "accepted_answer_id": 56367600, "answer_count": 1, "score": 1, "last_activity_date": 1559214976, "creation_date": 1559157957, "last_edit_date": 1559214976, "question_id": 56367278, "link": "https://stackoverflow.com/questions/56367278/input-property-in-angular-component-returns-empty-array", "title": "@Input() property in angular component returns empty array", "body": "<p>I have calendar component with data property decorated as <code>@Input():</code></p>\n\n<pre><code>import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.css']\n})\nexport class CalendarComponent implements OnInit, OnChanges {\n  @Input() data: CalendarDay[];\n\n  constructor() {\n    this.data = [];\n  }\n\n  ngOnInit() {\n    this.initDays();\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    console.log(this.data);\n    console.log(changes.data);\n  }\n}\n</code></pre>\n\n<p>I pass data in from another component like that:</p>\n\n<pre><code>&lt;app-calendar [data]=\"this.calendarData\"&gt;&lt;/app-calendar&gt;\n</code></pre>\n\n<p>And passed data gets rendered by <code>*ngFor</code> in the calendar component (it renders perfectly and everything works just fine): </p>\n\n<pre><code>&lt;div *ngFor=\"let item of data\"&gt;{{item.date}}&lt;/div&gt;\n</code></pre>\n\n<p>I want to parse this data first before rendering it into view and whenever i try to console.log data property within the calendar component i get strange array, its shows as empty, i can 'open' it from browser console:</p>\n\n<p><img src=\"https://i.stack.imgur.com/XjXlC.png\" alt=\"Result of calling: console.log(changes.data.currentValue)\">. </p>\n\n<p>And when i try to log value like that:</p>\n\n<pre><code>console.log(this.data[0])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>console.log(changes.data.currentValue[0])\n</code></pre>\n\n<p>i get <code>undefined</code> value.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1559158462, "post_id": 56367250, "comment_id": 99337758, "body": "You widened the type to a string-indexed type and the compiler dutifully expects that it could have any keys whatsoever.  That is, nothing prevents some code anywhere in your program from doing <code>attributes.potato = 123</code>.  So <code>keyof typeof attributes</code> is <code>string</code> (well, <code>| number</code> as a convenience).  If you want the best of both worlds make a helper function like <code>const asAttributes = &lt;A extends Attributes&gt;(a:A) =&gt; a</code> and then call it as <code>const attributes = asAttributes({foo: 1, bar: 2, baz:3});</code>"}], "answers": [{"tags": [], "owner": {"reputation": 25033, "user_id": 1113002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgW7b.png?s=128&g=1", "display_name": "Aleksey L.", "link": "https://stackoverflow.com/users/1113002/aleksey-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1559158509, "creation_date": 1559158509, "answer_id": 56367371, "question_id": 56367250, "link": "https://stackoverflow.com/questions/56367250/typescript-get-key-from-object-with-indexed-signature/56367371#56367371", "title": "Typescript: Get key from object with indexed signature", "body": "<blockquote>\n  <p>How can I ensure that the \"foo\" | \"bar\" | \"baz\" type gets passed as a type argument instead of string | number?</p>\n</blockquote>\n\n<p>You can achieve this by introducing generic type parameter for <code>attributes</code>:</p>\n\n<pre><code>type Attributes = {\n  [key: string]: number;\n};\n\nfunction Fn&lt;KeysOfAttributes extends keyof T, T extends Attributes&gt;(opts: { attributes: T }): any {\n  // ...\n}\n\nconst attributes = {\n  foo: 1,\n  bar: 2,\n  baz: 3,\n};\n\nFn({\n  attributes\n});\n</code></pre>\n\n<p>Typescript will be able to infer the types on its own, so you won't even need the <code>Type</code> and <code>Keys</code></p>\n\n<p><a href=\"https://www.typescriptlang.org/play/index.html#src=type%20Attributes%20%3D%20%7B%0D%0A%20%20%5Bkey%3A%20string%5D%3A%20number%3B%0D%0A%7D%3B%0D%0A%0D%0Afunction%20Fn%3CKeysOfAttributes%20extends%20keyof%20T%2C%20T%20extends%20Attributes%3E(opts%3A%20%7B%20attributes%3A%20T%20%7D)%3A%20any%20%7B%0D%0A%20%20%2F%2F%20...%0D%0A%7D%0D%0A%0D%0Aconst%20attributes%20%3D%20%7B%0D%0A%20%20foo%3A%201%2C%0D%0A%20%20bar%3A%202%2C%0D%0A%20%20baz%3A%203%2C%0D%0A%7D%3B%0D%0A%0D%0AFn(%7B%0D%0A%20%20attributes%0D%0A%7D)%3B\" rel=\"nofollow noreferrer\">Playground</a></p>\n"}], "owner": {"reputation": 127, "user_id": 10591525, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uj4kJr9JO3M/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbB0YCoLdeKmjvsuAukirRVWk3iyng/mo/photo.jpg?sz=128", "display_name": "h-Reser", "link": "https://stackoverflow.com/users/10591525/h-reser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559158509, "creation_date": 1559157836, "question_id": 56367250, "link": "https://stackoverflow.com/questions/56367250/typescript-get-key-from-object-with-indexed-signature", "title": "Typescript: Get key from object with indexed signature", "body": "<p>I'm importing the following type and function from a TypeScript module:</p>\n\n<pre><code>type Attributes = {\n  [key: string]: number;\n};\n\nfunction Fn&lt;KeysOfAttributes extends string&gt;(opts: { attributes: Attributes }): any {\n  // ...\n}\n</code></pre>\n\n<p>I can't modify the code above.</p>\n\n<p>Then I implement the following code to my own module:</p>\n\n<pre><code>// variant 1\nconst attributes = { // this object is hard coded (not dynamically generated)\n  foo: 1,\n  bar: 2,\n  baz: 3\n};\n\ntype Type = typeof attributes;\ntype Keys = keyof Type;\n\nFn&lt;Keys&gt;({\n  attributes\n});\n</code></pre>\n\n<p>Everything works perfect. Now I want to assign the type <code>Attributes</code> type to the constant <code>attribute</code>, because I want to be sure that the keys are string and the values are numbers. So I modify my code:</p>\n\n<pre><code>// variant 2\nconst attributes: Attributes = {\n  foo: 1,\n  bar: 2,\n  baz: 3\n};\n\ntype Type = typeof attributes;// equals {[key: string]: number;}\ntype Keys = keyof Type;// equals string | number. Why ?\n\nFn&lt;Keys&gt;({// Here, I would like Keys to be \"foo\" | \"bar\" | \"baz\", instead I have string | number\n  attributes\n});\n</code></pre>\n\n<p>I get the following error on the <code>Fn&lt;Keys&gt;({</code> line:</p>\n\n<pre><code>Type 'string | number' does not satisfy the constraint 'string'.\nType 'number' is not assignable to type 'string'.ts(2344)\n</code></pre>\n\n<p>I don't understand why the type <code>Keys</code> equals <code>string | number</code>, when the index signature specifically specifies that the key is a string?</p>\n\n<p>How can I ensure that the <code>\"foo\" | \"bar\" | \"baz\"</code> type gets passed as a type argument instead of <code>string | number</code>?</p>\n\n<p>I can live with the first variant, but I don't understand why the second one doesn't work.\nAny idea?</p>\n\n<p>Many thanks</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1559158254, "post_id": 56367067, "comment_id": 99337676, "body": "Is there anything preventing you from using reactive forms? They are far more flexible, and allow for properly dynamic forms."}], "answers": [{"tags": [], "owner": {"reputation": 4639, "user_id": 2216584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca1683e1100877238b0eaa085639562?s=128&d=identicon&r=PG", "display_name": "user2216584", "link": "https://stackoverflow.com/users/2216584/user2216584"}, "is_accepted": false, "score": 0, "last_activity_date": 1559166106, "creation_date": 1559166106, "answer_id": 56368913, "question_id": 56367067, "link": "https://stackoverflow.com/questions/56367067/reference-input-ngmodel-to-object-in-ngfor-loop/56368913#56368913", "title": "Reference input ngModel to object in ngFor loop", "body": "<p>By creating fields array and having DataModel, you have disconnected the original \"obj\" with input. If you want to take this approach then do following [Or see the following stackblitz - <a href=\"https://stackblitz.com/edit/angular-pdpqog?file=app/app.component.ts]-\" rel=\"nofollow noreferrer\">https://stackblitz.com/edit/angular-pdpqog?file=app/app.component.ts]-</a> </p>\n\n<pre><code>obj : any = {\n      FirstName:\"Taha\",\n      MiddleName:\"Faheem\",\n      LastName:\"Hussain\"\n  }\n\n  fields: any[] = [\n    {\n      \"FieldLabel\": \"Person Name\",\n      \"property\": 'FirstName',\n      \"value\": this.obj.FirstName\n    },\n    {\n      \"FieldLabel\": \"Current Address\",\n      \"property\": 'MiddleName',\n      \"value\": this.obj.MiddleName\n    } \n  ];\n\n  onChange($event, field) {\n    this.obj[field.property] = $event;\n  }\n\n&lt;div class=\"container\" fxLayout=\"column\" fxLayoutGap=\"10px\"&gt;\n  &lt;div *ngFor=\"let field of fields\"&gt;\n    &lt;input placeholder=\"{{field.FieldLabel | uppercase}}\" [ngModel]=\"field.value\" (ngModelChange)=\"onChange($event, field)\"&gt;\n  &lt;/div&gt;\n  &lt;div&gt;\n    &lt;input placeholder=\"Last Name\" [(ngModel)]=\"obj.LastName\"&gt;\n  &lt;/div&gt;\n  &lt;br&gt; {{obj|json}}\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 4464561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SZ34t.jpg?s=128&g=1", "display_name": "Taha Hussain", "link": "https://stackoverflow.com/users/4464561/taha-hussain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 578, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559262207, "creation_date": 1559157036, "last_edit_date": 1559262207, "question_id": 56367067, "link": "https://stackoverflow.com/questions/56367067/reference-input-ngmodel-to-object-in-ngfor-loop", "title": "Reference input ngModel to object in ngFor loop", "body": "<p>I am trying to generate dynamic form using the array. In that array I am providing the FieldLabel &amp; DataModel.\nHere I want to use DataModel as the object reference. I want to update the referenced model when user update the value in Input Field.\nI have searched a lot but not able to find the solution yet.</p>\n\n<p>Is there any other way to achieve what I want?</p>\n\n<p>I have tried Iterating the model and used the DataModel attribute in [(ngModel)] but it is taking that as a STRING (which is valid)  but I don't want this. I want to reference the main object instead of taking that as a string.</p>\n\n<pre><code>obj : any = {\n      FirstName:\"Taha\",\n      MiddleName:\"Faheem\",\n      LastName:\"Hussain\",\n      Address:\n        {\n          CurrentAddress:\"USA\",\n          PermanentAddress:\"Pakistan\"\n        }\n  }\n\n  fields: any[] = [\n    {\n      \"FieldLabel\": \"First Name\",\n      \"DataModel\": \"obj.FirstName\"\n    },\n    {\n      \"FieldLabel\": \"Middle Name\",\n      \"DataModel\":\"obj.MiddleName\"\n    },\n    {\n      \"FieldLabel\": \"Current Address\",\n      \"DataModel\":\"obj.Address.CurrentAddress\"\n    }  \n  ];\n</code></pre>\n\n<pre><code>&lt;div class=\"container\" fxLayout=\"column\" fxLayoutGap=\"10px\"&gt;\n  &lt;div *ngFor=\"let field of fields\"&gt;\n    &lt;input placeholder=\"{{field.FieldLabel | uppercase}}\" [(ngModel)]=\"field.DataModel\"&gt;\n  &lt;/div&gt;\n  &lt;div&gt;\n    &lt;input placeholder=\"Last Name\" [(ngModel)]=\"obj.LastName\"&gt;\n  &lt;/div&gt;\n  &lt;br&gt; {{obj|json}}\n&lt;/div&gt;\n</code></pre>\n\n<p>I want to update the obj with the value user enter in ngFor input fields.</p>\n\n<p>I am working to generated the complete dynamic form along with the formula on each fields using this approach.\nIs there any better approach to get the desired result?</p>\n"}, {"tags": ["node.js", "typescript", "mongoose"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 3152215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5424b58aec907c9977f29ef296f088c2?s=128&d=identicon&r=PG&f=1", "display_name": "rkesters", "link": "https://stackoverflow.com/users/3152215/rkesters"}, "is_accepted": true, "score": 0, "last_activity_date": 1559233295, "creation_date": 1559233295, "answer_id": 56382012, "question_id": 56367050, "link": "https://stackoverflow.com/questions/56367050/creating-lib-of-mongoose-models-not-working-on-import/56382012#56382012", "title": "Creating lib of mongoose models not working on import", "body": "<p>So this was a bit embarrassing, the problem was the while loop at the bottom of main. Added by another dev; we both assumed it was needed to prevent node from exiting. Well it is not, and because the loop was so tight it never allowed time for the promise to resolve. </p>\n\n<p>Live and learn. </p>\n"}], "owner": {"reputation": 71, "user_id": 3152215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5424b58aec907c9977f29ef296f088c2?s=128&d=identicon&r=PG&f=1", "display_name": "rkesters", "link": "https://stackoverflow.com/users/3152215/rkesters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 56382012, "answer_count": 1, "score": 0, "last_activity_date": 1559233295, "creation_date": 1559156967, "last_edit_date": 1559171701, "question_id": 56367050, "link": "https://stackoverflow.com/questions/56367050/creating-lib-of-mongoose-models-not-working-on-import", "title": "Creating lib of mongoose models not working on import", "body": "<p>I've been trying to create a library of mongo models and helper class that is then shared as an npm module we the rest of my team. The problem I having is the main code I import from lib MongoConnector which process config information and connects to mongo, I also import Model1 and do a find all that call works. But when I import Poller from the same lib and pass it Model1, when it does the find the promise never returns.</p>\n\n<p>Library has 4 files</p>\n\n<p>Model1.ts:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import mongoose from 'mongoose';\n\nexport interface IModel1 {\n    draftId: string;\n    [k:string]: any;\n}\n\nexport interface IModel1DocumnetAttrs {\n    draftId: string;\n    data: string;\n    createdBy?: String;\n}\n\nexport interface IModel1Document extends mongoose.Document {\n    draftId: String;\n    createdBy: String;\n    data: string;\n}\n\nexport type IModel1Model = mongoose.Model&lt;IModel1Document&gt;;\n\nconst schema = new mongoose.Schema(\n    {\n        draftId: {type: String, index: {unique: true }},\n        createdBy: String,\n        data: String,\n    },\n    { versionKey: false, strict: false, timestamps: true, },\n);\n\nexport const Model1: IModel1Model = mongoose.model&lt;IModel1Document, IModel1Model&gt;('Model1', schema);\n</code></pre>\n\n<p>MongoPoller.ts:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as Logger from 'bunyan';\nimport * as _ from 'lodash';\nimport mongoose from 'mongoose';\n\nexport type IMongoPollerCallback&lt;T extends mongoose.Document&gt; = (error: Error | undefined, docs?: T[]) =&gt; void;\n\nexport class MongoPoller&lt;T extends mongoose.Document&gt; {\n    private query: any;\n    private callback: IMongoPollerCallback&lt;T&gt;;\n    private intervalId: any;\n    private readonly log: Logger;\n    constructor(private readonly pollingTime: number, private readonly model: typeof mongoose.Model, baseLogger: Logger) {\n        this.callback = _.noop;\n        this.log = baseLogger.child({ component: 'MongoPoller' });\n    }\n\n    public start(query: any, callback: IMongoPollerCallback&lt;T&gt;) {\n        this.query = query;\n        this.callback = callback;\n\n        this.intervalId = setInterval(() =&gt; this.workFunction(), this.pollingTime);\n    }\n\n    public stop() {\n        clearInterval(this.intervalId);\n    }\n\n    public async initial(query: any, callback: IMongoPollerCallback&lt;T&gt;) {\n        this.query = query;\n        this.callback = callback;\n        this.log.info(`Mongo Poller started with initial, ${JSON.stringify(query)}`);\n\n        return this.workFunction();\n    }\n\n    public continue() {\n        this.log.info(`Mongo Poller told to continue, ${JSON.stringify(this.query)}`);\n        this.intervalId = setTimeout(() =&gt; this.workFunction(), this.pollingTime);\n    }\n\n    private async workFunction() {\n        try{\n            this.log.info(`Mongo Poller executing workFunction, ${JSON.stringify(this.query)}`);\n            const docsp =  this.model.find(this.query).exec();\n            const docs = await docsp;\n            this.log.info(`Mongo Poller executing workFunction callback with ${docs.length} docs, ${JSON.stringify(this.query)}`);\n\n            this.callback(undefined, docs)\n\n        }\n        catch (e){\n            this.log.info(`Mongo Poller executing workFunction callback with ERROR ${e.message}, ${JSON.stringify(this.query)}`);\n            this.callback(undefined)\n        }\n\n    }\n}\n</code></pre>\n\n<p>MongoDBConnector.ts: </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import Promise = require('bluebird');\nimport * as Logger from 'bunyan';\nimport mongoose from 'mongoose';\nimport { decrypt, IKeyData } from './cryptoUtils';\n\ninterface IMongoDatabaseConfig {\n    uri?: string;\n    fullUri?: string;\n    options?: object;\n    username?: string;\n    password?: string;\n    initialDelayMSec?: number;\n    finalDelayMSec?: number;\n    triesBeforeFinalDelay?: number;\n    autoIndex?: boolean;\n    debug?:boolean\n}\n\nexport class MongoDBConnector {\n    private readonly mongoConfig: IMongoDatabaseConfig = {};\n    private connectionPromise: Promise&lt;any&gt; | undefined;\n    private readonly log: Logger;\n    constructor(config: IMongoDatabaseConfig, baseLogger: Logger, keyData: IKeyData) {\n        this.mongoConfig = config;\n        mongoose.set('debug', this.mongoConfig.debug);\n        mongoose.set('autoCreate', true);\n        this.log = baseLogger.child({ component: 'MongoDBConnector' });\n        Object.assign(this.mongoConfig, config);\n        if (\n            !this.mongoConfig.username ||\n            this.mongoConfig.username.trim() === '' ||\n            !this.mongoConfig.password ||\n            this.mongoConfig.password.trim() === ''\n        ) {\n            this.mongoConfig.fullUri = `mongodb://${this.mongoConfig.uri}`;\n        } else {\n            this.mongoConfig.fullUri = `mongodb://${this.mongoConfig.username}:${decrypt(\n                this.mongoConfig.password,keyData\n            )}@${this.mongoConfig.uri}`;\n        }\n        this.mongoConfig.autoIndex = true;\n\n        mongoose.Promise = global.Promise;\n    }\n\n    private connectToMongo(numTries: number = 1): any {\n        return mongoose\n            .connect(&lt;string&gt;this.mongoConfig.fullUri, this.mongoConfig.options)\n            .then(() =&gt; {\n                this.log.info('MongoDB Connected!');\n\n                return mongoose.connection;\n            })\n            .catch((error: any) =&gt; {\n                const timeoutDelayMSec =\n                    numTries &lt; &lt;number&gt;this.mongoConfig.triesBeforeFinalDelay\n                        ? this.mongoConfig.initialDelayMSec\n                        : this.mongoConfig.finalDelayMSec;\n                this.log.error(`Issue connecting to MongoDB: ${error.message}`);\n                this.log.info(\n                    `Retrying connection to MongoDB (attempt #${numTries}). Reconnecting in ${timeoutDelayMSec} ms...`,\n                );\n\n                return Promise.delay(&lt;number&gt;timeoutDelayMSec).then(() =&gt; {\n                    return this.connectToMongo(numTries + 1);\n                });\n            });\n    }\n\n    public connect() {\n        if (!this.connectionPromise) {\n            this.log.info(`Attempting to connect to MongoDB on ${this.mongoConfig.fullUri}`);\n            this.connectionPromise = this.connectToMongo().catch((error: any) =&gt; {\n                this.connectionPromise = undefined;\n                throw error;\n            });\n        }\n\n        return this.connectionPromise;\n    }\n}\n</code></pre>\n\n<p>index.ts:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>export { Model1 } from './Model1';\nexport { MongoDBConnector} from './MongoDBConnector';\nexport {IMongoPollerCallback, MongoPoller}  from './MongoPoller';\n</code></pre>\n\n<p>The Main App :</p>\n\n<p>index.ts:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as config from './config/config.json';\nimport * as keyEventLogger from './logging/keyEventLogger';\nimport { loggerFactory } from './logging/loggerFactory';\n\n\nimport {\n    DraftJudgment,\n    IDraftDocument,\n    IMongoPollerCallback,\n    MongoDBConnector,\n    MongoPoller\n} from 'exploitmongomodels';\n\nimport mongoose from 'mongoose';\n\nimport { Promise as bluebird } from 'bluebird';\nimport * as keyData from './key.json';\n\nglobal.Promise = bluebird;\n\nconst log = loggerFactory('main');\n\nasync function main() {\n    // adding better logging for uncaught rejected promises\n    process.on('unhandledRejection', err =&gt; {\n        log.fatal({ err }, 'uncaught rejection');\n    });\n\n    process.on('uncaughtException', err =&gt; {\n        log.fatal({ err }, 'uncaught exception');\n    });\n\n    const mongo = new MongoDBConnector(config.database.mongo, log, keyData);\n\n    await mongo.connect();\n\n    keyEventLogger.logKeyEvent(keyEventLogger.keyEvents.heartBeat, '');\n\n    const d = await DraftJudgment.find({}).exec();\n    console.log(d.length); //&lt;- this prints 3\n    //const j2 = mongoose.model('DraftJudgment');  &lt;-- this throws an error\n\n    //Set up heart beat for log files\n    setInterval(\n        () =&gt; keyEventLogger.logKeyEvent(keyEventLogger.keyEvents.heartBeat, ''),\n        config.logger.heartbeatInterval,\n    );\n\n    const judgmentSubmitPoller = new MongoPoller&lt;IDraftDocument&gt;(config.pollingDurationInSec, DraftJudgment, log);\n\n    const judgmentSubmitPollingCB: IMongoPollerCallback&lt;IDraftDocument&gt; = (\n        error: Error | undefined,\n        docs?: IDraftDocument[],\n    ) =&gt; {\n        if (error) {\n            log.error(error, 'Error during judgment mongo polling');\n            judgmentSubmitPoller.continue();\n\n            return;\n        }\n        log.info(`Submit poller triggered submitted judgments`);\n        if (!docs) {\n            return;\n        }\n        //do something with the docs object\n\n        log.info(`Submit poller triggered with ${docs.length} submitted judgments`);\n\n        judgmentSubmitPoller.continue();\n    };\n    judgmentSubmitPoller.initial({ status: 'submitted' }, judgmentSubmitPollingCB);\n\n    const judgmentPendingPoller = new MongoPoller&lt;IDraftDocument&gt;(config.pollingDurationInSec, DraftJudgment, log);\n\n    const judgmentPendingPollingCB: IMongoPollerCallback&lt;IDraftDocument&gt; = (\n        error: Error | undefined,\n        docs?: IDraftDocument[],\n    ) =&gt; {\n        if (error) {\n            log.error(error, 'Error during judgment mongo polling');\n            judgmentSubmitPoller.continue();\n\n            return;\n        }\n        if (!docs) {\n            return;\n        }\n\n        //do something with the docs object\n\n        log.info(`Pending poller triggered with ${docs.length} submitted judgments`);\n\n        judgmentPendingPoller.continue();\n    };\n    //judgmentPendingPoller.initial({ $query: { status: 'pending' } }, judgmentPendingPollingCB);\n\n    //tslint:disable-next-line\n    while (true) {}\n}\n\nmain();\n</code></pre>\n\n<p>In MongoPoller#workFunction , docsp promise never resolves.</p>\n"}, {"tags": ["reactjs", "typescript", "eslint"], "comments": [{"owner": {"reputation": 529, "user_id": 8915234, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210933076376525/picture?type=large", "display_name": "Cyro Dubeux", "link": "https://stackoverflow.com/users/8915234/cyro-dubeux"}, "edited": false, "score": 0, "creation_date": 1559158106, "post_id": 56366791, "comment_id": 99337614, "body": "Did you updated the react-scripts as well? They fixed this issue, check this link:  <a href=\"https://github.com/mozilla/addons-code-manager/issues/152\" rel=\"nofollow noreferrer\">github.com/mozilla/addons-code-manager/issues/152</a>"}], "owner": {"reputation": 103, "user_id": 9714877, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "George K", "link": "https://stackoverflow.com/users/9714877/george-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1559155660, "creation_date": 1559155660, "question_id": 56366791, "link": "https://stackoverflow.com/questions/56366791/cra-not-showing-linting-errors-warings-from-ts-and-tsx-files-in-the-console", "title": "CRA not showing linting errors/warings from .ts and .tsx files in the console", "body": "<p>Project is bootstrapped with CRA without <code>--typescript</code>, then TS was added following <code>https://facebook.github.io/create-react-app/docs/adding-typescript</code>.</p>\n\n<p><code>eslintrc</code> looks like this :</p>\n\n<pre><code>{\n  \"extends\": [\"plugin:@typescript-eslint/recommended\", \"react-app\"],\n  \"parser\": \"@typescript-eslint/parser\",\n  \"parserOptions\": {\n    \"ecmaVersion\": 6,\n    \"sourceType\": \"module\",\n    \"ecmaFeatures\": {\n      \"jsx\": true\n    }\n  },\n  \"plugins\": [\"@typescript-eslint\", \"react\"],\n  \"rules\": {}\n}\n</code></pre>\n\n<p><code>tsconfig</code> is default. I did a <code>tslint --init</code> which added a default <code>.json</code> config.</p>\n\n<p>Unused variables in <code>.js</code> files are shown in the console as a warning or error, but everything in <code>.ts</code> and <code>.tsx</code> files is ignored. Is there a way to have those show in the console as well? </p>\n\n<p>If not, what's the best way to have linting errors show somewhere without having to type <code>eslint</code> every time.</p>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559155880, "post_id": 56366737, "comment_id": 99336733, "body": "Unions kind of act this way already.  The problem that unions of functions are hard to call.  Do you have some use case better than <code>mapArray()</code>?  Because I&#39;d just use <code>arr as (A|B)[]</code> here without doing type craziness."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1559156297, "post_id": 56366737, "comment_id": 99336881, "body": "Also, wouldn&#39;t the second one be something like <code>(arr as Common&lt;typeof arr[number]&gt;[])</code>?  Or do you expect <code>Common&lt;A[] | B[]&gt;</code> to somehow be the same as <code>Common&lt;A | B&gt;[]</code>?  Undistributing &quot;arrayness&quot; seems hard to get for free; it could be hardcoded, but I guess I&#39;d like to see a more full use case"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559156384, "post_id": 56366737, "comment_id": 99336924, "body": "And my first draft of <code>Common&lt;T&gt;</code> without arrayness stuff would be <code>type Common&lt;T&gt; = Pick&lt;T, keyof T&gt;</code>."}, {"owner": {"reputation": 3179, "user_id": 6656422, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh6.googleusercontent.com/-ruwgjJVn5rk/AAAAAAAAAAI/AAAAAAAAAio/mSV4_HKnoJ4/photo.jpg?sz=128", "display_name": "William Lohan", "link": "https://stackoverflow.com/users/6656422/william-lohan"}, "edited": false, "score": 0, "creation_date": 1559159124, "post_id": 56366737, "comment_id": 99338053, "body": "Why not <code>mapArray(arr: (A | B)[])</code>? <code>mapArray(arr: A[] | B[])</code> is saysing you either have an array of all A or all B,  its the union of array types not of the types of items the array&#39;s have so it would be difficult w/o having 2 code paths for each."}], "answers": [{"comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559175606, "post_id": 56369422, "comment_id": 99342666, "body": "I generally prefer <code>type UnpackedFromArray&lt;T extends Array&lt;any&gt;&gt; = T[number]</code> (not that you need to give it a name for such a short thing) to the conditional type <code>T extends (infer U)[] ? U : never</code> since the former, a lookup type, is easier for the compiler to reason about.  But they both work."}], "tags": [], "owner": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "is_accepted": true, "score": 0, "last_activity_date": 1559169572, "creation_date": 1559169572, "answer_id": 56369422, "question_id": 56366737, "link": "https://stackoverflow.com/questions/56366737/how-to-create-a-type-containing-only-the-common-properties-from-a-type-union/56369422#56369422", "title": "How to create a type containing only the common properties from a type union?", "body": "<p>Thanks jcalz and William Lohan!</p>\n\n<p>A real use case: for 2 different requests from an external api, I get 2 different responses:</p>\n\n<ol>\n<li>an array with users having many details about each user, and</li>\n<li>an array with users having a small subset of the details from the previous point</li>\n</ol>\n\n<p>Using the same function which parses either one of the 2 array from above, I want to get the users' ids (<code>id</code> is a common property of users from both arrays), 1) in a type safe manner and 2) without hard-coding the array types in function body. Based on your comments jcalz, I was able to achive that. You deserve the credit for the solution, if you post an answer, I'll mark it as accepted.</p>\n\n<p>The solution I found (<a href=\"https://typescript-play.js.org/#code/JYOwLgpgTgZghgYwgAgCITHYAbCATAVQGdpkBvAKGWuWDwC5kQBXAWwCNoqbW4QBPRiw5cayAPZgAFtEZEwUUAHNu1GMAjY8RRu3HjcfCgF8KoSLEQoAwuNYAHRGGKlKYukLacoJihTD89jZ2rOIgADwAKgB8yAC8yAAKwAgA1lEANMipEPziMMgxfgFByAQgjmn4AGJQdgCCUFBw-FGxCZHIEAAekCDayAAUoDCkBACUANoAusgA-GXIQhAAblwUMMwgCGDAYchKGC5QAJLatQ32wIPMJFBEAFJEYRes9VeM6Jg4+MczyAAfZC2BxOP7TcbkPxiAD0MOQAHdxFBUkRkHA0T0gjt8IxQMg9NJkNhQBA0ZxsOIEVk4MgwJimsjaGjmsASHhEcBpOJmGBkFI4FA8ABaBDiPDKOkyOmBMnIGB1VhSlBbPYgGVBaE0MUgeTIW7QM5EACM8SGBvuTxeivewHRaJBoQi5UqOTwr0azVaJQg+X1d0ezxAHqu0WiM3GADpePZhvFYsBI5IZFBxlrqDq9RajQAmM03ANW4M2q724EhMLhH1+i2B62XYCTYTeabhiHRuCxu1xBNJ6TQNOqZBQDDMKDq7PaY2+ChAA\" rel=\"nofollow noreferrer\">link to code</a>):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface DetailedUser {\n    id: number\n    many: number\n    other: string\n    fields: boolean\n}\ninterface CompactUser {\n    id: number\n}\n\ntype Common&lt;T&gt; = Pick&lt;T, keyof T&gt;\n\ntype UnpackedFromArray&lt;T&gt; = T extends (infer U)[] ? U : never\n\nfunction getUserIdsFromApi(usersJsonFromApi: DetailedUser[] | CompactUser[]) {\n\n    // works as expected: in both lines below, a ts error is raised\n    // note that the types (DetailedUser[], CompactUser[]) are not hard-coded, but determined from variable usersJsonFromApi\n\n    const userIds1 = (usersJsonFromApi as Common&lt;UnpackedFromArray&lt;typeof usersJsonFromApi&gt;&gt;[]).map(i =&gt; i.other)\n\n    const userIds2 = (usersJsonFromApi as Common&lt;typeof usersJsonFromApi[number]&gt;[]).map(i =&gt; i.other)\n\n    return userIds1\n}\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56369422, "answer_count": 1, "score": 0, "last_activity_date": 1559169572, "creation_date": 1559155382, "question_id": 56366737, "link": "https://stackoverflow.com/questions/56366737/how-to-create-a-type-containing-only-the-common-properties-from-a-type-union", "title": "How to create a type containing only the common properties from a type union?", "body": "<p>I want to map over union of arrays, how can I make it type safely?</p>\n\n<p>I have a solution, but I want to avoid hard-coding the types from the type union.\nWhen calculating <code>newArr1</code>, as expected, I get an error: <code>Property 'field2' does not exist on type 'Common&lt;A, B&gt;'</code>\nIs there a way to get the same error when calculating <code>newArr2</code>?</p>\n\n<p>(<a href=\"https://typescript-play.js.org/#code/JYOwLgpgTgZghgYwgAgILIN4Chm+TYCAGwBMBGALmQGcwpQBzHPA4kgJipAFcBbAI2hYAvllCRYiFACFMzXK1KUadRiKxYwATwAOKAMIB7Xr0MgAPKgA0yaQD5kAXjl5kAbQAKyUMgDWELUMYNGQAMj8AoNsAXSpUT2jkAB9bBIBudSwYbhAEMGAzZF44HVQoKDgtAAo4cri3RJTpBoBKOXlkBDNaZBAIAHcyqDInZBry5DhqZCMTM0sbe1aAOmKdKuAnB2BlxQ42gHoDyemIAA89PIgSG2goQygqD3u9KG1kAHI99g-kEkMINMQIYwMhzsAeoVtHpPrNTBZrLY7B8NK4jsgABaGfqdOAgZAASWQDAgoLAGJQ1DgvBQdweyH6wHJhm4oIxtRIAFouiRGMhyShoYD8PdePyKfzdCgcgUQAB+DpdEA9PqDcrsUbjKAnZAAWTgDGACAAogA3CDgbhwIhELQAMVFACkENaAF7mIVRWpQOwtVYlDZbby7QikdgtVF4KCk7hQfGqoZkTJAA\" rel=\"nofollow noreferrer\">link to code</a>)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface A {\n    field1: string\n    field2: number\n}\ninterface B {\n    field1: string\n}\n\ntype Common&lt;A, B&gt; = {\n    [P in keyof A &amp; keyof B]: A[P] | B[P];\n}\n\nfunction mapArray(arr: A[] | B[]) {\n\n    const newArr1 = (arr as Common&lt;A, B&gt;[]).map(i =&gt; i.field2) // error\n\n    // how can I get the same error without hard-coding the types from the type union?\n    const newArr2 = (arr as MagicEventuallyFromJcalz&lt;typeof arr&gt;).map(i =&gt; i.field2)\n\n    return newArr1\n}\n</code></pre>\n"}, {"tags": ["html", "angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 10961736, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y9E0Vj16pUg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPt25B6CFqxKwl1wpTz3GA_T6ouoA/mo/photo.jpg?sz=128", "display_name": "Isaac Welch", "link": "https://stackoverflow.com/users/10961736/isaac-welch"}, "is_accepted": false, "score": 1, "last_activity_date": 1559155897, "creation_date": 1559155897, "answer_id": 56366839, "question_id": 56366731, "link": "https://stackoverflow.com/questions/56366731/angular-6-how-to-get-count-of-the-particular-column-based-on-same-value-from-an/56366839#56366839", "title": "Angular 6 how to get count of the particular column based on same value from an array of object", "body": "<p>Change this line</p>\n\n<pre><code>count +=item.progress;\n</code></pre>\n\n<p>To</p>\n\n<pre><code>if (item.progress === 100) {count += 1;}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1559157401, "last_edit_date": 1559157401, "creation_date": 1559155938, "answer_id": 56366846, "question_id": 56366731, "link": "https://stackoverflow.com/questions/56366731/angular-6-how-to-get-count-of-the-particular-column-based-on-same-value-from-an/56366846#56366846", "title": "Angular 6 how to get count of the particular column based on same value from an array of object", "body": "<p>Try like this:</p>\n\n<pre><code>progressCount:number = 0;\ncompletedCount:number = 0;\n\n\nngOnInit() {\nthis.array.forEach(item =&gt; {\n  if (item.progress &lt; 100) {\n    this.progressCount ++;\n  } else {\n    this.completedCount ++;\n  }\n});\n}\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;div&gt;Progress : 2{{progressCount}}&lt;/div&gt;&lt;div&gt;completed : 2{{completedCount}}&lt;/div&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2392, "user_id": 7843828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yELn9.jpg?s=128&g=1", "display_name": "Alok Mali", "link": "https://stackoverflow.com/users/7843828/alok-mali"}, "is_accepted": true, "score": 0, "last_activity_date": 1559156491, "creation_date": 1559156491, "answer_id": 56366957, "question_id": 56366731, "link": "https://stackoverflow.com/questions/56366731/angular-6-how-to-get-count-of-the-particular-column-based-on-same-value-from-an/56366957#56366957", "title": "Angular 6 how to get count of the particular column based on same value from an array of object", "body": "<p>Actually, You are adding the progress value in count. Please try this..</p>\n\n<pre><code>ngOnInit(){\n   let progress_count=0;\n   let completed_count=0;\n   this.array.forEach((item, index) =&gt; {\n   if (item.progress == 100) {\n    progress_count++;\n   } else {\n    completed_count++;\n   }\n});\n   console.log('Progress count :',progress_count);\n   console.log('Completed count :',completed_count);\n}\n</code></pre>\n\n<p>And use progress_count and completed_count in your HTML</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 7103191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6ac8533c315b3e34a7c3bf3b671161?s=128&d=identicon&r=PG&f=1", "display_name": "kikyou", "link": "https://stackoverflow.com/users/7103191/kikyou"}, "is_accepted": false, "score": 0, "last_activity_date": 1559157805, "creation_date": 1559157805, "answer_id": 56367244, "question_id": 56366731, "link": "https://stackoverflow.com/questions/56366731/angular-6-how-to-get-count-of-the-particular-column-based-on-same-value-from-an/56367244#56367244", "title": "Angular 6 how to get count of the particular column based on same value from an array of object", "body": "<p>You can use library like <a href=\"https://underscorejs.org/\" rel=\"nofollow noreferrer\">underscore</a>, where a function like countBy will do what you want.</p>\n\n<p>In your case:</p>\n\n<pre><code>_.countBy(array, (item) =&gt; item.progress === 100 ? 'completed' : 'progress');\n</code></pre>\n\n<p>the result will be: </p>\n\n<p><code>{completed: 2, progress: 2}</code></p>\n"}], "owner": {"reputation": 561, "user_id": 10436218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b824a0f3921ef9538186237610df7c?s=128&d=identicon&r=PG&f=1", "display_name": "carreankush", "link": "https://stackoverflow.com/users/10436218/carreankush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 787, "favorite_count": 0, "accepted_answer_id": 56366957, "answer_count": 4, "score": 0, "last_activity_date": 1559157805, "creation_date": 1559155371, "question_id": 56366731, "link": "https://stackoverflow.com/questions/56366731/angular-6-how-to-get-count-of-the-particular-column-based-on-same-value-from-an", "title": "Angular 6 how to get count of the particular column based on same value from an array of object", "body": "<p>I have an array of object and also I am using foreach loop in typescript.Here as per my array it contains 2 columns having value progress:100 and others are less that 100.So here I need to calculate the count of columns having progress:100,for ex here it should be 2.Also I need to get the count of all columns having progress value is less or not 100.for ex here 2.Then I need to append into div.I have tried but its adding not counting.Here is the code below</p>\n\n<h2>app.component.html</h2>\n\n<pre><code>&lt;div&gt;Progress : 2{{count}}&lt;/div&gt;&lt;div&gt;completed : 2{{count}}&lt;/div&gt; \n</code></pre>\n\n<h2>app.component.ts</h2>\n\n<pre><code>declare var require: any;\nimport { Component } from '@angular/core';\nimport { OnInit } from '@angular/core';\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n\n      arrayVal:any;\n      currentVal : any;\n  title = 'projectchart';\n  public array = [{\"id\":1,\"progress\":100},{\"id\":3,\"progress\":70},{\"id\":5,\"progress\":50},{\"id\":6,\"progress\":100}];\n  ngOnInit(){\n     let count=0;\n     this.array.forEach((item, index) =&gt; {\n     console.log(item.progress) ;\n     count +=item.progress ;\n});\n     console.log(count);\n  }\n\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "service", "spfx"], "comments": [{"owner": {"reputation": 4686, "user_id": 6736888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f70e865bb04192d8afa5fb27e88c3d?s=128&d=identicon&r=PG&f=1", "display_name": "penleychan", "link": "https://stackoverflow.com/users/6736888/penleychan"}, "edited": false, "score": 0, "creation_date": 1559158741, "post_id": 56366364, "comment_id": 99337867, "body": "Your <code>SharePointService</code> class doesn&#39;t implement <code>IDataService</code> and if you want to use <code>interface</code> as dependency injector you would have to add that to your providers and tell it to use <code>SharePointService</code>"}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 10415423, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Zg-6KOGdtG4/AAAAAAAAAAI/AAAAAAAANF0/0I-fjDdFXDM/photo.jpg?sz=128", "display_name": "Ezzabuzaid", "link": "https://stackoverflow.com/users/10415423/ezzabuzaid"}, "is_accepted": false, "score": 0, "last_activity_date": 1559154568, "creation_date": 1559154568, "answer_id": 56366574, "question_id": 56366364, "link": "https://stackoverflow.com/questions/56366364/spfx-with-angular-not-able-to-use-service-in-component-ts-file/56366574#56366574", "title": "SPFX with Angular - Not able to use service in component ts file", "body": "<p>You need to mark the class as the type instead of the interface</p>\n\n<pre><code>private dataService: SharePointService\n</code></pre>\n\n<p>and don't forget to provide the service either in the root module or in the feature module that contains the component </p>\n\n<pre><code>`@Injectable({ provideIn: 'root' })`\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 5207742, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/2b053b706dc73e984175e4197557c5fc?s=128&d=identicon&r=PG&f=1", "display_name": "BD&#39;s", "link": "https://stackoverflow.com/users/5207742/bds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559217522, "creation_date": 1559153550, "last_edit_date": 1559217522, "question_id": 56366364, "link": "https://stackoverflow.com/questions/56366364/spfx-with-angular-not-able-to-use-service-in-component-ts-file", "title": "SPFX with Angular - Not able to use service in component ts file", "body": "<p>I have created a project using SharePoint SPFX framework and added necessary packages required for Angular (6.0 or 7.0) typescript. It seems Angular is working in my spfx webpart but when I am trying to create a service using Angular, I am not able to use the methods available in the service from component.ts file. Though no errors are being shown in the project, the method declared in the service is coming as undefined when I am trying to use in the component.ts file</p>\n\n<p><strong>app.service.ts</strong></p>\n\n<hr>\n\n<pre><code>import { Component, OnInit } from '@angular/core';  \nimport { Injectable } from '@angular/core';\nexport interface IDataService {\n    getTitle(webUrl:string):string;\n}\n@Injectable()\nexport class SharePointService {\n     constructor() {}     \n     public getTitle(webUrl:string):string {\n       return webUrl;\n     }\n  }  \n</code></pre>\n\n<p><strong>app.component.ts</strong></p>\n\n<hr>\n\n<pre><code>import { Component, OnInit } from '@angular/core';  \nimport {IWebPartContext} from '@microsoft/sp-webpart-base'; \nimport { IDataService } from './app.service';\n\n@Component({  \n  selector: 'my-spfx-app',  \n  template: `&lt;h3&gt;Welcome to SPFx {{name}}!!&lt;/h3&gt;&lt;p&gt;{{serviceProp}}&lt;/p&gt;`\n})  \nexport class AppComponent implements OnInit  {  \n    public name: string = '';  \n    public context:IWebPartContext;\n    public serviceProp:string = \"\";\n    constructor(private dataService: IDataService){  \n    }  \n\n   public  ngOnInit() {\n        this.context= window[\"webPartContext\"];  \n        this.name= this.context.pageContext.user.displayName;        \n        this.serviceProp = this.dataService.getTitle(\"Angular Service Testing\");\n    }  \n}  \n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<hr>\n\n<p>Welcome to SPFx User1</p>\n\n<p>Data is not coming to <code>serviceProp</code> variable. Please help us</p>\n"}, {"tags": ["typescript", "enums", "switch-statement", "type-inference"], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 2, "last_activity_date": 1559155533, "creation_date": 1559155533, "answer_id": 56366768, "question_id": 56366209, "link": "https://stackoverflow.com/questions/56366209/index-a-interface-with-a-const-enum-and-infer-type-in-a-switch-statement-in-type/56366768#56366768", "title": "Index a Interface with a const enum and infer type in a switch statement in TypeScript", "body": "<p>The problem here is that the type <code>MessagePayload&lt;MESSAGES&gt;</code> is not what you think it is.  Interfaces don't generally distribute over unions, so it just evaluates to:</p>\n\n<pre><code>interface OopsMessagePayload {\n  scope: MESSAGES;\n  content: string | number | boolean;\n}\n</code></pre>\n\n<p>Which means that if you check the <code>scope</code> property, it does not narrow the type of the <code>content</code> property.  </p>\n\n<p>TypeScript does have some type-level constructs that distribute over unions, so there should be a way to define </p>\n\n<pre><code>type MessagePayloadDistributive&lt;T&gt; = ...\n</code></pre>\n\n<p>such that</p>\n\n<pre><code>MessagePayloadDistributive&lt;MESSAGES&gt; \n</code></pre>\n\n<p>evaluates to</p>\n\n<pre><code>MessagePayload&lt;MESSAGES.open&gt; |\nMessagePayload&lt;MESSAGES.closed&gt; |\nMessagePayload&lt;MESSAGES.redo&gt; \n</code></pre>\n\n<p>I will use <a href=\"https://github.com/Microsoft/TypeScript/wiki/What&#39;s-new-in-TypeScript#distributive-conditional-types\" rel=\"nofollow noreferrer\">distributive conditional types</a> in which if you have a type like <code>type D&lt;T&gt; = T extends U ? V : W</code> where the checked type <code>T</code> is a bare type parameter, the conditional check will be distributed across unions:</p>\n\n<pre><code>type MessagePayloadDistributive&lt;T extends MESSAGES&gt; = T extends any\n  ? MessagePayload&lt;T&gt;\n  : never;\n\ntype SomeMessagePayload = MessagePayloadDistributive&lt;MESSAGES&gt;;\n</code></pre>\n\n<p>If you inspect that, <code>SomeMessagePayload</code> evaluates to the desired type above.  And then the following code will work as you expect:</p>\n\n<pre><code>function pick(payload: SomeMessagePayload): void {\n  switch (payload.scope) {\n    case MESSAGES.open:\n      open(payload.content); // okay\n      break;\n    case MESSAGES.close:\n      close(payload.content); // okay\n      break;\n    case MESSAGES.redo:\n      redo(payload.content); // okay\n      break;\n  }\n}\n</code></pre>\n\n<p>Okay, hope that helps.  Good luck!  </p>\n\n<p><a href=\"https://typescript-play.js.org/#code/HYQwtgpgzgDiDGEAEBhA9gE2QbwFBKXjWCgBckJgBXMJAWQFEBlJgQQHFmk8CC0ZKSALxIAjABp8veABs0UCJN5IAThAxopAXylES5foJEAKDAC4kZFQEtgAcwCUwgHxIMAbl3EyhOQuFIphbUYABGECpOQq4eXvqq6mgBQfTQUCB2EAAKIACeciAY6MCklKQA2owsHMwAdGoaALpRMZ5StqUqAGYIyHRpGdl5BUXEpSXcUgSVzGycTLWGwI0WVrZ2nsoz1fO1svIQK0gh4SqbvNtzdQ1oR6FoaDIQIMDnOlKkuQJIAEoB-VB0pkcvk0IViuMKlUrkxGm0CB0Ij1EKlAYMQSMADwAFQoAA9xhgoPRZjUmK4eLwoEQBBZsecCHpIRYAUChqDwWMyuVsXDtLgPl8+gNgcMwRgACLWNahKikawANwgOPxhOJ0LJrhEuIgBMoRKQL1yUyQAH5UWyMeKcc4TcEIEqzoLvkw0JBWeixYV-iL2SMpTK5YrlRr5s54UgulRgPB5cQkDBrPAANbGOAc8xIV3u31WwoOCwKtDWDCTZRQADu1lI8AAFoF0yNatTDE5Kcp4CB-KG6kszCblEs016MHsuSUHO4kAB6adINDJvID3ihNQgZMM6Rdvqk3b7BT95QdvwQYcZsclMqTmdzhdLo8rtcb5ed7u766JQ8PhIaM9NplXlOs7zouxrfkgq7PM+yg6AQOg6EAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 2892, "user_id": 1068250, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1987374d7de5e03dd542979bc881b735?s=128&d=identicon&r=PG", "display_name": "don", "link": "https://stackoverflow.com/users/1068250/don"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559155533, "creation_date": 1559152822, "question_id": 56366209, "link": "https://stackoverflow.com/questions/56366209/index-a-interface-with-a-const-enum-and-infer-type-in-a-switch-statement-in-type", "title": "Index a Interface with a const enum and infer type in a switch statement in TypeScript", "body": "<p>I am trying to automatically infer the type of some data passed in a <code>switch</code> statement based on the <code>enum</code> value fulfilling the <code>case</code> condition.</p>\n\n<p>To achieve this I've defined a const enum:</p>\n\n<pre><code>const enum MESSAGES {\n  open = 1,\n  close,\n  redo\n}\n</code></pre>\n\n<p>Then I use it to index a <code>Interface</code>:</p>\n\n<pre><code>interface MessagePayloadContent {\n  [MESSAGES.open]: string;\n  [MESSAGES.close]: number;\n  [MESSAGES.redo]: boolean;\n}\n</code></pre>\n\n<p>At this point I define the object that I will evaluate in the <code>switch</code> statement:</p>\n\n<pre><code>interface MessagePayload&lt;T extends MESSAGES&gt; {\n  scope: T;\n  content: MessagePayloadContent[T];\n}\n</code></pre>\n\n<p>Finally I use the above in a switch statement.</p>\n\n<p>I would expect that the interpreter can infer, based on the value being passed to each <code>case</code>, what type of data will be contained in the <code>object</code>. </p>\n\n<p>On the contrary I get the errors as in the comments in the code below:</p>\n\n<pre><code>function pick(payload: MessagePayload&lt;MESSAGES&gt;): void {\n  switch (payload.scope) {\n    case MESSAGES.open:\n      open(payload.content); // Argument of type 'string | number | boolean' is not assignable to parameter of type 'string'.\n      break;\n    case MESSAGES.close:\n      close(payload.content as number); // This is my current workaround.\n      break;\n    case MESSAGES.redo:\n      redo(payload.content); // Argument of type 'string | number | boolean' is not assignable to parameter of type 'boolean'.\n      break;\n  }\n}\n\nconst open = (d: string) =&gt; d;\nconst close = (d: number) =&gt; d;\nconst redo = (d: MessagePayloadContent[MESSAGES.redo]) =&gt; d;\n</code></pre>\n\n<p>What I don't fully get is that in some other circumstances this does work, so I wonder why some other times it does not.</p>\n"}, {"tags": ["typescript", "webpack", "settings", "web-deployment", "vue-cli-3"], "comments": [{"owner": {"reputation": 642, "user_id": 807248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac14602bbca62eb0ad27d25a67eab945?s=128&d=identicon&r=PG", "display_name": "Michael A.", "link": "https://stackoverflow.com/users/807248/michael-a"}, "edited": false, "score": 1, "creation_date": 1578046289, "post_id": 56365662, "comment_id": 105319826, "body": "I&#39;ve just published complete solution for that here: <a href=\"https://stackoverflow.com/questions/54004759/vue-cli-keep-config-file-as-external-after-compilation/59576534#59576534\" title=\"vue cli keep config file as external after compilation\">stackoverflow.com/questions/54004759/&hellip;</a>"}, {"owner": {"reputation": 97, "user_id": 8799713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hJkXj.jpg?s=128&g=1", "display_name": "Glandalf313", "link": "https://stackoverflow.com/users/8799713/glandalf313"}, "reply_to_user": {"reputation": 642, "user_id": 807248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac14602bbca62eb0ad27d25a67eab945?s=128&d=identicon&r=PG", "display_name": "Michael A.", "link": "https://stackoverflow.com/users/807248/michael-a"}, "edited": false, "score": 1, "creation_date": 1578256856, "post_id": 56365662, "comment_id": 105371839, "body": "After a quick review, your solution sounds way cleaner than mine and more &quot;DevOps-compatible&quot;! Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 8799713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hJkXj.jpg?s=128&g=1", "display_name": "Glandalf313", "link": "https://stackoverflow.com/users/8799713/glandalf313"}, "is_accepted": true, "score": 2, "last_activity_date": 1559684287, "last_edit_date": 1559684287, "creation_date": 1559590589, "answer_id": 56433544, "question_id": 56365662, "link": "https://stackoverflow.com/questions/56365662/how-to-design-a-vue-cli-app-that-be-configured-after-build/56433544#56433544", "title": "How to design a vue-cli app that be configured after build?", "body": "<p>Well, just in case someone, one day, will need to do something similar, here is my solution:</p>\n\n<ol>\n<li>I create un config file in the public dir, like <code>settings.json</code></li>\n<li><p>In the App.vue component, I specify a <code>mounted()</code> method that will be automatically called at component launch (see VueJs components lifecycle if needed). This methods:</p>\n\n<ol>\n<li><p>Asynchronously query the static <code>settings.json</code> file to get the current file (with Axios in my case)</p></li>\n<li><p>Store the values in a dedicated store section (see VueX or any simpler store structure). In my case this looks something like:</p></li>\n</ol></li>\n</ol>\n\n<h2>Long story short:</h2>\n\n<p><strong>Store.ts</strong></p>\n\n<pre><code>let store = {\n    ...\n\n    // Will receive our config.json file content\n    settings: {},\n};\n\nexport default store;       \n</code></pre>\n\n<p><strong>App.vue</strong></p>\n\n<pre><code>mounted() {\n    Axios.get('./settings.json')\n        .then((response) =&gt; {\n            Store.Settings = response.data;\n         })\n}\n</code></pre>\n\n<p>This may not be perfect, but there is no need of an external technology, settings reachable from every component just like your states are in the store.</p>\n\n<p>Let me know if that sounds weird or there is a better solution.</p>\n"}], "owner": {"reputation": 97, "user_id": 8799713, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hJkXj.jpg?s=128&g=1", "display_name": "Glandalf313", "link": "https://stackoverflow.com/users/8799713/glandalf313"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 2, "accepted_answer_id": 56433544, "answer_count": 1, "score": 2, "last_activity_date": 1559684287, "creation_date": 1559150404, "question_id": 56365662, "link": "https://stackoverflow.com/questions/56365662/how-to-design-a-vue-cli-app-that-be-configured-after-build", "title": "How to design a vue-cli app that be configured after build?", "body": "<p>I have a working vue-cli app, that I can build without a problem. Now, I want to package a single build that will be deployed on several servers. My problem is that, depending on the server, I'll have to tweak some simple variables (server port, API token, etc.).</p>\n\n<p>Clearly, it's not a suitable solution to run several builds (based on .env files, or whatever) because of the context. I often get settings information on site and have to configure them quickly.</p>\n\n<p>Before working with Webpack and all its underlying compilation process, I had a classic js file embedding the settings and I would like to produce something similar. For what I know, files created on the <code>public</code> folder are not reachable from vue components (with import directive) and once minified, it's not a solution to tweak settings.</p>\n\n<p>Is it possible to tell vue-cli3 or webpack to keep a specific file or folder \"as is\"? Or maybe that there is a way cleaner solution?</p>\n"}, {"tags": ["typescript"], "answers": [{"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1559152558, "last_edit_date": 1559152558, "creation_date": 1559152193, "answer_id": 56366061, "question_id": 56365557, "link": "https://stackoverflow.com/questions/56365557/type-error-when-using-array-find-with-a-custom-type/56366061#56366061", "title": "Type error when using Array.find with a custom type", "body": "<p>I think you'll get the best results by explicitly invoking the <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.4.5/lib/lib.es2015.core.d.ts#L31\" rel=\"nofollow noreferrer\">overload of <code>Array.find()</code></a> which treats the callback as a <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards\" rel=\"nofollow noreferrer\">user-defined type guard</a>.  Note that you have to do this via manual annotation; the compiler does not currently <a href=\"https://github.com/microsoft/TypeScript/issues/14891\" rel=\"nofollow noreferrer\">infer type guards from function return values</a>. </p>\n\n<p>There are multiple ways to do this; here's one:</p>\n\n<pre><code>// make an explicit type guard for SupportedLanguages    \nfunction supportedLanguageGuard&lt;T extends keyof any&gt;(\n  x: T\n): x is T &amp; SupportedLanguages {\n  return !!(supported as any)[x];\n}\n\n// use it\nconst userLanguage: SupportedLanguages | undefined = browserLanguages.find(\n  supportedLanguageGuard\n); // okay\n</code></pre>\n\n<p>I went this way because it should work whether or not you narrow <code>browserLanguages</code> to keep track of the literals inside it</p>\n\n<pre><code>const browserLanguages = [\"fr\", \"es\"] as const; // TS3.4+\n</code></pre>\n\n<p>Okay, hope that helps.  Good luck!</p>\n\n<p><a href=\"https://typescript-play.js.org/#code/C4TwDgpgBAygrmMB7ATsCATAMgQwHYDmcOBEAzlALxQBEEeNUAPreTQNwBQnokUuhYqQByOALbRqAbygBtADb4iJaAEs8sBMjSYBy0mQC6ALihlgKdQSgBfLpwDGSPObNbU6DKb1CIoiVRQUpxQUPSmNACihPKqZAAWNAA0IWFkEZFkYDgAj0jyNJx23E4uwFAARihIAO5kECg+KhTUsjQAZijJrGQ0hvbtcHgOwKrObogeukq+AOLEKBgAPAAqYQAe6HgYFADWECBI7VD4IAB8ABSp66YrnACUputQcVBrAGSakzrYM81BqRQEGAcBQGgAhOCLmR3D8ThRTvdZOt+kUSs5XHB6o0-qRTPBvp4mgZmFAhhgIO11JhAlVatjieQAHRU7ZXUIwwnTQQqeY4RYPeylMj5CBM+RIAgXLENRn3LhAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 231, "user_id": 8110909, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/003978ead2cd5388d121a7451d9a43ae?s=128&d=identicon&r=PG&f=1", "display_name": "Will Halpert", "link": "https://stackoverflow.com/users/8110909/will-halpert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 56366061, "answer_count": 1, "score": 1, "last_activity_date": 1559152558, "creation_date": 1559149937, "question_id": 56365557, "link": "https://stackoverflow.com/questions/56365557/type-error-when-using-array-find-with-a-custom-type", "title": "Type error when using Array.find with a custom type", "body": "<p>I have an object containing a list of supported languages. I'd like to find the user's browser contains one of the languages:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const userLanguage = browserLanguages.find(language =&gt; !!supported[language]);\n</code></pre>\n\n<p>However, I'm getting the following error: <code>Element implicitly has an 'any' type because type 'LanguageName' has no index signature.</code></p>\n\n<p><code>LanguageName</code> is a type I've created for my <code>supported</code> object:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type LanguageName = {\n  [language in SupportedLanguages]: string;\n};\n</code></pre>\n\n<p>And <code>supportedLanguages</code> is a type containing all languages supported by our app:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type SupportedLanguages = 'en' | 'es';\n</code></pre>\n\n<p><strong><a href=\"https://repl.it/repls/KookyBlankAnalysts\" rel=\"nofollow noreferrer\">DEMO</a></strong></p>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "edited": false, "score": 0, "creation_date": 1559148048, "post_id": 56365101, "comment_id": 99333404, "body": "So would I pass that in as a string value then? Like <code>pushUnique(myArr, newObj, &#39;Id&#39;)</code> ?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "edited": false, "score": 0, "creation_date": 1559148167, "post_id": 56365101, "comment_id": 99333460, "body": "@Reed added usage example, yes it would be a string but it would also be checked by the compiler"}, {"owner": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "edited": false, "score": 0, "creation_date": 1559148322, "post_id": 56365101, "comment_id": 99333525, "body": "Awesome that does work! Is there a way I could perhaps pass it in dynamically as a function argument however? Instead of explicitly specifying through string? It would be nice to take advantage of typescripts intellisense."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "edited": false, "score": 0, "creation_date": 1559148414, "post_id": 56365101, "comment_id": 99333569, "body": "@Reed you have intelisense for strings that are <code>keyof T</code>  type &quot;|&quot; and at the cursor | you will get intelisense"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "edited": false, "score": 0, "creation_date": 1559148564, "post_id": 56365101, "comment_id": 99333633, "body": "@Reed added function version as well"}, {"owner": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "edited": false, "score": 0, "creation_date": 1559149010, "post_id": 56365101, "comment_id": 99333831, "body": "That&#39;s excellent, and exactly what I was looking for! So are we just specifying that we accept in the lambda object of T and we are returning object type U from T? Am I understanding that correctly?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "edited": false, "score": 0, "creation_date": 1559149164, "post_id": 56365101, "comment_id": 99333908, "body": "@Reed yeah that is the gist of it. <code>any</code> would probably work as well since we don&#39;t use <code>U</code> in any other position. This solution allows you to access nested object so it&#39;s not necessary for the result to be a value in the object"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 1, "last_activity_date": 1559148556, "last_edit_date": 1559148556, "creation_date": 1559147931, "answer_id": 56365101, "question_id": 56365028, "link": "https://stackoverflow.com/questions/56365028/how-to-specify-generic-key-constraint-in-function-argument/56365101#56365101", "title": "How to specify generic key constraint in function argument", "body": "<p>You can pass in the key typed as <code>keyof T</code> meaning it must be a key of whatever <code>T</code> is passed in and then you can just use index access to get the value:</p>\n\n<pre><code>class Util {\n    pushUnique&lt;T&gt;(arr: T[], obj: T, key: keyof T) {\n        if (key !== null) {\n            const index = arr.findIndex(o =&gt; o[key] === obj[key]);\n        }\n    }\n}\n\nnew Util().pushUnique([{a: 1}], {a :2 }, \"a\")\nnew Util().pushUnique([{a: 1}], {a :2 }, \"b\") //err\n</code></pre>\n\n<p>You can also use a function instead of <code>keyof</code> but this is the JS/TS way of doing things: </p>\n\n<pre><code>class Util {\n    pushUnique&lt;T, U&gt;(arr: T[], obj: T, key: (o: T) =&gt; U) {\n        if (key !== null) {\n            const index = arr.findIndex(o =&gt; key(o) === key(o));\n        }\n    }\n}\n\nnew Util().pushUnique([{a: 1}], {a :2 }, o =&gt; o.a)\nnew Util().pushUnique([{a: 1}], {a :2 }, o =&gt; o.b) //err\n</code></pre>\n"}], "owner": {"reputation": 1113, "user_id": 7896203, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/47524fac19864d21a7267812d6c6e2c1?s=128&d=identicon&r=PG&f=1", "display_name": "Reed", "link": "https://stackoverflow.com/users/7896203/reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 56365101, "answer_count": 1, "score": 1, "last_activity_date": 1559592709, "creation_date": 1559147665, "last_edit_date": 1559592709, "question_id": 56365028, "link": "https://stackoverflow.com/questions/56365028/how-to-specify-generic-key-constraint-in-function-argument", "title": "How to specify generic key constraint in function argument", "body": "<p>I might be going about this the wrong way, I just wanted to have a little bit of fun in code today. I'm sure a library already does this as well. </p>\n\n<p>I am creating a generic <code>pushUnique</code> function that determines if a new object being pushed to an array is unique based on a key, and if so, push it.</p>\n\n<p>So far I have little more than pseudo-code that doesn't work for obvious reasons: </p>\n\n<pre><code>  pushUnique&lt;T, U&gt;(arr: T[], obj: T, key: U = null) {\n    if (key !== null) {\n      const index = arr.findIndex(o =&gt; o.key === obj.key);\n    }\n  }\n</code></pre>\n\n<p>How can I get the object name of the key and specify it for the findIndex function?</p>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>With help from Titian Cernicova-Dragomir this is my final solution for now that works great for my POC needs!</p>\n\n<pre><code>export class Utils {\n  pushUnique&lt;T, U&gt;(arr: T[], obj: T, key: (o: T) =&gt; U = null, logVerbose: boolean = false): void {\n    if (logVerbose === true) {\n      console.log('pushUnique called');\n    }\n\n    if (typeof obj === 'object' &amp;&amp; key === null) {\n      console.warn('Object defined in pushUnique is complex, but a key was not specified.');\n    } else if (typeof obj !== 'object' &amp;&amp; key !== null) {\n      console.warn('Object is not complex, but a key was specified');\n    }\n\n    const index = key !== null ? arr.findIndex(o =&gt; key(o) === key(obj)) : arr.indexOf(obj);\n    if (index === -1) {\n      arr.push(obj);\n    } else {\n      if (logVerbose === true) {\n        console.log('Duplicate object, not added');\n      }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1559146401, "post_id": 56364674, "comment_id": 99332587, "body": "this will help <a href=\"https://stackoverflow.com/questions/53556409/typescript-flatmap-flat-flatten-doesnt-exist-on-type-any\" title=\"typescript flatmap flat flatten doesnt exist on type any\">stackoverflow.com/questions/53556409/&hellip;</a>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559146403, "post_id": 56364674, "comment_id": 99332589, "body": "That&#39;s in ES2019, isn&#39;t it?  Your <code>--lib</code> in <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" rel=\"nofollow noreferrer\">tsconfig</a> needs to include <a href=\"https://github.com/Microsoft/TypeScript/blob/v3.4.5/lib/lib.es2019.array.d.ts#L39-L133\" rel=\"nofollow noreferrer\">the right library</a>"}, {"owner": {"reputation": 25722, "user_id": 2192903, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mNrNH.png?s=128&g=1", "display_name": "Arnaud Denoyelle", "link": "https://stackoverflow.com/users/2192903/arnaud-denoyelle"}, "reply_to_user": {"reputation": 9179, "user_id": 1886334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e652ff08eda27ed92b13976118ab2e2?s=128&d=identicon&r=PG", "display_name": "Madhawa Priyashantha", "link": "https://stackoverflow.com/users/1886334/madhawa-priyashantha"}, "edited": false, "score": 0, "creation_date": 1559146556, "post_id": 56364674, "comment_id": 99332658, "body": "@MadhawaPriyashantha Will the generated code still be compatible with odl browsers or do I need a polyfill ?"}, {"owner": {"reputation": 25722, "user_id": 2192903, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mNrNH.png?s=128&g=1", "display_name": "Arnaud Denoyelle", "link": "https://stackoverflow.com/users/2192903/arnaud-denoyelle"}, "edited": false, "score": 0, "creation_date": 1559146859, "post_id": 56364674, "comment_id": 99332820, "body": "Definitely works :) I mark my own question as a duplicate of the suggested one."}], "owner": {"reputation": 25722, "user_id": 2192903, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mNrNH.png?s=128&g=1", "display_name": "Arnaud Denoyelle", "link": "https://stackoverflow.com/users/2192903/arnaud-denoyelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "closed_date": 1559147054, "answer_count": 0, "score": 1, "last_activity_date": 1559146196, "creation_date": 1559146196, "question_id": 56364674, "link": "https://stackoverflow.com/questions/56364674/flatten-array-of-arrays-available-in-javascript-but-not-in-typescript", "closed_reason": "Duplicate", "title": "Flatten array of arrays available in Javascript but not in TypeScript?", "body": "<p>In Javascript, it is possible to flatten an array of arrays with <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat\" rel=\"nofollow noreferrer\">Array\u200b.prototype\u200b.flat()</a> (you can test it  in Chrome's developer console) : </p>\n\n<pre><code>const a = [1, 2, 3]\nconst b = [4, 5, 6]\nconst arr = [a, b]\nconsole.log(arr.flat())\n</code></pre>\n\n<p><strong>Output :</strong></p>\n\n<blockquote>\n  <p>[1, 2, 3, 4, 5, 6]</p>\n</blockquote>\n\n<p>Now, if I try the same code in TypeScript, I get the following error : </p>\n\n<blockquote>\n  <p>TS2339: Property 'flat' does not exist on type 'number[][]'.</p>\n</blockquote>\n\n<p>Why ? Is it simply not included in TypeScript ? \nIt does not seem to be a recent nor non-standard feature. Is there another way to call this function ? </p>\n\n<p>There are <a href=\"https://stackoverflow.com/questions/10865025/merge-flatten-an-array-of-arrays\">other ways</a> to flatten arrays of arrays but I find them hardly readable.</p>\n"}, {"tags": ["typescript", "decorator", "typescript-decorator"], "owner": {"reputation": 1195, "user_id": 7451109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FcAjo.jpg?s=128&g=1", "display_name": "shaedrich", "link": "https://stackoverflow.com/users/7451109/shaedrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1611045445, "creation_date": 1559145113, "question_id": 56364399, "link": "https://stackoverflow.com/questions/56364399/typescript-parameter-decorator-for-manipulating-input", "title": "Typescript parameter decorator for manipulating input", "body": "<p>I want to write a decorator for the following use case:</p>\n\n<pre><code>function doSomethingWithADate(date: string | number | Date) {\n    // do something with the passed in date\n}\n</code></pre>\n\n<p>My problem is, that I don't know if the date is really of type string, number or date. I could do the necessary conversion inside the function but I don't think, that's the best way to do and I even if I re-use it using an additional function, there's still one additional line of code for every function of that kind.</p>\n\n<p>What I want the decorator to do is:</p>\n\n<ol>\n<li>Find every date-like argument</li>\n<li>Convert it to a date if necessary</li>\n<li>Use the manipulated arguments inside the function just like they were passed in that way.</li>\n</ol>\n\n<p>Is that possible?</p>\n"}, {"tags": ["typescript", "generics", "casting"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559145975, "post_id": 56364384, "comment_id": 99332385, "body": "It&#39;s usually a good idea for code in questions to be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that someone can just drop into an IDE and reproduce the issue without extraneous dependencies or errors... ideally there&#39;d even be a link to a web IDE like <a href=\"http://www.typescriptlang.org/play//\" rel=\"nofollow noreferrer\">the Playground</a>.  It&#39;s difficult to come up with concrete types that are known to be assignable to a generic type.  There&#39;s no guarantee that <code>CustomModel</code> will be assignable to <code>T</code> (a <i>default</i> is just a default, not a guarantee) so it&#39;s a type error to return a <code>CustomModel</code> when you need to return a <code>T</code>."}, {"owner": {"reputation": 41, "user_id": 11573856, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LZ4YIxUS4dI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbelLNOmRhRzb2R5wykApNaV7GyQ/mo/photo.jpg?sz=128", "display_name": "River H", "link": "https://stackoverflow.com/users/11573856/river-h"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1559146639, "post_id": 56364384, "comment_id": 99332705, "body": "That&#39;s true, I&#39;m really sorry. This is a pretty complicated example and tomorrow morning I will abstract out my issue to a minimal reproducible example. Thanks."}, {"owner": {"reputation": 41, "user_id": 11573856, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LZ4YIxUS4dI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbelLNOmRhRzb2R5wykApNaV7GyQ/mo/photo.jpg?sz=128", "display_name": "River H", "link": "https://stackoverflow.com/users/11573856/river-h"}, "reply_to_user": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1559146853, "post_id": 56364384, "comment_id": 99332817, "body": "Added a link in the question to a playground example i just whipped up, it&#39;s not &quot;Functioning&quot; but it does get the same error or at least one of the errors I have got while fiddling with this issue. Will make it more concise soon. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 11573856, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LZ4YIxUS4dI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbelLNOmRhRzb2R5wykApNaV7GyQ/mo/photo.jpg?sz=128", "display_name": "River H", "link": "https://stackoverflow.com/users/11573856/river-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1562322989, "last_edit_date": 1562322989, "creation_date": 1562322450, "answer_id": 56901285, "question_id": 56364384, "link": "https://stackoverflow.com/questions/56364384/is-it-possible-to-set-a-default-value-for-an-argument-in-typescript-when-the-typ/56901285#56901285", "title": "Is it possible to set a default value for an argument in typescript when the type of the argument is a generic?", "body": "<p>I solved the problem, which was to return a default (in this case a generic object) in case a model was not passed.\nGenerally the fixes were:</p>\n\n<ul>\n<li>Change from having the model be typed as the <code>Constructable</code> interface but to use a union type of the <code>Constructable&lt;T&gt; | object</code>.</li>\n<li>Change the default where the model is being passed in to an Object.</li>\n<li><code>buildModel()</code> function checks the type of the model and if it's an object, return the values passed in, if it's a constructable, then create an instance of it.</li>\n</ul>\n\n<p>Check out how it's implemented in <code>postAsync</code> parameters, in the <code>ResponseModel</code> interface and in the <code>buildModel</code> method implemented in <code>requestAsync</code>:</p>\n\n<pre><code>interface Constructable&lt;T&gt; { new(params : any): T ;}\ntype ResponseModel&lt;T&gt; = Constructable&lt;T&gt; | Object;\n\nexport default class WebapiBase {\n  static async postAsync&lt;T = Object&gt;(\n      {\n          uri = '',\n          body = {},\n          headers = new CustomHeaders(),\n      }: PostRequestParams = {},\n      // Here is where the defualt is implemented\n      model: ResponseModel&lt;T&gt; = Object): Promise&lt;T&gt; {\n      return this.requestAsync(model, HTTP_METHOD.POST, uri, headers, body);\n  }\n  private static async requestAsync&lt;T = Object&gt;(\n      // This param accepts either a class or object\n      model: ResponseModel&lt;T&gt;,\n      method: HTTP_METHOD,\n      uri: string,\n      headers: CustomHeaders,\n      body?: object): Promise&lt;T&gt; {\n      const url = new URL(uri, window.location.origin);\n      const request = this.buildRequest(url, method, headers, body);\n      const bodyResponse = await fetch(request)\n          .then(response =&gt; this.validate(response, request.headers))\n          .then(validResponse =&gt; this.extractBody(validResponse))\n          // Class instance or object returned here\n          .then(extractedBody =&gt; this.buildModel(model, extractedBody))\n          .catch((error) =&gt; { throw this.handleError(error); });\n      return bodyResponse;\n  }\n\n  // Method that conditionally creates an instance of the passed in model\n  // Or returns the object passed in if no model specified\n  private static buildModel&lt;T = Object&gt;(\n        Model: ResponseModel&lt;T&gt;,\n        params: any,\n    ): T {\n        if (typeof Model === 'object') return params;\n        return new Model(params);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11573856, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LZ4YIxUS4dI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbelLNOmRhRzb2R5wykApNaV7GyQ/mo/photo.jpg?sz=128", "display_name": "River H", "link": "https://stackoverflow.com/users/11573856/river-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1562322989, "creation_date": 1559145070, "last_edit_date": 1559146946, "question_id": 56364384, "link": "https://stackoverflow.com/questions/56364384/is-it-possible-to-set-a-default-value-for-an-argument-in-typescript-when-the-typ", "title": "Is it possible to set a default value for an argument in typescript when the type of the argument is a generic?", "body": "<p>I am writing generic methods in order to use them in different frontend apps, and the idea is to be able to call the function <code>.postAsync&lt;CustomModel&gt;('www.mysite.com',..., CustomModel);</code>, and the intended response is a CustomModel object.</p>\n\n<p>I would like to be able to set a default value for the second parameter, so that by default the value will be a different model and that can be overridden when needed.</p>\n\n<p>How do I set the default value for an argument that is of type <code>Constructable&lt;T&gt;</code> where the interface Constructable means </p>\n\n<pre><code>interface Constructable&lt;T&gt; { new(params : any): T ;}\n</code></pre>\n\n<p>I have tried setting a default value of an interface which takes an argument and setting the argument to different types, but I always get the error <code>Type Constructable&lt;CustomModel&gt; is not assignable to type Constructable&lt;T&gt;</code>. I have also set the default type of T in the method generic to CustomModel and then tried this and get the same error. </p>\n\n<pre><code>interface Constructable&lt;T&gt; { new(params : any): T ;}\n\n\nexport default class WebapiBase {\n\n    static async postAsync&lt;T = CustomModel&gt;(\n        uri: string,\n        body: object,\n        headers: CustomHeaders = new CustomHeaders(),\n        // This is the part giving errors\n        model: Constructable&lt;T&gt; = &lt;Constructable&lt;CustomModel&gt;&gt;,): Promise&lt;T&gt; {\n        return this.requestAsync&lt;T&gt;(model, HTTP_METHOD.POST, uri, headers, body);\n    }\n\n    private static async requestAsync&lt;T&gt;(\n        model: Constructable&lt;T&gt;,\n        method: HTTP_METHOD,\n        uri: string,\n        headers: CustomHeaders,\n        body?: object): Promise&lt;T&gt; {\n        const url = new URL(uri, window.location.origin);\n        const request = this.buildRequest(url, method, headers, body);\n        const bodyResponse = await fetch(request)\n            .then(response =&gt; this.validate(response, request.headers))\n            .then(validResponse =&gt; this.extractBody(validResponse))\n            // Here is where the response body is being used to initialise one of the custom models that we are passing in. Code below\n            .then(extractedBody =&gt; this.buildModel&lt;T&gt;(model, extractedBody))\n            .catch((error) =&gt; { throw this.handleError(error); });\n        return bodyResponse;\n    }\n\n    private static buildModel&lt;T&gt;(\n        Model: Constructable&lt;T&gt;,\n        params: ResponseBody,\n    ): T {\n        return new Model(params);\n    }\n}\n\n</code></pre>\n\n<p>I expected that I would not have to pass a model in to the method <code>postAsync()</code> and that it would always return a CustomModel object. But in actuality I get this error <code>Type Constructable&lt;CustomModel&gt; is not assignable to type Constructable&lt;T&gt;</code></p>\n\n<p><a href=\"http://www.typescriptlang.org/play//#src=interface%20Constructable%3CT%3E%20%7B%20new(params%20%3A%20any)%3A%20T%20%3B%7D%0D%0Aclass%20CustomModel%20%7B%0D%0A%20%20%20%20params%3A%20any%3B%0D%0A%20%20%20%20constructor(params%3A%20any)%20%7B%0D%0A%20%20%20%20%20%20%20%20this.params%20%3D%20params%3B%0D%0A%20%20%20%20%7D%0D%0A%7D%0D%0A%0D%0Aexport%20default%20class%20WebapiBase%20%7B%0D%0A%0D%0A%20%20%20%20static%20async%20postAsync%3CT%20%3D%20CustomModel%3E(%0D%0A%20%20%20%20%20%20%20%20uri%3A%20string%2C%0D%0A%20%20%20%20%20%20%20%20body%3A%20object%2C%0D%0A%20%20%20%20%20%20%20%20%2F%2F%20This%20is%20the%20part%20giving%20errors%0D%0A%20%20%20%20%20%20%20%20model%3A%20Constructable%3CT%3E%20%3D%20%3CConstructable%3CCustomModel%3E%3E%2C)%3A%20Promise%3CT%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20this.requestAsync%3CT%3E(model%2C%20HTTP_METHOD.POST%2C%20uri%2C%20headers%2C%20body)%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20private%20static%20async%20requestAsync%3CT%3E(%0D%0A%20%20%20%20%20%20%20%20model%3A%20Constructable%3CT%3E%2C%0D%0A%20%20%20%20%20%20%20%20method%3A%20HTTP_METHOD%2C%0D%0A%20%20%20%20%20%20%20%20uri%3A%20string%2C%0D%0A%20%20%20%20%20%20%20%20headers%3A%20CustomHeaders%2C%0D%0A%20%20%20%20%20%20%20%20body%3F%3A%20object)%3A%20Promise%3CT%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20const%20url%20%3D%20new%20URL(uri%2C%20window.location.origin)%3B%0D%0A%20%20%20%20%20%20%20%20const%20request%20%3D%20this.buildRequest(url%2C%20method%2C%20headers%2C%20body)%3B%0D%0A%20%20%20%20%20%20%20%20const%20bodyResponse%20%3D%20await%20fetch(request)%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(response%20%3D%3E%20this.validate(response%2C%20request.headers))%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(validResponse%20%3D%3E%20this.extractBody(validResponse))%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Here%20is%20where%20the%20response%20body%20is%20being%20used%20to%20initialise%20one%20of%20the%20custom%20models%20that%20we%20are%20passing%20in.%20Code%20below%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20.then(extractedBody%20%3D%3E%20this.buildModel%3CT%3E(model%2C%20extractedBody))%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20.catch((error)%20%3D%3E%20%7B%20throw%20this.handleError(error)%3B%20%7D)%3B%0D%0A%20%20%20%20%20%20%20%20return%20bodyResponse%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20private%20static%20buildModel%3CT%3E(%0D%0A%20%20%20%20%20%20%20%20Model%3A%20Constructable%3CT%3E%2C%0D%0A%20%20%20%20%20%20%20%20params%3A%20ResponseBody%2C%0D%0A%20%20%20%20)%3A%20T%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20new%20Model(params)%3B%0D%0A%20%20%20%20%7D%0D%0A%7D\" rel=\"nofollow noreferrer\">Example in Playground, hover over Constructable in args to see error</a></p>\n"}, {"tags": ["typescript", "inversifyjs"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3875721"}, "is_accepted": true, "score": 0, "last_activity_date": 1559197189, "creation_date": 1559197189, "answer_id": 56372691, "question_id": 56364284, "link": "https://stackoverflow.com/questions/56364284/di-constructor-of-class-how-injectable-calls-serveral-times/56372691#56372691", "title": "DI: constructor of class how injectable calls serveral times", "body": "<p>By default <code>injectable</code> is not Singleton.</p>\n\n<p>Solve this problem can adding <code>defaultScope: 'Singleton'</code>:</p>\n\n<pre><code>var simpleContainer = new Container(\n            { \n               autoBindInjectable: true, \n               defaultScope: 'Singleton'\n            }\n)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3875721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 56372691, "answer_count": 1, "score": 0, "last_activity_date": 1559197189, "creation_date": 1559144717, "last_edit_date": 1559145229, "question_id": 56364284, "link": "https://stackoverflow.com/questions/56364284/di-constructor-of-class-how-injectable-calls-serveral-times", "title": "DI: constructor of class how injectable calls serveral times", "body": "<p>There are several classes, how injected <code>TermsExchangeService</code>:</p>\n\n<pre><code>import {TermsExchangeService} from './terms-exchange.service';\n\n@injectable()\nexport class TermsExchangeComponent {\n  constructor(\n        private termsExchangeService: TermsExchangeService\n    ) {}\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>import {TermsExchangeService} from './terms-exchange.service';\n\n@injectable()\nexport class PurchaseMainComponent {\n    constructor(\n       private termsExchangeService: TermsExchangeService\n    ) {}\n</code></pre>\n\n<p>and service how has been used in <code>PurchaseMainComponent</code> and <code>TermsExchangeComponent</code></p>\n\n<pre><code>@injectable()\nexport class TermsExchangeService {\n\n    constructor() {\n        debugger; // call 2 times!!!\n    }\n}\n</code></pre>\n\n<p>I use <code>autoBindInjectable</code>:</p>\n\n<pre><code>var simpleContainer = new Container({ autoBindInjectable: true })\n</code></pre>\n\n<p>When getting components from loop constructor of <code>TermsExchangeService</code> call several times:</p>\n\n<pre><code>for (let item = 0; item &lt; components.length; item++) {\n   const container = simpleContainer.get(components[item]);\n}\n</code></pre>\n\n<p>Why object created in every components? And how do normal injections?</p>\n"}, {"tags": ["reactjs", "typescript"], "comments": [{"owner": {"reputation": 329, "user_id": 11568394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de257a2a6e2104089dae280214ea7a53?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Z", "link": "https://stackoverflow.com/users/11568394/anthony-z"}, "edited": false, "score": 1, "creation_date": 1559144218, "post_id": 56364107, "comment_id": 99331424, "body": "Did you mean to put <code>this.state.myItems</code>?"}, {"owner": {"reputation": 3953, "user_id": 1005022, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3c610562a103d308458ea7afe59403?s=128&d=identicon&r=PG", "display_name": "Leo S", "link": "https://stackoverflow.com/users/1005022/leo-s"}, "reply_to_user": {"reputation": 329, "user_id": 11568394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de257a2a6e2104089dae280214ea7a53?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Z", "link": "https://stackoverflow.com/users/11568394/anthony-z"}, "edited": false, "score": 0, "creation_date": 1559144272, "post_id": 56364107, "comment_id": 99331465, "body": "no - my state is the items <code>React.Component&lt;AppProps, Items&gt;</code>"}, {"owner": {"reputation": 329, "user_id": 11568394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de257a2a6e2104089dae280214ea7a53?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony Z", "link": "https://stackoverflow.com/users/11568394/anthony-z"}, "edited": false, "score": 0, "creation_date": 1559144441, "post_id": 56364107, "comment_id": 99331550, "body": "If it&#39;s not too much trouble, do you mind showing the component?"}], "answers": [{"tags": [], "owner": {"reputation": 3953, "user_id": 1005022, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3c610562a103d308458ea7afe59403?s=128&d=identicon&r=PG", "display_name": "Leo S", "link": "https://stackoverflow.com/users/1005022/leo-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1559144624, "creation_date": 1559144624, "answer_id": 56364257, "question_id": 56364107, "link": "https://stackoverflow.com/questions/56364107/binding-the-list-items-to-this-state/56364257#56364257", "title": "Binding the List items to this.state", "body": "<p>I found an easy solution to this... I created a new type:</p>\n\n<pre><code>type ItemsState = {\n    items: Items\n}\n</code></pre>\n\n<p>then changed my component to use that as a state instead: <code>export default class App extends React.Component&lt;AppProps, ItemsState&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 3953, "user_id": 1005022, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3c610562a103d308458ea7afe59403?s=128&d=identicon&r=PG", "display_name": "Leo S", "link": "https://stackoverflow.com/users/1005022/leo-s"}, "edited": false, "score": 0, "creation_date": 1559144983, "post_id": 56364259, "comment_id": 99331833, "body": "Thank you for your suggestions. Not sure where I am using <code>inheritance</code>...? Also an Array is an object - is it not? Also not sure where i am binding functions to the state either."}, {"owner": {"reputation": 12668, "user_id": 1234087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623981dff194e144f20676961a2b6dba?s=128&d=identicon&r=PG", "display_name": "Mos&#232; Raguzzini", "link": "https://stackoverflow.com/users/1234087/mos%c3%a8-raguzzini"}, "reply_to_user": {"reputation": 3953, "user_id": 1005022, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3c610562a103d308458ea7afe59403?s=128&d=identicon&r=PG", "display_name": "Leo S", "link": "https://stackoverflow.com/users/1005022/leo-s"}, "edited": false, "score": 0, "creation_date": 1559145068, "post_id": 56364259, "comment_id": 99331874, "body": "export default class Items extends Array&lt;Item&gt; -&gt; you are extending an Array. Yes, in javascript also array are object but as array&#39;s index is not tightly coupled to its values state becomes unpredictable."}, {"owner": {"reputation": 3953, "user_id": 1005022, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3c610562a103d308458ea7afe59403?s=128&d=identicon&r=PG", "display_name": "Leo S", "link": "https://stackoverflow.com/users/1005022/leo-s"}, "edited": false, "score": 0, "creation_date": 1559146203, "post_id": 56364259, "comment_id": 99332498, "body": "That inheritance is not part of the React component model I am creating... it is a data class - i don&#39;t think the guideline you referring to, applies here. Thanks for your input though."}], "tags": [], "owner": {"reputation": 12668, "user_id": 1234087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623981dff194e144f20676961a2b6dba?s=128&d=identicon&r=PG", "display_name": "Mos&#232; Raguzzini", "link": "https://stackoverflow.com/users/1234087/mos%c3%a8-raguzzini"}, "is_accepted": false, "score": 0, "last_activity_date": 1559144633, "creation_date": 1559144633, "answer_id": 56364259, "question_id": 56364107, "link": "https://stackoverflow.com/questions/56364107/binding-the-list-items-to-this-state/56364259#56364259", "title": "Binding the List items to this.state", "body": "<p>First, I want to point out that React's patterns discourage inheritance and prefer <a href=\"https://reactjs.org/docs/composition-vs-inheritance.html\" rel=\"nofollow noreferrer\">composition</a> </p>\n\n<p>Moreover you are extending an Array while React expect an Object.</p>\n\n<p>Another misconception is \"bind a function to the state\". You are binding <em>this</em> context, not to variables.</p>\n\n<p>Finally, state must be serializable and you should put in it only objects and arrays or primitives.</p>\n\n<p>Try to refactor your components following this guidelines or post complete code for a more comprehensive solution.</p>\n"}], "owner": {"reputation": 3953, "user_id": 1005022, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3a3c610562a103d308458ea7afe59403?s=128&d=identicon&r=PG", "display_name": "Leo S", "link": "https://stackoverflow.com/users/1005022/leo-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 56364257, "answer_count": 2, "score": 0, "last_activity_date": 1559144633, "creation_date": 1559144058, "question_id": 56364107, "link": "https://stackoverflow.com/questions/56364107/binding-the-list-items-to-this-state", "title": "Binding the List items to this.state", "body": "<p>I have a Recact component defined as: </p>\n\n<p><code>export default class App extends React.Component&lt;AppProps, Items&gt;</code></p>\n\n<p>The <code>Items</code> class is defined as:</p>\n\n<p><code>export default class Items extends Array&lt;Item&gt;</code> </p>\n\n<p>and the <code>Item</code> is just a class with a bunch of properties.</p>\n\n<p>If in <code>render()</code> I bind a list to my <code>Items</code> object directly ie.</p>\n\n<p><code>&lt;List items={myItems} onRenderCell={this._onRenderCell} /&gt;</code> </p>\n\n<p>the list is displayed correctly, however if I <code>this.setState(myItems)</code> and then try to get the list binded to the state:</p>\n\n<p><code>&lt;List items={this.state} onRenderCell={this._onRenderCell} /&gt;</code> </p>\n\n<p>I get the compile-time error:</p>\n\n<blockquote>\n  <blockquote>\n    <p>Type 'Readonly' is missing the following properties from type 'any[]': [Symbol.iterator], [Symbol.unscopables]</p>\n  </blockquote>\n</blockquote>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["typescript", "types"], "answers": [{"comments": [{"owner": {"reputation": 6209, "user_id": 1935318, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ftlsb.jpg?s=128&g=1", "display_name": "amaurym", "link": "https://stackoverflow.com/users/1935318/amaurym"}, "edited": false, "score": 0, "creation_date": 1559147399, "post_id": 56364689, "comment_id": 99333108, "body": "Nice! Could you fix the playground link, I&#39;ll have a look"}, {"owner": {"reputation": 106152, "user_id": 1108891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zUoEd.jpg?s=128&g=1", "display_name": "Shaun Luttin", "link": "https://stackoverflow.com/users/1108891/shaun-luttin"}, "reply_to_user": {"reputation": 6209, "user_id": 1935318, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ftlsb.jpg?s=128&g=1", "display_name": "amaurym", "link": "https://stackoverflow.com/users/1935318/amaurym"}, "edited": false, "score": 0, "creation_date": 1559147538, "post_id": 56364689, "comment_id": 99333175, "body": "Playground link fixed."}], "tags": [], "owner": {"reputation": 106152, "user_id": 1108891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zUoEd.jpg?s=128&g=1", "display_name": "Shaun Luttin", "link": "https://stackoverflow.com/users/1108891/shaun-luttin"}, "is_accepted": true, "score": 1, "last_activity_date": 1559147521, "last_edit_date": 1559147521, "creation_date": 1559146251, "answer_id": 56364689, "question_id": 56364072, "link": "https://stackoverflow.com/questions/56364072/dynamically-putting-functions-into-an-object-without-losing-type-information/56364689#56364689", "title": "Dynamically putting functions into an object without losing type information", "body": "<blockquote>\n  <p>The code works, but the typings don't. I'm not sure what to put instead of ???.</p>\n</blockquote>\n\n<p>Here is an approach that works. It creates a new type that maps each function name to its return type.</p>\n\n<pre><code>type ReturnTypes&lt;T&gt; = {\n    [K in keyof T]: T[K] extends (...args: any) =&gt; any\n    ? ReturnType&lt;T[K]&gt;\n    : never;\n};\n\nconst myObject = Object\n    .keys(functions)\n    .reduce(\n        (accumulator, functionName) =&gt; {\n            accumulator[functionName] = functions[functionName](api);\n            return accumulator;\n        },\n        {} as ReturnTypes&lt;typeof functions&gt;\n    );\n\nconst result1: number[] = myObject.f1(10);\nconst result2: boolean = myObject.f2('foo', 'bar');\n</code></pre>\n\n<p>Here it is in the <a href=\"https://www.typescriptlang.org/play/#src=type%20Api%20%3D%20%7B%0D%0A%20%20%20%20prop1%3A%20string%3B%0D%0A%20%20%20%20prop2%3A%20string%3B%0D%0A%7D%3B%0D%0A%0D%0Afunction%20f1(api%3A%20Api)%20%7B%0D%0A%20%20%20%20return%20function%20(a%3A%20number)%3A%20number%5B%5D%20%7B%20return%20%5B%5D%3B%20%7D%0D%0A%7D%3B%0D%0A%0D%0Afunction%20f2(api%3A%20Api)%20%7B%0D%0A%20%20%20%20return%20function%20(a%3A%20string%2C%20b%3A%20string)%3A%20boolean%20%7B%20return%20true%3B%20%7D%0D%0A%7D%3B%0D%0A%0D%0A%2F%2F%20mimic%20the%20import%20of%20a%20module%20with%20two%20named%20exports%0D%0Aconst%20functions%20%3D%20%7B%20f1%2C%20f2%20%7D%3B%0D%0A%0D%0Atype%20ReturnTypes%3CT%3E%20%3D%20%7B%0D%0A%20%20%20%20%5BK%20in%20keyof%20T%5D%3A%20T%5BK%5D%20extends%20(...args%3A%20any)%20%3D%3E%20any%0D%0A%20%20%20%20%3F%20ReturnType%3CT%5BK%5D%3E%0D%0A%20%20%20%20%3A%20never%3B%0D%0A%7D%3B%0D%0A%0D%0Aconst%20api%20%3D%20%7B%0D%0A%20%20%20%20prop1%3A%20&#39;&#39;%2C%0D%0A%20%20%20%20prop2%3A%20&#39;&#39;%2C%0D%0A%7D%3B%0D%0A%0D%0Aconst%20myObject%20%3D%20Object%0D%0A%20%20%20%20.keys(functions)%0D%0A%20%20%20%20.reduce(%0D%0A%20%20%20%20%20%20%20%20(accumulator%2C%20functionName)%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20accumulator%5BfunctionName%5D%20%3D%20functions%5BfunctionName%5D(api)%3B%0D%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20accumulator%3B%0D%0A%20%20%20%20%20%20%20%20%7D%2C%0D%0A%20%20%20%20%20%20%20%20%7B%7D%20as%20ReturnTypes%3Ctypeof%20functions%3E%0D%0A%20%20%20%20)%3B%0D%0A%0D%0Aconst%20result1%3A%20number%5B%5D%20%3D%20myObject.f1(10)%3B%0D%0Aconst%20result2%3A%20boolean%20%3D%20myObject.f2(&#39;foo&#39;%2C%20&#39;bar&#39;)%3B\" rel=\"nofollow noreferrer\">TypeScript playground</a>.</p>\n"}], "owner": {"reputation": 6209, "user_id": 1935318, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/ftlsb.jpg?s=128&g=1", "display_name": "amaurym", "link": "https://stackoverflow.com/users/1935318/amaurym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 56364689, "answer_count": 1, "score": 1, "last_activity_date": 1559147521, "creation_date": 1559143944, "question_id": 56364072, "link": "https://stackoverflow.com/questions/56364072/dynamically-putting-functions-into-an-object-without-losing-type-information", "title": "Dynamically putting functions into an object without losing type information", "body": "<p>In my functions.ts, I define 2 functions, both take an <code>api</code> object, and returns a function with different arg types, arg numbers and return types.</p>\n\n<pre><code>export function f1 (api: Api) {\n  return function (a: number): number[] {/* not important */}\n};\nexport function f2 (api: Api) {\n  return function (a: string, b: string): boolean {/* not important */}\n};\n</code></pre>\n\n<p>Now given an <code>api: Api</code> global object, I want to define an object, that has fields <code>f1</code> and <code>f2</code>, and the value associated to each field is the inner function inside the above 2 functions.</p>\n\n<p>Namely, manually, I would do:</p>\n\n<pre><code>const api: Api = ...;\nconst myObject = {\n  f1: f1(api),\n  f2: f2(api),\n}\n</code></pre>\n\n<p>And this works super well.</p>\n\n<p>But the next step: I wish to do it <strong>dynamically</strong>, i.e. without manually typing f1 and f2.</p>\n\n<p>Here's my start:</p>\n\n<pre><code>import * as functions from './functions';\n\nconst api: Api = ...;\nconst myObject = Object.keys(functions).reduce((accumulator, functionName) =&gt; {\n  accumulator[functionName] = functions[functionName](api);\n}, {} as ???);\n</code></pre>\n\n<p>The code works, but the typings don't. I'm not sure what to put instead of <code>???</code>. <code>{[index: keyof typeof functions]: (...args: any[]) =&gt; any}</code> would work, but I lose a lot of information on types.</p>\n\n<p>I tried looking at TS's <code>Parameters&lt;T&gt;</code>, <code>ReturnType&lt;T&gt;</code> and I'm sure there's something to be done with <code>infer</code>, but can't seem to get hold of it.</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "next.js"], "answers": [{"tags": [], "owner": {"reputation": 594, "user_id": 386328, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/XW4wI.png?s=128&g=1", "display_name": "Kim-Jimin", "link": "https://stackoverflow.com/users/386328/kim-jimin"}, "is_accepted": false, "score": 2, "last_activity_date": 1599141474, "creation_date": 1599141474, "answer_id": 63725184, "question_id": 56363913, "link": "https://stackoverflow.com/questions/56363913/typescript-with-nextjs/63725184#63725184", "title": "Typescript with NextJS", "body": "<p>The <code>getInitialProps</code> should return a <strong>Props</strong> type object. But it returns <code>{ page }</code> and the property <code>page</code> does not exist in <strong>Page</strong> type.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 12737316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCF-pexhzA_oIFZhTcUnFWe2B0KoNCsTPp1OPPy=k-s128", "display_name": "beeinger", "link": "https://stackoverflow.com/users/12737316/beeinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1613647889, "creation_date": 1613647889, "answer_id": 66259072, "question_id": 56363913, "link": "https://stackoverflow.com/questions/56363913/typescript-with-nextjs/66259072#66259072", "title": "Typescript with NextJS", "body": "<p>You just need to type getInitialProps, like that:</p>\n<pre><code>import React from 'react'\nimport { NextPageContext } from 'next'\n\ninterface Props {\n  userAgent?: string;\n}\n\nexport default class Page extends React.Component&lt;Props&gt; {\n  static async getInitialProps({ req }: NextPageContext) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent }\n  }\n\n  render() {\n    const { userAgent } = this.props\n    return &lt;main&gt;Your user agent: {userAgent}&lt;/main&gt;\n  }\n}\n</code></pre>\n<p>Next.js docs - <a href=\"https://nextjs.org/docs/api-reference/data-fetching/getInitialProps\" rel=\"nofollow noreferrer\">https://nextjs.org/docs/api-reference/data-fetching/getInitialProps</a></p>\n"}], "owner": {"reputation": 11969, "user_id": 3575029, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fe534cdba5ec2deabb69d801196c0029?s=128&d=identicon&r=PG&f=1", "display_name": "CaribouCode", "link": "https://stackoverflow.com/users/3575029/cariboucode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1979, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1613647889, "creation_date": 1559143420, "question_id": 56363913, "link": "https://stackoverflow.com/questions/56363913/typescript-with-nextjs", "title": "Typescript with NextJS", "body": "<p>I've been struggling to integrate Typescript with NextJS, mainly with destructured parameters in getInitialProps but also with the type of page functions. For example, here is my _app.tsx:</p>\n\n<pre><code>import { ThemeProvider } from 'styled-components';\nimport App, { Container } from 'next/app';\nimport Cookie from 'js-cookie';\nimport React from 'react';\n\nimport { CookiesProvider } from '../components/CookiesContext';\nimport THEME from '../styles/config';\n\nimport {\n  GlobalStyles,\n  Wrapper,\n} from './_app.style';\n\ntype Props = {\n  cookieSettings: {\n    functionalOn: string;\n    performanceOn: string;\n  }\n};\n\nclass Page extends App&lt;Props&gt; {\n  static async getInitialProps({\n    Component,\n    ctx,\n  }) {\n    // Get initial page props\n    const pageProps = Component.getInitialProps ? await Component.getInitialProps(ctx) : {};\n\n    // Get cookies settings\n    const cookieSettings = {\n      functionalOn: process.browser ? Cookie.get('functionalCookies') : ctx.req.cookies.functionalCookies,\n      performanceOn: process.browser ? Cookie.get('performanceCookies') : ctx.req.cookies.performanceCookies,\n    };\n\n    return {\n      cookieSettings,\n      pageProps,\n    };\n  }\n\n  render() {\n    const {\n      Component,\n      cookieSettings,\n      pageProps,\n    } = this.props;\n\n    return (\n      &lt;Container&gt;\n        &lt;ThemeProvider theme={THEME}&gt;\n          &lt;CookiesProvider {...cookieSettings}&gt;\n            &lt;Wrapper&gt;\n              &lt;GlobalStyles /&gt;\n              &lt;Component {...pageProps} /&gt;\n            &lt;/Wrapper&gt;\n          &lt;/CookiesProvider&gt;\n        &lt;/ThemeProvider&gt;\n      &lt;/Container&gt;\n    );\n  }\n}\n\nexport default Page;\n</code></pre>\n\n<p>The only error I get here is that the Component and ctx parameters are implicitly of 'any' type. I'm using @types/next, as well as v8.1.1.Canary.40 of NextJS which includes types, so I thought stuff like this would be covered but I seem to have to declare what they are myself and I don't know since it's a third party package.</p>\n\n<p>Also, I have a page file like this:</p>\n\n<pre><code>import { NextPage } from 'next';\nimport React, { Fragment } from 'react';\n\nimport Metadata from '../components/Metadata';\nimport withPageError from '../components/PageError/withPageError';\n\ntype Props = {\n  // TODO: Add props\n};\n\nconst getInitialProps = async ({ res }) =&gt; {\n  const page = await getPageData();\n  if (!page &amp;&amp; res) res.statusCode = 404;\n  if (!page) return {};\n  return { page };\n};\n\nconst Page: NextPage&lt;Props&gt; = () =&gt; (\n  &lt;Fragment&gt;\n    &lt;Metadata\n      pageDescription=\"Page\"\n      pageTitle=\"Page\"\n      socialDescription=\"Page\"\n      socialTitle=\"Page\"\n    /&gt;\n  &lt;/Fragment&gt;\n);\n\nPage.getInitialProps = getInitialProps;\n\nexport default withPageError(Page);\n</code></pre>\n\n<p>Here I get red squigglies on Page.getInitialProps with the following error:</p>\n\n<p><code>Type '({ res }: { res: any; }) =&gt; Promise&lt;{ page?: undefined; } | { page: any; }&gt;' is not assignable to type '(ctx: NextPageContext) =&gt; Promise&lt;Props&gt;'.</code></p>\n\n<p>Also an error on <code>const Page</code> which is huge and doesn't make any sense to me.</p>\n\n<p>What am I missing in all of this? Surely I don't have to redeclare types for a load of NextJS stuff?</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 1, "creation_date": 1559142688, "post_id": 56363674, "comment_id": 99330539, "body": "That means that your number is actually a string."}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 1, "creation_date": 1559142773, "post_id": 56363674, "comment_id": 99330576, "body": "A switch statement uses strict type checking like a triple equal <code>===</code>, so use <code>switch (parseInt(filterIndex)) { ... }</code>"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 0, "creation_date": 1559143697, "post_id": 56363674, "comment_id": 99331119, "body": "The code here does not constitute a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as calling <code>setSymbol(&#39;seller&#39;, 3)</code> <a href=\"https://typescript-play.js.org/#code/GYVwdgxgLglg9mABAZwKZQMoE8C2AjOAGwAoIQAnc1MKAVTXIGEBDKVAcznKwC4UpyMMOwA0iYDEJtyASTAATVAA8+YEPlTkAlIgDeAKACQEBMiKoAdITjtiAcgDySZAHcYUCAAsATHbESpTTlFJS0AbiNXdy9EYgDpYOUdA0NjZjREAGYeIzSMgBYc1Ih01EQAViK8soA2KuNTcysbezBUFxRcAkI7cNzDAHoBqE8YZAsBGGx8IkQAXkQ7AAc4CghqKGZ2VDsI1MM8KmYAaz3DRWBmECl6kzAzQktrW0ckC6upP3FJBIUks8Gw1G40m02680WOAQqCwu36h1QJz2AF99Kj9GhMF0iPY0IRHuQvpkdENEAAiNodZDYwhkoA\" rel=\"nofollow noreferrer\">behaves as you intend</a>.  If there is a problem, it&#39;s not in the code you posted."}, {"owner": {"reputation": 6538, "user_id": 2275797, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lg0K6.jpg?s=128&g=1", "display_name": "briosheje", "link": "https://stackoverflow.com/users/2275797/briosheje"}, "edited": false, "score": 0, "creation_date": 1559143969, "post_id": 56363674, "comment_id": 99331298, "body": "Either use <code>parseInt(filterIndex)</code>, <code>(+filterIndex)</code> or <code>Number(filterIndex)</code> or <code>parseFloat(filterIndex)</code> if a float is needed. The argument type definition (<code>filterIndex: number</code>) does <b>not</b> guarantee that, at runtime, filterIndex will effectively be a number. Regardless typescript has types, you should still take care of type casting. Alternatively, you can think about using <b>User-Defined Type Guards</b> to ensure the argument type is as expected. <a href=\"https://basarat.gitbooks.io/typescript/docs/types/typeGuard.html\" rel=\"nofollow noreferrer\">basarat.gitbooks.io/typescript/docs/types/typeGuard.html</a>"}, {"owner": {"reputation": 81, "user_id": 11469488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dvpMJdrkvHc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6LJTw3MI02QripgbbGYuS4q3bGQ/mo/photo.jpg?sz=128", "display_name": "Jb Randria", "link": "https://stackoverflow.com/users/11469488/jb-randria"}, "edited": false, "score": 0, "creation_date": 1559210809, "post_id": 56363674, "comment_id": 99353104, "body": "I check the type and it is  a number, normaly the parameter is of type number , it cast to number type"}], "owner": {"reputation": 81, "user_id": 11469488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dvpMJdrkvHc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6LJTw3MI02QripgbbGYuS4q3bGQ/mo/photo.jpg?sz=128", "display_name": "Jb Randria", "link": "https://stackoverflow.com/users/11469488/jb-randria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 474, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559142844, "creation_date": 1559142606, "last_edit_date": 1559142844, "question_id": 56363674, "link": "https://stackoverflow.com/questions/56363674/what-is-the-problem-with-typescript-switch-case-on-number-in-this-code", "title": "What is the problem with typescript switch Case on number in this code?", "body": "<p>What is the problem with this code? My switch case does not work correctly.</p>\n\n<pre><code> setSymbol(currentUserCategory: string, filterIndex: number) {\n    if (currentUserCategory === Settings.userCategory.seller) {\n      console.log('On switch2', filterIndex);\n      switch (filterIndex) {\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n          console.log('new symbol');\n          this.triSymbol = 'pourcentage';\n          break;\n        default:\n          console.log('On default', filterIndex);\n          this.triSymbol = 'money';\n          break;\n      }\n// Other code\n}\n\nsetSymbol ('seller', 3) // 'On default 3'\n</code></pre>\n\n<p>I use typescript in angular, do i need to parse number with <code>Number(filterIndex)</code>? </p>\n\n<p>When i use <code>Number(filterIndex)</code> => I get in log '<strong>new symbol</strong>'. I need to parse number to number.</p>\n"}, {"tags": ["c#", "typescript", "asp.net-core"], "comments": [{"owner": {"reputation": 5203, "user_id": 1760479, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/gFcMy.jpg?s=128&g=1", "display_name": "David Tansey", "link": "https://stackoverflow.com/users/1760479/david-tansey"}, "edited": false, "score": 0, "creation_date": 1559146377, "post_id": 56363642, "comment_id": 99332580, "body": "Take a look at the following discussion: <a href=\"https://github.com/angular/angular/issues/19555\" rel=\"nofollow noreferrer\">github.com/angular/angular/issues/19555</a>"}, {"owner": {"reputation": 1901, "user_id": 4687359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e66NO.png?s=128&g=1", "display_name": "A. Nadjar", "link": "https://stackoverflow.com/users/4687359/a-nadjar"}, "edited": false, "score": 0, "creation_date": 1572643904, "post_id": 56363642, "comment_id": 103635251, "body": "Sorry, did you reach a solution?"}], "owner": {"reputation": 141, "user_id": 10324936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dae602aaa851bd87a37749943929e36?s=128&d=identicon&r=PG&f=1", "display_name": "nless", "link": "https://stackoverflow.com/users/10324936/nless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559142702, "creation_date": 1559142499, "last_edit_date": 1559142702, "question_id": 56363642, "link": "https://stackoverflow.com/questions/56363642/how-to-fix-neterr-connection-reset-201-created-error-in-asp-net-core-c", "title": "How to fix \u2018net::ERR_CONNECTION_RESET 201 (Created)\u2019 error in ASP.NET Core C#\u201d", "body": "<p>When I post the data to the endpoint I get the error message in the console</p>\n\n<blockquote>\n  <p>net::ERR_CONNECTION_RESET 201 (Created)</p>\n</blockquote>\n\n<p>How do I resolve this?</p>\n\n<p>I tried to post the data to the correct endpoint but the follow line of code is not working.</p>\n\n<p>Here is the typescript:</p>\n\n<pre><code>saveOrUpdateOrder() {\n  var body = {\n    ...this.formData,\n    OrderItems: this.orderItems\n  };\n  return this.http.post(environment.apiURL + '/Order', body);\n}\n</code></pre>\n\n<p>Here is the POST: api/Order</p>\n\n<pre><code>[HttpPost]\npublic async Task&lt;IActionResult&gt; PostOrder([FromBody] Order order)\n{\n    if (!ModelState.IsValid)\n    {\n        return BadRequest(ModelState);\n    }\n\n    _context.Orders.Add(order);\n    await _context.SaveChangesAsync();\n\n    return CreatedAtAction(\"GetOrder\", new { id = order.Id }, order);\n}\n</code></pre>\n\n<p>The actual result that I'm getting in the console:</p>\n\n<blockquote>\n  <p>POST <a href=\"http://localhost:52970/api/Order\" rel=\"nofollow noreferrer\">http://localhost:52970/api/Order</a> net::ERR_CONNECTION_RESET 201 (Created).</p>\n</blockquote>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1559142655, "post_id": 56363540, "comment_id": 99330519, "body": "Could you add some code of what you are looking to achieve?"}, {"owner": {"reputation": 153, "user_id": 11306242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39b2ff4210f060e53072620959de948?s=128&d=identicon&r=PG&f=1", "display_name": "Velulian", "link": "https://stackoverflow.com/users/11306242/velulian"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1559145274, "post_id": 56363540, "comment_id": 99331997, "body": "@GetOffMyLawn Added some code. Does it clarify what i&#39;m trying?"}, {"owner": {"reputation": 106152, "user_id": 1108891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zUoEd.jpg?s=128&g=1", "display_name": "Shaun Luttin", "link": "https://stackoverflow.com/users/1108891/shaun-luttin"}, "edited": false, "score": 0, "creation_date": 1559179370, "post_id": 56363540, "comment_id": 99343403, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9679053/is-it-possible-to-get-the-caller-context-in-javascript\">Is it possible to get the caller context in javascript?</a>"}, {"owner": {"reputation": 106152, "user_id": 1108891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zUoEd.jpg?s=128&g=1", "display_name": "Shaun Luttin", "link": "https://stackoverflow.com/users/1108891/shaun-luttin"}, "edited": false, "score": 0, "creation_date": 1559179927, "post_id": 56363540, "comment_id": 99343503, "body": "Also possible duplicate of <a href=\"https://stackoverflow.com/questions/280389/how-do-you-find-out-the-caller-function-in-javascript\" title=\"how do you find out the caller function in javascript\">stackoverflow.com/questions/280389/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 11300565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8594710e91e0e56f15f267789a51f557?s=128&d=identicon&r=PG&f=1", "display_name": "RocketMan", "link": "https://stackoverflow.com/users/11300565/rocketman"}, "is_accepted": false, "score": 0, "last_activity_date": 1595943001, "creation_date": 1595943001, "answer_id": 63135308, "question_id": 56363540, "link": "https://stackoverflow.com/questions/56363540/typescript-get-class-of-caller-of-method/63135308#63135308", "title": "Typescript - Get class of caller of method", "body": "<p>I see your question as having two parts:</p>\n<p>The first roadblock you'll hit is trying to determine who called the function. I know you said you're using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/caller\" rel=\"nofollow noreferrer\">Function.caller</a>, but that feature is deprecated. Building code ontop of a deprecated feature doesn't seem like a good idea, even if the features is <em>currently</em> supported across most browsers. So you might take a step back and ask why you care who called the function. The logging use case is a good one (i.e. you want to log what class added the log entry), but I can't think of many other good ones. For the logging use case, you probably just need to add a parameter to the function that allows the caller to pass their name in. If you're dead set on not doing that, you could try using the error throwing technique described here but I can't vouch for it: <a href=\"https://stackoverflow.com/a/29572569/11300565\">https://stackoverflow.com/a/29572569/11300565</a></p>\n<p>The second (and main) part of your question (if you can get the caller, how can you tell if its a class?) doesn't have a good answer. One approach would be to make all your classes inherit from some base class and then provide a static <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types\" rel=\"nofollow noreferrer\">typeguard</a> on that base class (<code>MyBaseClass.isInstanceOfMe(unknownObject)</code>) that you could use. Other than implementing something on your own, I'm not aware of a built-in way to detect typescript classes, since they get compiled down to javascript at the end of the day and are difficult to distinguish from objects and functions.</p>\n"}], "owner": {"reputation": 153, "user_id": 11306242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e39b2ff4210f060e53072620959de948?s=128&d=identicon&r=PG&f=1", "display_name": "Velulian", "link": "https://stackoverflow.com/users/11306242/velulian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1032, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1595943001, "creation_date": 1559142093, "last_edit_date": 1559174036, "question_id": 56363540, "link": "https://stackoverflow.com/questions/56363540/typescript-get-class-of-caller-of-method", "title": "Typescript - Get class of caller of method", "body": "<p>I have a function which determines the calling function via <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/caller\" rel=\"nofollow noreferrer\">Function.caller</a>.\nIs it possible to determine whether the caller belongs to a class, is a class, etc?</p>\n\n<p>(I Know that when <code>function.caller == null</code> it is the root level from which it was called.)</p>\n\n<p>Some code which may help in understand what i'm trying to achieve.</p>\n\n<pre><code>log(component: object, level: LogLevel, category: ILogCategory, message: string)\n  {\n    if(!component)\n      let callingComponent = log.caller;\n      // PSEUDOCODE\n      if(parent of caller is class)\n      callingComponent = class;\n\n      //... \n    }\n  }\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>I want to get the class to which the caller of my method belongs to.</p>\n"}, {"tags": ["javascript", "html", "typescript"], "comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 1, "creation_date": 1559142138, "post_id": 56363416, "comment_id": 99330256, "body": "You could try: <a href=\"https://angular.io/api/core/AfterContentInit\" rel=\"nofollow noreferrer\"><code>ngAfterContentInit</code></a>"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 1, "creation_date": 1559142303, "post_id": 56363416, "comment_id": 99330344, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/36184458/angular-2-execute-script-after-template-render\">Angular 2 execute script after template render</a>"}, {"owner": {"reputation": 75, "user_id": 8895290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfVKd.jpg?s=128&g=1", "display_name": "Marcu Daniel", "link": "https://stackoverflow.com/users/8895290/marcu-daniel"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1559143008, "post_id": 56363416, "comment_id": 99330724, "body": "@GetOffMyLawn  I have triet both ngAfterContentInit and ngAfterViewInit but it seems they are both called before the ngOnInit, so it didn`t solve my problem"}, {"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 1, "creation_date": 1559143118, "post_id": 56363416, "comment_id": 99330788, "body": "They shouldn&#39;t, according to the <a href=\"https://angular.io/guide/lifecycle-hooks#lifecycle-sequence\" rel=\"nofollow noreferrer\">Lifecycle sequence</a>."}, {"owner": {"reputation": 75, "user_id": 8895290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfVKd.jpg?s=128&g=1", "display_name": "Marcu Daniel", "link": "https://stackoverflow.com/users/8895290/marcu-daniel"}, "reply_to_user": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 1, "creation_date": 1559143456, "post_id": 56363416, "comment_id": 99330985, "body": "@GetOffMyLawn yeah, my mystake. I tried now once again and it worked with ngAfterViewInit. In onInit I was instantiating the field <code>this.conference</code>, and i tried using it in the ngAfterViewInit and it said it is null. But i instantiated it again there and then everything worked great. Thank you!"}], "owner": {"reputation": 75, "user_id": 8895290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfVKd.jpg?s=128&g=1", "display_name": "Marcu Daniel", "link": "https://stackoverflow.com/users/8895290/marcu-daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 989, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559141620, "creation_date": 1559141620, "question_id": 56363416, "link": "https://stackoverflow.com/questions/56363416/typescript-document-getelementbyid-returns-null-even-if-element-is-loaded", "title": "Typescript: document.getElementById() returns null even if element is loaded", "body": "<p>I have a function named \"blockButtons\" which I call inside the ngOnInit that asks for an element with a given id, but I keep getting null. Why is this happening? Isn`t ngOnInit called after all elements are loaded?</p>\n\n<p>Here is my code:\nHTML:</p>\n\n<pre><code>&lt;div *ngIf=\"conference\"&gt;\n &lt;h2 class=\"text-danger\"&gt;Sessions:&lt;/h2&gt;\n  &lt;button type=\"button\" class=\"btn btn-info\" routerLink=\"/addSession/{{conference.id}}\" routerLinkActive=\"active\" id=\"addSessions\"&gt;Add Sessions&lt;/button&gt;\n  &lt;app-scmember-session-list [conferenceId]=conference.id&gt;&lt;/app-scmember-session-list&gt;\n\n  &lt;h2 class=\"text-danger\"&gt;PcMembers:&lt;/h2&gt;\n  &lt;button type=\"button\" class=\"btn btn-info\" id=\"addPcMembers\" routerLink=\"/addPcMembers/{{conference.id}}\" routerLinkActive=\"active\" &gt;Add PcMembers&lt;/button&gt;\n  &lt;app-scmember-pcmembers-list [conferenceId]=conference.id&gt;&lt;/app-scmember-pcmembers-list&gt;\n\n  &lt;br&gt;\n  &lt;button (click)=\"goBack()\"&gt;Back&lt;/button&gt;\n  &lt;button (click)=\"save()\"&gt;Save&lt;/button&gt;\n&lt;/div&gt;\n\n</code></pre>\n\n<p>Typescript:</p>\n\n<pre><code>@Component({\n  selector: 'app-scmember-conference-detail',\n  templateUrl: './scmember-conference-detail.component.html',\n  styleUrls: ['./scmember-conference-detail.component.css']\n})\nexport class ScmemberConferenceDetailComponent implements OnInit {\n\n  @Input() conference: Conference;\n\n  constructor(private conferenceService: ConferenceService,\n              private route: ActivatedRoute,\n              private location: Location) {\n  }\n\n  ngOnInit() {\n    this.route.params\n      .subscribe((params: Params) =&gt; this.conferenceService.getConference(+params['id'])\n      .subscribe(conference =&gt; {\n        this.conference = conference;\n        this.blockButtons();\n      }));\n  }\n\n  goBack(): void {\n    this.location.back();\n  }\n\n  save(): void {\n    this.conferenceService.update(this.conference)\n      .subscribe(_ =&gt; this.goBack());\n  }\n\n  private blockButtons() {\n    if(Date.now() &gt; Date.parse(this.conference.callForPapers)){\n      (&lt;HTMLButtonElement&gt; document.getElementById(\"addPcMembers\")).disabled = true;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["arrays", "angular", "typescript"], "comments": [{"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559143413, "post_id": 56363213, "comment_id": 99330964, "body": "I&#39;d recommend building an object whose keys are the arquivo ids and whose values are the arquivo objects, and then returning just the values of that object.  This lets you easily avoid duplicates without searching through an array over and over."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559150679, "post_id": 56363213, "comment_id": 99334611, "body": "No, that\u2019s okay.  Thanks for offering."}], "answers": [{"comments": [{"owner": {"reputation": 1066, "user_id": 1959257, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/4OsHD.jpg?s=128&g=1", "display_name": "aseolin", "link": "https://stackoverflow.com/users/1959257/aseolin"}, "edited": false, "score": 0, "creation_date": 1559149312, "post_id": 56364974, "comment_id": 99333976, "body": "Thanks Alberto. But it returns to me an array with just the data of 1 &quot;Arquivo&quot;."}, {"owner": {"reputation": 3087, "user_id": 5278432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/PgZfk.jpg?s=128&g=1", "display_name": "Alberto Rivera", "link": "https://stackoverflow.com/users/5278432/alberto-rivera"}, "reply_to_user": {"reputation": 1066, "user_id": 1959257, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/4OsHD.jpg?s=128&g=1", "display_name": "aseolin", "link": "https://stackoverflow.com/users/1959257/aseolin"}, "edited": false, "score": 0, "creation_date": 1559149821, "post_id": 56364974, "comment_id": 99334188, "body": "Sorry I mixed up the reduce arguments. Try it again @aseolin"}], "tags": [], "owner": {"reputation": 3087, "user_id": 5278432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/PgZfk.jpg?s=128&g=1", "display_name": "Alberto Rivera", "link": "https://stackoverflow.com/users/5278432/alberto-rivera"}, "is_accepted": true, "score": 1, "last_activity_date": 1559149792, "last_edit_date": 1559149792, "creation_date": 1559147463, "answer_id": 56364974, "question_id": 56363213, "link": "https://stackoverflow.com/questions/56363213/get-unique-parent-elements-from-array-using-typescript/56364974#56364974", "title": "Get unique parent elements from array using Typescript", "body": "<p>You could try mapping the unique arquivo ids to the arquivo objects, and then, get the values</p>\n\n<pre><code>let arquivos = Object.values(this.campos\n  .map(campo =&gt; campo.tabela.arquivo)\n  .reduce((totals, arquivo) =&gt; {\n    if (!totals[arquivo.id]) {\n      totals[arquivo.id] = arquivo;\n    }\n    return totals;\n  }, {})\n);\n</code></pre>\n"}], "owner": {"reputation": 1066, "user_id": 1959257, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/4OsHD.jpg?s=128&g=1", "display_name": "aseolin", "link": "https://stackoverflow.com/users/1959257/aseolin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 56364974, "answer_count": 1, "score": 0, "last_activity_date": 1559149792, "creation_date": 1559140993, "question_id": 56363213, "link": "https://stackoverflow.com/questions/56363213/get-unique-parent-elements-from-array-using-typescript", "title": "Get unique parent elements from array using Typescript", "body": "<p>I have this structure on my angular project:</p>\n\n<pre><code>export interface Campo {\n  id?: number;\n  nome?: string;\n  tabela?: Tabela;\n  campos?: Campo[];\n}\n\nexport interface Tabela {\n  id?: number;\n  name?: string\n  arquivo?: Arquivo;\n}\n\nexport interface Arquivo {\n  id?: number;\n  name?: string;\n  tabelas?: Tabela[];\n}\n</code></pre>\n\n<p>i.e., An \"Arquivo\" has many \"Tabela\", and \"Tabela\" has many \"Campo\". I subscribe on a service that return all \"Campo\" and I keep it on \"campos\" variable. This service return more than 200 \"Campos\", associated with about 10 \"Tabelas\" and only 3 \"Arquivos\".</p>\n\n<p>I want to return all unique \"Arquivo\" (i.e. all 3 \"Arquivo\").</p>\n\n<p>When I do:</p>\n\n<pre><code>let arquivos = this.campos\n        .map(campo =&gt; campo.tabela.arquivo.id)\n        .filter((value, index, self) =&gt; self.indexOf(value) === index);\n</code></pre>\n\n<p>It returns </p>\n\n<blockquote>\n  <p>[1001, 1002, 1003]</p>\n</blockquote>\n\n<p>So it is the ids of all 3 \"Arquivo\" that I have. But I dont want the ids, I want the \"Arquivo\" objects. When I try:</p>\n\n<pre><code>let arquivos = this.campos\n        .map(campo =&gt; campo.tabela.arquivo)\n        .filter((value, index, self) =&gt; self.indexOf(value) === index);\n</code></pre>\n\n<p>It returns more than 200 registers, because I have more than 200 \"Campos\" and it can't know what \"Arquivos\" is unique or not.</p>\n\n<p>How can I do that?</p>\n"}, {"tags": ["typescript", "promise", "async-await", "ionic4", "resolve"], "comments": [{"owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "edited": false, "score": 0, "creation_date": 1559141792, "post_id": 56363138, "comment_id": 99330062, "body": "instead of <code>pipe</code>, don&#39;t you want <code>then</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9240283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72987c16a03338d91a7abe74148a5de4?s=128&d=identicon&r=PG&f=1", "display_name": "Assembler code", "link": "https://stackoverflow.com/users/9240283/assembler-code"}, "edited": false, "score": 0, "creation_date": 1559142234, "post_id": 56363481, "comment_id": 99330305, "body": "i get Argument of type &#39;() =&gt; void&#39; is not assignable to parameter of type &#39;(err: any, caught: Observable&lt;void&gt;) =&gt; ObservableInput&lt;any&gt;&#39;.   Type &#39;void&#39; is not assignable to type &#39;ObservableInput&lt;any&gt;&#39;"}, {"owner": {"reputation": 116, "user_id": 6638543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aL9Bn.jpg?s=128&g=1", "display_name": "jensteichert", "link": "https://stackoverflow.com/users/6638543/jensteichert"}, "reply_to_user": {"reputation": 1, "user_id": 9240283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72987c16a03338d91a7abe74148a5de4?s=128&d=identicon&r=PG&f=1", "display_name": "Assembler code", "link": "https://stackoverflow.com/users/9240283/assembler-code"}, "edited": false, "score": 0, "creation_date": 1559142470, "post_id": 56363481, "comment_id": 99330418, "body": "could you post the whole function that returns the promise?"}, {"owner": {"reputation": 116, "user_id": 6638543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aL9Bn.jpg?s=128&g=1", "display_name": "jensteichert", "link": "https://stackoverflow.com/users/6638543/jensteichert"}, "reply_to_user": {"reputation": 1, "user_id": 9240283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72987c16a03338d91a7abe74148a5de4?s=128&d=identicon&r=PG&f=1", "display_name": "Assembler code", "link": "https://stackoverflow.com/users/9240283/assembler-code"}, "edited": false, "score": 0, "creation_date": 1559143583, "post_id": 56363481, "comment_id": 99331047, "body": "ah okay. Its because the signature of the function you are passing to catchError is wrong: try this:   catchError((error) =&gt; {resolve(false); return error});"}, {"owner": {"reputation": 1, "user_id": 9240283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72987c16a03338d91a7abe74148a5de4?s=128&d=identicon&r=PG&f=1", "display_name": "Assembler code", "link": "https://stackoverflow.com/users/9240283/assembler-code"}, "edited": false, "score": 0, "creation_date": 1559144535, "post_id": 56363481, "comment_id": 99331600, "body": "In console ERROR TypeError: You provided an invalid object where a stream was expected. You can provide an Observable, Promise, Array, or Iterable."}], "tags": [], "owner": {"reputation": 116, "user_id": 6638543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aL9Bn.jpg?s=128&g=1", "display_name": "jensteichert", "link": "https://stackoverflow.com/users/6638543/jensteichert"}, "is_accepted": false, "score": 0, "last_activity_date": 1559141889, "creation_date": 1559141889, "answer_id": 56363481, "question_id": 56363138, "link": "https://stackoverflow.com/questions/56363138/promise-dont-resolve-in-catcherror-typescript/56363481#56363481", "title": "Promise don&#39;t resolve in catchError typescript", "body": "<p>that's because you are returning a new Promise which will resolve instead of calling the resolve callback.</p>\n\n<p>Try to do:</p>\n\n<pre><code>        catchError(() =&gt; {\n             resolve(false);\n         })\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9240283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72987c16a03338d91a7abe74148a5de4?s=128&d=identicon&r=PG&f=1", "display_name": "Assembler code", "link": "https://stackoverflow.com/users/9240283/assembler-code"}, "edited": false, "score": 0, "creation_date": 1559143042, "post_id": 56363733, "comment_id": 99330744, "body": "I get this error Argument of type &#39;() =&gt; void&#39; is not assignable to parameter of type &#39;(err: any, caught: Observable&lt;void&gt;) =&gt; ObservableInput&lt;any&gt;&#39;."}], "tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559142784, "creation_date": 1559142784, "answer_id": 56363733, "question_id": 56363138, "link": "https://stackoverflow.com/questions/56363138/promise-dont-resolve-in-catcherror-typescript/56363733#56363733", "title": "Promise don&#39;t resolve in catchError typescript", "body": "<p>You could try like below, just annotated with type and used resolve() in both success and catch block</p>\n\n<pre><code>...\n return new Promise&lt;boolean&gt;((resolve) =&gt; {\n     this.http.post(url, data).pipe(\n         map( (result: any) =&gt; {\n             this.credentials = result;\n             resolve(true);\n         }),\n         catchError(() =&gt; {\n             resolve(false);\n         })\n         ).subscribe();\n     });\n...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9240283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72987c16a03338d91a7abe74148a5de4?s=128&d=identicon&r=PG&f=1", "display_name": "Assembler code", "link": "https://stackoverflow.com/users/9240283/assembler-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559142893, "creation_date": 1559140740, "last_edit_date": 1559142893, "question_id": 56363138, "link": "https://stackoverflow.com/questions/56363138/promise-dont-resolve-in-catcherror-typescript", "title": "Promise don&#39;t resolve in catchError typescript", "body": "<p>I need resolve(false) in catchError, but this dosn't work.</p>\n\n<p><strong>In my loin.page.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>async login() {\n      if (this.signin.valid) {\n        const controls = this.signin.controls;\n        const valid = await this.authService.signin(controls.email.value, controls.password.value);\n        if (valid) {\n            this.navCtrl.navigateRoot('/user', { animated: true});\n        } else {\n            console.log('Bad credentials');\n        }\n    }\n  }\n</code></pre>\n\n<p><strong>authService.ts</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { map, catchError } from 'rxjs/operators';\n\nconstructor(private http: HttpClient) {}\n\nsignin(email, password) {\n\n        const headers = new HttpHeaders({\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n        });\n        const data = {\n            email,\n            password\n        };\n        const url = URL_SERVICIOS + 'xxx';\n        return new Promise ((resolve) =&gt; {\n\n            this.http.post(url, data).pipe(\n                map( (result: any) =&gt; {\n                    this.credentials = result;\n                    resolve(true);\n                }),\n                catchError(() =&gt; {\n                    return Promise.resolve(false);\n                })\n            ).subscribe();\n        });\n     }\n</code></pre>\n\n<p>This code ends in <i>'return Promise.resolve(false);'</i> and does not continue in <i>loin.page.ts</i></p>\n"}, {"tags": ["node.js", "typescript", "npm"], "comments": [{"owner": {"reputation": 20114, "user_id": 691711, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf26891a2ec4eca6dd1962a6804f5a40?s=128&d=identicon&r=PG", "display_name": "zero298", "link": "https://stackoverflow.com/users/691711/zero298"}, "edited": false, "score": 0, "creation_date": 1559141034, "post_id": 56363120, "comment_id": 99329660, "body": "That <b>is</b> the source.  Keep looking at the <code>from &#39;whereever&#39;;</code> in your <code>node_modules</code>.  Some files can be very lean only serving to pull in bigger dependencies.  Look at the file relative to the one you have shown at <code>.&#47;filter.pipe</code>.  That will likely be bigger.  Also, there may be no documentation included."}], "answers": [{"tags": [], "owner": {"reputation": 27488, "user_id": 1778465, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NxIPr.jpg?s=128&g=1", "display_name": "Get Off My Lawn", "link": "https://stackoverflow.com/users/1778465/get-off-my-lawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1559141687, "last_edit_date": 1559141687, "creation_date": 1559141101, "answer_id": 56363239, "question_id": 56363120, "link": "https://stackoverflow.com/questions/56363120/where-is-the-source-code-of-dependencies-in-node-modules/56363239#56363239", "title": "Where is the source code of dependencies in node_modules?", "body": "<p>All packages are different, but to find where the main code is, you need to look at the <code>package.json</code> file. Within that file you will find a <code>main</code> key which will tell you where the entry point is for that package (the path is relative to the <code>package.json</code> file):</p>\n\n<pre><code>{\n  \"name\": \"@angular/core\",\n  \"version\": \"8.0.0-rc.0+354.sha-4809382.with-local-changes\",\n  \"description\": \"Angular - the core framework\",\n  \"main\": \"./bundles/core.umd.js\"\n}\n</code></pre>\n\n<p>If you navigate to that file you will see the entry point source code for that package. For the package you provided, <a href=\"https://raw.githubusercontent.com/angular/core-builds/master/bundles/core.umd.js\" rel=\"nofollow noreferrer\">the source is here</a></p>\n"}], "owner": {"reputation": 299, "user_id": 10445920, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zcd4_pKXIGI/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVpgMA_StDctLkHS0yfwpt0TEtnlw/mo/photo.jpg?sz=128", "display_name": "Dai Niu", "link": "https://stackoverflow.com/users/10445920/dai-niu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1251, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1559141687, "creation_date": 1559140671, "question_id": 56363120, "link": "https://stackoverflow.com/questions/56363120/where-is-the-source-code-of-dependencies-in-node-modules", "title": "Where is the source code of dependencies in node_modules?", "body": "<p>I'm a beginner in typescript and npm, so my question may look stupid.\nI declared some dependencies in my <code>package.json</code> file, and I have run the npm install command. Many dependencies were installed into the <code>node_modules</code> directory. But I think there should be the source code and doc in every dependency like that in java. But when I check the dependencies in <code>node_modules</code>, I only see the class declarations in some packages:</p>\n\n<pre><code>import { PipeTransform } from '@angular/core';\nimport { JhiFilterPipe } from './filter.pipe';\nexport declare class JhiPureFilterPipe extends JhiFilterPipe implements PipeTransform {\n    transform(input: Array&lt;any&gt;, filter: string, field: string): any;\n}\n</code></pre>\n\n<p>There is no source code, neither the doc. So I was wondering where is the source code or even the compiled js code in these typescript package?</p>\n\n<p>In java, when I declare dependencies in pom, I would see the source code of the API and their doc, but not the case for packages in node_modules.</p>\n\n<p>Am I doing sth wrong?</p>\n\n<p>Give me some hints plz!</p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-material"], "comments": [{"owner": {"reputation": 13622, "user_id": 639035, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08651877616b06c07fcfc20e88d3d1e9?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/639035/stefan"}, "edited": false, "score": 0, "creation_date": 1559140285, "post_id": 56362557, "comment_id": 99329197, "body": "Have you taken a look at: <a href=\"https://www.ag-grid.com/angular-getting-started/#enable-sorting-and-filtering\" rel=\"nofollow noreferrer\">ag-grid.com/angular-getting-started/&hellip;</a>"}, {"owner": {"reputation": 135, "user_id": 11002019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9362fcf28177d6507ed3caed40582e9e?s=128&d=identicon&r=PG&f=1", "display_name": "sunalive", "link": "https://stackoverflow.com/users/11002019/sunalive"}, "reply_to_user": {"reputation": 13622, "user_id": 639035, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08651877616b06c07fcfc20e88d3d1e9?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/639035/stefan"}, "edited": false, "score": 0, "creation_date": 1559141352, "post_id": 56362557, "comment_id": 99329836, "body": "I took a look, but I am working with a material angular table, that appears to be something completely different."}, {"owner": {"reputation": 135, "user_id": 11002019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9362fcf28177d6507ed3caed40582e9e?s=128&d=identicon&r=PG&f=1", "display_name": "sunalive", "link": "https://stackoverflow.com/users/11002019/sunalive"}, "reply_to_user": {"reputation": 13622, "user_id": 639035, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08651877616b06c07fcfc20e88d3d1e9?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/639035/stefan"}, "edited": false, "score": 0, "creation_date": 1559143256, "post_id": 56362557, "comment_id": 99330866, "body": "Got a bit closer, but still having issues"}, {"owner": {"reputation": 650, "user_id": 12121325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a034acb7026a4c3f03aab12aa98463?s=128&d=identicon&r=PG&f=1", "display_name": "iamaword", "link": "https://stackoverflow.com/users/12121325/iamaword"}, "edited": false, "score": 0, "creation_date": 1606880136, "post_id": 56362557, "comment_id": 115094497, "body": "The stop propagation comment is the first step, after that it is all about doing stuff in your function to make the little sort modal pop up and sort the table as expected. you can pass into a mat-dialog a viewchild of the filter in question, and position based on that"}, {"owner": {"reputation": 650, "user_id": 12121325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a034acb7026a4c3f03aab12aa98463?s=128&d=identicon&r=PG&f=1", "display_name": "iamaword", "link": "https://stackoverflow.com/users/12121325/iamaword"}, "edited": false, "score": 0, "creation_date": 1606880145, "post_id": 56362557, "comment_id": 115094500, "body": "code for ref:    const rect = this.triggerElementRef.nativeElement.getBoundingClientRect()&zwnj;&#8203;;       matDialogConfig.position = { left: <code>${rect.left &gt; 300 ? rect.left - 200: 100}px</code>, top: <code>${rect.bottom + 50}px</code> };       this.dialogRef.updatePosition(matDialogConfig.position);"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 14746123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db39f77157c17b0ce87e142e3d52e75a?s=128&d=identicon&r=PG&f=1", "display_name": "Alistair Bowen-Davies", "link": "https://stackoverflow.com/users/14746123/alistair-bowen-davies"}, "is_accepted": false, "score": 0, "last_activity_date": 1606879224, "creation_date": 1606879224, "answer_id": 65101719, "question_id": 56362557, "link": "https://stackoverflow.com/questions/56362557/filtering-per-column-with-button-angular-material-table/65101719#65101719", "title": "Filtering per column with button angular material table", "body": "<p>Have you tried adding a click event to your filter button to prevent sorting?</p>\n<pre><code>(click)=&quot;foo($event)&quot;\n\nfoo($event: Event) {\n    $event.stopPropagation();\n}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 11002019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9362fcf28177d6507ed3caed40582e9e?s=128&d=identicon&r=PG&f=1", "display_name": "sunalive", "link": "https://stackoverflow.com/users/11002019/sunalive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2169, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1606879224, "creation_date": 1559138984, "last_edit_date": 1559143243, "question_id": 56362557, "link": "https://stackoverflow.com/questions/56362557/filtering-per-column-with-button-angular-material-table", "title": "Filtering per column with button angular material table", "body": "<p>I want to have a filter button on the column headers whereby I can filter the results by clicking a checkbox, as well as multiple column filtering.</p>\n\n<p>This is what I've tried, the button loads the menu, but when clicked also starts the sorting, and the positioning isn't right:</p>\n\n<pre><code>&lt;table mat-table [dataSource]=\"source\" matSort (contextmenu)=\"onContextMenu($event)\"\n matRipple [matRippleRadius]=\"'15'\"\n [matRippleColor]=\"'#03a9f4'\"&gt;\n\n        &lt;ng-container matColumnDef=\"name\"&gt;\n    &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt; Name &lt;button mat-button matSuffix mat-icon-button aria-label=\"Clear\" [matMenuTriggerFor]=\"menu\"&gt;\n        &lt;mat-icon&gt;filter_list&lt;/mat-icon&gt;\n      &lt;/button&gt;\n      &lt;mat-menu #menu&gt;\n          &lt;ng-template matMenuContent&gt;\n            &lt;div *ngFor=\"let item of items\"&gt;\n                &lt;mat-checkbox class=\"mat-menu-item\"&gt;{{item.name}}&lt;/mat-checkbox&gt;  \n            &lt;/div&gt;\n          &lt;/ng-template&gt;\n        &lt;/mat-menu&gt;\n    &lt;/th&gt;\n    &lt;td mat-cell *matCellDef=\"let row\"&gt; {{row.name}} &lt;/td&gt;\n  &lt;/ng-container&gt;\n\n  &lt;!-- Email Column --&gt;\n  &lt;ng-container matColumnDef=\"emailAddress\"&gt;\n    &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt; Email Address &lt;/th&gt;\n    &lt;td mat-cell *matCellDef=\"let row\"&gt; {{row.emailAddress}} &lt;/td&gt;\n  &lt;/ng-container&gt;\n\n  &lt;tr mat-header-row *matHeaderRowDef=\"columns; sticky: true\"&gt;&lt;/tr&gt;\n  &lt;tr mat-row *matRowDef=\"let row; columns: columns;\"&gt;&lt;/tr&gt;\n&lt;/table&gt;\n\n&lt;mat-paginator [length]=\"source.length\" [pageSizeOptions]=\"[10, 20, 50, 100]\" showFirstLastButtons&gt;&lt;/mat-paginator&gt;\n</code></pre>\n\n<p>Here is an example of what I want:\n<img src=\"https://js.devexpress.com/Content/images/doc/19_1/DataGrid/visual_elements/header_filter.png\" alt=\"example\"></p>\n"}, {"tags": ["reactjs", "typescript", "react-router"], "comments": [{"owner": {"reputation": 2769, "user_id": 1210271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/78SSJ.jpg?s=128&g=1", "display_name": "BugsArePeopleToo", "link": "https://stackoverflow.com/users/1210271/bugsarepeopletoo"}, "edited": false, "score": 0, "creation_date": 1559140442, "post_id": 56362500, "comment_id": 99329305, "body": "Would need to see Header &amp; Footer component to see what is supposed to be rendered."}], "answers": [{"comments": [{"owner": {"reputation": 993, "user_id": 10583765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f9c542545ed0c80df4efa010364d38?s=128&d=identicon&r=PG&f=1", "display_name": "Rario", "link": "https://stackoverflow.com/users/10583765/rario"}, "edited": false, "score": 0, "creation_date": 1559405408, "post_id": 56363523, "comment_id": 99413832, "body": "It works!!!!!!!!!!!!!!!! Thanks! Care to explain a bit at <code>const { component: Component, ...rest } = this.props;</code> and <code>&lt;Component {...props} &#47;&gt;</code> please?"}, {"owner": {"reputation": 4229, "user_id": 8786986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-vQPNOYaPX7w/AAAAAAAAAAI/AAAAAAAAAHE/AfEbGFsgeY4/photo.jpg?sz=128", "display_name": "Pedro Arantes", "link": "https://stackoverflow.com/users/8786986/pedro-arantes"}, "reply_to_user": {"reputation": 993, "user_id": 10583765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f9c542545ed0c80df4efa010364d38?s=128&d=identicon&r=PG&f=1", "display_name": "Rario", "link": "https://stackoverflow.com/users/10583765/rario"}, "edited": false, "score": 0, "creation_date": 1559407051, "post_id": 56363523, "comment_id": 99414304, "body": "Great! <code>const { component: Component, ...rest } = this.props;</code> is about props that <code>RouteAuthenticated</code> receive (i.e. <code>exact</code>, <code>path</code>) and forward <code>rest</code> to <code>&lt;Route {...rest} render={renderRoute} &#47;&gt;</code> and handle <code>component</code> separatelly.  <code>&lt;Component {...props} &#47;&gt;</code> is about the component which will be passed to <code>&lt;Route {...rest} render={renderRoute} &#47;&gt;</code> through <code>render</code> method as explained here (<a href=\"https://til.hashrocket.com/posts/z8cimdpghg-passing-props-down-to-react-router-route\" rel=\"nofollow noreferrer\">til.hashrocket.com/posts/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 4229, "user_id": 8786986, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-vQPNOYaPX7w/AAAAAAAAAAI/AAAAAAAAAHE/AfEbGFsgeY4/photo.jpg?sz=128", "display_name": "Pedro Arantes", "link": "https://stackoverflow.com/users/8786986/pedro-arantes"}, "is_accepted": true, "score": 0, "last_activity_date": 1559142032, "creation_date": 1559142032, "answer_id": 56363523, "question_id": 56362500, "link": "https://stackoverflow.com/questions/56362500/how-to-make-multipages-and-layout-or-container-with-react-router/56363523#56363523", "title": "How to make multipages and layout (or) container with React Router?", "body": "<p>In my projects, I use to create specific routes to handle that. For instance, I have <code>RouteAuthenticated</code>, <code>RouteUnauthenticated</code>, <code>RouteAdmin</code>...</p>\n\n<pre><code>// RouteAuthenticated\n\nimport { Redirect, Route } from 'react-router-dom';\n\nclass RouteAuthenticated extends React.Component&lt;Props, State&gt; {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isAuthenticated: false,\n            loading: true,\n        };\n    }\n\n    async componentDidMount() {\n        const isAuthenticated = CHECK IF IS AUTHENTICATED\n        this.setState({\n            isAuthenticated,\n            loading: false,\n        });\n    }\n\n    render() {\n        const { component: Component, ...rest } = this.props;\n        const { isAuthenticated, loading } = this.state;\n        const renderRoute = props =&gt;\n            isAuthenticated === true ? (\n                &lt;Layout&gt;\n                    &lt;Component {...props} /&gt;\n                &lt;/Layout&gt;\n            ) : (\n                &lt;Redirect to=\"/signup\" /&gt;\n            );\n        return loading ? null : &lt;Route {...rest} render={renderRoute} /&gt;;\n    }\n}\n\nexport default RouteAuthenticated;\n</code></pre>\n\n<p>This way I take care of wrapping and authentication in a single component.</p>\n\n<p>In <code>App.tsx</code></p>\n\n<pre><code>// App.tsx\n\nreturn (\n  &lt;Switch&gt;\n    &lt;RouteAuthenticated exact path=\"/\" component={Status} /&gt;\n    &lt;RouteAuthenticated path=\"/welcome\" component={Welcome} /&gt;\n    &lt;RouteUnauthenticated path=\"/signup\" component={SignUp} /&gt; // or     &lt;Route path=\"/signup\" component={SignUp} /&gt;\n    &lt;RouteUnauthenticated path=\"/signin\" component={SignIn} /&gt; // or     &lt;Route path=\"/signin\" component={SignIn} /&gt;\n  &lt;/Switch&gt;\n);\n</code></pre>\n"}], "owner": {"reputation": 993, "user_id": 10583765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50f9c542545ed0c80df4efa010364d38?s=128&d=identicon&r=PG&f=1", "display_name": "Rario", "link": "https://stackoverflow.com/users/10583765/rario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "accepted_answer_id": 56363523, "answer_count": 1, "score": 0, "last_activity_date": 1559142032, "creation_date": 1559138808, "question_id": 56362500, "link": "https://stackoverflow.com/questions/56362500/how-to-make-multipages-and-layout-or-container-with-react-router", "title": "How to make multipages and layout (or) container with React Router?", "body": "<p>I'm making a dashboard, using React Router v4. I have pages such as Sign up, Sign in, Add and List products, Add and List customers.</p>\n\n<p>Authentication pages, Sign up and Sign in pages are with their own layouts, no, header or footer or nav manu. The rest share the same layout design, with header, nav menu and footer.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>// App.tsx\n\nreturn (\n  &lt;Router&gt;\n    &lt;Route exact path=\"/\" component={Layout}&gt;\n      &lt;Route exact path=\"/\" component={Status} /&gt;\n      &lt;Route path=\"/welcome\" component={Welcome} /&gt;\n    &lt;/Route&gt;\n    &lt;Route path=\"/signup\" component={SignUp} /&gt;\n    &lt;Route path=\"/signin\" component={SignIn} /&gt;\n  &lt;/Router&gt;\n);\n</code></pre>\n\n<pre><code>// Layout.tsx\n\nreturn (\n  &lt;React.Fragment&gt;\n    &lt;Header lastName=\"Wahaha\" /&gt;\n    &lt;Navbar /&gt;\n    {children}\n    &lt;Footer description=\"Thanks for visiting!\" /&gt;\n  &lt;/React.Fragment&gt;\n);\n</code></pre>\n\n<p><code>&lt;Header /&gt;</code>, <code>&lt;Navbar /&gt;</code>, and <code>&lt;Footer /&gt;</code> are not appeared though.</p>\n\n<p>Took a reference from here: <a href=\"https://stackoverflow.com/questions/33996484/using-multiple-layouts-for-react-router-components\">Using multiple layouts for react-router components</a> but it doesn't work for me.</p>\n\n<p>Please help.</p>\n"}, {"tags": ["typescript", "typescript-typings"], "answers": [{"tags": [], "owner": {"reputation": 8014, "user_id": 1127669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d6f2ed8240a4809c7c2fe4a21fd61e6?s=128&d=identicon&r=PG", "display_name": "Samuel Caillerie", "link": "https://stackoverflow.com/users/1127669/samuel-caillerie"}, "is_accepted": false, "score": 1, "last_activity_date": 1559138820, "creation_date": 1559138820, "answer_id": 56362505, "question_id": 56362426, "link": "https://stackoverflow.com/questions/56362426/typescript-named-definition-in-interface-array/56362505#56362505", "title": "Typescript named definition in interface Array", "body": "<p>With the name of your interface, I would have directly put the properties into it : </p>\n\n<pre><code>interface IError {\n  errorOccurred: boolean;\n  message?: string;\n}\n</code></pre>\n\n<p>and your object <code>error</code> should be of type <code>IError</code>.</p>\n\n<p>And for the implementation of this interface, you can set independantly both parameters...</p>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 9715126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oEIEy.jpg?s=128&g=1", "display_name": "Matt Tingen", "link": "https://stackoverflow.com/users/9715126/matt-tingen"}, "is_accepted": true, "score": 2, "last_activity_date": 1559138932, "creation_date": 1559138932, "answer_id": 56362542, "question_id": 56362426, "link": "https://stackoverflow.com/questions/56362426/typescript-named-definition-in-interface-array/56362542#56362542", "title": "Typescript named definition in interface Array", "body": "<p>There is <a href=\"https://github.com/Microsoft/TypeScript/issues/28259\" rel=\"nofollow noreferrer\">an existing feature request</a> for named tuples in TypeScript, but they are not currently supported.</p>\n\n<p>In the mean time, you can either use the unnamed tuple like you have, or use an object:</p>\n\n<pre><code>interface IError {\n  errorOccurred: boolean;\n  message?: string;\n}\n</code></pre>\n\n<p>Another option depending on your use case may be for <code>errorOccurred</code> to be implicit based on whether there is an error object at all or whether it has a <code>message</code>.</p>\n"}], "owner": {"reputation": 2449, "user_id": 2489480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3af2ee144cdb1075e9db71607f4dbf24?s=128&d=identicon&r=PG", "display_name": "Remi", "link": "https://stackoverflow.com/users/2489480/remi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 56362542, "answer_count": 2, "score": 0, "last_activity_date": 1559138932, "creation_date": 1559138559, "question_id": 56362426, "link": "https://stackoverflow.com/questions/56362426/typescript-named-definition-in-interface-array", "title": "Typescript named definition in interface Array", "body": "<p>Let's say for example I have an interface which defines a boolean value and optional string:</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code>interface IError {\n  error: [boolean, string?];\n}\n</code></pre>\n\n<p>Now later in the code I want to use it: </p>\n\n<pre><code>if (somethingTrue) {\n  error: [false]\n} else {\n  error: [true, \"Error occurred because of foo\"]\n}\n</code></pre>\n\n<p>I got this working. However, I would like to add more context to the Interface. The boolean should be named <code>errorOccured</code> and the string should be named <code>message</code>.</p>\n\n<p><strong>Tried</strong></p>\n\n<p>I was thinking about the following:</p>\n\n<pre><code>interface IError {\n  error: [errorOccured: boolean, message: string?];\n}\n</code></pre>\n\n<p>Might be something obvious that I'm missing, but I just don't get it.</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 4507, "user_id": 305949, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/38d369d1ad1a4ffba29c6ee1eae6a19f?s=128&d=identicon&r=PG", "display_name": "FK82", "link": "https://stackoverflow.com/users/305949/fk82"}, "edited": false, "score": 8, "creation_date": 1559137304, "post_id": 56361953, "comment_id": 99327348, "body": "<code>&quot;OR(&quot;1admin&quot;, &quot;2admin&quot;)&quot;</code> is not a syntactically correct string. The second one on the other hand is a string with the character sequence you want: i.e. <code>&#39;O&#39;, &#39;R&#39;, &#39;(&#39;, &#39;&quot;&#39;, ... </code>. In other words, you already got the right result. The string <code>&quot;\\&quot;&quot;</code> is the string consisting of the character <code>&#39;&quot;&#39;</code>. A backlash character &#39;\\&#39; is required to escape the &#39;&quot;&#39; character so that it doesn&#39;t break string parsing early."}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 4507, "user_id": 305949, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/38d369d1ad1a4ffba29c6ee1eae6a19f?s=128&d=identicon&r=PG", "display_name": "FK82", "link": "https://stackoverflow.com/users/305949/fk82"}, "edited": false, "score": 2, "creation_date": 1559137482, "post_id": 56361953, "comment_id": 99327444, "body": "@fk82 that would be a good answer :)"}, {"owner": {"reputation": 685, "user_id": 8071073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be7a315b37df459f2ea8b35fec243100?s=128&d=identicon&r=PG&f=1", "display_name": "vaku", "link": "https://stackoverflow.com/users/8071073/vaku"}, "edited": false, "score": 0, "creation_date": 1559137536, "post_id": 56361953, "comment_id": 99327487, "body": "See <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String#Escape_notation\" rel=\"nofollow noreferrer\">escape notation</a> and <a href=\"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/First_steps/Strings#Single_quotes_vs._double_quotes\" rel=\"nofollow noreferrer\">Single quotes vs. double quotes</a> | your output is actually correct..."}, {"owner": {"reputation": 4507, "user_id": 305949, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/38d369d1ad1a4ffba29c6ee1eae6a19f?s=128&d=identicon&r=PG", "display_name": "FK82", "link": "https://stackoverflow.com/users/305949/fk82"}, "reply_to_user": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1559137588, "post_id": 56361953, "comment_id": 99327519, "body": "@JonasWilms Technically I&#39;m not answering the question. Let&#39;s see what OP says. :)"}, {"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "reply_to_user": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559137590, "post_id": 56361953, "comment_id": 99327523, "body": "@adiga it was missing one <code>&#39;</code> at end in original code"}, {"owner": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1559137631, "post_id": 56361953, "comment_id": 99327551, "body": "@CodeManiac since OP got the output, I assumed that was as typo when posting here. I&#39;ll revert it to to the previous version if it&#39;s relevant to the question. OP doesn&#39;t seem to mention any syntax error."}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 4507, "user_id": 305949, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/38d369d1ad1a4ffba29c6ee1eae6a19f?s=128&d=identicon&r=PG", "display_name": "FK82", "link": "https://stackoverflow.com/users/305949/fk82"}, "edited": false, "score": 0, "creation_date": 1559137682, "post_id": 56361953, "comment_id": 99327590, "body": "@fk82 for sure you do. And 4 people agree to it."}, {"owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "reply_to_user": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559137751, "post_id": 56361953, "comment_id": 99327637, "body": "@adiga yeah that&#39;s fine, but that completely changes the question"}, {"owner": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "reply_to_user": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "edited": false, "score": 0, "creation_date": 1559137897, "post_id": 56361953, "comment_id": 99327752, "body": "@CodeManiac OP thinks there is a literal backslash in the string when there isn&#39;t. So, I assumed the syntax error was not the problem here."}, {"owner": {"reputation": 544, "user_id": 8368852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5863df111c8ffdc6513ca317f1e27742?s=128&d=identicon&r=PG&f=1", "display_name": "prisoner_of_azkaban", "link": "https://stackoverflow.com/users/8368852/prisoner-of-azkaban"}, "edited": false, "score": 0, "creation_date": 1559137949, "post_id": 56361953, "comment_id": 99327776, "body": "Ok so i didn&#39;t explain properly. I am writing json on to a file and in json I see the escape characters. console.log doesn&#39;t show any escape charater."}, {"owner": {"reputation": 105043, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 2, "creation_date": 1559138015, "post_id": 56361953, "comment_id": 99327830, "body": "Without the \\ it would be invalid JSON then."}, {"owner": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559138022, "post_id": 56361953, "comment_id": 99327836, "body": "@prisoner_of_azkaban is the last character inside the for loop a single quote or a double quote? You posted it with a double quote which is a syntax error"}, {"owner": {"reputation": 544, "user_id": 8368852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5863df111c8ffdc6513ca317f1e27742?s=128&d=identicon&r=PG&f=1", "display_name": "prisoner_of_azkaban", "link": "https://stackoverflow.com/users/8368852/prisoner-of-azkaban"}, "reply_to_user": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559138119, "post_id": 56361953, "comment_id": 99327896, "body": "@adiga I tried with single quote and double quote both. Got the same output."}, {"owner": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559138177, "post_id": 56361953, "comment_id": 99327931, "body": "@prisoner_of_azkaban No, I meant the code you have posted here. It is throwing a syntax error because the last character should be a double quote and not a single quote.."}, {"owner": {"reputation": 544, "user_id": 8368852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5863df111c8ffdc6513ca317f1e27742?s=128&d=identicon&r=PG&f=1", "display_name": "prisoner_of_azkaban", "link": "https://stackoverflow.com/users/8368852/prisoner-of-azkaban"}, "reply_to_user": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559138232, "post_id": 56361953, "comment_id": 99327966, "body": "oh let me edit the question. @adiga"}, {"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1559138249, "post_id": 56361953, "comment_id": 99327978, "body": "HOW are you writing the JSON to the file? My guess is you are doing something else or it is 100% correct that it is being escaped so the JSON is valid"}, {"owner": {"reputation": 544, "user_id": 8368852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5863df111c8ffdc6513ca317f1e27742?s=128&d=identicon&r=PG&f=1", "display_name": "prisoner_of_azkaban", "link": "https://stackoverflow.com/users/8368852/prisoner-of-azkaban"}, "edited": false, "score": 0, "creation_date": 1559138302, "post_id": 56361953, "comment_id": 99328006, "body": "<code>fse.outputFileSync(outputfilePath, JSON.stringify(result, null, 2));</code> where fse is fs-extra"}, {"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1559138341, "post_id": 56361953, "comment_id": 99328033, "body": "And what is result? Code above shows you building a string.... So you would be JSON encoding a string, not an object. ANd as everyone says <code>{ &quot;foo&quot; : &quot;I say \\&quot;Hello\\&quot; world&quot; }</code> is valid JSON"}], "answers": [{"tags": [], "owner": {"reputation": 1001, "user_id": 2595720, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000268300590/picture?type=large", "display_name": "Harijs Deksnis", "link": "https://stackoverflow.com/users/2595720/harijs-deksnis"}, "is_accepted": false, "score": 0, "last_activity_date": 1559138338, "last_edit_date": 1559138338, "creation_date": 1559137939, "answer_id": 56362225, "question_id": 56361953, "link": "https://stackoverflow.com/questions/56361953/concatenate-string-in-typescript-javascript/56362225#56362225", "title": "Concatenate string in typescript/javascript", "body": "<p>This seems to do the job:</p>\n\n<pre><code>const NUM_ADMINS = 2;\nconst CONCAT_STRING =\n `OR(${\n   Array(NUM_ADMINS)\n   .fill()\n   .map((_, idx) =&gt; `\"${idx + 1}admin\"`)\n   .join(\", \")})`;\n\n</code></pre>\n\n<p>It creates a new array with the needed number of admins, then maps it to strings in th form \"admin\", joins with a comma and a space. And then it it is all wrapped in a \"OR()\" string.</p>\n"}, {"tags": [], "owner": {"reputation": 4507, "user_id": 305949, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/38d369d1ad1a4ffba29c6ee1eae6a19f?s=128&d=identicon&r=PG", "display_name": "FK82", "link": "https://stackoverflow.com/users/305949/fk82"}, "is_accepted": false, "score": 1, "last_activity_date": 1559149739, "last_edit_date": 1559149739, "creation_date": 1559138280, "answer_id": 56362335, "question_id": 56361953, "link": "https://stackoverflow.com/questions/56361953/concatenate-string-in-typescript-javascript/56362335#56362335", "title": "Concatenate string in typescript/javascript", "body": "<p>As mentioned, you already got the correct result in your original snippet. </p>\n\n<p>If the character escape syntax seems curious to you, I'd recommend something like the following using <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\" rel=\"nofollow noreferrer\">template strings</a>.</p>\n\n<p>You can write the <code>\"</code> in template strings unescaped and use interpolation to print your variables.</p>\n\n<p><strong>Edit</strong>: Seems like you want JSON formatting. You can use <code>JSON.stringify</code> for that. JSON formatted strings will contain escape characters that show up in <code>console.log</code> output.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const f = (n, s) =&gt; {\r\n    const a = new Array(n)\r\n      .fill()\r\n      .map((_, i) =&gt; `\"${i + 1}${s}\"`);\r\n    return `OR(${a.join(', ')})`;\r\n}\r\n\r\nconsole.log(`output: ${f(2, \"admin\")}`)\r\nconsole.log(`json-formatted: ${JSON.stringify(f(2, \"admin\"))}`)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 11342715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-t4I3j5m2T4k/AAAAAAAAAAI/AAAAAAAAABY/MueRZHApOSE/photo.jpg?sz=128", "display_name": "Rosey Khatun", "link": "https://stackoverflow.com/users/11342715/rosey-khatun"}, "is_accepted": false, "score": 0, "last_activity_date": 1559139426, "last_edit_date": 1559139426, "creation_date": 1559139228, "answer_id": 56362643, "question_id": 56361953, "link": "https://stackoverflow.com/questions/56361953/concatenate-string-in-typescript-javascript/56362643#56362643", "title": "Concatenate string in typescript/javascript", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var str = '\"OR(\"'\r\nvar adm = 'admin\"'\r\nvar end = ')\"'\r\nfor (let i = 1; i &lt; 3; i++) {\r\n  str += i + adm + ', '\r\n}\r\nstr = str.trim().substring(0, str.length - 2)\r\nstr += end\r\nconsole.log(str);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>try running this snippet. if the implementation is fyn for you. Result is what you expected.</p>\n"}], "owner": {"reputation": 544, "user_id": 8368852, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5863df111c8ffdc6513ca317f1e27742?s=128&d=identicon&r=PG&f=1", "display_name": "prisoner_of_azkaban", "link": "https://stackoverflow.com/users/8368852/prisoner-of-azkaban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1559149739, "creation_date": 1559137079, "last_edit_date": 1559138249, "question_id": 56361953, "link": "https://stackoverflow.com/questions/56361953/concatenate-string-in-typescript-javascript", "title": "Concatenate string in typescript/javascript", "body": "<p>EDIT: This string is a part of json and i am writing it onto a file. In that json file i see the escape charaters. With console.log, I don't see any escape character.</p>\n\n<p>I am trying to concatenate a string such that I get the following output:</p>\n\n<pre><code>\"OR(\"1admin\", \"2admin\")\"\n</code></pre>\n\n<p>But the output I keep on getting is</p>\n\n<pre><code>\"OR(\\\"1admin\\\", \\\"2admin\\\")\"\n</code></pre>\n\n<p>Sample code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var str = \"OR(\"\r\nfor (let i = 1; i &lt; 3; i++) {\r\n  str += '\"' + i + 'admin' + '\", ';\r\n}\r\nstr = str.trim().substring(0, str.length - 2).concat(')')\r\nconsole.log(str)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I have tried using regex and string split.\neg.</p>\n\n<p><code>.replace(/'/g, '\"')</code> This when i tried something like this <code>\"'\" + i + \"admin\" + \"', \"</code> and tried to replace <code>'</code> with <code>\"</code></p>\n\n<pre><code>.split('\\\\').join('').trim() This also didn' work.\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["angular", "typescript", "angular7", "angular-httpclient"], "comments": [{"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559138091, "post_id": 56361913, "comment_id": 99327879, "body": "Read the documentation."}], "answers": [{"tags": [], "owner": {"reputation": 1885, "user_id": 6157849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsSjx.jpg?s=128&g=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/6157849/jesse"}, "is_accepted": false, "score": 0, "last_activity_date": 1559137954, "creation_date": 1559137954, "answer_id": 56362229, "question_id": 56361913, "link": "https://stackoverflow.com/questions/56361913/how-to-encapsulate-a-request-manager-in-angular7-using-httpclient/56362229#56362229", "title": "How to encapsulate a request manager in Angular7 using httpClient?", "body": "<p>In Angular this type of activity is done through <a href=\"https://angular.io/tutorial/toh-pt4\" rel=\"nofollow noreferrer\">services</a>.</p>\n\n<p>If you use the Angular CLI (which you should definitely use), just type <code>ng generate service api-manager</code> in the terminal and it will create all the boilerplate for you.</p>\n"}], "owner": {"reputation": 131, "user_id": 11454633, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qZbi8.png?s=128&g=1", "display_name": "Shinji035", "link": "https://stackoverflow.com/users/11454633/shinji035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559139545, "creation_date": 1559136960, "last_edit_date": 1559139545, "question_id": 56361913, "link": "https://stackoverflow.com/questions/56361913/how-to-encapsulate-a-request-manager-in-angular7-using-httpclient", "title": "How to encapsulate a request manager in Angular7 using httpClient?", "body": "<p>I'm new to Angular, and I am using the httpClient like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code> public getFocusAreaDataWithHttpClient() {\n\n    this.http.get(Api.focusAreaApi).subscribe({\n      next(response) {\n        console.log(\"httpClient handle data\");\n        console.dir(response);\n      },\n      error(err) {\n        console.error(\"Error: \" + err);\n      },\n      complete() {\n        console.log(\"Completed\");\n      }\n    });\n  }\n</code></pre>\n\n<p>I want to encapsulate a service (apiManager.service)to provide a public method then other service can use it to fetch data(need to pass apiurl), what I expect is like this:</p>\n\n<pre><code>export class ApiManager {\n  constructor(private http: HttpClient) {}\n// define request header , content-Type , auth token ,and some common config here\n// and there should be 2 method - get and post\n\n}\n</code></pre>\n\n<p>and other service can use it like:</p>\n\n<pre><code>\napiManager.get(apiurl,parameters).subscript...\napiManager.post(apiurl,parameters).subscript...\n\n</code></pre>\n\n<p>but I have no idea for how to encapsulate it , I'm appreciate if anyone can give me some demo to show how to encapsulate a manager class to provide data fetch function.</p>\n"}, {"tags": ["javascript", "arrays", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": true, "score": 2, "last_activity_date": 1559137001, "creation_date": 1559137001, "answer_id": 56361925, "question_id": 56361888, "link": "https://stackoverflow.com/questions/56361888/how-in-java-script-to-find-the-necessary-number-from-three-numbers/56361925#56361925", "title": "How in Java script to find the necessary number from three numbers?", "body": "<p>Use <code>includes</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const nums = [15, 30, 70, 140];\r\nconst x = 70;\r\nif (nums.includes(x)) console.log(\"Yay :)\")\r\nelse console.log(\"Noo :(\");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If the numbers are a space-separated string:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const nums = \"15 30 70 140\".split(\" \").map(e =&gt; parseInt(e));\r\nconst x = 70;\r\nif (nums.includes(x)) console.log(\"Yay :)\")\r\nelse console.log(\"Noo :(\");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 5510, "user_id": 10445697, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RFNqiVO6PKc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DXfAZXncU5HAWwYCWOT9vsRAHM5hw/mo/photo.jpg?sz=128", "display_name": "Kobe", "link": "https://stackoverflow.com/users/10445697/kobe"}, "is_accepted": false, "score": 0, "last_activity_date": 1559137084, "creation_date": 1559137084, "answer_id": 56361956, "question_id": 56361888, "link": "https://stackoverflow.com/questions/56361888/how-in-java-script-to-find-the-necessary-number-from-three-numbers/56361956#56361956", "title": "How in Java script to find the necessary number from three numbers?", "body": "<p>You could use a switch and case statement:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Get user input\r\nvar input = +prompt()\r\n\r\nswitch (input) {\r\n  case 15:\r\n  case 30:\r\n  case 70:\r\n  case 140:\r\n    console.log(true)\r\n    break;\r\n  default:\r\n    console.log(false)\r\n    break;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11555037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1559137153, "accepted_answer_id": 56361925, "answer_count": 2, "score": 0, "last_activity_date": 1559137084, "creation_date": 1559136888, "last_edit_date": 1559137067, "question_id": 56361888, "link": "https://stackoverflow.com/questions/56361888/how-in-java-script-to-find-the-necessary-number-from-three-numbers", "closed_reason": "Duplicate", "title": "How in Java script to find the necessary number from three numbers?", "body": "<p>I have four numbers 15 30 70 140. and \"x\", which can get any number, how to say if ()? that if x is equal to 15 30 70 140, then true, if not, then false.</p>\n\n<pre><code>const x =....;\nif(x===?){....}else{....}\n</code></pre>\n"}, {"tags": ["angular", "typescript", "polymorphism"], "comments": [{"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559136719, "post_id": 56361552, "comment_id": 99327009, "body": "Haven&#39;t really seen that pattern being used in Angular/TypeScript. Why do you think it is a better approach than using conditionals?"}, {"owner": {"reputation": 7, "user_id": 10041833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TGqda_mBmvc/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3rPt78LV3H7z9MIvx3_mcGrjxkuQ/mo/photo.jpg?sz=128", "display_name": "Eddie", "link": "https://stackoverflow.com/users/10041833/eddie"}, "reply_to_user": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559139717, "post_id": 56361552, "comment_id": 99328847, "body": "@SiddAjmera,  I think it is for improved extensibility/reusablity and testing, but not to sure as to specific benefit. But i Typescript is OOP so shouldnt it be possible to apply that here is as well? That is why i couldnt find a single answer on the net around it i guess. most examples show you how to create the classes, but they dont show how you would actually call it from you code. In this case the togglefunction"}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 7635224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac73f9167f6d0d7be65b6dc3ebe8863?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142 Wollny", "link": "https://stackoverflow.com/users/7635224/pawe%c5%82-wollny"}, "is_accepted": false, "score": 0, "last_activity_date": 1559137864, "creation_date": 1559137864, "answer_id": 56362200, "question_id": 56361552, "link": "https://stackoverflow.com/questions/56361552/replace-conditional-to-polymorphism-when-using-typescript-model-class/56362200#56362200", "title": "replace conditional to polymorphism when using typescript model class", "body": "<p>I think your approuch is too much complicated for such a simple case. For this case this code is enough: </p>\n\n<pre><code>export class Cell {\n    private coordinates: Coordinates;\n    public status: 'alive' | 'dead';\n\n    constructor(coordinates) {\n        this.coordinates = coordinates;\n        this.status = 'alive';\n    }\n\n    getCoordinates(): Coordinates {\n        return this.coordinates;\n    }\n\n    toggleCell(): void {\n        this.status = this.status === 'alive' ? 'dead' : 'alive';\n        console.log(this.status);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": false, "score": 0, "last_activity_date": 1559142513, "creation_date": 1559142513, "answer_id": 56363649, "question_id": 56361552, "link": "https://stackoverflow.com/questions/56361552/replace-conditional-to-polymorphism-when-using-typescript-model-class/56363649#56363649", "title": "replace conditional to polymorphism when using typescript model class", "body": "<p>The example here does seem too simple to bother with polymorphism... that would probably only be worth it if you find yourself doing a lot of <code>switch (this.status)</code> or the like.  But here's how I might go about it:</p>\n\n<p>First, I would make <code>Status</code> an interface instead of an abstract class, unless you actually have some common functionality:</p>\n\n<pre><code>interface Status {\n  readonly status: \"alive\" | \"dead\";\n  getOtherStatus(): Status;  // instead of setStatus()\n  otherFunctionalityThatChangesDependingOnStatus(): void; // etc\n}\n</code></pre>\n\n<p>Then, if you do have two classes <code>Alive</code> and <code>Dead</code>, you absolutely do not want to mutate the <code>status</code> string inside <code>setStatus()</code>, since that breaks your model entirely.  Because <code>Alive</code> and <code>Dead</code> are two different classes, an instance of one cannot become an instance of the other (well, it <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf\" rel=\"nofollow noreferrer\"><em>technically can</em></a>, but you shouldn't try to do that).  And since an <code>Alive</code> instance must always be an <code>Alive</code> instance, it makes little sense to change <code>this.status</code> to <code>\"dead\"</code>.  In your original implementation, <code>const a = new Alive()</code> is alive, then <code>a.setStatus()</code> makes it a \"dead <code>Alive</code>\", and then <code>a.setStatus()</code> will keep it a \"dead <code>Alive</code>\", because of the implementation of <code>Alive.setStatus()</code>.</p>\n\n<p>Instead, you should treat <code>Alive</code> and <code>Dead</code> instances as <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" rel=\"nofollow noreferrer\">immutable</a>, at least as far as their status is concerned.  Instead of mutating <code>this.status</code> via <code>setStatus()</code>, you should <em>return</em> a <code>Status</code> object corresponding to the other status via <code>getOtherStatus()</code>.  If <code>Alive</code> and <code>Dead</code> are immutable, there's no real reason to carry around more than one instance of each class (since <code>const a = new Alive()</code> and <code>const b = new Alive()</code> would make two distinct objects which act exactly the same in all circumstances).  So you can do something like this:</p>\n\n<pre><code>class Alive implements Status {\n  static readonly instance = new Alive(); // the one instance of Alive\n  private constructor() {}\n  readonly status = \"alive\";\n  getOtherStatus() {\n    return Dead.instance;\n  }\n  otherFunctionalityThatChangesDependingOnStatus() {\n    console.log(\"It's good to be alive!\");       \n  }\n}\n\nclass Dead implements Status {\n  static readonly instance = new Dead(); // the one instance of Dead\n  private constuctor() {}\n  readonly status = \"dead\";\n  getOtherStatus() {\n    return Alive.instance;\n  }\n  otherFunctionalityThatChangesDependingOnStatus() {\n    console.log(\"I'm out of here!\")\n  }\n}\n</code></pre>\n\n<p>So you never call <code>new Alive()</code> or <code>new Dead()</code>; instead you can grab <code>Alive.instance</code> or <code>Dead.instance</code>.  Finally you can make <code>Cell</code> depend on <code>Status</code>. The <code>status</code> property of <code>Cell</code> should be a <code>Status</code> instance, not a string.  That's how you can get the object-oriented behavior of <code>Alive</code> and <code>Dead</code>.  You initialize <code>status</code> to <code>Alive.instance</code>, and you <code>toggleCell()</code> by setting <code>this.status</code> to <code>this.status.getOtherStatus()</code>:</p>\n\n<pre><code>class Cell {\n  private coordinates: Coordinates;\n  public status: Status;\n\n  constructor(coordinates: Coordinates) {\n    this.coordinates = coordinates;\n    this.status = Alive.instance;\n  }\n\n  getCoordinates(): Coordinates {\n    return this.coordinates;\n  }\n\n  toggleCell(): void {\n    this.status = this.status.getOtherStatus();\n    console.log(this.status);\n  }\n}\n</code></pre>\n\n<p>And let's test it:</p>\n\n<pre><code>const c = new Cell(null!);\nc.status.otherFunctionalityThatChangesDependingOnStatus(); // It's good to be alive!\nc.toggleCell();\nc.status.otherFunctionalityThatChangesDependingOnStatus(); // I'm out of here!\nc.toggleCell();\nc.status.otherFunctionalityThatChangesDependingOnStatus(); // It's good to be alive!\n</code></pre>\n\n<p>Looks good.  Okay, hope this helps.  Good luck!</p>\n\n<p><a href=\"https://typescript-play.js.org/#code/JYOwLgpgTgZghgYwgAgMpjmArgZ2QbwChlkoI4ATAexABsBPZHDbHALmQCI5bgA3CJ2QAfLhXIVOAbmLIA5hDAB5MAAto6TLgAUASg6bWMklTXQAYlhAIwwGj2Bh6AFVWYAwm5AKcAEQgADhAgFKBySiCGOvrIfFTAFDIAvoSECLRwOHgAgrwCyMAAtgG0EIXBYHhReEQkzJjACKQSNAwFIPXWKAC8yCAQAO7IufwQesbIAVD8mCgINMxQWDZUUHoEKSRklK2M9azIvdx5ghMKymZQ1eu1JM3YUCDI-pQAdKCdSBObyKbqUJZrLZ7LwnK4PF4fP4giEwhFrroCLISPMOlRSq9aFQ5NpOABJMAAcjwcioVAoyDAVGQACMUA4BABCTi6b6EFJpDJZZ4SArFUrlcBVFi4JF1FiNZo7OiMD4YLqHPqDHmUcayKYzSDIVHMZZUtaI-A-bbUGVMEV4I7iSjSWTnFT-BFiu5kB5PEYCd4deVfWQ-P4WKw2OwgBxgtxgTxwbwQPyBYKhbzwi03ZHahboiCY7G4vGEwq-LBgX4wZD-CDM1l+9mpdKZPDuCC0WjOjV8Wbp1aJ2bsZDuMlQbuQHATAJYGm8Jr7XAGC0yWQ6sBLFZreZd0A9jj99eh4eGtNqYA4V5rwcb4eK09D2MTEiH4-Ty3DE5ez4QNl2xTbs+72N6LcDteNRpq6WCPJSqhHiegHnje1ayFSchyKUjbNv+sTxBStx3pBD4Woq96vI+rz2pcCK3umaIYliOKEY+VYkCkHKLtqir9EMqG0NoIBYM2jJVggREWq8AYAkGwKhqCLgRlGMZxjCibhJEKassgAD0anIASxLyGSFJUrS9InIyaSvIhyEQJxaqCcRomAsGIKONJELRlC8awkmylaDg4zqZpeYFlQRYlmW0AVqZ5koU2XECUJ3kiZc9kSWGzmRpCsbQgmcJeawvkaVpRIknplLUnSyAMuFQA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n"}], "owner": {"reputation": 7, "user_id": 10041833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TGqda_mBmvc/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3rPt78LV3H7z9MIvx3_mcGrjxkuQ/mo/photo.jpg?sz=128", "display_name": "Eddie", "link": "https://stackoverflow.com/users/10041833/eddie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559142513, "creation_date": 1559135771, "last_edit_date": 1559135966, "question_id": 56361552, "link": "https://stackoverflow.com/questions/56361552/replace-conditional-to-polymorphism-when-using-typescript-model-class", "title": "replace conditional to polymorphism when using typescript model class", "body": "<p>I have built a game of life simulation and now I am trying to clean the code and make it more Object Orientated. Despite several days of search, I am having a hard time replacing conditionals with polymorphism. </p>\n\n<p>So I have a component.ts a game model and a cell model. The cell model contains property <code>status: boolean</code> amongst other things. which can be dead or alive. Then I have given the user the ability to toggle a cell status on start. So I have tried for the status to create an abstract class and then two subclasses with dead or alive but I am not sure if that is the right way to go. </p>\n\n<p>this is the cell.model</p>\n\n<pre><code>import { Coordinates } from './coordinates.model';\n\nexport class Cell {\n  private coordinates: Coordinates;\n  public status: string;\n\n\n  constructor(coordinates) {\n    this.coordinates = coordinates;\n    this.status = new Alive().status;\n  }\n\n  getCoordinates(): Coordinates {\n    return this.coordinates;\n  }\n\n  toggleCell(): void {\n    console.log(this.status)\n  }\n\n}\n\nexport abstract class Status {\n  status: string;\n  abstract setStatus(): string;\n}\n\nexport class Alive extends Status {\n  status = 'alive';\n  setStatus(): string {\n    return this.status = 'dead';\n  }\n}\n\nexport class Dead extends Status {\n  status = 'dead';\n  setStatus(): string {\n    return this.status = 'alive';\n  }\n}\n</code></pre>\n\n<p>In the game model as u can see below, I used conditionals to change the status</p>\n\n<pre><code>toggleCell(cellIndex: number) {\n  const cell: Cell = this.cells[cellIndex];\n  // if (this.cells[cellIndex].status === 'dead') {\n  //     this.cells[cellIndex].status = 'alive';\n  //     this.addToLivingCells(cellIndex);\n\n  // } else {\n  //     this.cells[cellIndex].status = 'dead';\n  //     this.removeFromLivingCells(cellIndex);\n  // }\n\n  cell.toggleCell()\n}\n</code></pre>\n\n<p>so what I want to do is remove the conditionals and use polymorphism to toggle the status from the dead to alive and back depending on the current status.</p>\n\n<p>Let me know if the rest of the code is needed.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["angular", "typescript", "svg.js"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 11212264, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkAjL8RUg5E/AAAAAAAAAAI/AAAAAAAAC_s/tLbN1cXJfAo/photo.jpg?sz=128", "display_name": "PiotrF", "link": "https://stackoverflow.com/users/11212264/piotrf"}, "is_accepted": false, "score": 0, "last_activity_date": 1560585697, "creation_date": 1560585697, "answer_id": 56608544, "question_id": 56361546, "link": "https://stackoverflow.com/questions/56361546/prod-build-error-when-using-a-svg-js-plugin-in-an-angular-7-application/56608544#56608544", "title": "Prod build error when using a svg.js plugin in an Angular 7 application", "body": "<p>package.json</p>\n\n<pre><code>\"@svgdotjs/svg.draggable.js\": \"^3.0.2\",\n\"@svgdotjs/svg.filter.js\": \"3.0.6\",\n\"@svgdotjs/svg.js\": \"3.0.12\",\n\"@svgdotjs/svg.panzoom.js\": \"^2.0.3\",\n\n...\n\"devDependencies\": {\n  \"@angular-devkit/build-angular\": \"0.800.1\",   //not 0.800.2 !!!\n\"@angular/cli\": \"8.0.1\",\n...\n</code></pre>\n\n<p>component</p>\n\n<pre><code>import { SVG, G, Pattern, Text, TextPath, Image, Svg } from '@svgdotjs/svg.js'\nimport '@svgdotjs/svg.filter.js'\nimport '@svgdotjs/svg.panzoom.js'\nimport '@svgdotjs/svg.draggable.js'\n\n....\n  const imageSVG = this.draw.image(dataUrl).draggable() \n....  \n</code></pre>\n\n<p>node_modules </p>\n\n<pre><code>svj.js master from 24.05.2019  !!!!!\n</code></pre>\n\n<p><a href=\"https://citysoft.pl/przypinam/dashboard\" rel=\"nofollow noreferrer\">https://citysoft.pl/przypinam/dashboard</a></p>\n"}, {"tags": [], "owner": {"reputation": 235, "user_id": 1169416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f736c99a6d76bf6133d7b67fe1c2f7de?s=128&d=identicon&r=PG", "display_name": "Maxime", "link": "https://stackoverflow.com/users/1169416/maxime"}, "is_accepted": false, "score": 0, "last_activity_date": 1560762441, "creation_date": 1560762441, "answer_id": 56628126, "question_id": 56361546, "link": "https://stackoverflow.com/questions/56361546/prod-build-error-when-using-a-svg-js-plugin-in-an-angular-7-application/56628126#56628126", "title": "Prod build error when using a svg.js plugin in an Angular 7 application", "body": "<p>My issue came from the fact that I was using a branch of my fork, so not the compiled version of it. I published my fork over to a private npm and it worked.\nNow with the new tag it works even with the official package.</p>\n\n<p>So my bad on this one.</p>\n"}], "owner": {"reputation": 235, "user_id": 1169416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f736c99a6d76bf6133d7b67fe1c2f7de?s=128&d=identicon&r=PG", "display_name": "Maxime", "link": "https://stackoverflow.com/users/1169416/maxime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1560762441, "creation_date": 1559135756, "question_id": 56361546, "link": "https://stackoverflow.com/questions/56361546/prod-build-error-when-using-a-svg-js-plugin-in-an-angular-7-application", "title": "Prod build error when using a svg.js plugin in an Angular 7 application", "body": "<p>I am using svg.js alongside svg.draggable.js in a Angular 7 application built using Angular-cli.\nLocally everything is working fine but once i do a production build I get the error .draggable is not a function when accesing the page.</p>\n\n<p>Here's how I use both of them in my component:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as SvgJs from '@svgdotjs/svg.js';\nimport '@svgdotjs/svg.draggable.js';\n</code></pre>\n\n<p>It's like if for the production build Angular-cli is not including svg.draggable.</p>\n\n<p>Maybe I need to do something more but as it's working locally I don't really know what.\nDoes anyone knows why it happens and how to solve this?</p>\n\n<p>Maybe it's not related to svg.draggable.js specifically but to Angular-cli by the way but I have no clue.</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 2, "creation_date": 1559135620, "post_id": 56361444, "comment_id": 99326275, "body": "Have you tried your hunch ? Because it does work like that. Those are <code>Type</code>s, and they accept values, just like you suspected."}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1559135802, "post_id": 56361444, "comment_id": 99326398, "body": "<a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#string-literal-types\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/&hellip;</a>"}, {"owner": {"reputation": 1885, "user_id": 6157849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsSjx.jpg?s=128&g=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/6157849/jesse"}, "edited": false, "score": 0, "creation_date": 1559135851, "post_id": 56361444, "comment_id": 99329662, "body": "I just plugged it into a <a href=\"https://stackblitz.com/edit/typescript-qhvxvx\" rel=\"nofollow noreferrer\">StackBlitz</a> and it appears to be working fine with the union operator."}, {"owner": {"reputation": 1690, "user_id": 1921979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRaTG.jpg?s=128&g=1", "display_name": "Conor Mancone", "link": "https://stackoverflow.com/users/1921979/conor-mancone"}, "edited": false, "score": 0, "creation_date": 1559137560, "post_id": 56361444, "comment_id": 99327500, "body": "@Maryannah lol, that&#39;s embarrassing.  I&#39;m still putting together the skeleton of the app, so neither the tests nor the app are running yet for me to &quot;test&quot; it out.  I browsed through the doc that Reactgular linked to (I have a number of times actually), but missed that section and didn&#39;t know the name of the thing I was looking for to google it.  I just assumed it didn&#39;t work since I didn&#39;t see anything about it in the docs.  Obviously I should have just waited a bit longer as I would have answered my own question once I got the tests running..."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": false, "score": 2, "last_activity_date": 1559135685, "creation_date": 1559135685, "answer_id": 56361521, "question_id": 56361444, "link": "https://stackoverflow.com/questions/56361444/generating-angular-typescript-class-that-specifies-allowed-values-for-property/56361521#56361521", "title": "Generating angular/typescript class that specifies allowed values for property", "body": "<p>You can create a type</p>\n\n<pre><code>Type sortDirection = 'asc' | 'desc';\n</code></pre>\n\n<p>And use it in your class</p>\n\n<pre><code>export class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: sortDirection = 'asc';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1001, "user_id": 2595720, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000268300590/picture?type=large", "display_name": "Harijs Deksnis", "link": "https://stackoverflow.com/users/2595720/harijs-deksnis"}, "is_accepted": false, "score": 2, "last_activity_date": 1559135797, "creation_date": 1559135797, "answer_id": 56361562, "question_id": 56361444, "link": "https://stackoverflow.com/questions/56361444/generating-angular-typescript-class-that-specifies-allowed-values-for-property/56361562#56361562", "title": "Generating angular/typescript class that specifies allowed values for property", "body": "<p>You can define a \"literal type\" with union values.</p>\n\n<p><code>export type SortDirection = 'asc' | 'desc';</code></p>\n\n<p>and use it in your model:</p>\n\n<pre><code>export class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: SortDirection;\n}\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1690, "user_id": 1921979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRaTG.jpg?s=128&g=1", "display_name": "Conor Mancone", "link": "https://stackoverflow.com/users/1921979/conor-mancone"}, "edited": false, "score": 0, "creation_date": 1559137614, "post_id": 56361989, "comment_id": 99327540, "body": "I forgot about enums!  I don&#39;t use those much, so handy to have the reminder.  Thanks for breaking out all the options!"}], "tags": [], "owner": {"reputation": 3075, "user_id": 6666508, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oHtRw.jpg?s=128&g=1", "display_name": "JeanPaul A.", "link": "https://stackoverflow.com/users/6666508/jeanpaul-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1559137182, "creation_date": 1559137182, "answer_id": 56361989, "question_id": 56361444, "link": "https://stackoverflow.com/questions/56361444/generating-angular-typescript-class-that-specifies-allowed-values-for-property/56361989#56361989", "title": "Generating angular/typescript class that specifies allowed values for property", "body": "<p>As others have mentioned, there are a variety of ways how to go about your requirement.</p>\n\n<p>First and foremost, the simplest way is to do it like you actually suggestted</p>\n\n<pre><code>export class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: 'asc' | 'desc';\n}\n</code></pre>\n\n<p>Second is to declare a type, and use it instead. This might be beneficial for reusability</p>\n\n<pre><code>export type SortDirection = 'asc' | 'desc';\n\nexport class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: SortDirection;\n}\n</code></pre>\n\n<p>The third option is to define an Enum. In addition to reusability, using an enum makes the code more maintainable; example in the case that the value <code>asc</code> and <code>desc</code> need to change in the future, you only need to change the value of the enum (instead of all going through all the places, as is the case with type definitions).</p>\n\n<pre><code>export enum SortDirection {\n    ASC = 'asc',\n    DESC = 'desc'\n}\n\nexport class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: SortDirection;\n}\n</code></pre>\n"}], "owner": {"reputation": 1690, "user_id": 1921979, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mRaTG.jpg?s=128&g=1", "display_name": "Conor Mancone", "link": "https://stackoverflow.com/users/1921979/conor-mancone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 56361989, "answer_count": 3, "score": 2, "last_activity_date": 1559137182, "creation_date": 1559135398, "question_id": 56361444, "link": "https://stackoverflow.com/questions/56361444/generating-angular-typescript-class-that-specifies-allowed-values-for-property", "title": "Generating angular/typescript class that specifies allowed values for property", "body": "<p>Imagine I'm making a simple model that describes (for instance) the details of a query:</p>\n\n<pre><code>export class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: string;\n}\n</code></pre>\n\n<p>That <code>sortDirection</code> is much more vague than necessary.  After all, the API accepts either <code>asc</code> or <code>desc</code>, and no other string values are allowed.  Therefore it would be nice to specify that only those two values are allowed, but I'm not quite sure how I would specify such a property, and the typescript docs haven't helped.  In essence I want to do this:</p>\n\n<pre><code>export class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: 'asc' | 'desc';\n}\n</code></pre>\n\n<p>Except of course the union operator works with types, not values.  I could conceptually try something like this:</p>\n\n<pre><code>export class asc {\n   direction = 'asc';\n}\nexport class desc {\n   direction = 'desc';\n}\nexport class QueryModel {\n    filters: FilterModel[];\n    page: number;\n    pageLength: number;\n    sortField: string;\n    sortDirection: asc | desc;\n}\n</code></pre>\n\n<p>But even if that works the structure of my model has changed (the sort direction is now <code>model.sortDirection.direction</code> instead of <code>model.sortDirection</code>)</p>\n\n<p>Is there an obvious option that I'm missing?</p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 28444, "user_id": 6428638, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/eoaOn.jpg?s=128&g=1", "display_name": "Sachila Ranawaka", "link": "https://stackoverflow.com/users/6428638/sachila-ranawaka"}, "edited": false, "score": 0, "creation_date": 1559134909, "post_id": 56361276, "comment_id": 99325808, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47439067/uglifyjs-throws-unexpected-token-keyword-const-with-node-modules\">UglifyJS throws unexpected token: keyword (const) with node_modules</a>"}, {"owner": {"reputation": 6672, "user_id": 2446254, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/4SJnD.png?s=128&g=1", "display_name": "Cody \uff27", "link": "https://stackoverflow.com/users/2446254/cody-%ef%bc%a7"}, "edited": false, "score": 1, "creation_date": 1559139375, "post_id": 56361276, "comment_id": 99328666, "body": "&quot;i am not using uglifyjs at all&quot; --- uhh clearly one of your packages is?? otherwise where is this uglifyjs error coming from??"}, {"owner": {"reputation": 54898, "user_id": 1260204, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/402e1da680f92d16e7736ab14a696f06?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/1260204/igor"}, "edited": false, "score": 0, "creation_date": 1559139866, "post_id": 56361276, "comment_id": 99328941, "body": "<code>ERROR in bundle.4c959b202dbdca8012b0.js from UglifyJs ....</code> &lt;= That message clearly states that uglifyjs is throwing the error."}], "answers": [{"tags": [], "owner": {"reputation": 3742, "user_id": 7240612, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-CbWT96COjjA/AAAAAAAAAAI/AAAAAAAAQkE/-Ce5kP4qNW0/photo.jpg?sz=128", "display_name": "Patrik Laszlo", "link": "https://stackoverflow.com/users/7240612/patrik-laszlo"}, "is_accepted": false, "score": -1, "last_activity_date": 1559142820, "creation_date": 1559142820, "answer_id": 56363747, "question_id": 56361276, "link": "https://stackoverflow.com/questions/56361276/angular-8-i-use-and-old-webpack-systen-back-when-there-was-no-angular-cli/56363747#56363747", "title": "Angular 8, I use and old webpack systen (back when there was no angular cli)", "body": "<p>actually, it was my problem, i switched to terser-webpack-plugin and now it works.</p>\n"}], "owner": {"reputation": 3742, "user_id": 7240612, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-CbWT96COjjA/AAAAAAAAAAI/AAAAAAAAQkE/-Ce5kP4qNW0/photo.jpg?sz=128", "display_name": "Patrik Laszlo", "link": "https://stackoverflow.com/users/7240612/patrik-laszlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1559142820, "creation_date": 1559134782, "last_edit_date": 1559136365, "question_id": 56361276, "link": "https://stackoverflow.com/questions/56361276/angular-8-i-use-and-old-webpack-systen-back-when-there-was-no-angular-cli", "title": "Angular 8, I use and old webpack systen (back when there was no angular cli)", "body": "<p>I try to upgrade a old grunt webpack based builder (been using since Angular 2 to 7), but now with Angular 8, I cannot upgrade to Ivy.</p>\n\n<p>I have only a cryptic error:</p>\n\n<pre><code>ERROR in bundle.4c959b202dbdca8012b0.js from UglifyJs\nUnexpected token: keyword \u00abconst\u00bb [./node_modules/@angular/forms/__ivy_ngcc__/fesm5/forms.js:29,0][bundle.4c959b202dbdca8012b0.js:69647,0]\n</code></pre>\n\n<p>My tsconfig.aot.json looks like this:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"skipLibCheck\": true,\n    \"outDir\": \"build/aot\",\n    \"target\": \"es5\",\n    \"module\": \"commonjs\",\n    \"moduleResolution\": \"node\",\n    \"sourceMap\": true,\n    \"emitDecoratorMetadata\": true,\n    \"experimentalDecorators\": true,\n    \"noImplicitAny\": true,\n    \"suppressImplicitAnyIndexErrors\": true,\n    \"lib\": [\n      \"es5\",\n      \"es6\",\n      \"dom\",\n      \"es2015.collection\",\n      \"es2015.promise\",\n      \"es2015.core\",\n      \"es2016\",\n      \"es2017\"\n    ]\n  },\n  \"include\": [\n    \"src/angular/**/*\",\n    \"test/angular-webpack/**/*\"\n  ],\n  \"exclude\": [\n    \"node_modules\",\n    \"src/angular/bundle.ts\",\n    \"test/angular-webpack/angular/bundle.ts\",\n    \"test/angular-karma\",\n    \"build/browser\"\n  ],\n  \"angularCompilerOptions\": {\n    \"enableIvy\": true,\n    \"annotationsAs\": \"decorators\",\n    \"preserveWhitespaces\": false\n  }\n}\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 7081, "user_id": 71245, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f9ccd98c185d7407c6d27e2875335a31?s=128&d=identicon&r=PG", "display_name": "Leon Radley", "link": "https://stackoverflow.com/users/71245/leon-radley"}, "is_accepted": true, "score": 2, "last_activity_date": 1559134548, "creation_date": 1559134548, "answer_id": 56361214, "question_id": 56361024, "link": "https://stackoverflow.com/questions/56361024/angular-8-using-ivy-module-ngfactory-cannot-find/56361214#56361214", "title": "Angular 8 using Ivy module.ngfactory cannot find", "body": "<p>Angular ivy no longer has any ngfactories.</p>\n\n<p>instead of having to store metadata about the components in a separate file, the info is now stored as static fields on the component itself.</p>\n\n<p>You should therefor refactor your code to not use ngfactory dependant thing such as importing <code>./module.ngfactory</code></p>\n"}, {"tags": [], "owner": {"reputation": 28444, "user_id": 6428638, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/eoaOn.jpg?s=128&g=1", "display_name": "Sachila Ranawaka", "link": "https://stackoverflow.com/users/6428638/sachila-ranawaka"}, "is_accepted": false, "score": 0, "last_activity_date": 1559134670, "creation_date": 1559134670, "answer_id": 56361247, "question_id": 56361024, "link": "https://stackoverflow.com/questions/56361024/angular-8-using-ivy-module-ngfactory-cannot-find/56361247#56361247", "title": "Angular 8 using Ivy module.ngfactory cannot find", "body": "<p>need to add <code>allowEmptyCodegenFiles : true</code> in angularCompilerOptions in <code>tsconfig.app.json</code></p>\n"}], "owner": {"reputation": 3742, "user_id": 7240612, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-CbWT96COjjA/AAAAAAAAAAI/AAAAAAAAQkE/-Ce5kP4qNW0/photo.jpg?sz=128", "display_name": "Patrik Laszlo", "link": "https://stackoverflow.com/users/7240612/patrik-laszlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 978, "favorite_count": 0, "accepted_answer_id": 56361214, "answer_count": 2, "score": 0, "last_activity_date": 1559134670, "creation_date": 1559134008, "question_id": 56361024, "link": "https://stackoverflow.com/questions/56361024/angular-8-using-ivy-module-ngfactory-cannot-find", "title": "Angular 8 using Ivy module.ngfactory cannot find", "body": "<p>I have a snippet:</p>\n\n<pre><code>import { platformBrowser }    from '@angular/platform-browser';\nimport { enableProdMode } from '@angular/core';\nenableProdMode();\n\nimport '../../../src/bundle';\n\nimport {ModuleNgFactory} from './module.ngfactory';\n\nplatformBrowser().bootstrapModuleFactory(ModuleNgFactory);\n</code></pre>\n\n<p>As soon, I enable ivy, i face this error:</p>\n\n<pre><code>Running \"cory-build-aot\" task\n\nCompiling @angular/core : module as esm5\n\nCompiling @angular/common : module as esm5\n\nCompiling @angular/platform-browser : module as esm5\n\nCompiling @angular/common/http : module as esm5\n\nCompiling @angular/router : module as esm5\n\nCompiling @angular/forms : module as esm5\nHash: d7163c5eb0d56ede4ba6\nVersion: webpack 4.32.2\nTime: 24870ms\nBuilt at: 05/29/2019 2:43:19 PM\n 4 assets\nEntrypoint polyfills = polyfills.d7163c5eb0d56ede4ba6.js sourcemaps/polyfills.d7163c5eb0d56ede4ba6.js.map\nEntrypoint bundle = bundle.d7163c5eb0d56ede4ba6.js sourcemaps/bundle.d7163c5eb0d56ede4ba6.js.map\n[0] ./test/angular-webpack/angular/polyfills.ts 0 bytes {1} [built]\n[1] ./test/angular-webpack/angular/bundle.aot.ts 0 bytes {0} [built]\n\nERROR in test/angular-webpack/angular/bundle.aot.ts(7,31): error TS2307: Cannot find module './module.ngfactory'.\n\nChild html-webpack-plugin for \"index.html\":\n     1 asset\n    Entrypoint undefined = index.html\n    [0] ./node_modules/html-webpack-plugin/lib/loader.js!./test/angular-webpack/index.html 261 bytes {0} [built]\nWarning: Command failed: ./node_modules/.bin/webpack-cli --color --cache --production --config /home/patrikx3/Projects/patrikx3/corifeus/corifeus-web/node_modules/corifeus-builder-angular/src/webpack.test.config.js\n\nCompiling @angular/core : module as esm5\n\nCompiling @angular/common : module as esm5\n\nCompiling @angular/platform-browser : module as esm5\n\nCompiling @angular/common/http : module as esm5\n\nCompiling @angular/router : module as esm5\n\nCompiling @angular/forms : module as esm5\n Use --force to continue.\n\nAborted due to warnings.\n\n\nExecution Time (2019-05-29 14:42:53 UTC+2)\ncory-build-aot  25.8s  \u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587\u2587 100%\nTotal 25.9s\n\npatrikx3@workstation:~/Projects/patrikx3/corifeus/corifeus-web$ \n</code></pre>\n\n<p>What the error is:\nERROR in test/angular-webpack/angular/bundle.aot.ts(7,31): error TS2307: Cannot find module './module.ngfactory'.</p>\n\n<p>I try to enable ivy, by adding angularCompilerOptions section to enableIvy to be true, and that is when I get this error.</p>\n"}, {"tags": ["typescript", "nativescript", "node-modules"], "comments": [{"owner": {"reputation": 20508, "user_id": 1060423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1f09d7393502c0d396adfc3fcf16c3?s=128&d=identicon&r=PG", "display_name": "Manoj", "link": "https://stackoverflow.com/users/1060423/manoj"}, "edited": false, "score": 0, "creation_date": 1559158255, "post_id": 56360871, "comment_id": 99337677, "body": "It does already work with NativeScript, in fact with the previous versions of NativeScript a similar default settings (<code>&quot;.&#47;node_modules&#47;tns-core-modules&#47;*&quot;</code>) was used to import any module from <code>tns-core-modules</code> without referring the package name."}], "answers": [{"tags": [], "owner": {"reputation": 735, "user_id": 2564384, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/82fe0fe87f876c5c131dd3d155a78855?s=128&d=identicon&r=PG", "display_name": "Markus Mauch", "link": "https://stackoverflow.com/users/2564384/markus-mauch"}, "is_accepted": true, "score": 0, "last_activity_date": 1559299054, "creation_date": 1559299054, "answer_id": 56393497, "question_id": 56360871, "link": "https://stackoverflow.com/questions/56360871/nativescript-virtual-module-path-mapping/56393497#56393497", "title": "NativeScript: Virtual module path mapping", "body": "<p>For anyone who comes across the same issue, here's the thing:</p>\n\n<p>After upgrading to NativeScript's new <a href=\"https://www.nativescript.org/blog/the-future-of-building-nativescript-apps\" rel=\"nofollow noreferrer\">bundle workflow</a> the issue was solved by simply adding the respective mapping to the webpack.config.js:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const config = {\r\n  resolve: {\r\n    alias: [\r\n      \"my_modules/*\": \"node_modules/my_package/dist/commonjs/my_modules/*\"\r\n    ]\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 735, "user_id": 2564384, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/82fe0fe87f876c5c131dd3d155a78855?s=128&d=identicon&r=PG", "display_name": "Markus Mauch", "link": "https://stackoverflow.com/users/2564384/markus-mauch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56393497, "answer_count": 1, "score": 0, "last_activity_date": 1559299054, "creation_date": 1559133521, "question_id": 56360871, "link": "https://stackoverflow.com/questions/56360871/nativescript-virtual-module-path-mapping", "title": "NativeScript: Virtual module path mapping", "body": "<p>Is it possible to use module path mapping in NativeScript at runtime?</p>\n\n<p>The TypeScript <a href=\"https://www.typescriptlang.org/docs/handbook/compiler-options.html\" rel=\"nofollow noreferrer\">compiler option</a> 'paths' allows to map virtual module ids to physical ones. If, for example, one needs to require the module <code>node_modules/my_package/dist/commonjs/my_modules/my_module</code> it is possible to define a mapping and then require the virtual module <code>my_modules/my_module</code> instead:</p>\n\n<pre><code>// tsconfig.json\n{\n  \"compilerOptions\": {\n    \"paths\": {\n      \"my_modules/*\": [ \"node_modules/my_package/dist/commonjs/my_modules/*\" ]\n    }\n  }\n}\n</code></pre>\n\n<p>This works fine at compile time but the TypeScript compiler won't emit the resolved module ids. Instead, it leaves the specified (virtual) module ids in place. As a result, the modules will not be found at runtime.</p>\n\n<p>There is a node package called <a href=\"https://www.npmjs.com/package/module-alias\" rel=\"nofollow noreferrer\">module-alias</a> that adresses this issue in a nodejs environment. However, I was not able to set this up in the NativeScript runtime.</p>\n"}, {"tags": ["typescript", "protractor"], "answers": [{"comments": [{"owner": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "reply_to_user": {"reputation": 1, "user_id": 4319414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3276678f0bfed51d2e8baf181473a382?s=128&d=identicon&r=PG&f=1", "display_name": "user4319414", "link": "https://stackoverflow.com/users/4319414/user4319414"}, "edited": false, "score": 0, "creation_date": 1559145722, "post_id": 56361627, "comment_id": 99332250, "body": "Glad to hear it, would you mind accepting this answer in case others find the question also"}], "tags": [], "owner": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "is_accepted": false, "score": 0, "last_activity_date": 1559136011, "creation_date": 1559136011, "answer_id": 56361627, "question_id": 56360387, "link": "https://stackoverflow.com/questions/56360387/protractor-not-able-to-click-the-element-while-iterating-the-list-of-elements/56361627#56361627", "title": "Protractor Not able to click the element While iterating the list of Elements", "body": "<p>As you are using <code>async/await</code> keywords I am assuming your have the control flow disabled in your framework (by setting <code>SELENIUM_PROMISE_MANAGER: false</code> in conf.js).</p>\n\n<p>If that is the case there is no need to be using so many <code>.then</code>'s as <code>await</code> provides a much easier way to handle them.</p>\n\n<p>Your test could be passing because it is hitting the failing the <code>text === '12345'</code> check in your if and therefore never attempting to click.</p>\n\n<pre><code>//Make function async\nasync clickClaimIDFromList(claimId) {\n\n  let allElems = await element.all(by.xpath('//*[@data-qa=\"dashboard.claim\"]'));\n\n  //don't await expects, await what is occuring inside them if you need to\n  expect(await allElems[0].getText()).to.eventually.equal('12345');\n\n  for (let i = 0; i &lt; allElems.length; i++) {\n    let item = allElems[i];\n\n    //Save the result of the getText to a variable\n    let itemText = await item.getText();\n    console.log(itemText);\n\n    if (itemText === '12345') {\n      await this.wait(10000);\n\n      //No need to return the click, we can await it here\n      await item.click();\n    } else {\n      console.log('else is being hit');\n  }\n}\n</code></pre>\n\n<p>Note: I have not tested this code but the logic should be correct</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4319414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3276678f0bfed51d2e8baf181473a382?s=128&d=identicon&r=PG&f=1", "display_name": "user4319414", "link": "https://stackoverflow.com/users/4319414/user4319414"}, "is_accepted": false, "score": 0, "last_activity_date": 1559145386, "creation_date": 1559145386, "answer_id": 56364463, "question_id": 56360387, "link": "https://stackoverflow.com/questions/56360387/protractor-not-able-to-click-the-element-while-iterating-the-list-of-elements/56364463#56364463", "title": "Protractor Not able to click the element While iterating the list of Elements", "body": "<p>Executable code:</p>\n\n<p>async clickClaimIDFromList() {</p>\n\n<pre><code>    const allElems = await element.all(by.xpath('//*[@data-qa=\"dashboard.claim\"]'));\n\n\n    for (let i = 0; i &lt; allElems.length; i++) {\n        const item = allElems[i];\n\n        // Save the result of the getText to a variable\n        const itemText = await item.getText();\n        console.log(itemText);\n\n        if (itemText === '123124214') {\n            await this.wait(10000);\n\n            // No need to return the click, we can await it here\n            await item.click();\n        } else {\n            console.log('else is being hit');\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4319414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3276678f0bfed51d2e8baf181473a382?s=128&d=identicon&r=PG&f=1", "display_name": "user4319414", "link": "https://stackoverflow.com/users/4319414/user4319414"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1559145386, "creation_date": 1559132046, "question_id": 56360387, "link": "https://stackoverflow.com/questions/56360387/protractor-not-able-to-click-the-element-while-iterating-the-list-of-elements", "title": "Protractor Not able to click the element While iterating the list of Elements", "body": "<p>clickClaimIDFromList(claimId) {</p>\n\n<pre><code>   element.all(by.xpath('//*[@data-qa=\"dashboard.claim\"]')).then(async (items) =&gt; {\n            // console.log(items[0].getText());\n            await expect(items[0].getText()).to.eventually.equal('12345');\n\n            items.forEach(item =&gt; {\n                     item.getText().then(async (text) =&gt; {\n                            if (text === '12345') {\n                                await console.log(item.getText());\n                                await this.wait(10000);\n                                return item.click();\n                            }\n                        }\n                    );\n                }\n            );\n        }\n\n\n     );\n\n}\n</code></pre>\n\n<p>This code is getting executed successfully with out clicking the element. Could some one help me to rewrite it?</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "fullcalendar"], "comments": [{"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 2, "creation_date": 1559205428, "post_id": 56360168, "comment_id": 99350616, "body": "<code>.find()</code> is a <a href=\"https://api.jquery.com/find/\" rel=\"nofollow noreferrer\">jQuery function</a>. <code>arg.el</code> is not a jQuery object, it&#39;s a standard DOM element. You&#39;d have to wrap that in a jQuery constructor if you want to use jQuery functions on it. <code>$(arg.el).find(</code>... (assuming you&#39;ve got jQuery loaded in your page)."}], "owner": {"reputation": 1092, "user_id": 9704258, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-654VJ8ELdlo/AAAAAAAAAAI/AAAAAAAAAEU/gZhtwxhQkB4/photo.jpg?sz=128", "display_name": "RCohen", "link": "https://stackoverflow.com/users/9704258/rcohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1559131289, "creation_date": 1559131289, "question_id": 56360168, "link": "https://stackoverflow.com/questions/56360168/fullcalendar-add-icon-to-event-with-eventrender", "title": "Fullcalendar - Add icon to event with eventRender", "body": "<p>I'm trying to add an svg icon using <code>import { GoMail } from \"react-icons/go\";</code>. Unfortunately I can't seem to find an accurate way to add this to my injected html elements. Besides, I have the following error:</p>\n\n<blockquote>\n  <p>arg.el.find is not a function</p>\n</blockquote>\n\n<p>Which type I should use for el parameter in typescript and how can I work with react-icons for Fullcalendar?</p>\n\n<pre><code>onEventRender = (arg: {event: EventApi; el: HTMLElement; view: View;}) =&gt; {\n    const start = arg.event.start ? moment(arg.event.start).format('LT') : null\n    const end = arg.event.end ? moment(arg.event.end).format('LT') : null\n    const event:any = arg.event\n    const eventRecurrenceType = event.extendedProps.recurrenceType\n\n    if (eventRecurrenceType) {\n\n        const icon = &lt;GoMail/&gt;;\n        arg.el.find('.noteContainer').append(icon);\n\n        const notes = `&lt;div class=${styles.noteContainer}&gt;\n                        &lt;div class=${styles.numberOfNotes}&gt;20&lt;/div&gt;\n                        &lt;div class=${styles.noteIcon}&gt;${icon}&lt;/div&gt;\n                       &lt;/div&gt;`\n\n        const eventDetails = `&lt;div class=${styles.eventContainer}&gt; \n                                &lt;div&gt;${start}-${end}&lt;/div&gt;\n                                ${notes}\n                              &lt;/div&gt;`\n\n        const title = `&lt;div class=${styles.eventTitle}&gt;${arg.event.title}&lt;/div&gt;`\n\n        const recurrence = `&lt;div&gt;${eventRecurrenceType}&lt;/div&gt;`\n\n        arg.el.innerHTML = eventDetails + title + recurrence\n    }\n\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["angular", "typescript", "rxjs", "observable", "angular7"], "comments": [{"owner": {"reputation": 18716, "user_id": 3669981, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/WWWHe.png?s=128&g=1", "display_name": "TheUnreal", "link": "https://stackoverflow.com/users/3669981/theunreal"}, "edited": false, "score": 5, "creation_date": 1559131353, "post_id": 56360139, "comment_id": 99323619, "body": "It&#39;s <code>data.employees</code> not <code>data.employee</code>."}, {"owner": {"reputation": 15822, "user_id": 4399281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkroG.jpg?s=128&g=1", "display_name": "Fateh Mohamed", "link": "https://stackoverflow.com/users/4399281/fateh-mohamed"}, "edited": false, "score": 0, "creation_date": 1559131816, "post_id": 56360139, "comment_id": 99323911, "body": "and data.addresses not data.address"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1559131906, "post_id": 56360139, "comment_id": 99323970, "body": "Please use a debugger before you post questions. Adding a simple <code>debugger;</code> and taking a look at what is happening will help you a lot in the future."}, {"owner": {"reputation": 599, "user_id": 5556073, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fd648063fa1e6aa2a209c31912e389f4?s=128&d=identicon&r=PG&f=1", "display_name": "Rehan", "link": "https://stackoverflow.com/users/5556073/rehan"}, "edited": false, "score": 0, "creation_date": 1559131965, "post_id": 56360139, "comment_id": 99323999, "body": "Thanks a lot guys :)..it solved the problem. Just a question. even using data.employee  should call the getter right? Which will return the data.employees"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1559132176, "post_id": 56360139, "comment_id": 99324106, "body": "@Reactgular no need for a <code>debugger</code>, just a <code>console.log</code> is enough"}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 1, "creation_date": 1559132212, "post_id": 56360139, "comment_id": 99324127, "body": "@Maryannah true, but if we could get more people to use <code>debugger;</code> the quality of questions here would go up. ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 1, "creation_date": 1559132716, "post_id": 56360139, "comment_id": 99324457, "body": "@Reactgular can&#39;t agree more ! <a href=\"https://blog.angularindepth.com/embrace-yourself-angular-8-is-coming-1bf187c8f0bf\" rel=\"nofollow noreferrer\">But template debugging is coming</a> so we got that going, which is nice :)"}], "answers": [{"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": true, "score": 2, "last_activity_date": 1559135337, "creation_date": 1559135337, "answer_id": 56361429, "question_id": 56360139, "link": "https://stackoverflow.com/questions/56360139/get-data-from-observable-in-angular-7/56361429#56361429", "title": "Get data from Observable in Angular 7", "body": "<p>You don't really need to put in all that redundant logic in the <code>getData()</code> method.</p>\n\n<p>How about simplifying your implementation like this:</p>\n\n<pre><code>import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nexport class Employee {\n  empId: string;\n  name: string;\n  designation: string;\n  salary: number;\n}\n\nexport class Address {\n  city: string;\n}\n\nexport class EmployeeDetail {\n  employees: Employee[];\n  addresses: Address[];\n}\n\n@Injectable()\nexport class EmployeeService {\n\n  constructor(private http: HttpClient) {}\n\n  getEmployeeData(): Observable &lt; EmployeeDetail &gt; {\n    return this.http.get &lt; EmployeeDetail &gt; ('/assets/employees.json');\n  }\n\n}\n</code></pre>\n\n<hr>\n\n<p>We just specify the <code>T</code> of the <code>get</code> method on the <code>HttpClient</code> to <code>EmployeeDetail</code> and return whatever this method returns. This would return an <code>Observable</code> wrapping a value of type <code>EmployeeDetail</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>Here's a <strong><a href=\"https://stackblitz.com/edit/simplifying-data-fetch-and-assignment-in-angular?file=src/app/employee.service.ts\" rel=\"nofollow noreferrer\">Working Sample StackBlitz</a></strong> for your ref.</p>\n</blockquote>\n"}], "owner": {"reputation": 599, "user_id": 5556073, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fd648063fa1e6aa2a209c31912e389f4?s=128&d=identicon&r=PG&f=1", "display_name": "Rehan", "link": "https://stackoverflow.com/users/5556073/rehan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "accepted_answer_id": 56361429, "answer_count": 1, "score": 0, "last_activity_date": 1559135337, "creation_date": 1559131207, "question_id": 56360139, "link": "https://stackoverflow.com/questions/56360139/get-data-from-observable-in-angular-7", "title": "Get data from Observable in Angular 7", "body": "<p>I am fairly new to  Angular. Trying to consume  data as follows from a GET REST Endpoint-</p>\n\n<pre><code>{\"employees\":[{\"empId\":\"1\",\"name\":\"emp1\",\"designation\":\"manager\",\"salary\":3000.0},{\"empId\":\"2\",\"name\":\"emp2\",\"designation\":\"developer\",\"salary\":3000.0}],\"addresses\":[{\"city\":\"London\"},{\"city\":\"Belgium\"}]}\n</code></pre>\n\n<p>It has two lists employees and addresses.\nIn angular i have created the classes as follows-</p>\n\n<pre><code>export class Employee {\n\n  constructor(\n\n  ) { }\n}\n\nexport class Address {\n\n  constructor(\n\n  ) { }\n}\n\n\n\nexport class EmployeeDetail {\n  public employees: Employee[];\n  public addresses: Address[];\n\n  constructor( ) { }\n  public get employee(): Employee[] {\n    return this.employees;\n  }\n\n  public get address(): Address[] {\n    return this.addresses;\n  }\n\n  public set address(addresses: Address[]){\n    this.addresses = addresses;\n}\n\n}\n</code></pre>\n\n<p>Trying to construct the EmployeeDetail class as follows-</p>\n\n<pre><code>getData() {\n    return this.httpClient.get&lt;EmployeeDetail&gt;('http://localhost:8080/employees')\n    .pipe(\n      map(data =&gt; {\n        const employeeList: Employee[] = [];\n        const addressList: Address[] = [];\n        var employeeDetail = new EmployeeDetail();\n        const newList1 : Employee[] = data.employee;\n        const newList2 : Address[] = data.address;\n        console.log(newList1);\n        newList1.forEach(item =&gt; \n          employeeList.push(Object.assign(new Employee(), item)));\n        newList2.forEach(item =&gt; \n          newList.push(Object.assign(new Address(), item)));  \n          employeeDetail.employee = employeeList;\n          employeeDetail.address = addressList;\n\n\n        return employeeDetail;\n      })\n   );\n</code></pre>\n\n<p>Getting following exception</p>\n\n<pre><code>TypeError: Cannot read property 'forEach' of undefined\n    at MapSubscriber.project (http-client.service.ts:119)\n    at MapSubscriber.push../node_modules/rxjs/_esm5/internal/operators/map.js.MapSubscriber._next (map.js:35)\n    at MapSubscriber.push../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber.next (Subscriber.js:54)\n    at MapSubscriber.push../node_modules/rxjs/_esm5/internal/operators/map.js.MapSubscriber._next (map.js:41)\n    at MapSubscriber.push../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber.next (Subscriber.js:54)\n    at FilterSubscriber.push../node_modules/rxjs/_esm5/internal/operators/filter.js.FilterSubscriber._next (filter.js:38)\n    at FilterSubscriber.push../node_modules/rxjs/_esm5/internal/Subscriber.js.Subscriber.next (Subscriber.js:54)\n</code></pre>\n\n<p>Could some one please help me create the EmployeeDetail object. Thanks</p>\n"}, {"tags": ["angular", "typescript", "ionic-framework", "ionic4"], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 1584725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b4af23cd0ebfb961c3ab01ffd884073?s=128&d=identicon&r=PG", "display_name": "Brett JB", "link": "https://stackoverflow.com/users/1584725/brett-jb"}, "edited": false, "score": 0, "creation_date": 1559143200, "post_id": 56360241, "comment_id": 99330830, "body": "I&#39;m sorry, I saw what you put there, and didn&#39;t understand how it could work, so I tried it and it doesn&#39;t. What you put there isn&#39;t a placeholder, but another option. Which duly appears in the list as another option. Just for further clarity the field is still blank at start up. - Are you using Ionic 4? does this work in some other version?"}], "tags": [], "owner": {"reputation": 1075, "user_id": 9178709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKq3p.jpg?s=128&g=1", "display_name": "Dmitry Sobolevsky", "link": "https://stackoverflow.com/users/9178709/dmitry-sobolevsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1559131516, "creation_date": 1559131516, "answer_id": 56360241, "question_id": 56360093, "link": "https://stackoverflow.com/questions/56360093/ion-select-set-start-value/56360241#56360241", "title": "ion-select set start value", "body": "<p>You can try to add already selected empty option with your placeholder:      </p>\n\n<pre><code>&lt;ion-select formControlName=\"Gender\"&gt;\n            &lt;ion-select-option value=\"\" selected=\"selected\" hidden=\"hidden\"&gt;Choose here&lt;/ion-select-option&gt;\n            &lt;ion-select-option value=\"3\"&gt;Female&lt;/ion-select-option&gt;\n            &lt;ion-select-option value=\"2\"&gt;Male&lt;/ion-select-option&gt;\n            &lt;ion-select-option value=\"1\"&gt;Other&lt;/ion-select-option&gt;\n            &lt;ion-select-option value=\"0\"&gt;Prefer Not to Say&lt;/ion-select-option&gt;\n&lt;/ion-select&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 396, "user_id": 1584725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b4af23cd0ebfb961c3ab01ffd884073?s=128&d=identicon&r=PG", "display_name": "Brett JB", "link": "https://stackoverflow.com/users/1584725/brett-jb"}, "is_accepted": true, "score": 0, "last_activity_date": 1559557788, "creation_date": 1559557788, "answer_id": 56425461, "question_id": 56360093, "link": "https://stackoverflow.com/questions/56360093/ion-select-set-start-value/56425461#56425461", "title": "ion-select set start value", "body": "<p>I have posted this as an answer in case anyone else fall into this.\nI am not sure if its due to an early release issue with the ionic 4 I have but I fixed it by re-ordering the ion-select line.</p>\n\n<pre><code> &lt;ion-select placeholder=\"Select One\" value = {{userDetailsForm.value.Gender}} formControlName=\"Gender\" &gt;\n    &lt;ion-select-option value=\"3\"&gt;Female&lt;/ion-select-option&gt;\n    &lt;ion-select-option value=\"2\"&gt;Male&lt;/ion-select-option&gt;\n    &lt;ion-select-option value=\"1\"&gt;Other&lt;/ion-select-option&gt;\n    &lt;ion-select-option value=\"0\"&gt;Prefer Not to Say&lt;/ion-select-option&gt;\n &lt;/ion-select&gt;\n</code></pre>\n\n<p>placing the 'value = xxx' before the 'formControlName = yyyy' fixed it.\nThis is a weird one...</p>\n"}], "owner": {"reputation": 396, "user_id": 1584725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3b4af23cd0ebfb961c3ab01ffd884073?s=128&d=identicon&r=PG", "display_name": "Brett JB", "link": "https://stackoverflow.com/users/1584725/brett-jb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "accepted_answer_id": 56425461, "answer_count": 2, "score": 0, "last_activity_date": 1559557788, "creation_date": 1559131067, "last_edit_date": 1559144337, "question_id": 56360093, "link": "https://stackoverflow.com/questions/56360093/ion-select-set-start-value", "title": "ion-select set start value", "body": "<p>I am trying to set the initial data displayed for an Ion-select.\nI have narrowed it down to this simplest example although I have it in another situation too. Most of the questions here seem to be using [ngModel] which I don't think I need because I am using an Angular Reactive form.\nThe html is:</p>\n\n<pre><code>  &lt;form [formGroup]=\"userDetailsForm\" (ngSubmit)=\"onSubmit()\"&gt;\n\n ... some stuff\n&lt;ion-item&gt;\n  &lt;ion-label&gt;Gender&lt;/ion-label&gt;\n  &lt;ion-select placeholder=\"Select One\" formControlName=\"Gender\"&gt;\n    &lt;ion-select-option value=\"3\"&gt;Female&lt;/ion-select-option&gt;\n    &lt;ion-select-option value=\"2\"&gt;Male&lt;/ion-select-option&gt;\n    &lt;ion-select-option value=\"1\"&gt;Other&lt;/ion-select-option&gt;\n    &lt;ion-select-option value=\"0\"&gt;Prefer Not to Say&lt;/ion-select-option&gt;\n &lt;/ion-select&gt;\n&lt;/ion-item&gt;\n\n ... more stuff\n&lt;ion-button expand=\"full\" type=\"submit\"&gt;Submit&lt;/ion-button&gt;\n\n&lt;/form&gt;\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code>  ngOnInit() {\n\n    this.userDetailsForm = this.formBuilder.group({\n    ... some stuff\n     Gender: [],\n    });\n    this.userService.getUserServer().subscribe (user =&gt; {\n      // console.log('Patching the form');\n      this.userDetailsForm.patchValue(user);\n      ... other irrelevant code\n    },\n      error =&gt; this.helper.showAlert('We cant connect to the server at the moment msg is:' + error)\n    );\n\n  }\n</code></pre>\n\n<p>The field is always showing empty (with the placeholder as shown), and I have also tried removing the placeholder and using:</p>\n\n<pre><code>      &lt;ion-select value =\"3\" formControlName=\"Gender\"&gt;\n</code></pre>\n\n<p>No matter what I try it won't show the default or what I set it to...\nSorry if this is obvious but what am I missing?\nMany thanks.</p>\n\n<p><strong>EDIT</strong>\nI have tried removing the <strong>formControlName=\"Gender\"</strong> part of it and now it works. Except of course it won't be part of the reactive form... I think this smells a bit buggy - I will continue to dig, meanwhile, any further thoughts welcome.</p>\n"}, {"tags": ["javascript", "angular", "typescript"], "comments": [{"owner": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 1, "creation_date": 1559131061, "post_id": 56360040, "comment_id": 99323456, "body": "Try <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax\" rel=\"nofollow noreferrer\">spreading</a> the array using <code>...</code> like this: <code>this.ipRecords.push(...JSON.parse</code>"}, {"owner": {"reputation": 8669, "user_id": 7124761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LwwM-Cj7GLE/AAAAAAAAAAI/AAAAAAAAAJw/32uCg85dMvg/photo.jpg?sz=128", "display_name": "Prashant Pimpale", "link": "https://stackoverflow.com/users/7124761/prashant-pimpale"}, "edited": false, "score": 0, "creation_date": 1559132077, "post_id": 56360040, "comment_id": 99324052, "body": "Can you provide sample Array in the form of Code?"}], "answers": [{"comments": [{"owner": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559132413, "post_id": 56360304, "comment_id": 99324242, "body": "<code>JSON.parse(JSON.stringify())</code> is probably for cloning <code>res.data</code>"}, {"owner": {"reputation": 1075, "user_id": 9178709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKq3p.jpg?s=128&g=1", "display_name": "Dmitry Sobolevsky", "link": "https://stackoverflow.com/users/9178709/dmitry-sobolevsky"}, "reply_to_user": {"reputation": 28101, "user_id": 3082296, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5eac8c095f63cb9fe29a9af3cb97eb0e?s=128&d=identicon&r=PG&f=1", "display_name": "adiga", "link": "https://stackoverflow.com/users/3082296/adiga"}, "edited": false, "score": 0, "creation_date": 1559132471, "post_id": 56360304, "comment_id": 99324282, "body": "yes, but why?)) this res might be come from observable"}, {"owner": {"reputation": 319, "user_id": 11384062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0469a2d1cf62968669986aa6a2163e?s=128&d=identicon&r=PG&f=1", "display_name": "zuyi", "link": "https://stackoverflow.com/users/11384062/zuyi"}, "edited": false, "score": 0, "creation_date": 1559132929, "post_id": 56360304, "comment_id": 99324586, "body": "yes i m using it because of an issue there is another array which needs to keep a copy of this if i dont use it then both array gets 2 copies  if the same pushed data as opposed to one"}], "tags": [], "owner": {"reputation": 1075, "user_id": 9178709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKq3p.jpg?s=128&g=1", "display_name": "Dmitry Sobolevsky", "link": "https://stackoverflow.com/users/9178709/dmitry-sobolevsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1559131774, "creation_date": 1559131774, "answer_id": 56360304, "question_id": 56360040, "link": "https://stackoverflow.com/questions/56360040/collection-of-array-objects-being-pushed-into-existing-array-in-the-same-index/56360304#56360304", "title": "Collection of array objects being pushed into existing array in the same index", "body": "<p>That's it:) use Array.prototype.concat or spread operator.<br>\nAnd why are you using so tricky stuff (JSON.parse(JSON.stringify))? </p>\n\n<pre><code> this.auth.fileUpload(fd).subscribe((res: any)=&gt;{\n        if(res.status===\"Success\"){\n          this.toastr.success(\"File Uploaded\");\n          this.ipRecords.push(...JSON.parse(JSON.stringify(res.data)));\n});\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 11384062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0469a2d1cf62968669986aa6a2163e?s=128&d=identicon&r=PG&f=1", "display_name": "zuyi", "link": "https://stackoverflow.com/users/11384062/zuyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559131774, "creation_date": 1559130891, "last_edit_date": 1559131506, "question_id": 56360040, "link": "https://stackoverflow.com/questions/56360040/collection-of-array-objects-being-pushed-into-existing-array-in-the-same-index", "title": "Collection of array objects being pushed into existing array in the same index", "body": "<p><a href=\"https://i.stack.imgur.com/kJmtg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kJmtg.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>ipRecords: any;\n\n this.auth.fileUpload(fd).subscribe((res: any)=&gt;{\n        if(res.status===\"Success\"){\n          this.toastr.success(\"File Uploaded\");\n          this.ipRecords.push(JSON.parse(JSON.stringify(res.data)));\n});\n</code></pre>\n\n<p>in the iprecords array when i push the new data it gets pushed in the same index 10. I want that items inside it should be pushed. this.ipRecords = res.data works fine but it overwrites the existing items</p>\n"}, {"tags": ["javascript", "typescript", "vue.js", "webpack", "directory-structure"], "answers": [{"tags": [], "owner": {"reputation": 4877, "user_id": 553825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/87f04a9e81b3d62aab4de5ca63156abc?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Bahrami", "link": "https://stackoverflow.com/users/553825/ali-bahrami"}, "is_accepted": true, "score": 2, "last_activity_date": 1559133885, "last_edit_date": 1559133885, "creation_date": 1559131790, "answer_id": 56360309, "question_id": 56359748, "link": "https://stackoverflow.com/questions/56359748/vue-typescript-recommended-folder-structure-convention-for-placing-custom-ty/56360309#56360309", "title": "Vue + TypeScript - Recommended folder structure convention for placing custom typings?", "body": "<p>According to TypeScript website, TypeScript automatically loads types in folders if you have referenced them in your code.</p>\n\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/tsconfig-json.html\" rel=\"nofollow noreferrer\">@types, typeRoots and types</a></p>\n\n<blockquote>\n  <p>By default all visible \u201c@types\u201d packages are included in your\n  compilation. Packages in node_modules/@types of any enclosing folder\n  are considered visible; specifically, that means packages within\n  ./node_modules/@types/, ../node_modules/@types/,\n  ../../node_modules/@types/, and so on.</p>\n  \n  <p>If typeRoots is specified, only packages under typeRoots will be\n  included. For example:</p>\n</blockquote>\n\n<pre><code>{\n   \"compilerOptions\": {\n       \"typeRoots\" : [\"./typings\"]\n   }\n}\n</code></pre>\n\n<blockquote>\n  <p>This config file will include all packages under ./typings, and no\n  packages from ./node_modules/@types</p>\n</blockquote>\n\n<p>You can easily test it like:</p>\n\n<pre><code>tc --init\n</code></pre>\n\n<p>Create a <code>index.d.ts</code> file inside <code>@types/index.d.ts</code>, and put code below in it:</p>\n\n<pre><code>declare interface Foo {\n    Bar: string;\n}\n</code></pre>\n\n<p>In the root folder, create a new <code>index.ts</code> file and inside your code-editor (Eg. VSCode), test it:</p>\n\n<pre><code>let foo:Foo;\nfoo. // you can see code-completion\n</code></pre>\n\n<p>p.s:\nIt doesn't matter if you put your code inside @types or not, TypeScript automatically will find them. You can manually define the path for typeRoots as well but don't forget to configure it to looks for @types inside <code>node_modules</code>.</p>\n"}], "owner": {"reputation": 4958, "user_id": 2442714, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/55b12c04062943aa0642157c28531d69?s=128&d=identicon&r=PG", "display_name": "ux.engineer", "link": "https://stackoverflow.com/users/2442714/ux-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 56360309, "answer_count": 1, "score": 0, "last_activity_date": 1559133885, "creation_date": 1559129953, "last_edit_date": 1559130607, "question_id": 56359748, "link": "https://stackoverflow.com/questions/56359748/vue-typescript-recommended-folder-structure-convention-for-placing-custom-ty", "title": "Vue + TypeScript - Recommended folder structure convention for placing custom typings?", "body": "<p>Is there a recommended convention in where to place your custom type definition files in a Vue project?</p>\n\n<p>I've been using a folder named <em>./src/types</em> with this kind of tsconfig:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    ...\n    \"typeRoots\": [\n      \"node_modules/@types\",\n      \"types\"\n    ]\n  }\n}\n</code></pre>\n\n<p>Somebody told me that Vue or Webpack would pick up files in <em>./@types/</em> folder automatically without needing to add this to <em>./tsconfig.json</em> - however, I did not find a reference to such information?</p>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 659, "user_id": 3909853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100002166568068/picture?type=large", "display_name": "Roland Jegorov", "link": "https://stackoverflow.com/users/3909853/roland-jegorov"}, "edited": false, "score": 0, "creation_date": 1559130758, "post_id": 56359864, "comment_id": 99323270, "body": "Thanks for the .answer. Hmm, that&#39;s interesting. Didn&#39;t know you can do it like this. Is this a common approach? Any issues you have encountered with this approach?"}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 659, "user_id": 3909853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100002166568068/picture?type=large", "display_name": "Roland Jegorov", "link": "https://stackoverflow.com/users/3909853/roland-jegorov"}, "edited": false, "score": 0, "creation_date": 1559130856, "post_id": 56359864, "comment_id": 99323322, "body": "@RolandJegorov have not used it much myself...but it should work.. if you have any issues let me know. I am certain there is no other way though :)"}, {"owner": {"reputation": 659, "user_id": 3909853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100002166568068/picture?type=large", "display_name": "Roland Jegorov", "link": "https://stackoverflow.com/users/3909853/roland-jegorov"}, "edited": false, "score": 0, "creation_date": 1559131070, "post_id": 56359864, "comment_id": 99323464, "body": "Alright, thanks. I will keep this open for a day or two and then if nothing else comes up, accept your answer. :)"}, {"owner": {"reputation": 659, "user_id": 3909853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100002166568068/picture?type=large", "display_name": "Roland Jegorov", "link": "https://stackoverflow.com/users/3909853/roland-jegorov"}, "edited": false, "score": 0, "creation_date": 1559131456, "post_id": 56359864, "comment_id": 99323692, "body": "Also, just to add to the strict signature enforcing point I wrote above, it seems that any type of an argument will be valid as long as it&#39;s a subset of the abstract classes method signature. <code>string | number and string</code> I hope I explained it clear enough."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 659, "user_id": 3909853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100002166568068/picture?type=large", "display_name": "Roland Jegorov", "link": "https://stackoverflow.com/users/3909853/roland-jegorov"}, "edited": false, "score": 0, "creation_date": 1559131668, "post_id": 56359864, "comment_id": 99323823, "body": "@RolandJegorov Yes, that is true, there is no way to prevent that unfortunately."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1559130274, "creation_date": 1559130274, "answer_id": 56359864, "question_id": 56359673, "link": "https://stackoverflow.com/questions/56359673/subclass-method-signature-inference/56359864#56359864", "title": "Subclass method signature inference", "body": "<p>Typescript will not infer method parameters from base class. The way it works is that after the class is typed, the class is checked for compatibility with the base class. This mean that a parameter in a derived class can be of a derived type (this is not sound but class method parameters relate bivariantly even under strict null checks).</p>\n\n<p>One thing that can be done to reduce the amount of type duplication is to use <code>Parameters</code> with rest parameter destructuring. </p>\n\n<pre><code>export abstract class AbstractFiller {\n    public abstract fill(data: number | string | boolean | Date, numberOfFillers: number): string;\n}\n\nexport class WhiteSpacesFiller extends AbstractFiller {\n    public fill(...[data, numberOfFillers]: Parameters&lt;AbstractFiller['fill']&gt;): string {\n        return \"\"\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 659, "user_id": 3909853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100002166568068/picture?type=large", "display_name": "Roland Jegorov", "link": "https://stackoverflow.com/users/3909853/roland-jegorov"}, "edited": false, "score": 0, "creation_date": 1559130704, "post_id": 56359867, "comment_id": 99323245, "body": "Hey, thanks for the answer. My point was more to be able to do something like  <code>public fill(data, numberOfFillers)</code>. Also, here it seems that the duplication was moved rather than eliminated."}], "tags": [], "owner": {"reputation": 4723, "user_id": 3061857, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/m8l4z.jpg?s=128&g=1", "display_name": "nbokmans", "link": "https://stackoverflow.com/users/3061857/nbokmans"}, "is_accepted": false, "score": 0, "last_activity_date": 1559130281, "creation_date": 1559130281, "answer_id": 56359867, "question_id": 56359673, "link": "https://stackoverflow.com/questions/56359673/subclass-method-signature-inference/56359867#56359867", "title": "Subclass method signature inference", "body": "<p>Excuse me if I misunderstand the question, but I think you can solve your problem with generics i.e. have your <code>AbstractFiller</code> class be generic.</p>\n\n<p>That would look something like this:</p>\n\n<pre><code>export abstract class AbstractFiller&lt;T&gt; {\n    public abstract fill(data: T, numberOfFillers: number): string;\n}\n\nexport class WhiteSpacesFiller extends AbstractFiller&lt;string&gt; {\n    public fill(data: string, numberOfFillers: number) {\n        //logic\n        return data;\n    }\n} \n\nexport class ZerosFiller extends AbstractFiller&lt;number&gt; {\n    public fill(data: number, numberOfFillers: number) {\n        return data.toString();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 659, "user_id": 3909853, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100002166568068/picture?type=large", "display_name": "Roland Jegorov", "link": "https://stackoverflow.com/users/3909853/roland-jegorov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 56359864, "answer_count": 2, "score": 2, "last_activity_date": 1559130281, "creation_date": 1559129718, "question_id": 56359673, "link": "https://stackoverflow.com/questions/56359673/subclass-method-signature-inference", "title": "Subclass method signature inference", "body": "<p>I have the following abstract class</p>\n\n<pre><code>// AbstractFiller.ts\nexport abstract class AbstractFiller {\n   public abstract fill(data: number | string | boolean | Date, numberOfFillers: number): string;\n}\n</code></pre>\n\n<p>and several filler subclasses</p>\n\n<pre><code>export class WhiteSpacesFiller extends AbstractFiller {\n  public fill(data: number | string | boolean | Date, numberOfFillers: number): string {\n    // logic\n  }\n}\n\nexport class ZerosFiller extends AbstractFiller {\n  public fill(data: number | string | boolean | Date,  numberOfFillers: number): string {\n    // logic\n  }\n}\n\n// ...etc\n</code></pre>\n\n<p>Is there a way that TS would infer the method signature from the abstract class so that I have:</p>\n\n<ol>\n<li>No type duplication in every subclass</li>\n<li>Strict signature enforcing e.g. removing <code>number</code> from the type of <code>data</code> in a subclass will <strong>not</strong> throw an error.</li>\n</ol>\n"}, {"tags": ["angular", "typescript", "angular7"], "answers": [{"comments": [{"owner": {"reputation": 1207, "user_id": 1507955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnWmA.jpg?s=128&g=1", "display_name": "Mark Verkiel", "link": "https://stackoverflow.com/users/1507955/mark-verkiel"}, "reply_to_user": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "edited": false, "score": 0, "creation_date": 1559132551, "post_id": 56360226, "comment_id": 99324332, "body": "@GiovanniTerlingen This will only work well with one request at the time. When handling multiple calls and authentication errors your <code>refreshToken</code> method will be called multiple times as well."}, {"owner": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "reply_to_user": {"reputation": 1207, "user_id": 1507955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnWmA.jpg?s=128&g=1", "display_name": "Mark Verkiel", "link": "https://stackoverflow.com/users/1507955/mark-verkiel"}, "edited": false, "score": 0, "creation_date": 1559132625, "post_id": 56360226, "comment_id": 99324394, "body": "@Pilatus, interesting. What can I do against that? Feel free to add your answer."}, {"owner": {"reputation": 3190, "user_id": 4551323, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e877dee94c068df58fe28b260b7fe46f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.wiseguy", "link": "https://stackoverflow.com/users/4551323/mr-wiseguy"}, "edited": false, "score": 0, "creation_date": 1559133355, "post_id": 56360226, "comment_id": 99324868, "body": "You could put the token into a behaviorsubject (this way you can still return an observable and have the latest value). Next to that you should refresh your token automatically (after x minutes, but before it expires. see <a href=\"https://auth0.com/docs/quickstart/spa/angular2/05-token-renewal\" rel=\"nofollow noreferrer\">auth0.com/docs/quickstart/spa/angular2/05-token-renewal</a> for an code example)"}, {"owner": {"reputation": 1207, "user_id": 1507955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnWmA.jpg?s=128&g=1", "display_name": "Mark Verkiel", "link": "https://stackoverflow.com/users/1507955/mark-verkiel"}, "reply_to_user": {"reputation": 3190, "user_id": 4551323, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e877dee94c068df58fe28b260b7fe46f?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.wiseguy", "link": "https://stackoverflow.com/users/4551323/mr-wiseguy"}, "edited": false, "score": 0, "creation_date": 1559133984, "post_id": 56360226, "comment_id": 99325255, "body": "@Mr.wiseguy you are correct, the only problem is when the user returns after the token expires. The requests made in the <code>intercepter</code> still have to wait for the initial <code>refreshtoken</code> call."}], "tags": [], "owner": {"reputation": 151, "user_id": 4499940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gb6DJ.jpg?s=128&g=1", "display_name": "Arwin", "link": "https://stackoverflow.com/users/4499940/arwin"}, "is_accepted": true, "score": 6, "last_activity_date": 1559132887, "last_edit_date": 1559132887, "creation_date": 1559131463, "answer_id": 56360226, "question_id": 56359671, "link": "https://stackoverflow.com/questions/56359671/angular-7-await-function-in-interceptor/56360226#56360226", "title": "Angular 7: Await function in interceptor", "body": "<p>Instead of trying to return an async promise you should convert your promise to an observable using the RxJS 'from' operator as described in this post: <a href=\"https://stackoverflow.com/questions/39319279/convert-promise-to-observable\">Convert promise to observable</a>.</p>\n\n<p>This will result in a correct return type of Observable> for your interceptor.</p>\n\n<p>Your code would look like something like the following (assuming you only send one request at a time):</p>\n\n<pre><code>intercept(request: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    return next.handle(request).pipe(\n        catchError(err =&gt; {\n            if (err.status === 401) {\n                let user = localStorage.getItem('currentUser');\n                if (!user) {\n                    this.logout(false);\n                    return throwError(err.error);\n                }\n                let currentUser = JSON.parse(user);\n                if (!currentUser || !currentUser.stsTokenManager || !currentUser.stsTokenManager.accessToken) {\n                    this.logout(false);\n                    return throwError(err.error);\n                }\n                // Return a newly created function here\n                return this.refreshToken(currentUser, request, next);\n            }\n            this.alertService.showAlert({\n                text: 'Fout tijdens het verzenden van het verzoek',\n            });\n            return throwError(err.error);\n        })\n    );\n}\n\nrefreshToken(currentUser: any, request: any, next: any) {\n    // By making use of the from operator of RxJS convert the promise to an observable\n    return from(this.authService.getToken(currentUser, true)).pipe(\n        switchMap(t =&gt; this.updateTokenAndRetry(request, next, currentUser, t))\n    )\n}\n\nupdateTokenAndRetry(request: HttpRequest&lt;any&gt;, next: HttpHandler, currentUser: any, token: string): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    // Update local stored user\n    currentUser.stsTokenManager.accessToken = token;\n    localStorage.setItem('currentUser', JSON.stringify(currentUser));\n\n    // Add the new token to the request\n    request = request.clone({\n        setHeaders: {\n            Authorization: token,\n        },\n    });\n\n    return next.handle(request);\n}\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 1207, "user_id": 1507955, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NnWmA.jpg?s=128&g=1", "display_name": "Mark Verkiel", "link": "https://stackoverflow.com/users/1507955/mark-verkiel"}, "is_accepted": false, "score": 1, "last_activity_date": 1559134737, "creation_date": 1559134737, "answer_id": 56361258, "question_id": 56359671, "link": "https://stackoverflow.com/questions/56359671/angular-7-await-function-in-interceptor/56361258#56361258", "title": "Angular 7: Await function in interceptor", "body": "<p>Arwin solution works well, but only in an environment where one request is send at the time.</p>\n\n<p>In order to get this to work save the <code>refreshToken</code> method into an <code>Observable</code> with the pipe <code>share</code>. This will allow multiple subscribers but a single result.</p>\n\n<p>Wrap the <code>next.handle(request)</code> method in another <code>Subject&lt;any&gt;</code> and return the subject. \nIf the request fires an error call that isn't a <code>401</code> error call <code>subject.error</code>.</p>\n\n<p>After refreshing the token call <code>this.updateTokenAndRetry(request, next, currentUser, token).subscribe(result =&gt; subject.next(result);</code> to make sure that the request is returned to the initial subscriber.</p>\n\n<p>Below code is pseudo code and should work in your case.</p>\n\n<pre><code>refreshTokenObservable: Observable&lt;any&gt;;\n\nintercept(request: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n\n    let subject = new Subject&lt;any&gt;();\n\n    next.handle(request).pipe(\n        catchError(err =&gt; {\n            if (err.status === 401) {\n                let user = localStorage.getItem('currentUser');\n                if (!user) {\n                    this.logout(false);\n                    subject.error(err.error);\n                    return;\n                }\n                let currentUser = JSON.parse(user);\n                if (!currentUser || !currentUser.stsTokenManager || !currentUser.stsTokenManager.accessToken) {\n                    this.logout(false);\n                    subject.error(err.error);\n                    return;\n                }\n                // Return a newly created function here\n                this.refreshToken(currentUser).subscribe(token =&gt; {\n\n                    this.updateTokenAndRetry(request, next, currentUser, token).subscribe(result =&gt; subject.next(result);\n                    this.refreshTokenObservable = null; // clear observable for next failed login attempt\n                });\n            }\n            this.alertService.showAlert({\n                text: 'Fout tijdens het verzenden van het verzoek',\n            });\n            subject.error(err.error);\n        })\n    ).subscribe(result =&gt; subject.next(result));\n\n    return subject.asObservable();\n}\n\nrefreshToken(currentUser: any) {\n\n    if(this.refreshTokenObservable == null)\n    {\n        // By making use of the from operator of RxJS convert the promise to an observable\n        this.refreshTokenObservable = from(this.authService.getToken(currentUser, true)).pipe(share());\n    }\n\n    return this.refreshTokenObservable;\n}\n\nupdateTokenAndRetry(request: HttpRequest&lt;any&gt;, next: HttpHandler, currentUser: any, token: string): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    // Update local stored user\n    currentUser.stsTokenManager.accessToken = token;\n    localStorage.setItem('currentUser', JSON.stringify(currentUser));\n\n    // Add the new token to the request\n    request = request.clone({\n        setHeaders: {\n            Authorization: token,\n        },\n    });\n\n    return next.handle(request);\n}\n</code></pre>\n"}], "owner": {"reputation": 5955, "user_id": 5457878, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/b3uR6.jpg?s=128&g=1", "display_name": "Giovanni", "link": "https://stackoverflow.com/users/5457878/giovanni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 1, "accepted_answer_id": 56360226, "answer_count": 2, "score": 4, "last_activity_date": 1559134737, "creation_date": 1559129716, "question_id": 56359671, "link": "https://stackoverflow.com/questions/56359671/angular-7-await-function-in-interceptor", "title": "Angular 7: Await function in interceptor", "body": "<p>I have built an error interceptor in my first Angular application which is all new for me. The interceptor tries to refresh a Firebase authorization token when a <code>401</code> response code occures. Therefore I have written the following code:</p>\n\n<pre><code>@Injectable()\nexport class ErrorInterceptor implements HttpInterceptor {\nconstructor(private authService: AuthService, private alertService: AlertService) { }\n\nintercept(request: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    return next.handle(request).pipe(\n        catchError(err =&gt; {\n            if (err.status === 401) {\n                let user = localStorage.getItem('currentUser');\n                if (!user) {\n                    this.logout(false);\n                    return throwError(err.error);\n                }\n                let currentUser = JSON.parse(user);\n                if (!currentUser || !currentUser.stsTokenManager || !currentUser.stsTokenManager.accessToken) {\n                    this.logout(false);\n                    return throwError(err.error);\n                }\n                const reference = this;\n                this.authService.getToken(currentUser, true).then(t =&gt; {\n                    // How do I await and return this properly?\n                    return reference.updateTokenAndRetry(request, next, currentUser, t);\n                }); // Get token and refresh\n            }\n            this.alertService.showAlert({\n                text: 'Fout tijdens het verzenden van het verzoek',\n            });\n            return throwError(err.error);\n        })\n    );\n}\n\nupdateTokenAndRetry(request: HttpRequest&lt;any&gt;, next: HttpHandler, currentUser: any, token: string): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    // Update local stored user\n    currentUser.stsTokenManager.accessToken = token;\n    localStorage.setItem('currentUser', JSON.stringify(currentUser));\n\n    // Add the new token to the request\n    request = request.clone({\n        setHeaders: {\n            Authorization: token,\n        },\n    });\n\n    return next.handle(request);\n}\n</code></pre>\n\n<p>The token gets refreshed fine. However the network call is not being executed after the refresh, which <code>reference.updateTokenAndRetry(request, next, currentUser, t);</code> should do.</p>\n\n<p>I assume the reason for this, is that <code>this.authService.getToken(currentUser, true)</code> returns a <code>Promise</code> (this is the Firebase plugin and can't be changed). I want to return <code>return reference.updateTokenAndRetry(request, next, currentUser, t);</code> but this is not possible since it's in an async function block.</p>\n\n<p>How can I await or return the next network call? I can't make the <code>intercept</code> function <code>async</code>. I am pretty stuck at this point.</p>\n"}, {"tags": ["angular", "forms", "typescript", "http-post", "angular-reactive-forms"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559129778, "post_id": 56359539, "comment_id": 99322730, "body": "How would you suggest me to do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559129836, "post_id": 56359539, "comment_id": 99322761, "body": "@Nebula give it a fallback value : <code>createdBy: billingForm.email: billingForm &amp;&amp; billingForm.meail || &#39;defaultvalue&#39;</code>"}, {"owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559130219, "post_id": 56359539, "comment_id": 99322972, "body": "I get a lot of red underlines by writing it like that. I might misurdestood what you meant"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "reply_to_user": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559130374, "post_id": 56359539, "comment_id": 99323061, "body": "<code>createdBy: billingForm &amp;&amp; billingForm.meail || &#39;defaultvalue&#39;</code>. @Nebula, sorry, forgot to delete the first part  !"}, {"owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559130569, "post_id": 56359539, "comment_id": 99323168, "body": "ok, that seems to be taking the &#39;defaultvalue&#39; string and not the email that I write in my form. But the errors are gone at least. What am I missing?"}, {"owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559130813, "post_id": 56359539, "comment_id": 99323296, "body": "I see. So why is it not taking the values from the form?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": false, "score": 0, "last_activity_date": 1559129246, "creation_date": 1559129246, "answer_id": 56359539, "question_id": 56359488, "link": "https://stackoverflow.com/questions/56359488/how-to-fix-cannot-read-property-of-undefined-error-in-angular-post-request/56359539#56359539", "title": "How to fix &#39;Cannot read property of undefined&#39; error in Angular post request", "body": "<pre><code>  newOrder(billingForm: BillingForm ): Order {\n    return {\n      companyId: 6,\n      created: moment().locale(\"sv\").format(\"YYYY-MM-DDTLTS\"),\n      createdBy: billingForm.email, // &lt;--- HERE\n      paymentMethod: billingForm.paymentMethod, // &lt;--- HERE\n      totalPrice: this.totalPrice,\n      status: 0,\n      orderRows: this.orderRows\n\n    }\n  }\n</code></pre>\n\n<p>The two lines depend on <code>billingForm</code>, and it seems that this <code>billingForm</code> doesn't have the <code>email</code> &amp; <code>paymentMethod</code> values. Log it to be sure. </p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559129951, "post_id": 56359679, "comment_id": 99322822, "body": "Even if I switch to &#39;onSubmit(shippingForm)&#39; the result is the same"}], "tags": [], "owner": {"reputation": 9616, "user_id": 7194268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def585555f060fee8dcc065f270e403b?s=128&d=identicon&r=PG&f=1", "display_name": "mbojko", "link": "https://stackoverflow.com/users/7194268/mbojko"}, "is_accepted": false, "score": 0, "last_activity_date": 1559129738, "creation_date": 1559129738, "answer_id": 56359679, "question_id": 56359488, "link": "https://stackoverflow.com/questions/56359488/how-to-fix-cannot-read-property-of-undefined-error-in-angular-post-request/56359679#56359679", "title": "How to fix &#39;Cannot read property of undefined&#39; error in Angular post request", "body": "<pre><code>&lt;form [formGroup]=\"shippingForm\" (ngSubmit)=\"onSubmit(billingForm)\"&gt;\n</code></pre>\n\n<p>Correct me if I'm wrong, but this <code>billingForm</code> is nowhere defined. So <code>onSubmit</code> method gets called with <code>undefined</code> as argument. </p>\n\n<p><code>shippingForm</code> is defined (and it's the one connected to the template), I'm guessing you meant <code>onSubmit(shippingForm)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559131691, "post_id": 56360229, "comment_id": 99323832, "body": "Property &#39;value&#39; does not exist on type &#39;BillingForm&#39;"}, {"owner": {"reputation": 141, "user_id": 2782884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39e09b9a80da5232f928b0c37be3fe88?s=128&d=identicon&r=PG&f=1", "display_name": "Gowthamr.cs", "link": "https://stackoverflow.com/users/2782884/gowthamr-cs"}, "reply_to_user": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559132103, "post_id": 56360229, "comment_id": 99324062, "body": "If you need values from the form you are submitting then you should access shipping form values like : this.shippingForm.value.email and this.shippingForm.value.paymentMethod"}, {"owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "edited": false, "score": 0, "creation_date": 1559132552, "post_id": 56360229, "comment_id": 99324333, "body": "omg! That works. It was so obvious! Thanks very much for your help!"}], "tags": [], "owner": {"reputation": 141, "user_id": 2782884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39e09b9a80da5232f928b0c37be3fe88?s=128&d=identicon&r=PG&f=1", "display_name": "Gowthamr.cs", "link": "https://stackoverflow.com/users/2782884/gowthamr-cs"}, "is_accepted": true, "score": 0, "last_activity_date": 1559131479, "creation_date": 1559131479, "answer_id": 56360229, "question_id": 56359488, "link": "https://stackoverflow.com/questions/56359488/how-to-fix-cannot-read-property-of-undefined-error-in-angular-post-request/56360229#56360229", "title": "How to fix &#39;Cannot read property of undefined&#39; error in Angular post request", "body": "<p>Try with below code in newOrder function.</p>\n\n<p>createdBy: billingForm.<strong>value</strong>.email,</p>\n\n<p>paymentMethod: billingForm.<strong>value</strong>.paymentMethod,</p>\n"}], "owner": {"reputation": 15, "user_id": 11441155, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RkjeKKu0zJY/AAAAAAAAAAI/AAAAAAAALGU/1-3GVNoj-t8/photo.jpg?sz=128", "display_name": "Nebula", "link": "https://stackoverflow.com/users/11441155/nebula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 0, "accepted_answer_id": 56360229, "answer_count": 3, "score": 0, "last_activity_date": 1559131479, "creation_date": 1559129099, "question_id": 56359488, "link": "https://stackoverflow.com/questions/56359488/how-to-fix-cannot-read-property-of-undefined-error-in-angular-post-request", "title": "How to fix &#39;Cannot read property of undefined&#39; error in Angular post request", "body": "<p>I'm getting these errors and I'm not sure how to fix it. I am making a form that will make a post request to an API.</p>\n\n<h3>ERROR TypeError: Cannot read property 'email' of undefined</h3>\n\n<h3>ERROR TypeError: Cannot read property 'paymentMethod' of undefined</h3>\n\n<p>I am expecting:</p>\n\n<pre><code>createdBy: string from email input,\npaymentMethod: string from paymentMethod select input,\n</code></pre>\n\n<p>But what I get is:</p>\n\n<pre><code>createdBy: null,\npaymentMethod: null\n</code></pre>\n\n<p>Interfaces </p>\n\n<pre><code>export interface BillingForm {\n    fullName: string;\n    email: string;\n    address: string;\n    city: string;\n    paymentMethod: string;\n\n  }\n\nexport interface Order {\n  id?: number;\n  companyId: number;\n  created: string;\n  createdBy: string;\n  paymentMethod: string;\n  totalPrice: number;\n  status: number;\n  orderRows: OrderRows[];\n}\n</code></pre>\n\n<p>service.ts </p>\n\n<pre><code>public postOrder(order: Order): Observable&lt;Order&gt; {\n      console.log(order);\n      return this.http.post&lt;Order&gt;(this.ordersURL, order, httpOptions).pipe(\n        catchError(this.handleError('postOrder', order))\n      );\n</code></pre>\n\n<p>component.ts</p>\n\n<pre><code>ngOnInit() {\n\n    this.shippingForm = this.formBuilder.group({\n      name: ['', Validators.required],\n      email: ['', Validators.required],\n      address: ['', Validators.required],\n      paymentMethod: ['', Validators.required],\n      city: ['', Validators.required],\n    })\n  }\n\n\n  onSubmit(billingForm: BillingForm) {\n    const order = this.newOrder(billingForm);\n\n    this.productService.postOrder(order).subscribe (\n      response =&gt; console.log('success', response),\n      error =&gt; console.log('error', error)\n    )\n\n    this.submitted = true;\n\n    if(this.shippingForm.invalid) {\n      return;\n    }\n    this.success = true;\n\n  }\n\n  newOrder(billingForm: BillingForm ): Order {\n    return {\n      companyId: 6,\n      created: moment().locale(\"sv\").format(\"YYYY-MM-DDTLTS\"),\n      createdBy: billingForm.email,\n      paymentMethod: billingForm.paymentMethod,\n      totalPrice: this.totalPrice,\n      status: 0,\n      orderRows: this.orderRows\n\n    }\n  }\n\n  get email() {\n    return this.shippingForm.get(\"email\") as FormControl;\n  }\n\n  get paymentMethod() {\n    return this.shippingForm.get(\"paymentMethod\") as FormControl;\n  }   \n\n</code></pre>\n\n<p>component.html</p>\n\n<pre><code>&lt;form [formGroup]=\"shippingForm\" (ngSubmit)=\"onSubmit(billingForm)\"&gt;\n        &lt;h5 *ngIf=\"success\"&gt;Your form is valid!&lt;/h5&gt;\n          &lt;div class=\"form-group col-md-6\"&gt;\n            &lt;label for=\"inputEmail\"&gt;Email&lt;/label&gt;\n            &lt;input type=\"email\" formControlName=\"email\" class=\"form-control\" id=\"inputEmail\" placeholder=\"Email\"&gt;\n            &lt;div *ngIf=\"submitted &amp;&amp; shippingForm.controls.email.errors\" class=\"error\"&gt;\n              &lt;div *ngIf=\"shippingForm.controls.email.errors.required\"&gt;Your email is required!&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group col-md-6\"&gt;\n            &lt;label for=\"payment\"&gt;Payment Method: &lt;/label&gt;\n            &lt;select type=\"select\" formControlName=\"paymentMethod\" class=\"form-control\" id=\"payment\"\n              aria-placeholder=\"Mastercard\"&gt;\n              &lt;option selected&gt; Choose...&lt;/option&gt;\n              &lt;option *ngFor=\"let paymentMethod of paymentMethods\"&gt;\n                {{ paymentMethod }}\n              &lt;/option&gt;\n            &lt;/select&gt;\n            &lt;div *ngIf=\"submitted &amp;&amp; shippingForm.controls.paymentMethod.errors\" class=\"error\"&gt;\n              &lt;div *ngIf=\"shippingForm.controls.paymentMethod.errors.required\"&gt;Your preferred payment method is required!&lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ngx-datatable"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "edited": false, "score": 2, "creation_date": 1559128802, "post_id": 56359314, "comment_id": 99322210, "body": "Some code or <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be greatly appreciated. Consider complying with <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 3921, "user_id": 2050306, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/38d3c3d6d1dcea96cbe01afbba90c6d3?s=128&d=identicon&r=PG", "display_name": "robert", "link": "https://stackoverflow.com/users/2050306/robert"}, "edited": false, "score": 0, "creation_date": 1559129463, "post_id": 56359314, "comment_id": 99322557, "body": "When you have a component among <b>entryComponents</b> array make sure you remove all selectors from html for that component. In your case it is DatatableComponent. Check your html files for it&#39;s selector."}], "owner": {"reputation": 1, "user_id": 11572509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ef9ee92292c1c732ce122a96540b51e?s=128&d=identicon&r=PG&f=1", "display_name": "Keerthana", "link": "https://stackoverflow.com/users/11572509/keerthana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 583, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559132143, "creation_date": 1559128535, "last_edit_date": 1559132143, "question_id": 56359314, "link": "https://stackoverflow.com/questions/56359314/nullinjectorerror-no-provider-for-scrollbarhelper", "title": "NullInjectorError: No provider for ScrollbarHelper", "body": "<p>Error: </p>\n\n<blockquote>\n  <p>Error: StaticInjectorError(AppModule)[DatatableComponent ->\n  ScrollbarHelper]:    StaticInjectorError(Platform:\n  core)[DatatableComponent -> ScrollbarHelper]: \n      NullInjectorError: No provider for ScrollbarHelper!</p>\n</blockquote>\n\n<p>CurrentBehaviour: Now, I have entry component, and when i trigger that, the above error happens. My project is with --aot compilation. Any help is appreciable</p>\n"}, {"tags": ["javascript", "angular", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559127180, "post_id": 56358746, "comment_id": 99321299, "body": "Both are strongly typed and the rest of Angular uses Rx, so no."}, {"owner": {"reputation": 91, "user_id": 9530123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "George Tarida", "link": "https://stackoverflow.com/users/9530123/george-tarida"}, "reply_to_user": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1559128691, "post_id": 56358746, "comment_id": 99322165, "body": "What about readability ? You would preffer <code>.pipe(take(1)).subscribe()</code> or <code>.then()</code> ? What about efficiency in terms of computing speed ?"}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559129302, "post_id": 56358746, "comment_id": 99322473, "body": "You do know you can put <code>pipe(take(1))</code> in service too? And you don&#39;t even have to <code>take(1)</code> because http observable completes after emitting. So it&#39;s just <code>subscribe</code> vs <code>then</code>. But observables are much more used and more flexible."}, {"owner": {"reputation": 91, "user_id": 9530123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "George Tarida", "link": "https://stackoverflow.com/users/9530123/george-tarida"}, "reply_to_user": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559129807, "post_id": 56358746, "comment_id": 99322744, "body": "I understand. One more question: if &#39;http observable completes after emitting&#39; do I still have to call unsubscribe on subscription ?"}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559130316, "post_id": 56358746, "comment_id": 99323028, "body": "No, you don&#39;t. You can save the subscription and check with <code>.isUnsubscribed</code> yourself."}], "answers": [{"comments": [{"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559127945, "post_id": 56358964, "comment_id": 99321733, "body": "You don&#39;t even have to type the function return type, it will be inferred from the http."}, {"owner": {"reputation": 173, "user_id": 4582196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LR1Um.jpg?s=128&g=1", "display_name": "Veeraragavan", "link": "https://stackoverflow.com/users/4582196/veeraragavan"}, "reply_to_user": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559128060, "post_id": 56358964, "comment_id": 99321791, "body": "Yeah typescript will infer, but for readability i used to write manually."}, {"owner": {"reputation": 6901, "user_id": 7436489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f27318e4582da71b5ed0f0dc453100?s=128&d=identicon&r=PG&f=1", "display_name": "Roberto Zvjerkovi\u0107", "link": "https://stackoverflow.com/users/7436489/roberto-zvjerkovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1559128201, "post_id": 56358964, "comment_id": 99321876, "body": "You can just hover over the method and you already have it explicitely typed in <code>&lt;Array&lt;Customer&gt;&gt;</code> so I don&#39;t see the reason to type it twice."}], "tags": [], "owner": {"reputation": 173, "user_id": 4582196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LR1Um.jpg?s=128&g=1", "display_name": "Veeraragavan", "link": "https://stackoverflow.com/users/4582196/veeraragavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559127459, "creation_date": 1559127459, "answer_id": 56358964, "question_id": 56358746, "link": "https://stackoverflow.com/questions/56358746/rxjs-observable-pipetake1-vs-topromise/56358964#56358964", "title": "rxjs observable.pipe(take(1)) vs toPromise", "body": "<p>As you mentioned strongly typed we can do the same in observable approach.</p>\n\n<pre><code>\npublic getCustomers():Observable&lt;Array&lt;Customer&gt;&gt;  {\n     return http.get&lt;Array&lt;Customer&gt;&gt;('/customers');\n  }\n\n  //component.ts\n  public ngOnInit() {\n      this.customerService.getCustomers()\n      .pipe(take(1))\n      .subscribe((customers: Array&lt;Customer&gt;) =&gt; {\n       //do some stuff\n       });\n  }\n\n</code></pre>\n\n<ul>\n<li>For HttpRequest with single HttpResponse you may rely on <strong>promise</strong>\napproach.</li>\n<li>But HttpRequest with multiple response such as <strong>progress/stream of\ndata(blob)</strong> go for the <strong>Observable</strong> approach.</li>\n</ul>\n\n<p>Try to use Observable as much as possible, <em>once you familiar with you wont go for other options.</em> So Give it a try! </p>\n"}, {"comments": [{"owner": {"reputation": 80516, "user_id": 227299, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6483c2f0fcf64b578c55ca0df7e01096?s=128&d=identicon&r=PG", "display_name": "Juan Mendes", "link": "https://stackoverflow.com/users/227299/juan-mendes"}, "edited": false, "score": 1, "creation_date": 1597413364, "post_id": 56359351, "comment_id": 112132631, "body": "Such a silly derogatory comment. The better analogy is that if you only need a Fiat but keep driving a Porsche, it will cost you 10x as much in maintenance when you are not using all the feature of the Porsche. @George, please consider removing your accepted answer. Turning an observable that only fires one event into a promise makes your code simpler to follow and work with, you won&#39;t need to worry about dealing with the callback being called multiple times and you won&#39;t need to unsubscribe."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": true, "score": -5, "last_activity_date": 1559128621, "creation_date": 1559128621, "answer_id": 56359351, "question_id": 56358746, "link": "https://stackoverflow.com/questions/56358746/rxjs-observable-pipetake1-vs-topromise/56359351#56359351", "title": "rxjs observable.pipe(take(1)) vs toPromise", "body": "<p>Going from observables to promises is a step back. </p>\n\n<p>It's like going from a Porsche 911 to a Fiat multipla. </p>\n\n<p>So no, you shouldn't use <code>toPromise()</code>, and no, your way isn't \"better\" (that's some ego there buddy !)</p>\n\n<blockquote>\n  <p>I think that my approach is better because it is strongly typed and it's cleaner.</p>\n</blockquote>\n\n<p>Typing an HTTP answer isn't depending on pormises or observables, but on the developer himself. And cleaner is a matter of perspective, personally I hate seeing <code>toPromise()</code>s. </p>\n\n<p>And the major drawback of your solution is that once converted to a promise, you can't pipe anything anymore, making your functions less versatile. </p>\n\n<p>But their code isn't the best either. Usually this kind of behavior is used for stores and caches, are you sure you didn't omit something ? </p>\n\n<p>Anyway, if not, and I only rely on the code provided, this would be the right code : </p>\n\n<pre><code>public getCustomers() {\n  return http.get&lt;Customer[]&gt;('/customers');\n}\n\n....\n\npublic ngOnInit() {\n  this.customerService.getCustomers()\n    .subscribe((customers) =&gt; {...})\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9129204, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zzDHHhSa--U/AAAAAAAAAAI/AAAAAAAACfs/q-O8R6lPybU/photo.jpg?sz=128", "display_name": "Abdessamad ABOUKDIR", "link": "https://stackoverflow.com/users/9129204/abdessamad-aboukdir"}, "is_accepted": false, "score": 2, "last_activity_date": 1609329073, "creation_date": 1609329073, "answer_id": 65506511, "question_id": 56358746, "link": "https://stackoverflow.com/questions/56358746/rxjs-observable-pipetake1-vs-topromise/65506511#65506511", "title": "rxjs observable.pipe(take(1)) vs toPromise", "body": "<p>Actually the accepted answer is misleading by saying that transforming an observable to a promise is like taking a step backward. Rather it's about what your needs are.\nas stated in <a href=\"https://angular.io/guide/comparing-observables#observables-compared-to-promises\" rel=\"nofollow noreferrer\">Angular Documentation</a>:</p>\n<blockquote>\n<p>Observables differentiate between chaining and subscription. Promises only have .then() clauses. This makes observables useful for creating complex transformation recipes to be used by other part of the system, without causing the work to be executed.</p>\n</blockquote>\n<p>And the difference between toPromise() and take(1) (or for short use operator first()), is that take(1) completes after the 1st value emitted, while toPromise waits for the last emitted value (waits for the observable to complete then resolves the last value emitted).</p>\n<p>Another difference between observables and promises that might interest you, is that Observable subscriptions are cancellable while promises are not. As a concrete example, say your API /customers takes time but you dont need the results anymore and you navigate to another page, unsubscribing cancels the HTTP request.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 11926195, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRtZm.png?s=128&g=1", "display_name": "Camorri", "link": "https://stackoverflow.com/users/11926195/camorri"}, "is_accepted": false, "score": 0, "last_activity_date": 1614853924, "creation_date": 1614853924, "answer_id": 66473235, "question_id": 56358746, "link": "https://stackoverflow.com/questions/56358746/rxjs-observable-pipetake1-vs-topromise/66473235#66473235", "title": "rxjs observable.pipe(take(1)) vs toPromise", "body": "<h2>I recommend to keep using the Observable way.</h2>\n<p>Why? Because later it will be easier to:</p>\n<ul>\n<li>build upcoming logic (like mapping, filtering, etc.) for planned features</li>\n<li>use the code, due mixing the two approach makes it harder to read/write</li>\n</ul>\n<p>On the other hand you have right, your code is more readable as the code from others, but you can also change the Observable to be as good as yours (just add strong typing to it), and it still keeps the functionality and consistency of the Observables.</p>\n"}], "owner": {"reputation": 91, "user_id": 9530123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "George Tarida", "link": "https://stackoverflow.com/users/9530123/george-tarida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2137, "favorite_count": 0, "accepted_answer_id": 56359351, "answer_count": 4, "score": 4, "last_activity_date": 1614853924, "creation_date": 1559126816, "last_edit_date": 1559128540, "question_id": 56358746, "link": "https://stackoverflow.com/questions/56358746/rxjs-observable-pipetake1-vs-topromise", "title": "rxjs observable.pipe(take(1)) vs toPromise", "body": "<p>Recently I've been moved to a new project which uses angular 6 as frontend framework and spring for REST services.</p>\n\n<p>The project is in development for 2 years now and what I've observed was that almost all HTTP request made with angular HttpClient is then piped to take filter from rxjs. All REST APIs emit only one value. There's no need for manual cancellation and the laziness property of observables.</p>\n\n<p>My intuition is that using toPromise() would be a better way to code. </p>\n\n<p>What are your thoughts?</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  //customer-service.ts\n  constructor(private http: HttpClient) {\n\n  }\n\n  public getCustomers() {\n     return http.get('/customers');\n  }\n\n  //component.ts\n  public ngOnInit() {\n      this.customerService.getCustomers().pipe(take(1)).subscribe((customers) =&gt; {\n           //do some stuff\n      })\n  }\n</code></pre>\n\n<p>My proposed approach:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>  //customer-service.ts\n  constructor(private http: HttpClient) {\n\n  }\n\n  public getCustomers() : Promise&lt;Array&lt;Customer&gt;&gt; {\n     return http.get('/customers').toPromise();\n  }\n\n  //component.ts\n  public ngOnInit() {\n      this.customerService.getCustomers().then((customers: Array&lt;Customer&gt;) =&gt; {\n         //do some stuff\n      })\n  }\n</code></pre>\n\n<p>I think that my approach is better because it is strongly typed and it's cleaner.</p>\n"}, {"tags": ["typescript", "react-native", "push-notification", "firebase-cloud-messaging", "react-native-firebase"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6029353, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TPp2CPt0U7s/AAAAAAAAAAI/AAAAAAAAAL8/2eKnYRW1qAE/photo.jpg?sz=128", "display_name": "TheLetch", "link": "https://stackoverflow.com/users/6029353/theletch"}, "edited": false, "score": 0, "creation_date": 1612860343, "post_id": 56359410, "comment_id": 116891535, "body": "To avoid errors on certain platforms, make sure the values respect their forms. That is, in the <code>data</code> object above, if <code>value1</code> is an int you should remove the quotes. Same rule for boolean"}], "tags": [], "owner": {"reputation": 4372, "user_id": 2938161, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-RXfa8-WceyE/AAAAAAAAAAI/AAAAAAAAAA0/ESkhGQeOhqQ/photo.jpg?sz=128", "display_name": "Salakar", "link": "https://stackoverflow.com/users/2938161/salakar"}, "is_accepted": true, "score": 4, "last_activity_date": 1559128822, "creation_date": 1559128822, "answer_id": 56359410, "question_id": 56358642, "link": "https://stackoverflow.com/questions/56358642/how-to-prevent-fcm-from-converting-nested-json-objects-to-string-in-data-message/56359410#56359410", "title": "How to prevent FCM from converting nested json objects to string in Data Message notifications in react-native", "body": "<p>\ud83d\udc4b <code>react-native-firebase</code> author here,</p>\n\n<p>We don't internally convert anything to strings on our implementation, these come through to native as strings already, for example on Android this uses the <code>RemoteMessage</code> FCM class - where we call <code>getData()</code> which as you can see <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/messaging/RemoteMessage.html#getData()\" rel=\"nofollow noreferrer\">here</a> returns strings only.</p>\n\n<p>They way I've got around this myself if I want nested data is to have just a single data field where I provide all my data to as a single JSON string, then when receiving it I only need to JSON.parse a single field to get the structure back. E.g.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const data = {\n  \"field1\": \"value1\",\n  \"field2\": \"value1\",\n  \"field3\": {\n    \"subfield1\": \"subvalue1\",\n  }\n}\n\nconst payload = {\n  \"to\": \"fcm-token\",\n  \"data\": {\n    \"json\": JSON.stringify(data),\n  }\n}\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>const data: MyDataType = remoteMessage.data;\nconst { field1, field2, field3 } = JSON.parse(data.json);\n\nconsole.log(field3.subfield1);\n</code></pre>\n\n<p>Alternatively, you can flatten your data object before sending using something like <a href=\"https://github.com/invertase/deeps#flatten-object-joiner\" rel=\"nofollow noreferrer\">this</a> and then unflatten on the receiving end using something like <a href=\"https://github.com/invertase/deeps#unflatten\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "is_accepted": false, "score": 2, "last_activity_date": 1559141409, "creation_date": 1559141409, "answer_id": 56363345, "question_id": 56358642, "link": "https://stackoverflow.com/questions/56358642/how-to-prevent-fcm-from-converting-nested-json-objects-to-string-in-data-message/56363345#56363345", "title": "How to prevent FCM from converting nested json objects to string in Data Message notifications in react-native", "body": "<p>If you look at the documentation for <a href=\"https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages#Message.FIELDS.data\" rel=\"nofollow noreferrer\">message type in the REST API</a>, you'll see that <code>data</code> is declared as:</p>\n\n<pre><code>\"data\": {\n  string: string,\n  ...\n},\n</code></pre>\n\n<p>So the <code>data</code> field can only hold string values, not more complex objects.</p>\n\n<p>If you want to store more complex values, encode them as a string first and then decode them on the client, for example with <code>JSON.stringify()</code> and <code>JSON.parse()</code>.</p>\n"}], "owner": {"reputation": 1923, "user_id": 6340959, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/egOT9.png?s=128&g=1", "display_name": "Saeed Zhiany", "link": "https://stackoverflow.com/users/6340959/saeed-zhiany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1341, "favorite_count": 0, "accepted_answer_id": 56359410, "answer_count": 2, "score": 3, "last_activity_date": 1559141409, "creation_date": 1559126431, "question_id": 56358642, "link": "https://stackoverflow.com/questions/56358642/how-to-prevent-fcm-from-converting-nested-json-objects-to-string-in-data-message", "title": "How to prevent FCM from converting nested json objects to string in Data Message notifications in react-native", "body": "<p>I'm using firebase in my react-native project (with typescript), I set up all thing correctly and it works fine with <code>data</code> messages like below:</p>\n\n<pre><code>{\n  \"to\": \"fcm-token\",\n\n  \"data\": {\n    \"field1\": \"value1\",\n    \"field2\": \"value1\",\n    \"field3\": \"value1\"\n  }\n}\n</code></pre>\n\n<p>in my App, I can access my data using <code>data</code> filed of <code>RemoteMessage</code> like below:</p>\n\n<pre><code>const data: MyDataType = remoteMessage.data;\nconst {/* destructed fields */} = data;\n</code></pre>\n\n<p><strong>But</strong> when my server send nested Object to FCM server, it converts them to string and so I can not access them directly like above.</p>\n\n<p>this is what my server send to FCM server:</p>\n\n<pre><code>{\n  \"to\": \"fcm-token\",\n\n  \"data\": {\n    \"field1\": {\n      \"subfield1\": \"subvalue1\",\n      \"subfield2\": \"subvalue2\",\n    },\n    \"field2\": \"value1\",\n    \"field3\": \"value1\"\n  }\n}\n</code></pre>\n\n<p>and this is what I get in my application:</p>\n\n<pre><code>{\n  \"to\": \"fcm-token\",\n\n  \"data\": {\n    \"field1\": \"{\"subfield1\": \"subvalue1\",\"subfield2\": \"subvalue2\"}\", &lt;--- the problem is here, it must be a nested object not string\n    \"field2\": \"value1\",\n    \"field3\": \"value1\"\n  }\n}\n</code></pre>\n\n<p>I set <code>Content-Type</code> header to <code>application/json</code> in my server post requests, so I don't think there is any problem with my headers.</p>\n\n<p>Am I doing something wrong? How can I prevent FCM from converting my nested objects?</p>\n"}, {"tags": ["angular", "typescript", "redux", "ngrx"], "comments": [{"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1559126496, "post_id": 56358531, "comment_id": 99320930, "body": "What is the disadvantage you see to moving those methods to a utilities service?"}, {"owner": {"reputation": 5002, "user_id": 5075755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVop.jpg?s=128&g=1", "display_name": "Artem Arkhipov", "link": "https://stackoverflow.com/users/5075755/artem-arkhipov"}, "edited": false, "score": 0, "creation_date": 1559126526, "post_id": 56358531, "comment_id": 99320946, "body": "Can you just store the list of necessary methods and add them upon object retrieve? Or even better: having some utils service"}, {"owner": {"reputation": 21, "user_id": 4957376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03586d7880c69ec422a8af9c4e1bf467?s=128&d=identicon&r=PG&f=1", "display_name": "Wixer", "link": "https://stackoverflow.com/users/4957376/wixer"}, "reply_to_user": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1559130940, "post_id": 56358531, "comment_id": 99323375, "body": "@Will Alexander The disadvantage of the utility service is that everywhere where I want to use this object (eg. User), I have to provide (by injection) the utility service. The utility service can not use static methods because it is used in templates"}, {"owner": {"reputation": 21, "user_id": 4957376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03586d7880c69ec422a8af9c4e1bf467?s=128&d=identicon&r=PG&f=1", "display_name": "Wixer", "link": "https://stackoverflow.com/users/4957376/wixer"}, "reply_to_user": {"reputation": 5002, "user_id": 5075755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QdVop.jpg?s=128&g=1", "display_name": "Artem Arkhipov", "link": "https://stackoverflow.com/users/5075755/artem-arkhipov"}, "edited": false, "score": 0, "creation_date": 1559131007, "post_id": 56358531, "comment_id": 99323423, "body": "@Artem, it looks like my A) solution"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 4957376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03586d7880c69ec422a8af9c4e1bf467?s=128&d=identicon&r=PG&f=1", "display_name": "Wixer", "link": "https://stackoverflow.com/users/4957376/wixer"}, "edited": false, "score": 1, "creation_date": 1559131203, "post_id": 56358906, "comment_id": 99323543, "body": "The mentioned functions are just examples, the point is that the data from the server is raw data and often need to be processed further. For example, the isValid function may indicate whether, for example, a given User has all the necessary data or maybe the data is incomplete. This type of function can be more, eg. getName () as the concat of lastname and firstname. Or even better, depending on the locale, the order of lastname and firstname can be different."}, {"owner": {"reputation": 13622, "user_id": 639035, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08651877616b06c07fcfc20e88d3d1e9?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/639035/stefan"}, "reply_to_user": {"reputation": 21, "user_id": 4957376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03586d7880c69ec422a8af9c4e1bf467?s=128&d=identicon&r=PG&f=1", "display_name": "Wixer", "link": "https://stackoverflow.com/users/4957376/wixer"}, "edited": false, "score": 0, "creation_date": 1559131373, "post_id": 56358906, "comment_id": 99323632, "body": "Agree, in this case you might not even store the complete object in the store. The calculation isValid etc can then still be done in the component, where you use the data."}, {"owner": {"reputation": 21, "user_id": 4957376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03586d7880c69ec422a8af9c4e1bf467?s=128&d=identicon&r=PG&f=1", "display_name": "Wixer", "link": "https://stackoverflow.com/users/4957376/wixer"}, "edited": false, "score": 1, "creation_date": 1559131626, "post_id": 56358906, "comment_id": 99323794, "body": "I am sure that I need a store, I have used the store (ngrx) in two quite big applications and from the beginning I have had the above doubts (previously I used solutions A) which I was not quite sure if this is correct. I see, you rather suggest not to use &quot;fat&quot; objects created by mapper (on retriving from store)  but just some helpers. Thanks for suggestion"}], "tags": [], "owner": {"reputation": 13622, "user_id": 639035, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08651877616b06c07fcfc20e88d3d1e9?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/639035/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1559127298, "creation_date": 1559127298, "answer_id": 56358906, "question_id": 56358531, "link": "https://stackoverflow.com/questions/56358531/how-do-i-store-objects-in-the-store-ngrx-ngxs-that-have-methods/56358906#56358906", "title": "How do I store objects in the store (ngrx, ngxs) that have methods", "body": "<p>How do I store objects in the store (ngrx, ngxs) that have methods\n--> you don't! You store a state in the store. Functions don't belong to a state. (You seem to understand this in the question details, but I want to point this out again)</p>\n\n<p>As for the functions you need:</p>\n\n<ul>\n<li>readonly: in most cases this is a boolean flag on the object. So I\ndon't know why you want to use it as a function. If read only is\ndepending e.g. on the user role or other outside factors, move it\ninto a \"utility function\" and don't store it with the store state.\nYou want to keep keep the state as small as possible.  </li>\n<li>isValid: why would you store invalid data inside the store, which is then potentially used by another component? Personally I would consider data inside the store always as valid, but maybe there is a use case.</li>\n<li>hasParent: I see this more as \"parentId\", from which you can get the actual parent object with a helper method. But without knowing your structure I cannot say.</li>\n</ul>\n\n<p>Before thinking to much about it, ask yourself: Do I really need a store for this. Wouldn't a service be enough. A store is the hottest things right now, but most applications don't need it! Don't use it just because everyone is talking about it!</p>\n"}], "owner": {"reputation": 21, "user_id": 4957376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03586d7880c69ec422a8af9c4e1bf467?s=128&d=identicon&r=PG&f=1", "display_name": "Wixer", "link": "https://stackoverflow.com/users/4957376/wixer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1559127298, "creation_date": 1559126093, "question_id": 56358531, "link": "https://stackoverflow.com/questions/56358531/how-do-i-store-objects-in-the-store-ngrx-ngxs-that-have-methods", "title": "How do I store objects in the store (ngrx, ngxs) that have methods", "body": "<p>I understand that the Redux pattern requires only plain object to be stored in the Store (this is logical and understandable).\nHowever, in the application I would like to use objects that have some functionality, eg methods such as: \"hasParent\", \"isReadonly\", \"isValid\", which are calculated.</p>\n\n<p>Although, for example, ngrx does not prohibit the storing of such objects, this can lead to many problems </p>\n\n<p>How should I deal with this objects storing problem?\nI have two ideas:\nA)\n-before I save the object to the store, I serialize the object into plain data\n-when reading from the store, I map plain data to the object (using the mapper or \"manually\" (with object constructor and setters))\nB)\nI resign from using class / objects, I use only plain data and I move the hasParent, isReadonly, isValid methods to the helpers / services.</p>\n\n<p>None of these solutions is free from disadvantages :(. But which solution seems to be better?\nMaybe there are other ways to deal with the above problem?</p>\n"}, {"tags": ["reactjs", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11571239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ojSGTvgHEpo/AAAAAAAAAAI/AAAAAAAAADs/Bzoqs2nr_yE/photo.jpg?sz=128", "display_name": "Mittal Ahir", "link": "https://stackoverflow.com/users/11571239/mittal-ahir"}, "edited": false, "score": 0, "creation_date": 1559129381, "post_id": 56358655, "comment_id": 99322508, "body": "I have done it like this &lt;form onSubmit={this.onSubmitEmployeeDetails} &gt;   onSubmitEmployeeDetails = (e: any) =&gt; {     e.preventDefault(); // other code }"}], "tags": [], "owner": {"reputation": 977, "user_id": 4394154, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qxg0AP6I2VY/AAAAAAAAAAI/AAAAAAAAABQ/bsqMk1Bynxg/photo.jpg?sz=128", "display_name": "Ladi Adenusi", "link": "https://stackoverflow.com/users/4394154/ladi-adenusi"}, "is_accepted": true, "score": 0, "last_activity_date": 1559126473, "creation_date": 1559126473, "answer_id": 56358655, "question_id": 56358432, "link": "https://stackoverflow.com/questions/56358432/how-can-i-validate-multiple-text-fields-on-submit-form-in-fabric-ui-with-reactjs/56358655#56358655", "title": "How can I validate multiple text fields on submit form in fabric UI with reactJS and typescript?", "body": "<p>If you want to use submit validation instead of input validation, you'll need to add the validator function to the form instead.</p>\n\n<pre><code>onSubmit(form) {\n  form.preventDefault();\n  // retrieve form values and validate here...\n}\n\nrender() {\n  return (\n    &lt;form onSubmit={this.onSubmit}&gt;\n      // rest of form...\n    &lt;/form&gt;\n  );\n}\n</code></pre>\n\n<p>Remember to bind your form in the constructor</p>\n\n<pre><code>constructor(props) {\n  super(props)\n  this.onSubmit = this.onSubmit.bind(this)\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11571239, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ojSGTvgHEpo/AAAAAAAAAAI/AAAAAAAAADs/Bzoqs2nr_yE/photo.jpg?sz=128", "display_name": "Mittal Ahir", "link": "https://stackoverflow.com/users/11571239/mittal-ahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 56358655, "answer_count": 1, "score": 0, "last_activity_date": 1559126473, "creation_date": 1559125761, "question_id": 56358432, "link": "https://stackoverflow.com/questions/56358432/how-can-i-validate-multiple-text-fields-on-submit-form-in-fabric-ui-with-reactjs", "title": "How can I validate multiple text fields on submit form in fabric UI with reactJS and typescript?", "body": "<p>I wrote text fields like below in form tag. Both text fields call the same function. should I call  {this._getErrorMessage} multiple times in the same time </p>\n\n<p>I declare function outside the form like below.this function checks null value.</p>\n\n<pre><code>    _getErrorMessage = (value: any) =&gt; {\n    value.trim().length === 0 ? required : \"\" \n   }\n\n    &lt;Textfield\n    id={AppIDConst`enter code here`ants.EMP_NAME}\n    type={fieldPropertyConstants.TEXT}\n    label={filedLabelConstants.EMP_NAME}\n    onChange={this.handleChange.bind(this)}\n    required={true}\n    validateOnLoad={false}\n    onGetErrorMessage= {this._getErrorMessage}\n/&gt;\n\n&lt;Textfield\n    id={AppIDConstants.EMP_ADHAR_NO}\n    type={fieldPropertyConstants.NUMBER}\n    label={filedLabelConstants.ADHAR_NUMBER}\n    required={true}\n    onChange={this.handleChange.bind(this)}\n    onGetErrorMessage= {this._getErrorMessage}\n/&gt;\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "webpack", "types"], "comments": [{"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1559127130, "post_id": 56358402, "comment_id": 99321278, "body": "have you installed &quot;TestModule&quot;? does it exists in node_modules?"}, {"owner": {"reputation": 533, "user_id": 8515877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d06e3b4c176682dec5a7e3db1276bd6?s=128&d=identicon&r=PG&f=1", "display_name": "hetious", "link": "https://stackoverflow.com/users/8515877/hetious"}, "reply_to_user": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1559127203, "post_id": 56358402, "comment_id": 99321313, "body": "No, it is my custom d.ts file, which I created under the definitions folder."}, {"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1559127335, "post_id": 56358402, "comment_id": 99321384, "body": "your cusomt d.ts file is somthing for existing javascript code, d.ts has no implementation only says typescrpt something about types. console.log(TestModule.sum(1, 2)); there has to be implementation of this function"}, {"owner": {"reputation": 533, "user_id": 8515877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d06e3b4c176682dec5a7e3db1276bd6?s=128&d=identicon&r=PG&f=1", "display_name": "hetious", "link": "https://stackoverflow.com/users/8515877/hetious"}, "reply_to_user": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1559127531, "post_id": 56358402, "comment_id": 99321486, "body": "I know that. I have my own library written in pure JS. I only wanted to add types to this library."}, {"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1559128021, "post_id": 56358402, "comment_id": 99321776, "body": "import TestModule from &#39;TestModule&#39;; default root is node_modules so tscompliler or   some any loader will look there. if it is your file somewhere in your source you have to import that file. like import TestModule from &#39;src/components/TestModule&#39;. and your d.ts definition should be there as well"}, {"owner": {"reputation": 533, "user_id": 8515877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d06e3b4c176682dec5a7e3db1276bd6?s=128&d=identicon&r=PG&f=1", "display_name": "hetious", "link": "https://stackoverflow.com/users/8515877/hetious"}, "reply_to_user": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1559128140, "post_id": 56358402, "comment_id": 99321849, "body": "@JurajKocan I defined defaults roots in tsconfing under the &#39;typeRoots&#39; key..."}, {"owner": {"reputation": 1796, "user_id": 9955460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8554e7f4c93d6a15bf478e1e64e0e131?s=128&d=identicon&r=PG&f=1", "display_name": "Juraj Kocan", "link": "https://stackoverflow.com/users/9955460/juraj-kocan"}, "edited": false, "score": 0, "creation_date": 1559128391, "post_id": 56358402, "comment_id": 99321992, "body": "and what is location of your module with implementation? what are you expectiong to compler to import? like i said. import TestModule from &#39;Testmodule&#39; compiler is looking in node_modules for module. you can define typesRoot. whits is ok. it works for you. but it wont compile real file if it is not in node_modules"}], "owner": {"reputation": 533, "user_id": 8515877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d06e3b4c176682dec5a7e3db1276bd6?s=128&d=identicon&r=PG&f=1", "display_name": "hetious", "link": "https://stackoverflow.com/users/8515877/hetious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1559128013, "creation_date": 1559125660, "last_edit_date": 1559128013, "question_id": 56358402, "link": "https://stackoverflow.com/questions/56358402/webpack-cannot-resolve-module-for-custom-definition-file", "title": "Webpack cannot resolve module for custom definition file", "body": "<p>I wanted to create d.ts file for my js library. However when I want to import this module into my ts file webpack throws error:</p>\n\n<pre><code>ERROR in ./index.ts\nModule not found: Error: Can't resolve 'TestModule'\n</code></pre>\n\n<p>My folder structure looks like this: </p>\n\n<pre><code>- root\n  --definitions\n    -- TestModule\n      --index.d.ts\n\n  --src\n    --index.ts\n    --index.html\n\n  --tsconfig.json\n  --webpack.config.js\n</code></pre>\n\n<p>tsconfig</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"es5\",\n    \"module\": \"commonjs\",\n    \"declaration\": true,\n    \"sourceMap\": true,\n    \"experimentalDecorators\": true,\n    \"outDir\": \"dist\",\n    \"lib\": [\"es2017\", \"dom\"],\n    \"noImplicitAny\": true,\n    \"suppressImplicitAnyIndexErrors\": true,\n    \"removeComments\": true,\n    \"typeRoots\": [\n      \"./node_modules/@types\",\n      \"./definitions\"\n    ]\n  },\n  \"exclude\": [\"node_modules\", \"dist\"]\n}\n</code></pre>\n\n<p>webpack.config</p>\n\n<pre><code>const webpack = require('webpack');\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst nodeEnv = process.env.NODE_ENV || 'development';\nconst isProd = nodeEnv === 'production';\n\nconst plugins = [\n  new webpack.DefinePlugin({\n    'process.env': {\n      NODE_ENV: JSON.stringify(nodeEnv)\n    }\n  }),\n  new HtmlWebpackPlugin({\n    title: 'Typescript Webpack Starter',\n    template: '!!ejs-loader!src/index.html'\n  }),\n  new webpack.LoaderOptionsPlugin({\n    options: {\n      tslint: {\n        emitErrors: true,\n        failOnHint: true\n      }\n    }\n  })\n];\n\nvar config = {\n  devtool: isProd ? 'hidden-source-map' : 'source-map',\n  context: path.resolve('./src'),\n  entry: {\n    app: './index.ts'\n  },\n  output: {\n    path: path.resolve('./dist'),\n    filename: '[name].bundle.js'\n  },\n  module: {\n    rules: [\n      {\n        enforce: 'pre',\n        test: /\\.tsx?$/,\n        exclude: [/\\/node_modules\\//],\n        use: ['awesome-typescript-loader', 'source-map-loader']\n      },\n      !isProd\n        ? {\n            test: /\\.(js|ts)$/,\n            loader: 'istanbul-instrumenter-loader',\n            exclude: [/\\/node_modules\\//],\n            query: {\n              esModules: true\n            }\n          }\n        : null,\n      { test: /\\.html$/, loader: 'html-loader' },\n      { test: /\\.css$/, loaders: ['style-loader', 'css-loader'] }\n    ].filter(Boolean)\n  },\n  resolve: {\n    extensions: ['.ts', '.js']\n  },\n  plugins: plugins,\n  devServer: {\n    contentBase: path.join(__dirname, 'dist/'),\n    compress: true,\n    port: 3000,\n    hot: true\n  }\n};\n\nmodule.exports = config;\n</code></pre>\n\n<p>index.ts</p>\n\n<pre><code>import TestModule from 'TestModule';\n\nconsole.log(TestModule.sum(1, 2));\n</code></pre>\n\n<p>and definition file - index.d.ts</p>\n\n<pre><code>interface ITestModule {\n    sum(number1: number, number2: number):number;\n}\n\ndeclare const TestModule: ITestModule;\n\ndeclare module \"TestModule\" {\n    export default TestModule;\n}\n</code></pre>\n\n<p>I can see types when I import TestModule, but I have no idea why webpack throws me error.</p>\n\n<p>@Edit</p>\n\n<p>When I deleted the import statemnet it seems to work, I don't receiving any errors. However when I open application in the browser I can see </p>\n\n<pre><code>Module build failed (from ./node_modules/ts-loader/index.js):\nError: TypeScript emitted no output for '...d.ts file'\n</code></pre>\n"}, {"tags": ["typescript", "chart.js", "powerbi"], "comments": [{"owner": {"reputation": 8327, "user_id": 3535537, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buDCT.png?s=128&g=1", "display_name": "St&#233;phane GRILLON", "link": "https://stackoverflow.com/users/3535537/st%c3%a9phane-grillon"}, "edited": false, "score": 0, "creation_date": 1571646830, "post_id": 56358355, "comment_id": 103296510, "body": "you solve your problem?"}], "answers": [{"tags": [], "owner": {"reputation": 8327, "user_id": 3535537, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/buDCT.png?s=128&g=1", "display_name": "St&#233;phane GRILLON", "link": "https://stackoverflow.com/users/3535537/st%c3%a9phane-grillon"}, "is_accepted": false, "score": 2, "last_activity_date": 1570567287, "creation_date": 1570567287, "answer_id": 58293818, "question_id": 56358355, "link": "https://stackoverflow.com/questions/56358355/how-to-add-a-chartpoint-to-a-dataset-in-chart-js-with-typescript/58293818#58293818", "title": "How to add a ChartPoint to a DataSet in Chart.js with TypeScript?", "body": "<p>You need cast (typescript does not know if it's number or ChartPoint):</p>\n\n<pre><code>(ds.data as ChartPoint[]).push(p);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7425164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8627b4b78d11ae33beca0035064f8609?s=128&d=identicon&r=PG&f=1", "display_name": "blietz", "link": "https://stackoverflow.com/users/7425164/blietz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570567287, "creation_date": 1559125481, "question_id": 56358355, "link": "https://stackoverflow.com/questions/56358355/how-to-add-a-chartpoint-to-a-dataset-in-chart-js-with-typescript", "title": "How to add a ChartPoint to a DataSet in Chart.js with TypeScript?", "body": "<p>I want to create a custom visual for powerbi. I'm using chart.js and @types/chart.js. But I cannot add a new ChartPoint to a DataSet of a linechart.</p>\n\n<pre><code>let p: ChartPoint = {\n                        x: data.timestamp,\n                        y: data.value,\n                    };\nds.data.push(p);\n</code></pre>\n\n<p>But this cannot compile:</p>\n\n<blockquote>\n  <p>TS2349: Cannot invoke an expression whose type lacks a call signature. Type '((...items: number[]) => number) | ((...items: ChartPoint[]) => number)' has no compatible call signatures.</p>\n</blockquote>\n\n<p>ds type is Chart.ChartDataSets</p>\n\n<p>and ds.data type is Chart.ChartDataSets.data?: number[] | ChartPoint[]</p>\n\n<p>But the push Method signature is:\nArray.push(items: (<strong>number &amp; ChartPoint</strong>)[]): number</p>\n\n<p>So I just tried this:</p>\n\n<pre><code>                    let a: (number &amp; ChartPoint);\n                    a.x = data.timestamp;\n                    a.y = data.value;\n                    ds.data.push(a);\n</code></pre>\n\n<p>But this cannot compile with the same message:</p>\n\n<blockquote>\n  <p>TS2349: Cannot invoke an expression whose type lacks a call signature. Type '((...items: number[]) => number) | ((...items: ChartPoint[]) => number)' has no compatible call signatures.</p>\n</blockquote>\n\n<p>I'm new to Typescript. I don't know how to use the push method and why the push method has a \"&amp;\" intersection type.</p>\n"}, {"tags": ["angular", "typescript", "button", "components", "routerlink"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 11232045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba20d4c5f62cb95a13098022b046aa4?s=128&d=identicon&r=PG&f=1", "display_name": "Fealo", "link": "https://stackoverflow.com/users/11232045/fealo"}, "edited": false, "score": 0, "creation_date": 1559125830, "post_id": 56358367, "comment_id": 99320581, "body": "Ok, but how to get this obj on the component &#39;b&#39; ?"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 0, "creation_date": 1559125925, "post_id": 56358367, "comment_id": 99320630, "body": "The ActivatedRoute Observable contains the query parameters. You can&#39;t access a private variable from the template though, so either switch it to public or create a getter method."}], "tags": [], "owner": {"reputation": 3645, "user_id": 6019563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072513362799030/picture?type=large", "display_name": "Sachin Gupta", "link": "https://stackoverflow.com/users/6019563/sachin-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1559125519, "creation_date": 1559125519, "answer_id": 56358367, "question_id": 56358267, "link": "https://stackoverflow.com/questions/56358267/passing-an-objects-string-value-to-component-using-a-button-angular/56358367#56358367", "title": "Passing an object&#39;s string value to component using a button Angular", "body": "<p>You can add <code>[queryParams]='{\"obj\":myObject.currenciesAccepted}'</code> to the button, this will pass the string in query params</p>\n"}, {"tags": [], "owner": {"reputation": 4450, "user_id": 11270840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2Zv.jpg?s=128&g=1", "display_name": "Ghoul Ahmed", "link": "https://stackoverflow.com/users/11270840/ghoul-ahmed"}, "is_accepted": true, "score": 2, "last_activity_date": 1559125961, "creation_date": 1559125961, "answer_id": 56358490, "question_id": 56358267, "link": "https://stackoverflow.com/questions/56358267/passing-an-objects-string-value-to-component-using-a-button-angular/56358490#56358490", "title": "Passing an object&#39;s string value to component using a button Angular", "body": "<p>try this</p>\n\n<pre><code>&lt;button nbButton status=\"info\" class=\"left\" \n[routerLink]=\"['/centers', center.id, 'prices']\" \n[queryParams]='{currenciesAccepted: myObject.currenciesAccepted}' &gt;PRICES&lt;/button&gt;\n</code></pre>\n\n<p>in centers component</p>\n\n<pre><code>import { ActivatedRoute } from '@angular/router';\n\ncurrenciesAccepted: any = {};\nconstructor( private route: ActivatedRoute) { }\n\nngOnInit() {\n    this.route.queryParamMap.subscribe( params =&gt; {\n     this.currenciesAccepted  = params.get('currenciesAccepted') ;\n     })\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 81, "user_id": 11232045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba20d4c5f62cb95a13098022b046aa4?s=128&d=identicon&r=PG&f=1", "display_name": "Fealo", "link": "https://stackoverflow.com/users/11232045/fealo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 56358490, "answer_count": 2, "score": -1, "last_activity_date": 1559125961, "creation_date": 1559125188, "question_id": 56358267, "link": "https://stackoverflow.com/questions/56358267/passing-an-objects-string-value-to-component-using-a-button-angular", "title": "Passing an object&#39;s string value to component using a button Angular", "body": "<p>In my html template of my component 'a', I have a button which is used to navigate to an other component :</p>\n\n<pre><code>&lt;button nbButton status=\"info\" class=\"left\" [routerLink]=\"['/centers', center.id, 'prices']\"&gt;PRICES&lt;/button&gt;\n</code></pre>\n\n<p>So clicking on this button made me move to an other component 'b'.</p>\n\n<p>In the component 'a' I have a private object variable, which contains a string value <code>currenciesAccepted</code>, basically :<code>myObject.currenciesAccepted</code>.</p>\n\n<p>In the component 'b', I need this string value, so I need to pass it when I click on the button, to navigate from the component 'a' to the component 'b'.</p>\n"}, {"tags": ["typescript", "conditional-types"], "answers": [{"tags": [], "owner": {"reputation": 672, "user_id": 2789759, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b97c6a0bb13ad971e69db7bd8d1d25b8?s=128&d=identicon&r=PG", "display_name": "Iago Bruno", "link": "https://stackoverflow.com/users/2789759/iago-bruno"}, "is_accepted": true, "score": 3, "last_activity_date": 1559128450, "creation_date": 1559128450, "answer_id": 56359279, "question_id": 56358237, "link": "https://stackoverflow.com/questions/56358237/typescript-how-to-return-conditional-types-in-function-with-rest-parameter/56359279#56359279", "title": "TypeScript: How to return conditional types in function with rest parameter?", "body": "<p>You can achieve this behavior by using <a href=\"http://www.typescriptlang.org/docs/handbook/functions.html#overloads\" rel=\"nofollow noreferrer\">function overloads</a>.\nYour code will look like this:</p>\n\n<pre><code>import { rem } from \"polished\";\n\nfunction unit(...values: undefined[]): null;\nfunction unit(...values: [number]): string;\nfunction unit(...values: number[]): string[];\nfunction unit(...values): null | string | string[] {\n  const result: string[] = [];\n\n  values.forEach(value =&gt; {\n    if (value) {\n      result.push(rem(value));\n    }\n  });\n\n  if (result.length === 1) {\n    return result[0];\n  }\n\n  if (result.length &gt; 1) {\n    return result;\n  }\n\n  return null;\n}\n</code></pre>\n\n<p>You can check out in <a href=\"https://www.typescriptlang.org/play/#src=%0D%0Afunction%20unit(...values%3A%20undefined[])%3A%20null%3B%0D%0Afunction%20unit(...values%3A%20[number])%3A%20string%3B%0D%0Afunction%20unit(...values%3A%20number[])%3A%20string[]%3B%0D%0Afunction%20unit(...values)%3A%20null%20%7C%20string%20%7C%20string[]%20%7B%0D%0A%20%20%20%20const%20result%3A%20string[]%20%3D%20[]%3B%0D%0A%0D%0A%20%20%20%20values.forEach(value%20%3D%3E%20%7B%0D%0A%20%20%20%20%20%20%20%20if%20(value)%20%7B%0D%0A%20%20%20%20%20%20%20%20result.push(rem(value))%3B%0D%0A%20%20%20%20%20%20%20%20%7D%0D%0A%20%20%20%20%7D)%3B%0D%0A%0D%0A%20%20%20%20if%20(result.length%20%3D%3D%3D%201)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20result[0]%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20if%20(result.length%20%3E%201)%20%7B%0D%0A%20%20%20%20%20%20%20%20return%20result%3B%0D%0A%20%20%20%20%7D%0D%0A%0D%0A%20%20%20%20return%20null%3B%0D%0A%7D%0D%0A%0D%0Aconst%20test1%20%3D%20unit()%20%2F%2F%20Hover%20%22test1%22%20%3D%20null%0D%0Aconst%20test2%20%3D%20unit(10)%20%2F%2F%20Hover%20%22test2%22%20%3D%20string%0D%0Aconst%20test3%20%3D%20unit(10%2C%2020)%20%2F%2F%20Hover%20%22test3%22%20%3D%20string[]\" rel=\"nofollow noreferrer\">this playground</a>.</p>\n"}], "owner": {"reputation": 191, "user_id": 3655664, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000956169156/picture?type=large", "display_name": "Dawid Krajewski", "link": "https://stackoverflow.com/users/3655664/dawid-krajewski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 56359279, "answer_count": 1, "score": 1, "last_activity_date": 1559128450, "creation_date": 1559125103, "question_id": 56358237, "link": "https://stackoverflow.com/questions/56358237/typescript-how-to-return-conditional-types-in-function-with-rest-parameter", "title": "TypeScript: How to return conditional types in function with rest parameter?", "body": "<p>I want to make a function with rest parameter which will return <strong>conditional types</strong> like this:</p>\n\n<ul>\n<li><strong>null</strong> when provided <em>undefined value</em></li>\n<li><strong>string</strong> when provided <em>one number</em></li>\n<li><strong>array of strings</strong> when provided <em>multiple numbers</em></li>\n</ul>\n\n<p>I was trying to write this function in multiple forms using TypeScript <strong>extends</strong> syntax but unfortunately none of these was working.</p>\n\n<p>I was also trying to write function where first parameter was a number and the second one was rest parameter but it also didn't work.</p>\n\n<p>This is how working code looks right now <strong>except of</strong> proper conditional return of types:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import { rem } from \"polished\";\n\ntype UnitValue = number | undefined;\n\nconst unit = (...values: UnitValue[]): string | string[] | null =&gt; {\n  const result: string[] = [];\n\n  values.forEach(value =&gt; {\n    if (value) {\n      result.push(rem(value));\n    }\n  });\n\n  if (result.length === 1) {\n    return result[0];\n  }\n\n  if (result.length &gt; 1) {\n    return result;\n  }\n\n  return null;\n};\n</code></pre>\n\n<p>Recreated case in <em>codesansbox.io</em> -> <a href=\"https://codesandbox.io/s/brave-currying-sdcb6?fontsize=14\" rel=\"nofollow noreferrer\">link</a> </p>\n\n<p>I need this function to return <strong>exactly and only</strong> these types in those three cases:</p>\n\n<ul>\n<li><code>unit(undefined) -&gt; null</code></li>\n<li><code>unit(16) -&gt; string</code></li>\n<li><code>unit(16, 32) -&gt; string[]</code></li>\n</ul>\n"}, {"tags": ["angular", "typescript", "observable", "rxjs6"], "comments": [{"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559124746, "post_id": 56358087, "comment_id": 99320008, "body": "Check your browser console for any CORS Error. If you&#39;re not getting it, share your S3 JSON URL."}, {"owner": {"reputation": 368, "user_id": 6550398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240c7db1960eaf56a7e53a208c64617a?s=128&d=identicon&r=PG&f=1", "display_name": "Subham", "link": "https://stackoverflow.com/users/6550398/subham"}, "reply_to_user": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559124955, "post_id": 56358087, "comment_id": 99320131, "body": "@SidAjmera I am able to read file from S3 and display it on the console. I am not getting any CORS error..I want to change the String value into JSON and return with  the Observable"}, {"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559125093, "post_id": 56358087, "comment_id": 99320194, "body": "You would actually get that data as JSON and not string. Probably what you&#39;re trying here is to append the data to your log by placing a <code>+</code> instead of <code>,</code> in the call to your <code>console.log</code>"}, {"owner": {"reputation": 368, "user_id": 6550398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240c7db1960eaf56a7e53a208c64617a?s=128&d=identicon&r=PG&f=1", "display_name": "Subham", "link": "https://stackoverflow.com/users/6550398/subham"}, "reply_to_user": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559125482, "post_id": 56358087, "comment_id": 99320382, "body": "I tried what you suggested still getting as undefined.I am using data.Body.toString() this will give a string as value"}, {"owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559125601, "post_id": 56358087, "comment_id": 99320436, "body": "Can you replicate this on a sample <a href=\"https://stackblitz.com/fork/angular\" rel=\"nofollow noreferrer\">StackBlitz</a>?"}, {"owner": {"reputation": 368, "user_id": 6550398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240c7db1960eaf56a7e53a208c64617a?s=128&d=identicon&r=PG&f=1", "display_name": "Subham", "link": "https://stackoverflow.com/users/6550398/subham"}, "reply_to_user": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "edited": false, "score": 0, "creation_date": 1559125712, "post_id": 56358087, "comment_id": 99320514, "body": "I am getting Body: Uint8Array(131) [0 \u2026 99] [100 \u2026 130]... If I remove toString().How do I get the body as JSON"}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 1, "creation_date": 1559126336, "post_id": 56358087, "comment_id": 99320848, "body": "You may need to use the text-encoding library polyfill to use TextDecoder: <a href=\"https://github.com/inexorabletash/text-encoding\" rel=\"nofollow noreferrer\">github.com/inexorabletash/text-encoding</a>"}, {"owner": {"reputation": 368, "user_id": 6550398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240c7db1960eaf56a7e53a208c64617a?s=128&d=identicon&r=PG&f=1", "display_name": "Subham", "link": "https://stackoverflow.com/users/6550398/subham"}, "edited": false, "score": 0, "creation_date": 1559126754, "post_id": 56358087, "comment_id": 99321067, "body": "By using JSON.parse(data.Body). I am able to get the JSON value in Observable but while subscribing still it is coming as undefined"}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "edited": false, "score": 1, "creation_date": 1559194720, "post_id": 56358087, "comment_id": 99346360, "body": "Please edit your snippets - make them line up and remove misleading comments. You cant get both -  <code>&#47;&#47; an error occurred</code> and <code>&#47;&#47; Here I am getting the value as  </code> in <code>if&#47;else</code> if you complete Observable"}], "owner": {"reputation": 368, "user_id": 6550398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/240c7db1960eaf56a7e53a208c64617a?s=128&d=identicon&r=PG&f=1", "display_name": "Subham", "link": "https://stackoverflow.com/users/6550398/subham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559126687, "creation_date": 1559124548, "last_edit_date": 1559126687, "question_id": 56358087, "link": "https://stackoverflow.com/questions/56358087/observable-casting-from-string-to-json", "title": "Observable casting from string to json", "body": "<p>I am reading a JSON file from an S3 bucket. I am able to read the JSON file which is in the S3 bucket but when I am trying to cast the String Value into JSON and return it with an Observable. While subscribing I am getting the result as undefined. Could you please suggest how to get value as JSON when subscribing the observable</p>\n\n<p>someexampleservice.ts</p>\n\n<pre><code>@Injectable()\nexport class SomeEXampleService  {\n\n_test2:any;\n\npublic getJSON(): Observable&lt;any&gt;  {\nreturn Observable.create(observer=&gt;{\n\n   const params = {\n  Bucket: 'some-bucket',\n   Key: 'some.json'\n    };\n\n   let s3 = new AWS.S3();\n  s3.getObject(params, function(err, data) {\n     if (err) {\n     console.error(err); // an error occurred\n   } else {\n\n      console.log(\"S3 VAlue\",data.Body); // Here I am getting the value as  \n     String\n\n    this._test2= data.Body.toString();\n    console.log(\"S5 VAlue\",this._test2);\n    }\n    });\n\n   observer.next( this._test2);\n\n  observer.complete();\n\n\n    }) ;\n   }\n</code></pre>\n\n<p>Basically, I am trying to get a JSON like below</p>\n\n<pre><code>public getJSON(): Observable&lt;any&gt; {\nreturn this.http.get(\"./assets/some.json\")//This same I am trying above \nwith the s3 path\n}\n</code></pre>\n\n<p>someTests.ts</p>\n\n<pre><code> export class AuthorizationService  {\n\n constructor(private _auth: AuthorizationService,\n          private _router: Router) { }\n\n ngOnInit(){\n\n\n this.getJSON().subscribe(data =&gt; {\n console.log(\"JsonValue\",data); //This is coming as undefined\n  });\n  }\n</code></pre>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 3543, "user_id": 1010911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/465c08c1433b9836d8880bafc7463161?s=128&d=identicon&r=PG", "display_name": "Bjorn &#39;Bjeaurn&#39; S", "link": "https://stackoverflow.com/users/1010911/bjorn-bjeaurn-s"}, "edited": false, "score": 0, "creation_date": 1559123627, "post_id": 56357720, "comment_id": 99319390, "body": "What error are you getting?"}], "answers": [{"comments": [{"owner": {"reputation": 536, "user_id": 9618781, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1q1iOgBZzsI/AAAAAAAAAAI/AAAAAAAAAhA/ZBqQxm7bK-I/photo.jpg?sz=128", "display_name": "Nikhil Zurunge", "link": "https://stackoverflow.com/users/9618781/nikhil-zurunge"}, "edited": false, "score": 1, "creation_date": 1559123824, "post_id": 56357798, "comment_id": 99319511, "body": "I was thinking the same!"}], "tags": [], "owner": {"reputation": 42804, "user_id": 2181397, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/616931b5c5ba8790a191fa6aea465c65?s=128&d=identicon&r=PG", "display_name": "brk", "link": "https://stackoverflow.com/users/2181397/brk"}, "is_accepted": true, "score": 3, "last_activity_date": 1559123657, "creation_date": 1559123657, "answer_id": 56357798, "question_id": 56357720, "link": "https://stackoverflow.com/questions/56357720/iterate-over-an-array-and-push-elements-to-an-object/56357798#56357798", "title": "Iterate over an Array and push elements to an Object", "body": "<p>You can use array map function and return an object with required keys</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let data = [{\r\n  identificationType: \"DL\",\r\n  identificationDesc: \"Test\",\r\n  referenceNumber: \"123456789\",\r\n  country: \"US\",\r\n  province: \"Illinois\"\r\n}]\r\n\r\nlet newData = data.map(function(item) {\r\n  return {\r\n    identificationType: item.identificationType,\r\n    identificationDesc: item.identificationDesc,\r\n    referenceNumber: item.referenceNumber,\r\n    issuedEntity: {\r\n      country: item.country,\r\n      province: item.province\r\n    }\r\n\r\n  }\r\n});\r\n\r\nconsole.log(newData)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 3543, "user_id": 1010911, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/465c08c1433b9836d8880bafc7463161?s=128&d=identicon&r=PG", "display_name": "Bjorn &#39;Bjeaurn&#39; S", "link": "https://stackoverflow.com/users/1010911/bjorn-bjeaurn-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1559123715, "creation_date": 1559123715, "answer_id": 56357814, "question_id": 56357720, "link": "https://stackoverflow.com/questions/56357720/iterate-over-an-array-and-push-elements-to-an-object/56357814#56357814", "title": "Iterate over an Array and push elements to an Object", "body": "<p>You can <code>map</code> over your original object and change it's internal values or addon external values to it. </p>\n\n<pre><code>myModel.identification.map(idObj =&gt; {\n   idObj.issuedEntity = {\n       province: idObj.province\n       country: idObj.country\n   }\n   delete idObj.province\n   delete idObj.country\n   return idObj\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559123921, "creation_date": 1559123921, "answer_id": 56357885, "question_id": 56357720, "link": "https://stackoverflow.com/questions/56357720/iterate-over-an-array-and-push-elements-to-an-object/56357885#56357885", "title": "Iterate over an Array and push elements to an Object", "body": "<p>I think problem here, we are using <code>=</code> instead of <code>:</code> colon when assigning value to object.</p>\n\n<pre><code>    myModel.identification.forEach(identificationObj =&gt; {\n    issuedEntity: {\n        province **=** identificationObj.issuedEntity.province,\n        country **=** identificationObj.issuedEntity.country,\n    }\n});\n</code></pre>\n\n<p>It should be like this</p>\n\n<pre><code>myModel.identification.forEach(identificationObj =&gt; {\n    issuedEntity: {\n        province: identificationObj.issuedEntity.province,\n        country: identificationObj.issuedEntity.country,\n    }\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31296, "user_id": 2622292, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ZKLxE.jpg?s=128&g=1", "display_name": "SiddAjmera", "link": "https://stackoverflow.com/users/2622292/siddajmera"}, "is_accepted": false, "score": 3, "last_activity_date": 1559124347, "creation_date": 1559124347, "answer_id": 56358012, "question_id": 56357720, "link": "https://stackoverflow.com/questions/56357720/iterate-over-an-array-and-push-elements-to-an-object/56358012#56358012", "title": "Iterate over an Array and push elements to an Object", "body": "<p>Just in case you might want to use <strong>ES6 Syntax</strong>, you'd do the same thing like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let data = [{\r\n  identificationType: \"DL\",\r\n  identificationDesc: \"Test\",\r\n  referenceNumber: \"123456789\",\r\n  country: \"US\",\r\n  province: \"Illinois\"\r\n}]\r\n\r\nlet newData = data.map(({\r\n  identificationType,\r\n  identificationDesc,\r\n  referenceNumber,\r\n  country,\r\n  province\r\n}) =&gt; ({\r\n  identificationType,\r\n  identificationDesc,\r\n  referenceNumber,\r\n  issuedEntity: {\r\n    country,\r\n    province\r\n  }\r\n}));\r\n\r\nconsole.log(newData)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1135, "user_id": 8880204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c01a3a55a3ca5f25a5bdedb2777d1e4e?s=128&d=identicon&r=PG", "display_name": "Saad Ahmed", "link": "https://stackoverflow.com/users/8880204/saad-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 56357798, "answer_count": 4, "score": 1, "last_activity_date": 1559172989, "creation_date": 1559123400, "last_edit_date": 1559172989, "question_id": 56357720, "link": "https://stackoverflow.com/questions/56357720/iterate-over-an-array-and-push-elements-to-an-object", "title": "Iterate over an Array and push elements to an Object", "body": "<p>I have an array object which looks like this</p>\n\n<pre><code>identificationType: \"DL\",\nidentificationDesc: \"Test\",\nreferenceNumber: \"123456789\",\ncountry: \"US\",\nprovince: \"Illinois\"\n</code></pre>\n\n<p>I want my data model to look like this</p>\n\n<pre><code>identificationType: \"DL\",\nidentificationDesc: \"Test\",\nreferenceNumber: \"123456789\",\nissuedEntity:{\ncountry: \"US\",\nprovince: \"Illinois\"\n}\n</code></pre>\n\n<p>Initially I assign array of Objects to a variable</p>\n\n<pre><code>identification: this.model['identificationArray'].\n</code></pre>\n\n<p>IdentificationArray is an array of Object and contains all the details but in a simple json format. I want to be able to somehow manipulate it and insert data by creating an issuedEntity object and then country and province details inside that object.</p>\n\n<p>For that I tried iterating over the array but I am getting error.Can someone help me figure out how to do it.</p>\n\n<pre><code>myModel.identification.forEach(identificationObj =&gt; {\nissuedEntity: {\nprovince = identificationObj.issuedEntity.province,\ncountry = identificationObj.issuedEntity.country,\n}\n} \n);\n</code></pre>\n"}, {"tags": ["angular", "typescript", "angular2-routing", "angular7", "angular-routing"], "comments": [{"owner": {"reputation": 19885, "user_id": 1961059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvYjK.jpg?s=128&g=1", "display_name": "rinukkusu", "link": "https://stackoverflow.com/users/1961059/rinukkusu"}, "edited": false, "score": 1, "creation_date": 1559126193, "post_id": 56357645, "comment_id": 99320771, "body": "Is your <code>ChangeDetectionStrategy</code> set to <code>OnPush</code> by any chance?"}, {"owner": {"reputation": 2003, "user_id": 2810015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/UUhNr.png?s=128&g=1", "display_name": "Nimish goel", "link": "https://stackoverflow.com/users/2810015/nimish-goel"}, "reply_to_user": {"reputation": 19885, "user_id": 1961059, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvYjK.jpg?s=128&g=1", "display_name": "rinukkusu", "link": "https://stackoverflow.com/users/1961059/rinukkusu"}, "edited": false, "score": 0, "creation_date": 1559126601, "post_id": 56357645, "comment_id": 99320991, "body": "No, it was not, I tried that also, but it is not working."}], "answers": [{"comments": [{"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "edited": false, "score": 1, "creation_date": 1559127317, "post_id": 56358867, "comment_id": 99321372, "body": "I&#39;ve chosen <code>switchMap</code>, but other operators may do the trick, depending on whether you expect multiple requests. <code>switchMap</code> will make sure the previous request is unsubscribed if it is unfinished when new data arrives."}, {"owner": {"reputation": 2003, "user_id": 2810015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/UUhNr.png?s=128&g=1", "display_name": "Nimish goel", "link": "https://stackoverflow.com/users/2810015/nimish-goel"}, "edited": false, "score": 0, "creation_date": 1559128411, "post_id": 56358867, "comment_id": 99322003, "body": "yeah, I tried, and it is still working same. When I am clicking anywhere on the page, it is redirecting, but not automatically."}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "reply_to_user": {"reputation": 2003, "user_id": 2810015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/UUhNr.png?s=128&g=1", "display_name": "Nimish goel", "link": "https://stackoverflow.com/users/2810015/nimish-goel"}, "edited": false, "score": 0, "creation_date": 1559130652, "post_id": 56358867, "comment_id": 99323219, "body": "Are you making this call in ngOnInit?"}, {"owner": {"reputation": 2003, "user_id": 2810015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/UUhNr.png?s=128&g=1", "display_name": "Nimish goel", "link": "https://stackoverflow.com/users/2810015/nimish-goel"}, "edited": false, "score": 0, "creation_date": 1559132169, "post_id": 56358867, "comment_id": 99324100, "body": "No, it is happening on a button click, When I will get the response, I want to redirect to another page."}, {"owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "reply_to_user": {"reputation": 2003, "user_id": 2810015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/UUhNr.png?s=128&g=1", "display_name": "Nimish goel", "link": "https://stackoverflow.com/users/2810015/nimish-goel"}, "edited": false, "score": 0, "creation_date": 1559136536, "post_id": 56358867, "comment_id": 99326878, "body": "There may be some issue where the click isn&#39;t considered &quot;complete&quot;. Can you try putting the call in ngOnInit and see if that works? If so, I&#39;d say there&#39;s an issue with the click event\u2026"}], "tags": [], "owner": {"reputation": 1886, "user_id": 8493521, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155601478282179/picture?type=large", "display_name": "Will Alexander", "link": "https://stackoverflow.com/users/8493521/will-alexander"}, "is_accepted": false, "score": 2, "last_activity_date": 1559127189, "creation_date": 1559127189, "answer_id": 56358867, "question_id": 56357645, "link": "https://stackoverflow.com/questions/56357645/page-redirecting-when-clicking-on-blank-space-on-angular-2/56358867#56358867", "title": "Page redirecting when clicking on blank space on angular 2", "body": "<p>Could you try something along these lines? (Multiple nested subscribes are not a good practice)</p>\n\n<pre><code>this.optimizationService\n      .runOptimization(this.runOptimizationModel)\n      .pipe(\n            switchMap(optiResult =&gt; this.optimizationService.notificationEvent),\n            filter(eventData =&gt; eventData &amp;&amp; eventData.length),\n            tap(eventData =&gt; this._router.navigate(/* extract URL data here */))\n      )\n      .subscribe();\n</code></pre>\n\n<p>I'm not entirely clear on what the first request does, or where you use its response, but the theory in my answer is to use RxJS operators to control the flow. Hope this is useful.</p>\n"}, {"tags": [], "owner": {"reputation": 2003, "user_id": 2810015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/UUhNr.png?s=128&g=1", "display_name": "Nimish goel", "link": "https://stackoverflow.com/users/2810015/nimish-goel"}, "is_accepted": true, "score": 0, "last_activity_date": 1565082355, "last_edit_date": 1565082355, "creation_date": 1559645927, "answer_id": 56442512, "question_id": 56357645, "link": "https://stackoverflow.com/questions/56357645/page-redirecting-when-clicking-on-blank-space-on-angular-2/56442512#56442512", "title": "Page redirecting when clicking on blank space on angular 2", "body": "<p>This solve my issue finally. </p>\n\n<blockquote>\n  <p>return this.zone.run(() => this.router.navigate(['/path/to/route']));</p>\n</blockquote>\n\n<p>Problem was, Router Navigate does not activate onInit after external request. The second subscription was using the external request for notification. </p>\n\n<p>Reference: <a href=\"https://github.com/angular/angular/issues/20112#issuecomment-398060545\" rel=\"nofollow noreferrer\">https://github.com/angular/angular/issues/20112#issuecomment-398060545</a></p>\n"}], "owner": {"reputation": 2003, "user_id": 2810015, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/UUhNr.png?s=128&g=1", "display_name": "Nimish goel", "link": "https://stackoverflow.com/users/2810015/nimish-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 56442512, "answer_count": 2, "score": 0, "last_activity_date": 1565082355, "creation_date": 1559123178, "last_edit_date": 1559645970, "question_id": 56357645, "link": "https://stackoverflow.com/questions/56357645/page-redirecting-when-clicking-on-blank-space-on-angular-2", "title": "Page redirecting when clicking on blank space on angular 2", "body": "<p>I want to redirect to another page when I get some response from the server. (This process is too slow, and take almost 60 seconds to get the response from server). Meanwhile, I will show some spinner kind of thing, And when I get the response, I will redirect to another page. Looks simple? </p>\n\n<p>Yes, But the problem is, <strong>Page is not getting redirected automatically when I get the response. It stays on the same page, Now, If I click anywhere on the page, It redirected to another page, Little weird situation.</strong> </p>\n\n<pre><code>this.optimizationService\n      .runOptimization(this.runOptimizationModel)\n      .subscribe(optimizationResult =&gt; {  // this is the first service which send request to server.\n\n        this.optimizationService.notificationEvent.subscribe(eventData =&gt; {\n          console.log(eventData); // this is another external service for notifications in which, when I will get the response, I want to redirect to another page. \n          if (eventData &amp;&amp; eventData.length) {\n            this._router.navigate([this.optimizationResultScreenURL, 'e1517589-905e-485b-b7ee-7bc6521dcc93']); // This is url rerouting. If I cut and paste this line after first service subscription, it is working fine. \n          }\n        });\n      });\n</code></pre>\n\n<p><strong>Is this situation, because, we are getting a response from the second service after 60 seconds. This is a little weird scenario, but it is happening. \n Is this 60 second the <em>villain</em>.</strong> </p>\n"}, {"tags": ["git", "typescript", "npm", "ecmascript-6", "yarnpkg"], "comments": [{"owner": {"reputation": 1912, "user_id": 1223773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aac75b053e30063b9e2663274b051fac?s=128&d=identicon&r=PG", "display_name": "burtek", "link": "https://stackoverflow.com/users/1223773/burtek"}, "edited": false, "score": 0, "creation_date": 1559123998, "post_id": 56357590, "comment_id": 99319616, "body": "Have you tried <code>import * as path from &#39;path&#47;src&#39;</code> ?"}, {"owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "reply_to_user": {"reputation": 1912, "user_id": 1223773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aac75b053e30063b9e2663274b051fac?s=128&d=identicon&r=PG", "display_name": "burtek", "link": "https://stackoverflow.com/users/1223773/burtek"}, "edited": false, "score": 0, "creation_date": 1559143930, "post_id": 56357590, "comment_id": 99331273, "body": "@burtek the <code>path</code> in question here is the core node <code>path</code> module. It ought to work OK."}], "answers": [{"comments": [{"owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "edited": false, "score": 0, "creation_date": 1559143830, "post_id": 56358043, "comment_id": 99331209, "body": "To clarify, the <code>import *</code> line is in the package being liked/added, not in the calling code. As I understand it, <code>yarn link</code> also just links folders, but that works fine with the local copy. What I need to understand is how/why the <code>yarn add</code> from the repo is not working in the same way, despite the folder structure being unchanged."}], "tags": [], "owner": {"reputation": 1912, "user_id": 1223773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aac75b053e30063b9e2663274b051fac?s=128&d=identicon&r=PG", "display_name": "burtek", "link": "https://stackoverflow.com/users/1223773/burtek"}, "is_accepted": false, "score": 0, "last_activity_date": 1559124433, "creation_date": 1559124433, "answer_id": 56358043, "question_id": 56357590, "link": "https://stackoverflow.com/questions/56357590/how-can-i-use-yarn-to-add-a-package-from-github-that-uses-typescript-and-has-not/56358043#56358043", "title": "How can I use yarn to add a package from github that uses typescript and has not been compiled?", "body": "<p><code>yarn add</code> does not \"compile typescript/ES6 on the fly\", it just links proper folders. When <code>yarn add</code>-ing from github, you can always import from repo's <code>src</code> directory:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import * as repo from 'repo/src';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9518, "user_id": 907575, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1b324e4900e79878eb518c1263b41795?s=128&d=identicon&r=PG", "display_name": "Piotr Migdal", "link": "https://stackoverflow.com/users/907575/piotr-migdal"}, "is_accepted": false, "score": 1, "last_activity_date": 1570368069, "creation_date": 1570368069, "answer_id": 58257639, "question_id": 56357590, "link": "https://stackoverflow.com/questions/56357590/how-can-i-use-yarn-to-add-a-package-from-github-that-uses-typescript-and-has-not/58257639#58257639", "title": "How can I use yarn to add a package from github that uses typescript and has not been compiled?", "body": "<p>You need to build files at some point.</p>\n\n<p>Within this repository <code>yarn build</code> (or any other build instruction if needed). You need to run it each time after you <code>yarn upgrade package-you-import</code>.</p>\n\n<p>For a longer answer, see <a href=\"https://stackoverflow.com/a/58257602/907575\">my answer to How to have npm install a TypeScript dependency from a GitHub URL?</a>.</p>\n"}], "owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2005, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1570368069, "creation_date": 1559123028, "last_edit_date": 1559143693, "question_id": 56357590, "link": "https://stackoverflow.com/questions/56357590/how-can-i-use-yarn-to-add-a-package-from-github-that-uses-typescript-and-has-not", "title": "How can I use yarn to add a package from github that uses typescript and has not been compiled?", "body": "<p>I have a git clone of an npm package which i have modified that works perfectly when I use <code>yarn link &lt;project name&gt;</code> to add it to a project locally. However, when I push it to GitHub and use <code>yarn add &lt;repo url&gt;#&lt;branch&gt;</code> in the same project instead of <code>yarn link</code>, I get a compilation error indicating that the typescript/ES6 has not compiled:</p>\n\n<pre><code> SyntaxError Plugin: Unexpected token *\n</code></pre>\n\n<p>Which relates to this line in the package I am adding:</p>\n\n<pre><code>import * as path from 'path'\n</code></pre>\n\n<p>How can I get <code>yarn add</code> to compile the typescript/ES6 on the fly from the GitHub version just like <code>yarn link</code> does with the local version?</p>\n\n<p>I'd rather not build it and commit the result to git as that adds an extra compilation step every time, which I or others might forget. </p>\n\n<p>Also for clarity: I'm not building and pushing to npm as it's a fork of a package that I don't own.</p>\n"}, {"tags": ["typescript"], "answers": [{"comments": [{"owner": {"reputation": 1355, "user_id": 10315665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TZVE8.jpg?s=128&g=1", "display_name": "Elias", "link": "https://stackoverflow.com/users/10315665/elias"}, "edited": false, "score": 0, "creation_date": 1559123812, "post_id": 56357778, "comment_id": 99319504, "body": "Do I then need to switch case the <code>event</code> to see which type actually was called?"}, {"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "reply_to_user": {"reputation": 1355, "user_id": 10315665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TZVE8.jpg?s=128&g=1", "display_name": "Elias", "link": "https://stackoverflow.com/users/10315665/elias"}, "edited": false, "score": 0, "creation_date": 1559124988, "post_id": 56357778, "comment_id": 99320145, "body": "Yes since we use the same function so there could be if/else/switch."}], "tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559150106, "last_edit_date": 1559150106, "creation_date": 1559123588, "answer_id": 56357778, "question_id": 56357282, "link": "https://stackoverflow.com/questions/56357282/how-to-create-typings-for-asynchronous-methods-method-overloading/56357778#56357778", "title": "How to create typings for asynchronous methods - method overloading", "body": "<p>In typescript function declaration can be define multiple times as per our needs but the actual function implementation should be in single time. Else we'll get the error - <em>Duplicate function implementation</em></p>\n\n<p>Unlike other languages, in typescript <strong>return type</strong> also can be overload based on different input params type.</p>\n\n<pre><code>function on(event: \"message\", cb: (msg: string) =&gt; void): void;\nfunction on(event: \"close\", cb: () =&gt; void): void;\nfunction on(event: \"message\" | \"close\", cb: (msg?: string) =&gt; void): void {\n    console.log(event);\n    cb(event);\n}\n\non(\"message\", msg =&gt; console.log(msg));\non(\"close\", () =&gt; console.log(\"no message\"));\n</code></pre>\n\n<p>But in reality below single line is more than sufficient</p>\n\n<pre><code>function on(event: \"message\" | \"close\", cb: (msg?: string) =&gt; void): void {\n     //implementation\n}\n</code></pre>\n"}], "owner": {"reputation": 1355, "user_id": 10315665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TZVE8.jpg?s=128&g=1", "display_name": "Elias", "link": "https://stackoverflow.com/users/10315665/elias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559150106, "creation_date": 1559122039, "last_edit_date": 1559122788, "question_id": 56357282, "link": "https://stackoverflow.com/questions/56357282/how-to-create-typings-for-asynchronous-methods-method-overloading", "title": "How to create typings for asynchronous methods - method overloading", "body": "<p>I was wondering how I would implement something like these (This was found in the @types from the node ws(WebSocket) module).</p>\n\n<pre><code>on(event: 'close', listener: (this: WebSocket, code: number, reason: string) =&gt; void): this;\non(event: 'error', listener: (this: WebSocket, err: Error) =&gt; void): this;\non(event: 'upgrade', listener: (this: WebSocket, request: http.IncomingMessage) =&gt; void): this;\non(event: 'message', listener: (this: WebSocket, data: WebSocket.Data) =&gt; void): this;\n</code></pre>\n\n<p>I'm able to just implement the declarations but as soon as I try and add a function body I get <code>Duplicate function implementation.ts(2393)\n</code></p>\n\n<p>This is the code that I'm trying to utilize: </p>\n\n<pre><code>  on(event: 'message',  cb: (msg: string) =&gt; void)  { this.CB_onMsg = cb; }\n  on(event: 'close',    cb: () =&gt; void)             { this.CB_onClose = cb; }\n</code></pre>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 1351, "user_id": 10363054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c526b69b7edeec99c74c6fdc5feaa7a?s=128&d=identicon&r=PG&f=1", "display_name": "Doflamingo19", "link": "https://stackoverflow.com/users/10363054/doflamingo19"}, "is_accepted": false, "score": 0, "last_activity_date": 1559122388, "creation_date": 1559122388, "answer_id": 56357391, "question_id": 56357280, "link": "https://stackoverflow.com/questions/56357280/change-doesnt-trigger-when-selection-all-checkboxes-and-records-not-getting-add/56357391#56357391", "title": "Change doesn&#39;t trigger when selection all checkboxes and records not getting added to the array", "body": "<p>I think is a problem about the parameter. This is the wrong method</p>\n\n<pre><code>&lt;td&gt;&lt;input type=\"checkbox\" [(ngModel)]=\"record.selected\" (change)=\"checkIfAllSelected(record); checkedForDeletion(record,$event);\"&gt;&lt;/td&gt;\n</code></pre>\n\n<p>The correct method is:</p>\n\n<pre><code>&lt;td&gt;&lt;input type=\"checkbox\" [(ngModel)]=\"record.selected\" (change)=\"checkIfAllSelected($event,record); checkedForDeletion($event,record);\"&gt;&lt;/td&gt;\n</code></pre>\n\n<p>There is also a parentesis problem</p>\n\n<pre><code>checkedForDeletion(record: any, event: any) {\n    const checked = event.target.checked;\n    if (checked) {\n      this.deletionList.push(record);\n      console.log(this.deletionList);\n    } else {\n      const index = this.deletionList.findIndex(list =&gt; list.id === record.id );\n      this.deletionList.splice(index, 1);\n      console.log(this.deletionList);\n    }\n}//add here to end the method above\n    selectAll() {\n    this.selectedAll = !this.selectedAll;\n    for (var i = 0; i &lt; this.ipRecords.length; i++) {\n      this.ipRecords[i].selected = this.selectedAll;\n  } \n\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 503, "user_id": 7996703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CKDvn.jpg?s=128&g=1", "display_name": "Jonathan K", "link": "https://stackoverflow.com/users/7996703/jonathan-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1559123938, "last_edit_date": 1559123938, "creation_date": 1559122523, "answer_id": 56357424, "question_id": 56357280, "link": "https://stackoverflow.com/questions/56357280/change-doesnt-trigger-when-selection-all-checkboxes-and-records-not-getting-add/56357424#56357424", "title": "Change doesn&#39;t trigger when selection all checkboxes and records not getting added to the array", "body": "<p>Make following minor changes:</p>\n\n<ol>\n<li><p>Add an <code>id</code> to your checkboxes</p>\n\n<pre><code>&lt;tr *ngFor=\"let record of ipRecords; let i = index;&gt;\n      &lt;td&gt;&lt;input type=\"checkbox\" id=\"checkboxId{{ i }}\" [(ngModel)]=\"record.selected\" (change)=\"checkIfAllSelected(record); checkedForDeletion(record,$event);\"&gt;&lt;/td&gt;\n      &lt;td&gt;{{record.ip}}&lt;/td&gt;\n      &lt;td&gt;{{record.forDomain}}&lt;/td&gt;\n      &lt;td&gt;{{record.status}}&lt;/td&gt;\n      &lt;td&gt;{{record.senderEmail}}&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre></li>\n<li><p>Update your <code>ts</code> component, to tick or untick your checkbox as appropriate</p>\n\n<pre><code>selectAll() {\n    this.selectedAll = !this.selectedAll;\n    for (var i = 0; i &lt; this.ipRecords.length; i++) {\n      let box = document.getElementById('checkboxId' + i) as HTMLInputElement;\n      box.checked = this.selectedAll; // toggle checked state here\n      this.ipRecords[i].selected = this.selectedAll;\n\n      let check = this.deletionList.findIndex(list =&gt; list.id === this.ipRecords[i].id );\n      if (check == -1) {\n         (this.selectedAll) ?  this.deletionList.push(this.ipRecords[i]) : ''; // only add if true\n      } else {\n         (!this.selectedAll) ? this.deletionList.splice(check, 1) : ''; // only remove if false\n      }\n\n    } \n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 319, "user_id": 11384062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0469a2d1cf62968669986aa6a2163e?s=128&d=identicon&r=PG&f=1", "display_name": "zuyi", "link": "https://stackoverflow.com/users/11384062/zuyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56357424, "answer_count": 2, "score": 0, "last_activity_date": 1559125672, "creation_date": 1559122032, "last_edit_date": 1559125672, "question_id": 56357280, "link": "https://stackoverflow.com/questions/56357280/change-doesnt-trigger-when-selection-all-checkboxes-and-records-not-getting-add", "title": "Change doesn&#39;t trigger when selection all checkboxes and records not getting added to the array", "body": "<p>I have checkbox in each row of the table if I check any checkbox in the table individually then checkedForDeletion() methond runs and it adds the added record in the array and removes it if unchecked however if i select the checkbox at the top in the table th heading then (change) doesn't get triggerd and records are not added and removed from the array based on checked status.\nI want that if user clicks on checkbox in the heading then all records should be push to the array and removed if used unchecks anyone row and so on.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>\n    &lt;table&gt;\n    &lt;tr&gt;\n              &lt;th class=\"id\"&gt;&lt;input type=\"checkbox\" (change)=\"selectAll();\" [checked]=\"selectedAll\"&gt;&lt;/th&gt;\n              &lt;th class=\"ip\"&gt;IP&lt;/th&gt;\n              &lt;th class=\"domain\"&gt;Domain&lt;/th&gt;\n              &lt;th class=\"status\"&gt;Status&lt;/th&gt;\n              &lt;th class=\"sender-mail\"&gt;Sender Email&lt;/th&gt;\n              &lt;th class=\"status\"&gt;Action&lt;/th&gt;\n            &lt;/tr&gt;\n            &lt;tr *ngFor=\"let record of ipRecords; let i = index;&gt;\n              &lt;td&gt;&lt;input type=\"checkbox\" [(ngModel)]=\"record.selected\" (change)=\"checkedForDeletion(record,$event);\"&gt;&lt;/td&gt;\n              &lt;td&gt;{{record.ip}}&lt;/td&gt;\n              &lt;td&gt;{{record.forDomain}}&lt;/td&gt;\n              &lt;td&gt;{{record.status}}&lt;/td&gt;\n              &lt;td&gt;{{record.senderEmail}}&lt;/td&gt;\n              &lt;td&gt;\n              &lt;/tr&gt;\n    &lt;/table&gt;\n</code></pre>\n\n<p>ts file</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    ipRecords: any;\n    deletionList: any;\n   selectedAll: any;\n\n    checkedForDeletion(record: any, event: any) {\n        const checked = event.target.checked;\n        if (checked) {\n          this.deletionList.push(record);\n          console.log(this.deletionList);\n        } else {\n          const index = this.deletionList.findIndex(list =&gt; list.id === record.id );\n          this.deletionList.splice(index, 1);\n          console.log(this.deletionList);\n        }\n\n        selectAll() {\n        this.selectedAll = !this.selectedAll;\n        for (var i = 0; i &lt; this.ipRecords.length; i++) {\n          this.ipRecords[i].selected = this.selectedAll;\n      } \n\n      }\n</code></pre>\n"}, {"tags": ["angular", "typescript", "ngrx", "ngrx-store"], "answers": [{"tags": [], "owner": {"reputation": 9151, "user_id": 10112124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6297e8a8df7affbe897ed476212148?s=128&d=identicon&r=PG", "display_name": "timdeschryver", "link": "https://stackoverflow.com/users/10112124/timdeschryver"}, "is_accepted": false, "score": 2, "last_activity_date": 1559128965, "creation_date": 1559128965, "answer_id": 56359440, "question_id": 56357223, "link": "https://stackoverflow.com/questions/56357223/how-can-i-set-an-entire-ngrx-store-and-then-trigger-all-reducers/56359440#56359440", "title": "How can I set an entire NGRX store and then trigger all reducers?", "body": "<p><a href=\"https://blog.angularindepth.com/keeping-browser-tabs-in-sync-using-localstorage-ngrx-and-rxjs-87de3bca4e2c\" rel=\"nofollow noreferrer\">Keeping browser tabs in sync using localStorage, NgRx, and RxJS</a> can help you here.</p>\n\n<p>Since you already solved the first problem:</p>\n\n<ol start=\"2\">\n<li>A meta-reducer is the best fit here:</li>\n</ol>\n\n<pre><code>// set state based on local storage\nexport function persistStateReducer(_reducer: ActionReducer&lt;State&gt;) {\n  const localStorageKey = '__groceries';\n  return (state: State | undefined, action: Action) =&gt; {\n    if (state === undefined) {\n      const persisted = localStorage.getItem(localStorageKey);\n      return persisted ? JSON.parse(persisted) : _reducer(state, action);\n    }\n\n    const nextState = _reducer(state, action);\n    localStorage.setItem(localStorageKey, JSON.stringify(nextState));\n    return nextState;\n  };\n}\n\n// reset the whole state via the action's payload\nexport function updateStateReducer(_reducer: ActionReducer&lt;State&gt;) {\n  return (state: State | undefined, action: Action) =&gt; {\n    if (action.type === 'UPDATE_GROCERIES_STATE') {\n      return (&lt;any&gt;action).payload.newState;\n    }\n\n    return _reducer(state, action);\n  };\n}\n</code></pre>\n\n<ol start=\"3\">\n<li>When you dispatch an action all of the reducers will be triggered</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 3133, "user_id": 2004532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rHrTR.jpg?s=128&g=1", "display_name": "N-ate", "link": "https://stackoverflow.com/users/2004532/n-ate"}, "is_accepted": true, "score": 0, "last_activity_date": 1559348411, "creation_date": 1559348411, "answer_id": 56402949, "question_id": 56357223, "link": "https://stackoverflow.com/questions/56357223/how-can-i-set-an-entire-ngrx-store-and-then-trigger-all-reducers/56402949#56402949", "title": "How can I set an entire NGRX store and then trigger all reducers?", "body": "<p>Something like this will do it:</p>\n\n<ol>\n<li><p>Get entire NGRX store:</p>\n\n<pre><code>let storeData$ = store.select(rootReducers.getRootState);\nlet subscription = storeData$.subscribe(everything =&gt; {\n    let json = JSON.stringify(everything);\n    //do what you want with all of your data here\n});\n</code></pre></li>\n<li><p>Set entire NGRX store: (my top level reducer interface looks like this)</p>\n\n<pre><code>export interface State { \n    something: topLevelReducers1.State;\n    anything: topLevelReducers2.State;\n    moreThings: topLevelReducers3.State;\n}\n</code></pre>\n\n<p>This makes it necessary to set each of these top level fields:</p>\n\n<pre><code>// here is the method //\nexport const dispatchSetRootState = (store:Store&lt;State&gt;, payload: State): void =&gt; {\n    store.dispatch(new SetSomethingState(payload.something));\n    store.dispatch(new SetAnythingAction(payload.anything));\n    store.dispatch(new SetMoreThingsAction(payload.moreThings));\n};\n\n// here is the usage //\nlet everything = JSON.parse(json);\ndispatchSetRootState(store, data);\n\n// since I have a lot of combineReducers I add a short-circuit//\nexport function reducers(state: any, action: any): any {\n    if(action.type == SomethingActionTypes.SET_SOMETHING_PROFILE) { // Sets entire object\n        return Object.assign({}, state, (&lt;PayloadAction&gt;action).payload);\n    }\n    else return combinedReducers(state, action);\n}\n</code></pre></li>\n<li><p>Is not necessary because setting as in #2 triggers all actions</p></li>\n</ol>\n"}], "owner": {"reputation": 3133, "user_id": 2004532, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/rHrTR.jpg?s=128&g=1", "display_name": "N-ate", "link": "https://stackoverflow.com/users/2004532/n-ate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 56402949, "answer_count": 2, "score": -4, "last_activity_date": 1559348411, "creation_date": 1559121870, "question_id": 56357223, "link": "https://stackoverflow.com/questions/56357223/how-can-i-set-an-entire-ngrx-store-and-then-trigger-all-reducers", "title": "How can I set an entire NGRX store and then trigger all reducers?", "body": "<p>How can I?</p>\n\n<ol>\n<li><strong>Get</strong> entire NGRX store data</li>\n<li><strong>Set</strong> entire NGRX store data</li>\n<li><strong>Trigger</strong> all reducers</li>\n</ol>\n\n<p>Background:</p>\n\n<p>I have an angular application that has many components tightly coupled to an NGRX store.</p>\n\n<p>I've reused these components for a flattened print layout of some of the information in the application. I use headless chrome to print the application to a pdf. Since the headless chrome is a different user-agent than the print-user's browser there is no data.</p>\n\n<p>I initially solved this problem by posting over some of the NGRX store and having the headless chrome replace it in the store. However as the print view has expanded the amount of data needed from the store has grown to be unmanageable. </p>\n\n<p>I would like to take the entire store data, then reinsert it into the other user-agent store, then trigger all reducers to ensure components update.</p>\n\n<p>I already know how to get all of the store data. I could use some help on putting it back into the store. What I need most is how to trigger all reducers without writing hundreds of dispatch statements.</p>\n"}, {"tags": ["reactjs", "typescript", "semantic-ui-react"], "answers": [{"comments": [{"owner": {"reputation": 5165, "user_id": 6927748, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/64f5dc909e0616a0f62882517b6170b4?s=128&d=identicon&r=PG&f=1", "display_name": "VJR08", "link": "https://stackoverflow.com/users/6927748/vjr08"}, "edited": false, "score": 0, "creation_date": 1559121542, "post_id": 56356970, "comment_id": 99318162, "body": "I am using this as a general handler ,  this.setState({[data.name]:data.value}) ; Also I am able to get the info related to this data object, but &quot;value&quot; field is not getting set"}, {"owner": {"reputation": 1338, "user_id": 8120827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0646c9ea234df80d26c35e88b97d730?s=128&d=identicon&r=PG&f=1", "display_name": "Ga&#235;l S", "link": "https://stackoverflow.com/users/8120827/ga%c3%abl-s"}, "reply_to_user": {"reputation": 5165, "user_id": 6927748, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/64f5dc909e0616a0f62882517b6170b4?s=128&d=identicon&r=PG&f=1", "display_name": "VJR08", "link": "https://stackoverflow.com/users/6927748/vjr08"}, "edited": false, "score": 1, "creation_date": 1559122036, "post_id": 56356970, "comment_id": 99318436, "body": "I missed the obvious: you need to add a <code>value</code> key in your array of data :)"}], "tags": [], "owner": {"reputation": 1338, "user_id": 8120827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0646c9ea234df80d26c35e88b97d730?s=128&d=identicon&r=PG&f=1", "display_name": "Ga&#235;l S", "link": "https://stackoverflow.com/users/8120827/ga%c3%abl-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1559122143, "last_edit_date": 1559122143, "creation_date": 1559121093, "answer_id": 56356970, "question_id": 56356772, "link": "https://stackoverflow.com/questions/56356772/semantic-ui-react-dropdown-does-not-set-the-value-onchange-react-typescript/56356970#56356970", "title": "Semantic UI React dropdown does not set the value onChange: React+ Typescript", "body": "<p>EDIT: You need to add a <code>value</code> key to the array of data.</p>\n\n<p>Look at how they generate data in their example : </p>\n\n<pre><code>const countryOptions = _.map(faker.definitions.address.country, country =&gt; ({\n  key: country,\n  text: country,\n  value: country\n}));\n\n</code></pre>\n\n<p>OLD ANSWER:\nThere is no such propertie as <code>data.name</code> in the <code>onChange</code> handler (<a href=\"https://codesandbox.io/s/semanticuireactexample-0ei16\" rel=\"nofollow noreferrer\">it prints undefined in this codesandbox</a>)</p>\n\n<p>I guess you should populate <code>location</code> key in the state : </p>\n\n<pre><code>dropdownChange = (event: React.SyntheticEvent&lt;HTMLElement&gt;, data:any) =&gt; {\n    this.setState({location: data.value})\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5165, "user_id": 6927748, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/64f5dc909e0616a0f62882517b6170b4?s=128&d=identicon&r=PG&f=1", "display_name": "VJR08", "link": "https://stackoverflow.com/users/6927748/vjr08"}, "edited": false, "score": 0, "creation_date": 1559121725, "post_id": 56357138, "comment_id": 99318268, "body": "Able to get the name property, the problem is only with data.value"}], "tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559121595, "creation_date": 1559121595, "answer_id": 56357138, "question_id": 56356772, "link": "https://stackoverflow.com/questions/56356772/semantic-ui-react-dropdown-does-not-set-the-value-onchange-react-typescript/56357138#56357138", "title": "Semantic UI React dropdown does not set the value onChange: React+ Typescript", "body": "<p>You can try like this.</p>\n\n<pre><code>//onchange event\ndropdownChange = (event: React.SyntheticEvent&lt;HTMLElement&gt;, data:any) =&gt; {\n    this.setState({[event.target.name]:data.value})\n}\n</code></pre>\n"}], "owner": {"reputation": 5165, "user_id": 6927748, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/64f5dc909e0616a0f62882517b6170b4?s=128&d=identicon&r=PG&f=1", "display_name": "VJR08", "link": "https://stackoverflow.com/users/6927748/vjr08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 56356970, "answer_count": 2, "score": 0, "last_activity_date": 1559122143, "creation_date": 1559120383, "last_edit_date": 1559120554, "question_id": 56356772, "link": "https://stackoverflow.com/questions/56356772/semantic-ui-react-dropdown-does-not-set-the-value-onchange-react-typescript", "title": "Semantic UI React dropdown does not set the value onChange: React+ Typescript", "body": "<p>I am implementing a semantic-ui-react dropdown and I am unable to set the value of this dropdown on change event.</p>\n\n<p>Help would be appreciated</p>\n\n<pre><code>//options object\nconst options =  [\n  {name: \"val1\" , label: \"val1\"},\n  {name: \"val2\" , label: \"val2\"},\n  {name: \"val3\" , label: \"val3\"}\n]\n\nthis.state= {location: ''} //state object\n\n\n//onchange event\ndropdownChange = (event: React.SyntheticEvent&lt;HTMLElement&gt;, data:any) =&gt; {\n    this.setState({[data.name]:data.value})\n}\n\n//select component\n&lt;Select options={options}\n  name=\"location\"  \n  value={this.state.location}\n  onChange={this.dropdownChange}\n/&gt;\n</code></pre>\n"}, {"tags": ["typescript", "service-worker", "web-worker"], "answers": [{"comments": [{"owner": {"reputation": 168, "user_id": 2107271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fkue9.png?s=128&g=1", "display_name": "andris.vilde", "link": "https://stackoverflow.com/users/2107271/andris-vilde"}, "edited": false, "score": 1, "creation_date": 1559218078, "post_id": 56374158, "comment_id": 99356355, "body": "Thanks for detailed explanation, @JaffaTheCake ! Bookmarking this."}, {"owner": {"reputation": 63670, "user_id": 379008, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Labo5.png?s=128&g=1", "display_name": "GibboK", "link": "https://stackoverflow.com/users/379008/gibbok"}, "edited": false, "score": 0, "creation_date": 1598457591, "post_id": 56374158, "comment_id": 112467490, "body": "Great answer +1. FYI I have created a minimal setup with a working example for TS with Web Worker, here my solution: <a href=\"https://github.com/gibbok/typescript-web-workers\" rel=\"nofollow noreferrer\">github.com/gibbok/typescript-web-workers</a> I use a cast to DedicatedWorkerGlobalScope to help TS get the types for self. I hope could be useful."}, {"owner": {"reputation": 126, "user_id": 3531152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83fd4de489840161bf9e89799c578d1f?s=128&d=identicon&r=PG&f=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/3531152/louis"}, "reply_to_user": {"reputation": 63670, "user_id": 379008, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Labo5.png?s=128&g=1", "display_name": "GibboK", "link": "https://stackoverflow.com/users/379008/gibbok"}, "edited": false, "score": 0, "creation_date": 1610315302, "post_id": 56374158, "comment_id": 116087858, "body": "@GibboK that project you linked doesn&#39;t solve the issue of conflicts between worker and dom types because it omits dom types completely, I think your example might be too minimal to be helpful in a real world situation."}], "tags": [], "owner": {"reputation": 10868, "user_id": 123395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34551f266d9bfdeed1e7f287c59f789d?s=128&d=identicon&r=PG", "display_name": "JaffaTheCake", "link": "https://stackoverflow.com/users/123395/jaffathecake"}, "is_accepted": true, "score": 57, "last_activity_date": 1559213806, "last_edit_date": 1559213806, "creation_date": 1559203467, "answer_id": 56374158, "question_id": 56356655, "link": "https://stackoverflow.com/questions/56356655/structuring-a-typescript-project-with-workers/56374158#56374158", "title": "Structuring a TypeScript project with workers", "body": "<p>Many thanks to <a href=\"https://stackoverflow.com/users/1321716/mattias-buelens\">Mattias Buelens</a> who pointed me in the right direction.</p>\n\n<p><a href=\"https://github.com/jakearchibald/typescript-worker-example\" rel=\"noreferrer\">Here's a working example</a>.</p>\n\n<p>The project structure is:</p>\n\n<ul>\n<li><code>dist</code></li>\n<li><code>src</code>\n\n<ul>\n<li><code>generic-tsconfig.json</code></li>\n<li><code>main</code>\n\n<ul>\n<li>(typescript files)</li>\n<li><code>tsconfig.json</code></li>\n</ul></li>\n<li><code>dedicated-worker</code>\n\n<ul>\n<li>(typescript files)</li>\n<li><code>tsconfig.json</code></li>\n</ul></li>\n<li><code>service-worker</code>\n\n<ul>\n<li>(typescript files)</li>\n<li><code>tsconfig.json</code></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<h1><code>src/generic-tsconfig.json</code></h1>\n\n<p>This contains the config common to each project:</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"esnext\",\n    \"module\": \"esnext\",\n    \"strict\": true,\n    \"moduleResolution\": \"node\",\n    \"rootDir\": \".\",\n    \"outDir\": \"../dist\",\n    \"composite\": true,\n    \"declarationMap\": true,\n    \"sourceMap\": true\n  }\n}\n</code></pre>\n\n<p>I've deliberately avoided calling this <code>tsconfig.json</code>, as it isn't a project itself. Adapt the above to your needs. Here are the important parts:</p>\n\n<ul>\n<li><code>outDir</code> - This is where the transpiled script, declarations and source maps will go.</li>\n<li><code>rootDir</code> - By setting this to the <code>src</code> directory, each of the subprojects (<code>main</code>, <code>dedicated-worker</code>, <code>service-worker</code>) will appear as subdirectories in the <code>outDir</code>, otherwise they'll try and share the same directory and overwrite each other.</li>\n<li><code>composite</code> - This is required for TypeScript to keep references between projects.</li>\n</ul>\n\n<p>Do not include <code>references</code> in this file. They'll be ignored for some undocumented reason (this is where I got stuck).</p>\n\n<h1><code>src/main/tsconfig.json</code></h1>\n\n<p>This is the config for the 'main thread' project, As in, the JavaScript that will have access to the document.</p>\n\n<pre><code>{\n  \"extends\": \"../generic-tsconfig.json\",\n  \"compilerOptions\": {\n    \"lib\": [\"esnext\", \"dom\"],\n  },\n  \"references\": [\n    {\"path\": \"../dedicated-worker\"},\n    {\"path\": \"../service-worker\"}\n  ]\n}\n</code></pre>\n\n<ul>\n<li><code>extends</code> - This points to our generic config above.</li>\n<li><code>compilerOptions.lib</code> - The libs used by this project. In this case, JS and the DOM.</li>\n<li><code>references</code> - Since this is the main project (the one we build), it must reference all other subprojects to ensure they're also built.</li>\n</ul>\n\n<h1><code>src/dedicated-worker/tsconfig.json</code></h1>\n\n<p>This is the config for the dedicated worker (the kind you create with <code>new Worker()</code>).</p>\n\n<pre><code>{\n  \"extends\": \"../generic-tsconfig.json\",\n  \"compilerOptions\": {\n    \"lib\": [\"esnext\", \"webworker\"],\n  }\n}\n</code></pre>\n\n<p>You don't need to reference the other sub projects here unless you import things from them (eg types).</p>\n\n<h1>Using dedicated worker types</h1>\n\n<p>TypeScript doesn't differentiate between different worker contexts, despite them having different globals. As such, things get a little messy:</p>\n\n<pre><code>postMessage('foo');\n</code></pre>\n\n<p>This works, as TypeScript's \"webworker\" types create globals for all dedicated worker globals. However:</p>\n\n<pre><code>self.postMessage('foo');\n</code></pre>\n\n<p>\u2026this fails, as TypeScript gives <code>self</code> a non-existent type that's sort-of an abstract worker global.</p>\n\n<p>To fix this, include this in your source:</p>\n\n<pre><code>declare var self: DedicatedWorkerGlobalScope;\nexport {};\n</code></pre>\n\n<p>This sets <code>self</code> to the correct type.</p>\n\n<p>The <code>declare var</code> bit doesn't work unless the file is a module, and the dummy export makes TypeScript treat it as a module. This means you're declaring <code>self</code> in the module scope, which doesn't currently exist. Otherwise, you're trying to declare it on the global, where it <em>does</em> already exist.</p>\n\n<h1><code>src/service-worker/tsconfig.json</code></h1>\n\n<p>Same as above.</p>\n\n<pre><code>{\n  \"extends\": \"../generic-tsconfig.json\",\n  \"compilerOptions\": {\n    \"lib\": [\"esnext\", \"webworker\"],\n  }\n}\n</code></pre>\n\n<h1>Using service worker types</h1>\n\n<p>As above, TypeScript's \"webworker\" types create globals for all dedicated worker globals. But this isn't a dedicated worker, so some of the types are incorrect:</p>\n\n<pre><code>postMessage('yo');\n</code></pre>\n\n<p>TypeScript doesn't complain about the above, but it'll fail at runtime as <code>postMessage</code> isn't on the service worker global.</p>\n\n<p>Unfortunately there's nothing you can do to fix the real global, but you can still fix <code>self</code>:</p>\n\n<pre><code>declare var self: ServiceWorkerGlobalScope;\nexport {};\n</code></pre>\n\n<p>Now you need to ensure every global that's special to service workers is accessed via <code>self</code>.</p>\n\n<pre><code>addEventListener('fetch', (event) =&gt; {\n  // This is a type error, as the global addEventListener\n  // doesn't know anything about the 'fetch' event.\n  // Therefore it doesn't know about event.request.\n  console.log(event.request);\n});\n\nself.addEventListener('fetch', (event) =&gt; {\n  // This works fine.\n  console.log(event.request);\n});\n</code></pre>\n\n<p>The same issues and workarounds exist for other worker types, such as worklets and shared workers.</p>\n\n<h1>Building</h1>\n\n<pre class=\"lang-sh prettyprint-override\"><code>tsc --build src/main\n</code></pre>\n\n<p>And that's it!</p>\n"}], "owner": {"reputation": 10868, "user_id": 123395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34551f266d9bfdeed1e7f287c59f789d?s=128&d=identicon&r=PG", "display_name": "JaffaTheCake", "link": "https://stackoverflow.com/users/123395/jaffathecake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9230, "favorite_count": 32, "accepted_answer_id": 56374158, "answer_count": 1, "score": 51, "last_activity_date": 1561363367, "creation_date": 1559120058, "last_edit_date": 1561363367, "question_id": 56356655, "link": "https://stackoverflow.com/questions/56356655/structuring-a-typescript-project-with-workers", "title": "Structuring a TypeScript project with workers", "body": "<p>How should I structure a project that includes main thread (DOM) script, and workers? Eg:</p>\n\n<h1>main.ts</h1>\n\n<pre><code>// This file must have DOM types, but not worker types.\n\nconst worker = new Worker('worker.js');\n\nworker.onmessage = (event) =&gt; {\n  // Ideally, I should be able to reference types from the worker:\n  const data = event.data as import('./worker').HelloMessage;\n  console.log(data.hello);\n};\n</code></pre>\n\n<h1>worker.ts</h1>\n\n<pre><code>// This file must have worker types, but not DOM types.\n// The global object must be one of the worker globals (how do I pick which?)\n\nconst helloMessage = {\n  hello: 'world',\n};\n\nexport type HelloMessage = typeof helloMessage;\n\npostMessage(helloMessage);\n</code></pre>\n\n<p>Whenever I've tried this in the past I feel like I've been fighting TypeScript by either:</p>\n\n<ul>\n<li>Using one <code>tsconfig.json</code> that has both worker &amp; DOM types. But of course this isn't accurate type-wise.</li>\n<li>Using multiple <code>tsconfig.json</code>. But then the project boundary makes it hard to reference types between them.</li>\n</ul>\n\n<p>Additionally, how do I declare the global in a worker? Previously I've used <code>declare var self: DedicatedWorkerGlobalScope</code>, but is there a way to actually set the global (rather than just setting <code>self</code>)?</p>\n"}, {"tags": ["javascript", "angular", "typescript", "sorting"], "answers": [{"tags": [], "owner": {"reputation": 26836, "user_id": 1132354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BaAv.png?s=128&g=1", "display_name": "Nikhil Aggarwal", "link": "https://stackoverflow.com/users/1132354/nikhil-aggarwal"}, "is_accepted": true, "score": 0, "last_activity_date": 1559119495, "creation_date": 1559119495, "answer_id": 56356469, "question_id": 56356439, "link": "https://stackoverflow.com/questions/56356439/how-can-i-sort-a-collection-based-in-the-given-order-in-other-array/56356469#56356469", "title": "How can I sort a collection based in the given order in other array", "body": "<p>You can pass a <strong>comparator</strong> to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\" rel=\"nofollow noreferrer\">Array.sort</a> which compares/sorts by <code>index</code> of <code>children[0].id</code> in <code>orderArray</code> array</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let data = [{name:\"A\",type:\"AA\",children:[{id:1,name:\"Child-A\",admin:[\"Y\"]}],other:\"NA\"},{name:\"B\",type:\"BB\",children:[{id:2,name:\"Child-B\"}],other:\"NA\"},{name:\"C\",type:\"CC\",children:[{id:3,name:\"Child-C\"}],other:\"NA\"}];\r\nlet orderArray = [3, 1, 2];\r\n\r\ndata.sort((a,b) =&gt; orderArray.indexOf(a.children[0].id) - orderArray.indexOf(b.children[0].id));\r\nconsole.log(data);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 17679, "user_id": 7603109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BoIE4.png?s=128&g=1", "display_name": "Adrita Sharma", "link": "https://stackoverflow.com/users/7603109/adrita-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1559119575, "creation_date": 1559119575, "answer_id": 56356499, "question_id": 56356439, "link": "https://stackoverflow.com/questions/56356439/how-can-i-sort-a-collection-based-in-the-given-order-in-other-array/56356499#56356499", "title": "How can I sort a collection based in the given order in other array", "body": "<p>Try this:</p>\n\n<pre><code>var newdataArray = []\n\norderArray.forEach(index =&gt; {\n    newdataArray.push(data[index - 1])\n});\n\ndata = newdataArray\n</code></pre>\n"}], "owner": {"reputation": 215, "user_id": 6568459, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1212447805467365/picture?type=large", "display_name": "Hector Landete", "link": "https://stackoverflow.com/users/6568459/hector-landete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1559119611, "accepted_answer_id": 56356469, "answer_count": 2, "score": 0, "last_activity_date": 1559119660, "creation_date": 1559119361, "question_id": 56356439, "link": "https://stackoverflow.com/questions/56356439/how-can-i-sort-a-collection-based-in-the-given-order-in-other-array", "closed_reason": "Duplicate", "title": "How can I sort a collection based in the given order in other array", "body": "<p>I have a array of ibject with another object inside each element like</p>\n\n<pre><code>data = [\n  {\n    name: \"A\",\n    type: \"AA\",\n    children: [ { id: 1, name: \"Child-A\", admin: [\"Y\"] }],\n    other: \"NA\"\n  },\n  {\n    name: \"B\",\n    type: \"BB\",\n    children: [ { id: 2, name: \"Child-B\" }],\n    other: \"NA\"\n  },\n  {\n    name: \"C\",\n    type: \"CC\",\n    children: [ { id: 3, name: \"Child-C\" }],\n    other: \"NA\"\n  }\n\n] \n</code></pre>\n\n<p>I want to order the whole collection by the <code>children.id</code> value but based on the order given by another array</p>\n\n<pre><code>orderArray = [3, 1, 2] \n</code></pre>\n\n<p>So the output would be </p>\n\n<pre><code>data =[\n    {\n        name: \"C\",\n        type: \"CC\",\n        children: [ { id: 3, name: \"Child-C\" }],\n        other: \"NA\"\n    },\n    {\n        name: \"A\",\n        type: \"AA\",\n        children: [ { id: 1, name: \"Child-A\", admin: [\"Y\"] }],\n        other: \"NA\"\n    },\n    {\n        name: \"B\",\n        type: \"BB\",\n        children: [ { id: 2, name: \"Child-B\" }],\n        other: \"NA\"\n    }\n]\n</code></pre>\n"}, {"tags": ["typescript", "momentjs", "visual-studio-2019"], "comments": [{"owner": {"reputation": 20729, "user_id": 1470607, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/6CA0X.png?s=128&g=1", "display_name": "Etheryte", "link": "https://stackoverflow.com/users/1470607/etheryte"}, "edited": false, "score": 0, "creation_date": 1559121222, "post_id": 56356425, "comment_id": 99317975, "body": "Why do you even need to add manual types here? Inferred types and not specifying should be sufficient."}, {"owner": {"reputation": 2377, "user_id": 1561922, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6b1e1632e072f174d9561f3d3796da0c?s=128&d=identicon&r=PG", "display_name": "geoyws", "link": "https://stackoverflow.com/users/1561922/geoyws"}, "reply_to_user": {"reputation": 20729, "user_id": 1470607, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/6CA0X.png?s=128&g=1", "display_name": "Etheryte", "link": "https://stackoverflow.com/users/1470607/etheryte"}, "edited": false, "score": 0, "creation_date": 1559122126, "post_id": 56356425, "comment_id": 99318490, "body": "it&#39;s giving me red squiggly lines in Visual Studio 2019"}, {"owner": {"reputation": 24465, "user_id": 4131048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7fa62a0a8d08d01ae848ea7fdee8e9?s=128&d=identicon&r=PG&f=1", "display_name": "VincenzoC", "link": "https://stackoverflow.com/users/4131048/vincenzoc"}, "edited": false, "score": 2, "creation_date": 1559124298, "post_id": 56356425, "comment_id": 99319781, "body": "Did you followed instructions of <a href=\"http://momentjs.com/docs/#/use-it/typescript/\" rel=\"nofollow noreferrer\">Where to use it =&gt; Typescript</a> section of the docs?"}], "owner": {"reputation": 2377, "user_id": 1561922, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6b1e1632e072f174d9561f3d3796da0c?s=128&d=identicon&r=PG", "display_name": "geoyws", "link": "https://stackoverflow.com/users/1561922/geoyws"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559122174, "creation_date": 1559119337, "last_edit_date": 1559122174, "question_id": 56356425, "link": "https://stackoverflow.com/questions/56356425/is-there-a-better-way-to-use-moment-with-typescript-visual-studio-2019-red-squi", "title": "Is there a better way to use Moment with TypeScript (Visual Studio 2019 red squiggly lines)?", "body": "<p>Right now it looks like we have to type a lot:</p>\n\n<pre><code>nextTimePeriod(momentString: string) {\n    this.today = moment(this.today).add(1, &lt;moment.unitOfTime.DurationConstructor&gt;(momentString + 's'));\n    this.startDate = moment(this.today).startOf(&lt;moment.unitOfTime.StartOf&gt;momentString);\n}\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "security"], "comments": [{"owner": {"reputation": 253913, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 2, "creation_date": 1559119145, "post_id": 56356344, "comment_id": 99316775, "body": "It&#39;s the user&#39;s own browser - in the end, they can run whatever code they want, and they may monkeypatch whatever they want as well."}, {"owner": {"reputation": 1599, "user_id": 10761855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f922c17d0f874828a961bff1490bf451?s=128&d=identicon&r=PG&f=1", "display_name": "Vadim Hulevich", "link": "https://stackoverflow.com/users/10761855/vadim-hulevich"}, "edited": false, "score": 0, "creation_date": 1559119506, "post_id": 56356344, "comment_id": 99316954, "body": "maybe only eslint rule <a href=\"https://eslint.org/docs/rules/no-global-assign\" rel=\"nofollow noreferrer\">eslint.org/docs/rules/no-global-assign</a>"}, {"owner": {"reputation": 5664, "user_id": 4790610, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-Y-O9RmPGhkE/AAAAAAAAAAI/AAAAAAAAADg/k97LiSbLzhA/photo.jpg?sz=128", "display_name": "Andreas Gassmann", "link": "https://stackoverflow.com/users/4790610/andreas-gassmann"}, "edited": false, "score": 0, "creation_date": 1559120171, "post_id": 56356344, "comment_id": 99317374, "body": "If the user wants to do that himself I can live with it. But I want to prevent other libraries to interfere with mine. So if locking the global variables is not possible, is there a way to &quot;sandbox&quot; the different dependencies? I read the proposal about <code>realms</code>. I think this would be what I&#39;m looking for, but it&#39;s not ready yet."}], "answers": [{"comments": [{"owner": {"reputation": 5664, "user_id": 4790610, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-Y-O9RmPGhkE/AAAAAAAAAAI/AAAAAAAAADg/k97LiSbLzhA/photo.jpg?sz=128", "display_name": "Andreas Gassmann", "link": "https://stackoverflow.com/users/4790610/andreas-gassmann"}, "edited": false, "score": 0, "creation_date": 1559125786, "post_id": 56357476, "comment_id": 99320558, "body": "You came to the same conclusion as I. You have to ensure to be the <i>first</i> to freeze/lock objects, before someone else can overwrite anything. Your solution seems to work for crypto, but for example &quot;Proxy&quot; and &quot;Promise&quot; can still be overwritten. My initial thought would be to create <code>const safeProxy = Proxy</code> and lock it&#39;s properties, so you can always rely on safeProxy being there and in it&#39;s original form. BTW, your last approach with the iframe doesn&#39;t work, because one can simply overwrite the <code>document.createElement</code> function :)."}], "tags": [], "owner": {"reputation": 8395, "user_id": 6567275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e298067d69d9ef222a00222374549af1?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6567275/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1559123010, "last_edit_date": 1559123010, "creation_date": 1559122683, "answer_id": 56357476, "question_id": 56356344, "link": "https://stackoverflow.com/questions/56356344/how-to-protect-global-variables-window-from-being-overwritten/56357476#56357476", "title": "How to protect global variables (window) from being overwritten", "body": "<p>Disclaimer: All this is just a rough outline, not thoroughly tested. I'm sure there are more problems to solve.</p>\n\n<hr>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\" rel=\"nofollow noreferrer\">freezing</a> the window-object is no option, this would just cause problems, but maybe Objects like <code>window.crypto</code>? </p>\n\n<p>But you can re-define properties to be no longer changeable, even on the window-object</p>\n\n<pre><code>function freezeProp(target, propertyName) {\n  const { value, get = () =&gt; value, set = () =&gt; void 0, ...desc } = Object.getOwnPropertyDescriptor(target, propertyName);\n  Object.defineProperty(target, propertyName, { ...desc, get, set, configurable: false });\n}\n\nfreezeProp(window, \"crypto\");\n</code></pre>\n\n<p>But these methods only work out if you can ensure that you are the first script to run.</p>\n\n<p>Detecting if some methods have been changed is also just possible if you have a reference to them; and we're back at being the first script to run.</p>\n\n<hr>\n\n<p>But if you're not sure wether the global scope has been spoiled, why not get a fresh window-object?</p>\n\n<pre><code>window.crypto.getRandomValues = () =&gt; {\n  return [1]\n};\n\nconst secure = (() =&gt; {\n  let iframe = document.createElement(\"iframe\");\n  document.body.appendChild(iframe);\n  const contentWindow = iframe.contentWindow;\n  document.body.removeChild(iframe);\n  return contentWindow;\n})();\n\nvar a = window.crypto.getRandomValues(new Uint8Array(1));\nconsole.log(a);\n\nvar b = secure.crypto.getRandomValues(new Uint8Array(1));\nconsole.log(b);\n</code></pre>\n"}], "owner": {"reputation": 5664, "user_id": 4790610, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-Y-O9RmPGhkE/AAAAAAAAAAI/AAAAAAAAADg/k97LiSbLzhA/photo.jpg?sz=128", "display_name": "Andreas Gassmann", "link": "https://stackoverflow.com/users/4790610/andreas-gassmann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 56357476, "answer_count": 1, "score": 0, "last_activity_date": 1559123010, "creation_date": 1559119068, "question_id": 56356344, "link": "https://stackoverflow.com/questions/56356344/how-to-protect-global-variables-window-from-being-overwritten", "title": "How to protect global variables (window) from being overwritten", "body": "<p>I am currently working on a project where security is very important. By default, all global variables/properties like <code>Promise</code> or even <code>crypto</code> can be overwritten.</p>\n\n<p>Is there a way to protect them from being overwritten?</p>\n\n<p>Example:</p>\n\n<pre><code>window.crypto.getRandomValues = () =&gt; { return [1] }\n\nwindow.crypto.getRandomValues(new Uint32Array(1))[0] // 1\n</code></pre>\n\n<p>My first thought was to use <code>Object.freeze()</code> to lock the object, but one can simply overwrite the <code>Object.freeze</code> method so it does nothing.</p>\n\n<p>We are already very selective of the dependencies we use, but I would still like to make sure that those variables can not be overwritten. Or at least detect if they were overwritten.</p>\n"}, {"tags": ["angular", "typescript"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4676340"}, "is_accepted": false, "score": 0, "last_activity_date": 1559115926, "creation_date": 1559115926, "answer_id": 56355453, "question_id": 56355407, "link": "https://stackoverflow.com/questions/56355407/angular-typescriptcombine-2-api-calls-in-one-promise/56355453#56355453", "title": "Angular typescript:combine 2 api calls in one promise", "body": "<pre><code>doBoth() {\n  return forkJoin(\n    this.getControls().pipe(map(response =&gt; response.json())),\n    this.getControlsECC().pipe(map(response =&gt; response.json())),\n  ).toPromise()\n    .catch(this.handleError);\n}\n\ngetControls() {\n    return this.http.get&lt;Control[]&gt;(this.controlsUrl);\n}\n\ngetControlsECC() {\n  return this.http.get&lt;Control[]&gt;(this.controlsECC);\n}\n</code></pre>\n"}], "owner": {"reputation": 735, "user_id": 5698825, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/cacca43d703d28a63d908a89b11bbfa4?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Haughton", "link": "https://stackoverflow.com/users/5698825/daniel-haughton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559115957, "creation_date": 1559115759, "question_id": 56355407, "link": "https://stackoverflow.com/questions/56355407/angular-typescriptcombine-2-api-calls-in-one-promise", "title": "Angular typescript:combine 2 api calls in one promise", "body": "<p>So at the minute I have two methods in my service that make API calls as below.\nThey both return the same type of object as JSON, which is a Control</p>\n\n<p>How can I combine them in a way that the method does do \"getControls\", then do \"getControlsECC\" and then add them together and return?</p>\n\n<pre><code>getControls(): Promise&lt;Control[]&gt; {\n    return this.http.get(this.controlsUrl)\n           .toPromise()\n           .then(response =&gt; response.json() as Control[])\n           .catch(this.handleError);\n}\n\ngetControlsECC(): Promise&lt;Control[]&gt; {\n  return this.http.get(this.controlsECC)\n         .toPromise()\n         .then(response =&gt; response.json() as Control[])\n         .catch(this.handleError);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["javascript", "typescript"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 2, "creation_date": 1559114797, "post_id": 56355117, "comment_id": 99314450, "body": "It seems to be a problem with extrapolating the code path. In the latter case it&#39;s absolutely clear that if <code>index</code> is <code>undefined</code>, then you would not take the code path that does  <code>myArr[index]</code>. When you introduce the level of indirection from the first example, it&#39;s not immediately clear that <code>myArr[index]</code> will not be called when <code>index</code> is <code>undefined</code>."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 2, "creation_date": 1559115697, "post_id": 56355117, "comment_id": 99314925, "body": "This is the way code analysis works, if you do the check inline it can follow the logic and narrow the variable if you put it in a variable it will not be able to follow the logic."}], "answers": [{"tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1559120178, "last_edit_date": 1559120178, "creation_date": 1559119076, "answer_id": 56356347, "question_id": 56355117, "link": "https://stackoverflow.com/questions/56355117/ts2538-type-undefined-cannot-be-used-as-an-index-type-when-check-assigned-to/56356347#56356347", "title": "TS2538 Type &#39;undefined&#39; cannot be used as an index type. when check assigned to variable", "body": "<p>Due to some indirection in the code flow, Typescript won't follow code analysis as we expect. so this is where <strong>User Defined Type Guards</strong> comes into the picture to rescue.</p>\n\n<pre><code>function isUndefined(index: any): index is boolean {\n    return typeof index === \"undefined\";\n}\n\nfunction getData(index?: number) {\n    return isUndefined(index) ? myArr[index] : {};\n}\n</code></pre>\n\n<p>Because <code>index</code> is optional in getData function so it's possibly be <code>undefined</code>, so your second approach works.</p>\n"}, {"comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1559122203, "post_id": 56356687, "comment_id": 99318532, "body": "<code>typeof index !== &#39;undefined&#39;</code> is not even needed here. The variable <code>index</code> is <i>by definition</i> present - you&#39;d want to do the <code>typeof</code> check to avoid referencing an undefined variable. The other problem that <code>typeof</code> solves is <code>undefined</code> is...not actually the value <code>undefined</code>. I&#39;d say that if you have <i>that</i> problem, then there is something bigger that&#39;s amiss and <code>typeof</code> is just treating the symptom, not the problem."}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1559122408, "post_id": 56356687, "comment_id": 99318649, "body": "As a side note, you can still redefine <code>undefined</code> even with strict mode. I was surprised to find this out, honestly. <code>test = undefined =&gt; &quot;a&quot; == undefined</code> and then try calling <code>test(&quot;a&quot;)</code>"}, {"owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "reply_to_user": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1559127613, "post_id": 56356687, "comment_id": 99321546, "body": "@VLAZ My bad it is since ES2015. Yes you can name a parameter <code>undefined</code> but it is just a bad practice. The user of your API can&#39;t change your <code>undefined</code>, it is enough to write strong code."}], "tags": [], "owner": {"reputation": 15625, "user_id": 3786294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o0RBY.png?s=128&g=1", "display_name": "Paleo", "link": "https://stackoverflow.com/users/3786294/paleo"}, "is_accepted": false, "score": 0, "last_activity_date": 1559127517, "last_edit_date": 1559127517, "creation_date": 1559120157, "answer_id": 56356687, "question_id": 56355117, "link": "https://stackoverflow.com/questions/56355117/ts2538-type-undefined-cannot-be-used-as-an-index-type-when-check-assigned-to/56356687#56356687", "title": "TS2538 Type &#39;undefined&#39; cannot be used as an index type. when check assigned to variable", "body": "<p>Type guards don't work with intermediate variables. You have to directly test the variable:</p>\n\n<pre><code>function getData(index?: number) {\n  return index !== undefined ? myArr[index] : {};\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>function getData(index?: number) {\n  if (index === undefined)\n    return {};\n  return myArr[index]\n}\n</code></pre>\n\n<p>See also: <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-guards-and-differentiating-types\" rel=\"nofollow noreferrer\">documentation from the handbook on <strong>type guards</strong></a>.</p>\n\n<p>Notice: <code>typeof index !== 'undefined'</code> is not required nowadays: <a href=\"https://stackoverflow.com/questions/34596489/es2015-2016-way-of-typeof-varname-undefined\">ES2015/2016 way of &#39;typeof varName === &#39;undefined`?</a></p>\n"}], "owner": {"reputation": 140, "user_id": 2399010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c59f93720f3840fd9fc03dd1312e0833?s=128&d=identicon&r=PG", "display_name": "jepek", "link": "https://stackoverflow.com/users/2399010/jepek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4648, "favorite_count": 0, "answer_count": 2, "score": 5, "last_activity_date": 1559127517, "creation_date": 1559114569, "question_id": 56355117, "link": "https://stackoverflow.com/questions/56355117/ts2538-type-undefined-cannot-be-used-as-an-index-type-when-check-assigned-to", "title": "TS2538 Type &#39;undefined&#39; cannot be used as an index type. when check assigned to variable", "body": "<p>I get TS error:</p>\n\n<blockquote>\n  <p>TypeScript error: Type 'undefined' cannot be used as an index type.  TS2538</p>\n</blockquote>\n\n<p>For this simple function (getting object from array based on provided index):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const myArr: Array&lt;object&gt; = [{name: 'John'}, {name: 'Tom'}]\n\nfunction getData(index?: number) {\n    const isIndex : boolean = typeof index !== 'undefined';\n\n    return isIndex ? myArr[index] : {};\n}\n</code></pre>\n\n<p>What's more mysterious for me is that when I change it to:</p>\n\n<pre><code>function getData(index?: number) {\n    return typeof index !== 'undefined' ? myArr[index] : {};\n}\n</code></pre>\n\n<p>Everything works like a charm - why?</p>\n"}, {"tags": ["javascript", "typescript"], "answers": [{"tags": [], "owner": {"reputation": 2058, "user_id": 6363697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NySXK.jpg?s=128&g=1", "display_name": "saurabh", "link": "https://stackoverflow.com/users/6363697/saurabh"}, "is_accepted": false, "score": 0, "last_activity_date": 1559114100, "creation_date": 1559114100, "answer_id": 56354980, "question_id": 56354714, "link": "https://stackoverflow.com/questions/56354714/typescript-error-messages-for-javascript-file/56354980#56354980", "title": "Typescript error messages for javascript file", "body": "<p>If it is a minified js you can simply <strong>ignore/exclude</strong> that file in <code>tsconfig</code>.</p>\n\n<p>tsconfig documentation <a href=\"http://www.typescriptlang.org/docs/handbook/tsconfig-json.html\" rel=\"nofollow noreferrer\">link</a></p>\n"}, {"comments": [{"owner": {"reputation": 9130, "user_id": 693560, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e71609811ad09d2eba439b051790fbc7?s=128&d=identicon&r=PG", "display_name": "Bronzato", "link": "https://stackoverflow.com/users/693560/bronzato"}, "edited": false, "score": 0, "creation_date": 1559115346, "post_id": 56355105, "comment_id": 99314757, "body": "Please see my updated question where I show that I copy/paste js code inside ts file. I tried your solution but it didn&#39;t work. Maybe I did wrong."}, {"owner": {"reputation": 1073, "user_id": 4865073, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GHGHaigrBpU/AAAAAAAAAAI/AAAAAAAAFHE/4QSezUxa8f8/photo.jpg?sz=128", "display_name": "ramirozap", "link": "https://stackoverflow.com/users/4865073/ramirozap"}, "reply_to_user": {"reputation": 9130, "user_id": 693560, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e71609811ad09d2eba439b051790fbc7?s=128&d=identicon&r=PG", "display_name": "Bronzato", "link": "https://stackoverflow.com/users/693560/bronzato"}, "edited": false, "score": 0, "creation_date": 1559116549, "post_id": 56355105, "comment_id": 99315395, "body": "Should work, check this <a href=\"https://codesandbox.io/s/dark-dawn-wl788\" rel=\"nofollow noreferrer\">codesandbox</a> it has the same code, if you remove the top comment all problems appear on the console, try closing and opening VSCode."}, {"owner": {"reputation": 9130, "user_id": 693560, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e71609811ad09d2eba439b051790fbc7?s=128&d=identicon&r=PG", "display_name": "Bronzato", "link": "https://stackoverflow.com/users/693560/bronzato"}, "edited": false, "score": 0, "creation_date": 1559117987, "post_id": 56355105, "comment_id": 99316172, "body": "When I check your codesandbox, after several seconds everything is red underlined. Even the 1st line of import of jquery is not found. Any idea ?"}], "tags": [], "owner": {"reputation": 1073, "user_id": 4865073, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GHGHaigrBpU/AAAAAAAAAAI/AAAAAAAAFHE/4QSezUxa8f8/photo.jpg?sz=128", "display_name": "ramirozap", "link": "https://stackoverflow.com/users/4865073/ramirozap"}, "is_accepted": false, "score": 0, "last_activity_date": 1559116311, "last_edit_date": 1559116311, "creation_date": 1559114527, "answer_id": 56355105, "question_id": 56354714, "link": "https://stackoverflow.com/questions/56354714/typescript-error-messages-for-javascript-file/56355105#56355105", "title": "Typescript error messages for javascript file", "body": "<p>If you are using TSLint you could wrap that code between these comments:</p>\n\n<pre><code>panel(){\n\n/* tslint:disable */\n!function(e){\"use strict\";function i(i,a){var s=i.outerWidth(!0),o={};if(!i.is(\":visible\")&amp;&amp;!n){switch(n=!0,i.addClass(\"ps-active-panel\").css({position:\"fixed\",top:0,height:\"100%\",\"z-index\":9999999999}),i.data(a),e(\"html\").addClass(\"overflow-hidden\"),e(\"body\").addClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").bind(\"touchmove\",!1),e(\"#eskimo-overlay\").fadeIn(200),a.side){case\"left\":i.css({left:\"-\"+s+\"px\",right:\"auto\"}),o.left=\"+=\"+s;break;case\"right\":i.css({left:\"auto\",right:\"-\"+s+\"px\"}),o.right=\"+=\"+s}t.animate({},a.duration),i.show().animate(o,a.duration,function(){n=!1,\"function\"==typeof a.onOpen&amp;&amp;a.onOpen()})}}var t=e(\"body\"),n=!1;e.panelslider=function(t,n){var a=e(\".ps-active-panel\");n=e.extend({},{side:\"left\",duration:200,clickClose:!0,onOpen:null},n),a.is(\":visible\")&amp;&amp;a[0]!=t[0]?e.panelslider.close(function(){i(t,n)}):a.length&amp;&amp;!a.is(\":hidden\")||i(t,n)},e.panelslider.close=function(i){var a=e(\".ps-active-panel\"),s=a.data(\"duration\"),o=a.outerWidth(!0),l={};if(a.length&amp;&amp;!a.is(\":hidden\")&amp;&amp;!n){switch(n=!0,a.data(\"side\")){case\"left\":l.left=\"-=\"+o;break;case\"right\":l.right=\"-=\"+o}a.animate(l,s),t.animate({},s,function(){a.fadeOut(200),a.removeClass(\"ps-active-panel\"),e(\"html\").removeClass(\"overflow-hidden\"),e(\"body\").removeClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").fadeOut(200),n=!1,i&amp;&amp;i()})}},e(document).bind(\"click keyup\",function(i){var t=e(\".ps-active-panel\");\"keyup\"==i.type&amp;&amp;27!=i.keyCode||t.is(\":visible\")&amp;&amp;t.data(\"clickClose\")&amp;&amp;e.panelslider.close()}),e(document).on(\"click\",\".ps-active-panel\",function(e){e.stopPropagation()}),e.fn.panelslider=function(i){return this.on(\"click\",function(t){var n=e(\".ps-active-panel\"),a=e(this.getAttribute(\"href\"));n.is(\":visible\")&amp;&amp;a[0]==n[0]?e.panelslider.close():e.panelslider(a,i),t.preventDefault(),t.stopPropagation()}),this}}(jQuery);\njQuery(document).ready(function(){jQuery(\"body\").find(\".eskimo-panel-open\").panelslider({side:\"right\",clickClose:!0,duration:400}),jQuery(\"body\").find(\".eskimo-panel-close\").on(\"click\",function(){return jQuery.panelslider.close(),!1})});\n/* tslint:enable */\n\n}\n</code></pre>\n\n<p>For ESLint you should use: </p>\n\n<pre><code>panel(){\n\n/* eslint-disable */\n!function(e){\"use strict\";function i(i,a){var s=i.outerWidth(!0),o={};if(!i.is(\":visible\")&amp;&amp;!n){switch(n=!0,i.addClass(\"ps-active-panel\").css({position:\"fixed\",top:0,height:\"100%\",\"z-index\":9999999999}),i.data(a),e(\"html\").addClass(\"overflow-hidden\"),e(\"body\").addClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").bind(\"touchmove\",!1),e(\"#eskimo-overlay\").fadeIn(200),a.side){case\"left\":i.css({left:\"-\"+s+\"px\",right:\"auto\"}),o.left=\"+=\"+s;break;case\"right\":i.css({left:\"auto\",right:\"-\"+s+\"px\"}),o.right=\"+=\"+s}t.animate({},a.duration),i.show().animate(o,a.duration,function(){n=!1,\"function\"==typeof a.onOpen&amp;&amp;a.onOpen()})}}var t=e(\"body\"),n=!1;e.panelslider=function(t,n){var a=e(\".ps-active-panel\");n=e.extend({},{side:\"left\",duration:200,clickClose:!0,onOpen:null},n),a.is(\":visible\")&amp;&amp;a[0]!=t[0]?e.panelslider.close(function(){i(t,n)}):a.length&amp;&amp;!a.is(\":hidden\")||i(t,n)},e.panelslider.close=function(i){var a=e(\".ps-active-panel\"),s=a.data(\"duration\"),o=a.outerWidth(!0),l={};if(a.length&amp;&amp;!a.is(\":hidden\")&amp;&amp;!n){switch(n=!0,a.data(\"side\")){case\"left\":l.left=\"-=\"+o;break;case\"right\":l.right=\"-=\"+o}a.animate(l,s),t.animate({},s,function(){a.fadeOut(200),a.removeClass(\"ps-active-panel\"),e(\"html\").removeClass(\"overflow-hidden\"),e(\"body\").removeClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").fadeOut(200),n=!1,i&amp;&amp;i()})}},e(document).bind(\"click keyup\",function(i){var t=e(\".ps-active-panel\");\"keyup\"==i.type&amp;&amp;27!=i.keyCode||t.is(\":visible\")&amp;&amp;t.data(\"clickClose\")&amp;&amp;e.panelslider.close()}),e(document).on(\"click\",\".ps-active-panel\",function(e){e.stopPropagation()}),e.fn.panelslider=function(i){return this.on(\"click\",function(t){var n=e(\".ps-active-panel\"),a=e(this.getAttribute(\"href\"));n.is(\":visible\")&amp;&amp;a[0]==n[0]?e.panelslider.close():e.panelslider(a,i),t.preventDefault(),t.stopPropagation()}),this}}(jQuery);\njQuery(document).ready(function(){jQuery(\"body\").find(\".eskimo-panel-open\").panelslider({side:\"right\",clickClose:!0,duration:400}),jQuery(\"body\").find(\".eskimo-panel-close\").on(\"click\",function(){return jQuery.panelslider.close(),!1})});\n/* eslint-enable */\n\n}\n</code></pre>\n\n<p>The rest of the file will remain unaffected and the linter would work as expected.</p>\n"}, {"comments": [{"owner": {"reputation": 9130, "user_id": 693560, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e71609811ad09d2eba439b051790fbc7?s=128&d=identicon&r=PG", "display_name": "Bronzato", "link": "https://stackoverflow.com/users/693560/bronzato"}, "edited": false, "score": 0, "creation_date": 1559212847, "post_id": 56366174, "comment_id": 99354001, "body": "It works pretty well. I simply had to remove <code>export</code> in front of <code>type PanelSlider</code> otherwize I got errors and global.d.ts was not recognized."}, {"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "reply_to_user": {"reputation": 9130, "user_id": 693560, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e71609811ad09d2eba439b051790fbc7?s=128&d=identicon&r=PG", "display_name": "Bronzato", "link": "https://stackoverflow.com/users/693560/bronzato"}, "edited": false, "score": 1, "creation_date": 1559215269, "post_id": 56366174, "comment_id": 99355129, "body": "Yes, you are right since it global.d.ts no need to export any type."}], "tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": true, "score": 0, "last_activity_date": 1559225941, "last_edit_date": 1559225941, "creation_date": 1559152701, "answer_id": 56366174, "question_id": 56354714, "link": "https://stackoverflow.com/questions/56354714/typescript-error-messages-for-javascript-file/56366174#56366174", "title": "Typescript error messages for javascript file", "body": "<p>You can use <strong>//@ts-ignore</strong> directive in order to <strong>avoid typings</strong> or you can create our <strong>declaration file (d.ts)</strong> for panelslider plugin.</p>\n\n<p>First let's move all plugin related code into a separate file, name it <em>panelslider.plugin.ts</em>. so content should be like this, here I have imported jQuery and added <strong>@ts-ignore</strong> directives to get rid of all errors.</p>\n\n<pre><code>import jQuery from \"jquery\";\n\n// @ts-ignore\n\n    !function(e){\"use strict\";function i(i,a){var s=i.outerWidth(!0),o={};if(!i.is(\":visible\")&amp;&amp;!n){switch(n=!0,i.addClass(\"ps-active-panel\").css({position:\"fixed\",top:0,height:\"100%\",\"z-index\":9999999999}),i.data(a),e(\"html\").addClass(\"overflow-hidden\"),e(\"body\").addClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").bind(\"touchmove\",!1),e(\"#eskimo-overlay\").fadeIn(200),a.side){case\"left\":i.css({left:\"-\"+s+\"px\",right:\"auto\"}),o.left=\"+=\"+s;break;case\"right\":i.css({left:\"auto\",right:\"-\"+s+\"px\"}),o.right=\"+=\"+s}t.animate({},a.duration),i.show().animate(o,a.duration,function(){n=!1,\"function\"==typeof a.onOpen&amp;&amp;a.onOpen()})}}var t=e(\"body\"),n=!1;e.panelslider=function(t,n){var a=e(\".ps-active-panel\");n=e.extend({},{side:\"left\",duration:200,clickClose:!0,onOpen:null},n),a.is(\":visible\")&amp;&amp;a[0]!=t[0]?e.panelslider.close(function(){i(t,n)}):a.length&amp;&amp;!a.is(\":hidden\")||i(t,n)},e.panelslider.close=function(i){var a=e(\".ps-active-panel\"),s=a.data(\"duration\"),o=a.outerWidth(!0),l={};if(a.length&amp;&amp;!a.is(\":hidden\")&amp;&amp;!n){switch(n=!0,a.data(\"side\")){case\"left\":l.left=\"-=\"+o;break;case\"right\":l.right=\"-=\"+o}a.animate(l,s),t.animate({},s,function(){a.fadeOut(200),a.removeClass(\"ps-active-panel\"),e(\"html\").removeClass(\"overflow-hidden\"),e(\"body\").removeClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").fadeOut(200),n=!1,i&amp;&amp;i()})}},e(document).bind(\"click keyup\",function(i){var t=e(\".ps-active-panel\");\"keyup\"==i.type&amp;&amp;27!=i.keyCode||t.is(\":visible\")&amp;&amp;t.data(\"clickClose\")&amp;&amp;e.panelslider.close()}),e(document).on(\"click\",\".ps-active-panel\",function(e){e.stopPropagation()}),e.fn.panelslider=function(i){return this.on(\"click\",function(t){var n=e(\".ps-active-panel\"),a=e(this.getAttribute(\"href\"));n.is(\":visible\")&amp;&amp;a[0]==n[0]?e.panelslider.close():e.panelslider(a,i),t.preventDefault(),t.stopPropagation()}),this}}(jQuery);\n    jQuery(document).ready(function(){jQuery(\"body\").find(\".eskimo-panel-open\").panelslider({side:\"right\",clickClose:!0,duration:400}),jQuery(\"body\").find(\".eskimo-panel-close\").on(\"click\",function(){return jQuery.panelslider.close(),!1})});\n</code></pre>\n\n<p>Code</p>\n\n<pre><code>import jQuery from \"jquery\";\n\n// @ts-ignore\nimport \"./panelslider.plugin\";\n\njQuery(document).ready(function() {\n    jQuery(\"body\")\n        .find(\".eskimo-panel-open\")\n        .panelslider({ side: \"right\", clickClose: !0, duration: 400 });\n\n        jQuery(\"body\")\n            .find(\".eskimo-panel-close\")\n            .on(\"click\", function() {\n                return jQuery.panelslider.close(), !1;\n            });\n});\n</code></pre>\n\n<p>Type declaration for <em>panelslider</em> plugin. Just add following code into  type declaration file(global.d.ts make sure ts complier honoring)</p>\n\n<pre><code>export type PanelSlider = {\n    side: \"right\";\n    clickClose: boolean;\n    duration: number;\n};\n\ninterface JQuery {\n    panelslider(options: PanelSlider): void;\n}\n\ninterface JQueryStatic {\n    panelslider: {\n        close(): any;\n    };\n}\n</code></pre>\n"}], "owner": {"reputation": 9130, "user_id": 693560, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e71609811ad09d2eba439b051790fbc7?s=128&d=identicon&r=PG", "display_name": "Bronzato", "link": "https://stackoverflow.com/users/693560/bronzato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 1, "accepted_answer_id": 56366174, "answer_count": 3, "score": 0, "last_activity_date": 1559225941, "creation_date": 1559113029, "last_edit_date": 1559225843, "question_id": 56354714, "link": "https://stackoverflow.com/questions/56354714/typescript-error-messages-for-javascript-file", "title": "Typescript error messages for javascript file", "body": "<p>I only have a minified version of the javascript code below. It works as is but I needed to integrate this code inside of a typescript file. It still works pretty well at runtime but in my editor (Visual Studio Code) I got errors.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aukLa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aukLa.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is the code.</p>\n\n<pre><code>!function(e){\"use strict\";function i(i,a){var s=i.outerWidth(!0),o={};if(!i.is(\":visible\")&amp;&amp;!n){switch(n=!0,i.addClass(\"ps-active-panel\").css({position:\"fixed\",top:0,height:\"100%\",\"z-index\":9999999999}),i.data(a),e(\"html\").addClass(\"overflow-hidden\"),e(\"body\").addClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").bind(\"touchmove\",!1),e(\"#eskimo-overlay\").fadeIn(200),a.side){case\"left\":i.css({left:\"-\"+s+\"px\",right:\"auto\"}),o.left=\"+=\"+s;break;case\"right\":i.css({left:\"auto\",right:\"-\"+s+\"px\"}),o.right=\"+=\"+s}t.animate({},a.duration),i.show().animate(o,a.duration,function(){n=!1,\"function\"==typeof a.onOpen&amp;&amp;a.onOpen()})}}var t=e(\"body\"),n=!1;e.panelslider=function(t,n){var a=e(\".ps-active-panel\");n=e.extend({},{side:\"left\",duration:200,clickClose:!0,onOpen:null},n),a.is(\":visible\")&amp;&amp;a[0]!=t[0]?e.panelslider.close(function(){i(t,n)}):a.length&amp;&amp;!a.is(\":hidden\")||i(t,n)},e.panelslider.close=function(i){var a=e(\".ps-active-panel\"),s=a.data(\"duration\"),o=a.outerWidth(!0),l={};if(a.length&amp;&amp;!a.is(\":hidden\")&amp;&amp;!n){switch(n=!0,a.data(\"side\")){case\"left\":l.left=\"-=\"+o;break;case\"right\":l.right=\"-=\"+o}a.animate(l,s),t.animate({},s,function(){a.fadeOut(200),a.removeClass(\"ps-active-panel\"),e(\"html\").removeClass(\"overflow-hidden\"),e(\"body\").removeClass(\"overflow-hidden\"),e(\"#eskimo-overlay\").fadeOut(200),n=!1,i&amp;&amp;i()})}},e(document).bind(\"click keyup\",function(i){var t=e(\".ps-active-panel\");\"keyup\"==i.type&amp;&amp;27!=i.keyCode||t.is(\":visible\")&amp;&amp;t.data(\"clickClose\")&amp;&amp;e.panelslider.close()}),e(document).on(\"click\",\".ps-active-panel\",function(e){e.stopPropagation()}),e.fn.panelslider=function(i){return this.on(\"click\",function(t){var n=e(\".ps-active-panel\"),a=e(this.getAttribute(\"href\"));n.is(\":visible\")&amp;&amp;a[0]==n[0]?e.panelslider.close():e.panelslider(a,i),t.preventDefault(),t.stopPropagation()}),this}}(jQuery);\njQuery(document).ready(function(){jQuery(\"body\").find(\".eskimo-panel-open\").panelslider({side:\"right\",clickClose:!0,duration:400}),jQuery(\"body\").find(\".eskimo-panel-close\").on(\"click\",function(){return jQuery.panelslider.close(),!1})});\n</code></pre>\n\n<p>What can be done on this code to avoid TypeScript errors in my editor ?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>For this moment, I copy/paste minified javascript code inside another TypeScript file (wrap it in <code>panel</code> function) and it works at runtime but got errors in my editor.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2MMzr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2MMzr.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "angular", "typescript", "angular-material", "mat-table"], "comments": [{"owner": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1559114171, "post_id": 56354283, "comment_id": 99314122, "body": "I presume if each row was its own form (in its own child component) you could check the form itself."}, {"owner": {"reputation": 739, "user_id": 9552112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mr. Learner", "link": "https://stackoverflow.com/users/9552112/mr-learner"}, "reply_to_user": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1559122562, "post_id": 56354283, "comment_id": 99318727, "body": "@Jacques\u30b8\u30e3\u30c3\u30af i dont use forms. but doing something like this <a href=\"https://stackblitz.com/edit/angular-rwbczv?file=app%2Ftable-basic-example.ts\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1559180199, "post_id": 56354283, "comment_id": 99343557, "body": "&quot;dirty&quot;, and other states used on inputs are for forms. I&#39;m not sure what dirty means from the context of a table row if it&#39;s not in a form."}, {"owner": {"reputation": 739, "user_id": 9552112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mr. Learner", "link": "https://stackoverflow.com/users/9552112/mr-learner"}, "reply_to_user": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1559639790, "post_id": 56354283, "comment_id": 99475100, "body": "&#39;Dirty&#39; in the sense, if the current state of the input is changed it becomes dirty or modified or updated. Assume, there is the bunch of input boxes with data onload. and am creating new row which generated with empty columns so by nature the state of the column/row/table cell is empty. if I give input then the state changed with value. correct me if am wrong in explanation"}, {"owner": {"reputation": 3390, "user_id": 2518398, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JT3Ch.jpg?s=128&g=1", "display_name": "Jacques \u30b8\u30e3\u30c3\u30af", "link": "https://stackoverflow.com/users/2518398/jacques-%e3%82%b8%e3%83%a3%e3%83%83%e3%82%af"}, "edited": false, "score": 0, "creation_date": 1559639859, "post_id": 56354283, "comment_id": 99475136, "body": "What I\u2019m saying is that the input can be dirty. The table row cannot be."}], "owner": {"reputation": 739, "user_id": 9552112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mr. Learner", "link": "https://stackoverflow.com/users/9552112/mr-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 663, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559111044, "creation_date": 1559111044, "question_id": 56354283, "link": "https://stackoverflow.com/questions/56354283/avoid-duplicate-records-to-be-saved-angular-6-mat-table", "title": "Avoid duplicate records to be saved - Angular 6 - Mat-Table", "body": "<p>Is there any way to check whether the Mat-Table row or cells dirty with new values?</p>\n\n<p>I'm not able to find a proper way to do dirty check from the official angular material site.</p>\n\n<p>what am trying to achieve is. Save button (in parent component) should be enabled/disabled based on value changes in a table row(in child component). for that, <strong>Assumption</strong>,</p>\n\n<pre><code>if(tableCell_isDirty === true) {\n// enable save btn\n} else {\n// disable btn if new row is empty or no changes\n}\n</code></pre>\n\n<p>As I don't find 'dirty' property for Mat-Table, I simply did an empty check like </p>\n\n<pre><code>if(this.myservice.table[0].custName === '') {\n// dont save records\n}\n</code></pre>\n\n<p>but am failed in above logic due to some other existing logics.</p>\n\n<p>Simply, I don't want empty records to be saved in Mat-Table while hitting the save button.</p>\n\n<p>Kindly help me to fix this.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["javascript", "html", "arrays", "typescript", "ecmascript-6"], "comments": [{"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "edited": false, "score": 0, "creation_date": 1559110945, "post_id": 56354134, "comment_id": 99312707, "body": "what is actually your problem, to fill the array, the splicing part, or the changing length with splicing?"}, {"owner": {"reputation": 1304, "user_id": 1306170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/943feedf7e5668120d3f17c57ab24730?s=128&d=identicon&r=PG", "display_name": "vedankita kumbhar", "link": "https://stackoverflow.com/users/1306170/vedankita-kumbhar"}, "reply_to_user": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "edited": false, "score": 0, "creation_date": 1559111495, "post_id": 56354134, "comment_id": 99312923, "body": "I have 12 index array in which I am getting values for different positions that I have to insert dynamically otherwise remaining indexes will be zero that&#39;s why I want this functionality"}], "answers": [{"tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": true, "score": 2, "last_activity_date": 1559111080, "last_edit_date": 1559111080, "creation_date": 1559110507, "answer_id": 56354156, "question_id": 56354134, "link": "https://stackoverflow.com/questions/56354134/add-item-to-specific-position-otherwise-push-zero-in-array-in-javascript/56354156#56354156", "title": "Add item to specific position otherwise push zero in array in javascript", "body": "<p>Use <code>map</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let arraydata = Array(12).fill();\r\narraydata.splice(5, 0, 4);\r\narraydata = arraydata.map(e =&gt; e ? e : 0);\r\nconsole.log(arraydata);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>You can also add different values - just place them inside the <code>fill</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let arraydata = Array(12).fill(\"Things\");\r\narraydata.splice(5, 0, 4);\r\narraydata = arraydata.map(e =&gt; e ? e : 0);\r\nconsole.log(arraydata);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "is_accepted": false, "score": 1, "last_activity_date": 1559110595, "creation_date": 1559110595, "answer_id": 56354180, "question_id": 56354134, "link": "https://stackoverflow.com/questions/56354134/add-item-to-specific-position-otherwise-push-zero-in-array-in-javascript/56354180#56354180", "title": "Add item to specific position otherwise push zero in array in javascript", "body": "<p>You could just assign the value at the wanted index without splicing, which increases the length of the array.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let arraydata = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\narraydata[5] = 4;\r\n\r\nconsole.log(...arraydata);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If you like to keep the splicing, you could keep the length by assigning the wwanted length.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let arraydata = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\narraydata.splice(5, 0, 4);\r\narraydata.length = 12;\r\n\r\nconsole.log(...arraydata);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 26836, "user_id": 1132354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7BaAv.png?s=128&g=1", "display_name": "Nikhil Aggarwal", "link": "https://stackoverflow.com/users/1132354/nikhil-aggarwal"}, "is_accepted": false, "score": 1, "last_activity_date": 1559110595, "creation_date": 1559110595, "answer_id": 56354181, "question_id": 56354134, "link": "https://stackoverflow.com/questions/56354134/add-item-to-specific-position-otherwise-push-zero-in-array-in-javascript/56354181#56354181", "title": "Add item to specific position otherwise push zero in array in javascript", "body": "<p>Use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill\" rel=\"nofollow noreferrer\">Array.fill</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let array = new Array(12).fill(0);\r\narray.splice(5,0,4);\r\nconsole.log(array);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If you want to update an index rather than adding a new value at particular index, rather than splice, you should simply do <code>array[5] = 4</code></p>\n"}, {"tags": [], "owner": {"reputation": 32611, "user_id": 9819146, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ioXmnWNrB_w/AAAAAAAAAAI/AAAAAAAAADs/Q47JYDWDFyo/photo.jpg?sz=128", "display_name": "Maheer Ali", "link": "https://stackoverflow.com/users/9819146/maheer-ali"}, "is_accepted": false, "score": 2, "last_activity_date": 1559110612, "creation_date": 1559110612, "answer_id": 56354188, "question_id": 56354134, "link": "https://stackoverflow.com/questions/56354134/add-item-to-specific-position-otherwise-push-zero-in-array-in-javascript/56354188#56354188", "title": "Add item to specific position otherwise push zero in array in javascript", "body": "<p>You can <code>fill()</code> array with <code>0</code></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let arraydata = Array(12).fill(0)\r\narraydata.splice(5, 0, 4)\r\nconsole.log(arraydata)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 33687, "user_id": 9624435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h44B4.jpg?s=128&g=1", "display_name": "Code Maniac", "link": "https://stackoverflow.com/users/9624435/code-maniac"}, "is_accepted": false, "score": 1, "last_activity_date": 1559110631, "creation_date": 1559110631, "answer_id": 56354190, "question_id": 56354134, "link": "https://stackoverflow.com/questions/56354134/add-item-to-specific-position-otherwise-push-zero-in-array-in-javascript/56354190#56354190", "title": "Add item to specific position otherwise push zero in array in javascript", "body": "<p>You can build a generic function like this</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let desiredArr = (length, value, from, to)=&gt;{\r\n  let arr = new Array(length).fill(0)\r\n  arr.splice(value, from, to)\r\n  return arr\r\n}\r\n\r\nconsole.log(desiredArr(12, 5, 0 ,4))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If there's always only one index you want to update than you can simply do this</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let arr = new Array(12).fill(0)\r\narr[5] = 4\r\n\r\nconsole.log(arr)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1304, "user_id": 1306170, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/943feedf7e5668120d3f17c57ab24730?s=128&d=identicon&r=PG", "display_name": "vedankita kumbhar", "link": "https://stackoverflow.com/users/1306170/vedankita-kumbhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56354156, "answer_count": 5, "score": -1, "last_activity_date": 1559111080, "creation_date": 1559110377, "last_edit_date": 1559110781, "question_id": 56354134, "link": "https://stackoverflow.com/questions/56354134/add-item-to-specific-position-otherwise-push-zero-in-array-in-javascript", "title": "Add item to specific position otherwise push zero in array in javascript", "body": "<p>I have empty array in that I want to add specific items at specific position which are coming from web api and want to add zero(0) to remaining positions dynamically using javscript. \nHere is my Code :-</p>\n\n<pre><code>let arraydata = [0, 0, 0, 0, 0,0,0,0,0,0,0,0]\narraydata.splice(5, 0, 4)\ndocument.querySelector(\"#app\").innerHTML = arraydata;\n</code></pre>\n\n<p><a href=\"https://jsfiddle.net/myj1e0zu/\" rel=\"nofollow noreferrer\">My Code</a></p>\n\n<p>Right now I have added zero manually,I want to add 0 upto 12 index and want to add 4 at 5th position synamicaaly. </p>\n"}, {"tags": ["node.js", "reactjs", "typescript", "npm"], "answers": [{"comments": [{"owner": {"reputation": 1478, "user_id": 816438, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/4Gj1h.jpg?s=128&g=1", "display_name": "Cowborg", "link": "https://stackoverflow.com/users/816438/cowborg"}, "edited": false, "score": 0, "creation_date": 1559134852, "post_id": 56355503, "comment_id": 99325764, "body": "Hi eespejel. Thanks for your reply and guiding me to environment variables. Ive tested this on windows (through the menus) but it did not work :/. If any other windows-user got this to work, please comment below."}, {"owner": {"reputation": 3971, "user_id": 247474, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/747c5b3a9e784ce9c49cecf79a8481e5?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/247474/ben"}, "edited": false, "score": 0, "creation_date": 1589898095, "post_id": 56355503, "comment_id": 109471732, "body": "In my case the code I was writing had a memory leak, fixing the code fixed the issue."}], "tags": [], "owner": {"reputation": 211, "user_id": 10668216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac39527eaf709a59009b581db62ba52?s=128&d=identicon&r=PG&f=1", "display_name": "eespejel", "link": "https://stackoverflow.com/users/10668216/eespejel"}, "is_accepted": false, "score": 21, "last_activity_date": 1610017722, "last_edit_date": 1610017722, "creation_date": 1559116116, "answer_id": 56355503, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/56355503#56355503", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>I had a similar issue, although on a Mac computer.\nSetting an environment variable did the trick for me. That way, your node process will take the value and use it independently of which script you're running.</p>\n<pre><code>export NODE_OPTIONS=--max_old_space_size=4096\n</code></pre>\n<p>The run your command again. Good Luck!</p>\n"}, {"comments": [{"owner": {"reputation": 1895, "user_id": 3021489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d0c972241b92407297add516f40e69d?s=128&d=identicon&r=PG", "display_name": "Aviro", "link": "https://stackoverflow.com/users/3021489/aviro"}, "edited": false, "score": 1, "creation_date": 1587662555, "post_id": 58455796, "comment_id": 108606534, "body": "This helped to resolve the issue. The othe options won&#39;t work if the issue is within any dependency libraries."}], "tags": [], "owner": {"reputation": 586, "user_id": 1729611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae8887d449a17dec2146eb642911f0fb?s=128&d=identicon&r=PG", "display_name": "joaopribs", "link": "https://stackoverflow.com/users/1729611/joaopribs"}, "is_accepted": false, "score": 6, "last_activity_date": 1571420658, "creation_date": 1571420658, "answer_id": 58455796, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/58455796#58455796", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>I had the same issue on Windows. The solution was to set the NODE_OPTIONS variable before running npm run build. To set this variable, simply run <code>set NODE_OPTIONS=--max_old_space_size=8192</code></p>\n"}, {"comments": [{"owner": {"reputation": 1895, "user_id": 3021489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d0c972241b92407297add516f40e69d?s=128&d=identicon&r=PG", "display_name": "Aviro", "link": "https://stackoverflow.com/users/3021489/aviro"}, "edited": false, "score": 6, "creation_date": 1587662032, "post_id": 59157071, "comment_id": 108606254, "body": "Rather than fixing the issue, this had broken my runtime. Had to delete and npm install to fix the issue."}, {"owner": {"reputation": 1110, "user_id": 2277954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523aa4e3d40b886e3a106d9c068c51c3?s=128&d=identicon&r=PG", "display_name": "Matteo Gaggiano", "link": "https://stackoverflow.com/users/2277954/matteo-gaggiano"}, "edited": false, "score": 0, "creation_date": 1602515920, "post_id": 59157071, "comment_id": 113738365, "body": "This is a very dangerous solution. Set NODE_OPTIONS to pass the parameter"}, {"owner": {"reputation": 171, "user_id": 5172590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0iUTM.jpg?s=128&g=1", "display_name": "Liviu Mihaianu", "link": "https://stackoverflow.com/users/5172590/liviu-mihaianu"}, "edited": false, "score": 1, "creation_date": 1611236499, "post_id": 59157071, "comment_id": 116389672, "body": "yeap, for me as well. Broken everything"}], "tags": [], "owner": {"reputation": 2745, "user_id": 4344683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Cfdqv.jpg?s=128&g=1", "display_name": "Shezan Kazi", "link": "https://stackoverflow.com/users/4344683/shezan-kazi"}, "is_accepted": false, "score": -1, "last_activity_date": 1575375828, "creation_date": 1575375828, "answer_id": 59157071, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/59157071#59157071", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>I have been facing this problem for some time. The problem is most likely caused by a dependancy or component which is a large .js file. I am currently using <a href=\"https://www.npmjs.com/package/increase-memory-limit\" rel=\"nofollow noreferrer\">this package</a> to successfully fix the issue.</p>\n\n<p>You basically install it globally:</p>\n\n<pre><code>npm install -g increase-memory-limit\n</code></pre>\n\n<p>And then from within your project root you run:</p>\n\n<pre><code>increase-memory-limit\n</code></pre>\n\n<p>Which will append <code>--max-old-space-size=4096</code> in all node calls inside your <code>node_modules/.bin/*</code> files.</p>\n"}, {"tags": [], "owner": {"reputation": 598, "user_id": 9217332, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3sgneerqKnc/AAAAAAAAAAI/AAAAAAAAAZY/NiHbgWskuDc/photo.jpg?sz=128", "display_name": "Onen simon", "link": "https://stackoverflow.com/users/9217332/onen-simon"}, "is_accepted": false, "score": 16, "last_activity_date": 1583329374, "last_edit_date": 1583329374, "creation_date": 1583328877, "answer_id": 60527330, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/60527330#60527330", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>The solution which I used was to upgrade the node js version from <strong>v10</strong> to <strong>v12</strong>.</p>\n\n<hr>\n\n<p>The command <code>export NODE_OPTIONS=--max_old_space_size=4096</code> works but has limitations, e.g. you should have ample memory on your machine to run the production build.</p>\n"}, {"comments": [{"owner": {"reputation": 659, "user_id": 1155514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mjZMX.jpg?s=128&g=1", "display_name": "Muhammad Tariq", "link": "https://stackoverflow.com/users/1155514/muhammad-tariq"}, "edited": false, "score": 0, "creation_date": 1610393138, "post_id": 62594692, "comment_id": 116113738, "body": "This didn&#39;t work in my case. When we execute <code>npm install</code>, it shows vulnerabilities and don&#39;t allow us to use older version for <code>react-script</code>. I used the <code>--max-old-space</code> and also increased my VM memory to <code>2GB</code>"}], "tags": [], "owner": {"reputation": 61, "user_id": 8173143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4c2a33e496277e2914d1455218850?s=128&d=identicon&r=PG&f=1", "display_name": "foxbit", "link": "https://stackoverflow.com/users/8173143/foxbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1593174247, "creation_date": 1593174247, "answer_id": 62594692, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/62594692#62594692", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>I don't think that the solution is to increase memory limit. This way the issue is always postponed.</p>\n<p>I've encounter this issue 2 times. I've solved, for each time:</p>\n<ol>\n<li>using a specific version of <code>node</code> (<code>v12.11.1</code>, <code>react v16.13.1</code> and <code>react-scripts v3.2.0</code>);</li>\n<li>switching from <code>npm</code> to <code>yarn</code> (<code>node v12.11.1</code>, <code>react v16.13.1</code> and <code>react-scripts v3.4.1</code>).</li>\n</ol>\n<p>In addition, check your <code>package.json</code>, delete <code>package-lock.json</code>, remove <code>node-modules</code> folder and try to install your dependencies again.</p>\n<p>Next try to build your project.</p>\n"}, {"tags": [], "owner": {"reputation": 114, "user_id": 3351045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/559a60ce65a6909d242636d2f9c78946?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesan Js", "link": "https://stackoverflow.com/users/3351045/ganesan-js"}, "is_accepted": false, "score": 4, "last_activity_date": 1610029787, "last_edit_date": 1610029787, "creation_date": 1602225860, "answer_id": 64275138, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/64275138#64275138", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>I got a fix after increasing the node max_old_space. Here is the fix.</p>\n<p>Instead of running npm start or ng start. Run the below command</p>\n<pre class=\"lang-js prettyprint-override\"><code>node --max_old_space_size=8048 ./node_modules/@angular/cli/bin/ng serve\n</code></pre>\n<p>OR</p>\n<p>You can add the command in <code>package.json</code> file as well</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;start&quot;: &quot;node --max_old_space_size=8048 ./node_modules/@angular/cli/bin/ng serve&quot;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 659, "user_id": 1155514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mjZMX.jpg?s=128&g=1", "display_name": "Muhammad Tariq", "link": "https://stackoverflow.com/users/1155514/muhammad-tariq"}, "is_accepted": false, "score": 2, "last_activity_date": 1610393264, "last_edit_date": 1610393264, "creation_date": 1610392942, "answer_id": 65673239, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/65673239#65673239", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>The root cause of the problem is the large source file sizes.</p>\n<p>You can resolve the issue in 2 steps.</p>\n<ol>\n<li>First try to increase space size and check the application. If the problem is cause by your source code, then this can be resolved by increasing the Node Heap Size as below,</li>\n</ol>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;start&quot;: &quot;react-scripts --max_old_space_size=4096 start&quot;,\n&quot;build&quot;: &quot;react-scripts --max_old_space_size=4096 build&quot;\n</code></pre>\n<ol start=\"2\">\n<li>Second step is setting the <strong>Environment Variable</strong>.\nIf the problem lies within your dependencies, you may need to increase the Node Heap allocation globally to resolve the issue.<br />\nFor Windows: <code>set NODE_OPTIONS=--max_old_space_size=4096</code><br />\nFor Linux:   <code>export NODE_OPTIONS=--max_old_space_size=4096</code></li>\n</ol>\n<p>Also note that, if you are using very low memory like 512MB, then you will have to upgrade it to at least 2GB to get the better result.</p>\n<p>Here I used 4096MB = 4GB size, but you can change this according to your machine configuration specifically RAM. You can set it to 2GB or 1GB and check the application.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4954247, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/59O1f.jpg?s=128&g=1", "display_name": "Fady Y", "link": "https://stackoverflow.com/users/4954247/fady-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1613053855, "last_edit_date": 1613053855, "creation_date": 1612991409, "answer_id": 66145072, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed/66145072#66145072", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>This is what I wrote in my package.json run command</p>\n<blockquote>\n<p>&quot;scripts&quot;: {\n&quot;build&quot;: &quot;node --max_old_space_size=4096 build/build.js&quot;\n}</p>\n</blockquote>\n<p>basically, you have to run --max_old_space_size=4096 before your actual build command</p>\n"}], "owner": {"reputation": 1478, "user_id": 816438, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/4Gj1h.jpg?s=128&g=1", "display_name": "Cowborg", "link": "https://stackoverflow.com/users/816438/cowborg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39337, "favorite_count": 7, "answer_count": 8, "score": 20, "last_activity_date": 1613053855, "creation_date": 1559110065, "question_id": 56354079, "link": "https://stackoverflow.com/questions/56354079/npm-build-gives-ineffective-mark-compacts-near-heap-limit-allocation-failed", "title": "npm build gives &quot;Ineffective mark-compacts near heap limit Allocation failed&quot;", "body": "<p>I have a reactjs/typescript project, running on windows 10. Im trying to build by ts-scripts with</p>\n\n<blockquote>\n  <p>\"rimraf ../wwwroot/* &amp;&amp; react-scripts-ts build &amp;&amp; copyfiles\n  ./build/**/* ../wwwroot/ -u 1</p>\n</blockquote>\n\n<p>This has worked ok before, but when I removed the node_modules-folder, re-run the npm install-command and then the command above I get the error message</p>\n\n<blockquote>\n  <p>FATAL ERROR: Ineffective mark-compacts near heap limit Allocation\n  failed - JavaScript heap out of memory</p>\n</blockquote>\n\n<p>I have no idea why. After googling Ive seen</p>\n\n<blockquote>\n  <p>NODE_OPTIONS=\"\u2013max-old-space-size=2048\"\n  but I dont know where to put this</p>\n</blockquote>\n\n<p><strong>Full error message</strong></p>\n\n<p>Last few GCs </p>\n\n<pre><code>[11376:0000024682F49880]    60039 ms: Mark-sweep 2034.1 (2085.2) -&gt; 2033.7 (2085.2) MB, 1029.4 / 0.0 ms  (average mu = 0.073, current mu = 0.006) allocation failure scavenge might not succeed\n[11376:0000024682F49880]    61094 ms: Mark-sweep 2034.4 (2085.2) -&gt; 2034.1 (2085.7) MB, 1047.7 / 0.0 ms  (average mu = 0.039, current mu = 0.007) allocation failure scavenge might not succeed\n\n\n JS stacktrace \n==== JS stack trace =========================================\n\n    0: ExitFrame [pc: 000001CDF84DC5C1]\nSecurity context: 0x007044b9e6e1 &lt;JSObject&gt;\n    1: bindChildrenWorker(aka bindChildrenWorker) [000001AD1C0ACD59] [C:\\Users\\robcar\\source\\repos\\Boost\\Boost.Web\\ClientApp\\node_modules\\typescript\\lib\\typescript.js:~27657] [pc=000001CDF8FA47CA](this=0x03da79d826f1 &lt;undefined&gt;,node=0x034b8724ab71 &lt;NodeObject map = 000000660468F931&gt;)\n    2: bind(aka bind) [000001AD1C0AE2D9] [C:\\Users\\robcar\\source\\repos\\B...\n\nFATAL ERROR: Ineffective mark-compacts near heap limit Allocation failed - JavaScript heap out of memory\n 1: 00007FF6B5EA121A v8::internal::GCIdleTimeHandler::GCIdleTimeHandler+4810\n 2: 00007FF6B5E7A5B6 node::MakeCallback+4518\n 3: 00007FF6B5E7AFA0 node_module_register+2160\n 4: 00007FF6B610B3EE v8::internal::FatalProcessOutOfMemory+846\n 5: 00007FF6B610B31F v8::internal::FatalProcessOutOfMemory+639\n 6: 00007FF6B6649304 v8::internal::Heap::MaxHeapGrowingFactor+11476\n 7: 00007FF6B663FA67 v8::internal::ScavengeJob::operator=+25543\n 8: 00007FF6B663DFDC v8::internal::ScavengeJob::operator=+18748\n 9: 00007FF6B6646F57 v8::internal::Heap::MaxHeapGrowingFactor+2343\n10: 00007FF6B6646FD6 v8::internal::Heap::MaxHeapGrowingFactor+2470\n11: 00007FF6B61E9DD7 v8::internal::Factory::NewFillerObject+55\n12: 00007FF6B6281ABA v8::internal::WasmJs::Install+29530\n13: 000001CDF84DC5C1\n</code></pre>\n"}, {"tags": ["typescript", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 1929, "user_id": 5744323, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HPeWt.png?s=128&g=1", "display_name": "Anirudha Mahale", "link": "https://stackoverflow.com/users/5744323/anirudha-mahale"}, "is_accepted": true, "score": 1, "last_activity_date": 1569573493, "last_edit_date": 1569573493, "creation_date": 1559110917, "answer_id": 56354265, "question_id": 56354037, "link": "https://stackoverflow.com/questions/56354037/how-to-chain-the-result-of-observable-to-the-below-observable-in-rxjs/56354265#56354265", "title": "How to chain the result of observable to the below observable in rxjs", "body": "<p>I solved my issue using <code>flatMap</code> operator</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>createUser(req: Request, res: Response): Observable&lt;mongoose.Document&gt; {\n    const body = req.body\n    const self = this\n\n    const errorMessage = new UserValidator(req).validateRequest()\n    if (errorMessage) {\n        return throwError(errorMessage)\n    } else {\n        return self.hashPassword(req.body.password)\n        .pipe(flatMap((hashedString) =&gt; {\n            const newUser = new this.userModule({ email: req.body.email, username: req.body.username, password: hashedString })\n            return this.save(newUser)\n        }), catchError((err) =&gt; throwError(err))\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1929, "user_id": 5744323, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HPeWt.png?s=128&g=1", "display_name": "Anirudha Mahale", "link": "https://stackoverflow.com/users/5744323/anirudha-mahale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 56354265, "answer_count": 1, "score": 1, "last_activity_date": 1569573493, "creation_date": 1559109820, "question_id": 56354037, "link": "https://stackoverflow.com/questions/56354037/how-to-chain-the-result-of-observable-to-the-below-observable-in-rxjs", "title": "How to chain the result of observable to the below observable in rxjs", "body": "<p>I am saving user in the database.</p>\n\n<p>Here are the steps I am following</p>\n\n<p>1) Validating the request.</p>\n\n<p>2) hashing the password.</p>\n\n<p>3) then storing the user details in users collection with the hashed password.</p>\n\n<p>So below I have the code in which I am subscribing to <code>hashPassword</code> method, once I get the hashed string, creating the user with the hashed string. subscribing to <code>save</code> method and assigning the result to the observer's next method.</p>\n\n<p>How can I do this <code>zip()</code> or <code>map()</code> operator instead of subscribing again and again.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>createUser(req: Request, res: Response): Observable&lt;mongoose.Document&gt; {\n    const body = req.body\n    const self = this\n\n    return singleObservable(Observable.create((observer: Observer&lt;mongoose.Document&gt;) =&gt; {\n        const errorMessage = new UserValidator(req).validateRequest()\n        if (errorMessage) {\n            observer.error(errorMessage)\n        } else {\n            self.hashPassword(req.body.password).subscribe(new BaseObserver(\n                (value) =&gt; {\n                    const newUser = new this.userModule({ email: req.body.email, username: req.body.username, password: value })\n                    this.save(newUser).subscribe(new BaseObserver((value) =&gt; {\n                        observer.next(value)\n                    }, (err) =&gt; {\n                        observer.error(err)\n                    }))\n                }, (error) =&gt; observer.error(error)))\n        }\n    }))\n}\n\nprivate hashPassword(password: string): Observable&lt;string&gt; {\n    return singleObservable(Observable.create((observer: Observer&lt;string&gt;) =&gt; {\n        bcrypt.hash(password, 10, (err, result) =&gt; {\n            result.length &gt; 0 ? observer.next(result) : observer.error(err)\n        })\n    }))\n}\n\nsave&lt;T extends mongoose.Document&gt;(model: mongoose.Document): Observable&lt;T&gt; {\n    return singleObservable(Observable.create(function (observer: Observer&lt;mongoose.Document&gt;) {\n        model.save(function (err, object) {\n            emitResult(observer, object, err)\n        })\n    }))\n}\n\nemitResult&lt;T, E&gt;(observer: Observer&lt;T&gt;, result: T | null, err: E) {\n    result ? observer.next(result) : observer.error(err);\n}\n\nsingleObservable&lt;T&gt;(observable: Observable&lt;T&gt;) : Observable&lt;T&gt; {\n    return observable.pipe(first())\n}\n\n</code></pre>\n"}, {"tags": ["angular", "typescript", "intercept"], "comments": [{"owner": {"reputation": 15416, "user_id": 3509591, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rshrf.jpg?s=128&g=1", "display_name": "Zze", "link": "https://stackoverflow.com/users/3509591/zze"}, "edited": false, "score": 0, "creation_date": 1559109271, "post_id": 56353831, "comment_id": 99312034, "body": "If the server is returning a <code>301 redirect</code> response, the browser will catch this and strip all headers from the response before it reaches your angular handler. What type of response code are you getting ?"}, {"owner": {"reputation": 171, "user_id": 2119372, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c309f5629ca3b31b8ad5ab60e6fe67c5?s=128&d=identicon&r=PG", "display_name": "Geo j", "link": "https://stackoverflow.com/users/2119372/geo-j"}, "reply_to_user": {"reputation": 15416, "user_id": 3509591, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rshrf.jpg?s=128&g=1", "display_name": "Zze", "link": "https://stackoverflow.com/users/3509591/zze"}, "edited": false, "score": 0, "creation_date": 1559110482, "post_id": 56353831, "comment_id": 99312518, "body": "its 302 status code i am getting"}], "owner": {"reputation": 171, "user_id": 2119372, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c309f5629ca3b31b8ad5ab60e6fe67c5?s=128&d=identicon&r=PG", "display_name": "Geo j", "link": "https://stackoverflow.com/users/2119372/geo-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1559109043, "creation_date": 1559108718, "last_edit_date": 1559109043, "question_id": 56353831, "link": "https://stackoverflow.com/questions/56353831/intercept-redirection-url-request-header-in-angular-application", "title": "Intercept redirection url request header in Angular application", "body": "<p>We have an application which is a combination of 2 sites, 1 site for login and another for the rest of the functionalities.Now on successful login, redirection will happen to the second site where all functionalities sit. The redirection request will contain headers which i want to intercept within my application, possible to do it using angular?\nThe request coming from other application is a post request.</p>\n"}, {"tags": ["javascript", "angular", "typescript", "web-services", "soap"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9764166, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8lyqMhbYp80/AAAAAAAAAAI/AAAAAAAAAAA/ZIO4zuoolNw/photo.jpg?sz=128", "display_name": "Jayaswaminathan", "link": "https://stackoverflow.com/users/9764166/jayaswaminathan"}, "edited": false, "score": 0, "creation_date": 1559119433, "post_id": 56354815, "comment_id": 99316921, "body": "Thanks @Rambou, But in my scenario file along with XML body."}, {"owner": {"reputation": 462, "user_id": 4488590, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RNt7PhTNDU/AAAAAAAAAAI/AAAAAAAABEY/DqM5zrrAoLY/photo.jpg?sz=128", "display_name": "Rambou", "link": "https://stackoverflow.com/users/4488590/rambou"}, "reply_to_user": {"reputation": 23, "user_id": 9764166, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8lyqMhbYp80/AAAAAAAAAAI/AAAAAAAAAAA/ZIO4zuoolNw/photo.jpg?sz=128", "display_name": "Jayaswaminathan", "link": "https://stackoverflow.com/users/9764166/jayaswaminathan"}, "edited": false, "score": 0, "creation_date": 1559130704, "post_id": 56354815, "comment_id": 99323244, "body": "Then please update your question with an example XML file so I can help. :)"}], "tags": [], "owner": {"reputation": 462, "user_id": 4488590, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0RNt7PhTNDU/AAAAAAAAAAI/AAAAAAAABEY/DqM5zrrAoLY/photo.jpg?sz=128", "display_name": "Rambou", "link": "https://stackoverflow.com/users/4488590/rambou"}, "is_accepted": false, "score": 0, "last_activity_date": 1559113471, "creation_date": 1559113471, "answer_id": 56354815, "question_id": 56353821, "link": "https://stackoverflow.com/questions/56353821/soap-service-upload-attachment-using-angular/56354815#56354815", "title": "Soap Service Upload Attachment Using Angular", "body": "<p>SOAP services are using HTTP protocol so it's possible. In order to communicate with SOAP services, you can use <a href=\"https://www.npmjs.com/package/ngx-soap\" rel=\"nofollow noreferrer\">ngx-soap</a> angular module. Inside the body of SOAP request, you need to put the file you want to upload as binary data. </p>\n\n<p>Template file</p>\n\n<pre><code>&lt;input\n  style=\"display: none\"\n  type=\"file\" (change)=\"onFileChanged($event)\"\n  #fileInput&gt;\n&lt;button (click)=\"fileInput.click()\"&gt;Select File&lt;/button&gt;\n&lt;button (click)=\"onUpload()\"&gt;Upload!&lt;/button&gt;\n</code></pre>\n\n<p>Component file</p>\n\n<pre><code>export class MyFileUploadComponent {\n  selectedFile: File\n  client: Client;\n\n  constructor(private soap: NgxSoapService) {\n     this.soap.createClient('assets/fileuploader.wsdl').subscribe(client =&gt; this.client = client);\n  }\n\n  onFileChanged(event) {\n    this.selectedFile = event.target.files[0]\n  }\n\n  onUpload() {\n    // upload code goes here\n    const body = {\n          file: this.selectedFile\n    };\n    (&lt;any&gt;this.client).Add(body).subscribe((res: ISoapMethodResponse) =&gt; this.message = res.result.AddResult);\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9764166, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8lyqMhbYp80/AAAAAAAAAAI/AAAAAAAAAAA/ZIO4zuoolNw/photo.jpg?sz=128", "display_name": "Jayaswaminathan", "link": "https://stackoverflow.com/users/9764166/jayaswaminathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559280425, "creation_date": 1559108646, "last_edit_date": 1559280425, "question_id": 56353821, "link": "https://stackoverflow.com/questions/56353821/soap-service-upload-attachment-using-angular", "title": "Soap Service Upload Attachment Using Angular", "body": "<p>I am using soap services, In soap services, I pass XML and along with file attachment. In SoapUI tool its work fine. But in my case, I want to achieve through Angular6. Here my Xml code.</p>\n\n<pre><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:wsdl=\"http://service.wsvc.mhb.crimsonlogic.com/wsdl\"&gt;\n &lt;soapenv:Header&gt;&lt;wsse:Security soapenv:mustUnderstand=\"1\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;&lt;wsse:UsernameToken wsu:Id=\"UsernameToken-4C616D2C88CB4E2F9915586128832798\"&gt;&lt;wsse:Username&gt;this.userName&lt;/wsse:Username&gt;\n    &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest\"&gt; token.getPasswordDigest()  &lt;/wsse:Password&gt;&lt;wsse:Nonce EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\"&gt; token.getNonceBase64() &lt;/wsse:Nonce&gt;&lt;wsu:Created&gt; token.getCreated() &lt;/wsu:Created&gt;&lt;/wsse:UsernameToken&gt;&lt;/wsse:Security&gt;\n     &lt;/soapenv:Header&gt;\n      &lt;soapenv:Body&gt;\n      &lt;wsdl:SubmitMessageRequest&gt;\n      &lt;wsdl:DocumentType&gt; document &lt;/wsdl:DocumentType&gt;\n       &lt;wsdl:Subject&gt;this.fileName&lt;/wsdl:Subject&gt;\n       &lt;wsdl:PayloadName&gt;\n        &lt;wsdl:href&gt;cid: this.fileName&lt;/wsdl:href&gt;\n        &lt;/wsdl:PayloadName&gt;\n       &lt;wsdl:AttachmentFile&gt;\n        &lt;wsdl:href&gt;?&lt;/wsdl:href&gt;\n         &lt;/wsdl:AttachmentFile&gt;\n         &lt;/wsdl:SubmitMessageRequest&gt;\n        &lt;/wsdl:MessageSubmission&gt;\n      &lt;/soapenv:Body&gt;\n      &lt;/soapenv:Envelope&gt;\n</code></pre>\n"}, {"tags": ["typescript", "constructor", "super"], "comments": [{"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "edited": false, "score": 0, "creation_date": 1559109814, "post_id": 56353764, "comment_id": 99312249, "body": "You can have default value for those parameter in case of it&#39;s is optional fields for instantiate Programmer instance."}, {"owner": {"reputation": 6326, "user_id": 1876572, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/DRVDE.jpg?s=128&g=1", "display_name": "Eldho", "link": "https://stackoverflow.com/users/1876572/eldho"}, "edited": false, "score": 0, "creation_date": 1559110703, "post_id": 56353764, "comment_id": 99312609, "body": "A programmer is a person so he has name,age, other fields so it suppose to be initialized when you creating the class. Make what is optional and create instance of programmer based on whats is necessary."}], "answers": [{"comments": [{"owner": {"reputation": 1912, "user_id": 1223773, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aac75b053e30063b9e2663274b051fac?s=128&d=identicon&r=PG", "display_name": "burtek", "link": "https://stackoverflow.com/users/1223773/burtek"}, "edited": false, "score": 0, "creation_date": 1559124226, "post_id": 56353877, "comment_id": 99319740, "body": "How is that supposed to work, especially with <code>this.languages = languages;</code> ?"}], "tags": [], "owner": {"reputation": 3374, "user_id": 7203873, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f8cea8b0090dfbf776ebdb0f1e3c9d8a?s=128&d=identicon&r=PG", "display_name": "Plochie", "link": "https://stackoverflow.com/users/7203873/plochie"}, "is_accepted": false, "score": 1, "last_activity_date": 1559155101, "last_edit_date": 1559155101, "creation_date": 1559108956, "answer_id": 56353877, "question_id": 56353764, "link": "https://stackoverflow.com/questions/56353764/is-there-a-way-to-inherit-parameters-from-a-parent-classs-constructor/56353877#56353877", "title": "Is there a way to inherit parameters from a parent class&#39;s constructor?", "body": "<p>As <code>Person</code> is base class which can not be initialize without <code>name</code>, <code>age</code> and <code>height</code>, the extended class <code>Programmer</code> will compulsory needs the same constructor args.</p>\n\n<p>As you have mentioned in case there are many arguments, you can use creation pattern (like builder pattern) to create object of extended class.</p>\n\n<p>If you want no arg constructor you can make super constructor parameter as optional.</p>\n\n<pre><code>class Person {\n  name: string;\n  age: number;\n  height: number;\n\n  constructor(name?: string, age?: number, height?: number) {\n      this.name = name;\n      this.age = age;\n      this.height = height;\n  }\n}\n\n\nclass Programmer extends Person {\n  languages: string[];\n\n  constructor(languages: string[]) {\n      super();\n\n      this.languages = languages;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 10742787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JUxg.jpg?s=128&g=1", "display_name": "Guy Bartkus", "link": "https://stackoverflow.com/users/10742787/guy-bartkus"}, "edited": false, "score": 0, "creation_date": 1559150256, "post_id": 56354708, "comment_id": 99334410, "body": "Thanks, this is quite useful :)"}, {"owner": {"reputation": 25, "user_id": 10742787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JUxg.jpg?s=128&g=1", "display_name": "Guy Bartkus", "link": "https://stackoverflow.com/users/10742787/guy-bartkus"}, "edited": false, "score": 1, "creation_date": 1559180249, "post_id": 56354708, "comment_id": 99343567, "body": "In case anyone from the future is curious, you can sum up the solution to my problem with the phrase &quot;rest parameters&quot;."}, {"owner": {"reputation": 25, "user_id": 10742787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JUxg.jpg?s=128&g=1", "display_name": "Guy Bartkus", "link": "https://stackoverflow.com/users/10742787/guy-bartkus"}, "edited": false, "score": 1, "creation_date": 1570326353, "post_id": 56354708, "comment_id": 102877160, "body": "Can&#39;t edit previous comment, but I should have said &quot;spread operator&quot; and not &quot;rest parameters&quot;."}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 6, "last_activity_date": 1559112984, "creation_date": 1559112984, "answer_id": 56354708, "question_id": 56353764, "link": "https://stackoverflow.com/questions/56353764/is-there-a-way-to-inherit-parameters-from-a-parent-classs-constructor/56354708#56354708", "title": "Is there a way to inherit parameters from a parent class&#39;s constructor?", "body": "<p>You can't inherit, but you can refer to the parameter using <code>ContructorParameters</code> and you can spread them back in your derived constructor, as long as you don't mind adding any new parameters at the front: </p>\n\n<pre><code>class Person {\n    name: string;\n    age: number;\n    height: number;\n\n    constructor(name: string, age: number, height: number) {\n        this.name = name;\n        this.age = age;\n        this.height = height;\n    }\n}\n\nclass Programmer extends Person {\n    languages: string[];\n\n    constructor(languages: string[], ...p: ConstructorParameters&lt;typeof Person&gt;) {\n        super(...p);\n\n        this.languages = languages;\n    }\n}\n\nnew Programmer([\"A\"], \"\", 1, 1) // Since 3.4 you will get actual parameter names in intelisense not just ...p  \n</code></pre>\n\n<p>Not sure it's the best design though, and if you have a lot of parameters you might be better off defining an interface and passing that in instead. Or using some sort of mapped type to extract relevant fields.</p>\n"}], "owner": {"reputation": 25, "user_id": 10742787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1JUxg.jpg?s=128&g=1", "display_name": "Guy Bartkus", "link": "https://stackoverflow.com/users/10742787/guy-bartkus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 56354708, "answer_count": 2, "score": 2, "last_activity_date": 1559155101, "creation_date": 1559108350, "question_id": 56353764, "link": "https://stackoverflow.com/questions/56353764/is-there-a-way-to-inherit-parameters-from-a-parent-classs-constructor", "title": "Is there a way to inherit parameters from a parent class&#39;s constructor?", "body": "<p>The problem I'm having is that I have some base (generic) classes whose properties are initialized via the class's constructor. When I then go to extend this class to create a more specific class, I must re-type the same parameters that the base class's constructor has, just so I can pass them to super. If you imagine a very generic class that has many properties that are initialized via a constructor , and that is extended quite often, having to constantly re-type all these properties just to pass them to super each time seems inefficient. I am likely missing some common way of preventing this. Any ideas how to make this more efficient? Perhaps by somehow \"inheriting\" the parent class's constructor parameters?</p>\n\n<p>Here's a code example, and, as you can see, in <code>Programmer</code>'s constructor, I have to re-type <code>name</code>, <code>age</code>, and <code>height</code> again just to pass it to <code>super</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>class Person {\n    name: string;\n    age: number;\n    height: number;\n\n    constructor(name: string, age: number, height: number) {\n        this.name = name;\n        this.age = age;\n        this.height = height;\n    }\n}\n\nclass Programmer extends Person {\n    languages: string[];\n\n    constructor(name: string, age: number, height: number, languages: string[]) {\n        super(name, age, height);\n\n        this.languages = languages;\n    }\n}\n</code></pre>\n"}, {"tags": ["javascript", "angularjs", "typescript"], "comments": [{"owner": {"reputation": 2761, "user_id": 5860259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nuQx9j3fJd4/AAAAAAAAAAI/AAAAAAAADqc/c7CiqUETjMo/photo.jpg?sz=128", "display_name": "Sunil Kashyap", "link": "https://stackoverflow.com/users/5860259/sunil-kashyap"}, "edited": false, "score": 0, "creation_date": 1559107032, "post_id": 56353434, "comment_id": 99311268, "body": "why don&#39;t you use server-side storage to store employee data?"}, {"owner": {"reputation": 30794, "user_id": 1906356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nOR-lGSM4OQ/AAAAAAAAAAI/AAAAAAAAAKc/JK3VzYOOB-I/photo.jpg?sz=128", "display_name": "madalinivascu", "link": "https://stackoverflow.com/users/1906356/madalinivascu"}, "edited": false, "score": 1, "creation_date": 1559107033, "post_id": 56353434, "comment_id": 99311270, "body": "can&#39;t you use a service?"}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 30794, "user_id": 1906356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nOR-lGSM4OQ/AAAAAAAAAAI/AAAAAAAAAKc/JK3VzYOOB-I/photo.jpg?sz=128", "display_name": "madalinivascu", "link": "https://stackoverflow.com/users/1906356/madalinivascu"}, "edited": false, "score": 0, "creation_date": 1559107162, "post_id": 56353434, "comment_id": 99311315, "body": "@madalinivascu, I tried through service but i am getting the data as undefined.. If possible can you provide me one good solution please.."}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 2761, "user_id": 5860259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nuQx9j3fJd4/AAAAAAAAAAI/AAAAAAAADqc/c7CiqUETjMo/photo.jpg?sz=128", "display_name": "Sunil Kashyap", "link": "https://stackoverflow.com/users/5860259/sunil-kashyap"}, "edited": false, "score": 0, "creation_date": 1559107262, "post_id": 56353434, "comment_id": 99311343, "body": "@skdroid, No i cannot go with server side, it is the requirement i need to handle everything in front end.. Only thing is i need to share the data from one file to another as localstorage is not working for large data seeking help for other alternative.."}, {"owner": {"reputation": 30794, "user_id": 1906356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nOR-lGSM4OQ/AAAAAAAAAAI/AAAAAAAAAKc/JK3VzYOOB-I/photo.jpg?sz=128", "display_name": "madalinivascu", "link": "https://stackoverflow.com/users/1906356/madalinivascu"}, "edited": false, "score": 0, "creation_date": 1559107510, "post_id": 56353434, "comment_id": 99311422, "body": "how did you implement a service, if you got the data as undefined that means you may have some problems with promises, you should return promises from your service"}, {"owner": {"reputation": 4775, "user_id": 5243272, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZMyzR.jpg?s=128&g=1", "display_name": "sandrooco", "link": "https://stackoverflow.com/users/5243272/sandrooco"}, "edited": false, "score": 1, "creation_date": 1559107597, "post_id": 56353434, "comment_id": 99311452, "body": "Service will be the one and only solution to this. If you don&#39;t want to use it, don&#39;t use angular at all."}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 30794, "user_id": 1906356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nOR-lGSM4OQ/AAAAAAAAAAI/AAAAAAAAAKc/JK3VzYOOB-I/photo.jpg?sz=128", "display_name": "madalinivascu", "link": "https://stackoverflow.com/users/1906356/madalinivascu"}, "edited": false, "score": 0, "creation_date": 1559107842, "post_id": 56353434, "comment_id": 99311526, "body": "@madalinivascu, I am having the entire data in employeeratemodel.ts file which gives needed data so i tried to import it into <code>getEmployeeRates.ts</code> like <code>import { EmployeeRateModel } from &#39;..&#47;component&#47;employee-rates&#47;model&#47;employee-rate.model&#39;;</code> and when i instantiate like <code>console.log(&#39;EmployeeRateModel &#39;, new EmployeeRateModel());</code> it gives empty <code>EmployeeRateModel\u00a0{}</code> so i am trying to take internalRate from it like <code>new EmployeeRateModel().internalRate</code> which is undefined.. For your ref it is not service but i am getting needed data from this file.."}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 4775, "user_id": 5243272, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZMyzR.jpg?s=128&g=1", "display_name": "sandrooco", "link": "https://stackoverflow.com/users/5243272/sandrooco"}, "edited": false, "score": 0, "creation_date": 1559107934, "post_id": 56353434, "comment_id": 99311563, "body": "@sandrooco, At no point of time i said that i am not interested in using service.. If the service way then i just seeking help, i am facing few problems in it.. As this scenario is new for me i am quite confused in transferring the data through service.."}, {"owner": {"reputation": 4775, "user_id": 5243272, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZMyzR.jpg?s=128&g=1", "display_name": "sandrooco", "link": "https://stackoverflow.com/users/5243272/sandrooco"}, "edited": false, "score": 0, "creation_date": 1559108406, "post_id": 56353434, "comment_id": 99311704, "body": "@ManirajfromKarur That&#39;s totally fine, I&#39;d open up a new question about the service with all service code you had. What Angular version are you using?"}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 4775, "user_id": 5243272, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZMyzR.jpg?s=128&g=1", "display_name": "sandrooco", "link": "https://stackoverflow.com/users/5243272/sandrooco"}, "edited": false, "score": 0, "creation_date": 1559108603, "post_id": 56353434, "comment_id": 99311766, "body": "@sandrooco, Its version <code>&quot;@types&#47;angular&quot;: &quot;~1.6.42&quot;,</code> i am using angularjs and typescript.."}, {"owner": {"reputation": 1846, "user_id": 5746236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e5b2b5e435d4f91a4d28c3892347d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Rami", "link": "https://stackoverflow.com/users/5746236/yash-rami"}, "edited": false, "score": 0, "creation_date": 1559108659, "post_id": 56353434, "comment_id": 99311787, "body": "You can try like this  <a href=\"https://stackoverflow.com/questions/56075686/get-value-from-another-component-angular-7\" title=\"get value from another component angular 7\">stackoverflow.com/questions/56075686/&hellip;</a>"}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 4775, "user_id": 5243272, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZMyzR.jpg?s=128&g=1", "display_name": "sandrooco", "link": "https://stackoverflow.com/users/5243272/sandrooco"}, "edited": false, "score": 0, "creation_date": 1559108659, "post_id": 56353434, "comment_id": 99311788, "body": "@sandrooco. As i made a lengthy comment above regarding the file <code>EmployeeRateModel</code> that has the data i am in the need and i just need to import and receive the internal rate from it.."}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 4775, "user_id": 5243272, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZMyzR.jpg?s=128&g=1", "display_name": "sandrooco", "link": "https://stackoverflow.com/users/5243272/sandrooco"}, "edited": false, "score": 0, "creation_date": 1559108724, "post_id": 56353434, "comment_id": 99311808, "body": "@sandrooco, Typescript version <code>&quot;typescript&quot;: &quot;~2.7.1&quot;,</code> .."}, {"owner": {"reputation": 1846, "user_id": 5746236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e5b2b5e435d4f91a4d28c3892347d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Rami", "link": "https://stackoverflow.com/users/5746236/yash-rami"}, "edited": false, "score": 0, "creation_date": 1559109012, "post_id": 56353434, "comment_id": 99311923, "body": "@ManirajfromKarur why don&#39;t you use <code>rxJs</code> subject for the same?"}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 1846, "user_id": 5746236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9e5b2b5e435d4f91a4d28c3892347d7?s=128&d=identicon&r=PG&f=1", "display_name": "Yash Rami", "link": "https://stackoverflow.com/users/5746236/yash-rami"}, "edited": false, "score": 0, "creation_date": 1559109325, "post_id": 56353434, "comment_id": 99312057, "body": "@YashRami, My TS version doesn&#39;t support.."}, {"owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "reply_to_user": {"reputation": 4775, "user_id": 5243272, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ZMyzR.jpg?s=128&g=1", "display_name": "sandrooco", "link": "https://stackoverflow.com/users/5243272/sandrooco"}, "edited": false, "score": 0, "creation_date": 1559109757, "post_id": 56353434, "comment_id": 99312235, "body": "@sandrooco, Please help me with my edited question <code>EmployeeRateModel</code> instead of my first ts file, we can take this file where i am getting data i just need to fetch this data in my second ts file.."}, {"owner": {"reputation": 64, "user_id": 6848279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d094ab27286539fcccc4661371a09d?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Solanki", "link": "https://stackoverflow.com/users/6848279/sagar-solanki"}, "edited": false, "score": 0, "creation_date": 1560166776, "post_id": 56353434, "comment_id": 99635042, "body": "@ManirajfromKarur have you tried the blob option I mentioned below?"}], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 8064000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2025fc6e556bc5d5f4cb1f6b1e31542c?s=128&d=identicon&r=PG&f=1", "display_name": "v8-E", "link": "https://stackoverflow.com/users/8064000/v8-e"}, "edited": false, "score": 2, "creation_date": 1559107745, "post_id": 56353644, "comment_id": 99311495, "body": "I guess service would be best solution for this"}, {"owner": {"reputation": 2761, "user_id": 5860259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nuQx9j3fJd4/AAAAAAAAAAI/AAAAAAAADqc/c7CiqUETjMo/photo.jpg?sz=128", "display_name": "Sunil Kashyap", "link": "https://stackoverflow.com/users/5860259/sunil-kashyap"}, "reply_to_user": {"reputation": 897, "user_id": 8064000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2025fc6e556bc5d5f4cb1f6b1e31542c?s=128&d=identicon&r=PG&f=1", "display_name": "v8-E", "link": "https://stackoverflow.com/users/8064000/v8-e"}, "edited": false, "score": 1, "creation_date": 1559110902, "post_id": 56353644, "comment_id": 99312693, "body": "yes, but what if user close browser and open it again then all the data will vanish, to persist data storage is needed. @v8-E"}], "tags": [], "owner": {"reputation": 2761, "user_id": 5860259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nuQx9j3fJd4/AAAAAAAAAAI/AAAAAAAADqc/c7CiqUETjMo/photo.jpg?sz=128", "display_name": "Sunil Kashyap", "link": "https://stackoverflow.com/users/5860259/sunil-kashyap"}, "is_accepted": false, "score": 0, "last_activity_date": 1559107653, "creation_date": 1559107653, "answer_id": 56353644, "question_id": 56353434, "link": "https://stackoverflow.com/questions/56353434/how-to-transfer-data-from-one-file-to-another/56353644#56353644", "title": "How to transfer data from one file to another?", "body": "<p>use <a href=\"https://developers.google.com/web/ilt/pwa/working-with-indexeddb\" rel=\"nofollow noreferrer\">IndexedDB</a>, it is a large-scale, NoSQL storage system. It lets you store just about anything in the user's browser and it has a <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Browser_storage_limits_and_eviction_criteria\" rel=\"nofollow noreferrer\">huge limit</a> based on the client computer approx 20% of total storage.</p>\n\n<p>NPM Package <a href=\"https://www.npmjs.com/package/indexeddb-angular\" rel=\"nofollow noreferrer\">Angular IndexedDB</a> </p>\n"}, {"comments": [{"owner": {"reputation": 64, "user_id": 6848279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d094ab27286539fcccc4661371a09d?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Solanki", "link": "https://stackoverflow.com/users/6848279/sagar-solanki"}, "reply_to_user": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "edited": false, "score": 0, "creation_date": 1559108705, "post_id": 56353683, "comment_id": 99311799, "body": "That&#39;s not for the user, this is for the developer to handle the storage. Local storage has the limitation and it is not recommended to use local storage for larger data. Using the blob storage would be recommended to access files across different controllers."}], "tags": [], "owner": {"reputation": 64, "user_id": 6848279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d094ab27286539fcccc4661371a09d?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar Solanki", "link": "https://stackoverflow.com/users/6848279/sagar-solanki"}, "is_accepted": false, "score": 0, "last_activity_date": 1559107879, "creation_date": 1559107879, "answer_id": 56353683, "question_id": 56353434, "link": "https://stackoverflow.com/questions/56353434/how-to-transfer-data-from-one-file-to-another/56353683#56353683", "title": "How to transfer data from one file to another?", "body": "<p>Chrome's Local Storage default size is 10 Mb (<a href=\"https://en.wikipedia.org/wiki/Web_storage\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Web_storage</a>), so clearing your chrome's local storage could help you, if your data is larger than the limits, you may need to find alternatives like storing on blob storage and accessing the contents from blob itself.</p>\n\n<p>For the reference, you can handle the error if you want using the code below.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>try {\r\n     var counter = 1;\r\n     var stringData = \"AddLocalStorageTillItIsFull\";\r\n     for (var i = 0; i &lt;= counter; counter + 1) {\r\n         stringData += stringData;\r\n         localStorage.setItem(\"localStorageData\", stringData);\r\n         console.log(stringData);\r\n         console.log(counter);\r\n     }\r\n\r\n }\r\n catch (e) {\r\n     // When local storage is full, it goes hits this carch block\r\n     console.log(\"Local Storage is full, Please clear local storage data to add more\");\r\n }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 6202, "user_id": 7785337, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/uQ1JQ.jpg?s=128&g=1", "display_name": "Maniraj Murugan", "link": "https://stackoverflow.com/users/7785337/maniraj-murugan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1559123538, "creation_date": 1559106534, "last_edit_date": 1559123538, "question_id": 56353434, "link": "https://stackoverflow.com/questions/56353434/how-to-transfer-data-from-one-file-to-another", "title": "How to transfer data from one file to another?", "body": "<p>I am having two files such as,</p>\n\n<p><strong>employee-rates-controller.ts:</strong></p>\n\n<pre><code>private load() {\n\nreturn this.entityService\n      .load(this.$scope.projectRevisionUid)\n      .then(resp =&gt; {\n        localStorage.removeItem('employeerates');\n        this.$scope.employeeRates = resp.employeeRates;\n        return this.refreshCostRate(...resp.employeeRates)\n          .then(() =&gt;\n            localStorage.setItem(\n              'employeerates',\n              JSON.stringify(this.$scope.employeeRates)\n            )\n          )\n      .then(() =&gt; this.refreshBillRate(...resp.employeeRates))\n      .then(() =&gt; resp.employeeRates.forEach(erm =&gt; this.calculate(erm)))\n      .then(() =&gt; DatepickerUtil.reinitializeDatepickers(this.$scope));\n      })\n\n}\n</code></pre>\n\n<p>And in another file,</p>\n\n<p><strong>getEmployeeRates.ts:</strong></p>\n\n<pre><code>  const employeerates = JSON.parse(\n    localStorage.getItem('employeerates')\n  );\n\n  if (employeerates &amp;&amp; employeerates.length != null) {\n    employeerates.forEach((element: any) =&gt; {\n      if (\n        this.employee.getUid() === element.user.personUid &amp;&amp;\n        element.internalRate\n      ) {\n        this.cost_rate_uom = element.internalRate * this.uom_factor;\n        this.cost_rate_per_hour =\n          this.cost_rate_uom / this.uom_factor;\n        this.cost_rate.setValue(this.ap4_cost_rate_per_hour);\n      }\n    });\n  }\n</code></pre>\n\n<p>Here you can see,</p>\n\n<p>In first ts file,</p>\n\n<pre><code>localStorage.setItem('employeerates',JSON.stringify(this.$scope.employeeRates))\n</code></pre>\n\n<p>And in second ts file receiving the data,</p>\n\n<pre><code>const employeerates = JSON.parse(localStorage.getItem('employeerates'));\n</code></pre>\n\n<p>I couldn't not find any problem if i add very few employees but when i keep on adding employee which means storing them into <code>localstorage</code>, i am getting the error at certain point of time when the data size was huge and it blocks the entire process.</p>\n\n<p>The error was,</p>\n\n<blockquote>\n  <p>QuotaExceededError: Failed to execute 'setItem' on 'Storage': Setting\n  the value of 'employeerates' exceeded the quota.</p>\n</blockquote>\n\n<p>So i would like to get some good solution in transferring any large data from one file to another without using the localstorage..</p>\n\n<p>As the application is made in <strong>Angularjs and Typescript</strong> combination, i couldn't find out right solution as i am new to this scenario.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Instead of first TS file, i am also able to get the value in this file.</p>\n\n<p>employeeratemodel.ts:</p>\n\n<pre><code>export class EmployeeRateModel {\npublic uid: string;\n.\n.\n.\npublic internalRate: number; // Getting the value here\n}\n</code></pre>\n\n<p>How to fetch this value inside the second ts <code>getEmployeeRates.ts:</code> file..</p>\n\n<p>My try:</p>\n\n<pre><code>import { EmployeeRateModel } from '../component/employee-rates/model/employee-rate.model';\n\nconstructor() {\n    const data = new EmployeeRateModel();\n    console.log(data) // {}  // Gives empty object.. I need to fetch the internalRate from it..\n  }\n</code></pre>\n\n<p>Here if i get the data then it will be ease for me to get the <code>internalRate</code> which is needed for calculation, but as everything returns empty, this also fails for me..</p>\n\n<p>Kindly help me to fix it in appropriate way, stucked for long..</p>\n"}, {"tags": ["typescript", "typescript-typings"], "comments": [{"owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "edited": false, "score": 0, "creation_date": 1559106616, "post_id": 56353396, "comment_id": 99311162, "body": "You can try Record&lt;K,T&gt; for more details <a href=\"https://www.typescriptlang.org/docs/handbook/advanced-types.html\" rel=\"nofollow noreferrer\">typescriptlang.org/docs/handbook/advanced-types.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 136245, "user_id": 223386, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/tfslu.jpg?s=128&g=1", "display_name": "hsz", "link": "https://stackoverflow.com/users/223386/hsz"}, "edited": false, "score": 1, "creation_date": 1559109823, "post_id": 56353483, "comment_id": 99312255, "body": "Since keys will be always <code>string</code>: <code>type Dictionary&lt;T&gt; = Record&lt;string, T&gt;</code> <code>Record</code> is much better than my previous attempt, thanks."}], "tags": [], "owner": {"reputation": 22241, "user_id": 777147, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/UCGDm.jpg?s=128&g=1", "display_name": "Raja Jaganathan", "link": "https://stackoverflow.com/users/777147/raja-jaganathan"}, "is_accepted": true, "score": 5, "last_activity_date": 1559106765, "creation_date": 1559106765, "answer_id": 56353483, "question_id": 56353396, "link": "https://stackoverflow.com/questions/56353396/dictionary-type-in-typescript/56353483#56353483", "title": "Dictionary type in TypeScript", "body": "<p>We can try with built-in typescript advanced type called <code>Record&lt;K, T&gt;</code></p>\n\n<pre><code>interface MyInterface {\n    data: Record&lt;string, Item&gt;;\n}\n</code></pre>\n\n<p>Put everything together here</p>\n\n<pre><code>interface Item {\n    id: string;\n    name: string;\n}\n\ninterface MyInterface {\n    data: Record&lt;string, Item&gt;;\n}\n\nconst obj: MyInterface = {\n    data: {\n        \"123\": { id: \"123\", name: \"something\" }\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1961, "user_id": 884640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aoq2w.png?s=128&g=1", "display_name": "driftcatcher", "link": "https://stackoverflow.com/users/884640/driftcatcher"}, "is_accepted": false, "score": 0, "last_activity_date": 1618634476, "creation_date": 1618634476, "answer_id": 67134720, "question_id": 56353396, "link": "https://stackoverflow.com/questions/56353396/dictionary-type-in-typescript/67134720#67134720", "title": "Dictionary type in TypeScript", "body": "<p>Another solution:</p>\n<pre class=\"lang-js prettyprint-override\"><code>export interface Dict&lt;T&gt; {\n    [key: string]: T;\n}\n</code></pre>\n<p>This is the <code>Dict</code> type used <a href=\"https://github.com/orbitjs/orbit/blob/caddd70dafc0bfa393774d152cc8994c16ced899/packages/%40orbit/utils/src/dict.ts\" rel=\"nofollow noreferrer\">in orbit.js</a>.</p>\n"}], "owner": {"reputation": 136245, "user_id": 223386, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/tfslu.jpg?s=128&g=1", "display_name": "hsz", "link": "https://stackoverflow.com/users/223386/hsz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7120, "favorite_count": 0, "accepted_answer_id": 56353483, "answer_count": 2, "score": 3, "last_activity_date": 1618634476, "creation_date": 1559106258, "last_edit_date": 1572901122, "question_id": 56353396, "link": "https://stackoverflow.com/questions/56353396/dictionary-type-in-typescript", "title": "Dictionary type in TypeScript", "body": "<p>In a few places in my application, I'm declaring a dictionary types, like:</p>\n\n<pre><code>interface MyInterface {\n    data: { [key: string]: Item };\n}\n</code></pre>\n\n<p>Is there in TypeScript any built-in shorthand for the dictionaries/maps, to get something similar to:</p>\n\n<pre><code>interface MyInterface {\n    data: Dict&lt;Item&gt;;\n}\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "bash", "typescript"], "comments": [{"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 1, "creation_date": 1559103917, "post_id": 56353088, "comment_id": 99310604, "body": "Have one script with <code>#! &#47;usr&#47;local&#47;bin&#47;node</code> that just calls another file and use that other file in the browser?"}, {"owner": {"reputation": 15921, "user_id": 1542723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a969ba62fc77da0a20654caffbe234?s=128&d=identicon&r=PG", "display_name": "Ferrybig", "link": "https://stackoverflow.com/users/1542723/ferrybig"}, "edited": false, "score": 0, "creation_date": 1559110259, "post_id": 56353088, "comment_id": 99312418, "body": "Note that it&#39;s officially called a shebang, you might find better search result of you search on that keyword"}, {"owner": {"reputation": 682, "user_id": 131782, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96a1ef57fee8349bd6f92faf153f9ec3?s=128&d=identicon&r=PG", "display_name": "Breck", "link": "https://stackoverflow.com/users/131782/breck"}, "reply_to_user": {"reputation": 15921, "user_id": 1542723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8a969ba62fc77da0a20654caffbe234?s=128&d=identicon&r=PG", "display_name": "Ferrybig", "link": "https://stackoverflow.com/users/1542723/ferrybig"}, "edited": false, "score": 0, "creation_date": 1559259819, "post_id": 56353088, "comment_id": 99373790, "body": "Thanks @Ferrybig, but can you clarify what you mean by &quot;officially&quot;?"}, {"owner": {"reputation": 5778, "user_id": 8698101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a32951f0068d47dfdc1dfc90ff44612b?s=128&d=identicon&r=PG&f=1", "display_name": "B. Fleming", "link": "https://stackoverflow.com/users/8698101/b-fleming"}, "edited": false, "score": 1, "creation_date": 1559260544, "post_id": 56353088, "comment_id": 99373952, "body": "@Breck Simply compare the <a href=\"https://trends.google.com/trends/explore?date=all&amp;q=shebang,hashbang\" rel=\"nofollow noreferrer\">search trends from Google</a> and you&#39;ll find that usage of the term <code>shebang</code> vastly dwarfs usage of the term <code>hashbang</code>. Both terms are technically correct, but <code>shebang</code> is the standard."}], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 131782, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96a1ef57fee8349bd6f92faf153f9ec3?s=128&d=identicon&r=PG", "display_name": "Breck", "link": "https://stackoverflow.com/users/131782/breck"}, "edited": false, "score": 0, "creation_date": 1559578388, "post_id": 56391335, "comment_id": 99456516, "body": "This is the kind of clever hack I was looking for! I just did: &quot;///usr/local/bin/node filename; exit;&quot; which ensured I got the correct cwd. Now, if you excuse me I&#39;m going to add a build step and do things the &quot;proper&quot; way. But happy there is a way."}], "tags": [], "owner": {"reputation": 4222, "user_id": 2072269, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/xNPjb.png?s=128&g=1", "display_name": "muru", "link": "https://stackoverflow.com/users/2072269/muru"}, "is_accepted": true, "score": 1, "last_activity_date": 1559291042, "creation_date": 1559291042, "answer_id": 56391335, "question_id": 56353088, "link": "https://stackoverflow.com/questions/56353088/how-to-add-a-hashbang-to-an-executable-javascript-file-without-breaking-browser/56391335#56391335", "title": "How to add a hashbang to an executable Javascript file without breaking browser support?", "body": "<p>If you only ever use bash, you can take advantage of one feature (?!) of bash: <a href=\"https://www.gnu.org/software/bash/manual/bash.html#Shell-Scripts\" rel=\"nofollow noreferrer\">bash executes scripts without a shebang using bash</a>. Other shells may leave it to the OS, which would usually use <code>/bin/sh</code> instead. For example:</p>\n\n<pre><code>bash-5.0$ echo 'echo $1 $BASH_VERSION' &gt; foo.sh\nbash-5.0$ for sh in sh bash dash ksh zsh; do $sh -c \"./foo.sh $sh\"; done\nsh 3.2.57(1)-release\nbash 5.0.7(1)-release\ndash 3.2.57(1)-release\nksh\nzsh 3.2.57(1)-release\n</code></pre>\n\n<p>(<code>/bin/sh</code> being a link to an old version of bash here on macOS.)</p>\n\n<p>So, you could have a file like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>///usr/local/bin/node &lt;(tail -n +1 \"$0\"); exit $?\nconsole.log(\"Hello world\")\n</code></pre>\n\n<p>If you run this in a browser, or other means of running JavaScript, the first line should be ignored as a comment.</p>\n\n<p>If you run this as a script in bash, the first line tells it to run <code>///usr/local/bin/node</code>, using process substitution with <code>tail</code> to feed the rest of the file to node, and then exits:</p>\n\n<pre><code>bash-5.0$ cat foo.js\n///usr/local/bin/node &lt;(tail -n +1 \"$0\"); exit $?\nconsole.log(\"Hello world\")\nbash-5.0$ ./foo.js\nHello world\n</code></pre>\n\n<p>This trick might work with ksh as well. The <code>///</code> at the beginning of the path shouldn't cause problems - three or more <code>/</code> at the start of a path are equivalent to a single <code>/</code>.</p>\n\n<p>But I would strongly encourage you to use a wrapper script instead, as suggested by the comments.</p>\n"}], "owner": {"reputation": 682, "user_id": 131782, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/96a1ef57fee8349bd6f92faf153f9ec3?s=128&d=identicon&r=PG", "display_name": "Breck", "link": "https://stackoverflow.com/users/131782/breck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56391335, "answer_count": 1, "score": 1, "last_activity_date": 1559291042, "creation_date": 1559103832, "last_edit_date": 1559259785, "question_id": 56353088, "link": "https://stackoverflow.com/questions/56353088/how-to-add-a-hashbang-to-an-executable-javascript-file-without-breaking-browser", "title": "How to add a hashbang to an executable Javascript file without breaking browser support?", "body": "<p>Is it possible to have code like this:</p>\n\n<pre><code>#! /usr/local/bin/node\nconsole.log(\"Hello world\")\n</code></pre>\n\n<p>That I can also run in the browser?</p>\n\n<p>I have a script that I run locally and want to run it in the browser but right now I need to \"recompile\" it for the browser target only to remove the hashbang line.</p>\n\n<p>I can't think of a way around it. Any ideas?</p>\n\n<p>Edit: my use is that I don't want to have 2 files, as I want to be able execute the current file while working on it, and also serve it via the web. I think the solution is going to have to be to either compile it for the browser to a second file or to use an alternative to #! that plays nice with javascript.</p>\n"}, {"tags": ["typescript", "websocket", "atmosphere", "atmosphere.js"], "comments": [{"owner": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1560327335, "post_id": 56352982, "comment_id": 99695311, "body": "I got my solution. Please check below solution in detail."}], "answers": [{"comments": [{"owner": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1559193837, "post_id": 56353367, "comment_id": 99346123, "body": "Ok. Let me try to describe it. **I am using AtmosphereJS for Websockets in my project. <code>createSSE</code> is my function in a component in which i am using  <code>this.request.onmessage</code> here <code>this.request</code> is <i>AtmosphereRequest</i> reference object and it contacts Atmosphere.js which contains <code>onmessage</code> function and it calls then it come back to my component and execute further code. Outside <code>createSSE</code> I have create another function <code>onMessageRender()</code> and I want to call it in  <code>this.request.onMessage</code> function **. I hope I am able to make you understand it."}, {"owner": {"reputation": 46, "user_id": 5871125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5aef2278185f6f4bd4e72e39f5b9b1?s=128&d=identicon&r=PG&f=1", "display_name": "kairun", "link": "https://stackoverflow.com/users/5871125/kairun"}, "reply_to_user": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1559283069, "post_id": 56353367, "comment_id": 99378266, "body": "Hmm okies, can you just call your <code>onMessageRender()</code> without <code>this</code> keyword @AmbujKhanna?"}, {"owner": {"reputation": 46, "user_id": 5871125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5aef2278185f6f4bd4e72e39f5b9b1?s=128&d=identicon&r=PG&f=1", "display_name": "kairun", "link": "https://stackoverflow.com/users/5871125/kairun"}, "reply_to_user": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1560230591, "post_id": 56353367, "comment_id": 99656060, "body": "Try finding out why engine couldn&#39;t find the function then, e.g. is your global function available in this context? If it is not, try to find out why it is not available. e.g. if the global function is in the same file, if it&#39;s not did you export/import the function correctly? if you did export/import correctly(or if your function is ambient function), did you consider the timing of function being declared and being available in your context? if this is typing issue, did you declare your function with proper typings and etc?"}, {"owner": {"reputation": 46, "user_id": 5871125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5aef2278185f6f4bd4e72e39f5b9b1?s=128&d=identicon&r=PG&f=1", "display_name": "kairun", "link": "https://stackoverflow.com/users/5871125/kairun"}, "reply_to_user": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1560230671, "post_id": 56353367, "comment_id": 99656078, "body": "with information given so far only answer I can give is limited to generic answers, if these options didn&#39;t work then I recommend you to create a public/mock project that replicates this issue and then edit your question with this additional info"}, {"owner": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1560326964, "post_id": 56353367, "comment_id": 99695107, "body": "I got my solution. I just converted my normal function into fat arrow function. <code>this.request.onMessage = (response) =&gt; {.....}</code>"}, {"owner": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1560327442, "post_id": 56353367, "comment_id": 99695363, "body": "It is declared in same class and it is global function. There is no context or typing mistake. Thankyou!"}, {"owner": {"reputation": 46, "user_id": 5871125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5aef2278185f6f4bd4e72e39f5b9b1?s=128&d=identicon&r=PG&f=1", "display_name": "kairun", "link": "https://stackoverflow.com/users/5871125/kairun"}, "reply_to_user": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "edited": false, "score": 0, "creation_date": 1560421020, "post_id": 56353367, "comment_id": 99734370, "body": "Well if changing to arrow function made this to work then this is a context issue, as normal function may run in different context from time to time. You don&#39;t say this is declared in your class, but it just sounds this is declared as a global function only in the context of your file, which doesn&#39;t really make it as global function as in globally available function (you won&#39;t be able to use this function from different file as ambient function)"}], "tags": [], "owner": {"reputation": 46, "user_id": 5871125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5aef2278185f6f4bd4e72e39f5b9b1?s=128&d=identicon&r=PG&f=1", "display_name": "kairun", "link": "https://stackoverflow.com/users/5871125/kairun"}, "is_accepted": false, "score": 0, "last_activity_date": 1559107706, "last_edit_date": 1559107706, "creation_date": 1559105985, "answer_id": 56353367, "question_id": 56352982, "link": "https://stackoverflow.com/questions/56352982/how-to-call-global-or-external-function-into-child-function/56353367#56353367", "title": "How to call global or external function into child function?", "body": "<p>Assuming this is an Angular/typescript question,</p>\n\n<p>if <code>createSSE</code> is declared as part of an Angular module, and if <code>onMessageRender()</code> is a global function which is not declared as part of an Angular module, calling <code>onMessageRender()</code> should be without <code>this</code>, as <code>onMessageRender()</code> may not be part of the same object that <code>createSSE</code> is declared.</p>\n\n<p>If <code>onMessageRender()</code> is indeed part of the same object, I think more detail is required to answer your question.</p>\n"}, {"tags": [], "owner": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "is_accepted": false, "score": 0, "last_activity_date": 1560327300, "creation_date": 1560327300, "answer_id": 56557559, "question_id": 56352982, "link": "https://stackoverflow.com/questions/56352982/how-to-call-global-or-external-function-into-child-function/56557559#56557559", "title": "How to call global or external function into child function?", "body": "<p>I would like to answer my own Question because after lots of fight. I got my working solution.</p>\n\n<p>I need to convert my Normal/Old style function into Fat Arrow function because <strong>Arrow function always has <code>this</code> reference and it is available for that class object.</strong></p>\n\n<p>Old (Not Working)</p>\n\n<blockquote>\n  <p>this.request.onMessage = function (response) {...}</p>\n</blockquote>\n\n<p>New (Working)</p>\n\n<blockquote>\n  <p>this.request.onMessage = (response) => {...}</p>\n</blockquote>\n\n<p>After above changes, now it is accepting all other functions in it.</p>\n\n<p>Thank you all for your time and support!</p>\n"}], "owner": {"reputation": 822, "user_id": 1838451, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Leyvx.jpg?s=128&g=1", "display_name": "Ambuj Khanna", "link": "https://stackoverflow.com/users/1838451/ambuj-khanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1560327300, "creation_date": 1559102915, "question_id": 56352982, "link": "https://stackoverflow.com/questions/56352982/how-to-call-global-or-external-function-into-child-function", "title": "How to call global or external function into child function?", "body": "<p>I am using below code and when i am calling <em><code>onMessageRender()</code></em> function, so it says <code>\"this is not a function\"</code></p>\n\n<blockquote>\n  <p>request = new Atmosphere.AtmosphereRequest(); // Global Function</p>\n</blockquote>\n\n<p>Calling below code in ngONinIt</p>\n\n<blockquote>\n  <p>this.createSSE();</p>\n</blockquote>\n\n<pre><code>//Main function \n createSSE(){ this.request.onMessage = function (response) {\n        console.log('request.onMessage trigger');\n         try {\n           let jsonData = JSON.parse(message);\n          console.log('Normal Message JSON this.request.util', jsonData);  \n          this.onMessageRender();    \n        }catch (e) {\n           console.log('Error in websocket onmessage: ', e);\n           return;\n         } }\n</code></pre>\n\n<p>Created below function globally</p>\n\n<pre><code>onMessageRender(){\n\n}\n</code></pre>\n\n<p>Please let me know if you need more information. Thanks!</p>\n"}, {"tags": ["javascript", "reactjs", "typescript"], "comments": [{"owner": {"reputation": 4400, "user_id": 574531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c32fe01c48edccb228f69feb0377b7a?s=128&d=identicon&r=PG", "display_name": "Herohtar", "link": "https://stackoverflow.com/users/574531/herohtar"}, "edited": false, "score": 2, "creation_date": 1559102634, "post_id": 56352932, "comment_id": 99310346, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12393303/storing-a-variable-in-the-javascript-window-object-is-a-proper-way-to-use-that\">Storing a variable in the JavaScript &#39;window&#39; object is a proper way to use that object?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3249, "user_id": 3102993, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/nwAIr.jpg?s=128&g=1", "display_name": "blankface", "link": "https://stackoverflow.com/users/3102993/blankface"}, "edited": false, "score": 0, "creation_date": 1559102795, "post_id": 56352951, "comment_id": 99310384, "body": "&quot; The biggest concern would be naming MySpace conflict.&quot; - Could you elaborate?"}, {"owner": {"reputation": 204459, "user_id": 390330, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1400be56ff17549b926dd3260da4a494?s=128&d=identicon&r=PG", "display_name": "basarat", "link": "https://stackoverflow.com/users/390330/basarat"}, "reply_to_user": {"reputation": 3249, "user_id": 3102993, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/nwAIr.jpg?s=128&g=1", "display_name": "blankface", "link": "https://stackoverflow.com/users/3102993/blankface"}, "edited": false, "score": 0, "creation_date": 1559103343, "post_id": 56352951, "comment_id": 99310493, "body": "If someone else decides to use the same name (called <code>MySpace</code>) you would have a naming conflict"}, {"owner": {"reputation": 3249, "user_id": 3102993, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/nwAIr.jpg?s=128&g=1", "display_name": "blankface", "link": "https://stackoverflow.com/users/3102993/blankface"}, "edited": false, "score": 0, "creation_date": 1559103845, "post_id": 56352951, "comment_id": 99310588, "body": "I&#39;ve updated the original post with a different approach. Would appreciate your input. Thanks."}], "tags": [], "owner": {"reputation": 204459, "user_id": 390330, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1400be56ff17549b926dd3260da4a494?s=128&d=identicon&r=PG", "display_name": "basarat", "link": "https://stackoverflow.com/users/390330/basarat"}, "is_accepted": false, "score": 0, "last_activity_date": 1559102660, "creation_date": 1559102660, "answer_id": 56352951, "question_id": 56352932, "link": "https://stackoverflow.com/questions/56352932/is-it-advisable-to-add-to-the-global-window-object/56352951#56352951", "title": "Is it advisable to add to the global window object?", "body": "<blockquote>\n  <p>where I need to store a value for the number of rows that needs to be accessible globally</p>\n</blockquote>\n\n<p>If you <em>have</em> to have to globally then ofcourse you would put it on <code>window</code>. The biggest concern would be naming <code>MySpace</code> conflict. </p>\n\n<h1>Rethink</h1>\n\n<p>However you probably don't need it globally, and really you should use a module. </p>\n"}, {"tags": [], "owner": {"reputation": 1528, "user_id": 10679524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSlY3.png?s=128&g=1", "display_name": "Akshay Mulgavkar", "link": "https://stackoverflow.com/users/10679524/akshay-mulgavkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1559103541, "creation_date": 1559103541, "answer_id": 56353053, "question_id": 56352932, "link": "https://stackoverflow.com/questions/56352932/is-it-advisable-to-add-to-the-global-window-object/56353053#56353053", "title": "Is it advisable to add to the global window object?", "body": "<p>When You need to store a value that needs to be accessible globally, create a global object with a unique name, with your variables as properties of that object:</p>\n\n<pre><code>window.MySpace= {};\n</code></pre>\n\n<p>Then use it in whatever way you prefer.\nUse it with functions </p>\n\n<pre><code>MySpace.show();\nMySpace.hide();\n</code></pre>\n\n<p>Assign a value to it </p>\n\n<pre><code>MySpace.value=1;\nMySpace.value=2;\n</code></pre>\n\n<p>different ways to handle that</p>\n\n<pre><code>MySpace.rowCount = 10;\n</code></pre>\n\n<p>and yes it is sometimes a good idea to define it on the window object, some cases require other ways of defining. </p>\n\n<p>You're good to go!!</p>\n"}], "owner": {"reputation": 3249, "user_id": 3102993, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/nwAIr.jpg?s=128&g=1", "display_name": "blankface", "link": "https://stackoverflow.com/users/3102993/blankface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1559103895, "creation_date": 1559102520, "last_edit_date": 1559103895, "question_id": 56352932, "link": "https://stackoverflow.com/questions/56352932/is-it-advisable-to-add-to-the-global-window-object", "title": "Is it advisable to add to the global window object?", "body": "<p>So I'm working a React/Typescript project, where I need to store a value for the number of rows that needs to be accessible globally.</p>\n\n<p>Is it a good idea to define it on the window object?</p>\n\n<pre><code>window.MySpace = {};\nMySpace.rowCount = 10;\n</code></pre>\n\n<p>Are there any issues that could arise as the project grows? Or is there a more elegant way of handling this through Typescript?</p>\n\n<p>Thanks!</p>\n\n<p>edit:</p>\n\n<p>Declare it as a module in a <code>module.ts</code> file</p>\n\n<pre><code>export module Global {\n    export const rowCount = 10;\n}\n</code></pre>\n\n<p>Then import it to whichever file requires the value of <code>rowCount</code>.</p>\n"}, {"tags": ["css", "angular", "typescript", "media-queries", "primeng"], "answers": [{"tags": [], "owner": {"reputation": 1885, "user_id": 6157849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsSjx.jpg?s=128&g=1", "display_name": "Jesse", "link": "https://stackoverflow.com/users/6157849/jesse"}, "is_accepted": false, "score": 1, "last_activity_date": 1559103298, "creation_date": 1559103298, "answer_id": 56353023, "question_id": 56352717, "link": "https://stackoverflow.com/questions/56352717/expand-all-primeng-accordion-panels-automatically-for-printing/56353023#56353023", "title": "Expand all PrimeNG Accordion panels automatically for Printing", "body": "<p>This is an interesting one. To keep it inside the realm of Angular, you could use the <code>@angular/cdk/layout</code> library and inject <code>MediaMatcher</code>.  You could also, of course, do almost this exact same thing using JavaScript (see <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList\" rel=\"nofollow noreferrer\">here</a>... the cdk/layout method I'll show you really just wraps this).</p>\n\n<p>The <code>MediaMatcher</code> service has a method called <code>matchMedia</code>, and from there you just add a listener:</p>\n\n<pre><code>import { MediaMatcher } from '@angular/cdk/layout';\n\nconstructor(private readonly mediaMatcher: MediaMatcher ) { }\n\nngOnInit() {\n    mediaMatcher.matchMedia('print').addListener(e =&gt; e.matches ? \n    console.log('printing!') : null);\n}\n</code></pre>\n\n<p>So where I've put the <code>console.log</code>, just perform your logic to get the accordians to expand.</p>\n"}, {"tags": [], "owner": {"reputation": 12075, "user_id": 8757883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQGYY.png?s=128&g=1", "display_name": "Akber Iqbal", "link": "https://stackoverflow.com/users/8757883/akber-iqbal"}, "is_accepted": true, "score": 3, "last_activity_date": 1559103455, "creation_date": 1559103455, "answer_id": 56353047, "question_id": 56352717, "link": "https://stackoverflow.com/questions/56352717/expand-all-primeng-accordion-panels-automatically-for-printing/56353047#56353047", "title": "Expand all PrimeNG Accordion panels automatically for Printing", "body": "<p>media query is the way to go, you can take a css only approach to achieve this; no change in TS or HTML files</p>\n\n<p>relevant <strong>css</strong>:</p>\n\n<pre><code>@media print {\n  ::ng-deep .ui-accordion-content-wrapper-overflown {\n      overflow: visible;\n      height: auto !important;\n  }\n}\n</code></pre>\n\n<p>complete <a href=\"https://stackblitz.com/edit/angular-h4rwsl\" rel=\"nofollow noreferrer\">demo on stackblitz here</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/KX3nx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KX3nx.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 626, "user_id": 2253406, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3dec577bdcb979af0c63fcd1335123bc?s=128&d=identicon&r=PG", "display_name": "sreisman", "link": "https://stackoverflow.com/users/2253406/sreisman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 2, "accepted_answer_id": 56353047, "answer_count": 2, "score": 2, "last_activity_date": 1559104650, "creation_date": 1559100543, "last_edit_date": 1559104650, "question_id": 56352717, "link": "https://stackoverflow.com/questions/56352717/expand-all-primeng-accordion-panels-automatically-for-printing", "title": "Expand all PrimeNG Accordion panels automatically for Printing", "body": "<p>I am currently using the PrimeNG library's accordion component in my angular project. <a href=\"https://www.primefaces.org/primeng/#/accordion\" rel=\"nofollow noreferrer\">See info here</a>.</p>\n\n<p>The template includes some special css styling for printing the page--something like the following:</p>\n\n<pre><code> @media print {\n  .profile-progress-bar, .top-template-header-content, .header.profile-header{\n    display: none !important;\n  }\n  html, body {\n    height: auto;\n    font-size: 10px !important;\n  }\n\n  p-accordionTab &gt; div {\n    display: block !important;\n    selected: true !important;\n  }\n\n}\n</code></pre>\n\n<p>What I am trying to do, is automatically expand all <code>accordionTab</code> elements when the <code>@media print</code> rendering is processed for the page to be printed.  </p>\n\n<p>From the documentation I see that each <code>accordionTab</code> element has a <code>[selected]</code> property which can be bound to and set to \"true\" in order to expand the tab.</p>\n\n<blockquote>\n  <p>Selected Visibility of the content is specified with the selected\n  property that supports one or two-way binding.</p>\n</blockquote>\n\n<p>However, can this be somehow automatically triggered when the <code>@media print</code> rendering occurs?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "reactjs", "typescript", "destructuring"], "comments": [{"owner": {"reputation": 3596, "user_id": 737114, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/6e7eeb0df359ed22bb3fbe828930613e?s=128&d=identicon&r=PG", "display_name": "ak85", "link": "https://stackoverflow.com/users/737114/ak85"}, "edited": false, "score": 0, "creation_date": 1559100576, "post_id": 56352702, "comment_id": 99309957, "body": "good question, I would do it how you have done it so I will be interested to see other answers here."}], "answers": [{"comments": [{"owner": {"reputation": 7109, "user_id": 1068446, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/F5uzH.jpg?s=128&g=1", "display_name": "dwjohnston", "link": "https://stackoverflow.com/users/1068446/dwjohnston"}, "edited": false, "score": 0, "creation_date": 1559102663, "post_id": 56352919, "comment_id": 99310352, "body": "Hey! My Melbourne friend!"}, {"owner": {"reputation": 204459, "user_id": 390330, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1400be56ff17549b926dd3260da4a494?s=128&d=identicon&r=PG", "display_name": "basarat", "link": "https://stackoverflow.com/users/390330/basarat"}, "reply_to_user": {"reputation": 7109, "user_id": 1068446, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/F5uzH.jpg?s=128&g=1", "display_name": "dwjohnston", "link": "https://stackoverflow.com/users/1068446/dwjohnston"}, "edited": false, "score": 0, "creation_date": 1559102695, "post_id": 56352919, "comment_id": 99310359, "body": "See you tomorrow at react melb \ud83c\udf39"}], "tags": [], "owner": {"reputation": 204459, "user_id": 390330, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1400be56ff17549b926dd3260da4a494?s=128&d=identicon&r=PG", "display_name": "basarat", "link": "https://stackoverflow.com/users/390330/basarat"}, "is_accepted": false, "score": 1, "last_activity_date": 1559102436, "creation_date": 1559102436, "answer_id": 56352919, "question_id": 56352702, "link": "https://stackoverflow.com/questions/56352702/is-there-a-way-to-both-destructure-a-function-parameter-and-keep-a-named-refere/56352919#56352919", "title": "Is there a way to both destructure a function parameter, and keep a named reference to the parameter?", "body": "<blockquote>\n  <p>Is there a way to both destructure a function parameter, and keep a named reference to the parameter?</p>\n</blockquote>\n\n<p>No. You will need to do it two step as you have where you take the props as a single argument and then destructure them later.</p>\n"}, {"tags": [], "owner": {"reputation": 3593, "user_id": 7282573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da183c76c0a1f20d6414b809edd9e455?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas", "link": "https://stackoverflow.com/users/7282573/nicholas"}, "is_accepted": true, "score": 6, "last_activity_date": 1559102763, "creation_date": 1559102763, "answer_id": 56352964, "question_id": 56352702, "link": "https://stackoverflow.com/questions/56352702/is-there-a-way-to-both-destructure-a-function-parameter-and-keep-a-named-refere/56352964#56352964", "title": "Is there a way to both destructure a function parameter, and keep a named reference to the parameter?", "body": "<p>No (mostly)</p>\n\n<hr>\n\n<h1>From the grammar:</h1>\n\n<p>It's hard to prove a negative, so I had to go to the grammar.</p>\n\n<p>Typescript, as far as I'm aware, does not provide any extra destructuring power that javascript does not, so I'll just answer this for javascript.</p>\n\n<p>In the ES6 grammar, there's no way for a single function parameter to be both destructed and given a name in the parameter list, in one parameter.</p>\n\n<p>If you look at the <a href=\"https://gist.github.com/rbuckton/0d8c1f1c607f52f5ae37#FormalParameter\" rel=\"noreferrer\">ES6 grammar</a> for <code>FormalParameter</code>, which is one of the things in an argument list, you'll find it can only be a <code>BindingElement</code>, which is either a <code>SingleNameBinding</code> or a <code>BindingPattern</code> \u2014 not both. Binding patterns can only do destructuring and single name bindings can only assign to one value, so there's no way to do both.</p>\n\n<p>(Note the grammar I linked is just a gist someone put on github. I don't think someone would post a misleading ES6 grammar on github, but if you're skeptical you can always check the less convenient official grammar.)</p>\n\n<p>It's possible there's some other wild way to do this that I missed, but I've never seen it before and would be very surprised.</p>\n\n<hr>\n\n<h1>If you really want to...</h1>\n\n<p>You're \"best way you can think of\" is the best way I can think of too. You should do that.</p>\n\n<p>I don't like answering \"no\", though, so if you really want to get it all in the parameter list, you can do something unpleasant instead. If you do:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function assignAndDestructure(props, { foo, bar } = props) {\n    // props, foo, and bar will all be assigned\n}\n</code></pre>\n\n<p>which kind of fits your criteria. However, it creates an optional second parameter the caller can abuse to mess up your destructuring. You can hide it by assigning it to a type that doesn't have that parameter in Typescript, but it's still risky.</p>\n\n<hr>\n\n<p>In summary, there's no good way to do it, but there is a bad way. Go with your mentioned \"best you can think of.\"</p>\n"}], "owner": {"reputation": 7109, "user_id": 1068446, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/F5uzH.jpg?s=128&g=1", "display_name": "dwjohnston", "link": "https://stackoverflow.com/users/1068446/dwjohnston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2198, "favorite_count": 0, "accepted_answer_id": 56352964, "answer_count": 2, "score": 8, "last_activity_date": 1559116905, "creation_date": 1559100422, "last_edit_date": 1559116905, "question_id": 56352702, "link": "https://stackoverflow.com/questions/56352702/is-there-a-way-to-both-destructure-a-function-parameter-and-keep-a-named-refere", "title": "Is there a way to both destructure a function parameter, and keep a named reference to the parameter?", "body": "<p>In react stateless functional components we'll commonly write something like this: </p>\n\n<pre><code>export function MyCompoment({\n    title, \n    foo, \n    bar\n}) {\n    return &lt;div&gt; title: {title}, ...&lt;/div&gt;\n}\n</code></pre>\n\n<p>Where we're immediately destructuring the props object into its variables. </p>\n\n<p>Now I'm using a Material-UI <code>makeStyles</code> hook, and I'm also using TypeScript, and the way I'm currently using it looks like this. </p>\n\n<pre><code>const useStyles = makeStyles((theme : Theme ) =&gt;({\n     root: ({foo} : MyComponentProps) =&gt; ({\n         content: foo\n     })\n}); \n\ninterface MyComponentProps  {\n    title: string; \n    foo: string; \n    bar: string; \n}\nexport function MyCompoment({\n    title, \n    foo, \n    bar\n} : MyComponentProps) {\n    const classes = useStyles({\n        title,\n        foo, \n        bar\n    }); \n    return &lt;div&gt; title: {title}, ...&lt;/div&gt;\n}\n</code></pre>\n\n<p>And you can see the problem - I have to repeat the props variable names to pass into the classes. </p>\n\n<p>The best way I can think to avoid this, is write it this way: </p>\n\n<pre><code>export function MyCompoment(props: MyComponentProps) {\n    const {\n       title, \n       foo, \n       bar\n    }  = props; \n    const classes = useStyles(props); \n    return &lt;div&gt; title: {title}, ...&lt;/div&gt;\n}\n</code></pre>\n\n<p>But that's a little messier than I was wanting. </p>\n\n<p>I was wondering if it's possible to do something like: </p>\n\n<pre><code>export function MyCompoment({\n       title, \n       foo, \n       bar\n    }  = props : MyComponentProps) {\n\n    const classes = useStyles(props); \n    return &lt;div&gt; title: {title}, ...&lt;/div&gt;\n}\n</code></pre>\n\n<p>Pretty picky I know, just wondering. </p>\n"}, {"tags": ["angular", "typescript"], "comments": [{"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 2, "creation_date": 1559095635, "post_id": 56352118, "comment_id": 99309051, "body": "You have the order of the pipe parameters wrong in the template."}, {"owner": {"reputation": 107, "user_id": 11205399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4602361ea66c61fed754346dfd62546?s=128&d=identicon&r=PG&f=1", "display_name": "JacobTStaggs", "link": "https://stackoverflow.com/users/11205399/jacobtstaggs"}, "reply_to_user": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1559095825, "post_id": 56352118, "comment_id": 99309093, "body": "Oh well that is embarrassing. Running on a lack of sleep and stuff really does mess you up. Thank you for the quick and correct answer."}, {"owner": {"reputation": 42740, "user_id": 1031569, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MTZr2.png?s=128&g=1", "display_name": "Reactgular", "link": "https://stackoverflow.com/users/1031569/reactgular"}, "edited": false, "score": 0, "creation_date": 1559096171, "post_id": 56352118, "comment_id": 99309167, "body": "It happens. You can use an object next time with properties instead of having many parameters for a pipe. As it gets different to manage, especially if a parameter needs to be optional"}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 7547670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5282084568084f191eec526a734924ff?s=128&d=identicon&r=PG&f=1", "display_name": "Mr code.", "link": "https://stackoverflow.com/users/7547670/mr-code"}, "is_accepted": false, "score": 0, "last_activity_date": 1559106773, "creation_date": 1559106773, "answer_id": 56353485, "question_id": 56352118, "link": "https://stackoverflow.com/questions/56352118/custom-pipe-failing-conditionals-that-work-fine-in-a-method/56353485#56353485", "title": "Custom Pipe failing conditionals that work fine in a method", "body": "<p>The order of parameter or wrong,pass the completed before requestType as you are capturing in this order in class</p>\n\n<pre><code>{{ this.orderType| getOrderType: this.completed:this.order.requestType}} {{this.order.requestType}}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 11205399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4602361ea66c61fed754346dfd62546?s=128&d=identicon&r=PG&f=1", "display_name": "JacobTStaggs", "link": "https://stackoverflow.com/users/11205399/jacobtstaggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1559106773, "creation_date": 1559095252, "question_id": 56352118, "link": "https://stackoverflow.com/questions/56352118/custom-pipe-failing-conditionals-that-work-fine-in-a-method", "title": "Custom Pipe failing conditionals that work fine in a method", "body": "<p>I have a custom pipe that returns a string based on a few conditions but for some reason it is always returning the first even if the conditional is not met in the component.</p>\n\n<p>I have made a method with the identical if/else statements and it works find there</p>\n\n<pre><code>  transform(orderType: String, completed: Boolean, requestType: String): any{\n    if (completed &amp;&amp; orderType !== 'web') {\n      console.log('1');\n      return 'not web';\n    } else if (completed &amp;&amp; orderType === 'web')  {\n      console.log('2');\n      return 'web';\n    } else {\n      return 'N/A';\n    }\n  }\n</code></pre>\n\n<p>Below is where I am calling it: </p>\n\n<pre><code>     {{ this.orderType| getOrderType: this.order.requestType: this.completed}} {{this.order.requestType}}\n</code></pre>\n\n<p>I have the requestType and completed console.logging in the console and it is logging what it should be. </p>\n\n<p>So it is passing if even though it is equal to web and returning not web</p>\n"}, {"tags": ["typescript", "react-native"], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 2926779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nISxg.jpg?s=128&g=1", "display_name": "Madison Courto", "link": "https://stackoverflow.com/users/2926779/madison-courto"}, "edited": false, "score": 0, "creation_date": 1559097113, "post_id": 56352170, "comment_id": 99309341, "body": "This produces the same result except it doesn&#39;t render the text, simply blank entries. My understanding is that the as long as the array contains a data property it will render, take the following example that works correctly,  &quot;sections={[{data: [&#39;item1&#39;, &#39;item2&#39;]}]}&quot; ref: <a href=\"https://facebook.github.io/react-native/docs/sectionlist.html\" rel=\"nofollow noreferrer\">facebook.github.io/react-native/docs/sectionlist.html</a>"}], "tags": [], "owner": {"reputation": 1081, "user_id": 1473423, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IgJTk.png?s=128&g=1", "display_name": "bntzio", "link": "https://stackoverflow.com/users/1473423/bntzio"}, "is_accepted": false, "score": 0, "last_activity_date": 1559096023, "last_edit_date": 1559096023, "creation_date": 1559095712, "answer_id": 56352170, "question_id": 56352054, "link": "https://stackoverflow.com/questions/56352054/react-native-sectionlist-rendering-incorreclty/56352170#56352170", "title": "React Native SectionList Rendering Incorreclty", "body": "<p>You're not rendering the property you want.</p>\n\n<p>What you need is to access the <code>data</code> property of each <code>item</code>.</p>\n\n<p>So you need to change:</p>\n\n<pre><code>renderItem={({ item }) =&gt; &lt;Text style={styles.SectionListItemS} onPress={this.loadMatrixModal.bind(this, item)}&gt; {item} &lt;/Text&gt;}\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>renderItem={({ item }) =&gt; &lt;Text style={styles.SectionListItemS} onPress={this.loadMatrixModal.bind(this, item)}&gt; {item.data} &lt;/Text&gt;}\n</code></pre>\n\n<p>Notice how I changed <code>{ item }</code> to <code>{ item.data }</code>, that's because <code>item</code> holds the entire <code>item</code> object and you want to render the <code>data</code> property.</p>\n"}, {"tags": [], "owner": {"reputation": 755, "user_id": 2926779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nISxg.jpg?s=128&g=1", "display_name": "Madison Courto", "link": "https://stackoverflow.com/users/2926779/madison-courto"}, "is_accepted": true, "score": 0, "last_activity_date": 1559104968, "creation_date": 1559104968, "answer_id": 56353224, "question_id": 56352054, "link": "https://stackoverflow.com/questions/56352054/react-native-sectionlist-rendering-incorreclty/56353224#56353224", "title": "React Native SectionList Rendering Incorreclty", "body": "<p>So I had to build my object like so:</p>\n\n<pre><code>var data = {name: item, qty: unit};\nvar builtObject = {data: [data]};\n</code></pre>\n\n<p>Then I can push the object to an array and set the state of globalItems to the array.</p>\n"}], "owner": {"reputation": 755, "user_id": 2926779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nISxg.jpg?s=128&g=1", "display_name": "Madison Courto", "link": "https://stackoverflow.com/users/2926779/madison-courto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 56353224, "answer_count": 2, "score": 0, "last_activity_date": 1559104968, "creation_date": 1559094479, "last_edit_date": 1559097888, "question_id": 56352054, "link": "https://stackoverflow.com/questions/56352054/react-native-sectionlist-rendering-incorreclty", "title": "React Native SectionList Rendering Incorreclty", "body": "<p>I'm attempting to bind an array of objects to a SelectionList, it appears to be binding but its rendering each character as an individual list item rather than a single item.</p>\n\n<p>Here is my code:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Vd6C9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vd6C9.png\" alt=\"enter image description here\"></a></p>\n\n<p>r: GetRecipesResponse is a list of objects that I am then converting to an array, this is visible to the left of the above, the rendering issue is apparent on the right.</p>\n\n<pre><code>interface States {\n    response: GetRecipesResponse;\n    globalItems: any[];\n    isModalVisible: boolean;\n    selectedItem: any;\n    selectedItemUnit: any;\n}\n\nexport class MatrixScreen extends BaseNetworkScreen&lt;GetRecipesResponse, Props, States&gt; {\n\n    itemWidth: number = 100;\n    itemMargin: number = 3;\n    selectedItemsArray: any[];\n\n    constructor(props: Props) {\n        super(props);\n\n        this.selectedItemsArray = [];\n\n        this.state = {\n            isLoading: false,\n            response: null,\n            globalItems: this.selectedItemsArray,\n            isModalVisible: false,\n            selectedItem: null,\n            selectedItemUnit: null\n        };\n    }\n}\n\nrenderSelectLists(r: GetRecipesResponse): any {\n\n    var arr = [];\n    for (var key in r.data.recipe) {\n      arr.push(r.data.recipe[key].name);\n    }\n\n    let sections = []\n    for (const key in this.state.globalItems) {\n        if (this.state.globalItems.hasOwnProperty(key)) {\n            sections.push({\n                data: this.state.globalItems[key],\n                key: key,\n                unit: this.state.selectedItemUnit\n            })\n        }\n    }\n\n    return (\n        &lt;View style={{ flex: 1, flexDirection: 'row' }}&gt;\n            &lt;View style={styles.addContainer}&gt;\n\n                &lt;Text&gt;Press To Add Item&lt;/Text&gt;\n\n                &lt;SectionList\n\n                    sections={[{ data: arr }]}\n                    renderItem={({ item }) =&gt; &lt;Text style={styles.SectionListItemS} onPress={this.loadMatrixModal.bind(this, item)}&gt; {item} &lt;/Text&gt;}\n                    keyExtractor={(item, index: any) =&gt; index}\n                /&gt;\n            &lt;/View&gt;\n            &lt;View style={styles.removeContainer}&gt;\n                &lt;Text&gt;Press To Remove Item&lt;/Text&gt;\n                &lt;SectionList\n                    sections={sections}\n                    renderItem={({ item, index }) =&gt; &lt;Text style={styles.SectionListItemS} onPress={this.removeSectionListItem.bind(this, index)}&gt; {item} &lt;/Text&gt;}\n                    keyExtractor={(item, index: any) =&gt; item}\n                /&gt;\n            &lt;/View&gt;\n        &lt;/View&gt;\n    );\n}\n</code></pre>\n\n<p>Logging out \"sections\" to the console after it's been defined returns the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/00gMq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/00gMq.png\" alt=\"enter image description here\"></a></p>\n\n<p>Update:</p>\n\n<p>If I add <code>renderItem={({ item, index }) =&gt; &lt;Text style={styles.SectionListItemS} onPress={this.removeSectionListItem.bind(this, index)}&gt; {console.log(item)} {item} &lt;/Text&gt;}</code></p>\n\n<p>Interestingly it outputs the following to the console, </p>\n\n<p><a href=\"https://i.stack.imgur.com/cLcVt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cLcVt.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["typescript", "interface", "callback"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11568834, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9acrHBCFwY0/AAAAAAAAAAI/AAAAAAAAOCs/mFUcmP41on8/photo.jpg?sz=128", "display_name": "Oscar Felipe Puentes Sanguino", "link": "https://stackoverflow.com/users/11568834/oscar-felipe-puentes-sanguino"}, "is_accepted": false, "score": 0, "last_activity_date": 1559092901, "creation_date": 1559092901, "answer_id": 56351899, "question_id": 56351715, "link": "https://stackoverflow.com/questions/56351715/typescript-how-to-use-an-interface-in-a-callback-function/56351899#56351899", "title": "Typescript - How to use an interface in a callback function", "body": "<p>reading your problem, you can use the solution you wrote above, you can do something similar to:</p>\n\n<pre><code>blobService.doesBlobExist(containerName, blobName, (error, result, response) =&gt; {\n        if(error !== null){\n           // Do something\n           return;\n        } \n        // here you can work with your response data\n});\n</code></pre>\n\n<p>If you want to avoid the error you can omit the if loop, and work direcly with your response, but you have to insert all the posible options in the response.</p>\n\n<blockquote>\n  <p>callbackResult.response as that is in the interface however callbackResult keeps being returned as null. On looking into it, its being set as the error: Error from the interface.</p>\n</blockquote>\n\n<p>As you said, you are getting a null because the function are returning no errors.</p>\n"}], "owner": {"reputation": 5764, "user_id": 3033691, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d3286fd40aade0e7bf90d4d0eda0f29?s=128&d=identicon&r=PG&f=1", "display_name": "userMod2", "link": "https://stackoverflow.com/users/3033691/usermod2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559092901, "creation_date": 1559090914, "question_id": 56351715, "link": "https://stackoverflow.com/questions/56351715/typescript-how-to-use-an-interface-in-a-callback-function", "title": "Typescript - How to use an interface in a callback function", "body": "<p>Recently started using Typescript and something I'm unsure of.</p>\n\n<p>I'm using an npm package <code>azure-storage</code> and specifically calling a method <code>doesBlobExist</code>:</p>\n\n<pre><code>blobService.doesBlobExist(containerName, blobName, (callbackResult: ErrorOrResult&lt;BlobService.BlobResult&gt;) =&gt; {\n        //Want callbackResult.response here\n});\n</code></pre>\n\n<p>That <code>doesBlobExist</code> (function coming from the npm package) looks like this:</p>\n\n<pre><code>doesBlobExist(container: string, blob: string, callback: ErrorOrResult&lt;BlobService.BlobResult&gt;): void;\n</code></pre>\n\n<p>And the type ErrorOrResult is an interface that has this:</p>\n\n<pre><code>interface ErrorOrResult&lt;TResult&gt; {\n    (error: Error, result: TResult, response: ServiceResponse): void\n}\n</code></pre>\n\n<p>What I'm unsure of is where I call the function, I was hoping I can use that interface and do:</p>\n\n<p><code>callbackResult.response</code> as that is in the interface however <code>callbackResult</code> keeps being returned as <code>null</code>.\nOn looking into it, its being set as the <code>error: Error</code> from the interface.</p>\n\n<p>So is it actually possible to do what I want above, or do I have to use that function like:</p>\n\n<pre><code>blobService.doesBlobExist(containerName, blobName, (error, result, response) =&gt; {\n        //i.e. specify the 3 items directly in the interface\n});\n</code></pre>\n"}, {"tags": ["typescript"], "comments": [{"owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "edited": false, "score": 0, "creation_date": 1559089804, "post_id": 56351586, "comment_id": 99308096, "body": "Interesting find. I added a return type to the definition of <code>subTValue</code>, turned on all the checks, and still no error. Need to look into this! Probably there is something in the docs that define the behavior perfectly, but it is, I have to say, pretty interesting...."}, {"owner": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "reply_to_user": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "edited": false, "score": 0, "creation_date": 1559089938, "post_id": 56351586, "comment_id": 99308122, "body": "@jcalz, trying to find a solution, I saw you answered many typescript-related questions, even some close to mine, but not exactly the same. I hope you are reading this... :)"}, {"owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "edited": false, "score": 1, "creation_date": 1559091630, "post_id": 56351586, "comment_id": 99308364, "body": "Looks similar to <a href=\"https://stackoverflow.com/q/54775790/831878\">this question</a>. Is that it?"}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "edited": false, "score": 1, "creation_date": 1559094092, "post_id": 56351586, "comment_id": 99308799, "body": "@awho \ud83d\udc40 I&#39;m looking \ud83d\udc40"}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "edited": false, "score": 0, "creation_date": 1561717795, "post_id": 56351996, "comment_id": 100164612, "body": "If for some reason the object you want to check has type <code>any</code>, no error will be raised (<code>const superBad: SuperT = asExactlySuperT(subTValue() as any); &#47;&#47; no error</code>). Wondering if <code>asExactlySuperT</code> could deal with <code>any</code> objects, too, or if it can raise an error like &quot;don&#39;t send me a param of type <code>any</code> as I can&#39;t deal with it&quot;."}, {"owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "reply_to_user": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "edited": false, "score": 0, "creation_date": 1561729968, "post_id": 56351996, "comment_id": 100170486, "body": "<code>any</code> is a deliberate escape hatch from the type system. It&#39;s seen as both a supertype and a subtype of every other type (that&#39;s unsound but useful) so it will tend to allow things no matter what.  That&#39;s the point of it.  It is <a href=\"https://stackoverflow.com/a/49928360/2887218\">possible to detect <code>any</code></a> and do something different with <code>any</code> than the default behavior, but be careful doing that... the expectation of <code>any</code> is that it will &quot;just make things work&quot;, and explicitly failing on <code>any</code> might surprise people."}], "tags": [], "owner": {"reputation": 119938, "user_id": 2887218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WL57j.png?s=128&g=1", "display_name": "jcalz", "link": "https://stackoverflow.com/users/2887218/jcalz"}, "is_accepted": true, "score": 2, "last_activity_date": 1559093904, "creation_date": 1559093904, "answer_id": 56351996, "question_id": 56351586, "link": "https://stackoverflow.com/questions/56351586/how-to-catch-at-compile-time-an-assignment-of-a-subtype-to-a-supertype/56351996#56351996", "title": "How to catch at compile-time an assignment of a subtype to a supertype?", "body": "<p>You want <a href=\"https://github.com/Microsoft/TypeScript/issues/12936\" rel=\"nofollow noreferrer\">exact types</a> which aren't directly supported. You can do <a href=\"https://github.com/Microsoft/TypeScript/issues/12936#issuecomment-368244671\" rel=\"nofollow noreferrer\">various tricks with generics and conditional types</a>  to get closer.  Here's one way to do it indirectly:</p>\n\n<pre><code>interface SuperT {\n    field: string\n}\n\ntype Exactly&lt;T, U extends T&gt; = T &amp; Record&lt;Exclude&lt;keyof U, keyof T&gt;, never&gt;;\nconst asExactlySuperT = &lt;U extends Exactly&lt;SuperT, U&gt;&gt;(superT: U) =&gt; superT;\n\nconst superOkay: SuperT = asExactlySuperT({ field: \"a\" }); // okay\n\nfunction subTValue() { return { field: 'value', extra: 1 } }\nconst superBad: SuperT = asExactlySuperT(subTValue()); // error! \n// types of property \"extra\" are incompatible\n</code></pre>\n\n<p><a href=\"https://typescript-play.js.org/#code/JYOwLgpgTgZghgYwgAgMoFcAO0AqyDeAUMicjMBADYAmAXMgM5hSgDmhAvoYWAJ7bIAogA9EYSrwA8OADTIAqsgjDIIag2Q4AfMgC8m5ADJkAJQgIA9lGqSRCSumoRJAawi8LMBXLcev2uRAIADdoLQBuQksQJmQ4BhExCQxsKDx9SUVlVXUhUQRxKRTcOXktLQAKBixcenkASj0datScSKiLGLBGGqgAeRc4XnpitL04hPzC0ZwK-DIKGnoAIjhl5A568OQAeh3kC0Hebhh0EALgTp6AIxwANTgHCArG+agIMHQoEAIFqjpkAByYKPdAQQFybJQOD0ACMGw2HS6PVSACE4ACZuN4okCslerNqrcHk8XltdvtoFArABCZCEPbIPjYDSeZCYampPjIZZQtZxd7IUCWAC2mDgYGA10oECAA\" rel=\"nofollow noreferrer\">Link to code</a></p>\n\n<p>The idea there is that <code>Exactly&lt;T, U&gt;</code> will take a type <code>T</code> and a candidate type <code>U</code> which hopefully matches <code>T</code> exactly with no extra properties.  If it does, then <code>Exactly&lt;T, U&gt;</code> will equal <code>U</code>.  If it does not, then <code>Exactly&lt;T, U&gt;</code> will set the property types of any extra properties to <code>never</code>.  Since <code>asExactlySuperT&lt;U&gt;()</code> requires that <code>U extends Exactly&lt;SuperT, U&gt;</code>, the only way that can happen is if there are no extra properties in <code>U</code>.  </p>\n\n<p>Hope that helps.  Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "edited": false, "score": 1, "creation_date": 1559095378, "post_id": 56352105, "comment_id": 99309007, "body": "@jcalz, just to be clear, it was a joke, I was sincerely looking for a solution, I wasn&#39;t aware of that answer when I posted my q :) Thanks"}], "tags": [], "owner": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "is_accepted": false, "score": 0, "last_activity_date": 1559095115, "creation_date": 1559095115, "answer_id": 56352105, "question_id": 56351586, "link": "https://stackoverflow.com/questions/56351586/how-to-catch-at-compile-time-an-assignment-of-a-subtype-to-a-supertype/56352105#56352105", "title": "How to catch at compile-time an assignment of a subtype to a supertype?", "body": "<p>As <a href=\"https://stackoverflow.com/users/831878/ray-toal\">Ray Toal</a> found out, an answer for a very similar issue can be found <a href=\"https://stackoverflow.com/a/54775885/5961339\">here</a>. (And I knew this in the first place, I just wanted to check <a href=\"https://stackoverflow.com/users/2887218/jcalz\">jcalz</a>'s reaction time. Pretty impressive, @jcalz!)</p>\n\n<p>Based on that approach, my code would look like:</p>\n\n<p>(<a href=\"https://www.typescriptlang.org/play/#src=type%20StrictPropertyCheck%3CT%2C%20TExpected%2C%20TError%3E%20%3D%20Exclude%3Ckeyof%20T%2C%20keyof%20TExpected%3E%20extends%20never%20%3F%20%7B%7D%20%3A%20TError%0D%0A%0D%0Ainterface%20SuperT%20%7B%0D%0A%20%20%20%20field%3A%20string%0D%0A%7D%0D%0A%0D%0Afunction%20doIdentity%3CT%20extends%20SuperT%3E(a%3A%20T%20%26%20StrictPropertyCheck%3CT%2C%20SuperT%2C%20%22Only%20allowed%20properties%20of%20SuperT%22%3E)%20%7B%0D%0A%20%20%20%20return%20a%0D%0A%7D%0D%0A%0D%0A%0D%0Afunction%20subTValue()%20%7B%20return%20%7B%20field%3A%20&#39;value&#39;%2C%20extra%3A%201%20%7D%20%7D%0D%0A%0D%0Aconst%20super3%3A%20SuperT%20%3D%20doIdentity(subTValue())%20%2F%2F%20we%20do%20get%20a%20compile-time%20error!%0D%0A\" rel=\"nofollow noreferrer\">TypeScript Playground</a>)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>type StrictPropertyCheck&lt;T, TExpected, TError&gt; = Exclude&lt;keyof T, keyof TExpected&gt; extends never ? {} : TError\n\ninterface SuperT {\n    field: string\n}\n\nfunction doIdentity&lt;T extends SuperT&gt;(a: T &amp; StrictPropertyCheck&lt;T, SuperT, \"Only allowed properties of SuperT\"&gt;) {\n    return a\n}\n\n\nfunction subTValue() { return { field: 'value', extra: 1 } }\n\nconst super3: SuperT = doIdentity(subTValue()) // we do get a compile-time error!\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 5961339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJWXu.png?s=128&g=1", "display_name": "awho", "link": "https://stackoverflow.com/users/5961339/awho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 56351996, "answer_count": 2, "score": 1, "last_activity_date": 1559095115, "creation_date": 1559089257, "question_id": 56351586, "link": "https://stackoverflow.com/questions/56351586/how-to-catch-at-compile-time-an-assignment-of-a-subtype-to-a-supertype", "title": "How to catch at compile-time an assignment of a subtype to a supertype?", "body": "<p>I <a href=\"https://www.typescriptlang.org/docs/handbook/type-compatibility.html\" rel=\"nofollow noreferrer\">learnt</a> that the</p>\n\n<blockquote>\n  <p>rule for TypeScript\u2019s structural type system is that <code>x</code> is compatible with <code>y</code> if <code>y</code> has at least the same members as <code>x</code></p>\n</blockquote>\n\n<p>This allows an assignment of a variable of a subtype to a variable of a supertype. Is there a way to get a compile-time error regarding that assignment?</p>\n\n<p>(<a href=\"https://www.typescriptlang.org/play/#src=interface%20SuperT%20%7B%0D%0A%20%20%20%20field%3A%20string%0D%0A%7D%0D%0A%0D%0A%2F%2F%20an%20explicitly%20declared%20subtype%20object%20for%20a%20supertype%20variable%20generates%20an%20error%0D%0Aconst%20super1%3A%20SuperT%20%3D%20%7Bfield%3A%20&#39;value&#39;%2C%20extra%3A%201%7D%20%2F%2F%20compile-time%20error%3A%20Type%20&#39;%7B%20field%3A%20string%3B%20extra%3A%20number%3B%20%7D&#39;%20is%20not%20assignable%20to%20type%20&#39;SuperT&#39;%0D%0A%0D%0Afunction%20subTValue()%20%7B%20return%20%7Bfield%3A%20&#39;value&#39;%2C%20extra%3A%201%7D%20%7D%0D%0Aconst%20super2%3A%20SuperT%20%3D%20subTValue()%20%2F%2F%20no%20compile-time%20error%2C%20BUT%20HOW%20TO%20get%20a%20compile-time%20error%20here%3F%20%0D%0A\" rel=\"nofollow noreferrer\">TypeScript Playground</a>)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>interface SuperT {\n    field: string\n}\n\n// an explicitly declared subtype object for a supertype variable generates an error\nconst super1: SuperT = {field: 'value', extra: 1} // compile-time error: Type '{ field: string; extra: number; }' is not assignable to type 'SuperT'\n\nfunction subTValue() { return {field: 'value', extra: 1} }\nconst super2: SuperT = subTValue() // no compile-time error, BUT HOW TO get a compile-time error here? \n</code></pre>\n"}, {"tags": ["typescript", "reactstrap"], "answers": [{"tags": [], "owner": {"reputation": 2635, "user_id": 4278198, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5338cf26b8a10cc5cc0fbd92bdc03885?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Kondaurov", "link": "https://stackoverflow.com/users/4278198/alexander-kondaurov"}, "is_accepted": true, "score": 0, "last_activity_date": 1559086399, "creation_date": 1559086399, "answer_id": 56351270, "question_id": 56351178, "link": "https://stackoverflow.com/questions/56351178/reactstrap-with-typescript-define-ambient-module/56351270#56351270", "title": "reactstrap with typescript, define ambient module", "body": "<p>I've created file <code>_reactstrap.d.ts</code> next to <code>global.d.ts</code> with this content:</p>\n\n<pre><code>export * from \"reactstrap\"\n\nexport as namespace Reactstrap;\n</code></pre>\n\n<p>And modified <code>global.d.ts</code> as follows:</p>\n\n<pre><code>import * as react from \"react\"\nimport * as react_dom from \"react-dom\"\nimport * as reactstrap from \"./_reactstrap\"\n\ndeclare global {\n    type React = typeof react\n    type ReactDOM = typeof react_dom\n    type Reactstrap = typeof reactstrap\n}\n</code></pre>\n"}], "owner": {"reputation": 2635, "user_id": 4278198, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5338cf26b8a10cc5cc0fbd92bdc03885?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Kondaurov", "link": "https://stackoverflow.com/users/4278198/alexander-kondaurov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 56351270, "answer_count": 1, "score": 0, "last_activity_date": 1559086399, "creation_date": 1559085394, "question_id": 56351178, "link": "https://stackoverflow.com/questions/56351178/reactstrap-with-typescript-define-ambient-module", "title": "reactstrap with typescript, define ambient module", "body": "<p>I want to use <code>reactstrap</code> with typescript.</p>\n\n<p>There are typings for these typings: <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/reactstrap/index.d.ts\" rel=\"nofollow noreferrer\">https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/reactstrap/index.d.ts</a></p>\n\n<p>Reactstrap is availabe on page as <code>Reactstrap</code> global variable. I thought adding it in ambient module would be as simple as adding <code>react</code> and <code>react dom</code></p>\n\n<p>Here's my <code>global.d.ts</code></p>\n\n<pre><code>import * as react from \"react\"\nimport * as react_dom from \"react-dom\"\nimport * as reactstrap from \"reactstrap\"\n\ndeclare global {\n    type React = typeof react\n    type ReactDOM = typeof react_dom\n    type Reactstrap = typeof reactstrap\n}\n</code></pre>\n\n<p>I can use <code>React.Component</code> and jsx without importing, it's available globally. But i can't use <code>Reactstrap.Alert</code>, tsc says that<code>Reactstrap.Alert</code> is a type but used like a value.</p>\n\n<p>I can manually add this string <code>export as namespace Reactstrap</code> in a d.ts file, but it looks like a hack, and this changes are not stored in my git repo. Is it possible to export all classes from one d.ts and put it into namespace of another?</p>\n"}, {"tags": ["node.js", "typescript", "rxjs", "observable"], "comments": [{"owner": {"reputation": 3306, "user_id": 2888753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4f46021e22a612af73b4b980bf91c6?s=128&d=identicon&r=PG", "display_name": "miqh", "link": "https://stackoverflow.com/users/2888753/miqh"}, "edited": false, "score": 0, "creation_date": 1559104687, "post_id": 56351057, "comment_id": 99310750, "body": "Just as an aside, there&#39;s no need to nest your innermost <code>switchMap</code>. If you structure the operator as: <code>switchMap(user =&gt; this._repo.findBy(...))</code>, you can slot the inner <code>switchMap</code> right after at the same level."}, {"owner": {"reputation": 383, "user_id": 3353167, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e13038763c7f19ef1041d4fe0c749576?s=128&d=identicon&r=PG&f=1", "display_name": "user3353167", "link": "https://stackoverflow.com/users/3353167/user3353167"}, "reply_to_user": {"reputation": 3306, "user_id": 2888753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d4f46021e22a612af73b4b980bf91c6?s=128&d=identicon&r=PG", "display_name": "miqh", "link": "https://stackoverflow.com/users/2888753/miqh"}, "edited": false, "score": 0, "creation_date": 1559169825, "post_id": 56351057, "comment_id": 99341427, "body": "@miqh I originally had that, but if the return of the findBy is null, then I won&#39;t be able to create an user, since the user variable would be out of scope"}], "answers": [{"tags": [], "owner": {"reputation": 757, "user_id": 5648360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/963a7a0d4dbaf3c56c4c8c0999a0a0c8?s=128&d=identicon&r=PG&f=1", "display_name": "Nugu", "link": "https://stackoverflow.com/users/5648360/nugu"}, "is_accepted": true, "score": 0, "last_activity_date": 1559104193, "creation_date": 1559104193, "answer_id": 56353131, "question_id": 56351057, "link": "https://stackoverflow.com/questions/56351057/return-final-observable-from-nested-block/56353131#56353131", "title": "Return final observable from nested block", "body": "<p>Try the below code snippet.</p>\n\n<pre><code>return this.facebook.getFacebookUserInfos(req.token).pipe(\n      switchMap(user =&gt; {\n            return this._repo.findBy({email: user.email}).pipe(\n              switchMap(foundUser =&gt; {\n                // assume foundUser is always null \n                if (!foundUser) {\n                  const fromFacebook = this.createUserModel(user, event.queryStringParameters);\n                 return this._repo.save(fromFacebook);\n                } else {                \n                 return of(foundUser);\n                }\n              }));\n          }),\n          concatMap(user =&gt; {\n            return this.getAuthToken(user)\n          }),\n          map(response =&gt; Response.ok(response.body, response.headers)),\n          catchError((err) =&gt; of(Response.errorResponse(err)))\n        );\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 3353167, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/e13038763c7f19ef1041d4fe0c749576?s=128&d=identicon&r=PG&f=1", "display_name": "user3353167", "link": "https://stackoverflow.com/users/3353167/user3353167"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 56353131, "answer_count": 1, "score": 1, "last_activity_date": 1559104193, "creation_date": 1559084404, "last_edit_date": 1559085055, "question_id": 56351057, "link": "https://stackoverflow.com/questions/56351057/return-final-observable-from-nested-block", "title": "Return final observable from nested block", "body": "<p>Hi guys I have the following code:</p>\n\n<pre><code>return this.facebook.getFacebookUserInfos(req.token).pipe(\n      switchMap(user =&gt; {\n            return this._repo.findBy({email: user.email}).pipe(\n              switchMap(foundUser =&gt; {\n                // assume foundUser is always null \n                if (!foundUser) {\n                  const fromFacebook = this.createUserModel(user, event.queryStringParameters);\n                 return this._repo.save(fromFacebook);\n                }\n                return of(foundUser);\n              }));\n          }),\n          switchMap(user =&gt; {\n            return this.getAuthToken(user)\n          }),\n          map(response =&gt; Response.ok(response.body, response.headers)),\n          catchError((err) =&gt; of(Response.errorResponse(err)))\n        );\n</code></pre>\n\n<p>I'm stuck as it calls this._repo.save(fromFacebook) and doesn't wait for the observable to finish and goes to the next switch map with another observable. How can I force the block to wait for the result of this._repo.save(fromFacebook) before passing to the next one? the save method returns an observable as well. Thanks in advance for your help. \nCheers</p>\n"}, {"tags": ["typescript", "enums"], "comments": [{"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "edited": false, "score": 2, "creation_date": 1559083802, "post_id": 56350979, "comment_id": 99306918, "body": "But string literal types will already provide intelisense. If you type &quot;&quot; in a position where a string literal is expected you will get intelisense as to possible values..."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 4830448, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9fcf044004848ae1a4f2d1ef5c5194a0?s=128&d=identicon&r=PG&f=1", "display_name": "mxiong", "link": "https://stackoverflow.com/users/4830448/mxiong"}, "edited": false, "score": 0, "creation_date": 1603354802, "post_id": 56351097, "comment_id": 114012415, "body": "Union type is nice and all, but I&#39;m looking into making an enum for the main purpose of maintainability in the event that a string needs to be renamed. I might use the string literal &quot;apple&quot; in multiple places in the codebase, but using an enum gives me an easy way to rename things in a way that a global string find and replace would fail."}, {"owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "reply_to_user": {"reputation": 221, "user_id": 4830448, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9fcf044004848ae1a4f2d1ef5c5194a0?s=128&d=identicon&r=PG&f=1", "display_name": "mxiong", "link": "https://stackoverflow.com/users/4830448/mxiong"}, "edited": false, "score": 0, "creation_date": 1603365667, "post_id": 56351097, "comment_id": 114017497, "body": "@mxiong enums have their advantages for sure. While renaming might not work,  you should get errors everywhere the old version of the string is used"}], "tags": [], "owner": {"reputation": 154770, "user_id": 125734, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Qy7qV.png?s=128&g=1", "display_name": "Titian Cernicova-Dragomir", "link": "https://stackoverflow.com/users/125734/titian-cernicova-dragomir"}, "is_accepted": true, "score": 2, "last_activity_date": 1559084711, "creation_date": 1559084711, "answer_id": 56351097, "question_id": 56350979, "link": "https://stackoverflow.com/questions/56350979/create-a-typescript-string-enum-from-a-union-type/56351097#56351097", "title": "Create a TypeScript (string) enum from a union type?", "body": "<p><strong>Like I pointed out in the comments string literal types already offer good intelisense support, so I personally would just use those and not bother creating anything else, the developer experience is already great.</strong></p>\n\n<p>The code below is a solution in search of a problem but we can do something close to what you want.</p>\n\n<p>You can't create an enum, but you can create an object that has all the properties of the union and each property has the same value as the key, using a mapped type. You will need to maintain these objects manually, but typescript will issue a warning if ever they are out of sync so maintaining them should not be an issue. </p>\n\n<pre><code>type SomeUnion = 'Foo' | 'Bar' | 'Baz';\n\nfunction createEnumObject&lt;T extends string&gt;(o: { [P in T]: P }) {\n    return o;\n}\n\nconst SomeUnion = createEnumObject&lt;SomeUnion&gt;({\n    Foo: \"Foo\",\n    Bar: \"Bar\",\n    Baz: \"Baz\"\n})\n\nlet o: SomeUnion = SomeUnion.Bar;\n</code></pre>\n\n<p>Converting a union (ie a type) to an object (ie a value) without extra code is in principle not possible, types are erased at compile time so can't be relied upon for anything at run-time and typescript has a strict policy against type directed emit.</p>\n"}], "owner": {"reputation": 2225, "user_id": 114, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f9d3623d91c3802e62da82011ca036f6?s=128&d=identicon&r=PG", "display_name": "Craig Smitham", "link": "https://stackoverflow.com/users/114/craig-smitham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 56351097, "answer_count": 1, "score": 1, "last_activity_date": 1559084711, "creation_date": 1559083671, "question_id": 56350979, "link": "https://stackoverflow.com/questions/56350979/create-a-typescript-string-enum-from-a-union-type", "title": "Create a TypeScript (string) enum from a union type?", "body": "<p>If I have a TypeScript union like so:</p>\n\n<pre><code>type SomeUnion = 'Foo' | 'Bar' | 'Baz';\n</code></pre>\n\n<p>Is there a way I can convert this into a string-based enum? Like the the following:</p>\n\n<pre><code>enum SomeUnionBasedEnum {\n  Foo = 'Foo',\n  Bar = 'Bar',\n  Baz = 'Baz'\n}\n</code></pre>\n\n<p>I am trying to model an enum that represents the permissions in our system, but those permissions are in some cases automatically generated union types. I want a way to combine them into a single enum because enums provide a better developer experience by limiting the intellisense to the permissible values. For example <code>AppPermisionEnum.&lt;available enum values&gt;</code>. I'd also be open to ways to combine enums into a single enum, but I don't think that's possible. My end goal is to have an enum comprised of values from a couple different sources.</p>\n"}]