[{"tags": ["shell", "perl", "unix", "pipe"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1577858737, "post_id": 59549099, "comment_id": 105269576, "body": "Re &quot;<i>but, alas, not for <code>qx</code></i>&quot;, See <code>capturex</code> in core module IPC::System::Simple"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1578514872, "post_id": 59549099, "comment_id": 105467824, "body": "IPC::System::Simple isn&#39;t core, but the docs for <a href=\"https://metacpan.org/pod/IPC::ReadpipeX\" rel=\"nofollow noreferrer\">IPC::ReadpipeX</a> shows a core method to emulate qx/readpipe while bypassing the shell (spoiler, it&#39;s pretty similar to this answer)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 9, "last_activity_date": 1577834530, "creation_date": 1577834530, "answer_id": 59549099, "question_id": 59549063, "link": "https://stackoverflow.com/questions/59549063/does-opening-a-pipeline-in-perl-involve-a-shell/59549099#59549099", "title": "Does opening a pipeline in Perl involve a shell?", "body": "<p>From <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"noreferrer\">open</a>, following code examples</p>\n\n<blockquote>\n  <p>The last two examples in each block show the pipe as \"list form\", which is not yet supported on all platforms. A good rule of thumb is that if your platform has a real fork (in other words, if your platform is Unix, including Linux and MacOS X), you can use the list form. <strong>You would want to use the list form of the pipe so you can pass literal arguments to the command without risk of the shell interpreting any shell metacharacters in them.</strong>  However, this also bars you from opening pipes to commands that intentionally contain shell metacharacters, [...]</p>\n</blockquote>\n\n<p>(my emphasis)</p>\n\n<p>The last example previous to this is </p>\n\n<blockquote>\n<pre><code>open(my $fh, \"-|\", \"cat\", \"-n\", $file);\n</code></pre>\n</blockquote>\n\n<p>which is incidentally almost exactly your example from the question.  </p>\n\n<p>So go with the \"list form\" and there's no shell.  This goes for <a href=\"https://perldoc.perl.org/functions/system.html\" rel=\"noreferrer\">system</a> as well (but, alas, not for <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"noreferrer\">qx</a>)</p>\n"}], "owner": {"reputation": 153, "user_id": 11667633, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QLez.jpg?s=128&g=1", "display_name": "q.undertow", "link": "https://stackoverflow.com/users/11667633/q-undertow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 59549099, "answer_count": 1, "score": 5, "last_activity_date": 1577834530, "creation_date": 1577833939, "question_id": 59549063, "link": "https://stackoverflow.com/questions/59549063/does-opening-a-pipeline-in-perl-involve-a-shell", "title": "Does opening a pipeline in Perl involve a shell?", "body": "<p>If I do this in a Perl script on a Unix/Linux system:</p>\n\n<pre><code>open(my $fh, 'cat|');\n</code></pre>\n\n<p>is a shell involved?  And if not, what about this:</p>\n\n<pre><code>open(my $fh, 'cat -v|');\n</code></pre>\n\n<p>I would like to avoid a shell, if possible, and I even know how to do it:</p>\n\n<pre><code>open(my $fh, '-|') || exec('cat', '-v');\n</code></pre>\n\n<p>but brevity is also valuable.</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "is_accepted": true, "score": 3, "last_activity_date": 1577904985, "creation_date": 1577904985, "answer_id": 59555238, "question_id": 59546842, "link": "https://stackoverflow.com/questions/59546842/set-inactivity-timeout-perl-mojo-subprocess/59555238#59555238", "title": "Set Inactivity Timeout Perl (Mojo) Subprocess", "body": "<p>Here is a minimal example:</p>\n\n<pre><code>use Mojolicious::Lite;\n\nget '/',\n    sub {\n        my $self = shift;\n        say Mojo::IOLoop-&gt;stream($self-&gt;tx-&gt;connection)-&gt;timeout;\n        $self-&gt;inactivity_timeout(60);\n        say Mojo::IOLoop-&gt;stream($self-&gt;tx-&gt;connection)-&gt;timeout;\n\n        my $fc = Mojo::IOLoop::Subprocess-&gt;new;\n        $fc-&gt;run(\n                 sub {\n                     my @args = @_; \n                     sleep(20);\n                      return 'Hello Mojo!';\n                 },\n                 sub {\n                     my ($subprocess, $err, $result) = @_;\n                     say $result;\n                     $self-&gt;stash(result =&gt; $result);\n                     $self-&gt;render(template =&gt; 'foo');\n                 }\n     );\n    };\n\napp-&gt;start;\n\n__DATA__\n\n@@ foo.html.ep\n    %== $result\n</code></pre>\n\n<p>The second callback passed to <code>run()</code> does the processing when the subprocess has finished. \nSee <a href=\"https://mojolicious.org/perldoc/Mojo/IOLoop/Subprocess\" rel=\"nofollow noreferrer\">Mojo::IOLoop::Subprocess</a> for details.</p>\n"}], "owner": {"reputation": 1344, "user_id": 8521346, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5adedecc5904449d9b448df60d69f5fc?s=128&d=identicon&r=PG&f=1", "display_name": "Bigbob556677", "link": "https://stackoverflow.com/users/8521346/bigbob556677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 1, "accepted_answer_id": 59555238, "answer_count": 1, "score": 2, "last_activity_date": 1583955042, "creation_date": 1577812227, "last_edit_date": 1583955042, "question_id": 59546842, "link": "https://stackoverflow.com/questions/59546842/set-inactivity-timeout-perl-mojo-subprocess", "title": "Set Inactivity Timeout Perl (Mojo) Subprocess", "body": "<p>I have a Perl Mojo server running and when posting to a certain url, there is a script that creates a sub process for a very long process (around a minute's time). </p>\n\n<p>This process runs for about 30 seconds then crashes, and here are no exceptions being thrown or any logs being generated.</p>\n\n<p>My natural assumption is that this has something to do with a connection timeout, so I increased the server's timeout. This being said, I'm pretty confident that this has nothing to do with the server process but rather the perl script itself timing out.</p>\n\n<p>I came across the docs on the subprocess page that says:</p>\n\n<blockquote>\n  <p>Note that it does not increase the timeout of the connection, so if your forked process is going to take a very long time, you might need to increase that using \"inactivity_timeout\" in Mojolicious::Plugin::DefaultHelpers.</p>\n</blockquote>\n\n<p>The DefaultHelpers docs say:</p>\n\n<blockquote>\n  <p>inactivity_timeout</p>\n  \n  <p>$c = $c->inactivity_timeout(3600);</p>\n  \n  <p>Use \"stream\" in Mojo::IOLoop to find the current connection and increase timeout if possible.</p>\n  \n  <h1>Longer version</h1>\n  \n  <p>Mojo::IOLoop->stream($c->tx->connection)->timeout(3600);</p>\n</blockquote>\n\n<p>but I'm not eactly sure how (or <em>where</em>) to define the inactivity timeout, or what excatly the $c variable is in the docs.</p>\n\n<p>My Code:</p>\n\n<pre><code>sub long_process{\n    my ($self) = @_;\n    my $fc = Mojo::IOLoop::Subprocess-&gt;new;\n    $fc-&gt;run(\n       sub { \n          my @args = @_; \n          sleep(60);\n        },[], \n     );\n}\n</code></pre>\n\n<p>links:</p>\n\n<p><a href=\"https://metacpan.org/pod/Mojolicious::Plugin::DefaultHelpers#inactivity_timeout\" rel=\"nofollow noreferrer\">inactivity_timeout</a></p>\n\n<p><a href=\"https://metacpan.org/pod/Mojolicious::Plugin::Subprocess#DESCRIPTION\" rel=\"nofollow noreferrer\">subprocess</a></p>\n"}, {"tags": ["regex", "shell", "perl", "sh"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 4, "creation_date": 1577800390, "post_id": 59544926, "comment_id": 105258843, "body": "try <code>perl -wE &#39;print &quot;you@example.com\\n&quot;;&#39;</code>"}, {"owner": {"reputation": 10559, "user_id": 2182928, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/qWqPu.jpg?s=128&g=1", "display_name": "Rudi Kershaw", "link": "https://stackoverflow.com/users/2182928/rudi-kershaw"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1577800486, "post_id": 59544926, "comment_id": 105258867, "body": "@Mat Ahhh... thank you so much. If you add the details into an answer I am happy to accept that. That gives me everything I need. Sometimes all you need is a little nudge."}], "answers": [{"comments": [{"owner": {"reputation": 10559, "user_id": 2182928, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/qWqPu.jpg?s=128&g=1", "display_name": "Rudi Kershaw", "link": "https://stackoverflow.com/users/2182928/rudi-kershaw"}, "edited": false, "score": 0, "creation_date": 1577802871, "post_id": 59545123, "comment_id": 105259594, "body": "I&#39;m afraid this is being used in a configurable git hook, and people will be able to specify the regex they want to validate their author emails. I just need the basic regex for a sensible default. But you are right, generally better than rolling your own."}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": false, "score": 1, "last_activity_date": 1577801277, "creation_date": 1577801277, "answer_id": 59545123, "question_id": 59544926, "link": "https://stackoverflow.com/questions/59544926/perl-shell-command-cannot-match-symbol/59545123#59545123", "title": "Perl shell command cannot match @ symbol", "body": "<p>Why using a horse cart wheel when Goodyears are available in the <a href=\"https://metacpan.org/pod/Email::Valid\" rel=\"nofollow noreferrer\">corner shop</a>?</p>\n\n<pre><code>use Email::Valid;\nmy $address = Email::Valid-&gt;address('you@example.com');\nexit $address ? 1 : 0;\n</code></pre>\n\n<p>Your original problem though, was a quoting issue. But you know that by now, I reckon from the comments.</p>\n"}, {"tags": [], "owner": {"reputation": 10559, "user_id": 2182928, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/qWqPu.jpg?s=128&g=1", "display_name": "Rudi Kershaw", "link": "https://stackoverflow.com/users/2182928/rudi-kershaw"}, "is_accepted": true, "score": 0, "last_activity_date": 1598221304, "last_edit_date": 1598221304, "creation_date": 1577907299, "answer_id": 59555507, "question_id": 59544926, "link": "https://stackoverflow.com/questions/59544926/perl-shell-command-cannot-match-symbol/59555507#59555507", "title": "Perl shell command cannot match @ symbol", "body": "<p>What is wrong here is evident after running a command suggested by @Mat in the comments below the question.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ perl -wE 'print &quot;you@example.com\\n&quot;;'\nPossible unintended interpolation of @example in string at -e line 1.\nName &quot;main::example&quot; used only once: possible typo at -e line 1.\nyou.com\n</code></pre>\n<p>The string being matched is using double quotes, causing it to be interpolated. The interpolation converts the <code>@example</code> into an array reference but strips it out because it is undefined.</p>\n<p>As such, the regular expression in the original question could not match the email because part of it was being stripped out during string interpolation.</p>\n"}], "owner": {"reputation": 10559, "user_id": 2182928, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/qWqPu.jpg?s=128&g=1", "display_name": "Rudi Kershaw", "link": "https://stackoverflow.com/users/2182928/rudi-kershaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 59555507, "answer_count": 2, "score": 0, "last_activity_date": 1598221304, "creation_date": 1577800122, "question_id": 59544926, "link": "https://stackoverflow.com/questions/59544926/perl-shell-command-cannot-match-symbol", "title": "Perl shell command cannot match @ symbol", "body": "<p>I am trying to write a shell command, using perl, to do very basic checks on a string to see if it looks like an email address. Minimal reproducible example below:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># perl --version v5.28.1\nperl -E 'exit 1 if \"you@example.com\" !~ /@/' || echo 'failed'\n</code></pre>\n\n<p>The above outputs <code>failed</code>. I understand that the <code>@</code> symbol is for denoting arrays in perl, but after searching it apparently it does not need escaping. Even if I escape it with a backslash the result is the same.</p>\n\n<p>The question then is, why won't a sh run perl regex match an <code>@</code> symbol? Or is there something else I am missing? </p>\n"}, {"tags": ["excel", "perl", "cygwin"], "comments": [{"owner": {"reputation": 1222, "user_id": 11872560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDtD.jpg?s=128&g=1", "display_name": "Dulaj Kulathunga", "link": "https://stackoverflow.com/users/11872560/dulaj-kulathunga"}, "edited": false, "score": 0, "creation_date": 1577784009, "post_id": 59541865, "comment_id": 105253205, "body": "can you format your question description to understand"}, {"owner": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "reply_to_user": {"reputation": 1222, "user_id": 11872560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDtD.jpg?s=128&g=1", "display_name": "Dulaj Kulathunga", "link": "https://stackoverflow.com/users/11872560/dulaj-kulathunga"}, "edited": false, "score": 0, "creation_date": 1577784285, "post_id": 59541865, "comment_id": 105253298, "body": "I create a test.pl file and use the : use strict; use Spreadsheet::WriteExcel;  and then I Run my test.pl file on cygwin that raised the error message :  Can&#39;t locate Spreadsheet/WriteExcel.pm in @INC (@INC contains: /usr/lib/perl5/5.8/cygwin /usr/lib/perl5/5.8 /usr/lib/perl5/site_perl/5.8/cygwin /usr/lib/perl5/site_perl/5.8 /usr/lib/perl5/site_perl/5.8/cygwin /usr/lib/perl5/site_perl/5.8 /usr/lib/perl5/vendor_perl/5.8/cygwin /usr/lib/perl5/vendor_perl/5.8 /usr/lib/perl5/vendor_perl/5.8/cygwin /usr/lib/perl5/vendor_perl/5.8 .)"}, {"owner": {"reputation": 32298, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 2, "creation_date": 1577784292, "post_id": 59541865, "comment_id": 105253300, "body": "Welcome to StackOverflow! You may want to add more information to your question, such as, have you installed <a href=\"https://metacpan.org/pod/Spreadsheet::WriteExcel\" rel=\"nofollow noreferrer\">Spreadsheet::WriteExcel</a>? What have you tried so far?"}, {"owner": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "edited": false, "score": 0, "creation_date": 1577784631, "post_id": 59541865, "comment_id": 105253422, "body": "I want to use perl to implement =&gt; read the .txt file and save into .xslx file, the code like following : #!/usr/bin/perl -   use strict; use Spreadsheet::WriteExcel;   open (TABFILE, &#39;a.txt&#39;) or die &quot;a.txt: $!&quot;;   my $workbook  = Spreadsheet::WriteExcel-&gt;new(&#39;tab.xls&#39;); my $worksheet = $workbook-&gt;add_worksheet();   my $row = 0;   while (&lt;TABFILE&gt;) {     chomp;     # Split on single tab     my @Fld = split(&#39;,&#39;, $_);       my $col = 0;     foreach my $token (@Fld) {         $worksheet-&gt;write($row, $col, $token);         $col++;     }     $row++; }"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1577785269, "post_id": 59541865, "comment_id": 105253650, "body": "Install the module (<code>cpan  Spreadsheet::WriteExcel</code>). But first consider upgrading your Cygwin and Perl. The version of Perl you are using is ANCIENT! (It&#39;s 15 year old!)"}, {"owner": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "edited": false, "score": 0, "creation_date": 1577786147, "post_id": 59541865, "comment_id": 105253930, "body": "Do you have better idea to use the version of perl to read/write Excel file ? Thank you very much !"}, {"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1577787105, "post_id": 59541865, "comment_id": 105254249, "body": "<a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">strawberryperl</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "edited": false, "score": 0, "creation_date": 1577929534, "post_id": 59544633, "comment_id": 105283371, "body": "Thanks~ But it still does&#39;t work. I use the command line to install it that failed.I don&#39;t know why ."}, {"owner": {"reputation": 168, "user_id": 6881511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb1571eb297c04fea56c9d6cd73fad0?s=128&d=identicon&r=PG&f=1", "display_name": "zubenel", "link": "https://stackoverflow.com/users/6881511/zubenel"}, "reply_to_user": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "edited": false, "score": 0, "creation_date": 1577949115, "post_id": 59544633, "comment_id": 105287064, "body": "@Xiali Did you get some error after trying to install module with cpan? Also you may check if you have multiple Perl versions with command <code>where perl</code> as it will find every occurrence of Perl in your path. Sometimes it might cause problems trying to use the module."}, {"owner": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "edited": false, "score": 0, "creation_date": 1578031862, "post_id": 59544633, "comment_id": 105315026, "body": "@zubenel yes, I got some errors,In fact, I have installed the strawberry Perl and the Cygwin. But, I want to open the cygwin and to run my perl script.and I install the cpan Spreadsheet::WriteExcel  on the cygwin . cpan&gt; install Spreadsheet::WriteExcel CPAN: Storable loaded ok Going to read /cygdrive/c/Users/xiali/.cpan/Metadata Warning: Found only 0 objects in /cygdrive/c/Users/xiali/.cpan/Metadata CPAN: LWP::UserAgent loaded ok Fetching with LWP:   <a href=\"ftp://ftp.perl.org/pub/CPAN/authors/01mailrc.txt.gz\" rel=\"nofollow noreferrer\">ftp.perl.org/pub/CPAN/authors/01mailrc.txt.gz</a> LWP failed with code[501] message[Protocol scheme &#39;ftp&#39; is not supported]"}, {"owner": {"reputation": 168, "user_id": 6881511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb1571eb297c04fea56c9d6cd73fad0?s=128&d=identicon&r=PG&f=1", "display_name": "zubenel", "link": "https://stackoverflow.com/users/6881511/zubenel"}, "reply_to_user": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "edited": false, "score": 0, "creation_date": 1578065297, "post_id": 59544633, "comment_id": 105328476, "body": "@Xiali Unfortunately I do not know how to help. You may try to search by copying error message and checking if someone else had a similar problem or create a new post detailing what have you tried to do and what the error message was. You can also try to ask on www.perlmonks.org"}, {"owner": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "edited": false, "score": 0, "creation_date": 1584934287, "post_id": 59544633, "comment_id": 107584359, "body": "I believe your Cygwin perl is first in the path (you can check that with <code>which perl</code>). To change that, you can do rename <b>perl.exe</b> of Cygwin to something like <b>perl_cygwin.exe</b>. The Perl by default would then be Strawberry Perl (provided it is in the path)."}], "tags": [], "owner": {"reputation": 168, "user_id": 6881511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fb1571eb297c04fea56c9d6cd73fad0?s=128&d=identicon&r=PG&f=1", "display_name": "zubenel", "link": "https://stackoverflow.com/users/6881511/zubenel"}, "is_accepted": false, "score": 1, "last_activity_date": 1577798396, "creation_date": 1577798396, "answer_id": 59544633, "question_id": 59541865, "link": "https://stackoverflow.com/questions/59541865/how-to-use-cygwin-perl-v5-8-7-to-support-spreadsheet-writeexcel-pm/59544633#59544633", "title": "How to use cygwin perl v5.8.7 to support Spreadsheet/WriteExcel.pm", "body": "<p>The error message shows that you do not have Spreadsheet::WriteExcel module.</p>\n\n<p>In Cygwin you can install this module with:</p>\n\n<pre><code>$ perl -MCPAN -e shell\ncpan&gt; install Spreadsheet::WriteExcel\n</code></pre>\n\n<p>If you decide to use Strawberry Perl you may install the module with:</p>\n\n<pre><code>cpan Spreadsheet::WriteExcel\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9000, "user_id": 1603480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8063844ba80a593f6cf123309ce15c34?s=128&d=identicon&r=PG", "display_name": "Jean-Francois T.", "link": "https://stackoverflow.com/users/1603480/jean-francois-t"}, "is_accepted": false, "score": 1, "last_activity_date": 1584934207, "creation_date": 1584934207, "answer_id": 60807612, "question_id": 59541865, "link": "https://stackoverflow.com/questions/59541865/how-to-use-cygwin-perl-v5-8-7-to-support-spreadsheet-writeexcel-pm/60807612#60807612", "title": "How to use cygwin perl v5.8.7 to support Spreadsheet/WriteExcel.pm", "body": "<p>If the solution suggested by @zubenel does not work, you can use do it manually:</p>\n\n<ol>\n<li>Download the <code>.pn</code> file from CPAN (<a href=\"https://metacpan.org/release/Spreadsheet-WriteExcel/source/lib/Spreadsheet/WriteExcel.pm\" rel=\"nofollow noreferrer\">https://metacpan.org/release/Spreadsheet-WriteExcel/source/lib/Spreadsheet/WriteExcel.pm</a>)</li>\n<li>Copy it to the directory of your script in the path <strong>Spreadsheet/WriteExcel.pm</strong></li>\n<li>Run your scipt</li>\n</ol>\n\n<p>(Note: this is not installing in your system so other scripts won't be able to use the module unless you copy it as well).</p>\n"}], "owner": {"reputation": 37, "user_id": 12631247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a2d0ffc9ca0b9a4fc35f608ec2d883?s=128&d=identicon&r=PG&f=1", "display_name": "Xiali", "link": "https://stackoverflow.com/users/12631247/xiali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1584934207, "creation_date": 1577782939, "last_edit_date": 1584932947, "question_id": 59541865, "link": "https://stackoverflow.com/questions/59541865/how-to-use-cygwin-perl-v5-8-7-to-support-spreadsheet-writeexcel-pm", "title": "How to use cygwin perl v5.8.7 to support Spreadsheet/WriteExcel.pm", "body": "<p>I have the following Perl file: </p>\n\n<pre><code>#!/usr/bin/perl -\n\nuse strict;\nuse Spreadsheet::WriteExcel;\n\nopen (TABFILE, 'a.txt') or die \"a.txt: $!\";\n\nmy $workbook  = Spreadsheet::WriteExcel-&gt;new('tab.xlsx');\nmy $worksheet = $workbook-&gt;add_worksheet();\n\n# Row and column are zero indexed\nmy $row = 0;\n\nwhile (&lt;TABFILE&gt;) {\n    chomp;\n    # Split on single tab\n    my @Fld = split(',', $_);\n\n    my $col = 0;\n    foreach my $token (@Fld) {\n        $worksheet-&gt;write($row, $col, $token);\n        $col++;\n    }\n    $row++;\n}\n</code></pre>\n\n<hr>\n\n<p>When I run in Cygwin, I have the following Error message:</p>\n\n<pre><code>Can't locate Spreadsheet/WriteExcel.pm in @INC (@INC contains: \n/usr/lib/perl5/5.8/cygwin \n/usr/lib/perl5/5.8 \n/usr/lib/perl5/site_perl/5.8/cygwin \n/usr/lib/perl5/site_perl/5.8 \n/usr/lib/perl5/site_perl/5.8/cygwin \n/usr/lib/perl5/site_perl/5.8 \n/usr/lib/perl5/vendor_perl/5.8/cygwin \n/usr/lib/perl5/vendor_perl/5.8 \n/usr/lib/perl5/vendor_perl/5.8/cygwin \n/usr/lib/perl5/vendor_perl/5.8 .)\n</code></pre>\n\n<p>How to solve this issue?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1577705197, "post_id": 59529594, "comment_id": 105229633, "body": "Perl&#39;s hashes map straightforwardly to JSON dictionaries. Transforming a perfectly good dictionary to a list of single-item dictionaries is as unnatural in JSON as it is in Perl."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1577713522, "post_id": 59529594, "comment_id": 105233226, "body": "Did you mean <code>$h{1} = 11;</code>?"}, {"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1577713905, "post_id": 59529594, "comment_id": 105233403, "body": "In fact to_json() can do this too, &quot;=&gt;&quot; become just &quot;:&quot;      <code>push(@arr, \\%h);</code>     <code>printf &quot;%s\\n&quot;, to_json(\\@arr)</code>"}, {"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1577714140, "post_id": 59529594, "comment_id": 105233534, "body": "yes Shawn error $h{1} = 11; etc .."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "edited": false, "score": 0, "creation_date": 1577714061, "post_id": 59529870, "comment_id": 105233499, "body": "thanks, yes the hash is splitted in several hashes in any case"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1577732177, "post_id": 59529870, "comment_id": 105240707, "body": "this will produce an array with the keys in an arbitrary order; if the keys are always numeric, you probably want <code>map { { $_ =&gt; $h{$_} } } sort { $a &lt;=&gt; $b} keys %h</code> and otherwise <code>map { { $_ =&gt; $h{$_} } } sort keys %h</code>"}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": true, "score": 3, "last_activity_date": 1577704380, "creation_date": 1577704380, "answer_id": 59529870, "question_id": 59529594, "link": "https://stackoverflow.com/questions/59529594/convert-hash-to-array-of-hashes-in-perl/59529870#59529870", "title": "convert hash to array of hashes in Perl", "body": "<p>That's an easy one.</p>\n\n<pre><code>my @h = map { { $_ =&gt; $h{$_} } } keys %h;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "is_accepted": false, "score": 1, "last_activity_date": 1577813382, "creation_date": 1577813382, "answer_id": 59546994, "question_id": 59529594, "link": "https://stackoverflow.com/questions/59529594/convert-hash-to-array-of-hashes-in-perl/59546994#59546994", "title": "convert hash to array of hashes in Perl", "body": "<p>You could also use the built in <code>List::Util</code> library's excellent <a href=\"https://metacpan.org/pod/List::Util#pairmap\" rel=\"nofollow noreferrer\"><code>pairmap</code></a> function.</p>\n\n<pre><code>use List::Util qw&lt; pairmap &gt;;\n\nmy @array_of_pairs = pairmap { { $a =&gt; $b } } %some_hash;\n</code></pre>\n\n<p>Even if you don't use this function today, take some time to check out <a href=\"https://metacpan.org/pod/List::Util\" rel=\"nofollow noreferrer\"><code>List::Util</code></a>, there is a lot of good stuff in there.</p>\n"}], "owner": {"reputation": 327, "user_id": 4866908, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3e15af0a0130daf873d75708e9bddbe9?s=128&d=identicon&r=PG&f=1", "display_name": "Minstrel", "link": "https://stackoverflow.com/users/4866908/minstrel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 59529870, "answer_count": 2, "score": 0, "last_activity_date": 1577813382, "creation_date": 1577703124, "last_edit_date": 1577768449, "question_id": 59529594, "link": "https://stackoverflow.com/questions/59529594/convert-hash-to-array-of-hashes-in-perl", "title": "convert hash to array of hashes in Perl", "body": "<p>How simply convert a hash to an array of key/value ?</p>\n\n<pre><code>my %h;\n%h{1} = 11;\n%h{2} = 22;\n</code></pre>\n\n<p>and I want an array @result which I could represent as : <code>[ { 1 =&gt; 11 }, { 2 =&gt; 22} ]</code> (yes like in json to be clear)</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1577687493, "post_id": 59526481, "comment_id": 105223806, "body": "Welcome to Stack Overflow. SO is a question and answer site for professional and enthusiast programmers. The goal is that you add some code of your own to your question to show at least the research effort you made to solve this yourself."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1577690244, "post_id": 59526481, "comment_id": 105224460, "body": "@SachinG. : I don&#39;t quite understand: You are <b>explicitly looking</b> for an IP address pattern (<code>(\\d+?\\.\\d+?\\.\\d+?\\.\\d+?)</code>) in your code. Why do you expect this would return you the mail address?"}, {"owner": {"reputation": 510, "user_id": 3038257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nzWXq.jpg?s=128&g=1", "display_name": "Sachin G.", "link": "https://stackoverflow.com/users/3038257/sachin-g"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1577691509, "post_id": 59526481, "comment_id": 105224821, "body": "@user1934428 when i tried adding from in the code it doesn&#39;t show any output."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1577691792, "post_id": 59526481, "comment_id": 105224914, "body": "I don&#39;t get you. As Cyrus said, you should post what you tried to extract the email address. Instead you posted what you tried to extract the IP address. We need to see the actual code you are attempting."}, {"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1577691867, "post_id": 59526481, "comment_id": 105224946, "body": "@SachinG.: Are you just looking for <code>perl -nle &#39;print &quot;$1 REJECT&quot; if &#47;.*helo=&lt;(.*)&gt;&#47;&#39;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 3038257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nzWXq.jpg?s=128&g=1", "display_name": "Sachin G.", "link": "https://stackoverflow.com/users/3038257/sachin-g"}, "edited": false, "score": 0, "creation_date": 1577695044, "post_id": 59527532, "comment_id": 105225859, "body": "Thanks i tied this code and gave me nice output but what i want is to use local file /var/log/mail.log and instead of helo i want from email address. I tried changing the my $input and it throw error Use of uninitialized value $domain in concatenation (.) or string"}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1577693067, "creation_date": 1577693067, "answer_id": 59527532, "question_id": 59526481, "link": "https://stackoverflow.com/questions/59526481/extract-email-address-perl-script/59527532#59527532", "title": "Extract Email Address Perl Script", "body": "<p>Just try this:</p>\n\n<pre><code>my $input = 'Dec 30 07:34:09 mx postfix/smtpd[23855]: NOQUEUE: reject: RCPT from unknown[120.33.244.87]: 450 4.7.1 Client host rejected: cannot find your hostname, [120.33.244.87]; from=&lt;hcsales6@printingpress.xicp.net&gt; to=`&lt;`nishant@mydomain.com&gt; proto=SMTP helo=&lt;printingpress.xicp.net&gt;';\n\nmy ($val, $domain) = $input=~m/NOQUEUE\\:\\s*([^\\:]+)\\:.+?helo\\=&lt;([^&gt;]+)\\&gt;/i;\n\nprint \": $val\\t$domain\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1577700645, "post_id": 59527623, "comment_id": 105227827, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/205067/discussion-on-answer-by-polar-bear-extract-email-address-perl-script\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": true, "score": 2, "last_activity_date": 1577699659, "last_edit_date": 1577699659, "creation_date": 1577693651, "answer_id": 59527623, "question_id": 59526481, "link": "https://stackoverflow.com/questions/59526481/extract-email-address-perl-script/59527623#59527623", "title": "Extract Email Address Perl Script", "body": "<p>One liner</p>\n\n<p>In Windows 10 (Straberry Perl)</p>\n\n<p><code>perl -ne \"print \\\"$1 REJECT\\n\\\" if $_ =~ /NOQUEUE:\\s+reject:.*?helo=&lt;(.*)&gt;/\" /var/log/mail.log</code></p>\n\n<p>In Debian 8 [perl (v5.20.2)]</p>\n\n<p><code>perl -ne 'print \"$1 REJECT\\n\" if /NOQUEUE:\\s+reject:.*?helo=&lt;(.*)&gt;/' /var/log/mail.log</code></p>\n\n<p>OP informed that <em>domain</em> should be taken from field <strong>from</strong> and one record per domain, then command should be altered in the following form</p>\n\n<p><code>perl -ne 'print \"$1 REJECT\\n\" if /NOQUEUE:\\s+reject:.*?from=&lt;\\w+@(.*?)&gt;/' /var/log/mail.log | sort | uniq</code></p>\n\n<p>or extended code version</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $debug = 1;\n\nmy %hash;\n\nmy $pattern = qr/(\\w+\\s+\\d+)\\s+([\\d:]+).*?:\\s+NOQUEUE:\\s+(\\w+):.*?\\[([\\d.]+)\\]:\\s+(\\d+).*?:\\s+(.*?),.*?from=&lt;(.*?)&gt;\\s+to=&lt;(.*?)&gt;.*?helo=&lt;(.*)&gt;/;\n\nmy @fields = qw/date time state ip code err_msg from to fqdn/;\n\nmy $line = &lt;DATA&gt;;\nchomp($line);\n\n@hash{@fields} = ($line =~ /$pattern/);\n\nprint $hash{fqdn}. ' '. uc $hash{state} . \"\\n\";\n\nprint Dumper(\\%hash) if $debug;\n\n__DATA__\nDec 30 07:34:09 mx postfix/smtpd[23855]: NOQUEUE: reject: RCPT from unknown[120.33.244.87]: 450 4.7.1 Client host rejected: cannot find your hostname, [120.33.244.87]; from=&lt;hcsales6@printingpress.xicp.net&gt; to=&lt;nishant@mydomain.com&gt; proto=SMTP helo=&lt;printingpress.xicp.net&gt;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>printingpress.xicp.net REJECT\n$VAR1 = {\n          'state' =&gt; 'reject',\n          'from' =&gt; 'hcsales6@printingpress.xicp.net',\n          'time' =&gt; '07:34:09',\n          'code' =&gt; '450',\n          'ip' =&gt; '120.33.244.87',\n          'to' =&gt; 'nishant@mydomain.com',\n          'date' =&gt; 'Dec 30',\n          'err_msg' =&gt; 'cannot find your hostname',\n          'fqdn' =&gt; 'printingpress.xicp.net'\n        };\n</code></pre>\n"}], "owner": {"reputation": 510, "user_id": 3038257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nzWXq.jpg?s=128&g=1", "display_name": "Sachin G.", "link": "https://stackoverflow.com/users/3038257/sachin-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 59527623, "answer_count": 2, "score": -1, "last_activity_date": 1577703266, "creation_date": 1577686393, "last_edit_date": 1577703266, "question_id": 59526481, "link": "https://stackoverflow.com/questions/59526481/extract-email-address-perl-script", "title": "Extract Email Address Perl Script", "body": "<p>I have following lines in my <code>mail.log</code> file I want to extract domain and generate a output in <code>txt</code> file with adding <code>REJECT</code> by given space between domain and <code>REJECT</code>. </p>\n\n<pre><code>Dec 30 07:34:09 mx postfix/smtpd[23855]: NOQUEUE: reject: RCPT from unknown[120.33.244.87]: 450 4.7.1 Client host rejected: cannot find your hostname, [120.33.244.87]; from=&lt;hcsales6@printingpress.xicp.net&gt; to=`&lt;`nishant@mydomain.com&gt; proto=SMTP helo=&lt;printingpress.xicp.net&gt; \n</code></pre>\n\n<p>The output should be like this</p>\n\n<pre><code>printingpress.xicp.net REJECT\n</code></pre>\n\n<p>I have tried this code but this is giving me IP address with REJECT i want domain name to be extracted</p>\n\n<pre><code> perl -ne 'print \"$1\\n\" if /NOQUEUE:.*?\\[(\\d+?\\.\\d+?\\.\\d+?\\.\\d+?)\\]/' /var/log/mail.log \n</code></pre>\n\n<hr>\n\n<p>This is the final Result and work scenario, i have postfix server with policy-spf and DKIM running but getting many spam connections and my postfix is rejecting requests nicely. I wanted to block these spammers using smtpd_sender_restrictions, but filtering rejected host is quite time consuming and wanted automation. </p>\n\n<p>Thanks @Polar Bear for the solution. Now the system works like this </p>\n\n<p>postfix main.cf</p>\n\n<pre><code> smtpd_sender_restrictions = check_sender_access hash:/etc/postfix/blacklist\n</code></pre>\n\n<p>blacklist.sh</p>\n\n<pre><code> #!/bin/bash\n perl -ne 'print \"$1 REJECT\\n\" if /NOQUEUE:\\s+reject:.*?from=&lt;\\w+@(.*?)&gt;/' /var/log/mail.log | sort | uniq &gt;&gt; /etc/postfix/blacklist\n postmap /etc/postfix/blacklist\n service postfix restart\n</code></pre>\n\n<p>Giving permission to the file </p>\n\n<pre><code> chmod 755 blacklist.sh\n</code></pre>\n\n<p>Running cronjob for blacklist.sh every night. </p>\n\n<p>I tried the same code with few modifications and running nother cronjob every 3 hrs for SASL Failed Logins and blockhole IP addresses.</p>\n"}, {"tags": ["perl", "dmake"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1577690642, "post_id": 59525701, "comment_id": 105224563, "body": "I seems like MinGW and <code>dmake</code> are currently not available on the new ActiveState Platform, see <a href=\"https://stackoverflow.com/a/59482376/2173773\">this answer</a> for more information"}, {"owner": {"reputation": 61, "user_id": 12266322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d85c089487e43685fc40bcc2236d037?s=128&d=identicon&r=PG", "display_name": "dmboucher", "link": "https://stackoverflow.com/users/12266322/dmboucher"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1577739848, "post_id": 59525701, "comment_id": 105243322, "body": "Thank you for your comment, @H&#229;konH&#230;gland.  I agree - that is the kind of information I&#39;m seeing out there.  Seems odd that ActiveState would not provide a way to install modules when using their platform.  I opened a support case with them.  If they respond, I&#39;ll post their comments here.  Worst case, I can switch to <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> as recommended in the answer you referenced above."}], "owner": {"reputation": 61, "user_id": 12266322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d85c089487e43685fc40bcc2236d037?s=128&d=identicon&r=PG", "display_name": "dmboucher", "link": "https://stackoverflow.com/users/12266322/dmboucher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1844, "favorite_count": 1, "answer_count": 0, "score": 6, "last_activity_date": 1577679815, "creation_date": 1577679815, "question_id": 59525701, "link": "https://stackoverflow.com/questions/59525701/dmake-is-not-recognized-as-an-internal-or-external-command", "title": "&#39;dmake&#39; is not recognized as an internal or external command", "body": "<p>I installed ActiveState Perl and Komodo on my Windows 10 machine.  It's been working fine for the most part.  However, I can't install Perl modules in cpan like JSON::Parse or Switch because I keep getting an error:  <code>'dmake' is not recognized as an internal or external command</code>.  I've scoured the internet and can't find a way to get dmake to work so I can get past these errors and properly install the needed modules.</p>\n\n<p>When I try to use cpan shell to install dmake, I get:  <code>Package contains both files[ChangeLog COPYING dmake.exe META.yml NEWS PATCH.TXT README.TXT] and directories[man readme startup]; not recognized as a perl package, giving up</code></p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["perl", "xml-libxml"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577651540, "post_id": 59522914, "comment_id": 105217169, "body": "I&#39;m not sure how to influence XML::LibXML in this way, but Mojo::DOM in XML mode works: <code>perl -MMojo::DOM -lE &#39;say Mojo::DOM-&gt;new-&gt;xml(1)-&gt;parse(&quot;&lt;doc&gt;&amp;nbsp;&lt;&#47;doc&gt;&quot;)-&gt;to_strin&zwnj;&#8203;g&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577664355, "post_id": 59522914, "comment_id": 105219704, "body": "@Grinnz, ouch! That&#39;s so buggy! An XML schema is allowed to define <code>&amp;nbsp;</code> however its want."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577680309, "post_id": 59522914, "comment_id": 105222201, "body": "Of course, but the likelihood of that actually mattering approaches zero."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1577691089, "post_id": 59522914, "comment_id": 105224699, "body": "@Grinnz, Why would you think that next to nothing uses different entities than XHTML? (Or were you pretending the bug is just about <code>&amp;nbsp;</code>?)"}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 189069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c304edf6669428bd830214ca503cd9?s=128&d=identicon&r=PG", "display_name": "Jozef", "link": "https://stackoverflow.com/users/189069/jozef"}, "edited": false, "score": 0, "creation_date": 1577803405, "post_id": 59523340, "comment_id": 105259787, "body": "This (doctype + entity markup) works, but it means that the original xml has to be edited before parsing? Is there any way to assign DTD or doctype to a document before parsing it in XML::LibXML?"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 1, "last_activity_date": 1577653984, "creation_date": 1577653984, "answer_id": 59523340, "question_id": 59522914, "link": "https://stackoverflow.com/questions/59522914/how-to-register-entity-in-xmllibxml-for-parsing/59523340#59523340", "title": "How to register entity in XML::LibXML for parsing?", "body": "<p><a href=\"https://www.w3.org/TR/REC-xml/#sec-predefined-ent\" rel=\"nofollow noreferrer\">XML includes only a few entities.</a> You need to add a DTD that includes the entity. Untested:</p>\n\n<pre><code>&lt;!DOCTYPE just_make_it_work [\n    &lt;!ENTITY nbsp \"&amp;#160;\"&gt;\n]&gt;\n&lt;doc&gt;&amp;nbsp;&lt;/doc&gt;\n</code></pre>\n\n<hr>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\"&gt;\n&lt;doc&gt;&amp;nbsp;&lt;/doc&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 76, "user_id": 189069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c304edf6669428bd830214ca503cd9?s=128&d=identicon&r=PG", "display_name": "Jozef", "link": "https://stackoverflow.com/users/189069/jozef"}, "edited": false, "score": 0, "creation_date": 1577803120, "post_id": 59524351, "comment_id": 105259684, "body": "This answer assumes that the whole document is xhtml, which isn&#39;t in my case. We are getting xml documents (without namespaces) and inside some of the elements, there are xhtml snippets with html entities that breaks the XML::LibXML parsing."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1577764550, "last_edit_date": 1577764550, "creation_date": 1577663734, "answer_id": 59524351, "question_id": 59522914, "link": "https://stackoverflow.com/questions/59522914/how-to-register-entity-in-xmllibxml-for-parsing/59524351#59524351", "title": "How to register entity in XML::LibXML for parsing?", "body": "<p><code>&amp;nbsp;</code> is not a <a href=\"https://www.w3.org/TR/REC-xml/#sec-predefined-ent\" rel=\"nofollow noreferrer\">builtin/predefined XML entity</a>. It thus needs to be defined by the particular schema of the XML document.</p>\n\n<p>For example, if you are parsing XHTML, you should have one of the following at the top to define all XHTML entities:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"\n   \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\"&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\"\n   \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\"&gt;\n</code></pre>\n\n<p>If the DTD for your schema doesn't define <code>&amp;nbsp;</code>, you can use an actual non-breaking space or <code>&amp;#xA0;</code>.</p>\n\n<hr>\n\n<p>Note that using the above DOCTYPE means that parsing the document requires XML::LibXML to fetch <code>xhtml1-strict.dtd</code> or <code>xhtml11.dtd</code> every time you parse such a document that mentions them in this manner, which is a waste of resources. Adding the following to your program avoids that:</p>\n\n<pre><code>use XML::Catalogs::HTML -libxml;\n</code></pre>\n\n<p>Note that the following <code>DOCTYPE</code> directives are sufficient when using XML::Catalogs::HTML:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\"&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\"&gt;\n</code></pre>\n\n<hr>\n\n<p>Pro tip: Provide the <code>no_network</code> option to the XML::LibXML parser to ensure that it doesn't accidentally fetch DTDs from the internet. This doesn't prevent XML::Catalogs::HTML from working, so it's a great combination!</p>\n"}], "owner": {"reputation": 76, "user_id": 189069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c304edf6669428bd830214ca503cd9?s=128&d=identicon&r=PG", "display_name": "Jozef", "link": "https://stackoverflow.com/users/189069/jozef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1577764550, "creation_date": 1577650469, "question_id": 59522914, "link": "https://stackoverflow.com/questions/59522914/how-to-register-entity-in-xmllibxml-for-parsing", "title": "How to register entity in XML::LibXML for parsing?", "body": "<p>Loading XML document with unknown entity results in error:</p>\n\n<pre><code>$ perl -MXML::LibXML -lE 'XML::LibXML-&gt;load_xml(string =&gt; \"&lt;doc&gt;&amp;nbsp;&lt;/doc&gt;\");'\n:1: parser error : Entity 'nbsp' not defined\n&lt;doc&gt;&amp;nbsp;&lt;/doc&gt;\n           ^\n</code></pre>\n\n<p>How to make XML::LibXML parse that XML document and recognize <code>&amp;nbsp;</code> and replace it with Unicode non-breaking-space character?</p>\n"}, {"tags": ["xml", "perl"], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1577647223, "creation_date": 1577647223, "answer_id": 59522553, "question_id": 59521613, "link": "https://stackoverflow.com/questions/59521613/parsing-edimax-smart-plug-sp-2101w-v2-xml-output/59522553#59522553", "title": "Parsing Edimax Smart Plug SP-2101W V2 XML Output", "body": "<pre><code>use XML::LibXML qw();\nmy $xml = '&lt;?xml vers\u2026\u2026\u2026\u2026';\nmy $dom = XML::LibXML-&gt;load_xml(\n    string =&gt; \\$xml\n);\nprint $dom-&gt;findvalue('//Device.System.Power.NowCurrent'); # 0.7988\nprint $dom-&gt;findvalue('//Device.System.Power.NowPower');   # 152.06\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12620154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f634f573f0bf201efc7d4f09e1b65c2?s=128&d=identicon&r=PG&f=1", "display_name": "Byteschubser", "link": "https://stackoverflow.com/users/12620154/byteschubser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 59522553, "answer_count": 1, "score": 1, "last_activity_date": 1577662194, "creation_date": 1577639934, "last_edit_date": 1577662194, "question_id": 59521613, "link": "https://stackoverflow.com/questions/59521613/parsing-edimax-smart-plug-sp-2101w-v2-xml-output", "title": "Parsing Edimax Smart Plug SP-2101W V2 XML Output", "body": "<p>I am trying to access the smartplug.cgi of Edimax's smart plug SP-2101W V2 to work with the values of current and power. Unfortunately the output is (like) XML and I'm not familiar with. <br/>\nThe output of Edimax I get is just one line:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF8\"?&gt;&lt;SMARTPLUG id=\"edimax\"&gt;&lt;CMD id=\"get\"&gt;&lt;NOW_POWER&gt;&lt;Device.System.Power.NowCurrent&gt;0.7988&lt;/Device.System.Power.NowCurrent&gt;&lt;Device.System.Power.NowPower&gt;152.06&lt;/Device.System.Power.NowPower&gt;&lt;/NOW_POWER&gt;&lt;/CMD&gt;&lt;/SMARTPLUG&gt;\n</code></pre>\n\n<p>All I want to have is an output like:</p>\n\n<blockquote>\n  <p>Current: 0.7988A</p>\n  \n  <p>Power: 152.06W</p>\n</blockquote>\n\n<p>At the end of the day, I ask for some support to code the parser with <code>XML::LibXML</code> after loading the xml content.</p>\n\n<p>My dirty perl code so far:</p>\n\n<pre><code>#!/usr/bin/perl\n\n\n#\n# curl --digest -s -X POST -d '&lt;?xml version=\"1.0\" encoding=\"UTF8\"?&gt;&lt;SMARTPLUG id=\"edimax\"&gt;&lt;CMD id=\"get\"&gt;&lt;NOW_POWER&gt;&lt;Device.System.Power.NowCurrent&gt;&lt;/Device.System.Power.NowCurrent&gt;&lt;Device.System.Power.NowPower&gt;&lt;/Device.System.Power.NowPower&gt;&lt;/NOW_POWER&gt;&lt;/CMD&gt;&lt;/SMARTPLUG&gt;' http://admin:XXXXXXXX@10.100.100.46:10000/smartplug.cgi\n#\n\nuse strict;\nuse warnings;\nuse Capture::Tiny ':all';\nuse XML::LibXML;\n\nmy ($ip, $password) = @ARGV;\nmy $username = \"admin\";\nmy $command_get_power = \"curl --digest -s -X POST -d '&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF8\\\"?&gt;&lt;SMARTPLUG id=\\\"edimax\\\"&gt;&lt;CMD id=\\\"get\\\"&gt;&lt;NOW_POWER&gt;&lt;Device.System.Power.NowCurrent&gt;&lt;/Device.System.Power.NowCurrent&gt;&lt;Device.System.Power.NowPower&gt;&lt;/Device.System.Power.NowPower&gt;&lt;/NOW_POWER&gt;&lt;/CMD&gt;&lt;/SMARTPLUG&gt;'\";\n\nmy $url = \" http://admin:\" . $password . \"@\" . $ip . \":10000/smartplug.cgi\";\nmy $exec_cmd = $command_get_power . $url;\n\n\nmy ($stdout, $stderr, $exit) = capture {\n        system($exec_cmd);\n};\n\nprint $stdout;\n\nmy $xml_data = XML::LibXML-&gt;load_xml(string=&gt;$stdout);\n</code></pre>\n"}, {"tags": ["mysql", "perl", "dbi", "activeperl", "dbd"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1577636278, "post_id": 59521072, "comment_id": 105213136, "body": "How did you add DBD-mysql? It requires the MySQL client library be installed. It&#39;s probably best to <a href=\"https://docs.activestate.com/activeperl/5.12/faq/ActivePerl-faq2.html\" rel=\"nofollow noreferrer\">install it via ppm</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1577639370, "post_id": 59521072, "comment_id": 105213982, "body": "Note that the error doesn&#39;t necessarily refer to mysql.dll itself; it could refer to a library linked to it (e.g. the actual mysql library)"}, {"owner": {"reputation": 43, "user_id": 4615814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGYYv.jpg?s=128&g=1", "display_name": "bLIGU", "link": "https://stackoverflow.com/users/4615814/bligu"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1577640064, "post_id": 59521072, "comment_id": 105214162, "body": "@Schwern The guys at ActivePerl have made changes and removed the installer via PPM. Now, you must create a project online and create a build with modules."}, {"owner": {"reputation": 668, "user_id": 1185419, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XL3Sk.png?s=128&g=1", "display_name": "The Anh Nguyen", "link": "https://stackoverflow.com/users/1185419/the-anh-nguyen"}, "edited": false, "score": 0, "creation_date": 1615799064, "post_id": 59521072, "comment_id": 117793064, "body": "@bLIGU, Sure but what happen with the old projects that require DBD-mysql?"}], "owner": {"reputation": 43, "user_id": 4615814, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGYYv.jpg?s=128&g=1", "display_name": "bLIGU", "link": "https://stackoverflow.com/users/4615814/bligu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1587119158, "creation_date": 1577635953, "last_edit_date": 1577642878, "question_id": 59521072, "link": "https://stackoverflow.com/questions/59521072/error-using-perl-module-dbdmysql-in-activeperl-5-28-on-windws10-64bits", "title": "Error using perl module DBD::mysql in ActivePerl 5.28 on Windws10 64bits", "body": "<p>I installed the new ActiveState Perl custom build with Perl 5.28 and I added the module (DBD-mysql v4.50). The DBI module is set by default to the ActivePerl 5.28 compilation.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse diagnostics;\nuse DBI;\n\n### INIT DB CONNECTION\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:database=testdb;host=localhost\",\"root\", \"XXXX\",{'RaiseError' =&gt; 1,'mysql_auto_reconnect' =&gt; 1});\n$dbh-&gt;{InactiveDestroy} = 1;\n$dbh-&gt;{mysql_auto_reconnect} = 1;\n</code></pre>\n\n<p>then I get the following error:</p>\n\n<pre><code>&gt;perl test.pl\nUncaught exception from user code:\n        install_driver(mysql) failed: Can't load 'C:/Perl64/lib/auto/DBD/mysql/mysql.dll' for module DBD::mysql: load_file:The specified module could not be found at C:/Perl64/lib/DynaLoader.pm line 193.\n          at (eval 9) line 3.\n        Compilation failed in require at (eval 9) line 3.\n        Perhaps a required shared library or dll isn't installed where expected\n         at test.pl line 15.\n        DBI::install_driver(\"DBI\", \"mysql\") called at C:/Perl64/site/lib/DBI.pm line 660\n        DBI::connect(\"DBI\", \"DBI:mysql:database=testdb;host=localhost\", \"root\", \"XXXX\", HASH(0x109b408)) called at test.pl line 15\n</code></pre>\n\n<p>Trying from CPAN directly. Nothing changed.</p>\n\n<pre><code>cpan[2]&gt; install DBD::mysql\nDBD::mysql is up to date (4.050).\n</code></pre>\n\n<p>The file C:/Perl64/lib/auto/DBD/mysql/mysql.dll Exist.</p>\n\n<p>I have seek for information and I tryed to reinstall Perl package from EXE and MSI. I tryed to manually reinstall from CPAN console and many other things but It isn't working at all. Any solution or sugestion?</p>\n"}, {"tags": ["regex", "perl", "character", "substitution", "any"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1577656488, "post_id": 59520961, "comment_id": 105218268, "body": "what should dukuk become?"}, {"owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1577714829, "post_id": 59520961, "comment_id": 105233832, "body": "dukuk would become dukok as the last syllable should be changed only. Though dukuk is not an actual Malay word! Haha"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1577726624, "post_id": 59520961, "comment_id": 105238767, "body": "so rukuk -&gt; rukok but alukan would remain unchanged?"}, {"owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1577772767, "post_id": 59520961, "comment_id": 105249949, "body": "Yes, you are correct."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "edited": false, "score": 0, "creation_date": 1577636323, "post_id": 59521075, "comment_id": 105213148, "body": "Cool, works marvelously. Thank you so much! Can you explain a bit on what it&#39;s doing? Is it storing the character to a question mark and then we access that question mark with $1? Please help me on the proper terms. Haha"}, {"owner": {"reputation": 736, "user_id": 4315601, "user_type": "registered", "profile_image": "https://graph.facebook.com/1082442775210462/picture?type=large", "display_name": "Vesa Karjalainen", "link": "https://stackoverflow.com/users/4315601/vesa-karjalainen"}, "edited": false, "score": 0, "creation_date": 1577640489, "post_id": 59521075, "comment_id": 105214259, "body": "Fixed the obvious mistake :)"}], "tags": [], "owner": {"reputation": 736, "user_id": 4315601, "user_type": "registered", "profile_image": "https://graph.facebook.com/1082442775210462/picture?type=large", "display_name": "Vesa Karjalainen", "link": "https://stackoverflow.com/users/4315601/vesa-karjalainen"}, "is_accepted": false, "score": 0, "last_activity_date": 1577640412, "last_edit_date": 1577640412, "creation_date": 1577636019, "answer_id": 59521075, "question_id": 59520961, "link": "https://stackoverflow.com/questions/59520961/perl-regex-for-substituting-any-character/59521075#59521075", "title": "Perl Regex for Substituting Any Character", "body": "<p>Change your regex to:</p>\n\n<pre><code>s/(.)uk/$1ok/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1577740091, "post_id": 59521489, "comment_id": 105243383, "body": "Updated to account for the major change to the question. (@ysth)"}, {"owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "edited": false, "score": 0, "creation_date": 1577773018, "post_id": 59521489, "comment_id": 105250006, "body": "Or quite simply we could use [^aeiou] where it&#39;s essentially &quot;not vowel&quot; which is equivalent to &quot;consonant&quot;. Correct?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "edited": false, "score": 0, "creation_date": 1577773101, "post_id": 59521489, "comment_id": 105250019, "body": "That match way too much. And even if it was equivalent, I doubt it would be faster"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1578316741, "last_edit_date": 1578316741, "creation_date": 1577639033, "answer_id": 59521489, "question_id": 59520961, "link": "https://stackoverflow.com/questions/59520961/perl-regex-for-substituting-any-character/59521489#59521489", "title": "Perl Regex for Substituting Any Character", "body": "<p>According to the <a href=\"https://en.wikipedia.org/wiki/Malay_alphabet\" rel=\"nofollow noreferrer\">this page</a>, the Malayan language uses an unaccented latin alphabet, and it has the same consonants as the English language. However, its digraphs are different than English's.</p>\n\n<ul>\n<li>ai vowel</li>\n<li>au vowel</li>\n<li>oi vowel</li>\n<li>gh consonant</li>\n<li>kh consonant</li>\n<li>ng consonant</li>\n<li>ny consonant</li>\n<li>sy consonant</li>\n</ul>\n\n<p>So, if one wanted to find a syllable ending with <code>uk</code>, one would look for </p>\n\n<pre><code>&lt;syllable_boundary&gt;(?:[bcdfhjlmpqrtvwxyz]|gh?|kh?|n[gv]?|sv?)uk\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;syllable_boundary&gt;uk\n</code></pre>\n\n<p>The OP is specifically disinterested in the latter, so we simply need to look for </p>\n\n<pre><code>&lt;syllable_boundary&gt;(?:[bcdfhjlmpqrtvwxyz]|gh?|kh?|n[gv]?|sv?)uk\n</code></pre>\n\n<p>So now, we have to determine how to find a syllable boundary. ...or do we? All the consonant digraphs end with a consonant, and none of the vowel digraphs end in a consonant so we simply need to look for </p>\n\n<pre><code>[bcdfghjklmnpqrstvwxyz]uk\n</code></pre>\n\n<p>Finally, we can use <code>\\b</code> to check for the end of the word, so we're interested in matching</p>\n\n<pre><code>[bcdfghjklmnpqrstvwxyz]uk\\b\n</code></pre>\n\n<hr>\n\n<p>Now, let's use this in a substitution.</p>\n\n<pre><code>s/([bcdfghjklmnpqrstvwxyz])uk\\b/$1ok/g\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s/(?&lt;=[bcdfghjklmnpqrstvwxyz])uk\\b/ok/g\n</code></pre>\n\n<p>or</p>\n\n<pre><code>s/[bcdfghjklmnpqrstvwxyz]\\Kuk\\b/ok/g\n</code></pre>\n\n<p>The last one is the most efficient, but it requires Perl 5.10+. (That shouldn't be a problem given how ancient it is.)</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577714596, "post_id": 59526235, "comment_id": 105233725, "body": "This is based on Malay language rules. Sorry I didn&#39;t specify about the last syllable rule in the question. I&#39;ll edit it in now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577738516, "post_id": 59526235, "comment_id": 105242850, "body": "Re &quot;<i>Sorry I didn&#39;t specify about the last syllable rule in the question.</i>&quot;, That&#39;s not what I was saying; I was saying you didn&#39;t check of the match was in the last syllable. But that&#39;s wrong. I had overlooked the <code>\\b</code>. Sorry, downvote and comment removed. (As well as the request to fix the question, which is now moot)"}, {"owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1578300185, "post_id": 59526235, "comment_id": 105381318, "body": "Ah right, because I&#39;m using complement of the vowels. Will update the regex then."}, {"owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1578316628, "post_id": 59526235, "comment_id": 105388712, "body": "All right now that I understand the nuances a bit better, I&#39;ve decided to just accept your answer to the question. Thank you so much for your input!"}], "tags": [], "owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "is_accepted": false, "score": 0, "last_activity_date": 1578300286, "last_edit_date": 1578300286, "creation_date": 1577684728, "answer_id": 59526235, "question_id": 59520961, "link": "https://stackoverflow.com/questions/59520961/perl-regex-for-substituting-any-character/59526235#59526235", "title": "Perl Regex for Substituting Any Character", "body": "<p>As ikegami raised, the word \"bukuk\" would have two substitutions. This is not the desired outcome as only the last syllable should be changed. Also, I forgot to mention that the change should only be done for a random consonant, u, and followed by k (e.g. ruk, not auk). </p>\n\n<p>As such, taking everything into account that has been answered, the correct regex should be:</p>\n\n<pre><code>s/(\\w*[bcdfghjklmnpqrstvwxyz])uk\\b/$1ok/g;\n</code></pre>\n\n<p>EDIT: As ikegami has raised again, the complement of vowels - [^aeiou] will match for other characters like \"-\" and \" \" which is undesired. Updated the solution.</p>\n"}], "owner": {"reputation": 21, "user_id": 11657000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d208b495eb464d614be17c2ff7acf3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Asad", "link": "https://stackoverflow.com/users/11657000/asad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 59521489, "answer_count": 3, "score": -2, "last_activity_date": 1578316741, "creation_date": 1577635235, "last_edit_date": 1577714749, "question_id": 59520961, "link": "https://stackoverflow.com/questions/59520961/perl-regex-for-substituting-any-character", "title": "Perl Regex for Substituting Any Character", "body": "<p>Essentially, I want to replace the u between the random character and the k to be an o. The output I should get from the substitution is dudok and rujok.</p>\n\n<p>How can I do this in Perl? I'm very new to Perl so go easy on me.</p>\n\n<p>This is what I have right now:</p>\n\n<pre><code>$text = \"duduk, rujuk\";\n$_ = $text;\ns/.uk/ok/g\nprint $_; #Output: duok, ruok Expected: dudok, rujok\n</code></pre>\n\n<p>EDIT: Forgot to mention that the last syllable is the only one that should be changed. Also, the random character is specifically supposed to be a random consonant, not just any random character. </p>\n\n<p>I should mention that this is all based on Malay language rules for grapheme to phoneme conversion.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1577625316, "post_id": 59519540, "comment_id": 105210340, "body": "Why would you not choose the 7th paragraph? It is also multiline"}, {"owner": {"reputation": 31, "user_id": 5033743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0439fcde6e02ffec81eb0c640a1707c0?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5033743/raj"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1577626161, "post_id": 59519540, "comment_id": 105210573, "body": "Yes 7th paragraph can be included since it may contain alternate usage/definition of the word,  but let&#39;s stick to one that contains extensive definition i.e. most lines."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5033743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0439fcde6e02ffec81eb0c640a1707c0?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5033743/raj"}, "edited": false, "score": 1, "creation_date": 1577628420, "post_id": 59519891, "comment_id": 105211192, "body": "Thank you for the solution, I am now using words from <a href=\"https://raw.githubusercontent.com/dwyl/english-words/master/words.txt\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/dwyl/english-words/master/words.tx&zwnj;&#8203;t</a> with your solution to clean-up my searchable text dictionary."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1577626440, "creation_date": 1577626440, "answer_id": 59519891, "question_id": 59519540, "link": "https://stackoverflow.com/questions/59519540/extract-dictionary-definition-of-word-from-text-file-with-mutiline-content/59519891#59519891", "title": "Extract dictionary definition of word from text file with mutiline content", "body": "<p>Here is an example of how you can extract the definition with the longest string length:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $fn = 'dict.txt';\nmy $word = 'Absolve';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy $str = do { local $/; &lt;$fh&gt; };\nclose $fh;\nmy @lines = split /\\s*\\n(?:\\s*\\n)+/, $str;\nmy @candidates;\nfor my $line (@lines) {\n    if ($line =~ /^\\s*\\Q$word\\E\\s/) {\n        push @candidates, $line;\n    }\n}\nif (@candidates) {\n    @candidates = sort { length $b &lt;=&gt; length $a } @candidates;\n    say $candidates[0];  # &lt;-- first item has the longest length\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5033743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0439fcde6e02ffec81eb0c640a1707c0?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/5033743/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577626440, "creation_date": 1577623645, "last_edit_date": 1577624544, "question_id": 59519540, "link": "https://stackoverflow.com/questions/59519540/extract-dictionary-definition-of-word-from-text-file-with-mutiline-content", "title": "Extract dictionary definition of word from text file with mutiline content", "body": "<p>I have the text formatted dictionary from which I would like to extract\nonly the multi-line definition of word while ignoring other single line noise.\nIs it possible to do that?\nBelow is the example for word Absolve. I would like to see only 6th paragraph</p>\n\n<pre><code>   Absolutory (a.) Serving to absolve; absolving.\n\n   Absolvable (a.) That may be absolved.\n\n   Absolvatory (a.) Conferring absolution; absolutory.\n\n   Absolved (imp. &amp; p. p.) of Absolve\n\n   Absolving (p. pr. &amp; vb. n.) of Absolve\n\n   Absolve (v. t.) To set free, or release, as from some obligation, debt,\n   or responsibility, or from the consequences of guilt or such ties as it\n   would be sin or guilt to violate; to pronounce free; as, to absolve a\n   subject from his allegiance; to absolve an offender, which amounts to\n   an acquittal and remission of his punishment.\n\n   Absolve (v. t.) To free from a penalty; to pardon; to remit (a sin); --\n   said of the sin or guilt.\n\n   Absolve (v. t.) To finish; to accomplish.\n\n   Absolve (v. t.) To resolve or explain.\n\n   Absolvent (a.) Absolving.\n\n   Absolvent (n.) An absolver.\n</code></pre>\n"}, {"tags": ["python", "perl", "encoding", "base64"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 1, "creation_date": 1577584525, "post_id": 59516199, "comment_id": 105204141, "body": "This is probably the same data (in different representations). Write the bytes out to a file (in binary mode, not text) and compare the files."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1577601736, "last_edit_date": 1577601736, "creation_date": 1577600644, "answer_id": 59517305, "question_id": 59516199, "link": "https://stackoverflow.com/questions/59516199/decode-base64-in-python-that-was-encoded-in-perl/59517305#59517305", "title": "Decode Base64 in Python that was encoded in Perl", "body": "\n\n<p>You already have the same string in both Perl and Python.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -e'\n   use MIME::Base64 qw( encode_base64 );\n   my $raw = \"\\x6A\\x15\\xFF\\x3B\\x12\\xD8\\xFC\\x10\\x51\\xE1\\x6C\\xBE\\x9F\\xE6\\xB7\\x32\";\n   CORE::say encode_base64($raw, \"\");\n'\nahX/OxLY/BBR4Wy+n+a3Mg==\n\n$ python3 &lt;&lt;__END_OF_PROG__\nimport base64\nencoded = \"ahX/OxLY/BBR4Wy+n+a3Mg==\";\nexpected = b\"\\x6A\\x15\\xFF\\x3B\\x12\\xD8\\xFC\\x10\\x51\\xE1\\x6C\\xBE\\x9F\\xE6\\xB7\\x32\";\nraw = base64.b64decode(encoded)\nprint(raw == expected)\n__END_OF_PROG__\nTrue\n</code></pre>\n\n<p>That's because <code>base64.b64decode(data)</code> didn't produce</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>b'j\\x15\\xff;\\x12\\xd8\\xfc\\x10Q\\xe1l\\xbe\\x9f\\xe6\\xb72'\n</code></pre>\n\n<p>What it produced was the string produced by that Python string literal, the string consisting of the following 16 bytes (hex):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>6A 15 FF 3B 12 D8 FC 10 51 E1 6C BE 9F E6 B7 32\n</code></pre>\n\n<p>That is the very string you had in Perl to produce <code>ahX/OxLY/BBR4Wy+n+a3Mg==</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 1399317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53a11573ff16461df0bb4f5e596b0d6?s=128&d=identicon&r=PG", "display_name": "mrchestnut", "link": "https://stackoverflow.com/users/1399317/mrchestnut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577601736, "creation_date": 1577582199, "question_id": 59516199, "link": "https://stackoverflow.com/questions/59516199/decode-base64-in-python-that-was-encoded-in-perl", "title": "Decode Base64 in Python that was encoded in Perl", "body": "<p>I have base64 encoded data that was created with Perl, using <code>MIME::Base64</code> with <code>encode_base64($data)</code>.</p>\n\n<p>The result is: <code>ahX/OxLY/BBR4Wy+n+a3Mg==</code></p>\n\n<p>When I decode this in Perl, I get <code>j?;??Q?l???2</code>. If I write that out to a file, it looks like this: <code>j\u02c7;\u00ff\u00b8Q\u00b7l\u00e6\u00fc\u00ca\u22112</code></p>\n\n<p>However, when I try to use the same base64 encoded data and decode with python <code>base64.b64decode(data), I get:\n</code>b'j\\x15\\xff;\\x12\\xd8\\xfc\\x10Q\\xe1l\\xbe\\x9f\\xe6\\xb72'`</p>\n\n<p>If I decoded it to <code>latin1</code>, the result is a bit closer: <code>'j\\x15\u00ff;\\x12\u00d8\u00fc\\x10Q\u00e1l\u00be\\x9f\u00e6\u00b72'</code>, but I need the exact same data.</p>\n\n<p>How can I get the exact same output from python? What am I missing?</p>\n\n<p>(The Perl <code>$data</code> itself was supposedly generated with urandom <code>read(DEV,$data,16);</code>. </p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577573943, "post_id": 59515567, "comment_id": 105202715, "body": "I always forgot to <code>chomp</code>, when parsing from <code>&lt;&gt;</code>, thanks"}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577574615, "post_id": 59515567, "comment_id": 105202810, "body": "but still doesnt work to unlink: <code>ls &#47;tmp | perl -nle &#39;unlink if -f &quot;&#47;tmp&#47;$_&quot;&#39;</code>, I have to <code>unlink</code> without any test, like this: <code>ls &#47;tmp | perl -nle &#39;unlink &quot;&#47;tmp&#47;$_&quot;&#39;</code>, so it unlinks every file except of dirs (which is desired, but the wrong way). So how to unlink with file test?"}, {"owner": {"reputation": 7444, "user_id": 967621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOso6.jpg?s=128&g=1", "display_name": "Timur Shtatland", "link": "https://stackoverflow.com/users/967621/timur-shtatland"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577576545, "post_id": 59515567, "comment_id": 105203104, "body": "unlink full file path. Otherwise by default it removes $_ which is just the base name."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 4, "creation_date": 1577599875, "post_id": 59515567, "comment_id": 105205802, "body": "also, enable warnings, even (especially?) on oneliners. adding -w would have given you <code>Unsuccessful stat on filename containing newline</code>"}], "tags": [], "owner": {"reputation": 7444, "user_id": 967621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zOso6.jpg?s=128&g=1", "display_name": "Timur Shtatland", "link": "https://stackoverflow.com/users/967621/timur-shtatland"}, "is_accepted": true, "score": 1, "last_activity_date": 1577573826, "creation_date": 1577573826, "answer_id": 59515567, "question_id": 59515255, "link": "https://stackoverflow.com/questions/59515255/perl-file-test-f-is-not-really-working-for-unknown-reasons/59515567#59515567", "title": "perl - file test `-f` is not really working for unknown reasons", "body": "<p>Use the <code>-l</code> command line flag in addition to the rest. It strips the new line characters from the <code>ls</code> output before feeding them to the one liner body. Otherwise the file names have extra new lines. </p>\n"}], "owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 59515567, "answer_count": 1, "score": 0, "last_activity_date": 1577574828, "creation_date": 1577570747, "last_edit_date": 1577574828, "question_id": 59515255, "link": "https://stackoverflow.com/questions/59515255/perl-file-test-f-is-not-really-working-for-unknown-reasons", "title": "perl - file test `-f` is not really working for unknown reasons", "body": "<p>in my <code>/tmp</code>, I have these files:</p>\n\n<pre><code>8ldocdDUY6\naoB6va72iV\nconfig-err-3g5Pdc\n....\n</code></pre>\n\n<p>All are empty: <code>ls /tmp  | perl -ne 'print \"/tmp/$_\"' | xargs file</code>\noutput: </p>\n\n<pre><code>8ldocdDUY : empty\naoB6va72iV: empty\nconfig-err-3g5Pdc: empty\n</code></pre>\n\n<p>But if I do <code>ls /tmp  | perl -ne 'print if -f \"/tmp/$_\"'</code>, then no file. No output. Why so, when used <code>-f</code> test so that every plain file should be true?</p>\n\n<p>However: If i do just one file test:\n<code>perl -e 'print \"yes\" if -f \"/tmp/8ldocdDUY6\"'</code>, then it will print <code>yes</code>, so it is true. So why it isnt for the previous inline command?</p>\n"}, {"tags": ["perl", "oop", "mojolicious"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1577552340, "post_id": 59512734, "comment_id": 105197675, "body": "See also <a href=\"https://metacpan.org/pod/release/KENTNL/Devel-Isa-Explainer-0.002900-TRIAL/lib/Devel/Isa/Explainer.pm\" rel=\"nofollow noreferrer\">Devel::Isa::Explainer</a> and <a href=\"https://perldoc.perl.org/mro.html#mro%3a%3aget_linear_isa(%24classname%5b%2c-%24type%5d)\" rel=\"nofollow noreferrer\">mro::get_linear_isa()</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577651115, "post_id": 59512734, "comment_id": 105217042, "body": "What are you really trying to find out? The only thing you need to know about an object for 95% of cases is its <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\">documented interface</a>. Doing anything based on only the programmatic structure of the object is unsupported."}, {"owner": {"reputation": 50, "user_id": 8110392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5u9yN.jpg?s=128&g=1", "display_name": "xcodejoy", "link": "https://stackoverflow.com/users/8110392/xcodejoy"}, "edited": false, "score": 0, "creation_date": 1577721630, "post_id": 59512734, "comment_id": 105236734, "body": "You are right. All things are well documented. But, to explore the UserAgent object I have to spend a lot of time reading documentation and writing notes. On the other hand, if I will see the complete structure of UserAgent object - it will save my time reading documentation."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1577553976, "creation_date": 1577553976, "answer_id": 59513230, "question_id": 59512734, "link": "https://stackoverflow.com/questions/59512734/how-to-get-structure-and-inheritance-history-of-a-perl-object-not-a-class/59513230#59513230", "title": "How to get structure and inheritance history of a Perl object (not a class)?", "body": "<p>Perl doesn't keep track of historical values of variables.</p>\n\n<p>Perl doesn't keep track of historical inheritance relationships.</p>\n\n<p>Objects don't have inheritance relationships; classes do.</p>\n\n<hr>\n\n<p>The current structure of an object can be found using the following:</p>\n\n<pre><code>use Data::Dumper qw( Dumper );\n\n{\n   local $Data::Dumper::Purity = 1;\n   print(Dumper($o));\n}\n</code></pre>\n\n<p>(It has limitations: Only one value of dualvars is shown; associated magic isn't shown; etc. If you need a more precise representation, Devel::Peek's <code>Dump</code> can be used.)</p>\n\n<p>The classes from which an object's class currently inherits can be found using the following:</p>\n\n<pre><code>use mro          qw( );\nuse Scalar::Util qw( blessed );\n\nsay join \", \", @{ mro::get_linear_isa(blessed($o)) };\n</code></pre>\n"}], "owner": {"reputation": 50, "user_id": 8110392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5u9yN.jpg?s=128&g=1", "display_name": "xcodejoy", "link": "https://stackoverflow.com/users/8110392/xcodejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 59513230, "answer_count": 1, "score": 1, "last_activity_date": 1577553976, "creation_date": 1577550692, "question_id": 59512734, "link": "https://stackoverflow.com/questions/59512734/how-to-get-structure-and-inheritance-history-of-a-perl-object-not-a-class", "title": "How to get structure and inheritance history of a Perl object (not a class)?", "body": "<pre><code>use Mojo::UserAgent;\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $tx = $ua-&gt;get( shift );\n</code></pre>\n\n<p>How to get structure and inheritance history of these Perl objects ($ua and $tx)?</p>\n\n<p>Data::Dumper shows only small part of structure and inheritance history.</p>\n"}, {"tags": ["perl", "raspberry-pi", "gpio"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1577563371, "post_id": 59512145, "comment_id": 105200548, "body": "Can you please link to the servos you&#39;re using? (Disclaimer: I&#39;m the author of <code>WiringPi::API</code>)"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1577618492, "post_id": 59512145, "comment_id": 105208798, "body": "Some of those constants do not exist in my software. Please add <code>use warnings;</code> and <code>use strict;</code> to your script."}, {"owner": {"reputation": 45, "user_id": 11454627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820219e98ad13fb2124b0c5aec14277b?s=128&d=identicon&r=PG&f=1", "display_name": "prem111", "link": "https://stackoverflow.com/users/11454627/prem111"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1577636403, "post_id": 59512145, "comment_id": 105213168, "body": "Thank you for your response. It&#39;s working now. The problem was the connection to bad pins not supporting PWM. I have one more question, can I use software pwm in WiringPI :: API (I want to connect multiple servos)? if not what is the alternative in perl?"}, {"owner": {"reputation": 45, "user_id": 11454627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820219e98ad13fb2124b0c5aec14277b?s=128&d=identicon&r=PG&f=1", "display_name": "prem111", "link": "https://stackoverflow.com/users/11454627/prem111"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1577694324, "post_id": 59512145, "comment_id": 105225664, "body": "I have a question about the communication between modules nrf24l01 via SPI? can i do it in wiringpi?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1577722448, "post_id": 59512145, "comment_id": 105237124, "body": "You can use the NRF24L01 using WiringPi::API, but you&#39;ll have to write your own SPI driver for it."}], "owner": {"reputation": 45, "user_id": 11454627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820219e98ad13fb2124b0c5aec14277b?s=128&d=identicon&r=PG&f=1", "display_name": "prem111", "link": "https://stackoverflow.com/users/11454627/prem111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577546379, "creation_date": 1577546379, "question_id": 59512145, "link": "https://stackoverflow.com/questions/59512145/raspberry-pi-using-two-servos-or-esc-in-perl-with-wiringpiapi", "title": "Raspberry pi. Using two servos or ESC in perl with WiringPi::API", "body": "<p>im trying using two ESC or servos in WiringPi::API (perl). 1 servo works ok, when using 2 servos, it doesn't work. This is my code:</p>\n\n<pre><code>use WiringPi::API qw(:all);\nuse RPi::Const qw(:all);\n\nsetup_gpio();\n\npin_mode(ESC1_PIN, PWM_OUT);\npin_mode(ESC2_PIN, PWM_OUT);\n\npwm_set_mode(PWM_MODE_MS);\npwm_set_clock(NEUTRAL);\npwm_set_range(RANGE);\n\npwm_write(ESC1_PIN, 176);\npwm_write(ESC2_PIN, 176); \n\n</code></pre>\n\n<p>Thanks for help and reply.</p>\n"}, {"tags": ["perl", "parallel-processing", "append"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1577468521, "post_id": 59504052, "comment_id": 105180861, "body": "The outside <code>$result</code> is referring to the parent process&#39;s <code>$result</code> not the child <code>$result</code>. I think you need to pass the result back to the parent using <a href=\"https://metacpan.org/pod/Parallel::ForkManager#RETRIEVING-DATASTRUCTURES-from-child-processes\" rel=\"nofollow noreferrer\"><code>run_on_finish()</code></a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1577469493, "post_id": 59504052, "comment_id": 105181161, "body": "See <a href=\"https://stackoverflow.com/a/41891334/4653379\">this post</a> for an answer (for example)"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1577468807, "last_edit_date": 1577468807, "creation_date": 1577468281, "answer_id": 59504181, "question_id": 59504052, "link": "https://stackoverflow.com/questions/59504052/append-resulted-data-to-scalar-variable-in-parallelforkmanager-perl/59504181#59504181", "title": "Append resulted data to scalar variable in Parallel::ForkManager Perl", "body": "<p>As shown in the documentation of <a href=\"http://p3rl.org/Parallel::ForkManager\" rel=\"noreferrer\">Parallel::ForkManager</a>, to get a result from a child, you need to supply a reference to the result as another parameter to <code>finish</code>.</p>\n\n<pre><code>$pm-&gt;finish(0, [$Files{$n}, $list_of_ips[$n-1], $result]);\n</code></pre>\n\n<p>Use <code>run_on_finish</code> to gather the results:</p>\n\n<pre><code>my $result;\n$pm-&gt;run_on_finish( sub {\n    my ($pid, $exit_code, $ident, $exit_signal, $core_dump, $single_result) = @_;\n    $result .= \"Result from File: $single_result-&gt;[0] and Host: $single_result-&gt;[1]\"\n             . \" is $single_result-&gt;[2]\\n\"; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1577469297, "last_edit_date": 1577469297, "creation_date": 1577468949, "answer_id": 59504306, "question_id": 59504052, "link": "https://stackoverflow.com/questions/59504052/append-resulted-data-to-scalar-variable-in-parallelforkmanager-perl/59504306#59504306", "title": "Append resulted data to scalar variable in Parallel::ForkManager Perl", "body": "<p>Each time you run <code>$pm-&gt;start</code>, you are forking a new process to run the code until <code>$pm-&gt;finish</code>. This forked process cannot affect the parent process in any way except by the mechanism Parallel::ForkManager provides to send data back to the parent. This mechanism is described at <a href=\"https://metacpan.org/pod/Parallel::ForkManager#RETRIEVING-DATASTRUCTURES-from-child-processes\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Parallel::ForkManager#RETRIEVING-DATASTRUCTURES-from-child-processes</a>.</p>\n\n<pre><code>$pm-&gt;run_on_finish(sub {\n  my ($pid, $exit_code, $ident, $exit_signal, $core_dump, $data) = @_;\n  my $result = $$data;\n  ...\n});\n\nDATA_LOOP:\nforeach my $n (1..$num_buckets) {\n        my $pid = $pm-&gt;start and next DATA_LOOP;\n        ...\n        $pm-&gt;finish(0, \\$result);\n}\n</code></pre>\n\n<p>Forking is in fact not needed for these operations if you are willing to restructure a bit. Net::OpenSSH can provide commands that can be managed simultaneously by an event loop such as <a href=\"https://metacpan.org/pod/IO::Async::Loop\" rel=\"nofollow noreferrer\">IO::Async::Loop</a>, thus all Perl operations will occur in the same process (but not necessarily in the order they appear). Since <a href=\"https://metacpan.org/pod/IO::Async::Loop#run_process\" rel=\"nofollow noreferrer\">IO::Async::Loop->run_process</a> returns a Future, <a href=\"https://metacpan.org/pod/Future::Utils\" rel=\"nofollow noreferrer\">Future::Utils</a> provides a way to manage concurrency of these commands.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Net::OpenSSH;\nuse IO::Async::Loop;\nuse Future::Utils 'fmap_concat';\n\nmy $loop = IO::Async::Loop-&gt;new;\n\nmy $future = fmap_concat {\n  my $n = shift;\n  ...\n  my $remote_command = $ssh-&gt;make_remote_command($command_to_execute);\n  return $loop-&gt;run_process(command =&gt; $remote_command, capture =&gt; ['stdout'])\n    -&gt;transform(done =&gt; sub { \"Result from File:$Files{$n} and Host:$list_of_ips[$n-1] is $_[0]\\n\"; });\n} foreach =&gt; [1..$num_buckets], concurrent =&gt; 5;\n\nmy @results = $future-&gt;get;\n</code></pre>\n\n<p>There is a lot of flexibility to how the individual and overall (returned by fmap) <a href=\"https://metacpan.org/pod/Future\" rel=\"nofollow noreferrer\">Future</a>s are managed, but by default any failure to execute a process will result in the whole Future failing immediately (causing <code>get</code> to throw an exception) and any nonzero exit will be ignored.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 59504181, "answer_count": 2, "score": 1, "last_activity_date": 1577469297, "creation_date": 1577467506, "question_id": 59504052, "link": "https://stackoverflow.com/questions/59504052/append-resulted-data-to-scalar-variable-in-parallelforkmanager-perl", "title": "Append resulted data to scalar variable in Parallel::ForkManager Perl", "body": "<p>I have a code, which is working as expected. But I have difficulty in storing the output of each of the executed command in <code>$result = $ssh-&gt;capture($command_to_execute);</code>. This uses <code>Parallel::ForkManager</code> module to run the commands in different Hosts by using different files as an input parameters.</p>\n\n<p>Once the command execution is done, I want the resulted output should be stored in <code>$result</code> variable. It should append each of the hosts results in same variable and at the end I want to process the values which are in <code>$result</code>. I am using <code>.=</code> to append the resulted data to <code>$result</code> but it doent seems to be working.</p>\n\n<p>Pasting my code here for reference:</p>\n\n<pre><code>.\n.\n.\nmy $result;\nmy $pm = Parallel::ForkManager-&gt;new(5);\n\nDATA_LOOP:\nforeach my $n (1..$num_buckets) {\n        my $pid = $pm-&gt;start and next DATA_LOOP;\n\n        $command_to_execute = $my_command.\" \".$Files{$n};\n        my $ssh = SSH_Connection( $list_of_ips[$n-1], 'username', 'pass' );\n        $result = $ssh-&gt;capture($command_to_execute);\n        $result .= \"Result from File:$Files{$n} and Host:$list_of_ips[$n-1] is $result\\n\"; \n        print \"Result: INSIDE: $result\";\n        $pm-&gt;finish;\n}\n$pm-&gt;wait_all_children;\nprint \"Result: OUTSIDE: $result\";\nprint \"Done\\n\";\n\nsub SSH_Connection {\n    my ( $host, $user, $passwd ) = @_;\n    my $ssh = Net::OpenSSH-&gt;new($host,\n                                user =&gt; $user,\n                                password =&gt; $passwd,\n                                master_opts =&gt; [-o =&gt; \"StrictHostKeyChecking=no\"]\n    );\n    $ssh-&gt;error and die \"Couldn't establish SSH connection: \". $ssh-&gt;error;\n\n    return $ssh;\n}\n\n</code></pre>\n\n<p><code>print \"Result: INSIDE: $result\";</code> Could able to print result one by one. But <code>print \"Result: OUTSIDE: $result\";\n</code> is empty, which should actually have the combined results of <code>$results</code> which has been taken from inside the <code>for</code> loop.</p>\n"}, {"tags": ["perl", "module", "path"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577401316, "post_id": 59494277, "comment_id": 105162599, "body": "Re &quot;<i>translate the double colon <code>::</code> to system path&#39;s separator (UNIX <code>&#47;</code> and WINDOWS <code>\\\\ </code>, if I remember correctly)</i>&quot;, No, <code>&#47;</code> on all systems. <code>&#47;</code> is a perfectly valid path separator in Windows."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1577401461, "post_id": 59494277, "comment_id": 105162632, "body": "<code>use lib &#39;&#47;&#39;</code> would allow you to have modules in the root dir"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1577401590, "post_id": 59494277, "comment_id": 105162656, "body": "@H&#229;kon H&#230;gland, They actually asked to load modules in a subdir of their home dir."}], "answers": [{"comments": [{"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577401859, "post_id": 59494294, "comment_id": 105162709, "body": "If i try <code>use ::home::nickname::dir::DateTime</code>, then <code>Bareword in require must not start with a double-colon</code>. But I will try to <code>use</code> FindBin"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577402122, "post_id": 59494294, "comment_id": 105162751, "body": "Fixed. . . . . ."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1577421383, "last_edit_date": 1577421383, "creation_date": 1577401451, "answer_id": 59494294, "question_id": 59494277, "link": "https://stackoverflow.com/questions/59494277/perl-package-name-can-i-use-path-from-root/59494294#59494294", "title": "perl - package name: Can I use path from root?", "body": "<p>Even if you could load the module like that, you'd have numerous other problems.</p>\n\n<ul>\n<li>The module's <code>package</code> directive would have to be <code>package ::home::nickname::dir::SomeModule;</code> for <code>import</code> to be found.</li>\n<li>You'd have to use <code>::home::nickname::dir::SomeModule-&gt;some_method</code> to call a static method.</li>\n<li>You'd have to use <code>::home::nickname::dir::SomeModule::some_sub</code> to call a sub.</li>\n</ul>\n\n<p>That's obviously the wrong approach.</p>\n\n<p>For modules installed in a position relative to a script, use the following in the script to tell <code>perl</code> where to look:</p>\n\n<pre><code>use FindBin qw( $RealBin );\nuse lib \"$RealBin/../lib\";  # Or whatever.\n</code></pre>\n\n<p>For modules installed for any script to use, use the following environment variable:</p>\n\n<pre><code>export PERL5LIB=\"$HOME/dir\"  # Or whatever.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577403002, "post_id": 59494404, "comment_id": 105162897, "body": "The module <code>lib::relative</code> is similar to <code>FindBin</code> (for my purpose)? Seems, it is, but maybe implementation is different."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 2, "creation_date": 1577403163, "post_id": 59494404, "comment_id": 105162917, "body": "@Herdsman It can be used to achieve a similar task, but FindBin has (currently) unfixable bugs on old Perls and relies on the mutable <code>$0</code> program name rather than current source filename, so I do not recommend it outside of that specific use case. I also recently released <a href=\"https://metacpan.org/pod/Path::This\" rel=\"nofollow noreferrer\">Path::This</a> to replace other uses of FindBin."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577403295, "post_id": 59494404, "comment_id": 105162938, "body": "Ok, I will look at that module as well"}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577403863, "post_id": 59494404, "comment_id": 105163037, "body": "But still don&#39;t get it. If i have my module in current dir and <code>use FindBin qw[$RealBin];use lib &quot;$RealBin&quot;;</code>, And try to use a sub from that module, then <code>Can&#39;t locate object method ...</code>, How it is possible, when I <code>use</code> the <code>$RealBin</code>?"}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577404291, "post_id": 59494404, "comment_id": 105163103, "body": "Correction, I have not <code>use</code> the module as well. But now it works. It is however misleading, when you <code>use</code> to include dir with module, and then <code>use</code> for the module (concrete file) also. There should be another functionality to distinct them."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 1, "creation_date": 1577404536, "post_id": 59494404, "comment_id": 105163153, "body": "@Herdsman These are in fact two very distinct tasks. The first is adding the directory as a location to look for modules, then you have to use modules from that location which would specify what file path within that location to load (this could happen more than once)."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 1, "creation_date": 1577404940, "post_id": 59494404, "comment_id": 105163217, "body": "@Herdsman The distinction is important, because the path added to <code>@INC</code> is not relevant to the module name, but the path appended to each <code>@INC</code> dir to look for a module will match the module name."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577462470, "post_id": 59494404, "comment_id": 105178635, "body": "@Grinzz, but the <code>use</code> func in perldoc, is documented only the case of particular module (that is, particular file path), and not mentioned about including dirs. Why it is not there too?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 1, "creation_date": 1577463566, "post_id": 59494404, "comment_id": 105179081, "body": "@Herdsman This functionality is part of the <a href=\"https://perldoc.pl/functions/require\" rel=\"nofollow noreferrer\">require</a> component so it&#39;s documented there."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1577404768, "last_edit_date": 1577404768, "creation_date": 1577402560, "answer_id": 59494404, "question_id": 59494277, "link": "https://stackoverflow.com/questions/59494277/perl-package-name-can-i-use-path-from-root/59494404#59494404", "title": "perl - package name: Can I use path from root?", "body": "<p>The module namespace is relative to <code>@INC</code> directories only. These are by default set up according to where Perl was installed, with privlib (core modules installed with Perl), sitelib (modules installed by a CPAN client), and vendorlib (modules installed by a vendor package manager), and architecture-specific versions of each of these. Additional <code>@INC</code> directories may be added by <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a>, and before Perl 5.26 <code>@INC</code> also included <code>.</code> (the current working directory), but this was a bad idea.</p>\n\n<p>When you invoke <code>use</code> or <code>require</code> on a bareword package name, it does the translation you described (convert <code>::</code> to path separator and append <code>.pm</code>), and then appends it to each directory in <code>@INC</code> until it finds a file. (It also checks for <code>.pmc</code> but this is rarely relevant.) The package statement inside the file is expected to match the module path used to look it up for the import component of <code>use</code>.</p>\n\n<p>You can modify <code>@INC</code> manually, but it is best to do it with one of the following mechanisms, so that architecture-specific and version-specific subdirectories will be respected if present.</p>\n\n<ul>\n<li><a href=\"https://perldoc.pl/lib\" rel=\"nofollow noreferrer\">lib</a> - <code>use lib '/path/to/lib';</code></li>\n<li><a href=\"https://perldoc.pl/perlrun#-Idirectory\" rel=\"nofollow noreferrer\">-I</a> - <code>perl -I/path/to/lib ...</code></li>\n<li><a href=\"https://perldoc.pl/perlrun#PERL5LIB\" rel=\"nofollow noreferrer\">PERL5LIB</a> - <code>env PERL5LIB=/path/to/lib perl ...</code></li>\n</ul>\n\n<p>These options should only be used to insert absolute paths into <code>@INC</code>, since relative paths will have the same vulnerability as <code>.</code> used to, in that they may mean something different when the current directory is changed. To add a path relative to the script wherever it may be, <a href=\"https://metacpan.org/pod/lib::relative\" rel=\"nofollow noreferrer\">lib::relative</a> can be installed to simplify the process, or its documentation describes equivalent functionality using core modules.</p>\n\n<pre><code>use lib::relative '../lib';\n</code></pre>\n\n<p>Once you have added your custom location(s) to <code>@INC</code>, that directory will be searched first for any further <code>use</code> calls.</p>\n\n<pre><code>use Foo::Bar; # now checks /path/to/lib/Foo/Bar.pm first\n# which should contain package Foo::Bar\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 59494404, "answer_count": 2, "score": 0, "last_activity_date": 1577575442, "creation_date": 1577401172, "last_edit_date": 1577575442, "question_id": 59494277, "link": "https://stackoverflow.com/questions/59494277/perl-package-name-can-i-use-path-from-root", "title": "perl - package name: Can I use path from root?", "body": "<p>I am reading documentation about <code>use</code>. It is the same as </p>\n\n<pre><code>BEGIN{ require Namespace::NameOfModule; }\n</code></pre>\n\n<p>And the perl interpreter loads the module and translate the double colon <code>::</code> to system path's separator (UNIX <code>/</code> and WINDOWS <code>\\\\</code>, if I remember correctly). I just wondered, If I am able to load module from root. Because in that case, for example module <code>DateTime.pm</code> in dir <code>/home/nickname/dir</code>. It would be (according to double colons rule) <code>::home::nickname::dir</code>, which is wrong (like it should even look like terrible package path). So how - if even - is possible to load a module from root dir? And Does the path starts from current dir by default? (That is from dir where is the perl script located in), or only from <code>@INC</code> dirs?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1577393794, "post_id": 59493248, "comment_id": 105160850, "body": "Why not to look in <b>CPAN</b> documentation for the module? <a href=\"https://metacpan.org/pod/IO::File\" rel=\"nofollow noreferrer\">metacpan.org/pod/IO::File</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 1, "creation_date": 1577393817, "post_id": 59493248, "comment_id": 105160858, "body": "@Robert see <a href=\"https://meta.stackexchange.com/questions/17845/etiquette-for-answering-your-own-question\" title=\"etiquette for answering your own question\">meta.stackexchange.com/questions/17845/&hellip;</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1577393879, "post_id": 59493248, "comment_id": 105160878, "body": "@PolarBear it does not list all the acceptable open modes. Coincidentally, <a href=\"https://metacpan.org/pod/File::Open#fopen-FILE\" rel=\"nofollow noreferrer\">File::Open</a> does."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577394114, "post_id": 59493248, "comment_id": 105160933, "body": "@Grinnz -- at least it gives new pointers to continue search for the answer and eventually OP will hit <b>File::Open</b> for perl or direct pointer to <b>ANSI C fopen()</b> which OP should understand as <code>man 3 fopen</code>."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1577393256, "post_id": 59493267, "comment_id": 105160714, "body": "Just wanted to add a link to the <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">perldoc open</a> function."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577421198, "post_id": 59493267, "comment_id": 105165606, "body": "Notably, the <code>b</code> accepted by <code>fopen</code> is not accepted by <code>IO::Handle-&gt;new</code> and <code>IO::File-&gt;new</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577421236, "post_id": 59493267, "comment_id": 105165614, "body": "Feel free to submit a documentation patch :) One shouldn&#39;t have to lookup the documentation for C&#39;s <code>fopen</code>, especially on a non-unix system."}], "tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": true, "score": 2, "last_activity_date": 1577397159, "last_edit_date": 1577397159, "creation_date": 1577392737, "answer_id": 59493267, "question_id": 59493248, "link": "https://stackoverflow.com/questions/59493248/where-are-the-modes-for-iofile-documented/59493267#59493267", "title": "Where are the modes for IO::File documented?", "body": "<blockquote>\n  <p>an ANSI C fopen() mode string (\"w\", \"r+\", etc.), it uses the basic Perl \"open\" operator (but protects any special characters).</p>\n</blockquote>\n\n<p>So in <a href=\"http://man7.org/linux/man-pages/man3/fopen.3.html\" rel=\"nofollow noreferrer\"><code>man 3 fopen</code></a></p>\n\n<blockquote>\n  <p>The  argument  mode  points  to a string beginning with one of the\n         following sequences (possibly followed by  additional  characters,\n         as described below):</p>\n  \n  <ul>\n  <li><p><code>r</code>      Open  text  file  for reading.  The stream is positioned at\n            the beginning of the file.</p></li>\n  <li><p><code>r+</code>     Open for reading and writing.  The stream is positioned  at\n            the beginning of the file.</p></li>\n  <li><p><code>w</code>      Truncate  file to zero length or create text file for writ\u2010\n            ing.  The stream is positioned  at  the  beginning  of  the\n            file.</p></li>\n  <li><p><code>w+</code>     Open  for  reading  and writing.  The file is created if it\n            does not exist, otherwise it is truncated.  The  stream  is\n            positioned at the beginning of the file.</p></li>\n  <li><p><code>a</code>      Open  for  appending (writing at end of file).  The file is\n            created if it does not exist.  The stream is positioned  at\n            the end of the file.</p></li>\n  <li><p><code>a+</code>     Open  for  reading  and appending (writing at end of file).\n            The file is created if it does not exist.  The initial file\n            position  for  reading is at the beginning of the file, but\n            output is always appended to the end of the file.</p></li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59493267, "answer_count": 1, "score": 1, "last_activity_date": 1577397159, "creation_date": 1577392664, "question_id": 59493248, "link": "https://stackoverflow.com/questions/59493248/where-are-the-modes-for-iofile-documented", "title": "Where are the modes for IO::File documented?", "body": "<p>Perl has modes for <code>IO::File</code> like <code>r</code> and <code>w</code>. <strong>Where are these documented?</strong> From <code>perldoc IO::File</code></p>\n\n<pre><code>$fh = IO::File-&gt;new(\"file\", \"r\");\n</code></pre>\n\n<p>I'm looking to find the character that corresponds to the mode to open the file for appending, and create it if it doesn't exist.</p>\n"}, {"tags": ["perl", "signature", "method-signature"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577392478, "post_id": 59493170, "comment_id": 105160522, "body": "<a href=\"https://metacpan.org/pod/File::Open\" rel=\"nofollow noreferrer\">File::Open</a> is an even better wrapper for this case, since it includes error handling."}], "tags": [], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "is_accepted": false, "score": 1, "last_activity_date": 1577392093, "creation_date": 1577392093, "answer_id": 59493170, "question_id": 59493158, "link": "https://stackoverflow.com/questions/59493158/how-can-i-set-a-default-file-handle-in-a-perl-subroutine-signature/59493170#59493170", "title": "How can I set a default file handle in a perl subroutine signature?", "body": "<p>Pending a better answer, I think the only method is to use a wrapper,</p>\n\n<pre><code>use IO::File;                                                              \nsub foo ( $fh=IO::File-&gt;new(\"default_file\", \"w\") ) {                                \n  print $fh 42                                                             \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1577393466, "last_edit_date": 1577393466, "creation_date": 1577392924, "answer_id": 59493291, "question_id": 59493158, "link": "https://stackoverflow.com/questions/59493158/how-can-i-set-a-default-file-handle-in-a-perl-subroutine-signature/59493291#59493291", "title": "How can I set a default file handle in a perl subroutine signature?", "body": "<p>The second attempt you showed is almost valid, you just need another variable to stand in since <code>$fh</code> doesn't exist yet when assigning the default; and to return it in a separate statement from where it's declared. You could abuse global variables to do this of course but that's ugly and leaky.</p>\n\n<pre><code>sub foo ($fh=do { open(my $d,\"&gt;\",\"foo\"); $d } ) {}\n</code></pre>\n\n<p>This of course should have error handling.</p>\n\n<pre><code>sub foo ($fh=do { open(my $d,\"&gt;\",\"foo\") or die \"Failed to open 'foo': $!\"; $d } ) {}\n</code></pre>\n\n<p>A <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2019/11/msg256680.html\" rel=\"nofollow noreferrer\">proposed extension to signatures</a> could be used to do it slightly differently, but I'm not sure if this is any better:</p>\n\n<pre><code>sub foo (?$d, $fh=(open($d,\"&gt;\",\"foo\") || die \"Failed to open 'foo': $!\", $d) ) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577463611, "post_id": 59497310, "comment_id": 105179095, "body": "This may not work if <code>@_</code> is suppressed with signatures enabled in the future."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577472755, "post_id": 59497310, "comment_id": 105182233, "body": "@Grinnz Nah, the pristine <code>@_</code> is one of the main premises here. (Of course that <i>anything</i> can change in an experimental feature but the availability of <code>@_</code> is an important part, since the signature itself isn&#39;t meant to deal with all aspects of argument processing.)  Also, the linked page prominently says &quot;<i>When using a signature, the arguments are still available in the special array variable <code>@_</code>...</i>&quot;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577477221, "post_id": 59497310, "comment_id": 105183576, "body": "Currently yes. I am referring to the <a href=\"https://www.nntp.perl.org/group/perl.perl5.porters/2019/11/msg256681.html\" rel=\"nofollow noreferrer\">proposal to change that</a> (accompanied by the other proposals, which should serve to deal with all aspects of argument processing)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577525331, "post_id": 59497310, "comment_id": 105191427, "body": "@Grinnz Ah well. Thank you for info and the link. I only scanned over (a part of?) the thread but those ideas seem rather complex to me, in particular with implications.  We&#39;ll see of course, but for now I feel OK using prominent properties clearly stated in docs. We understand that this <i>is</i> experimental stuff."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1584759058, "last_edit_date": 1584759058, "creation_date": 1577430831, "answer_id": 59497310, "question_id": 59493158, "link": "https://stackoverflow.com/questions/59493158/how-can-i-set-a-default-file-handle-in-a-perl-subroutine-signature/59497310#59497310", "title": "How can I set a default file handle in a perl subroutine signature?", "body": "<p>Can also cheat, just a little, and use a name-less and value-less <a href=\"https://perldoc.perl.org/perlsub.html#Signatures\" rel=\"nofollow noreferrer\">optional argument</a></p>\n\n<pre><code>use experimental \"signatures\";\n\nsub foo ($=) {\n    my $fh = shift;\n    open $fh, '&gt;', \"foo.txt\" or die $!  if not defined $fh;\n    say $fh 42;\n    return $fh;\n}\n</code></pre>\n\n<p>This fakes it in the sense that it processes arguments \"normally\" (as it would without signatures). However, one of nice things with signatures is that the <code>@_</code> is kept pristine and can also be used</p>\n\n<blockquote>\n  <p>When using a signature, the arguments are still available in the special array variable <code>@_</code>, in addition to the lexical variables of the signature. </p>\n</blockquote>\n\n<p>I don't see a good reason to not use that.<sup>&dagger;</sup> Even as it pushes the argument processing back into the sub's body, you still get other benefits of signatures -- and an added measure of flexibility.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> The stylistic point of handling arguments in the signature, including their defaults, is denied here anyway, merely by how much there is to do for this default.</p>\n"}], "owner": {"reputation": 63855, "user_id": 124486, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/605442f85418d858e2ce1e1aea2092bb?s=128&d=identicon&r=PG", "display_name": "Evan Carroll", "link": "https://stackoverflow.com/users/124486/evan-carroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 59493291, "answer_count": 3, "score": 1, "last_activity_date": 1584759058, "creation_date": 1577392015, "question_id": 59493158, "link": "https://stackoverflow.com/questions/59493158/how-can-i-set-a-default-file-handle-in-a-perl-subroutine-signature", "title": "How can I set a default file handle in a perl subroutine signature?", "body": "<p>I have a subroutine, </p>\n\n<pre><code>use experimental \"signatures\";\n\nsub foo {\n  my $fh = +shift;\n  open ($fh, '&gt;', 'default_file') unless defined $fh;\n}\n</code></pre>\n\n<p>I would like to port that to subroutine signatures. Is it possible to set $fh to default to a filehandle that points to <code>default_file</code>.</p>\n\n<p>Something like this</p>\n\n<pre><code>sub foo ($fh=open($fh,\"&gt;\",foo\")) {}\n</code></pre>\n\n<p>or even with a <code>do{}</code> block,</p>\n\n<pre><code>sub foo ($fh=do { open($fh,\"&gt;\",foo\"), $fh } ) {}\n</code></pre>\n\n<p>I know I can get this syntax if I use or create a wrapper. But it just seems like there should be a way of some sort to get this done without invoking IO::File and the like.</p>\n"}, {"tags": ["perl", "hash", "scope", "slice", "variable-declaration"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1577378880, "post_id": 59491122, "comment_id": 105156558, "body": "That doesn&#39;t make any sense. <code>my</code> declares a variable in that lexical scope (which is the <code>{}</code> visible surrounding it, or the file it&#39;s in otherwise). It cannot declare an arbitrary expression like a hash slice - you need to declare the hash in the appropriate scope first, and then apply a hash slice to it."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1577379543, "post_id": 59491122, "comment_id": 105156774, "body": "thanks, why is needed, to have declared hash first? And - more importantly - in what block, should it be that is - only one block outside ? - in my case in block of package, or even more &#39;outside&#39; (so it become variable of package Main). What is the right depth, of lexical scope"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1577379746, "post_id": 59491122, "comment_id": 105156849, "body": "It&#39;s needed for the same reason you need to declare a hash before assigning to one of its keys, you need to declare lexical variables to create them and then you can use components of them afterward. The correct scope is the smallest scope that still contains everywhere the variable is needed."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1577382953, "post_id": 59491122, "comment_id": 105157908, "body": "Wday should be Mday; Wday is at index 6 and unlikely to be what you want anyway"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1577383193, "post_id": 59491122, "comment_id": 105157990, "body": "There are two primary reasons for declaring lexical variables. The first is so that you can use <code>strict</code> to help you avoid common misspelling or scoping mistakes. The second is to indicate to Perl what the enclosing scope should be for the lexical variable you are declaring. You may be able to perfectly avoid miispellings and scoping oversights (though try as I might, I cannot), but Perl could not guess what scope you want the variable constrained to. And without that, everything is global."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1577400082, "post_id": 59491122, "comment_id": 105162326, "body": "@DavidO but what about not using strict, yet using properly <code>my</code> (at least try to). I know, that you can still make scope mistakes, however you will have more freedom, especially in situations like this one."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1577463717, "post_id": 59491122, "comment_id": 105179141, "body": "@Herdsman Always use strict. The only freedom you gain by not using strict is the freedom to make more mistakes. It does not help in this situation."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1577813861, "post_id": 59491122, "comment_id": 105263024, "body": "@Herdsman, if you need to disable a specific aspect of strict in a small part of code, you can do so.  Your default should be to have it turned up to 11, and then when you need to do something strict dislikes (use a symbolic reference to inject a subroutine with it&#39;s name in a variable, for example).  strict is your friend.  <a href=\"https://perldoc.perl.org/5.30.0/strict.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/5.30.0/strict.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1577391661, "post_id": 59493083, "comment_id": 105160338, "body": "Can you explain your code? Also, I don&#39;t think the different array indexes on the return value from <code>localtime</code> are the problem. (The array indexes,  the <code>uses strict; use warnings;</code>, and white spacing seems to be the only difference between your code and the question&#39;s code). But the OP asked about a compilation time error."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1577391909, "post_id": 59493083, "comment_id": 105160402, "body": "@Rober -- coder can not initialize <i>slice of the hash</i> at it&#39;s declaration! The hash should be declared <code>my %h;</code> and only after that it can be initialized. <code>use strict; use warnings;</code> often help to find abnormalities in code which potentially lead to errors. OP tried to save in <code>$h[Wday] = $mday</code>."}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 1, "creation_date": 1577392117, "post_id": 59493083, "comment_id": 105160447, "body": "(Please <a href=\"https://stackoverflow.com/posts/59493083/edit\">edit</a> your answer instead of adding comments; comments may or may not be shown.) I agree on the <code>use strict; use warnings;</code>, but they don&#39;t make a difference for me when I try to run the OP&#39;s code. He already mentioned that it works when he removed <code>my</code>. So I don&#39;t see what your answer adds, especially cause the question was about a <i>compiler error</i>, not about getting the wrong week day from <code>localtime</code>. That was my question."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1577392746, "post_id": 59493083, "comment_id": 105160583, "body": "@Robert -- although <code>use strict; use warnings;</code> did not change much in this case but it is a good practice. <code>use diagnostics;</code> does code compilation more descriptive on an errors."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577399778, "post_id": 59493083, "comment_id": 105162254, "body": "@PolarBear - also - why would you declare the hash <code>%h</code> in sub block, and not to upper block - package&#39;s block? I thought, once the sub is done, no data on stack will remain, but maybe, I do not even need the hash after that anymore, so it doesn&#39;t matter really."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577400113, "post_id": 59493083, "comment_id": 105162331, "body": "@Herdsma -- well this question should be directed to OP. I just indicated what caused compilation error -- from original post is not clear how hash will be used, inside <b>AUTOLOAD</b> sub or on <b>package</b> level."}, {"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577400220, "post_id": 59493083, "comment_id": 105162364, "body": "@PolarBear I admit, I haven&#39;t mentioned, I will edit. Hash Will be used inside <code>autoload</code>. Anyway still is not answer to scoping problem."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577401232, "post_id": 59493083, "comment_id": 105162575, "body": "@Herdsman <code>my %h; @h{qw[Wday Month Year]} = (localtime)[6,4,5];</code> is not what you desire? Otherwise I do not understand your question. What variable scope are you looking for %h hash?"}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": 1, "last_activity_date": 1577392812, "last_edit_date": 1577392812, "creation_date": 1577391406, "answer_id": 59493083, "question_id": 59491122, "link": "https://stackoverflow.com/questions/59491122/perl-hash-slices-cannot-be-lexically-scoped/59493083#59493083", "title": "Perl: Hash slices cannot be lexically scoped", "body": "<p>I hope that you will see your mistakes from following piece of code</p>\n\n<pre><code>use strict;\nuse warnings;\nuse diagnostics;\n\nuse v5.20;\n\npackage MyDate;\n\nsub new{ bless {}, shift; }\n\nsub AUTOLOAD{\n    my $f = our $AUTOLOAD;\n    #my %h;               # !!! without hash declaration compilation error\n    #     0    1    2     3     4    5     6     7     8\n    #my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) =\n    #                                            localtime(time);\n    @h{qw[Wday Month Year]} = (localtime)[6,4,5];\n}\n</code></pre>\n\n<p>perl hash_package.pl</p>\n\n<pre><code>Global symbol \"%h\" requires explicit package name (did you forget to declare \"my %h\"?) at hash_package.pl line 15.\nExecution of hash_package.pl aborted due to compilation errors (#1)\n    (F) You've said \"use strict\" or \"use strict vars\", which indicates\n    that all variables must either be lexically scoped (using \"my\" or \"state\"),\n    declared beforehand using \"our\", or explicitly qualified to say\n    which package the global variable is in (using \"::\").\n\nUncaught exception from user code:\n        Global symbol \"%h\" requires explicit package name (did you forget to declare \"my %h\"?) at hash_package.pl line 15.\n        Execution of hash_package.pl aborted due to compilation errors.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577401387, "post_id": 59494272, "comment_id": 105162616, "body": "I do not understand <code>top level</code> neither <code>file level</code>, are you trying to say, to rather use regular subrutines, then load them from <code>autoload</code> afterwards?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "edited": false, "score": 0, "creation_date": 1577401729, "post_id": 59494272, "comment_id": 105162687, "body": "<code>package Foo; use strict; use warnings; sub foo { ... } insert_code_to_run_on_load_here; 1</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1577401101, "creation_date": 1577401101, "answer_id": 59494272, "question_id": 59491122, "link": "https://stackoverflow.com/questions/59491122/perl-hash-slices-cannot-be-lexically-scoped/59494272#59494272", "title": "Perl: Hash slices cannot be lexically scoped", "body": "<p><code>@h{...}</code> is not a variable, so you can't declare it as such.</p>\n\n<p><code>@h{...} = ...;</code> sets elements of <code>%h</code>. So it's <code>%h</code> you need to create.</p>\n\n<p>This is done as follows:</p>\n\n<pre><code>my %h;\n</code></pre>\n\n<hr>\n\n<p>By the way, I doubt you have a legitimate reason for using <code>AUTOLOAD</code>. Keep in mind that code at the top level (at the file level) of a module will be executed when the module is first loaded in an interpreter.</p>\n"}, {"tags": [], "owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "is_accepted": false, "score": 0, "last_activity_date": 1577817144, "creation_date": 1577817144, "answer_id": 59547483, "question_id": 59491122, "link": "https://stackoverflow.com/questions/59491122/perl-hash-slices-cannot-be-lexically-scoped/59547483#59547483", "title": "Perl: Hash slices cannot be lexically scoped", "body": "<p>This is just a big WAG at what the OP is trying to do.  So it's a pretty crappy SO answer according to site conventions, but I think it might help unmuddy the waters for our suffering OP.</p>\n\n<p>I'm going to start with the code the OP posted, comment a bit on it, and then move to several examples of the \"right way to do it\". </p>\n\n<p>OP's code:</p>\n\n<pre><code>#!/usr/bin/perl\n</code></pre>\n\n<p>So we're running a script.</p>\n\n<pre><code>use v5.20;\n</code></pre>\n\n<p>With version 5.20 or better. So far, so good.</p>\n\n<pre><code>package MyDate;\n</code></pre>\n\n<p>Now we've selected a new namespace/package called <code>MyDate</code>.  While this isn't illegal, it is generally considered desirable to have one package per file.</p>\n\n<pre><code>sub new{ bless {}, shift; }\n</code></pre>\n\n<p>We have a constructor.  So <code>MyDate</code> is going to be a class.  Maybe worth looking at Moose or Moo for help with automating some of the boring crap with class construction.  But there isn't anything wrong with using good, ole' classical Perl objects.</p>\n\n<pre><code>sub AUTOLOAD{\n    my $f = our $AUTOLOAD;\n    my @h{qw[Wday Month Year]} = (localtime)[3,4,5];\n}\n</code></pre>\n\n<p>The syntax error, the source of all pain.  <code>AUTOLOAD</code> is called to handle any unknown function calls in the namespace.  So, this in-effect, intercepts all undefined method calls.  MyDate has an infinite list of methods.  It's probably not what is really needed.</p>\n\n<p>Let's rework things a bit:</p>\n\n<p>Here's my guess at the sort of thing the OP may want in their script file:</p>\n\n<pre><code>#!/usr/bin/perl\nuse v5.20;\nuse strict;    # Make life easier by catching bugs at compile time.\nuse warnings;  # Catch things that probably indicate errors, but aren't technically illegal.\n\nuse MyDate;    # Load my date class\n\n# Make some dates\nmy $today = MyDate-&gt;new();\nmy $aprilish = MyDate-&gt;new( month =&gt; 4 );\n\n# Do stuff with them!\nprint_date( $today );\nprint_date( $aprilish );\n\nsub print_date {\n    my ($date) = @_;\n\n    say \"Weekday: \", $date-&gt;wday();\n    say \"Month: \", $date-&gt;month();\n    say \"Year: \", $date-&gt;year();\n}\n</code></pre>\n\n<p>Library File:  MyDate.pm</p>\n\n<pre><code>package MyDate;\n\nuse v5.20;     # Set the minimum perl version required. Optional, but useful.\nuse strict;    # Always\nuse warnings;\n\nsub new {\n    my ($class, %parts) = @_;\n\n    my %defaults; @defaults[wday month year] = localtime(3, 4, 5)\n    my $self = bless {\n        %defaults,\n    }, $class;\n\n    for my $part ( qw/ month wday year /) {\n        next unless exists $parts{$part};\n\n        $self-&gt;$part( $parts{$part} );  # Call the associated method to initialize an attribute.\n        delete $parts{$part};\n    }\n\n    die \"Unknown attributes: \", join ', ', keys %parts  # Fatal error on unknown args\n        if %parts;\n\n    return $self;\n}\n\n# The other methods are mostly identical.\nsub month {\n    my ($self, $value) = @_;\n\n    if ( @_ == 2 ) {  # If two args are passed, we are a setter.\n        $self-&gt;{month} = $value;\n    }\n\n    return $self-&gt;{month};\n}\n</code></pre>\n\n<p>That's a classical perl OO version of something like the OP is going for, I think.</p>\n\n<p>It's a lot less hassle to write with <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow noreferrer\">Moo</a>.</p>\n\n<pre><code>package MyDate;\n\nuse v5.20;     # Set the minimum perl version required. Optional, but useful.\nuse Moo;       # Turns on strict and warnings;\nuse namespace::autoclean;  # Removes any utility functions so they don't show up as methods.    \n\nhas 'month' =&gt; (\n  is =&gt; 'ro',\n  builder =&gt; 1,\n);\n\nhas 'wday' =&gt; (\n  is =&gt; 'ro',\n  builder =&gt; 1,\n);\n\nhas 'year' =&gt; (\n  is =&gt; 'ro',\n  builder =&gt; 1,\n);\n\nsub _build_month { localtime()[4] }\nsub _build_wday { localtime()[3] }\nsub _build_year { localtime()[5] }\n</code></pre>\n\n<p>But probably the best thing to do would be to take an existing date manipulation library like <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> and use it.</p>\n\n<pre><code>#!/usr/bin/perl\nuse v5.20;\nuse strict;    # Make life easier by catching bugs at compile time.\nuse warnings;  # Catch things that probably indicate errors, but aren't technically illegal.\n\nuse DateTime;    # Load my date class\n\n# Make some dates\nmy $today = DateTime-&gt;today();\nmy $aprilish = DateTime-&gt;today()-&gt;set_month( 4 );\n\n# Do stuff with them!\nprint_date( $today );\nprint_date( $aprilish );\n\nsub print_date {\n    my ($date) = @_;\n\n    say \"Weekday: \", $date-&gt;day_of_week();\n    say \"Month: \", $date-&gt;month();\n    say \"Year: \", $date-&gt;year();\n}\n</code></pre>\n\n<p>Anyhow, I hope that all this is useful to the OP, and maybe, just maybe, to someone else.</p>\n"}], "owner": {"reputation": 609, "user_id": 11143545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617c9145bb039f1defedce54b28e89b3?s=128&d=identicon&r=PG&f=1", "display_name": "Herdsman", "link": "https://stackoverflow.com/users/11143545/herdsman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 59494272, "answer_count": 3, "score": 2, "last_activity_date": 1577817144, "creation_date": 1577378644, "last_edit_date": 1577553603, "question_id": 59491122, "link": "https://stackoverflow.com/questions/59491122/perl-hash-slices-cannot-be-lexically-scoped", "title": "Perl: Hash slices cannot be lexically scoped", "body": "<p>I have really no idea, why this is wrong:</p>\n\n<pre><code>#!/usr/bin/perl\nuse v5.20;\npackage MyDate;\nsub new{ bless {}, shift; }\nsub AUTOLOAD{\n    my $f = our $AUTOLOAD;\n    my @h{qw[Wday Month Year]} = (localtime)[3,4,5];\n}\n</code></pre>\n\n<p>Err:compilation error near <code>\"@h{\"</code></p>\n\n<hr>\n\n<p>If I delete <code>my</code> (or even if package-scoped with <code>our</code>):</p>\n\n<pre><code>@h{qw[Wday Month Year]} = (localtime)[3,4,5];\n</code></pre>\n\n<p>It will magically works. Why cannot be hash slices lexically scoped?</p>\n\n<p>Edit: Yes - I have not noticed, that <code>(localtime)[3] = mday</code> not wday. But that is not the point. I am asking about the scope, not localtime func.</p>\n\n<p>Edit2: The hash <code>%h</code> (the point of my question), is intended to be used inside the <code>autoload</code> sub (well, of course when I am trying to use it as hash slice there). Just for clarity.</p>\n"}, {"tags": ["performance", "perl", "mechanize"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1577379530, "post_id": 59491078, "comment_id": 105156768, "body": "I would create a database (perhaps even SQLite) where you store the names of the files you&#39;ve downloaded. Instead of searching the file system, just do a database query instead."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 3, "creation_date": 1577380620, "post_id": 59491078, "comment_id": 105157163, "body": "Why not simply use a directory name based on the file name, i.e. something like <code>substr($lines[$counter],0,3)</code>? Then it is again checking only a single location and not checking through lots of directories. If all the names are too similar and thus would end up in only few directories you could also use something like <code>substr(Digest::SHA::sha1_hex($lines[$counter],0,5))</code> as directory name. And to avoid a race don&#39;t check and then create but instead use <code>sysopen($fh,$name,O_CREAT|O_EXCL|O_RDWR)</code> which fails if the file is already there."}, {"owner": {"reputation": 181, "user_id": 4157131, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ae59192b276cb10e4c0dc1162bd73404?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer4Life", "link": "https://stackoverflow.com/users/4157131/programmer4life"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1577380874, "post_id": 59491078, "comment_id": 105157268, "body": "@SteffenUllrich wow that&#39;s brilliant. Thank you for that, I would have never come up with something that simple."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1577381035, "post_id": 59491078, "comment_id": 105157327, "body": "@Programmer4Life: The idea is actually old. Many years ago when NNTP (Usenet) was a hot thing and file systems did not scale well with many directory entries, this was the way the messages were spread over 1000s of directories with multiple hierarchies for faster access to a specific message."}, {"owner": {"reputation": 181, "user_id": 4157131, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ae59192b276cb10e4c0dc1162bd73404?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer4Life", "link": "https://stackoverflow.com/users/4157131/programmer4life"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1577381168, "post_id": 59491078, "comment_id": 105157366, "body": "@SteffenUllrich well I would not have come up with that, so thank you? Do you have any tips on how to come up with simple solutions? It&#39;s a larger problem I have as a developer. I will come up with some complicated solution and miss the obvious answer in front of me."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1577381303, "post_id": 59491078, "comment_id": 105157417, "body": "@Programmer4Life: be curious what others do, read, and of course simply get experience :)"}, {"owner": {"reputation": 181, "user_id": 4157131, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ae59192b276cb10e4c0dc1162bd73404?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer4Life", "link": "https://stackoverflow.com/users/4157131/programmer4life"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1577381341, "post_id": 59491078, "comment_id": 105157424, "body": "@SteffenUllrich trying to delete a local copy of the 3 million HTML file folder actually crashed my Mac, which is a new 2019 model. Wouldn&#39;t boot after that and I had to boot into single user mode and remove it from ~/.Trash so my Mac would boot. Windows didn&#39;t perform much better, Explorer froze when I accidentally clicked on the folder. I think it&#39;s safe to say that this use case still isn&#39;t handled well in OS&#39;s!"}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1577383381, "post_id": 59491078, "comment_id": 105158050, "body": "You are looking for a solution to a problem that you yourself are creating when you shuffle the download list. Partition the list sanely, even if it&#39;s just a <code>mod</code> rotation, and you no longer need to worry that another process already downloaded a file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1577386225, "post_id": 59491078, "comment_id": 105158894, "body": "So once you break it up into 300 subdirs, each will have around 10K files ... what&#39;s wrong with <code>sysopen</code> then (as @SteffenUllrich showed you)? From what I remember system&#39;s handling of directories starts slowing down once there&#39;s hundreds of thousands of entries.  Besides, that&#39;s the only thing you can do, really; any file checks suffer from a race condition with concurrent downloads, whereby the &quot;newer&quot; file (in micro seconds) would <i>quietly</i> overwrite the &quot;older&quot; one (more likely with <code>-s</code> then with <code>-e</code>)"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1577391046, "post_id": 59491078, "comment_id": 105160200, "body": "Well it is not obvious why you do something like what you do. May be you need to look into <a href=\"https://en.wikipedia.org/wiki/Rsync\" rel=\"nofollow noreferrer\">rsync</a> instead. Now about potential problems -- access is slow if number of files in a directory goes into thousands, you can have a problem with a command as <code>rm *</code> -- shell will attempt to expand <code>*</code> and will run out of <b>memory</b> allocated for <i>exansion of glob</i>, potentially you can run out of <b>inodes</b> on your <i>filesystem</i> (very unlikely with normal use but your case is abnormal)."}], "owner": {"reputation": 181, "user_id": 4157131, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ae59192b276cb10e4c0dc1162bd73404?s=128&d=identicon&r=PG&f=1", "display_name": "Programmer4Life", "link": "https://stackoverflow.com/users/4157131/programmer4life"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1577379236, "creation_date": 1577378409, "last_edit_date": 1577379236, "question_id": 59491078, "link": "https://stackoverflow.com/questions/59491078/how-can-i-efficiently-check-if-a-file-exists-in-multiple-subdirectories-in-perl", "title": "How can I efficiently check if a file exists in multiple subdirectories in perl?", "body": "<p>I have a single directory with 3 million small (~10k each in size) HTML files downloaded using WWW::Mechanize. This is not practical for obvious reasons. However, the reason why I have it this way is that my perl downloader script checks the directory to see if the file exists before downloading. If the file exists, the downloader skips to the next line. If not, download. I'm running around 10 download tasks simultaneously, each with a shuffled version of the download list, so checking is critical.</p>\n\n<p>I am going to break the files up into around 300 subdirectories. I don't know exactly how many yet, because it will be broken up based on the first 3 letters of the filenames. So my question is what would be the most <strong>efficient</strong> way (and how) to write a search function in the perl downloader file that checks every subdirectory? I'd like to do this so it doesn't spend an insane amount of time checking.</p>\n\n<p>This is what my search function looks like right now for checking if the file exists in the single directory. If anyone can help me update the function, I'd much appreciate it. I'm not really fluent in perl (my download script was already written, I just added the file check), which is why I'm asking.</p>\n\n<pre><code>######setup\nmy $file = \"s5.txt\";\nopen(my $fh, \"&lt;\", \"$file\") or die \"Unable to open &lt; $file: $!\";\nmy @lines = &lt;$fh&gt;;\nmy $counter = 0;\nchomp(@lines);\nclose $fh;\nmy $size = @lines;\n\n#####loop that's running\nwhile( $counter &lt; $size)  {   \n\n\n########checker, part I need help with\nmy $filename = \"/var/www/mydownloader/data/downloads/$lines[$counter].html\";\n\nif (-s $filename) {\nprint \"the file exists. Skipping\\n\";\n} else {\nprint \"the file does not exist! Downloading! \\n\";\n\n#....... download stuff\n\n}\n</code></pre>\n"}, {"tags": ["perl", "parsing", "command", "argv"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577346215, "post_id": 59485244, "comment_id": 105145980, "body": "You want help parsing shell commands, and you don&#39;t even specify for which shell?"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1577356666, "post_id": 59485244, "comment_id": 105149241, "body": "Your question is not clear. Do you need <b>obtain</b> the arguments inside perl script itself without it&#39;s execution? Or you have some <b>shell script</b> which runs this commands in sequence and you want to extract these arguments from this <b>shell script</b>?"}, {"owner": {"reputation": 1, "user_id": 2322313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f405817624670b95ac2c4e2ba27b87?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2322313/anonymous"}, "reply_to_user": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1577681284, "post_id": 59485244, "comment_id": 105222377, "body": "@PolarBear yes I need to get the arguments of a given perl script without execution. i.e given a perl script get the ARGV of the script without actually executing(perl scriptone.pl --option1 PRODUCTION 100 , if i give this, it should return argv as PRODUCTION,100)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1577691281, "post_id": 59485244, "comment_id": 105224758, "body": "@Anonymous So you are not interested in executing <code>scriptone.pl</code>? You simply want to parse the <b>string</b>: <code>&quot;perl scriptone.pl --option1 PRODUCTION 100&quot;</code> to extract the text following the sub pattern <code>--option1</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2322313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f405817624670b95ac2c4e2ba27b87?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2322313/anonymous"}, "edited": false, "score": 0, "creation_date": 1577347943, "post_id": 59485380, "comment_id": 105146386, "body": "issue is sometimes command will be like &#39;perl scriptone.pl PROD 101 --option1 --option2 232&#39;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 2322313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f405817624670b95ac2c4e2ba27b87?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2322313/anonymous"}, "edited": false, "score": 0, "creation_date": 1577348415, "post_id": 59485380, "comment_id": 105146513, "body": "Updated my answer. (I&#39;m not going to guess how <code>scriptone.pl</code> extracts the desired value from <code>@ARGV</code> since it clearly accepts unusual patterns.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1577348407, "last_edit_date": 1577348407, "creation_date": 1577346035, "answer_id": 59485380, "question_id": 59485244, "link": "https://stackoverflow.com/questions/59485244/parsing-the-perl-script-commands-and-get-the-argv/59485380#59485380", "title": "Parsing the Perl script command(s) and get the ARGV", "body": "<p>For commands similar to the specific shell commands you posted, you can start with following:</p>\n\n<pre><code>@ARGV = split ' ', $cmd;\nsplice @ARGV, 0, 2;\n</code></pre>\n\n<p>From there, you can extract the values from <code>@ARGV</code> using the same code that <code>scriptone.pl</code> does.</p>\n"}], "owner": {"reputation": 1, "user_id": 2322313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44f405817624670b95ac2c4e2ba27b87?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2322313/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577681345, "creation_date": 1577345230, "last_edit_date": 1577681345, "question_id": 59485244, "link": "https://stackoverflow.com/questions/59485244/parsing-the-perl-script-commands-and-get-the-argv", "title": "Parsing the Perl script command(s) and get the ARGV", "body": "<p>I have around 100 different scripts and command will look like below</p>\n\n<ol>\n<li>perl scriptone.pl --option1 PRODUCTION 100</li>\n<li>perl scripttwo.pl --option1 UAT 101</li>\n<li>perl scriptthree.pl --option1 TESTING 102</li>\n</ol>\n\n<p>I need to get the ARGV (PRODUCTION,100 for 1, UAT,101 for 2) of all the above script without executing perl script. </p>\n\n<p>Is there a way to get the ARGV using SHELL script or using anyother perl options?</p>\n"}, {"tags": ["file", "perl", "count"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1577341822, "post_id": 59484393, "comment_id": 105144796, "body": "Open the output files, storing the handles in an array.  Step through the input file, writing each line to the appropriate file based on the array.  Keep going until finished.  Note that you don&#39;t need to know how big the input file is (how many lines it contains); you only need to know how many output files you want."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1577342153, "post_id": 59484393, "comment_id": 105144881, "body": "Also, you should avoid the old-fashioned <code>NODE_FILE</code> style of file handles and use lexically scoped file handles: <code>open my $fh, &quot;&lt;&quot;, $node_file or die;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1577349737, "post_id": 59484393, "comment_id": 105146910, "body": "To check what need be done when number of files to write doesn&#39;t evenly divide number of lines: for 10 lines to break into 3 files do you need lines per file as 4-4-2 or 4-3-3 ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1577350218, "post_id": 59484393, "comment_id": 105147069, "body": "@zdim, Or put differently, if there were 5 hosts and 26 nodes, 6-5-5-5-5 or 6-6-6-6-2? (Personally, I don&#39;t see how the latter is close to the &quot;equal&quot; the OP requested. But I&#39;ll give you the benefit of the doubt for now)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577350398, "post_id": 59484393, "comment_id": 105147114, "body": "@ikegami Yes, an even better example.  While they do indeed say &quot;equal number of parts&quot; (what I missed at first), that&#39;s a little thin for a spec so I asked for confirmation."}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1577350622, "post_id": 59484393, "comment_id": 105147177, "body": "@zdim : As per the calculation if there are 10 elements put into 3 files then 10/3=3. Eventually 4-3-3 is good to go."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1577350903, "post_id": 59484393, "comment_id": 105147266, "body": "vinodk89, I think @zdim is interested in knowing if 4-4-2 is also acceptable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1577352589, "post_id": 59484393, "comment_id": 105147828, "body": "&quot;<i>4-3-3 is good to go</i>&quot; -- thank you, I&#39;ve edited my post to account for that. (I still leave the 4-4-2 code upfront in case that it is perhaps as good for your purpose.  If that 4-4-2 split is in fact useless I&#39;ll edit again)"}], "answers": [{"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577346271, "post_id": 59485039, "comment_id": 105145993, "body": "Thank you. What if I have odd number of lines in input node file? Ex:If I have 11 nodes in input files and needed to put in 6 files (2 in each) and the final one should contain 1 node. Is it possible here?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577347587, "post_id": 59485039, "comment_id": 105146289, "body": "Please avoid needlessly using global vars (<code>NODE_FILE</code>, <code>OUT</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577347596, "post_id": 59485039, "comment_id": 105146293, "body": "Please avoid needlessly using 2-arg <code>open</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577347661, "post_id": 59485039, "comment_id": 105146318, "body": "There&#39;s no need to <code>chomp</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1577347932, "post_id": 59485039, "comment_id": 105146382, "body": "More importantly, it only works if there are exactly 5 or 6 nodes in the input file. (4 does 2/2/0 instead of 2/1/1, and 7 does 2/2/2 instead of 3/2/2.)"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577350641, "post_id": 59485039, "comment_id": 105147183, "body": "@ikegami -- works fine for 11 lines in the input file, creates 6 files [5 files with 2 lines and last with 1 line only]. (NODE_FILE, OUT) -- I am old school, I did look into doc for <b>open</b> and indeed it is not recommended. If <b>chomp</b> isn&#39;t used  then <b>Dumper(@nodes)</b> prints extra <b>&quot;\\n&quot;</b> in it&#39;s output, and in output files between each line will be an empty line. Does such output matches desired by author?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577350679, "post_id": 59485039, "comment_id": 105147192, "body": "It should only create 3 files. The number of file to create is the fixed part (since the number of hosts is fixed), not the number of lines per file. (Sorry, the last comment described the problem incorrectly, but the problem is real.)"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577350778, "post_id": 59485039, "comment_id": 105147227, "body": "@vinodk89 -- Is it difficult to add a few lines into input file and see what will be outcome? Do not afraid to experiment and observe what will be the result -- it is first rule of science <b>observe/experiment and learn</b>."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "edited": false, "score": 0, "creation_date": 1577350907, "post_id": 59485039, "comment_id": 105147270, "body": "Does original post states that there should be only 3 output files? Does it states what content is for <b>@list_of_ips</b>. I can not read the mind of poster and I have to improvise to show working code."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577353238, "post_id": 59485039, "comment_id": 105148051, "body": "@vinodk89 -- I have adjusted code to include <b>hosts to distribute between</b>. In future try to describe a problem in such way that would be easy to understand."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577353417, "post_id": 59485039, "comment_id": 105148123, "body": "@ikegami -- I had to use <b>say {$out} $node_name;</b> to printout into a file! I would say it is quite <b>strange</b> way. For me did not work <b>say $fh $node_name;</b> nor <b>say $fh, $node_name</b>. And I came across following <code>To use FILEHANDLE without a LIST to print the contents of $_ to it, you must use a bareword filehandle like FH , not an indirect one like $fh .</code> -- <a href=\"https://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/say.html</a>"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577353516, "post_id": 59485039, "comment_id": 105148160, "body": "@ikegami -- perl -V Summary of my perl5 (revision 5 version 30 subversion 0)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577353517, "post_id": 59485039, "comment_id": 105148161, "body": "That just means you can&#39;t use <code>say $fh;</code> to mean <code>say $fh $_;</code>, but you can most definitely use <code>say $fh $_;</code>. (<code>perl -e&#39;use feature qw( say ); $_=&quot;abc&quot;; my $fh = \\*STDOUT; say; say STDOUT; say $fh; say $fh $_;&#39;</code>)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577353720, "post_id": 59485039, "comment_id": 105148227, "body": "(Please use backticks for code, but doubled asterisks.)"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577353736, "post_id": 59485039, "comment_id": 105148233, "body": "@ikegami -- <a href=\"https://metacpan.org/pod/Perl6::Say\" rel=\"nofollow noreferrer\">metacpan.org/pod/Perl6::Say</a> -- Section <b>BUGS AND IRRITATIONS</b> Perl 5 can not reproduce with <b>say</b> feature of <b>print</b> (look at the bottom)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577353788, "post_id": 59485039, "comment_id": 105148252, "body": "Ok, I thought you were talking about the <code>say</code> operator. You even linked to the <code>say</code> operator in the initial comment. Why are you suddenly talking about some sub in some CPAN module?"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577354052, "post_id": 59485039, "comment_id": 105148338, "body": "@ikegami -- I only started to use <code>say</code> and attempted to output into a file, right away it produced an empty file. Hmm, why is that? Started to read documentation and found that in my case I had to use <code>say {$fh} $data;</code> to direct data into a file. Now I each new perl script have to add <code>use feature &#39;say&#39;</code> (annoyance), and how to print data without <code>&quot;\\n&quot;</code> added?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577354487, "post_id": 59485039, "comment_id": 105148460, "body": "Re &quot;<i>Started to read documentation and found that in my case I had to use <code>say {$fh} $data;</code> to direct data into a file.</i>&quot;, Again, no. That&#39;s not what the passage says (since the usage does provide something for <code>LIST</code>). See my earlier comment for more details."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577354551, "post_id": 59485039, "comment_id": 105148487, "body": "Re &quot;<i>Now I each new perl script have to add use feature &#39;say&#39; (annoyance), and how to print data without &quot;\\n&quot; added?</i>&quot;, Or <code>use v5.10;</code> or <code>use MyCustom;</code> or use <code>CORE::say</code> (5.12+). But yes. For backwards compatibility reasons."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577354993, "post_id": 59485039, "comment_id": 105148627, "body": "@ikegami -- in my case <code>use feature &#39;say&#39;;</code> was not in the code, but <code>use Data::Dumper;</code>. The <code>say</code> in the code did not produce any error or warning -- as result output files was empty. Currently I tested with <code>use feature &#39;say&#39;;</code>, files got directed into them content. How should be considered such situation as it created some confusion?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577355328, "post_id": 59485039, "comment_id": 105148742, "body": "Please provide a minimal, runnable demonstation of the problem.  ...Not in the comments, but <a href=\"https://stackoverflow.com/questions/ask\">here</a>"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577355503, "post_id": 59485039, "comment_id": 105148810, "body": "@ikegami -- I tested with a minimal code and the error did not manifested itself. Ok, will try do it on original code (code for this question) and if the problem manifest itself I will submit new <code>say</code> related question."}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577355840, "post_id": 59485039, "comment_id": 105148939, "body": "@ikegami -- I guess that it might be partially my mistake. I tried different variations and for sure <code>say $fh, $data;</code> does not store data in a file. I tried <code>say $fh $data</code> with out <code>use feature &#39;say&#39;;</code> but with <code>use Data::Dumper;</code> and the files was empty. Currently I did the same and files obtain their content -- I am puzzled as I did not change anything else. Hmm?"}, {"owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1577355942, "post_id": 59485039, "comment_id": 105148978, "body": "@ikegami -- It would be nice if the doc page for <code>say</code> included an example with indirect filehandle <code>$fh</code>. <a href=\"https://perldoc.perl.org/functions/say.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/say.html</a>"}], "tags": [], "owner": {"reputation": 4234, "user_id": 12313309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3fPDo.jpg?s=128&g=1", "display_name": "Polar Bear", "link": "https://stackoverflow.com/users/12313309/polar-bear"}, "is_accepted": false, "score": -1, "last_activity_date": 1577355115, "last_edit_date": 1577355115, "creation_date": 1577344082, "answer_id": 59485039, "question_id": 59484393, "link": "https://stackoverflow.com/questions/59484393/split-file-by-equal-parts-based-on-count/59485039#59485039", "title": "Split file by equal parts based on count", "body": "<p>Perhaps following code comply with your requirements</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse feature 'say';\n\nuse Data::Dumper;\n\nmy $debug = 1;                          # $debug = 1 -- debug mode\n\nmy $node_file = \"node_list.txt\";        # input filename\n\nmy @hosts = qw(host_ip1 host_ip2 host_ip3); # Hosts to distribute between\n\nmy $num_hosts = @hosts;                 # Number of hosts to distribute between\n\nopen(my $fh, \"&lt;\", $node_file) \n        or die \"can't open $node_file: $!\";\n\nmy @nodes =  &lt;$fh&gt;;                     # read input lines into @nodes array\n\nchomp @nodes;                           # trim newline from each element @nodes array\n\nclose $fh;\n\nprint Dumper(\\@nodes) if $debug;        # print @nodes content in debug mode\n\nmy $count = @nodes;                     # count number nodes in @nodes array\n\nprint \"COUNT: $count lines in the input file\\n\";\n\n# How many lines store in out files\nmy $lines_in_file = int($count/$num_hosts + 0.5);\n\nmy $lines_out   = $lines_in_file;       # how many line to output per file\nmy $file_index  = 1;                    # index for output filenames\nmy $filename    = \"node_list_file_${file_index}.txt\";\n\n# open OUT file\nopen(my $out, \"&gt;\", $filename)\n        or die \"Couldn't open $filename\";\n\nforeach my $node_name (@nodes) {        # process each element of @nodes array\n    say $out $node_name;                # store node in OUT file\n\n    $lines_out--;                       # decrease number of left lines for output\n\n    if( $lines_out == 0 ) {             # all lines per file stored\n        close $out;                     # close file\n\n        $lines_out = $lines_in_file;    # reinitialize number of lines for output\n\n        $file_index++;                  # increase index for filename\n        $filename = \"node_list_file_${file_index}.txt\";\n\n        open($out, \"&gt;\", $filename)      # open new OUT file\n            or die \"Couldn't open $filename\";\n    }\n}\n\nclose $out;                             # close OUT file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577347926, "post_id": 59485470, "comment_id": 105146379, "body": "Thank you @ikegami. So, in your first solution I should store all the input file line contents to <code>@lines</code>. In second solution can you pls elaborate what this condition means <code>$fhs[ ( $. - 1 ) % @fhs ]-&gt;print($_) while &lt;&gt;;</code> and how can I take input file?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577348103, "post_id": 59485470, "comment_id": 105146433, "body": "<code>&lt;&gt;</code> is short for <code>&lt;ARGV&gt;</code>, which is short for <code>readline(ARGV)</code>, and <code>ARGV</code> is a special handle that reads from the files whose paths are in <code>@ARGV</code>, or from <code>STDIN</code> if <code>@ARGV</code> is empty. In short, it acts like virtually every unix program (e.g., <code>cat</code>, <code>grep</code>, etc) Feel free to use a different handle."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577349084, "post_id": 59485470, "comment_id": 105146709, "body": "... and <code>while &lt;&gt;</code> is short for <code>while defined($_ = &lt;&gt;)</code>"}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577704667, "post_id": 59485470, "comment_id": 105229447, "body": "In both the cases, if we mention <code>$num_buckets = 3;</code> then it will create 3 files obviously. But what if I have only 2 lines of data in <code>node_list.txt</code> say <code>nod_1</code>  <code>node_2</code> and it should create 2 files only? Since its been creating 3rd file too with empty data in it. How to avoid it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577738222, "post_id": 59485470, "comment_id": 105242758, "body": "Using the first approach, simply check if the number of lines to print is zero. /// Using the second, it&#39;s a bit more complicated. You&#39;d have to delay creating the file until it&#39;s needed. You&#39;d use something like <code>$fh[$i] &#47;&#47;= do { ... };</code> in the loop."}, {"owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "edited": false, "score": 0, "creation_date": 1577771554, "post_id": 59485470, "comment_id": 105249712, "body": "Good idea. I am lasting the loop when <code>$num_lines</code> reaches to <code>0</code>. i.e., <code>last if($num_lines == 0);</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1577353015, "last_edit_date": 1577353015, "creation_date": 1577346704, "answer_id": 59485470, "question_id": 59484393, "link": "https://stackoverflow.com/questions/59484393/split-file-by-equal-parts-based-on-count/59485470#59485470", "title": "Split file by equal parts based on count", "body": "<pre><code>my $num_buckets = 3;\n\nmy @lines = &lt;&gt;;\n\nmy $per_bucket = int( @lines / $num_buckets );\nmy $num_extras =      @lines % $num_buckets;\n\nfor my $bucket_num (0..$num_buckets-1) {\n   my $num_lines = $per_bucket;\n   if ($num_extras) {\n      ++$num_lines;\n      --$num_extras;\n   }\n\n   my $qfn = \"node_list_file_${bucket_num}.txt\";\n   open(my $fh, '&gt;', $qfn)\n      or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n\n   $fh-&gt;print(splice(@lines, 0, $num_lines));\n}\n</code></pre>\n\n<p><code>$per_bucket</code> is the number of nodes per file.<br>\n<code>$num_extras</code> is how many files that have one extra node.</p>\n\n<p>Note that the calculation of <code>$num_lines</code> can be condensed to the following (which I avoided for readability):</p>\n\n<pre><code>my $num_lines = $per_bucket + ( $num_extras-- &gt; 0 );\n</code></pre>\n\n<hr>\n\n<p>The above loads the entire file into memory. The following is an alternative solution that doesn't:</p>\n\n<pre><code>my $num_buckets = 3;\n\nmy @fhs;\nfor my $bucket_num (1..$num_buckets) {\n   my $qfn = \"node_list_file_${bucket_num}.txt\";\n   open(my $fh, '&gt;', $qfn)\n      or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n\n   push @fhs, $fh;\n}\n\n$fhs[ ( $. - 1 ) % @fhs ]-&gt;print($_) while &lt;&gt;;\n</code></pre>\n\n<p>However, while it performs the requested task, the output isn't exactly as specified:</p>\n\n<pre><code>node_list_file_1.txt\n--------------------\nnod_1\nnod_4\n\nnode_list_file_2.txt\n--------------------\nnod_2\nnod_5\n\nnode_list_file_3.txt\n--------------------\nnod_3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1577601749, "last_edit_date": 1577601749, "creation_date": 1577349067, "answer_id": 59485816, "question_id": 59484393, "link": "https://stackoverflow.com/questions/59484393/split-file-by-equal-parts-based-on-count/59485816#59485816", "title": "Split file by equal parts based on count", "body": "<p>This splits lines so that each file except the last receives the maximum equal number, whereby the last one gets the remainder.  So with 10 lines to split over 3 files they'll go as 4-4-2.<sup>&dagger;</sup></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse autodie qw(open);\n\nmy @lines = &lt;&gt;;\nmy $num_files = 3;\nmy $lines_per_file = int @lines/$num_files;\n$lines_per_file += 1  if @lines % $num_files;\n\nmy @chunks;\npush @chunks, [ splice @lines, 0, $lines_per_file ] while @lines;\n\nmy @fhs_out = map { open my $fh, \"&gt;fout_$_.txt\"; $fh } 1..$num_files;\n\nfor my $i (0..$#chunks) { \n    print {$fhs_out[$i]} $_ for @{$chunks[$i]};\n};\n</code></pre>\n\n<p>Notes</p>\n\n<ul>\n<li><p>The <code>&lt;&gt;</code> reads all lines from files submitted at the command line</p></li>\n<li><p>If the number of files to write doesn't evenly divide the number of lines to split between them, we need one more line in each file (and the last one receives the remainder)</p></li>\n<li><p>The array with lines is successively <code>splice</code>-ed, in order to generate chunks of lines that will go into one file each, so it ends up emptied</p></li>\n<li><p>I open all needed output files and store filehandles into an array so to later conveniently write chunks of lines into their files.  This is by no means necessary, as one can iterate over <code>@chunks</code> and open a file and write to it for each group (\"chunk\") of lines</p></li>\n<li><p>When writing to a filehandle that need be evaluated from an expression any more complex that just a basic scalar we must have that in a block, like <code>{ $fhs_out[$i] }</code>.  From <a href=\"https://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">print</a></p>\n\n<blockquote>\n  <p>If you're storing handles in an array or hash, or in general whenever you're using any expression more complex than a bareword handle or a plain, unsubscripted scalar variable to retrieve it, you will have to use a block returning the filehandle value instead, [...]</p>\n</blockquote>\n\n<p>See <a href=\"https://stackoverflow.com/a/48471450/4653379\">this post</a> for another way and more discussion.</p></li>\n</ul>\n\n<hr>\n\n<p><sup>&dagger;</sup> If the distribution of lines must be 4-3-3 in this case, so split as evenly as possible, the code above need be modified like</p>\n\n<pre><code>my $lines_per_file = int @lines/$num_files;\nmy $extra = @lines % $num_files;\n\nmy @chunks;\npush @chunks,\n     [ splice @lines, 0, $lines_per_file + ( $extra-- &gt; 0 ? 1 : 0 ) ] \n         while @lines;\n</code></pre>\n\n<p>The rest is the same.</p>\n"}], "owner": {"reputation": 2402, "user_id": 6124824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc81b6fda21a94d3f337e2e28463295e?s=128&d=identicon&r=PG", "display_name": "vkk05", "link": "https://stackoverflow.com/users/6124824/vkk05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 59485470, "answer_count": 3, "score": 0, "last_activity_date": 1577601749, "creation_date": 1577340010, "question_id": 59484393, "link": "https://stackoverflow.com/questions/59484393/split-file-by-equal-parts-based-on-count", "title": "Split file by equal parts based on count", "body": "<p>I have file (node_list.txt) which is having list of nodes.</p>\n\n<pre><code>nod_1\nnod_2\nnod_3\nnod_4\nnod_5\n</code></pre>\n\n<p>I have list of host ip address(this count may vary) and need to devide the node_list into equal number of parts and send those splitted node files to each of the hosts.\nhost_ip1\nhost_ip2\nhost_ip3</p>\n\n<p>Dividing of nodes in the file are based on number of host_ip's available.</p>\n\n<p>Here in my example I should get:</p>\n\n<pre><code>node_list_file_1.txt\nnod_1\nnod_2\n\nnode_list_file_2.txt\nnod_3\nnod_4\n\nnode_list_file_3.txt\nnod_5\n</code></pre>\n\n<p>My code looks like this:</p>\n\n<pre><code>print Dumper(\\@list_of_hosts);\n\nmy $node_file = \"node_list.txt\";\nopen(NODE_FILE, \"&lt; $node_file\") or die \"can't open $node_file: $!\";\nmy $count;\n$count += tr/\\n/\\n/ while sysread(NODE_FILE, $_, 2 ** 16);\nprint \"COUNT:$count\\n\";\n\nmy $res = $count / scalar @list_of_ips;\n</code></pre>\n\n<p>In <code>$res</code> I am getting the count how much number of lines should go to each of the file. But how to put this into file.</p>\n"}]