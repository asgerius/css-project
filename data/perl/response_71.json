[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1463605648, "post_id": 37310094, "comment_id": 62141233, "body": "Just iterate through the arguments and if the key is <code>-password</code> don&#39;t print it?"}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "reply_to_user": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1463605762, "post_id": 37310094, "comment_id": 62141297, "body": "is there any other way to do this, i was trying to avoid the iterating part in case -password is not at all present."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1463605962, "post_id": 37310094, "comment_id": 62141370, "body": "At least on *nix, the password will be stored in the user&#39;s history file and appear in the process table no matter what you do in your script. Masking the password in your application logs may help, but it certainly won&#39;t make the script secure."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463609103, "post_id": 37310094, "comment_id": 62142695, "body": "You don&#39;t have a specific question here. It sounds like you have to write a program that requires password input, and would like to feel better about it being secure. You can&#39;t have someone enter a text string on the command line and have it visible only to certain parts of your software: the entire command line will be logged before your program ever sees it. It sounds like you need to forget about the command line and hand control to a secure method of getting access to whatever the password is for. It is access to that resource that your program requires, not the password itself"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1463612104, "post_id": 37310094, "comment_id": 62143620, "body": "On many systems, the password can be hidden from the process table by manipulating <code>$0</code>."}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463623858, "post_id": 37310094, "comment_id": 62146490, "body": "@Borodin: the code i am referring to is part of a bigger business logic and code flow process. Script gets call automatically and all necessary data is being retrieved from some secure database. I cant explain the overall logic here, but question i have posted is very simple and explains my problem very easily. I can understand what your point is but as i have said in other comment that is no concern. My part is to make sure that does not get log. Whatever else happens is others story"}, {"owner": {"reputation": 3055, "user_id": 2865186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ehbWg.jpg?s=128&g=1", "display_name": "MattSizzle", "link": "https://stackoverflow.com/users/2865186/mattsizzle"}, "edited": false, "score": 1, "creation_date": 1463624261, "post_id": 37310094, "comment_id": 62146593, "body": "Umm, passing a password via command line is NEVER secure. Don&#39;t do it period..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463646135, "post_id": 37310094, "comment_id": 62155094, "body": "<i>&quot;My part is to make sure that does not get log. Whatever else happens is others story&quot;</i> Several people have tried to tell you that your approach will not work as it is impossible to hide the text of a command line. Unless you tell us more about <i>&quot;Whatever else happens&quot;</i> that is the only help that we will be able to give you."}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1464197611, "post_id": 37310094, "comment_id": 62390277, "body": "Why is the post down voted.  I cant share all necessary details and i tried asking my question in simplest possible way. I can understand the security details which everyone is talking but my question was straight forward. Security and other details are something not related to my query ( but maybe with overall details which you guys are specifying  )"}], "answers": [{"comments": [{"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1463606607, "post_id": 37310238, "comment_id": 62141681, "body": "I agree it wont be 100% secure but my end is to make sure that it does not get log. Rest will be take care by different parts of team. Let me try the masking thing and see if it works"}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1463606654, "post_id": 37310238, "comment_id": 62141704, "body": "also this case will fail when password field is not even present as input. How to make sure that corner case like that is also covered"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1463606705, "post_id": 37310238, "comment_id": 62141733, "body": "What do you mean it&#39;ll fail? Nothing will happen. if <code>-password=</code> isn&#39;t present, no errors or warnings will be displayed, simply nothing will happen."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1463606745, "post_id": 37310238, "comment_id": 62141745, "body": "Are you saying that you want the script to tell the user that the <code>-password</code> argument is required?"}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1463667503, "post_id": 37310238, "comment_id": 62171174, "body": "this wont work as password field is overwrite. If i want to use that in next step i cant use because original value is now replaced with ***."}, {"owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "edited": false, "score": 0, "creation_date": 1463667609, "post_id": 37310238, "comment_id": 62171255, "body": "i want to retain the original value of the field. While logging only i want to hide the value"}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 0, "last_activity_date": 1463669132, "last_edit_date": 1463669132, "creation_date": 1463606200, "answer_id": 37310238, "question_id": 37310094, "link": "https://stackoverflow.com/questions/37310094/filter-mask-one-of-the-parameter-passed-as-argument-in-perl-script/37310238#37310238", "title": "Filter/Mask one of the parameter passed as argument in perl script", "body": "<p>You can make a copy of the password field from <code>@ARGV</code> before you do anything else, then mask that copy to be used for logging. <code>@ARGV</code> will contain the original unmasked version.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy ($masked_pw) = grep /-password=.*/, @ARGV;\n\nif ($masked_pw){\n    my $mask = '*****';\n    $masked_pw =~ s/(-password=).*/$1$mask/;\n}\n</code></pre>\n\n<p>I'm with @ThisSuitIsBlackNot though... the password will still be available elsewhere.</p>\n"}], "owner": {"reputation": 905, "user_id": 1188611, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/67b60365e971b8b9cf5f0b901868bfd7?s=128&d=identicon&r=PG", "display_name": "user1188611", "link": "https://stackoverflow.com/users/1188611/user1188611"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 37310238, "answer_count": 1, "score": -1, "last_activity_date": 1463669132, "creation_date": 1463605525, "question_id": 37310094, "link": "https://stackoverflow.com/questions/37310094/filter-mask-one-of-the-parameter-passed-as-argument-in-perl-script", "title": "Filter/Mask one of the parameter passed as argument in perl script", "body": "<p>I have a perl script which takes a bunch of parameter as input. Depending on input different set of business logic is executed.</p>\n\n<p>In one of the case i am getting password as input. This password is getting logged as it is in log file. This is the situation i am trying to avoid. </p>\n\n<ol>\n<li>Either i want to mask the password argument and then log OR</li>\n<li>Completely ignore this entry.</li>\n</ol>\n\n<p>Sample code is:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper qw(Dumper);\n\nprint Dumper \\@ARGV;\n</code></pre>\n\n<p>Now lets say i call the above script as :</p>\n\n<pre><code>test.pl -a='getData' -b='abc' -password='xyz' -c='pqr'\n</code></pre>\n\n<p>Now output looks like this :</p>\n\n<pre><code>$VAR1 = [\n      '-a=getData',\n      '-b=abc',\n      '-password=xyz',\n      '-c=pqr'\n    ];\n</code></pre>\n\n<p>so instead of logging the password as it it, ( from security perspective ) I want to mask the field. Output something like below :</p>\n\n<pre><code> $VAR1 = [\n      '-a=getData',\n      '-b=abc',\n      '-password=*******',\n      '-c=pqr'\n    ];\n</code></pre>\n\n<p>Few things here:</p>\n\n<ol>\n<li>I cant override the input args passed since i will be needing the password value in next step of processing</li>\n<li>input argument <strong><em>a</em></strong> will always have value 'getData' whenever password parameter is present in input</li>\n<li>For different value of input parameter <strong><em>a</em></strong>, there will be no password field.</li>\n<li>Order of parameter may vary sometime</li>\n</ol>\n"}, {"tags": ["arrays", "perl", "multidimensional-array"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1463601516, "post_id": 37308872, "comment_id": 62139184, "body": "Related: <a href=\"http://stackoverflow.com/q/4677465/176646\">Quickest way to determine range overlap in Perl</a>, which also asks about finding the overlap of sets of ranges. In this case, I think you could just compare your set to itself."}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463602226, "post_id": 37308872, "comment_id": 62139539, "body": "@ThisSuitIsBlackNot Are there built in java interval search trees that I would just be able to access and search my whole set with"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1463602452, "post_id": 37308872, "comment_id": 62139646, "body": "<i>&quot;If any row(x) has a position in column 3 that is shorter than the position in column 4 in any row(y) then this means that x starts before y ends and there is some overlap&quot;</i> Are you sure about this? If row <b>x</b> starts at 10 and stops at 20 and row <b>y</b> starts at 30 and stops at 40, then 10 is less than 40 but there is no overlap. You may be correct if your data is sorted in some way, but what you say isn&#39;t generally true."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463602491, "post_id": 37308872, "comment_id": 62139665, "body": "What do you mean by <i>&quot;a single track line&quot;</i>?"}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463603171, "post_id": 37308872, "comment_id": 62140013, "body": "@Borodin I&#39;m just trying to describe that if say the start and stop positions represent a piece of tape or something that all rows(pieces of information) would be filled in on the same piece of tape, just a way I trying to explain it to visualize it"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463603316, "post_id": 37308872, "comment_id": 62140082, "body": "@B.Monster: So you mean something like a Perl string?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1463603424, "post_id": 37308872, "comment_id": 62140139, "body": "@ThisSuitIsBlackNot: Nice source. Thank you"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463603478, "post_id": 37308872, "comment_id": 62140161, "body": "@B.Monster: How many records are you dealing with? How big is your file?"}], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1463610074, "post_id": 37310015, "comment_id": 62143033, "body": "The file is tens of thousands of lines so I don&#39;t think something O(n!) would finish"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1463646249, "post_id": 37310015, "comment_id": 62155180, "body": "I&#39;m not sure how you work out that it is <b><i>O(n!)</i></b>. I would have thought it was <b><i>O(n*n)</i></b>. And it is very wrong to reject a simple solution out of hand without even testing it just becuase you <i>&quot;don&#39;t think [it] would finish&quot;</i>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467562832, "last_edit_date": 1467562832, "creation_date": 1463605201, "answer_id": 37310015, "question_id": 37308872, "link": "https://stackoverflow.com/questions/37308872/creating-an-array-of-arrays-in-perl-and-deleting-from-the-array/37310015#37310015", "title": "creating an array of arrays in perl and deleting from the array", "body": "<p>This produces exactly the output that you asked for given your sample data as input. It runs in well under one millisecond</p>\n\n<p>Do you have other constraints that you haven't explained? Making your code run faster should never be an end in itself. There is nothing inherently wrong with an <strong><em>O(n!)</em></strong> time complexity: it is the execution time that you must consider, and if your code is fast enough then your job is done</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @data = map [ split ], grep /\\S/, &lt;DATA&gt;;\n\nfor my $i1 ( 0 .. $#data ) {\n\n    my $v1 = $data[$i1];\n\n    for my $i2 ( $i1 .. $#data ) {\n\n        my $v2 = $data[$i2];\n\n        next if $v1 == $v2;\n\n        unless ( $v1-&gt;[3] &lt; $v2-&gt;[2] or $v1-&gt;[2] &gt; $v2-&gt;[3] ) {\n            my $statement = sprintf \"%d overlap with %d\", $v2-&gt;[0], $v1-&gt;[0];\n            printf \"%-22s %d: %d %-7d %d: %d %-7d\\n\", $statement, @{$v1}[0, 2, 3], @{$v2}[0, 2, 3];\n\n        }\n    }\n}\n\n__DATA__\n93 Blue19 1 82\n87 Green9 1 7912\n76 Blue7 2 20690\n65 Red4 2 170\n256 Orange50 17515 66740\n166 Teal68 72503 123150\n228 Green89 72510 114530\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>87 overlap with 93     93: 1 82      87: 1 7912   \n76 overlap with 93     93: 1 82      76: 2 20690  \n65 overlap with 93     93: 1 82      65: 2 170    \n76 overlap with 87     87: 1 7912    76: 2 20690  \n65 overlap with 87     87: 1 7912    65: 2 170    \n65 overlap with 76     76: 2 20690   65: 2 170    \n256 overlap with 76    76: 2 20690   256: 17515 66740  \n228 overlap with 166   166: 72503 123150  228: 72510 114530 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463605537, "post_id": 37310054, "comment_id": 62141180, "body": "The OP&#39;s data is sorted by the <i>start</i> column. It wasn&#39;t very clear in the original post, and I hope I&#39;ve improved it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463605662, "post_id": 37310054, "comment_id": 62141241, "body": "@Borodin  Oh ... then this &#39;answer&#39; may need to go altogether ... reviewing. Thank you!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463605852, "post_id": 37310054, "comment_id": 62141328, "body": "Maybe not. I think we&#39;re both ignoring the request to avoid a specific complexity, and that&#39;s correct as that should only be a goal in experimental software. The OP hasn&#39;t explained any real constraints, and as far as we know his file has only seven or so lines of data"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463606035, "post_id": 37310054, "comment_id": 62141415, "body": "@Borodin  Right.  Looking at it some more -- I don&#39;t think they can get the complexity target.  If the data is not sorted everything has to be compared.  I don&#39;t see how it is possible to tell when to cut it out.  As for the length, given what the input looks like I think that it is reasonable to guess that it is feasible to pull it all into an array first."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463635881, "post_id": 37310054, "comment_id": 62149518, "body": "Analysis: Worst case: O(N^2). Average case: O(N), since the runs of overlaps are probably usually short."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463637268, "post_id": 37310054, "comment_id": 62150032, "body": "@ikegami Thank you! I wasn&#39;t sure that I could assess the average case like that. (i thought that OP&#39;s  <i>avoid a O(n!)</i> was talking merely about not running each vs each, and in that not getting the complexity right.)  I am going to add a note on complexity, and I&#39;d like to quote this if that is OK with you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1466832000, "last_edit_date": 1495541309, "creation_date": 1463605340, "answer_id": 37310054, "question_id": 37308872, "link": "https://stackoverflow.com/questions/37308872/creating-an-array-of-arrays-in-perl-and-deleting-from-the-array/37310054#37310054", "title": "creating an array of arrays in perl and deleting from the array", "body": "<p>I am using the posted input and output files as a guide on what is required.</p>\n\n<p>A note on complexity. In principle, each line has to be compared to all following lines. The number of operations actually carried out depends on the data. Since it is stated that the <em>data is sorted on the field to be compared</em> the inner loop iterations can be cut as soon as overlapping stops. A comment on complexity estimate is at the end.</p>\n\n<p>This compares each line to the ones following it. For that all lines are first read into an array.  If the data set is very large this should be changed to read line by line and then the procedure turned around, to compare the currently read line to all previous. This is a very basic approach. It may well be better to build auxiliary data structures first, possibly making use of suitable libraries.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = 'data_overlap.txt';\nmy @lines = do { \n    open my $fh, '&lt;', $file or die \"Can't open $file -- $!\";\n    &lt;$fh&gt;;\n};\n\n# For each element compare all following ones, but cut out \n# as soon as there's no overlap since data is sorted\nfor my $i (0..$#lines) \n{  \n    my @ref_fields = split '\\s+', $lines[$i];\n    for my $j ($i+1..$#lines) \n    {   \n        my @curr_fields = split '\\s+', $lines[$j]; \n        if ( $ref_fields[-1] &gt; $curr_fields[-2] ) { \n            print \"$curr_fields[0] overlap with $ref_fields[0]\\t\" .\n                \"$ref_fields[0]: $ref_fields[-2] $ref_fields[-1]\\t\" .\n                \"$curr_fields[0]: $curr_fields[-2] $curr_fields[-1]\\n\";\n        }   \n        else { print \"\\tNo overlap, move on.\\n\"; last }\n    }   \n}\n</code></pre>\n\n<p>With the input in file <code>'data_overlap.txt'</code> this prints</p>\n\n<pre>\n87 overlap with 93      93: 1 82        87: 1 7912\n76 overlap with 93      93: 1 82        76: 2 20690\n65 overlap with 93      93: 1 82        65: 2 170\n        No overlap, move on.\n76 overlap with 87      87: 1 7912      76: 2 20690\n65 overlap with 87      87: 1 7912      65: 2 170\n        No overlap, move on.\n65 overlap with 76      76: 2 20690     65: 2 170\n256 overlap with 76     76: 2 20690     256: 17515 66740\n        No overlap, move on.\n        No overlap, move on.\n        No overlap, move on.\n228 overlap with 166    166: 72503 123150       228: 72510 114530\n</pre>\n\n<hr>\n\n<p><em>A comment on complexity</em></p>\n\n<p><em>Worst case</em> &nbsp; Each element has to be compared to every other (they all overlap).  This means that for each element we need <code>N-1</code> comparisons, and we have <code>N</code> elements. This is <code>O(N^2)</code> complexity. This complexity is not good for operations that are used often and on potentially large data sets, like what libraries do. But it is not necessarily bad for a particular problem -- the data set still needs to be quite large for that to result in prohibitively long runtimes.</p>\n\n<p><em>Best case</em> &nbsp; Each element is compared only once (no overlap at all).  This implies <code>N</code> comparisons, thus <code>O(N)</code> complexity.</p>\n\n<p><em>Average</em> &nbsp; Let us assume that each element overlaps with a \"few\" next ones, let us say 3 (three). This means that there would be <code>3N</code> comparisons. This is still <code>O(N)</code> complexity. This holds as long as the number of comparisons does not depend on the length of the list (but is constant), which is a very reasonable typical scenario here. This is good. </p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for bringing this up in the comment, along with the estimate.</p>\n\n<p>Remember that the importance of the computational complexity of a technique depends on its use.</p>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 37310054, "answer_count": 2, "score": 2, "last_activity_date": 1467562832, "creation_date": 1463600927, "last_edit_date": 1463605475, "question_id": 37308872, "link": "https://stackoverflow.com/questions/37308872/creating-an-array-of-arrays-in-perl-and-deleting-from-the-array", "title": "creating an array of arrays in perl and deleting from the array", "body": "<p>I'm writing this to avoid a O(n!) time complexity but I only have pseudocode right now because there are some things I'm unsure about implementing.</p>\n\n<p>This is the format of the file that I want to pass into this script. The data is sorted by the third column -- the start position.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>93 Blue19 1 82\n87 Green9 1 7912\n76 Blue7 2 20690\n65 Red4 2 170\n...\n...\n256 Orange50 17515 66740\n166 Teal68 72503 123150\n228 Green89 72510 114530\n</code></pre>\n\n<p>Explanation of the code:</p>\n\n<p>I want to create an array of arrays to find when two pieces of information have overlapping lengths.</p>\n\n<p>Columns 3 and 4 of the input file are start and stop positions on a single track line. If any row(x) has a position in column 3 that is shorter than the position in column 4 in any row(y) then this means that x starts before y ends and there is some overlap.</p>\n\n<p>I want to find every row that overlaps with asnyrow without having to compare every row to every row. Because they are sorted I simply add a string to an inner array of the array which represents one row.\nIf the new row being looked at does not overlap with one of the rows already in the array then (because the array is sorted by the third column) no further row will be able to overlap with the row in the array and it can be removed.</p>\n\n<p>This is what I have an idea of </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#!/usr/bin/perl -w\n\nuse strict;\n\nmy @array\n\nwhile (&lt;&gt;) {\n\n    my thisLoop = ($id, $name, $begin, $end) = split;\n    my @innerArray = split; # make an inner array with the current line, to \n                            # have strings that will be printed after it\n\n    push @array(@innerArray)\n\n    for ( @array ) { # loop through the outer array being made to see if there \n                     # are overlaps with the current item\n\n        if ( $begin &gt; $innerArray[3]) # if there are no overlaps then print \n                                      # this inner array and remove it\n                                      # (because it is sorted and everything\n                                      # else cannot overlap because it is \n                                      # larger)\n            # print @array[4-]\n            # remove this item from the array\n        else\n            # add to array this string\n            \"$id overlap with innerArray[0] \\t innerArray[0]: $innerArray[2], $innerArray[3] \"\\t\" $id :  $begin, $end         \n            # otherwise because there is overlap add a statement to the inner\n            # array explaining the overlap\n</code></pre>\n\n<p>The code should produce something like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>87 overlap with 93     93: 1 82      87: 1 7982\n76 overlap with 93     93: 1 82      76: 1 20690\n65 overlap with 93     93: 1 82      65: 2 170\n76 overlap with 87     87: 1 7912    76: 2 20690\n65 overlap with 87     87: 1 7912    65: 2 170\n65 overlap with 76     76: 2 20690   65: 2 170\n256 overlap with 76    76: 2 20690   256: 17515 66740\n228 overlap with 166   166: 72503 123150   228: 72510 114530\n</code></pre>\n\n<p>This was tricky to explain so ask me if you have any questions</p>\n"}, {"tags": ["html", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463595266, "post_id": 37307154, "comment_id": 62135788, "body": "@serenesat: Here&#39;s one for you"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1463595393, "post_id": 37307154, "comment_id": 62135853, "body": "The complexity of what you&#39;re talking about is probably not something you want to do with just sed.  You&#39;re talking about parsing and modifying HTML, which is structured data.  I would get an actual programming language like Perl or Python or Ruby and write a program to do it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463595486, "post_id": 37307154, "comment_id": 62135905, "body": "This isn&#39;t a specific question, and in this case it&#39;s really more of a project. A 22-year-old web site really needs a rewrite, but it is a fair first step to make what you already have work under a new scheme. Even so I have to vote to close your question as being <i>too broad</i>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 2, "creation_date": 1463595599, "post_id": 37307154, "comment_id": 62135975, "body": "@AndyLester: I know what you mean, but implying that awk, sed, bash etc. aren&#39;t <i>&quot;actual programming languages&quot;</i> is asking for trouble!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463595918, "post_id": 37307154, "comment_id": 62136135, "body": "This breaks site rules, but I will do some of this for you at no cost. Contact me at nugeceslad@thraml.com"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6352488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22247dd20da24048fbf4af16356115a0?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6352488/alex"}, "edited": false, "score": 0, "creation_date": 1463922430, "post_id": 37307938, "comment_id": 62260743, "body": "Thanks, that&#39;s a very nice tool.  I was able to solve the problem by fixing 98% of the files with some simple scripts, and then did the rest by hand, but this is a nice thing to know about."}], "tags": [], "owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "is_accepted": true, "score": 0, "last_activity_date": 1463597621, "creation_date": 1463597621, "answer_id": 37307938, "question_id": 37307154, "link": "https://stackoverflow.com/questions/37307154/removing-references-and-relativizing-references-in-an-html-hierarchy/37307938#37307938", "title": "Removing references and relativizing references in an HTML hierarchy", "body": "<p>If the site is still alive, you can use <code>wget --convert-links</code> to copy the site and at the end convert internal links to relative.  </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6352488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22247dd20da24048fbf4af16356115a0?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6352488/alex"}, "edited": false, "score": 0, "creation_date": 1463922472, "post_id": 37308194, "comment_id": 62260756, "body": "Thanks, I did something very similar to this for most of the references."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1463598540, "creation_date": 1463598540, "answer_id": 37308194, "question_id": 37307154, "link": "https://stackoverflow.com/questions/37307154/removing-references-and-relativizing-references-in-an-html-hierarchy/37308194#37308194", "title": "Removing references and relativizing references in an HTML hierarchy", "body": "<p>If the HTML files are well structured enough that the element you need to remove is on a single line and no other elements are on that line, then this is pretty easy.</p>\n\n<pre><code>perl -i -ne 'print unless /meta/ &amp;&amp; /irca/' foo.html\n</code></pre>\n\n<p>This rewrites <code>foo.html</code> in place, removing any lines that contain both strings <code>\"meta\"</code> and <code>\"irca\"</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 6352488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22247dd20da24048fbf4af16356115a0?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6352488/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 37307938, "answer_count": 2, "score": 0, "last_activity_date": 1463598540, "creation_date": 1463594853, "question_id": 37307154, "link": "https://stackoverflow.com/questions/37307154/removing-references-and-relativizing-references-in-an-html-hierarchy", "title": "Removing references and relativizing references in an HTML hierarchy", "body": "<p>I have a web site which was created in 1994, hasn't been well maintained, contains several thousand individual files.  There are over 3800 absolute URL references in the files, and they all have to be removed or eliminated in order to move the site to a new host.</p>\n\n<p>About half the references are meta references to the now defunct icra site, so those can just be discarded wholesale.  I can identify them with a simple pipeline, e.g.:</p>\n\n<pre><code>cat foo.html|grep meta|grep icra\n</code></pre>\n\n<p>But now I have to get rid of the line.  I tried making this pipeline an argument in sed and then using sed to delete the line, but it was awkward and didn't work properly.</p>\n\n<p>Once that part is done, it would be nice to have a way to relativize all the links, e.g., if I had a file two levels down in the hierarchy with a reference to \n<a href=\"http://olddomain.org/dir1/dir2/dir3/foo.html\" rel=\"nofollow\">http://olddomain.org/dir1/dir2/dir3/foo.html</a>, that would get changed to ../../dir1/dir2/dir3/foo.html  </p>\n\n<p>It wouldn't bother me if I wound up having references that went up and then back down exactly the same directories - I could fix those slowly and by hand, as necessary.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 192, "user_id": 5185210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNqsL.png?s=128&g=1", "display_name": "oals", "link": "https://stackoverflow.com/users/5185210/oals"}, "edited": false, "score": 0, "creation_date": 1463662699, "post_id": 37303123, "comment_id": 62167105, "body": "Related: <a href=\"https://stackoverflow.com/questions/87380\">stackoverflow.com/questions/87380</a>"}], "answers": [{"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 3, "last_activity_date": 1463583735, "creation_date": 1463583735, "answer_id": 37303446, "question_id": 37303123, "link": "https://stackoverflow.com/questions/37303123/how-to-print-and-get-index-of-two-regex-match-in-perl/37303446#37303446", "title": "How to print and get index of two regex match in perl?", "body": "<p>If both expressions match, <code>$&amp;</code> will only have the last match. i.e. for the example above <code>$&amp;</code> will always have the value <code>CHECK</code> and never have <code>NAME</code> because it was overwritten by the second pattern match.</p>\n\n<p>You can wrap this logic in a function, then call that function as many times as you'd like with different string, pattern combinations:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $search1 = \"aaaNAMEaaaa\";\nmy $search2 = \"bbbbCHECKbbb\";\n\nprint index_from_match($search1, qr/na\\we/i), \"\\n\";  #  3\nprint index_from_match($search2, qr/che\\wk/i), \"\\n\"; #  4\nprint index_from_match($search1, qr/che\\wk/i), \"\\n\"; # -1 \n\nsub index_from_match {\n    my ($s, $pattern) = @_;\n\n    # uses a capture group instead of $&amp; \n    if ( my ($match) = $s =~ m/($pattern)/ ) {\n        return index($s, $match);\n    }\n\n    return -1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1463585780, "post_id": 37303632, "comment_id": 62130187, "body": "If so, both <code>if</code> conditions should be true i.e <code>and</code> and needs to go to <code>else</code>. Here, even first <code>if</code> is true it won&#39;t go to <code>else</code>"}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1463586063, "post_id": 37303632, "comment_id": 62130401, "body": "@SSh first, &quot;if so&quot;... what?   Second, why would you need to go to  the <code>else</code>?  The <code>else</code> of the second <code>if</code> is only to unset the <code>$matched</code> and <code>$pos1</code> variables that you set because the first <code>if</code> was true.  If the first <code>if</code> is false, you haven&#39;t set those variables anyway, so they don&#39;t need to be unset."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 1, "creation_date": 1463588799, "post_id": 37303632, "comment_id": 62132232, "body": "@SSh: Your comment isn&#39;t very clear! It would help enormously if you gave <i>examples</i> of how this answer doesn&#39;t work for you. If you need to write code then you should <a href=\"http://stackoverflow.com/posts/37303123/edit\"><i>edit your question</i></a> to provide additional information"}, {"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1463603865, "post_id": 37303632, "comment_id": 62140327, "body": "I have modified my code and explained what am I doing"}, {"owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "edited": false, "score": 0, "creation_date": 1463625833, "post_id": 37303632, "comment_id": 62146969, "body": "@PaulL I need <code>elsif</code> and <code>else</code> for first <code>if</code>. This is needed for other options. Yes, I haven&#39;t set up here but I do have for matching. If I put <code>elsif</code> for first <code>if</code> even if there are no match in both <code>if</code>, its not going to <code>elsif</code> but going to else of second <code>if</code>. Thanks"}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1463658542, "post_id": 37303632, "comment_id": 62163884, "body": "I gave you a way to do what you asked in your question.  Now you&#39;re asking a completely different question.  Edit your question to show what you <i>actually</i> need to do."}], "tags": [], "owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1463586103, "last_edit_date": 1463586103, "creation_date": 1463584202, "answer_id": 37303632, "question_id": 37303123, "link": "https://stackoverflow.com/questions/37303123/how-to-print-and-get-index-of-two-regex-match-in-perl/37303632#37303632", "title": "How to print and get index of two regex match in perl?", "body": "<p>Break your compound <code>if</code> into multiple <code>if</code> statements</p>\n\n<pre><code>my $search1 = \"aaaNAMEaaaa\";\nmy $search2 = \"bbbbCHECKbbb\";\n\nmy ($matched1, $matched2, $pos1, $pos2);\nif ( $search1 =~ /na\\we/i) {\n    $matched1 = $&amp;;\n    $pos1 = index( $search1, $matched1); \n    if ($search2 =~ /che\\wk/i ) {\n        print \"String found\\n\";\n        $matched2 = $&amp;;\n        $pos2 = index( $search2, $matched2); \n        #do whatever you need with $pos1 &amp; $pos2\n    } else {\n        #reset previously set vars\n        undef $matched1;\n        undef $pos1; \n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467563193, "last_edit_date": 1467563193, "creation_date": 1463588134, "answer_id": 37305019, "question_id": 37303123, "link": "https://stackoverflow.com/questions/37303123/how-to-print-and-get-index-of-two-regex-match-in-perl/37305019#37305019", "title": "How to print and get index of two regex match in perl?", "body": "<p>The core problem is that you're doing two regex comparisons in a single expression, so the values for the first one are lost before they can be processed</p>\n\n<p>It's really hard to see how to help you without understanding the program flow within the conditional statement and how you actually use those values</p>\n\n<p>Other languages use the idea of a <em>match object</em>, and it's easy to simulate that here by writing a subroutine that returns either a [ string, offset ] pair if the pattern matched, or <code>undef</code> if not. It's also less wasteful to use the built-in <code>@-</code> and <code>@+</code> arrays to provide the values needed instead of repeating the search with <code>index</code></p>\n\n<p>It would look like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Carp 'croak';\n\n\nmy $search1 = 'aaaNAMEaaaa';\nmy $search2 = 'bbbbCHECKbbb';\n\nmy $match1 = match($search1, /na\\we/i);\nmy $match2 = match($search2, qr/che\\wk/i);\n\nif ( $match1 and $match2 ) {\n\n    print \"String found\\n\";\n\n    printf qq{\"%s\" found at offset %d\\n}, @$match1;\n    printf qq{\"%s\" found at offset %d\\n}, @$match2;\n}\n\n\nsub match {\n    my ($s, $re) = @_;\n    croak \"Compiled regex required\" unless ref $re eq 'Regexp';\n\n    return unless $s =~ $re;\n\n    [ substr($s, $-[0], $+[0]-$-[0]), $-[0] ];\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>String found\n\"NAME\" found at offset 3\n\"CHECK\" found at offset 4\n</code></pre>\n\n<p>I think it would also be neater to write this as</p>\n\n<pre><code>my $match1 = match($search1, qr/na\\we/i);\nmy $match2 = match($search2, qr/che\\wk/i);\n\nif ( $match1 and $match2 ) {\n\n    print \"String found\\n\";\n\n    printf qq{\"%s\" found at offset %d\\n}, @$match1;\n    printf qq{\"%s\" found at offset %d\\n}, @$match2;\n}\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 5106204, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ea44da36974d202ff23940ec61348965?s=128&d=identicon&r=PG&f=1", "display_name": "SSh", "link": "https://stackoverflow.com/users/5106204/ssh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467563193, "creation_date": 1463582966, "last_edit_date": 1463605664, "question_id": 37303123, "link": "https://stackoverflow.com/questions/37303123/how-to-print-and-get-index-of-two-regex-match-in-perl", "title": "How to print and get index of two regex match in perl?", "body": "<p>How can I print and get index from regex here:</p>\n\n<pre><code>my $search1 = \"aaaNAMEaaaa\";\nmy $search2 = \"bbbbCHECKbbb\";\n\nif ( $search1 =~ /na\\we/i and $search2 =~ /che\\wk/i ) {\n    print \"String found\\n\";\n    #  This works with one search\n    #  my $matched = $&amp;;\n    #  my $pos = index( $search1, $matched ); \n}\n</code></pre>\n"}, {"tags": ["perl", "xpath", "xml-twig"], "answers": [{"comments": [{"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463583734, "post_id": 37303235, "comment_id": 62128707, "body": "perl-walking - yes - but it says <code>Can&#39;t call method &quot;parent&quot; on an undefined value</code> if here isn&#39;t <code>release</code> type (for example just <code>beta</code>) - so need test the return value.  Therefore i tried to use the (extended) Xpath. Thank you. :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1463583278, "creation_date": 1463583278, "answer_id": 37303235, "question_id": 37302855, "link": "https://stackoverflow.com/questions/37302855/select-the-1st-element-only-with-condition-using-xmltwig/37303235#37303235", "title": "Select the 1st element only - with condition using XML::Twig", "body": "<p>XML::Twig doesn't support the whole XPath. The expression works correctly in <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a>.</p>\n\n<p>You can walk the structure yourself in Perl:</p>\n\n<pre><code>my $latest = ($twig-&gt;findnodes('//type[string()=\"release\"]'))[0]-&gt;parent;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463586919, "post_id": 37303684, "comment_id": 62130981, "body": "This is rather off-topic, but it would be nice if <code>XML::Twig::XPath</code> had a way of specifying which helper module to use if they are both installed, in the same way that <code>Text::CSV</code> does. Or at least a way of discovering which one had been chosen. It may initially just be a matter of changing <code>my $XPATH</code> into <code>our $XPATH</code>?"}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 1, "creation_date": 1463591191, "post_id": 37303684, "comment_id": 62133544, "body": "No question, just a &quot;thank you&quot; for the nice <code>XML::Twig</code> package! :)"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463605288, "post_id": 37303684, "comment_id": 62141039, "body": "@borodin XML::XPathEngine is used if present. XML::XPath is only an option because historically it was  the first one that was used, before I forked the XPath part to create XML::XPathEngine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463606007, "post_id": 37303684, "comment_id": 62141395, "body": "@mirod: I get that. Thanks. But unless you&#39;re expecting to deprecate <code>XML::Path</code> it would still be nice to be able to get at the information. I&#39;ve been using <code>ref $twig-&gt;{twig_xp}</code> so far, which isn&#39;t very clean"}], "tags": [], "owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "is_accepted": false, "score": 3, "last_activity_date": 1463584337, "creation_date": 1463584337, "answer_id": 37303684, "question_id": 37302855, "link": "https://stackoverflow.com/questions/37302855/select-the-1st-element-only-with-condition-using-xmltwig/37303684#37303684", "title": "Select the 1st element only - with condition using XML::Twig", "body": "<p>XML::Twig doesn't support all of XPath, but XML::Twig::XPath does. </p>\n\n<p>So <code>use XML::Twig::XPath;</code>, then <code>my $twig = XML::Twig::XPath-&gt;parse(...</code> and voil\u00e0... you can now get to fixing the <code>$latest=...</code> line, which should be:</p>\n\n<pre><code>my $latest = ($twig-&gt;findnodes( '(//type[string()=\"release\"])[1]/..' ))[0];\n</code></pre>\n\n<p>(the way you have it $latest is an <code>XML::XPathEngine::NodeSet</code>, you need to take the first element of that set).</p>\n"}, {"comments": [{"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463586171, "post_id": 37304189, "comment_id": 62130465, "body": "YES! Using the <code>XML::Twig::XPath</code> and the <code>my ($latest) = $twig-&gt;findnodes( &#39;&#47;root&#47;files[type[string()=&quot;release&quot;]]&#39; );</code> solves my needs. Thank you! ;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463586710, "post_id": 37304189, "comment_id": 62130843, "body": "@cajwine: I hope I made it clear that, if you use only one predicate, like <code>my ($latest) = $twig-&gt;findnodes( &#39;&#47;root&#47;files&#47;type[string()=&quot;release&quot;]&#47;..&#39; )</code>, then the standard <code>XML::Twig</code> will work fine"}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463587231, "post_id": 37304189, "comment_id": 62131174, "body": "Yes, just tried both. For using the <code>&#39;&#47;root&#47;files[type[string()=&quot;release&quot;]]&#39;</code> (from your last statement) I need the XPath. And for the <code>&#47;root&#47;files&#47;type[string()=&quot;release&quot;]&#47;..</code> is enough the simple <code>XML::Twig</code>. Wonderful answer! ;)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463587578, "post_id": 37304189, "comment_id": 62131395, "body": "@cajwine: I&#39;m pleased to have helped. Like I said, it seems to be a limit on the predicates, but that&#39;s just an educated guess. <code>mirod</code> posted an answer as well and he is the author of the module so you may want to ask him some questions"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1463585707, "creation_date": 1463585707, "answer_id": 37304189, "question_id": 37302855, "link": "https://stackoverflow.com/questions/37302855/select-the-1st-element-only-with-condition-using-xmltwig/37304189#37304189", "title": "Select the 1st element only - with condition using XML::Twig", "body": "<p><a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a> doesn't support the full XPath syntax. The documentation for the <code>get_xpath</code> method (the same as <code>findnodes</code>) says this</p>\n\n<blockquote>\n  <p>A subset of the XPATH abbreviated syntax is covered:</p>\n\n<pre><code>tag\ntag[1] (or any other positive number)\ntag[last()]\ntag[@att] (the attribute exists for the element)\ntag[@att=\"val\"]\ntag[@att=~ /regexp/]\ntag[att1=\"val1\" and att2=\"val2\"]\ntag[att1=\"val1\" or att2=\"val2\"]\ntag[string()=\"toto\"] (returns tag elements which text (as per the text method) \n                     is toto)\ntag[string()=~/regexp/] (returns tag elements which text (as per the text \n                        method) matches regexp)\nexpressions can start with / (search starts at the document root)\nexpressions can start with . (search starts at the current element)\n// can be used to get all descendants instead of just direct children\n* matches any tag\n</code></pre>\n</blockquote>\n\n<p>So subexpressions within parentheses aren't supported, and you may specify only a single predicate</p>\n\n<p>It's also important that, in scalar context, <code>findnodes</code> will only ever return a count of the number of nodes found. You must use it in list context to retrieve the nodes themselves, which means that a simpler way to find just the first matching element is to write</p>\n\n<pre><code>my ($latest) = $twig-&gt;findnodes( '//type[string()=\"release\"]/..' );\n</code></pre>\n\n<p>which works fine</p>\n\n<p>If you really need the full power of XPath, then you can use <a href=\"https://metacpan.org/pod/XML::Twig::XPath\" rel=\"nofollow\"><code>XML::Twig::XPath</code></a> instead. This module uses either <a href=\"https://metacpan.org/pod/XML::XPath\" rel=\"nofollow\"><code>XML::XPath</code></a> or the excellent <a href=\"https://metacpan.org/pod/XML::XPathEngine\" rel=\"nofollow\"><code>XML::XPathEngine</code></a> to provide the full XPath syntax by overloading <code>findnodes</code>. (The other methods <code>get_xpath</code> and <code>find_nodes</code> continue to use the reduced <code>XML::Twig</code> variation.)</p>\n\n<p><code>findnodes</code> in scalar context now returns an <a href=\"https://metacpan.org/pod/XML::XPathEngine::NodeSet\" rel=\"nofollow\"><code>XML::XPathEngine::NodeSet</code></a> object which has array indexing overloaded. So you can write</p>\n\n<pre><code>my $latest = $twig-&gt;findnodes( '//type[string()=\"release\"]/..' );\n$latest-&gt;[0]-&gt;print;\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>my ($latest) = $twig-&gt;findnodes( '//type[string()=\"release\"]/..' );\n</code></pre>\n\n<p>as above.</p>\n\n<p>Finally, I would prefer to see <code>/root/files[type[string()=\"release\"]]</code> in preference to the trailing <code>parent::node()</code>, but that is purely personal</p>\n"}], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "accepted_answer_id": 37304189, "answer_count": 3, "score": 3, "last_activity_date": 1463585707, "creation_date": 1463582371, "last_edit_date": 1495540364, "question_id": 37302855, "link": "https://stackoverflow.com/questions/37302855/select-the-1st-element-only-with-condition-using-xmltwig", "title": "Select the 1st element only - with condition using XML::Twig", "body": "<p>Having this code:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse 5.014;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;parse( \\*DATA );\n$twig-&gt;set_pretty_print('indented_a');\n\n# 1st search\n# this prints OK the all &lt;files&gt; nodes where the &lt;type&gt; == 'release'\n$_-&gt;print for ( $twig-&gt;findnodes( '//type[string()=\"release\"]/..' ) );\n\n# 2nd search    \n# try to get first matched only\nmy $latest = $twig-&gt;findnodes( '(//type[string()=\"release\"])[1]/..' );\n$latest-&gt;print;\n\n__DATA__\n&lt;root&gt;\n    &lt;files&gt;\n        &lt;type&gt;beta&lt;/type&gt;\n        &lt;ver&gt;3.0&lt;/ver&gt;\n    &lt;/files&gt;\n    &lt;files&gt;\n        &lt;type&gt;alpha&lt;/type&gt;\n        &lt;ver&gt;3.0&lt;/ver&gt;\n    &lt;/files&gt;\n    &lt;files&gt;\n        &lt;type&gt;release&lt;/type&gt;\n        &lt;ver&gt;2.0&lt;/ver&gt;\n    &lt;/files&gt;\n    &lt;files&gt;\n        &lt;type&gt;release&lt;/type&gt;\n        &lt;ver&gt;1.0&lt;/ver&gt;\n    &lt;/files&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>The above prints</p>\n\n<pre><code>  &lt;files&gt;\n    &lt;type&gt;release&lt;/type&gt;\n    &lt;ver&gt;2.0&lt;/ver&gt;\n  &lt;/files&gt;\n  &lt;files&gt;\n    &lt;type&gt;release&lt;/type&gt;\n    &lt;ver&gt;1.0&lt;/ver&gt;\n  &lt;/files&gt;\nerror in xpath expression (//type[string()=\"release\"])[1]/.. around (//type[string()=\"release\"])[1]/.. at /opt/anyenv/envs/plenv/versions/5.24.0/lib/perl5/site_perl/5.24.0/XML/Twig.pm line 3648.\n</code></pre>\n\n<p>The wanted output from the 2nd search</p>\n\n<pre><code>    &lt;files&gt;\n        &lt;type&gt;release&lt;/type&gt;\n        &lt;ver&gt;2.0&lt;/ver&gt;\n    &lt;/files&gt;\n</code></pre>\n\n<p>e.g. the first <code>&lt;files&gt;</code> node where the <code>&lt;type&gt; eq 'release'</code>.</p>\n\n<p>According to <a href=\"https://stackoverflow.com/a/1006321/632407\">this answer</a> the used XPath expression <code>(//type[string()=\"release\"])[1]/..'</code> should work, but seems I again missed something important.</p>\n\n<p>Could anyone help, please?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 1, "creation_date": 1463584425, "post_id": 37302731, "comment_id": 62129214, "body": "<code>perldoc -f do</code>:  &quot;<code>do BLOCK</code> does not count as a loop, so the loop control statements <code>next</code>, <code>last</code>, or <code>redo</code> cannot be used to leave or restart the block. &quot;"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1463586348, "post_id": 37302731, "comment_id": 62130586, "body": "@ikegami - <code>perl -E &#39;say($_), last for 5 .. 10</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 2, "creation_date": 1463588516, "post_id": 37302731, "comment_id": 62132045, "body": "@JimDavis Interesting. <code>for</code> as a statement modifier has different semantics than <code>while</code>/<code>until</code> (<code>perl -e&#39;last while 1&#39;</code> gives <code>Can&#39;t &quot;last&quot; outside a loop block</code>). You can label a <code>for</code> statement modifier, but not a <code>while</code>: <code>perl -E&#39;FOO:say, last FOO for 1..10</code>. Also compare the B::Concise output for <code>1 while 1</code>, <code>while (1) { 1 }</code>, <code>1 for 1</code>, and <code>{ 1 }</code>. All but <code>1 while 1</code> generate <code>leaveloop</code> opcodes."}], "answers": [{"comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1463582533, "post_id": 37302847, "comment_id": 62127664, "body": "hmm, didn&#39;t realize this was a duplicate"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 4, "last_activity_date": 1463582353, "creation_date": 1463582353, "answer_id": 37302847, "question_id": 37302731, "link": "https://stackoverflow.com/questions/37302731/why-does-last-behave-differently-in-perl-in-these-examples/37302847#37302847", "title": "Why does &quot;last&quot; behave differently in Perl in these examples?", "body": "<p>From <a href=\"http://perldoc.perl.org/functions/last.html\" rel=\"nofollow\"><code>perldoc -f last</code></a>:</p>\n\n<blockquote>\n  <p>last cannot be used to exit a block that returns a value such as eval\n  {} , sub {} , or do {} , and should not be used to exit a grep() or\n  map() operation.</p>\n</blockquote>\n\n<pre><code>do {\n   # ... \n} while (1); \n</code></pre>\n\n<p>is not actually a looping in Perl, so <code>last</code>, <code>next</code>, <code>redo</code> don't function properly inside of it. </p>\n\n<p>A single block <em>is</em> in fact a loop though, so you can wrap your do expression in a block to allows <code>last</code> to function as you expect:</p>\n\n<pre><code>{\n   do {\n      last; \n   } while (1); \n}\n</code></pre>\n\n<p>A more intuitive solution would by to have a sentinel value that controls exectution:</p>\n\n<pre><code>my $should_stop = 0;\ndo {  \n   if ( &lt;some-condition&gt; ) { $should_stop = 1; }\n} while ( !$should_stop ) \n</code></pre>\n"}], "owner": {"reputation": 295, "user_id": 2387838, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/dbPXP.jpg?s=128&g=1", "display_name": "dennismv", "link": "https://stackoverflow.com/users/2387838/dennismv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "closed_date": 1463582423, "accepted_answer_id": 37302847, "answer_count": 1, "score": 4, "last_activity_date": 1463582353, "creation_date": 1463582094, "question_id": 37302731, "link": "https://stackoverflow.com/questions/37302731/why-does-last-behave-differently-in-perl-in-these-examples", "closed_reason": "Duplicate", "title": "Why does &quot;last&quot; behave differently in Perl in these examples?", "body": "<p>This loop never stops:</p>\n\n<pre><code>while (1)\n{\n    while (1)\n    {\n        last;\n    }\n}  \n</code></pre>\n\n<p>This loop stops</p>\n\n<pre><code>while (1)\n{\n    do\n    {\n        last;\n    }\n    while (1);\n}\n</code></pre>\n\n<p>Without <code>last</code>, they are similar in their infinity.  The 2nd loop structure does not appear to consider the inner loop as a loop.  I presume in 2nd structure <code>last</code> actually exits the outer loop, before the inner loop begins.   But why?  Does the inner loop actually starts \"later\", after <code>do{}</code> has completed its first execution?</p>\n"}, {"tags": ["perl", "centos", "setsid"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1463582370, "post_id": 37301290, "comment_id": 62127540, "body": "Note it will handle a SIGINT sent to it (say, using <code>kill -INT $pid</code>), but the whole point of <code>setsid</code> is to detach the process from the terminal so things like Ctrl-C doesn&#39;t affect it."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1463581941, "creation_date": 1463581941, "answer_id": 37302661, "question_id": 37301290, "link": "https://stackoverflow.com/questions/37301290/handling-ctrl-c-in-perl-when-script-ran-using-setsid/37302661#37302661", "title": "Handling ctrl + c in perl when script ran using setsid", "body": "<p>The <code>setsid</code> command starts your perl program in a new session with no controlling terminal. That leaves no way to interact with the process other than by process ID</p>\n\n<p>This is pretty much the point of <code>setsid</code> in the first place. If you want to retain control of your program then you should run it without <code>setsid</code></p>\n"}, {"tags": [], "owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "is_accepted": true, "score": 5, "last_activity_date": 1463582549, "creation_date": 1463582549, "answer_id": 37302940, "question_id": 37301290, "link": "https://stackoverflow.com/questions/37301290/handling-ctrl-c-in-perl-when-script-ran-using-setsid/37302940#37302940", "title": "Handling ctrl + c in perl when script ran using setsid", "body": "<p><strong>setsid</strong> creates a new session.</p>\n\n<p>The <strong>SIGINT</strong> signal is sent to the foreground process group of a session associated to the tty. Since the process A.pl is now in a different session, effectively in a different process group, the signals are not received by A.pl.</p>\n"}], "owner": {"reputation": 1083, "user_id": 2688175, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1fd9f59324bbd9827b57575de10f625f?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/2688175/niraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 37302940, "answer_count": 2, "score": 3, "last_activity_date": 1465204121, "creation_date": 1463578555, "last_edit_date": 1465204121, "question_id": 37301290, "link": "https://stackoverflow.com/questions/37301290/handling-ctrl-c-in-perl-when-script-ran-using-setsid", "title": "Handling ctrl + c in perl when script ran using setsid", "body": "<p>My Perl script looks like this</p>\n\n<h3>A.pl</h3>\n\n<pre><code>#!/usr/bin/perl\nsystem(\"perl ctrlc.pl\");\n</code></pre>\n\n<h3>ctrlc.pl</h3>\n\n<pre><code>sub signal_handler {\n    print \"Niraj\";\n}\n\n$SIG{INT} = \\&amp;signal_handler;\nprint \"Enter number\";\n\nmy $no1 = &lt;&gt;;\n</code></pre>\n\n<p>When I run <code>perl A.pl</code> and press Ctrl-C it is detecting and printing \"Niraj\".\nBut when I run <code>setsid perl A.pl</code> , it is not detecting Ctrl-C.</p>\n"}, {"tags": ["perl", "http", "authentication", "cgi", "basic-authentication"], "comments": [{"owner": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "edited": false, "score": 0, "creation_date": 1463575790, "post_id": 37299898, "comment_id": 62122643, "body": "So \u2026 you do not know which user and password to provide for which <b>you</b> are asking in the first place?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463596110, "post_id": 37299898, "comment_id": 62136256, "body": "@serenesat: Ooh look. Here&#39;s another. You could actually do something useful this time too"}], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "edited": false, "score": 0, "creation_date": 1463981023, "post_id": 37302107, "comment_id": 62276779, "body": "thanks @Henrik.your answer help me to understand what really is authentication.i do what you said and place my code here."}, {"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "edited": false, "score": 0, "creation_date": 1463997973, "post_id": 37302107, "comment_id": 62285740, "body": "can you tell me how get the request header from browser?i get it by ENV variable but authentication box doesnt disappear."}], "tags": [], "owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "is_accepted": true, "score": 0, "last_activity_date": 1463580523, "creation_date": 1463580523, "answer_id": 37302107, "question_id": 37299898, "link": "https://stackoverflow.com/questions/37299898/how-can-i-set-username-and-password-for-basic-http-authentication/37302107#37302107", "title": "how can i set username and password for basic http authentication?", "body": "<p>Normally the webserver handles the basic authentication, and then it would probably also handle returning 401 for unauthorised requests - so your code id probably pointless.</p>\n\n<p>If you really want to try doing it yourself, you'll also have to parse the headers the browser sends when the user has tried to authenticate, validate the informatin using whatever method you like and return a useable page if successful.</p>\n"}, {"comments": [{"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "edited": false, "score": 0, "creation_date": 1463981871, "post_id": 37302670, "comment_id": 62277031, "body": "i tried this module at the first time but it sends me an eror at line 314 of the module!!"}], "tags": [], "owner": {"reputation": 247, "user_id": 6338639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dE0EhH0ZVHo/AAAAAAAAAAI/AAAAAAAAAFE/4-Rr-uDV1tM/photo.jpg?sz=128", "display_name": "Mitch Jackson", "link": "https://stackoverflow.com/users/6338639/mitch-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1463581952, "creation_date": 1463581952, "answer_id": 37302670, "question_id": 37299898, "link": "https://stackoverflow.com/questions/37299898/how-can-i-set-username-and-password-for-basic-http-authentication/37302670#37302670", "title": "how can i set username and password for basic http authentication?", "body": "<p>Since you're already using CGI, you could drop in the <a href=\"http://search.cpan.org/dist/CGI-Auth-Basic-1.22/lib/CGI/Auth/Basic.pm\" rel=\"nofollow\" title=\"CGI::Auth::Basic\">CGI::Auth::Basic</a> module from CPAN.  Or if you need something more featured, <a href=\"http://search.cpan.org/~ccwallace/CGI-Auth-3.00/Auth.pm\" rel=\"nofollow\">CGI::Auth</a></p>\n"}], "owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 37302107, "answer_count": 2, "score": 1, "last_activity_date": 1465650223, "creation_date": 1463575072, "last_edit_date": 1465650223, "question_id": 37299898, "link": "https://stackoverflow.com/questions/37299898/how-can-i-set-username-and-password-for-basic-http-authentication", "title": "how can i set username and password for basic http authentication?", "body": "<p>i have a perl programm and used from cgi on it.i append the below line to the code </p>\n\n<pre><code>use CGI qw(:cgi);\nprint header(-type =&gt; 'text/html', -status =&gt; '401 Not Authorized',\n         'WWW-Authenticate' =&gt; 'Basic realm=\"Videos\"');\n</code></pre>\n\n<p>and when i enter the url browser wants username and password from me.problem is that i dont know what is user and password and where should i assign them.\nalso any help with another mechanism to provide basic authentication would be good.\ncan anyone help me with this?\nthanks.</p>\n"}, {"tags": ["sql-server", "regex", "perl"], "comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1463574518, "post_id": 37299613, "comment_id": 62121689, "body": "Mainly depends on the SQL server being used. Should be in information_schema for mySQL."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463574896, "post_id": 37299613, "comment_id": 62121966, "body": "You are using Microsoft SQL Server? Which driver do you use to connect with DBI?"}, {"owner": {"reputation": 41, "user_id": 6053927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c4d7313921fcc068f3232da8fe6ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Kalbach", "link": "https://stackoverflow.com/users/6053927/tyler-kalbach"}, "edited": false, "score": 0, "creation_date": 1463575164, "post_id": 37299613, "comment_id": 62122156, "body": "Sorry I should clarify I have an arbitrary hash not from sql server that I iterate through and determine the best datatype for each column.  I&#39;ve written 5 data types out using regex but before I continue I wanted to see if anyone knew of a module that exists with this functionality."}, {"owner": {"reputation": 41, "user_id": 6053927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c4d7313921fcc068f3232da8fe6ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Kalbach", "link": "https://stackoverflow.com/users/6053927/tyler-kalbach"}, "edited": false, "score": 0, "creation_date": 1463575219, "post_id": 37299613, "comment_id": 62122201, "body": "FreeTDS TDS Version 8.0"}], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "is_accepted": false, "score": 0, "last_activity_date": 1463588664, "creation_date": 1463588664, "answer_id": 37305204, "question_id": 37299613, "link": "https://stackoverflow.com/questions/37299613/perl-determine-the-sql-server-data-type-of-each-column-of-a-perl-hash/37305204#37305204", "title": "Perl: determine the sql server data type of each column of a perl hash", "body": "<p>I see you are looking for a module.  But doesn't the following DBI code help in some way:</p>\n\n<pre><code>$sth = $dbh-&gt;column_info( $catalog, $schema, $table, $column );\n</code></pre>\n\n<p>...</p>\n\n<pre><code>$sth-&gt;fetchall_arrayref or $sth-&gt;fetchall_hashref \n</code></pre>\n\n<p>...\netc</p>\n\n<p>The <code>column_info</code> call should provide, via the statement handle, the following field:</p>\n\n<pre><code>DATA_TYPE: The concise data type code.\n</code></pre>\n\n<p>And that code could be used to determine the column data type.</p>\n"}], "owner": {"reputation": 41, "user_id": 6053927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7c4d7313921fcc068f3232da8fe6ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Kalbach", "link": "https://stackoverflow.com/users/6053927/tyler-kalbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463588664, "creation_date": 1463574358, "question_id": 37299613, "link": "https://stackoverflow.com/questions/37299613/perl-determine-the-sql-server-data-type-of-each-column-of-a-perl-hash", "title": "Perl: determine the sql server data type of each column of a perl hash", "body": "<p>I am looking to take a large array of hashes that I pulled from DBI and return the data type of each column IE (datetime, varchar(#), int, etc.).  I built a perl module to do this using regex but as I would like it to be more verbose (ie nvarchar(#), float, etc.) I was wondering if there was a module that already exists to do this before I build it out. </p>\n"}, {"tags": ["perl", "if-statement", "conditional"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1463574846, "creation_date": 1463574846, "answer_id": 37299801, "question_id": 37299571, "link": "https://stackoverflow.com/questions/37299571/is-this-condition-checking-if-the-error-is-a-hash-and-has-arguments-perl/37299801#37299801", "title": "Is this condition checking if the error is a HASH and has arguments perl?", "body": "<p>You are missing a <code>ref</code> in your original condition.</p>\n\n<blockquote>\n<pre><code>$self eq 'HASH' &amp;&amp; %args\n</code></pre>\n</blockquote>\n\n<p>Will check if <code>$self</code> is the string <code>'HASH'</code>. That's likely not what you wanted. You want to check the <a href=\"http://perldoc.perl.org/functions/ref.html\" rel=\"nofollow\">reference type</a> of <code>$self</code>, so you have to do:</p>\n\n<pre><code>ref $self eq 'HASH' &amp;&amp; %args\n</code></pre>\n\n<p>Now it will check the type of the reference and return true if that is <code>HASH</code>.</p>\n\n<hr>\n\n<p>What you have in the full program code is definitely not what you wanted.</p>\n\n<blockquote>\n<pre><code>'HASH' &amp;&amp; %args\n</code></pre>\n</blockquote>\n\n<p>The string <code>'HASH'</code> is always true. <code>%args</code> will return the number of elements of <code>%args</code> because it's scalar context, so it will be true if the hash has anything in it.</p>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 37299801, "answer_count": 1, "score": 1, "last_activity_date": 1463574846, "creation_date": 1463574283, "question_id": 37299571, "link": "https://stackoverflow.com/questions/37299571/is-this-condition-checking-if-the-error-is-a-hash-and-has-arguments-perl", "title": "Is this condition checking if the error is a HASH and has arguments perl?", "body": "<p>Okay this is just a simple question on conditional statements, I just want to make sure my condition is true and not just executing because I have the wrong syntax or I'm not testing properly.</p>\n\n<pre><code># Method for creating error message\nsub new {\n    my ( $class, $error, %args ) = @_;\n    # Initialize error with data\n    my $self = $error;\n    # If the error contains context parameters... Insert parameters into string template\n    if('HASH' &amp;&amp; %args) {\n        foreach my $key (@{ $self-&gt;{context} } ) {\n            # And take the ones we need\n            $self-&gt;{args}-&gt;{$key} = $args{$key};\n       }\n        my @template_args = map { $self-&gt;{args}-&gt;{$_} } @{ $self-&gt;{context} };\n\n        # map/insert arguments into context hash and insert into string template\n        $self-&gt;{message} = sprintf ($self-&gt;{template}, @template_args);\n    }\n    return bless $self, $class;\n}\n</code></pre>\n\n<p>This is  what I was doing but it caused my build to fail:</p>\n\n<pre><code>if($self eq 'HASH' &amp;&amp; %args) {\n    doStuff();\n}\n</code></pre>\n\n<p>Actually seeing this now, it looks wrong, as I am comparing self to HASH and %args</p>\n"}, {"tags": ["perl", "cwd"], "comments": [{"owner": {"reputation": 2860, "user_id": 1975049, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cs535.jpg?s=128&g=1", "display_name": "Patrick B&#246;ker", "link": "https://stackoverflow.com/users/1975049/patrick-b%c3%b6ker"}, "edited": false, "score": 0, "creation_date": 1463575069, "post_id": 37299541, "comment_id": 62122093, "body": "This question is both, too specific (i.e. will probably never help anyone else) and not well researched (some simple print-debugging or debugger session would have revealed the mistake). Please leave yourself a little more time to research and phrase your question before posting in the future. Thank you!"}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 1, "creation_date": 1463578296, "post_id": 37299541, "comment_id": 62124502, "body": "<code>abs_path</code> doesn&#39;t do what you think it does.  It just looks at the argument you gave it, and returns what an absolute path would be if that argument represented a relative path.  It does <b>not</b> search your file system to figure out where that file is and return the actual absolute path to that file.  You need to supply the directory yourself, which is contained in <code>$ARGV[0]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463581641, "post_id": 37299727, "comment_id": 62126993, "body": "Or don&#39;t, and just use <code>glob</code> instead."}], "tags": [], "owner": {"reputation": 2860, "user_id": 1975049, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/cs535.jpg?s=128&g=1", "display_name": "Patrick B&#246;ker", "link": "https://stackoverflow.com/users/1975049/patrick-b%c3%b6ker"}, "is_accepted": true, "score": 2, "last_activity_date": 1463574644, "creation_date": 1463574644, "answer_id": 37299727, "question_id": 37299541, "link": "https://stackoverflow.com/questions/37299541/perl-moving-files-from-dir1-to-dir2/37299727#37299727", "title": "Perl - moving files from DIR1 to DIR2", "body": "<p><code>readdir</code> returns only the filenames in the given directory. Thus to get an absolute filepath you need to prepend $ARGV[0].\nSee the <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow\">perldoc for readdir</a> for detailed information.</p>\n"}], "owner": {"reputation": 340, "user_id": 3689007, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/6NHYN.png?s=128&g=1", "display_name": "Macieyo", "link": "https://stackoverflow.com/users/3689007/macieyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 37299727, "answer_count": 1, "score": 0, "last_activity_date": 1463574670, "creation_date": 1463574203, "last_edit_date": 1463574670, "question_id": 37299541, "link": "https://stackoverflow.com/questions/37299541/perl-moving-files-from-dir1-to-dir2", "title": "Perl - moving files from DIR1 to DIR2", "body": "<p>I am trying to move files from DIR1 to DIR2 using Perl script.\nMy code compiles but unfortunately is not working properly.\nThanks in advance for suggestions</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse File::Copy;\nuse Cwd 'abs_path';\n\nif ( @ARGV != 2 ) {\n    die \"Script takes two parameters: dir1 dir2\";\n}\n\nif ( -d $ARGV[0] &amp;&amp; -d $ARGV[1]  )\n{\n    opendir my $DIR, $ARGV[0] or die \"Read error: $!\";\n\n    while(my $file = readdir $DIR ) \n    {\n        next if ($file eq \".\" or $file eq \"..\");\n\n            my $filepath = abs_path($file);\n            print \"$filepath\\n\";\n\n            move $filepath, $ARGV[1];\n    }\n    closedir $DIR;\n}\nelse\n{\n    print \"Both arguments must be directories!\\n\";\n}\n</code></pre>\n\n<p>Script prints all files in DIR1 but move fails.</p>\n"}, {"tags": ["perl", "shell", "tomcat"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1463573895, "post_id": 37299282, "comment_id": 62121237, "body": "And what problem did you run into? What does <code>$tomcat_ver</code> contain? Not all of us have a tomcat 7.0.57 handy."}], "answers": [{"tags": [], "owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "is_accepted": false, "score": 2, "last_activity_date": 1463576842, "creation_date": 1463576842, "answer_id": 37300571, "question_id": 37299282, "link": "https://stackoverflow.com/questions/37299282/perl-script-that-would-just-print-the-tomcat-version/37300571#37300571", "title": "perl script that would just print the tomcat version", "body": "<p>Since the output of version.sh would be something similar to this:</p>\n\n<pre><code>sh /usr/local/apache-tomcat-7.0.57/bin/version.sh\n\nServer version: Apache Tomcat/7.0.57\nServer built:   Jul 2 2013 08:57:41\nServer number:  7.0.57\nOS Name:        Linux\nOS Version:     2.6.32-042stab084.26\nArchitecture:   amd64\nJVM Version:    1.7.0_21-b11\nJVM Vendor:     Oracle Corporation\n</code></pre>\n\n<p>The regex to be used is </p>\n\n<pre><code>m/Server number:\\s*([0-9.]+)/\n</code></pre>\n\n<p>\"/s\" means \".\" should match \"\\n\" too. Since we are not using it that modifier is not necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1463650390, "post_id": 37317344, "comment_id": 62158115, "body": "This will also catch the 2nd of the 2 blanks after &quot;Server number&quot; and give <code>&quot; 7.0.57&quot;</code>. Also it doesn&#39;t work at all if the text and the number are separated by a tab instead of n blanks (which is not unlikely). <a href=\"http://stackoverflow.com/a/37300571/5830574\">SilentMonk&#39;s pattern</a> is definitely more precise here."}, {"owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1463653394, "post_id": 37317344, "comment_id": 62160255, "body": "@PerlDog I thought that OP want to just print version number without bothering with any spaces i.e just to find out the version. But anyway what you stated is right so ihad updated my answer"}], "tags": [], "owner": {"reputation": 1665, "user_id": 1848140, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c0bc64ef33e6ab5560ce5c534190a6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nagaraju", "link": "https://stackoverflow.com/users/1848140/nagaraju"}, "is_accepted": true, "score": 1, "last_activity_date": 1463653299, "last_edit_date": 1463653299, "creation_date": 1463645084, "answer_id": 37317344, "question_id": 37299282, "link": "https://stackoverflow.com/questions/37299282/perl-script-that-would-just-print-the-tomcat-version/37317344#37317344", "title": "perl script that would just print the tomcat version", "body": "<p>This regex would also do:</p>\n\n<pre><code>m/Server number: (.+)\\n/)/\n</code></pre>\n\n<p>It will match till the new line character is encountered.\nAnd to save it assign $1(predefined variable) to a custom variable where you want to store the version info.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>To trim spaces with the version number:</p>\n\n<pre><code>m/Server number:\\s*(.+)\\n/)/\n</code></pre>\n"}], "owner": {"reputation": 1559, "user_id": 5553202, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/n9E6O.jpg?s=128&g=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5553202/sravan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 37317344, "answer_count": 2, "score": 2, "last_activity_date": 1463653299, "creation_date": 1463573605, "question_id": 37299282, "link": "https://stackoverflow.com/questions/37299282/perl-script-that-would-just-print-the-tomcat-version", "title": "perl script that would just print the tomcat version", "body": "<p>I am trying to extract just the tomcat version from the command in a perl script and ran in to issue with the regex part. Any help would be greatly appreciated. Here's my code:</p>\n\n<pre><code>$tomcat_ver=`sh /usr/local/apache-tomcat-7.0.57/bin/version.sh`;\nif($tomcat_ver=~ m/Server number: (.+)[0-9]$/s)\n{\nmy $tomcat_version=$1;\nprint \"$tomcat_version\\n\";\n\n}\n</code></pre>\n"}, {"tags": ["perl", "duplicates"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1463572029, "post_id": 37297741, "comment_id": 62119836, "body": "You are already doing everything in Perl. What do you want to change?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1463580308, "post_id": 37297741, "comment_id": 62125983, "body": "@OlegV.Volkov: The OP says at the start of the same sentence <i>&quot;I have coded this in [a] simple shell script (just bash)&quot;</i> and I assume that&#39;s what they&#39;re referring to. They have written a hybrid bash script <i>&quot;calling on perl one liners&quot;</i> and they want to remove the bash element altogether"}, {"owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "edited": false, "score": 0, "creation_date": 1463582977, "post_id": 37297741, "comment_id": 62128063, "body": "My problem with the above script is that for some reason out of a group of lines it kept the last line, instead of the first."}], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "edited": false, "score": 0, "creation_date": 1463583154, "post_id": 37298183, "comment_id": 62128213, "body": "I ve tried your version but when i run it from a file it keeps the /last/ line out of a set of lines with the same first 7 digits, and i frankly dont understand why."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467562860, "last_edit_date": 1467562860, "creation_date": 1463570672, "answer_id": 37298183, "question_id": 37297741, "link": "https://stackoverflow.com/questions/37297741/remove-duplicate-lines-on-file-by-substring-preserve-order-perl/37298183#37298183", "title": "Remove duplicate lines on file by substring - preserve order (PERL)", "body": "<p>It looks like entries with the same seven-character prefix may appear anywhere in the file, so it's necessary to use a hash to keep track of which ones have already been encountered. With a 3GB text file this may result in your perl process running out of memory, in which case a different approach is necessary. Please give this a try and see if it comes in under the bar</p>\n\n<p>The <code>tr///</code> operator (the same as <code>y///</code>) doesn't accept variables for its character list, so I've used <code>eval</code> to create a subroutine <code>delimiters()</code> that will count the number of occurrences of <code>$delimiter</code> in <code>$_</code></p>\n\n<p>It's usually easiest to pass the input file as a parameter on the command line, and redirect the output as necessary. That way you can run your program on different files without editing the source, and that's how I've written this program. You should run it as</p>\n\n<pre><code>$ perl filter.pl my_input.file &gt; my_output.file\n</code></pre>\n\n<p></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %seen;\nmy $delimiter = 'x';\nmy $delim_amnt_per_line = 5;\n\neval \"sub delimiters { tr/$delimiter// }\";\n\nwhile ( &lt;&gt; ) {\n    next if delimiters() == $delim_amnt_per_line;\n\n    my ($prefix) = substr $_, 0, 7;\n    next if $seen{$prefix}++;\n\n    print;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1212123x534534534534xx4545454x232322xx\n0901001x876879878787xx0909918x212245xx\n1212133x534534534534xx4549454x232322xx\n4352342xx23232xxx345545x45454x23232xxx\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 37298183, "answer_count": 1, "score": 0, "last_activity_date": 1467562860, "creation_date": 1463569545, "last_edit_date": 1463604393, "question_id": 37297741, "link": "https://stackoverflow.com/questions/37297741/remove-duplicate-lines-on-file-by-substring-preserve-order-perl", "title": "Remove duplicate lines on file by substring - preserve order (PERL)", "body": "<p>i m trying to write a perl script to deal with some 3+ gb text files, that are structured like :</p>\n\n<pre><code>1212123x534534534534xx4545454x232322xx\n0901001x876879878787xx0909918x212245xx\n1212123x534534534534xx4545454x232323xx\n1212133x534534534534xx4549454x232322xx\n4352342xx23232xxx345545x45454x23232xxx\n</code></pre>\n\n<p>I want to perform two operations :</p>\n\n<ol>\n<li><p>Count the number of delimiters per line and compare it to a static number (ie 5), those lines that exceed said number should be output to a file.control.</p></li>\n<li><p>Remove duplicates on the file by substring($line, 0, 7) - first 7 numbers,    but i want to preserve order. I want the output of that in a file.output.</p></li>\n</ol>\n\n<p>I have coded this in simple shell script (just bash), but it took too long to process, the same script calling on perl one liners was quicker, but i m interested in a way to do this purely in perl. </p>\n\n<p>The code i have so far is :</p>\n\n<pre><code>open $file_hndl_ot_control, '&gt;', $FILE_OT_CONTROL;\nopen $file_hndl_ot_out, '&gt;', $FILE_OT_OUTPUT;\n# INPUT.\nopen $file_hndl_in, '&lt;', $FILE_IN;\n\nwhile ($line_in = &lt;$file_hndl_in&gt;)\n{\n    # Calculate n. of delimiters\n    my $delim_cur_line = $line_in =~ y/\"$delimiter\"//;\n    # print \"$commas \\n\" \n\n   if ( $delim_cur_line != $delim_amnt_per_line )\n   {\n      print {$file_hndl_ot_control} \"$line_in\";  \n   }\n\n   # Remove duplicates by substr(0,7) maintain order\n   my substr_in = substr $line_in, 0, 11;\n   print if not $lines{$substr_in}++;\n</code></pre>\n\n<p>}</p>\n\n<p>And i want the file.output file to look like</p>\n\n<pre><code>1212123x534534534534xx4545454x232322xx\n0901001x876879878787xx0909918x212245xx\n1212133x534534534534xx4549454x232322xx\n4352342xx23232xxx345545x45454x23232xxx\n</code></pre>\n\n<p>and the file.control file to look like :</p>\n\n<p>(assuming delimiter control number is 6)</p>\n\n<pre><code>4352342xx23232xxx345545x45454x23232xxx\n</code></pre>\n\n<p>Could someone assist me? Thank you.</p>\n\n<p>Posting edits : Tried code</p>\n\n<pre><code>my %seen;\nmy $delimiter = 'x';\nmy $delim_amnt_per_line = 5;\n\n\n\nopen(my $fh1, \"&gt;&gt;\", \"outputcontrol.txt\");\nopen(my $fh2, \"&gt;&gt;\", \"outputoutput.txt\");\n\nwhile ( &lt;&gt; ) {\n\n    my $count = ($_ =~ y/x//);\n    print  \"$count \\n\";\n    # print $_;\n\n    if ( $count != $delim_amnt_per_line )\n    {\n        print fh1 $_;\n    }\n\n\n    my ($prefix) = substr $_, 0, 7;\n    next if $seen{$prefix}++;\n\n    print fh2;\n}\n</code></pre>\n\n<p>I dont know if i m supposed to post new code in here. But i tried the above, based on your example. What baffles me (i m still very new in perl) is that it doesnt output to either filehandle, but if i redirected from the command line just as you said, it worked perfect. The problem is that i need to output into 2 different files. </p>\n"}, {"tags": ["perl", "shared-hosting", "perlbrew"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1463572648, "post_id": 37296082, "comment_id": 62120262, "body": "Does your hoster already provide perlbrew? What do you get if you run <code>perlbrew</code>? What do you get with <code>perl -v</code>?"}], "owner": {"reputation": 11, "user_id": 6350133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ImIXX.jpg?s=128&g=1", "display_name": "Christopher Rohde", "link": "https://stackoverflow.com/users/6350133/christopher-rohde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1463565619, "creation_date": 1463565169, "last_edit_date": 1463565619, "question_id": 37296082, "link": "https://stackoverflow.com/questions/37296082/failed-perlbrew-install-on-shared-webspace", "title": "Failed Perlbrew install on shared webspace", "body": "<p>I am looking for help to install <code>perlbrew</code> on my shared webspace (Provider: uberspace.de). I used the usually documentation an <code>perlbrew.pl</code> and put: </p>\n\n<pre><code>\\curl -L http://install.perlbrew.pl | bash\n</code></pre>\n\n<p>In my terminal.</p>\n\n<p>Download completed, but than the terminal says:</p>\n\n<pre><code>$ curl -L http://install.perlbrew.pl | bash\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n103  1247  103  1247    0     0   1274      0 --:--:-- --:--:-- --:--:--  1274\n\n## Download the latest perlbrew\n\n## Installing perlbrew\nprint() on closed filehandle $fh at perlbrew.YQFev9 line 893.\nperlbrew is installed: /package/host/localhost/perlbrew/bin/perlbrew\nNOTICE: /package/host/localhost/perlbrew/etc/bashrc already exists and not updated.\nNOTICE: /package/host/localhost/perlbrew/etc/cshrc already exists and not updated.\nFail to create /package/host/localhost/perlbrew/etc/csh_reinit. Please check the permission of /package/host/localhost/perlbrew/etc and try `perlbrew init` again. at perlbrew.YQFev9 line 806.\n</code></pre>\n\n<p>I have no permission to access <code>/package/host/localhost/perlbrew/</code>... <br>\nI think that perlbrew has to install on <code>/perl5/perlbrew</code>, right? </p>\n\n<p>How can I change the location of the installation? <br>\nOr is there another problem?</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 6350251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c02d1132262749793140c831d1dc725?s=128&d=identicon&r=PG&f=1", "display_name": "mynexsus", "link": "https://stackoverflow.com/users/6350251/mynexsus"}, "is_accepted": false, "score": 0, "last_activity_date": 1463565574, "creation_date": 1463565574, "answer_id": 37296245, "question_id": 37295151, "link": "https://stackoverflow.com/questions/37295151/how-send-email-with-attachements-in-perl/37296245#37296245", "title": "how send email with attachements in perl", "body": "<p>mailx - is the solution here.\n<code>echo \"Reminder \" | mailx -asm\\@pe.net -a \"location of file\" -s \"this is email\" -asm\\@pe.net</code></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1463574203, "creation_date": 1463574203, "answer_id": 37299542, "question_id": 37295151, "link": "https://stackoverflow.com/questions/37295151/how-send-email-with-attachements-in-perl/37299542#37299542", "title": "how send email with attachements in perl", "body": "<p>Sending email from Perl using raw Unix commands like that went out of fashion about twenty years ago. You'd be far better off looking for a good CPAN module.</p>\n\n<p>In this case, I'd recommend <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow\">Email::Stuffer</a>.</p>\n\n<pre><code>Email::Stuffer-&gt;from('new@something.com')\n              -&gt;to('new@something.com')\n              -&gt;cc('new@something.com')\n              -&gt;subject('this is our email')\n              -&gt;text_body('Hi, this is the email')\n              -&gt;attach_file('your_file.txt')\n              -&gt;send;\n</code></pre>\n\n<p>Not using CPAN is just making your life harder than it needs to be.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1463562884, "question_id": 1078131}, "owner": {"reputation": 17, "user_id": 6350251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c02d1132262749793140c831d1dc725?s=128&d=identicon&r=PG&f=1", "display_name": "mynexsus", "link": "https://stackoverflow.com/users/6350251/mynexsus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463574203, "creation_date": 1463560501, "question_id": 37295151, "link": "https://stackoverflow.com/questions/37295151/how-send-email-with-attachements-in-perl", "title": "how send email with attachements in perl", "body": "<p>I am trying out following code for send email with attachemnts.\nhowever this code sends only email not attachements.</p>\n\n<p>can someone please help ?</p>\n\n<pre><code>open(SENDMAIL, \"|/usr/lib/sendmail -oi -t -i\") or die \"Can't fork for sendmail: $!\\n\";\n\nprint SENDMAIL &lt;&lt;\"EOF\";\n\nFrom: &lt;new\\@something.com&gt;\n\nTo: &lt;new\\@something.com&gt;\n\nCc: &lt;new\\@something.com&gt;\n\nSubject: this is our email\n\nContent-type: text/plain\n\nHi This is the mail\n\nEOF\n\nclose(SENDMAIL);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463551917, "post_id": 37290139, "comment_id": 62107111, "body": "If I were you I would use a named <code>my</code> variable instead of <code>$_</code> like so <code>while ( my $file = readdir(DURR) ) { ... }</code>. Many operators act on <code>$_</code>, and while your code may work now, a simple change in the future may break it for no obvious reason."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1463546509, "post_id": 37290177, "comment_id": 62105151, "body": "Trying to articulate a question well is a way toward finding an answer to it :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463552183, "post_id": 37290177, "comment_id": 62107221, "body": "There&#39;s no need to <code>chomp $_</code>: the values returned by <code>readdir</code> don&#39;t have a newline at the end. It would also be better to replace both <code>chomp</code> and <code>s&#47;\\r&#47;&#47;</code> with <code>s&#47;\\s+\\z&#47;&#47;</code>, as presumably the contents of <code>@MasterScipt</code> come from a manually-created file, and it is quite possible that the file has spurious whitespace at the end of some of the lines"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463557823, "post_id": 37290177, "comment_id": 62110356, "body": "We are all <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">rubber ducks</a> here... :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1463562614, "post_id": 37290177, "comment_id": 62113360, "body": "@serenesat: The privilege of editing posts is restricted to subscribers with 2,000+ experience points because you are supposed to be responsible with the facility by now. Removing <i>&quot;Thanks&quot;</i> from the end of an answer is not an improvement in any way, and would have been rejected if you still had to submit your changes for peer review. Please don&#39;t edit posts to make insignificant changes."}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463565563, "post_id": 37290177, "comment_id": 62115423, "body": "@Borodin: <i>Thanks</i> is consider as noise because it is not relevant to the post. So I removed it. I  have read on Meta StackOverflow that <b><i>Anything that is not relevant to the post is noise and should be removed. That includes salutations, signatures, &#39;thanks&#39;.</i></b>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 1, "creation_date": 1463568722, "post_id": 37290177, "comment_id": 62117603, "body": "@serenesat: While the &quot;Thanks&quot; should never have been in the post in the first place, the general consensus on Meta is that removing it should be done only as part of a substantive edit that makes a significant and useful change to the post. Did it cause you problems with understanding what was written? Or do you think it altered the meaning so that what was said was incorrect? I seriously doubt it. You could have had a useful effect by writing a comment that explained to the OP that such decorations are inappropriate. Without it all they would see is a churlish and pointless amendment."}], "tags": [], "owner": {"reputation": 65, "user_id": 1988935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82319791acceaacf4d6e78c968fc24d4?s=128&d=identicon&r=PG", "display_name": "whit3y", "link": "https://stackoverflow.com/users/1988935/whit3y"}, "is_accepted": false, "score": 2, "last_activity_date": 1463561924, "last_edit_date": 1463561924, "creation_date": 1463544826, "answer_id": 37290177, "question_id": 37290139, "link": "https://stackoverflow.com/questions/37290139/trying-to-match-two-variables-that-both-contain-special-characters-in-perl/37290177#37290177", "title": "Trying to match two variables that both contain special characters in Perl", "body": "<p>OK, I was staring at this thing for too long, and I think writing this question out helped me answer it.</p>\n\n<p>Not only did I need to add <code>\\Q</code> in my regex, but there was a whitespace character. I did a <code>chomp</code> to both <code>$_</code> and <code>$MasterScipt[$j]</code> and now its working.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1463562087, "last_edit_date": 1463562087, "creation_date": 1463557638, "answer_id": 37293302, "question_id": 37290139, "link": "https://stackoverflow.com/questions/37290139/trying-to-match-two-variables-that-both-contain-special-characters-in-perl/37293302#37293302", "title": "Trying to match two variables that both contain special characters in Perl", "body": "<p>I suggest that your code should look more like this. The main changes are that I have used a named variable <code>$file</code> for the values returned by <code>readdir</code>, and I iterate over the <em>contents</em> of the array <code>@MasterScipt</code> instead of its indexes because <code>$j</code> is never used in your own code except to access the array elements</p>\n\n<pre><code>s/\\s+\\z// for @MasterScipt;\n\nopendir DURR, $FileLocation or die qq{Unable to open directory \"$FileLocation\": $!};\n\nwhile ( my $file = readdir DURR ) {\n\n    for my $pattern ( @MasterScipt ) {\n\n        print \"DARE TO COMPARE\\n\";\n        print \"$pattern\\n\";\n        print \"$file\\n\";\n\n        if ( $file =~ /\\Q$pattern/ ) {\n            print \"WE GOOD VINCENT\\n\";\n        }\n    }\n}\n\nclosedir(DURR);\n</code></pre>\n\n<p>But this is a simple <code>grep</code> operation and it can be written as such. This alternative builds a single regular expression that will match any of the items in <code>@MasterScipt</code> and uses <code>grep</code> to build a list of all values returned by <code>readdir</code> that match it</p>\n\n<pre><code>s/\\s+\\z// for @MasterScipt;\n\nmy @matches = do {\n\n    my $re = join '|', map quotemeta, @MasterScipt;\n\n    opendir my $dh, $FileLocation or die qq{Unable to open directory \"$FileLocation\": $!};\n\n    grep { /$re/ } readdir $dh;\n};\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 1988935, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/82319791acceaacf4d6e78c968fc24d4?s=128&d=identicon&r=PG", "display_name": "whit3y", "link": "https://stackoverflow.com/users/1988935/whit3y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1463562087, "creation_date": 1463544594, "last_edit_date": 1463561813, "question_id": 37290139, "link": "https://stackoverflow.com/questions/37290139/trying-to-match-two-variables-that-both-contain-special-characters-in-perl", "title": "Trying to match two variables that both contain special characters in Perl", "body": "<p>So here is a weird problem. I have a ton of scripts that are executed by \"master\" scripts and I need to verify that what is in the \"master\" is valid. Problem is, these scripts contain special characters and I need to match them to make sure the \"Master\" is referencing the correct scripts.</p>\n\n<p>An example of one file might be</p>\n\n<pre><code>Example's of file names (20160517) [test].sh\n</code></pre>\n\n<p>Here is what my code looks like. <code>@MasterScipt</code> is an array where each element is a filename of what I expect the sub-scripts to be named.</p>\n\n<pre><code>opendir( DURR, $FileLocation );    # I'm looking in a directory where the subscripts reside\n\nforeach ( readdir(DURR) ) {\n\n    for ( my $j = 0; $j != $MasterScriptlength; $j++ ) {\n        $MasterScipt[$j] =~ s/\\r//g;\n        print \"DARE TO COMPARE\\n\";\n        print \"$MasterScipt[$j]\\n\";\n        print \"$_\\n\";\n\n        #I added the \\Q to quotemeta, but I think the issue is with $_\n        #I've tried variations like\n        #if(quotemeta($_) =~/\\Q$MasterScipt[$j]/){\n        #To no avail, I also tried using eq operator and no luck :(\n        if ( $_ =~ /\\Q$MasterScipt[$j]/ ) {\n            print \"WE GOOD VINCENT\\n\";\n        }\n    }\n}\n\nclosedir(DURR);\n</code></pre>\n\n<p>No matter what I seem to do, my output will always look like this</p>\n\n<pre><code>DARE TO COMPARE\nExample's of file names (20160517) [test].sh\nExample's of file names (20160517) [test].sh\n</code></pre>\n"}, {"tags": ["perl", "cookies", "webserver", "httpserver", "io-socket"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463539325, "post_id": 37288643, "comment_id": 62103272, "body": "Re &quot;<i>What happens on the server side to parse a local document for &quot;Set-Cookie:&quot; before it sends the headers?</i>&quot; What does that mean? <code>Set-Cookie</code> is header an HTTP server includes in responses, not something found in documents."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463542054, "post_id": 37288643, "comment_id": 62103902, "body": "The relevant spec is <a href=\"https://tools.ietf.org/html/rfc6265\" rel=\"nofollow noreferrer\">RFC 6265</a>. <a href=\"http://search.cpan.org/perldoc?Cookie::Baker\" rel=\"nofollow noreferrer\">Cookie::Baker</a> appears to generate (the value for) Set-Cookie headers."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463544258, "post_id": 37290063, "comment_id": 62104552, "body": "They asked about &quot;sending cookies to the browser.&quot;"}], "tags": [], "owner": {"reputation": 247, "user_id": 6338639, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dE0EhH0ZVHo/AAAAAAAAAAI/AAAAAAAAAFE/4-Rr-uDV1tM/photo.jpg?sz=128", "display_name": "Mitch Jackson", "link": "https://stackoverflow.com/users/6338639/mitch-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1463544105, "creation_date": 1463544105, "answer_id": 37290063, "question_id": 37288643, "link": "https://stackoverflow.com/questions/37288643/handling-cookies-in-an-http-server/37290063#37290063", "title": "Handling cookies in an HTTP server", "body": "<p>When the browser sends a request to the web server, the header may contain a cookie line.  This is the web browser presenting it's cookies to the web server, along with the web request.  The request may look like this:</p>\n\n<pre><code>GET /index.html HTTP/1.1\nHost: YourURL.com\nCookie: key=value; key=value; key=value\n</code></pre>\n\n<p>If you're parsing the raw request to the server, parse the values from the cookie line.</p>\n\n<p><a href=\"http://search.cpan.org/~bps/HTTP-Server-Simple-0.51/lib/HTTP/Server/Simple.pm%20HTTP::Server::Simple\" rel=\"nofollow\">HTTP::Server::Simple</a> is a drop-in CPAN library that provides a fully-functioning web server, if you don't want to reinvent the wheel.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 6348347, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153755863736427/picture?type=large", "display_name": "Keith Kirkland", "link": "https://stackoverflow.com/users/6348347/keith-kirkland"}, "edited": false, "score": 0, "creation_date": 1463619122, "post_id": 37293818, "comment_id": 62145349, "body": "Thank you... That really helped.  I learned from you I don&#39;t have to parse for cookies prior to sending the document.  I needed to set my Content Type header for the type of script that was called.  Once I did that it worked."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 13, "user_id": 6348347, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153755863736427/picture?type=large", "display_name": "Keith Kirkland", "link": "https://stackoverflow.com/users/6348347/keith-kirkland"}, "edited": false, "score": 0, "creation_date": 1463650207, "post_id": 37293818, "comment_id": 62157991, "body": "@KeithKirkland: I don&#39;t know where you got the idea that you have to <i>parse</i> something to obtain the <code>Set-Cookie</code> values. Their contents depend on what you want to use the cookie for, but it probably shouldn&#39;t be anything to do with the contents of the document you&#39;re sending. And The <code>Content-Type</code> header should reflect the type of data that you&#39;re <i>sending</i>, which may be <i>&quot;the type of script that was called&quot;</i>, although I&#39;m not certain what you mean by that, but won&#39;t necessarily be."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1463560952, "last_edit_date": 1592644375, "creation_date": 1463559147, "answer_id": 37293818, "question_id": 37288643, "link": "https://stackoverflow.com/questions/37288643/handling-cookies-in-an-http-server/37293818#37293818", "title": "Handling cookies in an HTTP server", "body": "<p>You're misunderstanding how cookies work. They are <em>specified</em> by the server and <em>stored</em> on the client, so this question doesn't make sense</p>\n<blockquote>\n<p>I suppose I don't understand how my server is supposed to parse the document-output (from reading the file to send via HTTP) before sending for cookies.</p>\n<p>Likely I am over-complicating this, but how am I supposed to know what key value the document is requesting to send?</p>\n<p>What happens on the server side to parse a local document for &quot;Set-Cookie:&quot; before it sends the headers?</p>\n</blockquote>\n<p>The server doesn't <em>&quot;send for cookies&quot;</em>. When a server receives an HTTP request from the client, it builds and sends a response that contains the information that the client has requested. That response may include <code>Set-Cookie</code> headers to instruct the client to save some information</p>\n<p>A document cannot <em>&quot;request to send&quot;</em> key values\u2014it is just a document!\u2014and there is no <em>&quot;parsing of a local document&quot;</em>. The server simply adds headers that define the data that it wants to be returned if the client sends another request to the same host</p>\n<p>If the requirements are simple then each data item can appear in the headers. For instance</p>\n<pre class=\"lang-none prettyprint-override\"><code>Set-Cookie: localtime=2016-05-18T09:01:16\nSet-Cookie: username=Keith\n</code></pre>\n<p>But if the server wants to store a lot of information relating to the session (the contents of a shopping basket, perhaps) then this may simply be a session ID that corresponds to the ID of a MySQL database record held on the server that contains all the relevant data</p>\n<pre class=\"lang-none prettyprint-override\"><code>Set-Cookie: session_id=76151387\n</code></pre>\n<p>This method also improves security, as only the session ID appear in the HTTP messages, and all the real data is held out of site on the server</p>\n<p>Once the client receives the response, it will save the cookies in any way it likes so that they can be retrieved and returned if the next request is to the same host address. It will simply include a copy of the data from the preceding response, like this</p>\n<pre class=\"lang-none prettyprint-override\"><code>Cookie: localtime=2016-05-18T09:01:16; username=Keith\n</code></pre>\n<p>or</p>\n<pre class=\"lang-none prettyprint-override\"><code>Cookie: session_id=76151387\n</code></pre>\n<p>There are variations on this basic idea; for instance, the server may specify an <code>Expires</code> or a <code>Max-Age</code> field which specifies when the cookie is to be deleted by the client. Suppose the server sends</p>\n<pre><code>Set-Cookie: session_id=76151387; Max-Age=86400\n</code></pre>\n<p>then the cookie will be saved to disk so that it is persistent across restarts of the browser, and deleted after one day (the age is specified in seconds). Without either of these attributes the cookie is a <em>session cookie</em> that is typically held in memory and will be deleted when the browser is closed</p>\n<p>There are other, more esoteric attributes that the server may specify. <a href=\"https://tools.ietf.org/html/rfc6265#section-5.2.2\" rel=\"nofollow noreferrer\"><em><strong>RFC 6265</strong></em></a> is the definitive specification of the HTTP cookie system which describes every aspect in detail</p>\n"}], "owner": {"reputation": 13, "user_id": 6348347, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153755863736427/picture?type=large", "display_name": "Keith Kirkland", "link": "https://stackoverflow.com/users/6348347/keith-kirkland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 37293818, "answer_count": 2, "score": 1, "last_activity_date": 1463560952, "creation_date": 1463534233, "last_edit_date": 1463559301, "question_id": 37288643, "link": "https://stackoverflow.com/questions/37288643/handling-cookies-in-an-http-server", "title": "Handling cookies in an HTTP server", "body": "<p>This is my first time posting to this site, but I come to it often. I am stuck on a project I am coding for fun. I am total newbie to Perl so go easy on me. I've successfully written a web server in Perl, it parses PHP and handles multiple connections. </p>\n\n<p>So far, so good, but I am stuck at sending cookies to the browser.</p>\n\n<p>I suppose I don't understand how my server is supposed to parse the document-output (from reading the file to send via HTTP) before sending for cookies. I've searched for days and have come up empty. Likely I am over-complicating this, but how am I supposed to know what key value the document is requesting to send?</p>\n\n<p>Searching only lands pages parsing documents from the web using <code>HTTP::Cookies</code> which isn't what I'm looking for. What happens on the server side to parse a local document for \"Set-Cookie:\" before it sends the headers?  </p>\n\n<p>I've tried <code>HTTP::Cookies-&gt;extract_cookies($my_local_file)</code>, but it responds back with </p>\n\n<blockquote>\n  <p>\"Can't locate object method \"_header\" via package...\"</p>\n</blockquote>\n\n<p>which makes sense because the header files were never sent since it happened on the server side.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1463534554, "post_id": 37288627, "comment_id": 62102084, "body": "You can read it by line and split on &quot;: &quot;, when the first part is &quot;id&quot; you store the previous hash reference in your array and you start a new hash."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463541645, "post_id": 37289263, "comment_id": 62103817, "body": "<code>$rec = {}; push @recs, $rec;</code> can be written more concisely as <code>push @recs, $rec = {};</code> (which permits a switch from an <code>if</code> statement to an <code>if</code> statement modifier), but the latter is less clear."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1463752946, "post_id": 37289263, "comment_id": 62213609, "body": "Since there&#39;s nothing wrong, care to delete your comment saying there is? You just made <code>$rec</code> anonymous and duplicated some code."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1463541214, "last_edit_date": 1463541214, "creation_date": 1463538695, "answer_id": 37289263, "question_id": 37288627, "link": "https://stackoverflow.com/questions/37288627/how-to-read-every-3-lines-in-perl/37289263#37289263", "title": "How to read every 3 lines in perl?", "body": "<p>The following does what you ask:</p>\n\n<pre><code>my @recs;\nwhile (!eof()) {\n   my %rec;\n   for (1..3) {\n      chomp( my $line = &lt;&gt; );\n      my ($key, $val) = split(/:\\s*/, $line, 2);\n      $rec{$key} = $val;\n   }\n\n   push @recs, \\%rec;\n}\n</code></pre>\n\n<p>And so does the following:</p>\n\n<pre><code>my @recs;\nmy $rec;\nwhile (&lt;&gt;) {\n   chomp;\n   my ($key, $val) = split(/:\\s*/, $_, 2);\n   if ($. % 3 == 1) {\n      $rec = {};\n      push @recs, $rec;\n   }\n\n   $rec-&gt;{$key} = $val;\n}\n</code></pre>\n\n<p>However, I think it would be best to rely on records starting with the <code>id</code> key-value.</p>\n\n<pre><code>my @recs;\nmy $rec;\nwhile (&lt;&gt;) {\n   chomp;\n   my ($key, $val) = split(/:\\s*/, $_, 2)\n   if ($key eq 'id') {\n      $rec = {};\n      push @recs, $rec;\n   }\n\n   $rec-&gt;{$key} = $val;\n}\n</code></pre>\n"}], "owner": {"reputation": 6672, "user_id": 2038901, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/88a2242eb110fda489eee0bcbde6f2bd?s=128&d=identicon&r=PG", "display_name": "Sato", "link": "https://stackoverflow.com/users/2038901/sato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 37289263, "answer_count": 1, "score": 1, "last_activity_date": 1463541391, "creation_date": 1463534088, "question_id": 37288627, "link": "https://stackoverflow.com/questions/37288627/how-to-read-every-3-lines-in-perl", "title": "How to read every 3 lines in perl?", "body": "<p>Sorry for the bad English</p>\n\n<p>I have a txt file like this:</p>\n\n<pre><code>id: 1\nname: a\nsex: m\nid: 2\nname: b\nsex: f\n</code></pre>\n\n<p>so I would like to read every 3 lines of this file to an array</p>\n\n<pre><code>[ { id =&gt;1, name =&gt; a, sex =&gt; m }, { id=&gt;2, name=&gt;b, sex=&gt;f}]\n</code></pre>\n\n<p>How to read every 3 lines in perl?</p>\n"}, {"tags": ["postgresql", "perl", "vagrant", "locale"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463520996, "post_id": 37286019, "comment_id": 62098272, "body": "1) This has nothing to do with Perl or PostgreSQL. If you run <code>locale</code>, you&#39;ll get equivalent warnings. 2) The problem didn&#39;t stop the program from running. Perl simply used a different local than requested to compensate."}], "answers": [{"tags": [], "owner": {"reputation": 635, "user_id": 6326862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93e9080ac0d51968d7f5b706fffa5d18?s=128&d=identicon&r=PG&f=1", "display_name": "lsilva", "link": "https://stackoverflow.com/users/6326862/lsilva"}, "is_accepted": true, "score": 1, "last_activity_date": 1463522301, "creation_date": 1463522301, "answer_id": 37286887, "question_id": 37286019, "link": "https://stackoverflow.com/questions/37286019/how-to-set-locale-settings-while-upgrading-postgresql-from-9-3-to-9-4/37286887#37286887", "title": "How to set locale settings while upgrading PostgreSQL from 9.3 to 9.4", "body": "<p>You need to run this:</p>\n\n<pre><code>aptitude install language-pack-es-base\nlocale-gen\n\u200b\nexport LANGUAGE=en_US.UTF-8\nexport LANG=en_US.UTF-8\nexport LC_ALL=en_US.UTF-8\nlocale-gen en_US.UTF-8\ndpkg-reconfigure locales\n\u200b\necho LANGUAGE=en_US.UTF-8 &gt; /etc/default/locale\necho LANG=en_US.UTF-8 &gt;&gt; /etc/default/locale\necho export LC_ALL=en_US.UTF-8 &gt;&gt; /etc/default/locale\n</code></pre>\n\n<p>This will solve your issue.</p>\n"}, {"comments": [{"owner": {"reputation": 66, "user_id": 2476435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2ad1bc7623a0ec3e982591d83225c2e?s=128&d=identicon&r=PG", "display_name": "Rodrigo Veron", "link": "https://stackoverflow.com/users/2476435/rodrigo-veron"}, "edited": false, "score": 0, "creation_date": 1568822106, "post_id": 46941404, "comment_id": 102399849, "body": "I faced the same problem connecting from a Ubuntu 18.04 laptot to a Debian 9 server traying tu update from postgres 9.1 to 10. I fixed the problem removing AcceptEnv in /etc/ssh/sshd_config as you suggested."}], "tags": [], "owner": {"reputation": 390, "user_id": 3315777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AbnM5.jpg?s=128&g=1", "display_name": "Christian Schmidt", "link": "https://stackoverflow.com/users/3315777/christian-schmidt"}, "is_accepted": false, "score": 2, "last_activity_date": 1508962872, "creation_date": 1508962872, "answer_id": 46941404, "question_id": 37286019, "link": "https://stackoverflow.com/questions/37286019/how-to-set-locale-settings-while-upgrading-postgresql-from-9-3-to-9-4/46941404#46941404", "title": "How to set locale settings while upgrading PostgreSQL from 9.3 to 9.4", "body": "<p>This happens when you SSH from your Mac laptop to a Linux server (including a virtual Linux server running on your laptop). SSH forwards the <code>LANG</code> and <code>LC_*</code> environment variables from the local shell to the remote shell, and some of the values used on the Mac are not valid on the Linux server.</p>\n\n<p>The problem can be fixed in various ways, including installing the missing locales on the server. I recommend simply disabling the SSH environment forwarding, either on the server (remove <code>AcceptEnv</code> in <code>/etc/ssh/sshd_config</code>), or on the laptop (remove <code>SendEnv</code> in <code>/etc/ssh/ssh_config</code>), or both.</p>\n\n<p>Read more in <a href=\"https://stackoverflow.com/questions/2499794/how-to-fix-a-locale-setting-warning-from-perl/7413863\">How to fix a locale setting warning from Perl?</a></p>\n"}], "owner": {"reputation": 23, "user_id": 5149517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tlqDv.png?s=128&g=1", "display_name": "Guilherme Duarte", "link": "https://stackoverflow.com/users/5149517/guilherme-duarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1613, "favorite_count": 2, "accepted_answer_id": 37286887, "answer_count": 2, "score": 2, "last_activity_date": 1538947554, "creation_date": 1463518232, "last_edit_date": 1538947554, "question_id": 37286019, "link": "https://stackoverflow.com/questions/37286019/how-to-set-locale-settings-while-upgrading-postgresql-from-9-3-to-9-4", "title": "How to set locale settings while upgrading PostgreSQL from 9.3 to 9.4", "body": "<p>When I run:</p>\n\n<pre><code>sudo pg_upgradecluster 9.3 main\n</code></pre>\n\n<p>I'm getting this error:</p>\n\n<pre><code>&gt; perl: warning: Falling back to the standard locale (\"C\"). perl:\n&gt; warning: Setting locale failed. perl: warning: Please check that your\n&gt; locale settings:  LANGUAGE = (unset),     LC_ALL = (unset),   LC_CTYPE =\n&gt; \"UTF-8\",  LANG = \"en_US.UTF-8\"\n&gt;     are supported and installed on your system. perl: warning: Falling back to the standard locale (\"C\"). Error: The locale requested by the\n&gt; environment is invalid. Error: Could not create target cluster\n</code></pre>\n\n<p>How could change the locale to perform this command?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 0, "creation_date": 1463577554, "post_id": 37284209, "comment_id": 62123922, "body": "This is really cool. To find out more about how/why this works, google &quot;perl hash slice&quot;. Note the syntax <code>@$order{@headers}</code>. You might think you could also do something like this, but you cannot. <code>$order-&gt;{@headers}</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 1, "creation_date": 1463582027, "post_id": 37284209, "comment_id": 62127284, "body": "@Mort, However, you can do <a href=\"http://www.perlmonks.org/?node_id=977408\" rel=\"nofollow noreferrer\"><code>$order-&gt;@{@headers}</code></a> since 5.24 (or since 5.20 if you use <code>use feature qw( postderef );</code> and <code>no warnings qw( experimental::postderef );</code>);"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1463511460, "creation_date": 1463511460, "answer_id": 37284209, "question_id": 37283973, "link": "https://stackoverflow.com/questions/37283973/fix-hash-positions-in-hash/37284209#37284209", "title": "Fix hash positions in hash", "body": "<p>If you're were using Text::CSV or Text::CSV_XS,</p>\n\n<pre><code># Outside the loop\n$csv-&gt;column_names([qw( ... )]);\n\n# Inside the loop\n$csv-&gt;print_hr($fh, $order);\n</code></pre>\n\n<p>But you don't appear to be using either of those modules(?!?!), so</p>\n\n<pre><code># Outside the loop\nmy @headers = qw( ... );\n\n# Inside the loop\nprint($fh to_csv(@$order{@headers}), \"\\r\\n\");\n</code></pre>\n"}], "owner": {"reputation": 1246, "user_id": 4577456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10152662960092727/picture?type=large", "display_name": "Liam Fell", "link": "https://stackoverflow.com/users/4577456/liam-fell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1463542819, "creation_date": 1463510559, "question_id": 37283973, "link": "https://stackoverflow.com/questions/37283973/fix-hash-positions-in-hash", "title": "Fix hash positions in hash", "body": "<p>I have the following code which passes data to a csv, however the column order in the CSV is seemingly random (I pass a hash to the CSV). I'm having real difficulty defining the order of the columns. </p>\n\n<p>Is there a way I can fix the position of hashes in my %output_var hash so I can effectively define the column order in my CSV?</p>\n\n<pre><code>$common-&gt;print_header('text/csv','export_order_products.csv');\nprint common::to_csv(sort values %output_var).\"\\r\\n\";\nmy $cart_id;\nforeach my $order (@data_to_export) {\n  $order-&gt;{'order-id'} =~ s/\\.cgi//;\n  $order-&gt;{'order-item-id'} =~ s/\\.cgi//;\n  $order-&gt;{'purchase-date'} =~ s/\\.cgi//;\n  my @line;\n  for (sort {$output_var{$a} cmp $output_var{$b}; } keys %output_var) {\n    push @line, $order-&gt;{$_};\n  }\n   print common::to_csv(@line).\"\\r\\n\";\n                }\n</code></pre>\n\n<p>CSV sub:</p>\n\n<pre><code>sub to_csv {\n    my ($csv_line);\n    my (@fields) = @_;\n    my $i;\n    for ($i=0; $i&lt;scalar(@fields); $i++) {\n        $fields[$i] =~ s/\\r/\\\\r/gis;\n        $fields[$i] =~ s/\\n/\\\\n/gis;\n        $fields[$i] =~ s/\"/\"\"/gis; # -- \"\n        $fields[$i] =~ s/(.*,.*)/\"$1\"/gis;\n        $fields[$i] = '' if ($fields[$i] eq '0');\n    }\n    $csv_line = join ',', @fields;\n    return $csv_line;\n}\n</code></pre>\n"}, {"tags": ["perl", "xml-twig"], "comments": [{"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1463504576, "post_id": 37282103, "comment_id": 62089838, "body": "@toolic According the doc, <i>Handlers are triggered in fixed order</i> , so probably me doesn&#39;t understand how the order is determined - aka, how to solve the above... ;)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463504796, "post_id": 37282103, "comment_id": 62089939, "body": "The problem is - the handers trigger in a fixed order <i>for a particular element</i>. They reset for each separate one."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 5138949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b1e86a638ce25774b0c64c33257f765?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/5138949/niraj"}, "edited": false, "score": 0, "creation_date": 1558092415, "post_id": 37282340, "comment_id": 98996078, "body": "Is there any way to skip an element if it has a sub string? e.g. I want to ignore all <code>&lt;fo:block&gt;</code> which has &quot;Reference Manual&quot; in <code>&lt;fo:block font-family=&quot;Helvetica,Symbol,ZapfDingbats,Arial Unicode&quot; font-size=&quot;10pt&quot; font-weight=&quot;bold&quot; line-height=&quot;12pt&quot; padding-bottom=&quot;0.5mm&quot; text-align=&quot;center&quot;&gt;Reference Manual, Rev. 3, 10&#47;2018&lt;&#47;fo:block&gt;</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1463505062, "last_edit_date": 1463505062, "creation_date": 1463504653, "answer_id": 37282340, "question_id": 37282103, "link": "https://stackoverflow.com/questions/37282103/how-to-skip-unwanted-elements-using-xmltwig/37282340#37282340", "title": "How to skip unwanted elements using XML::Twig?", "body": "<p>The \"returns zero\" thing is a bit of a red herring in this context. If you had multiple matches on your element, then <em>one</em> of them returning zero would inhibit the others.</p>\n\n<p>That doesn't mean it won't still try and process subsequent nodes.</p>\n\n<p>I think you're getting confused - you have handlers for separate subelements of your <code>&lt;ADN&gt;</code> elements - and they trigger separately. That's by design. There is a precedence order for <code>xpath</code> but only on duplicate matches. Yours are completely separate though, so they all 'fire' because they trigger on different elements. </p>\n\n<p>However, you might find it useful to know - <code>twig_handlers</code> allows <code>xpath</code> expressions - so you can explicitly say:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\nmy $twig = XML::Twig-&gt;parse( \\*DATA );\n$twig -&gt; set_pretty_print('indented_a');\n\nforeach my $ADN ( $twig -&gt; findnodes('//ADN/GID[string()=\"1\"]/..') ) {\n   $ADN -&gt; print;\n}\n</code></pre>\n\n<p>This also works in the <code>twig_handlers</code> syntax. I would suggest doing a handler is only really useful if you need to pre-process your XML, or you're memory constrained. With 20,000 nodes, you may be. (at which point <code>purge</code> is your friend). </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\nmy $twig = XML::Twig-&gt;new(\n   pretty_print  =&gt; 'indented_a',\n   twig_handlers =&gt; {\n      '//ADN[string(GID)=\"1\"]' =&gt; sub { $_-&gt;print }\n   }\n);\n\n$twig-&gt;parse( \\*DATA );\n\n\n__DATA__\n&lt;ArrayOfADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;1&lt;/GID&gt;\n        &lt;ID&gt;1&lt;/ID&gt;\n        &lt;Name&gt;name 1&lt;/Name&gt;\n    &lt;/ADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;2&lt;/GID&gt;\n        &lt;ID&gt;20&lt;/ID&gt;\n        &lt;Name&gt;should be skipped because GID != 1&lt;/Name&gt;\n    &lt;/ADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;1&lt;/GID&gt;\n        &lt;ID&gt;1000&lt;/ID&gt;\n        &lt;Name&gt;other name 1000&lt;/Name&gt;\n    &lt;/ADN&gt;\n&lt;/ArrayOfADN&gt;\n</code></pre>\n\n<p>Although, I would probably just do it this way instead:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nsub process_ADN {\n    my ( $twig, $ADN ) = @_; \n    return unless $ADN -&gt; first_child_text('GID') == 1;\n    print \"ADN with name:\", $ADN -&gt; first_child_text('Name'),\" Found\\n\";\n}\n\n\nmy $twig = XML::Twig-&gt;new(\n   pretty_print  =&gt; 'indented_a',\n   twig_handlers =&gt; {\n      'ADN' =&gt; \\&amp;process_ADN\n   }\n);\n\n$twig-&gt;parse( \\*DATA );\n\n\n__DATA__\n&lt;ArrayOfADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;1&lt;/GID&gt;\n        &lt;ID&gt;1&lt;/ID&gt;\n        &lt;Name&gt;name 1&lt;/Name&gt;\n    &lt;/ADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;2&lt;/GID&gt;\n        &lt;ID&gt;20&lt;/ID&gt;\n        &lt;Name&gt;should be skipped because GID != 1&lt;/Name&gt;\n    &lt;/ADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;1&lt;/GID&gt;\n        &lt;ID&gt;1000&lt;/ID&gt;\n        &lt;Name&gt;other name 1000&lt;/Name&gt;\n    &lt;/ADN&gt;\n&lt;/ArrayOfADN&gt;\n</code></pre>\n"}], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 37282340, "answer_count": 1, "score": 2, "last_activity_date": 1463505062, "creation_date": 1463503735, "last_edit_date": 1463504656, "question_id": 37282103, "link": "https://stackoverflow.com/questions/37282103/how-to-skip-unwanted-elements-using-xmltwig", "title": "How to skip unwanted elements using XML::Twig?", "body": "<p>Trying to learn <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\">XML::Twig</a> and fetch some data from an XML document.</p>\n\n<p>My XML contains 20k+ <code>&lt;ADN&gt;</code> elements. Eaach <code>&lt;ADN&gt;</code> element contains tens of child elements, one of them is the <code>&lt;GID&gt;</code>. I want process only those <code>ADN</code> where the <code>GID</code> == 1. (See the example XML is the <code>__DATA__</code>)</p>\n\n<p>The docs says:</p>\n\n<blockquote>\n  <p>Handlers are triggered in fixed order, sorted by their type (xpath\n  expressions first, then regexps, then level), then by whether they\n  specify a full path (starting at the root element) or not, then by\n  number of steps in the expression , then number of predicates, then\n  number of tests in predicates. Handlers where the last step does not\n  specify a step (foo/bar/*) are triggered after other XPath handlers.\n  Finally <em>all</em> handlers are triggered last.</p>\n  \n  <p>Important: once a handler has been triggered if it returns 0 then no\n  other handler is called, except a <em>all</em> handler which will be called\n  anyway.</p>\n</blockquote>\n\n<p>My actual code:</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse XML::Twig;\nuse Data::Dumper;\n\nmy $cat = load_xml_catalog();\nsay Dumper $cat;\n\nsub load_xml_catalog {\n        my $hr;\n        my $current;\n        my $twig= XML::Twig-&gt;new(\n        twig_roots =&gt; {\n            ADN =&gt; sub {      # process the &lt;ADN&gt; elements\n                $_-&gt;purge;    # and purge when finishes with one\n            },\n        },\n        twig_handlers =&gt; {\n            'ADN/GID' =&gt; sub {\n                return 1 if $_-&gt;trimmed_text == 1;\n                return 0;     # skip the other handlers - if the GID != 1\n            },\n\n            'ADN/ID' =&gt; sub { #remember the ID as a \"key\" into the '$hr' for the \"current\" ADN\n                $current = $_-&gt;trimmed_text;\n                $hr-&gt;{$current}{$_-&gt;tag} = $_-&gt;trimmed_text;\n            },\n\n            #rules for the wanted data extracting &amp; storing to $hr-&gt;{$current}\n            'ADN/Name' =&gt; sub {\n                $hr-&gt;{$current}{$_-&gt;tag} = $_-&gt;text;\n            },\n        },\n        );\n        $twig-&gt;parse(\\*DATA);\n    return $hr;\n}\n__DATA__\n&lt;ArrayOfADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;1&lt;/GID&gt;\n        &lt;ID&gt;1&lt;/ID&gt;\n        &lt;Name&gt;name 1&lt;/Name&gt;\n    &lt;/ADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;2&lt;/GID&gt;\n        &lt;ID&gt;20&lt;/ID&gt;\n        &lt;Name&gt;should be skipped because GID != 1&lt;/Name&gt;\n    &lt;/ADN&gt;\n    &lt;ADN&gt;\n        &lt;GID&gt;1&lt;/GID&gt;\n        &lt;ID&gt;1000&lt;/ID&gt;\n        &lt;Name&gt;other name 1000&lt;/Name&gt;\n    &lt;/ADN&gt;\n&lt;/ArrayOfADN&gt;\n</code></pre>\n\n<p>It outputs</p>\n\n<pre><code>$VAR1 = {\n          '1000' =&gt; {\n                    'ID' =&gt; '1000',\n                    'Name' =&gt; 'other name 1000'\n                  },\n          '1' =&gt; {\n                 'Name' =&gt; 'name 1',\n                 'ID' =&gt; '1'\n               },\n          '20' =&gt; {\n                  'Name' =&gt; 'should be skipped because GID != 1',\n                  'ID' =&gt; '20'\n                }\n        };\n</code></pre>\n\n<p>So,</p>\n\n<ul>\n<li>The handler for the <code>ADN/GID</code> returns <code>0</code> when the GID != 1.</li>\n<li>Why the other handlers are still called?</li>\n<li>The expected (wanted) output is without the <code>'20' =&gt; ...</code> .</li>\n<li>How to skip the unwanted nodes correctly?</li>\n</ul>\n"}, {"tags": ["perl", "email", "cron", "rhel"], "answers": [{"comments": [{"owner": {"reputation": 205, "user_id": 3164754, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6b81e0aaa5db20bcbfb3fa3ed4150a6e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164754", "link": "https://stackoverflow.com/users/3164754/user3164754"}, "edited": false, "score": 0, "creation_date": 1463503415, "post_id": 37281601, "comment_id": 62089227, "body": "Awesome, Wayne. I ran the command like you said and noticed that the cron was having trouble loading a lib file for the script to run. I am now loading it from a wrapper in the script. Thanks for the quick response."}], "tags": [], "owner": {"reputation": 405, "user_id": 6336615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-54JWXHU1LhI/AAAAAAAAAAI/AAAAAAAABKc/N9fUA8Ue7e4/photo.jpg?sz=128", "display_name": "Wayne Booth", "link": "https://stackoverflow.com/users/6336615/wayne-booth"}, "is_accepted": true, "score": 2, "last_activity_date": 1463502057, "creation_date": 1463502057, "answer_id": 37281601, "question_id": 37281173, "link": "https://stackoverflow.com/questions/37281173/different-mail-from-shell-script-and-cron-running-the-script/37281601#37281601", "title": "Different mail from shell script and cron running the script", "body": "<p>While running from crontab you cannot rely upon any environment variables, TTY, or paths. Sounds like you've got paths sorted but the mailer may be expecting to know something about you. Try running your script without your environment, to get meaningful messages about what your problem is: su {your_name} -c {your script}</p>\n"}], "owner": {"reputation": 205, "user_id": 3164754, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6b81e0aaa5db20bcbfb3fa3ed4150a6e?s=128&d=identicon&r=PG&f=1", "display_name": "user3164754", "link": "https://stackoverflow.com/users/3164754/user3164754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 37281601, "answer_count": 1, "score": 0, "last_activity_date": 1463502057, "creation_date": 1463500719, "last_edit_date": 1463501004, "question_id": 37281173, "link": "https://stackoverflow.com/questions/37281173/different-mail-from-shell-script-and-cron-running-the-script", "title": "Different mail from shell script and cron running the script", "body": "<p>I have a <code>perl</code> script that executes a command. I am saving the output of this command to an array and checking the content on the output to mail me a success or a failure message. </p>\n\n<p>This works fine when i run the script itself. But when i schedule the script to run as a <code>cronjob</code> i get a failure mail irrespective of the output. </p>\n\n<p>I am using all the <code>abs paths</code> in script and know the cron is executing since i see in my logs that the <code>command is executed successfully</code>. </p>\n\n<p>Can someone tell me why the difference? </p>\n\n<p>One thing to notice is, the command takes about a minute to finish executing and the script is waiting till the command is executed to check the output. So i am seeing a little delay in the mail when i run the script. But in the cron, i get a mail immediately at the run time. I am assuming the cron isn't waiting for the command to execute and check the output.</p>\n\n<p>Could that be the case?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 1, "creation_date": 1463499875, "post_id": 37280693, "comment_id": 62086922, "body": "The above code does not print the modified filename to terminal.  You&#39;re printing it first, and then you&#39;re doing a substitution on an uninitialized value (the <code>$_</code> variable).    Please paste the code you actually tried, that represents your best attempt at solving the problem."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1463500083, "post_id": 37280693, "comment_id": 62087043, "body": "See <a href=\"http://p3rl.org/rename\" rel=\"nofollow noreferrer\">rename</a>."}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463503666, "post_id": 37281106, "comment_id": 62089352, "body": "Thanks @ikegami for the supplement. I&#39;m still not used to the <code>&#47;r</code>. Ahhrg. And I used CamelCase. Shame on me. Sorry for that."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 1, "last_activity_date": 1463502498, "last_edit_date": 1463502498, "creation_date": 1463500553, "answer_id": 37281106, "question_id": 37280693, "link": "https://stackoverflow.com/questions/37280693/modify-name-of-files-in-a-directory/37281106#37281106", "title": "modify name of files in a directory", "body": "<pre><code>my @files = glob(\"*.grb *.out\");\nforeach my $file (@files) {\n    (my $newName = $file) =~ s/d02/d03/g;\n    rename $file, $newName;\n}\n</code></pre>\n\n<p>Or if you have Perl 5.14+,</p>\n\n<pre><code>my @files = glob(\"*.grb *.out\");\nforeach my $file (@files) {\n    my $newName = $file =~ s/d02/d03/gr;\n    rename $file, $newName;\n}\n</code></pre>\n\n<p>This will rename all <code>*d02*</code> files to <code>*d03*</code> files (on-disk).</p>\n"}], "owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 37281106, "answer_count": 1, "score": 0, "last_activity_date": 1463502498, "creation_date": 1463499568, "last_edit_date": 1463499590, "question_id": 37280693, "link": "https://stackoverflow.com/questions/37280693/modify-name-of-files-in-a-directory", "title": "modify name of files in a directory", "body": "<p>I need to modify part of the name of files in a directory, I use the following code, but it only prints in terminal the modification of string but not save it</p>\n\n<pre><code>my @files = glob(\"*.grb *.out\");\nforeach my $file (@files) {\n    print \"$file\\n\";\n    s/d02/d03/g;\n}\n</code></pre>\n\n<p>How can I get them with the string d03 instead ofg d02?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 2, "creation_date": 1463497835, "post_id": 37279814, "comment_id": 62085366, "body": "I think your usage of <code>GetOptions</code> is correct. However, you are suffering of too many parameters which may indicate a design problem... do those arguments have reasonable defaults? Are they tied to a particular machine and therefore better suited to be part of a configuration file instead? Can they be guessed directly by your script instead of providing them as input? I would rather work on that."}, {"owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "reply_to_user": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "edited": false, "score": 0, "creation_date": 1463498717, "post_id": 37279814, "comment_id": 62086011, "body": "@eballes IP&#39;s are different. There is nothing that i could get rid of from GetOptions.We have multiple test beds and we want the script to run on all the machines."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "edited": false, "score": 0, "creation_date": 1463498590, "post_id": 37280130, "comment_id": 62085907, "body": "How is your solution better than the one that i&#39;m currently using. If i have 10 options, I need to specify all the options in qw(endpoint customer_id client option4 option 5...... option 10)  Which is pretty much similar to what i&#39;m currently doing using an if stmt"}, {"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "reply_to_user": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "edited": false, "score": 2, "creation_date": 1463498767, "post_id": 37280130, "comment_id": 62086049, "body": "@user3587025: Yes, this Answer still uses an if statement.  But, the incremental improvement is that you need to maintain less code because you need not have redundant <code>!$self-&gt;{&#39;...&#39;} ||</code>.  <code>Getopt::Long</code> has no inherent way to specify required options."}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 2, "last_activity_date": 1463498173, "creation_date": 1463498173, "answer_id": 37280130, "question_id": 37279814, "link": "https://stackoverflow.com/questions/37279814/command-line-options-in-perl/37280130#37280130", "title": "command line options in perl", "body": "<p>One way is to use <code>all</code> from <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow\">List::Util</a>:</p>\n\n<pre><code> unless ( all { defined $self-&gt;{$_} } qw(endpoint customer_id client) ){\n    # error\n }\n</code></pre>\n\n<p>If you don't have a recent version of <code>List::Util</code>, use <a href=\"https://metacpan.org/pod/List::MoreUtils\" rel=\"nofollow\">List::MoreUtils</a></p>\n"}, {"comments": [{"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 0, "creation_date": 1463506677, "post_id": 37281012, "comment_id": 62090958, "body": "This solution doesn&#39;t distinguish between required and optional arguments.  I&#39;m surprised it has the most votes."}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "reply_to_user": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1463506820, "post_id": 37281012, "comment_id": 62091020, "body": "I interpreted the original question to imply that all of the options were required."}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "reply_to_user": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "edited": false, "score": 1, "creation_date": 1463506963, "post_id": 37281012, "comment_id": 62091096, "body": "but even if not, it could be easily modified.  Create <code>$self-&gt;{required} = {}</code>, and then change the <code>GetOptions</code> required parameters to point to a reference to member of this new inner hash, and iterate over that rather than the main <code>%{$self}</code>"}], "tags": [], "owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "is_accepted": false, "score": 2, "last_activity_date": 1463500312, "creation_date": 1463500312, "answer_id": 37281012, "question_id": 37279814, "link": "https://stackoverflow.com/questions/37279814/command-line-options-in-perl/37281012#37281012", "title": "command line options in perl", "body": "<p>Can you just check to see that you have the proper number of defined keys in your hash?</p>\n\n<pre><code>my @options = grep { defined $self-&gt;{$_} }  keys %{$self};\ndie \"Missing options\\n\" unless @options == 10;\n</code></pre>\n\n<p>Or if you want your usage statement to be more explicit:</p>\n\n<pre><code>for my $opt (keys %{$self}) {\n    die \"Missing option --$opt\\n\" unless defined $self-&gt;{$opt};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1463507086, "last_edit_date": 1463507086, "creation_date": 1463504122, "answer_id": 37282200, "question_id": 37279814, "link": "https://stackoverflow.com/questions/37279814/command-line-options-in-perl/37282200#37282200", "title": "command line options in perl", "body": "<p>The version below removes some of the clunkiness while providing a more specific error message.</p>\n\n<pre><code>my @required = qw( endpoint customer_id client );\n\nif ( my @missing = grep { !$self-&gt;{$_} } @required ) {\n   $self-&gt;abort(\"[Startup] Missing required arguments: @missing\");\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 37282200, "answer_count": 3, "score": 1, "last_activity_date": 1463507086, "creation_date": 1463497410, "last_edit_date": 1463498415, "question_id": 37279814, "link": "https://stackoverflow.com/questions/37279814/command-line-options-in-perl", "title": "command line options in perl", "body": "<p>I invoke my perl script by passing a number of command line options. If the required command line options are not passed by the user while invoking the script, the script should terminate.  Currently I'm doing a simple check using <code>if statement</code>.  If the required arguments are more than 10, using If statement looks clunky.  I'm just wondering if there is a better way to do it than just using an if statement.</p>\n\n<p>Command line options :</p>\n\n<pre><code>sub startup {\n   my ($self) = @_;\n\n    GetOptions (\n        \"endpoint|e=s\"           =&gt; \\$self-&gt;{'endpoint'},\n        \"port|pt=s\"              =&gt; \\$self-&gt;{'port'},\n        \"client|c=s\"             =&gt; \\$self-&gt;{'client'},\n        \"client_interface|ci=s\"  =&gt; \\$self-&gt;{'client_interface'},\n        \"origin|o=s\"             =&gt; \\$self-&gt;{'origin'},\n        \"origin_interface|oi=s\"  =&gt; \\$self-&gt;{'origin_interface'},\n        \"customer_id|cid=s\"      =&gt; \\$self-&gt;{'customer_id'},\n        \"endpoint_id|eid=s\"      =&gt; \\$self-&gt;{'endpoint_id'},\n         ) || $self-&gt;abort( \"Invalid command line options.\n               Valid options are endpoint,port,client,client_interface,\n   origin,origin_interface,customer_id,endpoint_id\");\n</code></pre>\n\n<p>#Terminate the script execution if --endpoint ip and --customer id and --client   are not passed</p>\n\n<pre><code> if ( !$self-&gt;{'endpoint'} || !$self-&gt;{'customer_id'} || !$self-&gt;{'client'}){\n        $self-&gt;abort( '[Startup] endpoint customer and client are required arguments.'\n                      . 'Please provide --endpoint and --customer id and -- client  ');\n    }\n</code></pre>\n\n<p>command to invoke the script :</p>\n\n<pre><code>./testframework --scriptname -- --endpoint=198.18.179.42  --port=5000 --client=1.1.1.1 --client_interface=2.2.2.2 --origin=3.3.3.3 --origin_interface= --Outertunnel=Tunnel0 --Innertunnel=Tunnel2 --customer_id=900010 --endpoint_id=2859588 \n</code></pre>\n"}, {"tags": ["bash", "perl", "email"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1463493721, "post_id": 37277583, "comment_id": 62082102, "body": "<a href=\"http://stackoverflow.com/questions/34455133/error-sslv3-alert-handshake-failure-using-netsmtptls\">related</a>,<a href=\"http://stackoverflow.com/questions/26385603/facebook-sdk-for-php-error-curlexception-35-error14094410ssl-routinesssl3\">also</a>,<a href=\"http://openssl.6102.n7.nabble.com/TLS-ALERT-PROTOCOL-VERSION-Error-td12978.html\" rel=\"nofollow noreferrer\">also</a>"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 5591381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb35c5aa2e86e602d991fd8ea4a4836d?s=128&d=identicon&r=PG&f=1", "display_name": "Xuti", "link": "https://stackoverflow.com/users/5591381/xuti"}, "edited": false, "score": 0, "creation_date": 1463566625, "post_id": 37280380, "comment_id": 62116119, "body": "If I change Net::SMTP::TLS to Net::SMTP, all syntax of script also changes. I don&#39;t know how it works Is there any example so I can see how it works? Thank you"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 59, "user_id": 5591381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb35c5aa2e86e602d991fd8ea4a4836d?s=128&d=identicon&r=PG&f=1", "display_name": "Xuti", "link": "https://stackoverflow.com/users/5591381/xuti"}, "edited": false, "score": 0, "creation_date": 1463567505, "post_id": 37280380, "comment_id": 62116782, "body": "@Xuti: since the interface of Net::SMTP::TLS was designed after the interface of Net::SMTP you should probably not need to change anything apart from the module name. But you need to add a call to <code>$smtp-&gt;starttls</code> right after you&#39;ve created the object. For more information have a look <a href=\"https://metacpan.org/pod/Net::SMTP\" rel=\"nofollow noreferrer\">at the documentation for Net::SMTP</a>."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 4, "last_activity_date": 1463498789, "creation_date": 1463498789, "answer_id": 37280380, "question_id": 37277583, "link": "https://stackoverflow.com/questions/37277583/send-mail-through-gmail-using-perl/37280380#37280380", "title": "Send mail through Gmail using Perl", "body": "<p><a href=\"https://metacpan.org/pod/Net::SMTP::TLS\" rel=\"nofollow\">Net::SMTP::TLS</a> is unmaintained since 2006 and has bugs which make it impossible to use with current versions of IO::Socket::SSL (due to more strict checking of given parameters) and with current sites (due to preference for SSL 3.0). These bugs can be fixed by modifying Net::SMTP::TLS or can be worked around by modifying IO::Socket::SSL (which is the wrong thing to do, but there are enough sites which propagate this).</p>\n\n<p>My guess is that you've tried to use this module and made some changes either to make it work, either by modifying Net::SMTP::TLS or by modifying IO::Socket::SSL. And due to some updates part of these modifications are gone now. Due to the nature of the bugs this might cause you to try SSL 3.0 which is not support by gmail.</p>\n\n<p>My recommendation: throw Net::SMTP::TLS far far away and use Net::SMTP (core module). The recent versions 3.x (release 2014) support TLS and IPv6 natively (if IO::Socket::SSL is installed). It is included with perl 5.22+.  If you cannot use the newest version you can install <a href=\"https://metacpan.org/release/Net-SSLGlue\" rel=\"nofollow\">Net::SSLGlue::SSL</a> which make using SSL with older versions of Net::SMTP possible. </p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 5591381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb35c5aa2e86e602d991fd8ea4a4836d?s=128&d=identicon&r=PG&f=1", "display_name": "Xuti", "link": "https://stackoverflow.com/users/5591381/xuti"}, "edited": false, "score": 0, "creation_date": 1463566544, "post_id": 37289764, "comment_id": 62116067, "body": "Hello, Yes, it is turned on. Thank you!"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1463567625, "post_id": 37289764, "comment_id": 62116871, "body": "This advice would help with SMTP authorization errors but not with TLS protocol errors."}], "tags": [], "owner": {"reputation": 9, "user_id": 2305828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9434c8606bc263196a84f8d3a99dcdc3?s=128&d=identicon&r=PG", "display_name": "Tom Stachon", "link": "https://stackoverflow.com/users/2305828/tom-stachon"}, "is_accepted": false, "score": 0, "last_activity_date": 1463542100, "creation_date": 1463542100, "answer_id": 37289764, "question_id": 37277583, "link": "https://stackoverflow.com/questions/37277583/send-mail-through-gmail-using-perl/37289764#37289764", "title": "Send mail through Gmail using Perl", "body": "<p>Go to <a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"nofollow\">https://www.google.com/settings/security/lesssecureapps</a>\nand make sure is \"Turn on\"</p>\n"}, {"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1463833394, "post_id": 37317298, "comment_id": 62239139, "body": "&quot;Instead of Net::SMTP::TLS, I have used MIME::Lite&quot; - this is wrong. You have replaced Net::SMTP::TLS with Net::SMTPS. You use MIME::Lite only to construct the message but not to send it. The sending is then done with Net::SMTPS and could have been done with (a recent version of) Net::SMTP too as I proposed. In fact, Net::SMTPS just uses Net::SMTP but adds the TLS stuff for older versions of Net::SMTP which did not include it, similar to Net::SSLGlue."}], "tags": [], "owner": {"reputation": 59, "user_id": 5591381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb35c5aa2e86e602d991fd8ea4a4836d?s=128&d=identicon&r=PG&f=1", "display_name": "Xuti", "link": "https://stackoverflow.com/users/5591381/xuti"}, "is_accepted": true, "score": 0, "last_activity_date": 1463644900, "creation_date": 1463644900, "answer_id": 37317298, "question_id": 37277583, "link": "https://stackoverflow.com/questions/37277583/send-mail-through-gmail-using-perl/37317298#37317298", "title": "Send mail through Gmail using Perl", "body": "<p>Finally I choose to change a little the script. Instead of Net::SMTP::TLS, I have used MIME::Lite</p>\n\n<pre><code>#!/usr/bin/perl\nuse MIME::Lite;\nuse Net::SMTPS;\n\nmy $file=\"/var/www/myweb/myfile.txt\";\nopen(FILE, $file) or die \"Can't read file 'filename' [$!]\\n\";  \n$document = &lt;FILE&gt;; \nclose (FILE);  \nmy $msg = MIME::Lite -&gt;new (  \nFrom =&gt; 'sender@hotmail.com',\nTo =&gt; 'recipient@hotmail.com',\nSubject =&gt; 'mail subject',  \nData =&gt; qq{\n&lt;body&gt;\nText message body HTML format. &lt;p&gt; $document &lt;/p&gt;\n&lt;/body&gt;\n},\nType =&gt; 'text/html; charset=UTF-8'\n);  \nmy $USERNAME = 'sender@hotmail.com';\nmy $PASSWORD = 'password'; \n\nmy $smtps = Net::SMTPS-&gt;new(\"smtp.live.com\", Port =&gt; 587, doSSL=&gt; 'starttls', SSL_version=&gt;'TLSv1');\n\n$smtps-&gt;auth ( $USERNAME, $PASSWORD ) or DIE(\"Could not authenticate with mail.\\n\");\n\n$smtps -&gt;mail('sender@hotmail.com');  \n$smtps-&gt;to('recipient@hotmail.com');\n$smtps-&gt;data(); \n$smtps-&gt;datasend( $msg-&gt;as_string() );  \n$smtps-&gt;dataend();  \n$smtps-&gt;quit;\n</code></pre>\n\n<p>I use Outlook.com service instead of GMail.</p>\n\n<p>Thank you!</p>\n"}], "owner": {"reputation": 59, "user_id": 5591381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb35c5aa2e86e602d991fd8ea4a4836d?s=128&d=identicon&r=PG&f=1", "display_name": "Xuti", "link": "https://stackoverflow.com/users/5591381/xuti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 2, "accepted_answer_id": 37317298, "answer_count": 3, "score": 4, "last_activity_date": 1463644900, "creation_date": 1463491670, "last_edit_date": 1463495947, "question_id": 37277583, "link": "https://stackoverflow.com/questions/37277583/send-mail-through-gmail-using-perl", "title": "Send mail through Gmail using Perl", "body": "<p>I have this perl script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Net::SMTP::TLS;\n\nmy $file=\"/var/www/myweb/textfile.txt\";\n\nmy $smtp = new Net::SMTP::TLS(\n'smtp.gmail.com',\n    Hello =&gt; 'smtp.gmail.com',\n    Port =&gt; 587,\n    User =&gt; 'mymail@gmail.com',\n    Password =&gt; 'mypassword',\n);\n\n$smtp-&gt;mail('mymail@gmail.com');\n$smtp-&gt;to('destinationmail@hotmail.com');\n$smtp-&gt;data();\n$smtp-&gt;datasend(\"Subject: Subject of mail \\n\");\n$smtp-&gt;datasend(\"\\n\");\n\n#make sure file exists\nif (-e $file) {\n    $smtp-&gt;datasend(\"body of the mail\");\n    #read the file one line at a time\n    open( RFILE, \"&lt;$file\" )||print \"could not open file\";\n    while (my $line  = &lt;RFILE&gt;){\n            $smtp-&gt;datasend(\"$line\");\n    }\n    close(RFILE) || print \"could not close file\";\n}\nelse {\n    #print \"did not find the report $file \";\n    exit 1;\n}\n#End the message.\n$smtp-&gt;dataend();\n#Close the connection to your server.\n$smtp-&gt;quit();\n</code></pre>\n\n<p>This script open the textfile.txt and put its content in an email body. Since yesterday, this script was working fine in 4 different Linux computers. Now it returns this message:</p>\n\n<blockquote>\n  <p>Couldn't start TLS: SSL connect attempt failed because of handshake problems\n  error:1409442E:SSL routines:SSL3_READ_BYTES:tlsv1 alert protocol\n  version at scriptname.pl line 7</p>\n</blockquote>\n\n<p>I have not found any documentation about any change on Gmail SMTP service. How can I do?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["mysql", "apache", "perl", "tcp"], "comments": [{"owner": {"reputation": 405, "user_id": 6336615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-54JWXHU1LhI/AAAAAAAAAAI/AAAAAAAABKc/N9fUA8Ue7e4/photo.jpg?sz=128", "display_name": "Wayne Booth", "link": "https://stackoverflow.com/users/6336615/wayne-booth"}, "edited": false, "score": 0, "creation_date": 1464511527, "post_id": 37275378, "comment_id": 62509916, "body": "If you found an answer provided here helpful, please upvote and/or mark as accepted, so that other users with a similar question can benefit."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2335294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd641f0fd99d192c6a9ed95b06efea01?s=128&d=identicon&r=PG", "display_name": "Dule Savic", "link": "https://stackoverflow.com/users/2335294/dule-savic"}, "edited": false, "score": 0, "creation_date": 1463492640, "post_id": 37276650, "comment_id": 62081219, "body": "Nestat is showing small amount of active connections, and that&#39;s why I really don&#39;t think it TCP exhaustion that&#39;s causing this issue. I had couple of .Net windows services on the same machine but I&#39;ve moved them to another box."}, {"owner": {"reputation": 31, "user_id": 2335294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd641f0fd99d192c6a9ed95b06efea01?s=128&d=identicon&r=PG", "display_name": "Dule Savic", "link": "https://stackoverflow.com/users/2335294/dule-savic"}, "edited": false, "score": 0, "creation_date": 1463492743, "post_id": 37276650, "comment_id": 62081313, "body": "Here is the output of netsh: C:\\&gt;netsh int ipv4 show tcpstats MIB-II TCP Statistics ------------------------------------------------------ Timeout Algorithm:  Van Jacobson&#39;s Algorithm Minimum Timeout:   10 Maximum Timeout:                    4294967295 Maximum Connections: Dynamic Active Opens:999295 Passive Opens:71886 Attempts Failed:2 Established Resets: 2162 Currently Established:              21 In Segments: 75634810 Out Segments: 81423272 Retransmitted Segments: 143915 In Errors:  0 Out Resets: 8732"}, {"owner": {"reputation": 31, "user_id": 2335294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd641f0fd99d192c6a9ed95b06efea01?s=128&d=identicon&r=PG", "display_name": "Dule Savic", "link": "https://stackoverflow.com/users/2335294/dule-savic"}, "edited": false, "score": 0, "creation_date": 1463492881, "post_id": 37276650, "comment_id": 62081436, "body": "This &#39;Active Opens&#39; parameter confused me, because it looks like that&#39;s the number of active TCP connections, but it really isn&#39;t. To my understanding, this is number of connections from last reboot or something like that."}], "tags": [], "owner": {"reputation": 405, "user_id": 6336615, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-54JWXHU1LhI/AAAAAAAAAAI/AAAAAAAABKc/N9fUA8Ue7e4/photo.jpg?sz=128", "display_name": "Wayne Booth", "link": "https://stackoverflow.com/users/6336615/wayne-booth"}, "is_accepted": false, "score": 0, "last_activity_date": 1463489176, "creation_date": 1463489176, "answer_id": 37276650, "question_id": 37275378, "link": "https://stackoverflow.com/questions/37275378/perl-web-application-issue-dbi-connect-failed-cant-create-tcp-ip-socket-1010/37276650#37276650", "title": "Perl web application issue: DBI connect failed: Can&#39;t create TCP/IP socket (10106)", "body": "<p>It looks like you've got a separate issue that is manifesting in the symptom of \"Can't create TCP/IP socket (10106)\".</p>\n\n<p>Unless you're turning around a huge amount of very fast connections you'll not need to edit the ephemeral ports or timeouts. By doing this, you're just putting off the cause to happen later.</p>\n\n<p>I would check that your application (in its entirety) is closing connections when it's done with them? That includes database connection, client http sockets, file/directory handles, etc... Use \"netstat\" to monitor what ports/connections are currently open when your application is running. Find out what's ever increasing, then track down in your app (or some other app that's also running on the same machine) what's causing these kinds of connections. You can then take action to close the connections correctly, solving your problem.</p>\n\n<p>Hope this helps. Good luck.</p>\n"}], "owner": {"reputation": 31, "user_id": 2335294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd641f0fd99d192c6a9ed95b06efea01?s=128&d=identicon&r=PG", "display_name": "Dule Savic", "link": "https://stackoverflow.com/users/2335294/dule-savic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1463492166, "creation_date": 1463485952, "last_edit_date": 1592644375, "question_id": 37275378, "link": "https://stackoverflow.com/questions/37275378/perl-web-application-issue-dbi-connect-failed-cant-create-tcp-ip-socket-1010", "title": "Perl web application issue: DBI connect failed: Can&#39;t create TCP/IP socket (10106)", "body": "<p>I have issue with my Perl web application, running on Apache 2.2 on Windows 2008r2 with separated MySQL database on CentOS server.</p>\n<p>Here is the issue: I'm getting timeouts periodically with error:</p>\n<pre><code>DBI connect('host=10.148.xxx.xxx:database=XXX','root',...) failed: Can't create TCP/IP socket (10106) \n</code></pre>\n<p>When I say periodically, that means that most of the time everything works as expected, but from time to time I get this message and it causes my application to throw error page.</p>\n<p>I've search a lot on internet and found couple of recommended solutions which didn't work for me.</p>\n<p>First, I thought that my database server is unreachable but using MySQL enterprise monitor I found out that wasn't the case.</p>\n<p>Then I thought that I might have ran out of TCP ports so I've increased the number of ephemeral ports and decreased the timeout period as described in this post:\n<a href=\"http://www.outsystems.com/forums/discussion/6956/how-to-tune-the-tcp-ip-stack-for-high-volume-of-web-requests/\" rel=\"nofollow noreferrer\">http://www.outsystems.com/forums/discussion/6956/how-to-tune-the-tcp-ip-stack-for-high-volume-of-web-requests/</a></p>\n<p>In short I did this:</p>\n<blockquote>\n<p>Reduce the TIME_WAIT by setting the TcpTimedWaitDelay TCP/IP parameter to 30 seconds on the windows registry key HKLM\\SYSTEM\\CurrentControlSet\\Services\\Tcpip\\Parameters, as a DWORD value.</p>\n<p>Increase the range of ephemeral ports by setting the dynamicportrange to an higher value through the command netsh int ipv4 set dynamicportrange tcp start=32767 num=32768, this will set the port range from 32768 to 65535.&quot;</p>\n</blockquote>\n<p>But no luck, still getting timeouts</p>\n<p>Next, I've updated my Apache config file with these parameters to further decrease <code>KeepAliveTimeout</code>:</p>\n<pre><code>Timeout 100\nMaxKeepAliveRequests 100\nKeepAliveTimeout 5\n</code></pre>\n<p>Still, no luck.</p>\n<p>My main problem is that everything is working most of the time, and I'm even having trouble reproducing the issue, but it is coming up on daily basis and my clients are getting annoyed.</p>\n<p>I'm not even sure in which direction to go, is it MySQL, is it Perl DBI module issue, is it Apache, is it TCP/IP configuration, so any help would be greatly appreciated.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 6350251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c02d1132262749793140c831d1dc725?s=128&d=identicon&r=PG&f=1", "display_name": "mynexsus", "link": "https://stackoverflow.com/users/6350251/mynexsus"}, "edited": false, "score": 0, "creation_date": 1463487377, "post_id": 37338627, "comment_id": 62194367, "body": "Thank you Choroba."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 17, "user_id": 6350251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c02d1132262749793140c831d1dc725?s=128&d=identicon&r=PG&f=1", "display_name": "mynexsus", "link": "https://stackoverflow.com/users/6350251/mynexsus"}, "edited": false, "score": 1, "creation_date": 1463488260, "post_id": 37338627, "comment_id": 62194368, "body": "&quot;Thank you&quot; is expressed by accepting/upvoting the answer."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1463485842, "creation_date": 1463485842, "answer_id": 37338627, "question_id": 37338626, "link": "https://stackoverflow.com/questions/37338626/what-is-a-simple-regular-expression-to-obtain-a-number/37338627#37338627", "title": "What is a simple regular expression to obtain a number", "body": "<p>Use matching with a capture group, assign in list context to get the captured value:</p>\n\n<pre><code>my $variable = '9.1R999';\nmy ($number) = $variable =~ /([0-9]\\.[0-9])/;\n</code></pre>\n\n<p>The dot needs to be backslashed to get its literal meaning.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1463722478, "question_id": 1077775}, "owner": {"reputation": 17, "user_id": 6350251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4c02d1132262749793140c831d1dc725?s=128&d=identicon&r=PG&f=1", "display_name": "mynexsus", "link": "https://stackoverflow.com/users/6350251/mynexsus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463748676, "creation_date": 1463485445, "last_edit_date": 1463748676, "question_id": 37338626, "link": "https://stackoverflow.com/questions/37338626/what-is-a-simple-regular-expression-to-obtain-a-number", "title": "What is a simple regular expression to obtain a number", "body": "<p>I have a <code>$variable= 9.1R999</code>.\nI need a regular expression to obtain a digit before and after '.'. I need 9.1 stored in a new variable <code>$variable1</code>.</p>\n"}, {"tags": ["bash", "perl", "find-occurrences"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463491663, "post_id": 37274638, "comment_id": 62080462, "body": "You should try to supply a properly representative set of data. Every line of your sample has six semicolons <code>;</code> which, according to your rules, means they should all be printed. Once you have said <i>&quot;The file is delimited by <code>;</code>&quot;</i> there&#39;s little point in giving an example unless it tests the criteria and is accompanied by your corresponding required output"}], "answers": [{"tags": [], "owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "is_accepted": false, "score": 3, "last_activity_date": 1463484314, "creation_date": 1463484314, "answer_id": 37274756, "question_id": 37274638, "link": "https://stackoverflow.com/questions/37274638/counting-number-of-character-occurrences-per-line/37274756#37274756", "title": "Counting number of character occurrences per line", "body": "<p>This is ridiculous easy with <code>awk</code>:</p>\n\n<p><code>awk -F\\; 'NF!=6' file &gt; outfile</code></p>\n"}, {"tags": [], "owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "is_accepted": false, "score": 1, "last_activity_date": 1463484747, "last_edit_date": 1463484747, "creation_date": 1463484370, "answer_id": 37274771, "question_id": 37274638, "link": "https://stackoverflow.com/questions/37274638/counting-number-of-character-occurrences-per-line/37274771#37274771", "title": "Counting number of character occurrences per line", "body": "<p>I would take this one-liner:</p>\n\n<pre><code>awk '{x=$0}gsub(\";\",\"\",x)!=5' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1463485033, "creation_date": 1463485033, "answer_id": 37275029, "question_id": 37274638, "link": "https://stackoverflow.com/questions/37274638/counting-number-of-character-occurrences-per-line/37275029#37275029", "title": "Counting number of character occurrences per line", "body": "<p>Easy in Perl:</p>\n\n<pre><code>perl -ne 'print if tr/;// != 5' input_file &gt; output_file\n</code></pre>\n\n<ul>\n<li><code>-n</code> reads the input line by line</li>\n<li>the <code>tr</code> operator returns the number of matches</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "is_accepted": false, "score": 1, "last_activity_date": 1463486083, "last_edit_date": 1463486083, "creation_date": 1463485527, "answer_id": 37275201, "question_id": 37274638, "link": "https://stackoverflow.com/questions/37274638/counting-number-of-character-occurrences-per-line/37275201#37275201", "title": "Counting number of character occurrences per line", "body": "<p>With sed you can do this:</p>\n\n<pre><code>sed '/^\\([^;]*;\\)\\{5\\}$/d' file &gt; outfile\n</code></pre>\n\n<p>It deletes the lines with exactly 5 commas (<code>;</code>) and sends the output to <em>outfile</em>.\n<hr>\nOr if you want your own code to work, then make the following changes:</p>\n\n<ol>\n<li>replace <code>done</code> with <code>done &lt;file</code></li>\n<li>replace <code>[[</code> with <code>((</code> and <code>]]</code> with <code>))</code> i.e use <code>((...))</code> instead of <code>[[...]]</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1463490479, "creation_date": 1463490479, "answer_id": 37277111, "question_id": 37274638, "link": "https://stackoverflow.com/questions/37274638/counting-number-of-character-occurrences-per-line/37277111#37277111", "title": "Counting number of character occurrences per line", "body": "<p>Unfortunately every line in your sample data has six semicolons, which means they should all be printed. However, here is a one-line Perl solution</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -ne'print if tr/;// != 5' aaa.csv\nAAAA;BBBB;CCCCCCCC;DD;EEEEEEEE;FF;\nAAA1;BBBBB;CCCC;DD;EEEEEEEE;FFFFF;\nAAA3;BB;CCCC;DDDDDDDDD;EEEEEEE;FF;\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1460, "favorite_count": 0, "accepted_answer_id": 37277111, "answer_count": 5, "score": 2, "last_activity_date": 1463490479, "creation_date": 1463484004, "last_edit_date": 1463489253, "question_id": 37274638, "link": "https://stackoverflow.com/questions/37274638/counting-number-of-character-occurrences-per-line", "title": "Counting number of character occurrences per line", "body": "<p>I have a file that looks like this: ( Note : A*, B*, C* are placeholders). The file is delimited by <code>;</code></p>\n\n<pre><code>AAAA;BBBB;CCCCCCCC;DD;EEEEEEEE;FF;\nAAA1;BBBBB;CCCC;DD;EEEEEEEE;FFFFF;\nAAA3;BB;CCCC;DDDDDDDDD;EEEEEEE;FF;\n</code></pre>\n\n<p>I m trying to write a small script that counts the number of occurrences of the delimiter <code>;</code> and if it is lesser or greater than 5, output said line to a text file. </p>\n\n<pre><code>delim=\";\"\n\nwhile read line\ndo  \n    n_of_occ=$(grep -o \"$delim\" &lt;&lt;&lt; \"$line\" | wc -l)\n\n    if [[ $n_of_occ &lt; 5 ]] || [[ $n_of_occ &gt; 5 ]]\n    then\n        echo $line &gt;&gt; outfile\n    fi\ndone\n</code></pre>\n\n<p>For some reason, this doesn't seem to work and my output is garbled. Could someone assist or provide a different way to tackle this? Perhaps with Perl instead of bash? </p>\n"}, {"tags": ["forms", "perl", "dancer"], "comments": [{"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 1, "creation_date": 1463484119, "post_id": 37274527, "comment_id": 62074688, "body": "Calling create_to_do_list.pl is a design error. You should move the contents of your script into the <code>get &#39;&#47;create_to_do_list&#39; =&gt; sub {</code> handler. The <code>template</code> command defines the template file to be used which is typically a Dancer or Template::Toolkit template."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 1, "creation_date": 1463485067, "post_id": 37274527, "comment_id": 62075384, "body": "@Sebastian there is no Dancer template. It comes with the <a href=\"https://metacpan.org/pod/Dancer::Template::Simple\" rel=\"nofollow noreferrer\">Dancer::Tepmlate::Simple</a> template engine by default, which looks like Template::Toolkit, but lacks almost all of it functionality. But in general, you are correct. Using a CGI here is a strange approach."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1463485130, "post_id": 37274527, "comment_id": 62075453, "body": "It looks like you have not fully understood what Dancer does. What code do you have in your create_to_do_list.pl? I smell an xy-problem."}, {"owner": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "edited": false, "score": 0, "creation_date": 1463487804, "post_id": 37274527, "comment_id": 62077494, "body": "@all thanks! I&#39;ve got a CGI approach because my app was designed so. Now I wanted to move to Dancer so I thought there was a faster way of calling my script instead of having to copy it. This was just an example. I&#39;m working with thousands of thousand of to-do lists =P"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1463493507, "creation_date": 1463493507, "answer_id": 37278290, "question_id": 37274527, "link": "https://stackoverflow.com/questions/37274527/perl-dancer-how-to-manage-form-actions/37278290#37278290", "title": "Perl Dancer how to manage form actions", "body": "<p>Firstly, before you go too far down this path, switch from Dancer to Dancer2.</p>\n\n<p>From your comments, it seems that <code>create_to_do_list.pl</code> is a CGI program. Is it running on the same web server? You could probably call it remotely using something from <a href=\"https://metacpan.org/pod/LWP\" rel=\"nofollow\">LWP</a> or <a href=\"https://metacpan.org/pod/HTTP::Tiny\" rel=\"nofollow\">HTTP::Tiny</a>, but I don't think that's a very good idea - you'll get HTML back which you'll need to parse in some way to extract the useful information.</p>\n\n<p>It's a far better idea to move the code from <code>create_to_do_list.pl</code> into a module. If the CGI program needs to exist as well (for historical reasons, perhaps) then move the core code into a module which can be used from both the CGI program and the new Dancer app. But if you won't need the CGI program once the Dancer app is ready, I'd just copy the code into the correct place in Organizador.pm.</p>\n\n<p>Instead of using DBI directly, you might find it easier to switch to <a href=\"https://metacpan.org/pod/Dancer::Plugin::Database\" rel=\"nofollow\">Dancer::Plugin::Database</a> (or its <a href=\"https://metacpan.org/pod/Dancer2::Plugin::Database\" rel=\"nofollow\">Dancer2 equivalent</a>), bit for anything other than the simplest of database programs, I'd recommend <a href=\"https://metacpan.org/pod/DBIx::Class\" rel=\"nofollow\">DBIx::Class</a> (and <a href=\"https://metacpan.org/pod/Dancer2::Plugin::DBIC\" rel=\"nofollow\">Dancer2::Plugin::DBIC</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 1, "last_activity_date": 1463502867, "last_edit_date": 1495541763, "creation_date": 1463502867, "answer_id": 37281845, "question_id": 37274527, "link": "https://stackoverflow.com/questions/37274527/perl-dancer-how-to-manage-form-actions/37281845#37281845", "title": "Perl Dancer how to manage form actions", "body": "<blockquote>\n  <p>I wanted to move to Dancer so I thought there was a faster way of calling my script instead of having to copy it...I'm working with thousands of thousand of [CGI] to-do lists...</p>\n</blockquote>\n\n<p>Ideally, you should convert all of your CGI scripts to modules so that you can use them in non-CGI contexts (e.g. unit tests, web frameworks like Dancer and Mojolicious); however, if you really have thousands of them, that will take a long time.</p>\n\n<p>As a stop-gap measure while you work on the conversion, you can use <a href=\"https://metacpan.org/pod/CGI::Compile\" rel=\"nofollow noreferrer\">CGI::Compile</a> and <a href=\"https://metacpan.org/pod/CGI::Emulate::PSGI\" rel=\"nofollow noreferrer\">CGI::Emulate::PSGI</a> to create a <a href=\"https://metacpan.org/pod/PSGI::FAQ\" rel=\"nofollow noreferrer\">PSGI</a> wrapper around each of your unconverted CGI scripts. You can easily integrate these with a Dancer2* app using <a href=\"https://metacpan.org/pod/Plack::Builder\" rel=\"nofollow noreferrer\">Plack::Builder</a>.</p>\n\n<p>For example, to integrate the following CGI script with a Dancer2 app:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse CGI;\n\nmy $q = CGI-&gt;new;\nprint $q-&gt;header,\n      $q-&gt;start_html,\n      $q-&gt;h1('Hello, CGI!'),\n      $q-&gt;end_html;\n</code></pre>\n\n<p>Modify <code>bin/app.psgi</code> to look like this:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse FindBin;\nuse lib \"$FindBin::Bin/../lib\";\n\nuse CGI::Compile;\nuse CGI::Emulate::PSGI;\nuse Plack::Builder;\n\nuse MyApp;\n\nmy $foo_cgi = CGI::Compile-&gt;compile('/path/to/foo.cgi');\n\nbuilder {\n    mount '/'    =&gt; MyApp-&gt;to_app;\n    mount '/foo' =&gt; CGI::Emulate::PSGI-&gt;handler($foo_cgi);\n};\n</code></pre>\n\n<p>Now, requests to <code>/</code> will call the <code>/</code> route in MyApp, while requests to <code>/foo</code> will call your CGI script.</p>\n\n<p>In your form, change:</p>\n\n<pre><code>&lt;form action=\"create_to_do_list.pl\"&gt;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>&lt;form action=\"/foo\"&gt;\n</code></pre>\n\n<p>Make sure the names of your form fields all match what the CGI script is expecting, and voila! You can keep using your CGI script without modification.</p>\n\n<p>(Note that you could skip all the PSGI wrapper business and just continue serving your CGI scripts with Apache or whatever you were using before, but this approach allows you to centralize your routes and simplifies deployment.)</p>\n\n<p>Add a separate <code>mount</code> statement for each CGI script you want to integrate with your app. Note that this approach will probably have <a href=\"https://metacpan.org/pod/Plack::App::URLMap#PERFORMANCE\" rel=\"nofollow noreferrer\">performance problems</a>, so you should only use it as a temporary measure while you work on converting your CGI scripts to proper modules.</p>\n\n<hr>\n\n<p>* For new development, you should really be using Dancer2. Dancer1 is in maintenance mode and although it's still officially supported, it won't be getting any new features. I know you've <a href=\"https://stackoverflow.com/q/37010370/176646\">had trouble</a> getting started with Dancer2, but you should resolve those issues instead of using an old version of the framework. (And it's still unclear what exactly you were having trouble with; you should edit that question if you still need help.)</p>\n"}], "owner": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 37281845, "answer_count": 2, "score": 0, "last_activity_date": 1463502867, "creation_date": 1463483696, "question_id": 37274527, "link": "https://stackoverflow.com/questions/37274527/perl-dancer-how-to-manage-form-actions", "title": "Perl Dancer how to manage form actions", "body": "<p>I'm learning perl Dancer and working on a to-do list depending on a form selection of two dates(today and tomorrow). If you select today a todo list for today will be generated, if you select tomorrow a different list will be created. </p>\n\n<p>I've created a Dancer app called: <code>Organizador</code> and have the following in my <code>Organizador.pm</code>:</p>\n\n<pre><code>package Organizador;\nuse Dancer ':syntax';\nuse DBI;\n\nour $VERSION = '0.1';\nset session =&gt; \"Simple\";\n\nget '/' =&gt; sub{\ntemplate 'index';  \n}; \n\nget '/create_to_do_list'=&gt;sub{\ntemplate 'create_to_do_list';\n};\n</code></pre>\n\n<p>I've created a file called <code>create_to_do_list.pl</code> which contains the script that I would like to execute when the form is created. </p>\n\n<pre><code>&lt;form action=\"create_to_do_list.pl\"&gt;\n&lt;legend&gt;Create todo list&lt;/legend&gt;\n        &lt;label for=\"todoList\"&gt;Create a todo list&lt;/label&gt;\n            &lt;select name='todoList' id='todoList'&gt;\n                &lt;option value=\"today\"&gt;today&lt;/option&gt;        \n                &lt;option value=\"tomorrow\"&gt;tomorrow&lt;/option&gt;\n            &lt;/select&gt;\n            &lt;button&gt;Cancel&lt;/button&gt;\n            &lt;button&gt;Create&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>How can I call <code>create_to_do_list.pl</code> as an action on <code>template 'create_to_do_list';</code> after hitting the create button?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "soap", "timeout"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463476070, "post_id": 37271658, "comment_id": 62069320, "body": "You&#39;re sure the timeout is not from the server side? Do you control the server? This is far-fetched, but I had a db-admin colleague kill long queries manually on a db server he was monitoring once in a while because he thought they slow down production. We used to go talk to him so he is distracted while we ran those queries..."}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463483216, "post_id": 37271658, "comment_id": 62074120, "body": "I am calling customer&#39;s web service and don&#39;t know if they have a timeout limit. But when I set timeout to 10 minutes, sometimes it ends with timeout in 30 minutes. Even if server has a timeout, my timeout duration should not pass"}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 6051967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3cf0b567bd60fcd0166ed07b11b39d49?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan G", "link": "https://stackoverflow.com/users/6051967/ryan-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1522878127, "creation_date": 1522878127, "answer_id": 49660901, "question_id": 37271658, "link": "https://stackoverflow.com/questions/37271658/perl-soap-timeout-does-not-work/49660901#49660901", "title": "Perl SOAP timeout does not work", "body": "<p>I ran into this issue as well, the proxy timeout wasnt working for me. This code worked however:</p>\n\n<p>$soap->transport->timeout(600);\nor \n$self->{soap}->transport->timeout(600);</p>\n"}], "owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522878127, "creation_date": 1463475809, "question_id": 37271658, "link": "https://stackoverflow.com/questions/37271658/perl-soap-timeout-does-not-work", "title": "Perl SOAP timeout does not work", "body": "<p>I am calling a webservice which is returning 80.000 records. Because record count is too big, call ends with timeout. But the issue I culd not understand is that call ends earlier or later than the time I defined. My code is below, I defined timeout as 10 minutes (600 sec.)</p>\n\n<pre><code>my $soap = SOAP::Lite    \n    -&gt; on_action( sub { join '/', @_ } )\n     -&gt; uri($uri)\n     -&gt; proxy($proxy, timeout =&gt; 600)    \n     -&gt; ns($ns1,\"soapenv\")\n     -&gt; ns($ns2,\"ns2\");\n</code></pre>\n\n<p>But call sometimes ends with timeout in 5 minutes , sometimes ends in 18 minutes. What is the reason of this? Why it does not end in 10 minutes?</p>\n\n<p>And what can I do more to prevent timeout? It is sure that reason of timeout is record cout because when record count is decreased it works.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27293, "user_id": 5740031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Una92.jpg?s=128&g=1", "display_name": "CodeFuller", "link": "https://stackoverflow.com/users/5740031/codefuller"}, "edited": false, "score": 0, "creation_date": 1463475971, "post_id": 37271556, "comment_id": 62069255, "body": "What version of perl do you use? I&#39;ve got correct output of &#39;329BE0DDB29BE0&#39; for your script."}, {"owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "reply_to_user": {"reputation": 27293, "user_id": 5740031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Una92.jpg?s=128&g=1", "display_name": "CodeFuller", "link": "https://stackoverflow.com/users/5740031/codefuller"}, "edited": false, "score": 0, "creation_date": 1463477293, "post_id": 37271556, "comment_id": 62070143, "body": "5_8_9 is the perl version that i am using"}, {"owner": {"reputation": 27293, "user_id": 5740031, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Una92.jpg?s=128&g=1", "display_name": "CodeFuller", "link": "https://stackoverflow.com/users/5740031/codefuller"}, "edited": false, "score": 0, "creation_date": 1463477667, "post_id": 37271556, "comment_id": 62070380, "body": "Check my answer below, it should help you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463479907, "post_id": 37271556, "comment_id": 62071970, "body": "@SuneeldattaKolipakula: You should upgrade your installation of perl if you can. v5.8.9 is eight years old now, and you are missing out on major enhancements in v5.10 and v5.14. The latest release is v5.24"}, {"owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "edited": false, "score": 0, "creation_date": 1463483454, "post_id": 37271556, "comment_id": 62074269, "body": "It is the one which was using in my organizations frame work.. I cannot change it but thanks for suggestion...."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "edited": false, "score": 0, "creation_date": 1463482483, "post_id": 37273104, "comment_id": 62073652, "body": "EXCELLENT... IT WORKED :) Thanks friend :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "edited": false, "score": 0, "creation_date": 1463487441, "post_id": 37273104, "comment_id": 62077200, "body": "@SuneeldattaKolipakula: I&#39;m pleased that I could help. <b><i>Please note</i></b> that you must pass big decimal numbers <i>as a string</i> for this to work properly"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 7, "last_activity_date": 1467554382, "last_edit_date": 1467554382, "creation_date": 1463479694, "answer_id": 37273104, "question_id": 37271556, "link": "https://stackoverflow.com/questions/37271556/is-there-any-function-to-convert-long-decimal-number-in-to-hexadecimal/37273104#37273104", "title": "Is there any function to convert long decimal number in to hexadecimal?", "body": "<p>You can use the <a href=\"https://metacpan.org/pod/Math::BigInt\" rel=\"nofollow\"><code>Math::BigInt</code></a> module, which does all the heavy-lifting behind the <a href=\"https://metacpan.org/pod/bigint\" rel=\"nofollow\"><code>bigint</code></a> pragma</p>\n\n<p>You can't use <code>sprintf</code> under <code>bigint</code> to convert large decimals to hex because its conversions aren't overloaded, but <code>Math::BigInt</code> objects have an <code>as_hex</code> method which returns the number expressed as a hex string, prefixed with <code>0x</code></p>\n\n<p>This program wraps the conversion in a subroutine <code>bigint_to_hex</code>, which removes the <code>0x</code> prefix and changes lower case to upper case</p>\n\n<p>It is unusual now to encounter an installation of Perl that won't handle 64-bit values anyway. But this method will work with any decimal string, as I have demonstrated by converting a value of 1.2E40 as well as the value in your question</p>\n\n<p>It's vital that you pass big integers as <em>strings</em>, because numeric literals will be converted to floating point by the compiler if they exceed the width of an ordinary integer. My program also prints the hex equivalent of the same 1.2E40 value without quotation marks so that you can see the difference</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Math::BigInt;\n\n\nmy $l_KeyExpected_UL = '14245138929982432';\n\nsay bigint_to_hex($l_KeyExpected_UL);\nsay bigint_to_hex('12345678901234567890123456789012345678901');\nsay bigint_to_hex(12345678901234567890123456789012345678901);\nsay bigint_to_hex(1.2E40);\n\nsub bigint_to_hex {\n    my $hex = Math::BigInt-&gt;new(shift)-&gt;as_hex;\n    $hex =~ s/^0x//;\n    uc $hex;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>329BE0DDB29BE0\n2447DB449988978536BF5BBBE40E766C35\n2447DB449988B214BEA48F651CA8000000\n2343CBEEEA6F2C193478C00E0000000000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1463494559, "creation_date": 1463494559, "answer_id": 37278720, "question_id": 37271556, "link": "https://stackoverflow.com/questions/37271556/is-there-any-function-to-convert-long-decimal-number-in-to-hexadecimal/37278720#37278720", "title": "Is there any function to convert long decimal number in to hexadecimal?", "body": "<h2>If you have a build of Perl with 64-bit integers</h2>\n\n<p>A Perl build with 64-bit ints will display the following:</p>\n\n<pre><code>$ perl -V:ivsize\nivsize='8';\n</code></pre>\n\n<p>If this is what you have, you can simply use</p>\n\n<pre><code>my $i = 14245138929982432;\nmy $hex = sprintf('%X', $i);\n</code></pre>\n\n<h2>If you have a build of Perl that may not have 64-bit integers</h2>\n\n<p>That number requires at least 56 bits to store.</p>\n\n<p><a href=\"http://search.cpan.org/perldoc?Math::Int64\" rel=\"nofollow\">Math::Int64</a> allows you to access native 64-bit ints.</p>\n\n<pre><code>use Math::Int64 qw( uint64 int64_to_hex );\n\n# Note that the number is provided as a string!\nmy $i = uint64('14245138929982432');\nmy $hex = int64_to_hex($i);\n</code></pre>\n\n<p>You could also use an arbitrary precision library such as <a href=\"http://search.cpan.org/perldoc?Math::BigInt\" rel=\"nofollow\">Math::BigInt</a>, but it will be necessarily slower. If you're going to do some number crunching with 64-bit ints, you definitely want Math::Int64 instead of Math::BigInt.</p>\n"}], "owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467554382, "creation_date": 1463475553, "question_id": 37271556, "link": "https://stackoverflow.com/questions/37271556/is-there-any-function-to-convert-long-decimal-number-in-to-hexadecimal", "title": "Is there any function to convert long decimal number in to hexadecimal?", "body": "<p>I have a need to convert a long decimal number :14245138929982432 in to    hexadecimal value whose value is 329BE0DDB29BE0.</p>\n\n<p>But when i am trying to use below piece of code i am getting result as FFFFFFFF.</p>\n\n<pre><code>$l_KeyExpected_UL=14245138929982432;\n$hexadeci = sprintf '%X', $l_KeyExpected_UL;\nprint $hexadeci.\"\\n\";\\\n</code></pre>\n\n<p>can Any one please help on this.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463476504, "post_id": 37271002, "comment_id": 62069591, "body": "The accepted answer on the question I used to close this is correct, but <a href=\"http://stackoverflow.com/a/5655485/1331451\">ikegami&#39;s answer further down</a> is more complete."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463479730, "post_id": 37271002, "comment_id": 62071860, "body": "Also - a &#39;false&#39; result of the test here, is returning a <code>dualvar (0,&#39;&#39;)</code>. So if you&#39;d tried to numify it: <code>print 0+ ( $var1 == $var2 ),&quot;\\n&quot;</code> you&#39;d have got a different result."}], "owner": {"reputation": 2579, "user_id": 3302424, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70d64f2369ad3cfd0d9271792bdccf3c?s=128&d=identicon&r=PG&f=1", "display_name": "Hari Krishna", "link": "https://stackoverflow.com/users/3302424/hari-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1463476404, "answer_count": 0, "score": 0, "last_activity_date": 1463476334, "creation_date": 1463474000, "question_id": 37271002, "link": "https://stackoverflow.com/questions/37271002/print-result-of-comparison-operators", "closed_reason": "Duplicate", "title": "print result of comparison operators", "body": "<pre><code>#! /usr/bin/perl\n\n$var1 = 20;\n$var2 = 15;\n\nprint (\"var1 = \", $var1, \"\\n\");\nprint (\"var2 = \", $var2, \"\\n\");\n\n# Comparing numbers\nprint (\"var1 == var2 : \", ($var1 == $var2), \"\\n\");\nprint (\"var1 != var2 : \", ($var1 != $var2), \"\\n\");\nprint (\"var1 &lt; var2 : \", ($var1 &lt; $var2), \"\\n\");\nprint (\"var1 &lt;= var2 : \", ($var1 &lt;= $var2), \"\\n\");\nprint (\"var1 &gt; var2 : \", ($var1 &gt; $var2), \"\\n\");\nprint (\"var1 &gt;= var2 : \", ($var1 &gt;= $var2), \"\\n\");\nprint (\"var1 &gt;= var2 : \", ($var1 &lt;=&gt; $var2), \"\\n\");\n</code></pre>\n\n<p>When  ran above program, I am getting following output.</p>\n\n<pre><code>$ ./comparisonOperators \nvar1 = 20\nvar2 = 15\nvar1 == var2 : \nvar1 != var2 : 1\nvar1 &lt; var2 : \nvar1 &lt;= var2 : \nvar1 &gt; var2 : 1\nvar1 &gt;= var2 : 1\nvar1 &gt;= var2 : 1\n</code></pre>\n\n<p>My question, why I am not getting any result for var1 == var2, var1 &lt; var2, var1 &lt;= var2, and why comparison operators returning 1 instead of True/False.</p>\n"}, {"tags": ["perl", "perl-module", "par", "perl-packager"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 3645510, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tJHA4.jpg?s=128&g=1", "display_name": "b1zzu", "link": "https://stackoverflow.com/users/3645510/b1zzu"}, "edited": false, "score": 0, "creation_date": 1463480964, "post_id": 37272259, "comment_id": 62072621, "body": "I get the same problem by using YAML <code>use YAML</code>"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1463477401, "creation_date": 1463477401, "answer_id": 37272259, "question_id": 37270987, "link": "https://stackoverflow.com/questions/37270987/perl-pp-doesnt-include-switch-module/37272259#37272259", "title": "Perl PP doesn&#39;t include Switch module", "body": "<pre><code>$ corelist Switch\n\nData for 2016-05-09\nSwitch was first released with perl v5.7.3, deprecated (will be CPAN-only) in v5.11.0 and removed from v5.13.1\n</code></pre>\n\n<p>Switch was never a good idea. It's a source filter which means it's a clever party trick but shouldn't be used in production code. For that reason it has removed from Perl several versions ago.</p>\n\n<p>I suspect that you are running your packaged program on a more recent version of Perl than the unpackaged version - one that no longer includes Switch.</p>\n\n<p>You can install Switch on your target system or you can work out how to get <code>pp</code> to include the module in the package. But the best solution is to rewrite the code to stop using Switch.</p>\n"}, {"tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 0, "last_activity_date": 1463514415, "creation_date": 1463514415, "answer_id": 37285029, "question_id": 37270987, "link": "https://stackoverflow.com/questions/37270987/perl-pp-doesnt-include-switch-module/37285029#37285029", "title": "Perl PP doesn&#39;t include Switch module", "body": "<p>You can try to force the modules to be included, with <code>-M</code> option:</p>\n\n<pre><code>pp -M Switch -M YAML ...\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 3645510, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/tJHA4.jpg?s=128&g=1", "display_name": "b1zzu", "link": "https://stackoverflow.com/users/3645510/b1zzu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463514415, "creation_date": 1463473958, "last_edit_date": 1463479758, "question_id": 37270987, "link": "https://stackoverflow.com/questions/37270987/perl-pp-doesnt-include-switch-module", "title": "Perl PP doesn&#39;t include Switch module", "body": "<p>I created a perl script that includes the <code>Switch</code> module.</p>\n\n<p>hello_world.pl</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Switch;\nuse Data::Dumper;\n\nmy $var = \"Hello World\\n\";\nprint Dumper($var);\n</code></pre>\n\n<p>if I launch <code>perl hello_world.pl</code> everything works fine. But if I pack my script with <code>pp hello_world.pl</code> and than launch <code>./a.out</code> it gives me back this error:</p>\n\n<pre>\nCan't locate Switch.pm in @INC (you may need to install the Switch module) (@INC contains: CODE(0x7fb2631e6a88) /var/folders/rb/2b5sbs355n57svwzjjh7cb9c0000gn/T/par-6967676c6f62616c33/cache-710e967842eb844ab8d6fe5f46968c1b6f49e019/inc/lib /var/folders/rb/2b5sbs355n57svwzjjh7cb9c0000gn/T/par-6967676c6f62616c33/cache-710e967842eb844ab8d6fe5f46968c1b6f49e019/inc CODE(0x7fb262988de0) CODE(0x7fb262989930)) at script/hello_world.pl line 3.\nBEGIN failed--compilation aborted at script/hello_world.pl line 3\n</pre>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 383, "user_id": 5779381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J39g3.jpg?s=128&g=1", "display_name": "Trev Davies", "link": "https://stackoverflow.com/users/5779381/trev-davies"}, "edited": false, "score": 0, "creation_date": 1463473667, "post_id": 37270768, "comment_id": 62067762, "body": "If you have the power to manipulate your data before trying to split it, why not just use a character that you know won&#39;t be in there. # for example. Then you can just split by comma and replace all # with , afterwards?"}, {"owner": {"reputation": 2638, "user_id": 3278176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/0t1Nj.jpg?s=128&g=1", "display_name": "Ian2thedv", "link": "https://stackoverflow.com/users/3278176/ian2thedv"}, "reply_to_user": {"reputation": 383, "user_id": 5779381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J39g3.jpg?s=128&g=1", "display_name": "Trev Davies", "link": "https://stackoverflow.com/users/5779381/trev-davies"}, "edited": false, "score": 0, "creation_date": 1463474902, "post_id": 37270768, "comment_id": 62068522, "body": "@Remuze yes, that is also an option, but in doing that I will be adding a restricted character, which is what <code>,</code> is supposed to be. So if someone wants to use <code>#</code> one day, I will sit with a similar problem."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1463476716, "post_id": 37270768, "comment_id": 62069727, "body": "You&#39;ll need to be able to escape your backslashes if necessary (if one of your items ends in <code>`, you&#39;ll want to write it as </code>\\`).  This can get quite unmanageable in pure shell..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463481637, "post_id": 37270768, "comment_id": 62073099, "body": "The way the rest of the world does this is to enclose fields that contain the separator in double quotes, like so <code>1,10,100,&quot;1,000&quot;,&quot;10,000&quot;,&quot;100,000&quot;</code>. I think it would be wise of you to adopt the same standard, which would avail you of library software that will handle your data for you"}, {"owner": {"reputation": 2638, "user_id": 3278176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/0t1Nj.jpg?s=128&g=1", "display_name": "Ian2thedv", "link": "https://stackoverflow.com/users/3278176/ian2thedv"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463484946, "post_id": 37270768, "comment_id": 62075280, "body": "@Borodin I&#39;m starting to think this would be the best. Any suggestions as where to start?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463486829, "post_id": 37270768, "comment_id": 62076758, "body": "@Ian2thedv: That depends on what information you have to <i>start with</i>. I&#39;m a Perl programmer and would recommend that you install <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> which will do all the formatting for you. Others will be able to help you better if you prefer a different language"}], "answers": [{"comments": [{"owner": {"reputation": 2638, "user_id": 3278176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/0t1Nj.jpg?s=128&g=1", "display_name": "Ian2thedv", "link": "https://stackoverflow.com/users/3278176/ian2thedv"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1463474394, "post_id": 37270949, "comment_id": 62068219, "body": "@fedorqui Loosing the character is what I wanted in this case, thanks sat, great solution!"}, {"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1463474436, "post_id": 37270949, "comment_id": 62068242, "body": "@fedorqui, Updated answer. Thanks."}, {"owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "edited": false, "score": 0, "creation_date": 1463474548, "post_id": 37270949, "comment_id": 62068313, "body": "@lan2thedv, I was losing one character from your original value. That&#39;s now fixed."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 1, "creation_date": 1463474573, "post_id": 37270949, "comment_id": 62068327, "body": "Note you can also say <code>while IFS= read -r; do ... done &lt; &lt;(sed &#39;...&#39; &lt;&lt;&lt; &quot;$str&quot;)</code> so that you do not open a sub-shell."}], "tags": [], "owner": {"reputation": 13433, "user_id": 874178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/AdjGb.jpg?s=128&g=1", "display_name": "sat", "link": "https://stackoverflow.com/users/874178/sat"}, "is_accepted": true, "score": 3, "last_activity_date": 1463475190, "last_edit_date": 1463475190, "creation_date": 1463473857, "answer_id": 37270949, "question_id": 37270768, "link": "https://stackoverflow.com/questions/37270768/split-a-string-with-unescaped-delimiter-only/37270949#37270949", "title": "Split a string with unescaped delimiter only", "body": "<p>Try this:</p>\n\n<pre><code>$ str=\"1,10,100,1\\,000,10\\,000,100\\,000\"\n$ sed 's/\\([^\\]\\),/\\1\\n/g' &lt;&lt;&lt; $str\n1\n10\n100\n1\\,000\n10\\,000\n100\\,000\n</code></pre>\n\n<p>With <code>bash</code> one-liner:</p>\n\n<pre><code>$ sed 's/\\([^\\]\\),/\\1\\n/g' &lt;&lt;&lt; $str | while read -r line; do echo \"-&gt; $line\"; done\n-&gt; 1\n-&gt; 10\n-&gt; 100\n-&gt; 1\\,000\n-&gt; 10\\,000\n-&gt; 100\\,000\n</code></pre>\n\n<p>As per comment by @fedorqui, by this way you can avoid opening a sub-shell.</p>\n\n<pre><code>while IFS= read -r line; do echo \"-&gt; $line\"; done &lt; &lt;(sed 's/\\([^\\]\\),/\\1\\n/g' &lt;&lt;&lt; \"$str\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "is_accepted": false, "score": 1, "last_activity_date": 1463480299, "last_edit_date": 1463480299, "creation_date": 1463474544, "answer_id": 37271175, "question_id": 37270768, "link": "https://stackoverflow.com/questions/37270768/split-a-string-with-unescaped-delimiter-only/37271175#37271175", "title": "Split a string with unescaped delimiter only", "body": "<p>This is a way:</p>\n\n<pre><code>str=\"1,10,100,1\\,000,10\\,000,100\\,000\"\necho \"$str\" |sed -n 's/\\([0-9]\\+\\(\\\\,[0-9]*\\)*\\),\\+/\\1\\n/gp'\n1\n10\n100\n1\\,000\n10\\,000\n100\\,000\n</code></pre>\n\n<p>With <code>tr</code> you can just remove those backslashes:</p>\n\n<pre><code>str=\"1,10,100,1\\,000,10\\,000,100\\,000\"\necho \"$str\" |sed -n 's/\\([0-9]\\+\\(\\\\,[0-9]*\\)*\\),\\+/\\1\\n/gp' |tr -d '\\\\'\n1\n10\n100\n1,000\n10,000\n100,000\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2638, "user_id": 3278176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/0t1Nj.jpg?s=128&g=1", "display_name": "Ian2thedv", "link": "https://stackoverflow.com/users/3278176/ian2thedv"}, "edited": false, "score": 1, "creation_date": 1463485020, "post_id": 37272118, "comment_id": 62075345, "body": "Thanks for the answer!"}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 0, "last_activity_date": 1463477024, "creation_date": 1463477024, "answer_id": 37272118, "question_id": 37270768, "link": "https://stackoverflow.com/questions/37270768/split-a-string-with-unescaped-delimiter-only/37272118#37272118", "title": "Split a string with unescaped delimiter only", "body": "<p>Using gnu <code>awk</code> you can use <code>FPAT</code> to use complex regex to parse each field separately:</p>\n\n<pre><code>str=\"1,10,100,1\\,000,10\\,000,100\\,000\"\n\nawk -v FPAT='[^,\\\\\\\\]*(\\\\\\\\.[^,\\\\\\\\]*)*|[^,]*' '{\n     for (i=1; i&lt;=NF; i++) printf \"%d: &lt;%s&gt;\\n\", i, $i}' &lt;&lt;&lt; \"$str\"\n\n1: &lt;1&gt;\n2: &lt;10&gt;\n3: &lt;100&gt;\n4: &lt;1\\,000&gt;\n5: &lt;10\\,000&gt;\n6: &lt;100\\,000&gt;\n</code></pre>\n"}], "owner": {"reputation": 2638, "user_id": 3278176, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/0t1Nj.jpg?s=128&g=1", "display_name": "Ian2thedv", "link": "https://stackoverflow.com/users/3278176/ian2thedv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 37270949, "answer_count": 3, "score": 2, "last_activity_date": 1463555924, "creation_date": 1463473325, "last_edit_date": 1463555924, "question_id": 37270768, "link": "https://stackoverflow.com/questions/37270768/split-a-string-with-unescaped-delimiter-only", "title": "Split a string with unescaped delimiter only", "body": "<p>I want to split a string with <code>,</code> as delimiter.  My problem is that in some cases the input may contains commas. Changing the delimiter is not an option. I want users to be able to escape comma with <code>\\</code>, and so I want to split only on <code>,</code> <strong>but not</strong> on <code>\\,</code> like so:</p>\n\n<pre><code>str=\"1,10,100,1\\,000,10\\,000,100\\,000\"\nwhile [[ ${#str} -gt 0 ]]; do\n    #Get index of delimiter\n    index=$(echo \"$str\" | grep -boP '(?&lt;!\\\\),' | head -c 1)\n\n    #If index is empty, there is nothing to do\n    if [[ -z \"$index\" ]]; then\n        echo \"$str\"\n        break\n    fi\n\n    #Get the next string we're looking for\n    echo \"$str\" | cut -c1-$index\n    #Cut the original string\n    str=$(echo \"$str\" | cut -c$(($index+2))-${#str})\ndone\n</code></pre>\n\n<p>This is currently printing:</p>\n\n<pre><code>1\n10\n100\n1\\,000\n10\\,000\n100\\,000\n</code></pre>\n\n<p>But I want it to print:</p>\n\n<pre><code>1\n10\n100\n1,000\n10,000\n100,000\n</code></pre>\n\n<p>I can now use <code>sed</code> to replace <code>\\,</code> with <code>,</code> but this entire solution seems quite bulky for relatively simple problem. Is there a better way to do this?</p>\n"}, {"tags": ["perl", "unix", "ldap"], "owner": {"reputation": 2025, "user_id": 422567, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/06bb842dfa9b53b5ac3a8d7e001f469c?s=128&d=identicon&r=PG", "display_name": "MUY Belgium", "link": "https://stackoverflow.com/users/422567/muy-belgium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463473194, "creation_date": 1463473194, "question_id": 37270733, "link": "https://stackoverflow.com/questions/37270733/use-netldap-with-a-etc-conf-ldap-text-editable-configuration-file", "title": "Use Net::LDAP with a /etc/*.conf ldap text editable configuration file", "body": "<p>In order to list the users which finally have access to one service which is authenticated through <strong>pam.d</strong>, I would like to <strong>connect to my LDAP (perl Net::LDAP) using a conf file</strong> and not by mentioning ldap-ipaddress, port, password or anything except the name of the conf file which is used in <code>/etc/pam.d/myservice</code>, let us name this <code>/etc/ldap.myservice.conf</code>.</p>\n\n<p>Is there a open-source or free software project which aim at using perl module <code>Net::LDAP</code> with a conf file for pam.d module instead of mentioning connection credentials?  Or may be I have to parse myself this file?</p>\n\n<pre><code>#! /usr/bin/perl\nuse Net::LDAP ; # dreamed late at night\nmy $connection = new Net::LDAP( '/etc/myservice.ldap.conf' ) ; \n(...)\n</code></pre>\n\n<p>I browsed the Internet and found nothing. I feel that this feature could  give more versatility and integration to most of systems. </p>\n"}, {"tags": ["perl", "ubuntu", "tcl", "expect"], "comments": [{"owner": {"reputation": 2473, "user_id": 3360424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053232b4741b328e70079b94c6d2fa73?s=128&d=identicon&r=PG&f=1", "display_name": "diidu", "link": "https://stackoverflow.com/users/3360424/diidu"}, "edited": false, "score": 0, "creation_date": 1463470148, "post_id": 37269545, "comment_id": 62065480, "body": "tclsh /path/expect.tcl ? Assuming you have the toolset installed."}, {"owner": {"reputation": 2473, "user_id": 3360424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053232b4741b328e70079b94c6d2fa73?s=128&d=identicon&r=PG&f=1", "display_name": "diidu", "link": "https://stackoverflow.com/users/3360424/diidu"}, "edited": false, "score": 0, "creation_date": 1463470681, "post_id": 37269545, "comment_id": 62065817, "body": "Yes. Try the command &quot;tclsh /path/expect.tcl&quot; (replace path with correct one)."}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "reply_to_user": {"reputation": 2473, "user_id": 3360424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053232b4741b328e70079b94c6d2fa73?s=128&d=identicon&r=PG&f=1", "display_name": "diidu", "link": "https://stackoverflow.com/users/3360424/diidu"}, "edited": false, "score": 0, "creation_date": 1463471338, "post_id": 37269545, "comment_id": 62066281, "body": "I couldn&#39;t able to run the expect script directly using perl on windows so i was running this using TCL using system(&quot;C:/Tcl/bin/tclsh86 C:/Users/sysadmin/desktop/expect.tcl&quot;); in perl.  But Now i need to run the same on ubuntu so could you please tell what command should be there in perl to execute expect script? It&#39;d be helpful if you give me the full command."}, {"owner": {"reputation": 2473, "user_id": 3360424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053232b4741b328e70079b94c6d2fa73?s=128&d=identicon&r=PG&f=1", "display_name": "diidu", "link": "https://stackoverflow.com/users/3360424/diidu"}, "edited": false, "score": 0, "creation_date": 1463472569, "post_id": 37269545, "comment_id": 62067065, "body": "Oh, I got it, you want to run expect script from perl script, not from the shell. Sorry, I do not know answer for that, at least not without some investigation."}, {"owner": {"reputation": 2473, "user_id": 3360424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053232b4741b328e70079b94c6d2fa73?s=128&d=identicon&r=PG&f=1", "display_name": "diidu", "link": "https://stackoverflow.com/users/3360424/diidu"}, "edited": false, "score": 0, "creation_date": 1463479872, "post_id": 37269545, "comment_id": 62071951, "body": "It migth make sense to do some googling yourself. Try this one: <a href=\"http://stackoverflow.com/questions/3200801/how-can-i-call-a-shell-command-in-my-perl-script\" title=\"how can i call a shell command in my perl script\">stackoverflow.com/questions/3200801/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": true, "score": 0, "last_activity_date": 1463489861, "creation_date": 1463489861, "answer_id": 37276893, "question_id": 37269545, "link": "https://stackoverflow.com/questions/37269545/command-to-run-tcl-expect-script-from-perl-script-in-ubuntu/37276893#37276893", "title": "Command to run Tcl (expect) script from perl script in Ubuntu", "body": "<p>If Tcl 8.6 is installed, it's just:</p>\n\n<pre><code>system(\"tclsh8.6 /path/to/expect.tcl\");\n</code></pre>\n\n<p>If it isn't installed, fix that with <code>apt-get install tcl8.6</code> (which needs to be run as root, of course) or using the package manager GUI.</p>\n"}], "owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 37276893, "answer_count": 1, "score": 1, "last_activity_date": 1463489861, "creation_date": 1463469471, "last_edit_date": 1463475460, "question_id": 37269545, "link": "https://stackoverflow.com/questions/37269545/command-to-run-tcl-expect-script-from-perl-script-in-ubuntu", "title": "Command to run Tcl (expect) script from perl script in Ubuntu", "body": "<p>I was using the below command in windows to run the Tcl (expect) script from a Perl script.  </p>\n\n<pre><code>system(\"C:/Tcl/bin/tclsh86 C:/Users/sysadmin/desktop/expect.tcl\");\n</code></pre>\n\n<p>Could someone tell me its equivalent command in Ubuntu.</p>\n"}, {"tags": ["perl", "waitpid"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1463468112, "post_id": 37269040, "comment_id": 62064320, "body": "Are you sure <code>$pid</code> is what you think it is? What is the return value of <code>waitpid</code>? It will indicate what process terminated."}, {"owner": {"reputation": 111, "user_id": 3395103, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f9e45b2fa828aad234bb55720929922?s=128&d=identicon&r=PG&f=1", "display_name": "user3395103", "link": "https://stackoverflow.com/users/3395103/user3395103"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1463468228, "post_id": 37269040, "comment_id": 62064390, "body": "@Schwern - return value of waitpid is -1. This means there is no such child process i guess. And i added below lines to check $pid is running or not.                                                                                                    my $exists = kill 0, $pid; print &quot;Process is running\\n&quot; if ( $exists );  And it prints the statement"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1463472030, "post_id": 37269040, "comment_id": 62066733, "body": "You cannot. You can only <code>wait</code> on a child process. See <code>perldoc wait</code> (or <code>waitpid</code>, it&#39;s the same), first sentence.  If you want to know when an external program completes you have to do completely different things."}, {"owner": {"reputation": 111, "user_id": 3395103, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f9e45b2fa828aad234bb55720929922?s=128&d=identicon&r=PG&f=1", "display_name": "user3395103", "link": "https://stackoverflow.com/users/3395103/user3395103"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463472950, "post_id": 37269040, "comment_id": 62067317, "body": "@zdim can u plz suggest any other approach to achieve this? I tried this - my $exists;                         do                         {                         $exists =  kill 0, $dgraphpid;                         }while ( $exists );"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463475259, "post_id": 37269040, "comment_id": 62068784, "body": "What is the external program?  Do you have any control over it, how it is started, what it does ...?  (Is it also your code?)"}, {"owner": {"reputation": 111, "user_id": 3395103, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f9e45b2fa828aad234bb55720929922?s=128&d=identicon&r=PG&f=1", "display_name": "user3395103", "link": "https://stackoverflow.com/users/3395103/user3395103"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463476851, "post_id": 37269040, "comment_id": 62069802, "body": "@zdim external program here is different module which saves current pid to a file. I can access pid and can use it to wait for its completion. What i tried, i mentioned in above comment."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463524724, "post_id": 37269040, "comment_id": 62099732, "body": "I am posting something for Linux, with a note for Windows.  Please let me know if more is needed for Win."}], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 3, "last_activity_date": 1463474226, "creation_date": 1463474226, "answer_id": 37271058, "question_id": 37269040, "link": "https://stackoverflow.com/questions/37269040/how-to-wait-for-running-process-to-complete-in-perl-when-running-process-is-not/37271058#37271058", "title": "How to wait for running process to complete in perl when running process is not child process?", "body": "<p>The <a href=\"http://perldoc.perl.org/functions/waitpid.html\" rel=\"nofollow\"><code>waitpid</code> documentation</a> states:</p>\n\n<blockquote>\n  <p>Waits for a particular <strong>child process</strong> to terminate and returns the pid\n  of the deceased process, or -1 if there is no such child process.</p>\n</blockquote>\n\n<p>Quick test:</p>\n\n<pre><code>my $pid = open my $fh,\"-|\",\"sleep 3\";\nprint waitpid(28779,0); # Some other process\nprint waitpid($pid,0);\n</code></pre>\n\n<p>28779 is another process currently running (took a random one from <code>ps axu</code>). Output:</p>\n\n<pre><code>-1\n4088\n</code></pre>\n\n<p>You can't use <code>waitpid</code> to wait for a process which are not a child of your current process.</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/kill.html\" rel=\"nofollow\">The <code>kill</code> command</a> could check if a PID is currently running:</p>\n\n<pre><code>print kill(0,28779);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n</code></pre>\n\n<p>You'd still need to poll (loop with sleep) for the pid to disappear. Also remember that the monitored process might exit and a new one might reuse the same PID before your next check (unlikely, but possible).</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 111, "user_id": 3395103, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f9e45b2fa828aad234bb55720929922?s=128&d=identicon&r=PG&f=1", "display_name": "user3395103", "link": "https://stackoverflow.com/users/3395103/user3395103"}, "edited": false, "score": 0, "creation_date": 1464113093, "post_id": 37287408, "comment_id": 62347212, "body": "@user3395103 Glad it worked.  It turned out a long post, let me know if there are any furhter questions or issues."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1544772280, "last_edit_date": 1544772280, "creation_date": 1463525020, "answer_id": 37287408, "question_id": 37269040, "link": "https://stackoverflow.com/questions/37269040/how-to-wait-for-running-process-to-complete-in-perl-when-running-process-is-not/37287408#37287408", "title": "How to wait for running process to complete in perl when running process is not child process?", "body": "<p><strong>Note</strong> &nbsp; A simple-minded one-liner with <code>kill 0, $pid</code> is at end, commented.</p>\n\n<hr>\n\n<p>We need to detect completion of an external program, which had not been started by this script. The question asks about using <code>waitpid</code>. To copy my early comment:</p>\n\n<blockquote>\n  <p>You cannot. You can only wait on a child process. See <a href=\"http://perldoc.perl.org/functions/wait.html\" rel=\"nofollow noreferrer\"><code>perldoc wait</code></a> (or <a href=\"http://perldoc.perl.org/functions/wait.html\" rel=\"nofollow noreferrer\"><code>waitpid</code></a>, it's the same), first sentence.</p>\n</blockquote>\n\n<p>The <code>wait</code> and <code>waitpid</code> wait for signals delivered to the script regarding the fate of its child(ren).  There is no reason for the script to receive such signals about processes that it did not start.</p>\n\n<hr>\n\n<p>We know the process's id and its name.  Its PID can be used to <em>poll</em> for whether it is running.  Using <code>pid</code> on its own is not completely reliable since in between our checks the process can finish and a random new one be assigned the same <code>pid</code>. We can use the program's name to strengthen this. </p>\n\n<p>On a Linux system information about a process can be obtained by utilizing (the <em>many</em>) <code>ps</code> options.  Either of these returns the program's full invocation</p>\n\n<pre>\nps --no-headers -o cmd PID\nps --no-headers -p PID -o cmd\n</pre>\n\n<p>The returned string may start with the interpreter's path (for a Perl script, for example), followed by the program's full name. The version <code>ps -p PID -o comm=</code> returns only the program's name, but I find that it may break that word on a hyphen (if there), resulting in an incomplete name.  This may need tweaking on some systems, please consult your <code>man ps</code>.  If there is no process with given PID we get nothing back.</p>\n\n<p>Then we can check for PID and if found check whether the name for that PID matches the program. The program's name is known and we could just hardcode that. However, it is still obtained by the script as it starts, using the above <code>ps</code> command, to avoid ambiguities. (Then it is also in the same format for later comparison.) This itself is checked against the known name since there is no guarantee that the PID at the time of script execution is indeed for the expected program.</p>\n\n<pre><code>use warnings;\nuse strict;\n\n# For testing. Retrieve your PID as appropriate for real use    \nmy $ext_pid = $ARGV[0] || $$;\n\nmy $cmd_get_name = \"ps --no-headers -o cmd $ext_pid\";\n\n# For testing.  Replace 'sleep' by your program name for real use\nmy $known_prog_name = 'sleep';\n\n# Get the name of the program with PID\nmy $prog_name = qx($cmd_get_name);\n\n# Test against the known name, exit if there is a mismatch\nif ($prog_name !~ $known_prog_name) {\n    warn \"Mismatch between:\\n$prog_name\\n$known_prog_name -- $!\";\n    exit;\n}   \n\nmy $name;\nwhile ( $name = qx($cmd_get_name) and $name =~ /$prog_name/ )\n{\n    print \"Sleeping 1 sec ... \\n\";\n    sleep 1;\n}   \n# regex above may need slight adjustment, depending on format of ps return\n</code></pre>\n\n<p>The command output received via <code>qx()</code> above (backtick operator) contains a newline.  If that proves to be a problem in what the script does it can be <code>chomp</code>-ed, which would require a slight adjustment. The remaining loophole is that <em>that</em> very program may have finished and was restarted between the checks, and with the same PID.</p>\n\n<p>This would be tested by running in a shell</p>\n\n<pre>\nsleep 30 &\nscript.pl `ps aux | egrep '[s]leep'`\n</pre>\n\n<p>The <code>egrep</code> is <code>grep -E</code>. The output from <code>`ps ...`</code> contains multiple words. These are passed as command line arguments to our script, which uses the first one as the PID. If there is a problem with it run the <code>ps</code> filtering first and then manually enter the PID as script's input argument. The <code>sleep</code> of 30 seconds above is to give enough time to do all this on the command line.</p>\n\n<p>The code can be simplified by matching <code>$name</code> with a hard-coded <code>$prog_name</code>, if the program name is unique enough and it will not change.\nThe hard-coded name <em>is</em> used above, but for a check and it generates a warning if mismatched. (If we rely on it only hardcoded we cannot issue warnings if it mismatches, since that is then a part of code's operation.)</p>\n\n<hr>\n\n<p>If the process is owned by the same user as the script one can use <code>kill 0, $pid</code>, as</p>\n\n<pre><code>while ( kill 0, $ext_pid ) { sleep 1 }\n</code></pre>\n\n<p>Then you'd either have to make another call to check the name or be content with the (small) possibility of an error in what actual process the <code>$pid</code> represents.</p>\n\n<p>The module <a href=\"http://search.cpan.org/~jwb/Proc-ProcessTable-0.53/ProcessTable.pm\" rel=\"nofollow noreferrer\"><code>Proc::ProcessTable</code></a> can be used for much of this</p>\n"}], "owner": {"reputation": 111, "user_id": 3395103, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f9e45b2fa828aad234bb55720929922?s=128&d=identicon&r=PG&f=1", "display_name": "user3395103", "link": "https://stackoverflow.com/users/3395103/user3395103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3288, "favorite_count": 1, "accepted_answer_id": 37287408, "answer_count": 2, "score": 2, "last_activity_date": 1544772280, "creation_date": 1463467885, "last_edit_date": 1463478464, "question_id": 37269040, "link": "https://stackoverflow.com/questions/37269040/how-to-wait-for-running-process-to-complete-in-perl-when-running-process-is-not", "title": "How to wait for running process to complete in perl when running process is not child process?", "body": "<p>I am going through a Perl script which is using \n<code>waitpid($pid, 0)</code> to wait for current process to complete.\nBut <code>print</code> statement written right after this <code>waitpid</code> is printing it before the process gets complete.</p>\n\n<p>I want to know why <code>waitpid</code> is not waiting for process to complete first.</p>\n\n<p>Also, control of running process is under different module, not part of this perl script. Only accessible is pid and name of the process. I can't change anything in the module which invokes the process.</p>\n"}, {"tags": ["perl", "perl-module", "openssh"], "answers": [{"comments": [{"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1463542924, "post_id": 37276318, "comment_id": 62104117, "body": "Thanks @edehont. I changed the permissions to 700. I still face the same issue."}, {"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1463543779, "post_id": 37276318, "comment_id": 62104397, "body": "I changed the permissions of  /root/.libnet-openssh-perl/ to 500. It worked. this link -<a href=\"http://rpm.pbone.net/index.php3/stat/45/idpl/16345800/numer/3/nazwa/Net::OpenSSH\" rel=\"nofollow noreferrer\">link</a>  suggests that the file should be writable only by the current user. But it no where mentions that it should not be executable. Can you please provide more insight?"}, {"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1463543877, "post_id": 37276318, "comment_id": 62104433, "body": "I got the following error <i>unable to establish master SSH connection: the authenticity of the target host can&#39;t be established; the remote host public key is probably not present on the &#39;~/.ssh/known_hosts&#39; file at /usr/local/share/perl/5.18.2/Net/OpenSSH/Compat/Perl.pm line 123._</i> . I did SSH using SSH client and since the public key got added, it is working now. Doesn&#39;t Net::OpenSSH::Compat::Perl fetch public key of the remote host?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6340684"}, "reply_to_user": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1463584474, "post_id": 37276318, "comment_id": 62129261, "body": "Directories should be &#39;executable&#39; (or else you can&#39;t search them) but files shouldn&#39;t, unless they are executable files."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6340684"}, "reply_to_user": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 1, "creation_date": 1463586106, "post_id": 37276318, "comment_id": 62130431, "body": "Accepting a host fingerprint without asking can be a security risk. Manually fetching the remote key like you did is the right way to go. You can however override the question with the option &quot;StrictHostKeyChecking yes&quot; in the local ssh configuration. When the remote host key changes, you still either will have to import it with a manual ssh session, or remove the old one from known_hosts manually. You can persuade ssh to store host keys in /dev/null, so every host is always considered new. But that is a very dirty trick that I wouldn&#39;t recommend."}, {"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1463592033, "post_id": 37276318, "comment_id": 62134046, "body": "thanks a lot! I had made the change in &quot;ssh_config&quot; to blindly add the host key. But will it be a problem once the host key has changed?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6340684"}, "reply_to_user": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1463595927, "post_id": 37276318, "comment_id": 62136144, "body": "Host keys don&#39;t change without a reason. Typically it happens with a fresh install. Ignoring host key changes leave you vulnerable to man in the middle attacks. This topic is becoming a chat, so let&#39;s end it here."}, {"owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "edited": false, "score": 0, "creation_date": 1463624228, "post_id": 37276318, "comment_id": 62146582, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/112343/discussion-between-silentmonk-and-edehont\">continue this discussion in chat</a>."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6340684"}, "is_accepted": true, "score": 1, "last_activity_date": 1463488348, "creation_date": 1463488348, "answer_id": 37276318, "question_id": 37268785, "link": "https://stackoverflow.com/questions/37268785/ctl-dir-root-libnet-openssh-perl-is-not-secure-at-usr-local-share-perl-5-18/37276318#37276318", "title": "ctl_dir /root/.libnet-openssh-perl/ is not secure at /usr/local/share/perl/5.18.2/Net/OpenSSH/Compat/Perl.pm line 123", "body": "<p>The permissions on /root/ could be too loose. Group writeable could mean able to delete a .libnet-openssh-perl/ by someone other than root, which is not a secure situation.</p>\n\n<p>Please check.</p>\n"}], "owner": {"reputation": 2565, "user_id": 4593127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d661b3425b0e9cd38ee220844e1b8659?s=128&d=identicon&r=PG&f=1", "display_name": "gaganso", "link": "https://stackoverflow.com/users/4593127/gaganso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1737, "favorite_count": 0, "accepted_answer_id": 37276318, "answer_count": 1, "score": 0, "last_activity_date": 1463488348, "creation_date": 1463466900, "question_id": 37268785, "link": "https://stackoverflow.com/questions/37268785/ctl-dir-root-libnet-openssh-perl-is-not-secure-at-usr-local-share-perl-5-18", "title": "ctl_dir /root/.libnet-openssh-perl/ is not secure at /usr/local/share/perl/5.18.2/Net/OpenSSH/Compat/Perl.pm line 123", "body": "<p>I installed Net::OpenSSH::Compat::Perl recently. All the dependencies were installed without any errors. But when I try to login using the following code</p>\n\n<pre><code>$linux_ses= Net::OpenSSH::Compat::Perl-&gt;new($host);\n$linux_ses-&gt;login($linux_uname,$linux_pass); \n</code></pre>\n\n<p>I get the following error message:</p>\n\n<p>\"ctl_dir /root/.libnet-openssh-perl/ is not secure at /usr/local/share/perl/5.18.2/Net/OpenSSH/Compat/Perl.pm line 123.\"</p>\n\n<p>I am running the script as root and the file permission of /root/.libnet-openssh-perl/ is 700.</p>\n"}, {"tags": ["perl", "selenium", "browsermob-proxy"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6343366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ed575a0b6b29c796ea049d43fc8d5d?s=128&d=identicon&r=PG&f=1", "display_name": "Patta", "link": "https://stackoverflow.com/users/6343366/patta"}, "edited": false, "score": 0, "creation_date": 1463543268, "post_id": 37267257, "comment_id": 62104230, "body": "Thanks for replying. But It doesn&#39;t work. I don&#39;t get http parameters"}, {"owner": {"reputation": 11, "user_id": 6343366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ed575a0b6b29c796ea049d43fc8d5d?s=128&d=identicon&r=PG&f=1", "display_name": "Patta", "link": "https://stackoverflow.com/users/6343366/patta"}, "edited": false, "score": 0, "creation_date": 1463789030, "post_id": 37267257, "comment_id": 62229972, "body": "@Pathak, Please find the output as below."}, {"owner": {"reputation": 11, "user_id": 6343366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ed575a0b6b29c796ea049d43fc8d5d?s=128&d=identicon&r=PG&f=1", "display_name": "Patta", "link": "https://stackoverflow.com/users/6343366/patta"}, "edited": false, "score": 0, "creation_date": 1463789125, "post_id": 37267257, "comment_id": 62229991, "body": "$VAR1 = {  &#39;log&#39; =&gt; {  &#39;entries&#39; =&gt; [],  &#39;version&#39; =&gt; &#39;1.2&#39;,  &#39;pages&#39; =&gt; [  {  &#39;startedDateTime&#39; =&gt; &#39;2016-05-20T19:02:34.105-05:00&#39;,  &#39;title&#39; =&gt; &#39;Page 0&#39;,  &#39;comment&#39; =&gt; &#39;&#39;,  &#39;id&#39; =&gt; &#39;Page 0&#39;,  &#39;pageTimings&#39; =&gt; {  &#39;comment&#39; =&gt; &#39;&#39;  }  }  ],  &#39;creator&#39; =&gt; {  &#39;name&#39; =&gt; &#39;BrowserMob Proxy&#39;,  &#39;comment&#39; =&gt; &#39;&#39;,  &#39;version&#39; =&gt; &#39;2.1.0-beta-6-littleproxy&#39;  },  &#39;comment&#39; =&gt; &#39;&#39;  }  };"}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 0, "last_activity_date": 1463459973, "creation_date": 1463459973, "answer_id": 37267257, "question_id": 37265975, "link": "https://stackoverflow.com/questions/37265975/capture-http-request-headers-parameters-using-browsermob-proxy-and-selenium-we/37267257#37267257", "title": "Capture HTTP request headers / parameters using BrowserMob Proxy and selenium web driver using perl client", "body": "<p>Use <code>create_new_har</code> instead of <code>new_har</code>.</p>\n\n<pre><code>$proxy-&gt;create_new_har(\n    payload =&gt; {\n        initialPageRef =&gt; 'payload is optional'\n    },\n    captureHeaders =&gt; 'true',\n    captureContent =&gt; 'true',\n    captureBinaryContent =&gt; 'true'\n);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6343366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ed575a0b6b29c796ea049d43fc8d5d?s=128&d=identicon&r=PG&f=1", "display_name": "Patta", "link": "https://stackoverflow.com/users/6343366/patta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1457, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463945467, "creation_date": 1463450768, "last_edit_date": 1463945467, "question_id": 37265975, "link": "https://stackoverflow.com/questions/37265975/capture-http-request-headers-parameters-using-browsermob-proxy-and-selenium-we", "title": "Capture HTTP request headers / parameters using BrowserMob Proxy and selenium web driver using perl client", "body": "<p>I'm trying to capture http request parameters using Selenium::Remote::Driverand Browsermob::Proxy. The pseudo code is as below. I couldn't get the http headers.</p>\n\n<p>Any help would be appreciated.</p>\n\n<pre><code>use Selenium::Remote::Driver;\nuse Data::Dumper;\n\nmy $proxy = Browsermob::Proxy-&gt;new(trace =&gt; 2);\nmy $driver = Selenium::Remote::Driver-&gt;new(\nbrowser_name =&gt; 'firefox',\nproxy        =&gt; $proxy-&gt;selenium_proxy(1)\n);\n\n$proxy-&gt;new_har( payload =&gt; {\n        initialPageRef =&gt; '1' }, captureHeaders =&gt; 'true',\n    captureContent =&gt; 'true',\n    captureBinaryContent =&gt; 'true');\n\n$driver-&gt;get('http://www.google.com/');\nprint Dumper($proxy-&gt;har);\n</code></pre>\n\n<p>UPDATE:</p>\n\n<ol>\n<li>The module Net::HTTP::Spore::Role::Middleware uses a deprecated method (Class::MOP::load_class). I changed it to Class::Load::load_class</li>\n<li>The argument 'httpProxy' to Selenium::Remote::Driver has to be specific IP address without URL scheme. If it is $proxy->selenium_proxy, it is not working.</li>\n</ol>\n\n<p>However, I could capture only first request. The subsequent requests that selenium drive makes couldn't be captured. For example, the below code captures only the first GET request not the second one.</p>\n\n<pre><code>use Data::Dumper;\nuse Browsermob::Proxy;\nuse Selenium::Remote::Driver;\n\nmy $proxy = Browsermob::Proxy-&gt;new(\nserver_port =&gt; 8080,\n);\n\n\n$proxy-&gt;new_har( payload =&gt; {\n        initialPageRef =&gt; 'payload is optional' }, captureHeaders =&gt; 'true',\n    captureContent =&gt; 'true',\n    captureBinaryContent =&gt; 'true', port =&gt; $proxy-&gt;port );\n\nmy $driver = Selenium::Remote::Driver-&gt;new(\nbrowser_name =&gt; 'firefox',\nproxy        =&gt;  { 'proxyType' =&gt; 'manual', 'httpProxy' =&gt;     '127.0.0.1:'.$proxy-&gt;port}, \n);\n$driver-&gt;get('http://www.google.com/');\n$driver-&gt;find_element(\"//input[\\@name='q']\")-&gt;send_keys(\"selenium\");\n$driver-&gt;find_element(\"//button[\\@name='btnG']\")-&gt;click;\nprint Dumper($proxy-&gt;har);\n</code></pre>\n"}, {"tags": ["perl", "ssl", "https", "lwp"], "comments": [{"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 1, "creation_date": 1463449417, "post_id": 37264884, "comment_id": 62058353, "body": "LWP 6.15 is a version that has already had <code>LWP::Protocol::https</code> unbundled, so having that installed should be requirement for even starting to use HTTPS. Moving my <code>L::P::https</code> module away, I get an &quot;LWP will support https URLs if the LWP::Protocol::https module is installed.&quot; error. One thing that might help with debugging is <code>perl -MCarp::Always</code> to always give you stack traces. That and something like <code>printf(&quot;%s =&gt; %s (MD5 %s)\\n&quot;, $_, $INC{$_}, qx#md5sum $INC{$_}# =~ &#47;^(\\S+)&#47;) for sort keys %INC;</code> somewhere near the error location to give you the list of modules actually in use."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1463494877, "post_id": 37264884, "comment_id": 62083014, "body": "Latest <a href=\"http://search.cpan.org/~ether/libwww-perl-6.15/lib/LWP/UserAgent.pm#ATTRIBUTES\" rel=\"nofollow noreferrer\">LWP::UserAgent doc</a> says &quot;The libwww-perl core no longer bundles protocol plugins for SSL. You will need to install LWP::Protocol::https separately to enable support for processing https-URLs.&quot;"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 1, "creation_date": 1463544250, "post_id": 37264884, "comment_id": 62104550, "body": "Yes, that was my point: <code>LWP::Protocol::https</code> used to come with LWP but in your version it already doesn&#39;t. So if something is checking certs without you having this module installed, weird things are going on. Hence my suggestion to dump <code>%INC</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1463496166, "post_id": 37266271, "comment_id": 62084023, "body": "Since Frontier::Client uses LWP::UserAgent internally and does not expose all its options in its own API, I had to go into Frontier::Client itself and set this.  I tried both <code>new( ssl_opts =&gt; { verify_hostname =&gt; 0 } )</code> as well as <code>ua-&gt;ssl_opts( verify_hostname =&gt; 0 )</code> to no avail.  Something nefarious is going on."}], "tags": [], "owner": {"reputation": 359, "user_id": 1001500, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/eCNDe.png?s=128&g=1", "display_name": "gfunk", "link": "https://stackoverflow.com/users/1001500/gfunk"}, "is_accepted": false, "score": 1, "last_activity_date": 1463513880, "last_edit_date": 1463513880, "creation_date": 1463453112, "answer_id": 37266271, "question_id": 37264884, "link": "https://stackoverflow.com/questions/37264884/how-to-get-frontierclient-lwp-to-stop-verifying-the-ssl-certificate-in-a-cgi/37266271#37266271", "title": "How to get Frontier::Client / LWP to STOP verifying the SSL certificate in a CGI::Application web app?", "body": "<p><a href=\"https://metacpan.org/pod/LWP::UserAgent#ua-ssl_opts-key-value\" rel=\"nofollow\">LWP::UserAgent::ssl_opts(verify_hostname => 0);</a></p>\n\n<p><strong>--- UPDATE 5/17/16 330pm ---</strong></p>\n\n<p>If you are okay with editing Frontier::Client (or just copy-pasting it and giving it a different package/file name) you can just replace use of LWP::UserAgent with WWW::Curl::Easy, which has been my go-to for SSL (I've got old version of LWP which uses libraries that have bugs). Here's curl code:</p>\n\n<pre><code>my ($rBody,$rHead); # response written here\nmy $curl = WWW::Curl::Easy-&gt;new();\n$curl-&gt;setopt(CURLOPT_URL, $url);\n$curl-&gt;setopt(CURLOPT_HEADER, 0);\n$curl-&gt;setopt(CURLOPT_POST, 1);\n$curl-&gt;setopt(CURLOPT_POSTFIELDS,  $myRequest);\n$curl-&gt;setopt(CURLOPT_HTTPHEADER,  \\@myHeaders);\n$curl-&gt;setopt(CURLOPT_WRITEDATA,   \\$rBody);\n$curl-&gt;setopt(CURLOPT_WRITEHEADER, \\$rHead);\n$curl-&gt;setopt(CURLOPT_FOLLOWLOCATION, 1);\n$curl-&gt;setopt(CURLOPT_SSL_VERIFYHOST, 0);\n$curl-&gt;setopt(CURLOPT_SSL_VERIFYPEER, 0);\nmy $cc = $curl-&gt;perform();\n</code></pre>\n\n<p>You can even use HTTP::Response->parse($rHeadRegexed . $rBody) afterwards to get the same object returned by LWP::UserAgent->request(etc);</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2090775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799122f957650d9e2d9e5c3c79c33612?s=128&d=identicon&r=PG", "display_name": "Franky", "link": "https://stackoverflow.com/users/2090775/franky"}, "is_accepted": false, "score": 2, "last_activity_date": 1491228554, "creation_date": 1491228554, "answer_id": 43186874, "question_id": 37264884, "link": "https://stackoverflow.com/questions/37264884/how-to-get-frontierclient-lwp-to-stop-verifying-the-ssl-certificate-in-a-cgi/43186874#43186874", "title": "How to get Frontier::Client / LWP to STOP verifying the SSL certificate in a CGI::Application web app?", "body": "<p>This is an old thread, but still I'd like to share my solution.\nJust add the following before doing frontier calls:</p>\n\n<pre><code>$ENV{'PERL_LWP_SSL_VERIFY_HOSTNAME'} = 0;\n</code></pre>\n\n<p>No need to change any frontier code or stuff ...</p>\n"}], "owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491228554, "creation_date": 1463442163, "last_edit_date": 1463442988, "question_id": 37264884, "link": "https://stackoverflow.com/questions/37264884/how-to-get-frontierclient-lwp-to-stop-verifying-the-ssl-certificate-in-a-cgi", "title": "How to get Frontier::Client / LWP to STOP verifying the SSL certificate in a CGI::Application web app?", "body": "<p>In dev and test environments, we are using self-signed SSL certs for a XMLRPC web service.  Production uses a nice 3rd party cert and cert verification works nicely, no problems there.</p>\n\n<p>In the code of the calling application, which is a CGI::Application web app, we  skip the verification of the SSL certs in the dev and test environments only, knowing it would and should fail... or try to skip it.  Despite setting $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME} to 0 the call still fails with:</p>\n\n<pre><code>Error executing run mode 'myRunMode': 500 Can't connect to mydomain.com:443 (certificate verify failed)\n</code></pre>\n\n<p>A bunch of other (possibly deprecated by now?) env variables have been tried and we can't seem to get around this error in the web app.  At the command line, we <em>can</em> make a successful call which ignores cert verification with all the same code, and we've compared versions of all the Perl modules in play (LWP is at 6.15 in both cases for instance).</p>\n\n<p>Online discussion points to different scenarios depending on which <em>SSL backend</em> is being used, so we experimented with installing LWP::Protocol::https and at least got different behavior.  We started failing with this instead just after the module installed:</p>\n\n<pre><code>Error executing run mode 'myRunMode': 404 Not Found\n</code></pre>\n\n<p>The 404 seems like a red herring but alas, removing LWP::Protocal::https gets us back to the 'certificate verification failed' error, so it seems like we might be on to something.</p>\n\n<p>Does anyone have any ideas about how the skip the certificate verification in this CGI::Application environment?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 6, "creation_date": 1463432285, "post_id": 37263085, "comment_id": 62052905, "body": "&quot;I think i may have wrong regular expression.&quot; That&#39;s why you shouldn&#39;t blindly copy code you don&#39;t understand. The <a href=\"http://stackoverflow.com/a/123666/176646\">Stack Overflow answer I assume you got that from</a> is written for a much wider range of input than you&#39;re trying to support, including country codes and extensions. Of course, <code>(000).000-0000</code> is probably not a <i>valid</i> phone number...are you sure you want to match it?"}, {"owner": {"reputation": 3, "user_id": 4211938, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p35SeM7ZgJE/AAAAAAAAAAI/AAAAAAAAAX0/tAOK90MHqJo/photo.jpg?sz=128", "display_name": "Sam", "link": "https://stackoverflow.com/users/4211938/sam"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463432594, "post_id": 37263085, "comment_id": 62053053, "body": "Yes I want to match it"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1463434580, "post_id": 37263085, "comment_id": 62054002, "body": "Why do you think you have the wrong regex?  What input is it matching that you don&#39;t want matched or vice versa?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1463436211, "post_id": 37263085, "comment_id": 62054711, "body": "@ysth Besides the syntax error in the OP&#39;s code, the regex doesn&#39;t match the 410 area code."}], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 4803909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca3d57d08f19bbbd6ba80df4ba2f7ea8?s=128&d=identicon&r=PG&f=1", "display_name": "paperazzo79", "link": "https://stackoverflow.com/users/4803909/paperazzo79"}, "is_accepted": true, "score": 0, "last_activity_date": 1463491755, "creation_date": 1463491755, "answer_id": 37277619, "question_id": 37263085, "link": "https://stackoverflow.com/questions/37263085/perl-script-that-display-lines-containing-only-valid-phone-numbers-anywhere-on-t/37277619#37277619", "title": "Perl script that display lines containing only valid phone numbers anywhere on the line?", "body": "<p>To catch lines with:\n(888).888-8888\nor\n((888.888-8888))\nyou can use this regex:</p>\n\n<pre><code>if ($string =~ /^.*?\\({0,2}\\d{3}\\){0,2}\\.\\d{3}-\\d{4}\\){0,2}/) {\n    # is a number\n} else {\n    # is not\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4211938, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p35SeM7ZgJE/AAAAAAAAAAI/AAAAAAAAAX0/tAOK90MHqJo/photo.jpg?sz=128", "display_name": "Sam", "link": "https://stackoverflow.com/users/4211938/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 37277619, "answer_count": 1, "score": -3, "last_activity_date": 1463491755, "creation_date": 1463431958, "question_id": 37263085, "link": "https://stackoverflow.com/questions/37263085/perl-script-that-display-lines-containing-only-valid-phone-numbers-anywhere-on-t", "title": "Perl script that display lines containing only valid phone numbers anywhere on the line?", "body": "<p>How do I write a Perl Script that display lines containing only valid phone numbers anywhere on the line?</p>\n\n<p>Let us assume that (888).888-8888 is a valid number, where 8 could be any number.</p>\n\n<pre><code>So the sample input is \n\nthis is nota number\n3214235234\n(410).977-2132\nmy num is ((410.222-1231))\ntest 234 test\n\nOutput:\n(410).977-2132\nmy num is ((410.222-1231))\n</code></pre>\n\n<p>Here is what i HAVE SO FAR </p>\n\n<pre><code>   if ($string =~ /^(?:(?:\\+?1\\s*(?:[.]\\s*)?)?(?:\\(\\s*([.][2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\\s*\\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\\s*(?:[.-]\\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\\s*(?:[.-]\\s*)?([0-9]{4})(?:\\s*(?:#|x\\.?|ext\\.?|extension)\\s*(\\d+))?$) {\n        # is a number\n    } else {\n        # is not\n    }\n</code></pre>\n\n<p>I think i may have wrong regular expression. Can you please help?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1463431173, "post_id": 37262852, "comment_id": 62052359, "body": "Welcome to the wonderful world of Perl&#39;s <a href=\"http://perldoc.perl.org/perlvar.html#%24%60\" rel=\"nofollow noreferrer\">built-in punctuation variables</a>!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463431400, "post_id": 37262852, "comment_id": 62052485, "body": "(We could probably explain the purpose better if you showed the last regex match in the code prior to this.)"}, {"owner": {"reputation": 122, "user_id": 2817749, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/463579caaaa8ee87ac614b489b5d7ff5?s=128&d=identicon&r=PG&f=1", "display_name": "user2817749", "link": "https://stackoverflow.com/users/2817749/user2817749"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463431689, "post_id": 37262852, "comment_id": 62052624, "body": "Thanks everyone, that was fast!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 6, "creation_date": 1463432747, "post_id": 37262852, "comment_id": 62053118, "body": "Please also note that <code>my $end = $` if $dir =~ m&#47;\\&#47;foldername&#47;</code> is <b><i>very</i></b> bad practice anyway. The <i>declaration</i> is modified as well as the <i>assignment</i>, and the exact behaviour depends on undocumented internals of Perl which may change. <a href=\"http://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">perldoc perlsyn</a> has this <i>&quot;The behaviour of a <code>my</code>, <code>state</code>, or <code>our</code> with a statement modifier is undefined&quot;</i>. You should use <code>my $end; $end = $` if $dir =~ m|&#47;foldername|;</code>"}, {"owner": {"reputation": 122, "user_id": 2817749, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/463579caaaa8ee87ac614b489b5d7ff5?s=128&d=identicon&r=PG&f=1", "display_name": "user2817749", "link": "https://stackoverflow.com/users/2817749/user2817749"}, "edited": false, "score": 0, "creation_date": 1463436820, "post_id": 37262852, "comment_id": 62054929, "body": "Thanks for the tip. I thought it looked ugly, but I wasn&#39;t sure why."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1463433082, "post_id": 37262906, "comment_id": 62053292, "body": "Kudos for mentioning the performance hit. You might want to update your post to note that with the copy-on-write system in v5.20.0, the performance penalty went away. <a href=\"http://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow noreferrer\">perldoc.perl.org/&hellip;</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463433501, "post_id": 37262906, "comment_id": 62053501, "body": "@stevieb: I have never come across a situation where this was significant, in any version of Perl. It&#39;s one of the great taboos of the language, but as soon as you read <i>anything</i> from a disk, it&#39;s suddenly irrelevant. Not that I would recommend using <code>$`</code> -- the modern ways are clearer"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463434100, "post_id": 37262906, "comment_id": 62053770, "body": "@stevieb  Thanks, added to post.  However, I completely agree with Borodin&#39;s comment and general recommendation."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463434741, "post_id": 37262906, "comment_id": 62054078, "body": "@zdim. I too totally agree with Borodin, but I thought it was worthy of note :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463434942, "post_id": 37262906, "comment_id": 62054170, "body": "@stevieb  By all means it is, thank you for binging it up. It belonged there as soon as I decided to quote the whole paragraph."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1569725893, "last_edit_date": 1569725893, "creation_date": 1463431259, "answer_id": 37262906, "question_id": 37262852, "link": "https://stackoverflow.com/questions/37262852/what-is-this-backtick-at-the-beginning-of-a-directory-name-perl/37262906#37262906", "title": "What is this backtick at the beginning of a directory name? (perl)", "body": "<p>The <code>$`</code> is a regex-related special variable, containing the string preceding the last succesful match. From <a href=\"https://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow noreferrer\">perlvar</a></p>\n\n<blockquote>\n  <p><strong>$`</strong><br>\n  The string preceding whatever was matched by the last successful pattern match, not counting any matches hidden within a BLOCK or eval enclosed by the current BLOCK.<br>\n  See Performance issues above for the serious performance implications of using this variable (even once) in your code.<br>\n  This variable is read-only and dynamically-scoped.<br>\n  Mnemonic: ` often precedes a quoted string.</p>\n</blockquote>\n\n<hr>\n\n<p>In this case it contains the part of the string in <code>$dir</code> that precedes the matched <code>|/foldername|</code>, if the match happened. Note that this line of code, with the conditional declaration, results in <strong><em>undefined behavior</em></strong> if there is no match. </p>\n\n<p>The code in <code>foreach</code> is then meant to copy folders <code>\"$dir/$folder\"</code> one level up. However, if the match failed this code runs after the program got into an invalid state.  So I would urge you to rewrite it, along the lines of: declare <code>$end</code> in a separate statement, then conditionally assign the match and enter the loop, or skip the loop (if the match fails and <code>$end</code> is <code>undef</code>).</p>\n\n<hr>\n\n<p>Following the link in documentation quote above, to <a href=\"http://perldoc.perl.org/perlvar.html#Performance-issues\" rel=\"nofollow noreferrer\">Performance issues</a></p>\n\n<blockquote>\n  <p>In Perl 5.20.0 a new copy-on-write system was enabled by default, which finally fixes all performance issues with these three variables, and makes them safe to use anywhere.</p>\n</blockquote>\n\n<p>The \"three variables\" refers to <code>$\\</code>, <code>$&amp;</code>, and <code>$'</code>.  Thanks to <a href=\"https://stackoverflow.com/users/1334695/stevieb\">stevieb</a> for this remark. </p>\n\n<p>However, I suggest following the recommendation by <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> to use modern tools and techniques.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463433274, "post_id": 37262915, "comment_id": 62053393, "body": "@ThisSuitIsBlackNot: Where did you learn about doubling backticks? It&#39;s a lot neater than using <code>&lt;code&gt;</code> elements. I just wish either one would honour leading and trailing whitespace. It also seems not to work in comments :-/"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1463433975, "post_id": 37262915, "comment_id": 62053718, "body": "@Borodin It&#39;s part of the <a href=\"http://daringfireball.net/projects/markdown/syntax#code\" rel=\"nofollow noreferrer\">original Markdown spec</a>, which Stack Exchange (kind of) adheres to. I don&#39;t think there&#39;s a good way to make it honor leading/trailing whitespace; you can use no-break spaces, but that&#39;s a horrible hack. Comments are special: you have to escape backticks with backslashes, so to get <code>$`</code> you have to enter <code>`$\\``</code>. I don&#39;t know why they decided to implement it this way."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 5, "last_activity_date": 1463431317, "last_edit_date": 1463431317, "creation_date": 1463431293, "answer_id": 37262915, "question_id": 37262852, "link": "https://stackoverflow.com/questions/37262852/what-is-this-backtick-at-the-beginning-of-a-directory-name-perl/37262915#37262915", "title": "What is this backtick at the beginning of a directory name? (perl)", "body": "<p>The variable <code>$`</code> is a Perl special variable whose \"English\" name is <code>$PREMATCH</code>.  From the perldoc website:</p>\n\n<blockquote>\n  <p>The string preceding whatever was matched by the last successful pattern match, not counting any matches hidden within a BLOCK or eval enclosed by the current BLOCK.  </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 9, "last_activity_date": 1463477672, "last_edit_date": 1463477672, "creation_date": 1463431787, "answer_id": 37263046, "question_id": 37262852, "link": "https://stackoverflow.com/questions/37262852/what-is-this-backtick-at-the-beginning-of-a-directory-name-perl/37263046#37263046", "title": "What is this backtick at the beginning of a directory name? (perl)", "body": "<p>It's not very pretty is it.</p>\n\n<p>The <code>$`</code> variable is one of the trinity <code>$`</code>, <code>$&amp;</code> and <code>$'</code> which represent the pre-match, match, and post-match parts of the last string that was subjected to a successful regex comparison</p>\n\n<p>For instance, if I have</p>\n\n<pre><code>my $s = 'abcdef';\n</code></pre>\n\n<p>then after</p>\n\n<pre><code>$s =~ /c./;\n</code></pre>\n\n<p>you will find that <code>$`</code> is <code>ab</code>, <code>$&amp;</code> is <code>cd</code>, and <code>$'</code> is <code>ef</code></p>\n\n<p>It's important to remember that, just like the capture variables <code>$1</code>, <code>$2</code> etc., these three are unaffected by failed regex matches. (They are not set to <code>undef</code>.) So it's vital to check whether a regex pattern matched before using any of them</p>\n\n<p>This is archaic Perl, maintained primarily for backward compatability. It was a good idea at the time because Perl was keeping close to shell syntax (as were awk and sed, which still do). Nowadays it is best to use <em>regex captures</em>, or perhaps <code>substr</code> in conjunction with the newer <code>@-</code> and <code>@+</code> arrays</p>\n\n<p>All of the special built-in variables are documented in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perldoc perlvar</a></p>\n"}], "owner": {"reputation": 122, "user_id": 2817749, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/463579caaaa8ee87ac614b489b5d7ff5?s=128&d=identicon&r=PG&f=1", "display_name": "user2817749", "link": "https://stackoverflow.com/users/2817749/user2817749"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 37263046, "answer_count": 3, "score": 2, "last_activity_date": 1569725893, "creation_date": 1463430993, "last_edit_date": 1463431628, "question_id": 37262852, "link": "https://stackoverflow.com/questions/37262852/what-is-this-backtick-at-the-beginning-of-a-directory-name-perl", "title": "What is this backtick at the beginning of a directory name? (perl)", "body": "<p>I am trying to understand a program. Correct my if I'm wrong, but backticks are used to execute commands in a shell, so I'm not sure what it is its purpose in the following code:</p>\n\n<pre><code>my $end = $` if $dir =~ m/\\/foldername/;\nforeach my $folder (@dirs_) {\n    my $start_from = \"$dir\" . \"\\/\" . \"$folder\";\n    my $move_to    = \"$end\" . \"\\/\" . \"$folder\";\n    rmtree $move_to;\n    dircopy($start_from, $move_to);\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1463418540, "post_id": 37259225, "comment_id": 62045684, "body": "Always use <code>use strict; use warnings qw( all );</code>!"}, {"owner": {"reputation": 596, "user_id": 1132448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dcd4c1e1235863799742321195aa2764?s=128&d=identicon&r=PG", "display_name": "CyberJacob", "link": "https://stackoverflow.com/users/1132448/cyberjacob"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463419705, "post_id": 37259225, "comment_id": 62046307, "body": "I have both at the top of the script, but omitted them (along with the rest of the script) for clarity"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 5, "creation_date": 1463420340, "post_id": 37259225, "comment_id": 62046597, "body": "@CyberJacob: If you have <code>use warnings</code> in place then you are ignoring the message <code>Scalar value @packetData[0] better written as $packetData[0]</code>. Why are you doing that?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1463420447, "post_id": 37259225, "comment_id": 62046639, "body": "@CyberJacob Since it&#39;s hard to debug other people&#39;s code when you have to fill in missing pieces by guesswork, I would recommend creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, including sample input data."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1463421547, "post_id": 37259225, "comment_id": 62047261, "body": "Re &quot;<i>I have both at the top of the script,</i>&quot;, huh, the code you posted doesn&#39;t compile with them, and emits numerous warnings."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463427045, "post_id": 37259225, "comment_id": 62050204, "body": "Tip: <code>$detectedClient{&quot;@packetData[0]&quot;} = [@newClient];</code> is a wasteful version of <code>$detectedClient{&quot;@packetData[0]&quot;} = \\@newClient;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 3, "creation_date": 1463421707, "post_id": 37260086, "comment_id": 62047365, "body": "<code>$foo{bar][1]</code> is exactly the same as <code>$foo{bar}-&gt;[1]</code>.  Arrows between brackets/braces are not required.  Please read: <a href=\"http://perldoc.perl.org/perlreftut.html#Arrow-Rule\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlreftut.html#Arrow-Rule</a>"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1463422712, "post_id": 37260086, "comment_id": 62047879, "body": "@PaulL I had pushed an earlier version by mistake. Herein, they are required. Also, the syntax is clearer as to intent, IMO [and I&#39;ve been writing perl for 20+ and have some 250,000 lines of it]"}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 3, "creation_date": 1463422810, "post_id": 37260086, "comment_id": 62047935, "body": "It&#39;s your answer that needs to change, in addition to the code.  You are claiming that OP made a syntactic error by omitting the arrows between the subscripts.  He did not.  That is not an error of any kind."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1463427126, "post_id": 37260086, "comment_id": 62050247, "body": "Doesn&#39;t answer the question. (Also, adding arrows is contrary to idiom, and <code>$ptr</code> is a needlessly vague var name. Negating the <code>if</code> allows one to use <code>if( my $client = $detectedClient{$smac} ) { ...former else part... } else { ...former then part... }</code>"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463434879, "post_id": 37260086, "comment_id": 62054137, "body": "@ikegami &quot;Adding arrows is contrary to idiom&quot;? Are you serious? For a language whose mantra is &quot;there&#39;s more than one way to do it&quot;? If you put an array reference into a scalar you <i>must</i> use <code>$whatever-&gt;[whatever]</code>. And, I updated the answer, so that it <i>does</i> answer the question. Nobody else cleaned up things (i.e. I hope you&#39;re not going to defend using <code>@packetData[]</code> spelled out in <i>eight</i> places, or equiv code in the print section). As to use of <code>ptr</code>, it was a <i>deliberate</i> choice as a teaching tool to emphasize &quot;pointer to&quot; and using a scalar reference to an array--a new concept for OP"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463435836, "post_id": 37260086, "comment_id": 62054568, "body": "@ikegami You didn&#39;t actually suggest using <code>if (my $client = $detectedClient{$smac})</code> did you? Embedding an assignment op inside an <code>if</code> is considered bad code in just about any language, particularly C. It also makes it hard to debug if the rhs is less trivial. For the record, I do <i>not</i> write <i>idiomatic</i> perl because, IMO, it produces some of the hardest to read, cryptic code, I&#39;ve seen in any language [and I know plenty of others]. I write a lot of perl [and I <i>am</i> a fan], but perl has lost the battle for the future because of the slavish insistence of fanbois to make it look like AP/L"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1463440348, "post_id": 37260086, "comment_id": 62056061, "body": "@Craig Estey, Yes, I&#39;m serious. Even though there can be many ways of doing things, people do find certain approaches clearer than others. I don&#39;t know why you find that hard to believe??? // You&#39;re free to write code differently than most others, but don&#39;t pretend that makes it easier to read. Lack of uniformity is the biggest detraction to readability and maintainability. // Wow, so not only did you use a meaningless variable name, you were trying to corrupt someone into thinking Perl had pointers! Great teaching job! // Hell no. You&#39;re the one insisting on using all kinds of useless symbols"}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1463493770, "post_id": 37260086, "comment_id": 62082153, "body": "You listed three things the OP did &quot;wrong&quot;, which were not actually wrong at all. One of them was merely ugly and warning-producing, but didn&#39;t affect the result at all.  The second was a mere stylistict choice.  The third was you incorrectly telling him he&#39;d done something wrong that he hadn&#39;t, and your way was vastly uglier and unnecessary.  It wasn&#39;t until @ikegami posted his answer containing what was <i>actually</i> wrong with the asker&#39;s code that you modified your answer to include that information as well."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": -3, "last_activity_date": 1463430765, "last_edit_date": 1463430765, "creation_date": 1463420925, "answer_id": 37260086, "question_id": 37259225, "link": "https://stackoverflow.com/questions/37259225/perl-array-not-saving-all-variables/37260086#37260086", "title": "Perl array not saving all variables", "body": "<p>The syntax for an entire array is <code>@array</code> but to access individual elements, it is (e.g.) <code>$array[0]</code></p>\n\n<p>Also, there is a better way to write the inner <code>if</code> in your context.</p>\n\n<p>Third, you're using an array reference for <code>detectedClient</code>, so the syntax could be changed from <code>$detectedClient{$smac}[1]++</code> to <code>$detectedClient{$smac}-&gt;[1]++</code> that would be clearer as to intent. I've changed it in the code below, and you'll could also change it when printing as well.</p>\n\n<p>Here's your code modified to reflect all that and shortened to use a scalar:</p>\n\n<pre><code>my $smac = $packetData[0];\n\nif ($smac ne \"\") {\n    if(! ref($detectedClient{$smac})) {\n        my $rawSignal = average($packetData[2]);\n        my $distance  = 10**((27.55-(20*logten(2437))+abs($rawSignal))/20);\n        my @newClient = ($rawSignal,   # Signal (dBm)\n                       1,              # Count\n                       $smac,          # Source MAC\n                       time(),         # Last seen\n                       $distance);     # Distance (m)\n        $detectedClient{$smac} = [@newClient];\n        $uniqueClient++;\n        print \"++ New probe request from $smac [$rawSignal dBm, $distance m]\\n\";\n    } else {\n        my $ptr = $detectedClient{$smac};\n        $ptr-&gt;[1]++;\n        $ptr-&gt;[3] = time();\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Applying the use of a scalar and a bit of reindent, the print code looks like:</p>\n\n<pre><code>for $key2 ( keys %detectedClient) {\n    my $ptr = $detectedClient{$key2};\n\n    #Signal, Count, MAC, Time\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) =\n        localtime($ptr-&gt;[3]);\n    my $lastSeen = sprintf(\"%04d/%02d/%02d %02d:%02d:%02d\",\n        $year+1900, $mon+1, $mday, $hour, $min, $sec);\n\n    print STDOUT sprintf(\"!! %-20s %10s %-20s\\n\",\n        $ptr-&gt;[2], $ptr-&gt;[1],\n        $lastSeen, $ptr-&gt;[0], $ptr-&gt;[4]);\n}\n</code></pre>\n\n<p>Now, it's a little easier to see [for me, at least ;-)] that the format is short by two fields [so the last two arguments won't be printed].</p>\n\n<p>So, something like this instead:</p>\n\n<pre><code>printf(\"!! %-20s %10s %-20s %10s %10s\\n\",\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1463427507, "last_edit_date": 1463427507, "creation_date": 1463426229, "answer_id": 37261564, "question_id": 37259225, "link": "https://stackoverflow.com/questions/37259225/perl-array-not-saving-all-variables/37261564#37261564", "title": "Perl array not saving all variables", "body": "<p>The signal and the distance aren't printed because your pattern (<code>\"!! %-20s %10s %-20s\\n\"</code>) doesn't reference them (the 4th and 5th values). Fix:</p>\n\n<pre><code>printf(\"!! %-20s %5s %-20s %20s %20s\\n\",\n    $detectedClient{$key2}[2],\n    $detectedClient{$key2}[1],\n    $lastSeen,\n    $detectedClient{$key2}[0],\n    $detectedClient{$key2}[4],\n);\n</code></pre>\n\n<hr>\n\n<p>Tested using the following: (Had to change <code>for $key2</code> to <code>for my $key2</code> too)</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\n\nuse List::Util qw( sum );\n\nsub average { sum(@{ $_[0] })/@{ $_[0] } }\n\nsub logten { log($_[0])/log(10) }\n\nmy @packetData = (\"foo\", undef, [ 4, 5 ]);\n\nmy %detectedClient;\nmy $uniqueClient;\nif(@packetData[0] ne \"\"){\n    if(!$detectedClient{\"@packetData[0]\"}) {\n        my $rawSignal = average(@packetData[2]);\n        my $distance  = 10**((27.55-(20*logten(2437))+abs($rawSignal))/20);\n        my @newClient = ($rawSignal,   # Signal (dBm)\n                       1,              # Count\n                       @packetData[0], # Source MAC\n                       time(),         # Last seen\n                       $distance);     # Distance (m)\n        $detectedClient{\"@packetData[0]\"} = [@newClient];\n        $uniqueClient++;\n        print \"++ New probe request from @packetData[0] [$rawSignal dBm, $distance m]\\n\";\n    } else {\n        $detectedClient{\"@packetData[0]\"}[1]++;\n        $detectedClient{\"@packetData[0]\"}[3] = time();\n    }\n}\n\nfor my $key2 ( keys %detectedClient) {\n    #Signal, Count, MAC, Time\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($detectedClient{$key2}[3]);\n    my $lastSeen = sprintf(\"%04d/%02d/%02d %02d:%02d:%02d\", $year+1900, $mon+1, $mday, $hour, $min, $sec);\n    printf(\"!! %-20s %5s %-20s %20s %20s\\n\",\n        $detectedClient{$key2}[2],\n        $detectedClient{$key2}[1],\n        $lastSeen, $detectedClient{$key2}[0],\n        $detectedClient{$key2}[4],\n    );\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Scalar value @packetData[0] better written as $packetData[0] at a.pl line 18.\nScalar value @packetData[0] better written as $packetData[0] at a.pl line 19.\nScalar value @packetData[2] better written as $packetData[2] at a.pl line 20.\nScalar value @packetData[0] better written as $packetData[0] at a.pl line 24.\nScalar value @packetData[0] better written as $packetData[0] at a.pl line 27.\nScalar value @packetData[0] better written as $packetData[0] at a.pl line 29.\nScalar value @packetData[0] better written as $packetData[0] at a.pl line 31.\nScalar value @packetData[0] better written as $packetData[0] at a.pl line 32.\n++ New probe request from foo [4.5 dBm, 0.0164302613184467 m]\n!! foo                      1 2016/05/16 15:19:38                   4.5   0.0164302613184467\n</code></pre>\n\n<p>Next time, please provide a minimal, runnable demonstration of the problem.</p>\n"}], "owner": {"reputation": 596, "user_id": 1132448, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/dcd4c1e1235863799742321195aa2764?s=128&d=identicon&r=PG", "display_name": "CyberJacob", "link": "https://stackoverflow.com/users/1132448/cyberjacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 37261564, "answer_count": 2, "score": -1, "last_activity_date": 1463440033, "creation_date": 1463417755, "last_edit_date": 1463417900, "question_id": 37259225, "link": "https://stackoverflow.com/questions/37259225/perl-array-not-saving-all-variables", "title": "Perl array not saving all variables", "body": "<p>I have a Perl program that's parsing data from an external program and saving it to an array. However, some of the data isn't being saved and comes back blank when trying to retrieve it later.</p>\n\n<p>Here's the code parsing the data, which comes through as <code>@packetData</code>:</p>\n\n<pre><code>if(@packetData[0] ne \"\"){\n    if(!$detectedClient{\"@packetData[0]\"}) {\n        my $rawSignal = average(@packetData[2]);\n        my $distance  = 10**((27.55-(20*logten(2437))+abs($rawSignal))/20);\n        my @newClient = ($rawSignal,   # Signal (dBm)\n                       1,              # Count\n                       @packetData[0], # Source MAC\n                       time(),         # Last seen\n                       $distance);     # Distance (m)\n        $detectedClient{\"@packetData[0]\"} = [@newClient];\n        $uniqueClient++;\n        print \"++ New probe request from @packetData[0] [$rawSignal dBm, $distance m]\\n\";\n    } else {\n        $detectedClient{\"@packetData[0]\"}[1]++;\n        $detectedClient{\"@packetData[0]\"}[3] = time();\n    }\n}\n</code></pre>\n\n<p>The <code>print</code> statement shows the signal and distance fine, but trying to show it from the <code>detectedClient</code> array gives with the code below gives a blank space:</p>\n\n<pre><code>for $key2 ( keys %detectedClient) {\n    #Signal, Count, MAC, Time\n    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($detectedClient{$key2}[3]);\n    my $lastSeen = sprintf(\"%04d/%02d/%02d %02d:%02d:%02d\", $year+1900, $mon+1, $mday, $hour, $min, $sec);\n    print STDOUT sprintf(\"!! %-20s %10s %-20s\\n\", $detectedClient{$key2}[2], $detectedClient{$key2}[1], $lastSeen, $detectedClient{$key2}[0], $detectedClient{$key2}[4]);\n}\n</code></pre>\n\n<p>Any ideas why this is happening?</p>\n"}, {"tags": ["json", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1463409599, "post_id": 37256569, "comment_id": 62040179, "body": "Hash elements aren&#39;t ordered, so if you extract the data into a hash, it will be unordered, no matter what parser you use. My parser of choice is XML::LibXML, and it will provide the elements in the order they are found. But so will two of the ones you mentioned (XML::Twig and the low-level XML::Parser)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1463409780, "post_id": 37256569, "comment_id": 62040297, "body": "<code>{&#39;Config&#39; =&gt; {&#39;route&#39; =&gt; ...</code> is not JSON. Even if you use the <code>convert</code> method to generate actual JSON, though, the <a href=\"https://metacpan.org/pod/XML::XML2JSON#CAVEATS\" rel=\"nofollow noreferrer\">docs</a> say: &quot;The order of child elements is not always preserved. This is because the conversion to json makes use of hashes in the resulting json.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1463410122, "post_id": 37256639, "comment_id": 62040511, "body": "There&#39;s no way that setting <code>canonical</code> will duplicate the order in which the elements were found in the XML (unless they just happened to be sorted lexically, which is not the case in the example)."}, {"owner": {"reputation": 39, "user_id": 5962787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f68a668b437686e4efbf6cdbc47eba?s=128&d=identicon&r=PG&f=1", "display_name": "Sowrab B M", "link": "https://stackoverflow.com/users/5962787/sowrab-b-m"}, "edited": false, "score": 0, "creation_date": 1463413231, "post_id": 37256639, "comment_id": 62042570, "body": "Thanks for the help.. But here we are hard-coding <b>%rank_of</b> hash... Can we do something generic..Because I shouldn&#39;t be changing <b>%rank_of</b> hash for each config file parsing... Can you please tell a generic way which works for any XML... My apology if my ask is too much.."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463414423, "post_id": 37256639, "comment_id": 62043358, "body": "I&#39;ve edited with an example of how to build the <code>rank</code> hash. But it doesn&#39;t work exhaustively, because you&#39;ve got a collision in the form of <code>netmask</code>."}, {"owner": {"reputation": 39, "user_id": 5962787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f68a668b437686e4efbf6cdbc47eba?s=128&d=identicon&r=PG&f=1", "display_name": "Sowrab B M", "link": "https://stackoverflow.com/users/5962787/sowrab-b-m"}, "edited": false, "score": 0, "creation_date": 1463483589, "post_id": 37256639, "comment_id": 62074352, "body": "But the JSON you got is encoded as string.. But I need the JSON object.. If I decode the json encoded string(i.e your output), again the order is lost... If I&#39;m not clear , I just want a Json object / hash from XML which is in order and  should be able to deference."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1463486813, "post_id": 37256639, "comment_id": 62076744, "body": "You can&#39;t have an ordered <code>JSON</code> object, for all the reasons you can&#39;t have an ordered <code>hash</code>. It just doesn&#39;t work that way."}, {"owner": {"reputation": 39, "user_id": 5962787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f68a668b437686e4efbf6cdbc47eba?s=128&d=identicon&r=PG&f=1", "display_name": "Sowrab B M", "link": "https://stackoverflow.com/users/5962787/sowrab-b-m"}, "edited": false, "score": 0, "creation_date": 1463563738, "post_id": 37256639, "comment_id": 62114171, "body": "Can we make use of <a href=\"http://perldoc.perl.org/Tie/Hash.html\" rel=\"nofollow noreferrer\">Tie::Hash</a> and dynamically create hash using the ordered json encoded string...?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463567946, "post_id": 37256639, "comment_id": 62117091, "body": "Yes, but you&#39;d have to rewrite the JSON module to use it."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1463414382, "last_edit_date": 1463414382, "creation_date": 1463409750, "answer_id": 37256639, "question_id": 37256569, "link": "https://stackoverflow.com/questions/37256569/perl-xml2json-how-to-preserve-xml-element-order/37256639#37256639", "title": "Perl XML2JSON : How to preserve XML element order?", "body": "<p>The problem isn't so much to do with XML parsing, but because perl hashes are not ordered. So when you 'write' some JSON... it can be any order. </p>\n\n<p>The way to avoid this is to apply a sort function to your JSON. </p>\n\n<p>You can do this by using <a href=\"http://search.cpan.org/~makamaka/JSON-2.90/lib/JSON.pm#sort_by\" rel=\"nofollow\"><code>sort_by</code></a> to explicitly sort:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig; \nuse JSON::PP; \n\nuse Data::Dumper;\n\nsub order_nodes {\n   my %rank_of = ( ip =&gt; 0, route =&gt; 1, address =&gt; 2, network =&gt; 3, netmask =&gt; 4, gateway =&gt; 5 ); \n   print \"$JSON::PP::a &lt;=&gt; $JSON::PP::b\\n\";\n   return $rank_of{$JSON::PP::a} &lt;=&gt; $rank_of{$JSON::PP::b};\n}\n\nmy $twig = XML::Twig -&gt; parse (\\*DATA); \n\nmy $json = JSON::PP -&gt; new;\n$json -&gt;sort_by ( \\&amp;order_nodes );\nprint $json -&gt; encode( $twig -&gt; simplify );\n\n__DATA__\n&lt;Config&gt;\n&lt;ip&gt;\n    &lt;address&gt;1.1.1.1&lt;/address&gt;\n    &lt;netmask&gt;255.255.255.0&lt;/netmask&gt;\n&lt;/ip&gt;\n&lt;route&gt;\n    &lt;network&gt;20.20.20.0&lt;/network&gt;\n    &lt;netmask&gt;55.255.255.0&lt;/netmask&gt;\n    &lt;gateway&gt;1.1.1.1&lt;/gateway&gt;\n&lt;/route&gt;\n&lt;/Config&gt;\n</code></pre>\n\n<p>In some scenarios, setting <code>canonical</code> can help, as that sets ordering to lexical order. (And means your JSON output would be consistently ordered). This doesn't apply to your case. </p>\n\n<p>You could build the node ordering via <code>XML::Twig</code>, either by an <code>xpath</code> expression, or by using <code>twig_handlers</code>. I gave it a quick go, but got slightly unstuck in figuring out how you'd 'tell' how to figure out ordering based on getting <code>address/netmask</code> and then <code>network/netmask/gateway</code>. </p>\n\n<p>As a simple example you could:</p>\n\n<pre><code>my $count = 0; \nforeach my $node ( $twig -&gt; get_xpath ( './*' ) ) {\n    $rank_of{$node-&gt;tag} = $count++ unless $rank_of{$node-&gt;tag};    \n}\n\nprint Dumper \\%rank_of; \n</code></pre>\n\n<p>This will ensure <code>ip</code> and <code>route</code> are always the right way around. However it doesn't order the subkeys. </p>\n\n<p>That actually gets a bit more complicated, as you'd need to recurse... and then decide how to handle 'collisions' (like <code>netmask</code> - <code>address</code> comes before, but how does it sort compared to <code>network</code>). </p>\n\n<p>Or alternatively:</p>\n\n<pre><code>my $count = 0;\nforeach my $node ( $twig-&gt;get_xpath('.//*') ) {\n   $rank_of{ $node-&gt;tag } = $count++ unless $rank_of{ $node-&gt;tag };\n}\n</code></pre>\n\n<p>This walks <em>all</em> the nodes, and puts them in order. It doesn't quite work, because <code>netmask</code> appears in both stanzas though. </p>\n\n<p>You get:</p>\n\n<pre><code>{\"ip\":{\"address\":\"1.1.1.1\",\"netmask\":\"255.255.255.0\"},\"route\":{\"netmask\":\"55.255.255.0\",\"network\":\"20.20.20.0\",\"gateway\":\"1.1.1.1\"}}\n</code></pre>\n\n<p>I couldn't figure out a neat way of collapsing both lists. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467563212, "last_edit_date": 1467563212, "creation_date": 1463420895, "answer_id": 37260080, "question_id": 37256569, "link": "https://stackoverflow.com/questions/37256569/perl-xml2json-how-to-preserve-xml-element-order/37260080#37260080", "title": "Perl XML2JSON : How to preserve XML element order?", "body": "<p>Here's a program that I hacked together that uses <a href=\"https://metacpan.org/pod/XML::Parser\" rel=\"nofollow\"><code>XML::Parser</code></a> to parse some XML data and generate the equivalent JSON in the same order. It ignores any attributes, processing instructions etc. and requires that every XML element must contain either a list of child elements or a text node. Mixing text and elements won't work, and this <strong><em>isn't checked</em></strong> except that the program will die trying to dereference a string</p>\n\n<p>It's intended to be a framework for you to enhance as you require, but works fine as it stands with the XML data you show in your question</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::Parser;\n\n\nmy $parser = XML::Parser-&gt;new(Handlers =&gt; {\n    Start =&gt; \\&amp;start_tag,\n    End   =&gt; \\&amp;end_tag,\n    Char  =&gt; \\&amp;text,\n});\n\nmy $struct;\nmy @stack;\n\n$parser-&gt;parsefile('config.xml');\n\nprint_json($struct-&gt;[1]);\n\n\nsub start_tag {\n    my $expat = shift;\n    my ($tag, %attr) = @_;\n\n    my $elem = [ $tag =&gt; [] ];\n    if ( $struct ) {\n        my $content = $stack[-1][1];\n        push @{ $content }, $elem;\n    }\n    else {\n        $struct = $elem;\n    }\n    push @stack, $elem;\n}\n\n\nsub end_tag {\n    my $expat = shift;\n    my ($elem) = @_;\n    die \"$elem &lt;=&gt; $stack[-1][0]\" unless $stack[-1][0] eq $elem;\n    for my $content ( $stack[-1][1] ) {\n        $content = \"@$content\" unless grep ref, @$content;\n    }\n    pop @stack;\n}\n\n\nsub text {\n    my $expat = shift;\n    my ($string) = @_;\n    return unless $string =~ /\\S/;\n    $string =~ s/\\A\\s+//;\n    $string =~ s/\\s+\\z//;\n    push @{ $stack[-1][1] }, $string;\n}\n\n\nsub print_json {\n    my ($data, $indent, $comma) = (@_, 0, '');\n\n    print \"{\\n\";\n\n    for my $i ( 0 .. $#$data ) {\n\n        # Note that $data, $indent and $comma are overridden here\n        # to reflect the inner context\n        #\n        my $elem = $data-&gt;[$i];\n        my $comma = $i &lt; $#$data ? ',' : '';\n        my ($tag, $data) = @$elem;\n        my $indent = $indent + 1;\n\n        printf qq{%s\"%s\" : }, '  ' x $indent, $tag;\n\n        if ( ref $data ) {\n            print_json($data, $indent, $comma);\n        }\n        else {\n            printf qq{\"%s\"%s\\n}, $data, $comma;\n        }\n    }\n\n    # $indent and $comma (and $data) are restored here\n    #\n    printf \"%s}%s\\n\", '  ' x $indent, $comma;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n  \"ip\" : {\n    \"address\" : \"1.1.1.1\",\n    \"netmask\" : \"255.255.255.0\"\n  },\n  \"route\" : {\n    \"network\" : \"20.20.20.0\",\n    \"netmask\" : \"55.255.255.0\",\n    \"gateway\" : \"1.1.1.1\"\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5962787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f68a668b437686e4efbf6cdbc47eba?s=128&d=identicon&r=PG&f=1", "display_name": "Sowrab B M", "link": "https://stackoverflow.com/users/5962787/sowrab-b-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1467563212, "creation_date": 1463409532, "question_id": 37256569, "link": "https://stackoverflow.com/questions/37256569/perl-xml2json-how-to-preserve-xml-element-order", "title": "Perl XML2JSON : How to preserve XML element order?", "body": "<p>I have a configuration file which is in XML format. I need to parse the XML and convert to JSON. I'm able to convert it with XML2JSON module of perl. But the problem is, it is not maintaining the order of XML elements. I strictly need the elements in order otherwise I cannot configure</p>\n\n<p>My XML file is something like this. I have to configure an IP address and set that IP as a gateway to certain route.</p>\n\n<pre><code>&lt;Config&gt;\n&lt;ip&gt;\n    &lt;address&gt;1.1.1.1&lt;/address&gt;\n    &lt;netmask&gt;255.255.255.0&lt;/netmask&gt;\n&lt;/ip&gt;\n&lt;route&gt;\n    &lt;network&gt;20.20.20.0&lt;/network&gt;\n    &lt;netmask&gt;55.255.255.0&lt;/netmask&gt;\n    &lt;gateway&gt;1.1.1.1&lt;/gateway&gt;\n&lt;/route&gt;\n&lt;/Config&gt;\n</code></pre>\n\n<p>This is my perl code to convert to JSON</p>\n\n<pre><code>my $file = 'config.xml';\nuse Data::Dumper;\nopen my $fh, '&lt;',$file or die;\n$/ = undef;\nmy $data = &lt;$fh&gt;;\nmy $XML = $data;\nmy $XML2JSON = XML::XML2JSON-&gt;new();\nmy $Obj = $XML2JSON-&gt;xml2obj($XML);\nprint Dumper($Obj);\n</code></pre>\n\n<p>The output I'm getting is,</p>\n\n<pre>\n$VAR1 = {'Config' => {'route' => {'netmask' => {'$t' => '55.255.255.0'},'gateway' => {'$t' => '1.1.1.1'},'network' => {'$t' => '20.20.20.0'}},'ip' => {'netmask' => {'$t' =>                        '255.255.255.0'},'address' => {'$t' => '1.1.1.1'}}},'@encoding' => 'UTF-8','@version' => '1.0'};\n</pre>\n\n<p>I have a script which reads the json object and configure..\nBut it fails as it first tries to set gateway ip address to a route where the ip address is not yet configured and add then add ip address.</p>\n\n<p>I strictly want key <strong>ip</strong> to come first and then <strong>route</strong> for proper configuration without error. Like this I have many dependencies where order of keys is a must.</p>\n\n<p>Is there any way I can tackle this problem? I tried almost all modules of XML parsing like XML::Simple,Twig::XML,XML::Parser. But nothing helped.. </p>\n"}, {"tags": ["perl", "extract"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 4, "creation_date": 1463411501, "post_id": 37256448, "comment_id": 62041459, "body": "This looks suspiciously like <code>XML</code> to me. Is it? If so, use a parser."}, {"owner": {"reputation": 23, "user_id": 3858383, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000809471624/picture?type=large", "display_name": "Popescu Emanuel", "link": "https://stackoverflow.com/users/3858383/popescu-emanuel"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463468087, "post_id": 37256448, "comment_id": 62064302, "body": "yes it is. ok, I will try. thanks."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1463409392, "creation_date": 1463409392, "answer_id": 37256505, "question_id": 37256448, "link": "https://stackoverflow.com/questions/37256448/extract-lines-from-file-as-an-element-perl/37256505#37256505", "title": "extract lines from file as an element perl", "body": "<pre><code>while (&lt;IN&gt;) {\n  if (my $i = /&lt;day&gt;/../&lt;\\/day&gt;/) {\n    push @days, '' if $i == 1;\n    $days[-1] .= $_;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3858383, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000809471624/picture?type=large", "display_name": "Popescu Emanuel", "link": "https://stackoverflow.com/users/3858383/popescu-emanuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 37256505, "answer_count": 1, "score": 0, "last_activity_date": 1463409392, "creation_date": 1463409213, "question_id": 37256448, "link": "https://stackoverflow.com/questions/37256448/extract-lines-from-file-as-an-element-perl", "title": "extract lines from file as an element perl", "body": "<pre><code>while (&lt;IN&gt;) {\n  if (/&lt;day&gt;/../&lt;\\/day&gt;/) {\n    push (@temp, $_);\n  }\n}\n</code></pre>\n\n<p>hi, I want to push in to @temp array all the file lines between <code>&lt;day&gt;</code> and <code>&lt;/day&gt;</code> as an element not line by line, because later on I will search after something in that element and if not equals I will exclude it. any ideea what to use in order to do so? thanks</p>\n"}, {"tags": ["oracle", "perl", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 5177290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a12b42c8640ede0f7f6d5523d11593?s=128&d=identicon&r=PG&f=1", "display_name": "Amar Shah", "link": "https://stackoverflow.com/users/5177290/amar-shah"}, "edited": false, "score": 0, "creation_date": 1463494372, "post_id": 37256193, "comment_id": 62082641, "body": "I tried removing the parameter and its working fine...thank you"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1463408465, "creation_date": 1463408465, "answer_id": 37256193, "question_id": 37256053, "link": "https://stackoverflow.com/questions/37256053/oracle-db-statement-execute-failing/37256193#37256193", "title": "Oracle DB statement execute failing", "body": "<p>As the error indicates, your statement handle doesn't expect any arguments (as there are no placeholders in the query).</p>\n\n<p>If the number 5 is supposed to be replaced by the parameter, just change the query to</p>\n\n<pre><code>my $selstmt = $dbh-&gt;prepare('select * from DIT_NOFUTURE_TMP1 where rownum &lt; ?')\n    or die \"Can't prepare SQL statement: \", $dbh-&gt;errstr(), \"\\n\";\n</code></pre>\n\n<p>Otherwise, remove the parameter:</p>\n\n<pre><code>$selstmt-&gt;execute;\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 5177290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a12b42c8640ede0f7f6d5523d11593?s=128&d=identicon&r=PG&f=1", "display_name": "Amar Shah", "link": "https://stackoverflow.com/users/5177290/amar-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463409412, "creation_date": 1463408034, "last_edit_date": 1463409412, "question_id": 37256053, "link": "https://stackoverflow.com/questions/37256053/oracle-db-statement-execute-failing", "title": "Oracle DB statement execute failing", "body": "<p>I am trying to connect to Oracle DB from a Perl script and fetching output from it. I wrote the below code</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/local/bin/perl\n\nuse DBI;\nuse warnings;\nuse strict;\n\nsub retrieve_data {\n    my ( $dbh, $rwnum ) = @_;\n    my @row;\n    my $selstmt = $dbh-&gt;prepare(\"select * from DIT_NOFUTURE_TMP1 where rownum &lt; 5\")\n            or die \"Can't prepare SQL statement: \", $dbh-&gt;errstr(), \"\\n\";\n    $selstmt-&gt;execute($rwnum);\n    while ( @row = $selstmt-&gt;fetchrow_array ) {    # retrieve one row\n        print join( \", \", @row ), \"\\n\";\n    }\n}\n\nmy $dsn = \"dbi:Oracle:DBInstance\";\nmy $dbh = DBI-&gt;connect( $dsn, 'username', 'password', { AutoCommit =&gt; 0 } );\nmy $rno = 5;\n\nunless ($dbh) {\n    print \"\\nError : DBI connect failed: DBI:errstr\\n\";\n    print \"Error : Unable to connect to database $dsn\\n\";\n    exit(-1);\n}\n\nretrieve_data $dbh , $rno;\n\nexit(0);\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>SQL&gt; select * from DIT_NOFUTURE_TMP1 where rownum &lt; 5;\n\nORDER_ID   ORDER_UNIT CUSTOMER_ID\n---------- ---------- --------------\n2534       2535       100000046\n2560       2561       100000109\n2523       2524       100000045\n2525       2526       100000045\n</code></pre>\n\n<p>Output Received:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>DBD::Oracle::st execute failed: called with 1 bind variables when 0 are needed [for Statement \"select * from DIT_NOFUTURE_TMP1 where rownum&lt;5\"] at dbcon.pl line 13.\nDBD::Oracle::st fetchrow_array failed: ERROR no statement executing (perhaps you need to call execute first) [for Statement \"select * from DIT_NOFUTURE_TMP1 where rownum&lt;5\"] at dbcon.pl line 14.\nIssuing rollback() due to DESTROY without explicit disconnect() of DBD::Oracle::db handle (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=135.208.32.97)(PORT= 1521))(CONNECT_DATA =(SERVER=DEDICATED)(SERVICE_NAME=PRDMOMS))) at dbcon.pl line 36.\n</code></pre>\n\n<p>Please suggest some solution for this. </p>\n"}, {"tags": ["java", "swing", "perl"], "answers": [{"tags": [], "owner": {"reputation": 306906, "user_id": 131872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=128&d=identicon&r=PG", "display_name": "camickr", "link": "https://stackoverflow.com/users/131872/camickr"}, "is_accepted": false, "score": 1, "last_activity_date": 1463409481, "creation_date": 1463409481, "answer_id": 37256543, "question_id": 37255934, "link": "https://stackoverflow.com/questions/37255934/re-direct-output-message-from-java-console-to-jtextarea-or-jlabel/37256543#37256543", "title": "re-direct output message from java console to jTextArea or jLabel", "body": "<p>Don't use a null layout. Swing was designed to be used with <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html\" rel=\"nofollow\">Layout Managers</a>.</p>\n\n<blockquote>\n  <p>when i click the GO Jbutton</p>\n</blockquote>\n\n<p>First you need to add an ActionListener to the button. See the section from the Swing tutorial on <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html\" rel=\"nofollow\">How to Write an ActionListener</a>. The code in the ActionListener should invoke a method in your class, not a separate class.</p>\n\n<blockquote>\n  <p>the first that contains my output message from perl script \"hello world !\" and i want to see this message in my jtextarea</p>\n</blockquote>\n\n<p>Then you need to redirect the System.out.println(..) statements to the text area. Check out <a href=\"https://tips4java.wordpress.com/2008/11/08/message-console/\" rel=\"nofollow\">Message Console</a> for one way to do this.</p>\n"}], "owner": {"reputation": 3, "user_id": 5905065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63ed1da33ae8df07e4b8dbe41a3e6172?s=128&d=identicon&r=PG&f=1", "display_name": "arfaoui haythem", "link": "https://stackoverflow.com/users/5905065/arfaoui-haythem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463409481, "creation_date": 1463407744, "question_id": 37255934, "link": "https://stackoverflow.com/questions/37255934/re-direct-output-message-from-java-console-to-jtextarea-or-jlabel", "title": "re-direct output message from java console to jTextArea or jLabel", "body": "<p>I want to visualize my message from java console to jpanel or jTextArea , I've created 2 classes : the first that contains my output message from perl script \"hello world !\" and i want to see this message in my jtextarea from the other class when i click a jButton from the second class --> this is my first class of my script </p>\n\n<pre><code>package escudo;\nimport java.io.IOException;\nimport java.io.InputStream;\npublic class MediocreExecJavac { \n   public static void main(String[] args) {\n       try {\n           // Run the process\n           Process p = Runtime.getRuntime().exec(\"perl script\\\\hello.pl\");\n           // Get the input stream\n           InputStream is = p.getInputStream(); \n           // Read script execution results\n           int i = 0;\n           StringBuffer sb = new StringBuffer();\n           while ( (i = is.read()) != -1)\n               sb.append((char)i); \n           System.out.println(sb.toString()); \n       } catch (IOException e) {\n           e.printStackTrace();\n       } \n   } \n}\n</code></pre>\n\n<p>and this where i want to visualize the hello world message in this Jtextarea when i click the GO Jbutton</p>\n\n<pre><code>package escudo;\n\nimport java.awt.BorderLayout;\nimport java.awt.EventQueue;\n\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.JTextArea;\nimport javax.swing.JButton;\n\npublic class test extends JFrame {\n\n    private JPanel contentPane;\n\n    /**\n     * Launch the application.\n     */\n    public static void main(String[] args) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                try {\n                    test frame = new test();\n                    frame.setVisible(true);\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n\n    public test() {\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setBounds(100, 100, 450, 300);\n        contentPane = new JPanel();\n        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n        setContentPane(contentPane);\n        contentPane.setLayout(null);\n\n        JTextArea textArea = new JTextArea();\n        textArea.setBounds(48, 71, 324, 180);\n        contentPane.add(textArea);\n\n        JButton btnGo = new JButton(\"go\");\n        btnGo.setBounds(159, 23, 89, 23);\n        contentPane.add(btnGo);\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1463407760, "post_id": 37255663, "comment_id": 62039001, "body": "It may be useful to explain why OP&#39;s did not work as intended."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 1, "creation_date": 1463408449, "post_id": 37255663, "comment_id": 62039443, "body": "@123: Yes. It was supposed to be in addition to ikegami&#39;s post which did the explaining, but he&#39;s deleted that now. I&#39;ve written some more words"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1467554765, "last_edit_date": 1467554765, "creation_date": 1463406924, "answer_id": 37255663, "question_id": 37254976, "link": "https://stackoverflow.com/questions/37254976/why-i-can-only-write-the-last-line-in-output/37255663#37255663", "title": "why I can only write the last line in output?", "body": "<p>The problem is that you are opening the output file within your inner <code>for</code> loop, which is the one that iterates over the bases. That deletes anything that has already been written and opens a fresh empty file each time, which isn't what you want. You need to open your output file once only, before you start processing the input data</p>\n\n<p>Your header isn't printed to the file because you only print it to STDOUT with <code>print \"$header\\n\"</code>. The repeated opening of your output file would also erase this even if it was working properly</p>\n\n<p>You also need to move the base calculations outside the inner loop. All that loop should do is scan through the bases and count the Gs and Cs. Nothing should be output until the total has been calculated</p>\n\n<p>You may prefer this rewrite of your program, which is much more concise and better follows best practices. It also fixes the issue with printing the sequence header to the output</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nprint 'Enter the name of the FASTA file: ';\nmy $fasta_file = &lt;STDIN&gt;;\nchomp $fasta_file;\nprint \"\\n\";\n\n(my $out_file = $fasta_file) =~ s/\\.fasta$/.gc/ or die \"File name must end in .fasta\";\nopen my $out_fh, '&gt;', $out_file or die qq{Unable to open \"$out_file\" for output: $!};\n\nmy $fasta = do {\n    open my $fh, '&lt;', $fasta_file or die qq{Unable to open \"$fasta_file\" for input: $!};\n    local $/;\n    &lt;$fh&gt;;\n};\n\nfor my $sequence ( split /&gt;/, $fasta ) {\n\n    next unless $sequence =~ /\\S/;\n\n    my ( $header, $dna ) = split /\\n/, $sequence,  2;\n    $dna =~ s/\\s//g;\n\n    my %bases;\n    ++$bases{$_} for split //, $dna;\n\n    for my $fh ( \\*STDOUT, $out_fh ) {\n        printf $fh \"%s %.1f%% GC\\n\",\n            $header,\n            ( $bases{G} + $bases{C} ) / length($dna) * 100;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Enter the name of the FASTA file: test.fasta\n\ncel-mir-39 MI0000010 Caenorhabditis 50.0% GC\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 6002690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/427760998f97e05543f6e49017577d02?s=128&d=identicon&r=PG&f=1", "display_name": "jnmf", "link": "https://stackoverflow.com/users/6002690/jnmf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 37255663, "answer_count": 1, "score": 0, "last_activity_date": 1467554765, "creation_date": 1463404897, "last_edit_date": 1463595558, "question_id": 37254976, "link": "https://stackoverflow.com/questions/37254976/why-i-can-only-write-the-last-line-in-output", "title": "why I can only write the last line in output?", "body": "<p>I have this code but in my output file it's only writing the last result. What did I miss?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint \"type in the name of a file\\n\";\nmy $fasta_file = &lt;STDIN&gt;;\nchomp ($fasta_file);\n\nopen (FASTA, $fasta_file) or die \"error $!\";\n\nmy $fasta = \"\";\n\nwhile (my $line = &lt;FASTA&gt;) {\n    $fasta .= $line; }\n\n\nmy @seq = split (/\\&gt;/s, $fasta);\n\nfor (my $i=0; $i&lt;@seq; $i++) {\n    my $sequence = $seq[$i];\n    next if $sequence eq '';\n\n..\n\n    my $perc_GC = ((($G + $C) / $size) *100);\n    print \"$perc_GC% GC\\n\";\n\n    open(OUTFILE, \"&gt; $fasta_file\") or die \"\\nCould not create file ;/\";\n\n        print OUTFILE \"$perc_GC% GC\\n\";\n\n};\n};\n\nclose (FASTA);\nclose(OUTFILE);\nexit;\n</code></pre>\n\n<p>input</p>\n\n<pre><code>&gt;cel-mir-39 MI0000010 Caenorhabditis\nAAAAAGCGCG\n</code></pre>\n\n<p>output</p>\n\n<blockquote>\n  <p>cel-mir-39 MI0000010 Caenorhabditis 50% GC</p>\n</blockquote>\n\n<p>Also, it's not writing the header on my output file.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1463404770, "last_edit_date": 1463404770, "creation_date": 1463404050, "answer_id": 37254680, "question_id": 37254381, "link": "https://stackoverflow.com/questions/37254381/how-to-create-a-menu-check-button-in-checked-mode-in-perl-tk/37254680#37254680", "title": "How to create a menu check button in checked mode in perl Tk?", "body": "<p>Check the <code>widget</code> demo, click on <em>Menus / 1. Menus and cascades (sub-menus).</em> When you click on <em>Cascades</em> there, click on <em>Check Buttons</em> - two of the check buttons are checked. The relevant code is located in <code>menus.pl</code>:</p>\n\n<pre><code>my $cc = $c-&gt;cascade(-label =&gt; '~Check buttons', -tearoff =&gt; 0);\n\n$cc-&gt;checkbutton(-label =&gt; 'Oil checked', -variable =&gt; \\$OIL);\n$cc-&gt;checkbutton(-label =&gt; 'Transmission checked', -variable =&gt; \\$TRANS);\n$cc-&gt;checkbutton(-label =&gt; 'Brakes checked', -variable =&gt; \\$BRAKES);\n$cc-&gt;checkbutton(-label =&gt; 'Lights checked', -variable =&gt; \\$LIGHTS);\n# ...\nmy $cc_menu = $cc-&gt;cget(-menu);\n$cc_menu-&gt;invoke(1);\n$cc_menu-&gt;invoke(3);\n</code></pre>\n\n<p>Setting the variables to the respective onvalues also works.</p>\n"}], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 37254680, "answer_count": 1, "score": 0, "last_activity_date": 1463404770, "creation_date": 1463403180, "question_id": 37254381, "link": "https://stackoverflow.com/questions/37254381/how-to-create-a-menu-check-button-in-checked-mode-in-perl-tk", "title": "How to create a menu check button in checked mode in perl Tk?", "body": "<p>I would like to create a menubar checkbutton in a \"checked\" state.</p>\n\n<p>It seems that creating the menubar checkbutton according to the documentation will create it in an \"unchecked\" state.</p>\n\n<p>How can i create it in a \"checked\" state (or onvalue state)?</p>\n"}, {"tags": ["perl", "append"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463365117, "post_id": 37245735, "comment_id": 62020295, "body": "Small files or very large files?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463367126, "post_id": 37245735, "comment_id": 62020692, "body": "Is this on Windows or Linux?"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 387, "user_id": 5808208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09c91835e911d3e341e13db92cb5373a?s=128&d=identicon&r=PG&f=1", "display_name": "mee mee", "link": "https://stackoverflow.com/users/5808208/mee-mee"}, "edited": false, "score": 0, "creation_date": 1463366822, "post_id": 37245867, "comment_id": 62020633, "body": "@meemee  Great :).  Please let me know if more comment would be of any use."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1463428443, "last_edit_date": 1463428443, "creation_date": 1463365612, "answer_id": 37245867, "question_id": 37245735, "link": "https://stackoverflow.com/questions/37245735/how-to-append-new-rows-at-the-top-of-existing-txt-file/37245867#37245867", "title": "how to append new rows at the top of existing .txt file?", "body": "<p>You need to rewrite the file. Changing the contents requires that the rest of the file, past the part that is being changed, be saved away first and then copied back after the new contents. (Since it is very rare that new contents has the same number of bytes as what it is replacing, unless we want to exactly overwrite single characters.) It is even more so with insertion -- we certainly cannot just add bytes in the middle, or at the beginning. The <code>&gt;&gt;</code> opens the file so that it is <em>appended</em> to, bytes added to the back of it. </p>\n\n<p>For small enough files</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $filename = 'file_to_prepend_to.txt';\nmy @lines_to_prepend = (\"line 1\", \"line 2\");\n\n# slurp the whole file into a variable\nmy $filecont = do {\n    local $/;\n    open my $fh, '&lt;', $filename or die \"Can't open $filename: $!\";\n    &lt;$fh&gt;;\n};\n\n# open the file for writing, to overwrite\nopen my $fh, '&gt;', $filename or die \"Can't open $filename: $!\";\n\n# write new contents first\nfor my $line (@lines_to_prepend) {\n    print $fh \"$line\\n\";\n}\n\n# dump the old contents now\nprint $fh $filecont;\nclose $fh;\n</code></pre>\n\n<p>The <code>local $/</code> sets the input record separator to <code>undef</code> so that <code>&lt;&gt;</code> reads all the way to the end, and the whole file is returned as a string and assigned to a scalar.  Once that <code>do</code> block is done the filehandle is closed. Note the <code>\\n</code> in the print, adding a newline -- if your lines-to-prepepnd already have it remove that.</p>\n\n<p>For very large files you'd want to read line by line and write them out to a new file (to which you first wrote lines to prepend), then move that new file to overwrite the original one. It is a very good idea to make sure that the name for the temporary file cannot happen to match an existing file, for example by using the core <a href=\"http://perldoc.perl.org/File/Temp.html\" rel=\"nofollow\"><code>File::Temp</code></a> module.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6340684"}, "is_accepted": false, "score": 1, "last_activity_date": 1463413189, "creation_date": 1463413189, "answer_id": 37257804, "question_id": 37245735, "link": "https://stackoverflow.com/questions/37245735/how-to-append-new-rows-at-the-top-of-existing-txt-file/37257804#37257804", "title": "how to append new rows at the top of existing .txt file?", "body": "<p>I recommend using the core module Tie::File to use a file as if it is an array.</p>\n\n<p>Using a module for such a simple task might look like overkill, but Tie::File is very easy to use and you no longer have to worry about your files growing too large.</p>\n\n<p>I usually do something like this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tie::File;\n\nmy $file_name        = 'file_to_prepend_to.txt';\nmy @lines_to_prepend = (\"Prepended line 1\", \"Prepended line 2\");\n\nmy @file_as_array;\n\ntie @file_as_array, 'Tie::File', $file_name or\n  die \"Unable to tie to file $file_name: $!\\n\";\n\nunshift @file_as_array, @lines_to_prepend;\n\nuntie @file_as_array;\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 5808208, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09c91835e911d3e341e13db92cb5373a?s=128&d=identicon&r=PG&f=1", "display_name": "mee mee", "link": "https://stackoverflow.com/users/5808208/mee-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 1, "accepted_answer_id": 37245867, "answer_count": 2, "score": 1, "last_activity_date": 1463428443, "creation_date": 1463364565, "question_id": 37245735, "link": "https://stackoverflow.com/questions/37245735/how-to-append-new-rows-at-the-top-of-existing-txt-file", "title": "how to append new rows at the top of existing .txt file?", "body": "<p>Hi I like to append new rows of data in existing <code>.txt</code> file. I use below script. It did append new rows but it appended at the bottom. I would like to append my new rows at the top of existing row. How can i do that?</p>\n\n<pre><code>my $filename = 'file.txt';\nopen(my $fh, '&gt;&gt;', $filename) or die \"Could not open file '$filename' $!\";\nprint $fh  \"-----------\\n\";\nclose $fh;\n</code></pre>\n"}, {"tags": ["regex", "perl", "substitution"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1463355399, "post_id": 37244001, "comment_id": 62018471, "body": "Could have been written more simply: <code>$a =~ s&#47;&#39;&#47;&#39;&quot;&#39;&quot;&#39;&#47;g</code>"}, {"owner": {"reputation": 15323, "user_id": 11095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c911d40f47f422f820d8a524658bd5a?s=128&d=identicon&r=PG", "display_name": "mirod", "link": "https://stackoverflow.com/users/11095/mirod"}, "edited": false, "score": 1, "creation_date": 1463383961, "post_id": 37244001, "comment_id": 62025835, "body": "to be fair, depending on the font used, the backslashes may help visually separating the quotes."}], "answers": [{"tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1463348980, "creation_date": 1463348980, "answer_id": 37244017, "question_id": 37244001, "link": "https://stackoverflow.com/questions/37244001/perl-regular-expressions-substitue/37244017#37244017", "title": "perl regular expressions substitue", "body": "<p>This peace of Code replace every singe Quote with <code>'\"'\"'</code></p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 1, "last_activity_date": 1463351774, "last_edit_date": 1495540360, "creation_date": 1463351774, "answer_id": 37244409, "question_id": 37244001, "link": "https://stackoverflow.com/questions/37244001/perl-regular-expressions-substitue/37244409#37244409", "title": "perl regular expressions substitue", "body": "<p>All the <code>\\</code> in that are useless (but harmless), so it is equivalent to <code>s/'/'\"'\"'/g</code>.  It replaces every <code>'</code> with <code>'\"'\"'</code> in the string.</p>\n\n<p>This is often used for shell quoting.  See for example <a href=\"https://stackoverflow.com/a/24869016/17389\">https://stackoverflow.com/a/24869016/17389</a></p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1463426754, "last_edit_date": 1495541763, "creation_date": 1463353033, "answer_id": 37244567, "question_id": 37244001, "link": "https://stackoverflow.com/questions/37244001/perl-regular-expressions-substitue/37244567#37244567", "title": "perl regular expressions substitue", "body": "<p>It is not clear which part of it is a problem.  Here is a brief mention of each.</p>\n\n<p>The expression <code>$str =~ s/pattern/replacement/</code> is a <em>regular expression</em>, replacing the part of string <code>$str</code> that is matched by the \"pattern\", by the \"replacement\".  With <code>/g</code> at the end it does so for all instances of the \"pattern\" found in the string.  There is far, far more to it -- see the <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">tutorial</a>, a <a href=\"http://perldoc.perl.org/perlrequick.html\" rel=\"nofollow noreferrer\">quick start</a>, the <a href=\"http://perldoc.perl.org/perlreref.html\" rel=\"nofollow noreferrer\">reference</a>, and full information in <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> and <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a>.</p>\n\n<p>Some characters have a special meaning, in particular when used in the \"pattern\". A common set is <code>.^$*+?()[{\\|</code>, but this depends on the <em>flavor</em> of regex. Also, whatever is used as a delimiter (commonly <code>/</code>) has to be escaped as well. See documentation and for example <a href=\"https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions\">this post</a>.  If you want to use any one of those characters as a literal character to be found in the string, they have to be <em>escaped</em> by the backslash. (Also see about <a href=\"http://perldoc.perl.org/perlrebackslash.html\" rel=\"nofollow noreferrer\">escaped sequences</a>.)  In your example, the <code>'</code> is escaped, and so are the characters used as the replacement.</p>\n\n<p>The thing is, these in fact don't need to be escaped.  So this works</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $str = \"a'b'c\";\n$str =~ s/'/'\"'/g;\nprint \"$str\\n\";\n</code></pre>\n\n<p>It prints the desired <code>a'\"'b'\"'c</code>. Note that you still <em>may</em> escape them and it will work.  One situation where <code>'</code> is indeed very special is in a <em>one liner</em>, where it delimits the whole piece of code to submit to Perl via shell, to be run. (However, merely escaping it there does not work.) Altogether, the expression you show does the replacement just as in the answer by <a href=\"https://stackoverflow.com/users/3636601/jens\">Jens</a>, but with a twist that is not needed.</p>\n\n<p>A note on a related feature: you can use nearly anything for delimiters, not necessarily just <code>/</code>.  So this <code>|patt|repl|</code> is fine, and nicely even this is: <code>{patt}{repl}</code> (unless they are used inside). This is sometimes extremely handy, improving readability a lot. For one thing, then you don't have to escape the <code>/</code> itself inside the regex.</p>\n\n<p>I hope this helps a little.</p>\n"}, {"comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1463403243, "post_id": 37245044, "comment_id": 62036149, "body": "When you type the code like this, not in a <code>code</code> block, so that it uses variable-width fonts, you can immediately see why someone would have put in the needless backslashes.  Because what is displayed in your answer here is nearly impossible to discern with all the <code>&#39;</code> and <code>&quot;</code> bunched up like that."}], "tags": [], "owner": {"reputation": 107, "user_id": 5015486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cN4Au.jpg?s=128&g=1", "display_name": "Tim Potapov", "link": "https://stackoverflow.com/users/5015486/tim-potapov"}, "is_accepted": false, "score": 0, "last_activity_date": 1463357726, "creation_date": 1463357726, "answer_id": 37245044, "question_id": 37244001, "link": "https://stackoverflow.com/questions/37244001/perl-regular-expressions-substitue/37245044#37245044", "title": "perl regular expressions substitue", "body": "<p>Can be simplified by removing the needless back slashes\n    $a =~ s/'/\"'\"'/g</p>\n\n<p>Every ' will we replaced with \"'\"'</p>\n"}], "owner": {"reputation": 647, "user_id": 6327010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b1bd1afacc59df0efa9ea2c63407feda?s=128&d=identicon&r=PG&f=1", "display_name": "Turbo Sullivan", "link": "https://stackoverflow.com/users/6327010/turbo-sullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 37244409, "answer_count": 4, "score": 1, "last_activity_date": 1463426754, "creation_date": 1463348852, "question_id": 37244001, "link": "https://stackoverflow.com/questions/37244001/perl-regular-expressions-substitue", "title": "perl regular expressions substitue", "body": "<p>I'm new to perl and I found this expressions bit difficult to understand</p>\n\n<pre><code>$a =~ s/\\'/\\'\\\"\\'\\\"\\'/g\n</code></pre>\n\n<p>Can someone help me understand what this piece of code does?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1463404315, "post_id": 37243599, "comment_id": 62036773, "body": "This question has absolutely nothing to do with forward slashes.  It has to do with you incorrectly using the <code>^</code> anchor.  <code>^</code> means &quot;beginning of the string&quot;.  You are asking Perl if <code>$val</code> matches: &quot;beginning of string, a, 0 or more of any character, period, txt, end of string&quot;.  It doesn&#39;t.  The <code>a</code> in $val1 is not adjacent to the beginning of the string, it is in the middle of the string.  Same thing for <code>$val2</code> - the <code>d</code> does not come at the beginning of the string.  Remove the <code>^</code> anchors."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "edited": false, "score": 0, "creation_date": 1463347154, "post_id": 37243659, "comment_id": 62016443, "body": "Thanks mate. I was just using a double forward slash (\\//)while scripting. Thanks for your help."}], "tags": [], "owner": {"reputation": 1425, "user_id": 6304349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c4a1ce11469805ba79d576fa2f013c?s=128&d=identicon&r=PG", "display_name": "dorukayhan", "link": "https://stackoverflow.com/users/6304349/dorukayhan"}, "is_accepted": true, "score": 0, "last_activity_date": 1463346252, "creation_date": 1463346252, "answer_id": 37243659, "question_id": 37243599, "link": "https://stackoverflow.com/questions/37243599/identifying-the-forward-slash/37243659#37243659", "title": "identifying the forward slash", "body": "<p>You can find the forward slashes in \"./f1/\" with this escape sequence:</p>\n\n<pre><code>\\/\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6238985, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8fb421a38806ec746c36aa8d72c1d61?s=128&d=identicon&r=PG&f=1", "display_name": "GSG", "link": "https://stackoverflow.com/users/6238985/gsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1463346693, "accepted_answer_id": 37243659, "answer_count": 1, "score": -1, "last_activity_date": 1463346252, "creation_date": 1463345867, "last_edit_date": 1463345943, "question_id": 37243599, "link": "https://stackoverflow.com/questions/37243599/identifying-the-forward-slash", "closed_reason": "Duplicate", "title": "identifying the forward slash", "body": "<p>Suppose I have 3 variables.</p>\n\n<pre><code>my $val1 = './f1/abc.txt'; #f1 is the folder where abc.txt resides.\n\nmy $val2 = './f1/def.txt';\n\nmy $val3 = 'gh.txt';\n</code></pre>\n\n<p>I am facing an issue while reading the './f1/' part. </p>\n\n<pre><code>if ($val1 =~ m/^a.*\\.txt$/ or  $val2 =~ m/^d.*\\.txt$/) { print $val3; }\n</code></pre>\n\n<p>this doesn't work with the folder name. Please help.</p>\n"}, {"tags": ["regex", "bash", "perl", "awk", "grep"], "comments": [{"owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "edited": false, "score": 0, "creation_date": 1463335808, "post_id": 37241879, "comment_id": 62012748, "body": "part of info.txt with the content is needed to build up a regex..."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 2, "creation_date": 1463335865, "post_id": 37241879, "comment_id": 62012763, "body": "Welcome to SO, please show your coding efforts."}, {"owner": {"reputation": 17, "user_id": 5293028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cb80620f95f849ceabe22f41e1f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user5293028", "link": "https://stackoverflow.com/users/5293028/user5293028"}, "edited": false, "score": 0, "creation_date": 1463336096, "post_id": 37241879, "comment_id": 62012838, "body": "the regex for the content is done. simply pseudo stuff."}, {"owner": {"reputation": 17, "user_id": 5293028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cb80620f95f849ceabe22f41e1f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user5293028", "link": "https://stackoverflow.com/users/5293028/user5293028"}, "edited": false, "score": 0, "creation_date": 1463336146, "post_id": 37241879, "comment_id": 62012855, "body": "for D in <code>find . -type d</code> do     grep xxx D/info.txt  done"}, {"owner": {"reputation": 1555, "user_id": 4959722, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AQWZF9OmEs4/AAAAAAAAAAI/AAAAAAAAAGE/wvp_7UFCeZs/photo.jpg?sz=128", "display_name": "James Buck", "link": "https://stackoverflow.com/users/4959722/james-buck"}, "edited": false, "score": 1, "creation_date": 1463336249, "post_id": 37241879, "comment_id": 62012885, "body": "@user5293028 What&#39;s the structure of <code>info.txt</code> and what do you want to match?"}, {"owner": {"reputation": 17, "user_id": 5293028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cb80620f95f849ceabe22f41e1f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user5293028", "link": "https://stackoverflow.com/users/5293028/user5293028"}, "edited": false, "score": 0, "creation_date": 1463336297, "post_id": 37241879, "comment_id": 62012906, "body": "i dont need help for the regex, read first post pls"}, {"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1463336380, "post_id": 37241879, "comment_id": 62012927, "body": "<code>a content part of the info.txt</code> Please post a sample input and the expected format of the log-file to make the question complete."}], "answers": [{"tags": [], "owner": {"reputation": 18098, "user_id": 3744681, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XvLrx.jpg?s=128&g=1", "display_name": "Jahid", "link": "https://stackoverflow.com/users/3744681/jahid"}, "is_accepted": false, "score": 0, "last_activity_date": 1463337182, "last_edit_date": 1463337182, "creation_date": 1463336734, "answer_id": 37242079, "question_id": 37241879, "link": "https://stackoverflow.com/questions/37241879/grep-foldername-and-sub-file-content/37242079#37242079", "title": "grep foldername and sub file content", "body": "<p>As you have the regex part (finding content) already done, try something like this:</p>\n\n<pre><code>while IFS=  read -r -d $'\\0'; do\n    domain=\"${$REPLY##*/}\"\n    content=\"$(grep -o xxx $REPLY/info.txt)\"\n    echo \"$domain: $content\" &gt;&gt; log.txt\ndone &lt; &lt;(find . -type d -print0)\n</code></pre>\n\n<p>Or using your for loop attempt:</p>\n\n<pre><code>for D in $(find . -type d); do\n  content=\"$(grep -o xxx D/info.txt)\"\n  domain=\"$D##*/\"\n  echo \"$domain: $content\" &gt;&gt;log.txt\ndone\n</code></pre>\n\n<p>Though remember that this for loop is <strong>not</strong> white space safe, though it doesn't matter for this particular scenario.</p>\n"}, {"tags": [], "owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "is_accepted": false, "score": 0, "last_activity_date": 1463339228, "creation_date": 1463339228, "answer_id": 37242535, "question_id": 37241879, "link": "https://stackoverflow.com/questions/37241879/grep-foldername-and-sub-file-content/37242535#37242535", "title": "grep foldername and sub file content", "body": "<p>Below script is another way of doing it:</p>\n\n<pre><code>find /path/to/search/for -type f -name \"*info.txt\" -print0 | while read -r -d '' line\ndo\ndomain=$(sed 's/^.*debug\\/\\(.*\\)\\/info.txt/\\1/' &lt;&lt;&lt;\"$line\")\ncontent=$(grep \"text_to_grab\" \"$line\")\nprintf \"%s : %s\\n\" \"$domain\" \"$content\" &gt;&gt;logfile\ndone\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6340684"}, "is_accepted": false, "score": 0, "last_activity_date": 1463476728, "creation_date": 1463476728, "answer_id": 37271995, "question_id": 37241879, "link": "https://stackoverflow.com/questions/37241879/grep-foldername-and-sub-file-content/37271995#37271995", "title": "grep foldername and sub file content", "body": "<p>Since you added the tag perl to your question, I provide a solution using Perl.</p>\n\n<pre><code>use strict;\nuse diagnostics;\n\nmy $search_for = qr{abc}; #string to search for\n\nprint search_info_files($search_for);\n\nsub search_info_files {\n    my $rex       = shift;\n    my $file_name = 'info.txt';\n\n    chdir 'debug' or die \"Unable to chdir to debug: $!\\n\";\n\n    my @domains = glob(\"*\");\n\n    foreach my $domain (@domains) {\n        next unless -d $domain;\n        next unless -f $domain . '/' . $file_name;\n\n        open my $fh, '&lt;', $domain . '/' . $file_name\n          or die \"Unable to open $domain/$file_name: $!\\n\";\n\n        while (&lt;$fh&gt;) {\n        chomp(my $line = $_);\n            next unless $line =~ $rex;\n            print \"'$domain' matches (line#: $.): $line.\\n\";\n        }\n\n        close $fh;\n\n    }\n}\n__END__\nSample output:\n'a' matches (line#: 1): As easy as abc.\n'b' matches (line#: 2): abcde.\n'c' matches (line#: 1): abcde.\n'c' matches (line#: 3): abcde.\n'c' matches (line#: 5): Sometimes more than one line contains abc.\n'd' matches (line#: 1): abcde.\n'd' matches (line#: 3): abcde.\n'e' matches (line#: 1): abcde.\n</code></pre>\n\n<p>For example debug/c/info.txt contains:</p>\n\n<blockquote>\n<pre><code>abcde\nfghij\nabcde\nfffff\nSometimes more than one line contains abc\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 17, "user_id": 5293028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cb80620f95f849ceabe22f41e1f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "user5293028", "link": "https://stackoverflow.com/users/5293028/user5293028"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1463476728, "creation_date": 1463335683, "last_edit_date": 1463336297, "question_id": 37241879, "link": "https://stackoverflow.com/questions/37241879/grep-foldername-and-sub-file-content", "title": "grep foldername and sub file content", "body": "<p>i have a folder structure like:</p>\n\n<p><code>debug/$domain/info.txt</code></p>\n\n<p>in debug are like 200 domains</p>\n\n<p>and i want to grep a specific content of the <code>info.txt</code> file for each domain\nso i want to log down the domain + a content part of the <code>info.txt</code> which i need to grep.</p>\n\n<p>i tried much stuff but i failed.</p>\n\n<pre><code>for D in $(find . -type d); do\n  grep xxx D/info.txt \ndone\n</code></pre>\n\n<p>if you got any idea how to be done, please let me know.</p>\n\n<p>thanks :)</p>\n"}, {"tags": ["perl", "sockets", "parsing", "stream"], "comments": [{"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1463331228, "post_id": 37240711, "comment_id": 62011050, "body": "An example of incoming data would be useful to understand the problem -- we don&#39;t know what defines the part you need. Note that you can usually assume that stream sockets relay data perfectly, so to avoid gibberish appearing at the receiver the best countermeasure would be to avoid sending it. f you don&#39;t control the source, your best bet would be to look for framing data and start parsing from there."}], "answers": [{"comments": [{"owner": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 0, "creation_date": 1463401595, "post_id": 37245149, "comment_id": 62035212, "body": "Thank you for your answer. I am afraid my current perl knowledge is too limit to be able to use it. At the same time I may have made the wrong assumptions about the input, it seems it is a tcp connection containing some data about length.  Since I am really interested in the solution I asked for, let&#39;s continue on that. Why do you prefer sysread over recv? If I understand correctly you basically read 64 bytes, check for the data and have a seperate sub take care of buffer manipulation? I was thinking to process per character/byte so I could check one I have a complete &quot;message&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 0, "creation_date": 1463403309, "post_id": 37245149, "comment_id": 62036184, "body": "Re &quot;<i>Why do you prefer sysread over recv?</i>&quot;, <code>recv</code> is for receiving messages, but streams have no such things. At best, <code>recv</code> does exactly the same thing as <code>sysread</code>. /// Re &quot;<i>you basically read 64 bytes</i>&quot;, As I already mentioned, it reads <i>up to</i> 64 KiB. (The exact number isn&#39;t important, but larger is usually faster.) /// Doesn&#39;t have to be a separate sub. Just a descriptive place-holder. ///  Re &quot;<i>I was thinking to process per character/byte</i>&quot;, Reading a byte at a time would be insanely slow. As for actually how to check for a full message, the solution will vary by protocol."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 0, "creation_date": 1463403450, "post_id": 37245149, "comment_id": 62036257, "body": "The protocol should have been defined in the Question, and that&#39;s where it should be placed. If you do, let me know and I&#39;ll update my answer."}, {"owner": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 0, "creation_date": 1463403731, "post_id": 37245149, "comment_id": 62036441, "body": "This is an example of the message markup: <code>.......I.....]..... ....^..&lt;START&gt;&gt;.......................N...ABC123MSG_Default;&zwnj;&#8203;source=AB123MSG;orig&zwnj;&#8203;in=SEABCD01.SIPO1;su&zwnj;&#8203;b_origin=&#39;&#39;;hostname&zwnj;&#8203;=SEABCD01.SIPO2;adap&zwnj;&#8203;ter_host=IPO2TCP;dat&zwnj;&#8203;e=&#39;MAY 08 10:10:10&#39;;severity=CRITICAL;msg=&#39;ING_EVENT: ABCDE_GDPAB123 FGD123B ABC MONITORING FROM IPO1 OK&#39;;adapter_host_somenode=BEABCD01.SIPO2;msg_id=&#39;ING_EVENT:&#39;&zwnj;&#8203;;multiline_msg=[N&#47;A]&zwnj;&#8203;;jobname=&#39;&#39;;sub_sour&zwnj;&#8203;ce=Unknown;END . D..4..@.3.d.</code>  As far as I understand I cannot &#39;grep&#39; in the stream, so I need to fetch a chunk and see if all is there and otherwise continue?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 1, "creation_date": 1463404059, "post_id": 37245149, "comment_id": 62036612, "body": "You didn&#39;t not provide any new information. (And you completely disregarded my comment as to where that should be posted!!!)"}, {"owner": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 0, "creation_date": 1463409646, "post_id": 37245149, "comment_id": 62040202, "body": "Hi, I am sorry but I am new to this and I don&#39;t know where to do that. I love this site for information but for posting I think it is terrible. Anyway, I almost have a solution now. I basically use a variable like in your example for the buffer and understood once read, the data is out of the socket (correct :)?). I will just write some logic that will keep track if the fetched END contains START or a part of it and keep track in a variable and it should be golden. Thanks for the help, I&#39;ll mark it as answered."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 0, "creation_date": 1463409849, "post_id": 37245149, "comment_id": 62040335, "body": "It&#39;s only terrible if you use it to chat. Click &quot;edit&quot; under your Question if you need to fix up or improve your Question."}, {"owner": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 0, "creation_date": 1463411550, "post_id": 37245149, "comment_id": 62041480, "body": "well I did add new information, right? And I do not understand your answer to my sysread question. Never knew this site was so counter intuitive in use :). Oh and I try to move to chat but had not enough reputation. I&#39;ll think twice before posting anything again ;). Thanks for the help."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "edited": false, "score": 1, "creation_date": 1463412461, "post_id": 37245149, "comment_id": 62042051, "body": "No, you didn&#39;t provide any new information. You just posted the same information in a different way. Still have no idea where the relevant bit starts and where the relevant ends (generally speaking). /// I used <code>sysread</code> because it&#39;s the only tool that makes sense to use. <code>recv</code> is &quot;<i>used to receive messages from a socket</i>&quot;, which makes no sense for streams."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1463403710, "last_edit_date": 1463403710, "creation_date": 1463358631, "answer_id": 37245149, "question_id": 37240711, "link": "https://stackoverflow.com/questions/37240711/perl-socket-parse-packets-from-a-network-stream/37245149#37245149", "title": "Perl socket parse packets from a network stream", "body": "<p>I've never understood why people use <code>recv</code> to read from a stream socket.</p>\n\n<p>Normally, the reading loop looks something like the following:</p>\n\n<pre><code>my $buf = '';\nwhile (1) {\n   my $rv = sysread($socket, $buf, 64*1024, length($buf));\n   if (!defined($rv)) {\n      die(\"Can't read from socket: $!\\n\");\n   }\n\n   if (!$rv) {\n      die(\"Can't read from socket: Premature EOF\\n\") if length($buf);\n      last;\n   }\n\n   while (my $msg = defined(check_for_full_message_and_extract_it_from_buf($buf))) {\n      process_msg($msg);\n   }\n}\n</code></pre>\n\n<p>(Keep in mind that sysread returns as soon as there is some data, even if there's less data than requested.)</p>\n\n<p>For example, the inner loop for sentinel-terminated data would look like the following:</p>\n\n<pre><code>   while ($buf =~ s/^(.*)\\n//) {\n      process_msg(\"$1\");\n   }\n</code></pre>\n\n<p>For example, the inner loop for length-prefixed blocks would look like the following:</p>\n\n<pre><code>   while (1) {\n      last if length($buf) &lt; 4;\n\n      my $len = unpack('N', $buf);\n      last if length($buf) &lt; 4+$len;\n\n      substr($buf, 0, 4, '');\n      my $msg = substr($buf, 0, $len, '');\n      process_msg($msg);\n   }\n</code></pre>\n\n<p>If you're particular case, you'd remove any data from the start <code>$buf</code> that you want to ignore until you get to the part in which you're interested, then you'd start extracting the items in which you are interested. This is vague, but I only have a vague description of the protocol with which to work.</p>\n"}, {"tags": [], "owner": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "is_accepted": false, "score": 0, "last_activity_date": 1463409789, "creation_date": 1463409789, "answer_id": 37256652, "question_id": 37240711, "link": "https://stackoverflow.com/questions/37240711/perl-socket-parse-packets-from-a-network-stream/37256652#37256652", "title": "Perl socket parse packets from a network stream", "body": "<p>I solved this by using the original code and adding :</p>\n\n<pre><code>if ( $data=~/&lt;START&gt;&gt;/) {\n    print \"\\nFound start\\n\";\n    $message.=$data;\n    while ($message !~/END/){\n        $client_socket-&gt;recv($data, $message_length);\n        $message.=$data;\n        print \"\\nStill reading\\n\"; \n    };\n    print \"\\nFound end\\n\"; # but may contain (part of) next START\n}\n</code></pre>\n\n<p>I still need to implement the part where I check if the chunk read has part of the next message, but I'll figure that out.\nThank you for the help!</p>\n"}], "owner": {"reputation": 4969, "user_id": 6337545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38da6e07cf159549163a375f14dd654a?s=128&d=identicon&r=PG", "display_name": "Vincent Gerris", "link": "https://stackoverflow.com/users/6337545/vincent-gerris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1463409789, "creation_date": 1463329333, "question_id": 37240711, "link": "https://stackoverflow.com/questions/37240711/perl-socket-parse-packets-from-a-network-stream", "title": "Perl socket parse packets from a network stream", "body": "<p>I am trying to figure out a proper way to parse a stream of data using perl.\nI have read through many of the examples, documentations and questions, but could not find how I could basically cut a \"package\" from the stream of data and process it.\nThis is the situation:\n - stream of data coming from a certain IP to an IP and port \n - stream contains some gibberish and then something between  and  with the data in there being semicolon seperated</p>\n\n<p>My attempts so far is to have a Socket listening on the port and process the $data var:</p>\n\n<pre><code>#!/usr/bin/perl\n    use IO::Socket::INET;\n    # auto-flush on socket\n    $| = 1;\n\n# creating a listening socket\nmy $socket = new IO::Socket::INET (\n    LocalHost =&gt; '127.0.0.1',\n    LocalPort =&gt; '7070',\n    Proto =&gt; 'tcp',\n    Listen =&gt; 5,\n    Reuse =&gt; 1\n);\ndie \"cannot create socket $!\\n\" unless $socket;\nprint \"server waiting for client connection on port 7070 \\n\";\n\nwhile(1)\n{\n    # waiting for a new client connection\n    my $client_socket = $socket-&gt;accept();\n\n    # get information about a newly connected client\n    my $client_address = $client_socket-&gt;peerhost();\n    my $client_port = $client_socket-&gt;peerport();\n    print \"connection from $client_address:$client_port\\n\";\n\n    # read up to 1024 characters from the connected client\n    my $data = \"\";\n    $client_socket-&gt;recv($data, 1024);\n    print \"received data: $data\\n\";\n\n    @data_array = split(/;/,$data);\n    foreach (@data_array) {\n      print \"$_\\n\";\n    }\n\n    # write response data to the connected client\n    $data = \"ok\";\n    $client_socket-&gt;send($data);\n\n    # notify client that response has been sent\n    shutdown($client_socket, 1);\n}\n\n$socket-&gt;close();\n</code></pre>\n\n<p>This works but as far as I understand this will put the whole stream in up to the size and then process that.</p>\n\n<p>My question:\nHow can I identify the part I need (start-end), process that and then go on to the next?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1463332356, "post_id": 37240671, "comment_id": 62011452, "body": "The error is not happening where you indicate; that line will never generate that error.  Figure out where the error is really happening."}], "answers": [{"tags": [], "owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "is_accepted": false, "score": 4, "last_activity_date": 1463333556, "last_edit_date": 1463333556, "creation_date": 1463332633, "answer_id": 37241334, "question_id": 37240671, "link": "https://stackoverflow.com/questions/37240671/dereferencing-an-array-from-an-array-of-arrays-in-perl/37241334#37241334", "title": "Dereferencing an array from an array of arrays in perl", "body": "<p>The problem is with the <code>splice</code> that modifies the list while it is being processed. By using the <code>0..(scalar @leaderboard-1)</code> you set up the range of elements to process at the beginning, but when some elements are removed by the <code>splice</code>, the list ends up shorter than that and once <code>$i</code> runs off the end of the modified list you get undefined references.</p>\n\n<p>A quick fix would be to use</p>\n\n<pre><code>for (my $i = 0; $i &lt; @leaderboard; $i++) \n</code></pre>\n\n<p>although that's neither very idiomatic nor efficient.\nNote that doing something like <code>$i &lt; @leaderboard</code> or <code>@leaderboard-1</code> already provides scalar context for the array variable, so you don't need the <code>scalar()</code> call, it does nothing here.</p>\n\n<p>I'd probably use something like</p>\n\n<pre><code>my @result;\nwhile(my $elem = shift @leaderboard) {\n    ...\n    if ($w==$parentmass) {\n        # do more stuff\n        push @result, $elem;\n    }\n}\n</code></pre>\n\n<p>So instead of deleting from the original list, all elements would be taken off the original and only the successful (by whatever criterion) ones included in the result.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1463334623, "last_edit_date": 1463334623, "creation_date": 1463334267, "answer_id": 37241617, "question_id": 37240671, "link": "https://stackoverflow.com/questions/37240671/dereferencing-an-array-from-an-array-of-arrays-in-perl/37241617#37241617", "title": "Dereferencing an array from an array of arrays in perl", "body": "<p>There seem to be two things going on here</p>\n\n<ul>\n<li><p>You're removing all arrays from <code>@leaderboard</code> whose <code>sumaarray</code> is <em>greater than</em> <code>$parentmass</code></p></li>\n<li><p>You're putting in <code>@Leader</code> the array with the highest <code>score</code> of all the arrays in <code>@leaderboard</code> whose <code>sumaarray</code> is <em>equal to</em> <code>$parentmass</code></p></li>\n</ul>\n\n<p>I'm unclear whether that's correct. You don't seem to handle the case where <code>sumaarray</code> is <em>less than</em> <code>$parentmass</code> at all. But that can be written very simply by using <code>grep</code> together with the <code>max_by</code> function from the <a href=\"https://metacpan.org/pod/List::UtilsBy\" rel=\"nofollow\"><code>List::UtilsBy</code></a> module</p>\n\n<pre><code>use List::UtilsBy 'max_by';\n\n\nmy $parentmass = $spect[-1];\n\nmy @leaderboard = grep { sumaarray(@$_) &lt;= $parentmass } @arrarraa;\n\nmy $leader = max_by { score(@$_) }\n        grep { sumaarray(@$_) == $parentmass }\n        @leaderboard;\n</code></pre>\n\n<p>I'm sure this could be made a lot neater if I understood the intention of your algorithm; especially how those elements with a <code>sumarray</code> of less that <code>$parentmass</code></p>\n"}], "owner": {"reputation": 51, "user_id": 5792440, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10153317678482060/picture?type=large", "display_name": "Martha Elena Ibarra", "link": "https://stackoverflow.com/users/5792440/martha-elena-ibarra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463334623, "creation_date": 1463329069, "question_id": 37240671, "link": "https://stackoverflow.com/questions/37240671/dereferencing-an-array-from-an-array-of-arrays-in-perl", "title": "Dereferencing an array from an array of arrays in perl", "body": "<p>I have various subroutines that give me arrays of arrays. I have tested them separately and somehow when i write my main routine, I fail to make the program recognize my arrays. I know it's a problem of dereferencing, or at least i suspect it heavily.</p>\n\n<p>The code is a bit long but I'll try to explain it: </p>\n\n<pre><code>my @leaderboard=@arrarraa; #an array of arrays\nmy $parentmass=$spect[$#spect]; #scalar\n\nwhile (scalar @leaderboard&gt;0) {\n        for my $i(0..(scalar @leaderboard-1)) {\n        my $curref=$leaderboard[$i]; #the program says here that there is an uninitialized value. But I start with a list of 18 elements.\n        my @currentarray=@$curref; #then i try to dereference the array\n        my $w=sumaarray (@currentarray);\n        if ($w==$parentmass) {\n            if (defined $Leader[0]) {\n                my $sc1=score (@currentarray);\n                my $sc2=score (@Leader);\n                if ($sc1&gt;$sc2) {\n                    @Leader=@currentarray;\n                }\n\n            }\n            else {@Leader=@currentarray;}\n        }\n        elsif ($w&gt;$parentmass) {splice @leaderboard,$i,1;} #here i delete the element if it doesn't work. I hope it's done correctly.\n\n    }\n    my $leadref= cut (@leaderboard); #here i take the first 10 scores of the AoAs\n    @leaderboard = @$leadref;\n    my $leaderef=expand (@leaderboard); #then i expand the AoAs by one term\n    @leaderboard= @$leaderef;            #and i should end with a completely different list to work with in the while loop\n}   \n</code></pre>\n\n<p>So I don't know how to dereference the AoAs correctly. The output of the program says: </p>\n\n<p>\"Use of uninitialized value $curref in concatenation (.) or string at C:\\Algorithms\\22cyclic\\cyclospectrumsub.pl line 183.\nCan't use an undefined value as an ARRAY reference at C:\\Algorithms\\22cyclic\\cyclospectrumsub.pl line 184.\"</p>\n\n<p>I would appreciate enormously any insight or recommendation.</p>\n"}, {"tags": ["python", "perl", "eval"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1463322122, "post_id": 37239273, "comment_id": 62007760, "body": "Try to firstly <b><i>print</i></b> the statement instead of (or in addition to) eval&#39;ing it, i.e. <code>print &quot;XYZ_ARG0=&#39;$0&#39; NZENV_OUTPUT=&#39;-a -p xyz&#39; xyz $_&quot;, &quot;\\n&quot;;</code>. So you can see what actually gets executed. The &#39;eval&#39; then executes the output of that very command as Perl code."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1463324982, "post_id": 37239273, "comment_id": 62008803, "body": "Note that you must trust the command that&#39;s run; this is very risky from some points of view."}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 6327010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b1bd1afacc59df0efa9ea2c63407feda?s=128&d=identicon&r=PG&f=1", "display_name": "Turbo Sullivan", "link": "https://stackoverflow.com/users/6327010/turbo-sullivan"}, "edited": false, "score": 0, "creation_date": 1463378844, "post_id": 37239333, "comment_id": 62023687, "body": "I have marked it as answer. one last doubt on this item, how $0 in single quotes will behave inside back quotes?"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 647, "user_id": 6327010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b1bd1afacc59df0efa9ea2c63407feda?s=128&d=identicon&r=PG&f=1", "display_name": "Turbo Sullivan", "link": "https://stackoverflow.com/users/6327010/turbo-sullivan"}, "edited": false, "score": 0, "creation_date": 1463379454, "post_id": 37239333, "comment_id": 62023872, "body": "You&#39;ve to read the line like a compiler: There is no <i>$0 in single quotes</i>, there is a <code>$0</code> in backticks with some other chars. Variables in backticks are replaced, so $0 will become the current process title. Try <code>print `echo &#39;$0&#39;`;</code>. <code>print</code> and <code>echo</code> are very powerful debug and learning tools :)"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 1, "last_activity_date": 1463324913, "last_edit_date": 1463324913, "creation_date": 1463321790, "answer_id": 37239333, "question_id": 37239273, "link": "https://stackoverflow.com/questions/37239273/perl-eval-with-back-quote/37239333#37239333", "title": "perl eval with back quote", "body": "<p>The backticks run an external command and return the output:</p>\n\n<pre><code>my $result = `ls -l`;\nprint $result;\n</code></pre>\n\n<p>Your <code>eval</code> line is processed exactly the same way:</p>\n\n<pre><code>my $result = `XYZ_ARG0='$0' NZENV_OUTPUT='-a -p xyz' xyz $_`;\neval $result;\n</code></pre>\n\n<p>It's basically fetching some Perl source from the output of the called script and runs it.</p>\n"}], "owner": {"reputation": 647, "user_id": 6327010, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b1bd1afacc59df0efa9ea2c63407feda?s=128&d=identicon&r=PG&f=1", "display_name": "Turbo Sullivan", "link": "https://stackoverflow.com/users/6327010/turbo-sullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 37239333, "answer_count": 1, "score": 2, "last_activity_date": 1463324913, "creation_date": 1463321405, "question_id": 37239273, "link": "https://stackoverflow.com/questions/37239273/perl-eval-with-back-quote", "title": "perl eval with back quote", "body": "<p>I was converting a perl script into python and then I found this function which I couldn't understand.</p>\n\n<pre><code>sub set_xyz_hash {\n    %xyz = ();\n    $_ = join(' ', map { my $a = $_; $a =~ s/\\'/\\'\\\"\\'\\\"\\'/g; \"'$a'\" } @ARGV);\n    eval `XYZ_ARG0='$0' NZENV_OUTPUT='-a -p xyz' xyz $_`;\n}\n</code></pre>\n\n<p>since my knowledge in perl is very limited, I couldn't understand <strong>'eval'</strong> used in this function. can someone please help me here? </p>\n\n<p><strong>note, eval is used wth ` (back quote).</strong></p>\n"}, {"tags": ["perl", "shell", "catalyst"], "answers": [{"comments": [{"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463326464, "post_id": 37240148, "comment_id": 62009345, "body": "The development happens on the server. IDE does not matter for my question. My question is whether it is possible to do development entirely on the server (with any file uploader on the client, be it Padre or something other)"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463329401, "post_id": 37240148, "comment_id": 62010420, "body": "Is it not possible to put the environment I suggested on the server and then, via a SSH session ( e.g.  puTTy X tunneling ) do your development? I&#39;m just trying help and avoid the command line as you suggested you wanted to do. I have used a similar setup with Eclipse IDE on the server and was able to make Perl code changes thereby bypassing the command line. Once again, just trying to help with some suggestions from my experience. Thx."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463333081, "post_id": 37240148, "comment_id": 62011720, "body": "The question is what can we do if there is not possible using SSH."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "reply_to_user": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1463334480, "post_id": 37240148, "comment_id": 62012255, "body": "@bart: We use FTP :-("}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1463335179, "post_id": 37240148, "comment_id": 62012520, "body": "I didn&#39;t see in the question that SSH was unavailable. How about using FileZilla?"}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463344860, "post_id": 37240148, "comment_id": 62015777, "body": "@tale852150 on &quot;I didn&#39;t see in the question that SSH was unavailable&quot; see &quot;without command line access to our server&quot; in the question. We use FileZilla and similar clients (personally I use a text editor with FTP support)"}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1463351259, "post_id": 37240148, "comment_id": 62017547, "body": "Without SSH up and running on your server I can only suggest FileZilla or some FTP client.  Sorry I could not be of more help."}, {"owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "edited": false, "score": 0, "creation_date": 1463421007, "post_id": 37240148, "comment_id": 62046959, "body": "I&#39;ve updated my answer in the hopes that will help you in some way. Thanks for your patience.  Best of luck."}], "tags": [], "owner": {"reputation": 1523, "user_id": 2079373, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/etR7x.png?s=128&g=1", "display_name": "tale852150", "link": "https://stackoverflow.com/users/2079373/tale852150"}, "is_accepted": false, "score": -1, "last_activity_date": 1463420954, "last_edit_date": 1463420954, "creation_date": 1463326197, "answer_id": 37240148, "question_id": 37238741, "link": "https://stackoverflow.com/questions/37238741/using-catalyst-without-command-line/37240148#37240148", "title": "Using Catalyst without command line", "body": "<p>If you don't have SSH enabled, try <code>rsync</code> to copy files from one point to another.\nIt can use SSH but I believe it does not <em>require</em> SSH and may use another method such as a remote shell.</p>\n\n<p>See <a href=\"https://rsync.samba.org/\" rel=\"nofollow\">rsync home page</a> for further information.</p>\n\n<p>There is also <code>csync</code> which uses HTTP.  </p>\n\n<p>See <a href=\"https://www.csync.org/\" rel=\"nofollow\">csync home page</a></p>\n"}, {"comments": [{"owner": {"reputation": 8942, "user_id": 14750, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1259cb9901b6d9caf5aeda812927d111?s=128&d=identicon&r=PG", "display_name": "RET", "link": "https://stackoverflow.com/users/14750/ret"}, "edited": false, "score": 0, "creation_date": 1463444311, "post_id": 37260209, "comment_id": 62057077, "body": "Any application with a non-zero number of developers needs a version control system and an environment for development/testing. Hacking away directly on the server is a recipe for disaster. Cannot agree enough with this answer."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1463421342, "creation_date": 1463421342, "answer_id": 37260209, "question_id": 37238741, "link": "https://stackoverflow.com/questions/37238741/using-catalyst-without-command-line/37260209#37260209", "title": "Using Catalyst without command line", "body": "<p>Doing any kind of moderately complex development when the only environment you can run code in is a remote server with access only via FTP is a terrible idea. A far better approach to the problem would be to set up local development environments (e.g. in a virtual machine) for each developer.</p>\n\n<p>That said, so long as you can configure the server appropriately in advance (e.g. installing all the Perl module dependencies and setting up the HTTPD to use CGI), then it is possible. You just need to provide a means of restarting the Catalyst application on demand. </p>\n\n<p>One way to do that would be to use plain old CGI to run it (there is a <a href=\"https://metacpan.org/pod/Plack::Handler::CGI\" rel=\"nofollow\">plack handler for that purpose</a>). That will restart the application for each request, which is terribly inefficient but might work for you.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463421342, "creation_date": 1463317980, "question_id": 37238741, "link": "https://stackoverflow.com/questions/37238741/using-catalyst-without-command-line", "title": "Using Catalyst without command line", "body": "<p>Can Catalyst Perl framework be adequately used by developers without command line access to our server? (only with uploading/downloading files facility)</p>\n\n<p>Development happens on the server and doing it on developers' PCs is probably not possible.</p>\n"}, {"tags": ["perl", "catalyst"], "answers": [{"comments": [{"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463333258, "post_id": 37240640, "comment_id": 62011782, "body": "We use dispatchers hard-coded in our (F)CGI scripts. Server dispatch configuration is not very complex. How to connect between our old CGI scripts and new Catalyst code? You have said that this is possible but not explained how to do it"}, {"owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463335154, "post_id": 37240640, "comment_id": 62012513, "body": "I&#39;ve added a simplified example of how our application was configured in Apache httpd to handle requests to be handled by Catalyst and CGI. I think once a request goes to your CGI space, you&#39;d have no problem using the old dispatchers."}, {"owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463335718, "post_id": 37240640, "comment_id": 62012707, "body": "We didn&#39;t really &quot;connect&quot; our Catalyst code and CGI scripts directly. A lot of functionalities needed in Catalyst space were refactored into libraries that can be used by both Catalyst and CGI code."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463344998, "post_id": 37240640, "comment_id": 62015823, "body": "My question is yet unanswered: How to use Catalyst together with our custom written dispatchers in (F)CGI (or rather in our custom written .pm modules used by our (F)CGI)?"}, {"owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463362436, "post_id": 37240640, "comment_id": 62019798, "body": "Your custom .pm modules can be used like any other Perl modules. You can load them up using &#39;use&#39; or &#39;require&#39;. Of course you have to put the path to those modules in your @INC, possibly by using &#39;use lib&#39; in your Catalyst script."}, {"owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463424409, "post_id": 37240640, "comment_id": 62048833, "body": "My question was not whether I can access our custom modules with @INC (it is obviously possible), but if Catalyst path system can be (ab)used together with our custom written dispatchers (even despite the fact that Catalyst has its own path system)"}, {"owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "reply_to_user": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "edited": false, "score": 0, "creation_date": 1463457610, "post_id": 37240640, "comment_id": 62060233, "body": "If I understand you correctly, you want to replace Catalyst&#39;s dispatcher with your custom dispatcher. A simple diagram would have helped. I&#39;m afraid that defeats the purpose of using Catalyst. However you can always define a controller and base on that controller&#39;s path, dispatch using your own dispatcher as you have the request&#39;s path and params for your disposal."}], "tags": [], "owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "is_accepted": false, "score": 1, "last_activity_date": 1463334912, "last_edit_date": 1463334912, "creation_date": 1463328872, "answer_id": 37240640, "question_id": 37238564, "link": "https://stackoverflow.com/questions/37238564/catalyst-dispatchers-not-using-them/37240640#37240640", "title": "Catalyst dispatchers (not using them)", "body": "<p>I worked on a site where part of it was Catalyst, along with lots of CGI scripts and mod_perl handlers. We did not use Plack (the project was started before Plack was introduced). We deployed all of our code (CGI, mod_perl handlers and Catalyst) using Apache. The first level of dispatching is done in Apache httpd's configuration, using the Location directive, where requests would be handled by CGI, mod_perl or Catalyst based on their URLs.</p>\n\n<p>For example, to run the CGI scripts:</p>\n\n<pre><code>ScriptAlias \"/cgi-bin/\" \"/home/httpd/cgi-bin/\"\n</code></pre>\n\n<p>And on top of that, to run Catalyst for URLs matching \"/myapp\":</p>\n\n<pre><code>&lt;Location /myapp&gt;\n    SetHandler          modperl\n    PerlResponseHandler MyApp\n&lt;/Location&gt;\n</code></pre>\n\n<p>It is a little oversimplified. Please look at <a href=\"http://search.cpan.org/~ether/Catalyst-Manual-5.9009/lib/Catalyst/Manual/Deployment/Apache/mod_perl.pod\" rel=\"nofollow\">http://search.cpan.org/~ether/Catalyst-Manual-5.9009/lib/Catalyst/Manual/Deployment/Apache/mod_perl.pod</a> as that is very much how we deployed our Catalyst portion of our application.</p>\n\n<p>Just to give you a little more details. Catalyst was introduced when we already had lots of code which is a little similar to your situation. And we didn't want to rewrite everything in Catalyst because of time constraints.</p>\n\n<p>To answer your question:\nYes, you can switch to Catalyst (even incrementally) and still be able to use the existing custom method dispatchers.</p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463334912, "creation_date": 1463316975, "question_id": 37238564, "link": "https://stackoverflow.com/questions/37238564/catalyst-dispatchers-not-using-them", "title": "Catalyst dispatchers (not using them)", "body": "<p>Our site is written in plain Perl (and our codebase is rather big).</p>\n\n<p>We are going to refactor it.</p>\n\n<p>Catalyst uses \"method dispatchers\" (like \":Path\"). But our site is written with a large number of our custom written dispatchers.</p>\n\n<p>My question: If we switch to Catalyst, will we able to use our custom method dispatchers, rather than rewrite all in the Catalyst way? (possibly switching to Catalyst way later (\"incrementally\"))</p>\n\n<p>So, is it worth for our big site to refactor it with Catalyst?</p>\n\n<p>I am a long time Perl programmer, but Catalyst novice.</p>\n"}, {"tags": ["windows", "perl", "file", "timeout"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463323789, "post_id": 37238819, "comment_id": 62008385, "body": "I&#39;m not sure that actually helps the problem. The method the OP used to test if open worked is fine - it&#39;s just it&#39;s blocking, which wouldn&#39;t work either."}, {"owner": {"reputation": 96, "user_id": 6337003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bh17B.jpg?s=128&g=1", "display_name": "Jeremie Zazoun", "link": "https://stackoverflow.com/users/6337003/jeremie-zazoun"}, "edited": false, "score": 0, "creation_date": 1463383164, "post_id": 37238819, "comment_id": 62025459, "body": "I agree with you it is a more elegant way to open file but it is not related to my problem"}], "tags": [], "owner": {"reputation": 184, "user_id": 6115421, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/15a623fe6b5c826ee955a1474fc1723e?s=128&d=identicon&r=PG&f=1", "display_name": "Dragos Trif", "link": "https://stackoverflow.com/users/6115421/dragos-trif"}, "is_accepted": false, "score": 0, "last_activity_date": 1463319084, "last_edit_date": 1463319084, "creation_date": 1463318492, "answer_id": 37238819, "question_id": 37238398, "link": "https://stackoverflow.com/questions/37238398/perl-safely-opening-files/37238819#37238819", "title": "perl - Safely opening files", "body": "<p>I belive the corect syntax for opening a file is:</p>\n\n<pre><code> my $file = \"\\\\\\\\$myserver\\\\c\\$\\\\$mydirectory\\\\$myfile\";\n open my $fh, '&lt;', $file\n     or die \"Cannot open $file for reading: $!\";\n</code></pre>\n"}], "owner": {"reputation": 96, "user_id": 6337003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bh17B.jpg?s=128&g=1", "display_name": "Jeremie Zazoun", "link": "https://stackoverflow.com/users/6337003/jeremie-zazoun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551358158, "creation_date": 1463315871, "last_edit_date": 1592644375, "question_id": 37238398, "link": "https://stackoverflow.com/questions/37238398/perl-safely-opening-files", "title": "perl - Safely opening files", "body": "<p>I am working on a Perl script where I need to check the content of multiple remotes files on different servers.\nInside my loop I got this:</p>\n<pre><code>my $file = &quot;\\\\\\\\$myserver\\\\c\\$\\\\$mydirectory\\\\$myfile&quot;;\nif (open (FILE, &quot;&lt;&quot;, $file))\n{\n    # do some work\n    close (FILE);\n}\n</code></pre>\n<p>This is working fine most of the time but today I had a very specific problem. One of the servers had his Windows directory deleted and wasn't responsive.\nI wasn't even able to kill the terminal running the script.\nSo I started to search online a way to add a timeout but after a long search I found this:</p>\n<blockquote>\n<p>Blocking I/O on MSWin32</p>\n<p>alarm(2) doesn't interrupt blocking I/O on MSWin32, so 'timeout' won't do that either.</p>\n</blockquote>\n<p>Since almost all solution uses the function alarm I have no idea how to prevent my script from being stuck again.</p>\n<p>ps: I tried to use system calls to print the file but I got the same issue even directly from a cmd and not inside the script.</p>\n"}, {"tags": ["perl", "text", "tk", "tkentry"], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 1885095, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f27e7d08b8cfbdb044e48ac4de4cf370?s=128&d=identicon&r=PG", "display_name": "AJ Gottes", "link": "https://stackoverflow.com/users/1885095/aj-gottes"}, "edited": false, "score": 0, "creation_date": 1463323953, "post_id": 37238969, "comment_id": 62008443, "body": "if I move the print before the mainloop, it will print blank line... I don&#39;t understand..."}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 359, "user_id": 1885095, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f27e7d08b8cfbdb044e48ac4de4cf370?s=128&d=identicon&r=PG", "display_name": "AJ Gottes", "link": "https://stackoverflow.com/users/1885095/aj-gottes"}, "edited": false, "score": 0, "creation_date": 1463324476, "post_id": 37238969, "comment_id": 62008630, "body": "For multi-line entry: yes, use Text(), but please read the tutorial for Text in for example the book I linked to and give it your best try. The book is excellent."}, {"owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "reply_to_user": {"reputation": 359, "user_id": 1885095, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f27e7d08b8cfbdb044e48ac4de4cf370?s=128&d=identicon&r=PG", "display_name": "AJ Gottes", "link": "https://stackoverflow.com/users/1885095/aj-gottes"}, "edited": false, "score": 0, "creation_date": 1463324837, "post_id": 37238969, "comment_id": 62008747, "body": "You should also try running the command called widget from the command line (at least on Linux). widget is an interactive tutorial."}], "tags": [], "owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "is_accepted": false, "score": 2, "last_activity_date": 1463397257, "last_edit_date": 1463397257, "creation_date": 1463319517, "answer_id": 37238969, "question_id": 37238317, "link": "https://stackoverflow.com/questions/37238317/perl-tk-text-cannot-get-text-content-into-variable/37238969#37238969", "title": "perl tk text: cannot get text content into variable", "body": "<p>$mw->MainLoop() sets up a loop waiting for events from mouse, keyboard, timer and whatever else you use. $desc->get('1.0'); will not be executed until you exit the application. You can move it above and that will solve the problem you ask. </p>\n\n<p>However, your real problem is to get the text into for example Entry() and use it in your application. Check out a good tutorial such as for example <a href=\"http://docstore.mik.ua/orelly/perl3/tk/ch05_02.htm\" rel=\"nofollow\">http://docstore.mik.ua/orelly/perl3/tk/ch05_02.htm</a>.</p>\n\n<p>UPDATE 16 May:  Is what you want to do:enter text in window and then press Go? Try this:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tk;\n\nmy $mw = MainWindow-&gt;new(-width =&gt; '1000', -relief =&gt; 'flat',\n   -height =&gt; '840', -title =&gt; 'Test', -background =&gt; 'white', );\n$mw-&gt;geometry(\"1000x840+200+200\");\n\nmy $desc = $mw-&gt;Text(-width =&gt; 50, -height =&gt; 3)-&gt;place(-x =&gt; 10, -y =&gt; 170);\n\nmy $goButton = $mw-&gt;Button( -pady =&gt; '1', -relief =&gt; 'raised',\n   -padx =&gt; '1', -state =&gt; 'normal', -justify =&gt; 'center',\n   -text =&gt; 'Go', -width =&gt; 15, -height =&gt; 1,\n    -command =&gt; sub {\\&amp;fromGo($desc) })-&gt;place( -x =&gt; 12, -y =&gt; 770);\nmy $cancelButton = $mw-&gt;Button( -pady =&gt; '1', -relief =&gt; 'raised',\n  -padx =&gt; '1', -state =&gt; 'normal', -justify =&gt; 'center',\n  -text =&gt; 'Cancel', -width =&gt; 8, -height =&gt; 1,\n  -command =&gt; sub { exit 0; })-&gt;place( -x =&gt; 140, -y =&gt; 770);\n$mw-&gt;MainLoop();\n\n\nsub fromGo\n{\n  my($desc) = @_;\n  my $txt = $desc-&gt;get('1.0', 'end-1c');\n  print \"$txt\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 1885095, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f27e7d08b8cfbdb044e48ac4de4cf370?s=128&d=identicon&r=PG", "display_name": "AJ Gottes", "link": "https://stackoverflow.com/users/1885095/aj-gottes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504722503, "creation_date": 1463315376, "last_edit_date": 1504722503, "question_id": 37238317, "link": "https://stackoverflow.com/questions/37238317/perl-tk-text-cannot-get-text-content-into-variable", "title": "perl tk text: cannot get text content into variable", "body": "<p>All I wanted is a multiline text entry.</p>\n\n<p>So I used TK::Text instead of TK::Entry.</p>\n\n<pre><code>use Tk;\n\nmy $mw = MainWindow-&gt;new(-width =&gt; '1000', -relief =&gt; 'flat',\n   -height =&gt; '840', -title =&gt; 'Test', -background =&gt; 'white', );    \n$mw-&gt;geometry(\"1000x840+200+200\");\n\nmy $desc = $mw-&gt;Scrolled('Text', -scrollbars =&gt; 'e', \n   -width =&gt; 50, -height =&gt; 3)-&gt;place(-x =&gt; 10, -y =&gt; 170);\n\nmy $goButton = $mw-&gt;Button( -pady =&gt; '1', -relief =&gt; 'raised',\n   -padx =&gt; '1', -state =&gt; 'normal', -justify =&gt; 'center',\n   -text =&gt; 'Go', -width =&gt; 15, -height =&gt; 1,\n   -command =&gt; sub {$mw-&gt;destroy;})-&gt;place( -x =&gt; 12, -y =&gt; 770);\n\nmy $cancelButton = $mw-&gt;Button( -pady =&gt; '1', -relief =&gt; 'raised',\n  -padx =&gt; '1', -state =&gt; 'normal', -justify =&gt; 'center',\n  -text =&gt; 'Cancel', -width =&gt; 8, -height =&gt; 1,\n  -command =&gt; sub { exit 0; })-&gt;place( -x =&gt; 140, -y =&gt; 770);\n\n$mw -&gt; MainLoop();\n\nprint $desc-&gt;get('1.0');\n</code></pre>\n\n<p>But when I run this code, I get this error:</p>\n\n<p>Failed to AUTOLOAD 'Tk::Frame::get'</p>\n\n<p>What am I doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463324061, "post_id": 37235855, "comment_id": 62008494, "body": "The easy way is: <a href=\"http://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Don&#39;t use <code>XML::Simple</code></a> - there are much better alternatives available."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463344033, "post_id": 37236494, "comment_id": 62015496, "body": "You can, but given you had XML::LibXML in there, why not just <code>findnodes</code> instead?"}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 1, "last_activity_date": 1463303754, "creation_date": 1463303754, "answer_id": 37236494, "question_id": 37235855, "link": "https://stackoverflow.com/questions/37235855/force-perl-xmlin-to-treat-an-empty-tag-as-empty-string/37236494#37236494", "title": "Force perl XMLin to treat an empty tag as empty string?", "body": "<p>You can use <code>Data::Find</code> module to traverse the hash and and find paths to empty hash refs. You can then use <code>eval</code> to replace empty hash refs with empty string. Here is an example:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse XML::LibXML::Simple;\nuse Data::Dumper;\nuse Data::Find qw/ diter /;\n\nmy $xml = &lt;&lt;XML;\n&lt;root&gt;\n&lt;node&gt;\n    &lt;bar&gt;bar1&lt;/bar&gt;\n    &lt;baz&gt;baz1&lt;/baz&gt;\n&lt;/node&gt;\n&lt;node&gt;\n    &lt;bar&gt;bar2&lt;/bar&gt;\n    &lt;baz/&gt;\n&lt;/node&gt;\n&lt;/root&gt;\nXML\n\nmy $h = XMLin($xml);\n\nmy $iter = diter $h, sub {\n    my $v = shift;\n\n    defined $v and ref($v) eq \"HASH\" and !(keys %{ $v });\n};\n\nwhile (my $path = $iter-&gt;() )\n{\n    eval \"\\$h-&gt;$path = ''\";\n}\n\nprint Dumper($h);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1463304625, "creation_date": 1463304625, "answer_id": 37236624, "question_id": 37235855, "link": "https://stackoverflow.com/questions/37235855/force-perl-xmlin-to-treat-an-empty-tag-as-empty-string/37236624#37236624", "title": "Force perl XMLin to treat an empty tag as empty string?", "body": "<p>XML::LibXML::Simple does not appear to have an option to enable this behavior.</p>\n\n<p>XML::Simple does, though; set <code>SuppressEmpty</code> to an empty string to parse empty nodes as strings instead of containers:</p>\n\n<pre><code># perl -MXML::Simple -MData::Dumper \\\n  -E '$h=XMLin(\"&lt;some&gt;&lt;bubu&gt;&lt;/bubu&gt;&lt;/some&gt;\", SuppressEmpty =&gt; \"\"); say Dumper $h'\n\n$VAR1 = {\n      'bubu' =&gt; ''\n    };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463340432, "post_id": 37239932, "comment_id": 62014315, "body": "wow - just saw the answer.  Very nice code. Probably this is the right way :) Going to try implement it, but my real XML is much-much more complex, and to the constructor i need pass approx 20 different values (some of are arrayrefs and such.) I&#39;m not sure  how i will be successful to write the above searches. Anyway - thank you very much. :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463343938, "post_id": 37239932, "comment_id": 62015460, "body": "Guarantee you, your more complicated code is easier to navigate via xpath. And there&#39;s quite a few that would be prepared to help figure it out."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1463348642, "post_id": 37239932, "comment_id": 62016849, "body": "You may find this <a href=\"http://grantm.github.io/perl-libxml-by-example/_static/xpath-sandbox/xpath-sandbox.html?q=//title\" rel=\"nofollow noreferrer\">XPath Sandbox</a> and the tutorial it links to useful for learning XPath."}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463485862, "post_id": 37239932, "comment_id": 62075994, "body": "Few warning words for others, from a point of view of an XML and perl beginner as me.  Using the discouraged <code>XML::Simple</code> I was able process my XML file using approx 20 lines of perl code. (1 line for calling the <code>XMLIn</code> + approx 20 lines of perl code for filtering and modifying the got nested hash). Time spent: approx 2 hours (to understand the complicated XML structure and write the mentioned 20 lines of code) <b>plus</b> another few hours waiting for the answer here. :) Result: <i>working solution</i>."}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463485892, "post_id": 37239932, "comment_id": 62076025, "body": "Now, trying to understand the recommented <code>XML::Twig</code>. The module is sure great and probably allows solve any XML-related problem, but the docs are written <i>by experts</i> and <b>for experts</b>.  For an beginner like me is <b>very hard</b> to progress. After spending approx 12 horus of reading docs + trying to fetch the needed data from my XML file, - i still haven&#39;t nothing working yet. Still not giving up, and probably will ask many questions here... ;)"}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463485925, "post_id": 37239932, "comment_id": 62076051, "body": "So, once when you mastering the module, will learn the XPath &amp; ELT and many-many-many related things - it could be an the fast and recommended way parsing and fetching data from XML, but if you&#39;re an stupid perl and XML beginner (like me) and want FAST results - the <code>XML::Twig</code> probably isn&#39;t your way."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463487001, "post_id": 37239932, "comment_id": 62076889, "body": "Comments aren&#39;t really the place for this discussion. But you are wrong. No matter how much <b>bold text</b> you use. <code>XML::Twig</code> is a <i>correct</i> solution to the problem (others exist). <code>XML::Simple</code> and <code>regex</code> are not. They are hacks, that will create brittle code. Ask a new question with your <i>actual code</i> and I&#39;ll show you the <code>XML::Twig</code> solution, and I&#39;d be prepared to bet it&#39;s shorter and neater."}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463487759, "post_id": 37239932, "comment_id": 62077458, "body": "I&#39;m absolutely sure that youre right. I already said: <i>The module is sure great and probably allows solve any XML-related problem,</i> and <i>it could be an the fast and recommended way parsing and fetching data from XML</i>. I&#39;m not questioning your knowledge :) - just my knowledge isn&#39;t enough :)  For an beginner - it is hard. (Know, because me <b>is</b> an beginner - regardless of the bold. :) ). Sorry, i don&#39;t want &quot;upset&quot; you. :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463488041, "post_id": 37239932, "comment_id": 62077665, "body": "I&#39;m quite passionate about <i>not</i> using  <code>XML::Simple</code> or <code>regex</code> because I have seen far too many occasions where it&#39;s processed badly. It&#39;s a data transfer language with a formal specification - the point being, to allow both parties to transfer data in an implementation independent fashion. So when - one day - script that &quot;parses&quot; XML badly breaks, because it can&#39;t handle &#39;valid&#39; XML changes, who&#39;s fault is it? Who gets to fix it?"}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463488277, "post_id": 37239932, "comment_id": 62077859, "body": "I don&#39;t understand why you mentioning regexes - probably nobody want process XML using regexes, it sounds to me as an stupidity... Youre right. Agree. And sorry again. :)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463488909, "post_id": 37239932, "comment_id": 62078354, "body": "It comes up more than you think, and has the same fundamental problem as <code>XML::Simple</code>. It doesn&#39;t work reliably."}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 0, "creation_date": 1463574605, "post_id": 37239932, "comment_id": 62121745, "body": "Just for the correctness, you mean <code>for my $child...</code> instead of <code>for my $node...</code>. (or <code>print $node-&gt;tag</code>)..."}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "edited": false, "score": 1, "creation_date": 1463592225, "post_id": 37239932, "comment_id": 62134156, "body": "So, at the &quot;end of day&quot; - i must say: &quot;Thank you, for convince me to using the <code>XML::Twig</code>&quot;. It has an steep learning curve - but the result is better. So, thanx again. Added an EDIT to the question itself. :) ;)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1463575205, "last_edit_date": 1495541763, "creation_date": 1463325022, "answer_id": 37239932, "question_id": 37235855, "link": "https://stackoverflow.com/questions/37235855/force-perl-xmlin-to-treat-an-empty-tag-as-empty-string/37239932#37239932", "title": "Force perl XMLin to treat an empty tag as empty string?", "body": "<p>First off: <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Why is XML::Simple &quot;Discouraged&quot;?</a></p>\n\n<p><code>XML::Simple</code> doesn't make it easier, it makes it harder. I would advocate <code>XML::Twig</code> or <code>XML::LibXML</code> instead. In <code>XML::Twig</code> getting the 'value' of a node is exactly as you expect:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\nmy $twig = XML::Twig -&gt; parse ( \\*DATA ); \n\nforeach my $node ( $twig -&gt; findnodes('//node/*') ) {\n    print $node -&gt; tag, \" =&gt; \\\"\", $node -&gt; text,\"\\\"\\n\";\n}\n\n__DATA__\n&lt;root&gt;\n&lt;node&gt;\n    &lt;bar&gt;bar1&lt;/bar&gt;\n    &lt;baz&gt;baz1&lt;/baz&gt;\n&lt;/node&gt;\n&lt;node&gt;\n    &lt;bar&gt;bar2&lt;/bar&gt;\n    &lt;baz/&gt;\n&lt;/node&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>bar =&gt; \"bar1\"\nbaz =&gt; \"baz1\"\nbar =&gt; \"bar2\"\nbaz =&gt; \"\"\n</code></pre>\n\n<p>Which you could pass to your constructor. </p>\n"}], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 37236624, "answer_count": 3, "score": 1, "last_activity_date": 1463592107, "creation_date": 1463299234, "last_edit_date": 1463592107, "question_id": 37235855, "link": "https://stackoverflow.com/questions/37235855/force-perl-xmlin-to-treat-an-empty-tag-as-empty-string", "title": "Force perl XMLin to treat an empty tag as empty string?", "body": "<p>Having the following:</p>\n\n<pre><code>perl -MXML::LibXML::Simple -MData::Dumper -E '$h=XMLin(\"&lt;some&gt;&lt;bubu&gt;string&lt;/bubu&gt;&lt;/some&gt;\");say Dumper $h'\n</code></pre>\n\n<p>is parsed as:</p>\n\n<pre><code>$VAR1 = {\n          'bubu' =&gt; 'string'\n        };\n</code></pre>\n\n<p>but the</p>\n\n<pre><code>perl -MXML::LibXML::Simple -MData::Dumper -E '$h=XMLin(\"&lt;some&gt;&lt;bubu/&gt;&lt;/some&gt;\"); say Dumper $h'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>perl -MXML::LibXML::Simple -MData::Dumper -E '$h=XMLin(\"&lt;some&gt;&lt;bubu&gt;&lt;/bubu&gt;&lt;/some&gt;\");say Dumper $h'\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>$VAR1 = {\n          'bubu' =&gt; {}\n        };\n</code></pre>\n\n<p>Is possible to get</p>\n\n<pre><code>$VAR1 = {\n          'bubu' =&gt; \"\"\n        };\n</code></pre>\n\n<p>To be consistent with other string values?</p>\n\n<p>The real code behind the question is like:</p>\n\n<pre><code>package Something {\n    use Moose;\n    has 'bar' =&gt; (is =&gt; 'ro', isa =&gt; 'Str');\n    has 'baz' =&gt; (is =&gt; 'ro', isa =&gt; 'Str');\n}\n\nuse 5.014;\nuse warnings;\nuse XML::LibXML::Simple;\n\nmy $xml = do {local $/, &lt;DATA&gt;};\nmy $hr = XMLin($xml);\nfor my $node( @{$hr-&gt;{node}} ) {\n    my $obj = Something-&gt;new($node);\n}\n__DATA__\n&lt;root&gt;\n&lt;node&gt;\n    &lt;bar&gt;bar1&lt;/bar&gt;\n    &lt;baz&gt;baz1&lt;/baz&gt;\n&lt;/node&gt;\n&lt;node&gt;\n    &lt;bar&gt;bar2&lt;/bar&gt;\n    &lt;baz/&gt;\n&lt;/node&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>which dies with</p>\n\n<pre><code>Attribute (baz) does not pass the type constraint because: Validation failed for 'Str' with value HASH(0x7f91a4a92450) at /opt/anyenv/envs/plenv/versions/5.24.0/lib/perl5/site_perl/5.24.0/darwin-2level/Moose/Object.pm line 24\n    Moose::Object::new('Something', 'HASH(0x7f91a3f3d430)') called at l line 28\n</code></pre>\n\n<p>therefore i need either</p>\n\n<ul>\n<li>treat the empty <code>baz</code> not as <code>{}</code> but as <code>''</code></li>\n<li>or adding some coercion to the package <code>Something</code> to coerce any empty hashrefs <code>{}</code> to empty strings <code>''</code>.</li>\n</ul>\n\n<p>Any idea for the easy way?</p>\n\n<h2>EDIT</h2>\n\n<p>So, the result. The accepted answer remains because it gives the answer to the above question.</p>\n\n<p><em>But</em> must say, after 3 days of studying the new (very complex) module <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\">XML::Twig</a> + learning <code>XPath</code>'s basics i got a solution which is more clear and nicer as the <code>XMLIn</code> solution.</p>\n\n<p>In the <code>XMLIn</code> i needed reorganize the got hashref, because wanted only few elements and with exactly defined structure. (acceptable for an constructor). Such reorganizing (deleting unwanted members, moving deeper hashref's values to arrayrefs and such) is <strong>easy</strong> in perl, but the code isn't nice and needed cope with questions like above.</p>\n\n<p>Using the <a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow\">XML::Twig</a> (and 2 followup questions here) the result was much cleaner and much more readable and much <strong>shorter</strong> as the XMLIn. Really is better sacrifice some time and learn (at least the basics) of the <code>XPath</code> and such...</p>\n"}, {"tags": ["perl", "moose"], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1463267663, "post_id": 37232797, "comment_id": 61995283, "body": "OMG, it looks like that i need RTFM... Thank you! :)"}], "tags": [], "owner": {"reputation": 5423, "user_id": 937922, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VsV8g.png?s=128&g=1", "display_name": "Takkun", "link": "https://stackoverflow.com/users/937922/takkun"}, "is_accepted": true, "score": 3, "last_activity_date": 1463267234, "creation_date": 1463267234, "answer_id": 37232797, "question_id": 37232360, "link": "https://stackoverflow.com/questions/37232360/how-to-use-moosexstorage-for-storing-one-big-hashref/37232797#37232797", "title": "How to use MooseX::Storage for storing one big HashRef?", "body": "<p><code>load()</code> requires the actual value of the key_attr and not just the name of it.</p>\n\n<p>So I believe something like this would work.</p>\n\n<pre><code># the Entry objects are the values in the Some-&gt;packages HasrRef\npackage Entry {\n    use Moose;\n    use warnings;\n    use MooseX::Storage;\n    with Storage(io =&gt; [ 'CHI' =&gt; { key_attr =&gt; 'id', key_prefix =&gt; 'id-' }]);\n    has 'id' =&gt; (is =&gt; 'ro', isa =&gt; 'Int', default =&gt; 0);\n    has 'names' =&gt; (is =&gt; 'ro', isa =&gt; 'ArrayRef[Str]', default =&gt; sub{ [] } );\n}\n\n# want store THIS object into the cache,\n# because the computation of the '_build_packages' is expensive\npackage Some {\n    use Moose;\n    use warnings;\n    use MooseX::Storage;\n    with Storage(io =&gt; [ 'CHI' =&gt; { key_attr =&gt; 'some_id', key_prefix =&gt; 'some_id-' }]);\n\n    has 'some_id' =&gt; (is =&gt; 'ro', isa =&gt; 'Int');\n    has 'packages' =&gt; (is =&gt; 'ro', isa =&gt; 'HashRef', builder =&gt; '_build_packages');\n    sub _build_packages {\n        my $hr;\n        # building the demo 2-element hash here - otherwise very time-expensive code...\n        # each value in the hash an object ISA: Entry \n        $hr-&gt;{$_} = Entry-&gt;new(id =&gt; $_, names =&gt; [\"some\", \"names $_\"]) for (1..2);\n        return $hr;\n    }\n}\n\nuse 5.014;\nuse warnings;\nuse Data::Dumper;\nuse CHI;\n\nmy $cachedir = './testcache';\nmy $cache = CHI-&gt;new(driver =&gt; 'File', root_dir =&gt; $cachedir);\n\nmy $some = Some-&gt;new(some_id =&gt; 100);             # OK\nsay Dumper $some;\nmy $cached = $some-&gt;store(cache =&gt; $cache); # also OK\nsay Dumper $cached;\n\nmy $some2 = Some-&gt;load(100, cache =&gt; $cache);\nsay Dumper $some2-&gt;packages;\n</code></pre>\n"}], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 37232797, "answer_count": 1, "score": 2, "last_activity_date": 1463267234, "creation_date": 1463263347, "last_edit_date": 1463264859, "question_id": 37232360, "link": "https://stackoverflow.com/questions/37232360/how-to-use-moosexstorage-for-storing-one-big-hashref", "title": "How to use MooseX::Storage for storing one big HashRef?", "body": "<p>Want to use <a href=\"https://metacpan.org/pod/MooseX::Storage\" rel=\"nofollow\">MooseX::Storage</a> using the <a href=\"https://metacpan.org/pod/MooseX::Storage::IO::CHI\" rel=\"nofollow\">MooseX::Storage::IO::CHI</a> for storing the following:</p>\n\n<pre><code>has 'packages' =&gt; (is =&gt; 'ro', isa =&gt; 'HashRef', ...);\n</code></pre>\n\n<p>It got the object stored, but I can't retrieve it from the cache.</p>\n\n<p>My demo code is the following...</p>\n\n<pre><code># the Entry objects are the values in the Some-&gt;packages HasrRef\npackage Entry {\n    use Moose;\n    use warnings;\n    use MooseX::Storage;\n    with Storage(io =&gt; [ 'CHI' =&gt; { key_attr =&gt; 'id', key_prefix =&gt; 'id-' }]);\n    has 'id' =&gt; (is =&gt; 'ro', isa =&gt; 'Int', default =&gt; 0);\n    has 'names' =&gt; (is =&gt; 'ro', isa =&gt; 'ArrayRef[Str]', default =&gt; sub{ [] } );\n}\n\n# want store THIS object into the cache,\n# because the computation of the '_build_packages' is expensive\npackage Some {\n    use Moose;\n    use warnings;\n    use MooseX::Storage;\n    with Storage(io =&gt; [ 'CHI' =&gt; { key_attr =&gt; 'packages', key_prefix =&gt; 'package-' }]);\n\n    has 'packages' =&gt; (is =&gt; 'ro', isa =&gt; 'HashRef', builder =&gt; '_build_packages');\n    sub _build_packages {\n        my $hr;\n        # building the demo 2-element hash here - otherwise very time-expensive code...\n        # each value in the hash an object ISA: Entry \n        $hr-&gt;{$_} = Entry-&gt;new(id =&gt; $_, names =&gt; [\"some\", \"names $_\"]) for (1..2);\n        return $hr;\n    }\n}\n\nuse 5.014;\nuse warnings;\nuse Data::Dumper;\nuse CHI;\n\nmy $cachedir = './testcache';\nmy $cache = CHI-&gt;new(driver =&gt; 'File', root_dir =&gt; $cachedir);\n\nmy $some = Some-&gt;new();             # OK\nsay Dumper $some;\nmy $cached = $some-&gt;store(cache =&gt; $cache); # also OK\nsay Dumper $cached;\n\n# doesn't loads the 'packages'...\nmy $some2 = Some-&gt;load('packages', cache =&gt; $cache);    #returns undef :(\nsay Dumper $some2;\n</code></pre>\n\n<p>the above code dumps the following:</p>\n\n<pre><code>$VAR1 = bless( {\n                 'packages' =&gt; {\n                                 '1' =&gt; bless( {\n                                                 'names' =&gt; [\n                                                              'some',\n                                                              'names 1'\n                                                            ],\n                                                 'id' =&gt; 1\n                                               }, 'Entry' ),\n                                 '2' =&gt; bless( {\n                                                 'id' =&gt; 2,\n                                                 'names' =&gt; [\n                                                              'some',\n                                                              'names 2'\n                                                            ]\n                                               }, 'Entry' )\n                               }\n               }, 'Some' );\n\n$VAR1 = {\n          '__CLASS__' =&gt; 'Some',\n          'packages' =&gt; {\n                          '2' =&gt; {\n                                   '__CLASS__' =&gt; 'Entry',\n                                   'names' =&gt; [\n                                                'some',\n                                                'names 2'\n                                              ],\n                                   'id' =&gt; 2\n                                 },\n                          '1' =&gt; {\n                                   'id' =&gt; 1,\n                                   '__CLASS__' =&gt; 'Entry',\n                                   'names' =&gt; [\n                                                'some',\n                                                'names 1'\n                                              ]\n                                 }\n                        }\n        };\n\n$VAR1 = undef;\n</code></pre>\n\n<p>So,it looks like as the <code>packages</code> got stored in the cache. But the latest <code>undef</code> shows, than the</p>\n\n<pre><code>my $some2 = Some-&gt;load('packages', cache =&gt; $cache);\n</code></pre>\n\n<p>doesn't works as I expecting.</p>\n\n<p>Could anyone help?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1463262284, "post_id": 37232011, "comment_id": 61994007, "body": "You can try running it from the commandline with <code>.&#47;YourScript.cgi &#39;rno=20&#39;</code>"}, {"owner": {"reputation": 478, "user_id": 3261294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e04c85709847a658e1699565b21a363?s=128&d=identicon&r=PG&f=1", "display_name": "BarneySchmale", "link": "https://stackoverflow.com/users/3261294/barneyschmale"}, "edited": false, "score": 0, "creation_date": 1463262376, "post_id": 37232011, "comment_id": 61994027, "body": "I tried this with Perl 5.22.1 and CGI.pm 4.26. The snippet works when called as &#39;perl test_cgi.pl nro=20&#39;. Is your Webserver set up correctly? For testing you could dump the result of calling param()."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1463264416, "post_id": 37232011, "comment_id": 61994545, "body": "Use <code>defined</code> to test if the value is defined."}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1463265472, "post_id": 37232011, "comment_id": 61994778, "body": "It was my bad.. the script did work, but it wouldn&#39;t work when rno=0 and as a result I thought it was broken.. in the context I was testing, with a live database, I couldn&#39;t change the parameter value and didn&#39;t realize it was a glitch with the system being unable to differentiate between 0 and null."}], "owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1463264399, "answer_count": 0, "score": 0, "last_activity_date": 1463264360, "creation_date": 1463260928, "last_edit_date": 1463264360, "question_id": 37232011, "link": "https://stackoverflow.com/questions/37232011/changes-in-cgi-pm-function-param-behavior", "closed_reason": "Duplicate", "title": "Changes in CGI.pm function param() behavior?", "body": "<p>I'm migrating a Perl script from Perl 5.1 and it involves the following code which no longer appears to work:</p>\n\n<pre><code>    #!/usr/bin/perl\n    use CGI ':standard';\n    print header;\n\n    if (param()) {\n      if (!(param('rno'))) {     \n       print ('Improper reference!');\n      }\n      $rno=param('rno');\n    ## .. etc\n    }\n</code></pre>\n\n<p>For example assuming I call the script from the www as host.com/cgi/myscript.pl?rno=20</p>\n\n<p>the script should recognize the name/value pair and store the value 20 in the variable $rno and it no longer does.</p>\n\n<p>Actually I think this ended up being a trick question!</p>\n\n<p>In my example, I arbitrarily used a value of 20, but when I was testing, I had the query set to <code>rno=0</code> - and I suspect that triggered the behavior differently than what I anticipated.</p>\n\n<p>I guess I need to tell the difference between the rno value being empty and \"0\"</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 0, "last_activity_date": 1463255359, "last_edit_date": 1463255359, "creation_date": 1463254150, "answer_id": 37230973, "question_id": 37230622, "link": "https://stackoverflow.com/questions/37230622/select-lines-on-tab-delimited-file/37230973#37230973", "title": "select lines on tab delimited file", "body": "<p>All of your tests should be inside the while loop, not outside. You use too much variables that seem useless. Using <code>$_</code> will make your code shorter and more readable:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nprint \"Type in the path of the file:\\n\";\nmy $filename = &lt;&gt;;\nchomp($filename); \n\nopen my $fh, '&lt;', $filename\n    or die \"$!\"; \n\nwhile(&lt;$fh&gt;) {\n    # split $_ (the current line) on whitespaces\n    my @fields = split;\n    # print $_ if the condition is true  \n    print if ($fields[2] =~ /^chr[XY]$/ and $fields[3] eq \"+\");\n}\n\nclose($fh);\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6295895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1053659371336814/picture?type=large", "display_name": "Tomb", "link": "https://stackoverflow.com/users/6295895/tomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 37230973, "answer_count": 1, "score": 1, "last_activity_date": 1463255359, "creation_date": 1463251942, "question_id": 37230622, "link": "https://stackoverflow.com/questions/37230622/select-lines-on-tab-delimited-file", "title": "select lines on tab delimited file", "body": "<p>I'm trying to print only lines that have chrX or chrY and are positive in column 4 in a file separated by \\t.</p>\n\n<p>input</p>\n\n<pre><code>1373    NM_016303       chrX    +       103356451       10335846\n1059    NM_015666       chr20   +       62183024        62202754\n116     NM_015340       chr3    +       45388582        45548836 \n10      NM_001206850    chrY    -       14522607        14843968   \n</code></pre>\n\n<p>output </p>\n\n<pre><code>1373    NM_016303       chrX    +       103356451       10335846\n</code></pre>\n\n<p>my code</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nprint \"type in the path of the file\\n\";\nmy $file_name = &lt;&gt;;\nchomp($file_name); \n\nopen (FILE, $file_name) or die \"#!\"; \n\nmy @line;\nmy @array1;\n\nwhile(&lt;FILE&gt;){\n    @line = split(/\\t/);\n    $array1[2]=$line[2];\n    $array1[3]=$line[3];\n}\nmy $positive;\nmy $chr;\n\n#select only positives\nif ($line[3] =~ m/\\+/i ) {\n    $positive = $array1[3];\n} \n#only chrX or chrY\nelsif ($line[2] =~ m/chrX/i or $line[2] =~ m/chrY/i ) {\n    $chr = $array1[2];\n}\nelse {\n    print \"no chrY or chrX\\n\";\n}\nprint \"$chr $positive\\n\";\n\nclose(FILE);\nexit;\n</code></pre>\n\n<p>but I get an error </p>\n\n<pre><code>Use of uninitialized value $chr in concatenation (.) or string at file.pl line 34, &lt;FILE&gt; line 61287.\n</code></pre>\n\n<p>I've tried some modifications but it was only printing</p>\n\n<pre><code>chrX  +\n</code></pre>\n\n<p>and not the whole line. What should I change? Thanks.</p>\n"}, {"tags": ["perl", "selenium", "xpath", "selenium-webdriver"], "comments": [{"owner": {"reputation": 4546, "user_id": 2781701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5745f276004f077454f27cde70858a1d?s=128&d=identicon&r=PG", "display_name": "Rafael Almeida", "link": "https://stackoverflow.com/users/2781701/rafael-almeida"}, "edited": false, "score": 0, "creation_date": 1463240615, "post_id": 37228553, "comment_id": 61987007, "body": "try <code>my $sel2_options = $sel2-&gt;find_elements(&#39;&#47;&#47;option&#39;);</code>"}, {"owner": {"reputation": 846, "user_id": 385390, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b41a2fc080cdea0887394c53f4108dfb?s=128&d=identicon&r=PG", "display_name": "bliako", "link": "https://stackoverflow.com/users/385390/bliako"}, "reply_to_user": {"reputation": 4546, "user_id": 2781701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5745f276004f077454f27cde70858a1d?s=128&d=identicon&r=PG", "display_name": "Rafael Almeida", "link": "https://stackoverflow.com/users/2781701/rafael-almeida"}, "edited": false, "score": 0, "creation_date": 1463241171, "post_id": 37228553, "comment_id": 61987199, "body": "nope, in my system, there is no method &#39;find_elements&#39; in sel2 (Selenium::Remote::WebElement)"}, {"owner": {"reputation": 8483, "user_id": 5318223, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/be47da4995eb4e8dff0ab4637e5773d6?s=128&d=identicon&r=PG&f=1", "display_name": "Kiril S.", "link": "https://stackoverflow.com/users/5318223/kiril-s"}, "edited": false, "score": 0, "creation_date": 1463250891, "post_id": 37228553, "comment_id": 61990689, "body": "I suspect problem is with <code>$sel2</code> (maybe it&#39;s null?). Don&#39;t you need to escape <code>@</code> in xpath, i.e.: <code>my $sel2 = $driver-&gt;find_element(&#39;&#47;&#47;select[\\@name=&quot;SEL2&quot;]&#39;);</code>? Example says so at least: <a href=\"http://search.cpan.org/~chowes/Selenium-Remote-Driver-0.17/lib/Selenium/Remote/Driver.pm#find_child_elements\" rel=\"nofollow noreferrer\">search.cpan.org/~chowes/Selenium-Remote-Driver-0.17/lib/&hellip;</a>"}, {"owner": {"reputation": 846, "user_id": 385390, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b41a2fc080cdea0887394c53f4108dfb?s=128&d=identicon&r=PG", "display_name": "bliako", "link": "https://stackoverflow.com/users/385390/bliako"}, "edited": false, "score": 0, "creation_date": 1463320582, "post_id": 37228553, "comment_id": 62007203, "body": "just for the record, escape the <code>@</code> when inside double-quotes and will be interpolated by perl. When inside single quotes like above, no need to escape."}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 385390, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b41a2fc080cdea0887394c53f4108dfb?s=128&d=identicon&r=PG", "display_name": "bliako", "link": "https://stackoverflow.com/users/385390/bliako"}, "edited": false, "score": 0, "creation_date": 1463320330, "post_id": 37232490, "comment_id": 62007111, "body": "Please downvote me! There is an example right in CPAN documentation Kiril S. had cited for <code>find_child_element()</code> and I have read and re-read: Usage: <code>my $elem1 = $driver-&gt;find_element(&quot;&#47;&#47;select[\\@name=&#39;ned&#39;]&quot;);</code> <code># note the usage of .&#47; when searching for a child element instead of &#47;&#47;</code> <code>my $child = $driver-&gt;find_child_element($elem1, &quot;.&#47;option[\\@value=&#39;es_ar&#39;]&quot;);</code> However the example in the same document, section of <code>find_child_elements()</code> says thus: <code>Usage: my $elem1 = $driver-&gt;find_element(&quot;&#47;&#47;select[\\@name=&#39;ned&#39;]&quot;); my $child = $driver-&gt;find_child_elements($elem1, &quot;&#47;&#47;option&quot;);</code>"}, {"owner": {"reputation": 846, "user_id": 385390, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b41a2fc080cdea0887394c53f4108dfb?s=128&d=identicon&r=PG", "display_name": "bliako", "link": "https://stackoverflow.com/users/385390/bliako"}, "edited": false, "score": 0, "creation_date": 1463322342, "post_id": 37232490, "comment_id": 62007842, "body": "... needless to say I followed the example in section find_child_elements() instead. Just to share my experience so far with Selenium (which is cool tool): I found it very useful to add a SIG handler to quit selenium client in case of a ctrl-C or a die(), otherwise it remains running in the background, notice the <code>__DIE__</code> handler for each die() Selenium is throwing:` $SIG{INT} = $SIG{HUP} = $SIG{<code>__DIE__</code>} = $SIG{TERM} = (sub{$selenium-&gt;quit});` Thanks for your help."}], "tags": [], "owner": {"reputation": 83665, "user_id": 2998271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/B7vUA.png?s=128&g=1", "display_name": "har07", "link": "https://stackoverflow.com/users/2998271/har07"}, "is_accepted": true, "score": 2, "last_activity_date": 1463264459, "creation_date": 1463264459, "answer_id": 37232490, "question_id": 37228553, "link": "https://stackoverflow.com/questions/37228553/why-find-child-elements-ignores-first-parameter-in-perl-selenium/37232490#37232490", "title": "Why find_child_elements ignores first parameter in Perl Selenium?", "body": "<p><code>/</code> at the beginning of an XPath always references document's root node. That's why you got all <code>option</code> elements instead of <code>option</code>s from <code>$sel2</code> only. Try adding a <code>.</code> at the beginning of the XPath to make it relative to current element context :</p>\n\n<pre><code>my $sel2_options = $driver-&gt;find_child_elements($sel2, './/option');\n</code></pre>\n"}], "owner": {"reputation": 846, "user_id": 385390, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b41a2fc080cdea0887394c53f4108dfb?s=128&d=identicon&r=PG", "display_name": "bliako", "link": "https://stackoverflow.com/users/385390/bliako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 37232490, "answer_count": 1, "score": 2, "last_activity_date": 1463264611, "creation_date": 1463240087, "last_edit_date": 1463264611, "question_id": 37228553, "link": "https://stackoverflow.com/questions/37228553/why-find-child-elements-ignores-first-parameter-in-perl-selenium", "title": "Why find_child_elements ignores first parameter in Perl Selenium?", "body": "<p>Using perl 5.22, and Selenium::Remote::WebElement::VERSION = '0.2701' on OSX and Firefox. Trying to use Selenium for the first time (and XPath too!).</p>\n\n<p>My problem arises when I try to get a given \"&lt; select >\" child and then enumerate all its \"&lt; option \">s as thus:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Selenium::Remote::Driver;\nuse Selenium::Remote::WebElement;\nuse URI::file;\n\nmy $extraCaps = {\"browser\" =&gt; \"Firefox\", \"browser_version\" =&gt; \"42.0\",\"os\" =&gt; \"OSX\",\"os_version\" =&gt; \"7\",\"resolution\" =&gt; \"1024x768\"};\n\nmy $driver = new Selenium::Remote::Driver('remote_server_addr' =&gt; 'localhost', 'port' =&gt; '4444','extra_capabilities' =&gt; $extraCaps);\n$driver-&gt;get(URI::file-&gt;new_abs('./test.html')-&gt;as_string);\nsleep(2);\n# get &lt;select&gt; named 'SEL2':\nmy $sel2 = $driver-&gt;find_element('//select[@name=\"SEL2\"]');\n# this works, but it's not what i want: my $sel2_options = $driver-&gt;find_child_elements($sel2, '//select[@name=\"SEL2\"]//option');\n# get all the options for **that specific** &lt;select&gt;\nmy $sel2_options = $driver-&gt;find_child_elements($sel2, '//option');\nforeach my $ap (@$sel2_options){\n    print \"found option \".$ap-&gt;get_text().\"\\n\";\n}\nsleep(1);\n$driver-&gt;quit();\n</code></pre>\n\n<p>The input html file (test.html) is:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;select name=\"SEL1\" id=\"ID1\"&gt;\n    &lt;option value=\"SEL1-option11\"&gt;SEL1-option1&lt;/option&gt;\n    &lt;option value=\"SEL1-option12\"&gt;SEL1-option2&lt;/option&gt;\n    &lt;option value=\"SEL1-option13\"&gt;SEL1-option3&lt;/option&gt;\n&lt;/select&gt;\n&lt;select name=\"SEL2\" id=\"ID2\"&gt;\n    &lt;option value=\"SEL2-option1\"&gt;SEL2-option1&lt;/option&gt;\n    &lt;option value=\"SEL2-option2\"&gt;SEL2-option2&lt;/option&gt;\n    &lt;option value=\"SEL2-option3\"&gt;SEL2-option2&lt;/option&gt;\n&lt;/select&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>And the output I get is:</p>\n\n<pre><code>found option SEL1-option1\nfound option SEL1-option2\nfound option SEL1-option3\nfound option SEL2-option1\nfound option SEL2-option2\nfound option SEL2-option2\n</code></pre>\n\n<p>Shouldn't I get <em>only</em> the options for SEL2 listed?</p>\n\n<p>Am I doing something wrong? It seems to me that for this case, find_child_elements ignores its first parameter which is - as i understand it - the WebElement to apply the specified selector (//option) to it.</p>\n\n<p>On the other hand this works as expected, but it somehow defies the purpose:</p>\n\n<pre><code>my $sel2_options = $driver-&gt;find_child_elements($sel2, '//select[@name=\"SEL2\"]//option');\n</code></pre>\n\n<p>many thanks,\nbliako</p>\n"}, {"tags": ["perl", "scoping", "lexical-scope"], "answers": [{"comments": [{"owner": {"reputation": 13138, "user_id": 45978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d0c6b3923ad69ce9a13dbe8775b7b3dc?s=128&d=identicon&r=PG", "display_name": "Joe Casadonte", "link": "https://stackoverflow.com/users/45978/joe-casadonte"}, "edited": false, "score": 1, "creation_date": 1463237856, "post_id": 37228037, "comment_id": 61986013, "body": "The distinction between initialization and simple assignment is key to helping me comprehend this, instead of just knowing it -- thank you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13138, "user_id": 45978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d0c6b3923ad69ce9a13dbe8775b7b3dc?s=128&d=identicon&r=PG", "display_name": "Joe Casadonte", "link": "https://stackoverflow.com/users/45978/joe-casadonte"}, "edited": false, "score": 0, "creation_date": 1463239616, "post_id": 37228037, "comment_id": 61986684, "body": "It wouldn&#39;t make sense for <code>our</code> to have an initializer, seeing as <code>our $foo</code> creates a lexically-scoped alias to the package variable of the same name (just like <code>\\my $foo = \\$PACKAGE::foo;</code> does). That said, it&#39;s just an assignment for <code>my</code> too. (Why are you using <code>our</code> in the first place???)"}, {"owner": {"reputation": 13138, "user_id": 45978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d0c6b3923ad69ce9a13dbe8775b7b3dc?s=128&d=identicon&r=PG", "display_name": "Joe Casadonte", "link": "https://stackoverflow.com/users/45978/joe-casadonte"}, "edited": false, "score": 0, "creation_date": 1463408768, "post_id": 37228037, "comment_id": 62039658, "body": "I needed a packaged-scoped variable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 13138, "user_id": 45978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d0c6b3923ad69ce9a13dbe8775b7b3dc?s=128&d=identicon&r=PG", "display_name": "Joe Casadonte", "link": "https://stackoverflow.com/users/45978/joe-casadonte"}, "edited": false, "score": 1, "creation_date": 1463409208, "post_id": 37228037, "comment_id": 62039937, "body": "Extremely unlikely. Almost guaranteed to be a bug (very poor design), or use of <code>our</code> when <code>my</code> would work equally well."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1463243406, "last_edit_date": 1463243406, "creation_date": 1463237163, "answer_id": 37228037, "question_id": 37227905, "link": "https://stackoverflow.com/questions/37227905/variables-declared-with-our-and-begin-block-interactions/37228037#37228037", "title": "Variables declared with our and BEGIN block interactions", "body": "<p>First of all, it's not an initializer; it's a plain old assignment. It happens when the code is executed, not when the variable is created.</p>\n\n<p>Secondly, <code>BEGIN</code> blocks are evaluated as soon as the block is compiled.</p>\n\n<p>As such, what you wrote is basically equivalent to the following:</p>\n\n<pre><code># Compile phase\nuse strict;\nuse warnings;    \nour $foo;\n$foo = 2;\nour $bar;\n$bar = 3;\n\n# Runtime phase\n($foo) = 0;\n($bar);\nprint \"FOO: &lt;$foo&gt;\\n\";\nprint \"BAR: &lt;$bar&gt;\\n\";\n</code></pre>\n\n<hr>\n\n<p>More precisely,</p>\n\n<ol>\n<li>Compile phase\n\n<ol>\n<li>Compile <code>use strict;</code>.</li>\n<li>Execute <code>require strict;</code>.</li>\n<li>Execute <code>import strict;</code>.</li>\n<li>Compile <code>use warnings;</code>.</li>\n<li>Execute <code>require warnings;</code>.</li>\n<li>Execute <code>import warnings;</code>.</li>\n<li>Compile <code>our($foo) = 0;</code>. (Only creates <code>$foo</code>.)</li>\n<li>Compile <code>BEGIN</code> block:\n\n<ol>\n<li>Compile <code>$foo = 2;</code>.</li>\n</ol></li>\n<li>Execute <code>BEGIN</code> block:\n\n<ol>\n<li><strong>Execute <code>$foo = 2;</code></strong>.</li>\n</ol></li>\n<li>Compile <code>our($bar);</code>. (Only creates <code>$bar</code>.)</li>\n<li>Compile <code>BEGIN</code> block:\n\n<ol>\n<li>Compile <code>$bar = 3;</code>.</li>\n</ol></li>\n<li>Execute <code>BEGIN</code> block:\n\n<ol>\n<li><strong>Execute <code>$bar = 3;</code></strong>.</li>\n</ol></li>\n<li>Compile <code>print \"FOO: &lt;$foo&gt;\\n\";</code>.</li>\n<li>Compile <code>print \"BAR: &lt;$bar&gt;\\n\";</code>.</li>\n</ol></li>\n<li>Runtime phase\n\n<ol>\n<li><strong>Execute <code>($foo) = 0;</code>.</strong></li>\n<li>Execute <code>($bar);</code>.</li>\n<li>Execute <code>print \"FOO: &lt;$foo&gt;\\n\";</code></li>\n<li>Execute <code>print \"BAR: &lt;$bar&gt;\\n\";</code></li>\n</ol></li>\n</ol>\n\n<p>As you can see,</p>\n\n<ul>\n<li>You assign <code>2</code> to <code>$foo</code> in 1.9.1, then you assign <code>0</code> to <code>$foo</code> in 2.1.</li>\n<li>You assign <code>3</code> to <code>$bar</code> in 1.12.1.</li>\n</ul>\n"}], "owner": {"reputation": 13138, "user_id": 45978, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/d0c6b3923ad69ce9a13dbe8775b7b3dc?s=128&d=identicon&r=PG", "display_name": "Joe Casadonte", "link": "https://stackoverflow.com/users/45978/joe-casadonte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 37228037, "answer_count": 1, "score": 2, "last_activity_date": 1463251190, "creation_date": 1463236402, "last_edit_date": 1463251190, "question_id": 37227905, "link": "https://stackoverflow.com/questions/37227905/variables-declared-with-our-and-begin-block-interactions", "title": "Variables declared with our and BEGIN block interactions", "body": "<p>Why would an uninitialized variable behave/interact differently than an initialized variable in this situation:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nour($foo) = 0;\nBEGIN {\n        $foo = 2;\n}\n\nour($bar);\nBEGIN {\n        $bar = 3;\n}\n\nprint \"FOO: &lt;$foo&gt;\\n\";\nprint \"BAR: &lt;$bar&gt;\\n\";\n</code></pre>\n\n<p>results in:</p>\n\n<pre><code>$ perl test.pl\nFOO: &lt;0&gt;\nBAR: &lt;3&gt;\n</code></pre>\n\n<p>Perl version:</p>\n\n<pre><code>$ perl -v\n\nThis is perl 5, version 22, subversion 0 (v5.22.0) built for x86_64-linux\n</code></pre>\n"}, {"tags": ["perl", "tcl", "expect"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1463226866, "post_id": 37226273, "comment_id": 61982570, "body": "Did you install TCL compiler in windows.?"}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1463227289, "post_id": 37226273, "comment_id": 61982688, "body": "Yeah, i&#39;ve installed (tclsh86), its not showing any error, but the complete tcl(expect) script is not executing"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1463231600, "post_id": 37226273, "comment_id": 61984053, "body": "how do you know it&#39;s not running all the commands? show us something."}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "edited": false, "score": 0, "creation_date": 1463231912, "post_id": 37226273, "comment_id": 61984150, "body": "Even I tried to run on windows cmd, its giving the same partial output of TCL(expect) script. What can i do for executing the complete script?"}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1463232044, "post_id": 37226273, "comment_id": 61984192, "body": "@glenn, In unix i can see the complete output, but if i try to run on windows, the complete thing is not coming as in unix."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1463232760, "post_id": 37226273, "comment_id": 61984433, "body": "add <code>exp_internal 1</code> near the top of your expect script and see what&#39;s in the debugging output"}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "edited": false, "score": 0, "creation_date": 1463233218, "post_id": 37226273, "comment_id": 61984578, "body": "tried it just now...shows me the diagnostics for every line of the partial output and it comes out of the script after that"}], "answers": [{"tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": false, "score": 0, "last_activity_date": 1463234460, "creation_date": 1463234460, "answer_id": 37227598, "question_id": 37226273, "link": "https://stackoverflow.com/questions/37226273/executing-tcl-expect-script-using-perl-on-windows/37227598#37227598", "title": "Executing TCL (expect script) using perl on windows", "body": "<p>On Unix Expect works using virtual terminals. By contrast, Expect on Windows uses the debugging subsystem. (There's <em>nothing</em> like virtual terminals on Windows.) This has the down-side that programs that are marked as being impossible to debug (i.e., some system programs, notably including <code>telnet.exe</code> though <code>ftp.exe</code> might also be on that list) cannot be automated by Expect at all. The OS just refuses to let Expect connect to the process.</p>\n\n<p>Is this what is happening to you? I can't tell from the minimal information you've given, but it is by far the most common reason for problems with porting an Expect script between platforms (once you've taken into account mundane things like different paths and programs that just aren't there on all platforms).</p>\n\n<p>The up-side is that both Tcl and Perl are quite capable of talking directly to anything that you'd use <code>telnet</code> or <code>ftp</code> to talk to (as both are entirely proficient at TCP/IP). In fact, both are probably better at doing it natively than anything you'd likely achieve through use of Expect.</p>\n"}], "owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463234460, "creation_date": 1463226474, "last_edit_date": 1463233992, "question_id": 37226273, "link": "https://stackoverflow.com/questions/37226273/executing-tcl-expect-script-using-perl-on-windows", "title": "Executing TCL (expect script) using perl on windows", "body": "<p>I'm running the tcl(which has expect script) using perl with, </p>\n\n<pre><code>system(\"C:/Tcl/bin/tclsh86 C:/Users/sysadmin/desktop/expect.tcl\");\n</code></pre>\n\n<p>It's not executing the all commands in the script, but its working fine on ubuntu.\nWhat command should i use to run this completely using perl on Windows?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "edited": false, "score": 2, "creation_date": 1463208819, "post_id": 37223504, "comment_id": 61977406, "body": "You also have a typo in your program. $Size and $size refer to different variables. It is also recommended to add &#39;use strict;&#39; and &#39;use warnings;&#39; at the top of your program to warn you when possible errors like this happen."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1463209521, "post_id": 37223504, "comment_id": 61977596, "body": "Note that <code>for ( $i = 0; $i &lt; $size; $i++ ) { ... }</code> is generally written <code>for my $i ( 0 .. $#array) { ... }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "edited": false, "score": 0, "creation_date": 1463233756, "post_id": 37223602, "comment_id": 61984747, "body": "As i specified as a note in my question i am using the eclipse ide with perl plugin. and cctrl+z is working some times and it is not some times."}, {"owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "reply_to_user": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "edited": false, "score": 0, "creation_date": 1463237658, "post_id": 37223602, "comment_id": 61985944, "body": "I&#39;m not sure about Eclipse but it should be running your program in a shell. Are you running Eclipse in Linux or Mac or Windows PC?"}], "tags": [], "owner": {"reputation": 548, "user_id": 1218919, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/245a9a6d7af44d3820591435f058fbd8?s=128&d=identicon&r=PG", "display_name": "darkgrin", "link": "https://stackoverflow.com/users/1218919/darkgrin"}, "is_accepted": false, "score": 5, "last_activity_date": 1463209157, "last_edit_date": 1463209157, "creation_date": 1463208671, "answer_id": 37223602, "question_id": 37223504, "link": "https://stackoverflow.com/questions/37223504/what-is-the-end-of-line-character-that-stops-reading-data-into-an-array-from-the/37223602#37223602", "title": "What is the end of line character that stops reading data into an array from the keyboard?", "body": "<p><a href=\"http://perldoc.perl.org/functions/readline.html\" rel=\"nofollow\"><code>perldoc -f readline</code></a> says that in list context, <code>readline</code> (which is the <code>&lt;&gt;</code> operator you are using) reads until the end-of-file is reached and returns a list of lines.</p>\n\n<p>Are you running your program using a shell like bash? If that's the case then the end-of-file character is Ctrl-D (hold <kbd>CTRL</kbd> and press <kbd>D</kbd>).</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 2, "last_activity_date": 1463226168, "last_edit_date": 1463226168, "creation_date": 1463225648, "answer_id": 37226128, "question_id": 37223504, "link": "https://stackoverflow.com/questions/37223504/what-is-the-end-of-line-character-that-stops-reading-data-into-an-array-from-the/37226128#37226128", "title": "What is the end of line character that stops reading data into an array from the keyboard?", "body": "<p>In every shell, <code>EOF</code> has to be the first character in response to a <code>readline</code>. So, the user would have to type <kbd>CTRL-Z</kbd> (DOS/Windows shells) or <kbd>CTRL-D</kbd> (*nixy shells) as the first character in a line to terminate input.</p>\n\n<p>This is because you are using a slurpy method of reading from standard input by doing <code>@array = &lt;STDIN&gt;</code>. That means your program will try to read lines from standard input until input is exhausted. Your program depends on the shell/terminal to determine when the input is exhausted (I am ignoring file redirection).</p>\n\n<pre>$ ./myprog\nsome input<kbd>\u23ce</kbd>\nsome more input<kbd>\u23ce</kbd>\n<kbd>CTRL-D</kbd></pre>\n\n<p>would work. On the other hand,</p>\n\n<pre>$ ./myprog\nsome input<kbd>\u23ce</kbd>\nsome more input<kbd>CTRL-D</kbd></pre>\n\n<p>would not. In this case, pressing <kbd>CTRL-D</kbd> twice may be sufficient to terminate input. However, in DOS/Windows shells, pressing <kbd>CTRL-Z</kbd> multiple times is not going to have that effect.</p>\n\n<p>If you switch to reading from <code>&lt;STDIN&gt;</code> line by line, your program can do things in response to each line entered instead of having to wait for all the lines to be read. E.g.:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy @input;\n\nwhile (my $line = &lt;STDIN&gt;) {\n    last if $line !~ /\\S/; # stop reading if input is all whitespace\n    push @input, $line;\n}\n\nfor my $line ( @input ) {\n    print $line;\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1463226168, "creation_date": 1463207908, "last_edit_date": 1592644375, "question_id": 37223504, "link": "https://stackoverflow.com/questions/37223504/what-is-the-end-of-line-character-that-stops-reading-data-into-an-array-from-the", "title": "What is the end of line character that stops reading data into an array from the keyboard?", "body": "<p>When I want to read the data from the keyboard in Perl I use the code below, but it keeps on waiting for data.</p>\n<p>What character will inform the program that the user has completed their input?</p>\n<h3>program</h3>\n<pre><code>@array = &lt;STDIN&gt;;\n$Size = @array;\n\nfor ( $i = 0; $i &lt; $size; $i++ ) {\n   print &quot;$i&quot;.&quot;$array[$i]&quot;;\n}\n</code></pre>\n<p><strong>Note:</strong> Sometimes when I use Ctrl-Z it shows the correct result, but this is not working all the time. I am using the Eclipse IDE with Perl plugin.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 0, "creation_date": 1463181614, "post_id": 37220706, "comment_id": 61972183, "body": "I would also like to know if two arrays are the same array, two hashes are the same hash, etc."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "reply_to_user": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "edited": false, "score": 2, "creation_date": 1463182044, "post_id": 37220706, "comment_id": 61972300, "body": "Do you often have arrays that are the same array with different names? I think usually this would only come up with references. Of course it is possible to make different names refer to the same array with stuff like <code>*a=\\@b</code>. In that case I think you could still use reference comparison: <code>\\@a == \\@b</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463280899, "post_id": 37220706, "comment_id": 61997512, "body": "Note: That won&#39;t work for objects that overload numification"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463282825, "post_id": 37220706, "comment_id": 61997839, "body": "Note: To check if changing one variable could change another, one also wants to check for magic"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463283658, "post_id": 37220706, "comment_id": 61997979, "body": "If you have two arrays, you wouldn&#39;t want to just check if the arrays are the same, but whether they share any elements."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 7, "last_activity_date": 1463201904, "last_edit_date": 1463201904, "creation_date": 1463181576, "answer_id": 37220706, "question_id": 37220558, "link": "https://stackoverflow.com/questions/37220558/how-can-i-check-for-reference-equality-in-perl/37220706#37220706", "title": "How can I check for reference equality in Perl?", "body": "<p>If you know both values are references, you can use the numeric equality operator <code>==</code> to compare them.</p>\n\n<p>If you aren't sure that both values are references, you can test them with <code>ref</code> first.</p>\n\n<pre><code>if (ref($x) and ref($y) and $x==$y) {\n  print \"\\$x and \\$y are references to the same thing.\\n\"\n}\n</code></pre>\n\n<p>This is documented in <a href=\"http://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow\">perlref</a>, which says</p>\n\n<blockquote>\n  <p>Using a string or number as a reference produces a symbolic reference, as explained above.  Using a reference as a number produces an integer representing its storage location in memory.  The only useful thing to be done with this is to compare two references numerically to see whether they refer to the same location.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1463283170, "post_id": 37234100, "comment_id": 61997902, "body": "Not sure if it matters, just pointing out that these <code>perl -E</code> samples defeat syntax highlighting :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1463359994, "last_edit_date": 1463359994, "creation_date": 1463281048, "answer_id": 37234100, "question_id": 37220558, "link": "https://stackoverflow.com/questions/37220558/how-can-i-check-for-reference-equality-in-perl/37234100#37234100", "title": "How can I check for reference equality in Perl?", "body": "<blockquote>\n  <p><em>there might be times when it is desirable to know when two objects are identical \u2013 that is, modifying one will effect the other. How can one do that?</em></p>\n</blockquote>\n\n<p>Here's an example of where such a check is used:</p>\n\n<pre><code>*d = \\$x;              # Makes $d an alias for $x.\n($x, $y) = ($y, $x);   # Requires creating temporary copies.\n($x, $y) = ($m, $n);   # Usually simple ($x=$m; $y=$m;)\n($x, $y) = ($c, $d);   # Requires creating temporary copies.\n</code></pre>\n\n<p>You can see that check <a href=\"http://perl5.git.perl.org/perl.git/blob/be2c0c650b028f54e427f2469a59942edfdff8a9:/pp_hot.c#l1268\" rel=\"nofollow\">here</a>.</p>\n\n<p>Not only do you want to check if both \"objects\" are the same, you want to check if they're magical. In the above example, the variables on the LHS are checked for \"set\" magic, and the variables on the RHS are checked for \"get\" magic.</p>\n\n<p>To check if assigning to <code>$dst</code> could change <code>$src</code>, use the following:</p>\n\n<pre><code>use B            qw( svref_2object SVs_GMG SVs_SMG );\nuse Scalar::Util qw( refaddr );\n\nsub SvGMAGICAL { !!( svref_2object($_[0])-&gt;FLAGS &amp; SVs_GMG ) }\nsub SvSMAGICAL { !!( svref_2object($_[0])-&gt;FLAGS &amp; SVs_SMG ) }\n\nsub could_be_common {\n   my ($dst_ref, $src_ref) = @_;\n   my $dst_addr = refaddr($dst_ref) or die(\"usage\");\n   my $src_addr = refaddr($src_ref) or die(\"usage\");\n   return $dst_addr == $src_addr || SvSMAGICAL($dst_ref) || SvGMAGICAL($src_ref);\n}\n\nsay could_be_common($dst, $src);\n</code></pre>\n\n<p>Or for the above example,</p>\n\n<pre><code>sub could_be_common {\n   my ($dst_ref, $src_refs) = @_;\n   for my $dst_ref (@$dst_refs) {\n      return 1 if SvRMAGICAL($dst_ref);\n   }\n\n   for my $src_ref (@$src_refs) {\n      return 1 if SvGMAGICAL($src_ref);\n   }\n\n   for my $dst_ref (@$dst_refs) {\n      my $dst_addr = refaddr($dst_ref);\n      for my $src_ref (@$src_refs) {\n         return 1 if $dst_addr == refaddr($src_ref);\n      }\n   }\n\n   return 0;\n}\n\nsay could_be_common([ \\$x, \\$y ], [ \\$c, \\$d ]);\n</code></pre>\n"}], "owner": {"reputation": 3142, "user_id": 2474792, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/327964b28dd74fd6bbbe669aac4edf04?s=128&d=identicon&r=PG", "display_name": "Demi", "link": "https://stackoverflow.com/users/2474792/demi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "accepted_answer_id": 37220706, "answer_count": 2, "score": 2, "last_activity_date": 1463359994, "creation_date": 1463180580, "last_edit_date": 1463181650, "question_id": 37220558, "link": "https://stackoverflow.com/questions/37220558/how-can-i-check-for-reference-equality-in-perl", "title": "How can I check for reference equality in Perl?", "body": "<p>In Perl, how can I check for pointer equality of two different mutable objects?</p>\n\n<p>Since almost everything is mutable in Perl, there might be times when it is desirable to know when two objects are identical &ndash; that is, modifying one will effect the other.  How can one do that?</p>\n\n<p>Edit: By \"object\" I mean any Perl value.  This includes strings, arrays, hashes, etc.</p>\n"}, {"tags": ["perl", "command-line-interface", "readline", "cisco"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user967201"}, "edited": false, "score": 0, "creation_date": 1464069507, "post_id": 37282679, "comment_id": 62318519, "body": "Thanks a lot H&#229;kon! I was on a vacation and stayed away from keyboard - will take a closer look at your code during the next days and then give feedback."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1463505749, "creation_date": 1463505749, "answer_id": 37282679, "question_id": 37220512, "link": "https://stackoverflow.com/questions/37220512/termreadlinegnu-how-to-use-complete-internal-if-possible/37282679#37282679", "title": "Term::Readline::Gnu - how to use complete_internal (if possible..)?", "body": "<p>Here is an example of how to use <code>rl_complete_internal</code>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse utf8;\nuse open qw( :std :utf8 );\nuse warnings;\nuse Term::ReadLine;\n\nmy $term   = Term::ReadLine-&gt;new('Test', \\*STDIN, \\*STDOUT);\n$term-&gt;ornaments( 0 );\nmy $attribs = $term-&gt;Attribs;\n$attribs-&gt;{completion_word} = [qw(one two three)];\n$attribs-&gt;{completion_entry_function} =\n    $attribs-&gt;{list_completion_function};\n$term-&gt;add_defun('custom-action', \\&amp;my_bind_key_func );\n$term-&gt;bind_key(ord \"\\cy\", 'custom-action');\nmy $answer = $term-&gt;readline( 'Enter input: ' );\nsay \"You entered: '$answer'\";\n\nsub my_bind_key_func {\n    my($count, $key) = @_; \n    $term-&gt;complete_internal( ord '?' );\n    return 0;\n}\n</code></pre>\n\n<p>If you type <code>t</code> at the prompt and then press <code>CTRL-y</code> it will display the two completion candidates, namely <code>two</code> and <code>three</code>. This is because according to the GNU Readline Library <a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC45\" rel=\"nofollow\">documentation, section 2.6</a>:</p>\n\n<blockquote>\n  <p>int <strong>rl_complete_internal</strong> (<em>int what_to_do</em>)  </p>\n  \n  <p>Complete the word\n  at or before point. <em>what_to_do</em> says what to do with the completion. A\n  value of <code>?</code> means list the possible completions. <code>TAB</code> means do\n  standard completion. <code>*</code> means insert all of the possible completions.\n  <code>!</code> means to display all of the possible completions, if there is more\n  than one, as well as performing partial completion. <code>@</code> is similar to\n  <code>!</code>, but possible completions are not listed if the possible\n  completions share a common prefix.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user967201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 1, "accepted_answer_id": 37282679, "answer_count": 1, "score": 1, "last_activity_date": 1463505749, "creation_date": 1463180228, "question_id": 37220512, "link": "https://stackoverflow.com/questions/37220512/termreadlinegnu-how-to-use-complete-internal-if-possible", "title": "Term::Readline::Gnu - how to use complete_internal (if possible..)?", "body": "<p>i know how to use custom completion functions with Term::Readline::Gnu (Perl), e.g.</p>\n\n<pre><code>str     list_completion_function(str text, int state)\n</code></pre>\n\n<p><a href=\"http://search.cpan.org/dist/Term-ReadLine-Gnu/Gnu.pm#Custom_Completion\" rel=\"nofollow\">http://search.cpan.org/dist/Term-ReadLine-Gnu/Gnu.pm#Custom_Completion</a>\n<a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC47\" rel=\"nofollow\">https://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC47</a></p>\n\n<pre><code>$attribs-&gt;{attempted_completion_function } = sub {\n  my ($text, $line, $start, $end) = @_;\n  my @cmds = ('one', 'two', 'three');\n  $attribs-&gt;{completion_word} = \\@cmds;\n  return $term-&gt;completion_matches($text, $attribs-&gt;{'list_completion_function'} );\n};\n</code></pre>\n\n<p>..but i absolutely don't get how to use complete_internal:</p>\n\n<pre><code>int     rl_complete_internal(int what_to_do = TAB)\n</code></pre>\n\n<p><a href=\"http://search.cpan.org/dist/Term-ReadLine-Gnu/Gnu.pm#Custom_Completion\" rel=\"nofollow\">http://search.cpan.org/dist/Term-ReadLine-Gnu/Gnu.pm#Custom_Completion</a></p>\n\n<p>From the GNU Readline Docs:</p>\n\n<p><em>A value of <code>?' means list the possible completions.</code>TAB' means do standard completion. <code>*' means insert all of the possible completions.</code>!' means to display all of the possible completions (...)</em></p>\n\n<p><a href=\"https://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC47\" rel=\"nofollow\">https://cnswww.cns.cwru.edu/php/chet/readline/readline.html#SEC47</a></p>\n\n<p>This sounds to me like gnu-readline has a \"cisco-like\"/router-cli mode - but maybe i get something completely wrong here? And if there is something like this; how can i pass custom completion data to it using Term::Readline::Gnu?</p>\n\n<p>i searched SO, GitHub Code, Google etc pp and am almost certain to miss(understand) something. it would be great if you could lighten me up.</p>\n"}, {"tags": ["perl", "geometry", "polygon", "gpc"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1463169573, "post_id": 37218071, "comment_id": 61967809, "body": "&lt;whisper&gt;I&#39;ve no idea what you&#39;re talking about (not your fault, only my ignorance) but when you want to address ThisSuitIsBlackNot you need to omit the blank between the <code>@</code> and his name, like @ThisSuitIsBlackNot. Plus: He&#39;ll <i>only</i> be noticed <a href=\"http://stackoverflow.com/editing-help#comment-formatting\">if he already participates in the conversation</a> (which he currently does not).&lt;/whisper&gt;"}, {"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1463171413, "post_id": 37218071, "comment_id": 61968741, "body": "@Perl Dog thanks. I mean how to determine whether there is real polygon in &quot;@pgons&quot;. if there is no polygon, $pgons[0]-&gt;polygons will cause error."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1463172829, "post_id": 37218071, "comment_id": 61969305, "body": "<code>if (@pgons &amp;&amp; $pgons[0] &amp;&amp; $pgons[0]-&gt;polygons) { ... }</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1463172892, "post_id": 37218071, "comment_id": 61969329, "body": "I&#39;m so sorry but you misunderstood me: <i>I</i> cannot help you because I don&#39;t know anyhing about Math::Planar::GPC. 2nd: This is not like twitter. When you type @SomeUser, then SomeUser will <i>only</i> be alerted if he already has answered/commented or somehow interacted with <i>this particular question</i>. ThisSuit did not (so far), so he will <i>not</i> be notified. You cannot &#39;call&#39; a particular person for help by this means."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 2, "creation_date": 1463176769, "post_id": 37218071, "comment_id": 61970738, "body": "People may not be familiar with the module you are using, but if you give enough code to reproduce your problem i am sure people will help. you give no actual error. you dont show the input data so someone can reproduce your error and help you resolve it."}, {"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1463407779, "post_id": 37218071, "comment_id": 62039018, "body": "@Chris Doyle thank you for your advice. will do better next time."}, {"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1463407951, "post_id": 37218071, "comment_id": 62039125, "body": "Thank @mob , it is a good one"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "edited": false, "score": 0, "creation_date": 1463407669, "post_id": 37220525, "comment_id": 62038937, "body": "all right! Thank you Hakon. I just realized that the size of @pgons can be used for this purpose after I post this question.  I use if $#pgons &gt;=  0  ."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1463180319, "creation_date": 1463180319, "answer_id": 37220525, "question_id": 37218071, "link": "https://stackoverflow.com/questions/37218071/how-to-access-mathplanargpc-function-and-features/37220525#37220525", "title": "how to access Math::Planar::GPC function and features?", "body": "<p>It seems like <code>Gpc2Polygons</code> returns an empty array when no intersection was found. So to determine if the intersection is nonempty you could check if the length of the returned array is greater than zero. For example:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nuse Math::Geometry::Planar;\n\nmy $p1 = Math::Geometry::Planar-&gt;new;\nmy $p2 = Math::Geometry::Planar-&gt;new;\n\n$p1-&gt;points([[0, 0], [0, 2], [2, 2], [2, 0]]);\nfor my $pos (1, 1.5, 2) {\n    say \"pos = $pos\";\n    $p2-&gt;points([[$pos, 0], [$pos, 2], [$pos + 2, 2], [$pos + 2, 0]]);\n    my $intersect = GpcClip( 'INTERSECTION', $p1-&gt;convert2gpc, $p2-&gt;convert2gpc );\n    my @pgons = Gpc2Polygons( $intersect );  \n    if ( @pgons &gt; 0 ) {\n        say \"  Found intersection\";\n    }\n    else {\n        say \"  No intersection\";\n    }\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>pos = 1\n  Found intersection\npos = 1.5\n  Found intersection\npos = 2\n  No intersection\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6322497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2e32469735f830914240f758891629?s=128&d=identicon&r=PG&f=1", "display_name": "s.pan", "link": "https://stackoverflow.com/users/6322497/s-pan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 37220525, "answer_count": 1, "score": 1, "last_activity_date": 1463180319, "creation_date": 1463168157, "question_id": 37218071, "link": "https://stackoverflow.com/questions/37218071/how-to-access-mathplanargpc-function-and-features", "title": "how to access Math::Planar::GPC function and features?", "body": "<p>I want print out the intersection of two polygons. but when there is no intersection of two polygons, how can I get to know to avoid print it?\nBecause if no intersection, I can't call $pgons[0]->polygons, it gives me an error.<br>\n(no holes in all polygons)<br>\nThanks! </p>\n\n<pre><code>for my $x(0..$#polygon){\n    for my $y(0..$#polygon){\n        if ($x != $y){\n            my $it = GpcClip('INTERSECTION', $polygon[0]-&gt;convert2gpc, $polygon[1]-&gt;convert2gpc);\n            print FO \"$x  ==  $y \\n\";\n            my @pgons = Gpc2Polygons($it);  \n            #since here we don't have holes, only the first one is a valid polygon \n            if(@pgons){\n                print FO Dumper($pgons[0]-&gt;polygons-&gt;[0]);\n                print \"\\n\";\n            }    \n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "object", "methods"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1463158168, "post_id": 37215288, "comment_id": 61961959, "body": "Why are you calling <code>stringify</code> inside your constructor?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1463159618, "post_id": 37215288, "comment_id": 61962727, "body": "Please show the actual test code that triggers this issue."}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1463160020, "post_id": 37215288, "comment_id": 61962981, "body": "ok will add test code ."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1463162681, "post_id": 37215288, "comment_id": 61964301, "body": "so it appears as though it&#39;s the call to <code>message()</code> that&#39;s causing the issue. Can you show us that sub?"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463422046, "post_id": 37215288, "comment_id": 62047540, "body": "@stevieb added message stub"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1463158685, "post_id": 37215352, "comment_id": 61962215, "body": "They probably should be invoked as methods outside of the constructor to keep things encapsulated (although it&#39;s not clear if the OP has actually implemented any methods). The OP&#39;s error happens because <code>$self</code> is an unblessed hashref, not an object, when they call <code>$self-&gt;stringify</code>."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463158747, "post_id": 37215352, "comment_id": 61962256, "body": "@ThisSuitIsBlackNot how does it even manage to get called, then?"}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463159034, "post_id": 37215352, "comment_id": 61962414, "body": "@ThisSuitIsBlackNot, the constant hash of the topmost code snippets contains <code>category</code> and <code>wiki_page</code> as keys, so I thought..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1463159127, "post_id": 37215352, "comment_id": 61962460, "body": "@hobbs Oops, good call. They must not be calling <code>new</code>, since that would give a (different) fatal error."}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 0, "last_activity_date": 1463157944, "creation_date": 1463157944, "answer_id": 37215352, "question_id": 37215288, "link": "https://stackoverflow.com/questions/37215288/cant-call-method-category-without-a-package-or-object-reference-at-in-perl/37215352#37215352", "title": "&quot;Can&#39;t call method &quot;category&quot; without a package or object reference at&quot; in perl", "body": "<pre><code>return sprintf(\"%s : %s\\nMore info: %s\", $self-&gt;category, $self-&gt;message, $self-&gt;wiki_page);\n</code></pre>\n\n<p>Here the code looks like you're invoking methods called <code>category</code>, <code>message</code> and <code>wiki_page</code> on <code>$self</code>. You should put them in braces if they are actually hash keys.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1463405839, "post_id": 37223511, "comment_id": 62037751, "body": "Would it be possible to have it so that the new method (when called) would print out the values instead of having to explicitly call prn() ?"}, {"owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1463407856, "post_id": 37223511, "comment_id": 62039071, "body": "That was a typo for the stringify. Sorry"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1463425425, "post_id": 37223511, "comment_id": 62049385, "body": "@PaulRussell  Yes, you can print from the package file as you please.  So you can add printing statements to <code>new</code>, and they will run when <code>new</code> is called so whenever an object is created. Remember that before <code>bless</code> statement executes (in <code>new</code>) the <code>$self</code> isn&#39;t an object yet and so you can&#39;t call methods on it. You can pull data out of it though, by merely derefencing its keys.  (I added a separate toy method just to demonstrate that it all works.  While you may wish to actually have a method that prints all data for an object, just so.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "edited": false, "score": 0, "creation_date": 1463425618, "post_id": 37223511, "comment_id": 62049476, "body": "@PaulRussell  Yeah, I supposed that it was a typo or such.  The funny bit is that thr particular error that was triggered (because of how such code is interpreted) confused the matters."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1583654291, "last_edit_date": 1583654291, "creation_date": 1463207957, "answer_id": 37223511, "question_id": 37215288, "link": "https://stackoverflow.com/questions/37215288/cant-call-method-category-without-a-package-or-object-reference-at-in-perl/37223511#37223511", "title": "&quot;Can&#39;t call method &quot;category&quot; without a package or object reference at&quot; in perl", "body": "<p><strong>In short</strong>: keyword <code>sub</code> is missing in front of <code>stringify</code>; then, unblessed <code>$self</code> calls methods.</p>\n\n<p>(1) The absence of <code>sub</code> keyword triggers behavior that throws off diagnostics. The <code>stringify { ... }</code> is simply called as a class method, formally being passed a hashref.  Of course, nothing is right with that hashref and we get the early error, identifying it as bogus.  From <a href=\"http://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a></p>\n\n<blockquote>\n  <p>Can't call method \"%s\" without a package or object reference<br>\n  (F) You used the syntax of a method call, but the slot filled by the object reference or package name contains an expression that returns a defined value which is neither an object reference nor a package name. Something like this will reproduce the error:  </p>\n\n<pre><code>$BADREF = 42;\nprocess $BADREF 1,2,3;\n$BADREF-&gt;process(1,2,3);\n</code></pre>\n</blockquote>\n\n<p>The call <code>$self-&gt;stringify</code> has nothing to do with it, and is never executed since this is a fatal error.  (The exact error message was different for me under v5.10)</p>\n\n<p>(2) When <code>sub</code> keyword is put in its place, we get to the problem: <code>$self</code> invokes a method before being <code>bless</code>-ed.  This was observed by <a href=\"https://stackoverflow.com/users/176646/thissuitisblacknot\">ThisSuitIsBlackNot</a> in a comment as well. Now there is no need for speculation of why that even works but we get the expected error</p>\n\n<pre>\nCan't call method \"stringify\" on unblessed reference at ErrorPack.pm ...\n</pre>\n\n<p>(3) When we first <code>bless</code> the hashref before calling methods on it, we get </p>\n\n<pre>\nCan't locate object method \"category\" via package \"ErrorPack\" at ErrorPack.pm ...\n</pre>\n\n<p>As expected, since <code>$self</code> is now an object and there is indeed no method \"category\". This is fixed by changing calls in <code>printf</code> so to derefence a hashref, not call methods (by adding curlies). Also noted in the answer by <a href=\"https://stackoverflow.com/users/2749717/bipll\">bipll</a>.</p>\n\n<p>I don't know how these changes play along with poster's intentions, but with all that</p>\n\n<p><strong>File ErrorPack.pm</strong></p>\n\n<pre><code>package ErrorPack;\n\nuse warnings;\nuse strict;\n\n# Method for creating error message\nsub new {\n    my ( $class, $error, %args ) = @_; \n    # Initialize error with data\n    my $self = $error;\n    bless $self, $class;\n    # If the error contains context parameters... [...]\n    if (%args) {\n        foreach my $key (@{ $self-&gt;{context} } ) { \n            # And take the ones we need\n            $self-&gt;{args}-&gt;{$key} = $args{$key};\n        }   \n        my @template_args = map { $self-&gt;{args}-&gt;{$_} } @{ $self-&gt;{context} };\n        # map/insert arguments into context hash and insert into string template\n        $self-&gt;{message} = sprintf ($self-&gt;{template}, @template_args);\n        $self-&gt;stringify;\n    }   \n    return $self;\n}\n\nsub stringify {\n    my ($self) = @_; \n    return sprintf(\"%s : %s\\nMore info: %s\", $self-&gt;{category}, \n        $self-&gt;{message}, $self-&gt;{wiki_page});\n}\nsub prn { print \"$_[0]-&gt;{category}\\n\" }\n1;\n</code></pre>\n\n<p>If there are any reasons to <em>not</em> make <code>$self</code> an object before <code>%args</code> processing, issue <code>bless $self, $class;</code> before the call to <code>stringify</code>\nand then <code>return $self;</code>.</p>\n\n<p>The script with <strong>main::</strong></p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse ErrorPack;\n\n# Taken from testing code that is now posted\nmy $err = {\n    category =&gt; 'Connection Error',\n    template =&gt; \"Could not ping switch %s in %s seconds.\",\n    context =&gt; [ qw(switch_ip  timeout) ],\n    tt =&gt; {template =&gt; 'disabled'},\n    fatal =&gt; 1,\n    wiki_page =&gt; 'www.error-fix.com/',\n};  \n\nmy $eobj = ErrorPack-&gt;new($err, timeout =&gt; 30, switch_ip =&gt; '192.192.0.0');\n$eobj-&gt;prn();\n</code></pre>\n\n<p>This prints a line <code>Connection Error</code>, the <code>$eobj</code> can be directly queried for keys, etc.</p>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "accepted_answer_id": 37223511, "answer_count": 2, "score": 1, "last_activity_date": 1583654291, "creation_date": 1463157740, "last_edit_date": 1463421996, "question_id": 37215288, "link": "https://stackoverflow.com/questions/37215288/cant-call-method-category-without-a-package-or-object-reference-at-in-perl", "title": "&quot;Can&#39;t call method &quot;category&quot; without a package or object reference at&quot; in perl", "body": "<p>I can't seem to figure this out, and I couldn't find anything online. So here is my code:</p>\n\n<p>Type.pm</p>\n\n<pre><code>use constant {\nUNABLE_TO_PING_SWITCH_ERROR =&gt; {\n         category =&gt; 'Connection Error',\n         template =&gt; \"Could not ping switch %s in %s seconds.\",\n         context =&gt; [ qw(switch_ip  timeout) ],\n         tt =&gt; {template =&gt; 'disabled'},\n         fatal =&gt; 1,\n         wiki_page =&gt; 'www.error-fix.com/',\n     },\n};\n</code></pre>\n\n<p>Error.pm\nThe new method outputs the error message in the format shown in stringify</p>\n\n<pre><code># Method for creating error message\n  sub new {\n      my ( $class, $error, %args ) = @_;\n      # Initialize error with data\n      my $self = $error;\n      # If the error contains context parameters... Insert parameters into string template\n      if(%args) {\n          foreach my $key (@{ $self-&gt;{context} } ) {\n              # And take the ones we need\n              $self-&gt;{args}-&gt;{$key} = $args{$key};\n          }\n          my @template_args = map { $self-&gt;{args}-&gt;{$_} } @{ $self-&gt;{context} };\n          # map/insert arguments into context hash and insert into string template\n          $self-&gt;{message} = sprintf ($self-&gt;{template}, @template_args);\n          $self-&gt;stringify;\n          }\n          return bless $self, $class;\n      }\n      else { return bless $self, $class; }\n  }\n\nstringify {\n    my ($self) = @_;\n    return sprintf(\"%s : %s\\nMore info: %s\", $self-&gt;category, $self-&gt;message, $self-&gt;wiki_page);\n}\n</code></pre>\n\n<p>This is the error I am receiving.</p>\n\n<pre><code>#   Failed test 'Return the correct message'\n    #   at t/67_Error.t line 47.\n    #          got: undef\n    #     expected: 'Could not ping switch 192.192.0.0 in 30 seconds.'\nCan't call method \"category\" without a package or object reference at Error.pm line 77.\n</code></pre>\n\n<p>Line 77 is the return statement inside stringify.</p>\n\n<p>If you need any more info or code let me know.</p>\n\n<h1>Attempt solution (sof far)</h1>\n\n<pre><code> sub new {\n    my ( $class, $error, %args ) = @_;\n    # Initialize error with data\n    my $self = $error;\n    # If the error contains context parameters... Insert parameters into string template\n        if($self eq 'HASH' &amp;&amp; %args) {\n            bless $self, $class;\n            foreach my $key (@{ $self-&gt;{context} } ) {\n                 # bless $self, $class;\n                 # And take the ones we need\n                 $self-&gt;{args}-&gt;{$key} = $args{$key};\n            }\n            my @template_args = map { $self-&gt;{args}-&gt;{$_} } @{ $self-&gt;{context} };\n            # map/insert arguments into context hash and insert into string template\n            $self-&gt;{message} = sprintf ($self-&gt;{template}, @template_args);\n            my $output = _stringify($self-&gt;category, $self-&gt;message, $self-&gt;wiki_page);\n            bless $output, $class;\n            return $output;\n            }\n            else { return bless $self, $class; }\n   }\n</code></pre>\n\n<h1>Test Code : t/67_Error.t</h1>\n\n<pre><code>#!/usr/bin/env perl\n\nuse lib ('./t/lib');\nuse strict;\nno strict 'refs';\nuse warnings;\n\nuse ASC::Builder::Error;\nuse ASC::Builder::Error::Type;\nuse ASC::Builder::Error::Type 'code';\nuse Test::More;\nuse Test::Exception;\nuse LWP::Simple 'head'; # Used to test if wiki link is giving a response\n\nsubtest 'Functionality of Error' =&gt; sub {\n\n    my $example_error = {\n        category =&gt; 'Connection Error',\n        template =&gt; 'Could not ping switch %s in %s seconds.',\n        context =&gt; [ qw(switch_ip  timeout) ],\n        tt =&gt; {template =&gt; 'disabled'},\n        fatal =&gt; 1,\n        wiki_page =&gt; 'http://www.error-fix.com',\n    };\n    # Correct case\n    {\n        my $error = ASC::Builder::Error-&gt;new( $example_error, timeout =&gt; 30, switch_ip =&gt; '192.192.0.0' );\n\n        isa_ok ($error, 'ASC::Builder::Error');\n\n        can_ok ($error, 'category');\n        is ($error-&gt;category(), 'Connection Error', 'Return the correct category');\n\n        can_ok ($error, 'template');\n        is ($error-&gt;template(), 'Could not ping switch %s in %s seconds.', 'Return the correct category');\n\n        can_ok ($error, 'tt');\n        is ($error-&gt;tt(), 'disabled', 'Return the correct tt template');\n\n        can_ok ($error, 'context');\n        is_deeply($error-&gt;context(), ['switch_ip', 'timeout'], 'Return the correct context params');\n\n        can_ok ($error, 'is_fatal');\n        ok($error-&gt;is_fatal(), 'Return the correct value');\n\n        can_ok ($error, 'message');\n        is ($error-&gt;message(), 'Could not ping switch 192.192.0.0 in 30 seconds.', 'Return the correct message');\n        can_ok ($error, 'stringify');\n        is ($error-&gt;stringify(), \"Connection Error : Could not ping switch 192.192.0.0 in 30 seconds.\\nMore info: http://www.error-fix.com\", 'stringify creates the correct message');\n\n};\n\n    # Too many arguments (this is okay)\n    lives_ok( sub { ASC::Builder::Error-&gt;new($example_error, timeout =&gt; 1, switch_ip =&gt; 2, extra =&gt; 3 ) }, 'Creating with too many arguments lives. (allows for additional context          string to be added in the code)' );\n    };\n\n    subtest 'Correctness of Type.pm' =&gt; sub {\n\n# These test cases contain all the errors from Type.pm\n    my @test_cases = (\n       {\n            name =&gt; 'UNABLE_TO_PING_SWITCH_ERROR',\n            args =&gt; {\n                switch_ip =&gt; '192.192.0.0',\n                timeout =&gt; 30,\n            },\n            message =&gt; 'Could not ping switch 192.192.0.0 in 30 seconds.',\n        },\n    );\n\n\n    foreach my $t (@test_cases) {\n        subtest $t-&gt;{name} =&gt; sub {\n            no strict 'refs'; # Because we need to use variable to get to a constant\n            ASC::Builder::Error::Type-&gt;import($t-&gt;{name});\n\n            # Create the Error object from the test data\n            # Will also fail if the name was not exported by Type.pm\n            my $error;\n            lives_ok( sub { $error = ASC::Builder::Error-&gt;new( &amp;{ $t-&gt;{name} },%{ $t-&gt;{args} }) }, 'Error can be created');\n\n            # See if it has the right values\n            is ($error-&gt;message, $t-&gt;{message}, 'Error message is correct');\n\n            # Using LWP::Simple to check if the wiki page link is not broken\n            #ok head($error-&gt;wiki_page); #CANT'T GET THIS TEST TO WORK\n\n        }\n    }\n};\ndone_testing;\n</code></pre>\n\n<h1>UPDATE: Message method:</h1>\n\n<p>It is just a getter.</p>\n\n<pre><code> sub message {\n        return shift-&gt;{message};\n }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1463226371, "post_id": 37214770, "comment_id": 61982394, "body": "<a href=\"https://stackoverflow.com/a/1829927/100754\">When you find yourself adding an integer suffix to variable names, think <b><i>I should have used an array</i></b>.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 0, "last_activity_date": 1463156857, "creation_date": 1463156857, "answer_id": 37215019, "question_id": 37214770, "link": "https://stackoverflow.com/questions/37214770/parsing-a-file-by-summing-up-different-columns-of-each-row-separated-by-blank-li/37215019#37215019", "title": "Parsing a file by summing up different columns of each row separated by blank line", "body": "<p>When I run your code, I get warnings:</p>\n\n<pre><code>Use of uninitialized value $date_time in concatenation (.) or string\n</code></pre>\n\n<p>I fixed it by using <code>\\s+</code> instead of <code>/  /</code>.</p>\n\n<p>I also added a <code>print</code> after your loop in case the file does not end with a blank line.</p>\n\n<p>Here is minimally-changed code to produce your desired output:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# Define file names and its location\nmy $input = $ARGV[0];\n\n# Grab the vols stats for different intervals\nopen (INFILE,\"$input\") or die \"Could not open sample.txt: $!\";\nmy $date_time;\nmy $length;\nmy $col_1;\nmy $col_2;\nmy $col_3;\nmy $col_4;\nforeach my $line (&lt;INFILE&gt;)\n{\n    if ($line =~ m/start/)\n        {\n            my @date_fields = split(/\\s+/,$line);\n            $date_time = $date_fields[1];\n        }\n    if ($line =~ m/length/i)\n        {\n            my @length_fields = split(/\\s+/,$line);\n            $length = $length_fields[1];\n        }\n    if ($line =~ m/0[xX][0-9a-fA-F]+/)\n        {\n            my @volume_fields = split(/,/,$line);\n            $col_1 += $volume_fields[1];\n            $col_2 += $volume_fields[2];\n            $col_3 += $volume_fields[3];\n            $col_4 += $volume_fields[4];\n        }\n    if ($line =~ /^$/)\n        {\n            print \"$date_time $col_1 $col_2 $col_3 $col_4\\n\";\n            $col_1=0;$col_2=0;$col_3=0;$col_4=0;\n        }\n}\nprint \"$date_time $col_1 $col_2 $col_3 $col_4\\n\";\nclose (INFILE);\n\n\n__END__\n\n1 33 36 39 42\n2 123 126 129 132\n3 213 216 219 222\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6331340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad5e76b49b1050f313bd555c705ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/6331340/buddy"}, "edited": false, "score": 0, "creation_date": 1464457000, "post_id": 37215124, "comment_id": 62498761, "body": "Thanks Sobrique, it did serve my need. I wanted to ask one more query, If I have another file having entry of hex numbers in different line as below 0x00a 0x00b Then, how do I add only those rows columns. I added if condition as if ($_ eq /^0x00a/), but it did not work.      The final output would look like. The third line won&#39;t come as it starts     with &#39;0x00c&#39;. \t1       33      36      39      42 \t2       123     126     129     132"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 1, "user_id": 6331340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad5e76b49b1050f313bd555c705ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/6331340/buddy"}, "edited": false, "score": 0, "creation_date": 1464639036, "post_id": 37215124, "comment_id": 62556317, "body": "Better to ask that as a separate question."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1463157547, "last_edit_date": 1463157547, "creation_date": 1463157230, "answer_id": 37215124, "question_id": 37214770, "link": "https://stackoverflow.com/questions/37214770/parsing-a-file-by-summing-up-different-columns-of-each-row-separated-by-blank-li/37215124#37215124", "title": "Parsing a file by summing up different columns of each row separated by blank line", "body": "<p><code>$/</code> is your friend here. Try setting it to <code>''</code> to enable paragraph mode (separating your data by blank lines). </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nlocal $/ = ''; \n\nwhile ( &lt;&gt; ) {\n    my ( $start ) = m/start_time\\s+(\\d+)/;\n    my ( $length ) = m/length\\s+(\\d+)/;\n    my @row_sum; \n    for ( m/(0x.*)/g )  {\n        my ( $key, @values ) = split /,/; \n        for my $index ( 0..$#values ) {\n           $row_sum[$index] += $values[$index];\n        }\n    }\n    print join ( \"\\t\", $start, @row_sum ), \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1       33      36      39      42\n2       123     126     129     132\n3       213     216     219     222\n</code></pre>\n\n<p>NB - using tab stops for output. Can use <code>sprintf</code> if you need more flexible options. </p>\n\n<p>I would also suggest that instead of:</p>\n\n<pre><code>my $input = $ARGV[0]; \nopen (my $input_fh, '&lt;', $input) or die \"Could not open $input: $!\";\n</code></pre>\n\n<p>You would be better off with:</p>\n\n<pre><code>while ( &lt;&gt; ) { \n</code></pre>\n\n<p>Because <code>&lt;&gt;</code> is the magic filehandle in perl, that - opens files specified on command line, and reads them one at a time, and if there isn't one, reads <code>STDIN</code>. This is just like how <code>grep</code>/<code>sed</code>/<code>awk</code> do it. </p>\n\n<p>So you can still run this with <code>scriptname.pl sample.txt</code> or you can do <code>curl http://somewebserver/sample.txt | scriptname.pl</code> or <code>scriptname.pl sample.txt anothersample.txt moresample.txt</code></p>\n\n<p>Also - if you want to <code>open</code> the file yourself, you're better off using lexical vars and 3 arg open:</p>\n\n<pre><code>open ( my $input_fh, '&lt;', $ARGV[0] ) or die $!; \n</code></pre>\n\n<p>And you really shouldn't ever be using 'numbered' variables like <code>$col_1</code> etc. If there's numbers, then an array is almost always better. </p>\n"}, {"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1463229600, "post_id": 37226444, "comment_id": 61983417, "body": "Is there any advantage in general writing <code>my ($id, @vals) = split ...</code> instead of using something like <code>@vals = splice [split...], 1</code> to remove a useless first item, or is it just more idiomatic? Other thing, take care that the file may not have a newline at the end."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1463231840, "post_id": 37226444, "comment_id": 61984126, "body": "@CasimiretHippolyte <code>$id</code> might be useful ... if not, use <code>(undef, @vals)</code> instead of <code>splice</code> to avoid allocating memory for the first element."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1463231924, "post_id": 37226444, "comment_id": 61984153, "body": "<code>undef</code> obviously! I was looking for something like this but I didn&#39;t find a way to write it. Thanks."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 1, "last_activity_date": 1463259941, "last_edit_date": 1463259941, "creation_date": 1463227492, "answer_id": 37226444, "question_id": 37214770, "link": "https://stackoverflow.com/questions/37214770/parsing-a-file-by-summing-up-different-columns-of-each-row-separated-by-blank-li/37226444#37226444", "title": "Parsing a file by summing up different columns of each row separated by blank line", "body": "<p>Basically, a block begins with <code>start_time</code> and ends with a line of of whitespace. If instead end of block is always assured to be an empty line, you can change the test below.</p>\n\n<p>It helps to use <a href=\"https://stackoverflow.com/a/1829927/100754\">arrays instead of variables with integer suffixes</a>.</p>\n\n<p>When you hit the start of a new block, record the <code>start_time</code> value. When you hit a stat line, update column sums, and when you hit a line of whitespace, print the column sums, and clear them.</p>\n\n<p>This way, you keep your program's memory footprint proportional to the longest line of input as apposed to the largest block of input. In this case, there isn't a huge difference, but, in real life, there can be. Your original program was reading the entire file into memory as a list of lines which would really cause your program's memory footprint to balloon when used with large input sizes.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $start_time;\nmy @cols;\n\nwhile (my $line = &lt;DATA&gt;) {\n    if ( $line =~ /^start_time \\s+ ([0-9]+)/x) {\n        $start_time = $1;\n    }\n    elsif ( $line =~ /^0x/ ) {\n        my ($id, @vals) = split /,/, $line;\n        for my $i (0 .. $#vals) {\n            $cols[ $i ] += $vals[ $i ];\n        }\n    }\n    elsif ( !($line =~ /\\S/) ) {\n        # guard against the possibility of\n        # multiple blank/whitespace lines between records\n        if ( @cols ) {\n            print join(\"\\t\", $start_time, @cols), \"\\n\";\n            @cols = ();\n        }\n    }\n}\n\n# in case there is no blank/whitespace line after last record\nif ( @cols ) {\n    print join(\"\\t\", $start_time, @cols), \"\\n\";\n}\n\n__DATA__\nvolume stats\nstart_time  1\nlength      2\n--------\nID\n0x00a,1,2,3,4\n0x00b,11,12,13,14\n0x00c,21,22,23,24\n\nvolume stats\nstart_time  2\nlength      2\n--------\nID\n0x00a,31,32,33,34\n0x00b,41,42,43,44\n0x00c,51,52,53,54\n\nvolume stats\nstart_time  3\nlength      2\n--------\nID\n0x00a,61,62,63,64\n0x00b,71,72,73,74\n0x00c,81,82,83,84\n</code></pre>\n\n<p>Output:</p>\n\n<pre>1  33  36  39  42\n2   123 126 129 132\n3   213 216 219 222</pre>\n"}], "owner": {"reputation": 1, "user_id": 6331340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ad5e76b49b1050f313bd555c705ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/6331340/buddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 37215124, "answer_count": 3, "score": -1, "last_activity_date": 1463259941, "creation_date": 1463156048, "question_id": 37214770, "link": "https://stackoverflow.com/questions/37214770/parsing-a-file-by-summing-up-different-columns-of-each-row-separated-by-blank-li", "title": "Parsing a file by summing up different columns of each row separated by blank line", "body": "<p>I have a file input as below;</p>\n\n#\n\n<pre><code>volume stats\nstart_time  1\nlength      2\n--------\nID\n0x00a,1,2,3,4\n0x00b,11,12,13,14\n0x00c,21,22,23,24\n\nvolume stats\nstart_time  2\nlength      2\n--------\nID\n0x00a,31,32,33,34\n0x00b,41,42,43,44\n0x00c,51,52,53,54\n\nvolume stats\nstart_time  3\nlength      2\n--------\nID\n0x00a,61,62,63,64\n0x00b,71,72,73,74\n0x00c,81,82,83,84\n</code></pre>\n\n#\n\n<p>I need output in below format;</p>\n\n<pre><code>1 33    36  39  42\n2 123   126 129 132\n3 213   216 219 222\n</code></pre>\n\n#\n\n<p>Below is my code;</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n#use File::Find;\n\n# Define file names and its location\nmy $input = $ARGV[0];\n\n# Grab the vols stats for different intervals\nopen (INFILE,\"$input\") or die \"Could not open sample.txt: $!\";\nmy $date_time;\nmy $length;\nmy $col_1;\nmy $col_2;\nmy $col_3;\nmy $col_4;\nforeach my $line (&lt;INFILE&gt;)\n{\n\n    if ($line =~ m/start/)\n        {\n            my @date_fields = split(/   /,$line);\n            $date_time = $date_fields[1];\n        }\n    if ($line =~ m/length/i)\n        {\n            my @length_fields = split(/ /,$line);\n            $length = $length_fields[1];\n        }\n    if ($line =~ m/0[xX][0-9a-fA-F]+/)\n        {\n            my @volume_fields = split(/,/,$line);\n            $col_1 += $volume_fields[1];\n            $col_2 += $volume_fields[2];\n            $col_3 += $volume_fields[3];\n            $col_4 += $volume_fields[4];\n            #print \"$col_1\\n\";\n        }\n    if ($line =~ /^$/)\n        {\n            print \"$date_time $col_1 $col_2 $col_3 $col_4\\n\";\n                $col_1=0;$col_2=0;$col_3=0;$col_4=0;\n        }\n}\nclose (INFILE);\n</code></pre>\n\n#\n\n<p>my code result is;</p>\n\n<pre><code>1\n 33 36 39 42\n2\n 123 126 129 132\n</code></pre>\n\n#\n\n<p>BAsically, for each time interval, it just sums up the columns for all the lines and displays all the columns against each time interval.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1463154432, "post_id": 37213939, "comment_id": 61959858, "body": "Please use punctuation marks between your sentences so we know where we can take a breath."}, {"owner": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463154711, "post_id": 37213939, "comment_id": 61960049, "body": "how is that guys its my first time posting here ? i will add comments to my code just a sec"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1463154821, "post_id": 37213939, "comment_id": 61960117, "body": "Could you please show a few lines (3-5) of your input file and the expected output for that?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463156194, "post_id": 37214714, "comment_id": 61960889, "body": "thank u Jeff i got it , there is no way here to use reference  \\ ?"}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "reply_to_user": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463156942, "post_id": 37214714, "comment_id": 61961289, "body": "@ZoCode Actually, yes. You could use a reference to <code>$tab[$i]</code> instead of a copy (as the hash value). (Dereference on the print.) But that is not why the original code was slow."}], "tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 1, "last_activity_date": 1463155869, "creation_date": 1463155869, "answer_id": 37214714, "question_id": 37213939, "link": "https://stackoverflow.com/questions/37213939/how-to-sort-a-file-by-a-3rd-column-by-using-refernce-in-perl/37214714#37214714", "title": "How to sort a file by a 3rd column by using refernce in PERL", "body": "<p>The reason it is slow is that the nested foreach loops are giving you a 10K x 10K inner loop. Your friend is telling you to use a hash with the <code>tabs2</code> value as the key and the record as the value (<code>$myhash{$tabs[2]}=$tab[$i]</code>). Then you do a single loop over a <code>sort keys %myhash</code> and print <code>$myhash{$thekey}</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1463166224, "post_id": 37215723, "comment_id": 61966147, "body": "@zocode: FYI Schartzian Transform is really much more efficient than a simple sort."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1463167377, "post_id": 37215723, "comment_id": 61966748, "body": "I perfectly agree (+1) and would prefer it to my solution (esp. when speed matters) but it is also a decision between readability and performance. For beginners the ST might look like \u2026 <i>&quot;Umm, what?&quot;</i> because the <code>map</code> thing is not the easiest. And the ST has two of them ;-)"}, {"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1463212739, "post_id": 37215723, "comment_id": 61978452, "body": "@PerlDog If <code>map</code> is hard one should consider another career."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 3, "last_activity_date": 1463159410, "creation_date": 1463159410, "answer_id": 37215723, "question_id": 37213939, "link": "https://stackoverflow.com/questions/37213939/how-to-sort-a-file-by-a-3rd-column-by-using-refernce-in-perl/37215723#37215723", "title": "How to sort a file by a 3rd column by using refernce in PERL", "body": "<p>You could use <a href=\"https://en.wikipedia.org/wiki/Schwartzian_transform\" rel=\"nofollow\">Schartzian Transform</a>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Data::Dumper;\nuse Modern::Perl;\n\n\nchomp (my @lines = &lt;DATA&gt;);\n\nmy @sorted = \n    map {$_-&gt;[0]}\n    sort {$a-&gt;[1] cmp $b-&gt;[1]}\n    map { my $third = (split/\\s+/,$_)[2]; [$_, $third] }\n        @lines;\n\nsay Dumper\\@sorted;\n\n\n__DATA__\n3851 4178 de\n1972 6643 la\n1391 2246 \u00e0\n1098 5163 et\n656 8429 que\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$VAR1 = [\n          '3851 4178 de',\n          '1098 5163 et',\n          '1972 6643 la',\n          '656 8429 que',\n          '1391 2246 \u00e0'\n        ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463165634, "post_id": 37216901, "comment_id": 61965868, "body": "@ZoCode You&#39;re welcome. I just saw you also swap the columns on output which my suggestion does not. Can I leave that as an excercise?"}, {"owner": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463167082, "post_id": 37216901, "comment_id": 61966599, "body": "but if i have a number in the third column i dont think it will work with cmp i tried it is there any think to make it work with numbers also ?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463167464, "post_id": 37216901, "comment_id": 61966791, "body": "@ZoCode Yes, replace <code>cmp</code> with <code>&lt;=&gt;</code>. Looks funny, but <code>&lt;=&gt;</code> is for comparing numbers. So <code>return $a3 &lt;=&gt; $b3;</code> will do."}, {"owner": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463167965, "post_id": 37216901, "comment_id": 61967045, "body": "i know yes but the problem if i have like &quot;a&quot; in the 3rd colmun and in the other line there is 5 in the 3rd comlunthe result wont be correct"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463168232, "post_id": 37216901, "comment_id": 61967161, "body": "Well now it depends on what you consider <i>&quot;correct&quot;</i>. Is <code>5</code> greater than <code>a</code> or lesser? For mixed values use <code>cmp</code> and numbers will come first. With <code>&lt;=&gt;</code> the columns will be <i>interpreted</i> as numbers and everything <i>not</i> starting with a number will be interpreted as 0 (zero)."}, {"owner": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463168366, "post_id": 37216901, "comment_id": 61967242, "body": "i got it now sorry for asking a lot of questions and thank you , :) u r the best"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "edited": false, "score": 0, "creation_date": 1463168433, "post_id": 37216901, "comment_id": 61967281, "body": "LOL. Tell that to my boss."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1463261853, "post_id": 37216901, "comment_id": 61993894, "body": "This code is slow because of <code>split</code> for each comparison. Notice @Toto answer."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1463323878, "post_id": 37216901, "comment_id": 62008412, "body": "@EugenKonkov Sure. I got curious and benchmarked. Please see my updated answer."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 1, "last_activity_date": 1463323823, "last_edit_date": 1463323823, "creation_date": 1463163748, "answer_id": 37216901, "question_id": 37213939, "link": "https://stackoverflow.com/questions/37213939/how-to-sort-a-file-by-a-3rd-column-by-using-refernce-in-perl/37216901#37216901", "title": "How to sort a file by a 3rd column by using refernce in PERL", "body": "<p>Indeed, the Schwartzian transform (ST) @toto refers to can be used here. But I presume it may seem a bit obscure to you and I'd like to show a more explicit solution. This will be slower than the ST but might be easier to read for beginners.</p>\n\n<p>The first block simply reads the complete input file into the array <code>@lines</code>. I used the recommended 3-parameter-open. See Perl's <a href=\"http://perldoc.perl.org/perlopentut.html\" rel=\"nofollow\">tutorial on open</a> for details.</p>\n\n<p>Perl has a built-in <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow\">sort function</a> which sorts a list (or array) lexicographically (i.e. <code>('c', 'a', 'b') \u2192 ('a', 'b', 'c')</code>). If that doesn't suit your needs you can also supply a <em>custom comparison function</em> like I did here with <code>by_third_column</code>. This function gets called with the magic parameters <code>$a</code> and <code>$b</code>. These are the items that will be compared. In your case <code>$a</code> and <code>$b</code> are some (arbitrary) complete lines of your input and the function has to decide which line is \"greater\".</p>\n\n<p>So the function <code>by_third_column</code> splits the two given lines at whitespace apart and picks the 3rd items (\"fields\") of these lines. This is the <code>my $a3 = \u2026</code> and <code>my $b3 = \u2026</code> part. Then these 3rd fields are lexicographically compared (<code>$a3 cmp $b3</code>).</p>\n\n<p>Finally we call <code>sort</code> on the <code>@lines</code> array but supply that custom compare function. The last block simply outputs (appends) the sorted output to the file 'resultat.txt'.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nopen( my $in, '&lt;', 'dico_corpus.dic' ) or die \"$!\";\nmy @lines = &lt;$in&gt;;\nclose($in);\n\nsub by_third_column\n{\n    my $a3 = ( split /\\s+/, $a )[2];\n    my $b3 = ( split /\\s+/, $b )[2];\n    return $a3 cmp $b3;\n}\n\nmy @sorted = sort by_third_column @lines;\n\nopen( my $out, '&gt;&gt;', 'resultat.txt' ) or die \"$!\";\nprint $out @sorted;\nclose($out);\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong> The comments to @toto's and my answer made me curious so I did a <a href=\"http://perldoc.perl.org/Benchmark.html\" rel=\"nofollow\"><code>Benchmark</code></a>. I encapsulated the original code, toto's Schwartzian Transform, and my suggestion with the custom comparison function in three subroutines. I setup an input array with 10_000 lines of three 10-letter-random words each:</p>\n\n<pre><code>vfkyscicki nqqnfpjylf kevurxexov\nbqordmljgh nrypcmvids tvsxsqhizl\nuequmgbhbg bnfdyxgcpo krwnjfuhpe\n...\n</code></pre>\n\n<p>The benchmark was measured with </p>\n\n<pre><code>my $speed = Benchmark::timethese(\n    -250,\n    {\n        Custom   =&gt; \\&amp;custom,\n        ST       =&gt; \\&amp;ST,\n        Original =&gt; \\&amp;original,\n    }\n);\nBenchmark::cmpthese($speed);\n</code></pre>\n\n<p>I had to use that much CPU secs because the performance difference between ST/Custom and Original is so huge that I always got \"warning: too few iterations for a reliable count\". The results were</p>\n\n<pre><code>Benchmark: running Custom, Original, ST for at least 250 CPU seconds...\n    Custom: 269 wallclock secs (268.76 usr +  0.00 sys = 268.76 CPU) @  9.86/s (n=2651)\n  Original: 253 wallclock secs (252.18 usr +  0.00 sys = 252.18 CPU) @  0.02/s (n=4)\n        ST: 272 wallclock secs (271.72 usr +  0.00 sys = 271.72 CPU) @ 32.82/s (n=8918)\n\n               Rate Original   Custom       ST\nOriginal 1.59e-02/s       --    -100%    -100%\nCustom       9.86/s   62086%       --     -70%\nST           32.8/s  206817%     233%       --\n</code></pre>\n\n<p>As you can see, Schwartzian Transform: <em>\"douze points\"</em>. It's about 3-4 times faster than the custom compare function which in turn is approximatly 600 times faster than the original approach for 10_000 inputlines.</p>\n\n<p>So ST <strong><em>is</em></strong> faster (I didn't doubt that) than a custom compare function but the <em>real</em> improvement was not to iterate n\u00b2 times over the input.</p>\n"}], "owner": {"reputation": 51, "user_id": 5613639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d5cc8976c3924afd0f53bec352e36ac2?s=128&d=identicon&r=PG&f=1", "display_name": "ZoCode", "link": "https://stackoverflow.com/users/5613639/zocode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 37216901, "answer_count": 3, "score": 1, "last_activity_date": 1463323823, "creation_date": 1463153407, "last_edit_date": 1463155323, "question_id": 37213939, "link": "https://stackoverflow.com/questions/37213939/how-to-sort-a-file-by-a-3rd-column-by-using-refernce-in-perl", "title": "How to sort a file by a 3rd column by using refernce in PERL", "body": "<p>Hello guys so i have to sort a file about 10k lines i wrote this code but it take a lot of time to finish i asked someone and he told to use reference it wont take that much of time but i cant figured out where to use them this is what i did in perl :</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen( IN, \"dico_corpus.dic\" ) or die \"$!\";\nmy @tab;\nmy $i;\nmy @tabs;\nmy $c;\nmy @tabs2;\n$i   = 0;\n$c   = 0;\n@tab = &lt;IN&gt;;\n#here i will read line buy line and put the 3rd colmun(which i want to sort in tabs2)\nfor ( $i = 0; $i &lt; $#tab; $i++ ) {\n    @tabs = split( /\\s+/, $tab[$i] );\n\n    $tabs2[$c] = $tabs[2];\n\n    $c++;\n\n}// here tabs2 contain the 3rd colmun to sort\n\n\n@tabs2 = sort(@tabs2);\n\nopen( OUT, \"&gt;&gt;resultat.txt\" );# to print result by adding line by line to resultat.txt\n\nforeach my $word (@tabs2) {# here i will take the first value in tabs2\n                           # and get the first line from the original file\n                           # and test the 3rd colmun if its the same so i \n                           # print the whole line if its not so to the next  \n                           #line \n\n    foreach my $var (@tab) {\n        @tabs = split( /\\s+/, $var );\n\n        if ( $word eq $tabs[2] ) {\n            my $ligne = join( \"\\t\", $tabs[1], $tabs[0], $tabs[2] );\n            print OUT $ligne, \"\\n\";\n        }\n    }\n}\n\nclose(IN);\nclose(OUT);\n</code></pre>\n\n<blockquote>\n  <p>some lines from the original file</p>\n  \n  <p>3851  4178    de</p>\n  \n  <p>1972  6643    la </p>\n  \n  <p>1391   2246    \u00e0</p>\n  \n  <p>1098  5163    et</p>\n  \n  <p>656    8429    que</p>\n</blockquote>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 5, "last_activity_date": 1463151627, "creation_date": 1463151627, "answer_id": 37213370, "question_id": 37212922, "link": "https://stackoverflow.com/questions/37212922/what-is-the-difference-between-using-and-and-when-declaring-variables/37213370#37213370", "title": "What is the difference between using &quot;&quot; and &#39;&#39; and () when declaring variables?", "body": "<p><code>\"\"</code> and <code>''</code> are equivalent. Some people use <code>q()</code> for the empty string, as <code>''</code> might look like a single <code>\"</code> in some fonts and confuse the reader.</p>\n\n<p><code>my $scalarVar = ()</code> and <code>my $scalarVar</code> are equivalent, you can add <code>my $scalarVar = undef</code> to the group. I'd prefer the second option as it's the shortest one.</p>\n\n<p><code>my @arrayVar = ''</code> is the same as <code>my @arrayVar = ('')</code>, i.e. it creates an array with one element, the empty string. <code>my @arrayVar = ()</code> and <code>my @arrayVar</code> are equivalent, they create an empty array, I'd again prefer the shorter variant.</p>\n\n<p>For the hash, <code>my %hashVar</code> and <code>my %hashVar = ()</code> are equivalent (and I'd prefer the former). Assigning an empty string to a hash emits a warning:</p>\n\n<pre><code>Odd number of elements in hash assignment at ...\n</code></pre>\n\n<p>and is equivalent to</p>\n\n<pre><code>my %hashVar = ( '' =&gt; undef );\n</code></pre>\n\n<p>i.e. it stores the undef value under the empty string key.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1463153767, "last_edit_date": 1463153767, "creation_date": 1463151903, "answer_id": 37213459, "question_id": 37212922, "link": "https://stackoverflow.com/questions/37212922/what-is-the-difference-between-using-and-and-when-declaring-variables/37213459#37213459", "title": "What is the difference between using &quot;&quot; and &#39;&#39; and () when declaring variables?", "body": "<p><code>\"\"</code> and <code>''</code> evaluate to an empty string.</p>\n\n<p>In scalar context, <code>()</code> evaluates to <code>undef</code>. Idiomatically, one would use <code>undef</code> instead of <code>()</code> when one knows it will be evaluated in scalar context.</p>\n\n<p>In list context, <code>()</code> does nothing. It's used as a placeholder where an expression is expected. Conceptually, it's viewed as an empty list.</p>\n\n<hr>\n\n<p>When assigning to a scalar, the value is copied into the scalar.</p>\n\n<p>When assigning to an array, the contents of the array are replaced with the assigned scalars.</p>\n\n<p>When assigning to a hash, the list to be assigned is expected to be a list of key-value pairs. The contents of the hash are replaced with the assigned key-value pairs.</p>\n\n<hr>\n\n<p>Scalars are undefined when created, and arrays and hashes are created empty, so</p>\n\n<pre><code>my $scalarVar = \"\";     # Creates a scalar containing an empty string.\nmy $scalarVar = '';     # Creates a scalar containing an empty string.\nmy $scalarVar = undef;  # Creates an undefined scalar. Uselessly noisy code.\nmy $scalarVar = ();     # Creates an undefined scalar. Uselessly noisy and weird code. \nmy $scalarVar;          # Creates an undefined scalar.\n\nmy @arrayVar  = \"\";     # Creates an array containing one scalar (an empty string).\nmy @arrayVar  = '';     # Creates an array containing one scalar (an empty string).\nmy @arrayVar  = undef;  # Creates an array containing one scalar (undefined).\nmy @arrayVar  = ();     # Creates an empty array. Uselessly noisy code.\nmy @arrayVar;           # Creates an empty array.\n\nmy %hashVar   = \"\";     # Warns. Makes no sense since a list of k-v pairs expected.\nmy %hashVar   = '';     # Warns. Makes no sense since a list of k-v pairs expected. \nmy %hashVar   = undef;  # Warns twice. Makes no sense since a list of k-v pairs expected.\nmy %hashVar   = ();     # Creates an empty hash. Uselessly noisy code.\nmy %hashVar;            # Creates an empty hash.\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 37213459, "answer_count": 2, "score": -2, "last_activity_date": 1463153767, "creation_date": 1463150424, "last_edit_date": 1463151916, "question_id": 37212922, "link": "https://stackoverflow.com/questions/37212922/what-is-the-difference-between-using-and-and-when-declaring-variables", "title": "What is the difference between using &quot;&quot; and &#39;&#39; and () when declaring variables?", "body": "<p>I've seen several different ways to declare variables in Perl:</p>\n\n<pre><code>my $scalarVar = \"\"; my $scalarVar = ''; my $scalarVar = (); my $scalarVar;\nmy @arrayVar  = \"\"; my @arrayVar  = ''; my @arrayVar  = (); my @arrayVar;\nmy %hashVar   = \"\"; my %hashVar   = ''; my %hashVar   = (); my %hashVar;\n</code></pre>\n\n<p>What is the difference between using <code>\"\"</code> and <code>''</code> and <code>()</code>?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 1144, "user_id": 1840078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a692b6a3f6e5e072256fe1dd1a6093?s=128&d=identicon&r=PG", "display_name": "Mark A. Fitzgerald", "link": "https://stackoverflow.com/users/1840078/mark-a-fitzgerald"}, "edited": false, "score": 0, "creation_date": 1463150355, "post_id": 37212830, "comment_id": 61957073, "body": "Could you please post some example input for testing purposes?"}, {"owner": {"reputation": 1144, "user_id": 1840078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a692b6a3f6e5e072256fe1dd1a6093?s=128&d=identicon&r=PG", "display_name": "Mark A. Fitzgerald", "link": "https://stackoverflow.com/users/1840078/mark-a-fitzgerald"}, "edited": false, "score": 0, "creation_date": 1463150541, "post_id": 37212830, "comment_id": 61957241, "body": "Also, how often do you need to do this? Would a code editor feature or plugin do the trick? Eclipse and Sublime Text can do this; chances are Notepad++ and others can as well."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1463150872, "post_id": 37212830, "comment_id": 61957505, "body": "The question is, is that valid? json_xs doesn&#39;t think so... <code>cat json.json | json_xs -f json -t json-pretty</code> gives <code>garbage after JSON object, at character offset 13 (before &quot;{&quot;bar&quot;:&quot;baz&quot;}{&quot;bo&quot;:&quot;...&quot;) at &#47;home&#47;foo&#47;...</code>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 1144, "user_id": 1840078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a692b6a3f6e5e072256fe1dd1a6093?s=128&d=identicon&r=PG", "display_name": "Mark A. Fitzgerald", "link": "https://stackoverflow.com/users/1840078/mark-a-fitzgerald"}, "edited": false, "score": 1, "creation_date": 1463152811, "post_id": 37212830, "comment_id": 61958861, "body": "@MarkA.Fitzgerald Please don&#39;t add irrelevant tags. The <a href=\"https://stackoverflow.com/questions/tagged/code-formatting\">code-formatting</a> tag wiki says &quot;Code formatting is the way to format the source code of programs,using spaces and tabs, improving legibility of source code.&quot; This question is about fixing invalid JSON data, not formatting source code for readability."}, {"owner": {"reputation": 1144, "user_id": 1840078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9a692b6a3f6e5e072256fe1dd1a6093?s=128&d=identicon&r=PG", "display_name": "Mark A. Fitzgerald", "link": "https://stackoverflow.com/users/1840078/mark-a-fitzgerald"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463153930, "post_id": 37212830, "comment_id": 61959523, "body": "Oversight on my part, @ThisSuitIsBlackNot. I thought he was prettifying JSON; turns out he&#39;s correcting invalid JSON. Sorry about that. :) It wasn&#39;t so that that was the case without example input."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 7, "last_activity_date": 1463150530, "creation_date": 1463150530, "answer_id": 37212971, "question_id": 37212830, "link": "https://stackoverflow.com/questions/37212830/perl-insert-new-line-between-every-match/37212971#37212971", "title": "Perl insert new line between every }{ match", "body": "<p>Don't just <code>print</code>. Substitute the newline in between the <code>}</code> and <code>{</code>. The <code>while</code> needs a block now because the last <code>s///</code> fails, so doing <code>s/// &amp;&amp; print while &lt;&gt;</code> doesn't work.</p>\n\n<pre><code>$ cat json.json\n{\"foo\":\"bar\"}{\"bar\":\"baz\"}{\"bo\":\"shizzle\"}\n$ perl -e '$/ = \"}{\"; while (&lt;&gt;) { s/\\}\\{$/}\\n{/; print; }' json.json \n{\"foo\":\"bar\"}\n{\"bar\":\"baz\"}\n{\"bo\":\"shizzle\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1463158440, "creation_date": 1463158440, "answer_id": 37215481, "question_id": 37212830, "link": "https://stackoverflow.com/questions/37212830/perl-insert-new-line-between-every-match/37215481#37215481", "title": "Perl insert new line between every }{ match", "body": "<pre><code>$ cat in.json\n{\"a\":\"b\",\"c\":\"d\"}{\"e\":\"f\",\"g\":\"h\"}\n\n$ perl -MJSON::XS -0777ne'\n   my $parser = JSON::XS-&gt;new-&gt;utf8;\n   $parser-&gt;incr_parse($_);\n   while ( my $obj = $parser-&gt;incr_parse() ) {\n      print( $parser-&gt;encode($obj), \"\\n\" );\n   }\n' in.json\n{\"c\":\"d\",\"a\":\"b\"}\n{\"e\":\"f\",\"g\":\"h\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463161166, "post_id": 37215895, "comment_id": 61963536, "body": "This doesn&#39;t work with nested objects, e.g. <code>{ &quot;foo&quot;: { &quot;bar&quot;: &quot;baz&quot; } }</code>. Also, your examples (e.g. <code>{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}</code>) aren&#39;t valid JSON."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463161263, "post_id": 37215895, "comment_id": 61963584, "body": "Yet it answers op&#39;s question, doesn&#39;t it?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463161442, "post_id": 37215895, "comment_id": 61963687, "body": "Not if they have nested objects in their data."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463161541, "post_id": 37215895, "comment_id": 61963742, "body": "Surely not if. From the fact that unwanted newline is the only complaint, I conclude this is not important."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463162106, "post_id": 37215895, "comment_id": 61964034, "body": "Sorry, but you&#39;re wrong. The OP is parsing a file line-by-line, where each line must contain a valid JSON object. Inserting an extra newline in the middle of an object creates two lines of invalid JSON, which could only be parsed by an incremental parser like in <a href=\"http://stackoverflow.com/a/37215481/176646\">ikegami&#39;s answer</a>. And if you have to use an incremental parser anyway, there&#39;s no point in using your solution in the first place."}, {"owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463305118, "post_id": 37215895, "comment_id": 62002372, "body": "&quot;The OP is parsing a file line-by-line, where each line must contain a valid JSON object.&quot;  Oh, really? Is it how you read the phrase &quot;It hasn&#39;t been created with new lines or any separator between to the objects&quot;?  Please consider it again. Op&#39;s infile is not a JSON file. It contains many JSON objects. Its each line contains many JSON objects. What contains a single object per line is the file he wants to create to write all this mess to. You are wrong. Can you stop arguing for no reason?"}], "tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": -1, "last_activity_date": 1463160060, "creation_date": 1463160060, "answer_id": 37215895, "question_id": 37212830, "link": "https://stackoverflow.com/questions/37212830/perl-insert-new-line-between-every-match/37215895#37215895", "title": "Perl insert new line between every }{ match", "body": "<pre><code>$ echo '{\"a\", \"b\", \"c\"}{42, \"omg\", \"nyan\"}{\"no\", \"please\", \"stop\"}' | perl -e '$/ = \"}\"; $\\ = \"}\\n\"; chomp and print while &lt;&gt;'\n{\"a\", \"b\", \"c\"}\n{42, \"omg\", \"nyan\"}\n{\"no\", \"please\", \"stop\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6237515, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BSGMi4oRdwg/AAAAAAAAAAI/AAAAAAAAABg/FwC7vIOVc5k/photo.jpg?sz=128", "display_name": "Tedy Grey", "link": "https://stackoverflow.com/users/6237515/tedy-grey"}, "is_accepted": false, "score": -1, "last_activity_date": 1463171206, "creation_date": 1463171206, "answer_id": 37218853, "question_id": 37212830, "link": "https://stackoverflow.com/questions/37212830/perl-insert-new-line-between-every-match/37218853#37218853", "title": "Perl insert new line between every }{ match", "body": "<p>You can do it manually with the search and replace tool.\nExample:\nSearch for : \"}{\"\nReplace with \"}^p{\" ( in Word ^p is new line)</p>\n"}], "owner": {"reputation": 1430, "user_id": 5090232, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/78660c72735fde17478238120c40694e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Edwards", "link": "https://stackoverflow.com/users/5090232/chris-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 385, "favorite_count": 0, "accepted_answer_id": 37212971, "answer_count": 4, "score": 2, "last_activity_date": 1463171206, "creation_date": 1463150199, "last_edit_date": 1463152818, "question_id": 37212830, "link": "https://stackoverflow.com/questions/37212830/perl-insert-new-line-between-every-match", "title": "Perl insert new line between every }{ match", "body": "<p>I have a text file which contains a large amount of JSON objects and It hasn't been created with new lines or any separator between to the objects.</p>\n\n<p>Currently I am using:</p>\n\n<pre><code>perl -e '$/ = \"}{\"; print \"$_\\n\" while &lt;&gt;' file.txt &gt; out.txt\n</code></pre>\n\n<p>But this causes malformed data as when the file gets split on new line the JSON objects will be missing the opening <code>{</code> as the new line gets placed after the <code>{</code>character.</p>\n\n<p>Is there a way to insert the new line replacement between the <code>}{</code> match such as <code>}\\n{</code>.</p>\n\n<p>The file is quite large so I cant manually do it.</p>\n\n<p>Doesn't have to be in Perl, can be in something more suited to the task.</p>\n"}, {"tags": ["perl", "curl", "lwp"], "comments": [{"owner": {"reputation": 359, "user_id": 1001500, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/eCNDe.png?s=128&g=1", "display_name": "gfunk", "link": "https://stackoverflow.com/users/1001500/gfunk"}, "edited": false, "score": 0, "creation_date": 1463453390, "post_id": 37212682, "comment_id": 62059285, "body": "verify_hostname =&gt; 1 should be =&gt; 0, that would match curl -k"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463152416, "post_id": 37213111, "comment_id": 61958625, "body": "Steffen - I updated my code as you suggested, enclosing Content-Type with single quotes, so the resulting syntax reads &#39;Content-Type&#39; =&gt; &#39;application/json&#39; and using strict I don&#39;t get an error, however I&#39;m still getting a 401 unauthorized error."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463153806, "post_id": 37213111, "comment_id": 61959453, "body": "@dthumb: please update the code and debug output in your question to reflect the current state."}, {"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463156954, "post_id": 37213111, "comment_id": 61961292, "body": "Updated original question with the edits as suggested - no longer seeing the malformed header but still getting a 401 Unauthorized return from the server. Thank you."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463159700, "post_id": 37213111, "comment_id": 61962780, "body": "@dthumb: based on the debug output the current request returns again a &quot;400 Bad request&quot; (the 401 is before your authorize).  It might be that you missing some headers the server expects - notably &quot;Accept&quot; which curl uses. Look at the documentation of the API you are using what is expected by the client."}, {"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463169904, "post_id": 37213111, "comment_id": 61967990, "body": "I appended the Apache logs from the server - the username isn&#39;t getting passed in the initial LWP POST...I&#39;m not sure how to add that or if it&#39;s being passed already via the UA credentials."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463194418, "post_id": 37213111, "comment_id": 61974455, "body": "@dthumb: This is normal behavior. Since LWP can manage multiple credentials at the same time it only sends the authorization when it receives a 401 from the server with the matching realm.  As you can see in the log files the requests with code 400 get the authorization and these are the requests which are relevant and where you need to find out why they fail."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463194888, "post_id": 37213111, "comment_id": 61974543, "body": "@dthumb: Unfortunately you&#39;ve removed the output of curl from your question which did show how a successful request looks like. And your code does not include the accept header even if you said you&#39;ve added it."}, {"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463408840, "post_id": 37213111, "comment_id": 62039704, "body": "@steffen_ullrich: I updated the latest version of the Perl and return the cURL syntax and output for both."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463411181, "post_id": 37213111, "comment_id": 62041253, "body": "@dthumb: are you sure the code matches the debug output? The debug output says that you sent a content-type of <code>application&#47;x-www-form-urlencoded</code> (the default) while the code says different. I&#39;ve tried this part of this code myself with the same version of libwww and it sets the content-type properly."}, {"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463411762, "post_id": 37213111, "comment_id": 62041595, "body": "@steffen_ullrich: You are correct - my mistake. I was going back and forth between application/json and application/x-www-form-urlencoded in testing. The debug output is a result of application/x-www-form-urlencoded content_type and I&#39;ve correctly reflected that in the source code."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463412199, "post_id": 37213111, "comment_id": 62041867, "body": "@dthumb: in this case I don&#39;t know what&#39;s happening from looking at the information in your question. If you have a test site I could maybe check myself what exactly triggers the Bad request vs. successful response."}, {"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463412376, "post_id": 37213111, "comment_id": 62041990, "body": "@steffen_ullrich: Unfortunately I don&#39;t have a test platform - these are production machines. I appreciate your help!"}, {"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463413493, "post_id": 37213111, "comment_id": 62042734, "body": "@steffen_ullrich: I switched around the source code and used a different syntax (see Revision #1 above) and I&#39;m getting beyond the 401 Unauthorized error but still getting the 400 Bad Request."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463414390, "post_id": 37213111, "comment_id": 62043341, "body": "@dthumb: this time it does not even get to the 401 because the initial request is already bad. From the debug output it looks that the content-length is missing."}, {"owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "edited": false, "score": 0, "creation_date": 1463414731, "post_id": 37213111, "comment_id": 62043556, "body": "@steffen_ullrich: I&#39;ve got it! I switched the quoting on the JSON string and success! I had it initially enclosed with double-quotes, single-quotes delimiting the JSON data itself. Reversing those quotes did the trick - I get a successful response from the server!"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 3, "last_activity_date": 1463150867, "creation_date": 1463150867, "answer_id": 37213111, "question_id": 37212682, "link": "https://stackoverflow.com/questions/37212682/perl-lwp-unauthorized-while-curl-ok/37213111#37213111", "title": "Perl LWP Unauthorized While Curl Ok", "body": "<p>TL;TR: <strong>always</strong> <code>use strict</code> !!</p>\n\n<blockquote>\n<pre><code>$response = $ua-&gt;post($url, Content-Type =&gt; 'application/json', Content =&gt; $json);\n</code></pre>\n</blockquote>\n\n<p>You've missed to quote around <code>Content-Type</code> which would have been detected by <code>use strict</code>. This result of this is a strange header <code>0</code> you see in the debug output:</p>\n\n<pre><code> 'content-type' =&gt; 'application/x-www-form-urlencoded',\n '0' =&gt; 'application/json',\n 'content-length' =&gt; 144,\n</code></pre>\n\n<p>And this also means that the setting of the content-type is wrong. This together results in the server not accepting your request:</p>\n\n<pre><code>  '_rc' =&gt; '400',\n  ...\n  '_msg' =&gt; 'Bad Request',\n</code></pre>\n\n<p>To understand what happens here look at what Perl actually sees in such code:</p>\n\n<pre><code> $ perl -MO=Deparse -e 'my %x = (Content-Type =&gt; 1, Foo =&gt; 2 )'\n my(%x) = ('Content' - 'Type', 1, 'Foo', 2);\n</code></pre>\n\n<p>This shows that it will interpret the unquoted <code>Content-Type</code> as <code>'Content' - 'Type'</code>. And since subtraction is not defined for strings they will be cast to an integer, i.e. <code>0</code>. Which means the result is <code>0</code> (<code>0-0</code>).</p>\n\n<p>When using strict you get instead:</p>\n\n<pre><code>perl -Mstrict -e 'my %x = (Content-Type =&gt; 1, Foo =&gt; 2 )'                                                                                                                                 \nBareword \"Content\" not allowed while \"strict subs\" in use at -e line 1.                                                                                                                                           \nExecution of -e aborted due to compilation errors.  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1463154947, "post_id": 37214325, "comment_id": 61960191, "body": "Updates to the question should be done as update to the question and <b>not as an answer</b>."}], "tags": [], "owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "is_accepted": false, "score": 0, "last_activity_date": 1463416896, "last_edit_date": 1463416896, "creation_date": 1463154573, "answer_id": 37214325, "question_id": 37212682, "link": "https://stackoverflow.com/questions/37212682/perl-lwp-unauthorized-while-curl-ok/37214325#37214325", "title": "Perl LWP Unauthorized While Curl Ok", "body": "<p>Found a solution - perhaps not the most elegant, but it does the trick. Ended up using HTTP::Request::Common to get around the authorization issue and reversed the quoting on the JSON variable to mitigate the 400 Bad Request and success - getting a correct return from the server! Thanks for the help @steffen_ullrich.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse HTTP::Request::Common;\nuse Data::Dumper;\n\nmy $fqdn_port = \"&lt;FQDN&gt;:443\";\nmy $url       = \"&lt;URL&gt;\";\nmy $realm     = \"&lt;REALM&gt;\";\nmy $username  = \"&lt;USERNAME&gt;\";\nmy $password  = \"&lt;PASSWORD&gt;\";\nmy $json      = '&lt;JSON_CONTENT&gt;';\n\nmy $ua = LWP::UserAgent-&gt;new(ssl_opts =&gt; { verify_hostname =&gt; 1 });\nmy $request = HTTP::Request-&gt;new('POST',$url);\n$request-&gt;header('Content-Type' =&gt; 'application/x-www-form-urlencoded', 'Accept' =&gt; '*/*');\n$request-&gt;authorization_basic($username,$password);\n$request-&gt;content($json);\n\nmy $response = $ua-&gt;request($request);\nprint Dumper $response;\nexit;\n\n\n$VAR1 = bless( {\n         '_protocol' =&gt; 'HTTP/1.1',\n         '_content' =&gt; '&lt;RETURN JSON FROM SERVER&gt;',\n         '_rc' =&gt; '200',\n         '_headers' =&gt; bless( {\n                    'connection' =&gt; 'close',\n                    'client-response-num' =&gt; 1,\n                    'date' =&gt; 'Mon, 16 May 2016 16:07:07 GMT',\n                    'client-ssl-cert-issuer' =&gt; '[REDACTED]',\n                    'client-ssl-cipher' =&gt; 'AES128-SHA256',\n                    'client-peer' =&gt; '&lt;SERVER_IP&gt;:443',\n                    'content-length' =&gt; '233',\n                    '::std_case' =&gt; {\n                              'client-date' =&gt; 'Client-Date',\n                              'client-response-num' =&gt; 'Client-Response-Num',\n                              'client-ssl-cert-subject' =&gt; 'Client-SSL-Cert-Subject',\n                              'client-ssl-cert-issuer' =&gt; 'Client-SSL-Cert-Issuer',\n                              'client-ssl-cipher' =&gt; 'Client-SSL-Cipher',\n                              'client-peer' =&gt; 'Client-Peer',\n                              'client-ssl-socket-class' =&gt; 'Client-SSL-Socket-Class'\n                            },\n                    'client-date' =&gt; 'Mon, 16 May 2016 16:07:07 GMT',\n                    'content-type' =&gt; 'application/json',\n                    'client-ssl-cert-subject' =&gt; '[REDACTED]',\n                    'server' =&gt; 'Apache',\n                    'client-ssl-socket-class' =&gt; 'IO::Socket::SSL'\n                      }, 'HTTP::Headers' ),\n         '_msg' =&gt; 'OK',\n         '_request' =&gt; bless( {\n                    '_content' =&gt; '&lt;JSON_CONTENT&gt;',\n                    '_uri' =&gt; bless( do{\\(my $o = '&lt;URL&gt;')}, 'URI::https' ),\n                    '_headers' =&gt; bless( {\n                                   'user-agent' =&gt; 'libwww-perl/6.15',\n                                   'content-type' =&gt; 'application/x-www-form-urlencoded',\n                                   'accept' =&gt; '*/*',\n                                   '::std_case' =&gt; {\n                                         'if-ssl-cert-subject' =&gt; 'If-SSL-Cert-Subject'\n                                           },\n                                   'authorization' =&gt; 'Basic &lt;BASE64-ENCODED USERNAME:PASSWORD&gt;'\n                                 }, 'HTTP::Headers' ),\n                    '_method' =&gt; 'POST',\n                    '_uri_canonical' =&gt; $VAR1-&gt;{'_request'}{'_uri'}\n                      }, 'HTTP::Request' )\n           }, 'HTTP::Response' );\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6317030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70252aa966c30000c5963ff83016eba1?s=128&d=identicon&r=PG&f=1", "display_name": "dthumb", "link": "https://stackoverflow.com/users/6317030/dthumb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1668, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463416896, "creation_date": 1463149836, "last_edit_date": 1463413419, "question_id": 37212682, "link": "https://stackoverflow.com/questions/37212682/perl-lwp-unauthorized-while-curl-ok", "title": "Perl LWP Unauthorized While Curl Ok", "body": "<p>I am attempting to recreate a working CURL command with LWP in Perl and I'm getting a 401 unauthorized error from LWP. The command posts JSON to a specific URL as seen in the code below. The server FQDN, IP, port and path are correct and identical between the curl and Perl as are the credentials and realm. Any help would be appreciated - thank you!</p>\n\n<p>Below is the working syntax in cURL and debug output:</p>\n\n<pre><code>#curl -v -k -u \"USERNAME:PASSWORD\" -X POST &lt;SERVER_URL&gt; -d '&lt;JSON CONTENT&gt;';\n\n* About to connect() to &lt;SERVER_URL&gt; port 443 (#0)\n*   Trying &lt;SERVER_IP&gt;... connected\n* Connected to &lt;SERVER_URL&gt; (&lt;SERVER_IP&gt;) port 443 (#0)\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n* warning: ignoring value of ssl.verifyhost\n* skipping SSL peer certificate verification\n* SSL connection using TLS_DHE_RSA_WITH_AES_256_CBC_SHA\n* Server certificate:\n*       subject: [REDACTED]\n*       start date: Apr 21 00:00:00 2016 GMT\n*       expire date: Apr 21 23:59:59 2019 GMT\n*       common name: &lt;SERVER_URL&gt;\n*       issuer: [REDACTED]\n* Server auth using Basic with user '&lt;USERNAME&gt;'\n&gt; POST &lt;SERVER_PATH&gt; HTTP/1.1\n&gt; Authorization: Basic &lt;BASE64-ENCODED USERNAME:PASSWORD&gt;\n&gt; User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.19.1 Basic ECC zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n&gt; Host: &lt;SERVER_URL&gt;\n&gt; Accept: */*\n&gt; Content-Length: 144\n&gt; Content-Type: application/x-www-form-urlencoded\n&gt; \n&lt; HTTP/1.1 200 OK\n&lt; Date: Fri, 13 May 2016 13:48:42 GMT\n&lt; Server: Apache\n&lt; Content-Type: application/json\n&lt; Content-Length: 256\n&lt; \n* Connection #0 to host &lt;SERVER_URL&gt; left intact\n* Closing connection #0\n</code></pre>\n\n<p>Updated Perl code and output per Steffen's suggestion. I corrected an initial quoting error and also added the Accept header to the LWP post command:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse Data::Dumper;\n\nmy $server_root_with_port = \"&lt;FQDN&gt;:443\";\nmy $url = \"&lt;SERVER_URL&gt;\";\nmy $realm = \"&lt;SERVER_REALM&gt;\";\nmy $json = \"&lt;JSON CONTENT&gt;\";\nmy $ua = LWP::UserAgent-&gt;new(ssl_opts =&gt; { verify_hostname =&gt; 1 });\n$ua-&gt;credentials($server_root_with_port,$realm,$username=&gt;$password);\n$response = $ua-&gt;post($url, 'Content-Type' =&gt; 'application/x-www-form-urlencoded', 'Accept' =&gt; '*/*', 'Content' =&gt; $json);\nprint Dumper $response;\n\nexit;\n\n$VAR1 = bless( {\n         '_protocol' =&gt; 'HTTP/1.1',\n         '_content' =&gt; '',\n         '_rc' =&gt; '400',\n         '_headers' =&gt; bless( {\n                    'connection' =&gt; 'close',\n                    'client-response-num' =&gt; 1,\n                    'date' =&gt; 'Mon, 16 May 2016 14:18:59 GMT',\n                    'client-ssl-cert-issuer' =&gt; '[REDACTED]',\n                    'client-ssl-cipher' =&gt; 'AES128-SHA256',\n                    'client-peer' =&gt; '&lt;SERVER_IP&gt;:443',\n                    'content-length' =&gt; '0',\n                    '::std_case' =&gt; {\n                              'client-date' =&gt; 'Client-Date',\n                              'client-response-num' =&gt; 'Client-Response-Num',\n                              'client-ssl-cert-subject' =&gt; 'Client-SSL-Cert-Subject',\n                              'client-ssl-cert-issuer' =&gt; 'Client-SSL-Cert-Issuer',\n                              'client-ssl-cipher' =&gt; 'Client-SSL-Cipher',\n                              'client-peer' =&gt; 'Client-Peer',\n                              'client-ssl-socket-class' =&gt; 'Client-SSL-Socket-Class'\n                            },\n                    'client-date' =&gt; 'Mon, 16 May 2016 14:18:59 GMT',\n                    'client-ssl-cert-subject' =&gt; '[REDACTED]',\n                    'server' =&gt; 'Apache',\n                    'client-ssl-socket-class' =&gt; 'IO::Socket::SSL'\n                      }, 'HTTP::Headers' ),\n         '_previous' =&gt; bless( {\n                     '_protocol' =&gt; 'HTTP/1.1',\n                     '_content' =&gt; '&lt;!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\"&gt;\n                            &lt;html&gt;&lt;head&gt;\n                            &lt;title&gt;401 Unauthorized&lt;/title&gt;\n                            &lt;/head&gt;&lt;body&gt;\n                            &lt;h1&gt;Unauthorized&lt;/h1&gt;\n                            &lt;p&gt;This server could not verify that you\n                            are authorized to access the document\n                            requested.  Either you supplied the wrong\n                            credentials (e.g., bad password), or your\n                            browser doesn\\'t understand how to supply\n                            the credentials required.&lt;/p&gt;\n                            &lt;/body&gt;&lt;/html&gt;\n                            ',\n                     '_rc' =&gt; '401',\n                     '_headers' =&gt; bless( {\n                                'connection' =&gt; 'close',\n                                'client-response-num' =&gt; 1,\n                                'date' =&gt; 'Mon, 16 May 2016 14:18:59 GMT',\n                                'client-ssl-cert-issuer' =&gt; '[REDACTED]',\n                                'client-ssl-cipher' =&gt; 'AES128-SHA256',\n                                'client-peer' =&gt; '&lt;SERVER_IP&gt;:443',\n                                'content-length' =&gt; '381',\n                                '::std_case' =&gt; {\n                                          'client-date' =&gt; 'Client-Date',\n                                          'client-response-num' =&gt; 'Client-Response-Num',\n                                          'client-ssl-cert-subject' =&gt; 'Client-SSL-Cert-Subject',\n                                          'title' =&gt; 'Title',\n                                          'client-ssl-cert-issuer' =&gt; 'Client-SSL-Cert-Issuer',\n                                          'client-ssl-cipher' =&gt; 'Client-SSL-Cipher',\n                                          'client-peer' =&gt; 'Client-Peer',\n                                          'client-ssl-socket-class' =&gt; 'Client-SSL-Socket-Class'\n                                        },\n                                'client-date' =&gt; 'Mon, 16 May 2016 14:18:59 GMT',\n                                'content-type' =&gt; 'text/html; charset=iso-8859-1',\n                                'client-ssl-cert-subject' =&gt; '[REDACTED]',\n                                'www-authenticate' =&gt; 'Basic realm=\"&lt;SERVER_REALM&gt;\"',\n                                'title' =&gt; '401 Unauthorized',\n                                'server' =&gt; 'Apache',\n                                'client-ssl-socket-class' =&gt; 'IO::Socket::SSL'\n                                  }, 'HTTP::Headers' ),\n                     '_msg' =&gt; 'Unauthorized',\n                     '_request' =&gt; bless( {\n                                '_content' =&gt; '&lt;JSON_CONTENT&gt;',\n                                '_uri' =&gt; bless( do{\\(my $o = '&lt;SERVER_URL&gt;')}, 'URI::https' ),\n                                '_headers' =&gt; bless( {\n                                               'user-agent' =&gt; 'libwww-perl/6.15',\n                                               'content-type' =&gt; 'application/x-www-form-urlencoded',\n                                               'accept' =&gt; '*/*',\n                                               'content-length' =&gt; 144,\n                                               '::std_case' =&gt; {\n                                                     'if-ssl-cert-subject' =&gt; 'If-SSL-Cert-Subject'\n                                                       }\n                                             }, 'HTTP::Headers' ),\n                                '_method' =&gt; 'POST',\n                                '_uri_canonical' =&gt; $VAR1-&gt;{'_previous'}{'_request'}{'_uri'}\n                                  }, 'HTTP::Request' )\n                       }, 'HTTP::Response' ),\n         '_msg' =&gt; 'Bad Request',\n         '_request' =&gt; bless( {\n                    '_protocol' =&gt; undef,\n                    '_content' =&gt; '&lt;JSON_CONTENT&gt;',\n                    '_uri' =&gt; bless( do{\\(my $o = '&lt;SERVER_URL&gt;')}, 'URI::https' ),\n                    '_headers' =&gt; bless( {\n                                   'user-agent' =&gt; 'libwww-perl/6.15',\n                                   'content-type' =&gt; 'application/x-www-form-urlencoded',\n                                   'accept' =&gt; '*/*',\n                                   'content-length' =&gt; 144,\n                                   'authorization' =&gt; '&lt;BASE64-ENCODED USERNAME:PASSWORD&gt;',\n                                   '::std_case' =&gt; {\n                                         'if-ssl-cert-subject' =&gt; 'If-SSL-Cert-Subject'\n                                           }\n                                 }, 'HTTP::Headers' ),\n                    '_method' =&gt; 'POST',\n                    '_uri_canonical' =&gt; $VAR1-&gt;{'_request'}{'_uri'}\n                      }, 'HTTP::Request' )\n           }, 'HTTP::Response' );\n</code></pre>\n\n<p>Perl Revision #1:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse HTTP::Request::Common;\nuse Data::Dumper;\n\nmy $fqdn_port = \"&lt;FQDN&gt;:443\";\nmy $url       = \"&lt;URL&gt;\";\nmy $realm     = \"&lt;REALM&gt;\";\nmy $username  = \"&lt;USERNAME&gt;\";\nmy $password  = \"&lt;PASSWORD&gt;\";\nmy $json      = \"&lt;JSON_CONTENT&gt;\";\n\nmy $ua = LWP::UserAgent-&gt;new(ssl_opts =&gt; { verify_hostname =&gt; 1 });\n\n#$ua-&gt;credentials($fqdn_port,$realm,$username=&gt;$password);\n#my $response = $ua-&gt;post($url, 'Content-Type' =&gt; 'application/x-www-form-urlencoded', 'Accept' =&gt; '*/*', Content =&gt; $json);\n\nmy $request = HTTP::Request-&gt;new('POST',$url);\n$request-&gt;header('Content-Type' =&gt; 'application/x-www-form-urlencoded', 'Accept' =&gt; '*/*');\n$request-&gt;authorization_basic($username,$password);\n$request-&gt;content($json);\n\nmy $response = $ua-&gt;request($request);\n\nprint Dumper $response;\n\nexit;\n\n\n$VAR1 = bless( {\n         '_protocol' =&gt; 'HTTP/1.1',\n         '_content' =&gt; '',\n         '_rc' =&gt; '400',\n         '_headers' =&gt; bless( {\n                    'connection' =&gt; 'close',\n                    'client-response-num' =&gt; 1,\n                    'date' =&gt; 'Mon, 16 May 2016 15:41:10 GMT',\n                    'client-ssl-cert-issuer' =&gt; '[REDACTED]',\n                    'client-ssl-cipher' =&gt; 'AES128-SHA256',\n                    'client-peer' =&gt; '&lt;SERVER_IP&gt;:443',\n                    'content-length' =&gt; '0',\n                    '::std_case' =&gt; {\n                              'client-date' =&gt; 'Client-Date',\n                              'client-response-num' =&gt; 'Client-Response-Num',\n                              'client-ssl-cert-subject' =&gt; 'Client-SSL-Cert-Subject',\n                              'client-ssl-cert-issuer' =&gt; 'Client-SSL-Cert-Issuer',\n                              'client-ssl-cipher' =&gt; 'Client-SSL-Cipher',\n                              'client-peer' =&gt; 'Client-Peer',\n                              'client-ssl-socket-class' =&gt; 'Client-SSL-Socket-Class'\n                            },\n                    'client-date' =&gt; 'Mon, 16 May 2016 15:41:10 GMT',\n                    'client-ssl-cert-subject' =&gt; '[REDACTED]',\n                    'server' =&gt; 'Apache',\n                    'client-ssl-socket-class' =&gt; 'IO::Socket::SSL'\n                      }, 'HTTP::Headers' ),\n         '_msg' =&gt; 'Bad Request',\n         '_request' =&gt; bless( {\n                    '_content' =&gt; '&lt;JSON_CONTENT&gt;',\n                    '_uri' =&gt; bless( do{\\(my $o = '&lt;URL&gt;')}, 'URI::https' ),\n                    '_headers' =&gt; bless( {\n                                   'user-agent' =&gt; 'libwww-perl/6.15',\n                                   'content-type' =&gt; 'application/x-www-form-urlencoded',\n                                   'accept' =&gt; '*/*',\n                                   '::std_case' =&gt; {\n                                         'if-ssl-cert-subject' =&gt; 'If-SSL-Cert-Subject'\n                                           },\n                                   'authorization' =&gt; 'Basic &lt;BASE64-ENCODED USERNAME:PASSWORD&gt;'\n                                 }, 'HTTP::Headers' ),\n                    '_method' =&gt; 'POST',\n                    '_uri_canonical' =&gt; $VAR1-&gt;{'_request'}{'_uri'}\n                      }, 'HTTP::Request' )\n           }, 'HTTP::Response' );\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1463144862, "post_id": 37210496, "comment_id": 61952882, "body": "Wondering why you want such interface, where the quoted and unquoted arguments behaves differently. For me this looks like an source of future bugs..."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1463149093, "post_id": 37210496, "comment_id": 61956026, "body": "@cajwine: that contradicts what you say in the question where you want doit(&#39;123&#39;) to be considered octal too ??"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1463149351, "post_id": 37211404, "comment_id": 61956208, "body": "<code>sub isNumber { no warnings &quot;numeric&quot;; length($_[0] &amp; &quot;&quot;) }</code>"}, {"owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1463208999, "post_id": 37211404, "comment_id": 61977444, "body": "Ahh yes!!! The <code>use B</code> derived <code>isString</code> is <i>exactly</i> for what me looking. The @ysth &#39;s <code>isNumber</code> works too, but the <code>isString</code> is nearly twice as fast. GREAT! thank you. ;)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 6, "last_activity_date": 1463147657, "last_edit_date": 1495541764, "creation_date": 1463146355, "answer_id": 37211404, "question_id": 37210496, "link": "https://stackoverflow.com/questions/37210496/differentiate-string-and-number-argument-in-perl/37211404#37211404", "title": "Differentiate string and number argument in perl", "body": "<p>Perl's internal representation of a scalar may be as in integer or a string, and it remains ready to coerce that representation into any other scalar type at any moment. It is possible with C/XS code to get at a scalar's internal type. The <a href=\"http://metacpan.org/pod/JSON\" rel=\"nofollow noreferrer\"><code>JSON::XS</code></a> module does this, for example, to decide whether a value should be rendered as a number or as a string.</p>\n\n<p>Here's a proof of concept for your problem:</p>\n\n<pre><code>use Inline 'C';\nsub foo {\n    my ($x) = @_;\n    print $x, \" =&gt; isString: \", isString($x), \"\\n\";\n}\nfoo(0123);\nfoo('0123');\n\n__END__\nint isString(SV* sv)\n{\n    return SvPOK(sv) ? 1 : 0;\n}\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>83 =&gt; isString: 0\n0123 =&gt; isString: 1\n</code></pre>\n\n<p>Related posts:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17332808/difference-between-var-500-and-var-500/17348256#17348256\">Difference between $var = 500 and $var = '500'</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2980550/when-does-the-difference-between-a-string-and-a-number-matter-in-perl-5\">When does the difference between a string and a number matter in Perl 5?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/17068764/why-does-the-json-module-quote-some-numbers-but-not-others\">Why does the JSON module quote some numbers but not others?</a></p>\n\n<p><strong>Update</strong> some of this functionality is exposed in the core <a href=\"http://metacpan.org/pod/B\" rel=\"nofollow noreferrer\"><code>B</code></a> module, so no need to add as XS dependency:</p>\n\n<pre><code>use B;\nsub isString {\n    my $scalar = shift;\n    return 0 != (B::svref_2object(\\$scalar)-&gt;FLAGS &amp; B::SVf_POK)\n}\n</code></pre>\n"}], "owner": {"reputation": 2992, "user_id": 869025, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/870db1cfd53a1dfbe9467082bb9777b1?s=128&d=identicon&r=PG", "display_name": "cajwine", "link": "https://stackoverflow.com/users/869025/cajwine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 1, "accepted_answer_id": 37211404, "answer_count": 1, "score": 2, "last_activity_date": 1463208602, "creation_date": 1463143756, "last_edit_date": 1463208602, "question_id": 37210496, "link": "https://stackoverflow.com/questions/37210496/differentiate-string-and-number-argument-in-perl", "title": "Differentiate string and number argument in perl", "body": "<p>How to solve the following?</p>\n\n<pre><code>use 5.014;\nuse warnings;\nuse Test::Simple tests =&gt; 4;\n\nok( doit(0123)   == 83, \"arg as octal number\" );\nok( doit(83)     == 83, \"arg as decimal number\" );\nok( doit('0123') == 83, \"arg as string with leading zero\" );\nok( doit('123')  == 83, \"arg as string without leading zero\" );\n\nsub doit {\n    my $x = shift;\n    return $x;                                     # how to replace this line\n    #return  got_the_arg_as_string ? oct($x) : $x; # with something like this\n}\n</code></pre>\n\n<p>E.g. If i pass to the <code>doit</code> sub any string - mean quoted value - (with or without the leading zero), it should be converted to octal value. Otherwise, it is just an number.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3093, "user_id": 711269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f0ff4862ab2e9434c0aa66279f3244d?s=128&d=identicon&r=PG&f=1", "display_name": "rbm", "link": "https://stackoverflow.com/users/711269/rbm"}, "edited": false, "score": 1, "creation_date": 1463136866, "post_id": 37208091, "comment_id": 61947372, "body": "<code>$tp</code> is reference to array so <code>@$tp</code> dereferences it and makes it an array."}, {"owner": {"reputation": 907, "user_id": 6146688, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f262dda91bdff7ff11cf7762124764d?s=128&d=identicon&r=PG", "display_name": "Paul L", "link": "https://stackoverflow.com/users/6146688/paul-l"}, "edited": false, "score": 0, "creation_date": 1463147109, "post_id": 37208091, "comment_id": 61954451, "body": "There is no <code>@tp</code> array anywhere in this code.  Do you have <code>@tp</code> somewhere in your code and are trying to iterate over it in this loop?  If so, you accidentally typed <code>@$tp</code> where you meant <code>@tp</code>.  Make sure you put <code>use strict;</code> and <code>use warnings;</code> at the top of every Perl program you write."}], "answers": [{"comments": [{"owner": {"reputation": 2156, "user_id": 3610018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6rKB8.jpg?s=128&g=1", "display_name": "nanocv", "link": "https://stackoverflow.com/users/3610018/nanocv"}, "reply_to_user": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "edited": false, "score": 1, "creation_date": 1463417319, "post_id": 37208206, "comment_id": 62044969, "body": "@DipitSethi you should validate the answer (check mark on the left)."}, {"owner": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "edited": false, "score": 0, "creation_date": 1464161533, "post_id": 37208206, "comment_id": 62365065, "body": "hey, can you help me with this -&gt; DBD::SQLAnywhere initialisation failed: DBD::SQLAnywhere-&gt;driver didn&#39;t return a handle, i am getting this while running my code. Another code with db connection. i have put query also for the same."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 16, "last_activity_date": 1463138828, "last_edit_date": 1463138828, "creation_date": 1463136872, "answer_id": 37208206, "question_id": 37208091, "link": "https://stackoverflow.com/questions/37208091/what-is-variable-in-perl/37208206#37208206", "title": "What is @$ variable in perl?", "body": "<p><code>@$</code> in the context above is not a variable. It's a dereference. </p>\n\n<p><code>$tp</code> is a reference to an array. <code>@$tp</code> says \"dereference and give me the values\", it could also be written as <code>@{$tp}</code>. </p>\n\n<p>E.g.:</p>\n\n<pre><code>my @array = ( 1, 2, 3 );\nmy $array_ref = \\@array; \nprint \"REF: \", $array_ref,\"\\n\";\nprint \"VALUES: \", join \" \", @$array_ref; \n</code></pre>\n\n<p>You can create an array reference without having an actual array by the square brackets:</p>\n\n<pre><code>my $array_ref = [ 1, 2, 3 ];\n</code></pre>\n"}], "owner": {"reputation": 86, "user_id": 6330057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1185636201448528/picture?type=large", "display_name": "Dipit Sethi", "link": "https://stackoverflow.com/users/6330057/dipit-sethi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7812, "favorite_count": 0, "accepted_answer_id": 37208206, "answer_count": 1, "score": 2, "last_activity_date": 1463138828, "creation_date": 1463136585, "last_edit_date": 1463136805, "question_id": 37208091, "link": "https://stackoverflow.com/questions/37208091/what-is-variable-in-perl", "title": "What is @$ variable in perl?", "body": "<p>Ex:</p>\n\n<pre><code> foreach my $var (@$tp)  \n      {  \n        my $sql=$startsql1.$var.$endsql1;  \n        print \" SQL stamt \\n $sql \\n\";  \n        my $sel_stmt=$dbh-&gt;prepare($sql);  \n        $sel_stmt-&gt;execute() or warn $DBI::errstr;  \n        my @result = $sel_stmt-&gt;fetchrow_array();  \n        $sel_stmt-&gt;finish();  \n        $tphash{$result[0]} = [ @result ];          \n     }  \n</code></pre>\n\n<ul>\n<li>@tp is an array. It is not giving any output when i print $var.</li>\n</ul>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463133382, "post_id": 37206776, "comment_id": 61945060, "body": "Do you want a command to execute from a terninal -- one-liner?  What does it mean &quot;<i>converting to negative decimal</i>&quot;?  You replace <code>{</code> by <code>0</code> and then ... make it what?"}, {"owner": {"reputation": 231, "user_id": 1768029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9f2a51fe26badb08a8601bf9645a4ed5?s=128&d=identicon&r=PG", "display_name": "user1768029", "link": "https://stackoverflow.com/users/1768029/user1768029"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463134088, "post_id": 37206776, "comment_id": 61945544, "body": "Since I am new to Perl , I am not sure if one line command is available to do the above functionality. whenever { is found in string it need to be replaced with 0 also make a negative decimal number considering 10 digits before {. ex: if input is 111123456789{, output will be 11-112345678.90"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463135221, "post_id": 37206776, "comment_id": 61946289, "body": "OK, got it, but -- is the comma in your example above indeed between 8 and 9 (<code>8.90</code>) or perhaps after 9, <code>89.0</code> ?"}, {"owner": {"reputation": 231, "user_id": 1768029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9f2a51fe26badb08a8601bf9645a4ed5?s=128&d=identicon&r=PG", "display_name": "user1768029", "link": "https://stackoverflow.com/users/1768029/user1768029"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463135364, "post_id": 37206776, "comment_id": 61946374, "body": "sorry comma is not a part of input. Input is just 111123456789{ and expected output is 11-112345678.90"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463135462, "post_id": 37206776, "comment_id": 61946427, "body": "That&#39;s fine, that is what I meant, in output.  So it is one character further to the left from where <code>{</code> is.  So that <code>1234{</code> --&gt; <code>123.40</code> (and minus ten places to the left).  i&#39;ll post in a minute, let me know how it looks."}, {"owner": {"reputation": 231, "user_id": 1768029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9f2a51fe26badb08a8601bf9645a4ed5?s=128&d=identicon&r=PG", "display_name": "user1768029", "link": "https://stackoverflow.com/users/1768029/user1768029"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463135664, "post_id": 37206776, "comment_id": 61946575, "body": "Yes, This looks correct."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 4, "last_activity_date": 1464116333, "last_edit_date": 1495535317, "creation_date": 1463133724, "answer_id": 37207062, "question_id": 37206776, "link": "https://stackoverflow.com/questions/37206776/perl-command-to-replace-the-string-based-on-position/37207062#37207062", "title": "perl command to replace the string based on position", "body": "<p>Use <code>substr</code> function in Perl.  It finds a string inside of another, by its offset, position, length. It can optionally replace it, by another argument. It returns this substring, located and possibly replaced. See <a href=\"http://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\">substr documentation</a>.  This is exactly as ordered for this problem.</p>\n\n<p>The needed transformation is a bit complicated, so it will involve 3 uses of <code>substr</code>, and some counting.  The <code>-</code> need be inserted 10 positions to the left, and the decimal period/comma at two positions to the left.  Finally, the <code>{</code> itself gets replaced. Note that position counting starts with 0, for the first character.</p>\n\n<p>To see how this works use the example from the comment, which is</p>\n\n<pre>\n111123456789{  -->  11-112345678.90\n</pre>\n\n<p>In this case <code>{</code> is at position 12.</p>\n\n<pre><code>echo \"111123456789{\" | perl -pne \n   '$x = substr($_, 2, 9); substr($_, 2, 9, \"-$x.\"); substr($_, 14, 1, \"0\")'\n</code></pre>\n\n<p>This must be entered on a single line at a terminal; it is broken over two lines here for readability. The <code>$_</code> above is Perl's 'default' variable carrying what is currently being processed, so here the string. This prints <code>11-112345678.90</code> as specified.  </p>\n\n<p>The first command extracts the string between positions where the <code>-</code> and <code>.</code> need be entered, which starts at 10 positions to the left of position 12 (so, at 2) and is of length 9.  Then that substring is written back there, now padded with <code>-</code> and <code>.</code>.  Finally the <code>{</code> is replaced by <code>0</code>.</p>\n\n<hr>\n\n<p><strong>Update -- an alternative use of <code>subtstr</code></strong></p>\n\n<p>While the above allows more general transformations, for the exact task of inserting characters one can simply add <code>-</code> and <code>.</code> at given positions, by using <code>0</code> for length.  The replacement of <code>{</code> is done as above.</p>\n\n<pre><code>perl -pne 'substr($_, 2, 0, \"-\"); substr($_, 12, 0, \".\"); substr($_, 14, 1, \"0\")'\n</code></pre>\n\n<p>This way <code>$_</code> is changed each time, and finally printed by courtesy of <code>-p</code> switch (see end). Since the first insertion adds a character the second one needs to happen at one position further down the string.</p>\n\n<p>Note that this isn't more efficient. While it avoids creating a new string <code>$x</code>, it changes the string one extra time.  Re-writing any part of the string, except for an exact character replacement, means that at least the rest of string has to be saved away and then copied back. For longer strings this is more expensive and this approach may be less efficient. However, this is not going to be noticable except if <em>many</em> such operations are run, or in benchmarks.</p>\n\n<hr>\n\n<p>To apply this to the actual problem, we have 299 instead of 12</p>\n\n<pre><code>perl -pne \n   '$x = substr($_, 289, 9); substr($_, 289, 9, \"-$x.\"); substr($_, 301, 1, \"0\")'\n   input_file.txt\n</code></pre>\n\n<p>The second example above can be used as well, with suitably adjusted numbers.</p>\n\n<p>Switches and special variables:</p>\n\n<ul>\n<li><p><code>-e</code> indicates that what follows inside <code>'...'</code> is to be executed by Perl as a program</p></li>\n<li><p><code>-n</code> loops over lines of input (you can feed this a file with many such lines)</p></li>\n<li><p><code>-p</code> makes it print the <code>$_</code> (we don't need to say <code>print</code>)</p></li>\n<li><p><code>$_</code> has the current line of input.</p></li>\n</ul>\n\n<hr>\n\n<p>This can also be done with a regex. See the answer by <a href=\"https://stackoverflow.com/users/5830574/perl-dog\">Perl Dog</a> and for a more efficient version a comment below it.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1463771428, "post_id": 37219067, "comment_id": 62223768, "body": "Good to have a regex here as well.  Since OP mentioned performance (and in general) it&#39;d be good to not capture-and-copy all ~300 chars, but only replace what&#39;s needed, say using <code>pos</code> and <code>\\G</code>.  For example along the lines of  <code>perl -wE &#39;$s = &quot;123abc&quot;; pos($s) = 3; $x =~ s&#47;\\G(.)&#47;X&#47;; say $s&#39;</code>, replacing one char after position 3, so <code>a</code> becomes <code>X</code>.  The <code>\\G</code> matches at <code>pos</code> (search for &#39;pos&#39; or go to &quot;Assertions&quot; in <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a>).  I think your code can just go in, instead of <code>3</code> and single char capture and replacement in oneliner (tested on shorter example)."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1463860444, "post_id": 37219067, "comment_id": 62247536, "body": "@zdim Sounds reasonable. I never thought of <i>setting</i> <code>pos()</code> but it&#39;s really a good idea. Thank you."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1463172292, "creation_date": 1463172292, "answer_id": 37219067, "question_id": 37206776, "link": "https://stackoverflow.com/questions/37206776/perl-command-to-replace-the-string-based-on-position/37219067#37219067", "title": "perl command to replace the string based on position", "body": "<p>As I understand the Q and your input line, say <code>$line</code>, this pattern gives me your desired result:</p>\n\n<pre><code>$line =~ s/^(.{289})    # start and then 289 arbitrary chars -&gt; $1\n            (\\d{9})     # 9 digits                           -&gt; $2\n            (\\d)        # another 10th digit                 -&gt; $3\n            \\{          # literal '{' at pos. 300\n          /${1}-${2}.${3}0/x;\n</code></pre>\n\n<p>The replacement is then the first 289 chars, a minus sign, the next 9 digits, a dot, the 10th digit, a 0 (zero) (and the remaining stuff is kept unchanged).</p>\n"}], "owner": {"reputation": 231, "user_id": 1768029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9f2a51fe26badb08a8601bf9645a4ed5?s=128&d=identicon&r=PG", "display_name": "user1768029", "link": "https://stackoverflow.com/users/1768029/user1768029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2751, "favorite_count": 0, "accepted_answer_id": 37207062, "answer_count": 2, "score": 2, "last_activity_date": 1464116333, "creation_date": 1463133052, "last_edit_date": 1463137143, "question_id": 37206776, "link": "https://stackoverflow.com/questions/37206776/perl-command-to-replace-the-string-based-on-position", "title": "perl command to replace the string based on position", "body": "<p><p> I need to check if 300th character is <code>{</code> and if yes ,  it need to be replaced with 0 also make a negative decimal number considering 10 digits before {. ex: if input is 111123456789{, output will be 11-112345678.90 .\n<p> My Sample  input is :</p>\n\n<pre><code>H009704COV2009084    PHD0000001H009700204COV2009084    PROD2015122016010418371304COVH009704COV2009084    PTR0000001H0097002C00000000140000000043610000003408092A0000000068061C0000000000000{0000002939340H0000000537585H0000003476926F0000001218378G0000000040292E0000000016497{0000000000827E0000001880498{9000000320436J000000004391000000001606000000000030000000000128000000000006000000004227000000000000000000000000            00000140              0000000000000{0000000000773B0000000000000{000000000000\n</code></pre>\n\n<p>Here 300th character is <code>{</code>.So if i replace this by 0 and converting it to negative decimal, expected output will be :</p>\n\n<pre><code>H009704COV2009084    PHD0000001H009700204COV2009084    PROD2015122016010418371304COVH009704COV2009084    PTR0000001H0097002C00000000140000000043610000003408092A0000000068061C0000000000000{0000002939340H0000000537585H0000003476926F0000001218378G0000000040292E0000000016497{0000000000827E000-000188049.809000000320436J000000004391000000001606000000000030000000000128000000000006000000004227000000000000000000000000            00000140              0000000000000{0000000000773B0000000000000{000000000000\n</code></pre>\n\n<p>I can do this by using sed command :</p>\n\n<pre><code>sed -e 's/\\ (.\\ {1,255\\ }\\ )\\ (.\\ {1,34\\ }\\ )\\ (.\\ {1,9\\ }\\ )\\ ([^{]*\\ ){/\\1\\2+\\3.\\40/'\n</code></pre>\n\n<p>But performace is bad when input file has huge records (~80000). Can anyone tell me how to convert the above sed command to perl for same functionality?</p>\n"}, {"tags": ["regex", "perl", "samtools"], "comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1463138984, "post_id": 37206608, "comment_id": 61948720, "body": "Can you give the expected input and output, and clearly demonstrate what you&#39;re trying to do?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6235735, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157059259565556/picture?type=large", "display_name": "Daniel Kelly", "link": "https://stackoverflow.com/users/6235735/daniel-kelly"}, "edited": false, "score": 0, "creation_date": 1463142974, "post_id": 37209428, "comment_id": 61951513, "body": "I&#39;ve had to put my file into an array and used your answer in a foreach loop but that has worked perfectly. Thanks a lot for your help with this!"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 1, "user_id": 6235735, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157059259565556/picture?type=large", "display_name": "Daniel Kelly", "link": "https://stackoverflow.com/users/6235735/daniel-kelly"}, "edited": false, "score": 0, "creation_date": 1463219816, "post_id": 37209428, "comment_id": 61980513, "body": "@DanielKelly - No worries!"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "reply_to_user": {"reputation": 1, "user_id": 6235735, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157059259565556/picture?type=large", "display_name": "Daniel Kelly", "link": "https://stackoverflow.com/users/6235735/daniel-kelly"}, "edited": false, "score": 0, "creation_date": 1477368744, "post_id": 37209428, "comment_id": 67725208, "body": "@DanielKelly, I don&#39;t believe this works.  Consider &quot;+3ACGT&quot; -- the greedy nature of * will consume more bases than the indel specifies.  See my answer to <a href=\"http://stackoverflow.com/questions/37491704/python-regex-to-match-and-remove-the-indels-in-pileup-format/40231190#40231190\">Python regex to match and remove the indels in pileup format</a> for further discussion of this."}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 0, "last_activity_date": 1463140438, "creation_date": 1463140438, "answer_id": 37209428, "question_id": 37206608, "link": "https://stackoverflow.com/questions/37206608/mpileup-regex-command-to-remove-indels/37209428#37209428", "title": "Mpileup regex command to remove indels", "body": "<p>Is this what you're after?</p>\n\n<pre><code>use feature qw(say);\n\nmy $DNA = ',...........,,....,,g.,,,,,,,,,,,.+12GATGCTGTGTTT..,,,,,.,,.,,-8tgatgctg,,,,,,,,..';\n\nsay $DNA;\n\n$DNA =~ s/\\d+[ATGCatgc]*//g;\n\nsay $DNA;\n</code></pre>\n\n<hr>\n\n<pre><code>,...........,,....,,g.,,,,,,,,,,,.+12GATGCTGTGTTT..,,,,,.,,.,,-8tgatgctg,,,,,,,,..\n,...........,,....,,g.,,,,,,,,,,,.+..,,,,,.,,.,,-,,,,,,,,..\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1477369642, "creation_date": 1477369642, "answer_id": 40231379, "question_id": 37206608, "link": "https://stackoverflow.com/questions/37206608/mpileup-regex-command-to-remove-indels/40231379#40231379", "title": "Mpileup regex command to remove indels", "body": "<p>A slight variation on the pattern you already have should work:</p>\n\n<pre><code>$pileup = '$,...........................,,.................,,....,,g.,,,,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,...............,,,.....,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.....,,.....,,,,,,,,,,,......,,,,,,,,,,,,,,,,,,,,,,,,,,.,,.,,,.............................,,.,.........,.,.,,....,..........,,......................,,,,,,...........................,,,,,,,,.....,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,.+12GATGCTGTGTTT..,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,.,,.,,-8tgatgctg,,,...,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,..';\n\n$pileup =~ s/[+-](\\d+)(??{\"[ACGTN]{$1}\"})//gi;\n\nprint($pileup, \"\\n\");\n</code></pre>\n\n<p><strong>PRODUCES</strong></p>\n\n<p>$,...........................,,.................,,....,,g.,,,,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,...............,,,.....,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.....,,.....,,,,,,,,,,,......,,,,,,,,,,,,,,,,,,,,,,,,,,.,,.,,,.............................,,.,.........,.,.,,....,..........,,......................,,,,,,...........................,,,,,,,,.....,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,...,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,.,,.,,,,,...,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,..</p>\n\n<p>Which you'll notice is a couple of characters shorter than your example output as you accidentally left in the signs [+-]</p>\n"}], "owner": {"reputation": 1, "user_id": 6235735, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157059259565556/picture?type=large", "display_name": "Daniel Kelly", "link": "https://stackoverflow.com/users/6235735/daniel-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1477369642, "creation_date": 1463132610, "last_edit_date": 1495540837, "question_id": 37206608, "link": "https://stackoverflow.com/questions/37206608/mpileup-regex-command-to-remove-indels", "title": "Mpileup regex command to remove indels", "body": "<p>I am trying to filter out insertions and deletions from an mpileup txt file. An example of an insertion or deletion would be +3ATG or -9AATCGTCTC.</p>\n\n<p>In another post I found a solution using perl: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/11698332/regular-expression-that-reference-a-match-from-earlier-part-of-expression\">regular expression that reference a match from earlier part of expression</a></p>\n\n<p>However, the script writes insertions and deletions to the special variable $&amp;. I would like to replace all insertions and deletions with nothing in a new variable. So my solution is identical, but with substitution at the start and to be replaced with nothing, see below.</p>\n\n<p>$row =~ s/(\\d+)(??{\".\"*$1})//xg;</p>\n\n<p>Does anyone have any idea why it won't work or an alternative solution?</p>\n\n<p>I would also be happy to match anything that wasn't an insertion or deletion and make this a new variable.</p>\n\n<hr>\n\n<p>Here is an example of the input:</p>\n\n<p>$,...........................,,.................,,....,,g.,,,,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,...............,,,.....,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.....,,.....,,,,,,,,,,,......,,,,,,,,,,,,,,,,,,,,,,,,,,.,,.,,,.............................,,.,.........,.,.,,....,..........,,......................,,,,,,...........................,,,,,,,,.....,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,.+12GATGCTGTGTTT..,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,.,,.,,-8tgatgctg,,,...,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,..</p>\n\n<p>Here is an example of the output I would like:</p>\n\n<p>$,...........................,,.................,,....,,g.,,,,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,...............,,,.....,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.....,,.....,,,,,,,,,,,......,,,,,,,,,,,,,,,,,,,,,,,,,,.,,.,,,.............................,,.,.........,.,.,,....,..........,,......................,,,,,,...........................,,,,,,,,.....,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,,,,,,.+..,,,,,,,,.,,,,,,,,,,,,,,,,,,,,,,,.,,.,,-,,,...,,..,,,,,,,,,,,,,,,,,,,,,,,,,,,,..</p>\n\n<p>Cheers,</p>\n\n<p>Daniel</p>\n"}, {"tags": ["mysql", "xml", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463132086, "post_id": 37206341, "comment_id": 61944153, "body": "Why not just iterate on <code>&#47;&#47;Games</code> instead?"}, {"owner": {"reputation": 235, "user_id": 2642601, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e6c5608a430d1611a0bf9b4209d48dbb?s=128&d=identicon&r=PG", "display_name": "user2642601", "link": "https://stackoverflow.com/users/2642601/user2642601"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463132828, "post_id": 37206341, "comment_id": 61944655, "body": "Well the result will be the same , for example the 1st Sport ID will be with value: 19748853091974892839 which includes the id&#39;s of the 2 sports 1974885309 and 1974892839 and i want to separate these results."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463133236, "post_id": 37206341, "comment_id": 61944944, "body": "Point is - your table <i>looks</i> like you&#39;re seeking one row per game, not one per sport."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1463134702, "creation_date": 1463134702, "answer_id": 37207412, "question_id": 37206341, "link": "https://stackoverflow.com/questions/37206341/perl-xml-to-mysql-with-libxml/37207412#37207412", "title": "Perl: XML to MySQL with LibXML", "body": "<p>I would reformulate what you're doing. It looks like your table is one row per <em>game</em> not one row per sport.</p>\n\n<p>So you need an 'inner loop' to pick out the game IDs. Unfortunately - the're not grouped, so you need to do a 'next' sort of operation. </p>\n\n<p>Using <code>XML::Twig</code> because I'm more familiar with it - something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;parse( \\*DATA );\n\nforeach my $sport ( $twig-&gt;findnodes('//Sport') ) {\n    my %fields;\n    $fields{sport_id}         = $sport-&gt;findvalue('./ID');\n    $fields{sport_name}       = $sport-&gt;findvalue('./Name');\n    $fields{competition_id}   = $sport-&gt;findvalue('.//Competition/ID');\n    $fields{competition_name} = $sport-&gt;findvalue('.//Competition/Name');\n    foreach my $game ( $sport-&gt;findnodes('.//Games/ID') ) {\n        $fields{game_id}    = $game-&gt;text;\n        $fields{game_start} = $game-&gt;next_sibling-&gt;text;\n        $fields{game_end}   = $game-&gt;next_sibling-&gt;next_sibling-&gt;text;\n        print \"Fields: \", join(\n            \",\",\n            @fields{\n                qw(sport_id sport_name\n                    competition_id competition_name\n                    game_id game_start game_end)\n            }\n            ),\n            \"\\n\";\n    }    \n}\n</code></pre>\n\n<p>(Pretty sure you can do much the same in <code>XML::LibXML</code>)</p>\n"}], "owner": {"reputation": 235, "user_id": 2642601, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e6c5608a430d1611a0bf9b4209d48dbb?s=128&d=identicon&r=PG", "display_name": "user2642601", "link": "https://stackoverflow.com/users/2642601/user2642601"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 37207412, "answer_count": 1, "score": 0, "last_activity_date": 1463134702, "creation_date": 1463131912, "question_id": 37206341, "link": "https://stackoverflow.com/questions/37206341/perl-xml-to-mysql-with-libxml", "title": "Perl: XML to MySQL with LibXML", "body": "<p>I'm pretty new to Perl and i'm writing a perl script to practice and i want to parse info from XML file to MySQL DB , but i'm stuck and i cannot find a way to import the data to MySQL.</p>\n\n<p>Here is my Perl code:</p>\n\n<pre><code>#!/usr/local/bin/perl\nuse strict;\nuse warnings;\nuse diagnostics;\nuse XML::LibXML;\nuse DBI;\nmy $filename = 'test.xml';\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $filename);\nmy $sport_id;\nmy $sport_name;\nmy $competition_id;\nmy $competition_name;\nmy $game_id;\nmy $game_start;\nmy $game_name;\nmy @values;\nmy $dbh = DBI-&gt;connect(\"dbi:mysql:parser:127.0.0.1\", \"root\", \"123qwe\", { RaiseError =&gt; 1}) or die $DBI::errstr;\nmy $query = 'INSERT INTO sports (sport_id,sport_name,competition_id,competition_name,game_id,game_start,game_name) VALUES (?,?,?,?,?,?,?)';\nmy $sth = $dbh-&gt;prepare($query) or die \"Prepare failed: \" . $dbh-&gt;errstr();\n\nforeach my $test ($dom-&gt;findnodes('//Sport')) {\n    print \"\\n\";\n    $sport_id = $test-&gt;findvalue('./ID');\n    $sport_name = $test-&gt;findvalue('./Name');\n    $competition_id = $test-&gt;findvalue('./Competitions/Competition/ID');\n    $competition_name = $test-&gt;findvalue('./Competitions/Competition/Name');\n    $game_id = $test-&gt;findvalue('./Competitions/Competition/Games/ID');\n    $game_start = $test-&gt;findvalue('./Competitions/Competition/Games/Start');\n    $game_name = $test-&gt;findvalue('./Competitions/Competition/Games/Name');\n    #print \"Sport ID: $sport_id\\n\";\n    #print \"Sport Name: $sport_name\\n\";\n    #print \"Competition ID: $competition_id\\n\";\n    #print \"Competition Name: $competition_name\\n\";\n    #print \"Game ID: $game_id\\n\";\n    #print \"Game Start: $game_start\\n\";\n    #print \"Game Name: $game_name\\n\";\n    #print \"\\n\";\n    push @values, $sport_id,$sport_name,$competition_id,$competition_name,$game_id,$game_start,$game_name;\n    $sth-&gt;execute(@values) or die $dbh-&gt;errstr;\n}\n</code></pre>\n\n<p>My XML:</p>\n\n<pre><code>&lt;Sports&gt;\n&lt;Sport&gt;\n&lt;ID&gt;1369527874&lt;/ID&gt;\n&lt;Name&gt;Virtual Football&lt;/Name&gt;\n&lt;Competitions&gt;\n&lt;Competition&gt;\n&lt;ID&gt;1374380502&lt;/ID&gt;\n&lt;Name&gt;Virtual Football. World - G.Devs Stadium&lt;/Name&gt;\n&lt;Games&gt;\n&lt;ID&gt;1974885309&lt;/ID&gt;\n&lt;Start&gt;2016-05-11 12:21:00&lt;/Start&gt;\n&lt;Name&gt;New England Militia - St. Louis Racers&lt;/Name&gt;\n&lt;ID&gt;1974892839&lt;/ID&gt;\n&lt;Start&gt;2016-05-11 12:27:00&lt;/Start&gt;\n&lt;Name&gt;Las Vegas Rollers - Salt Lake Wrath&lt;/Name&gt;\n&lt;/Games&gt;\n&lt;/Competition&gt;\n&lt;/Competitions&gt;\n&lt;/Sport&gt;\n&lt;Sport&gt;\n&lt;ID&gt;882&lt;/ID&gt;\n&lt;Name&gt;Darts&lt;/Name&gt;\n&lt;Competitions&gt;\n&lt;Competition&gt;\n&lt;ID&gt;1834852369&lt;/ID&gt;\n&lt;Name&gt;Darts. World - PDC European Tour Outright&lt;/Name&gt;\n&lt;Games&gt;\n&lt;ID&gt;1895020486&lt;/ID&gt;\n&lt;Start&gt;2016-05-15 23:00:00&lt;/Start&gt;\n&lt;Name&gt;PDC European Tour. Outright&lt;/Name&gt;\n&lt;/Games&gt;\n&lt;/Competition&gt;\n&lt;/Competitions&gt;\n&lt;/Sport&gt;\n&lt;/Sports&gt;\n</code></pre>\n\n<p>MySQL structure:</p>\n\n<pre><code>+------------------+--------------+------+-----+---------+----------------+\n| Field            | Type         | Null | Key | Default | Extra          |\n+------------------+--------------+------+-----+---------+----------------+\n| id               | int(6)       | NO   | PRI | NULL    | auto_increment |\n| sport_id         | varchar(255) | YES  |     | NULL    |                |\n| sport_name       | varchar(255) | YES  |     | NULL    |                |\n| competition_id   | varchar(255) | YES  |     | NULL    |                |\n| competition_name | varchar(255) | YES  |     | NULL    |                |\n| game_id          | varchar(255) | YES  |     | NULL    |                |\n| game_start       | varchar(255) | YES  |     | NULL    |                |\n| game_name        | varchar(255) | YES  |     | NULL    |                |\n+------------------+--------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>If i remove the comment from the print lines the output will be as follow:</p>\n\n<pre><code>Sport ID: 1369527874\nSport Name: Virtual Football\nCompetition ID: 1374380502\nCompetition Name: Virtual Football. World - G.Devs Stadium\nGame ID: 19748853091974892839\nGame Start: 2016-05-11 12:21:002016-05-11 12:27:00\nGame Name: New England Militia - St. Louis RacersLas Vegas Rollers - Salt Lake Wrath\n\n\nSport ID: 882\nSport Name: Darts\nCompetition ID: 1834852369\nCompetition Name: Darts. World - PDC European Tour Outright\nGame ID: 1895020486\nGame Start: 2016-05-15 23:00:00\nGame Name: PDC European Tour. Outright\n</code></pre>\n\n<p>As you can see , the main problem is that i have multiple games and i cant seem to find a way to split them so i can import them to mysql.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1463130486, "post_id": 37205780, "comment_id": 61943081, "body": "<code>&quot;^.*$&quot;</code> ..........."}, {"owner": {"reputation": 156, "user_id": 2134762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1cfc9220edbc19dbae79e42aab4b42df?s=128&d=identicon&r=PG", "display_name": "Silence", "link": "https://stackoverflow.com/users/2134762/silence"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1463130549, "post_id": 37205780, "comment_id": 61943124, "body": "It is just an example"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1463130861, "creation_date": 1463130861, "answer_id": 37205951, "question_id": 37205780, "link": "https://stackoverflow.com/questions/37205780/how-to-merge-perl-regexps-into-one-combined-match/37205951#37205951", "title": "How to merge perl regexp&#39;s into one combined match", "body": "<p>You cannot merge them into a single regex - that's a much more complicated thing than you might imagine. (Outside relatively trivial cases). <code>regex</code> is a programming language, and getting something to write it for you, is a non-trivial sort of a task.</p>\n\n<p>But you can test multiple regexes quite handily. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy @conditions = ( qr/^.*$/, qr/[A-Z]+/, qr/123/, );\n\nLINE: while (&lt;DATA&gt;) {\n    foreach my $regex (@conditions) {\n        next LINE unless m/$regex/;\n    }\n    print;\n}\n\n__DATA__\nshouldn't match, non number\n1234567\ntest123\nTest123\n</code></pre>\n\n<p>For efficiency, you can also order the regexes so the most likely to fail come first. </p>\n"}, {"tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 1, "last_activity_date": 1463132329, "creation_date": 1463132329, "answer_id": 37206511, "question_id": 37205780, "link": "https://stackoverflow.com/questions/37205780/how-to-merge-perl-regexps-into-one-combined-match/37206511#37206511", "title": "How to merge perl regexp&#39;s into one combined match", "body": "<p>It's possible, but with a restriction. All you need to do is enclose one of the patterns in a lookahead assertion like so:</p>\n\n<pre><code>(?=pattern1)pattern2\n</code></pre>\n\n<p>This should work even if the patterns have inline modifiers (<code>(?i)</code> or similar), the first pattern's modifiers shouldn't carry over to the second pattern.</p>\n\n<p>The only problem with this solution that I'm aware of are backreferences (<code>\\1</code>, <code>\\2</code>, etc). If there are capture groups in pattern1, then any backreferences in pattern2 will refer to the wrong group. For example:</p>\n\n<pre><code>pattern1 = \"(a)b.\"\npattern2 = \"a(b)\\1\"\ntext = \"abb\"\n</code></pre>\n\n<p>Both patterns would match <code>abb</code>, but the combined pattern <code>(?=(a)b.)a(b)\\1</code> would only match <code>aba</code>.</p>\n"}], "owner": {"reputation": 156, "user_id": 2134762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1cfc9220edbc19dbae79e42aab4b42df?s=128&d=identicon&r=PG", "display_name": "Silence", "link": "https://stackoverflow.com/users/2134762/silence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1463132329, "creation_date": 1463130437, "last_edit_date": 1463130889, "question_id": 37205780, "link": "https://stackoverflow.com/questions/37205780/how-to-merge-perl-regexps-into-one-combined-match", "title": "How to merge perl regexp&#39;s into one combined match", "body": "<p>I have a Perl application that gets as input two regexp's.</p>\n\n<p>Is it possible to merge the regexp's into one regexp in a way that a match can only happen if the two regexp conditions are met?</p>\n\n<p>Example:</p>\n\n<pre><code>pattern1 = \"^.*$\"  \npattern2 = \"^abc$\"\n</code></pre>\n\n<p>Outcome should be: <code>\"^abc$\"</code></p>\n\n<p>I know there is a module called \"Regexp::Assemble\" but only allows me to combine the regexp's in a way that both regexp's can create a match.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1463165513, "post_id": 37205359, "comment_id": 61965807, "body": "Using POSIX&#39;s strftime is much much more lightweight than using DateTime&#39;s (and it&#39;s core)"}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 7, "last_activity_date": 1463129198, "creation_date": 1463129198, "answer_id": 37205359, "question_id": 37205205, "link": "https://stackoverflow.com/questions/37205205/how-to-convert-unix-epoch-time-to-readable-format-in-perl/37205359#37205359", "title": "How to convert unix epoch time to readable format in perl", "body": "<p>Easiest way:</p>\n\n<pre><code>print scalar localtime $unix_timestamp;\n</code></pre>\n\n<p>Documentation: <a href=\"http://perldoc.perl.org/functions/localtime.html\" rel=\"noreferrer\">http://perldoc.perl.org/functions/localtime.html</a></p>\n\n<p>For GMT, use <code>gmtime</code>:</p>\n\n<pre><code>print scalar gmtime $unix_timestamp;\n</code></pre>\n\n<p>Documentation: <a href=\"http://perldoc.perl.org/functions/gmtime.html\" rel=\"noreferrer\">http://perldoc.perl.org/functions/gmtime.html</a> (Basically says: Everything like <code>localtime</code>, but outputs GMT time.)</p>\n\n<p>For custom formats, try <code>DateTime</code>:</p>\n\n<pre><code>use DateTime;\n\nmy $dt = DateTime-&gt;from_epoch(epoch =&gt; $unix_timestamp);\nprint $dt-&gt;strftime('%Y-%s');\n</code></pre>\n\n<p>See <a href=\"http://search.cpan.org/perldoc?DateTime\" rel=\"noreferrer\">http://search.cpan.org/perldoc?DateTime</a> for all options. Lots of formats could be created even more easily using the predefined DateTime Formatters: <a href=\"http://search.cpan.org/search?query=DateTime%3A%3AFormat&amp;mode=all\" rel=\"noreferrer\">http://search.cpan.org/search?query=DateTime%3A%3AFormat&amp;mode=all</a></p>\n"}, {"tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 0, "last_activity_date": 1463129201, "creation_date": 1463129201, "answer_id": 37205362, "question_id": 37205205, "link": "https://stackoverflow.com/questions/37205205/how-to-convert-unix-epoch-time-to-readable-format-in-perl/37205362#37205362", "title": "How to convert unix epoch time to readable format in perl", "body": "<p>Use <code>gmtime</code> instead of <code>localtime</code></p>\n\n<p><code>perldoc -f gmtime</code> :</p>\n\n<pre><code>gmtime EXPR\ngmtime  Works just like \"localtime\" but the returned values are localized\n        for the standard Greenwich time zone.\n\n        Note: When called in list context, $isdst, the last value returned\n        by gmtime, is always 0. There is no Daylight Saving Time in GMT.\n\n        Portability issues: \"gmtime\" in perlport.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1463165614, "creation_date": 1463165614, "answer_id": 37217392, "question_id": 37205205, "link": "https://stackoverflow.com/questions/37205205/how-to-convert-unix-epoch-time-to-readable-format-in-perl/37217392#37217392", "title": "How to convert unix epoch time to readable format in perl", "body": "<pre><code>use POSIX qw( strftime );\n\nmy $epoch_ts = '1461241125.31307';\n\nsay strftime('%Y-%m-%d %H:%M:%S', gmtime($epoch_ts));\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 5765277, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-swG-f0kZpSA/AAAAAAAAAAI/AAAAAAAAANw/PZrFjfmUSy0/photo.jpg?sz=128", "display_name": "VolleyballAddictSandiego", "link": "https://stackoverflow.com/users/5765277/volleyballaddictsandiego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3420, "favorite_count": 0, "accepted_answer_id": 37217392, "answer_count": 3, "score": 4, "last_activity_date": 1463165614, "creation_date": 1463128713, "last_edit_date": 1463153188, "question_id": 37205205, "link": "https://stackoverflow.com/questions/37205205/how-to-convert-unix-epoch-time-to-readable-format-in-perl", "title": "How to convert unix epoch time to readable format in perl", "body": "<p>How do I convert 1461241125.31307 in perl.  I tried:</p>\n\n<pre><code>use Date::Parse;\n$unix_timestamp = '1461241125.31307';\nmy ($sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst) = localtime($unix_timestamp);\n$mon += 1;\n$year += 1900;\n$unix_timestamp_normal = \"$year-$mon-$mday $hour:$min:$sec\";\n</code></pre>\n\n<p>result: <code>2016-4-21 5:18:45</code> (no padding of hour)</p>\n\n<p>How do I pad it and make it GMT. I want the result to say <code>2016-04-21 12:18:45</code></p>\n\n<hr>\n\n<p>Thanks for the answers folks.</p>\n\n<pre><code>use DateTime;\n$unix_timestamp = '1461241125.31307';\nmy $dt = DateTime-&gt;from_epoch(epoch =&gt; $unix_timestamp);\nprint $dt-&gt;strftime('%Y-%m-%d %H:%M:%S'),\"\\n\";\n</code></pre>\n"}, {"tags": ["perl", "dbi"], "answers": [{"tags": [], "owner": {"reputation": 931, "user_id": 4429472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/830c4684595c5ff0de0621e686c51345?s=128&d=identicon&r=PG&f=1", "display_name": "ZzZombo", "link": "https://stackoverflow.com/users/4429472/zzzombo"}, "is_accepted": true, "score": -3, "last_activity_date": 1463142642, "last_edit_date": 1463142642, "creation_date": 1463129004, "answer_id": 37205295, "question_id": 37205029, "link": "https://stackoverflow.com/questions/37205029/why-this-error-keeps-occurring/37205295#37205295", "title": "Why this error keeps occurring?", "body": "<p>Oh, so, it just turned out if in case of a query syntax error (<code>WHERE</code> clause was placed in wrong position) <code>fetchall_arrayref()</code> appears to report cryptic errors instead of the underlying problem. Found out by checking server logs.</p>\n"}], "owner": {"reputation": 931, "user_id": 4429472, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/830c4684595c5ff0de0621e686c51345?s=128&d=identicon&r=PG&f=1", "display_name": "ZzZombo", "link": "https://stackoverflow.com/users/4429472/zzzombo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 37205295, "answer_count": 1, "score": 0, "last_activity_date": 1463142642, "creation_date": 1463128159, "question_id": 37205029, "link": "https://stackoverflow.com/questions/37205029/why-this-error-keeps-occurring", "title": "Why this error keeps occurring?", "body": "<p>I have inherited some old code. It gets a list of categories from a MySQL database table. I'm tasked with adding multilevel support to them. I've almost got it done, but for some reason it just errors out when I go to try the app in action.</p>\n\n<p>The error is (you can also see it at <a href=\"http://detyams.ru/?cat=1\" rel=\"nofollow\">http://detyams.ru/?cat=1</a>): </p>\n\n<blockquote>\n  <p>Can't use an undefined value as an ARRAY reference at /usr/local/lib/perl5/site_perl/mach/5.18/DBI.pm line 2074,  line 2231.</p>\n</blockquote>\n\n<pre><code>sub catlist\n{\n    my $self=shift;\n    state $sth=$self-&gt;db-&gt;prepare(q/SELECT c.cat_id,c.cat_name,COUNT(pn.p_id) as cnt from category c\n    LEFT JOIN price_new pn ON (pn.cat_id=c.cat_id) GROUP BY pn.cat_id WHERE c.parent_id=?/);\n    $sth-&gt;execute(0);\n    my @catlist=$sth-&gt;fetchall_arrayref({}); # &lt;- this call leads to the failure in the deep of DBI code.\n    foreach my $item (@catlist)\n    {\n        $sth-&gt;execute($item-&gt;{cat_id});\n        $item-&gt;{children}=$sth-&gt;fetchall_arrayref({});\n    }\n    return @catlist;\n}\n</code></pre>\n\n<p>I've looked up some examples of using the DBI methods in there (like <a href=\"http://www.perlmonks.org/?node_id=284436#loh\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=284436#loh</a>), all appear to be in accord with my code.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 9006, "user_id": 2805376, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gTE7F.jpg?s=128&g=1", "display_name": "Shafizadeh", "link": "https://stackoverflow.com/users/2805376/shafizadeh"}, "edited": false, "score": 0, "creation_date": 1463125089, "post_id": 37203977, "comment_id": 61939602, "body": "Why <code>10:00:02</code>? I think it should be <code>10:00:03</code>. Am I right?"}, {"owner": {"reputation": 333, "user_id": 2044638, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3890886c515b6bfbceffe6049fc18375?s=128&d=identicon&r=PG", "display_name": "user2044638", "link": "https://stackoverflow.com/users/2044638/user2044638"}, "reply_to_user": {"reputation": 9006, "user_id": 2805376, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gTE7F.jpg?s=128&g=1", "display_name": "Shafizadeh", "link": "https://stackoverflow.com/users/2805376/shafizadeh"}, "edited": false, "score": 0, "creation_date": 1463125156, "post_id": 37203977, "comment_id": 61939651, "body": "@Shafizadeh Oops, yes. Typo while editing. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 2044638, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3890886c515b6bfbceffe6049fc18375?s=128&d=identicon&r=PG", "display_name": "user2044638", "link": "https://stackoverflow.com/users/2044638/user2044638"}, "edited": false, "score": 0, "creation_date": 1463126821, "post_id": 37204312, "comment_id": 61940716, "body": "Thanks, this works. Could the <code>$&#47;</code> be set to some equivalent of the regex <code>^-{20}$</code>? In this form if some line contained the text <code>------- 10:00:00</code> it would be in the output."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 333, "user_id": 2044638, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3890886c515b6bfbceffe6049fc18375?s=128&d=identicon&r=PG", "display_name": "user2044638", "link": "https://stackoverflow.com/users/2044638/user2044638"}, "edited": false, "score": 0, "creation_date": 1463128408, "post_id": 37204312, "comment_id": 61941676, "body": "<code>local $&#47; = &quot;\\n&quot;.&quot;-&quot;x20;</code> - <code>$&#47;</code> doesn&#39;t do regex, but just literal text."}, {"owner": {"reputation": 333, "user_id": 2044638, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3890886c515b6bfbceffe6049fc18375?s=128&d=identicon&r=PG", "display_name": "user2044638", "link": "https://stackoverflow.com/users/2044638/user2044638"}, "edited": false, "score": 0, "creation_date": 1463132102, "post_id": 37204312, "comment_id": 61944170, "body": "Hmm, how would that look like in the one-liner? Also, please see the edit."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 333, "user_id": 2044638, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3890886c515b6bfbceffe6049fc18375?s=128&d=identicon&r=PG", "display_name": "user2044638", "link": "https://stackoverflow.com/users/2044638/user2044638"}, "edited": false, "score": 0, "creation_date": 1463132196, "post_id": 37204312, "comment_id": 61944230, "body": "It would look a lot like that in the one liner. <code>BEGIN { $&#47; = &quot;\\n&quot;.&quot;-&quot;x20 }</code>."}, {"owner": {"reputation": 333, "user_id": 2044638, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3890886c515b6bfbceffe6049fc18375?s=128&d=identicon&r=PG", "display_name": "user2044638", "link": "https://stackoverflow.com/users/2044638/user2044638"}, "edited": false, "score": 0, "creation_date": 1463132644, "post_id": 37204312, "comment_id": 61944544, "body": "For some reason it didn&#39;t work for me before, did a mistake somewhere, I suppose. Thanks again."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1463132960, "last_edit_date": 1463132960, "creation_date": 1463125975, "answer_id": 37204312, "question_id": 37203977, "link": "https://stackoverflow.com/questions/37203977/correct-syntax-for-multiline-search-and-replace-in-perl-so-non-matching-lines-ar/37204312#37204312", "title": "Correct syntax for multiline search and replace in perl so non-matching lines aren&#39;t printed", "body": "<p>Ok, so what you need to know is this:</p>\n\n<p><code>-0</code> sets the record separator. You probably don't want to do this.</p>\n\n<p><code>-n</code> tells perl to iterate STDIN (or files specified) in a way quite similar to how grep/sed/awk would.</p>\n\n<p>And <code>-e</code> specifies code to run.</p>\n\n<p>What's happening in <em>your</em> code though, means that <em>if</em> that pattern match tests, perl is printing the 'whole block' - which is the whole file. </p>\n\n<p>I would suggest instead what you want is:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \n\nlocal $/ = '--'; \nwhile ( &lt;DATA&gt; ) {\n   print $1,\"\\n\" if m/ (\\d\\d:\\d\\d:\\d\\d)/;\n}\n\n__DATA__\n--------------------\n2016-05-13 10:00:00 abc\n2016-05-13 10:00:01 def\n2016-05-13 10:00:02 ghi\n--------------------\n2016-05-13 10:00:03 jkl\n2016-05-13 10:00:04 mno\n</code></pre>\n\n<p>Or as a one liner:</p>\n\n<pre><code>perl -ne 'BEGIN { $/ = \"--\" } print $1,\"\\n\" if m/ (\\d\\d:\\d\\d:\\d\\d)/'\n</code></pre>\n\n<p>What this does instead, is iterate a 'chunk' at a time, based on '--' being a record separator, and then just grabs the first instance of a 'time-like' format within each chunk. </p>\n\n<p>To answer your follow on question - if you wanted to catch the <em>last</em> time in the block, then I'd probably do it like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings; \n\nlocal $/ = '--'; \nwhile ( &lt;DATA&gt; ) {\n   my @matches = m/ (\\d\\d:\\d\\d:\\d\\d)/g ;\n   print $matches[-1],\"\\n\" if @matches;\n}\n\n__DATA__\n--------------------\n2016-05-13 10:00:00 abc\n2016-05-13 10:00:01 def\n2016-05-13 10:00:02 ghi\n--------------------\n2016-05-13 10:00:03 jkl\n2016-05-13 10:00:04 mno\n</code></pre>\n\n<p>Capture all the regex matches on (time like) strings, into a list, then print the last element. </p>\n\n<p>Matches contains:</p>\n\n<pre><code>$VAR1 = [\n          '10:00:00',\n          '10:00:01',\n          '10:00:02'\n        ];\n</code></pre>\n\n<p>And </p>\n\n<pre><code>$VAR1 = [\n          '10:00:03',\n          '10:00:04'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 2044638, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3890886c515b6bfbceffe6049fc18375?s=128&d=identicon&r=PG", "display_name": "user2044638", "link": "https://stackoverflow.com/users/2044638/user2044638"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 37204312, "answer_count": 1, "score": 0, "last_activity_date": 1463132960, "creation_date": 1463124930, "last_edit_date": 1463132045, "question_id": 37203977, "link": "https://stackoverflow.com/questions/37203977/correct-syntax-for-multiline-search-and-replace-in-perl-so-non-matching-lines-ar", "title": "Correct syntax for multiline search and replace in perl so non-matching lines aren&#39;t printed", "body": "<p>I'm trying to do a multiline search and replace but can't quite get it right that only what I need is outputted.</p>\n\n<p>I want to extract the time from each line that directly follows a dashed line so this input:</p>\n\n<pre><code>--------------------\n2016-05-13 10:00:00 abc\n2016-05-13 10:00:01 def\n2016-05-13 10:00:02 ghi\n--------------------\n2016-05-13 10:00:03 jkl\n2016-05-13 10:00:04 mno\n</code></pre>\n\n<p>should produce output like this:</p>\n\n<pre><code>10:00:00\n10:00:03\n</code></pre>\n\n<p>This command does seem to correctly replace in every match, however it also prints the rest of the line and every line that doesn't match.</p>\n\n<pre><code>perl -0ne 'print if s/-{20}\\n\\d{4}-\\d\\d-\\d\\d (\\d\\d:\\d\\d:\\d\\d)/$1/g'\n</code></pre>\n\n<p>Adding <code>.*</code> at the end of the regex doesn't help much as it only removes the rest of the line after the match and adding <code>/s</code> makes the command output only the very first replaced match.</p>\n\n<p>How to get only the needed output?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Sobrique's answer utilizes the dashed line (or part of it) as a record separator but I'm also interested in how would I obtain the required data if the dashed line was <strong>after</strong> the needed output.</p>\n\n<p>Let's say I wanted <code>10:00:02</code> from the above input, i.e. the equivalent of matching the backreference in the regex <code>^\\d{4}-\\d\\d-\\d\\d (\\d\\d:\\d\\d:\\d\\d).*\\n-{20}</code> (the caret not too important there, I believe). I could just use <code>tac</code> before and after executing Sobrique's solution but would like to see how to achieve this without doing it.</p>\n"}, {"tags": ["regex", "perl", "grep"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1463125347, "post_id": 37203805, "comment_id": 61939793, "body": "<code>perl</code> supports pattern matching, as well as file based iterating and <code>grep</code>.  But as it stands, this question is almost too vague to answer well, because we don&#39;t actually know what you&#39;re looking for."}], "answers": [{"tags": [], "owner": {"reputation": 2324, "user_id": 5334131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JU6Bo.jpg?s=128&g=1", "display_name": "Hellmar Becker", "link": "https://stackoverflow.com/users/5334131/hellmar-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1463124819, "creation_date": 1463124819, "answer_id": 37203930, "question_id": 37203805, "link": "https://stackoverflow.com/questions/37203805/grep-a-file-in-perl-script/37203930#37203930", "title": "grep a file in perl script", "body": "<p>You could start with something like</p>\n\n<pre><code>perl -ne '/^pattern/ &amp;&amp; print' file_name &gt;output_file\n</code></pre>\n\n<p>The -n option makes Perl process every line in a loop, so you don't need explicit loop code. </p>\n\n<p>From there, develop on. You have to try and see what suits you best.</p>\n"}, {"tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1463127941, "creation_date": 1463127941, "answer_id": 37204944, "question_id": 37203805, "link": "https://stackoverflow.com/questions/37203805/grep-a-file-in-perl-script/37204944#37204944", "title": "grep a file in perl script", "body": "<p>You need to add the <code>P</code> switch in your grep command.</p>\n\n<p>From <strong>man grep</strong></p>\n\n<blockquote>\n  <blockquote>\n    <p>-P, --perl-regexp\n                  Interpret  PATTERN as a Perl regular expression.  This is highly\n                  experimental and grep -P may warn of unimplemented features.</p>\n  </blockquote>\n</blockquote>\n\n<p>So your grep should be</p>\n\n<pre><code>grep -P \"^pattern\" filename &gt;output\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5940135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55814a7689c8a25b90aa68247a7b56e5?s=128&d=identicon&r=PG&f=1", "display_name": "whirlcano", "link": "https://stackoverflow.com/users/5940135/whirlcano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "closed_date": 1463145176, "answer_count": 2, "score": -1, "last_activity_date": 1463127941, "creation_date": 1463124445, "question_id": 37203805, "link": "https://stackoverflow.com/questions/37203805/grep-a-file-in-perl-script", "closed_reason": "Not suitable for this site", "title": "grep a file in perl script", "body": "<p>We use the below command to grep records in a file starting with a specific pattern:</p>\n\n<pre><code>user@domain&gt;grep ^pattern file_name\n</code></pre>\n\n<p>now i want to implement the same inside a perl script and redirect the output to a file with minimal code(I dont mind using regex). can someone help me with this. Thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1463139857, "post_id": 37203603, "comment_id": 61949359, "body": "I don&#39;t see the relation between the title and the question. Could you clarify?"}, {"owner": {"reputation": 7, "user_id": 6319745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d03e1464e7049aab0b7724079fa532d?s=128&d=identicon&r=PG&f=1", "display_name": "bresf", "link": "https://stackoverflow.com/users/6319745/bresf"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1463364911, "post_id": 37203603, "comment_id": 62020255, "body": "sorry ,my english is poor. I  want to calculate the second number in CAF to divide the first one"}], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 5650872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f882fa92540027be6982572ca6537d?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Catterall", "link": "https://stackoverflow.com/users/5650872/justin-catterall"}, "is_accepted": false, "score": -1, "last_activity_date": 1463125653, "creation_date": 1463125653, "answer_id": 37204202, "question_id": 37203603, "link": "https://stackoverflow.com/questions/37203603/how-can-i-use-perl-to-calculate-the-frequency-of-a-variable/37204202#37204202", "title": "how can i use perl to calculate the frequency of a variable", "body": "<p>You need to read the documentation for Perl regex. What you are asking doesn't look more complex than a beginner could match having read the docs:</p>\n\n<p><a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\">http://perldoc.perl.org/perlre.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 6319745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d03e1464e7049aab0b7724079fa532d?s=128&d=identicon&r=PG&f=1", "display_name": "bresf", "link": "https://stackoverflow.com/users/6319745/bresf"}, "edited": false, "score": 0, "creation_date": 1463365187, "post_id": 37208129, "comment_id": 62020308, "body": "and i want to know how to calculate the second number in vcf to divide the first one."}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1463136674, "creation_date": 1463136674, "answer_id": 37208129, "question_id": 37203603, "link": "https://stackoverflow.com/questions/37203603/how-can-i-use-perl-to-calculate-the-frequency-of-a-variable/37208129#37208129", "title": "how can i use perl to calculate the frequency of a variable", "body": "<pre><code>while (&lt;&gt;) {\n    if (\n        /^CAF=   # start of line, then literal 'CAF='\n         \\[      # literal '['\n         [^\\]]+  # 1+ characters different from ']'\n         \\];     # closing ']'\n         /x\n      )\n    {\n        print;\n    }\n}\n</code></pre>\n\n<p>The <code>/x</code> modifier allows for linebreaks and comments in the regex (to improve readability).</p>\n\n<p>Or, as a one liner:</p>\n\n<pre><code>perl -ne 'print if (/^CAF=\\[[^\\]]+\\];/);' &lt;your_file&gt;\n</code></pre>\n\n<p>This prints the complete lines containing the desired pattern.</p>\n"}], "owner": {"reputation": 7, "user_id": 6319745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d03e1464e7049aab0b7724079fa532d?s=128&d=identicon&r=PG&f=1", "display_name": "bresf", "link": "https://stackoverflow.com/users/6319745/bresf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1463136674, "creation_date": 1463123873, "last_edit_date": 1463126300, "question_id": 37203603, "link": "https://stackoverflow.com/questions/37203603/how-can-i-use-perl-to-calculate-the-frequency-of-a-variable", "title": "how can i use perl to calculate the frequency of a variable", "body": "<pre><code>PASS AC=0;AF=0.048;\nAN=2;\nASP;\nBaseQRankSum=0.572;\nCAF=[0.9605,.,0.03949];\nCLNACC=RCV000111759.1,RCV000034730\n</code></pre>\n\n<p>I'm a new here.I want to know how to match CAF = [0.9605,.,0.03949] using regular expression,thank you.</p>\n"}, {"tags": ["perl", "jar"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1463119663, "post_id": 37202233, "comment_id": 61936643, "body": "What about <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\">join</a> funciton <code>$string = join(&quot;,&quot;@args);</code>"}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1463120138, "post_id": 37202233, "comment_id": 61936865, "body": "actually my jar output is &quot;abc xyz&quot; on console, i want to store both &quot;abc&quot; and &quot;xyz&quot; in different variables. How can i do that?"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1463120342, "post_id": 37202233, "comment_id": 61936948, "body": "split the data with space separated. <code>@output = split(&#47;\\s&#47;,&quot;abc xyz&quot;);</code>  now <code>$output[0] </code>contain <code>abc</code> and <code>$output[1]</code> contain <code>xyz</code>"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "edited": false, "score": 0, "creation_date": 1463120391, "post_id": 37202233, "comment_id": 61936976, "body": "Try <code>split</code>: <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/split.html</a>"}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "edited": false, "score": 0, "creation_date": 1463121152, "post_id": 37202233, "comment_id": 61937361, "body": "I will get the output from java only using &quot;system(@args);&quot; on console. How can i store it into a string datatype."}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1463121275, "post_id": 37202233, "comment_id": 61937420, "body": "@john you want to store the result of the system command.?"}, {"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "edited": false, "score": 0, "creation_date": 1463121660, "post_id": 37202233, "comment_id": 61937626, "body": "this command &quot;system(&quot;java&quot;, &quot;-jar&quot;, &quot;first.jar&quot;);&quot;,gives me an output on cmd (console) .I want to store that output in a string variable"}, {"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1463121688, "post_id": 37202233, "comment_id": 61937635, "body": "@john Answer added"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "edited": false, "score": 0, "creation_date": 1463120827, "post_id": 37202516, "comment_id": 61937194, "body": "I&#39;m new to this script. Actually i want output from java code in perl in a string datatype, it will give &quot;abc xyz&quot; after running, my @args = (&quot;java&quot;, &quot;-jar&quot;, &quot;first.jar&quot;); system(@args); By system(@args) only, it&#39;&#39;ll run the jar file. could you please give me a set of line of code?"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "edited": false, "score": 0, "creation_date": 1463126189, "post_id": 37202516, "comment_id": 61940354, "body": "As shown in the answer: If you want a single line, backticks should be the easiest way to go."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": false, "score": 0, "last_activity_date": 1463120327, "creation_date": 1463120327, "answer_id": 37202516, "question_id": 37202233, "link": "https://stackoverflow.com/questions/37202233/store-executable-jar-output-in-a-variable-in-perl/37202516#37202516", "title": "Store executable jar output in a variable in Perl", "body": "<p>I don't know why you want to convert the arguments, but it looks like it would be easy:</p>\n\n<pre><code>my $cmd = join(' ', @args);\n</code></pre>\n\n<p>But wait... what if you add an argument <code>\"firstname lastname\"</code>?</p>\n\n<pre><code>my @args = (\"java\", \"-jar\", \"first.jar\", \"firstname lastname\");\nmy $cmd = join(' ', @args);\n</code></pre>\n\n<p>The result would be:</p>\n\n<pre><code>java -jar first.jar firstname lastname\n</code></pre>\n\n<p>Your single name argument would become two. The correct form would be:</p>\n\n<pre><code>java -jar first.jar \"firstname lastname\"\n</code></pre>\n\n<p><code>map</code> could help:</p>\n\n<pre><code>my $cmd = join(' ', map { \"'$_'\" } @args);\n</code></pre>\n\n<p>(Extra efforts are needed if your args (may) contain <code>'</code> quotes.)</p>\n\n<p>For capturing the output, use either backticks or <code>open</code>:</p>\n\n<pre><code>my $output = `$cmd`; # Multiline output in one variable\nmy @output = `$cmd`; # Each output line in one array element\n\n# Read the output line by line saving memory\nopen my $fh,'-|',$cmd;\nwhile (&lt;$fh&gt;) {\n    # Do something with a single output line in $_\n}\n</code></pre>\n\n<p>The last one doesn't need to parse the whole output into a single variable or array: It handles one line in each loop iteration. You could easily handle hundreds of GBs of output because only one line needs to be stored at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "edited": false, "score": 0, "creation_date": 1463142185, "post_id": 37202876, "comment_id": 61950980, "body": "Now, I&#39;m facing another problem. My java program should ask for user input and it ll be appended into &quot;abc xyz&quot; and then the splitting of these three will be done, Suppose java is asking for user Input, and it is &quot;123&quot; and the complete output from java is &quot;abc xyz 123&quot; Then the splitting will be done. Its not getting output on perl. How can i do this?"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1463121804, "last_edit_date": 1463121804, "creation_date": 1463121463, "answer_id": 37202876, "question_id": 37202233, "link": "https://stackoverflow.com/questions/37202233/store-executable-jar-output-in-a-variable-in-perl/37202876#37202876", "title": "Store executable jar output in a variable in Perl", "body": "<p>I hope you need to store the output of the <code>jar</code> file. So use <code>backtick</code> instead of system. \nTry to know difference between\n<a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow\">system</a> and <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow\">Backtick / qx</a></p>\n\n<pre><code>my @args = (\"java\", \"-jar\", \"first.jar\");\n\nmy $result = `@args`;\n\nmy @ans = split(\" \",$result);\n\nprint \"$ans[0] $ans[1]\";\n</code></pre>\n\n<p>suppose your result is <code>xyz abc</code>. <code>$ans[0]</code> store the <code>xyz</code> and <code>$ans[1]</code> store the <code>abc</code> </p>\n"}], "owner": {"reputation": 119, "user_id": 6325447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/48dcabf2a97b1fe5cffeeaef0fe71c79?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6325447/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 37202876, "answer_count": 2, "score": 3, "last_activity_date": 1463121804, "creation_date": 1463119118, "last_edit_date": 1463120737, "question_id": 37202233, "link": "https://stackoverflow.com/questions/37202233/store-executable-jar-output-in-a-variable-in-perl", "title": "Store executable jar output in a variable in Perl", "body": "<p>I need the retrieve the output of a Java program and store it in a Perl variable so that i'll be able to use split function. I am getting the java output using,</p>\n\n<pre><code>my @args = (\"java\", \"-jar\", \"first.jar\");\n\nsystem(@args);\n</code></pre>\n\n<p>But how to convert this <code>@args</code> into <code>$args</code> variable (string) so that i can split the output from the string.</p>\n"}, {"tags": ["bash", "perl", "file", "exception-handling", "die"], "comments": [{"owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 1, "creation_date": 1463097912, "post_id": 37199251, "comment_id": 61930947, "body": "The handles get closed."}, {"owner": {"reputation": 331, "user_id": 1228878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vd3Pe.jpg?s=128&g=1", "display_name": "tniles", "link": "https://stackoverflow.com/users/1228878/tniles"}, "reply_to_user": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "edited": false, "score": 0, "creation_date": 1463099545, "post_id": 37199251, "comment_id": 61931307, "body": "@Mort: the perlmonks link says as much."}], "answers": [{"tags": [], "owner": {"reputation": 715, "user_id": 6131918, "user_type": "registered", "accept_rate": 30, "profile_image": "https://graph.facebook.com/10154090623951913/picture?type=large", "display_name": "Nicholas Koskowski", "link": "https://stackoverflow.com/users/6131918/nicholas-koskowski"}, "is_accepted": false, "score": -1, "last_activity_date": 1463097968, "creation_date": 1463097968, "answer_id": 37199315, "question_id": 37199251, "link": "https://stackoverflow.com/questions/37199251/what-happens-as-a-perl-script-ends/37199315#37199315", "title": "What happens as a perl script ends?", "body": "<p>Garbage collection will do an expensive mark / sweep operation if your pointers/filehandlers are not appropriately dismissed.</p>\n\n<p>At the perl level is where garbage collection is run. On shell the normal interuptors and error handlers will still receive IO. On the system level the garbage collection will tell system calls to reallocate memory.</p>\n"}, {"comments": [{"owner": {"reputation": 331, "user_id": 1228878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vd3Pe.jpg?s=128&g=1", "display_name": "tniles", "link": "https://stackoverflow.com/users/1228878/tniles"}, "edited": false, "score": 0, "creation_date": 1463413744, "post_id": 37254413, "comment_id": 62042891, "body": "Could you recommend any resources for further exploration/reading of these topics? I found <a href=\"http://perldoc.perl.org/index-internals.html\" rel=\"nofollow noreferrer\">this</a>, but it covers a lot of ground."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "reply_to_user": {"reputation": 331, "user_id": 1228878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vd3Pe.jpg?s=128&g=1", "display_name": "tniles", "link": "https://stackoverflow.com/users/1228878/tniles"}, "edited": false, "score": 0, "creation_date": 1463415071, "post_id": 37254413, "comment_id": 62043719, "body": "@tniles09 If you&#39;re using variables no more complex than nested arrays &amp; hashes, then you can simply assume that they will be reaped when their last reference goes out of scope.  If you are using circular data structures, then <a href=\"http://perldoc.perl.org/perlref.html#Circular-References\" rel=\"nofollow noreferrer\">this section of perlref</a> should be enough.  If you are designing interfaces to C APIs via XS or <code>Inline::C</code> then you may be interested in <i>all</i> the internals docs to which you&#39;ve linked."}, {"owner": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1463455080, "post_id": 37254413, "comment_id": 62059638, "body": "Calling <code>DESTROY</code> won&#39;t cause the reference count to go down to zero. There may not even be a <code>DESTROY</code> method to call."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "reply_to_user": {"reputation": 31843, "user_id": 1337, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72de240484e389dbedb6a3e428b9f0c1?s=128&d=identicon&r=PG", "display_name": "Brad Gilbert", "link": "https://stackoverflow.com/users/1337/brad-gilbert"}, "edited": false, "score": 0, "creation_date": 1463494062, "post_id": 37254413, "comment_id": 62082394, "body": "@BradGilbert I never intended to imply as much.  I&#39;m sorry if I&#39;m easily misunderstood."}], "tags": [], "owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "is_accepted": true, "score": 1, "last_activity_date": 1463407328, "last_edit_date": 1463407328, "creation_date": 1463403311, "answer_id": 37254413, "question_id": 37199251, "link": "https://stackoverflow.com/questions/37199251/what-happens-as-a-perl-script-ends/37254413#37254413", "title": "What happens as a perl script ends?", "body": "<p>Perl uses a reference counting strategy for garbage collection.  When a variable's reference count reaches 0, any applicable <code>DESTROY</code> method is called before releasing its memory to perl's memory management system. </p>\n\n<p>As your program terminates, its remaining variables will go out of scope and have their reference count decremented.  This is the point at which your file handles will close.</p>\n\n<p>When perl is finished with its clean-up, it will exit back to the operating system, at which point its remaining resources will be returned to the OS, and its parent process (perhaps init or a shell) will be informed of its exit status.</p>\n\n<hr>\n\n<p>Where reference counting might go awry: If you create a data structure with circular references, none of the component variables will naturally have their reference count drop to 0 unless you either weaken one of the references or explicitly call its <code>DESTROY</code> method.  In this case the variables will persist until program end, at which point perl will <code>DESTROY</code> and/or garbage collect everything regardless of its reference count.</p>\n"}], "owner": {"reputation": 331, "user_id": 1228878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vd3Pe.jpg?s=128&g=1", "display_name": "tniles", "link": "https://stackoverflow.com/users/1228878/tniles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 1, "accepted_answer_id": 37254413, "answer_count": 2, "score": 4, "last_activity_date": 1463407328, "creation_date": 1463097410, "last_edit_date": 1495542237, "question_id": 37199251, "link": "https://stackoverflow.com/questions/37199251/what-happens-as-a-perl-script-ends", "title": "What happens as a perl script ends?", "body": "<p>This question is specific to perl, in the context that I am specifically wondering what happens to file handles (both operated on and not) when at some point the script <code>die</code>s with the handles open. </p>\n\n<p>So what operations occur as the execution comes to the final line of the script? Script level? Perl level? Shell level (e.g. bash)? System level (e.g. assume a modern *nix, such as Ubuntu)?</p>\n\n<p>Here's what info I've found so far, though no direct answers:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3601106/how-to-terminate-a-program-in-perl-exit-or-die\">Best practices for terminating perl scripts</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/11433098/execute-some-code-always-before-the-perl-script-ends\">Ensure custom code is run upon exit in perl</a></p>\n\n<p><a href=\"http://www.perlmonks.org/?node_id=902128\" rel=\"nofollow noreferrer\">Why to close file handles in perl (sys buffers)</a></p>\n\n<p>Perldoc on <code>die</code> and <code>exit</code> speak mostly of the functions themselves.</p>\n"}, {"tags": ["list", "perl", "compare"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463095029, "post_id": 37198887, "comment_id": 61930275, "body": "Note that to display your code properly, you need to indent it in the editor window with 4 spaces. I&#39;ve edited this one for you"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1463126211, "post_id": 37198887, "comment_id": 61940359, "body": "I would recommend <code>perltidy</code> as well, for getting indentation consistent."}], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1463097637, "creation_date": 1463097637, "answer_id": 37199269, "question_id": 37198887, "link": "https://stackoverflow.com/questions/37198887/compare-two-lists-of-words-and-save-the-words-that-are-not-on-the-second-list-in/37199269#37199269", "title": "Compare two lists of words and save the words that are not on the second list in perl", "body": "<p>First of all, each iteration of the loop replaces <code>@hwords</code> and <code>@awords</code> completely. So, in the end, both <code>@hwords</code> and <code>@awords</code> will contain only the words from the last line of each respective file.</p>\n\n<p>You only need to pick up the words from the first file anyway. Then, while reading the second file, you compare its words against the stored words from the first file.</p>\n\n<p>So, in the first loop, instead of setting <code>@hwords</code>, make it a lookup hash:</p>\n\n<pre><code>$hwords{$_} = 1 for split;\n</code></pre>\n\n<p>Now, after the first file has been read, all of its words are the keys of the <code>%hwords</code> hash.</p>\n\n<p>Then, when reading the second file, in the second loop, look up each word in the lookup hash:</p>\n\n<pre><code>print \"Word not found: $_\\n\"\n    for grep { !$hwords{$_} } split;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 5650872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f882fa92540027be6982572ca6537d?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Catterall", "link": "https://stackoverflow.com/users/5650872/justin-catterall"}, "is_accepted": false, "score": 1, "last_activity_date": 1463127511, "creation_date": 1463127511, "answer_id": 37204813, "question_id": 37198887, "link": "https://stackoverflow.com/questions/37198887/compare-two-lists-of-words-and-save-the-words-that-are-not-on-the-second-list-in/37204813#37204813", "title": "Compare two lists of words and save the words that are not on the second list in perl", "body": "<p>This is a FAQ, the solution can be found in the FAQ.</p>\n\n<p><a href=\"http://perldoc.perl.org/perlfaq4.html#How-do-I-compute-the-difference-of-two-arrays%3F-How-do-I-compute-the-intersection-of-two-arrays%3F\" rel=\"nofollow\">perldoc -q intersect</a></p>\n\n<p>My thanks to @Botje on #perl on irc.freenode.net for reminding me of this.</p>\n"}, {"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 0, "last_activity_date": 1463147504, "creation_date": 1463147504, "answer_id": 37211803, "question_id": 37198887, "link": "https://stackoverflow.com/questions/37198887/compare-two-lists-of-words-and-save-the-words-that-are-not-on-the-second-list-in/37211803#37211803", "title": "Compare two lists of words and save the words that are not on the second list in perl", "body": "<p>Please check this:</p>\n\n<pre><code> use Array::Utils qw(:all);\n\n my @a = qw( a b c d );\n my @b = qw( c d e f );\n\n #get items from array First list that are not in array Second List\n my @notinsecond = array_minus( @b, @a );\n\n #get items from array Second list that are not in array First List\n my @notinfirst = array_minus( @a, @b );\n\n\n print join \"\\n\",  @notinfirst;\n print join \"\\n\",  @notinsecond;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6327928, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206732513652102/picture?type=large", "display_name": "Vincent", "link": "https://stackoverflow.com/users/6327928/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1463147504, "creation_date": 1463094681, "last_edit_date": 1463094959, "question_id": 37198887, "link": "https://stackoverflow.com/questions/37198887/compare-two-lists-of-words-and-save-the-words-that-are-not-on-the-second-list-in", "title": "Compare two lists of words and save the words that are not on the second list in perl", "body": "<p>I have tried everything to make a list of words that exist uniquely to one file when compared to another file.  I put some debug printing in the code to find out where it was going and discovered that the code never does anything in the comparison loop.</p>\n\n<p>I figure I am blind or overlooking something really obvious - someone please point out what is wrong and enjoy laughing at my \"probably a novice\" error.  </p>\n\n<pre><code>while (&lt;IN&gt;) { #read the file\n\n    chomp;\n\n    $_ = lc; #convert to lower case\n    s/ -- / /g; #remove double hyphen dashes\n    s/ - / /g; #remove single hyphen dashes\n    s/ +/ /g; #replace multiple spaces with one space\n    s/[~`@#$%^&amp;*-+=&lt;&gt;.,:;?\"!_()\\[\\]]//g; #remove punctuation\n\n    @hwords = split;\n#   foreach $w (@hwords) { print  \"$w \\n\";}\n\n}\nwhile (&lt;IN0&gt;) { #read the file\n\n    chomp;\n\n    $_ = lc; #convert to lower case\n    s/ -- / /g; #remove double hyphen dashes\n    s/ - / /g; #remove single hyphen dashes\n    s/ +/ /g; #replacxew multiple spaces with one space\n    s/[~`@#$%^&amp;*-+=&lt;&gt;.,:;?\"!_()\\[\\]]//g; #remove punctuation\n\n    @awords = split;\n#    foreach $w (@awords) {print \"$w\\n\";}\n\n}\n\n$count =0;\n\n@unique = ();\n\nprint \"got here!\\n\"; # YES - it gets here\n\nforeach  $w (@hwords) { print  \"$w \\n\";}\n\nforeach  $h (@hwords) {\n\n    $x=1;\n    print \"got there!\\n\"; # NOPE, doesn't get here\n    foreach $a (@awords) {\n    if ($h eq $a) {\n        $x=0;\n        print \"equals\\n\";  # NEVER see this\n    }\n    }\n    if ($x eq 1) {\n    ++$count;\n    @unique = @unique, $h;\n    print \"$count, $h\\n\";  # NEVER see this, either\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "bioinformatics", "fasta"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1463091083, "post_id": 37197991, "comment_id": 61928974, "body": "I think the problem is related to splitting of records using <code>$&#47;</code>, the Perl input record separator. The first call to <code>&lt;FASTA&gt;</code> will return all characters up to and including the first <code>&gt;</code>. It means that this call simply will return a single <code>&quot;&gt;&quot;</code> ( and hence it will not skip the header line as you might assume )"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1463091782, "post_id": 37197991, "comment_id": 61929236, "body": "Just out of curiosity, I thought the components of DNA were ACGT, not ACGU \u2014 is that a difference of language, or something else?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1463094086, "post_id": 37197991, "comment_id": 61930002, "body": "@JonathanLeffler: Adenine, Cytosine and Guanine are present in both DNA and RNA sequences. Thymine occurs only in DNA and Uracil only in RNA. So the DNA bases are ACGT while the RNA bases are ACGU"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1463094267, "post_id": 37197991, "comment_id": 61930052, "body": "@Borodin:  Thanks.  My last biology lessons were a long time ago and may not have covered this difference between DNA and RNA. Or the passage of time let it slip away\u2026"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1463096589, "post_id": 37198092, "comment_id": 61930637, "body": "@CasimiretHippolyte  Thank you very much, fixed.  (I had answered &quot;<i>reverse only the sequence and not the header</i>&quot;, missing the rest for some reason.)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1463106917, "post_id": 37198092, "comment_id": 61932849, "body": "fixed to work with the example input in the question"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1463107382, "post_id": 37198092, "comment_id": 61932959, "body": "@ysth  Oh, of course, the whole block is processed at once in OP.  (I also realize now I had forgotten to copy the last sequence&#39;s print from my code.)  Thank you <i>very much</i> for the edit."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1463601829, "last_edit_date": 1463601829, "creation_date": 1463090092, "answer_id": 37198092, "question_id": 37197991, "link": "https://stackoverflow.com/questions/37197991/reverse-complement-of-fasta-file/37198092#37198092", "title": "Reverse complement of fasta file", "body": "<p>Reading records separated by <code>&gt;</code> is a nice idea as it gives you the whole chunk at a time.  However, here you want to process and merge lines but not the header, thus distinguishing between lines. It is clearer to read line by line.</p>\n\n<p>The sequence-line is specific: all caps and nothing else. The blank line separates records to process. The remaining possibility is the header. The sequence is assembled by joining lines that match its pattern, and once we hit the blank line it is processed and printed.</p>\n\n<pre><code>open (FASTA, $file_name) or die \"error $!\";\n\n# sequence, built by joining lines =~ /^[A-Z]+$/\nmy $sequence = '';\n\nwhile (my $entry = &lt;FASTA&gt;)\n{\n    if ($entry =~ m/^[A-Z]+$/) {\n        # Assemble the sequence from separate lines\n        chomp($entry);\n        $sequence .= $entry;\n    }\n    elsif ($entry =~ m/^\\s*$/) { \n        # process and print the sequence and blank line, reset for next\n        $sequence = reverse $sequence;\n        $sequence =~ tr/ACGUacgu/UGCAugca/;\n        print \"$sequence\\n\";\n        print \"\\n\";\n        $sequence = '';\n    }\n    else { # header\n        print $entry;\n    }\n}\n\n# Print the last sequence if the file didn't end with blank line    \nif (length $sequence) {\n    $sequence = reverse $sequence;\n    $sequence =~ tr/ACGUacgu/UGCAugca/;\n    print \"$sequence\\n\";\n}\n</code></pre>\n\n<p>The <code>^</code> and <code>$</code> are <em>anchors</em>, for the beginning and end of string. So the regex matching the sequence requires that the whole line be strictly caps.  The other regex allows only optional space <code>\\s*</code>, specifying a blank line.  </p>\n\n<p>The sequence processing is copied from the question.</p>\n"}, {"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1463098008, "post_id": 37198302, "comment_id": 61930979, "body": "When the OP asks about Perl, I&#39;m not sure how useful it is to illustrate an answer with another language that is, at first glance, as cryptic as Perl."}], "tags": [], "owner": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1463091524, "last_edit_date": 1463091524, "creation_date": 1463091077, "answer_id": 37198302, "question_id": 37197991, "link": "https://stackoverflow.com/questions/37197991/reverse-complement-of-fasta-file/37198302#37198302", "title": "Reverse complement of fasta file", "body": "<p><a href=\"http://www.nongnu.org/txr\" rel=\"nofollow\">TXR</a> solution:</p>\n\n<pre><code>@(bind compl @(hash-from-pairs (zip \"ACGUacgu\" \"UGCAugca\")))\n@(repeat)\n&gt;@header\n@  (collect)\n@rna\n@  (until)\n\n@  (end)\n@  (output)\n&gt;@header\n@(mapcar compl (reverse (cat-str rna)))\n\n@  (end)\n@(end)\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>$ txr revcomp.txr data\n&gt;cel-mir-39 MI0010 C elegans miR-39\nUUUUUUUUGAGCCAAGCUGAUUUACACCCGGUGAUAAUCUCAAUGACGAGCUUAUUACCAAGACGAAAUCAGCUGGGCUCUCGGUAUA\n\n&gt;cel-let-7 MI0001 C elegans let-7\nCCCCCCCUCCGGUAAGGUAGAAAAUUGCAUAGUUCACCGGUGGUAAUAUUCCAAACUAUACAACCUACUACCUCACCGGAUCCACAGUGUA\n</code></pre>\n\n<p>This variant formats the output to 46 columns, like the original:</p>\n\n<pre><code>@(bind compl @(hash-from-pairs (zip \"ACGUacgu\" \"UGCAugca\")))\n@(repeat)\n&gt;@header\n@  (collect)\n@rna\n@  (until)\n\n@  (end)\n@  (output)\n&gt;@header\n@  (repeat :vars ((crna (tuples 46 (mapcar compl (reverse (cat-str rna)))))))\n@crna\n@  (end)\n\n@  (end)\n@(end)\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>$ txr revcomp.txr data\n&gt;cel-mir-39 MI0010 C elegans miR-39\nUUUUUUUUGAGCCAAGCUGAUUUACACCCGGUGAUAAUCUCAAUGA\nCGAGCUUAUUACCAAGACGAAAUCAGCUGGGCUCUCGGUAUA\n\n&gt;cel-let-7 MI0001 C elegans let-7\nCCCCCCCUCCGGUAAGGUAGAAAAUUGCAUAGUUCACCGGUGGUAA\nUAUUCCAAACUAUACAACCUACUACCUCACCGGAUCCACAGUGUA\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25491, "user_id": 49197, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15ebf24a33a29b9efbf9924f530dd736?s=128&d=identicon&r=PG", "display_name": "Hynek -Pichi- Vychodil", "link": "https://stackoverflow.com/users/49197/hynek-pichi-vychodil"}, "edited": false, "score": 0, "creation_date": 1463171881, "post_id": 37200983, "comment_id": 61968957, "body": "If you use three parameter split you will save yourself a lot of trouble: <code>my ($header, $rna) = split(&quot;\\n&quot;,$_, 2)</code>"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": false, "score": 0, "last_activity_date": 1463112126, "last_edit_date": 1463112126, "creation_date": 1463111819, "answer_id": 37200983, "question_id": 37197991, "link": "https://stackoverflow.com/questions/37197991/reverse-complement-of-fasta-file/37200983#37200983", "title": "Reverse complement of fasta file", "body": "<p>Try something as follow</p>\n\n<p>First I split the data by the newline character. And store the header into the <code>$header</code> and the rest of the data in <code>@ar</code>. </p>\n\n<p>Then join the array by the newline and store into the <code>$entry</code>. Then perform the substitution for to remove the <code>\\n&gt;\\r\\s</code> characters from the RNA sequence.</p>\n\n<p>Then as usual reverse the string and perform the translation. Finally get the output by the print statement. </p>\n\n<pre><code>open my $fh,\"&lt;\",\"filename.text\" or die\"error opening $!\";\n\n$/ = \"&gt;\";\n\n&lt;$fh&gt;;\n\nwhile (&lt;$fh&gt;)\n{\n    my ($header,@ar) = split(\"\\n\",$_);\n\n    my $entry =join(\"\\n\",@ar);\n\n    $entry=~s/\\n|\\r|&gt;|\\s//g;\n\n    $entry = reverse $entry;\n\n    $entry =~ tr/ACGUacgu/UGCAugca/;\n\n    print \"&gt;$header\\n$entry\\n\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 6002690, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/427760998f97e05543f6e49017577d02?s=128&d=identicon&r=PG&f=1", "display_name": "jnmf", "link": "https://stackoverflow.com/users/6002690/jnmf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 37198092, "answer_count": 3, "score": 2, "last_activity_date": 1463601829, "creation_date": 1463089696, "last_edit_date": 1463171409, "question_id": 37197991, "link": "https://stackoverflow.com/questions/37197991/reverse-complement-of-fasta-file", "title": "Reverse complement of fasta file", "body": "<p>I'm trying to get the reverse complement of RNA in a multi fasta file</p>\n\n<p>input:</p>\n\n<pre><code>&gt;cel-mir-39 MI0010 C elegans miR-39\nUAUACCGAGAGCCCAGCUGAUUUCGUCUUGGUAAUAAGCUCGUCAUUGAGAUUAUCACCGGGUGUAAAUCAGCUUGGCUCAAAAAAAA\n\n&gt;cel-let-7 MI0001 C elegans let-7\nUACACUGUGGAUCCGGUGAGGUAGUAGGUUGUAUAGUUUGGAAUAUUACCACCGGUGAACUAUGCAAUUUUCUACCUUACCGGAGGGGGGG\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&gt;cel-mir-39 MI0010 C elegans miR-39\nUUUUUUUUGAGCCAAGCUGAUUUACACCCGGUGAUAAUCUCAAUGACGAGCUUAUUACCAAGACGAAAUCAGCUGGGCUCUCGGUAUA\n\n&gt;cel-let-7 MI0001 C elegans let-7\nCCCCCCCUCCGGUAAGGUAGAAAAUUGCAUAGUUCACCGGUGGUAAUAUUCCAAACUAUACAACCUACUACCUCACCGGAUCCACAGUGUA\n</code></pre>\n\n<p>But I'm getting this instead:</p>\n\n<pre><code>UUUUUUUUGAGCCAAGCUGAUUUACACCCGGUGAUAAUCUCAAUGACGAGCUUAUUACCAAGACGAAAUCAGCUGGGCUCUCGGUAUA\n93-Rim snucele G 0100IM 93-rim-leg \nCCCCCCCUCCGGUAAGGUAGAAAAUUGCAUAGUUCACCGGUGGUAAUAUUCCAAACUAUACAACCUACUACCUCACCGGAUCCACAGUGUA\n7-tel snucele G 1000IM 7-tel-leg \n</code></pre>\n\n<p>my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nprint \"type in the path of the file\\n\";\nmy $file_name = &lt;&gt;;\nchomp($file_name); \n\nopen (FASTA, $file_name) or die \"error #!\"; \n\n$/ = \"&gt;\";\n&lt;FASTA&gt;;    \nwhile (my $entry = &lt;FASTA&gt;){\n    $entry = reverse $entry;\n    $entry =~ tr/ACGUacgu/UGCAugca/;\n    print \"$entry \\n\";\n}\n\nclose(FASTA);\n</code></pre>\n\n<p>How can I reverse only the sequence and not the header?\nThanks</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1463085852, "post_id": 37197041, "comment_id": 61926555, "body": "is <code>$eMailMessage</code> populated with any data?"}, {"owner": {"reputation": 173, "user_id": 1703803, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NZpHZ.jpg?s=128&g=1", "display_name": "Blnukem", "link": "https://stackoverflow.com/users/1703803/blnukem"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463085967, "post_id": 37197041, "comment_id": 61926611, "body": "Yes, all variables populated"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463086101, "post_id": 37197041, "comment_id": 61926669, "body": "How sure are you? Have you printed it out to verify that? The code in the module checks if <code>body</code> has a <i>true</i> value, and if not, it croaks"}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 1, "last_activity_date": 1463087272, "last_edit_date": 1592644375, "creation_date": 1463087272, "answer_id": 37197410, "question_id": 37197041, "link": "https://stackoverflow.com/questions/37197041/why-do-i-get-syntax-error-at-email-mime-createhtml-pm-line-203-near-croak-yo/37197410#37197410", "title": "Why do I get &#39;syntax error at Email/MIME/CreateHTML.pm line 203, near &quot;croak &quot;You must supply a body&quot;&quot;&#39; when I use Email::MIME::CreateHTML?", "body": "<p>You must have an old version of Email::MIME::CreateHTML. This looks like a <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=53921\" rel=\"nofollow noreferrer\">bug</a> that was fixed in version 1.030:</p>\n<blockquote>\n<p>This happens because the <code>create_html</code> method being mixed into Email::MIME does not have <code>croak</code> in scope. The fix is to simply explicitly load Carp again after the <code>package Email::MIME</code> declaration.</p>\n<p>I'm not sure exactly how this ever worked, honestly.</p>\n</blockquote>\n<p>Upgrade to the latest version.</p>\n"}], "owner": {"reputation": 173, "user_id": 1703803, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/NZpHZ.jpg?s=128&g=1", "display_name": "Blnukem", "link": "https://stackoverflow.com/users/1703803/blnukem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 37197410, "answer_count": 1, "score": 0, "last_activity_date": 1463150697, "creation_date": 1463085722, "last_edit_date": 1463150697, "question_id": 37197041, "link": "https://stackoverflow.com/questions/37197041/why-do-i-get-syntax-error-at-email-mime-createhtml-pm-line-203-near-croak-yo", "title": "Why do I get &#39;syntax error at Email/MIME/CreateHTML.pm line 203, near &quot;croak &quot;You must supply a body&quot;&quot;&#39; when I use Email::MIME::CreateHTML?", "body": "<p>I'm using the CPAN module <a href=\"https://metacpan.org/pod/Email::MIME::CreateHTML\" rel=\"nofollow\">Email::MIME::CreateHTML</a> but keep getting the following error:</p>\n\n<blockquote>\n  <p>syntax error at Email/MIME/CreateHTML.pm line 203, near \"croak \"You must supply a body\"\"</p>\n</blockquote>\n\n<p>Here's my script:</p>\n\n<pre><code>#!/usr/bin/perl\n\nprint \"Content-type: text/html\\n\\n\";\n\nuse CGI qw(:standard);\nuse CGI::Carp qw(warningsToBrowser fatalsToBrowser);\nuse strict;\n\nuse Email::Sender::Transport::SMTPS;\nuse Email::MIME::CreateHTML;\n\nmy $SendTo = 'MyEmail@SendTo.com';\nmy $SendFrom = 'MyEmail@SendFrom.com';\nmy $Subject = 'test MSG';\n\nmy $SMTP_Server = 'smtp.gmail.com';\nmy $SMTP_SSL = 'starttls';\nmy $SMTP_Port = 587;\nmy $SMTP_User   = 'my@gmail.com';\nmy $SMTP_Password = 'MyGmailPassword';\n\nmy $eMailMessage = \"Test MSG\";\n\nuse Email::Sender::Transport::SMTPS;\nuse Email::MIME::CreateHTML;\n\nmy $transport = Email::Sender::Transport::SMTPS-&gt;new({\n  host =&gt; $SMTP_Server,\n  ssl  =&gt; $SMTP_SSL,\n  port =&gt; $SMTP_Port,\n  sasl_username =&gt; $SMTP_User,\n  sasl_password =&gt; $SMTP_Password,\n  debug =&gt; 1,\n});\n\n\nmy $email = Email::MIME-&gt;create_html(\n  header =&gt; [\n    To      =&gt; $SendTo,\n    From    =&gt; $SendFrom,\n    Subject =&gt; $Subject,\n  ],\n\n body =&gt; $eMailMessage\n\n);\n\nsendmail($email, { transport =&gt; $transport });\n\nprint 'Mail Sent';\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["perl", "hash", "nested", "dereference"], "comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1463082403, "post_id": 37195887, "comment_id": 61924722, "body": "When in doubt about your structures, <a href=\"http://perldoc.perl.org/Data/Dumper.html\" rel=\"nofollow noreferrer\"><code>Data::Dumper</code></a> is of <i>great</i> help. Try <code>use Data::Dumper;</code> and then (in <code>read_regress_file</code>) <code>print Data::Dumper-&gt;Dump([$href]);</code>. You must pass a reference, i.e. either <code>$href</code> or <code>\\%regression</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1463087292, "post_id": 37195887, "comment_id": 61927246, "body": "Your question is very much lacking focus. You talk a lot about your confusion but never ask a question. What do you want to know?"}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1463082252, "post_id": 37196013, "comment_id": 61924626, "body": "or, without having to specify a feature, in 5.24.0, postfix-deref (no need for the circumfix operator)! <code>$regression{$name}-&gt;%*</code>. I still am on the fence regarding this feature, but I thought I&#39;d just throw it out there"}], "tags": [], "owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "is_accepted": false, "score": 0, "last_activity_date": 1463081906, "creation_date": 1463081906, "answer_id": 37196013, "question_id": 37195887, "link": "https://stackoverflow.com/questions/37195887/deferencing-hash-of-hashes-in-perl/37196013#37196013", "title": "Deferencing hash of hashes in Perl", "body": "<p>What I understand is that this:</p>\n\n<pre><code>$regression{$name} \n</code></pre>\n\n<p>represents a hashref, which looks like this:</p>\n\n<pre><code>{ file =&gt; '...something...'}\n</code></pre>\n\n<p>So, in order to dereference the hashref returned by <code>$regression{$name}</code>, you have to do something like:</p>\n\n<pre><code>%{ $regression{$name} }\n</code></pre>\n\n<p>In order to get the full hash.</p>\n\n<p>In order to get the file property of the hash, do this:</p>\n\n<pre><code>$regression{$name}-&gt;{file}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 2824895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/844892c80dbad33e7951a2cbd86aa300?s=128&d=identicon&r=PG&f=1", "display_name": "jktstance", "link": "https://stackoverflow.com/users/2824895/jktstance"}, "edited": false, "score": 0, "creation_date": 1463152775, "post_id": 37198574, "comment_id": 61958838, "body": "Borodin, thanks for the extensive reply. I should have stated I&#39;m not much of a programmer and neither are my colleagues. I know TCL, and this code was written last week :)  I&#39;m a little more clear on this. The value of a hash key must be a scalar, so a nested hash is always reported as a reference to the nested hash. This, combined with the awkward syntax to call them (and also how they behave when passed to subs, was confusing, especially since there are 3 ways to dereference stuff.  <code>printf</code> is also useful; I&#39;ll be sure to use that when debugging instead.  Cheers!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 133, "user_id": 2824895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/844892c80dbad33e7951a2cbd86aa300?s=128&d=identicon&r=PG&f=1", "display_name": "jktstance", "link": "https://stackoverflow.com/users/2824895/jktstance"}, "edited": false, "score": 0, "creation_date": 1463153430, "post_id": 37198574, "comment_id": 61959240, "body": "@jktstance: It would help you to be clearer with your nomenclature. Hashes and arrays have <i>elements</i>. Each element has a <i>key</i> (or an <i>index</i>) and a scalar <i>value</i>. Hashes are indexed by strings, while arrays are indexed by non-negative integers. I&#39;m not sure what you mean by <code>3 ways to dereference stuff</code>? A hash reference <code>$href</code> may be dereferences as a hash by writing <code>%$href</code>. But much more often you will want to access one of its elements, and the element with key <code>key</code> of the hash referred to by <code>$href</code> is <code>$href-&gt;{key}</code>. The alternative <code>$$href{key}</code> is archaic and should be avoided"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 133, "user_id": 2824895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/844892c80dbad33e7951a2cbd86aa300?s=128&d=identicon&r=PG&f=1", "display_name": "jktstance", "link": "https://stackoverflow.com/users/2824895/jktstance"}, "edited": false, "score": 0, "creation_date": 1463153815, "post_id": 37198574, "comment_id": 61959461, "body": "@jktstance: You would probably get more useful answers by asking for help with <i>specific</i> questions. Without them all we can do is to daub a general commentary over the entire situation. Being <i>&quot;not much of a programmer &quot;</i> you aren&#39;t really in a position to say that there is an <i>&quot;awkward syntax to call them&quot;</i> (and you don&#39;t mean <i>*call</i> here\u2014that is something else althogether). You won&#39;t gain friends by finding fault with a language that you don&#39;t know instead of acknowledging that the issue is really with your own lack of knoweldge"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1463092624, "creation_date": 1463092624, "answer_id": 37198574, "question_id": 37195887, "link": "https://stackoverflow.com/questions/37195887/deferencing-hash-of-hashes-in-perl/37198574#37198574", "title": "Deferencing hash of hashes in Perl", "body": "<p>This is a tough one. You've found some very awkward code that displays what may well be a bug in Perl, and you're getting confused over dereferencing Perl data structures. Standard Perl installations include the full set of documentation, and I suggest you take a look at <code>perldoc perlreftut</code> which is also available online at <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">perldoc.com</a></p>\n\n<p>The most obvious thing is that you are writing very old-fashioned Perl. Using an ampersand <code>&amp;</code> to call a Perl subroutine hasn't been considered good practice since v5.8 was released fourteen years ago</p>\n\n<p>I don't think there's much need to go beyond your clearly experimentatal lines at the start of the first <code>for</code> loop. Once you have understood this the rest should follow</p>\n\n<pre><code>say \"file $regression{$name}{file}\";\nsay \"regression name $regression{$name}\";\nsay \"regression name ${regression}{$name}\";\n</code></pre>\n\n<p>First of all, expanding data structure references within a string is unreliable. Perl tries to do what you mean, but it's very easy to write something ambiguous without realising it. It is often much better to use <code>printf</code> so that you can specify the embedded value separately. For instance</p>\n\n<pre><code>printf \"file %s\\n\", $regression{$name}{file};\n</code></pre>\n\n<p>That said, you have a problem. <code>$regression{$name}</code> accesses the element of hash <code>%regression</code> whose key is equal to <code>$name</code>. That value is a reference to another hash, so the line</p>\n\n<pre><code>say \"regression name $regression{$name}\";\n</code></pre>\n\n<p>prints something like</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>regression name HASH(0x29348b0)\n</code></pre>\n\n<p>which you really don't want to see</p>\n\n<p>Your first try <code>$regression{$name}{file}</code> accesses the element of the secondary hash that has the key <code>file</code>. That works fine</p>\n\n<p>But <code>${regression}{$name}</code> should be the same as <code>$regression{$name}</code>. Outside a string it is, but inside it's like <code>${regression}</code> and <code>{$name}</code> are treated separately</p>\n\n<p>There are really too many issues here for me to start guessing where you're stuck, especially without being able to talk about specifics. But it may help if I rewrite the initial code like this</p>\n\n<pre><code>my %regression;\nprint \"Reading regression dir: $opt_dir\\n\";\n\nforeach my $f ( glob(\"$opt_dir/*.pl\") ) {\n\n    my ($name, $path, $suffix) = fileparse($f, '\\.regress');\n\n    $regression{$name}{file} = $f;\n    my $file_details = $regression{$name};\n\n    say \"file $file_details-&gt;{file}\";\n\n    read_regress_file($f, $file_details);\n}\n</code></pre>\n\n<p>I've copied the hash reference to <code>$file_details</code> and passed it to the subroutine like that. Can you see that each element of <code>%regression</code> is keyed by the name of the file, and that each value is a <em>reference to</em> another hash that contains the values filled in by <code>read_regress_file</code>?</p>\n\n<p>I hope this helps. This isn't really a forum for teaching language basics so I don't think I can do much better</p>\n"}], "owner": {"reputation": 133, "user_id": 2824895, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/844892c80dbad33e7951a2cbd86aa300?s=128&d=identicon&r=PG&f=1", "display_name": "jktstance", "link": "https://stackoverflow.com/users/2824895/jktstance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 37198574, "answer_count": 2, "score": 1, "last_activity_date": 1463092624, "creation_date": 1463081462, "last_edit_date": 1463087230, "question_id": 37195887, "link": "https://stackoverflow.com/questions/37195887/deferencing-hash-of-hashes-in-perl", "title": "Deferencing hash of hashes in Perl", "body": "<p>Sorry for this long post, the code should be easy to understand for veterans of Perl. I'm new to Perl and I'm trying to figure out this bit of code:</p>\n\n<pre><code>my %regression;\n\nprint \"Reading regression dir: $opt_dir\\n\";\n\nforeach my $f ( glob(\"$opt_dir/*.regress\") ) {\n    my $name = ( fileparse( $f, '\\.regress' ) )[0];\n    $regression{$name}{file} = $f;\n\n    say \"file $regression{$name}{file}\";\n    say \"regression name $regression{$name}\";\n    say \"regression name ${regression}{$name}\";\n\n    &amp;read_regress_file( $f, $regression{$name} );\n}\n\n\nsub read_regress_file {\n    say \"args @_\";\n\n    my $file = shift;\n    my $href = shift;\n\n    say \"href $href\";\n\n    open FILE, $file or die \"Cannot open $file: $!\\n\";\n\n    while ( &lt;FILE&gt; ) {\n        next if /^\\s*\\#/ or /^\\s*$/;\n        chomp;\n\n        my @tokens = split \"=\";\n        my $key    = shift @tokens;\n        $$href{$key} = join( \"=\", @tokens );\n    }\n\n    close FILE;\n}\n</code></pre>\n\n<p>The <code>say</code> lines are things I added to debug.</p>\n\n<hr>\n\n<p>My confusion is the last part of the subroutine <code>read_regress_file</code>. It looks like <code>href</code> is a reference from the line <code>my $href = shift;</code>. However, I'm trying to figure out how the hash that was passed got referenced in the first place.</p>\n\n<p><code>%regression</code> is a hash with keys of <code>$name</code>. The <code>.regress</code> files the code reads are simple files contains variables and their values in the form of:</p>\n\n<pre><code>var1=value\nvar2=value\n...\n</code></pre>\n\n<p>So it looks like the line</p>\n\n<pre><code>my $name = (fileparse($f,'\\.regress'))[0];\n</code></pre>\n\n<p>is creating the keys as scalars and the line</p>\n\n<pre><code>$regression{$name}{file} = $f;\n</code></pre>\n\n<p>actually makes <code>$name</code> into a hash.</p>\n\n<p>In my debugging lines</p>\n\n<pre><code>say \"regression name $regression{$name}\";\n</code></pre>\n\n<p>prints the reference, for instance</p>\n\n<pre><code>regression name HASH(0x7cd198)\n</code></pre>\n\n<p>but</p>\n\n<pre><code>say \"regression name ${regression}{$name}\";\n</code></pre>\n\n<p>prints a name, like</p>\n\n<pre><code>regression name {filename}\n</code></pre>\n\n<p>with the file name inside the braces.</p>\n\n<p>However, using</p>\n\n<pre><code>say \"regression name $$regression{$name}\";\n</code></pre>\n\n<p>prints nothing.</p>\n\n<p>From my understanding, it looks like <code>regression</code> is an actual hash, but the references are the nested hashes, <code>name</code>.</p>\n\n<p>Why does my deference test line using braces work, but the other form of dereferencing (<code>$$</code>) not work?</p>\n\n<p>Also, why is the name still surrounded by braces when it prints? Shouldn't I be dereferencing <code>$name</code> instead?</p>\n\n<p>I'm sorry if this is difficult to read. I'm confused which hash is actually referenced, and how to deference them if the reference is the nested hash.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1463079837, "post_id": 37195024, "comment_id": 61923222, "body": "You are just reading file and printing the replaced string, How it will reflect in the file? You should use <code>sed</code> with <code>system</code> command in <code>perl</code> to achieve this."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 2, "creation_date": 1463079925, "post_id": 37195024, "comment_id": 61923271, "body": "@AbhiNickz There&#39;s no need to resort to sed, perl can do &quot;in-place&quot; modifications just fine."}, {"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1463080031, "post_id": 37195024, "comment_id": 61923349, "body": "Yes but Enric just written code to read a file so I suggested another way to modify file,"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1463080172, "post_id": 37195024, "comment_id": 61923442, "body": "Tie::File is never* the answer! (* ok, almost)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1463080379, "post_id": 37195024, "comment_id": 61923572, "body": "Not tested: <code>perl -pi.bak -e &#39;s&#47;d01&#47;d02&#47;g&#39; d00.dat</code>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 2, "creation_date": 1463080982, "post_id": 37195024, "comment_id": 61923881, "body": "... as opposed to Tie::Fighter which is always* the answer! (* ok, almost) ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1463080323, "creation_date": 1463080323, "answer_id": 37195571, "question_id": 37195024, "link": "https://stackoverflow.com/questions/37195024/modify-a-string-in-a-file-with-perl/37195571#37195571", "title": "Modify a string in a file with perl", "body": "<p>The simplest, fastest solution is read the file into memory, make the change, then write the changes back to the file.</p>\n\n<pre><code>my $qfn = \"d00.dat\";\n\nmy $file;\n{\n   open(my $fh, '&lt;', $qfn)\n      or die(\"Can't open \\\"$qfn\\\": $!\\n\");\n\n   local $/;\n   $file = &lt;$fh&gt;;\n}\n\n$file =~ s/d01/d02/g;\n\n{\n   open(my $fh, '&gt;', $qfn)\n      or die(\"Can't create \\\"$qfn\\\": $!\\n\");\n\n   print($fh $file);\n}\n</code></pre>\n\n<p>As a one-liner:</p>\n\n<pre><code>perl -i -pe's/d01/d02/g' d00.dat\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 0, "last_activity_date": 1463080532, "creation_date": 1463080532, "answer_id": 37195637, "question_id": 37195024, "link": "https://stackoverflow.com/questions/37195024/modify-a-string-in-a-file-with-perl/37195637#37195637", "title": "Modify a string in a file with perl", "body": "<p>Perl has a switch to modify files in-place. I think that is what you are looking for:</p>\n\n<pre><code>perl -i.bak -p -e 's/d01/d02/g;' d00.dat\n</code></pre>\n\n<p>This will </p>\n\n<ul>\n<li>rename <code>d00.dat</code> to <code>d00.dat.bak</code></li>\n<li>read <code>d00.dat.bak</code></li>\n<li>replace every occurence of <code>d01</code> with <code>d02</code></li>\n<li>print the resulting line to <code>d00.dat</code></li>\n</ul>\n\n<p>Explanation:</p>\n\n<ul>\n<li><p><code>-i</code> edits files in-place and optionally makes a backup if some suffix is given.\nE.g. <code>-i.bak</code> will create <code>$file.bak</code>, <code>-i.before</code> will create <code>$file.before</code> etc.\nWithout a suffix (only <code>-i</code>) there will be <em>no backup</em> so consider this dangerous.</p></li>\n<li><p><code>-p</code> places a loop like </p>\n\n<pre><code>while(&lt;&gt;) {\n    # your code\n    print;\n}\n</code></pre>\n\n<p>around your code (<code>s/\u2026/\u2026/g;</code>) in this case</p></li>\n<li><p><code>-e</code> simply means <em>\"execute the following statement\"</em>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1561096344, "last_edit_date": 1561096344, "creation_date": 1463080550, "answer_id": 37195643, "question_id": 37195024, "link": "https://stackoverflow.com/questions/37195024/modify-a-string-in-a-file-with-perl/37195643#37195643", "title": "Modify a string in a file with perl", "body": "<p>If you are thinking about changing just those places, you can't -- have to replace the whole file.<sup>&dagger;</sup> </p>\n\n<p>You can print out each line, including the changes, to another file, then copy that over.  Many tools work that way.  Or, you can read in all lines, change them as suitable, and then overwrite the file.</p>\n\n<pre><code>my $filename = \"d00.dat\";\n\nopen(my $fh, '&lt;', $filename) || die \"file could not open $! \\n\";\nmy @new_lines = map { s/d01/d02/g; $_ } &lt;$fh&gt;;\nclose $fh;\n\nopen(my $fh_out, '&gt;', $filename) || die \"file could not open $! \\n\";\nprint $fh_out $_  for @new_lines;\nclose $fh_out;\n</code></pre>\n\n<hr>\n\n<p>Since <code>open</code> will close a filehandle if opened already you can also do </p>\n\n<pre><code>open my $fh, '&lt;', $filename or die \"Can't open $filename: $!\";\nmy @new_lines = map { s/d01/d02/gr } &lt;$fh&gt;;\n\nopen $fh, '&gt;', $filename or die \"Can't open $filename: $!\";\nprint $fh $_  for @new_lines;\nclose $fh;\n</code></pre>\n\n<p>where I dropped parens and changed to <code>or</code>, and added the <code>$filename</code> to the error message. I also use the <code>/r</code> modifier in regex (\"<em>non-destructive substitution</em>\"), with which the changed string is returned -- exactly as needed for that <code>map</code>, so now we don't need that lone <code>$_</code> at the end of the block.</p>\n\n<p>A newline at the end of <code>die</code> message, present in the question, has one subtle consequence: it suppresses information about the line number at which the <code>die</code> was emitted.  While this is sometimes desired, in most cases it isn't and here we certainly want to see the line number of <em>that</em> call which failed!  So I removed that additional newline in <code>die</code>'s message.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup>&thinsp;A file is a sequence of bytes.  So if we want to replace a <code>nope</code> with <code>yes</code> ... what happens with the last character, <code>e</code>, once we replaced the first three? We have to move the rest of the file, following the original <code>nope</code>, to overwrite the <code>e</code> and so to now follow <code>yes</code>. So we need to overwrite the rest of the file, and in practice it's far easier to just replace the whole file.</p>\n\n<p>If we wanted to replace the <code>nope</code> with <code>yeah</code> ... well, now it's four-for-four and we could in fact just overwrite those four characters. However, that's rarely the case and is more complicated to do.</p>\n\n<p>While the question asks to replace<code>d01</code> with <code>d02</code> I'd imagine that this is an example while in practice the strings aren't of the same length in general. Even if they are ... replacing the file is much easier and safer, and most likely no efficiency loss will be noticed.</p>\n"}], "owner": {"reputation": 997, "user_id": 2354319, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f1ea1af443d922b09df749e51b4b0436?s=128&d=identicon&r=PG", "display_name": "Enric Agud Pique", "link": "https://stackoverflow.com/users/2354319/enric-agud-pique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 37195643, "answer_count": 3, "score": -1, "last_activity_date": 1561096344, "creation_date": 1463078492, "question_id": 37195024, "link": "https://stackoverflow.com/questions/37195024/modify-a-string-in-a-file-with-perl", "title": "Modify a string in a file with perl", "body": "<p>I have a file, d00.dat, and I need to change the string d01 for d02...With the following code it prints in the console the modificatons but they are not changed in the file d00.dat...how can I do that?</p>\n\n<pre><code>my $line = 0;\nmy $filename = \"d00.dat\";\nopen(my $fh, '&lt;', $filename) || die \"file could not open $! \\n\";\nwhile( $line = &lt;$fh&gt;) {\nif( $line =~ s/d01/d02/g ){\nprint \"$line\\n\";\n}\n</code></pre>\n"}, {"tags": ["linux", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6327116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3cfqjHMP0aM/AAAAAAAAAAI/AAAAAAAAM-4/N-OJfhVOinY/photo.jpg?sz=128", "display_name": "user6327116", "link": "https://stackoverflow.com/users/6327116/user6327116"}, "edited": false, "score": 0, "creation_date": 1463124582, "post_id": 37195244, "comment_id": 61939270, "body": "Thanks for your help! this command run during few seconds with large file, but produces nothing.. i doesn&#39;t work either with inputfile.txt example file."}, {"owner": {"reputation": 1, "user_id": 6327116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3cfqjHMP0aM/AAAAAAAAAAI/AAAAAAAAM-4/N-OJfhVOinY/photo.jpg?sz=128", "display_name": "user6327116", "link": "https://stackoverflow.com/users/6327116/user6327116"}, "edited": false, "score": 0, "creation_date": 1463126861, "post_id": 37195244, "comment_id": 61940749, "body": "Ha yes ! Sorry ! works perfect ! Thank you very much for you two."}], "tags": [], "owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "is_accepted": false, "score": 1, "last_activity_date": 1463079179, "creation_date": 1463079179, "answer_id": 37195244, "question_id": 37194947, "link": "https://stackoverflow.com/questions/37194947/split-file-using-pattern-and-name-each-resulting-files-with-the-string-containin/37195244#37195244", "title": "split file using pattern and name each resulting files with the string containing this pattern (perl)", "body": "<p>Try this:</p>\n\n<pre><code>perl -n -e '/^PATTERN.*/ and open FH, \"$&amp;.txt\"; print FH;' inputfile.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6327116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3cfqjHMP0aM/AAAAAAAAAAI/AAAAAAAAM-4/N-OJfhVOinY/photo.jpg?sz=128", "display_name": "user6327116", "link": "https://stackoverflow.com/users/6327116/user6327116"}, "edited": false, "score": 0, "creation_date": 1463124118, "post_id": 37195416, "comment_id": 61938986, "body": "Thanks for your help !     perl -n -e &#39;/^(PATTERN\\d)/ and open(FH, &quot;&gt; $1.txt&quot;)and next; print FH;&#39; input.txt      is running for awhile (input.txt is 1 Go) but produce nothing.  I removed the &#39;and next&#39; as I understood from your message, because I want to keep the PATTERN1 in the first line of PATTERN1.txt, it doesn&#39;t work either :    perl -n -e &#39;/^(PATTERN\\d)/ and open(FH, &quot;&gt; $1.txt&quot;); print FH;&#39; input.txt"}, {"owner": {"reputation": 1, "user_id": 6327116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3cfqjHMP0aM/AAAAAAAAAAI/AAAAAAAAM-4/N-OJfhVOinY/photo.jpg?sz=128", "display_name": "user6327116", "link": "https://stackoverflow.com/users/6327116/user6327116"}, "edited": false, "score": 0, "creation_date": 1463124737, "post_id": 37195416, "comment_id": 61939375, "body": "Sorry, your command works with input.txt example file but for now, doesn&#39;t work with my 1Go text file. I&#39;m on it.  I found why it doesn&#39;t work. In fact my pattern line could be PATTERNpsks1225s The length of string is variable and can contain letter, number, or _"}, {"owner": {"reputation": 33, "user_id": 6174739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79879952f3ab9eb37ddfee116e6e5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "cberning", "link": "https://stackoverflow.com/users/6174739/cberning"}, "reply_to_user": {"reputation": 1, "user_id": 6327116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3cfqjHMP0aM/AAAAAAAAAAI/AAAAAAAAM-4/N-OJfhVOinY/photo.jpg?sz=128", "display_name": "user6327116", "link": "https://stackoverflow.com/users/6327116/user6327116"}, "edited": false, "score": 0, "creation_date": 1463153948, "post_id": 37195416, "comment_id": 61959540, "body": "So your pattern would then be /^PATTERN\\w+/  would cover your needs."}], "tags": [], "owner": {"reputation": 33, "user_id": 6174739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79879952f3ab9eb37ddfee116e6e5c6e?s=128&d=identicon&r=PG&f=1", "display_name": "cberning", "link": "https://stackoverflow.com/users/6174739/cberning"}, "is_accepted": false, "score": 1, "last_activity_date": 1463082188, "last_edit_date": 1463082188, "creation_date": 1463079756, "answer_id": 37195416, "question_id": 37194947, "link": "https://stackoverflow.com/questions/37194947/split-file-using-pattern-and-name-each-resulting-files-with-the-string-containin/37195416#37195416", "title": "split file using pattern and name each resulting files with the string containing this pattern (perl)", "body": "<p>If you are trying to get the values to get put into files named\nPATTERN1(ie that match your pattern).\nThen you will want to capture the name in your regex and use it as part of your file name.</p>\n\n<pre><code>perl -n -e '/^(PATTERN\\d)/ and open(FH, \"&gt; $1.txt\")and next; print FH;' inputfile.txt\n</code></pre>\n\n<p>Notice I am capturing the pattern inside the () and $1 will hold the value of our match. I also added a next after file opening, otherwise the match would also be included inside the file.</p>\n"}], "owner": {"reputation": 1, "user_id": 6327116, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3cfqjHMP0aM/AAAAAAAAAAI/AAAAAAAAM-4/N-OJfhVOinY/photo.jpg?sz=128", "display_name": "user6327116", "link": "https://stackoverflow.com/users/6327116/user6327116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1598569289, "creation_date": 1463078253, "last_edit_date": 1598569289, "question_id": 37194947, "link": "https://stackoverflow.com/questions/37194947/split-file-using-pattern-and-name-each-resulting-files-with-the-string-containin", "title": "split file using pattern and name each resulting files with the string containing this pattern (perl)", "body": "<p>I have a file with is like this</p>\n<pre><code>PATTERN1abcdef_abcd_ab\na\nb\nPATTERN2azerty_az_aze\nc\nd\n</code></pre>\n<p>and I need to split it into smaller files like these:\nPATTERN1abcdef_abcd_ab.txt, which contains:</p>\n<pre><code>PATTERN1abcdef_abcd_ab\na\nb\n</code></pre>\n<p>and PATTERN2azerty_az_aze.txt, which contains:</p>\n<pre><code>PATTERN2azerty_az_aze\nc\nd\n</code></pre>\n<p>I found this perl command, which is working fine:</p>\n<pre><code>perl -n -e '/^PATTERN/ and open FH, &quot;&gt;output_&quot;.$n++; print FH;' inputfile.txt\n</code></pre>\n<p>except it does not rename the output files with the string containing the pattern. (the files are output_1. for example)</p>\n<p>EDIT: Sorry, I made a mistake, the string containing the PATTERN should not be removed from output text files, AND should be the file name.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463066223, "post_id": 37190926, "comment_id": 61914752, "body": "Do you have a question?"}, {"owner": {"reputation": 65, "user_id": 4572971, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/46c342a03740ca2886dc02980e1ce546?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4572971/pankaj"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1463066794, "post_id": 37190926, "comment_id": 61915123, "body": "I am sorry if it was not clear. I am looking for the code for that change in perl"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463066966, "post_id": 37190926, "comment_id": 61915249, "body": "It&#39;s still not clear. You haven&#39;t shown a hash, just some plain text. Are you trying to print a hash, read text into a hash, read text into a hash and print it in a different format, or something totally different?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 4572971, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/46c342a03740ca2886dc02980e1ce546?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4572971/pankaj"}, "edited": false, "score": 0, "creation_date": 1463070203, "post_id": 37191642, "comment_id": 61917545, "body": "this is what exactly i was looking for...thankyou"}, {"owner": {"reputation": 65, "user_id": 4572971, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/46c342a03740ca2886dc02980e1ce546?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4572971/pankaj"}, "edited": false, "score": 0, "creation_date": 1463070249, "post_id": 37191642, "comment_id": 61917580, "body": "and sorry for the incomplete question :("}, {"owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "reply_to_user": {"reputation": 65, "user_id": 4572971, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/46c342a03740ca2886dc02980e1ce546?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4572971/pankaj"}, "edited": false, "score": 1, "creation_date": 1463079138, "post_id": 37191642, "comment_id": 61922820, "body": "cool, I&#39;m glad I could help"}], "tags": [], "owner": {"reputation": 23906, "user_id": 459233, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/23bfb69cb2c8a6a028d2376b12db4a73?s=128&d=identicon&r=PG", "display_name": "Tudor Constantin", "link": "https://stackoverflow.com/users/459233/tudor-constantin"}, "is_accepted": true, "score": 2, "last_activity_date": 1463067702, "creation_date": 1463067702, "answer_id": 37191642, "question_id": 37190926, "link": "https://stackoverflow.com/questions/37190926/duplicate-values-in-hash/37191642#37191642", "title": "duplicate values in hash", "body": "<p>this is the most I could make based on your requirements:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %items = (\n    Item1 =&gt; 'Box1',\n    Item2 =&gt; 'Box1',\n\n    Item3 =&gt; 'Box2',\n    Item4 =&gt; 'Box2',\n);\n\nmy %boxes = ();\n\nforeach my $item_name ( keys %items ){\n    push @{ $boxes{ $items{$item_name} } }, $item_name;\n}\n\nprint \"Boxes: \".Dumper( \\%boxes );\n</code></pre>\n\n<p>and prints:</p>\n\n<pre><code>Boxes: $VAR1 = {\n          'Box1' =&gt; [\n                      'Item1',\n                      'Item2'\n                    ],\n          'Box2' =&gt; [\n                      'Item4',\n                      'Item3'\n                    ]\n        };\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 4572971, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/46c342a03740ca2886dc02980e1ce546?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/4572971/pankaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1464587164, "accepted_answer_id": 37191642, "answer_count": 1, "score": 0, "last_activity_date": 1463067702, "creation_date": 1463065770, "last_edit_date": 1463066781, "question_id": 37190926, "link": "https://stackoverflow.com/questions/37190926/duplicate-values-in-hash", "closed_reason": "Needs details or clarity", "title": "duplicate values in hash", "body": "<p>Item1 : Box1\nItem2 : Box1</p>\n\n<p>Item3 : Box2\nItem4 : Box2</p>\n\n<p>I have an output in the form of a hash(listed above)\nI want to process it so that output looks like to be</p>\n\n<p>Box1 = {Item1, Item2}\nBox2 = {Item3, Item4}</p>\n"}, {"tags": ["perl", "hook", "log4perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463067858, "post_id": 37190281, "comment_id": 61915887, "body": "You said <code>$av_std_LOGFILE</code> is set in a script a couple times and a module a couple times. Which is it?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463068278, "post_id": 37190281, "comment_id": 61916237, "body": "Also, you shouldn&#39;t call subroutines with <code>&amp;</code> unless you know what that does. <code>return &amp;av_getLogfileName();</code> should be <code>return av_getLogfileName();</code> (or better yet, <code>return av_get_logfile_name();</code>, mixing snake case and camel case is really hard to read and snake case is generally preferred in Perl)."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463117673, "post_id": 37190829, "comment_id": 61935848, "body": "thanks; I get error messages: Can&#39;t open  (Datei oder Verzeichnis nicht gefunden) at /home/fx42252/perl5/lib/perl5/Log/Log4perl/Appender/File.pm line 124.  at /home/fx42252/perl5/lib/perl5/Log/Log4perl/Appender/File.pm line 129."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463119559, "post_id": 37190829, "comment_id": 61936598, "body": "Either you&#39;re not setting <code>$av_std_LOGFILE</code> in package <code>main</code>, or you&#39;re setting it after you call <code>Log::Log4perl::init</code>. If you&#39;re setting the variable inside a module, you need to use the module&#39;s package name, e.g. if your module code is <code>package Foo::Bar; our $av_std_LOGFILE = &#39;&#47;foo&#39;;</code> then your hook would be <code>sub { return $Foo::Bar::av_std_LOGFILE; }</code>"}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463121904, "post_id": 37190829, "comment_id": 61937739, "body": "lets skip the expression &quot;module&quot;. I am using perl up to now to replace a bash script. So there is not realy a structure like package, module, ..... What I understood so far is, by using perl that way, it is all &quot;main::&quot;. Not sure. Anyhow: You can be sure the variable is set at the time init is used."}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463122038, "post_id": 37190829, "comment_id": 61937807, "body": "our $av_std_LOGFILE=&#39;test.log&#39;;  $av_std_DEBUG &amp;&amp; say &quot;debug \\$av_std_LOGFILE: $av_std_LOGFILE&quot;;  Log::Log4perl::Config-&gt;utf8( 1 ); Log::Log4perl::init( &quot;av_log4perl.conf&quot; );  my $logger = get_logger();$logger-&gt;error(&quot;Blah&quot;);  that is all of the script- just for testing."}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463122598, "post_id": 37190829, "comment_id": 61938128, "body": "see my edits of the original question which now shows the whole script."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463149250, "post_id": 37190829, "comment_id": 61956133, "body": "@averlon Your code works for me when I copy and paste it verbatim and run it from the directory containing <code>av_log4perl.conf</code>. Try passing the full path to the config file in the call to <code>Log::Log4perl::init</code>. Also, please don&#39;t change your question to a completely different question after people have spent time giving answers. Feel free to post a new question if you can&#39;t figure this out, but make sure your problem is reproducible. As I said, your code works fine for me."}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463215111, "post_id": 37190829, "comment_id": 61979079, "body": "I tried to copy @ThisSuitIsBlackNot in at the beginning of my comment but failed. Sorry I am a little bit confused with the usage of stackoverflow. I did not change the question. But since someone questioned that I have set the variable I have posted the whole script to show it is done! Now it&#39;s gone."}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463216953, "post_id": 37190829, "comment_id": 61979655, "body": "I cant get the user name with @ included in the comments even where the help tells me how - but this does not work for me; it still does not work for me, even when I changed the conf-file name to full path. Unfortunately the comment field here is to small to post the error message."}, {"owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "edited": false, "score": 0, "creation_date": 1463218047, "post_id": 37190829, "comment_id": 61979965, "body": "O.K.; I found the error; I had an additional line im my config-file but commented out; This line broke the structure. Now it works. Thanks to @ThisSuitIsBlackNot"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1463066537, "last_edit_date": 1463066537, "creation_date": 1463065500, "answer_id": 37190829, "question_id": 37190281, "link": "https://stackoverflow.com/questions/37190281/how-can-i-use-a-perl-variable-in-my-loglog4perl-config-file/37190829#37190829", "title": "How can I use a Perl variable in my Log::Log4perl config file?", "body": "<p><code>print</code> returns 1 on success, so</p>\n\n<pre><code>sub { print \"$av_std_LOGFILE\"; }\n</code></pre>\n\n<p>returns 1, not the value of <code>$av_std_LOGFILE</code>. You also have to <a href=\"http://log4perl.sourceforge.net/releases/Log-Log4perl/docs/html/Log/Log4perl/FAQ.html#02bbc\" rel=\"nofollow\">fully qualify variable names in hooks</a>, which means you'll have to make <code>$av_std_LOGFILE</code> a package global.</p>\n\n<p>Change your hook to:</p>\n\n<pre><code>sub { return $main::av_std_LOGFILE; } # double quotes are unnecessary\n</code></pre>\n\n<p>and set <code>$av_std_LOGFILE</code> in your script like this (before calling <code>Log::Log4perl::init</code>):</p>\n\n<pre><code>our $av_std_LOGFILE = '/path/to/logfile';\n</code></pre>\n\n<p>Generally, you should avoid global variables, so I would prefer using a subroutine.</p>\n"}], "owner": {"reputation": 135, "user_id": 3189980, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/7c93e3b51b42b64f8f032b25e8e767dd?s=128&d=identicon&r=PG", "display_name": "averlon", "link": "https://stackoverflow.com/users/3189980/averlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 1, "accepted_answer_id": 37190829, "answer_count": 1, "score": 1, "last_activity_date": 1463149350, "creation_date": 1463064146, "last_edit_date": 1463149350, "question_id": 37190281, "link": "https://stackoverflow.com/questions/37190281/how-can-i-use-a-perl-variable-in-my-loglog4perl-config-file", "title": "How can I use a Perl variable in my Log::Log4perl config file?", "body": "<p>I would like to use a Perl variable from my script in a Log::Log4perl config file. I read the documentation and found that I can use a subroutine, but I would like to do it a little bit simpler, if possible.</p>\n\n<p>I want to set the filename for my appender:</p>\n\n<pre><code>log4perl.appender.av_std_LOGFILE.filename=\"whateverfilename.log\"\n</code></pre>\n\n<p>But doing this this way, it is a fixed value.</p>\n\n<p>I have the filename in a variable within my script and would like to use this at runtime:</p>\n\n<pre><code>log4perl.appender.av_std_LOGFILE.filename=\\\n sub { return &amp;av_getLogfileName(); }\n</code></pre>\n\n<p>Where this is the subroutine:</p>\n\n<pre><code>sub av_getLogfileName\n{\n    return $av_std_LOGFILE;\n}\n</code></pre>\n\n<p>This works, but I would like to avoid the sub inside my script since the return value is very simple.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Log::Log4perl#Perl-Hooks-in-the-Configuration-File\" rel=\"nofollow\">documentation</a> says:</p>\n\n<blockquote>\n  <p>Each value starting with the string <code>sub {...</code> is interpreted as Perl code to be executed at the time the application parses the configuration...</p>\n</blockquote>\n\n<p>So I tried something like this, but it did not work:</p>\n\n<pre><code>log4perl.appender.av_std_LOGFILE.filename=\\\n    sub { print \"$av_std_LOGFILE\"; }\n</code></pre>\n\n<p>Is there a way to get result of the variable without the sub inside my script?</p>\n"}, {"tags": ["forms", "perl", "cgi", "dancer"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1463064350, "post_id": 37189123, "comment_id": 61913330, "body": "My edit-summary was supposed to be &quot;please don&#39;t use CPAN links to specific versions, unless it&#39;s specifically about that version&quot;"}, {"owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1463064448, "post_id": 37189123, "comment_id": 61913431, "body": "Sorry, you&#39;re right. Copied this one instead of using <code>perldoc?</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1463064500, "post_id": 37189123, "comment_id": 61913482, "body": "If you prefer search.cpan.org to metacpan, you can use the permalink button in the top right, which gives <code>http:&#47;&#47;search.cpan.org&#47;perldoc?Dancer</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1463064578, "post_id": 37189123, "comment_id": 61913548, "body": "@This the link was to an anchor, so that one probably doesn&#39;t work."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1147230, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fe33f45c5990a98cfcb1388581de07af?s=128&d=identicon&r=PG", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/1147230/sebastian"}, "is_accepted": true, "score": 3, "last_activity_date": 1463064318, "last_edit_date": 1463064318, "creation_date": 1463061393, "answer_id": 37189123, "question_id": 37188792, "link": "https://stackoverflow.com/questions/37188792/perl-dancer-getting-data-from-forms/37189123#37189123", "title": "Perl Dancer: Getting data from forms", "body": "<pre><code>&lt;form action=\"/hello/:username\" method=\"get\" name=\"\"&gt;\n</code></pre>\n\n<p>will call exactly <code>/hello/:username</code> without and replacement. HTML is unable to magically replace parts of the sourcecode - no matter if the backend is using Dancer or anything else. (JavaScript could do that.)</p>\n\n<pre><code>get '/hello/:username' =&gt; sub {\n</code></pre>\n\n<p>matches all calls to <code>/hello/</code> followed by any string, like <code>/hello/chungel</code>, <code>/hello/Larry</code> or <code>/hello/:username</code>. the last one would set the value <code>username</code> into <code>param('username')</code>.</p>\n\n<p>You also added a form field with <code>name=\"username\"</code> which ends up in two values for one key (one from the URL, one from the form).</p>\n\n<p>Finally: Use a fixed URL as form action:</p>\n\n<pre><code>&lt;form action=\"/hello\" method=\"get\" name=\"\"&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>get '/hello' =&gt; sub {\n</code></pre>\n\n<p>Passing the username as HTML form value (and HTTP argument) doesn't get any advantage here.</p>\n\n<p>If you really want to have the username within the URL, first use a different name in the route definition:</p>\n\n<pre><code>get '/hello/:url_username' =&gt; sub {\n    return param('url_username');\n</code></pre>\n\n<p>Next you need to either rewrite the form action using JavaScript or rewrite the target URL using <a href=\"https://metacpan.org/pod/Dancer#hook\" rel=\"nofollow\">a Dancer <code>before</code> hook</a>.</p>\n"}], "owner": {"reputation": 350, "user_id": 5243363, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/koXar.jpg?s=128&g=1", "display_name": "Ch&#252;ngel", "link": "https://stackoverflow.com/users/5243363/ch%c3%bcngel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 37189123, "answer_count": 1, "score": 1, "last_activity_date": 1463064318, "creation_date": 1463060629, "question_id": 37188792, "link": "https://stackoverflow.com/questions/37188792/perl-dancer-getting-data-from-forms", "title": "Perl Dancer: Getting data from forms", "body": "<p>I'm a Perl newbie and would like to know: </p>\n\n<ul>\n<li>How can I use data from html forms with Perl dancer?</li>\n</ul>\n\n<p>I'm struggling with the following example. I have a form on my <code>index.tt</code> file like this:</p>\n\n<pre><code> &lt;form action=\"/hello/:username\" method=\"get\" name=\"\"&gt;\n        &lt;h3&gt;Please log in &lt;/h3&gt;\n          &lt;input type=\"text\" name=\"username\" required=\"\"/&gt;\n          &lt;input type=\"password\" name=\"senha\" required=\"\"/&gt;               \n          &lt;button name=\"Submit\" value=\"Login\" type=\"Submit\"&gt;Login&lt;/button&gt;              \n    &lt;/form&gt;     \n</code></pre>\n\n<p>I would like to use the username from the form and build a page which returns the typed information. So I've checked <a href=\"https://metacpan.org/pod/distribution/Dancer/lib/Dancer/Tutorial.pod#Layouts\" rel=\"nofollow\">this</a> tutorial and I've done the following in my <code>Proyecto.pm</code>:</p>\n\n<pre><code>package Proyecto;\nuse Dancer ':syntax';\nour $VERSION = '0.1';    \n\n\nget '/' =&gt; sub {\ntemplate 'index';\n};\n\nget '/hello/:username' =&gt; sub {\nmy $username= params('username');\nreturn \"Hola $username\";\n};\n</code></pre>\n\n<p>But it doesn't work. Do you guys know what it's missing here? Thanks!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6295895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1053659371336814/picture?type=large", "display_name": "Tomb", "link": "https://stackoverflow.com/users/6295895/tomb"}, "edited": false, "score": 0, "creation_date": 1463081105, "post_id": 37188796, "comment_id": 61923952, "body": "this works thanks! I don&#39;t understand the -tmp$$ though.  Could you tell me what is it?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 19, "user_id": 6295895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1053659371336814/picture?type=large", "display_name": "Tomb", "link": "https://stackoverflow.com/users/6295895/tomb"}, "edited": false, "score": 0, "creation_date": 1463123690, "post_id": 37188796, "comment_id": 61938724, "body": "@Tomb: <code>$$</code> is the PID. It just creates a temporary file, to do it more correctly, see <a href=\"http://p3rl.org/File::Temp\" rel=\"nofollow noreferrer\">File::Temp</a>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1463061096, "last_edit_date": 1463061096, "creation_date": 1463060636, "answer_id": 37188796, "question_id": 37188527, "link": "https://stackoverflow.com/questions/37188527/open-multiple-files-and-copy-their-content-to-the-last-file-opened/37188796#37188796", "title": "open multiple files and copy their content to the last file opened", "body": "<p>You need to write to a different file, otherwise you'd rewrite the last file before reading its contents. You can then write to the output directly when reading the files, no need to store the contents in a hash. If you want to use the hash, print the values, not the keys.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $output_file = $ARGV[-1];\nmy $tmp = $output_file . \"-tmp$$\";\n\nopen my $OUT, '&gt;', $tmp or die $!;\n\nwhile (&lt;&gt;) {\n    print {$OUT} $_;\n}\n\nrename $tmp, $output_file or die $!;\nclose $OUT or die $!;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4173, "user_id": 4450651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6IMB.jpg?s=128&g=1", "display_name": "red0ct", "link": "https://stackoverflow.com/users/4450651/red0ct"}, "is_accepted": false, "score": 0, "last_activity_date": 1463071320, "last_edit_date": 1463071320, "creation_date": 1463065331, "answer_id": 37190767, "question_id": 37188527, "link": "https://stackoverflow.com/questions/37188527/open-multiple-files-and-copy-their-content-to-the-last-file-opened/37190767#37190767", "title": "open multiple files and copy their content to the last file opened", "body": "<p>Also here is some code that will do such task:</p>\n\n<pre><code>#...\nmy ($lastfile, $data) = pop @FILES;\n\nfor (@FILES) {\n    open my $fh, \"&lt;$_\" or die \"$!\";\n    $data .= join '', &lt;$fh&gt; , \"\\n\"; # you can change the \"\\n\" delimiter\n    close $fh\n}\nopen my $fh, '+&lt;',$lastfile or die \"$!\";\n$data .= join '', &lt;$fh&gt;;\nseek $fh, 0, 0; # allows to write from the beginning (in this case re-write file)\nprint $fh $data;\nclose $fh; \n</code></pre>\n\n<p>Read <a href=\"http://www.thegeekstuff.com/2010/09/perl-file-handle/\" rel=\"nofollow\">here</a> about opening file handles in both read and write mode.<br>\nAlso take care about which delimiter you use to make the result file more readable.</p>\n\n<hr>\n\n<p><strong>EDIT</strong><br>\nYou can even do so:</p>\n\n<pre><code>$data .= \"$_ -&gt; \" . join '', &lt;$fh&gt; , \"\\n\";\n</code></pre>\n\n<p>in first join and</p>\n\n<pre><code>$data .= \"$lastfile -&gt; \" . join '', &lt;$fh&gt;;\n</code></pre>\n\n<p>in second if you want to remember what content was in each file.</p>\n"}], "owner": {"reputation": 19, "user_id": 6295895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1053659371336814/picture?type=large", "display_name": "Tomb", "link": "https://stackoverflow.com/users/6295895/tomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 37188796, "answer_count": 2, "score": 0, "last_activity_date": 1463071320, "creation_date": 1463060011, "question_id": 37188527, "link": "https://stackoverflow.com/questions/37188527/open-multiple-files-and-copy-their-content-to-the-last-file-opened", "title": "open multiple files and copy their content to the last file opened", "body": "<p>I'd like to open multiple files and copy their content to the last file opened</p>\n\n<p>input:</p>\n\n<pre><code>file1.txt -&gt; 1111\nfile2.txt -&gt; 2222\nfile3.txt -&gt; 3333\n</code></pre>\n\n<p>output should be:</p>\n\n<pre><code>file1.txt -&gt; 1111\nfile2.txt -&gt; 2222\nfile3.txt -&gt; 1111 2222 3333\n</code></pre>\n\n<p>my code</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %data;\nmy @FILES = @ARGV;\n\nforeach my $file (@FILES) {\n    local $/ = undef;\n    open my $fh, '&lt;', $file;\n    $data{$file} = &lt;$fh&gt;;\n\nforeach my $key (keys %data) {\n    open (OUTFILE, \"&gt;\".$file) or die \"#!\\n\";\n    print OUTFILE \"$key\";\n}\n}\nclose(OUTFILE);\nexit;\n</code></pre>\n\n<p>output from the code:</p>\n\n<pre><code>file1.txt -&gt; file1.txt\nfile2.txt -&gt; file1.txt\nfile3.txt -&gt; file3.txt\n</code></pre>\n\n<p>It's not reading the files because it prints the file name instead of it's content and also I can't seem to print the content of previous files into the last file.\nThanks in advance</p>\n"}]