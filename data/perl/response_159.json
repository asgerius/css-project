[{"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516837267, "post_id": 48433261, "comment_id": 83858270, "body": "Can&#39;t help it ... are you really after a &quot;<i>perfect</i>&quot; regex? :)  I heard that it may be unattainable"}], "answers": [{"tags": [], "owner": {"reputation": 4252, "user_id": 3103891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZxsu.jpg?s=128&g=1", "display_name": "GalAbra", "link": "https://stackoverflow.com/users/3103891/galabra"}, "is_accepted": false, "score": 1, "last_activity_date": 1516836768, "last_edit_date": 1516836768, "creation_date": 1516836120, "answer_id": 48433306, "question_id": 48433261, "link": "https://stackoverflow.com/questions/48433261/the-perfect-regex-to-extract-a-particular-string-in-perl/48433306#48433306", "title": "The perfect regex to extract a particular string in perl", "body": "<p>Try <a href=\"https://regex101.com/r/UK0WLW/1\" rel=\"nofollow noreferrer\">this</a>:</p>\n\n<pre><code>(?&lt;=\\(s)([A-Z0-9]+)(?=,)\n</code></pre>\n\n<p>It matches substrings that come between <code>(s</code> and <code>,</code> using lookbehind and lookahead.<br>\nSimilarily, use <code>(?&lt;=,s)([A-Z0-9]+)(?=\\))</code> to capture the substrings between <code>,s</code> and <code>)</code>.</p>\n\n<p><a href=\"https://regex101.com/r/UK0WLW/2\" rel=\"nofollow noreferrer\">Putting them together</a>, you can create two capturing groups, each containing the different kind of substrings: <code>(A1B2C3, C2V3X1), (C5, D5)</code></p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516836790, "post_id": 48433333, "comment_id": 83858141, "body": "@ikegami Right, was just testing ... can never be sure whether the second assigned var can escape that ... thank you!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516836839, "post_id": 48433333, "comment_id": 83858153, "body": "List assigment in scalar context returns number of elements returned by RHS (<code>2</code> on match, <code>0</code> on no match)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516837082, "post_id": 48433333, "comment_id": 83858225, "body": "@ikegami OK, that makes sense, thank you. Which only leaves it up to the pattern not to &quot;match&quot; some nonsense (like empty) ... and thank you for edit."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1516839728, "last_edit_date": 1516839728, "creation_date": 1516836319, "answer_id": 48433333, "question_id": 48433261, "link": "https://stackoverflow.com/questions/48433261/the-perfect-regex-to-extract-a-particular-string-in-perl/48433333#48433333", "title": "The perfect regex to extract a particular string in perl", "body": "<p>If the format of your target lines is always as shown</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = ...\n\nmy (@ary_1, @ary_2);\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nwhile (&lt;$fh&gt;)\n{   \n    my ($v1, $v2) = /dQdC\\(s([^,]+),s([^\\)]+)/ or next;\n\n    push @ary_1, $v1;\n    push @ary_2, $v2;\n}\n</code></pre>\n\n<p>which captures between <code>(</code> and a <code>,</code> and then between a <code>,</code> and <code>)</code>. The first pattern might as well be <code>s(.*?),</code> as there is no benefit of the negated character class since the following <code>,</code> still need be matched (but I left it with <code>[^...]</code> for consistency with the other one).</p>\n\n<p>Comments</p>\n\n<ul>\n<li><p>In general better process a file line-by-line, unless there are specific reasons to read it first</p></li>\n<li><p>C-style loop is rarely needed. To iterate over array index use <code>for my $i (0..$#ary)</code></p></li>\n<li><p>Please <code>use warnings;</code> and <code>use strict;</code> always</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1516837021, "last_edit_date": 1516837021, "creation_date": 1516836329, "answer_id": 48433336, "question_id": 48433261, "link": "https://stackoverflow.com/questions/48433261/the-perfect-regex-to-extract-a-particular-string-in-perl/48433336#48433336", "title": "The perfect regex to extract a particular string in perl", "body": "<pre><code>my (@a, @b);\nwhile ($file =~ /^dQdC\\(s(\\w+),s(\\w+)\\)/mg) {\n   push @a, $1;\n   push @b, $2;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my (@a, @b);\nwhile (&lt;$fh&gt;) {\n   if (/^dQdC\\(s(\\w+),s(\\w+)\\)/) {\n      push @a, $1;\n      push @b, $2;\n   }\n}\n</code></pre>\n\n<hr>\n\n<p>Working with parallel arrays isn't nice.</p>\n\n<p>Alternative 1: Hash</p>\n\n<pre><code>my %hash = $file =~ /^dQdC\\(s(\\w+),s(\\w+)\\)/mg;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my %hash;\nwhile (&lt;$fh&gt;) {\n   if (/^dQdC\\(s(\\w+),s(\\w+)\\)/) {\n      $hash{$1} = $2;\n   }\n}\n</code></pre>\n\n<p>Alternative 2: AoA</p>\n\n<pre><code>use List::Util qw( pairs );  # 1.29+\n\nmy @pairs = pairs( $file =~ /^dQdC\\(s(\\w+),s(\\w+)\\)/mg );\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @pairs;\nwhile (&lt;$fh&gt;) {\n   if (/^dQdC\\(s(\\w+),s(\\w+)\\)/) {\n      push @pairs, [ $1, $2 ];\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 9139877, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/27e29ff1176b69d10c38e21a498e8597?s=128&d=identicon&r=PG&f=1", "display_name": "Push", "link": "https://stackoverflow.com/users/9139877/push"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 48433336, "answer_count": 3, "score": 0, "last_activity_date": 1516839728, "creation_date": 1516835757, "last_edit_date": 1516838920, "question_id": 48433261, "link": "https://stackoverflow.com/questions/48433261/the-perfect-regex-to-extract-a-particular-string-in-perl", "title": "The perfect regex to extract a particular string in perl", "body": "<p>I have a text file <code>abc.txt</code> that looks like this:</p>\n\n<pre><code>dQdC(sA1B2C3,sC5) = A lot of stuff\na = b = c\nBaseball\ndQdC(sC2V3X1,sD5) = A lot of stuff again\n</code></pre>\n\n<p>Now I want create two arrays in perl, one of which will contain <code>A1B2C3</code> and <code>C2V3X1</code>, the other array will contain <code>C5</code> and <code>D5</code>. I don't care about the other intermediate lines. To achieve this goal, I am trying this perl script:</p>\n\n<pre><code>for (my $in=0;$in&lt;=$#lines;$in++){\nif ($lines[$in]=~/dQdC\\(s([A-Z0-9]+?),s([A-Z0-9]+?)\\)/) {\n  print \"1111\"; #this line is just to check if it is at all going inside the loop\n  @A = $1;\n  @B = $2;\n}\n</code></pre>\n\n<p>However, it is not even going inside the loop. So I guess I did something wrong with the regex. Will someone please tell me what I am doing wrong here?</p>\n"}, {"tags": ["arrays", "perl"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8061059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a882f17a8db437caac0bfd148c3c69e4?s=128&d=identicon&r=PG&f=1", "display_name": "dabire", "link": "https://stackoverflow.com/users/8061059/dabire"}, "edited": false, "score": 0, "creation_date": 1516854435, "post_id": 48433093, "comment_id": 83862648, "body": "Thanks. I thought about using pop but my array will still grow in length over time and that will mean writing lots of pop statements just to get my variables out. Splice seem like an option but I guess I will still try to figure something much more easily manageable for future implementations."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1516834683, "creation_date": 1516834683, "answer_id": 48433093, "question_id": 48432950, "link": "https://stackoverflow.com/questions/48432950/how-do-i-assign-the-last-value-of-my-array-to-a-variable/48433093#48433093", "title": "How do I assign the last value of my array to a variable", "body": "<p>You can populate @rest first, then use <a href=\"http://p3rl.org/pop\" rel=\"nofollow noreferrer\">pop</a> to extract the values from its end. Do so in the reverse order:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy ($A, $B, $c, @rest) = (1, 2, 3, 5, 1, 4, 5, 6, 8, 5, 2, 4, 7);\nmy $e = pop @rest;\nmy $d = pop @rest;\nsay \"@rest | $d $e\";\n</code></pre>\n\n<p>Or, use <a href=\"http://p3rl.org/splice\" rel=\"nofollow noreferrer\">splice</a>, but you have to count the variables manually:</p>\n\n<pre><code>my ($d, $e) = splice @rest, -2;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516992047, "post_id": 48433134, "comment_id": 83928618, "body": "@OghoghoDavidAbire Updated with another approach"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1516991960, "last_edit_date": 1516991960, "creation_date": 1516834892, "answer_id": 48433134, "question_id": 48432950, "link": "https://stackoverflow.com/questions/48432950/how-do-i-assign-the-last-value-of-my-array-to-a-variable/48433134#48433134", "title": "How do I assign the last value of my array to a variable", "body": "<p>Or you can use an array reference (<code>$ra</code> below) for an anonymous array (<code>[...]</code>) instead</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy ($v1, $v2, $ra, $e) = (2, 4, [10..12], 5); \n\nsay for ($v1, $v2);\nsay \"@$ra\";\nsay $e;\n</code></pre>\n\n<p>Then you can tack on other variables as you wish.</p>\n\n<p>This of course requires that you can separate a part of your input into an anonymous array.  </p>\n\n<p>If you can't do that another manageable option is to assign values to an array variable first, which you can then more easily use via indexing/slicing (<code>@ary[0,1,2..4]</code> etc), and/or with <code>pop</code>.</p>\n\n<hr>\n\n<p>It appears that the \"first\" part of your input, ending with the array, won't change. Then extract that so to leave only the data that may grow in the future</p>\n\n<pre><code>my @data = (1..8, 25, 37); \n\nmy $fixed_length = 5;  # number of points to always go into array\n\nmy ($v1, $v2, $v3, @ary) = splice @data, 0, 3+$fixed_length;\n\n# (25 and 37 remain)  The section above needs no changes in future\n\nwhile (my $datum = shift @data) {\n    # deal with data that grows in time\n}\n</code></pre>\n\n<p>This minimizes code changes, to only the processing of future data. </p>\n\n<p>If the first part changes then there won't be a nice solution; you may want to reconsider the design. </p>\n\n<p>Note that assigning new data to individual variables isn't a very manageable approach to start with.</p>\n"}], "owner": {"reputation": 65, "user_id": 8061059, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a882f17a8db437caac0bfd148c3c69e4?s=128&d=identicon&r=PG&f=1", "display_name": "dabire", "link": "https://stackoverflow.com/users/8061059/dabire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 48433093, "answer_count": 2, "score": 1, "last_activity_date": 1516991960, "creation_date": 1516833910, "question_id": 48432950, "link": "https://stackoverflow.com/questions/48432950/how-do-i-assign-the-last-value-of-my-array-to-a-variable", "title": "How do I assign the last value of my array to a variable", "body": "<p>I am trying to create a manageable code in perl. I want to have a setup like this so that my last value in the array of possibly many information can have the last value assigned to $d. I still want to be able to make room for a possibility in the extension of my array at a future time</p>\n\n<p>($a,$b,$c,@rest,$d) = (1,2,3,5,1,4,5,6,8,5,2,.....4,7)</p>\n\n<p>I want $d to be equal to the last value(7). However, I still want a situation where I will be able to add at a future time a variable $e that will hold the new last value again. as follows</p>\n\n<p>($a,$b,$c,@rest,$d,$e) = (1,2,3,5,1,4,5,6,8,5,2,.....4,7,8)</p>\n\n<p>and then $d still stays as 7 and $e will become 8. I know using the variable @rest will take up all the rest of the values in my array. I'm just looking for an easy way out of extract my needed variables that are appended at the end of my array. Thanks</p>\n"}, {"tags": ["perl", "http", "cookies", "www-mechanize"], "comments": [{"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 1, "creation_date": 1516980545, "post_id": 48432811, "comment_id": 83922096, "body": "It looks like you may need to call the <code>load()</code> method on the cookie jar object before passing it to <code>WWW::Mechanize</code>.  See <a href=\"https://metacpan.org/pod/HTTP::Cookies::Chrome#SYNOPSIS\" rel=\"nofollow noreferrer\">metacpan.org/pod/HTTP::Cookies::Chrome#SYNOPSIS</a>"}], "owner": {"reputation": 21, "user_id": 9264544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa71348453a06d1151d2181cbbe8b2f?s=128&d=identicon&r=PG&f=1", "display_name": "Bananaman", "link": "https://stackoverflow.com/users/9264544/bananaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516833552, "creation_date": 1516833231, "last_edit_date": 1516833552, "question_id": 48432811, "link": "https://stackoverflow.com/questions/48432811/perlmechanize-load-cookies-from-file", "title": "perl::mechanize load cookies from file", "body": "<p>Ladies and gentleman,</p>\n\n<p>i have a problem which really drives me nuts.\nI want to read the cookies from a Chrmoe Cookies file to add the to a request with perl::mechanize.</p>\n\n<p>This is the code</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse WWW::Mechanize;\nuse Data::Dumper qw(Dumper);\nuse HTTP::Cookies::Chrome;\nmy $domain = 'http://url.goes.here';\nmy $mech = WWW::Mechanize-&gt;new(cookie_jar =&gt; HTTP::Cookies::Chrome-&gt;new(file =&gt; 'C:/Users/juergen/AppData/Local/Google/Chrome/User Data/Default/Cookies', autosave =&gt; 1, ignore_discard =&gt; 1 ));  \n$mech-&gt;agent( 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.132 Safari/537.36' );\n\n#$mech-&gt;cookie_jar-&gt;scan(sub { print Dumper \\@_ });\nprint ($mech-&gt;cookie_jar-&gt;as_string);\n#my $res = $mech-&gt;get($domain);\n#open(my $out, \"&gt;\",  \"output_page.html\") or die \"Can't open     output_page.html: $!\"; #make lexical variables using my\n#print $out $res-&gt;content;\n</code></pre>\n\n<p>The file exists. But the cookies are not read.\nif i uncomment the line with scan ... nothing is shown\nAlso i do not see them with wireshark</p>\n\n<p>Another problem is, after uncommenting the line to get the url, i get errors\nDBD::SQLite::st execute failed: datatype mismatch at C:/Perl64/lib/HTTP/Cookies/Chrome.pm line 217</p>\n\n<p>Any hints?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 872, "user_id": 3667142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff29691e362a4198e41f8116a43ba9e4?s=128&d=identicon&r=PG&f=1", "display_name": "wandadars", "link": "https://stackoverflow.com/users/3667142/wandadars"}, "edited": false, "score": 0, "creation_date": 1516987165, "post_id": 48432770, "comment_id": 83926126, "body": "I&#39;m unable to see where your answer is going. Is there a solution to this issue? Is &quot;1.000+136&quot; a number that Perl can write with formatted output?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 872, "user_id": 3667142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff29691e362a4198e41f8116a43ba9e4?s=128&d=identicon&r=PG&f=1", "display_name": "wandadars", "link": "https://stackoverflow.com/users/3667142/wandadars"}, "edited": false, "score": 1, "creation_date": 1516988927, "post_id": 48432770, "comment_id": 83927000, "body": "Re &quot;<i>Is there a solution to this issue</i>&quot;, As I mentioned, you should be using <code>1.000E136</code> or <code>1.000E+136</code> instead of <code>1.000+136</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 872, "user_id": 3667142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff29691e362a4198e41f8116a43ba9e4?s=128&d=identicon&r=PG&f=1", "display_name": "wandadars", "link": "https://stackoverflow.com/users/3667142/wandadars"}, "edited": false, "score": 1, "creation_date": 1516988971, "post_id": 48432770, "comment_id": 83927024, "body": "Re &quot;<i>Is &quot;1.000+136&quot; a number that Perl can write with formatted output?</i>&quot;, Of course. Perl is a general purpose programming language."}, {"owner": {"reputation": 872, "user_id": 3667142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff29691e362a4198e41f8116a43ba9e4?s=128&d=identicon&r=PG&f=1", "display_name": "wandadars", "link": "https://stackoverflow.com/users/3667142/wandadars"}, "edited": false, "score": 0, "creation_date": 1516990100, "post_id": 48432770, "comment_id": 83927640, "body": "Ah yes. Thank you for the clarification. My eyes glossed over the fact that the &quot;E&#39; was missing from this number. I guess I&#39;ll have to dig deeper to find out why the code that wrote that number decided to remove the E just for that particular number."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1516832984, "creation_date": 1516832984, "answer_id": 48432770, "question_id": 48432642, "link": "https://stackoverflow.com/questions/48432642/perl-can-large-exponent-cause-error-argument-xxx-isnt-numeric-in-printf/48432770#48432770", "title": "Perl - Can large exponent cause error: Argument &quot;XXX&quot; isn&#39;t numeric in printf", "body": "<p>Your string will be automatically numified in this situation, but only if its value would be a valid Perl <a href=\"https://perldoc.perl.org/perldata.html#Scalar-values\" rel=\"nofollow noreferrer\">numeric literal</a>.</p>\n\n<p><code>1.000+136</code> should be <code>1.000E+136</code> (<code>E</code> was left out) or <code>1.000E136</code> (<code>+</code> was used insead of <code>E</code>).</p>\n"}], "owner": {"reputation": 872, "user_id": 3667142, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff29691e362a4198e41f8116a43ba9e4?s=128&d=identicon&r=PG&f=1", "display_name": "wandadars", "link": "https://stackoverflow.com/users/3667142/wandadars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 48432770, "answer_count": 1, "score": 0, "last_activity_date": 1516832984, "creation_date": 1516832380, "question_id": 48432642, "link": "https://stackoverflow.com/questions/48432642/perl-can-large-exponent-cause-error-argument-xxx-isnt-numeric-in-printf", "title": "Perl - Can large exponent cause error: Argument &quot;XXX&quot; isn&#39;t numeric in printf", "body": "<p>A Perl script being run on OpenSuse 42.3 is giving the error: Argument \"1.000+136\" isn't numeric in printf . The script reads through many exponentially formmatted numbers and writes them to a new file. This is the only number that the script complains about in a file with hundreds of numbers. The file has the following format:</p>\n\n<pre><code>23. OH+HO2=H2O+O2                                                                                                                                                                        \n         2.510E+12    2.000    40000.000\n      Declared duplicate reaction...\n24. OH+HO2=H2O+O2                                                                                                                                                                        \n         1.000+136  -40.000    34800.000\n      Declared duplicate reaction...\n25. H2O2+H=HO2+H2                                                                                                                                                                        \n         6.050E+06    2.000     5200.000\n</code></pre>\n\n<p>The print statement used to print to a file is:</p>\n\n<pre><code>printf Outfile \"\\{ a = %.3E n = %5.3f E = %7.3f \",$kA[$ireac],$kb[$ireac],$kE[$ireac];\n</code></pre>\n\n<p>Is it that the number has an exponent of 136 that may cause an issue? Is there a way to resolve an issue like this?</p>\n"}, {"tags": ["regex", "perl", "regex-group"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1516836317, "post_id": 48431904, "comment_id": 83858011, "body": "<a href=\"https://stackoverflow.com/questions/2126365/\">stackoverflow.com/questions/2126365</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "edited": false, "score": 0, "creation_date": 1516830485, "post_id": 48432157, "comment_id": 83855484, "body": "can I think as a type of casting?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "edited": false, "score": 1, "creation_date": 1516830686, "post_id": 48432157, "comment_id": 83855592, "body": "It doesn&#39;t change the type of any value. It&#39;s operator selection."}, {"owner": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "edited": false, "score": 0, "creation_date": 1516830717, "post_id": 48432157, "comment_id": 83855607, "body": "I&#39;m selecting the output of the expression?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "edited": false, "score": 0, "creation_date": 1516830732, "post_id": 48432157, "comment_id": 83855616, "body": "You&#39;re selecting which of the two assignment operators to use. This has effects on the context in which the assignment&#39;s operands are evaluated, and on the value returned by the assignment operator."}, {"owner": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "edited": false, "score": 0, "creation_date": 1516830867, "post_id": 48432157, "comment_id": 83855677, "body": "Thanks! since I&#39;m here with a true master of Perl; when Perl generates those variables like $1, $2 or $_ or @_ what&#39;s the name for this programming strategy or what&#39;s the name for those variables?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "edited": false, "score": 1, "creation_date": 1516831135, "post_id": 48432157, "comment_id": 83855834, "body": "&quot;Punctuation variables&quot;. The variables set by Perl (punctuation or otherwise) are documented in <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a>."}, {"owner": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "edited": false, "score": 1, "creation_date": 1516831264, "post_id": 48432157, "comment_id": 83855911, "body": "thaks a lot! really helpful! I wish I could give you more points"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 9, "last_activity_date": 1516831682, "last_edit_date": 1516831682, "creation_date": 1516830388, "answer_id": 48432157, "question_id": 48431904, "link": "https://stackoverflow.com/questions/48431904/perl-difference-between-num-and-num/48432157#48432157", "title": "Perl: Difference between ($num) and $num", "body": "<p>In Perl, parentheses usually just alters precedence. (e.g. <code>3+4*5</code> vs <code>(3+4)*5</code>)</p>\n\n<p>The exception is when parentheses are found on the left-hand side (LHS) of an assignment operator. In that situation, it influences which of Perl's two assignment operators will be used.</p>\n\n<p>If the LHS of an assignment is some kind of aggregate, the list assignment is used. Otherwise, the scalar assignment is used. The following are considered to be aggregates:</p>\n\n<ul>\n<li><code>(...)</code> (any expression in parens)</li>\n<li><code>@array</code> and <code>@array[...]</code></li>\n<li><code>%hash</code> and <code>@hash{...}</code></li>\n<li><code>my (...)</code>, <code>our (...)</code> and <code>local (...)</code> (<code>state (...)</code> throws an error.) </li>\n</ul>\n\n<p>See <a href=\"http://www.perlmonks.org/?node_id=790129\" rel=\"noreferrer\">Mini-Tutorial: Scalar vs List Assignment Operator</a> for the differences between the two operators.</p>\n\n<p>In your case, the relevant difference is the context in which the right-hand side (RHS) of the assignment is evaluated.</p>\n\n<ul>\n<li>The scalar assignment evaluates its RHS operand in scalar context. In scalar context, the match operator returns a boolean value indicating success or failure.</li>\n<li>The list assignment evaluates its RHS operand in list context.  In list context, the match operator returns the strings it captured (or <code>1</code> if the match was successful and pattern contains no captures).</li>\n</ul>\n"}], "owner": {"reputation": 7737, "user_id": 4803173, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/9af63d40f28d10cf20c0bdbc2f3ff85c?s=128&d=identicon&r=PG", "display_name": "Alvaro Joao", "link": "https://stackoverflow.com/users/4803173/alvaro-joao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "closed_date": 1516901799, "accepted_answer_id": 48432157, "answer_count": 1, "score": 2, "last_activity_date": 1516831682, "creation_date": 1516829373, "last_edit_date": 1516830088, "question_id": 48431904, "link": "https://stackoverflow.com/questions/48431904/perl-difference-between-num-and-num", "closed_reason": "Duplicate", "title": "Perl: Difference between ($num) and $num", "body": "<p>can someone please explain to me why this is diff:</p>\n\n<pre><code>my $num = '&gt;33*1311875297587*eval*0*frame[0]*\"A\"&lt;' =~ /(\\d{3,})/;\n&gt; $num = 1\nmy ($num) = '&gt;33*1311875297587*eval*0*frame[0]*\"A\"&lt;' =~ /(\\d{3,})/;\n&gt; $num = 1311875297587\n</code></pre>\n\n<p>I'm super curious to see what shenanigans are waiting for me.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "filehandle"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516825536, "post_id": 48430942, "comment_id": 83852950, "body": "I don&#39;t understand the problem.  Can you show the code that suffers and explain more clearly what is not updated? (How do you even know how often a file is updated?)"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1516899618, "creation_date": 1516899618, "answer_id": 48448266, "question_id": 48430942, "link": "https://stackoverflow.com/questions/48430942/perl-file-update-after-each-print-statement/48448266#48448266", "title": "Perl File Update After Each Print Statement", "body": "<p>Setting <code>$|</code> to non-zero enables autoflush on <em>only the currently selected</em> output file handle. By default this is <code>STDOUT</code> unless you have called <code>select</code> to change it</p>\n\n<p>That means that, if you have opened a new handle to a file, <code>$|</code> will not affect its behaviour</p>\n\n<p>Instead, you can use the <code>IO::Handle</code> module's <code>autoflush</code> method. There is no need to <code>use IO::Handle</code> as <code>IO::File</code>, which subclasses <code>IO::Handle</code>, is loaded on demand by any version of perl since v5.14</p>\n\n<p>It would look like this</p>\n\n<pre><code>open my $fh, '&gt;', 'myfile.txt' or die $!;\n$fh-&gt;autoflush;\n</code></pre>\n\n<p>After this, anything sent to the file using <code>print $fh</code> is immediately flushed to disk</p>\n"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "closed_date": 1519118387, "accepted_answer_id": 48448266, "answer_count": 1, "score": -5, "last_activity_date": 1516899618, "creation_date": 1516825217, "last_edit_date": 1516825940, "question_id": 48430942, "link": "https://stackoverflow.com/questions/48430942/perl-file-update-after-each-print-statement", "closed_reason": "Needs details or clarity", "title": "Perl File Update After Each Print Statement", "body": "<p>When I write a file in Perl, the complete content of each Print statement is getting updated on the file once the program is complete.</p>\n\n<p>Is there a way in which the file can be updated after each print statement is executed ?</p>\n\n<p>I tried setting $|=1, but it does not seem to work.</p>\n"}, {"tags": ["perl", "dbix-class"], "comments": [{"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1516849714, "post_id": 48430047, "comment_id": 83861425, "body": "of course you can do all kind off things with your api, it&#39;s yours. But please reconsider what you said in your first line REST-api. Yes, one can POST to /artists including the (entire) list of cds. More commonly, create CD&#39;s, hold their ID&#39;s; create the Artist and post the ID&#39;s from the CD&#39;s to /artists/{artist_id}/cds. Basically: each thing it&#39;s own URI,created by a separate POST actions. Editing, do a PUT on the existing resource, not a POST with multiple resources mixed. We tried &#39;PATCH&#39;, but that is a different story."}], "answers": [{"tags": [], "owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "is_accepted": true, "score": 1, "last_activity_date": 1516868912, "creation_date": 1516868912, "answer_id": 48438548, "question_id": 48430047, "link": "https://stackoverflow.com/questions/48430047/automatically-updating-related-rows-with-dbixclass/48438548#48438548", "title": "Automatically updating related rows with DBIx::Class", "body": "<p>Ribasushi promised to core the RecursiveUpdate feature if someone steps up and migrates its test suite to the DBIC schema and comes up with a sane API because he didn't like how RU handles this currently.\nCatalyst::Controller::DBIC::API is using RU under the hood as well as HTML::Formhandler::Model::DBIC both here in production since years without any issues.</p>\n\n<p>So currently RecursiveUpdate is the way to go.</p>\n"}], "owner": {"reputation": 20361, "user_id": 312208, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee4547c35ae70c13a4adc2aba1a585f5?s=128&d=identicon&r=PG", "display_name": "Ryley", "link": "https://stackoverflow.com/users/312208/ryley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 48438548, "answer_count": 1, "score": 0, "last_activity_date": 1516868912, "creation_date": 1516821435, "question_id": 48430047, "link": "https://stackoverflow.com/questions/48430047/automatically-updating-related-rows-with-dbixclass", "title": "Automatically updating related rows with DBIx::Class", "body": "<p>In the context of a REST API, I've been using DBIx::Class to create related rows, i.e.</p>\n\n<pre><code>POST /artist\n{ \"name\":\"Bob Marley\", \"cds\":[{\"title\":\"Exodus\"}] }\n</code></pre>\n\n<p>That ultimately calls <code>$artist-&gt;new($data)-&gt;insert()</code> which creates an Artist AND creates the related row(s) in the CD table.  It then send back the resulting object to the user (via <code>DBIC::ResultClass::HashRefInflator</code>), including the created primary keys and default values.  The problem arises when the user makes changes to those objects and send them back to the API again:</p>\n\n<pre><code>POST /artist/7\n{ \"name\":\"Robert Nesta Marley\", \"artistid\":\"7\", \n  \"cds\":[{\"title\":\"Exodus\", \"cdid\":\"1\", \"artistid\":\"7\", \"year\":\"1977\"}] }\n</code></pre>\n\n<p>Now what?  From what I can see from testing, <code>DBIC::Row::update</code> doesn't deal with changes in related rows, so in this case the name change would work, but the update to the CD's year would not.  <code>DBIC::ResultSet::update_or_create</code> just calls <code>DBIC::Row::update</code>.  So I went searching for some alternatives, and they do seem to exist, i.e. <a href=\"https://metacpan.org/pod/DBIx::Class::ResultSet::RecursiveUpdate\" rel=\"nofollow noreferrer\">DBIC::ResultSet::RecursiveUpdate</a>, but it hasn't been updated in 4 years, and references to it seem to suggest it should/would be folded into DBIC.  Did that happen?  </p>\n\n<p>Am I missing something easier?  </p>\n\n<p>Obviously, I can handle this particular situation, but I have many APIs to write and it would be easier to handle it generically for all of them.  I'm certainly tempted to use RecursiveUpdate, but wary due to its apparent abandonment.</p>\n"}, {"tags": ["regex", "string", "perl", "replace"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1516812032, "post_id": 48427240, "comment_id": 83845235, "body": "<code>my string</code> is a syntax error (missing $). Also, double quotes interpolate variables."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1516824302, "post_id": 48427240, "comment_id": 83852352, "body": "I believe I didn&#39;t understand the question. :-( What&#39;s the purpose of &quot;manually&quot; interpolating variables in a string when Perl will do it automatically? <code>&quot;I have one ${fruitone} \u2026&quot;</code> yields <code>&quot;I have one apple \u2026&quot;</code> anyway (when using <code>&quot;</code>), doesn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9249712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e71e23d30c141c0089be0bad427d5d?s=128&d=identicon&r=PG&f=1", "display_name": "vijay", "link": "https://stackoverflow.com/users/9249712/vijay"}, "edited": false, "score": 1, "creation_date": 1516812727, "post_id": 48427483, "comment_id": 83845727, "body": "Yes thank you I am using hash to do that, For simplicity I wrote it like this, your answer helped thanks!"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 1, "user_id": 9249712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e71e23d30c141c0089be0bad427d5d?s=128&d=identicon&r=PG&f=1", "display_name": "vijay", "link": "https://stackoverflow.com/users/9249712/vijay"}, "edited": false, "score": 1, "creation_date": 1516813121, "post_id": 48427483, "comment_id": 83845990, "body": "@vijay In future you should ask the question you want the answer to in the first place using actual code, rather than a similar question that happens to result in an answer you can use."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516816656, "post_id": 48427483, "comment_id": 83848155, "body": "@Chris: Your answer is a poor one and you are in no position to chastise the OP. Have you tested your code?"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516817169, "post_id": 48427483, "comment_id": 83848432, "body": "@Borodin it worked but I didn&#39;t test it with the OP&#39;s regex which I see now has more typos in it :/"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516817388, "post_id": 48427483, "comment_id": 83848558, "body": "@Chris: It is <i>your</i> regex once you have posted it as an answer. Please stop blaming others for your mistakes."}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1516840771, "post_id": 48427483, "comment_id": 83859322, "body": "I think your code should be: <code>$string1 =~ s&#47;\\$\\{(\\w+)\\}&#47;$$1&#47;ge;</code> with an <code>e</code> at the end to evaluate. However, it still wouldn&#39;t work with lexically scoped variables (<code>my</code> variables), the should be <code>our</code> variables instead."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 0, "creation_date": 1516872295, "post_id": 48427483, "comment_id": 83869991, "body": "@KjetilS. that is what I initially thought too, but having experimented it doesn&#39;t seem to need the <code>e</code> for"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 1, "last_activity_date": 1516817208, "last_edit_date": 1516817208, "creation_date": 1516811929, "answer_id": 48427483, "question_id": 48427240, "link": "https://stackoverflow.com/questions/48427240/how-can-i-search-and-replace-multiple-strings-in-a-line-perl/48427483#48427483", "title": "How can i search and replace multiple strings in a line - Perl", "body": "<p>Your regular expression only has one capture group, so there is no <code>$2</code> or <code>$3</code> to access.</p>\n\n<p>If you want to match multiple things you need to add the g option to the end though, like this</p>\n\n<pre><code>$string1=~ s/\\$\\{(\\w+)\\}/$$1/g;\n</code></pre>\n\n<p>Note: This is really not a good way to code this though as it allows any variable to substituted into the string. You should consider using a hash to store the values to limit what can be replaced.</p>\n\n<pre><code>my %fruit=(\"fruitone\" =&gt; \"apple\", \"fruittwo\"=&gt;\"orange\",\"fruitthree\" =&gt; \"banana\");\nmy $string1= 'I have one ${fruitone} two ${fruittwo} and three ${fruitthree}';\n\n$string1 =~ s/\\$\\{(\\w+)\\}/$fruit{$1}/g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1516817550, "last_edit_date": 1516817550, "creation_date": 1516817242, "answer_id": 48428980, "question_id": 48427240, "link": "https://stackoverflow.com/questions/48427240/how-can-i-search-and-replace-multiple-strings-in-a-line-perl/48428980#48428980", "title": "How can i search and replace multiple strings in a line - Perl", "body": "<p>I think you need the\n<a href=\"https://metacpan.org/pod/String::Interpolate\" rel=\"nofollow noreferrer\"><code>String::Interpolate</code></a> module,\nbut I cannot test with non-core modules at present as I am working with an Android tablet</p>\n\n<p>I think this should work</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse String::Interpolate 'interpolate';\n\nmy $fruitone   = \"apple\";\nmy $fruittwo   = \"orange\";\nmy $fruitthree = \"banana\";\n\nmy $string = 'I have one ${fruitone} two ${fruittwo} and three ${fruitthree}';\n\nprint interpolate($string);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1516841187, "creation_date": 1516841187, "answer_id": 48433964, "question_id": 48427240, "link": "https://stackoverflow.com/questions/48427240/how-can-i-search-and-replace-multiple-strings-in-a-line-perl/48433964#48433964", "title": "How can i search and replace multiple strings in a line - Perl", "body": "<p>This seems to work:</p>\n\n<pre><code>my($fruitone, $fruittwo, $fruitthree) = (\"apple\", \"orange\", \"banana\");\nmy $string= 'I have one ${fruitone} two ${fruittwo} and three ${fruitthree}';\n$string =~ s/(\\$\\{\\w+\\})/eval$1/ge;\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>our($fruitone, $fruittwo, $fruitthree) = (\"apple\", \"orange\", \"banana\");\nmy $string= 'I have one ${fruitone} two ${fruittwo} and three ${fruitthree}';\n$string =~ s/\\$\\{(\\w+)\\}/$$1/ge;\n</code></pre>\n\n<p>However, I recommend using a hash for your fruits if you can.</p>\n"}], "owner": {"reputation": 1, "user_id": 9249712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e71e23d30c141c0089be0bad427d5d?s=128&d=identicon&r=PG&f=1", "display_name": "vijay", "link": "https://stackoverflow.com/users/9249712/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1516841187, "creation_date": 1516811236, "last_edit_date": 1516816520, "question_id": 48427240, "link": "https://stackoverflow.com/questions/48427240/how-can-i-search-and-replace-multiple-strings-in-a-line-perl", "title": "How can i search and replace multiple strings in a line - Perl", "body": "<p>I want to search and replace multiple strings in a line(string).</p>\n\n<p>consider I have three variables</p>\n\n<pre><code>my $fruitone = \"apple\";\nmy $fruittwo = \"orange\";\nmy $fruitthree = \"banana\";\n\nmy string1 = \"I have one ${fruitone} two ${fruittwo} and three ${fruitthree}\";\n</code></pre>\n\n<p>I want to replace <code>$fruitone</code> with <code>apple</code> and so on.</p>\n\n<p>My end result should look like</p>\n\n<pre><code>I have one apple two orange and three banana.\n</code></pre>\n\n<p>I am able to replace one by <code>string1 =~ /$\\{(\\w+)\\}/$$1/;</code></p>\n\n<p>But I need help on accessing <code>$2</code> and <code>$3</code> items</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 59343, "user_id": 2029983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0118fb43d1ce086d768e295339cf0ff4?s=128&d=identicon&r=PG", "display_name": "Larnu", "link": "https://stackoverflow.com/users/2029983/larnu"}, "edited": false, "score": 1, "creation_date": 1516807576, "post_id": 48425974, "comment_id": 83841890, "body": "<code>sql-server</code> or <code>mysql</code>?"}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 1, "creation_date": 1516807660, "post_id": 48425974, "comment_id": 83841947, "body": "Instead of using a file for your sql why not use stored procedures? Then your sql code is in the database where it belongs."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1516807812, "post_id": 48425974, "comment_id": 83842076, "body": "If you only want to expand variables, you can keep them in a hash and just <code>s&#47;\\$(\\w+)&#47;$variables{$1}&#47;g</code>."}, {"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516808127, "post_id": 48425974, "comment_id": 83842324, "body": "I should clarify that this is MySQL, not SQL Server. I originally included that tag because I thought it was for generic &quot;SQL servers&quot;, not the ill-named Microsoft product, though the question concerns a general principle and the actual database probably doesn&#39;t matter."}, {"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516808336, "post_id": 48425974, "comment_id": 83842512, "body": "I&#39;d prefer not to use stored procedures for reasons that are neither here nor there. I&#39;m concerned with the safety of the method described above."}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1516808430, "post_id": 48425974, "comment_id": 83842593, "body": "Agreed, the specific DBMS doesn&#39;t matter. Use stored procedures and save yourself all the anguish. I can come up with exactly zero logical reasons for not using stored procedures."}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1516808523, "post_id": 48425974, "comment_id": 83842662, "body": "As to the safety....well...since it sounds like you are now building up strings and executing them the safety is certainly in question. Are you at least parameterizing users values? Who has access to these files? There are many questions around this approach from a safety perspective."}, {"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516809262, "post_id": 48425974, "comment_id": 83843225, "body": "Yes, all criteria clause variables are parameterized. Interpolated variables, e.g. for dynamically selecting a table in a SQL statement, are all filtered for expected content, or come from discrete sets."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1516810737, "post_id": 48425974, "comment_id": 83844316, "body": "What happens if large-query.sql is called multiple times? Are you caching the file loaded or reading it in multiple times?"}, {"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516811030, "post_id": 48425974, "comment_id": 83844551, "body": "It sometimes will be called multiple times. For example, the SQL file will be read over and over again within loops that are creating static resources, or doing other work. No matter the particulars, this is OK from a performance standpoint and I have no plans to cache."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516811601, "post_id": 48425974, "comment_id": 83844948, "body": "<i>&quot;<code>eval</code>-ing it so that all in-scope vars are expanded&quot;</i> Do you really need that functionality? How do you imagine that an extra <code>eval</code> will help? What you&#39;re proposing sounds like a nightmare if dependencies. I think a template tool would serve you better, where you can pass the exact values to be interpolated in the call to render. And please don&#39;t use <code>qq|return qq{|</code> when <code>&#39;return qq{&#39;</code> will do fine."}, {"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516812357, "post_id": 48425974, "comment_id": 83845464, "body": "Not an extra <code>eval</code>, merely an <code>eval</code>. No <code>eval</code>, then no variable expansion. That&#39;s why I&#39;m using it.  Some of the SQL queries are absurdly large and have 50+ variables to expand. Identifying them and passing them to a template is technically possible but not practical. Using an <code>eval</code> from the calling script will expand everything in scope, which is what I need."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516813084, "post_id": 48425974, "comment_id": 83845962, "body": "@dmc7z: I am sure that you will find a way to justify an unsafe method: I really don&#39;t know why you&#39;re asking for advice. Just be sure to put your name on the edits to the code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516813380, "post_id": 48425974, "comment_id": 83846163, "body": "<i>&quot;Downvotes... not warranted, folks&quot;</i> I don&#39;t think that&#39;s for you to judge. You came here asking for a prescribed answer and didn&#39;t get it. You don&#39;t understand computer security and you need to start learning that it&#39;s not about &quot;it looks fine to me&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516810372, "post_id": 48426799, "comment_id": 83844047, "body": "This is probably my backup solution. I do use Template Toolkit and I appreciate the suggestion. I am interested in knowing the particular circumstances under which the eval()-ing solution is unsafe, however."}, {"owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516811479, "post_id": 48426799, "comment_id": 83844861, "body": "Thanks. The variables that expand to field and table names are always defined in the code and never reflect raw user input, so I think they&#39;re safe, but it&#39;s probably good to use the $dbh method as a habit. Point taken."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 0, "creation_date": 1516811609, "post_id": 48426799, "comment_id": 83844952, "body": "wut. You&#39;re going to do it wrong because you think it&#39;s safe? Always convert text into whatever you are inserting in into (SQL, HTML, URL params, <code>sh</code>, etc, etc, etc).  As you saw, it&#39;s not any harder doing it right! (Given that you made two mistakes using <code>eval</code>, I would argue it&#39;s much easier doing it right!)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "edited": false, "score": 2, "creation_date": 1516812721, "post_id": 48426799, "comment_id": 83845725, "body": "@dmc7z: All code is guilty until proven to be innocent: you should be assuming that your code is unsafe unless you can prove otherwise. Such a proof is a little easier if you use a template system, but asking for examples of how any given approach may be unsafe is wrong-thinking."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1516810979, "last_edit_date": 1516810979, "creation_date": 1516809970, "answer_id": 48426799, "question_id": 48425974, "link": "https://stackoverflow.com/questions/48425974/reading-sql-from-local-files-then-eval-ing-it-safe/48426799#48426799", "title": "Reading SQL from local files, then eval-ing it. Safe?", "body": "<p>For starters, </p>\n\n<pre><code>my $query = &lt;&lt;\"SQL\";\nSELECT foo\nFROM $some_table\nWHERE bar = 'baz'\nSQL\n</code></pre>\n\n<p>suffers from an injection bug. It should be</p>\n\n<pre><code>my $some_table_lit = $dbh-&gt;quote_identifier($some_table);\n\nmy $query = &lt;&lt;\"SQL\";\nSELECT foo\nFROM $some_table_lit\nWHERE bar = 'baz'\nSQL\n</code></pre>\n\n<p>Your template system is completely crappy. It's the CS equivalent of hammering a screw. It makes it really easy to write unsafe code (as you've already done), it introduce high coupling, and makes the code very fragile.</p>\n\n<p>You should use a better templating system than the one you are currently using (with or without <code>eval</code>).</p>\n\n<p>What follows is an example using <a href=\"http://search.cpan.org/perldoc?Template\" rel=\"nofollow noreferrer\">Template-Toolkit</a>:</p>\n\n<pre><code>my $tt = Template-&gt;new();\n\n$tt-&gt;process('some-file.sql', {\n   some_table =&gt; $dbh-&gt;quote_identifier($some_table),\n})\n   or die $template-&gt;error();\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>SELECT foo\nFROM [% some_table %]\nWHERE bar = 'baz'\n</code></pre>\n"}], "owner": {"reputation": 1329, "user_id": 1924274, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cae5d0f32db0b220e470a24594e0aeb9?s=128&d=identicon&r=PG", "display_name": "dmc7z", "link": "https://stackoverflow.com/users/1924274/dmc7z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 48426799, "answer_count": 1, "score": -2, "last_activity_date": 1516812545, "creation_date": 1516807419, "last_edit_date": 1516812545, "question_id": 48425974, "link": "https://stackoverflow.com/questions/48425974/reading-sql-from-local-files-then-eval-ing-it-safe", "title": "Reading SQL from local files, then eval-ing it. Safe?", "body": "<p>I've inherited code that has very large SQL queries within code, typically within heredocs and with variables interpolated that will dynamically select a table or fields, like this:</p>\n\n<pre><code>    my $query = &lt;&lt;\"SQL\";\nSELECT foo\nFROM $some_table\nWHERE bar = 'baz'\nSQL\n</code></pre>\n\n<p>Some of the SQL queries are quite large. The issue is that this makes my Perl files unnecessarily long and difficult to read. Code analysis and highlighting tools can't parse the heredoc SQL, either.</p>\n\n<p>I'd like to keep SQL in actual SQL files and change Perl code like the above to read a file from the local directory:</p>\n\n<pre><code>my $query = eval(get_sql('some-file.sql'));\n</code></pre>\n\n<p>... <code>eval</code>-ing it so that all in-scope vars are expanded.</p>\n\n<p>Some of this would take place in web accessible scripts where users are passing parameters. Absolutely all variables are cleaned, and I use paramaterized statements in all criteria clauses (WHERE, AND, etc.)</p>\n\n<p>There's a lot of FUD about using <code>eval()</code>, so I'd like to know: Is my solution safe to use in a web application?</p>\n\n<p><em>EDIT</em>...<br>\nI should mention further that the <code>get_sql()</code> function might look something like this:</p>\n\n<pre><code>sub get_sql {\n    my ($filename) = @_;\n\n    my $sql = slurp(\"/path/to/file/$filename.sql\");\n    my $query = qq|return qq{| . $sql . qq|};|;\n    return $query;\n}\n</code></pre>\n\n<p>I understand that the quote operators can't appear in the SQL string that will be returned.</p>\n\n<p><em>EDIT2</em>...<br>\nThis is an eminently reasonable question given any number of use cases and/or constraints. Downvotes... not warranted, folks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516804770, "post_id": 48425005, "comment_id": 83839776, "body": "No one can understand what you&#39;re asking"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516810735, "post_id": 48425005, "comment_id": 83844314, "body": "@choroba: Please don&#39;t replace the question with your speculations."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1516805063, "creation_date": 1516805063, "answer_id": 48425175, "question_id": 48425005, "link": "https://stackoverflow.com/questions/48425005/remove-part-of-string-in-between-two-specific-characters-in-perl/48425175#48425175", "title": "Remove part of string in between two specific characters in perl", "body": "<p>You say</p>\n\n<p><code>\"Neuer Termin mit ihn am Mittwoch {$tag._value=\"weekday=wednesday\"} um 2{$tag._value=\"02\"}\"</code> is my string</p>\n\n<p>But you have double quotes <code>\"</code> within the string. You need to explain your problem better: where does this string come from?</p>\n\n<p>For non-German speakers, <em>\"Neuer Termin mit ihn am Mittwoch\"</em> is something like <em>\"New appointment with him mid-week\"</em></p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516805773, "post_id": 48425375, "comment_id": 83840497, "body": "It&#39;s unhelpful to post speculative answers. You&#39;re assuming too much here."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516805833, "post_id": 48425375, "comment_id": 83840549, "body": "Your suggestion for <code>$CurBrLoopMany</code> is bizarre!"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516805845, "post_id": 48425375, "comment_id": 83840556, "body": "Might be I am not very well in English language however <code>remove everything that comes between { } but do not remove anything outside {}.</code> OP asking this only right?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516805981, "post_id": 48425375, "comment_id": 83840671, "body": "<code>bizarre</code> whatever I am using in my code. If this may be simplified/alternative solutions I can be updated in my code"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516810350, "post_id": 48425375, "comment_id": 83844034, "body": "I&#39;m sure that you have copied that regex pattern from somewhere else. Do you know what it does? I am far from sure, but it seems to match nested braces to a specific level. It certainly needs a comment to explain its function."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516863930, "post_id": 48425375, "comment_id": 83865787, "body": "Absolutely, Its my seniors <code>Ancestors</code> already developed codes which I have working right now also I don&#39;t know its right or wrong but that tools are working."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516864103, "post_id": 48425375, "comment_id": 83865863, "body": "@Borodin: What about your opinion/suggestion/comments on PerlDuck&#39;s answers"}], "tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": -1, "last_activity_date": 1516805614, "creation_date": 1516805614, "answer_id": 48425375, "question_id": 48425005, "link": "https://stackoverflow.com/questions/48425005/remove-part-of-string-in-between-two-specific-characters-in-perl/48425375#48425375", "title": "Remove part of string in between two specific characters in perl", "body": "<blockquote>\n  <p>In this case you have only open and close then this will remove the pattern of brackets</p>\n</blockquote>\n\n<pre><code>#For the testing purpose we escaped the double quotes within the string.\nmy $string = \"Neuer Termin mit ihn am Mittwoch {$tag._value=\\\"weekday=wednesday\\\"} um 2{$tag._value=\\\"02\\\"}\";\n\n$string=~s/\\{([^\\{\\}]*)\\}//g;\n\nprint $string;\n</code></pre>\n\n<blockquote>\n  <p>In case if you have nested brackets you can use. <code>{{{}}}</code></p>\n</blockquote>\n\n<pre><code>$CurBrLoopMany = qw/((?:[^{}]*(?:{(?:[^{}]*(?:{(?:[^{}]*(?:{[^{}]*})*[^{}]*)*})*[^{}]*)*})*[^{}]*)*)/;\n\n$string=~s/\\{$CurBrLoopMany\\}//g;\n\nprint $string;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5663, "user_id": 4401293, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8e7aa14bcc48ad45b4c0d12cf5b4b147?s=128&d=identicon&r=PG", "display_name": "Quality Catalyst", "link": "https://stackoverflow.com/users/4401293/quality-catalyst"}, "edited": false, "score": 0, "creation_date": 1516819953, "post_id": 48425773, "comment_id": 83849910, "body": "Explain yourself please."}], "tags": [], "owner": {"reputation": 11, "user_id": 3715059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2945f470733effed9f948908652622b?s=128&d=identicon&r=PG&f=1", "display_name": "user3715059", "link": "https://stackoverflow.com/users/3715059/user3715059"}, "is_accepted": false, "score": -3, "last_activity_date": 1516822117, "last_edit_date": 1516822117, "creation_date": 1516806778, "answer_id": 48425773, "question_id": 48425005, "link": "https://stackoverflow.com/questions/48425005/remove-part-of-string-in-between-two-specific-characters-in-perl/48425773#48425773", "title": "Remove part of string in between two specific characters in perl", "body": "<p>This will modify $string to the result you want to have.</p>\n\n<pre><code> $string =~ s/\\{.*?\\}//g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": false, "score": 2, "last_activity_date": 1516806937, "creation_date": 1516806937, "answer_id": 48425821, "question_id": 48425005, "link": "https://stackoverflow.com/questions/48425005/remove-part-of-string-in-between-two-specific-characters-in-perl/48425821#48425821", "title": "Remove part of string in between two specific characters in perl", "body": "<p>I understand your question as <em>\"How do I remove everything between <code>{</code> and <code>}</code>?\"</em></p>\n\n<p>This will do:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $string = 'Neuer Termin mit ihn am Mittwoch {$tag._value=\"weekday=wednesday\"} um 2{$tag._value=\"02\"}';\n$string =~ s/\\{[^\\}]+\\}//g;\nprint \"'$string'\\n\";\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>'Neuer Termin mit ihn am Mittwoch  um 2'\n</code></pre>\n\n<hr>\n\n<p>By the way: it should be either</p>\n\n<blockquote>\n  <p>Neuer Termin mit <strong>Ihnen</strong> am Mittwoch (new appointment with <strong>you</strong> on/next wednesday)</p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p>Neuer Termin mit <strong>ihm</strong> am Mittwoch (new appointment with <strong>him</strong> on/next wednesday)</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 8411121, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ab3799b057200986e976572a796eae8d?s=128&d=identicon&r=PG&f=1", "display_name": "H.A", "link": "https://stackoverflow.com/users/8411121/h-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1562476860, "creation_date": 1516804583, "last_edit_date": 1562476860, "question_id": 48425005, "link": "https://stackoverflow.com/questions/48425005/remove-part-of-string-in-between-two-specific-characters-in-perl", "title": "Remove part of string in between two specific characters in perl", "body": "<p>Like for example \n\"Neuer Termin mit ihn am Mittwoch {$tag._value=\"weekday=wednesday\"} um 2{$tag._value=\"02\"}\"\nis my string and i want \n\"Neuer Termin mit ihn am Mittwoch um 2\".\nas \"{$tag._value=\"weekday=wednesday\"}\" and \"{$tag._value=\"02\"}\" can change so the lenght is not constant i want to remove it on basis like \"{$tag._value=\"weekday=wednesday\"}\" remove everything that comes between { } but do not remove anything outside {}.</p>\n"}, {"tags": ["rest", "perl"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1516800736, "creation_date": 1516800736, "answer_id": 48423737, "question_id": 48422307, "link": "https://stackoverflow.com/questions/48422307/http-response-for-hp-alm-request-is-302-instead-of-200/48423737#48423737", "title": "HTTP Response for HP ALM Request is 302 instead of 200", "body": "<p>If you're using HTTP then you should become familiar with <a href=\"https://tools.ietf.org/html/rfc2616\" rel=\"nofollow noreferrer\">the RFC</a> which has this</p>\n\n<blockquote>\n  <p><strong>302 Found</strong></p>\n  \n  <p>The requested resource resides temporarily under a different URI.\n     Since the redirection might be altered on occasion, the client SHOULD\n     continue to use the Request-URI for future requests.  This response\n     is only cacheable if indicated by a Cache-Control or Expires header\n     field.</p>\n</blockquote>\n\n<p>Now, referring to the documentation for\n<a href=\"https://metacpan.org/pod/REST::Client\" rel=\"nofollow noreferrer\"><code>REST::Client</code></a>, it says</p>\n\n<pre><code># Requests can optionally automatically follow redirects and auth, defaults to\n# false \n$client-&gt;setFollow(1);\n</code></pre>\n\n<p>You will have to learn to read documentation if you intend to get anywhere on your own</p>\n"}], "owner": {"reputation": 421, "user_id": 4064166, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/Wo2k2.jpg?s=128&g=1", "display_name": "Devharsh Trivedi", "link": "https://stackoverflow.com/users/4064166/devharsh-trivedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516853875, "creation_date": 1516796244, "last_edit_date": 1516853875, "question_id": 48422307, "link": "https://stackoverflow.com/questions/48422307/http-response-for-hp-alm-request-is-302-instead-of-200", "title": "HTTP Response for HP ALM Request is 302 instead of 200", "body": "<p>I am using a Perl script with the\n<a href=\"https://metacpan.org/pod/REST::Client\" rel=\"nofollow noreferrer\"><code>REST::Client</code></a> module\nto send requests to the <em>HP Application Lifecycle Management</em> (ALM).</p>\n\n<p>The URL request works fine from a browser (giving <code>200 OK</code> XML response), but requests from the program to retrieve defects from a project return <code>302 Found</code> instead of <code>200 OK</code>.</p>\n\n<pre><code>$client-&gt;GET($api_proto.'://'.$api_url.':'.$api_port.'/qcbin/rest/domains/my-domain/projects/my-project/defects/?login-form-required=y');\n</code></pre>\n\n<p>What's going wrong here?</p>\n"}, {"tags": ["perl", "latex"], "answers": [{"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 1, "last_activity_date": 1516783372, "creation_date": 1516783372, "answer_id": 48418141, "question_id": 48417707, "link": "https://stackoverflow.com/questions/48417707/regex-characters-should-be-replaced-as-a-text-in-perl/48418141#48418141", "title": "Regex characters should be replaced as a text in perl", "body": "<p>You want to evalue the second part of the inifile, so replacing</p>\n\n<pre><code>     $texcnt=~s/$find/$rep/g;\n</code></pre>\n\n<p>with </p>\n\n<pre><code>     $texcnt=~s/$find/eval \"qq($rep)\"/eg;\n</code></pre>\n\n<p>might do the job, though using eval is usally a bad (and slow) idea.</p>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1516798344, "post_id": 48418239, "comment_id": 83835267, "body": "<code>$$content </code> &amp; <code>\\ my $texcnt</code>  I couldn&#39;t understand this please."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1516799991, "post_id": 48418239, "comment_id": 83836412, "body": "@ssr1012: The first one is a de-reference, the second one is a reference. <a href=\"http://p3rl.org/perlref\" rel=\"nofollow noreferrer\">perlref</a>. None of them is relevant to the question."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1516783705, "creation_date": 1516783705, "answer_id": 48418239, "question_id": 48417707, "link": "https://stackoverflow.com/questions/48417707/regex-characters-should-be-replaced-as-a-text-in-perl/48418239#48418239", "title": "Regex characters should be replaced as a text in perl", "body": "<p>Several issues:</p>\n\n<ol>\n<li><p><code>readFileinString</code> isn't provided, so we don't know exactly what's going on.</p></li>\n<li><p><code>[\\t]*</code> matches newlines as well</p></li>\n<li><p><code>$1</code> inside a variable doesn't interpolate in replacement. You need either <code>/e</code> or <code>eval</code>, but such an approach is fragile and dangerous. I tried to find a better way: just split the replacement on <code>$1</code> and glue the parts back with the string <code>$1</code> replaced by the real <code>$1</code>.</p></li>\n<li><p><code>\\</code> need to be doubled to keep their literal meaning.</p></li>\n</ol>\n\n<p>And some minor ones:</p>\n\n<ol>\n<li><code>/s</code> changes what <code>.</code> matches, but you use no dot in the regex.</li>\n</ol>\n\n<p>&nbsp;</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nsub readFileinString {\n    my ($filename, $content) = @_;\n    open my $fh, '&lt;', $filename or die \"$filename: $!\";\n    $$content = do { local $/; &lt;$fh&gt; };\n}\n\nmy ($texfile, $inifile) = @ARGV;\n\nreadFileinString($texfile, \\ my $texcnt);\nreadFileinString($inifile, \\ my $inicnt);\n\nwhile ($inicnt =~ /^([^\\t]*)\\t(.*)/mg) {\n    my ($find, $rep) = ($1, $2);\n    $find =~ s/\\\\/\\\\\\\\/g;\n    my ($pre, $post) = split /\\$1/, $rep;\n    $texcnt =~ s/$find/$pre$1$post/g;\n}\n\nprint $texcnt;\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 48418239, "answer_count": 2, "score": 0, "last_activity_date": 1516783705, "creation_date": 1516781851, "question_id": 48417707, "link": "https://stackoverflow.com/questions/48417707/regex-characters-should-be-replaced-as-a-text-in-perl", "title": "Regex characters should be replaced as a text in perl", "body": "<p>I have two input files one is *TEX file and *INI.</p>\n\n<p>INI file contains: (User can add if some more patters but this way)</p>\n\n<pre><code>\\bra{([^{}]*)}  \\langle $1|\\sprangle\n\\ket{([^{}]*)}  \\splangle|$1\\rangle\n\\braket{([^{}]*)}   \\langle $1\\rangle\n\\set{([^{}]*)}  \\{$1\\}\n</code></pre>\n\n<p>INPUT file contains:</p>\n\n<pre><code>\\bra{ahdhaodoaddo4092039585038}\n\\ket{su093unfs}\n\\braket{adlkgnaogoaj}\n\\set{982509unflksndl}\n</code></pre>\n\n<p>OUTPUT file should be:</p>\n\n<pre><code>\\langle ahdhaodoaddo4092039585038|\\sprangle\n\\splangle|su093unfs\\rangle\n\\langle adlkgnaogoaj\\rangle\n\\{982509unflksndl\\}\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $texfile = \"brktt.tex\"; my $inifile = \"brck.ini\";\nmy $texcnt = \"\"; my $inicnt = \"\";\n\nreadFileinString($texfile,\\$texcnt);\nreadFileinString($inifile,\\$inicnt);\n\nmy %iniStore = ();\n\nwhile($inicnt=~m/^([^\\t]*)\\t([^\\t]*)/mgs)\n{\n    my $find = $1; my $rep = $2;\n\n    $texcnt=~s/$find/$rep/g;\n}\n</code></pre>\n\n<p>Could someone help me on this one.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516752131, "post_id": 48412630, "comment_id": 83815543, "body": "To clarify, my confusion is regarding how the method becomes available on STDOUT (apparently automatically just by using IO::Handle). The documented case you mention is just on an object $io which is different, it seems to me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 2, "creation_date": 1516752252, "post_id": 48412630, "comment_id": 83815578, "body": "@Stephen  Follow the link &quot;<i>As of v5.14</i>&quot;, it does explain it. I added a comment to highlight"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516753726, "post_id": 48412630, "comment_id": 83815966, "body": "OK thanks, I think I see how everything comes together now."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516753828, "post_id": 48412630, "comment_id": 83815994, "body": "BTW, what is &quot;block buffering&quot;? It says that when writing to pipes STDOUT will be block buffered."}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516753865, "post_id": 48412630, "comment_id": 83816001, "body": "Nevermind got my answer here: <a href=\"https://stackoverflow.com/questions/22008273/what-do-chunk-block-offset-buffer-and-sector-mean\" title=\"what do chunk block offset buffer and sector mean\">stackoverflow.com/questions/22008273/&hellip;</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 2, "creation_date": 1516754392, "post_id": 48412630, "comment_id": 83816133, "body": "@Stephen In a rush here, in short: (1) <code>STDOUT</code> (and Co) are <code>IO::File</code> objects, see with the oneliner: <code>perl -wE&#39;say *{$main::{STDOUT}}{IO}&#39;</code>  (2) Perl output is buffered differently depending on where it goes; normally for terminal it&#39;s line buffered while for pipes (and files) it goes in whole blocks (I think normally 64kB these days)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516787725, "post_id": 48412630, "comment_id": 83828581, "body": "@Stephen More generally, this works for any filehandle. So <code>open my $fh,...</code> and call <code>IO::File</code> methods on <code>$fh</code> and the module is loaded and it works. All filehandles are <code>IO::File</code> in newer Perls -- I think they get <code>bless</code>ed in <code>IO::File</code> when created but I couldn&#39;t find this in documentation. At any rate, the quoted docs specify that they are objects at least once the need arises."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516788235, "post_id": 48412630, "comment_id": 83828912, "body": "@Stephen Methods from <code>IO::File</code> all work on <i>file-related</i> filehandles. For others (say, sockets) look for methods in <code>IO::Handle</code>.  The <code>IO::File</code> inherits from <code>IO::Handle</code> and from <code>IO::Seekable</code> (file related ones). Most methods, by far, come from <code>IO::Handle</code> though."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516810153, "post_id": 48412630, "comment_id": 83843887, "body": "Re &quot;<i>my confusion is regarding how the method becomes available on STDOUT</i>&quot;, File handles are blessed into IO::Handle or IO::File depending on your version of Perl. (<code>perl -MScalar::Util=blessed -E&#39;say blessed(*STDOUT{IO})&#39;</code>)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1602282479, "last_edit_date": 1602282479, "creation_date": 1516750733, "answer_id": 48412630, "question_id": 48412576, "link": "https://stackoverflow.com/questions/48412576/what-does-stdout-autoflush1-do-in-perl/48412630#48412630", "title": "what does STDOUT-&gt;autoflush(1) do in Perl?", "body": "<p>The method <em>is</em> listed in <a href=\"https://perldoc.perl.org/IO/Handle.html#METHODS\" rel=\"nofollow noreferrer\">IO::Handle</a> which you noticed</p>\n<blockquote>\n<pre><code>...\n$io-&gt;autoflush ( [BOOL] )                         $|\n...\n</code></pre>\n</blockquote>\n<p>whereby <code>$|</code> is set/unset, and it sends you to <a href=\"https://perldoc.perl.org/perlvar.html#$%7C\" rel=\"nofollow noreferrer\"><code>$|</code> in perlvar</a> for explanation</p>\n<blockquote>\n<p>If set to nonzero, forces a flush right away and after every write or print on the currently selected output channel.</p>\n</blockquote>\n<p><a href=\"https://metacpan.org/pod/perl5140delta#Filehandle-method-calls-load-IO::File-on-demand\" rel=\"nofollow noreferrer\">As of v5.14</a> you don't have to <code>use IO::Handle</code> for this as <a href=\"http://perldoc.perl.org/IO/File.html\" rel=\"nofollow noreferrer\">IO::File</a> is <code>require</code>d when needed.</p>\n<p>This method is special in that it turns autoflush on even without value supplied,</p>\n<pre><code>$io-&gt;autoflush;  # turned on ($| gets set)\n</code></pre>\n<p>while other related ones don't change the current value when called without argument.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4865, "favorite_count": 1, "accepted_answer_id": 48412630, "answer_count": 1, "score": 3, "last_activity_date": 1602282479, "creation_date": 1516750456, "question_id": 48412576, "link": "https://stackoverflow.com/questions/48412576/what-does-stdout-autoflush1-do-in-perl", "title": "what does STDOUT-&gt;autoflush(1) do in Perl?", "body": "<p>I've found a variety of information regarding autoflushing in Perl, but can't find any mention of a line formatted exactly like this:</p>\n\n<pre><code>STDOUT-&gt;autoflush(1);\n</code></pre>\n\n<p>This is included in a program I'm analyzing, and I want to understand better what it does. There is also this at the beginning of the program:</p>\n\n<pre><code>use IO::Handle;\n</code></pre>\n\n<p>...which I think might be related, but it also doesn't mention this method in its documentation. </p>\n"}, {"tags": ["perl", "variables"], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 2, "last_activity_date": 1516886581, "creation_date": 1516886581, "answer_id": 48443906, "question_id": 48411970, "link": "https://stackoverflow.com/questions/48411970/assignment-of-subroutine-references-in-perl-script/48443906#48443906", "title": "Assignment of subroutine references in Perl script", "body": "<p>This is a list assignment. The subroutine returns two things. The first thing goes into <code>$callback</code> and the second thing goes into <code>$getter</code>:</p>\n\n<pre><code>my ($callback, $getter) = create_find_callbacks_that_sum_the_size( );\n</code></pre>\n\n<p>So, yes, your answer is right. Each ends up with one of the anonymous subroutines created in the <code>create_find_callbacks_that_sum_the_size</code> factory.</p>\n"}], "owner": {"reputation": 143, "user_id": 5300462, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/868114835114f81f4f4e0ead28a6181e?s=128&d=identicon&r=PG&f=1", "display_name": "John D", "link": "https://stackoverflow.com/users/5300462/john-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 48443906, "answer_count": 1, "score": 3, "last_activity_date": 1516886581, "creation_date": 1516746957, "last_edit_date": 1516820259, "question_id": 48411970, "link": "https://stackoverflow.com/questions/48411970/assignment-of-subroutine-references-in-perl-script", "title": "Assignment of subroutine references in Perl script", "body": "<p>I'm learning Perl from Intermediate Perl by Randal Schwartz. Can somebody explain the assignment of the variables $callback and $getter in the following code?</p>\n\n<pre><code>use File::Find;\nsub create_find_callbacks_that_sum_the_size {\nmy $total_size = 0;\nreturn(sub {$total_size += -s if -f}, sub { return $total_size });\n}\n\nmy %subs;\nforeach my $dir (qw(bin lib man)) {\nmy ($callback, $getter) = create_find_callbacks_that_sum_the_size( );\n$subs{$dir}{CALLBACK} = $callback;\n$subs{$dir}{GETTER} = $getter;\n}\n\nfor (keys %subs) {\n  find($subs{S_}{CALLBACK}, $_);\n\nfor (sort keys %subs) {\nmy $sum = $subs{$_}{GETTER}-&gt;( );\nprint \"$_ has $sum bytes\\n\";\n}\n</code></pre>\n\n<p>Am I right in thinking that $callback gets the value of the first subroutine reference:</p>\n\n<pre><code>sub {$total_size += -s if -f}\n</code></pre>\n\n<p>And that $getter gets the second subroutine reference:</p>\n\n<pre><code>sub { return $total_size }\n</code></pre>\n\n<p>Is this a list assignment?</p>\n\n<p>many thanks </p>\n"}, {"tags": ["perl", "sh", "quotations"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516746360, "post_id": 48411813, "comment_id": 83813491, "body": "<code>design-patterns</code> end matching patterns are two very different concepts. Tag removed."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516746385, "post_id": 48411813, "comment_id": 83813507, "body": "<code>|</code> is special in the shell. You can&#39;t use it unquoted."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1516748867, "post_id": 48411813, "comment_id": 83814491, "body": "<code>perl -aF\\\\\\| ...</code> also works."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516811563, "post_id": 48411813, "comment_id": 83844923, "body": "<code>-F&#47;\\|&#47;</code> causes your shell to pass <code>-F&#47;|&#47;</code> to <code>perl</code>."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 7, "last_activity_date": 1516747308, "creation_date": 1516747308, "answer_id": 48412045, "question_id": 48411813, "link": "https://stackoverflow.com/questions/48411813/how-does-perl-handle-a-pattern-with-different-quotations/48412045#48412045", "title": "How does perl handle a pattern with different quotations?", "body": "<p>There are three layers of interpretation you need to consider.</p>\n\n<p>The first layer is the shell. The second layer is perl's syntax for string/regex literals. The third layer is perl's regex syntax.</p>\n\n<p>Let's go through your examples, one by one:</p>\n\n<hr>\n\n<p><code>\"\\|\"</code> and <code>'\\|'</code> both pass a two-character string (<code>\\|</code>) to perl (<code>\"</code> and <code>'</code> are interpreted by the shell). That's layer one.</p>\n\n<p><code>\\|</code> is not surrounded by quotes, so perl adds <code>''</code> around it, forming the string <code>'\\|'</code> (as in <code>split '\\|', $_</code>). Perl's single-quoted strings don't treat backslash specially (unless it's followed by <code>\\</code> or <code>'</code>), so perl thinks it's still a two-character string, <code>\\|</code>. That's layer two.</p>\n\n<p><code>split</code> interprets its first argument as a regex. <code>\\</code> has a special meaning in a regex: It escapes the following character. Thus the regex <code>\\|</code> matches a single <code>|</code> (pipe character), and that's why this code splits its input on <code>|</code>. That's layer three.</p>\n\n<hr>\n\n<p><code>/\\|/</code> passes the three-character string <code>/|/</code> to perl (<code>\\</code> is interpreted by the shell). That's layer one.</p>\n\n<p><code>/|/</code> looks like something (<code>|</code>) surrounded by <code>//</code>, so perl adds nothing (<code>split /|/, $_</code>). This is parsed as a regex literal and nothing special happens here: There's a single <code>|</code>. That's layer two.</p>\n\n<p><code>|</code> has a special meaning in a regex (unless escaped by <code>\\</code>): <code>A|B</code> means \"match either A or B\". In this case both A and B are empty, matching the empty string. Splitting on a pattern that matches the empty string results in a list of all the characters in the input string (effectively, the input string is split everywhere (at every character boundary)). That's layer three.</p>\n\n<hr>\n\n<p><code>\"|\"</code> and <code>'|'</code> both pass a one-character string (<code>|</code>) to perl (<code>\"</code> and <code>'</code> are interpreted by the shell).</p>\n\n<p><code>|</code> is not surrounded by quotes, so perl adds <code>''</code> around it, forming the string <code>'|'</code> (as in <code>split '|', $_</code>). This is a simple one-character string (still just <code>|</code>). That's layer two.</p>\n\n<p><code>split</code> interprets its first argument as a regex, and as in the previous case, <code>|</code> has a special meaning (\"or\"), resulting in a list of single-character elements. That's layer three.</p>\n\n<hr>\n\n<p><code>|</code> (outside of quotes and not escaped by <code>\\</code>) is a special character in the shell: It creates a pipeline.</p>\n\n<pre><code>perl -aF/|/ -lne 'print $F[0]' input\n</code></pre>\n\n<p>is the same as</p>\n\n<pre><code>perl -aF/ | / -lne 'print $F[0]' input\n</code></pre>\n\n<p>and means: Run <code>perl -aF/</code> and pipe its output into the command <code>/ -lne 'print $F[0]' input</code>. This causes an error because <code>/</code> is not a valid program, it's a directory.</p>\n"}], "owner": {"reputation": 329, "user_id": 3989978, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/c1f202764ac43cbce2910a14aa4204f1?s=128&d=identicon&r=PG&f=1", "display_name": "Zii", "link": "https://stackoverflow.com/users/3989978/zii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516753525, "creation_date": 1516746146, "last_edit_date": 1516753525, "question_id": 48411813, "link": "https://stackoverflow.com/questions/48411813/how-does-perl-handle-a-pattern-with-different-quotations", "title": "How does perl handle a pattern with different quotations?", "body": "<p>As <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlrun.html</a> indicates, </p>\n\n<blockquote>\n  <p>-F option specifies the pattern to split on for -a. The pattern may be surrounded by // , \"\" , or '' , otherwise it will be put in single quotes. You can't use literal whitespace or NUL characters in the pattern.</p>\n</blockquote>\n\n<p>I tried below commands on a text, but the result is totally the same.</p>\n\n<p>So what's the difference of these pattern quotation in below example?</p>\n\n<pre><code>$ perl -aF\"\\|\" -lne 'print $F[0]' input\nTime\n2018-01-11 00:00:00\n2018-01-11 00:15:00\n\n$ perl -aF'\\|' -lne 'print $F[0]' input\nTime\n2018-01-11 00:00:00\n2018-01-11 00:15:00\n\n$ perl -aF/\\|/ -lne 'print $F[0]' input\nT\n2\n2\n\n$ perl -aF\"|\" -lne 'print $F[0]' input\nT\n2\n2\n\n$ perl -aF'|' -lne 'print $F[0]' input\nT\n2\n2\n\n\n$ perl -aF/|/ -lne 'print $F[0]' input\nbash: /: Is a directory\n</code></pre>\n"}, {"tags": ["perl", "plack"], "answers": [{"comments": [{"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516748020, "post_id": 48411825, "comment_id": 83814193, "body": "Thanks, this is exactly what I wanted. It&#39;s a little unclear when/how the code reference is actually called, but can we assume the server immediately calls it?"}, {"owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1516748111, "post_id": 48411825, "comment_id": 83814226, "body": "Incidentally do you think the STDOUT-&gt;autoflush(1) is really necessary? I can&#39;t quite tell what that is for. I believe it is made possible by IO::Handle, but those docs don&#39;t directly document an autoflush command, they only make passing reference to it."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "edited": false, "score": 0, "creation_date": 1518711506, "post_id": 48411825, "comment_id": 84626925, "body": "See <code>$|</code> in <a href=\"http://p3rl.org/perlvar\" rel=\"nofollow noreferrer\">perlvar</a> for the explanation of <code>autoflush</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1516746240, "creation_date": 1516746240, "answer_id": 48411825, "question_id": 48411691, "link": "https://stackoverflow.com/questions/48411691/understanding-this-plack-implementation/48411825#48411825", "title": "understanding this Plack implementation", "body": "<p>Using <code>return</code> in a sub takes effect only when the sub is being run, not when it's being returned.</p>\n\n<p>Instead of directly returning the response, the application can return a code reference:</p>\n\n<blockquote>\n  <p>Applications MUST return a response as either a three element array reference, or a code reference for a delayed/streaming response.</p>\n</blockquote>\n\n<p>The details are described under <em>Delayed Response and Streaming Body</em> in <a href=\"http://p3rl.org/PSGI\" rel=\"nofollow noreferrer\">PSGI</a>.</p>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 48411825, "answer_count": 1, "score": 2, "last_activity_date": 1516746240, "creation_date": 1516745551, "question_id": 48411691, "link": "https://stackoverflow.com/questions/48411691/understanding-this-plack-implementation", "title": "understanding this Plack implementation", "body": "<p>I am looking at a strange implementation of a web service using Plack, and I can't quite understand how all the pieces come together (a coworker copied and modified it from a tutorial, but he can't find the tutorial any more).</p>\n\n<p>First of all, this code does work, as strange as it is.</p>\n\n<p>Here is what I know: At a high level, this code implements a web service. Due to the conventions of Plack, this file has to return a method which takes request parameters as input and then returns a HTTP code and body. That is why there is the \"my $app = sub {\". Assuming this is the last line in the file (which is app.psgi) it will be the return value of the file.</p>\n\n<p>I don't understand some things beginning with \"return sub.\" I believe that is essentially overriding \"my $app = sub {\", because now that is the function that the file will return. </p>\n\n<p>However, that might be wrong because it seems to take different arguments. Instead of taking $env (which is information about the request including GET params), it takes an argument $responder. When I print out the type of that, it is CODE. I don't know what that means.</p>\n\n<p>Then the next line seems to simultaneously return an HTTP code (beginning our response) and get a writer for writing additional data. Everything after that makes sense.</p>\n\n<p>So in summary I need help understanding what this second method is doing, and what the nature of its arguments are. Thanks very much in advance.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Plack::Request;\nuse POSIX \":sys_wait_h\";\nuse IO::Handle;\n\nSTDOUT-&gt;autoflush(1);\nmy $app = sub {\n    my $env = shift;\n    my $req = Plack::Request-&gt;new($env);\n    print \"Worker PID: $$\\n\";\n    my $params = $req-&gt;parameters();\n\n    return sub {\n        my $responder = shift;\n\n        #this will print \"responder type: CODE\"\n        print \"responder type: \" . (ref $responder) . \"\\n\";\n\n        my $writer = $responder-&gt;(\n            [ 200, [ 'Content-Type', 'application/html' ]]);\n        $writer-&gt;write(\"some content\");\n        $writer-&gt;close();\n    }\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed", "grep"], "answers": [{"comments": [{"owner": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 3, "creation_date": 1516742594, "post_id": 48410916, "comment_id": 83811779, "body": "Considering adding <code>|$</code> at the end instead of <code>-C</code> :)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 6598, "user_id": 6176817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/s0NIX.jpg?s=128&g=1", "display_name": "PesaThe", "link": "https://stackoverflow.com/users/6176817/pesathe"}, "edited": false, "score": 0, "creation_date": 1516745297, "post_id": 48410916, "comment_id": 83813016, "body": "@PesaThe clever"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1516746073, "post_id": 48410916, "comment_id": 83813358, "body": "You should mention that&#39;ll only work with GNU grep and that according to the maintainers <code>-P</code> is &quot;highly experimental&quot; (see the man page) so YMMV with using it. It has been known to quit with a core dump."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 7, "last_activity_date": 1516748472, "last_edit_date": 1516748472, "creation_date": 1516742000, "answer_id": 48410916, "question_id": 48410744, "link": "https://stackoverflow.com/questions/48410744/how-do-you-color-lines-that-begin-with-string1-but-do-not-end-with-string2/48410916#48410916", "title": "How do you color lines that begin with string1 but do not end with string2", "body": "<p>Using GNU grep:</p>\n\n<pre><code>| grep -P --color=auto '^Redundancy.*(?&lt;!Full)$|^Health.*(?&lt;!Ok)$|$'\n</code></pre>\n\n<p>-P to use PCRE for lookbehind (which I don't think grep supports otherwise), <code>|$</code> to make it output all lines.  You need to use the lookbehind right before the line-end.</p>\n"}, {"comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1516745679, "post_id": 48411644, "comment_id": 83813180, "body": "Very elegant indeed!"}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 8, "last_activity_date": 1516745738, "last_edit_date": 1516745738, "creation_date": 1516745394, "answer_id": 48411644, "question_id": 48410744, "link": "https://stackoverflow.com/questions/48410744/how-do-you-color-lines-that-begin-with-string1-but-do-not-end-with-string2/48411644#48411644", "title": "How do you color lines that begin with string1 but do not end with string2", "body": "<p>With any awk in any shell on any UNIX box:</p>\n\n<pre><code>awk -v on=\"$(tput setaf 1)\" -v off=\"$(tput sgr0)\" '$1~/^(Health|Redundancy)$/ &amp;&amp; $NF!~/^(Full|Ok)$/{$0 = on $0 off} 1'  file\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/92mwE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/92mwE.png\" alt=\"enter image description here\"></a></p>\n\n<p>You should really use a more robust expression with string comparisons though rather than the current loose regexp:</p>\n\n<pre><code>awk -v on=\"$(tput setaf 1)\" -v off=\"$(tput sgr0)\" '\n(($1==\"Health\") &amp;&amp; ($NF!=\"Ok\")) || (($1==\"Redundancy\") &amp;&amp; ($NF!=\"Full\")) { $0 = on $0 off }\n1'  file\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 7109979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/wpQUK.jpg?s=128&g=1", "display_name": "PCnetMD", "link": "https://stackoverflow.com/users/7109979/pcnetmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "answer_count": 2, "score": 8, "last_activity_date": 1516748472, "creation_date": 1516741345, "last_edit_date": 1516745871, "question_id": 48410744, "link": "https://stackoverflow.com/questions/48410744/how-do-you-color-lines-that-begin-with-string1-but-do-not-end-with-string2", "title": "How do you color lines that begin with string1 but do not end with string2", "body": "\n\n<p>I run a weekly crontab that collects information and creates a log file.</p>\n\n<p>I have a script that I run against this weekly file to output only specific status lines to my display.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>#!/bin/sh\n\n# store newest filename to variable\nHW_FILE=\"$(ls -t /home/user/hwinfo/|head -1)\"\n\n# List the Site name, hardware group, Redundancy or Health status', and the site divider\ngrep -i 'Site\\|^\\*\\*\\|^Redundancy\\|^Health\\|^##' /home/user/hwinfo/$HW_FILE\necho \"/home/user/hwinfo/\"$HW_FILE\nexit 0\n</code></pre>\n\n<p>This is a sample output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Accessing Site: site01\n** FANS **\nRedundancy Status : Full\n** MEMORY **\nHealth : Ok\n** CPUs **\nHealth : Ok\n** POWER SUPPLIES **\nRedundancy Status : Full\n##########################################\nAccessing Site: site02\n** FANS **\nRedundancy Status : Full\n** MEMORY **\nHealth : Degraded\n** CPUs **\nHealth : Ok\n** POWER SUPPLIES **\nRedundancy Status : Full\n##########################################\nAccessing Site: site03\n** FANS **\nRedundancy Status : Failed\n** MEMORY **\nHealth : Ok\n** CPUs **\nHealth : Ok\n** POWER SUPPLIES **\nRedundancy Status : Full\n##########################################\n/home/user/hwinfo/hwinfo_102217_034001.txt\n</code></pre>\n\n<p>Is there a way to cat / grep / sed / awk / perl / the current output so that any lines that begin with either <code>Redundancy</code> or <code>Health</code>, but don't end in <code>Full</code> or <code>Ok</code>, respectively, get colorized?</p>\n\n<p>What I want to see is this</p>\n\n<p><img src=\"https://i.stack.imgur.com/t4Eun.png\" alt=\"imgur link\"></p>\n\n<p>I've tried piping the current output to <code>| grep --color=auto \\bRedundancy\\w*\\b(?&lt;!Full)\\|\\bHealth\\w*\\b(?&lt;!Ok)</code> without success. Any assistance would be greatly appreciated.</p>\n"}, {"tags": ["arrays", "perl", "hash", "key"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 5, "creation_date": 1516733156, "post_id": 48408644, "comment_id": 83806717, "body": "Your <code>$hash{$par}</code> implies that there is a hash <code>%hash</code>, which there isn&#39;t; thus the error message. Since you have the <code>$hash</code> <i>reference</i> you need to dereference, <code>$hash-&gt;{$par}</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1516736603, "post_id": 48408644, "comment_id": 83808677, "body": "<code>${${$self-&gt;{ServerParameters}}{$name}}{$alarm}</code> is much nicer written as <code>$self-&gt;{ServerParameters}{$name}{$alarm}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1516736204, "post_id": 48409189, "comment_id": 83808449, "body": "Don&#39;t go about copying hashes just to avoid using <code>-&gt;</code>! <code>fun(&quot;Red&quot;, \\%hash);</code> was the correct approach; the problem is with <code>fun</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1516736784, "post_id": 48409189, "comment_id": 83808776, "body": "Passing an entire hash&#39;s contents to recontruct a duplicate within the subroutine is wasteful and unnecessary. Please don&#39;t advise that people do stuff like this"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1516748386, "post_id": 48409189, "comment_id": 83814313, "body": "So, if you do need a duplicate, what will you do... copy it internally anyway? What if I want to construct inline: <code>Blah-&gt;sub({ a =&gt; 1, b =&gt; 2});</code> What if I don&#39;t want the braces in my call? Force the user to write the hash first then send in a ref? There are many use cases for this. What if I have an external event I&#39;m sending to or any other reason?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516792239, "post_id": 48409189, "comment_id": 83831497, "body": "You&#39;ve sent a hash ref there too."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": -1, "last_activity_date": 1516736621, "last_edit_date": 1516736621, "creation_date": 1516734965, "answer_id": 48409189, "question_id": 48408644, "link": "https://stackoverflow.com/questions/48408644/how-to-check-whether-key-exist-in-hasharray-and-have-specific-value-perl/48409189#48409189", "title": "How to check whether key exist in hasharray and have specific value - Perl", "body": "<p>When you do this:</p>\n\n<pre><code>fun(\"Red\", \\%hash);\n</code></pre>\n\n<p>You're sending in a hash <em>reference</em>, not a hash. There's two ways to fix this.</p>\n\n<p>One, the easiest, send in the hash. I would recommend using the second approach below, unless you've got a lot of code/many subroutines to update.</p>\n\n<pre><code>fun(\"Red\", %hash);\n</code></pre>\n\n<p>...then change:</p>\n\n<pre><code>my ($alarm, $hash) = @_;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>my ($alarm, %hash) = @_;\n</code></pre>\n\n<p>That'll alleviate any other code changes.</p>\n\n<p>Second, instead of changing the call and the assignment of the parameter(s) per the example above, you will have to change all uses to the hash within your code to a hash reference. For example:</p>\n\n<pre><code>if (exists $hash-&gt;{$par}){\n    if ($hash-&gt;{$par} == 0){\n        print \"VALUE 0\\n\";\n    }\n}\n</code></pre>\n\n<p>There's no real right or wrong way, it really depends what you're doing with the code inside of the subroutine. </p>\n\n<p>Sending in a hash makes a copy (ie. you now have two instances of the hash floating around, which may be problematic depending on the size of the hash. In this case, it's negligible to say the least). Changing the data in the hash within the sub does not change the outer-scoped hash.</p>\n\n<p>Sending in a reference does not make a copy which reduces memory footprint, but any changes to the hash reference within the sub will change the original hash outside of the sub.</p>\n"}], "owner": {"reputation": 55, "user_id": 7060018, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202613861703656/picture?type=large", "display_name": "Peter F", "link": "https://stackoverflow.com/users/7060018/peter-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516736621, "creation_date": 1516732688, "question_id": 48408644, "link": "https://stackoverflow.com/questions/48408644/how-to-check-whether-key-exist-in-hasharray-and-have-specific-value-perl", "title": "How to check whether key exist in hasharray and have specific value - Perl", "body": "<p>I have hash array:</p>\n\n<pre><code>my %hash = (\n    'DISK'    =&gt; 1,\n    'MEMORY'  =&gt; 1,\n    'CPU'     =&gt; 0,\n    'SSL'     =&gt; 1,\n    'PROCESS' =&gt; 1,\n);\n</code></pre>\n\n<p>Function: </p>\n\n<pre><code>sub fun\n{\n    my $self = shift;\n    my @ret = ();\n    my $index = 0;\n    my ($alarm, $hash) = @_;\n    my $key = \"CPU\";\n\n    print \"Key: $_ and Value: $hash-&gt;{$_}\\n\" foreach (keys %{$hash});\n\n    foreach my $name (keys %{$self-&gt;{ServerParameters}})\n    {\n            my $par = uc $name;\n            $par =~ s/\\d$//g;\n\n            if (!defined ${${$self-&gt;{ServerParameters}}{$name}}{$alarm})\n            {\n                    next;\n            }\n            if (${${$self-&gt;{ServerParameters}}{$name}}{$alarm} eq \"1\")\n            {       \n                    if (exists $hash{$par}){\n                        if ($hash{$par} == 0){\n                            print \"VALUE 0\\n\";\n                        }\n                    }\n                    my $param = ${$self-&gt;{ServerParameters}}{$name}-&gt;getValues();\n                    $ret[$index++] = \"Alarm parameter: $par : $param\";\n            }\n    }\n    return @ret;\n}\n</code></pre>\n\n<p>I'm passing hash array to above function:</p>\n\n<pre><code>fun(\"Red\", \\%hash);\n</code></pre>\n\n<p>At first I'm trying to check whether specific key exist and then if value of it is 0. When trying to run above code I receiving:</p>\n\n<p>Global symbol \"%hash\" requires explicit package name</p>\n\n<p>How can I do similiar check using e.g grep ? Thank for any asistance.</p>\n"}, {"tags": ["python", "perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1516732673, "post_id": 48408608, "comment_id": 83806422, "body": "Edit the question to include the sed script."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1516732739, "post_id": 48408608, "comment_id": 83806463, "body": "In addition to what John mentioned please  add your encrypted_contact_numbers.txt too in code tags."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 1, "creation_date": 1516733113, "post_id": 48408608, "comment_id": 83806696, "body": "For correct formatting, please use 4 spaces at the front of each line of code/data/error msgs OR highlight a block of text and use the <code>{}</code> format tool at the top left of the edit box to format as <code>code&#47;data&#47;output&#47;errorMsgs</code>. For more info see  <a href=\"https://stackoverflow.com/editing-help\">editing-help</a> and <a href=\"https://stackoverflow.com/help/formatting\">formatting</a>. Good luck."}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1516734716, "post_id": 48409024, "comment_id": 83807597, "body": "I have added the sample data file  <b>(Students.txt)</b>"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1516735415, "post_id": 48409024, "comment_id": 83808015, "body": "@Dhanabalan, please try to attach all details in a single shot to your post, try Karakfa and mine code and let us know how it goes then."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1516736504, "post_id": 48409024, "comment_id": 83808620, "body": "Am I missing something?  Won&#39;t the <code>next</code> in the first action block trigger on every line?  If so the other two blocks would never run.  Should it be <code>NF&gt;1 {a[$1]=$2]; next}</code>?  Also, I think the <code>1</code> after the third action block is misplaced."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1516736649, "post_id": 48409024, "comment_id": 83808704, "body": "you&#39;re right of course. &quot;first file&quot; condition was missing, now added.  I typed directly here without testing first."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1516737040, "post_id": 48409024, "comment_id": 83808939, "body": "That <code>NR==FNR</code> is a nice trick I haven&#39;t seen before - thanks!  (For future readers, it is true if and only if the line you are on comes from the first file on the command line.)"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 5, "last_activity_date": 1516736578, "last_edit_date": 1516736578, "creation_date": 1516734294, "answer_id": 48409024, "question_id": 48408608, "link": "https://stackoverflow.com/questions/48408608/sed-or-awk-script-to-replace-multiple-text/48409024#48409024", "title": "SED or AWK script to replace multiple text", "body": "<p><code>awk</code> to the rescue!</p>\n\n<p>if you have enough memory to keep the phone_map file in memory</p>\n\n<pre><code>awk -F', *' 'NR==FNR{a[$1]=$2; next}\n                    {key=substr($0,11,20)}\n           key in a {$0=substr($0,1,10) a[key] substr($0,21)}1' phone_map data_file\n</code></pre>\n\n<p>not tested since you're missing the data file.  It should speed up since both files will be scanned only once. </p>\n"}, {"comments": [{"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1516738453, "post_id": 48409315, "comment_id": 83809711, "body": "This is working fine for sample. Cold you please explain the code so that  it will be implement into my actual scenario with huge file. Thanks again for your help!"}, {"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1516741066, "post_id": 48409315, "comment_id": 83811044, "body": "I was able to understand and tried to implemented the same in actual scenario. Its working fine, Thanks for your timely help!"}, {"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518063657, "post_id": 48409315, "comment_id": 84352944, "body": "Hi Ravinder. Is it possible to replace all matching number with encrypted number without mentioning position? like replace all"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518254745, "post_id": 48409315, "comment_id": 84437325, "body": "@Dhanabalan, please show example of it, not clear. If it is a new question then post it in a new thread too."}, {"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518255031, "post_id": 48409315, "comment_id": 84437384, "body": "Initially I told 1st 10 characters are student ID and next 10 characters are contact number. So we used substr($0,11,10) to do replacement. Now I getting the file which has contact number in other positions also, so I trying to do replace all globally instead of particular position."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518255173, "post_id": 48409315, "comment_id": 84437414, "body": "@Dhanabalan, why don&#39;t you post a new thread for it as answers were given in this thread are as per your 1st question, changing questions later will not be good as many users try to help you. Better choose a right answer(out of any answers feasible in here) and open a new post, thanks."}, {"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518255690, "post_id": 48409315, "comment_id": 84437550, "body": "Sure. I have created another post  <a href=\"https://stackoverflow.com/questions/48719330/sed-or-awk-replace-all-with-patterns-from-another-file\" title=\"sed or awk replace all with patterns from another file\">stackoverflow.com/questions/48719330/&hellip;</a>  Thanks!"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518255729, "post_id": 48409315, "comment_id": 84437559, "body": "@Dhanabalan, choose a correct answer too, out of any. To reward people&#39;s effort. Thanks."}, {"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518255834, "post_id": 48409315, "comment_id": 84437589, "body": "Sorry I unknowingly removed it. Marked again"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": true, "score": 2, "last_activity_date": 1516735381, "creation_date": 1516735381, "answer_id": 48409315, "question_id": 48408608, "link": "https://stackoverflow.com/questions/48408608/sed-or-awk-script-to-replace-multiple-text/48409315#48409315", "title": "SED or AWK script to replace multiple text", "body": "<p>Following <code>awk</code> may help you on same.</p>\n\n<pre><code>awk '\nFNR==NR{\n  sub(/ +$/,\"\");\n  a[$1]=$2;\n  next\n}\n(substr($0,11,10) in a){\n  print substr($0,1,10) a[substr($0,11,10)] substr($0,21)\n}\n' FS=\", \" encrypted_contact_number.txt students.txt\n</code></pre>\n\n<p>Output will be as follows. Will add explanation too shortly.</p>\n\n<pre><code>10000000011122334455XXX...\n10000000024466742178YYY...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516737510, "post_id": 48409555, "comment_id": 83809189, "body": "It diminishes our efforts to encourage best practices when you publish an <i>answer</i> without <code>use strict</code> or <code>use warnings</code>, using the two-parameter <code>open</code>, no information in the <code>die</code> string, and global file handles. In addition -- Why are you using <code>quotemeta</code> on strings of digits? -- Your <code>$numbers{$1} || $1</code> is pointless\u2014you just built the regex pattern out of the hash keys. You&#39;re also holding on to a hash of over a million records long after you&#39;ve finished using it to build a regex."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516738574, "post_id": 48409555, "comment_id": 83809766, "body": "@Borodin because I&#39;m still learning, and trying to give back while doing so.   Thanks for the feedback!  <b>quotemeta</b> because I don&#39;t want to assume the OP&#39;s file is only digits.  I agree it should be, but better safe than sorry.  <b><code>|| $1</code></b> if I leave this out, I get <code>Use of uninitialized value within %numbers in substitution iterator</code> on lines that match.  Why?"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516740152, "post_id": 48409555, "comment_id": 83810563, "body": "@Borodin I can no longer repro the problem I was having - not sure what the deal was.  Anyway, fixed version is above.  I do need to keep the hash for the replacement values in the main loop, but don&#39;t need to keep the <code>join</code> result, so I changed that."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516740192, "post_id": 48409555, "comment_id": 83810583, "body": "<i>&quot;It&#39;s much shorter without the comments!&quot;</i> You should leave them out. It&#39;s not your place to teach people Perl in every program you write. <i>&quot;if I leave this out, I get <code>Use of uninitialized value within %numbers in substitution iterator</code>&quot;</i> I can&#39;t get that behaviour. // Also, you shouldn&#39;t have the <code>&#47;g</code> modifier on the substitution, and you have no reason to avoid the standard slash delimiters for <code>s&#47;&#47;&#47;</code> and <code>m&#47;&#47;</code>."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516740417, "post_id": 48409555, "comment_id": 83810691, "body": "@Borodin Yep, I got rid of the <code>&#47;g</code> modifier.  <code>s{}{}</code> is only because, in my browser, the syntax highlighter can&#39;t properly parse <code>s&#47;&#47;&#47;</code>.  Re. comments, the OP specifically asked another answerer &quot;Co[u]ld you please explain the code&quot;.  Whether or not it&#39;s my place, I think it&#39;s not unreasonable to comment in anticipation of a similar request."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516742248, "post_id": 48409555, "comment_id": 83811637, "body": "As for explaining the code, I always write a separate narrative before the code itself. And the familiarity of the <code>s&#47;&#47;&#47;</code> delimiters is more important than the highlighting. It&#39;s usually because it&#39;s expecting an even number of slashes and you can fix it by adding a comment <code>#&#47;</code>. Note that you can write <code>s&#47;($number_pattern)&#47;{ $numbers{$1} }e</code> which you may prefer as it emphasizes that the replacement is Perl code."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516742345, "post_id": 48409555, "comment_id": 83811669, "body": "Remember that you can post your code on <a href=\"https://codereview.stackexchange.com\"><i>Code Review</i></a> to get this sort of assessment."}, {"owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "edited": false, "score": 0, "creation_date": 1518219200, "post_id": 48409555, "comment_id": 84430391, "body": "Thanks everyone, This is the first time I am trying Perl."}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 2, "last_activity_date": 1516740271, "last_edit_date": 1516740271, "creation_date": 1516736335, "answer_id": 48409555, "question_id": 48408608, "link": "https://stackoverflow.com/questions/48408608/sed-or-awk-script-to-replace-multiple-text/48409555#48409555", "title": "SED or AWK script to replace multiple text", "body": "<p>What question would be complete without a Perl answer? :)  Adapted from various answers in the <a href=\"http://www.perlmonks.org/?node_id=989705\" rel=\"nofollow noreferrer\">Perl Monks' discussion</a> of this topic.</p>\n\n<h3>Edited source</h3>\n\n<p>Edited per @Borodin's comment.  With some inline comments for explanation, in hopes that they are helpful.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nuse strict;     # keep out of trouble\nuse warnings;   # ditto\n\nmy %numbers;    # map from real phone number to encrypted phone number\n\nopen(my $enc, '&lt;', 'encrypted_contact_numbers.txt') or die(\"Can't open map file\");\nwhile(&lt;$enc&gt;) {\n    s{\\s+}{}g;                               #remove all whitespace\n    my ($regular, $encrypted) = split ',';\n    $numbers{$regular} = $encrypted;\n}\n\n# Make a regex that will match any of the numbers of interest\nmy $number_pattern = join '|', map quotemeta, keys %numbers;\n$number_pattern = qr{$number_pattern}o;\n    # Compile the regex - we no longer need the string representation\n\nwhile(&lt;&gt;) {     # process each line of the input\n    next unless length &gt; 1;     # Skip empty lines (don't need this line if there aren't any in your input file)\n    substr($_, 10, 10) =~ s{($number_pattern)}{$numbers{$1}}e;\n    # substr: replace only in columns 11--20\n    # Replacement (s{}{}e): the 'e' means the replacement text is perl code.\n    print;  # output the modified line\n}\n</code></pre>\n\n<h3>Test</h3>\n\n<p>Tested on Perl v5.22.4.</p>\n\n<p><strong><code>encrypted_contact_numbers.txt</code></strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>9234567890, 1122334455\n9325788532, 4466742178\n</code></pre>\n\n<p><strong><code>students.txt</code></strong>:</p>\n\n<pre><code>aaaaaaaaaa9234567890XXX...\nbbbbbbbbbb9325788532YYY...\ncccccccccc8766443367ZZZZ...\ndddddddddd5432112345Nonexistent phone number\n</code></pre>\n\n<p>(modified for ease of reading)</p>\n\n<p><strong>Output</strong> of <code>./process.pl students.txt</code>:</p>\n\n<pre><code>aaaaaaaaaa1122334455XXX...\nbbbbbbbbbb4466742178YYY...\ncccccccccc8766443367ZZZZ...\ndddddddddd5432112345Nonexistent phone number\n</code></pre>\n\n<p>The change has been made on the first two lines, but not the second two, which is correct for this input.</p>\n"}], "owner": {"reputation": 542, "user_id": 6441403, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/QwIb4.jpg?s=128&g=1", "display_name": "Dhanabalan", "link": "https://stackoverflow.com/users/6441403/dhanabalan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 1, "accepted_answer_id": 48409315, "answer_count": 3, "score": 5, "last_activity_date": 1518221313, "creation_date": 1516732562, "last_edit_date": 1518221313, "question_id": 48408608, "link": "https://stackoverflow.com/questions/48408608/sed-or-awk-script-to-replace-multiple-text", "title": "SED or AWK script to replace multiple text", "body": "<p>I am trying to do the following with a sed script but it's taking too much time. Looks like something I'm doing wrongly.</p>\n\n<p>Scenario:\nI've student records (> 1 million) in <code>students.txt</code>.\nIn This file (each line) 1st 10 characters are student ID and next 10 characters are contact number and so on</p>\n\n<p><strong>students.txt</strong></p>\n\n<blockquote>\n  <p>1000000001<strong>9234567890</strong>XXX... <br>\n  1000000002<strong>9325788532</strong>YYY... <br>\n  .<br>\n  .<br>\n  .<br>\n  1001000000<strong>8766443367</strong>ZZZZ...</p>\n</blockquote>\n\n<p>I have another file (encrypted_contact_numbers.txt) which has all the phone but numbers and corresponding encrypted phone numbers as below</p>\n\n<p><strong>encrypted_contact_numbers.txt</strong></p>\n\n<blockquote>\n  <p><strong>Phone_Number, Encrypted_Phone_Number</strong> <br><br>\n  9234567890, 1122334455 <br>\n  9325788532, 4466742178 <br>\n  .<br>\n  . <br>\n  .<br>\n  8766443367, 2964267747 <br></p>\n</blockquote>\n\n<p>I wanted to replace all the contact numbers (11th&ndash;20th position) in <code>students.txt</code> with the corresponding encrypted phone number from <code>encrypted_contact_numbers.txt</code>.</p>\n\n<p><strong>Expected Output:</strong></p>\n\n<blockquote>\n  <p>1000000001<strong>1122334455</strong>XXX... <br>\n  1000000002<strong>4466742178</strong>YYY... <br>\n  . <br>\n  . <br>\n  . <br>\n  1001000000<strong>2964267747</strong>ZZZZ...</p>\n</blockquote>\n\n<p>I am using the below sed script to do this operation. It is working fine but too slowly.</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>while read -r pattern replacement; do   \n    sed -i \"s/$pattern/$replacement/\" students.txt\ndone &lt; encrypted_contact_numbers.txt\n</code></pre>\n\n<p><strong>Approach 2:</strong></p>\n\n<pre><code>sed 's| *\\([^ ]*\\) *\\([^ ]*\\).*|s/\\1/\\2/g|' &lt;encrypted_contact_numbers.txt |\nsed -f- students.txt &gt; outfile.txt\n</code></pre>\n\n<p>Is there any way to process this huge file quickly?</p>\n\n<p><strong>Update: 9-Feb-2018</strong> <br> <br>\nSolutions given in AWK and Perl is working fine if the phone number is in specified position (column 10-20), If I try to do global replacement it took too much time to process. Is there any best way to achieve this?</p>\n\n<p><strong>students.txt : Updated version</strong></p>\n\n<blockquote>\n  <p>1000000001<strong>9234567890</strong>XXX...<strong>9234567890</strong> <br>\n  1000000002<strong>9325788532</strong>YYY... <br>\n  .<br>\n  .<br>\n  .<br>\n  1001000000<strong>8766443367</strong>ZZZZ<strong>9234567890</strong>...</p>\n</blockquote>\n"}, {"tags": ["python", "perl", "awk", "sed", "nawk"], "answers": [{"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1516729746, "creation_date": 1516729746, "answer_id": 48407903, "question_id": 48407657, "link": "https://stackoverflow.com/questions/48407657/replace-specific-fields-in-file-with-fields-from-other-file-fields-which-needs-t/48407903#48407903", "title": "replace specific fields in file with fields from other file,fields which needs to be replaced will be found by matching different fields of samefiles", "body": "<p><code>awk</code> to the rescue!</p>\n\n<p>assumes file1 has unique keys</p>\n\n<pre><code>$ awk 'BEGIN   {FS=OFS=\",\"}       # set delimiters\n       NR==FNR {a[$1]=$0; next}   # store file1 in array\n       $1 in a {split(a[$1],b);   # if the key exists in file1, set file1 values in b\n                if($7==b[2])      # and seventh field matches, replace values; print\n                  {$7=b[4]; $1=b[3]}}1' file1 file2\n</code></pre>\n\n<p>gives this</p>\n\n<pre><code>aaaa,something,something,something,something,something,bbbbb,something,something,somethi\n12345,something,something,something,something,something,45655,something,something,somethi\ncccc,something,something,something,something,something,ddddd,something,something,somethi\n12346,something,something,something,something,something,44556,something,something,something\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 0, "last_activity_date": 1516734415, "creation_date": 1516734415, "answer_id": 48409055, "question_id": 48407657, "link": "https://stackoverflow.com/questions/48407657/replace-specific-fields-in-file-with-fields-from-other-file-fields-which-needs-t/48409055#48409055", "title": "replace specific fields in file with fields from other file,fields which needs to be replaced will be found by matching different fields of samefiles", "body": "<p>Following <code>awk</code> may help you in same.</p>\n\n<pre><code>awk -F, 'FNR==NR{a[$1,$2]=$3;b[$1,$2]=$4;next} (($1,$7) in a){val=$7;$7=b[$1,$7];$1=a[$1,val]} 1' OFS=, test1.dat test2.dat\n</code></pre>\n\n<p>Output will be as follows.</p>\n\n<pre><code>aaaa,something,something,something,something,something,bbbbb,something,something,somethi\n12345,something,something,something,something,something,45655,something,something,somethi\ncccc,something,something,something,something,something,ddddd,something,something,somethi\n12346,something,something,something,something,something,44556,something,something,something\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 820, "user_id": 3973676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c176a413055463cc8b06be04163ad4d6?s=128&d=identicon&r=PG&f=1", "display_name": "Bach Lien", "link": "https://stackoverflow.com/users/3973676/bach-lien"}, "is_accepted": false, "score": 0, "last_activity_date": 1516810356, "last_edit_date": 1516810356, "creation_date": 1516808936, "answer_id": 48426453, "question_id": 48407657, "link": "https://stackoverflow.com/questions/48407657/replace-specific-fields-in-file-with-fields-from-other-file-fields-which-needs-t/48426453#48426453", "title": "replace specific fields in file with fields from other file,fields which needs to be replaced will be found by matching different fields of samefiles", "body": "<p>Generate an <code>awk</code> script from <code>test1.dat</code>, then run that script against <code>test2.dat</code>. Perhaps it would be faster than running a two-dimentional-check <code>awk</code>. Example, this command:</p>\n\n<pre><code>awk -F, '{print \"if(\\$1==\\\"\"$1\"\\\" &amp;&amp; \\$7==\\\"\"$2\"\\\"){\\$1=\\\"\"$3\"\\\"; \\$7=\\\"\"$4\"\\\"};\"}' test1.dat\n</code></pre>\n\n<p>would generate the needed <code>awk</code> code, which looks like:</p>\n\n<pre><code>if($1==\"12345\" &amp;&amp; $7==\"98765\"){$1=\"aaaa\"; $7=\"bbbbb\"};\nif($1==\"12346\" &amp;&amp; $7==\"98766\"){$1=\"cccc\"; $7=\"ddddd\"};\n</code></pre>\n\n<hr>\n\n<p>Test:</p>\n\n<pre><code>$ codes=$(awk -F, '{print \"if(\\$1==\\\"\"$1\"\\\" &amp;&amp; \\$7==\\\"\"$2\"\\\"){\\$1=\\\"\"$3\"\\\"; \\$7=\\\"\"$4\"\\\"};\"}' test1.dat)\n$ echo \"$codes\" \"print;\"\nif($1==\"12345\" &amp;&amp; $7==\"98765\"){$1=\"aaaa\"; $7=\"bbbbb\"};\nif($1==\"12346\" &amp;&amp; $7==\"98766\"){$1=\"cccc\"; $7=\"ddddd\"}; print;\n\n$ awk -F, -f &lt;(echo \"{$codes\" \"print;}\") test2.dat\naaaa something something something something something bbbbb something something somethi\n12345,something,something,something,something,something,45655,something,something,somethi\ncccc something something something something something ddddd something something somethi\n12346,something,something,something,something,something,44556,something,something,something\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8467163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be506e1fc08f01e3d5e49829effc79a9?s=128&d=identicon&r=PG&f=1", "display_name": "utkarsh mishra", "link": "https://stackoverflow.com/users/8467163/utkarsh-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1516810356, "creation_date": 1516728830, "last_edit_date": 1516729158, "question_id": 48407657, "link": "https://stackoverflow.com/questions/48407657/replace-specific-fields-in-file-with-fields-from-other-file-fields-which-needs-t", "title": "replace specific fields in file with fields from other file,fields which needs to be replaced will be found by matching different fields of samefiles", "body": "<p>I want to replace specific fields in file (separated by ,) with fields from other file\nFields which needs to be replaced will be found after matching different fields of same files.\ne.g.</p>\n\n<pre><code>cat test1.dat\n\n12345,98765,aaaa,bbbbb\n\n12346,98766,cccc,ddddd\n\n\n\ncat test2.dat \n12345,something,something,something,something,something,98765,something,something,somethi\n12345,something,something,something,something,something,45655,something,something,somethi\n12346,something,something,something,something,something,98766,something,something,somethi\n12346,something,something,something,something,something,44556,something,something,something\n</code></pre>\n\n<p><strong>Output file</strong></p>\n\n<pre><code>cat test3.dat\naaaa,something,something,something,something,something,bbbbb,something,something,somethi\n12345,something,something,something,something,something,45655,something,something,somethi\ncccc,something,something,something,something,something,ddddd,something,something,somethi\n12346,something,something,something,something,something,44556,something,something,somethi\n</code></pre>\n\n<p>in above example we are checking</p>\n\n<pre><code>if ($1 of test2.dat == $1 of test1.dat &amp;&amp; $7 of test2.dat == $2 of test1.dat )\nthen\n\n($1 of test2.dat = $3 of test1.dat) \n\n($7 of test2.dat = $4 of test1.dat)\n</code></pre>\n\n<p>test1.dat will have distinct values of $1 and $2 </p>\n\n<p>test2.dat will be a huge file having millions of records</p>\n\n<p>I am looking for solution which is fastest (we can even iterate through test1.dat and check for each row in test3.dat if it is fastest solution)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1516720640, "post_id": 48404560, "comment_id": 83798664, "body": "Regarding your <code>ref_name</code> example: then what is the <code>$z</code> or <code>$var</code>? At least print out <code>$var</code> or <code>ref $var</code> to debug that error message. And get rid of the <code>tied</code>, this seems to be a red herring for the purpose of debugging this problem."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1516720956, "post_id": 48404560, "comment_id": 83798918, "body": "@amon: I delete my <b>UPD</b>s because I try dereference after reassign <code>$var =  tied $$var</code>. New variable name helps too."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1516721523, "post_id": 48404560, "comment_id": 83799311, "body": "<a href=\"http://perlmonks.org/?node=references+quick+reference\" rel=\"nofollow noreferrer\">perlmonks.org/?node=references+quick+reference</a> : from #1 this is <code>${tied($$var)}{desc}</code> and from #3 can be <code>tied($$var)-&gt;{desc}</code> (parentheses are necessary for precedence)"}], "answers": [{"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1516720262, "post_id": 48404801, "comment_id": 83798374, "body": "@EugenKonkov In your question, you first reassign the <code>$var = tied $$var</code>. Are you trying my suggestions after that code (where <code>$var</code> was reassigned), or <i>instead</i> of that code? You may want to use a different variable name, instead of reassigning."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1516720709, "post_id": 48404801, "comment_id": 83798714, "body": "heh... yes. I forget to delete reassigning ("}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 5, "last_activity_date": 1516719890, "creation_date": 1516719890, "answer_id": 48404801, "question_id": 48404560, "link": "https://stackoverflow.com/questions/48404560/how-to-write-two-expressions-as-just-one/48404801#48404801", "title": "How to write two expressions as just one?", "body": "<p>The syntax <code>SOMETHING-&gt;{key}</code> tries to perform hash lookup in a reference <code>SOMETHING</code>. Here, your <code>SOMETHING</code> is <code>${...}</code>, i.e. a <em>scalar dereference</em>.</p>\n\n<p>Instead, you want</p>\n\n<ul>\n<li>normal parentheses: <code>(...)-&gt;{key}</code></li>\n<li>hash access without an extra level of dereferencing: <code>${...}{key}</code>.</li>\n</ul>\n\n<p>The <code>-&gt;</code> dereference operator is only optional <em>between</em> two subscripts. I.e. <code>$foo{bar}[42]</code> and <code>$foo{bar}-&gt;[42]</code> are equivalent and access a value from the <code>%foo</code> hash. But <code>$foo-&gt;{bar}[42]</code> is completely different: This accesses a value in the <code>$foo</code> hash reference.</p>\n\n<p>The syntax <code>%{SOMETHING}{key}</code> is not correct because that dereferences <code>SOMETHING</code> as a hash, then access an entry. But the syntax for accessing an entry in a hash <code>%SOMETHING</code> is <code>$SOMETHING{key}</code>, not <code>%SOMETHING{key}</code>. The sigil <code>%</code> of a hash turns into a scalar sigil <code>$</code> because you get a scalar entry out of the hash. This is known to be confusing, and has been fixed in Perl 6.</p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 48404801, "answer_count": 1, "score": 0, "last_activity_date": 1516720773, "creation_date": 1516719167, "last_edit_date": 1516720773, "question_id": 48404560, "link": "https://stackoverflow.com/questions/48404560/how-to-write-two-expressions-as-just-one", "title": "How to write two expressions as just one?", "body": "<p>Can I write these two:</p>\n\n<pre><code>$var =  tied $$var;  # History=HASH(0x192a540)\n$var-&gt;{ desc };      # object description info\n</code></pre>\n\n<p>By one expression:</p>\n\n<pre><code>${tied $$var}-&gt;{ desc };\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>Not a SCALAR reference at ...\n</code></pre>\n"}, {"tags": ["perl", "xls"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1516703184, "post_id": 48399037, "comment_id": 83786532, "body": "Include <code>$!</code> in the <a href=\"http://p3rl.org/die\" rel=\"nofollow noreferrer\">die</a> message and copy it here. Also, read again the documentation of <a href=\"http://p3rl.org/open\" rel=\"nofollow noreferrer\">open</a> - why do you set handle to ABC before opening the file?"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1516703456, "post_id": 48399037, "comment_id": 83786740, "body": "Just write in the <code>csv</code> output format with a <code>tab</code> delimit and then open in excel you can."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516715536, "post_id": 48399037, "comment_id": 83794984, "body": "I assure you this is nothing to do with the version of Perl. I would guess that the problem is a privilege violation, either because another program already has the file open, or because you don&#39;t have write access to the file or directory. You can prove this for yourself by setting <code>$filename</code> to a path to an .xls file that doesn&#39;t exist in a folder where you have been able to open a .txt file."}], "answers": [{"tags": [], "owner": {"reputation": 2209, "user_id": 88056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad4dc48a2044368d6b349c942ef2c4be?s=128&d=identicon&r=PG", "display_name": "Powertieke", "link": "https://stackoverflow.com/users/88056/powertieke"}, "is_accepted": false, "score": -1, "last_activity_date": 1516703367, "creation_date": 1516703367, "answer_id": 48399457, "question_id": 48399037, "link": "https://stackoverflow.com/questions/48399037/failing-to-open-excel-files-for-writing/48399457#48399457", "title": "Failing to open Excel files for writing", "body": "<p>A file handle is a file handle. Not a string.</p>\n\n<p>Also, you are typing the filename in the <code>open</code> call. Why don't you use the $filename variable you so neatly created two lines earlier?</p>\n\n<p>I would try something like this:</p>\n\n<p><code>$filename = \"abc.xls\";\nopen($fhandle, \"&gt;$filename\") || die \"cannot open file $filename\";\n</code></p>\n\n<p>Also, this xls file: Is it open in excel when you try to run the script? Excel will stop you from opening it in another application or script if you do.</p>\n\n<p>Furthermore : Please use <code>strict</code> and <code>warnings</code>. They will make your life much better. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3557902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d142386d44070a7e8c1dba3d7fa855e?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam", "link": "https://stackoverflow.com/users/3557902/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1516794699, "creation_date": 1516794699, "answer_id": 48421848, "question_id": 48399037, "link": "https://stackoverflow.com/questions/48399037/failing-to-open-excel-files-for-writing/48421848#48421848", "title": "Failing to open Excel files for writing", "body": "<p>Found the problem to the issue. The environment I was trying to create these files in already had the files with the same name but did not have permissions for me to edit those files. I deleted the old files and it worked like a charm.</p>\n\n<p>Thanks a lot for your help guys.!!</p>\n\n<p>Shivam</p>\n"}], "owner": {"reputation": 1, "user_id": 3557902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d142386d44070a7e8c1dba3d7fa855e?s=128&d=identicon&r=PG&f=1", "display_name": "Shivam", "link": "https://stackoverflow.com/users/3557902/shivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1516794699, "creation_date": 1516702139, "last_edit_date": 1516715217, "question_id": 48399037, "link": "https://stackoverflow.com/questions/48399037/failing-to-open-excel-files-for-writing", "title": "Failing to open Excel files for writing", "body": "<p>I am using <code>open</code> to write data into an Excel file. This is working fine with .txt files, but with .xls files it always fails.</p>\n\n<p>This is the code I am writing</p>\n\n<pre><code>$filename = \"abc.xls\";\n$fhandle  = \"ABC\";\n\nopen( $fhandle, \"&gt;$filename\" ) || die \"cannot open file $filename\";\n</code></pre>\n\n<p>The same code executes fine in another environment which has an older Perl version.</p>\n\n<p>I need help on how can I fix this.</p>\n"}, {"tags": ["perl", "sockets", "ssl", "office365", "perl-module"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516709302, "post_id": 48398273, "comment_id": 83790620, "body": "Please don&#39;t edit your question to include advice in answers or comments."}, {"owner": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516710572, "post_id": 48398273, "comment_id": 83791527, "body": "ok. Please help me. Its very urgent."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1516732653, "post_id": 48398273, "comment_id": 83806408, "body": "It looks like you are using a rotten old version of IO::Socket::SSL. Given the line numbers you show in debug output the version is at most 1.38, which is from 7 years ago. I&#39;m not sure how old the other modules are on your system but the age of your software stack might be part of the problem you have. Another issue might be the proxy you use: port 8080  is more a common port for HTTP proxies and not SOCKS proxies and a SOCKS wrapper will not get you through a HTTP proxy."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "edited": false, "score": 0, "creation_date": 1516710642, "post_id": 48399162, "comment_id": 83791594, "body": "Error :- Proxy... Connecting... DEBUG: .../IO/Socket/SSL.pm:332: socket not yet connected DEBUG: .../IO/Socket/SSL.pm:1203: SSL object not openerror:00000000:lib(0):func(0):reason(0)  DEBUG: .../IO/Socket/SSL.pm:1203: IO::Socket::INET configuration failederror:00000000:lib(0):func(0):reason(0)  DEBUG: .../IO/Socket/SSL.pm:332: socket not yet connected"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "edited": false, "score": 1, "creation_date": 1516732746, "post_id": 48399162, "comment_id": 83806474, "body": "@Thribhuwan: How did you check the proxy is working? Specifically, how did you check that the proxy is working as a SOCKS proxy and not a HTTP proxy?"}, {"owner": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516773750, "post_id": 48399162, "comment_id": 83821100, "body": "@Steffen I don&#39;t have too much knowledge of linux server. This is http proxy only. Please suggest me better option to connect imap server through http proxy in perl."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "edited": false, "score": 2, "creation_date": 1516776314, "post_id": 48399162, "comment_id": 83822195, "body": "@Thribhuwan: if this is a HTTP proxy then it cannot be used to tunnel IMAP since IMAP (mail) is a different protocol than HTTP (web).  You might try to build a tunnel through this proxy as described in <a href=\"https://sandalov.org/blog/2088/\" rel=\"nofollow noreferrer\">sandalov.org/blog/2088</a> but it is not clear if the proxy configuration will allow this."}, {"owner": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516847517, "post_id": 48399162, "comment_id": 83860927, "body": "@Steffen I am also thinking same way but client not allowing to install proxy tunnel on Unix machine. I am hitting mail server but I got blank response. I will explain to client tunnel not allowed for IMAP."}, {"owner": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516847719, "post_id": 48399162, "comment_id": 83860977, "body": "@Steffen if any other ways to used proxy in the application please suggest me in perl or PHP. Thanks for the response."}], "tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": -1, "last_activity_date": 1516707298, "last_edit_date": 1516707298, "creation_date": 1516702537, "answer_id": 48399162, "question_id": 48398273, "link": "https://stackoverflow.com/questions/48398273/how-to-connect-outlook-imap-server-go-through-proxy-server-uisng-perl/48399162#48399162", "title": "How to connect outlook IMAP server go through proxy server uisng perl", "body": "<p>Correct syntax is :</p>\n\n<pre><code>my $proxyhost = '65.130.4.202';\nmy $proxyport = 24451;\nuse Net::IMAP::Simple;\n\nprint \"Proxy...\\n\";\nuse IO::Socket::Socks::Wrapper(\n                              Net::IMAP::Simple =&gt; {\n                                    ProxyAddr =&gt; $proxyhost,\n                                    ProxyPort =&gt; $proxyport,\n                                    SocksDebug =&gt; 3,\n                                    Timeout =&gt; 100000000\n                                 }\n                              );\n\n\nuse IO::Socket::SSL;\n\nprint \"Connecting...\\n\";\n$IO::Socket::SSL::DEBUG=2;\n# Connect\nmy $imap = Net::IMAP::Simple-&gt;new(\n    'imap.gmail.com',\n    port    =&gt; 993,\n    use_ssl =&gt; 1\n) || die \"Unable to connect to IMAP: $Net::IMAP::Simple::errstr \\n\";\n\nprint \"Logging In...\\n\";\n\n# Log in\nif ( !$imap-&gt;login( 'pappucant@gmail.com', 'pappu123' ) ) {\n    print STDERR \"Login failed: \" . $imap-&gt;errstr . \"\\n\";\n    exit(64);\n}\n</code></pre>\n\n<p>Working fine for me, didn't work with the proxy server mentioned in the code.</p>\n\n<p>Output:</p>\n\n<pre><code>Proxy...\nConnecting...\nDEBUG: .../IO/Socket/SSL.pm:625: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:627: socket connected\nDEBUG: .../IO/Socket/SSL.pm:649: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:682: using SNI with hostname imap.gmail.com\nDEBUG: .../IO/Socket/SSL.pm:738: set socket to non-blocking to enforce timeout=90\nDEBUG: .../IO/Socket/SSL.pm:764: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:774: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:794: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:764: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:774: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:794: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:764: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:774: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:794: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:809: ssl handshake done\nLogging In...\nLogin failed: [AUTHENTICATIONFAILED] Invalid credentials (Failure)\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 3213879, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8a6d2b3346780b7b1ad04e545c96c8c7?s=128&d=identicon&r=PG&f=1", "display_name": "Thribhuwan", "link": "https://stackoverflow.com/users/3213879/thribhuwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1516709246, "creation_date": 1516699835, "last_edit_date": 1516709246, "question_id": 48398273, "link": "https://stackoverflow.com/questions/48398273/how-to-connect-outlook-imap-server-go-through-proxy-server-uisng-perl", "title": "How to connect outlook IMAP server go through proxy server uisng perl", "body": "<p>I want to connect IMAP server but i am not able to connect directly imap server that's why i used proxy but still i am not able to connect and read emails.\nFollowing is my code,</p>\n\n<pre><code>#!/usr/intel/bin/perl\nuse strict;\nuse warnings;\n\n# fill in your details here\nmy $username = 'username@companyname.com';\nmy $password = 'password';\nmy $mailhost = 'outlook.office365.com';#imap-mail.outlook.com\nmy $mailport = 993;\nmy $proxyhost = '121.244.253.5';\nmy $proxyport = 8080;\n\nprint \"Proxy...\\n\";\nuse IO::Socket::Socks::Wrapper(\n                                 {\n                                    ProxyAddr =&gt; $proxyhost,\n                                    ProxyPort =&gt; $proxyport,\n                                    SocksDebug =&gt; 0,\n                                    Timeout =&gt; 100000000\n                                 }\n                              );\n\n# required modules\nuse Net::IMAP::Simple;\nuse Email::Simple;\nuse IO::Socket::SSL;\n\nprint \"Connecting...\\n\";\n$IO::Socket::SSL::DEBUG=2;\n# Connect\nmy $imap = Net::IMAP::Simple-&gt;new(\n    $mailhost,\n    port    =&gt; $mailport,\n    use_ssl =&gt; 1\n) || die \"Unable to connect to IMAP: $Net::IMAP::Simple::errstr \\n\";\n\nprint \"Logging In...\\n\";\n# Log in\nif ( !$imap-&gt;login( $username, $password ) ) {\n    print STDERR \"Login failed: \" . $imap-&gt;errstr . \"\\n\";\n    exit(64);\n}\n\nprint \"Selecting Folder...\\n\";\n# Look in the the INBOX\nmy $nm = $imap-&gt;select('Archive');\n\nprint \"How Many Messages Are There...\\n\";\n# How many messages are there?\nmy ($unseen, $recent, $num_messages) = $imap-&gt;status();\nprint \"unseen: $unseen, recent: $recent, total: $num_messages\\n\\n\";\n\nprint \"Quickly Look for unseen messages...\\n\";\n## Iterate through unseen messages\nfor ( my $i = 1 ; $i &lt;= $nm ; $i++ ) {\n    if ( $imap-&gt;seen($i) ) {\n        next;\n    } else {\n        my $es = Email::Simple-&gt;new( join '', @{ $imap-&gt;top($i) } );\n\n        printf( \"[%03d] %s\\n\\t%s\\n\", $i, $es-&gt;header('From'), $es-&gt;header(+'Subject') );\n    }\n}\n\nprint \"Disconnect...\\n\";\n# Disconnect\n$imap-&gt;quit;\n\nprint \"Exit...\\n\";\nexit;\n</code></pre>\n\n<p>Following is my Response :- </p>\n\n<pre><code>Proxy...\nConnecting...\nDEBUG: .../IO/Socket/SSL.pm:332: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:334: socket connected\nDEBUG: .../IO/Socket/SSL.pm:347: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:377: set socket to non-blocking to enforce timeout=100000000\n</code></pre>\n\n<p>I don't know why its not going further. Please share your opinion and correct me.</p>\n\n<p>Please help me here...</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4264, "user_id": 5470544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc451c5af83c8cb2a6b5af4694cfeaae?s=128&d=identicon&r=PG&f=1", "display_name": "JSON Derulo", "link": "https://stackoverflow.com/users/5470544/json-derulo"}, "edited": false, "score": 3, "creation_date": 1516699323, "post_id": 48397837, "comment_id": 83783891, "body": "I&#39;m pretty sure that it&#39;s not possible to color text in a TXT file."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 3, "creation_date": 1516699535, "post_id": 48397837, "comment_id": 83784029, "body": "To see the text colored, try <code>less -R report.txt</code>. ANSI colors are escape sequences, and an editor usually does not understand those."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1516699589, "post_id": 48397837, "comment_id": 83784066, "body": "The &quot;coloring&quot; works precisely by printing those control sequences to the terminal, which understands them and renders the following text accordingly. When they are redirected to a file ... they are just characters in a file and most text editors simply show them as such.  However, many unix tools also understand them; try <code>cat file</code>, or <code>more file</code>, or <code>less -R file</code>. See for instance <a href=\"https://en.wikipedia.org/wiki/ANSI_escape_code\" rel=\"nofollow noreferrer\">ANSI escape sequences</a>"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 2, "last_activity_date": 1516704781, "creation_date": 1516704781, "answer_id": 48399910, "question_id": 48397837, "link": "https://stackoverflow.com/questions/48397837/ansicolor-printing-to-file/48399910#48399910", "title": "ANSIColor printing to file", "body": "<p>There's nothing to solve. You program is working as expected.</p>\n\n<p>The ANSI colour codes are just characters. Your ANSI terminal is configured to look for these sequences of characters and to change the colour of the text when it sees them. Whatever software you are using to view your file has no such feature.</p>\n\n<p>In general, there is no way to encode colour in a plain text file in such a way that the colour is displayed in any software that is used to view the file.</p>\n\n<p>In order for us to help, you need to explain a little more. Why do you want coloured text in your text file?</p>\n"}], "owner": {"reputation": 11, "user_id": 9223145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d62ad4a809ac1c41f5e94693ddd7e3d?s=128&d=identicon&r=PG&f=1", "display_name": "User19952201", "link": "https://stackoverflow.com/users/9223145/user19952201"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516704781, "creation_date": 1516698443, "question_id": 48397837, "link": "https://stackoverflow.com/questions/48397837/ansicolor-printing-to-file", "title": "ANSIColor printing to file", "body": "<p> Hi I am trying to print colored text in terminal as well as in file also, I am using \"tee\" command to print the contents in terminal has to be printed in file. But I am not able to print colored text in file, but in terminal i can print colored texts </p>\n\n<p>Here is my code: </p>\n\n<pre><code>#!usr/bin/perl\nuse Data::Dumper qw(Dumper);\nuse Cwd;\nuse Term::ANSIColor qw(:constants);\nlocal $Term::ANSIColor::AUTORESET = 1;\nopen( STDOUT, \"| tee -ai report.txt\" );\nprint BOLD RED \"Here your texts are colored\\n\";\n</code></pre>\n\n<p>I am able to print \"Here your texts are colored\" in BOLD RED, but same thing i am not able to print in report.txt, if i open the report.txt i am getting [0m[0m[1m[32m Here your texts are colored </p>\n\n<p>Please help me to solve this</p>\n\n<p>thanks in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516712013, "post_id": 48396843, "comment_id": 83792511, "body": "What&#39;s <code>$seq2</code> in your example?"}, {"owner": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516712463, "post_id": 48396843, "comment_id": 83792799, "body": "The variable where each character is extracted and stored. The earlier line is a typo. It should be $seq2 = substr  ($seq, $i, 1);"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516722081, "post_id": 48396843, "comment_id": 83799751, "body": "If there is a typo in your code, I recommend you <a href=\"https://stackoverflow.com/posts/48396843/edit\">edit</a> it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516723941, "post_id": 48396843, "comment_id": 83801122, "body": "ALWAYS use <code>use strict; use warnings qw( all );</code>! You&#39;re using <code>$i</code> before you declare and assign to it!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516723981, "post_id": 48396843, "comment_id": 83801153, "body": "<code>@a</code> only has one element! <code>foreach my $i (0.. $#a)</code> is this the same as <code>foreach my $i (0)</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516778852, "post_id": 48396843, "comment_id": 83823494, "body": "Have a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>, and other help pages around there. They are all short, to the point, and useful."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "edited": false, "score": 0, "creation_date": 1516696413, "post_id": 48396975, "comment_id": 83782065, "body": "If tried  $seq = &lt;stdin&gt;; $seq2 = substr ($seq, $i, 1); And i still get 0 for every element"}, {"owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "reply_to_user": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "edited": false, "score": 0, "creation_date": 1516696848, "post_id": 48396975, "comment_id": 83782299, "body": "What is $i in this case?"}, {"owner": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "edited": false, "score": 0, "creation_date": 1516697499, "post_id": 48396975, "comment_id": 83782712, "body": "I used a for loop. So it&#39;s the initial variable"}], "tags": [], "owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "is_accepted": false, "score": -1, "last_activity_date": 1516695332, "creation_date": 1516695332, "answer_id": 48396975, "question_id": 48396843, "link": "https://stackoverflow.com/questions/48396843/loop-on-indexes-of-an-array/48396975#48396975", "title": "Loop on indexes of an array", "body": "<p>In your exemple </p>\n\n<pre><code>@a\n</code></pre>\n\n<p>is an array with one single element which is the null string because </p>\n\n<pre><code>$seq2\n</code></pre>\n\n<p>is not initialized. The answer is thus expected : 0 and an empty string.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "edited": false, "score": 0, "creation_date": 1516701352, "post_id": 48397339, "comment_id": 83785279, "body": "I need to extract each character from a string and then store it in an array, so that i would get the position of each character. That why I used substr"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "edited": false, "score": 1, "creation_date": 1516701491, "post_id": 48397339, "comment_id": 83785370, "body": "@user9255546 OK, I thought so. But then <code>substr</code> should be in a loop, so the extract <i>every</i> character, as I explain. (And that is very inefficient in comparison with other approaches.)   Then you can also <code>push</code> them onto an array inside that loop. But that is done with <code>split</code> in one statement, and then you can iterate over index."}, {"owner": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "edited": false, "score": 0, "creation_date": 1516715615, "post_id": 48397339, "comment_id": 83795036, "body": "I used the way you suggested and it worked petfectly. Thanks :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "edited": false, "score": 0, "creation_date": 1516730536, "post_id": 48397339, "comment_id": 83805249, "body": "@user9255546 I added a basic explanation of the regex."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1516745434, "last_edit_date": 1516745434, "creation_date": 1516696742, "answer_id": 48397339, "question_id": 48396843, "link": "https://stackoverflow.com/questions/48396843/loop-on-indexes-of-an-array/48397339#48397339", "title": "Loop on indexes of an array", "body": "<p>A simple way is to <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> the string into a list of its characters and assign that to an array</p>\n\n<pre><code>my @chars = split //, $string;\n</code></pre>\n\n<p>and then iterate over the array's index, <code>foreach my $i (0..$#chars)</code>, as you seem to want to.</p>\n\n<p>However, your use of <a href=\"https://perldoc.perl.org/functions/substr.html\" rel=\"nofollow noreferrer\">substr</a> in this context doesn't make sense. It returns the single character at a given position <code>$i</code> and then <code>@a</code> contains a single element.</p>\n\n<p>If you wanted to use <code>substr</code> it would have to be in a loop in which <code>$i</code> iterates from <code>0</code> to string's length <code>-1</code>, so to extract each character.  This would be very inefficient though, involving a call to <code>substr</code> for every character.</p>\n\n<hr>\n\n<p>Using regular expressions and <a href=\"https://perldoc.perl.org/functions/pos.html\" rel=\"nofollow noreferrer\">pos</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $string = q(abcdefg); \n\nwhile ($string =~ /(.)/g) { say \"$1: \", pos $string }\n</code></pre>\n\n<p>Here <code>.</code> matches any character while <code>/g</code> modifier makes it continue matching from that position in the next iteration, thus scanning the string character by character.  Since each match is captured by <code>()</code> it is available in <code>$1</code>. The <code>pos</code> \"<em>Returns the offset of where the last <code>m//g</code> search left off</em> ...\"</p>\n"}], "owner": {"reputation": 5, "user_id": 9255546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6d263b7db9b54be502cda56d16bc524?s=128&d=identicon&r=PG", "display_name": "user9255546", "link": "https://stackoverflow.com/users/9255546/user9255546"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1516745434, "creation_date": 1516694754, "last_edit_date": 1516723861, "question_id": 48396843, "link": "https://stackoverflow.com/questions/48396843/loop-on-indexes-of-an-array", "title": "Loop on indexes of an array", "body": "<p>I need to extract each character in a string and show the position in an index.</p>\n\n<p>My coding is :</p>\n\n<pre><code>my $seq2 = substr ($seq, $i, 1);\nmy @a = (\"$seq2\");\nforeach my $i (0.. $#a)\n{\n    print \"$i  - $a[$i]\";\n}\n</code></pre>\n\n<p>But it shows all the character at an index position 0</p>\n"}, {"tags": ["regex", "string", "perl", "compare"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1516690517, "post_id": 48395790, "comment_id": 83779137, "body": "=~ is the matching operator not a compare Operator what you Need is eq to compare strings"}, {"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1516691007, "post_id": 48395790, "comment_id": 83779352, "body": "I understand. The partial matching is what I want to do."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1516723983, "post_id": 48396033, "comment_id": 83801154, "body": "@ikegami do you have sample strings that it gets wrong?  Assuming the characters are limited to 0, 1, and ., the results of ^ are going to be \\0, \\1, \\36, or \\37, and ony \\1 indicates a 0 and 1 conflicting.  (It may very well not work in EBCDIC, though)"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516724136, "post_id": 48396033, "comment_id": 83801264, "body": "Hence the length check :)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 7, "last_activity_date": 1516692029, "last_edit_date": 1516692029, "creation_date": 1516691533, "answer_id": 48396033, "question_id": 48395790, "link": "https://stackoverflow.com/questions/48395790/partial-match-of-strings-operator/48396033#48396033", "title": "Partial match of strings, operator ( =~ )", "body": "<p>This is not a perl version problem.  You are doing a regular expression match.  The operand on the left of the <code>=~</code> is the string and the operand on the right is the regex being applied to it.</p>\n\n<p>This can be used for the kind of partial matching you are doing, given that the strings are the same length and each character of the regular expression matches a character of the string, but only where there is a <code>.</code> on the right.  Where there is a <code>1</code> or a <code>0</code> in the regular expression (<code>$b</code> in the case of <code>$a =~ $b</code>), there must be an exactly matching character in the string (<code>$a</code>), not a <code>.</code>.</p>\n\n<p>To do the kind of partial match you seem to want to do, you can use a bitwise exclusive or, like so:</p>\n\n<pre><code>sub partial_match {\n    my ($string_1, $string_2) = @_;\n\n    return 0 if length($string_1) != length($string_2);\n\n    # bitwise exclusive or the two strings together; where there is\n    # a 0 in one string and a 1 in the other, the result will be \"\\1\".\n    # count \\1's to get the number of mismatches\n    my $mismatches = ( $string_1 ^ $string_2 ) =~ y/\\1//;\n    return $mismatches == 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 7305079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f70eae1885bd8d3cd1e2b3d5ba56292?s=128&d=identicon&r=PG&f=1", "display_name": "livs", "link": "https://stackoverflow.com/users/7305079/livs"}, "is_accepted": false, "score": -4, "last_activity_date": 1516727826, "last_edit_date": 1516727826, "creation_date": 1516696479, "answer_id": 48397276, "question_id": 48395790, "link": "https://stackoverflow.com/questions/48395790/partial-match-of-strings-operator/48397276#48397276", "title": "Partial match of strings, operator ( =~ )", "body": "<p>From my understanding, you are trying to compare the length of 2 strings.Basically, only the length of the sting need to be compared, not the bit-wise characters.</p>\n\n<pre><code>my $a=\".0.0..0..1...0..........0...0......010.1..........\";\nmy $b=\"10.0..0..1...0..........0...0......010.1..........\";\nmy $c=\".0.0..0..1...0..........0...0......010.1..........\";\n</code></pre>\n\n<p>So the code could be:</p>\n\n<pre><code>if(length($a) == length($b))\n{\n  print \"match found\";\n}\nelse\n{\n  print \"No match\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1516736069, "post_id": 48405767, "comment_id": 83808385, "body": "Thank you. I like these solutions. Both work perfectly. One quick question is which one is faster? I think the second solution is faster because it stops  as soon as a match is impossible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "edited": false, "score": 0, "creation_date": 1516736348, "post_id": 48405767, "comment_id": 83808538, "body": "If there was an easy answer, I wouldn&#39;t have posted both solutions. It depends on the data.  Using <code>^</code> + <code>tr&#47;&#47;&#47;</code> is a fair bit faster than building and using a regex pattern. But if you reuse the pattern returned by <code>make_matcher</code>, and if your strings are very long, and if there&#39;s usually a mismatch early on, that might not matter. Also note that <code>make_matcher</code> can be modified to check if a string matches one of multiple other strings at the same time. Therefore, you&#39;ll need to benchmark with realistic data if it matters enough to spend the effort."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1516725622, "last_edit_date": 1516725622, "creation_date": 1516722691, "answer_id": 48405767, "question_id": 48395790, "link": "https://stackoverflow.com/questions/48395790/partial-match-of-strings-operator/48405767#48405767", "title": "Partial match of strings, operator ( =~ )", "body": "<p>While <code>.</code> matches <code>1</code> (or any other character), <code>1</code> doesn't match <code>.</code> (or any other character other than <code>1</code>).</p>\n\n<hr>\n\n<p>The following is a fast solution. It performs best when most strings match (since it always checks the entire string).</p>\n\n<pre><code>sub is_match { ( ( $_[0] ^ $_[1] ) =~ tr/\\x00\\x1E\\x1F//c ) == 0 }\n\nsay is_match($a, $b) ? \"match\" : \"no match\";\nsay is_match($b, $c) ? \"match\" : \"no match\";\n</code></pre>\n\n<p>How it works:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>    Hex of characters\n    =================\n\n    30 30 31 31 2E 2E  \"0011..\"\n    30 31 30 31 30 31  \"010101\"\nXOR -----------------\n    00 01 01 00 1E 1F\n       ^^ ^^           2 mismatches\n</code></pre>\n\n<p>This solution even works if one of the strings is shorter than the other (since the XOR will result in <code>30</code>, <code>31</code> or <code>2E</code> for the extra characters).</p>\n\n<hr>\n\n<p>The following is a fast solution. It performs best when most strings don't match (since it stops checking as soon as a match is impossible).</p>\n\n<pre><code>sub make_matcher {\n   my $pat =\n      join '',\n         map { $_ eq '.' ? $_ : \"[.\\Q$_\\E]\" }\n            split //, $_[0];\n\n   return qr/^$pat\\z/;\n}\n\nsub is_match { $_[0] =~ make_matcher($_[1]) }\n\nsay is_match($a, $b) ? \"match\" : \"no match\";\nsay is_match($b, $c) ? \"match\" : \"no match\";\n</code></pre>\n\n<hr>\n\n<p>Tested.</p>\n"}], "owner": {"reputation": 339, "user_id": 5683724, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-ys-8Xx_dcVY/AAAAAAAAAAI/AAAAAAAAACg/QkZg_guBu6g/photo.jpg?sz=128", "display_name": "Jaeyoung Park", "link": "https://stackoverflow.com/users/5683724/jaeyoung-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 48405767, "answer_count": 3, "score": 0, "last_activity_date": 1516727826, "creation_date": 1516690429, "last_edit_date": 1516692029, "question_id": 48395790, "link": "https://stackoverflow.com/questions/48395790/partial-match-of-strings-operator", "title": "Partial match of strings, operator ( =~ )", "body": "<p>I have used \" =~ \" to compare two strings (The length of two strings is the same.) in my script to allow a don't care condition. If a character is \".\" in a string, that character is ignored to compare.  In other words, it is a partial match case. </p>\n\n<p>comp_test.pl : </p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict;\nuse warnings;\n\nmy $a=\".0.0..0..1...0..........0...0......010.1..........\";\nmy $b=\"10.0..0..1...0..........0...0......010.1..........\";\nmy $c=\".0.0..0..1...0..........0...0......010.1..........\";\n\nif ($a =~ $b) {\nprint \"a and b same\\n\";\n}\n\nif ($a =~ $c) {\nprint \"a and c same\\n\";\n}\n</code></pre>\n\n<p>Because of don't care condition by \".\", the expected result should be both \"a and b same\" and  \"a and c same\". However, currently, the result is only \"a and c same\". Please let me know any good operator or changing \".\" to \"x\" may help?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1516688336, "post_id": 48394267, "comment_id": 83778235, "body": "Your script looks an order of magnitude too complex. It&#39;s not clear how the FORMUL calculation works but your specification looks like it could be written in 10 or so lines of Awk or Perl."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 1, "creation_date": 1516688665, "post_id": 48394267, "comment_id": 83778384, "body": "Also, note that <code>=&gt;</code> and <code>&gt;=</code> are two totally different operators in Perl"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516701037, "post_id": 48394267, "comment_id": 83785060, "body": "@tripleee Thanks. I is surely something wrong with assigning <code>%letters</code> because when I try to print <code>&quot;@cols\\n&quot;</code> it is printing some formulas that are not fulfilling these conditions. I am not sure which approach should I take to change it.."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516775427, "post_id": 48394267, "comment_id": 83821808, "body": "Does <code>3(C6 H12 O5 N5)</code> calculate as 3*6 for C, 3*12 for H, 3*5 for O, 3*5 for N or what do the parentheses designate?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516775561, "post_id": 48394267, "comment_id": 83821866, "body": "What if more than one entry in the file fulfills your conditions?"}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516777411, "post_id": 48394267, "comment_id": 83822703, "body": "@triplee No, it should search and calculate only these numbers that are inside the brackets since <code>C, O &amp; N</code> can only be found inside the brackets. For some formulas there are no brackets at all. if more then one entry under <code>^FORMUL </code> and <code>^HET </code> lines fulfills both conditions then it should add it to the filename that will be renamed. So the number of entries that fulfills both conditions that number of entries should be put in to the filename."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516797438, "post_id": 48394267, "comment_id": 83834683, "body": "@djordje: Please stop editing your question to incorporate ideas from comments and answers. I have rolled back your edits so that people can see what they&#39;re answering."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516864426, "post_id": 48394267, "comment_id": 83865977, "body": "@Borodin: I see, won&#39;t do it anymore! Thanks"}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "edited": false, "score": 0, "creation_date": 1516955445, "post_id": 48394267, "comment_id": 83908485, "body": "@djordie Do you work with @Milan? <a href=\"https://stackoverflow.com/questions/48283290/moving-an-input-file-into-another-folder-whenever-it-encounters-specific-result\" title=\"moving an input file into another folder whenever it encounters specific result\">stackoverflow.com/questions/48283290/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1516700798, "post_id": 48395306, "comment_id": 83784886, "body": "Hi, thanks. Yes, I am trying to rename existing files into <code>existing filename_hetnam</code> and <code>@hetnam</code> are first elements from the lines that start with <code>HET</code>. so if both conditions are fulfilled then grep this element from this line and put him into the existing file name by renaming the files. I tried to use <code>File::Copy module</code> and to change it into rename context since all pdbs have unique names, but its not working, still receiving some strange errors like : <code>Useless use of array element in void context at script1 line 67. Useless use of addition (+) in void context at script1 line 67.</code>"}, {"owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "reply_to_user": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 1, "creation_date": 1516865624, "post_id": 48395306, "comment_id": 83866473, "body": "@djordje I&#39;m afraid your example code doesn&#39;t have 67 lines for me to figure out the meaning of the error. Perhaps you just want to <code>rename($pdbs, &quot;$pdbs_$hetname&quot;);</code> and that&#39;s all."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1516865749, "post_id": 48395306, "comment_id": 83866522, "body": "yes, under this line there was nothing it wasn&#39;t inside the code thats why I was suprised.."}], "tags": [], "owner": {"reputation": 40406, "user_id": 459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0db193fbf6f0929c49dd9704698204ff?s=128&d=identicon&r=PG", "display_name": "dlamblin", "link": "https://stackoverflow.com/users/459/dlamblin"}, "is_accepted": false, "score": 0, "last_activity_date": 1516688717, "last_edit_date": 1516688717, "creation_date": 1516687961, "answer_id": 48395306, "question_id": 48394267, "link": "https://stackoverflow.com/questions/48394267/renaming-a-file-if-it-fulfills-two-conditions/48395306#48395306", "title": "Renaming a file if it fulfills two conditions", "body": "<p>It could be shell escaping in the system call, or a bug in how you've setup <code>%letters</code>.</p>\n\n<p>You might have better success using the built in <a href=\"http://perldoc.perl.org/functions/rename.html\" rel=\"nofollow noreferrer\">rename</a> or the core module <a href=\"https://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a>. You could also change your system call to have 3 arguments, one for the process <code>mv</code> and one each for the source and destination. But I think you should just use the first two options.</p>\n\n<p>Wait though, I see you're trying to move from <code>$pdbs</code> to <code>$pdbs/_$hetname</code>. This is going to be tricky, because the file exists, and then you try to move it to a path with its own name in a place were a directory should be? That's going to require multiple steps, like:</p>\n\n<pre><code>rename($pdbs, \"$pdbs_$hetname\");\nmkdir($pdbs);\nrename(\"$pdbs_$hetname\", \"$pdbs/_$hetname\");\n</code></pre>\n\n<p>except I hope each <code>$pdbs</code> is unique, because otherwise this is going to fail the next time around.</p>\n"}, {"comments": [{"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1516701402, "post_id": 48395335, "comment_id": 83785315, "body": "Hi, thanks. I tried to add module <code>File::Copy</code> and to use <code>rename</code>. I removed <code>my</code> from the loop as You showed but it seems something else is wrong inside the loop when assigning <code>%letters</code> and I&#39;m not sure how to change it. Now it gives me an errors: <code>Useless use of array element in void context at script1 line 67. Useless use of addition (+) in void context at script1 line 67.</code> and <code>Use of uninitialized value $letters{&quot;C&quot;} in numeric gt (&gt;) at script1 line 61, &lt;$_[...]&gt; line 38514.</code>. I am not sure how it is uninitialized when it should be <code>0</code> and there is no <code>array</code> in <code>line 67</code>."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516703800, "post_id": 48395335, "comment_id": 83786969, "body": "Your comment seems out of place. If the slash in <code>$pdbs&#47;_$hetnam</code> is a typo, the simple fix is to remove the typo."}, {"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516705111, "post_id": 48395335, "comment_id": 83787826, "body": "@tripleee are you referring to something I wrote in the answer or the OP&#39;s comment to my answer?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516705349, "post_id": 48395335, "comment_id": 83787983, "body": "That&#39;s in reference to the OP&#39;s comment, though maybe you want to incorporate this into your first bullet point, too."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516716500, "post_id": 48395335, "comment_id": 83795631, "body": "@tripleee I just wanted to include <code>_</code> in the filename so that it can be renamed as <code>filename_hetnam[element]</code> if both conditions are fulfilled. I guessed that I can not use <code>_</code> without putting <code>&#47;</code>. Have you tried to run the script after changing it and it worked? Cause I&#39;ve tried and these are the errors I came across. Probably something is wrong with assigning <code>%letters</code> but I&#39;m not sure what.. When I try to print <code>@cols\\n</code> its working fine, but it also prints some formulas that don&#39;t fulfill the conditions. And why it says useless use of array in <code>line 67</code> when there are no arrays?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1516718082, "post_id": 48395335, "comment_id": 83796755, "body": "There is absolutely no reason to put a slash before an underscore, and as multiple people have been trying to tell you for some time now, this is the immediate reason your code is failing (the slash designates a directory, but there cannot be a directory with the same name as the non-directory file you are trying to rename). <i>Maybe</i> you meant to put a backslash, which would merely be harmless, but there is no need for that either (the underscore character just represents itself; it has no special meaning to Perl inside a string)."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516766245, "post_id": 48395335, "comment_id": 83818976, "body": "@triplee I see, but after changing it doesn&#39;t seems to be the only problem. There is a bug in <code>%letters</code> as well I think. Have You tried to run it by using this input and script that You have changed? Because when I <code>print &quot;@cols\\n&quot;;</code> it prints all the formulas like it skips conditions.."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516772174, "post_id": 48395335, "comment_id": 83820555, "body": "I think you are mixing me with someone who actually posted an answer. If you can <a href=\"https://stackoverflow.com/posts/48395335/edit\">edit</a> your question to explain in more detail what the calculations on the final column are supposed to be doing, I could perhaps give a stab at actually answering."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516774869, "post_id": 48395335, "comment_id": 83821554, "body": "@triplee Ok I will edit it now and state what is the problem and what I am expecting."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 2, "last_activity_date": 1516688424, "last_edit_date": 1516688424, "creation_date": 1516688071, "answer_id": 48395335, "question_id": 48394267, "link": "https://stackoverflow.com/questions/48394267/renaming-a-file-if-it-fulfills-two-conditions/48395335#48395335", "title": "Renaming a file if it fulfills two conditions", "body": "<ul>\n<li><p><code>mv: accessing ``4YE1.pdb/_': Not a directory</code></p>\n\n<p>The <code>system</code> call is trying to move (and rename, which it never gets round to) the file <code>4YE1.pdb</code> under a folder of the same name, which it cannot find . If you intend to create a folder with the same name as the file (which I would highly discourage), you need to create it first with <code>mkdir</code> (or an equivalent).</p></li>\n<li><p><code>Use of uninitialized value $letters{\"C\"} in numeric le (&lt;=) at script1 line 61, &lt;$_[...]&gt; line 5708</code></p>\n\n<p>Changes/assignments made to <code>%letters</code> only exists in the scope of the <code>if</code> block as it was localized with <code>my</code>. To make it available to both <code>if</code> blocks, remove the <code>my</code>.</p>\n\n<p>So instead of:</p>\n\n<pre><code>my %letters;\nif ( ... ) { my %letters = ... }\nif ( ... ) { next if $letters{C} ... }\n</code></pre>\n\n<p>Write it as:</p>\n\n<pre><code>my %letters;\nif ( ... ) { %letters = ... }\nif ( ... ) { next if $letters{C} ... }\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1516777522, "post_id": 48403787, "comment_id": 83822774, "body": "Thanks. I have put some comments into the code and editted it to be more clearer. I have also used Your approach of renaming files. But there seems to be some bug while assigning <code>%letters</code>."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516790213, "post_id": 48403787, "comment_id": 83830234, "body": "Shouldn&#39;t that be <code>or</code> in the <code>next if</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516797149, "post_id": 48403787, "comment_id": 83834511, "body": "@tripleee: That&#39;s very possible. I just copied the test from the OP&#39;s code. The correctness of the criteria is the least of their problems."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516868560, "post_id": 48403787, "comment_id": 83867868, "body": "As outlined in a comment chain elsewhere on this page, the slash was a mistake, and so you don&#39;t need to create a temporary directory etc; just call <code>rename</code> or <code>move</code> with the old and new names as parameters."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1516717028, "last_edit_date": 1516717028, "creation_date": 1516716706, "answer_id": 48403787, "question_id": 48394267, "link": "https://stackoverflow.com/questions/48394267/renaming-a-file-if-it-fulfills-two-conditions/48403787#48403787", "title": "Renaming a file if it fulfills two conditions", "body": "<p>I can't be sure of a fix, because you haven't described in detail what your code should do. But the code block for <code>FORMUL</code> doesn't make sense, and I think it should be like this</p>\n\n<pre><code>if ( $lines[$c] =~ m/^FORMUL\\b/ ) {\n    my @cols = split ' ', $lines[$c], 4;\n    my %letters = ( C =&gt; 0, O =&gt; 0, N =&gt; 0 );\n\n    $letters{$1} = $2 while $cols[-1] =~ m/([A-Z])(\\d+)/g;\n\n    next if $letters{C} &lt;= 2\n        and $letters{C} + $letters{O} + $letters{N} &lt;= 6;\n}\n</code></pre>\n\n<p>Also note that your move operation</p>\n\n<pre><code>system (\"mv $pdbs $pdbs/_$hetnam\")\n</code></pre>\n\n<p>Is asking the system to create a directory with the same name as a file that already exists, which will fail. You can do this in three steps using <code>tempdir</code> from <code>File::Temp</code>:</p>\n\n<pre><code>use File:;Temp 'tempdir';\n\nmy $newdir = tempdir;\nrename $pdbs, \"$newdir/_$hetnam\";\nrename $newdir, $pdbs;\n</code></pre>\n\n<p>But note that you never set a value for <code>$hetnam</code></p>\n\n<p>Depending on the underlying platform, you may need to replace <code>rename</code> with <code>move</code> from <code>File::Copy</code></p>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516779760, "post_id": 48417155, "comment_id": 83823983, "body": "Without comments, this is 18 lines of Awk. It could be condensed a bit still, I suppose. It&#39;s comparable to the body of your Perl script, and could probably be rearticulated in Perl just as easily, but after many years with Perl, I still find myself going back to Awk when the problem is simple enough (and now to Python when it isn&#39;t)."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1516786673, "post_id": 48417155, "comment_id": 83827916, "body": "Thanks. Yes, I missed that, but <code>GTR</code> should be added as well. But when I run it on more pdb files, for some of them like <code>1AA9.pdb</code> which fulflls both conditions, it doesnt work correctly. I would also like to know what is the bug in my script and get the data with perl so that I can learn from my mistakes. Many thanks!"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1516786793, "post_id": 48417155, "comment_id": 83827993, "body": "This implements the logic you have described. If you have additional requirements, you need to state them -- at the very least, add an example of a case which doesn&#39;t work correctly with this code, and explain how it&#39;s wrong."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1516787070, "post_id": 48417155, "comment_id": 83828167, "body": "Anyway, the proper way to fix your script is not to dump it all here and explain piecemeal what it does as people ask for clarifications. Instead, reduce one problem at a time to a single, well-defined piece of code which doesn&#39;t do what you want, and post a new question asking for help with just that problem. See also the guidance for creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. (Though chances are you can find an existing question which already has an answer which solves your problem -- search before posting, once you understand exactly what&#39;s wrong.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516797638, "post_id": 48417155, "comment_id": 83834820, "body": "Have you tested this?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516799014, "post_id": 48417155, "comment_id": 83835722, "body": "I ran  it on the sample the OP had posted in the question, yes."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": false, "score": 0, "last_activity_date": 1516779999, "last_edit_date": 1516779999, "creation_date": 1516779565, "answer_id": 48417155, "question_id": 48394267, "link": "https://stackoverflow.com/questions/48394267/renaming-a-file-if-it-fulfills-two-conditions/48417155#48417155", "title": "Renaming a file if it fulfills two conditions", "body": "<p>Here's a quick stab at reimplementing what you are describing in shell + Awk.</p>\n\n<pre><code>#!/bin/bash\n\nfor file in *pdb; do\n    if suffixes=$(awk 'BEGIN { suf = \"\" }\n        # If first column is HET and number &gt;= 6, remember this one\n        $1 == \"HET\" &amp;&amp; $5 &gt;= 6 { het[$2] = $5 }\n        # If first column is FORMUL and this is a HET we remembered ...\n        $1 == \"FORMUL\" &amp;&amp; ($3 in het) {\n           # If there are parentheses, trim them and anything outside\n           sub(/^.*\\(/, \"\", $4);\n           sub(/\\).*/, \"\", $NF);\n           # Now sum O, C, and N entries, but abort if C &lt;= 2 or missing\n           sum = 0\n           c = 0\n           for(i=4; i&lt;=NF; ++i) {\n             if ($i ~ /^[OCN]/) {\n               n = 0 + substr($i, 2)\n               if ($i ~ /^C/} {\n                 if (n &lt;= 2) next;\n                 c=1;\n               }\n               sum += n\n             }\n           }\n           # If we did not see any C, abort this line\n           if (!c) next;\n           # Now if sum &gt;= 6, add suffix\n           if (sum &gt;= 6) suf = suf \"_\" $3 \n        }\n        # We are done. Print result if any.\n        # Otherwise \"exit 1\" will cause the calling \"if\" to fail.\n        END { if (suf) { print suf; exit 0 } exit 1 }' \"$file\")\n    then\n        mv \"$file\" \"$file$suffixes\"\n    fi\ndone\n</code></pre>\n\n<p>This produces the suffix <code>_RAM_GTR</code> for your test data and I don't see why <code>GTR</code> should not be included if your criteria are correctly articulated.</p>\n\n<p>I will reiterate from comments that one of the errors you had is the slash which you incorrectly added before the underscore in the destination file name. There is no way you can rename a file to a directory name, which is what the slash designates in Unix file names.</p>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516790592, "post_id": 48420070, "comment_id": 83830457, "body": "Extracting the individual terms into a hash so that we can then sum them is kind of pointless; just add to the sum in the <code>while</code> loop and see where you land. You still have to add a check for the <code>C</code> value but this should be easy, and can also go inside the <code>while</code> loop."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516790772, "post_id": 48420070, "comment_id": 83830569, "body": "20 lines of Perl if you exclude comments, declarations, and lone braces. Oh and the two adjacent lines of <code>my</code> can be merged to a single line for compactness."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516791934, "post_id": 48420070, "comment_id": 83831316, "body": "Both the answers I have posted assume that all the <code>HET</code> lines go before any <code>FORMUL</code> lines. If that is not the case, the logic will need an overhaul."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516792270, "post_id": 48420070, "comment_id": 83831524, "body": "A simplification which is also a usability improvement would be to process files named as command-line arguments, instead of hard-coding a pattern, so you can run this on a single file or a number of files which might not be in the current directory and/or might not have a name which matches the glob <code>*pdb</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516797564, "post_id": 48420070, "comment_id": 83834774, "body": "With your experience of this site I would expect a better presentation of your solution. Please format your code following <a href=\"https://perldoc.perl.org/perlstyle.html\" rel=\"nofollow noreferrer\"><code>perldoc perlstyle</code></a> so that it is less opaque."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516799161, "post_id": 48420070, "comment_id": 83835838, "body": "I basically copy/pasted the OP&#39;s code and tweaked it. If you don&#39;t like having the opening curly on a line of its own, more power to you, but downvoting because of that seems a bit harsh. I spent a fair amount of time on second-guessing the OP&#39;s intentions and implementing the parts which were missing so I&#39;d rather not need to delete this just because of stylistic quibs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516799562, "post_id": 48420070, "comment_id": 83836109, "body": "<i>&quot;If you don&#39;t like having the opening curly on a line of its own, more power to you&quot;</i> That is far from being the primary problem; why do all your <code>print</code> statements start on the left margin? <i>&quot;I spent a fair amount of time on second-guessing the OP&#39;s intentions&quot;</i> So you wasted your time. One of the main reasons for comments is to discover &quot;the OP&#39;s intentions&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516799606, "post_id": 48420070, "comment_id": 83836154, "body": "Please tag your comments with e.g. <code>@Borodin</code> if you want me to be notified of your messages."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516799616, "post_id": 48420070, "comment_id": 83836158, "body": "@Borodin The debug prints are flush left so they are easy to remove before saving for production. Should I add a remark explaining this?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516799661, "post_id": 48420070, "comment_id": 83836189, "body": "Of course you should. Or more preferably they shouldn&#39;t be there at all."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516799683, "post_id": 48420070, "comment_id": 83836205, "body": "@Borodin Let us <a href=\"http://chat.stackoverflow.com/rooms/163794/discussion-between-tripleee-and-borodin\">continue this discussion in chat</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516799773, "post_id": 48420070, "comment_id": 83836261, "body": "No, thank you. Writing poorly-formatted code and justifying it by claiming that it is full of debug code is a non-starter."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516800509, "post_id": 48420070, "comment_id": 83836730, "body": "@Borodin I commented out the debug prints, any other feedback of yours I should incorporate still?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516800980, "post_id": 48420070, "comment_id": 83837043, "body": "I think that is the worst possible choice. But you misunderstand me: you may publish whatever code <i>you think is best</i> while I may make <i>whatever comments</i> I think are appropriate. I may also apply whatever down-votes I think are appropriate without having to explain myself, but I have not down-voted this answer of yours."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516801172, "post_id": 48420070, "comment_id": 83837160, "body": "@Borodin No issue with that, just saw your comments and a fresh downvote at around the same time -- sorry for jumping to a hasty conclusion. I grappled with this but felt the OP would be helped with a rewrite showing them how to do things properly, but if you think this isn&#39;t &quot;properly&quot; I want to fix it; however, it&#39;s been a long time since I wrote Perl for production."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516802824, "post_id": 48420070, "comment_id": 83838298, "body": "What is &quot;proper&quot; can only ever be one individual&#39;s idea. That idea may be endorsed by many others and so become an adopted standard, but unless some of us break from it there will never be any advancements. My opinion is that &quot;debug prints&quot; don&#39;t belong in any demonstration of a solution, but I am no oracle. If the answer has no inherent output then I will often <code>use Data::Dump</code> and <code>dd \\%result</code> at the end of the code and explain myself in the lead narrative, but debug code only ever means anything to the person who wrote it and I think you should avoid it altogether."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516864704, "post_id": 48420070, "comment_id": 83866091, "body": "@Borodin Uff, Your code seems to work very fine after double checking it and apart from its accuracy it really looks very simple and readable. I think I have learned some new things from this code. Thanks."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516866019, "post_id": 48420070, "comment_id": 83866660, "body": "Having spaces inside parentheses (and curlies) probably helps if you only have a very primitive text editor, but seems to deviate from the examples in the perlstyle document, and strikes me as <i>really</i> ugly."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516868143, "post_id": 48420070, "comment_id": 83867653, "body": "@Borodin How can I alter it to directly rename original <code>pdb (input) files</code> and not to have it printed in terminal?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1516868403, "post_id": 48420070, "comment_id": 83867783, "body": "The <code>system</code> call you originally had will nominally work, though as already outlined in Borodin&#39;s answer, there are Perl-native alternatives to explore, too. As long as you don&#39;t put back the misplaced slash which threw off everyone, it&#39;s dead simple."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1517734209, "post_id": 48420070, "comment_id": 84208844, "body": "@Borodin When I try to run Your code on a larger dataset <code>(91 k)</code>  is gives me an error <code>use of uninitialized value $ columns [4] in numeric lt (&lt;) at script.pl line 22</code>. Should I change it to <code>@ columns [4]</code> to assess the elements? And when I try to run it on whole sample. it should print <code>~91k</code> of lines and it prints <code>~60k</code>. You have some idea what can be the reason of printing less lines?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1517737556, "post_id": 48420070, "comment_id": 84209713, "body": "It means one of your files has malformed lines which don&#39;t contain five columns."}, {"owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "edited": false, "score": 0, "creation_date": 1517738000, "post_id": 48420070, "comment_id": 84209828, "body": "@triplee Oh no, cus when I read the manual of this file it all contain 5 columns in this line..it actually means that some files doesn not fulfil both conditions which is fine. I am just wondering does this warning can make impact on the result? And how should I fix it if it does?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1517740833, "post_id": 48420070, "comment_id": 84210632, "body": "If the error message contradicts the documentation, I would trust the error message. If you can figure out how to fix the malformed data, do that; otherwise, I suppose you will have to discard it."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1517741037, "post_id": 48420070, "comment_id": 84210693, "body": "You have tagged this <a href=\"https://stackoverflow.com/questions/tagged/perl\">perl</a> so people who respond here are likely to know how to fix Perl problems, not so much proper procedures for safety and validity in biochemical research."}], "tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 1, "last_activity_date": 1516803657, "last_edit_date": 1592644375, "creation_date": 1516789427, "answer_id": 48420070, "question_id": 48394267, "link": "https://stackoverflow.com/questions/48394267/renaming-a-file-if-it-fulfills-two-conditions/48420070#48420070", "title": "Renaming a file if it fulfills two conditions", "body": "<p>Your code didn't attempt to implement crucial parts of the logic you describe, and had various small logic bugs in other places.  Here is an attempt at refactoring this into reasonably idiomatic Perl while keeping as much of your original as possible.</p>\n<p>I have left out the actual renaming functionality, and left in some debugging prints to help you see how you might try to help yourself see what your program is doing while you are developing it.</p>\n<pre><code>#! usr/bin/env perl\n\nuse autodie;\nuse warnings;\nuse strict;\n\nforeach my $pdb (&lt;*pdb&gt;)\n{\n    printf &quot;# %s\\n&quot;, $pdb;\n    open my $fh, &quot;&lt;&quot; ,$pdb;\n    my %hets;\n    my @suf;\n    # Don't slurp the entire file. Just read a line at a time.\n    for my $line (&lt;$fh&gt;)\n    {\n        chomp ($line);\n        if ($line =~ m/^HET /)\n        {   \n            my @columns = split ' ', $line;\n            ####print &quot;$columns[4] &lt; 6? &quot;, ($columns[4] &lt; 6 ? &quot;yes&quot; : &quot;no&quot;), &quot;\\n&quot;;\n            next if $columns[4] &lt; 6;\n            # We have a HIT, er, HET -- remember it\n            $hets{$columns[1]} = $columns[4];\n            ####print &quot;$columns[1] added to hets\\n&quot;;\n        }\n        elsif ($line =~ m/^FORMUL /)\n        {\n            my @cols = split /\\s+/, $line, 4;\n            # If this is not in $hets, skip it\n            ####print &quot;$cols[2] in %hets? &quot;, ($hets{$cols[2]} ? &quot;yes&quot; : &quot;no&quot;), &quot;\\n&quot;;\n            next unless $hets{$cols[2]};\n            ####print &quot;\\$cols[-1] is $cols[-1]\\n&quot;;\n            # Initialize these to zero _before_ extracting actual counts\n            my %letters = (C=&gt;0, O=&gt;0, N=&gt;0);\n            while ($cols[-1] =~ m/([CON])(\\d+)/g)\n            {\n                $letters{$1} = $2;\n                ####print &quot;\\$letters{$1} = '$2'\\n&quot;\n            }\n            my $con = $letters{&quot;C&quot;} + $letters{&quot;O&quot;} + $letters{&quot;N&quot;};\n            # Bug fix: next condition was wrong\n            # (&quot;next if this OR that&quot; is equivalent to &quot;don't next if this AND that&quot;)\n            if ($letters{&quot;C&quot;}&gt;2 &amp;&amp; $con &gt;= 6)\n            {\n                push @suf, $cols[2]\n            }\n        }\n    }\n    if (@suf)\n    {\n        print &quot;rename $pdb, &quot;, join(&quot;_&quot;, $pdb, @suf), &quot;\\n&quot;;\n    }\n    # my %hets and my @suf go out of scope here --\n    # helps you find bugs and make sure you don't process old results\n    # from a previous file\n}\n</code></pre>\n<p>Declaring <em>all</em> your variabes as effectively global with <code>my</code> completely nullifies the reason to use <code>my</code> in the first place. The variable should be declared at the scope where you actually use it, and then forgotten when it goes out of scope. This is hard for beginners, but helps you down the line because you cannot stumble over your own feet by using the same variable for different things in different places, or operate on an old value from a previous iteration of the same loop (the value will be <code>undef</code> from the <code>my</code> declaration until you actually give it a value). And of course, declaring globals with <code>my</code> and then <em>redeclaring</em> them with <code>my</code> again in an enclosed scope is not only completely pointless, but also surely utterly confusing.</p>\n<p>Apart from actually implementing many of the conditions you had in your requirements but not in your code, the major change here is collecting the matching suffixes while processing the lines in a file, then only attempting to rename it once we have processed the entire file.</p>\n<h3>Update by @Borodin</h3>\n<p>I have altered the code, hoping to explain my ideas in the comments. The semantics are identical: this is no refactoring, and I have no idea whether the logic is correct.</p>\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nfor my $pdb ( glob '*pdb' ) {\n\n    printf &quot;# %s\\n&quot;, $pdb;\n\n    open my $fh, &quot;&lt;&quot;, $pdb;\n\n    my %hets;\n    my @suf;\n\n    for my $line ( &lt;$fh&gt; ) {\n\n        chomp( $line );\n\n        if ( $line =~ m/^HET / ) {\n            my @columns = split ' ', $line;\n            next if $columns[4] &lt; 6;\n\n            $hets{ $columns[1] } = $columns[4];\n        }\n        elsif ( $line =~ m/^FORMUL / ) {\n\n            my @cols = split /\\s+/, $line, 4;\n\n            next unless $hets{ $cols[2] };\n\n            my %letters = ( C =&gt; 0, O =&gt; 0, N =&gt; 0 );\n\n            while ( $cols[-1] =~ m/([CON])(\\d+)/g ) {\n                $letters{$1} = $2;\n            }\n\n            my $con = $letters{&quot;C&quot;} + $letters{&quot;O&quot;} + $letters{&quot;N&quot;};\n\n            if ( $letters{&quot;C&quot;} &gt; 2 &amp;&amp; $con &gt;= 6 ) {\n                push @suf, $cols[2];\n            }\n        }\n    }\n\n    if ( @suf ) {\n        print &quot;rename $pdb, &quot;, join( &quot;_&quot;, $pdb, @suf ), &quot;\\n&quot;;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 9180236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f564cb07c66bd0cb7d993bc4b921615f?s=128&d=identicon&r=PG&f=1", "display_name": "djordje", "link": "https://stackoverflow.com/users/9180236/djordje"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 48420070, "answer_count": 5, "score": 0, "last_activity_date": 1516803657, "creation_date": 1516681760, "last_edit_date": 1516797359, "question_id": 48394267, "link": "https://stackoverflow.com/questions/48394267/renaming-a-file-if-it-fulfills-two-conditions", "title": "Renaming a file if it fulfills two conditions", "body": "<p>I am reading many <code>pdb</code> files from current directory, in each of the file I am concentrating on specific lines and I am putting two conditions and if these conditions are fulfiled then I am trying to rename the file by adding certain elements from the line to its existing filename. My lines that I am operating with look like this:</p>\n\n<pre><code>HET     CA  A 800       1                                                       \nHET    SO4  A 901       5                                                       \nHET    SO4  A 902       5                                                       \nHET    SO4  A 903       5                                                       \nHET    RAM  A 509      11                                                       \nHET    GTR  A 510      12                                                       \nHET    RAM  A 511      15                                                       \nHET    GTR  A 512      12                                                       \nHET    RAM  A 513      15                                                       \nHET    GTR  A 514      12                                                       \nHETNAM      CA CALCIUM ION                                                      \nHETNAM     SO4 SULFATE ION                                                      \nHETNAM     RAM ALPHA-L-RHAMNOSE                                                 \nHETNAM     GTR BETA-D-GALACTOPYRANURONIC ACID                                   \nHETSYN     GTR GALACTURONIC ACID                                                \nFORMUL   2   CA    CA 2+                                                        \nFORMUL   3  SO4    3(O4 S 2-)                                                   \nFORMUL   6  RAM    3(C6 H12 O5 N5)                                                 \nFORMUL   6  GTR    3(C6 H10 O7)                                                 \nFORMUL   7  HOH   *362(H2 O) \n</code></pre>\n\n<ul>\n<li>I am reading lines that start with <code>HET</code>  and <code>FORMUL</code>.</li>\n<li>From <code>HET</code> lines I am reading last column or 4th element. From <code>FORMUL</code> lines I am reading last column.</li>\n<li>If the number from <code>HET</code> lines is <code>&gt;= 6</code> and if under <code>FORMUL</code> there is <code>C &gt;= 2</code> <code>&amp;&amp;</code> <code>sum of O C N</code> is <code>&gt;= 6</code> then I want to grep the 3rd element under <code>FORMUL</code> line and to put it into filename.</li>\n</ul>\n\n<p>So for example, from this input only <code>RAM</code> fulfills both conditions because it has <code>15</code> under <code>HET</code> and <code>sum of C O N</code> is <code>=&gt;6</code> in <code>FORMUL</code>, so I am expecting to grep <code>RAM</code> and to add it into filename that has been processed. So something like this : <code>filename_RAM</code> if there are more elements that fulfill both conditions then more elements will be added to the <code>filename</code></p>\n\n<p>I have written the script that looks like this:</p>\n\n<pre><code>#! usr/bin/env perl\n\nuse autodie;\nuse warnings;\nuse strict;\nuse File::Glob;\n\nmy $pdbs;\nmy $fh;\nmy @fh;\nmy @data;\nmy $c;\nmy @lines;\nmy $lines;\nmy $file_sz;\nmy $line;\nmy @colums;\nmy $colums;\nmy @het;\nmy $het;\nmy $cols;\nmy @cols;\nmy %letters;\nmy @hetnam;\nmy $hetnam;\n\nforeach my $pdbs (glob '*pdb') #Reading each pdb file from the current directory\n{\n    printf \"%s\\n\", $pdbs;\n    open my $fh, \"&lt;\" ,$pdbs;  #Read each pdb file into a filehandle\n    #print \"$fh\\n\";\n    @lines= &lt;$fh&gt;;            #Putting content of each file into an array\n    $file_sz = scalar @lines;\n    #print \"$file_sz\\n\";\n    #print \"@lines\\n\";\n\n    for ($c=0; $c&lt;=$#lines; $c++) #Reading each line\n    {\n        chomp ($lines[$c]);\n        if ($lines[$c] =~ m/^HET /) #If line starts with HET \n        {   \n            my @colums = split ' ', $lines[$c];\n            # print join \"\\t\", $colums [4];\n            print \"$colums[4]\\n\";       #Printing only a fifth column (4th element)\n            push @hetnam, $colums[1];\n        }\n\n        if ($lines[$c] =~ m/^FORMUL /) #If line starts with FORMUL\n        {   \n            my @cols = split /\\s+/, $lines[$c], 4;\n            next unless $cols[0] eq 'FORMUL';   \n            my %letters = $cols[-1] =~ m/([A-Z])(\\d+)/g;\n            $letters{$lines[$c]} = 0 for (qw[C O N]);\n            next if $letters{C} &lt;= 2\n              and $letters{C} + $letters{O} + $letters{N} &lt;= 6;\n            #print \"@cols\\n\";\n        }\n\n        if ($colums[4]=&gt;6 &amp;&amp; $letters{C} &lt;= 2 &amp;&amp; $letters{C} + $letters{O} + $letters{N} =&gt; 6) #line 61\n        {\n        system (\"mv $pdbs $pdbs/_$hetnam\");\n        }\n    }\n}\n</code></pre>\n\n<p>The error that I am encountering is :</p>\n\n<pre><code>mv: accessing `4YE1.pdb/_': Not a directory\nUse of uninitialized value $letters{\"C\"} in numeric le (&lt;=) at script1 line 61, &lt;$_[...]&gt; line 5708.\nUse of uninitialized value in addition (+) at script1 line 61, &lt;$_[...]&gt; line 5708.\n</code></pre>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1516652509, "post_id": 48389592, "comment_id": 83766969, "body": "What is the question?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516652629, "post_id": 48389592, "comment_id": 83767029, "body": "It&#39;s the worst possible start to comment out <code>use strict</code> and <code>use warnings</code>. If you won&#39;t take the advice that those options give you then why should we offer more?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516652979, "post_id": 48389592, "comment_id": 83767220, "body": "The code you show doesn&#39;t print or &quot;return&quot; anything. What do you mean when you say that it does?"}, {"owner": {"reputation": 1, "user_id": 9253500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96f98da77af242b64f4ea5d9d66c29d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler King", "link": "https://stackoverflow.com/users/9253500/tyler-king"}, "edited": false, "score": 0, "creation_date": 1516653347, "post_id": 48389592, "comment_id": 83767400, "body": "Currently, I am not returning anything, I just need to assign the elements to variables for each row in the CSV.  Use strict and warnings are not commented out, that is a typo. Edited to reflect."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516653428, "post_id": 48389592, "comment_id": 83767446, "body": "There&#39;s no point in calling <code>$csv-&gt;error_diag</code> and discarding any return value."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1516654334, "post_id": 48389592, "comment_id": 83767872, "body": "@TylerKing What do you think <code>my $row = $csv-&gt;getline($FH)</code> is doing?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516656462, "post_id": 48389592, "comment_id": 83768981, "body": "<code>&lt;$FH&gt; for 0;</code> is a weird way of writing <code>&lt;$FH&gt;;</code>, but it should be <code>$csv-&gt;getline( $FH );</code>."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1516709326, "post_id": 48389592, "comment_id": 83790632, "body": "An entirely different approach is to use SQL, with <a href=\"https://www.google.nl/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0ahUKEwihxq6rhu7YAhUQ26QKHaKqA-kQFggnMAA&amp;url=http://search.cpan.org/perldoc?DBD%3A%3ACSV\" rel=\"nofollow noreferrer\">DBD::CSV</a>. See e.g. <a href=\"https://www.win.tue.nl/~rp/laquso-bin/csvsql\" rel=\"nofollow noreferrer\">this script, which I use to query CSV files</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516710698, "post_id": 48389592, "comment_id": 83791639, "body": "Okay, what are you doing to see the text you have shown after <code>Which returns</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1516656867, "creation_date": 1516656867, "answer_id": 48390621, "question_id": 48389592, "link": "https://stackoverflow.com/questions/48389592/parsing-a-csv-file-with-a-header-line/48390621#48390621", "title": "Parsing a CSV file with a header line", "body": "<p>I think you're asking for </p>\n\n<p>my ($short_desc, $priority, $status, ...) = @$row;</p>\n\n<p>But that makes a needless assumption about the order of the fields.</p>\n\n<pre><code>use Text::CSV_XS qw( );\n\n@ARGV == 1\n    or die(\"usage\\n\");\n\nmy ($qfn) = @ARGV;\n\nopen(my $FH, \"&lt;:encoding(utf8)\", $qfn)\n    or die(\"Can't open input file \\\"$qfn\\\": $!\\n\");\n\nmy $csv = Text::CSV_XS-&gt;new({ auto_diag =&gt; 2, binary =&gt; 1 });\n\n$csv-&gt;header($fh);    \n\nwhile ( my $row = $csv-&gt;getline_hr($FH) ) {\n    my (\n        $short_desc,\n        $priority,\n        $status,\n        ...\n    ) = @$row{qw(\n        Short_Description\n        Priority\n        Status\n        ...\n    )};\n\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9253500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96f98da77af242b64f4ea5d9d66c29d7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler King", "link": "https://stackoverflow.com/users/9253500/tyler-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1516656867, "creation_date": 1516652242, "last_edit_date": 1516656616, "question_id": 48389592, "link": "https://stackoverflow.com/questions/48389592/parsing-a-csv-file-with-a-header-line", "title": "Parsing a CSV file with a header line", "body": "<p>I have a CSV file with a header line that I am required to use Perl to parse with the environment I am in.</p>\n\n<p>The incoming CSV file has the following format (Header with data separated at each line):</p>\n\n<pre><code>Short_Description,Priority,Status,Office_Location,E-mail,Contact_Type,Service_Level,Campus,Ticket_Priority,Region,Country,School,First_Seen,Detection_Method,Description,Assignees \nPatch system,Important,Pending,Maryland,test@email.com,Contractor,Standard,Annapolis,Req-Routine,N/A,N/A,N/A,1/12/2018,Others,TestofDescription,TestAssignee\n</code></pre>\n\n<p>So far I have this code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\n\nuse Text::CSV_XS;\nuse Data::Dumper;\n\nmy $file = $ARGV[0] or die \"Need to get CSV file\";\n\nmy @rows; # array that will store csv values\n\n\nmy $csv = Text::CSV_XS-&gt;new ( { binary =&gt; 1 } ) or die \"Cannot use CSV: \".Text::CSV-&gt;error_diag ();\n\n# open file\nopen my $FH, \"&lt;:encoding(utf8)\", \"$file\" or die \"$file: $!\";\n\n# Skip Header row\n&lt;$FH&gt; for 0;\n\n# read file in while loop\n\nwhile ( my $row = $csv-&gt;getline( $FH ) ) {        \n    {\n        push @rows, $row;\n    }\n}\n\n$csv-&gt;eof or $csv-&gt;error_diag();\n\n# close file\nclose $FH;\n</code></pre>\n\n<p>Which returns:</p>\n\n<pre><code>     Patch system Important Pending Maryland test@email.com Contractor Standard Annapolis Req-Routine N/A N/A N/A 1/12/2018 Others TestofDescription TestAssignee\n</code></pre>\n\n<p>When this is done, each array element is the line with the data in it. I am at a point where I need to parse the data in the entry into variables, but I cannot grasp the necessary context/syntax to perform this. As the fields are going to have string entries, I need to parse in the data in a way that it isnt treated as a new entry. \"Patch System\" needs to stay together, as an example.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516647768, "post_id": 48387883, "comment_id": 83764770, "body": "Probably want <code>my ($match) = $txt =~ &#47;(def)&#47;;</code>. <code>$match</code> will be <code>def</code> (if there&#39;s a match) or <code>undef</code> (if there&#39;s isn&#39;t)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516647805, "post_id": 48387883, "comment_id": 83764781, "body": "Probably want <code>my $matched = $txt =~ &#47;def&#47;;</code>. <code>$matched</code> will be true (if there&#39;s a match) or false (if there&#39;s isn&#39;t)."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1516650789, "post_id": 48387883, "comment_id": 83766153, "body": "A regex that always matches? Like <code>.*</code>?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516715147, "post_id": 48387883, "comment_id": 83794666, "body": "Can you clarify what you&#39;re doing which means you need an &#39;always true&#39; regex, as well capturing particular substrings? Because that sounds an awful lot like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">&quot;XY problem&quot;</a> and one that may simply be better solve in a different way, such as using the <code>&#47;&#47;</code> operator."}, {"owner": {"reputation": 11, "user_id": 3715059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2945f470733effed9f948908652622b?s=128&d=identicon&r=PG&f=1", "display_name": "user3715059", "link": "https://stackoverflow.com/users/3715059/user3715059"}, "edited": false, "score": 0, "creation_date": 1516788936, "post_id": 48387883, "comment_id": 83829369, "body": "Ok sorry for that less Informations. I added some additional explanations."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3715059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2945f470733effed9f948908652622b?s=128&d=identicon&r=PG&f=1", "display_name": "user3715059", "link": "https://stackoverflow.com/users/3715059/user3715059"}, "edited": false, "score": 0, "creation_date": 1516647890, "post_id": 48388121, "comment_id": 83764816, "body": "I need a regexp which Return Always true, and write the founded Word in $1 if exist."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 3, "last_activity_date": 1516646030, "creation_date": 1516646030, "answer_id": 48388121, "question_id": 48387883, "link": "https://stackoverflow.com/questions/48387883/perl-regexp-optional-search-grouping/48388121#48388121", "title": "Perl RegExp optional search grouping", "body": "<p>The pattern <code>(def)?</code> matches either of two things: \"def\" or the empty string. It will try \"def\" first, but if it doesn't find it, it will succeed and match nothing.</p>\n\n<p>It's possible to match the empty string at any location in any string, which means that it's possible to match the empty string at the very first position in your string, which means that there's no reason for the engine to look at any <em>later</em> position to see if it can find a \"def\" instead.</p>\n\n<p>Without a better example of what you're trying to do it's hard to give advice, but you need to either modify the pattern so that it doesn't match the empty string, or provide some context to force it to attempt the match of \"def\" in the correct position.</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 0, "last_activity_date": 1516675680, "creation_date": 1516675680, "answer_id": 48393416, "question_id": 48387883, "link": "https://stackoverflow.com/questions/48387883/perl-regexp-optional-search-grouping/48393416#48393416", "title": "Perl RegExp optional search grouping", "body": "<p>Per a comment, you want the regex to always be true but capture the word if it exists.</p>\n\n<p>This would be:</p>\n\n<pre><code>/^(?:.*?(def))?/s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 3715059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2945f470733effed9f948908652622b?s=128&d=identicon&r=PG&f=1", "display_name": "user3715059", "link": "https://stackoverflow.com/users/3715059/user3715059"}, "edited": false, "score": 1, "creation_date": 1516797926, "post_id": 48396821, "comment_id": 83835004, "body": "What is the difference between that and /(def)/"}, {"owner": {"reputation": 16, "user_id": 7305079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f70eae1885bd8d3cd1e2b3d5ba56292?s=128&d=identicon&r=PG&f=1", "display_name": "livs", "link": "https://stackoverflow.com/users/7305079/livs"}, "reply_to_user": {"reputation": 11, "user_id": 3715059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2945f470733effed9f948908652622b?s=128&d=identicon&r=PG&f=1", "display_name": "user3715059", "link": "https://stackoverflow.com/users/3715059/user3715059"}, "edited": false, "score": 0, "creation_date": 1516969124, "post_id": 48396821, "comment_id": 83915236, "body": "I think both will do the same, but in case if we want to capture the other data then it should help"}], "tags": [], "owner": {"reputation": 16, "user_id": 7305079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f70eae1885bd8d3cd1e2b3d5ba56292?s=128&d=identicon&r=PG&f=1", "display_name": "livs", "link": "https://stackoverflow.com/users/7305079/livs"}, "is_accepted": false, "score": 0, "last_activity_date": 1571146211, "last_edit_date": 1571146211, "creation_date": 1516694634, "answer_id": 48396821, "question_id": 48387883, "link": "https://stackoverflow.com/questions/48387883/perl-regexp-optional-search-grouping/48396821#48396821", "title": "Perl RegExp optional search grouping", "body": "<p>The regx used is not capturing all the expected scenarios.'(def)?' will match only 'def' char followed by 0 or more characters.\nwhereas, you are trying to match wherever 'def' present. </p>\n\n<p>Below code will help to match 'def' in the string irrespective of the position.</p>\n\n<pre><code>$txt =~ /(.*)?(def)(.*)?/;\n\nprint \"$2\";\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3715059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2945f470733effed9f948908652622b?s=128&d=identicon&r=PG&f=1", "display_name": "user3715059", "link": "https://stackoverflow.com/users/3715059/user3715059"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1571146211, "creation_date": 1516645099, "last_edit_date": 1516788487, "question_id": 48387883, "link": "https://stackoverflow.com/questions/48387883/perl-regexp-optional-search-grouping", "title": "Perl RegExp optional search grouping", "body": "<p>Why doesn't this regexp fill the variable $1. And how can i make this possible?</p>\n\n<pre><code>my $txt = \"abc def ghi jkl mnop\";\n$txt =~ /(def)?/;\n</code></pre>\n\n<p>$1 is undef</p>\n\n<pre><code>my $txt = \"abc def ghi jkl mnop\";\n$txt =~ /(abc)?/;\n</code></pre>\n\n<p>This works instead.</p>\n\n<p>It only works as soon as a non-optional part exists, like \"\\s(def)?\" but this not hit the first part.</p>\n\n<p>The Thing ist that i need a regexp which Returns Always true and fill $1 aso.</p>\n\n<p>EDIT:\nThank you very much for your support. I'll give you a deeper insight into the problem.</p>\n\n<p>In my code, $txt and the RegExp are user input. It should be given the possibility that individual words or pairs are picked out, however, regardless of the order.</p>\n\n<p>My idea was to split the RegExp into order independent parts and then test each one for themselves.</p>\n\n<p>example</p>\n\n<pre><code>  /(ghi) jkl (def)? (ABC)?/\n</code></pre>\n\n<p>Should be successful. So after splitting them into parts, and then several tests.</p>\n\n<pre><code>  /(ghi) jkl/ &amp;&amp; /(def)?/ &amp;&amp; /(abc)?/\n</code></pre>\n\n<p>For each test, the particular scalars are added to an array. For this reason (order independence), it was natural that this completely optional RegExp arise.\nPlease excuse my english.</p>\n"}, {"tags": ["perl", "factorization"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 8, "last_activity_date": 1516636609, "last_edit_date": 1516636609, "creation_date": 1516636225, "answer_id": 48385447, "question_id": 48385285, "link": "https://stackoverflow.com/questions/48385285/how-to-factorize-two-lists/48385447#48385447", "title": "how to factorize two lists", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"noreferrer\"><code>map</code></a> to make it more <em>Perlish</em>.</p>\n\n<pre><code>my @list_a = qw( a b c );\nmy @list_b = qw( d e f );\nmy @list_c = map {\n    my $temporary = $_;\n    map { $temporary . $_ } @list_b\n} @list_a;\n</code></pre>\n\n<p>This results in the same <code>@list_c</code> you had above.</p>\n\n<p>We need the <code>$temporary</code> variable because both <code>map</code>s will set the topic <code>$_</code>, and the inner <code>map</code> would override the outer topic, so we have to save it in another lexical.</p>\n\n<p>Note that I renamed your variables and used <code>qw()</code>, since you asked for <em>Perlish</em>. The common consensus on style in Perl is to use snake case variable names. Despite camel case being named after our camel, we don't use it for variables. Only for package names.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1516636319, "creation_date": 1516636319, "answer_id": 48385476, "question_id": 48385285, "link": "https://stackoverflow.com/questions/48385285/how-to-factorize-two-lists/48385476#48385476", "title": "how to factorize two lists", "body": "<p>Solution for arbitrary number of lists:</p>\n\n<pre><code>use Algorithm::Loops qw( NestedLoops );\n\nmy @arrays = (\n   [qw( a b c )],\n   [qw( d e f )],\n   ...\n);\n\nmy @result;\nNestedLoops(\\@arrays, sub { push @result, join(\"\", @_); });\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @result;\nmy $iter = NestedLoops(\\@arrays);\nwhile (my @comb = $iter-&gt;()) {\n   push @result, join(\"\", @comb);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2000, "user_id": 1275160, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0e59227edde0173c28ade664aac101ec?s=128&d=identicon&r=PG", "display_name": "Diab Jerius", "link": "https://stackoverflow.com/users/1275160/diab-jerius"}, "is_accepted": false, "score": 1, "last_activity_date": 1516641522, "creation_date": 1516641522, "answer_id": 48386955, "question_id": 48385285, "link": "https://stackoverflow.com/questions/48385285/how-to-factorize-two-lists/48386955#48386955", "title": "how to factorize two lists", "body": "<p>Other alternative <a href=\"https://metacpan.org\" rel=\"nofollow noreferrer\">CPAN</a> modules are:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Set::Product\" rel=\"nofollow noreferrer\">Set::Product</a></li>\n<li><a href=\"https://metacpan.org/pod/Set::CrossProduct\" rel=\"nofollow noreferrer\">Set::CrossProduct</a></li>\n<li><a href=\"https://metacpan.org/pod/Set::CartesianProduct::Lazy\" rel=\"nofollow noreferrer\">Set::CartesianProduct::Lazy</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1516656289, "post_id": 48388222, "comment_id": 83768889, "body": "<code>@$_</code> should be <code>map quotemeta, @$_</code> to handle special characters, but otherwise nice. It even handles an arbitrary number of lists."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 4, "last_activity_date": 1516672103, "last_edit_date": 1516672103, "creation_date": 1516646399, "answer_id": 48388222, "question_id": 48385285, "link": "https://stackoverflow.com/questions/48385285/how-to-factorize-two-lists/48388222#48388222", "title": "how to factorize two lists", "body": "<pre><code>@listC = glob join '', map '{' . join(',', map quotemeta, @$_) . '}', \\@listA, \\@listB;\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 48385476, "answer_count": 4, "score": 1, "last_activity_date": 1516672103, "creation_date": 1516635787, "question_id": 48385285, "link": "https://stackoverflow.com/questions/48385285/how-to-factorize-two-lists", "title": "how to factorize two lists", "body": "<p>is there a way to factorize some lists easily in perl?</p>\n\n<p>For example with 2 lists <code>('a', 'b', 'c')</code> and <code>('d', 'e', 'f')</code>\nI want the output <code>('ad', 'ae', 'af' .... 'ce', 'cf')</code></p>\n\n<p>for now i'm doing </p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @listA = ('a', 'b', 'c');\nmy @listB = ('d', 'e', 'f');\nmy @listC = ();\n\nforeach my $elementA (@listA)\n{\n    foreach my $elementB (@listB)\n    {\n        push(@listC, $elementA.$elementB);\n    }\n}\n</code></pre>\n\n<p>This works fine, but I would like to know if there is a more \"perlish\" way to do so?</p>\n\n<p>thanks :)</p>\n"}, {"tags": ["perl", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1516690574, "post_id": 48384831, "comment_id": 83779161, "body": "Nice answer! The last example was quite interesting.. I knew that arguments to a <code>sub</code> is always passed by reference in Perl, but it didn&#39;t occur to me it also applied to <code>grep</code> when called as part of an argument list!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 10, "last_activity_date": 1516643424, "last_edit_date": 1516643424, "creation_date": 1516634325, "answer_id": 48384831, "question_id": 48384733, "link": "https://stackoverflow.com/questions/48384733/perl-sorting-array-leave-an-item-starts-with-in-place/48384831#48384831", "title": "perl sorting array: leave an item starts with # in-place", "body": "<p>In-place solutions:</p>\n\n<pre><code>my @indexes_to_sort = grep { $array[$_] !~ /^#/ } 0..$#array;\nmy @sorted_indexes = sort { $array[$a] cmp $array[$b] } @indexes_to_sort;\n@array[@indexes_to_sort] = @array[@sorted_indexes];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @indexes_to_sort = grep { $array[$_] !~ /^#/ } 0..$#array;\n@array[@indexes_to_sort] = sort @array[@indexes_to_sort];\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my $slice = sub { \\@_ }-&gt;( grep { !/^#/ } @array );\n@$slice[0..$#$slice] = sort @$slice;\n</code></pre>\n\n<p>(Unfortunately, <code>@$slice = sort @$slice;</code> doesn't work &mdash;It replaces the elements of <code>@$slice</code> rather than assigning to them&mdash; but a suitable alternative was found.)</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516635940, "post_id": 48384887, "comment_id": 83757875, "body": "Your solution doesn&#39;t require the sort to be in-place like mine do."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": false, "score": 5, "last_activity_date": 1516634501, "creation_date": 1516634501, "answer_id": 48384887, "question_id": 48384733, "link": "https://stackoverflow.com/questions/48384733/perl-sorting-array-leave-an-item-starts-with-in-place/48384887#48384887", "title": "perl sorting array: leave an item starts with # in-place", "body": "<p>Extract the elements to be sorted, then update the original array with the sorted elements:</p>\n\n<pre><code>my @stooges = qw( Larry #Curly Moe Iggy );\nmy @sorted_items = sort grep { not /^#/ } @stooges;\nmy @sorted_stooges = map { /^#/ ? $_ : shift @sorted_items } @stooges;\nsay for @sorted_stooges;\n</code></pre>\n\n<p>In their answer, @ikegami suggests a variant of this approach where the indexes of the elements to be sorted are extracted, rather than the elements themselves. That solution allows the array elements to be exchanged elegantly with a list slice.</p>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 48384831, "answer_count": 2, "score": 4, "last_activity_date": 1516643424, "creation_date": 1516634034, "question_id": 48384733, "link": "https://stackoverflow.com/questions/48384733/perl-sorting-array-leave-an-item-starts-with-in-place", "title": "perl sorting array: leave an item starts with # in-place", "body": "<p>Is there a way to modify sort that any string starts with # is ignored i.e. keep its index?</p>\n\n<p>For example:</p>\n\n<pre><code>my @stooges = qw(\n        Larry\n        Curly\n        Moe\n        Iggy\n    );\n\nmy @sorted_stooges = sort @stooges;\n</code></pre>\n\n<p><code>@sorted_stooges</code> should give:</p>\n\n<pre><code>Curly\nIggy\nLarry\nMoe\n</code></pre>\n\n<p>Now, if i add # to Curly</p>\n\n<pre><code>my @stooges = qw(\n            Larry\n            #Curly\n            Moe\n            Iggy\n        );\n\nmy @sorted_stooges = sort @stooges;\n</code></pre>\n\n<p>i would like @sorted_stooges to be:</p>\n\n<pre><code>Iggy\n#Curly\nLarry\nMoe\n</code></pre>\n"}, {"tags": ["postgresql", "perl", "plperl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1516625061, "post_id": 48381663, "comment_id": 83750395, "body": "As a hint - if you <code>print Dumper \\%ENV</code> then you will get a list of key-value pairs, rather than a big blob."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516625118, "post_id": 48381663, "comment_id": 83750430, "body": "Where&#39;s the trigger being called from? <code>HOME</code> may be defined in terminal, but it doesn&#39;t seem to be there in your environment, and that implies that it&#39;s not being inherited by the perl process."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1516625971, "post_id": 48381663, "comment_id": 83751001, "body": "Would imagine you&#39;d need to pass in such things as the database server won&#39;t have access to them otherwise"}, {"owner": {"reputation": 222, "user_id": 6265747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f4f310cf0e2c351807a21290825e7c?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca", "link": "https://stackoverflow.com/users/6265747/bianca"}, "edited": false, "score": 0, "creation_date": 1516626126, "post_id": 48381663, "comment_id": 83751089, "body": "Do you know how I could pass them to postgres? I set an ENV variable to denote the name of another database I need to get data from, but now I&#39;m not sure that getting that value is possible"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1516650073, "post_id": 48381663, "comment_id": 83765817, "body": "Plain and simple, server has no idea about client environment. You can write to some table first and have a trigger to read from it."}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 3240659, "user_type": "registered", "profile_image": "https://graph.facebook.com/565306868/picture?type=large", "display_name": "nickcrabtree", "link": "https://stackoverflow.com/users/3240659/nickcrabtree"}, "is_accepted": false, "score": 0, "last_activity_date": 1516650632, "last_edit_date": 1516650632, "creation_date": 1516650067, "answer_id": 48389088, "question_id": 48381663, "link": "https://stackoverflow.com/questions/48381663/pl-perl-trigger-cannot-use-env-variables-defined-in-bashrc/48389088#48389088", "title": "PL/Perl trigger cannot use ENV variables defined in .bashrc", "body": "<p>Although you are correctly calling the untrusted plperlu variant of PL/Perl, the initial environment is still the same restricted environment as for the normal \"trusted\" PL/Perl.</p>\n\n<p>One solution would be to run a sub-shell which will then initialise its environment. Something like:</p>\n\n<pre><code>my $home = `bash -lc \"echo \\$HOME\"`;\n</code></pre>\n\n<p>You may need to tweak the arguments to bash to get what you want. The above command explicitly runs bash as I'm not sure what default shell you are going to have, and you mentioned your .bashrc so the -l might be needed to ensure that gets read.</p>\n\n<p>You could also explicitly read the information you want from an arbitrary text file on the system, which might be easier than messing with environment variables.</p>\n"}], "owner": {"reputation": 222, "user_id": 6265747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f4f310cf0e2c351807a21290825e7c?s=128&d=identicon&r=PG&f=1", "display_name": "Bianca", "link": "https://stackoverflow.com/users/6265747/bianca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516650632, "creation_date": 1516624158, "question_id": 48381663, "link": "https://stackoverflow.com/questions/48381663/pl-perl-trigger-cannot-use-env-variables-defined-in-bashrc", "title": "PL/Perl trigger cannot use ENV variables defined in .bashrc", "body": "<p>I'm trying to use an environment variable (for example HOME) inside a PL/perl trigger in postgresql and it appears to be empty.</p>\n\n<p>Running <code>printenv | grep HOME</code> in the terminal returns the desired path. </p>\n\n<p>I am defining the trigger as</p>\n\n<pre><code>CREATE EXTENSION IF NOT EXISTS plperlu;\n\nCREATE OR REPLACE FUNCTION update_solved() RETURNS trigger AS $update_solved$\n  elog(NOTICE, \"Hello\");\n  elog(NOTICE, $ENV{'HOME'});\n\n  return;\n$update_solved$ LANGUAGE plperlu;\n</code></pre>\n\n<p>When a query activates the trigger, I get the output</p>\n\n<pre><code>NOTICE:  Hello\nNOTICE: \n</code></pre>\n\n<p>I checked what %ENV contains inside the script(using <code>use Data::Dumper;\n  elog(NOTICE, Dumper(%ENV));</code>:</p>\n\n<pre><code>$VAR1 = 'LANG';\n$VAR2 = 'en_US.UTF-8';\n$VAR3 = 'LC_TIME';\n$VAR4 = 'C';\n$VAR5 = 'LC_MONETARY';\n$VAR6 = 'C';\n$VAR7 = 'PGSYSCONFDIR';\n$VAR8 = '/etc/postgresql-common';\n$VAR9 = 'PG_GRANDPARENT_PID';\n$VAR10 = '513';\n$VAR11 = 'PGLOCALEDIR';\n$VAR12 = '/usr/share/locale';\n$VAR13 = 'LC_CTYPE';\n$VAR14 = 'en_US.UTF-8';\n$VAR15 = 'LC_COLLATE';\n$VAR16 = 'en_US.UTF-8';\n$VAR17 = 'PGDATA';\n$VAR18 = '/var/lib/postgresql/9.6/main';\n$VAR19 = 'LC_MESSAGES';\n$VAR20 = 'en_US.UTF-8';\n$VAR21 = 'LC_NUMERIC';\n$VAR22 = 'C';\n$VAR23 = 'PWD';\n$VAR24 = '/var/lib/postgresql';\n$VAR25 = 'PG_OOM_ADJUST_FILE';\n$VAR26 = '/proc/self/oom_score_adj';\n</code></pre>\n\n<p>Do you know how I can set the env variables that I need that are defined in the terminal session, to be used inside the PL/perl trigger?  </p>\n"}, {"tags": ["excel", "perl", "xml-parsing"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516633422, "post_id": 48381551, "comment_id": 83756088, "body": "If you actually did need to match multiple namespaces, you&#39;d register two different prefixes with <code>registerNs</code>. Remember, the prefix registered with <code>registerNs</code> and used in the XPath has no relation to the prefix used in the XML (if any)."}], "answers": [{"comments": [{"owner": {"reputation": 232, "user_id": 1872462, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0a64aad76b5ad5ac08e5015a04e19275?s=128&d=identicon&r=PG", "display_name": "geofrey rainey", "link": "https://stackoverflow.com/users/1872462/geofrey-rainey"}, "edited": false, "score": 0, "creation_date": 1516652242, "post_id": 48382422, "comment_id": 83766848, "body": "Thank you. How would it differ if the Namespaces were not identical?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 232, "user_id": 1872462, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0a64aad76b5ad5ac08e5015a04e19275?s=128&d=identicon&r=PG", "display_name": "geofrey rainey", "link": "https://stackoverflow.com/users/1872462/geofrey-rainey"}, "edited": false, "score": 0, "creation_date": 1516652331, "post_id": 48382422, "comment_id": 83766891, "body": "@geofrey: Then you&#39;d have to register a second prefix for the new namespace. The only difference is that a namespace prefix may not be blank in XPath."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1516626832, "creation_date": 1516626832, "answer_id": 48382422, "question_id": 48381551, "link": "https://stackoverflow.com/questions/48381551/xmllibxml-matching-with-multiple-namespaces/48382422#48382422", "title": "XML::LibXML matching with multiple namespaces", "body": "<p>The default name space and <code>ss</code> are identical, so this will work</p>\n\n<pre><code>$xpc-&gt;findnodes('/ss:Worksheet/@ss:Name')\n</code></pre>\n"}], "owner": {"reputation": 232, "user_id": 1872462, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0a64aad76b5ad5ac08e5015a04e19275?s=128&d=identicon&r=PG", "display_name": "geofrey rainey", "link": "https://stackoverflow.com/users/1872462/geofrey-rainey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 48382422, "answer_count": 1, "score": 1, "last_activity_date": 1516626970, "creation_date": 1516623818, "last_edit_date": 1516626970, "question_id": 48381551, "link": "https://stackoverflow.com/questions/48381551/xmllibxml-matching-with-multiple-namespaces", "title": "XML::LibXML matching with multiple namespaces", "body": "<p>I have an example.xml file containing the following:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;?mso-application progid=\"Excel.Sheet\"?&gt;\n&lt;Workbook xmlns=\"urn:schemas-microsoft-com:office:spreadsheet\"\nxmlns:ss=\"urn:schemas-microsoft-com:office:spreadsheet\"&gt;\n&lt;Worksheet ss:Name=\"Master Sheet\"&gt;\n&lt;/Worksheet&gt;\n&lt;/Workbook&gt;\n</code></pre>\n\n<p>And I have the following Perl code to parse that file:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse XML::LibXML;\nmy $filename = 'example.xml';\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $filename);\nmy $xpc = XML::LibXML::XPathContext-&gt;new($dom);\n$xpc-&gt;registerNs('ss', 'urn:schemas-microsoft-com:office:spreadsheet');\nmy $match1 = $xpc-&gt;findnodes('//Worksheet/ss:Name');\nprint \"XPath $match1\\n\";\n</code></pre>\n\n<p>I have tried many variations of the argument to extract the string \"Master Sheet\", but to no avail. Can someone please advise?</p>\n"}, {"tags": ["c", "performance", "perl", "vector", "malloc"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516622896, "post_id": 48380943, "comment_id": 83748998, "body": "@GerhardBarnhard: Please don&#39;t remove useful tags from questions"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1516623461, "post_id": 48380943, "comment_id": 83749346, "body": "It sounds like you are making wild guesses about Perl internals. Perl doesn&#39;t use linked lists at all. Have you profiled your program and found array access to be a bottleneck? I very much doubt it."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516623998, "post_id": 48380943, "comment_id": 83749684, "body": "So... Are there implementations of pre-allocated static arrays for Perl? I.e. arrays without ANY dynamic logic, strong boundaries checking and with standard indexed access methods?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516624501, "post_id": 48380943, "comment_id": 83750028, "body": "I would be very surprised if you need them. You certainly haven&#39;t shown any evidence that backs up your idea. Do you have any rational reason to pick on array access?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516648170, "post_id": 48380943, "comment_id": 83764946, "body": "Re &quot;<i>I know that traditional &quot;lists&quot; in Perl implemented internally exactly as a real double-linked lists.</i>&quot;, This is completely wrong. When we say a sub returns a list, it simply pushes a number of scalars on the stack (which is an array of array, not a linked list)."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516702482, "post_id": 48380943, "comment_id": 83785984, "body": "I understand, thank you. I was fooled by one &quot;forums perl guru&quot;. I am very sorry for my stupid not verified assumptions :("}], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516622928, "post_id": 48381110, "comment_id": 83749016, "body": "If perl arrays uses contiguos memory region - how works push&#39;ing and splice&#39;ing (removing elements from the middle) ot them? For example, if an array was created with 4K memory allocation and now it grows to 4000 bytes - how can we push, say, 200 bytes to that array?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516623103, "post_id": 48381110, "comment_id": 83749125, "body": "@drvtiny It works just like vectors in  C++ or ArrayLists in Java: when the capacity is exceeded, new storage is allocated and the elements copied over. When an element is removed from the middle, the remaining elements are copied to a new location. The array should be though of as having four pointers: storage start &lt;= contents_start &lt;= contents_end &lt;= storage end."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516623224, "post_id": 48381110, "comment_id": 83749198, "body": "Strings is also dynamic structures: does perl will re-allocate another memory region and copies all string content to that new region on every expanding above the previously alocated chunk (mem region) size? And what is the default value for this default size?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516623300, "post_id": 48381110, "comment_id": 83749245, "body": "@drvtiny: <i>&quot;how can we push, say, 200 bytes to that array?&quot;</i> You can work with bytes only by using Perl strings, which have an allowance of space beyond the end where a string can expand. If you run out of space altogether then the string is copied to a new, bigger area of memory before extending it. Why do you want to know this?"}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516623425, "post_id": 48381110, "comment_id": 83749327, "body": "@drvtiny Yes, strings use the same approach. When the storage is resized it&#39;s typically doubled to the nearest power of two (i.e. exponentially). Because more storage is allocated than immediately needed, not every push/append will cause allocations and copies. In fact, this has provably O(1) amortized complexity. This is discussed thoroughly in <a href=\"https://en.wikipedia.org/wiki/Dynamic_array\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dynamic_array</a>"}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516623681, "post_id": 48381110, "comment_id": 83749477, "body": "I was in doubt, whether using of fixed-size lists in Perl will lead to better peformance because of avoiding memory-reallocations. So... amon&#39;s answer as i can understand it is &quot;yes, it is very good to use static-sized vectors and not to use splice/push without strong necessity&quot;."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516623918, "post_id": 48381110, "comment_id": 83749625, "body": "@drvtiny Splicing in the <i>middle</i> causes all elements on the right to be shifted around. Splicing at the end or pushing is totally fine. You are not likely to write Perl programs where the cost of array resizing will have a measurable impact."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516624154, "post_id": 48381110, "comment_id": 83749801, "body": "&gt;You are not likely to write Perl programs where the cost of array resizing will have a measurable impact Why do you think so? :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 1, "creation_date": 1516628295, "post_id": 48381110, "comment_id": 83752437, "body": "@drvtiny: I would agree, because I have never found a Perl application where the speed of array manipulation was an issue. You don&#39;t say anything about your application, but you seem to be making random guesses. Originally you wanted a way of avoiding a linked list implementation because it would slow down random access; now you are saying you want mid-array <code>splice</code> operations to work fast as well. I am sure you have just read about this neat thing and want to implement it to make everyone to think you&#39;re really clever."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516628316, "post_id": 48381110, "comment_id": 83752457, "body": "@drvtiny: I have good news: the most clever thing is to accept the advice of the Perl specialists that you&#39;ve asked for."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516629168, "post_id": 48381110, "comment_id": 83753027, "body": "Sorry, Borodin, but you make absolutely false assumptions. I dont make applications (ok, i do it, but very rarely), i write libraries to be used by other applications. This is a part my work and my hobby too. I think universal API/libraries must be pre-optimized. If this is a package implementing circle/ring buffer - with the fixed size and possibility to remove mid-elements from it - i think, it can be implemented with simplest StaticArray&#39;s, and its a pitty that there are no such datastructures in Perl."}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 2, "creation_date": 1516638972, "post_id": 48381110, "comment_id": 83759910, "body": "@drvtiny Rules of optimization: 1) Don&#39;t. 2) Don&#39;t yet. 3) Profile first. It&#39;s possible that you need to worry about how perl implements arrays but it&#39;s <i>highly</i> unlikely that you do. (If it really does matter for your particular task you should probably be writing XS code rather than pure Perl.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516648804, "post_id": 48381110, "comment_id": 83765218, "body": "@drvtiny, Re &quot;<i>If perl arrays uses contiguos memory region - how works push&#39;ing and splice&#39;ing (removing elements from the middle) ot them?</i>&quot;, Removing elements from the middle requires shifting all preceding or following elements. Not efficient. /// Removing elements from the start is done by incrementing an offset, incrementing the pointer to the array buffer, decrementing the number of elements allocated, and decrementing the number of elements in the array. Very efficient. /// Removing elements at from the end is done by decrementing the number of elements in the array. Very efficient."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 0, "creation_date": 1516649208, "post_id": 48381110, "comment_id": 83765407, "body": "@drvtiny, Re &quot;<i>how can we push, say, 200 bytes to that array?</i>&quot;, In C, an array is simply a reference to a memory area. In Perl, it&#39;s more like an object that contains a pointer to memory area. It also has things such as the number of elements allocated, and the total number of elements used. When more space is needed, the array buffer is re-allocated, usually with extra space to reduce the need for future re-allocations. Only the pointer to the array buffer may change in a re-allocation, not the pointer to the array &quot;object&quot;, so references to the array aren&#39;t invalidated."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "edited": false, "score": 2, "creation_date": 1516649845, "post_id": 48381110, "comment_id": 83765707, "body": "@drvtiny, Re &quot;<i>Why do you think [I am not likely to write Perl programs where the cost of array resizing will have a measurable impact]? :)</i>&quot;, Because we&#39;ve never heard of a program where it does. Because pushing is amortized O(1). [It&#39;s O(N) to push N]. Because it&#39;s cheap compared to sub calls. etc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516649848, "post_id": 48381110, "comment_id": 83765710, "body": "@amon, Re &quot;<i>Splicing in the middle causes all elements on the right to be shifted around.</i>&quot;, Perl will shift the elements on the left if there are fewer of those."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 4, "last_activity_date": 1516622338, "creation_date": 1516622338, "answer_id": 48381110, "question_id": 48380943, "link": "https://stackoverflow.com/questions/48380943/are-there-real-vectors-one-dimensional-arrays-in-perl/48381110#48381110", "title": "Are there real vectors (one-dimensional arrays) in Perl?", "body": "<p>Perl's arrays (<code>@array</code> variables or <code>[...]</code> references) do use a contiguous memory region. They are not linked lists. However, these arrays only hold pointers to the scalar values, not the values themselves. This is a necessary restriction of the Perl data model.</p>\n\n<p>If you know C++, a Perl array can be thought of as similar to a <code>std::vector&lt;Scalar*&gt;</code>, except that Perl's arrays can push and pop at the front and the back.</p>\n\n<p>To resize a Perl array, you can assign the last index. E.g. to pre-allocate 50 elements:</p>\n\n<pre><code>my @array;\n$#array = 50 - 1;\n</code></pre>\n\n<p>If you need compact data storage within Perl, then you will have to use strings. Given a fixed-size record, you can get and set one record with <code>substr</code>, and <code>pack</code>/<code>unpack</code> the data from and to Perl data structures.</p>\n"}, {"tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": false, "score": 2, "last_activity_date": 1516640083, "last_edit_date": 1516640083, "creation_date": 1516639637, "answer_id": 48386464, "question_id": 48380943, "link": "https://stackoverflow.com/questions/48380943/are-there-real-vectors-one-dimensional-arrays-in-perl/48386464#48386464", "title": "Are there real vectors (one-dimensional arrays) in Perl?", "body": "<p>You can use the <code>vec</code> function to use a string as a vector. For example, you could pack Boolean values into individual bits.</p>\n\n<blockquote>\n  <p>vec EXPR,OFFSET,BITS</p>\n  \n  <p>Treats the string in EXPR as a bit vector made up of elements of\n  width BITS and returns the value of the element specified by\n  OFFSET as an unsigned integer. BITS therefore specifies the\n  number of bits that are reserved for each element in the bit\n  vector. This must be a power of two from 1 to 32 (or 64, if your\n  platform supports that).</p>\n</blockquote>\n\n<p>That said, your concern about array access being \"slow\" is unwarranted and your beliefs about perl's internals is incorrect. Array performance is likely to be fast enough. Don't try to \"optimize\" around it until you've profiled your code and proven that its a bottleneck.</p>\n"}], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 48381110, "answer_count": 2, "score": -1, "last_activity_date": 1516640083, "creation_date": 1516621805, "last_edit_date": 1516622843, "question_id": 48380943, "link": "https://stackoverflow.com/questions/48380943/are-there-real-vectors-one-dimensional-arrays-in-perl", "title": "Are there real vectors (one-dimensional arrays) in Perl?", "body": "<p>I know that traditional \"lists\" in Perl implemented internally exactly as a real double-linked lists. So indexed access to the list elements is slow. This is a cost of dynamic nature of lists, which can be sliced, expanded, shrinked.</p>\n\n<p>But for performance reasons it will be very good to have possibility to malloc() some memory chunk and create vector of static size and predefined size of its elements: for example, fixed-size double-linked list may be represented as a sequence of elements which size will be 4(prev_v_index) + 4(next_v_index) + 8(data_ptr aka REF) = 16 bytes. So we can access every element of this vector as we usually do it in compiled languages like C: elem_ptr=vector_ptr+(index*elem_size) - access to elements will be very fast with some architecure-specific alignment (8 bytes for x86_64).</p>\n\n<p>Maybe there is already some XS module for manipulating with the fixed-vectors in Perl5?</p>\n"}, {"tags": ["excel", "perl", "xml-parsing"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1516620584, "creation_date": 1516620584, "answer_id": 48380576, "question_id": 48379738, "link": "https://stackoverflow.com/questions/48379738/xmllibxml-with-default-namespaces/48380576#48380576", "title": "XML::LibXML with default namespaces", "body": "<p>There are two things you need to know here</p>\n\n<ul>\n<li><p>The namespace prefix used in the XML does not need to match any prefixes used in XPath queries; only the corresponding URN needs to be the same</p></li>\n<li><p>There is no way to define a \"default\" namespace within XPath</p></li>\n</ul>\n\n<p>That means the namespace declared in the XML without a prefix must be given a prefix in XPath expressions</p>\n\n<p>This code looks correct, but I am not in a position to test it at present. Please make sure to <em>always</em> <code>use strict</code> and <code>use warnings 'all'</code> at the top of every Perl program you write</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::LibXML;\n\nmy $filename = 'example.xml';\n\nmy $dom = XML::LibXML-&gt;load_xml( location =&gt; $filename );\nmy $xpc = XML::LibXML::XPathContext-&gt;new( $dom );\n$xpc-&gt;registerNs( mss =&gt; 'urn:schemas-microsoft-com:office:spreadsheet' );\nmy $match1 = $xpc-&gt;findnodes('//mss:id');\n\nprint \"XPath $match1\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 232, "user_id": 1872462, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0a64aad76b5ad5ac08e5015a04e19275?s=128&d=identicon&r=PG", "display_name": "geofrey rainey", "link": "https://stackoverflow.com/users/1872462/geofrey-rainey"}, "edited": false, "score": 0, "creation_date": 1516622919, "post_id": 48380604, "comment_id": 83749004, "body": "I have another question pertaining to namespaces that I am trying to solve that you might also be able to help with. Should I create another question for that?"}], "tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": true, "score": 1, "last_activity_date": 1516620647, "creation_date": 1516620647, "answer_id": 48380604, "question_id": 48379738, "link": "https://stackoverflow.com/questions/48379738/xmllibxml-with-default-namespaces/48380604#48380604", "title": "XML::LibXML with default namespaces", "body": "<p>You need to register the namespace.</p>\n\n<pre><code>my $xml = q[&lt;?xml version=\"1.0\"?&gt;\n&lt;Workbook xmlns='urn:schemas-microsoft-com:office:spreadsheet'&gt;\n    &lt;id&gt;test&lt;/id&gt;\n&lt;/Workbook&gt;];\n\nuse XML::LibXML;\n\nmy $filename = 'example.xml';\n\nmy $dom = XML::LibXML-&gt;load_xml( string =&gt; $xml );\nmy $xpc = XML::LibXML::XPathContext-&gt;new($dom);\n$xpc-&gt;registerNs('x', 'urn:schemas-microsoft-com:office:spreadsheet');\nmy $match1 = $xpc-&gt;findnodes('//x:id');\n\nprint \"XPath $match1\\n\";\n</code></pre>\n\n<p>Or you may use this if you do not want to registrer the namespace:</p>\n\n<pre><code>my $dom = XML::LibXML-&gt;load_xml( string =&gt; $xml );\nmy $xpc = XML::LibXML::XPathContext-&gt;new($dom);\n\nmy $match2 = $xpc-&gt;findnodes(\"//*[name()='id']\");\n\nprint \"XPath $match2\\n\";\n</code></pre>\n"}], "owner": {"reputation": 232, "user_id": 1872462, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0a64aad76b5ad5ac08e5015a04e19275?s=128&d=identicon&r=PG", "display_name": "geofrey rainey", "link": "https://stackoverflow.com/users/1872462/geofrey-rainey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 48380604, "answer_count": 2, "score": 1, "last_activity_date": 1516620647, "creation_date": 1516617917, "last_edit_date": 1592644375, "question_id": 48379738, "link": "https://stackoverflow.com/questions/48379738/xmllibxml-with-default-namespaces", "title": "XML::LibXML with default namespaces", "body": "<p>I have an XML file as follows</p>\n<h3>example.xml</h3>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;Workbook xmlns='urn:schemas-microsoft-com:office:spreadsheet'&gt;\n    &lt;id&gt;test&lt;/id&gt;\n&lt;/Workbook&gt;\n</code></pre>\n<p>The following code does not find the <code>id</code> tag value:</p>\n<pre><code>use XML::LibXML;\n\nmy $filename = 'example.xml';\n\nmy $dom = XML::LibXML-&gt;load_xml( location =&gt; $filename );\nmy $xpc = XML::LibXML::XPathContext-&gt;new($dom);\nmy $match1 = $xpc-&gt;findnodes('//id');\n\nprint &quot;XPath $match1\\n&quot;;\n</code></pre>\n<p>But if I remove the default namespace definition and replace it with this line:</p>\n<pre><code>&lt;Workbook&gt;\n</code></pre>\n<p>Then it works.</p>\n<p>How do read the tags with the default namespace defined?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1516617514, "post_id": 48379583, "comment_id": 83745766, "body": "SO is not a &quot;write code for me&quot; plattform"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1516618426, "post_id": 48379583, "comment_id": 83746272, "body": "Start by showing us the code you&#39;ve written for this so far"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516620906, "post_id": 48379583, "comment_id": 83747741, "body": "What is writing these files?"}, {"owner": {"reputation": 15, "user_id": 1857016, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/09479f2f87cf5252c3b0c9b60635ab51?s=128&d=identicon&r=PG", "display_name": "user1857016", "link": "https://stackoverflow.com/users/1857016/user1857016"}, "edited": false, "score": 0, "creation_date": 1516621737, "post_id": 48379583, "comment_id": 83748245, "body": "Another system is writing big audio and video files on-the-fly to the folder and these need move another place as soon as possible."}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 3240659, "user_type": "registered", "profile_image": "https://graph.facebook.com/565306868/picture?type=large", "display_name": "nickcrabtree", "link": "https://stackoverflow.com/users/3240659/nickcrabtree"}, "is_accepted": true, "score": 0, "last_activity_date": 1516623460, "creation_date": 1516623460, "answer_id": 48381450, "question_id": 48379583, "link": "https://stackoverflow.com/questions/48379583/why-doesnt-this-perl-code-notice-new-files-added-to-directory-during-execution/48381450#48381450", "title": "Why doesn&#39;t this perl code notice new files added to directory during execution?", "body": "<p>readdir() only iterates through the files which were present when the directory was opened with the opendir() call. You need to call opendir() within the outer while loop. A code example from <a href=\"http://www.perlmonks.org/?node_id=1113829\" rel=\"nofollow noreferrer\">perlmonks</a>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile (opendir my $dirh, \"/somewhere/else\")\n{\n    while (my $file = readdir $dirh)\n    {\n        print \"$file\\n\";\n    }\n    sleep 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1857016, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/09479f2f87cf5252c3b0c9b60635ab51?s=128&d=identicon&r=PG", "display_name": "user1857016", "link": "https://stackoverflow.com/users/1857016/user1857016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 48381450, "answer_count": 1, "score": -3, "last_activity_date": 1517558778, "creation_date": 1516617423, "last_edit_date": 1517558778, "question_id": 48379583, "link": "https://stackoverflow.com/questions/48379583/why-doesnt-this-perl-code-notice-new-files-added-to-directory-during-execution", "title": "Why doesn&#39;t this perl code notice new files added to directory during execution?", "body": "<p>I need to write a Perl program where I have a bunch of files which are written to local disk. I have to monitor them, and after any file is no longer increasing in size, use SFTP to transfer it to another location.</p>\n\n<p>So something like this:</p>\n\n<ol>\n<li><p>Check all the files one by one that are coming to drop folder</p></li>\n<li><p>If file is still growing, then move to next file</p></li>\n<li><p>If file is not growing anymore, then use SFTP to move it another location</p></li>\n<li><p>Loop back to number 1. </p></li>\n</ol>\n\n<hr>\n\n<p>This is what I try to get work in Win first before moving it to Linux. Problem is, that this runs only one time good, not looping --> if new files are added  during run time, those files are untouchables ...</p>\n\n<p>` </p>\n\n<pre><code> while (1) {\n\n  while (my $filename = readdir(DIR) ) {\n   print $filename , \"\\n\";\n   my $size1 = -s $filename;\n   print \"$size1\\n\";\n   sleep 2;\n   my $size2 = -s $filename;\n   print \"$size2\\n\";\n\n      if ($size1 == $size2) {\n      move($filename,\"c:/temp/perl/out\");\n }\n\n}\n</code></pre>\n"}, {"tags": ["perl", "phantomjs"], "answers": [{"comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 0, "creation_date": 1516625836, "post_id": 48381168, "comment_id": 83750903, "body": "Can you explain why should not pass it as a argument?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1516626586, "post_id": 48381168, "comment_id": 83751396, "body": "Because the value of the hash key is hidden in the code, and you shouldn&#39;t assume any particular implementation of the interface. The documentation is particularly poor, and the <code>phantomjs_args</code> method isn&#39;t documented either, but it&#39;s clear from the code that it&#39;s supposed to be an accessor method. Note also that the <code>phantomjs</code> option doesn&#39;t need to be set, as <code>&#39;phantomjs&#39;</code> is the default."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1516626581, "last_edit_date": 1516626581, "creation_date": 1516622526, "answer_id": 48381168, "question_id": 48378822, "link": "https://stackoverflow.com/questions/48378822/how-to-include-ssl-protocol-any-in-wight/48381168#48381168", "title": "How to include `--ssl-protocol=any` in Wight?", "body": "<p>The correct way to do this is to call <code>phantomjs_args</code> on the new object, like this</p>\n\n<pre><code>my $wight = Wight-&gt;new;\n$wight-&gt;phantomjs_args( '--ssl-protocol=any' );\n</code></pre>\n"}], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 48381168, "answer_count": 1, "score": 0, "last_activity_date": 1516626581, "creation_date": 1516615102, "last_edit_date": 1516621665, "question_id": 48378822, "link": "https://stackoverflow.com/questions/48378822/how-to-include-ssl-protocol-any-in-wight", "title": "How to include `--ssl-protocol=any` in Wight?", "body": "<p>I'm trying to take screen shots of the web pages without using <code>Mechanize::Firefox</code>.</p>\n\n<p>I tried with the\n<a href=\"https://metacpan.org/pod/Wight\" rel=\"nofollow noreferrer\"><code>Wight</code></a>\nmodule, will communicate with PhantomJS.</p>\n\n<p>I'm able to take screen shots of <code>http:</code> sites but I can't take the screen shots for <code>https:</code> sites.</p>\n\n<p>I have searched it and found a solution here\n<a href=\"https://stackoverflow.com/questions/12021578/phantomjs-failing-to-open-https-site\"><em>PhantomJS  failing to open HTTPS site</em></a> which is to add a command-line option</p>\n\n<pre><code>phantomjs --ssl-protocol=any  test.js\n</code></pre>\n\n<p>But I'm running PhantomJS inside the <code>Wight</code> module and I don't know how to apply the <code>--ssl-protocol</code> inside the script</p>\n\n<p>This is what I have tried</p>\n\n<pre><code>use strict;\n\nuse Wight;\n\nmy %arg = ( phantomjs =&gt; 'phantomjs', protocal =&gt; '--ssl-protocol=any');\nmy $wight = Wight-&gt;new(%arg);\n\n$wight-&gt;visit('https:...');\n\n$wight-&gt;evaluate('document.title');\n$wight-&gt;render('anv.png');\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "reference"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516590206, "post_id": 48372997, "comment_id": 83735405, "body": "As for &quot;<i>Is that the recommended way of doing things?</i>&quot; -- if you want to pass them around a lot then that&#39;s likely the best way; if you have multiple multi-valued variables to pass, then you practically <i>have to</i> pass reference. A sub receives a mere list of scalars; an array argument is flattened into a list of its elements, a hash goes in as a list of key-values."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516590448, "post_id": 48372997, "comment_id": 83735446, "body": "With so much traffic of same/related data maybe you should write it all as a class instead."}], "answers": [{"comments": [{"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1516588343, "post_id": 48373852, "comment_id": 83735086, "body": "when I try @hash1{@list1} = @{$result2}; instead of the loop,  hash1{list1[1]} gets the value result2[0] and hash1{list[0]} gets the value result2[1]. how do they become swapped?"}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1516588560, "post_id": 48373852, "comment_id": 83735113, "body": "understood. I scrubbed my original code so it would be easier to read but I introduced syntax errors since I was just editing it on SO. Also I read about the switch statement here: <a href=\"https://perldoc.perl.org/5.8.9/Switch.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/5.8.9/Switch.html</a> I am using Perl 5.8"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1516588743, "post_id": 48373852, "comment_id": 83735137, "body": "@Seephor 5.8 was first released in 2002. Consider upgrading."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1516587400, "creation_date": 1516587400, "answer_id": 48373852, "question_id": 48372997, "link": "https://stackoverflow.com/questions/48372997/how-to-pass-around-references-and-nested-references-properly-in-perl/48373852#48373852", "title": "How to pass around references and nested references properly in Perl", "body": "<p>I'm going to annotate your code with my comments, i.e. I'm going to rewrite the <code># inline annotations</code> and add more exposition in plain text below.</p>\n\n<p>First off, you're missing</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>Every Perl file you write should start with this (or equivalent; e.g. <code>use Moose</code> enables this for you).</p>\n\n<pre><code># create normal array\nmy @list1 = qw(1 2 3); \n</code></pre>\n\n<p><code>@list1</code> is an array. The <code>qw(1 2 3)</code> part on the right-hand side is a list.</p>\n\n<pre><code># pass a reference to @list1 to sub1 and assign the return value of sub1 to $result1\nmy $result1 = sub1(\\@list1);\n</code></pre>\n\n<p>You were missing a <code>;</code> at the end of this statement. <code>$result1</code> is (a copy of) the return value of <code>sub1</code>, not a reference to it.</p>\n\n<pre><code># pass $result1 to sub2; $result2 is the return value of sub2\nmy $result2 = sub2($result1);\n</code></pre>\n\n<p>(See above.)</p>\n\n<pre><code>my %hash1;\n\n# iterate over the indices of @list1. $#list1 is the last index of @list1.\n# Initialize %hash1 with keys taken from @list1 and corresponding values from @{$result2}.\n\nfor my $i (0 .. $#list1) {\n  $hash1{$list1[$i]} = @{$result2}[$i];  \n}\n</code></pre>\n\n<p><code>$#list1</code> doesn't dereference anything; <code>@list1</code> is not a reference.</p>\n\n<p><code>@{$result2}[$i]</code> is technically a list slice. Just as you're using <code>$list1[$i]</code> to get a single element from an array, you should use <code>${$result2}[$i]</code> to get a single element from an array reference. The <code>@</code> happens to work here (the list slice only contains a single element), but it's better to request a scalar if that's what you want.</p>\n\n<p>Also, idiomatic Perl would be <code>$result2-&gt;[$i]</code> to get a single element from an array reference.</p>\n\n<p>You don't need this loop at all:</p>\n\n<pre><code>@hash1{@list1} = @{$result2};\n</code></pre>\n\n<p>This is a hash slice. We use the elements of <code>@list1</code> as keys and <code>@{$result2}</code> as the corresponding values.</p>\n\n<pre><code>my $result3 = sub3(\\%hash1);\n\nsub sub1 {\n  # Parameter list (done manually). The first argument goes in $list1.\n  my ($list1) = @_; \n</code></pre>\n\n<p>There is no dereferencing here. This is just list assignment: We assign the list of elements of <code>@_</code> (our arguments) to <code>($list1)</code>, i.e. our first argument gets the local name <code>$list1</code>.</p>\n\n<pre><code>  my $result = {hash containing a list} from service call using $list1;\n</code></pre>\n\n<p>I don't know what you're doing here. This is a syntax error.</p>\n\n<pre><code>  # return the value stored under key 'list2' in the hash %{$result}\n  return $result-&gt;{list2};\n</code></pre>\n\n<p>This returns a scalar value. It might be a reference if that's what's stored in the <code>%{$result}</code> hash.</p>\n\n<pre><code>}\n\nsub sub2 {\n</code></pre>\n\n<p>I'm skipping this. See <code>sub1</code> above.</p>\n\n<pre><code>}\n\nsub sub3 {\n  # put first argument in local variable called $hash1\n  my ($hash1) = @_;\n</code></pre>\n\n<p>You were missing a <code>;</code> again.</p>\n\n<pre><code>  my %result3;\n\n  # loop over key value pairs of dereferenced hash1\n  while (my ($key, $value) = each %$hash1) {\n</code></pre>\n\n<p>Note that using <code>each</code> is not recommended. It uses/modifies hidden state in the hash you use it on, so it will break if any code in the loop calls <code>each</code> or <code>keys</code> or <code>values</code> on the hash you're iterating over.</p>\n\n<pre><code>    my %hash2;\n\n    # loop over item list inside hash that is \n    # the value of the current key in the outer loop\n    foreach my $item (@{ $value-&gt;{items} }) {\n</code></pre>\n\n<p>Specifically, this code assumes <code>$value</code> (the current value in <code>%{$hash1}</code>) is a reference to another hash, which contains a reference to an array under the key <code>'items'</code>. This array is what we're iterating over.</p>\n\n<pre><code>      if( !(defined $hash2{flag1}) ) {\n        $hash2{flag1} = $item-&gt;{flags}-&gt;{flag1};\n      }\n\n      switch ($item-&gt;{costName}) {\n</code></pre>\n\n<p>Perl has no <code>switch</code> statement. You must be using a module that messes with Perl's syntax. If it's <code>use Switch</code>, stop: This module has several issues. It rewrites the code of your program before the Perl parser sees it and it doesn't always get it right. That means Perl might be executing different code from what you've written. It also has fairly complicated behavior, which can cause unexpected behavior even if the code rewriting part was successful.</p>\n\n<pre><code>        case 'name1' {\n          $hash2{name1} += $item-&gt;{costName}-&gt;{value};\n        }\n\n        case 'name2' {\n          $hash2{name2} += $item-&gt;{costName}-&gt;{value};\n        }\n\n        # I want to also add a case where I compare the current value to two strings to see if it is not equal to both.\n        # Can this be done in a Perl switch.\n</code></pre>\n\n<p>As I was saying, there is no such thing as a Perl switch. (Technically there's <code>given</code>/<code>when</code>, but those suffer from the same complex / hard-to-predict behavior issues. They're officially \"experimental\" now (behavior subject to change in a future release).</p>\n\n<pre><code>      }\n\n      # set the value for this key in result3 to reference of hash2\n      $result3{$key} = \\%hash2; \n    }\n\n# return reference to result3\nreturn \\%result3\n}\n</code></pre>\n\n<p>That's it for code annotations. If you have questions about the actual behavior of your program, you need to post a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>.</p>\n"}], "owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516587400, "creation_date": 1516578994, "last_edit_date": 1516586036, "question_id": 48372997, "link": "https://stackoverflow.com/questions/48372997/how-to-pass-around-references-and-nested-references-properly-in-perl", "title": "How to pass around references and nested references properly in Perl", "body": "<p>I am new to Perl and I am trying to better understand when and how to pass references to nested data structures. Here is an outline of what I am doing:</p>\n\n<ol>\n<li>Pass list of String to sub1</li>\n<li>Have sub1 return a reference to a list inside a hash</li>\n<li>Pass return value of sub1 to sub2</li>\n<li>Have sub2 return a reference to a list inside a hash</li>\n<li>Iterate over list returned from sub2 and put into a new hash</li>\n<li>Pass reference to new hash to sub3</li>\n<li>Have sub3 return a reference to a new hash</li>\n</ol>\n\n<p>I am trying to pass references to the subroutines and have them return references. Is that the recommended way of doing things? </p>\n\n<p>Here is the code and my comments on what I <strong><em>think</em></strong> it is doing.:</p>\n\n<pre><code># create normal list\nmy @list1 = qw(1 2 3); \n\n# this passes a reference of list1 to sub1 and $result1 is \n  a reference to return value of sub1\nmy $result1 = sub1(\\@list1) \n\n# passes reference of result1 to sub2 and result2 is a reference \n  to return value of sub2\nmy $result2 = sub2($result1) \n\nmy %hash1;\n\n# dereferences list1 to the largest index to iterate until \n  and creates a key value pair in hash1 using the current \n  index of the loop. Also dereference result2 to get the \n  hash at the index.\nfor my $i (0 .. $#list1) {\n  $hash1{$list1[$i]} = @{$result2}[$i];  \n}\n\nmy $result3 = sub3(\\%hash1);\n\nsub sub1 {\n  # dereference list passed in?\n  my ($list1) = @_; \n\n  my $result = {hash containing a list} from service call using $list1;\n\n  # dereferences result to return list2, \n    is this returning the list or a reference?\n  return $result-&gt;{list2}; \n}\n\nsub sub2 {\n  # dereference list passed in?\n  my ($list2) = @_; \n\n  my $result = {hash containing a list} from service call using $list2;\n\n  # dereferences result to return list3, is \n    this returning the list or a reference?\n  return $result-&gt;{list3} \n}\n\nsub sub3 {\n  # dereference hash1 ?\n  my ($hash1) = @_ \n\n  my %result3;\n\n  # loop over key value pairs of dereferenced hash1\n  while (my ($key, $value) = each %$hash1) { \n    my %hash2;\n\n    # loop over item list inside hash that is \n      the value of the current key in the outer loop\n    foreach my $item (@{ $value-&gt;{items} }) {\n      if( !(defined $hash2{flag1}) ) {\n        $hash2{flag1} = $item-&gt;{flags}-&gt;{flag1};\n      }\n\n      switch ($item-&gt;{costName}) {\n        case 'name1' {\n          $hash2{name1} += $item-&gt;{costName}-&gt;{value};\n        }\n\n        case 'name2' {\n          $hash2{name2} += $item-&gt;{costName}-&gt;{value};\n        }\n\n        # I want to also add a case where I compare the current value to two strings to see if it is not equal to both. Can this be done in a Perl switch.\n\n\n      }\n\n      # set the value for this key in result3 to reference of hash2\n      $result3{$key} = \\%hash2; \n    }\n\n# return reference to result3\nreturn \\%result3\n}\n</code></pre>\n\n<p>Please let me know if I am referencing and dereferencing correctly. So far I have the output I am expecting, but I can't tell if I am going about this in a really inefficient way or just using references wrong. Thanks.</p>\n\n<p><strong>EDIT:</strong> One thing that is happening which I can't understand how is when I \nrun this line: <code>$hash1{$list1[$i]} = @{$result2}[$i];</code> inside that for loop, the second key (i=1) receives the value that was intended for the first key (i=0). I verified the right data is at the right index in the result2 list. What is happening here?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 2, "creation_date": 1516565855, "post_id": 48371278, "comment_id": 83729403, "body": "How about also <code>-w</code> ? See <code>perldoc -f -w</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1516620696, "post_id": 48371278, "comment_id": 83747633, "body": "Did you try <code>-w</code> before asking here? :-)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1516633690, "post_id": 48371278, "comment_id": 83756312, "body": "@Dave Cross, Bad advice."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1516565890, "creation_date": 1516565890, "answer_id": 48371301, "question_id": 48371278, "link": "https://stackoverflow.com/questions/48371278/checking-if-a-file-is-writable-in-perl/48371301#48371301", "title": "Checking if a file is writable in Perl", "body": "<p>That would be the <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-w</code> operator</a>:</p>\n\n<pre><code>for my $file (glob '*') {   \n    if (-w $file) {\n        print \"$file\\n\";\n    }   \n}\n</code></pre>\n"}], "owner": {"reputation": 10213, "user_id": 1686628, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a03a6bd4b5f83b04ff39aec4b44e17ed?s=128&d=identicon&r=PG&f=1", "display_name": "ealeon", "link": "https://stackoverflow.com/users/1686628/ealeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48371301, "answer_count": 1, "score": -1, "last_activity_date": 1516633509, "creation_date": 1516565755, "last_edit_date": 1516633509, "question_id": 48371278, "link": "https://stackoverflow.com/questions/48371278/checking-if-a-file-is-writable-in-perl", "title": "Checking if a file is writable in Perl", "body": "<p>What would be Perl equivalent of this bash script?</p>\n\n<pre><code>for file in *\ndo \n    if [ -w $file ] ; then \n        echo $file\n    fi\ndone\n</code></pre>\n\n<p>I am trying to see which files are writable.</p>\n"}, {"tags": ["perl", "perl-xs", "perlapi"], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1516635672, "creation_date": 1516561755, "last_edit_date": 1516635672, "question_id": 48370637, "link": "https://stackoverflow.com/questions/48370637/is-it-possible-to-know-xsub-was-called-using-sub", "title": "Is it possible to know `XSUB` was called using `&amp;sub`", "body": "<p>When <code>PP</code> sub is called the <code>CX</code> for this sub is created.<br>\nBy accessing this context by <code>CxHASARGS(CX_CUR())</code> we can check this sub <code>hasargs</code> or not.</p>\n\n<p>But for the <code>XSUB</code> context is not created, so we can not use this trick.</p>\n\n<p>Is is possible to know <code>XSUB</code> was called using <code>&amp;sub</code> or not?</p>\n\n<p><strong>UPD</strong><br>\nLooking at sources at <code>pp_entersub</code> when <code>cv</code> is <code>XSUB</code>. We can see how code handle <code>hasargs</code>. It access <code>PL_op-&gt;op_flags &amp; OPf_STACKED</code> then a bit later call the target <code>XSUB</code>:</p>\n\n<pre><code>if( PL_op-&gt;op_flags &amp; OPf_STACKED ...\n...\nCvXSUB(cv)(aTHX_ cv);\n</code></pre>\n\n<p><strong>Will it be OK if I in my <code>XSUB</code> I do same check of <code>PL_op-&gt;op_flags &amp; OPf_STACKED</code>?</strong></p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1516545132, "post_id": 48367885, "comment_id": 83722309, "body": "Please take a moment to <a href=\"https://stackoverflow.com/posts/48367885/edit\">edit</a> your question and turn that block of text into actual questions with punctuation. It is very hard to read. It would also be nice to have the code indented properly so we can read it. And you might want to provide example data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1516551729, "post_id": 48367885, "comment_id": 83724509, "body": "@simbabque: Alarmingly, the OP is a <i>Software QA Engineer</i>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 4, "creation_date": 1516554794, "post_id": 48367885, "comment_id": 83725595, "body": "You&#39;re missing <code>use strict; use warnings;</code>. Always start with those."}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1516554821, "post_id": 48369445, "comment_id": 83725605, "body": "<code>!#&#47;usr&#47;bin&#47;perl w</code>??"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1516555492, "post_id": 48369445, "comment_id": 83725838, "body": "That&#39;s not better. You still have what&#39;s effectively <code>! my %results;</code> with a comment in between, and you shouldn&#39;t be using <code>-w</code> in the first place (we&#39;ve had <code>use warnings;</code> since 2000), and you&#39;re missing <code>use strict</code> (available since 1994)."}, {"owner": {"reputation": 1348, "user_id": 1502952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c997e5c742ac4929acb1d4caf33f6406?s=128&d=identicon&r=PG&f=1", "display_name": "user1502952", "link": "https://stackoverflow.com/users/1502952/user1502952"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1516556030, "post_id": 48369445, "comment_id": 83726028, "body": "Thanks for taking out time to correct this, appreciated"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516575269, "post_id": 48369445, "comment_id": 83732133, "body": "I am undecided on how to vote here. I think you mean well to explain a concept to the OP, and your code is well documented and well structured, but I am missing the <code>use warnings</code> pragma, and I am really not sure if this actually answers the question. I don&#39;t understand the question, so I prefer to not answer instead of guessing. I will not cast a vote here"}, {"owner": {"reputation": 15, "user_id": 9112108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c3b5eed4b0ada82393efbb33c430de9?s=128&d=identicon&r=PG&f=1", "display_name": "BASAVARAJ JM", "link": "https://stackoverflow.com/users/9112108/basavaraj-jm"}, "edited": false, "score": 0, "creation_date": 1516589966, "post_id": 48369445, "comment_id": 83735350, "body": "i want to print success count and failure count for each brand but when tried its not printing.You are suggesting to add brands to hash but i am reading line and splitting it based comma separated and i want put unique brand and there success and failure count based on the one more filed"}, {"owner": {"reputation": 15, "user_id": 9112108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c3b5eed4b0ada82393efbb33c430de9?s=128&d=identicon&r=PG&f=1", "display_name": "BASAVARAJ JM", "link": "https://stackoverflow.com/users/9112108/basavaraj-jm"}, "edited": false, "score": 0, "creation_date": 1516590537, "post_id": 48369445, "comment_id": 83735466, "body": "after using for inside for i am getting success and failure count thanks for ur help"}, {"owner": {"reputation": 1348, "user_id": 1502952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c997e5c742ac4929acb1d4caf33f6406?s=128&d=identicon&r=PG&f=1", "display_name": "user1502952", "link": "https://stackoverflow.com/users/1502952/user1502952"}, "edited": false, "score": 0, "creation_date": 1516707096, "post_id": 48369445, "comment_id": 83789195, "body": "Understand in this simple way: Brand A(key) contains (Success(key)with value(1) and Failure(key) with value(0), in the first for loop we fetch out the Brand A key first and use it in the inner for loop (see $results{$brand} where brand is actually the Brand A(key)) to further fetch out Success and Failure keys"}, {"owner": {"reputation": 1348, "user_id": 1502952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c997e5c742ac4929acb1d4caf33f6406?s=128&d=identicon&r=PG&f=1", "display_name": "user1502952", "link": "https://stackoverflow.com/users/1502952/user1502952"}, "edited": false, "score": 0, "creation_date": 1516707121, "post_id": 48369445, "comment_id": 83789212, "body": "For the record , I&#39;ve added the use warnings;"}], "tags": [], "owner": {"reputation": 1348, "user_id": 1502952, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c997e5c742ac4929acb1d4caf33f6406?s=128&d=identicon&r=PG&f=1", "display_name": "user1502952", "link": "https://stackoverflow.com/users/1502952/user1502952"}, "is_accepted": true, "score": -2, "last_activity_date": 1516706511, "last_edit_date": 1516706511, "creation_date": 1516554505, "answer_id": 48369445, "question_id": 48367885, "link": "https://stackoverflow.com/questions/48367885/hash-key-value-print-issue/48369445#48369445", "title": "Hash Key value print Issue", "body": "<p>Code looks messy and not clear, but i'm posting here the way to increment the count for this case, hope it will help someway, copy and paste the below program in your machine and try it out(demonstrates how to increment count, very similar to scenario mentioned above)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy %results;\n\n%results = ('Brand A' =&gt; {'Success' =&gt; 0, 'Failure' =&gt; 0},\n            'Brand B' =&gt; {'Success' =&gt; 1, 'Failure' =&gt; 1});\n\n# add new entry into existing hash \n#\n$results{'Brand C'}{'Success'} = 5;\n$results{'Brand C'}{'Failure'} = 6;\n\n# increment Success count for specific brand straightaway\n$results{'Brand B'}{'Success'}++;\nprint \"Success count for brand B = $results{'Brand B'}{'Success'}\\n\";\n\n#print out hash\n#\n# first key for example Brand A\nfor my $brand (keys %results)\n{\n    print \"Printing brand here: $brand--&gt;\";\n\n    # next key for example 'Success' or 'Failure'\n    #\n    for my $result (keys %{$results{$brand}})\n    {\n        #increment success or failure count\n        $results{$brand}{$result}++;\n        print \"$result--&gt;$results{$brand}{$result},\";\n    }\n    print \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9112108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5c3b5eed4b0ada82393efbb33c430de9?s=128&d=identicon&r=PG&f=1", "display_name": "BASAVARAJ JM", "link": "https://stackoverflow.com/users/9112108/basavaraj-jm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 48369445, "answer_count": 1, "score": -2, "last_activity_date": 1516706511, "creation_date": 1516544965, "last_edit_date": 1516545092, "question_id": 48367885, "link": "https://stackoverflow.com/questions/48367885/hash-key-value-print-issue", "title": "Hash Key value print Issue", "body": "<p>I am not getting count of <code>$mapA{$Brand_Name}-&gt;{Success}</code>  <code>$mapA{$Brand_Name}-&gt;{Failure}</code>  please help on this actually i raised this problem in another question i.e closed so i am raising in this.\nor any other way to increase the count for particular key.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse Text::CSV;\nuse POSIX qw(strftime);\nuse Data::Dumper;\nuse LWP::Simple;\n\nmy $APK_GCM=\"/root/Basavaraj/GCM/cdr_02-01-2018_StreamzGcm.csv\";\nmy $WEB_GCM=\"/root/Basavaraj/GCM/cdr_02-01-2018_StreamzWebPushNotification.csv\";\n\nmy $Yesterday= strftime (\"%d-%m-%Y\", localtime(time-86400));\nmy $Current_Date= strftime (\"%d-%m-%Y\",localtime(time));\n\nprint \"$Yesterday \\n\";\nprint \"$Current_Date \\n\";\n\nopen(STDOUT, '&gt;', \"/root/Basavaraj/STREAMZ_GCM_APK.txt\");\n#Creating Class to split the document line by line  by comma ,\nmy $csv = Text::CSV-&gt;new({ sep_char =&gt; ',' });\n\nopen (my $data, '&lt;:encoding(utf8)', $APK_GCM) or die \"Could Not open File '$APK_GCM' $!\\n\";\nopen (my $data1,'&lt;:encoding(utf8)', $WEB_GCM) or die \"Could Not open File '$WEB_GCM' $!\\n\";\n\nmy %mapA;\nmy $dummyA =&lt;$data&gt;;\nwhile (my $line = &lt;$data&gt;) {\n  if ($csv-&gt;parse($line)) {\n      my @fields = $csv-&gt;fields();\n      my $Brand_Name=$fields[2];\n      my $Streamz_Sent=$fields[5];\n      my $GoogleResA=$fields[5];\n      $mapA{$Brand_Name} = {Success =&gt;0,Failure=&gt; 0} unless exists ($mapA{$Brand_Name});\n      my $failureA='{error:MismatchSenderId}';\n     if ($GoogleResA eq $failureA){\n                        $mapA{$Brand_Name}-&gt;{Failure}++;\n                         print \"$Brand_Name:$mapA{$Brand_Name}-&gt;{Failure} \\n\";\n                   }else{\n                         $mapA{$Brand_Name}-&gt;{Success}++; \n                         print \"$Brand_Name:$mapA{$Brand_Name}-&gt;{Success} \\n\";\n                }\n\n  } else {\n      warn \"Line could not be parsed: $line\\n\";\n  }\n}\n#$, = \",\";\nprint \" $mapA{$Brand_Name}-&gt;{Failure} \\n\";\nmy $KeyA;\nwhile (($keyA)=each (%mapA)){\n     my $success= $mapA{$Brand_Name}-&gt;{Success};\n     my $failure=  $mapA{$Brand_Name}-&gt;{Failure};\nprint \"$keyA   $mapA{$Brand_Name}-&gt;{Failure}++ $mapA{$Brand_Name}-&gt;{Success}++ \\n\";\n}\nforeach my $name ( keys %mapA) {\n    print \" $mapA{$Brand_Name}-&gt;{Failure} \\n\";\n    print \" $mapA{$Brand_Name}-&gt;{Success} \\n\";\n    print \"$name $mapA{$Brand_Name}-&gt;{Success} $mapA{$Brand_Name}-&gt;{Failure} \\n\";\n}\n</code></pre>\n"}, {"tags": ["arrays", "perl", "loops", "hash"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1516496904, "post_id": 48362673, "comment_id": 83712324, "body": "Please show how this was invoked, including how the argument to <code>iterateHash</code> was defined.  Did you pass an actual hash or a hash reference?  Once you get into nested structures, <i>everything</i> is a reference."}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1516497037, "post_id": 48362673, "comment_id": 83712354, "body": "@JimGarrison I mentioned above I am passing a reference to this sub. Added the call above."}], "answers": [{"comments": [{"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1516498084, "post_id": 48362737, "comment_id": 83712525, "body": "ah ok. so I wasn&#39;t dereferencing the hash I passed in to access the values or the nested item? thanks"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 1, "creation_date": 1516498174, "post_id": 48362737, "comment_id": 83712535, "body": "That is correct.  I personally find it much easier to work with references everywhere, since that&#39;s what you work with inside nested data structures. I never (well almost never) use plain hashes."}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1516499506, "post_id": 48362737, "comment_id": 83712737, "body": "if I use &#39;%$myHash&#39;, it gives this error: &quot;Can&#39;t use string (&quot;1&quot;) as a HASH ref while &quot;strict refs&quot;."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1516499687, "post_id": 48362737, "comment_id": 83712766, "body": "Oops... minor mistake in my code, I&#39;ll fix it.  Forgot the parentheses around <code>$myHash</code> in the first statement."}, {"owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 0, "creation_date": 1516499860, "post_id": 48362737, "comment_id": 83712797, "body": "Thanks - what do the parentheses around $myHash in the sub do?"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "edited": false, "score": 1, "creation_date": 1516499953, "post_id": 48362737, "comment_id": 83712807, "body": "Provide list context so the first element of <code>@_</code> is assigned to <code>$myHash</code>"}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": true, "score": 2, "last_activity_date": 1516499700, "last_edit_date": 1516499700, "creation_date": 1516497251, "answer_id": 48362737, "question_id": 48362673, "link": "https://stackoverflow.com/questions/48362673/iterating-over-an-array-of-hashes-inside-of-a-hash/48362737#48362737", "title": "Iterating over an array of hashes inside of a hash", "body": "<p>You passed a reference but didn't treat it like a reference inside <code>iterateHash</code>.  Also, once you get into nested structures, everything is a reference, so <code>$item</code> is a hash <em>reference</em> not a  plain hash.</p>\n\n<pre><code>sub iterateHash {\n    my ($myHash) = @_;\n\n    while (my ($key, $value) = each %$myHash) {\n        my %newHash;\n        foreach my $item (@{ $value-&gt;{'items'} }) {\n            if( !(defined $newHash{'nk1'}) ) {\n                $newHash{'nk1'} = $item-&gt;{'k1'}-&gt;{'x2'};\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1556, "user_id": 315015, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7396baec346f6ebce3fed84678d041d?s=128&d=identicon&r=PG", "display_name": "Seephor", "link": "https://stackoverflow.com/users/315015/seephor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 48362737, "answer_count": 1, "score": 1, "last_activity_date": 1516499700, "creation_date": 1516496422, "last_edit_date": 1516497068, "question_id": 48362673, "link": "https://stackoverflow.com/questions/48362673/iterating-over-an-array-of-hashes-inside-of-a-hash", "title": "Iterating over an array of hashes inside of a hash", "body": "<p>I am new to Perl and I am having a hard time with iterating over an array of hashes inside of a hash. I tried <a href=\"https://stackoverflow.com/questions/22124033/how-to-iterate-through-array-of-hashes-in-a-hash-in-perl\">this solution</a>Here is the data structure from Dumper:</p>\n\n<pre><code>1234 =&gt; {  \n        'items' =&gt; [\n            #0 { \n                    'k1' =&gt; { 'x1' =&gt; '123', 'x2' =&gt; '321' }, \n                    'k2' =&gt; 'v2', \n                    'k3' =&gt; 'v3', \n                    'k4' =&gt; 'v4' \n                }, \n            #1 { \n                    'k1' =&gt; { 'x1' =&gt; '123', 'x2' =&gt; '321' }, \n                    'k2' =&gt; 'v2', \n                    'k3' =&gt; 'v3', \n                    'k4' =&gt; 'v4' \n                }, \n            #2 { \n                    'k1' =&gt; { 'x1' =&gt; '123', 'x2' =&gt; '321' }, \n                    'k2' =&gt; 'v2', \n                    'k3' =&gt; 'v3', \n                    'k4' =&gt; 'v4' \n                },\n            ],\n}\n</code></pre>\n\n<p>Here is the code I have. I want to iterate over the hash '%myHash' while having access to both the keys and values. Then for each hash inside the \"items\" array I want to perform some operation. </p>\n\n<p>In this case, my key is '1234' and its value is a hash that contains the key 'items'. This is the code I have (a ref to the hash is being passed to my sub):</p>\n\n<pre><code>sub iterateHash {\n    my %myHash = @_;\n\n    while (my ($key, $value) = each %myHash) {\n        my %newHash;\n        foreach my $item (@{ $value-&gt;{'items'} }) {\n            if( !(defined $newHash{'nk1'}) ) {\n                $newHash{'nk1'} = $item{'k1'}{'x2'};\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>and how it is called:</p>\n\n<pre><code>my $results = iterateHash(\\%myHash);\n</code></pre>\n\n<p>I have uses for the key later on which is why I want access to both the key and value in a pair in the outer while loop, but for now I want to get this part working.</p>\n\n<p>This is the error I get:</p>\n\n<pre><code>Global symbol \"%item\" requires explicit package name\n</code></pre>\n"}, {"tags": ["perl", "perl-module", "debian-jessie"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516457731, "post_id": 48356847, "comment_id": 83700863, "body": "Can you please check what version of PDF::Table is installed? That specific release might be broken. Run <code>perl -MPDF::Table\\ 99</code> (including the space). it will complain that it only has a lower version."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1516457906, "post_id": 48356847, "comment_id": 83700933, "body": "The issue you are seeing <a href=\"https://metacpan.org/changes/distribution/PDF-Table#L23\" rel=\"nofollow noreferrer\">was fixed in version 0.9.10</a>. You could just install the latest version manually from CPAN, or use a local::lib for your project so it doesn&#39;t interfere with the system Perl (though for that module I think that&#39;s not an issue because it doesn&#39;t have any dependencies that might be updated besides Carp)."}, {"owner": {"reputation": 725, "user_id": 1147654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bs8pG.jpg?s=128&g=1", "display_name": "saudic", "link": "https://stackoverflow.com/users/1147654/saudic"}, "edited": false, "score": 0, "creation_date": 1516458316, "post_id": 48356847, "comment_id": 83701086, "body": "Hi. I tried on perl 5.22 with PDF::API2 version 2.025 and PDF::Table version 0.9.6 and the code seems to work (write Ok and generate a pdf file) in spite of the message (which is just a warning in my view)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516459393, "post_id": 48356847, "comment_id": 83701443, "body": "Yes, <a href=\"http://perldoc.perl.org/perldiag.html#Useless-use-of-greediness-modifier-&#39;%25c&#39;-in-regex%3b-marked-by-%3c---HERE-in-m%2f%25s%2f\" rel=\"nofollow noreferrer\">it&#39;s a warning</a>. But you can still update. You don&#39;t <i>have to</i> use the system packages for your Perl modules. You can install newer versions if you want."}, {"owner": {"reputation": 43, "user_id": 5278779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5hLJa.jpg?s=128&g=1", "display_name": "Satch", "link": "https://stackoverflow.com/users/5278779/satch"}, "edited": false, "score": 0, "creation_date": 1516460299, "post_id": 48356847, "comment_id": 83701749, "body": "The version of PDF::Table installed on the server is 0.9.6. Installing the latest version (0.9.14) as a lib solves the problem on Perl 5.20. Thank you so much to both of you for your time!"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1516467930, "creation_date": 1516467930, "answer_id": 48358819, "question_id": 48356847, "link": "https://stackoverflow.com/questions/48356847/pdftable-perl-module-not-working-on-debian-jessie/48358819#48358819", "title": "PDF::Table Perl module not working on Debian Jessie", "body": "<p>The problem you are seeing is a warning. It's annoying, but it can be ignored. The module was fixed <a href=\"https://metacpan.org/changes/distribution/PDF-Table#L23\" rel=\"nofollow noreferrer\">in version 0.9.10</a>. You can install that from CPAN directly instead of using the system package and then the warning will go away.</p>\n"}], "owner": {"reputation": 43, "user_id": 5278779, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5hLJa.jpg?s=128&g=1", "display_name": "Satch", "link": "https://stackoverflow.com/users/5278779/satch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 48358819, "answer_count": 1, "score": 1, "last_activity_date": 1516467930, "creation_date": 1516455894, "question_id": 48356847, "link": "https://stackoverflow.com/questions/48356847/pdftable-perl-module-not-working-on-debian-jessie", "title": "PDF::Table Perl module not working on Debian Jessie", "body": "<p>When I try to use <a href=\"http://search.cpan.org/~omega/PDF-Table-0.9.14/lib/PDF/Table.pm\" rel=\"nofollow noreferrer\">PDF::Table</a> module on Debian Jessie (Perl 5.20), I get this message: </p>\n\n<pre><code>Useless use of greediness modifier '?' in regex; marked by &lt;-- HERE in m/(\\S{20}? &lt;-- HERE )(?=\\S)/ at /usr/share/perl5/PDF/Table.pm line 370.\n</code></pre>\n\n<p>This module works great on Debian Wheezy (with Perl 5.014002) but an upgrade in Perl 5.20 seems to make it unusable on Debian Jessie. The only <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=762533\" rel=\"nofollow noreferrer\">documentation</a> I found on this bug talks about the Perl upgrade, but doesn't give any solution to fix that. The script I use is the PDF::Table main example on CPAN:</p>\n\n<pre><code> use strict;\n use warnings;\n use PDF::API2;\n use PDF::Table;\n\n my $pdftable = new PDF::Table;\n my $pdf = new PDF::API2(-file =&gt; \"table_of_lorem.pdf\");\n my $page = $pdf-&gt;page;\n\n # some data to layout\n my $some_data =[\n    [\"1 Lorem ipsum dolor\",\n    \"Donec odio neque, faucibus vel\",\n    \"consequat quis, tincidunt vel, felis.\"],\n    [\"Nulla euismod sem eget neque.\",\n    \"Donec odio neque\",\n    \"Sed eu velit.\"],\n    #... and so on\n ];\n\nmy $left_edge_of_table = 50;\n # build the table layout\n $pdftable-&gt;table(\n     # required params\n     $pdf,\n     $page,\n     $some_data,\n     x =&gt; $left_edge_of_table,\n     w =&gt; 495,\n     start_y =&gt; 500,\n     start_h =&gt; 300,\n     # some optional params\n     next_y  =&gt; 750,\n     next_h  =&gt; 500,\n     padding =&gt; 5,\n     padding_right =&gt; 10,\n     background_color_odd  =&gt; \"gray\",\n     background_color_even =&gt; \"lightblue\", #cell background color for even rows\n  );\n\n$pdf-&gt;saveas(\"table_of_lorem.pdf\");\n\nprint \"Content-type: text/html\\n\\n\";\nprint \"Ok\";\n</code></pre>\n\n<p>My hoster only says that I have to \"adapt my code\"... Can you please help me to find the right way to do that? I only noticed this bug when using PDF::Table, but is there a possibilty to have the same problem with another Perl module on Perl 5.20? Thank you very much for your help!</p>\n"}, {"tags": ["regex", "perl", "unix", "awk", "sed"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 5, "creation_date": 1516450024, "post_id": 48355906, "comment_id": 83698404, "body": "Welcome to Stack Overflow. Have you tried solving this yourself? We&#39;re not a code writing service. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and hot to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Thank you."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1516509725, "post_id": 48355906, "comment_id": 83714285, "body": "Apart from the comment by @simbabque, which you should take very seriously, this is a common topic with many posts. Please search before posting. In short, see <a href=\"https://perldoc.perl.org/Text/Balanced.html\" rel=\"nofollow noreferrer\">Text::Balanced</a> core module for this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516510106, "post_id": 48355906, "comment_id": 83714353, "body": "Another known tool is <a href=\"http://search.cpan.org/~abigail/Regexp-Common-2017060201/lib/Regexp/Common.pm\" rel=\"nofollow noreferrer\">Regexp::Common</a>"}], "answers": [{"tags": [], "owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": false, "score": 0, "last_activity_date": 1516451068, "last_edit_date": 1516451068, "creation_date": 1516450726, "answer_id": 48356050, "question_id": 48355906, "link": "https://stackoverflow.com/questions/48355906/extract-data-between-recursive-brackets/48356050#48356050", "title": "Extract data between recursive brackets", "body": "<p>Try this option in Perl:</p>\n\n<pre><code>$text = \"CREATE SET TABLE xxxx.xxxx ( CONTENT )\";\nif ($text =~ /CREATE SET TABLE [^(]* \\(([^)]*)\\)/) {\n    print $1;\n}\n</code></pre>\n\n<p>This outputs <code>CONTENT</code>, q.v. the demo below.</p>\n\n<p><a href=\"http://rextester.com/VOSA14553\" rel=\"nofollow noreferrer\"><h2>Demo</h2></a></p>\n"}, {"tags": [], "owner": {"reputation": 1152, "user_id": 3369871, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c8de0e95a53208ba7a7d6d47a1d0a846?s=128&d=identicon&r=PG&f=1", "display_name": "Vicky", "link": "https://stackoverflow.com/users/3369871/vicky"}, "is_accepted": false, "score": -1, "last_activity_date": 1516457254, "creation_date": 1516457254, "answer_id": 48357084, "question_id": 48355906, "link": "https://stackoverflow.com/questions/48355906/extract-data-between-recursive-brackets/48357084#48357084", "title": "Extract data between recursive brackets", "body": "<pre><code>awk '/^ +\\(/{a=1}/\\)$/{a=0;print}a==1'  filename\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9244028, "user_type": "registered", "profile_image": "https://graph.facebook.com/1979730462042280/picture?type=large", "display_name": "Sahil Hans", "link": "https://stackoverflow.com/users/9244028/sahil-hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 1, "closed_date": 1516509651, "answer_count": 2, "score": -1, "last_activity_date": 1516457254, "creation_date": 1516449760, "last_edit_date": 1516449849, "question_id": 48355906, "link": "https://stackoverflow.com/questions/48355906/extract-data-between-recursive-brackets", "closed_reason": "Duplicate", "title": "Extract data between recursive brackets", "body": "<p>Can anyone help me with extracting text between \"(\" and \")\" on linux.\nPS - In between data also contains brackets ().</p>\n\n<p>Text: </p>\n\n<pre><code>CREATE SET TABLE xxxxx.xxxxxx ,NO FALLBACK ,\n     NO BEFORE JOURNAL,\n     NO AFTER JOURNAL,\n     CHECKSUM = DEFAULT,\n     DEFAULT MERGEBLOCKRATIO\n     (\n\n     aflt_type_cd CHAR(1) CHARACTER SET LATIN UPPERCASE NOT CASESPECIFIC TITLE 'AFFILIATE TYPE CODE',\n      aflt_co_cd CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'AFFILIATE COMPANY CODE',\n      cris_ind CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'CUSTOMER RECORDS INFORMATION SYSTEM INDICATOR',\n      cabs_ind CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'CARRIER ACCESS BILLING SYSTEM INDICATOR',\n      src_feed_cd CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'SOURCE FEED CODE',\n      intgt_ind CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'INTEGRATED INDICATOR' NOT NULL,\n      lst_updt_by CHAR(10) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'LAST UPDATED BY' NOT NULL,\n      load_dt_tm TIMESTAMP(6) TITLE 'LOAD DATE TIME' NOT NULL,\n      updt_dt_tm TIMESTAMP(6) TITLE 'UPDATE DATE TIME' NOT NULL)\nPRIMARY INDEX nupi_bill_sys ( bill_sys_geo_id );\n</code></pre>\n\n<p>Text required :</p>\n\n<pre><code>aflt_type_cd CHAR(1) CHARACTER SET LATIN UPPERCASE NOT CASESPECIFIC TITLE 'AFFILIATE TYPE CODE',\n      aflt_co_cd CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'AFFILIATE COMPANY CODE',\n      cris_ind CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'CUSTOMER RECORDS INFORMATION SYSTEM INDICATOR',\n      cabs_ind CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'CARRIER ACCESS BILLING SYSTEM INDICATOR',\n      src_feed_cd CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'SOURCE FEED CODE',\n      intgt_ind CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'INTEGRATED INDICATOR' NOT NULL,\n      lst_updt_by CHAR(10) CHARACTER SET LATIN NOT CASESPECIFIC TITLE 'LAST UPDATED BY' NOT NULL,\n      load_dt_tm TIMESTAMP(6) TITLE 'LOAD DATE TIME' NOT NULL,\n      updt_dt_tm TIMESTAMP(6) TITLE 'UPDATE DATE TIME' NOT NULL\n</code></pre>\n\n<p>Thanks in advance..!! :) </p>\n"}, {"tags": ["shell", "perl", "automation", "cgi"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516421580, "post_id": 48351880, "comment_id": 83691785, "body": "Could you try creating a dummy cgi script that just sleeps, hit that page, and make sure that it gets run by the <code>noc</code> user?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516421776, "post_id": 48351880, "comment_id": 83691821, "body": "Are you running cgi with suexec? <a href=\"https://httpd.apache.org/docs/2.4/suexec.html\" rel=\"nofollow noreferrer\">httpd.apache.org/docs/2.4/suexec.html</a>"}, {"owner": {"reputation": 21, "user_id": 9242683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a253373ca8e279571d17437b0d14645?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/9242683/prateek"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516435420, "post_id": 48351880, "comment_id": 83694346, "body": "I am running this script in RHEL7"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516439428, "post_id": 48351880, "comment_id": 83695235, "body": "Are you using SELinux as well?"}, {"owner": {"reputation": 21, "user_id": 9242683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a253373ca8e279571d17437b0d14645?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/9242683/prateek"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1516641985, "post_id": 48351880, "comment_id": 83761660, "body": "Thank you @xxfelixxx, I have disabled SElinux and it started working."}], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 5581864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04e46a4aa16a66d4402653e5b48c73f1?s=128&d=identicon&r=PG&f=1", "display_name": "santhu", "link": "https://stackoverflow.com/users/5581864/santhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1516642125, "creation_date": 1516642125, "answer_id": 48387119, "question_id": 48351880, "link": "https://stackoverflow.com/questions/48351880/not-able-to-ssh-to-another-machine-using-perl-cgi-scripts-issue-with-keys/48387119#48387119", "title": "Not able to ssh to another machine using Perl CGI Scripts issue with Keys", "body": "<p>try disabling SELINUX and check this again. It should work</p>\n"}], "owner": {"reputation": 21, "user_id": 9242683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a253373ca8e279571d17437b0d14645?s=128&d=identicon&r=PG&f=1", "display_name": "Prateek", "link": "https://stackoverflow.com/users/9242683/prateek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516642125, "creation_date": 1516413226, "last_edit_date": 1516435390, "question_id": 48351880, "link": "https://stackoverflow.com/questions/48351880/not-able-to-ssh-to-another-machine-using-perl-cgi-scripts-issue-with-keys", "title": "Not able to ssh to another machine using Perl CGI Scripts issue with Keys", "body": "<p>I am trying to ssh to another machine using Perl CGI script and I am executing the script on a remote machine. I am facing the issue. </p>\n\n<p>Note: I am calling below command in Perl CGI Script: Below is just code snippet which is not working as expected i.e it is not executing the script in remote system.</p>\n\n<p>This is just Code Snipped in heap.pl (This is the code from Perf CGI Script). I am using backtick (<code></code>) for executing system commands in Perl Script</p>\n\n<pre><code> `rm -rf /home/noc/.ssh/known_hosts ;ssh -i /home/noc/.ssh/noc_offshore_key -vvv -o LogLevel=DEBUG3 -o StrictHostKeyChecking=no -o BatchMode=yes -o ConnectTimeout=5 noc\\@10.208.9.88 \"sh /tmp/jetty_change.sh 4020 4678 accservice\"`;\n</code></pre>\n\n<p>Error in apache Error Log:</p>\n\n<pre><code>[Sat Jan 20 01:44:33.369848 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: rm: cannot remove '/home/noc/.ssh/known_hosts': Permission denied, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.375508 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: Warning: Identity file /home/noc/.ssh/noc_offshore_key not accessible: Permission denied., referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.376656 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: OpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.376702 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: debug1: Reading configuration data /etc/ssh/ssh_config\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.376745 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: debug1: /etc/ssh/ssh_config line 56: Applying options for *\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.376981 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: debug2: resolving \"10.208.9.88\" port 22\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.377000 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: debug2: ssh_connect_direct: needpriv 0\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.377016 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: debug1: Connecting to 10.208.9.88 [10.208.9.88] port 22.\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.377362 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: debug2: fd 3 setting O_NONBLOCK\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.377495 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: debug1: connect to address 10.208.9.88 port 22: Permission denied\\r, referer: http://10.208.8.27/heapmemory.html\n[Sat Jan 20 01:44:33.377518 2018] [cgi:error] [pid 7722] [client 183.82.99.86:43419] AH01215: ssh: connect to host 10.208.9.88 port 22: Permission denied\\r, referer: http://10.208.8.27/heapmemory.html\n</code></pre>\n\n<p>Note: When i execute the same command as NOC user it is working fine and i see that it is working as expected. So we can safely assume that permissions and key is correct</p>\n\n<p>Permissions of file and ownership details</p>\n\n<pre><code>[noc@noc-automation tmp]$ ls -lrt /home/noc/.ssh/noc_offshore_key\n-rw-------. 1 noc noc 1675 Jan 18 15:06 /home/noc/.ssh/noc_offshore_key\n\n[noc@noc-automation cgi-bin]$ ls -lrt /var/www/cgi-bin/heap.pl \n-rwxrwxr-x. 1 noc noc 1137 Jan 20 01:44 /var/www/cgi-bin/heap.pl\n</code></pre>\n\n<p>Manually executing same command works, below is the Output. So we can safely assume that Keys and permissions are correct</p>\n\n<pre><code>[noc@noc-automation tmp]$ rm -rf /home/noc/.ssh/known_hosts ;ssh -i /home/noc/.ssh/noc_offshore_key -vvv -o LogLevel=DEBUG3 -o StrictHostKeyChecking=no -o BatchMode=yes -o ConnectTimeout=5 noc@10.208.9.88 \"sh /tmp/jetty_change.sh 2000 2001 accservice\"\nOpenSSH_7.4p1, OpenSSL 1.0.2k-fips  26 Jan 2017\ndebug1: Reading configuration data /etc/ssh/ssh_config\ndebug1: /etc/ssh/ssh_config line 56: Applying options for *\ndebug2: resolving \"10.208.9.88\" port 22\ndebug2: ssh_connect_direct: needpriv 0\ndebug1: Connecting to 10.208.9.88 [10.208.9.88] port 22.\ndebug2: fd 3 setting O_NONBLOCK\ndebug1: fd 3 clearing O_NONBLOCK\ndebug1: Connection established.\ndebug3: timeout: 4999 ms remain after connect\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/noc/.ssh/noc_offshore_key type -1\ndebug1: key_load_public: No such file or directory\ndebug1: identity file /home/noc/.ssh/noc_offshore_key-cert type -1\ndebug1: Enabling compatibility mode for protocol 2.0\ndebug1: Local version string SSH-2.0-OpenSSH_7.4\ndebug1: Remote protocol version 2.0, remote software version OpenSSH_7.4\ndebug1: match: OpenSSH_7.4 pat OpenSSH* compat 0x04000000\ndebug2: fd 3 setting O_NONBLOCK\ndebug1: Authenticating to 10.208.9.88:22 as 'noc'\ndebug3: send packet: type 20\ndebug1: SSH2_MSG_KEXINIT sent\ndebug3: receive packet: type 20\ndebug1: SSH2_MSG_KEXINIT received\ndebug2: local client KEXINIT proposal\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1,ext-info-c\ndebug2: host key algorithms: ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ssh-ed25519-cert-v01@openssh.com,ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-ed25519,rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss\ndebug2: ciphers ctos: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com,aes128-cbc,aes192-cbc,aes256-cbc\ndebug2: ciphers stoc: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com,aes128-cbc,aes192-cbc,aes256-cbc\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: compression ctos: none,zlib@openssh.com,zlib\ndebug2: compression stoc: none,zlib@openssh.com,zlib\ndebug2: languages ctos: \ndebug2: languages stoc: \ndebug2: first_kex_follows 0 \ndebug2: reserved 0 \ndebug2: peer server KEXINIT proposal\ndebug2: KEX algorithms: curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1\ndebug2: host key algorithms: ssh-rsa,rsa-sha2-512,rsa-sha2-256,ecdsa-sha2-nistp256,ssh-ed25519\ndebug2: ciphers ctos: aes128-ctr,aes192-ctr,aes256-ctr\ndebug2: ciphers stoc: aes128-ctr,aes192-ctr,aes256-ctr\ndebug2: MACs ctos: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: MACs stoc: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1\ndebug2: compression ctos: none,zlib@openssh.com\ndebug2: compression stoc: none,zlib@openssh.com\ndebug2: languages ctos: \ndebug2: languages stoc: \ndebug2: first_kex_follows 0 \ndebug2: reserved 0 \ndebug1: kex: algorithm: curve25519-sha256\ndebug1: kex: host key algorithm: ecdsa-sha2-nistp256\ndebug1: kex: server-&gt;client cipher: aes128-ctr MAC: umac-64-etm@openssh.com compression: none\ndebug1: kex: client-&gt;server cipher: aes128-ctr MAC: umac-64-etm@openssh.com compression: none\ndebug1: kex: curve25519-sha256 need=16 dh_need=16\ndebug1: kex: curve25519-sha256 need=16 dh_need=16\ndebug3: send packet: type 30\ndebug1: expecting SSH2_MSG_KEX_ECDH_REPLY\ndebug3: receive packet: type 31\ndebug1: Server host key: ecdsa-sha2-nistp256 SHA256:QavXuYKfJLVm+oEiYiX+wQPcy5q5RvZ7Uki560dzg0c\nWarning: Permanently added '10.208.9.88' (ECDSA) to the list of known hosts.\ndebug3: send packet: type 21\ndebug2: set_newkeys: mode 1\ndebug1: rekey after 4294967296 blocks\ndebug1: SSH2_MSG_NEWKEYS sent\ndebug1: expecting SSH2_MSG_NEWKEYS\ndebug3: receive packet: type 21\ndebug1: SSH2_MSG_NEWKEYS received\ndebug2: set_newkeys: mode 0\ndebug1: rekey after 4294967296 blocks\ndebug2: key: /home/noc/.ssh/noc_offshore_key ((nil)), explicit\ndebug3: send packet: type 5\ndebug3: receive packet: type 7\ndebug1: SSH2_MSG_EXT_INFO received\ndebug1: kex_input_ext_info: server-sig-algs=&lt;rsa-sha2-256,rsa-sha2-512&gt;\ndebug3: receive packet: type 6\ndebug2: service_accept: ssh-userauth\ndebug1: SSH2_MSG_SERVICE_ACCEPT received\ndebug3: send packet: type 50\ndebug3: receive packet: type 53\ndebug3: input_userauth_banner\n################################################################################\n#                                                                              #\n# UNAUTHORIZED ACCESS TO THIS SYSTEM IS PROHIBITED. ACTIVITY MAY BE LOGGED AND #\n# MONITORED.  USE IS FOR AUTHORIZED BUSINESS PURPOSES ONLY.  VIOLATORS OF THIS #\n# POLICY ARE SUBJECT TO DISCIPLINARY ACTION UP TO AND INCLUDING LEGAL ACTION.  #\n#                                                                              #\n################################################################################\ndebug3: receive packet: type 51\ndebug1: Authentications that can continue: publickey,password\ndebug3: start over, passed a different list publickey,password\ndebug3: preferred gssapi-keyex,gssapi-with-mic,publickey\ndebug3: authmethod_lookup publickey\ndebug3: remaining preferred: ,gssapi-with-mic,publickey\ndebug3: authmethod_is_enabled publickey\ndebug1: Next authentication method: publickey\ndebug1: Trying private key: /home/noc/.ssh/noc_offshore_key\ndebug3: sign_and_send_pubkey: RSA SHA256:blgxJvtpeU6gpkzAO6hRXG9DIHzMfPGajptL8OAUs7E\ndebug3: send packet: type 50\ndebug2: we sent a publickey packet, wait for reply\ndebug3: receive packet: type 52\ndebug1: Authentication succeeded (publickey).\nAuthenticated to 10.208.9.88 ([10.208.9.88]:22).\ndebug1: channel 0: new [client-session]\ndebug3: ssh_session2_open: channel_new: 0\ndebug2: channel 0: send open\ndebug3: send packet: type 90\ndebug1: Requesting no-more-sessions@openssh.com\ndebug3: send packet: type 80\ndebug1: Entering interactive session.\ndebug1: pledge: network\ndebug3: receive packet: type 80\ndebug1: client_input_global_request: rtype hostkeys-00@openssh.com want_reply 0\ndebug3: receive packet: type 91\ndebug2: callback start\ndebug2: fd 3 setting TCP_NODELAY\ndebug3: ssh_packet_set_tos: set IP_TOS 0x08\ndebug2: client_session2_setup: id 0\ndebug1: Sending environment.\ndebug3: Ignored env XDG_SESSION_ID\ndebug3: Ignored env HOSTNAME\ndebug3: Ignored env SELINUX_ROLE_REQUESTED\ndebug3: Ignored env TERM\ndebug3: Ignored env SHELL\ndebug3: Ignored env HISTSIZE\ndebug3: Ignored env SSH_CLIENT\ndebug3: Ignored env SELINUX_USE_CURRENT_RANGE\ndebug3: Ignored env SSH_TTY\ndebug3: Ignored env USER\ndebug3: Ignored env LS_COLORS\ndebug3: Ignored env MAIL\ndebug3: Ignored env PATH\ndebug3: Ignored env PWD\ndebug1: Sending env LANG = en_US.UTF-8\ndebug2: channel 0: request env confirm 0\ndebug3: send packet: type 98\ndebug3: Ignored env SELINUX_LEVEL_REQUESTED\ndebug3: Ignored env HISTCONTROL\ndebug3: Ignored env SHLVL\ndebug3: Ignored env HOME\ndebug3: Ignored env LOGNAME\ndebug3: Ignored env SSH_CONNECTION\ndebug3: Ignored env LESSOPEN\ndebug3: Ignored env XDG_RUNTIME_DIR\ndebug3: Ignored env _\ndebug3: Ignored env OLDPWD\ndebug1: Sending command: sh /tmp/jetty_change.sh 2000 2001 accservice\ndebug2: channel 0: request exec confirm 1\ndebug3: send packet: type 98\ndebug2: callback done\ndebug2: channel 0: open confirm rwindow 0 rmax 32768\ndebug2: channel 0: rcvd adjust 2097152\ndebug3: receive packet: type 99\ndebug2: channel_input_status_confirm: type 99 id 0\ndebug2: exec request accepted on channel 0\n2000 2001 accservice JAVA_OPTS=\"${JAVA_OPTS} -Xms2000m -Xmx2001m\"\naccservice\ndebug3: receive packet: type 98\ndebug1: client_input_channel_req: channel 0 rtype exit-status reply 0\ndebug3: receive packet: type 98\ndebug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0\ndebug2: channel 0: rcvd eow\ndebug2: channel 0: close_read\ndebug2: channel 0: input open -&gt; closed\ndebug3: receive packet: type 96\ndebug2: channel 0: rcvd eof\ndebug2: channel 0: output open -&gt; drain\ndebug2: channel 0: obuf empty\ndebug2: channel 0: close_write\ndebug2: channel 0: output drain -&gt; closed\ndebug3: receive packet: type 97\ndebug2: channel 0: rcvd close\ndebug3: channel 0: will not send data after close\ndebug2: channel 0: almost dead\ndebug2: channel 0: gc: notify user\ndebug2: channel 0: gc: user detached\ndebug2: channel 0: send close\ndebug3: send packet: type 97\ndebug2: channel 0: is dead\ndebug2: channel 0: garbage collecting\ndebug1: channel 0: free: client-session, nchannels 1\ndebug3: channel 0: status: The following connections are open:\n  #0 client-session (t4 r0 i3/0 o3/0 fd -1/-1 cc -1)\n\ndebug3: send packet: type 1\nTransferred: sent 2572, received 2820 bytes, in 2.9 seconds\nBytes per second: sent 888.1, received 973.8\ndebug1: Exit status 0\n</code></pre>\n\n<p>Note: This script is involved by Perl CGI and apache is running as noc user only</p>\n\n<pre><code>[noc@noc-automation tmp]$ ps -ef|grep httpd|grep -v grep\nnoc       1925  2637  0 Jan19 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\nnoc       2143  2637  0 Jan19 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\nnoc       2229  2637  0 Jan19 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\nroot      2637     1  0 Jan18 ?        00:00:09 /usr/sbin/httpd -DFOREGROUND\nnoc       4681  2637  0 Jan19 ?        00:00:01 /usr/sbin/httpd -DFOREGROUND\nnoc       6878  2637  0 Jan18 ?        00:00:01 /usr/sbin/httpd -DFOREGROUND\nnoc       7722  2637  0 00:31 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\nnoc      12575  2637  0 Jan18 ?        00:00:01 /usr/sbin/httpd -DFOREGROUND\nnoc      20192  2637  0 Jan18 ?        00:00:01 /usr/sbin/httpd -DFOREGROUND\nnoc      23163  2637  0 Jan19 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\nnoc      25275  2637  0 Jan19 ?        00:00:00 /usr/sbin/httpd -DFOREGROUND\n</code></pre>\n\n<p>I am running this script in RHEL7 OS</p>\n\n<p>Can you please check and help me why from Perl CGI, script is not getting executed in remote system?</p>\n"}, {"tags": ["mysql", "linux", "perl", "otrs"], "comments": [{"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 1, "creation_date": 1516405254, "post_id": 48350484, "comment_id": 83688793, "body": "I suspect that no value is being passed for the <code>change_by</code> field - so the DBI module is attempting to insert a <code>NULL</code> value in the corresponding column. Hence the foreign key constraint failure. Out of curiosity, what happens if you add a <code>ChangeBy</code> value when invoking the <code>CustomerUserUpdate()</code> method - e.g. <code>ChangeBy =&gt; 1</code>? (The value you pass would have to be the ID of an existing user - otherwise the foreign key constraint would fail again.) I&#39;m not proposing that as a solution, but it might help debugging."}, {"owner": {"reputation": 263, "user_id": 4471796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e051a265d2a207635820eb0f3ff43db?s=128&d=identicon&r=PG&f=1", "display_name": "pm1391", "link": "https://stackoverflow.com/users/4471796/pm1391"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516630350, "post_id": 48350484, "comment_id": 83753815, "body": "I see what you are saying. Thanks for the suggestion, however the error message remains the same when adding the ChangeBy or variations of that. Might have to run to OTRS forum"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516634625, "post_id": 48350484, "comment_id": 83756938, "body": "Hi. Actually ... Examining the code at <a href=\"https://github.com/OTRS/otrs/blob/rel-5_0_22/Kernel/System/CustomerUser/DB.pm#L960\" rel=\"nofollow noreferrer\">github.com/OTRS/otrs/blob/rel-5_0_22/Kernel/System/CustomerU&zwnj;&#8203;ser/&hellip;</a> , it seems that the <code>UserID</code> is actually mapped to the <code>change_by</code> DB column. Are you sure that the <code>UserID</code> you are passing is a valid user ID?"}, {"owner": {"reputation": 263, "user_id": 4471796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e051a265d2a207635820eb0f3ff43db?s=128&d=identicon&r=PG&f=1", "display_name": "pm1391", "link": "https://stackoverflow.com/users/4471796/pm1391"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516639608, "post_id": 48350484, "comment_id": 83760332, "body": "Made a edit, and yes the UserID is a valid one. I added a &quot;change_by =&gt; 2&quot; and same error."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516642820, "post_id": 48350484, "comment_id": 83762091, "body": "Are MySQL logs enabled on your server? If so, you could try examining them to see exactly what SQL is being executed (i.e. with  actual values instead of placeholders.) Alternatively ... If you can edit the source code in your OTRS installation - try adding the line <code>warn &#39;Customer update SQL: &#39;.$SQL;</code> just before the line <a href=\"https://github.com/OTRS/otrs/blob/rel-5_0_22/Kernel/System/CustomerUser/DB.pm#L960\" rel=\"nofollow noreferrer\">github.com/OTRS/otrs/blob/rel-5_0_22/Kernel/System/CustomerU&zwnj;&#8203;ser/&hellip;</a> where it executes the query. Then examine the logs to see exactly what the query was?"}, {"owner": {"reputation": 263, "user_id": 4471796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e051a265d2a207635820eb0f3ff43db?s=128&d=identicon&r=PG&f=1", "display_name": "pm1391", "link": "https://stackoverflow.com/users/4471796/pm1391"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516644214, "post_id": 48350484, "comment_id": 83762829, "body": "Yeah thats a great point. I enabled logging and its weird... I copied the query directly, as it appeared in the logs, and placed it in the sql prompt and it accepted it."}, {"owner": {"reputation": 263, "user_id": 4471796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e051a265d2a207635820eb0f3ff43db?s=128&d=identicon&r=PG&f=1", "display_name": "pm1391", "link": "https://stackoverflow.com/users/4471796/pm1391"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516644315, "post_id": 48350484, "comment_id": 83762888, "body": "I think I&#39;ll just write my own function to updates values instead of using theirs"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516659551, "post_id": 48350484, "comment_id": 83770290, "body": "Hi. The only explanation I can fathom is that OTRS is configured to use a different database than the one you are connecting to via the SQL prompt (although with the same schema). Am intrigued as to what other causes might be."}, {"owner": {"reputation": 263, "user_id": 4471796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e051a265d2a207635820eb0f3ff43db?s=128&d=identicon&r=PG&f=1", "display_name": "pm1391", "link": "https://stackoverflow.com/users/4471796/pm1391"}, "reply_to_user": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1516661191, "post_id": 48350484, "comment_id": 83770964, "body": "Ill place a question on the forum and get back to you. Thanks for the help debugging"}], "owner": {"reputation": 263, "user_id": 4471796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e051a265d2a207635820eb0f3ff43db?s=128&d=identicon&r=PG&f=1", "display_name": "pm1391", "link": "https://stackoverflow.com/users/4471796/pm1391"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 793, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516639271, "creation_date": 1516401081, "last_edit_date": 1516639271, "question_id": 48350484, "link": "https://stackoverflow.com/questions/48350484/otrs-update-customeruser-table", "title": "OTRS update CustomerUser table", "body": "<p>I'm having trouble updating a <code>CustomerUser</code> in OTRS 5.</p>\n\n<p>I'm using command-line Perl scripts and modules.</p>\n\n<p>This is what I have tried:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse lib '/opt/otrs/Kernel/System/CustomerUser/DB';\n\nuse File::Basename;\n\nuse FindBin qw($RealBin);\n\nuse lib dirname( $RealBin );\nuse lib dirname( $RealBin ) . '/Kernel/cpan-lib';\nuse lib dirname( $RealBin ) . '/Custom';\n\nuse Kernel::System::ObjectManager;\n\nlocal $Kernel::OM = Kernel::System::ObjectManager-&gt;new();\n\nmy $CustomerUserObject = $Kernel::OM-&gt;Get( 'Kernel::System::CustomerUser' );\n#\n# Searching for customers below works fine\n#\n#    my $Name = $CustomerUserObject-&gt;CustomerName(\n#        UserLogin =&gt; 'admin',\n#    );\n#    my @CustomerIDs = $CustomerUserObject-&gt;CustomerIDList(\n#        SearchTerm  =&gt; 'somecustomer',    # optional\n#        Valid       =&gt; 1,                 # optional\n#    );\n#    my @CustomerIDs = $CustomerUserObject-&gt;CustomerIDs(\n#        User =&gt; 'some-login',\n#    );\n#    my %User = $CustomerUserObject-&gt;CustomerUserDataGet(\n#        User =&gt; 'franz',\n#    );\n\n# Here is the problem\nmy $test = $CustomerUserObject-&gt;CustomerUserUpdate(\n    #Source         =&gt; 'CustomerUser',         # CustomerUser source config\n    ID             =&gt; 'admin',                # current user login\n    UserCustomerID =&gt; 'acmecompany',\n    UserLogin      =&gt; 'newuser',              # new user login\n    UserFirstname  =&gt; 'myfirst',\n    UserLastname   =&gt; 'mylast',\n    UserPassword   =&gt; '',                     # not required\n    UserEmail      =&gt; 'whatever@gmail.com',\n    ValidID        =&gt; 1,\n    UserID         =&gt; 4,\n);\n</code></pre>\n\n<p>And here is the error that I am receiving:</p>\n\n<blockquote>\n  <p>DBD::mysql::db do failed: Cannot add or update a child row: a foreign key  constraint fails (<code>otrs</code>.<code>customer_user</code>, CONSTRAINT<br>\n  <code>FK_customer_user_change_by_id</code> FOREIGN KEY (<code>change_by</code>) REFERENCES<br>\n  <code>users</code> (<code>id</code>)) at /opt/otrs/Kernel/System/DB.pm line 462. ERROR:<br>\n  ?LogPrefix?-27 Perl: 5.22.1 OS: linux Time: Fri Jan 19 17:29:12 2018  </p>\n  \n  <p>Message: Cannot add or update a child row: a foreign key constraint<br>\n  fails (<code>otrs</code>.<code>customer_user</code>, CONSTRAINT<br>\n  <code>FK_customer_user_change_by_id</code> FOREIGN KEY (<code>change_by</code>) REFERENCES<br>\n  <code>users</code> (<code>id</code>)), SQL: 'UPDATE customer_user SET  customer_ids = ?,<br>\n  title = ?,  first_name = ?,  last_name = ?,  login = ?,  email = ?,<br>\n  customer_id = ?,  phone = ?,  fax = ?,  mobile = ?,  street = ?,  zip<br>\n  = ?,  city = ?,  country = ?,  comments = ?,  valid_id = ?, change_time = \n          '2018-01-19 17:29:12'\n      , change_by = ? WHERE LOWER(login) = LOWER(?)'</p>\n  \n  <p>Traceback (19212):     Module:<br>\n  Kernel::System::CustomerUser::DB::CustomerUserUpdate Line: 961<br>\n  Module: Kernel::System::CustomerUser::CustomerUserUpdate Line: 473<br>\n  Module: update.pl Line: 30  </p>\n</blockquote>\n\n<p>I have read the documentation for\n<a href=\"http://doc.otrs.com/doc/api/otrs/5.0/Perl/Kernel/System/CustomerUser.pm.html\" rel=\"nofollow noreferrer\"><code>Kernel::System::CustomerUser</code></a>,\nwith no progress. Some of the documentation even appears to be incorrect.</p>\n\n<p>EDIT: Here is database values: </p>\n\n<pre><code>| id | login | email             | customer_id | pw  | title | first_name | last_name | phone | fax  | mobile | street | zip  | city | country | comments | valid_id | create_time         | create_by | change_time         | change_by | customer_ids |\n\n\n|  4 | admin | whatever@gmail.com | acmecompany | &lt;passwordhash&gt; | Mr.   | myfirst    | mylast  |       |      |        |        |      |      |         |          |        1 | 2018-01-16 11:30:11 |         1 | 2018-01-19 16:50:18 |         2 | 1            |\n</code></pre>\n"}, {"tags": ["perl", "perl-xs", "perlapi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516415420, "post_id": 48350260, "comment_id": 83690808, "body": "Could you post the generated .c on pastebin or something?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516436732, "post_id": 48350260, "comment_id": 83694627, "body": "@ikegami: sources and generated <code>.c</code> <a href=\"http://paste.scsys.co.uk/566429\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516602770, "post_id": 48350260, "comment_id": 83738532, "body": "Can&#39;t help you."}], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1516567129, "creation_date": 1516567129, "answer_id": 48371488, "question_id": 48350260, "link": "https://stackoverflow.com/questions/48350260/how-emulate-sname-call-from-xs/48371488#48371488", "title": "How emulate &amp;sname call from XS?", "body": "<p>Here is code for <code>XSUB</code> how it is done (NOTICE: I do not handle return arguments in this example):</p>\n\n<pre><code>test(...)\nCODE:\n    AV *defav_old =  GvAV(PL_defgv);   # Save current @_\n\n    AV *av = newAV();                  # Create new array\n    av_extend(av, items -1);          \n    AvREIFY_only(av);\n    AvFILLp(av) =  items -1;\n    Copy(MARK+1, AvARRAY(av), items, SV*); # Fill array by elements from stack\n\n    GvAV(PL_defgv) =  av;     # point @_ to our new array\n\n\n    PUSHMARK(SP);\n    int count =  call_pv( \"XS::Utils::hello\", G_VOID | G_NOARGS );\n\n    GvAV(PL_defgv) =  defav_old;  # Restore old @_\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1516567129, "creation_date": 1516399789, "last_edit_date": 1516446475, "question_id": 48350260, "link": "https://stackoverflow.com/questions/48350260/how-emulate-sname-call-from-xs", "title": "How emulate &amp;sname call from XS?", "body": "<p>How to emulate <code>z</code> sub behavior within <code>XS</code> sub?</p>\n\n<pre><code>package XS;\nsub hello {\n    print \"ARGS: &gt;&gt;@_&lt;&lt;\\n\";\n    my $lvl;\n    while( my @frame =  caller( $lvl++ ) ) {\n        print \"&gt;&gt;@frame[0..4]&lt;&lt;\\n\";\n    }\n}\n\nsub z {\n    &amp;hello;\n}\n</code></pre>\n\n<p>In my <code>.xs</code> file I have:</p>\n\n<pre><code>void\ncall_perl() {\n    call_pv( \"XS::hello\", G_NOARGS );    \n}\n\nvoid\ntest(...)\n    CODE:\n        call_perl();\n</code></pre>\n\n<p>But calling <code>XS::test(1,2,3)</code> do not pass any arguments to <code>hello</code>.</p>\n\n<p>The output:</p>\n\n<pre><code>ARGS: &gt;&gt;&lt;&lt;\n&gt;&gt;main -e 1 XS::hello &lt;&lt;\n</code></pre>\n\n<p>Here we can see that <code>$hasargs</code> flag is not set because of <code>G_NOARG</code> flag, but why <code>@_</code> is flushed? What did I miss?</p>\n\n<p><strong>UPD</strong><br>\nSeems found an half of the answer.</p>\n\n<ol>\n<li><p><a href=\"https://perldoc.perl.org/perlcall.html#G_NOARGS\" rel=\"nofollow noreferrer\">G_NOARGS</a> flag</p>\n\n<blockquote>\n  <p>has the effect of not creating the @_ array for the Perl subroutine.</p>\n</blockquote></li>\n<li><p>When <code>XSUB</code> is called the perl do not create the frame for it (can not remember where this is described) and do not fill <code>@_</code> for it (this described <strong>indirectly</strong> <a href=\"https://perldoc.perl.org/perlxs.html#The-Argument-Stack\" rel=\"nofollow noreferrer\">here</a>)</p>\n\n<blockquote>\n  <p>XSUBs refer to their stack arguments with the macro ST(x)</p>\n</blockquote></li>\n</ol>\n\n<p>So the more precise question will be:</p>\n\n<p><strong>How to propagate <code>XSUB</code> stack arguments to <code>PP</code> subroutine?</strong></p>\n\n<p>NOTICE: I can not just use:</p>\n\n<pre><code>call_pv( \"XS::hello\", 0 );\n</code></pre>\n\n<p>Because this is ordinal PP sub call. And when it returns the <code>XSUB</code> stack arguments will be replaced by a return value from <code>XS::hello</code> sub</p>\n\n<pre><code>int count =  call_pv( \"XS::hello\", 0 );\nSTAGAIN;\nprintf( \"%s\\n\", SvPV_nolen( ST(0) ) );\n</code></pre>\n\n<p>So I supply <code>G_NOARGS</code> flag to be able to access <code>XSUB</code> stack arguments after call to <code>PP</code> sub</p>\n"}, {"tags": ["arrays", "perl", "hash", "hashmap"], "comments": [{"owner": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516398820, "post_id": 48349899, "comment_id": 83686658, "body": "@ikegami: I have seen perl code where an entire array is processed at once, for example with grep or map.  I thought this could be faster than looping through each entry."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516398843, "post_id": 48349899, "comment_id": 83686669, "body": "You are mistaken. <code>grep</code> and <code>map</code> are just as much loops as <code>for</code>, and the assignment that assigns the resulting scalars to the array equally loops over all the scalars."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516398882, "post_id": 48349899, "comment_id": 83686689, "body": "Notes.  1) Use <code>for my $i (0..$#arr)</code>  2) Collect only odds /// Otherwise, you must visit each element, and you must visit each (second) substring. (But trying to visit <i>only each second</i> substring needs function calls and it will only be slower.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516400097, "post_id": 48349899, "comment_id": 83687197, "body": "Re &quot;<i><code>grep</code> and <code>map</code> are just as much loops as <code>for</code></i>&quot;, Actually, <code>for(@a) BLOCK</code> is more efficient than <code>map BLOCK @a</code> and <code>grep BLOCK @a</code> because it&#39;s optimized to iterate over the indexes of <code>@a</code> while <code>map</code> and <code>grep</code> put all the elements of <code>@a</code> on the stack."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1516399315, "last_edit_date": 1516399315, "creation_date": 1516398930, "answer_id": 48350104, "question_id": 48349899, "link": "https://stackoverflow.com/questions/48349899/perl-array-processing-at-once/48350104#48350104", "title": "perl array processing at once", "body": "<p>Your request makes no sense. If you want to perform something to each element of the array, you will necessarily have to loop through every element of the array (whether <code>for</code> is used or not).</p>\n\n<p>And I don't see anything in that code that would be slow (unless the OS started using virtual memory because you are running out of memory). It is wasteful to populate <code>@evens</code> and never use it. </p>\n\n<p>The following is a cleaner version of your code. It's also faster (thanks to <code>pairvalues</code> and avoiding temporary storage), but it shouldn't be substantially so.</p>\n\n<pre><code>use List::Util qw( pairvalues );  # 1.29+\n\nmy %s;\nfor (@arr) {\n   ++$s{$_} for pairvalues split /-&gt;/;\n}\n</code></pre>\n\n<p>If you don't mind weird/ugly code, the following is even faster (if only marginally):</p>\n\n<pre><code>use List::Util qw( pairvalues );  # 1.29+\n\nmy %s;\nfor (@arr) {\n   undef @s{ pairvalues split /-&gt;/ };\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1516446680, "last_edit_date": 1516446680, "creation_date": 1516446211, "answer_id": 48355325, "question_id": 48349899, "link": "https://stackoverflow.com/questions/48349899/perl-array-processing-at-once/48355325#48355325", "title": "perl array processing at once", "body": "<p>If you're interested in only those elements of the lists that have an odd index then a C-style <code>for</code> loop is the obvious choice</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy @arr = ( \"a-&gt;b-&gt;c-&gt;x-&gt;n\", \"something-&gt;something1-&gt;somethingelse\" );\n\nmy %s;\n\nfor ( @arr ) {\n\n    my @k = split /-&gt;/;\n\n    for ( my $i = 1; $i &lt; @k; $i += 2 ) {\n        $s{ $k[$i] } = 1;\n    }\n}\n\nuse Data::Dumper;\nprint Dumper \\%s;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>$VAR1 = {\n          'b' =&gt; 1,\n          'x' =&gt; 1,\n          'something1' =&gt; 1\n        };\n</code></pre>\n\n<p>You may also want to consider a regex solution if the values between the <code>-&gt;</code> are really as well-behaved as you describe. This assumes that the lists always contain an odd number of characters.</p>\n\n<pre><code>for ( @arr ) {\n    $s{ $1 } = 1 while /-&gt;(\\w+)-&gt;/g;\n}\n</code></pre>\n\n<p>The result of this loop is identical to that of the previous code</p>\n"}], "owner": {"reputation": 169, "user_id": 4447265, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/pWYgw.jpg?s=128&g=1", "display_name": "jbord39", "link": "https://stackoverflow.com/users/4447265/jbord39"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516446680, "creation_date": 1516397838, "question_id": 48349899, "link": "https://stackoverflow.com/questions/48349899/perl-array-processing-at-once", "title": "perl array processing at once", "body": "<p>I have an array with many many entries like: </p>\n\n<pre><code>\"a-&gt;b-&gt;c-&gt;x-&gt;n\"\n\"something-&gt;something1-&gt;somethingelse\"\n</code></pre>\n\n<p>I want to extract all odd elements from the array at once and make a hash with their unique values, like:</p>\n\n<pre><code>%s = {\n  \"b\" =&gt; '1'  \n  #the values don't matter too much, they could be # occurences, I am going to use keys %s.\n  \"x\" =&gt; '1'\n  \"something1\" =&gt; '1'\n}\n</code></pre>\n\n<p>Currently I am doing this in a couple steps but just looping through the array is taking a substantial amount of time so I think there is someway to do it better.</p>\n\n<pre><code>my ( @odds, @evens );\nforeach (@arr) {\n  my $i = 0;\n  push @{ $i++ % 2 ? \\@odds : \\@evens }, $_ for split /-&gt;/, $_;\n}\n%s = map {  $_ =&gt; '1'; } @odds;\n</code></pre>\n\n<p>Any suggestions to process the whole array at once?</p>\n"}, {"tags": ["perl", "http", "lwp"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "edited": false, "score": 0, "creation_date": 1516446210, "post_id": 48350491, "comment_id": 83697181, "body": "Hello, Thank You @David for your answer, but even after trying the code i get the below error: <code>{&quot;Success&quot;:false,&quot;Error&quot;:&quot;Signature does not match request parameters.&quot;}</code>Please can you provide inputs on how can i solve this issue. It works when i test with Java code using the same Private key and Public key but it does not work with Perl."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "reply_to_user": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "edited": false, "score": 0, "creation_date": 1516450500, "post_id": 48350491, "comment_id": 83698554, "body": "I think the problem might be that the MIME::Base64 module does not automatically pad the output of <code>encode_base64()</code> to 4 bytes. See <a href=\"https://perldoc.perl.org/Digest/SHA.html#PADDING-OF-BASE64-DIGESTS\" rel=\"nofollow noreferrer\">perldoc.perl.org/Digest/SHA.html#PADDING-OF-BASE64-DIGESTS</a> for example."}, {"owner": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "edited": false, "score": 0, "creation_date": 1516454723, "post_id": 48350491, "comment_id": 83699828, "body": "Thank You @David . I tried doing <code>encode_base64(md5($post_data),&#39; &#39;);</code>Still it does not work:(."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "reply_to_user": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "edited": false, "score": 0, "creation_date": 1516455589, "post_id": 48350491, "comment_id": 83700095, "body": "Hi. No. That won&#39;t work. See solution on link above."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "reply_to_user": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "edited": false, "score": 0, "creation_date": 1516457386, "post_id": 48350491, "comment_id": 83700730, "body": "I have updated my answer. I think it should work for you now. Note that the example uses the <code>GetTradeHistory</code> API call instead of <code>SubmitTrade</code> (which is probably safer during testing). You will want to modify the <code>%req</code> object and URL as appropriate."}, {"owner": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "edited": false, "score": 0, "creation_date": 1516457565, "post_id": 48350491, "comment_id": 83700797, "body": "Ok Thanks @David ."}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "reply_to_user": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "edited": false, "score": 0, "creation_date": 1516460333, "post_id": 48350491, "comment_id": 83701761, "body": "On further examination ... I think the issue with the Base64-encoding is not the 4-byte padding (or lack thereof) - but the fact that <code>encode_base64()</code> adds a newline to the output by default. Passing an empty string as the second parameter fixes this. (The updated code reflects this.)"}], "tags": [], "owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "is_accepted": false, "score": 0, "last_activity_date": 1516460109, "last_edit_date": 1592644375, "creation_date": 1516401118, "answer_id": 48350491, "question_id": 48347611, "link": "https://stackoverflow.com/questions/48347611/post-api-in-perl-using-lwpuseragent-with-authentication/48350491#48350491", "title": "POST API in Perl using LWP::UserAgent with authentication", "body": "<p>I don't have a Cryptopia account to test this, but this might at least get you closer to a working prototype.</p>\n<h2>Setup</h2>\n<p>Load the required modules and create a <code>LWP::UserAgent</code> object.</p>\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse JSON;\nuse Digest::MD5 qw(md5);\nuse Digest::SHA qw(hmac_sha256);\nuse MIME::Base64;\nuse URI::Encode qw(uri_encode);\n\nmy $api_key = 'PUBLIC KEY';\nmy $api_private_key = 'PRIVATE KEY';\n\nmy $ua = LWP::UserAgent-&gt;new;\n</code></pre>\n<h2>Generating the request</h2>\n<p>The tricky part is generating the authorization header. The API keys for your account will be base64-encoded - hence the call to <code>decode_base64()</code> when using it to sign the request.</p>\n<pre><code>my $url = &quot;https://www.cryptopia.co.nz/api/GetTradeHistory&quot;;\n\nmy %req = (\n    Market =&gt; 'DOT/BTC',\n);\n\nmy $nonce = int(rand(1000000));\nmy $post_data = encode_json(\\%req);\nmy $post_data_enc = encode_base64(md5($post_data), &quot;&quot;);\nmy $encoded_url = lc(uri_encode($url, encode_reserved =&gt; 1));\nmy $req_signature = sprintf(&quot;%sPOST%s%s%s&quot;, $api_key, $encoded_url, $nonce, $post_data_enc);\n# Sign request signature with private key.\nmy $req_signature_hmac = encode_base64(hmac_sha256($req_signature, decode_base64($api_private_key)));\n# Generate value for 'Authorization' header field.\nmy $auth_header_value = sprintf(&quot;amx %s:%s:%s&quot;, $api_key, $req_signature_hmac, $nonce);\n</code></pre>\n<p>Notes ...</p>\n<ul>\n<li>An empty string is passed as the second argument to <code>encode_base64()</code> - to prevent it from appending a new-line to the output.</li>\n<li><code>uri_encode()</code> from the <code>URI::Encode</code> module is used the encode the URL.</li>\n<li>You might want to use an alternative source or random generator for the nonce.</li>\n</ul>\n<h1>Sending the request</h1>\n<p>You could create a <code>HTTP::Request</code> object explicitly and pass that to <code>LWP::UserAgent</code>'s <code>request()</code> method, but there is a <code>post()</code> convenience method which does all this for you.</p>\n<p>The example here uses the <code>Content</code> parameter to set the content of the post body, and sets the <code>Authorization</code> and <code>Content-Type</code> headers at the same time.</p>\n<pre><code>my $response = $ua-&gt;post($url,\n    Content =&gt; $post_data,\n    'Content-Type' =&gt; 'application/json',\n    Authorization =&gt; $auth_header_value\n);\n\ndie &quot;Request failed: &quot;, $response-&gt;content unless $response-&gt;is_success();\n\nprint $response-&gt;content, $/;\n</code></pre>\n<h2>Checking the response</h2>\n<p>It may be enough to check the LWP Response object as above - by invoking the <code>$response-&gt;is_success()</code> method. Nonetheless, if you want to explicitly check for success, just decode the JSON response - using <code>$resp = decode_json($response-&gt;decoded_content)</code>. Then examine the relevant keys in the resulting hash.</p>\n"}], "owner": {"reputation": 63, "user_id": 9148262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a26a98b1a98a2cc38459fb52684f291b?s=128&d=identicon&r=PG&f=1", "display_name": "user9148262", "link": "https://stackoverflow.com/users/9148262/user9148262"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2287, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1516460109, "creation_date": 1516387308, "last_edit_date": 1516405025, "question_id": 48347611, "link": "https://stackoverflow.com/questions/48347611/post-api-in-perl-using-lwpuseragent-with-authentication", "title": "POST API in Perl using LWP::UserAgent with authentication", "body": "<p>I am trying to use POST method in perl to send information to an API.</p>\n\n<p>I would like to call the below api which requires following inputs:\nURI: <a href=\"https://www.cryptopia.co.nz/api/SubmitTrade\" rel=\"nofollow noreferrer\">https://www.cryptopia.co.nz/api/SubmitTrade</a></p>\n\n<p>Input Parameters are:-</p>\n\n<p>Market: The market symbol of the trade e.g. 'DOT/BTC' (not required if 'TradePairId' supplied)</p>\n\n<p>TradePairId: The Cryptopia tradepair identifier of trade e.g. '100' (not required if 'Market' supplied)</p>\n\n<p>Type: the type of trade e.g. 'Buy' or 'Sell'</p>\n\n<p>Rate: the rate or price to pay for the coins e.g. 0.00000034</p>\n\n<p>Amount: the amount of coins to buy e.g. 123.00000000</p>\n\n<p>Please can you tell me how I can call this api from perl ?\nRequest Structure:</p>\n\n<p>REQUEST_SIGNATURE: API_KEY + \"POST\" + URI + NONCE + HASHED_POST_PARAMS</p>\n\n<p>API_KEY: Your Cryptopia api key</p>\n\n<p>URI: the request uri. e.g. <a href=\"https://www.cryptopia.co.nz/Api/SubmitTrade\" rel=\"nofollow noreferrer\">https://www.cryptopia.co.nz/Api/SubmitTrade</a></p>\n\n<p>HASHED_POST_PARAMS: Base64 encoded MD5 hash of the post parameters</p>\n\n<p>NONCE: unique indicator for each request.</p>\n\n<p>So question is how do I join this api <a href=\"https://www.cryptopia.co.nz/api/SubmitTrade\" rel=\"nofollow noreferrer\">https://www.cryptopia.co.nz/api/SubmitTrade</a> and pass the arguments to it with authentication and check if returned result is success?</p>\n\n<p>Result Example:</p>\n\n<pre><code>{\n    \"Success\":true,\n    \"Error\":null,\n    \"Data\":\n          {\n             \"OrderId\": 23467,\n             \"FilledOrders\": [44310,44311]\n          }          \n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1516381688, "post_id": 48344464, "comment_id": 83678094, "body": "Does it work for small file uploads?"}, {"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1516381910, "post_id": 48344464, "comment_id": 83678205, "body": "No. It does not work."}], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "edited": false, "score": 0, "creation_date": 1516406824, "post_id": 48348886, "comment_id": 83689266, "body": "Thank you. Yep that was my understanding as well. I wanted to verify my understaning. You made me clear."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1516394483, "last_edit_date": 1516394483, "creation_date": 1516393069, "answer_id": 48348886, "question_id": 48344464, "link": "https://stackoverflow.com/questions/48344464/how-to-make-a-mojoliciouspluginminion-job-handle-a-large-file-upload/48348886#48348886", "title": "How to make a Mojolicious::Plugin::Minion job handle a large file upload", "body": "<p>You can't pass objects (or any form of reference) as parameters in the <code>enqueue</code> call, as they would be meaningless in the context of the minion</p>\n\n<p>This statement</p>\n\n<pre><code>my $id = $c-&gt;minion-&gt;enqueue( upload_file =&gt; [ $c-&gt;param('filepath') ] );\n</code></pre>\n\n<p>is passing the <em>serialised version</em> of the <code>Mojo::Upload</code> object, which is <em>the string</em>\n<code>\"Mojo::Upload=HASH(0x34451d0)\"</code>, so it makes no sense to call the <code>filename</code> method on it</p>\n\n<p>Having said that, I'm afraid I can't offer a way to make this work. The data from the file is being sent as part of an HTTP request, and it doesn't make sense to send a response to that request before the server has finished receiving it. Making the server asynchronous doesn't mean your client can do the same thing</p>\n\n<p>There's not much that makes sense from the client's point of view: it still has to be running code to transfers the file's contents to the server. You can't just continue with an interactive session while the transfer continues unless you want to do the transfer outside the normal HTTP dialogue</p>\n"}], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 1, "accepted_answer_id": 48348886, "answer_count": 1, "score": -1, "last_activity_date": 1516394483, "creation_date": 1516375884, "last_edit_date": 1516390096, "question_id": 48344464, "link": "https://stackoverflow.com/questions/48344464/how-to-make-a-mojoliciouspluginminion-job-handle-a-large-file-upload", "title": "How to make a Mojolicious::Plugin::Minion job handle a large file upload", "body": "<p>I am trying to handle large file uploads with\n<a href=\"https://metacpan.org/pod/Mojolicious::Plugin::Minion\" rel=\"nofollow noreferrer\"><code>Mojolicious::Plugin::Minion</code></a>\nso that I can respond to the user or the REST API caller quickly.</p>\n\n<pre><code>    # app start up   \n     sub startup {\n        ...\n        $self-&gt;minion-&gt;add_task(upload_file =&gt; sub {\n                                        my ($job, $file) = @_;\n                                        my $filename = $file-&gt;filename;\n        });\n        ...\n      }\n\n    # Controller:\n      sub upload_file {\n            my $c = shift;\n            $c-&gt;openapi-&gt;valid_input or return;\n\n            # curl  -k -F name=test -F filepath=@/tmp/test.txt http://endpoint-to-uplod_file\n            my $id = $c-&gt;minion-&gt;enqueue(upload_file =&gt; [$c-&gt;param('filepath')]);\n\n            return $c-&gt;render(openapi =&gt; {\n                message =&gt; q|request to upload file has been received Successfully.\n                       This File will be zipped, encrypted and finally transferred to cloud.|,      \n                statuscheck_endpoint =&gt; \"uploadStatus/$id\",\n                jobid =&gt; $id\n            });\n       }\n</code></pre>\n\n<p>It looks like the minion doesn't get the object. I get the following error</p>\n\n<blockquote>\n  <p>Can't locate object method \"filename\" via package \"Mojo::Upload=HASH(0x34451d0)\" (perhaps you forgot to load \"Mojo::Upload=HASH(0x34451d</p>\n</blockquote>\n\n<p>Given that a minion job is run as child process, is this kind of IPC even possible?</p>\n\n<p>Please help me to understand. I think that, until the file is uploaded, the server and the client are busy transferring file data and the server is unable to send back the response even though the minion can handle this.</p>\n"}, {"tags": ["perl", "csv", "data-dumper"], "comments": [{"owner": {"reputation": 28754, "user_id": 1153938, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/deBjQ.jpg?s=128&g=1", "display_name": "Vorsprung", "link": "https://stackoverflow.com/users/1153938/vorsprung"}, "edited": false, "score": 1, "creation_date": 1516372753, "post_id": 48343407, "comment_id": 83672435, "body": "the keys you are using don&#39;t match anything in the dump output."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1516373158, "post_id": 48343407, "comment_id": 83672696, "body": "before reading the code I can say you should always <code>use strict</code> and <code>use warnings</code>.  You will avoid a LOT of mistakes ;)"}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1516373399, "post_id": 48343407, "comment_id": 83672860, "body": "also, you should use 2 <code>print</code>, with your current code, only <code>$ip</code> will be printed"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1516373477, "post_id": 48343407, "comment_id": 83672916, "body": "I was just thinking this looks suspiciously similar to the output of <code>XML::Simple</code>. And sure enough... it is!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516930723, "post_id": 48343407, "comment_id": 83902348, "body": "A reminder, see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a> It appears by your follow-up question that this is resolved but if there are still issues can you provide feedback?"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1516930564, "last_edit_date": 1516930564, "creation_date": 1516386174, "answer_id": 48347335, "question_id": 48343407, "link": "https://stackoverflow.com/questions/48343407/csv-file-from-a-hash-perl/48347335#48347335", "title": "CSV file from a hash perl", "body": "<p>The <code>Dumper</code> output begins with \"<em>bless</em>\" so you have objects on hand and  thus need to find methods to query them, not directly poke into their hashref.</p>\n\n<p>From <a href=\"https://metacpan.org/pod/Net::Cisco::ISE\" rel=\"nofollow noreferrer\">Net::Cisco::ISE</a> docs <sup>&midast;</sup></p>\n\n<blockquote>\n  <p><strong>networkdevices</strong></p>\n  \n  <p>The returned hash contains instances of <code>Net::Cisco::ISE::NetworkDevice</code> ...<br>\n  ...<br>\n  When you know the hostname or ID, use the <code>devices</code> call with arguments as listed below.</p>\n</blockquote>\n\n<p>which identifies what class the returned object belong to,  and goes on to give an example</p>\n\n<blockquote>\n<pre><code>my $device = $ise-&gt;networkdevices(\"id\",\"123\"); \n</code></pre>\n</blockquote>\n\n<p>Then look through <a href=\"https://metacpan.org/pod/Net::Cisco::ISE::NetworkDevice\" rel=\"nofollow noreferrer\">Net::Cisco::ISE::NetworkDevice</a> for methods to use on <code>$device</code>.</p>\n\n<p>So instead of</p>\n\n<pre><code>my $ip = $networkdevices{$name}{'ipaddress'}; # etc\n</code></pre>\n\n<p>use <code>$ise-&gt;networkdevices</code> as above and make further <em>method calls</em> on the returned object.  <sup>&dagger;</sup></p>\n\n<p><strong>Note</strong> &nbsp; </p>\n\n<p>An object is a reference, and normally a hash reference, and one <em>can</em> indeed use it as such. However, that is Not Good, it is borne with trouble, and should really never be done.  </p>\n\n<p>Every single poke into object internals may eventually crumble the program, and by the nature of that business probably in subtle ways that are difficult to diagnose (discover). </p>\n\n<p>Remember that an important point about a class is to offer an interface to its functionality and shield the internals from any obligation; it encapsulates the implementation so that it is in principle invisible to the user. The internals may change at any point, without any notice, and perhaps in subtle ways.</p>\n\n<p>One should <em>always</em> find methods that are provided for that class and only use those.</p>\n\n<hr>\n\n<p><sup>&midast;</sup> The CPAN page for this seems to have far less detail</p>\n\n<p><sup>&dagger;</sup> Even if you were to retrieve values directly from <code>$networkdevices</code>, it is a hashref so it needs to be dereferenced first, <code>$networkdevices-&gt;{...}{...}</code> where after the first level we may indeed drop the arrow, by a <a href=\"https://perldoc.perl.org/perlref.html#Using-References\" rel=\"nofollow noreferrer\">syntax convenience</a>. (But please don't do this with objects.)</p>\n"}], "owner": {"reputation": 145, "user_id": 7541194, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/3EjPX.jpg?s=128&g=1", "display_name": "StayCalm", "link": "https://stackoverflow.com/users/7541194/staycalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516930564, "creation_date": 1516372488, "last_edit_date": 1516874664, "question_id": 48343407, "link": "https://stackoverflow.com/questions/48343407/csv-file-from-a-hash-perl", "title": "CSV file from a hash perl", "body": "<p>I'm trying to get csv file from my Output.    </p>\n\n<pre><code> use Net::Cisco::ISE;\n use Data::Dumper;\n use Text::CSV;\n\n my $ise = Net::Cisco::ISE-&gt;new(hostname=&gt;'hostname', username=&gt;'user', password=&gt;'user');  \n $ise-&gt;namespace3;\n $ise-&gt;namespace5;\n\n my $networkdevices = $ise-&gt;networkdevices;\n for my $name (keys %{$networkdevices})\n    {\n       print   Dumper $ise-&gt;networkdevices(\"id\" =&gt; $networkdevices-&gt;{$name}-&gt;id);\n    }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     $VAR1 = bless( {\n             'NetworkDeviceGroupList' =&gt; {\n                                           'NetworkDeviceGroup' =&gt; [\n                                                                   'Device Type#All Device Types',\n                                                                   'IPSEC#Is IPSEC Device#No',\n                                                                   'Location#All Locations'\n                                                                 ]\n                                         },\n             'tacacsSettings' =&gt; {\n                                   'previousSharedSecretExpiry' =&gt; '0',\n                                   'connectModeOptions' =&gt; 'OFF',\n                                   'sharedSecret' =&gt; '******'\n                                 },\n             'NetworkDeviceIPList' =&gt; {\n                                        'NetworkDeviceIP' =&gt; {\n                                                             'mask' =&gt; '24',\n                                                             'ipaddress' =&gt; '10.66.0.0'\n                                                           }\n                                      },\n             'name' =&gt; 'LAB-Distri',\n             'coaPort' =&gt; '1700',\n             'authenticationSettings' =&gt; {\n                                           'radiusSharedSecret' =&gt; '******',\n                                           'keyInputFormat' =&gt; 'ASCII',\n                                           'enableKeyWrap' =&gt; 'false',\n                                           'networkProtocol' =&gt; 'RADIUS'\n                                         },\n             'profileName' =&gt; 'Cisco',\n             'id' =&gt; '3d21e200-a534-11e3-82cc-00505694f123'\n           }, 'Net::Cisco::ISE::NetworkDevice' );\n</code></pre>\n\n<p>This script should give me my wiched elements (ipadress and name) in console but it doesn't work </p>\n\n<pre><code>   foreach $name (keys %{$networkdevices}){\n   print  \n   my $ip = $networkdevices{$name}{'ipaddress'};\n   my $name = $networkdevices{$name}{'name'};\n   }\n</code></pre>\n\n<p>At the end I Need a csv file with names and ip addresses from devices.</p>\n\n<hr>\n\n<p>Now I use just two methods: <code>Name</code> and <code>NetworkDeviceIPList</code> (just to clean my output info). Unfortunatelly in  <code>Net::Cisco::ISE</code> there is no method just for <code>IPs</code> to get just ips. I can call <code>NetworkDeviceIPList</code> and get:  </p>\n\n<pre><code> for my $name (keys %{$networkdevices}){\n my $device = $ise-&gt;networkdevices(\"id\" =&gt; $networkdevices-&gt;{$name}-&gt;id);\n print Dumper $device-&gt;name;\n print Dumper $device-&gt;NetworkDeviceIPList;\n }\n</code></pre>\n\n<p>And I have this output:  </p>\n\n<pre><code> $VAR1 = 'LAB-W';\n $VAR1 = {\n    'NetworkDeviceIP' =&gt; {\n    'mask' =&gt; '32',\n    'ipaddress' =&gt; '10.66.1.12'\n  }\n  };\n</code></pre>\n\n<p>But I do not know how to get now from this output csv data with Arrays of names and ips. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516368171, "post_id": 48341843, "comment_id": 83669410, "body": "What do you mean by, <i>I am getting garbage value 3</i> I do not see any result with 3, just 30, I also do not see the example file for where you store the time?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516368174, "post_id": 48341843, "comment_id": 83669412, "body": "What&#39;s the error you&#39;re getting? What output actually is generated given your input?"}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516368732, "post_id": 48341843, "comment_id": 83669777, "body": "@GerhardBarnard the data from example file is shown above. and the output for each is as expected but only for $diff am getting as 3"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1516368937, "post_id": 48342135, "comment_id": 83669895, "body": "edited code, $timefromfile is the only variable. strict, warnings and Time:peice is all loaded in my code. Here only the relevant part of code is presented."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 2, "creation_date": 1516369235, "post_id": 48342135, "comment_id": 83670057, "body": "It&#39;s useful to indicate when it&#39;s a snippet. It&#39;s even more useful to supply a runnable example, so we don&#39;t have to rewrite it to get to that point first."}, {"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1516371521, "post_id": 48342135, "comment_id": 83671574, "body": "I&#39;ll make sure to include those things in my write up, however I need the difference between time in DATA and current time."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1516369097, "last_edit_date": 1516369097, "creation_date": 1516368178, "answer_id": 48342135, "question_id": 48341843, "link": "https://stackoverflow.com/questions/48341843/getting-garbage-value-while-calculating-difference-between-already-defined-and-c/48342135#48342135", "title": "Getting garbage value while calculating difference between already defined and current time (perl script)", "body": "<p>Step 1 of troubleshooting perl: Turn on <code>use strict;</code> and <code>use warnings</code>:</p>\n\n<ul>\n<li>You try to parse <code>$SLAtime</code> but you don't ever define or declare it.</li>\n<li>You declare <code>$timefromfile</code> but with no <code>;</code> so that won't compile. </li>\n<li>Your indentation is broken. (You've mismatched brackets). </li>\n<li>You subtract a value from <code>@t</code>. That value is undefined because of the above and because you don't have <code>strict</code> or <code>warnings</code> just silently evaluates as zero. <code>@t</code> contains 3 elements, and that's how it's evaluated in a scalar context. That's probably where your <code>3</code> is coming from. </li>\n<li>You have a <code>printf</code> mixed in there, with no format string or variable. Which is a bit weird.</li>\n<li>It's unclear if you even load <code>Time::Piece</code> in the first place. Which makes it considerably harder to use. </li>\n<li><code>Time::Piece-&gt;strptime</code> uses the epoch as your baseline. You're comparing with 1st Jan 1970, so your delta will be much bigger than you think. </li>\n</ul>\n\n<p>Something like:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Time::Piece;\n\nwhile (&lt;DATA&gt;) {\n   print;\n   unless (m/^\\s*\\#/) {\n      chomp;\n      my ( $ID, $name, $timestr ) = split /::/;\n      my $now = localtime;\n\n#note - this assumes time stamps are from today, which may not be what you want.\n      my $converted_time = Time::Piece-&gt;strptime(\n         join( \" \", $timestr, $now-&gt;year, $now-&gt;mon, $now-&gt;mday ),\n         '%H %M %S %Y %m %d' );\n\n      my $diff = $converted_time - $now;\n\n      print \"Diff is: $diff s\\n\";\n\n\n   }\n}\n\n\n__DATA__\n##ID::name::time\n228::one::18 30 30\n97::two::20 30 00\n</code></pre>\n\n<p>Gets you a bit closer. </p>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "edited": false, "score": 0, "creation_date": 1516369267, "post_id": 48342142, "comment_id": 83670076, "body": "I&#39;m guessing that you expect this to do a pairwise subtraction? (i.e., Subtract the first item in each list, then the second item, then the third item.)::::::::::: yes exactly. How can I achieve that. I am new to perl and not able to make it from DateTime as well. Please suggest"}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 1, "last_activity_date": 1516369561, "last_edit_date": 1516369561, "creation_date": 1516368200, "answer_id": 48342142, "question_id": 48341843, "link": "https://stackoverflow.com/questions/48341843/getting-garbage-value-while-calculating-difference-between-already-defined-and-c/48342142#48342142", "title": "Getting garbage value while calculating difference between already defined and current time (perl script)", "body": "<pre><code>my $diff = @t - Time::Piece-&gt;strptime($SLAtime, $format );\n</code></pre>\n\n<p>I'm guessing that you expect this to do a pairwise subtraction?  (i.e., Subtract the first item in each list, then the second item, then the third item.)</p>\n\n<p>It doesn't.</p>\n\n<p>It evaluates each of the operands in scalar context, then subtracts those scalars.  If one of the scalars is a string, it will first be coerced into a number.</p>\n\n<p>When an array is evaluated in scalar context, the result is the number of items in the array.</p>\n\n<p>So:</p>\n\n<ul>\n<li>You start with <code>@t - Time::Piece-&gt;strptime($SLAtime, $format )</code></li>\n<li><code>@t</code> is an array with three items in it and the <code>strptime</code> is a string looking something like \"Sunday 3rd Nov, 1943\" (the example from the <code>Time::Piece</code> docs; I don't know what your <code>$format</code> looks like), so the subtraction becomes <code>3 - \"Sunday 3rd Nov, 1943\"</code></li>\n<li>\"Sunday 3rd Nov, 1943\" doesn't start with a digit, so its value as a number is <code>0</code>, making your subtraction <code>3 - 0</code></li>\n<li>Therefore, you always get <code>3</code> as the result.</li>\n</ul>\n\n<p>If you want to subtract dates and/or times correctly, take a look at the <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> module, which includes methods for performing date arithmetic.</p>\n"}, {"tags": [], "owner": {"reputation": 300, "user_id": 3240659, "user_type": "registered", "profile_image": "https://graph.facebook.com/565306868/picture?type=large", "display_name": "nickcrabtree", "link": "https://stackoverflow.com/users/3240659/nickcrabtree"}, "is_accepted": false, "score": 1, "last_activity_date": 1516603775, "last_edit_date": 1516603775, "creation_date": 1516373385, "answer_id": 48343690, "question_id": 48341843, "link": "https://stackoverflow.com/questions/48341843/getting-garbage-value-while-calculating-difference-between-already-defined-and-c/48343690#48343690", "title": "Getting garbage value while calculating difference between already defined and current time (perl script)", "body": "<p>You are trying to subtract a <code>Time::Piece</code> object from an array, which won't work.</p>\n\n<p>You need to get the current time into a <code>Time::Piece</code> object too, and then subtracting them will return a <code>Time::Seconds</code> object, like this:</p>\n\n<pre><code>use Time::Piece;\nuse Time::Seconds;\nmy $current_time = Time::Piece-&gt;localtime();\nmy $timefromfile=\"2018-01-17 18 30 30\";\nmy $format = \"%Y-%m-%d %H %M %S\";\nmy $diff = $current_time - Time::Piece-&gt;strptime($timefromfile, $format);\nprint \"Difference in seconds is \", $diff-&gt;seconds(), \"\\n\";\n</code></pre>\n\n<p>You'll also need to give the date to the <code>strptime</code> command. If you know the date is always today (and watch out for this around midnight) then you can simply do this:</p>\n\n<pre><code>my $timefromfile = $current_time-&gt;ymd() . \" 18 30 30\";\n</code></pre>\n\n<p><em>NOTE!</em> I'm putting in the time from file as a hard-coded constant so the code above is runnable. You'll need to adapt accordingly.</p>\n"}], "owner": {"reputation": 39, "user_id": 5047700, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/09413769ab2397b2b743bd49d18f09b3?s=128&d=identicon&r=PG&f=1", "display_name": "STJ", "link": "https://stackoverflow.com/users/5047700/stj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1516603775, "creation_date": 1516367228, "last_edit_date": 1516368628, "question_id": 48341843, "link": "https://stackoverflow.com/questions/48341843/getting-garbage-value-while-calculating-difference-between-already-defined-and-c", "title": "Getting garbage value while calculating difference between already defined and current time (perl script)", "body": "<p>I have time (only in hours &amp; minutes) defined in one text file and getting current time from machine. Below is my code and am getting garbage value as 3. Code in perl script. Data in text file is as:</p>\n\n<pre><code>                   ##ID::name::time\n                   228::one::18 30 30\n                   97::two::20 30 00\n</code></pre>\n\n<p>Code is as : Please suggest.</p>\n\n<pre><code>         my $timefromfile;\n    open(my $fh, \"&lt;\", $paramfile) or die(\"Can't open $paramfile\\n\") ;\n        {\n        print \"before while\\n\";\n    while (my $line = &lt;$fh&gt;) {\n        print \"$line\\n\";\n        if($line !~ m/^\\#/){\n            chomp($line);\n        #if line isn't blank, process it\n            if($line ne \"\"){\n                push(@all_linesSettings, $line);\n                my @lineseparator = split(/\\::/, $line);\n                $timefromfile = $lineseparator[-1];\n                my $namefromfile = $lineseparator[-2];\n                my $IDfromfile = $lineseparator[-3]; \n                print \"File Time for $IDfromfile $namefromfile is \n                    $timefromfile \\n\";\n\n                print \"**********\\n\";   \n                (my $sec,my $min,my $hour) = localtime();\n                printf(\"Current Time is in - HH:MM:SS format  \");\n                #get time into a variable\n                my @t;\n                @t = ($hour, $min, $sec);           \n                print \"\\n@t\\n\";\n                print \"\\n**********\\n\";\n\n                my $format = '%H %M %S';\n                my $diff = @t - Time::Piece-&gt;strptime($timefromfile, $format );\n                print \"\\n now slatime is $timefromfile\\n\";\n                print  \"difference in seconds $diff\\n\";\n            }\n        }\n            }\n        }\n            close $fh;\n            }\n</code></pre>\n"}, {"tags": ["perl", "dancer"], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516358497, "creation_date": 1516358497, "question_id": 48339227, "link": "https://stackoverflow.com/questions/48339227/how-to-create-a-library-module-to-expand-dancer2-main-script", "title": "How to create a library module to expand Dancer2 main script", "body": "<p>I would like to create a relatively complex web application. For that I find very convenient the <a href=\"http://perldancer.org/\" rel=\"nofollow noreferrer\">Dancer2</a> way of programming using the provided <a href=\"https://metacpan.org/pod/Dancer2::Manual\" rel=\"nofollow noreferrer\">DSL</a> (Domain-Specific Language). I also find the set of provided libraries excelent.</p>\n\n<p>According to the documentation, if you wanted to split your main script in several libraries, you would use:</p>\n\n<pre><code>use Dancer2 appname =&gt; 'MyApp';\n</code></pre>\n\n<p>At the beginning of the <em>other</em> libraries. This is quite useful, but I would like to go a step further and define a library used by the main one to add more functionality in a modular way. I have tried:</p>\n\n<pre><code>package MyLibrary;\nuse Dancer2 appname =&gt; 'MyApp';\n</code></pre>\n\n<p>Then, in order to export variables and functions:</p>\n\n<pre><code>require Exporter;\nour (@ISA, @EXPORT, @EXPORT_OK);\n@ISA       = qw(Exporter);\n@EXPORT    = qw( func1 func2 );\n@EXPORT_OK = qw( func3 );\n</code></pre>\n\n<p>But I have found that these definitions are not exported. I can still access any function from the main script in the usual <em>long</em> way <code>MyLibrary::func1</code> but not with <code>func1</code>. This happens as soon as I add <code>use Dancer2 appname =&gt; 'MyApp';</code>. But if I don't do that, I cannot access any application specific data from inside the library. Say I want to check a configuration option like <code>config-&gt;{myoption}</code>.</p>\n\n<p>So, am I trying to do something that should be done in a different way? Is there a way around this? I am using Dancer2 version 0.205002.</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1516358598, "post_id": 48339200, "comment_id": 83663603, "body": "Your XML is not well formed: the ID opening and closing tags have different namespace. There&#39;s no root node. Can you show the definitions of the namespaces?"}, {"owner": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1516360227, "post_id": 48339200, "comment_id": 83664578, "body": "@choroba, I&#39;ve updated the XML. Let me know what you think."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516360360, "post_id": 48339200, "comment_id": 83664671, "body": "I&#39;m sorry, but we can&#39;t help you unless we get a better idea of what your XML looks like. There may be only a single document element, and you have five; <code>&lt;paraid:ID&gt;1234&lt;&#47;pmluid:ID&gt;</code> has a closing tag that doesn&#39;t match the opening tag, and the various namespace prefixes aren&#39;t declared."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1516360871, "post_id": 48339200, "comment_id": 83664985, "body": "You need to provide the XSD file that is in your document element."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "edited": false, "score": 0, "creation_date": 1516366073, "post_id": 48339805, "comment_id": 83668149, "body": "thanks so much! The first script works, except for the issue where the paraid was inserted only on the first file.  Running the second script results in this error: amra1700:/home/vikkrn/xmlsplit$ ./Perlsplit2.pl Can&#39;t call method &quot;paste&quot; on an undefined value at ./Perlsplit2.pl line 24.  at ./Perlsplit2.pl line 37  at ./Perlsplit2.pl line 37"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516368891, "post_id": 48339805, "comment_id": 83669873, "body": "Why <code>print {$output} $twig-&gt;sprint</code> instead of <code>$twig-&gt;print($output)</code>?"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1516362740, "last_edit_date": 1516362740, "creation_date": 1516360326, "answer_id": 48339805, "question_id": 48339200, "link": "https://stackoverflow.com/questions/48339200/splitting-a-large-xml-file-based-on-n-occurrences-of-a-given-element/48339805#48339805", "title": "Splitting a large XML file based on N occurrences of a given element", "body": "<p>You can absolutely do this with <code>XML::Twig</code> using <code>purge</code> to keep memory footprint down. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::Twig;\n\n#the number of elements per file\nmy $subelt_count = 2;\n#a running tally for numbering output files\nmy $count        = 1;\n#a holding space for the current 'batch' that gets emptied each time\nmy @processed_elements;\n\n#called when the parser hits a matching element, as it goes. \nsub process_xml {\n   my ( $twig, $elt ) = @_;\n\n   push( @processed_elements, $elt );\n\n   if ( @processed_elements &gt;= $subelt_count ) {\n\n      #2 processed so far, start a new file\n      open( my $output, \"&gt;\", \"file_\" . $count++ . \".xml\" ) or die $!;\n      print {$output} $twig-&gt;sprint;\n      close($output);\n\n      #delete the elements we've already printed\n      $_-&gt;delete for @processed_elements;\n      @processed_elements = ();\n      #Dump processed stuff from memory\n      $twig -&gt; purge;\n   }\n}\n\nmy $parser =\n  XML::Twig-&gt;new(\n   twig_handlers =&gt; { 'pmlcore:Observation' =&gt; \\&amp;process_xml } );\n$parser-&gt;set_pretty_print('indented_a');\n$parser-&gt;parsefile ( 'input_file_name.xml' );\n\n#in case there's any trailing elements (e.g. there's not exactly a multiple of $subelt_count in the file), otherwise they'll be discarded\nif ( $parser-&gt;get_xpath('//pmlcore:Observation') ) {\n   $parser-&gt;print;\n}\n</code></pre>\n\n<p>Note - this will work at a level of <code>&lt;pmlcore:Observation&gt;</code> tags - so your <code>&lt;paraid:ID&gt;1234&lt;/paraid:ID&gt;</code>  will only be printed in one document. I can't tell if this is a special case that should be handled explicitly, but you can take a similar approach with preserving this tag too. Otherwise the first <code>$twig -&gt; purge</code> will clear out any closed tags to saved memory which will include this one. </p>\n\n<p>There's no way around that at the same time as using <code>purge</code> to save memory. If you don't <code>purge</code> you <em>might</em> still be ok, because we are deleting elements as we go.</p>\n\n<p>So you can either:</p>\n\n<ul>\n<li>comment out the <code>$twig -&gt; purge</code> line. (and accept that might increase memory overhead, but it might not)</li>\n<li>'save' the 'paraid'</li>\n</ul>\n\n<p>Something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse XML::Twig;\n\nmy $subelt_count = 2;\nmy $count        = 1;\nmy @processed_elements;\n\nmy $paraid; \n\nsub process_xml {\n   my ( $twig, $elt ) = @_;\n\n   push( @processed_elements, $elt );\n   if ( my $new_paraid = $elt -&gt; parent -&gt; first_child('paraid:ID') ) {\n      $paraid = $new_paraid;\n      $paraid -&gt; cut; \n   }\n   if ( @processed_elements &gt;= $subelt_count ) {\n\n      #2 processed so far, start a new file\n      open( my $output, \"&gt;\", \"file_\" . $count++ . \".xml\" ) or die $!;\n      $paraid -&gt; paste ( $twig -&gt; root );\n      print {$output} $twig-&gt;sprint;\n      close($output);\n      $_-&gt;delete for @processed_elements;\n      @processed_elements = ();\n      $twig -&gt; purge;\n   }\n}\n\nmy $parser =\n  XML::Twig-&gt;new(\n   twig_handlers =&gt; { 'pmlcore:Observation' =&gt; \\&amp;process_xml } );\n$parser-&gt;set_pretty_print('indented_a');\n$parser-&gt;parsefile ( 'your_input_file.xml' );\n\n#in case there's any trailing elements;\nif ( $parser-&gt;get_xpath('//pmlcore:Observation') ) {\n   $parser-&gt;print;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "edited": false, "score": 0, "creation_date": 1516368200, "post_id": 48341200, "comment_id": 83669432, "body": "Thanks a lot! One question though, what happens when the chunk size is larger, say 15? in that case if the remaining chunk after processing in groups of 15 is, say 9, would this make any change to the script?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "edited": false, "score": 0, "creation_date": 1516368711, "post_id": 48341200, "comment_id": 83669757, "body": "No, that&#39;s fine. The line <code>print_chunk() if $twig-&gt;root-&gt;has_child( &#39;pmlcore:Observation&#39; )</code> checks to see whether there are any <code>pmlcore:Observation</code> elements (there must be between zero and <code>CHUNK_SIZE-1</code> and prints another chunk file containing all the &quot;spare&quot; elements."}, {"owner": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "edited": false, "score": 0, "creation_date": 1516369539, "post_id": 48341200, "comment_id": 83670251, "body": "Ok, not working for me yet. Here&#39;s the comand line input and the subsequent errors i&#39;ve run into:     comand line - <b>./Perlsplit3.pl Perl_inputxml2.txt</b> <code>.&#47;Perlsplit3.pl: use:  not found.</code> <code>.&#47;Perlsplit3.pl[2]: use:  not found.</code> <code>.&#47;Perlsplit3.pl[3]: use:  not found.</code> <code>.&#47;Perlsplit3.pl[4]: use:  not found.</code> <code>.&#47;Perlsplit3.pl[6]: use:  not found.</code> <code>.&#47;Perlsplit3.pl[8]: use:  not found.</code> <code>.&#47;Perlsplit3.pl[10]: 0403-057 Syntax error at line 10 : </code>(&#39; is not expected.`"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "edited": false, "score": 0, "creation_date": 1516369866, "post_id": 48341200, "comment_id": 83670427, "body": "@Kaladin: You&#39;re executing it as a bash script. Try <code>perl Perlsplit3.pl Perl_inputxml2.txt</code>"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1516366170, "last_edit_date": 1516366170, "creation_date": 1516365066, "answer_id": 48341200, "question_id": 48339200, "link": "https://stackoverflow.com/questions/48339200/splitting-a-large-xml-file-based-on-n-occurrences-of-a-given-element/48341200#48341200", "title": "Splitting a large XML file based on N occurrences of a given element", "body": "<p>This will do as you ask. It uses the <code>twig_roots</code> facility of the\n<a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a> module\nso that the whole of the XML data is not accumulated in memory</p>\n\n<p>There is a callback for <code>pmlcore:Observation</code> elements. When one of these is found. If this results in <code>CHUNK_SIZE</code> such elements then <code>print_chunk</code> is called to write a new chunk file, and remove all  <code>pmlcore:Observation</code> elements ready for adding new children</p>\n\n<p>After the file is parsed, the copy is checked for <code>pmlcore:Observation</code> elements that were never written to disk. <code>print_chunk</code> is called again if any are found</p>\n\n<p>Note that I have added a fifth <code>pmlcore:Observation</code> to the test data to test the case where there isn't a exact number of chunks in the block. This results in <code>Name3.txt</code> being written with just one observation point</p>\n\n<p>I've also used the <code>autodie</code> pragma to avoid having to explicitly test the status of every IO operation such as <code>open</code> and <code>close</code></p>\n\n<p><strong><em>This program expects the path to the input XML file as a parameter on the command line</em></strong></p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\nuse autodie;\n\nuse XML::Twig;\n\nuse constant CHUNK_SIZE =&gt; 2;\n\nmy ( $xml_file ) = @ARGV or die \"No input XML file specified\";\n\nmy $twig = XML::Twig-&gt;new(\n    twig_roots               =&gt; { 'pmlcore:Observation' =&gt; \\&amp;handle_obs },\n    twig_print_outside_roots =&gt; 0,\n    pretty_print             =&gt; 'indented',\n);\n\n$twig-&gt;parsefile( $xml_file );\n\n# Print any remaining chunks\nprint_chunk() if $twig-&gt;root-&gt;has_child( 'pmlcore:Observation' );\n\nsub handle_obs {\n    my ( $twig, $elem ) = @_;\n\n    my $n = $twig-&gt;root-&gt;children_count( 'pmlcore:Observation' );\n    print_chunk() if $n &gt;= CHUNK_SIZE;\n}\n\nmy $n;\n\nsub print_chunk {\n\n    my $filename = sprintf 'Name%d.txt', ++$n;\n\n    open my $fh, '&gt;', $filename;\n    $twig-&gt;print( $fh );\n    close $fh;\n\n    say qq{\"$filename\" written};\n\n    $_-&gt;delete for $twig-&gt;root-&gt;children( 'pmlcore:Observation' );\n}\n</code></pre>\n\n<h3>output</h3>\n\n<h3>Name1.txt</h3>\n\n<pre><code>&lt;pmlcore:Sensor xmlns:pmlcore=\"urn:autoid:specification:interchange:PMLCore:xml:schema:1\" xmlns:pmluid=\"urn:autoid:specification:universal:Identifier:xml:schema:1\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"urn:autoid:specification:interchange:PMLCore:xml:schema:1 ./PML/SchemaFiles/Interchange/PMLCore.xsd\"&gt;\n  &lt;paraid:ID&gt;1234&lt;/paraid:ID&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name1&lt;/childtag&gt;\n    &lt;childtag2&gt;Number1&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name2&lt;/childtag&gt;\n    &lt;childtag2&gt;Number2&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n&lt;/pmlcore:Sensor&gt;\n</code></pre>\n\n<h3>Name2.txt</h3>\n\n<pre><code>&lt;pmlcore:Sensor xmlns:pmlcore=\"urn:autoid:specification:interchange:PMLCore:xml:schema:1\" xmlns:pmluid=\"urn:autoid:specification:universal:Identifier:xml:schema:1\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"urn:autoid:specification:interchange:PMLCore:xml:schema:1 ./PML/SchemaFiles/Interchange/PMLCore.xsd\"&gt;\n  &lt;paraid:ID&gt;1234&lt;/paraid:ID&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name3&lt;/childtag&gt;\n    &lt;childtag2&gt;Number3&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name4&lt;/childtag&gt;\n    &lt;childtag2&gt;Number4&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n&lt;/pmlcore:Sensor&gt;\n</code></pre>\n\n<h3>Name3.txt</h3>\n\n<pre><code>&lt;pmlcore:Sensor xmlns:pmlcore=\"urn:autoid:specification:interchange:PMLCore:xml:schema:1\" xmlns:pmluid=\"urn:autoid:specification:universal:Identifier:xml:schema:1\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"urn:autoid:specification:interchange:PMLCore:xml:schema:1 ./PML/SchemaFiles/Interchange/PMLCore.xsd\"&gt;\n  &lt;paraid:ID&gt;1234&lt;/paraid:ID&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name5&lt;/childtag&gt;\n    &lt;childtag2&gt;Number5&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n&lt;/pmlcore:Sensor&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1516365758, "creation_date": 1516365758, "answer_id": 48341408, "question_id": 48339200, "link": "https://stackoverflow.com/questions/48339200/splitting-a-large-xml-file-based-on-n-occurrences-of-a-given-element/48341408#48341408", "title": "Splitting a large XML file based on N occurrences of a given element", "body": "<p>You can use <a href=\"http://p3rl.org/XML::LibXML::Reader\" rel=\"nofollow noreferrer\">XML::LibXML::Reader</a>, a pull parser from libxml2:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse XML::LibXML::Reader;\nuse constant {\n    SIZE    =&gt; 2, # 10\n    PMLUID  =&gt; 'urn:autoid:specification:universal:Identifier:xml:schema:1',\n    PMLCORE =&gt; 'urn:autoid:specification:interchange:PMLCore:xml:schema:1',\n};\n\nmy $name_tally = 0;\nsub output {\n    my ($orig_root, $id, @observations) = @_;\n\n    my $root = $orig_root-&gt;cloneNode;\n    $root-&gt;addChild($id);\n    $root-&gt;addChild($_) for @observations;\n    ++$name_tally;\n    open my $OUT, '&gt;:encoding(UTF-8)', \"Name$name_tally.txt\" or die $!;\n    print {$OUT} $root;\n    print STDERR \"$name_tally\\n\";\n}\n\nmy $reader = 'XML::LibXML::Reader'-&gt;new(location =&gt; shift)\n    or die;\n\n$reader-&gt;read;\nmy $root = $reader-&gt;copyCurrentNode;\n\n$reader-&gt;nextElement('ID', PMLUID) or die \"No ID\\n\";\nmy $id = $reader-&gt;copyCurrentNode(1);\n\nmy @observations;\nwhile ($reader-&gt;nextElement('Observation', PMLCORE)) {\n    push @observations, $reader-&gt;copyCurrentNode(1);\n    if (@observations == SIZE) {\n        output($root, $id, @observations);\n        @observations = ();\n    }\n}\n# Output the reminder if the size and total are coprime.\noutput($root, $id, @observations) if @observations;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8574762, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5afecf6b5c18343b46bf7619d07ec35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kaladin", "link": "https://stackoverflow.com/users/8574762/kaladin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1516370021, "creation_date": 1516358438, "last_edit_date": 1592644375, "question_id": 48339200, "link": "https://stackoverflow.com/questions/48339200/splitting-a-large-xml-file-based-on-n-occurrences-of-a-given-element", "title": "Splitting a large XML file based on N occurrences of a given element", "body": "<p>I'm looking to split a ~300MB XML file into separate files based on N occurrences of a given element.</p>\n<p>My source XML is:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;pmlcore:Sensor\n        xsi:schemaLocation=&quot;urn:autoid:specification:interchange:PMLCore:xml:schema:1 ./PML/SchemaFiles/Interchange/PMLCore.xsd&quot;\n        xmlns:pmlcore=&quot;urn:autoid:specification:interchange:PMLCore:xml:schema:1&quot;\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns:pmluid=&quot;urn:autoid:specification:universal:Identifier:xml:schema:1&quot;&gt;\n  &lt;paraid:ID&gt;1234&lt;/paraid:ID&gt;      \n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name1&lt;/childtag&gt;\n    &lt;childtag2&gt;Number1&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name2&lt;/childtag&gt;\n    &lt;childtag2&gt;Number2&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name3&lt;/childtag&gt;\n    &lt;childtag2&gt;Number3&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name4&lt;/childtag&gt;\n    &lt;childtag2&gt;Number4&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n&lt;/pmlcore:Sensor&gt;\n</code></pre>\n<p>If my input file is as above, then I would like to split this into separate files based on every 10 occurrences of the <code>pmlcore:Observation</code> element.</p>\n<p>For testing purposes, say with my input XML as above, I would like to see files split for every 2 occurrences of the <code>pmlcore:Observation</code> element (with the first two lines of the input file\u2014XML prolog and <code>paraID:ID</code>\u2014inserted into each split file).</p>\n<p>My XML then would be split into two files:</p>\n<h3>Name1.txt</h3>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;pmlcore:Sensor\n        xsi:schemaLocation=&quot;urn:autoid:specification:interchange:PMLCore:xml:schema:1 ./PML/SchemaFiles/Interchange/PMLCore.xsd&quot;\n        xmlns:pmlcore=&quot;urn:autoid:specification:interchange:PMLCore:xml:schema:1&quot;\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns:pmluid=&quot;urn:autoid:specification:universal:Identifier:xml:schema:1&quot;&gt;\n  &lt;paraid:ID&gt;1234&lt;/paraid:ID&gt;      \n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name1&lt;/childtag&gt;\n    &lt;childtag2&gt;Number1&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name2&lt;/childtag&gt;\n    &lt;childtag2&gt;Number2&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n&lt;/pmlcore:Sensor&gt;\n</code></pre>\n<h3>Name2.txt</h3>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;pmlcore:Sensor\n        xsi:schemaLocation=&quot;urn:autoid:specification:interchange:PMLCore:xml:schema:1 ./PML/SchemaFiles/Interchange/PMLCore.xsd&quot;\n        xmlns:pmlcore=&quot;urn:autoid:specification:interchange:PMLCore:xml:schema:1&quot;\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns:pmluid=&quot;urn:autoid:specification:universal:Identifier:xml:schema:1&quot;&gt;\n  &lt;paraid:ID&gt;1234&lt;/paraid:ID&gt;      \n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name3&lt;/childtag&gt;\n    &lt;childtag2&gt;Number3&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n  &lt;pmlcore:Observation&gt;\n    &lt;childtag&gt;Name4&lt;/childtag&gt;\n    &lt;childtag2&gt;Number4&lt;/childtag2&gt;\n    &lt;childtag3&gt;\n      &lt;childtag4&gt;&lt;/childtag4&gt;\n    &lt;/childtag3&gt;\n  &lt;/pmlcore:Observation&gt;\n&lt;/pmlcore:Sensor&gt;\n</code></pre>\n<p>I've been able to do this with awk but the process has been painfully slow. I'd like to know if there's a simple but effective way to accomplish this via a Perl script (perhaps using\n<a href=\"https://metacpan.org/pod/XML::Twig\" rel=\"nofollow noreferrer\"><code>XML::Twig</code></a>\n).</p>\n"}, {"tags": ["perl", "hashmap"], "comments": [{"owner": {"reputation": 35, "user_id": 7993095, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/79b3cdce65901b3f183b942eca87c964?s=128&d=identicon&r=PG&f=1", "display_name": "temp44", "link": "https://stackoverflow.com/users/7993095/temp44"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1516358644, "post_id": 48339104, "comment_id": 83663631, "body": "I want to split it on spaces so that part is fine, the hashes are built fine. Just need to operate on them now."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1516362934, "post_id": 48339104, "comment_id": 83666222, "body": "What&#39;s your desired result given your input lines?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516383850, "post_id": 48339104, "comment_id": 83679269, "body": "The &quot;EDIT&quot; seems to do what you described -- is there anything missing? If this is indeed a good solution it may be better to post that part as an answer (you may post answers to your own questions and this is a good idea when you find a solution).  One thing though: if you indeed want to print when keys mismatch (the <code>unless</code> block) then you are missing cases when a key in <code>%line_2</code> is not in <code>%line_1</code>. But it seems that you rather don&#39;t care about that and may do away with <code>unless</code> block.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516383932, "post_id": 48339104, "comment_id": 83679319, "body": "The <code>each</code> indeed can be a little tricky ... but I am not sure what is wrong there, your attempt is reasonable."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516383965, "post_id": 48339104, "comment_id": 83679344, "body": "Please <i>always</i> have <code>use warnings;</code> and <code>use strict;</code> at the beginning. It really helps a lot."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516384491, "post_id": 48339104, "comment_id": 83679618, "body": "I copy-pasted your code, with <code>==</code> changed to <code>eq</code> (+ warnings and strict!) ... and it works correctly on your input file. It prints keys only when they are the same."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516384079, "post_id": 48340548, "comment_id": 83679391, "body": "I don&#39;t know that it&#39;s &quot;<i>redundant</i>&quot; -- they reasonably want to get both key and value in one call, for each hash. But it does seem that something is off with nested <code>each</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516445574, "post_id": 48340548, "comment_id": 83696982, "body": "Thing is - you don&#39;t have to iterate a second hash looking for a matching key... because you know the key, and can just look it up directly."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516508075, "post_id": 48340548, "comment_id": 83714010, "body": "Ah, that&#39;s what you mean.  True -- but I still prefer an explicit check that the keys exists. Btw, I checked OP&#39;s code verbatim and it just works.  So I&#39;m puzzled  as to what doesn&#39;t work for them. But, you are right overall, I wouldn&#39;t nest <code>each</code> here."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1516384299, "last_edit_date": 1516384299, "creation_date": 1516362894, "answer_id": 48340548, "question_id": 48339104, "link": "https://stackoverflow.com/questions/48339104/perl-loop-through-two-hashes-compare-keys-and-values/48340548#48340548", "title": "Perl - loop through two hashes, compare keys and values", "body": "<p>Turn on <code>use strict;</code> <code>use warnings;</code>.</p>\n\n<p>It will tell you:</p>\n\n<pre><code>Argument \"ssdp\" isn't numeric in numeric eq (==) at line 10\n</code></pre>\n\n<p>This is a hint that you should be using <code>eq</code> </p>\n\n<p>But more fundamentally, nesting an <code>each</code> for two hashes is entirely redundant, as the point of a hash is a direct lookup. </p>\n\n<p>How about:</p>\n\n<pre><code>foreach my $key ( keys %line_1 ) {\n   if ( $line_2{$key} ) { \n       print \"Match found for $key\\n\";\n       if ( $line_1{$key} ne $line_2{$key} ) { \n           print \"$key $line_1{$key} doesn't match $line_2{$key}\\n\";\n       }\n   }\n   else { \n     print \"No key $key found in line 2\\n\";\n   } \n}\n</code></pre>\n\n<p>(and if relevant, reverse the logic so you check all the keys in line_2 as well, to check they're not missing from line1)</p>\n"}], "owner": {"reputation": 35, "user_id": 7993095, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/79b3cdce65901b3f183b942eca87c964?s=128&d=identicon&r=PG&f=1", "display_name": "temp44", "link": "https://stackoverflow.com/users/7993095/temp44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516384299, "creation_date": 1516358155, "last_edit_date": 1516359636, "question_id": 48339104, "link": "https://stackoverflow.com/questions/48339104/perl-loop-through-two-hashes-compare-keys-and-values", "title": "Perl - loop through two hashes, compare keys and values", "body": "<p>I have two hashes and I want to iterate over the first hashes keys once (tcp, tls, dns) and then find the matching key in the second hash. From there I want to compare the values in each hash for tcp.</p>\n\n<p>At the moment when I attempt to do this, it seems to match on every key in the second hash. TCP may be selected from the first hash but where I have if ($key1 == $key2), it will match multiple times even though the keys do not match each other. It may be me not having a proper understanding of each.</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen my $fh, \"newlogs.txt\" or die $!;\nmy %line_1 = split ' ', &lt;$fh&gt;;\nmy %line_2 = split ' ', &lt;$fh&gt;;\n\nwhile (my($key1, $value1) = each %line_1) {\n        while (my($key2, $value2) = each %line_2) {\n                if ($key1 == $key2) {\n                        print \"$key1 $key2\\n\";\n                }\n        }\n}\n</code></pre>\n\n<p>newlog.txt:</p>\n\n<pre><code>tcp 217837 tls 138531 http 50302 udp 37852 dns 23625 ldap 14160 krb5 8828 smb 2148 ssh 549 ftp 219 smtp 161 icmp 6 rdp 3 ssdp 3\ntcp 198650 tls 125770 http 44260 udp 37610 dns 23827 ldap 13904 krb5 8805 smb 2128 ssh 629 ftp 219 smtp 156 icmp 5 ssdp 1\n</code></pre>\n\n<p>I'd hope to achieve something like this for the output which shows the difference in both tcp values, but for every protocol (key).\ntcp=19187</p>\n\n<p>EDIT:</p>\n\n<p>I've found a solution here:\n<a href=\"https://stackoverflow.com/questions/6978799/comparing-two-hashes-with-the-keys-and-values\">Comparing two hashes with the keys and values</a></p>\n\n<p>Solution:</p>\n\n<pre><code>#!/usr/bin/perl\n\nopen my $fh, \"newlogs.txt\" or die $!;\nmy %line_1 = split ' ', &lt;$fh&gt;;\nmy %line_2 = split ' ', &lt;$fh&gt;;\n\nfor (keys %line_1) {\n        unless (exists $line_2{$_} ){\n                print \"$_: not found in second hash\\n\";\n                next;\n        }\n        if ($line_1{$_} eq $line_2{$_} ) {\n                print \"$_: no change \\n\";\n        }\n        else {\n                #print \"$_: values are not equal\\n\";\n                my $result = $line_1{$_} - $line_2{$_};\n                print \"$result\\n\";\n        }\n}\n</code></pre>\n"}, {"tags": ["perl", "perl-xs", "perlapi"], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1516364476, "creation_date": 1516364476, "answer_id": 48341007, "question_id": 48337218, "link": "https://stackoverflow.com/questions/48337218/what-is-the-difference-between-gvname-and-gvename/48341007#48341007", "title": "What is the difference between `GvNAME` and `GvENAME`?", "body": "<p>The \"effective\" means who create this <code>gv</code>. </p>\n\n<p>For example your module <code>Module::</code> define <code>my_sub</code>. Then this sub was imported into <code>Main::</code>. \nSo the sub name is <code>Main::my_sub</code> but effective name is <code>Module::my_sub</code></p>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516364476, "creation_date": 1516351917, "last_edit_date": 1516359883, "question_id": 48337218, "link": "https://stackoverflow.com/questions/48337218/what-is-the-difference-between-gvname-and-gvename", "title": "What is the difference between `GvNAME` and `GvENAME`?", "body": "<p>In perl sources <code>GvNAME</code> and <code>GvENAME</code>. Both return name for given <code>gv</code>. But second stands for effective name.</p>\n\n<p>Dumping names I have not seen the difference.</p>\n\n<p>May someone clear what is the difference and provide example which shows it?</p>\n\n<p><strong>UPD</strong><br>\nBecause this is related to naming too. What is difference between <code>HvNAME</code> vs <code>HvNAME_HEK</code></p>\n"}, {"tags": ["perl", "proxy", "http-post", "http-proxy"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516347067, "post_id": 48335968, "comment_id": 83657173, "body": "Please make sure that you are using at least version 6.06 of LWP when using proxy for https URL&#39;s since on older versions the support was broken.  Also, please provide the versions of LWP you are using and the full response instead of only the response code."}, {"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516348102, "post_id": 48335968, "comment_id": 83657616, "body": "# perl -MLWP -le &quot;print(LWP-&gt;VERSION)&quot; 5.833"}, {"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516348182, "post_id": 48335968, "comment_id": 83657653, "body": "&lt;HTML&gt;&lt;HEAD&gt; &lt;TITLE&gt;SSL Certificate Verification Error&lt;/TITLE&gt; &lt;/HEAD&gt; &lt;BODY&gt; &lt;FONT face=&quot;Helvetica&quot;&gt; &lt;big&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/big&gt;&lt;BR&gt; &lt;/FONT&gt; &lt;blockquote&gt; &lt;TABLE border=0 cellPadding=1 width=&quot;80%&quot;&gt; &lt;TR&gt;&lt;TD&gt; &lt;FONT face=&quot;Helvetica&quot;&gt; &lt;big&gt;SSL Certificate Verification Error (ssl_failed)&lt;/big&gt; &lt;BR&gt; &lt;BR&gt; &lt;/FONT&gt; &lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt;&lt;TD&gt; &lt;FONT face=&quot;Helvetica&quot;&gt; A secure SSL session could not be established with the Web Site: &quot;&quot;. &lt;/FONT&gt; &lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt;&lt;TD&gt;"}, {"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516348186, "post_id": 48335968, "comment_id": 83657655, "body": "&lt;FONT face=&quot;Helvetica&quot;&gt; This is typically caused by a Web Site that is not configured to accept SSL connections, but could be because the Proxy does not trust the Web Site&#39;s certificate authority. &lt;/FONT&gt; &lt;/TD&gt;&lt;/TR&gt; &lt;TR&gt;&lt;TD&gt; &lt;FONT face=&quot;Helvetica&quot; SIZE=2&gt; &lt;BR&gt; For assistance, contact your network support team. &lt;/FONT&gt; &lt;/TD&gt;&lt;/TR&gt; &lt;/TABLE&gt; &lt;/blockquote&gt; &lt;/FONT&gt; &lt;/BODY&gt;&lt;/HTML&gt;"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516350244, "post_id": 48335968, "comment_id": 83658620, "body": "<code># perl -MLWP -le &quot;print(LWP-&gt;VERSION)&quot; 5.833 </code> - so you want help for a version of LWP which is 9 years old? I recommend that your actually update whatever software stack you have running which is using this long long obsolete version. But anyway - you see from the error message that the problem is certificate validation. Even though this old version of LWP does not do full certificate validation it checks at least the certificate chain and this is not trusted - probably because you are using a self-signed certificate or a certificate from an untrusted CA."}, {"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516351594, "post_id": 48335968, "comment_id": 83659301, "body": "The data posting is working fine using the same CA  using CURL"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1516353892, "post_id": 48335968, "comment_id": 83660597, "body": "These comments are only badly readable - please edit your question instead to provide these additional details in a nicely formatted readable way. Also <i>&quot;The data posting is working fine using the same CA using CURL&quot;</i> - how do you know that? You don&#39;t specify a CA store in your Perl program."}, {"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516355448, "post_id": 48335968, "comment_id": 83661573, "body": "ok..characters are limited and I had to paste in blocks of messages..."}, {"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516355542, "post_id": 48335968, "comment_id": 83661640, "body": "beginning curl command...Closing connection #0 is the output of curl posting...curl is using the CA while posting data ..perl program doesn&#39;t need to specify any CA to post data as we have not specified in curl as well"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1516355943, "post_id": 48335968, "comment_id": 83661890, "body": "Again - edit the question to provide such information and don&#39;t paste everything into comments. And, just because you don&#39;t specify CA store in both cases does not mean that the same CA store is used. Defaults might differ."}, {"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1516356487, "post_id": 48335968, "comment_id": 83662223, "body": "done. edited the question with curl output."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "edited": false, "score": 0, "creation_date": 1516360464, "post_id": 48339516, "comment_id": 83664729, "body": "yes you are right..let me check the proxy configuration. shouldn&#39;t be the issue with LWP as the same script is posting data successfully to other URL receivers"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": -1, "last_activity_date": 1516372989, "last_edit_date": 1516372989, "creation_date": 1516359389, "answer_id": 48339516, "question_id": 48335968, "link": "https://stackoverflow.com/questions/48335968/http-post-using-perl-script-returns-503-service-unavailable-while-using-proxy/48339516#48339516", "title": "HTTP Post using perl script returns 503 service unavailable while using proxy", "body": "<p>It is hard to analyze the problem since you are using a 9 year old (and long obsolete) software stack. But given the response you show in the comments I suspect that not your code is having the SSL problems but your proxy has. To cite from the HTTP response body you got:</p>\n\n<blockquote>\n  <p>SSL Certificate Verification Error (ssl_failed) ...<br>\n  This is typically caused by a Web Site that is not configured to accept SSL connections, but could be because the Proxy does not trust the Web Site's certificate authority. </p>\n</blockquote>\n\n<p>Given that you have this problem with LWP but not curl this response might be due to differences on how these clients construct the request to the proxy. If your setup uses IO::Socket::SSL as backend then your old version of LWP will not construct a proper proxy request which might cause this failure (fixed in LWP 6.06 in 2014). If you use Crypt::SSLeay instead missing support for SNI in this old version might be the problem (fixed in 0.59_3 in 2012).</p>\n\n<p>Anyway, I really recommend to move away from your old, unsupported and probably insecure software stack. The problem might simply vanish if you use a current stack.</p>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 9104374, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ygq-6V5SbSo/AAAAAAAAAAI/AAAAAAAAABk/zU76uLLrcVU/photo.jpg?sz=128", "display_name": "GiulioP", "link": "https://stackoverflow.com/users/9104374/giuliop"}, "is_accepted": false, "score": 0, "last_activity_date": 1516378269, "creation_date": 1516378269, "answer_id": 48345193, "question_id": 48335968, "link": "https://stackoverflow.com/questions/48335968/http-post-using-perl-script-returns-503-service-unavailable-while-using-proxy/48345193#48345193", "title": "HTTP Post using perl script returns 503 service unavailable while using proxy", "body": "<p>Since the version of Perl you are using is fairly old, you cannot actually set an HTTPS proxy that way. You are forced to do it low-level, via environment variables.</p>\n\n<pre><code>$ENV{HTTPS_PROXY}='http://1.2.3.4:8088';\n</code></pre>\n\n<p>Note that you <strong>MUST</strong> do it <strong>before</strong> you create your UserAgent.</p>\n\n<p>That aside, you should import the module for SSL connections <code>IO::Socket::SSL</code> (<code>Net::SSL</code> would be preferrable, but it is most definitevely not available for a version of Perl that old). You can import the module setting a debug level (from 1 to 4, I suggest 3).</p>\n\n<p>To recap, this should be the start of your code.</p>\n\n<pre><code>#!/usr/bin/perl -w    \nuse LWP::UserAgent;\nuse IO::Socket::SSL qw(debug3);\n$ENV{HTTPS_PROXY}='http://1.2.3.4:8088';\n$ENV{HTTPS_DEBUG}=1;\nmy $ua = LWP::UserAgent-&gt;new;\n...\n</code></pre>\n\n<p>P.S.: you should also check the response headers you obtain with Perl, instead of curl. Add <code>print $resp-&gt;headers_as_string();</code> in case <code>$resp-&gt;is_success</code> is false.</p>\n"}], "owner": {"reputation": 1, "user_id": 9238678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb5d8fc47effc09e2cf9ac4facbc30da?s=128&d=identicon&r=PG&f=1", "display_name": "Bhanu", "link": "https://stackoverflow.com/users/9238678/bhanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 712, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516378269, "creation_date": 1516346493, "last_edit_date": 1516356041, "question_id": 48335968, "link": "https://stackoverflow.com/questions/48335968/http-post-using-perl-script-returns-503-service-unavailable-while-using-proxy", "title": "HTTP Post using perl script returns 503 service unavailable while using proxy", "body": "<p>HTTP Post using perl script returns 503 service unavailable while using proxy</p>\n\n<pre><code>#!/usr/bin/perl -w    \nuse LWP::UserAgent;     \nmy $ua = LWP::UserAgent-&gt;new;    \n$ua-&gt;timeout( 20 );    \nmy $server_endpoint = \"https://mytest.test.com/events\";    \n$ua-&gt;proxy('https' , \"http://1.2.3.4:8088\");    \nmy $req = HTTP::Request-&gt;new(POST =&gt; $server_endpoint);    \n$req-&gt;header('content-type' =&gt; 'application/json');    \n$req-&gt;authorization_basic('user1', 'user1pass123!');    \nprint \"Posting URL: $server_endpoint \\n\";    \n# add POST data to HTTP request body    \nmy $post_data = '{\"events\":[{\"signature\":\"my_test_box:application:Network\",\"source_id\":\"1.2.3.4\",\"manager\":\"my_manager_srv\",\"source\":\"my_test_box_2\",\"class\":\"application\",\"type\":\"Network\",\"severity\":3,\"description\":\"high network utilization in application A\"}]}';    \n$req-&gt;content($post_data);    \nmy $resp = $ua-&gt;request($req);    \nif ($resp-&gt;is_success) \n  {\n    my $message = $resp-&gt;decoded_content;\n    print \"Received reply: $message\\n\";\n    print \"HTTP POST code: \", $resp-&gt;code, \"\\n\";\n    print \"HTTP POST message: \", $resp-&gt;message, \"\\n\";\n}\nelse {\n    print \"HTTP POST error code: \", $resp-&gt;code, \"\\n\";\n    print \"HTTP POST error message: \", $resp-&gt;message, \"\\n\";\n</code></pre>\n\n<ol>\n<li>Posting to any other data receiver URL is fine via same proxy and same script. (URLs configured on proxy to allow traffic)</li>\n<li>Able to post data using curl command to: <a href=\"https://mytest.test.com/events\" rel=\"nofollow noreferrer\">https://mytest.test.com/events</a> ..however while using this script returns 503 service unavailable\n3.Tested using the same script to same URL on my local machine without proxy and posting works fine.</li>\n</ol>\n\n<p>Any help highly appreciated\nThanks.</p>\n\n<p>Adding command curl and output here:</p>\n\n<pre><code>#curl -u user1:user1pass123! mytest.test.com/events -H \"Content-Type: application/json\" -X POST --data '{\"events\":[{\"signature\":\"my_test_box:application:Network\",\"\u200c\u200bsource_id\":\"1.2.3.4\"\u200c\u200b,\"manager\":\"my_manag\u200c\u200ber_srv\",\"source\":\"my\u200c\u200b_test_box_2\",\"class\"\u200c\u200b:\"application\",\"type\u200c\u200b\":\"Network\",\"severit\u200c\u200by\":3,\"description\":\"\u200c\u200bhigh network utilization in application A\"}]}'; -v -x http://1.2.3.4:8088\n* About to connect() to proxy 1.2.3.4 port 8088 (#0) \n* Trying 1.2.3.4... connected \n* Connected to 1.2.3.4 (1.2.3.4) port 8088 (#0) \n* Establish HTTP proxy tunnel to mytest.test.com:443 \n* Server auth using Basic with user 'user1' \n&gt; CONNECT mytest.test.com:443 HTTP/1.1 \n&gt; Host: mytest.test.com:443 \n&gt; User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.27.1 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n&gt; Proxy-Connection: Keep-Alive \n&gt; Content-Type: application/json \n&gt; &lt; HTTP/1.1 200 Connection established &lt; \n* Proxy replied OK to CONNECT request \n* Initializing NSS with certpath: sql:/etc/pki/nssdb \n* CAfile: /etc/pki/tls/certs/ca-bundle.crt CApath: none \n* Server certificate: \n* subject: CN=*.test.com,OU=Domain Control Validated\n* start date: Nov 01 22:33:00 2017 GMT \n* expire date: Nov 01 22:33:00 2018 GMT \n* common name: .test.com \n* issuer: CN=Go Daddy Secure Certificate Authority - G2,OU=certs.godaddy.com/repository/,O=\"GoDaddy.com, Inc.\",L=Scottsdale,ST=Arizona,C=US \n* Server auth using Basic with user 'user1' &gt; POST /events HTTP/1.1 \n&gt; Authorization: Basic xxxxxxxxxxxxxxxx \n&gt; User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.27.1 zlib/1.2.3 libidn/1.18 libssh2/1.4.2 \n&gt; Host: mytest.test.com \n&gt; Accept: */ \n&gt; Content-Type: application/json\n&gt; Content-Length: 325 \n&gt; &lt; HTTP/1.1 200 OK &lt; Date: Fri, 19 Jan 2018 08:38:23 GMT &lt; Content-Length: 101 &lt; Connection: keep-alive \n&lt; Server: nginx \n&lt; X-Frame-Options: SAMEORIGIN \n&lt; Strict-Transport-Security: max-age=63072000; includeSubDomains; always \n&lt; {\"response\"{\"processed\":1,\"cached\":0,\"received\":1},\"success\u200c\":true,\"message\":\"Pro\u200ccessed 1 event(s)\"} \n* Connection #0 to host 1.2.3.4 left intact \n* Closing connection #0\n</code></pre>\n"}, {"tags": ["perl", "client-server", "windows-users"], "comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1516352672, "post_id": 48335782, "comment_id": 83659917, "body": "i think the question is not specific to perl but to operating system maybe <a href=\"https://superuser.com/questions/783950/how-to-display-currently-connected-users-workstations-to-a-windows-smb-share\">How to display currently connected users/workstations to a Windows SMB Share?</a> or <a href=\"https://serverfault.com/questions/471224/how-do-i-access-the-list-of-currently-logged-on-users-through-terminal-services\">How do I access the list of currently logged on users through Terminal Services Manager in Windows Server 2012?</a> could help"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1516365093, "post_id": 48335782, "comment_id": 83667537, "body": "@NahuelFouilleu the links you offered shows the ways of displaying users from task manager or cmd. I know those ways but l  need to insert currently logged users to database and reporting so seeing from task manager or cmd is not enough for me."}, {"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1516366125, "post_id": 48335782, "comment_id": 83668179, "body": "this information is provided by the operating system, perl can call system command for example <code>perl -e &#39;print for qx(c:&#47;windows&#47;system32&#47;cmd.exe &#47;c &quot;echo hello&quot;)&#39;</code> (sorry backquotes don&#39;t work with SO"}, {"owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1516376748, "post_id": 48335782, "comment_id": 83675041, "body": "@NahuelFouilleul this information must be stored somewhere. For example it may be stored in a file so I can read that file. Or it may be supplied with programming language command returning an array list. For example currently logged user can be retireved with programming code. this means all users can be too"}], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1516869676, "creation_date": 1516869676, "answer_id": 48438761, "question_id": 48335782, "link": "https://stackoverflow.com/questions/48335782/perl-code-to-retrieve-currently-logged-user-list-of-windows-server/48438761#48438761", "title": "Perl code to retrieve currently logged user list of windows server", "body": "<p>I don't use Windows, but I can Google enough to guess at a solution.</p>\n\n<p><a href=\"https://technet.microsoft.com/en-us/library/bb490801.aspx\" rel=\"nofollow noreferrer\">This page</a> suggests that you can use <code>query user</code> to get a list of logged in users.</p>\n\n<p>You can run that command in Perl and capture the output using <code>qx[]</code>.</p>\n\n<pre><code># All output in a scalar\nmy $users = qx[query users];\n\n# One line of output per element in an array\nmy @users = qx[query users];\n</code></pre>\n\n<p>You know have the information that you want in a Perl variable. The next step is to parse that data to extract the specific fields that you need. As I don't currently have access to a machine running Windows, I can't see what format this command returns, so I can't help you with this second part of the process.</p>\n\n<p>If you have trouble parsing the data, then post a sample of it in a new question here and we'll be happy to help you further.</p>\n"}], "owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "accepted_answer_id": 48438761, "answer_count": 1, "score": 0, "last_activity_date": 1516869676, "creation_date": 1516345548, "question_id": 48335782, "link": "https://stackoverflow.com/questions/48335782/perl-code-to-retrieve-currently-logged-user-list-of-windows-server", "title": "Perl code to retrieve currently logged user list of windows server", "body": "<p>Clients are connecting to a windows server with different user names. For example:</p>\n\n<ul>\n<li>client1 connects to server with user1    </li>\n<li>client2 connects to server with user2     </li>\n<li>client3 connects to server with user3</li>\n</ul>\n\n<p>Now there are 3 currently logged users at server: user1, user2, user3.</p>\n\n<p>Is it possible retrieve logged on users and client name? I can see this at task manager at user form as seen at below picture:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cdcfl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cdcfl.png\" alt=\"user and client list at task manager\"></a></p>\n"}, {"tags": ["perl", "hashmap"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1516313256, "creation_date": 1516313256, "answer_id": 48331116, "question_id": 48330957, "link": "https://stackoverflow.com/questions/48330957/parse-space-separated-log-into-hash-using-perl/48331116#48331116", "title": "Parse space separated log into hash using perl", "body": "<p>A hash can be populated by a list, where consecutive elements are paired up as key-value</p>\n\n<pre><code>my %hash = ('a', 1, 'b', 2);   #--&gt; %hash is (a =&gt; 1, b =&gt; 2)\n</code></pre>\n\n<p>so you can do that with each line, by splitting it on whitespace</p>\n\n<pre><code>open my $fh, $filename or die \"Can't open $filename: $!\";\nmy %line_1 = split ' ', &lt;$fh&gt;;\nmy %line_2 = split ' ', &lt;$fh&gt;;\n</code></pre>\n\n<p>or, to not limit yourself to two lines only</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    my %line = split;\n}\n</code></pre>\n\n<p>where <code>split;</code> uses <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>  defaults and so is the same as <code>split ' ', $_;</code></p>\n\n<p>This will create new hash(es) every time.  Even if you declare them elsewhere and repeatedly read into those variables in this way, it will still overwrite every time. If you need to update an existing hash read into a temporary one and then update/check the main hash key by key.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1516313283, "creation_date": 1516313283, "answer_id": 48331120, "question_id": 48330957, "link": "https://stackoverflow.com/questions/48330957/parse-space-separated-log-into-hash-using-perl/48331120#48331120", "title": "Parse space separated log into hash using perl", "body": "<pre><code>while (&lt;&gt;) {\n   my %hash = split;\n   ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>while (&lt;&gt;) {\n   push @hashes, { split };\n}\n\n...\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7993095, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/79b3cdce65901b3f183b942eca87c964?s=128&d=identicon&r=PG&f=1", "display_name": "temp44", "link": "https://stackoverflow.com/users/7993095/temp44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 48331116, "answer_count": 2, "score": -1, "last_activity_date": 1516313283, "creation_date": 1516312465, "question_id": 48330957, "link": "https://stackoverflow.com/questions/48330957/parse-space-separated-log-into-hash-using-perl", "title": "Parse space separated log into hash using perl", "body": "<p>I want to store each line of a log (will only ever be 2 lines) into separate hashes and then check each keys value to determine if there has been an increase or a decrease. The log file may not have matching protocols each time, so rdp is missing from line 2, and there may be a new protocol entirely which is why I thought using a hash would be a good idea.</p>\n\n<pre><code>tcp 217837 tls 138531 http 50302 udp 37852 dns 23625 ldap 14160 krb5 8828 smb 2148 ssh 549 ftp 219 smtp 161 icmp 6 rdp 3 ssdp 3\ntcp 198650 tls 125770 http 44260 udp 37610 dns 23827 ldap 13904 krb5 8805 smb 2128 ssh 629 ftp 219 smtp 156 icmp 5 ssdp 1\n</code></pre>\n\n<p>What I want to do is read the first line into a hash so it looks like this:</p>\n\n<p>key value</p>\n\n<p>tcp:217837</p>\n\n<p>tls:138531</p>\n\n<p>Then I want to read the second line into another hash in the same manner:</p>\n\n<p>key value</p>\n\n<p>tcp:198650</p>\n\n<p>tls:125770</p>\n\n<p>How could I accomplish this? I've tried to search but many of the examples rely on having the log file formatted differently. I would like the solution to be in Perl if possible.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1516380598, "last_edit_date": 1516380598, "creation_date": 1516300805, "answer_id": 48328192, "question_id": 48328065, "link": "https://stackoverflow.com/questions/48328065/generate-list-of-possibilities-from-incomplete-input/48328192#48328192", "title": "Generate list of possibilities from incomplete input", "body": "<p>As your equation (<code>10x16</code>) suggests, this just requires two nested loops.</p>\n\n<pre><code>my $s = '0ae4bb830';\n\nfor my $pos (0..length($s)) {\n   for my $nibble ('0'..'9', 'a'..'f') {\n      say substr($s, 0, $pos) . $nibble . substr($s, $pos);\n   }\n}\n</code></pre>\n\n<p>This is how we get a duplicate:</p>\n\n<pre><code>     inserted\n        v\n ...aaa b b   ccc... = ...aaabbccc...\n ...aaa   b b ccc... = ...aaabbccc...\n            ^\n         inserted\n</code></pre>\n\n<p>A simple check solves that.</p>\n\n<pre><code>my $s = '0ae4bb830';\n\nfor my $pos (0..length($s)) {\n   for my $nibble ('0'..'9', 'a'..'f') {\n      if ($nibble ne substr($s, $pos, 1)) {\n         say substr($s, 0, $pos) . $nibble . substr($s, $pos);\n      }\n   }\n}\n</code></pre>\n\n<hr>\n\n<p>By the way</p>\n\n<pre><code>say substr($s, 0, $pos) . $nibble . substr($s, $pos);\n</code></pre>\n\n<p>can be replaced with</p>\n\n<pre><code>substr(my $t = $s, $pos, 0, $nibble); say $t;\n</code></pre>\n\n<p>I suspect the latter is marginally faster.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1516301038, "creation_date": 1516301038, "answer_id": 48328250, "question_id": 48328065, "link": "https://stackoverflow.com/questions/48328065/generate-list-of-possibilities-from-incomplete-input/48328250#48328250", "title": "Generate list of possibilities from incomplete input", "body": "<p>Disregarding duplicates, this is simply a matter of putting all sixteen characters in each of the ten possible positions</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nmy $s = '0ae4bb830';\n\nfor my $i ( 0 ..length $s ) {\n\n    for my $h ( '0' .. '9', 'a' .. 'f' ) {\n\n        substr my $ss = $s, $i, 0, $h;\n\n        say $ss;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>00ae4bb830\n10ae4bb830\n20ae4bb830\n30ae4bb830\n40ae4bb830\n50ae4bb830\n60ae4bb830\n70ae4bb830\n80ae4bb830\n90ae4bb830\na0ae4bb830\nb0ae4bb830\nc0ae4bb830\nd0ae4bb830\ne0ae4bb830\nf0ae4bb830\n00ae4bb830\n01ae4bb830\n02ae4bb830\n03ae4bb830\n04ae4bb830\n05ae4bb830\n06ae4bb830\n07ae4bb830\n08ae4bb830\n09ae4bb830\n0aae4bb830\n0bae4bb830\n0cae4bb830\n0dae4bb830\n0eae4bb830\n0fae4bb830\n0a0e4bb830\n0a1e4bb830\n0a2e4bb830\n0a3e4bb830\n0a4e4bb830\n0a5e4bb830\n0a6e4bb830\n0a7e4bb830\n0a8e4bb830\n0a9e4bb830\n0aae4bb830\n0abe4bb830\n0ace4bb830\n0ade4bb830\n0aee4bb830\n0afe4bb830\n0ae04bb830\n0ae14bb830\n0ae24bb830\n0ae34bb830\n0ae44bb830\n0ae54bb830\n0ae64bb830\n0ae74bb830\n0ae84bb830\n0ae94bb830\n0aea4bb830\n0aeb4bb830\n0aec4bb830\n0aed4bb830\n0aee4bb830\n0aef4bb830\n0ae40bb830\n0ae41bb830\n0ae42bb830\n0ae43bb830\n0ae44bb830\n0ae45bb830\n0ae46bb830\n0ae47bb830\n0ae48bb830\n0ae49bb830\n0ae4abb830\n0ae4bbb830\n0ae4cbb830\n0ae4dbb830\n0ae4ebb830\n0ae4fbb830\n0ae4b0b830\n0ae4b1b830\n0ae4b2b830\n0ae4b3b830\n0ae4b4b830\n0ae4b5b830\n0ae4b6b830\n0ae4b7b830\n0ae4b8b830\n0ae4b9b830\n0ae4bab830\n0ae4bbb830\n0ae4bcb830\n0ae4bdb830\n0ae4beb830\n0ae4bfb830\n0ae4bb0830\n0ae4bb1830\n0ae4bb2830\n0ae4bb3830\n0ae4bb4830\n0ae4bb5830\n0ae4bb6830\n0ae4bb7830\n0ae4bb8830\n0ae4bb9830\n0ae4bba830\n0ae4bbb830\n0ae4bbc830\n0ae4bbd830\n0ae4bbe830\n0ae4bbf830\n0ae4bb8030\n0ae4bb8130\n0ae4bb8230\n0ae4bb8330\n0ae4bb8430\n0ae4bb8530\n0ae4bb8630\n0ae4bb8730\n0ae4bb8830\n0ae4bb8930\n0ae4bb8a30\n0ae4bb8b30\n0ae4bb8c30\n0ae4bb8d30\n0ae4bb8e30\n0ae4bb8f30\n0ae4bb8300\n0ae4bb8310\n0ae4bb8320\n0ae4bb8330\n0ae4bb8340\n0ae4bb8350\n0ae4bb8360\n0ae4bb8370\n0ae4bb8380\n0ae4bb8390\n0ae4bb83a0\n0ae4bb83b0\n0ae4bb83c0\n0ae4bb83d0\n0ae4bb83e0\n0ae4bb83f0\n0ae4bb8300\n0ae4bb8301\n0ae4bb8302\n0ae4bb8303\n0ae4bb8304\n0ae4bb8305\n0ae4bb8306\n0ae4bb8307\n0ae4bb8308\n0ae4bb8309\n0ae4bb830a\n0ae4bb830b\n0ae4bb830c\n0ae4bb830d\n0ae4bb830e\n0ae4bb830f\n</code></pre>\n"}], "owner": {"reputation": 248, "user_id": 3006604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a438c3ea2f0a9241554a5e9762e1384c?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/3006604/pascal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1516380598, "creation_date": 1516300321, "question_id": 48328065, "link": "https://stackoverflow.com/questions/48328065/generate-list-of-possibilities-from-incomplete-input", "title": "Generate list of possibilities from incomplete input", "body": "<p>Given a string containing 9 hexadecimal characters, I need to generate a list of all possible 10 character hexadecimal strings that contain the given 9 characters in order.  The list need not be in any specific order.</p>\n\n<p>I think the complete list will have 16x10=160 items, but 9 of those will be duplicates.  Don't worry about removing the duplicates, but if your solution doesn't include them that is fine too.</p>\n\n<p>For example, given 0ae4bb830, the list would include:<pre>\n00ae4bb830\n10ae4bb830\n20ae4bb830\n30ae4bb830\n40ae4bb830\n50ae4bb830\n60ae4bb830\n70ae4bb830\n80ae4bb830\n90ae4bb830\na0ae4bb830\nb0ae4bb830\nc0ae4bb830\nd0ae4bb830\ne0ae4bb830\nf0ae4bb830\n00ae4bb830*\n01ae4bb830\n02ae4bb830\n03ae4bb830\n04ae4bb830\n...\n</pre>\n*Duplicate</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1516299732, "post_id": 48326975, "comment_id": 83641339, "body": "Obligatory link to <a href=\"https://stackoverflow.com/questions/2165022/how-can-i-troubleshoot-my-perl-cgi-script\" title=\"how can i troubleshoot my perl cgi script\">stackoverflow.com/questions/2165022/&hellip;</a> . I recommend the section on &quot;Try sending errors to the browser&quot;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516315225, "post_id": 48326975, "comment_id": 83648741, "body": "Note that the HTML entity <code>&amp;nbsp;</code> must be terminated by a semicolon <code>;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "is_accepted": false, "score": 3, "last_activity_date": 1516296913, "creation_date": 1516296913, "answer_id": 48327209, "question_id": 48326975, "link": "https://stackoverflow.com/questions/48326975/how-to-display-form-output-on-same-html-page-with-error-end-of-script-output-bef/48327209#48327209", "title": "How to display form output on same html page with error End of script output before headers: inputcgi.cgi", "body": "<p>If you search for <code>perl cgi internal error</code> you will see that for CGI scripts, it is usually required to look into the error log. This will show you the actual error that happened.</p>\n\n<p>In this case you have an error in the so called <code>here-document</code>. Read about it in <a href=\"https://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow noreferrer\">perldoc perlop</a>, look for <code>&lt;&lt;EOF</code>.</p>\n\n<pre><code>   print &lt;&lt;EOF;\nThe price is $Price.\nEOF\n   print &lt;&lt; \"EOF\"; # same as above\nThe price is $Price.\nEOF\n</code></pre>\n\n<p>Note that the label of the here-doc, <code>EOF</code>, must come directly after the <code>&lt;&lt;</code>. You can only use a space if you explicitly use a quoted label.</p>\n\n<p>At the end of the document the marker must be at the beginning of the line.</p>\n"}, {"tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 1, "last_activity_date": 1516305275, "creation_date": 1516305275, "answer_id": 48329307, "question_id": 48326975, "link": "https://stackoverflow.com/questions/48326975/how-to-display-form-output-on-same-html-page-with-error-end-of-script-output-bef/48329307#48329307", "title": "How to display form output on same html page with error End of script output before headers: inputcgi.cgi", "body": "<p>In another answer you have the explanation of what is wrong with your code. This is for a more general case.</p>\n\n<p>As a general rule, it is always a good idea to use the library <code>CGI::Carp</code> (see <a href=\"http://perldoc.perl.org/CGI/Carp.html\" rel=\"nofollow noreferrer\">here</a>) while you are debugging your CGI scripts. It will send any errors to the browser screen instead of getting them in an error log.</p>\n\n<p>This will work for errors reported with <code>croak</code>, <code>confess</code>, <code>carp</code>, <code>warn</code> and <code>die</code>. The last two will come from the use of those Perl instructions or from errors coming from Perl itself; the others will come from using the library <code>Carp</code>, which is what most CPAN libraries use to report problems to any calling scripts.</p>\n\n<p>So you place <code>use CGI::Carp;</code> under <code>use CGI</code> and enjoy. If you only want to catch <code>die</code>, you may use <code>use CGI::Carp qw(fatalsToBrowser);</code>.</p>\n\n<p>Once you have debugged your script, remember to remove the use of this library as it gives too much information for a potential attacker to have.</p>\n"}], "owner": {"reputation": 21, "user_id": 8565178, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ee775804ca4061cb60b61036a6cc9149?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjay", "link": "https://stackoverflow.com/users/8565178/sanjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1516305275, "creation_date": 1516296028, "question_id": 48326975, "link": "https://stackoverflow.com/questions/48326975/how-to-display-form-output-on-same-html-page-with-error-end-of-script-output-bef", "title": "How to display form output on same html page with error End of script output before headers: inputcgi.cgi", "body": "<p>I received error :The server encountered an internal error and was unable to complete your request.Error message: End of script output before headers: inputcgi.cgi</p>\n\n<p>Please let me know what could be the reason for this? I have tried adding and deleting some lines but nothing helps...\nThe Cgi files are running correctly except these ones..</p>\n\n<pre><code>    #!\"c:\\xampp\\perl\\bin\\perl.exe\"\n\n\n    use strict;\n    use warnings;\n    use CGI qw(:all); \n\n    my $cgi= new CGI;\n    my $this_url=$cgi-&gt;url();\n    my $cr=$cgi-&gt;param(\"cr\");\n    print $cgi-&gt;header();\n\n    print\"Content-type:text/html\\n\\n\";\n\n    print &lt;&lt; EndofHTML;\n\n    &lt;html&gt;\n        &lt;head&gt;&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\"&gt;\n        &lt;link href=\"CalendarControl.css\"\n          rel=\"stylesheet\" type=\"text/css\"&gt;\n        &lt;script src=\"CalendarControl.js\"\n            language=\"javascript\"&gt;&lt;/script&gt;&lt;script src=\"inputvalidation.js\"&gt;&lt;/script&gt; &lt;/head&gt;\n        &lt;title&gt;Baseline Automation-Inputs &lt;/title&gt;\n\n        &lt;body&gt;\n        &lt;font face = \"Calibri\"&gt;\n            &lt;div class=\"divtop\"&gt;&lt;img src=\"logo.jpg\" &lt;/div&gt;\n            &lt;div class=\"head\"&gt;&lt;h2&gt;&lt;font color = \"white\"&gt;&lt;b&gt;TI Patch Request &lt;/b&gt;&lt;/font&gt;&lt;h2&gt;&lt;/div&gt;\n\n\n\n        &amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp\n                If you have already submitted a request, Click on this button. &lt;a href=\"google.com\" target=\"_blank\"&gt;Track Application status &lt;/a&gt;&lt;/td&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;\n            &lt;form name=\"input\" method=\"POST\" action=\"$this_url\"&gt;\n            &amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp&lt;i&gt; Fields marked with asterisk &lt;font color=\"red\"&gt;*&lt;/font&gt;  are compulsory&lt;/i&gt;\n            &lt;div class=\"divtable\"&gt;\n            &lt;table cellpadding=\"3\" cellspacing=\"5\"&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;Operating System&lt;font color = red&gt;*&lt;/font&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"radio\" name=\"ostype\" id=\"windows\" onclick=\"checkno()\" &gt;Windows&lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"radio\" name=\"ostype\" id=\"linux\" onclick=\"checkyes()\"&gt;Linux&lt;/td&gt;\n                &lt;td&gt;&lt;font color=\"red\"&gt;&lt;span id=\"enteros\"&gt;&lt;/font&gt;&lt;/span&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;Patch Date and Time&lt;font color = red&gt;*&lt;/font&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input name=\"todays_date\"\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0             onfocus=\"showCalendarControl(this);\"\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0             type=\"text\" style=\"width:100px;\"&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;Server Name &lt;font color = red&gt;*&lt;/font&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;span title=\"Press the 'ctrl' key to select multiple servers\"&gt;&lt;select name=\"serverlist\" id=\"slist\" size=\"4\" multiple&gt;\n                        &lt;option value=\"\" disabled selected&gt;Select servers&lt;/option&gt;\n                        &lt;option&gt;Server 1&lt;/option&gt;\n                        &lt;option&gt;Server 2&lt;/option&gt;\n                        &lt;option&gt;Server 3&lt;/option&gt;\n                        &lt;option&gt;Server 4&lt;/option&gt;\n                        &lt;option&gt;Server 5&lt;/option&gt;\n                    &lt;/select&gt;&lt;/span&gt;\n                &lt;/td&gt;\n                &lt;td&gt;&lt;font color=\"red\"&gt;&lt;span id=\"enterlist\"&gt;&lt;/font&gt;&lt;/span&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n            &lt;/tr&gt;\n\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;Frequency&lt;font color = red&gt;*&lt;/font&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"radio\" name=\"frequency\" id=\"biannual\" onclick=\"checkcondition()\"&gt;Biannual&lt;/td&gt;\n                &lt;td rowspan&gt;&lt;input type=\"radio\" name= \"frequency\" id=\"monthly\" onclick=\"checkcondition()\"&gt;Monthly&lt;/td&gt;\n                &lt;td&gt;&lt;font color=\"red\"&gt;&lt;span id=\"enterfreq\"&gt;&lt;/font&gt;&lt;/span&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;Snapshot Required?&lt;font color = red&gt;*&lt;/font&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"radio\" name=\"snap\" id=\"yes\"&gt;Yes&lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"radio\" name=\"snap\" id=\"no\"&gt;No&lt;/td&gt; \n\n\n            &lt;/tr&gt;\n\n        &lt;tr&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;Baseline Update duration&lt;font color = red&gt;*&lt;/font&gt;&lt;/td&gt;\n                &lt;td&gt; &lt;input type=\"radio\" name=\"update\" id=\"one\"&gt;1 hour&lt;/td&gt;\n                &lt;td&gt; &lt;input type=\"radio\" name=\"update\" id=\"two\"&gt;2 hours&lt;/td&gt;\n                &lt;td&gt;  &lt;input type=\"radio\" name=\"update\" id=\"four\"&gt;4 hours&lt;/td&gt;\n                &lt;td&gt;&lt;font color=\"red\"&gt;&lt;span id=\"enterhour\"&gt;&lt;/font&gt;&lt;/span&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;Change Request &lt;/td&gt;\n                &lt;td&gt;&lt;input type=\"text\" name=\"cr\" id=\"cr\" maxlength=\"6\" style=\"width:100px;\"&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;tr&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n            &lt;td&gt;&lt;/td&gt;\n\n                &lt;td&gt;Description&lt;/td&gt;\n                &lt;td colspan=\"5\"&gt; &lt;textarea rows=\"5\" cols=\"40\" placeholder=\"Enter any comments or queries\" align=\"center\"&gt;&lt;/textarea&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n\n             &lt;tr&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td style=\"word-wrap: break-word;\"&gt;E-mail (in case you want to    &lt;br&gt; receive notifications)&lt;/td&gt;\n                &lt;td&gt;&lt;input type =\"text\" name=\"email\" style=\"width:150px;\" onfocus=\" \" onBlur=\"ValidateEmail()\"&gt; &lt;/td&gt;\n                &lt;td&gt;&lt;font color=\"red\"&gt;&lt;span id=\"invalidemail\"&gt;&lt;/font&gt;&lt;/span&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n\n            &lt;/table&gt;&lt;/div&gt;\n            &lt;br&gt; &lt;br&gt; \n\n\n\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp&amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n\n                &lt;input type=\"button\" name=\"prev\" id=\"prev\" value=\"&lt;&lt;Prev\"&gt; \n                &lt;input type=\"button\" name=\"save\" id=\"save\" value=\"Save\" onClick=\"blank()\"&gt;\n                &lt;input type=\"button\" name=\"next\" id=\"next\" value=\"Next&gt;&gt;\"&gt;\n\n            &lt;br&gt;\n            &lt;br&gt;&lt;br&gt;\n            &lt;div class=\"head\"&gt;&lt;h2&gt;&lt;font color = \"white\"&gt;&lt;b&gt;Selected Request&lt;/b&gt;&lt;/font&gt;&lt;h2&gt;&lt;/div&gt;&lt;br&gt; &lt;br&gt; \n            &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp&amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp&amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp&amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n                &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp &amp;nbsp\n            &lt;input type = \"submit\" value =\"Submit Request\" name=\"submit\"&gt;\n\n\n            &lt;/form&gt;&lt;/font&gt;\n            &lt;p&gt;The cr you entered was '$cr'&lt;/p&gt; \n        &lt;/body&gt;\n        &lt;/html&gt; \n        EndofHTML\n        #So this was the code.\n</code></pre>\n"}, {"tags": ["perl", "perl-xs", "perlapi"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516290774, "post_id": 48325236, "comment_id": 83635928, "body": "<code>get_code_info</code> isn&#39;t a C function. Calling Perl subs is documented in perlcall. You basically have to do the opposite of XS; write a wrapper that glues a Perl sub to C."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516290947, "post_id": 48325236, "comment_id": 83636060, "body": "@ikegami: I understand now. the <code>get_code_inf</code> is defined after <code>MODULE</code> so it is perl sub. Is there a way to reuse functions which are defined before <code>MODULE</code> (those which are not perl sub)?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516290974, "post_id": 48325236, "comment_id": 83636088, "body": "Yes. Those are just ordinary C functions. Nothing special needs to be done."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516291329, "post_id": 48325236, "comment_id": 83636311, "body": "Of course, if you want to do that from another .c or .xs, that gets a bit complicated because that requires linking (statically or dynamically) to the products of the .xs file. You should instead created a separate .c (and .h) that creates the function you want multiple other .c to use, and link to that object."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516291480, "post_id": 48325236, "comment_id": 83636401, "body": "@ikegami: Just for example. How it would look if I try to reuse <a href=\"https://metacpan.org/source/PEVANS/Syntax-Keyword-Try-0.09/lib/Syntax/Keyword/Try.xs#L369\" rel=\"nofollow noreferrer\">this function</a> from my <code>.xs</code>: 1. How make visible that <code>.xs</code> to mine; 2. How to link to that object?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1516292170, "post_id": 48325236, "comment_id": 83636884, "body": "From a different <code>xs</code>? 1. For starters, remove the <code>static</code> keyword. That scopes it to the file. It might not even end up in the object file (.obj/.o) if nothing reference it. 2. Now that it&#39;s exposed, you probably rename it to avoid conflicts. Remember, C doesn&#39;t have namespaces. 3. You&#39;d have to have the DLL (.dll or .so) that .xs generated handy. Use your system&#39;s DLL loader to load the DLL and get a pointer to the sub. /// Again, this is very very backwards. Make a library from the sub and have both .xs link to that library."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516297260, "post_id": 48325236, "comment_id": 83640002, "body": "...plenty of modules link to external libraries. Use any of them as an example."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516297467, "post_id": 48325236, "comment_id": 83640120, "body": "@ikegami: Yes, link to external libraries, but not perl .xs. Those (from <code>Devel</code>) I see copy/paste C functions and state it is not possible... ("}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516299943, "post_id": 48325236, "comment_id": 83641453, "body": "Your comment makes no sense. We&#39;re not talking about a .xs file. We&#39;re talking about a DLL."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516300351, "post_id": 48325236, "comment_id": 83641687, "body": "I suppose most other modules link to a static library or object that has stubs that load the actual function from the DLL, and you won&#39;t have that for an XS file. So you&#39;ll have to load the DLL yourself. In a way, that&#39;s easier because you don&#39;t have to do anything will building your .xs file; it will done at run-time. The downside is lack of portability since DLL-loading functions vary by OS."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516300621, "post_id": 48325236, "comment_id": 83641832, "body": "<a href=\"https://www.dwheeler.com/program-library/Program-Library-HOWTO/x172.html\" rel=\"nofollow noreferrer\">dwheeler.com/program-library/Program-Library-HOWTO/x172.html</a>"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516290662, "creation_date": 1516290582, "last_edit_date": 1516290662, "question_id": 48325236, "link": "https://stackoverflow.com/questions/48325236/how-to-use-xsubs-from-another-module", "title": "How to use XSUBs from another module?", "body": "<p>I am writing <code>XS</code> module. And want to reuse functions from another <code>XS</code> in <a href=\"https://metacpan.org/source/RGARCIA/Sub-Identify-0.14/Identify.xs\" rel=\"nofollow noreferrer\"><code>Sub::Indentify</code></a>.</p>\n\n<p>In case of usual perl module I can do:</p>\n\n<pre><code>use Sub::Identify;\nSub::Identify::get_code_info( $code );\n</code></pre>\n\n<p>How do same thing from <code>XS</code>? </p>\n\n<p><strong>UPD</strong><br>\nI want to call <code>get_code_info</code> as <code>C</code> function not as perl subroutine</p>\n"}, {"tags": ["perl", "compression"], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 3240659, "user_type": "registered", "profile_image": "https://graph.facebook.com/565306868/picture?type=large", "display_name": "nickcrabtree", "link": "https://stackoverflow.com/users/3240659/nickcrabtree"}, "is_accepted": false, "score": 0, "last_activity_date": 1516624646, "creation_date": 1516624646, "answer_id": 48381796, "question_id": 48324186, "link": "https://stackoverflow.com/questions/48324186/lzw-decompression-using-perl/48381796#48381796", "title": "LZW decompression using perl", "body": "<p>You are reading the entire file into the first element of the <code>@compressed</code> array in this line:</p>\n\n<pre><code>my @compressed = &lt;DATAIN&gt;;\n</code></pre>\n\n<p>However your print statement outputs it all to one line. This means that in the <code>my $w = shift @compressed</code> statement, the entire text is moved into the <code>$w</code> variable and so the loop below never runs.</p>\n\n<p>You need to split the data you read in by whitespace, like this:</p>\n\n<pre><code>my $compressed = &lt;DATAIN&gt;; # Data file contains only one line so read into scalar variable\nmy @compressed = split(/ /, $compressed);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6394697, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u3524uGNWD0/AAAAAAAAAAI/AAAAAAAAAGQ/rIQ_0iZqdW0/photo.jpg?sz=128", "display_name": "povilito", "link": "https://stackoverflow.com/users/6394697/povilito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516624646, "creation_date": 1516287459, "last_edit_date": 1516289767, "question_id": 48324186, "link": "https://stackoverflow.com/questions/48324186/lzw-decompression-using-perl", "title": "LZW decompression using perl", "body": "<p>I've found LZW compression/decompression example in Perl and I wanted to make it work for compressing/decompressing from a file.</p>\n\n<p><strong>Here is original code:</strong></p>\n\n<pre><code>#Compress a string to a list of output symbols.\nsub compress {\nmy $uncompressed = shift;\n\n# Build the dictionary.\nmy $dict_size = 256;\nmy %dictionary = map {chr $_ =&gt; chr $_} 0..$dict_size-1;\n\nmy $w = \"\";\nmy @result;\nforeach my $c (split '', $uncompressed) {\n    my $wc = $w . $c;\n    if (exists $dictionary{$wc}) {\n        $w = $wc;\n    } else {\n        push @result, $dictionary{$w};\n        # Add wc to the dictionary.\n        $dictionary{$wc} = $dict_size;\n        $dict_size++;\n        $w = $c;\n    }\n}\n\n# Output the code for w.\nif ($w) {\n    push @result, $dictionary{$w};\n}\nreturn @result;\n}\n\n#Decompress a list of output ks to a string.\nsub decompress {\nmy @compressed = @_;\n\n# Build the dictionary.\nmy $dict_size = 256;\nmy %dictionary = map {chr $_ =&gt; chr $_} 0..$dict_size-1;\n\nmy $w = shift @compressed;\nmy $result = $w;\nforeach my $k (@compressed) {\n    my $entry;\n    if (exists $dictionary{$k}) {\n        $entry = $dictionary{$k};\n    } elsif ($k == $dict_size) {\n        $entry = $w . substr($w,0,1);\n    } else {\n        die \"Bad compressed k: $k\";\n    }\n    $result .= $entry;\n\n    # Add w+entry[0] to the dictionary.\n    $dictionary{$dict_size} = $w . substr($entry,0,1);\n    $dict_size++;\n\n    $w = $entry;\n}\nreturn $result;\n }\n\n# How to use:\nmy @compressed = compress('TOBEORNOTTOBEORTOBEORNOT');\nprint \"@compressed\\n\";\nmy $decompressed = decompress(@compressed);\nprint \"$decompressed\\n\";\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<p>T O B E O R N O T 256 258 260 265 259 261 263\nTOBEORNOTTOBEORTOBEORNOT</p>\n\n<p><strong>Here is my code:</strong></p>\n\n<pre><code>use strict;\nuse POSIX;\nuse Data::Dumper;\n\nprint \"0 - compress; 1 - decompress:\";\nmy $CD=&lt;STDIN&gt;;\n$CD+=0;\nif ($CD != 0 &amp;&amp; $CD != 1) {print \"Wrong symbol\".\"\\n\"}\n\nif($CD==0){\n\nprint \"Type the name of file you want to compress:\";\nmy $file=&lt;STDIN&gt;;\n\n\nopen (DATAIN, \"&lt;$file\") or die \"There is no such a file $file: $!\";\nbinmode (DATAIN);\n\nmy $uncompressed = &lt;DATAIN&gt;;\n\n\nprint \"\\n\";\nprint \"File to binary:\\n\";\nprint \"$uncompressed\\n\";\n\n# Build the dictionary.\nmy $dict_size = 256;\nmy %dictionary = map {chr $_ =&gt; chr $_} 0..$dict_size-1;\n\nmy $w = \"\";\nmy @result;\nforeach my $c (split '', $uncompressed) {\n    my $wc = $w . $c;\n    if (exists $dictionary{$wc}) {\n        $w = $wc;\n    } else {\n        push @result, $dictionary{$w};\n        # Add wc to the dictionary.\n        $dictionary{$wc} = $dict_size;\n        $dict_size++;\n        $w = $c;\n    }\n    }\n\n# Output the code for w.\nif ($w) {\n    push @result, $dictionary{$w};\n}\n#print into screen\nprint \"\\n\";\nprint \"Compressed:\\n\";\nprint \"@result\\n\";\n#print into file\nmy $output = \"output.txt\";\nopen FILE, '&gt;'.$output;\nprint FILE \"@result\";\nclose FILE;\n}\n\nif($CD==1){\n\nprint \"Type the name of file you want to decompress:\";\nmy $outfile=&lt;STDIN&gt;;\n\n\nopen (DATAIN, \"&lt;$outfile\") or die \"There is no such a file $outfile: $!\";\nbinmode (DATAIN);\n\nmy @compressed = &lt;DATAIN&gt;;\n\n# Build the dictionary.\nmy $dict_size = 256;\nmy %dictionary = map {chr $_ =&gt; chr $_} 0..$dict_size-1;\n\nmy $w = shift @compressed;\nmy $result = $w;\nforeach my $k (@compressed) {\n    my $entry;\n    if (exists $dictionary{$k}) {\n        $entry = $dictionary{$k};\n    } elsif ($k == $dict_size) {\n        $entry = $w . substr($w,0,1);\n    } else {\n        die \"Bad compressed k: $k\";\n    }\n    $result .= $entry;\n\n    # Add w+entry[0] to the dictionary.\n    $dictionary{$dict_size} = $w . substr($entry,0,1);\n    $dict_size++;\n\n    $w = $entry;\n}\nprint \"$result\\n\";\n\n}\n</code></pre>\n\n<p>So, it compresses file.txt - \"TOBEORNOTTOBEORTOBEORNOT\" fine, but when I want to decompress output file - output.txt - \"T O B E O R N O T 256 258 260 265 259 261 263\" it fails and just gives me the same \"T O B E O R N O T 256 258 260 265 259 261 263\" as a result. Maybe you have any ideas what could be wrong with my code?</p>\n"}, {"tags": ["perl", "permutation"], "comments": [{"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1516277926, "post_id": 48321056, "comment_id": 83627477, "body": "&quot;Permutations&quot; would be printing every possible order those six words can be arranged in, such as &quot;obama john donald cena barrack trump&quot;. Is that what you&#39;re actually looking for? Because I get the impression it isn&#39;t."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1516278401, "post_id": 48321056, "comment_id": 83627745, "body": "Just put <code>&quot;john cena&quot;</code>, <code>&quot;barack obama&quot;</code>, and <code>&quot;donald trump&quot;</code> into one string each and then apply the permutation algorithm you already have to that three-element array. You have an algorithm, haven&#39;t you?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1516279164, "post_id": 48321056, "comment_id": 83628249, "body": "Please <a href=\"https://stackoverflow.com/posts/48321056/edit\">edit</a> your question and include a working program. Right now you are missing the variable definition for your data, so we cannot run your code. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more details."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 0, "creation_date": 1516317566, "post_id": 48321056, "comment_id": 83649494, "body": "Off-topic, but maybe helpful in general, when you write Perl code, if you are escaping characters in string literals, you are probably doing it wrong.  You can make any delimiter character an interpolating quote with the <code>qq</code> operator.  Your print statements can also be made less messy if you remember that print takes a list of arguments and prints them.  So your messy print statements can be reduced to <code>print $fh $indentation, $tab x $indent_level, qq(&quot;$word_list[1]&quot;);</code> For more info see <a href=\"https://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1787, "user_id": 1712449, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/PlwBV.gif?s=128&g=1", "display_name": "hymie", "link": "https://stackoverflow.com/users/1712449/hymie"}, "is_accepted": false, "score": -1, "last_activity_date": 1516287417, "creation_date": 1516287417, "answer_id": 48324174, "question_id": 48321056, "link": "https://stackoverflow.com/questions/48321056/perl-permutation/48324174#48324174", "title": "Perl permutation", "body": "<ul>\n<li>Get the value of <code>$#array</code>, add 1, divide by 2, and store that number in a variable (call it <code>$v</code>)</li>\n<li>Get a permutation of the set of numbers [0 .. <code>$v</code>-1]</li>\n<li>For each member <code>$i</code> of the resulting permutation, <code>print $array[2*$i] $array[2*$i+1]</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1516287854, "creation_date": 1516287854, "answer_id": 48324318, "question_id": 48321056, "link": "https://stackoverflow.com/questions/48321056/perl-permutation/48324318#48324318", "title": "Perl permutation", "body": "<pre><code>use Algorithm::Loops qw( NextPermuteNum );\n\nmy @array = ( \"john cena\", \"barrack obama\", \"donald trump\" );\n\nmy @i = 0..$#array;\ndo {\n   say map { \"$_\\n\" } @array[@i];\n} while NextPermuteNum(@i);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 212, "user_id": 8332519, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/701313eb2b62158bcacc70bd31762e32?s=128&d=identicon&r=PG&f=1", "display_name": "San", "link": "https://stackoverflow.com/users/8332519/san"}, "is_accepted": false, "score": 0, "last_activity_date": 1516292713, "last_edit_date": 1516292713, "creation_date": 1516291056, "answer_id": 48325384, "question_id": 48321056, "link": "https://stackoverflow.com/questions/48321056/perl-permutation/48325384#48325384", "title": "Perl permutation", "body": "<pre><code>use Algorithm::Permute;\n\nmy @array = ( \"john cena\", \"barrack obama\", \"donald trump\" );\n\nmy $iterator = Algorithm::Permute-&gt;new ( \\@array );\nwhile (my @perm = $iterator-&gt;next) {\n    say map { \"$_\\n\" } @perm;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8411121, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ab3799b057200986e976572a796eae8d?s=128&d=identicon&r=PG&f=1", "display_name": "H.A", "link": "https://stackoverflow.com/users/8411121/h-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1516292713, "creation_date": 1516277521, "last_edit_date": 1516279101, "question_id": 48321056, "link": "https://stackoverflow.com/questions/48321056/perl-permutation", "title": "Perl permutation", "body": "<p>Hi i am working on a script in perl i have seen codes for permutation but my problem is i have an array with values say @array =(john, cena , barrack, obama, donald, trump) value at index 0 is first name and at 1 is last name at 2 is first name again and at 3 is last name and so on. so it should be like</p>\n\n<pre><code>john cena\nbarrack obama\ndonald trump\n</code></pre>\n\n<p>i need permutation for this combination</p>\n\n<pre><code>barrack obama\ndonald trump\njohn cena\n\ndonald trump\njohn cena\nbarrack obama\n</code></pre>\n\n<p>like this \nhow this can be done!!\nI have done this with hard coding but i need to make it more generic !</p>\n\n<pre><code>            my $i=0;\n            my @array;\n            print $fh_testcases \"\\n${indentation}${tab}$tab'$intent_json_result': [[\\n\";\n            while ((my $key, my $value) = each %{@{$p_phrase_recogslots}[${speech_phrase_counter}-1]}) {\n                $array[$i]= $key;\n                $array[$i+1]= $value;\n                $i= $i+2;\n            }\n            if ($i == 6){\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[0]\\\", \\\"$array[1]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[2]\\\", \\\"$array[3]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[4]\\\", \\\"$array[5]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"origin\\\", \\\"onboard\\\")\\n\"; #TODO handle offboard cases\n                print $fh_testcases \"${indentation}${tab}$tab]]\\n\";\n                print $fh_testcases \"${indentation}${tab}},\\n\";\n\n                print $fh_testcases \"${indentation}${tab}\\{'$intent_json_result': [[\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[4]\\\", \\\"$array[5]\\\"),\\n\";                    \n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[2]\\\", \\\"$array[3]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[0]\\\", \\\"$array[1]\\\"),\\n\";\n\n                print $fh_testcases \"${indentation}${tab}\\{'$intent_json_result': [[\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[4]\\\", \\\"$array[5]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[0]\\\", \\\"$array[1]\\\"),\\n\";                    \n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[2]\\\", \\\"$array[3]\\\"),\\n\";\n\n                print $fh_testcases \"${indentation}${tab}\\{'$intent_json_result': [[\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[2]\\\", \\\"$array[3]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[4]\\\", \\\"$array[5]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[0]\\\", \\\"$array[1]\\\"),\\n\"; \n\n                print $fh_testcases \"${indentation}${tab}\\{'$intent_json_result': [[\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[2]\\\", \\\"$array[3]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[0]\\\", \\\"$array[1]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[4]\\\", \\\"$array[5]\\\"),\\n\";\n\n                print $fh_testcases \"${indentation}${tab}\\{'$intent_json_result': [[\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[0]\\\", \\\"$array[1]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[4]\\\", \\\"$array[5]\\\"),\\n\";\n                print $fh_testcases \"${indentation}${tab}$tab$tab(\\\"$array[2]\\\", \\\"$array[3]\\\"),\\n\";\n            }\n</code></pre>\n"}, {"tags": ["c++", "c", "perl", "ipcopen3"], "comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 1, "creation_date": 1516264633, "post_id": 48316811, "comment_id": 83619187, "body": "pipe() and fork() can do the same thing, but it&#39;s of course a lot more cumbersome. Start by reading <a href=\"http://perldoc.perl.org/perlipc.html#Safe-Pipe-Opens\" rel=\"nofollow noreferrer\">Safe Pipe Opens in perldoc perlipc</a> which is a comparatively high-level discussion of these concepts. You can then transfer the same concepts to Posix/C."}, {"owner": {"reputation": 9, "user_id": 7152788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2432695ed76f8917ca01b1ed9cb5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7152788/learner"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1516266929, "post_id": 48316811, "comment_id": 83620599, "body": "Yes i was looking at pipe and fork but i&#39;m unable to get it to work and its way beyond my understanding, i guess it takes some time to get over it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516267851, "post_id": 48316811, "comment_id": 83621224, "body": "In C or in C++? It&#39;s not the same. Windows or Linux?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516269190, "post_id": 48316811, "comment_id": 83622072, "body": "In short: <code>system</code> is easiest but may be insecure (and doesn&#39;t give all that <code>Open3</code> does); <code>popen</code> is better, as well as <code>fork</code>+<code>exec</code>. I am not sure whether &quot;IPC::Open3&quot; indicates Linux only (don&#39;t know whether it&#39;s portable), but: on Windows there are API for this, <a href=\"https://msdn.microsoft.com/en-us/library/ms682425%28VS.85%29.aspx\" rel=\"nofollow noreferrer\">CreateProcess</a> in the first place, and then <code>ShellExecute</code> (probably more)"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1516270770, "post_id": 48316811, "comment_id": 83623110, "body": "If you can use <code>boost</code> then <a href=\"http://www.boost.org/doc/libs/1_66_0/doc/html/process.html\" rel=\"nofollow noreferrer\"><code>boost::process</code></a> is probably worth a look."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1516288063, "post_id": 48316811, "comment_id": 83634035, "body": "<code>open3</code> is just a series of system calls. It would be trivial to port to C."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516300295, "post_id": 48316811, "comment_id": 83641660, "body": "@learner: Please answer <b>zdim&#39;s</b> question about whether you are working on Windows or Linux (or something else)."}, {"owner": {"reputation": 9, "user_id": 7152788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2432695ed76f8917ca01b1ed9cb5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7152788/learner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1516769980, "post_id": 48316811, "comment_id": 83819919, "body": "@Borodin : I&#39;m on POSIX, RHEL to be precise"}], "answers": [{"comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516265449, "post_id": 48317066, "comment_id": 83619703, "body": "While these links may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes."}, {"owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 1, "creation_date": 1516268532, "post_id": 48317066, "comment_id": 83621635, "body": "Gerhard Barnard, what is your point? &quot;Try popen()&quot; is the essential part. :) Also, I am afraid popen() specs will not change significantly any time soon, and I don&#39;t believe those links will become dead soon. At least until &#39;learner&#39; gets a chance to click on them. Anyway, I hope the examples included will not trigger more stereotype reactions."}, {"owner": {"reputation": 9, "user_id": 7152788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2432695ed76f8917ca01b1ed9cb5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7152788/learner"}, "edited": false, "score": 0, "creation_date": 1516269864, "post_id": 48317066, "comment_id": 83622502, "body": "thanks for the heads up but i already know this, what i was looking for can be thought as bidirectional communication, like popen2 gives input and output file descriptors? I guess there is nothing like this in C or CPP"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1516274357, "post_id": 48317066, "comment_id": 83625336, "body": "@Laszlo, We work on review, which is based on SO terms and Conditions, we do not post link only answers and the post was originally marked as low quality because of the link only answer. If you subsequently received 4 delete votes, it would have been deleted, hence why the comment was posted. After edit, it should be fine."}, {"owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "reply_to_user": {"reputation": 9, "user_id": 7152788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2432695ed76f8917ca01b1ed9cb5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7152788/learner"}, "edited": false, "score": 0, "creation_date": 1516274577, "post_id": 48317066, "comment_id": 83625462, "body": "@learner, yes, you will need to use 2 pipes, as they are unidirectional."}, {"owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "reply_to_user": {"reputation": 9, "user_id": 7152788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2432695ed76f8917ca01b1ed9cb5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7152788/learner"}, "edited": false, "score": 0, "creation_date": 1516275220, "post_id": 48317066, "comment_id": 83625814, "body": "@learner I found some popen2 implementations here at stackoverflow ( <a href=\"https://stackoverflow.com/questions/12778672/killing-process-that-has-been-created-with-popen2\" title=\"killing process that has been created with popen2\">stackoverflow.com/questions/12778672/&hellip;</a> ), and one here: <a href=\"https://media.unpythonic.net/emergent-files/01108826729/popen2.c\" rel=\"nofollow noreferrer\">media.unpythonic.net/emergent-files/01108826729/popen2.c</a> . Does it help?"}], "tags": [], "owner": {"reputation": 644, "user_id": 7333037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3a4873895bfc709cb4c1725bafc87a?s=128&d=identicon&r=PG&f=1", "display_name": "Laszlo", "link": "https://stackoverflow.com/users/7333037/laszlo"}, "is_accepted": false, "score": 0, "last_activity_date": 1516275805, "last_edit_date": 1516275805, "creation_date": 1516265111, "answer_id": 48317066, "question_id": 48316811, "link": "https://stackoverflow.com/questions/48316811/do-we-have-a-anything-similar-to-ipcopen3-of-perl-in-c-or-c/48317066#48317066", "title": "Do we have a anything similar to IPC::Open3 of perl in C or C++", "body": "<p><a href=\"http://pubs.opengroup.org/onlinepubs/009604499/functions/popen.html\" rel=\"nofollow noreferrer\">popen()</a> supports one-way communications. If you want bidirectional data exchange, you'll need 2 pipes. <a href=\"https://emergent.unpythonic.net/\" rel=\"nofollow noreferrer\">Jeff Epler</a> came up with the following bidirectional <a href=\"https://media.unpythonic.net/emergent-files/01108826729/popen2.c\" rel=\"nofollow noreferrer\">popen2.c</a> implementation:</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nstruct popen2 {\n    pid_t child_pid;\n    int   from_child, to_child;\n};\n\nint popen2(const char *cmdline, struct popen2 *childinfo) {\n    pid_t p;\n    int pipe_stdin[2], pipe_stdout[2];\n\n    if(pipe(pipe_stdin)) return -1;\n    if(pipe(pipe_stdout)) return -1;\n\n    printf(\"pipe_stdin[0] = %d, pipe_stdin[1] = %d\\n\", pipe_stdin[0], pipe_stdin[1]);\n    printf(\"pipe_stdout[0] = %d, pipe_stdout[1] = %d\\n\", pipe_stdout[0], pipe_stdout[1]);\n\n    p = fork();\n    if(p &lt; 0) return p; /* Fork failed */\n    if(p == 0) { /* child */\n        close(pipe_stdin[1]);\n        dup2(pipe_stdin[0], 0);\n        close(pipe_stdout[0]);\n        dup2(pipe_stdout[1], 1);\n        execl(\"/bin/sh\", \"sh\", \"-c\", cmdline, 0);\n        perror(\"execl\"); exit(99);\n    }\n    childinfo-&gt;child_pid = p;\n    childinfo-&gt;to_child = pipe_stdin[1];\n    childinfo-&gt;from_child = pipe_stdout[0];\n    return 0; \n}\n\n#define TESTING\n#ifdef TESTING\nint main(void) {\n    char buf[1000];\n    struct popen2 kid;\n    popen2(\"tr a-z A-Z\", &amp;kid);\n    write(kid.to_child, \"testing\\n\", 8);\n    close(kid.to_child);\n    memset(buf, 0, 1000);\n    read(kid.from_child, buf, 1000);\n    printf(\"kill(%d, 0) -&gt; %d\\n\", kid.child_pid, kill(kid.child_pid, 0)); \n    printf(\"from child: %s\", buf); \n    printf(\"waitpid() -&gt; %d\\n\", waitpid(kid.child_pid, NULL, 0));\n    printf(\"kill(%d, 0) -&gt; %d\\n\", kid.child_pid, kill(kid.child_pid, 0)); \n    return 0;\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7152788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2432695ed76f8917ca01b1ed9cb5b8d?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/7152788/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516275805, "creation_date": 1516264149, "question_id": 48316811, "link": "https://stackoverflow.com/questions/48316811/do-we-have-a-anything-similar-to-ipcopen3-of-perl-in-c-or-c", "title": "Do we have a anything similar to IPC::Open3 of perl in C or C++", "body": "<p>I used open3 of perl to run a command, the custom command behaves like a shell it takes input and displays output and waits for another input till quit is given</p>\n\n<p>Now I've to use same command and write it in C language, do we have something similar to IPC::Open3 in C or C++ ?</p>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516261163, "post_id": 48315135, "comment_id": 83617426, "body": "It sounds like you may want composition actually (not inheritance). Build an object of that other (would-be parent) class in your class (in an attribute or as class-data) so you can use that class as needed. Otherwise write your class as you wish."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516261788, "post_id": 48315135, "comment_id": 83617724, "body": "@zdim Yes, but I also want to do <code>$obj-&gt;parent_method_xx(...)</code> without having to write wrappers for all the parents methods in the child. That&#39;s why I think using <code>AUTOLOAD()</code> might be a solution."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1516293523, "post_id": 48315135, "comment_id": 83637778, "body": "@H&#229;konH&#230;gland Moose will write the wrappers for you if you use <code>handles</code> (the argument can be an array or a regex, among others; a regex will find all the methods in that class matching the pattern.)"}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1516262013, "post_id": 48315380, "comment_id": 83617839, "body": "Thanks! I am not familiar with &quot;inside-out&quot; objects, it might be my best option. I was thinking about not using use parent at all, and keep a copy of the parent object in the child, and use <code>UNIVERSAL-&gt;can()</code> from an <code>AUTOLOAD()</code> method to dispatch to the parent, but it might very well have drawbacks that I am not aware of yet."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1516293297, "post_id": 48315380, "comment_id": 83637638, "body": "Yes, that&#39;s a reasonable option too. It&#39;s not quite subclassing, but it works :)"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 2, "last_activity_date": 1516258293, "creation_date": 1516258293, "answer_id": 48315380, "question_id": 48315135, "link": "https://stackoverflow.com/questions/48315135/how-to-derive-a-child-class-when-parents-internal-representation-is-not-known/48315380#48315380", "title": "How to derive a child class when parent&#39;s internal representation is not known?", "body": "<p>It's possible to use \"inside-out objects\" for this. Even if you don't know anything about the parent class's object representation, one thing that you can count on at least is that every object is a <em>reference</em>. That means, since every reference has a unique <a href=\"https://metacpan.org/pod/Scalar::Util#refaddr\" rel=\"nofollow noreferrer\">refaddr</a>, that you can store your own properties for an object in a hash, keyed by the object's refaddr, and never have to put anything \"inside\" the object at all.</p>\n\n<p>Doing this yourself properly is possible, but a bit tricky if you're not familiar with the details, so I would recommend using <a href=\"https://metacpan.org/pod/MooseX::NonMoose::InsideOut\" rel=\"nofollow noreferrer\">MooseX::NonMoose::InsideOut</a> or <a href=\"https://metacpan.org/pod/MooX::InsideOut\" rel=\"nofollow noreferrer\">MooX::InsideOut</a> in your subclass to do the work for you.</p>\n"}, {"comments": [{"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 1, "creation_date": 1516317882, "post_id": 48316531, "comment_id": 83649584, "body": "When you add autoloading to an object, it&#39;s good to also override <code>can</code> to return true for methods implemented in the autoloader."}, {"owner": {"reputation": 25590, "user_id": 59135, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/90c563665ec03a1b9e80671bb95deeed?s=128&d=identicon&r=PG", "display_name": "daotoad", "link": "https://stackoverflow.com/users/59135/daotoad"}, "edited": false, "score": 1, "creation_date": 1516318611, "post_id": 48316531, "comment_id": 83649768, "body": "If you don&#39;t mind listing the methods you want to be able to call, you can manually create them with code like <code>BEGIN { for (@DELEGATE_METHODS ) { no strict refs; *{__PACKAGE__.&quot;::$_&quot;} = sub {  shift-&gt;{parent}-&gt;$_(@_) } }</code>.  Then you don&#39;t have to mess around with AUTOLOAD."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 1, "last_activity_date": 1516263049, "creation_date": 1516263049, "answer_id": 48316531, "question_id": 48315135, "link": "https://stackoverflow.com/questions/48315135/how-to-derive-a-child-class-when-parents-internal-representation-is-not-known/48316531#48316531", "title": "How to derive a child class when parent&#39;s internal representation is not known?", "body": "<p>Here is a possible solution using <code>OVERLOAD()</code> and object composition:</p>\n\n<pre><code>package Employee;\nuse Person;\n\nsub new {\n    my ($class, $first_name, $last_name, $id, $title) = @_;\n\n    my $parent = Person-&gt;new( $first_name, $last_name );\n    my $self = { \n        parent =&gt; $parent, id =&gt; $id, title =&gt; $title\n    };\n    return bless $self, $class;\n}\n\nsub AUTOLOAD {\n    my ( $self, @args ) = @_;\n    our $AUTOLOAD;\n    my $sub_name = $AUTOLOAD;\n    $sub_name =~ s/^Employee:://;\n    my $parent = $self-&gt;{parent};\n    my $parent_sub = $parent-&gt;can( $sub_name );\n    if ($parent_sub ) {\n        return $parent_sub-&gt;( $parent, @args);\n    }\n}\n\n# More child methods follows here..\n1;\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "accepted_answer_id": 48316531, "answer_count": 2, "score": 1, "last_activity_date": 1516263049, "creation_date": 1516257186, "question_id": 48315135, "link": "https://stackoverflow.com/questions/48315135/how-to-derive-a-child-class-when-parents-internal-representation-is-not-known", "title": "How to derive a child class when parent&#39;s internal representation is not known?", "body": "<p>What is the best way to derive a class from a class that someone else wrote, and which internal representation (i.e. its object hash) must be assumed unknown? The problem I see is that the obvious way:</p>\n\n<pre><code>package Employee;\nuse parent 'Person';    # inherits from Person\n\n# Override constructor\nsub new {\n    my ($class, $first_name, $last_name, $id, $title) = @_;\n\n    # Call the constructor of the parent class, Person.\n    my $self = $class-&gt;SUPER::new( $first_name, $last_name );\n    # Add few more attributes\n    $self-&gt;{id}   = $id;  # &lt;-- I cannot know if 'id' is already used by parent\n    $self-&gt;{title} = $title; # &lt;-- same here: 'title' might be in use\n    return bless $self, $class;\n}\n</code></pre>\n\n<p>runs into the problem that the <code>$self</code> hash of the parent must be assumed a black box (even if we know the representation (attributes) today, we cannot know if the author of the module will change it in the future). Then, if the child tries to insert its own attributes into the <code>$self</code> hash, it might overwrite the parents attributes with the same name.</p>\n"}, {"tags": ["perl", "output", "backquote"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516257750, "post_id": 48315089, "comment_id": 83615905, "body": "You are right to expect it to wind up in <code>$dum</code> -- it should; that <code>print</code> in <code>ProgB.pl</code> goes to <code>STDOUT</code>, so it should end up in <code>$dum</code>.  There is something else, not shown. Can you show complete programs, or at least more if they are too large?"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1516258175, "post_id": 48315089, "comment_id": 83616062, "body": "That&#39;s what backticks do -- they capture whatever the other program printed into a variable so it&#39;s not shown (until perhaps you decide to print the variable yourself). But calling Perl from Perl seems like a poor way to arrange things anyway. Can you turn the other program into a module you can load into your program instead?"}, {"owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "edited": false, "score": 0, "creation_date": 1516261874, "post_id": 48315089, "comment_id": 83617768, "body": "These are the entire programs, written just to isolate the problem. The original programs are a couple of thousand lines. The reason I&#39;m calling the perl program from perl is I&#39;m trying replace batch files with perl. The reason I don&#39;t have both programs in one file is that I&#39;m trying to keep them modular for use in other combinations. The called program then constructs, writes out, and executes, with backquotes, an html/js program to display the results."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516263522, "post_id": 48315089, "comment_id": 83618598, "body": "Thanks for clarification -- entire programs, eh?  That&#39;s a bit of a mystery then.  On the practical side, you can use a module to run the other script, not backticks. If <code>system</code> can find/run the B script a module will as well (that&#39;s what they mostly use).  Some good ones are  <a href=\"http://search.cpan.org/~dagolden/Capture-Tiny-0.46/lib/Capture/Tiny.pm\" rel=\"nofollow noreferrer\">Capture::Tiny</a> and <a href=\"http://search.cpan.org/~rjbs/IPC-Run3-0.048/lib/IPC/Run3.pm\" rel=\"nofollow noreferrer\">IPC::Run3</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516263847, "post_id": 48315089, "comment_id": 83618759, "body": "Another way around may be to use piped <code>open</code>.  Btw, did you look at error variables, <code>$?</code> to start with? Perhaps backticks is failing for some B-file-related reason, which <code>system</code> figures out."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1516272347, "post_id": 48315089, "comment_id": 83624116, "body": "<code>\\n</code> are traditionally meant to be printed at the end of a line, not the beginning"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1516297463, "post_id": 48319447, "comment_id": 83640117, "body": "&quot;<i>illustrating once again that you should always check</i>&quot;  ... yeah"}, {"owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "edited": false, "score": 0, "creation_date": 1516299850, "post_id": 48319447, "comment_id": 83641400, "body": "Thanks, but I don&#39;t get your results at all. If I add the &#39;die $!&#39; it is not executed. If I add the &#39;./&#39; I get the error &#39;In ProgA.pl, about to call ProgB.pl&#39;.&#39; is not recognized as an internal or exter nal command,"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1516355438, "post_id": 48319447, "comment_id": 83661564, "body": "What environment and perl version are you working with? I got these results with Perl 5.20.2 under Debian. Are you maybe working in Windows? This seems like the sort of thing that might be a Linux/Windows difference."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1516272435, "creation_date": 1516272435, "answer_id": 48319447, "question_id": 48315089, "link": "https://stackoverflow.com/questions/48315089/why-do-i-lose-output-when-calling-another-perl-program-with-backquotes/48319447#48319447", "title": "Why do I lose output when calling another perl program with backquotes", "body": "<p>You have a path issue.</p>\n\n<p>It works as expected (<code>$dum</code> is assigned the value \"<code>Printing from ProgB.pl</code>\") if I change the backticks from <code>ProgB.pl</code> to <code>./ProgB.pl</code>.  Without the explicit <code>./</code> path, it searches the system path and generates an error, as you can see if you change that line to</p>\n\n<pre><code>my $dum=`ProgB.pl` or die $!;\n</code></pre>\n\n<p>Which generates the output</p>\n\n<pre><code>In ProgA.pl, about to call ProgB.plNo such file or directory at ./ProgA.pl line 4.\n</code></pre>\n\n<p>Thus illustrating once again that you should always check the return values of your system calls for error conditions.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1516307749, "post_id": 48328527, "comment_id": 83645439, "body": "fyi: I can&#39;t get backticks to behave this way no matter what I try. I suspect that there is more behind this and would still recommend to switch to a module."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1516354616, "post_id": 48328527, "comment_id": 83661055, "body": "Yeah. Like zdim, I tried moving the newlines around and the behavior remained consistent, too."}], "tags": [], "owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "is_accepted": false, "score": 1, "last_activity_date": 1516301989, "creation_date": 1516301989, "answer_id": 48328527, "question_id": 48315089, "link": "https://stackoverflow.com/questions/48315089/why-do-i-lose-output-when-calling-another-perl-program-with-backquotes/48328527#48328527", "title": "Why do I lose output when calling another perl program with backquotes", "body": "<p>It appears that by failing to put a newline character at the end of the print command in ProgB, I failed to flush the buffer before returning to ProgA. Thanks to Chris Turner.</p>\n"}], "owner": {"reputation": 2531, "user_id": 1067305, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/d0d62c9f798697f2c32f86d66f5e4a86?s=128&d=identicon&r=PG", "display_name": "user1067305", "link": "https://stackoverflow.com/users/1067305/user1067305"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516301989, "creation_date": 1516256986, "question_id": 48315089, "link": "https://stackoverflow.com/questions/48315089/why-do-i-lose-output-when-calling-another-perl-program-with-backquotes", "title": "Why do I lose output when calling another perl program with backquotes", "body": "<p>If I run a perl program and call another perl program using backquotes, print statements from the called program don't appear at the terminal.</p>\n\n<p>If I call the program using 'system', the print statements are displayed.</p>\n\n<p>EG:\nThis is ProgA.pl</p>\n\n<pre><code>print \"In ProgA.pl, about to call ProgB.pl\";\nmy $dum=`ProgB.pl`;                       # print output doesn't appear\n### $dum=system(\"ProgB.pl\");              # this prints OK\nprint\"\\nBack in ProgA.pl\";\nprint \"\\ndum = $dum\";             # ProgB's output doesn't show here either\n</code></pre>\n\n<p>(No warnings or errors, perl.exe found through file association)</p>\n\n<p>This is ProgB.pl:</p>\n\n<pre><code>print \"\\nPrinting from ProgB.pl\";\n</code></pre>\n\n<p>What is the reason for the difference?</p>\n\n<p>Why isn't the backquoted call output returned in $dum (I tried both STDOUT and STDERR)? If I call dir in backquotes, I get its output in $dum.</p>\n"}]