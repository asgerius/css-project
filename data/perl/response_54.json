[{"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1453327963, "post_id": 34911589, "comment_id": 57558888, "body": "<code>enter code here</code> -- nice touch. How about <a href=\"http://perldoc.perl.org/functions/readdir.html\" rel=\"nofollow noreferrer\">readdir</a>? (It doesn&#39;t look like you&#39;ve put much effort into researching and/or solving this problem on your own.)"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453328624, "post_id": 34911589, "comment_id": 57559226, "body": "It&#39;s not clear which part you&#39;re struggling with, but <a href=\"http://stackoverflow.com/questions/22566/how-do-i-read-in-the-contents-of-a-directory-in-perl/22573\">this</a> will get you 97% of the way there."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453332712, "post_id": 34911589, "comment_id": 57560893, "body": "@MattJacob: <code>enter code here</code> is what the Stack Overflow page writes if you try to mark some if your post as code without selecting anything"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453333371, "post_id": 34911589, "comment_id": 57561110, "body": "@Borodin Ah, that makes sense. I obviously thought the OP was simply letting us know where we could deposit his fully working code for him."}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 2, "last_activity_date": 1453343962, "last_edit_date": 1453343962, "creation_date": 1453335802, "answer_id": 34913238, "question_id": 34911589, "link": "https://stackoverflow.com/questions/34911589/perl-multiple-files-read-replacing-string-write-to-multiple-files/34913238#34913238", "title": "Perl multiple files read replacing string, write to multiple files", "body": "<p>I might approach it like this. (This assumes the script is running in the same directory as the .vb files).</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\n# script running in same directory as the .vb files\n\nfor my $file (glob \"*.vb\") {\n\n    my $outfile = $file =~ s/(?=\\.vb$)/_1/r;\n    print \"$file $outfile\\n\"; # DEBUG \n\n    # open input and output files\n\n    # do the while loop\n}\n</code></pre>\n\n<p>The print statement in the loop is for debug purposes - to see if you are creating the new file names correctly. You can delete it or comment it out when you are satisfied you have got the files you want.</p>\n\n<p>Update: Put the glob in the for loop instead of reading it to an array.</p>\n"}], "owner": {"reputation": 3, "user_id": 5731068, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wsT81wdmOMo/AAAAAAAAAAI/AAAAAAAAAAA/0fyCNLfxBaw/photo.jpg?sz=128", "display_name": "Peter H", "link": "https://stackoverflow.com/users/5731068/peter-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 34913238, "answer_count": 1, "score": -3, "last_activity_date": 1453343962, "creation_date": 1453327724, "question_id": 34911589, "link": "https://stackoverflow.com/questions/34911589/perl-multiple-files-read-replacing-string-write-to-multiple-files", "title": "Perl multiple files read replacing string, write to multiple files", "body": "<p>I have this code working, but this is only for one file with specific name, how can I let it does all .vb file in current folder and output with file name plus _1 in the back</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $fhIn,  '&lt;', 'file.vb'          or die $!;\nopen my $fhOut, '&gt;', 'file_1.vb'        or die $!;\n\nwhile (&lt;$fhIn&gt;) {\n    print $fhOut \"'01/20/2016 Added \\ngpFrmPosition = Me.Location\\n\" if /MessageBox/ and !/'/;\n\n    print $fhOut $_;\n}\n\n    enter code here\n\nclose $fhOut;\nclose $fhIn;\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "is_accepted": true, "score": 2, "last_activity_date": 1453327861, "creation_date": 1453327861, "answer_id": 34911623, "question_id": 34911522, "link": "https://stackoverflow.com/questions/34911522/perl-regex-capture-grouping/34911623#34911623", "title": "Perl regex capture grouping", "body": "<p>Sure, just replace the content of your loop with this:</p>\n\n<pre><code>my ($brand) = $path =~ m|\\\\Recordings\\\\([^\\\\]+)| or die \"Not found\";\nprint $brand;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 1, "last_activity_date": 1453328701, "last_edit_date": 1453328701, "creation_date": 1453328257, "answer_id": 34911709, "question_id": 34911522, "link": "https://stackoverflow.com/questions/34911522/perl-regex-capture-grouping/34911709#34911709", "title": "Perl regex capture grouping", "body": "<p>Capture the folder directly after <code>Recordings\\</code></p>\n\n<pre><code>my ($brand) = $path =~ m{ Recordings \\\\ ( [^\\\\] + ) }x )\n</code></pre>\n\n<p>Using the <code>x</code> modifier on the regex means whitespace is ignore, which can help make the regex more readable.</p>\n\n<p>If the brand folder is always 5th-last, you could split the path and grab it by negative indexing.</p>\n\n<pre><code>my $brand = (split /\\\\/, $path)[-5];\n</code></pre>\n\n<p>But again, that only works if the brand is always 5th last. I don't know what your data set is.</p>\n\n<p>Also, if your working with paths, there are many modules (such as <code>Path::Tiny</code>) that make it easier to get parent/child/absolute paths, basenames, etc.</p>\n"}], "owner": {"reputation": 791, "user_id": 1766625, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/75a86f865d7a31e835edabd03fc54c7d?s=128&d=identicon&r=PG", "display_name": "kernelpanic", "link": "https://stackoverflow.com/users/1766625/kernelpanic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 34911623, "answer_count": 2, "score": 1, "last_activity_date": 1453328701, "creation_date": 1453327444, "question_id": 34911522, "link": "https://stackoverflow.com/questions/34911522/perl-regex-capture-grouping", "title": "Perl regex capture grouping", "body": "<p>Is there a better way to write the below code using a regex capture grouping?  </p>\n\n<p>I'm looking to get the folder name immediately after Recordings. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $path1 = '\\\\server1\\Recordings\\AU-AR-Online\\Outbound\\20160120\\52031\\52031-14-07-16.wav';\nmy $path2 = '\\\\server2\\e$\\Recordings\\SU-AC-Online\\Outbound\\20160120\\52031\\52031-14-07-16.wav';\n\nmy @paths = ( $path1,$path2 );\n\nforeach my $path (@paths) {\n  # Split path into fields\n  my @array = (split /\\\\/, $path);\n\n  # Get index of Recordings\n  my( $index )= grep { $array[$_] eq \"Recordings\" } 0..$#array;\n\n  # Brand always follows Recordings\n  print $array[$index+1];\n\n }\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 2893825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25ea67d080a7cbb3e8b4650c61aa125e?s=128&d=identicon&r=PG&f=1", "display_name": "user2893825", "link": "https://stackoverflow.com/users/2893825/user2893825"}, "edited": false, "score": 0, "creation_date": 1453326202, "post_id": 34910909, "comment_id": 57557915, "body": "I am practicing perl, the idea is treating the wndows calculator.exe as a program to be tested, so the result that are tested are explicitly what it calculates ,  There is no point assuming a result is something and testing it in perl, I&#39;d like to test what I assume should be returned by the calculator and what it actually give."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 95, "user_id": 2893825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25ea67d080a7cbb3e8b4650c61aa125e?s=128&d=identicon&r=PG&f=1", "display_name": "user2893825", "link": "https://stackoverflow.com/users/2893825/user2893825"}, "edited": false, "score": 0, "creation_date": 1453326290, "post_id": 34910909, "comment_id": 57557956, "body": "@user2893825 That would be good information to include in your question."}, {"owner": {"reputation": 95, "user_id": 2893825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25ea67d080a7cbb3e8b4650c61aa125e?s=128&d=identicon&r=PG&f=1", "display_name": "user2893825", "link": "https://stackoverflow.com/users/2893825/user2893825"}, "edited": false, "score": 0, "creation_date": 1453327225, "post_id": 34910909, "comment_id": 57558509, "body": "You may be right but my question was clear. Even if it might make less sense. It is for practice, I didn;t want to include extra information, I wanted to keep it simple and clean."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 95, "user_id": 2893825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25ea67d080a7cbb3e8b4650c61aa125e?s=128&d=identicon&r=PG&f=1", "display_name": "user2893825", "link": "https://stackoverflow.com/users/2893825/user2893825"}, "edited": false, "score": 0, "creation_date": 1453327740, "post_id": 34910909, "comment_id": 57558789, "body": "@user2893825 Then be prepared to get lots of answers and comments telling you that it&#39;s a bad idea and that you should just use native Perl math operators."}, {"owner": {"reputation": 95, "user_id": 2893825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25ea67d080a7cbb3e8b4650c61aa125e?s=128&d=identicon&r=PG&f=1", "display_name": "user2893825", "link": "https://stackoverflow.com/users/2893825/user2893825"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453328181, "post_id": 34910909, "comment_id": 57558996, "body": "@ThisSuitIsBlackNot Do you happen to have an advice for a solution for my problem?"}], "tags": [], "owner": {"reputation": 11, "user_id": 2479463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yvv1s.jpg?s=128&g=1", "display_name": "Sire Hugolin", "link": "https://stackoverflow.com/users/2479463/sire-hugolin"}, "is_accepted": false, "score": 0, "last_activity_date": 1453325289, "creation_date": 1453325289, "answer_id": 34910909, "question_id": 34910489, "link": "https://stackoverflow.com/questions/34910489/how-to-access-windows-calculator-monitor-view-screen-using-perl/34910909#34910909", "title": "How to access windows calculator monitor/view screen using perl", "body": "<p>I'm pretty sure you can achieve something with <a href=\"http://search.cpan.org/~jdb/Win32-OLE-0.1712/lib/Win32/OLE.pm\" rel=\"nofollow\">Win32::Ole</a>, although I never did it.</p>\n\n<p>But first, why do you need Perl to get result from Calc.exe? Can't you do it all in Perl in the first place?</p>\n"}], "owner": {"reputation": 95, "user_id": 2893825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25ea67d080a7cbb3e8b4650c61aa125e?s=128&d=identicon&r=PG&f=1", "display_name": "user2893825", "link": "https://stackoverflow.com/users/2893825/user2893825"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453325289, "creation_date": 1453323900, "question_id": 34910489, "link": "https://stackoverflow.com/questions/34910489/how-to-access-windows-calculator-monitor-view-screen-using-perl", "title": "How to access windows calculator monitor/view screen using perl", "body": "<p>I am trying to use perl to access windows calculator monitor so I can get the result of the calculations it makes and print it to a file.</p>\n\n<p>Is there a way to access the result window?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453322270, "post_id": 34908369, "comment_id": 57555754, "body": "You&#39;ve written very strange Perl code. If you can explain your situation properly then I&#39;m sure we could help you better. Why do you want to build a Perl data structure and reencode it as JavaScript?"}, {"owner": {"reputation": 333, "user_id": 1171852, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14521a2ade8b1603f9a49071abb3eb8b?s=128&d=identicon&r=PG", "display_name": "Donavon Lerman", "link": "https://stackoverflow.com/users/1171852/donavon-lerman"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453325643, "post_id": 34908369, "comment_id": 57557619, "body": "JSON does not automatically mean JavaScript. The end product will transfer data between perl and PHP.  Also if perl is used in an ajax call then perl (most likely) would need to convert to JSON before returning data."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453332206, "post_id": 34908369, "comment_id": 57560689, "body": "<b><i>JSON</i></b> means JavaScript data -- <i>JavaScript Object Notation</i>. Perl is spelled <b><i>Perl</i></b>. AJAX is spelled <b><i>AJAX</i></b>. The format of the data returned depends entirely on the API"}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 1171852, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14521a2ade8b1603f9a49071abb3eb8b?s=128&d=identicon&r=PG", "display_name": "Donavon Lerman", "link": "https://stackoverflow.com/users/1171852/donavon-lerman"}, "edited": false, "score": 0, "creation_date": 1453326379, "post_id": 34908707, "comment_id": 57558013, "body": "The 1st one works great.  Ultra simple fix to the issue."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453384336, "post_id": 34908707, "comment_id": 57584601, "body": "You can usually achieve a similar result with <code>my</code> and lexically scoping a hash to the current iteration. (If you are looping,  which you often are)"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 4, "last_activity_date": 1453317797, "creation_date": 1453317797, "answer_id": 34908707, "question_id": 34908369, "link": "https://stackoverflow.com/questions/34908369/how-can-i-correctly-add-referenced-hashes-to-a-data-structure-without-overwritin/34908707#34908707", "title": "How can I correctly add referenced hashes to a data structure without overwriting earlier values?", "body": "<p>You're taking a reference to a hash and then changing the hash. The reference does not create a copy of the hash, but rather, still points at the same data structure. (See <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\">perlref</a> and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">perlreftut</a> for more information about creating and using references in Perl.)</p>\n\n<p>Instead, you need to:</p>\n\n<pre><code>push(@{ $json{arrayOfHash} }, {%hash});\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>push(@{ $json{arrayOfHash} }, {\n    'key1-1' =&gt; 'value1-1', \n    'key1-2' =&gt; 'value1-2',\n});\n</code></pre>\n\n<p>You should also <code>use strict</code> and <code>use warnings</code> at the top of every single Perl file you write.</p>\n"}, {"tags": [], "owner": {"reputation": 21654, "user_id": 107331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cf6d0868b2b4c69bac3e6f265a32b6a7?s=128&d=identicon&r=PG", "display_name": "Daniel Martin", "link": "https://stackoverflow.com/users/107331/daniel-martin"}, "is_accepted": false, "score": 5, "last_activity_date": 1453318007, "creation_date": 1453318007, "answer_id": 34908790, "question_id": 34908369, "link": "https://stackoverflow.com/questions/34908369/how-can-i-correctly-add-referenced-hashes-to-a-data-structure-without-overwritin/34908790#34908790", "title": "How can I correctly add referenced hashes to a data structure without overwriting earlier values?", "body": "<p>The problem is that <code>%hash</code> refers to the same hash each time - when you say</p>\n\n<pre><code>%hash = ();\n</code></pre>\n\n<p>You aren't creating a new hash, you're just emptying out that hash. Here are two ways to do what you want. First, you can use explicit hash references from the start:</p>\n\n<pre><code>use JSON; # imports encode_json, decode_json, to_json and from_json.\n\n$json{key1}   = \"value1\";\n$json{key2}   = \"value2\";\n\n$hash               = {};\n$hash-&gt;{'key1-1'}   = \"value1-1\";\n$hash-&gt;{'key1-2'}   = \"value1-2\";\npush(@{ $json{arrayOfHash} }, $hash);\n\n$hash               = {};\n$hash-&gt;{'key2-1'}   = \"value2-1\";\n$hash-&gt;{'key2-2'}   = \"value2-2\";\npush(@{ $json{arrayOfHash} }, $hash);\n\n$json = encode_json(\\%json);\n\nprint $json;\n</code></pre>\n\n<p>Second, since you really seemed to want to avoid references where possible, you can use blocks and <code>my</code> declarations to make the two <code>%hash</code> things different things:</p>\n\n<pre><code>use JSON; # imports encode_json, decode_json, to_json and from_json.\n\n$json{key1}   = \"value1\";\n$json{key2}   = \"value2\";\n\n{\n    my %hash               = ();\n    $hash{'key1-1'}   = \"value1-1\";\n    $hash{'key1-2'}   = \"value1-2\";\n    push(@{ $json{arrayOfHash} }, \\%hash);\n}\n\n{\n    my %hash               = ();\n    $hash{'key2-1'}   = \"value2-1\";\n    $hash{'key2-2'}   = \"value2-2\";\n    push(@{ $json{arrayOfHash} }, \\%hash);\n}\n\n$json = encode_json(\\%json);\n\nprint $json;\n</code></pre>\n\n<p>Either of these approaches will do what you want.</p>\n"}], "owner": {"reputation": 333, "user_id": 1171852, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14521a2ade8b1603f9a49071abb3eb8b?s=128&d=identicon&r=PG", "display_name": "Donavon Lerman", "link": "https://stackoverflow.com/users/1171852/donavon-lerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 34908707, "answer_count": 2, "score": 0, "last_activity_date": 1453321755, "creation_date": 1453316739, "last_edit_date": 1453321755, "question_id": 34908369, "link": "https://stackoverflow.com/questions/34908369/how-can-i-correctly-add-referenced-hashes-to-a-data-structure-without-overwritin", "title": "How can I correctly add referenced hashes to a data structure without overwriting earlier values?", "body": "<p>I'm using the Perl <a href=\"http://metacpan.org/module/JSON\" rel=\"nofollow\"><code>JSON</code></a> module to convert a Perl hash to a JSON string.  I can't figure out how to add new hashes to the array of hashes while maintaining the keys and values assigned previously.</p>\n\n<p>I am trying to create the following JSON:</p>\n\n<pre><code>{\n  \"key1\":\"value1\",\n  \"key2\":\"value2\",\n  \"arrayOfHash\":[\n    {\n      \"key1-1\":\"value1-1\",\n      \"key1-2\":\"value1-2\"\n    },\n    {\n      \"key2-1\":\"value2-1\",\n      \"key2-2\":\"value2-2\"\n    }\n  ]\n} \n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>use JSON; # imports encode_json, decode_json, to_json and from_json.\n\n$json{key1}   = \"value1\";\n$json{key2}   = \"value2\";\n\n%hash             = ();\n$hash{'key1-1'}   = \"value1-1\";\n$hash{'key1-2'}   = \"value1-2\";\npush(@{ $json{arrayOfHash} }, \\%hash);\n\n%hash             = ();\n$hash{'key2-1'}   = \"value2-1\";\n$hash{'key2-2'}   = \"value2-2\";\npush(@{ $json{arrayOfHash} }, \\%hash);\n\n$json = encode_json(\\%json);\n</code></pre>\n\n<p>What I'm getting is:</p>\n\n<pre><code>{\n  \"key1\":\"value1\",\n  \"key2\":\"value2\",\n  \"arrayOfHash\":[\n    {\n      \"key2-1\":\"value2-1\",\n      \"key2-2\":\"value2-2\"\n    },\n    {\n      \"key2-1\":\"value2-1\",\n      \"key2-2\":\"value2-2\"\n    }\n  ]\n} \n</code></pre>\n"}, {"tags": ["regex", "perl", "replace"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 3, "creation_date": 1453312592, "post_id": 34907142, "comment_id": 57550304, "body": "Before any other user does it: <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">obligatory warning to use regular expressions for html tags</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1453314642, "post_id": 34907142, "comment_id": 57551512, "body": "Stop. Take a step back. Forget that you wanted to use regular expressions to parse HTML. Now <a href=\"http://stackoverflow.com/search?q=%5Bperl%5D+parse+html\">do it properly</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2874, "user_id": 1873697, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/125fefb76359bb49c33ad85d72c3df0a?s=128&d=identicon&r=PG", "display_name": "user101089", "link": "https://stackoverflow.com/users/1873697/user101089"}, "edited": false, "score": 0, "creation_date": 1453321110, "post_id": 34908962, "comment_id": 57555045, "body": "I can see what this is trying to do, but it doesn&#39;t work for my test file and I can&#39;t see why.  In particular, the <code>href</code> and <code>class</code> attributes are not replaced in my <code>&lt;a href=&quot;#&quot;&gt;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2874, "user_id": 1873697, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/125fefb76359bb49c33ad85d72c3df0a?s=128&d=identicon&r=PG", "display_name": "user101089", "link": "https://stackoverflow.com/users/1873697/user101089"}, "edited": false, "score": 1, "creation_date": 1453321577, "post_id": 34908962, "comment_id": 57555314, "body": "This code was written to solve the problem you asked, and it was tested against both the file in the question and the file to which the question links to make sure it does work. If you use a file in a different format than the one provided in the question, you&#39;ll need to adjust the code. If you adjust the file in your question to be more like your real file, and you let me know that you&#39;ve done this by leaving a comment here, I&#39;ll update my answer."}, {"owner": {"reputation": 2874, "user_id": 1873697, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/125fefb76359bb49c33ad85d72c3df0a?s=128&d=identicon&r=PG", "display_name": "user101089", "link": "https://stackoverflow.com/users/1873697/user101089"}, "edited": false, "score": 0, "creation_date": 1453322110, "post_id": 34908962, "comment_id": 57555657, "body": "I greatly appreciate your help with this, and haven&#39;t changed the file format at all.  My test file, <code>ch03.html</code> was added to the original question, and is given here: <a href=\"https://raw.githubusercontent.com/friendly/DDAR/master/pages/chapters/ch03.html\" rel=\"nofollow noreferrer\">raw.githubusercontent.com/friendly/DDAR/master/pages/chapter&zwnj;&#8203;s/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2874, "user_id": 1873697, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/125fefb76359bb49c33ad85d72c3df0a?s=128&d=identicon&r=PG", "display_name": "user101089", "link": "https://stackoverflow.com/users/1873697/user101089"}, "edited": false, "score": 1, "creation_date": 1453322601, "post_id": 34908962, "comment_id": 57555948, "body": "Again, it works for that file. My answer now includes the result."}, {"owner": {"reputation": 2874, "user_id": 1873697, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/125fefb76359bb49c33ad85d72c3df0a?s=128&d=identicon&r=PG", "display_name": "user101089", "link": "https://stackoverflow.com/users/1873697/user101089"}, "edited": false, "score": 0, "creation_date": 1453328113, "post_id": 34908962, "comment_id": 57558965, "body": "OK, I accept that your answer works for you.  My perl (v5.14.2) has many modules out of date, so I&#39;ll have to upgrade them first to test."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1453322883, "last_edit_date": 1453322883, "creation_date": 1453318581, "answer_id": 34908962, "question_id": 34907142, "link": "https://stackoverflow.com/questions/34907142/perl-regex-for-complex-multiline-search-replace/34908962#34908962", "title": "perl regex for complex multiline search replace", "body": "<pre><code>use XML::LibXML qw( );\n\nmy $qfn = 'ch03.html';\n\nmy $in_qfn = $qfn . \"~\";\nmy $out_qfn = $qfn;\nrename($qfn, $in_qfn)\n   or die(\"Can't rename \\\"qfn\\\": $!\\n\");\n\nmy $parser = XML::LibXML-&gt;new();\nmy $doc = $parser-&gt;parse_html_file($in_qfn);\n\nfor my $a_node ($doc-&gt;findnodes('//a[@href=\"#\"]')) {\n   my ($src_node) = $a_node-&gt;findnodes('img[1]/@src')\n      or next;\n\n   $a_node-&gt;setAttribute('href', $src_node-&gt;value());\n   $a_node-&gt;setAttribute('class', 'fancybox');\n}\nmy $html = $doc-&gt;toStringHTML();\nopen(my $fh, '&gt;', $out_qfn)\n   or die(\"Can't create \\\"$out_qfn\\\": $!\\n\");\n\nprint($fh $html);\n</code></pre>\n\n<p>Tested:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>$ diff -u ch03.html{~,}\n--- ch03.html~  2016-01-20 12:41:30.809203040 -0800\n+++ ch03.html   2016-01-20 12:41:31.009201042 -0800\n@@ -1,7 +1,7 @@\n-&lt;div class=\"contents\"&gt;\n+&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n+&lt;html&gt;&lt;body&gt;&lt;div class=\"contents\"&gt;\n &lt;h1 class=\"tocpage\"&gt;Chapter 3: Fitting and Graphing Discrete Distributions&lt;/h1&gt;\n &lt;hr class=\"tocpage\"&gt;\n-\n &lt;div class=\"row\"&gt;\n   &lt;div class=\"col-md-6\"&gt;\n     &lt;!-- prelude-inserted  --&gt;\n@@ -18,7 +18,7 @@\n   &lt;div class=\"col-md-6\"&gt;\n     &lt;h3&gt;Contents&lt;/h3&gt;\n     &lt;dl class=\"chaptoc\"&gt;\n-        &lt;dd&gt;3.1. Introduction to discrete distributions&lt;/dd&gt;\n+&lt;dd&gt;3.1. Introduction to discrete distributions&lt;/dd&gt;\n         &lt;dd&gt;3.2. Characteristics of discrete distributions&lt;/dd&gt;\n         &lt;dd&gt;3.3. Fitting discrete distributions&lt;/dd&gt;\n         &lt;dd&gt;3.4. Diagnosing discrete distributions: Ord plots&lt;/dd&gt;\n@@ -27,8 +27,7 @@\n         &lt;dd&gt;3.7. Chapter summary&lt;/dd&gt;\n         &lt;dd&gt;3.8. Lab exercises&lt;/dd&gt;\n     &lt;/dl&gt;\n-\n-  &lt;/div&gt;\n+&lt;/div&gt;\n &lt;/div&gt;\n\n &lt;!-- more-content --&gt;\n@@ -38,11 +37,10 @@\n        &lt;h3&gt;Selected figures&lt;/h3&gt;\n      &lt;a class=\"btn btn-primary\" href=\"../../Rcode/ch03.R\" role=\"button\"&gt;view R code&lt;/a&gt;\n     &lt;ul class=\"media-list\"&gt;\n-      &lt;li class=\"media\"&gt;\n+&lt;li class=\"media\"&gt;\n         &lt;div class=\"media-left\"&gt;\n-          &lt;a href=\"#\"&gt;\n-            &lt;img class=\"media-object\" src=\"saxony-barplot.png\" width=\"250\" alt=\"males in Saxony families\"&gt;\n-          &lt;/a&gt;\n+          &lt;a href=\"saxony-barplot.png\" class=\"fancybox\"&gt;\n+            &lt;img class=\"media-object\" src=\"saxony-barplot.png\" width=\"250\" alt=\"males in Saxony families\"&gt;&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"media-body\"&gt;\n           &lt;h4 class=\"media-heading\"&gt;Figure 3.2&lt;/h4&gt;\n@@ -52,9 +50,8 @@\n\n       &lt;li class=\"media\"&gt;\n         &lt;div class=\"media-left\"&gt;\n-          &lt;a href=\"#\"&gt;\n-            &lt;img class=\"media-object\" src=\"dbinom2-plot2-1.png\" width=\"250\" alt=\"Binomial distributions\"&gt;\n-          &lt;/a&gt;\n+          &lt;a href=\"dbinom2-plot2-1.png\" class=\"fancybox\"&gt;\n+            &lt;img class=\"media-object\" src=\"dbinom2-plot2-1.png\" width=\"250\" alt=\"Binomial distributions\"&gt;&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"media-body\"&gt;\n           &lt;h4 class=\"media-heading\"&gt;Figure 3.9&lt;/h4&gt;\n@@ -64,9 +61,8 @@\n\n       &lt;li class=\"media\"&gt;\n         &lt;div class=\"media-left\"&gt;\n-          &lt;a href=\"#\"&gt;\n-            &lt;img class=\"media-object\" src=\"dpois-xyplot2-1.png\" width=\"250\" alt=\"Poisson distributions\"&gt;\n-          &lt;/a&gt;\n+          &lt;a href=\"dpois-xyplot2-1.png\" class=\"fancybox\"&gt;\n+            &lt;img class=\"media-object\" src=\"dpois-xyplot2-1.png\" width=\"250\" alt=\"Poisson distributions\"&gt;&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"media-body\"&gt;\n           &lt;h4 class=\"media-heading\"&gt;Figure 3.11&lt;/h4&gt;\n@@ -76,9 +72,8 @@\n\n       &lt;li class=\"media\"&gt;\n         &lt;div class=\"media-left\"&gt;\n-          &lt;a href=\"#\"&gt;\n-            &lt;img class=\"media-object\" src=\"Fed0-plots2-1.png\" width=\"250\" alt=\"Hanging rootogram\"&gt;\n-          &lt;/a&gt;\n+          &lt;a href=\"Fed0-plots2-1.png\" class=\"fancybox\"&gt;\n+            &lt;img class=\"media-object\" src=\"Fed0-plots2-1.png\" width=\"250\" alt=\"Hanging rootogram\"&gt;&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"media-body\"&gt;\n           &lt;h4 class=\"media-heading\"&gt;Figure 3.15&lt;/h4&gt;\n@@ -89,9 +84,8 @@\n\n       &lt;li class=\"media\"&gt;\n         &lt;div class=\"media-left\"&gt;\n-          &lt;a href=\"#\"&gt;\n-            &lt;img class=\"media-object\" src=\"ordplot1-1.png\" width=\"250\" alt=\"Ord plot for the Butterfly data\"&gt;\n-          &lt;/a&gt;\n+          &lt;a href=\"ordplot1-1.png\" class=\"fancybox\"&gt;\n+            &lt;img class=\"media-object\" src=\"ordplot1-1.png\" width=\"250\" alt=\"Ord plot for the Butterfly data\"&gt;&lt;/a&gt;\n         &lt;/div&gt;\n         &lt;div class=\"media-body\"&gt;\n           &lt;h4 class=\"media-heading\"&gt;Figure 3.18&lt;/h4&gt;\n@@ -100,9 +94,10 @@\n         &lt;/div&gt;\n       &lt;/li&gt;\n\n-    &lt;/ul&gt; &lt;!-- media-list --&gt;\n-  &lt;/div&gt; &lt;!-- col-md-12 --&gt;\n+    &lt;/ul&gt;\n+&lt;!-- media-list --&gt;\n+&lt;/div&gt; &lt;!-- col-md-12 --&gt;\n &lt;!-- footer --&gt;\n &lt;/div&gt;  &lt;!-- row --&gt;\n\n-&lt;/div&gt;\n+&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1453378272, "post_id": 34917720, "comment_id": 57580338, "body": "I am always ambivalent when someone does this - because whilst it&#39;s technically correct, and thus doesn&#39;t really deserve a downvote, neither do I think I could in all conscience recommend someone actually use it."}, {"owner": {"reputation": 2874, "user_id": 1873697, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/125fefb76359bb49c33ad85d72c3df0a?s=128&d=identicon&r=PG", "display_name": "user101089", "link": "https://stackoverflow.com/users/1873697/user101089"}, "edited": false, "score": 0, "creation_date": 1453382257, "post_id": 34917720, "comment_id": 57583128, "body": "However, it does <b>exactly</b> what I asked for, and doesn&#39;t mess up the formatting of the rest of the file as does the <code>XML::LibXML</code> solution."}], "tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1453361249, "creation_date": 1453361249, "answer_id": 34917720, "question_id": 34907142, "link": "https://stackoverflow.com/questions/34907142/perl-regex-for-complex-multiline-search-replace/34917720#34917720", "title": "perl regex for complex multiline search replace", "body": "<p>I couldn't resist but write this one-off, super unstable, sends-me-to-parse-html-with-regex-hell sed command:</p>\n\n<pre><code>sed -i.bak '/&lt;a href=\"#\"/ {\n    N\n    /\\n.*&lt;img class=/ {\n        s/^\\( *&lt;a href=\"\\).*\\(\\n.*src=\"\\)\\([^\"]*\\)\\(.*\\)/\\1\\3\" class=\"fancybox\"&gt;\\2\\3\\4/\n    }\n}' ch03.html\n</code></pre>\n\n<p>This looks for a line with <code>href=\"#\"</code>, appends the next line and then substitutes the filename and <code>fancybox</code> into the <code>a</code> tag.</p>\n\n<p>Diffing the result and the input file:</p>\n\n<pre><code>43c43\n&lt;           &lt;a href=\"#\"&gt;\n---\n&gt;           &lt;a href=\"saxony-barplot.png\" class=\"fancybox\"&gt;\n55c55\n&lt;           &lt;a href=\"#\"&gt;\n---\n&gt;           &lt;a href=\"dbinom2-plot2-1.png\" class=\"fancybox\"&gt;\n67c67\n&lt;           &lt;a href=\"#\"&gt;\n---\n&gt;           &lt;a href=\"dpois-xyplot2-1.png\" class=\"fancybox\"&gt;\n79c79\n&lt;           &lt;a href=\"#\"&gt;\n---\n&gt;           &lt;a href=\"Fed0-plots2-1.png\" class=\"fancybox\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 2874, "user_id": 1873697, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/125fefb76359bb49c33ad85d72c3df0a?s=128&d=identicon&r=PG", "display_name": "user101089", "link": "https://stackoverflow.com/users/1873697/user101089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 34917720, "answer_count": 2, "score": 0, "last_activity_date": 1453361249, "creation_date": 1453312414, "last_edit_date": 1453318631, "question_id": 34907142, "link": "https://stackoverflow.com/questions/34907142/perl-regex-for-complex-multiline-search-replace", "title": "perl regex for complex multiline search replace", "body": "<p>I know there are many questions on this topic, but most are fairly trivial and\nI'm unable to find a solution for my case. </p>\n\n<p>I have a set of HTML files with many, many \"media\" items like the following,\neach of which is a \"paragraph\", separated by \"\\n\\n\". Here is a <a href=\"https://raw.githubusercontent.com/friendly/DDAR/master/pages/chapters/ch03.html\" rel=\"nofollow\">link to a sample file</a> of the type I'm working on. </p>\n\n<pre><code>  &lt;li class=\"media\"&gt;\n    &lt;div class=\"media-left\"&gt;\n      &lt;a href=\"#\"&gt;\n        &lt;img class=\"media-object\" src=\"4_17-HE-assoc.png\" width=\"250\" alt=\"...\"&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=\"media-body\"&gt;\n      &lt;h4 class=\"media-heading\"&gt;Figure 4.17&lt;/h4&gt;\n      Association plot for the hair-color eye-color data. Left: marginal table, collapsed over\n      gender; right: full table.\n    &lt;/div&gt;\n  &lt;/li&gt;\n</code></pre>\n\n<p>For each <code>&lt;img ...&gt;</code> tag, I need to find the <code>src=\"file\"</code> value, and replace the <code>href=\"#\"</code> on the previous line\nby <code>href=\"file\" class=\"fancybox</code>.  i.e., so that item will then look like</p>\n\n<pre><code>  &lt;li class=\"media\"&gt;\n    &lt;div class=\"media-left\"&gt;\n      &lt;a href=\"4_17-HE-assoc.png\" class=\"fancybox\"&gt;\n        &lt;img class=\"media-object\" src=\"4_17-HE-assoc.png\" width=\"250\" alt=\"...\"&gt;\n      &lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=\"media-body\"&gt;\n      &lt;h4 class=\"media-heading\"&gt;Figure 4.17&lt;/h4&gt;\n      Association plot for the hair-color eye-color data. Left: marginal table, collapsed over\n      gender; right: full table.\n    &lt;/div&gt;\n  &lt;/li&gt;\n</code></pre>\n\n<p>I tried the following as a one-liner, but it has no effect, i.e., it doesn't make the changes.</p>\n\n<pre><code>perl -pi~ -e '$/ = \"\";s|&lt;a href=\"#\"&gt;\\n(\\s*&lt;img class=\"media object\") src=(\".*png\")|&lt;a class=\"fancybox\" href=\"\\2\"&gt;\\n\\1 src=\\2|ms' ch03.html\n</code></pre>\n\n<p>Can someone help with this? I'd be happy with a simple script that I could\nuse for this and modify for other similar modifications of a collection of web files.</p>\n\n<p><strong>edit</strong>: I'm aware of the advantages of using perl modules such as <code>HTML::TreeBuilder</code> to avoid having to parse HTML directly.  If someone\ncould give me a start, I could probably take it from there.</p>\n"}, {"tags": ["perl", "http", "curl", "grep"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453309691, "post_id": 34906073, "comment_id": 57548375, "body": "The curl command fetches the web page just once. If you are seeing <i>significant load</i> then you must have wrapped this command in a loop that you don&#39;t show. Please show the rest of your code. What sort of response time are you hoping for with this? Can you check for changes, say, once a day? The best way to do this would be by examining the HTTP header. Are you sure that a change won&#39;t be reflected in the headers?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453310338, "post_id": 34906073, "comment_id": 57548802, "body": "&quot;Is there any way I could instruct curl (or interrupt it maybe?) to stop downloading the page once I have confirmed it has not changed?&quot; Without a  header like Last-Modified, you can&#39;t confirm that the page is the same unless you download the entire thing. (What if only the very last byte had changed?)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453311286, "post_id": 34906073, "comment_id": 57549447, "body": "What is <code>&quot;thing_that_has_appeared&quot;</code>? It sounds like you&#39;re really waiting for specific content rather than a simple change"}, {"owner": {"reputation": 19, "user_id": 5801765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e381ab48108497c3ef5b1f606a2748?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Collins", "link": "https://stackoverflow.com/users/5801765/mark-collins"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453311332, "post_id": 34906073, "comment_id": 57549466, "body": "@ThisSuitIsBlackNot Well, knowing the page structure, and which part I want to watch for changes, and assuming it is not the last byte, I guess what I am asking is if there is a way to ignore the part <i>after</i> what I am watching..."}, {"owner": {"reputation": 19, "user_id": 5801765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e381ab48108497c3ef5b1f606a2748?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Collins", "link": "https://stackoverflow.com/users/5801765/mark-collins"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453311397, "post_id": 34906073, "comment_id": 57549505, "body": "@Borodin Exactly. The page is a list. I am doing : if the list is empty do nothing, once something appears in the list then do stuff. The grep is for what I am waiting for in the list, which is specific, at least in the html markup."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453311404, "post_id": 34906073, "comment_id": 57549510, "body": "This is becoming tiresome. We can&#39;t tease the real question from you comment by comment. Please ask a proper question"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453312108, "post_id": 34906073, "comment_id": 57550008, "body": "With <a href=\"https://metacpan.org/pod/LWP::UserAgent#ua-get-url\" rel=\"nofollow noreferrer\">LWP::UserAgent</a>, you can specify a callback that is called after every N bytes have been downloaded. If you find the content you&#39;re looking for, you can cancel the request partway through."}, {"owner": {"reputation": 19, "user_id": 5801765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e381ab48108497c3ef5b1f606a2748?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Collins", "link": "https://stackoverflow.com/users/5801765/mark-collins"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453312647, "post_id": 34906073, "comment_id": 57550352, "body": "@Borodin I&#39;m sorry if I haven&#39;t been giving enough context. I was just trying to narrow the scope of the question down. I agree I did not ask very well at first, but I am a new user on Stackoverflow and am not very well informed of the best way to ask questions. If you want my entire code and the website I&#39;m happy to provide it, but I just thought that was too specific if asked that way. Again, sorry if I have annoyed you..."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 5801765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e381ab48108497c3ef5b1f606a2748?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Collins", "link": "https://stackoverflow.com/users/5801765/mark-collins"}, "is_accepted": false, "score": 1, "last_activity_date": 1453314694, "creation_date": 1453314694, "answer_id": 34907786, "question_id": 34906073, "link": "https://stackoverflow.com/questions/34906073/tweak-performance-of-a-web-page-watcher/34907786#34907786", "title": "Tweak Performance of a Web Page Watcher", "body": "<p>ThisSuitIsBlackNot's answer helped :</p>\n\n<blockquote>\n  <p>With LWP::UserAgent, you can specify a callback that is called after every N bytes have been downloaded. If you find the content you're looking for, you can cancel the request partway through.</p>\n</blockquote>\n\n<p>He also references <a href=\"https://metacpan.org/pod/LWP::UserAgent#ua-get-url\" rel=\"nofollow\">this</a> page on metacpan related to the libwww-perl library's Web User Agent.</p>\n\n<p>Thank you for your input.\nAnd again, sorry if the manner of asking the question was inadequate.</p>\n"}], "owner": {"reputation": 19, "user_id": 5801765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e381ab48108497c3ef5b1f606a2748?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Collins", "link": "https://stackoverflow.com/users/5801765/mark-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453314694, "creation_date": 1453309284, "last_edit_date": 1453311223, "question_id": 34906073, "link": "https://stackoverflow.com/questions/34906073/tweak-performance-of-a-web-page-watcher", "title": "Tweak Performance of a Web Page Watcher", "body": "<p>I am writing a basic script to watch a web page and interact with it when something changes.</p>\n\n<p>I'm writing in Perl, using curl to get the page and grep to watch it for changes.</p>\n\n<p>The <em>watch</em> structure I am using is the following</p>\n\n<pre><code>my $string = '';\ndo {\n  $string = curl -s --cookie cookie.txt \"http://url.com/resource\" | grep \"thing_that_has_appeared\"\n  } until ( $string ne '' );\n</code></pre>\n\n<p>It is then passed into a string which is used to extract info.</p>\n\n<p>The page itself, when downloaded as a file with curl is 16KB.</p>\n\n<p>I am seeing significant load when running this, both on network bandwidth and processor usage.</p>\n\n<p>The point is to watch the page <em>as closely as possible</em>, that is on the second or fraction of a second scale, so some reasonable load is acceptable. I was just wondering if I might be going about it wrongly, and if there could be a more efficient way of watching the page?</p>\n\n<p>The server is not issuing a <code>Last-Modified</code> header.</p>\n\n<p>Is there any way I could instruct curl (or interrupt it maybe) to stop downloading the page once I have confirmed it has not changed?</p>\n\n<p>I think mostly I need insight here. Mine is too limited.</p>\n\n<p>Edit: in response to comment I have included the loop, and specified time span.</p>\n"}, {"tags": ["perl", "oauth-2.0", "onedrive"], "comments": [{"owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "edited": false, "score": 0, "creation_date": 1453814159, "post_id": 34906041, "comment_id": 57756003, "body": "If you just pasted, it looks like you have a typo: <code>&quot;client_id=&quot;.$clien_tid,</code>"}, {"owner": {"reputation": 305, "user_id": 4398047, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8jHPR.jpg?s=128&g=1", "display_name": "robel", "link": "https://stackoverflow.com/users/4398047/robel"}, "edited": false, "score": 0, "creation_date": 1454313706, "post_id": 34906041, "comment_id": 57971011, "body": "For the feature, if ur doing any request I think its wise to test it with REST on mozila before putting it into ur code."}], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 726416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enkqs.jpg?s=128&g=1", "display_name": "zafatar", "link": "https://stackoverflow.com/users/726416/zafatar"}, "is_accepted": true, "score": 1, "last_activity_date": 1453811280, "last_edit_date": 1453811280, "creation_date": 1453755080, "answer_id": 35002116, "question_id": 34906041, "link": "https://stackoverflow.com/questions/34906041/microsoft-onedrive-api-client-in-perl-cant-get-access-token/35002116#35002116", "title": "Microsoft OneDrive API client in Perl can&#39;t get access token", "body": "<p>In the documentation, it says that the URL with the params should be like: </p>\n\n<pre><code>GET https://login.live.com/oauth20_authorize.srf?client_id={client_id}&amp;scope={scope}&amp;response_type=token&amp;redirect_uri={redirect_uri} \n</code></pre>\n\n<p>Your <code>$URL</code> parameter seems wrong. <code>$URL</code> should be <code>https://login.live.com/oauth20_authorize.srf</code> and redirect URL is <code>https://login.live.com/oauth20_desktop.srf</code>.</p>\n\n<p>I didn't try the code since I don't want to create and MS account just for this ;) </p>\n"}], "owner": {"reputation": 3782, "user_id": 972828, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/8OSD1.jpg?s=128&g=1", "display_name": "netdjw", "link": "https://stackoverflow.com/users/972828/netdjw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 35002116, "answer_count": 1, "score": 7, "last_activity_date": 1453890182, "creation_date": 1453309209, "last_edit_date": 1453890182, "question_id": 34906041, "link": "https://stackoverflow.com/questions/34906041/microsoft-onedrive-api-client-in-perl-cant-get-access-token", "title": "Microsoft OneDrive API client in Perl can&#39;t get access token", "body": "<p>I created this simple code in <code>Perl</code> to connect Microsoft <code>OneDrive API</code> and list files and folders. But now I'm stopped on getting access token.</p>\n\n<p>I read the <a href=\"https://dev.onedrive.com/auth/msa_oauth.htm\">Microsoft's documentation</a> to find out, but I nothing found.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\nuse LWP; use LWP::UserAgent;\n\nmy $client_id = '...';\nmy $client_secret = '...';\nmy $client_agent = 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/38.0.2125.104 Safari/537.36'; # whatever\nmy $ua = new LWP::UserAgent;\n$ua-&gt;-&gt;show_progress(1);  # Microsoft use url redirection and I want to see the steps\n$ua-&gt;agent($client_agent);\n$ua-&gt;timeout(30);\nmy $URL = 'https://login.live.com/oauth20_desktop.srf'; # from documentation\nmy @params = (\n    \"client_id=\".$client_id,\n    \"scope=onedrive.readonly\",\n    \"response_type=token\",\n    \"redirect_uri=https://login.live.com/oauth20_desktop.srf\"\n);\nmy $URLFULL = $URL.\"?\".join(\"&amp;\", @params);\nmy $res = $ua-&gt;get($URLFULL);\nif ( $res-&gt;is_success ) {\n    print $res-&gt;request-&gt;uri-&gt;as_string.\"\\n\"; # it should be the url with a valid token\n    my $block = $res-&gt;as_string;\n    print $block; # this is the full response\n} else {\n    die ($res-&gt;as_string.\"error in loading page\");\n}\n</code></pre>\n\n<p>So I send a <code>GET</code> message to the URL and it should be redirect to the URL what contain the access token. But I redirected to the same URL what I called.</p>\n\n<p>How can I get the access token? Or where is the mistake in my code? Or is there any working example?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "is_accepted": true, "score": -1, "last_activity_date": 1453306256, "creation_date": 1453306256, "answer_id": 34904958, "question_id": 34904768, "link": "https://stackoverflow.com/questions/34904768/perl-changing-a-parent-reference-that-is-passed-into-a-sub/34904958#34904958", "title": "Perl - Changing a parent reference that is passed into a sub", "body": "<p>Indeed, you need to use a reference, and pass a reference to that reference if you want to modify it from a different place.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nmy $root = [];\nmyfunc(\\$root);\n\nsub myfunc()\n{\n    my ($ptr_parent) = @_;\n    print \"root =&gt; \";\n    print $root;\n    print \"\\n\";\n    print \"ptr_parent =&gt; $$ptr_parent\\n\";\n    my @stuff = split(',', 'test1,test2,test3');\n    $$ptr_parent = \\@stuff;\n    print \"stuff =&gt; \";\n    print \\@stuff;\n    print \"\\n\";\n    print \"root =&gt; \";\n    print $root;\n    print \"\\n\";\n    print \"ptr_parent =&gt; $$ptr_parent\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>root =&gt; ARRAY(0x7f8143001ee8)\nptr_parent =&gt; ARRAY(0x7f8143001ee8)\nstuff =&gt; ARRAY(0x7f8143022ad8)\nroot =&gt; ARRAY(0x7f8143022ad8)\nptr_parent =&gt; ARRAY(0x7f8143022ad8)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 3, "last_activity_date": 1453308958, "last_edit_date": 1453308958, "creation_date": 1453308631, "answer_id": 34905830, "question_id": 34904768, "link": "https://stackoverflow.com/questions/34904768/perl-changing-a-parent-reference-that-is-passed-into-a-sub/34905830#34905830", "title": "Perl - Changing a parent reference that is passed into a sub", "body": "<p>In your code, <code>$ptr_parent</code> is a variable that holds a reference, and you are modifying the <em>variable</em>, not the <em>referent</em>. You need to use some dereference syntax if you want to modify the actual thing the reference points to. See <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">perlreftut</a> for an introduction and <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow\">perlref</a> for all the gory details.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dump;\n\nmy @arr;\ndd(\\@arr);\n\nfoo(\\@arr);\ndd(\\@arr);\n\nbar(\\@arr);\ndd(\\@arr);\n\nsub foo {\n    my $aref = shift;\n    @$aref = split(/,/, 'test1,test2,test3');  # notice the dereference\n}\n\nsub bar {\n    my $aref = shift;\n    $aref-&gt;[0] = 42;  # individual element dereference\n    $aref-&gt;[1] = 'ponies';\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[]\n[\"test1\", \"test2\", \"test3\"]\n[42, \"ponies\", \"test3\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "edited": false, "score": 0, "creation_date": 1453312349, "post_id": 34905831, "comment_id": 57550163, "body": "I tried something like the first method, but couldn&#39;t get it.  I was definitely close though.   Thanks for the alternatives too."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1453308640, "creation_date": 1453308640, "answer_id": 34905831, "question_id": 34904768, "link": "https://stackoverflow.com/questions/34904768/perl-changing-a-parent-reference-that-is-passed-into-a-sub/34905831#34905831", "title": "Perl - Changing a parent reference that is passed into a sub", "body": "<p>Perl passes by reference, which means that changing the argument in the sub will change it in the caller too. But you're not modifying the argument (<code>$_[0]</code>); you're modifying a lexical variable (<code>$ptr_parent</code>).</p>\n\n<p>All of the following will work with <code>myfunc($root)</code>:</p>\n\n<pre><code># Create the object as needed, and pass it back explicitly on exit.\nsub myfunc {\n    my $parent = $_[0] // [];\n    push @$parent, split(/,/, 'test1,test2,test3');\n    $_[0] = $parent;\n}\n\n# Create the object, and pass it back explicitly up front.\nsub myfunc {\n    my $parent = shift //= [];\n    push @$parent, split(/,/, 'test1,test2,test3');\n}\n\n# Create the object as needed by using a layer of indirection.\nsub myfunc {\n    my $parent_ref = \\shift;\n    push @{ $$parent_ref }, split(/,/, 'test1,test2,test3');\n}\n</code></pre>\n\n<p>Or you could be less \"magical\" and pass a reference to <code>myfunc</code> (<code>myfunc(\\$root)</code>):</p>\n\n<pre><code>sub myfunc {\n    my $parent_ref = shift;\n    push @{ $$parent_ref }, split(/,/, 'test1,test2,test3');\n}\n</code></pre>\n\n<hr>\n\n<p>By the way, the prototype was incorrect. I fixed this issue by removing it.</p>\n"}], "owner": {"reputation": 431, "user_id": 5040715, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10207127152163110/picture?type=large", "display_name": "Chris ten Den", "link": "https://stackoverflow.com/users/5040715/chris-ten-den"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34904958, "answer_count": 3, "score": 1, "last_activity_date": 1453308958, "creation_date": 1453305700, "question_id": 34904768, "link": "https://stackoverflow.com/questions/34904768/perl-changing-a-parent-reference-that-is-passed-into-a-sub", "title": "Perl - Changing a parent reference that is passed into a sub", "body": "<p>I am new to perl and couldn't find any info on my problem, so apologies in advance if this is a duplicate or I am completely out to lunch.</p>\n\n<p>Actual question a little lower.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nmy @root = undef;\nmyfunc(\\@root);\n\nsub myfunc()\n{\n    my ($ptr_parent) = @_;\n    print \"root =&gt; \";\n    print \\@root;\n    print \"\\n\";\n    print \"ptr_parent =&gt; $ptr_parent\\n\";\n    my @stuff = split(',', 'test1,test2,test3');\n    $ptr_parent = \\@stuff;\n    print \"stuff =&gt; \";\n    print \\@stuff;\n    print \"\\n\";\n    print \"root =&gt; \";\n    print \\@root;\n    print \"\\n\";\n    print \"ptr_parent =&gt; $ptr_parent\\n\";    \n}\n</code></pre>\n\n<p>Not surprisingly my output is as follows:</p>\n\n<pre><code>root =&gt; ARRAY(0x7f903182e890)\nptr_parent =&gt; ARRAY(0x7f903182e890)\nstuff =&gt; ARRAY(0x7f9031838548)\nroot =&gt; ARRAY(0x7f903182e890)\nptr_parent =&gt; ARRAY(0x7f9031838548)\n</code></pre>\n\n<p>What I am trying to achieve is the following:</p>\n\n<pre><code>root =&gt; ARRAY(0x7f903182e890)\nptr_parent =&gt; ARRAY(0x7f903182e890)\nstuff =&gt; ARRAY(0x7f9031838548)\nroot =&gt; ARRAY(0x7f9031838548)   &lt;---- Note this changes.\nptr_parent =&gt; ARRAY(0x7f9031838548)\n</code></pre>\n\n<p>So I have a suspicion that this is impossible to do like this because of scoping as I would imagine that the @stuff memory pointer gets released.</p>\n\n<p>I feel like I could make @root a $root where it is a pointer to a pointer.  But I am stuck on how to write this.  The syntax for pointers is still not 100% in my head.</p>\n\n<p>But the general requirement is that whatever list is generated in myfunc would need to survive in @root.  And I cannot modify @root directly from myfunc();</p>\n\n<p>Thanks in advance. Let me know if I need to clarify.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1453304408, "post_id": 34904232, "comment_id": 57544573, "body": "A strange request. Could <code>assignElement(name =&gt; $value)</code> work? Or could you just make them constants (which would help avoid spelling errors)? Or subs (<code>sub name { &#39;name&#39; }</code>)?"}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1453304489, "post_id": 34904232, "comment_id": 57544631, "body": "@toolic psh, functional code is so overrated ;)  updated it, and will be more careful when copying and pasting :)"}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1453304733, "post_id": 34904232, "comment_id": 57544813, "body": "@Biffen I&#39;m sorry, I&#39;m not sure I understand what your asking.  The line as you wrote it doesn&#39;t work, it appears not to be grammatically correct.  I think what your suggesting though is to pass in an anonymous hash.  Yes your right that would work, but wouldn&#39;t be that pretty.  Since I&#39;m appending to an existing hash I would have to pass in an anonymous hash, use Keys to find and pull the key and value out of the passed hash, and then use those to insert into the final hash (plus I need key and value for error checking).  So that would work, but hoping a cleaner options exists :)"}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1453304892, "post_id": 34904232, "comment_id": 57544930, "body": "@Biffen oh go and update your comment as I&#39;m replying, I see how it is.  Yes constants may be a good option if they can be barewords,  let me look into defining constants to see how that works lol.  such a perl newb right now..."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1453304897, "post_id": 34904232, "comment_id": 57544937, "body": "The line works fine as long as <code>assignElement</code> knows what to do with it. If you&#39;re looking for a <i>clean</i> solution, don&#39;t use barewords (IMHO)."}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 0, "creation_date": 1453305369, "post_id": 34904232, "comment_id": 57545289, "body": "@Biffen it doesn&#39;t appear I can declare barewords as constants.  I think I&#39;d rather remove barewords then do the hash work around.  I just recall there being a syntax to allow things like ignoring function prototype so wanted to see if a comparable way to say &quot;allow me to break the rules for one line&quot; existed before I gave up and tossed barewords entirely."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1453305949, "post_id": 34904232, "comment_id": 57545739, "body": "<code>sub assignElement($element_name, $value){</code> is a syntax error in Perl. Perhaps you are thinking of some other language."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 3, "creation_date": 1453306160, "post_id": 34904232, "comment_id": 57545891, "body": "Also, I do not see the reason you think you have to use a bareword, as using a string <code>foo(&quot;name&quot;, $value)</code> works perfectly well. There is a reason the <code>strict</code> pragma is strict -- it is because it is good practice, and it helps you avoid mistakes that can be hard to detect. In short, this is a horrible idea."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1453306636, "post_id": 34904232, "comment_id": 57546245, "body": "Consider this, for example: <code>perl -MData::Dumper -lwe&quot;sub a { my ($x,$y) = @_; $foo{$x} = $y; }; a(time, 12); print Dumper \\%foo;</code>"}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453306758, "post_id": 34904232, "comment_id": 57546327, "body": "@ikegami yes you are correct.  I&#39;m not use to thinking perl, it seems when I write fast psudocode I fall back to the language I&#39;m more use to.  I have corrected the example."}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1453306863, "post_id": 34904232, "comment_id": 57546393, "body": "@TLP only reason for barewords is due to the frequency of using the variables, it&#39;s a little more convenient to not have to quote each key; and to stay consistent to other bareword key&#39;s used in other hashes in our code.  In other words, no nothing ties me to it too strongly; if no clean option exists to do what I want I will remove barewords.  I just wanted to check if there <i>was</i> a clean solution before falling back to removal of the barewords."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1453306887, "post_id": 34904232, "comment_id": 57546416, "body": "@dsollen You should never use pseudocode. It will confuse the issue, as there may be subtle mistakes, and your code might be say something different than what you are saying. Never include code that you have not run yourself and know the result of."}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1453307048, "post_id": 34904232, "comment_id": 57546534, "body": "@TLP Not necessarily a syntax error: Signatures have been around since v5.20."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1453307181, "post_id": 34904232, "comment_id": 57546643, "body": "@dsollen Generally speaking, if you have a &quot;hidden&quot; assumption like that, one day it is going to come back and bite you in the butt. There is a reason good practice is good: It does good things. I would say the &quot;cleanest&quot; you&#39;re going to get is using the fat arrow <code>=&gt;</code> syntax, but the best is to just suck it up and use quotes. Using quotes will make your code more solid, more readable and less prone to subtle bugs. You are literally thinking of sacrificing hours in possible debug time to gain milliseconds in pressing two extra keys."}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1453307378, "post_id": 34904232, "comment_id": 57546799, "body": "@TLP I understand what your saying, but I doubt anyone wants to parse through a 3-4 level deep hash map with predefined format and the logic for pulling out child values for modification.  I was at fault for not writing proper perl, my instincts still aren&#39;t &#39;perl&#39; enough it seems, but I think simplified code is better then cluttered confusion for such a simple question as this in general, if someone isn&#39;t too incompetent to write basic perl.  And yes, I think I&#39;m using quotes, having seen the alternatives.  I still appreciate learning what the alternatives were though."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1453307498, "post_id": 34904232, "comment_id": 57546882, "body": "@dsollen The option to posting pseudocode that you have not run is not to post the code you are actually using, but to post code that demonstrates the problem you are facing. In other words: Run the code before you post it to make sure it is what you say it is."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1453307587, "post_id": 34904232, "comment_id": 57546942, "body": "The (fractions of a second) you save by omitting the quotes will be lost many times over by the person who has to debug your program when you call <code>assignElement(foo, $value)</code> and there&#39;s a subroutine named <code>foo</code> somewhere else in the code. <code>strict &#39;subs&#39;</code> exists for a very good reason."}], "answers": [{"comments": [{"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1453307162, "post_id": 34904779, "comment_id": 57546625, "body": "I did try the constants option, it didn&#39;t work as well as I had hoped.  The problem is that when I use a constant in a hash key it&#39;s treated as a bareword, so now I need to append a &amp; in front of the constant when I use it as a key directly.  Ultimately if these are my only options I think I&#39;ll simply remove barewords as the cleanest approach.  Still, you did answer my question for how it would be done; it just proves to be too much of a hassle to justify keeping barewords in first place.  Will likely select this as answer if no new brilliant option is posted in next hour.  Thank you."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1453307241, "post_id": 34904779, "comment_id": 57546686, "body": "<code>+</code> would be better than <code>&amp;</code> (for performance reasons). /// Technically, no, you don&#39;t need to add the <code>&amp;</code> (or <code>+</code>) if the name and value of the constant are the same as in my answer. There are, however, some other serious problems using that method, as mentioned in my answer."}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1453307654, "post_id": 34904779, "comment_id": 57546984, "body": "I&#39;m sorry, but I&#39;m not sure I understand your comment.  Why do I not need to use &amp; and how does the name matter?  if I could do constants without the &amp;/+ it would be the cleanest option (this is all in one object so not worried about importing them elsewhere).  I just didn&#39;t think there is a way to avoid the +.  Can you help me understand why it isn&#39;t needed if I do something like $self-&gt;{name}?  I&#39;m stuck with a rather old perl version (5.10.1) so maybe your referencing feature I can&#39;t use?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1453307839, "post_id": 34904779, "comment_id": 57547108, "body": "<code>$self-&gt;{name}</code> is the same with and without <code>use constant name =&gt; &#39;name&#39;;</code>. You don&#39;t have to use <code>$self-&gt;{&amp;name}</code>. I&#39;m not sure what&#39;s the confusion."}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1453308464, "post_id": 34904779, "comment_id": 57547543, "body": "would not $self{name}= &#39;foo&#39;; assign foo to the bareword name, rather then the treating name as a constant and using the &#39;name&#39; value, which is different from $self{&#39;name&#39;} = &#39;foo&#39;?  so if I call $self-&gt;assignElements(name, $value) I would end up doing a call of $self-&gt;{&#39;name&#39;}=$value in assignElement because the constant name is converted to &#39;name&#39;.  Then if I later have a getter method with return $self-&gt;{name} I would look for the bareword key name, instead of identifying it as a constant, which doesn&#39;t exist and return undefined rather then returning the value saved in $self-&gt;{&#39;name&#39;}?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1453309148, "post_id": 34904779, "comment_id": 57548013, "body": "Do you think there&#39;s some difference between <code>$self-&gt;{name}</code> and <code>$self-&gt;{&quot;name&quot;}</code>. There isn&#39;t. It doesn&#39;t matter how the string is obtained. They both lookup the key named <code>name</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1453310947, "post_id": 34904779, "comment_id": 57549217, "body": "I think @dsollen is asking why <code>perl -Mconstant=foo,bar -E&#39;$h{foo} = &quot;baz&quot;; say keys %h&#39;</code> prints <code>foo</code> instead of <code>bar</code>. And the reason is explained in the <a href=\"http://perldoc.perl.org/constant.html#CAVEATS\" rel=\"nofollow noreferrer\">docs</a> for <code>constant</code>: &quot;You can get into trouble if you use constants in a context which automatically quotes barewords (as is true for any subroutine call). For example, you can&#39;t say <code>$hash{CONSTANT}</code> because <code>CONSTANT</code> will be interpreted as a string. Use <code>$hash{CONSTANT()}</code> or <code>$hash{+CONSTANT}</code> to prevent the bareword quoting mechanism from kicking in.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453311905, "post_id": 34904779, "comment_id": 57549844, "body": "@ThisSuitIsBlackNot, I don&#39;t think so. He consistently used <code>name</code> throughout his comment. But if so, I specifically said &quot;if the name and value of the constant are the same&quot;"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1453307654, "last_edit_date": 1453307654, "creation_date": 1453305720, "answer_id": 34904779, "question_id": 34904232, "link": "https://stackoverflow.com/questions/34904232/allow-assignment-of-barewords-to-single-variable-while-still-using-strict-in-per/34904779#34904779", "title": "allow assignment of barewords to single variable while still using strict in perl?", "body": "<p>With a minor change:</p>\n\n<pre><code>$self-&gt;assignElement(name =&gt; $value);\n$self-&gt;assignElement(addr =&gt; $value);\n</code></pre>\n\n<p>Downsides:</p>\n\n<ul>\n<li>The corresponding getter would be ugly (<code>$self-&gt;getElement(name =&gt;)</code>) or inconsistent (<code>$self-&gt;getElement('name')</code>).</li>\n</ul>\n\n<hr>\n\n<p>Without change: (Creates constants/subs named <code>addr</code> and <code>name</code>)</p>\n\n<pre><code>use constant {\n   map {; $_ =&gt; $_ } qw(\n      addr name\n   )\n};\n\n$self-&gt;assignElement(name, $value);\n$self-&gt;assignElement(addr, $value);\n</code></pre>\n\n<p>Downsides:</p>\n\n<ul>\n<li>You'd have to define/import the constants in all the modules that want to use them.</li>\n<li>Conflicts are likely.</li>\n</ul>\n"}], "owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1453307654, "creation_date": 1453304199, "last_edit_date": 1453306842, "question_id": 34904232, "link": "https://stackoverflow.com/questions/34904232/allow-assignment-of-barewords-to-single-variable-while-still-using-strict-in-per", "title": "allow assignment of barewords to single variable while still using strict in perl?", "body": "<p>I want to continue to use strict, but there is one specific location where I want to assign a bareword to a variable, for use as a hash key later.  I'm looking for a way to allow this cleanly while still allowing me to use strict.</p>\n\n<p>A simplified version of my code would be something like this:</p>\n\n<pre><code>sub assignElement{\n   my $self = shift;\n   my($element_name, $value) = @_;\n\n   #sanity check values\n\n   $self-&gt;{$element_name} = $value;\n}\n\nsub assignName{\n my $self = shift;\n my($value) = @_;\n\n $self-&gt;assignElement(name, $value);\n}\n\nsub assignAddress{\n my $self = shift;\n my($value) = @_;\n\n $self-&gt;assignElement(addr, $value);\n}\n</code></pre>\n\n<p>The real code is more complex, but effectively I'm doing something like the above, using a generic assignElement method which works for various element values to allow code reuse.</p>\n\n<p>The element keys are predefined and are currently all bareword.  I know I could make them strings, but I sort of prefer them to stay barewords.  They are referenced quite often and it's tedious to quote them ever time; and besides I use barewords in every other hashkey so it would feel inconsistent to not use barewords in this case.</p>\n\n<p>Is there a way I can tell perl to ignore the strict check on barewords for the single method call (or a single variable assignment) while allowing use strict to function otherwise as usual?</p>\n"}, {"tags": ["perl", "otrs"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453304520, "post_id": 34903756, "comment_id": 57544651, "body": "What do you expect <code>$CustomerCompanyName{&#39;CustomerCompanyName&#39;}</code> to contain? How can it contain anything at all, given that you just initialized it with <code>my</code>?"}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 1, "creation_date": 1453306259, "post_id": 34903756, "comment_id": 57545960, "body": "$CustomerCompanyName = $CustomerCompanyName-&gt;{&#39;CustomerCompanyName&#39;}; assuming CustomerCompanyGet returns hash reference"}], "answers": [{"tags": [], "owner": {"reputation": 1493, "user_id": 4399474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071244d72e3a6f73f9329753619eeb7c?s=128&d=identicon&r=PG", "display_name": "user52889", "link": "https://stackoverflow.com/users/4399474/user52889"}, "is_accepted": true, "score": 3, "last_activity_date": 1453329044, "last_edit_date": 1453329044, "creation_date": 1453319833, "answer_id": 34909338, "question_id": 34903756, "link": "https://stackoverflow.com/questions/34903756/global-symbol-customercompanyname-requires-explicit-package-name/34909338#34909338", "title": "Global symbol &quot;%CustomerCompanyName&quot; requires explicit package name", "body": "<p>The problem you are seeing is caused by the line:</p>\n\n<pre><code>$CustomerCompanyName = $CustomerCompanyName{'CustomerCompanyName'};\n</code></pre>\n\n<p>and it looks like you meant to write:</p>\n\n<pre><code>$CustomerCompanyName = $CustomerCompanyName-&gt;{'CustomerCompanyName'};\n</code></pre>\n\n<p>(notice the dereferencing arrow).</p>\n\n<p><code>$CustomerCompanyName{'CustomerCompanyName'}</code> is a key in a hash <code>%CustomerCompanyName</code>, which is different than <code>$CustomerCompanyName</code>, the scalar you declared and then gave a value (presumably a hash ref).</p>\n"}], "owner": {"reputation": 528, "user_id": 951081, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Vi1f9.png?s=128&g=1", "display_name": "Mattia Manzo Manzati", "link": "https://stackoverflow.com/users/951081/mattia-manzo-manzati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 34909338, "answer_count": 1, "score": 0, "last_activity_date": 1453329044, "creation_date": 1453302936, "question_id": 34903756, "link": "https://stackoverflow.com/questions/34903756/global-symbol-customercompanyname-requires-explicit-package-name", "title": "Global symbol &quot;%CustomerCompanyName&quot; requires explicit package name", "body": "<p>I am not a Perl expert, but I'm trying to edit the OTRS software to add support for CustomerCompanyName column as follows, but I am getting the error</p>\n\n<pre><code>Global symbol \"%CustomerCompanyName\" requires explicit package name at /opt/otrs//Kernel/Output/HTML/Dashboard/TicketGeneric.pm line 1516.\n</code></pre>\n\n<p>I have googoled a bit, and find out that's a problem with \"my\" and variable declaration, but after a while, I have not find out yet what I am doing wrong.</p>\n\n<p>Change is applied by adding at this line:\n<a href=\"https://github.com/OTRS/otrs/blob/1e908159a5dbdcfb94cc35d13bf15b04ac3e6a24/Kernel/Output/HTML/Dashboard/TicketGeneric.pm#L1510\" rel=\"nofollow\">https://github.com/OTRS/otrs/blob/1e908159a5dbdcfb94cc35d13bf15b04ac3e6a24/Kernel/Output/HTML/Dashboard/TicketGeneric.pm#L1510</a></p>\n\n<pre><code>        elsif ( $Column eq 'CustomerCompanyName' ) {\n\n            # get customer name\n            my $CustomerCompanyName;\n            if ( $Ticket{CustomerID} ) {\n                $CustomerCompanyName = $Kernel::OM-&gt;Get('Kernel::System::CustomerCompany')-&gt;CustomerCompanyGet(\n                    CustomerID =&gt; $Ticket{CustomerID},\n                );\n                $CustomerCompanyName = $CustomerCompanyName{'CustomerCompanyName'};\n            }\n            $DataValue = $CustomerCompanyName;\n        }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "perl", "httprequest", "user-agent"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1453304065, "post_id": 34903585, "comment_id": 57544308, "body": "Please edit your question to include the Ruby code you&#39;ve written so far."}, {"owner": {"reputation": 3795, "user_id": 4926817, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0lH0y.png?s=128&g=1", "display_name": "Noam Hacker", "link": "https://stackoverflow.com/users/4926817/noam-hacker"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1453304603, "post_id": 34903585, "comment_id": 57544716, "body": "@Jordan I have added ruby code and bolded the part I&#39;m unsure about"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 5, "last_activity_date": 1453337113, "last_edit_date": 1453337113, "creation_date": 1453305690, "answer_id": 34904759, "question_id": 34903585, "link": "https://stackoverflow.com/questions/34903585/converting-an-lwpuseragent-from-perl-to-ruby/34904759#34904759", "title": "Converting an LWP::UserAgent from Perl to Ruby", "body": "<p>Your Perl example does not show you setting the User-Agent header (using the <code>agent</code> method). That's the header that identifies the software performing the transaction. You are adding Basic Auth credentials in the Perl example, which is how the user demonstrates they are allowed to access the resource. They are completely different things.</p>\n\n<p>When you <code>print $ua</code>, you are seeing the memory address of the object, like <code>LWP::UserAgent=HASH(0x7fa9db00b1b0)</code>.</p>\n\n<p>If you want to set the User-Agent string in the Ruby example, fill in the string you want.</p>\n\n<p>If you want to supply the username and password for Basic Authorization, see the example in the <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow\">Net::HTTP docs</a>:</p>\n\n<pre><code>uri = URI('http://example.com/index.html?key=value')\n\nreq = Net::HTTP::Get.new(uri)\nreq.basic_auth 'user', 'pass'\n\nres = Net::HTTP.start(uri.hostname, uri.port) {|http|\n  http.request(req)\n}\nputs res.body\n</code></pre>\n"}], "owner": {"reputation": 3795, "user_id": 4926817, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0lH0y.png?s=128&g=1", "display_name": "Noam Hacker", "link": "https://stackoverflow.com/users/4926817/noam-hacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 2, "accepted_answer_id": 34904759, "answer_count": 1, "score": 0, "last_activity_date": 1453337113, "creation_date": 1453302433, "last_edit_date": 1453304556, "question_id": 34903585, "link": "https://stackoverflow.com/questions/34903585/converting-an-lwpuseragent-from-perl-to-ruby", "title": "Converting an LWP::UserAgent from Perl to Ruby", "body": "<p>I am trying to add a <code>User-Agent</code> to the header in my HTTP request (in Ruby), but am unsure of the format of the user-agent string. here is how it is defined in Perl:</p>\n\n<pre><code>use LWP::UserAgent;\nmy $ua = new LWP::UserAgent(keep_alive=&gt;1);\n$ua-&gt;credentials($netloc, '', \"$user\", \"$pwd\");\n</code></pre>\n\n<p>If I try to <code>print $ua;</code>, I get a hash which changes every time. I believe that in Ruby I should have the credentials embedded into a single string. How can I know how to format this string? Or, How can I successfully print the contents of <code>$ua</code> in Perl?</p>\n\n<p>Ruby code:</p>\n\n<p><code>http = Net::HTTP.new(\"your.site.com\", 80)\nreq = Net::HTTP::Get.new(\"/path/to/the/page.html\", {'User-Agent' =&gt; '</code><strong>your_agent_here</strong><code>'})\nresponse = http.request(req)</code></p>\n"}, {"tags": ["perl", "dns"], "comments": [{"owner": {"reputation": 311848, "user_id": 6782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/dc8c4ddd99b446c28d2e1546c457e508?s=128&d=identicon&r=PG", "display_name": "Alnitak", "link": "https://stackoverflow.com/users/6782/alnitak"}, "edited": false, "score": 3, "creation_date": 1453301172, "post_id": 34901842, "comment_id": 57542179, "body": "saying you&#39;ve got &quot;garbage&quot; isn&#39;t particularly helpful without at least a small example of what that garbage looks like"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453306880, "post_id": 34902826, "comment_id": 57546409, "body": "The <code>print</code> method is exactly <code>print shift-&gt;string, &quot;\\n&quot;</code>, so rather than printing to <code>STDOUT</code> as the documentation says, it actually prints to the currently selected file handle"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1453300329, "creation_date": 1453300329, "answer_id": 34902826, "question_id": 34901842, "link": "https://stackoverflow.com/questions/34901842/perl-netdns-output-to-file/34902826#34902826", "title": "PERL Net::DNS output to file", "body": "<p>When you're learning a new language, making random changes to code in the hope that they will do what you want is not a good idea. A far better approach is to read the documentation for the libraries and functions that you are using.</p>\n\n<p>The original code uses <code>$rr-&gt;print</code>. The documentation for <a href=\"https://metacpan.org/pod/Net::DNS::Resolver#print\" rel=\"nofollow\">Net::DNS::Resolver</a> says:</p>\n\n<blockquote>\n  <p><strong>print</strong></p>\n\n<pre><code>$resolver-&gt;print;\n</code></pre>\n  \n  <p>Prints the resolver state on the standard output.</p>\n</blockquote>\n\n<p>The <code>print()</code> method there is named after the standard Perl <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow\"><code>print</code></a> function which we can use to print data to any filehandle. There's a Net::DNS::Resolver method called <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow\"><code>string</code></a> which is documented like this:</p>\n\n<blockquote>\n  <p><strong>string</strong></p>\n\n<pre><code>print $resolver-&gt;string;\n</code></pre>\n  \n  <p>Returns a string representation of the resolver state.</p>\n</blockquote>\n\n<p>So it looks like <code>$rr-&gt;print</code> is equivalent to <code>print $rr-&gt;string</code>. And it's simple enough to change that to print to your new filehandle.</p>\n\n<pre><code>print $fh $rr-&gt;string;\n</code></pre>\n\n<p>p.s. And, by the way, it's \"Perl\", not \"PERL\".</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5816202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc8ba3b46c0988692d0cf2a4de0a79?s=128&d=identicon&r=PG&f=1", "display_name": "DaveS", "link": "https://stackoverflow.com/users/5816202/daves"}, "edited": false, "score": 0, "creation_date": 1453308487, "post_id": 34903039, "comment_id": 57547556, "body": "Thanks....this output to the file was the same as the output was to the screen.  Much to learn on Perl."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1453308767, "last_edit_date": 1453308767, "creation_date": 1453300911, "answer_id": 34903039, "question_id": 34901842, "link": "https://stackoverflow.com/questions/34901842/perl-netdns-output-to-file/34903039#34903039", "title": "PERL Net::DNS output to file", "body": "<p>Your <code>@zone</code> array contains a list of <a href=\"http://metacpan.org/module/Net::DNS::RR\" rel=\"nofollow\"><code>Net::DNS::RR</code></a> objects, whose <code>print</code> method stringifies the object and prints it to the currently selected file handle</p>\n\n<p>To print the same thing to a different file handle you will have to stringify the object yourself</p>\n\n<p>This should work</p>\n\n<pre><code>open my $fh, '&gt;', $filename or die \"Could not open file '$filename': $!\";\n\nprint $fh $_-&gt;string, \"\\n\" for @zone;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5816202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc8ba3b46c0988692d0cf2a4de0a79?s=128&d=identicon&r=PG&f=1", "display_name": "DaveS", "link": "https://stackoverflow.com/users/5816202/daves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 34903039, "answer_count": 2, "score": 4, "last_activity_date": 1453500093, "creation_date": 1453297732, "last_edit_date": 1453500093, "question_id": 34901842, "link": "https://stackoverflow.com/questions/34901842/perl-netdns-output-to-file", "title": "PERL Net::DNS output to file", "body": "<p>Completely new to Perl (in the process of learning) and need some help.  Here is some code that I found which prints results to the screen great, but I want it printed to a file.  How can I do this?  When I open a file and send output to it, I get garbage data.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>use Net::DNS;\nmy $res  = Net::DNS::Resolver-&gt;new;\n$res-&gt;nameservers(\"ns.example.com\");\n\nmy @zone = $res-&gt;axfr(\"example.com\");\n\nforeach $rr (@zone) {\n$rr-&gt;print;\n}\n</code></pre>\n\n<p>When I add:</p>\n\n<pre><code>open(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\n.....\n$rr -&gt; $fh; #I get garbage.\n</code></pre>\n"}, {"tags": ["javascript", "apache", "perl", "http-headers", "xmlhttprequest"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 5816025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4708227b8f077a0c7bda9d3b35a0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Paulchenkiller", "link": "https://stackoverflow.com/users/5816025/paulchenkiller"}, "is_accepted": true, "score": 2, "last_activity_date": 1453354633, "creation_date": 1453354633, "answer_id": 34916135, "question_id": 34901802, "link": "https://stackoverflow.com/questions/34901802/access-control-allow-origin-header-is-present-but-browser-deny-xmlhttprequest/34916135#34916135", "title": "Access-Control-Allow-Origin header is present but Browser deny XMLHttpRequest", "body": "<p>Okay I found the problem. The Error was that I send the <code>Access-Control-Allow-Origin</code> and <code>Access-Control-Allow-Headers</code> only in the <code>OPTIONS</code> Request, not in the normal <code>POST</code>. </p>\n"}], "owner": {"reputation": 41, "user_id": 5816025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab4708227b8f077a0c7bda9d3b35a0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Paulchenkiller", "link": "https://stackoverflow.com/users/5816025/paulchenkiller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 34916135, "answer_count": 1, "score": 2, "last_activity_date": 1453354633, "creation_date": 1453297621, "question_id": 34901802, "link": "https://stackoverflow.com/questions/34901802/access-control-allow-origin-header-is-present-but-browser-deny-xmlhttprequest", "title": "Access-Control-Allow-Origin header is present but Browser deny XMLHttpRequest", "body": "<p>I have a really strange problem. I have a Webservice build with a simple Perl <a href=\"http://p3rl.org/CGI\" rel=\"nofollow\"><code>CGI</code></a> Script as a Wrapper to an API (to allow restricted Cross Origin Control). \nAnyway, to allow Cross-Origin Requests I set these headers:</p>\n\n<pre><code>Content-Type: text/plain\nAccess-Control-Allow-Origin: $origin\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-Requested-With, Content-Type, Accept, Accept-Language, Content-Language\nContent-Security-Policy: connect-src *\nX-Content-Security-Policy: connect-src *\nX-WebKit-CSP: connect-src *\nAccess-Control-Max-Age: 1728000\nVary: Accept-Encoding, Origin\n</code></pre>\n\n<p>where <code>my $origin = $ENV{HTTP_ORIGIN} // '*';</code>. </p>\n\n<p>When the Script Requests the expected Ressource, the Response from the Wrapper is the followed (copied from Firefox):</p>\n\n<pre><code>HTTP/1.1 200 OK\nDate: Wed, 20 Jan 2016 12:54:48 GMT\nServer: Apache\nAccess-Control-Allow-Origin: *\nAccess-Control-Allow-Methods: POST, GET, OPTIONS\nAccess-Control-Allow-Headers: X-Requested-With, Content-Type, Accept, Accept-Language, Content-Language\ncontent-security-policy: connect-src *, frame-ancestors 'self'\nX-Content-Security-Policy: connect-src *\nX-WebKit-CSP: connect-src *\nAccess-Control-Max-Age: 1728000\nVary: Accept-Encoding,Origin\nContent-Length: 0\nKeep-Alive: timeout=15, max=100\nConnection: Keep-Alive\nContent-Type: text/plain\n</code></pre>\n\n<p>The Browser gives me the following error:</p>\n\n<pre><code>XMLHttpRequest cannot load http://www.example.com/cgi-bin/wrapper.pl. No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin 'http://example2.com' is therefore not allowed access.`\n</code></pre>\n\n<p>I also tested the call with <code>curl</code> and <code>Postman</code>, but this worked as expected.\nThe problem is that all Browser seem to ignore the <code>Access-Control-Allow-Origin</code> header, even when he is set.</p>\n"}, {"tags": ["regex", "bash", "perl", "csv", "replace"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 5, "creation_date": 1453297313, "post_id": 34901611, "comment_id": 57539319, "body": "It&#39;s certainly doable with both <code>sed</code> and <code>awk</code>.  What did you try?  Of course, the best solution would probably be to teach your import tool to handle commas in quoted strings correctly."}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 3, "creation_date": 1453298751, "post_id": 34901695, "comment_id": 57540390, "body": "Hooray, a proper answer!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1453300221, "post_id": 34901695, "comment_id": 57541481, "body": "I have a new crusade against inappropriate use of <code>regex</code>. I see a lot of &quot;can I have a regex for...&quot; questions which whilst <i>technically</i> regular expressions could do, the resultant regex ends up ... well, the epitome of &#39;bad code&#39; in that it&#39;s hard to read or understand. (See some of the answers below for examples of what I mean - they&#39;re <i>correct</i> but hard to follow)"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1453300269, "post_id": 34901695, "comment_id": 57541516, "body": "Me too. regex is a good hammer, but not every problem needs a hammer. Formats like XML, JSON, CSV require proper parsers for non-fragile solutions."}, {"owner": {"reputation": 793, "user_id": 2161694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QiLQj.jpg?s=128&g=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/2161694/marcos"}, "edited": false, "score": 0, "creation_date": 1453359415, "post_id": 34901695, "comment_id": 57568870, "body": "@Sobrique , Thanks for the helpful answer, but I&#39;ve chosen the sed answer.."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 6, "last_activity_date": 1453301303, "last_edit_date": 1453301303, "creation_date": 1453297351, "answer_id": 34901695, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file/34901695#34901695", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>Because you have quoted commas, you need a parser. <code>regex</code> can do it, but it's nasty, where something like <code>perl</code>s <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><code>Text::CSV</code></a> parses just fine. </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Text::CSV;\n\nmy $csv = Text::CSV -&gt; new ( { binary =&gt; 1, eol =&gt; \"\\n\" } ); \n\nwhile ( my $row = $csv -&gt; getline ( \\*DATA ) ) {\n   #remove commas in fields in the row\n   s|,||g for @$row; \n   #print the row. \n   $csv -&gt; print ( \\*STDOUT, $row ); \n}\n\n__DATA__\ncol1,col2,col3,col4,col5,col6\nabc,edf,\"123,456,789\",\"1,234\",\"133,233,456\",20/01/2016\nogfsf,dcfdc,0,\"1,456\",\"134,567,456\",11/01/2016\njkglt,mnbc,0,0,\"132,467,876\",05/01/2016\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>col1,col2,col3,col4,col5,col6\nabc,edf,123456789,1234,133233456,20/01/2016\nogfsf,dcfdc,0,1456,134567456,11/01/2016\njkglt,mnbc,0,0,132467876,05/01/2016\n</code></pre>\n\n<p>As desired. You can use <code>\\*STDIN</code> to read... from STDIN. Or you could use <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\"><code>open</code></a> to do file IO. </p>\n\n<p>If you want something specifically to 'one-liner' it for use in a script (which IMO is the usual reason for asking for a regex type solution):</p>\n\n<pre><code>perl -ne 'BEGIN{$csv = Text::CSV-&gt;new({eol=&gt;\"\\n\"})} $csv-&gt;print(\\*STDOUT, [map {s|,||gr} do {$csv -&gt; parse ( $_ ); $csv -&gt;fields()}])' filename\n</code></pre>\n\n<p>Which does more or less the above, and ... well, there's a tradeoff - the <code>regex</code> bit is pretty clear, but the <code>map</code> might be a bit inscrutable :).</p>\n\n<p>This is:</p>\n\n<ul>\n<li>iterating line by line (filename or stdin)</li>\n<li>calling `parse</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1453297561, "creation_date": 1453297561, "answer_id": 34901779, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file/34901779#34901779", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>Through perl,</p>\n\n<pre><code>$ perl -pe 's/,(?!(?:[^\"]*\"[^\"]*\")*[^\"]*$)//g' file\ncol1,col2,col3,col4,col5,col6\nabc,edf,\"123456789\",\"1234\",\"133233456\",20/01/2016\nogfsf,dcfdc,0,\"1456\",\"134567456\",11/01/2016\njkglt,mnbc,0,0,\"132467876\",05/01/2016\n</code></pre>\n\n<p>Through python.</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; with open('/home/gemini/Desktop/sample.txt') as f:\n        m = f.read()\n        print re.sub('\"[^\"]*\"', lambda x: x.group().replace(',', ''), m)\n\n\ncol1,col2,col3,col4,col5,col6\nabc,edf,\"123456789\",\"1234\",\"133233456\",20/01/2016\nogfsf,dcfdc,0,\"1456\",\"134567456\",11/01/2016\njkglt,mnbc,0,0,\"132467876\",05/01/2016\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 793, "user_id": 2161694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QiLQj.jpg?s=128&g=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/2161694/marcos"}, "edited": false, "score": 0, "creation_date": 1453359633, "post_id": 34901933, "comment_id": 57568947, "body": "Thanks for the answer !"}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 1, "last_activity_date": 1453300871, "last_edit_date": 1453300871, "creation_date": 1453297996, "answer_id": 34901933, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file/34901933#34901933", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>With sed:</p>\n\n<pre><code>sed -E ':a;s/((,|^)\"[^\",]*),/\\1/;ta' file\n</code></pre>\n\n<p>details:</p>\n\n<pre><code>:a # define the label \"a\"\ns/((,|^)\"[^\",]*),/\\1/ # replace the first comma enclosed between quotes\nta # if something is replaced, go to label \"a\"\n</code></pre>\n\n<p>The -E (or -r) switch sets the regex syntax to ERE (Extended Regular Expression) that allows <code>|</code> and avoids to escape all special characters like parenthesis.</p>\n\n<p><code>(,|^)</code> is here to check if the quote is really an opening quote. Since commas are replaced one by one from left to right, when it matches, you can be sure that the following quote is an opening quote (because all previous commas inside quotes are already replaced).</p>\n\n<p>Note: This assumes that quoted parts of your csv file don't contain newlines. To handle quoted parts with newlines, it's a bit more complicated since you need to check if the number of quotes is even and if not, you need to append next lines to the pattern space until you obtain an even number of quotes:</p>\n\n<pre><code>sed -E ':a;/^([^\"]|\"[^\"]*\")*$/!{N;ba};:b;s/((,|^)\"[^\",]*),/\\1/;tb' file\n</code></pre>\n\n<p>To deal with escaped quotes:</p>\n\n<pre><code>sed -E ':a;/^([^\"]|\"[^\"]*(\"\"[^\"]*)*\")*$/!{N;ba};:b;s/((,|^)\"[^\",]*(\"\"[^\",]*)*),/\\1/;tb;' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 404, "user_id": 5787139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a827319c75c27d560e4e9964bb16182?s=128&d=identicon&r=PG&f=1", "display_name": "Owen Hempel", "link": "https://stackoverflow.com/users/5787139/owen-hempel"}, "is_accepted": false, "score": 0, "last_activity_date": 1453298177, "creation_date": 1453298177, "answer_id": 34902008, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file/34902008#34902008", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>Teach your importer to handle quotes:</p>\n\n<pre><code>B = []\nfor line in csv:\n    A = line.split('\"')#A is now a list of strings in which every other element is within quotes\n    inquotes = False\n    for item in A:\n        if(inquotes):\n            B.append(item)\n        else:\n            C = item.split(',')#This is the regular csv stuff, the one we parse by commas\n            for element in C:\n                 B.append(C)\n        inquotes = not(inquotes)#change state\n</code></pre>\n\n<p>This is kind of hacky, but will preserve the commas instead of removing them</p>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 0, "last_activity_date": 1453300610, "last_edit_date": 1453300610, "creation_date": 1453299211, "answer_id": 34902373, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file/34902373#34902373", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>Here's a ruby one-liner that will blindly remove any commas from quoted entries:</p>\n\n<pre><code>ruby -rcsv -e 'CSV.foreach(ARGV.shift) {|row| puts CSV.generate_line row.map {|elem| elem.delete(\",\")}}' file.csv\n</code></pre>\n\n\n\n<pre><code>col1,col2,col3,col4,col5,col6\nabc,edf,123456789,1234,133233456,20/01/2016\nogfsf,dcfdc,0,1456,134567456,11/01/2016\njkglt,mnbc,0,0,132467876,05/01/2016\n</code></pre>\n\n<p>If you have data like </p>\n\n<pre><code>\"hello,world\",foo,\"1,234\"\n</code></pre>\n\n<p>you will want to keep the commas in the string fields. In that case</p>\n\n<pre><code>$ cat file.csv\ncol1,col2,col3,col4,col5,col6\nabc,edf,\"123,456,789\",\"1,234\",\"133,233,456\",20/01/2016\n\"a,b,c\",\"d,e,f\",0,0,0,0\n\n$ ruby -rcsv -e '\n    CSV.foreach(ARGV.shift) do |row| \n      puts CSV.generate_line (\n        row.map do |elem| \n          elem.match(/^\\d+(,\\d\\d\\d)+$/) ? elem.delete(\",\") : elem \n        end\n      ) \n    end\n  ' file.csv\ncol1,col2,col3,col4,col5,col6\nabc,edf,123456789,1234,133233456,20/01/2016\n\"a,b,c\",\"d,e,f\",0,0,0,0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5770958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3a20e50aa766cbb8074d4040cd7440d?s=128&d=identicon&r=PG&f=1", "display_name": "user5770958", "link": "https://stackoverflow.com/users/5770958/user5770958"}, "is_accepted": false, "score": 1, "last_activity_date": 1453300727, "creation_date": 1453300727, "answer_id": 34902976, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file/34902976#34902976", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>Why not make columns 3,4,5 before export a value without the , ? According to what you tell the export file is getting changed by adding column of different types, it is essential to tell te people who make the first export that they have to export it as a xxxxxxxxxx number instead of a xxx,xxx,xxx number.</p>\n\n<p>It is done in a jiffy in MS excel or Ooo, now your making a code , which will eventually give more problems while the problem is created by the first user.</p>\n\n<p>Put it in a white paper how the exports should go; text files, columns etc. it makes life for a programmer much easier.</p>\n"}, {"comments": [{"owner": {"reputation": 793, "user_id": 2161694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QiLQj.jpg?s=128&g=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/2161694/marcos"}, "edited": false, "score": 0, "creation_date": 1453359185, "post_id": 34903332, "comment_id": 57568781, "body": "the above removes all (,), not only the (,) within (&quot;)."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 793, "user_id": 2161694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QiLQj.jpg?s=128&g=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/2161694/marcos"}, "edited": false, "score": 0, "creation_date": 1453360039, "post_id": 34903332, "comment_id": 57569108, "body": "That&#39;s not true, you can see attached output with all the commas outside quotes intact."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 0, "last_activity_date": 1453301765, "creation_date": 1453301765, "answer_id": 34903332, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file/34903332#34903332", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>Dedicated CSV parsers can definitely do that though using standard shell utilities here is one simple gnu-awk solution:</p>\n\n<pre><code>awk -v FPAT='\"[^\"]*\"|[^,]*' -v OFS=, '{for(i=1; i&lt;=NF; i++) gsub(/,/, \"\", $i)} 1' file\ncol1,col2,col3,col4,col5,col6\nabc,edf,\"123456789\",\"1234\",\"133233456\",20/01/2016\nogfsf,dcfdc,0,\"1456\",\"134567456\",11/01/2016\njkglt,mnbc,0,0,\"132467876\",05/01/2016\n</code></pre>\n\n<p><code>-v FPAT='\"[^\"]*\"|[^,]*'</code> breaks each line into fields as <code>\"...\"</code> or non-comma fields.</p>\n"}], "owner": {"reputation": 793, "user_id": 2161694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QiLQj.jpg?s=128&g=1", "display_name": "Marcos", "link": "https://stackoverflow.com/users/2161694/marcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "closed_date": 1453332094, "accepted_answer_id": 34901933, "answer_count": 7, "score": -1, "last_activity_date": 1453301765, "creation_date": 1453297156, "question_id": 34901611, "link": "https://stackoverflow.com/questions/34901611/replace-with-in-a-csv-file", "closed_reason": "Needs more focus", "title": "replace &quot;*,*&quot; with &quot;**&quot; in a csv file", "body": "<p>I get .csv files with lot of different details and recently, sizes and epoch values were added to it. This is causing issues with the import tool due to unwanted (,) within values</p>\n\n<p>e.g.</p>\n\n<pre><code>col1,col2,col3,col4,col5,col6\nabc,edf,\"123,456,789\",\"1,234\",\"133,233,456\",20/01/2016\nogfsf,dcfdc,0,\"1,456\",\"134,567,456\",11/01/2016\njkglt,mnbc,0,0,\"132,467,876\",05/01/2016\n</code></pre>\n\n<p>I want to replace the unwanted (,) that come in between (\"\") in each row. I tried using sed, tr and other type of replacements, but that didn't help. Do I need to use scripts to do this or a single liner replacement command will do?</p>\n\n<p>Regards</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1453294518, "post_id": 34900500, "comment_id": 57537445, "body": "Can you post a dump of the &quot;empty line&quot;? <code>print join &#39; &#39;, map ord, split &#47;&#47;, $ligne</code>."}, {"owner": {"reputation": 175, "user_id": 5186623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206691161224996/picture?type=large", "display_name": "Chedi Bechikh", "link": "https://stackoverflow.com/users/5186623/chedi-bechikh"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453319978, "post_id": 34900500, "comment_id": 57554415, "body": "the program print 10"}], "answers": [{"tags": [], "owner": {"reputation": 35106, "user_id": 2953344, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0Be9p.jpg?s=128&g=1", "display_name": "Sabuj Hassan", "link": "https://stackoverflow.com/users/2953344/sabuj-hassan"}, "is_accepted": false, "score": 3, "last_activity_date": 1453294611, "creation_date": 1453294611, "answer_id": 34900686, "question_id": 34900500, "link": "https://stackoverflow.com/questions/34900500/detect-empty-line-contain-only-space-in-perl/34900686#34900686", "title": "Detect empty line (contain only space) in perl", "body": "<p>I think it is because of using the <code>\\n</code> within your code. Just remove that <code>\\n</code> from your code and it should be fine.</p>\n\n<p>Usually people do <code>chomp</code> after reading a line from a file to remove the end of line character.</p>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 1040022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/53ddbb7a10252bf96d77fdc320dca874?s=128&d=identicon&r=PG", "display_name": "StanOverflow", "link": "https://stackoverflow.com/users/1040022/stanoverflow"}, "is_accepted": false, "score": 1, "last_activity_date": 1453299683, "last_edit_date": 1453299683, "creation_date": 1453294878, "answer_id": 34900785, "question_id": 34900500, "link": "https://stackoverflow.com/questions/34900500/detect-empty-line-contain-only-space-in-perl/34900785#34900785", "title": "Detect empty line (contain only space) in perl", "body": "<p>The reason is also that you're adding a new line, to the end of your string which already has a newline in it \"$ligne\\n\", so use <strong>chomp</strong> as below</p>\n\n<p>I think the nicer way of doing this is with <strong>next</strong> (skip to next loop iteration) as it removes some brackets from your code:</p>\n\n<pre><code>while (&lt;FICC&gt;) {\n    my $ligne=chomp $_;\n    next if $ligne =~ /^\\s*$/;\n    print \" $ligne\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453300206, "post_id": 34902323, "comment_id": 57541465, "body": "I think the OP&#39;s issue is that they are printing <code>&quot;$ligne\\n&quot;</code> without chomping the original newline, so the output is double-spaced"}, {"owner": {"reputation": 175, "user_id": 5186623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206691161224996/picture?type=large", "display_name": "Chedi Bechikh", "link": "https://stackoverflow.com/users/5186623/chedi-bechikh"}, "edited": false, "score": 0, "creation_date": 1453322871, "post_id": 34902323, "comment_id": 57556091, "body": "the problem is if i add &#39;else{ print &quot;ligne&quot;}&#39; this print empty line, so it detect the empty line but the else didn&#39;t do nothing"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1453323637, "post_id": 34902323, "comment_id": 57556490, "body": "See my update. If you want any more help, you&#39;re going to have to be a lot clearer about what you are trying to do."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1453323422, "last_edit_date": 1453323422, "creation_date": 1453299090, "answer_id": 34902323, "question_id": 34900500, "link": "https://stackoverflow.com/questions/34900500/detect-empty-line-contain-only-space-in-perl/34902323#34902323", "title": "Detect empty line (contain only space) in perl", "body": "<p>An easier way to write that is probably to invert the logic and only print lines that contain non-whitespace characters.</p>\n\n<pre><code>while (&lt;FICC&gt;) {\n  my $ligne = $_;\n  if ($ligne =~ /\\S/) {\n    print \" $ligne\"; # No need for linefeed here as $ligne already has one\n  }\n}\n</code></pre>\n\n<p><strong>Update:</strong> Demo using your sample data:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nwhile (&lt;DATA&gt;) {\n  my $ligne = $_;\n\n  if ($ligne =~ /\\S/) {\n    print \" $ligne\";\n  }\n}\n\n__END__\nMs. Ruth Dreifuss Dreifuss Federal Councillor Federal ruth\n\nsir christopher warren US Secretary of state secretary of state\n\nexternal economic case federal economic affair conference the Federal Office case\n\nUS bill clinton bill clinton Mr. Bush\n\nNestle food cs holding swiss Swiss Performance Index Performance\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> Ms. Ruth Dreifuss Dreifuss Federal Councillor Federal ruth\n sir christopher warren US Secretary of state secretary of state\n external economic case federal economic affair conference the Federal Office case\n US bill clinton bill clinton Mr. Bush\n Nestle food cs holding swiss Swiss Performance Index Performance\n</code></pre>\n\n<p>Which seems correct to me. </p>\n"}], "owner": {"reputation": 175, "user_id": 5186623, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10206691161224996/picture?type=large", "display_name": "Chedi Bechikh", "link": "https://stackoverflow.com/users/5186623/chedi-bechikh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 717, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1453323422, "creation_date": 1453294026, "last_edit_date": 1453323018, "question_id": 34900500, "link": "https://stackoverflow.com/questions/34900500/detect-empty-line-contain-only-space-in-perl", "title": "Detect empty line (contain only space) in perl", "body": "<p>my program read a file, and i don't want to treat empty line</p>\n\n<pre><code>while (&lt;FICC&gt;) {\nmy $ligne=$_;\nif ($ligne =~ /^\\s*$/){}else{\nprint \" $ligne\\n\";}\n</code></pre>\n\n<p>but this code also print empty line</p>\n\n<p>the file that i test with contain:</p>\n\n<pre><code>Ms. Ruth Dreifuss Dreifuss Federal Councillor Federal ruth\n\u00a0\u00a0\u00a0\u00a0\u00a0\nsir christopher warren US Secretary of state secretary of state\n\u00a0\u00a0\u00a0\u00a0\u00a0\nexternal economic case federal economic affair conference the Federal Office case\n\u00a0\u00a0\u00a0\u00a0\u00a0\nUS bill clinton bill clinton Mr. Bush\n\u00a0\u00a0\u00a0\u00a0\u00a0\nNestle food cs holding swiss Swiss Performance Index Performance\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1453292390, "post_id": 34899876, "comment_id": 57536057, "body": "<code>([ab])([ax])\\1x\\1</code> regex should match <code>axaxa</code>, hence <code>\\1</code> is <code>a</code> and <code>\\2</code> is <code>x</code>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453292425, "post_id": 34899876, "comment_id": 57536082, "body": "See <a href=\"https://regex101.com/r/hK9yI3/1\" rel=\"nofollow noreferrer\">regex demo</a>. It explains everything, I think. Finds <code>a</code>, puts into Group 1, finds <code>x</code>, puts into Group 2, then matches the value in Group 1 (=<code>a</code>), then finds <code>x</code>, then again the value in Group 1. The keywords are <i>capturing group</i>, <i>backreferences</i> and <i>character class</i>."}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1453295091, "post_id": 34899876, "comment_id": 57537839, "body": "The first <code>x</code> in <code>aaxaxa</code> can never match the literal x in your regex <code>&#47;([ab])([ax])\\1x\\1&#47;</code>, because the regex is looking to match 3 charcaters in front of it, but the string only has 2. So think of it as the literal <code>x</code> in your match expression matching the second <code>x</code> in <code>aaxaxa</code>, and the three characters before that matching the the regex <code>[ab][ax]\\1</code> (with \\1 being &#39;a&#39;)"}, {"owner": {"reputation": 1, "user_id": 5815779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72b5ec43e3fadf616d80f0da5a9d5d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Venkata Naga Amar Boggavarapu", "link": "https://stackoverflow.com/users/5815779/venkata-naga-amar-boggavarapu"}, "edited": false, "score": 0, "creation_date": 1453295229, "post_id": 34899876, "comment_id": 57537944, "body": "Many Thanks Wiktor Stribi\u017cew; This is really beautiful and very clear descriptive."}], "owner": {"reputation": 1, "user_id": 5815779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72b5ec43e3fadf616d80f0da5a9d5d7b?s=128&d=identicon&r=PG&f=1", "display_name": "Venkata Naga Amar Boggavarapu", "link": "https://stackoverflow.com/users/5815779/venkata-naga-amar-boggavarapu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1453292458, "answer_count": 0, "score": 0, "last_activity_date": 1453292315, "creation_date": 1453292271, "last_edit_date": 1453292315, "question_id": 34899876, "link": "https://stackoverflow.com/questions/34899876/what-is-the-result-of-below-regex-and-can-some-one-explain-in-detailed-in-perl-c", "closed_reason": "Duplicate", "title": "What is the result of below regex and can some one explain in detailed in perl context", "body": "<p>if regex <code>/([ab])([ax])\\1x\\1/</code>  is run on the string <code>aaxaxa</code>  what is the resulting value of <code>$1</code> and <code>$2</code>.</p>\n\n<p>Can some one explain in detailed in perl context.</p>\n\n<p>I have tried with below perl script; Got an answer. But I would like to understand what does that regex is doing and how the answer came.</p>\n\n<pre><code>#! /usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $str = \"aaxaxa\";\n\nmy($str1,$str2) = ($str =~ m/([ab])([ax])\\1x\\1/);\n\nprint \"Substring-1: $str1 Substring-2: $str2 \\n\";\n</code></pre>\n\n<p>Output : <code>Substring-1: a Substring-2: x</code></p>\n"}, {"tags": ["perl", "xpath", "xml-libxml"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453284727, "post_id": 34896890, "comment_id": 57530782, "body": "Can you show the XML? What version of <code>XML::LibXML</code> do you run?"}, {"owner": {"reputation": 137664, "user_id": 252228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3ea75023c3c487f36257090d420b7c50?s=128&d=identicon&r=PG", "display_name": "Martin Honnen", "link": "https://stackoverflow.com/users/252228/martin-honnen"}, "edited": false, "score": 0, "creation_date": 1453285323, "post_id": 34896890, "comment_id": 57531183, "body": "I suspect you are looking for a certain child element but have overlooked that there can be child text nodes with white space as well. So please show an XML input sample and explain which data you are looking for."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1453285089, "creation_date": 1453285089, "answer_id": 34897259, "question_id": 34896890, "link": "https://stackoverflow.com/questions/34896890/print-output-using-xmllibxml/34897259#34897259", "title": "Print output using XML::LibXML", "body": "<p><code>getAttribute</code> returns an attribute, while <code>firstChild</code> returns a text node, element, processing instruction, or a comment.</p>\n\n<p>What you see is a normal Perl way of printing an object: it prints its class and address. Your version of <a href=\"http://p3rl.org/XML::LibXML\" rel=\"nofollow\">XML::LibXML</a> seems to be a bit antique, recent versions <a href=\"http://p3rl.org/overload\" rel=\"nofollow\">overload</a> the stringification and the code produces the actual text node.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse XML::LibXML;\n\nmy $doc = 'XML::LibXML'-&gt;load_xml( string =&gt; &lt;&lt; '__XML__');\n&lt;root&gt;\n    &lt;OBJECT name=\"o1\"&gt;hello&lt;/OBJECT&gt;\n&lt;/root&gt;\n__XML__\n\nmy @objects = $doc-&gt;getElementsByTagName('OBJECT');\n\nfor my $object (@objects) {\n    print 'OBJECT = ', $object-&gt;firstChild, \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>OBJECT = hello\n</code></pre>\n\n<p>In the old versions, one needed to call the <code>nodeValue</code> or <code>data</code> method.</p>\n\n<pre><code>print 'OBJECT = ', $object-&gt;firstChild-&gt;data, \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5603636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9bf3e67eb83ed1e5737c06c01fe1057?s=128&d=identicon&r=PG&f=1", "display_name": "HDemaiter", "link": "https://stackoverflow.com/users/5603636/hdemaiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 34897259, "answer_count": 1, "score": 1, "last_activity_date": 1453285089, "creation_date": 1453284073, "last_edit_date": 1453284658, "question_id": 34896890, "link": "https://stackoverflow.com/questions/34896890/print-output-using-xmllibxml", "title": "Print output using XML::LibXML", "body": "<pre><code>my $doc = $parser-&gt;parse_string( $res-&gt;content );\nmy $root = $doc-&gt;getDocumentElement;\nmy @objects = $root-&gt;getElementsByTagName('OBJECT');\n\nforeach my $object ( @objects ){\nmy $name = $object-&gt;firstChild;\nprint \"OBJECT = \" . $name . \"\\n\";}\n\n\nOUTPUT is:\nOBJECT = XML::LibXML::Text=SCALAR(0x262e170)\nOBJECT = XML::LibXML::Text=SCALAR(0x2ee4b00)\nOBJECT = XML::LibXML::Text=SCALAR(0x262e170)\nOBJECT = XML::LibXML::Text=SCALAR(0x2ee4b00)\n</code></pre>\n\n<p>Can anyone please explain why print prints the <code>$name</code> attribute values like this? Why does it print normal when I use the function <code>getAttribute</code> with virtually he same code?</p>\n"}, {"tags": ["windows", "perl", "shell"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1453289209, "post_id": 34896699, "comment_id": 57533955, "body": "What is your pattern?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1453298773, "post_id": 34896699, "comment_id": 57540404, "body": "Re EDIT 1, That won&#39;t work on Windows since it doesn&#39;t have anonymous file."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1453298928, "creation_date": 1453298928, "answer_id": 34902284, "question_id": 34896699, "link": "https://stackoverflow.com/questions/34896699/in-perl-replacement-command-empties-the-file-under-windows/34902284#34902284", "title": "In Perl replacement command empties the file under Windows", "body": "<p>You are mistaken; that works the same on Windows and on unix systems. On either type of systems, you will only get the behaviour you described if the pattern matches every line entirely (including the newline).</p>\n\n<pre><code>&gt;echo foo&gt;file\n\n&gt;echo bar&gt;&gt;file\n\n&gt;echo moo&gt;&gt;file\n\n&gt;perl -pi.bak -e \"s/o//\" file\n\n&gt;type file\nfo\nbar\nmo\n</code></pre>\n"}], "owner": {"reputation": 1150, "user_id": 4808130, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/9ad4b55620d1ceaaf0ce903a0c272224?s=128&d=identicon&r=PG&f=1", "display_name": "user1289", "link": "https://stackoverflow.com/users/4808130/user1289"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453298954, "creation_date": 1453283525, "last_edit_date": 1453285484, "question_id": 34896699, "link": "https://stackoverflow.com/questions/34896699/in-perl-replacement-command-empties-the-file-under-windows", "title": "In Perl replacement command empties the file under Windows", "body": "<p>I have the following command:</p>\n\n<pre><code>perl -pi.bak -e \"s/pattern//\" $file_name\n</code></pre>\n\n<p>When I execute it in perl script, it empties the file (I see .bak file, it wasn't empty). When I execute it in the shell, it works. What can be the problem?</p>\n\n<p>The problem is under Windows, it works fine under Linux.</p>\n\n<p>EDIT 1:\nI tried this one too, it empties also:</p>\n\n<pre><code>sub replace_pattern_in_file\n{\n    my ($file, $pattern, $replacement) = @_;\n\n    open my $in, \"&lt;\", $file;\n    unlink $file;\n\n    open my $out, \"&gt;\", $file;\n    while(my $line = &lt;$in&gt;)\n    {\n        $line =~ s/$pattern/$replacement/g;\n        print $out $line;\n    }\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": false, "score": 1, "last_activity_date": 1453280847, "creation_date": 1453280847, "answer_id": 34895689, "question_id": 34894739, "link": "https://stackoverflow.com/questions/34894739/unexpected-behaviour-of-filehandle-in-conjunction-with-subroutine-call-why/34895689#34895689", "title": "Unexpected behaviour of filehandle in conjunction with subroutine call - why?", "body": "<p>You have a context problem. The <code>$TEST1</code> read is in scalar context, so it only read one line. The <code>$TEST2</code> read is in list context, so all the lines from the file are read and <code>print_line()</code> is called with a list of them as its arguments. So the second time you try to read from <code>$TEST2</code> you get EOF, since all the lines were read the first time.</p>\n"}, {"tags": [], "owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "is_accepted": true, "score": 3, "last_activity_date": 1453280919, "creation_date": 1453280919, "answer_id": 34895709, "question_id": 34894739, "link": "https://stackoverflow.com/questions/34894739/unexpected-behaviour-of-filehandle-in-conjunction-with-subroutine-call-why/34895709#34895709", "title": "Unexpected behaviour of filehandle in conjunction with subroutine call - why?", "body": "<p>In your code <code>print_line(&lt;$FH&gt;);</code> the reading from the filehandle will be will be done in wantarray-mode meaning you don't read a single line but the whole file. And in your subroutine you just use the first line and discard the rest. Thats why the filehandle is empty after your first loop encounter.</p>\n\n<p>You could just provide the filehandle to the subroutine and read a line there:</p>\n\n<pre><code>open my $FH , '&lt;' , 'somefile' or die \"Cannot read: $!\" ;\nwhile( ! eof $FH ) {\n  print_line( $FH ) ;\n}\n\nsub print_line {\n  my ( $fh ) = @_ ;\n\n  my $line = &lt;$fh&gt; ;\n  print $line ;\n}\n</code></pre>\n"}], "owner": {"reputation": 352, "user_id": 4296256, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a95172d4146a185d7b7e7fd69f4d397c?s=128&d=identicon&r=PG&f=1", "display_name": "alisea", "link": "https://stackoverflow.com/users/4296256/alisea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 34895709, "answer_count": 2, "score": 3, "last_activity_date": 1453280919, "creation_date": 1453277715, "question_id": 34894739, "link": "https://stackoverflow.com/questions/34894739/unexpected-behaviour-of-filehandle-in-conjunction-with-subroutine-call-why", "title": "Unexpected behaviour of filehandle in conjunction with subroutine call - why?", "body": "<p>I am reading a file line by line and want to process each line through a subroutine. Since I am not interested in the line itself, I put the read from the filehandle directly into the subroutine call. However, this leads to unexpected behaviour I don't quite understand.</p>\n\n<p>I created a minimal example demonstrating the effect:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Carp;\nuse English qw( -no_match_vars );\n\nprint \"This works as expected:\\n\";\n\nopen my $TEST1, '&lt;', 'filetest1.txt' or croak \"Can't open filetest1.txt - $ERRNO\";          \n\nmy $line1 = &lt;$TEST1&gt;;\nprint_line( $line1 );\n\nwhile ( 1 ) {\n    last if eof $TEST1; \n    $line1 = &lt;$TEST1&gt;;\n    print $line1;\n}\nclose $TEST1;\n\nprint \"\\n\";\nprint \"Unexpected effect here:\\n\";\nopen my $TEST2, '&lt;', 'filetest1.txt' or croak \"Can't open filetest1.txt - $ERRNO\";          \n\nprint_line(&lt;$TEST2&gt;); # this works, but just once\n\nwhile ( 1 ) {\n    last if eof $TEST2; # is triggered immediately\n    print \"This is never printed\\n\";\n    print_line(&lt;$TEST2&gt;);\n}\nclose $TEST2;\n\nsub print_line {\n    my $line = shift;\n    print $line;\n    return 1;\n}\n</code></pre>\n\n<p>Content of filetest1.txt:</p>\n\n<pre><code>test line 1\ntest line 2\ntest line 3\ntest line 4\ntest line 5\n</code></pre>\n\n<p>Result of the script:</p>\n\n<pre><code>This works as expected:\ntest line 1\ntest line 2\ntest line 3\ntest line 4\ntest line 5\nUnexpected effect here:\ntest line 1\n</code></pre>\n\n<p>It seems that when I read the next line directly in the subroutine call, it works exactly once and then eof is triggered. I haven't found any explanation for that effect, and it forces me to create the variable $line1 just to pass the line to the subroutine. </p>\n\n<p>I'm looking for an explanation why that happens, and consequently I'd like to understand the limits of what I can or cannot do with a filehandle. </p>\n"}, {"tags": ["linux", "perl", "file-locking", "flock"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1453282612, "post_id": 34894711, "comment_id": 57529344, "body": "What&#39;s the problem with lock-and-release?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1453287904, "post_id": 34894711, "comment_id": 57532971, "body": "<a href=\"http://unix.stackexchange.com/questions/85994/how-to-list-processes-locking-file\" title=\"how to list processes locking file\">unix.stackexchange.com/questions/85994/&hellip;</a>"}, {"owner": {"reputation": 9, "user_id": 3949322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f06e4e510ed8dd892a9ce2c1b373200c?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Kumar", "link": "https://stackoverflow.com/users/3949322/vimal-kumar"}, "edited": false, "score": 0, "creation_date": 1453288374, "post_id": 34894711, "comment_id": 57533328, "body": "I want child to write to file only when parent is done writing and lock is released from parent. How can i do that? I want a condition like if the file is not locked then start writing to file."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 3949322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f06e4e510ed8dd892a9ce2c1b373200c?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Kumar", "link": "https://stackoverflow.com/users/3949322/vimal-kumar"}, "edited": false, "score": 0, "creation_date": 1453352730, "post_id": 34901958, "comment_id": 57566464, "body": "Thank you for you comments. I found the solution for this. I can check a file is locked using the Linux command &quot;fuser -- &lt;filename&gt;&quot;. It returns process id if it is locked otherwise null. This can be used instead of trying for lock on locked file."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1453298059, "creation_date": 1453298059, "answer_id": 34901958, "question_id": 34894711, "link": "https://stackoverflow.com/questions/34894711/how-to-check-a-file-is-locked-for-writing-in-perl-without-actually-locking-it-ag/34901958#34901958", "title": "How to check a file is locked for writing in perl without actually locking it again?", "body": "<blockquote>\n  <p><em>I want a condition like if the file is not locked then start writing to file.</em></p>\n</blockquote>\n\n<p>You said what you want to do when the file isn't locked, but you didn't say what you want to do when the file is locked. I presume you want to wait for it to become unlocked.</p>\n\n<p>If so, use the following:</p>\n\n<pre><code>open(my $fh, \"&gt;&gt;\", $qfn) or die $!;\nflock($fh, LOCK_EX) or die $!;\nprint($fh ...);\nclose($fh);\n</code></pre>\n\n<p>If you want to clear the file first, do the following after obtaining the lock:</p>\n\n<pre><code>truncate($fh, 0) or die $!;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3949322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f06e4e510ed8dd892a9ce2c1b373200c?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Kumar", "link": "https://stackoverflow.com/users/3949322/vimal-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492443667, "creation_date": 1453277633, "last_edit_date": 1492443667, "question_id": 34894711, "link": "https://stackoverflow.com/questions/34894711/how-to-check-a-file-is-locked-for-writing-in-perl-without-actually-locking-it-ag", "title": "How to check a file is locked for writing in perl without actually locking it again?", "body": "<p>How to check a file is locked for writing in perl. I don't want to use lock again and if it fails it tells that it is being locked by other processes.</p>\n\n<pre><code>flock (FILE, LOCK_EX | LOCK_NB)\n</code></pre>\n\n<p>I don't want to use the above technique since it locks the file if it is not locked by other processes.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 1040, "user_id": 3882175, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/93YQI.jpg?s=128&g=1", "display_name": "Shantesh", "link": "https://stackoverflow.com/users/3882175/shantesh"}, "edited": false, "score": 0, "creation_date": 1453273170, "post_id": 34891472, "comment_id": 57524267, "body": "It is always good to maintain <code>use strict and use warnings</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "is_accepted": true, "score": 6, "last_activity_date": 1453274037, "last_edit_date": 1453274037, "creation_date": 1453263596, "answer_id": 34891552, "question_id": 34891472, "link": "https://stackoverflow.com/questions/34891472/adding-elements-to-an-array-in-perl/34891552#34891552", "title": "Adding elements to an array in Perl", "body": "<p>Since you have the declaration of the array within the loop, it will re-create it each time, removing any values that would have been placed in it on previous iterations of the loop.</p>\n\n<p>You should declaure <code>@arr</code> before the loop if you want the values to stay:</p>\n\n<pre><code>my @arr;\nfor my $d (@num) {\n    ...\n}\n</code></pre>\n\n<p>And because of this line:</p>\n\n<pre><code>$arr[$d];\n</code></pre>\n\n<p><code>$d</code> is the position defined by the other array (0, then 1, then 2). So it puts  the value of <code>$i</code> in that position in the array, and puts values before to <code>undef</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 11, "last_activity_date": 1453268525, "last_edit_date": 1495541718, "creation_date": 1453268525, "answer_id": 34892354, "question_id": 34891472, "link": "https://stackoverflow.com/questions/34891472/adding-elements-to-an-array-in-perl/34892354#34892354", "title": "Adding elements to an array in Perl", "body": "<p>AntonH's <a href=\"https://stackoverflow.com/a/34891552/82262\">answer</a> addresses the specific problem with your specific code, but there are actually ways to rewrite your code that would avoid the problem entirely. A more \"Perlish\" way to accomplish the same thing would be:</p>\n\n<pre><code>my @arr;\n\nfor my $i (0 .. 2) {\n    push(@arr, $i + 10);\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>my @arr = map { $_ + 10 } 0 .. 2;\n</code></pre>\n\n<p>Or just:</p>\n\n<pre><code>my @arr = 10 .. 12;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 4967673, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-CFD91-xlwqQ/AAAAAAAAAAI/AAAAAAAAAJc/bWV6hNYshuc/photo.jpg?sz=128", "display_name": "Scra", "link": "https://stackoverflow.com/users/4967673/scra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16427, "favorite_count": 0, "accepted_answer_id": 34891552, "answer_count": 2, "score": 1, "last_activity_date": 1453274037, "creation_date": 1453263153, "last_edit_date": 1453263471, "question_id": 34891472, "link": "https://stackoverflow.com/questions/34891472/adding-elements-to-an-array-in-perl", "title": "Adding elements to an array in Perl", "body": "<p>I have this code where I want to add 10, 11 and 12 to array arr.</p>\n\n<pre><code>my @num=(0,1,2);\nmy $i=10;\nfor my $d (@num){\n   if (defined($d)) {\n      my @arr;\n      $arr[$d] = $i;\n      $i=$i+1;\n      my $dvv=dump(\\@arr);\n      print \"**** $dvv \\n\";\n   }\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>**** [10]\n**** [undef, 11]\n**** [undef, undef, 12]\n</code></pre>\n\n<p>Why is only the last element of array defined?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1453256716, "post_id": 34890413, "comment_id": 57519192, "body": "I suggest you use the <a href=\"http://metacpan.org/module/IO::Select\" rel=\"nofollow noreferrer\">IO::Select</a> module instead, which wraps the <code>select</code> call in a much tidier API"}], "answers": [{"tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": true, "score": 1, "last_activity_date": 1453273902, "creation_date": 1453273902, "answer_id": 34893655, "question_id": 34890413, "link": "https://stackoverflow.com/questions/34890413/getting-user-input-as-the-program-loop-still-runs/34893655#34893655", "title": "Getting user input as the program loop still runs", "body": "<p><code>select</code> returns the highest file descriptor+1 in case some of the file descriptor was notified. Therefore it will be <code>0</code> if there is nothing on <code>STDIN</code> and 1 in case there is some bytes waiting to be read (note <code>STDIN</code> is fd <code>0</code> so <code>0+1</code> is 1 - the return value).</p>\n"}], "owner": {"reputation": 45, "user_id": 4450202, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WZISDqR0k04/AAAAAAAAAAI/AAAAAAAAACw/KF2FUphHDQc/photo.jpg?sz=128", "display_name": "Jefferson Barbosa", "link": "https://stackoverflow.com/users/4450202/jefferson-barbosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 34893655, "answer_count": 1, "score": 0, "last_activity_date": 1453273902, "creation_date": 1453256288, "question_id": 34890413, "link": "https://stackoverflow.com/questions/34890413/getting-user-input-as-the-program-loop-still-runs", "title": "Getting user input as the program loop still runs", "body": "<p>I have a script that goes basically like this:</p>\n\n<pre><code>sub mainLoop {\n    while (1) {\n        # Do its thing\n    }\n}\n</code></pre>\n\n<p>I don't think the logic is important at all, it's basically constantly checking a server and doing some actions when necessary. But I want to make sure the user can input some commands as the program is running, like a <code>show status</code> or <code>show foo</code>. And print something, like the number of times it had to take action, etc. To sum it up, it needs to read from the STDIN without pausing the loop. </p>\n\n<p>I read the source code of another Perl program that does this. But I'm not sure if I get it:</p>\n\n<pre><code>sub mainLoop {\n    while (1) {\n        # This is just for the sake of of this example\n        my $bits = '';\n        my $line = undef;\n\n        vec($bits, fileno(STDIN), 1) = 1;\n\n        if (select($bits, undef, undef, 0) &gt; 0) {\n            $line = &lt;STDIN&gt;;\n            $line =~ s/\\n//g;\n        }\n\n        if ($line) {\n            # I can work with $line value and call a sub based on its value \n        }\n        # Keep on doing its thing\n    }\n}\n</code></pre>\n\n<p>I don't get the <code>select()</code>. How does it change to a value greater than 0? Because as far as I can tell the value of <code>$bits</code> is the same whether the <code>select()</code> have a value equal to 0 or bigger than 0. So why does the value returned by select changes to a 1 whenever I hit the ENTER key?</p>\n"}, {"tags": ["arrays", "perl", "hash", "hash-of-hashes"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5813329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1d08f9282d3a255575924163769c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5813329/andy"}, "edited": false, "score": 0, "creation_date": 1453254783, "post_id": 34890069, "comment_id": 57518707, "body": "I can&#39;t copy over code direct, so I had to retype it. Added a little context, modified from the camel book examples. I agree that your method would be easier, but the value doesn&#39;t know the group that it belongs to (e.g. Fred doesn&#39;t know he&#39;s on the Flintstones).  Edit: I see what you did... too Perlish to be intuitively obvious. Will try it. Thanks!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 5813329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1d08f9282d3a255575924163769c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5813329/andy"}, "edited": false, "score": 0, "creation_date": 1453255295, "post_id": 34890069, "comment_id": 57518819, "body": "<i>&quot;I can&#39;t copy over code direct&quot;</i> Don&#39;t you have a web browser on the same system as your Perl development? <i>&quot;the value doesn&#39;t know the group that it belongs to&quot;</i> You&#39;re misunderstanding. You still have to loop over the groups, but you can use <code>$what_i_want</code> directly as a key to the parameter hashes"}, {"owner": {"reputation": 1, "user_id": 5813329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1d08f9282d3a255575924163769c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5813329/andy"}, "edited": false, "score": 0, "creation_date": 1453256621, "post_id": 34890069, "comment_id": 57519168, "body": "No, my development machine is on an isolated network.   I see where you looped over the groups, and I do understand about hashes. My perl is quite rusty (~10 years), and my book is quite dusty (2000), so forgive that oversight.  So I learn something from this, the biggest difference I see aside from style and the deletion of the inner loop is the <code>return</code> statement. I&#39;ll have a look at it tomorrow to try to understand what you did and why it works. But it does work, and for that I thank you."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 5813329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1d08f9282d3a255575924163769c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5813329/andy"}, "edited": false, "score": 0, "creation_date": 1453256846, "post_id": 34890069, "comment_id": 57519222, "body": "The core of the solution is <code>ref $ret ? @$ret : $ret</code>, which dereferences <code>$ret</code> as an array if it is a reference, otherwise leaves it alone"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467890171, "last_edit_date": 1467890171, "creation_date": 1453253882, "answer_id": 34890069, "question_id": 34890038, "link": "https://stackoverflow.com/questions/34890038/dereferencing-an-array-reference-from-a-nested-perl-hash/34890069#34890069", "title": "Dereferencing an array reference from a nested Perl hash", "body": "<p>You don't show the subroutine being called in context, but a quick fix would be to put this after the call</p>\n\n<pre><code>@return = @{ $return[0] } if ref $return[0]\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>You're missing the point of hashes. You can access the correct element of the parameter hash by using <code>$what_i_want</code> as a hash key</p>\n\n<p>I suggest you change your subroutine code to look like this</p>\n\n<pre><code>for my $group ( keys %HoH ) {\n\n    my $ret = $HoH{$group}{$what_i_want};\n\n    return unless defined $ret;\n    return ref $ret ? @$ret : $ret;\n}\n</code></pre>\n\n<p>That way it will never return a reference</p>\n\n<p><br/></p>\n\n<hr>\n\n<h2>Update 2</h2>\n\n<p>Here's your complete program modified as I suggested</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy %HoH = (\n    flintstones =&gt; {\n        husband     =&gt; \"fred\",\n        possessions =&gt; [ undef, \"car\", \"record player\", \"rock\" ],\n        pal         =&gt; \"barney\",\n        pets        =&gt; [ \"bird\", \"dinosaur\" ],\n    },\n);\n\nmy @return = get_value('possessions');\n\nuse Data::Dump;\ndd \\@return;\n\nsub get_value {\n\n    my ($wanted) = @_;\n\n    for my $group ( keys %HoH ) {\n\n        my $ret = $HoH{$group}{$wanted};\n\n        if ( defined $ret ) {\n            return ref $ret ? @$ret : $ret;\n        }\n    }\n\n    return;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>[undef, \"car\", \"record player\", \"rock\"]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5813329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a1d08f9282d3a255575924163769c2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/5813329/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467890171, "creation_date": 1453253684, "last_edit_date": 1453255632, "question_id": 34890038, "link": "https://stackoverflow.com/questions/34890038/dereferencing-an-array-reference-from-a-nested-perl-hash", "title": "Dereferencing an array reference from a nested Perl hash", "body": "<p>I hope I've stated that subject correctly. I have a hash of hashes that I've built from reading a file. The outer hash is groups, then the inner hash is parameters within that group. Each parameter value can either be a scalar or array, and the arrays can start at either zero or one.</p>\n\n<p>I've written a subroutine that returns the value of a parameter. The calling function has to figure out whether the returned value is a scalar or an array.  Works fine for scalars. Returns a reference to an array for array values (looks like <code>ARRAY(0x004f00)</code>). Using <code>Data::Dumper</code> spits out data that looks like an array, but I can't figure out how to dereference it in the code. Can someone point to what I'm doing wrong?</p>\n\n<pre><code>%HoH = (\n    flintstones =&gt; {\n        husband     =&gt; \"fred\",\n        possessions =&gt; [ undef, \"car\", \"record player\", \"rock\" ],\n        pal         =&gt; \"barney\",\n        pets        =&gt; [ \"bird\", \"dinosaur\" ],\n    },\n);\n\nget_value(\"possessions\");\n\nsub get_value {\n\n    my $what_i_want = shift;\n\n    @groups = keys(%HoH);\n\n    foreach my $group ( @groups ) {\n\n        foreach my $param ( keys( %{ HoH {group} } ) ) {\n\n            if ( $param eq $what_i_want ) {\n                return $HoH{$group}{$param};\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The caller assigns the return value to an array, <code>@return</code>, so in the case of a scalar it should put the value in <code>$return[0]</code>.</p>\n\n<p>In the case of an array, it should populate the array. When I call <code>Dumper</code>, it prints out scalars in single quotes and arrays in square brackets, as it should. However, when I use <code>scalar(@return)</code> to check the size of the array, it returns 1.</p>\n\n<p>I've tried dereferencing the return statement using square brackets at the end to see if I could even get a scalar returned, but no luck.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1453255374, "post_id": 34889394, "comment_id": 57518842, "body": "The code in update 3 runs without error or warning for me."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453251207, "post_id": 34889490, "comment_id": 57517733, "body": "Here&#39;s how I am populating <code>@events</code>: push (@events, [ $performer, $start_time, $end_time ]);"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 2, "creation_date": 1453251344, "post_id": 34889490, "comment_id": 57517778, "body": "@StevieD Can you <a href=\"http://stackoverflow.com/posts/34889394/edit\">edit</a> your post to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? It will be impossible to troubleshoot your issue without something reproducible."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453251685, "post_id": 34889490, "comment_id": 57517870, "body": "OK, added to bottom."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 2, "creation_date": 1453251849, "post_id": 34889490, "comment_id": 57517919, "body": "@StevieD: The point of creating a verifiable example is that it should display the same misbehaviour as your main code. What you have posted works just fine"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453252393, "post_id": 34889490, "comment_id": 57518089, "body": "Well, that&#39;s what I don&#39;t get. It seems like it should be working. I have other code but it&#39;s superfluous. This is the minimal code. I can post up part of the dumped data structure so you can see it."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453252575, "post_id": 34889490, "comment_id": 57518136, "body": "OK, data posted. It&#39;s the last two elements of @events."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453253118, "post_id": 34889490, "comment_id": 57518293, "body": "@StevieD That particular data looks fine, but I still think you have <i>some</i> data that isn&#39;t fine. The error message you&#39;re getting indicates you&#39;re trying to call a method on something that isn&#39;t an object, so some value in position 1 of one of those arrayrefs isn&#39;t what you think it is."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453253422, "post_id": 34889490, "comment_id": 57518375, "body": "@MattJacob, ok, please look at latest snippet at bottom. I think you can reproduce it with that, though I&#39;m not exactly sure why it doesn&#39;t work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453253589, "post_id": 34889490, "comment_id": 57518413, "body": "@StevieD: There&#39;s no problem either with your dumped data or the new code. Maybe there&#39;s a strange entry at <code>$events[0]</code>?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 2, "creation_date": 1453253617, "post_id": 34889490, "comment_id": 57518417, "body": "@StevieD Can you run this for me? <code>print Dumper([grep { ref($_-&gt;[1]) ne &#39;Time::Piece&#39; } @events])</code>"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453256339, "post_id": 34889490, "comment_id": 57519087, "body": "OK, yeah, there was an element with no time object. Not sure how it got in there because I thought I filtered those out."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453256469, "post_id": 34889490, "comment_id": 57519118, "body": "OK, double checked my logic and I found the problem. Thanks!"}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "edited": false, "score": 0, "creation_date": 1453256584, "post_id": 34889490, "comment_id": 57519157, "body": "I think what threw me is I didn&#39;t think this would cause a fatal error. I figured the elements with proper <code>Time::Piece</code> objects would get processed fine."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 4, "last_activity_date": 1453309272, "last_edit_date": 1453309272, "creation_date": 1453249904, "answer_id": 34889490, "question_id": 34889394, "link": "https://stackoverflow.com/questions/34889394/syntax-for-calling-a-method-on-an-object-inside-of-map/34889490#34889490", "title": "Syntax for calling a method on an object inside of map{}", "body": "<blockquote>\n  <p><code>$_-&gt;[1]</code> is a Time::Piece object that I'm trying to call the <code>epoch</code>\n  method on.</p>\n</blockquote>\n\n<p>You sure about that? </p>\n\n<p>Your data would have to look like this for that to be true:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dump;\nuse Time::Piece;\n\nmy @events = (\n    [0, Time::Piece-&gt;new],\n    [1, Time::Piece-&gt;new],\n    [2, Time::Piece-&gt;new],\n    # ...\n);\n\nmy @epochs = map { $_-&gt;[1]-&gt;epoch } @events;\ndd(\\@epochs);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[1453249703, 1453249703, 1453249703]\n</code></pre>\n\n<p>Since that code obviously works just fine, I'm guessing you have a data problem and not a syntax problem.</p>\n\n<p>Also, assigning the result of <code>map</code> into a hash is probably not what you want, because it will produce a hash where the keys and values are the same \"thing\". Additionally, if your array has an odd number of elements, you'll receive the following warning:</p>\n\n<blockquote>\n  <p>Odd number of elements in hash assignment ...</p>\n</blockquote>\n\n<p>To find \"<a href=\"http://www.sesamestreet.org/\" rel=\"nofollow\">one of these things that's not like the other</a>\", you could:</p>\n\n<pre><code>print Dumper([grep { ref($_-&gt;[1]) ne 'Time::Piece' } @events])\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 34889490, "answer_count": 1, "score": 0, "last_activity_date": 1453309272, "creation_date": 1453249328, "last_edit_date": 1453253335, "question_id": 34889394, "link": "https://stackoverflow.com/questions/34889394/syntax-for-calling-a-method-on-an-object-inside-of-map", "title": "Syntax for calling a method on an object inside of map{}", "body": "<p>This line of code <code>my %web_events = map { $_-&gt;[1]-&gt;epoch } @events;</code></p>\n\n<p>throws this error:</p>\n\n<p><code>Can't call method \"epoch\" without a package or object reference</code></p>\n\n<p><code>$_-&gt;[1]</code> is a <code>Time::Piece</code> object that I'm trying to call the <code>epoch</code> method on.</p>\n\n<p>What is the right syntax here? </p>\n\n<p><em>UPDATE</em></p>\n\n<pre><code>my @events = ();\npush (@events, [ 'Blah', Time::Piece-&gt;new() ]);\nmy %web_events = map { $_-&gt;[1]-&gt;epoch =&gt; 1 } @events;\n</code></pre>\n\n<p><em>UPDATE 2 <code>@events</code> data</em></p>\n\n<pre><code>$VAR23 = [\n           'John Manzi',\n           bless( [\n                    50,\n                    48,\n                    2,\n                    28,\n                    1,\n                    '116',\n                    0,\n                    58,\n                    0,\n                    1456645730,\n                    1\n                  ], 'Time::Piece' ),\n           bless( [\n                    50,\n                    48,\n                    5,\n                    28,\n                    1,\n                    '116',\n                    0,\n                    58,\n                    0,\n                    1456656530,\n                    1\n                  ], 'Time::Piece' )\n         ];\n$VAR24 = [\n           'Christopher John',\n           bless( [\n                    50,\n                    48,\n                    0,\n                    29,\n                    1,\n                    '116',\n                    1,\n                    59,\n                    0,\n                    1456724930,\n                    1\n                  ], 'Time::Piece' ),\n           bless( [\n                    50,\n                    48,\n                    3,\n                    29,\n                    1,\n                    '116',\n                    1,\n                    59,\n                    0,\n                    1456735730,\n                    1\n                  ], 'Time::Piece' )\n         ];\n</code></pre>\n\n<p><em>UPDATE 3</em> </p>\n\n<p>OK, I'm getting closer, it seems that the way I'm storing the object in the anonymous array is wrong. Here's some code that better reflects what I have:</p>\n\n<pre><code>my $t = Time::Piece-&gt;new();\nmy $start = $t + 3600; \nmy @events = ();\npush (@events, [ 'Blah', $start ]);\nmy %web_events = map { $_-&gt;[1]-&gt;epoch =&gt; 1 } @events;\n</code></pre>\n"}, {"tags": ["perl", "parsing", "grammar", "parse-recdescent"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1455596126, "creation_date": 1455596126, "answer_id": 35423626, "question_id": 34889351, "link": "https://stackoverflow.com/questions/34889351/whitespace-important-parsing-with-parserecdescent-eg-haml-python/35423626#35423626", "title": "Whitespace-important parsing with Parse::RecDescent (eg. HAML, Python)", "body": "<p>Far better off doing some of the work outside of PRD.</p>\n\n<pre><code>my @stack = [ -1, [{}] ];\nwhile (&lt;&gt;) {\n   chomp;\n   s/^( *)//;\n   my $indent = length($1);\n\n   if ($indent &lt; $stack[-1][0]) {\n      pop @stack while $indent &lt; $stack[-1][0];\n      die \"Indent mismatch\\n\" if $indent != $stack[-1][0];\n   }\n   elsif ($indent &gt; $stack[-1][0]) {\n      my $children = $stack[-1][1][-1]{children} = [];\n      push @stack, [ $indent, $children ];\n   }\n\n   push @{ $stack[-1][1] }, $parser-&gt;parse_line($_);\n}\n\ndie \"Empty document\\n\" if !$stack[0][1][0]{children};\ndie \"Multiple roots\\n\" if @{ $stack[0][1][0]{children} } &gt; 1;\n\nmy $root = $stack[0][1][0]{children}[0];\n</code></pre>\n\n<p><code>$parser-&gt;parse_line($_)</code> is expected to return a hash ref.</p>\n"}], "owner": {"reputation": 1246, "user_id": 184165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c3169e7f4c83e81188794c7f146a6b3e?s=128&d=identicon&r=PG", "display_name": "Mark Aufflick", "link": "https://stackoverflow.com/users/184165/mark-aufflick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1455596126, "creation_date": 1453249073, "question_id": 34889351, "link": "https://stackoverflow.com/questions/34889351/whitespace-important-parsing-with-parserecdescent-eg-haml-python", "title": "Whitespace-important parsing with Parse::RecDescent (eg. HAML, Python)", "body": "<p>I'm trying to parse HAML (<a href=\"http://haml.info\" rel=\"nofollow\">haml.info</a>) with <a href=\"https://metacpan.org/pod/Parse::RecDescent\" rel=\"nofollow\">Parse::RecDescent</a>. If you don't know haml, the problem in question is the same as parsing Python - blocks of syntax are grouped by the indentation level.</p>\n\n<p>Starting with a very simple subset, I've tried a few approaches but I think I don't quite understand either the greediness or recursive order of P::RD. Given the haml:</p>\n\n<pre><code>%p\n  %span foo\n</code></pre>\n\n<p>The simplest grammar I have that I think should work is (with bits unnecessary for the above snippet):</p>\n\n<pre><code>&lt;autotree&gt;\n\nstartrule           : &lt;skip:''&gt; block(s?)\nnon_space           : /[^ ]/\nspace               : ' '\nindent              : space(s?)\nindented_line       : indent line\nindented_lines      : indented_line(s) &lt;reject: do { Perl6::Junction::any(map { $_-&gt;level } @{$item[1]}) != $item[1][0]-&gt;level }&gt;\nblock               : indented_line block &lt;reject: do { $item[2]-&gt;level &lt;= $item[1]-&gt;level }&gt;\n                    | indented_lines\nline                : single_line | multiple_lines\nsingle_line         : line_head space line_body newline | line_head space(s?) newline | plain_text newline\n\n# ALL subsequent lines ending in | are consumed\nmultiple_lines      : line_head space line_body continuation_marker newline continuation_line(s)\ncontinuation_marker : space(s) '|' space(s?)\ncontinuation_line   : space(s?) line_body continuation_marker\n\nnewline      : \"\\n\"\nline_head    : haml_comment | html_element\nhaml_comment : '-#'\nhtml_element : '%' tag\n\n# TODO: xhtml tags technically allow unicode\ntag_start_char : /[:_a-z]/i\ntag_char       : /[-:_a-z.0-9]/i\ntag            : tag_start_char tag_char(s?)\n\nline_body    : /.*/\nplain_text   : backslash ('%' | '!' | '.' | '#' | '-' | '/' | '=' | '&amp;' | ':' | '~') /.*/ | /.*/\nbackslash    : '\\\\'\n</code></pre>\n\n<p>The problem is in the <code>block</code> definition. As above, it does not capture any of the text, though it does capture the following correctly:</p>\n\n<pre><code>-# haml comment\n%p a paragraph\n</code></pre>\n\n<p>If I remove the second <code>reject</code> line from the above (the one on the first <code>block</code> rule) then it does capture everything, but of course incorrectly grouped since the first block will slurp all lines, irrespective of indentation.</p>\n\n<p>I've also tried using lookahead actions to inspect <code>$text</code> and a few other approaches with no luck.</p>\n\n<p>Can anyone (a) explain why the above doesn't work and/or (b) if there's an approach without using perl actions/rejects? I tried grabbing the number of spaces in the indent, and then using that in an interpolated lookahead condition for the number of spaces in the next line, but I could never quite get the interpolation syntax right (since it requires an arrow operator).</p>\n"}, {"tags": ["linux", "perl", "parallel-processing"], "answers": [{"comments": [{"owner": {"reputation": 1659, "user_id": 1631116, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/da064c2d0ea8fbc4711a0a83dccd79ac?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/1631116/tony"}, "edited": false, "score": 0, "creation_date": 1453303520, "post_id": 34889849, "comment_id": 57543896, "body": "I added some info about the read/write pipe. Also, I inserted the setsid as: POSIX::setsid(); print &quot;child 2 proc $$\\n&quot;; But it didn&#39;t seem to have an effect."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1453252479, "creation_date": 1453252479, "answer_id": 34889849, "question_id": 34889133, "link": "https://stackoverflow.com/questions/34889133/can-i-wait-for-a-specific-child-process-to-terminate-in-perl/34889849#34889849", "title": "Can I wait for a specific child process to terminate in perl", "body": "<p>When I run your script, it doesn't behave in the way you describe.  This may be related to the mechanics of the READ and WRITE handles which you've omitted.</p>\n\n<p>However <em>I think</em> the <code>POSIX::setsid()</code> function does what you want.  It puts a process into its own process group which is disconnected from the controlling TTY of the parent process:</p>\n\n<pre><code>use POSIX qw();\n\n\n# after forking, in the child process that you want to become an orphan\n    POSIX::setsid();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1659, "user_id": 1631116, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/da064c2d0ea8fbc4711a0a83dccd79ac?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/1631116/tony"}, "is_accepted": false, "score": 0, "last_activity_date": 1453402432, "creation_date": 1453402432, "answer_id": 34932021, "question_id": 34889133, "link": "https://stackoverflow.com/questions/34889133/can-i-wait-for-a-specific-child-process-to-terminate-in-perl/34932021#34932021", "title": "Can I wait for a specific child process to terminate in perl", "body": "<p>I ended up using something like below to implement this:</p>\n\n<pre><code>use FileHandle;\npipe(READ, WRITE);\n\nWRITE-&gt;autoflush();\n\nmy $cmd = \"nohup ./test.sh\";\n\nmy $pid1 = fork();\nif ($pid1) {\n  #parent\n  my $kid;\n  $kid = waitpid($pid1, 0);\n  close WRITE;\n  my $msg = &lt;READ&gt;;\n  print \"msg: $msg\\n\";\n  sleep(10);\n} elsif ($pid1 == 0) {\n  #1st child\n  my $pid2 = fork();\n  if ($pid2) {\n    #1st child\n    print WRITE $pid2;\n    exit 0;\n  } elsif ($pid2 == 0) {\n    exec $cmd;\n    exit 0;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 1659, "user_id": 1631116, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/da064c2d0ea8fbc4711a0a83dccd79ac?s=128&d=identicon&r=PG", "display_name": "Tony", "link": "https://stackoverflow.com/users/1631116/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1453402432, "creation_date": 1453247548, "last_edit_date": 1453303145, "question_id": 34889133, "link": "https://stackoverflow.com/questions/34889133/can-i-wait-for-a-specific-child-process-to-terminate-in-perl", "title": "Can I wait for a specific child process to terminate in perl", "body": "<p>Currently, I'm trying to create an orphaned process by having proc A create proc B and proc B create proc C. Then, I want to kill proc B so that proc C is no longer attached to the process tree of proc A. However, I also want to know the process id of proc C in proc A. So far as an example, I have tried:</p>\n\n<pre><code>use FileHandle;\npipe(READ, WRITE);\n\nWRITE-&gt;autoflush();\nmy $pid1 = fork();\nif ($pid1) {\n  #Proc A\n  waitpid($pid1, 0);\n  close WRITE;\n  my $msg = &lt;READ&gt;;\n  print \"msg: $msg\\n\";\n} elsif ($pid1 == 0) {\n  #Proc B\n  my $pid2 = fork();\n  if ($pid2) {\n    #Proc B\n    print WRITE $pid2;\n    exit 0;\n  } elsif ($pid2 == 0) {\n    #Proc C\n    print \"child 2 proc $$\\n\";\n    sleep(5);\n    exit 0;\n  }\n}\n</code></pre>\n\n<p>Unfortunately, running this makes proc A wait for proc C to finish (sleep 5) before it prints the id of proc C which is not what I want. Is there a way to have the waitpid function return once proc B exits?</p>\n\n<p>Alternatively, is there a better way to create an orphan process?</p>\n\n<p>EDIT: added info regarding read/write pipe.</p>\n"}, {"tags": ["perl", "moose"], "answers": [{"tags": [], "owner": {"reputation": 178, "user_id": 3960762, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bqvHi.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/3960762/jonathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1453440771, "creation_date": 1453440771, "answer_id": 34939654, "question_id": 34888638, "link": "https://stackoverflow.com/questions/34888638/writing-a-builder-for-a-moosexclassattribute-in-a-mooserole/34939654#34939654", "title": "Writing a builder for a MooseX::ClassAttribute in a Moose::Role", "body": "<p>Your use of <code>lazy</code> in this context isn't so much a workaround as the correct solution. <code>MooseX::ClassAttribute</code> is implemented as a <code>Moose::Role</code>. Before <code>MyRole</code> is fully composed into <code>Appli</code>, Perl calls <code>class_has</code>, which attempts to call <code>_build_value</code> as a method of the <code>Appli</code> class. Since that method hasn't yet been composed into <code>Appli</code>, <code>MooseX::ClassAttribute</code> dies with the above error. Using <code>lazy</code> defers evaluation of <code>_build_value</code> until after <code>MyRole</code> has been fully composed into <code>Appli</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 3061420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39892c62eb53e904e5c392c652893580?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/3061420/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453440771, "creation_date": 1453244743, "last_edit_date": 1453246500, "question_id": 34888638, "link": "https://stackoverflow.com/questions/34888638/writing-a-builder-for-a-moosexclassattribute-in-a-mooserole", "title": "Writing a builder for a MooseX::ClassAttribute in a Moose::Role", "body": "<p>I want to define a Role with a Class attribute and a builder. This fails whatever I've tried. I found two workaround:</p>\n\n<ol>\n<li>not using a class attribute but a plain attribute. It is problematic in my situation because I would like to modify the attribute (for all instances) in my real code.</li>\n<li>putting the builder into the class (instead of into the role). It is also problematic because it means modifying all classes that use this role.</li>\n</ol>\n\n<p>Here is a minimal example:</p>\n\n<pre><code>package MyRole;\nuse Moose::Role;\nuse MooseX::ClassAttribute;\n\nsub _build_value {\n    return \"in MyRole\";\n}\n\nclass_has 'value' =&gt; (\n    is =&gt; 'ro',\n    isa =&gt; 'Str',\n    builder =&gt; '_build_value',\n);\n\n1;\n\npackage Appli;\nuse Moose;\n\nwith 'MyRole';\n\n1;\n\npackage main;\n\nmy $e=Appli-&gt;new();\n\nprint $e-&gt;value, \"\\n\";\n</code></pre>\n\n<p>And the result:</p>\n\n<pre><code>$ perl ./test.pl \nAppli does not support builder method '_build_value' for attribute 'value' at /usr/share/perl5/MooseX/ClassAttribute/Trait/Attribute.pm line 81.\nClass::MOP::Class:::around(CODE(0x13d6c78), Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460), \"Appli\") called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 164\nMoose::Meta::Class::__ANON__::SERIAL::11::_wrapped__call_builder(Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460), \"Appli\") called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 95\nMoose::Meta::Class::__ANON__::SERIAL::11::_call_builder(Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460), \"Appli\") called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Attribute.pm line 54\nMooseX::ClassAttribute::Trait::Attribute::_initialize(Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Attribute.pm line 32\nClass::MOP::Class:::after(Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 57\nMoose::Meta::Class::__ANON__::SERIAL::11::_wrapped_attach_to_class(Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 95\nMoose::Meta::Class::__ANON__::SERIAL::11::attach_to_class(Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Class.pm line 66\nMooseX::ClassAttribute::Trait::Class::_attach_class_attribute(Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0), Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460)) called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Mixin/HasClassAttributes.pm line 40\nMooseX::ClassAttribute::Trait::Mixin::HasClassAttributes::add_class_attribute(Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0), Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460)) called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Class.pm line 41\nClass::MOP::Class:::around(CODE(0x17fae38), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0), Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 164\nMoose::Meta::Class::__ANON__::SERIAL::10::_wrapped_add_class_attribute(Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0), Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 95\nMoose::Meta::Class::__ANON__::SERIAL::10::add_class_attribute(Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0), Moose::Meta::Class::__ANON__::SERIAL::11=HASH(0x1982460)) called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Application/ToClass.pm line 44\nMooseX::ClassAttribute::Trait::Application::ToClass::_apply_class_attributes(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Application.pm line 13\nClass::MOP::Class:::after(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 57\nMoose::Meta::Class::__ANON__::SERIAL::8::_wrapped_apply_attributes(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 95\nMoose::Meta::Class::__ANON__::SERIAL::8::apply_attributes(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose/Meta/Role/Application.pm line 59\nMoose::Meta::Role::Application::apply(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose/Meta/Role/Application/ToClass.pm line 31\nMoose::Meta::Role::Application::ToClass::apply(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class::__ANON__::SERIAL::10=HASH(0x19683d0)) called at /usr/share/perl5/MooseX/ClassAttribute/Trait/Application/ToClass.pm line 27\nClass::MOP::Class:::around(CODE(0x14ae360), Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class=HASH(0x175d658), HASH(0x1a22b28)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 164\nMoose::Meta::Class::__ANON__::SERIAL::8::_wrapped_apply(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class=HASH(0x175d658), HASH(0x1a22b28)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Class/MOP/Method/Wrapped.pm line 95\nMoose::Meta::Class::__ANON__::SERIAL::8::apply(Moose::Meta::Class::__ANON__::SERIAL::8=HASH(0x1a29940), Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class=HASH(0x175d658), HASH(0x1a22b28)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose/Meta/Role.pm line 472\nMoose::Meta::Role::apply(Moose::Meta::Class::__ANON__::SERIAL::1=HASH(0x1a27298), Moose::Meta::Class=HASH(0x175d658)) called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose/Util.pm line 172\nMoose::Util::_apply_all_roles(Moose::Meta::Class=HASH(0x175d658), undef, \"MyRole\") called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose/Util.pm line 114\nMoose::Util::apply_all_roles(Moose::Meta::Class=HASH(0x175d658), \"MyRole\") called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose.pm line 59\nMoose::with(Moose::Meta::Class=HASH(0x175d658), \"MyRole\") called at /usr/lib/x86_64-linux-gnu/perl5/5.22/Moose/Exporter.pm line 419\nMoose::with(\"MyRole\") called at ./test.pl line 20\n</code></pre>\n\n<p><strong>Update:</strong> I workaround it by adding 'lazy => 1'. Then it works perfectly. Without 'lazy', the builder is probably called before the role is fully imported.</p>\n"}, {"tags": ["ruby-on-rails", "perl", "authentication", "soap", "httprequest"], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "is_accepted": false, "score": 0, "last_activity_date": 1453242209, "creation_date": 1453242209, "answer_id": 34888105, "question_id": 34887987, "link": "https://stackoverflow.com/questions/34887987/soap-request-in-ruby-with-authentication-credentials/34888105#34888105", "title": "SOAP request in ruby with authentication/credentials", "body": "<p>Have you looked at <code>savon</code> gem, <a href=\"https://github.com/savonrb/savon\" rel=\"nofollow\">https://github.com/savonrb/savon</a>?</p>\n"}], "owner": {"reputation": 3795, "user_id": 4926817, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/0lH0y.png?s=128&g=1", "display_name": "Noam Hacker", "link": "https://stackoverflow.com/users/4926817/noam-hacker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453242209, "creation_date": 1453241743, "last_edit_date": 1495541718, "question_id": 34887987, "link": "https://stackoverflow.com/questions/34887987/soap-request-in-ruby-with-authentication-credentials", "title": "SOAP request in ruby with authentication/credentials", "body": "<p>I am trying to send XML/SOAP data to a server using an http POST request, and am starting by converting a working Perl script to Ruby on Rails. Using <a href=\"http://coderberry.me/blog/2008/12/19/creating-custom-soap-requests-with-ruby-and-net-http/\" rel=\"nofollow noreferrer\">some</a> <a href=\"https://stackoverflow.com/questions/1184802/making-a-soap-request-by-using-xml-in-rails\">resources</a>, I have written some preliminary code, but I am unsure how to add user authentication (running this code causes a connection timeout error). </p>\n\n<p>My code so far:</p>\n\n<pre><code>http = Net::HTTP.new(' [host] ', [port])\npath = '/rest/of/the/path'\ndata = [ XML SOAP string ]\nheaders = {\n  'Content-Type' =&gt; 'application/atom+xml',\n  'Host' =&gt; ' [host] '\n}\nresp, data = http.post(path, data, headers)\n</code></pre>\n\n<p>Adding <code>http.basic_auth 'user', 'pass'</code> gave me a no method error</p>\n\n<p>Perl code for supplying credentials: </p>\n\n<pre><code>my $ua = new LWP::UserAgent(keep_alive=&gt;1);\n$ua-&gt;credentials($netloc, '', \"$user\", \"$pwd\");\n...\nmy $request = POST ($url, Content_Type=&gt; 'application/atom+xml', Content=&gt; $soap_req);\nmy $response = $ua-&gt;request($request);\n</code></pre>\n\n<p>the server uses NTLM, so maybe there is a gem you could recommend (<a href=\"http://httpirb.com/#requests\" rel=\"nofollow noreferrer\">like this?</a>). It looks like the Perl script is using user agents, so I would like to do something similar in Ruby. In summary, how do I add user authentication to my request?</p>\n"}, {"tags": ["xml", "perl", "libxml2"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453231937, "post_id": 34885398, "comment_id": 57508509, "body": "We&#39;re going to need a bit more detail - &quot;have not been making any traction&quot; doesn&#39;t tell us what&#39;s not working. (some XML and desired modification examples would help), We also could use an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to test with."}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453232095, "post_id": 34885398, "comment_id": 57508613, "body": "I&#39;ll add more detail."}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453235210, "post_id": 34885398, "comment_id": 57510582, "body": "@ikegami I added code so hopefully it should work. I got one piece of what I was doing to work, so I updated the description with the current problem and code."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453235843, "post_id": 34885398, "comment_id": 57510979, "body": "#1: Check if <code>$root-&gt;findnodes(&#39;&#47;reports&#47;host[@name=&quot;Workstation02&quot;]&#39;)</code> returns nodes."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453235935, "post_id": 34885398, "comment_id": 57511032, "body": "#2: Matching the spacing is hard. Might be better to reformat the whole docs, e.g. by using XML::LibXML::PrettyPrint."}, {"owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "edited": false, "score": 0, "creation_date": 1453236130, "post_id": 34885398, "comment_id": 57511182, "body": "Not sure if this is the cause, but definitely it&#39;s not correct to add node created in one XML to completely different XML."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453236571, "post_id": 34885398, "comment_id": 57511444, "body": "Indeed &quot;<i>Also addChild() will not check if the added node belongs to the same document as the node it will be added to. <b>This could lead to</b> inconsistent documents and in more worse cases even to <b>memory violations</b>, if one does not keep track of this issue.</i>&quot; Use <code>appendChild</code> instead of <code>addchild</code> if you want to transfer a node from one document to another."}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453236572, "post_id": 34885398, "comment_id": 57511445, "body": "@ikegami Thanks! #1 worked!"}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453237005, "post_id": 34885398, "comment_id": 57511718, "body": "@ikegami Using appendChild works in the same way, I still get the messed up appended text. Why is -&gt;toString(1) not working to add the line breaks?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453237160, "post_id": 34885398, "comment_id": 57511820, "body": "Re &quot;Using appendChild works in the same way&quot;, No, not at all &quot;<i>if the new node is not part of the document, the node will be imported first.</i>&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453237251, "post_id": 34885398, "comment_id": 57511864, "body": "Re &quot;Why is -&gt;toString(1) not working to add the line breaks?&quot;, I&#39;d post an answer if I knew. Maybe because there&#39;s no DTD telling it&#39;s safe to do so?"}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453240068, "post_id": 34885398, "comment_id": 57513488, "body": "FIXED! Using information from this post <a href=\"http://stackoverflow.com/questions/7215316/how-can-i-auto-indent-xml-nodes-with-xmllibxml\" title=\"how can i auto indent xml nodes with xmllibxml\">stackoverflow.com/questions/7215316/&hellip;</a> that I will include in my comment. Thanks for the help, @ikegami"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453294306, "post_id": 34885398, "comment_id": 57537295, "body": "Don&#39;t post answers in the question; post them as an answer"}], "owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 412, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1453709875, "creation_date": 1453231817, "last_edit_date": 1453709875, "question_id": 34885398, "link": "https://stackoverflow.com/questions/34885398/append-data-to-an-xml-file-with-perl-xmllibxml", "title": "Append data to an XML file with perl XML::LibXML", "body": "<p>I have a script that creates an XML file. I need to modify it so that it instead opens the file, goes to the <code>&lt;reports&gt;</code> tag, and then either finds the appropriate <code>&lt;host name=\"$myName\"&gt;</code> section and replace it, or add a new <code>&lt;host name=\"$myName\"&gt;</code> tag. Everything I have tried up until now doesn't work right.</p>\n\n<p>Here are the issues I'm having:\n <strong>Issue #1</strong> How do I check if a workstation is already in the report, and replace that element if it is?\n <strong>Issue #2</strong> The host entries from the appended file do are all crammed into 1 line instead of being broken out neatly. So, instead of getting this:</p>\n\n<p>Input:</p>\n\n<pre><code>&lt;reports&gt;\n  &lt;host name=\"Workstation01\"&gt;\n    ....\n  &lt;/host&gt;\n&lt;/reports&gt;\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>&lt;reports&gt;\n  &lt;host name=\"Workstation01\"&gt;\n    ....\n  &lt;/host&gt;\n  &lt;host name=\"Workstation02\"&gt;\n    ....\n  &lt;/host&gt;\n&lt;/reports&gt;\n</code></pre>\n\n<p>I get this:</p>\n\n<pre><code>&lt;reports&gt;\n  &lt;host name=\"Workstation01\"&gt;\n    ....\n  &lt;/host&gt;&lt;host name=\"Workstation02\"&gt;....&lt;/host&gt;&lt;host name=\"Workstation02\"&gt;....&lt;/host&gt;&lt;/reports&gt;\n</code></pre>\n\n<p>I'm attempting to create a new XML object, read in the XML file, $report = $root->findnodes(\"/reports\"), then do $report->appendChild($host), but have not been making any traction.</p>\n\n<pre><code>use XML::LibXML;\n\nmy $saveFile = \"reports/test.xml\";\n\nmy $XML = XML::LibXML::Document-&gt;new('1.0', 'utf-8');\nmy $report = $XML-&gt;createElement('reports');\n\nmy $host = $XML-&gt;createElement('host');\n$host-&gt;setAttribute('name', 'Workstation02');\n\n# Create a new XML object to store the file so we can modify it\nmy $XML2 = XML::LibXML-&gt;new;\nmy $file = $XML2-&gt;parse_file($saveFile);\nmy $root = $file-&gt;getDocumentElement();\nmy @nodes = $root-&gt;findnodes(\"/reports\");\n\n$report = $nodes[0];\n$report-&gt;addChild($host);\n\n$file-&gt;setDocumentElement($report);\nprint $file-&gt;toString(1);\n</code></pre>\n\n<p>The saving a new file part works, but I can't figure out why the append section is not working.</p>\n\n<p><strong>Issue #1, search and replace an element</strong></p>\n\n<p>I had a lot of trouble getting this to work right because it always did weird things to the file. So, my workaround, was to clear out all childNodes, add the new host, then use perl to erase the blank entry that we cleared out.</p>\n\n<pre><code>foreach my $element ( $root-&gt;findnodes('/reports/host[@name=\"Workstation02\"]'))\n{\n  $element-&gt;removeChildNodes();\n}\n</code></pre>\n\n<p>Then at the end I just searched for <code>&lt;name=\"Workstation02\"/&gt;</code> with perl and erased that line before saving.   </p>\n\n<p><strong>Issue #2, file now outputs the correct XML</strong></p>\n\n<pre><code>my $file = $XML-&gt;load_xml(location =&gt; $saveFile, { no_blanks =&gt; 1 });\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1453320568, "post_id": 34885413, "comment_id": 57554742, "body": "Is the <code>?:</code> in the grouping necessary?"}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1453345996, "post_id": 34885413, "comment_id": 57564657, "body": "@stevesliva Not really of u r just validating"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": true, "score": 4, "last_activity_date": 1453231869, "creation_date": 1453231869, "answer_id": 34885413, "question_id": 34885383, "link": "https://stackoverflow.com/questions/34885383/perl-re-to-check-string-values-separated-by-comma/34885413#34885413", "title": "Perl RE to check string values separated by comma", "body": "<pre><code>^CRs:\\s+\\d+(?:,\\s+\\d+)*$\n</code></pre>\n\n<p>Use anchors to make a string match.See demo.</p>\n\n<p><a href=\"https://regex101.com/r/iJ7bT6/16\" rel=\"nofollow\">https://regex101.com/r/iJ7bT6/16</a></p>\n"}, {"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 3, "last_activity_date": 1453231902, "creation_date": 1453231902, "answer_id": 34885423, "question_id": 34885383, "link": "https://stackoverflow.com/questions/34885383/perl-re-to-check-string-values-separated-by-comma/34885423#34885423", "title": "Perl RE to check string values separated by comma", "body": "<p>You need to check for repetition:</p>\n\n<pre><code>...\nif ( $message !~ m/^CRs:\\s+\\d+(?:,\\s+\\d+)*$/ ) {\n  print \"ERROR\";\n}\n...\n</code></pre>\n\n<p><code>*</code> after the end of the non-capturing group means to match zero or more times</p>\n\n<p>You can also use anchors <code>^</code> (start of line) and <code>$</code> (end of line) to ensure that you aren't getting a partial match. I.e. <code>123, 456, 789 aaaaaa</code> would be valid without the end of line anchor.</p>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 34885413, "answer_count": 2, "score": 1, "last_activity_date": 1453231902, "creation_date": 1453231749, "question_id": 34885383, "link": "https://stackoverflow.com/questions/34885383/perl-re-to-check-string-values-separated-by-comma", "title": "Perl RE to check string values separated by comma", "body": "<p>How do I check <code>$message</code> has value strictly following the format <code>CRs: &lt;numbers separated by comma and a space&gt;</code></p>\n\n<pre><code> e.g:\n #good\n CRs: 1234, 2345, 6789 \n CRs: 54321\n\n #bad ones:\n CRs: 1234 2345 6789\n CRs: 1234 , 2345 , 6789\n CRs: 1234,2345,6789\n</code></pre>\n\n<p>I have an incomplete RE as below:</p>\n\n<pre><code>if ($message !~ m/CRs:\\s+\\d+,?/) {\n      print \"ERROR\";\n}\n</code></pre>\n"}, {"tags": ["perl", "net-ftp"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1453226842, "post_id": 34883883, "comment_id": 57505594, "body": "Doesn&#39;t <code>ls</code> simply return a list of file/directory <i>names</i>? If so, and those entries don&#39;t reside on the local machine the script is running on, the entries won&#39;t be a file, they won&#39;t be a directory and they won&#39;t exist. You need to <code>get</code> the data before you can test against it."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1453226990, "post_id": 34883883, "comment_id": 57505694, "body": "From <a href=\"http://search.cpan.org/~shay/libnet-3.08/lib/Net/FTP.pm\" rel=\"nofollow noreferrer\">Net::FTP&#39;s ls() documentation</a>: &quot;Get a directory listing of DIR, or the current directory.&quot; ...just a listing, not the entities themselves."}, {"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1453228748, "post_id": 34883883, "comment_id": 57506748, "body": "An embarassing thanks!"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1453228846, "post_id": 34883883, "comment_id": 57506809, "body": "Hey, no worries! It happens to everyone :D"}], "answers": [{"comments": [{"owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "edited": false, "score": 0, "creation_date": 1453281381, "post_id": 34884272, "comment_id": 57528501, "body": "Thanks. Is it possible to test file and directories without fetch them? The goal of my code was to get a list (txt-file) of directories and files to see in which directories are which files. The problem is that some files don&#39;t have extension. Before the appearance of file without extension I could distinguish directory and files with <code>ls</code> an <code>$x =~ &#47;\\.&#47;</code>  respectively <code>$x !~ &#47;\\.&#47;</code>."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1453228819, "last_edit_date": 1453228819, "creation_date": 1453227895, "answer_id": 34884272, "question_id": 34883883, "link": "https://stackoverflow.com/questions/34883883/perl-does-file-and-directory-testing-not-work-with-netftp/34884272#34884272", "title": "Perl: Does file and directory testing not work with Net::FTP", "body": "<p>Per my comments in the OP, <code>ls</code> simply returns a list of names of the entities, it does not fetch them to the local machine. To <code>get</code> files along with directories, you'll need to use <code>Net::FTP::Recursive</code>. Here's an example:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Net::FTP::Recursive;\n\nmy $host = 'localhost';\nmy $user = 'xx';\nmy $password = 'xx';\n\nmy $f = Net::FTP::Recursive-&gt;new($host) or die \"Can't open $host\\n\";\n$f-&gt;login($user, $password) or die \"Can't log $user in\\n\";\n\nmy @content = $f-&gt;ls;\n\n@content = grep ! /^\\.+$/, @content;\n\n# note the rget() below, not just get. It's recursive\n\n$f-&gt;rget($_) for @content;\n\nforeach my $x (@content) {\n\n    print \"\\n$x: \";\n    if ( -f $x ) {print \" ----&gt; (1)\";} else {print \" ----&gt; (2)\";}\n    if ( -d $x ) {print \" ----&gt; (3)\";} else {print \" ----&gt; (4)\";}\n    if ( -e $x ) {print \" ----&gt; (5)\";} else {print \" ----&gt; (6)\";}\n}\n</code></pre>\n\n<p>Example output:</p>\n\n<pre><code>a.txt:  ----&gt; (1) ----&gt; (4) ----&gt; (5)\ndir_a:  ----&gt; (2) ----&gt; (3) ----&gt; (5)\n</code></pre>\n"}], "owner": {"reputation": 2197, "user_id": 1236569, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f0f377976002909c580d08c57f3c3676?s=128&d=identicon&r=PG", "display_name": "giordano", "link": "https://stackoverflow.com/users/1236569/giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 34884272, "answer_count": 1, "score": 0, "last_activity_date": 1453228819, "creation_date": 1453226561, "question_id": 34883883, "link": "https://stackoverflow.com/questions/34883883/perl-does-file-and-directory-testing-not-work-with-netftp", "title": "Perl: Does file and directory testing not work with Net::FTP", "body": "<p>I would like to test files and directories which I downloaded with ftp if they are files or directories. With the code below I always get the else statement (<em>2,4,6</em>) what ever <code>$x</code> is (file or directory). What is wrong with this code?</p>\n\n<pre><code>use Net::FTP;\n\nmy $host = \"whatever\";\nmy $user = \"whatever\";\nmy $password = \"whatever\";\n\nmy $f = Net::FTP-&gt;new($host) or die \"Can't open $host\\n\";\n$f-&gt;login($user, $password) or die \"Can't log $user in\\n\";\n\n# grep all folder of top level\nmy @content = $f-&gt;ls;\n\n# remove . and ..\n@content = grep ! /^\\.+$/, @content;\n\nforeach my $x (@content) {\n\n    print \"\\n$x: \";\n    if ( -f $x ) {print \" ----&gt; (1)\";} else {print \" ----&gt; (2)\";}\n    if ( -d $x ) {print \" ----&gt; (3)\";} else {print \" ----&gt; (4)\";}\n    if ( -e $x ) {print \" ----&gt; (5)\";} else {print \" ----&gt; (6)\";}\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 0, "last_activity_date": 1453225498, "last_edit_date": 1453225498, "creation_date": 1453223959, "answer_id": 34883069, "question_id": 34882665, "link": "https://stackoverflow.com/questions/34882665/splitting-strings/34883069#34883069", "title": "Splitting strings", "body": "<pre><code>my ($lhs, $rhs) = split(/=/, $string);\nmy @lhs_leaves = $lhs =~ /\\.(\\w+)/g;\nmy @rhs_leaves = $rhs =~ /\\.(\\w+)/g;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1453223994, "creation_date": 1453223994, "answer_id": 34883082, "question_id": 34882665, "link": "https://stackoverflow.com/questions/34882665/splitting-strings/34883082#34883082", "title": "Splitting strings", "body": "<p>Use a regex to extract the strings from the left and right hand sides.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $string = 'in.a+in.b=in.c';\n\nmy ($lhs, $rhs) = split /=/, $string;\nmy @left  = $lhs =~ /\\.(\\w+)/g;\nmy @right = $rhs =~ /\\.(\\w+)/g;\n\nprint \"Left: @left.\\nRight: @right.\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1453225012, "last_edit_date": 1453225012, "creation_date": 1453224379, "answer_id": 34883235, "question_id": 34882665, "link": "https://stackoverflow.com/questions/34882665/splitting-strings/34883235#34883235", "title": "Splitting strings", "body": "<pre><code>my $string = \"in.a+in.b=in.c\";\nmy @parts = map { [ /\\.(\\w+)/g ] } split(/=/, $string);\n</code></pre>\n\n<p>The bits on the left-hand side will be in <code>$parts[0]</code>, and the bits on the right-hand side will be in <code>$parts[1]</code>. Here's a <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow\">Data::Dumper</a> representation of the result:</p>\n\n<pre><code>$VAR1 = [\n          [\n            'a',\n            'b'\n          ],\n          [\n            'c'\n          ]\n        ];\n</code></pre>\n\n<p>And here's a usage example:</p>\n\n<pre><code>print \"Left-hand side: @{$parts[0]}\\n\";\nprint \"Right-hand side: @{$parts[1]}\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Left-hand side: a b\nRight-hand side: c\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3021715, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/26b7ede56d475ff25d1a1bf8da58c103?s=128&d=identicon&r=PG&f=1", "display_name": "Dora", "link": "https://stackoverflow.com/users/3021715/dora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 34883069, "answer_count": 3, "score": 2, "last_activity_date": 1453242816, "creation_date": 1453222826, "last_edit_date": 1453242816, "question_id": 34882665, "link": "https://stackoverflow.com/questions/34882665/splitting-strings", "title": "Splitting strings", "body": "<p>I have string like this:</p>\n\n<pre><code>in.a+in.b=in.c\n</code></pre>\n\n<p>I want to put the characters that are next to the dot (i.e., <code>a</code> and <code>b</code>) on the left-hand side in one list and the other character, which is on the right-hand side (i.e., <code>c</code>) in another list. Can you please help me with the code?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $string=\"in.a+in.b=in.c\";\nmy @chars=split(\"=\",$string);\nprint \"First: @chars\";\n</code></pre>\n\n<p><em>Note:</em> the \"equal to\" operator will be there, but any number of characters can be there on the left-hand or right-hand side. So I just want to put the characters that are next to the <code>.</code> in one list.</p>\n"}, {"tags": ["perl", "lwp"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453217253, "post_id": 34880555, "comment_id": 57499190, "body": "That&#39;s what I meant with screen scraping. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453217331, "post_id": 34880555, "comment_id": 57499250, "body": "@simbabque: I prefer <i>Mojolicious</i> for this sort of job, but somehow it&#39;s hard to persuade people to use it. <code>HTML::TreeBuilder</code> is getting a little long in the tooth nowadays"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453217500, "post_id": 34880555, "comment_id": 57499369, "body": "I would have suggested <i>Web::Scraper</i>. I like that a lot for simple scraping. <i>WWW::Mechanize</i> would have worked here, too. I&#39;m not the biggest Mojo fan though their HTML parser is really strong. I think I don&#39;t like their roll-your-own attitude."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 2, "creation_date": 1453221197, "post_id": 34880555, "comment_id": 57502017, "body": "@simbabqe: Instead of &quot;would have suggested&quot;, post a Web::Scraper answer. If you have a different way to do it, add it to StackOverflow."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467625005, "last_edit_date": 1467625005, "creation_date": 1453216954, "answer_id": 34880555, "question_id": 34879954, "link": "https://stackoverflow.com/questions/34879954/how-to-find-string-in-html-response/34880555#34880555", "title": "How to find string in HTML response", "body": "<p>I suggest that you use <a href=\"http://metacpan.org/module/HTML::TreeBuilder\" rel=\"nofollow\"><code>HTML::TreeBuilder</code></a> which will process the HTML for you and allow you to navigate the resulting structure</p>\n\n<p>The code would look like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse HTML::TreeBuilder;\n\nmy $client_ip  = '129.168.1.50:80';\nmy $client_url = \"http://$client_ip/conf\";\n\nmy $tree = HTML::TreeBuilder-&gt;new_from_url($client_url);\n\nmy $version;\n\nfor my $p ( $tree-&gt;look_down(_tag =&gt; 'p') ) {\n    my $text =  $p-&gt;as_trimmed_text;\n    if ( $text =~ / version /ix ) {\n        $version = $text;\n        last;\n    }\n}\n\nprint $version, \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453221365, "post_id": 34882046, "comment_id": 57502120, "body": "Perhaps <code>my $version = $tx-&gt;res-&gt;dom-&gt;find( &#39;h1 &gt; p&#39; )-&gt;[0]-&gt;text</code>? There&#39;s no need to extract the text content of all the elements found."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1453221141, "creation_date": 1453221141, "answer_id": 34882046, "question_id": 34879954, "link": "https://stackoverflow.com/questions/34879954/how-to-find-string-in-html-response/34882046#34882046", "title": "How to find string in HTML response", "body": "<p>Here's a <a href=\"http://mojolicious.org/perldoc/Mojo/UserAgent\" rel=\"nofollow\">Mojo</a> example. There are a few differences between LWP::UserAgent and <a href=\"http://mojolicious.org/perldoc/Mojo/UserAgent\" rel=\"nofollow\">Mojo::UserAgent</a> that make it worth it for me. First, the <code>get</code> returns a transaction that knows about the request and the response. That may not be important here, but I find I often want it. Next, I can immediately get a DOM object and call <code>find</code> on it with CSS selectors, such as <code>h1 &gt; p</code> which means \"the p after h1\". From that I get a collection which I can call <code>map</code> on. In this case, I tell <code>map</code> to call the <code>text</code> method on each item from the collection of found thingys:</p>\n\n<pre><code>use Mojo::UserAgent;\n\nmy $url = \"http://$user:$password\\@$clientIP/conf\";\n\nmy $ua = Mojo::UserAgent-&gt;new;\n\nmy $tx   = $ua-&gt;get($url);\n\nmy( $version ) = $tx-&gt;res-&gt;dom-&gt;find( 'h1 &gt; p' )-&gt;map( 'text' );\n</code></pre>\n\n<p>The last thing I like is that Mojolicious is self-contained. I don't have to install multiple things and risk something outside of Mojo breaking part of the installation process.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 5810920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6376127f1f70e647ba67dfea847689?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/5810920/jens"}, "is_accepted": true, "score": -1, "last_activity_date": 1453289699, "creation_date": 1453289699, "answer_id": 34898926, "question_id": 34879954, "link": "https://stackoverflow.com/questions/34879954/how-to-find-string-in-html-response/34898926#34898926", "title": "How to find string in HTML response", "body": "<p>Thanks for your help. The regular expression is the simplest solution.</p>\n\n<pre><code># Remove all wordwraps\nwhile($body=~s/[\\n\\r\\l]//){} \nmy $ver='unknown'; # Default version\nif($body=~/version\\s*([0-9\\.]+)/i){$ver=$1;}\nprint \"\\n\" . $ver . \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5810920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c6376127f1f70e647ba67dfea847689?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/5810920/jens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 34898926, "answer_count": 3, "score": 1, "last_activity_date": 1467625005, "creation_date": 1453215332, "last_edit_date": 1453216848, "question_id": 34879954, "link": "https://stackoverflow.com/questions/34879954/how-to-find-string-in-html-response", "title": "How to find string in HTML response", "body": "<p>I have written a script to login to a web page and print the response. Now I want to find a string in the HTML response, but I don't know how.</p>\n\n<p>My current code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\n\n\nmy $clientIP = \"129.168.1.50:80\";\nmy $clientURL = \"http://\" . $clientIP . \"/conf\";\n\n## User Agent (UA)\nmy $ua=LWP::UserAgent-&gt;new;\n$ua-&gt;timeout(10);\n\n$ua-&gt;credentials($clientIP, 'Secure Area', 'user', 'pa$$word');\n\nmy $page = $ua-&gt;get($clientURL);\nmy $body = $page-&gt;content();\nprint $body;\n</code></pre>\n\n<p>Current print output from <code>$body</code>:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"&gt;\n&lt;title&gt;configuration&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n        &lt;h1&gt;Client&lt;/h1&gt;\n        &lt;p&gt;\n                Version\n                2.16.4.9&lt;/p&gt;\n        &lt;a href=\"settings\"&gt;Settings&lt;/a&gt;\n        &lt;br&gt;\n        &lt;a href=\"updateskin\"&gt;Update skin&lt;/a&gt;\n        &lt;br&gt;\n        &lt;a href=\"updatesettings\"&gt;Update settings&lt;/a&gt;\n        &lt;br&gt;\n        &lt;p&gt;Software Solutions&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>How can I find the version string and number in the response and write it to a variable?</p>\n\n<p>The goal of the script is to get the version number and write it to a file.</p>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "edited": false, "score": 0, "creation_date": 1453270756, "post_id": 34879038, "comment_id": 57523332, "body": "I got it for print the return hash by mongodb.my $people = $people_coll-&gt;find; while (my $p = $people-&gt;next) {     print Dumper $p; }"}], "answers": [{"tags": [], "owner": {"reputation": 919, "user_id": 5513684, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/961769367178033/picture?type=large", "display_name": "Steven Carlson", "link": "https://stackoverflow.com/users/5513684/steven-carlson"}, "is_accepted": false, "score": 1, "last_activity_date": 1453244874, "creation_date": 1453244874, "answer_id": 34888669, "question_id": 34879038, "link": "https://stackoverflow.com/questions/34879038/how-to-connect-db-in-mongodb-and-fetch-the-data-from-collection-in-perl/34888669#34888669", "title": "how to connect db in mongodb and fetch the data from collection in perl", "body": "<p>You are missing a lot of pieces, let me try and help you out:</p>\n\n<pre><code>$client = MongoDB::MongoClient-&gt;new(\"host\" =&gt; \"your-server-here:port\");\n$client-&gt;connect;\n\n# Not sure if you are using auth or not, you need to specify the collection you authenticate against\n$client-&gt;authenticate('user-collection', 'user', 'pass');\n\n$database = $client -&gt; get_database('temp_db');\n$document = $database -&gt; get_collection('tbl_ads')-&gt;find_one({\"user_id\"=&gt;\"11\"});\n\nprint Dumper $document;\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 5709891, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/d02aec741e53d5f3f97de2c9e317342a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh", "link": "https://stackoverflow.com/users/5709891/ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1453244874, "creation_date": 1453212793, "question_id": 34879038, "link": "https://stackoverflow.com/questions/34879038/how-to-connect-db-in-mongodb-and-fetch-the-data-from-collection-in-perl", "title": "how to connect db in mongodb and fetch the data from collection in perl", "body": "<p>I have used perl 5.16 V and MongoDB 3.2.1 Version.\nI use the below code but data not fetch. Is any issue in my code?</p>\n\n<pre><code>############################################\nstored data in collection tbl_ads\n&gt; db.tbl_ads.find()\n{ \"_id\" : \"103607835\" \"title\" : \"Massief Grenen Parket Winterprijs -50\",\"user_id\" : \"11\", \"website_id\" : \"1\" }\n##########################################################\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse MongoDB;\nuse Data::Dumper;\n\n\nmy $client = MongoDB::Connection-&gt;new;\nmy $db   = $client-&gt;get_database( 'temp_db' );\n\nmy $people_coll = $db-&gt;get_collection(\"tbl_ads\");\nmy $ad_hash = $people_coll-&gt;find({\"user_id\"=&gt;\"11\"});\nprint Dumper $ad_hash;\n</code></pre>\n"}, {"tags": ["xml", "perl", "foreach"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1453210945, "post_id": 34878275, "comment_id": 57494524, "body": "Your question title is very bad. Please <a href=\"https://stackoverflow.com/posts/34878275/edit\">edit</a> your question and change the title to say what you want to do. Click-bait does not work here. Also I don&#39;t understand what you actually want to do. In addition, it&#39;s good that you have <code>use strict</code>, but your code will not compile. Please change the code and make it work, and also indent it while you&#39;re at it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453211492, "post_id": 34878275, "comment_id": 57494918, "body": "<i>&quot;My code snippet goes something like this&quot;</i> Why have you posted <i>something like</i> your actual code? What you have shown won&#39;t compile, and we stand no chance of helping you if we are working on a problem different from the real one"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453213422, "post_id": 34878672, "comment_id": 57496301, "body": "This includes the <code>name</code> attributes of element <code>iodirection</code> and prints all values regardless of their frequency"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1453211730, "creation_date": 1453211730, "answer_id": 34878672, "question_id": 34878275, "link": "https://stackoverflow.com/questions/34878275/count-duplicate-xml-attribute-values-using-xmlsimple/34878672#34878672", "title": "Count duplicate XML attribute values using XML::Simple", "body": "<p>Don't use XML::Simple.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nuse XML::LibXML;\nmy $xml = 'XML::LibXML'-&gt;load_xml(location =&gt; shift);\n\nmy %names;\n$names{ $_-&gt;value } = 1 for $xml-&gt;findnodes('//*[not(*)]/@name');  # Leaf nodes only.\nsay for keys %names;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1467890234, "last_edit_date": 1467890234, "creation_date": 1453213208, "answer_id": 34879192, "question_id": 34878275, "link": "https://stackoverflow.com/questions/34878275/count-duplicate-xml-attribute-values-using-xmlsimple/34879192#34879192", "title": "Count duplicate XML attribute values using XML::Simple", "body": "<p></p>\n\n<p>Here's a program that uses <a href=\"http://metacpan.org/module/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a> to fulfil the requirement. It uses a single XPath expression to find all the attributes of interest and counts them in hash <code>%names</code>. The subsequent <code>for</code> loop displays all hash keys that have a count greater than 1</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse XML::LibXML;\n\nmy $xml = XML::LibXML-&gt;load_xml(IO =&gt; \\*DATA);\n\nmy %names;\n++$names{ $_-&gt;getValue } for $xml-&gt;findnodes('//in/@name | //ou/@name | //bi/@name');\n\nprint \"$_\\n\" for grep { $names{$_} &gt; 1 } keys %names;\n\n__DATA__\n&lt;Root&gt;\n  &lt;Top Name=\" \"&gt;\n    &lt;Tag name=\"ALU\"&gt;\n      &lt;in name=\"PC\"/&gt;\n      &lt;iodirection name=\"AB\"/&gt;\n    &lt;/Tag&gt;\n    &lt;Tag name=\" \"&gt;\n      &lt;in name=\"CCB\"/&gt;\n      &lt;ou name=\"PC\"/&gt;\n      &lt;bi name=\"AB\"/&gt;\n    &lt;/Tag&gt;\n    &lt;Tag name=\" \"&gt;\n      &lt;in name=\"DB\"/&gt;\n      &lt;ou name=\"DI\"/&gt;\n      &lt;bi name=\"CCB\"/&gt;\n    &lt;/Tag&gt;\n    &lt;Tag name=\" \"&gt;\n      &lt;in name=\"DI\"/&gt;\n      &lt;ou name=\"DB\"/&gt;\n      &lt;bi name=\"CCB\"/&gt;\n    &lt;/Tag&gt;\n  &lt;/Top&gt;\n&lt;/Root&gt;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>DB\nPC\nDI\nCCB\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5633632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GtjKO.jpg?s=128&g=1", "display_name": "Divox", "link": "https://stackoverflow.com/users/5633632/divox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 34878672, "answer_count": 2, "score": -2, "last_activity_date": 1467890234, "creation_date": 1453210724, "last_edit_date": 1495542780, "question_id": 34878275, "link": "https://stackoverflow.com/questions/34878275/count-duplicate-xml-attribute-values-using-xmlsimple", "title": "Count duplicate XML attribute values using XML::Simple", "body": "<pre class=\"lang-xml prettyprint-override\"><code>&lt;Root&gt;\n  &lt;Top Name=\" \"&gt;\n    &lt;Tag name=\"ALU\"&gt;\n      &lt;in name=\"PC\"/&gt;\n      &lt;iodirection name=\"AB\"/&gt;\n    &lt;/Tag&gt;\n    &lt;Tag name=\" \"&gt;\n      &lt;in name=\"CCB\"/&gt;\n      &lt;ou name=\"PC\"/&gt;\n      &lt;bi name=\"AB\"/&gt;\n    &lt;/Tag&gt;\n    &lt;Tag name=\" \"&gt;\n      &lt;in name=\"DB\"/&gt;\n      &lt;ou name=\"DI\"/&gt;\n      &lt;bi name=\"CCB\"/&gt;\n    &lt;/Tag&gt;\n    &lt;Tag name=\" \"&gt;\n      &lt;in name=\"DI\"/&gt;\n      &lt;ou name=\"DB\"/&gt;\n      &lt;bi name=\"CCB\"/&gt;\n    &lt;/Tag&gt;\n  &lt;/Top&gt;\n&lt;/Root&gt;\n</code></pre>\n\n<p>I'm not a Perl expert, but some simple things are hard for me to figure out and one such task is this. The above XML as you can see the attributes/elements, they're repeated couple of times but for different <code>&lt;in&gt;</code>, <code>&lt;io&gt;</code> and <code>&lt;ou&gt;</code> tags. Now I'm looking to return only the repeated attributes/elements and just print them once.</p>\n\n<pre><code>Example : DI\n          DB\n          CCB\n          AB\n</code></pre>\n\n<p>My code snippet goes something like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\n\nuse XML::Simple;\nuse Data::Dumper;\n\n$xml_1 = XMLin('./tmp.xml');\n\nmy $root_top = $xml_1-&gt;{Top};\nmy $mod_top  = $root_top1-&gt;{Tag};\nmy @mod      = keys %$mod_top;\n\nforeach my $mods ( values %$mod_top ) {\n\n    my $temp = shift(@mod);\n    print XST_FILE \"$temp u_$temp(\\n\";\n\n    my $in_mo = $modules-&gt;{in};\n    my @in_1  = keys %$in_mo;\n\n    foreach my $name_1 ( values %$in_mo ) {\n\n        my $inn = shift(@in_1);\n\n        if ( $inn =~ /\\bname\\b/ ) {\n            print \" \\.$name_1\\($name_1\\)\\,\\n\";\n        }\n        else {\n            print \" \\.$in\\($in\\)\\,\\n\";\n        }\n    }\n</code></pre>\n\n<p>PS: I'd appreciate it if this can be modified only in <code>XML::Simple</code>. Though <a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">XML::Simple is discouraged</a>, he's not righteous, but he is the one I'm currently using just to finish this task</p>\n"}, {"tags": ["perl", "tcl"], "comments": [{"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1453211938, "post_id": 34877821, "comment_id": 57495245, "body": "a function with two arguments"}], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1453215491, "post_id": 34879468, "comment_id": 57497823, "body": "Thanks a lot Glenn !!"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 2, "last_activity_date": 1453213944, "creation_date": 1453213944, "answer_id": 34879468, "question_id": 34877821, "link": "https://stackoverflow.com/questions/34877821/arithmetic-expressions-in-tcl-perl/34879468#34879468", "title": "Arithmetic expressions in Tcl, Perl", "body": "<p>You need the <a href=\"http://tcl.tk/man/tcl8.6/TclCmd/expr.htm\" rel=\"nofollow\"><code>expr</code> command</a> for math:</p>\n\n\n\n<p>1</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code># my $value = read_phy($phy, 0) | (0x1 &lt;&lt; 15);\nset value [expr {[phy_rd $phy 0] | (0x1 &lt;&lt; 15)}]\n</code></pre>\n\n<p>2</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code># my $value = (read_phy($phy, 23) &amp; ~0x0700) | (0x00 &lt;&lt; 8); \nset value [expr { ([phy_rd $phy 23] &amp; ~0x0700) | (0x00 &lt;&lt; 8)}]\n</code></pre>\n\n<p>3</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code># $regvalue &amp;= ~0x0C000  \nset regvalue [expr {$regvalue &amp; ~0x0C000}]\n</code></pre>\n\n<p>Please also read <a href=\"http://wiki.tcl.tk/10225\" rel=\"nofollow\">Brace your expr-essions</a></p>\n"}], "owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 34879468, "answer_count": 1, "score": 0, "last_activity_date": 1453213944, "creation_date": 1453209369, "question_id": 34877821, "link": "https://stackoverflow.com/questions/34877821/arithmetic-expressions-in-tcl-perl", "title": "Arithmetic expressions in Tcl, Perl", "body": "<p>I am converting a Perl code to tcl. Have completed most of it but stuck in some logical and mathematical expressions. Sought your help:</p>\n\n<p>Line1:</p>\n\n<pre><code>my $value = read_phy($phy, 0) | (0x1 &lt;&lt; 15);\n</code></pre>\n\n<p>Line2: ( a bit similar to previous one)</p>\n\n<pre><code>my $value = (read_phy($phy, 23) &amp; ~0x0700) | (0x00 &lt;&lt; 8); \n</code></pre>\n\n<p>For line 1, after many trials, I thought to break the logic in two statements but still unable to clean the compilation:</p>\n\n<pre><code>    set temp_value  [phy_rd $devno 0] \n    set value [$temp_value | (0x1 &lt;&lt; 15)]\n</code></pre>\n\n<p>Line 3:</p>\n\n<pre><code>$regvalue &amp;= ~0x0C000  \n</code></pre>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["perl", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5259630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cee6d670df859376512a1257bf62d03?s=128&d=identicon&r=PG&f=1", "display_name": "Rambabu G", "link": "https://stackoverflow.com/users/5259630/rambabu-g"}, "edited": false, "score": 0, "creation_date": 1453440989, "post_id": 34877967, "comment_id": 57611580, "body": "Hi ikegami,        There is no POSIX::sigaction in the code.The code has  &#39;use POSIX &quot;:sys_wait_h&quot;  &#39; line. Does it create any exception in the signal handler.                        please suggest"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 41, "user_id": 5259630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cee6d670df859376512a1257bf62d03?s=128&d=identicon&r=PG&f=1", "display_name": "Rambabu G", "link": "https://stackoverflow.com/users/5259630/rambabu-g"}, "edited": false, "score": 0, "creation_date": 1453460456, "post_id": 34877967, "comment_id": 57621567, "body": "Nah, that just imports symbols including <code>WNOHANG</code>"}, {"owner": {"reputation": 41, "user_id": 5259630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cee6d670df859376512a1257bf62d03?s=128&d=identicon&r=PG&f=1", "display_name": "Rambabu G", "link": "https://stackoverflow.com/users/5259630/rambabu-g"}, "edited": false, "score": 0, "creation_date": 1453461124, "post_id": 34877967, "comment_id": 57621991, "body": "The above stack is not sufficient to analyse the problem. Is there  any way to get more stack from gdb?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 41, "user_id": 5259630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cee6d670df859376512a1257bf62d03?s=128&d=identicon&r=PG&f=1", "display_name": "Rambabu G", "link": "https://stackoverflow.com/users/5259630/rambabu-g"}, "edited": false, "score": 0, "creation_date": 1453462166, "post_id": 34877967, "comment_id": 57622622, "body": "Recompiling your Perl with symbols (or switching to a locally-installed Perl compiled with symbols) will show more. Easy to do, and I&#39;ll give you instructions if you want. You&#39;ll need to get another core file afterwards, though"}, {"owner": {"reputation": 41, "user_id": 5259630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cee6d670df859376512a1257bf62d03?s=128&d=identicon&r=PG&f=1", "display_name": "Rambabu G", "link": "https://stackoverflow.com/users/5259630/rambabu-g"}, "edited": false, "score": 0, "creation_date": 1453700385, "post_id": 34877967, "comment_id": 57700313, "body": "Hi ikegami, Thanks for answering to my question :) :) . Please give instructions for more stack. please suggest some solution to this core file. You told about exception happened in the signal handler. is there any way to resolve  this expection?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 41, "user_id": 5259630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cee6d670df859376512a1257bf62d03?s=128&d=identicon&r=PG&f=1", "display_name": "Rambabu G", "link": "https://stackoverflow.com/users/5259630/rambabu-g"}, "edited": false, "score": 0, "creation_date": 1453721598, "post_id": 34877967, "comment_id": 57711270, "body": "If it&#39;s due to unsafe signals, don&#39;t rien on unsafe signals. If it&#39;s due to <code>sigaction</code> being used,  don&#39;t use it.  Should happen otherwise. /// Instructions to come later today"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1453209759, "creation_date": 1453209759, "answer_id": 34877967, "question_id": 34877393, "link": "https://stackoverflow.com/questions/34877393/need-to-know-why-the-core-file-has-genereated/34877967#34877967", "title": "Need to know why the core file has genereated", "body": "<blockquote>\n  <p><em>what does \"/usr/bin/perl -w \" indicate above?</em></p>\n</blockquote>\n\n<p>The program that was being executed (<code>perl</code>) and its first argument (<code>-w</code>, which enabled warnings).</p>\n\n<blockquote>\n  <p><em>Can i find why thecore file has generated from the above info.</em></p>\n</blockquote>\n\n<p>Looks like the exception happened in the signal handler. I wouldn't be surprised if this happened because the programmer explicitly disabled <a href=\"http://perldoc.perl.org/perlipc.html#Deferred-Signals-(Safe-Signals)\" rel=\"nofollow\">safe signals</a> or installed his own handler using <code>POSIX::sigaction</code>. This is an expected consequence.</p>\n"}], "owner": {"reputation": 41, "user_id": 5259630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cee6d670df859376512a1257bf62d03?s=128&d=identicon&r=PG&f=1", "display_name": "Rambabu G", "link": "https://stackoverflow.com/users/5259630/rambabu-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "closed_date": 1454479018, "answer_count": 1, "score": -1, "last_activity_date": 1453265667, "creation_date": 1453208128, "last_edit_date": 1453265667, "question_id": 34877393, "link": "https://stackoverflow.com/questions/34877393/need-to-know-why-the-core-file-has-genereated", "closed_reason": "Needs details or clarity", "title": "Need to know why the core file has genereated", "body": "<p>I have a core file <code>core.1614762</code>.</p>\n\n<p>When i do <code>file core.1614762</code>, the output is</p>\n\n<blockquote>\n  <p>core.1614762: ELF 64-bit LSB core file x86-64, version 1 (SYSV), SVR4-style, from '/usr/bin/perl -w /alcatel/omc3/usmcmd/script/cmdsession -f /alcatel/var/home/ax.</p>\n</blockquote>\n\n<p>What does <code>/usr/bin/perl -w</code> indicate above?</p>\n\n<p>I did gdb of the core file (<code>gdb /usr/bin/perl core.1614762</code>); the backtrace is showing <code>Perl_csighandler</code>.</p>\n\n<pre><code>#0  0x000000384ca95002 in Perl_csighandler () from /usr/lib64/perl5/CORE/libperl.so\n#1  &lt;signal handler called&gt;\n#2  0x000000384a235e30 in __cxa_finalize () from /lib64/libc.so.6`enter code here`\n#3  0x0000003855e1bdd6 in ?? () from /usr/lib64/firefox/libnspr4.so\n#4  0x0000000000000017 in ?? ()\n#5  0x0000000000000000 in ?? ()\n</code></pre>\n\n<p>I don't know why the core file was generated . Can I find out why the core file was generated from the above info?</p>\n"}, {"tags": ["perl", "xampp", "bugzilla"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453229414, "post_id": 34877234, "comment_id": 57507058, "body": "Have you considered using one of the <a href=\"https://www.bugzilla.org/support/\" rel=\"nofollow noreferrer\">Bugzilla support channels</a>?"}, {"owner": {"reputation": 161, "user_id": 3725739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8ITY.jpg?s=128&g=1", "display_name": "vinayakumarnk", "link": "https://stackoverflow.com/users/3725739/vinayakumarnk"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453270042, "post_id": 34877234, "comment_id": 57523034, "body": "Yeah. But could not get proper solution. But just now i fixed this by my own. I created dummy xampp\\tmp folders inside C: dirve. i.e C:/xampp/tmp.      Now i can upload bugs with attachment. Anyway thanks @MattJacob"}, {"owner": {"reputation": 39990, "user_id": 5528593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7JPcT.png?s=128&g=1", "display_name": "Ren&#233; Vogt", "link": "https://stackoverflow.com/users/5528593/ren%c3%a9-vogt"}, "edited": false, "score": 0, "creation_date": 1453381284, "post_id": 34877234, "comment_id": 57582462, "body": "Added markup and screenshot"}], "owner": {"reputation": 161, "user_id": 3725739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R8ITY.jpg?s=128&g=1", "display_name": "vinayakumarnk", "link": "https://stackoverflow.com/users/3725739/vinayakumarnk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1455028207, "creation_date": 1453207676, "last_edit_date": 1455028207, "question_id": 34877234, "link": "https://stackoverflow.com/questions/34877234/not-able-to-file-a-bug-with-attachment-on-bugzilla-5-0-2-perl-5-2-on-xampp-windo", "title": "Not able to file a bug with attachment on Bugzilla 5.0.2 Perl 5.2 on xampp windows 7", "body": "<p>I completed setting up of Bugzilla v5.0.2 on xampp in windows system with the help of this link: <a href=\"https://thiscouldbebetter.wordpress.com/2015/10/23/installing-bugzilla-on-windows-with-xampp/\" rel=\"nofollow noreferrer\">https://thiscouldbebetter.wordpress.com/2015/10/23/installing-bugzilla-on-windows-with-xampp/</a>. </p>\n\n<p>I can file a bug without attachment, but with attachment I am not able to file bugs. I am getting this error message:</p>\n\n<blockquote>\n  <p>Error in tempfile() using template \\xampp\\tmp\\XXXXXXXXXX: Parent directory (\\xampp\\tmp) does not exist at C:/Perl/lib/CGI.pm line 3382.</p>\n</blockquote>\n\n<p>[<img src=\"https://i.stack.imgur.com/GXnxh.jpg\" alt=\"Screen shot of the error message\">]</p>\n\n<p>I rewrote path rules in httpd.conf file.</p>\n\n<p>location of bugzilla in my system : C:/bugzilla/</p>\n\n<p>location of xampp : D:\\development\\xampp</p>\n\n<p>Please help me on this issue, I am not able to fix from past 2 days.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GXnxh.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["regex", "r", "perl", "gsub"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1453198954, "post_id": 34874089, "comment_id": 57486343, "body": "Maybe <code>[[:blank:]]*([.]{2,}|[.,:;!?])[[:blank:]]*</code> will do? Check <a href=\"https://regex101.com/r/bX9rZ4/1\" rel=\"nofollow noreferrer\">this demo</a>."}, {"owner": {"reputation": 22813, "user_id": 4137985, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1laOB.jpg?s=128&g=1", "display_name": "Cath", "link": "https://stackoverflow.com/users/4137985/cath"}, "edited": false, "score": 0, "creation_date": 1453199018, "post_id": 34874089, "comment_id": 57486386, "body": "<code>gsub(&quot;([!?;,:]|(\\\\.+))&quot;, &quot; \\\\1 &quot;, text)</code> should work (separating punctuation marks other than the point from the point)"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 1, "creation_date": 1453199222, "post_id": 34874089, "comment_id": 57486549, "body": "<a href=\"http://stackoverflow.com/questions/34762973/regex-gsub-r-differentiate-between-ellipsis-and-periods\">related</a> (Just saw it&#39;s a follow up)"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1453199345, "post_id": 34874089, "comment_id": 57486635, "body": "@Tensibai: With all the previous OP questions in mind, I find this one rather unclear. Especially, what OP is up to in the end."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1453199576, "post_id": 34874089, "comment_id": 57486767, "body": "@WiktorStribi\u017cew indeed, what is the final goal is pretty unclear. Previous solution keeps punctuation together, OP&#39;s with to separate them..."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1453277999, "post_id": 34874089, "comment_id": 57526537, "body": "@Antoine could you enlighten us about the the final goal of all this, and side question are multiples spaces acceptable between punctuation marks ? (I&#39;ve more and more the feeling we&#39;re solving an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> here as there&#39;s packages in R to do text analysis..."}], "answers": [{"comments": [{"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 1, "creation_date": 1453213735, "post_id": 34875482, "comment_id": 57496514, "body": "Ahhhhhh. Two things. I totally missed the fact that you wanted to keep the dots together... and I totally missed the fact that you were asking about R, since this was tagged in <code>perl</code>... SO I provided perl solutions. I should probably go ahead and delete this answer now."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1453277635, "post_id": 34875482, "comment_id": 57526350, "body": "I&#39;ve edited my answer to remove all incorrect solutions."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1453277866, "post_id": 34875482, "comment_id": 57526470, "body": "I did edit to fix the R syntax, <code>fixed</code> is a parameter to tell gsub the pattern is fixed text and not a regex, so of no use here :). Drawback with [:punct:] is that is takes in consideration <code>-</code> (which OP does no wish from previous question).  As the Q was tagged perl, I assume it&#39;s ok to answer with perl only :) (But still, you end up with the same problem as me, the two spaces between the punctuation marks, which OP still have not clear if it&#39;s a problem or not...)"}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "reply_to_user": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1453281327, "post_id": 34875482, "comment_id": 57528473, "body": "If 2 spaces is a problem for op, he can always split the resultant string on arbitrary whitespace, and then join with 1 space. Or gsub <code>\\s+</code> with one space."}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 2, "last_activity_date": 1453277718, "last_edit_date": 1453277718, "creation_date": 1453202544, "answer_id": 34875482, "question_id": 34874089, "link": "https://stackoverflow.com/questions/34874089/regex-r-add-space-between-punctuation-marks-and-words-but-also-between-punctua/34875482#34875482", "title": "regex R: add space between punctuation marks and words, but also between punctuation marks", "body": "<p>FYI, I don't use R, but think I can glean the syntax from the question. I played around with it in Perl 6 and came up with this...</p>\n\n<pre><code>my $text = \"blabla!??....balabla, bla;bla:\";\nsay $text.subst(/( '.' + | &lt;:P&gt; )/, {\" $0 \"}, :g);\n# blabla !  ?  ?  .... balabla ,  bla ; bla :\n</code></pre>\n\n<p>So at a guess, I'd say you could do it R like this?</p>\n\n<pre><code>gsub(\"(\\\\.+|[[:punct:]])\", \" \\\\1 \", text)\n</code></pre>\n\n<p>What I'm doing is matching as many <code>.</code>'s in a row and spacing around them -OR- matching any punctuation and spacing around it. The <code>punct</code> should never match a dot because the first clause in the regex should catch it. </p>\n"}, {"tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": true, "score": 2, "last_activity_date": 1453213204, "last_edit_date": 1453213204, "creation_date": 1453212337, "answer_id": 34878876, "question_id": 34874089, "link": "https://stackoverflow.com/questions/34874089/regex-r-add-space-between-punctuation-marks-and-words-but-also-between-punctua/34878876#34878876", "title": "regex R: add space between punctuation marks and words, but also between punctuation marks", "body": "<p><strong>Test data:</strong> <code>text&lt;-'bla  bla!??....bala bla, bla;bla:'</code></p>\n\n<p>I didn't find a way to avoid calling gsub twice, the most conservative seems to be:</p>\n\n<pre><code>gsub('(?&lt;=[,:;!.?])  (?=[,:;!.?])',' ',gsub(\"([,:;!?]|[.]+)\", \" \\\\1 \", text),perl=T)\n</code></pre>\n\n<p>Which gives: <code>\"bla  bla ! ? ? .... bala bla ,  bla ; bla : \"</code></p>\n\n<p>I added spaces to the test data to ensure they're kept clean after processing.</p>\n\n<p>On multiples lines for ease of reading:</p>\n\n<pre><code>gsub('(?&lt;=[,:;!.?])  (?=[,:;!.?])', ' ', # replace 2 spaces surrounded by punctuation by only one space\n     gsub(\n        \"([,:;!?]|[.]+)\",\" \\\\1 \", # replace punctuation by themselve surrounded by spaces\n        text\n     )\n     ,perl=T\n)\n</code></pre>\n\n<p>In the inner part we replace <code>??</code> by <code>?  ?</code> so we need to suppress this double space between the two punctuation marks, as we may not whish to do this anywhere in the text we have to ensure those 2 spaces are surrounded by punctuation marks we did replace before.</p>\n\n<p>As the lookarounds are not part of standard R regexes, we need to use <code>perl=TRUE</code> on this outer <code>gsub</code></p>\n"}], "owner": {"reputation": 1389, "user_id": 2835597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/W0o1L.jpg?s=128&g=1", "display_name": "Antoine", "link": "https://stackoverflow.com/users/2835597/antoine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1724, "favorite_count": 0, "accepted_answer_id": 34878876, "answer_count": 2, "score": 1, "last_activity_date": 1453277718, "creation_date": 1453198612, "question_id": 34874089, "link": "https://stackoverflow.com/questions/34874089/regex-r-add-space-between-punctuation-marks-and-words-but-also-between-punctua", "title": "regex R: add space between punctuation marks and words, but also between punctuation marks", "body": "<p>The following command adds space between punctuation marks and words, but keeps the adjacent punctuation marks as a single block. This is alright for <code>...</code> (it should be considered a single unit), but not for the other symbols.</p>\n\n<p>Input: <code>text = \"blabla!??....balabla, bla;bla:\"</code></p>\n\n<p>R command: <code>gsub(\"((?:\\b| )?([.,:;!?]+)(?: |\\b)?)\", \" \\\\1 \", text, perl=T)</code></p>\n\n<p>Output: <code>\"blabla !??.... balabla ,  bla ; bla : \"</code></p>\n\n<p><strong>Desired output</strong>: <code>\"blabla ! ? ? .... balabla ,  bla ; bla : \"</code></p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "is_accepted": false, "score": 0, "last_activity_date": 1453194220, "creation_date": 1453194220, "answer_id": 34872507, "question_id": 34871546, "link": "https://stackoverflow.com/questions/34871546/issue-with-perl-regex/34872507#34872507", "title": "Issue with Perl Regex", "body": "<p>Here's what I'd do:</p>\n\n<pre><code>my $first = 1;\nwhile (&lt;$input&gt;) {\n    /^127\\.0\\.0\\.1\\s+(.+?)\\s*$/ or next;\n    print '|' if !$first;\n    $first = 0;\n    print quotemeta($1);\n}\n</code></pre>\n\n<p>This matches your input in a more precise way, and <code>quotemeta</code> takes care of true regex escaping.</p>\n"}, {"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": true, "score": 0, "last_activity_date": 1453194390, "creation_date": 1453194390, "answer_id": 34872563, "question_id": 34871546, "link": "https://stackoverflow.com/questions/34871546/issue-with-perl-regex/34872563#34872563", "title": "Issue with Perl Regex", "body": "<p>The bunch of | you get, is from the unfitting comment-lines at the beginning. So the solution is to ignore all \"unfitting\" lines.</p>\n\n<p>So instead of </p>\n\n<pre><code>$line =~ s/.*\\s+//;\n</code></pre>\n\n<p>use</p>\n\n<pre><code>next unless $line =~ s/^127.*\\s+//;\n</code></pre>\n\n<p>so you would ignore every line except thos starting with 127.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1453199676, "creation_date": 1453199676, "answer_id": 34874500, "question_id": 34871546, "link": "https://stackoverflow.com/questions/34871546/issue-with-perl-regex/34874500#34874500", "title": "Issue with Perl Regex", "body": "<p>I'd probably go with something like:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::Simple;\n\ngetstore( \"http://www.malwaredomainlist.com/hostslist/hosts.txt\",\n    \"malhosts.txt\" );\n\nopen( my $input, \"&lt;\", \"malhosts.txt\" );\n\nprint join ( \"|\", \n        map { m/^\\d/ &amp;&amp; ! m/localhost/ ? \n              quotemeta ((split)[1]) : () } &lt;$input&gt; ); \n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>0koryu0\\.easter\\.ne\\.jp|1\\-atraffickim\\.tf|10\\-trafficimj\\.tf|109\\-204\\-26\\-16\\.netconnexion\\.managedbroadband\\.co\\.uk|11\\-atraasikim\\.tf|11\\.lamarianella\\.info|12\\-tgaffickvcmb\\.tf|  #etc.\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 34872563, "answer_count": 3, "score": 1, "last_activity_date": 1453199676, "creation_date": 1453191222, "last_edit_date": 1453199389, "question_id": 34871546, "link": "https://stackoverflow.com/questions/34871546/issue-with-perl-regex", "title": "Issue with Perl Regex", "body": "<p>new perl coder here. </p>\n\n<p>When I copy and paste the text from a website into a text file and read from that file, my perl script works with no issues. When I use getstore to create a file from the website automatically which is what I want, the output is a bunch of |'s. </p>\n\n<p>The text looks identical when I copy and paste, or download the text with getstore.. I'm unable to figure out the problem. Any help would be highly appreciated.</p>\n\n<p>The output that I desire is as follows:</p>\n\n<pre><code>|www\\.arkinsoftware\\.in|www\\.askmeaboutrotary\\.com|www\\.assculturaleincontri\\.it|www\\.asu\\.msmu\\.ru|www\\.atousoft\\.com|www\\.aucoeurdelanature\\.\nenter code here\n</code></pre>\n\n<p>Here is the code I am using:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::Simple;\n\ngetstore(\"http://www.malwaredomainlist.com/hostslist/hosts.txt\",     \"malhosts.txt\");\n\nopen(my $input, \"&lt;\", \"malhosts.txt\");\n\nwhile (my $line = &lt;$input&gt;) {\n    chomp $line;\n    $line =~ s/.*\\s+//;\n    $line =~ s/\\./\\\\\\./g;\n    print \"$line\\|\";\n}\n</code></pre>\n"}, {"tags": ["perl", "sum", "digits", "sum-of-digits"], "comments": [{"owner": {"reputation": 111, "user_id": 5413417, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-O8alfZcTBDU/AAAAAAAAAAI/AAAAAAAAAMo/XsSdrM7Nx6s/photo.jpg?sz=128", "display_name": "pushpika liyanaarachchi", "link": "https://stackoverflow.com/users/5413417/pushpika-liyanaarachchi"}, "reply_to_user": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1453187415, "post_id": 34870450, "comment_id": 57479523, "body": "how to choose separately each numbers  by using their length of digits. I search for the code in perl but I couldn&#39;t find it."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1453188585, "post_id": 34870450, "comment_id": 57480092, "body": "Please post code that shows how far you have gotten, and where you are stuck. Have you read the file? How are you iterating over the lines, etc."}, {"owner": {"reputation": 111, "user_id": 5413417, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-O8alfZcTBDU/AAAAAAAAAAI/AAAAAAAAAMo/XsSdrM7Nx6s/photo.jpg?sz=128", "display_name": "pushpika liyanaarachchi", "link": "https://stackoverflow.com/users/5413417/pushpika-liyanaarachchi"}, "edited": false, "score": 0, "creation_date": 1453194063, "post_id": 34870450, "comment_id": 57482935, "body": "I have added my codes :)"}], "answers": [{"tags": [], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "is_accepted": false, "score": -1, "last_activity_date": 1453194363, "creation_date": 1453194363, "answer_id": 34872553, "question_id": 34870450, "link": "https://stackoverflow.com/questions/34870450/getting-the-summation-of-the-1-2-and-3-digits-numbers-from-text-file-in-perl/34872553#34872553", "title": "Getting the summation of the 1,2 and 3 digits numbers from text file in perl", "body": "<p>You can done all with regex.</p>\n\n<pre><code>while( &lt;$fh&gt; ) {\n   $sum1+= $_   if /^\\d$/;\n   $sum2+= $_   if /^\\d{2}$/;\n   $sum3+= $_   if /^\\d{3}$/;\n   $sum7+= $_   if /^7\\d*$/;\n   $sum8+= $_   if /^\\d*8$/;\n}\n</code></pre>\n\n<p>if you put number to list, you can print them as:</p>\n\n<pre><code>local $\" =  ' + ';\nprint \"@sum1 = $sum1\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1453198510, "last_edit_date": 1453198510, "creation_date": 1453197307, "answer_id": 34873575, "question_id": 34870450, "link": "https://stackoverflow.com/questions/34870450/getting-the-summation-of-the-1-2-and-3-digits-numbers-from-text-file-in-perl/34873575#34873575", "title": "Getting the summation of the 1,2 and 3 digits numbers from text file in perl", "body": "<p>Firstly, import <code>sum</code> from <code>List::Util</code> to make summing arrays of numbers easier.</p>\n\n<p>If it's a relatively small file (which it probably is), things are a lot easier if you pull them all into an array first and grep them as you need them</p>\n\n<p>so after you have opened you file...</p>\n\n<pre><code>use List::Util 'sum';\n\nmy @nums = &lt;$fh&gt;;\nchomp @nums;    # Remove trailing newlines;\n\nmy @values;\n\nprint \"Sum of all 3 digits numbers\\n\";\n@values = grep { length == 3 } @nums;\nprint join( ' + ', @values ), ' = ', sum( @values ), \"\\n\";\n\nprint \"Sum of all numbers starting with a digit 7\\n\";\n@values = grep { index( $_, 7 ) == 0 } @nums;\nprint join(' + ', @values), ' = ', sum( @values ), \"\\n\";\n\nprint \"Sum of all numbers ending with a digit 8\\n\";\n@values = grep { index( reverse($_), 8 ) == 0 } @nums;\nprint join(' + ', @values), ' = ', sum( @values ), \"\\n\";\n</code></pre>\n\n<p>Ideally you'd put any duplicate code (like that printing of the sums) inside a <code>sub</code>. Every time you retype the same code, you increase your chances of making an error.</p>\n\n<p>If you want to do it by streaming through the file, then you will have to keep track of multiple arrays as you go</p>\n\n<pre><code>my (@len_3, @len_4, @len_5, @start_7, @end_8); \n\nwhile (my $n  = &lt;$fh&gt;) {\n    if ( length $n == 3 ) { \n        push @len_3, $n; \n    }   \n    # ...\n    if ( index($n, 7) == 0 ) { \n        push @start_7, $nl=;\n    }   \n}\n\nprint \"Sum of all 3 digits numbers\\n\";\nprint join(' + ', @len_3), ' = ', sum( @len_3 ), \"\\n\";\n# ...\n</code></pre>\n\n<p>The more 'cases' you have, the more arrays you have to keep track of. There are better ways to do this - such as storing array references as hash values - but if your just learning, that may be a little confusing right now.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1453199091, "last_edit_date": 1453199091, "creation_date": 1453198732, "answer_id": 34874136, "question_id": 34870450, "link": "https://stackoverflow.com/questions/34870450/getting-the-summation-of-the-1-2-and-3-digits-numbers-from-text-file-in-perl/34874136#34874136", "title": "Getting the summation of the 1,2 and 3 digits numbers from text file in perl", "body": "<p>I'd tackle it like this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse List::Util qw ( sum );\n\nmy %numbers;\nmy %startswith;\n\nopen( my $fh, '&lt;', \"numbers.txt\") or die $!;\n\nwhile (&lt;$fh&gt;) {\n    my ( $num, $start_num ) = m|((\\d)\\d*)|;\n    push( @{ $numbers{length($num)} }, $num );\n    push( @{ $startswith{$start_num} },  $num );\n}\nclose ( $fh );\nprint Dumper \\%numbers;\nprint Dumper \\%startswith;\n\nforeach my $len ( sort keys %numbers ) {\n    print \"Sum of all $len digits numbers:\\n\";\n    print join( \"+\", @{ $numbers{$len} } ), \"\\n\";\n    print sum ( @{$numbers{$len}}),\"\\n\";\n}\nforeach my $first ( sort keys %startswith ) {\n    print \"Sum of all numbers starting with $first:\\n\";\n    print join( \"+\", @{ $startswith{$first} } ), \"\\n\";\n    print sum ( @{ $startswith{$first} } ), \"\\n\";\n}\n</code></pre>\n\n<p>This gives output of:</p>\n\n<pre><code>Sum of all 1 digits numbers:\n1+4+6\n11\nSum of all 2 digits numbers:\n23+24+57+76+85+72+46\n383\nSum of all 3 digits numbers:\n258+654+958+358\n2228\nSum of all numbers starting with 1:\n1\n1\nSum of all numbers starting with 2:\n23+258+24\n305\nSum of all numbers starting with 3:\n358\n358\nSum of all numbers starting with 4:\n4+46\n50\nSum of all numbers starting with 5:\n57\n57\nSum of all numbers starting with 6:\n654+6\n660\nSum of all numbers starting with 7:\n76+72\n148\nSum of all numbers starting with 8:\n85\n85\nSum of all numbers starting with 9:\n958\n958\n</code></pre>\n\n<p>And will implicitly support arbitrary length numbers. (You could use <code>List::Util</code> for the sum, but I thought I'd offer a non-module. </p>\n"}], "owner": {"reputation": 111, "user_id": 5413417, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-O8alfZcTBDU/AAAAAAAAAAI/AAAAAAAAAMo/XsSdrM7Nx6s/photo.jpg?sz=128", "display_name": "pushpika liyanaarachchi", "link": "https://stackoverflow.com/users/5413417/pushpika-liyanaarachchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 1, "answer_count": 3, "score": -3, "last_activity_date": 1453199091, "creation_date": 1453187074, "last_edit_date": 1453194810, "question_id": 34870450, "link": "https://stackoverflow.com/questions/34870450/getting-the-summation-of-the-1-2-and-3-digits-numbers-from-text-file-in-perl", "title": "Getting the summation of the 1,2 and 3 digits numbers from text file in perl", "body": "<p>Suppose a set of numbers is given in a file <strong>number_list.txt</strong>.\nFind the <em>sum of the numbers</em> from the file in the following categories:</p>\n\n<pre><code> Sum of all 1 digits numbers\n Sum of all 2 digits numbers\n Sum of all 3 digits numbers\n Sum of all numbers starting with a digit 7\n Sum of all number ending with a digit 8\n</code></pre>\n\n<p>write code in <strong>perl</strong> to find the above sums</p>\n\n<p>example: \nIf we have \"number_list.txt\"</p>\n\n<pre><code>           23 \n           258 \n           1 \n           24 \n           57 \n           76 \n           85 \n           72 \n           4  \n           654 \n           958 \n           6 \n           46 \n           358 \n</code></pre>\n\n<p>Then we need to get answer like this</p>\n\n<pre><code>             Sum of all 1 digits numbers\n                   1 + 4 + 6 = 11\n\n             Sum of all 2 digits numbers\n                   23 + 24 + 57 + 76 + 85 + 72 + 46 = 383\n\n             Sum of all 3 digits numbers\n                   258 + 654 + 958 + 358 = 2228\n\n             Sum of all numbers starting with a digit 7\n                   76 + 72 = 148\n\n             Sum of all number ending with a digit 8\n                   258 + 358 + 958 = 1574\n</code></pre>\n\n<p>And I have done so far.</p>\n\n<pre><code>   #!/usr/bin/perl\n   use strict;\n   use warnings;\n\n   my $filename = \"numbers.txt\";\n   open( my $fh, '&lt;', $filename ) or die \"Can't open $filename: $!\";\n   my @array1;\n   my @array2;\n   my @array3;\n   my @array4;\n\n   print \"\\n \\n\";\n   while ( my $line = &lt;$fh&gt; ) {\n    #if ( length($line) == 1)  \n    #{\n\n    #   push (@array1, $line);\n    #}\n    if ( length($line) == 2)\n    {\n        push (@array2, $line);\n    }\n    if ( length($line) == 3)\n    {\n        push (@array3, $line); \n    }\n    if ( length($line) == 4)\n    {\n        push (@array4, $line); \n    }\n} \n#print \"\\n Sum of all  digits numbers\\n \\n\";\n#for each (@array1) {\n#           print \"$_\";\n#   }\nmy $sum1 = 0;\nmy $sum2 = 0;\nmy $sum3 = 0;\n\nprint \"\\n \\n Sum of all 1 digits numbers of:\\n \\n\"; \nfor each my $num2 (@array2) {\n        print \"$num2\";\n        $sum1 = $sum1 + $num2; \n    }\n    print \"\\n Sum = $sum1\";\n\nprint \"\\n \\n Sum of all 2 digits numbers of:\\n \\n\"; \nfor each my $num3 (@array3) {\n        print \"$num3\";\n        $sum2 = $sum2 + $num3;\n    }\n    print \"\\n Sum = $sum2\";\n\nprint \"\\n \\n Sum of all 3 digits numbers of:\\n \\n\"; \nforeach my $num4(@array4) {\n        print \"$num4\";\n        $sum3 = $sum3 +$num4;\n    }\n    print \"\\n Sum = $sum3\";\n</code></pre>\n\n<p>So I have trouble with to make this program in simple way. Is there any simple method have to do this program ? </p>\n\n<p>And also I have trouble with getting</p>\n\n<pre><code>   Sum of all numbers starting with a digit 7\n   Sum of all number ending with a digit 8\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1453190578, "post_id": 34869252, "comment_id": 57481098, "body": "Try not using a backslash before the &quot;.&quot; and the &quot;_&quot; character. Maybe try not using interpolation at all and concatenate the string, something like: <code>my $XSD = &#39;C:\\IParser\\Iparser.exe --xsds &quot;&#39; . $dir . &#39;\\&#39; . $out . &#39;_xsd.xml&quot;&#39;; system($XSD);</code> and see if you get a different result."}, {"owner": {"reputation": 385, "user_id": 3774994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab06f00248afe2eefaa2a280761088c4?s=128&d=identicon&r=PG&f=1", "display_name": "depsai", "link": "https://stackoverflow.com/users/3774994/depsai"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1453191970, "post_id": 34869252, "comment_id": 57481753, "body": "same error there no different result."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453199929, "post_id": 34869252, "comment_id": 57486975, "body": "You might find it easier to use one of the built in parsing modules, such as <code>XML::LibXML</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453211270, "post_id": 34869252, "comment_id": 57494746, "body": "Please provide the output obtained by adding <code>use Data::Dumper; { local $Data::Dumper::Useqq = 1; print(Dumper($XSD)); }</code>"}, {"owner": {"reputation": 385, "user_id": 3774994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab06f00248afe2eefaa2a280761088c4?s=128&d=identicon&r=PG&f=1", "display_name": "depsai", "link": "https://stackoverflow.com/users/3774994/depsai"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453447609, "post_id": 34869252, "comment_id": 57614123, "body": "sorry for late reply @ikegami after adding your code i got the outputpath.       $VAR1 = &quot;C:\\\\IParser\\\\Iparser.exe --xsds \\&quot;C:\\\\itools\\\\WMS\\\\TandF-Journals\\\\Tools\\\\Fold_tandf\\\\cats_x&zwnj;&#8203;sd.xml\\&quot;&quot;;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453460312, "post_id": 34869252, "comment_id": 57621482, "body": "I was looking for newlines or something like that.  No such problem."}], "answers": [{"tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": false, "score": 0, "last_activity_date": 1453186714, "creation_date": 1453186714, "answer_id": 34870365, "question_id": 34869252, "link": "https://stackoverflow.com/questions/34869252/perl-executing-an-exe-using-system/34870365#34870365", "title": "Perl executing an exe using system()?", "body": "<p>This could be because of closed handles to STDIN, STDOUT and STDERR (or any of them). Most probably if you run this as a daemon or from service.</p>\n\n<p>Try opening the standard handles before running the process (assuming you're on windows according to path):</p>\n\n<pre><code>open(STDIN, \"&lt;NUL\");\nopen(STDOUT, \"&gt;NUL\");\nopen(STDERR, \"&gt;NUL\");\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 3774994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ab06f00248afe2eefaa2a280761088c4?s=128&d=identicon&r=PG&f=1", "display_name": "depsai", "link": "https://stackoverflow.com/users/3774994/depsai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1453186714, "creation_date": 1453182097, "last_edit_date": 1453182576, "question_id": 34869252, "link": "https://stackoverflow.com/questions/34869252/perl-executing-an-exe-using-system", "title": "Perl executing an exe using system()?", "body": "<p>I could not able to run the <code>exe</code> using perl code.</p>\n\n<pre><code>my $XSD = \"C:\\\\IParser\\\\Iparser\\.exe --xsds \\\"$dir\\\\$out\\_xsd\\.xml\\\"\";\nsystem($XSD);\n</code></pre>\n\n<p>The above <code>$xsd</code> run in commend prompt it will execute fine. when I run through perl source code it shows error as</p>\n\n<pre><code>the handle is invalid\n</code></pre>\n\n<p>I don't no what is the problem behind this. Please help.</p>\n"}, {"tags": ["perl", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 1, "creation_date": 1453174658, "post_id": 34867756, "comment_id": 57475320, "body": "No, a BOM is simply the character <a href=\"http://www.mclean.net.nz/ucf/?c=U+FEFF\" rel=\"nofollow noreferrer\">U+FEFF</a> at the start of the file. By convention this is used to signal the byte ordering and is therefore not needed at all on UTF8 files. But it is just a character and does not get discarded unless you write code to discard it."}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1453174862, "post_id": 34867756, "comment_id": 57475377, "body": "Sorry, forgot to mention a BOM on a UTF8 file is redundant as a byte order mark (UTF8 only has one byte order), but some MS apps consider it significant. If you plan to open the CSV files in Excel for example, you almost certainly want to retain the BOM."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1453176881, "post_id": 34867756, "comment_id": 57475890, "body": "@GrantMcLean: I hope I&#39;m not being too picky, but <i>\u201cUTF-8 only has one byte order\u201d</i> may be misleading. It&#39;s akin to remembering how to lay a place setting at a dining table. I must know whether the knife goes on the left and the fork on the right, or if the knife is on the right and the fork on the left. That is byte endianness in a 16-bit encoding. But when I come to put the plate down (lets forget about side-plates) I don&#39;t think <i>there&#39;s only one order to place the plate</i>, it simply doesn&#39;t have an order because it&#39;s on its own"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453183700, "post_id": 34867756, "comment_id": 57477917, "body": "Depending on the application, you might want to retain a BOM at the beginning of the output file. As noted above, it has no purpose for byte order determination, but it is coincidentally also occasionally useful because it unambiguously identifies the encoding as UTF-8. Where everything is UTF-8 by default, this is simply redundant; but I hear some Windows victims kind of like it this way."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1453210403, "post_id": 34867756, "comment_id": 57494107, "body": "@tripleee: In that situations I would recommend stripping the BOM on input and adding it again on output"}], "answers": [{"comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1453191386, "post_id": 34868321, "comment_id": 57481440, "body": "What if the files come from different sources, couldn&#39;t the character be either U+FEFF or U+FFFE depending on the endianness of the system that wrote the file? Maybe it&#39;s best to use File::BOM for this?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1453210122, "post_id": 34868321, "comment_id": 57493906, "body": "@ChatterOne: I&#39;ve updated my solution to answer your question. I hope that helps"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1453210553, "last_edit_date": 1592644375, "creation_date": 1453176278, "answer_id": 34868321, "question_id": 34867756, "link": "https://stackoverflow.com/questions/34867756/why-does-bom-stick-around-when-reading-a-utf-8-file/34868321#34868321", "title": "Why does BOM stick around when reading a UTF-8 file?", "body": "<p>UTF-8 is a byte-based encoding, so endianness is irrelevant and an initial byte order mark (BOM) is unnecessary and generally discouraged in UTF-8 data. But its validity and function is dependent on the prevailing application, so Perl cannot simply strip it from the data without question</p>\n<p>The Unicode BOM character <code>U+FEFF</code> shares an encoding with the <em>ZERO WIDTH NO-BREAK SPACE</em> character, so if layout is the only issue it should not cause a problem if is left in, even if multiple sources are concatenated so that it appears in the middle of a data stream</p>\n<p>In most file applications UTF-8 data sources are treated transparently, so that a file containing only 7-bit ASCII data is identical to the UTF-8 encoding of the same data. Such data <em>must not</em> contain a BOM, because it would interfere with the transparency. For instance the <em>shebang</em> <code>#!</code> line at the start of a UTF-8-encoded shell command file must not be preceded by a byte order mark as the shell would simply fail to recognise it</p>\n<p>You can strip the BOM character from the beginning of <em>decoded</em> Unicode data, whatever the source, with</p>\n<pre><code>s/\\A\\N{BOM}//\n</code></pre>\n<p>Of course, the character can be removed <em>throughout</em> a string by using a global substitution with the <code>\\A</code> anchor removed, or more tidily with</p>\n<pre><code>tr/\\N{BOM}//d\n</code></pre>\n<br/>\n<hr />\n<h2>Update</h2>\n<p>Character streams are read as a sequence of <em>bytes</em>, and in 16-bit or 32-bit encodings you need to know whether it is the least-significant (little-endian) or most-significant (big-endian) byte that appears first so that you know how to assemble those bytes into a multi-byte character</p>\n<p>The BOM character is <em>always</em> <code>U+FEFF</code>. Its whole point is that that is unchanging. So if I read the first two bytes from a file and they are <code>FF</code> and <code>FE</code> in that order, then I know that the whole file is UTF-16 (or UTF-32) encoded with the least-significant byte followed by the most-significant byte, or little-endian, and I can then correctly interpret the rest of the file</p>\n<p>But byte order is meaningless in byte-based encodings. Every character is represented by a sequence of one or more bytes, and the data is identical <em>regardless of the endianness of its originating system</em>. The BOM character <code>U+FEFF</code> is encoded in UTF-8 as the three hex bytes <code>EF</code>, <code>BB</code>, <code>BF</code> in that order, and that is invariant</p>\n<h3>The <code>File::BOM</code> module</h3>\n<p>In my opinion, <a href=\"http://metacpan.org/module/File::BOM\" rel=\"nofollow noreferrer\"><code>File::BOM</code></a> makes a simple concept unnecessarily complicated</p>\n<p>I can see it being useful if you have to handle many different Unicode files with different encodings from platforms with different endianness, but in such circumstances the variations in the character sequence for the record separator at the end of each line of text is likely to be more of a issue</p>\n<p>As long as you know the encoding of a file before you open it, you should just open it and read it according to that standard. If the presence of a BOM character in the data is a problem then just use <code>s///</code> or <code>tr///d</code> to remove it. But bear in mind that the BOM character should be ignored transparently on all Unicode-compliant systems</p>\n"}], "owner": {"reputation": 11589, "user_id": 1128047, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/23e6238b3a165e043c3d25d40b7cceda?s=128&d=identicon&r=PG", "display_name": "Jonah Bishop", "link": "https://stackoverflow.com/users/1128047/jonah-bishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 0, "accepted_answer_id": 34868321, "answer_count": 1, "score": 1, "last_activity_date": 1453210553, "creation_date": 1453171960, "question_id": 34867756, "link": "https://stackoverflow.com/questions/34867756/why-does-bom-stick-around-when-reading-a-utf-8-file", "title": "Why does BOM stick around when reading a UTF-8 file?", "body": "<p>I'm trying to read some UTF-8 encoded CSV files (at least I believe that's what they are) in Perl, and write them all out into one larger file. Here's my script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen my $out, '&gt;:encoding(UTF-8)', \"output.csv\" or die \"Cannot open output.csv: $!\";\n\nmy @files = &lt;*.csv&gt;;\nforeach(@files) {\n    next if $_ =~ m/^output.csv$/;\n\n    print \"Parsing $_\\n\";\n\n    open my $in, '&lt;:encoding(UTF-8)', $_ or die \"Cannot open $_: $!\";\n    while(&lt;$in&gt;) {\n        chomp;\n        next if m/^\\s*$/;\n        print $out \"$_\\n\";\n    }\n    close $in;\n}\nclose $out;\n</code></pre>\n\n<p>When all is said and done, each file's contents starts with a <a href=\"https://en.wikipedia.org/wiki/Byte_order_mark\" rel=\"nofollow\">BOM</a>, meaning that a BOM shows up as the first three bytes of each file's data. Shouldn't opening the file using the <code>&gt;:encoding(UTF-8)</code> directive have gotten rid of the BOM? Why does it continue to show up in my output?</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1453191530, "post_id": 34867063, "comment_id": 57481528, "body": "The reason it doesn&#39;t work is that your <code>var1&#47;var2</code> is just text to Perl. Even after correcting it to <code>$var&#47;$var2</code>, the script can&#39;t see that these two variables are defined in the shell calling the script. You must pass their values to the script in some way (e.g. as environment variables, see the answers)."}], "answers": [{"comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 5, "creation_date": 1453174991, "post_id": 34867643, "comment_id": 57475410, "body": "+1; also worth mentioning the more concise ad-hoc, one-off method of defining environment variables for a command: <code>var1=5253413 var2=39151 perl -E &#39;say $ENV{var1}&#47;$ENV{var2}&#39;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 1, "creation_date": 1453175178, "post_id": 34867643, "comment_id": 57475456, "body": "@mklement0: I considered including that but dismissed it as being more centred on shell techniques than Perl. But in retrospect I guess that&#39;s what this question&#39;s all about. I&#39;ll leave your comment to represent it. Thank you"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1453191806, "post_id": 34867643, "comment_id": 57481668, "body": "Incidentally, the quickest (and dirtiest) way to do this is just <code>perl -e &#39;print &#39;$var1&#47;$var2 -l</code>"}, {"owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1453234829, "post_id": 34867643, "comment_id": 57510331, "body": "@reinierpost , I tried that and it didn&#39;t work. Why is it considered dirty ?"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "reply_to_user": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1453236277, "post_id": 34867643, "comment_id": 57511259, "body": "@Tom: what do you mean by <i>it didn&#39;t work</i>? What was the error message? The reason it&#39;s dirty is that it will only work if <code>$var1</code> and <code>$var2</code> have been set to numbers (e.g. they must not contain any whitespace)."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1453237318, "post_id": 34867643, "comment_id": 57511901, "body": "@Tom:  Avinash Raj deleted his own answer - I presume after it had received 2 down-votes (neither of them from me). What gave you the idea that <i>I</i> deleted it (a power I do not possess)? The answer suggested using a <i>double-quoted</i> string as the Perl script, which meant that the <i>shell</i> would have expanded shell variable references before Perl even got to see the script. While that would have worked in this simple case, it gets confusing quickly in cases where both Perl and shell variables are involved. There&#39;s also a security risk - see pilcrow&#39;s comment on his own answer below."}, {"owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "reply_to_user": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1453239764, "post_id": 34867643, "comment_id": 57513318, "body": "@mklement0; My mistake, I have a saved version of the answer so I&#39;ll use that. I&#39;m new to stackoverflow, so I figured that since you could edit my post that you did some admin things   @reinierpost, I misread where you put the single quotes, now I see that it works. This is really useful to know. Why does it print the evaluation despite the division operation being outside the single quotes of print?"}, {"owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1453240328, "post_id": 34867643, "comment_id": 57513646, "body": "@reinierpost, Furthermore, it seems that if I remove the space in front of print, it no longer yields anything. What&#39;s going on? Is the single quote actually some sort of escape character that I&#39;m looking at?"}, {"owner": {"reputation": 11131, "user_id": 242241, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/2fe96fe4513932ff30af562241c9db28?s=128&d=identicon&r=PG", "display_name": "AmbroseChapel", "link": "https://stackoverflow.com/users/242241/ambrosechapel"}, "edited": false, "score": 0, "creation_date": 1453241797, "post_id": 34867643, "comment_id": 57514409, "body": "Why not just <code>perl -E &#39;($v1, $v2) = @ARGV; say $v1&#47;$v2&#39; 5253413 39151</code> and not bother with the shell variables?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 12, "last_activity_date": 1453171070, "creation_date": 1453171070, "answer_id": 34867643, "question_id": 34867063, "link": "https://stackoverflow.com/questions/34867063/how-do-i-get-command-line-perl-to-accept-shell-variables/34867643#34867643", "title": "How do I get command-line Perl to accept shell variables?", "body": "<p>There are two main ways to do this.</p>\n\n<ul>\n<li><p>Within the Perl code you can use the <code>%ENV</code> built-in hash to access environment variables that are <em>exported</em> from the shell</p>\n\n<pre><code>$ export var1=5253413\n$ export var2=39151\n$ perl -E 'say $ENV{var1}/$ENV{var2}'\n134.183366963807\n</code></pre></li>\n<li><p>You can use the shell interpolation facility to insert the value of a shell variable into a command</p>\n\n<p>This is best done as <em>parameters</em> to the perl one-liner rather than introducing the values directly into the code</p>\n\n<pre><code>$ var1=5253413\n$ var2=39151\n$ perl -E '($v1, $v2) = @ARGV; say $v1/$v2' $var1 $var2\n134.183366963807\n</code></pre></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 0, "creation_date": 1453203685, "post_id": 34868254, "comment_id": 57489604, "body": "Environment variables are also available via the global <code>%ENV</code> hash; <code>shell# export FOO=BAR &amp;&amp; perl -E &#39;say $ENV{FOO}&#39;</code>"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "reply_to_user": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 1, "creation_date": 1453217434, "post_id": 34868254, "comment_id": 57499325, "body": "@Joshua, of course, but many perl hackers and admins in need of a one-liner are just(ly) <a href=\"http://c2.com/cgi/wiki?LazinessImpatienceHubris\" rel=\"nofollow noreferrer\">too impatient</a> to type <code>$ENV{this}</code> and <code>$ENV{that}</code>. :)"}, {"owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1453234499, "post_id": 34868254, "comment_id": 57510135, "body": "This is a really neat idea and I almost want to vote for it as an answer. But, wouldn&#39;t just using double quotes work just fine? For some reason this answer was deleted, but someone said that you could do  <code>perl -e &quot;print $var1&#47;$var2&quot; -l</code>"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "reply_to_user": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1453235017, "post_id": 34868254, "comment_id": 57510446, "body": "@Tom, the danger with simply interpolating the shell variables into the perl command string is twofold.  First, these constructions are confusing to folks who can&#39;t get the quoting and variable expansion quite right \u2014 is that <code>&quot;$foo&quot;</code> a shell var or a perl var? \u2014 and quickly become opaque when you&#39;ve quotes within quotes.  Second, this practice is essentially an <i>eval</i> in your perl program, a code injection opportunity.  If you get too cavalier about that, even in one-liners, you&#39;ll hurt yourself one day."}, {"owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1453235654, "post_id": 34868254, "comment_id": 57510855, "body": "@pilcrow. I&#39;m not sure I understand your figures of speech. Can expand your explanation to provide more detail? It seems like this solution is identical to the one you provided, just without the export step. It seems much more intuitive just to put it in double quotes"}, {"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "reply_to_user": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "edited": false, "score": 0, "creation_date": 1453300340, "post_id": 34868254, "comment_id": 57541569, "body": "@Tom, <code>perl -E &quot;say &#39;$SHELL_VAR&#39;&quot;</code> is easy.  <code>perl -E &quot;say qq(\\$^V says \\x24SHELL_VAR is $SHELL_VAR)&quot;</code> is trickier.  <code>export SHELL_VAR=&quot;system q(rm -rf &#47;)&quot;</code> might be devastating."}], "tags": [], "owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "is_accepted": false, "score": 6, "last_activity_date": 1453181785, "last_edit_date": 1453181785, "creation_date": 1453175787, "answer_id": 34868254, "question_id": 34867063, "link": "https://stackoverflow.com/questions/34867063/how-do-i-get-command-line-perl-to-accept-shell-variables/34868254#34868254", "title": "How do I get command-line Perl to accept shell variables?", "body": "<p>Two less common ways to do this make use of long-standing perl features.</p>\n\n<p>The first is the <a href=\"http://perldoc.perl.org/Env.html\" rel=\"nofollow\">core module <code>Env</code></a>, which ties process environment variables to perl variables:</p>\n\n<pre><code>sh$ export VAR1=1000\nsh$ export VAR2=33\nsh$ perl -MEnv -E 'say $VAR1/$VAR2'           # imports all environ vars\n333.333333333333\nsh$ perl -MEnv=VAR1,VAR2 -E 'say $VAR1/$VAR2' # imports only VAR1, VAR2\n333.333333333333\n</code></pre>\n\n<p>Note that the variables need to be present in the environment inherited by the perl process, for example with <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_22\" rel=\"nofollow\"><code>export VAR</code></a> as above, or explicitly for a single command (as by <code>FOO=hello perl -MEnv -E 'say $FOO'</code>).</p>\n\n<p>The second and rather more obscure way is to use use perl's <a href=\"http://perldoc.perl.org/perlrun.html#*-s*\" rel=\"nofollow\"><code>-s</code> switch</a> to set arbitrary variables from the command line:</p>\n\n<pre><code>sh$ VAR1=1000\nsh$ VAR2=33\nsh$ perl -s -E 'say $dividend/$divisor' -- -dividend=$VAR1 -divisor=$VAR2\n333.333333333333\n</code></pre>\n\n<p>awk does something similar with its <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html#tag_20_06_04\" rel=\"nofollow\"><code>-v</code> switch</a>.</p>\n"}], "owner": {"reputation": 681, "user_id": 5667298, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/697b66ad849e59a8ac5751484f77bee8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5667298/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2067, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1453181785, "creation_date": 1453166836, "last_edit_date": 1453175057, "question_id": 34867063, "link": "https://stackoverflow.com/questions/34867063/how-do-i-get-command-line-perl-to-accept-shell-variables", "title": "How do I get command-line Perl to accept shell variables?", "body": "<p>I can do math like  </p>\n\n<pre><code>perl -e 'print 5253413/39151' -l\n</code></pre>\n\n<p>But I don't quite get how to take advantage of Perl's ability to do math with my own predefined bash variables. I've tried </p>\n\n<pre><code>var1=$(some wc command that yields a number); var1=$(some wc that yields another number)\nperl -e 'print var1/var2' -l\n</code></pre>\n\n<p>But it doesn't work</p>\n"}, {"tags": ["apache", "perl", "uwsgi", "dancer", "psgi"], "answers": [{"comments": [{"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1453500751, "post_id": 34881971, "comment_id": 57645232, "body": "Sorry for delay. This was good hint and after moving to the <code>0:psgi</code> I have a little progress. In uwsgi log is now <code>--- unable to find perl application ---</code> and another messy line <code>[pid: 5757|app: -1|req: -1&#47;1] 212.7.22.161 () {66 vars in 1511 bytes} [Sat Jan 23 00:07:15 2016] GET &#47;adm&#47;z&#47; =&gt; generated 21 bytes in 0 msecs (HTTP&#47;1.1 500) 2 headers in 83 bytes (0 switches on core 0)</code> Here I see, that resonse is 21 bytes, what is length of &quot;Internal server error&quot;.  Do you have any hints more, why Perl app is not found under Apache here?"}, {"owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "edited": false, "score": 0, "creation_date": 1453565658, "post_id": 34881971, "comment_id": 57661797, "body": "Found out, that www-data usesr did not have same <code>@INC</code>, that&#39;s why Perl app was not found. So I got uwsgi run under Apache2 too. Thank you!"}], "tags": [], "owner": {"reputation": 15985, "user_id": 1783237, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a608cef53714ed07dfb108efdddba4eb?s=128&d=identicon&r=PG", "display_name": "GwynBleidD", "link": "https://stackoverflow.com/users/1783237/gwynbleidd"}, "is_accepted": true, "score": 4, "last_activity_date": 1453220932, "creation_date": 1453220932, "answer_id": 34881971, "question_id": 34866724, "link": "https://stackoverflow.com/questions/34866724/why-dancer-app-fails-under-uwsgi-apache/34881971#34881971", "title": "Why Dancer app fails under uWSGI + Apache?", "body": "<blockquote>\n  <p>I feel like I need to set <code>uWSGIModifier1 5</code> here but did not figured out where and how?</p>\n</blockquote>\n\n<p>Yes, you're right. You should set modifier1 to 5, but <a href=\"http://uwsgi-docs.readthedocs.org/en/latest/Apache.html#mod-proxy-uwsgi\" rel=\"nofollow\">uwsgi docs</a> says about mod_proxy_uwsgi:</p>\n\n<blockquote>\n  <p>Currently the module lacks the ability to set modifiers, though this will be fixed soon.</p>\n</blockquote>\n\n<p>That means, you can't pass modifier to uWSGI instance using this method (uWSGI will use modifier 0 if not supplied)</p>\n\n<p>To fix that issue, you can move to <a href=\"http://uwsgi-docs.readthedocs.org/en/latest/Apache.html#mod-uwsgi\" rel=\"nofollow\">mod_uwsgi</a> or change modifier on which psgi is loaded, using:</p>\n\n<pre><code>plugins   = 0:psgi\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>plugins   = psgi\n</code></pre>\n"}], "owner": {"reputation": 8016, "user_id": 196241, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9b0541fbc7bb5d5bd29aa59c96315c37?s=128&d=identicon&r=PG", "display_name": "w.k", "link": "https://stackoverflow.com/users/196241/w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 34881971, "answer_count": 1, "score": 6, "last_activity_date": 1453220932, "creation_date": 1453164389, "question_id": 34866724, "link": "https://stackoverflow.com/questions/34866724/why-dancer-app-fails-under-uwsgi-apache", "title": "Why Dancer app fails under uWSGI + Apache?", "body": "<p>My <a href=\"http://perldancer.org\">Dancer</a> app fails under uWSGI (2.0.7) + Apache (2.4.10) combination while it runs freely in other environments ( uWSGI + nginx, Starman + Apache, Dancer own dev-server). I don't find in logs any meaningful information. So I made simple test app like</p>\n\n<pre><code>$ dancer -a tset\n</code></pre>\n\n<p>Then copied default <code>production.yml</code> into <code>uwsgi.yml</code>, linked <code>bin/app.pl</code> into <code>bin/app.psgi</code> created <code>tset.ini</code> like this:</p>\n\n<pre><code>[uwsgi]                                                                                                                                                                             \nplugins   = psgi                                                                                                                                                                    \nsocket    = 127.0.0.1:3033                                                                                                                                                          \nuid       = www                                                                                                                                                                     \ngid       = www-data                                                                                                                                                                \nchdir     = /home/www/apps/tset/bin/                                                                                                                                                \npsgi      = app.psgi                                                                                                                                                                \nprocesses = 1                                                                                                                                                                       \nmaster    = true  \n</code></pre>\n\n<p>Made this ini available for uWsgi in <code>/etc/uwsgi/apps-available</code>, linked it into <code>/etc/uwsgi/apps-enabled</code>.</p>\n\n<p>Restarted <code>uwsgi</code> service. </p>\n\n<p>Then for Apache (2.4.10) module <code>mod-proxy-uwsgi</code> added few lines into my virtualhost conf:</p>\n\n<pre><code>ProxyPass /adm/y uwsgi://127.0.0.1:3033/\n</code></pre>\n\n<p>This seems most fragile point, because I feel like I need to set <code>uWSGIModifier1 5</code> here but did not figured out where and how?</p>\n\n<p>Restarted Apache and got \"Internal Server Error\". In uwsgi log I see just: </p>\n\n<pre><code>Tue Jan 19 02:10:36 2016 - spawned uWSGI worker 1 (pid: 21712, cores: 1)\nTue Jan 19 02:10:56 2016 - -- unavailable modifier requested: 0 --\nTue Jan 19 02:24:44 2016 - -- unavailable modifier requested: 0 --\nTue Jan 19 02:27:14 2016 - -- unavailable modifier requested: 0 --\nTue Jan 19 02:27:17 2016 - -- unavailable modifier requested: 0 --\n</code></pre>\n\n<p>What is this \"unavailable modifier requested\"?</p>\n\n<p>In apache error.log is no entries, in access.log are entries, but no other information than status 500.</p>\n\n<p>Such behavior is reproducible with steps above, so I hope you figure out, what is wrong in this combination?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1453159871, "post_id": 34865876, "comment_id": 57471265, "body": "But... wouldn&#39;t you then put your module under version control and have the same problem that you have now? Better to commit a sample file to version control (<i>file.sample.conf</i>) and set the real one (<i>file.conf</i>) to be ignored."}, {"owner": {"reputation": 1, "user_id": 5807713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff982a025880990f1fbbde5dadd2566?s=128&d=identicon&r=PG&f=1", "display_name": "Julio G.", "link": "https://stackoverflow.com/users/5807713/julio-g"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1453160756, "post_id": 34865876, "comment_id": 57471608, "body": "Yes, but I was thinking about commiting once (as a template) and then never adding it to the commit again. So for every change in my script i could use <code>git add myscript.pl</code> and the changes to <code>mymodule.pm</code> wouldn&#39;t be commited. But thinking about it, it does seem quite bad."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1453161567, "post_id": 34865876, "comment_id": 57471854, "body": "You would definitely want to put the config in its own file separate from any logic, and put that file into your .gitignore."}], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1453161469, "creation_date": 1453161469, "answer_id": 34866272, "question_id": 34865876, "link": "https://stackoverflow.com/questions/34865876/should-i-export-configuration-from-a-module-file-or-parse-it-from-another-file/34866272#34866272", "title": "Should I export configuration from a module file or parse it from another file?", "body": "<p>One strategy that works reasonably well is to create a template/example config file and only put <em>that</em> file under version control. You would then set the \"real\" config file to be ignored using whatever constructs your revision control system provides for that task. (Here's how to do it in <a href=\"http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.ignore.html\" rel=\"nofollow\">Subversion</a>, <a href=\"http://git-scm.com/docs/gitignore\" rel=\"nofollow\">Git</a>, and <a href=\"https://www.mercurial-scm.org/wiki/.hgignore\" rel=\"nofollow\">Mercurial</a>.)</p>\n\n<p>For example, you might check in <em>app.sample.conf</em>, which other people would then copy to <em>app.conf</em> upon checkout/cloning of your repo. </p>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 0, "last_activity_date": 1453161674, "creation_date": 1453161674, "answer_id": 34866318, "question_id": 34865876, "link": "https://stackoverflow.com/questions/34865876/should-i-export-configuration-from-a-module-file-or-parse-it-from-another-file/34866318#34866318", "title": "Should I export configuration from a module file or parse it from another file?", "body": "<p>The usual solution is to put a sample config with dummy values in version control, and set it up so that the real config file is ignored by the version control system so it doesn't accidentally get checked in as well.</p>\n\n<p>Alternatively, you could go with the <a href=\"http://12factor.net\" rel=\"nofollow\">twelve-factor</a> <a href=\"http://12factor.net/config\" rel=\"nofollow\">solution</a> and get your configuration values from environment variables instead of a file.</p>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1453163419, "last_edit_date": 1453163419, "creation_date": 1453162268, "answer_id": 34866414, "question_id": 34865876, "link": "https://stackoverflow.com/questions/34865876/should-i-export-configuration-from-a-module-file-or-parse-it-from-another-file/34866414#34866414", "title": "Should I export configuration from a module file or parse it from another file?", "body": "<p>Yet another way is ask the user for the creds on first run, saving them to a configuration file that will never be needed in your git repo. After the first run, the user can then edit this config file to change the details. However, having a sample file in your git repo with defaults will allow a user to manually set one up by themselves though.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Config::Tiny;\n\nmy $file = 'myapp.ini';\nmy $config = Config::Tiny-&gt;new;\n\nmy ($un, $pw);\n\nif (! -e $file){\n\n    print \"what's your username?: \";\n    $config-&gt;{user}{un} = &lt;&gt;;\n\n    print \"what's your password?: \";\n    $config-&gt;{user}{pw} = &lt;&gt;;\n\n    $config-&gt;write($file);\n}\n\n$config = $config-&gt;read($file);\n\n$un = $config-&gt;{user}{un};\n$pw = $config-&gt;{user}{pw};\n\nprint \"un: $un, pw: $pw\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1453166956, "creation_date": 1453166956, "answer_id": 34867081, "question_id": 34865876, "link": "https://stackoverflow.com/questions/34865876/should-i-export-configuration-from-a-module-file-or-parse-it-from-another-file/34867081#34867081", "title": "Should I export configuration from a module file or parse it from another file?", "body": "<p>I think the distinction is less between <em>code</em> and <em>data</em>, and more about whether a particular chunk of the project is <em>mutable</em> or not. This is most clear with declarative languages like CSS and HTML, where it is hard to say whether we are talking about code or data, compared to JavaScript, which is clearly \u201ccode\u201d just because it is procedural</p>\n\n<p>Even mutability is hard to tie down because it depends on a particular <em>view</em> of the project. During development everything is mutable, whereas after deployment everything is fixed except the documents that the application works with and the configuration data. It can even be said that the configuration is \u201cless\u201d mutable than the app's documents</p>\n\n<p>The HTML, CSS and JavaScript model of web pages is also useful to show another clear distinction: that of <em>purpose</em>. The trinity correspond to the <em>content</em>, <em>presentation</em> and <em>functionality</em> of a web page respectively, and I think we can draw from this the guiding principle to \u201ckeep like layers together\u201d, whether the sameness is in mutability, purpose, or something else that we haven't thought of yet</p>\n\n<p>Regardless, I think configuration data is different from any other part of the project in almost every way. It is both code and data, and it can be thought of initially as just another app document until a couple of years have passed without it being changed, when it becomes immutable, or effectively so, and really part of the code</p>\n\n<p>One other thing I want to throw into the mix here is that I believe an application should work and do <em>something</em> sensible and useful without any configuration at all. The obvious way to do this is to have a default configuration that is loaded and used when the app starts up and finds itself without custom config data. At that point it will pull in the default config and start running accordingly, writing the current steup to a live config when the app exits</p>\n\n<p>My recommendation then is to write a <em>default</em> config file that is part of the project, and have the app use that only when it is started in a vacuum. Thereafter a live config file will be maintained that can be edited as desired. The default and the live config should be in the same format, and since we don't want to be writing Perl modules to store our config data, they should be in XML, YAML, JSON, or whatever. The default config will be part of the proiject, and the live config will be treated like a very special application document</p>\n"}], "owner": {"reputation": 1, "user_id": 5807713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ff982a025880990f1fbbde5dadd2566?s=128&d=identicon&r=PG&f=1", "display_name": "Julio G.", "link": "https://stackoverflow.com/users/5807713/julio-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1453166956, "creation_date": 1453159023, "question_id": 34865876, "link": "https://stackoverflow.com/questions/34865876/should-i-export-configuration-from-a-module-file-or-parse-it-from-another-file", "title": "Should I export configuration from a module file or parse it from another file?", "body": "<p>I have a script that requires password, login and other custom settings from the user. As of right now I have it hardcoded inside the perl script. It is somewhat troublesome, because I'm constantly working in it and commiting it back to a public remote git repository. And everytime I commit the changes I have to remember to unset the variables with personal information and custom settings.</p>\n\n<p>So I was wondering whether I should create a module just to wrap this variables and then use the module inside the script or if I should create a file (json, xml, text, whatever) and then parse this file on my script to get the personal information and settings. The people who'll use the script are no strange to programming, so it's not like an organized file will make things easier on the end user side. Since I'm a noob, I don't see why should I parse a file when I could just use the module, that's why I'm inclined to use the module. Is it a bad practice?</p>\n"}, {"tags": ["regex", "unicode", "command-line", "perl"], "answers": [{"comments": [{"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1453155273, "post_id": 34864896, "comment_id": 57469427, "body": "This is confusing.  My understanding was that <code>use ...</code> implies a <code>BEGIN { ... }</code>.  I thought this meant that it would happen before any of the rest of the code is processed..."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1453155913, "post_id": 34864896, "comment_id": 57469696, "body": "Thanks.  FWIW, the version you show with only <code>-Ci</code> (as opposed to <code>-CiO</code>) fails with the input given in the question, due to the <code>use warnings qw(FATAL utf8)</code> together with the presence of wide characters in the output.  Getting rid of the <code>use warnings qw(FATAL utf8)</code> allows the program to finish, but still a warning gets printed.  Bottom-line: it has to be <code>-CiO</code>, not <code>-Ci</code>."}, {"owner": {"reputation": 1017, "user_id": 828854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AjIZY.jpg?s=128&g=1", "display_name": "Michael Homer", "link": "https://stackoverflow.com/users/828854/michael-homer"}, "reply_to_user": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "edited": false, "score": 0, "creation_date": 1453156410, "post_id": 34864896, "comment_id": 57469897, "body": "<code>use</code> is a bit magical some of the time. Good point about the warnings - edited now."}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1453158774, "post_id": 34864896, "comment_id": 57470856, "body": "OP: Note that you can also include required modules at the CLI prior to the <code>-e|-E</code> switch: <code>perl -Mstrict -Mopen=:std,:utf8 -Mwarnings=FATAL,utf8 -e &#39;BEGIN{...</code>. (posted as comment as to not take away from this answer)."}], "tags": [], "owner": {"reputation": 1017, "user_id": 828854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AjIZY.jpg?s=128&g=1", "display_name": "Michael Homer", "link": "https://stackoverflow.com/users/828854/michael-homer"}, "is_accepted": true, "score": 3, "last_activity_date": 1453156115, "last_edit_date": 1453156115, "creation_date": 1453154650, "answer_id": 34864896, "question_id": 34864629, "link": "https://stackoverflow.com/questions/34864629/unicode-error-only-when-code-run-with-n-flag-at-the-command-line/34864896#34864896", "title": "Unicode error only when code run with -n flag at the command-line", "body": "<blockquote>\n  <p>The only difference between the \"in-file script\" (demo.pl) and the CLI one-liner is that the former explicitly wraps the body of the script with while ( &lt;> ) { ... }, whereas for the latter, the -n flag causes this wrapper to be inserted automatically.</p>\n</blockquote>\n\n<p>Yes, exactly \u2014 <code>-n</code> wraps <em>all</em> the code in <code>while (&lt;&gt;) { ... }</code>. That includes your <code>use utf8;</code> and <code>use open(:utf8);</code> lines, so <strong>the file is already open by the time you enable Unicode</strong>.</p>\n\n<p>You can easily validate this by running the equivalent program to the <code>-n</code> version:</p>\n\n<pre><code>while (&lt;&gt;) {\n    # demo.pl\n    use strict;\n    use utf8;\n    use open qw(:std :utf8);\n    use warnings qw(FATAL utf8);\n    BEGIN { $/ = $\\ = undef; }\n    s/\\n\\z//;\n    s/\\n/\\\\n/g, print \"$_\\n\" for split /\\n(?=[^\\W\\d]\\w*=)/;\n}\n</code></pre>\n\n<p>and seeing the same effect.</p>\n\n<hr>\n\n<p>More interestingly, you can see that the <code>use</code> declarations do still have an effect: run the exact same input file through twice</p>\n\n<pre><code>perl demo.pl INPUTFILE INPUTFILE\n</code></pre>\n\n<p>and you get two outputs, the first one broken, the second one correct. That also happens with your one-liner.</p>\n\n<hr>\n\n<p>You can enable UTF-8 for input by default using the <a href=\"http://perldoc.perl.org/perlrun.html#*-C-[_number/list_]*\" rel=\"nofollow\"><code>-C</code> flag with the <code>i</code></a> (8) option:</p>\n\n<pre><code>perl -CiO -ne 'use strict; use utf8; BEGIN { $/ = $\\ = undef; } s/\\n\\z//; s/\\n/\\\\n/g, print \"$_\\n\" for split /\\n(?=[^\\W\\d]\\w*=)/;' INPUTFILE\n</code></pre>\n\n<p>That ensures that UTF-8 is enabled before the file is opened, and you get the correct output. The <code>O</code> enables UTF-8 for standard output as well, so that you can print it.</p>\n"}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 34864896, "answer_count": 1, "score": 1, "last_activity_date": 1453156115, "creation_date": 1453153567, "last_edit_date": 1453155143, "question_id": 34864629, "link": "https://stackoverflow.com/questions/34864629/unicode-error-only-when-code-run-with-n-flag-at-the-command-line", "title": "Unicode error only when code run with -n flag at the command-line", "body": "<p>The following simple script (basically) slurps in its input, splits it according to a regexp, replaces all newlines in each element of the resulting list, and prints out the modified elements one-by-one:</p>\n\n<pre><code># demo.pl\nuse strict;\nuse utf8;\nuse open qw(:std :utf8);\nuse warnings qw(FATAL utf8);\n\nBEGIN { $/ = $\\ = undef; }\n\nwhile ( &lt;&gt; ) {\n  s/\\n\\z//;\n  s/\\n/\\\\n/g, print \"$_\\n\" for split /\\n(?=[^\\W\\d]\\w*=)/;\n}\n</code></pre>\n\n<p>When given an input file (<code>INPUTFILE</code>) with the following (UTF8-encoded) contents as its argument</p>\n\n<pre><code>A=42\n\u03a6\u03a1\u03a9\u0392\u03a9\u0396\u0396=ABCDEFGHIJKLMNOPQRSTUVWXYZ\n_B_C_D12=\nfoo\n345bar=nope\nbaz\n  =whatever=\nX_Y_Z=quux\n</code></pre>\n\n<p>...it prints out the desired output, namely:</p>\n\n<pre><code>% perl demo.pl INPUTFILE\nA=42\n\u03a6\u03a1\u03a9\u0392\u03a9\u0396\u0396=ABCDEFGHIJKLMNOPQRSTUVWXYZ\n_B_C_D12=\\nfoo\\n345bar=nope\\nbaz\\n  =whatever=\nX_Y_Z=quux\n</code></pre>\n\n<p>In contrast, the following almost identical CLI one-liner</p>\n\n<pre><code>% perl -ne 'use strict; use utf8; use open qw(:std :utf8); use warnings qw(FATAL utf8); BEGIN { $/ = $\\ = undef; } s/\\n\\z//; s/\\n/\\\\n/g, print \"$_\\n\" for split /\\n(?=[^\\W\\d]\\w*=)/;' INPUTFILE\n</code></pre>\n\n<p>...produces the following for the same input file</p>\n\n<pre><code>A=42\\n\u00ce\u00a6\u00ce\u00a1\u00ce\u00a9\u00ce\u00ce\u00a9\u00ce\u00ce=ABCDEFGHIJKLMNOPQRSTUVWXYZ\n_B_C_D12=\\nfoo\\n345bar=nope\\nbaz\\n  =whatever=\nX_Y_Z=quux\n</code></pre>\n\n<p>There are (apparently) two problems here:</p>\n\n<ol>\n<li>the regular expression fails to separate the first and second items;</li>\n<li>the output contains an illegible substring.</li>\n</ol>\n\n<p>(I expect that both problems will have the same underlying cause.)</p>\n\n<hr>\n\n<p>The only difference between the \"in-file script\" (<code>demo.pl</code>) and the CLI one-liner is that the former explicitly wraps the body of the script with <code>while ( &lt;&gt; ) { ... }</code>, whereas for the latter, the <code>-n</code> flag causes this wrapper to be inserted automatically.</p>\n\n<p><strong>Q:</strong> How must the one-liner above be modified so that it produces the desired result <em>with the <code>-n</code> flag</em>?</p>\n\n<hr>\n\n<p>BTW, not surprisingly, the <em>exact</em> command-line equivalent of <code>demo.pl</code> (without the <code>-n</code> flag), namely</p>\n\n<pre><code>% perl -e 'use strict; use utf8; use open qw(:std :utf8); use warnings qw(FATAL utf8); BEGIN { $/ = $\\ = undef; } while ( &lt;&gt; ) { s/\\n\\z//; s/\\n/\\\\n/g, print \"$_\\n\" for split /\\n(?=[^\\W\\d]\\w*=)/; }' INPUTFILE\n</code></pre>\n\n<p>also produces the desired output.</p>\n\n<p>So the problem, whatever it is, has something to do with the <code>-n</code> flag.</p>\n\n<hr>\n\n<p>FWIW:</p>\n\n<pre><code>% perl -v | head -2\n\nThis is perl 5, version 20, subversion 2 (v5.20.2) built for x86_64-linux-gnu-thread-multi\n</code></pre>\n\n<hr>\n\n<p>EDIT: One more clue: if the input to the failing one-liner is passed through <code>STDIN</code> rather than as a filename in <code>@ARGV</code> (e.g. replace <code>INPUTFILE</code> with <code>&lt; INPUTFILE</code>), then it produces <s>the desired output</s> fully legible, <strong>though still incorrect</strong>, output:</p>\n\n<pre><code>A=42\\n\u03a6\u03a1\u03a9\u0392\u03a9\u0396\u0396=ABCDEFGHIJKLMNOPQRSTUVWXYZ\n_B_C_D12=\\nfoo\\n345bar=nope\\nbaz\\n  =whatever=\nX_Y_Z=quux\n</code></pre>\n\n<p>My current guess is that <code>use open qw(:std :utf8)</code> does not cover the input stream that <code>&lt;&gt;</code> reads from when the input is passed as a filename in <code>@ARGV</code>.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1453153297, "post_id": 34864534, "comment_id": 57468544, "body": "<a href=\"http://p3rl.org/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1453153655, "creation_date": 1453153655, "answer_id": 34864652, "question_id": 34864534, "link": "https://stackoverflow.com/questions/34864534/perl-regex-efficient-way-to-keep-matching-sub-string/34864652#34864652", "title": "Perl regex efficient way to keep matching sub-string?", "body": "<p>Well, for starters:</p>\n\n<pre><code>$_ =~\n</code></pre>\n\n<p>Is usually redundant. </p>\n\n<p>Otherwise - use <a href=\"http://search.cpan.org/~makamaka/Text-CSV-1.33/lib/Text/CSV.pm\" rel=\"nofollow\"><code>Text::CSV</code></a> and parse it: </p>\n\n<pre><code>my $csv = Text::CSV -&gt; new (); \nwhile ( my $row = $csv -&gt; getline ( $filehandle ) ) { \n    $row -&gt; [1] =~ s/=\\\"(\\d+)\\\"/$1/;\n    $row -&gt; [1] =~ s/,//g; \n    $csv -&gt; print ( \\*STDOUT, $row ); \n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 1161204, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0468e4b40c8a0a69b2cdb07bbadddf6?s=128&d=identicon&r=PG", "display_name": "OBoud", "link": "https://stackoverflow.com/users/1161204/oboud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 34864652, "answer_count": 1, "score": 1, "last_activity_date": 1453153655, "creation_date": 1453153068, "question_id": 34864534, "link": "https://stackoverflow.com/questions/34864534/perl-regex-efficient-way-to-keep-matching-sub-string", "title": "Perl regex efficient way to keep matching sub-string?", "body": "<p>I'm trying to clean up some sloppy address fields in a csv.</p>\n\n<pre><code>start_of_lineA,=\"123456789\",end_of_lineA\nstart_of_lineB,=\"234560000\",end_of_lineB\nstart_of_lineC,34567,end_of_lineC\n</code></pre>\n\n<p>that I'm cleaning up to:</p>\n\n<pre><code>start_of_lineA,12345,end_of_lineA\nstart_of_lineB,23456,end_of_lineB\nstart_of_lineC,34567,end_of_lineC\n</code></pre>\n\n<p>And some street address entries that contain commas which I can just drop:</p>\n\n<pre><code>start_of_lineD,\"123 Foo St, #1\",End_of_lineD\nstart_of_lineE,\"456 Bar Lane, suite A, B\",End_of_lineE\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>start_of_lineD,\"123 Foo St\",End_of_lineD\nstart_of_lineE,\"456 Bar Lane\",End_of_lineE\n</code></pre>\n\n<p>So far what I've come up with is:</p>\n\n<pre><code>  chomp;\n  if($_ =~ m/=\"/)\n  {\n    $_ =~ s/=\"\\d{5}\\K\\d*\"//g;\n    $_ =~ s/=\"//g;\n  }\n  if($_ =~ m/\"[^\"|^,]+,[^\"]*\"/)\n  {\n    $_ =~ s/\"[^\"|^,]+\\K,[^\"]*\"//g;\n    $_=~ s/\"//g;\n  }\n  @line = split(/,/,$_);\n  etc.\n</code></pre>\n\n<p>While it works, it seems inelegant. Is there a cleaner way?</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 3905, "user_id": 250944, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/725bf8f1d6111d05c7b7887d7f3ce7da?s=128&d=identicon&r=PG", "display_name": "Dfr", "link": "https://stackoverflow.com/users/250944/dfr"}, "is_accepted": false, "score": 1, "last_activity_date": 1453143871, "creation_date": 1453143871, "answer_id": 34862180, "question_id": 34861915, "link": "https://stackoverflow.com/questions/34861915/perl-syntactical-details-list-context-with-or-without-parens/34862180#34862180", "title": "Perl syntactical details - list context with or without parens?", "body": "<p>This is described in perldoc on <code>map</code>: <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\">http://perldoc.perl.org/functions/map.html</a></p>\n\n<p>In short you should use little helper like parens or <code>+</code>-symbol so perl will be able to parse <code>{...}</code> construct correctly:</p>\n\n<pre><code>my $r = someSubroutine( map { + 0 =&gt; $_ } @hosts)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 345, "user_id": 1792486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lh2g.jpg?s=128&g=1", "display_name": "Skylos", "link": "https://stackoverflow.com/users/1792486/skylos"}, "edited": false, "score": 0, "creation_date": 1453146636, "post_id": 34862387, "comment_id": 57465015, "body": "Borodin: toolic is correct: my map is the input to the subroutine, not a scalar.  Were it in a scalar context that would be true, but its not.  It really looks like this:  `  184         my $r = $self-&gt;sql_statement(  185             &#39;INSERT INTO project_sites (project_id, hostname) VALUES &#39;  186                 . join( &#39;, &#39;, map {&#39;(?, ?)&#39;} @{ $self-&gt;{hosts} } ),  187             map { ( 0 =&gt; $_ ) } @{ $self-&gt;{hosts} }  188         ); `"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 345, "user_id": 1792486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lh2g.jpg?s=128&g=1", "display_name": "Skylos", "link": "https://stackoverflow.com/users/1792486/skylos"}, "edited": false, "score": 0, "creation_date": 1453146723, "post_id": 34862387, "comment_id": 57465058, "body": "@Skylos: Ah, I completely overlooked the <code>someSubroutine()</code>. And I read toolic&#39;s comment as <i>The op code ...</i> rather than <i>The OP&#39;s code</i>. I thought he&#39;d been looking at the output from <a href=\"http://metacpan.org/module/B::Terse\" rel=\"nofollow noreferrer\">B::Terse</a> or something. Thanks"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1453168026, "last_edit_date": 1453168026, "creation_date": 1453144750, "answer_id": 34862387, "question_id": 34861915, "link": "https://stackoverflow.com/questions/34861915/perl-syntactical-details-list-context-with-or-without-parens/34862387#34862387", "title": "Perl syntactical details - list context with or without parens?", "body": "<p>First of all, this is a very strange statement. The list that <code>map</code> produces will look like</p>\n\n<pre><code>0, $hosts[0], 0, $hosts[1], 0, $hosts[2], ...\n</code></pre>\n\n<p>so it's useless for assignment to a hash as it would be the same as</p>\n\n<pre><code>my  %hash = (0 =&gt; $hosts[-1])\n</code></pre>\n\n<p><code>map</code> will accept either a <em>BLOCK</em> (which is what you're using) or a simple <em>EXPRESSION</em> for its first parameter. The problem here is that <code>{ 0 =&gt; $_ }</code> looks very  like an anonymous hash with a single element, which is an <em>EXPRESSION</em>, and that is what the parser guesses it is. An <em>EXPRESSION</em> requires a comma after it, before the second parameter, but when perl gets to the closing brace in <code>map { 0 =&gt; $_ } @hosts</code> it doesn't find one so it has to throw a syntax error as it is too far to backtrack to the opening brace and assume a block instead</p>\n\n<p><a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow\">The documentation</a> puts it like this</p>\n\n<blockquote>\n  <p><code>{</code> starts both hash references and blocks, so <code>map { ...</code> could be either the start of map BLOCK LIST or map EXPR, LIST. Because Perl doesn't look ahead for the closing <code>}</code> it has to take a guess at which it's dealing with based on what it finds just after the <code>{</code>. Usually it gets it right, but if it doesn't it won't realize something is wrong until it gets to the <code>}</code> and encounters the missing (or unexpected) comma. The syntax error will be reported close to the <code>}</code>, but you'll need to change something near the <code>{</code> such as using a unary <code>+</code> or semicolon to give Perl some help</p>\n</blockquote>\n\n<p>The solution is to disambiguate it as you discovered. Any of these will work</p>\n\n<pre><code>map +( 0 =&gt; $_ ), @hosts\n\nmap(( 0 =&gt; $_ ), @hosts)\n\nmap { +0 =&gt; $_ } @hosts\n\nmap { ( 0 =&gt; $_ ) } @hosts\n\nmap { ; 0 =&gt; $_ } @hosts\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1453208257, "last_edit_date": 1453208257, "creation_date": 1453147070, "answer_id": 34863027, "question_id": 34861915, "link": "https://stackoverflow.com/questions/34861915/perl-syntactical-details-list-context-with-or-without-parens/34863027#34863027", "title": "Perl syntactical details - list context with or without parens?", "body": "<p><code>map</code> has two syntax:</p>\n\n<pre><code>map BLOCK LIST   e.g. map { f() } g()\nmap EXPR, LIST   e.g. map f(), g()\n</code></pre>\n\n<p>When Perl encounters <code>map</code>, it needs to determine which syntax was used. Let's say the first token after <code>map</code> is <code>{</code>. That's the start of a BLOCK, right? Hold on! Expressions can start with <code>{</code> too! </p>\n\n<pre><code>my $hash_ref = { key =&gt; 'val' };\n</code></pre>\n\n<p>The grammar is ambiguous. Perl has to \"guess\" which syntax you are using. Perl looks ahead at the next token to help guess, but sometimes it guesses incorrectly nonetheless. This is one of those cases.</p>\n\n<p>The following are the standard workarounds for this:</p>\n\n<pre><code>map {; ... } LIST    # Force Perl to recognize the curly as the start of a BLOCK\nmap +{ ... }, LIST   # Force Perl to recognize the curly as the start of a hash constructor\n</code></pre>\n\n<ul>\n<li><code>;</code> can't be part of a hash constructor, so the <code>{</code> can only start a BLOCK.</li>\n<li><code>+</code> necessarily starts an EXPR (and not a BLOCK). It's an operator that does nothing but help in situations like this.</li>\n</ul>\n\n<p>For example,</p>\n\n<pre><code>map {; +{ $row-&gt;{id} =&gt; $row-&gt;{val} } } @rows\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 1792486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3lh2g.jpg?s=128&g=1", "display_name": "Skylos", "link": "https://stackoverflow.com/users/1792486/skylos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 34862387, "answer_count": 3, "score": 2, "last_activity_date": 1453208257, "creation_date": 1453142923, "last_edit_date": 1453143236, "question_id": 34861915, "link": "https://stackoverflow.com/questions/34861915/perl-syntactical-details-list-context-with-or-without-parens", "title": "Perl syntactical details - list context with or without parens?", "body": "<p>This works:</p>\n\n<pre><code>my $r = someSubroutine( map { ( 0 =&gt; $_ ) } @hosts)\n</code></pre>\n\n<p>This does not work, giving a syntax error:</p>\n\n<pre><code>my $r = someSubroutine( map { 0 =&gt; $_ } @hosts)\n</code></pre>\n\n<p>What I think I understand is that the <code>{ }</code> after the map amounts to a closure or anonymous subroutine.</p>\n\n<p>But if I put a \"<code>value, value</code>\" at the end of a normal subroutine, it will return a list of those values. If I use this brevity with the map, it is a syntax error.</p>\n"}, {"tags": ["perl", "extract", "archive"], "comments": [{"owner": {"reputation": 2786, "user_id": 1263565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a387c319e911adcdd5996d7af0d578?s=128&d=identicon&r=PG&f=1", "display_name": "Hayden", "link": "https://stackoverflow.com/users/1263565/hayden"}, "edited": false, "score": 1, "creation_date": 1453142182, "post_id": 34861657, "comment_id": 57462708, "body": "Could use something like: <code>die &quot;$deployDir does not exist&quot; unless -d $deployDir</code>"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1453148222, "last_edit_date": 1453148222, "creation_date": 1453142267, "answer_id": 34861738, "question_id": 34861657, "link": "https://stackoverflow.com/questions/34861657/how-do-i-force-extraction-to-fail-if-the-destination-directory-doesnt-exist/34861738#34861738", "title": "How do I force extraction to fail if the destination directory doesn&#39;t exist?", "body": "<p>There's nothing in the module that allows you to disable the automatic creation of the directory, so you just check it in a separate statement prior to the <code>extract</code> call</p>\n\n<pre><code>-d $deployDir or die {Deployment directory \"$deployDir\" doesn't exist};\n</code></pre>\n\n<p>Or you could use <a href=\"http://metacpan.org/module/autodie\" rel=\"nofollow\"><code>autodie</code></a> and try to open it as a directory. That way the system will generate a <code>die</code> message for you. Like this</p>\n\n<pre><code>{\n    use autodie;\n    opendir my ($dh), $deployDir;\n}\n</code></pre>\n\n<p>This requires Perl v5.10.1 or later. The braces <code>{ ... }</code> around the code are required. They limit the scope of <code>autodie</code> and automatically close the directory handle again immediately</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 34861738, "answer_count": 1, "score": 1, "last_activity_date": 1453148222, "creation_date": 1453141933, "last_edit_date": 1453142641, "question_id": 34861657, "link": "https://stackoverflow.com/questions/34861657/how-do-i-force-extraction-to-fail-if-the-destination-directory-doesnt-exist", "title": "How do I force extraction to fail if the destination directory doesn&#39;t exist?", "body": "<p>I\u2019m using Perl 5.16.3 with <a href=\"http://metacpan.org/module/Archive::Extract\" rel=\"nofollow\"><code>Archive::Extract</code></a></p>\n\n<p>I am extracting a zip file, but I would like Perl to fail (die) if the destination directory doesn\u2019t exist. Currently the below code does not fail, but creates the directory before extraction takes place</p>\n\n<pre><code>use Archive::Extract;\n...\n\nmy $ae = Archive::Extract-&gt;new( archive =&gt; $downloadedFile, type =&gt; 'zip' );\nmy $ok = $ae-&gt;extract( to =&gt; $deployDir ) or die $ae-&gt;error;\n</code></pre>\n\n<p>How can I force things to die if the destination directory doesn\u2019t exist?</p>\n"}, {"tags": ["javascript", "forms", "perl", "cgi"], "comments": [{"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1453139475, "post_id": 34860879, "comment_id": 57461285, "body": "From the CGI.pm documentation: <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#HTML-Generation-functions-should-no-longer-be-used\" rel=\"nofollow noreferrer\">HTML Generation functions should no longer be used</a>."}, {"owner": {"reputation": 7, "user_id": 5731079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQp6P.png?s=128&g=1", "display_name": "WhoYaGonnaCall", "link": "https://stackoverflow.com/users/5731079/whoyagonnacall"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1453217354, "post_id": 34860879, "comment_id": 57499265, "body": "Thank you for providing this link and making me aware of this. In this link it provides an alternatives page: <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">metacpan.org/pod/CGI::Alternatives</a>. The page lists some other perl modules like Mojolicious and Dancer2. Do those modules work in conjunction with CGI.pm or are the replacements to it?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1453221002, "post_id": 34860879, "comment_id": 57501883, "body": "Those are alternatives to it. If you want to continue using CGI.pm then stick to the &quot;RAW GCI.pm Examples&quot; section."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 5731079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQp6P.png?s=128&g=1", "display_name": "WhoYaGonnaCall", "link": "https://stackoverflow.com/users/5731079/whoyagonnacall"}, "edited": false, "score": 0, "creation_date": 1453217725, "post_id": 34861000, "comment_id": 57499529, "body": "This seems like an excellent idea Quentin! I&#39;m having a little problem with getting the button off the page. the -tabindex argument doesn&#39;t seem to have any affect on the button?                                                    $cgi-&gt;submit(-name =&gt; &#39;submit&#39;, -value =&gt; &#39;Modify&#39;, -tabindex =&gt; &#39;-1&#39;),"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 7, "user_id": 5731079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQp6P.png?s=128&g=1", "display_name": "WhoYaGonnaCall", "link": "https://stackoverflow.com/users/5731079/whoyagonnacall"}, "edited": false, "score": 0, "creation_date": 1453221155, "post_id": 34861000, "comment_id": 57501989, "body": "@WhoYaGonnaCall \u2014 Generates the tabindex attribute fine when I test that. <a href=\"https://www.evernote.com/l/AAPvY6-tGpRIE56f2mRtWTg4deff7WKelMw\" rel=\"nofollow noreferrer\">evernote.com/l/AAPvY6-tGpRIE56f2mRtWTg4deff7WKelMw</a> and when I build a <a href=\"http://jsbin.com/vuzehi/1/edit?html,output\" rel=\"nofollow noreferrer\">live example</a> of the HTML, pressing tab skips over the middle button as expected."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1453139424, "creation_date": 1453139424, "answer_id": 34861000, "question_id": 34860879, "link": "https://stackoverflow.com/questions/34860879/default-submit-button-for-enter-key/34861000#34861000", "title": "Default Submit button for &quot;Enter&quot; key", "body": "<blockquote>\n  <p>I don't know what layer is responsible</p>\n</blockquote>\n\n<p>That's basic handling of HTML forms in the browser.</p>\n\n<blockquote>\n  <p>but it seems that whichever submit button is displayed first on the form that is the one that will execute when you click \"Enter\" on the keyboard.</p>\n</blockquote>\n\n<p>Correct</p>\n\n<blockquote>\n  <p>How can I set a default submit button when the user clicks the \"Enter\" key on a Perl CGI form, with multiple submit buttons, in any order?</p>\n</blockquote>\n\n<p>At the beginning of the form, duplicate the submit button. Since it is now the first button, it will be triggered when the form is submitted by pressing Enter in a text input. </p>\n\n<p>Set <code>tabindex=\"-1\"</code> on it so it will be out of the normal focus order.</p>\n\n<p>Position it off-screen so that it will not appear to users. </p>\n"}, {"tags": [], "owner": {"reputation": 7, "user_id": 5731079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQp6P.png?s=128&g=1", "display_name": "WhoYaGonnaCall", "link": "https://stackoverflow.com/users/5731079/whoyagonnacall"}, "is_accepted": false, "score": 0, "last_activity_date": 1453228131, "creation_date": 1453228131, "answer_id": 34884341, "question_id": 34860879, "link": "https://stackoverflow.com/questions/34860879/default-submit-button-for-enter-key/34884341#34884341", "title": "Default Submit button for &quot;Enter&quot; key", "body": "<p>There is an attribute in HTML called \"hidden\". It can be used to hide elements. Often times a condition must be satisfied before an element is shown. </p>\n\n<p>In <strong>CGI.pm</strong> you can work-around the default submit button for the 'Enter' key by hiding a duplicate of the one you want. Add the button you want to be the default to the top of your form and add the '-hidden' attribute.</p>\n\n<pre><code> $cgi-&gt;submit(-name =&gt; 'submit', -value =&gt; 'Modify', -hidden),\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 5731079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQp6P.png?s=128&g=1", "display_name": "WhoYaGonnaCall", "link": "https://stackoverflow.com/users/5731079/whoyagonnacall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 0, "accepted_answer_id": 34861000, "answer_count": 2, "score": 0, "last_activity_date": 1453228131, "creation_date": 1453138995, "question_id": 34860879, "link": "https://stackoverflow.com/questions/34860879/default-submit-button-for-enter-key", "title": "Default Submit button for &quot;Enter&quot; key", "body": "<p>I have a couple Perl CGI pages where there are <strong>multiple submit buttons</strong>. This is necessary as I need to use the form data to  make changes to a DB (For example modify, delete, activate).</p>\n\n<p>I don't know what layer is responsible but it seems that whichever submit button is displayed first on the form that is the one that will execute when you click \"Enter\" on the keyboard.</p>\n\n<p>Here is a sample of my Submit buttons for one page:</p>\n\n<pre><code>...\n      #\n      # Modify button\n      #\n      $cgi-&gt;submit(\n                   -name  =&gt; 'Action',\n                   -value =&gt; 'Modify',\n      ),\n\n      #\n      # Delete button\n      #\n      $cgi-&gt;submit(\n                   -name  =&gt; 'Action',\n                   -value =&gt; 'Delete',\n      ),\n\n      #\n      # Activate button\n      #\n      $cgi-&gt;submit(\n                   -name  =&gt; 'Action',\n                   -value =&gt; 'Activate',\n      ),\n      #\n      # Reset button\n      #\n      $cgi-&gt;submit(\n                   -name  =&gt; 'Action',\n                   -value =&gt; 'Reset',\n      ),\n\n      ),\n\n      $cgi-&gt;end_form;\n\n      $sth-&gt;finish;\n    }\n</code></pre>\n\n<p>For this page I want the 'Modify' button to be the default (there are more submit buttons on the page that are inline with rows). </p>\n\n<p>The closest thing I've found out there recommended using javascript submit buttons for all the buttons I don't want to be the default but, they said that I still needed to list the one I wanted as default at the top. That would defeat my purpose of placing the buttons any where and choosing one to be the default.</p>\n\n<p>I also saw some options  for possibly catching when the user clicks enter when using javascript.</p>\n\n<p><strong>Question: How can I set a default submit button when the user clicks the \"Enter\" key on a Perl CGI form, with multiple submit buttons, in any order?</strong> </p>\n\n<p>Thank you for taking the time to look at this.</p>\n"}, {"tags": ["perl", "loops", "for-loop"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1453157383, "post_id": 34860384, "comment_id": 57470299, "body": "See <a href=\"http://perldoc.perl.org/perlsyn.html\" rel=\"nofollow noreferrer\">perlsyn</a> for more information on for loops.."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1453192295, "post_id": 34860384, "comment_id": 57481906, "body": "<i>For Loops in Perl</i> is not a question. What is your question?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "edited": false, "score": 0, "creation_date": 1453138065, "post_id": 34860600, "comment_id": 57460508, "body": "Oh okay thank you, now is the &quot;my&quot; require for the loop in perl, also the (1..$count) the &quot;..&quot; is used to skip a part of the loop I do not need to fill out correct?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "edited": false, "score": 1, "creation_date": 1453138864, "post_id": 34860600, "comment_id": 57460947, "body": "@Phizy: <a href=\"http://p3rl.org/my\" rel=\"nofollow noreferrer\">my</a> is required under <a href=\"http://p3rl.org/strict\" rel=\"nofollow noreferrer\">strict</a>. For <code>..</code>, see <i>Range Operators</i> in <a href=\"http://p3rl.org/perlop\" rel=\"nofollow noreferrer\">perlop</a>. There&#39;s no skipping, <code>1 .. $count</code> means 1, 2, 3, etc. up to <code>$count</code>."}, {"owner": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "edited": false, "score": 0, "creation_date": 1453138911, "post_id": 34860600, "comment_id": 57460974, "body": "oh I see, thank you! I will definitely check out that link, I appreciate the help!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453148617, "post_id": 34860600, "comment_id": 57466135, "body": "Don&#39;t need the <code>my $i</code> by the looks of it?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1453149444, "last_edit_date": 1453149444, "creation_date": 1453137943, "answer_id": 34860600, "question_id": 34860384, "link": "https://stackoverflow.com/questions/34860384/for-loops-in-perl/34860600#34860600", "title": "For Loops in Perl", "body": "<p>Don't use <code>$a</code> and <code>$b</code> as variable names, they are special to <a href=\"http://p3rl.org/sort\" rel=\"nofollow\">sort</a>.</p>\n\n<p>You can use the for loop when asking for the numbers already:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nprint \"How many numbers are there? \";\nchomp( my $count = &lt;&gt; );\n\nprint \"Enter the numbers: \";\nfor (1 .. $count) {\n    chomp( my $number = &lt;&gt; );\n    print \"Divisible.\\n\" if 0 == $number % 5 || 0 == $number % 6;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5357417, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/60b97f2febff2c96d0378167e85210e6?s=128&d=identicon&r=PG&f=1", "display_name": "Phizy", "link": "https://stackoverflow.com/users/5357417/phizy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 34860600, "answer_count": 1, "score": -3, "last_activity_date": 1453149444, "creation_date": 1453137265, "question_id": 34860384, "link": "https://stackoverflow.com/questions/34860384/for-loops-in-perl", "title": "For Loops in Perl", "body": "<p>I am brand new to perl, and I have to write a program that asks for how many numbers there will be and then I have to ask for what the numbers are and then use a for loop to see if the input numbers are divisible by 5 or 6. Any tips or help would be appreciated.</p>\n\n<pre><code>print \"how many numbers are there?\";\n$a = &lt;STDIN&gt;;\nprint \"enter your numbers.\";\n$b = &lt;STDIN&gt;;\nfor ( $a; $b % 6 == 0 or $b % 5 == 0; ) {\n    print \"$b\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453136250, "post_id": 34859875, "comment_id": 57459411, "body": "There&#39;s a <code>GGg</code> in the middle of your sample sequence. Doesn&#39;t that count? And what output do you want when there are multiple sequences in the file?"}], "answers": [{"comments": [{"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1453138064, "post_id": 34860204, "comment_id": 57460506, "body": "I added an edit for multiple lines and didn&#39;t even see the GGg, but yes you are correct it does count.  The computer makes less mistakes then me :)... Thank you :)."}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1453138621, "post_id": 34860204, "comment_id": 57460818, "body": "does the edit for multiple entries help?  Thank you :)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1453139839, "post_id": 34860204, "comment_id": 57461490, "body": "Okay I&#39;ve fixed that. (Except that there are only two <code>ggg</code> subsequences in the second item, not three as you say.) Another question is do you need to count subsequences if they are split across more than one line in the file? At present <code>ggg</code> won&#39;t be found if the file contains a line like <code>&quot;xxxgg\\ngxxxx\\n&quot;</code>"}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1453140305, "post_id": 34860204, "comment_id": 57461728, "body": "I have posted the output I get from the command and yes subsequences are used in the count as you illustrated.  Thank you :)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 1, "creation_date": 1453140705, "post_id": 34860204, "comment_id": 57461927, "body": "@Chris: Sorry, I forgot to convert to Linux command line syntax. I have updated"}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1453141097, "post_id": 34860204, "comment_id": 57462137, "body": "<code>@Borodin:&#39; That fixed it, I apologize for not mentioning this was </code>linux`, will subsequences be searched as in your example?  Thank you very much :)."}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1453141304, "post_id": 34860204, "comment_id": 57462234, "body": "with <code>perl -nE&#39;&#47;^&gt;&#47; and print or do { say $1 while &#47;(g{3})&#47;ig}&#39; test.txt</code> I get a count of 5 sequences for line1 and a count of 2 sequences for line 2"}, {"owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "edited": false, "score": 0, "creation_date": 1453141437, "post_id": 34860204, "comment_id": 57462312, "body": "Thank you very much for all your help @Borodin :)"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1453140971, "last_edit_date": 1453140971, "creation_date": 1453136565, "answer_id": 34860204, "question_id": 34859875, "link": "https://stackoverflow.com/questions/34859875/find-specific-text-in-many-lines-with-perl/34860204#34860204", "title": "Find specific text in many lines with Perl", "body": "<p>On the face of it this is very simple. This one-liner produces something like what you say you want</p>\n\n<pre><code>perl -nE'/^&gt;/ or say $1 while /(g{3})/ig' test.txt\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>GGG\nGGG\nGGg\nggg\nggg\n</code></pre>\n\n<p>But, as I said in my comment, it's unclear whether <code>GGg</code> counts, and you don't say what happens when there are multiple sequences in the file</p>\n\n<p><br/></p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>This will solve the modified question</p>\n\n<pre><code>perl -nE'/^&gt;/ and print or do { say $1 while /(g{3})/ig}' test.txt\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;hg19_refGene_NM_000016 range=chr1:76190032-76229363 5'pad=0 3'pad=0 strand=+ repeatMasking=none\nGGG\nGGG\nGGg\nggg\nggg\n&gt;hg19_refGene_NM_001282675 range=chr11:35453376-35551848 5'pad=0 3'pad=0 strand=- repeatMasking=none\nGGG\nGGG\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h2>Update 2</h2>\n\n<p>This fixes it for subsequences that wrap over line endings. This is about as complex as I really want to go for a one-line solution</p>\n\n<pre><code>perl -076 -nE 'chomp; s/(.+)// &amp;&amp; say qq{&gt;$1}; s/\\s//g; say $1 while /(g{3})/gi' test.txt\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;hg19_refGene_NM_000016 range=chr1:76190032-76229363 5'pad=0 3'pad=0 strand=+ repeatMasking=none\nGGG\nGGG\nGGg\nggg\nggg\n&gt;hg19_refGene_NM_001282675 range=chr11:35453376-35551848 5'pad=0 3'pad=0 strand=- repeatMasking=none\nGGG\nGGG\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453138348, "post_id": 34860621, "comment_id": 57460669, "body": "<code>use English</code> is a little crazy in a one-liner!"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453138627, "post_id": 34860621, "comment_id": 57460822, "body": ":-D agreed ... just put it in there in case <code>$1</code> wasn&#39;t clear ... I didn&#39;t see the OP using <code>$1</code> ... I often use perl commands from the shell which, while using <code>-E</code> or <code>-n</code>,  end up being not really the same as a &quot;one-liner&quot;.  I must say I don&#39;t know why I do that! ... TIMTOWDI maybe :-D"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453141258, "post_id": 34860621, "comment_id": 57462213, "body": "You know <code>$MATCH</code> is the same as <code>$&amp;</code>, right? It&#39;s not <code>$1</code>"}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453263999, "post_id": 34860621, "comment_id": 57521201, "body": "@Borodin doh! fixed it but I guess <code>$&amp;</code> is not the best way to go for perls &lt; 5.20"}], "tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1453263516, "last_edit_date": 1453263516, "creation_date": 1453138022, "answer_id": 34860621, "question_id": 34859875, "link": "https://stackoverflow.com/questions/34859875/find-specific-text-in-many-lines-with-perl/34860621#34860621", "title": "Find specific text in many lines with Perl", "body": "<p>If you use one <code>perl</code> process by itself (without the <code>cat</code>) you can use \"nested <code>while</code>\" statements to read a line from the data file \"<code>while()</code>\" it is open and there are lines remaining to read, and then <code>print</code> the matching elements of the line \"<code>while()</code>\" there is something that matches:</p>\n\n<pre><code> perl -e 'use English; \n          while(&lt;&gt;) { print \"$MATCH\\n\" while $_ =~ /g{3}/ig }'\n          sequence.txt\n</code></pre>\n\n<p>(<code>$MATCH</code> is <code>$&amp;</code>. I added <code>use English</code> for illustrative purposes ;-) ... )</p>\n\n<hr>\n\n<p><strong>Edit:</strong></p>\n\n<p>The nested <code>while()</code> approach is exactly what @Borodin's answer does since it uses the <code>-n</code> switch which, as <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow\"><code>perldoc perlrun</code></a> tells us, wraps the statements following <code>-E</code> with <code>while(&lt;&gt;){}</code>.</p>\n"}], "owner": {"reputation": 2528, "user_id": 4668368, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/70b77439d7ee9bb7410105b7bc912afb?s=128&d=identicon&r=PG&f=1", "display_name": "justaguy", "link": "https://stackoverflow.com/users/4668368/justaguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 34860204, "answer_count": 2, "score": 1, "last_activity_date": 1453263516, "creation_date": 1453135544, "last_edit_date": 1453141386, "question_id": 34859875, "link": "https://stackoverflow.com/questions/34859875/find-specific-text-in-many-lines-with-perl", "title": "Find specific text in many lines with Perl", "body": "<p>I am trying to find all occurrences of a string of letters in a file of several thousands of lines.  I am then going to count each string.  The example file below only contains two lines but all text in that file is the same structure (where the <code>&gt;</code> indicates a new line and the string of letters is where to search.  As of now I get the entire file returned as the output not just the string I am looking for.  Thank you :).</p>\n\n<p><strong>file</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;hg19_refGene_NM_000016 range=chr1:76190032-76229363 5'pad=0 3'pad=0 strand=+ repeatMasking=none\nGGGTTCGGGCGATGCTGCAGGgtgagagggagcccagcggtgcggtgggg\n</code></pre>\n\n<p><strong>desired output for g{4}</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gggg\n</code></pre>\n\n<p><strong>desired output for g{3}</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>GGG\nGGG\nggg\nggg\n</code></pre>\n\n<h3>Perl I have tried</h3>\n\n<p>(the <code>4</code> between the <code>{...}</code> is how many of the <code>qw(G g)</code> to search for)</p>\n\n<pre><code>cat file.txt | perl -ne 'chomp; s/\\s|\\cJ|\\cM//g; s/^\\&gt;/\\n/ and $_.=\"\\t\";print' | perl -ne '$in=$_;grep $in=~m/$_{4}/i, qw(G g) and print' &gt; test.txt\n</code></pre>\n\n<p><strong>edit</strong></p>\n\n<pre><code>&gt;hg19_refGene_NM_000016 range=chr1:76190032-76229363 5'pad=0 3'pad=0 strand=+ repeatMasking=none\nGGGTTCGGGCGATGCTGCAGGgtgagagggagcccagcggtgcggtgggg\n&gt;hg19_refGene_NM_001282675 range=chr11:35453376-35551848 5'pad=0 3'pad=0 strand=- repeatMasking=none\nTTCATTAGGGCTGGAGACTTCCATGAAGGGGCCAGTTACAGCAGGCTCCA\n</code></pre>\n\n<p><strong>multiple output</strong> (line the search was in and output)</p>\n\n<pre><code>&gt;hg19_refGene_NM_000016 range=chr1:76190032-76229363 5'pad=0 3'pad=0 strand=+ repeatMasking=none\nGGG\nGGG\nGGg\nggg\nggg\n&gt;hg19_refGene_NM_001282675 range=chr11:35453376-35551848 5'pad=0 3'pad=0 strand=- repeatMasking=none\nGGG\nGGG\nGGG\n</code></pre>\n\n<p><strong>multiple output I get</strong></p>\n\n<pre><code>  perl -076 -nE 'chomp; s/(.+)// &amp;&amp; say qq{&gt;$1}; s/\\s//g; say $1 while /(g{3})/gi' 4G.txt\n\n &gt;hg19_refGene_NM_000016 range=chr1:76190032-76229363 5'pad=0 3'pad=0 strand=+ repeatMasking=none\nGGG\nGGG\nGGg\nggg\nggg\n&gt;hg19_refGene_NM_001282675 range=chr11:35453376-35551848 5'pad=0 3'pad=0 strand=- repeatMasking=none\nGGG\nGGG\n</code></pre>\n"}, {"tags": ["macos", "perl", "firefox", "selenium"], "comments": [{"owner": {"reputation": 3627, "user_id": 4856814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e9c9bf7a42b967f439b4a0b58716e34?s=128&d=identicon&r=PG&f=1", "display_name": "murali selenium", "link": "https://stackoverflow.com/users/4856814/murali-selenium"}, "edited": false, "score": 0, "creation_date": 1453132750, "post_id": 34858758, "comment_id": 57457186, "body": "try with down grading the firefox.. FF39 working very well for me"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5801765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e381ab48108497c3ef5b1f606a2748?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Collins", "link": "https://stackoverflow.com/users/5801765/mark-collins"}, "edited": false, "score": 0, "creation_date": 1453141489, "post_id": 34858923, "comment_id": 57462342, "body": "Ah, thanks for the info... didn&#39;t think about the architecture issue. Will try other methods maybe, and if I have no choice will downgrade as suggested. Thanks Hubert Grzeskowiak and murali seleniumtrainer"}], "tags": [], "owner": {"reputation": 10697, "user_id": 2445864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/jSfSO.jpg?s=128&g=1", "display_name": "Hubert Grzeskowiak", "link": "https://stackoverflow.com/users/2445864/hubert-grzeskowiak"}, "is_accepted": true, "score": 0, "last_activity_date": 1453132643, "creation_date": 1453132643, "answer_id": 34858923, "question_id": 34858758, "link": "https://stackoverflow.com/questions/34858758/firefox-crash-when-called-by-selenium-remote-driver-on-mac-os-x/34858923#34858923", "title": "Firefox crash when called by Selenium Remote Driver on Mac OS X", "body": "<p>This is probably related to an issue with Selenium and FX 43 64bit. As of now there is no fix, only workarounds. These include:</p>\n\n<ul>\n<li>Updating to newest Selenium version which makes FX not check addon signatures.</li>\n<li>Using 32 bit version of Firefox</li>\n<li>Using an older version of Firefox, e.g. 42</li>\n</ul>\n\n<p>See <a href=\"https://github.com/SeleniumHQ/selenium/issues/1431\" rel=\"nofollow\">https://github.com/SeleniumHQ/selenium/issues/1431</a> for more details.</p>\n"}], "owner": {"reputation": 19, "user_id": 5801765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e381ab48108497c3ef5b1f606a2748?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Collins", "link": "https://stackoverflow.com/users/5801765/mark-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 34858923, "answer_count": 1, "score": 1, "last_activity_date": 1453132643, "creation_date": 1453132161, "question_id": 34858758, "link": "https://stackoverflow.com/questions/34858758/firefox-crash-when-called-by-selenium-remote-driver-on-mac-os-x", "title": "Firefox crash when called by Selenium Remote Driver on Mac OS X", "body": "<p>I have just installed the <a href=\"https://github.com/gempesaw/Selenium-Remote-Driver\" rel=\"nofollow\">Selenium Remote Driver</a> on my Mac OS X 10.8.5 machine, and using Firefox 43.0.4 (the latest stable to date) when running this code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Selenium::Remote::Driver;\nuse Selenium::Firefox;\n\nmy $firefox = Selenium::Firefox-&gt;new;\n$firefox-&gt;get('http://www.google.com');\n</code></pre>\n\n<p>causes the browser to open, and then crash, outputting the following error to console:</p>\n\n<pre><code>kernel[0]: firefox-bin (map: ...) triggered DYLD shared region unnest for map: ..., region ...-&gt;.... While not abnormal for debuggers, this increases system memory footprint until the target exits.\n</code></pre>\n\n<p>Any clue as to what might be causing this?\nIs it a programming error on my part?\nShould I be using some specific flag to prevent this?\nOr is this something I should report as a bug?\nAny help is much appreciated. You will have noticed this is my first post to the site. I hope it is not out of order in any way, please excuse me if it is.\nThank you in advance.\nBest regards,</p>\n\n<p>Mark.</p>\n"}, {"tags": ["html", "apache", "perl", "http-headers"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1453156369, "post_id": 34857410, "comment_id": 57469879, "body": "Personally, I never liked frames. I would suggest not using them. That aside, you could use an html parser to add the desired meta tag to the frame tags in all pages automatically instead of manually. Might be costly on performance, so perhaps a regex would also do."}], "owner": {"reputation": 111, "user_id": 2788805, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001936869094/picture?type=large", "display_name": "Nefedov Efim", "link": "https://stackoverflow.com/users/2788805/nefedov-efim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453128187, "creation_date": 1453128187, "last_edit_date": 1495540752, "question_id": 34857410, "link": "https://stackoverflow.com/questions/34857410/adding-html-headers-to-frames-with-apache-mod-headers-other-modules", "title": "Adding html headers to frames with Apache mod_headers (other modules?)", "body": "<p>I am trying to make existing IE5 web-portal compatible with IE11.\nIt is written in \"Enhanced Perl-parsed HTML\" (*.ephtml) and seem to work in IE11 well with \"Compatibility View Settings\" turned on.\nUnfortunately solution should work without any configuration on user side.</p>\n\n<p>I found that Compatibility View can be turned on by adding tag:</p>\n\n<pre><code>&lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=5\" /&gt;\n</code></pre>\n\n<p>without any changes on client side.</p>\n\n<p>And that Apache can be configured to add this tag to every page using</p>\n\n<pre><code>LoadModule headers_module modules/mod_headers.so\nHeader set X-UA-Compatible \u201cIE=IE5\u201d\n</code></pre>\n\n<p>in httpd.con\n(<a href=\"https://msdn.microsoft.com/en-us/cc817573.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/cc817573.aspx</a>)\n(<a href=\"https://stackoverflow.com/questions/6933509/adding-an-http-header-site-wide-in-php/6933596#6933596\">Adding an http header site wide in php</a>)</p>\n\n<p>This doesn't solve problem entirely, since many of the portal pages are mage up from frames and this header isn't being inserted into frame pages.\nTherefore many pages with frames are broken (but work correctly if Compatibility View is turned on Browser Wide)</p>\n\n<p>Is there any way to add this header automatically to all frames using Apache configurations?\nOnly other solution I can see right now is modifying all the pages, manually inserting this header. </p>\n"}, {"tags": ["mysql", "database", "perl", "sql-insert"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1453128304, "creation_date": 1453128304, "answer_id": 34857459, "question_id": 34857305, "link": "https://stackoverflow.com/questions/34857305/inserting-into-mysql-with-perl/34857459#34857459", "title": "Inserting into MySQL with Perl", "body": "<p>You can give just the value of the second column, like this</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('INSERT INTO tbl_name (col2) VALUES (?)');\n$sth-&gt;execute($val2);  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 5, "last_activity_date": 1453128305, "creation_date": 1453128305, "answer_id": 34857460, "question_id": 34857305, "link": "https://stackoverflow.com/questions/34857305/inserting-into-mysql-with-perl/34857460#34857460", "title": "Inserting into MySQL with Perl", "body": "<p>This is more of an SQL problem than a Perl one.</p>\n\n<blockquote>\n  <p>What do I do to handle [an auto-increment] field?</p>\n</blockquote>\n\n<p>Don't specify it at all. Explicitly name all the columns you are have values for and ignore the others.</p>\n\n<p>That will cause them to take on their default values which, in the case of an auto-increment field, will be the next increment.</p>\n\n<pre><code>$sth = $dbh-&gt;prepare(\"insert into tbl_name (column_name) values (?)\");\n$sth-&gt;execute($val2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1453134675, "creation_date": 1453134675, "answer_id": 34859590, "question_id": 34857305, "link": "https://stackoverflow.com/questions/34857305/inserting-into-mysql-with-perl/34859590#34859590", "title": "Inserting into MySQL with Perl", "body": "<pre><code>$sth = $dbh-&gt;prepare(\"insert into tbl_name values(?,?)\");\n$sth-&gt;execute(undef, $val2);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$sth = $dbh-&gt;prepare(\"insert into tbl_name (col2_name) values (?)\");\n$sth-&gt;execute($val2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "is_accepted": false, "score": 1, "last_activity_date": 1453134961, "creation_date": 1453134961, "answer_id": 34859693, "question_id": 34857305, "link": "https://stackoverflow.com/questions/34857305/inserting-into-mysql-with-perl/34859693#34859693", "title": "Inserting into MySQL with Perl", "body": "<p>As the others have said, you just don't specify the value for the field by being explicit on which fields you're inserting, so as they said:</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare('INSERT INTO tbl_name (col2) VALUES (?)');\n$sth-&gt;execute($val2); \n</code></pre>\n\n<p>is going to be good enough.</p>\n\n<p>I just want to add that you can use </p>\n\n<pre><code>$dbh-&gt;{'mysql_insertid'}\n</code></pre>\n\n<p>to get the id that was assigned to the row, which often comes in handy.</p>\n"}], "owner": {"reputation": 11, "user_id": 5804341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E8GJ2Ornv8o/AAAAAAAAAAI/AAAAAAAAAJ4/BcyPp0yi7dk/photo.jpg?sz=128", "display_name": "Wehubs Innovations", "link": "https://stackoverflow.com/users/5804341/wehubs-innovations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1453198940, "creation_date": 1453127900, "last_edit_date": 1453198940, "question_id": 34857305, "link": "https://stackoverflow.com/questions/34857305/inserting-into-mysql-with-perl", "title": "Inserting into MySQL with Perl", "body": "<p>I have the following bound query in Perl.</p>\n\n<pre><code>$sth = $dbh-&gt;prepare(\"insert into tbl_name values(?,?)\");\n$sth-&gt;execute($val1, $val2);\n</code></pre>\n\n<p>However, what if the first coloumn in that <code>tbl_name</code> table is an auto-increment primary key? What do I do to handle that field?</p>\n"}, {"tags": ["html", "perl", "dom", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3142200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hmF0Q.jpg?s=128&g=1", "display_name": "manglide", "link": "https://stackoverflow.com/users/3142200/manglide"}, "edited": false, "score": 0, "creation_date": 1453125589, "post_id": 34856446, "comment_id": 57452364, "body": "Thanks @Borodin for the Quick response. I did a print of <code>$divVideo-&gt;size</code> but it all returned a <code>0</code> value, even for all webpages that have the element"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 57, "user_id": 3142200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hmF0Q.jpg?s=128&g=1", "display_name": "manglide", "link": "https://stackoverflow.com/users/3142200/manglide"}, "edited": false, "score": 0, "creation_date": 1453125857, "post_id": 34856446, "comment_id": 57452541, "body": "Then either your selector is wrong or you&#39;re mistaken about the HTML. <code>div#searchforme</code> looks for an element like <code>&lt;div id=&quot;searchforme&quot;&gt;</code>. Did you mean to use <code>div.searchforme</code>? It&#39;s also possible that the page is partly built using JavaScript, and <code>Mojo::UserAgent</code> can&#39;t support that. Trying printing <code>$dom-&gt;to_string</code> to see if the HTML is what you think it is"}, {"owner": {"reputation": 57, "user_id": 3142200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hmF0Q.jpg?s=128&g=1", "display_name": "manglide", "link": "https://stackoverflow.com/users/3142200/manglide"}, "edited": false, "score": 0, "creation_date": 1453126363, "post_id": 34856446, "comment_id": 57452855, "body": "you&#39;re right @Borodin, the page is partly built with javascript, when Mojo::UserAgent get&#39;s the page, those element&#39;s haven&#39;t been written in. I&#39;ll use another approach then. It&#39;s actually a DIV #id. Thanks so much man."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1453126821, "last_edit_date": 1453126821, "creation_date": 1453125310, "answer_id": 34856446, "question_id": 34856362, "link": "https://stackoverflow.com/questions/34856362/how-to-know-if-perl-mojodomfind-returns-or-matches-any-dom-element/34856446#34856446", "title": "How to know if Perl Mojo::DOM::find returns or matches any DOM Element", "body": "<blockquote>\n  <p>if find doesn't match any element, it returns (if I get it correctly) the DOM object collection initiating the find and an empty DOM collection, which happens to be the result.</p>\n</blockquote>\n\n<p>You're misunderstanding <code>find</code>. It returns <em>just</em> a <a href=\"http://metacpan.org/module/Mojo::Collection\" rel=\"nofollow\"><code>Mojo::Collection</code></a> of <code>Mojo::DOM</code> objects that represent each matching element in the page. Nothing else. So if no matches are found, just an empty collection is returned</p>\n\n<p>This object has a <code>size</code> method, so you can say</p>\n\n<pre><code>my $divColln = $dom-&gt;find('div#searchforme');\n\nif ( $divColln-&gt;size &gt; 0 ) {\n    ...\n}\n</code></pre>\n\n<p>Alternatively you could use the <code>each</code> method to convert the collection into a list, and assign it to an array like this</p>\n\n<pre><code>my @divColln = $dom-&gt;find('div#searchforme')-&gt;each;\n\nif ( @divColln ) {\n    ...\n}\n</code></pre>\n\n<p>Or if you are expecting to find just <em>one</em> such element (which it looks like you're doing here) then you can just pick the first item from the collection, like this</p>\n\n<pre><code>my $divVideo = $dom-&gt;find('div#searchforme')-&gt;[0];\n\nif ( $divVideo ) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 3142200, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hmF0Q.jpg?s=128&g=1", "display_name": "manglide", "link": "https://stackoverflow.com/users/3142200/manglide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 34856446, "answer_count": 1, "score": 1, "last_activity_date": 1453126821, "creation_date": 1453125088, "last_edit_date": 1453126591, "question_id": 34856362, "link": "https://stackoverflow.com/questions/34856362/how-to-know-if-perl-mojodomfind-returns-or-matches-any-dom-element", "title": "How to know if Perl Mojo::DOM::find returns or matches any DOM Element", "body": "<p>Am currently parsing a series of webpages with <a href=\"http://metacpan.org/module/Mojo::DOM\" rel=\"nofollow\"><code>Mojo::DOM</code></a> and the only criterion for me to proceed down the web page is if there's an element found within. </p>\n\n<p>I have my DOM object built like this:</p>\n\n<pre><code>my $urlMJ = Mojo::URL-&gt;new($entry-&gt;link);\nmy $tx = $ua-&gt;get($urlMJ);\nmy $base = $tx-&gt;req-&gt;url;\nmy $dom = $tx-&gt;res-&gt;dom;\nmy $divVideo = $dom-&gt;find('div#searchforme');\n</code></pre>\n\n<p>My question is, how do I know if <code>$divVideo</code> is empty?</p>\n\n<p>I realise that from this question on <a href=\"https://groups.google.com/forum/#!msg/mojolicious/w3BxShahJGs/HGxyg3jQGCYJ\" rel=\"nofollow\">google groups</a> and <a href=\"http://grokbase.com/t/gg/mojolicious/13bhqyg2x4/problem-with-mojo-dom\" rel=\"nofollow\">grokbase</a> answered by SRI (Riedel), if <code>find</code> doesn't match any element, it returns (if I get it correctly) the DOM object collection initiating the <code>find</code> and an empty DOM collection, which happens to be the result.</p>\n\n<p>I thought of using an <code>each</code> to get to the empty DOM collection within, but won't the DOM returned contain the initial DOM structure?</p>\n\n<p>I have tried using <code>if (defined($divVideo))</code> , I also tried dumping with <code>print Dumper($divVideo)</code>. All it returned was <code>$VAR1 = bless( [], 'Mojo::Collection' );</code></p>\n\n<p>I tried <code>$dom-&gt;find('div#searchforme')-&gt;size</code> , return values was <code>0</code> and even for those web pages that didn't fall into this category.</p>\n\n<p>Can somebody please help me out?</p>\n\n<p>Is my approach to this wrong?</p>\n"}, {"tags": ["perl", "data-structures", "perl-data-structures"], "comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1453134725, "post_id": 34854221, "comment_id": 57458430, "body": "This is a good question. It&#39;s a reminder that <code>perl -e &#39;use Data::Dumper; my %y ; $y{&#39;12&#39;} = (); $y{&#39;13&#39;} = []; ;  $y{&#39;14&#39;} = undef ; $y{&#39;15&#39;} = &quot;&quot;;print Dumper \\%y;&#39;</code> can be educational/instructive."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1453142141, "post_id": 34854221, "comment_id": 57462682, "body": "Rather than <code>-e use...</code> you can just use <code>-M</code>"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 8, "last_activity_date": 1453118705, "creation_date": 1453118705, "answer_id": 34854375, "question_id": 34854221, "link": "https://stackoverflow.com/questions/34854221/adding-an-empty-array-to-hash/34854375#34854375", "title": "Adding an empty array to hash", "body": "<p><code>Data::Dumper</code> will tell you the problem here:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nmy %x;\npush @{$x{'12'}}, ();\n\nprint Dumper \\%x;\n\nmy %y;\n$y{'12'} = ();\n\nprint Dumper \\%y;\n</code></pre>\n\n<p>Gives:</p>\n\n<pre><code>$VAR1 = {\n          '12' =&gt; []\n        };\n$VAR1 = {\n          '12' =&gt; undef\n        };\n</code></pre>\n\n<p>The two commands aren't equivalent.</p>\n\n<p>Maybe you want:</p>\n\n<pre><code>$y{'12'} = [];\n</code></pre>\n\n<p>Instead - <code>[]</code> denotes an anonymous array, where <code>()</code> denotes an empty list of elements. </p>\n"}, {"comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1453135620, "post_id": 34855181, "comment_id": 57459004, "body": "What is going to happen to auto-vivification?  In newer perls with <code>defined&#47;or</code> two statements <code>$hash{&#39;whatever2&#39;} &#47;&#47;= [] ; push $hash{&#39;whatever2&#39;} , &quot;stuff&quot; ;</code> seemed more readable to me months after writing it than using <code>push @{ $hash{&#39;whatever2&#39;} } ,  &quot;stuff&quot; ;</code>. But ... <code>push on reference is experimental ...</code>."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1453135722, "post_id": 34855181, "comment_id": 57459060, "body": "<a href=\"http://www.effectiveperlprogramming.com/2011/04/understand-autovivification/\" rel=\"nofollow noreferrer\">Effective Perler article on auto-vivification</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1453135755, "post_id": 34855181, "comment_id": 57459086, "body": "@G. Cito, Re &quot;What is going to happen to auto-vivification?&quot;, No changes planned or even suggested. /// I think <code>push $hash{&#39;whatever2&#39;} , &quot;stuff&quot;</code> is already gone."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1453135947, "post_id": 34855181, "comment_id": 57459217, "body": "Oh there is <code>use experimental &#39;postderef&#39;;</code> and <code>push $hash{&#39;whatever&#39;}-&gt;@* ,  &quot;stuff&quot; ;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1453136036, "post_id": 34855181, "comment_id": 57459270, "body": "@G. Cito, Yup, and that&#39;s no longer experiemental in 5.24"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1453136148, "post_id": 34855181, "comment_id": 57459338, "body": "@G. Cito, By the way, you can control autovivification using the <a href=\"http://search.cpan.org/perldoc?autovivification\" rel=\"nofollow noreferrer\">autovivification</a> pragma."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1453121226, "creation_date": 1453121226, "answer_id": 34855181, "question_id": 34854221, "link": "https://stackoverflow.com/questions/34854221/adding-an-empty-array-to-hash/34855181#34855181", "title": "Adding an empty array to hash", "body": "<pre><code>$y{'12'} = ();\n</code></pre>\n\n<p>and </p>\n\n<pre><code>@{$y{'12'}} = ();\n</code></pre>\n\n<p>are not the same. In the first case, you are assigning to a hash element. In the second case, you are assigning to the array referenced by that hash element.</p>\n\n<p>Except it doesn't contain a reference to an array, so Perl creates one for you through a feature called \"autovivification\". In other words, </p>\n\n<pre><code>@{$y{'12'}} = ();\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>@{ $y{'12'} //= [] } = ();\n</code></pre>\n\n<p>where <code>[]</code> creates an array and returns a reference to it. The above simplifies to the following:</p>\n\n<pre><code>$y{'12'} = [];\n</code></pre>\n"}], "owner": {"reputation": 1969, "user_id": 917572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e6ab3e3dab33d1b20d666cbe5dd630e7?s=128&d=identicon&r=PG", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/917572/evgeny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1173, "favorite_count": 1, "accepted_answer_id": 34855181, "answer_count": 2, "score": 2, "last_activity_date": 1453136187, "creation_date": 1453118215, "last_edit_date": 1453136187, "question_id": 34854221, "link": "https://stackoverflow.com/questions/34854221/adding-an-empty-array-to-hash", "title": "Adding an empty array to hash", "body": "<p>What is the difference between:</p>\n\n<pre><code>my %x;\npush @{$x{'12'}}, ();\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>my %y;\n$y{'12'} = ();\n</code></pre>\n\n<p>Why does the following work for <code>x</code> and not for <code>y</code>?</p>\n\n<pre><code>my @x1 = @{$x{'12'}}; #legal\nmy @y1 = @{$y{'12'}}; #illegal\n</code></pre>\n"}, {"tags": ["apache", "perl"], "comments": [{"owner": {"reputation": 15, "user_id": 5756738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a6b1ce6cfcd33f2a3cee73bb1d10a?s=128&d=identicon&r=PG&f=1", "display_name": "kcnanduri", "link": "https://stackoverflow.com/users/5756738/kcnanduri"}, "edited": false, "score": 0, "creation_date": 1453116950, "post_id": 34853719, "comment_id": 57446947, "body": "@Borodin can you please help with this question....."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453120292, "post_id": 34854002, "comment_id": 57449117, "body": "No, the error is not that <code>mylib.pm</code> can&#39;t be found."}], "tags": [], "owner": {"reputation": 127, "user_id": 3449859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1272e458f25532dc24181bbe2a7f0174?s=128&d=identicon&r=PG&f=1", "display_name": "Luke G", "link": "https://stackoverflow.com/users/3449859/luke-g"}, "is_accepted": false, "score": -2, "last_activity_date": 1453117654, "creation_date": 1453117654, "answer_id": 34854002, "question_id": 34853719, "link": "https://stackoverflow.com/questions/34853719/having-issues-with-perl-scripts-having-use-mylib/34854002#34854002", "title": "having issues with perl scripts having &quot;use mylib&quot;", "body": "<p>'mylib.pm' is not in a directory listed in the PERL5LIB environment variable.</p>\n\n<p>While testing, you can use the <code>use lib 'path/to/module'</code> work-around.</p>\n\n<p>So, if you're testing a file <code>myscript.pl</code> that uses a module <code>libs/mylib.pm</code> you can add <code>use lib 'libs/';</code> before the <code>use mylib;</code> command.</p>\n\n<p>Longer term, you should place your module in a stable location, and a</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1453120947, "last_edit_date": 1453120947, "creation_date": 1453120759, "answer_id": 34855019, "question_id": 34853719, "link": "https://stackoverflow.com/questions/34853719/having-issues-with-perl-scripts-having-use-mylib/34855019#34855019", "title": "having issues with perl scripts having &quot;use mylib&quot;", "body": "<p><code>use mylib;</code> is used to tell Perl where to find modules installed relative to the script. These are usually pure-Perl modules that are bundled with the script. It looks for <code>./lib</code> and <code>../lib</code> (relative to the location in which the script is located). Neither of those directories exist in your case.</p>\n\n<p>The fact that the script expects there to be a <code>lib</code> directory that isn't there would suggest you have some files missing. If so, removing <code>use mylib;</code> would only make things worse.</p>\n\n<p>If there's not suppose to be a <code>lib</code> directory, <code>use mylib;</code> shouldn't be used and should be removed (which can be done trivially using a one-liner<sup>[1]</sup>). Creating an empty <code>lib</code> directory in the directory in which your script is located would also stop your code from dying.</p>\n\n<hr>\n\n<ol>\n<li><code>find -name '*.pl' -type f -exec perl -i~ -pe's/^(?=use mylib;)/#/' {} +</code></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5756738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a6b1ce6cfcd33f2a3cee73bb1d10a?s=128&d=identicon&r=PG&f=1", "display_name": "kcnanduri", "link": "https://stackoverflow.com/users/5756738/kcnanduri"}, "edited": false, "score": 0, "creation_date": 1453189916, "post_id": 34856262, "comment_id": 57480729, "body": "Thankyou @Borodin, creating lib/ in /aps/cgi worked well and apache was executing the script by fetching the libraries correctly."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1453124779, "last_edit_date": 1495542684, "creation_date": 1453124779, "answer_id": 34856262, "question_id": 34853719, "link": "https://stackoverflow.com/questions/34853719/having-issues-with-perl-scripts-having-use-mylib/34856262#34856262", "title": "having issues with perl scripts having &quot;use mylib&quot;", "body": "<blockquote>\n  <p>Is there any procedure to update the mylib.pm file with all Perl libraries?</p>\n</blockquote>\n\n<p>I thought I covered this in <a href=\"https://stackoverflow.com/a/34652489/622310\">my answer to your previous question</a></p>\n\n<p>There is nothing wrong with your installation of <a href=\"http://metacpan.org/module/mylib\" rel=\"nofollow noreferrer\"><code>mylib</code></a>. The issue is that it is looking for a directory called <code>lib</code> either in the same directory as your Perl source file or in the directory above</p>\n\n<p>If it finds one of these two directories, it adds it to the list of locations that perl searches for modules included by any subsequent <code>use</code> statement. That is <em>all</em> it does. It is for use when you write your own Perl modules that need to be distributed along with the main Perl program file</p>\n\n<p>From your previous question, one of your programs is <code>/apps/cgi/kb/www_kb_search_new.pl</code>, so <code>mylib</code> is looking for either</p>\n\n<pre><code>/apps/cgi/kb/lib\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/apps/cgi/lib\n</code></pre>\n\n<p>and finding neither. That is the reason for the error message</p>\n\n<blockquote>\n  <p>Can't find lib in either /apps/cgi/kb or /apps/cgi</p>\n</blockquote>\n\n<p>Since you say your program worked when you removed <code>use mylib</code>, it seems that your program doesn't use any modules in these locations. This may be true of all your programs, in which case the solution should be to delete the <code>use mylib</code> statement from all of them. This is easy to do with a simple shell command</p>\n\n<p>Alternatively you could create one or other of these directories and leave it empty. That way <code>mylib</code> would execute correctly, find the <code>lib</code> directory, and add it to the search list, but no libraries would ever be loaded from there</p>\n\n<p>I hope it's clear now?</p>\n"}], "owner": {"reputation": 15, "user_id": 5756738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825a6b1ce6cfcd33f2a3cee73bb1d10a?s=128&d=identicon&r=PG&f=1", "display_name": "kcnanduri", "link": "https://stackoverflow.com/users/5756738/kcnanduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 34856262, "answer_count": 3, "score": 1, "last_activity_date": 1453124779, "creation_date": 1453116767, "question_id": 34853719, "link": "https://stackoverflow.com/questions/34853719/having-issues-with-perl-scripts-having-use-mylib", "title": "having issues with perl scripts having &quot;use mylib&quot;", "body": "<p>Can't find lib in either /apps/cgi/kb or /apps/cgi, stopped at /usr/local/share/perl5/mylib.pm line 22.\nCompilation failed in require at www_kb_search_new_QA.pl line 4.\nBEGIN failed--compilation aborted at www_kb_search_new_QA.pl line 4.</p>\n\n<p>Line 4 is \"use mylib;\"</p>\n\n<p>if i comment \"use mylib;\" the script is executing normal and fine, but all my scripts are having \"use mylib;\" and its difficult to change all scripts. is there any procedure to update the mylib.pm file with all perl libraries??</p>\n\n<p>Thanks,\nKalyan</p>\n"}, {"tags": ["multithreading", "perl", "rabbitmq", "fork", "anyevent"], "answers": [{"comments": [{"owner": {"reputation": 2698, "user_id": 1016105, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9dd2d48ff6355997d79723154201e3dc?s=128&d=identicon&r=PG", "display_name": "burnersk", "link": "https://stackoverflow.com/users/1016105/burnersk"}, "edited": false, "score": 0, "creation_date": 1453131441, "post_id": 34855350, "comment_id": 57456309, "body": "<code>$run_cmd_cv-&gt;recv</code> gives me <code>256</code> instead of expected <code>1</code>. The command <code>perl -E &#39;exit 1&#39; ; echo $?</code> also echos <code>1</code>. How to receive the actual error code of the executed command?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2698, "user_id": 1016105, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9dd2d48ff6355997d79723154201e3dc?s=128&d=identicon&r=PG", "display_name": "burnersk", "link": "https://stackoverflow.com/users/1016105/burnersk"}, "edited": false, "score": 1, "creation_date": 1453132837, "post_id": 34855350, "comment_id": 57457254, "body": "bash&#39;s <code>$?</code> is different than Perl&#39;s <code>$?</code>. See <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a>."}, {"owner": {"reputation": 2698, "user_id": 1016105, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9dd2d48ff6355997d79723154201e3dc?s=128&d=identicon&r=PG", "display_name": "burnersk", "link": "https://stackoverflow.com/users/1016105/burnersk"}, "edited": false, "score": 0, "creation_date": 1453133353, "post_id": 34855350, "comment_id": 57457612, "body": "Thanks for pointing that out. I added <code>$exit = $exit &gt;&gt; 8 if $exit &amp;&amp; $exit &gt; 255;</code> and it works now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2698, "user_id": 1016105, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9dd2d48ff6355997d79723154201e3dc?s=128&d=identicon&r=PG", "display_name": "burnersk", "link": "https://stackoverflow.com/users/1016105/burnersk"}, "edited": false, "score": 1, "creation_date": 1453133461, "post_id": 34855350, "comment_id": 57457687, "body": "That doen&#39;t make much sense. What about when <code>$exit &amp; 0x7F</code> is true? <code>exit( ($exit &amp; 0x7F) | 0x80 ) if $exit &amp; 0x7F; exit( $exit &gt;&gt; 8 ) if $exit &gt;&gt; 8;</code> would make more sense. It&#39;s also what the shell does."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1453121803, "creation_date": 1453121803, "answer_id": 34855350, "question_id": 34852994, "link": "https://stackoverflow.com/questions/34852994/howto-deal-with-anyevent-rabbitmq-heartbeat-and-long-running-jobs-in-perl/34855350#34855350", "title": "Howto deal with AnyEvent, RabbitMQ (heartbeat) and long running jobs in Perl?", "body": "<p>AE can't process events unless the program is blocked using an AE-aware call. <code>system</code> is not AE-aware. Use <code>run_cmd</code> from <a href=\"http://search.cpan.org/perldoc?AnyEvent::Util\" rel=\"nofollow\">AnyEvent::Util</a> instead.</p>\n"}], "owner": {"reputation": 2698, "user_id": 1016105, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/9dd2d48ff6355997d79723154201e3dc?s=128&d=identicon&r=PG", "display_name": "burnersk", "link": "https://stackoverflow.com/users/1016105/burnersk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 34855350, "answer_count": 1, "score": 3, "last_activity_date": 1453121803, "creation_date": 1453114598, "question_id": 34852994, "link": "https://stackoverflow.com/questions/34852994/howto-deal-with-anyevent-rabbitmq-heartbeat-and-long-running-jobs-in-perl", "title": "Howto deal with AnyEvent, RabbitMQ (heartbeat) and long running jobs in Perl?", "body": "<p>I am implementing a system for distributed cronjob execution (so called <em>cron computing cluster</em>). Cronjobs should be queued into a message queue (RabbitMQ) when the time of action is there. On the other side (the nodes/workers of the cluster) is a Perl daemon utilizing <code>AnyEvent::RabbitMQ</code> to receive exactly one cronjob/task/message from the message queue, process the task and request another exactly one cronjob/task/message from the message queue and so on.</p>\n\n<p>I use RabbitMQ's heartbeat feature which is implemented with <code>AnyEvent::RabbitMQ</code> to help RabbitMQ identifying broken connections.</p>\n\n<p>Never mind the actual value of the heartbeat interval! I also have very long running jobs that takes days. So setting the interval to somewhat the longest cronjob would take is not an option.</p>\n\n<p>See the following snippet for executing the actual cronjob within the Perl daemon worker. It is implemented within an \u00b4AnyEvent->timer\u00b4 to not DoSing RabbitMQ for a message. This method was used due to RabbitMQ's <code>consume</code> was prohibited (by management).</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub _timer_tick {\n\n  $rabbitmq_channel-&gt;get(\n    queue      =&gt; 'job_queue',\n    on_success =&gt; sub {\n      my ($amqp_method) = @_;\n      if ( not $amqp_method-&gt;{empty} ) {\n        pause_timer();\n        progress_job($amqp_method);\n        resume_timer();\n      }\n    },\n    on_failure =&gt; sub { $quit_programm-&gt;send( 'RABBITMQ_ERROR', @_ ) },\n  );\n\n  return;\n}\n</code></pre>\n\n<p><code>progress_job()</code> is where the message gets parsed and the job will be executed. <code>pause_timer()</code> and <code>resume_timer()</code> controls the <code>AnyEvent-&gt;timer</code> that triggers <code>_timer_tick()</code>.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Capture::Tiny 'capture';\nsub progress_job {\n  my ($amqp_method) = @_;\n  my $job = decode_json( $amqp_method-&gt;{body}-&gt;to_raw_payload() );\n  my ( $stdout, $stderr, $exit ) = capture {\n    system $job-&gt;{execute};\n  };\n  return;\n}\n</code></pre>\n\n<p>The first long running jobs went in and the system \"crashes\" with various error messages. Sometimes it throws 'Unknown channel id: 1', other times it throws 'Channel has already been closed'. So I did 'dumb debug' (trying to mess with the config) and found out that when the <code>heartbeat</code> interval is shorter than the time taken within <code>progress_job()</code> those errors will be thrown. After some thinking it makes sense. <code>progress_job()</code> is a blocking subroutine and AnyEvent cannot proceed sending heartbeat packages to RabbitMQ.</p>\n\n<p>My first quick thought on solving the blocking-heatbeat issue was to fork and do <code>progress_job()</code> in the child process. <a href=\"https://metacpan.org/pod/AnyEvent#FORK\" rel=\"nofollow\">AnyEvents documentation on FORK</a> points out that it is save to use <code>fork</code> when there is no access to the event system (e.g. through AnyEvent) within the child.\nNext thought: OK, there is no access to the event system so I can do fork.\nBUT: The timer should resume (<code>resume_timer()</code>) AFTER <code>progress_job()</code> has returned. Theoretically <code>resume_timer()</code> would be called right after <code>fork()</code> and not after <code>progress_job()</code> returns. So I stopped my implementation.</p>\n\n<p>My question: How to solve the last bit? How to <code>resume_timer()</code> after <code>progress_job()</code> (or in other words the forked child) returns?\nI cannot put <code>resume_timer()</code> within the child due to forking and the eventing system are not thread-safe.</p>\n"}, {"tags": ["perl", "ascii"], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "edited": false, "score": 0, "creation_date": 1453121343, "post_id": 34853486, "comment_id": 57449788, "body": "Maybe your manpage version is newer than mine (5.16.3) :) Thanks."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1453126034, "post_id": 34853486, "comment_id": 57452655, "body": "That text has been there since at least 5.8.8, though the wording has varied."}, {"owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453194975, "post_id": 34853486, "comment_id": 57483541, "body": "@ikegami nope, not in mine. Only two references to the options, and nothing explicative."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453208489, "post_id": 34853486, "comment_id": 57492723, "body": "Here&#39;s the passage that came with 5.8.8 <i>and</i> 5.16.3: &quot;The -T and -B switches work as follows. The first block or so of the file is examined for odd characters such as strange control codes or characters with the high bit set. If too many strange characters (&gt;30%) are found, it&#39;s a -B file; otherwise it&#39;s a -T file. Also, any file containing null in the first block is considered a binary file.&quot;."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1453124040, "last_edit_date": 1592644375, "creation_date": 1453116017, "answer_id": 34853486, "question_id": 34852668, "link": "https://stackoverflow.com/questions/34852668/how-are-perls-t-and-b-implemented/34853486#34853486", "title": "How are perl&#39;s -T and -B implemented?", "body": "<p>From the <a href=\"http://perldoc.perl.org/perlfunc.html\" rel=\"nofollow noreferrer\">same page:</a></p>\n<blockquote>\n<p>The -T and -B switches work as follows.</p>\n<p>The first block or so of the file is examined to see if it is valid UTF-8 that includes non-ASCII characters. If, so it's a -T file. Otherwise, that same portion of the file is examined for odd characters such as strange control codes or characters with the high bit set. If more than a third of the characters are strange, it's a -B file; otherwise it's a -T file. Also, any file containing a zero byte in the examined portion is considered a binary file. (If executed within the scope of a use locale which includes LC_CTYPE , odd characters are anything that isn't a printable nor space in the current locale.) If -T or -B is used on a filehandle, the current IO buffer is examined rather than the first block. Both -T and -B return true on an empty file, or a file at EOF when testing a filehandle. Because you have to read a file to do the -T test, on most occasions you want to use a -f against the file first, as in next unless -f $file &amp;&amp; -T $file .</p>\n</blockquote>\n"}], "owner": {"reputation": 647, "user_id": 3849157, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dae8ab07743abfc9843c1a893317e85e?s=128&d=identicon&r=PG&f=1", "display_name": "Otheus", "link": "https://stackoverflow.com/users/3849157/otheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 34853486, "answer_count": 1, "score": 3, "last_activity_date": 1453124040, "creation_date": 1453113569, "question_id": 34852668, "link": "https://stackoverflow.com/questions/34852668/how-are-perls-t-and-b-implemented", "title": "How are perl&#39;s -T and -B implemented?", "body": "<p>What does perl's -T function really do? From the man page on perlfunc:</p>\n\n<pre><code>-T  File is an ASCII text file (heuristic guess).\n-B  File is a \"binary\" file (opposite of -T).\n</code></pre>\n\n<p>Is the <code>-B</code> option simply equivalent to <code>! -T</code>, or is it simply an inversion of the heuristic, such that some of the time, a file may be true for both -B and -T. Does the heuristic have, say, a threshold for control characters? Does it ignore tabs, EOLs, EOFs and NULs?</p>\n"}, {"tags": ["perl", "whitespace"], "answers": [{"tags": [], "owner": {"reputation": 11131, "user_id": 242241, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/2fe96fe4513932ff30af562241c9db28?s=128&d=identicon&r=PG", "display_name": "AmbroseChapel", "link": "https://stackoverflow.com/users/242241/ambrosechapel"}, "is_accepted": false, "score": 3, "last_activity_date": 1453076543, "creation_date": 1453076543, "answer_id": 34845522, "question_id": 34845363, "link": "https://stackoverflow.com/questions/34845363/what-produces-the-white-space-in-my-perl-programm/34845522#34845522", "title": "What produces the white space in my perl programm?", "body": "<p>When you read in from your file, you need to chomp() the lines, or else the <code>\\n</code> at the end of the line is included.</p>\n\n<p>Try this and you'll see what's happening:</p>\n\n<pre><code>use Data::Dumper; ## add this line\nsub file_to_array($) {\n    my $file = shift();\n    my ( $filestream, $string );\n    my @rray;\n\n    open( $filestream, '&lt;', $file ) or die(\"cant open $file: $!\");\n    @rray = &lt;$filestream&gt;;\n    close($filestream);\n    print Dumper( \\@rray ); ### add this line\n    return @rray;\n}\n</code></pre>\n\n<p>you can add </p>\n\n<pre><code>foreach(@rray){\n  chomp();\n}\n</code></pre>\n\n<p>into your module to stop this happening.</p>\n"}, {"comments": [{"owner": {"reputation": 97, "user_id": 1623839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4449ebdfcdfcb1520797bdcafdc4ee6a?s=128&d=identicon&r=PG", "display_name": "Thaodan", "link": "https://stackoverflow.com/users/1623839/thaodan"}, "edited": false, "score": 0, "creation_date": 1453134997, "post_id": 34847394, "comment_id": 57458613, "body": "Ok Thank&#39;s for the explanation I didn&#39;t got how this came."}, {"owner": {"reputation": 97, "user_id": 1623839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4449ebdfcdfcb1520797bdcafdc4ee6a?s=128&d=identicon&r=PG", "display_name": "Thaodan", "link": "https://stackoverflow.com/users/1623839/thaodan"}, "edited": false, "score": 0, "creation_date": 1453154558, "post_id": 34847394, "comment_id": 57469109, "body": "Can you explain why declare array as late as possible?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 97, "user_id": 1623839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4449ebdfcdfcb1520797bdcafdc4ee6a?s=128&d=identicon&r=PG", "display_name": "Thaodan", "link": "https://stackoverflow.com/users/1623839/thaodan"}, "edited": false, "score": 0, "creation_date": 1453155784, "post_id": 34847394, "comment_id": 57469641, "body": "@Thaodan: It&#39;s to reduce <a href=\"https://en.wikipedia.org/wiki/Action_at_a_distance_%28computer_programming%29\" rel=\"nofollow noreferrer\"><i>action at a distance</i></a>. If you declare every variable at the top of your program, old C-style, then any part of the code can affect the value of any of the variables, either correctly or accidentally. If you declare them as <i>late</i> as possible \u2014 usually at the point they are defined \u2014 then each variable is accessible only in the rest of the smallest containing block, and it&#39;s much less likely that a variable may be modified by mistake. It also makes the code a lot clearer to read"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 5, "last_activity_date": 1453133843, "last_edit_date": 1453133843, "creation_date": 1453091676, "answer_id": 34847394, "question_id": 34845363, "link": "https://stackoverflow.com/questions/34845363/what-produces-the-white-space-in-my-perl-programm/34847394#34847394", "title": "What produces the white space in my perl programm?", "body": "<p>When you read from a file, the data includes the newline characters at the end of each line. You're not stripping those off, but you are adding an additional newline when you output your data again. That means your file is gaining additional blank lines each time you read and write it</p>\n\n<p>Also, you <em>must always</em> <code>use strict</code> and <code>use warnings 'all'</code> at the top of <em>every</em> Perl script; you should avoid using subroutine prototypes; and you should declare all of your variables as late as possible</p>\n\n<p>Here's a more idiomatic version of your module code which removes the newlines on input using <code>chomp</code>. Note that you don't need the <code>#!</code> line on the module file as it won't be run from the command line, but you my want it on the program file. It's also more normal to <em>export</em> symbols from a module using the <a href=\"http://metacpan.org/module/Exporter\" rel=\"nofollow\"><code>Exporter</code></a> module so that you don't have to qualify the subroutine names by prefixing them with the full package name</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\npackage KconfCtl::Helper;\n\nsub file_to_array {\n    my ($file) = @_;\n\n    open my $fh, '&lt;', $file or die qq{Can't open \"$file\" for input: $!};  #'\n    chomp(my @array = &lt;$fh&gt;);\n\n    return @array;\n }\n\nsub array_to_file {\n    my ($array, $file, $mode) = @_;\n    $mode //= '&gt;';\n\n    my $fh;\n    if ( $file ) {\n        open $fh, $mode, $file or die qq{Can't open \"$file\" for output: $!};  #'\n    }\n    else {\n        $fh = \\*STDOUT;\n    }\n\n    print $fh $_, \"\\n\" for @$array;\n}\n\n1;\n</code></pre>\n\n<p>and your test program would be like this</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings 'all';\n\nuse KconfCtl::Helper;\n\nuse constant FILE =&gt; 'kconf.test';\n\nmy @t = KconfCtl::Helper::file_to_array(FILE);\n\npush @t, 'n';\n\nKconfCtl::Helper::array_to_file(\\@t, FILE);\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 1623839, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4449ebdfcdfcb1520797bdcafdc4ee6a?s=128&d=identicon&r=PG", "display_name": "Thaodan", "link": "https://stackoverflow.com/users/1623839/thaodan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 34847394, "answer_count": 2, "score": 1, "last_activity_date": 1453133843, "creation_date": 1453075405, "question_id": 34845363, "link": "https://stackoverflow.com/questions/34845363/what-produces-the-white-space-in-my-perl-programm", "title": "What produces the white space in my perl programm?", "body": "<p>As the title says, I have a program or better two functions to read and write a file either in an array or to one.  But now to the mean reason why I write this: when running my test several times my test program that tests my functions produces more and more white space.  Is there somebody that could explain my fail and correct me?</p>\n\n<p>my code</p>\n\n<p>Helper.pm:</p>\n\n<pre><code>#!/usr/bin/env perl\n\npackage KconfCtl::Helper;\n\n\nsub file_to_array($) {\n    my $file = shift();\n    my ( $filestream, $string );\n    my @rray;\n\n    open( $filestream, $file ) or die(\"cant open $file: $!\");\n    @rray = &lt;$filestream&gt;;\n    close($filestream);\n    return @rray;\n }\n\n\nsub array_to_file($$;$) {\n    my @rray = @{ shift() };\n    my $file = shift();\n    my $mode = shift();\n    $mode='&gt;' if not $mode;\n    my $filestream;\n\n    if ( not defined $file ) {\n        $filestream = STDOUT;\n    }\n    else {\n        open( $filestream, $mode, $file ) or die(\"cant open $file: $!\");\n     }\n    my $l = @rray; print $l,\"\\n\";\n    foreach my $line (@rray) {\n      print $filestream \"$line\\n\";\n    }\n    close($filestream);\n}\n\n\n\n1;\n</code></pre>\n\n<p>test_helper.pl:</p>\n\n<pre><code>use KconfCtl::Helper;\nuse strict;\nmy @t;\n@t= KconfCtl::Helper::file_to_array(\"kconf.test\");\n#print @t;\nmy $t_index=@t;\n@t[$t_index]=\"n\";\nKconfCtl::Helper::array_to_file(\\@t, \"kconf.test\", \"&gt;\");\n</code></pre>\n\n<p>the result after the first:</p>\n\n<pre><code>n\n</code></pre>\n\n<p>and the 2nd run:</p>\n\n<pre><code>n\n\nn\n</code></pre>\n"}, {"tags": ["python", "json", "perl", "shell", "awk"], "answers": [{"tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": true, "score": 2, "last_activity_date": 1453072019, "last_edit_date": 1495541247, "creation_date": 1453069771, "answer_id": 34844538, "question_id": 34844381, "link": "https://stackoverflow.com/questions/34844381/splitting-a-big-json-file-and-setting-the-name-of-the-output-file/34844538#34844538", "title": "splitting a big json file and setting the name of the output file", "body": "<p>In two steps: first you generate the generically named files with</p>\n\n<pre><code>split -l 112 ../bigfile.csv\n</code></pre>\n\n<p>Now you have files named <code>xaa</code>, <code>xab</code> etc. I assume these are the only files in the directory. Now you can loop over them, extract the Id and rename them:</p>\n\n<pre><code>for file in *; do\n    newname=\"$(grep -m 1 -Po '(?&lt;=\"Id\": \")[^\"]+' \"$file\")\"\n    mv \"$file\" \"$newname.txt\"\ndone\n</code></pre>\n\n<p><code>grep -o</code> extracts only the match, and uses a zero-width \"look-behind\" to get the Id line. Look-arounds are only available when using the Perl regex engine (<code>-P</code>). <code>-m 1</code> stops after the first match so you don't go through the whole file when you know the first match is good enough.</p>\n\n<p><sub>This of course breaks badly when there aren't 112 lines per block &ndash; a <a href=\"https://stackoverflow.com/a/34844677/3266847\">proper solution</a> would parse the file.</sub></p>\n"}, {"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1453075460, "post_id": 34844677, "comment_id": 57431315, "body": "Note that this will cause the keys in the data to come out in a different order than the original.  If the data is actually as described, it might be better to <code>$&#47; = &quot;\\n}\\n&quot;; while (my $record = &lt;&gt;) { my $id = $json-&gt;decode($record)-&gt;{Id}; open(my $fh,...) or die; print $fh $record }</code> (only with error checking)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1453076670, "post_id": 34844677, "comment_id": 57431581, "body": "@ysth, Correct, but key order is meaningless in JSON. As for the rest of the comment, why don&#39;t you post it as an answer?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1453077364, "post_id": 34844677, "comment_id": 57431700, "body": "seemed too little different from yours"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1453078607, "post_id": 34844677, "comment_id": 57431960, "body": "@ysth, Completely different approach as far as I&#39;m concerned, but whatever"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1453093287, "post_id": 34844677, "comment_id": 57435215, "body": "@ysth: I prefer your solution and agree that you should post it"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1453437462, "last_edit_date": 1453437462, "creation_date": 1453070713, "answer_id": 34844677, "question_id": 34844381, "link": "https://stackoverflow.com/questions/34844381/splitting-a-big-json-file-and-setting-the-name-of-the-output-file/34844677#34844677", "title": "splitting a big json file and setting the name of the output file", "body": "<p>It sounds like you want to place each of the JSON documents in its own file. You can use JSON::XS's incremental parser to do that.</p>\n\n<pre><code>use JSON::XS qw( );\n\nmy $json = JSON::XS-&gt;utf8-&gt;new();\n\nlocal $/ = \\(1024*1024)\nwhile (&lt;&gt;) {\n   for my $obj ($json-&gt;incr_parse($_)) {\n      my $id = $obj-&gt;{Id};\n      open(my $fh, '&gt;', $id . \".txt\")\n         or die $!;\n      print($fh $json-&gt;encode($obj));\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "edited": false, "score": 0, "creation_date": 1453140873, "post_id": 34848704, "comment_id": 57462018, "body": "You are aware that what OP posted is not valid JSON, but rater multiply snippets of valid JSON combined in one file?"}, {"owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "reply_to_user": {"reputation": 41196, "user_id": 887539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5baef9617bdee6db2f534c118bcbccee?s=128&d=identicon&r=PG", "display_name": "andlrc", "link": "https://stackoverflow.com/users/887539/andlrc"}, "edited": false, "score": 0, "creation_date": 1453142073, "post_id": 34848704, "comment_id": 57462645, "body": "You are aware that I edited the post accordingly, 11 hours or so before your comment?"}], "tags": [], "owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "is_accepted": false, "score": 1, "last_activity_date": 1453099543, "creation_date": 1453099543, "answer_id": 34848704, "question_id": 34844381, "link": "https://stackoverflow.com/questions/34844381/splitting-a-big-json-file-and-setting-the-name-of-the-output-file/34848704#34848704", "title": "splitting a big json file and setting the name of the output file", "body": "<p>A general approach to the task (i.e., an approach that makes no assumptions about the stream of JSON entities in the input file, other than that they are valid JSON entities) is illustrated by the following \"one-liner\":</p>\n\n<pre><code>jq -cr '\"\\(.Id)\\t\\(.)\"' | awk -F\\\\t '{print $2 &gt; \"/tmp/\"$1\".json\"}'\n</code></pre>\n\n<p>This uses the \"JSON query\" (<a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow\">jq</a>) command-line processor, which is available on many platforms.</p>\n\n<p>If you want each of the new files to be pretty-printed then you can use jq for that as well in a second step, e.g.:</p>\n\n<pre><code>ls *.json | while read f ; do jq . \"$f\" &gt; \"$f.tmp\" &amp;&amp; mv \"$f.tmp\" \"$f\" ; done\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 5639026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73da79f589ec68418900c025d36d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "MukundK", "link": "https://stackoverflow.com/users/5639026/mukundk"}, "is_accepted": false, "score": 1, "last_activity_date": 1453262437, "creation_date": 1453262437, "answer_id": 34891353, "question_id": 34844381, "link": "https://stackoverflow.com/questions/34844381/splitting-a-big-json-file-and-setting-the-name-of-the-output-file/34891353#34891353", "title": "splitting a big json file and setting the name of the output file", "body": "<p>JSON structure is highly compatible with perl data structure so quick way to separate record in distinct file can be use of eval. Considering you json is not holding \":\" in values</p>\n\n<pre><code>local $/ = undef;\nopen FILE, \"Testjson.txt\" or die \"Couldn't open file: $!\";\nmy $string = &lt;BiGFILE&gt;;\nclose FILE;\n$string =~ s/:/,/g;  \n$jsonStr = eval $string;\n\nforeach my $record (@{$jsonStr}) {\n print $record-&gt;{'Id'} . \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 4872314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-vAWIfm0Jifg/AAAAAAAAAAI/AAAAAAAAAEA/RhoFJcx8auk/photo.jpg?sz=128", "display_name": "chan go", "link": "https://stackoverflow.com/users/4872314/chan-go"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 34844538, "answer_count": 4, "score": 0, "last_activity_date": 1453437462, "creation_date": 1453068741, "last_edit_date": 1453099757, "question_id": 34844381, "link": "https://stackoverflow.com/questions/34844381/splitting-a-big-json-file-and-setting-the-name-of-the-output-file", "title": "splitting a big json file and setting the name of the output file", "body": "<p>I have a large file of JSON objects (more than 12000 lines) that looks like:</p>\n\n<pre><code>{\n     \"System\": \"2334\", \n     \"Id\": \"AP64531346-2016055553824\", \n     \"dtis\": \"106165099\", \n     \"Type\": \"Up\",\n     ... (in total, 112 lines per record)\n}\n{\n     \"System\": \"873\", \n     \"Id\": \"AP24531346-20160676553824\", \n     \"dtis\": \"1261699\", \n     \"Type\": \"Up\",\n     ... (in total, 112 lines per record)\n}\n</code></pre>\n\n<p>I want to split the big file in small files each one with one entrance (112 lines) and set the name of each piece as the value of the \"Id\", i mean for example AP64531346-2016055553824.txt and AP24531346-20160676553824 respectively.</p>\n\n<p>I tried with the GNU Split but i can't set the name of each file as the Id plus .txt.</p>\n\n<pre><code>split -l 112 ../bigfile.csv \n</code></pre>\n\n<p>Any suggestion?</p>\n"}, {"tags": ["perl", "mqtt", "anyevent"], "answers": [{"comments": [{"owner": {"reputation": 5656, "user_id": 139792, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8169cfaf478e453156c423d619b2392a?s=128&d=identicon&r=PG", "display_name": "Ross Dargan", "link": "https://stackoverflow.com/users/139792/ross-dargan"}, "edited": false, "score": 0, "creation_date": 1453059367, "post_id": 34841513, "comment_id": 57426151, "body": "My last line would be <code>my $qos = $cv-&gt;recv; # subscribed, negotiated QoS == $qos</code>. Would that not wait then?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5656, "user_id": 139792, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8169cfaf478e453156c423d619b2392a?s=128&d=identicon&r=PG", "display_name": "Ross Dargan", "link": "https://stackoverflow.com/users/139792/ross-dargan"}, "edited": false, "score": 1, "creation_date": 1453059723, "post_id": 34841513, "comment_id": 57426279, "body": "It does wait. It waits for the subscription to be complete, because that&#39;s when <code>send</code> is called on that cv. But you want to keep waiting beyond that. [Renamed the vars in my answer to avoid confusion.]"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1453059703, "last_edit_date": 1453059703, "creation_date": 1453052772, "answer_id": 34841513, "question_id": 34841185, "link": "https://stackoverflow.com/questions/34841185/keep-a-perl-script-running/34841513#34841513", "title": "Keep a perl script running", "body": "<p>If you block with something that isn't AE-aware (e.g. <code>sleep</code>), then AE events won't be handled.</p>\n\n<p>To sleep while allowing the AE events to be handled, one normally uses</p>\n\n<pre><code>my $done_cv = AE::cv;\n$done_cv-&gt;recv;\n</code></pre>\n\n<p>Use <code>$done_cv-&gt;send;</code> to end the sleep. For example, If you wanted to sleep for 5 seconds, you'd use</p>\n\n<pre><code>my $sleep_cv = AE::cv;\nmy $w = AE::timer(5, 0, $sleep_cv);  # Short for AE::timer(5, 0, sub { $sleep_cv-&gt;send });\n$sleep_cv-&gt;recv;\n</code></pre>\n"}], "owner": {"reputation": 5656, "user_id": 139792, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8169cfaf478e453156c423d619b2392a?s=128&d=identicon&r=PG", "display_name": "Ross Dargan", "link": "https://stackoverflow.com/users/139792/ross-dargan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1054, "favorite_count": 0, "accepted_answer_id": 34841513, "answer_count": 1, "score": 4, "last_activity_date": 1453059703, "creation_date": 1453051004, "last_edit_date": 1453053331, "question_id": 34841185, "link": "https://stackoverflow.com/questions/34841185/keep-a-perl-script-running", "title": "Keep a perl script running", "body": "<p>I have a perl script that subscribes to a message queue using AnyEvent::MQTT.</p>\n\n<p>At the minute all I want it to do is print out when it get's a message. I'm totally new to perl so I'm using the demo code it comes with which includes a bit that publishes anything on the STDIN as a message - this works great, and I can see all the messages received.</p>\n\n<p>This code looks as follows</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse AnyEvent::MQTT;\nmy $mqtt = AnyEvent::MQTT-&gt;new;\nmy $cv = $mqtt-&gt;subscribe(topic =&gt; '/AlarmMode',\n                           callback =&gt; sub {\n                               my ($topic, $message) = @_;\n                                       print $topic, ' ', $message, \"\\n\"\n                                   });\n\nmy $qos = $cv-&gt;recv; # subscribed, negotiated QoS == $qos\n\n\n\n  # publish line-by-line from file handle\n      $cv =  $mqtt-&gt;publish(handle =&gt; \\*STDIN,\n                            topic =&gt; '/topic');\n</code></pre>\n\n<p>The issue I have is that if I remove everything after the comment <code>publish line-by-line from file handle</code> then my app exits as soon as it's ran.</p>\n\n<p>I've tried including a while loop that sleeps for 5 seconds but that does't work (the app just looks like it's hung).</p>\n\n<p>I know I need to do <em>something</em> to tell the app just to stay alive and chill, but I don't know what that command is :-)</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 294945, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1453038107, "post_id": 34838762, "comment_id": 57418685, "body": "The regex doesn&#39;t actually match the first case because it can&#39;t match spaces after <code>$abcd</code>. Can you provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>? Also, should the match fail if an <code>if</code> occurs anywhere on the line or just right after the variable? Right now, the regex <code>\\$[a-zA-Z_{}&lt;&gt;()\\$]+\\s*=\\s*\\$[$a-z{}&lt;&gt;()]+;</code> would be enough to exclude the first case, simply because of the <code>;</code> that isn&#39;t present after <code>$abcd</code>..."}, {"owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "reply_to_user": {"reputation": 294945, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1453038784, "post_id": 34838762, "comment_id": 57418894, "body": "@TimPietzcker: Hi Tim, no shortcuts :), i&#39;ve pasted the real test case (full) - previously tried to simplify it"}, {"owner": {"reputation": 294945, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1453039288, "post_id": 34838762, "comment_id": 57419052, "body": "Your new test case also matches the expression within parentheses (and rightly so, according to the current rules, since no <code>if</code> follows that expression). What would be the rule that disallows that match?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1453040671, "post_id": 34838762, "comment_id": 57419518, "body": "This is pretty much impossible to do in general using regular expressions. You might want to look at the <a href=\"http://metacpan.org/module/PPI\" rel=\"nofollow noreferrer\">PPI</a>  module <i>&quot;Parse, Analyze and Manipulate Perl (without perl)&quot;</i>"}], "owner": {"reputation": 4237, "user_id": 797308, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e6e98fb28139b207c708da19e50ce00a?s=128&d=identicon&r=PG", "display_name": "NirMH", "link": "https://stackoverflow.com/users/797308/nirmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453043229, "creation_date": 1453036711, "last_edit_date": 1453038753, "question_id": 34838762, "link": "https://stackoverflow.com/questions/34838762/looking-for-a-regex-to-match-if-specific-statement-doesnt-exist", "title": "Looking for a regex to match if specific statement doesn&#39;t exist", "body": "<p>I have few perl statements that i need to match/mismatch against a regular expression.</p>\n\n<p>the statements are:</p>\n\n<pre><code>$variable_A{&lt;default&gt;} = $abcd if ($address_space{$key_A}&lt;=$address);  &lt;-- mismatch as 'if' exist at end of statement\n\n$variable_B{&lt;default&gt;} = $abcd;              &lt;-- match\n</code></pre>\n\n<p>i have tried the following:</p>\n\n<p><code>(\\$[a-zA-Z\\${}_.\\'\\\"\\/() &lt;&gt;]+)\\s*=\\s*([0-9a-zA-Z\\${}_\\+\\-\\'\\\"()]+)(?!if)</code></p>\n\n<p>but this regexp match both cases...</p>\n\n<p>i know there are positive and negative lookahead (match if condition is met), but it seems i don't understand how to use them..</p>\n\n<p><a href=\"https://regex101.com/r/dR4bN1/9\" rel=\"nofollow\">Here is a DEMO</a></p>\n"}, {"tags": ["perl", "dll", "cgi", "xml-rpc", "bugzilla"], "answers": [{"tags": [], "owner": {"reputation": 987, "user_id": 3997460, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cf2626ae3679c49e664df12c35c81ed6?s=128&d=identicon&r=PG&f=1", "display_name": "megloff", "link": "https://stackoverflow.com/users/3997460/megloff"}, "is_accepted": true, "score": 3, "last_activity_date": 1453043969, "creation_date": 1453043969, "answer_id": 34839985, "question_id": 34838582, "link": "https://stackoverflow.com/questions/34838582/perl-cant-load-expat-xs-dll/34839985#34839985", "title": "Perl - Can&#39;t load Expat.xs.dll", "body": "<p>I opened a bug on the mozilla page for bugzilla <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1240367\" rel=\"nofollow\">https://bugzilla.mozilla.org/show_bug.cgi?id=1240367</a> </p>\n\n<p>The support answered me that strawberry is not supported for bugzilla v4.4 however I could solve the problem by copying the C:\\Strawberry\\c\\bin\\libexpat-1__.dll to C:\\Strawberry\\perl\\vendor\\lib\\auto\\XML\\Parser\\Expat\\libexpat-1__.dll (same directory as Expat.xs.dll is located). After that the XML Parser stuff and Expat.xs.dll could be executed properly.</p>\n\n<p>May be it helps for others. Regards</p>\n"}, {"tags": [], "owner": {"reputation": 117, "user_id": 233502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4b19473da00c874cb273bf9ca985d3?s=128&d=identicon&r=PG", "display_name": "tdolphin", "link": "https://stackoverflow.com/users/233502/tdolphin"}, "is_accepted": false, "score": 1, "last_activity_date": 1500657209, "creation_date": 1500657209, "answer_id": 45243218, "question_id": 34838582, "link": "https://stackoverflow.com/questions/34838582/perl-cant-load-expat-xs-dll/45243218#45243218", "title": "Perl - Can&#39;t load Expat.xs.dll", "body": "<p>I think the right answer should be:\nadd the folders</p>\n\n<pre><code>C:\\{PerlFolder}\\c\\bin\\ \nC:\\{PerlFolder}\\perl\\bin\n</code></pre>\n\n<p>to the path under environment variables.\nwhere {PerlFolder} in your case is \"Strawberry\"</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13688524, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5da0eef9a9a7459bc6fa5dabd6290726?s=128&d=identicon&r=PG", "display_name": "Antoine GARRIGUES", "link": "https://stackoverflow.com/users/13688524/antoine-garrigues"}, "is_accepted": false, "score": -1, "last_activity_date": 1591370572, "creation_date": 1591370572, "answer_id": 62218794, "question_id": 34838582, "link": "https://stackoverflow.com/questions/34838582/perl-cant-load-expat-xs-dll/62218794#62218794", "title": "Perl - Can&#39;t load Expat.xs.dll", "body": "<p>same pb, solved by adding perl\\bin in path </p>\n"}], "owner": {"reputation": 987, "user_id": 3997460, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/cf2626ae3679c49e664df12c35c81ed6?s=128&d=identicon&r=PG&f=1", "display_name": "megloff", "link": "https://stackoverflow.com/users/3997460/megloff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2911, "favorite_count": 0, "accepted_answer_id": 34839985, "answer_count": 3, "score": 0, "last_activity_date": 1591370572, "creation_date": 1453035521, "question_id": 34838582, "link": "https://stackoverflow.com/questions/34838582/perl-cant-load-expat-xs-dll", "title": "Perl - Can&#39;t load Expat.xs.dll", "body": "<p>Dear all I try to get XML RPC running on Bugzilla. I installed all perl modules what has been described by mozilla. but when I like to access the perl cgi script <a href=\"http://localhost:8010/xmlrpc.cgi\" rel=\"nofollow\">http://localhost:8010/xmlrpc.cgi</a> I get the following error.</p>\n\n<p><em>Can't load 'C:/Strawberry/perl/vendor/lib/auto/XML/Parser/Expat/Expat.xs.dll' for module XML::Parser::Expat: load_file:the requested modul get not found at C:/Strawberry/perl/lib/DynaLoader.pm line 193.</em> </p>\n\n<p>I verified the mentioned dll file  is existign at the place C:/Strawberry/perl/vendor/lib/auto/XML/Parser/Expat/Expat.xs.dll. Here I assume the dll may require other dependent dll and other perl modules. Apache  log file does not show me any additional information.</p>\n\n<p>Any hint what I can do?</p>\n\n<p>I am using</p>\n\n<ul>\n<li>Strawberry Perl v5.22.1 (64bit)</li>\n<li>Bugzilla v4.4.11</li>\n<li>Apache v2.4</li>\n<li>Windows 10 </li>\n</ul>\n"}, {"tags": ["regex", "perl", "nlp", "text-processing"], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 2818342, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H91Vb.jpg?s=128&g=1", "display_name": "Largo", "link": "https://stackoverflow.com/users/2818342/largo"}, "edited": false, "score": 0, "creation_date": 1453043179, "post_id": 34838317, "comment_id": 57420336, "body": "I am not sure why anybody should downvote this answer? It is correct, complete and works for the question above - have I done anything wrong here which I do not understand?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1453114577, "post_id": 34838317, "comment_id": 57445574, "body": "I downvoted it, because it only covers a very limited subset of accented characters."}, {"owner": {"reputation": 417, "user_id": 2818342, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H91Vb.jpg?s=128&g=1", "display_name": "Largo", "link": "https://stackoverflow.com/users/2818342/largo"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1453122670, "post_id": 34838317, "comment_id": 57450588, "body": "That is right, but those are the ones I am working with and I was asking for and you can add others easily. If there is a more elegant solution than listing them I don&#39;t know. But nevertheless, thanks for explaining!"}], "tags": [], "owner": {"reputation": 417, "user_id": 2818342, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H91Vb.jpg?s=128&g=1", "display_name": "Largo", "link": "https://stackoverflow.com/users/2818342/largo"}, "is_accepted": false, "score": -3, "last_activity_date": 1453033846, "creation_date": 1453033846, "answer_id": 34838317, "question_id": 34838316, "link": "https://stackoverflow.com/questions/34838316/how-to-find-words-with-more-than-one-accent/34838317#34838317", "title": "How to find words with more than one accent", "body": "<p>I was successfull finding those lines using the following (Perl flavoured) Regex:</p>\n\n<pre><code>^.*[\u00c1\u00c9\u00cd\u00d3\u00da\u00e1\u00e9\u00ed\u00f3\u00fa][^- ]*[\u00c1\u00c9\u00cd\u00d3\u00da\u00e1\u00e9\u00ed\u00f3\u00fa].*$\n</code></pre>\n\n<p>Matches every line that contains a group of characters that is not separated by a space or a dash but that contains more than one of the specified characters.</p>\n"}], "owner": {"reputation": 417, "user_id": 2818342, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/H91Vb.jpg?s=128&g=1", "display_name": "Largo", "link": "https://stackoverflow.com/users/2818342/largo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1453033846, "creation_date": 1453033846, "question_id": 34838316, "link": "https://stackoverflow.com/questions/34838316/how-to-find-words-with-more-than-one-accent", "title": "How to find words with more than one accent", "body": "<p>I have a list of thousands of lines and am trying to identify those lines that include words with more than one accented character for further analysis. There might be words separated by dashes, those are only interesting if one of their parts contains at least two accented characters.</p>\n\n<p>From the following list </p>\n\n<pre><code>caouennec lanv\u00e9z\u00e9ac\ncaouennec lanvez\u00e9ac\ncaouennec-lanvez\u00e9ac\ncaouennec lanvezeac\ncaouennec-lanv\u00e9z\u00e9ac\n</code></pre>\n\n<p>I want to find</p>\n\n<pre><code>caouennec lanv\u00e9z\u00e9ac\ncaouennec-lanv\u00e9z\u00e9ac\n</code></pre>\n"}, {"tags": ["regex", "perl", "file-io"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1453012667, "post_id": 34835541, "comment_id": 57412615, "body": "You&#39;re missing a closing paren <code>)</code> on the line with the comment."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1453013461, "post_id": 34835541, "comment_id": 57412744, "body": "So I am. Thanks a ton. <code>read_file</code> isn&#39;t happening, could you please help with that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1453028582, "post_id": 34835541, "comment_id": 57415944, "body": "You are opening a file handle <code>$infh</code> on the filename <code>$intHeaderFile</code>, but you never use that file handle. Instead, you pass <code>$intHeaderFile</code> to <code>read_file</code>. It <i>might</i> be that&#39;s not happening because the I/O is blocked by the file system after opening the file."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453038614, "post_id": 34835541, "comment_id": 57418833, "body": "No, that doesn&#39;t seem to be the reason- I tried reading it the standard way (<code>while(&lt;$infh&gt;</code>). Also, I was referring to <code>my @tempLines = read_file($tempfiles[$i]);</code>."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 1, "creation_date": 1453048257, "post_id": 34835541, "comment_id": 57421996, "body": "The problem is solved. Thank you all for your help!"}], "owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1453013522, "creation_date": 1453009598, "last_edit_date": 1453013522, "question_id": 34835541, "link": "https://stackoverflow.com/questions/34835541/perl-comparing-the-contents-of-one-file-with-those-of-several-others", "title": "Perl: Comparing the contents of one file with those of several others", "body": "<p>I have to read a CSV file (<code>TEST.csv</code>) with contents of this sort:</p>\n\n<pre><code>Sl.No, Label, Customer1, Customer2, Customer3...\n1, label1, Y, N, Y...\n2, label2, N, Y, Y...\n...\n</code></pre>\n\n<p>and retrieve only the labels marked as \"Y\" for every \"customer\", into an external file for that \"customer\". With some help from SO members in another question, I managed to desist from getting lost in a maze of nested data structures, and am using the construct below. Here, I'm copying the labels marked as \"Y\" to a temp file <code>_temp.h</code> for the corresponding customers. </p>\n\n<p>Now, the actual \"external file\" I need to write does not just have the labels, but is a copy of an \"internal file\" <code>internal.h</code>, which has data in this form:</p>\n\n<pre><code>/*...comments*/\n#define header_label1    val1;\n#define header_label2    val2;\n...\n</code></pre>\n\n<p>For example, I might have a line <code>#define ABC_Comp1_X_H_CompDes1  value</code>. If the label <code>Comp1_CompDes1</code> is present in the temp file I create for customer 1, then the line above is copied into the final external file for customer 1. </p>\n\n<p>The following code is the one I'm using. However, this throws an error \"Global symbol \"%tempLines\" requires explicit package name\" for the line marked \"HERE\", though I'm not using a hash, and also of syntax errors in the next couple of lines w.r.t. the curly braces. </p>\n\n<p>Any guidance as to the reason behind these errors would be highly appreciated. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Slurp;\nuse Data::Dumper;\n\nmy $numCustomers;\n\nmy $intHeaderFile = \"internal.h\";\n\nopen(my $fh, \"&lt;\", \"TEST.csv\") or die \"Unable to open CSV, $!\";\nopen(my $infh, \"&lt;\", $intHeaderFile) or die \"Cannot open $intHeaderFile, $!\";\nmy @headerLines = read_file($intHeaderFile);\n\nchomp( my $header = &lt;$fh&gt; );\nmy @names = split \",\", $header; \n$numCustomers = scalar(@names) - 2;\nprint \"\\nNumber of customers : $numCustomers\\n\";\nmy @customerNames;\nfor(my $i = 0; $i &lt; $numCustomers; $i++)\n{\n   push @customerNames, $names[$i + 2]; \n}\n\nmy @tempHandles;\nmy @handles;\nmy @tempfiles;\nmy @files;\nfor(my $i = 0; $i &lt; $numCustomers; $i++)\n{\n    my $custFile = \"customer\".$i.\"_external.h\";\n    open my $fh, '&gt;', $custFile or die \"$custFile: $!\";\n    push @handles, $fh;\n    push @files, $custFile;\n\n    my $tempFile = \"customer\".$i.\"_temp.h\";\n    open my $fh1, '+&gt;', $tempFile or die \"$tempFile: $!\";\n    push @tempHandles, $fh1;\n    push @tempfiles, $tempFile;\n}\n\n\nwhile (&lt;$fh&gt;) \n{\n    chomp;\n    my $nonIncLine = $_;\n    my @fields = split \",\", $nonIncLine;\n    next if $. == 1;\n    for(my $i = 0; $i &lt; $numCustomers; $i++) \n    {\n       print { $tempHandles[$i] } $fields[1], \"\\n\" if 'Y' eq $fields[ $i + 2 ]; \n    }\n}\n\n\nfor(my $i = 0; $i &lt; $numCustomers; $i++) \n{\n    my @tempLines = read_file($tempfiles[$i]);\n    print @tempLines;\n    foreach my $headerLine(@headerLines)\n    {\n        if (grep { $headerLine =~ /$_/} @tempLines )         #HERE\n        {\n            print { $handles[$i] } $headerLine, \"\\n\"; \n        }\n    }\n    unlink($tempfiles[$i]);\n}\n</code></pre>\n"}, {"tags": ["xml", "perl", "xpath"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1452990801, "post_id": 34833623, "comment_id": 57409087, "body": "I think you want <code>$node-&gt;getNodeText</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453003523, "post_id": 34833623, "comment_id": 57411247, "body": "@ikegami: <code>No such method getNodeText in XML::XPath::Node::AttributeImpl</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1453003682, "post_id": 34833623, "comment_id": 57411275, "body": "<code>XML::XPath::XMLParser::as_string($node)</code> is generally written <code>$node-&gt;toString</code>"}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 5086669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d822c001f0ebf6bc19c84a99f850d9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mastarius", "link": "https://stackoverflow.com/users/5086669/mastarius"}, "edited": false, "score": 0, "creation_date": 1453024050, "post_id": 34834971, "comment_id": 57414808, "body": "Thanks for your kindness and for explanation, i&#39;ll add your solution to my script !  I tried to look at this library&#39;s documentation but it was very unclear for me! Thanks again"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1467890300, "last_edit_date": 1467890300, "creation_date": 1453003408, "answer_id": 34834971, "question_id": 34833623, "link": "https://stackoverflow.com/questions/34833623/getting-an-attribute-value-using-perl-xpath/34834971#34834971", "title": "Getting an attribute value using Perl XPath", "body": "<p></p>\n\n<p>Each element of the nodeset is a <a href=\"http://metacpan.org/module/XML::XPath::Node::Attribute\" rel=\"nofollow\"><code>XML::XPath::Node::Attribute</code></a> object which has a <code>getNodeValue</code> method to get the <em>value</em> of the node</p>\n\n<p>The best way to get the next ID in sequence is to find the maximum value of all the <code>id</code> attributes and add one to it</p>\n\n<p>It's also probably best to use an XPath expression of <code>//messaggioUtente/@id</code> to avoid picking up the <code>id</code> attribute of any other element</p>\n\n<p>This code demonstrates. I've addded two more elements to your sample data with <code>id</code> values of 2 and 3 to show the functionality better</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse XML::XPath;\nuse List::Util 'max';\n\nmy $xp = XML::XPath-&gt;new(ioref =&gt; \\*DATA);\n\nmy $ids = $xp-&gt;find('//messaggioUtente/@id');\n\nmy $new_id = 1 + max map { $_-&gt;getNodeValue } $ids-&gt;get_nodelist;\n\nsay \"New ID = $new_id\";\n\n__DATA__\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;?meta name=\"GENERATOR\" content=\"XML::Smart/1.78 Perl/5.022001 [MSWin32]\" ?&gt;\n\n&lt;messaggiUtenti schemaLocation=\"messagiUtentiSchema.xsd\"&gt;\n  &lt;messaggioUtente id=\"1\"&gt;\n    &lt;nome&gt;Prova Evento&lt;/nome&gt;\n    &lt;email&gt;example@email.com&lt;/email&gt;\n    &lt;sitoweb&gt;www.example.com&lt;/sitoweb&gt;\n    &lt;messaggio&gt;Sample&lt;/messaggio&gt;\n  &lt;/messaggioUtente&gt;\n  &lt;messaggioUtente id=\"2\"&gt;\n    &lt;nome&gt;Prova Evento&lt;/nome&gt;\n    &lt;email&gt;example@email.com&lt;/email&gt;\n    &lt;sitoweb&gt;www.example.com&lt;/sitoweb&gt;\n    &lt;messaggio&gt;Sample&lt;/messaggio&gt;\n  &lt;/messaggioUtente&gt;\n  &lt;messaggioUtente id=\"3\"&gt;\n    &lt;nome&gt;Prova Evento&lt;/nome&gt;\n    &lt;email&gt;example@email.com&lt;/email&gt;\n    &lt;sitoweb&gt;www.example.com&lt;/sitoweb&gt;\n    &lt;messaggio&gt;Sample&lt;/messaggio&gt;\n  &lt;/messaggioUtente&gt;\n&lt;/messaggiUtenti&gt;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>New ID = 4\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 5086669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d822c001f0ebf6bc19c84a99f850d9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mastarius", "link": "https://stackoverflow.com/users/5086669/mastarius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 34834971, "answer_count": 1, "score": 1, "last_activity_date": 1467890300, "creation_date": 1452989501, "last_edit_date": 1453002940, "question_id": 34833623, "link": "https://stackoverflow.com/questions/34833623/getting-an-attribute-value-using-perl-xpath", "title": "Getting an attribute value using Perl XPath", "body": "<p>I'm trying to extract the attribute <code>id</code> from <code>messaggioUtente</code> on this XML code:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;?meta name=\"GENERATOR\" content=\"XML::Smart/1.78 Perl/5.022001 [MSWin32]\" ?&gt;\n\n&lt;messaggiUtenti schemaLocation=\"messagiUtentiSchema.xsd\"&gt;\n  &lt;messaggioUtente id=\"1\"&gt;\n    &lt;nome&gt;Prova Evento&lt;/nome&gt;\n    &lt;email&gt;example@email.com&lt;/email&gt;\n    &lt;sitoweb&gt;www.example.com&lt;/sitoweb&gt;\n    &lt;messaggio&gt;Sample&lt;/messaggio&gt;\n  &lt;/messaggioUtente&gt;\n&lt;/messaggiUtenti&gt;\n</code></pre>\n\n<p>My idea was to use <a href=\"http://metacpan.org/module/XML::XPath\" rel=\"nofollow\"><code>XML::XPath</code></a> and <a href=\"http://metacpan.org/module/XML::XPath::XMLParser\" rel=\"nofollow\"><code>XML::XPath::XMLParser</code></a> in this way, but i'm getting an incorrect result:</p>\n\n<pre><code>my $xp = XML::XPath-&gt;new(filename =&gt; 'newfile.xml');\nmy $nodeset = $xp-&gt;find('//@id'); \n\nforeach my $node ($nodeset-&gt;get_nodelist) {\n\n        print XML::XPath::XMLParser::as_string($node);\n }\n</code></pre>\n\n<p>The problem is, I'm trying to get the integer value from the id, while this code extract the whole string <code>id = \"1\"</code>. </p>\n\n<p>What's your suggestion to achieve this? My goal is getting the id number and increase it until i get a new unused id for my next <code>messaggioUtente</code> value. \nSo my code is something like this, but due to the string problem it's not correct.</p>\n\n<pre><code>$id = 1;\n\nmy $xp = XML::XPath-&gt;new(filename =&gt; 'newfile.xml');\nmy $nodeset = $xp-&gt;find('//@id'); \n\nforeach my $node ($nodeset-&gt;get_nodelist) {\n\n        my $tempvar = XML::XPath::XMLParser::as_string($node);\n        if($node eq $id)\n        {\n            $id = $id + 1;\n        } \n    }\n</code></pre>\n"}, {"tags": ["perl", "sorting", "hash"], "answers": [{"tags": [], "owner": {"reputation": 2786, "user_id": 1263565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a387c319e911adcdd5996d7af0d578?s=128&d=identicon&r=PG&f=1", "display_name": "Hayden", "link": "https://stackoverflow.com/users/1263565/hayden"}, "is_accepted": true, "score": 9, "last_activity_date": 1452981456, "last_edit_date": 1495541819, "creation_date": 1452981456, "answer_id": 34832594, "question_id": 34832562, "link": "https://stackoverflow.com/questions/34832562/how-do-i-sort-a-perl-hash-by-multiple-keys/34832594#34832594", "title": "How do I sort a perl hash by multiple keys?", "body": "<p>A similar question has been asked before and can be found here:\n<a href=\"https://stackoverflow.com/questions/10395383/sorting-an-array-of-hash-by-multiple-keys-perl\">Sorting an Array of Hash by multiple keys Perl</a></p>\n\n<p>Basically, Perl has two operators for sorting, <code>&lt;=&gt;</code> and <code>cmp</code> which return -1, 0 or 1, depending on if the left hand side is less than, equal to, or greater than the right hand side. <code>&lt;=&gt;</code> is used for numerical comparison, and <code>cmp</code> is used for stringwise comparison. More detail about their use can be found here: <a href=\"http://perldoc.perl.org/perlop.html#Equality-Operators\" rel=\"nofollow noreferrer\" title=\"Equality Operators\">Equality Operators</a>. </p>\n\n<p>These operators can be used with Perl's <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\"><code>sort</code></a> function and in conjuction with the <code>or</code> operator can be used to achieve the result you're after:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $data = {\n    'a' =&gt; { key1 =&gt; 2, key2 =&gt; 1 },\n    'b' =&gt; { key1 =&gt; 1, key2 =&gt; 2 },\n    'c' =&gt; { key1 =&gt; 1, key2 =&gt; 1 },\n    'd' =&gt; { key1 =&gt; 3, key2 =&gt; 2 },\n    'e' =&gt; { key1 =&gt; 3, key2 =&gt; 1 },\n    'f' =&gt; { key1 =&gt; 1, key2 =&gt; 2 },\n};\n\nmy @sorted = sort {\n        $data-&gt;{$a}-&gt;{key2} &lt;=&gt; $data-&gt;{$b}-&gt;{key2} or\n        $data-&gt;{$b}-&gt;{key1} &lt;=&gt; $data-&gt;{$a}-&gt;{key1} or\n        $a cmp $b\n    } keys %{$data};\n\nfor my $key (@sorted){\n    print \"$key\\n\";\n}\n</code></pre>\n\n<p>Since <code>&lt;=&gt;</code> and <code>cmp</code> return 0 (false) for equality, it means we can chain equality checks together with <code>or</code> or <code>||</code>. </p>\n\n<p>In the example above we <code>$a</code> and <code>$b</code> to refer to a key of the <code>$data</code> hashref at a particular iteration of the sort. Using these keys we can access particular values of the hash, e.g. <code>$data-&gt;{$a}-&gt;{key2}</code>. By putting <code>$a</code> before <code>$b</code> it will cause the sort to be in ascending order, and putting <code>$b</code> before <code>$a</code> will cause the sort to be in descending order. </p>\n"}], "owner": {"reputation": 65, "user_id": 5799713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b1a7aa3b6b26012202dadd69614dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/5799713/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1581, "favorite_count": 0, "accepted_answer_id": 34832594, "answer_count": 1, "score": 3, "last_activity_date": 1452981456, "creation_date": 1452981245, "question_id": 34832562, "link": "https://stackoverflow.com/questions/34832562/how-do-i-sort-a-perl-hash-by-multiple-keys", "title": "How do I sort a perl hash by multiple keys?", "body": "<p>Hi I have a data structure which is of the following form:</p>\n\n<pre><code>$data = {                                                                                           \n    'a' =&gt; { key1 =&gt; 2, key2 =&gt; 1 },                                                                   \n    'b' =&gt; { key1 =&gt; 1, key2 =&gt; 2 },                                                                   \n    'c' =&gt; { key1 =&gt; 1, key2 =&gt; 1 },                                                                   \n    'd' =&gt; { key1 =&gt; 3, key2 =&gt; 2 },                                                                   \n    'e' =&gt; { key1 =&gt; 3, key2 =&gt; 1 },                                                                   \n    'f' =&gt; { key1 =&gt; 1, key2 =&gt; 2 },                                                                   \n};\n</code></pre>\n\n<p>what I want to be able to do is loop through this data structure in ascending order of <code>key2</code>, descending order of <code>key1</code>, and then ascending order of the hash key, e.g:</p>\n\n<pre><code>e\na\nc\nd\nb\nf\n</code></pre>\n\n<p>how can I achieve this in perl? I know that I can sort the hash by key using <code>sort keys %$data</code>, but how can I sort by multiple values and keys?</p>\n"}, {"tags": ["html", "perl", "validation"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 4, "creation_date": 1452945606, "post_id": 34826427, "comment_id": 57395154, "body": "You should always <code>use strict</code> and <code>use warnings</code> at the top of your scripts. They will give you helpful error messages. The 500 is displayed because there is a fatal error, but because the program does not send a content-type header first, it&#39;s treated like an <i>internal server error</i> by the web server. The HTTP response is broken. That&#39;s normal when something goes wrong. You can use <a href=\"https://metacpan.org/pod/CGI::Carp#REDIRECTING-ERROR-MESSAGES\" rel=\"nofollow noreferrer\">metacpan.org/pod/CGI::Carp#REDIRECTING-ERROR-MESSAGES</a> to get the message through to the browser while developing. Maybe you have not installed Email::Valid?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1452945662, "post_id": 34826427, "comment_id": 57395171, "body": "It sounds like you don&#39;t have the <code>Email::Valid</code> module installed. What happens if you run the program from the command line? Also, you must <i>always</i> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of <i>every</i> Perl program you write"}, {"owner": {"reputation": 183, "user_id": 5086669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d822c001f0ebf6bc19c84a99f850d9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mastarius", "link": "https://stackoverflow.com/users/5086669/mastarius"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452946089, "post_id": 34826427, "comment_id": 57395292, "body": "@Borodin Running the script with strict and warnings gives me the same error. End of script output before headers: contatti.cgi  And about installation of modules, aren&#39;t those already installed in xampp? I mean, what happens if i use a module like this in a webserver? Isn&#39;t there a standard library like other languages?. Sorry for my dumbness but i&#39;m into perl since a couple of days so i don&#39;t know how it works"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1452950678, "post_id": 34826427, "comment_id": 57396627, "body": "Yes Perl has a standard library like other languages. No, <code>Email::valid</code> isn&#39;t in it. Given that you say you don&#39;t know how Perl works, why are you arguing with me about the solution?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1452954003, "post_id": 34826427, "comment_id": 57397642, "body": "Like @Borodin stated, my first guess was that you probably don&#39;t have <code>Email::Valid</code> installed. On the command line, what&#39;s the output when you run this: <code>perl -MEmail::Valid</code>? If you get an error, run <code>sudo cpan install Email::Valid</code>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1452955845, "post_id": 34826427, "comment_id": 57398227, "body": "Any time you get an HTTP 500 error, check the webserver error logs to see the exact cause."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452961553, "post_id": 34826427, "comment_id": 57400047, "body": "If you run your CGI program from the command line as I asked, with <code>perl contatti.cgi</code>. I expect that you will get an error message saying <code>Can&#39;t locate Email&#47;Valid.pm in @INC (you may need to install the Email::Valid module)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 5086669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d822c001f0ebf6bc19c84a99f850d9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mastarius", "link": "https://stackoverflow.com/users/5086669/mastarius"}, "is_accepted": true, "score": 0, "last_activity_date": 1452985411, "last_edit_date": 1452985411, "creation_date": 1452985027, "answer_id": 34833081, "question_id": 34826427, "link": "https://stackoverflow.com/questions/34826427/perl-internal-server-error-when-using-emailvalid/34833081#34833081", "title": "Perl internal server error when using Email::valid", "body": "<p>After some searching, i found that the Perl server i was running through XAMPP didn't install the modules successfully. I decided to switch to Strawberry which is running smoothly! So the problem was XAMPP and module installation.</p>\n\n<p>Thanks for the suggestions and for the help to all the people</p>\n"}], "owner": {"reputation": 183, "user_id": 5086669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d822c001f0ebf6bc19c84a99f850d9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mastarius", "link": "https://stackoverflow.com/users/5086669/mastarius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 34833081, "answer_count": 1, "score": 0, "last_activity_date": 1453048390, "creation_date": 1452943854, "last_edit_date": 1453048390, "question_id": 34826427, "link": "https://stackoverflow.com/questions/34826427/perl-internal-server-error-when-using-emailvalid", "title": "Perl internal server error when using Email::valid", "body": "<p>I noticed I'm getting <em>Internal server error 500</em> when i try to use Email::Valid in my CGI script. I'm a newbie in this, so i'm not able to understand what the problem may be. I'm trying to write a simple form validator using Email::Valid to validate email addresses, but when I try to put the line</p>\n\n<pre><code>use Email::Valid;\n</code></pre>\n\n<p>it gives me the error. Here's my complete code:</p>\n\n<pre><code>#!C:\\xampp\\perl\\bin\\perl.exe\n\nuse Email::Valid;\nuse CGI;\n\n\nmy $query = new CGI;\nprint $query-&gt;header ( );\n\nmy $nome = $query-&gt;param(\"Nome\");\nmy $email_address = $query-&gt;param(\"Email\");\nmy $website = $query-&gt;param(\"Website\");\nmy $comments = $query-&gt;param(\"Messaggio\");\n\n$nome = filter ( $nome );\nunless( Email::Valid-&gt;address($email_address) ) {\n    $email_address = \"Invalid email address\";\n}\n$website = filter ( $website );\n$comments = filter ( $comments );\n\n\nprint \"Nome: $nome&lt;br&gt;\";\nprint \"Email: $email_address&lt;br&gt;\";\nprint \"Sito: $website&lt;br&gt;\";\nprint \"$comments&lt;br&gt;\";\n\nprint &lt;&lt;END_HTML;\n&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;Thanks for filling in our form!&lt;/body&gt;\n&lt;/html&gt;\nEND_HTML\n\n\nsub filter\n{\n  my $field = shift;\n  $field =~ s/From://gi;\n  $field =~ s/To://gi;\n  $field =~ s/BCC://gi;\n  $field =~ s/CC://gi;\n  $field =~ s/Subject://gi;\n  $field =~ s/Content-Type://gi;\n  $field =~ s/[\\0\\n\\r\\|\\!\\/\\&lt;\\&gt;\\^\\$\\%\\*\\&amp;]+/ /g;\n  return $field;\n}\n</code></pre>\n\n<p>When using this code without the Email::Valid, it works fine!</p>\n\n<pre><code>#!C:\\xampp\\perl\\bin\\perl.exe\n\nuse CGI;\n\n\nmy $query = new CGI;\nprint $query-&gt;header ( );\n\nmy $nome = $query-&gt;param(\"Nome\");\nmy $email_address = $query-&gt;param(\"Email\");\nmy $website = $query-&gt;param(\"Website\");\nmy $comments = $query-&gt;param(\"Messaggio\");\n\n$nome = filter ( $nome );\n$email_address = filter ( $email_address );\n$website = filter ( $website );\n$comments = filter ( $comments );\n\n\nprint \"Nome: $nome&lt;br&gt;\";\nprint \"Email: $email_address&lt;br&gt;\";\nprint \"Sito: $website&lt;br&gt;\";\nprint \"$comments&lt;br&gt;\";\n\nprint &lt;&lt;END_HTML;\n&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;Thanks for filling in our form!&lt;/body&gt;\n&lt;/html&gt;\nEND_HTML\n\n\nsub filter\n{\n  my $field = shift;\n  $field =~ s/From://gi;\n  $field =~ s/To://gi;\n  $field =~ s/BCC://gi;\n  $field =~ s/CC://gi;\n  $field =~ s/Subject://gi;\n  $field =~ s/Content-Type://gi;\n  $field =~ s/[\\0\\n\\r\\|\\!\\/\\&lt;\\&gt;\\^\\$\\%\\*\\&amp;]+/ /g;\n  return $field;\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 3, "creation_date": 1452901671, "post_id": 34821625, "comment_id": 57385993, "body": "A framework is neither necessary nor sufficient to solve your security problems."}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1452904743, "post_id": 34821625, "comment_id": 57386841, "body": "angular.js does take care of some the security issue by itself, even though not all."}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1452905653, "post_id": 34821625, "comment_id": 57387045, "body": "No, that&#39;s really not true at all. angular.js is a front-end framework; it isn&#39;t a server-side component, and there&#39;s absolutely no way you&#39;d be able to retrofit it onto an existing web application in a way that&#39;d have any effect on your security. (For instance, it&#39;d do absolutely nothing about SQL injection!)"}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 1, "creation_date": 1452906773, "post_id": 34821625, "comment_id": 57387292, "body": "Like any other technology, AngularJS is not impervious to attack. Angular does, however, provide built-in protection from basic security holes, including cross-site scripting and HTML injection attacks. AngularJS does round-trip escaping on all strings for you and even offers XSRF protection for server-side communication.  AngularJS was designed to be compatible with other security measures like Content Security Policy (CSP), HTTPS (SSL/TLS) and server-side authentication and authorization that greatly reduce the possible attack vectors and we highly recommend their use."}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1452906801, "post_id": 34821625, "comment_id": 57387301, "body": "<a href=\"https://docs.angularjs.org/misc/faq\" rel=\"nofollow noreferrer\">docs.angularjs.org/misc/faq</a>   search for &quot;security&quot;"}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "reply_to_user": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1452907039, "post_id": 34821625, "comment_id": 57387351, "body": "Angualr is front end stuff, but go back to my point, i&#39;m asking if any perl backend framework has already taking care of some security stuff like Angular does. The other part of my question is, if i want to re-use my old perl cgi code, which perl framework should i use now ?"}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1452913025, "post_id": 34821625, "comment_id": 57388469, "body": "I&#39;ve worked with Catalyst, CGI::Application, Dancer, Mason and Mojolicious.  My current favourite is Mojolicious. It&#39;s well documented, actively maintained and is very easy to get up and running with."}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 0, "creation_date": 1452914129, "post_id": 34821625, "comment_id": 57388652, "body": "Thanks you very much oalders !"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1452942426, "post_id": 34821625, "comment_id": 57394258, "body": "I suggest you do what Borodin said, and come back with specific questions once you have made a decision. We can help with individual issues here, but not with suggesting ways to do this. If you are having a lot of trouble with that and it&#39;s critical, maybe actually hiring a professional team like Shadowcat is a good idea."}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 0, "creation_date": 1453052265, "post_id": 34821625, "comment_id": 57423531, "body": "Well simbabque, i think my original question is very clear, if this site doesn&#39;t allow ppl to discuss about different software packages etc, i don&#39;t know what&#39;s the propose then. Seems there&#39;s a &quot;political correctness&quot; issue in this site now, makes me sick.        Thank you and all those made constructive help !"}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 0, "creation_date": 1453052339, "post_id": 34821625, "comment_id": 57423561, "body": "btw i stop here, pretty disappointed."}], "answers": [{"comments": [{"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 0, "creation_date": 1452915068, "post_id": 34823163, "comment_id": 57388794, "body": "Borodin, 1st of all thanks very much for your constructive reply, it&#39;s very useful. I feel being attacked by some people here, i&#39;m asking a question in an area that i don&#39;t know much. I saw my points get subtracted, so since i don&#39;t know about this area then i get punished ? Admin can take all my points back, i really don&#39;t need it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 3, "creation_date": 1452915425, "post_id": 34823163, "comment_id": 57388860, "body": "There can be some intolerance from Stack Overflow&#39;s regulars, and I have been as guilty of it as anyone else. But the downvotes are not about your inexperience with the technology, but because your question is very clearly off-topic for the site. It&#39;s worth reading the Help Centre item on <a href=\"http://stackoverflow.com/help/on-topic\"><i>What topics can I ask about here?</i></a>"}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 0, "creation_date": 1452915664, "post_id": 34823163, "comment_id": 57388896, "body": "Borodin, i don&#39;t know, so if  i don&#39;t know which framework to use, any other sites you can recommend ? or maybe i should just go to perl sites directly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 1, "creation_date": 1452915832, "post_id": 34823163, "comment_id": 57388917, "body": "@user3552178: You should start with the <code>CGI::Alternatives</code> document that I have linked, and then peruse CPAN and try googling for something like <i>migrating from CGI.pm</i>. There are many people in the same boat as you are and a lot of them have written about their experiences"}, {"owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 0, "creation_date": 1452915941, "post_id": 34823163, "comment_id": 57388935, "body": "thank you so much Borodin, let me start reading, i stop here and you have a good weekend !"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "edited": false, "score": 2, "creation_date": 1452942309, "post_id": 34823163, "comment_id": 57394229, "body": "@user3552178 in addition, you are speaking about XSS and SQL injection. For the latter, make sure you at least skim <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">metacpan.org/pod/DBI</a> and maybe check <a href=\"http://bit.ly/1Q4TQIe\" rel=\"nofollow noreferrer\">bit.ly/1Q4TQIe</a>. Make sure your code is using placeholders (that&#39;s the <code>?</code>) everywhere. That will give a good start. Migrating a CGI application to a framework in a few weeks time is probably only possible if we are talking about maybe 1k to 5k lines of code. Anything more will not be possible with one developer while keeping standards. Good luck."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 4, "last_activity_date": 1452915535, "last_edit_date": 1452915535, "creation_date": 1452914272, "answer_id": 34823163, "question_id": 34821625, "link": "https://stackoverflow.com/questions/34821625/what-perl-web-framework-to-use-for-the-old-cgi-based-perl-code/34823163#34823163", "title": "What perl web framework to use for the old CGI based perl code?", "body": "<p>You have fallen foul of the <em>primarily opinion-based</em> off-topic categorisation, and your question will probably be closed very soon. However I think it's worth offering a few guidelines here</p>\n\n<p>First of all you should absorb what is written in <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow\"><code>CGI::Alternatives</code></a> as it is a reasonable summary of the subject</p>\n\n<p>Next you should separate the HTML generation functionality of your existing CGI code from the interface itself, and consider replacements for each of them separately. If you were to use <a href=\"https://metacpan.org/pod/HTML::Tiny\" rel=\"nofollow\"><code>HTML::Tiny</code></a> together with <a href=\"https://metacpan.org/pod/CGI::Simple\" rel=\"nofollow\"><code>CGI::Simple</code></a> then your code would have to change very little and you would have achieved better partitioning of functionality</p>\n\n<p>Ideally you will move on to one of the many templating systems such as <a href=\"https://metacpan.org/pod/Template\" rel=\"nofollow\"><code>Template Toolkit</code></a>, together with one of the frameworks, which is the topic of your question. In the end you will need to do a lot of research and many trials to discover how well each framework fits your requirement, in terms of both the feature list and the convenience and clarity of the API</p>\n\n<p>All I can do here is say that I am very fond of the <a href=\"https://metacpan.org/pod/Mojo\" rel=\"nofollow\"><em>Mojolicious suite</em></a> and suggest that it may be a good starting point. The API focuses on command chaining in a way similar to Ruby, and there is a <a href=\"https://metacpan.org/pod/Mojolicious::Plugin::CGI\" rel=\"nofollow\"><code>Mojolicious::Plugin::CGI</code></a> accessory which will allow you to execute CGI scripts unchanged during your migration</p>\n\n<p>Note however that all of the frameworks that you mention, as well as several others, will have their proponents. That is why you must make the selection yourself, as such recommendations will be influenced primarily by familiarity, and without your own knowledge of the requirements of your project</p>\n\n<p>Unfortunately I cannot speak to the security issues of the various options, but I hope that has helped a little </p>\n"}], "owner": {"reputation": 1643, "user_id": 3552178, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/ykSxS.jpg?s=128&g=1", "display_name": "user3552178", "link": "https://stackoverflow.com/users/3552178/user3552178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "closed_date": 1452913189, "answer_count": 1, "score": -8, "last_activity_date": 1452915535, "creation_date": 1452900611, "question_id": 34821625, "link": "https://stackoverflow.com/questions/34821625/what-perl-web-framework-to-use-for-the-old-cgi-based-perl-code", "closed_reason": "Opinion-based", "title": "What perl web framework to use for the old CGI based perl code?", "body": "<p>Yes, while i'm working on node.js, i still love perl, :)</p>\n\n<p>The old web product is based on old perl CGI, i'm looking to the simplest way to fix XSS/Sql injection/etc. web security holes, within a week including testing, :(</p>\n\n<p>So for\nCatalyst\nDancer\nMason\nMaypole \nMojolicious</p>\n\n<p>which one should i use in the ARM platform ?\nThank you !</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452905597, "post_id": 34821209, "comment_id": 57387034, "body": "There are lots of scenarios where adding <code>{}</code> changes the parse, e.g. <code>&quot;$foobar&quot;</code> vs. <code>&quot;${foo}bar&quot;</code>, <code>&quot;$foo::bar&quot;</code> vs. <code>&quot;${foo}::bar&quot;</code>, <code>&quot;$foo&#39;s bar&quot;</code> vs. <code>&quot;${foo}&#39;s bar&quot;</code>, <code>&quot;$foo[0]&quot;</code> vs. <code>&quot;${foo}[0]&quot;</code>. But I&#39;m guessing you&#39;re asking about situations besides string interpolation?"}, {"owner": {"reputation": 4481, "user_id": 2534803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c7ec08249e708f748e2b9f7f9210b7aa?s=128&d=identicon&r=PG&f=1", "display_name": "hmatt1", "link": "https://stackoverflow.com/users/2534803/hmatt1"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1453130765, "post_id": 34821209, "comment_id": 57455861, "body": "@ThisSuitIsBlackNot you guessed right. Great answer too!"}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 18, "last_activity_date": 1452898612, "creation_date": 1452898612, "answer_id": 34821262, "question_id": 34821209, "link": "https://stackoverflow.com/questions/34821209/why-does-fh-behave-differentially-than-fh-when-reading-line-by-line/34821262#34821262", "title": "Why does ${fh} behave differentially than $fh when reading line by line?", "body": "<p>From the section on <code>&lt;&gt;</code> in <a href=\"http://perldoc.perl.org/perlop.html#I/O-Operators\">perlop</a>:</p>\n\n<blockquote>\n  <p>If what the angle brackets contain is a simple scalar variable (for example, <code>$foo</code>), then that variable contains the name of the filehandle to input from, or its typeglob, or a reference to the same. For example:</p>\n\n<pre><code>$fh = \\*STDIN;\n$line = &lt;$fh&gt;;\n</code></pre>\n  \n  <p>If what's within the angle brackets is neither a filehandle nor a simple scalar variable containing a filehandle name, typeglob, or typeglob reference, it is interpreted as a filename pattern to be globbed, and either a list of filenames or the next filename in the list is returned, depending on context. This distinction is determined on syntactic grounds alone. That means <code>&lt;$x&gt;</code> is always a <code>readline()</code> from an indirect handle, but <code>&lt;$hash{key}&gt;</code> is always a <code>glob()</code>. That's because <code>$x</code> is a simple scalar variable, but <code>$hash{key}</code> is not--it's a hash element. Even <code>&lt;$x &gt;</code> (note the extra space) is treated as <code>glob(\"$x \")</code>, not <code>readline($x)</code>.</p>\n</blockquote>\n\n<p>You can see this with <a href=\"http://perldoc.perl.org/B/Concise.html\">B::Concise</a>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ perl -MO=Concise -e'&lt;$fh&gt;'\n5  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 1 -e:1) v:{ -&gt;3\n4     &lt;1&gt; readline[t1] vK*/1 -&gt;5\n-        &lt;1&gt; ex-rv2sv sK/1 -&gt;4\n3           &lt;$&gt; gvsv(*fh) s -&gt;4\n-e syntax OK\n\n$ perl -MO=Concise -e'&lt;${fh}&gt;'\n6  &lt;@&gt; leave[1 ref] vKP/REFC -&gt;(end)\n1     &lt;0&gt; enter -&gt;2\n2     &lt;;&gt; nextstate(main 70 -e:1) v:{ -&gt;3\n5     &lt;@&gt; glob[t1] vK/1 -&gt;6\n-        &lt;0&gt; ex-pushmark s -&gt;3\n-        &lt;1&gt; ex-rv2sv sK/1 -&gt;4\n3           &lt;$&gt; gvsv(*fh) s -&gt;4\n4        &lt;$&gt; gv(*_GEN_0) s -&gt;5\n-e syntax OK\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1452920382, "post_id": 34823013, "comment_id": 57389600, "body": "So basically <code>&lt;&gt;</code> is defined at the utter character level ... wow, CS flunk job!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 4, "creation_date": 1452920573, "post_id": 34823013, "comment_id": 57389639, "body": "@Kaz, Where did you get that? My post defined it in terms of tokens. Even if it did use a sub-language (like <code>m&#47;&#47;</code>, <code>tr&#47;&#47;&#47;</code>, <code>sprintf</code> and <code>glob</code> do), I don&#39;t see why that gets your knickers in a knot."}, {"owner": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1452920814, "post_id": 34823013, "comment_id": 57389672, "body": "In the other answer it is noted (quoted from documentation) that even <code>&lt;$x &gt;</code> is completely different from <code>&lt;$x&gt;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 48191, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 2, "creation_date": 1452920849, "post_id": 34823013, "comment_id": 57389679, "body": "@Kaz, In this answer too. So what? Why do you mention that?"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1453579561, "post_id": 34823013, "comment_id": 57666645, "body": "Probably because treating <code>&lt;$x&gt;</code> different from <code>&lt;$x &gt;</code> or <code>&lt; $x &gt;</code> is a reason to get your knickers in a knot."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 1, "creation_date": 1453608959, "post_id": 34823013, "comment_id": 57674135, "body": "@nwellnhof, You appear to have only read half of my sentence, because I specifically said that&#39;s not a reason to your knickers in a not since it happens all the time. <code>&#47;$x&#47;</code> is different than <code>&#47;$x &#47;</code>. <code>&quot;$x&quot;</code> is different than <code>&quot;$x &quot;</code>. etc"}, {"owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1453842212, "post_id": 34823013, "comment_id": 57774348, "body": "But <code>m{}</code> and <code>qq{}</code> are <i>quote-like</i> operators, so it&#39;s obvious that whitespace is significant. The problem with the diamond operator is that it&#39;s used as a shortcut for both <code>glob</code> and <code>readline</code> and that it should at least allow leading or trailing whitespace in the <code>readline</code> case. Do you really want to argue that this isn&#39;t a huge design mistake?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "edited": false, "score": 0, "creation_date": 1453843279, "post_id": 34823013, "comment_id": 57774994, "body": "@nwellnhof, Yes, I will indeed argue that allowing trailing blanks in the glob case is NOT a huge design mistake. There is a huge design mistake, but it&#39;s allowing <code>&lt;&gt;</code> to take a sublanguage instead of just an expression to pass to <code>readline</code>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 11, "last_activity_date": 1452912494, "creation_date": 1452912494, "answer_id": 34823013, "question_id": 34821209, "link": "https://stackoverflow.com/questions/34821209/why-does-fh-behave-differentially-than-fh-when-reading-line-by-line/34823013#34823013", "title": "Why does ${fh} behave differentially than $fh when reading line by line?", "body": "<ul>\n<li><code>&lt;&gt;</code> means <code>readline(ARGV)</code></li>\n<li><code>&lt;IDENTIFIER&gt;</code> means <code>readline(IDENTIFIER)</code></li>\n<li><code>&lt;$IDENTIFIER&gt;</code> means <code>readline($IDENTIFIER)</code></li>\n<li><code>&lt;...&gt;</code> (anything else) means <code>glob(qq&lt;...&gt;)</code></li>\n</ul>\n\n<p>So,</p>\n\n<ul>\n<li><code>&lt;$fh&gt;</code> means <code>readline($fh)</code></li>\n<li><code>&lt;${fh}&gt;</code> means <code>glob(qq&lt;${fh}&gt;)</code>, which is the same as <code>glob(\"$fh\")</code>.</li>\n</ul>\n\n<p><a href=\"http://perldoc.perl.org/functions/glob.html\" rel=\"noreferrer\"><code>glob</code></a> is used to generate a number of strings or file names from a pattern.</p>\n\n<p>In this case, the stringification of the file handle is <code>GLOB(0x5bcc2a0)</code>. This is being passed to glob, but none of those characters have a special meaning for <code>glob</code>, so <code>glob</code> simply returns that string.</p>\n"}], "owner": {"reputation": 4481, "user_id": 2534803, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c7ec08249e708f748e2b9f7f9210b7aa?s=128&d=identicon&r=PG&f=1", "display_name": "hmatt1", "link": "https://stackoverflow.com/users/2534803/hmatt1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "accepted_answer_id": 34821262, "answer_count": 2, "score": 10, "last_activity_date": 1452912494, "creation_date": 1452898300, "question_id": 34821209, "link": "https://stackoverflow.com/questions/34821209/why-does-fh-behave-differentially-than-fh-when-reading-line-by-line", "title": "Why does ${fh} behave differentially than $fh when reading line by line?", "body": "<p>This script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy ${fh};\n\nopen($fh, '&lt;', \"some_file.txt\") or die \"fail\\n\";\n\nwhile(my $line = &lt;${fh}&gt; ) {\n    print $line;\n}\nclose $fh;\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>GLOB(0x5bcc2a0)\n</code></pre>\n\n<p>Why is this the output?</p>\n\n<p>If I change <code>&lt;${fh}&gt;</code> to <code>&lt;$fh&gt;</code>, it will print <code>some_file.txt</code> line by line as expected. I thought the braces could be used to delimit variable names, and that <code>my ${var}</code> would be the same as <code>my $var</code>.</p>\n\n<p>Are there other scenarios where adding <code>{}</code> around a variable name causes problems?</p>\n\n<p>I tried on Perl 5.8.8 on Red Hat and Cygwin Perl 5.14.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "edited": false, "score": 0, "creation_date": 1452891648, "post_id": 34819603, "comment_id": 57381883, "body": "what is <code>whatever</code>? whitespace, other integers, ...?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1452891836, "post_id": 34819603, "comment_id": 57381985, "body": "Out of curiosity, where does your string come from? (i.e. what does it represent?)"}, {"owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "edited": false, "score": 0, "creation_date": 1452891903, "post_id": 34819603, "comment_id": 57382010, "body": "integers are numeric list item markers, while letters are list items text."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452892246, "post_id": 34819603, "comment_id": 57382201, "body": "So you&#39;re trying to parse a representation of a list? Is that a custom format you&#39;re using or is it a commonly-used format like XML/HTML/TeX, etc.?"}, {"owner": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "edited": false, "score": 0, "creation_date": 1452892316, "post_id": 34819603, "comment_id": 57382244, "body": "I know you know, but it will break if the item text contains the next item marker <code>a1b2c2d</code>, you should change the format, not the parsing"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1452892853, "post_id": 34819603, "comment_id": 57382518, "body": "You should include that in your question. You&#39;re likely to get better answers that way because if people can see a more representative example of your data, they can take edge cases into consideration better. For example, I imagine input like <code>1. foo 2 bar. 2. foo 2005 bar.</code> isn&#39;t out of the question, but it would cause hobbs&#39;s current solution to choke."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453049911, "post_id": 34819838, "comment_id": 57422615, "body": "Note that this matches <code>34d5</code>, <code>3d45</code>,  <code>39d4</code>, <code>3d94</code> and <code>3d9d4</code>. Don&#39;t know if they&#39;re acceptable or not."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1452891985, "creation_date": 1452891985, "answer_id": 34819838, "question_id": 34819603, "link": "https://stackoverflow.com/questions/34819603/how-to-capture-whatever-is-between-an-integer-and-its-successor/34819838#34819838", "title": "How to capture whatever is between an integer and its successor", "body": "<p>You need <em>two</em> question marks in that construct. With just one it just puts the value of the code into <code>$^R</code> and returns a match</p>\n\n<pre><code>'a1b3c2d' =~ / (\\d+) (.+) (??{ $1 + 1 }) /x;\n\nprint $2, \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>b3c\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452892411, "post_id": 34819841, "comment_id": 57382291, "body": "That looks very little different from my solution, except for some speculation about what the OP may want. I think it would be much more useful to prevent the second number from being found as part of a longer digit string"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1452892594, "post_id": 34819841, "comment_id": 57382388, "body": "You also need to check the beginning, as in <code>a1b3c12</code>!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452892707, "post_id": 34819841, "comment_id": 57382443, "body": "Erm, <code>(?!\\d)</code> before the second number will never match. Should I write this for you?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452892714, "post_id": 34819841, "comment_id": 57382451, "body": "@Borodin noted, and fixed (I believe)."}, {"owner": {"reputation": 8806, "user_id": 257418, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/97Mb4.png?s=128&g=1", "display_name": "Lynn", "link": "https://stackoverflow.com/users/257418/lynn"}, "edited": false, "score": 0, "creation_date": 1452892742, "post_id": 34819841, "comment_id": 57382469, "body": "Instead of lookbehind, maybe look for <code>(.*?)</code> followed by non-digit followed by <code>(??{ ... })</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452892784, "post_id": 34819841, "comment_id": 57382492, "body": "I still think all of this is irrelevant to the question"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 1, "creation_date": 1452893079, "post_id": 34819841, "comment_id": 57382634, "body": "There is such a thing as actually being helpful, and not just answering the exact words of a question. It&#39;s worked out for me so far. If what I&#39;ve said doesn&#39;t help anyone, then I made a bad guess, but it&#39;s not <i>harmful</i>. I always put the most grounded stuff first and my interpretation later on, so that if someone just wants a literal answer they don&#39;t have to wade through a pile of crap to get it. :)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452893541, "post_id": 34819841, "comment_id": 57382881, "body": "I agree, but when there is such very limited information in the question it is pointless to speculate. From the OP&#39;s comments it looks like <code>\\b (??{ $1 + 1 })  \\.</code> would be most appropriate"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1453050168, "post_id": 34819841, "comment_id": 57422726, "body": "Note that this matches <code>34d5</code>, <code>39d4</code> and <code>3d9d4</code>. Don&#39;t know if they&#39;re acceptable or not."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": false, "score": 5, "last_activity_date": 1452893730, "last_edit_date": 1452893730, "creation_date": 1452891999, "answer_id": 34819841, "question_id": 34819603, "link": "https://stackoverflow.com/questions/34819603/how-to-capture-whatever-is-between-an-integer-and-its-successor/34819841#34819841", "title": "How to capture whatever is between an integer and its successor", "body": "<p>You're looking for <code>(??{ ... })</code>, which interprets the result of the code block as a regex, and not <code>(?{ ... })</code> which always succeeds as an assertion. And you probably want to use a non-greedy quantifier in between so that it stops at the <em>first</em> match of the following number. Put together, <code>/ (\\d+) (.+?) (??{ $1 + 1 }) /x</code> does the job.</p>\n\n<p>You might also want to add negative assertions before and after the code assertion, to prevent matching an \"incomplete\" integer \u2014 i.e. you wouldn't want to treat the first digit of \"21\" as being \"2\". That would give</p>\n\n<pre><code>/ (\\d+) (.+?) (?&lt;!\\d) (??{ $1 + 1 }) (?!\\d) /x\n</code></pre>\n\n<p>altogether.</p>\n"}], "owner": {"reputation": 1714, "user_id": 1839508, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/530d84518abcb1591e5e7cedf682097d?s=128&d=identicon&r=PG", "display_name": "n.r.", "link": "https://stackoverflow.com/users/1839508/n-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 34819838, "answer_count": 2, "score": 1, "last_activity_date": 1452893730, "creation_date": 1452890880, "last_edit_date": 1452891938, "question_id": 34819603, "link": "https://stackoverflow.com/questions/34819603/how-to-capture-whatever-is-between-an-integer-and-its-successor", "title": "How to capture whatever is between an integer and its successor", "body": "<p>How can I capture whatever content is between an integer and its successor? For example, suppose we are to capture <code>b3c</code>, which is between <code>1</code> and <code>2</code> in <code>a1b3c2d</code>. The code below gives us <code>b3c2d</code>.</p>\n\n\n\n<pre><code>'a1b3c2d' =~ / (\\d+) (.+) (?{ $1 + 1 }) /x;\n\nprint $2, \"\\n\";\n</code></pre>\n"}, {"tags": ["perl", "try-catch"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 3, "creation_date": 1452881726, "post_id": 34817215, "comment_id": 57376657, "body": "If you are using Try::Tiny, within the <code>catch {}</code> block the error will be found in <code>$_</code>."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1452883414, "post_id": 34817215, "comment_id": 57377497, "body": "Try::Catch does it the same way: <code>$_</code>, and TryCatch exposes <code>$@</code> (per its docs)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 4, "creation_date": 1452884389, "post_id": 34817215, "comment_id": 57378052, "body": "@DavidO The TryCatch docs are wrong about <code>$@</code>, see <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=49072\" rel=\"nofollow noreferrer\">this ticket</a>. Based on the number of unfixed issues, I would use Try::Tiny instead."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 4, "last_activity_date": 1452884863, "creation_date": 1452884863, "answer_id": 34818059, "question_id": 34817215, "link": "https://stackoverflow.com/questions/34817215/how-can-i-print-the-error-message-from-a-try-block-in-a-catch-block-using-trycat/34818059#34818059", "title": "How can I print the error message from a try block in a catch block using TryCatch.pm?", "body": "<p>According to the <a href=\"https://metacpan.org/pod/TryCatch#SYNTAX\" rel=\"nofollow\">documentation</a>, the code you've shown should work. However, there's a <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=49072\" rel=\"nofollow\">longstanding bug</a> that causes it to fail.</p>\n\n<p>You can get around it by using a signature in the <code>catch</code> block:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse TryCatch;\n\ntry {\n    die 'foo';\n}\ncatch ($err) {\n    say \"Caught $err\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Caught foo at ./bar line 10.\n</code></pre>\n\n<p>However, based on the number of <a href=\"https://rt.cpan.org/Public/Dist/Display.html?Name=TryCatch\" rel=\"nofollow\">outstanding bugs</a>, I would recommend using <a href=\"https://metacpan.org/pod/Try::Tiny\" rel=\"nofollow\">Try::Tiny</a> instead.</p>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 34818059, "answer_count": 1, "score": 1, "last_activity_date": 1452885765, "creation_date": 1452881504, "last_edit_date": 1452885765, "question_id": 34817215, "link": "https://stackoverflow.com/questions/34817215/how-can-i-print-the-error-message-from-a-try-block-in-a-catch-block-using-trycat", "title": "How can I print the error message from a try block in a catch block using TryCatch.pm?", "body": "<p>I have a try-catch block (from the <a href=\"https://metacpan.org/pod/TryCatch\" rel=\"nofollow\">TryCatch</a> module) in my script and I want to print the error message from the <code>try</code> block in the <code>catch</code> block. It seems like the error variable is local to the <code>try</code> block:</p>\n\n<pre><code>use TryCatch;\n...\ntry {\n        some command;\n    }\n    catch {\n        print \"some command failed due to: $@\";\n        # error variable $@ is not visible here\n        return;\n    }\n</code></pre>\n\n<p>Is there any other way to do this?</p>\n"}, {"tags": ["arrays", "excel", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1452878980, "post_id": 34816364, "comment_id": 57375319, "body": "Can you <a href=\"https://stackoverflow.com/posts/34816364/edit\">edit</a> your post to show us what you&#39;ve tried so far?"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 298943, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9006ed3815f7bd22557e346592a85f7d?s=128&d=identicon&r=PG", "display_name": "ruby", "link": "https://stackoverflow.com/users/298943/ruby"}, "edited": false, "score": 0, "creation_date": 1452880425, "post_id": 34816830, "comment_id": 57376054, "body": "Thanks. I am reading multiple files in an array and then further every file as an array. For example i have a text file like abc.txt with below data:          10|111|ab|12a|acc . Now there are times when this file is either blank or have some junk character. I want to handle all those scenarios"}, {"owner": {"reputation": 28, "user_id": 4263485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ca6cbe4706e9a8bebc05ed68de7e38?s=128&d=identicon&r=PG", "display_name": "Programmers_must_be_bald", "link": "https://stackoverflow.com/users/4263485/programmers-must-be-bald"}, "reply_to_user": {"reputation": 167, "user_id": 298943, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9006ed3815f7bd22557e346592a85f7d?s=128&d=identicon&r=PG", "display_name": "ruby", "link": "https://stackoverflow.com/users/298943/ruby"}, "edited": false, "score": 0, "creation_date": 1452882218, "post_id": 34816830, "comment_id": 57376888, "body": "This will handle junk characters and ensures |  .  Feel free to change the statement following unless to suit your needs.  Alternatively, you can use if(-z $file){print &quot;File size is zero/blank!&quot;;}"}, {"owner": {"reputation": 167, "user_id": 298943, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9006ed3815f7bd22557e346592a85f7d?s=128&d=identicon&r=PG", "display_name": "ruby", "link": "https://stackoverflow.com/users/298943/ruby"}, "edited": false, "score": 0, "creation_date": 1453138437, "post_id": 34816830, "comment_id": 57460720, "body": "Also just wanted to know if passing multiple arrays (array of input files) in a function in perl is correct? Again i do not want to run into any issues because of missing error handling"}, {"owner": {"reputation": 28, "user_id": 4263485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ca6cbe4706e9a8bebc05ed68de7e38?s=128&d=identicon&r=PG", "display_name": "Programmers_must_be_bald", "link": "https://stackoverflow.com/users/4263485/programmers-must-be-bald"}, "reply_to_user": {"reputation": 167, "user_id": 298943, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9006ed3815f7bd22557e346592a85f7d?s=128&d=identicon&r=PG", "display_name": "ruby", "link": "https://stackoverflow.com/users/298943/ruby"}, "edited": false, "score": 0, "creation_date": 1453145256, "post_id": 34816830, "comment_id": 57464266, "body": "If I read correctly, you want to pass multiple file handels into a function and process each there (to check them?).  Sounds like a great idea.  I&#39;m on a phone right now, but you can pass an array into a function as checkfiles(\\@file_array);  Then in the function: sub checkfiles{my @array=[@{$_[0]}];  foreach (@array){my $fh; open $fh, &#39;&lt;&#39;, &#39;file&#39; or die $!; # do check } }"}, {"owner": {"reputation": 28, "user_id": 4263485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ca6cbe4706e9a8bebc05ed68de7e38?s=128&d=identicon&r=PG", "display_name": "Programmers_must_be_bald", "link": "https://stackoverflow.com/users/4263485/programmers-must-be-bald"}, "reply_to_user": {"reputation": 167, "user_id": 298943, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9006ed3815f7bd22557e346592a85f7d?s=128&d=identicon&r=PG", "display_name": "ruby", "link": "https://stackoverflow.com/users/298943/ruby"}, "edited": false, "score": 0, "creation_date": 1453146937, "post_id": 34816830, "comment_id": 57465168, "body": "Where each element of the array is the path.  Then for the sub, have open $fh, &#39;&lt;&#39;, $_ or die $!  .  A few ways, to tackle it, this is just one."}, {"owner": {"reputation": 167, "user_id": 298943, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9006ed3815f7bd22557e346592a85f7d?s=128&d=identicon&r=PG", "display_name": "ruby", "link": "https://stackoverflow.com/users/298943/ruby"}, "edited": false, "score": 0, "creation_date": 1453222535, "post_id": 34816830, "comment_id": 57502923, "body": "Thanks again!! I am passing array as a reference using \\@. In my subroutine  i am using it as a variable ($). For eg: @inputFiles=&quot;path of 5 files&quot;, resultData($finalFile,\\@inputFiles); Here $finalFile being one consolidated output file. Inside subroutine resultData i say my($finalFile,$inputFiles)=@_. Now question is: am i doing right by treating array as a variable?"}], "tags": [], "owner": {"reputation": 28, "user_id": 4263485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37ca6cbe4706e9a8bebc05ed68de7e38?s=128&d=identicon&r=PG", "display_name": "Programmers_must_be_bald", "link": "https://stackoverflow.com/users/4263485/programmers-must-be-bald"}, "is_accepted": true, "score": -3, "last_activity_date": 1452884271, "last_edit_date": 1452884271, "creation_date": 1452879841, "answer_id": 34816830, "question_id": 34816364, "link": "https://stackoverflow.com/questions/34816364/validate-delimited-txt-file-while-reading-from-an-array-in-perl/34816830#34816830", "title": "Validate | delimited txt file while reading from an array in perl", "body": "<pre><code>my ($file, $fh);\n$file = 'path/to/file.txt';\nopen $fh, '&lt;', $file or die $!;\n$line = &lt;$fh&gt;;\nunless($fh=~/^.*?\\|.*?\\|.*?\\|.*?\\|.*?\\|.*?\\|.*?\\|.*?\\|.*?\\|.*/){print \"You have more than 10 columns!\\n\";}\nif($10=~/\\|/){print \"more than 10 columns!\\n\";}\nclose $fh;\n</code></pre>\n\n<p>EDIT:\nThere's many ways and this is just a quick slop answer.  It will ensure at least 10 as stated, although you technically requested 9 or less with the > sign.</p>\n\n<p>EDIT EDIT:\nThis will ensure at least 10, it could be more.  I'd recommend counting with global regex, but its been a while for me.  Alternatively, perhaps another method to ensure exactly 10:</p>\n\n<pre><code>$line = &lt;$fh&gt;;\nmy @check=split(/\\|/, $line);\nif (scalar @check !=10){print \"bad file delimitation!\\n\";}\n</code></pre>\n\n<p>EDIT x3:\nif($10=~/\\|/){print \"more than 10 columns!\\n\";} to ensure no more than 10, but try doing a global regex to count or the array method</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1452900455, "last_edit_date": 1452900455, "creation_date": 1452900153, "answer_id": 34821547, "question_id": 34816364, "link": "https://stackoverflow.com/questions/34816364/validate-delimited-txt-file-while-reading-from-an-array-in-perl/34821547#34821547", "title": "Validate | delimited txt file while reading from an array in perl", "body": "<p>You can just count the number of pipe characters in each line. Ten columns means at least nine pipes, so you can say</p>\n\n<pre><code>perl -ne '($n = tr/|// + 1) and die \"Only $n fields on line $.\\n\"' myfile.txt\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 298943, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9006ed3815f7bd22557e346592a85f7d?s=128&d=identicon&r=PG", "display_name": "ruby", "link": "https://stackoverflow.com/users/298943/ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 34816830, "answer_count": 2, "score": -3, "last_activity_date": 1452900455, "creation_date": 1452878092, "question_id": 34816364, "link": "https://stackoverflow.com/questions/34816364/validate-delimited-txt-file-while-reading-from-an-array-in-perl", "title": "Validate | delimited txt file while reading from an array in perl", "body": "<p>I have a text file with delimiter as | and it has some 10 columns. I have put this file in an array and before reading i want to put check for file being valid meaning non empty and file having fixed 10 columns. If number of columns &lt; 10 then an error message should be displayed</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 1, "creation_date": 1452869777, "post_id": 34813687, "comment_id": 57369489, "body": "What do you mean by &quot;instead of a new copy&quot;? The <code>4</code> is indeed just the array evaluated in scalar context, which yields the number of elements. Maybe you were looking for <code>print &quot;@ADDRESS_FIELDS\\n&quot;</code>?"}, {"owner": {"reputation": 99, "user_id": 1161204, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0468e4b40c8a0a69b2cdb07bbadddf6?s=128&d=identicon&r=PG", "display_name": "OBoud", "link": "https://stackoverflow.com/users/1161204/oboud"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1452870082, "post_id": 34813687, "comment_id": 57369668, "body": "<i>Headdesk</i>  Sometimes we overlook the little things. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1452870057, "creation_date": 1452870057, "answer_id": 34813928, "question_id": 34813687, "link": "https://stackoverflow.com/questions/34813687/perl-copying-an-array-from-a-hash-of-hash-of-arrays/34813928#34813928", "title": "Perl: Copying an array from a hash of hash of arrays", "body": "<pre><code>print @ADDRESS_FIELDS.\"\\n\";\n</code></pre>\n\n<p>Evaluates your array in a scalar context and returns the number of elements (which in your case is 4).</p>\n\n<pre><code>print join(', ', @ADDRESS_FIELDS).\"\\n\";\n</code></pre>\n\n<p>is what you want i guess.</p>\n\n<p>HTH</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1452873556, "last_edit_date": 1452873556, "creation_date": 1452870116, "answer_id": 34813945, "question_id": 34813687, "link": "https://stackoverflow.com/questions/34813687/perl-copying-an-array-from-a-hash-of-hash-of-arrays/34813945#34813945", "title": "Perl: Copying an array from a hash of hash of arrays", "body": "<p>The concatenation operator forces scalar context on its operands. Use a comma instead:</p>\n\n<pre><code>print @array, \"\\n\";\n</code></pre>\n\n<p>Note that the elements are separated by <code>$,</code>, which is empty by default.</p>\n\n<p>Or, to separate the array elements by <code>$\"</code> (space by default) in the output, use</p>\n\n<pre><code>print \"@array\\n\";\n</code></pre>\n\n<p>Or, join them yourself:</p>\n\n<pre><code>print join(' ', @array), \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 556, "user_id": 3779344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CcOx.jpg?s=128&g=1", "display_name": "Calvin Taylor", "link": "https://stackoverflow.com/users/3779344/calvin-taylor"}, "edited": false, "score": 0, "creation_date": 1452886819, "post_id": 34818586, "comment_id": 57379385, "body": "you forgot to reference LA"}], "tags": [], "owner": {"reputation": 556, "user_id": 3779344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CcOx.jpg?s=128&g=1", "display_name": "Calvin Taylor", "link": "https://stackoverflow.com/users/3779344/calvin-taylor"}, "is_accepted": false, "score": 1, "last_activity_date": 1452886789, "creation_date": 1452886789, "answer_id": 34818586, "question_id": 34813687, "link": "https://stackoverflow.com/questions/34813687/perl-copying-an-array-from-a-hash-of-hash-of-arrays/34818586#34818586", "title": "Perl: Copying an array from a hash of hash of arrays", "body": "<pre><code>cat my.pl \n#!/bin/perl\n#\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy %FIELDS = (\n    LA =&gt; {\n        NAME =&gt; [1],\n        ADDRESS =&gt; [2,3,4,5],\n        TYPE =&gt; [6],\n        LICENCE =&gt; [0],\n        ACTIVE =&gt; []\n    },\n);\n\nmy @addy = @{$FIELDS{LA}-&gt;{ADDRESS}};\nforeach my $i(@addy){\n    print \"i=$i\\n\";\n}\nperl my.pl\ni=2\ni=3\ni=4\ni=5\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 1161204, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0468e4b40c8a0a69b2cdb07bbadddf6?s=128&d=identicon&r=PG", "display_name": "OBoud", "link": "https://stackoverflow.com/users/1161204/oboud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 34813945, "answer_count": 3, "score": 1, "last_activity_date": 1452886789, "creation_date": 1452869343, "question_id": 34813687, "link": "https://stackoverflow.com/questions/34813687/perl-copying-an-array-from-a-hash-of-hash-of-arrays", "title": "Perl: Copying an array from a hash of hash of arrays", "body": "<p>Given a HoHoA</p>\n\n<pre><code>my %FIELDS = (\n    LA =&gt; {\n      NAME =&gt; [1],\n      ADDRESS =&gt; [2,3,4,5],\n      TYPE =&gt; [6],\n      LICENCE =&gt; [0],\n      ACTIVE =&gt; [],\n    },\n...\n);\n</code></pre>\n\n<p>I'm trying to make a copy of a particular array</p>\n\n<pre><code>my @ADDRESS_FIELDS = @{$FIELDS{$STATE}-&gt;{ADDRESS} };\n</code></pre>\n\n<p>Since everything inside %FIELDS is by reference the arrow de-references the inner hash and the @{} de-references the array. (I understand that the arrow isn't strictly necessary)</p>\n\n<pre><code>print $ADDRESS_FIELDS[3].\"\\n\";\nprint @ADDRESS_FIELDS.\"\\n\";\n</code></pre>\n\n<p>gives </p>\n\n<pre><code>5\n4\n</code></pre>\n\n<p>The first print behaves as expected but the second one is giving me the scalar value of, I assume, the referenced array instead of a new copy. Where am I going astray? </p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 6, "creation_date": 1452865586, "post_id": 34812234, "comment_id": 57366729, "body": "This is an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>. What are you trying to accomplish? But it is already globally visible if you declare it via <code>our</code> - you may need to specify namespace to access it (and this is a bad idea)."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 3, "creation_date": 1452865960, "post_id": 34812234, "comment_id": 57366968, "body": "It&#39;s probably a better idea to pass a reference to that hash to the functions in your modules. Or if the modules are classes, add a reference to that hash to the objects created."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 4, "last_activity_date": 1452866036, "creation_date": 1452866036, "answer_id": 34812636, "question_id": 34812234, "link": "https://stackoverflow.com/questions/34812234/globally-declare-a-hash-in-perl/34812636#34812636", "title": "Globally declare a hash in perl", "body": "<p>First off - this is a bad idea. Globals or super-globals like you're looking for lead to code with complicated dependencies all over the place - the very thing you're <em>trying to avoid</em> by using modules in the first place.</p>\n\n<p>However - you can declare a variable with <code>our</code> and then access it via package name. </p>\n\n<pre><code>our %thing = ( key =&gt; \"value\" );\nprint Dumper \\%main::thing; \n</code></pre>\n\n<p>This is visible elsewhere in the namespace via full name and module.</p>\n\n<p>(If you really must, you can start mucking around with TYPEGLOBs, but trust me when I say this is a bad idea).  </p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 4, "last_activity_date": 1452866336, "creation_date": 1452866336, "answer_id": 34812709, "question_id": 34812234, "link": "https://stackoverflow.com/questions/34812234/globally-declare-a-hash-in-perl/34812709#34812709", "title": "Globally declare a hash in perl", "body": "<p>This breaks many rules of good software design, but it's possible using package variables.</p>\n\n<p>In hash.pl:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\n\nuse MyHashModule;\n\nour %hash = (one =&gt; 1, two =&gt; 2, three =&gt; 3);\n\nsay hashkeys();\n</code></pre>\n\n<p>In MyHashModule.pm</p>\n\n<pre><code>package MyHashModule;\n\nuse strict;\nuse warnings;\n\nuse base 'Exporter';\nour @EXPORT = qw[hashkeys];\n\nsub hashkeys {\n  return keys %main::hash;\n}\n\n1;\n</code></pre>\n\n<p>But I can't repeat enough what a terrible idea this is. If you were to explain more about what you are actually trying to do, we could probably come up with a solution that is far saner.</p>\n"}, {"tags": [], "owner": {"reputation": 1109, "user_id": 4585960, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153097867072505/picture?type=large", "display_name": "Kenny Grage", "link": "https://stackoverflow.com/users/4585960/kenny-grage"}, "is_accepted": false, "score": 0, "last_activity_date": 1452903948, "creation_date": 1452903948, "answer_id": 34822098, "question_id": 34812234, "link": "https://stackoverflow.com/questions/34812234/globally-declare-a-hash-in-perl/34822098#34822098", "title": "Globally declare a hash in perl", "body": "<p>It is strongly recommended you look to declare local variables as opposed to global variables, whenever possible. If you are only needing to write a small script, there may be no problems with declaring a global variable, but as the script gets bigger, or if you or another developer adds more functionality, there may be some hard to find logic errors that creep in.</p>\n\n<p>That being said, if you must declare a global variable, you would simply change the <code>my</code> to <code>our</code>, like this:</p>\n\n<pre><code>our %global_variable = (key =&gt; \"value\");\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5542580, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dacd1ccbe36d795fc75ed15c79ce16e5?s=128&d=identicon&r=PG&f=1", "display_name": "nithin", "link": "https://stackoverflow.com/users/5542580/nithin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1452903948, "creation_date": 1452864717, "last_edit_date": 1452866849, "question_id": 34812234, "link": "https://stackoverflow.com/questions/34812234/globally-declare-a-hash-in-perl", "title": "Globally declare a hash in perl", "body": "<p>I have a hash which is present in the main perl script (.pl) I want the hash to be visble to the modules (.pm) that are called in the main perl script. How can I declare it globally? Is it possible?</p>\n"}, {"tags": ["perl", "tcl"], "comments": [{"owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "edited": false, "score": 0, "creation_date": 1452863174, "post_id": 34811698, "comment_id": 57365310, "body": "What does read_phy look like (source code)? What have you tried already?"}, {"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "reply_to_user": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "edited": false, "score": 0, "creation_date": 1452863277, "post_id": 34811698, "comment_id": 57365366, "body": "read_phy (tcl function) looks like this: proc read_phy {phy register} { \t$value = exec ./read_phy.pl $phy $register \tstring trim $value;         if {$::DEBUG} {            puts [format &quot;Read PHY %s register %s = 0x%0.8X&quot; $phy $register $value]         }          if {$::DEBUG} {            puts [format &quot;Read PHY %s register %s = 0x%0.8X&quot; $phy $register $value]         }          set hex $value \treturn ($value); }"}, {"owner": {"reputation": 9944, "user_id": 448715, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/rvewo.jpg?s=128&g=1", "display_name": "octopusgrabbus", "link": "https://stackoverflow.com/users/448715/octopusgrabbus"}, "edited": false, "score": 0, "creation_date": 1452863659, "post_id": 34811698, "comment_id": 57365568, "body": "This almost sounds like you&#39;re asking a functional programming question, function arities. If not, then I&#39;m not understanding your question."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1452864345, "post_id": 34811698, "comment_id": 57365987, "body": "That&#39;s ok - perl is a functional programming language; <a href=\"http://stackoverflow.com/questions/31046327/which-features-of-perl-make-it-a-functional-programming-language\" title=\"which features of perl make it a functional programming language\">stackoverflow.com/questions/31046327/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2909, "user_id": 107626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ec61daf5c629d737322c444d5f0f45?s=128&d=identicon&r=PG", "display_name": "Colin Macleod", "link": "https://stackoverflow.com/users/107626/colin-macleod"}, "is_accepted": false, "score": 3, "last_activity_date": 1452866628, "creation_date": 1452866628, "answer_id": 34812789, "question_id": 34811698, "link": "https://stackoverflow.com/questions/34811698/assigning-a-variable-to-a-function/34812789#34812789", "title": "Assigning a variable to a function", "body": "<p>1.</p>\n\n<pre><code>set regvalue [read_phy $phy 19]\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>while { ( [read_phy $phy 18] &gt;&gt; 15) != 0} { after 10 }\n</code></pre>\n\n<p>also the first 2 lines of read_phy should be:</p>\n\n<pre><code>set value [exec ./read_phy.pl $phy $register]\nset value [string trim $value]\n</code></pre>\n\n<p>- string trim returns a new value, it does not modify its input value.</p>\n"}], "owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1452866628, "creation_date": 1452862918, "last_edit_date": 1452863781, "question_id": 34811698, "link": "https://stackoverflow.com/questions/34811698/assigning-a-variable-to-a-function", "title": "Assigning a variable to a function", "body": "<p>Couple of questions:</p>\n\n<ol>\n<li><p>Can I assign a variable (regvalue) to a function (read_phy) as below in tcl?</p>\n\n<pre><code>$regvalue = read_phy $phy 19\n</code></pre></li>\n<li><p>I have the following line in a Perl program. I am trying to figure out what should be the tcl equivalent:</p>\n\n<pre><code> while((read_phy($phy, 18) &gt;&gt; 15) ne 0) { usleep(10000); };\n</code></pre></li>\n</ol>\n\n<p><code>read_phy</code> (tcl function) looks like this:</p>\n\n<pre><code>proc read_phy {phy register} {\n\n    $value = exec ./read_phy.pl $phy $register\n    string trim $value;\n\n    if { $::DEBUG } {\n        puts [format \"Read PHY %s register %s = 0x%0.8X\" $phy $register $value]\n    }\n\n    if { $::DEBUG } {\n        puts [format \"Read PHY %s register %s = 0x%0.8X\" $phy $register $value]\n    }\n\n    set hex $value\n\n    return ($value);\n}\n</code></pre>\n"}, {"tags": ["perl", "tcl"], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1452859327, "post_id": 34810478, "comment_id": 57363129, "body": "In the function write_register,  I simply want to print the register value and 0x0000, but the function call is not working:      proc write_register {$regs $value} {      puts [format &quot;Value to be written at %s register is %s&quot; $register $value] }"}, {"owner": {"reputation": 2909, "user_id": 107626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ec61daf5c629d737322c444d5f0f45?s=128&d=identicon&r=PG", "display_name": "Colin Macleod", "link": "https://stackoverflow.com/users/107626/colin-macleod"}, "reply_to_user": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1452862528, "post_id": 34810478, "comment_id": 57364970, "body": "To get the parameters passed correctly, the definition of write_register should be <code>proc write_register {register value} { puts [format &quot;Value to be written at %s register is %s&quot; $register $value] }</code>"}], "tags": [], "owner": {"reputation": 2909, "user_id": 107626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86ec61daf5c629d737322c444d5f0f45?s=128&d=identicon&r=PG", "display_name": "Colin Macleod", "link": "https://stackoverflow.com/users/107626/colin-macleod"}, "is_accepted": true, "score": 3, "last_activity_date": 1452858709, "creation_date": 1452858709, "answer_id": 34810478, "question_id": 34809781, "link": "https://stackoverflow.com/questions/34809781/foreach-in-perl-and-tcl/34810478#34810478", "title": "foreach in Perl and Tcl", "body": "<p>GPO_regs here is a list, not an array, so all you need to interate over it is</p>\n\n<pre><code>foreach regs $GPO_regs {write_register $regs 0x0000}\n</code></pre>\n"}], "owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 34810478, "answer_count": 1, "score": 2, "last_activity_date": 1452858709, "creation_date": 1452856340, "question_id": 34809781, "link": "https://stackoverflow.com/questions/34809781/foreach-in-perl-and-tcl", "title": "foreach in Perl and Tcl", "body": "<p>I have a Perl script which iterates an array like below:</p>\n\n<pre><code>my @GPO_regs = qw(0x70034 0x70038 0x7003C 0x70040 0x70044);\n\nforeach my $register (@GPO_regs) { write_register($register, 0x0000) };\n</code></pre>\n\n<p>What should be the tcl equivalent of above? Is this correct? </p>\n\n<pre><code>set GPO_regs \"0x70034 0x70038 0x7003C 0x70040 0x70044\"\n\nforeach {regs} [array get GPO_regs] { write_register $regs 0x0000}\n</code></pre>\n"}, {"tags": ["perl", "csv", "file-io", "hash"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1452854737, "post_id": 34809165, "comment_id": 57360657, "body": "What&#39;s the expected output for the given sample input?"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1452854881, "post_id": 34809165, "comment_id": 57360740, "body": "The lines in <code>$intFile</code> are written into the external file (<code>print $fh1 $headerLine.&quot;\\n&quot;;</code>); except if the line is marked with &quot;N&quot; in the CSV."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1452854915, "post_id": 34809165, "comment_id": 57360753, "body": "And there&#39;s a separate external file for every &quot;type&quot; in the CSV."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1452856497, "post_id": 34809165, "comment_id": 57361562, "body": "What are you actually trying to accomplish here? Because I&#39;ll point out - <code>Text::CSV</code> supports named columns, so you don&#39;t actually have to muck about with hashes and slices."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 2, "creation_date": 1452859250, "post_id": 34809165, "comment_id": 57363085, "body": "Always <code>use strict; use warnings;</code>"}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452952338, "post_id": 34809165, "comment_id": 57397162, "body": "I did. And I do. Always."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452856412, "post_id": 34809528, "comment_id": 57361515, "body": "I&#39;m clearly missing something - could you please explain <code>chomp( my $header = &lt;&gt; );</code>?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452858424, "post_id": 34809528, "comment_id": 57362631, "body": "<code>&lt;&gt;</code> in scalar context reads a line from the input, <code>chomp</code> removes the final newline."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452959282, "post_id": 34809528, "comment_id": 57399364, "body": "I also need to check if the lines (even if marked &quot;Y&quot;) exists in another (&quot;internal&quot;) file before printing it to the output file."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 1, "creation_date": 1452983486, "post_id": 34809528, "comment_id": 57407301, "body": "@AnupamaG: hash the internal file first."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453015872, "post_id": 34809528, "comment_id": 57413142, "body": "How can I read the files I&#39;ve written to right now?  Here&#39;s what I did, based on what you kindly told me:       <code>$numCustomers = scalar(@names) - 2;      for(my $i = 0; $i &lt; $numCustomers; $i++)      { \tmy $custFile = &quot;customer&quot;.$i.&quot;_external.h&quot;;          open my $fh, &#39;&gt;&#39;, $custFile or die &quot;$custFile: $!&quot;;          push @handles, $fh;          push @files, $custFile;      }</code>  And later:      <code>for(my $i = 0; $i &lt; $numCustomers; $i++)       {  \tmy @Lines = read_file($files[$i]);  \t#do something      }</code>  This read_file doesn&#39;t work (I&#39;m using <code>File::Slurp</code>). Could you please tell me why?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453022277, "post_id": 34809528, "comment_id": 57414454, "body": "@AnupamaG: What do you mean by &quot;doesn&#39;t work&quot;? Try printing the contents of the array, verifying the files are there and inspecting their contents."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1453038799, "post_id": 34809528, "comment_id": 57418900, "body": "The files are created. What I mean by &quot;doesn&#39;t work&quot; is that <code>@Lines</code> is empty. I apologize for my lack of English expertise."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1452855418, "creation_date": 1452855418, "answer_id": 34809528, "question_id": 34809165, "link": "https://stackoverflow.com/questions/34809165/parsing-a-csv-file-using-array-of-hash-of-hashes-in-perl/34809528#34809528", "title": "Parsing a CSV file using array of hash of hashes in Perl", "body": "<p>I'd just keep an array of open file handles (if there aren't too many Types) and print to them while reading the file line by line.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nchomp( my $header = &lt;&gt; );\nmy @names = split /, /, $header;\n\nmy @handles;\nfor my $type (@names[ 2 .. $#names ]) {\n    open my $fh, '&gt;', $type or die \"$type: $!\";\n    push @handles, $fh;\n}\n\nwhile (&lt;&gt;) {\n    chomp;\n    my @fields = split /, /;\n    for my $index (0 .. $#handles) {\n        print { $handles[$index] } $fields[1], \"\\n\" if 'Y' eq $fields[ $index + 2 ];\n    }\n}\n</code></pre>\n\n<p>I used the following input to test it:</p>\n\n<pre><code>Sl.No, Label, Type1, Type2, Type3, Type4\n1, \"label1\", Y, N, Y, N\n2, \"label2\", N, Y, Y, N\n</code></pre>\n\n<p>If your input contains the <code>\\r</code> line ends, set <a href=\"http://p3rl.org/binmode\" rel=\"nofollow\">binmode</a> to <code>:crlf</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452857428, "post_id": 34809899, "comment_id": 57362086, "body": "I accept that using <code>Text::CSV</code> would be a cleaner solution, but I&#39;d like to get my way out of this mess with my eyes open.   I understand the mistake I made there, and I have used <code>strict</code> and <code>warnings</code>. Could you please elaborate on lexically scoping my hashes correctly? I&#39;d be grateful."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452857558, "post_id": 34809899, "comment_id": 57362158, "body": "Well, because you don&#39;t <i>declare</i> <code>%Hash</code> with <code>my</code>, <code>perl</code> treats it as a global variable. And so each time you do : <code>$Hash{$fieldNames[2 + $i]}-&gt;{$labels[$i]} = $customer[$j][$i];   </code> you add a new element to the existing hash. But don&#39;t delete the old one, so if you try and insert it into your array at this point, you&#39;ll have dupes. If you scope your hash to the loop though (with <code>my</code>) then it creates a <i>new</i> data structure each iteration."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452857800, "post_id": 34809899, "comment_id": 57362306, "body": "I think I get it. Thank you."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452857888, "post_id": 34809899, "comment_id": 57362352, "body": "<code>Data::Dumper</code> is invaluable for this sort of things."}, {"owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "edited": false, "score": 0, "creation_date": 1452858387, "post_id": 34809899, "comment_id": 57362611, "body": "Absolutely. I have more commented <code>print Dumper(....)</code> lines than anything else. ;)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1452856777, "creation_date": 1452856777, "answer_id": 34809899, "question_id": 34809165, "link": "https://stackoverflow.com/questions/34809165/parsing-a-csv-file-using-array-of-hash-of-hashes-in-perl/34809899#34809899", "title": "Parsing a CSV file using array of hash of hashes in Perl", "body": "<p>Ok, your problem gets a lot easier with <code>Text::CSV</code>. I would suggest looking at a rewrite, or reasking your question framing it as such.</p>\n\n<p>But your problem is actually this:</p>\n\n<pre><code>push @aoh, %Hash;                #Array of hashes\n</code></pre>\n\n<p>That doesn't create an array of hashes at all. That extracts all the elements from  <code>%Hash</code> (in no particular order, aside from keys and values being paired) and inserts them into <code>@aoh</code>.</p>\n\n<p>You <em>probably</em> want:</p>\n\n<pre><code>push @aoh, \\%Hash;\n</code></pre>\n\n<p>Or perhaps:</p>\n\n<pre><code>push @aoh, { %Hash }; \n</code></pre>\n\n<p>I'm not entirely clear, because you're reusing <code>%Hash</code>, so you may get duplication. This is best dealt with by <code>use strict;</code> <code>use warnings;</code> and lexically scoping your hashes correctly. </p>\n"}], "owner": {"reputation": 311, "user_id": 5023617, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ddf595f5ae6cdc2279451e890fb502b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anupama G", "link": "https://stackoverflow.com/users/5023617/anupama-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 34809899, "answer_count": 2, "score": 1, "last_activity_date": 1452955528, "creation_date": 1452854194, "last_edit_date": 1452955528, "question_id": 34809165, "link": "https://stackoverflow.com/questions/34809165/parsing-a-csv-file-using-array-of-hash-of-hashes-in-perl", "title": "Parsing a CSV file using array of hash of hashes in Perl", "body": "<p>I have CSV data in this form:</p>\n\n<pre><code>Sl.No, Label, Type1, Type2...\n1, \"label1\", Y, N, N...\n2, \"label2\", N, Y, Y...\n...\n</code></pre>\n\n<p>Where \"Y\" and \"N\" denote whether the corresponding label is to be printed to a file or not. </p>\n\n<pre><code>while ( &lt;$fh&gt; ) {    #Reading the CSV file\n\n    $filter = $_;\n    chomp $filter;\n    $filter =~ tr/\\r//d;\n\n    if ( $. == 1 ) {\n        @fieldNames = split \",\", $filter;\n    }\n    else {\n        @fields = split \",\", $filter;\n        $numCustomers = scalar(@fields) - 2;\n        push @labels, $fields[2];\n\n        for ( $i = 0; $i &lt; $numCustomers; $i++ ) {\n\n            for ( $j = 0; $j &lt; scalar(@labels); $j++ ) {\n                $customer[$i][$j] = $fields[ 2 + $i ];\n            }\n\n            $custFile = \"customer\" . $i . \"_external.h\";\n\n            open( $fh1, \"&gt;\", $custFile ) or die \"Unable to create external header file for customer $i\";\n        }\n    }\n}\n\nfor ( $i = 0; $i &lt; scalar(@labels); $i++ ) {\n\n    for ( $j = 0; $j &lt; $numCustomers; $j++ ) {\n\n        $Hash{ $fieldNames[ 2 + $i ] }-&gt;{ $labels[$i] } = $customer[$j][$i];\n        push @aoh, %Hash;    #Array of hashes\n    }\n}\n\nmy @headerLines = read_file($intFile);  # read the internal file, and copy only\n                                        # those lines that are not marked with\n                                        # \"N\" in the CSV file to the external file.\n\n# iterate over elements of each hash and print the labels only if value is 'Y'\n\nforeach my $headerLine (@headerLines) {\n\n    chomp $headerLine;\n\n    for $i ( 0 .. $#aoh ) {\n\n        for my $cust1 ( sort keys %{ $aoh[$i] } ) {    #HERE\n\n            for my $reqLabel1 ( keys %{ $aoh[$i]{$cust1} } ) {\n\n                print \"$cust1, $reqLabel1 : $aoh[$i]{$cust1}{$reqLabel1}\\n\";\n\n                if ( $aoh[$i]{$cust1}{$reqLabel1} eq \"Y\" ) {\n\n                    for ( $j = 0; $j &lt; $numCustomers; $j++ ) {\n                        $req[$j][$i] = $reqLabel1;\n                    }\n                }\n                else {\n                    for ( $j = 0; $j &lt; $numCustomers; $j++ ) {\n                        $nreq[$j][$i] = $reqLabel1;\n                    }\n                }\n            }\n\n        }\n\n        if ( grep { $headerLine =~ /$_/ } @nreq ) {\n            next;    #Don't print this line in the external file\n        }\n        else {\n            print $fh1 $headerLine . \"\\n\";    #print this line in the external file\n        }\n    }\n}\n</code></pre>\n\n<p>This complains \"Cannot use string Type1 as a hash REF\", referring to the line marked as #HERE. </p>\n\n<p>I've tried dumping data structures everywhere, but I'm not sure where this cropped up from. </p>\n\n<p>Any insights would be appreciated. </p>\n\n<p>I have received feedback that using <code>Text::CSV</code> would be a better solution. How would it reduce the need to use nested data structures?</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1452852441, "post_id": 34808454, "comment_id": 57359457, "body": "What if both column 1 and column 2 have the same value?"}, {"owner": {"reputation": 959, "user_id": 3481031, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2f8b5c98a1b12a073aa6b93f780fb83b?s=128&d=identicon&r=PG&f=1", "display_name": "cucurbit", "link": "https://stackoverflow.com/users/3481031/cucurbit"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1452852753, "post_id": 34808454, "comment_id": 57359613, "body": "What do you mean? For example another row with Region_5000\\tRegion_5000 ? This case is a &#39;normal&#39; case."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452868159, "post_id": 34808454, "comment_id": 57368413, "body": "In general this can&#39;t be done linearly and a graph needs to be built. For instance, if I have <code>Region_1  Region_2</code> and then <code>Region_3  Region_4</code> then on the surface of it I have two independent records, and the solutions you have been given apply two distinct IDs. But if I then have <code>Region_3  Region_2</code> then that unifies the two previous records and they need to be given the same ID"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452872138, "post_id": 34808454, "comment_id": 57371096, "body": "Your desired output has record five \u2014 with <code>Region_1</code> in column 2 \u2014 in a different group from record one \u2014 with <code>Region_1</code> in column 1. Please confirm that that is correct"}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 3481031, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2f8b5c98a1b12a073aa6b93f780fb83b?s=128&d=identicon&r=PG&f=1", "display_name": "cucurbit", "link": "https://stackoverflow.com/users/3481031/cucurbit"}, "edited": false, "score": 0, "creation_date": 1452852954, "post_id": 34808739, "comment_id": 57359709, "body": "Thanks but this is not evaluating column 2. Check the last 2 rows of the ouput, must have the same common_number."}, {"owner": {"reputation": 959, "user_id": 3481031, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2f8b5c98a1b12a073aa6b93f780fb83b?s=128&d=identicon&r=PG&f=1", "display_name": "cucurbit", "link": "https://stackoverflow.com/users/3481031/cucurbit"}, "edited": false, "score": 0, "creation_date": 1452853020, "post_id": 34808739, "comment_id": 57359745, "body": "OK. Just need to change b hash with $2 variable. Now yes :)"}], "tags": [], "owner": {"reputation": 1206, "user_id": 3502868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9664ba17a5ecd7bcb5c5bf27b1a4c99b?s=128&d=identicon&r=PG&f=1", "display_name": "bkmoney", "link": "https://stackoverflow.com/users/3502868/bkmoney"}, "is_accepted": true, "score": 1, "last_activity_date": 1452853731, "last_edit_date": 1452853731, "creation_date": 1452852780, "answer_id": 34808739, "question_id": 34808454, "link": "https://stackoverflow.com/questions/34808454/check-duplicate-values-in-two-columns-separately/34808739#34808739", "title": "Check duplicate values in two columns separately", "body": "<p>If you put this into a.awk</p>\n\n<pre><code>{\n    if (a[$1])\n        print $0 a[$1]\n    else if (b[$2])\n        print $0 b[$2]\n    else {\n        print $0 \" common_\" c\n        a[$1] = b[$2] = \" common_\" c\n        c++\n    }\n}\n</code></pre>\n\n<p>And you do</p>\n\n<pre><code>awk -f a.awk -v c=0 foo.txt | column -t\n</code></pre>\n\n<p>You will get the desired result</p>\n\n<pre><code>Region_1   Region_1276  common_0\nRegion_2   Region_47    common_1\nRegion_3   Region_50    common_2\nRegion_1   Region_14    common_0\nRegion_50  Region_1     common_3\nRegion_27  Region_4     common_4\nRegion_12  Region_4     common_4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1452859140, "post_id": 34808775, "comment_id": 57363026, "body": "What does the <code>&#47;&#47;=</code> do?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "edited": false, "score": 0, "creation_date": 1452859229, "post_id": 34808775, "comment_id": 57363069, "body": "Conditional assignment <code>&#47;&#47;</code> tests if it&#39;s undefined, and if it is, it assigns the value. Pretty similar to <code>||</code> but handles edge cases of <code>0</code> and <code>&#39;&#39;</code> differently."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452871952, "post_id": 34808775, "comment_id": 57370969, "body": "This has the poroblem that I describe in my solution. All of the data must be read into memory before the groups can be assigned"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1452853300, "last_edit_date": 1452853300, "creation_date": 1452852896, "answer_id": 34808775, "question_id": 34808454, "link": "https://stackoverflow.com/questions/34808454/check-duplicate-values-in-two-columns-separately/34808775#34808775", "title": "Check duplicate values in two columns separately", "body": "<p>With <code>perl</code> I would tackle it like this:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy %id_for;\nmy $count = 0; \n\nwhile ( &lt;&gt; ) {\n   chomp; \n   my ( $R1, $R2 ) = split; \n   my $id = $id_for{$R1} // $id_for{$R2} // $count++; \n   $id_for{$R1} //= $id; \n   $id_for{$R2} //= $id; \n   print join ( \"\\t\", $R1, $R2, \"common_\".$id_for{$R1} ), \"\\n\";\n\n}\n</code></pre>\n\n<p>This doesn't do quite what you want though, because I get:</p>\n\n<pre><code>Region_1    Region_1276 common_0\nRegion_2    Region_47   common_1\nRegion_3    Region_50   common_2\nRegion_1    Region_14   common_0\nRegion_50   Region_1    common_2\nRegion_27   Region_4    common_3\nRegion_12   Region_4    common_3\n</code></pre>\n\n<p>Because it's matching that region 1 against the single list. Does this mean you have two lists? </p>\n\n<p>E.g.:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy %column_A;\nmy %column_B;\nmy $count = 0; \n\nwhile ( &lt;&gt; ) {\n   chomp; \n   my ( $R1, $R2 ) = split; \n   my $id = $column_A{$R1} // $column_B{$R2} // $count++; \n   $column_A{$R1} //= $id; \n   $column_B{$R2} //= $id; \n   print join ( \"\\t\", $R1, $R2, \"Common_\".$id ), \"\\n\";\n\n}\n</code></pre>\n\n<p>This creates a list that looks like your desired output:</p>\n\n<pre><code>Region_1    Region_1276 Common_0\nRegion_2    Region_47   Common_1\nRegion_3    Region_50   Common_2\nRegion_1    Region_14   Common_0\nRegion_50   Region_1    Common_3\nRegion_27   Region_4    Common_4\nRegion_12   Region_4    Common_4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467625161, "last_edit_date": 1467625161, "creation_date": 1452871305, "answer_id": 34814320, "question_id": 34808454, "link": "https://stackoverflow.com/questions/34808454/check-duplicate-values-in-two-columns-separately/34814320#34814320", "title": "Check duplicate values in two columns separately", "body": "<p>In general this can't be done linearly and a graph needs to be built.</p>\n\n<p>For instance, if I have</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Region_A    Region_B\nRegion_C    Region_D\n</code></pre>\n\n<p>then on the face of it I have two independent records, and the solutions you have been given apply two distinct IDs. But if I then have</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Region_C    Region_B\n</code></pre>\n\n<p>then that unifies the two previous records and they need to be given the same ID</p>\n\n<p>Here's a solution using the <a href=\"http://metacpan.org/module/Graph\" rel=\"nofollow\"><code>Graph</code></a> module. I've added the situation above to the end of your sample data to demonstrate that it works as expected. If you don't need the IDs assigned in the order of your input data, or if you are happy to have the outout in a different order from the input, then a simpler solution is possible</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Graph;\n\nmy @data = &lt;DATA&gt;;\nchomp @data;\n\nmy $g = Graph::Undirected-&gt;new(vertices =&gt; \\@data, );\nmy @vertices = $g-&gt;vertices;\n\nfor my $i ( 0 .. $#vertices ) {\n\n    for my $j ( $i+1 .. $#vertices ) {\n\n        my @ri = split ' ', $vertices[$i];\n        my @rj = split ' ', $vertices[$j];\n\n        if ( $ri[0] eq $rj[0] or $ri[1] eq $rj[1]) {\n            $g-&gt;add_edge($vertices[$i], $vertices[$j]);\n        }\n    }\n}\n\nmy %group;\n{\n    my $n = 0;\n    for my $set ( $g-&gt;connected_components ) {\n        $group{$_} = $n for @$set;\n        ++$n;\n    }\n}\n\nmy @ids;\nmy $n = 0;\nfor ( @data ) {\n    printf \"%-16s%-16s%-16s\\n\", split, $ids[$group{$_}] //= 'common_' . $n++;\n}\n\n\n__DATA__\nRegion_1    Region_1276\nRegion_2    Region_47\nRegion_3    Region_50\nRegion_1    Region_14\nRegion_50   Region_1\nRegion_27   Region_4\nRegion_12   Region_4\nRegion_A    Region_B\nRegion_C    Region_D\nRegion_C    Region_B\n</code></pre>\n\n<h2>Output</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code>Region_1        Region_1276     common_0        \nRegion_2        Region_47       common_1        \nRegion_3        Region_50       common_2        \nRegion_1        Region_14       common_0        \nRegion_50       Region_1        common_3        \nRegion_27       Region_4        common_4        \nRegion_12       Region_4        common_4        \nRegion_A        Region_B        common_5        \nRegion_C        Region_D        common_5        \nRegion_C        Region_B        common_5        \n</code></pre>\n"}], "owner": {"reputation": 959, "user_id": 3481031, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2f8b5c98a1b12a073aa6b93f780fb83b?s=128&d=identicon&r=PG&f=1", "display_name": "cucurbit", "link": "https://stackoverflow.com/users/3481031/cucurbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 34808739, "answer_count": 3, "score": 2, "last_activity_date": 1467625161, "creation_date": 1452851765, "last_edit_date": 1452872180, "question_id": 34808454, "link": "https://stackoverflow.com/questions/34808454/check-duplicate-values-in-two-columns-separately", "title": "Check duplicate values in two columns separately", "body": "<p>This is my <strong>input</strong> file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Region_1    Region_1276\nRegion_2    Region_47\nRegion_3    Region_50\nRegion_1    Region_14\nRegion_50   Region_1\nRegion_27   Region_4\nRegion_12   Region_4\n</code></pre>\n\n<p>And this is the <strong>output</strong> I want:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Region_1        Region_1276     Common_0\nRegion_2        Region_47       Common_1\nRegion_3        Region_50       Common_2\nRegion_1        Region_14       Common_0\nRegion_50       Region_1        Common_3\nRegion_27       Region_4        Common_4\nRegion_12       Region_4        Common_4\n</code></pre>\n\n<p><strong>Goal</strong>: I want to add a new column with an unique ID for every line in my input. The problem is that sometimes column one has a duplicated value, in my example, \"Region_1\" in column1 has two lines. So, the ID must be the same for this two rows (Common_0 in the output). It happens the same with second column. If column 2 has a duplicated value, the ID must be the same (Common_4). I've been trying hard during the day but this is the 'closest' code that I've, and it is still far away from the solution:</p>\n\n<pre><code> awk -v c=0 '{a[$1]++}END{for(x in a){if(a[x]&gt;1){for(i=1;i&lt;=a[x];i++){print x\"\\tCommon_\"c}}else{print x\"\\tCommon_\"c};c++}}'\n</code></pre>\n\n<p>Output of my code:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Region_27   Common_0\nRegion_12   Common_1\nRegion_1    Common_2\nRegion_1    Common_2\nRegion_50   Common_3\nRegion_2    Common_4\nRegion_3    Common_5\n</code></pre>\n\n<p>It's not OK because it only evaluates column1 and also I don't get print column2.</p>\n"}, {"tags": ["perl", "request", "tracker", "ticket-system", "rt"], "answers": [{"tags": [], "owner": {"reputation": 3785, "user_id": 4830460, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zmAnw.png?s=128&g=1", "display_name": "iamdeit", "link": "https://stackoverflow.com/users/4830460/iamdeit"}, "is_accepted": true, "score": 1, "last_activity_date": 1452895955, "creation_date": 1452895955, "answer_id": 34820760, "question_id": 34808387, "link": "https://stackoverflow.com/questions/34808387/how-to-display-custom-fields-in-quicksearch-results-requesttracker/34820760#34820760", "title": "How to display custom fields in QuickSearch results (RequestTracker)?", "body": "<p>I read everywhere and RT doesn't provide a way to do that for every queue. I solved by saving some searches and adding a new dashboard with those links.</p>\n"}], "owner": {"reputation": 3785, "user_id": 4830460, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zmAnw.png?s=128&g=1", "display_name": "iamdeit", "link": "https://stackoverflow.com/users/4830460/iamdeit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 34820760, "answer_count": 1, "score": 1, "last_activity_date": 1452895955, "creation_date": 1452851537, "last_edit_date": 1452853346, "question_id": 34808387, "link": "https://stackoverflow.com/questions/34808387/how-to-display-custom-fields-in-quicksearch-results-requesttracker", "title": "How to display custom fields in QuickSearch results (RequestTracker)?", "body": "<p>If I click one of the links in the QuickSearch Box inside the main dashboard it lists all tickets correctly, the problem is that I want all my custom fields to be displayed in the quickSearch results. </p>\n\n<p>I already tried setting $DefaultSearchResultFormat in the config file, but it will show the same custom fields for all searches. I have different custom fields in every queue. Is there a way to set a defaultSearchResultFormat for each queue?</p>\n"}, {"tags": ["perl", "tcl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1452848512, "post_id": 34807114, "comment_id": 57357139, "body": "Your question is unsuited for Stack Overflow. You should start by trying out your luck and come back with specific questions. If you don&#39;t understand what the code does at all, look up all the keywords, then find equivalents. If you&#39;re a Python developer the actual program logic should not be a huge challenge. You will need to read <a href=\"http://perldoc.perl.org/perlsyn.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsyn.html</a> and <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html</a> to get started. You might want to write unit-tests (or something similar that just calls the program and checks output). Do it in Python. Run it against the Perl and the TCL you build."}], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1452849951, "post_id": 34807784, "comment_id": 57357981, "body": "The time and effort you gave to write the above post...I have no words...thanks a lot...that&#39;s all what I can say !!"}], "tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": true, "score": 2, "last_activity_date": 1452849522, "creation_date": 1452849522, "answer_id": 34807784, "question_id": 34807114, "link": "https://stackoverflow.com/questions/34807114/perl-to-tcl-code-conversion/34807784#34807784", "title": "Perl to Tcl code conversion", "body": "<p>Well, let's consider your code in your first file:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my @GPO_regs = qw(0x70034 0x70038 0x7003C 0x70040 0x70044);\n</code></pre>\n\n<p>This (which is creating an effectively-global variable that is never used?) would be translated into:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>set GPO_regs {0x70034 0x70038 0x7003C 0x70040 0x70044}\n</code></pre>\n\n<p>Whereas this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub write_phy {\n    my($phy, $register, $value) = @_;\n    # Stuff...\n}\n</code></pre>\n\n<p>Becomes:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>proc write_phy {phy register value} {\n    # Translation of Stuff...\n}\n</code></pre>\n\n<p>Going on to look at the contents of the subroutine (after applying the obvious correction):</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$value = oct($value) if $value =~ /^0/;\n</code></pre>\n\n<p>This line decodes the octal value of a string if that string starts with a leading zero. Tcl does this by default in some contexts, but let's be explicit. I'll use a regular expression to do the \u201cif that string starts with a leading zero\u201d even though I would not normally do this, as that will help you translate your other file:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>if { [regexp {^0} $value] } {\n    # The [scan] command is a lot like the C sscanf() function, if you know that\n    scan $value \"%o\" value\n}\n</code></pre>\n\n<p>The only tricky thing about translating this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>if ($DEBUG) { printf(\"Write PHY ${phy} register ${register} = 0x%0.8X\\n\", $value); };\n</code></pre>\n\n<p>is that Tcl has different variable scoping rules to Perl, so the <code>DEBUG</code> variable will be absent. In this case, the simplest technique is to use the fully-qualified name of the variable.</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>if {$::DEBUG} {\n    puts [format \"Write PHY ${phy} register ${register} = 0x%0.8X\" $value]\n    ### However, I recommend this instead:\n    # puts [format \"Write PHY %s register %s = 0x%0.8X\" $phy $register $value]\n    ### As unexpected % symbols in phy or register won't make it choke. The equivalent\n    ### advice would apply if you were sticking with Perl.\n}\n</code></pre>\n\n<p>Finally, the backticks in Perl translate pretty directly to Tcl's <code>exec</code>, so this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>`./write_phy.pl ${phy} ${register} ${value}`;\n</code></pre>\n\n<p>Becomes this:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>exec ./write_phy.pl $phy $register $value\n</code></pre>\n\n<p>You can usually omit the <code>{</code>braces<code>}</code> from around Tcl variable names; you only need them where it would lead to an otherwise-unwanted parse.</p>\n\n<p>Putting this all together, I get:</p>\n\n<pre class=\"lang-tcl prettyprint-override\"><code>set GPO_regs {0x70034 0x70038 0x7003C 0x70040 0x70044}\n\nproc write_phy {phy register value} {\n    if { [regexp {^0} $value] } {\n        scan $value \"%o\" value\n    }\n    if {$::DEBUG} {\n        puts [format \"Write PHY %s register %s = 0x%0.8X\" $phy $register $value]\n    }\n    exec ./write_phy.pl $phy $register $value\n}\n</code></pre>\n\n<hr>\n\n<p>Note that the code in the other file has some nasty bugs lurking! I won't go into depth about it, but the key things you need to know are that expressions that are not used as <code>if</code> conditions should be wrapped in <code>expr</code>, like this:</p>\n\n<pre><code>set registerValue [expr {1 &lt;&lt; 31 | $phyAddr &lt;&lt; 25 | $regAddr &lt;&lt; 20 | 2 &lt;&lt; 1}]\n</code></pre>\n\n<p>and the recommended way of splitting the arguments to a script into variables is like this:</p>\n\n<pre><code>lassign $argv phyAddr regAddr\n</code></pre>\n\n<p>(Tcl's <code>$</code> doesn't mean \u201cthis is a variable\u201d, it means \u201cread from this variable\u201d. Variable <em>names</em> passed to things that manipulate the variable itself \u2014 e.g., <code>set</code> and <code>lassign</code> \u2014 should not normally have a <code>$</code> in front.)</p>\n\n<p>Also, Perl's <code>die</code> is a lot like Tcl's <code>error</code>, and Tcl's <code>exec</code> automatically does a <code>chomp</code>-like operation on it's result.</p>\n"}], "owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "closed_date": 1452849497, "accepted_answer_id": 34807784, "answer_count": 1, "score": -1, "last_activity_date": 1452849522, "creation_date": 1452847144, "question_id": 34807114, "link": "https://stackoverflow.com/questions/34807114/perl-to-tcl-code-conversion", "closed_reason": "Not suitable for this site", "title": "Perl to Tcl code conversion", "body": "<p>I need to convert a perl script to a Tcl script. I have worked in Python before but this is a new challenge since I am novice in both perl and tcl.</p>\n\n<p>Can anyone give me some pointers on how do I represent the following lines in Tcl:</p>\n\n<pre><code>my @GPO_regs = qw(0x70034 0x70038 0x7003C 0x70040 0x70044);\n\nsub write_phy {\n    my($phy, $register, $value) = @_;\n    $value = oct($val) if $value =~ /^0/;\n    if ($DEBUG) { printf(\"Write PHY ${phy} register ${register} =     \n0x%0.8X\\n\", $value); };\n    `./write_phy.pl ${phy} ${register} ${value}`;\n}\n</code></pre>\n\n<p>And in another Perl file:</p>\n\n<pre><code>my ($phyAddr, $regAddr)  = @ARGV;\n\nif($phyAddr =~ /0x/) {\n   $phyAddr = oct($phyAddr);\n}\n\n if($regAddr =~ /0x/) {\n        $regAddr = oct($regAddr);\n}\n\n\nmy $registerValue = 1 &lt;&lt; 31 | $phyAddr &lt;&lt; 25 | $regAddr &lt;&lt; 20 | 2 &lt;&lt; 1;\nmy $registerHex = sprintf(\"0x%X\", $registerValue);\n\n`./read_write_spi_reg -a 0x070064 -w ${registerHex}`;\nmy $value = `./read_write_spi_reg -a 0x070068 -r`;\n\nif( $value &gt;&gt; 16 != 0 ) {\n    die \"Error reading PHY register\";\n }\nchomp($value);\nprintf(\"${value}\\n\");\n</code></pre>\n\n<p>Thank you for your support.</p>\n"}, {"tags": ["perl", "scala"], "answers": [{"comments": [{"owner": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 2, "creation_date": 1452848896, "post_id": 34806996, "comment_id": 57357362, "body": "In other words, Perl is the winner here ;)"}, {"owner": {"reputation": 6845, "user_id": 81444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2fa9df92d8d7eba3e17207c86f953be3?s=128&d=identicon&r=PG", "display_name": "Filippo Vitale", "link": "https://stackoverflow.com/users/81444/filippo-vitale"}, "reply_to_user": {"reputation": 11698, "user_id": 166247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c5bd086b49b0b66cf9089d6f7e4d41?s=128&d=identicon&r=PG", "display_name": "Ashalynd", "link": "https://stackoverflow.com/users/166247/ashalynd"}, "edited": false, "score": 0, "creation_date": 1452849103, "post_id": 34806996, "comment_id": 57357480, "body": "...yes, but I wait for Perl6 before using it again :-P After this troll I will update the answer with some more detailed explanation and an alternative answer"}], "tags": [], "owner": {"reputation": 6845, "user_id": 81444, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2fa9df92d8d7eba3e17207c86f953be3?s=128&d=identicon&r=PG", "display_name": "Filippo Vitale", "link": "https://stackoverflow.com/users/81444/filippo-vitale"}, "is_accepted": true, "score": 6, "last_activity_date": 1452851979, "last_edit_date": 1452851979, "creation_date": 1452846721, "answer_id": 34806996, "question_id": 34806396, "link": "https://stackoverflow.com/questions/34806396/creating-and-accumulating-a-map-of-map-of-map-in-scala/34806996#34806996", "title": "Creating and accumulating a Map of Map of Map ... in scala", "body": "<p>I would suggest to see the merging of these maps as a <code>monoid-append</code> operation.</p>\n\n<p>First we create the maps of maps of maps as single elements:</p>\n\n<pre><code>val input = \"\"\"Bob, Carrots, United States, 200\n              |Bill, Potatoes, England, 100\n              |Bob, Oranges, England, 50\n              |Bob, Carrots, United States, 20\"\"\".stripMargin.lines.toList\n\nval mmm = input.map(_.split(\", \"))\n               .map { case Array(n, g, c, v) =&gt; Map(n -&gt; Map(g -&gt; Map(c -&gt; v.toInt))) }\n</code></pre>\n\n<p><code>mmm</code> is of type <code>List[Map[String, Map[String, Map[String, Int]]]]</code> :</p>\n\n<pre><code>    List[Map[String, \n                    Map[String, \n                               Map[String, Int]]]]\n</code></pre>\n\n<p>Then we could <code>suml</code> using a library like <code>scalaz</code> or <code>cats</code>:</p>\n\n<pre><code>import scalaz._, Scalaz._\n\nprintln(mmm.suml)\n</code></pre>\n\n<p>This will print (not idented):</p>\n\n<pre><code>Map(Bill -&gt; Map(Potatoes -&gt; Map(England -&gt; 100)), \n    Bob  -&gt; Map(Oranges  -&gt; Map(England -&gt; 50), \n                Carrots  -&gt; Map(United States -&gt; 220)))\n</code></pre>\n\n<p>To help understand what is happening behind the <code>.suml</code> operation I would <strong>shamelessly</strong> suggest to checkout this presentation I made last year <a href=\"https://speakerdeck.com/filippovitale/will-it-blend-scalasyd-february-2015\" rel=\"nofollow\">https://speakerdeck.com/filippovitale/will-it-blend-scalasyd-february-2015</a></p>\n\n<hr>\n\n<p><strong>EDIT</strong> </p>\n\n<p>We can also see our maps of maps of maps as <code>Foldable</code> and use <code>foldMap</code> for the same result:</p>\n\n<pre><code>input.map(_.split(\", \"))\n     .foldMap{ case Array(n, g, c, v) =&gt; Map(n -&gt; Map(g -&gt; Map(c -&gt; v.toInt))) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 5698173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f809ee1a569fa0fdbd793e643ca173f6?s=128&d=identicon&r=PG&f=1", "display_name": "nikiforo", "link": "https://stackoverflow.com/users/5698173/nikiforo"}, "is_accepted": false, "score": 0, "last_activity_date": 1452848778, "last_edit_date": 1452848778, "creation_date": 1452847854, "answer_id": 34807311, "question_id": 34806396, "link": "https://stackoverflow.com/questions/34806396/creating-and-accumulating-a-map-of-map-of-map-in-scala/34807311#34807311", "title": "Creating and accumulating a Map of Map of Map ... in scala", "body": "<p>Filippo Vitale codes are more concise and elegant</p>\n\n<p>This is a bruteforce solution:</p>\n\n<pre><code>val t =\n  \"\"\"Bob, Carrots, United States, 200\n    |Bill, Potatoes, England, 100\n    |Bob, Oranges, England, 50\n    |Bob, Carrots, United States, 20\"\"\".stripMargin\n\ndef commaSplit(s: String) = s.splitAt(s.indexOf(\",\"))\n\ndef f(arg: Seq[String]) =\n  arg\n    .groupBy(commaSplit(_)._1)\n    .map{ case (key, values) =&gt; key -&gt; values.map(commaSplit(_)._2.drop(2))}\n\nval res =\n  f(t.split(\"\\n\"))\n    .map{ case (key, values) =&gt; key -&gt; f(values).map { case (k, v) =&gt;\n      k -&gt; f(v).map { case (country, amount) =&gt; country -&gt; amount.map(_.toInt).sum }\n    }}\n</code></pre>\n\n<p>that gives this result:</p>\n\n<pre><code>Map(Bob -&gt;  Map(Carrots  -&gt; Map(United States -&gt; 220), \n                Oranges  -&gt; Map(England -&gt; 50)), \n    Bill -&gt; Map(Potatoes -&gt; Map(England -&gt; 100)))\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 5793204, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f0daf5d3618aba2dca8418cf6c8a8bf9?s=128&d=identicon&r=PG&f=1", "display_name": "BarneyW", "link": "https://stackoverflow.com/users/5793204/barneyw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 3, "accepted_answer_id": 34806996, "answer_count": 2, "score": 5, "last_activity_date": 1452851979, "creation_date": 1452843968, "question_id": 34806396, "link": "https://stackoverflow.com/questions/34806396/creating-and-accumulating-a-map-of-map-of-map-in-scala", "title": "Creating and accumulating a Map of Map of Map ... in scala", "body": "<p>I have a file containing data on Salesman, Product, Location, SalesValue</p>\n\n<p>For instance:</p>\n\n<pre><code>Bob, Carrots, United States, 200\nBill, Potatoes, England, 100\nBob, Oranges, England, 50\nBob, Carrots, United States, 20\n</code></pre>\n\n<p>The SalesValue can be succinctly accumulated into a hash of hash of hash in perl using the following code</p>\n\n<pre><code>while(&lt;&gt;){\n    @cols = split(/,/);\n    $vals {$cols[0]} {$cols[1]} {$cols[2]} += $cols[3];\n}\n</code></pre>\n\n<p>Has anyone got any suggestions how this creation of a map of map of map, plus the accumulation , could best be implemented in scala?</p>\n"}, {"tags": ["regex", "bash", "perl"], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 5789049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fb170a5770489ec45d2bc2f6cf08e48?s=128&d=identicon&r=PG&f=1", "display_name": "bobo", "link": "https://stackoverflow.com/users/5789049/bobo"}, "is_accepted": false, "score": 0, "last_activity_date": 1452841902, "creation_date": 1452841902, "answer_id": 34805947, "question_id": 34805846, "link": "https://stackoverflow.com/questions/34805846/rewrite-dokuwiki-internal-links-using-regex/34805947#34805947", "title": "Rewrite dokuwiki internal links using regex", "body": "<p>try changing <code>[[http into [^[^</code> or whatever string you like, \nthen change <code>[[ into [[admin:</code>, \nthen change back <code>[^[^ into [[http</code></p>\n"}], "owner": {"reputation": 1, "user_id": 3651820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b79fab14b31485d4f0dfa323a7711db3?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier M.", "link": "https://stackoverflow.com/users/3651820/olivier-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452841902, "creation_date": 1452841480, "question_id": 34805846, "link": "https://stackoverflow.com/questions/34805846/rewrite-dokuwiki-internal-links-using-regex", "title": "Rewrite dokuwiki internal links using regex", "body": "<p>I am currently trying to merge several wikis together but to do so, I will need to parse the links that are within the page to make them match their new location. To do so I plan to use a Perl or bash script (not very sure still though I tend to go for Perl) and to use regex to convert them so that they can match their new namespace.</p>\n\n<p>Doing the conversion by itself should not be too difficult, anyway I am getting an issue since the syntax for http links and internal links is mainly the same, so I am not very sure how to deal with that, and thus I am looking for help.</p>\n\n<p>As a specific example, please find the following.</p>\n\n<p>One example that we must convert :</p>\n\n<pre><code>[[deploy_an_application|Tutorial to deploy an application]]\n</code></pre>\n\n<p>should become :</p>\n\n<pre><code>[[admin:deploy_an_application|Tutorial to deploy an application]]\n</code></pre>\n\n<p>which can be performed by a (using _ as a separator) :</p>\n\n<pre><code>s_(\\[\\[).*\\]\\]_\\[\\[admin\\:_g\n</code></pre>\n\n<p>One example that we should NOT convert :</p>\n\n<pre><code>[[http://www.ibm.com|Proud home of WebSphere]]\n</code></pre>\n\n<p>To perform that I am currently foreseeing something based on :</p>\n\n<pre><code>s_\\[\\[[^http]......\n</code></pre>\n\n<p>But I am really unsure about all that, especially since I cannot really make that work...</p>\n\n<p>So the question, is how can I perform this substitution on internal links without taking the http links in the process ?</p>\n\n<p>Thank you very much for your help.\nBest regards.</p>\n"}, {"tags": ["json", "perl", "sockets", "server", "multiprocessing"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1452835911, "post_id": 34804772, "comment_id": 57352501, "body": "This question is not a great fit for Stack Overflow because it&#39;s too broad, and it sounds like you also might be asking for recommendations on libraries, off-site resources, etc. Having said that, I would attempt something in <a href=\"http://mojolicious.org\" rel=\"nofollow noreferrer\">Mojolicious</a>, and then come back and ask specific questions when you run into specific problems."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1452839110, "post_id": 34804772, "comment_id": 57353362, "body": "<a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook\" rel=\"nofollow noreferrer\">mojolicious.org/perldoc/Mojolicious/Guides/Cookbook</a>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1452847247, "post_id": 34804772, "comment_id": 57356481, "body": "What kind of data do you want to submit?"}, {"owner": {"reputation": 11, "user_id": 5793059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103070537001149/picture?type=large", "display_name": "Daryl Metzler", "link": "https://stackoverflow.com/users/5793059/daryl-metzler"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1452883427, "post_id": 34804772, "comment_id": 57377503, "body": "@MattJacob yeah, this question is very broad, but i&#39;d hoped it was specific enough to get some direction on. I appreciate the pointers to Mojolicious, ill do my due diligence and research it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5793059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103070537001149/picture?type=large", "display_name": "Daryl Metzler", "link": "https://stackoverflow.com/users/5793059/daryl-metzler"}, "edited": false, "score": 0, "creation_date": 1452883493, "post_id": 34811564, "comment_id": 57377549, "body": "Ill look into the frameworks to see if they&#39;re what i need. Net::Server on the otherhand is forking, which means in the long run it will not work as a viable solution."}], "tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": false, "score": 0, "last_activity_date": 1452862458, "creation_date": 1452862458, "answer_id": 34811564, "question_id": 34804772, "link": "https://stackoverflow.com/questions/34804772/how-to-build-a-perl-socket-server/34811564#34811564", "title": "How to build a Perl Socket Server?", "body": "<p>I would consider using either a complete Framework like Mojolicious, or Dancer, or a Package like Net::Server. Quoting from its perldoc:</p>\n\n<pre><code>   \"Net::Server\" is an extensible, generic Perl server engine.\n\n   \"Net::Server\" attempts to be a generic server as in \"Net::Daemon\" and \"NetServer::Generic\".  It includes with it the ability to run as an\n   inetd process (\"Net::Server::INET\"), a single connection server (\"Net::Server\" or \"Net::Server::Single\"), a forking server\n   (\"Net::Server::Fork\"), a preforking server which maintains a constant number of preforked children (\"Net::Server::PreForkSimple\"), or as a\n   managed preforking server which maintains the number of children based on server load (\"Net::Server::PreFork\").  In all but the inetd type,\n   the server provides the ability to connect to one or to multiple server ports.\n</code></pre>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 11, "user_id": 5793059, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103070537001149/picture?type=large", "display_name": "Daryl Metzler", "link": "https://stackoverflow.com/users/5793059/daryl-metzler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452862458, "creation_date": 1452834757, "question_id": 34804772, "link": "https://stackoverflow.com/questions/34804772/how-to-build-a-perl-socket-server", "title": "How to build a Perl Socket Server?", "body": "<p>I have found a few sparse resources on the matter, but i am looking to build a Perl server as a \"microservice\". More specifically a web application in LAMPhp/Perl/MariaDB in a SOA format.</p>\n\n<p>What is the best way to go about building an efficient Perl server for our backend? The Web Tier opens a PHP stream TCP socket to a particular Perl server for a particular \"service\" (high-level service). That server must service many Web servers' requests asynchronously. The service then either connects directly to MySQL to fetch an answer (simple case) or must do some computational work to generate an answer.</p>\n\n<p>My naive implementation is single-tasking:</p>\n\n<pre><code>use IO::Socket::INET;\nuse Data::Dumper;\nuse JSON::XS qw(encode_json decode_json);\n\n$| = 1;\n\nmy $socket = new IO::Socket::INET (\n    LocalHost =&gt; '0.0.0.0',\n    LocalPort =&gt; '7000',\n    Proto =&gt; 'tcp',\n    Listen =&gt; 5,\n    Reuse =&gt; 1\n);\n\nwhile(1) {\n        my $client_socket = $socket-&gt;accept();\n        my $client_address = $client_socket-&gt;peerhost();\n        my $client_port = $client_socket-&gt;peerport();\n        my $client_json = \"\";\n        $client_socket-&gt;recv($client_json, 1024);\n        my $client_data = decode_json $client_json;\n        %response = %{process_request($client_data)};\n        $reply_json = encode_json(\\%response);\n        $client_socket-&gt;send($reply_json);\n        shutdown($client_socket, 1);\n}\n</code></pre>\n\n<p>So, there are obviously problems with this, as it is a a copy-paste example from the documentation. It handles a single socket/request at a time serially.</p>\n\n<p>My question is: \"What are best practices in Perl to build a server than can efficiently multiplex and process many incoming requests\"?</p>\n\n<p>My own thought on the matter is build a 'select' or 'epoll' main process that forks off to a small pool of worker threads via a Thread::Queue. </p>\n\n<p>Any suggestions? </p>\n"}, {"tags": ["xml", "perl", "xslt"], "comments": [{"owner": {"reputation": 1493, "user_id": 4399474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071244d72e3a6f73f9329753619eeb7c?s=128&d=identicon&r=PG", "display_name": "user52889", "link": "https://stackoverflow.com/users/4399474/user52889"}, "edited": false, "score": 0, "creation_date": 1452808494, "post_id": 34800327, "comment_id": 57344173, "body": "Are you running exactly the same file on both systems? What is the version of XML::LibXML installed on your RHEL5 system?"}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 1493, "user_id": 4399474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071244d72e3a6f73f9329753619eeb7c?s=128&d=identicon&r=PG", "display_name": "user52889", "link": "https://stackoverflow.com/users/4399474/user52889"}, "edited": false, "score": 0, "creation_date": 1452808824, "post_id": 34800327, "comment_id": 57344358, "body": "Yes, the exact same file. Just copied it to disk from my development workstation (RHEL 6) and put it on the RHEL 5 box this morning. I don&#39;t know what version of LibXML is installed... How do I see the version of a module?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1452808875, "post_id": 34800327, "comment_id": 57344394, "body": "<code>perl -MXML::LibXML -le &#39;print $XML::LibXML::VERSION&#39;</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452809273, "post_id": 34800327, "comment_id": 57344598, "body": "What result do you get from <code>print $xsl-&gt;toString, &quot;\\n&quot;</code>"}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1452809455, "post_id": 34800327, "comment_id": 57344702, "body": "@choroba LibXML version 1.58 on the RHEL 5 system, version 1.7 on RHEL 6"}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452809724, "post_id": 34800327, "comment_id": 57344818, "body": "@Borodin I get &quot;&lt;?xsl-stylesheet?&gt;&quot; on the 5 system. Is there a way to manually modify that and feed it back into $xsl so it has the correct attributes?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452809802, "post_id": 34800327, "comment_id": 57344863, "body": "@MasterZ: And that&#39;s after the <code>setData</code> method call?"}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452809841, "post_id": 34800327, "comment_id": 57344879, "body": "@Borodin Yes, it is."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452809971, "post_id": 34800327, "comment_id": 57344940, "body": "@MasterZ: That&#39;s bizarre. Try adding a second call, something like <code>$xsl-&gt;setData( xxx =&gt; &#39;yyy&#39; )</code> before the print. See if that makes any difference.  Also see what <code>$xsl-&gt;getData</code> returns"}, {"owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452810069, "post_id": 34800327, "comment_id": 57344992, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/100712/discussion-between-masterz-and-borodin\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "is_accepted": true, "score": 0, "last_activity_date": 1452814754, "creation_date": 1452814754, "answer_id": 34801864, "question_id": 34800327, "link": "https://stackoverflow.com/questions/34800327/adding-stylesheet-to-xml-using-perl-xmllibxml-on-older-system/34801864#34801864", "title": "Adding stylesheet to XML using Perl XML::LibXML on older system", "body": "<p>This is by no means the ideal solution, but it works until someone can give me a better solution.</p>\n\n<p>Part 1, check if the stylesheet string is blank.</p>\n\n<pre><code>if ( $xsl-&gt;toString eq \"&lt;?xml-stylesheet?&gt;\" ) { $CONFIG{'xslFixRequired'} = 1; }\n</code></pre>\n\n<p>Part 2, at the end of the script, right before saving the XML I search replace the string</p>\n\n<pre><code>my $FinalXML = $XML-&gt;toString($XMLFormat);\n\nif ( $CONFIG{'xslFixRequired'} ) {\n  $FinalXML =~ s/xml-stylesheet/xml-stylesheet type=\"text\\/xsl\" href=\"$CONFIG{'XML'}{'Stylesheet'}\"/;\n}\n</code></pre>\n"}], "owner": {"reputation": 1254, "user_id": 126582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e80da081770442802ebe380f3aacc7f0?s=128&d=identicon&r=PG", "display_name": "MasterZ", "link": "https://stackoverflow.com/users/126582/masterz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 34801864, "answer_count": 1, "score": 0, "last_activity_date": 1452814754, "creation_date": 1452807865, "last_edit_date": 1495535276, "question_id": 34800327, "link": "https://stackoverflow.com/questions/34800327/adding-stylesheet-to-xml-using-perl-xmllibxml-on-older-system", "title": "Adding stylesheet to XML using Perl XML::LibXML on older system", "body": "<p>I'm trying to add a stylesheet directly into my XML generated by perl.</p>\n\n<p>Using the information from <a href=\"https://stackoverflow.com/questions/6253965/add-a-reference-to-an-xslt-in-perl-using-only-xmllibxml#_=_\">this topic</a> I was able to get it to work on my RHEL 6 system running perl v5.10.1.</p>\n\n<p>However, when I run it on an older system, RHEL 5 with perl v5.8.8, my XML file only has this:</p>\n\n<pre><code>&lt;?xml-stylesheet?&gt;\n</code></pre>\n\n<p>Code used to generate XML</p>\n\n<pre><code># Start XML Handling\nuse XML::LibXML;\nmy $XML = XML::LibXML::Document-&gt;new('1.0', 'utf-8');\n\n# Add the lines for the stylesheet\nmy $xsl = $XML-&gt;createProcessingInstruction(\"xml-stylesheet\");\n$xsl-&gt;setData(type =&gt; 'text/xsl', href =&gt; $CONFIG{'XML'}{'Stylesheet'});\n$XML-&gt;appendChild($xsl);\n</code></pre>\n\n<p>Any ideas? I would like to do something cleaner than having my perl script modify the XMl as it's saving, but that's probably where I'm going to go next if I can't get this to work.</p>\n\n<p>P.S. No, I cannot update the software on any system. :(</p>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1452804554, "post_id": 34799244, "comment_id": 57342073, "body": "Can you be more specific than &quot;it doesn&#39;t work&quot;?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1452804725, "post_id": 34799244, "comment_id": 57342154, "body": "@AKHolland If you look at the code, the OP&#39;s problem becomes quite obvious: <code>my @energy = sort {$b &lt;=&gt; $a} $en;</code> (You&#39;re right, though, they should absolutely be more specific.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452804756, "post_id": 34799244, "comment_id": 57342172, "body": "Do you want the lines sorted across the whole of the output, or within the data from each file in the list file?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1452805007, "post_id": 34799244, "comment_id": 57342306, "body": "FWIW, smallest to largest would be ascending sort order, which is the default. Reverse order would be a descending sort, or largest to smallest."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1452805082, "post_id": 34799244, "comment_id": 57342363, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for this question (i.e., include sample data) and <a href=\"https://stackoverflow.com/posts/34799244/edit\">edit</a> your post. It&#39;s much easier to help you solve your problem if you help us not have to pull sample data out of our... uhh... ears."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1452805469, "post_id": 34799244, "comment_id": 57342573, "body": "We basically need a few lines from one of the &quot;PDB&quot; files (on which the innermost loop operates)."}, {"owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452805473, "post_id": 34799244, "comment_id": 57342576, "body": "I edited my question to let you know my problem. If sth is unclear, please let me know."}, {"owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452805529, "post_id": 34799244, "comment_id": 57342615, "body": "the input file is a fragment of pdb_file."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1452805681, "post_id": 34799244, "comment_id": 57342703, "body": "So, are you trying to sort the output per file, or overall?"}, {"owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452806085, "post_id": 34799244, "comment_id": 57342915, "body": "Per file - it was my first thought, but the easiest way is more desirable."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1452806197, "post_id": 34799244, "comment_id": 57342972, "body": "And (roughly) how big is each file?"}, {"owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452806587, "post_id": 34799244, "comment_id": 57343211, "body": "It depend ( i have a series of pdb_files) from 15 lines to 120 lines of data such as input file below."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452806885, "post_id": 34799878, "comment_id": 57343364, "body": "My list file has got a few pdb files (roughly 5-120 files - it depend on series) and each pdb file consist of few data line. I&#39;d like to do sort for overall (one series of pdb_file from list file)."}, {"owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452806897, "post_id": 34799878, "comment_id": 57343374, "body": "Thank you so much for response!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452806972, "post_id": 34799878, "comment_id": 57343405, "body": "@MartaWisniewska: Okay, so what do you want to happen to the <i>time</i> field? Should it keep increasing across all the files, or should it reset to zero for each one?"}, {"owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "edited": false, "score": 0, "creation_date": 1452807292, "post_id": 34799878, "comment_id": 57343552, "body": "OK. I&#39;d like to sor $en column in icreasing order till it achieve 0, then stop to print data, For <i>time=</i> lines I&#39;d like to number it from 0 till sth. (for the smallest $en value <i>time=0</i> , in next $en value  <i>time=1</i>."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467624962, "last_edit_date": 1467624962, "creation_date": 1452806140, "answer_id": 34799878, "question_id": 34799244, "link": "https://stackoverflow.com/questions/34799244/perl-sort-numbers-in-column-in-order/34799878#34799878", "title": "perl: sort numbers in column in order", "body": "<p>There are a few issues with your code that I've altered</p>\n\n<p>The reason your sort isn't working is that the statement</p>\n\n<pre><code>my @energy = sort {$b &lt;=&gt; $a} $en\n</code></pre>\n\n<p>sorts <em>just</em> the value of <code>$en</code> and puts it into <code>@energy</code>. With just one value there's clearly nothing to do. You have to have <em>all</em> of the data you want to sort available at once</p>\n\n<p>As long as your files are reasonably sized, the usual way to do this is to read the file into an array with one record per element, and then sort that array. I've done that in the program below. Each element of the array <code>@pdb_data</code> contains a reference to an array of five fields in the order you originally had them</p>\n\n<p>The <code>$time</code> value added as a sixth field on each record, because this must be done before sorting. Finally the array is sorted in increasing order of <code>$en</code> \u2014 the fifth field. (By the way, the standard sort order is from smaller values to bigger ones. It is a normal sort that you want, not a reversed one.)</p>\n\n<p>Te data in the array which has been filtered and sorted can then be printed in a simple <code>for</code> loop. The assignment</p>\n\n<pre><code>my ( $w_id, $x, $y, $z, $en, $time ) =  @$_\n</code></pre>\n\n<p>pulls the fields from each array element just as they were originally with the addition of a time field at the end</p>\n\n<p>I've been unable to test this without any data, but the program does compile</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy ($list_file) = @ARGV;\n\nopen my $lst_fh, '&lt;', $list_file or die qq{Unable to open \"$list_file\" for input: $!};\n\nmy $gro_file = 'waters.gro';\nopen my $gro_fh, '&gt;', $gro_file or die qq{Unable to open \"$gro_file\" for input: $!};\n\nwhile ( my $pdb_file = &lt;$lst_fh&gt; ) {\n\n    chomp $pdb_file;\n    open my $pdb_fh, '&lt;', $pdb_file or die $!;\n\n    my @pdb_data;\n    my $time = 0;\n\n    while ( &lt;$pdb_fh&gt; ) {\n\n        my @record = ( split )[ 1, 5, 6, 7, 8 ];\n\n        next unless $record[4] &lt; 0;\n\n        push @record, $time++;\n\n        push @pdb_data, \\@record;\n    }\n\n    @pdb_data = sort { $a-&gt;[4] &lt;=&gt; $b-&gt;[4] } @pdb_data;\n\n    my $stdout = select $gro_fh;\n\n    for ( @pdb_data ) {\n\n        my ( $w_id, $x, $y, $z, $en, $time ) =  @$_;\n\n        printf \"moja woda t=   %d\\n\", $time;\n        printf \"%5d\\n\", 1;\n        printf \"    1SOL     OW    1%8.3f%8.3f%8.3f%8.3f\\n\", $x/10.0, $y/10.0, $z/10.0, $en;\n        print  \" 20.0 20.0 20.0\\n\";\n    }\n\n    select $stdout;\n}\n\nclose $gro_fh or die $!;\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>This variation reads all of the data from all files in the list file before sorting and printing it. The time value is applied in the order of the <code>$ne</code> field</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nmy ($list_file) = @ARGV;\nmy $gro_file = 'waters.gro';\n\nopen my $lst_fh, '&lt;', $list_file or die qq{Unable to open \"$list_file\" for input: $!};\n\nmy @pdb_data;\n\nwhile ( my $pdb_file = &lt;$lst_fh&gt; ) {\n\n    chomp $pdb_file;\n    open my $pdb_fh, '&lt;', $pdb_file or die $!;\n\n    while ( &lt;$pdb_fh&gt; ) {\n\n        my @record = ( split )[ 1, 5, 6, 7, 8 ];\n\n        next unless $record[4] &lt; 0;\n\n        push @pdb_data, \\@record;\n    }\n}\n\n\n@pdb_data = sort { $a-&gt;[4] &lt;=&gt; $b-&gt;[4] } @pdb_data;\n\nopen my $gro_fh, '&gt;', $gro_file or die qq{Unable to open \"$gro_file\" for input: $!};\nselect $gro_fh;\n\nmy $time = 0;\n\nfor ( @pdb_data ) {\n\n    my ( $w_id, $x, $y, $z, $en ) =  @$_;\n\n    printf \"moja woda t=   %d\\n\", $time++;\n    printf \"%5d\\n\", 1;\n    printf \"    1SOL     OW    1%8.3f%8.3f%8.3f%8.3f\\n\", $x/10.0, $y/10.0, $z/10.0, $en;\n    print  \" 20.0 20.0 20.0\\n\";\n}\n\nclose or die $!;\n</code></pre>\n\n<h2>output</h2>\n\n<pre class=\"lang-none prettyprint-override\"><code>moja woda t=   0\n    1\n    1SOL     OW    1  -0.201   0.737  -0.737  -6.520\n 20.0 20.0 20.0\nmoja woda t=   1\n    1\n    1SOL     OW    1   0.649  -1.513   0.863  -4.230\n 20.0 20.0 20.0\nmoja woda t=   2\n    1\n    1SOL     OW    1   0.899  -0.263  -2.287  -2.290\n 20.0 20.0 20.0\nmoja woda t=   3\n    1\n    1SOL     OW    1   0.099   0.837  -0.837  -2.240\n 20.0 20.0 20.0\nmoja woda t=   4\n    1\n    1SOL     OW    1   1.049   1.337  -0.587  -1.310\n 20.0 20.0 20.0\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5784419, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ly8clnEE1_k/AAAAAAAAAAI/AAAAAAAADzQ/xLF5tY2A4H0/photo.jpg?sz=128", "display_name": "Marta Wisniewska", "link": "https://stackoverflow.com/users/5784419/marta-wisniewska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 34799878, "answer_count": 1, "score": 1, "last_activity_date": 1467624962, "creation_date": 1452803802, "last_edit_date": 1452805426, "question_id": 34799244, "link": "https://stackoverflow.com/questions/34799244/perl-sort-numbers-in-column-in-order", "title": "perl: sort numbers in column in order", "body": "<p>I'd like to sort my numbers in the last column, $en in reverse order (from the smallest to the greater value). More, I specified my numbers. They reach 0 and be only negative.</p>\n\n<p>My script is following:</p>\n\n<pre><code>!/usr/bin/perl -w\n\nuse strict;\n\nmy $list=$ARGV[0];\n\n\nopen(LST,$list) or die;\n\nmy $time=0;\n\nmy @id_table;\nmy @nr_table;\nmy @energy;\n\nopen(GRO,\"&gt;waters.gro\") or die;\n\nwhile(&lt;LST&gt;) {\n  my $pdb_file=$_;\n  chomp $pdb_file;\n  my $pdb_id=substr $pdb_file,0,4;\n  open(PDB,$pdb_file) or die;\n  while(&lt;PDB&gt;) {\n      my $line=$_;\n      my ($w_id, $x, $y, $z, $en) = (split(/\\s+/, $line))[1, 5, 6, 7, 8];\n      next if $en &gt;= 0;\n      my @energy = sort {$b &lt;=&gt; $a} $en;\n      print GRO \"moja woda t=   $time \\n\";\n      printf(GRO \"%5d\\n\",1);\n      printf(GRO \"    1SOL     OW    1%8.3f%8.3f%8.3f%8.3f\\n\",$x/10.0,$y/10.0,$z/10.0,$en);\n      print GRO \" 20.0 20.0 20.0\\n\";\n      $id_table[$time]=$pdb_id;\n      $nr_table[$time]=$w_id;\n      $time++;\n  }\n  close PDB;\n}\nclose GRO;\n</code></pre>\n\n<p>Unfortunately, my idea for sorting doeasn't work. I am a beginner in Perls' scripting. In my output I'd like to order values in increasing order. </p>\n\n<p>Thank you in advance.\nMarta</p>\n\n<p>my input file:</p>\n\n<pre><code>ATOM    367  OH2 HOH   367      -2.010   7.370  -7.369   -6.52\nATOM    491  OH2 HOH   491       0.990   8.370  -8.369   -2.24\nATOM    652  OH2 HOH   652       5.490  -6.130   2.631    2.98\nATOM    689  OH2 HOH   689       6.490 -15.130   8.631   -4.23\nATOM    738  OH2 HOH   738       7.490  19.870  -8.369    3.38\nATOM    793  OH2 HOH   793       8.990  -2.630 -22.869   -2.29\nATOM    857  OH2 HOH   857      10.490  13.370  -5.869   -1.31\n.\n.\n.\n</code></pre>\n\n<p>After action I got output (without the sort line):</p>\n\n<pre><code>moja woda t=   0 \n        1\n        1SOL     OW    1  -0.344   0.437   0.633  -9.290\n     20.0 20.0 20.0\n    moja woda t=   1 \n        1\n        1SOL     OW    1  -0.194   0.537  -0.767  -2.990\n     20.0 20.0 20.0\n    moja woda t=   2 \n        1\n        1SOL     OW    1  -0.044   0.287   0.333   4.960\n     20.0 20.0 20.0\n    moja woda t=   3 \n        1\n        1SOL     OW    1   0.106   0.837  -0.817  -1.300\n     20.0 20.0 20.0\n    moja woda t=   4 \n    .\n    .\n    .\n</code></pre>\n\n<p>I'd like to order my data (for each line, which depend on $en column) in order. I think I should create a new array, but I don't know how exactly and where exactly I should put the sort in script.</p>\n"}, {"tags": ["perl", "macros", "spamassassin"], "comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1452804008, "post_id": 34799092, "comment_id": 57341749, "body": "If <code>sigtool</code> is written like a sane Unix utility, it supports <code>-</code> for stdin. If not, it might still support <code>&#47;dev&#47;stdin</code>. But if it really depends on the bloody thing being a file (e.g. being readable multiple times), you&#39;re out of luck."}, {"owner": {"reputation": 21, "user_id": 5791621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f0503916ef2df83b6b95597773dac?s=128&d=identicon&r=PG", "display_name": "Andy Dorman", "link": "https://stackoverflow.com/users/5791621/andy-dorman"}, "reply_to_user": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1452805835, "post_id": 34799092, "comment_id": 57342776, "body": "You can call and pass data to sigtool using a pipe, but to get it to output the VBA macro info it wants that silly file name.  We have gone to great lengths to keep our disk IO to an absolute minimum because in high volume spam filtering that turns out to be our limiting factor, but I may just have to bite the bullet and write the temp file."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1452852493, "post_id": 34799092, "comment_id": 57359483, "body": "You can try a memory-backed file system, e.g. <code>&#47;dev&#47;shm</code>."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1452852562, "post_id": 34799092, "comment_id": 57359525, "body": "And for output, <code>&#47;dev&#47;stdout</code> might work."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1452883672, "last_edit_date": 1452883672, "creation_date": 1452803813, "answer_id": 34799249, "question_id": 34799092, "link": "https://stackoverflow.com/questions/34799092/how-in-perl-to-pass-string-to-a-cli-program-that-expects-file-input/34799249#34799249", "title": "How in perl to pass string to a CLI program that expects file input", "body": "<p><code>sigtool</code> requires a file name. There are ways of obtaining a file name for a pipe on some systems, so you could still use a pipe. However, if you do, you'd end up with two pipes (one from which the child reads, and one to which the child writes), and that's a mess to handle.</p>\n\n<p>Normally, you'd have to use a non-blocking IO, asynchronous IO, a <code>select</code> loop or threads, but IPC::Run does us the favour of doing this for us!</p>\n\n<p>Processes normally start with 3 file handles open: STDIN (fd 0), STDOUT (fd 1) and STDERR (fd 2). But the child can inherit any number of other handles too. The following creates a pipe tied to the child's fd 3, and tells the child to read from that pipe through a Linux-specific virtual file system.</p>\n\n<pre><code>use IPC::Run qw( run );\nrun [ '/usr/bin/sigtool', \"--vba=/proc/self/fd/3\" ], '3&lt;', \\$doc, '&gt;', \\my $scan;\n</code></pre>\n\n<p>Using a <a href=\"http://search.cpan.org/perldoc?File::Temp\" rel=\"nofollow\">temporary file</a> is quite simple, but it's put to shame by IPC::Run!</p>\n"}], "owner": {"reputation": 21, "user_id": 5791621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e91f0503916ef2df83b6b95597773dac?s=128&d=identicon&r=PG", "display_name": "Andy Dorman", "link": "https://stackoverflow.com/users/5791621/andy-dorman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1452883672, "creation_date": 1452803258, "question_id": 34799092, "link": "https://stackoverflow.com/questions/34799092/how-in-perl-to-pass-string-to-a-cli-program-that-expects-file-input", "title": "How in perl to pass string to a CLI program that expects file input", "body": "<p>I am trying to build a SpamAssassin test that uses ClamAV's CLI tool, sigtool, to detect when an attached MS Office legacy file like an .xls or .doc that MAY have a macro, actually has an executable macro.</p>\n\n<p>It is easy enough to call sigtool in perl and pass it a filename to be scanned like this</p>\n\n<pre><code>my $filename = \"email_attach\";\nmy $scan = `/usr/bin/sigtool --vba=\"$filename\"`;\nif ($scan =~ /autoopen/i ) {\n  print \"Scanning $file: INFECTED VBA\\n\";\n}\n</code></pre>\n\n<p>However, as a SpamAssassin test I already have the email attachments in memory as variables passed to my test.  So I do not want to take the time to write each attachment to disk and then tell sigtool to go read it.</p>\n\n<p>I have researched the entire Ch 16 of Programming Perl and Perl Cookbook on Interprocess Communications and Process Management and Communication, and there is a TON of info there, but I did not see anything that addressed streaming your internal perl program data as input to an external application that is looking for a path/filename to be passed as a command line argument.</p>\n\n<p>Thank you for any thoughts on how to accomplish this.  Or if anyone knows of a simpler way to detect a VBA macro or executable in the MS Office legacy files, that would be fine as well.</p>\n"}, {"tags": ["perl", "catalyst", "strawberry-perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452803240, "post_id": 34798684, "comment_id": 57341297, "body": "I&#39;m curious if Test::TCP is failing for the same reason as in <a href=\"https://github.com/tokuhirom/Test-TCP/issues/37\" rel=\"nofollow noreferrer\">this ticket</a>. Can you run <code>cpan Test::TCP</code> and edit the full test output into your question?"}, {"owner": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "edited": false, "score": 0, "creation_date": 1452805641, "post_id": 34798684, "comment_id": 57342689, "body": "v6 error does look similar but how do I apply that patch?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452806822, "post_id": 34798684, "comment_id": 57343338, "body": "Hmm, it looks like a <a href=\"https://github.com/tokuhirom/Test-TCP/issues/43\" rel=\"nofollow noreferrer\">different ticket</a> with what seems to be the same issue is still open, and is happening even with the latest version of Test::TCP (2.14)."}], "owner": {"reputation": 83, "user_id": 5791283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c960b82317f94381b8fada48a66c346?s=128&d=identicon&r=PG&f=1", "display_name": "nchuang", "link": "https://stackoverflow.com/users/5791283/nchuang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1452805607, "creation_date": 1452801859, "last_edit_date": 1452805607, "question_id": 34798684, "link": "https://stackoverflow.com/questions/34798684/cannot-install-catalyst-5-9-on-windows-10", "title": "cannot install Catalyst 5.9 on Windows 10", "body": "<p>This is another attempt to be more direct with my question. I am having extreme difficult getting Strawberry Perl 5.22 64bit on Windows 10 ready for simple web development. </p>\n\n<p>I first started with <code>cpanm Catalyst::Devel</code> and that failed to install a group of dependencies:</p>\n\n<pre><code>==&gt; Found dependencies: Plack::Test, Plack::Builder, Plack::Middleware, Plack::Util\n! Installing the dependencies failed: Module 'Plack::Test' is not installed, Module 'Plack::Middleware' is not installed, Module 'Plack::Builder' is not installed, Module 'Plack::Util' is not installed\n! Bailing out the installation for Plack-Middleware-RemoveRedundantBody-0.05.\n! Installing the dependencies failed: Module 'Plack::Middleware::IIS6ScriptNameFix' is not installed, Module 'Plack::Middleware::ContentLength' is not installed, Module 'Plack::Test::ExternalServer' is not installed, Module 'Plack::Middleware::HTTPExceptions' is not installed, Module 'Plack::Middleware::ReverseProxy' is not installed, Module 'Plack::Middleware::MethodOverride' is not installed, Module 'Plack::Request::Upload' is not installed, Module 'Plack::Middleware::FixMissingBodyInRedirect' is not installed, Module 'Plack::Middleware::LighttpdScriptNameFix' is not installed, Module 'Plack::Middleware::RemoveRedundantBody' is not installed, Module 'Plack::Middleware::Conditional' is not installed, Module 'Plack::Middleware::Head' is not installed, Module 'Plack' is not installed, Module 'Plack::Middleware::IIS7KeepAliveFix' is not installed\n! Bailing out the installation for Catalyst-Runtime-5.90103.\n</code></pre>\n\n<p>And since Plack seemed to be a culprit I ran <code>cpan Plack</code> which led to this error report:</p>\n\n<pre><code>t/01_simple.t                (Wstat: 65280 Tests: 2 Failed: 1)\n  Failed test:  2\n  Non-zero exit status: 255\n  Parse errors: No plan found in TAP output\nt/11_net_empty_port.t        (Wstat: 256 Tests: 4 Failed: 1)\n  Failed test:  4\n  Non-zero exit status: 1\nFiles=14, Tests=117, 87 wallclock secs ( 0.08 usr +  0.05 sys =  0.12 CPU)\nResult: FAIL\nFailed 2/14 test programs. 2/117 subtests failed.\ndmake.exe:  Error code 255, while making 'test_dynamic'\n  TOKUHIROM/Test-TCP-2.14.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports TOKUHIROM/Test-TCP-2.14.tar.gz\nStopping: 'install' failed for 'Test::TCP'.\n</code></pre>\n\n<p>This is output for <code>cpan Test::TCP</code>:</p>\n\n<pre><code>C:\\Strawberry&gt;cpan Test::TCP\nLoading internal null logger. Install Log::Log4perl for logging messages\nCPAN: CPAN::SQLite loaded ok (v0.211)\nDatabase was generated on Thu, 14 Jan 2016 18:19:06 GMT  \nRunning install for module 'Test::TCP'\nCPAN: Digest::SHA loaded ok (v5.95)\nCPAN: Compress::Zlib loaded ok (v2.069)\nChecksum for C:\\STRAWB~1\\cpan\\sources\\authors\\id\\T\\TO\\TOKUHIROM\\Test-TCP-2.14.tar.gz ok\nCPAN: Archive::Tar loaded ok (v2.04)\nCPAN: File::Temp loaded ok (v0.2304)\nCPAN: YAML::XS loaded ok (v0.59)\nCPAN: CPAN::Meta::Requirements loaded ok (v2.140)\nCPAN: Parse::CPAN::Meta loaded ok (v1.4417)\nCPAN: CPAN::Meta loaded ok (v2.150005)\nCPAN: Module::CoreList loaded ok (v5.20151220)\nConfiguring T/TO/TOKUHIROM/Test-TCP-2.14.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for Test::TCP\nWriting MYMETA.yml and MYMETA.json\n  TOKUHIROM/Test-TCP-2.14.tar.gz\n  C:\\Strawberry\\perl\\bin\\perl.exe Makefile.PL -- OK\nRunning make for T/TO/TOKUHIROM/Test-TCP-2.14.tar.gz\ncp lib/Test/TCP.pm blib\\lib\\Test\\TCP.pm\ncp lib/Test/TCP/CheckPort.pm blib\\lib\\Test\\TCP\\CheckPort.pm\ncp lib/Net/EmptyPort.pm blib\\lib\\Net\\EmptyPort.pm\n  TOKUHIROM/Test-TCP-2.14.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe -- OK\nRunning make test\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib\\lib', 'blib\\arch')\" t/*.t\nt/00_compile.t ................. 1/1 # Test::More: 1.001014\nt/00_compile.t ................. ok\nt/01_simple.t .................. 1/? cannot open port: ::1:51108 at C:\\STRAWB~1\\cpan\\build\\Test-TCP-2.14-tzPh8E\\blib\\lib/Test/TCP.pm line 54.\n    # Child (v6) exited without calling finalize()\n#   Failed test 'v6'\nt/01_simple.t .................. 2/? #   at C:/Strawberry/perl/lib/Test/Builder.pm line 279.\n# Tests were run but no plan was declared and done_testing() was not seen.\n# Looks like your test exited with 255 just after 2.\nt/01_simple.t .................. Dubious, test returned 255 (wstat 65280, 0xff00)\nFailed 1/2 subtests\nt/02_abrt.t .................... skipped: win32 doesn't support embedded function named dump()\nt/03_return_when_sigterm.t ..... ok\nt/04_die.t ..................... ok\nt/05_sigint.t .................. skipped: this test requires SIGUSR1\nt/06_nest.t .................... ok\nt/07_optional.t ................ ok\nt/08_exit.t .................... ok\nt/09_fork.t .................... ok\nt/10_oo.t ...................... ok\nt/11_net_empty_port.t .......... 3/?\n    #   Failed test 'port is open'\n    #   at t/11_net_empty_port.t line 22.\n    # Looks like you failed 1 test of 4.\n    #   Failed test 'v6'\nt/11_net_empty_port.t .......... 4/? #   at t/11_net_empty_port.t line 37.\n# Looks like you failed 1 test of 4.\nt/11_net_empty_port.t .......... Dubious, test returned 1 (wstat 256, 0x100)\nFailed 1/4 subtests\nt/12_pass_wait_port_options.t .. ok\nt/13_undef_port.t .............. ok\nTest Summary Report\nt/01_simple.t                (Wstat: 65280 Tests: 2 Failed: 1)\n  Failed test:  2\n  Non-zero exit status: 255\n  Parse errors: No plan found in TAP output\nt/11_net_empty_port.t        (Wstat: 256 Tests: 4 Failed: 1)\n  Failed test:  4\n  Non-zero exit status: 1\nFiles=14, Tests=117, 88 wallclock secs ( 0.05 usr +  0.02 sys =  0.06 CPU)\nResult: FAIL\nFailed 2/14 test programs. 2/117 subtests failed.\ndmake.exe:  Error code 255, while making 'test_dynamic'\n  TOKUHIROM/Test-TCP-2.14.tar.gz\n  C:\\STRAWB~1\\c\\bin\\dmake.exe test -- NOT OK\n//hint// to see the cpan-testers results for installing this module, try:\n  reports TOKUHIROM/Test-TCP-2.14.tar.gz\nStopping: 'install' failed for 'Test::TCP'.\n</code></pre>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 21144, "user_id": 478656, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fd656a5e8d2a51290877d695649456ad?s=128&d=identicon&r=PG", "display_name": "TessellatingHeckler", "link": "https://stackoverflow.com/users/478656/tessellatingheckler"}, "edited": false, "score": 1, "creation_date": 1452791944, "post_id": 34795521, "comment_id": 57334792, "body": "<i>I wrote a perl script using a loop to do this but because of the massive size it apparently crashes after a while.</i> - really? Were you trying to load it all into RAM at once? Are you sure the file doesn&#39;t have some lines in a completely different pattern?"}], "answers": [{"comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 2, "creation_date": 1452796497, "post_id": 34795699, "comment_id": 57337418, "body": "I&#39;d use <code>-v x=&quot;E5&quot;</code> for extra DRY-ness"}, {"owner": {"reputation": 1, "user_id": 5790885, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jbLAHz5UzUg/AAAAAAAAAAI/AAAAAAAAAMI/Q8JSN0tl5l0/photo.jpg?sz=128", "display_name": "Thomas te wierik", "link": "https://stackoverflow.com/users/5790885/thomas-te-wierik"}, "edited": false, "score": 0, "creation_date": 1452869784, "post_id": 34795699, "comment_id": 57369492, "body": "Gratitude! Works like a charm"}], "tags": [], "owner": {"reputation": 10152, "user_id": 2229272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oisED.png?s=128&g=1", "display_name": "jas", "link": "https://stackoverflow.com/users/2229272/jas"}, "is_accepted": false, "score": 7, "last_activity_date": 1452797519, "last_edit_date": 1452797519, "creation_date": 1452791806, "answer_id": 34795699, "question_id": 34795521, "link": "https://stackoverflow.com/questions/34795521/using-awk-to-remove-lines-based-on-value-of-4-columns/34795699#34795699", "title": "Using awk to remove lines based on value of 4 columns", "body": "<pre><code>$ awk '!($4 == \"E5\" &amp;&amp; $5 == \"E5\" &amp;&amp; $6 == \"E5\" &amp;&amp; $7 == \"E5\")' eee.txt\nchr10   200 400 E2  E1  E5  E3\nchr10   400 600 E5  E2  E5  E1\nchr10   800 1000    E4  E2  E5  E5\nchr10   1200    1400    E5  E5  E6  E3\n</code></pre>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>I actually find the above solution elegant in its lack of elegance, in that it shows how useful awk can be using just its most basic features; how directly it can express a straightforward problem like that given by OP. But the commenter makes a good point that using <code>-v</code> is an improvement for any but the most one-off of solutions:</p>\n\n<pre><code>awk -v val=E5 '!($4 == val &amp;&amp; $5 == val &amp;&amp; $6 == val &amp;&amp; $7 == val)' eee.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 3, "last_activity_date": 1452795923, "last_edit_date": 1452795923, "creation_date": 1452795621, "answer_id": 34796906, "question_id": 34795521, "link": "https://stackoverflow.com/questions/34795521/using-awk-to-remove-lines-based-on-value-of-4-columns/34796906#34796906", "title": "Using awk to remove lines based on value of 4 columns", "body": "<pre><code>$ awk '!/( +E5){4}$/' file\nchr10   200 400 E2  E1  E5  E3\nchr10   400 600 E5  E2  E5  E1\nchr10   800 1000    E4  E2  E5  E5\nchr10   1200    1400    E5  E5  E6  E3\n</code></pre>\n\n<p>You could even just use grep (or sed):</p>\n\n<pre><code>$ grep -Ev '( +E5){4}$' file\nchr10   200 400 E2  E1  E5  E3\nchr10   400 600 E5  E2  E5  E1\nchr10   800 1000    E4  E2  E5  E5\nchr10   1200    1400    E5  E5  E6  E3\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5790885, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jbLAHz5UzUg/AAAAAAAAAAI/AAAAAAAAAMI/Q8JSN0tl5l0/photo.jpg?sz=128", "display_name": "Thomas te wierik", "link": "https://stackoverflow.com/users/5790885/thomas-te-wierik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1333, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1452800734, "creation_date": 1452791254, "last_edit_date": 1452797762, "question_id": 34795521, "link": "https://stackoverflow.com/questions/34795521/using-awk-to-remove-lines-based-on-value-of-4-columns", "title": "Using awk to remove lines based on value of 4 columns", "body": "<p>I have a huge bedfile (millions of lines) and it's like this:</p>\n\n<pre><code>chr10   0   200 E5  E5  E5  E5\nchr10   200 400 E2  E1  E5  E3\nchr10   400 600 E5  E2  E5  E1\nchr10   600 800 E5  E5  E5  E5\nchr10   800 1000    E4  E2  E5  E5\nchr10   1000    1200    E5  E5  E5  E5\nchr10   1200    1400    E5  E5  E6  E3\n....\n</code></pre>\n\n<p>In this file I simply want to remove all the lines where column 4, 5, 6 and 7 have the value \"E5\".</p>\n\n<p>So the output of this example should be like this</p>\n\n<pre><code>chr10   200 400 E2  E1  E5  E3\nchr10   400 600 E5  E2  E5  E1\nchr10   800 1000    E4  E2  E5  E5\nchr10   1200    1400    E5  E5  E6  E3\n</code></pre>\n\n<p>It's probably very easy but I haven't been able to figure it out yet. I wrote a perl script using a loop to do this but because of the massive size it apparently crashes after a while. I've been looking around for an awk command to do this but couldn't find one that works.</p>\n\n<p>Does anyone have an idea how to do this easily?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1452800776, "post_id": 34796875, "comment_id": 57339827, "body": "Why would <code>system</code> replace <code>bash -c child.pl</code> with <code>perl child.pl</code> in the third case? And why does it not replace <code>sh -c child.pl</code> with <code>perl child.pl</code> in the fourth case? What could be the logic behind this?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1452801257, "post_id": 34796875, "comment_id": 57340138, "body": "Re &quot;<i>Why would <code>system</code> replace <code>bash -c child.pl</code> with <code>perl child.pl</code> in the third case?</i>&quot;, It doesn&#39;t. Perl launches <code>bash</code>, which <code>exec</code>utes <code>child.pl</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1452801302, "post_id": 34796875, "comment_id": 57340161, "body": "Re &quot;<i>why does it not replace <code>sh -c child.pl</code> with <code>perl child.pl</code> in the fourth case?</i>&quot;, Because it would be bad if it replaced what you asked to execute with something else."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1452801514, "post_id": 34796875, "comment_id": 57340282, "body": "Agree it would be bad.. but according to the output of <code>ps -o pid,ppid,pgrp,sid,cmd</code> it seemed like that happened"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1452801692, "post_id": 34796875, "comment_id": 57340387, "body": "That has no relation on the initial program that was running in that process (which was <code>parent.pl</code>). The process&#39;s cmd went from <code>perl parent.pl</code> to <code>bash -c child.pl</code> (when the child created by <code>system</code> called <code>exec</code>), and then to <code>perl child.pl</code> (when <code>bash</code> called <code>exec</code>)."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1452805223, "post_id": 34796875, "comment_id": 57342433, "body": "So at startup time, whenever the <code>perl</code> executable determines that its parent is <code>&#47;bin&#47;bash</code> or <code>bash</code> it does not start itself in a new process, but somehow replaces the parent <code>bash</code> using <code>exec</code>? Is this correct? And why is it done?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1452814005, "post_id": 34796875, "comment_id": 57346631, "body": "No, bash uses exec. You know that exec doesn&#39;t create a process, right? It changes what the current process executes."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1452799439, "last_edit_date": 1452799439, "creation_date": 1452795508, "answer_id": 34796875, "question_id": 34795478, "link": "https://stackoverflow.com/questions/34795478/propagation-of-signal-to-parent-when-using-system/34796875#34796875", "title": "Propagation of signal to parent when using system", "body": "<p>First, let's be aware of what is being executed.</p>\n\n<pre><code>system($shell_command)\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>system({ \"/bin/sh\" } \"/bin/sh\", \"-c\", $shell_command)\n</code></pre>\n\n<p>unless the shell command contains no shell meta-characters but whitespace, in which case</p>\n\n<pre><code>system($shell_command)\n</code></pre>\n\n<p>is short for</p>\n\n<pre><code>my @cmd = split(' ', $shell_command);\nsystem({ $cmd[0] } @cmd)\n</code></pre>\n\n<p>As such,</p>\n\n<pre><code>system(\"child.pl 'dummy'\")   is short for   system({ \"/bin/sh\" } \"/bin/sh\", \"-c\", \"child.pl 'dummy'\")\nsystem(\"child.pl\")           is short for   system({ \"child.pl\" } \"child.pl\")\nsystem(\"bash -c child.pl\")   is short for   system({ \"bash\" } \"bash\", \"-c\", \"child.pl\")\nsystem(\"sh -c child.pl\")     is short for   system({ \"sh\" } \"sh\", \"-c\", \"child.pl\")\n</code></pre>\n\n<p>Of note is that <code>bash</code> replaces itself with <code>child.pl</code> instead of spawning it in a separate process in this particular circumstance. That makes <code>child.pl</code> a direct child of <code>parent.pl</code> in the third case (just like the second case).</p>\n\n<hr>\n\n<p>Second, let's be aware of what Ctrl-C does.</p>\n\n<p>When Ctrl-C is pressed, the terminal sends SIGINT to every process that has that terminal as its controlling terminal. In other words, SIGINT is sent to every process of the session.</p>\n\n<p>As you can see by adding <code>system(\"ps -o pid,ppid,pgrp,sid,cmd\");</code> to <code>child.pl</code>, there are three or four processes in our session depending on the test case.</p>\n\n<ul>\n<li><code>child.pl</code>: <code>child.pl</code> handles SIGINT. It isn't killed by it.</li>\n<li>The shell started by <code>parent.pl</code> in test cases 1 and 4: The shell is killed by SIGINT.</li>\n<li><code>parent.pl</code>: <code>system</code> does the equivalent of <code>local $SIG{INT} = 'IGNORE';</code>, so it ignores SIGINT.</li>\n<li>The login shell that started <code>parent.pl</code>: It ignores SIGINT, but I'm not sure why. I'm guessing it's because it's an interactive shell.</li>\n</ul>\n\n<hr>\n\n<p>So, this is what you are observing:</p>\n\n<ul>\n<li>When the (direct) child of <code>parent.pl</code> is <code>child.pl</code> [Test cases 2 and 3], the child (<code>child.pl</code>) does not die from SIGINT since it handles SIGINT.</li>\n<li>When the (direct) child of <code>parent.pl</code> is a shell [Test cases 1 and 4], the child (the shell) dies from SIGINT since non-interactive shells don't handle/ignore SIGINT.</li>\n</ul>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 1, "accepted_answer_id": 34796875, "answer_count": 1, "score": 2, "last_activity_date": 1452799439, "creation_date": 1452791094, "question_id": 34795478, "link": "https://stackoverflow.com/questions/34795478/propagation-of-signal-to-parent-when-using-system", "title": "Propagation of signal to parent when using system", "body": "<p>I have written a wrapper script that starts another script using <code>system()</code>. The child script traps <code>SIGINT</code> and processes the exception internally. Therefore, it should not propagate the <code>SIGINT</code> to its parent when it exits.. However, in some cases the parent still receives the <code>SIGINT</code>. For example (<code>parent.pl</code>):</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse POSIX ();\n\nmy @data = (q(child.pl 'dummy'), q(child.pl), q(bash -c child.pl), q(sh -c child.pl));\n\nfor ( @data ) {\n    say \"Running command '$_'..\";\n    my $res = system $_;\n    my $signal = $res &amp; 127;\n    my $rval = $res &gt;&gt; 8;\n    say \"Parent received return value: $rval\";\n    if ( $signal == POSIX::SIGINT ) {\n        say \"Parent received SIGINT\";\n    }\n}\n</code></pre>\n\n<p>and <code>child.pl</code>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\neval {\n    local $SIG{INT} = sub { die \"Aborted by user.\\n\" };\n    sleep 10;\n};\nif ( $@ ) {\n    print \"\\n\" . $@;\n    exit 0;\n}\nsay \"Timed out..\";\nexit 1;\n</code></pre>\n\n<p>If I press <kbd>CTRL-C</kbd> before the time out, the output looks like:</p>\n\n<pre><code>Running command 'child.pl 'dummy''..\n^C\nAborted by user.\nParent received return value: 0\nParent received SIGINT\nRunning command 'child.pl'..\n^C\nAborted by user.\nParent received return value: 0\nRunning command 'bash -c child.pl'..\n^C\nAborted by user.\nParent received return value: 0\nRunning command 'sh -c child.pl'..\n^C\nAborted by user.\nParent received return value: 0\nParent received SIGINT\n</code></pre>\n\n<p>So in the first and last case the parent receives the <code>SIGINT</code>, whereas for the second and third cases it does not.</p>\n\n<p>What is the reason for this? And how can it be fixed such that the SIGINT is not propagated for the first and last case?</p>\n\n<p>( I suspect it is related to the type of Shell, i.e. <code>sh</code> vs <code>bash</code> )</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1452791018, "post_id": 34795054, "comment_id": 57334234, "body": "Do you realise that you usually don&#39;t have to explicitly create a hash element? You may be able to write just <code>return $seen_elements{$key}++</code> depending on what the hash is supposed to contain"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452797203, "post_id": 34795054, "comment_id": 57337830, "body": "Or <code>return $seen_elements{$key} &#47;&#47;= 1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452790627, "post_id": 34795109, "comment_id": 57333937, "body": "<code>&#47;&#47;</code> is available in Perl 5.10.0 and up."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452790796, "post_id": 34795109, "comment_id": 57334068, "body": "That should probably be <code>\\%seen_elements</code>, but I realise that the OP&#39;s code is weird"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452791031, "post_id": 34795109, "comment_id": 57334247, "body": "@Borodin I was going to edit to tell OP that the <code>%seen_elements</code> in the first line is wrong, but I didn&#39;t even see that <code>$seen_elements</code> is passed. But anyway, since I wrote that, then saw the duplicate vote and hammered it, I should probably delete this answer anyway."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452791258, "post_id": 34795109, "comment_id": 57334386, "body": "I don&#39;t think that duplicate vote is quite on the mark because of the involvement of <code>return</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1452791544, "post_id": 34795109, "comment_id": 57334570, "body": "@Borodin I think it doesn&#39;t matter what&#39;s on the left of it. The expression itself is what counts here, and that much transfer should be acceptable imho ;-)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452791757, "post_id": 34795109, "comment_id": 57334689, "body": "I&#39;m just thinking about the subject line. If the requirement was to abbreviate <code>return $element if defined $element</code> then it would need a different solution"}, {"owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "edited": false, "score": 0, "creation_date": 1452792220, "post_id": 34795109, "comment_id": 57334974, "body": "I had considered // already, but wasn&#39;t certain it would work here.  I need to better figure out the order of operations as applied to //"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1452792399, "post_id": 34795109, "comment_id": 57335098, "body": "@ds it will evaluate the LHS, and if that is undefined it will evaluate the RHS. It will then pass the value returned from the RHS operation or the LHS operation to the <code>return</code>."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1452790046, "creation_date": 1452790046, "answer_id": 34795109, "question_id": 34795054, "link": "https://stackoverflow.com/questions/34795054/does-perl-have-a-syntax-for-return-if-defined/34795109#34795109", "title": "Does perl have a syntax for return if defined?", "body": "<p>Yes, kind of. You can use <code>//</code>, the <a href=\"http://perldoc.perl.org/perlop.html#Logical-Defined-Or\" rel=\"nofollow\">logical defined or</a>.</p>\n\n<pre><code>sub foo {\n  return $seen_elements{$key} // generate_element($key, $seen_elements);\n}\n</code></pre>\n\n<p>This thing is like <code>||</code> (which is <em>or</em>), but tests for <em>definedness</em> instead of <em>truethiness</em>, so it will return an empty string, but not <code>undef</code>.</p>\n"}], "owner": {"reputation": 5479, "user_id": 897272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/efdd0371ee7b983ab3b858ea92653aeb?s=128&d=identicon&r=PG", "display_name": "dsollen", "link": "https://stackoverflow.com/users/897272/dsollen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 0, "closed_date": 1452790199, "accepted_answer_id": 34795109, "answer_count": 1, "score": 0, "last_activity_date": 1452790050, "creation_date": 1452789907, "question_id": 34795054, "link": "https://stackoverflow.com/questions/34795054/does-perl-have-a-syntax-for-return-if-defined", "closed_reason": "Duplicate", "title": "Does perl have a syntax for return if defined?", "body": "<p>I'm looking to see if there is a perl shorthand, it seems there <em>always</em> is a perl shorthand, for returning if a value is defined.  I'm thinking about the common case where I need to check some hash to see if something exists, return if it does, otherwise generate the value.  I can do something like this:</p>\n\n<pre><code>$element = %seen_elements{$key};\n\nreturn $element if defined $element;\n\n#element doesn't exist so make it\nreturn generate_element($key, $seen_elements);\n</code></pre>\n\n<p>Is there a shorthand for that second line, that avoids my having to reference element twice?  Most languages I wouldn't ask, but with so much syntactic sugar in perl I'm curious if they already made one for a minor but common usecase like this.</p>\n"}, {"tags": ["perl", "shell", "unix"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 6, "creation_date": 1452786965, "post_id": 34793738, "comment_id": 57331360, "body": "I can&#39;t easily see the difference \u2014 it isn&#39;t visible in the unscrolled data and isn&#39;t obvious in the scrolled data (it&#39;s actually that <code>oId &quot;CUFF.14.1&quot;;</code> needs to become <code>oId &quot;CUFF.14.1_sample1&quot;;</code>).  Please redo the question, chopping out many more columns and explaining clearly what&#39;s the difference between the input and the output, and where the extra information comes from.  Was the sample data file called <code>sample1</code>?  What if it was called <code>sample1.txt</code> or otherwise had suffixes?  What about if it had a path <code>&#47;path&#47;to&#47;sample1</code>?   <b>What have <i>you</i> tried</b> (and what was the problem)?"}, {"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "edited": false, "score": 0, "creation_date": 1452791479, "post_id": 34793738, "comment_id": 57334531, "body": "Hello All, I have edited my question..Thanks for the comments...."}], "answers": [{"comments": [{"owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "edited": false, "score": 0, "creation_date": 1452793264, "post_id": 34796039, "comment_id": 57335599, "body": "Thank so much it worked..:)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1452792759, "creation_date": 1452792759, "answer_id": 34796039, "question_id": 34793738, "link": "https://stackoverflow.com/questions/34793738/how-to-append-the-file-name-to-a-character-string-in-the-file/34796039#34796039", "title": "How to append the file name to a character string in the file", "body": "<p><code>sed</code> - and particularly regular expressions -  don't work like that. Have a read of <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow\"><code>perlre</code></a> for how to write regular expressions.</p>\n\n<p>In particular - <code>*</code> doesn't work the same as you might be used to - it's a pattern quantifier, not a wild card. It applies to the previous \"symbol\". So in your expression, you're replacing 'CUF' followed by zero or more instances of \"F\". So it will match \"CUF\", \"CUFF\" and \"CUFFFFFFFF\". </p>\n\n<p>But not \"CUFF.1\". </p>\n\n<p>And on the right hand side of the expression, it's not even doing that. </p>\n\n<p>Maybe you want:</p>\n\n<pre><code>perl -pe 's/(CUFF[^\"]+)/$1_sample/g' sample_1 \n</code></pre>\n\n<p>Use <code>-i</code> if you want to inplace edit. </p>\n\n<p>(Note - using perl because it definitely works. You can certainly do something quite similar with <code>sed</code> though). </p>\n"}], "owner": {"reputation": 1739, "user_id": 1017373, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/886b798dad527c0a22b68afae6a18d78?s=128&d=identicon&r=PG", "display_name": "user1017373", "link": "https://stackoverflow.com/users/1017373/user1017373"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 1, "closed_date": 1452866631, "accepted_answer_id": 34796039, "answer_count": 1, "score": -2, "last_activity_date": 1452792759, "creation_date": 1452786358, "last_edit_date": 1452791634, "question_id": 34793738, "link": "https://stackoverflow.com/questions/34793738/how-to-append-the-file-name-to-a-character-string-in-the-file", "closed_reason": "Needs details or clarity", "title": "How to append the file name to a character string in the file", "body": "<p>I have a couple of files in the following format:</p>\n\n<pre><code>chr10   Cufflinks   transcript  92828   95504   1   -   .   gene_id \"CUFF.1\"; transcript_id \"ENST00000447903\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\"; full_read_support \"no\";\nchr10   Cufflinks   exon    92828   94054   1   -   .   gene_id \"CUFF.1\"; transcript_id \"ENST00000447903\"; exon_number \"1\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\nchr10   Cufflinks   exon    94555   94665   1   -   .   gene_id \"CUFF.1\"; transcript_id \"ENST00000447903\"; exon_number \"2\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\nchr10   Cufflinks   exon    94744   94852   1   -   .   gene_id \"CUFF.1\"; transcript_id \"ENST00000447903\"; exon_number \"3\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\nchr10   Cufflinks   exon    95348   95504   1   -   .   gene_id \"CUFF.1\"; transcript_id \"ENST00000447903\"; exon_number \"4\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\n</code></pre>\n\n<p>What I am trying to achieve is to get a file name appended to the character <code>CUFF*</code> in the input file. The name of my file is <em>sample_1</em>, so the output should look as follows:</p>\n\n<pre><code>chr10   Cufflinks   transcript  92828   95504   1   -   .   gene_id \"CUFF.1_sample_1\"; transcript_id \"ENST00000447903\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\"; full_read_support \"no\";\nchr10   Cufflinks   exon    92828   94054   1   -   .   gene_id \"CUFF.1_sample_1\"; transcript_id \"ENST00000447903\"; exon_number \"1\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\nchr10   Cufflinks   exon    94555   94665   1   -   .   gene_id \"CUFF.1_sample_1\"; transcript_id \"ENST00000447903\"; exon_number \"2\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\nchr10   Cufflinks   exon    94744   94852   1   -   .   gene_id \"CUFF.1_sample_1\"; transcript_id \"ENST00000447903\"; exon_number \"3\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\nchr10   Cufflinks   exon    95348   95504   1   -   .   gene_id \"CUFF.1_sample_1\"; transcript_id \"ENST00000447903\"; exon_number \"4\"; FPKM \"0.0000000000\"; frac \"0.000000\"; conf_lo \"0.000000\"; conf_hi \"0.000000\"; cov \"0.000000\";\n</code></pre>\n\n<p>This is what I've tried so far:</p>\n\n<pre><code>cat sample_1 | sed 's/CUFF*/CUFF*_sample1/g'\n</code></pre>\n\n<p>Any Unix one-liner would be great...</p>\n"}, {"tags": ["excel", "image", "perl", "parsing"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452784504, "post_id": 34792918, "comment_id": 57329523, "body": "Can&#39;t you just copy a whole worksheet and paste it into a new workbook?"}, {"owner": {"reputation": 11, "user_id": 2479463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yvv1s.jpg?s=128&g=1", "display_name": "Sire Hugolin", "link": "https://stackoverflow.com/users/2479463/sire-hugolin"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452784567, "post_id": 34792918, "comment_id": 57329569, "body": "And how to do so  with Perl? Win32::Ole can&#39;t be used because Excel isn&#39;t installed on the server who creaates the files."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1452784982, "post_id": 34792918, "comment_id": 57329865, "body": "<a href=\"http://www.perlmonks.org/?node_id=1152725\" rel=\"nofollow noreferrer\">Crossposted</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1452785157, "post_id": 34792918, "comment_id": 57329989, "body": "Copy your files off the server?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 2479463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yvv1s.jpg?s=128&g=1", "display_name": "Sire Hugolin", "link": "https://stackoverflow.com/users/2479463/sire-hugolin"}, "is_accepted": true, "score": 0, "last_activity_date": 1453322511, "creation_date": 1453322511, "answer_id": 34910092, "question_id": 34792918, "link": "https://stackoverflow.com/questions/34792918/perl-spreadsheetparsexlsx-how-to-get-images-from-excel-file/34910092#34910092", "title": "Perl Spreadsheet::ParseXLSX how to get images from Excel file?", "body": "<p>I'm ashamed, but I did go through this without Perl. I've used a .vbs file and Excel macro.</p>\n\n<p>Sorry.</p>\n\n<p>For those who might want to know, here is the .vbs :</p>\n\n<pre><code>Option Explicit\n\nOn Error Resume Next\n\nExcelMacroExample\n\n\nSub ExcelMacroExample() \n    Dim xlApp \n    Dim xlBook \n\n    Set xlApp = CreateObject(\"Excel.Application\") \n    xlApp.Visible = false\n\n    Set xlBook = xlApp.Workbooks.Open(\"U:\\D\u00c9VELOPPEMENT\\GENESYS\\Perl\\Tests\\test_vba.xlsm\",0,True) \n\n    xlApp.Run \"PasserLesDonnees\"\n\n    xlBook.Saved = True\n    xlBook.Close\n    xlApp.Quit \n\n    xlApp.Visible = true\n\n    Set xlBook = Nothing \n    Set xlApp = Nothing \n\nEnd Sub\n</code></pre>\n\n<p>And here is the code in the Module section of the Excel file : </p>\n\n<pre><code>Sub PasserLesDonnees()\n    Dim x, NbFichiers As Integer\n    Dim ListeFichier() As Variant\n    Dim FichierSortie As String\n\n    ' calculer le nombre de fichiers \u00e0 combiner\n    NbFichiers = Range(\"A2\", Range(\"A2\").End(xlDown)).Rows.Count\n\n    ' Cacher Excel le temp que les cr\u00e9ations et d\u00e9placements aient lieu\n'    Application.Visible = False\n    ' Afficher la fen\u00eatre de progression\n    UserForm1.Show (0)\n    UserForm1.Label1.Caption = \"Transfert de \" &amp; NbFichiers &amp; \" fichiers en cours d'ex\u00e9cution\"\n\n    ' Classer les donn\u00e9es par fichier de sortie et positions\n    Columns(\"A:C\").Sort Key1:=Range(\"B2\"), Order1:=xlAscending, Key2:=Range(\"C2\"), Order2:=xlAscending, Header:=xlYes\n\n    ' Parcourir toutes les lignes\n    For x = 1 To NbFichiers\n        If FichierSortie &lt;&gt; Cells(x + 1, 2) Then\n            ReDim ListeFichier(0) As Variant\n            FichierSortie = Cells(x + 1, 2)\n        End If\n\n        ReDim Preserve ListeFichier(UBound(ListeFichier) + 1) As Variant\n        ' add value on the end of the array\n        ListeFichier(UBound(ListeFichier)) = Cells(x + 1, 1).Value\n\n        If (Cells(x + 1, 2) &lt;&gt; Cells(x + 2, 2)) Then\n            Combiner FichierSortie, ListeFichier\n        End If\n\n        progress (Int(x / NbFichiers * 100))\n    Next\n\n    Unload UserForm1\n'    Application.Visible = True\n\nEnd Sub\n\nSub Combiner(FichierSortie As String, ListeFichier As Variant)\n    ' D\u00e9truire le fichier de destination, \u00e0 modifier si on doit renommer ou garder...\n    DeleteFile (\"U:\\D\u00c9VELOPPEMENT\\GENESYS\\Perl\\Tests\\\" &amp; FichierSortie)\n\n    ' Tenter de faire disparaitre les messages...\n    Application.DisplayAlerts = False\n    Application.EnableEvents = False\n    Application.ScreenUpdating = True\n\n    ' Cr\u00e9er un nouveau fichier excel \u00e0 partir d'un template... qui est un fichier vide!\n    Set NewBook = Workbooks.Add(\"U:\\D\u00c9VELOPPEMENT\\GENESYS\\Perl\\Tests\\TemplateVide.xlsx\")\n\n    ' Passer \u00e0 travers la liste des fichiers et en faire les copies\n    For i = LBound(ListeFichier) + 1 To UBound(ListeFichier)\n        Set Wkb = Workbooks.Open(FileName:=\"U:\\D\u00c9VELOPPEMENT\\GENESYS\\Perl\\Tests\\\" &amp; ListeFichier(i), ReadOnly:=True)   ' Ouvrir le fichier d'origine\n        For Each WS In Wkb.Worksheets                           ' Pour chacune des pages\n            WS.Copy After:=NewBook.Sheets(NewBook.Sheets.Count) ' La copier en derni\u00e8re position dans le nouveau fichier\n        Next WS\n        Wkb.Close False                                         ' Fermer le fichier d'origine\n    Next i\n\n    NewBook.Sheets(\"ToDelete\").Delete   ' \u00c9liminer la page vide du Template de base\n\n    ' Enregistrer le fichier sous le bon nom\n    NewBook.SaveAs (\"U:\\D\u00c9VELOPPEMENT\\GENESYS\\Perl\\Tests\\\" &amp; FichierSortie)\n    ' Fermer le fichier\n    NewBook.Close (True)\n\n    ' Replacer les options d'Excel comme il faut\n    Application.DisplayAlerts = True\n    Application.EnableEvents = True\n    Application.ScreenUpdating = True\n\nEnd Sub\n\nSub DeleteFile(ByVal FileToDelete As String)\n   If FileExists(FileToDelete) Then\n      SetAttr FileToDelete, vbNormal\n      Kill FileToDelete\n   End If\nEnd Sub\n\nFunction FileExists(ByVal FileToTest As String) As Boolean\n   FileExists = (Dir(FileToTest) &lt;&gt; \"\")\nEnd Function\n\nSub progress(pctCompl As Single)\n\nUserForm1.Text.Caption = pctCompl &amp; \"% fait\"\nUserForm1.Bar.Width = pctCompl * 3\n\nDoEvents\n\nEnd Sub\n</code></pre>\n\n<p>Sorry for the french comment, I do live in Qu\u00e9bec! Speak, live and work in French.</p>\n"}], "owner": {"reputation": 11, "user_id": 2479463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yvv1s.jpg?s=128&g=1", "display_name": "Sire Hugolin", "link": "https://stackoverflow.com/users/2479463/sire-hugolin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 34910092, "answer_count": 1, "score": 0, "last_activity_date": 1453322511, "creation_date": 1452784255, "last_edit_date": 1452785125, "question_id": 34792918, "link": "https://stackoverflow.com/questions/34792918/perl-spreadsheetparsexlsx-how-to-get-images-from-excel-file", "title": "Perl Spreadsheet::ParseXLSX how to get images from Excel file?", "body": "<p>I'm trying to merge several single-worksheet Excel files into one multi-worksheet huge file.</p>\n\n<p>I am using <a href=\"http://metacpan.org/module/Spreadsheet::ParseXLSX\" rel=\"nofollow\"><code>Spreadsheet::ParseXLSX</code></a>, <a href=\"http://metacpan.org/module/Spreadsheet::ParseExcel::Format\" rel=\"nofollow\"><code>Spreadsheet::ParseExcel::Format</code></a> and <a href=\"http://metacpan.org/module/Excel::Writer::XLSX\" rel=\"nofollow\"><code>Excel::Writer::XLSX</code></a> to achieve this. It works correctly, but only for data. I can't do anything with the images.</p>\n\n<p>Here is the wonderful but incomplete code:</p>\n\n<pre><code># Pour une meilleure programmation\nuse strict;\nuse warnings;\n\n$|++;\n\nuse Spreadsheet::ParseXLSX;\nuse Spreadsheet::ParseExcel::Format;\nuse Excel::Writer::XLSX;\n\nmy @files = ( \"file1.xlsx\", \"file2.xlsx\", \"file3.xlsx\" );\n\nmy $fichier_sortie = \"out_merged.xlsx\";\nmy $out_workbook   = Excel::Writer::XLSX-&gt;new($fichier_sortie);\n\nmy $parser = Spreadsheet::ParseXLSX-&gt;new;\n\nfor my $f ( 0 .. $#files ) {\n\n    print \"=== \" . $files[$f] . \" =======================\\n\";\n\n    my $in_workbook = $parser-&gt;parse( $files[$f] );\n\n    if ( ! defined $in_workbook ) {\n        die $parser-&gt;error(), \".\\n\";\n    }\n\n    my $in_worksheet = $in_workbook-&gt;worksheet(0);\n\n    my $sheet\n        = $out_workbook-&gt;add_worksheet( $in_worksheet-&gt;get_name() );\n\n    my ( $row_min, $row_max ) = $in_worksheet-&gt;row_range();\n    my ( $col_min, $col_max ) = $in_worksheet-&gt;col_range();\n\n    for my $row ( $row_min .. $row_max ) {\n        for my $col ( $col_min .. $col_max ) {\n            my $cell = $in_worksheet-&gt;get_cell( $row, $col );\n            next unless $cell;\n\n            my $in_format  = $cell-&gt;get_format();\n            my $out_format = $out_workbook-&gt;add_format();\n            CopyFormat( $in_format, $out_format );\n            $sheet-&gt;write( $row, $col, $cell-&gt;value(), $out_format );\n        }\n    }\n\n    if ( defined( $in_worksheet-&gt;get_merged_areas() ) ) {\n        my $merged_areas = $in_worksheet-&gt;get_merged_areas();\n\n        my $cnt = 0;\n        while ( defined( $merged_areas-&gt;[$cnt] ) ) {\n\n            my $first_row = $merged_areas-&gt;[$cnt]-&gt;[0];\n            my $first_col = $merged_areas-&gt;[$cnt]-&gt;[1];\n            my $last_row  = $merged_areas-&gt;[$cnt]-&gt;[2];\n            my $last_col  = $merged_areas-&gt;[$cnt]-&gt;[3];\n\n            my $cell       = $in_worksheet-&gt;get_cell( $first_row, $first_col );\n            my $in_format  = $cell-&gt;get_format();\n            my $out_format = $out_workbook-&gt;add_format();\n            CopyFormat( $in_format, $out_format );\n\n            $sheet-&gt;merge_range(\n                $first_row, $first_col,     $last_row,\n                $last_col,  $cell-&gt;value(), $out_format\n            );\n            $cnt++;\n        }\n    }\n}\n\n$out_workbook-&gt;close();\n\n## SUBS #######################################################################\nsub CopyFormat() {\n    use Switch;\n\n    my $in_format  = shift;\n    my $out_format = shift;\n\n    # Font\n    my $font = $in_format-&gt;{Font};\n    $out_format-&gt;set_font( $font-&gt;{Name} );\n    $out_format-&gt;set_bold( $font-&gt;{Bold} );\n    $out_format-&gt;set_italic( $font-&gt;{Italic} );\n    $out_format-&gt;set_size( $font-&gt;{Height} );\n    $out_format-&gt;set_underline( $font-&gt;{UnderlineStyle} );\n    $out_format-&gt;set_color( $font-&gt;{Color} );\n    $out_format-&gt;set_font_strikeout( $font-&gt;{Strikeout} );\n    $out_format-&gt;set_font_script( $font-&gt;{Super} );\n\n    #Format\n    my $align;\n    switch ( $in_format-&gt;{AlignH} ) {\n\n        #case 0 { $align = 'No alignment'; }\n        case 1 { $align = 'left'; }\n        case 2 { $align = 'center'; }\n        case 3 { $align = 'right'; }\n        case 4 { $align = 'fill'; }\n        case 5 { $align = 'justify'; }\n        case 6 { $align = 'center_across'; }\n\n        #case 7 { $align = 'Distributed/Equal spaced'; }\n        else { $align = ''; }\n    }\n    $out_format-&gt;set_align($align);\n\n    switch ( $in_format-&gt;{AlignV} ) {\n        case 0 { $align = 'top'; }\n        case 1 { $align = 'vcenter'; }\n        case 2 { $align = 'bottom'; }\n        case 3 { $align = 'vjustify'; }\n\n        #case 4 { $align='Distributed/Equal spaced';}\n        else { $align = ''; }\n    }\n    $out_format-&gt;set_align($align);\n\n    $out_format-&gt;set_indent( $in_format-&gt;{Indent} );\n    $out_format-&gt;set_text_wrap( $in_format-&gt;{Wrap} );\n    $out_format-&gt;set_shrink( $in_format-&gt;{Shrink} );\n\n    my $rotation = $in_format-&gt;{Rotate};\n    if ( ! defined($rotation) ) {\n        $rotation = 0;\n    }\n    elsif ( $rotation == 255 ) {\n        $rotation = 270;\n    }\n    $out_format-&gt;set_rotation($rotation);\n    $out_format-&gt;set_text_justlast( $in_format-&gt;{JustLast} );\n\n    #   $in_format-&gt;{ReadDir});\n\n    my $border = $in_format-&gt;{BdrStyle};\n    $out_format-&gt;set_bottom( $border-&gt;[3] );\n    $out_format-&gt;set_top( $border-&gt;[2] );\n    $out_format-&gt;set_left( $border-&gt;[0] );\n    $out_format-&gt;set_right( $border-&gt;[1] );\n\n    my $border_color = $in_format-&gt;{BdrColor};\n    if ( defined( $border_color-&gt;[3] ) ) {\n        $out_format-&gt;set_bottom_color( $border_color-&gt;[3] );\n    }\n\n    if ( defined( $border_color-&gt;[2] ) ) {\n        $out_format-&gt;set_top_color( $border_color-&gt;[2] );\n    }\n\n    if ( defined( $border_color-&gt;[0] ) ) {\n        $out_format-&gt;set_left_color( $border_color-&gt;[0] );\n    }\n\n    if ( defined( $border_color-&gt;[1] ) ) {\n        $out_format-&gt;set_right_color( $border_color-&gt;[1] );\n    }\n\n    #   (my$kind, my$style, my$color)=$in_format-&gt;{BdrDiag};\n    #   $out_format-&gt;set_diag_type($kind);\n    #   $out_format-&gt;set_diag_border($style);\n    #   $out_format-&gt;set_diag_color($color);\n\n    my $fill = $in_format-&gt;{Fill};\n    $out_format-&gt;set_pattern( $fill-&gt;[0] );\n    if ( $fill-&gt;[0] != 0 ) {\n        $out_format-&gt;set_fg_color( $fill-&gt;[2] );\n        $out_format-&gt;set_bg_color( $fill-&gt;[1] );\n    }\n\n    #   $in_format-&gt;{Lock});\n    #   $in_format-&gt;{Hidden});\n    #   $in_format-&gt;{Style});\n}\n</code></pre>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "reply_to_user": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1452783695, "post_id": 34792441, "comment_id": 57328885, "body": "No, I;ve just edit my topic :)"}, {"owner": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "edited": false, "score": 0, "creation_date": 1452784469, "post_id": 34792441, "comment_id": 57329488, "body": "I&#39;ve try to think like the example that shown here: <a href=\"http://stackoverflow.com/questions/14492590/using-bash-sed-awk-to-extract-rows-and-columns-in-csv-files\" title=\"using bash sed awk to extract rows and columns in csv files\">stackoverflow.com/questions/14492590/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "edited": false, "score": 0, "creation_date": 1452785016, "post_id": 34793042, "comment_id": 57329895, "body": "Thanks for your help! If i try to simulate it to bash script like:  #!/bin/bash COL=$1 ROW=$2 while IFS=&#39;,&#39; read -r col1 col2 col3; do \t    echo -e $col1 done &lt; file.csv IFS=$&#39; \\t\\n&#39;  but as you can see this is not what i need to do... i don&#39;t know how to tell the bash script to get only the relevant col a row.. Can you assist?"}, {"owner": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "edited": false, "score": 0, "creation_date": 1452785621, "post_id": 34793042, "comment_id": 57330351, "body": "I try to do what you did but in bash script"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "edited": false, "score": 0, "creation_date": 1452785878, "post_id": 34793042, "comment_id": 57330527, "body": "@user5789818, Have fun."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "edited": false, "score": 0, "creation_date": 1452787527, "post_id": 34793042, "comment_id": 57331772, "body": "@user5789818: Hint. You can&#39;t. There is no <code>Text::CSV_XS</code> module for bash"}, {"owner": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "edited": false, "score": 0, "creation_date": 1452899452, "post_id": 34793042, "comment_id": 57385331, "body": "I know :) I&#39;m trying to do what this perl script does but in bash script.. I managed only get a headache until now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1452903592, "post_id": 34793042, "comment_id": 57386548, "body": "What did you expect?  Rewriting 1000 lines of C code into bash code is not usually a piece of cake"}, {"owner": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "edited": false, "score": 0, "creation_date": 1452904922, "post_id": 34793042, "comment_id": 57386881, "body": "I&#39;m sure there is a way to do that in bash script.. and I&#39;ll try until I will found the way :) I don&#39;t give up so fast :) :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1452904967, "post_id": 34793042, "comment_id": 57386890, "body": "Of course there is. Any program can be written in bash. Borodin was exaggerating. It doesn&#39;t mean it&#39;s easy. Again, covering 1000 lines of C code into bash is not easy. It works so so so much longer. How far have you gotten with your parser?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1452784564, "creation_date": 1452784564, "answer_id": 34793042, "question_id": 34792441, "link": "https://stackoverflow.com/questions/34792441/read-csv-from-bash-or-perl-script/34793042#34793042", "title": "Read CSV from bash or perl script", "body": "<p><code>a.pl</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Text::CSV_XS qw( );\n\nmy $row_num = shift;\nmy $col_num = shift;\n\nmy $csv = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 1 });\n\nwhile (my $row = $csv-&gt;getline(\\*ARGV)) {\n    next if --$row_num;\n\n    print($row-&gt;[$col_num-1], \"\\n\");\n    last;\n}\n</code></pre>\n\n<p><code>a.csv</code>: (What you posted isn't a valid CSV, though Text::CSV_XS probably could handle it with the right options.)</p>\n\n<pre><code>A,B,C\nA,\"B,C\",D\n\"A,B\",C,D\nA,B,\"C,D\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ./a.pl 1 1 a.csv\nA\n\n$ ./a.pl 2 2 a.csv\nB,C\n\n$ ./a.pl 3 1 a.csv\nA,B\n\n$ ./a.pl 3 3 a.csv\nD\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5789826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36b4b5d73c36288828a47b94d6df0118?s=128&d=identicon&r=PG&f=1", "display_name": "user5789818", "link": "https://stackoverflow.com/users/5789826/user5789818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "closed_date": 1453107700, "answer_count": 1, "score": -7, "last_activity_date": 1452784564, "creation_date": 1452782918, "last_edit_date": 1452783982, "question_id": 34792441, "link": "https://stackoverflow.com/questions/34792441/read-csv-from-bash-or-perl-script", "closed_reason": "Duplicate", "title": "Read CSV from bash or perl script", "body": "<p>I have simple simple CSV file as follow (3 columns and 4 rows for that example): </p>\n\n<pre><code>A       , B      , C\nA       , \u201dB,C\u201d  , D\n\u201cA,B\u201d   , C      , D\nA       , B      , \u201dC,D\u201d\n</code></pre>\n\n<p>How to create script that I can enter the column and the row number and it print me back the content?</p>\n\n<p>Note! that the comma between the quotation marks as a parameter and not as a separator..</p>\n\n<p>edit:\nWanted output:\nfor arguments: 1,1 (col,row) the given answer will be: A\nfor arguments: 2,2 (col,row) the given answer will be: B,C\nfor arguments: 1,3 (col,row) the given answer will be: A,B\nfor arguments: 3,3 (col,row) the given answer will be: D</p>\n\n<p>Thanks in advanced</p>\n"}, {"tags": ["bash", "perl", "unix", "shebang", "env"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1452779319, "post_id": 34791031, "comment_id": 57325637, "body": "#!/usr/bin/env isn&#39;t a perl command. Look up <code>shebangs</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1452780107, "post_id": 34791031, "comment_id": 57326204, "body": "Can you run the shebang line through a hexdump? <code>head -n1 myscript.pl | xxd</code>."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1452780334, "post_id": 34791031, "comment_id": 57326358, "body": "Does the file /usr/bin/env exist on your system, and with execute permissions: <code>ls -l &#47;usr&#47;bin&#47;env</code>"}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "edited": false, "score": 0, "creation_date": 1452781387, "post_id": 34791031, "comment_id": 57327085, "body": "Can you, please, post the result of this command &quot;echo $PATH&quot;?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1452784180, "post_id": 34791031, "comment_id": 57329243, "body": "Maybe this is your problem? <a href=\"http://askubuntu.com/q/372672\">askubuntu.com/q/372672</a>"}, {"owner": {"reputation": 1409, "user_id": 2619018, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3c384945d0f758ddd5bec80e81c6ba8?s=128&d=identicon&r=PG&f=1", "display_name": "cs_alumnus", "link": "https://stackoverflow.com/users/2619018/cs-alumnus"}, "edited": false, "score": 0, "creation_date": 1500065468, "post_id": 34791031, "comment_id": 77194570, "body": "would upvote twice if I could.  Hit this error in some 3rd party scientist code and had no idea they had formatted the files for DOS."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1452784013, "post_id": 34791857, "comment_id": 57329112, "body": "The OP already knows what <code>&#47;usr&#47;bin&#47;env</code> does. They&#39;re asking why they get an error when they use it in their script. This doesn&#39;t answer their question."}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452784424, "post_id": 34791857, "comment_id": 57329448, "body": "There are actually two questions: One that asks if somebody can explain what exactly is the difference when running it on command line or in a script and the other being the reason why his script is not running."}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452785227, "post_id": 34791857, "comment_id": 57330036, "body": "Doesn&#39;t that explain the difference between command line and script call to Perl?"}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452785408, "post_id": 34791857, "comment_id": 57330196, "body": "I haven&#39;t sorted his script problem, but I definitely tried to be helpful by answering one of his questions. Down voting for that?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452785434, "post_id": 34791857, "comment_id": 57330210, "body": "I downvoted because you didn&#39;t answer the question. You explain the difference between <code>&#47;usr&#47;bin&#47;perl</code> and <code>&#47;usr&#47;bin&#47;env perl</code>. The OP needs to know why <code>&#47;usr&#47;bin&#47;env perl</code> works on the command line but fails when used in the shebang."}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452785481, "post_id": 34791857, "comment_id": 57330241, "body": "His words: Can somebody explain me what exactly is the difference when I run it on command line or in a script?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1452785553, "post_id": 34791857, "comment_id": 57330296, "body": "In other words, &quot;why do I get the error &#39;/usr/bin/env: No such file or directory&#39; when I run my script, but not when I run <code>&#47;usr&#47;bin&#47;env perl</code> on the command line?&quot; See <a href=\"http://stackoverflow.com/a/34793290/176646\">cjm&#39;s answer</a>, which actually addresses the OP&#39;s problem."}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1452785837, "post_id": 34791857, "comment_id": 57330499, "body": "The OP&#39;s problem are actually two problems, one might be line ending due to Windows to Linux file transfer, the other is understanding the difference between calling perl through script and command line. Why do I get down voted because I tried to be helpful with the first problem? Wasn&#39;t that a valid question as well?"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 1, "creation_date": 1452787032, "post_id": 34791857, "comment_id": 57331411, "body": "When answering SO questions that are unclear, or that contain multiple questions or both implicit and explicit questions, a useful strategy might be to re-state the question you&#39;re answering (concisely!) in a quote (<code>&gt;</code>) at the top of your answer, and be clear about what parts you&#39;re <i>not</i> answering. If you fail to answer all questions in a question, you&#39;ll probably not get a checkmark. But you may get upvoted for the parts that you answer correctly. (In this case, though, you did answer the only actual question in the question. +1 for that.)"}, {"owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1452787314, "post_id": 34791857, "comment_id": 57331623, "body": "Thanks for the explanation @ghoti, will do as advised."}], "tags": [], "owner": {"reputation": 1119, "user_id": 1691719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/uSmtz.png?s=128&g=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/1691719/alan"}, "is_accepted": false, "score": 1, "last_activity_date": 1452787404, "last_edit_date": 1452787404, "creation_date": 1452781203, "answer_id": 34791857, "question_id": 34791031, "link": "https://stackoverflow.com/questions/34791031/usr-bin-env-perl-does-work-as-command-but-not-in-perl-script/34791857#34791857", "title": "/usr/bin/env perl does work as command but not in perl script", "body": "<p>Answering the question:</p>\n\n<blockquote>\n  <p>Can somebody explain me what exactly is the difference when I run it on command line or in a script?</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/env perl\n</code></pre>\n\n<p>This is bascially telling the OS (that understands the shebang) to find the first \"perl\" executable in the list of $PATH, and exec that program by appending the current file name after the shebang. It doesn't invokes \"perl\" directly, like this shebang you'll find in most perl programs:</p>\n\n<pre><code>#!/usr/bin/perl\n</code></pre>\n\n<p>This is because most UNIX-like systems (especially Linux) comes with perl installed at /usr/bin/perl. Some UNIX does not have perl by default, but can be easily installed latter on. Just that they might end up being at /usr/local/bin/perl. Usually perl programmers call them \"system perl\".</p>\n\n<p>The first will take the fisrt perl in your $PATH and the second will take the one that ships with your system. </p>\n\n<p>If you don't specify the full path on the shell then it also takes whatever is first in your $PATH.</p>\n"}, {"comments": [{"owner": {"reputation": 6314, "user_id": 496965, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/2aba9c8643796cc68b941b4889a556ef?s=128&d=identicon&r=PG", "display_name": "Florian M&#252;ller", "link": "https://stackoverflow.com/users/496965/florian-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1452787916, "post_id": 34793290, "comment_id": 57332048, "body": "Thanks! Solved it, was a mistake in a newly installed software that I forgot to change!"}, {"owner": {"reputation": 1409, "user_id": 2619018, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e3c384945d0f758ddd5bec80e81c6ba8?s=128&d=identicon&r=PG&f=1", "display_name": "cs_alumnus", "link": "https://stackoverflow.com/users/2619018/cs-alumnus"}, "edited": false, "score": 0, "creation_date": 1500065556, "post_id": 34793290, "comment_id": 77194607, "body": "worth noting that calling file shows this issue explicitly as it shows the trailing \\015 character after perl"}], "tags": [], "owner": {"reputation": 59411, "user_id": 8355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8d0099a2574719d7a67eab012851bf9b?s=128&d=identicon&r=PG", "display_name": "cjm", "link": "https://stackoverflow.com/users/8355/cjm"}, "is_accepted": true, "score": 9, "last_activity_date": 1452785232, "creation_date": 1452785232, "answer_id": 34793290, "question_id": 34791031, "link": "https://stackoverflow.com/questions/34791031/usr-bin-env-perl-does-work-as-command-but-not-in-perl-script/34793290#34793290", "title": "/usr/bin/env perl does work as command but not in perl script", "body": "<p>The most likely cause is that you somehow got DOS line endings (CRLF) in <code>myscript.pl</code>.  This causes <code>env</code> to search for a file named <code>perl^M</code> (where <code>^M</code> represents a CR character), and you don't have one.</p>\n"}], "owner": {"reputation": 6314, "user_id": 496965, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/2aba9c8643796cc68b941b4889a556ef?s=128&d=identicon&r=PG", "display_name": "Florian M&#252;ller", "link": "https://stackoverflow.com/users/496965/florian-m%c3%bcller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5496, "favorite_count": 0, "accepted_answer_id": 34793290, "answer_count": 2, "score": 2, "last_activity_date": 1452787404, "creation_date": 1452778539, "last_edit_date": 1452786472, "question_id": 34791031, "link": "https://stackoverflow.com/questions/34791031/usr-bin-env-perl-does-work-as-command-but-not-in-perl-script", "title": "/usr/bin/env perl does work as command but not in perl script", "body": "<p>I've got a perl script which contains the first line as follows:</p>\n\n<pre><code>#!/usr/bin/env perl\n</code></pre>\n\n<p>I already read that this is executed to find perl in the environment. But now, when I execute this on the command line <code>/usr/bin/env perl</code>, perl itself gets executed (which is located at <code>/usr/bin/perl</code>). But when I start the script using <code>./myscript.pl</code>, it shows the following error:</p>\n\n<pre><code>/usr/bin/env: No such file or directory\n</code></pre>\n\n<p>This results out of the fact that it can't find <code>perl</code>, because this error also appears when I type <code>/usr/bin/env xxxxxx</code>.</p>\n\n<p>Can somebody explain me what exactly is the difference when I run it on command line or in a script?</p>\n"}, {"tags": ["perl", "postgresql", "catalyst"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 1802192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YWVJp.jpg?s=128&g=1", "display_name": "initself", "link": "https://stackoverflow.com/users/1802192/initself"}, "is_accepted": false, "score": 0, "last_activity_date": 1528412388, "creation_date": 1528412388, "answer_id": 50751233, "question_id": 34788928, "link": "https://stackoverflow.com/questions/34788928/how-to-connecting-rapidapp-to-postgresql-with-utf-8-enabled/50751233#50751233", "title": "How to connecting RapidApp to PostgreSQL, with utf-8 enabled", "body": "<p>Your schema will need to be configured to support UTF-8.  Here's a helpful set of things to try: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/13138698/how-to-properly-use-utf-8-encoded-data-from-schema-inside-catalyst-app\">How to properly use UTF-8-encoded data from Schema inside Catalyst app?\n</a></p>\n"}], "owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528412388, "creation_date": 1452772272, "question_id": 34788928, "link": "https://stackoverflow.com/questions/34788928/how-to-connecting-rapidapp-to-postgresql-with-utf-8-enabled", "title": "How to connecting RapidApp to PostgreSQL, with utf-8 enabled", "body": "<p>I'm creating a simple CRUD interface to a database, and I'm trying RapidApp.</p>\n\n<p>I have an existing database, which I connect to with existing Moose-based code. There is a <em>complication</em> in that there is UTF-8 text in the database (eg 'Encyclop\u00e9die m\u00e9dico-chirurgicale. T\u00e9cnicas quir\u00fargicas. Aparato digestivo')</p>\n\n<p>My Moose-based code works just fine: data goes in &amp; data comes out... and everyone is happy. </p>\n\n<p>In my existing Moose code, the connector is:</p>\n\n<pre><code>$schema = My::Service::Schema-&gt;connect( \n      'dbi:Pg:dbname=my_db;host=my.host.name;port=1234',\n      'me',\n      'secret',\n      { pg_enable_utf8 =&gt; 1 }\n     );\n</code></pre>\n\n<p>When I set about connecting RapidApp, I first tried a simple <code>rdbic.pl</code> command, but that doesn't pick up the UTF-8 strings. In an attempt to enforce UTF-8-ness, I've created the following:</p>\n\n<pre><code>use Plack::Runner;\nuse Plack::App::RapidApp::rDbic;\nmy $cnf = {\n    connect_info =&gt; {\n      dsn      =&gt; 'dbi:Pg:dbname=my_db;host=my.host.name;port=1234',\n      user     =&gt; 'me',\n      password =&gt; 'secret',\n      { pg_enable_utf8 =&gt; 1 },\n    },\n    schema_class     =&gt; 'My::Service::Schema'\n};\nmy $App = Plack::App::RapidApp::rDbic-&gt;new( $cnf );\nmy $psgi =  $App-&gt;to_app;\nmy $runner = Plack::Runner-&gt;new;\n$runner-&gt;parse_options('--port', '5678');\n$runner-&gt;run($psgi);\n</code></pre>\n\n<p>(which is pretty much <code>rdbic.pl</code>, compressed to one specific thing)</p>\n\n<p>However - I'm getting mal-formed strings (eg: 'Encyclop\u00c3\u00a9die m\u00c3\u00a9dico-chirurgicale. T\u00c3\u00a9cnicas quir\u00c3\u00bargicas. Aparato digestivo')</p>\n\n<p>Having fought to get the correct text INTO the database, I know the database is correct... so how do I connect RapidApp to get UTF-8 back out?</p>\n"}, {"tags": ["perl", "lsf"], "comments": [{"owner": {"reputation": 77, "user_id": 1722239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468c5f994157b07c18df31fb8ae342d4?s=128&d=identicon&r=PG", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/1722239/abhishek"}, "edited": false, "score": 0, "creation_date": 1452770985, "post_id": 34788400, "comment_id": 57320240, "body": "Some additional information: I am running on RHEL6, with Perl 5.16.2."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 1722239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468c5f994157b07c18df31fb8ae342d4?s=128&d=identicon&r=PG", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/1722239/abhishek"}, "edited": false, "score": 0, "creation_date": 1452785253, "post_id": 34790610, "comment_id": 57330056, "body": "Thank you for the answer. This is useful information. I will check with my LSF admin about LSF settings you suggest. Meanwhile, I will also explore ways to track processes through session IDs in Perl as I see every process for a given job has same session ID."}], "tags": [], "owner": {"reputation": 2097, "user_id": 2769487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lzm16.png?s=128&g=1", "display_name": "Squirrel", "link": "https://stackoverflow.com/users/2769487/squirrel"}, "is_accepted": true, "score": 3, "last_activity_date": 1452777371, "creation_date": 1452777371, "answer_id": 34790610, "question_id": 34788400, "link": "https://stackoverflow.com/questions/34788400/pass-sigtstp-signal-to-all-processes-in-a-job-in-lsf/34790610#34790610", "title": "Pass SIGTSTP signal to all processes in a job in LSF", "body": "<blockquote>\n  <p>I tried to see if I can send the signals to the Perl script's own PGID, <em>but the license process starts its own process group.</em></p>\n</blockquote>\n\n<p>This is likely your problem right here.  LSF keeps track of \"processes running within the job\" by process group.  If your job spawns a process that runs within its own process group (say by daemonizing itself) then it essentially is a runaway process out of LSF's control -- it becomes your job's responsibility to manage it.</p>\n\n<p>For reference, see the section on \"Detached processes\" <a href=\"http://www-01.ibm.com/support/knowledgecenter/SSETD4_9.1.2/lsf_admin/troubleshooting_common_problems_lsf.html?lang=en\" rel=\"nofollow\">here</a>.</p>\n\n<p>As for options:</p>\n\n<ol>\n<li>I think the cgroups tracking functionality helps in a lot of these cases, you can ask your admin if <code>LSF_PROCESS_TRACKING</code> and <code>LSF_LINUX_CGROUP_ACCT</code> are set in lsf.conf.  If they aren't, then you can ask him to set them and see if that helps for your case (you need to make sure the host you're running on supports cgroups).  In 9.1.2 this feature is turned on at installation time, so this option might not actually help you for various reasons (your hosts don't have cgroups enabled for example).</li>\n<li>Manage the license process yourself.  If you can find out the PID/PGID of the license process from within your <code>perl</code> script, you can install custom signal handlers for <code>SIGCONT</code>/<code>SIGSTP</code> in your script using <code>sigtrap</code> or the like and forward them to the license process yourself when your script receives them through <code>bkill</code>.  See <a href=\"http://perltricks.com/article/37/2013/8/18/Catch-and-Handle-Signals-in-Perl\" rel=\"nofollow\">here</a>.</li>\n</ol>\n"}], "owner": {"reputation": 77, "user_id": 1722239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/468c5f994157b07c18df31fb8ae342d4?s=128&d=identicon&r=PG", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/1722239/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 34790610, "answer_count": 1, "score": 3, "last_activity_date": 1452777371, "creation_date": 1452770697, "last_edit_date": 1452773812, "question_id": 34788400, "link": "https://stackoverflow.com/questions/34788400/pass-sigtstp-signal-to-all-processes-in-a-job-in-lsf", "title": "Pass SIGTSTP signal to all processes in a job in LSF", "body": "<p>The problem statement in short: Is there a way in LSF to pass a signal SIGCONT/SIGTSTP to all processes running within a job?</p>\n\n<p>I have a Perl wrapper script that runs on LSF (Version 9.1.2) and starts a tool (Source not available) on the same LSF machine as the Perl script.</p>\n\n<p>The tool starts 2 processes, one for license management and another for doing the actual work. It also supports an option where sending SIGSTSP/SIGCONT to both processes will release/reacquire the license (which is what I wish to achieve).</p>\n\n<p>Running <code>bkill -s SIGCONT &lt;JOB_ID&gt;</code> only resumes the tool process and not the license process, which is a problem.</p>\n\n<p>I tried to see if I can send the signals to the Perl script's own PGID, but the license process starts its own process group.</p>\n\n<p>Any suggestions to move forward through Perl or LSF options are welcome.</p>\n\n<p>Thanks,\nAbhishek</p>\n"}]