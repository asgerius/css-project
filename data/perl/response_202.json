[{"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542842751, "post_id": 53421449, "comment_id": 93718143, "body": "You forgot to include the code."}, {"owner": {"reputation": 597, "user_id": 3329922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5a259202daf0fdbe0defbcf192771f38?s=128&d=identicon&r=PG&f=1", "display_name": "Tony B", "link": "https://stackoverflow.com/users/3329922/tony-b"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542842990, "post_id": 53421449, "comment_id": 93718225, "body": "What I provided is the problem code snippet, the exact code that has the problem.  What else can I provide to help?  I was trying not to bog down the question with lots of code, keeping it simple."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542843327, "post_id": 53421449, "comment_id": 93718331, "body": "That code is just an assignment that updates a data structure. You did not describe how your data structure is converted to an XML document. You did not even describe which of the many available XML modules you are using."}, {"owner": {"reputation": 597, "user_id": 3329922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5a259202daf0fdbe0defbcf192771f38?s=128&d=identicon&r=PG&f=1", "display_name": "Tony B", "link": "https://stackoverflow.com/users/3329922/tony-b"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542843775, "post_id": 53421449, "comment_id": 93718450, "body": "Done.  What I don&#39;t understand is why simply adding &quot;AND remainingQuantityForReleaseStockingUm &gt; 0.000&quot; to the assignment fixes the resulting XML.  Hope I provided enough information."}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 3329922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5a259202daf0fdbe0defbcf192771f38?s=128&d=identicon&r=PG&f=1", "display_name": "Tony B", "link": "https://stackoverflow.com/users/3329922/tony-b"}, "edited": false, "score": 0, "creation_date": 1543014455, "post_id": 53422047, "comment_id": 93780091, "body": "Also, for anyone curious, obviously using &quot;1 &gt; 0&quot; works in my case as well.  I used that on the extreme off chance the other system I am talking to uses some weird version of SQL that does not treat &quot;&lt;&gt;&quot; as not equal.  Unlikely, but better safe than sorry and works in my case, producing &quot;good&quot; XML.  But mob idea did work excellently, so I approved his solution."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 0, "last_activity_date": 1542844206, "creation_date": 1542844206, "answer_id": 53422047, "question_id": 53421449, "link": "https://stackoverflow.com/questions/53421449/perl-xml-setting-tag-value-issue/53422047#53422047", "title": "perl XML setting tag value issue", "body": "<p><a href=\"https://metacpan.org/source/TMHARISH/XML-Smart-1.78/lib/XML/Smart.pm#L1107\" rel=\"nofollow noreferrer\"><code>XML::Smart::_data_type</code></a> contains this code:</p>\n\n<pre><code>  return 3 if( $data &amp;&amp; $data =~ /&lt;.*?&gt;/s    ) ;\n</code></pre>\n\n<p>where data type \"3\" indicates that the XML element should be rendered as CDATA. If that is the \"good XML\", it is only that way on accident.</p>\n\n<p>I guess you could trick <code>XML::Smart</code> into rendering all your SQL queries as CDATA with an extra clause like</p>\n\n<pre><code>SELECT ... WHERE (... AND ... AND 1&lt;&gt;0) ORDER BY ...\n</code></pre>\n"}], "owner": {"reputation": 597, "user_id": 3329922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5a259202daf0fdbe0defbcf192771f38?s=128&d=identicon&r=PG&f=1", "display_name": "Tony B", "link": "https://stackoverflow.com/users/3329922/tony-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 53422047, "answer_count": 1, "score": 1, "last_activity_date": 1542844206, "creation_date": 1542840135, "last_edit_date": 1542843499, "question_id": 53421449, "link": "https://stackoverflow.com/questions/53421449/perl-xml-setting-tag-value-issue", "title": "perl XML setting tag value issue", "body": "<p>I have some code that creates XML differently based on a very simple string of characters.  Does anyone know why?</p>\n\n<p>First of all, code snippet ( to clarify things for @mob ), with the lines AROUND the problem line:</p>\n\n<pre><code>my $XML = XML::Smart-&gt;new();\n\nmy $mylogin = {\n    userId =&gt; $SQLUser,\n    password =&gt; $SQLPass,\n    maxIdle =&gt; '900000',\n    properties =&gt; '&lt;hidden for privacy concerns&gt;'\n};\n$XML-&gt;{'System-Link'}{Login} = $mylogin;\n\nmy $request = {\n    sessionHandle =&gt; '*current',\n    workHandle =&gt; '*new',\n    broker =&gt; 'EJB',\n    maxIdle =&gt; '900000'\n};\n$XML-&gt;{'System-Link'}{Request} = $request;\n\nmy $querylist = {\n    name =&gt; 'queryListPurchaseOrderItemRelease_SLTOKEN',\n    domainClass =&gt; '&lt;hidden for privacy concerns&gt;',\n    includeMetaData =&gt; 'true',\n    maxReturned =&gt; '1'\n};\n$XML-&gt;{'System-Link'}{Request}{QueryList} = $querylist;\n### PROBLEM LINE GOES HERE, just subsitute one of below lines here\n\n## Muck with the DTD cause 'EMPTY' causes problems, this is an issue w/ the implementation of XML::Smart\nopen $dtd, '&lt;', 'SystemLinkRequest.dtd';\nmy $dtdContent = do { local $/; &lt;$dtd&gt; };\nclose $dtd;\n$dtdContent =~ s/EMPTY//g;\n\n$XML-&gt;apply_dtd($dtdContent);\n\n## Turn off output of DTD and meta tag generation\nmy $xmldata = $XML-&gt;data(nometagen =&gt; 1, nodtd =&gt; 1);\n$xmldata =~ s/\\?&gt;/?&gt;\\n&lt;!DOCTYPE System-Link SYSTEM 'SystemLinkRequest.dtd'&gt;/m;\n## Store a clean version (no passwords) in the local XML file\nmy $xmldata_clean = $xmldata;\n$xmldata_clean =~ s/userId\\s*=\\s*\\\"$SQLUser\\\"\\s+password\\s*=\\s*\\\"$SQLPass\\\"/userId=\\\"REMOVED\\\" password=\\\"REMOVED\\\"/g;\n\nmy $xml_filename = $RELEASE . \"-\" . time . \".xml\";\nprint LOGF \"{DEBUG} [\" . localtime(time) . \"] \\tBuilding XML Request COMPLETED\\n\";\nprint LOGF \"{DEBUG} [\" . localtime(time) . \"] \\tWriting XML Request to Request_$xml_filename STARTED\\n\";\n\nopen $RequestLogfile, '&gt;', \"$logsDir/XML/Update/Request_$xml_filename\";\nprint $RequestLogfile \"\\n--------------- QUERY REQUEST ---------------\\n\";\nprint $RequestLogfile $xmldata;\nclose $RequestLogfile;\n</code></pre>\n\n<p>Works:</p>\n\n<p><code>$XML-&gt;{'System-Link'}{Request}{QueryList}{Pql} = \"SELECT order,line,item,release,dueToDockDate,dueToStockDate,userFieldAmount1 WHERE (releaseStatus &lt; '50' AND userFieldAmount1 = '$RELEASE' AND relatedQueryPurchaseOrder.orderStatus &lt; '40' AND remainingQuantityForReleaseStockingUm &gt; 0.000) ORDER BY order,line,release\";</code></p>\n\n<p>Does not work:</p>\n\n<p><code>$XML-&gt;{'System-Link'}{Request}{QueryList}{Pql} = \"SELECT order,line,item,release,dueToDockDate,dueToStockDate,userFieldAmount1 WHERE (releaseStatus &lt; '50' AND userFieldAmount1 = '$RELEASE' AND relatedQueryPurchaseOrder.orderStatus &lt; '40') ORDER BY order,line,release\";</code></p>\n\n<p>Now the XML I get.</p>\n\n<p>Good XML ( Pql tag with CDATA ):</p>\n\n<pre><code>&lt;QueryList domainClass=\"com.mapics.pm.PoItemRelease\" includeMetaData=\"true\" maxReturned=\"1\" name=\"queryListPurchaseOrderItemRelease_SLTOKEN\"&gt;\n&lt;Pql&gt;&lt;![CDATA[SELECT order,line,item,release,dueToDockDate,dueToStockDate,userFieldAmount1 WHERE (releaseStatus &lt; '50' AND userFieldAmount1 = '4001166' AND relatedQueryPurchaseOrder.orderStatus &lt; '40' AND remainingQuantityForReleaseStockingUm &gt; 0.000) ORDER BY order,line,release]]&gt;&lt;/Pql&gt;\n&lt;/QueryList&gt;\n</code></pre>\n\n<p>Bad XML ( Pql attribute ):</p>\n\n<pre><code>&lt;QueryList Pql=\"SELECT order,line,item,release,dueToDockDate,dueToStockDate,userFieldAmount1 WHERE (releaseStatus &amp;lt; '50' AND userFieldAmount1 = '4001166' AND relatedQueryPurchaseOrder.orderStatus &amp;lt; '40' ) ORDER BY order,line,release\" domainClass=\"com.mapics.pm.PoItemRelease\" includeMetaData=\"true\" maxReturned=\"1\" name=\"queryListPurchaseOrderItemRelease_SLTOKEN\"/&gt;\n</code></pre>\n\n<p>The only difference between the two lines of code is that the one that works has <code>AND remainingQuantityForReleaseStockingUm &gt; 0.000</code></p>\n\n<p>So why does that impact the resulting XML?</p>\n"}, {"tags": ["windows", "perl", "encoding"], "answers": [{"tags": [], "owner": {"reputation": 8567, "user_id": 188691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b008c9884164fc36f772c8aa2a87bd4?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/188691/tim"}, "is_accepted": true, "score": 2, "last_activity_date": 1542838716, "creation_date": 1542838716, "answer_id": 53421229, "question_id": 53416436, "link": "https://stackoverflow.com/questions/53416436/how-to-handle-encoding-when-using-win32consoleansi-in-a-module/53421229#53421229", "title": "How to handle encoding when using Win32::Console::ANSI in a module?", "body": "<p><a href=\"https://metacpan.org/pod/Win32::Console::ANSI#Escape-sequences-for-Select-Character-Set\" rel=\"nofollow noreferrer\">The documentation</a> outlines the reason this is the default:</p>\n\n<blockquote>\n  <p>It is useful because one types the script with a Windows-based editor\n  (using a Windows codepage) and the script prints its messages on the\n  console using another codepage: without translation, the characters\n  with a code greatest than 127 are different and the printed messages\n  may be not readable.</p>\n</blockquote>\n\n<p>That seems to be a sensible default for an ANSI console emulation, as it aims to avoid unreadable messages. If, when people are using your CPAN module, they can reasonably expect an ANSI console, maybe it's wise to leave the defaults as they are. What you might want to do is allow people to choose the behaviour as an option when they load/configure your module. But in any case, make it really clear in the documentation what you're doing and why.</p>\n"}], "owner": {"reputation": 21019, "user_id": 198183, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/52f281a988bae754991af26224c796af?s=128&d=identicon&r=PG", "display_name": "sid_com", "link": "https://stackoverflow.com/users/198183/sid-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 53421229, "answer_count": 1, "score": -1, "last_activity_date": 1542838716, "creation_date": 1542817488, "question_id": 53416436, "link": "https://stackoverflow.com/questions/53416436/how-to-handle-encoding-when-using-win32consoleansi-in-a-module", "title": "How to handle encoding when using Win32::Console::ANSI in a module?", "body": "<p><a href=\"https://metacpan.org/pod/Win32::Console::ANSI\" rel=\"nofollow noreferrer\">Win32::Console::ANSI</a> enables by default a ANSI(Win) to OEM(Dos) mapping. When I use <code>Win32::Console::ANSI</code> in a CPAN module should I keep this mapping or should I disable this mapping with <a href=\"https://metacpan.org/pod/Win32::Console::ANSI#Escape-sequences-for-Select-Character-Set\" rel=\"nofollow noreferrer\">\\e(U</a>? </p>\n"}, {"tags": ["linux", "perl", "cluster-computing", "perl-module"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1542808047, "post_id": 53413331, "comment_id": 93701438, "body": "Have you checked that <code>&#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;Parallel&#47;ForkManager.pm</code> exists and is readable by the user that tries to <code>use</code> it? Also, did you mean <code>use lib &quot;&#47;usr&#47;share&#47;perl5&#47;vendor_perl&quot;</code>? This is vastly different from <code>use lib &quot;usr&#47;share&#47;perl5&#47;vendor_perl&quot;</code> ! If it &quot;works from the shell&quot; as you say, what is the output of <code>which perl</code>? Compare that to the shebang line of your script."}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 1, "creation_date": 1542810265, "post_id": 53413331, "comment_id": 93702816, "body": "Inspect <code>&#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;Parallel&#47;ForkManager.pm</code>, it probably doesn&#39;t have the content you think it does."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1542815470, "post_id": 53413331, "comment_id": 93705968, "body": "If you run perl in the shell - which version do you get? It&#39;s not all that uncommon for a <code>&#47;usr&#47;local&#47;bin&#47;perl</code> to exist and be used first in the path."}, {"owner": {"reputation": 1, "user_id": 10675310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5f8c663af0539e33f77fac8bd2fedb?s=128&d=identicon&r=PG&f=1", "display_name": "hamsterbug", "link": "https://stackoverflow.com/users/10675310/hamsterbug"}, "edited": false, "score": 0, "creation_date": 1542820912, "post_id": 53413331, "comment_id": 93709220, "body": "<code>which perl</code> gives <code>&#47;usr&#47;bin&#47;perl</code> <code>&#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;Parallel&#47;ForkManager.pm</code> exists and it is readable <code>-rw-r--r--</code>. I checked it out with <code>cat</code> and it looks fine.  As for <code>use lib &quot;&#47;usr&#47;share&#47;perl5&#47;vendor_perl&quot;</code> and <code>use lib &quot;usr&#47;share&#47;perl5&#47;vendor_perl&quot;</code>neither works, got the same error with both."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1542821555, "post_id": 53413331, "comment_id": 93709509, "body": "I think Perl stops looking through <code>@INC</code> at the first unreadable directory. Maybe that&#39;s what happens here?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1542839359, "post_id": 53413331, "comment_id": 93717064, "body": "Note that your use line is missing the leading <code>&#39;&#47;&#39;</code>, should be <code>&#47;usr&#47;share&#47;perl5&#47;vendor_perl</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542842193, "post_id": 53413331, "comment_id": 93717962, "body": "Please provide the output of <code>\\ls -ld &#47;usr &#47;usr&#47;share &#47;usr&#47;share&#47;perl5 &#47;usr&#47;share&#47;perl5&#47;vendor_perl &#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;Parallel &#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;Parallel&#47;ForkManager.pm</code> (run from the shell) and <code>system(&#39;ls -ld &#47;usr &#47;usr&#47;share &#47;usr&#47;share&#47;perl5 &#47;usr&#47;share&#47;perl5&#47;vendor_perl &#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;Parallel &#47;usr&#47;share&#47;perl5&#47;vendor_perl&#47;Parallel&#47;ForkManager.pm &gt;&amp;2&#39;)</code> (added to the script)"}, {"owner": {"reputation": 1, "user_id": 10675310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5f8c663af0539e33f77fac8bd2fedb?s=128&d=identicon&r=PG&f=1", "display_name": "hamsterbug", "link": "https://stackoverflow.com/users/10675310/hamsterbug"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542872845, "post_id": 53413331, "comment_id": 93726310, "body": "@ikegami I appended the output to the original question. Could this be due to the module not being installed on all the nodes, but just the access node?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542875185, "post_id": 53413331, "comment_id": 93727434, "body": "The link counts and time stamps are all different. The file system used by your script is different than the file system used by your interactive session are different. Couldn&#39;t tell you why, but it could be that they are running on different machines."}, {"owner": {"reputation": 1, "user_id": 10675310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5f8c663af0539e33f77fac8bd2fedb?s=128&d=identicon&r=PG&f=1", "display_name": "hamsterbug", "link": "https://stackoverflow.com/users/10675310/hamsterbug"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542922898, "post_id": 53413331, "comment_id": 93750250, "body": "I contacted my admin and he installed the module on all cluster nodes and now it&#39;s running with no errors. Thanks everyone. @ikegami please post your answer about checking the used file system and that they are running on different machines so I can accept your answer."}], "owner": {"reputation": 1, "user_id": 10675310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e5f8c663af0539e33f77fac8bd2fedb?s=128&d=identicon&r=PG&f=1", "display_name": "hamsterbug", "link": "https://stackoverflow.com/users/10675310/hamsterbug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1676, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542872710, "creation_date": 1542807549, "last_edit_date": 1542872710, "question_id": 53413331, "link": "https://stackoverflow.com/questions/53413331/cant-locate-parallel-forkmanager-pm-in-inc", "title": "Can&#39;t locate Parallel/ForkManager.pm in @INC", "body": "<p>I'm running a pipeline which includes running this CP3_Opti.pl Perl script that uses Parallel::ForkManager module (<a href=\"https://github.com/lyl8086/RADscripts/blob/master/RADassembler/bin/CP3_Opti.pl\" rel=\"nofollow noreferrer\">https://github.com/lyl8086/RADscripts/blob/master/RADassembler/bin/CP3_Opti.pl</a>) by submitting it to sge on a remote cluster (CentOS Linux release 7.5.1804, perl v5.16.3). It gives an error: </p>\n\n<blockquote>\n  <p>Can't locate Parallel/ForkManager.pm in @INC (@INC contains:\n  /home/isabolic/perl5/lib/perl5/5.16.3/x86_64-linux-thread-multi\n  /home/isabolic/perl5/lib/perl5/5.16.3/x86_64-linux-thread-multi\n  /home/isabolic/perl5/lib/perl5/5.16.3\n  /home/isabolic/perl5/lib/perl5/x86_64-linux-thread-multi\n  /home/isabolic/perl5/lib/perl5/5.16.3/x86_64-linux-thread-multi\n  /home/isabolic/perl5/lib/perl5/5.16.3\n  /home/isabolic/perl5/lib/perl5/x86_64-linux-thread-multi\n  /home/isabolic/perl5/lib/perl5 /usr/local/lib64/perl5\n  /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl\n  /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5\n  /usr/local/lib64/perl5 /usr/local/share/perl5\n  /usr/lib64/perl5/vendor_perl <strong>/usr/share/perl5/vendor_perl</strong>\n  /usr/lib64/perl5 /usr/share/perl5 .) at\n  /home/isabolic/bin//bin/CP3_Opti.pl line 5. BEGIN failed--compilation\n  aborted at /home/isabolic/bin//bin/CP3_Opti.pl line 5. Error in local\n  assembly, exiting...</p>\n</blockquote>\n\n<p>However, the Parallel::ForkManager is actually installed and in the @INC path at <strong>/usr/share/perl5/vendor_perl</strong>:</p>\n\n<pre><code>cpan -D Parallel:ForkManager\n\n        Y/YA/YANICK/Parallel-ForkManager-2.02.tar.gz\n        /usr/share/perl5/vendor_perl/Parallel/ForkManager.pm\n        Installed: 1.18\n        CPAN:      2.02  Not up to date\n        Yanick Champoux (YANICK)\n        yanick+cpan@babyl.dyndns.org\n</code></pre>\n\n<p>The module was installed by admin and I do not have root access, but the module itself, as well as all path directories, have read permissions enabled for everyone. When I run <code>perl -e \"use Parallel::ForkManager\"</code> in terminal there is no errors. PERL5LIB variable in my .bashrc file contains all the directories listed above in @INC.</p>\n\n<p>Adding the <code>use lib \"usr/share/perl5/vendor_perl\"</code> before line 5 in CP3_Opti.pl (use Parallel::ForkManager) didn't help. Neither did changing the shebang line in the script from <code>#!/usr/bin/env perl</code> to <code>#!/usr/bin/perl</code> didin't help, got the same error. </p>\n\n<p>When trying to install this module with cpan in my local Perl library I get bunch of errors as it's failing multiple test, which was the original reason for /usr installation.</p>\n\n<p>Anybody know what might be the problem?</p>\n\n<p><strong>EDIT:</strong>\n<code>ls -ld /usr /usr/share /usr/share/perl5 /usr/share/perl5/vendor_perl /usr/share/perl5/vendor_perl/Parallel /usr/share/perl5/vendor_perl/Parallel/ForkManager.pm</code> from the shell gives:</p>\n\n<pre><code>drwxr-xr-x.  13 root root   155 Kol  8 16:01 /usr\ndrwxr-xr-x. 147 root root  4096 Stu 21 08:52 /usr/share\ndrwxr-xr-x   49 root root  4096 Ruj 13 20:11 /usr/share/perl5\ndrwxr-xr-x   44 root root  4096 Stu  6 17:12 /usr/share/perl5/vendor_perl\ndrwxr-xr-x    2 root root    28 Stu  6 17:12 /usr/share/perl5/vendor_perl/Parallel\n-rw-r--r--    1 root root 26027 O\u017eu 30  2016 /usr/share/perl5/vendor_perl/Parallel/ForkManager.pm\n</code></pre>\n\n<p>and <code>system('ls -ld /usr /usr/share /usr/share/perl5 /usr/share/perl5/vendor_perl /usr/share/perl5/vendor_perl/Parallel /usr/share/perl5/vendor_perl/Parallel/ForkManager.pm &gt;&amp;2')</code> from script:</p>\n\n<pre><code>ls: cannot access /usr/share/perl5/vendor_perl/Parallel: No such file or directory\nls: cannot access /usr/share/perl5/vendor_perl/Parallel/ForkManager.pm: No such file or directory\ndrwxr-xr-x.  13 root root  155 Oct 10 10:13 /usr\ndrwxr-xr-x. 133 root root 4096 Oct 10 08:40 /usr/share\ndrwxr-xr-x   48 root root 4096 Oct 10 08:38 /usr/share/perl5\ndrwxr-xr-x   32 root root 4096 Oct 10 08:42 /usr/share/perl5/vendor_perl\n</code></pre>\n"}, {"tags": ["perl", "perl-html-template"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542807392, "post_id": 53413009, "comment_id": 93701022, "body": "What library do you use that provides the <code>__LAST__</code>? It&#39;s not part of Perl itself."}, {"owner": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542807580, "post_id": 53413009, "comment_id": 93701125, "body": "do you mean to &quot;HTML::Template&quot;?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 4, "creation_date": 1542807594, "post_id": 53413009, "comment_id": 93701138, "body": "Please edit your question and add the relevant, minimal Perl code to reproduce the output. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "edited": false, "score": 0, "creation_date": 1542869937, "post_id": 53414313, "comment_id": 93724971, "body": "Thanks. but changing to lower case didn&#39;t solve the problem. It is an old code and the only change was the Perl and mod_perl upgrade."}, {"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "reply_to_user": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "edited": false, "score": 0, "creation_date": 1542871282, "post_id": 53414313, "comment_id": 93725586, "body": "<code>loop_context_vars</code> is set to <code>false</code> by default"}, {"owner": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "edited": false, "score": 0, "creation_date": 1542896033, "post_id": 53414313, "comment_id": 93739379, "body": "How it is possible that I am getting a different behavior each time I am refreshing the page or it works fine with <b>FIRST</b>? How can I set it to true?"}], "tags": [], "owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "is_accepted": false, "score": 0, "last_activity_date": 1542810616, "creation_date": 1542810616, "answer_id": 53414313, "question_id": 53413009, "link": "https://stackoverflow.com/questions/53413009/last-in-tmpl-if-not-always-works-in-perl-htmltemplate/53414313#53414313", "title": "&quot;__LAST__&quot; (in tmpl_if) not always works in Perl HTML::Template", "body": "<p>If you are using HTML::Template then check the <a href=\"https://metacpan.org/pod/HTML::Template#Miscellaneous-Options\" rel=\"nofollow noreferrer\">documentation</a>. You might need to set <code>loop_context_vars</code> option and use lowercase <code>__last__</code> or <code>__first__</code>.\nI guess that code with <code>__FIRST__</code> works because it always outputs <code>&lt;br&gt;</code></p>\n"}], "owner": {"reputation": 899, "user_id": 632169, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/9ed201fb85017ee7c4c0f7882e01f42d?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/632169/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542846655, "creation_date": 1542806560, "last_edit_date": 1542846655, "question_id": 53413009, "link": "https://stackoverflow.com/questions/53413009/last-in-tmpl-if-not-always-works-in-perl-htmltemplate", "title": "&quot;__LAST__&quot; (in tmpl_if) not always works in Perl HTML::Template", "body": "<p>I have the following line in my tmpl file:</p>\n\n<pre><code>&lt;td&gt;&lt;TMPL_LOOP SIGNS&gt;&lt;TMPL_VAR LEFT_SIGN&gt; - &lt;TMPL_VAR RIGHT_SIGN&gt;&lt;TMPL_UNLESS __LAST__&gt;&lt;/br&gt;&lt;/TMPL_UNLESS&gt;&lt;/TMPL_LOOP&gt;&lt;/td&gt;\n</code></pre>\n\n<p>When refreshing the page it switches between both displays (sometimes refresh leads to the same display and not necessarily switch it):</p>\n\n<p>Display1 (new line between each line - as expected):</p>\n\n<pre><code>AA1 - AA2\nBB1 - BB2\nCC1 - CC2 \n</code></pre>\n\n<p>Display2 (no new line between the last item):</p>\n\n<pre><code>AA1 - AA2\nBB1 - BB2CC1 - CC2\n</code></pre>\n\n<p>Recently I upgraded Perl to version 5.24.3 and I suspect that <code>__LAST__</code> stop working as expected (no always recognize the last item in the loop).\nI am using the module \"HTML::Template\".</p>\n\n<p>I changed the html to (<code>__FIRST__</code> instead of <code>__LAST__</code>):</p>\n\n<pre><code>&lt;td&gt;&lt;TMPL_LOOP SIGNS&gt;&lt;TMPL_UNLESS __FIRST__&gt;&lt;/br&gt;&lt;/TMPL_UNLESS&gt;&lt;TMPL_VAR LEFT_SIGN&gt; - &lt;TMPL_VAR RIGHT_SIGN&gt;&lt;/TMPL_LOOP&gt;&lt;/td&gt;\n</code></pre>\n\n<p>and it works always as expected.</p>\n\n<p>I couldn't find any reference to this issue.</p>\n\n<p>Is it really a bug with <code>__LAST__</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4609, "user_id": 4636715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ebd8c54bb287f99b94373429b588e21?s=128&d=identicon&r=PG&f=1", "display_name": "vahdet", "link": "https://stackoverflow.com/users/4636715/vahdet"}, "edited": false, "score": 3, "creation_date": 1542791570, "post_id": 53408544, "comment_id": 93692117, "body": "What&#39;s the error you receive when you use <code>Find:find</code>? Also, avoid asking multiple questions at once, otherwise the question may be considered as <i>too broad</i>"}, {"owner": {"reputation": 41, "user_id": 9734457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pe6I8WLFwpU/AAAAAAAAAAI/AAAAAAAAAIU/uzO6HC1r_p4/photo.jpg?sz=128", "display_name": "Kittu", "link": "https://stackoverflow.com/users/9734457/kittu"}, "reply_to_user": {"reputation": 4609, "user_id": 4636715, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ebd8c54bb287f99b94373429b588e21?s=128&d=identicon&r=PG&f=1", "display_name": "vahdet", "link": "https://stackoverflow.com/users/4636715/vahdet"}, "edited": false, "score": 0, "creation_date": 1542791834, "post_id": 53408544, "comment_id": 93692274, "body": "it gives error as can&#39;t locate Find.pm file. BEGIN failed--compilation aborted at line** but the .pm file is present at installation location."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1542792011, "post_id": 53408544, "comment_id": 93692383, "body": "so, it is telling you module not found... you have the module installed?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1542793658, "post_id": 53408544, "comment_id": 93693397, "body": "What is the exact <code>use</code> line? Is it <code>use File::find</code> or is it <code>use File::Find</code>? You should really use  <code>File::Find</code> because it is there and does what you need."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1542795963, "post_id": 53408544, "comment_id": 93694723, "body": "Possible typo <code>Find::Find</code> instead of <code>File::Find</code>?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 4, "creation_date": 1542796239, "post_id": 53408544, "comment_id": 93694890, "body": "Please <a href=\"https://stackoverflow.com/posts/53408544/edit\">edit your question</a> to copy and paste the <b>exact</b> error message you get when trying to use File::Find. File::Find has been included in the standard Perl distribution since 1994. It seems very unlikely that a properly-installed Perl would not have it."}], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": true, "score": 0, "last_activity_date": 1542861025, "last_edit_date": 1542861025, "creation_date": 1542860617, "answer_id": 53423865, "question_id": 53408544, "link": "https://stackoverflow.com/questions/53408544/how-to-get-array-of-filesnames-present-in-sub-directories-using-perl-without-u/53423865#53423865", "title": "how to get array of filesnames present in sub-directories using perl ( without using File::Find)", "body": "<p><code>scalar</code> is what you need to get an array's size, although you can omit scalar and still get the number of elements as it seems you already have.  You have to clarify what exactly you mean by \"array size\" if not this.  The cleaner way is to use File::Find, but if you just want something quick, you can do a system call to find, or any other system command, using backticks:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy @files = `find $ARGV[0] -type f`;\nmy $size = scalar(@files);\nprint \"Number of files = $size\\n\";\nforeach my $file(@files) {\n    print \"$file\";\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 9734457, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pe6I8WLFwpU/AAAAAAAAAAI/AAAAAAAAAIU/uzO6HC1r_p4/photo.jpg?sz=128", "display_name": "Kittu", "link": "https://stackoverflow.com/users/9734457/kittu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53423865, "answer_count": 1, "score": -1, "last_activity_date": 1542861025, "creation_date": 1542791271, "last_edit_date": 1542796083, "question_id": 53408544, "link": "https://stackoverflow.com/questions/53408544/how-to-get-array-of-filesnames-present-in-sub-directories-using-perl-without-u", "title": "how to get array of filesnames present in sub-directories using perl ( without using File::Find)", "body": "<p>I'm trying to get the names of files present in sub-directories. Further I want to get the size of array and search the text in individual files</p>\n\n<pre><code>#!/usr/bin/perl\n\n$dir = $ARGV[0];\nmy @filesList;\nopendir(DIR, $dir) || die \"Unable to open the directory\";\n@contents=readdir(DIR);\nforeach $listitem ( @contents )\n{\n    if ( -d $listitem )\n    {\n        opendir(DIR,$listitem);\n        @c1=readdir(DIR);\n        foreach  $firstlevel(@c1)  # first level directory structure\n        {\n            if (-d $firstlevel) {\n                opendir(DIR,$firstlevel);\n                @c2=readdir(DIR);\n                foreach  $secondlevel(@c2) {  #second level directory structure\n                    push(@filesList, $secondlevel);\n                }\n            } else {\n                 # push(@filesList, $firstlevel);\n            }\n        }\n        #push(@filesList, $listitem);   \n    } else {\n        push(@filesList, $listitem);\n    }\n}\n$size = @filesList;\nprint \"array size : $size\";\nforeach $file(@filesList)\n{\n    print \"$file\"; \n}\nclose(DIR);\n</code></pre>\n\n<p>All this I want to work without using <code>Find::Find</code>, I'm getting error for <code>use File::Find</code></p>\n\n<p>Also, how can I get the size of an array</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8772372, "user_type": "registered", "profile_image": "https://graph.facebook.com/1472231156194287/picture?type=large", "display_name": "Vishal Gupta", "link": "https://stackoverflow.com/users/8772372/vishal-gupta"}, "edited": false, "score": 0, "creation_date": 1542774589, "post_id": 53405030, "comment_id": 93685489, "body": "this is working for (Mon, Tue,Wed) only but not for other days."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 49, "user_id": 8772372, "user_type": "registered", "profile_image": "https://graph.facebook.com/1472231156194287/picture?type=large", "display_name": "Vishal Gupta", "link": "https://stackoverflow.com/users/8772372/vishal-gupta"}, "edited": false, "score": 0, "creation_date": 1542774722, "post_id": 53405030, "comment_id": 93685518, "body": "it works.. please check case sensitivity as stored in the hash..and any extra spaces"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": -1, "last_activity_date": 1542772730, "last_edit_date": 1542772730, "creation_date": 1542772414, "answer_id": 53405030, "question_id": 53404829, "link": "https://stackoverflow.com/questions/53404829/write-a-program-in-perl-using-hash/53405030#53405030", "title": "Write a program in Perl using hash", "body": "<p>Using interactive perl-one liner. Note that it is case sensitive and doesn't print anything if it is not matching the keys of the %hash.</p>\n\n<pre><code>$ perl -ne 'BEGIN{printf(\"%s\",\"Enter the input: \"); my $inp=&lt;STDIN&gt;; chomp($inp); %hash=('Mon',1,'Tue',2,'Wed',3,'Thu',4,'Fri',5,'Sat',6,'Sun',7); $x=$hash{$inp}-2; $x\n+=7 if $x&lt;1; exit if not exists $hash{$inp}; foreach my $y (keys %hash) { print \"$y\" if $hash{$y}==$x } ; exit } '\nEnter the input: fff\n\n\n$ perl -ne 'BEGIN{printf(\"%s\",\"Enter the input: \"); my $inp=&lt;STDIN&gt;; chomp($inp); %hash=('Mon',1,'Tue',2,'Wed',3,'Thu',4,'Fri',5,'Sat',6,'Sun',7); $x=$hash{$inp}-2; $x\n+=7 if $x&lt;1; exit if not exists $hash{$inp}; foreach my $y (keys %hash) { print \"$y\" if $hash{$y}==$x } ; exit } '\nEnter the input: Mon\nSat\n\n$ perl -ne 'BEGIN{printf(\"%s\",\"Enter the input: \"); my $inp=&lt;STDIN&gt;; chomp($inp); %hash=('Mon',1,'Tue',2,'Wed',3,'Thu',4,'Fri',5,'Sat',6,'Sun',7); $x=$hash{$inp}-2; $x\n+=7 if $x&lt;1; exit if not exists $hash{$inp}; foreach my $y (keys %hash) { print \"$y\" if $hash{$y}==$x } ; exit } '\nEnter the input: Tue\nSun\n\n$\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1542774613, "post_id": 53405042, "comment_id": 93685492, "body": "My input is <code>1 or 2 or 0 or mon </code> however error message popups unrecognized day... What is actual input?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1542775085, "post_id": 53405042, "comment_id": 93685605, "body": "Either check if you have a number, or add the number to the map. I did the latter."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1542778959, "last_edit_date": 1542778959, "creation_date": 1542772519, "answer_id": 53405042, "question_id": 53404829, "link": "https://stackoverflow.com/questions/53404829/write-a-program-in-perl-using-hash/53405042#53405042", "title": "Write a program in Perl using hash", "body": "<p>Your attempt is backwards. The strings by which you want to search should be the keys of the hash.</p>\n\n<pre><code>my @days = qw( mon tue wed );\nmy %index_of_day = map { $days[$_] =&gt; $_, $_ =&gt; $_ } 0..$#days;\n\ndefined( my $input = &lt;&gt; )\n   or die(\"Premature EOF\\n\");\n\nchomp($input);\n\nmy $old_index_of_day = $index_of_day{$input}\n   or die(\"Unrecognized day $input\\n\");\n\nmy $new_index_of_day = $old_index_of_day - 2;\n$new_index_of_day += @days while $new_index_of_day &lt; 0;\n\nmy $output = $days[$new_index_of_day];\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 8772372, "user_type": "registered", "profile_image": "https://graph.facebook.com/1472231156194287/picture?type=large", "display_name": "Vishal Gupta", "link": "https://stackoverflow.com/users/8772372/vishal-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542778959, "creation_date": 1542770672, "last_edit_date": 1542771112, "question_id": 53404829, "link": "https://stackoverflow.com/questions/53404829/write-a-program-in-perl-using-hash", "title": "Write a program in Perl using hash", "body": "<p>I want to print 2 days back after getting input from user.</p>\n\n<p>Example: </p>\n\n<pre><code>enter a day :\nInput : Wednesday\n\nOutput : monday\n</code></pre>\n\n<p>I tried it using hashing with array but can't find result.</p>\n\n<pre><code>%hash=('mon',1,'tue',2,'wed',3);\n@arr=keys %hash;\n</code></pre>\n"}, {"tags": ["apache", "perl", "timestamp", "debian", "cgi"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1542787898, "post_id": 53404090, "comment_id": 93690059, "body": "To be honest, it is going to be difficult to try and replicate the problem, I would simply start by getting the timezones the same as the previous server and work from there."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542789717, "post_id": 53404090, "comment_id": 93691016, "body": "An alternative approach instead of keeping a log is to map the time (as an integer, returned by <code>time</code>, to the images, and use that as an offset into the images: <code>my @images = glob &#39;images&#47;*.jpg&#39;; my $ofs = time &#47; (3600*24); $ofs = $ofs % scalar @images; my $image = $images[$ofs]</code>. See <a href=\"https://metacpan.org/pod/Time::Slideshow\" rel=\"nofollow noreferrer\">metacpan.org/pod/Time::Slideshow</a> for a module incorporating this."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1542795755, "post_id": 53404090, "comment_id": 93694601, "body": "Does it work if rather than overwriting the log file, you write out the new version to a temporary file and then rename it into place?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1542796637, "post_id": 53404090, "comment_id": 93695157, "body": "Here&#39;s an alternative: Maybe you could rip part of the script out, put it into a new program and run it as a cronjob. Have it pick a picture every time it is called with the same behaviour, but only run it once a night as a cron. Make it create a symlink to the selected picture, and use that in your website. This will resolve the time issues as it will run when the server thinks it&#39;s midnight (you can reset the timezone), and it will decrease resource use as it will only be run once."}, {"owner": {"reputation": 13, "user_id": 10683005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hINKxN9RFfY/AAAAAAAAAAI/AAAAAAAAAkY/nsedUWakxMY/photo.jpg?sz=128", "display_name": "Brad", "link": "https://stackoverflow.com/users/10683005/brad"}, "edited": false, "score": 0, "creation_date": 1542876715, "post_id": 53404090, "comment_id": 93728205, "body": "Thank you to all of you that replied, for your creative and useful ideas.  Ikegami&#39;s solution did the trick and I&#39;m back up and running again.  I have a great appreciation for all of you who help the less gifted, like myself.  Your generosity is inspiring."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10683005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hINKxN9RFfY/AAAAAAAAAAI/AAAAAAAAAkY/nsedUWakxMY/photo.jpg?sz=128", "display_name": "Brad", "link": "https://stackoverflow.com/users/10683005/brad"}, "edited": false, "score": 0, "creation_date": 1542876503, "post_id": 53410985, "comment_id": 93728097, "body": "ikegami - thank you so much for your detailed explanation.  I can&#39;t begin to thank you enough.  I&#39;m very grateful to all of you who provide help to those of us who benefit from your work.  This was not only the solution, but you led me to a better understanding of how to debug perl code in the future.  The script is back to performing 100% as expected, thanks to you.  Bravo! &lt;standing and clapping&gt; To paraphrase Sir Isaac Newton, &quot;If my coding has improved, it is because I stand on the shoulders of giants.&quot;"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1542843247, "last_edit_date": 1542843247, "creation_date": 1542799130, "answer_id": 53410985, "question_id": 53404090, "link": "https://stackoverflow.com/questions/53404090/perl-cgi-picture-of-the-day-script-not-behaving-as-expected-after-migration-to-n/53410985#53410985", "title": "Perl CGI picture-of-the-day script not behaving as expected after migration to new server", "body": "<p>Before Perl 5.12, <code>split</code> stored its result in <code>@_</code> when called in void context. That's a horrible practice, so that \"functionality\" was removed in 5.12, and a warning was added (<code>Useless use of split in void context</code>).</p>\n\n<p>I suspect you are using a newer version of Perl than you previously used, one in which <code>split</code> doesn't behave specially in void context. If that's the case, you should have received a warning. Always use <code>use strict; use warnings qw( all );</code>!</p>\n\n<p>To fix the problem, replace</p>\n\n<pre><code>split (/\\|/);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>@_ = split (/\\|/);\n</code></pre>\n\n<p>(You should use a different array than <code>@_</code>, but the above is the minimal change.)</p>\n\n<hr>\n\n<p>You seem to have spent a lot of time on this, but without actually spending any time trying to debug the problem! The first thing you have done is added the missing <code>use warnings qw( all );</code>, which would have identified the problem immediately. Even without that, minimal work should have narrowed down the problem to the <code>split</code>.</p>\n\n<ol>\n<li>You should have found that <code>$num eq \"\"</code> is always true.</li>\n<li>This would have led you to find that <code>$_[0] eq $date</code> is always false.</li>\n<li>This would have led you to find that <code>$_[0]</code> is never set.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10683005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hINKxN9RFfY/AAAAAAAAAAI/AAAAAAAAAkY/nsedUWakxMY/photo.jpg?sz=128", "display_name": "Brad", "link": "https://stackoverflow.com/users/10683005/brad"}, "edited": false, "score": 0, "creation_date": 1542877253, "post_id": 53411759, "comment_id": 93728494, "body": "Thank you for your added insight, Dave Cross.  As I think I indicated in my post, this is just a script that I &quot;borrowed&quot; and modified for my purposes, that has always worked for me (until recently of course).  My coding skills are abysmal.  But thanks to generous contributors of knowledge such as yourself, I&#39;m slowly learning.  I found the prospect of posting here in the first place, to be daunting.  And, in fact, I have waited until I absolutely could find no other solution, before I posted my request, because I wouldn&#39;t want to waste any of you or the others&#39; time."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1542802230, "creation_date": 1542802230, "answer_id": 53411759, "question_id": 53404090, "link": "https://stackoverflow.com/questions/53404090/perl-cgi-picture-of-the-day-script-not-behaving-as-expected-after-migration-to-n/53411759#53411759", "title": "Perl CGI picture-of-the-day script not behaving as expected after migration to new server", "body": "<p>To add some data to ikegami's excellent answer.</p>\n\n<ul>\n<li>FreeBSD 5.4 seems to have shipped with two versions of Perl during its lifetime - 5.6.2 and 5.8.6.</li>\n<li>Debian 9 ships with Perl 5.24.1.</li>\n</ul>\n\n<p>The <a href=\"https://perldoc.perl.org/5.14.0/perldelta.html#split()-and-%40_\" rel=\"nofollow noreferrer\">release notes for Perl 5.14</a> say this:</p>\n\n<blockquote>\n  <p><code>split()</code> no longer modifies <code>@_</code> when called in scalar or void context. In void context it now produces a \"Useless use of split\" warning. This was also a perl 5.12.0 change that missed the perldelta.</p>\n</blockquote>\n\n<p>I'm sure you've learned a valuable lesson here :-) When moving code from one version of Perl to another, you should always at least scan the release notes for the intervening versions so you know what problems you might encounter.</p>\n\n<p>I'll also reiterate the simbabque's comment. This approach seems rather weird. For every request to your web page, you are checking to see if you have already allocated a picture of the day (which happens on the first request of the day) and then serving the chosen picture. It would be far more efficient to use a cronjob to create a symlink to an image once a day and just include the URL of that image in your web page.</p>\n"}], "owner": {"reputation": 13, "user_id": 10683005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hINKxN9RFfY/AAAAAAAAAAI/AAAAAAAAAkY/nsedUWakxMY/photo.jpg?sz=128", "display_name": "Brad", "link": "https://stackoverflow.com/users/10683005/brad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "accepted_answer_id": 53410985, "answer_count": 2, "score": 1, "last_activity_date": 1542843247, "creation_date": 1542763942, "question_id": 53404090, "link": "https://stackoverflow.com/questions/53404090/perl-cgi-picture-of-the-day-script-not-behaving-as-expected-after-migration-to-n", "title": "Perl CGI picture-of-the-day script not behaving as expected after migration to new server", "body": "<p>I have a perl cgi script that has been working perfectly for me on a FreeBSD 5.4 Apache 1.3 webserver for many years without trouble.  It's a picture of the day script that randomly selects a picture from a given directory for inclusion on an shtml page with the server side include </p>\n\n<pre><code>&lt;!--#exec cgi=\"/cgi-bin/pod/pod.cgi\"--&gt;\n</code></pre>\n\n<p>I recently migrated to a new server on Google Cloud Platform - Debian 9 (Stretch), Apache 2.4. And the script broke. After setting the server configurations to execute cgi perl scripts correctly, and re-uploading the script in ASCII, the script began working again, but now with an anomalous behavior.  Instead of displaying one image (the same image) all day long and then changing the image at midnight (the desired behavior) it is now changing the image every time the page is reloaded in a web browser.</p>\n\n<p>The script uses a flat-file log that keeps track of which images have been used from the source directory, and doesn't repeat displaying of any images until all images from the target directory have been used (logged in pod.log).  When working correctly, it will display a new image every day (changing at midnight), which will remain the same for all users, whether the page is reloaded or not, until the following midnight.</p>\n\n<p>Permissions have all been set on the necessary files as specified in the comments of the script.  The script has been uploaded to the server in ASCII format (will not work at all if uploaded in binary).  The script is displaying an image from the correct directory.  BUT..... every time the page is refreshed, a new images is loaded and logged to the pod.log file.</p>\n\n<p>One thing that I thought might be affecting the script was where it was getting the time for the date/time function of the script.  When I entered the \"date\" command from the debian command prompt the server returned the correct time that I had configured the server to - America/Los_Angeles.  But I noticed that when files on my webserver were touched or changed, it was time-stamping them with UTC time, which is 8 hours later.  Thinking that Apache might be causing the different time-stamp, I tried changing the time-zone in php.ini for apache2. This didn't seem to change anything (after apache2ctl restart), so I thought, maybe I'll change the server timezone to UTC.  If you can't beat 'em, join 'em.  Right?  Well that made it so the \"date\" command from the debian command line returned the time in UTC.  Also noted: files on the webserver were still time-stamping with UTC time zone.  All was looking good!  But then I checked the time that was being used by perl/cgi with this little gem, which returns the date and time in a human-readable format...</p>\n\n<pre><code>#!/usr/bin/perl\nprint \"Content-type: text/html\\n\\n\";\n@months = qw(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec);\n@weekDays = qw(Sun Mon Tue Wed Thu Fri Sat Sun);\n($second, $minute, $hour, $dayOfMonth, $month, $yearOffset, $dayOfWeek, $dayOfYear, $daylightSavings) = localtime();\n$year = 1900 + $yearOffset;\n$theTime = \"$hour:$minute:$second, $weekDays[$dayOfWeek] $months[$month] $dayOfMonth, $year\";\nprint $theTime; \n</code></pre>\n\n<p>...And this script was returning the time in the time zone America/Los_Angeles, rather than UTC.  Now I don't know if this discrepancy could be the thing causing the bug in my pic of the day script.  But my guess, with my very limited experience is telling me that it's at least possible.  But I've taken this debugging/troubleshooting of the script about as far as my technical abilities will take me.</p>\n\n<p>I need to know:</p>\n\n<ol>\n<li>what is causing the script to return a new picture and update the log file on every reload, rather than remaining static for 1 day?</li>\n<li>is it caused by an unintentional (fat finger) error in the script?</li>\n<li>is it caused by some different way my new server and/or its configuration are handling the script?</li>\n<li>is it caused by the time-stamp/time-zone issues I mentioned in the previous paragraph?</li>\n<li>or is this a result of something I'm completely missing?</li>\n</ol>\n\n<p>Next I'll provide the source code for the script and my apache configuration files.  EXAMPLE.COM should be replaced by your domain name wherever it appears and paths to files should be adjusted to your locations.</p>\n\n<pre><code>#!/usr/bin/perl\n\n##############################################################\n#  POD (Picture of the Day) Version 1.30\n##############################################################\n\npackage VAR;\nuse strict;\n\n##############################################################\n#  Installation\n##############################################################\n\n#  1. Edit path to Perl at top of script (pod.cgi) if it\n#  differs on your server. Usual and default path it\n#  [/usr/bin/perl]. However, on some servers it may be\n#  /usr/local/bin/perl. If in doubt, then refer to a script on\n#  your server that does work, or ask your web host. Edit\n#  variables below. Ensure you edit (and save) the script using\n#  an ASCII editor like Notepad.\n#\n#  2. Via FTP, create directory on server in CGI-BIN called\n#  pod. No need to CHMOD - you can leave set to server\n#  default directory permissions.\n#\n#  3. Via FTP, create subdirectory in 'pod' directory\n#  called data and CHMOD 777 (drwxrwxrwx).\n#\n#  4. FTP upload the pod.cgi script to the 'pod'\n#  directory in ASCII (text) and CHMOD 755 (rwxr-xr-x). You may\n#  need to rename the scripts with the .pl extension if your\n#  server uses the .pl extension for CGI-Perl scripts.\n#\n#  images/      755 (drwxr-xr-x)\n#  cgi-bin/pod/\n#   pod.cgi     755 (rwxr-xr-x)\n#   data/       777 (drwxrwxrwx)\n#\n\n##############################################################\n#  Operation\n##############################################################\n#\n#  METHOD 1: SSI Method\n#  ====================\n#  Call the script via SSI (Server-Side Includes). The image\n#  is embedded in the page. Insert the following SSI tag in\n#  the desired page:\n#\n#  &lt;!--#exec cgi=\"/cgi-bin/pod/pod.cgi\"--&gt;\n#\n#  In either case, ensure to replace the cgi-bin/pod/ portion\n#  of the SSI tag with your path to the script.\n#\n#  If you get the [an error occurred while processing this\n#  directive] error message or no image / message displays,\n#  make sure (a) the path to Perl is correct, (b) the script\n#  was uploaded in ASCII, (c) the script is chmod 755\n#  (rwxr-xr-x) and (d) the path to the script in the SSI tag\n#  is correct - if in doubt, then ask your web host. If still\n#  problematic then try the following:\n#\n#  1. On most servers, the page with a SSI tag must be named\n#  with the SHTML extension in order for the server to parse\n#  and execute the SSI tag. Check the page source. If you\n#  still see the SSI tag, then it was not parsed. Try\n#  renaming the page with the SHTML extension. If the SSI tag\n#  is still not parsed (and still visible), then SSI may not\n#  be enabled on your server - ask your web host.\n#\n#  2. Try calling the script directly from the browser. If\n#  you get a server 500 error, then check your server error\n#  logs.\n#\n#  3. You can also try the following SSI tag:\n#\n#  &lt;!--#include virtual=\"/cgi-bin/pod/pod.cgi\"--&gt;\n#\n#  METHOD 1: Non-SSI Method\n#  ====================\n#  You can also call the script directly from the browser:\n#\n#  http://www.yourdomain.com/cgi-bin/pod/pod.cgi\n#\n#  The image is NOT embedded, but is instead displayed in a\n#  script generated HTML page.\n\n##############################################################\n#  Configuration\n##############################################################\n\n#  Full (absolute) server directory path of directory holding\n#  image files for the POD script to draw from. Create this\n#  directory in advance and upload images (in Binary) to this\n#  directory. No need to chmod. NO trailing slash at end of\n#  path.\n$VAR::image_dir = \"/var/www/EXAMPLE.COM/httpdocs/pod\";\n\n#  URL of directory holding image files for the POD script to\n#  draw from. NO trailing slash at end of URL.\n$VAR::image_url = \"http://www.EXAMPLE.COM/pod\";\n\n#  Full (absolute) server directory path for script data files\n#  (pod.log, pod.err). Create this directory in advance and\n#  chmod (777 or drwxrwxrwx). NO trailing slash at end of path.\n$VAR::data_dir  = \"/var/www/EXAMPLE.COM/httpdocs/pod/data\";\n\n#  Output template - how POD image (or error message) is\n#  displayed. Feel free to change the HTML but (1) the MS link\n#  back MUST be retained and (2) the &lt;%image%&gt; tag MUST be\n#  retained as the tag is replaced with the image (or error\n#  message) HTML code.\n$VAR::template  = qq~\n&lt;center&gt;\n&lt;table border=\"1\"&gt;\n        &lt;th&gt;\n        &lt;%image%&gt;\n        &lt;/th&gt;\n&lt;/table&gt;\n&lt;/center&gt;\n~;\n\n##########################################################################\n#  Do NOT change or alter the code below!\n##########################################################################\n\neval {\n    ($0 =~ m,(.*)/[^/]+,) &amp;&amp; unshift (@INC, \"$1\");\n    require 5.004;\n};\nif ($@) {\n    print \"Content-type: text/html\\n\\n\";\n    print \"Server Error Message: $@\\n\";\n    exit;\n}\n\neval { &amp;main; };\nif ($@) { &amp;error (\"[Error 01]: $@\"); }\nexit;\n\n###############################################\n# Main\n###############################################\nsub main {\n\nmy ($time, $date) = &amp;get_time_stamp();\nmy $num;\n\nif (-e \"$VAR::data_dir/pod.log\") {\n    open (LOG, \"$VAR::data_dir/pod.log\") ||\n    &amp;error (\"Error [02]: Cannot open pod.log file - $!\");\n    my @entries = &lt;LOG&gt;;\n    close (LOG);\n    chomp (@entries);\n\n    my @match = grep (/^$date/, @entries);\n    if (@match) {\n        foreach (@match) {\n            split (/\\|/);\n            if ($_[0] eq $date) {\n                $num = $_[1];\n                last;\n            }\n        }\n    }\n}\n\nopendir (DIR, \"$VAR::image_dir\") || &amp;error (\"Error [03]: Cannot open $VAR::image - $!\");\nmy @files = sort (grep { m/.*\\.gif|.jpg/ } readdir (DIR));\nclosedir (DIR);\n\nif ($num eq \"\") { $num = int (rand @files); }\nmy $image = @files[$num];\nif (! -e \"$VAR::image_dir/$image\") { &amp;error (\"Error [04]: Cannot find image file [$image]\"); }\n\nmy $tag = \"&lt;img src=\\\"$VAR::image_url/$image\\\"&gt;\";\n$VAR::template =~ s/&lt;%image%&gt;/$tag/gis;\nprint $VAR::template;\n\nmy ($found, $newfile);\nif (-e \"$VAR::data_dir/pod.log\") {\n    open (LOG, \"$VAR::data_dir/pod.log\") ||\n    &amp;error (\"Error [05]: Cannot open pod.log file - $!\");\n    my @entries = &lt;LOG&gt;;\n    close (LOG);\n    chomp (@entries);\n\n    foreach (@entries) {\n        split (/\\|/);\n        if ($_[0] eq $date) {\n            $_[2]++;\n            $newfile .= \"$date|$_[1]|$_[2]|$_[3]\\n\";\n            $found++;\n        }       \n        else { $newfile .= \"$_\\n\"; }\n    }\n    if (! $found) { $newfile .= \"$date|$num|1|$image\\n\"; }\n\n    open (LOG, \"&gt;$VAR::data_dir/pod.log\") ||\n    &amp;error (\"Error [06]: Cannot open pod.log file - $!\");\n    flock (LOG, 2) || &amp;error (\"Error [07]: Cannot lock pod.log file - $!\");\n    print LOG $newfile;\n    close (LOG);\n}\nelse {\n    open (LOG, \"&gt;$VAR::data_dir/pod.log\") ||\n    &amp;error (\"Error [08]: Cannot open pod.log file - $!\");\n    print LOG \"$date|$num|1|$image\\n\";\n    close (LOG);\n    chmod (0666, \"$VAR::data_dir/pod.log\") ||\n    &amp;error (\"Error [09]: Cannot chmod pod.log file - $!\");\n}\n}\n\n###############################################\n# Get Time Stamp\n###############################################\nsub get_time_stamp {\n\nmy (@tb)    = localtime (time);\nmy ($ap)    = \"am\";\n\n$tb[4]++;\nfor (0..4) { $tb[$_] = sprintf (\"%02d\", $tb[$_]); }\n$tb[5] += 1900;\n$ap = \"pm\" if ($tb[2] &gt;= 12);\n$tb[2] -= 12 if ($tb[2] &gt; 12);\n\nmy $date = \"$tb[4]/$tb[3]/$tb[5]\";\nreturn (\"$tb[2]:$tb[1]:$tb[0]$ap $date\", $date);\n}\n\n###############################################\n# Error Handler\n###############################################\nsub error {\n\nmy $error       = shift;\nmy ($time, $date)   = &amp;get_time_stamp();\n\nmy $tag         = \"Cannot display image\";\n$VAR::template      =~ s/&lt;%image%&gt;/$tag/gis;\n\nprint $VAR::template;\n\nopen (ERR, \"&gt;&gt;$VAR::data_dir/pod.err\");\nprint ERR \"$time | $ENV{'REMOTE_ADDR'} | $error\\n\";\nclose (ERR);\nchmod (0666, \"$VAR::data_dir/pod.err\");\nexit;\n}\n########################################\n#end of Picture of the Day script\n########################################\n</code></pre>\n\n<p>This is my apache2.conf (again, I've changed my domain name to EXAMPLE.COM wherever my domain name appears...</p>\n\n<pre><code># configuration directives that give the server its instructions.\n# See http://httpd.apache.org/docs/2.4/ for detailed information about\n# the directives and /usr/share/doc/apache2/README.Debian about Debian specific\n# hints.\n#\n#\n# Summary of how the Apache 2 configuration works in Debian:\n# The Apache 2 web server configuration in Debian is quite different to\n# upstream's suggested way to configure the web server. This is because Debian's\n# default Apache2 installation attempts to make adding and removing modules,\n# virtual hosts, and extra configuration directives as flexible as possible, in\n# order to make automating the changes and administering the server as easy as\n# possible.\n\n# It is split into several files forming the configuration hierarchy outlined\n# below, all located in the /etc/apache2/ directory:\n#\n#       /etc/apache2/\n#       |-- apache2.conf\n#       |       `--  ports.conf\n#       |-- mods-enabled\n#       |       |-- *.load\n#       |       `-- *.conf\n#       |-- conf-enabled\n#       |       `-- *.conf\n#       `-- sites-enabled\n#               `-- *.conf\n#\n#\n# * apache2.conf is the main configuration file (this file). It puts the pieces\n#   together by including all remaining configuration files when starting up the\n#   web server.\n#\n# * ports.conf is always included from the main configuration file. It is\n#   supposed to determine listening ports for incoming connections which can be\n#   customized anytime.\n#\n# * Configuration files in the mods-enabled/, conf-enabled/ and sites-enabled/\n#   directories contain particular configuration snippets which manage modules,\n#   global configuration fragments, or virtual host configurations,\n#   respectively.\n#\n#   They are activated by symlinking available configuration files from their\n#   respective *-available/ counterparts. These should be managed by using our\n#   helpers a2enmod/a2dismod, a2ensite/a2dissite and a2enconf/a2disconf. See\n#   their respective man pages for detailed information.\n#\n# * The binary is called apache2. Due to the use of environment variables, in\n#   the default configuration, apache2 needs to be started/stopped with\n#   /etc/init.d/apache2 or apache2ctl. Calling /usr/bin/apache2 directly will not\n#   work with the default configuration.\n\n\n# Global configuration\n#\n\n#\n# ServerRoot: The top of the directory tree under which the server's\n# configuration, error, and log files are kept.\n#\n# NOTE!  If you intend to place this on an NFS (or otherwise network)\n# mounted filesystem then please read the Mutex documentation (available\n# at &lt;URL:http://httpd.apache.org/docs/2.4/mod/core.html#mutex&gt;);\n# you will save yourself a lot of trouble.\n#\n# Do NOT add a slash at the end of the directory path.\n#\n#ServerRoot \"/etc/apache2\"\n\n# Set timezone for apache\n  SetEnv TZ America/Los_Angeles\n\n#\n# The accept serialization lock file MUST BE STORED ON A LOCAL DISK.\n#\nMutex file:${APACHE_LOCK_DIR} default\n\n#\n# The directory where shm and other runtime files will be stored.\n#\n\nDefaultRuntimeDir ${APACHE_RUN_DIR}\n\n#\n# PidFile: The file in which the server should record its process\n# identification number when it starts.\n# This needs to be set in /etc/apache2/envvars\n#\nPidFile ${APACHE_PID_FILE}\n\n#\n# Timeout: The number of seconds before receives and sends time out.\n#\nTimeout 300\n\n#\n# KeepAlive: Whether or not to allow persistent connections (more than\n# one request per connection). Set to \"Off\" to deactivate.\n#\nKeepAlive On\n\n#\n# MaxKeepAliveRequests: The maximum number of requests to allow\n# during a persistent connection. Set to 0 to allow an unlimited amount.\n# We recommend you leave this number high, for maximum performance.\n#\nMaxKeepAliveRequests 500\n\n#\n# KeepAliveTimeout: Number of seconds to wait for the next request from the\n# same client on the same connection.\n#\nKeepAliveTimeout 5\n\n\n# These need to be set in /etc/apache2/envvars\nUser ${APACHE_RUN_USER}\nGroup ${APACHE_RUN_GROUP}\n\n#\n# HostnameLookups: Log the names of clients or just their IP addresses\n# e.g., www.apache.org (on) or 204.62.129.132 (off).\n# The default is off because it'd be overall better for the net if people\n# had to knowingly turn this feature on, since enabling it means that\n# each client request will result in AT LEAST one lookup request to the\n# nameserver.\n#\nHostnameLookups Off\n\n# ErrorLog: The location of the error log file.\n# If you do not specify an ErrorLog directive within a &lt;VirtualHost&gt;\n# container, error messages relating to that virtual host will be\n# logged here.  If you *do* define an error logfile for a &lt;VirtualHost&gt;\n# container, that host's errors will be logged there and not here.\n#\nErrorLog ${APACHE_LOG_DIR}/error.log\n\n#\n# LogLevel: Control the severity of messages logged to the error_log.\n# Available values: trace8, ..., trace1, debug, info, notice, warn,\n# error, crit, alert, emerg.\n# It is also possible to configure the log level for particular modules, e.g.\n# \"LogLevel info ssl:warn\"\n#\nLogLevel warn\n\n# Include module configuration:\nIncludeOptional mods-enabled/*.load\nIncludeOptional mods-enabled/*.conf\n\n# Include list of ports to listen on\nInclude ports.conf\n\n\n# Sets the default security model of the Apache2 HTTPD server. It does\n# not allow access to the root filesystem outside of /usr/share and /var/www.\n# The former is used by web applications packaged in Debian,\n# the latter may be used for local directories served by the web server. If\n# your system is serving content from a sub-directory in /srv you must allow\n# access here, or in any related virtual host.\n&lt;Directory /&gt;\n        Options FollowSymLinks\n        AllowOverride None\n        Require all denied\n&lt;/Directory&gt;\n\n&lt;Directory /usr/share&gt;\n        AllowOverride None\n        Require all granted\n&lt;/Directory&gt;\n\n&lt;Directory /var/www/&gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n        Require all granted\n&lt;/Directory&gt;\n\n#&lt;Directory /srv/&gt;\n#       Options Indexes FollowSymLinks\n#       AllowOverride None\n#       Require all granted\n#&lt;/Directory&gt;\n# AccessFileName: The name of the file to look for in each directory\n# for additional configuration directives.  See also the AllowOverride\n# directive.\n#\nAccessFileName .htaccess\n#\n# The following lines prevent .htaccess and .htpasswd files from being\n# viewed by Web clients.\n#\n&lt;FilesMatch \"^\\.ht\"&gt;\n        Require all denied\n&lt;/FilesMatch&gt;\n#\n# The following directives define some format nicknames for use with\n# a CustomLog directive.\n#\n# These deviate from the Common Log Format definitions in that they use %O\n# (the actual bytes sent including headers) instead of %b (the size of the\n# requested file), because the latter makes it impossible to detect partial\n# requests.\n#\n# Note that the use of %{X-Forwarded-For}i instead of %h is not recommended.\n# Use mod_remoteip instead.\n#\nLogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %&gt;s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %&gt;s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %&gt;s %O\" common\nLogFormat \"%{Referer}i -&gt; %U\" referer\nLogFormat \"%{User-agent}i\" agent\n# Include of directories ignores editors' and dpkg's backup files,\n# see README.Debian for details.\n# Include generic snippets of statements\nIncludeOptional conf-enabled/*.conf\n# Include the virtual host configurations:\nIncludeOptional sites-enabled/*.conf\n# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n</code></pre>\n\n<p>And this is the conf for my virtual host...</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerName EXAMPLE.com\n    ServerAlias www.EXAMPLE.com\n    UseCanonicalName Off\n    ServerAlias  EXAMPLE1.com\n    ServerAlias  www.EXAMPLE1.com\n    ServerAlias  EXAMPLE2.com\n    ServerAlias  www.EXAMPLE2.com\n    ServerAlias  EXAMPLE.co.uk\n    ServerAlias  www.EXAMPLE.co.uk\n    ServerAlias  EXAMPLE.net\n    ServerAlias  www.EXAMPLE.net\n    ServerAlias  EXAMPLE3.com\n    ServerAlias  www.EXAMPLE3.com\n    ServerAdmin EXAMPLEd@gmail.com\n    DocumentRoot /var/www/EXAMPLE.com/httpdocs\n    &lt;Directory /var/www/EXAMPLE.com/httpdocs&gt;\n        Options -Indexes +FollowSymLinks\n        AllowOverride All\n    &lt;/Directory&gt;\n    ScriptAlias \"/cgi-bin/\" \"/var/www/EXAMPLE.com/cgi-bin/\"\n    #&lt;Directory \"/var/www/EXAMPLE.com/cgi-bin/\"&gt;\n    #    Options +ExecCGI\n    #    AddHandler cgi-script .cgi\n    #    AllowOverride All    \n    #&lt;/Directory&gt;\n    #&lt;Directory \"/var/www/EXAMPLE.com/httpdocs/members/cgi-bin\"&gt;\n    #    Options +ExecCGI\n    #    AddHandler cgi-script .cgi\n    #    AllowOverride All\n    #&lt;/Directory&gt;\n    #&lt;Directory \"/var/www/EXAMPLE.com/httpdocs/pod\"&gt;\n    #    Options +ExecCGI\n    #    AddHandler cgi-script .cgi\n    #    AllowOverride All\n    #&lt;/Directory&gt;\n\n    Alias \"/passwd/\" \"/var/www/EXAMPLE.com/passwd/\"\n\n    &lt;IfModule mod_ssl.c&gt;\n        SSLEngine off\n    &lt;/IfModule&gt;\n\n    &lt;Directory /var/www/EXAMPLE.com&gt;\n        Options +ExecCGI +FollowSymLinks +Includes\n        AddHandler cgi-script .cgi\n        AllowOverride All\n    &lt;/Directory&gt;\n\n    &lt;Directory /var/www/EXAMPLE.com&gt;\n        &lt;IfModule sapi_apache2.c&gt;\n                php_admin_flag engine on\n                php_admin_flag safe_mode on\n                php_admin_value open_basedir \"/var/www/EXAMPLE.com/httpdocs:/tmp\"\n        &lt;/IfModule&gt;\n        &lt;IfModule mod_php5.c&gt;\n                php_admin_flag engine on\n                php_admin_flag safe_mode on\n                php_admin_value open_basedir \"/var/www/EXAMPLE.com/httpdocs:/tmp\"\n        &lt;/IfModule&gt;\n    &lt;/Directory&gt;\n\n    &lt;Directory /var/www/EXAMPLE.com&gt;\n        RewriteEngine on\n\n        # the following section prevents outside sites from hot-linking photos\n        # leave this next line in allow empty referrers, remove to disallow empty referrers\n        RewriteCond %{HTTP_REFERER} !^$ [NC]\n        RewriteCond %{HTTP_REFERER} !^http://(.*@)?([a-z0-9-]+\\.)*XX\\.XXX\\.XXX\\.XXX(:[0-9]+)?(/.*)?$ [NC]\n        RewriteCond %{HTTP_REFERER} !^http://(.*@)?([a-z0-9-]+\\.)*EXAMPLE\\.com(:[0-9]+)?(/.*)?$ [NC]\n        RewriteCond %{HTTP_REFERER} !^http://(.*@)?([a-z0-9-]+\\.)*EXAMPLE\\.org(:[0-9]+)?(/.*)?$ [NC]\n        RewriteCond %{HTTP_REFERER} !^http://(.*@)?([a-z0-9-]+\\.)*EXAMPLE\\.net(:[0-9]+)?(/.*)?$ [NC]\n        RewriteCond %{HTTP_REFERER} !^http://(.*@)?([a-z0-9-]+\\.)*EXAMPLE\\.co.uk(:[0-9]+)?(/.*)?$ [NC]\n        RewriteCond %{HTTP_REFERER} !^http://(.*@)?([a-z0-9-]+\\.)*EXAMPLE\\.de(:[0-9]+)?(/.*)?$ [NC]\n        RewriteCond %{HTTP_REFERER} !^http://(.*@)?1\\.2\\.3\\.4(:[0-9]+)?(/.*)?$\n        RewriteRule .*\\.(gif|jpeg|jpg)$ - [NC,F,L]\n    &lt;/Directory&gt;\n\n    ErrorLog ${APACHE_LOG_DIR}/EXAMPLE.com-error.log\n    CustomLog ${APACHE_LOG_DIR}/EXAMPLE.com-access.log combined\n    # sends 404-not-found errors to error page\n    ErrorDocument 404 /404-error-page.html\n\n    # makes server side includes work on all html pages\n    AddType text/html .shtml .html .htm\n    AddHandler server-parsed .shtml .html .htm\n\n    RewriteEngine On\n\n    # If the hostname is NOT www.domain.com\n    # RewriteCond %{HTTP_HOST} !^www\\.EXAMPLE\\.com$\n    # 301 redirect to the same resource on www.EXAMPLE.com\n    # RewriteRule (.*) http://www.EXAMPLE.com$1 [L,R=301]\n\n    # sets the web surfer's browser to cache images, style sheets, and JavaScript for a week\n    &lt;IfModule mod_headers.c&gt;\n    # WEEK\n    &lt;FilesMatch \"\\.(jpg|jpeg|png|gif|swf|js|css)$\"&gt;\n        Header set Cache-Control \"max-age=604800, public\"\n    &lt;/FilesMatch&gt;\n    &lt;/IfModule&gt;\n\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Any help anyone can give me will be greatly appreciated!  It's amazing what you all do to help other fledgling programmers like myself.  Thank you, thank you, thank you.</p>\n"}, {"tags": ["linux", "perl", "unix", "sendmail"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542748916, "post_id": 53401600, "comment_id": 93678704, "body": "How do you currently use <code>sendmail</code> to send a message where the to and from addresses are different?"}, {"owner": {"reputation": 41, "user_id": 7238722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf11475935d44a1d58993dea808b55ad?s=128&d=identicon&r=PG&f=1", "display_name": "seek", "link": "https://stackoverflow.com/users/7238722/seek"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542750015, "post_id": 53401600, "comment_id": 93679203, "body": "<code>open(Mail, &quot;|&#47;usr&#47;sbin&#47;sendmail -t&quot;); print MAIL &quot;To: $to\\n&quot; print MAIL $msg close(MAIL)</code>  I&#39;m currently entering the my own email in the to address manually What I need is, if a user invokes this script , he should receive an email once the script completes"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": -1, "last_activity_date": 1542752003, "creation_date": 1542752003, "answer_id": 53402393, "question_id": 53401600, "link": "https://stackoverflow.com/questions/53401600/sendmail-with-the-same-from-and-to-host-names/53402393#53402393", "title": "sendmail - with the same from and to host names", "body": "<p>There's not really an \"email address\" property of a user. If you're just going through a local MTA, the user's address is generally their username, which you can retrieve with <code>scalar getpwuid $&gt;</code> on Unixlike systems.</p>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 10850601, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3R2h7RDJ9yU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYNkQa9HPTd778Jo28o4mlsEFPJpw/mo/photo.jpg?sz=128", "display_name": "Ed Grimm", "link": "https://stackoverflow.com/users/10850601/ed-grimm"}, "is_accepted": false, "score": 0, "last_activity_date": 1550030582, "last_edit_date": 1550030582, "creation_date": 1547595908, "answer_id": 54208441, "question_id": 53401600, "link": "https://stackoverflow.com/questions/53401600/sendmail-with-the-same-from-and-to-host-names/54208441#54208441", "title": "sendmail - with the same from and to host names", "body": "<p>Given your code of</p>\n\n<pre><code>open(Mail, \"|/usr/sbin/sendmail -t\");\nprint MAIL \"To: $to\\n\"\nprint MAIL $msg\nclose(MAIL)\n</code></pre>\n\n<p>I'll suggest adding in front of that</p>\n\n<pre><code>$to ||= $ENV{SUDO_USER} || $ENV{USERNAME} || $ENV{LOGNAME} || $ENV{USER} || getpwuid $&lt;;\n</code></pre>\n\n<p>While I'm at it, I'll recommend you add an extra newline after your last header, so that if $msg just happens to start with something that might look like a header, it won't be used as a header.  Unless that's actually behavior you're depending on... (But I'd recommend not depending on that behavior...)</p>\n"}], "owner": {"reputation": 41, "user_id": 7238722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf11475935d44a1d58993dea808b55ad?s=128&d=identicon&r=PG&f=1", "display_name": "seek", "link": "https://stackoverflow.com/users/7238722/seek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550030582, "creation_date": 1542748329, "question_id": 53401600, "link": "https://stackoverflow.com/questions/53401600/sendmail-with-the-same-from-and-to-host-names", "title": "sendmail - with the same from and to host names", "body": "<p>I'm using sendmail in a perl script, and would like to get the \"To\" address from the user who invoked the script. </p>\n\n<p>In other words I would like the from and to address to be same. How do I do that ?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["perl", "ssl", "ssl-certificate", "io-socket-ssl"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1542743803, "post_id": 53400241, "comment_id": 93676368, "body": "Try with <code>SSL_ca_path</code>/<code>SSL_ca_file</code> to set things with the specific certificate you get (but you will have to maintain that each time it changes). The checks on hostname happens after the CA check. You may see people advising to remove any checks with <code>SSL_verify_mode =&gt; SSL_VERIFY_NONE</code> but that would be a very dangerous idea, so not to follow."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1542744007, "post_id": 53400241, "comment_id": 93676461, "body": "@PatrickMevzek How is that more dangerous than trusting self-signed certificates?"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1542744501, "post_id": 53400241, "comment_id": 93676689, "body": "@melpomene The difference between trusting <b>one</b> specific certificate that you <b>specifically</b> added in your code/configuration (after having made sure it is the correct one) and trusting <b>any</b> random certificate that you know nothing about. TLS provides multiple guarantees and while people concentrate on integrity, in fact authentication is more important. Which is why removing any kind of authentication is almost always a bad idea, as in the end you can have an hypersecure confidential connection... to some endpoint that is not the one you think you connect to."}], "answers": [{"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1542800585, "post_id": 53400705, "comment_id": 93697348, "body": "yes, but How to get cert&#39;s pubkey and save it locally If I only have access to host:port of service. To trust this self-signed certificate I can <a href=\"https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning#What_Is_Pinning.3F\" rel=\"nofollow noreferrer\">pine</a> it by set <a href=\"https://metacpan.org/pod/IO::Socket::SSL#SSL_fingerprint\" rel=\"nofollow noreferrer\"><code>SSL_fingerprint</code></a>. But connection, as you can see, is not established: <code>SSL connect attempt failed</code>. today hoster give me pubkey and its finger print: <code>SHA256 Fingerprint=E0:3F:F1:4E:06:18:F7:93:34:6F:91:77:7F:C0:9E:3A:&zwnj;&#8203;CF:93:F5:BC:12:71:38&zwnj;&#8203;:30:AC:87:5E:21:7E:C&zwnj;&#8203;B:7A:58</code>"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1542800615, "post_id": 53400705, "comment_id": 93697364, "body": "But this format is differ from <code>IO::Socket::SSL</code> module format."}, {"owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1542868043, "post_id": 53400705, "comment_id": 93724211, "body": "<a href=\"https://unix.stackexchange.com/questions/368123/how-to-extract-the-root-ca-and-subordinate-ca-from-a-certificate-chain-in-linux\" title=\"how to extract the root ca and subordinate ca from a certificate chain in linux\">unix.stackexchange.com/questions/368123/&hellip;</a> might help you in extracting the certificate authority files from the web service. I searched google for &quot;get ca file from website&quot;."}, {"owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 1, "creation_date": 1542868486, "post_id": 53400705, "comment_id": 93724375, "body": "Otherwise you can try using something like <code>SSL_verify_mode =&gt; SSL_VERIFY_NONE</code>, which might make things work. In this mode communication will be encrypted but it will not verify the identity of the server that it is talking with, so impersonation or man-in-the-middle attacks may not be detected."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1542877344, "post_id": 53400705, "comment_id": 93728544, "body": "Thanks. I have found the way how to extract cert. As you can see the fingerprint format is not suitable for IO::Socket::SSL module. I convert it manually =("}], "tags": [], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "is_accepted": false, "score": 1, "last_activity_date": 1542745065, "last_edit_date": 1542745065, "creation_date": 1542744187, "answer_id": 53400705, "question_id": 53400241, "link": "https://stackoverflow.com/questions/53400241/how-to-verify-self-signed-certificate/53400705#53400705", "title": "How to verify self-signed certificate?", "body": "<p><code>IO::Socket::SSL</code> can verify self signed certificate only if it trusts the certificate authority file that you use to <a href=\"https://stackoverflow.com/questions/21297139/how-do-you-sign-a-certificate-signing-request-with-your-certification-authority/21340898#21340898\">self sign the certificate</a>.</p>\n\n<p>I think you need to pass proper <code>SSL_ca_file</code> or <code>SSL_ca_path</code> to <code>IO::Socket::SSL</code> so that certificate authority file is accessible to it. This is the first thing mentioned in <a href=\"https://metacpan.org/pod/IO::Socket::SSL#Common-Usage-Errors\" rel=\"nofollow noreferrer\">common usage errors</a> section of <code>IO::Socket::SSL</code> docs.</p>\n"}, {"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1542946459, "creation_date": 1542946459, "answer_id": 53440574, "question_id": 53400241, "link": "https://stackoverflow.com/questions/53400241/how-to-verify-self-signed-certificate/53440574#53440574", "title": "How to verify self-signed certificate?", "body": "<p>Using the fingerprint is probably the easiest way to verify a self-signed certificate which is in your own control. When using <code>SSL_fingerprint</code> it will not care about any other kind of validations, i.e. not check the name, revocation, expiration etc anymore - so if you want to have checks for this too you should not use <code>SSL_fingerprint</code>.</p>\n\n<p>Getting the fingerprint of a site can be done by connecting to the site once without validation (since you have no trust in the certificate yet) and getting the fingerprint  or by getting the fingerprint from the certificate directly.</p>\n\n<p>To get the fingerprint by asking the server, assuming that the connection is not intercepted so that you get the correct fingerprint:</p>\n\n<pre><code>use IO::Socket::SSL;\nprint IO::Socket::SSL-&gt;new(\n    PeerHost =&gt; 'example.com:443',\n    # switch off validation since the certificate is not trusted yet\n    SSL_verify_mode =&gt; SSL_VERIFY_NONE,\n)-&gt;get_fingerprint,\"\\n\";\n</code></pre>\n\n<p>This currently gives <code>sha256$642de54d84c30494157f53f657bf9f89b4ea6c8b16351fd7ec258d556f821040</code> which can be directly used as argument for <code>SSL_fingerprint</code>.</p>\n\n<p>If you have instead the certificate for the site already you can compute the fingerprint directly on it:</p>\n\n<pre><code># get the certificate\n$ openssl s_client -connect example.com:443 -servername example.com \n...\n-----BEGIN CERTIFICATE-----\nMIIF8jCCBNqgAwIBAgIQDmTF+8I2reFLFyrrQceMsDANBgkqhkiG9w0BAQsFADBw\n...\n-----END CERTIFICATE-----\n\n# take this PEM certificate and get fingerprint\n$ openssl x509 -fingerprint -sha256 -noout -in cert.pem\nSHA256 Fingerprint=64:2D:E5:4D:84:C3:04:94:15:7F:53:F6:57:BF:9F:89:B4:EA:6C:8B:16:35:1F:D7:EC:25:8D:55:6F:82:10:40\n</code></pre>\n\n<p>The shown fingerprint is practically the same as before, only written in a different way. By removing all ':' (which are only there for readability) one gets <code>642DE5....1040</code> and by prefixing it with the used hash algorithm <code>sha256</code> one gets something to be usable in <code>SSL_fingerprint</code>: <code>sha256$642DE5...1040</code>.</p>\n\n<p>To use the fingerprint then to connect to the site:</p>\n\n<pre><code>my $cl = IO::Socket::SSL-&gt;new(\n    PeerHost =&gt; 'example.com:443',\n    SSL_fingerprint =&gt; 'sha256$642DE5...1040'\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 12402878, "user_type": "registered", "profile_image": "https://graph.facebook.com/568673483958582/picture?type=large", "display_name": "Reto Sch&#228;r", "link": "https://stackoverflow.com/users/12402878/reto-sch%c3%a4r"}, "is_accepted": false, "score": 0, "last_activity_date": 1581892608, "creation_date": 1581892608, "answer_id": 60253848, "question_id": 53400241, "link": "https://stackoverflow.com/questions/53400241/how-to-verify-self-signed-certificate/60253848#60253848", "title": "How to verify self-signed certificate?", "body": "<p>Typically this occurs when encrypting via localhost, where a certificate per se hardly plays a role.</p>\n\n<p>Modules that involve IO::Socket::SSL can be used with an additional parameter to prevent crashing with \"certificate verify failed\".</p>\n\n<p>To solve that issue in the long-term, at the top, add this line:</p>\n\n<pre><code>use IO::Socket::SSL qw(SSL_VERIFY_NONE);\n\n$smtp = Net::SMTPS-&gt;new('localhost',\n   doSSL =&gt; 'starttls',\n   Port =&gt; 587,\n   SSL_verify_mode =&gt; SSL_VERIFY_NONE\n);\n</code></pre>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1679, "favorite_count": 0, "accepted_answer_id": 53440574, "answer_count": 3, "score": 2, "last_activity_date": 1581892608, "creation_date": 1542742240, "question_id": 53400241, "link": "https://stackoverflow.com/questions/53400241/how-to-verify-self-signed-certificate", "title": "How to verify self-signed certificate?", "body": "<p>I use <code>Net::Jabber::Client</code> to send messages via XMPP.</p>\n\n<p>The server I am connecting to uses self-signed certificate:</p>\n\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:2853: new ctx 45728400\nDEBUG: .../IO/Socket/SSL.pm:1540: start handshake\nDEBUG: .../IO/Socket/SSL.pm:717: ssl handshake not started\nDEBUG: .../IO/Socket/SSL.pm:750: using SNI with hostname my.host.name\nDEBUG: .../IO/Socket/SSL.pm:785: request OCSP stapling\nDEBUG: .../IO/Socket/SSL.pm:806: set socket to non-blocking to enforce timeout=10\nDEBUG: .../IO/Socket/SSL.pm:819: call Net::SSLeay::connect\nDEBUG: .../IO/Socket/SSL.pm:822: done Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:832: ssl handshake in progress\nDEBUG: .../IO/Socket/SSL.pm:842: waiting for fd to become ready: SSL wants a read first\nDEBUG: .../IO/Socket/SSL.pm:862: socket ready, retrying connect\nDEBUG: .../IO/Socket/SSL.pm:819: call Net::SSLeay::connect\nDEBUG: .../IO/Socket/SSL.pm:2754: did not get stapled OCSP response\nDEBUG: .../IO/Socket/SSL.pm:2707: ok=0 [0] /CN=my.host.name/CN=my.host.name\nDEBUG: .../IO/Socket/SSL.pm:822: done Net::SSLeay::connect -&gt; -1\nDEBUG: .../IO/Socket/SSL.pm:825: SSL connect attempt failed\n\nDEBUG: .../IO/Socket/SSL.pm:825: local error: SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed\nDEBUG: .../IO/Socket/SSL.pm:828: fatal SSL error: SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed\nDEBUG: .../IO/Socket/SSL.pm:1963: downgrading SSL only, not closing socket\nDEBUG: .../IO/Socket/SSL.pm:2875: free ctx 45728400 open=\nDEBUG: .../IO/Socket/SSL.pm:2879: free ctx 45728400 callback\nDEBUG: .../IO/Socket/SSL.pm:2886: OK free ctx 45728400\n</code></pre>\n\n<p>I have found that I can pass <code>SSL_fingerprint</code> and/or <code>SSL_verifycn_name</code> to pass verification of self-signed certificate.</p>\n\n<p>To make it just work I hack <a href=\"https://metacpan.org/source/DAPATRICK/XML-Stream-1.24/lib/XML/Stream.pm#L635\" rel=\"nofollow noreferrer\">this</a></p>\n\n<pre><code>my %ssl_params = (\n    SSL_verify_mode =&gt; $self-&gt;{SIDS}-&gt;{newconnection}-&gt;{ssl_verify},\n    SSL_hostname    =&gt; 'my.host.name',\n    SSL_verifycn_name =&gt; 'my.host.name',\n);\n</code></pre>\n\n<p>without success =(</p>\n\n<p>I try to use <code>-&gt;get_fingerprint</code> to obtain finger print and pass it to <code>SSL_fingerprint</code> parameter, but:</p>\n\n<pre><code>IO::Socket::SSL-&gt;start_SSL(\n    $self-&gt;{SIDS}-&gt;{$sid}-&gt;{sock},\n    $self-&gt;{SIDS}-&gt;{$sid}-&gt;{ssl_params}\n) or die \"$IO::Socket::SSL::SSL_ERROR\";\n</code></pre>\n\n<p>fail with error:</p>\n\n<pre><code>SSL connect attempt failed error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed at\n</code></pre>\n\n<p>Which option to pass to <code>IO::Socket::SSL</code> to verify self-signed certificate?</p>\n"}, {"tags": ["perl", "string-comparison"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 7, "creation_date": 1542734273, "post_id": 53398195, "comment_id": 93671621, "body": "Can you set <code>$Data::Dumper::Useqq = 1;</code> in your code before the call to <code>Dumper</code> and provide the updated output?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1542734739, "post_id": 53398195, "comment_id": 93671860, "body": "Most likely you have newlines (CR and/or LF) at the end of some data that you read from the CSV. Strip all whitespace from the end of the last item in that case."}, {"owner": {"reputation": 661, "user_id": 1542959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cead596df1e61ad864b57db8d80f543?s=128&d=identicon&r=PG", "display_name": "MadJangi", "link": "https://stackoverflow.com/users/1542959/madjangi"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1542734784, "post_id": 53398195, "comment_id": 93671880, "body": "@hobbs, great suggestion!  I&#39;ve got some leading characters in there..."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1542749042, "post_id": 53398454, "comment_id": 93678763, "body": "If you use <a href=\"https://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">Text::CSV</a> to read the CSV data (highly recommended), it will automatically deal with a BOM at the start of the header line."}], "tags": [], "owner": {"reputation": 661, "user_id": 1542959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cead596df1e61ad864b57db8d80f543?s=128&d=identicon&r=PG", "display_name": "MadJangi", "link": "https://stackoverflow.com/users/1542959/madjangi"}, "is_accepted": false, "score": 5, "last_activity_date": 1542735123, "last_edit_date": 1592644375, "creation_date": 1542735123, "answer_id": 53398454, "question_id": 53398195, "link": "https://stackoverflow.com/questions/53398195/perl-two-identical-strings-compare-as-not-equal/53398454#53398454", "title": "Perl two identical strings compare as not equal", "body": "<p>First off thanks @hobbs for the $Data::Dumper::Useqq = 1; suggestion.  It was immediately obvious that there were some leading characters that I didn't know how to detect.</p>\n<blockquote>\n<p>$VAR1 = -1;</p>\n<p>$VAR2 = &quot;Server&quot;;</p>\n<p>$VAR3 = &quot;\\357\\273\\277Server&quot;;</p>\n</blockquote>\n<p>The CSV file I am reading contained <a href=\"https://stackoverflow.com/a/24096963/1542959\">Byte Ordermarking</a> information.</p>\n<p>I'll strip them off.  Thanks all for getting me going again.</p>\n"}], "owner": {"reputation": 661, "user_id": 1542959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cead596df1e61ad864b57db8d80f543?s=128&d=identicon&r=PG", "display_name": "MadJangi", "link": "https://stackoverflow.com/users/1542959/madjangi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542735123, "creation_date": 1542734176, "last_edit_date": 1592644375, "question_id": 53398195, "link": "https://stackoverflow.com/questions/53398195/perl-two-identical-strings-compare-as-not-equal", "title": "Perl two identical strings compare as not equal", "body": "<p>Here is my code:</p>\n<pre><code>    my $self = shift;\n    my $h    = shift;\n\n    print &quot;$h\\n&quot;;\n\n    my @headers = split /,/, $h;\n\n    foreach my $el (@{$expected}) {\n            my $t = shift @headers;\n            chomp ($t);\n            chomp ($el);\n            print Dumper($el cmp $t, $el, $t);\n            print &quot;test: \\'$el\\' eq \\'$t\\' &quot;;\n            unless ($el eq $t) {\n                    print &quot;not ok $el ne $t\\n&quot;;\n                    return 0;\n            } else {\n                    print &quot;ok\\n&quot;;\n            }\n    }\n    return 1;\n</code></pre>\n<p>In my first unit test I pass a string to $h which matches $expected.\nI then have a unit test which ensure the function fails when passed a string that does not match.  These two tests behave as expected.</p>\n<blockquote>\n<p>Server,Jira Project,Issue Type,Summary,Description,Assignee,Labels,Epic Link</p>\n<p>$VAR1 = 0;</p>\n<p>$VAR2 = 'Server';</p>\n<p>$VAR3 = 'Server';</p>\n<p>test: 'Server' eq 'Server' ok</p>\n</blockquote>\n<p>When I pull the line in from a CSV file and pass it to this function I get a different response.</p>\n<blockquote>\n<p>Server,Jira Project,Issue Type,Summary,Description,Assignee,Labels,Epic Link</p>\n<p>$VAR1 = -1;</p>\n<p>$VAR2 = 'Server';</p>\n<p>$VAR3 = 'Server';</p>\n<p>test: 'Server' eq 'Server' not ok Server ne Server</p>\n</blockquote>\n<p>The compare somehow implies that the expected value is somehow less than what is being tested.  My mind immediately goes to there must be a leading or trailing character on what is being tested.  However, printing and Dumping doesn't seem to confirm that (unless I'm missing something).  The chomps are just out of sheer desperation.</p>\n<p>What am I missing?</p>\n"}, {"tags": ["java", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542742677, "post_id": 53396565, "comment_id": 93675738, "body": "In Perl, an EOL character automatically flushes standard output only <i>when standard output is connected to a terminal</i>. Setting <code>$|</code> is the solution here."}, {"owner": {"reputation": 33, "user_id": 387439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da16dffbdcc3a4c1120a1df467703825?s=128&d=identicon&r=PG", "display_name": "Subu", "link": "https://stackoverflow.com/users/387439/subu"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542775245, "post_id": 53396565, "comment_id": 93685644, "body": "@mob,  Thank you for the explanation ! This makes sense. Perhaps you could post it as an answer so I could accept it ?"}], "owner": {"reputation": 33, "user_id": 387439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da16dffbdcc3a4c1120a1df467703825?s=128&d=identicon&r=PG", "display_name": "Subu", "link": "https://stackoverflow.com/users/387439/subu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542734315, "creation_date": 1542728526, "last_edit_date": 1542734315, "question_id": 53396565, "link": "https://stackoverflow.com/questions/53396565/perl-script-called-from-a-java-process-using-process-builder-hangs-consumed-err", "title": "Perl script called from a java process using Process builder hangs (consumed error, output streams in separate threads )", "body": "<p>I'm trying to run a perl program from Java code like this : </p>\n\n<pre><code>package com.test;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Future;\n\npublic class PerlExecutor {\n\n   static ExecutorService pool = Executors.newFixedThreadPool(3);\n\n   public static void main(String[] args) throws Exception {\n       System.out.println(\"Running perl script \" + args[0]);\n       executeProcess(args[0]);\n       System.out.println(\"Done running perl script\");\n       pool.shutdownNow();\n   }\n\n  private static void executeProcess(String perlScript) throws Exception {\n\n     System.out.println(\"Execute process \" + perlScript);\n\n     String[] command = new String[]{\"perl\", perlScript};\n     ProcessBuilder pb = new ProcessBuilder(command);\n     final Process process = pb.start();\n     process.getOutputStream().close();\n\n     Callable&lt;Integer&gt; callable = new Callable&lt;Integer&gt;() {\n\n        public Integer call() throws Exception {\n            int exitCode = process.waitFor();\n            return (Integer) exitCode;\n        }\n    };\n    Callable&lt;Boolean&gt; taskOutputStreamCallable = new Callable&lt;Boolean&gt;() {\n        @Override\n        public Boolean call() throws Exception {\n            System.out.println(\"OutputStreamCallable started\");\n            readStream(process.getInputStream(), \"OUT\");\n            System.out.println(\"OutputStreamCallable finished\");\n            return true;\n        }\n    };\n\n    Callable&lt;Boolean&gt; taskErrorStreamCallable = new Callable&lt;Boolean&gt;() {\n\n        @Override\n        public Boolean call() throws Exception {\n            System.out.println(\"ErrorStreamCallable started\");\n            readStream(process.getErrorStream(), \"ERR\");\n            System.out.println(\"ErrorStreamCallable finished\");\n            return true;\n        }\n    };\n\n    pool.submit(taskErrorStreamCallable);\n    pool.submit(taskOutputStreamCallable);\n    Future&lt;Integer&gt; f = pool.submit(callable);\n\n    f.get();\n}\n\n private static void readStream(InputStream inputStream, String type) throws \n IOException {\n\n    System.out.println(\"Reading stream \" + type);\n\n    try {\n\n        int data = inputStream.read();\n        System.out.println((char) data);\n        while (data != -1) {\n            System.out.println((char) data);\n            data = inputStream.read();\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        inputStream.close();\n    }\n    System.out.println(\"finished reading stream\");\n  } \n}\n</code></pre>\n\n<p>This is my perl code : </p>\n\n<pre><code>#!/usr/local/bin/perl\n\nprint \"task START \\n\";\n\n$a = 10;\n\nwhile(1) {\n print  \"Value of a: $a\\n\";\n $a = $a + 1;\n sleep(10);\n}\n</code></pre>\n\n<p>As you can see, I've consumed the output and error streams, and closed stdin as advised <a href=\"https://stackoverflow.com/questions/33920224/bufferedreader-read-hangs-when-running-a-perl-script-using-runtime-exec\">Here</a> . </p>\n\n<p>What I notice is this :</p>\n\n<ol>\n<li>The perl program, if run by itself, does not hang.</li>\n<li>If the perl program is run from java, it hangs without printing anything from the perl program.</li>\n<li>However, it works if I add a $|++ in the perl script at the top . I was under the impression that a newline in the perl print statement should flush the buffers too, but apparently that doesn't seem to be happening, or I am missing something. </li>\n<li>If I remove the sleep  - it again works. </li>\n</ol>\n\n<p>I'm stumped here, I've done everything suggested in the links I've found so far..Can anyone give me a pointer here ? There is some combination of sleep and buffers here that seems to be causing this to fail .</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542727745, "post_id": 53395775, "comment_id": 93667918, "body": "Your original question was fine, but it contained the phrase &quot;trying to find a Perl module&quot;, which causes some people to reflexively vote to close the question as &quot;off-topic: looking for a software recommendation&quot;. So I edited it."}], "answers": [{"comments": [{"owner": {"reputation": 1511, "user_id": 1092779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50b324a33c3fd6bccdc9e50c2757424d?s=128&d=identicon&r=PG", "display_name": "quicoju", "link": "https://stackoverflow.com/users/1092779/quicoju"}, "edited": false, "score": 0, "creation_date": 1542791558, "post_id": 53396144, "comment_id": 93692109, "body": "This is what I needed. I just had to put &quot;&amp;SYS_getsid&quot; instead of &quot;SYS_getsid&quot; in the &quot;syscall&quot;. Thanks."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1542727144, "creation_date": 1542727144, "answer_id": 53396144, "question_id": 53395775, "link": "https://stackoverflow.com/questions/53395775/perl-retrieve-unix-session-id-and-session-leader/53396144#53396144", "title": "Perl retrieve Unix session ID and session leader", "body": "<p>Try the builtin <a href=\"http://metacpan.org/pod/perlfunc#syscall\" rel=\"nofollow noreferrer\"><code>syscall</code></a> function</p>\n\n<pre><code>require 'syscall.ph';\n$sid = syscall(SYS_getsid, $process_id);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 2, "last_activity_date": 1542727673, "last_edit_date": 1592644375, "creation_date": 1542727673, "answer_id": 53396293, "question_id": 53395775, "link": "https://stackoverflow.com/questions/53395775/perl-retrieve-unix-session-id-and-session-leader/53396293#53396293", "title": "Perl retrieve Unix session ID and session leader", "body": "<p>There's a <code>getsid</code> in <a href=\"https://metacpan.org/pod/distribution/POSIX-2008/lib/POSIX/2008.pod#getsid\" rel=\"nofollow noreferrer\">POSIX::2008</a>:</p>\n<blockquote>\n<p><strong>getsid</strong></p>\n<p>sid = getsid(pid);</p>\n<p><em>pid</em> defaults to 0.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1542750313, "last_edit_date": 1542750313, "creation_date": 1542749915, "answer_id": 53401968, "question_id": 53395775, "link": "https://stackoverflow.com/questions/53395775/perl-retrieve-unix-session-id-and-session-leader/53401968#53401968", "title": "Perl retrieve Unix session ID and session leader", "body": "<p>You can use <a href=\"https://metacpan.org/pod/FFI::Platypus\" rel=\"nofollow noreferrer\">FFI::Platypus</a> to easily create a Perl interface to such a function with libffi. This one is nice and simple, since it just takes one integer and returns one integer, but I still like to add more Perlish argument and error handling, which FFI::Platypus's attach method allows.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse FFI::Platypus;\nuse Carp 'croak';\nuse feature 'say';\n\nmy $ffi = FFI::Platypus-&gt;new;\n$ffi-&gt;lib(undef);\n\n$ffi-&gt;attach(getsid =&gt; ['int'] =&gt; 'int' =&gt; sub {\n  my $xsub = shift;\n  my $rc = $xsub-&gt;(@_ ? $_[0] : 0);\n  croak \"$!\" if $rc &lt; 0;\n  return $rc;\n});\n\nsay getsid();\nsay getsid(0);\nsay getsid($$);\nsay getsid(1);\nsay getsid(-1);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3276\n3276\n3276\n1\nNo such process at ...\n</code></pre>\n"}], "owner": {"reputation": 1511, "user_id": 1092779, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/50b324a33c3fd6bccdc9e50c2757424d?s=128&d=identicon&r=PG", "display_name": "quicoju", "link": "https://stackoverflow.com/users/1092779/quicoju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 53396144, "answer_count": 3, "score": 0, "last_activity_date": 1542750313, "creation_date": 1542725971, "last_edit_date": 1542727659, "question_id": 53395775, "link": "https://stackoverflow.com/questions/53395775/perl-retrieve-unix-session-id-and-session-leader", "title": "Perl retrieve Unix session ID and session leader", "body": "<p>I need to determine the session ID of the current process and the session leader. I see that the <a href=\"https://metacpan.org/pod/distribution/perl/ext/POSIX/lib/POSIX.pod\" rel=\"nofollow noreferrer\">POSIX</a> module implements <a href=\"https://metacpan.org/pod/distribution/perl/ext/POSIX/lib/POSIX.pod#setsid\" rel=\"nofollow noreferrer\">\"setsid\"</a> but not <a href=\"http://man7.org/linux/man-pages/man2/getsid.2.html\" rel=\"nofollow noreferrer\">\"getsid\"</a>. Is there any way to grab this information in Perl?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1542713142, "post_id": 53391900, "comment_id": 93659186, "body": "Like <code>sprintf(&#39;%.2e&#39;, 0.000002753) =~ s&#47;[eE]([-+]?)0*(\\d+)\\z&#47;*10^{$1$2}&#47;r</code>?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1542713507, "post_id": 53391900, "comment_id": 93659387, "body": "Uh... try printing the result? Or assigning it to a variable or whatever?"}, {"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1586626962, "post_id": 53391900, "comment_id": 108198774, "body": "<a href=\"https://metacpan.org/pod/Number::FormatEng\" rel=\"nofollow noreferrer\">Number::FormatEng</a> is for <b>engineering</b> notation, not <b>scientific</b> notation; there is a subtle difference."}], "answers": [{"tags": [], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "is_accepted": false, "score": 1, "last_activity_date": 1542718502, "creation_date": 1542718502, "answer_id": 53393465, "question_id": 53391900, "link": "https://stackoverflow.com/questions/53391900/decimal-to-scientific-notation/53393465#53393465", "title": "Decimal to Scientific Notation", "body": "<p>Credits goes to <a href=\"https://stackoverflow.com/questions/53391900/decimal-to-scientific-notation-in-perl-script?noredirect=1#\">@melpomene from the comments on my question</a>:</p>\n\n<pre><code>while($val=~m/\\\\num{([^{}]*)\\}/g)\n{\n    my $nums = $1;\n    my $vals = sprintf('%.2e', $nums) =~ s/[eE]([-+]?)0*(\\d+)\\z/*10^{$1$2}/r;\n\n    print \"OrgVals: $nums\\t: ConvVals: $vals\\n\";\n}\n\nOrgVals: 0.000002753    : ConvVals: 2.75*10^{-6}\nOrgVals: 0.000004784    : ConvVals: 4.78*10^{-6}\nOrgVals: 0.000050934    : ConvVals: 5.09*10^{-5}\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1586627137, "creation_date": 1542712836, "last_edit_date": 1586627137, "question_id": 53391900, "link": "https://stackoverflow.com/questions/53391900/decimal-to-scientific-notation", "title": "Decimal to Scientific Notation", "body": "<p>I need to convert decimal values to scientific notation:</p>\n\n<p>Source coding: <code>\\num{0.000002753}</code></p>\n\n<p>My Code (Referred in Internet):</p>\n\n<pre><code>use Number::FormatEng qw(:all);\nprint format_eng(0.000002753); \nprint \"\\n\";\n</code></pre>\n\n<p>Converted Output is: <code>2.753e-6</code></p>\n\n<p>However, my expected output is: <code>2.75*10^{-6}</code> </p>\n\n<p>Could someone provide the way to sort this issue out?</p>\n"}, {"tags": ["perl", "thruk"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 2, "creation_date": 1542720784, "post_id": 53391138, "comment_id": 93663628, "body": "Would have loved to have helped, but your question is unclear and incomplete.."}], "answers": [{"tags": [], "owner": {"reputation": 100, "user_id": 879195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a67c636eb703217fef7309dda8b2b6?s=128&d=identicon&r=PG", "display_name": "sni", "link": "https://stackoverflow.com/users/879195/sni"}, "is_accepted": false, "score": 0, "last_activity_date": 1542798157, "creation_date": 1542798157, "answer_id": 53410708, "question_id": 53391138, "link": "https://stackoverflow.com/questions/53391138/thruk-scripted-dashboard-get-params-from-query-string/53410708#53410708", "title": "Thruk - Scripted Dashboard - get params from query string", "body": "<p>That is not possible right now, but might be in future versions. It might be a bit tricky because there can be multiple dashboard opened at once which all have different parameters.</p>\n"}], "owner": {"reputation": 11, "user_id": 10679553, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lrTJexsfHvQ/AAAAAAAAAAI/AAAAAAAAAF4/mFdH2Ropdos/photo.jpg?sz=128", "display_name": "Le Duigou Laurent", "link": "https://stackoverflow.com/users/10679553/le-duigou-laurent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542798157, "creation_date": 1542710258, "last_edit_date": 1542715718, "question_id": 53391138, "link": "https://stackoverflow.com/questions/53391138/thruk-scripted-dashboard-get-params-from-query-string", "title": "Thruk - Scripted Dashboard - get params from query string", "body": "<p>Is it possible to get query string in scripted dashboard ? </p>\n\n<p>I tried to use <code>CGI</code> <code>perl</code> module in scripted dashboard, but with no success.</p>\n\n<p>The idea is to use scripted dashboard as template to generate thruk maps on the fly by using query params.</p>\n"}, {"tags": ["arrays", "perl", "sorting"], "comments": [{"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1542699875, "post_id": 53388200, "comment_id": 93652045, "body": "I see. I edit my post"}], "answers": [{"tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": true, "score": 7, "last_activity_date": 1542701941, "creation_date": 1542701941, "answer_id": 53388789, "question_id": 53388200, "link": "https://stackoverflow.com/questions/53388200/how-to-make-the-sort-function-working-well-in-perl/53388789#53388789", "title": "How to make the sort function working well in Perl?", "body": "<p>I see at least two problems</p>\n\n<ul>\n<li><code>push my @entries</code> redefines entries every time?</li>\n<li>your print line doesn't correspond with your desired output</li>\n</ul>\n\n<p>I took your code and rewrote it like this (I replace the TAB in your data with single space to make sure it survives inserting into this page):</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @entries;\nwhile (&lt;DATA&gt;) {\n   chomp(my $in=$_);\n   my @array = split(' ', $in);\n   $array[2] =~s/X/39/;\n\n   push(@entries, {\n       CHR =&gt; $array[2],\n       SNP =&gt; $array[1],\n       GEN =&gt; '0',\n       POS =&gt; $array[3],\n   })\n}\n\nforeach my $row (@entries) {\n    print join(\"\\t\", @{$row}{qw(CHR POS GEN SNP)}), \"\\n\";\n}\nprint \"\\n\";\n\nmy @sorted = sort {\n    $a-&gt;{CHR} &lt;=&gt; $b-&gt;{CHR} ||\n    $a-&gt;{POS} &lt;=&gt; $b-&gt;{POS} }\n    @entries;\n\nforeach my $row (@sorted) {\n    print join(\"\\t\", @{$row}{qw(CHR POS GEN SNP)}), \"\\n\";\n}\n\n__DATA__\n1 BICF2G630100019 1 31558578 0.8987 [A/G] TOP BOT 1\n2 BICF2G630100032 3 31570089 0.8963 [A/G] TOP BOT 1\n3 BICF2G630100034 2 31571436 0.9015 [A/G] TOP TOP 1\n4 BICF2G630100043 4 31596554 0.8337 [A/G] TOP TOP 1\n5 BICF2G630100054 1 31614639 0.9002 [T/C] BOT BOT 1\n6 BICF2G630100063 2 31625208 0.8962 [A/G] TOP BOT 1\n7 BICF2G630100075 3 31648688 0.8502 [A/C] TOP BOT 1\n</code></pre>\n\n<p>Output from my test run:</p>\n\n<pre><code>1       31558578        0       BICF2G630100019\n3       31570089        0       BICF2G630100032\n2       31571436        0       BICF2G630100034\n4       31596554        0       BICF2G630100043\n1       31614639        0       BICF2G630100054\n2       31625208        0       BICF2G630100063\n3       31648688        0       BICF2G630100075\n\n1       31558578        0       BICF2G630100019\n1       31614639        0       BICF2G630100054\n2       31571436        0       BICF2G630100034\n2       31625208        0       BICF2G630100063\n3       31570089        0       BICF2G630100032\n3       31648688        0       BICF2G630100075\n4       31596554        0       BICF2G630100043\n</code></pre>\n\n<p>The latter looks like what you wanted, correct?</p>\n"}], "owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 53388789, "answer_count": 1, "score": 0, "last_activity_date": 1542701941, "creation_date": 1542699185, "last_edit_date": 1542699836, "question_id": 53388200, "link": "https://stackoverflow.com/questions/53388200/how-to-make-the-sort-function-working-well-in-perl", "title": "How to make the sort function working well in Perl?", "body": "<p>I have a 9 columns txt files. I open and read it into array</p>\n\n<pre><code>   #! /util/bin/perl\n   use strict;\n   use warnings;\n   open (I,\"Map.txt\") || die \"$!\\n \";\n   chomp (my $header =&lt;I&gt;);\n   while (&lt;I&gt;){\n   chomp(my $in=$_);\n   my (@array) = split('\\t',$in);\n   $array[2] =~s/X/39/;\n</code></pre>\n\n<p>I only need extract 3 columns and print out in the order by 2 columns.</p>\n\n<pre><code>   push my @entries, {\n   CHR =&gt; $array[2],\n   SNP =&gt; $array[1],\n   GEN =&gt; '0',\n   POS =&gt; $array[3],};\n\n\n   my @sorted = sort {\n   $a-&gt;{CHR} &lt;=&gt; $b-&gt;{CHR} ||\n   $a-&gt;{POS} &lt;=&gt; $b-&gt;{POS} } @entries;\n\n   foreach my $row (@sorted) {\n\n  print $row-&gt;{CHR}, \"\\t\" , $row-&gt;{SNP}, \"\\t\" , $row-&gt;{GEN},\"\\t\",$row-&gt;{POS}, \"\\n\";}  \n</code></pre>\n\n<p>I am not sure why my sort function can not work. Is it because something wrong with push step?  </p>\n\n<p>Input:  </p>\n\n<pre><code> 1  BICF2G630100019 1   31558578    0.8987  [A/G]   TOP BOT 1  \n 2  BICF2G630100032 3   31570089    0.8963  [A/G]   TOP BOT 1  \n 3  BICF2G630100034 2   31571436    0.9015  [A/G]   TOP TOP 1  \n 4  BICF2G630100043 4   31596554    0.8337  [A/G]   TOP TOP 1  \n 5  BICF2G630100054 1   31614639    0.9002  [T/C]   BOT BOT 1  \n 6  BICF2G630100063 2   31625208    0.8962  [A/G]   TOP BOT 1  \n 7  BICF2G630100075 3   31648688    0.8502  [A/C]   TOP BOT 1  \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1   BICF2G630100019 0   31558578  \n3   BICF2G630100032 0   31570089  \n2   BICF2G630100034 0   31571436  \n4   BICF2G630100043 0   31596554  \n1   BICF2G630100054 0   31614639  \n2   BICF2G630100063 0   31625208  \n3   BICF2G630100075 0   31648688  \n</code></pre>\n\n<p>Wanted Output:</p>\n\n<pre><code>1   31558578    0   BICF2G630100019  \n1   31614639    0   BICF2G630100054  \n2   31571436    0   BICF2G630100034  \n2   31625208    0   BICF2G630100063  \n3   31570089    0   BICF2G630100032  \n3   31648688    0   BICF2G630100075  \n4   31596554    0   BICF2G630100043  \n</code></pre>\n"}, {"tags": ["python", "regex", "xml", "perl", "csv"], "comments": [{"owner": {"reputation": 397, "user_id": 6043083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A2NK7.jpg?s=128&g=1", "display_name": "Rohit Nandi", "link": "https://stackoverflow.com/users/6043083/rohit-nandi"}, "edited": false, "score": 0, "creation_date": 1542698305, "post_id": 53386889, "comment_id": 93651353, "body": "Are you looking for a programming language specific answer ? Please state the details of language, framework you are using for rest of the application?"}, {"owner": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "reply_to_user": {"reputation": 397, "user_id": 6043083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A2NK7.jpg?s=128&g=1", "display_name": "Rohit Nandi", "link": "https://stackoverflow.com/users/6043083/rohit-nandi"}, "edited": false, "score": 0, "creation_date": 1542751751, "post_id": 53386889, "comment_id": 93679970, "body": "I am not sure if this could be programming language specific, as there might be different solutions in different langs. I have tried with sed and perl, but it is a tedious process, as reading each value from the CSV and then searching in a 17M line file multiple times is very resource intensive."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1542773031, "post_id": 53386889, "comment_id": 93685173, "body": "there are 3 &lt;string&gt; tags from which we are not able to distinguish the id that you are mentioning."}, {"owner": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1542774967, "post_id": 53386889, "comment_id": 93685573, "body": "@stack0114106 the userID field can come up anywhere in the file, and as I have mentioned, there is no particular pattern that I have been able to use to search, except use the string from the CSV file to find the string in the XML file."}], "answers": [{"comments": [{"owner": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "edited": false, "score": 0, "creation_date": 1543549491, "post_id": 53405304, "comment_id": 93967877, "body": "The script above just replaces the first instance of the &quot;string&quot;, if there are more, then will need to modify it to run"}], "tags": [], "owner": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "is_accepted": false, "score": 0, "last_activity_date": 1542774809, "creation_date": 1542774809, "answer_id": 53405304, "question_id": 53386889, "link": "https://stackoverflow.com/questions/53386889/replace-multiple-strings-in-xml-using-a-key-value-pair-in-a-csv-file/53405304#53405304", "title": "Replace multiple strings in XML using a key-&gt;value pair in a CSV file", "body": "<p>Created a script using Python3, which takes in the input as the CSV and the XML file and outputs an XML file with the changes. The command is:</p>\n\n<pre><code>python xml_converter.py \u2013csvfile file.csv \u2013xmlfile file.xml \u2013outfile output_file.xml\n</code></pre>\n\n<p>Not totally optimized as I would want it to be and running on a single thread, and assumption is that the files are utf-8 encoded.  </p>\n\n<pre><code>usage: Replace username to user email of a given xml file\n       [-h] --csvfile CSVFILE --xmlfile XMLFILE --outfile OUTFILE\n\noptional arguments:\n  -h, --help         show this help message and exit\n  --csvfile CSVFILE  csv file that provide user name and email pair\n  --xmlfile XMLFILE  xml file that to be searched and replaced\n  --outfile OUTFILE  output file name\n</code></pre>\n\n<p>The basic script is:</p>\n\n<pre><code>class XMLConvert:\n    def __init__(self, csv, xml, out):\n        self._csv = csv\n        self._xml = xml\n        self._out = out\n\n        self._kv_dict = self.prepare_kv_dict()\n\n    def prepare_kv_dict(self):\n        with open(self._csv, newline='', encoding='utf-8') as f:\n            reader = csv.reader(f)\n            result = dict()\n            for row in reader:\n                result[row[1]] = row[2]\n        return result\n\n    def convert(self):\n        with open(self._xml, 'r', encoding='utf-8') as f:\n            for line in f:\n                _line = self.convert_line(line)\n                yield _line\n\n    def convert_line(self, line):\n        # self._kv_dict = {'lasfir1': 'First.Name@abc.com'}\n        for k, v in self._kv_dict.items():\n            if k.lower() in line:\n                # print(line)\n                return re.sub(r'{}'.format(k), v, line)\n        return line\n\n    def start(self):\n        with open(self._out, 'w', encoding='utf-8') as f:\n            for line in self.convert():\n                f.write(line)\n\n\nif __name__ == '__main__':\n    csv_file, xml_file, out_file = parse_args()\n    converter = XMLConvert(csv_file, xml_file, out_file)\n    converter.start()\n</code></pre>\n\n<p>I am trying to add threads and modify it accordingly to optimize the running of it. If anyone has a better way then please do inform.</p>\n"}, {"comments": [{"owner": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "edited": false, "score": 0, "creation_date": 1543356871, "post_id": 53406043, "comment_id": 93887899, "body": "when I run this script, it gives me an error sometimes: &quot;The specified path is invalid.&quot;  The command is: perl -ne &#39;BEGIN { %kv=map{chomp;(split(&quot;,&quot;,$_))[1,0] } qx(cat users.csv) ; $content=qx(cat entities_email.xml);while($content=~/(&lt;row&gt;)(.*?)(&lt;\\/row&gt;)/s&zwnj;&#8203;mg) { $xml=$2;foreach $y (keys %kv) { $xml=~s/${y}/$kv{$y}/gm; } print &quot;$1$xml$3\\n&quot;; } exit }, and both the files are available in the folder in which I am running the command. This is on a Windows10 command line."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "reply_to_user": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "edited": false, "score": 0, "creation_date": 1543375918, "post_id": 53406043, "comment_id": 93892796, "body": "can you share the sample xml"}, {"owner": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "edited": false, "score": 0, "creation_date": 1543549518, "post_id": 53406043, "comment_id": 93967885, "body": "it is a 1.7GB file. :-("}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": true, "score": 1, "last_activity_date": 1542780516, "last_edit_date": 1542780516, "creation_date": 1542779845, "answer_id": 53406043, "question_id": 53386889, "link": "https://stackoverflow.com/questions/53386889/replace-multiple-strings-in-xml-using-a-key-value-pair-in-a-csv-file/53406043#53406043", "title": "Replace multiple strings in XML using a key-&gt;value pair in a CSV file", "body": "<p>Check out this Perl one liner solution:</p>\n\n<pre><code>$ cat gagneet.csv\nFirstName.LastName@abc.com,lasfir1\nFarstName.ListName@abc.com,lisfar1\nLastName.FirstName@abc.com,firlas1\n\n$ cat gagneet.xml\n&lt;row&gt;\n  &lt;string&gt;&lt;/string&gt;\n  &lt;integer&gt;2177&lt;/integer&gt;\n  &lt;string&gt;assignee =lasfir1 &lt;/string&gt;\n  &lt;string&gt;Firstname Lastname&lt;/string&gt;\n  &lt;integer&gt;10&lt;/integer&gt;\n  &lt;string xsi:nil=\"true\"/&gt;\n  &lt;integer&gt;450&lt;/integer&gt;\n&lt;/row&gt;\n\n. . . . \n. . . . \n\n$ perl -ne 'BEGIN { %kv=map{chomp;(split(\",\",$_))[1,0] } qx(cat gagneet.csv) ; $content=qx(cat gagneet.xml);while($content=~/(&lt;row&gt;)(.*?)(&lt;\\/row&gt;)/smg) { $xml=$2;forea\nch $y (keys %kv) { $xml=~s/${y}/$kv{$y}/gm; } print \"$1$xml$3\\n\"; } exit } '\n&lt;row&gt;\n  &lt;string&gt;&lt;/string&gt;\n  &lt;integer&gt;2177&lt;/integer&gt;\n  &lt;string&gt;assignee =FirstName.LastName@abc.com &lt;/string&gt;\n  &lt;string&gt;Firstname Lastname&lt;/string&gt;\n  &lt;integer&gt;10&lt;/integer&gt;\n  &lt;string xsi:nil=\"true\"/&gt;\n  &lt;integer&gt;450&lt;/integer&gt;\n&lt;/row&gt;\n&lt;row&gt;\n  &lt;string&gt;#ffd600&lt;/string&gt;\n  &lt;integer&gt;2199&lt;/integer&gt;\n  &lt;integer&gt;23&lt;/integer&gt;\n  &lt;integer&gt;474&lt;/integer&gt;\n  &lt;string&gt;assignee&lt;/string&gt;\n  &lt;string&gt;FirstName.LastName@abc.com&lt;/string&gt;\n&lt;/row&gt;\n&lt;row&gt;\n  &lt;integer&gt;1536&lt;/integer&gt;\n  &lt;string&gt;FirstName.LastName@abc.com&lt;/string&gt;\n  &lt;integer&gt;235&lt;/integer&gt;\n  &lt;string&gt;USER&lt;/string&gt;\n&lt;/row&gt;\n&lt;row&gt;\n  &lt;string&gt;#ffd610&lt;/string&gt;\n  &lt;integer&gt;2200&lt;/integer&gt;\n  &lt;integer&gt;25&lt;/integer&gt;\n  &lt;integer&gt;464&lt;/integer&gt;\n  &lt;string&gt;assignee&lt;/string&gt;\n  &lt;string&gt;FarstName.ListName@abc.com&lt;/string&gt;\n&lt;/row&gt;\n</code></pre>\n\n<p>If you want edit only between  tags, then</p>\n\n<pre><code>$ perl -ne 'BEGIN { %kv=map{chomp;(split(\",\",$_))[1,0] } qx(cat gagneet.csv) ; $content=qx(cat gagneet.xml);while($content=~/(&lt;row&gt;)(.*?)(&lt;\\/row&gt;)/smg) { $xml=$2;forea\nch $y (keys %kv) { $xml=~s/&lt;string&gt;${y}&lt;\\/string&gt;/&lt;string&gt;$kv{$y}&lt;\\/string&gt;/gm; } print \"$1$xml$3\\n\"; } exit } '\n</code></pre>\n"}], "owner": {"reputation": 30941, "user_id": 35416, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b2cb596ff11a7972b778d9a96d429829?s=128&d=identicon&r=PG", "display_name": "gagneet", "link": "https://stackoverflow.com/users/35416/gagneet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "accepted_answer_id": 53406043, "answer_count": 2, "score": 0, "last_activity_date": 1542780516, "creation_date": 1542692507, "last_edit_date": 1542751774, "question_id": 53386889, "link": "https://stackoverflow.com/questions/53386889/replace-multiple-strings-in-xml-using-a-key-value-pair-in-a-csv-file", "title": "Replace multiple strings in XML using a key-&gt;value pair in a CSV file", "body": "<p>I have a dump from our application server which contains XML of multiple strings. I am interested in the userID, which is embedded in the XML tags and in the format of (lasfir1) as in the XML examples below:</p>\n\n<pre><code>&lt;row&gt;\n  &lt;string&gt;&lt;/string&gt;\n  &lt;integer&gt;2177&lt;/integer&gt;\n  &lt;string&gt;assignee =lasfir1 &lt;/string&gt;\n  &lt;string&gt;Firstname Lastname&lt;/string&gt;\n  &lt;integer&gt;10&lt;/integer&gt;\n  &lt;string xsi:nil=\"true\"/&gt;\n  &lt;integer&gt;450&lt;/integer&gt;\n&lt;/row&gt;\n\n&lt;row&gt;\n  &lt;string&gt;#ffd600&lt;/string&gt;\n  &lt;integer&gt;2199&lt;/integer&gt;\n  &lt;integer&gt;23&lt;/integer&gt;\n  &lt;integer&gt;474&lt;/integer&gt;\n  &lt;string&gt;assignee&lt;/string&gt;\n  &lt;string&gt;lasfir1&lt;/string&gt;\n&lt;/row&gt;\n\n&lt;row&gt;\n  &lt;integer&gt;1536&lt;/integer&gt;\n  &lt;string&gt;lasfir1&lt;/string&gt;\n  &lt;integer&gt;235&lt;/integer&gt;\n  &lt;string&gt;USER&lt;/string&gt;\n&lt;/row&gt;\n\n&lt;row&gt;\n  &lt;string&gt;#ffd610&lt;/string&gt;\n  &lt;integer&gt;2200&lt;/integer&gt;\n  &lt;integer&gt;25&lt;/integer&gt;\n  &lt;integer&gt;464&lt;/integer&gt;\n  &lt;string&gt;assignee&lt;/string&gt;\n  &lt;string&gt;lisfar1&lt;/string&gt;\n&lt;/row&gt;\n</code></pre>\n\n<p>The requirement is to convert the string \"lasfir1\" only into its equivalent Email ID, which are available in another CSV (text) file which has key->value pairing of the userID and Email ID:</p>\n\n<pre><code>FirstName.LastName@abc.com,lasfir1\nFarstName.ListName@abc.com,lisfar1\nLastName.FirstName@abc.com,firlas1\n</code></pre>\n\n<p>The XML may not always be the same, but the string will be the one to search for, not the pattern of what is ahead or behind it.</p>\n\n<p>Is there some simple way to read the key->value pair (in the CSV file), check if the key (userID) exists in the XML file and then replace it with the 'value' (Email ID)</p>\n\n<p>This is required for a set of 300+ userID and Email ID combinations, all of which might not be in the XML.</p>\n"}, {"tags": ["perl", "parsing", "text-processing"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1542688311, "post_id": 53386203, "comment_id": 93648162, "body": "You said in your question the record separator is <code>0x1e</code>, but your code is using <code>0xa</code> (newline). Which is it?"}, {"owner": {"reputation": 841, "user_id": 24382, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bef2b4df4d3581eb1947c849059d0054?s=128&d=identicon&r=PG", "display_name": "prabhu", "link": "https://stackoverflow.com/users/24382/prabhu"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1542689011, "post_id": 53386203, "comment_id": 93648337, "body": "@Schwern Sorry about that. I was tweaking the code to see how this behaves with setting <code>$&#47;</code> with newline. Inadvertently posted that WIP code. Thanks for spotting."}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1542688833, "creation_date": 1542688833, "answer_id": 53386354, "question_id": 53386203, "link": "https://stackoverflow.com/questions/53386203/perl-record-separator/53386354#53386354", "title": "Perl record separator -", "body": "<p>You can use <code>chr(0xNN)</code>, but it's simpler to write a hex character as <code>\"\\xNN\"</code>. A string containing record separator is <code>\"\\x1e\"</code>.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nmy $file = shift;\nopen my $fh, \"&lt;\", $file or die \"$file: $!\";\n\nsay \"reading records\";\n\nlocal $/ = \"\\x1e\";\nwhile (my $row = &lt;$fh&gt;) {\n    say(\"Record:\", join \",\", split /\\x1f/, $row);\n}\n</code></pre>\n"}], "owner": {"reputation": 841, "user_id": 24382, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bef2b4df4d3581eb1947c849059d0054?s=128&d=identicon&r=PG", "display_name": "prabhu", "link": "https://stackoverflow.com/users/24382/prabhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 53386354, "answer_count": 1, "score": 0, "last_activity_date": 1542688833, "creation_date": 1542687896, "question_id": 53386203, "link": "https://stackoverflow.com/questions/53386203/perl-record-separator", "title": "Perl record separator -", "body": "<p>I'm stuck on a seemingly trivial problem but not sure what is it that I'm missing. Need help.</p>\n\n<p>I have a file that is delimited by the standard field separator (<code>0x1f</code>) and record separator (<code>0x1e</code>) characters. (<a href=\"https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text</a>)</p>\n\n<p>I don't need to parse out the fields but interested in getting the records.</p>\n\n<p>I read about Perl's record separator special variable and tried using that to parse the file.</p>\n\n<p>The file looks like this. <code>^</code> represents the field separator and <code>^^</code> represents the record separator (in vim). On sublime these will show up as the relevant hex codes.</p>\n\n<pre><code>ID^_NAME^_PARENTID^_Prov ID^_Pat_ID^_Another ID^_Program1^_Program2^_Status^_Date^_Reason^_Added^_Sn Length^_ze Reason^_StAge^_EnAge^_Notes^^NUMBER^_VARCHAR^_NUMBER^_    NUMBER^_NUMBER^_NUMBER^_VARCHAR^_VARCHAR^_VARCHAR^_DATE^_VARCHAR^_VARCHAR^_VARCHAR^_VARCHAR^_VARCHAR^_VARCHAR^_VARCHAR^^12^_40^_12^_^_12^_12^_200^_200^_12^_^_200^_1^_    4000^_4000^_2000^_2000^_4000^^0^_^_0^_^_0^_0^_^_^_^_^_^_^_^_^_^_^_^^\n</code></pre>\n\n<p>Following is the code that I wrote to parse the records out. Issue is, whatever I do, the entire file is read into the $row scalar.</p>\n\n<p>I initially assumed that perl expects the <code>$/</code> to be set to a string type. Doing that also doesn't seem to work and I'm stuck.</p>\n\n<p>Appreciate any help. Thanks.</p>\n\n<pre><code>#local $/ = sprintf(\"%s\",chr(\"0xa\"));\nlocal $/ = chr(0xa);\n\nopen my $fh, \"&lt;\", $file or die \"$file: $!\";\n\nprint(\"reading records\\n\");\n\nwhile (my $row = &lt;$fh&gt;) {\n    print(\"Record:\", $row, \"\\n\");\n}\n</code></pre>\n"}, {"tags": ["linux", "perl", "system"], "comments": [{"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "edited": false, "score": 0, "creation_date": 1542653572, "post_id": 53380929, "comment_id": 93637522, "body": "Redirect to a file or named pipe instead of /dev/null? With the pipe be cautious, it will fill up and then block by default if not read from."}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "reply_to_user": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "edited": false, "score": 0, "creation_date": 1542653666, "post_id": 53380929, "comment_id": 93637564, "body": "@tink Your answer scared me, does <code>&gt; &#47;dev&#47;null</code> ever fill up?"}, {"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "edited": false, "score": 3, "creation_date": 1542653800, "post_id": 53380929, "comment_id": 93637619, "body": "No, it doesn&#39;t. That&#39;s the beauty of it. But what goes to /dev/null stays in /dev/null ;)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542671871, "post_id": 53380929, "comment_id": 93644676, "body": "If you want to start a program in the background, look at the <code>nohup</code> command-line utility. It"}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1542743277, "post_id": 53391724, "comment_id": 93676054, "body": "I am using /dev/null as I have no intention of looking at the output, I just mean if I wanted to can I redirect it to something else, then put it back?  I don&#39;t have to do this, am just curious if I can,"}, {"owner": {"reputation": 173, "user_id": 10621944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042363385806265/picture?type=large", "display_name": "Charles Jie", "link": "https://stackoverflow.com/users/10621944/charles-jie"}, "reply_to_user": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1542767071, "post_id": 53391724, "comment_id": 93683898, "body": "@PlasticProgrammer - You don&#39;t have to ALWAYS redirect b.pl&#39;s stdout to b.out. You can make an option to turn it on, while using <code>&gt; &#47;dev&#47;null</code> as default redirection. However, you have to decide how to redirect before you run a.pl. It&#39;s not trivial job to switch in midway. And you can not recover anything already sent to /dev/null."}], "tags": [], "owner": {"reputation": 173, "user_id": 10621944, "user_type": "registered", "profile_image": "https://graph.facebook.com/1042363385806265/picture?type=large", "display_name": "Charles Jie", "link": "https://stackoverflow.com/users/10621944/charles-jie"}, "is_accepted": false, "score": 1, "last_activity_date": 1542712265, "creation_date": 1542712265, "answer_id": 53391724, "question_id": 53380929, "link": "https://stackoverflow.com/questions/53380929/can-i-capture-the-output-of-another-process-that-i-started/53391724#53391724", "title": "Can I capture the output of another process that I started?", "body": "<p>Your code framework may look like this:</p>\n\n<pre><code>#!/usr/bin/perl\n# I'm a.pl\n#...\nsystem \"b.pl &gt; ~/b.out &amp;\";\nwhile (1)\n{\n    my $time = localtime;\n    my ($fsize, $mtime) = (stat \"/var/log/syslog\")[7,9];\n    print \"syslog: size=$fsize, mtime=$mtime at $time\\n\";\n    sleep 60;\n}\n</code></pre>\n\n<p>while the b.pl may look like:</p>\n\n<pre><code>#!/usr/bin/perl\n# I'm b.pl\nwhile (1)\n{\n    my $time = localtime;\n    my $fsize_a = (stat \"/var/log/auth.log\")[7];\n    my $fsize_s = (stat \"/var/log/syslog\")[7];\n    print \"fsize: syslog=$fsize_s auth.log=$fsize_a at $time\\n\";\n    sleep 60;\n}\n</code></pre>\n\n<ul>\n<li>a.pl and b.pl do their job independently.</li>\n<li>b.pl is called by a.pl as a background job, which sends its output to b.out(won't mess up the screen of a.pl)</li>\n<li>You can read b.out from some other terminal, or after a.pl is finished(or when a.pl is put to background temporarily)</li>\n</ul>\n\n<p>About terminating the two scripts:</p>\n\n<ul>\n<li>`ctrl-c` for a.pl \n<li>`killall b.pl` for b.pl\n</ul>\n\n<p>Note:</p>\n\n<ul>\n<li>b.pl will never terminate even when you terminate your terminal (Assumed that your terminal is run as a desktop application), so you don't need the `nohup` command to help. (Perhaps only useful in console)\n<li>If your b.pl may spit out error messages from time to time, then you still need to deal with its stderr. It's left as your homework.\n</ul>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542712265, "creation_date": 1542653443, "question_id": 53380929, "link": "https://stackoverflow.com/questions/53380929/can-i-capture-the-output-of-another-process-that-i-started", "title": "Can I capture the output of another process that I started?", "body": "<p>I'm currently using <code>&gt; /dev/null &amp;</code> to have Perl script A run Perl script B totally independently, and it works fine.  Script B runs without throwing back any output and stays alive when Script A ends, even when my terminal session ends.</p>\n\n<p>Not saying I need it, but is there a way to recapture its output if I wanted to?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["arrays", "perl", "parsing"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1542649588, "post_id": 53380028, "comment_id": 93635730, "body": "We don&#39;t know what -&gt;tbse_line() returns."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10675952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W4h_fxRzUgM/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g7z3RE_GqaYY_k0O4MandwBYAdkw/mo/photo.jpg?sz=128", "display_name": "Final_Sun", "link": "https://stackoverflow.com/users/10675952/final-sun"}, "edited": false, "score": 0, "creation_date": 1542649944, "post_id": 53380107, "comment_id": 93635900, "body": "Thanks, that fixed the issue! The code above is just a small part of a very large code that I did not write myself, but am trying to adapt to my current processing needs. I must have overlooked the positioning of the array declaration."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542651501, "post_id": 53380107, "comment_id": 93636662, "body": "You should <a href=\"https://stackoverflow.com/help/someone-answers\">accept the answer</a> if it&#39;s solved your problem :)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 5, "last_activity_date": 1542649701, "creation_date": 1542649701, "answer_id": 53380107, "question_id": 53380028, "link": "https://stackoverflow.com/questions/53380028/changing-an-array-in-perl/53380107#53380107", "title": "Changing an array in Perl", "body": "<p><code>my @copy</code> allocates a new Perl array named <code>@copy</code> in the current scope. It looks like you want to set <code>@copy</code> during one iteration of your <code>while</code> loop and print it in a different iteration. In order for your array not to be erased each time a new <code>while</code> loop iteration starts, you should move the <code>my @copy</code> declaration outside of the loop.</p>\n\n<pre><code>my @copy;\nwhile (1) { ... }\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10675952, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W4h_fxRzUgM/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g7z3RE_GqaYY_k0O4MandwBYAdkw/mo/photo.jpg?sz=128", "display_name": "Final_Sun", "link": "https://stackoverflow.com/users/10675952/final-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53380107, "answer_count": 1, "score": 0, "last_activity_date": 1542649701, "creation_date": 1542649387, "question_id": 53380028, "link": "https://stackoverflow.com/questions/53380028/changing-an-array-in-perl", "title": "Changing an array in Perl", "body": "<p>I am trying to use Perl to parse output from a (C-based) program.\nEvery output line is a (1D) Perl array, which I sometimes want to store (based on certain conditions).</p>\n\n<p>I now wish to (deep) <em>copy</em> an array when its first element has a certain keyword,\nand print that same copied array if another keyword matches in a later line-array.</p>\n\n<p>So far, I have attempted the following:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict; # recommended\nuse Storable qw(dclone);\n...\nwhile(1)   # loop over the lines\n    {\n        # subsequent calls to tbse_line contain\n        # (references to) arrays of data \n        my $la = $population-&gt;tbse_line();\n        my @copy;\n        my $header = shift @$la;\n\n        # break out of the loop:\n        last if ($header eq 'fin');\n\n        if($header eq 'keyword')\n        {\n            @copy = @{ dclone \\@$la };\n        }\n\n        if($header eq 'other_keyword')\n        {\n            print \"second condition met, print first line:\\n\"\n            print \"@copy\\n\";\n        }\n    }\n</code></pre>\n\n<p>However, this prints an empty line to the screen, instead of the contents of the copied array. I don't have a lot of Perl experience, and I can't figure out what I am doing wrong.</p>\n\n<p>Any idea on how to go about this?</p>\n"}, {"tags": ["bash", "shell", "perl", "csh", "tcsh"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1542649438, "post_id": 53379953, "comment_id": 93635656, "body": "Is there a file called <code>-lrt</code> in the filesystem?"}, {"owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542649788, "post_id": 53379953, "comment_id": 93635817, "body": "I&#39;m not sure how to check that in the filesystem."}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1542649873, "post_id": 53379953, "comment_id": 93635862, "body": "Don&#39;t use <code>find</code> for this at all; just use the <code>glob</code> function: <code>@handoff = glob(&quot;18????_????&quot;&#47;)</code>."}, {"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 0, "creation_date": 1542651826, "post_id": 53379953, "comment_id": 93636804, "body": "It&#39;s caused by <code>find *</code> and a file named <code>-lrt</code>. Maybe <code>find . -maxdepth 1</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1542655443, "post_id": 53380572, "comment_id": 93638346, "body": "I would put the <code>-d</code> check before the regex check. That way, you&#39;re only doing the regex check on directories only, as opposed to running it against all files and directories."}, {"owner": {"reputation": 3984, "user_id": 1801086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4c0400ffff14d5e1c16ca3856c09ba?s=128&d=identicon&r=PG", "display_name": "tjd", "link": "https://stackoverflow.com/users/1801086/tjd"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1542657623, "post_id": 53380572, "comment_id": 93639361, "body": "@stevieb Flip side: Filename is already in memory for the regex.  <code>-d</code> requires a stat call.  Time to break out the benchmarks...."}], "tags": [], "owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1542651821, "creation_date": 1542651821, "answer_id": 53380572, "question_id": 53379953, "link": "https://stackoverflow.com/questions/53379953/how-to-find-the-sub-directories-using-find/53380572#53380572", "title": "How to find the sub-directories using find", "body": "<p>No need to call an external program to find sub-directories:</p>\n\n<pre><code>opendir(my $dh, '.') || die \"Can't opendir '.': $!\";\nmy @handoff = grep { /^18.{4}_.{4}$/ &amp;&amp; -d $_ } readdir($dh);\nclosedir $dh;\nprint join(' ', @handoff), \"\\n\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1542693982, "post_id": 53383527, "comment_id": 93649803, "body": "Hmm, that looks nifty. Unfortunately <code>Path::...</code> aren&#39;t core modules, so <code>File::Find</code> might be a better option."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1542694088, "post_id": 53383527, "comment_id": 93649841, "body": "Isn&#39;t the <code>use Path::Tiny</code> superfluous in your example?"}, {"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "reply_to_user": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1542745416, "post_id": 53383527, "comment_id": 93677094, "body": "@StefanBecker : thanks, removed the use of Path::Tiny"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 0, "last_activity_date": 1542745366, "last_edit_date": 1542745366, "creation_date": 1542666268, "answer_id": 53383527, "question_id": 53379953, "link": "https://stackoverflow.com/questions/53379953/how-to-find-the-sub-directories-using-find/53383527#53383527", "title": "How to find the sub-directories using find", "body": "<p>find expects the path to search as first argument, hence :</p>\n\n<pre><code>    find * -maxdepth 0 -type d -name \"18????_????\" | sort -u | tail -2\n</code></pre>\n\n<p>should be :</p>\n\n<pre><code>    find . -maxdepth 1 -type d -name \"18????_????\" | sort -u | tail -2\n</code></pre>\n\n<p>(assuming that you want to search the current path - else replace the <code>.</code> with the path to search).</p>\n\n<p>But bottom line, as you are using perl already, why use an external command like <code>find</code> ?</p>\n\n<p>Here is another solution using module <a href=\"https://metacpan.org/pod/Path::Iterator::Rule\" rel=\"nofollow noreferrer\">Path::Iterator::Rule</a>.</p>\n\n<pre><code>use Path::Iterator::Rule;\nmy @handoffs = Path::Iterator::Rule\n    -&gt;new\n    -&gt;directory             # only directories (not files)\n    -&gt;max_depth(1)          # do not recurse\n    -&gt;name(\"18????_????\")   # match directory name (glob or regex)\n    -&gt;all(\".\")              # search the current path\n;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10606339, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0Aq1zovmsqE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC60tjQA2z0TMFT78DKuySAJq1krA/mo/photo.jpg?sz=128", "display_name": "Satish Sajjanar", "link": "https://stackoverflow.com/users/10606339/satish-sajjanar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542745366, "creation_date": 1542649030, "last_edit_date": 1542650172, "question_id": 53379953, "link": "https://stackoverflow.com/questions/53379953/how-to-find-the-sub-directories-using-find", "title": "How to find the sub-directories using find", "body": "<p>I'm using this below command to get the sub-directories inside an array @handoff of a perl code.</p>\n\n<pre><code>chomp(@handoff = `find * -maxdepth 0 -type d -name \"18????_????\" | sort -u | tail -2`);\n</code></pre>\n\n<p>I'm getting the error as </p>\n\n<pre><code>find: unknown predicate `-lrt'\n</code></pre>\n\n<p>If I try the same command in terminal directly, I'm able to get the sub-directories. Please suggest me some solution.</p>\n"}, {"tags": ["perl", "command-line-interface", "perlscript"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1542648028, "post_id": 53379144, "comment_id": 93635013, "body": "What platform are you running on? If it&#39;s Unix, it shouldn&#39;t lock anything. Although clashing your writes will still cause problems. Also - what mode of parallelism are you using? <code>fork</code> or <code>thread</code>? As this informs the answer as to how to arbitrate contention."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1542646541, "post_id": 53379197, "comment_id": 93634335, "body": "This is not correct. File handles are not implicitly locked in Perl and a regular <code>open</code> call does nothing to prevent parallel processes from corrupting an output stream."}, {"owner": {"reputation": 84, "user_id": 10664111, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sJ5wCSCHT-U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gHminLaMigKKUzwDdwZP8VBp6uEg/mo/photo.jpg?sz=128", "display_name": "jamie schnaitter", "link": "https://stackoverflow.com/users/10664111/jamie-schnaitter"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1542646898, "post_id": 53379197, "comment_id": 93634513, "body": "When opened for writing? I don&#39;t think that&#39;s under perl&#39;s control, but rather the filesystem or OS."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1542647951, "post_id": 53379197, "comment_id": 93634984, "body": "<code>open</code> if you&#39;re on a Windows platform might trigger a mandatory lock. it won&#39;t on Unix though."}], "tags": [], "owner": {"reputation": 84, "user_id": 10664111, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sJ5wCSCHT-U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gHminLaMigKKUzwDdwZP8VBp6uEg/mo/photo.jpg?sz=128", "display_name": "jamie schnaitter", "link": "https://stackoverflow.com/users/10664111/jamie-schnaitter"}, "is_accepted": false, "score": 0, "last_activity_date": 1542646019, "creation_date": 1542646019, "answer_id": 53379197, "question_id": 53379144, "link": "https://stackoverflow.com/questions/53379144/code-hangs-when-writing-log-message-to-text-file-by-multiple-source-using-perl-s/53379197#53379197", "title": "Code hangs when writing log message to text file by multiple source using Perl Script", "body": "<p>When you open a file for writing, a lock on that file is granted to the process that opened it.  This is done to prevent corruption of data, by processes overwriting each other.  Possible solutions would be to feed the output data to a single process that handles writing to the log file, making sure that processes close the file and release their locks when they are finished writing, or using a library or file format that is designed for parallel access of files.  The first two of those methods would be the easiest and preferred for writing log files like this.  There are also probably perl modules (check CPAN) that handle log files.</p>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": false, "score": 1, "last_activity_date": 1542686954, "creation_date": 1542686954, "answer_id": 53386091, "question_id": 53379144, "link": "https://stackoverflow.com/questions/53379144/code-hangs-when-writing-log-message-to-text-file-by-multiple-source-using-perl-s/53386091#53386091", "title": "Code hangs when writing log message to text file by multiple source using Perl Script", "body": "<p>Try using <code>flock</code> -- here is a simple example you can try to understand its behavior:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Fcntl qw/:flock/;\n\nchomp(my $id = `date`);\nmy $cnt = 0;\nwhile (1) {\n    open LOG, \"&gt;&gt;shared\" or die \"Couldn't open shared\";\n    flock (LOG, LOCK_EX) or die \"Couldn't flock\";\n    print LOG \"$id: $cnt\\n\";\n    $cnt++;\n    sleep 1;\n    close LOG;\n}\n</code></pre>\n\n<p>Say this is saved in flock.pl, then you can run <code>flock.pl&amp;</code> to run one or more instances in the background.  Then do <code>tail -f shared</code> to see what happens.  Since you are sleeping 1 second between obtaining the lock and releasing it via <code>close LOG</code> , you'll see an update once a second if you have one process.  However, if you have N processes, you'll see each one taking N seconds.  </p>\n\n<p>In your existing example, you can try adding the <code>use Fcntl</code> and <code>flock</code> lines.</p>\n"}], "owner": {"reputation": 541, "user_id": 5191409, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e501077ad0a466960a1d367fdee3543c?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep H", "link": "https://stackoverflow.com/users/5191409/pradeep-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1542686954, "creation_date": 1542645784, "question_id": 53379144, "link": "https://stackoverflow.com/questions/53379144/code-hangs-when-writing-log-message-to-text-file-by-multiple-source-using-perl-s", "title": "Code hangs when writing log message to text file by multiple source using Perl Script", "body": "<p>I am using below code to write log message to text file, the program is getting hanged when different source calls this method in parallel. Is there a way to grant /control parallel writing without breaking the program.</p>\n\n<pre><code>sub sLog {\n    my $self = 'currentServerDirectory';\n    my $logMsg = \"\";\n\n    my $fileName = join '_', $self-&gt;{LogFilePrefix}, &amp;sTimeStamp(\"Log\");\n    my $absFileName = \"$self-&gt;{LogFolder}/$fileName.txt\";\n\n        open APPHDLER, \"&gt;&gt;$absFileName\" or &amp;exitErr(\"Cannot append message to file, $absFileName\");\n        print APPHDLER scalar(localtime(time)).\" - $logMsg\\n\";\n        close APPHDLER;\n}\n</code></pre>\n"}, {"tags": ["perl", "oop", "moose", "mop"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1542643147, "post_id": 53377893, "comment_id": 93632359, "body": "Moose is only really slow if you run a web application with CGI or if you run backend applications that get started all the time and only take seconds or less to complete. If you are building for the web and your application is persistent, the startup time is more or less irrelevant, and the development time benefit you gain by using Moose and its large ecosystem will outweigh whatever you perceive as slow. Also note that resources that said it was slow a few years ago are now out-dated."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 2, "creation_date": 1542643894, "post_id": 53378010, "comment_id": 93632812, "body": "p5-mop (<a href=\"https://metacpan.org/release/STEVAN/mop-0.03-TRIAL\" rel=\"nofollow noreferrer\">metacpan.org/release/STEVAN/mop-0.03-TRIAL</a>) is no longer being developed.  MOP on the other hand is one of Moxie&#39;s key dependencies and is part of the same effort at a new thing"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542650657, "post_id": 53378010, "comment_id": 93636282, "body": "@ysth: Thanks for correction, fixed."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 8, "last_activity_date": 1542650637, "last_edit_date": 1542650637, "creation_date": 1542641836, "answer_id": 53378010, "question_id": 53377893, "link": "https://stackoverflow.com/questions/53377893/is-this-a-good-alternative-to-moose-perl/53378010#53378010", "title": "Is this a good alternative to Moose Perl?", "body": "<p><a href=\"http://p3rl.org/MOP\" rel=\"nofollow noreferrer\">MOP</a> is very low level, <a href=\"http://p3rl.org/Moxie\" rel=\"nofollow noreferrer\">Moxie</a> is based on it; but it's still a proof of concept.</p>\n\n<p>There are faster and lighter alternatives that have been tested in production: <a href=\"http://p3rl.org/Moo\" rel=\"nofollow noreferrer\">Moo</a> and <a href=\"http://p3rl.org/Mouse\" rel=\"nofollow noreferrer\">Mouse</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1542660134, "creation_date": 1542660134, "answer_id": 53382338, "question_id": 53377893, "link": "https://stackoverflow.com/questions/53377893/is-this-a-good-alternative-to-moose-perl/53382338#53382338", "title": "Is this a good alternative to Moose Perl?", "body": "<p>In which context do you use Moose and find it slow ? There is of course an overhead involved, but most of it happens at startup time (compilation) ; then, at runtime, most features are cheap (as long as you make your classes immutable), as explained in <a href=\"https://metacpan.org/pod/distribution/Moose/lib/Moose/Manual/FAQ.pod#I-heard-Moose-is-slow,-is-this-true?\" rel=\"nofollow noreferrer\">the documentation</a>. Over the time Moose has become the de facto standard for object oriented programming and it has a very, very wide ecosystem (a search on MooseX on metacpan returns 820 results). Don't give up on it to early.</p>\n\n<p>If you really need faster startup time (like in vanilla CGI environment for example), the most relevant alternative to Moose is <a href=\"https://metacpan.org/pod/Moo\" rel=\"nofollow noreferrer\">Moo</a>, Minimal Object Orientation. It is really light-weithg, has no XS dependency, while implementing a significant subset of Moose (also, its syntax is fully compatible with Moose so you upgrade to Moose anytime later if you need some piece of functionality that you find missing in Moo). It also has a rich ecosystem.</p>\n"}], "owner": {"reputation": 366, "user_id": 8569128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2cde21e40e767064c4e4e0b61f1b8f8?s=128&d=identicon&r=PG&f=1", "display_name": "Imylor", "link": "https://stackoverflow.com/users/8569128/imylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "closed_date": 1542661695, "accepted_answer_id": 53378010, "answer_count": 2, "score": 2, "last_activity_date": 1542660134, "creation_date": 1542641511, "last_edit_date": 1542642117, "question_id": 53377893, "link": "https://stackoverflow.com/questions/53377893/is-this-a-good-alternative-to-moose-perl", "closed_reason": "Opinion-based", "title": "Is this a good alternative to Moose Perl?", "body": "<p>I have been a searching for alternative to Moose (Modern object-oriented Perl)\nBecause Moose is slow I have seen several post relation to this issue, I not want that.\n<strong>Example from the same creator</strong>: <a href=\"https://www.youtube.com/watch?v=ugEry1UWg84&amp;feature=youtu.be&amp;t=260\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=ugEry1UWg84&amp;feature=youtu.be&amp;t=260</a></p>\n\n<p>So I found this alternative from the same creator of moose:</p>\n\n<p><a href=\"https://metacpan.org/pod/MOP#DESCRIPTION\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/MOP#DESCRIPTION</a>\nMOP - A Meta Object Protocol for Perl 5</p>\n\n<p>This module implements a Meta Object Protocol for Perl 5 with minimal overhead and no non-core dependencies (eventually).</p>\n\n<p>Work with UNIVERSAL::Object:</p>\n\n<p><a href=\"https://metacpan.org/pod/UNIVERSAL::Object\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/UNIVERSAL::Object</a></p>\n\n<p><strong>Is this a good choice and alternative to Moose, does someone test this software ?</strong></p>\n\n<p>Related post:\n<a href=\"https://www.perlmonks.org/?node_id=1220917\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=1220917</a></p>\n\n<p>Thanks.</p>\n\n<p>Note: I forget to mention I know about Moo, Mouse, etc, maybe exist something better ?</p>\n"}, {"tags": ["perl", "posix"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542637034, "post_id": 53372637, "comment_id": 93628679, "body": "I believe Shawn&#39;s answer is correct; reading continues to block because the pipe is still open for writing (by the parent).  But you do say you tried explicitly closing handles; did you try closing the write handle in the parent (before the getline)?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1542771997, "post_id": 53372795, "comment_id": 93684950, "body": "Key piece of missing info: The pipe will only return EOF once there are no open handles to the write end of the pipe."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1542623879, "creation_date": 1542623879, "answer_id": 53372795, "question_id": 53372637, "link": "https://stackoverflow.com/questions/53372637/readline-hangs-on-manual-pipe/53372795#53372795", "title": "readline hangs on manual pipe()", "body": "<p>You <code>pipe</code> before <code>fork</code>ing (Like usual for this sort of IPC), so both processes have open copies of both the read and write file descriptors, so the read loop in the parent will just block waiting for more input which never comes from the still-open write end.</p>\n\n<p>The child process needs to <code>close $r;</code>, the parent process needs to <code>close $w;</code> at the start of their respective blocks (Or after you print out the file descriptors for those handles).</p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 53372795, "answer_count": 1, "score": 3, "last_activity_date": 1542623879, "creation_date": 1542623375, "question_id": 53372637, "link": "https://stackoverflow.com/questions/53372637/readline-hangs-on-manual-pipe", "title": "readline hangs on manual pipe()", "body": "<p>I'm trying to dispel the magic fork variant of open:</p>\n\n<pre><code># magic-fork.pl\nif (open my $fh, '-|') { # fork self, make new fd for reading, attach child STDOUT to it\n    STDOUT-&gt;say('parent getpid: ', $$);\n    STDOUT-&gt;say('parent STDOUT-&gt;fileno: ', STDOUT-&gt;fileno);\n    STDOUT-&gt;say('parent $fh-&gt;fileno: ', $fh-&gt;fileno);\n    while (my $line = $fh-&gt;getline) {\n        STDOUT-&gt;print('parent readline from child: ', $line);\n    }\n} else {\n    STDOUT-&gt;say('child getpid: ', $$);\n    STDOUT-&gt;say('child STDOUT-&gt;fileno: ', STDOUT-&gt;fileno);\n}\n</code></pre>\n\n<p>It runs and finishes.</p>\n\n<pre><code># plain-fork.pl\npipe my $r, my $w;\nif (fork) {\n    STDOUT-&gt;say('parent getpid: ', $$);\n    STDOUT-&gt;say('parent STDOUT-&gt;fileno: ', STDOUT-&gt;fileno);\n    STDOUT-&gt;say('parent $r-&gt;fileno: ', $r-&gt;fileno);\n    STDOUT-&gt;say('parent $w-&gt;fileno: ', $w-&gt;fileno);\n    while (my $line = $r-&gt;getline) {\n        STDOUT-&gt;print('parent readline from child: ', $line);\n    }\n} else {\n    $w-&gt;say('child getpid: ', $$);\n    $w-&gt;say('child $r-&gt;fileno: ', $r-&gt;fileno);\n    $w-&gt;say('child $w-&gt;fileno: ', $w-&gt;fileno);\n    $w-&gt;say('child STDOUT-&gt;fileno: ', STDOUT-&gt;fileno);\n}\n</code></pre>\n\n<p>This program unexpectedly hangs in the loop.</p>\n\n<p>I tried to no avail:</p>\n\n<ul>\n<li>calling $w->autoflush(1)</li>\n<li>explicit close on handles</li>\n<li>explicit exit</li>\n<li>POSIX::dup2 $w onto STDOUT</li>\n<li>checking strace -ff to see whether I missed a crucial syscall</li>\n</ul>\n\n<p>What's the problem?</p>\n"}, {"tags": ["perl", "ansible", "cpan", "cpanm"], "answers": [{"tags": [], "owner": {"reputation": 11010, "user_id": 24820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b817e15137200f1101221f9a6c5c5c6d?s=128&d=identicon&r=PG", "display_name": "sebthebert", "link": "https://stackoverflow.com/users/24820/sebthebert"}, "is_accepted": false, "score": 0, "last_activity_date": 1542630892, "creation_date": 1542630892, "answer_id": 53374787, "question_id": 53372000, "link": "https://stackoverflow.com/questions/53372000/cpanm-ansible-with-list/53374787#53374787", "title": "Cpanm Ansible with List", "body": "<p>Probably an indentation issue, you should have:</p>\n\n<pre><code>- name: Install Perl modules\n  cpanm:\n    path: \"{{ item }}\"\n  with_items:\n    - module1\n    - module2\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7330220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16c3f8e5f67877cc55b5a9961253d746?s=128&d=identicon&r=PG&f=1", "display_name": "Vacation", "link": "https://stackoverflow.com/users/7330220/vacation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542630892, "creation_date": 1542620974, "question_id": 53372000, "link": "https://stackoverflow.com/questions/53372000/cpanm-ansible-with-list", "title": "Cpanm Ansible with List", "body": "<p>Recently been trying to get get Ansible working with Cpanm. I have read</p>\n\n<p><a href=\"https://docs.ansible.com/ansible/2.5/modules/cpanm_module.html\" rel=\"nofollow noreferrer\">https://docs.ansible.com/ansible/2.5/modules/cpanm_module.html</a></p>\n\n<p>and been able to install one perl module using the code below:</p>\n\n<pre><code># install Dancer perl package\n- cpanm:\nname: Dancer\n</code></pre>\n\n<p>However everytime I try to use a list of items like so:</p>\n\n<pre><code>- name: Install OS utilities\ndnf: name=\"{{ item }}\" state=present\nwith_items: \"{{ utils.deb }}\"\n\n- name: Install pip modules\npip: name=\"{{ item }}\" state=present\nwith_items: \"{{ utils.pip }}\"\n\n- name: Install the perl modules\ncpanm:\nname: \"{{ item }}\"\nwith_items: \"{{ utils.cpanm }}\" \n</code></pre>\n\n<p>it will throw:</p>\n\n<pre><code>docker: failed: [default] (item=Array::Utils) =&gt; {\"changed\": false, \"item\": \"Array::Utils\", \"msg\": \"one of the following is required: name, from_path\"}\n</code></pre>\n\n<p>for each of the modules that I want to install</p>\n\n<p>Any ideas on what I am doing wrong so that I don't have to install them via shell or doing the first bit of code for each module?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 2289, "user_id": 5267751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd62e8fd8fbb37abc7e2a39d23828047?s=128&d=identicon&r=PG&f=1", "display_name": "user202729", "link": "https://stackoverflow.com/users/5267751/user202729"}, "edited": false, "score": 0, "creation_date": 1542605993, "post_id": 53368875, "comment_id": 93614096, "body": "<a href=\"https://stackoverflow.com/a/364884/5267751\">stackoverflow.com/a/364884/5267751</a>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1542606466, "post_id": 53368875, "comment_id": 93614241, "body": "Yes, launch B followed by <code>&amp;</code> to background the process without waiting for a return."}, {"owner": {"reputation": 5181, "user_id": 8866606, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ao_wuU1YCUE/AAAAAAAAAAI/AAAAAAAAAtc/Nc6ExTtKE_A/photo.jpg?sz=128", "display_name": "Stefan Becker", "link": "https://stackoverflow.com/users/8866606/stefan-becker"}, "edited": false, "score": 0, "creation_date": 1542608129, "post_id": 53368875, "comment_id": 93614716, "body": "Sounds like you are looking for <a href=\"https://en.wikipedia.org/wiki/Fork_(system_call)\" rel=\"nofollow noreferrer\">fork() &amp; friends</a>. For Perl implementation I would consult <code>man perlipc</code> or <code>man perlfork</code>"}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1542610588, "post_id": 53368875, "comment_id": 93615451, "body": "@DavidC.Rankin However, I would like to ignore the return from system as I am running the script from a browser."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1542619124, "post_id": 53368875, "comment_id": 93618825, "body": "Yes, yes, exactly. No requirement you wait for anything. It&#39;s a fire-and-forget proposition -- just like any good missile brought to you by the same people that first gave us a $200 hammer...."}], "answers": [{"comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1542612846, "post_id": 53369435, "comment_id": 93616243, "body": "That&#39;s an oddly named Perl script, sir!"}, {"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1542614272, "post_id": 53369435, "comment_id": 93616783, "body": "I went with you first choice.  But I added <code>&gt; &#47;dev&#47;null &amp;</code> to the end of the system call.  This made sure that I didn&#39;t get any unwanted output from the second script to interfere with my first.   Thanks"}], "tags": [], "owner": {"reputation": 26, "user_id": 10585012, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BzMHANpNmQI/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBW3SquapYNj1w-6xN93EX44ho05Q/mo/photo.jpg?sz=128", "display_name": "Sanjai Sahu", "link": "https://stackoverflow.com/users/10585012/sanjai-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1542609712, "last_edit_date": 1542609712, "creation_date": 1542609252, "answer_id": 53369435, "question_id": 53368875, "link": "https://stackoverflow.com/questions/53368875/can-i-run-a-perl-script-from-within-another-that-is-totally-independent/53369435#53369435", "title": "Can I run a Perl script from within another that is totally independent?", "body": "<p>You can append an <strong><code>&amp;</code></strong> sign at the end of your second script launch like this:</p>\n\n<pre><code>system(\"/script/myscript.sh $params &amp;\");\n</code></pre>\n\n<p>or </p>\n\n<p>If your running one of this distros that won't let that work you'll have to use fork </p>\n\n<p>or </p>\n\n<pre><code>Proc::Background\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1542613995, "accepted_answer_id": 53369435, "answer_count": 1, "score": 1, "last_activity_date": 1542609712, "creation_date": 1542605836, "question_id": 53368875, "link": "https://stackoverflow.com/questions/53368875/can-i-run-a-perl-script-from-within-another-that-is-totally-independent", "closed_reason": "Duplicate", "title": "Can I run a Perl script from within another that is totally independent?", "body": "<p>Within Linux I would like Perl script A to launch Perl script B.  However, I want script A to continue running without waiting for script B to return.  And I would like B to be totally independent so that when script A ends, script B is still running.</p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1542605258, "post_id": 53368755, "comment_id": 93613901, "body": "<a href=\"https://rextester.com/LUB51998\" rel=\"nofollow noreferrer\">Your code is working for me in this demo</a>."}, {"owner": {"reputation": 181, "user_id": 6450386, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5bec8c594fdd89565b8d16f77a75d3a8?s=128&d=identicon&r=PG&f=1", "display_name": "sanapala mohanarao", "link": "https://stackoverflow.com/users/6450386/sanapala-mohanarao"}, "reply_to_user": {"reputation": 381798, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1542605647, "post_id": 53368755, "comment_id": 93614001, "body": "Thanks Tim. Online it is working. I have use perl-5.8.3. It is not working for me. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1542606075, "post_id": 53368860, "comment_id": 93614123, "body": "@JonathanLeffler Nope.  Apparently it fails on 5.8.3.  It works for me on 5.22."}, {"owner": {"reputation": 181, "user_id": 6450386, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5bec8c594fdd89565b8d16f77a75d3a8?s=128&d=identicon&r=PG&f=1", "display_name": "sanapala mohanarao", "link": "https://stackoverflow.com/users/6450386/sanapala-mohanarao"}, "edited": false, "score": 0, "creation_date": 1542606317, "post_id": 53368860, "comment_id": 93614203, "body": "@ysth I tried it. <code>qr&#47;^\\(int\\)&#47;</code> worked fine in 5.8.3. Thanks."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1542606541, "post_id": 53368860, "comment_id": 93614266, "body": "How many years gap is that?  Quite a lot!  (Perl&#39;s releases are documented on <a href=\"https://www.cpan.org/src/README.html\" rel=\"nofollow noreferrer\">CPAN</a>.  5.8.3 was released 2004-04-21; 5.8.9 on 2008-12-14; 5.22.0 on 2015-06-01.  So that spans a decade.  Not complaining, just commenting.)"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1542767648, "last_edit_date": 1542767648, "creation_date": 1542605763, "answer_id": 53368860, "question_id": 53368755, "link": "https://stackoverflow.com/questions/53368755/regex-matching-with-in-perl/53368860#53368860", "title": "Regex matching with &quot;(&quot; in perl", "body": "<p>I believe earlier versions of perl may have had a bug like this, where if you use <code>\\</code> to escape a regex metacharacter that is also the quoted construct delimiter, it is treated as the metacharacter, not a literal character.  Try using a different delimiter for your regex, e.g.  <code>qr/^\\(int\\)/</code>.</p>\n\n<hr>\n\n<pre><code>$ for v in 10 12 14 16 18 20 22 24 26 ; do\n   echo \"5.$v\"\n   \"5.${v}t\"/bin/perl -le'print qr(^\\(int\\))'\n   echo\ndone\n5.10\n(?-xism:^(int))\n\n5.12\n(?-xism:^(int))\n\n5.14\n(?^:^(int))\n\n5.16\n(?^:^(int))\n\n5.18\nUseless use of '\\'; doesn't escape metacharacter '(' at -e line 1.\n(?^:^(int))\n\n5.20\nUseless use of '\\'; doesn't escape metacharacter '(' at -e line 1.\n(?^:^(int))\n\n5.22\n(?^:^\\(int\\))\n\n5.24\n(?^:^\\(int\\))\n\n5.26\n(?^:^\\(int\\))\n</code></pre>\n\n<p>So 5.18 added a warning when you use an escaped delimiter (even if warnings are off), and 5.22 changed the behavior.</p>\n\n<p>(Almost like a deprecation cycle except that the warning warned that you might not have expected the old behavior, not of the coming new behavior, which seems unfortunate.)</p>\n"}], "owner": {"reputation": 181, "user_id": 6450386, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5bec8c594fdd89565b8d16f77a75d3a8?s=128&d=identicon&r=PG&f=1", "display_name": "sanapala mohanarao", "link": "https://stackoverflow.com/users/6450386/sanapala-mohanarao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53368860, "answer_count": 1, "score": 1, "last_activity_date": 1542767648, "creation_date": 1542605072, "question_id": 53368755, "link": "https://stackoverflow.com/questions/53368755/regex-matching-with-in-perl", "title": "Regex matching with &quot;(&quot; in perl", "body": "<p>I have tried the below code</p>\n\n<pre><code>my $line = \"(int)\";\nmy $pattern = qr(^\\(int\\));\n\nif ( $line =~ /$pattern/ ) {\n    print \"line matched\";\n} else {\n    print \"line not matched\";\n}\n</code></pre>\n\n<p>It is not matching.</p>\n\n<p>Can you please help with a pattern which matches this line</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542651236, "post_id": 53367020, "comment_id": 93636555, "body": "&quot;Error occurred on line 2000 (even I have only 1 thousand lines of script).&quot; This doesn&#39;t make sense, and points to either a file mismatch or a source filter. Requiring outside files and running loops do not arbitrarily create new lines of source code."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542651089, "post_id": 53367955, "comment_id": 93636493, "body": "I would recommend opening <code>__FILE__</code>, not <code>$0</code>, since <code>$0</code> can be modified and won&#39;t necessarily be the current file to begin with."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1542653278, "last_edit_date": 1542653278, "creation_date": 1542598336, "answer_id": 53367955, "question_id": 53367020, "link": "https://stackoverflow.com/questions/53367020/linux-perl-printing-the-content-of-the-script-i-am-executing/53367955#53367955", "title": "Linux - Perl: Printing the content of the script I am executing", "body": "<p>There are probably better ways to debug a script (the perl debugger, using <code>Carp::Always</code> to get stack traces with any errors and warnings), but nonetheless there are at least <strike>two</strike> three mechanisms for obtaining the source code of the running script.</p>\n\n<ol>\n<li><p>Since <code>$0</code> contains the name of the file that perl is executing, you can read from it.</p>\n\n<pre><code>open my $fh, '&lt;', $0;\nmy @this_script = &lt;$fh&gt;;\nclose $fh;\n</code></pre></li>\n<li><p>If a script has the <code>__DATA__</code> or <code>__END__</code> token in its source, then Perl also sets up the <code>DATA</code> file handle. Initially, the <code>DATA</code> file handle points to the text after\nthe <code>__DATA__</code> or <code>__END__</code> token, but it is actually opened to the whole source file, so you can <code>seek</code> to the beginning of that file handle and access the entire script.</p>\n\n<pre><code>seek DATA, 0, 0;\nmy @this_script = &lt;DATA&gt;;\n</code></pre></li>\n<li><p>HT Grinnz: the token <code>__FILE__</code> in any Perl source file refers to the name of the file that contains that token</p>\n\n<pre><code>open my $fh, '&lt;', __FILE__;\nmy @this_file = &lt;$fh&gt;;\nclose $fh;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 43, "user_id": 7849763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69f9da2ea93de69b4a78830e6d0e240?s=128&d=identicon&r=PG&f=1", "display_name": "Dem", "link": "https://stackoverflow.com/users/7849763/dem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1542653278, "creation_date": 1542588893, "question_id": 53367020, "link": "https://stackoverflow.com/questions/53367020/linux-perl-printing-the-content-of-the-script-i-am-executing", "title": "Linux - Perl: Printing the content of the script I am executing", "body": "<p>Is it possible to print the whole content of the script I am executing?</p>\n\n<p>Since there are many things that will go on inside the script like the calling perl modules I will call in runtime (require \"/dir/file\";), the print lines I am executing inside an array (foreach(@array) {print \"$_\\n\";}).</p>\n\n<p>Why do I need this? To study the script generation I am making, especially when errors are occurring. Error occurred on line 2000 (even I have only 1 thousand lines of script).</p>\n"}, {"tags": ["perl", "while-loop", "diamond-operator"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1542567238, "post_id": 53362980, "comment_id": 93605277, "body": "Please show us some representative input data and the according log output."}, {"owner": {"reputation": 2114, "user_id": 8477066, "user_type": "registered", "profile_image": "https://graph.facebook.com/1957256684531529/picture?type=large", "display_name": "Hielke Walinga", "link": "https://stackoverflow.com/users/8477066/hielke-walinga"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542567718, "post_id": 53362980, "comment_id": 93605400, "body": "@Corion You can use any text file as input. The output is actually just what I want. That&#39;s not the problem. The problem is that the &lt;&gt; hangs after the last line. Just run the script with any file and you will see it will hang at the &quot;print &quot;Get line&quot;&quot;, indicating that the &lt;&gt; just won&#39;t continue."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542568594, "post_id": 53362980, "comment_id": 93605630, "body": "Hmm - I guess it just works as designed - you never check for <code>eof()</code> and try to read one more line from the default input. If you use <code>&lt;&gt;</code>, it will fall back to reading from STDIN once <code>@ARGV</code> has been exhausted. See <a href=\"https://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/readline.html</a> . I don&#39;t understand what your logic is, but I guess you want a <code>last if eof;</code> before trying to read another line."}, {"owner": {"reputation": 2114, "user_id": 8477066, "user_type": "registered", "profile_image": "https://graph.facebook.com/1957256684531529/picture?type=large", "display_name": "Hielke Walinga", "link": "https://stackoverflow.com/users/8477066/hielke-walinga"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542568853, "post_id": 53362980, "comment_id": 93605691, "body": "@Corion From the documentation it says <code>each call reads and returns the next line until end-of-file is reached, whereupon the subsequent call returns undef</code> So I did not expect it to fall back to STDIN, but expected it to return undef. That&#39;s what <code>if (not($l)) {last;}</code> is supposed to do. Check if the line is undef and than exit the while loop."}, {"owner": {"reputation": 2114, "user_id": 8477066, "user_type": "registered", "profile_image": "https://graph.facebook.com/1957256684531529/picture?type=large", "display_name": "Hielke Walinga", "link": "https://stackoverflow.com/users/8477066/hielke-walinga"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542569213, "post_id": 53362980, "comment_id": 93605777, "body": "@Corion <code>last if eof</code> before <code>&lt;&gt;</code> will do the trick. But I still not understand why it wouldn&#39;t just return undef. Is it maybe that <code>&lt;&gt;</code> will return undef once but the second time it will move on to STDIN, because that is what happens. Only the second time it hangs, the first time it still outputs undef."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542569233, "post_id": 53362980, "comment_id": 93605782, "body": "Yes, but <code>&lt;$foo&gt;</code> is different from <code>&lt;&gt;</code> , which goes through all items on <code>@ARGV</code>, and if you invoke it one more time after that, it will wait on reading from <code>STDIN</code>"}, {"owner": {"reputation": 2114, "user_id": 8477066, "user_type": "registered", "profile_image": "https://graph.facebook.com/1957256684531529/picture?type=large", "display_name": "Hielke Walinga", "link": "https://stackoverflow.com/users/8477066/hielke-walinga"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542569709, "post_id": 53362980, "comment_id": 93605923, "body": "@Corion But what is $foo now?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542570544, "post_id": 53362980, "comment_id": 93606139, "body": "@Corion <code>&lt;&gt;</code> or <code>&lt;ARGV&gt;</code> only falls back to STDIN if <code>@ARGV</code> is empty; if it&#39;s started reading from files it will only read each file passed. <a href=\"https://perldoc.pl/perlop#I/O-Operators\" rel=\"nofollow noreferrer\">perlop</a> has more details. I suspect the hanging is due to the while(1) loop rather than waiting for STDIN."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542570692, "post_id": 53362980, "comment_id": 93606180, "body": "You will want to check <code>not defined $l</code>, not <code>not $l</code>, since the latter will get confused if a line contains nothing or only a 0 before the EOF. The normal idiom for this is <code>while (my $l = &lt;&gt;)</code>, which is a particular construct that checks defined rather than truthiness due to some magic, and ends once there are no more files to read or STDIN received EOF."}, {"owner": {"reputation": 2114, "user_id": 8477066, "user_type": "registered", "profile_image": "https://graph.facebook.com/1957256684531529/picture?type=large", "display_name": "Hielke Walinga", "link": "https://stackoverflow.com/users/8477066/hielke-walinga"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542571265, "post_id": 53362980, "comment_id": 93606335, "body": "@Grinnz You are correct about the explicit defined check. But I don&#39;t think it is infinite looping, because it also stops printing anything. While in an infinite loop it should still do the print statements."}], "answers": [{"tags": [], "owner": {"reputation": 1058, "user_id": 2438650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c2b3926bd8282c899903b32a6f002b?s=128&d=identicon&r=PG", "display_name": "lod", "link": "https://stackoverflow.com/users/2438650/lod"}, "is_accepted": true, "score": 3, "last_activity_date": 1542578746, "creation_date": 1542578746, "answer_id": 53365926, "question_id": 53362980, "link": "https://stackoverflow.com/questions/53362980/perl-diamond-operator-in-double-while-loop-hangs/53365926#53365926", "title": "Perl diamond operator in double while loop hangs", "body": "<p>Welcome to Perl.</p>\n\n<p>The issue with your code is that you have no way of escaping the outer loop. <code>&lt;&gt;</code> will return <code>undef</code> when it reaches the end of the file. At this point your inner loop ends and the outer loop sends it back in. Forcing further reads causes <code>&lt;&gt;</code> to start looking at <code>STDIN</code> which never sends an EOF, so your loop continues forever.</p>\n\n<p>As this is your first Perl script I'm going to rewrite it for you with some comments. Perl is a fantastic language, you can write some great code, however mostly due to it's age there are some older styles which are no longer advised.</p>\n\n<pre><code>use warnings; # Warn about coding errors\nuse strict; # Enforce good style\nuse 5.010; # Enable modernish (10 year old) features\n\n# Another option which mostly does the same as above.\n# I normally do this, but it does require a non-standard CPAN library\n# use Modern::Perl;\n\n# Much better style to have the condition in the while loop\n# Much clearer than having an infinite loop with break/last statements\n# Also avoid $l as a variable name, it looks too much like $1\nmy $count = 0; # Note variable declaration, enforced by strict\nwhile(my $line = &lt;&gt;) {\n    if ($line =~ /^&gt;/) {\n        # End of input block, output and reset\n        say $count;\n        $count = 0;\n    } else {\n        $count += length($line);\n    }\n}\n\n# Have reached the end of the input files\nsay $count;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2157723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05293fbabda5ac919b290dae5a01ef58?s=128&d=identicon&r=PG", "display_name": "brucer42", "link": "https://stackoverflow.com/users/2157723/brucer42"}, "is_accepted": false, "score": 0, "last_activity_date": 1609791069, "creation_date": 1609791069, "answer_id": 65569183, "question_id": 53362980, "link": "https://stackoverflow.com/questions/53362980/perl-diamond-operator-in-double-while-loop-hangs/65569183#65569183", "title": "Perl diamond operator in double while loop hangs", "body": "<p>try &quot;echo | perl script.pl file.fa&quot;.</p>\n<p>works for me with same &quot;problem&quot; in my code.</p>\n<p>gets EOF from stdin.</p>\n"}], "owner": {"reputation": 2114, "user_id": 8477066, "user_type": "registered", "profile_image": "https://graph.facebook.com/1957256684531529/picture?type=large", "display_name": "Hielke Walinga", "link": "https://stackoverflow.com/users/8477066/hielke-walinga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 53365926, "answer_count": 2, "score": -1, "last_activity_date": 1609791069, "creation_date": 1542557996, "last_edit_date": 1542558507, "question_id": 53362980, "link": "https://stackoverflow.com/questions/53362980/perl-diamond-operator-in-double-while-loop-hangs", "title": "Perl diamond operator in double while loop hangs", "body": "<p>In my Perl script I have a double infinite while loop. I read lines from a file with the diamond operator. But somehow if my script reaches the last line of the file, it does not return undef, but hangs forever. </p>\n\n<p>If I reduced my code to a single while loop this did not happen. So I wonder if I am doing something wrong or if this is a known limitation of the language. (This is actually my first perl script.)</p>\n\n<p>Below is my script. It is meant to count the size of DNA sequences in fasta files, but the hanging behavior can be observed with any other file with multiple lines of text. </p>\n\n<p>Perl version 5.18.2</p>\n\n<p>Invoked from the commandline like <code>perl script.pl file.fa</code></p>\n\n<pre><code>$l = &lt;&gt;;\nwhile (1) {\n    $N = 0;\n    while (1) {\n        print \"Get line\";\n        $l = &lt;&gt;;\n        print \"Got line\";\n        if (not($l)) {\n            last;\n        }\n        if ($l =~ /^&gt;/) {\n            last;\n        }\n\n        $N += length($l);\n    }\n    print $N;\n    if (not($N)) {\n        last;\n    }\n}\n</code></pre>\n\n<p>I put some debug print statements so that you can see that the last line printed is \"Get line\" and then it hangs. </p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542549048, "post_id": 53361578, "comment_id": 93599730, "body": "What did you expect to happen?"}, {"owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542549351, "post_id": 53361578, "comment_id": 93599819, "body": "I&#39;m expecting the result to be like the table at the top of my question, but my code doesn&#39;t result in such"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542549467, "post_id": 53361578, "comment_id": 93599864, "body": "The table at the top contains things like <code>: [</code>. Which part of your code is supposed to produce output like that?"}, {"owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542549760, "post_id": 53361578, "comment_id": 93599968, "body": "Oh, I&#39;m not expecting the result to be printed exactly like that. It&#39;s just to make things easier to look at for SO users. Something which prints: [&#39;doc3&#39; &#39;title&#39; &#39;text&#39;, &#39;doc5&#39; &#39;title&#39;, ...] would be a sufficient answer for my question. I&#39;ll edit the question"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542549943, "post_id": 53361578, "comment_id": 93600019, "body": "OK, now you have commas in there. Which part of your code is supposed to print <code>,</code>? (BTW, I&#39;m not trying to make you jump through hoops for our amusement. This is a hint towards the solution.)"}, {"owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542550261, "post_id": 53361578, "comment_id": 93600128, "body": "I&#39;m... not actually sure about the comma as the delimiter. Previously, when I&#39;m using the structure of &quot;push @{ $wordlist{$str} }, ($docno, $location);&quot;, the exact same code I use to print as I&#39;ve written above results in: wordX 419 title 421 title 421 text"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542550355, "post_id": 53361578, "comment_id": 93600156, "body": "That code is equivalent to <code>push @{ $wordlist{$str} }, $docno, $location;</code>. It&#39;s adding two elements to the array. The code in your script above only adds one element, <code>$doc{$docno}</code> (which is itself a reference to another array)."}, {"owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542550800, "post_id": 53361578, "comment_id": 93600302, "body": "Honestly, I have a difficulty in expressing myself here, as I&#39;m not a native speaker and I&#39;ve only been using Perl for a few hours.  I just want the ARRAY(0x66d4508) to be converted to something like &#39;doc1&#39; &#39;title&#39;. I know that $doc{$docno} is a reference to array, what I&#39;m asking is how can I print the array itself"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542550873, "post_id": 53361578, "comment_id": 93600325, "body": "You&#39;d have to dereference it (with <code>@{ ... }</code>)."}, {"owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542551285, "post_id": 53361578, "comment_id": 93600468, "body": "I tried changing the printing code from &quot;@{ $wordlist{$str} }&quot; to  &quot;@{ @{ $wordlist{$str} } }&quot; and it doesn&#39;t print anything. In fact, it&#39;s actually the first thing I tried. Which part of my code do you specifically think I have to dereference?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542551386, "post_id": 53361578, "comment_id": 93600498, "body": "You have to dereference each element of <code>@{ $wordlist{$str} }</code> separately. It doesn&#39;t make sense to nest <code>@{ @{ } }</code>."}, {"owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542551561, "post_id": 53361578, "comment_id": 93600546, "body": "Oh, yeah, that makes sense. I&#39;ll try doing it and then get back to you with the result. Thanks"}, {"owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542553954, "post_id": 53361578, "comment_id": 93601266, "body": "melpomene, I&#39;ve tried changing the code, but it&#39;s not working and I&#39;m stuck now. Can you help me by pointing out where is the error? I&#39;ve put my new code in my question above"}], "answers": [{"tags": [], "owner": {"reputation": 10748, "user_id": 13992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c81f585328c241594864f888f1154025?s=128&d=identicon&r=PG", "display_name": "badp", "link": "https://stackoverflow.com/users/13992/badp"}, "is_accepted": false, "score": 1, "last_activity_date": 1542639721, "creation_date": 1542639721, "answer_id": 53377354, "question_id": 53361578, "link": "https://stackoverflow.com/questions/53361578/printing-hashes-of-arrays-of-hashes-of-arrays/53377354#53377354", "title": "Printing Hashes of Arrays of Hashes of Arrays", "body": "<p>Your data structure threw the information you're after away.</p>\n\n<p>Just do this:</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) { \n    # determine doc no and location within docs\n    ....\n\n    #iterate words in a given location within a document \n    foreach my $str ($line =~ /[[:alpha:]]+/g) { \n        push $worldlist{Sstr}-&gt;@*, {\n            docno =&gt; $docno,\n            location =&gt; $location\n        };\n    }\n}\n</code></pre>\n\n<p>This makes the job of printing out your data structure trivial.</p>\n"}], "owner": {"reputation": 101, "user_id": 7247232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f25db7883fd44018f1c0953189098e7?s=128&d=identicon&r=PG&f=1", "display_name": "sagungrp", "link": "https://stackoverflow.com/users/7247232/sagungrp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578992605, "creation_date": 1542548821, "last_edit_date": 1578992605, "question_id": 53361578, "link": "https://stackoverflow.com/questions/53361578/printing-hashes-of-arrays-of-hashes-of-arrays", "title": "Printing Hashes of Arrays of Hashes of Arrays", "body": "<p>I'm trying to create an inverted index of words and their placements in a given corpus of documents. An example of the data structure I'm aiming for is something like:</p>\n\n<pre><code>+----------+--------------------------------------------------------------+\n|   Word   |                           Location                           |\n+----------+--------------------------------------------------------------+\n| 'word 1' | 'doc1' 'title',  'doc4' 'text', 'doc7' 'title' 'text'        |\n+----------+--------------------------------------------------------------+\n</code></pre>\n\n<p>Where 'title' and 'text' are the possible locations. The above table means that 'word 1' can be found in the title of doc1, the text of doc4, and both the title and the text of doc7.</p>\n\n<p>My code to parse and generate the data is:</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) { \n    # determine doc no and location within docs\n    ....\n\n    #iterate words in a given location within a document \n    foreach my $str ($line =~ /[[:alpha:]]+/g) { \n        push @{ $doc{$docno} }, $location;        \n        push @{ $wordlist{$str} }, $doc{$docno}; \n    }\n}\n</code></pre>\n\n<p>While my code to print the data is:</p>\n\n<pre><code>foreach my $str (reverse sort { $wordlist{$a} &lt;=&gt; $wordlist{$b} } keys %wordlist) { \n    printf $fo \"%-15s %-15s \\n\", $str, \"@{ $wordlist{$str} }\";\n} \n</code></pre>\n\n<p>However, the result is:</p>\n\n<pre><code>+----------+--------------------------------------------------------------+\n|   Word   |                           Location                           |\n+----------+--------------------------------------------------------------+\n|  'word1' | ARRAY(0x66d4508) ARRAY(0x66d4508) ARRAY(0x66d4508)           |\n+----------+--------------------------------------------------------------+\n</code></pre>\n\n<p>Where did I go wrong?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I tried changing the printing code to:</p>\n\n<pre><code>foreach my $str (reverse sort { $wordlist{$a} &lt;=&gt; $wordlist{$b} } keys %wordlist) { \n    printf \"%-15s\", $str;\n\n    @arr = @{ $wordlist{$str} };\n    foreach $arr (@arr)\n    {\n        print \"@{ $arr }: , \";\n    }\n\n    print \"\\n\";\n} \n</code></pre>\n\n<p>But the result is:</p>\n\n<pre><code>word101        title title text text text text text text ...\n</code></pre>\n\n<p>I can't figure out how to print the document number alongside the location within said document</p>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1542541575, "post_id": 53360376, "comment_id": 93597677, "body": "Not clear, please do explain the logic behind the expected output."}, {"owner": {"reputation": 5, "user_id": 7068425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd66af0aeeb9475513d4a0ecc2ab1abf?s=128&d=identicon&r=PG&f=1", "display_name": "Sasi", "link": "https://stackoverflow.com/users/7068425/sasi"}, "reply_to_user": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1542541910, "post_id": 53360376, "comment_id": 93597773, "body": "I want to append a line start(); after the pattern /sub tc1/ and prepend a line stop(); before the first occurence of the pattern /endcase/ after /sub tc1/"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7068425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd66af0aeeb9475513d4a0ecc2ab1abf?s=128&d=identicon&r=PG&f=1", "display_name": "Sasi", "link": "https://stackoverflow.com/users/7068425/sasi"}, "edited": false, "score": 0, "creation_date": 1542548012, "post_id": 53360667, "comment_id": 93599391, "body": "But if I have lines before sub tc1 it is appending those lines after start();"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 5, "user_id": 7068425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd66af0aeeb9475513d4a0ecc2ab1abf?s=128&d=identicon&r=PG&f=1", "display_name": "Sasi", "link": "https://stackoverflow.com/users/7068425/sasi"}, "edited": false, "score": 0, "creation_date": 1542548455, "post_id": 53360667, "comment_id": 93599543, "body": "@Sasi, I have edited it now, could you please check now and let me know?"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": true, "score": 0, "last_activity_date": 1542548438, "last_edit_date": 1542548438, "creation_date": 1542542666, "answer_id": 53360667, "question_id": 53360376, "link": "https://stackoverflow.com/questions/53360376/how-to-insert-a-line-after-a-pattern-and-insert-another-line-before-the-first-oc/53360667#53360667", "title": "How to Insert a line after a pattern and insert another line before the first occurence of a word from pattern1 using sed?", "body": "<p>This should be easy task of <code>awk</code>, could you please try following if you are ok with <code>awk</code>.</p>\n\n<pre><code>awk '\n/sub tc1/{\n  sub_tcl_val=$0 ORS \"&amp;start();\"\n  flag=val=\"\"\n  next\n}\n/endcase/ &amp;&amp; ++count==1{\n  flag=1\n  print sub_tcl_val ORS val ORS \"&amp;stop()\" ORS $0 ORS \"}\"\n  val=sub_tcl_val=\"\"\n  next\n}\n!flag{\n  val=val?val ORS $0:$0\n}'  Input_file\n</code></pre>\n\n<p>Output will be as follows.</p>\n\n<pre><code>sub tc1 {\n&amp;start();\na\nb\nc\nd\n&amp;stop()\nendcase\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 7068425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd66af0aeeb9475513d4a0ecc2ab1abf?s=128&d=identicon&r=PG&f=1", "display_name": "Sasi", "link": "https://stackoverflow.com/users/7068425/sasi"}, "edited": false, "score": 0, "creation_date": 1542963030, "post_id": 53373852, "comment_id": 93759525, "body": "$ sed -e &#39;/sub tc1/,/endcase/!b;/sub tc1/a\\&amp;start();&#39; -e &#39;/endcase/i\\&amp;stop();&#39; myfil sed -e &#39;/sub tc1/,/endcase/bvi;/sub tc1/a\\&amp;start();&#39; -e &#39;/endcase/i\\&amp;stop();&#39; myfil sed: can&#39;t find label for jump to `vi&#39;"}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "reply_to_user": {"reputation": 5, "user_id": 7068425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd66af0aeeb9475513d4a0ecc2ab1abf?s=128&d=identicon&r=PG&f=1", "display_name": "Sasi", "link": "https://stackoverflow.com/users/7068425/sasi"}, "edited": false, "score": 0, "creation_date": 1542963503, "post_id": 53373852, "comment_id": 93759802, "body": "@sasi  your input seems some what garbled. Try removing everything following the first occurrence  of <code>myfil</code>."}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1542627561, "creation_date": 1542627561, "answer_id": 53373852, "question_id": 53360376, "link": "https://stackoverflow.com/questions/53360376/how-to-insert-a-line-after-a-pattern-and-insert-another-line-before-the-first-oc/53373852#53373852", "title": "How to Insert a line after a pattern and insert another line before the first occurence of a word from pattern1 using sed?", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -e '/sub tc1/,/endcase/!b;/sub tc1/a\\&amp;start();' -e '/endcase/i\\&amp;stop();' file\n</code></pre>\n\n<p>Use a range to focus on the start/end delimiters in this case <code>sub tc1</code>/<code>endcase</code>. Then append the string <code>&amp;start();</code> after the start delimiter and insert the string <code>&amp;stop();</code> before the end delimiter.</p>\n"}], "owner": {"reputation": 5, "user_id": 7068425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd66af0aeeb9475513d4a0ecc2ab1abf?s=128&d=identicon&r=PG&f=1", "display_name": "Sasi", "link": "https://stackoverflow.com/users/7068425/sasi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53360667, "answer_count": 2, "score": 0, "last_activity_date": 1542627561, "creation_date": 1542540724, "last_edit_date": 1542541743, "question_id": 53360376, "link": "https://stackoverflow.com/questions/53360376/how-to-insert-a-line-after-a-pattern-and-insert-another-line-before-the-first-oc", "title": "How to Insert a line after a pattern and insert another line before the first occurence of a word from pattern1 using sed?", "body": "<pre><code>sub tc1 {\na\nb\nc\nd\nendcase\n}\nsub tc2\n{\na\nb\nc\nendcase\n}\n</code></pre>\n\n<p>I want to call a subroutine say start() after sub tc1 and call stop() before that endcase of sub tc1</p>\n\n<p>I used this command</p>\n\n<pre><code>perl -i.bak -pe 'BEGIN{undef $/;} s/(sub\\s+TC1[\\s\\n]+\\{)(.*)endcase/$1\\n&amp;start();$2&amp;stop();\\nendcase/smg' file.txt\n</code></pre>\n\n<h2>Output</h2>\n\n<pre><code>sub tc1 {\n&amp;start();\na\nb\nc\nd\nendcase\n}\nsub tc2\n{\na\nb\nc\nstop();\nendcase\n}\n</code></pre>\n\n<p>but it is modifying at lastly matched endcase pattern</p>\n\n<h2>Expected output</h2>\n\n<pre><code>sub tc1 {\n&amp;start();\na\nb\nc\nd\n&amp;stop();\nendcase\n}\n</code></pre>\n"}, {"tags": ["perl", "encoding", "escaping"], "comments": [{"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1542458738, "post_id": 53351265, "comment_id": 93580504, "body": "Did you <code>use Data::Dumper</code> somewhere?"}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "reply_to_user": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1542458803, "post_id": 53351265, "comment_id": 93580517, "body": "@ernix yes, why?"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1542459088, "post_id": 53351265, "comment_id": 93580582, "body": "I&#39;ve just tried to run your script.  Try <code>open my $fr, &#39;&lt;:raw&#39;, &#39;file.html&#39; or die &quot;Can&#39;t open file $!&quot;;</code>,  it seems your script modifies IO layer, to read all strings from open as UTF8 decoded. see <a href=\"https://perldoc.perl.org/PerlIO.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/PerlIO.html</a> and <a href=\"https://perldoc.perl.org/perlopentut.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlopentut.html</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1542459107, "post_id": 53351265, "comment_id": 93580587, "body": "Start by reading <a href=\"http://perldoc.perl.org/perluniintro.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perluniintro.html</a>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1542459240, "post_id": 53351265, "comment_id": 93580613, "body": "I also usually suggest using <a href=\"https://metacpan.org/pod/File::Slurper\" rel=\"nofollow noreferrer\">File::Slurper</a> for reading a file into a string."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542477754, "post_id": 53351265, "comment_id": 93585548, "body": "Data::Dumper is escaping high-bit characters and metacharacters in your string, this is a feature of Data::Dumper which is designed for debugging. Don&#39;t use Data::Dumper if you want to output the actual string."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1542479654, "post_id": 53351265, "comment_id": 93586082, "body": "I recommend reading <a href=\"https://perlgeek.de/en/article/encodings-and-unicode\" rel=\"nofollow noreferrer\">perlgeek.de/en/article/encodings-and-unicode</a>"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1542477653, "post_id": 53351833, "comment_id": 93585521, "body": "To be more specific: the standard output file handle&#39;s encoding has to match what you are trying to print <b>to</b>. Normally, this is a terminal that expects UTF-8. Don&#39;t use the <code>:utf8</code> layer, use <code>:encoding(UTF-8)</code>."}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1542478572, "post_id": 53351833, "comment_id": 93585790, "body": "I changed open statement to <code>open my $fr, &#39;&lt;:encoding(UTF-8)&#39;, $file or die &quot;Can&#39;t open file $!&quot;;</code> and I included at the beginning <code>use open qw(:std :utf8);</code>, but it is still broken and added <code>binmode STDOUT, &#39;:encoding(UTF-8)&#39;;</code> before <code>Dumper</code>."}, {"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1542479748, "post_id": 53351833, "comment_id": 93586115, "body": "It&#39;s not broken. It&#39;s a feature of Data::Dumper. @Grinnz already told you to not use Data::Dumper. Why don&#39;t you just print the string? Is there any reason why you are using Data::Dumper other than debugging?"}, {"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1542482501, "post_id": 53351833, "comment_id": 93586889, "body": "@tinita oh, it&#39;s is ok, it just Dumper breaks, so then it is solved :)"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 4, "last_activity_date": 1542502471, "last_edit_date": 1542502471, "creation_date": 1542462561, "answer_id": 53351833, "question_id": 53351265, "link": "https://stackoverflow.com/questions/53351265/reading-file-breaks-encoding-in-perl/53351833#53351833", "title": "Reading file breaks encoding in Perl", "body": "<p>You open the file with perl's default encoding:</p>\n\n<pre><code>open my $fh, '&lt;', ...;\n</code></pre>\n\n<p>If that encoding doesn't match the actual encoding, Perl might translate some characters incorrectly. If you know the encoding, specify it in the <code>open</code> mode:</p>\n\n<pre><code>open my $fh, '&lt;:utf8', ...;\n</code></pre>\n\n<p>You aren't done yet, though. Now that you have a probably decoded string, you want to output it. You have the same problem again. The standard output file handle's encoding has to match what you are trying to print to. If you've set up your terminal (or whatever) to expect UTF-8, you need to actually output UTF-8. One way to fix that is to make the standard filehandles use <code>UTF-8</code>:</p>\n\n<pre><code>use open qw(:std :utf8);\n</code></pre>\n\n<p>You have <code>use utf8</code>, but that only signals the encoding for your program file.</p>\n\n<p>I've written a much longer primer for Perl and Unicode in the back of <a href=\"https://www.learning-perl.com\" rel=\"nofollow noreferrer\">Learning Perl</a>. The StackOverflow question <a href=\"https://stackoverflow.com/q/6162484/2766176\">Why does modern Perl avoid UTF-8 by default?</a> has lots of good advice.</p>\n"}], "owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53351833, "answer_count": 1, "score": 0, "last_activity_date": 1542502471, "creation_date": 1542457690, "last_edit_date": 1542458820, "question_id": 53351265, "link": "https://stackoverflow.com/questions/53351265/reading-file-breaks-encoding-in-perl", "title": "Reading file breaks encoding in Perl", "body": "<p>I have script for reading html files in Perl, it works, but it breaks encoding.</p>\n\n<p><strong>This is my script:</strong></p>\n\n<pre><code>use utf8;\nuse Data::Dumper;\n\nopen my $fr, '&lt;', 'file.html' or die \"Can't open file $!\";\nmy $content_from_file = do { local $/; &lt;$fr&gt; };\n\nprint Dumper($content_from_file);\n</code></pre>\n\n<p><strong>Content of file.html:</strong></p>\n\n<pre><code>&lt;span class=\"previews-counter\"&gt;Po\u010det hodnoten\u00ed: [%product.rating_votes%]&lt;/span&gt;\n&lt;a href=\"#\" title=\"[%L10n.msg('Zobrazi\u0165 recenzie')%]\" class=\"previews-btn js-previews-btn\"&gt;[%L10n.msg('Zobrazi\u0165 recenzie')%]&lt;/a&gt;\n</code></pre>\n\n<p><strong>Output from reading:</strong></p>\n\n<pre><code>&lt;span class=\\\"previews-counter\\\"&gt;Po\\x{10d}et hodnoten\\x{ed}: [%product.rating_votes%]&lt;/span&gt;\n&lt;a href=\\\"#\\\" title=\\\"[%L10n.msg('Zobrazi\\x{165} recenzie')%]\\\" class=\\\"previews-btn js-previews-btn\\\"&gt;[%L10n.msg('Zobrazi\\x{165} recenzie')%]&lt;/a&gt;\n</code></pre>\n\n<p>As you can see lot of characters are escaped, how can I read this file and show content of it as it is?</p>\n"}, {"tags": ["regex", "string", "perl", "text", "extract"], "answers": [{"comments": [{"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1542456667, "post_id": 53350529, "comment_id": 93579946, "body": "Thank you, this works, but encoding is still broken."}, {"owner": {"reputation": 1625, "user_id": 227965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ac83c8df1bedae5919f851734ba781?s=128&d=identicon&r=PG", "display_name": "Uncle Arnie", "link": "https://stackoverflow.com/users/227965/uncle-arnie"}, "reply_to_user": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1542796082, "post_id": 53350529, "comment_id": 93694793, "body": "@tomsk The encoding is an entirely different issue. It depends on many things like your terminal (is it expecting UTF-8 or some other encoding) and the encoding of the initial string <code>$content_from_file</code>. That is something you&#39;ll have work out."}], "tags": [], "owner": {"reputation": 1625, "user_id": 227965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14ac83c8df1bedae5919f851734ba781?s=128&d=identicon&r=PG", "display_name": "Uncle Arnie", "link": "https://stackoverflow.com/users/227965/uncle-arnie"}, "is_accepted": true, "score": 2, "last_activity_date": 1542452238, "creation_date": 1542452238, "answer_id": 53350529, "question_id": 53350450, "link": "https://stackoverflow.com/questions/53350450/extract-string-between-two-strings-using-regexp-in-perl/53350529#53350529", "title": "Extract string between two strings using Regexp in Perl", "body": "<p>In regex <code>.*</code> is greedy. This means it will try to match the longest string possible.\nChange it to <code>.*?</code> so that it is not greedy. Then it will match the shortest string possible.</p>\n\n<pre><code>my @L10n = $content_from_file =~ /\\[%L10n\\.msg\\('(.*?)'\\)%\\]/g;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "edited": false, "score": 0, "creation_date": 1542456612, "post_id": 53350667, "comment_id": 93579934, "body": "Yea, but it can contain even HTML code inside L10n :)"}], "tags": [], "owner": {"reputation": 68, "user_id": 3017387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jvqrH.gif?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3017387/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1542453222, "creation_date": 1542453222, "answer_id": 53350667, "question_id": 53350450, "link": "https://stackoverflow.com/questions/53350450/extract-string-between-two-strings-using-regexp-in-perl/53350667#53350667", "title": "Extract string between two strings using Regexp in Perl", "body": "<p>I created this regexp for you</p>\n\n<pre><code>(?:\\[%L10n.msg\\(')([A-Za-z\u0165 ]+)\n</code></pre>\n\n<p>It match what you need but maybe you need to tweak if for Slovakian characters?\nThe result is in group1</p>\n\n<p>You can take a look at it here.</p>\n\n<p><a href=\"https://regex101.com/r/hHbNEe/1/\" rel=\"nofollow noreferrer\">https://regex101.com/r/hHbNEe/1/</a></p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1542453900, "creation_date": 1542453900, "answer_id": 53350754, "question_id": 53350450, "link": "https://stackoverflow.com/questions/53350450/extract-string-between-two-strings-using-regexp-in-perl/53350754#53350754", "title": "Extract string between two strings using Regexp in Perl", "body": "<p>The simplest way to fix your matching problem is to make the <code>.*</code> part of your regex non-greedy, by adding a <code>?</code> to the end.</p>\n\n<p>Your encoding problem is harder to address as it depends on the encoding of your data file and how you are reading the data into your file. So we would need more information.</p>\n\n<p>This version works for me:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nuse Data::Dumper;\n\nmy $content_from_file = &lt;&lt;END_OF_TXT;\n    &lt;div class=\"detail-trash\"&gt;\n          &lt;span class=\"blog-article-social-net social-net-fb\"&gt;\n             &lt;svg class=\"svg-icon-facebook\"&gt;\n                &lt;use xlink:href=\"[%domain.url_media%]/images/svg-sprite.svg#svg-icon-facebook\"&gt;&lt;/use&gt;\n             &lt;/svg&gt;\n             [%L10n.msg('Zdiela\u0165')%]\n          &lt;/span&gt;\n       &lt;span class=\"previews-counter\"&gt;Po\u010det hodnoten\u00ed: [%product.rating_votes%]&lt;/span&gt;\n       &lt;a href=\"#\" title=\"[%L10n.msg('Zobrazi\u0165 recenzie')%]\" class=\"previews-btn js-previews-btn\"&gt;[%L10n.msg('Zobrazi\u0165 recenzie')%]&lt;/a&gt;\n    &lt;/div&gt;\nEND_OF_TXT\n\nmy (@L10n) = $content_from_file =~ /\\[\\%L10n\\.msg\\('(.*?)'\\)\\%\\]/g;\nsay Dumper @L10n;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = 'Zdiela\u0165';\n$VAR2 = 'Zobrazi\u0165 recenzie';\n$VAR3 = 'Zobrazi\u0165 recenzie';\n</code></pre>\n"}], "owner": {"reputation": 763, "user_id": 3276539, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/6W2ss.png?s=128&g=1", "display_name": "tomsk", "link": "https://stackoverflow.com/users/3276539/tomsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53350529, "answer_count": 3, "score": 0, "last_activity_date": 1542453900, "creation_date": 1542451470, "question_id": 53350450, "link": "https://stackoverflow.com/questions/53350450/extract-string-between-two-strings-using-regexp-in-perl", "title": "Extract string between two strings using Regexp in Perl", "body": "<p>I try to extract text between <code>[%L10n.msg('</code> and <code>')%]</code> in Perl, so for example if I have code like <code>[%L10n.msg('foo')%]</code>, I would like to get <strong>foo</strong>.</p>\n\n<p>I have working script for it, as you can see it below, but it is buggy and it breaks encoding as you can see.</p>\n\n<p>I would like to know what is wrong with that script and how to fix it.</p>\n\n<p><strong>My Regexp script:</strong></p>\n\n<pre><code>my (@L10n) = $content_from_file =~ /\\[\\%L10n\\.msg\\('(.*)'\\)\\%\\]/g;\n</code></pre>\n\n<p><strong>$content_from_file:</strong></p>\n\n<pre><code>    &lt;div class=\"detail-trash\"&gt;\n          &lt;span class=\"blog-article-social-net social-net-fb\"&gt;\n             &lt;svg class=\"svg-icon-facebook\"&gt;\n                &lt;use xlink:href=\"[%domain.url_media%]/images/svg-sprite.svg#svg-icon-facebook\"&gt;&lt;/use&gt;\n             &lt;/svg&gt;\n             [%L10n.msg('Zdiela\u0165')%]\n          &lt;/span&gt;\n       &lt;span class=\"previews-counter\"&gt;Po\u010det hodnoten\u00ed: [%product.rating_votes%]&lt;/span&gt;\n       &lt;a href=\"#\" title=\"[%L10n.msg('Zobrazi\u0165 recenzie')%]\" class=\"previews-btn js-previews-btn\"&gt;[%L10n.msg('Zobrazi\u0165 recenzie')%]&lt;/a&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p><strong>Current result:</strong></p>\n\n<pre><code>Zdiela\\x{165}\nZobrazi\\x{165} recenzie')%]\\\" class=\\\"previews-btn js-previews-btn\\\"&gt;[%L10n.msg('Zobrazi\\x{165} recenzie\n</code></pre>\n\n<p><strong>Requested result:</strong></p>\n\n<pre><code>Zdiela\u0165\nZobrazi\u0165 recenzie\nZobrazi\u0165 recenzie\n</code></pre>\n"}, {"tags": ["perl", "bit-manipulation"], "comments": [{"owner": {"reputation": 37, "user_id": 5565591, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/29277bf6daf22ef1c0d233eb014121a9?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh ", "link": "https://stackoverflow.com/users/5565591/saurabh"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1542403698, "post_id": 53345458, "comment_id": 93570186, "body": "I want to make decimal 101010 to be binary(101010) ."}, {"owner": {"reputation": 37, "user_id": 5565591, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/29277bf6daf22ef1c0d233eb014121a9?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh ", "link": "https://stackoverflow.com/users/5565591/saurabh"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1542404026, "post_id": 53345458, "comment_id": 93570313, "body": "foreach(@strobes) {    my $x_num=sprintf (&#39;%b&#39;, $strobes);  }  I am getting this error while using the above command &quot;Global symbol &quot;$strobes&quot; requires explicit package name&quot;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542511400, "post_id": 53345458, "comment_id": 93592666, "body": "You don&#39;t need to do any conversion to do bitwise and operations on a number.  26 &amp; 3 is the same as 0b11010 &amp; 0b11 and returns 2."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1542404901, "creation_date": 1542404901, "answer_id": 53345887, "question_id": 53345458, "link": "https://stackoverflow.com/questions/53345458/converting-decimal-100-to-binary-100/53345887#53345887", "title": "Converting decimal 100 to binary 100", "body": "<p>Converting the number 10000001110000110<sub>10</sub> to the number 10000001110000110<sub>2</sub> is rather easy.</p>\n\n<ol>\n<li>Obtain the decimal representation of the number. This is as simple as stringifying the number.</li>\n<li>Pass the the decimal representation of the number to a routine that converts from binary to the represented number. <code>oct('0b'.$_)</code> does this.</li>\n</ol>\n\n<p>Solution:</p>\n\n<pre><code>my @bad = ( 111110000, 110100010, ... );\nmy @fixed = map { oct('0b'.$_) } @bad;      # 496, 418, ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1542404978, "creation_date": 1542404978, "answer_id": 53345896, "question_id": 53345458, "link": "https://stackoverflow.com/questions/53345458/converting-decimal-100-to-binary-100/53345896#53345896", "title": "Converting decimal 100 to binary 100", "body": "<p>If I understand you correctly you want this:</p>\n\n<pre><code>my $num = 101010;\nprint interpret_as_binary($num);    # 42\n</code></pre>\n\n<p>You could go through the labor of dividing the number by 2 and so on. Or you can take advantage that <a href=\"https://perldoc.perl.org/functions/oct.html\" rel=\"nofollow noreferrer\"><code>oct</code></a> will interpret a string starting with <code>0b</code> as a binary number.</p>\n\n<pre><code>print oct(\"0b\". $num);\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5565591, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/29277bf6daf22ef1c0d233eb014121a9?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh ", "link": "https://stackoverflow.com/users/5565591/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1542405004, "accepted_answer_id": 53345887, "answer_count": 2, "score": -1, "last_activity_date": 1542404978, "creation_date": 1542402828, "last_edit_date": 1542403639, "question_id": 53345458, "link": "https://stackoverflow.com/questions/53345458/converting-decimal-100-to-binary-100", "closed_reason": "Duplicate", "title": "Converting decimal 100 to binary 100", "body": "<p>I want to convert decimal number to exact same binary number.\nEg. Decimal (10) to Binary (10).\nDec(10000001110000110) to binary(10000001110000110).</p>\n\n<p>I am new to perl. The Lame approach I can think of is to convert dec to string and string to binary but I am sure there has to be a better way to achieve it.</p>\n\n<p>I am using a function to get an array of decimal numbers.</p>\n\n<pre><code>@Arr= {111110000,110100010,...}\n</code></pre>\n\n<p>Note this is decimal number since when I tried to subtract 1 from it's elements I got 11110000-1=11109999.</p>\n\n<p>I need it in binary format so that I can do a logical AND operation on it.</p>\n\n<p>Can someone please suggest on how to achieve it.</p>\n"}, {"tags": ["perl", "pcre"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1542394910, "post_id": 53343632, "comment_id": 93566670, "body": "Maybe using <code>(??{})</code> instead of <code>(?{})</code>: <code>&#47;(.+)\\.(.+)\\((.+)\\)(.+)(??{ your_condition ? &quot;&quot; : &quot;(*FAIL)&quot;})&#47;</code> ? I mean, this is OK if you are writing some quick one-liner for a one time job; but if this is supposed to be maintainable, production code, then don&#39;t try to do this with just a regex of course ;)"}, {"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1542395578, "post_id": 53343632, "comment_id": 93566966, "body": "(peharps <code>&quot;(*ACCEPT)&quot;</code> instead of <code>&quot;&quot;</code>. Both work, and I have no opinion on which is &quot;better&quot;. <code>ACCEPT</code> is more explicit I guess; but since you are writing something not readable at all, does it really matter?)"}, {"owner": {"reputation": 10698, "user_id": 1765, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Lhaux.png?s=128&g=1", "display_name": "Peter Turner", "link": "https://stackoverflow.com/users/1765/peter-turner"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1542395618, "post_id": 53343632, "comment_id": 93566987, "body": "@dada yeah, it&#39;s gotta be a one liner. I&#39;m injecting into some version matching thing into some script to help a network guy out using their own tools.  But that totally worked, thanks a lot you want to make it a legit answer to get credit?"}], "answers": [{"comments": [{"owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1542642608, "post_id": 53344464, "comment_id": 93632037, "body": "from my undrstanding <code>(*FAIL)</code> will just force to backtrack maybe <code>(*SKIP)(*FAIL)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "edited": false, "score": 0, "creation_date": 1542655724, "post_id": 53344464, "comment_id": 93638472, "body": "@NahuelFouilleul, No idea what it does, but it&#39;s not needed"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1542405282, "last_edit_date": 1542405282, "creation_date": 1542397778, "answer_id": 53344464, "question_id": 53343632, "link": "https://stackoverflow.com/questions/53343632/how-do-i-make-a-perl-regular-expresion-fail-in-the-code-block/53344464#53344464", "title": "How do I make a perl regular expresion fail in the code block?", "body": "<p>First of all, the regex does succeed. But it does so whether the condition is true or not. I think you're actually asking for it to <em>fail</em> when the condition is false. For that, you want</p>\n\n<pre><code>(?(?{ condition })(*ACCEPT)|(*FAIL))\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>(?(?{ !condition })(*FAIL))\n</code></pre>\n\n<p>Fixed:</p>\n\n<pre><code>perl -nle'\n   print \"$_: match\"\n      if /\n         ^(.+)\\.(.+)\\((.+)\\)(.+)\\z\n         (?(?{\n            !( $1 &gt; 9\n            || $1 == 9 &amp;&amp; $2 &gt; 1\n            || $1 == 9 &amp;&amp; $2 == 1 &amp;&amp; $3 &gt; 7\n            || $1 == 9 &amp;&amp; $2 == 1 &amp;&amp; $3 == 7 &amp;&amp; $4 &gt; 22\n            )\n         })(*FAIL))\n      /x;\n' versions\n</code></pre>\n\n<p>A far better approach is to do the check outside of the pattern.</p>\n\n<pre><code>perl -nle'\n   print \"$_: match\"\n      if /^(.+)\\.(.+)\\((.+)\\)(.+)\\z/\n      &amp;&amp; (\n            $1 &gt; 9\n         || $1 == 9 &amp;&amp; $2 &gt; 1\n         || $1 == 9 &amp;&amp; $2 == 1 &amp;&amp; $3 &gt; 7\n         || $1 == 9 &amp;&amp; $2 == 1 &amp;&amp; $3 == 7 &amp;&amp; $4 &gt; 22\n      );\n' versions\n</code></pre>\n"}], "owner": {"reputation": 10698, "user_id": 1765, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/Lhaux.png?s=128&g=1", "display_name": "Peter Turner", "link": "https://stackoverflow.com/users/1765/peter-turner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542405282, "creation_date": 1542393662, "question_id": 53343632, "link": "https://stackoverflow.com/questions/53343632/how-do-i-make-a-perl-regular-expresion-fail-in-the-code-block", "title": "How do I make a perl regular expresion fail in the code block?", "body": "<p>I've got a screw I'm trying to nail in with perl and so far this is what I've got so far.</p>\n\n<pre><code>perl -ne '/(.+)\\.(.+)\\((.+)\\)(.+)(?{print \"match\" if  ( $1 &gt; 9 || ( $1 == 9 &amp;&amp; $2 &gt; 1 ) || ($1 == 9 &amp;&amp; $2 == 1 &amp;&amp; $3 &gt; 7 ) || $1 == 9 &amp;&amp; $2 == 1 &amp;&amp; $3 == 7 &amp;&amp; $4 &gt; 22 ) })/' versions\n</code></pre>\n\n<p>versions:</p>\n\n<pre><code>9.1(7)23\n9.1(7)22\n8.1(7)22\n7.2(33)24\n55\n</code></pre>\n\n<p>it will print \"match\" if the version in the file is > than 9.1(7)23, which is good. </p>\n\n<p>But I want the regexp to succeed, not just print \"match\".  How do I translate the stuff inside the code block to an actual response.  I've tried quite a few iterations with <code>*ACCEPT|*FAIL</code> but nothing has worked so far. </p>\n"}, {"tags": ["perl", "debugging", "foreach"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542388826, "post_id": 53342512, "comment_id": 93564059, "body": "Can&#39;t you just put a breakpoint in that specific line, then hit <code>c</code> to continue execution until a breakpoint is reached?"}, {"owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1542393167, "post_id": 53342512, "comment_id": 93565914, "body": "Thanks for your suggestion. I am not familiar with debugger. I can try it."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1542390472, "post_id": 53342588, "comment_id": 93564760, "body": "You can also set <code>$DB::single = 1</code> at any point in your code, even inside modules or inside a compile-time (e.g., inside <code>BEGIN {...}</code> blocks) to set a breakpoint."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1542388917, "last_edit_date": 1542388917, "creation_date": 1542388842, "answer_id": 53342588, "question_id": 53342512, "link": "https://stackoverflow.com/questions/53342512/how-to-debug-a-perl-program-starting-from-a-specific-line/53342588#53342588", "title": "How to debug a perl program starting from a specific line?", "body": "<ol>\n<li><p>After starting the debugger, you can tell it to continue until it reaches a given line, e.g.</p>\n\n<pre><code>c 124\n</code></pre></li>\n<li><p>To figure out why a foreach loop isn't entered, check the loop's list before entering it. You can tell the debugger to evaluate the expression like this:</p>\n\n<pre><code>x @values\n</code></pre>\n\n<p>if the loop is something like <code>foreach my $value (@values)</code>. It will probably tell you</p>\n\n<pre><code>empty array\n</code></pre>\n\n<p>To discover why the array is emtpy, you can try to \"watch\" the array</p>\n\n<pre><code>w @values\n</code></pre>\n\n<p>and then run the script with <code>r</code>. It will stop once any watched value changes.</p></li>\n<li><p>Use <code>h</code> to view the help.</p></li>\n</ol>\n"}], "owner": {"reputation": 367, "user_id": 6288248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/owuR9.png?s=128&g=1", "display_name": "Leon", "link": "https://stackoverflow.com/users/6288248/leon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 2, "accepted_answer_id": 53342588, "answer_count": 1, "score": 3, "last_activity_date": 1542388917, "creation_date": 1542388401, "last_edit_date": 1592644375, "question_id": 53342512, "link": "https://stackoverflow.com/questions/53342512/how-to-debug-a-perl-program-starting-from-a-specific-line", "title": "How to debug a perl program starting from a specific line?", "body": "<p>Environment: Linux CentOS 7 @HPC\nInterface: command interface, no GUI</p>\n<p>My PERL scripts have a logic error. It does not go through in a &quot;foreach&quot; loop. I use debugger command below:</p>\n<pre><code>perl -d /scripts_location/perlscripts.pl\n</code></pre>\n<p>However, it is run step by step. My scripts have almost thousand lines. Here is my questions:</p>\n<ol>\n<li><p>How to debug my scripts from specific line?</p>\n</li>\n<li><p>How to figure out the loop cannot be run? And why the loop cannot be run?</p>\n</li>\n<li><p>Is there any resource to show debugger skills in a whole process?</p>\n<p>I searched online. Most of them explain the commands. But few introduce the debug from the very beginning. I mean that first a simple program is given, set breakpoint or other label in the program, check output or trace error, and so on. After viewing websites, I am unable to know how to start debugging using PERL debugger. I used to debugging my program using output at specific lines to check the output is correct or not. However, current logic error cannot be figured out in this way.</p>\n</li>\n<li><p>Any further suggestion and help would be highly appreciated.</p>\n</li>\n</ol>\n"}, {"tags": ["perl", "ms-word", "win32ole"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "edited": false, "score": 0, "creation_date": 1543994127, "post_id": 53342941, "comment_id": 94113762, "body": "Thank you so much! I thought range was only a different way to access selection. Now it&#39;s clear, and it works!"}, {"owner": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "reply_to_user": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "edited": false, "score": 0, "creation_date": 1544001357, "post_id": 53342941, "comment_id": 94117153, "body": "@JNM Glad it works :-) Since you&#39;re new to Stack Overflow: the conventional way to &quot;thank&quot; for a contribution that answers the question is to click the checkmark at the left of the answer. Once you have some &quot;points&quot; on the site you can upvote any contribution (questions and answers) you find helpful. This informs others about the quality of contributions, adding value to the site. Enjoy!"}], "tags": [], "owner": {"reputation": 23462, "user_id": 3077495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZE6fb.png?s=128&g=1", "display_name": "Cindy Meister", "link": "https://stackoverflow.com/users/3077495/cindy-meister"}, "is_accepted": true, "score": 0, "last_activity_date": 1542390382, "creation_date": 1542390382, "answer_id": 53342941, "question_id": 53341696, "link": "https://stackoverflow.com/questions/53341696/inserting-a-picture-in-a-word-document-with-perl-win32ole/53342941#53342941", "title": "Inserting a picture in a word document with perl Win32::OLE", "body": "<p>I've never used perl, so I can only give you pseudo-code, based on my knowledge of the Word object model and what I see in the code in the question. Together with the explanation below, that hopefully should be enough to get you going...</p>\n\n<p>One of the most useful objects in Word's object model is <code>Range</code>. Think of a Range like an invisible selection in order to work with it. Automation code can use multiple Ranges, but there can be only one Selection, which is one reason Ranges are useful. Another is that execution is generally faster and there's less screen flicker.</p>\n\n<p>If the goal is to insert pictures at the end of the document what's needed is a Range that represents the end-point of the document. For example (pseudo-code! I don't know how to specify the member of a Word Enumeration in perl):</p>\n\n<pre><code>my $endDocRange = $go_document-&gt;Content;\n$endDocRange-&gt;Collapse(Word.WdCollapseDirection.wdCollapseEnd);\n</code></pre>\n\n<p>Think of this like first selecting the entire document, then pressing right-arrow to end up with a blinking cursor at the very end of the document.</p>\n\n<p>The object <code>$endDocRange</code> is then used as the target Range for the picture:</p>\n\n<pre><code>$go_document-&gt;InlineShapes-&gt;AddPicture( WorkDir() . $as_file, 0, 1, $endDocRange );\n</code></pre>\n\n<p>If the above code is run again an additional picture should appear at the end of the document, after the first picture. (But no guarantees where the text in the first line will end up as the <code>Selection</code> probably won't change, based only on the code in the question.)</p>\n"}], "owner": {"reputation": 125, "user_id": 10663571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rTypU.jpg?s=128&g=1", "display_name": "JNM", "link": "https://stackoverflow.com/users/10663571/jnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 53342941, "answer_count": 1, "score": 1, "last_activity_date": 1542468059, "creation_date": 1542384997, "last_edit_date": 1542468059, "question_id": 53341696, "link": "https://stackoverflow.com/questions/53341696/inserting-a-picture-in-a-word-document-with-perl-win32ole", "title": "Inserting a picture in a word document with perl Win32::OLE", "body": "<p>I'm developing a tool to generate Word documents with Win32::OLE in a Perl CGI, and I'm facing a problem I can't solve : when I insert a picture, it shows at the very end of the generated document, wherever I asked it to be inserted.</p>\n\n<p>Here's a sample code that explains my worries, where <em>$go_document</em> is my Word document ans <em>$as_file</em> the path to my picture file:</p>\n\n<pre><code>$go_document-&gt;ActiveWindow-&gt;Selection-&gt;TypeText( \"before the picture\\n\" );\n\nmy $last = $go_document-&gt;Paragraphs-&gt;Count;\nmy $para = $go_document-&gt;Paragraphs( $last );\n$go_document-&gt;InlineShapes-&gt;AddPicture( WorkDir() . $as_file, 0, 1, $para-&gt;Range );\n\n$go_document-&gt;ActiveWindow-&gt;Selection-&gt;TypeText( \"after the picture\\n\" );\n</code></pre>\n\n<p>The result includes the expected text lines, but the image shows after the second one. Moreover, if I include 2 pictures, the second one shows at the end of the document, but before the first one !</p>\n\n<p>Is there something I should do and I forgot?\nThanks in advance for any help.</p>\n"}, {"tags": ["string", "perl", "substitution"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542384757, "post_id": 53341564, "comment_id": 93562030, "body": "If your string is <code>&quot;$JVM&#47;...&quot; then you&#39;ll get a compile time error, because you don&#39;t have a </code>$JVM` variable declared. The double quotes <code>&quot;&quot;</code> make Perl <i>interpolate</i> variables. You probable don&#39;t have this string written in your code, but rather read it as input. That&#39;s something entirely different and changes the meaning if your question. Please be specific."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542385303, "post_id": 53341564, "comment_id": 93562319, "body": "I have that <i>str</i> read from %ENV, actually. And when read from it it comes as <b>&quot;$JVM/$JAVA8/Contents/Home&quot;</b> But that&#39;s not the problem. The problem is finding a practical way to substitute those symbols with key values from a hash table. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542386231, "post_id": 53341719, "comment_id": 93562802, "body": "Re &quot;<i>you&#39;ll get an error as you don&#39;t have a $JVM variable</i>&quot;, No, but you&#39;ll get <code>$JVM&#47;...</code> instead of <code>\\$JVM&#47;...</code>."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1542386865, "post_id": 53341719, "comment_id": 93563099, "body": "Thank you for the answer. I&#39;ve tried it however my code contains some symbols which have &#39;_&#39; , e.g. like &#39;$JAVA_HOME&#39; and for those symbols it returns the same. I haven&#39;t talked about those other symbols to keep the question short."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542387461, "post_id": 53341719, "comment_id": 93563423, "body": "@ikegami the question was edited. It was <code>&quot;$JVM&#47;...&quot;</code> initially, so my annotation was correct."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1542387488, "post_id": 53341719, "comment_id": 93563437, "body": "@Romario do you know anything about regular expressions? You need to change the pattern to take underscores as well. Please try to <i>understand</i> the answer and the code in it rather than just blindly copying it. If you do that, you&#39;ll eventually copy and run bad code off the internet, and cause harm to your computer."}, {"owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1542388608, "post_id": 53341719, "comment_id": 93563954, "body": "Of course I know about regexes. I added _ inside the brackets but the <b>$str</b> still returned either the original value or some other wrong result. Btw, among the symbols there are ones like JAVA_HOME_ , JAVA8_"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "edited": false, "score": 0, "creation_date": 1542389795, "post_id": 53341719, "comment_id": 93564470, "body": "@Romario Sounds like there is more to it than you are telling us. The relevant information is that you can put a variable in the substitution bit. If you are having trouble with the pattern you&#39;ll tell us more details I&#39;m afraid."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1542392280, "last_edit_date": 1542392280, "creation_date": 1542385088, "answer_id": 53341719, "question_id": 53341564, "link": "https://stackoverflow.com/questions/53341564/perl-parse-a-string-and-substitute-multiple-symbols/53341719#53341719", "title": "Perl parse a string and substitute multiple symbols", "body": "<p>You can substitute to a variable. The left hand side of <a href=\"http://perldoc.perl.org/functions/s.html\" rel=\"nofollow noreferrer\"><code>s///</code></a> can be a hash value.</p>\n\n<pre><code>my $str = '$JVM/$JAVA8/Contents/Home';\nmy %con = (\n    '\\$JVM'   =&gt; '/Library/Java/JavaVirtualMachines',\n    '\\$JAVA8' =&gt; 'jdk1.8.0_192.jdk'\n);\n\n$str =~ s{\n  (              # capture group for $1\n     \\\\          # the backslash in your '\\$JVM' hash key\n     \\$          # a literal dollar sign\n     [A-Z0-9_]+  # variable name\n  )\n}{$con{$1}}gx;\nprint $str;\n</code></pre>\n\n<p>Note that in your <code>$str</code>, you want to use single quotes <code>''</code> that do not do <a href=\"https://en.wikipedia.org/wiki/String_interpolation\" rel=\"nofollow noreferrer\">interpolation</a>, or you'll get an error as you don't have a <code>$JVM</code> variable.</p>\n\n<p>At the same time, you need to pay attention to your hash keys. If they are really <code>'\\$JVM'</code> and such, that means there's a literal backslash <code>\\</code> and a literal dollar <code>$</code> in them.  Therefore in the pattern we need three backslashes <code>\\\\\\</code>. Two to get a literal one (as the backslash escapes things with special meanings in regular expressions), and one to escape the dollar.</p>\n\n<p>If your keys do not have this backslash, the pattern changes.</p>\n\n<pre><code>my %con = (\n    '$JVM'   =&gt; '/Library/Java/JavaVirtualMachines',\n    '$JAVA8' =&gt; 'jdk1.8.0_192.jdk'\n);\n\n$str =~ s{(\\$[A-Z0-9_]+)}{$con{$1}}g;\n</code></pre>\n\n<p>I used the <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\"><code>/x</code> modifier</a> in the first version, which allows comments and ignores whitespace. You don't have to do that.</p>\n"}], "owner": {"reputation": 1091, "user_id": 2474153, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/135319305ef65fd3ac0259fdbd7f4116?s=128&d=identicon&r=PG", "display_name": "Terry", "link": "https://stackoverflow.com/users/2474153/terry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 53341719, "answer_count": 1, "score": -1, "last_activity_date": 1542392363, "creation_date": 1542384531, "last_edit_date": 1542392363, "question_id": 53341564, "link": "https://stackoverflow.com/questions/53341564/perl-parse-a-string-and-substitute-multiple-symbols", "title": "Perl parse a string and substitute multiple symbols", "body": "<p>I've got a string:</p>\n\n<pre><code>$str = \"\\$JVM/\\$JAVA8/Contents/Home\"\n</code></pre>\n\n<p>On this string, I'd like to substitute the symbols <strong>$JVM</strong> and <strong>$JAVA8</strong> with the corresponding keys from this hash:</p>\n\n<pre><code>%con = ('\\$JVM' =&gt; '/Library/Java/JavaVirtualMachines' ,\n        '\\$JAVA8' =&gt; 'jdk1.8.0_192.jdk');\n</code></pre>\n\n<p>So that I can get this:</p>\n\n<pre><code>$target = \"/Library/Java/JavaVirtualMachines/jdk1.8.0_192.jdk/Contents/Home\"\n</code></pre>\n\n<p>I'd like to do it without any modules. How can I do that? Thank you.</p>\n"}, {"tags": ["perl", "cgi", "fastcgi"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542379415, "post_id": 53339936, "comment_id": 93558985, "body": "This strongly depends on your use case. You say a few lines of code, so you&#39;re talking about small scripts?"}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542379610, "post_id": 53339936, "comment_id": 93559098, "body": "The scripts aren&#39;t small but the use of CGI is limited to the CGI::Fast capability and the parsing of query params.  I do my own route dispatch, templating with HTML::Template etc., so I already have a framework in those senses."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1542379822, "post_id": 53339936, "comment_id": 93559209, "body": "CGI::Fast has the same issue as CGI.pm as far as they are concerned: They want you to use a framework instead of dealing with CGI directly. If you think they&#39;re right about CGI.pm, you shouldn&#39;t use CGI::Fast either"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1542379847, "post_id": 53339936, "comment_id": 93559227, "body": "It might make sense to rewrite your framework to speak PSGI then. It gives you a lot more flexibility for the future. Query parsing works a bit different, but initially you can start with using one of the tools that makes PSGI requests look like CGI to keep your code running. You can then go about to implement an interface that will allow your framework to take PSGI references."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1542380011, "post_id": 53339936, "comment_id": 93559317, "body": "Obligatory link to <a href=\"https://www.youtube.com/watch?v=jKOqtRMT85s\" rel=\"nofollow noreferrer\">Sawyer X&#39;s <i>CGI.pm must die</i> talk</a>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1542380925, "post_id": 53339936, "comment_id": 93559851, "body": "Plack::Request is your friend then. That should be all you need. Try this: <code>plackup -MDDP -MPlack::Request -e &#39;$app = sub { my $env = shift; my $req = Plack::Request-&gt;new($env); p $req-&gt;query_parameters; return $req-&gt;new_response(200)-&gt;finalize; }&#39;</code> and on another terminal, <code>curl localhost:5000</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1542382379, "post_id": 53339936, "comment_id": 93560728, "body": "It seems like a bit of a guide is needed. I&#39;ll write up an answer with a hands-on guide. In the meantime, also take a look at <a href=\"https://metacpan.org/pod/distribution/App-CGIThis/bin/cgi_this\" rel=\"nofollow noreferrer\"><code>cgi_this</code></a>, a utility I whipped together for testing CGI related questions. It&#39;s build from various other PSGI and CGI bits and showcases how simple this stuff really is. <a href=\"https://youtu.be/j9FS_jDujrA?t=923\" rel=\"nofollow noreferrer\">Here&#39;s me talking about it</a> at The Perl Conference in Glasgow this year."}], "answers": [{"comments": [{"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542381609, "post_id": 53340034, "comment_id": 93560273, "body": "This is helpful and I&#39;m starting to wrap my mind around this stuff, a bit."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 3, "last_activity_date": 1542379776, "last_edit_date": 1542379776, "creation_date": 1542379400, "answer_id": 53340034, "question_id": 53339936, "link": "https://stackoverflow.com/questions/53339936/should-i-migrate-from-cgifast-to-something-else-in-light-of-cgi-pms-deprecate/53340034#53340034", "title": "Should I migrate from CGI::Fast to something else in light of CGI.pm&#39;s deprecated status and how should I do so?", "body": "<p><a href=\"https://plackperl.org/\" rel=\"nofollow noreferrer\">PSGI</a>, as referenced by <a href=\"https://metacpan.org/pod/CGI::Alternatives#PSGI/Plack\" rel=\"nofollow noreferrer\">CGI::Alternatives</a>, is the way to go.</p>\n\n<p>Dancer leverages PSGI, but you can <a href=\"https://metacpan.org/pod/Plack#.psgi-files\" rel=\"nofollow noreferrer\">write code using it directly</a> without a framework wrapping around it.</p>\n\n<p>You can use <a href=\"https://metacpan.org/pod/Plack::Handler::FCGI\" rel=\"nofollow noreferrer\">Plack::Handler::FCGI</a> to run a PSGI app via FastCGI.</p>\n"}, {"comments": [{"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542381067, "post_id": 53340275, "comment_id": 93559937, "body": "&quot;Standalone service behind a web proxy&quot;, I wonder what you mean by that exactly.  I think I understand your 3-steps to rewriting my stuff but I think the only FastCGI specific stuff is the request loop itself.  I had to make sure my variables were clear at the end of the loop but not much else is specific to FastCGI, I don&#39;t believe."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 1, "creation_date": 1542381188, "post_id": 53340275, "comment_id": 93560020, "body": "@Marcus one of the core features of PSGI/Plack is that it allows you to run without a traditional web server. There are many Plack based web servers written in Perl (and some in XS) that can run completely stand-alone. But you&#39;d still have some sort of traditional web server that proxies the requests and catches static resources."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 2, "creation_date": 1542381363, "post_id": 53340275, "comment_id": 93560126, "body": "@Marcus: I mean that your web application becomes a completely separate service (in the strict Unix meaning of the word) running on a high port number, accepting HTTP requests and returning HTTP responses. And then you configure your &quot;real&quot; web server (often nginx, in my experience) to forward requests that it receives for your app onto the actual service. It&#39;s actually a lot simpler than it sounds."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542381503, "post_id": 53340275, "comment_id": 93560208, "body": "That all does sound cool!  However, I&#39;m once again daunted, because every time I look at PSGI, this happens.  I can&#39;t get started because I can&#39;t parse the darn query params without doing.... what?  Can I do this without messing with my web server ports and thinking about a lot of extra stuff?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542381616, "post_id": 53340275, "comment_id": 93560277, "body": "@Marcus: You would use <a href=\"https://metacpan.org/pod/Plack::Request\" rel=\"nofollow noreferrer\">Plack::Request</a> to parse the incoming request and extract the parameters."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542382036, "post_id": 53340275, "comment_id": 93560538, "body": "See my comment on the question @Marcus. That&#39;s all you really need to do to get started."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542382237, "post_id": 53340275, "comment_id": 93560656, "body": "I&#39;m going to have to start with Hello, World on up with this stuff.  Do I now have to rename my executables to .psgi?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542382953, "post_id": 53340275, "comment_id": 93561035, "body": "@Marcus: What you call your executables is purely a web server configuration issue. It almost certainly doesn&#39;t matter."}, {"owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "edited": false, "score": 0, "creation_date": 1542383211, "post_id": 53340275, "comment_id": 93561176, "body": "@DaveCross Understood.  One last thing.  Let&#39;s say I don&#39;t have the cycles to rewrite at the moment and continue to use CGI.pm for query string params.  If I make sure I&#39;m scrubbing all my list-context-usage for bad input (per <a href=\"https://metacpan.org/pod/CGI#Fetching-the-value-or-values-of-a-single-named-parameter\" rel=\"nofollow noreferrer\">Lee&#39;s security note</a> in the CGI.pm docs) am I ok for now?"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 4, "last_activity_date": 1542380449, "last_edit_date": 1542380449, "creation_date": 1542380271, "answer_id": 53340275, "question_id": 53339936, "link": "https://stackoverflow.com/questions/53339936/should-i-migrate-from-cgifast-to-something-else-in-light-of-cgi-pms-deprecate/53340275#53340275", "title": "Should I migrate from CGI::Fast to something else in light of CGI.pm&#39;s deprecated status and how should I do so?", "body": "<p>This neatly illustrates one reason why PSGI is an improvement on CGI (and its related technologies like FastCGI). In CGI-style programs, the code is tightly coupled with the deployment method and when you change the deployment method, you usually need to make quite large changes to the code. With PSGI-style programs, the code is the same no matter how you deploy it.</p>\n\n<p>You haven't shown us any of your code, but you talk about \"a few lines of code\". So here's the approach I'd take.</p>\n\n<ol>\n<li>Rip all FastCGI-specific code out of your program - leaving a pure CGI-style program.</li>\n<li>You then have a choice. You could use the techniques I describe in <a href=\"https://perlhacks.com/2016/01/easy-psgi/\" rel=\"nofollow noreferrer\">Easy PSGI</a> to convert your program to a pure PSGI program. Or, if that's going to be too much work, use <a href=\"https://metacpan.org/pod/CGI::PSGI\" rel=\"nofollow noreferrer\">CGI::PSGI</a> to run your CGI program in a PSGI environment.</li>\n<li>You now have a PSGI program that you can use in pretty much any web server environment. You can serve it as a CGI program. You can use <a href=\"https://metacpan.org/pod/Plack::Handler::FCGI\" rel=\"nofollow noreferrer\">Plack::Handler::FCGI</a> to run it under FCGI. Or you can deploy it as a standalone service behind a web proxy (that last option is the one I'd choose).</li>\n</ol>\n\n<p>But any choice you make at step 3 isn't irrevocable. The same code will work in all deployment environments. And, therefore, moving between them is usually pretty simple.</p>\n\n<p>p.s. CGI.pm isn't exactly deprecated. It has been removed from the standard Perl distribution but that's because its use is discouraged.</p>\n"}, {"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1542384206, "creation_date": 1542384206, "answer_id": 53341467, "question_id": 53339936, "link": "https://stackoverflow.com/questions/53339936/should-i-migrate-from-cgifast-to-something-else-in-light-of-cgi-pms-deprecate/53341467#53341467", "title": "Should I migrate from CGI::Fast to something else in light of CGI.pm&#39;s deprecated status and how should I do so?", "body": "<p>This is a short guide to help you get started. I'm going to use CGI, not FastCGI, but it's really the same thing. Just imagine the loop being around the parameter selection.</p>\n\n<h2>A simple CGI</h2>\n\n<p>Let's start with a simple CGI program. I will be using <a href=\"https://metacpan.org/pod/distribution/App-CGIThis/bin/cgi_this\" rel=\"nofollow noreferrer\"><code>cgi_this</code></a> to run it for lack of having a real web server handy.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse CGI;\n\nmy $q    = CGI-&gt;new;\nmy $name = $q-&gt;param('name');\n\nprint $q-&gt;header;\nif ($name) {\n  print &lt;&lt;\"HTML\";\n&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello, $name&lt;/hi&gt;&lt;/body&gt;&lt;/html&gt;\nHTML\n}\nelse {\n  print &lt;&lt;\"HTML\";\n&lt;html&gt;&lt;body&gt;&lt;form method=\"GET\"&gt;\n    &lt;label&gt;What's your name? &lt;input type=\"text\" name=\"name\"&gt;&lt;/label&gt;\n&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;\nHTML\n}\n\n1;\n</code></pre>\n\n<p>This is <em>hello.pl</em>. It needs an executable flag. </p>\n\n<h2>Running the program</h2>\n\n<p>You start it with <code>cgi_this</code> as follows.</p>\n\n<pre><code>$ ls\nhello.pl\n$ cgi_this\nExporting '.', available at:\n   http://127.0.0.1:3000/\n\nFound the following scripts:\n    http://127.0.0.1:3000/hello.pl\n</code></pre>\n\n<p>Now you can open it in the browser.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XhqE3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XhqE3.png\" alt=\"Firefox with CGI program and form\"></a></p>\n\n<p>If you enter a name and submit the form, it will display a greeting.</p>\n\n<p><a href=\"https://i.stack.imgur.com/h15GG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h15GG.png\" alt=\"Firefox with CGI program and greeting\"></a></p>\n\n<h2>Converting to PSGI</h2>\n\n<p>All of this is straight-forward. Now let's convert it.</p>\n\n<p>We'll start with a new file named <em>hello.psgi</em>. It doesn't really matter if it's called <em>.psgi</em>, but this is the convention. </p>\n\n<p>We have to do a couple of steps in order to make it work with the PSGI protocol. We will use <a href=\"https://metacpan.org/pod/Plack::Request\" rel=\"nofollow noreferrer\">Plack::Request</a> to help us do that.</p>\n\n<p>The entire program needs to be wrapped in a <code>my $app = sub { ... };</code> call.</p>\n\n<pre><code>#!/usr/bin/env plackup\nuse strict;\nuse warnings;\n\nuse Plack::Request;\n\nmy $app = sub {\n  my $env = shift;    # this is the Plack environment\n\n  my $req = Plack::Request-&gt;new($env);\n\n  my $q    = CGI-&gt;new;\n  my $name = $q-&gt;param('name');\n\n  print $q-&gt;header;\n  if ($name) {\n    print &lt;&lt;\"HTML\";\n&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello, $name&lt;/hi&gt;&lt;/body&gt;&lt;/html&gt;\nHTML\n  }\n  else {\n    print &lt;&lt;\"HTML\";\n&lt;html&gt;&lt;body&gt;&lt;form method=\"GET\"&gt;\n    &lt;label&gt;What's your name? &lt;input type=\"text\" name=\"name\"&gt;&lt;/label&gt;\n&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;\nHTML\n  }\n};\n\n# no 1; here, we want it to return $app;\n</code></pre>\n\n<p>Now obviously we haven't loaded CGI, and there's no CGI environment anyway. So next we need to get the parameter. Get rid of the <code>$q</code> bit and use the <code>$req</code> instead.</p>\n\n<pre><code>my $name = $req-&gt;parameters-&gt;{name};\n</code></pre>\n\n<p>Now run this with <code>plackup</code>, then request it at <a href=\"http://localhost:5000\" rel=\"nofollow noreferrer\">http://localhost:5000</a>.</p>\n\n<pre><code>$ plackup hello.psgi\nHTTP::Server::PSGI: Accepting connections at http://0:5000/\n&lt;html&gt;&lt;body&gt;&lt;form method=\"GET\"&gt;\n    &lt;label&gt;What's your name? &lt;input type=\"text\" name=\"name\"&gt;&lt;/label&gt;\n&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;\nResponse should be array ref or code ref: 1 at ...\n</code></pre>\n\n<p>BANG! It fails, because we're not done yet. As you can see, it wrote the HTML to STDOUT, but that didn't go to the browser. That's because PSGI passes around references, and your program does not talk directly to STDOUT or STDERR.</p>\n\n<p>It also complains about the missing reference. Let's deal with that first. At the end of the code reference, add this:</p>\n\n<pre><code># prepare the response\nmy $res = $req-&gt;new_response(200);\n$res-&gt;content_type('text/html');\n\nreturn $res-&gt;finalize;\n</code></pre>\n\n<p>We're asking our Plack::Request to make a new Plack::Response for us, set a content type, and return the finalized (think <em>immutable</em>) response to the Plack handler, which will serialise and it to the browser as an actual HTTP response.</p>\n\n<p>Now replace all the <code>print</code> statements. Make a new variable <code>$content</code> and instead of <code>print</code>ing output, concatenate it to that variable. Then hand that to the response.</p>\n\n<pre><code>  my $content;\n  if ($name) {\n    $content .= &lt;&lt;\"HTML\";\n&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello, $name&lt;/hi&gt;&lt;/body&gt;&lt;/html&gt;\nHTML\n  }\n  else {\n    $content .= &lt;&lt;\"HTML\";\n&lt;html&gt;&lt;body&gt;&lt;form method=\"GET\"&gt;\n    &lt;label&gt;What's your name? &lt;input type=\"text\" name=\"name\"&gt;&lt;/label&gt;\n&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;\nHTML\n  }\n\n  # prepare the response\n  my $res = $req-&gt;new_response(200);\n  $res-&gt;content_type('text/html');\n  $res-&gt;body($content);\n</code></pre>\n\n<p>Now restart your app in the terminal and access it again. It will look the same as the CGI.</p>\n\n<p><a href=\"https://i.stack.imgur.com/GS3IQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GS3IQ.png\" alt=\"PSGI version output\"></a></p>\n"}], "owner": {"reputation": 5605, "user_id": 26848, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/18d6620b6459d6d77e52f8099f9c9cde?s=128&d=identicon&r=PG", "display_name": "Marcus", "link": "https://stackoverflow.com/users/26848/marcus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 1, "accepted_answer_id": 53340275, "answer_count": 3, "score": 3, "last_activity_date": 1542384206, "creation_date": 1542379101, "last_edit_date": 1542380345, "question_id": 53339936, "link": "https://stackoverflow.com/questions/53339936/should-i-migrate-from-cgifast-to-something-else-in-light-of-cgi-pms-deprecate", "title": "Should I migrate from CGI::Fast to something else in light of CGI.pm&#39;s deprecated status and how should I do so?", "body": "<p>I am using <code>CGI::Fast</code> to leverage the speed and scalability of FastCGI, and I also CGI.pm's query string parsing.  I do not use CGI.pm's deprecated HTML writing functions.</p>\n\n<p>Stopping the use of CGI.pm is <a href=\"https://www.reddit.com/r/perl/comments/9wfgtf/perl_and_cgi/\" rel=\"nofollow noreferrer\">strongly advised</a> in the community, but in my use case, should I also be thinking of migrating away?  And if so, how do I </p>\n\n<p>1) still leverage FastCGI</p>\n\n<p>2) grab query params </p>\n\n<p>...without adopting a framework like Dancer or Mojolicious?  </p>\n\n<p>The code I am looking at replacing is just:</p>\n\n<pre><code> while ( $main::cgi = new CGI::Fast ) {\n      my $name = $main::cgi-&gt;param('name');\n }\n</code></pre>\n\n<p>I am open to using something like <code>CGI::PSGI</code> in conjunction with <code>Plack::Request</code>, but I couldn't see how to finesse the FastCGI functionality as <code>CGI::Fast</code> and <code>CGI::PSGI</code> both want to subclass <code>CGI</code> for the creation of the object.  And I'd still have CGI.pm in the mix to enable <code>CGI::Fast</code>.  Plack seems like a lot to learn to replace what is now a few lines of code.</p>\n"}, {"tags": ["perl", "rpm", "yum"], "comments": [{"owner": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 2, "creation_date": 1542370664, "post_id": 53337665, "comment_id": 93554223, "body": "Do you really want to install a perl version released in January 2006?"}, {"owner": {"reputation": 123, "user_id": 3761509, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15b7696cfa49b2e6c303d785a62834f1?s=128&d=identicon&r=PG&f=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/3761509/jeet"}, "reply_to_user": {"reputation": 12075, "user_id": 1137055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7b43b9eb7d01bd8f7e51febe6053c?s=128&d=identicon&r=PG", "display_name": "dgw", "link": "https://stackoverflow.com/users/1137055/dgw"}, "edited": false, "score": 0, "creation_date": 1542370891, "post_id": 53337665, "comment_id": 93554320, "body": "yes.. it&#39;s basic need for TTS (text-to-speech)"}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 3, "creation_date": 1542371504, "post_id": 53337665, "comment_id": 93554626, "body": "you talk of a &#39;yum&#39; install, yet the command line you show is using rpm. yum automatically downloads dependencies, while the lower-level rpm tool doesn&#39;t."}, {"owner": {"reputation": 123, "user_id": 3761509, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15b7696cfa49b2e6c303d785a62834f1?s=128&d=identicon&r=PG&f=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/3761509/jeet"}, "edited": false, "score": 0, "creation_date": 1542371819, "post_id": 53337665, "comment_id": 93554801, "body": "ok, so is there a way around?"}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 3761509, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15b7696cfa49b2e6c303d785a62834f1?s=128&d=identicon&r=PG&f=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/3761509/jeet"}, "edited": false, "score": 0, "creation_date": 1542373792, "post_id": 53338448, "comment_id": 93555875, "body": "Good one sir!! Did the job!!"}, {"owner": {"reputation": 123, "user_id": 3761509, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15b7696cfa49b2e6c303d785a62834f1?s=128&d=identicon&r=PG&f=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/3761509/jeet"}, "edited": false, "score": 0, "creation_date": 1542373899, "post_id": 53338448, "comment_id": 93555937, "body": "Im using Centos 5, and using yum install perl"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123, "user_id": 3761509, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15b7696cfa49b2e6c303d785a62834f1?s=128&d=identicon&r=PG&f=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/3761509/jeet"}, "edited": false, "score": 1, "creation_date": 1542374878, "post_id": 53338448, "comment_id": 93556460, "body": "@user3761509: I would be deeply suspicious of a Centos 5 system that didn&#39;t already have Perl installed."}, {"owner": {"reputation": 123, "user_id": 3761509, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15b7696cfa49b2e6c303d785a62834f1?s=128&d=identicon&r=PG&f=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/3761509/jeet"}, "edited": false, "score": 0, "creation_date": 1542376662, "post_id": 53338448, "comment_id": 93557409, "body": "nopeee, it didnt have perl installed, but now it is there... thank u :)"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1542373270, "creation_date": 1542373270, "answer_id": 53338448, "question_id": 53337665, "link": "https://stackoverflow.com/questions/53337665/yum-install-perl-failed-dependencies/53338448#53338448", "title": "yum install perl failed dependencies", "body": "<p>You're not using <code>yum</code>, you're using <code>rpm</code>.</p>\n\n<p>Running <code>rpm</code> will just install the packages listed on its command line (for Debian users, it's like <code>dpkg -i</code>). If you ran <code>yum</code>, then it would install any required packages as well (like <code>apt-get install</code>). So you probably want:</p>\n\n<pre><code>yum localinstall perl-5.8.8-43.el5_11.i386.rpm\n</code></pre>\n\n<p>However, there's a huge caveat here. Which Linux distribution and which version are you using? You're trying to install an RPM that was built for Red Hat Enterprise Linux 5. There are two options here:</p>\n\n<ol>\n<li>You're installing it on RHEL5. This seems unlikely, as it will already be installed on those systems - and if, for some reason, it wasn't, you could just install it with <code>yum install perl</code> rather than downloading and installing a particular RPM.</li>\n<li>You're installing it on some other version of a Red Hat-based Linux. This seems to be a pretty bad idea to me. The Perl RPM is a pretty fundamental part of a Linux distribution and replacing it with a version build for a different version is likely to be disastrous. If you're lucky, it just won't work as the correct versions of various underlying libraries won't be available. If you're unlucky, it will install and you will have completely trashed large parts of your installation.</li>\n</ol>\n\n<p>You say you need this version of Perl in order to run some software you want to use. But are you sure it needs to be <em>specifically</em> this version of Perl? That would be unusual. Usually, the requirement is for a <strong>minimum</strong> version of Perl. And if you really do need Perl 5.8.8, then I'd question the wisdom of using software that relies on such an old version of Perl.</p>\n\n<p>If, after all that, you still want to go ahead with this, then please don't use an RPM to overwrite your system Perl. The only sane approach is to build a separate Perl installation (perhaps in <code>/opt</code>) and use that version. Another alternative would be to use something like <a href=\"https://metacpan.org/pod/distribution/App-perlbrew/script/perlbrew\" rel=\"noreferrer\">perlbrew</a> which makes it easy to install multiple versions of Perl on the same system.</p>\n"}], "owner": {"reputation": 123, "user_id": 3761509, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15b7696cfa49b2e6c303d785a62834f1?s=128&d=identicon&r=PG&f=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/3761509/jeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 53338448, "answer_count": 1, "score": 0, "last_activity_date": 1544605756, "creation_date": 1542370282, "last_edit_date": 1544605756, "question_id": 53337665, "link": "https://stackoverflow.com/questions/53337665/yum-install-perl-failed-dependencies", "title": "yum install perl failed dependencies", "body": "<p>I'm getting this error, searched the net but couldn't find anything. </p>\n\n<p>Pls help, newbie</p>\n\n<p>error: Failed dependencies: rpm -ivh perl-5.8.8-43.el5_11.i386.rpm</p>\n\n<pre><code>[root@workstation ~]# rpm -ivh perl-5.8.8-43.el5_11.i386.rpm\nerror: Failed dependencies:\n\nlibc.so.6 is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.0) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.1) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.1.2) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.1.3) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.2) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.2.4) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.3) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.3.2) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.3.4) is needed by perl-5.8.8-43.el5_11.i386\nlibc.so.6(GLIBC_2.4) is needed by perl-5.8.8-43.el5_11.i386\nlibcrypt.so.1 is needed by perl-5.8.8-43.el5_11.i386\nlibcrypt.so.1(GLIBC_2.0) is needed by perl-5.8.8-43.el5_11.i386\nlibdb-4.3.so is needed by perl-5.8.8-43.el5_11.i386\nlibdl.so.2 is needed by perl-5.8.8-43.el5_11.i386\nlibdl.so.2(GLIBC_2.0) is needed by perl-5.8.8-43.el5_11.i386\nlibdl.so.2(GLIBC_2.1) is needed by perl-5.8.8-43.el5_11.i386\nlibgdbm.so.2 is needed by perl-5.8.8-43.el5_11.i386\nlibm.so.6 is needed by perl-5.8.8-43.el5_11.i386\nlibm.so.6(GLIBC_2.0) is needed by perl-5.8.8-43.el5_11.i386\nlibnsl.so.1 is needed by perl-5.8.8-43.el5_11.i386\nlibpthread.so.0 is needed by perl-5.8.8-43.el5_11.i386\nlibpthread.so.0(GLIBC_2.0) is needed by perl-5.8.8-43.el5_11.i386\nlibpthread.so.0(GLIBC_2.1) is needed by perl-5.8.8-43.el5_11.i386\nlibpthread.so.0(GLIBC_2.2) is needed by perl-5.8.8-43.el5_11.i386\nlibpthread.so.0(GLIBC_2.3.2) is needed by perl-5.8.8-43.el5_11.i386\nlibresolv.so.2 is needed by perl-5.8.8-43.el5_11.i386\nlibrt.so.1 is needed by perl-5.8.8-43.el5_11.i386\nlibrt.so.1(GLIBC_2.2) is needed by perl-5.8.8-43.el5_11.i386\nlibutil.so.1 is needed by perl-5.8.8-43.el5_11.i386\n</code></pre>\n"}, {"tags": ["perl", "perl5.8"], "comments": [{"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 2, "creation_date": 1542371712, "post_id": 53337646, "comment_id": 93554743, "body": "$value should be a reference to an array. @$value is the array referred to by $value. scalar(@$value) is the number of elements contained in that array. scalar($value) is a just string like &quot;ARRAY(0xce1460)&quot;."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542372279, "post_id": 53337646, "comment_id": 93555034, "body": "<i>&quot;I&#39;m using perl 5.8.&quot;</i> Why, oh why? :-("}, {"owner": {"reputation": 51, "user_id": 6520374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dfbae3ed0f316474d30a08eb979b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo Salem", "link": "https://stackoverflow.com/users/6520374/abdo-salem"}, "reply_to_user": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 0, "creation_date": 1542374949, "post_id": 53337646, "comment_id": 93556497, "body": "@DaveMitchell you, sir, just rewired my brain. Thank you. I had no idea that it&#39;d be a reference. I just assumed perl did some crazy concatenation to get it into a scalar context. Brilliant!"}, {"owner": {"reputation": 51, "user_id": 6520374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dfbae3ed0f316474d30a08eb979b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo Salem", "link": "https://stackoverflow.com/users/6520374/abdo-salem"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542374982, "post_id": 53337646, "comment_id": 93556520, "body": "@DaveCross Two things you don&#39;t choose. Your parents and which perl version currently runs your legacy systems :) I appreciate your prayers though hahah"}], "answers": [{"tags": [], "owner": {"reputation": 424, "user_id": 2691732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c5b2d9aae7d942f7061319189d67e7?s=128&d=identicon&r=PG&f=1", "display_name": "Sachin Dangol", "link": "https://stackoverflow.com/users/2691732/sachin-dangol"}, "is_accepted": false, "score": 1, "last_activity_date": 1542372230, "last_edit_date": 1542372230, "creation_date": 1542371814, "answer_id": 53338049, "question_id": 53337646, "link": "https://stackoverflow.com/questions/53337646/perl-not-an-array-reference-while-calculating-array-size/53338049#53338049", "title": "Perl: not an array reference while calculating array size", "body": "<p>The following code will solve:</p>\n\n<pre><code>if ($value and ref $value eq 'ARRAY' and @$value &gt; x) { ... }\n</code></pre>\n\n<p>Basically you can de-reference to ARRAY only if it's a ARRAY ref. So making sure it's a ARRAY ref is must, so that it won't fail for HASH etc</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 6520374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dfbae3ed0f316474d30a08eb979b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo Salem", "link": "https://stackoverflow.com/users/6520374/abdo-salem"}, "edited": false, "score": 0, "creation_date": 1542375652, "post_id": 53338241, "comment_id": 93556878, "body": "Beautifully explained. Thank you! Reading Dave Mitchell&#39;s comment above, it seems you could also do scalar(@$value) without the {}. Does that mean that the {} is just like an anonymous subroutine? Or does it serve some other functionality?"}, {"owner": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "reply_to_user": {"reputation": 51, "user_id": 6520374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dfbae3ed0f316474d30a08eb979b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo Salem", "link": "https://stackoverflow.com/users/6520374/abdo-salem"}, "edited": false, "score": 1, "creation_date": 1542376333, "post_id": 53338241, "comment_id": 93557223, "body": "@AbdoSalem <code>@$value</code> and <code>@{$value}</code> are exactly the same... it&#39;s just syntactic sugar. :) The braces are useful (sometimes needed) when you have to disambiguate access to an arrayref that&#39;s nested inside other objects: <code>@{ $thing-&gt;{foo}-&gt;{bar} }</code>"}, {"owner": {"reputation": 51, "user_id": 6520374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dfbae3ed0f316474d30a08eb979b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo Salem", "link": "https://stackoverflow.com/users/6520374/abdo-salem"}, "edited": false, "score": 0, "creation_date": 1542377007, "post_id": 53338241, "comment_id": 93557607, "body": "Brilliant! Really appreciate your detailed answer! :)"}, {"owner": {"reputation": 51, "user_id": 6520374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dfbae3ed0f316474d30a08eb979b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo Salem", "link": "https://stackoverflow.com/users/6520374/abdo-salem"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1542385860, "post_id": 53338241, "comment_id": 93562625, "body": "@ysth that&#39;s a mini treasure right there. Thank you!"}], "tags": [], "owner": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "is_accepted": true, "score": 2, "last_activity_date": 1542373688, "last_edit_date": 1542373688, "creation_date": 1542372461, "answer_id": 53338241, "question_id": 53337646, "link": "https://stackoverflow.com/questions/53337646/perl-not-an-array-reference-while-calculating-array-size/53338241#53338241", "title": "Perl: not an array reference while calculating array size", "body": "<p>You have two questions there. I'll answer them separately:</p>\n\n<h2>Question: What is <code>@{}</code> doing?</h2>\n\n<p>When you write <code>@{$thing}</code>, you are <strong>dereferencing</strong> <code>$thing</code> into an array. As you have noticed, this only works when <code>$thing</code> is an array reference. (Other dereferencing operators are <code>%{$thing}</code> for hash references and <code>${$thing}</code> for scalar references.)</p>\n\n<p>You <em>do</em> need a dereferencing operator there. Consider this:</p>\n\n<pre><code>my $arrayref = [ 'Alice', 'Bob', 'Charlie' ];\nmy $hashref  = { x =&gt; 4, y =&gt; 5 };\nmy $string   = \"Hello, world\";\nfor my $thing ($arrayref, $hashref, $string) {\n    print \"thing         --&gt; \", $thing, \"\\n\";\n    print \"scalar(thing) --&gt; \", scalar($thing), \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>thing         --&gt; ARRAY(0x7f3b8054e468)\nscalar(thing) --&gt; ARRAY(0x7f3b8054e468)\nthing         --&gt; HASH(0x7f3b80560678)\nscalar(thing) --&gt; HASH(0x7f3b80560678)\nthing         --&gt; Hello, world\nscalar(thing) --&gt; Hello, world\n</code></pre>\n\n<p>There's no point in forcing <code>$thing</code> to a scalar context. <strong>It's already a scalar!</strong></p>\n\n<h2>Question: How can I safely dereference a scalar?</h2>\n\n<p>If you don't know what kind of reference is contained in <code>$thing</code>, you can use <a href=\"https://metacpan.org/pod/Ref::Util\" rel=\"nofollow noreferrer\"><code>Ref::Util</code></a> to inspect it:</p>\n\n<pre><code>use Ref::Util qw( is_arrayref is_hashref );\n\nfor my $thing ($arrayref, $hashref, $string) {\n    if (is_arrayref($thing)) {\n        print \"array: thing         --&gt; \", @{$thing}, \"\\n\";\n        print \"array: scalar(thing) --&gt; \", scalar(@{$thing}), \"\\n\";\n    }\n    elsif (is_hashref($thing)) {\n        print \"hash:  thing         --&gt; \", %{$thing}, \"\\n\";\n        print \"hash:  scalar(thing) --&gt; \", scalar(%{$thing}), \"\\n\";\n    }\n    else\n    {\n        print \"else:  thing         --&gt; \", $thing, \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>array: thing         --&gt; AliceBobCharlie\narray: scalar(thing) --&gt; 3\nhash:  thing         --&gt; y5x4\nhash:  scalar(thing) --&gt; 2/8\nelse:  thing         --&gt; Hello, world\n</code></pre>\n\n<p>Observations:</p>\n\n<ul>\n<li>The arrayref, when dereferenced, becomes a list of its elements. <code>print</code> outputs every element with no separators: <code>AliceBobCharlie</code></li>\n<li>The arrayref, when dereferenced and forced into a scalar, becomes the number of elements: <code>3</code></li>\n<li>The hashref, when dereferenced, becomes a list of keys and values. <code>print</code> outputs every pair with no separators: <code>y5x4</code></li>\n<li>The hashref, when dereferenced and forced into a scalar, becomes a <strong>string</strong> where the first number is the number of keys and the second number is the number of buckets in the hashtable: <code>2/8</code></li>\n</ul>\n"}], "owner": {"reputation": 51, "user_id": 6520374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dfbae3ed0f316474d30a08eb979b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Abdo Salem", "link": "https://stackoverflow.com/users/6520374/abdo-salem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 53338241, "answer_count": 2, "score": 1, "last_activity_date": 1542373688, "creation_date": 1542370227, "question_id": 53337646, "link": "https://stackoverflow.com/questions/53337646/perl-not-an-array-reference-while-calculating-array-size", "title": "Perl: not an array reference while calculating array size", "body": "<p>I'm trying to untangle some legacy code where an operation is done on $value iff its size is more than x (where x is a hard coded int). This is what it currently looks like:</p>\n\n<pre><code>if (scalar(@{$value}) &gt; x) {\n    ...\n}\n</code></pre>\n\n<p>As with all legacy code, this $value can be almost anything (hash, scalar, array) although it's expected to be an array of different objects. This code currently fails with a \"Not an ARRAY reference\" around 5% of the time and I'm trying to figure out what's the possible $value that can break it. </p>\n\n<p>I assumed it might fail if the $value is undefined so I even gave it a || [] but to no avail (same error):</p>\n\n<pre><code>if (scalar(@{$value || []}) &gt; x) {\n    ...\n}\n</code></pre>\n\n<p>I'm also trying to figure out why I need the @{}? My understanding is that that evaluates $value in a list context so that scalar can later ensure I get the size. Does that make the code more robust or can I just directly use scalar $value? Does @{} even do what I think it does?</p>\n\n<p>I'm using perl 5.8.</p>\n"}, {"tags": ["perl", "hashref", "perl-hash"], "comments": [{"owner": {"reputation": 733, "user_id": 3840951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c08ea58dbc2a5238bee0c168bc94b368?s=128&d=identicon&r=PG", "display_name": "Pedro LM", "link": "https://stackoverflow.com/users/3840951/pedro-lm"}, "edited": false, "score": 6, "creation_date": 1542359716, "post_id": 53334547, "comment_id": 93548457, "body": "Your code seems to have lots of typos: <code>$I_fh</code> vs <code>$w_fh</code>, <code>$O_fh</code> vs <code>$rs_fh</code>, <code>$hash_ref</code> vs <code>$data_hash_ref</code>. I suggest you add <code>use strict;</code> to the top of the file and fix these issues."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1542361274, "post_id": 53334547, "comment_id": 93549212, "body": "By running your code I don&#39;t get the output you describe. I also have <code>use of uninitialized value $key ... </code> message in console. As Pedro said, Use <code>warnings</code> and <code>strict</code> to avoid errors like that  (in that case it&#39;s <code>warnings</code> that allows this kind of message)"}, {"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1542363257, "post_id": 53334547, "comment_id": 93550309, "body": "when I print out the @{$hash_ref -&gt; {$key} after the line: close $O_fh; I can read the                A1 1  1  A1     AB               A2 1  2  A2     CD                 B1 2  3  B1     EF I dont know why I can not write a correct format in my output file"}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1542369693, "creation_date": 1542369693, "answer_id": 53337512, "question_id": 53334547, "link": "https://stackoverflow.com/questions/53334547/the-outputs-were-different-in-the-terminal-windows-and-txt-file/53337512#53337512", "title": "The outputs were different in the terminal windows and txt file?", "body": "<p>Assuming the files are sorted based on the name column, this is really easy to do thanks to the <a href=\"http://man7.org/linux/man-pages/man1/join.1.html\" rel=\"nofollow noreferrer\">join(1)</a> program:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ join --header -t $'\\t' -o 2.1,2.2,1.4 -1 2 -2 1 file1.tsv file2.tsv\nName    Type    Column2\nA1  1   AB\nA2  1   CD\nB1  2   EF\nB2  1   GH\n</code></pre>\n\n<p>The <code>--header</code> option is a GNU extension that excludes the first lines of the two files from being joined and treats them as column titles instead. <code>-t</code> sets the column separator, <code>-o</code> controls what columns are included in the output (A list of FILE.COLUMN specifiers), and <code>-1</code> and <code>-2</code> choose the columns that are used to join the two files.</p>\n\n<p>If they're not sorted, or if you're set on perl, your code looks very very close; besides all the typos and such, you're printing out every column, not just the ones your desired output suggest you care about. Consider:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw/say/;\nuse autodie;\n\nmy %names;\n\nsub read_file {\n  my ($file, $idx) = @_;\n  open my $in, \"&lt;\", $file;\n  my $header = &lt;$in&gt;;\n  while (&lt;$in&gt;) {\n    chomp;\n    my @F = split /\\t/;\n    push @{$names{$F[$idx]}}, \\@F;\n  }\n}\n\nread_file \"file1.tsv\", 1;\nread_file \"file2.tsv\", 0;\n\nsay \"Name\\tType\\tColumn2\";\nfor my $n (sort keys %names) {\n  my $row = $names{$n};\n  say \"$n\\t$row-&gt;[1][1]\\t$row-&gt;[0][3]\";\n}\n</code></pre>\n\n<p>I also suspect your strange output might be explained by running your program on data files that use Windows-style line endings when your OS uses Unix-style line endings.</p>\n"}], "owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 53337512, "answer_count": 1, "score": -1, "last_activity_date": 1542369693, "creation_date": 1542359135, "last_edit_date": 1542359819, "question_id": 53334547, "link": "https://stackoverflow.com/questions/53334547/the-outputs-were-different-in-the-terminal-windows-and-txt-file", "title": "The outputs were different in the terminal windows and txt file?", "body": "<p>I am trying to merge two files by Perl.</p>\n\n<p>Codes so far:</p>\n\n<pre><code> my $hash_ref;  \n open (my $I_fh, \"&lt;\", \"File1.txt\") or die $!;\n\n my $line = &lt;$I_fh&gt;;\n while ($line = &lt;$I_fh&gt;) {\n chomp $line;\n my @cols = split (\"\\t\", $line);\n my $key = $cols[1];\n $hash_ref -&gt; {$key} = \\@cols;\n }\n close $I_fh;\n\n open (my $O_fh, \"&lt;\", \"File2.txt\") or die $!;\n while ($line = &lt;$O_fh&gt;) {\n chomp $line;\n my @cols = split (\"\\t\", $line);\n my $key = shift (@cols);\n push (@{$hash_ref -&gt; {$key}}, @cols);\n\n }\n close $O_fh;\n\n\n open (my $out, \"&gt;\", \"merged.txt\") or die $!;\n\n foreach my $key (sort keys %$hash_ref) {\n\n my $row = join (\"\\t\", @{$hash_ref -&gt; {$key}});\n\nprint $out \"$key\\t$row\\n\";\n }\nclose $out;\n</code></pre>\n\n<p>I am using print or Dumper function to check every steps. In the terminal windows, everything is fine. However, in my output file (merged txt), the format was changed. I would like to merge two files by adding more columns, not adding more rows. How can I fix codes?</p>\n\n<pre><code>  File 1.txt:  \n  Index    Name    Column1   Column2  \n   1        A1                  AB      \n   2        A2                  CD   \n   3        B1                  EF    \n   4        B2                  GH   \n\n\n    File 2.txt:   \n    Name  Type  \n     A1     1  \n     A2     1   \n     B1     2   \n     B2     1    \n\n   Merged file:  \n\n   A1   1   AB    \n        1     \n   A2   2   CD  \n        1      \n   B1   3   EF  \n        2      \n   B2   4   GH   \n        1      \n\nWanted file:  \nName  Type  Column2  \n\n  A1   1   AB    \n  A2   1   CD   \n  B1   2   EF   \n  B2   1   GH\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1542361262, "post_id": 53333739, "comment_id": 93549210, "body": "There are no <i>pointers</i> in Perl. Do you mean <i>references</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1542394187, "post_id": 53333998, "comment_id": 93566365, "body": "Thanks, it works.... here is how I read the reference that is passed back.  Please let me know if there&#39;s a more proper way to do so.  Thanks again. `   \tmy $arrsize = @rows;\t \tfor (my $x =0; $x &lt; $arrsize; $x++) \t{ \t\tmy $insize = @{$rows[$x]}; \t\tprint &quot;-------------\\n&quot;; \t    for(my $y = 0; $y &lt; $insize; $y++) \t    { \t    \tprint &quot;$rows[$x][$y]\\n&quot;;  \t    }  \t}`"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "edited": false, "score": 0, "creation_date": 1542397819, "post_id": 53333998, "comment_id": 93567892, "body": "@PlasticProgrammer A <a href=\"http://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">foreach</a> loop is a lot more idiomatic and easier to read those C-style for loops. Combining a suffix-style loop with <code>join</code> is one handy approach: <code>say &quot;----\\n&quot;, join(&quot;\\n&quot;, @{$_}) for @rows;</code>"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 3, "last_activity_date": 1542363115, "last_edit_date": 1542363115, "creation_date": 1542356804, "answer_id": 53333998, "question_id": 53333739, "link": "https://stackoverflow.com/questions/53333739/how-can-i-grab-multiple-records-from-a-mysql-query-in-perl-using-array-pointers/53333998#53333998", "title": "How can I grab multiple records from a MySQL query in Perl using array pointers?", "body": "<p>From <a href=\"https://metacpan.org/pod/DBI#fetchrow_arrayref\" rel=\"nofollow noreferrer\">the documentation</a> for <code>fetchrow_arrayref</code>:</p>\n\n<blockquote>\n  <p>Note that the same array reference is returned for each fetch, so don't store the reference and then use it after a later fetch. Also, the elements of the array are also reused for each row, so take care if you want to take a reference to an element. </p>\n</blockquote>\n\n<p>Sounds like you want <a href=\"https://metacpan.org/pod/DBI#fetchall_arrayref\" rel=\"nofollow noreferrer\">fetchall_arrayref</a>:</p>\n\n<blockquote>\n  <p>The fetchall_arrayref method can be used to fetch all the data to be returned from a prepared and executed statement handle. It returns a reference to an array that contains one reference per row.</p>\n</blockquote>\n\n<p>After executing the statement, you can do something like</p>\n\n<pre><code>@{$array} = $query-&gt;fetchall_arrayref-&gt;@*;\n</code></pre>\n\n<p>instead of that ugly loop.</p>\n\n<p>But <a href=\"https://metacpan.org/pod/DBI#selectall_array\" rel=\"nofollow noreferrer\">selectall_array</a> might be even better. Your whole function can be replaced by a call to it:</p>\n\n<pre><code>my @rows =\n     $myConnection-&gt;selectall_array(q/SELECT * FROM Inv WHERE name LIKE '%DOG%'/);\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 1419500, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/e1e29dcd06504cfdf8a0e2427a8cff73?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Kaplan", "link": "https://stackoverflow.com/users/1419500/daniel-kaplan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 53333998, "answer_count": 1, "score": 0, "last_activity_date": 1542363115, "creation_date": 1542355561, "question_id": 53333739, "link": "https://stackoverflow.com/questions/53333739/how-can-i-grab-multiple-records-from-a-mysql-query-in-perl-using-array-pointers", "title": "How can I grab multiple records from a MySQL query in Perl using array pointers?", "body": "<p>I can do this all as one function, but in trying to port it over to my packages of functions (library) I am missing something.</p>\n\n<p>Here's what I want to do from my main Perl script</p>\n\n<pre><code>my @rows;\n$result = Funx::dbcdata($myConnection, \n          \"SELECT * FROM Inv where name like \\\"%DOG%\\\";\", \\@rows);\n</code></pre>\n\n<p>Then in my library package I am attempting this</p>\n\n<pre><code>sub dbcdata\n{\n    my ($connection, $command, $array) = @_;\n\n    my $query = $connection-&gt;prepare($command);\n    my $result = $query-&gt;execute();\n\n    my $i =0;\n    while(my $row = $query-&gt;fetchrow_arrayref() )\n    {\n    @{$array}[$i] = $row;\n    $i++;\n    }\n    $query-&gt;finish;\n    return $result;\n}\n</code></pre>\n\n<p>I was hoping to get back pointers or references to each row (which was 4in this case) but am not.  Every element in @rows is the same:</p>\n\n<blockquote>\n  <p>ARRAY(0x5577a0f77ec0) ARRAY(0x5577a0f77ec0) ARRAY(0x5577a0f77ec0)\n  ARRAY(0x5577a0f77ec0)</p>\n</blockquote>\n\n<p>Nor do I know how to turn each one into the original separate row.  Any help would be appreciated, thanks.</p>\n"}, {"tags": ["perl", "monetdb"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542361000, "post_id": 53333106, "comment_id": 93549088, "body": "Is it the actual call to <code>connect()</code> that is hanging? I see that <a href=\"https://metacpan.org/pod/DBD::monetdb\" rel=\"nofollow noreferrer\">DBD::monetdb</a> hasn&#39;t been updated for twelve years so, to be honest, I&#39;m not sure I&#39;d really trust it to work. Might be work contacting the author."}, {"owner": {"reputation": 11, "user_id": 8085731, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-dBR5rYDNM/AAAAAAAAAAI/AAAAAAAAAJo/Mj8gWXZGeLQ/photo.jpg?sz=128", "display_name": "Gowthami G", "link": "https://stackoverflow.com/users/8085731/gowthami-g"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543407891, "post_id": 53333106, "comment_id": 93907377, "body": "Thanks for the response"}, {"owner": {"reputation": 11, "user_id": 8085731, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-dBR5rYDNM/AAAAAAAAAAI/AAAAAAAAAJo/Mj8gWXZGeLQ/photo.jpg?sz=128", "display_name": "Gowthami G", "link": "https://stackoverflow.com/users/8085731/gowthami-g"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1543407899, "post_id": 53333106, "comment_id": 93907385, "body": "Thanks for the response"}], "owner": {"reputation": 11, "user_id": 8085731, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-s-dBR5rYDNM/AAAAAAAAAAI/AAAAAAAAAJo/Mj8gWXZGeLQ/photo.jpg?sz=128", "display_name": "Gowthami G", "link": "https://stackoverflow.com/users/8085731/gowthami-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542353433, "creation_date": 1542352543, "last_edit_date": 1542353433, "question_id": 53333106, "link": "https://stackoverflow.com/questions/53333106/how-to-connect-to-monetdb-with-perl", "title": "How to connect to monetdb with perl", "body": "<p>I am trying to connect to monetdb with perl code, it hangs. I am not able to connect nor it is throwing an error to get it resolved.\nPlease find the below code ,</p>\n\n<pre><code>`#!/usr/bin/perl\nuse DBI();\nuse POSIX;\nprint \"\\nStart a simple Monet MIL interaction\\n\\n\";\nprint \"MonetDB\\n\";\nmy $host = 'XYZ.com';\nmy $port = '123';\nmy $user = 'test';\nmy $password = 'test';\nmy @ds = DBI-&gt;data_sources('monetdb');\nprint \"Data sources: @ds\\n\";\nmy $dsn = \"dbi:monetdb:host=$host;port=$port;database=testdb\";\nmy $dbh = DBI-&gt;connect( $dsn,$user, $password, { PrintError =&gt; 0, RaiseError =&gt; 1 });\n</code></pre>\n\n<p>`</p>\n\n<p>Please help me with it.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3905, "user_id": 9602863, "user_type": "registered", "profile_image": "https://graph.facebook.com/1743384949051322/picture?type=large", "display_name": "UjinT34", "link": "https://stackoverflow.com/users/9602863/ujint34"}, "edited": false, "score": 0, "creation_date": 1542320953, "post_id": 53328446, "comment_id": 93538003, "body": "The documentation says that <code>insert_after</code> does some syntax checking and prevents inserting wrong code. You probably need to insert a whole <code>PPI::Statement::Include</code>"}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 2, "creation_date": 1542322805, "post_id": 53328846, "comment_id": 93538566, "body": "You can use the PPI parser to generate the statement. <code>my $use_doc = PPI::Document-&gt;new(\\&quot;use Test::Differences;&quot;); my $include = ($doc2-&gt;children)[0];</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1542322832, "post_id": 53328846, "comment_id": 93538574, "body": "@Schwern That&#39;s exactly what I&#39;m working on now. :-)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1542323172, "post_id": 53328846, "comment_id": 93538679, "body": "@Schwern It looks like the destruction of my temporary <code>PPI::Document</code> is wiping out my parsed elements, but I&#39;m still debugging."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 6, "last_activity_date": 1542323479, "last_edit_date": 1542323479, "creation_date": 1542321411, "answer_id": 53328846, "question_id": 53328446, "link": "https://stackoverflow.com/questions/53328446/how-do-i-add-new-lines-to-a-perl-script-using-ppi/53328846#53328846", "title": "How do I add new lines to a Perl script using PPI?", "body": "<p>Looking at the <a href=\"https://metacpan.org/source/PPI::Statement\" rel=\"nofollow noreferrer\">source of <code>PPI::Statement</code></a>:</p>\n\n<pre><code># As above, you can insert a statement, or a non-significant token\nsub insert_after {\n        my $self    = shift;\n        my $Element = _INSTANCE(shift, 'PPI::Element') or return undef;\n        if ( $Element-&gt;isa('PPI::Statement') ) {\n                return $self-&gt;__insert_after($Element);\n        } elsif ( $Element-&gt;isa('PPI::Token') and ! $Element-&gt;significant ) {\n                return $self-&gt;__insert_after($Element);\n        }\n        '';\n}\n</code></pre>\n\n<p>A \"non-significant token\" is something like whitespace or a comment.</p>\n\n<p>You are trying to insert a single, significant token at the top level (after a statement). That's not allowed.</p>\n\n<p>You'll have to build a full <code>PPI::Statement::Include</code> element.</p>\n\n<hr>\n\n<p>Here's some (rather ugly) proof-of-concept code:</p>\n\n<pre><code># ...\ndiag 'Trying to insert after ' . $second_last-&gt;module;\n\n{\n    my $insertion_point = $second_last;\n    for my $new_element (\n        do {\n            my $synthetic_use = PPI::Statement::Include-&gt;new;\n            for my $child (\n                PPI::Token::Word-&gt;new('use'),\n                PPI::Token::Whitespace-&gt;new(' '),\n                PPI::Token::Word-&gt;new('Test::Differences'),\n                PPI::Token::Whitespace-&gt;new(' '),\n                PPI::Token::Quote::Single-&gt;new(\"'eq_or_diff'\"),\n                PPI::Token::Structure-&gt;new(';'),\n            ) {\n                ok $synthetic_use-&gt;add_element($child);\n            }\n            $synthetic_use\n        },\n        PPI::Token::Whitespace-&gt;new(\"\\n\"),\n    ) {\n        ok $insertion_point-&gt;insert_after($new_element);\n    }\n}\n\ndiag $doc-&gt;serialize;\n</code></pre>\n\n<p>But it's much easier to let PPI parse a given fragment and just use those objects:</p>\n\n<pre><code>diag 'Trying to insert after ' . $second_last-&gt;module;\n\n{\n    my $insertion_point = $second_last;\n    for my $new_element (\n        reverse PPI::Document-&gt;new(\\ \"\\nuse Test::Differences qw( eq_or_diff );\")-&gt;elements\n    ) {\n        ok $insertion_point-&gt;insert_after($new_element-&gt;remove);\n    }\n}\n\ndiag $doc-&gt;serialize;\n</code></pre>\n\n<p>Beware: Using <code>$new_element-&gt;remove</code> instead of just <code>$new_element</code> is crucial. You need to detach <code>$new_element</code> from its old containing document because otherwise the destruction of the temporary <code>PPI::Document</code> instance will wipe out all child elements, including those already added to <code>$doc</code>.</p>\n"}], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 53328846, "answer_count": 1, "score": 3, "last_activity_date": 1542323479, "creation_date": 1542318944, "last_edit_date": 1542320042, "question_id": 53328446, "link": "https://stackoverflow.com/questions/53328446/how-do-i-add-new-lines-to-a-perl-script-using-ppi", "title": "How do I add new lines to a Perl script using PPI?", "body": "<p>What I'd ideally like to be able to do is scan a bunch of files that are implicitly importing a bunch of functions via <code>Test::Most</code>.  I'd like to explicitly import the functions within the file.  So basically I'll check the <code>use</code> statements to see if they already exist and, if they don't, I'd like to add an additional use statement for the function(s) in question.  For example, I might add <code>use Test::Differences qw( eq_or_diff );</code> if there's an <code>eq_or_diff</code> in the file, but no <code>use Test::Differences</code>.  It'll get a little more complicated, but that's the basic idea.</p>\n\n<p>As a proof of concept, I've tried to add just a single word into an existing script, but I can't figure it out. <code>insert_after()</code> returns true on success.  I only ever get a <code>false</code> value, but I don't see any debugging info as to why the line could not be added.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse PPI::Document ();\nuse PPI::Token::Word ();\nuse Test::More;\n\nmy $script = &lt;&lt;'EOF';\nuse strict;\nuse warnings;\n\nuse DateTime ();\nuse Git::Helpers qw( checkout_root );\nuse LWP::UserAgent ();\n\nmy $foo = 'bar';\nEOF\n\nmy $doc = PPI::Document-&gt;new( \\$script );\n\nmy $includes    = $doc-&gt;find('PPI::Statement::Include');\nmy @use         = grep { $_-&gt;type eq 'use' } @{$includes};\nmy $second_last = $use[-2];\n\ndiag 'Trying to insert after ' . $second_last-&gt;module;\n\nmy $word = PPI::Token::Word-&gt;new('use');\nisa_ok( $word,        'PPI::Element', 'word is an Element' );\nisa_ok( $second_last, 'PPI::Element', 'use is an Element' );\n\nok( $second_last-&gt;insert_after($word), 'word inserted' );\n\ndiag $doc-&gt;serialize;\n\ndone_testing();\n</code></pre>\n\n<p>The output of my script is as follows.  You'll note that the document does not appear to have been altered:</p>\n\n<pre><code># trying to insert after Git::Helpers\nok 1 - 'word is an Element' isa 'PPI::Element'\nok 2 - 'use is an Element' isa 'PPI::Element'\nnot ok 3 - word inserted\n#   failed test 'word inserted'\n#   at so.pl line 31.\n# use strict;\n# use warnings;\n#\n# use DateTime ();\n# use Git::Helpers qw( checkout_root );\n# use LWP::UserAgent ();\n#\n# my $foo = 'bar';\n1..3\n# looks like you failed 1 test of 3.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1542303627, "post_id": 53325039, "comment_id": 93530617, "body": "What module are you using?"}, {"owner": {"reputation": 13, "user_id": 7879357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cebe1330dba30fcb23c683b92a787d5?s=128&d=identicon&r=PG", "display_name": "Ernesto Rodriguez Reina", "link": "https://stackoverflow.com/users/7879357/ernesto-rodriguez-reina"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542412814, "post_id": 53325039, "comment_id": 93572622, "body": "I was using <code>IO::Compress::Gzip</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7879357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cebe1330dba30fcb23c683b92a787d5?s=128&d=identicon&r=PG", "display_name": "Ernesto Rodriguez Reina", "link": "https://stackoverflow.com/users/7879357/ernesto-rodriguez-reina"}, "edited": false, "score": 0, "creation_date": 1542412859, "post_id": 53325238, "comment_id": 93572636, "body": "That is exactly what I needed. Thank you!"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1542304164, "creation_date": 1542304164, "answer_id": 53325238, "question_id": 53325039, "link": "https://stackoverflow.com/questions/53325039/how-to-gzip-several-files-in-perl-one-by-one/53325238#53325238", "title": "How to gzip several files in Perl one by one", "body": "<p>It seems you're using <a href=\"http://p3rl.org/IO::Compress::Gzip\" rel=\"nofollow noreferrer\">IO::Compress::Gzip</a>. Use the <code>Append</code> option of <code>gzip</code>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse IO::Compress::Gzip qw{ gzip $GzipError };\n\nmy $outputfile = 'out.gz';\nmy @tocompress = glob '*.txt';\n\nfor my $file (@tocompress) {\n    next unless -f $file;\n    print STDERR \"Adding $file\\n\";\n    gzip($file, $outputfile, Append =&gt; 1) or die $GzipError;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7879357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cebe1330dba30fcb23c683b92a787d5?s=128&d=identicon&r=PG", "display_name": "Ernesto Rodriguez Reina", "link": "https://stackoverflow.com/users/7879357/ernesto-rodriguez-reina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 53325238, "answer_count": 1, "score": 0, "last_activity_date": 1542304164, "creation_date": 1542303331, "question_id": 53325039, "link": "https://stackoverflow.com/questions/53325039/how-to-gzip-several-files-in-perl-one-by-one", "title": "How to gzip several files in Perl one by one", "body": "<p>I have a list of files that I want to compress using Perl. Currently I have this:</p>\n\n<pre><code>gzip \\@tocompress -&gt; $outputfile\n    or die \"Failed to compress: $GzipError\\n\"\n</code></pre>\n\n<p>But I want to iterate over the files and add them one at the time to the compress file. How can I achieve that?</p>\n"}, {"tags": ["perl", "compilation", "par"], "comments": [{"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1542302393, "post_id": 53324714, "comment_id": 93529970, "body": "I am not sure that the title of the question is apropos. I think that dynamic loading of modules is the issue, but I&#39;m not certain that&#39;s the case."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1542302540, "post_id": 53324714, "comment_id": 93530066, "body": "Maybe you need to tell PAR::Packer to include the modules when packing? See the -c/-x options to <code>pp</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1542307208, "post_id": 53324714, "comment_id": 93532331, "body": "All modules requires a Perl installaion. The PAR::Packer executable provides one."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "edited": false, "score": 0, "creation_date": 1544137672, "post_id": 53353869, "comment_id": 94180432, "body": "It was the -l option in pp that I didn&#39;t know about. That&#39;s the key to resolving the problem."}], "tags": [], "owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "is_accepted": true, "score": 3, "last_activity_date": 1576341128, "last_edit_date": 1576341128, "creation_date": 1542476670, "answer_id": 53353869, "question_id": 53324714, "link": "https://stackoverflow.com/questions/53324714/detect-whether-compiled-perl-script-dynamically-loads-modules/53353869#53353869", "title": "Detect whether compiled perl script dynamically loads modules", "body": "<p>Assuming you want to know, if your pp - packed executable will run on a system with no perl installed, here is how I do it:</p>\n\n<p>Get Process Explorer from sysinternals.com.<br>\nPack your executable.<br>\nRun the executable and check the dlls of the process in ProcessExplorer<br>\n(<em>view->'show lower pane'</em> and <em>view->'lower pane view'->'DLLs'</em>)<br>\nIf you see any dll refering to a path other than the PAR temp-dir or system libraries, which are present on any windows system, go back, pack again and add these libs using pp's -l switch.</p>\n\n<p>Example:</p>\n\n<pre><code>pp -e \"use XML::LibXML; while(1){sleep 1}\"\n</code></pre>\n\n<p>Running <strong><em>a.exe</em></strong> ...<br>\nProcess Explorer displays</p>\n\n<pre><code>libxml2-2_.dll ... C:\\Users\\user\\perl522\\c\\bin\\libxml2-2_.dll\n</code></pre>\n\n<p>This will not be present on a users system ...<br>\nRerunning pp:</p>\n\n<pre><code>pp -l libxml2-2_.dll -e \"use XML::LibXML; while(1){sleep 1}\"\n</code></pre>\n\n<p>This time, running <strong><em>a.exe</em></strong> ...<br>\nProcess Explorer displays:</p>\n\n<pre><code>libxml2-2_.dll ... C:\\Users\\user\\AppData\\Local\\Temp\\par-xxx\\cache-SHA1\\libxml2-2_.dll\n</code></pre>\n\n<p>Now the process picks up the lib that was bundled with pp and extracted to PARs cache-dir.</p>\n\n<p>Cheers, Chris</p>\n"}], "owner": {"reputation": 311, "user_id": 1170224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e42c87e719565725a8dafb1300d78d?s=128&d=identicon&r=PG", "display_name": "Wes", "link": "https://stackoverflow.com/users/1170224/wes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 2, "accepted_answer_id": 53353869, "answer_count": 1, "score": 0, "last_activity_date": 1576341128, "creation_date": 1542302122, "question_id": 53324714, "link": "https://stackoverflow.com/questions/53324714/detect-whether-compiled-perl-script-dynamically-loads-modules", "title": "Detect whether compiled perl script dynamically loads modules", "body": "<p>I am running Windows 10 with Strawberry Perl. I use the <em>PAR::Packer</em> module to make executable versions of some of my Perl scripts.</p>\n\n<p>I find that some modules e.g. <em>XML::LibXML</em>, require a Perl installation in order to run the executable. Since I'm compiling these for users without Perl this defeats the purpose of the compilation.</p>\n\n<p>Is there any way I can tell before compilation whether or not the executable with need a Perl installation to run?</p>\n"}, {"tags": ["perl", "batch-file"], "comments": [{"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 2, "creation_date": 1542280933, "post_id": 53317532, "comment_id": 93516606, "body": "So.. what is the question?"}, {"owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1542281079, "post_id": 53317532, "comment_id": 93516681, "body": "how can i execute perl file  with task sheduler of windows ?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542281087, "post_id": 53317532, "comment_id": 93516690, "body": "I think that several lines in your code example have been accidentally joined together with the comments. Can you please <a href=\"https://stackoverflow.com/posts/53317532/edit\">edit your question</a> to fix the code."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1542281162, "post_id": 53317532, "comment_id": 93516728, "body": "The simplest way would be to associate perl extension (.pl) with the interpreter... you can then simply run it as <code>perlscript.pl paramters....</code>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1542281435, "post_id": 53317532, "comment_id": 93516895, "body": "@jack: You seem to have completely ignored all of the good advice you were given the <a href=\"https://stackoverflow.com/a/53224475/\">last time you showed us this code</a>."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1542281622, "post_id": 53317532, "comment_id": 93517011, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/53222621/perl-dont-send-double-sql-request\">Perl - don&#39;t send double sql request</a>"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1542282128, "post_id": 53317532, "comment_id": 93517332, "body": "@jack: I&#39;ve tried to tidy up your code. Please check that it looks correct. Also. <b>please</b> be more careful next time. If you&#39;re asking a large group of strangers to read and understand your code, then it&#39;s only polite to make their job as easy as possible. And ensuring the formatting is correct is an important part of that."}, {"owner": {"reputation": 38379, "user_id": 3074564, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yo5QG.png?s=128&g=1", "display_name": "Mofi", "link": "https://stackoverflow.com/users/3074564/mofi"}, "edited": false, "score": 2, "creation_date": 1542283975, "post_id": 53317532, "comment_id": 93518397, "body": "The first line in batch file must be <code>CALL C:\\Users\\Desktop\\perl_32_bits\\portableshell.bat</code>. For the reason read answer on <a href=\"https://stackoverflow.com/a/24725044/3074564\">How to call a batch file that is one level up from the current directory?</a> It explains all methods existing to run or call a batch file from within a batch file."}, {"owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "edited": false, "score": 0, "creation_date": 1542290223, "post_id": 53317532, "comment_id": 93522137, "body": "i want use a portable version of perl whish is portableshell.bat"}, {"owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "edited": false, "score": 0, "creation_date": 1542293531, "post_id": 53317532, "comment_id": 93524276, "body": "i don&#39;t know why the query is send only one time with the windows task sheduler"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "edited": false, "score": 0, "creation_date": 1542297660, "post_id": 53323237, "comment_id": 93527109, "body": "thanks for your response, but when i don&#39;t use the task scheduler, only my batch file that works but when i run the task sheduler with my batch file that creat only the table and not other querry"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1542297382, "creation_date": 1542297382, "answer_id": 53323237, "question_id": 53317532, "link": "https://stackoverflow.com/questions/53317532/perl-batch-file/53323237#53323237", "title": "Perl - Batch file", "body": "<p>Your question really isn't very clear but I think that (once again) you've confused yourself with the logic in your program. Converted to pseudo-code, your program looks like this:</p>\n\n<pre><code>connect to the database\ncheck for the existence of the table\nif the table exists\n  say that the table exists\nelse\n  create the table\n  open the log file\n  for each record in the log file\n    parse the record\n    insert record into the table\n  end for\nend if\n</code></pre>\n\n<p>So let's look at how this works.</p>\n\n<p>The first time you run the program, I assume the table doesn't exist. So the table is created, the log file is processed and a number of records get added to your table.</p>\n\n<p>On every subsequent run of the program, the table already exists. So your program just tells you that the table exists and then exits without processing the log file.</p>\n\n<p>I think you actually want your program to look like this:</p>\n\n<pre><code>connect to the database\ncheck for the existence of the table\nif the table exists\n  say that the table exists\nelse\n  create the table\nend if\n\nopen the log file\nfor each record in the log file\n  parse the record\n  insert record into the table\nend for\n</code></pre>\n\n<p>I'll leave it as an exercise for you to actually make those changes to your code.</p>\n\n<p><strong>Update:</strong> And please consider using some of the <a href=\"https://stackoverflow.com/a/53224475/\">good advice you got the last time you showed us this code</a>. We make these suggestions for good reasons :-)</p>\n"}], "owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1542297382, "creation_date": 1542278318, "last_edit_date": 1542282015, "question_id": 53317532, "link": "https://stackoverflow.com/questions/53317532/perl-batch-file", "title": "Perl - Batch file", "body": "<p>I have a Perl script which splits a log file and sends a query to a database and I want to execute this Perl script from a bat file in the windows task scheduler. That executes only the first query and I want to execute all of the queries.</p>\n\n<p>My logfile.txt :</p>\n\n<pre><code>Wed Oct 17 04:57:08 2018 : Resource = 'toto' cstep= 'fifi' time =23.634s \nWed Oct 17 04:57:50 2018 : Resource = 'titi' cstep= 'fofo' time =22.355s \n</code></pre>\n\n<p>My Perl script </p>\n\n<pre><code>use DBI; use Sys::Hostname ();\n\n$hostname = Sys::Hostname::hostname();\n$hostname_cstep_table = $hostname . '_cstep_table';\n\n# Connect to the database.\nmy $dbh = DBI-&gt;connect(\"DBI:mysql:database=DB;host=IP\", \"nameDB\", 'psswordDB', {'RaiseError' =&gt; 1});\n\n#on peut utiliser insert mais il y aura des doublons et ici on est dans une table unique\nmy $sth = $dbh-&gt;prepare(\"SHOW TABLES LIKE '$hostname_cstep_table';\")\n  or die \"prepare statement failed: $dbh-&gt;errstr()\";\n\n$sth-&gt;execute() or die \"execution failed: $dbh-&gt;errstr()\";\n\n#affiche 0 ou 1, selon la table qui est trouv\u00e9\n$row = $sth-&gt;rows;\n\nif ($row eq 1) {\n\n    print $hostname_cstep_table . \" has created\";\n\n}\n\nif ($row eq 0) {\n    #on peut utiliser insert mais il y aura des doublons et ici on est dans une table unique avec une cl\u00e9 primaire et un ID incr\u00e9ment\u00e9\n    my $sth = $dbh-&gt;prepare(\" CREATE TABLE `$hostname_cstep_table` (    `ID` TINYINT ( 3 ) UNSIGNED NOT NULL AUTO_INCREMENT ,   `time` datetime NOT NULL,   `cstep` nvarchar(100)NOT NULL,  `time_in_seconde` int NOT NULL,     PRIMARY KEY (`ID`),     UNIQUE KEY (`time`)     ) ENGINE=Aria;\")\n\n        or die \"prepare statement failed: $dbh-&gt;errstr()\"; \n    $sth-&gt;execute() or die \"execution failed: $dbh-&gt;errstr()\";\n    open (FILE, 'logfile');\n\n    while (&lt;FILE&gt;) {\n\n        ($word1, $word2, $word3, $word4, $word5, $word6, $word7, $word8, $word9, $word10, $word11, $word12, $word13, $word14) = split(\" \");\n\n        $word13 =~ s/[^\\d.]//g;\n\n        if ($word13 &gt; 5) {\n\n            if ($word2 eq \"Jan\") {\n\n                $word2 = \"01\"\n            }\n\n            if ($word2 eq \"Feb\") {\n\n                $word2 = \"02\"\n            }\n\n            if ($word2 eq \"Mar\") {\n\n                $word2 = \"03\"\n            }\n\n            if ($word2 eq \"Apr\") {\n\n                $word2 = \"04\"\n            }\n\n            if ($word2 eq \"May\") {\n\n                $word2 = \"05\"\n            }\n\n            print \"'$word5-$word2-$word3 $word4', $word11, $word13 \\n\";\n\n            # Connect to the database.\n            my $dbh = DBI-&gt;connect(\"DBI:mysql:database=DB;host=IP\",             \"nameDB\", 'passwordDB',\n            {'RaiseError' =&gt; 1}) ;\n\n            #on peut utiliser insert mais il y aura des doublons et ici on est dans une table unique\n            my $sth = $dbh-&gt;prepare(\"REPLACE `$hostname_cstep_table` (time, cstep, time_in_seconde) VALUES('$word5-$word2-$word3 $word4', $word11, $word13);\")\n                or die \"prepare statement failed: $dbh-&gt;errstr()\";\n            $sth-&gt;execute() or die \"execution failed: $dbh-&gt;errstr()\";\n            print $sth-&gt;rows . \" rows found.\\n\";\n            $sth-&gt;finish;\n\n        }\n    }    \n}\n</code></pre>\n\n<p>My batch file</p>\n\n<pre><code>C:\\Users\\Desktop\\perl_32_bits\\portableshell.bat \nC:\\Users\\Desktop\\perl_32_bits\\test3.pl %*\n</code></pre>\n\n<p>Thanks for your response.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1542274975, "post_id": 53316142, "comment_id": 93513135, "body": "You should use a different data structure: Walk through your original data structure, and build a hash of arrays from that so you can then use <code>join( &#39;,&#39;, @items )</code> to output the stuff with commas."}], "answers": [{"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1542276544, "post_id": 53316574, "comment_id": 93514059, "body": "... alternatively, <code>pop</code> the last element, output the rest with comma, and then output the last element without a comma"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1542289563, "post_id": 53316574, "comment_id": 93521683, "body": "You specifically mention switching to a C-style loop as if that&#39;s a crucial detail, but what&#39;s the benefit of your C-style loop over <code>for my $i (0 .. $#keys-1) {...}</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1542289830, "post_id": 53316574, "comment_id": 93521843, "body": "@DaveSherohman there is none. I mostly chose this because for someone who&#39;s not intimately familiar with what&#39;s <i>Perlish</i> and what isn&#39;t, I assumed it easier to understand. It makes no difference at all."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 1, "last_activity_date": 1542275262, "creation_date": 1542275262, "answer_id": 53316574, "question_id": 53316142, "link": "https://stackoverflow.com/questions/53316142/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-2-perl/53316574#53316574", "title": "How to print comma \u201c,\u201d in the middle of sentenced when necessary, Part 2, Perl", "body": "<p>You can switch your inner loop to be a C-style for loop to go over the keys and don't do the last one, then treat it separately afterwards. You will need a list of the inner keys in an array to do that. It also makes sense to sort them so you can reproduce the same result all the time.</p>\n\n<pre><code>foreach my $temp_0 (sort keys %try)\n{\n    # heading\n    print \"\\n//$temp_0\\n\\n\";\n\n    # all but the last entry\n    my @keys = sort keys %{$try{$temp_0}};\n    for (my $i = 0; $i &lt; $#keys; $i++) {\n        print \"$keys[$i], // $try{$temp_0}{$keys[$i]}\\n\";\n    }\n\n    # the last entry\n    print \"$keys[-1] // $try{$temp_0}{$keys[-1]}\\n\";\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 9626882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b56d43bde056b4a47b547b42f33ac96?s=128&d=identicon&r=PG&f=1", "display_name": "Automaton", "link": "https://stackoverflow.com/users/9626882/automaton"}, "is_accepted": false, "score": 0, "last_activity_date": 1542326566, "creation_date": 1542326566, "answer_id": 53329562, "question_id": 53316142, "link": "https://stackoverflow.com/questions/53316142/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-2-perl/53329562#53329562", "title": "How to print comma \u201c,\u201d in the middle of sentenced when necessary, Part 2, Perl", "body": "<p>If it is as simple as putting a comma between a list of items with nothing else in between, you can use a <code>join</code> with <code>','</code> as @Corion mentioned.  Since you have other stuff (comments) in between them, here's a simple change that works:</p>\n\n<pre><code>foreach my $temp_0 (keys %try)\n{\n    print \"\\n//$temp_0\\n\\n\";\n    my @keys = keys %{$try{$temp_0}};\n    for (my $i = 0; $i &lt;= $#keys; $i++) {\n        my $com = ($i &lt; $#keys) ? ',' : '';\n        print \"$keys[$i]$com // $try{$temp_0}{$keys[$i]}\\n\";\n     }\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53316574, "answer_count": 2, "score": 0, "last_activity_date": 1542326566, "creation_date": 1542273863, "question_id": 53316142, "link": "https://stackoverflow.com/questions/53316142/how-to-print-comma-in-the-middle-of-sentenced-when-necessary-part-2-perl", "title": "How to print comma \u201c,\u201d in the middle of sentenced when necessary, Part 2, Perl", "body": "<p>I need to print comma \",\" when the list more than one, and if more than one, the last list I don't want to print comma. I know I can use Join to to do this but I can't loop multidimensional hash with comma if there is another data to add in.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Tie::Autotie 'Tie::IxHash';\n\ntie my %try, 'Tie::IxHash';\n$try{STRONG}{ALLIES}='A';\n$try{AGILE}{BOBBY}='B';\n$try{AGILE}{HOBBY}='B';\n$try{SMART}{CAKRA}='C';\n$try{SMART}{PHONE}='C';\n$try{SMART}{PEOPLE}='C';\n\nforeach my $temp_0 (keys %try)\n{\n    print \"\\n//$temp_0\\n\\n\";\n    foreach my $temp_1 (keys %{$try{$temp_0}})\n    {\n        print \"$temp_1, // $try{$temp_0}{$temp_1}\\n\";\n     }\n }\n</code></pre>\n\n<p>Current Output:</p>\n\n<pre><code>//STRONG\n\nALLIES, // A\n\n//AGILE\n\nBOBBY, // B\nHOBBY, // B\n\n//SMART\n\nCAKRA, // C\nPHONE, // C\nPEOPLE, // C\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>//STRONG\n\nALLIES // A\n\n//AGILE\n\nBOBBY, // B\nHOBBY // B\n\n//SMART\n\nCAKRA, // C\nPHONE, // C\nPEOPLE // C\n</code></pre>\n"}, {"tags": ["json", "perl", "networking"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542273525, "post_id": 53312470, "comment_id": 93512192, "body": "<code>Pattern match timed-out at .&#47;rps.pl line 38</code>: Use the debug features of <code>Net::Telnet</code> to see what prompt actually gets sent: <code>Dump_Log   =&gt; $filename,</code> : <code>my $telnet = Net::Telnet-&gt;new( Timeout=&gt;5, Dump_Log =&gt; &#39;telnet_debug.txt&#39;, Errmode=&gt;&#39;die&#39;, );</code>"}, {"owner": {"reputation": 21, "user_id": 10617667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8eb94c4d6c119ff1cb897e186e9090?s=128&d=identicon&r=PG&f=1", "display_name": "Ryde", "link": "https://stackoverflow.com/users/10617667/ryde"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542287630, "post_id": 53312470, "comment_id": 93520570, "body": "That was little helpful. Now I know exactly where the issue is occurring. Script is logging in telnet but I think its not able to recognize prompt and send the &quot;pshow&quot; command I believe  This is how my telnet login page shows &lt;pre&gt;<code>code</code> &gt;  &gt;Type &quot;help&quot; for a list of commands. &gt;  &gt;Make sure to set Telnet mode to Local Echo Off &gt;  &gt; &lt;pre&gt;<code>code</code>"}, {"owner": {"reputation": 21, "user_id": 10617667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8eb94c4d6c119ff1cb897e186e9090?s=128&d=identicon&r=PG&f=1", "display_name": "Ryde", "link": "https://stackoverflow.com/users/10617667/ryde"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1542288052, "post_id": 53312470, "comment_id": 93520803, "body": "That was little helpful.I used Input_log instead dump_log. Dump log shows in encrypt form. Now I know exactly where the issue is occurring. Script is logging in telnet but I think its not able to recognize prompt and send the &quot;pshow&quot; command I believe  This is how my telnet login page shows <code>code</code>   &gt;Type &quot;help&quot; for a list of commands.   &gt;Make sure to set Telnet mode to Local Echo Off   &gt; <code>code</code> Can you tell the regular regex format I should use in waitfor()??  <i>ignore previous comment.. im new and it says I can edit only 5 times</i>"}], "owner": {"reputation": 21, "user_id": 10617667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8eb94c4d6c119ff1cb897e186e9090?s=128&d=identicon&r=PG&f=1", "display_name": "Ryde", "link": "https://stackoverflow.com/users/10617667/ryde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542256254, "creation_date": 1542256254, "question_id": 53312470, "link": "https://stackoverflow.com/questions/53312470/telnet-with-optional-login-pw-and-sending-commands-using-perl", "title": "Telnet with optional login/pw and sending commands using perl", "body": "<p>Ok Im new to perl script and trying to make a code and have searched the posts here related to telnet and logging and sending commands... I tried the same but did not work</p>\n\n<p>Heres json file</p>\n\n<pre><code>{\n\"testbed\": {\n\n    \"rps\": {\n        \"RPS1\": {\n            \"management\": \"192.168.40.2\",\n            \"pool\": \"2,4,5\"\n        },\n        \"RPS2\": {\n            \"management\": \"192.168.40.20\",\n            \"pool\": \"2,5\"\n        }\n    },\n\n}\n</code></pre>\n\n<p>And my perl script is this </p>\n\n<pre><code>#!/usr/bin/perl -w\nuse warnings;\nuse strict;\nuse JSON;\nuse Talari::Automation::CLI;\nuse Data::Dumper;\nuse Net::Telnet();\nuse Expect;\n\n\n#read json and print value of json\nmy $json;\n{\n  local $/; #Enable 'slurp' mode\n  open my $fh, \"&lt;\", \"Persistent_path.json\";\n  $json = &lt;$fh&gt;;\n  close $fh;\n}\nmy $data = decode_json($json);\n\n############RPS\nuse vars qw/ $rps $rpses $ip /;\n\n\n\n#rps info from decoded $data alone stored in $rps of perl\nmy $rps = $data-&gt;{'testbed'}-&gt;{'rps'};\nprint Dumper($rps);\n\n# loop to extract only mgt ip addresses of switches\nforeach my $rpsinfo(keys %{$rps})\n{\n    my $rpses=$rps-&gt;{$rpsinfo};\n    my $rpsip = $rpses-&gt;{'management'};\n    my @rpspool = $rpses-&gt;{'pool'};\n    my $telnet = Net::Telnet-&gt;new( Timeout=&gt;5, Errmode=&gt;'die', );\n    $telnet-&gt;open(\"$rpsip\");\n    $telnet-&gt;waitfor('/\\&gt; $/');\n    $telnet-&gt;cmd('pshow');\n}\n</code></pre>\n\n<p>and the output is pattern match timed-out at ./rps.pl line 38\nand when logging in telnet manually, the prompt shows only ></p>\n\n<p>I just wanted to login to telnet as easy as possible so I searched and saw Telnet module but its not giving output.\nI also tried this code </p>\n\n<pre><code>system(\"telnet\",\"$rpsip\");\n</code></pre>\n\n<p>It works but I cannot send any commands like \"pshow\" using print command..</p>\n\n<p>Anyone help me with this? I just want to make it simple and also, I have to modify code so that incase the connection fails, i want to try for 2 more times logging in then issue my commands to turn the ports on.</p>\n\n<p>Thanks in advance. Also, is there a place where I can learn perl script mostly related to networking?</p>\n"}]