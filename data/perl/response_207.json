[{"tags": ["string", "perl"], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1545861790, "last_edit_date": 1592644375, "creation_date": 1545861790, "answer_id": 53937639, "question_id": 53937431, "link": "https://stackoverflow.com/questions/53937431/converting-string-to-bytes32-to-be-used-in-solidity-contract-call/53937639#53937639", "title": "Converting string to bytes32 to be used in solidity contract call", "body": "<p>It looks like all this function does it to encode a string into bytes, then truncate/pad it so the result is exactly 32 bytes long.</p>\n<p>The first part may be tricky because <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes()\" rel=\"nofollow noreferrer\">according to the documentation</a>:</p>\n<blockquote>\n<pre><code>public byte[] getBytes()\n</code></pre>\n<p>Encodes this <code>String</code> into a sequence of bytes using the platform's default charset, storing the result into a new byte array.</p>\n<p>The behavior of this method when this string cannot be encoded in the default charset is unspecified.</p>\n</blockquote>\n<p>Perl doesn't really have a concept of a &quot;default charset&quot;, but if you're willing to settle for UTF-8, it's not hard:</p>\n<pre><code>sub stringToBytes32 {\n    my ($str) = @_;\n    utf8::encode $str;\n    return pack 'a32', $str;\n}\n</code></pre>\n<p>(See <a href=\"https://perldoc.pl/Encode#encode\" rel=\"nofollow noreferrer\"><code>Encode::encode</code></a> if you need a different encoding.)</p>\n<p><a href=\"https://perldoc.pl/functions/pack\" rel=\"nofollow noreferrer\"><code>pack</code></a> is handy for producing data in binary formats. Here we use it to truncate/pad to 32 bytes.</p>\n"}], "owner": {"reputation": 69, "user_id": 2669606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6vNXZ.png?s=128&g=1", "display_name": "Marcos Roberto Silva", "link": "https://stackoverflow.com/users/2669606/marcos-roberto-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545861790, "creation_date": 1545860267, "last_edit_date": 1545861068, "question_id": 53937431, "link": "https://stackoverflow.com/questions/53937431/converting-string-to-bytes32-to-be-used-in-solidity-contract-call", "title": "Converting string to bytes32 to be used in solidity contract call", "body": "<p>How can I convert a Perl string to bytes32 like the java function below:</p>\n\n<pre><code>public static Bytes32 stringToBytes32(String string) {\n    byte[] byteValue = string.getBytes();\n    byte[] byteValueLen32 = new byte[32];\n    System.arraycopy(byteValue, 0, byteValueLen32, 0, byteValue.length);\n    return new Bytes32(byteValueLen32);\n}\n</code></pre>\n\n<p>Is there any module available in CPAN to do this?</p>\n"}, {"tags": ["windows", "perl", "service"], "comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1545858568, "post_id": 53934637, "comment_id": 94714375, "body": "According to the docs for Win32::Daemon, the &#39;running&#39; callback is deprecated.  It suggests checking SERVICE_CONTROL_TIMER, not SERVICE_RUNNING.  Have you tried updating your code accordingly?"}, {"owner": {"reputation": 63, "user_id": 1544113, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b446ab6e6514d2dc6cd314f96fc3a91c?s=128&d=identicon&r=PG", "display_name": "vSteve", "link": "https://stackoverflow.com/users/1544113/vsteve"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1552347385, "post_id": 53934637, "comment_id": 96966429, "body": "Due to time constraints, I re-created the application in Python and it works fine over there.  I haven&#39;t touched this code since.  I should probably delete the question."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1593809885, "post_id": 53934637, "comment_id": 110918416, "body": "See <a href=\"https://stackoverflow.com/q/62674009/2173773\">How to stop a Win32 service started with Win32::Daemon?</a> for a working example"}], "owner": {"reputation": 63, "user_id": 1544113, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b446ab6e6514d2dc6cd314f96fc3a91c?s=128&d=identicon&r=PG", "display_name": "vSteve", "link": "https://stackoverflow.com/users/1544113/vsteve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545854663, "creation_date": 1545842057, "last_edit_date": 1545854663, "question_id": 53934637, "link": "https://stackoverflow.com/questions/53934637/perl-windows-service-only-runs-once", "title": "Perl Windows Service- Only runs once", "body": "<p>I have the following code I am using to understand creating a windows service with Perl.  The following parts work: install, remove, start, stop, continue, pause, but the  run section is only called once.  Can someone take a look and tell me what I am missing?  I have tried registering for timer but that doesn't get called at all. I have tried this on several different machines (windows 7 and 10) and I get the same behavior.</p>\n\n<pre><code>use Win32::Daemon;\nuse Getopt::Long;\n\nWin32::Daemon::RegisterCallbacks( {\n    start       =&gt;  \\&amp;Callback_Start,\n    running     =&gt;  \\&amp;Callback_Running,\n    stop        =&gt;  \\&amp;Callback_Stop,\n    pause       =&gt;  \\&amp;Callback_Pause,\n    continue    =&gt;  \\&amp;Callback_Continue,\n} );\n\nmy %Context = (\n    last_state =&gt; SERVICE_STOPPED,\n    start_time =&gt; time(),\n    count =&gt; 0,\n);\n\nmy %opt;\nGetOptions (\n    \\%opt,   \n    \"install\",\n    \"remove\",\n);\n\nmy @currDir = split /\\//, $0;\nmy $script = $0;\nmy $scriptPath = \".\";\n\nif (scalar @currDir &gt; 1)\n{\n    $script = pop @currDir;\n    $scriptPath = join \"/\", @currDir;\n    chdir( $scriptPath );\n}\n\nmy %serviceConfig = (\n\n    name            =&gt; 'steveg',\n    display         =&gt; 'Steve Service',\n    description     =&gt; 'Debugging',\n    machine         =&gt; '',\n    path            =&gt; $^X,\n    parameters      =&gt; '\"C:\\source\\perl\\steveService.pl\"',\n);\n\nif( $opt { install } )\n{\n    &amp;installService();\n    exit();\n}\nelsif( $opt { remove } )\n{\n    &amp;removeService();\n    exit();\n}\n\nsub installService\n{\n    # installs the win32 service daemon\n    # ---------------------------------\n    if( Win32::Daemon::CreateService( \\%serviceConfig ) )\n    {\n        debug( 'The service [%s] was successfully installed', $serviceConfig { display } );\n    }\n    else\n    {\n        debug( 'Failed to install the service [%s]: %s',\n            $serviceConfig { display },\n            GetError() );\n    }\n}\n\n# ====================================================================\nsub removeService\n{\n    # removes the win32 service daemon\n    # --------------------------------\n    if( Win32::Daemon::DeleteService( $serviceConfig { name } ) )\n    {\n        debug( 'The service [%s] was successfully removed', $serviceConfig { display } );\n    }\n    else\n    {\n        debug( 'Failed to remove the service [%s]: %s',\n            $serviceConfig { display },\n            GetError() );\n    }\n}\n\n\nWin32::Daemon::StartService( \\%Context, 2000 );\n\nsub Callback_Running\n{\n    my( $Event, $Context ) = @_;\n\n    if( SERVICE_RUNNING == Win32::Daemon::State() )\n    {        \n        $Context -&gt; { count }++; \n        debug ($Context-&gt;{count});  \n    }\n}\n\nsub Callback_Start\n{\n    my( $Event, $Context ) = @_;\n    # Initialization code\n    debug (\"Starting\");\n\n    $Context-&gt;{last_state} = SERVICE_RUNNING;\n    Win32::Daemon::State( SERVICE_RUNNING );\n}\n\nsub Callback_Pause\n{\n    my( $Event, $Context ) = @_;\n    $Context-&gt;{last_state} = SERVICE_PAUSED;\n    debug (\"Paused\");\n    Win32::Daemon::State( SERVICE_PAUSED );\n}\n\nsub Callback_Continue\n{\n    my( $Event, $Context ) = @_;\n    $Context-&gt;{last_state} = SERVICE_RUNNING;\n    debug (\"Continuing\");\n    Win32::Daemon::State( SERVICE_RUNNING );\n}\n\nsub Callback_Stop\n{\n    my( $Event, $Context ) = @_;\n    $Context-&gt;{last_state} = SERVICE_STOPPED;\n    Win32::Daemon::State( SERVICE_STOPPED );\n    debug (\"Stopping\");\n    # We need to notify the Daemon that we want to stop callbacks and the service.\n    Win32::Daemon::StopService();\n}\n\nsub debug\n{\n    my ($fmt, @data) = @_;\n    my $message = sprintf $fmt, @data;\n    open( FILE, \"&gt;&gt;c:/temp/perlService.log\" );\n    print FILE \"[\" .localtime . \"]: 2.1: $message\\n\";\n    close( FILE );\n    if (-t STDOUT &amp;&amp; -t STDIN)\n    {\n        print \"$message\\n\";\n    }\n\n}\n</code></pre>\n\n<p>**Update.  This was using dwimp perl.  If I try to use Strawberry Perl, I can't even get the service started.  I get the following error.</p>\n\n<p>Undefined subroutine &amp;Win32::Daemon::SERVICE_STOPPED called at C:\\source\\perl\\rtNVMService.pl line 85.</p>\n\n<p>**Active Perl will start and print once, but nothing further.  Also I am not able to stop,continue,or pause with ActivePerl.</p>\n\n<p>So frustrating that I can get so many different behaviors with the same piece of code.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 253862, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 2, "creation_date": 1545841081, "post_id": 53934439, "comment_id": 94709022, "body": "<code>(?:\\w+\\s){199}\\w+</code> ? maybe <code>\\S</code> instead of <code>\\w</code> if there are non-word, non-space characters"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1545904979, "post_id": 53934439, "comment_id": 94724919, "body": "What is a &quot;word&quot; for you? What characters are allowed?"}, {"owner": {"reputation": 472, "user_id": 6337701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58414a43e117bb92ebd1da8c091916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Aquaholic", "link": "https://stackoverflow.com/users/6337701/aquaholic"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1545913563, "post_id": 53934439, "comment_id": 94728678, "body": "@Toto, a word can be anything. It can include special characters (like apostrophes - it&#39;s a division of cleo&#39;s business), numbers (like - incorporated on August 2, 2001), commas, semicolons and apostrophe&#39;s (like - through its different divisions, the business&#39;s earnings), special characters (like &#39;&amp;&#39;, single and double quotes)"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1545914961, "post_id": 53934439, "comment_id": 94729267, "body": "Is a short definition like &quot;every character that is not a space&quot; correct for you?"}, {"owner": {"reputation": 472, "user_id": 6337701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58414a43e117bb92ebd1da8c091916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Aquaholic", "link": "https://stackoverflow.com/users/6337701/aquaholic"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1545919718, "post_id": 53934439, "comment_id": 94731125, "body": "@Toto, yes that is correct."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1545980639, "post_id": 53934439, "comment_id": 94747810, "body": "Good -- and important -- clarification in the edit.  In the future I recommend to try to specify such requirements right away."}], "answers": [{"comments": [{"owner": {"reputation": 472, "user_id": 6337701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58414a43e117bb92ebd1da8c091916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Aquaholic", "link": "https://stackoverflow.com/users/6337701/aquaholic"}, "edited": false, "score": 0, "creation_date": 1545920348, "post_id": 53935341, "comment_id": 94731351, "body": "Thanks @GMB, though your solution works equally well, the one by Toto makes a better fit for my stated requirement. Plus 1 to your solution."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 3, "last_activity_date": 1545846510, "creation_date": 1545846510, "answer_id": 53935341, "question_id": 53934439, "link": "https://stackoverflow.com/questions/53934439/perl-capture-specific-number-of-words-from-a-string/53935341#53935341", "title": "Perl - Capture Specific number of words from a string", "body": "<p>You can do this with <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">the <code>split</code> function</a> : </p>\n\n<ul>\n<li>it accepts a regexp : here <code>\\W+</code> will split the string everytime a non-word character (or sequence of such characters) is encountered </li>\n<li>it offers an option that limits how many times the string will be cut (which effectively controls the maximum number of parts that you have in the output).</li>\n</ul>\n\n<p>Code :</p>\n\n<pre><code>my $mytext = \"This text goes on and on and on........\";\nmy $nb_words = 20;\nmy @words = split(/\\W+/, $mytext, $nb_words + 1);\npop @words; # the last item contains the remaining of the string\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 472, "user_id": 6337701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58414a43e117bb92ebd1da8c091916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Aquaholic", "link": "https://stackoverflow.com/users/6337701/aquaholic"}, "edited": false, "score": 0, "creation_date": 1545920551, "post_id": 53936996, "comment_id": 94731434, "body": "Thanks @zdim, this too is neat"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1545893972, "last_edit_date": 1545893972, "creation_date": 1545857149, "answer_id": 53936996, "question_id": 53934439, "link": "https://stackoverflow.com/questions/53934439/perl-capture-specific-number-of-words-from-a-string/53936996#53936996", "title": "Perl - Capture Specific number of words from a string", "body": "<p>If you need a part of the text containing the first N words, with all the spaces, punctuation, etc</p>\n\n<pre><code>my $text = q(one two, three-four five etc);\nmy $n = 4;\n\nmy ($subtext) = $text =~ /((?:\\w+.*?){$n})/; \nsay $subtext;\n</code></pre>\n\n<p>with the subtext string</p>\n\n<pre>\none two, three-four\n</pre>\n\n<p>Adjust what you consider a \"word\" in the regex. For example, if hyphens are acceptable change <code>\\w+</code> to <code>[\\w-]+</code> (in which case <code>three-four</code> is one \"word\" so <code>five</code> makes it in as well)</p>\n\n<p>If you need a list of words, other than the shown <code>split</code> you can also \"tokenize\" with a regex</p>\n\n<pre><code>my $n = 4;\nmy @words;\n\npush @words, $1 while $text =~ /(\\w+)/g and @words &lt; $n;\nsay \"@words\";\n</code></pre>\n\n<p>for </p>\n\n<pre>\none two three four\n</pre>\n\n<p>where you'd again change <code>\\w</code> if your \"words\" are other than letters, numbers and underscore.</p>\n"}, {"comments": [{"owner": {"reputation": 472, "user_id": 6337701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58414a43e117bb92ebd1da8c091916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Aquaholic", "link": "https://stackoverflow.com/users/6337701/aquaholic"}, "edited": false, "score": 0, "creation_date": 1545920252, "post_id": 53945614, "comment_id": 94731313, "body": "Thanks @Toto, this one works perfectly and looks neater compared to split function. Marking this as the answer and a plus 1."}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 2, "last_activity_date": 1545916070, "creation_date": 1545916070, "answer_id": 53945614, "question_id": 53934439, "link": "https://stackoverflow.com/questions/53934439/perl-capture-specific-number-of-words-from-a-string/53945614#53945614", "title": "Perl - Capture Specific number of words from a string", "body": "<p>If it's OK to define a word by all character that is not a space, you can do:</p>\n\n<pre><code>my $str = &lt;&lt;'EOD';\nBasically, this lengthy string can contain anything and everything including all kinds of special characters. It can include special characters (like apostrophes - it's a division of cleo's business), numbers (like - incorporated on August 2, 2001), commas, semicolons and apostrophe's (like - through its different divisions, the business's earnings), special characters (like '&amp;', single and double quotes)\nEOD\n\nmy ($wd) = $str =~ /((?:\\S+\\s+){1,30})/; # I've limited the length at 30 for testing.\nsay $wd;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p>Basically, this lengthy string can contain anything and everything including all kinds of special characters. It can include special characters (like apostrophes - it's a division of cleo's business), numbers</p>\n</blockquote>\n"}], "owner": {"reputation": 472, "user_id": 6337701, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58414a43e117bb92ebd1da8c091916bd?s=128&d=identicon&r=PG&f=1", "display_name": "Aquaholic", "link": "https://stackoverflow.com/users/6337701/aquaholic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 1, "accepted_answer_id": 53945614, "answer_count": 3, "score": 2, "last_activity_date": 1545916070, "creation_date": 1545840947, "last_edit_date": 1545913626, "question_id": 53934439, "link": "https://stackoverflow.com/questions/53934439/perl-capture-specific-number-of-words-from-a-string", "title": "Perl - Capture Specific number of words from a string", "body": "<p>I have a lengthy string in a perl variable which has more than 500 words.</p>\n\n<pre><code>$mytext = \"This text goes on and on and on........\";\n</code></pre>\n\n<p>Basically, this lengthy string can contain anything and everything including all kinds of special characters. It can include special characters (like apostrophes - it's a division of cleo's business), numbers (like - incorporated on August 2, 2001), commas, semicolons and apostrophe's (like - through its different divisions, the business's earnings), special characters (like '&amp;', single and double quotes)</p>\n\n<p>My requirement is to extract a specific number of words (not characters) from the start of the string. For example, I may need to pick the first 200 words.\nI know that there is a builtin <code>substr</code> function: </p>\n\n<pre><code>substr($mytext, $start, $length)\n</code></pre>\n\n<p>but it extracts the number of characters.<br>\nHow can I extract the number of words instead?</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545818439, "post_id": 53929955, "comment_id": 94701484, "body": "Please <a href=\"https://stackoverflow.com/posts/53929955/edit\">edit</a> your post and tell us what the program currently does and where you are having problems fixing that."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545818619, "post_id": 53929955, "comment_id": 94701554, "body": "i don&#39;t know how to begin"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545818736, "post_id": 53929955, "comment_id": 94701600, "body": "This is not a programming teaching site. Most likely you want to learn about hashes and how to use them for counting. You already split the input into columns, and now you want to count the occurrence of items of the second column."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545819439, "post_id": 53929955, "comment_id": 94701867, "body": "... also, you don&#39;t want to &quot;compare&quot;, you want to &quot;count&quot;"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545819459, "post_id": 53929955, "comment_id": 94701873, "body": "ok, do you have an idea for delete two first line in the array ?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545819536, "post_id": 53929955, "comment_id": 94701914, "body": "Yes - in your loop, when you see that the line starts with <code>SID</code> or starts with <code>---</code>, skip all processing (<code>next</code>). Or maybe skip all processing until you have seen a line that consists only of <code>---...--</code>. <a href=\"http://perldoc.perl.org/functions/next.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/functions/next.html</a>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 3, "creation_date": 1545819633, "post_id": 53929955, "comment_id": 94701954, "body": "Also, why do you comment out <code>use strict;</code> and <code>use warnings;</code> ? These two pragmata are here to help you."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545820391, "post_id": 53929955, "comment_id": 94702188, "body": "i don&#39;t know to use the function next"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545821030, "post_id": 53929955, "comment_id": 94702416, "body": "Yes - that&#39;s why I also showed you the link to the definition of the <code>next</code> keyword in Perl. This site is not about teaching Perl or about teaching how to program, so I cannot really help you with either here."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545827886, "post_id": 53929955, "comment_id": 94704789, "body": "i put this line $line =~ s/\\bNT AUTHORITY\\\\SYSTEM\\b/NT__AUTHORITY\\\\SYSTEM/ig; in the top and now after the next that not work"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545828106, "post_id": 53929955, "comment_id": 94704859, "body": "Why did you add this line and what do you expect it to do? Programming is about having a plan and then describing that plan to the computer. I don&#39;t see the plan in what you are doing here."}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545828835, "post_id": 53929955, "comment_id": 94705090, "body": "i added this line because in the log i have NT AUTHORITY\\SYSTEM, and i translated to NT__AUTHORITY\\SYSTEM, and now the translation don&#39;t work"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1545833202, "post_id": 53929955, "comment_id": 94706574, "body": "You should get a clear idea of: input, expected output, and then read up on how to achieve that. I can&#39;t even see your statement of what you expect from your script making sense, how do you expect to produce working code that way?"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1545835887, "post_id": 53929955, "comment_id": 94707357, "body": "i saw, that&#39;s work"}, {"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1545835971, "post_id": 53929955, "comment_id": 94707379, "body": "now i want to count but not doesn&#39;t work \tif ( $line[1] &amp;&amp; $line[3] == $line[1+$d] &amp;&amp; $line[3+$d] ) { \t \t$i = $i+1; \t$d = $d+1;\t \t\t \tprint &quot;$line[1] $line[3] = $i \\n&quot;; \t \t}"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1545918564, "post_id": 53933811, "comment_id": 94730732, "body": "hello, thanks, i don&#39;t understand if length ($_) &lt; 51;"}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "edited": false, "score": 0, "creation_date": 1545926168, "post_id": 53933811, "comment_id": 94733665, "body": "It&#39;s a prefilter for the log file lines you don&#39;t care about (for example &quot;5 rows selected,&quot;) but more importantly if you don&#39;t include it short lines will cause the <code>unpack</code> statement on the next line to break.  In essence, if the line doesn&#39;t have enough data to list a &quot;program,&quot; then skip."}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": true, "score": 1, "last_activity_date": 1545837165, "creation_date": 1545837165, "answer_id": 53933811, "question_id": 53929955, "link": "https://stackoverflow.com/questions/53929955/perl-count-words-of-a-file/53933811#53933811", "title": "Perl - count words of a file", "body": "<p>I see yours as a two-step problem -- you want to parse the log files, but then you also want to store elements of that data into a data structure that you can use to count.</p>\n\n<p>This is a guess, based on your sample data, but if your data is fixed-width, one way you can parse that into the fields is to use <code>unpack</code>.  I think <code>substr</code> might more efficient, so consider how many files you need to parse and how long each is.</p>\n\n<p>I would store the data into a hash and then dereference it after the files have all been read.</p>\n\n<pre><code>my %counts;\n\nopen my $IN, '&lt;', 'logfile.txt' or die;\nwhile (&lt;$IN&gt;) {\n  next if length ($_) &lt; 51;\n  my ($sid, $user, $terminal, $program) = unpack 'A9 @11 A25 @37 A15 @53 A25', $_;\n\n  next if $sid eq '---------';  # you need some way to filter out bogus or header rows\n\n  $program =~ s/\\(.+//;         # based on your example, turn toto (fifi) into toto\n\n  $counts{$user}{$program}++;\n}\nclose $IN;\n\nwhile (my ($user, $ref) = each %counts) {\n  while (my ($program, $count) = each %$ref) {\n    print \"User = $count $user with program $program\\n\";\n  }\n}\n</code></pre>\n\n<p>Output from program:</p>\n\n<pre><code>User = 3 SYSTEM with program toto\nUser = 1 SYSTEM with program gogo\nUser = 1 NT_AUTHORITY\\SYSTEM with program roro\nUser = 1 NT_AUTHORITY\\SYSTEM with program gaga\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 4303997, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d4iEOnUttZY/AAAAAAAAAAI/AAAAAAAAAjI/WsH8GRSPH8w/photo.jpg?sz=128", "display_name": "Giuseppe Di Terlizzi", "link": "https://stackoverflow.com/users/4303997/giuseppe-di-terlizzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1545945772, "creation_date": 1545945772, "answer_id": 53951010, "question_id": 53929955, "link": "https://stackoverflow.com/questions/53929955/perl-count-words-of-a-file/53951010#53951010", "title": "Perl - count words of a file", "body": "<p>This code detect automatically the size of input fields (your snippet seems an output from Oracle query) and print the results:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse v5.10;\n\nopen my $file, '&lt;', 'input.log' or die \"$?\";\n\nmy $data = {};\nmy @cols_size = ();\n\nwhile (&lt;$file&gt;) {\n\n    my $line = $_;\n\n    if ( $line =~ /--/) {\n        foreach (split(/\\s/, $line)) {\n            push(@cols_size, length($_) +1);\n        }\n        next;\n    }\n\n    next unless (@cols_size);\n    next     if ($line =~ /rows selected/);\n\n    my ($sid, $user, $terminal, $program) = unpack('A' . join('A', @cols_size), $line);\n    next unless ($sid);\n\n    $program =~ s/\\(\\w+\\)//;\n\n    $data-&gt;{$user}-&gt;{$program}++;\n\n}\n\nclose $file;\n\nforeach my $user (keys %{$data}) {\n    foreach my $program (keys %{$data-&gt;{$user}}) {\n        say sprintf(\"User = %s %s with program %s\", $data-&gt;{$user}-&gt;{$program}, $user, $program);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 10608302, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y8SMH4ugQTc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC9ShvUTusMl-nTC5pmjBewJaDDCw/mo/photo.jpg?sz=128", "display_name": "jack", "link": "https://stackoverflow.com/users/10608302/jack"}, "is_accepted": false, "score": 0, "last_activity_date": 1546436448, "creation_date": 1546436448, "answer_id": 54007411, "question_id": 53929955, "link": "https://stackoverflow.com/questions/53929955/perl-count-words-of-a-file/54007411#54007411", "title": "Perl - count words of a file", "body": "<p>i don't understand $counts{$user}{$program}++;</p>\n"}], "owner": {"reputation": 39, "user_id": 10613978, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3kUM4vn45gg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBwM0tjbu2M1V57-18ABRiYnOELsQ/mo/photo.jpg?sz=128", "display_name": "dfg ert", "link": "https://stackoverflow.com/users/10613978/dfg-ert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 53933811, "answer_count": 3, "score": -1, "last_activity_date": 1546436448, "creation_date": 1545816027, "last_edit_date": 1545835812, "question_id": 53929955, "link": "https://stackoverflow.com/questions/53929955/perl-count-words-of-a-file", "title": "Perl - count words of a file", "body": "<p>i want to count words in a file and want result the number of same word</p>\n\n<p>my script</p>\n\n<pre><code>#!/usr/bin/perl\n\n#use strict;\n#use warnings;\n\nuse POSIX qw(strftime);\n$datestring = strftime \"%Y-%m-%d\", localtime;\n\nprint $datestring;\n\nmy @files = &lt;'/mnt/SESSIONS$datestring*'&gt;;\nmy $latest;\n\nforeach my $file (@files) {\n  $latest = $file if $file gt $latest;\n}\n\n@temp_arr=split('/',$latest);\n\nopen(FILE,\"&lt;$latest\");\nprint \"file loaded \\n\";\nmy @lines=&lt;FILE&gt;;\nclose(FILE);\n\n#my @temp_line;\n\nforeach my $line(@lines) {\n\n    @line=split(' ',$line);\n    #push(@temp_arr);\n\n    $line =~ s/\\bNT AUTHORITY\\\\SYSTEM\\b/NT__AUTHORITY\\\\SYSTEM/ig;   \n\n    print $line;\n\n    #print \"$line[0] $line[1] $line[2] $line[3] $line[4] $line[5] \\n\";\n\n}\n</code></pre>\n\n<p>My log file</p>\n\n<pre><code>SID        USER                      TERMINAL        PROGRAM\n---------- ------------------------- --------------- -------------------------\n         1 SYSTEM                    titi            toto (fifi)\n         2 SYSTEM                    titi            toto (fofo)\n         4 SYSTEM                    titi            toto (bobo)\n         5 NT_AUTHORITY\\SYSTEM       titi            roro\n         6 NT_AUTHORITY\\SYSTEM       titi            gaga\n         7 SYSTEM                    titi            gogo (fifi)\n\n         5 rows selected.\n</code></pre>\n\n<p>I want result :</p>\n\n<pre><code>User = 3 SYSTEM with program toto\n, User = 1 SYSTEM with program gogo\n</code></pre>\n\n<p>Thanks for any information</p>\n"}, {"tags": ["r", "shell", "perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545821435, "post_id": 53928918, "comment_id": 94702547, "body": "Can you explain how the Perl script, the shell script and the R script are working together? Does the Perl script call the shell script? Does the Perl script call the R script? The easiest way would be to pass the <code>$path</code> as command line parameter to the shell script and the R script."}, {"owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545822647, "post_id": 53928918, "comment_id": 94703000, "body": "@Corion There is one Perl script  first it call a shell script and then call R script."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545823101, "post_id": 53928918, "comment_id": 94703147, "body": "So what&#39;s stopping you from passing <code>$path</code> to the shell script , and then from the shell script to the R script?"}, {"owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1545823975, "post_id": 53928918, "comment_id": 94703448, "body": "I save the path in a variable $path (in Perl script). so for Perl script its work properly but when Shell script or R script come it can not detect $path so it gives error. see edit in R script :                                                                                                         So, I don&#39;t know how to introduce $path as path to Shell script and R script."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1545824359, "post_id": 53928918, "comment_id": 94703563, "body": "Yes. Variables are not shared between scripts. You need to explicitly pass them around. In your Perl code, you launch the shell script. There you must pass the <code>$path</code> variable as a parameter, and in the shell script, you must pass it on to the R script. You can also use the environment to pass the value: <code>$ENV{ MY_APP_PATH } = $path</code>, and then in R <code>Sys.getenv(c(&quot;MY_APP_PATH&quot;))</code>"}, {"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1545855330, "post_id": 53928918, "comment_id": 94713493, "body": "In perl, call other scripts and specify the path as an argument to these scripts."}, {"owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "reply_to_user": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1545910998, "post_id": 53928918, "comment_id": 94727622, "body": "@Nic3500 I want to make it automatic, path will provide only one time and it will automatically pass to other scripts. Is this possible?"}, {"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 0, "creation_date": 1545934767, "post_id": 53928918, "comment_id": 94736903, "body": "look at how to call external script from Python.  Python script reads the directory, then calls he perl with directory as argument, then calls the R with directory as argument."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "edited": false, "score": 0, "creation_date": 1546404569, "post_id": 53956320, "comment_id": 94839488, "body": "How this program will work? will you please elaborate."}], "tags": [], "owner": {"reputation": 11, "user_id": 10842011, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yQ6XyR0S0kU/AAAAAAAAAAI/AAAAAAAAATE/XxyBwNO8wSk/photo.jpg?sz=128", "display_name": "Yudha H T", "link": "https://stackoverflow.com/users/10842011/yudha-h-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1545989497, "creation_date": 1545989497, "answer_id": 53956320, "question_id": 53928918, "link": "https://stackoverflow.com/questions/53928918/how-to-call-perl-variable-in-r-and-shell-script/53956320#53956320", "title": "How to call Perl variable in R and Shell script?", "body": "<p>Just use $path as argument on your <code>system</code> or <code>exec</code> ini perl. It'll send arg to shell script, then use it as arg for <code>Rscript</code>.</p>\n\n<p>For example, I have 3 script. Here we go.</p>\n\n<pre><code>root@analist:~/test# cat file.pl\n#!/usr/bin/perl\n#Input file\nprint \"[Perl] Enter file:\";\nchomp(my $filepath = &lt;STDIN&gt;);\n#Send to bash script\nmy @cmd = ('./file.sh');\npush @cmd, $filepath;\nsystem(@cmd);\nroot@analist:~/test# cat file.sh\n#!/bin/bash\necho \"[Bash] Filename: $1\"\nRscript file.R $1\nroot@analist:~/test# cat file.R\nargs &lt;- commandArgs(TRUE)\nfileTxt &lt;- args[1]\ncat(paste('[R] File:', fileTxt, '\\n'))\nroot@analist:~/test# ./file.pl\n[Perl] Enter file:test.txt\n[Bash] Filename: test.txt\n[R] File: test.txt\n</code></pre>\n\n<p>I hope this answer can help.</p>\n"}], "owner": {"reputation": 53, "user_id": 10579739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e5fb742c2fd06ea440d952593578181?s=128&d=identicon&r=PG&f=1", "display_name": "Rochi Saurabh", "link": "https://stackoverflow.com/users/10579739/rochi-saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545989497, "creation_date": 1545809739, "last_edit_date": 1545824117, "question_id": 53928918, "link": "https://stackoverflow.com/questions/53928918/how-to-call-perl-variable-in-r-and-shell-script", "title": "How to call Perl variable in R and Shell script?", "body": "<blockquote>\n  <p>I have a Shell script and a R script both link with a Perl script. In Perl script there is user define path I want to use that path for Shell script and R script too. what changes are required?\n  this is Perl script :</p>\n</blockquote>\n\n<pre><code>print \"Enter the path to your input file:\";\nchomp(my $user_path = &lt;STDIN&gt;);\nmy $path = $user_path // $default_path;  # $path  is path for Perl script\nprint \"The path we'll use is: $path\";\n........................\n........\n</code></pre>\n\n<blockquote>\n  <p>This is R script:</p>\n</blockquote>\n\n<pre><code>x &lt;- read.table($path.\"/text.txt\", header=F) # how to introduce $path as path for R script\nlibrary(plyr)\ndf &lt;- ddply(x, .(x$V1,x$V2, x$V3), nrow)\n..............\n.............\n</code></pre>\n\n<blockquote>\n  <p>($path) is working for Perl script but it is not working in R. I want to call Perl variable ($path) in R and Shell script.How to use $path as path in R and in Shell script ?</p>\n</blockquote>\n"}, {"tags": ["perl", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10801603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62a632f169528f47bfaf043bb8aed31?s=128&d=identicon&r=PG&f=1", "display_name": "C. de Haer", "link": "https://stackoverflow.com/users/10801603/c-de-haer"}, "edited": false, "score": 0, "creation_date": 1545811911, "post_id": 53929061, "comment_id": 94699374, "body": "Yes - it should&#39;ve been &lt;=&gt; and not cmp.  Just changed my script and it works perfectly. So easy too!"}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 1, "last_activity_date": 1545810597, "creation_date": 1545810597, "answer_id": 53929061, "question_id": 53928473, "link": "https://stackoverflow.com/questions/53928473/sort-one-array-compared-to-another-and-then-sort-within-that-array/53929061#53929061", "title": "Sort one array compared to another, and then sort within that array", "body": "<p>If you are sorting numbers, you should be using <code>&lt;=&gt;</code>, not <code>cmp</code>.</p>\n\n<p>It sounds to me like you are asking to modify your sort  to sort by the bb values when the aa values are equal.   This is simply:</p>\n\n<pre><code>my @idx = sort {\n    $aa[$a] &lt;=&gt; $aa[$b] ||\n    $bb[$a] &lt;=&gt; $bb[$b]\n} 0 .. $#aa;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10801603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62a632f169528f47bfaf043bb8aed31?s=128&d=identicon&r=PG&f=1", "display_name": "C. de Haer", "link": "https://stackoverflow.com/users/10801603/c-de-haer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 53929061, "answer_count": 1, "score": 1, "last_activity_date": 1545810597, "creation_date": 1545807255, "question_id": 53928473, "link": "https://stackoverflow.com/questions/53928473/sort-one-array-compared-to-another-and-then-sort-within-that-array", "title": "Sort one array compared to another, and then sort within that array", "body": "<p>I have two arrays which need sorting.</p>\n\n<p>For example, I might have the following:</p>\n\n<p><code>@aa = (1, 4, 5, 1, 2);</code>\n<code>@bb = (3, 1, 2, 2, 3);</code></p>\n\n<p>The following script sorts the elements in <code>@aa</code>, and then rearranges <code>@bb</code>, as follows:</p>\n\n<p><code>my @idx = sort { $aa[$a] cmp $aa[$b] } 0 .. $#aa;</code></p>\n\n<p><code>@aa = @aa[@idx];</code></p>\n\n<p><code>@bb = @bb[@idx];</code></p>\n\n<p>This leaves <code>@bb</code> as <code>(3, 2, 3, 1, 2)</code>.</p>\n\n<p>However, I now want to rearrange the elements in <code>@bb</code> so that those that correspond to the same values in <code>@aa</code> are in ascending order. For example, the first 3 and 2 in <code>@bb</code>, both correspond to a 1 in <code>@aa</code>, and so I want to be able to swap them around, so <code>@bb = (2, 3, 3, 1, 2)</code>.</p>\n\n<p>Is there an easy way to do this. I had thought about a new array where I multiple each pairs of elements in <code>@aa</code> and <code>@bb</code> together, and then using that, but can't see how that would help either.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 4, "creation_date": 1545753245, "post_id": 53923755, "comment_id": 94689199, "body": "Please also show the code you&#39;ve got so far."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1545756609, "post_id": 53923755, "comment_id": 94689870, "body": "If you interchanged the words <code>M6</code> and <code>M1</code> in the input file, should the output be still the same? That is: should the output still be the <code>LAYER M6</code> block?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1545769666, "post_id": 53923755, "comment_id": 94692402, "body": "@H&#229;konH&#230;gland: I would assume so - &quot;the greatest number&quot; should mean that if LAYER M7 were added, that should be displayed."}, {"owner": {"reputation": 27, "user_id": 10832183, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kD20NGeCfZk/AAAAAAAAAAI/AAAAAAAAA7k/kGxShDPYhwQ/photo.jpg?sz=128", "display_name": "Rohith Prasad K M", "link": "https://stackoverflow.com/users/10832183/rohith-prasad-k-m"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1545800123, "post_id": 53923755, "comment_id": 94696457, "body": "@bytepusher : you are exactly correct, if we have M7 or M8 or any greater number in the flow, the greatest number and RECT lines below that  should be displayed."}], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1545831649, "post_id": 53931506, "comment_id": 94706002, "body": "Thats got to be &quot;$i++;&quot; (second from last line)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "edited": false, "score": 0, "creation_date": 1545833981, "post_id": 53931506, "comment_id": 94706802, "body": "@MichaelG. Are you referring to the missing semicolon?"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1545834608, "post_id": 53931506, "comment_id": 94706997, "body": "the semicolon is unnecessary. I would still put it in. Just like I&#39;d prefer using variable names instead of assigning to $_. The supposed efficiency gain of not doing so is annihilated by the lack of maintainability IMO. But that&#39;s just my two cents &#175;_(\u30c4)_/&#175;"}, {"owner": {"reputation": 27, "user_id": 10832183, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kD20NGeCfZk/AAAAAAAAAAI/AAAAAAAAA7k/kGxShDPYhwQ/photo.jpg?sz=128", "display_name": "Rohith Prasad K M", "link": "https://stackoverflow.com/users/10832183/rohith-prasad-k-m"}, "edited": false, "score": 0, "creation_date": 1545897671, "post_id": 53931506, "comment_id": 94722364, "body": "thank you @H&#229;kon H&#230;gland this code worked for me. I will try to edit this code for multiple PIN."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1545823954, "creation_date": 1545823954, "answer_id": 53931506, "question_id": 53923755, "link": "https://stackoverflow.com/questions/53923755/perl-script-for-removing-the-characters-and-lines-below-it/53931506#53931506", "title": "perl script for removing the characters and lines below it", "body": "<p>Here is an example. It scans the lines of the file <code>file.txt</code> twice. The first time it records the maximum layer number, and the second time it prints lines if it is not a layer, or if it is the maximum layer block:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $fn = 'file.txt';\nmy @lines;\nmy $max_layer_num = 0;\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nwhile (&lt;$fh&gt;) {\n    push @lines, $_;\n    if ( /^LAYER\\s+M(\\d+)/ ) {\n        $max_layer_num = $1 if $1 &gt; $max_layer_num;\n    }\n}\nclose $fh;\nmy $i = 0;\nwhile ( $i &lt;= $#lines ) {\n    $_ = $lines[$i];\n    if( /^LAYER\\s+M(\\d+)/ ) {\n        if ( $1 != $max_layer_num ) {\n            while (1) {\n                $i++;\n                last if $i &gt; $#lines;\n                $_ = $lines[$i];\n                last if $_ !~ /^\\s+RECT/;\n            }\n            next;\n        }\n    }\n    print; $i++\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 10832183, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kD20NGeCfZk/AAAAAAAAAAI/AAAAAAAAA7k/kGxShDPYhwQ/photo.jpg?sz=128", "display_name": "Rohith Prasad K M", "link": "https://stackoverflow.com/users/10832183/rohith-prasad-k-m"}, "edited": false, "score": 0, "creation_date": 1545897529, "post_id": 53932965, "comment_id": 94722326, "body": "Thank you @bytepusher. your script really works and i have and other issue that is will i be able to perform the same if i have multiple PIN.  for example in the above i have just one that is PIN W[2]. what is o have PIN W[3] , PIN A[2] ..etc and same LAYERS are present below the PIN."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "reply_to_user": {"reputation": 27, "user_id": 10832183, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kD20NGeCfZk/AAAAAAAAAAI/AAAAAAAAA7k/kGxShDPYhwQ/photo.jpg?sz=128", "display_name": "Rohith Prasad K M", "link": "https://stackoverflow.com/users/10832183/rohith-prasad-k-m"}, "edited": false, "score": 0, "creation_date": 1545923429, "post_id": 53932965, "comment_id": 94732570, "body": "you&#39;re welcome. Thanks for accepting. It sounds like you have a very similar problem. So that is the perfect opportunity to learn, by adapting the method I&#39;ve used here or Hakon has used below to your other needs. Feel free to post another question if you&#39;re stuck, but please do really post some code then. Good luck!"}], "tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": true, "score": 2, "last_activity_date": 1545832100, "creation_date": 1545832100, "answer_id": 53932965, "question_id": 53923755, "link": "https://stackoverflow.com/questions/53923755/perl-script-for-removing-the-characters-and-lines-below-it/53932965#53932965", "title": "perl script for removing the characters and lines below it", "body": "<p>I find it easier to not step through the file twice,\nand line numbers tend to confuse me, so I've decided to post my take on it.</p>\n\n<p>Good luck and feel free to comment any improvements to edit in! </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nopen my $fh, '&lt;', 'input.txt' or die \"Cannot open file &lt; '$input_fn': $!\";\n\nmy %layers;\n\nmy $layer_number;\n\nmy ( $begin_block, $end_block );\n\nwhile ( my $line = &lt;$fh&gt; ){\n\n    if ( $line =~ /^[\\s\\t]*LAYER\\s+M([0-9]+)/ ){\n        $layer_number = $1;\n    }\n\n    # layer number not set: Add to begin block\n    unless ( $layer_number ){\n        $begin_block .= $line;\n        next;\n    }\n\n    # END: no further layers. Just slurp it and done.\n    if ( $line =~ /END/ ){\n        my $slurped_end = do{ local $/; &lt;$fh&gt;; };\n        $end_block = $line . $slurped_end;\n        last;\n    }\n\n    # store line for this block\n    $layers{ $layer_number } .= $line;\n}\n\nclose $fh;\n\n# find highest block, reassemble and print\nmy $highest_block_number = ( sort{ $a &lt;=&gt; $b } keys %layers )[-1];\n\nprint $begin_block . $layers{ $highest_block_number } . $end_block;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10832183, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kD20NGeCfZk/AAAAAAAAAAI/AAAAAAAAA7k/kGxShDPYhwQ/photo.jpg?sz=128", "display_name": "Rohith Prasad K M", "link": "https://stackoverflow.com/users/10832183/rohith-prasad-k-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53932965, "answer_count": 2, "score": 1, "last_activity_date": 1545832100, "creation_date": 1545752962, "last_edit_date": 1545753159, "question_id": 53923755, "link": "https://stackoverflow.com/questions/53923755/perl-script-for-removing-the-characters-and-lines-below-it", "title": "perl script for removing the characters and lines below it", "body": "<pre><code>PIN W[2]\nDIRECTION INPUT ;\nUSE SIGNAL ;\nPORT\nLAYER M5\n        RECT 0.115 0.59 0.175 1.22 ;\n        RECT 0.06 0.98 0.175 1.22 ;\n        RECT 0.335 1.16 0.395 1.44 ;\n        RECT 0.51 0.57 0.63 0.65 ;\nLAYER M3\n        RECT 0.115 0.59 0.175 1.22 ;\n        RECT 0.06 0.98 0.175 1.22 ;\n        RECT 0.335 1.16 0.395 1.44 ;\n        RECT 0.51 0.57 0.63 0.65 ;\nLAYER M1\n        RECT 0.115 0.59 0.175 1.22 ;\n        RECT 0.06 0.98 0.175 1.22 ;\n        RECT 0.335 1.16 0.395 1.44 ;\n        RECT 0.51 0.57 0.63 0.65 ;\nLAYER M6\n        RECT 0.115 0.59 0.175 1.22 ;\n        RECT 0.06 0.98 0.175 1.22 ;\n        RECT 0.335 1.16 0.395 1.44 ;\n        RECT 0.51 0.57 0.63 0.65 ;\nEND\nEND W[2]\n</code></pre>\n\n<p>What I wanted is to search for the number starting with LAYER M (having greatest number in the above) and print only the lines starting with RECT below it. Please refer the below snippet for how the required lines should look like.</p>\n\n<p></p>\n\n<pre><code>PIN W[2]\nDIRECTION INPUT ;\nUSE SIGNAL ;\nPORT\nLAYER M6\n        RECT 0.115 0.59 0.175 1.22 ;\n        RECT 0.06 0.98 0.175 1.22 ;\n        RECT 0.335 1.16 0.395 1.44 ;\n        RECT 0.51 0.57 0.63 0.65 ;\nEND\nEND W[2]\n</code></pre>\n\n\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1545726339, "post_id": 53919870, "comment_id": 94683403, "body": "Please <a href=\"https://stackoverflow.com/posts/53919870/edit\">edit</a> your post and reduce the program to something smaller. Leave in only one of the queries that is failing, and try to find out <i>where</i> exactly your program goes off the rails. Most likely you can <code>print</code> the progress in strategic locations to see where your program is. Maybe it just doesn&#39;t find any email in the results? Have you inspected what is in <code>my $efetch_out = LWP::UserAgent-&gt;new(timeout =&gt; 30)-&gt;get($efetch_url);</code> ? It certainly isn&#39;t a string containing the web page."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1545731903, "post_id": 53919870, "comment_id": 94684522, "body": "Also review <a href=\"https://stackoverflow.com/questions/53916945/get-request-in-perl-and-use-of-uninitialized-value\" title=\"get request in perl and use of uninitialized value\">stackoverflow.com/questions/53916945/&hellip;</a> , which you also posted and which has a reply with working code."}, {"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "edited": false, "score": 0, "creation_date": 1545732730, "post_id": 53919870, "comment_id": 94684674, "body": "Not answering your question, but your inner for loop does not change the url from iteration to iteration."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1545746221, "post_id": 53919870, "comment_id": 94687708, "body": "$web is a variable in the url, so the url should change. I would suggest running perlcritic ( level 5 at least ) on this script to detect some issues, then refactoring some functionality into methods to make it readable. This could be written much nicer using objects, but functions would already help"}], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 0, "last_activity_date": 1545760782, "creation_date": 1545760782, "answer_id": 53924527, "question_id": 53919870, "link": "https://stackoverflow.com/questions/53919870/perl-script-to-parse-data-from-pubmed-not-returning-data/53924527#53924527", "title": "perl script to parse data from pubmed not returning data", "body": "<p>This script could do with some refactoring, so one can actually debug and maintain it. </p>\n\n<p>Probably using an object oriented approach would help greatly,\nfor me, regexing the <code>@queries</code> declaration into a proper list declaration, and clearing out some cruft, renaming variables to what they actually do instead of commenting ( retmax -> batch_size ? ) seem like obvious low hanging fruit.</p>\n\n<p>Handling errors would be next on my list ( what happens if there are no query parameters found? The script continues despite a count of 0 / none found, such behavior is confusing when debugging )</p>\n\n<p>I have not done this for you, and I am also not sure whether a web scraper for emails is actually a great thing to have, but that aside:</p>\n\n<p>If you change the line you commented out <code>#print \"$_\\n\" for @matches;</code> to <code>print \"no emails found for query '$query'\\n\" unless @matches;</code> you will see clearly why the script does not do what you want. </p>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": false, "score": 0, "last_activity_date": 1545851449, "creation_date": 1545851449, "answer_id": 53936149, "question_id": 53919870, "link": "https://stackoverflow.com/questions/53919870/perl-script-to-parse-data-from-pubmed-not-returning-data/53936149#53936149", "title": "perl script to parse data from pubmed not returning data", "body": "<p>Without running the code myself, I would speculate that the <code>@matches</code> array in the code is empty. Try un-commenting the print statement to verify whether or not <code>@match</code> is being assigned as expected, and work backward or forward from there to narrow down which statement(s) are not doing what they are expected to.</p>\n\n<pre><code>my @matches = $efetch_out =~ m(&lt;Affiliation&gt;(.*)&lt;/Affiliation&gt;)g;\n#print \"$_\\n\" for @matches;\n</code></pre>\n\n<p>That being said, ideally this code should be completely rewritten in a less procedural style for maintainability.</p>\n"}], "owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1545851449, "creation_date": 1545718943, "question_id": 53919870, "link": "https://stackoverflow.com/questions/53919870/perl-script-to-parse-data-from-pubmed-not-returning-data", "title": "perl script to parse data from pubmed not returning data", "body": "<p>I am very new to perl and this is my first time using any perl script. I have a script to parse emailIDs from pubmed </p>\n\n<pre><code>#!/usr/bin/perl -w\n# A perlscript written by Joseph Hughes, University of Glasgow\n# use this perl script to parse the email addressed from the affiliations in PubMed\n\nuse strict;\n#use LWP::Simple;\nuse LWP::Protocol::https;\nuse LWP::UserAgent;\n\n\nmy ($query,@queries);\n#Query the Journal of Virology from 2014 until the present (use 3000)\n$query = 'journal+of+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Journal of General Virology\n$query = 'journal+of+general+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Virology\n$query = 'virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Archives of Virology\n$query = 'archives+of+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Virus Research\n$query = 'virus+research[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Antiviral Research\n$query = 'antiviral+research[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Viruses\n$query = 'viruses[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Journal of Medical Virology\n$query = 'journal+of+medical+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\n\n# global variables\npush(@queries,$query);\nmy %emails;\nmy $emailcnt=0;\nmy $count=1;\n#assemble the esearch URL\nforeach my $query (@queries){\n  my $base = 'http://eutils.ncbi.nlm.nih.gov/entrez/eutils/';\n  my $url = $base . \"esearch.fcgi?db=pubmed&amp;term=$query&amp;usehistory=y\";\n  #my $url = \"http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&amp;term=journal+of+medical+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]&amp;usehistory=y\";\n  print \"\\n before url \\n\";\n  print $url;\n  #post the esearch URL\n  #my $output = get($url);\n  my $ua = LWP::UserAgent-&gt;new(timeout =&gt; 30);\n  $ua-&gt;ssl_opts( verify_hostname =&gt; 0 );\n  my $response = $ua-&gt;get($url);\n  print \"before response\";\n  print $response;\n  unless ($response-&gt;is_success) {\n  # the Client-Warning, Client-Aborted, and X-Died headers each may be set on client/transport errors\n  die $response-&gt;status_line;\n  }\nmy $output = $response-&gt;decoded_content;\n  print \"\\n before output \\n\";\n  print $output;\n  #parse WebEnv, QueryKey and Count (# records retrieved)\n  my $web = $1 if ($output =~ /&lt;WebEnv&gt;(\\S+)&lt;\\/WebEnv&gt;/);\n  my $key = $1 if ($output =~ /&lt;QueryKey&gt;(\\d+)&lt;\\/QueryKey&gt;/);\n  my $count = $1 if ($output =~ /&lt;Count&gt;(\\d+)&lt;\\/Count&gt;/);\n\n  #retrieve data in batches of 500\n  my $retmax = 500;\n  for (my $retstart = 0; $retstart &lt; $count; $retstart += $retmax) {\n    my $efetch_url = $base .\"efetch.fcgi?db=pubmed&amp;WebEnv=$web\";\n    $efetch_url .= \"&amp;query_key=$key&amp;retmode=xml\";\n    my $efetch_out = LWP::UserAgent-&gt;new(timeout =&gt; 30)-&gt;get($efetch_url);\n    my @matches = $efetch_out =~ m(&lt;Affiliation&gt;(.*)&lt;/Affiliation&gt;)g;\n    #print \"$_\\n\" for @matches;\n    for my $match (@matches){\n      if ($match=~/\\s([a-zA-Z0-9\\.\\_\\-]+\\@[a-zA-Z0-9\\.\\_\\-]+)$/){\n        my $email=$1;\n        $email=~s/\\.$//;\n        $emails{$email}++;\n      }     \n    }\n  }\n  my $cnt= keys %emails;\n  print \"$query\\n$cnt\\n\";\n}\n\nprint \"Total number of emails: \";\nmy $cnt= keys %emails;\nprint \"$cnt\\n\";\nmy @email = keys %emails;\nmy @VAR;\npush @VAR, [ splice @email, 0, 100 ] while @email;\n\nmy $batch=100;\nforeach my $VAR (@VAR){\n    open(OUT, \"&gt;Set_$batch\\.txt\") || die \"Can't open file!\\n\";\n    print OUT join(\",\",@$VAR);\n    close OUT;\n    $batch=$batch+100;\n}    \n</code></pre>\n\n<p>This is running fine but after running it, I am getting <code>Total number of emails: 0</code> which I am pretty sure is not actually the case.</p>\n\n<p>Do we know what is going on here? I can see results like this</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE eSearchResult PUBLIC \"-//NLM//DTD esearch 20060628//EN\" \"https://eutils.ncbi.nlm.nih.gov/eutils/dtd/20060628/esearch.dtd\"&gt;\n&lt;eSearchResult&gt;&lt;Count&gt;1552&lt;/Count&gt;&lt;RetMax&gt;20&lt;/RetMax&gt;&lt;RetStart&gt;0&lt;/RetStart&gt;&lt;QueryKey&gt;1&lt;/QueryKey&gt;&lt;WebEnv&gt;NCID_1_108762718_130.14.18.34_9001_1545718459_2017377343_0MetA0_S_MegaStore&lt;/WebEnv&gt;&lt;IdList&gt;\n&lt;Id&gt;30578684&lt;/Id&gt;\n&lt;Id&gt;30578670&lt;/Id&gt;\n&lt;Id&gt;30575982&lt;/Id&gt;\n&lt;Id&gt;30570784&lt;/Id&gt;\n&lt;Id&gt;30570771&lt;/Id&gt;\n&lt;Id&gt;30570770&lt;/Id&gt;\n&lt;Id&gt;30570759&lt;/Id&gt;\n&lt;Id&gt;30570750&lt;/Id&gt;\n&lt;Id&gt;30560545&lt;/Id&gt;\n&lt;Id&gt;30552705&lt;/Id&gt;\n&lt;Id&gt;30549048&lt;/Id&gt;\n&lt;Id&gt;30548936&lt;/Id&gt;\n&lt;Id&gt;30548642&lt;/Id&gt;\n&lt;Id&gt;30537228&lt;/Id&gt;\n&lt;Id&gt;30537157&lt;/Id&gt;\n&lt;Id&gt;30516836&lt;/Id&gt;\n&lt;Id&gt;30515847&lt;/Id&gt;\n&lt;Id&gt;30512182&lt;/Id&gt;\n&lt;Id&gt;30512180&lt;/Id&gt;\n&lt;Id&gt;30489644&lt;/Id&gt;\n</code></pre>\n\n<p>after the get request has run</p>\n\n<p>Source of script: <a href=\"https://gist.github.com/josephhughes/8e5d32dcd808a51c008f\" rel=\"nofollow noreferrer\">Script link on github</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1545679091, "post_id": 53916945, "comment_id": 94676857, "body": "Please <a href=\"https://stackoverflow.com/posts/53916945/edit\">edit</a> your question and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I have no idea what that <code>get</code> sub does."}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1545679415, "post_id": 53916945, "comment_id": 94676932, "body": "@Robert Updated with entire code snippet"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1545679682, "post_id": 53916945, "comment_id": 94676990, "body": "I didn&#39;t ask for the complete code, I asked for a <i>minimal</i> example that shows the problem."}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1545679903, "post_id": 53916945, "comment_id": 94677040, "body": "@Robert: I got the code from <a href=\"https://gist.github.com/josephhughes/8e5d32dcd808a51c008f\" rel=\"nofollow noreferrer\">gist.github.com/josephhughes/8e5d32dcd808a51c008f</a> . As I mentioned I have not used perl before, I safely assumed get was a perl provided native function. Only use statements that I have so far in the script are :use strict; use LWP::Simple;&quot; as in the snipped shared"}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1545679925, "post_id": 53916945, "comment_id": 94677043, "body": "@GMB...........Please check my last comment"}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1545680209, "post_id": 53916945, "comment_id": 94677112, "body": "I just googled and found get is coming from use LWP::Simple;"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1545702035, "post_id": 53916945, "comment_id": 94680229, "body": "note that the most common underlying problem is no https support, which can be fixed by installing LWP::Protocol::https and its dependencies"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545698144, "post_id": 53917972, "comment_id": 94679889, "body": "You changed the words, but it still says the same wrong thing. Again, there is no issue preventing the handling of errors. All one needs is <code>unless (defined($got))</code> instead of <code>unless ($response-&gt;is_success)</code>. The problem is only the lack of information about what error occurred."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545698245, "post_id": 53917972, "comment_id": 94679900, "body": "&quot;I recommend against using LWP::Simple for any reason because it is impossible to configure it, and because it doesn&#39;t provide useful error messages. LWP::Simple is simply a wrapper for LWP::UserAgent, which is really just as simple to use directly anyway.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545698402, "post_id": 53917972, "comment_id": 94679920, "body": "Also, you should avoid using <code>-E</code> in code you recommend because <code>-E</code> isn&#39;t forward-compatible. You can use <code>CORE::say</code> without <code>-E</code>."}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1545717961, "post_id": 53917972, "comment_id": 94681874, "body": "Thanks but I am getting &quot;500 Can&#39;t verify SSL peers without knowing which Certificate Authorities to trust at line 56&quot;"}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1545718540, "post_id": 53917972, "comment_id": 94681971, "body": "I did   $ua-&gt;ssl_opts( verify_hostname =&gt; 0 ); to fix it. Thanks :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1545763022, "post_id": 53917972, "comment_id": 94691043, "body": "@Simran kaur, That&#39;s like getting a nice alarm system, but never turning it on. Don&#39;t trust strangers on the internet; adjust who you trust (e.g. using Mozilla::CA?)."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1545697808, "last_edit_date": 1545697808, "creation_date": 1545688838, "answer_id": 53917972, "question_id": 53916945, "link": "https://stackoverflow.com/questions/53916945/get-request-in-perl-and-use-of-uninitialized-value/53917972#53917972", "title": "get request in perl and Use of uninitialized value", "body": "<p>I recommend against using LWP::Simple for any reason because it is impossible to configure it or handle errors usefully. Using <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> which it wraps is nearly as simple anyway (though the error handling is a bit complicated). The below examples would replace the <code>use LWP::Simple;</code> and <code>my $output = get($url);</code> lines.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nmy $ua = LWP::UserAgent-&gt;new(timeout =&gt; 30);\nmy $response = $ua-&gt;get($url);\nunless ($response-&gt;is_success) {\n  # the Client-Warning, Client-Aborted, and X-Died headers each may be set on client/transport errors\n  die $response-&gt;status_line;\n}\nmy $output = $response-&gt;decoded_content;\n</code></pre>\n\n<p>The core <a href=\"https://perldoc.pl/HTTP::Tiny\" rel=\"nofollow noreferrer\">HTTP::Tiny</a> is also simple.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse HTTP::Tiny;\nmy $ua = HTTP::Tiny-&gt;new;\nmy $response = $ua-&gt;get($url);\nunless ($response-&gt;{success}) {\n  die $response-&gt;{status} == 599 ? $response-&gt;{content} : \"$response-&gt;{status} $response-&gt;{reason}\";\n}\nmy $output = $response-&gt;{content};\n</code></pre>\n\n<p>If you really want an LWP::Simple approach that will at least report transport errors, try <a href=\"https://metacpan.org/pod/ojo\" rel=\"nofollow noreferrer\">ojo</a> from Mojolicious:</p>\n\n<pre><code>perl -Mojo -E'say g(shift)-&gt;text' http://example.com\n</code></pre>\n\n<p>In a script rather than a oneliner, you can use <a href=\"https://metacpan.org/pod/Mojo::UserAgent\" rel=\"nofollow noreferrer\">Mojo::UserAgent</a> directly, and also handle HTTP errors like above:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::UserAgent;\nmy $ua = Mojo::UserAgent-&gt;new;\nmy $response = $ua-&gt;get($url)-&gt;result;\nunless ($response-&gt;is_success) {\n  die $response-&gt;code . ' ' . $response-&gt;message;\n}\nmy $output = $response-&gt;text;\n</code></pre>\n"}], "owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 53917972, "answer_count": 1, "score": 1, "last_activity_date": 1545697808, "creation_date": 1545678312, "last_edit_date": 1545679402, "question_id": 53916945, "link": "https://stackoverflow.com/questions/53916945/get-request-in-perl-and-use-of-uninitialized-value", "title": "get request in perl and Use of uninitialized value", "body": "<pre><code>my $url = \"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&amp;term=journal+of+medical+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]&amp;usehistory=y\";\n  print \"\\n before url \\n\";\n  print $url;\n  #post the esearch URL\n  my $output = get($url);\n  print $output;\n</code></pre>\n\n<p>I have not used perl ever before.</p>\n\n<p>If I hit this URL in browser, I do get the XML.\nHowever, From what I see in output from script, <code>$output</code> is empty and   </p>\n\n<pre><code>print $output;\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>Use of uninitialized value in print at ./extractEmails.pl line 48.\n</code></pre>\n\n<p>Please suggest what's wrong and how to fix it</p>\n\n<p>Edit:</p>\n\n<p>As suggested, complete code:</p>\n\n<pre><code>#!/usr/bin/perl -w\n# A perlscript written by Joseph Hughes, University of Glasgow\n# use this perl script to parse the email addressed from the affiliations in PubMed\n\nuse strict;\nuse LWP::Simple;\n\nmy ($query,@queries);\n#Query the Journal of Virology from 2014 until the present (use 3000)\n$query = 'journal+of+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Journal of General Virology\n$query = 'journal+of+general+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Virology\n$query = 'virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Archives of Virology\n$query = 'archives+of+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Virus Research\n$query = 'virus+research[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Antiviral Research\n$query = 'antiviral+research[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Viruses\n$query = 'viruses[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\npush(@queries,$query);\n#Journal of Medical Virology\n$query = 'journal+of+medical+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]';\n\n# global variables\npush(@queries,$query);\nmy %emails;\nmy $emailcnt=0;\nmy $count=1;\n#assemble the esearch URL\nforeach my $query (@queries){\n  my $base = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/';\n  #my $url = $base . \"esearch.fcgi?db=pubmed&amp;term=$query&amp;usehistory=y\";\n  my $url = \"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&amp;term=journal+of+medical+virology[journal]+AND+2014[Date+-+Publication]:3000[Date+-+Publication]&amp;usehistory=y\";\n  print \"\\n before url \\n\";\n  print $url;\n  #post the esearch URL\n  my $output = get($url);\n  print \"\\n before output \\n\";\n  print get($url);\n  print $output;\n  #parse WebEnv, QueryKey and Count (# records retrieved)\n  my $web = $1 if ($output =~ /&lt;WebEnv&gt;(\\S+)&lt;\\/WebEnv&gt;/);\n  my $key = $1 if ($output =~ /&lt;QueryKey&gt;(\\d+)&lt;\\/QueryKey&gt;/);\n  my $count = $1 if ($output =~ /&lt;Count&gt;(\\d+)&lt;\\/Count&gt;/);\n\n  #retrieve data in batches of 500\n  my $retmax = 500;\n  for (my $retstart = 0; $retstart &lt; $count; $retstart += $retmax) {\n    my $efetch_url = $base .\"efetch.fcgi?db=pubmed&amp;WebEnv=$web\";\n    $efetch_url .= \"&amp;query_key=$key&amp;retmode=xml\";\n    my $efetch_out = get($efetch_url);\n    my @matches = $efetch_out =~ m(&lt;Affiliation&gt;(.*)&lt;/Affiliation&gt;)g;\n    #print \"$_\\n\" for @matches;\n    for my $match (@matches){\n      if ($match=~/\\s([a-zA-Z0-9\\.\\_\\-]+\\@[a-zA-Z0-9\\.\\_\\-]+)$/){\n        my $email=$1;\n        $email=~s/\\.$//;\n        $emails{$email}++;\n      }     \n    }\n  }\n  my $cnt= keys %emails;\n  print \"$query\\n$cnt\\n\";\n}\n\nprint \"Total number of emails: \";\nmy $cnt= keys %emails;\nprint \"$cnt\\n\";\nmy @email = keys %emails;\nmy @VAR;\npush @VAR, [ splice @email, 0, 100 ] while @email;\n\nmy $batch=100;\nforeach my $VAR (@VAR){\n    open(OUT, \"&gt;Set_$batch\\.txt\") || die \"Can't open file!\\n\";\n    print OUT join(\",\",@$VAR);\n    close OUT;\n    $batch=$batch+100;\n}    \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 1, "creation_date": 1545660002, "post_id": 53914055, "comment_id": 94671950, "body": "Does the directory <code>&#47;home&#47;user123</code> exists?"}, {"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "reply_to_user": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 0, "creation_date": 1545660197, "post_id": 53914055, "comment_id": 94672010, "body": "It does not. Is <code>undef</code> the correct return value in this case?"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 1, "creation_date": 1545660299, "post_id": 53914055, "comment_id": 94672038, "body": "It should work without the trailing slash."}, {"owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1545660694, "post_id": 53914055, "comment_id": 94672147, "body": "@sidyll: not quite. if the directory itself does not exist, it will work without the trailing slash, but will not work with it. If the directory is a sub directory of a directory that does not exist, it will not work with or without a slash. if the directory actually exists, it will work both with and without a trailing slash"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1545680499, "post_id": 53914055, "comment_id": 94677169, "body": "@sidyll Curiously, I also get it to behave differently w/ or w/o the trailing slash. However, the module works with the filesystem and for all I know it doesn&#39;t make sense using it on non-existing paths. (In my mind the dependence on the slash only underscores this.)"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545689668, "post_id": 53916761, "comment_id": 94678866, "body": "To add, Cwd::abs_path also has other non-portable behavior when given nonexistent paths. For instance on Windows it sometimes just dies. On IRC some said its behavior additionally differs between Linux, BSD and OS X, and it&#39;s perhaps due to the underlying <code>realpath</code> system call."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1545680354, "last_edit_date": 1545680354, "creation_date": 1545676447, "answer_id": 53916761, "question_id": 53914055, "link": "https://stackoverflow.com/questions/53914055/cwdabs-path-returns-undef/53916761#53916761", "title": "Cwd::abs_path() returns undef", "body": "<p>The <code>Cwd</code> does use the filesystem so you shouldn't ask it to work with non-existent paths.  </p>\n\n<p>I've confirmed the observation that it does in fact give me back a path with a non-existent directory if it is in the directory which does exist (and has no trailing slash!), otherwise not. However, this doesn't mean much as the module's purpose is to work with existing paths.</p>\n\n<p>To work with file names in general, for which files need not exist, use the core <a href=\"http://perldoc.perl.org/File/Spec.html\" rel=\"nofollow noreferrer\">File::Spec</a></p>\n\n<pre><code>perl -MCwd=abs_path -MFile::Spec=rel2abs -wE'\n    say abs_path(\".\");\n    say abs_path(\"./no/such\") // \"undef\";\n    say File::Spec-&gt;rel2abs(\"./no/such\")\n'\n</code></pre>\n\n<p>This prints</p>\n\n<pre>\n/home/my-user-name\nundef\n/home/my-user-name/no/such\n</pre>\n\n<p>The trailing slashes don't affect (meaningful) operations of either modules.</p>\n\n<p>Another useful tool is <a href=\"https://metacpan.org/pod/Path::Tiny#absolute\" rel=\"nofollow noreferrer\">Path::Tiny</a>, with many methods for a variety of work with existing and non-existing paths.  </p>\n"}], "owner": {"reputation": 1799, "user_id": 3618854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45e8563fab07e0c27d82e18d8ba9aa8e?s=128&d=identicon&r=PG&f=1", "display_name": "Yakov Dan", "link": "https://stackoverflow.com/users/3618854/yakov-dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1264, "favorite_count": 0, "accepted_answer_id": 53916761, "answer_count": 1, "score": 3, "last_activity_date": 1545680354, "creation_date": 1545657817, "last_edit_date": 1545661625, "question_id": 53914055, "link": "https://stackoverflow.com/questions/53914055/cwdabs-path-returns-undef", "title": "Cwd::abs_path() returns undef", "body": "<p>I have an issue with using <code>abs_path()</code>. I give this function a valid path, but I get <code>undef</code> as a return value. The path is read from the command line using the following code.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Data::Dumper;\nuse Cwd qw();\n\nprint scalar @ARGV;\nprint \"\\n\";\n\nprint \"$ARGV[0]\\n\";\nprint \"$ARGV[1]\\n\";\nprint \"$ARGV[2]\\n\";\nmy $val = $ARGV[2];\nprint \"$val\\n\";\nmy $result = \"\";\n$result = Cwd::abs_path($val);\nprint \"$result\\n\";\n</code></pre>\n\n<p>The perl script is executed as follows:</p>\n\n<pre><code>perl pl_test.pl -results_dir = /home/user123/\n</code></pre>\n\n<p>I get the following result:</p>\n\n<pre><code>3\n-results_dir\n=\n/home/user123/\n/home/user123/\nUse of uninitialized value in concatenation (.) or string at pl_test.pl line 16.\n</code></pre>\n\n<p>I have verified using the debugger that the issue is that $result gets <code>undef</code> as return value from <code>Cwd::abs_path($val);</code>. I don't understand why this happens</p>\n\n<p>One of the comments prompted me to do some further testing. What I found is that there is a dependency on a trailing slash, in the following manner:</p>\n\n<ol>\n<li><p>if the directory does not exist: works without a trailing slash, returns <code>undef</code> with a trailing slash.</p></li>\n<li><p>if the directory is a sub directory of a directory that does not exist, always returns <code>undef</code></p></li>\n<li><p>if the directory exists, will work in both cases, with or without a trailing slash</p></li>\n</ol>\n"}, {"tags": ["perl", "unicode"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 8, "last_activity_date": 1545638199, "last_edit_date": 1545638199, "creation_date": 1545637680, "answer_id": 53910636, "question_id": 53910434, "link": "https://stackoverflow.com/questions/53910434/perl-specify-unicode-character-by-name-without-putting-name-in-all-caps/53910636#53910636", "title": "perl specify unicode character by name without putting name in all caps", "body": "<p>Quote <a href=\"https://metacpan.org/pod/charnames\" rel=\"noreferrer\">charnames</a>,</p>\n\n<blockquote>\n  <p>Starting in Perl v5.16, any occurrence of <code>\\N{</code><em><code>CHARNAME</code></em><code>}</code> sequences in a double-quotish string automatically loads this module with arguments <code>:full</code> and <code>:short</code> (described below) if it hasn't already been loaded with different arguments</p>\n</blockquote>\n\n<p>On of those \"different arguments\" requests the use of loose matching.</p>\n\n<pre><code>$ perl -CSD -e'\n   use charnames \":loose\";\n   CORE::say \"\\N{Greek Small Letter Alpha}\";\n'\n\u03b1\n</code></pre>\n\n<blockquote>\n  <p>LOOSE MATCHES</p>\n  \n  <p>By specifying <code>:loose</code>, Unicode's <a href=\"http://www.unicode.org/reports/tr44#Matching_Rules\" rel=\"noreferrer\">loose character name matching</a> rules are selected instead of the strict exact match used otherwise. That means that <em>CHARNAME</em> doesn't have to be so precisely specified. Upper/lower case doesn't matter (except with scripts as mentioned above), nor do any underscores, and the only hyphens that matter are those at the beginning or end of a word in the name (with one exception: the hyphen in U+1180 <code>HANGUL JUNGSEONG O-E</code> does matter). Also, blanks not adjacent to hyphens don't matter. The official Unicode names are quite variable as to where they use hyphens versus spaces to separate word-like units, and this option allows you to not have to care as much. The reason non-medial hyphens matter is because of cases like U+0F60 <code>TIBETAN LETTER -A</code> versus U+0F68 <code>TIBETAN LETTER A</code>. The hyphen here is significant, as is the space before it, and so both must be included.</p>\n  \n  <p><code>:loose</code> slows down look-ups by a factor of 2 to 3 versus <code>:full</code>, but the trade-off may be worth it to you. Each individual look-up takes very little time, and the results are cached, so the speed difference would become a factor only in programs that do look-ups of many different spellings, and probably only when those look-ups are through <code>vianame()</code> and <code>string_vianame()</code>, since <code>\\N{...}</code> look-ups are done at compile time.</p>\n</blockquote>\n\n<p>The module also provides the means for creating custom aliases.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 53910636, "answer_count": 1, "score": 2, "last_activity_date": 1545638199, "creation_date": 1545636343, "last_edit_date": 1545636994, "question_id": 53910434, "link": "https://stackoverflow.com/questions/53910434/perl-specify-unicode-character-by-name-without-putting-name-in-all-caps", "title": "perl specify unicode character by name without putting name in all caps", "body": "<p>So, this is sort of a cosmetic point, but is there an easy way to insert a unicode character by its name inside a Perl string and give the name \"normal\" casing?</p>\n\n<p>Perl includes unicode literals that look up code points by name, as in the following:</p>\n\n<pre><code>\"\\N{GREEK SMALL LETTER ALPHA}\"\n</code></pre>\n\n<p>I find something like the following easier to read:</p>\n\n<pre><code>  \"\\N{Greek Small Letter Alpha}\",\n</code></pre>\n\n<p>As far as I know there are no case minimal pairs when it comes to unicode character names. Is there a concise way to name the character that still triggers a <code>compilation error</code> very early in the  process of executing a script if the character doesn't exist?</p>\n\n<p>example compilation error with intentionally misspelled character name, this is the kind of check I don't want to give up.</p>\n\n<pre><code>$ echo '%[a]' | ./unicodify \nUnknown charname 'GREK SMALL LETTER ALPHA' at ./unicodify line 10, within string\n\nExecution of ./unicodify aborted due to compilation errors.\n</code></pre>\n\n<p>I'm trying to write a small utility to make it easier to enter unicode characters in text files by mnemonic names delimited by <code>%[</code> and <code>]</code>.</p>\n\n<p>Here's an extremely stripped down example that just replaces <code>%[a]</code> and <code>%[b]</code>.</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse utf8;\nuse open ':std' =&gt; ':utf8';\n\nmy %abbrevs = (\n  'a' =&gt; \"\\N{GREEK SMALL LETTER ALPHA}\",\n  'b' =&gt; \"\\N{GREEK SMALL LETTER BETA}\",\n);\n\nwhile (&lt;&gt;) {\n  chomp;\n  my $line = $_;\n  $line =~ s/(\\%\\[(.*?)\\])/$abbrevs{$2}/g;\n  print \"${line}\\n\";\n}\n</code></pre>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 923, "user_id": 7727546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe3d80f5c8283fb372c4f3aec775df8?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Krupp", "link": "https://stackoverflow.com/users/7727546/benjamin-krupp"}, "edited": false, "score": 0, "creation_date": 1545604652, "post_id": 53907645, "comment_id": 94659838, "body": "Thanks for the answer! I don&#39;t want to filter the strings but to remove the &#39;hello&#39; fragments."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 923, "user_id": 7727546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe3d80f5c8283fb372c4f3aec775df8?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Krupp", "link": "https://stackoverflow.com/users/7727546/benjamin-krupp"}, "edited": false, "score": 0, "creation_date": 1545604821, "post_id": 53907645, "comment_id": 94659875, "body": "@BenjaminKrupp: Edited."}, {"owner": {"reputation": 60135, "user_id": 836330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47fd5f542a64b8b2dac00112a4829de8?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/836330/mark"}, "edited": false, "score": 0, "creation_date": 1545606153, "post_id": 53907645, "comment_id": 94660118, "body": "Can it end with just an &quot;h&quot; or &quot;helo&quot; or &quot;heo&quot;, etc. ?  Then does  this regex work?"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1545606373, "post_id": 53907645, "comment_id": 94660161, "body": "As I understood the desire, it was <code>he[letters that look like hello]*</code> so the mark is <code>\\h</code> + <code>he</code>."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1545609248, "last_edit_date": 1545609248, "creation_date": 1545604300, "answer_id": 53907645, "question_id": 53907595, "link": "https://stackoverflow.com/questions/53907595/remove-word-from-the-end-of-a-string-that-has-been-cut-off-to-different-lengths/53907645#53907645", "title": "Remove word from the end of a string that has been cut off to different lengths", "body": "<p>If you want to remove the fragments of starting with <code>he</code> with that being an optional fragment:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.020;\nuse strict;\nuse warnings;\n\nmy @strings =\n(\n    \"Test 1 hello\",\n    \"Something else\",\n    \"Test 2 hell\",\n    \"And also he\",\n    \"Test 4 hel\"\n);\n\nfor (@strings){\n    s/\\hhe[lo]*$//;\n    say;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Test 1\nSomething else\nTest 2\nAnd also\nTest 4\n</code></pre>\n\n<p>Or, you can match and keep what you want:</p>\n\n<pre><code>for (@strings){\n    say $1 if /^(.*?)(?:\\hhe[lo]*)?$/;\n}\n# same output\n</code></pre>\n\n<p>If you want to make sure that the captured text matches the characters <code>hello</code> in that order, match the captured substring:</p>\n\n<pre><code>for (@strings){\n    say if /^(.*?)( he[lo]*)?$/ &amp;&amp; (!$2 || ' hello' =~ /^$2/);\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 1, "last_activity_date": 1545611079, "last_edit_date": 1545611079, "creation_date": 1545610441, "answer_id": 53908141, "question_id": 53907595, "link": "https://stackoverflow.com/questions/53907595/remove-word-from-the-end-of-a-string-that-has-been-cut-off-to-different-lengths/53908141#53908141", "title": "Remove word from the end of a string that has been cut off to different lengths", "body": "<p>You are looking for a regexp to match following expressions <em>at end of a string</em> : <code>hello</code>, <code>hell</code>, <code>hel</code>, <code>he</code>, <code>h</code>. We can expect that the expression is preceeded by at least once space.</p>\n\n<p>You could just write :</p>\n\n<pre><code>s/\\s+(hello$)|(hell$)|(hel$)|(he$)|(h$)// for @strings;\n</code></pre>\n\n<p>This will modify in-place all elements in the array to what you expect.</p>\n\n<p>I needed, you can generate the match string automatically for any given word :</p>\n\n<pre><code>my $word  = \"hello\";\nmy @parts = map { substr $word, 0, $_ } (1..(length $word));\nmy $match = join \"|\", map { \"(\" . $_ . \"\\$)\" } @words;\ns/\\s+$match// for @strings;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 923, "user_id": 7727546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe3d80f5c8283fb372c4f3aec775df8?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Krupp", "link": "https://stackoverflow.com/users/7727546/benjamin-krupp"}, "is_accepted": false, "score": 1, "last_activity_date": 1545612589, "last_edit_date": 1545612589, "creation_date": 1545610798, "answer_id": 53908164, "question_id": 53907595, "link": "https://stackoverflow.com/questions/53907595/remove-word-from-the-end-of-a-string-that-has-been-cut-off-to-different-lengths/53908164#53908164", "title": "Remove word from the end of a string that has been cut off to different lengths", "body": "<p>dawg's answer simplifies the regex but it doesn't work for use cases that are more complex than my example. GMB's answer works in any case but also leads to long (but admittedly better understandable) regexes. My personal solution is to use a function to construct the correct regex dynamically from any needed string:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @strings =\n    (\n        \"Test 1 hello\",\n        \"Something else\",\n        \"Test 2 hell\",\n        \"And also he\",\n        \"Test 4 hel\"\n    );\n\nmy $regex = cutOffStringRegex('hello');\n\nforeach my $string (@strings)\n{\n    if ($string =~ m/(.*?)\\s*$regex$/x)\n    {\n        print \"'\", $string, \"' -&gt; '\", $1, \"'\\n\";\n    }\n}\n\nsub cutOffStringRegex\n{\n    my ($string) = @_;\n    my $resultString = \"\";\n    if (length($string) == 1)\n    {\n        $resultString = quotemeta $string;\n    }\n    else\n    {\n        my $firstChar = quotemeta(substr $string, 0, 1);\n        my $rest = substr $string, 1;\n        $resultString = $firstChar . cutOffStringRegex($rest);\n    }\n    return '(' . $resultString . ')?';\n}\n</code></pre>\n\n<p><code>cutOffStringRegex('hello')</code> results in <code>\"(h(e(l(l(o)?)?)?)?)?\"</code>.\nSince my question was \"how to write this shorter\", I won't mark this answer as the correct one because it definitly isn't shorter.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1545618641, "last_edit_date": 1545618641, "creation_date": 1545617501, "answer_id": 53908563, "question_id": 53907595, "link": "https://stackoverflow.com/questions/53907595/remove-word-from-the-end-of-a-string-that-has-been-cut-off-to-different-lengths/53908563#53908563", "title": "Remove word from the end of a string that has been cut off to different lengths", "body": "<p>One way is to build the regex is an alternation of possible string versions. This I think should also extend well to more general uses</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $target = shift || 'hello';\n\nmy @strings = (\n    \"Test 1 hello\",\n    \"Something else\",\n    \"Test 2 hell\",\n    \"And also he\",\n    \"Test 4 hel\"\n);\n\nmy $re_versions = build_regex($target);\n\nforeach my $string (@strings)\n{\n    if ($string =~ /($re_versions)$/)\n    {\n        say \"'$string' --&gt; $1\";\n    }\n};\n\nsub build_regex {\n    my ($s) = @_;\n    my @versions;\n    while ($s) {\n        push @versions, quotemeta $s;\n        chop $s;\n    }\n    return join '|', @versions;\n}\n</code></pre>\n\n<p>This isn't shorter (while it certainly <em>can</em> be written in a shorter way) but it should be manageable for refinements in acceptable versions of the string, matching order, etc.</p>\n\n<p>If there is a reason to want a compiled regex back change the function return to</p>\n\n<pre><code>my $re_str = join '|', @versions;\nreturn qr/$re_str/;\n</code></pre>\n\n<p>where you can now also add flags that may be suitable.</p>\n"}, {"tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 1, "last_activity_date": 1545658501, "creation_date": 1545658501, "answer_id": 53914157, "question_id": 53907595, "link": "https://stackoverflow.com/questions/53907595/remove-word-from-the-end-of-a-string-that-has-been-cut-off-to-different-lengths/53914157#53914157", "title": "Remove word from the end of a string that has been cut off to different lengths", "body": "<p>You  could use  a reverse  logic: instead  of searching  for\npartial <code>hello</code>s, grab the last  word and search for it <em>in</em>\n<code>hello</code>.</p>\n\n<p>Maybe this won't be exactly  shorter, but it can be cleaner.\nGrabbing the last word is easy enough with a <code>/(\\w+)$/</code>, and\nto check if it is contained in <code>hello</code> no regex is needed. A\nsimple call to <code>index</code> will do.</p>\n\n<pre><code>foreach (@strings) {\n    (my $original = $_) =~ /(\\w+)$/;\n    s/\\s*\\w+$// unless index('hello', $1);\n    say \"'$original' -&gt; '$_'\";\n}\n</code></pre>\n\n<p>To make it clear, <code>index</code> returns the index of the substring\n<code>$1</code>  in <code>'hello'</code>.  We only  care  about the  case when  it\nreturns  0, meaning  it exists  and is  at the  start (would\nbe  -1 if  non-existent  or  bigger than  0  at a  different\nposition). That's why we remove the last word only when this\noperation is 0 with <code>unless</code>.</p>\n"}], "owner": {"reputation": 923, "user_id": 7727546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe3d80f5c8283fb372c4f3aec775df8?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Krupp", "link": "https://stackoverflow.com/users/7727546/benjamin-krupp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 53908563, "answer_count": 5, "score": 3, "last_activity_date": 1545658501, "creation_date": 1545603804, "last_edit_date": 1545606137, "question_id": 53907595, "link": "https://stackoverflow.com/questions/53907595/remove-word-from-the-end-of-a-string-that-has-been-cut-off-to-different-lengths", "title": "Remove word from the end of a string that has been cut off to different lengths", "body": "<p>So let's say I have a list of strings which sometimes end with a phrase that has been cut off to different lengths. In this example the phrase is \"hello\".</p>\n\n<pre><code>my @strings =\n(\n    \"Test 1 hello\",\n    \"Something else\",\n    \"Test 2 hell\",\n    \"And also he\",\n    \"Test 4 hel\"\n);\n</code></pre>\n\n<p>This is how I would remove the \"hello\" fragments right now:</p>\n\n<pre><code>foreach my $string (@strings)\n{\n    if ($string =~ m/(.*?)\\s*(h(e(l(lo?)?)?)?)?$/)\n    {\n        print \"'\", $string, \"' -&gt; '\", $1, \"'\\n\";\n    }\n}\n</code></pre>\n\n<p>It does work:</p>\n\n<pre><code>'Test 1 hello' -&gt; 'Test 1'\n'Something else' -&gt; 'Something else'\n'Test 2 hell' -&gt; 'Test 2'\n'And also he' -&gt; 'And also'\n'Test 4 hel' -&gt; 'Test 4'\n</code></pre>\n\n<p>However, I find the regular expression to match all the \"hello\" fragments long, confusing and hard to modify for future use cases.\nIs there a shorter way to write something equivalent to <code>(h(e(l(lo?)?)?)?)?$</code>?</p>\n"}, {"tags": ["perl", "ssh", "key", "putty", "sha1"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1545611198, "post_id": 53907535, "comment_id": 94660946, "body": "It looks like a warning, not an error message. What happens if you continue ?"}, {"owner": {"reputation": 1, "user_id": 10767831, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Sd4LNsW6Ty8/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iiZWmWKSTn7q0NKBUkFaxmy_eovw/mo/photo.jpg?sz=128", "display_name": "Mohammed Tayeh", "link": "https://stackoverflow.com/users/10767831/mohammed-tayeh"}, "reply_to_user": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 0, "creation_date": 1545620217, "post_id": 53907535, "comment_id": 94662144, "body": "can not  execute command"}], "owner": {"reputation": 1, "user_id": 10767831, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Sd4LNsW6Ty8/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iiZWmWKSTn7q0NKBUkFaxmy_eovw/mo/photo.jpg?sz=128", "display_name": "Mohammed Tayeh", "link": "https://stackoverflow.com/users/10767831/mohammed-tayeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545636289, "creation_date": 1545603200, "last_edit_date": 1545636289, "question_id": 53907535, "link": "https://stackoverflow.com/questions/53907535/perl-netssh2cisco-key-exchange-algorithm-sha1", "title": "perl Net::SSH2::Cisco key exchange algorithm sha1", "body": "<p><strong>i need login with key exchange algorithm sha1</strong> </p>\n\n<blockquote>\n  <p>When i login b by program putty \n  <a href=\"https://i.stack.imgur.com/snBIx.png\" rel=\"nofollow noreferrer\">I have this Message error</a>\n  <img src=\"https://i.stack.imgur.com/snBIx.png\" alt=\"I have this Message error\"></p>\n</blockquote>\n\n<pre><code>my $session = Net::SSH2::Cisco-&gt;new(host =&gt; $host);\n$session-&gt;login('login', 'password');\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "edited": false, "score": 0, "creation_date": 1545515033, "post_id": 53899445, "comment_id": 94644489, "body": "without sample input data it&#39;s not possible to give an answer, but, you <i>are</i> mutating things in several places. <code>$entry-&gt;{id} = $id;</code>, and both <code>push</code>s"}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 666, "user_id": 2243865, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/32c60daf8fbec71c63b1e78e8ed38bc1?s=128&d=identicon&r=PG", "display_name": "user3243135", "link": "https://stackoverflow.com/users/2243865/user3243135"}, "edited": false, "score": 0, "creation_date": 1545515113, "post_id": 53899445, "comment_id": 94644498, "body": "@user3243135 Thanks for the replay. My question is why it changes <code>%hash</code> if I passed it to the sub, as a hash and not as a hash ref."}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 9, "last_activity_date": 1545515383, "creation_date": 1545515383, "answer_id": 53899530, "question_id": 53899445, "link": "https://stackoverflow.com/questions/53899445/passing-a-hash-to-a-subroutine-without-changing-it-input/53899530#53899530", "title": "Passing a hash to a subroutine without changing it input", "body": "<p>Every value in a hash is a scalar. If you have a nested hash, the inner hash is stored as a scalar - a hash reference. Therefore, when changing the nested structures, the changes happen in the referenced hash, which is referenced from the original hash, too.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nsub change {\n    my %hash2 = @_;\n    for my $key (keys %hash2) {\n        ++$_ for values $hash2{$key};\n    }\n}\n\nmy %hash = (a =&gt; {b =&gt; 12, c =&gt; 24});\nchange(%hash);\nuse Data::Dumper; print Dumper \\%hash;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'a' =&gt; {\n                   'b' =&gt; 13,\n                   'c' =&gt; 25\n                 }\n        };\n</code></pre>\n\n<p>The process of obtaining a structure that's similar as the original but contains different references is called <em>cloning</em> or <em>deep copying</em>. See <a href=\"http://p3rl.org/Clone\" rel=\"noreferrer\">Clone</a> or <code>dclone</code> from <a href=\"http://p3rl.org/Storable\" rel=\"noreferrer\">Storable</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1572412890, "last_edit_date": 1572412890, "creation_date": 1545515400, "answer_id": 53899531, "question_id": 53899445, "link": "https://stackoverflow.com/questions/53899445/passing-a-hash-to-a-subroutine-without-changing-it-input/53899531#53899531", "title": "Passing a hash to a subroutine without changing it input", "body": "<p>Arguments are passed to a function as a flat list of scalars, so</p>\n\n<pre><code>some_sub($a, %{$hash})\n</code></pre>\n\n<p>has keys and values of the hash passed as a list after <code>$a</code></p>\n\n<pre><code>some_sub($a, key, value, ...);\n</code></pre>\n\n<p>These key-value pairs are assigned to a hash in the function so when you work with that hash you directly use references from the calling code (your hash values). So data in the caller gets changed.</p>\n\n<p>The details aren't given but in general one way to avoid changing caller's data in the sub is by introducing local variables for each reference the processing encounters. But then those may themselves contain references so you'd still need to be very careful.</p>\n\n<p>It is simpler to make a full deep copy of the hash, ff the data structure isn't huge. For example</p>\n\n<pre><code>use Storable qw(dclone);\n\nsome_sub($v, $hashref);\n\nsub some_sub {\n    my ($var, $hr) = @_;\n    my $cloned_hashref = dclone($hr);\n    # work away with $cloned_hashref\n}\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1572412890, "creation_date": 1545514415, "last_edit_date": 1545559916, "question_id": 53899445, "link": "https://stackoverflow.com/questions/53899445/passing-a-hash-to-a-subroutine-without-changing-it-input", "title": "Passing a hash to a subroutine without changing it input", "body": "<p>I'm trying to debug some strange behavior while handling with a hash in <code>Perl</code>.\nI'm passing a hash (not ref) to a subroutine and for some reason it updates it.</p>\n\n<pre><code>some_sub($a,%{$hash});\nsub some_sub {\n    my ($a,%hash) = @_;\n    my @struct;\n    while (my ($dir, $data) = each %hash) {\n        foreach my $id (keys(%{$data})) {\n            my $entry = $data-&gt;{$id};\n            $entry-&gt;{id} = $id;\n            my $parent = $data-&gt;{$entry-&gt;{id}};\n            unless ($parent) {\n                push @struct, $entry\n            } else {\n                push @{$parent-&gt;{children}},$entry;\n            }\n        }\n    }\n}\nmy %h= %{$hash};\nprint Dumper(\\%h);\n</code></pre>\n\n<p>The sub <code>some_sub</code> does change <code>%hash</code> but only for the inner scope, so it should not change the data of the outside <code>%hash</code>. Also, I pass the hash as a hash and not as a hash ref. I suspected the sub <code>some_sub</code> inserts memory addresses into the <code>%hash</code>, but I'm not sure.</p>\n\n<p>How should I debug and solve this issue?</p>\n\n<p><strong>EDIT</strong>: I also tried to pass a hash ref to the subroutine and do a dereferencing of the hash ref into another hash while doing all of the operations on the new hash.</p>\n"}, {"tags": ["perl", "pid"], "answers": [{"comments": [{"owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1545512864, "post_id": 53898769, "comment_id": 94644033, "body": "Excellent! Both methods work. Is there any one that&#39;s preferable for whatever reason? I suppose the second method relies on the shell having a compatible implementation of <code>exec</code>, but I would guess it&#39;s the same across *NIXes and like it because it&#39;s one line."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "edited": false, "score": 0, "creation_date": 1545524272, "post_id": 53898769, "comment_id": 94646083, "body": "@felwithe, Involving the shell invokes a lot more work and a lot more things that can go wrong. Always opt for the option that removes unnecessary pieces."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 5, "last_activity_date": 1545553357, "last_edit_date": 1545553357, "creation_date": 1545507460, "answer_id": 53898769, "question_id": 53898654, "link": "https://stackoverflow.com/questions/53898654/how-to-get-the-pid-of-a-program-executed-within-a-perl-script/53898769#53898769", "title": "How to get the PID of a program executed within a Perl script", "body": "<p>When you call <code>exec</code> with a single argument (and that argument contains shell metacharacters), perl automatically runs <code>sh -c ARG</code> for you. In your case:</p>\n\n<pre><code>exec(\"childscript.pl &gt; log.txt\");\n# really means:\nexec(\"/bin/sh\", \"-c\", \"childscript.pl &gt; log.txt\");\n</code></pre>\n\n<p>I.e. your script loads <code>sh</code> into the currently running process, keeping its PID. The shell performs output redirection, then runs <code>childscript.pl</code> as a child process (with a new PID).</p>\n\n<p>There are two ways to attack this problem:</p>\n\n<ol>\n<li><p>Do the output redirection in Perl and don't spawn a shell:</p>\n\n<pre><code>open STDOUT, \"&gt;\", \"log.txt\" or die \"$0: log.txt: $!\\n\";\nexec \"childscript.pl\";\ndie \"$0: childscript.pl: $!\\n\";\n</code></pre></li>\n<li><p>Tell the shell to also use <code>exec</code> and not spawn a child process:</p>\n\n<pre><code>exec \"exec childscript.pl &gt; log.txt\";\ndie \"$0: childscript.pl: $!\\n\";\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 2390, "user_id": 1204434, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FyXgT.png?s=128&g=1", "display_name": "felwithe", "link": "https://stackoverflow.com/users/1204434/felwithe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 1, "accepted_answer_id": 53898769, "answer_count": 1, "score": 2, "last_activity_date": 1545553357, "creation_date": 1545506484, "question_id": 53898654, "link": "https://stackoverflow.com/questions/53898654/how-to-get-the-pid-of-a-program-executed-within-a-perl-script", "title": "How to get the PID of a program executed within a Perl script", "body": "<p><a href=\"https://stackoverflow.com/questions/18094448/exec-pid-for-perl-files\">This answer</a> explains how to get the pid of the new process when using Perl's <code>exec()</code>. The pid doesn't even change, so all you need to do is get the pid of the original script. But it doesn't work if I redirect the output to a file as part of the command, which I need to do. </p>\n\n<pre><code>say \"my pid is $$\";\nexec(\"childscript.pl\");                  # same pid\n</code></pre>\n\n<p>But if I redirect the output as part of the command:</p>\n\n<pre><code>say \"my pid is $$\";\nexec(\"childscript.pl &gt; log.txt\");        # different pid, usually old pid + 1\nexec(\"childscript.pl &gt; log.txt 2&gt;&amp;1 &amp;\"); # same\n</code></pre>\n\n<p>then the new pid is one higher than the old one (which is probably just because they were spawned in succession and not reliable). I tested this both by looking at the output, and by inserting a <code>sleep 30</code> into \"childscript.pl\" so that I could see it with <code>ps -e</code>.</p>\n\n<p>My guess here is that redirecting the output causes a new process to do the writing. But I need the pid of the program, and I have no control over the program except for the fact that I can execute it. (It needs to run in the background too.)</p>\n"}, {"tags": ["php", "regex", "perl", "sublimetext3", "code-snippets"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 2, "last_activity_date": 1545570455, "last_edit_date": 1545570455, "creation_date": 1545524524, "answer_id": 53900296, "question_id": 53898644, "link": "https://stackoverflow.com/questions/53898644/sublime-text-snippet-convert-camelcase-to-snake-case/53900296#53900296", "title": "Sublime Text snippet convert camelCase to snake_case", "body": "<p>Perl offers the <code>\\L</code> modifier to lower case a capture when replacing.\nThe captures are in brackets () and can be backreferenced by $1, $2, etc.</p>\n\n<p>So all that's needed is to find a lower case character followed by an upper case character, which should then be lower cased.</p>\n\n<pre><code>sub camel_case_to_underscore {\n    my $method_name = shift;   \n    $method_name =~s /([a-z])([A-Z])/$1_\\L$2/g;\n    return lcfirst $method_name;\n}\n</code></pre>\n\n<p>The <code>g</code> flag replaces globally, so all occurrences in the string.</p>\n\n<p>Note that this function lower cases the first letter of the string as well,\nI assume that's what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1545595403, "post_id": 53900847, "comment_id": 94658049, "body": "I find doing the lc first letter in a capture group a lot less readable, the regex becomes a lot more complicated that way. Quite unnecessarily."}, {"owner": {"reputation": 43, "user_id": 7645906, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf8098baa3e48f2e4316d72fe02f6afd?s=128&d=identicon&r=PG&f=1", "display_name": "Eth0", "link": "https://stackoverflow.com/users/7645906/eth0"}, "edited": false, "score": 0, "creation_date": 1545648746, "post_id": 53900847, "comment_id": 94668560, "body": "Hi Odat Nurd This does what i want however i want the file name without extension to be snake_case. This is almost perfect ``` ${TM_FILENAME/^([A-Z])|(?:([A-Z]))/(?1\\l$1:)(?2_\\l$2:)/g} ``` just need to get rid of .php at the end."}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1545663433, "post_id": 53900847, "comment_id": 94672975, "body": "For that, I would try <code>${TM_FILENAME&#47;^([A-Z])|(?:([A-Z]))|(?:\\.\\w+)&#47;(?1\\l$1:)(?2_\\l&zwnj;&#8203;$2:)(?3:)&#47;g}</code> which is the above but with a capture group that matches a file extension and then throws it away. It may take some additional tuning if your files have periods in them though."}], "tags": [], "owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "is_accepted": true, "score": 7, "last_activity_date": 1545533357, "creation_date": 1545533357, "answer_id": 53900847, "question_id": 53898644, "link": "https://stackoverflow.com/questions/53898644/sublime-text-snippet-convert-camelcase-to-snake-case/53900847#53900847", "title": "Sublime Text snippet convert camelCase to snake_case", "body": "<p>An example of a snippet that does something like this is the following, based on your example but shortened up for clarity (also I changed the scope to <code>embedding.php</code> so it would trigger with the syntax that I use for PHP). You should be able to adapt this to your needs in your larger snippet example.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;snippet&gt;\n    &lt;content&gt;&lt;![CDATA[\n// ${1/^([A-Z])|(?:([A-Z]))/(?1\\l$1:)(?2_\\l$2:)/g}\npublic function ${1}()\n{\n    $0\n}\n]]&gt;&lt;/content&gt;\n    &lt;tabTrigger&gt;btm&lt;/tabTrigger&gt;\n    &lt;scope&gt;embedding.php&lt;/scope&gt;\n    &lt;description&gt;Eloquent belongsToMany() (pivot) relation&lt;/description&gt;\n&lt;/snippet&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FExEO.gif\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FExEO.gif\" alt=\"Example of snippet in use\"></a></p>\n\n<p>The basis of this can be seen in the <a href=\"http://docs.sublimetext.info/en/latest/extensibility/snippets.html\" rel=\"noreferrer\">snippets</a> page in the <a href=\"http://docs.sublimetext.info/en/latest/\" rel=\"noreferrer\">unofficial documentation</a>. The expansion of a variable in a snippet takes the form <code>${variable/regex/format_string/options}</code>. The regex uses the <a href=\"http://www.boost.org/doc/libs/1_56_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html\" rel=\"noreferrer\">boost library regular expressions</a> and <a href=\"http://www.boost.org/doc/libs/1_56_0/libs/regex/doc/html/boost_regex/format/boost_format_syntax.html\" rel=\"noreferrer\">format strings</a>.</p>\n\n<p>Boost supports conditional replacement in the form of <code>(?Ntrue:false)</code>, where for capture group <code>N</code> the replacement text is <code>true</code> if the match captured something or <code>false</code> if it did not.</p>\n\n<p>Here we use an alternation in the regular expression to have two capture groups, so that we can supply two different replacements depending on which of the items matches. The first capture group captures a leading uppercase character and just transforms it to lower case, while the second one (not anchored to the start of the line) does the same and also precedes the match with an underscore.</p>\n"}], "owner": {"reputation": 43, "user_id": 7645906, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf8098baa3e48f2e4316d72fe02f6afd?s=128&d=identicon&r=PG&f=1", "display_name": "Eth0", "link": "https://stackoverflow.com/users/7645906/eth0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 1, "accepted_answer_id": 53900847, "answer_count": 2, "score": 1, "last_activity_date": 1545570455, "creation_date": 1545506401, "question_id": 53898644, "link": "https://stackoverflow.com/questions/53898644/sublime-text-snippet-convert-camelcase-to-snake-case", "title": "Sublime Text snippet convert camelCase to snake_case", "body": "<p>Hi there I am trying to make an sublime text snippet and i would like to \nconvert an camelCase word to snake_case. I do know there are plugins that allow you to convert string to snake_case but i want to do it through sublime text snippets.</p>\n\n<p>I have a snippet like below.</p>\n\n<pre><code>&lt;snippet&gt;\n    &lt;content&gt;&lt;![CDATA[\n/**\n * ${TM_FILEPATH/^.+\\/(\\w+)\\.php$/${1}/} belongs to many (many-to-many) ${1/^((.+)ies)|(.+[^s])s$/\\u(?1$2y:$3)/}.\n *\n * @return \\Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany\n */\npublic function $1()\n{\n    return \\$this-&gt;belongsToMany('App\\\\${1/^((.+)ies)|(.+[^s])s$/\\u(?1$2y:$3)/}', '${TM_FILEPATH/^.+\\/(\\w+)\\.php$/\\l${1}/}_$1', '${TM_FILEPATH/^.+\\/(\\w+)\\.php$/\\l${1}/}_id', '${1/^((.+)ies)|(.+[^s])s$/\\l(?1$2y:$3)/}_id');\n}\n]]&gt;&lt;/content&gt;\n    &lt;!-- Optional: Set a tabTrigger to define how to trigger the snippet --&gt;\n    &lt;tabTrigger&gt;btm&lt;/tabTrigger&gt;\n    &lt;!-- Optional: Set a scope to limit where the snippet will trigger --&gt;\n    &lt;scope&gt;source.php&lt;/scope&gt;\n    &lt;description&gt;Eloquent belongsToMany() (pivot) relation&lt;/description&gt;\n&lt;/snippet&gt;\n</code></pre>\n\n<p>And as an output it gives me.</p>\n\n<pre><code> /**\n     * UserMessages belongs to many (many-to-many) Role.\n     *\n     * @return \\Illuminate\\Database\\Eloquent\\Relations\\BelongsToMany\n     */\n    public function roles()\n    {\n        return $this-&gt;belongsToMany('App\\Role', 'userMessages_roles', 'userMessages_id', 'role_id');\n    }\n</code></pre>\n\n<p>What i want to end up is the userMessages to be user_messages.\nAny idea how to accomplish that.</p>\n\n<p>Many thanks.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 2, "creation_date": 1545503132, "post_id": 53897038, "comment_id": 94642015, "body": "This would essentially require your function to be a keyword (or some other uglier magic) in order to have custom parsing for its own calls, rather than its declaration."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545503679, "post_id": 53897038, "comment_id": 94642143, "body": "For keywords see <a href=\"https://metacpan.org/pod/Keyword::Simple\" rel=\"nofollow noreferrer\">Keyword::Simple</a>, <a href=\"https://metacpan.org/pod/Keyword::Declare\" rel=\"nofollow noreferrer\">Keyword::Declare</a>, but of course you can&#39;t combine a keyword with a Kavorka function. As for uglier magic, depending how experimental you want to go, a <a href=\"https://metacpan.org/pod/Babble\" rel=\"nofollow noreferrer\">Babble</a> plugin to rewrite your calls might work..."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1545535611, "post_id": 53897038, "comment_id": 94647337, "body": "Use <code>PadWalker</code> and retrieve the values of <code>$foo</code> and <code>$bar</code> from one level up in the call stack?"}], "answers": [{"comments": [{"owner": {"reputation": 665, "user_id": 2854144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6l9H.jpg?s=128&g=1", "display_name": "TBSliver", "link": "https://stackoverflow.com/users/2854144/tbsliver"}, "edited": false, "score": 0, "creation_date": 1559574879, "post_id": 56429968, "comment_id": 99454759, "body": "Have also tested it as a package, which works fine. :D"}], "tags": [], "owner": {"reputation": 665, "user_id": 2854144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6l9H.jpg?s=128&g=1", "display_name": "TBSliver", "link": "https://stackoverflow.com/users/2854144/tbsliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1559574597, "last_edit_date": 1559574597, "creation_date": 1559574050, "answer_id": 56429968, "question_id": 53897038, "link": "https://stackoverflow.com/questions/53897038/short-cut-for-named-parameters-from-appropriately-named-variables/56429968#56429968", "title": "short-cut for named parameters from appropriately named variables", "body": "<p>I have a couple of ways of doing it, using either PadWalker (thanks for the suggestion mob) or Hash Slices:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nuse PadWalker qw/ var_name /;\n\nsub test_sub { print Dumper [ @_ ] }\n\nmy %vars;\n\n$vars{foo} = \"foo_data\";\n$vars{bar} = \"var_data\";\n\ntest_sub( %{vars}{qw/ foo bar/} );\n\n# nv = named variables ( rename as needed )\nsub nv { map { ( substr( var_name(1, \\$_), 1) =&gt; $_ ) } @_ }\n\nmy $foo = 'foo_stuff';\nmy $bar = 'bar_stuff';\n\ntest_sub( nv( $foo, $bar ) );\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>$VAR1 = [\n          'foo',\n          'foo_data',\n          'bar',\n          'var_data'\n        ];\n$VAR1 = [\n          'foo',\n          'foo_stuff',\n          'bar',\n          'bar_stuff'\n        ];\n</code></pre>\n\n<p>Had to do the substr in nv otherwise it shows the sigil, but thats about the best I can think of without going into deeper magic.</p>\n\n<p>Without using nv, that will require more deep magic manipulation...</p>\n\n<p>Using your Kavorka code as well:</p>\n\n<pre><code>use 5.020;\nuse strictures;\nuse Kavorka qw(fun);\nuse PadWalker qw/ var_name /;\n\nfun foobar(:$foo, :$bar) { say $foo, $bar; }\n\nmy %vars;\n\n$vars{foo} = \"foo_data\";\n$vars{bar} = \"var_data\";\n\nfoobar( %{vars}{qw/ foo bar/} );\n\n# nv = named variables ( rename as needed )\nsub nv { map { ( substr( var_name(1, \\$_), 1) =&gt; $_ ) } @_ }\n\nmy $foo = 'foo_stuff';\nmy $bar = 'bar_stuff';\n\nfoobar( nv( $foo, $bar ) );\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>foo_datavar_data\nfoo_stuffbar_stuff\n</code></pre>\n\n<p>I dont have 5.28 installed locally unfortunately heh</p>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1559574597, "creation_date": 1545493222, "question_id": 53897038, "link": "https://stackoverflow.com/questions/53897038/short-cut-for-named-parameters-from-appropriately-named-variables", "title": "short-cut for named parameters from appropriately named variables", "body": "<p>My function is</p>\n\n<pre><code>use 5.028;\nuse strictures;\nuse Kavorka qw(fun);\n\nfun foobar(:$foo, :$bar) { say $foo, $bar; }\n</code></pre>\n\n<p>I need to pass it named arguments, not positional arguments.</p>\n\n<pre><code>foobar('quux', 'quuuux');\n# Unknown named parameter: quux at \u2026 line 5.\n#         main::foobar(\"quux\", \"quuuux\") called at \u2026 line 7\n</code></pre>\n\n<p>but</p>\n\n<pre><code>foobar(foo =&gt; 'quux', bar =&gt; 'quuuux');\n# ok\n</code></pre>\n\n<p><code>Hash</code>es or <code>HashRef</code>s are accepted, too.</p>\n\n<pre><code>my %args = (foo =&gt; 'quux', bar =&gt; 'quuuux');\nfoobar(%args);\nmy $args = {foo =&gt; 'quux', bar =&gt; 'quuuux'};\nfoobar($args);\n</code></pre>\n\n<hr>\n\n<p>In ES6 exists a short-cut where variables in an object literal are expanded (ed: MDN link?):</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>function foobar({foo, bar}) { console.log(foo, bar); }\nfoobar({foo: 'quux', bar: 'quuuux'});\nconst foo = 'quux';\nconst bar = 'quuuux';\nfoobar({foo: foo, bar: bar});\nfoobar({foo, bar}); // NB!\n</code></pre>\n\n<p><a href=\"https://docs.perl6.org/type/Signature#Positional_vs._named_arguments\" rel=\"nofollow noreferrer\">In Perl 6 a <code>:</code> prefixed variable in a parameter signature will create a key of the same name</a>:</p>\n\n<pre class=\"lang-perl6 prettyprint-override\"><code>use v6;\nsub foobar(:$foo, :$bar) { say $foo, $bar; }\nfoobar(foo =&gt; 'quux', bar =&gt; 'quuuux');\nmy $foo = 'quux';\nmy $bar = 'quuuux';\nfoobar(foo =&gt; $foo, bar =&gt; $bar);\nfoobar(:$foo, :$bar); # NB!\n</code></pre>\n\n<hr>\n\n<p>How can you accomplish something comparable in effect for Perl 5?</p>\n\n<pre><code>my $foo = 'quux';\nmy $bar = 'quuuux';\nfoobar(???);\n</code></pre>\n"}, {"tags": ["c", "bash", "perl", "ssh"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10823208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f44a1fe264d588effe6e30192f92a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Prostu", "link": "https://stackoverflow.com/users/10823208/prostu"}, "edited": false, "score": 0, "creation_date": 1545481995, "post_id": 53895431, "comment_id": 94637156, "body": "Thanks, but now i`m dumber than i was before .. i know too little so i can do what u wrote :D"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "reply_to_user": {"reputation": 3, "user_id": 10823208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f44a1fe264d588effe6e30192f92a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Prostu", "link": "https://stackoverflow.com/users/10823208/prostu"}, "edited": false, "score": 0, "creation_date": 1545482393, "post_id": 53895431, "comment_id": 94637230, "body": "to make things easier, but uglier, you can copy argv[2] to a global variable, then use that global inside print_host"}, {"owner": {"reputation": 3, "user_id": 10823208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f44a1fe264d588effe6e30192f92a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Prostu", "link": "https://stackoverflow.com/users/10823208/prostu"}, "edited": false, "score": 0, "creation_date": 1545483593, "post_id": 53895431, "comment_id": 94637487, "body": "Thanks, but still crashing my brain .. to understand exactly what you said, i need to read the whole C/C++ book .. and i can`t, not enough space for that too .. :D"}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": true, "score": 1, "last_activity_date": 1545479762, "creation_date": 1545479762, "answer_id": 53895431, "question_id": 53895276, "link": "https://stackoverflow.com/questions/53895276/i-need-help-to-modify-pnscan/53895431#53895431", "title": "I need help to modify pnscan", "body": "<p>Yes, you are right that that is the place to change. But it is a tricky to do that. From <code>main</code> which has the <code>argv[]</code> information, you need to change <code>r_worker</code> and <code>f_worker</code> which both call <code>probe</code>. then <code>probe</code> calls function <code>print_host</code>.</p>\n\n<p>So you need to pass the value of <code>argv[2]</code> all the way from main to print_host. Then you can change the fprintf line you showed.</p>\n"}], "owner": {"reputation": 3, "user_id": 10823208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f44a1fe264d588effe6e30192f92a3d?s=128&d=identicon&r=PG&f=1", "display_name": "Prostu", "link": "https://stackoverflow.com/users/10823208/prostu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53895431, "answer_count": 1, "score": 0, "last_activity_date": 1545485126, "creation_date": 1545478334, "last_edit_date": 1545485126, "question_id": 53895276, "link": "https://stackoverflow.com/questions/53895276/i-need-help-to-modify-pnscan", "title": "I need help to modify pnscan", "body": "<p>His currently shows:</p>\n\n<pre><code>$ pnscan -s somehost.com 22\n\n50.87.248.227   : box1227.bluehost.com                     :    22 : TXT : SSH-2.0-OpenSSH_5.3\\r\\n\n</code></pre>\n\n<p>I`m trying to modify pnscan to show me results like this:</p>\n\n<pre><code>$ pnscan -s somehost.com 22\n\n50.87.248.227   : somehost.com                     :    22 : TXT : SSH-2.0-OpenSSH_5.3\\r\\n\n</code></pre>\n\n<p>Here is the code\n<a href=\"https://github.com/ptrrkssn/pnscan/blob/master/pnscan.c\" rel=\"nofollow noreferrer\">https://github.com/ptrrkssn/pnscan/blob/master/pnscan.c</a> </p>\n\n<pre><code>if (pr_sym)\n{\n    hep = gethostbyaddr((const char *) &amp;in, sizeof(in), AF_INET);\n    fprintf(fp, \"%-15s : %-40s : %5d\", host,\n            inet_ntoa(in), hep ? hep-&gt;h_name : \"(unknown)\", port);\n}\nelse\n    fprintf(fp, \"%-15s : %5d\", inet_ntoa(in), port);\n}\n</code></pre>\n\n<p>I tried here to change on the above fprint,but it dosen`t work, because argv[i] is declared after these fprint,i think ?\nCan someone help ?</p>\n"}, {"tags": ["mysql", "regex", "sqlite", "perl"], "answers": [{"comments": [{"owner": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "edited": false, "score": 0, "creation_date": 1545483340, "post_id": 53895253, "comment_id": 94637428, "body": "Hm, it is not actually the end of the string, because it is only a part of MySQL line. For example: <code>insert into tbl values (&#39;it dosn\\&#39;t work :-\\\\&#39;, 42, 33, &#39;and this doesn\\&#39;t work as well :-\\\\&#39;, 1024);</code>"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "edited": false, "score": 0, "creation_date": 1545483824, "post_id": 53895253, "comment_id": 94637517, "body": "@johnfound: I&#39;ve changed the negative lookahead. If you have other cases, please, <a href=\"https://stackoverflow.com/posts/53895067/edit\">edit you question</a> and add more test cases."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545523984, "post_id": 53895253, "comment_id": 94646042, "body": "@Toto, That tails for <code>&#39;\\\\\\&#39;!&#39;</code>. It should gives <code>&#39;\\&#39;&#39;!&#39;</code>, but it gives <code>&#39;\\\\&#39;!&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545539784, "post_id": 53895253, "comment_id": 94647703, "body": "I meant  &quot;That fails&quot;"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 0, "last_activity_date": 1545483825, "last_edit_date": 1545483825, "creation_date": 1545478106, "answer_id": 53895253, "question_id": 53895067, "link": "https://stackoverflow.com/questions/53895067/converter-perl-script-fix/53895253#53895253", "title": "Converter Perl script fix", "body": "<p>The first substitution <code>s/\\\\'/''/g;</code> replace the last <code>\\'</code> by <code>''</code>, so</p>\n\n<pre><code>'It doesn\\'t work :-\\\\'\n#                    ^^\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>'It doesn\\'t work :-\\''\n</code></pre>\n\n<p>I guess you want to replace <code>\\'</code> only when it is not followed by a non-word character <code>\\W</code>. </p>\n\n<p><em>I'm using here only the 2 relevant substitutions for this case</em></p>\n\n<pre><code>my $str = &lt;&lt;'EOD';\ninsert into tbl values ('it doesn\\'t work :-\\\\', 42, 33, 'and this doesn\\'t work as well :-\\\\', 1024);\nEOD\nsay \"before: \",$str;\n$str =~ s/\\\\'(?!\\W)/''/g;\n$str =~ s/\\\\\\\\/\\\\/g;\nsay \"after: \",$str;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>before: insert into tbl values ('it doesn\\'t work :-\\\\', 42, 33, 'and this doesn\\'t work as well :-\\\\', 1024);\n\nafter: insert into tbl values ('it doesn''t work :-\\', 42, 33, 'and this doesn''t work as well :-\\', 1024);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "edited": false, "score": 0, "creation_date": 1545555702, "post_id": 53900198, "comment_id": 94649702, "body": "There is some mistake: <code>echo &quot;&#39;This doesn\\&#39;t work :-\\\\&#39;&quot; | .&#47;mysql2sqlite.pl</code> outputs <code>&#39;This doesn&#39;&#39;t work :-&#39;&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "edited": false, "score": 0, "creation_date": 1545557011, "post_id": 53900198, "comment_id": 94649908, "body": "@johnfound, What&#39;s the output of <code>echo &quot;&#39;This doesn\\&#39;t work :-\\\\&#39;&quot;</code>"}, {"owner": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "edited": false, "score": 0, "creation_date": 1545571812, "post_id": 53900198, "comment_id": 94652670, "body": "Yes, it is my fault. :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1545524012, "last_edit_date": 1545524012, "creation_date": 1545523277, "answer_id": 53900198, "question_id": 53895067, "link": "https://stackoverflow.com/questions/53895067/converter-perl-script-fix/53900198#53900198", "title": "Converter Perl script fix", "body": "<p>It's because you're processing <code>\\'</code> before <code>\\\\</code>. You need to handle backslashes in the order they are encountered, so you need to do everything in one pass.</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy %escapes = (\n   n =&gt; \"\\n\",\n   r =&gt; \"\\r\",\n);\n\nwhile (&lt;&gt;) {\n    s{\\\\([\\Wrn])}{ $escapes{$1} // ( $1 eq \"'\" ? \"''\" : $1 ) }eg;\n    s/ auto_increment//g;\n    next if /^(?:UN)?LOCK TABLES/;\n    print;\n}\n</code></pre>\n\n<p>Note the proper way of optionally matching <code>UN</code>.</p>\n"}], "owner": {"reputation": 6701, "user_id": 2028907, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R81XM.png?s=128&g=1", "display_name": "johnfound", "link": "https://stackoverflow.com/users/2028907/johnfound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 53900198, "answer_count": 2, "score": 0, "last_activity_date": 1545524012, "creation_date": 1545476699, "last_edit_date": 1545478201, "question_id": 53895067, "link": "https://stackoverflow.com/questions/53895067/converter-perl-script-fix", "title": "Converter Perl script fix", "body": "<p>I am trying to use a small Perl script in order to convert SQL INSERT statements from MySQL syntax into SQLite syntax. But the script has a bug and can't convert the string constants properly in some corner cases.</p>\n\n<p>Here is the script:</p>\n\n<pre><code>#!/usr/bin/perl\nwhile (&lt;&gt;){\n    s/\\\\'/''/g;                # Use '' instead of \\'\n    s/\\\\\"/\"/g;                 # Use \" instead of \\\"\n    s/\\\\r\\\\n/\\r\\n/g;           # Convert escaped \\r\\n to literal\n    s/\\\\\\\\/\\\\/g;               # Convert escaped \\ to literal\n    s/ auto_increment//g;      # Remove auto_increment\n    s/^[UN]*?LOCK TABLES.*//g; # Remove locking statements\n    print;\n}\n</code></pre>\n\n<p>The problem is that in the case of the following MySQL string:</p>\n\n<pre><code>'It doesn\\'t work :-\\\\'\n</code></pre>\n\n<p>It generates wrong SQLite string:</p>\n\n<pre><code>'It doesn''t work :-\\''\n</code></pre>\n\n<p>instead of the proper:</p>\n\n<pre><code>'It doesn''t work :-\\'\n</code></pre>\n\n<p>What is wrong in the script?</p>\n\n<p>EDIT:</p>\n\n<p>And how to fix it? </p>\n"}, {"tags": ["perl", "date"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545469378, "post_id": 53893469, "comment_id": 94634731, "body": "That&#39;s a really tricky &quot;fix&quot; for missing day/month, to stick <code>00</code> ... which are then invalid as format; it practically forces you to later pick it apart and test.  Fixed and restored my answer."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10801603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62a632f169528f47bfaf043bb8aed31?s=128&d=identicon&r=PG&f=1", "display_name": "C. de Haer", "link": "https://stackoverflow.com/users/10801603/c-de-haer"}, "edited": false, "score": 0, "creation_date": 1545470443, "post_id": 53894096, "comment_id": 94634909, "body": "I didn&#39;t expect it to be so complicated, but that works well.  The data is entered as an eight digit number, so if the month or day is undefined it still returns 00, so you could test for the double zero if needed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43, "user_id": 10801603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62a632f169528f47bfaf043bb8aed31?s=128&d=identicon&r=PG&f=1", "display_name": "C. de Haer", "link": "https://stackoverflow.com/users/10801603/c-de-haer"}, "edited": false, "score": 0, "creation_date": 1545470952, "post_id": 53894096, "comment_id": 94634995, "body": "@C.deHaer  Indeed, it is well defined and testable.  I just found it easier here to first strip them to <code>undef</code> instead, since then it&#39;s just <code>not</code> to test it. I wouldn&#39;t say that it&#39;s complicated, just verbose since I repeat code in branches (for clarity)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 43, "user_id": 10801603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62a632f169528f47bfaf043bb8aed31?s=128&d=identicon&r=PG&f=1", "display_name": "C. de Haer", "link": "https://stackoverflow.com/users/10801603/c-de-haer"}, "edited": false, "score": 0, "creation_date": 1545472250, "post_id": 53894096, "comment_id": 94635230, "body": "Added an example of how to get both the formatted string and an object, or only the string, that is also (arguably) cleaner"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1545815461, "last_edit_date": 1545815461, "creation_date": 1545466818, "answer_id": 53894096, "question_id": 53893469, "link": "https://stackoverflow.com/questions/53893469/convert-dates-with-missing-months-and-dates-to-a-specific-format-in-perl/53894096#53894096", "title": "Convert Dates with Missing Months and Dates to a Specific Format in Perl", "body": "<p>The format with <code>00</code> for the missing day/month is well defined but it encodes special cases which are inconsistent with the <code>yyyymmdd</code> format.  I don't see how there can be an approach that avoids explicit tests for these special cases, where day/month is just left out. </p>\n\n<p>I'd like to suggest to not pick through datetimes with a regex, as there are good modules for that work.  Even as this example is simple as stated, jobs tend to evolve; also, there is nothing wrong with using a good tool even in the simple case.</p>\n\n<p>Using the core module <a href=\"https://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow noreferrer\">Time::Piece</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Time::Piece;\n\nmy $d = shift || '20180712';\n\nmy $date = fmt_date($d);\n\nsay $date;\n\nsub fmt_date {\n    my ($date) = @_;         \n    my ($yr, $mm, $dd) = grep { $_ != 0 } unpack \"A4A2A2\", $date;\n    my $d_fmt;\n\n    if ($yr and $mm and $dd) {\n        $d_fmt = Time::Piece\n            -&gt;strptime($date, \"%Y%m%d\")\n            -&gt;strftime(\"%d %B %Y\");\n    }   \n    elsif (not $dd and $mm) {\n        $d_fmt = Time::Piece\n            -&gt;strptime($yr.$mm.'01', \"%Y%m%d\")\n            -&gt;strftime(\"%B %Y\");\n    }   \n    elsif (not $mm) {\n        $d_fmt = $yr \n    }   \n    return $d_fmt;\n}\n</code></pre>\n\n<p>I filter the list returned by <a href=\"https://perldoc.perl.org/functions/unpack.html\" rel=\"nofollow noreferrer\">unpack</a> so to not have to deal with <code>00</code> <em>strings</em>; this way the corresponding variables would be <code>undef</code>, what can be tested for more simply.</p>\n\n<p>The <code>strptime</code> returns a <code>Time::Piece</code> object on which <code>strftime</code> method is directly called, returning a string in the desired format. If there is more work to do with these dates, you can of course store the object in a variable, then form the string out of it and return both. </p>\n\n<p>But this raises a design issue: what kind of a date should it be when day/mon aren't given? When working with dates a solution is often to set them to <code>01</code> and the application can then use just the part it wants.<sup>&dagger;</sup></p>\n\n<p>This can be made more compact and perhaps \"nicer\" but I'd suggest to not worry about elegance when you must pick through a list of tests.</p>\n\n<p>The other, bigger and far more rounded option for date-time processing is  <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> module.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> &hairsp; For example</p>\n\n<pre><code>sub fmt_date {\n    my ($date) = @_;\n    my ($yr, $mm, $dd) = grep { $_ != 0 } unpack \"A4A2A2\", $date;\n\n    my $dt_obj = Time::Piece-&gt;strptime(\n        $yr . ($mm // '01') . ($dd // '01'), \"%Y%m%d\"  # legit format\n    );\n\n    my $d_fmt = do {\n        if ($yr and $mm and $dd) { $dt_obj-&gt;strftime(\"%d %B %Y\") }\n        elsif (not $dd and $mm)  { $dt_obj-&gt;strftime(\"%B %Y\")    }\n        elsif (not $mm)          { $dt_obj-&gt;strftime(\"%Y\")       }  # or, $yr \n    };  \n\n    return wantarray ? ($d_fmt, $dt_obj) : $d_fmt;\n}\n</code></pre>\n\n<p>where <a href=\"https://perldoc.perl.org/functions/wantarray.html\" rel=\"nofollow noreferrer\">wantarray</a> knows the calling <a href=\"https://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> and so this can now be called either as </p>\n\n<pre><code>my ($date, $obj) = fmt_date($d);\n</code></pre>\n\n<p>or as</p>\n\n<pre><code>my $date = fmt_date($d);\n</code></pre>\n\n<p>depending on whether the caller wants the object for further work or not.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545720651, "post_id": 53918189, "comment_id": 94682392, "body": "&quot;<i>zdim suggested using unpack()</i>&quot; -- my suggestion is to use a module for work with datetimes. My use of <code>unpack</code> is a side detail, about parsing the string into date components (which I do prefer over regex for this format)."}], "tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": false, "score": 0, "last_activity_date": 1545691796, "creation_date": 1545691796, "answer_id": 53918189, "question_id": 53893469, "link": "https://stackoverflow.com/questions/53893469/convert-dates-with-missing-months-and-dates-to-a-specific-format-in-perl/53918189#53918189", "title": "Convert Dates with Missing Months and Dates to a Specific Format in Perl", "body": "<p>zdim suggested using unpack(), which is not much better than the regex in this case. So I would say that the original solution is already OK; you just need to complete it by adding a bit of code, something like:</p>\n\n<pre><code>my $date = '20111230';\nmy @months = ('January','February','March','April','May','June','July','August','September','October','November','December');\n\nif ($date =~ m/^(\\d{4})(\\d{2})(\\d{2})$/){\n    print ($3 &gt; 0 ? $3 . ' ' : '') . ($2 &gt; 0 ? $months[$2-1] . ' ' : '') . $1;\n} else {\n    die \"Invalid date: $date\";\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 10801603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d62a632f169528f47bfaf043bb8aed31?s=128&d=identicon&r=PG&f=1", "display_name": "C. de Haer", "link": "https://stackoverflow.com/users/10801603/c-de-haer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1545815461, "creation_date": 1545459239, "question_id": 53893469, "link": "https://stackoverflow.com/questions/53893469/convert-dates-with-missing-months-and-dates-to-a-specific-format-in-perl", "title": "Convert Dates with Missing Months and Dates to a Specific Format in Perl", "body": "<p>I've only been using Perl for a week, so hoping someone can help on here.</p>\n\n<p>The script, which I've had some help in writing, imports a tab delimited file into a hash, with one column containing a date stored as YYYYMMDD. This is outputted to a file as Day Month Year (e.g. 20180712 is printed as 12 July 2018). I have found a way to convert this on here at <a href=\"https://stackoverflow.com/questions/8675706/how-can-i-change-the-date-formats-in-perl\">How can I change the date formats in Perl?</a> as follows:</p>\n\n<pre><code>my $date = '20111230';\nmy @months = ('January','February','March','April','May','June','July','August','September','October','November','December');\n\nif($date =~ m/^(\\d{4})(\\d{2})(\\d{2})$/){\n    print $3 . ' ' . $months[$2-1] . ' ' . $1;\n}               \n</code></pre>\n\n<p>However, sometimes the date is stored as only a year and month, and on very rare occasions it is only the year. This is stored in the hash with zeroes replacing the day (and month if necessary). Hence I required 20180700 to be printed as July 2018, and 20180000 is printed as 2018.</p>\n\n<p>I can modify the code to check if the last two characters are 00, and then only print the Month and Year, and likewise check if the last four characters are 0000 etc., but is there a more elegant approach.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1465, "user_id": 7327755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsjT4.jpg?s=128&g=1", "display_name": "Ashton Wiersdorf", "link": "https://stackoverflow.com/users/7327755/ashton-wiersdorf"}, "edited": false, "score": 2, "creation_date": 1545456908, "post_id": 53893281, "comment_id": 94632998, "body": "Could you please give us some more details? Post some of your code (the smallest part that works) and tell us what format the files are in."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 3, "creation_date": 1545457535, "post_id": 53893281, "comment_id": 94633084, "body": "Don&#39;t load the entire file into memory but only chunks of it. First thing that comes into my mind is <a href=\"https://perldoc.perl.org/Tie/File.html\" rel=\"nofollow noreferrer\">Tie::File</a>. Quote &quot;The file is not loaded into memory, so this will work even for gigantic files.&quot;."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1545469868, "post_id": 53893281, "comment_id": 94634817, "body": "Another good approach is to load only one file into memory and then go through the other file line by line. If both files are sorted by the key columns, you don&#39;t even need to load either file into memory and can simply march line by line through both files."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1545479864, "post_id": 53893281, "comment_id": 94636734, "body": "@sticky bit, That&#39;s horrible advice. Tie::File uses as much memory as loading the loading the entire file into memory into memory, and it takes 30x longer."}, {"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545492000, "post_id": 53893281, "comment_id": 94639274, "body": "@ikegami: So the documentation lies? Good to know..."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 0, "creation_date": 1545507274, "post_id": 53893281, "comment_id": 94642929, "body": "@stickybit, It keeps an index of every line encountered. If your file has a lot of short lines (e.g. source code), T::F will end up using more memory. For files with a lot a long lines, you&#39;ll get savings, but it&#39;ll still use a ton of memory"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 10794850, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UqoFrMRuiNg/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hLWMAeIateGQYgeHMGZ5cVEE7uAw/mo/photo.jpg?sz=128", "display_name": "ToddCS", "link": "https://stackoverflow.com/users/10794850/toddcs"}, "is_accepted": false, "score": 1, "last_activity_date": 1545747052, "creation_date": 1545747052, "answer_id": 53923106, "question_id": 53893281, "link": "https://stackoverflow.com/questions/53893281/how-to-fix-out-of-memory-error-when-comparing-5-million-records-in-two-files-usi/53923106#53923106", "title": "How to fix out of memory error when comparing 5 million records in two files using Perl in windows environment", "body": "<p>The first question is, do you need to be using Perl to begin with?</p>\n\n<p>Have you thought about using standard Linux utilities?</p>\n\n<p>Depending on how your columns of data are constructed and delimited, there is a very good chance that Linux 'cut' could work for you to extract from each file only the column you need into a temp file.</p>\n\n<p>Then use Linux 'sort' to sort each temp file.</p>\n\n<p>Then use Linux 'diff' or 'comm' to compare the two temp files.</p>\n\n<p>None of the above-suggested utilities should have any out-of-memory issues even on two files of 5 million records, assuming you have a reasonable amount of memory and disk space (e.g., for 'sort' to create its own temporary files).</p>\n"}], "owner": {"reputation": 1, "user_id": 10822494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JYpjzU2auRo/AAAAAAAAAAI/AAAAAAAAAIY/B7eITuVXdmE/photo.jpg?sz=128", "display_name": "Suresh G", "link": "https://stackoverflow.com/users/10822494/suresh-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545747052, "creation_date": 1545456420, "last_edit_date": 1545456786, "question_id": 53893281, "link": "https://stackoverflow.com/questions/53893281/how-to-fix-out-of-memory-error-when-comparing-5-million-records-in-two-files-usi", "title": "How to fix out of memory error when comparing 5 million records in two files using Perl in windows environment", "body": "<p>I'm comparing two files of 5 million records each(each lines contains so many columns but I need to compare only 2 columns). any better approach to compare two files and find the differences without out of memory error?</p>\n\n<p>I have tried parsing each file into different hashes and comparing both hashes leads to out of memory error. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 31386, "user_id": 9661424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rnnvz.png?s=128&g=1", "display_name": "sticky bit", "link": "https://stackoverflow.com/users/9661424/sticky-bit"}, "edited": false, "score": 1, "creation_date": 1545439754, "post_id": 53892195, "comment_id": 94631195, "body": "Have you noticed, that <code>\u2018</code> isn&#39;t equal to <code>\u2019</code>, at least in your post?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545440038, "post_id": 53892195, "comment_id": 94631226, "body": "Be sure to <code>use utf8;</code> in your script, and if your string comes from somewhere else make sure it has been decoded from whatever encoding it comes in (commonly UTF-8)."}], "answers": [{"comments": [{"owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "edited": false, "score": 0, "creation_date": 1545694878, "post_id": 53892257, "comment_id": 94679493, "body": "After the fixes it worked for me as well. Thank you."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1545440683, "last_edit_date": 1545440683, "creation_date": 1545440114, "answer_id": 53892257, "question_id": 53892195, "link": "https://stackoverflow.com/questions/53892195/perl-regrex-that-captures-substring-between-tic-marks/53892257#53892257", "title": "perl regrex that captures substring between tic marks", "body": "<p>The final tick seems to be different in your regex than in the input string - char 8217 (RIGHT SINGLE QUOTATION MARK U+2019) versus 8216 (LEFT SINGLE QUOTATION MARK U+2018). Also, when using Unicode characters in the source, be sure to include</p>\n\n<pre><code>use utf8;\n</code></pre>\n\n<p>and save the file UTF-8 encoded.</p>\n\n<p>After fixing these two issues, the code worked for me:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\nuse utf8;\n\nmy $str = \"Saving to: \u2018wapenc?T=mavodi-7-13b-2b-3-96-1e3431a\u2019\";\n\n(my $results) = $str =~ /\u2018(.*?[^\\\\])\u2019/;\nprint $results if $results;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545441257, "post_id": 53892274, "comment_id": 94631350, "body": "This won&#39;t work (at least, it won&#39;t be pretty) if the input is UTF-8 encoded, because UTF-8 encoding contains bytes in the ASCII range."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545441819, "post_id": 53892274, "comment_id": 94631406, "body": "Extended characters in UTF-8 avoid 7-bit ASCII"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1545440272, "creation_date": 1545440272, "answer_id": 53892274, "question_id": 53892195, "link": "https://stackoverflow.com/questions/53892195/perl-regrex-that-captures-substring-between-tic-marks/53892274#53892274", "title": "perl regrex that captures substring between tic marks", "body": "<p>Your tic characters aren't in the 7-bit ASCII character set, so there is a whole character-encoding rabbit hole to go down here. But the quick and dirty solution is to capture everything in between extended characters.</p>\n\n<pre><code>($result) = $str =~ /[^\\0-\\x7f]+(.*?)[^\\0-\\x7f]/;\n</code></pre>\n\n<p><code>[^\\0-\\x7f]</code> matches characters with character values not between 0 and 127, i.e., anything that is not a 7-bit ASCII character including new lines, tabs, and other control sequences. This regular expression will work whether your input is UTF-8 encoded or has already been decoded, and may work for other character encodings, too.</p>\n"}], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 53892274, "answer_count": 2, "score": 0, "last_activity_date": 1545440683, "creation_date": 1545439178, "question_id": 53892195, "link": "https://stackoverflow.com/questions/53892195/perl-regrex-that-captures-substring-between-tic-marks", "title": "perl regrex that captures substring between tic marks", "body": "<p>I am trying to find a solution in perl that captures the filename in the following string -- between the tic marks.</p>\n\n<pre><code>my $str = \"Saving to: \u2018wapenc?T=mavodi-7-13b-2b-3-96-1e3431a\u2019\";\n\n(my $results) = $str =~ /\u2018(.*?[^\\\\])\u2018/;\nprint $results if $results;\n</code></pre>\n\n<p>I need to end up with wapenc?T=mavodi-7-13b-2b-3-96-1e3431a</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1545434079, "post_id": 53891736, "comment_id": 94630360, "body": "<i>sigh</i> The most efficient way is to get over your reluctance to use additional modules. Then use the <code>JSON</code> module."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1545434289, "post_id": 53891736, "comment_id": 94630408, "body": "@mob Hey, thanks for the replay (hope I didn&#39;t ask something stupid). I will use the <code>JSON</code> module, I meant before converting into this format. Please check my edit."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1545435880, "post_id": 53891736, "comment_id": 94630654, "body": "So the question is how to convert your arrayref of structures into a tree structure. Please edit your question to reflect that, and leave out the irrelevant parts about JSON."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545438483, "post_id": 53891736, "comment_id": 94631033, "body": "@Grinnz, thanks for the replay. hope that my edits succeed your suggestions."}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1545515881, "post_id": 53892171, "comment_id": 94644635, "body": "Thank you for your answer! Is it possible to somehow not to change the data of` <code>%data</code>? I would use a deep copy of the <code>%data</code> hash but it is not so efficient. Any sophisticated way to change the algorithm (for example by using a new empty hash)?"}, {"owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "reply_to_user": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1545604996, "post_id": 53892171, "comment_id": 94659900, "body": "What exactly do you mean by &#39;efficient&#39;?  There is nothing wrong with using <code>Storable</code> <code>dclone()</code> to (deep)copy <code>%data</code> before you build the tree. It will probably take less execution time than copying each key-value pair while iterating through the hash."}, {"owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "edited": false, "score": 0, "creation_date": 1545611702, "post_id": 53892171, "comment_id": 94661016, "body": "Thanks for the replay. I thought of using another hash or array in order to insert the data into it, while iterating. The thing is I&#39;ll need to use the data of <code>%data</code> for other features so it will take time to deep copy the hash into another hash. I was wondering if its possible to use another hash (without deep copy) in order to do those iterations (maybe change the algorithm a bit)."}], "tags": [], "owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "is_accepted": false, "score": 0, "last_activity_date": 1545439304, "last_edit_date": 1545439304, "creation_date": 1545438765, "answer_id": 53892171, "question_id": 53891736, "link": "https://stackoverflow.com/questions/53891736/converting-hash-to-json-format-file-perl/53892171#53892171", "title": "Converting hash to json format file [Perl]", "body": "<p>Just push the child elements into a children array in the parent:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nmy $data =\n    {\n     '10517' =&gt; {\n                 'parent' =&gt; '10516',\n                 'start' =&gt; 1545321095,\n                 'end' =&gt; 1545321098,\n                 'name' =&gt; 'A'\n             },\n     '10515' =&gt; {\n                 'parent' =&gt; '10513',\n                 'start' =&gt; 1545321091,\n                 'end' =&gt; 1545321095,\n                 'name' =&gt; 'B'\n             },\n     '10514' =&gt; {\n                 'parent' =&gt; '10513',\n                 'start' =&gt; 1545321091,\n                 'end' =&gt; 1545321095,\n                 'name' =&gt; 'C'\n             },\n     '10516' =&gt; {\n                 'parent' =&gt; '10513',\n                 'start' =&gt; 1545321091,\n                 'end' =&gt; 1545321095,\n                 'name' =&gt; 'D',\n             },\n     '10511' =&gt; {\n                 'parent' =&gt; '#####',\n                 'start' =&gt; 1545321090,\n                 'end' =&gt; 1545321099,\n                 'name' =&gt; 'E'\n             },\n     '10513' =&gt; {\n                 'parent' =&gt; '10511',\n                 'start' =&gt; 1545321091,\n                 'end' =&gt; 1545321097,\n                 'name' =&gt; 'F'\n             },\n     '10518' =&gt; {\n                 'parent' =&gt; '10516',\n                 'start' =&gt; 1545321094,\n                 'end' =&gt; 1545321098,\n                 'name' =&gt; 'G',\n             },\n     '10519' =&gt; {\n                 'parent' =&gt; '10517',\n                 'start' =&gt; 1545321096,\n                 'end' =&gt; 1545321097,\n                 'name' =&gt; 'H',\n             }\n };\nmy $root = [];\nfor my $id (keys %$data) {\n    my $entry = $data-&gt;{$id};\n    $entry-&gt;{id} = $id;\n    my $parent = $data-&gt;{$entry-&gt;{parent}};\n    unless ($parent){\n        push @$root, $entry\n    }\n    else{\n        push @{$parent-&gt;{children}},$entry;\n    }\n}\nprint Dumper $root;\n</code></pre>\n\n<p>see </p>\n\n<pre><code>perldoc perldsc \n</code></pre>\n\n<p>for an introduction to nested data structures.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 382, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545439304, "creation_date": 1545433798, "last_edit_date": 1545438613, "question_id": 53891736, "link": "https://stackoverflow.com/questions/53891736/converting-hash-to-json-format-file-perl", "title": "Converting hash to json format file [Perl]", "body": "<p>So I created a function that creates a hash <code>%data</code> which looks as follows:</p>\n\n<pre><code>{                                                                                                                                     \n   '10517' =&gt; {                                                                                                                        \n                'parent' =&gt; '10516', \n                'start' =&gt; 1545321095,\n                'end' =&gt; 1545321098,\n                'name' =&gt; 'A'                            \n              },                                                                                                                       \n   '10515' =&gt; {                                                                                                                        \n                'parent' =&gt; '10513', \n                'start' =&gt; 1545321091,\n                'end' =&gt; 1545321095,                    \n                'name' =&gt; 'B'                           \n              },                                                                                                                       \n   '10514' =&gt; {                                                                                                                        \n                'parent' =&gt; '10513',  \n                'start' =&gt; 1545321091,\n                'end' =&gt; 1545321095,                \n                'name' =&gt; 'C'                      \n              },                                                                                                                       \n   '10516' =&gt; {                                                                                                                        \n                'parent' =&gt; '10513',\n                'start' =&gt; 1545321091,\n                'end' =&gt; 1545321095,            \n                'name' =&gt; 'D',                                                                                 \n              },                                                                                                                       \n   '10511' =&gt; {                                                                                                                        \n                'parent' =&gt; '#####',\n                'start' =&gt; 1545321090,\n                'end' =&gt; 1545321099,            \n                'name' =&gt; 'E'                                             \n              },                                                                                                                       \n   '10513' =&gt; {                                                                                                                        \n                'parent' =&gt; '10511',\n                'start' =&gt; 1545321091\n                'end' =&gt; 1545321097             \n                'name' =&gt; 'F'\n              },                                                                                                                       \n   '10518' =&gt; {                                                                                                                        \n                'parent' =&gt; '10516',\n                'start' =&gt; 1545321094,\n                'end' =&gt; 1545321098,                    \n                'name' =&gt; 'G',                                                                                               \n              },                                                                                                                       \n   '10519' =&gt; {                                                                                                                        \n                'parent' =&gt; '10517',  \n                'start' =&gt; 1545321096,\n                'end' =&gt; 1545321097,            \n                'name' =&gt; 'H',                                                          \n              }                                                                                                                        \n} \n</code></pre>\n\n<p>I would like to create a function which converts the data into the following output:</p>\n\n<pre><code>    {       \n        'children' : [\n            {\n                'id' : 10511,\n                'start' : 1545321090,\n                'end' : 1545321099,         \n                'name' : 'E'    \n                'children' : [\n                    {\n                        'id' : 10513,\n                        'start' : 1545321091,\n                        'end' : 1545321097,             \n                        'name' : 'F'    \n                        'children' : [\n                            {\n                                'id' : 10516,\n                                'start' : 1545321091,\n                                'end' : 1545321095,         \n                                'name' : 'D'            \n                            },\n                            {\n                                'id' : 10514,\n                                'start' : 1545321091,\n                                'end' : 1545321095,\n                                'name' : 'C'                                    \n                            },\n                            {\n                                'id' : 10515,\n                                'start' : 1545321091,\n                                'end' : 1545321095,             \n                                'name' : 'B'                                \n                            },\n                            {                                                                                                                        \n                                'id' : '10517', \n                                'start' : 1545321095,\n                                'end' : 1545321098,\n                                'name' : 'A'                            \n                             }\n                        ]\n                    }\n                ]\n            }\n        ],\n    }\n</code></pre>\n\n<p>It is not the fully expected data (meaning I was too lazy to add the other <code>ids</code> into the nested format).</p>\n\n<p>I would like to convert the hash <code>%data</code> to be contain a tree-type format as was showen in the example. The final goal is to have a nested data so each parent hash an array of each children, and each one of those children has an array of their own children (if they have of course), and so on.</p>\n\n<p>How should I approch this problem? I'm looking for the cleanest and most effiecnt way possible. Also If possible, without any additional modules.</p>\n"}, {"tags": ["for-loop", "foreach", "idioms", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1545431742, "post_id": 53891490, "comment_id": 94629896, "body": "<code>for my $animal (@animals, &quot;not $input&quot;) }</code>... ;-)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1545431781, "post_id": 53891490, "comment_id": 94629910, "body": "But seriously, use <code>first</code> from <a href=\"http://p3rl.org/List::Util\" rel=\"nofollow noreferrer\">List::Util</a>."}, {"owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1545437879, "post_id": 53891490, "comment_id": 94630949, "body": "Haha, I like the first suggestion, but I will definitely try the <code>first</code> suggestion.  Pays to read the docs, as usual."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1547589233, "post_id": 53891490, "comment_id": 95241400, "body": "<code>if(grep(&#47;$input&#47;, @animals)){ true clause } else { equivalent of finally }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "is_accepted": false, "score": 3, "last_activity_date": 1545433628, "creation_date": 1545433628, "answer_id": 53891716, "question_id": 53891490, "link": "https://stackoverflow.com/questions/53891490/elegant-way-to-catch-for-loop-reached-last-element/53891716#53891716", "title": "Elegant way to catch &quot;for loop reached last element&quot;?", "body": "<p>You can wrap your loop with a labeled block like so:</p>\n\n<pre><code>outer: {\n    foreach my $animal (@animals) {\n        if ($input eq $animal) {\n            print \"Ah, yes, an $input is an animal!\\n\";\n            last outer;\n        }\n    }\n    print \"no animal found\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1545436055, "creation_date": 1545436055, "answer_id": 53891954, "question_id": 53891490, "link": "https://stackoverflow.com/questions/53891490/elegant-way-to-catch-for-loop-reached-last-element/53891954#53891954", "title": "Elegant way to catch &quot;for loop reached last element&quot;?", "body": "<p>Just have the loop set a variable so you can check if it's been set and act on it later:</p>\n\n<pre><code>my $found;\nforeach my $animal (@animals) {\n    if ($input eq $animal) {\n        $found = $animal;\n        last outer;\n    }\n}\nprint defined $found ? \"Ah, yes, an $input is an animal!\\n\" : \"no animal found\\n\";\n</code></pre>\n\n<p>But for this particular problem, as @choroba says, just use the <code>first</code> (or <code>any</code>) function from List::Util. Or if you will be checking a lot of inputs, it's easier to check a hash.</p>\n\n<pre><code>my %animals = map { ($_ =&gt; 1) } qw/cat dog horse/;\nprint exists $animals{$input} ? \"Ah, yes, an $input is an animal!\\n\" : \"no animal found\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1545594456, "creation_date": 1545594456, "answer_id": 53906696, "question_id": 53891490, "link": "https://stackoverflow.com/questions/53891490/elegant-way-to-catch-for-loop-reached-last-element/53906696#53906696", "title": "Elegant way to catch &quot;for loop reached last element&quot;?", "body": "<p>It's not the best solution here, but sometimes it helps to iterates over the indexes. </p>\n\n<pre><code>for my $i (0..$#animals) {\n    my $animal = $animals[$i];\n    ...\n}\n</code></pre>\n\n<p>Then, you can check if the index is <code>0</code> (first pass) or <code>$#a</code> (last pass).</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 2313506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533dedbdfc9b6e53b79604b0b18230b2?s=128&d=identicon&r=PG", "display_name": "Micha", "link": "https://stackoverflow.com/users/2313506/micha"}, "is_accepted": false, "score": 1, "last_activity_date": 1547588339, "creation_date": 1547588339, "answer_id": 54207233, "question_id": 53891490, "link": "https://stackoverflow.com/questions/53891490/elegant-way-to-catch-for-loop-reached-last-element/54207233#54207233", "title": "Elegant way to catch &quot;for loop reached last element&quot;?", "body": "<p>I'd keep it Old School and use a well-known C-idiom (for-loop split up in 1st statement and a while-loop).</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy $input = 'lion';\n\nmy @animals = qw/cat dog horse/;\n\nmy $index = 0;\n\nwhile ($index &lt; scalar @animals) {\n    if ($animals[ $index++ ] eq $input) {\n        print \"Ah, yes, an $input is an animal!\\n\";\n        last;\n    }\n}\n\nif ($index == scalar @animals) {\n    print \"Sorry, I'm not sure if $input is an animal or not\\n\";\n}\n</code></pre>\n\n<p>Thus, \"Sorry, I'm not sure if lion is an animal or not\" will come very naturally.\nHope, this helps. Regards, M.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 4968055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5c653c382f3d22b7f46e8edaff97fc3?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Lembark", "link": "https://stackoverflow.com/users/4968055/steven-lembark"}, "is_accepted": false, "score": 1, "last_activity_date": 1549051907, "creation_date": 1549051907, "answer_id": 54486569, "question_id": 53891490, "link": "https://stackoverflow.com/questions/53891490/elegant-way-to-catch-for-loop-reached-last-element/54486569#54486569", "title": "Elegant way to catch &quot;for loop reached last element&quot;?", "body": "<p>First is going to be the least overhead; eval avoids having to nest it all in if-blocks; newline because you probably don't really care what line it wasn't an animal on.</p>\n\n<pre><code>eval\n{\n  my $found = first { check for an animal } @animalz\n  or die \"Sorry, no animal found.\\n\";\n\n  # process an animal\n\n  1\n}\n// do\n{\n  # deal with non-animals\n};\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 2, "answer_count": 5, "score": 4, "last_activity_date": 1549051907, "creation_date": 1545431487, "question_id": 53891490, "link": "https://stackoverflow.com/questions/53891490/elegant-way-to-catch-for-loop-reached-last-element", "title": "Elegant way to catch &quot;for loop reached last element&quot;?", "body": "<p>Sometimes in Perl, I write a <code>for</code> / <code>foreach</code> loop that iterates over values to check a value against a list.  After the first hit, the loop can exit, as we've satisfied my test condition.  For example, this simple code:</p>\n\n<pre><code>my @animals = qw/cat dog horse/;\n\nforeach my $animal (@animals)\n{\n  if ($input eq $animal)\n  {\n    print \"Ah, yes, an $input is an animal!\\n\";\n    last;\n  }\n}\n# &lt;-----\n</code></pre>\n\n<p>Is there an elegant way - an overloaded keyword, maybe - to handle \"for loop reached last element\"?  Something to put at the arrow above?</p>\n\n<p>I can think of ways to do this, like creating / setting an additional <code>$found</code> variable and testing it at the end.... But I was hoping Perl might have something else built in, like:</p>\n\n<pre><code>foreach my $animal (@animals)\n{\n  if ($input eq $animal)\n  {\n    print \"Ah, yes, an $input is an animal!\\n\";\n    last;\n  }\n} finally {\n  print \"Sorry, I'm not sure if $input is an animal or not\\n\";\n}\n</code></pre>\n\n<p>which would make this test more intuitive.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 244, "user_id": 10793711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o9Vf7.jpg?s=128&g=1", "display_name": "starbelly", "link": "https://stackoverflow.com/users/10793711/starbelly"}, "edited": false, "score": 1, "creation_date": 1545425829, "post_id": 53890413, "comment_id": 94628479, "body": "Note that you are using barewords as values and with no warnings or strict pragma enabled this is valid, but it is highly discouraged and is unidiomatic. Enabling the  warnings and strict pragmas should be the first thing you do when you begin writing new code.   Check out this article on barewords : <a href=\"https://perlmaven.com/barewords-in-perl\" rel=\"nofollow noreferrer\">perlmaven.com/barewords-in-perl</a>  I would also advise you to read Modern Perl : <a href=\"http://modernperlbooks.com/books/modern_perl_2016/index.html\" rel=\"nofollow noreferrer\">modernperlbooks.com/books/modern_perl_2016/index.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1545424099, "creation_date": 1545424099, "answer_id": 53890466, "question_id": 53890413, "link": "https://stackoverflow.com/questions/53890413/loop-through-strings-stored-as-hash-values-perl/53890466#53890466", "title": "Loop through strings stored as hash values Perl", "body": "<p>It looks like you want to convert a string into a list of individual characters.  The <code>split</code> function with an empty pattern will perform this transformation.</p>\n\n<pre><code>...\nmy @chars = split //, $value;\nforeach my $nucl (@chars) {\n    print \"$nucl\\n\";\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1934, "user_id": 10667839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9ee13d3681ace95a1c13693db607f72?s=128&d=identicon&r=PG&f=1", "display_name": "clamp", "link": "https://stackoverflow.com/users/10667839/clamp"}, "is_accepted": false, "score": 2, "last_activity_date": 1545424140, "creation_date": 1545424140, "answer_id": 53890470, "question_id": 53890413, "link": "https://stackoverflow.com/questions/53890413/loop-through-strings-stored-as-hash-values-perl/53890470#53890470", "title": "Loop through strings stored as hash values Perl", "body": "<p>Take a look at</p>\n\n<pre><code>perldoc -fsplit\n</code></pre>\n\n<p>You need something like </p>\n\n<pre><code>print join(\"\\n\", split('',$value));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1545426234, "creation_date": 1545426234, "answer_id": 53890759, "question_id": 53890413, "link": "https://stackoverflow.com/questions/53890413/loop-through-strings-stored-as-hash-values-perl/53890759#53890759", "title": "Loop through strings stored as hash values Perl", "body": "<p>If you just want to <a href=\"https://perldoc.pl/perlfaq4#How-can-I-count-the-number-of-occurrences-of-a-substring-within-a-string?\" rel=\"nofollow noreferrer\">count characters</a>, there's no need to split anything:</p>\n\n<pre><code>my $a_count = $value =~ tr/A//;\nmy $c_count = $value =~ tr/C//;\n</code></pre>\n\n<p>etc.</p>\n"}], "owner": {"reputation": 181, "user_id": 9788900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e06bd568b6c8e3de88f6edd4ba96eb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Callie", "link": "https://stackoverflow.com/users/9788900/callie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 53890466, "answer_count": 3, "score": 1, "last_activity_date": 1545426234, "creation_date": 1545423748, "question_id": 53890413, "link": "https://stackoverflow.com/questions/53890413/loop-through-strings-stored-as-hash-values-perl", "title": "Loop through strings stored as hash values Perl", "body": "<p>I have created a hash which has following key:value structure.</p>\n\n<pre><code>%multifasta = ('sequence1', ACCGTG, 'sequence2' , AGTCGTAGC, 'sequence3' , AGTCGCTAGCATAGCA)\n</code></pre>\n\n<p>where, the ACGT strings are stored as hash values and sequence number is stored as hash keys.</p>\n\n<p>I want to loop through the strings stored as hash values to count the number of A,C,G, and T nucleotide.</p>\n\n<p>What I tried is :</p>\n\n<pre><code>while(my($key, $value) = each %multifasta){\n    print \"$key\\n\";\n    my $len = length($value);\n    my $nucl;\n    foreach $nucl($value){\n        print \"$nucl\\n\";\n    }\n}\n</code></pre>\n\n<p>but, instead of printing values like this for sequence1 in the <code>print \"$nucl\\n\";</code></p>\n\n<pre><code>A\nC\nC\nG\nT\nG\n</code></pre>\n\n<p>it is printing output like</p>\n\n<pre><code>ACCGTG \n</code></pre>\n\n<p>Do I need to convert the values to array and then iterate through array or I can loop through the strings and print individual element of the string?</p>\n"}, {"tags": ["perl", "command", "command-line-interface"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545415909, "post_id": 53889078, "comment_id": 94625015, "body": "App::Cmd supports subcommands though I haven&#39;t used it and I can&#39;t immediately find documentation for such."}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545416692, "post_id": 53889078, "comment_id": 94625293, "body": "I just found <a href=\"https://metacpan.org/pod/App::Cmd::Subdispatch::DashedStyle\" rel=\"nofollow noreferrer\">metacpan.org/pod/App::Cmd::Subdispatch::DashedStyle</a>, but it&#39;s dashed style and it&#39;s not clear how to use it"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545417842, "post_id": 53889078, "comment_id": 94625752, "body": "An interesting module. Their <a href=\"https://metacpan.org/pod/distribution/App-Cmd/lib/App/Cmd/Tutorial.pod\" rel=\"nofollow noreferrer\">App::Cmd::Tutorial</a> flat out states that it &quot;<i>handles commands with multiple subcommands</i>&quot; but I couldn&#39;t find a single hint on how to do that. So I&#39;d expect that there is no distinct API but you need to fish the capability out of what is described.  Perhaps contact the maintainer for pointers?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545418581, "post_id": 53889078, "comment_id": 94626027, "body": "It seems to be <a href=\"https://metacpan.org/pod/App::Cmd::Subdispatch\" rel=\"nofollow noreferrer\">App::Cmd::Subdispatch</a>, with <code>$subdispatch-&gt;app;</code> where the <code>app</code> method &quot;<i>returns the application that this subdispatch is a command of</i>.&quot; I guess it implements cascading of sorts, whereby what follows a command is in itself a command. Too bad it doesn&#39;t even say what <code>$subdispatch</code> is; it looks like you&#39;ll just have to play around with it to figure out how to use it.  Hope this helps at least some"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1548405328, "post_id": 53889078, "comment_id": 95537332, "body": "@rjbs can you look on this question please ?"}], "answers": [{"tags": [], "owner": {"reputation": 337, "user_id": 4569627, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mcy6AEMLXvM/AAAAAAAAAAI/AAAAAAAAArs/xo070u1kFvI/photo.jpg?sz=128", "display_name": "cwbrd", "link": "https://stackoverflow.com/users/4569627/cwbrd"}, "is_accepted": false, "score": 1, "last_activity_date": 1577484084, "creation_date": 1577484084, "answer_id": 59506427, "question_id": 53889078, "link": "https://stackoverflow.com/questions/53889078/how-to-implement-subcommand-using-appcmd-module/59506427#59506427", "title": "How to implement subcommand using App::Cmd module?", "body": "<p>It took me a while to find some example code on Github (<a href=\"https://github.com/jwbargsten/app-cmd-nested-example\" rel=\"nofollow noreferrer\">[1]</a>, <a href=\"https://github.com/frioux/drinkup\" rel=\"nofollow noreferrer\">[2]</a>) to figure this out.\nFor the <code>foo bar baz</code> use case, you need the following:</p>\n\n<pre><code># Foo.pm is unchanged from your code\n\n# Bar.pm is no longer a command module\n$ cat lib/Foo/Command/Bar.pm \npackage Foo::Command::Bar;\n\nuse base qw/App::Cmd::Subdispatch/;\nuse constant plugin_search_path =&gt; __PACKAGE__;\n\n# no need for execute(), this module only dispatches subcommands\n# abstract() and show_desc() are still supported\n\n1;\n\n# Finally, a subcommand like `baz` needs its own script Baz.pm \n# (mind the file location)\n$ cat lib/Foo/Command/Bar/Baz.pm \npackage Foo::Command::Bar::Baz;\nuse App::Cmd::Setup -command;\n\nsub execute {\n    print \"Hello world\\n\";\n}\n\n1;\n</code></pre>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1577484084, "creation_date": 1545415337, "last_edit_date": 1545415705, "question_id": 53889078, "link": "https://stackoverflow.com/questions/53889078/how-to-implement-subcommand-using-appcmd-module", "title": "How to implement subcommand using App::Cmd module?", "body": "<p>I use <a href=\"https://metacpan.org/pod/App::Cmd\" rel=\"nofollow noreferrer\">App::Cmd</a> for building my CLI apps.</p>\n\n<p>Is it possible to implement subcommand like <code>docker network inspect</code> ? (assuming that <code>inspect</code> is subcommand)</p>\n\n<p>I have following code for implementing command <code>foo bar</code></p>\n\n<pre><code>$ cat bin/foo\n#!/usr/bin/perl\nuse Foo;\nFoo-&gt;run;\n\n$ cat lib/Foo.pm \npackage Foo;\nuse App::Cmd::Setup -app;\n1;\n\n$ cat lib/Foo/Command/bar.pm \npackage Foo::Command::bar;\nuse App::Cmd::Setup -command;\n\nsub execute {\n    print \"Hello world\\n\";\n}\n\n1;\n</code></pre>\n\n<p>I implemented subcommand <code>foo bar baz</code> by modifying <code>lib/Foo/Command/bar.pm</code> as:</p>\n\n<pre><code>sub execute {\n    my ( $self, $opt, $args ) = @_;    \n    my $subcommand = $args-&gt;[0];\n\n    if ( $subcommand eq 'baz' ) {\n        print \"Subcommand baz is working\\n\";\n    }\n\n    ...\n}\n</code></pre>\n\n<p>Is there any better way ?</p>\n\n<p>Big minus of <code>$args-&gt;[0]</code> approach is that you can not auto generate <code>--help</code>  (<code>foo bar</code> will show same help as <code>foo bar baz</code>)</p>\n\n<p>In other words, <code>App::Cmd</code> is sharpen for <code>&lt;bin_name&gt; &lt;command&gt; [-?h] [long options...]</code> call syntax, but I need <code>&lt;bin_name&gt; &lt;command&gt; &lt;subcommand&gt; [-?h] [long options...]</code> syntax.</p>\n\n<p>P.S. I created <a href=\"https://github.com/pavelsr/app_cmd_demo/blob/subcommand/lib/Foo/Command/bar.pm\" rel=\"nofollow noreferrer\">Github repository</a> for experiments</p>\n"}, {"tags": ["perl", "export-to-csv"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1545402373, "creation_date": 1545402373, "answer_id": 53886396, "question_id": 53886354, "link": "https://stackoverflow.com/questions/53886354/print-data-to-csv-file-form-an-array/53886396#53886396", "title": "print data to csv file form an array", "body": "<p>You can't use bareword filehandles as subroutine parameters. Use lexical filehandles instead:</p>\n\n<pre><code>open my $out, '&lt;', $file or die ...;\n$csv-&gt;print($out, \\@columns);\n</code></pre>\n\n<p>Or, use the typeglob sigil (less preferable):</p>\n\n<pre><code>$csv-&gt;print(*OUT, \\@columns);\n</code></pre>\n\n<p>Moreover, you opened the file for reading (<code>&lt;</code>). You can't print to an input filehandle. Did you mean <code>&gt;</code>?</p>\n"}], "owner": {"reputation": 125, "user_id": 10690484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2f3b349f09d335afad326d1355f86a?s=128&d=identicon&r=PG&f=1", "display_name": "Nutiu Radu", "link": "https://stackoverflow.com/users/10690484/nutiu-radu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 53886396, "answer_count": 1, "score": 1, "last_activity_date": 1545402373, "creation_date": 1545402173, "question_id": 53886354, "link": "https://stackoverflow.com/questions/53886354/print-data-to-csv-file-form-an-array", "title": "print data to csv file form an array", "body": "<p>I tried to print an array to a csv file, and to do this write this code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Text::CSV;\n\nuse Text::CSV_XS;\n\nmy $csv = Text::CSV_XS-&gt;new();\n\nmy $file = \"data.csv\";\n\nopen(OUT, '&lt;', $file) or die \"Could not open '$file' $!\\n\";\n\nmy @columns = (qw/what ever the items are for each columns/);\n\nmy $status = $csv-&gt;print(OUT, \\@columns);\n</code></pre>\n\n<p>And this script return me this:\nBareword \"OUT\" not allowed while \"strict subs\" in use at test.pl line 37.\nExecution of test.pl aborted due to compilation errors.</p>\n\n<p>I try to use Text::CSV or Text::CSV_XS to print data in csv and i need more information about syntax.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1545401840, "creation_date": 1545401840, "answer_id": 53886274, "question_id": 53886144, "link": "https://stackoverflow.com/questions/53886144/how-to-fix-possible-unintended-interpolation-of-in-regex/53886274#53886274", "title": "How to fix &#39;Possible unintended interpolation of $\\ in regex&#39;?", "body": "<p>This warning is explained in <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldiag</a>.</p>\n\n<blockquote>\n  <p><strong>Possible unintended interpolation of $\\ in regex</strong></p>\n  \n  <p>(W ambiguous) You said something like <code>m/$\\/</code> in a regex. The regex <code>m/foo$\\s+bar/m</code> translates to: match the word 'foo', the output record separator (see $\\ in perlvar) and the letter 's' (one time or more) followed by the word 'bar'.</p>\n  \n  <p>If this is what you intended then you can silence the warning by using <code>m/${\\}/</code> (for example: <code>m/foo${\\}s+bar/</code>).</p>\n  \n  <p>If instead you intended to match the word 'foo' at the end of the line followed by whitespace and the word 'bar' on the next line then you can use <code>m/$(?)\\/</code> (for example: <code>m/foo$(?)\\s+bar/</code>).</p>\n</blockquote>\n\n<p><code>$\\</code> is the output record separator. It's what Perl automatically appends to anything that you output using <code>print()</code>. The default value is <code>undef</code>.</p>\n\n<p>So, in your regex it's <em>probably</em> doing nothing (as <code>undef</code> becomes an empty string when used in a string). But it's impossible to be sure without seeing the rest of the code - as you might change the value of <code>$\\</code> elsewhere in the program.</p>\n"}], "owner": {"reputation": 80, "user_id": 10810447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd5ab60ad7af56e2a45730850b4d408?s=128&d=identicon&r=PG&f=1", "display_name": "J. Sch&#252;bel", "link": "https://stackoverflow.com/users/10810447/j-sch%c3%bcbel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1765, "favorite_count": 0, "accepted_answer_id": 53886274, "answer_count": 1, "score": 1, "last_activity_date": 1545401840, "creation_date": 1545401220, "last_edit_date": 1545401813, "question_id": 53886144, "link": "https://stackoverflow.com/questions/53886144/how-to-fix-possible-unintended-interpolation-of-in-regex", "title": "How to fix &#39;Possible unintended interpolation of $\\ in regex&#39;?", "body": "<p>At work I have this old script whose author is no longer with the company. The script itself runs perfectly fine, but everytime I run it, I get the following warning:</p>\n\n<pre><code>Possible unintended interpolation of $\\ in regex at /bin/script line 223.\nPossible unintended interpolation of $\\ in regex at /bin/script line 226.\n</code></pre>\n\n<p>The two lines I marked are the corresponding ones:</p>\n\n<pre><code>sub get_modul {\n\n...\n\n    open (IN, \"path/to/file\") || Pl_Fatal (\"Error trying to open file\");\n    $tempvar = &lt;IN&gt;;\n    close (IN);\n    @temp = split(\":\", $tempvar);\n    if ($#temp != 1) {\n       $MODUL =~ s/$\\$2\\///;   # &lt;--\n    }\n    else {\n        $MODUL =~ s/$\\$0\\///;  # &lt;--\n    }\n}\n</code></pre>\n\n<p>As I receive a warning for both lines that exclude each other I think it does not have to do anything with the input but just in case: </p>\n\n<p>the script parses <code>:server:user@host:/path/to/rep</code> or <code>/path/to/rep</code> and the output in both cases is <code>/path/to/rep</code>.</p>\n\n<p>I'm running Perl v5.18.2 if that's of any help.</p>\n"}, {"tags": ["linux", "bash", "shell", "perl", "awk"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1545383693, "post_id": 53881927, "comment_id": 94610603, "body": "Please add your desired output for that sample input to your question."}, {"owner": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1545383929, "post_id": 53881927, "comment_id": 94610711, "body": "There you go, I&#39;ve got 3 variables that I want to store the output in. (In reality I&#39;ve got about 15 variables and the text file is way bigger so this is just a sample output.)"}, {"owner": {"reputation": 983, "user_id": 8001873, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/prRA5.png?s=128&g=1", "display_name": "User123", "link": "https://stackoverflow.com/users/8001873/user123"}, "edited": false, "score": 0, "creation_date": 1545384989, "post_id": 53881927, "comment_id": 94611191, "body": "Can&#39;t you directly assign the variable names in script like: <code>Application=&quot;The value of $(grep -o &quot;x_snd_appli&quot; &#47;path&#47;file_name)&quot;</code> and so on for other...?"}, {"owner": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "edited": false, "score": 0, "creation_date": 1545385244, "post_id": 53881927, "comment_id": 94611290, "body": "As mentioned in my last line, the file is big and that would require to open the file about 15 times to process it so directly assigning it wouldn&#39;t be ideal for speed."}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 2, "creation_date": 1545385454, "post_id": 53881927, "comment_id": 94611402, "body": "You could use <code>declare</code> like this <code>declare $(awk &#39;BEGIN{print &quot;var1=x\\nvar2=y&quot;}&#39;)</code> then <code>echo $var1</code>and <code>echo $var2</code>. Substitute your own <code>awk</code> stuff, but you get the idea."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1545386773, "post_id": 53881927, "comment_id": 94612053, "body": "It is a very frequent antipattern to run a file through a shell loop and repeatedly extract individual fields with Awk, when the whole process would be elegant and trivial as a complete Awk script. Can you show us some things you want to do with these variables?"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1545386867, "post_id": 53881927, "comment_id": 94612105, "body": "Or you could <code>read</code> multiple things <code>IFS=&#39;|&#39; read v1 v2 v3 &lt; &lt;(awk &#39;BEGIN{print &quot;a|b|c&quot;}&#39;)</code>"}, {"owner": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1545387186, "post_id": 53881927, "comment_id": 94612267, "body": "@tripleee the reason I&#39;m using bash is because I need bash for the previous iteration of the script (running a lot of system commands). I would eventually like to line up all the values of these parameters so I have a nice output of application - user - command (as an example)."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1545387357, "post_id": 53881927, "comment_id": 94612348, "body": "If you have confidence in the input, an Awk script which prints out the values as Bash assignments you can <code>eval</code> would work, but you obviously have to be careful."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1545406934, "post_id": 53881927, "comment_id": 94621444, "body": "When you say <code>I currently have a variable containing..</code> - do you <b>really</b> have a <b>variable</b> containing all of the text that follows or do you actually have a <b>file</b> containing multiple variable assignments as shown in that text?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "edited": false, "score": 0, "creation_date": 1545387664, "post_id": 53882846, "comment_id": 94612499, "body": "Good idea, however I can not apply this. I guess I started this off wrong by saying I have an input file, those values are already in a variable and I read the variable and need to parse it.  Writing it to a file is not possible (too much data to constantly write/read)."}, {"owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "reply_to_user": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "edited": false, "score": 0, "creation_date": 1545388686, "post_id": 53882846, "comment_id": 94612995, "body": "@DaanTheunis It doesn&#39;t matter where the input is coming from. See edit."}], "tags": [], "owner": {"reputation": 13110, "user_id": 845034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f8d643d24f2f605806e260b57977541?s=128&d=identicon&r=PG", "display_name": "steffen", "link": "https://stackoverflow.com/users/845034/steffen"}, "is_accepted": true, "score": 1, "last_activity_date": 1545388677, "last_edit_date": 1545388677, "creation_date": 1545387117, "answer_id": 53882846, "question_id": 53881927, "link": "https://stackoverflow.com/questions/53881927/bash-awk-find-multiple-patterns-and-assign-to-different-variables/53882846#53882846", "title": "Bash AWK find multiple patterns and assign to different variables", "body": "<p>What you have already is a valid shell script. You can just source it:</p>\n\n<pre><code>$ source ./file\n$ echo $x_dup_from_xfer\n0\n</code></pre>\n\n<p>To reassign, a little sed/awk can help, for example:</p>\n\n<pre><code>$ eval $(sed -n 's/^x_route_from_xfer=/Route=/p' file)\n$ echo $Route\n0\n</code></pre>\n\n<p><code>-n</code> turns off automatic printing of lines and <code>s</code> substitutes, <code>p</code> prints the substitution result. Multiple sed commands:</p>\n\n<pre><code>$ eval $(sed -n 's/^x_route_from_xfer=/Route=/p;s/.../.../p' file)\n</code></pre>\n\n<p>Take care however, that source and eval require that it's you who controls the file contents.</p>\n\n<p>The input may also come from a variable:</p>\n\n<pre><code>eval $(sed ... &lt;&lt;&lt; \"$var\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "edited": false, "score": 0, "creation_date": 1545389196, "post_id": 53883012, "comment_id": 94613267, "body": "This looked promising, however doesn&#39;t seem to work when using a variable as input? As the script does.. nothing, just stays black:  <code>transfer=`output from application command` while read -r line; do eval &quot;$line&quot; done &lt; &lt;(     awk -F= &#39;BEGIN {     a[&quot;x_destination&quot;] = &quot;destination&quot;     }     a[$1] {print a[$1] &quot;=&quot; $2}     &#39; &quot;$transfer&quot;     )  echo $destination</code>"}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "edited": false, "score": 0, "creation_date": 1545436002, "post_id": 53883012, "comment_id": 94630673, "body": "I&#39;ve modified the script for the case the input is supplied via a variable. Would you please test it?"}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": false, "score": 0, "last_activity_date": 1545436165, "last_edit_date": 1545436165, "creation_date": 1545387760, "answer_id": 53883012, "question_id": 53881927, "link": "https://stackoverflow.com/questions/53881927/bash-awk-find-multiple-patterns-and-assign-to-different-variables/53883012#53883012", "title": "Bash AWK find multiple patterns and assign to different variables", "body": "<p>How about:</p>\n\n<pre><code>#!/bin/bash\n\ntransfer=\"\nx_snd_user=''\nx_snd_appli=''\nx_snd_text=''\nx_rcv_user=''\nx_rcv_appli=''\nx_rcv_text=''\nx_dup_from_xfer='0'\nx_route_from_xfer='0'\nx_route_to_xfer='0'\nx_reply_by_xfer='0'\nx_reply_to_xfer='0'\nx_routed_to_XIB='N'\nx_end_xfer_script=''\nx_ftp_command=''\n\"\n# or assign \"transfer\" with a output of other command.\n\nwhile read -r line; do\n    eval \"$line\"\ndone &lt; &lt;(\nawk -F= 'BEGIN {\n    a[\"x_snd_appli\"] = \"Application\"\n    a[\"x_route_from_xfer\"] = \"Route\"\n    a[\"x_ftp_command\"] = \"Command\"\n    }\n    a[$1] {print a[$1] \"=\" $2}\n' &lt;&lt;&lt; \"$transfer\"\n)\n\necho \"Application=$Application\"\necho \"Route=$Route\"\necho \"Command=$Command\"\n</code></pre>\n\n<p>We need to pay most attention when using <code>eval</code> as others mention.</p>\n"}], "owner": {"reputation": 27, "user_id": 4866357, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205535929070807/picture?type=large", "display_name": "Daan Theunis", "link": "https://stackoverflow.com/users/4866357/daan-theunis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 53882846, "answer_count": 2, "score": 1, "last_activity_date": 1545436165, "creation_date": 1545383275, "last_edit_date": 1545387816, "question_id": 53881927, "link": "https://stackoverflow.com/questions/53881927/bash-awk-find-multiple-patterns-and-assign-to-different-variables", "title": "Bash AWK find multiple patterns and assign to different variables", "body": "<p>I currently have a variable containing values resembling this:</p>\n\n<pre><code>x_snd_user=''\nx_snd_appli=''\nx_snd_text=''\nx_rcv_user=''\nx_rcv_appli=''\nx_rcv_text=''\nx_dup_from_xfer='0'\nx_route_from_xfer='0'\nx_route_to_xfer='0'\nx_reply_by_xfer='0'\nx_reply_to_xfer='0'\nx_routed_to_XIB='N'\nx_end_xfer_script=''\nx_ftp_command=''\n</code></pre>\n\n<p>How can I, for example, match 3 patterns (<code>x_snd_appli, x_route_from_xfer, x_ftp_command</code>), format the patterns (<code>awk -F\"'\" '{print $2}'</code>) and assign them to different variables? </p>\n\n<p>For example, I've got variables and want to assign the output to these:</p>\n\n<pre><code> - Application= The value of &lt;x_snd_appli&gt;\n - Route= The value of &lt;x_route_from_xfer&gt;\n - Command= The value of &lt;x_ftp_command&gt;\n</code></pre>\n\n<p>Preferably not with something that needs to be installed as that's not possible.\nSo with AWK/perl if that's possible would be preferred.</p>\n\n<p>The complete content of the variable is pretty big (about 45 lines) <em>and</em> it's possible that this runs about 1000x when I run the script 1x.\nSo I don't want to write data to a file/loop over it 10 times to awk/grep different values and assign them to variables.</p>\n"}, {"tags": ["excel", "perl", "hyperlink"], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545382511, "post_id": 53880990, "comment_id": 94610071, "body": "Its not working in Spreadsheet::WriteExcel. It shows error as Unknown defined name Hyperlink in formula"}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545382560, "post_id": 53880990, "comment_id": 94610088, "body": "Try HYPERLINK in all caps...  a guess, but worth a try."}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545382733, "post_id": 53880990, "comment_id": 94610168, "body": "This is also not Working."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545382872, "post_id": 53880990, "comment_id": 94610242, "body": "Function must not be available on Spreadsheet::.  Have you tried option 1?"}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545382962, "post_id": 53880990, "comment_id": 94610279, "body": "Yeah I tried both. It shows Unknown function HYPERLINK() in formula"}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545383751, "post_id": 53880990, "comment_id": 94610631, "body": "What error message did the option <i>without</i> the hyperlink formula give you?  The first two lines of code, not the last four..."}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "reply_to_user": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1545384185, "post_id": 53880990, "comment_id": 94610834, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185598/discussion-between-naveen-prakash-and-hambone\">continue this discussion in chat</a>."}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545384270, "post_id": 53880990, "comment_id": 94610868, "body": "The first two lines works fine and I get the expected output. But while opening Excel file it shows an warning saying Data may have been lost."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545396712, "post_id": 53880990, "comment_id": 94616606, "body": "You sure I can&#39;t talk you into upgrading to Excel::Writer::XLSX?"}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545629734, "post_id": 53880990, "comment_id": 94663473, "body": "No. We are supposed to use Spreadsheet::WriteExcel only. Anyway thanks for your efforts. I have removed merging concept for time being."}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": false, "score": 1, "last_activity_date": 1545378497, "creation_date": 1545378497, "answer_id": 53880990, "question_id": 53879174, "link": "https://stackoverflow.com/questions/53879174/merging-the-cells-in-excel-and-giving-the-hyperlink-using-spreadsheetwriteexce/53880990#53880990", "title": "Merging the cells in excel and giving the hyperlink using Spreadsheet::WriteExcel", "body": "<p>I can't promise this works on Spreadsheet::WriteExcel, but it does on Excel::Writer::XLSX.  I'd encourage you to try it on Spreadsheet::WriteExcel.</p>\n\n<p>With merged ranges, once you declare a format, you need to continue using it for that range and never use it for non-merged ranges.  So, if you take your code and add the tag and the format object:</p>\n\n<pre><code>$Log_Sheet-&gt;merge_range(\"D2:E2\", 'Home', $MergedFormat);\n$Log_Sheet-&gt;write_url('D2', 'internal:sheet1!A1', 'Click Me!', $MergedFormat);\n</code></pre>\n\n<p>It does appear to work...  on Excel::Writer::XLSX.  Sorry to keep referencing that.</p>\n\n<p>Alternatively, per the previous post (<a href=\"https://stackoverflow.com/questions/53863832/file-errordata-may-have-been-lost-while-giving-hyperlinks/53868756#53868756\">File Error:data may have been lost while giving hyperlinks</a>), you can also use the built-in Hyperlink function within Excel:</p>\n\n<pre><code>my $merged = $workbook-&gt;add_format();\n$worksheet-&gt;merge_range(\"A10:A11\",\n  qq{=hyperlink(\"#'Sheet3'!A1\",\"Click Here!\")},\n  $merged);\n</code></pre>\n"}], "owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545378497, "creation_date": 1545366611, "question_id": 53879174, "link": "https://stackoverflow.com/questions/53879174/merging-the-cells-in-excel-and-giving-the-hyperlink-using-spreadsheetwriteexce", "title": "Merging the cells in excel and giving the hyperlink using Spreadsheet::WriteExcel", "body": "<p>I am using Spreadsheet::WriteExcel. I want to merge two cells and give the hyperlink to the content inside merged cells.</p>\n\n<p>I have tried like this.</p>\n\n<pre><code>$Log_Sheet-&gt;merge_range('D2:E2','Home',$MergedFormat);\n$Log_Sheet-&gt;write_url('D2','internal:sheet1!A1');\n</code></pre>\n\n<p>This is working fine but when I try to open a file it shows a warning saying File error: data may have been lost. This occurs because D2 cell is being overwritten.</p>\n\n<p>How can I merge cells and give hyperlink in one call?</p>\n"}, {"tags": ["linux", "perl", "ssh"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 537, "user_id": 7772730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-gEpPMi26bPk/AAAAAAAAAAI/AAAAAAAAOwI/l9THo88VIcA/photo.jpg?sz=128", "display_name": "Tan Yih Wei", "link": "https://stackoverflow.com/users/7772730/tan-yih-wei"}, "edited": false, "score": 0, "creation_date": 1545415922, "post_id": 53877566, "comment_id": 94625018, "body": "@TanYihWei You are welcome.  Please let me know if questions come up."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1545376107, "last_edit_date": 1545376107, "creation_date": 1545349973, "answer_id": 53877566, "question_id": 53877483, "link": "https://stackoverflow.com/questions/53877483/ssh-create-directory-in-remote-site-using-perl-script/53877566#53877566", "title": "SSH Create Directory In Remote Site Using Perl Script", "body": "<p>The bracket(s), single <code>[</code> or the pair <code>[ ]</code>, is a builtin in <code>bash</code> which is a test operator (see <code>man test</code>), and the last use of it is incorrect.  But you don't need it to make a directory </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $ssh = '/usr/bin/ssh';\n\nmy $user_id = ...\nmy $host    = ...\n\nmy $to = quotemeta $user_id.'@'.$host;\n\nmy $cmd = 'mkdir -p TEST_MKDIR_OVER_SSH';\n\nsystem(\"$ssh $to $cmd\") == 0  or die \"Can't mkdir: $!\";\n</code></pre>\n\n<p>The <code>mkdir</code> is quiet with <code>-p</code> if a directory already exists, and it returns succes what also defeats the purpose of <code>[ ]</code> (if that was the intent). But an actual error -- a <em>file</em> with that name exists, no permissions on the path, etc -- does make its way back to the script, as you'd want, and a string with the error message is in <code>$!</code> so please test for this.</p>\n\n<p>If you simply wish to know whether the directory existed please put back your test branch, or just omit <code>-p</code> and analyze the  <code>$!</code> for what that message is on your system.</p>\n\n<p>As for the second attempt: the command to be executed runs on the remote system and has nothing to do with this script anymore (apart from interpolated variables).  So Perl functions or libraries from this script make no sense in that command.</p>\n\n<p>For the next step I suggest to look into modules for (preparing and) running external commands, that are much more helpful than the bare <code>system</code>. </p>\n\n<p>Some, from simple to more capable: <a href=\"https://metacpan.org/pod/IPC::System::Simple\" rel=\"noreferrer\">IPC::System::Simple</a>, <a href=\"https://metacpan.org/pod/Capture::Tiny\" rel=\"noreferrer\">Capture::Tiny</a>, <a href=\"https://metacpan.org/pod/IPC::Run3\" rel=\"noreferrer\">IPC::Run3</a>, <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"noreferrer\">IPC::Run</a>. Also see <a href=\"https://metacpan.org/pod/String::ShellQuote\" rel=\"noreferrer\">String::ShellQuote</a>, to prepare commands and avoid quoting issues, shell injection bugs, and other problems. A recent <a href=\"https://stackoverflow.com/a/53163525/4653379\">post</a> has examples of some of this; search for more.</p>\n"}, {"comments": [{"owner": {"reputation": 537, "user_id": 7772730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-gEpPMi26bPk/AAAAAAAAAAI/AAAAAAAAOwI/l9THo88VIcA/photo.jpg?sz=128", "display_name": "Tan Yih Wei", "link": "https://stackoverflow.com/users/7772730/tan-yih-wei"}, "edited": false, "score": 0, "creation_date": 1545384358, "post_id": 53878009, "comment_id": 94610924, "body": "Hi @GMB Thanks for your answer. It is not working as my working machine do not have the module for Net::OpenSSH installed and I am not allowed to install any module in the machine. Sorry."}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 2, "last_activity_date": 1545354493, "creation_date": 1545354493, "answer_id": 53878009, "question_id": 53877483, "link": "https://stackoverflow.com/questions/53877483/ssh-create-directory-in-remote-site-using-perl-script/53878009#53878009", "title": "SSH Create Directory In Remote Site Using Perl Script", "body": "<p>I would recommend using a proper module to do SSH, namely <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a>, a SSH client built upon OpenSSH. </p>\n\n<p>While being implemented in pure Perl, it is fast and stable, and has no mandatory dependency (apart of course, OpenSSH binaries).\n<a href=\"https://metacpan.org/pod/Net::OpenSSH#Shell-quoting\" rel=\"nofollow noreferrer\">As explained in the docs</a>, it will, under certain conditions, automatically quote any shell metacharacters in the command lists.</p>\n\n<p>The following codes demonstrates how it can respond to your use case. It relies on the same shortcut explained by @zdim, using <code>mkdir -p</code> :</p>\n\n<ul>\n<li>if the directory does not exists, it gets created (if that fails, an error happends)</li>\n<li>if it already exists, nothing happens</li>\n<li>if a file exists with the target name, an error happens</li>\n</ul>\n\n<p>Code :</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Net::OpenSSH;\n\nmy $host = ...;\nmy $user_id = ...;\nmy $destination_path = ...;\n\n# connect\nmy $ssh = Net::OpenSSH-&gt;new($host, user =&gt; $user_id);\n$ssh-&gt;error and die \"Can't ssh to $host: \" . $ssh-&gt;error;\n\n# try to create the directory\nif ( $ssh-&gt;system('mkdir', '-p', $destination_path) ) {\n    print \"dir created !\\n\";\n} else {\n   print \"can't mkdir $dir on $host : \" . $ssh-&gt;error . \"\\n\";\n}\n\n# disconnect\nundef $ssh;\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 7772730, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-gEpPMi26bPk/AAAAAAAAAAI/AAAAAAAAOwI/l9THo88VIcA/photo.jpg?sz=128", "display_name": "Tan Yih Wei", "link": "https://stackoverflow.com/users/7772730/tan-yih-wei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 53877566, "answer_count": 2, "score": 2, "last_activity_date": 1545376107, "creation_date": 1545349234, "last_edit_date": 1545354588, "question_id": 53877483, "link": "https://stackoverflow.com/questions/53877483/ssh-create-directory-in-remote-site-using-perl-script", "title": "SSH Create Directory In Remote Site Using Perl Script", "body": "<p>Previously I have asked a <a href=\"https://stackoverflow.com/questions/53843757/check-whether-directory-exists-in-remote-server-for-perl\">question</a> here on how to determine whether a path is a directory or not in remote site using SSH. I wish to create the directory if the path is not a directory. I have tried following code with two ways but it seem not to be working. Thanks for everyone that helps here.</p>\n\n<pre><code>use File::Path;\n\nmy $destination_path = \"&lt;path&gt;\";\nmy $ssh = \"usr/bin/ssh\";\nmy $user_id = getpwuid( $&lt; );\nmy $site = \"&lt;site_name&gt;\";\nmy $host = \"rsync.$site.com\";\n\nif (system(\"$ssh $user_id\\@$host [ -d $destination_path ]\") == 0) {\n    print \"It is a directory.\\n\";   \n\n} else {\n    print \"It is not a directory.\\n\";\n\n    #First Way\n    if(system(\"$ssh $user_id\\@$host [ make_path ($d_path_full) ]\") == 0{\n\n    #Second Way\n    if(system(\"$ssh $user_id\\@$host [ mkdir -p $d_path_full ]\") == 0{\n       print \"Create directory successfully.\\n\";\n\n    } else {\n       print \"Create directory fail.\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "io", "stdin"], "comments": [{"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1545336538, "post_id": 53875136, "comment_id": 94597946, "body": "You can set the record separator using <code>$&#47;</code>. Just set it to &quot;\\r&quot; before the loop."}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1545336623, "post_id": 53875136, "comment_id": 94597967, "body": "@beasy Sure, but then normal lines ending with &quot;\\n&quot; will be held buffered up to the next &quot;\\r&quot;, right?"}, {"owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1545336699, "post_id": 53875136, "comment_id": 94598002, "body": "Oh you mean the input lines sometimes end in &quot;\\n&quot;, and sometimes &quot;\\r&quot;?"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "edited": false, "score": 0, "creation_date": 1545336840, "post_id": 53875136, "comment_id": 94598059, "body": "@beasy Yes. As I mentioned, the <i>&quot;program sometimes outputs progress updates of its task [\u2026] through the use of lines ending with a carriage return&quot;</i>. My one line example outputs only <code>\\r</code> lines just to demonstrate this technique, in case it&#39;s not clear or known."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545338401, "post_id": 53875136, "comment_id": 94598663, "body": "The output with <code>\\r</code> (and no newlines) is never a &quot;line&quot; so it&#39;s just not flushed? (That nice one-liner test doesn&#39;t print even when <code>\\r</code> is removed).  So I think that the filter just doesn&#39;t get any data (until some other buffers get filled or a newline <i>is</i> sent, of course)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545338934, "post_id": 53875136, "comment_id": 94598853, "body": "So I&#39;d say that if output of a program using <code>\\r</code> is piped (into anything) only the last print will make it to the filter, once there is a line-feed?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1545338974, "post_id": 53875136, "comment_id": 94598866, "body": "<a href=\"http://metacpan.org/pod/Acme::InputRecordSeparatorIsRegexp\" rel=\"nofollow noreferrer\"><code>Acme::InputRecordSeparatorIsRegexp</code></a>"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545340374, "post_id": 53875136, "comment_id": 94599425, "body": "@zdim I&#39;m not sure if I got it right, but the one-liner test should produce output since <code>$|++</code> turns on the auto flush for stdout. Well, at least here it does produce output (with or without <code>\\r</code>). Output does seem to get to the filter program correctly, unbuffered. I.e., this works:  <code>perl -e &#39;$|++; print ++$a, &quot;\\r&quot; and sleep 1 while 1&#39; | perl -e &#39;$|++; print getc while 1&#39;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1545340843, "post_id": 53875136, "comment_id": 94599647, "body": "@sidyll  Yes, apparently I misunderstood some bits about buffering (I&#39;d think that <code>$|++</code> still needs LF), since <code>getc</code> clearly can get things from the stream.  Interesting question and answer!"}], "answers": [{"comments": [{"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1545340486, "post_id": 53875860, "comment_id": 94599478, "body": "Thanks, excellent. The module you linked in the comments above is also phenomenal. I was disappointed to read the awk note in the documentation but not anymore :)"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 9, "last_activity_date": 1545339135, "creation_date": 1545339135, "answer_id": 53875860, "question_id": 53875136, "link": "https://stackoverflow.com/questions/53875136/how-to-read-unbuffered-input-of-lines-ending-with-r-or-n/53875860#53875860", "title": "How to read unbuffered input of lines ending with &quot;\\r&quot; or &quot;\\n&quot;?", "body": "<p>If the input isn't so large that efficiency is a concern, this version of <code>filter</code> is more robust</p>\n\n<pre><code>while (!eof(STDIN)) {\n    $_ .= getc(STDIN);\n    if (/[\\r\\n]/) {\n        # manipulate $_, if desired\n        print;\n        $_ = \"\";\n    }\n}\nprint;\n</code></pre>\n"}], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 2, "accepted_answer_id": 53875860, "answer_count": 1, "score": 7, "last_activity_date": 1545339135, "creation_date": 1545335315, "question_id": 53875136, "link": "https://stackoverflow.com/questions/53875136/how-to-read-unbuffered-input-of-lines-ending-with-r-or-n", "title": "How to read unbuffered input of lines ending with &quot;\\r&quot; or &quot;\\n&quot;?", "body": "<p>I'm writing  a simple  program which  is intended  to filter\ninput from a  pipeline. Most of the input is  sent as output\nuntouched.  Part  of  it  is modified  or  used  to  extract\ninformation.  In its  simplest form  \u2014 doing  nothing \u2014  the\nprogram <code>filter</code> is:</p>\n\n<pre><code>$|++;\n\nwhile (&lt;&gt;) {\n    print;\n}\n</code></pre>\n\n<p>The main  program sometimes outputs progress  updates of its\ntask, overwriting the same visual content through the use of\nlines ending with a carriage  return. Piping such content to\n<code>filter</code> blocks all output:</p>\n\n<pre><code>$ perl -e '$|++; print ++$a, \"\\r\" and sleep 1 while 1' | filter\n</code></pre>\n\n<p>Is there  an easy way to  read those lines in  the same loop\nfashion, or should  I go the <code>sysread</code> way?  I'm looking for\nsomething similar to what would happen if it was possible to\nset the record separator to \"<code>\\n</code> <em>or</em> <code>\\r</code>\".</p>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1545325904, "post_id": 53873145, "comment_id": 94593570, "body": "just call <code>use JSON</code> after your <code>package</code> declaration"}, {"owner": {"reputation": 498, "user_id": 2174359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cf06579ee8856206e0dc3d83f9bb5c43?s=128&d=identicon&r=PG", "display_name": "FrankTheTank_12345", "link": "https://stackoverflow.com/users/2174359/frankthetank-12345"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1545326280, "post_id": 53873145, "comment_id": 94593747, "body": "I don&#39;t want to call &#39;use JSON&#39; inside the &#39;Employee.pm&#39;"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1545326339, "post_id": 53873145, "comment_id": 94593773, "body": "Why not make a method, like <code>_encode_json</code> which then just calls <code>encode_json</code> and call that method in <code>Employee</code> instead? Silently/blindly exporting methods to classes that inherit from your class is a horrible idea."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1545326481, "post_id": 53873145, "comment_id": 94593841, "body": "Hint: to use exported functions from the JSON module inside another package, call <code>use JSON</code> from inside that package."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1545326507, "post_id": 53873145, "comment_id": 94593854, "body": "Well, <code>use JSON;</code> in each package that uses functions provided by that module is the way to get them. Why don&#39;t you want to do that?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545329531, "post_id": 53873359, "comment_id": 94595200, "body": "(Or just <code>use JSON;</code> if you want to import all the default exports. However, I consider not listing your imports to be a bad practice.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1545326468, "creation_date": 1545326468, "answer_id": 53873359, "question_id": 53873145, "link": "https://stackoverflow.com/questions/53873145/pass-imported-functions-to-another-package-in-perl/53873359#53873359", "title": "Pass imported functions to another package in Perl", "body": "<p>You're asking how to place <code>encode_json</code> in the <code>Employee</code> namespace. To do that, add the following after <code>package Employee;</code>:</p>\n\n<pre><code>use JSON qw( encode_json );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1545329441, "post_id": 53873477, "comment_id": 94595161, "body": "You have to make sure that the Perl compiler encounters that line before Employee.pm is loaded, or you could get compile-time errors. This is so fragile that modifying unrelated files could cause the code to suddenly give compile-time errors."}], "tags": [], "owner": {"reputation": 550, "user_id": 10814896, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--YDoOxR1ELE/AAAAAAAAAAI/AAAAAAAAABU/1a7lByCa2Sw/photo.jpg?sz=128", "display_name": "Perl Ancar", "link": "https://stackoverflow.com/users/10814896/perl-ancar"}, "is_accepted": false, "score": 2, "last_activity_date": 1545329451, "last_edit_date": 1545329451, "creation_date": 1545327006, "answer_id": 53873477, "question_id": 53873145, "link": "https://stackoverflow.com/questions/53873145/pass-imported-functions-to-another-package-in-perl/53873477#53873477", "title": "Pass imported functions to another package in Perl", "body": "<p>I'm also not sure why in the comment the OP said that he/she cannot (or does not want) put \"use JSON\" in the Employee package. Maybe because the Employee package file (Employee.pm) is written by someone else and cannot be modified.</p>\n\n<p>Note that in Perl you can \"open the Employee\" package from any other code written in any file. So in your main script or the Person package file or wherever, you can do:</p>\n\n<pre><code>{ package Employee; use JSON; }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545343322, "post_id": 53874368, "comment_id": 94600627, "body": "You forgot the <code>\\ </code> necessary to pass a code reference to a named sub, the current code will just call it and pass the return value (along with a couple other oddities due to using <code>&amp;</code> to call a subroutine)"}, {"owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545349604, "post_id": 53874368, "comment_id": 94602342, "body": "So I did, thanks. Fixing that. (I have been writing Go lately and am used to mentioning a function to get a reference to it!)"}], "tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": false, "score": 2, "last_activity_date": 1545349640, "last_edit_date": 1545349640, "creation_date": 1545331469, "answer_id": 53874368, "question_id": 53873145, "link": "https://stackoverflow.com/questions/53873145/pass-imported-functions-to-another-package-in-perl/53874368#53874368", "title": "Pass imported functions to another package in Perl", "body": "<p>If you absolutely could not add <code>use JSON</code> to the Employee class because you were not sure what encoding you'd need to use, then you could pass a code reference into <code>new</code>:</p>\n\n<pre><code># in Person.pm\nmy $e = Employee-&gt;new(\\&amp;JSON::encode_json);\n\n# in Employee.pm\nsub new {\n  my($class, $encoder) = @_;\n  ...\n  $self-&gt;{_encoded} = $encoder-&gt;($value_to_encode);\n  ...\n  return $self;\n}\n</code></pre>\n\n<p>Again, the <em>only</em> reason you'd want to do this is if you dynamically needed to change which encoder you wanted to use. The solution you've adopted -- <code>use JSON qw(encode_json)</code> -- is the right one if you want that one function and won't need to change it.</p>\n"}], "owner": {"reputation": 498, "user_id": 2174359, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cf06579ee8856206e0dc3d83f9bb5c43?s=128&d=identicon&r=PG", "display_name": "FrankTheTank_12345", "link": "https://stackoverflow.com/users/2174359/frankthetank-12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53873359, "answer_count": 3, "score": 0, "last_activity_date": 1545349640, "creation_date": 1545325551, "last_edit_date": 1545327157, "question_id": 53873145, "link": "https://stackoverflow.com/questions/53873145/pass-imported-functions-to-another-package-in-perl", "title": "Pass imported functions to another package in Perl", "body": "<p>i'am trying to pass imported functions to another created package.\nMaybe someone could help me :)</p>\n\n<pre><code>package Person;\n\nuse JSON;    # i want to pass functions from this module to the package 'Employee'\n\nsub new {\n   my $class = shift;\n   my $self = {\n       _name =&gt; \"No Name\",\n   };\n   bless $self, $class;\n   return $self;\n}\n\nsub setName {\n    my ($self, $name) = @_;\n    $self-&gt;{_name} = $name;\n}\n\nsub getName {\n    my $self = shift;\n    return $self-&gt;{_name};\n}\n\n1;\n</code></pre>\n\n<p>Now i want to use functions from the JSON Package inside this module.    </p>\n\n<pre><code>package Employee;\nuse JSON qw( encode_json ); # This works, thx to everybody \n\nour @ISA = qw(Person);\n\nsub new {\n    my $class = shift;\n    my $self = Person-&gt;new();\n\n    encode_json({a=&gt;1}); # this works now\n\n    bless $self, $class;\n    return $self;\n}\n1;\n</code></pre>\n\n<p>I would be nice, if someone could give me some hints. \nThanks to everybody</p>\n"}, {"tags": ["python", "python-3.x", "perl"], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 8552218, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214165063218743/picture?type=large", "display_name": "Richard Zack", "link": "https://stackoverflow.com/users/8552218/richard-zack"}, "edited": false, "score": 0, "creation_date": 1545322590, "post_id": 53872312, "comment_id": 94591906, "body": "The perl script wants the URL to be quoted, but I tried it both ways, and neither work. I&#39;ve updated the question with the error that #3 generates."}, {"owner": {"reputation": 1067, "user_id": 3073930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25630f3c5a94bb456ab4e2a42a275c7?s=128&d=identicon&r=PG", "display_name": "Joe Halliwell", "link": "https://stackoverflow.com/users/3073930/joe-halliwell"}, "reply_to_user": {"reputation": 261, "user_id": 8552218, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214165063218743/picture?type=large", "display_name": "Richard Zack", "link": "https://stackoverflow.com/users/8552218/richard-zack"}, "edited": false, "score": 0, "creation_date": 1545322721, "post_id": 53872312, "comment_id": 94591967, "body": "I spotted a couple of other potential problems"}, {"owner": {"reputation": 261, "user_id": 8552218, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214165063218743/picture?type=large", "display_name": "Richard Zack", "link": "https://stackoverflow.com/users/8552218/richard-zack"}, "edited": false, "score": 0, "creation_date": 1545322924, "post_id": 53872312, "comment_id": 94592062, "body": "Good catches (1) I changed the path to &quot;../perl/bin/engine.pl&quot; and (2) removed the []&#39;s from the POpen command --now, it&#39;s back to executing the perl script, but still isn&#39;t passing the arguments..."}, {"owner": {"reputation": 1363, "user_id": 1823022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94b44082e9c1538f3ec4df3e33b44230?s=128&d=identicon&r=PG", "display_name": "AJefferiss", "link": "https://stackoverflow.com/users/1823022/ajefferiss"}, "edited": false, "score": 2, "creation_date": 1545323182, "post_id": 53872312, "comment_id": 94592187, "body": "I&#39;m fairly sure you need to remove the spaces around your arguments, so <code>addcmd = [&quot;&#47;usr&#47;bin&#47;perl&quot;, &quot;engine.pl&quot;, &quot;--uid&quot;, str(our_id), &quot;--url&quot;, source_url]</code>"}, {"owner": {"reputation": 1067, "user_id": 3073930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25630f3c5a94bb456ab4e2a42a275c7?s=128&d=identicon&r=PG", "display_name": "Joe Halliwell", "link": "https://stackoverflow.com/users/3073930/joe-halliwell"}, "edited": false, "score": 0, "creation_date": 1545323233, "post_id": 53872312, "comment_id": 94592219, "body": "Did you try without the quotes? They&#39;re only needed when running from the command line. Speaking of which, does the perl script work as expected when you run it from the command line?"}, {"owner": {"reputation": 261, "user_id": 8552218, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214165063218743/picture?type=large", "display_name": "Richard Zack", "link": "https://stackoverflow.com/users/8552218/richard-zack"}, "edited": false, "score": 0, "creation_date": 1545323600, "post_id": 53872312, "comment_id": 94592407, "body": "Perl script does work when I run it from the command line using the exact arguments, with the quotes, which are required because sometimes the URL&#39;s we&#39;re working with have spaces in them."}, {"owner": {"reputation": 261, "user_id": 8552218, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214165063218743/picture?type=large", "display_name": "Richard Zack", "link": "https://stackoverflow.com/users/8552218/richard-zack"}, "edited": false, "score": 0, "creation_date": 1545323631, "post_id": 53872312, "comment_id": 94592417, "body": "The combined answer is now working. Thank you both!!"}, {"owner": {"reputation": 1363, "user_id": 1823022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94b44082e9c1538f3ec4df3e33b44230?s=128&d=identicon&r=PG", "display_name": "AJefferiss", "link": "https://stackoverflow.com/users/1823022/ajefferiss"}, "edited": false, "score": 0, "creation_date": 1545323638, "post_id": 53872312, "comment_id": 94592423, "body": "Based on the note from <a href=\"https://docs.python.org/3.7/library/subprocess.html#subprocess.Popen\" rel=\"nofollow noreferrer\">subprocess.Popen</a> if you need to quote source url it should be a single list element."}], "tags": [], "owner": {"reputation": 1067, "user_id": 3073930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f25630f3c5a94bb456ab4e2a42a275c7?s=128&d=identicon&r=PG", "display_name": "Joe Halliwell", "link": "https://stackoverflow.com/users/3073930/joe-halliwell"}, "is_accepted": true, "score": 5, "last_activity_date": 1545391245, "last_edit_date": 1545391245, "creation_date": 1545322433, "answer_id": 53872312, "question_id": 53872246, "link": "https://stackoverflow.com/questions/53872246/cant-pass-arguments-to-perl-script-using-python/53872312#53872312", "title": "Cant pass arguments to perl script using python", "body": "<p>Approach 3 looks broadly correct, but you almost certainly don't want to \"quote\" the URL, need to provide the correct script path, and want to pass a single list to <code>Popen</code>. Try:</p>\n\n<pre><code>addcmd = [\"/usr/bin/perl\", \"../perl/bin/engine.pl\", \"--uid\", str(our_id), \"--url\", source_url]\naddtodb = subprocess.Popen(addcmd)\n</code></pre>\n\n<p>Update: incorporated fix from @AJefferiss</p>\n\n<p>There seems to be an underlying misconception here around how program arguments are handled.</p>\n\n<p>A command shell determines program arguments by <em>parsing</em> user input -- typically splitting on spaces (except where enclosed in quotes). In contrast, the underlying APIs like <code>Popen</code> accept a list of arguments directly.</p>\n\n<p>The upshot is that when using such APIs 1) you don't need the quotes, and 2) you need to drop extra spaces around arguments. It's also why you can't (generally) use shell syntax like <code>~</code>, wildcard expansion or environment variables.</p>\n"}], "owner": {"reputation": 261, "user_id": 8552218, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214165063218743/picture?type=large", "display_name": "Richard Zack", "link": "https://stackoverflow.com/users/8552218/richard-zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 53872312, "answer_count": 1, "score": 2, "last_activity_date": 1545391245, "creation_date": 1545322169, "last_edit_date": 1545322950, "question_id": 53872246, "link": "https://stackoverflow.com/questions/53872246/cant-pass-arguments-to-perl-script-using-python", "title": "Cant pass arguments to perl script using python", "body": "<p>I'm trying to do what should be a simple action-- execute a perl script from within a python3 script, passing several arguments to the perl script. Here's what I've tried, nothing works:</p>\n\n<p>Approach 1 -- the perl script runs, but the arguments aren't passed</p>\n\n<pre><code>addexec = \"../perl/bin/engine.pl\"\naddvars = \" --uid \" + str(our_id) + \" --url '\" + source_url + \"'\"\naddtodb = subprocess.Popen([\"/usr/bin/perl\", addexec, addvars])\n</code></pre>\n\n<p>Approach 2 -- the perl script doesn't run, says file not found</p>\n\n<pre><code>addexec = \"../perl/bin/engine.pl --uid \" + str(our_id) + \" --url '\" + source_url\naddtodb = subprocess.Popen([\"/usr/bin/perl\", addexec])\n</code></pre>\n\n<p>Approach 3 -- the perl script doesn't run, generates errors</p>\n\n<pre><code>addcmd = [\"/usr/bin/perl\", \"../perl/bin/engine.pl\", \" --uid \", str(our_id), \" --url '\", source_url, \"'\"]\naddtodb = subprocess.Popen(addcmd)\n</code></pre>\n\n<p>Anyone have any suggestions? Thanks!</p>\n"}, {"tags": ["perl", "macos-mojave", "dbd"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1545305673, "post_id": 53865612, "comment_id": 94582753, "body": "You probably need to tell it where the libraries are"}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1545306691, "post_id": 53865612, "comment_id": 94583246, "body": "@ChrisTurner, At the configuration stage, mysql_config tells where the libraries are located: libs          (mysql_config) = -L/usr/local/mysql/lib -lmysqlclient -lssl -lcrypto"}, {"owner": {"reputation": 841, "user_id": 1408148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb10ae68d41c8ee347732eb7faa38090?s=128&d=identicon&r=PG", "display_name": "Kostia Shiian", "link": "https://stackoverflow.com/users/1408148/kostia-shiian"}, "edited": false, "score": 0, "creation_date": 1545412700, "post_id": 53865612, "comment_id": 94623829, "body": "I can assume that you need to install MySQL headers and libraries and point to this directory your Makefile.pl script (I see libmysqld-libs option there)"}, {"owner": {"reputation": 1465, "user_id": 7327755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EsjT4.jpg?s=128&g=1", "display_name": "Ashton Wiersdorf", "link": "https://stackoverflow.com/users/7327755/ashton-wiersdorf"}, "edited": false, "score": 0, "creation_date": 1545457052, "post_id": 53865612, "comment_id": 94633019, "body": "Have you tried installing the libraries locally with Carton? (This usually incurs a non-trivial amount of overhead to set up the first time, but I&#39;ve found it helps later on.)"}], "answers": [{"tags": [], "owner": {"reputation": 553, "user_id": 424604, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7b1b12dd8618701da37ca479e4d06f98?s=128&d=identicon&r=PG", "display_name": "akkdio", "link": "https://stackoverflow.com/users/424604/akkdio"}, "is_accepted": false, "score": 3, "last_activity_date": 1554040072, "last_edit_date": 1554040072, "creation_date": 1548276855, "answer_id": 54335475, "question_id": 53865612, "link": "https://stackoverflow.com/questions/53865612/trouble-installing-dbdmysql-under-macos-mojave/54335475#54335475", "title": "Trouble installing DBD::mysql under macOS Mojave", "body": "<p>I had a problem installing DBD::mysql on Mojave 10.14.  Followed the instructions in this link: \n   <a href=\"https://github.com/perl5-dbi/DBD-mysql/commit/00806bc46fe23a862a325d19cba07c239b401def\" rel=\"nofollow noreferrer\">https://github.com/perl5-dbi/DBD-mysql/commit/00806bc46fe23a862a325d19cba07c239b401def</a></p>\n\n<p>first try   </p>\n\n<pre><code>brew install openssl mysql-connector-c\n</code></pre>\n\n<p>this installs but running </p>\n\n<pre><code>cpan install DBD::mysql \n</code></pre>\n\n<p>fails because the -l file designation is empty shown in the output line:</p>\n\n<p><code>libs          (mysql_config) = -L/usr/local/Cellar/mysql-connector-c/6.1.11/lib -l</code>  </p>\n\n<p>editing the </p>\n\n<pre><code>/usr/local/Cellar/mysql-connector-c/6.1.11/bin/mysql_config line #114\n</code></pre>\n\n<p>and change </p>\n\n<pre><code>libs=\"$libs -l\"  to libs=\"$libs -lmysqlclient\"\n</code></pre>\n\n<p>then run:</p>\n\n<pre><code>cpan install DBD::mysql\n</code></pre>\n\n<p>is joy. </p>\n"}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1471, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1579282786, "creation_date": 1545297536, "question_id": 53865612, "link": "https://stackoverflow.com/questions/53865612/trouble-installing-dbdmysql-under-macos-mojave", "title": "Trouble installing DBD::mysql under macOS Mojave", "body": "<p>Can't install DBD::mysql under macOS Mojave with perl v5.18.2\nMySQL Community Server 8.0.13 is installed from DMG from the official site.</p>\n\n<p>Here is the installation log via cpan:</p>\n\n<pre><code>Checking if libs are available for compiling...\ndyld: Library not loaded: @rpath/libmysqlclient.21.dylib\n  Referenced from: /Users/dmitry/.cpan/build/DBD-mysql-4.049-B01C7C/assertliblxuNN4_E\n  Reason: image not found\ndyld: Library not loaded: libssl.1.0.0.dylib\n  Referenced from: /Users/dmitry/.cpan/build/DBD-mysql-4.049-B01C7C/assertliba7FpHZin\n  Reason: image not found\ndyld: Library not loaded: libcrypto.1.0.0.dylib\n  Referenced from: /Users/dmitry/.cpan/build/DBD-mysql-4.049-B01C7C/assertlibeWospvnt\n  Reason: image not found\nwrong result: 'mysqlclient', 'ssl', 'crypto'\nWarning: No success on command[/usr/bin/perl Makefile.PL]\n  DVEEDEN/DBD-mysql-4.049.tar.gz\n  /usr/bin/perl Makefile.PL -- NOT OK\n</code></pre>\n\n<p>Swears at the lack of libraries, although they are:</p>\n\n<pre><code>dmitry@iMac-Dmitrij:~$ ls -la /usr/local/mysql/lib/*.dylib\n-rw-r--r--  1 root  wheel  1985924  7 \u043e\u043a\u0442 13:14 /usr/local/mysql/lib/libcrypto.1.0.0.dylib\nlrwxr-xr-x  1 root  wheel       21 18 \u0434\u0435\u043a 23:35 /usr/local/mysql/lib/libcrypto.dylib -&gt; libcrypto.1.0.0.dylib\n-rwxr-xr-x  1 root  wheel  5844880  7 \u043e\u043a\u0442 15:28 /usr/local/mysql/lib/libmysqlclient.21.dylib\nlrwxr-xr-x  1 root  wheel       23 18 \u0434\u0435\u043a 23:35 /usr/local/mysql/lib/libmysqlclient.dylib -&gt; libmysqlclient.21.dylib\n-rwxr-xr-x  1 root  wheel   540768  7 \u043e\u043a\u0442 15:28 /usr/local/mysql/lib/libmysqlharness.1.dylib\nlrwxr-xr-x  1 root  wheel       23 18 \u0434\u0435\u043a 23:35 /usr/local/mysql/lib/libmysqlharness.dylib -&gt; libmysqlharness.1.dylib\n-rwxr-xr-x  1 root  wheel  6861328  7 \u043e\u043a\u0442 15:28 /usr/local/mysql/lib/libmysqlrouter.1.dylib\nlrwxr-xr-x  1 root  wheel       22 18 \u0434\u0435\u043a 23:35 /usr/local/mysql/lib/libmysqlrouter.dylib -&gt; libmysqlrouter.1.dylib\n-rw-r--r--  1 root  wheel   429768  7 \u043e\u043a\u0442 13:14 /usr/local/mysql/lib/libssl.1.0.0.dylib\nlrwxr-xr-x  1 root  wheel       18 18 \u0434\u0435\u043a 23:35 /usr/local/mysql/lib/libssl.dylib -&gt; libssl.1.0.0.dyli\n</code></pre>\n\n<p>What do you advise ?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1545291495, "post_id": 53863972, "comment_id": 94575970, "body": "What appears two times?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1545291634, "post_id": 53863972, "comment_id": 94576027, "body": "Do you use <i>both</i> those <code>export</code> lines? If so; why?!"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1545291805, "post_id": 53863972, "comment_id": 94576091, "body": "Anyways, it&#39;s usually better to add directories to the search path using the <a href=\"http://perldoc.perl.org/lib.html\" rel=\"nofollow noreferrer\">lib</a> pragma in your scripts."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1545294558, "post_id": 53863972, "comment_id": 94577126, "body": "@Shawn, Hell no! Only use <code>use lib</code> (in combination with <code>$RealBin</code> from <code>use FindBin qw( $RealBin );</code>) for modules bundled with scripts. <code>PERL5LIB</code> should be used otherwise (e.g. for <code>cpan</code>-installed modules). This eliminates hardcoding paths and editing scripts."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "edited": false, "score": 0, "creation_date": 1545411445, "post_id": 53865128, "comment_id": 94623394, "body": "thanks so much for all your advise, I just fix the problem in this way (just before to read your answer): export PERL5LIB=${PERL5LIB}:/usr/local/genetools/perl_modules it is any difference ??  thanks !!!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "edited": false, "score": 0, "creation_date": 1545426024, "post_id": 53865128, "comment_id": 94628535, "body": "Three bugs with that: Your directory will be searched last when you want it searched first, it creates a bad value if PERL5LIB is previously empty, and it suffers from an injection bug if the existing value of PERL5LIB contains any shell metacharacters (like space)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1545295472, "creation_date": 1545295472, "answer_id": 53865128, "question_id": 53863972, "link": "https://stackoverflow.com/questions/53863972/edit-perl-perl5lib-and-inc/53865128#53865128", "title": "Edit Perl $PERL5LIB and @INC", "body": "<p>Replace</p>\n\n<pre><code>export PERL5LIB=/usr/local/tools/modules/PERL/:$PERL5LIB\nexport PERL5LIB=/usr/local/tools/modules/PERL/\"${PERL5LIB:+:$PERL5LIB}\"\n</code></pre>\n\n<p>with just</p>\n\n<pre><code>export PERL5LIB=/usr/local/tools/modules/PERL/\"${PERL5LIB:+:$PERL5LIB}\"\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>There's no real harm to having a directory in <code>@INC</code> twice. (Just a tiny performance penalty.)</li>\n<li>You should remove that trailing slash, but it's harmless.</li>\n<li>The language is named \"Perl. It's not an acronym, so spelling it \"PERL\" is inappropriate. A better directory name would be <code>perl</code>.</li>\n</ul>\n"}], "owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545295472, "creation_date": 1545290001, "last_edit_date": 1545291574, "question_id": 53863972, "link": "https://stackoverflow.com/questions/53863972/edit-perl-perl5lib-and-inc", "title": "Edit Perl $PERL5LIB and @INC", "body": "<p>I'm using macOS and I just add:</p>\n\n<pre><code>export PERL5LIB=/usr/local/tools/modules/PERL/:$PERL5LIB\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>export PERL5LIB=/usr/local/tools/modules/PERL/\"${PERL5LIB:+:$PERL5LIB}\"\n</code></pre>\n\n<p>And when I do:</p>\n\n<pre><code>echo $PERL5LIB    \n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>perl -e 'print join \"\\n\", @INC;'\n</code></pre>\n\n<p>It appear two times, I just want to edith both files <code>$PERL5LIB</code> and <code>@INC</code> to eliminate both paths.</p>\n\n<p>How could I do that?</p>\n"}, {"tags": ["python", "perl", "encryption", "rsa", "public-key"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1545313296, "post_id": 53863853, "comment_id": 94586633, "body": "You need to use the URL-safe base64 decoder, and add any missing padding characters first. Then you need convert the resulting bytes objects to ints with <code>int.from_bytes()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2343, "user_id": 7757976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c5e68bc637516cac8b94f65008473da?s=128&d=identicon&r=PG&f=1", "display_name": "llompalles", "link": "https://stackoverflow.com/users/7757976/llompalles"}, "is_accepted": true, "score": 2, "last_activity_date": 1545310603, "last_edit_date": 1545310603, "creation_date": 1545309095, "answer_id": 53868776, "question_id": 53863853, "link": "https://stackoverflow.com/questions/53863853/how-can-i-translate-this-perl-code-for-rsa-public-key-in-python/53868776#53868776", "title": "How can I translate this Perl code for RSA Public key in python?", "body": "<p>The error is raised because the <a href=\"https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA-module.html#construct\" rel=\"nofollow noreferrer\">RSA contructor</a> is expecting 2 long integers and you are using two strings.</p>\n\n<p>The solution is to convert the base64 decoded string into an hexadecimal integer. </p>\n\n<pre><code>from Crypto.PublicKey import RSA\nimport base64\n\nn = int(base64.b64decode(jwk['n']).encode('hex'),16)\ne = int(base64.b64decode(jwk['e']).encode('hex'),16)\ne = long(e)\n\npublic_key = RSA.construct((n, e))\nprint(public_key)\n</code></pre>\n\n<p>Regarding the second question maybe you can use <a href=\"https://www.dlitz.net/software/pycrypto/api/current/Crypto.PublicKey.RSA._RSAobj-class.html#verify\" rel=\"nofollow noreferrer\">this method</a> to verify the validity of an RSA signature.</p>\n"}], "owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 53868776, "answer_count": 1, "score": 2, "last_activity_date": 1545310603, "creation_date": 1545289304, "last_edit_date": 1545301050, "question_id": 53863853, "link": "https://stackoverflow.com/questions/53863853/how-can-i-translate-this-perl-code-for-rsa-public-key-in-python", "title": "How can I translate this Perl code for RSA Public key in python?", "body": "<p>I have the following JSON object which represents an RSA256 JWK which obtained from a website:</p>\n\n<pre><code>jwk = {\n    'e': 'AQAB', \n    'n': 'sAlE_mzYz-2jf_YpxulSJXv_2CGIquflNZWhXUaU1SkJm9P0riLAuzwK7WT5p0Ko3zmQHho70_7D9nqB01rA4ExrMIDKpprE0Qa7NAJN-kgZhd_A25HsdSfpOfpaLvR-mf9fuOTDPLRQCd5HnrjoQKjs3D_XfPmPnT_Ny5erviiky90GSfN9j2DP_5yeDprzWKF-EQ3EDdIWt3snr7AW8rzBcZ1ojyWxckLAeSKDerMXP-zVBUFJE9Kn60HZoGNvmATKaw8LwEbf8DGfrllgSLvhg7mDRMLlbcooQoWAFSfN7t7kFbPSOcvjrpx3Yw_KrEwBZXeUP3260ukmFOx8RQ',\n }\n</code></pre>\n\n<p>Below is the Perl code showing how a public-key object from the Crypt library can be constructed from the above jwk:</p>\n\n<pre><code>use Crypt::OpenSSL::RSA;\nuse Crypt::OpenSSL::Bignum;\nuse MIME::Base64 qw/decode_base64url/;\n\nsub public_key {\n    my $rsa = Crypt::OpenSSL::RSA-&gt;new_key_from_parameters(\n        Crypt::OpenSSL::Bignum-&gt;new_from_bin(decode_base64url($jwk-&gt;{n})),\n        Crypt::OpenSSL::Bignum-&gt;new_from_bin(decode_base64url($jwk-&gt;{e})),\n    );\n    return $rsa-&gt;get_public_key_x509_string;\n}\n</code></pre>\n\n<p>Two Questions:</p>\n\n<p>How can I translate the above code into Python? The code below failed.</p>\n\n<p>Once I have the public key object in python, how can I use it to verify a JWT signed by the corresponding private key? Please post a snippet showing exactly how it can be done.</p>\n\n<pre><code>&gt;&gt;&gt; from Crypto.PublicKey import RSA\n&gt;&gt;&gt; import base64\n&gt;&gt;&gt; public_key = RSA.construct((base64.b64decode(jwk['n']), base64.b64decode(jwk['e'])))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"my-virtual-env/lib/python2.7/site-packages/Crypto/PublicKey/RSA.py\", line 539, in construct\n    key = self._math.rsa_construct(*tup)\n  File \"my-virtual-env/lib/python2.7/site-packages/Crypto/PublicKey/_slowmath.py\", line 84, in rsa_construct\n    assert isinstance(n, long)\nAssertionError\n</code></pre>\n"}, {"tags": ["excel", "perl", "hyperlink"], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545345373, "post_id": 53868756, "comment_id": 94601278, "body": "<code>write_url</code> takes both label and link in one call in Spreadsheet::WriteExcel as well. I don&#39;t personally subscribe to &quot;everyone should upgrade to Excel::Writer::XLSX&quot; (though unfortunately the module author seems to), as XLS and XLSX are two discrete formats that require two different modules. Of course people should stop using the XLS format, but that&#39;s a separate matter."}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545366081, "post_id": 53868756, "comment_id": 94605274, "body": "Thanks guys. I didn&#39;t know that we can give both label and link in one call. I got the expected output with Spreadsheet::WriteExcel itself."}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545366192, "post_id": 53868756, "comment_id": 94605295, "body": "Any idea on how to Merge the cells and giving hyperlinks without getting File error?"}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1545375079, "post_id": 53868756, "comment_id": 94607552, "body": "@Grinnz -- I guess that&#39;s my point, about xls vs xlsx.  More than a decade, post-implementation, is there a reason to still use xlsx?  I don&#39;t treat it as a separate matter."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "reply_to_user": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545375220, "post_id": 53868756, "comment_id": 94607598, "body": "@NAVEENPRAKASH -- in Spreadsheet::WriteExcel, you merge the range and assign the value as a single action.  Check out <a href=\"https://metacpan.org/pod/distribution/Spreadsheet-WriteExcel/lib/Spreadsheet/WriteExcel.pm#merge_range($first_row,-$first_col,-$last_row,-$last_col,-$token,-$format,-$utf_16_be)\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/Spreadsheet-WriteExcel/lib/&hellip;</a>"}, {"owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "edited": false, "score": 0, "creation_date": 1545375672, "post_id": 53868756, "comment_id": 94607740, "body": "@Hambone Thanks for the reply. I have merged and assigned the value in single action. I wanted to have hyperlink also in the same action. That I am unable to do."}, {"owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "edited": false, "score": 0, "creation_date": 1545376999, "post_id": 53868756, "comment_id": 94608130, "body": "Aah, I see now I get it.  It&#39;s the combination of merged cell and hyperlink that&#39;s doing it.  See my update.  If you use the excel <code>hyperlink</code> function, it should do the trick.  Let me know."}], "tags": [], "owner": {"reputation": 13122, "user_id": 1001884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14116728c7413097a42cf22736503f56?s=128&d=identicon&r=PG", "display_name": "Hambone", "link": "https://stackoverflow.com/users/1001884/hambone"}, "is_accepted": true, "score": 1, "last_activity_date": 1545376961, "last_edit_date": 1545376961, "creation_date": 1545309039, "answer_id": 53868756, "question_id": 53863832, "link": "https://stackoverflow.com/questions/53863832/file-errordata-may-have-been-lost-while-giving-hyperlinks/53868756#53868756", "title": "File Error:data may have been lost while giving hyperlinks", "body": "<p>Spreadsheet::WriteExcel, greatness though it is, hasn't been updated for several years, and to my knowledge it only supports the pre-Office 2007 extension of .xls.  I'd really recommend you upgrade to Excel::Writer::XLSX, which is McNamara's fabulous update to the open XML standard format (xlsx).</p>\n\n<p>So, I can't say for sure because this error does not happen on Excel::Writer::XLSX, but my initial theory is you are writing two different values to the exact same cell (12, 0), so the one is essentially clobbering the other -- hence the warning.</p>\n\n<p>If you do upgrade to Excel-Writer, the warning should disappear.  More importantly, if you want a hyperlink, you include the link and the friendly description all in the same call:</p>\n\n<pre><code>$worksheet-&gt;write_url(12, 0, 'internal:Sheet3!A1', 'Click Here!');\n</code></pre>\n\n<p>For what it's worth, I think the <code>write</code> method will also correctly interpret this as a link:</p>\n\n<pre><code>$worksheet-&gt;write(12, 0, 'internal:Sheet3!A1', 'Click Here!');\n</code></pre>\n\n<p>-- EDIT 12/21/2018 --</p>\n\n<p>If want to do a hyperlink on a merged cell, one way to do it is to use Excel's hyperlink function:</p>\n\n<pre><code>my $merged = $workbook-&gt;add_format();\n$worksheet-&gt;merge_range(\"A10:A11\",\n  qq{=hyperlink(\"#'Sheet3'!A1\",\"Click Here!\")},\n  $merged);\n</code></pre>\n"}], "owner": {"reputation": 130, "user_id": 6856873, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a197de4d77d938c792db2fbd855e103d?s=128&d=identicon&r=PG&f=1", "display_name": "NAVEEN PRAKASH", "link": "https://stackoverflow.com/users/6856873/naveen-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 53868756, "answer_count": 1, "score": 0, "last_activity_date": 1545376961, "creation_date": 1545289211, "last_edit_date": 1545291707, "question_id": 53863832, "link": "https://stackoverflow.com/questions/53863832/file-errordata-may-have-been-lost-while-giving-hyperlinks", "title": "File Error:data may have been lost while giving hyperlinks", "body": "<p>I am writing a code to generate excel using Spreadsheet::WriteExcel. \nI want to write the data into cells and give the hyperlink to it.\nI did that. But while opening the file it shows warning saying file data may have been lost.</p>\n\n<pre><code>$Log_Sheet-&gt;write(12,0,'AA',$ERR_DESCR_Format );\n$Log_Sheet-&gt;write_url(12, 0,  'internal:sheet3!A1'  );\n</code></pre>\n\n<p>I want to write the content and provide link without getting warning. How to do it?</p>\n"}]