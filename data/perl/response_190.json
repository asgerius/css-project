[{"tags": ["linux", "bash", "perl", "file"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1535579365, "post_id": 52086491, "comment_id": 91123376, "body": "Please avoid <i>&quot;Give me the codez&quot;</i> questions. Instead show the script you are working on and state where the problem is. Also see <a href=\"https://meta.stackoverflow.com/q/261592/608639\">How much research effort is expected of Stack Overflow users?</a>"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1535579454, "post_id": 52086491, "comment_id": 91123400, "body": "If you can post your Sed or Awk attempts Erick, that&#39;d be great - even if they don&#39;t work, that would give the question much more direction, and would help readers help you."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1535580282, "post_id": 52086670, "comment_id": 91123656, "body": "The inner loop will iterate over all the replacements for each file."}, {"owner": {"reputation": 2061, "user_id": 450611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03ea75684fe0dc76bab85cc1fadc2e?s=128&d=identicon&r=PG", "display_name": "weirdan", "link": "https://stackoverflow.com/users/450611/weirdan"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1535580735, "post_id": 52086670, "comment_id": 91123781, "body": "Yes, that&#39;s what the OP is after as far as I understand. So that was intentional."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1535580934, "post_id": 52086670, "comment_id": 91123851, "body": "Ah, you&#39;re right, it&#39;s possible to read the question in this way."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1535581759, "post_id": 52086670, "comment_id": 91124086, "body": "<a href=\"http://mywiki.wooledge.org/DontReadLinesWithFor\" rel=\"nofollow noreferrer\">Dont read lines with <code>for</code></a>"}, {"owner": {"reputation": 2061, "user_id": 450611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03ea75684fe0dc76bab85cc1fadc2e?s=128&d=identicon&r=PG", "display_name": "weirdan", "link": "https://stackoverflow.com/users/450611/weirdan"}, "edited": false, "score": 0, "creation_date": 1535582086, "post_id": 52086670, "comment_id": 91124169, "body": "None of those is a problem given the data samples we&#39;ve got. And it does seem to be a one time task, where robustness doesn&#39;t matter. For a reusable script you&#39;d be totally right, though."}], "tags": [], "owner": {"reputation": 2061, "user_id": 450611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03ea75684fe0dc76bab85cc1fadc2e?s=128&d=identicon&r=PG", "display_name": "weirdan", "link": "https://stackoverflow.com/users/450611/weirdan"}, "is_accepted": true, "score": -1, "last_activity_date": 1535580148, "creation_date": 1535580148, "answer_id": 52086670, "question_id": 52086491, "link": "https://stackoverflow.com/questions/52086491/replace-a-line-of-text-to-multiple-files-in-directory-using-bash-or-perl/52086670#52086670", "title": "Replace a line of text to multiple files in directory using Bash or Perl", "body": "<pre class=\"lang-sh prettyprint-override\"><code>for file in *.ext; do \n    for replacement in $(&lt;replacements.file) ; do \n        sed \"s/brown\\.nuc/$replacement/\" &lt; \"$file\"; \n    done &gt; \"$file.processed\"; \ndone\n</code></pre>\n\n<p>This will put changed data in <code>$originalFilename.processed</code>, which you can copy over original files later on if you need to.</p>\n"}], "owner": {"reputation": 3, "user_id": 10292046, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yDEgBtyxfH4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPE7YAvTr8KBqHhE_pDzhRSK9YVlQ/mo/photo.jpg?sz=128", "display_name": "erick rodriguez", "link": "https://stackoverflow.com/users/10292046/erick-rodriguez"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1535581873, "accepted_answer_id": 52086670, "answer_count": 1, "score": -4, "last_activity_date": 1535580148, "creation_date": 1535579099, "last_edit_date": 1535579380, "question_id": 52086491, "link": "https://stackoverflow.com/questions/52086491/replace-a-line-of-text-to-multiple-files-in-directory-using-bash-or-perl", "closed_reason": "Needs more focus", "title": "Replace a line of text to multiple files in directory using Bash or Perl", "body": "<p>I have a directory with approximately 9000 files, all of them have the same structure, like the following:</p>\n\n<pre><code>      seqfile = brown.nuc * sequence data file name \n      outfile = mlb * main result file \n     treefile = brown.trees * tree structure file name \n        noisy = 3   * 0,1,2,3: how much rubbish on the screen \n      verbose = 0   * 1: detailed output, 0: concise output \n      runmode = 0   * 0: user tree;  1: semi-\nautomatic;  2: automatic \n                    * 3: StepwiseAddition; (4,5):PerturbationNNI  \n</code></pre>\n\n<p>I would like to replace the line \"seqfile = brown.nuc\" with a word contained in a list in a txt file, the list is like this and </p>\n\n<pre><code>organism_1.fna \norganism_2.fna \norganism_3.fna \norganism_4.fna \norganism_5.fna\n</code></pre>\n\n<p>The output  that I'm trying to get will be </p>\n\n<pre><code>seqfile = organism_1.fna * sequence data file name \n  outfile = mlb * main result file \n treefile = brown.trees * tree structure file name \n    noisy = 3   * 0,1,2,3: how much rubbish on the screen \n  verbose = 0   * 1: detailed output, 0: concise output \n  runmode = 0   * 0: user tree;  1: semi-\n\n seqfile = organism_2.fna * sequence data file name \n      outfile = mlb * main result file \n     treefile = brown.trees * tree structure file name \n        noisy = 3   * 0,1,2,3: how much rubbish on the screen \n      verbose = 0   * 1: detailed output, 0: concise output \n      runmode = 0   * 0: user tree;  1: semi-\n\n\n\nseqfile = organism_2.fna * sequence data file name \n      outfile = mlb * main result file \n     treefile = brown.trees * tree structure file name \n        noisy = 3   * 0,1,2,3: how much rubbish on the screen \n      verbose = 0   * 1: detailed output, 0: concise output \n      runmode = 0   * 0: user tree;  1: semi-\n</code></pre>\n\n<p>I've been trying with Sed and Awk but I can't get the output. </p>\n"}, {"tags": ["perl", "ssh", "ssh-keys", "tcsh"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 1, "creation_date": 1535573747, "post_id": 52085154, "comment_id": 91121145, "body": "Running a perl program that shells out to run ssh manually and try to understand the error conditions will give you a lot of headaches. At least have a look at the <code>system()</code> call where you can pass a list of parameters, so that you do not use the shell. Modules like <code>IPC::Run</code> may also help you write this more cleanly, specially when needing to deal with STDOUT/STDERR. Also, you have various Perl libraries that gives you SSH protocol features, either as rewritten or as a layer on top of it.Have a look at them, even if the question &quot;do we have the proper keys&quot; is complicated(depends on config)"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1535575259, "post_id": 52085154, "comment_id": 91121833, "body": "You can use <code>-o BatchMode=yes</code> to check if passwordless login is possible. For example: <code>ssh -o BatchMode=yes userName@server true &gt;&#47;dev&#47;null 2&gt;&amp;1 || echo &quot;Passwordless login is not possible&quot;</code>. See <a href=\"https://unix.stackexchange.com/a/246794/45537\">this</a> answer for more information"}], "answers": [{"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 1, "last_activity_date": 1536058008, "creation_date": 1536058008, "answer_id": 52164513, "question_id": 52085154, "link": "https://stackoverflow.com/questions/52085154/how-to-determine-if-user-has-ssh-keys-in-a-perl-script/52164513#52164513", "title": "How to determine if user has ssh keys in a perl script", "body": "<p>When <code>ssh</code> fails to establish a connection to the server it doesn't tell you the reason, but you can run it in verbose mode and analyze the output afterwards.</p>\n\n<p>For instance, use the following command:</p>\n\n<pre><code>ssh -vvv -i $path_to_key -o BatchMode=yes \\\n    -l $remote_user $remote_host echo ok 2&gt;error.log\n</code></pre>\n\n<p>And afterwards, if it fails, check <code>error.log</code> for the cause of the problem.</p>\n\n<p>Note that the debugging output may change between different <code>ssh</code> versions, so any solution that depends on it is never going to be very robust. You should consider it just a hint.</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1536058008, "creation_date": 1535572478, "question_id": 52085154, "link": "https://stackoverflow.com/questions/52085154/how-to-determine-if-user-has-ssh-keys-in-a-perl-script", "title": "How to determine if user has ssh keys in a perl script", "body": "<p>I have the following script in <code>tcsh</code> that looks like this:</p>\n\n<pre><code>df=`ssh $some_server 2&gt;/dev/null df $2 -k` \necho $df\n</code></pre>\n\n<p><code>Perl</code> script runs this <code>tcsh</code> script and I have the two following questions:</p>\n\n<ol>\n<li>What does the first command do?</li>\n<li>How can I determine if I have the ssh keys, before running this command (from the <code>perl</code> script for example, or the <code>tcsh</code> script?</li>\n</ol>\n\n<p>As I understand, If I don't have the ssh keys, it will ask for the password. I would like to print a basic warning to the user if he doesn't have the ssh keys.</p>\n"}, {"tags": ["multithreading", "perl", "optimization", "refactoring"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 3, "creation_date": 1535572481, "post_id": 52085042, "comment_id": 91120540, "body": "Threads in general are fraught with peril, and when it comes to perl, are, while not deprecated, <a href=\"https://perldoc.perl.org/threads.html#WARNING\" rel=\"nofollow noreferrer\">strongly discouraged</a>. I can&#39;t say I&#39;ve ever used that Parse::Excel module, but taking 45 minutes to extract a small amount of data from only 500 files doesn&#39;t sound right. Post your code; maybe somebody can point out some opportunities for improvement?"}, {"owner": {"reputation": 53, "user_id": 518263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a604bda06d0a9c08036e6f61a26962ce?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/518263/joseph"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535574838, "post_id": 52085042, "comment_id": 91121653, "body": "Shawn, I&#39;ve added code - I think the real slowdown is where it has to iterate through every sheet name to find matches for what it&#39;s looking for (i.e. anything with &#39;QA&#39; in the name.)  Thanks for your advice on threads in general - maybe there are other refactoring/optimization routes I can take, like you said. =)"}, {"owner": {"reputation": 18119, "user_id": 1721239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50bb96fe6925fe9b4a821d4f2e160b9f?s=128&d=identicon&r=PG", "display_name": "jjanes", "link": "https://stackoverflow.com/users/1721239/jjanes"}, "edited": false, "score": 3, "creation_date": 1535575143, "post_id": 52085042, "comment_id": 91121783, "body": "Can&#39;t you take the embarrassingly parallel route and just call your program in parallel for each (for example, using GNU <code>parallel</code>) and then combine output at the end?  That is what I would probably do."}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 3, "last_activity_date": 1535582529, "last_edit_date": 1535582529, "creation_date": 1535575366, "answer_id": 52085784, "question_id": 52085042, "link": "https://stackoverflow.com/questions/52085042/threads-worth-it-for-this-situation/52085784#52085784", "title": "Threads: worth it for this situation?", "body": "<p>Threads (or using multiple processes using <code>fork</code>) allow your script to utilize more than one CPU at time. For many tasks, this can save a lot of \"user time\" but will not save \"system time\" (and may even increase system time to handle the overhead of starting and managing threads and processes). Here are the situations where threading/multiprocessing will <strong>not</strong> be helpful:</p>\n\n<ul>\n<li><p>the task of your script does not lend itself to parallelization -- when each step of your algorithm depends on the previous steps</p></li>\n<li><p>the task your script performs is fast and lightweight compared to the overhead of creating and managing a new thread or new process</p></li>\n<li><p>your system only has one CPU or your script is only enabled to use one CPU</p></li>\n<li><p>your task is constrained by a different resource than CPU, such as disk access, network bandwidth, or memory -- if your task involves processing large files that you download through a slow network connection, then your network is the bottleneck, and processing the file on multiple CPUs will not help. Likewise, if your task consumes 70% of your system's memory, than using a second and third thread will require paging to your swap space and will not save any time. Parallelization will also be less effective if your threads compete for some synchronized resource -- file locks, database access, etc.</p></li>\n<li><p>you need to be considerate of other users on your system -- if you are using all the cores on a machine, then other users will have a poor experience</p></li>\n<li><p>[added, threads only] your code uses any package that is not <em>thread-safe</em>.  Most pure Perl code will be thread-safe, but packages that use XS may not be</p></li>\n<li><p>[added] when you are still actively developing your core task. Debugging is a lot harder in parallel code</p></li>\n</ul>\n\n<p>Even if none of these apply, it is sometimes hard to tell how much a task will benefit from parallelization, and the only way to be sure is to actually implement the parallel task and benchmark it. But the task you have described looks like it could be a good candidate for parallelization.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1577470292, "last_edit_date": 1577470292, "creation_date": 1535587972, "answer_id": 52087629, "question_id": 52085042, "link": "https://stackoverflow.com/questions/52085042/threads-worth-it-for-this-situation/52087629#52087629", "title": "Threads: worth it for this situation?", "body": "<p>It seems to me that your task should benefit from multiple threads of execution (processes or threads), as it seems to have a very roughly even blend of I/O and CPU.  I would expect a speedup of a factor of a few but it is hard to tell without knowing details.</p>\n\n<p>One way is to break the list of files into groups, as many as there are cores that you can spare.  Then process each group in a <code>fork</code>, which assembles its results and passes them back to the parent once done, via a pipe or files. There are modules that do this and much more, for example <a href=\"https://metacpan.org/pod/release/MOB/Forks-Super-0.71/lib/Forks/Super.pm\" rel=\"nofollow noreferrer\">Forks::Super</a> or <a href=\"https://metacpan.org/pod/Parallel::ForkManager\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a>. They also offer a queue, another approach you can use.</p>\n\n<p>I do this regularly when a lot of data in files is involved and get near linear speedup with up to 4 or 5 cores (on NFS), or even with more cores depending on the job details and on hardware.</p>\n\n<p>I would cautiously assert that this may be simpler than threads, so to try first.</p>\n\n<p>Another way would be to create a thread queue (<a href=\"https://perldoc.perl.org/Thread/Queue.html\" rel=\"nofollow noreferrer\">Thread::Queue</a>)\nand feed it the filename groups.  Note that <em>Perl's threads are not the lightweight \"threads\"</em> as one might expect; quite the opposite, they are heavy, they copy everything to each thread (so start them upfront, before there is much data in the program), and they come with yet other subtleties.  Have a small number of workers with a sizable job (nice list of files) for each, instead of many threads rapidly working with the queue. </p>\n\n<p>In this approach, too, be careful about how to pass results back since frequent communication poses a significant overhead for (Perl's) threads.</p>\n\n<p>In either case it is important that the groups are formed so to provide for a balanced workload per thread/process. If this is not possible (you may not know which files may take much longer than others), then threads should take smaller batches while for forks use a queue from a module.</p>\n\n<p>Handing only a file or a few to a thread or a process is most likely way too light of a workload, in which case the overhead of managing may erase (or reverse) possible speed gains. The I/O overlap across threads/processes would also increase, which is the main limit to speedup here.</p>\n\n<p>The optimal number of files to pass to a thread/process is hard to estimate, even with all details on hand; just have to try. I assume that the reported runtime (over 5sec for a file) is due to some inefficiency which can be removed so first check your code for undue inefficiencies. If a file somehow really takes <em>that</em> long to process then start by passing a single file at a time to the queue.</p>\n\n<p>Also, please consider <a href=\"https://stackoverflow.com/a/52085784/4653379\">mob's answer</a> carefully.  And note that these are advanced techniques.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 298540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c2533be4088a9d0f858b319cb3ad889?s=128&d=identicon&r=PG", "display_name": "xiaoyafeng", "link": "https://stackoverflow.com/users/298540/xiaoyafeng"}, "is_accepted": false, "score": 0, "last_activity_date": 1535857884, "creation_date": 1535857884, "answer_id": 52133687, "question_id": 52085042, "link": "https://stackoverflow.com/questions/52085042/threads-worth-it-for-this-situation/52133687#52133687", "title": "Threads: worth it for this situation?", "body": "<p>What you do is just change \"for ....\" into \"mce_loop....\" and you'll see the boost, although I suggest you take a look <a href=\"https://metacpan.org/pod/MCE::Loop\" rel=\"nofollow noreferrer\">mceloop</a> first.</p>\n"}], "owner": {"reputation": 53, "user_id": 518263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a604bda06d0a9c08036e6f61a26962ce?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/518263/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "answer_count": 3, "score": 5, "last_activity_date": 1577470292, "creation_date": 1535571932, "last_edit_date": 1535574727, "question_id": 52085042, "link": "https://stackoverflow.com/questions/52085042/threads-worth-it-for-this-situation", "title": "Threads: worth it for this situation?", "body": "<p>I have never used threads before, but think I may have encountered an opportunity:</p>\n\n<p>I have written a script that chews through an array of ~500 Excel files, and uses Parse::Excel to pull values from specific sheets in the workbook (on average, two sheets per workbook; one cell extracted per sheet.)</p>\n\n<p>Running it now, where I just go through the array of files one by one and extract the relevant info from the file, it takes about 45 minutes to complete.</p>\n\n<p>My question is: is this an opportunity to use threads, and have more than one file get hit at a time*, or should I maybe just accept the 45 minute run time?</p>\n\n<p>(* - if this is a gross misunderstanding of what I can do with threads, please say so!)</p>\n\n<p>Thanks in advance for any guidance you can offer!</p>\n\n<p>Edit - adding example code.  The code below is a sub that is called in a foreach loop for each file location stored in an array:</p>\n\n<pre><code># Init the parser\nmy $parser = Spreadsheet::ParseExcel-&gt;new;\nmy $workbook = $parser-&gt;parse($inputFile) or die(\"Unable to load $inputFile: $!\");\n\n# Get a list of any sheets that have 'QA' in the sheet name\nforeach my $sheet ($workbook-&gt;worksheets) {\n    if ($sheet-&gt;get_name =~ m/QA/) {\n        push @sheetsToScan, $sheet-&gt;get_name;\n    }\n}\nshift @sheetsToScan;\n\n# Extract the value from the appropriate cell\nforeach (@sheetsToScan) {\n    my $worksheet = $workbook-&gt;worksheet($_);\n    if ($_ =~ m/Production/ or $_ =~ m/Prod/) {\n        $cell = $worksheet-&gt;get_cell(1, 1);\n        $value = $cell ? $cell-&gt;value: undef;\n        if (not defined $value) {\n            $value = \"Not found.\";\n        }\n    } else {\n        $cell = $worksheet-&gt;get_cell(6,1);\n        $value = $cell ? $cell-&gt;value: undef;\n        if (not defined $value) {\n            $value = \"Not found.\";\n        }\n    }\n\npush(@outputBuffer, $line);\n</code></pre>\n"}, {"tags": ["perl", "serial-port"], "comments": [{"owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1535545196, "post_id": 52076840, "comment_id": 91104300, "body": "In which order did you try both of them? To my understanding, you are required to use CR LF (0D 0A) at the end of lines in serial communication."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535559309, "post_id": 52076840, "comment_id": 91114222, "body": "This is nothing to to with RS232: it is just a byte sequence. What protocol is being used? And what software is reading from the interface? If you are using a Perl program at line level then you must be careful to avoid any semantic conversions. That essentially means using <code>open &#39;:&lt;:raw</code>, $source`."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535559344, "post_id": 52076840, "comment_id": 91114244, "body": "What operating system are you working with?"}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "reply_to_user": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "edited": false, "score": 0, "creation_date": 1535625797, "post_id": 52076840, "comment_id": 91140059, "body": "@Silvar The communication is delimited by STX and ETX. 0D and 0A are the result of some calculations made for generating those strings showed in the example."}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535626057, "post_id": 52076840, "comment_id": 91140237, "body": "@Borodin I&#39;m using Device::SerialPort for handle all the communication. The software that will receive the message is a SW from a lift manufacturer. All we got is the protocol definition, we don&#39;t have access to the receiving software. I&#39;m not reading from any file, I&#39;m getting data from a database and doing some maths to generate the message, then, I send it. The OS is raspbian under a Raspberry Pi 3."}], "answers": [{"comments": [{"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1535545940, "post_id": 52077378, "comment_id": 91104763, "body": "The problem is not printing it. The problem is sending the data. I don&#39;t mind about the actual representation of the data, just need to know how to send the data properly"}, {"owner": {"reputation": 2943, "user_id": 9014308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6e0464313ca63c239f5d973213daf9?s=128&d=identicon&r=PG&f=1", "display_name": "kunif", "link": "https://stackoverflow.com/users/9014308/kunif"}, "reply_to_user": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1535549477, "post_id": 52077378, "comment_id": 91107345, "body": "The name of the function is print, but it does not mean printing to paper or screen. I can not find exactly good articles, but I added some helpful articles."}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1535625720, "post_id": 52077378, "comment_id": 91140017, "body": "Just finished reading everything and I found it a really interesting reading most of all. What I wonder is that using binmode $stt before packing and sending through serial port will make any changes to the output in the other side. I&#39;m burning a raspbian image to run the code in a RPI (same distro that is using under production) and will check it out."}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1535977838, "post_id": 52077378, "comment_id": 91249595, "body": "Just added an answer to clarify how to fix this. Thanks for your help and for those links"}], "tags": [], "owner": {"reputation": 2943, "user_id": 9014308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b6e0464313ca63c239f5d973213daf9?s=128&d=identicon&r=PG&f=1", "display_name": "kunif", "link": "https://stackoverflow.com/users/9014308/kunif"}, "is_accepted": false, "score": 0, "last_activity_date": 1535549462, "last_edit_date": 1535549462, "creation_date": 1535545349, "answer_id": 52077378, "question_id": 52076840, "link": "https://stackoverflow.com/questions/52076840/rs232-issue-with-0x0a-and-0x0d-while-sending-a-message/52077378#52077378", "title": "RS232 issue with 0x0A and 0x0D while sending a message", "body": "<p>When outputting binary data with perl, it seems that it is necessary to set it to binmode and then output it by print. Please refer to the following article.</p>\n\n<p><a href=\"https://blog-en.openalfa.com/how-to-work-with-binary-data-in-a-perl-script\" rel=\"nofollow noreferrer\">How to work with binary data in a perl script</a></p>\n\n<p><hr></p>\n\n<h3>In Addition:<br></h3>\n\n<p><a href=\"http://www.herongyang.com/Perl/binary.html\" rel=\"nofollow noreferrer\">Input and Output in Binary Mode 1</a><br>\n<a href=\"http://www.herongyang.com/Perl/binary_2.html\" rel=\"nofollow noreferrer\">Input and Output in Binary Mode 2</a><br>\n<a href=\"http://www.fibrevillage.com/scripting/366-how-to-read-and-write-the-serial-port-using-perl\" rel=\"nofollow noreferrer\">How to read and write the serial port using perl</a><br>\n<a href=\"https://www.perlmonks.org/?node_id=688080\" rel=\"nofollow noreferrer\">Accessing Serial port on windows and Linux</a><br>\n<a href=\"https://perldoc.perl.org/perlport.html\" rel=\"nofollow noreferrer\">perlport</a><br>\n<a href=\"http://www.devx.com/DevX/Tip/17116\" rel=\"nofollow noreferrer\">Handling Binary Files in Perl</a></p>\n"}, {"tags": [], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1535977781, "creation_date": 1535977781, "answer_id": 52149838, "question_id": 52076840, "link": "https://stackoverflow.com/questions/52076840/rs232-issue-with-0x0a-and-0x0d-while-sending-a-message/52149838#52149838", "title": "RS232 issue with 0x0A and 0x0D while sending a message", "body": "<p>In this case, this was an issue related with serial port configuration. </p>\n\n<p>By changing from </p>\n\n<pre><code>$ob_w-&gt;stty_icrnl (1);\n$ob_w-&gt;stty_ocrnl (1);\n$ob_w-&gt;stty_onlcr (1);\n$ob_w-&gt;stty_opost (1);\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>$ob_w-&gt;stty_icrnl (0);\n$ob_w-&gt;stty_ocrnl (0);\n$ob_w-&gt;stty_onlcr (0);\n$ob_w-&gt;stty_opost (0);\n</code></pre>\n\n<p>will fix the message. Some of the orders from above was changing 0x0A and 0x0D to 0x0A0D, so in this particular case, the receiving machine calculates the checksum and discard the message because the checksum received and generated was not the same.</p>\n"}], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 52149838, "answer_count": 2, "score": 0, "last_activity_date": 1535977781, "creation_date": 1535543674, "last_edit_date": 1535544265, "question_id": 52076840, "link": "https://stackoverflow.com/questions/52076840/rs232-issue-with-0x0a-and-0x0d-while-sending-a-message", "title": "RS232 issue with 0x0A and 0x0D while sending a message", "body": "<p>I'm running a code that composes a message and send it over RS232 bus to a device. </p>\n\n<p>I'm having issues when the message has 0A (new line) or 0D (carriage return) chars (or both) on the message. </p>\n\n<p>The reading side is telling me that it doesn't understand the message (by sending me a NAK response). I've deduced that the issue is with those two chars. </p>\n\n<p>ie:</p>\n\n<pre><code>022620255846060A00003003\n022620255946060D00003703\n</code></pre>\n\n<p>Any thoughts of how may I send the same information without having to change the 0A or 0D?</p>\n\n<p>The code that I'm using for sending the message is this:</p>\n\n<pre><code>my $stt = pack 'H*',$msg;\n$ob_w-&gt;write($stt);\n</code></pre>\n\n<p>being $msg equal to one of the above codes and $ob_w is the port itself.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["linux", "perl", "file", "permissions", "mojolicious"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535536467, "post_id": 52074299, "comment_id": 91098711, "body": "Do you have checks to see if those chown and chmod calls succeed?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535540784, "post_id": 52074299, "comment_id": 91101444, "body": "is the user that this script is run as, the owner of that file as well?"}, {"owner": {"reputation": 474, "user_id": 2136286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c078331d06deca1d0af42d477dcd68cd?s=128&d=identicon&r=PG", "display_name": "the.Legend", "link": "https://stackoverflow.com/users/2136286/the-legend"}, "edited": false, "score": 0, "creation_date": 1535547849, "post_id": 52074299, "comment_id": 91106177, "body": "chown will fail unless ran by root"}, {"owner": {"reputation": 11, "user_id": 10189111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f9af3ee594075b450e810ea11883bb?s=128&d=identicon&r=PG&f=1", "display_name": "Taji", "link": "https://stackoverflow.com/users/10189111/taji"}, "reply_to_user": {"reputation": 474, "user_id": 2136286, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c078331d06deca1d0af42d477dcd68cd?s=128&d=identicon&r=PG", "display_name": "the.Legend", "link": "https://stackoverflow.com/users/2136286/the-legend"}, "edited": false, "score": 0, "creation_date": 1535547884, "post_id": 52074299, "comment_id": 91106205, "body": "@the.Legend I know"}, {"owner": {"reputation": 11, "user_id": 10189111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f9af3ee594075b450e810ea11883bb?s=128&d=identicon&r=PG&f=1", "display_name": "Taji", "link": "https://stackoverflow.com/users/10189111/taji"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535547896, "post_id": 52074299, "comment_id": 91106218, "body": "@GerhardBarnard it&#39;s root"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1535639960, "post_id": 52074299, "comment_id": 91149992, "body": "What does chmod returns? What happens if the same chmod is done in the shell directly by the same user?"}, {"owner": {"reputation": 87, "user_id": 6479118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63708dea9abc1e12f5c0c38412aad735?s=128&d=identicon&r=PG&f=1", "display_name": "Theo Ohnsorge", "link": "https://stackoverflow.com/users/6479118/theo-ohnsorge"}, "edited": false, "score": 0, "creation_date": 1535641152, "post_id": 52074299, "comment_id": 91150834, "body": "Check the  umask settings (run <code>umask</code> in a shell) of the user that runs the app. If they don&#39;t match your requirements you can override them with Perl&#39;s core function <a href=\"http://perldoc.perl.org/functions/umask.html\" rel=\"nofollow noreferrer\">umask</a>"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 0, "last_activity_date": 1536243063, "creation_date": 1536243063, "answer_id": 52206044, "question_id": 52074299, "link": "https://stackoverflow.com/questions/52074299/the-permissions-of-a-file-wont-change-to-the-ones-i-want/52206044#52206044", "title": "The permissions of a file won&#39;t change to the ones I want", "body": "<p>Look at the <code>$!</code> variable to see the error for a system call:</p>\n\n<pre><code>chmod 0777, $my_file_full_path \n      or warn \"Could not chmod for $my_file_full_path: $!\";\n</code></pre>\n\n<p>Once you tell us that answer we can see about fixing it.</p>\n"}], "owner": {"reputation": 11, "user_id": 10189111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6f9af3ee594075b450e810ea11883bb?s=128&d=identicon&r=PG&f=1", "display_name": "Taji", "link": "https://stackoverflow.com/users/10189111/taji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1536243063, "creation_date": 1535535677, "last_edit_date": 1535537034, "question_id": 52074299, "link": "https://stackoverflow.com/questions/52074299/the-permissions-of-a-file-wont-change-to-the-ones-i-want", "title": "The permissions of a file won&#39;t change to the ones I want", "body": "<p>I have this in my Mojolicious app:</p>\n\n<pre><code>  my $content = get_content();\n  open my $fl, '&gt;', $my_file_full_path\n      or die $!;\n\n  print $fl $content;\n  close $fl;\n\n\n  # change owner to my_user:my_user\n  my $uid = getpwnam \"my_user\";\n  my $gid = getgrnam \"my_user\";\n  chown $uid, $gid, $my_file_full_path;\n\n  # change permissions\n  chmod 0777, $my_file_full_path;\n</code></pre>\n\n<p>However, in the end, the permissions of a newly created file still will remain <code>rwxr-xr-x</code> and that's not 777</p>\n\n<p>How to fix that? Why is that in the first place?</p>\n"}, {"tags": ["windows", "perl", "iis", "awstats"], "comments": [{"owner": {"reputation": 240, "user_id": 4292937, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e2b6993dc576b454be4bd6f6346f19ec?s=128&d=identicon&r=PG&f=1", "display_name": "fcb1900", "link": "https://stackoverflow.com/users/4292937/fcb1900"}, "edited": false, "score": 0, "creation_date": 1535541355, "post_id": 52074163, "comment_id": 91101831, "body": "I edited the config to my Lofiles to LogFile=&quot;C:\\inetpub\\logs\\LogFiles\\W3SVC1\\u_ex%YY-24%MM-24%DD&zwnj;&#8203;-24.log&quot;. But now iam getting the following error: Error: Couldn&#39;t open server log file &quot;C:\\inetpub\\logs\\LogFiles\\W3SVC1\\u_ex180828.log&quot; : Permission denied   Setup (&#39;C:\\inetpub\\wwwroot\\stats\\cgi-bin/awstats.sbs20websrv01.sb.&zwnj;&#8203;edeka.net.conf&#39; file, web server or permissions) may be wrong. Check config file, permissions and AWStats documentation (in &#39;docs&#39; directory)."}], "answers": [{"tags": [], "owner": {"reputation": 240, "user_id": 4292937, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e2b6993dc576b454be4bd6f6346f19ec?s=128&d=identicon&r=PG&f=1", "display_name": "fcb1900", "link": "https://stackoverflow.com/users/4292937/fcb1900"}, "is_accepted": false, "score": 0, "last_activity_date": 1535542535, "creation_date": 1535542535, "answer_id": 52076512, "question_id": 52074163, "link": "https://stackoverflow.com/questions/52074163/awstats-do-not-show-statistics-from-iis-8-5/52076512#52076512", "title": "awstats do not show statistics from IIS 8.5", "body": "<p>Logfile path have to look like this:</p>\n\n<pre><code>LogFile=\"C:\\inetpub\\logs\\LogFiles\\W3SVC1\\u_ex%YY-24%MM-24%DD-24.log\"\n</code></pre>\n"}], "owner": {"reputation": 240, "user_id": 4292937, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e2b6993dc576b454be4bd6f6346f19ec?s=128&d=identicon&r=PG&f=1", "display_name": "fcb1900", "link": "https://stackoverflow.com/users/4292937/fcb1900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535542535, "creation_date": 1535535270, "question_id": 52074163, "link": "https://stackoverflow.com/questions/52074163/awstats-do-not-show-statistics-from-iis-8-5", "title": "awstats do not show statistics from IIS 8.5", "body": "<p>awstats 7.7 do not show the statistics. Iam using IIS 8.5.\nI configured site logging as follow in IIS in W3C format:</p>\n\n<ul>\n<li>date</li>\n<li>time</li>\n<li>c-ip</li>\n<li>cs-username</li>\n<li>cs-method</li>\n<li>cs-uri-stem</li>\n<li>sc-status</li>\n<li>sc-bytes</li>\n<li>cs-version</li>\n<li>cs(User-Agent)</li>\n<li>cs(Referer)</li>\n</ul>\n\n<p>Logfiles are located here</p>\n\n<pre><code>C:\\inetpub\\logs\\LogFiles\\W3SVC1\n</code></pre>\n\n<p>Logfiles will be created daily.\nExample:</p>\n\n<pre><code>2018-08-29 05:18:25 GET /ping/ping.php - 10.74.20.182 HTTP/1.1 Mozilla/5.0+(Windows+NT+6.1;+WOW64;+rv:43.0)+Gecko/20100101+Firefox/43.0 http://sbs20websrv01.sb.edeka.net/ping/ 200 252\n</code></pre>\n\n<p>My config file looks like this:</p>\n\n<pre><code>LogFile=\"C:\\inetpub\\logs\\LogFiles\\W3SVC1\\*.log\"\nLogType=W\nLogFormat=2\nLogSeparator=\" \"\nSiteDomain=\"sbs20websrv01.sb.XXX.net\"\nHostAliases=\"localhost 127.0.0.1 REGEX[myserver\\.com$]\"\nDNSLookup=2\nDynamicDNSLookup=0\nDirData=\"C:\\inetpub\\wwwroot\\stats\\\"\nDirCgi=\"/stats/cgi-bin\"\nDirIcons=\"/stats/icon\"\nAllowToUpdateStatsFromBrowser=0\nAllowFullYearView=2\nEnableLockForUpdate=1\nDNSStaticCacheFile=\"dnscache.txt\"\nDNSLastUpdateCacheFile=\"dnscachelastupdate.txt\"\n</code></pre>\n\n<p>Whats wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1535521017, "post_id": 52069623, "comment_id": 91090037, "body": "Some <a href=\"https://perldoc.perl.org/perldsc.html#HASHES-OF-HASHES\" rel=\"nofollow noreferrer\">useful reading</a>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535530835, "post_id": 52069623, "comment_id": 91095139, "body": "Your entire code can be written as <code>my @data_split = map [ split ], &lt;FILE&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1536127129, "post_id": 52070434, "comment_id": 91306031, "body": "@charlotte-saray In case you didn&#39;t see my previous comment, I added code to post-process the <code>%results</code> data structure (add fields with zero).  Please let me know if there are questions."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1536131400, "last_edit_date": 1536131400, "creation_date": 1535522445, "answer_id": 52070434, "question_id": 52069623, "link": "https://stackoverflow.com/questions/52069623/counting-element-in-occurrence-counting/52070434#52070434", "title": "Counting element in occurrence counting", "body": "<p>To count and manage a range of items, and for any structured information, hashes are very useful. With them and arrays you can via references build data structures that can encode rather complex relationships. See <a href=\"https://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>. Once these become unwieldy the next step is to write a class.</p>\n\n<p>It can go along these lines</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';   \nuse Data::Dump qw(dd);\n\nmy $file = shift @ARGV;\ndie \"Usage: $0 filename\\n\" if not $file;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy %results;\n\nwhile (&lt;$fh&gt;) {\n    next if not /\\S/;  # skip empty lines\n\n    my ($subj, $name, $grade) = split;\n\n    if (not $subj or not $name or not defined $grade) {\n       warn \"Incomplete data, line: $_\";\n       next;\n    }\n\n    if ($grade eq 'pass') {\n        $results{$name}-&gt;{pass}++;\n    }  \n    elsif ($grade eq 'fail') {\n        $results{$name}-&gt;{fail}++;\n    }  \n    else { \n        warn \"Unknown grade format for $name in $subj: $grade\";\n        next;\n    }\n}\ndd \\%results;\n</code></pre>\n\n<p>Names without a single occurrence of a particular score stay without the hashref for that score. If you need those entries then post-process <code>%results</code> to add them, for example</p>\n\n<pre><code>foreach my $name (keys %results) {\n    $results{$name}-&gt;{pass} = 0 if not exists $results{$name}-&gt;{pass};\n    $results{$name}-&gt;{fail} = 0 if not exists $results{$name}-&gt;{fail};\n}\n</code></pre>\n\n<p>Or, add a statement to initialize both scores for each record (name) in the code.</p>\n\n<p>Note that we can enlarge this data structure to store more information (<code>$subj</code> for instance), as the need arises, cleanly and with small code changes. This is another benefit of using hashes.</p>\n\n<p>A few comments on the posted code</p>\n\n<ul>\n<li><p>Why is there no <code>use warnings;</code> at the beginning? You must have that; it is <em>directly</em> useful</p></li>\n<li><p>Use lexical filehandles, <code>open my $fh, '&lt;', $file ...</code> instead of globs (<code>FILE</code>)</p></li>\n<li><p>Process files a line at a time unless there is a <em>specific</em> reason to read the whole thing first</p></li>\n<li><p>You always want to check input against what you expect it to be; what exactly that is depends on your problem and designs. In the code above all fields must be defined and sensible (grade is allowed a 0), while you may in fact accept a non-existent grade; adjust as suitable. </p>\n\n<p>Of course, if <em>all files that this program will ever read</em> were like what you show, always with all fields and only pass/fail grade, then there would be no need to check input</p></li>\n<li><p>The pattern <code>/\\s+/</code> in <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> should almost always be replaced with <code>' '</code>, which is the same but it also discards leading spaces. It is also the default, along with <code>$_</code> for the string, thus just <code>split;</code> above (the string it splits by <code>' '</code> is <code>$_</code>)</p></li>\n<li><p>You can built a data structure like the one used here with what you got as well. However I don't see a benefit of an array of arrays here</p></li>\n</ul>\n\n<p>The increment of the appropriate counter can be written more concisely</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    next if not /\\S/;\n    my ($subj, $name, $grade) = split;\n    # check input ...\n\n    if ($grade !~ /^(?:pass|fail)$/) {\n        warn \"Unknown grade format for $name in $subj: $grade\";\n        next;\n    }   \n\n    $results{$name}-&gt;{$grade}++;\n}\n</code></pre>\n\n<p>If you'd rather have your code quietly accept <em>anything</em> at the third field and store it in <code>%results</code> with its count then remove the check against <code>pass|fail</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1535566105, "post_id": 52077404, "comment_id": 91117701, "body": "This answer address merely the very question asked and ignores the many other issues in the question (opportunities to inform). I think that, &quot;<i>given the triviality of the quesiton</i>&quot; (in your own words), it is important to offer a wider guidance to writing robust programs."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535569276, "post_id": 52077404, "comment_id": 91119136, "body": "@zdim: I will tolerate unreasoned votes, but if you have down-voted my answer because you think I down-voted yours then your behaviour is abysmal."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1535569523, "post_id": 52077404, "comment_id": 91119237, "body": "Um, no, and such a statement in public is a little offensive?  Since you ask: I downvote answers very, <i>very</i> rarely (too much responsibility for me -- I would have to then keep track of whether they fix it to adjust the vote) and only when I consider it necessary as a way of informing the future readers.  Certainly not as a &quot;revenge&quot; or some such."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535573752, "post_id": 52077404, "comment_id": 91121147, "body": "@zdim: <i>&quot;This answer address merely the very question asked&quot;</i> I consider that to be a compliment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535573976, "post_id": 52077404, "comment_id": 91121241, "body": "@zdim: <i>&quot;such a statement in public is a little offensive&quot;</i> So you see that discussing votes at all is counter-productive? I hope you will try to simply accept any contributions that are offered. <i>&quot;Since you ask&quot;</i> I didn&#39;t ask."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535586349, "post_id": 52077404, "comment_id": 91125242, "body": "&quot;<i>So you see that discussing votes at all is counter-productive?</i>&quot; -- I know that so it surprised me when you brought it up.  I did thank you for advice of that kind (in the other thread) and removed my comment on voting.  Well, you did bring up voting and in a particular fashion. It is the contemplation of revenge downvoting that was &quot;<i>a little offensive</i>&quot; to me."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535586719, "post_id": 52077404, "comment_id": 91125295, "body": "&quot;<i>I consider that to be a compliment.</i>&quot;  -- well alright then. I firmly believe that we should let people know of issues in their posted code. To exaggerate, if they ask about the indicator while running the red light I think we should mention the traffic lights and not only answer the question."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1535545415, "creation_date": 1535545415, "answer_id": 52077404, "question_id": 52069623, "link": "https://stackoverflow.com/questions/52069623/counting-element-in-occurrence-counting/52077404#52077404", "title": "Counting element in occurrence counting", "body": "<p></p>\n\n<p>This is a very basic solution that does no checking of the input data. It initialises each hash value to <code>{ pass =&gt; 0, fail =&gt; 0 }</code> so that there are no \"missing\" values that need to be defaulted</p>\n\n<p>Note that Perl hashes are <em>unordered</em>, so the order of the output is also indeterminate. If you need anything specific then you must say so</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nopen my $fh, '&lt;', 'results.txt' or die $!;\n\nmy %grades;\n\nwhile ( &lt;$fh&gt; ) {\n\n    my ($class, $name, $grade) = split;\n\n    $grades{$name} //= { pass =&gt; 0, fail =&gt; 0 };\n    ++$grades{$name}{$grade}\n}\n\nsay \"name\\tpass\\tfail\";\n\nfor ( keys %grades ) {\n    say join \"\\t\", $_, @{ $grades{$_} }{qw/ pass fail /};\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>name    pass    fail\nMary    0   3\nBob 2   2\nMike    2   0\nPeter   2   2\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9838671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/738cc480f464afc74f449e76b2c087f6?s=128&d=identicon&r=PG&f=1", "display_name": "charlotte-saray", "link": "https://stackoverflow.com/users/9838671/charlotte-saray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1536131400, "creation_date": 1535517812, "last_edit_date": 1535527123, "question_id": 52069623, "link": "https://stackoverflow.com/questions/52069623/counting-element-in-occurrence-counting", "title": "Counting element in occurrence counting", "body": "<p></p>\n\n<p>Here I got a text file contains some subject results.\nWhat is the possible way to do a counting table as below in Perl?</p>\n\n<h3>result.txt</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Math Peter pass\nEnglish Peter pass\nMusic Peter fail\nScience Peter fail\nArt Mary fail\nMusic Mary fail\nEnglish Mary fail\nMath Bob pass\nEnglish Bob fail\nArt Bob pass\nMusic Bob fail\nEnglish Mike pass\nScience Mike pass\n</code></pre>\n\n<h3>Output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>name    pass    fail\nPeter   2   2\nMary    0   3\nBob 2   2\nMike    2   0\n</code></pre>\n\n<p>I have already tried this and can successfully print a dump in spited form </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\n\nuse Data::Dumper;\n\nmy $CurrentPath = \"/tmp\";\n\nopen(FILE, \"/tmp/result.txt\") or die(\"Cannot open file result.txt for reading: $!\");\nmy @results = &lt;FILE&gt;;\ns{^\\s+|\\s+$}{}g foreach @results;\nclose FILE;\n\nmy @data_split = ();\n\nforeach my $result ( @results ) {\n    push @data_split, [ split /\\s+/, $result ];\n}\n\nprint Dumper \\@data_split;\n\n1;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>$VAR1 = [\n          [\n            'Math',\n            'Peter',\n            'pass'\n          ],\n          [\n            'Eng',\n            'Peter',\n            'pass'\n          ],\n          ...............\n</code></pre>\n"}, {"tags": ["apache", "perl", "mod-fcgid"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1535476268, "post_id": 52062925, "comment_id": 91076680, "body": "<code>mod_fcgid</code> is an Apache module, not a Perl distribution or Perl module, so why would it be in Perlbrew or CPAN?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1535483078, "creation_date": 1535483078, "answer_id": 52064707, "question_id": 52062925, "link": "https://stackoverflow.com/questions/52062925/cpan-cannot-install-mod-fcgid-dont-know-what-it-is/52064707#52064707", "title": "cpan Cannot install mod_fcgid, don&#39;t know what it is", "body": "<p>If you search on line for <code>install mod_fcgid Centos</code> then are multiple results. The second one is <a href=\"http://www.inetservicescloud.com/knowledgebase/how-to-install-mod_fcgid-on-rhel-or-centos/\" rel=\"nofollow noreferrer\"><em>How to install mod_fcgid on RHEL or CentOS</em></a> and it consists of just three steps</p>\n\n<blockquote>\n  <p>Here are the steps to install mod_fcgid on RHEL/CentOS:  </p>\n  \n  <p>Step 1: To install mod_fcgid on CentOS / RHEL , first we will install EPEL repo .<br>\n  #rpm -ivh <a href=\"http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\" rel=\"nofollow noreferrer\">http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</a>  </p>\n  \n  <p>Step 2: Now install the mod_fcgid<br>\n  #yum install mod_fcgid  </p>\n  \n  <p>Step 3: to confirm package installed.<br>\n  #rpm -qa|grep mod_fcgid  </p>\n</blockquote>\n"}], "owner": {"reputation": 69, "user_id": 10252211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a52627a28271297d47b8770af3a96d1?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolas Service", "link": "https://stackoverflow.com/users/10252211/nikolas-service"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 52064707, "answer_count": 1, "score": -2, "last_activity_date": 1535483306, "creation_date": 1535475239, "last_edit_date": 1535483306, "question_id": 52062925, "link": "https://stackoverflow.com/questions/52062925/cpan-cannot-install-mod-fcgid-dont-know-what-it-is", "title": "cpan Cannot install mod_fcgid, don&#39;t know what it is", "body": "\n\n<p>I have tried to install <code>mod_fcgid</code> on Centos 7 with no success. Actually I used <code>yum install</code> or <code>rpm</code> or <code>brewperl</code> but none worked</p>\n\n<p>Then I tried <code>cpan</code> because it was my last shot. Maybe I am mistaken in syntax? </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cpan mod_fcgid\nReading '/home/nick/.cpan/Metadata'\n  Database was generated on Mon, 27 Aug 2018 19:29:02 GMT\nWarning: Cannot install mod_fcgid, don't know what it is.\nTry the command\n\n    i /mod_fcgid/\n\nto find objects with matching identifiers.\n</code></pre>\n\n<p>I have googled but it seems like no one had an issue with this. And of course it exists for Centos; please <a href=\"https://centos.pkgs.org/7/centos-x86_64/mod_fcgid-2.3.9-4.el7_4.1.x86_64.rpm.html\" rel=\"nofollow noreferrer\">look here</a></p>\n"}, {"tags": ["bash", "shell", "perl", "sorting", "awk"], "comments": [{"owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "edited": false, "score": 5, "creation_date": 1535474168, "post_id": 52062515, "comment_id": 91075566, "body": "You&#39;ve given an example of one output you&#39;re getting with a field in the wrong spot, could you please edit the question to show the output you would like to see?"}, {"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "reply_to_user": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "edited": false, "score": 0, "creation_date": 1535474362, "post_id": 52062515, "comment_id": 91075656, "body": "The expected one is the first list. Please edit if you have enough reputation points (I don&#39;t)"}, {"owner": {"reputation": 12620, "user_id": 4687135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/386484f527a8df3c1fdd3e2dde112533?s=128&d=identicon&r=PG", "display_name": "Eric Renouf", "link": "https://stackoverflow.com/users/4687135/eric-renouf"}, "edited": false, "score": 1, "creation_date": 1535474573, "post_id": 52062515, "comment_id": 91075760, "body": "You want <code>FOO</code> sorted before <code>BAR</code> then?"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1535474587, "post_id": 52062515, "comment_id": 91075769, "body": "So you want descending order before the dot and ascending alphabetical+ numerical order after the dot? Is the format always three chars, one dot, one letter, then some numbers or hyphens?"}, {"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535474837, "post_id": 52062515, "comment_id": 91075901, "body": "Aahh sorry, BAR shoud be before FOO :/ Please if someone can edit. This is just a sample"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1535475651, "post_id": 52062515, "comment_id": 91076346, "body": "Please add sample input and your desired output for that sample input to your question."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535474213, "post_id": 52062606, "comment_id": 91075591, "body": "<code>FOO.A1-1</code> should be before <code>FOO.A10</code>"}, {"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535474448, "post_id": 52062606, "comment_id": 91075705, "body": "&#39;like this&#39; means this is what I expect, sorry if it&#39;s not clear enough"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535483657, "post_id": 52062606, "comment_id": 91080108, "body": "@M&#233;vatlav&#233;: You wrote <i>&quot;I have to sort cell names like this&quot;</i> which implies that the cell names are &quot;like this&quot;, not the way they&#39;re sorted. It looks like you&#39;re showing the input data."}, {"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535483984, "post_id": 52062606, "comment_id": 91080267, "body": "@Borodin: sorry for my bad description, but glenn jackman understood what I mean. I liked to edit, but I don&#39;t have any reputation points to do so. My appologies"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1535477915, "last_edit_date": 1535477915, "creation_date": 1535474027, "answer_id": 52062606, "question_id": 52062515, "link": "https://stackoverflow.com/questions/52062515/how-to-sort-complicated-strings-in-shell/52062606#52062606", "title": "How to sort complicated strings in shell?", "body": "<p>version sort</p>\n\n<pre><code>$ sort -V file\n\nBAR.A1\nBAR.B1\nBAR.B1-1\nFOO.A1\nFOO.A2\nFOO.A3\nFOO.A10\nFOO.A1-1\n</code></pre>\n\n<p><strong>updated</strong> based on clarified question</p>\n\n<pre><code>$ sort -t- -k1,1V -k2 file\n\nBAR.A1\nBAR.B1\nBAR.B1-1\nFOO.A1\nFOO.A1-1\nFOO.A2\nFOO.A3\nFOO.A10\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535474702, "post_id": 52062697, "comment_id": 91075832, "body": "<code>FOO.A10</code> should be after <code>FOO.A3</code>"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535475054, "post_id": 52062697, "comment_id": 91076007, "body": "@M&#233;vatlav&#233;Kraspek see update. your question is very unclear/misleading on what you want to achieve."}, {"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535484109, "post_id": 52062697, "comment_id": 91080311, "body": "Sorry @Patrick Mevzek for my bad description, not enough reputations points to edit my post by myself."}, {"owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "edited": false, "score": 0, "creation_date": 1535582748, "post_id": 52062697, "comment_id": 91124351, "body": "Your last command is good, thanks, already accepted another one"}], "tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 1, "last_activity_date": 1535475015, "last_edit_date": 1535475015, "creation_date": 1535474374, "answer_id": 52062697, "question_id": 52062515, "link": "https://stackoverflow.com/questions/52062515/how-to-sort-complicated-strings-in-shell/52062697#52062697", "title": "How to sort complicated strings in shell?", "body": "<p>There are still various unclear points (you are not saying exactly the output you want) but <code>sort -g</code> should do it:</p>\n\n<pre><code>$ cat s.txt\nFOO.A1\nFOO.A1-1\nFOO.A2\nFOO.A3\nFOO.A10\nBAR.A1\nBAR.B1\nBAR.B1-1\n$ sort -g s.txt\nBAR.A1\nBAR.B1\nBAR.B1-1\nFOO.A1\nFOO.A1-1\nFOO.A10\nFOO.A2\nFOO.A3\n</code></pre>\n\n<p><code>-g</code> is defined as such:</p>\n\n<blockquote>\n  <p>-g, --general-numeric-sort, --sort=general-numeric\n               Sort by general numerical value.  As opposed to -n, this option handles general floating points.  It has a more permissive format than that allowed by -n but it has a significant performance drawback.</p>\n</blockquote>\n\n<p>But <code>-n</code> would fit here as well, so your desired output is not clear.</p>\n\n<p>Based on your further updates, maybe this is what you want:</p>\n\n<pre><code>$ sort -t '.' -k 2 -V &lt; s.txt\nBAR.A1\nFOO.A1\nFOO.A1-1\nFOO.A2\nFOO.A3\nFOO.A10\nBAR.B1\nBAR.B1-1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 5, "last_activity_date": 1535476618, "creation_date": 1535476618, "answer_id": 52063265, "question_id": 52062515, "link": "https://stackoverflow.com/questions/52062515/how-to-sort-complicated-strings-in-shell/52063265#52063265", "title": "How to sort complicated strings in shell?", "body": "<p>It looks like you want to sort by field 1 alphabetically, then field 2 version-wise</p>\n\n<pre><code>sort -t. -k 1,1 -k2,2V &lt;&lt;END\nFOO.A1\nFOO.A1-1\nFOO.A2\nFOO.A3\nFOO.A10\nBAR.A1\nBAR.B1\nBAR.B1-1\nEND\n</code></pre>\n\n\n\n<pre><code>BAR.A1\nBAR.B1\nBAR.B1-1\nFOO.A1\nFOO.A1-1\nFOO.A2\nFOO.A3\nFOO.A10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1535486943, "creation_date": 1535486943, "answer_id": 52065500, "question_id": 52062515, "link": "https://stackoverflow.com/questions/52062515/how-to-sort-complicated-strings-in-shell/52065500#52065500", "title": "How to sort complicated strings in shell?", "body": "<pre><code>perl -MSort::Key::Natural=natsort -e'print for natsort &lt;&gt;'\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a> for usage.</p>\n"}], "owner": {"reputation": 403, "user_id": 10284437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e4mfN.jpg?s=128&g=1", "display_name": "M&#233;vatlav&#233; Kraspek", "link": "https://stackoverflow.com/users/10284437/m%c3%a9vatlav%c3%a9-kraspek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 52063265, "answer_count": 4, "score": 0, "last_activity_date": 1535486943, "creation_date": 1535473689, "last_edit_date": 1535484269, "question_id": 52062515, "link": "https://stackoverflow.com/questions/52062515/how-to-sort-complicated-strings-in-shell", "title": "How to sort complicated strings in shell?", "body": "<p>I have to sort cell names like this (no matters if it comes from a file or a variable): expected result</p>\n\n<pre><code>BAR.A1\nBAR.A1-1\nBAR.A2\nBAR.A3\nBAR.A10\nFOO.A1\nFOO.B1\nFOO.B1-1\n</code></pre>\n\n<p>What I tried results in this wrong order : </p>\n\n<pre><code>BAR.A1\nBAR.B1\nBAR.B1-1\nFOO.A1\nFOO.A10 &lt;--- wrong place\nFOO.A1-1\nFOO.A2\nFOO.A3\n</code></pre>\n\n<p>I tried many combinaisons of </p>\n\n<pre><code>sort -n\nsort -h\nsort -d\n</code></pre>\n\n<p>none works.</p>\n\n<p>Any clue ?</p>\n"}, {"tags": ["apache", "perl", "mod-rewrite", "url-rewriting", "mod"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1535470236, "post_id": 52058320, "comment_id": 91073276, "body": "What is generating the URLs?"}, {"owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1535471163, "post_id": 52058320, "comment_id": 91073867, "body": "Currently, my script queries my db from a query string that is hard coded or just pasted in my browser because I have not gotten past this long URL issue. Once I get this figured out, I will just make a search form which I have done many times but, not with so many vars. So, I can implement at the source of the query as well if need be."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1535471706, "post_id": 52058320, "comment_id": 91074218, "body": "@Stephanie: There&#39;s a &quot;-1&quot; next to your question as someone reading it (not me) has decided that it&#39;s worth a downvote."}, {"owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535491944, "post_id": 52058320, "comment_id": 91083300, "body": "A question should not be down voted after it is edited to the point of not representing what I was trying to ask. The question above is not just what I was trying to get at. Oh well, I will refrain from asking any more questions."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535464076, "post_id": 52059311, "comment_id": 91069176, "body": "That will not pas the query string for processing correct? I am leaning towards Algorithm::URL::Shorten module but, having trouble figuring out how to implement. Generates fine but, cannot figure out how to either write needed file or even perhaps using mysql."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535464454, "post_id": 52059311, "comment_id": 91069436, "body": "@Stephanie: No, it explicitly deletes the query, and produces exactly the output you asked for. Can you explain better what you want to do with it?"}, {"owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535468573, "post_id": 52059311, "comment_id": 91072163, "body": "I want to take my long url (due to dynamic query string coming from a search form) and shorten it. I wanted to use mod rewrite in my htaccess to do this. Perhaps 14 of the 15 params in the querystring are blank as well."}, {"owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535468796, "post_id": 52059311, "comment_id": 91072315, "body": "P.S. The Algorithm::URL::Shorten module works great even with encoded query which is great for static links but, my misunderstanding was that that module does not solve shortening the url in the landing pages address bar."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535477075, "post_id": 52059311, "comment_id": 91077086, "body": "@Stephanie: I&#39;m still unclear about what you&#39;re trying to achieve. The edits I made to your question removed no material information. Ah, it appears from the answer you accepted that you were trying to obfuscate the URL query; that wasn&#39;t at all clear to me. Note that even with <code>POST</code> the parameters are still visible to someone who wants to make the effort to extract them: they&#39;re just not visible in the address line."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535463502, "creation_date": 1535463502, "answer_id": 52059311, "question_id": 52058320, "link": "https://stackoverflow.com/questions/52058320/using-apache-mod-rewrite-to-modify-a-query-string/52059311#52059311", "title": "Using Apache mod rewrite to modify a query string", "body": "<p>I'm not clear what you need to do, but if you just want to remove the path and query from a URL then you can use the\n<a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\"><code>URI</code></a> module</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse URI;\n\nmy $url = URI-&gt;new('http://example.com/directory/perlscript.pl?base64encodedquery=jhfkjdshfsdf78fs8y7sd8');\n\nsay $url;\n\n$url-&gt;path(\"/\");\n$url-&gt;query(\"\");\n\nsay $url;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>http://example.com/directory/perlscript.pl?base64encodedquery=jhfkjdshfsdf78fs8y7sd8\nhttp://example.com/?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535473459, "post_id": 52062107, "comment_id": 91075190, "body": "Excellent!! THANK YOU Chris. I don&#39;t know how that escaped my thought process, lack there of I guess or too close to see? That will work for forms and if I have to send a publicly visible query directly from a script for some reason, I can always write a workaround using POST.  Thank you so much. The mod rewrite still baffles me however, glad I don&#39;t need to use it for now. Have a GREAT DAY."}, {"owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "edited": false, "score": 0, "creation_date": 1535474526, "post_id": 52062107, "comment_id": 91075744, "body": "LWP::UserAgent  is yet again my friend! SOLVED."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": true, "score": 0, "last_activity_date": 1535472300, "creation_date": 1535472300, "answer_id": 52062107, "question_id": 52058320, "link": "https://stackoverflow.com/questions/52058320/using-apache-mod-rewrite-to-modify-a-query-string/52062107#52062107", "title": "Using Apache mod rewrite to modify a query string", "body": "<p>Since you're intending to use generate the requests to your perl script using a HTML form at some point, that lends itself to a very simple solution. You can tell the browser to make a HTTP POST request instead of the usual HTTP GET request by adding a <code>method</code> attribute to the form tag like this.</p>\n\n<pre><code>&lt;form method=\"POST\" action=\"http://example.com/directory/perlscript.pl\"&gt;\n&lt;input name=\"whatever\"/&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The browser will make the request to \"<a href=\"http://example.com/directory/perlscript.pl\" rel=\"nofollow noreferrer\">http://example.com/directory/perlscript.pl</a>\", but there won't be a query string - instead the form data is passed in via STDIN. But you don't really need to know that as whatever framework you're using should transparently handle that and provide access to the passed in parameters exactly the same as if they were passed in via the URL.</p>\n"}], "owner": {"reputation": 1, "user_id": 9870420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27644268f8539840c797808bb7b2ff3f?s=128&d=identicon&r=PG&f=1", "display_name": "Stephanie", "link": "https://stackoverflow.com/users/9870420/stephanie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 52062107, "answer_count": 2, "score": -3, "last_activity_date": 1535472300, "creation_date": 1535460428, "last_edit_date": 1535463215, "question_id": 52058320, "link": "https://stackoverflow.com/questions/52058320/using-apache-mod-rewrite-to-modify-a-query-string", "title": "Using Apache mod rewrite to modify a query string", "body": "\n\n<p>I know it is possible to use mod rewrite in my htaccess</p>\n\n<p>Take:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>http://example.com/directory/perlscript.pl?base64encodedquery=jhfkjdshfsdf78fs8y7sd8\n</code></pre>\n\n<p>Make a shorter URL:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>http://example.com/? whatever just want to make it prettier\n</code></pre>\n\n<p>Incoming: I am using <code>use CGI;</code> thus <code>$qry-&gt;param('base64encodedquery'));</code> \nThen I use <code>use MIME::Base64</code> to decode the query string (encoded previously).</p>\n\n<p>I don't really need to encode and decode the query but, I am learning and just want to mask / hide my query string that contains up to 15 short parameters.</p>\n\n<p>I am leaning towards a Perl module that shortens URLs and I am actively searching. I actually don't think my encoded query can be used with mod rewrite. so I will also take module suggestions as well.</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "edited": false, "score": 0, "creation_date": 1535451497, "post_id": 52054523, "comment_id": 91060975, "body": "why not <code>-f</code> ?."}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "reply_to_user": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "edited": false, "score": 0, "creation_date": 1535453446, "post_id": 52054523, "comment_id": 91062239, "body": "@Rattiku <code>-f</code> rejects symbolic links."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535468654, "post_id": 52054523, "comment_id": 91072221, "body": "Because it doesn&#39;t just check for existence, it also checks if it&#39;s a plain file"}, {"owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "edited": false, "score": 0, "creation_date": 1535593419, "post_id": 52054523, "comment_id": 91126517, "body": "and that&#39;s what I want: <code>-f</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535600575, "post_id": 52054523, "comment_id": 91127956, "body": "That&#39;s not what you&#39;re question says. It says you&#39;re checking if the file exists. I&#39;ll fix the answer if you fix the question, but the answer covers both anyway"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1535523159, "last_edit_date": 1535523159, "creation_date": 1535448558, "answer_id": 52054523, "question_id": 52054175, "link": "https://stackoverflow.com/questions/52054175/if-f-file-path1-is-always-true-regardless-whether-or-not-a-file-exists/52054523#52054523", "title": "&quot;if (-f $file_path1) {&quot; is always true regardless whether or not a file exists", "body": "<p>First of all, to check if a file exists, you want <code>-e</code> or <code>stat</code> (not <code>-f</code>).</p>\n\n<p>Secondly, you treat \"exists but isn't a plain file\" results, \"file not found\" errors and other errors as \"file not found\" errors. If things aren't working as you expect, you should check more closely what is error is actually being returned!</p>\n\n<pre><code>if (-e $file_path1) {\n   app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" already exists.\\n\");\n}\nelsif ($!{ENOENT}) {\n   app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" doesn't exist. Creating...\\n\");\n}\nelse {\n   app-&gt;log-&gt;debug(\"Error stating \\\"$file_path1\\\": $!\\n\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (stat($file_path1)) {\n   app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" already exists.\\n\");\n}\nelsif ($!{ENOENT}) {\n   app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" doesn't exist. Creating...\\n\");\n}\nelse {\n   app-&gt;log-&gt;debug(\"Error stating \\\"$file_path1\\\": $!\\n\");\n}\n</code></pre>\n\n<p>If you were using <code>-f</code> because you also wanted to check if it's a plain file, you can use the following:</p>\n\n<pre><code>my $rv = -f $file_path1;\nif (defined($rv)) {\n   if ($rv) {\n      app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" already exists.\\n\");\n   } else {\n      app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" already exists, but isn't a plain file.\\n\");\n   }\n} else {\n   if ($!{ENOENT}) {\n      app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" doesn't exist. Creating...\\n\");\n   } else {\n      app-&gt;log-&gt;debug(\"Error stating \\\"$file_path1\\\": $!\\n\");\n   }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>if (stat($file_path1)) {\n   if (-f _) {\n      app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" already exists.\\n\");\n   } else {\n      app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" already exists, but isn't a plain file.\\n\");\n   }\n} else {\n   if ($!{ENOENT}) {\n      app-&gt;log-&gt;debug(\"\\\"$file_path1\\\" doesn't exist. Creating...\\n\");\n   } else {\n      app-&gt;log-&gt;debug(\"Error stating \\\"$file_path1\\\": $!\\n\");\n   }\n}\n</code></pre>\n\n<p>Assuming you're right and the problem isn't really that the file doesn't exist, any of these snippets will get the reason the file can't be <code>stat</code>ed. A permission problem, perhaps?</p>\n\n<p>If my snippets tell you that the file doesn't exist, then it really doesn't. Make sure the value you are passing to <code>stat</code>/<code>-e</code>/<code>-f</code> contains what you think it does (e.g.  no trailing spaces, CR or LF). If the path is a relative path, it could also be that you are making incorrect assumptions about the current work directory.</p>\n"}], "owner": {"reputation": 167, "user_id": 10034680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fac2f173884d186d88e7f7c8b951f5e?s=128&d=identicon&r=PG&f=1", "display_name": "Rattiku", "link": "https://stackoverflow.com/users/10034680/rattiku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 52054523, "answer_count": 1, "score": -1, "last_activity_date": 1535523159, "creation_date": 1535447549, "question_id": 52054175, "link": "https://stackoverflow.com/questions/52054175/if-f-file-path1-is-always-true-regardless-whether-or-not-a-file-exists", "title": "&quot;if (-f $file_path1) {&quot; is always true regardless whether or not a file exists", "body": "<p>In my Mojolicious app I have this:</p>\n\n<pre><code>if (-f $file_path1) {\n    app-&gt;log-&gt;debug(\"file1 exists: $file_path1\");\n    # ...........\n\n} else {\n    app-&gt;log-&gt;debug(\"file1 doesn't exist: $file_path1; creating....\\r\\n\");\n</code></pre>\n\n<p>Regardless of its presence, it never prints \"file1 doesn't exist\"</p>\n\n<p>When I remove it, it still doesn't print that it doesn't exist.</p>\n\n<p>How can this be?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535440282, "post_id": 52051504, "comment_id": 91054231, "body": "Re &quot;<i>The group captured is the number, it shouldn&#39;t replace the parenthesis.</i>&quot;, The <i>match</i> includes the parens, so the parens get replaced."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 768, "user_id": 5543739, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be7e742aa8ac8a25356e2af2bd276474?s=128&d=identicon&r=PG", "display_name": "susdu", "link": "https://stackoverflow.com/users/5543739/susdu"}, "edited": false, "score": 0, "creation_date": 1535438711, "post_id": 52051543, "comment_id": 91053447, "body": "@susdu Welcome and no rush :).  To add, a distinct way to have patterns which are not replaced is to use &quot;lookarounds&quot;.  For instance, <code>s&#47;(?&lt;=&#47;() ([0-9]+) (?=\\))&#47;$1+1&#47;xe</code>. Here <code>(?&lt;=...)</code> &quot;looks back&quot; to see whether there is the (fixed string) pattern in parens (here a parenthesis itself, so escaped), while <code>(?=...)</code> looks ahead for the closing parens.  They aren&#39;t &quot;consumed&quot; so need not be replaced."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1535486603, "last_edit_date": 1535486603, "creation_date": 1535438254, "answer_id": 52051543, "question_id": 52051504, "link": "https://stackoverflow.com/questions/52051504/perl-increment-number-in-string-with-evaluation-modifier/52051543#52051543", "title": "perl increment number in string with evaluation modifier", "body": "<p>It replaces the whole pattern that it matched, not only what is also captured. So you do need to put back the parens</p>\n\n<pre><code>$name =~ s/\\(([0-9]+)\\)/'('.($1 + 1).')'/e;\n</code></pre>\n\n<p>Since the replacement part is evaluated as <em>code</em> it need be normal Perl code, thus the quotes and concatenation, and parenthesis for precedence.</p>\n\n<hr>\n\n<p>To add, there are patterns that need not be put back in the replacement part: <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">lookahead and lookbehind</a> assertions. Like common anchors, these are <em>zero width assertions</em>, so they do not <em>consume</em> what they match -- you only \"look\"</p>\n\n<pre><code>$name =~ s/(?&lt;=\\() ([0-9]+) (?=\\))/$1 + 1/xe;\n</code></pre>\n\n<p>The lookbehind can't be of variable length (like <code>\\w+</code>); it takes only a fixed string pattern.</p>\n\n<p>The <code>(?&lt;=...)</code> asserts that the (fixed length) pattern in parenthesis (which do not capture!) must precede the number while <code>(?=...)</code> asserts that the pattern in its parens must follow, for the whole pattern to match.</p>\n\n<p>Often very useful is the lookbehind-type construct <a href=\"http://perldoc.perl.org/perlre.html#Lookaround-Assertions\" rel=\"nofollow noreferrer\"><code>\\K</code></a>, which makes the engine keep in the string what it had matched up to that point (instead of \"consuming\" it); so it \"drops\" previous matches, much like the <code>(?&lt;=...)</code> form</p>\n\n<pre><code>$name =~ s/\\(\\K ([0-9]+) (?=\\))/$1 + 1/xe;\n</code></pre>\n\n<p>This is also more efficient. While it is also termed a \"lookbehind\" in documentation, there are in fact distinct differences in behavior. See <a href=\"https://stackoverflow.com/a/51867836/4653379\">this post</a> and comments.  Thanks to <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> for a comment.</p>\n\n<p>All these are <em>positive</em> lookarounds; there are also <em>negative</em> ones, asserting that given patterns <em>must not</em> be there for the whole thing to match. </p>\n\n<p>A bit of an overkill in this case but a true gift in some other cases.</p>\n"}], "owner": {"reputation": 768, "user_id": 5543739, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/be7e742aa8ac8a25356e2af2bd276474?s=128&d=identicon&r=PG", "display_name": "susdu", "link": "https://stackoverflow.com/users/5543739/susdu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 52051543, "answer_count": 1, "score": 1, "last_activity_date": 1535486603, "creation_date": 1535438042, "question_id": 52051504, "link": "https://stackoverflow.com/questions/52051504/perl-increment-number-in-string-with-evaluation-modifier", "title": "perl increment number in string with evaluation modifier", "body": "<p>I'm trying to increment:</p>\n\n<pre><code>Text_1_string(0)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Text_1_string(1)\n</code></pre>\n\n<p>and so on.\nNote that I only want to increment the number in the parenthesis.\nI've used:</p>\n\n<pre><code>name =~ s/\\(([0-9]+)\\)/$1 + 1/e;\n</code></pre>\n\n<p>but it turns out as:</p>\n\n<pre><code>Text_1_string1\n</code></pre>\n\n<p>and I don't understand why. The group captured is the number, it shouldn't replace the parenthesis. </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1535462783, "post_id": 52050786, "comment_id": 91068368, "body": "We could use some sample data here, and an example of what you&#39;re exactly trying to filter."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535602816, "post_id": 52073241, "comment_id": 91128430, "body": "Thank you! using perl is easier than C programming."}], "tags": [], "owner": {"reputation": 23, "user_id": 2305265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/868cec043735c7607d3a6e901897819b?s=128&d=identicon&r=PG", "display_name": "anielsen", "link": "https://stackoverflow.com/users/2305265/anielsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1535532446, "creation_date": 1535532446, "answer_id": 52073241, "question_id": 52050786, "link": "https://stackoverflow.com/questions/52050786/matching-certain-line-of-words-between-hashes/52073241#52073241", "title": "Matching certain line of words between hashes", "body": "<p>If you want to filter the number out of a string like alias/a/b/c/0123456789 you could just use a pattern like /(\\d+)/ if you are sure where are no numbers in the \"path\".</p>\n\n<p>If you know the number is at the end of the path you can use /(\\d+)$/</p>\n"}, {"tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": true, "score": 0, "last_activity_date": 1539241743, "last_edit_date": 1539241743, "creation_date": 1535575887, "answer_id": 52085900, "question_id": 52050786, "link": "https://stackoverflow.com/questions/52050786/matching-certain-line-of-words-between-hashes/52085900#52085900", "title": "Matching certain line of words between hashes", "body": "<p>If the prefix it is always the same in the content of the \"second file\"</p>\n\n<pre><code>alias/a/b/c/${phone_number_1}\nalias/a/b/c/${phone_number_2}\nalias/a/b/c/${phone_number_3}\n</code></pre>\n\n<p>Then the prefix can be removed by doing <code>substr</code>:</p>\n\n<pre><code>my $offset = length(\"alias/a/b/c/\");\nwhile(my $line = &lt;$fh_file&gt;) { \n    chomp($line);\n    $line = substr($line, $offset);\n}\n</code></pre>\n\n<p>If it is not the same prefix, since you mention that they looks like \"path\", I'm going to assume the last part of that path is the actual phone number. So the solution is simply: take the last part of the path. Which is also \"the longest substring without any <code>/</code> in it anchored at the end of $line\" (assuming the same while loop structure as above):</p>\n\n<pre><code>my ($phone) = $line =~ m{([^/]+)\\z};\n</code></pre>\n\n<p>Or, from a different perspective: \"Remove the longest prefix with a <code>/</code> at the end of it from $line, than take the rest of $line\":</p>\n\n<pre><code>my $phone = $line =~ s{\\A.+/}{}r;\n</code></pre>\n\n<p>And of course, if the phone number themselves can be enumerated with a easy pattern, e.g., <code>[0-9]{8}</code> (8 characters from the set of <code>[0123456789]</code>), perhaps it is more straightforward to just \"take the part anchored at the end of $line matching the phone number pattern\":</p>\n\n<pre><code>my ($phone) = $line =~ m{([0-9]{8})\\z};\n</code></pre>\n\n<p>If none of the above covers your scenario, well... I'm just bad at guessing :)</p>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52085900, "answer_count": 2, "score": -2, "last_activity_date": 1539241743, "creation_date": 1535434564, "question_id": 52050786, "link": "https://stackoverflow.com/questions/52050786/matching-certain-line-of-words-between-hashes", "title": "Matching certain line of words between hashes", "body": "<p>i am trying to match this phone number between two files, and I found this code in the stackflow; <a href=\"https://stackoverflow.com/questions/16742013/compare-file-lines-for-match-anywhere-in-second-file\">Compare file lines for match anywhere in second file</a></p>\n\n<pre><code>    use strict;   #ALWAYS ALWAYS ALWAYS\n    use warnings; #ALWAYS ALWAYS ALWAYS\n\n    use autodie;  #Will end the program if files you try to open don't exist\n\n    # Constants are a great way of storing data that is ...uh... constant\n    use constant {\n        FILE_1    =&gt;  \"a1.txt\",\n        FILE_2    =&gt;  \"a2.txt\",\n    };\n\nmy %phone_hash1;\nmy %phone_hash2;\n\nopen my $phone_num1_fh, \"&lt;\", FILE_1;\n\nwhile ( my $phone_num = &lt;$phone_num1_fh&gt; ) {\n    chomp $phone_num;\n    $phone_hash1{ $phone_num } = 1;\n}\nclose $phone_num1_fh;\n\nopen my $phone_num2_fh, \"&lt;\", FILE_2;\n\nwhile ( my $phone_num = &lt;$phone_num2_fh&gt; ) {\n    chomp $phone_num;\n    $phone_hash2{ $phone_num } = 1;\n}\nclose $phone_num2_fh;\n\nmy %in_common;\n\nfor my $phone ( keys %phone_hash1 ) {\n    if ( $phone_hash2{$phone} ) { \n       $in_common{$phone} = 1;    #Phone numbers in common between the two lists\n    }\n}\nfor my $phone ( sort keys %phone_hash1 ) {\n    if ( not $in_common{$phone} ) {\n         print \"Phone number $phone is only in the first file\\n\";\n    }\n}\n\nfor my $phone ( sort keys %phone_hash2 ) {\n    if ( not $in_common{$phone} ) {\n        print \"Phone number $phone is only in \" . FILE_2 . \"\\n\";\n    }\n}\n\nfor my $phone ( sort keys %in_common ) {\n    print \"Phone number $phone is in both files\\n\";\n}\n</code></pre>\n\n<p>The problem is; \nin my first file i need to filter out the phone number,\nso, i try to make this;</p>\n\n<pre><code> if ($s1 =~ m/(.*)\\s+(.*)\\s+(.*)\\s+/) \n        {\n        my $phone_num=($1.\"/\".$2);\n        chomp $phone_num;\n        $phone_hash1{ $phone_num } = 1;\n        }\n</code></pre>\n\n<p>my second file there is a path in front of the phone number\nlike alias/a/b/c/<strong>0123456789</strong></p>\n\n<p>and i don't know how to filter this one out into the hash, or filter out the things i dont want in the hash, so that i can compare this two numbers between two files.</p>\n\n<pre><code>($phone_hash2{ $phone_num }  =~ /.*$str/)\n</code></pre>\n"}, {"tags": ["linux", "perl", "unix"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1535436639, "post_id": 52050329, "comment_id": 91052465, "body": "<code>perl -i -pe &#39;s|^(\\$ENV{MY_LIBS} = &quot;[^&quot;]+)|$1:\\$MY_PATH&#47;lib|&#39; *.pl</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "edited": false, "score": 0, "creation_date": 1536034549, "post_id": 52052682, "comment_id": 91267389, "body": "Thanks your answer and explanation was helpful ."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1536043822, "last_edit_date": 1536043822, "creation_date": 1535442554, "answer_id": 52052682, "question_id": 52050329, "link": "https://stackoverflow.com/questions/52050329/append-new-path-in-variable-assignment-in-multiple-scripts/52052682#52052682", "title": "append new path in variable assignment in multiple scripts", "body": "<p>You can use a <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">Perl \"one-liner\"</a> in lieu of a \"<em>simple command in Linux</em>\"</p>\n\n<pre><code>perl -i.bak -pe's/\\$ENV{MY_LIBS}.*\\K\"\\s*;/:$MY_PATH\\/lib\";/' file1 file2 ...\n</code></pre>\n\n<p>I assume that <code>$MY_PATH</code> stands for a literal string, otherwise I don't know where it'd come from.</p>\n\n<p>The switches mean: </p>\n\n<ul>\n<li><p><code>-e</code> signifies that what follows inside <code>''</code> is evaluated as Perl code, so the program follows</p></li>\n<li><p><code>-p</code> opens given files and loops over lines so that the code in <code>''</code> is applied successively to each line; the processed line is printed at the end</p></li>\n<li><p><code>-i</code> makes it edit input files \"in-place\" (they're changed) and with <code>.bak</code> backup is kept</p></li>\n</ul>\n\n<p>Code comments:</p>\n\n<p>The <a href=\"https://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">lookbehind</a>-type construct <a href=\"http://perldoc.perl.org/perlre.html#Lookaround-Assertions\" rel=\"nofollow noreferrer\">\\K</a> drops all previous matches, so nothing is \"consumed\" out of the string before it; thus the replacement part tacks on the desired string. We do need to put back <code>\";</code> since that was matched after <code>\\K</code> and was thus removed from the string (when matched).</p>\n"}], "owner": {"reputation": 3034, "user_id": 1103956, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ffc86d67cb7545ecc15b598701b76871?s=128&d=identicon&r=PG", "display_name": "Invictus", "link": "https://stackoverflow.com/users/1103956/invictus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 52052682, "answer_count": 1, "score": 0, "last_activity_date": 1536150170, "creation_date": 1535431994, "last_edit_date": 1536150170, "question_id": 52050329, "link": "https://stackoverflow.com/questions/52050329/append-new-path-in-variable-assignment-in-multiple-scripts", "title": "append new path in variable assignment in multiple scripts", "body": "<p>I have an environment variable declared in my perl scripts which are like below. This variable can be slightly different in different perl files.\nIn first file:</p>\n\n<pre><code>$ENV{MY_LIBS} = \"$MY_PATH/bin:$HOME/PACKAGE1:$HOME/PACKAGE2\";\n</code></pre>\n\n<p>In Second file:</p>\n\n<pre><code>$ENV{MY_LIBS} = \"$MY_PATH/bin:$HOME/MYLIBS1:$HOME/PACKAGE2\";\n</code></pre>\n\n<p>Now say I want to append <code>$MY_PATH/lib</code> to all such files so that they would be like:</p>\n\n<p>In first file:</p>\n\n<pre><code>$ENV{MY_LIBS} = \"$MY_PATH/bin:$HOME/PACKAGE1:$HOME/PACKAGE2:$MY_PATH/lib\";\n</code></pre>\n\n<p>In Second file:</p>\n\n<pre><code>$ENV{MY_LIBS} = \"$MY_PATH/bin:$HOME/MYLIBS1:$HOME/PACKAGE2:$MY_PATH/lib\";\n</code></pre>\n\n<p>How can I do this with some simple command in Linux ?</p>\n"}, {"tags": ["perl", "failed-installation", "qwizard"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535429835, "post_id": 52049361, "comment_id": 91050393, "body": "That error indicates a bug in XS code (or, less likely, in Perl itself)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535433954, "post_id": 52049361, "comment_id": 91051493, "body": "@ikegami There&#39;s not much XS in <a href=\"https://metacpan.org/source/HARDAKER/QWizard-3.15/Generator_base/Makefile.PL\" rel=\"nofollow noreferrer\">metacpan.org/source/HARDAKER/QWizard-3.15/Generator_base/&hellip;</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535434070, "post_id": 52049361, "comment_id": 91051539, "body": "@melpomene, Then the problem should be relatively easy to find."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535434391, "post_id": 52049361, "comment_id": 91051648, "body": "Line 229 of Carp.pm is <code>@args = @DB::args;</code>. This looks like another instance of the &quot;stack is not refcounted&quot; bug."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1535435121, "post_id": 52049361, "comment_id": 91051916, "body": "If you run <code>cpan</code>, then <code>look QWizard</code>, then <code>perl -e &#39;use Carp (); *Carp::confess = *Carp::croak = sub { die @_ }; *Carp::cluck = *Carp::carp = sub { warn @_ }; do &quot;.&#47;Makefile.PL&quot;&#39;</code>, what happens?"}, {"owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "edited": false, "score": 0, "creation_date": 1535438487, "post_id": 52049361, "comment_id": 91053338, "body": "Exits without error. I then continued with make, make test, make install,...all successfully. Thanks!"}], "owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1535433202, "creation_date": 1535424277, "last_edit_date": 1535433202, "question_id": 52049361, "link": "https://stackoverflow.com/questions/52049361/qwizard-installation-fails-with-attempt-to-copy-freed-scalar", "title": "Qwizard installation fails with `attempt to copy freed scalar`", "body": "<p>While attempting to install Qwizard via cpan I get errors resembling <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=121401\" rel=\"nofollow noreferrer\">https://rt.cpan.org/Public/Bug/Display.html?id=121401</a> </p>\n\n<pre><code>cpan[1]&gt; install QWizard\nReading '/Users/haroldbennett/.cpan/Metadata'\nDatabase was generated on Mon, 27 Aug 2018 02:17:02 GMT\nRunning install for module 'QWizard'\nChecksum for \n    /Users/&lt;username&gt;/.cpan/sources/authors/id/H/HA/HARDAKER/QWizard-3.15.tar.gz ok\nScanning cache /Users/&lt;username&gt;/.cpan/build for sizes ....... DONE\nConfiguring H/HA/HARDAKER/QWizard-3.15.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nWriting MYMETA.yml and MYMETA.json\nWriting MYMETA.yml and MYMETA.json\nWriting MYMETA.yml and MYMETA.json\nERROR from evaluation of \n    /Users/&lt;username&gt;/.cpan/build/QWizard-3.15-1/Generator_base/Makefile.PL: \n        panic: attempt to copy freed scalar 7fabf00040b0 to 7fabf02a7e58 at\n           /opt/local/lib/perl5/5.26/Carp.pm line 229.\nWarning: No success on command[/opt/local/bin/perl5.26 Makefile.PL]\n    HARDAKER/QWizard-3.15.tar.gz\n    /opt/local/bin/perl5.26 Makefile.PL -- NOT OK\nFailed during this command:\n    HARDAKER/QWizard-3.15.tar.gz : writemakefile NO \n    '/opt/local/bin/perl5.26 Makefile.PL' returned status 512\n</code></pre>\n\n<p>I have attempted to use the force option (something I am not a fan of), however the module casts the appearance of still not being installed when I attempt to use it in code. 'Can't locate QWizard.pm in @INC', leading me to believe that the force option was a wasted effort.</p>\n\n<p>My question is, in short, how can I get this module to install?</p>\n\n<pre><code>Mac OS X version 10.13.6 (17G65)\nPerl version 5.26.2 built for darwin-thread-multi-2level\nQWizard-3.15\n</code></pre>\n"}, {"tags": ["perl", "directory"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535436657, "post_id": 52049332, "comment_id": 91052474, "body": "Welcome to Stackoverflow. I suggest that you see the <a href=\"https://stackoverflow.com/tour\">Tour</a> page and then look around the <a href=\"https://stackoverflow.com/help\">Help Center</a>, in particular <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>.  While people are willing to help out with all kinds of inquiries, the questions are generally expected to be specific and about your code. In particular, requests for code or tutorials on basics are considered off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535430329, "post_id": 52049565, "comment_id": 91050492, "body": "I am sorry, my 2nd question is not fully explained. How can I automatically search the directory which the user want, not hard-coded into the script perl.pl for example, the user want all the sameName.txt files which had in the directory /1/sameName.txt, but with different parent, which is a b and c folder. I want to make it automatically read those files sameName.txt which is located in different folder, so that the user can&#39;t adjust the script every time there is a new path like d/1/sameName.txt created."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "edited": false, "score": 0, "creation_date": 1535436555, "post_id": 52049565, "comment_id": 91052427, "body": "@DanialHaris You got answers here, and far more than you normally would on such a broad question.  (This site is not a good fit for introductory explanations, but is rather for specific problems with your code.)  I encourage you to work with what you got and try to do yourself what is not &quot;<i>fully explained</i>,&quot; and to see the materials linked in the answer."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1535457849, "post_id": 52049565, "comment_id": 91064996, "body": "Update your question instead of putting clarifications in comments."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1535457854, "last_edit_date": 1535457854, "creation_date": 1535426100, "answer_id": 52049565, "question_id": 52049332, "link": "https://stackoverflow.com/questions/52049332/how-to-open-a-file-from-different-directory-in-perl/52049565#52049565", "title": "How to open a file from different directory in perl?", "body": "<ol>\n<li>You can <a href=\"https://perldoc.perl.org/function/open.html\" rel=\"nofollow noreferrer\">open</a> a file from anywhere that you like. </li>\n</ol>\n\n<p>The filename argument is a path and you associate that with a filehandle to access its data:</p>\n\n<pre><code>  my $path = '/alias/a/1/sameName.txt';\n  open my $fh, '&lt;', $path or die \"Could not open $path: $!\";\n</code></pre>\n\n<ol start=\"2\">\n<li>Perl doesn't care if another file in a different directory has the same name. </li>\n</ol>\n\n<p>You distinguish them with a different file handle:</p>\n\n<pre><code>  my $path2 = '/alias/a/2/sameName.txt';\n  open my $fh2, '&lt;', $path or die \"Could not open $path: $!\";\n</code></pre>\n\n<p>You can construct that second path by grabbing the filename portion of the first path and putting it together with the other directory. These are core Perl modules that should already be there:</p>\n\n<pre><code>  use File::Basename;\n  use File::Spec::Functions;\n\n  my $other_dir = '/alias/a/2';\n  my $basename = basename( $path );   # sameName.txt\n  my $path2 = catfile( $other_dir, $basename );\n</code></pre>\n\n<ol start=\"3\">\n<li>Not quite sure what you are trying to do.</li>\n</ol>\n\n<p>You might be interested in <a href=\"https://www.learning-perl.com\" rel=\"nofollow noreferrer\">Learning Perl</a> or the other resources at <a href=\"https://learn.perl.org\" rel=\"nofollow noreferrer\">learn.perl.org</a>.</p>\n"}], "owner": {"reputation": 69, "user_id": 10253542, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kyU6n.jpg?s=128&g=1", "display_name": "Danial Haris", "link": "https://stackoverflow.com/users/10253542/danial-haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2465, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1535458276, "creation_date": 1535424058, "last_edit_date": 1535458276, "question_id": 52049332, "link": "https://stackoverflow.com/questions/52049332/how-to-open-a-file-from-different-directory-in-perl", "title": "How to open a file from different directory in perl?", "body": "<p>i am very new to perl, so I would like to know if there is a way to</p>\n\n<ol>\n<li><p>Open a file from a different directory (not the same directory as the perl script.pl for example)</p></li>\n<li><p>open multiple files that have the same name, e.g sameName.txt, under the same parent directory but have different sub directory, e.g</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>directory:\n- /alias/a/1/sameName.txt\n- /alias/b/1/sameName.txt\n- /alias/c/1/sameName.txt\n</code></pre>\n\n<p>for example as above, but at the same time, there is also the same file, sameName.txt in other directory which I don't want, e.g</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>directory:\n- /alias/a/2/sameName.txt\n- /alias/b/2/sameName.txt\n- /alias/c/2/sameName.txt\n</code></pre>\n\n<p>How can I automatically search the directory which the user want, using user input <code>&lt;STDIN&gt;</code>, not hard-coded into the script perl.pl for example, the user want all the sameName.txt files which had in the directory /1/sameName.txt, but with different parent, which is a b and c folder. I want to make it automatically read those files sameName.txt which is located in different folder, so that the user doesn't need to adjust the script every time there is a new path like d/1/sameName.txt created.</p></li>\n<li><p>if I want the data in these files with the same name with different directories, should I loop it, save into arrays for example, or should i copy all the contents and append it to a single file? because i need to match the data between the files which i have done the script.</p></li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535378318, "post_id": 52040100, "comment_id": 91032552, "body": "How often do you have to look things up by <code>statid</code> in the same structure? If it&#39;s just once, a linear scan is pretty much optimal. If it&#39;s more than once, it can be more efficient to convert the whole thing to a hash (keyed by <code>statid</code>) instead."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3466839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf7d6193b18046c25df06e5a5861f74?s=128&d=identicon&r=PG&f=1", "display_name": "christianTF", "link": "https://stackoverflow.com/users/3466839/christiantf"}, "edited": false, "score": 0, "creation_date": 1535376862, "post_id": 52040211, "comment_id": 91031649, "body": "The hash includes more data than shown. I extend the example."}, {"owner": {"reputation": 29, "user_id": 3466839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf7d6193b18046c25df06e5a5861f74?s=128&d=identicon&r=PG&f=1", "display_name": "christianTF", "link": "https://stackoverflow.com/users/3466839/christiantf"}, "edited": false, "score": 0, "creation_date": 1535394888, "post_id": 52040211, "comment_id": 91041149, "body": "I will update my data structure to have a hash instead on an array. Thank you for your answer."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535388987, "last_edit_date": 1535388987, "creation_date": 1535375545, "answer_id": 52040211, "question_id": 52040100, "link": "https://stackoverflow.com/questions/52040100/perl-array-of-hashes-get-the-element-with-id-in-hash/52040211#52040211", "title": "Perl: Array of hashes - Get the element with id in hash", "body": "<p>If the <code>statid</code> field is unique then I suggest you use something more like this</p>\n\n<pre><code>{\n    1 =&gt; 'statcfg_0001.json',\n    2 =&gt; 'statcfg_0002.json',\n}\n</code></pre>\n\n<blockquote>\n  <p>The hash includes more data than shown. I extend the example</p>\n</blockquote>\n\n<p>Then you need a hash instead of just a string value for each <code>statid</code></p>\n\n<pre><code>{\n    1 =&gt; {\n        statCfgFile =&gt; 'statcfg_0001.json',\n        statid      =&gt; 1,\n        status      =&gt; 'running',\n        something   =&gt; 'other',\n    },\n    2 =&gt; {\n        statCfgFile =&gt; 'statcfg_0002.json',\n        statid      =&gt; 2,\n        status      =&gt; 'running',\n        something   =&gt; 'other',\n    },\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "is_accepted": true, "score": 0, "last_activity_date": 1535404057, "last_edit_date": 1535404057, "creation_date": 1535403721, "answer_id": 52046921, "question_id": 52040100, "link": "https://stackoverflow.com/questions/52040100/perl-array-of-hashes-get-the-element-with-id-in-hash/52046921#52046921", "title": "Perl: Array of hashes - Get the element with id in hash", "body": "<p>The short answer is no, you can't pull a value out of an array based on a criteria without iterating over the array. But there are ways to write it without using a loop.</p>\n\n<p>Say the data structure is <code>$data</code> and you want to pull hashes where <code>statid</code> equals <code>$id_to_find</code>. </p>\n\n<pre><code>my @matching_hashes = grep {$_-&gt;{statid} = $id_to_find}} @{$data-&gt;{Stat}};\n</code></pre>\n\n<p>If only the first hash matching the ID is relevant, you could use the core module <code>List::Util</code> function <code>first</code>, which does the same thing as <code>grep</code> but only returns the first match instead of a list. It would be faster than <code>grep</code> because it stops iterating over the array as soon as it finds one match. </p>\n\n<pre><code>use List::Util 'first';\nmy $matching hash = first {$_-&gt;{statid} = $id_to_find}} @{$data-&gt;{Stat}};\n</code></pre>\n\n<p>As you indicated, using hash lookups is much faster than list operations. You could create a hash index of array adresses. Note this still requires you iterate over the array once. </p>\n\n<pre><code># create the index;\nmy %index;\nmy @array = @{$data-&gt;{Stat}};\nfor my $address (0..$#array) {     # \"$#array\" is the last element of @array\n    my $hash = $array[$address];\n    my $id = $hash-&gt;{statid};\n    $index{$id} = $address;        # now you can use an ID to get the array address\n}\n\n# use the index\nmy $id_to_find = 42;\nmy $wanted_array_address = $index{$id_to_find};\nmy $matching_hash = $data-&gt;{Stat}-&gt;[$wanted_array_address]; \n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 3466839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf7d6193b18046c25df06e5a5861f74?s=128&d=identicon&r=PG&f=1", "display_name": "christianTF", "link": "https://stackoverflow.com/users/3466839/christiantf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 52046921, "answer_count": 2, "score": 0, "last_activity_date": 1596452312, "creation_date": 1535375208, "last_edit_date": 1596452312, "question_id": 52040100, "link": "https://stackoverflow.com/questions/52040100/perl-array-of-hashes-get-the-element-with-id-in-hash", "title": "Perl: Array of hashes - Get the element with id in hash", "body": "<p>I have a Perl data structure, loaded from a json, with <code>Data::Dumper</code> looking like this:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>$VAR1 = {\n    'Stat' =&gt; [\n        {\n            'statCfgFile' =&gt; 'statcfg_0001.json',\n            'statid' =&gt; 1,\n            'status' =&gt; 'running',\n            'something' =&gt; 'other'\n        },\n        {\n            'statCfgFile' =&gt; 'statcfg_0002.json',\n            'statid' =&gt; 2,\n            'status' =&gt; 'running'\n            'something' =&gt; 'other'\n        }\n    ]\n}\n</code></pre>\n<p>From another dataset, I get a statid to read the hash, but the given id does not match the array key, therefore I need to go into deep, reading the <code>statid</code> property.</p>\n<p>Of course, I could loop through the array, but with a large array list, that might hit performance.</p>\n<p>Is there a way to directly access the array element by the <code>statid</code> stored in the hash?</p>\n<p>As the data model is in my hands and currently in development:\nWould it be better not to use an array, but also a hash with the <code>statid</code> as the naming element?</p>\n"}, {"tags": ["sql-server", "perl", "dbi"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535371637, "post_id": 52038661, "comment_id": 91028224, "body": "Is this a <i>Microsoft SQL Server</i> database?"}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535371733, "post_id": 52038661, "comment_id": 91028279, "body": "It is Microsoft SQL, but I&#39;m not sure if Server."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1535372309, "post_id": 52038661, "comment_id": 91028659, "body": "Don&#39;t call subroutines with <code>&amp;</code> and don&#39;t declare them with empty prototypes if they actually take arguments (<code>sub dbMasterSub()</code>)."}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1535372435, "post_id": 52038661, "comment_id": 91028770, "body": "So, the correct way to do that will be call the subrutines like dbMasterSub(param) and declare them as sub dbMasterSub {, right?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535372459, "post_id": 52038661, "comment_id": 91028787, "body": "@LuisDiaz Yes, exactly."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535372495, "post_id": 52038661, "comment_id": 91028824, "body": "<a href=\"https://metacpan.org/pod/DBI#fetchrow_array\" rel=\"nofollow noreferrer\">The documentation</a> says not to call <code>fetchrow_array</code> in scalar context. What are you trying to do there?"}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1535372984, "post_id": 52038661, "comment_id": 91029154, "body": "It&#39;s a code that a partner passed me, and it&#39;s like this. I&#39;ve used this a lot of times to fetch rows from others tables and databases and there is no problem at all. Anyway, will modified it according to the documentation"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1535411127, "post_id": 52038661, "comment_id": 91046807, "body": "I would replace this with <code>my @rows = $sth-&gt;fetchrow_array; print $fh join(&quot;,\\n&quot;, @rows);</code> which seems much shorter and easier to understand"}, {"owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "edited": false, "score": 0, "creation_date": 1535437664, "post_id": 52038661, "comment_id": 91052931, "body": "already did that, but that is not the problem hahaha"}], "answers": [{"tags": [], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1536570814, "creation_date": 1536570814, "answer_id": 52254507, "question_id": 52038661, "link": "https://stackoverflow.com/questions/52038661/execute-stored-procedure-dbi-perl/52254507#52254507", "title": "Execute stored procedure DBI Perl", "body": "<p>I managed to be able to iterate and gather all the data returned from the stored procedure using this code:</p>\n\n<pre><code>$sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\nmy $more_results;\nmy $count = 0;\nmy $tinyIndex = 0;\ndo{\n    $count++;\n    print \"\\n\\tdataset $count\\n\";\n\n    my $names = $sth -&gt;{NAME};\n    print join(\";\",@$names),\"\\n\";\n    while (my @row = $sth-&gt;fetchrow_array()){\n        print join(\";\",@row),\"\\n\";\n        $tinyIndex++;\n    }\n    if ($@) {\n        print \"FAILED\\n$@\";\n    }\n    print \"$tinyIndex rows\\n\";\n}while($more_results = $sth-&gt;more_results);\n</code></pre>\n\n<p>being $sql a variable that holds the procedure itself. </p>\n"}], "owner": {"reputation": 276, "user_id": 3948597, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/eb4bcb56f8f65eb11fd4c3cecacca1a9?s=128&d=identicon&r=PG", "display_name": "Luis Diaz", "link": "https://stackoverflow.com/users/3948597/luis-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 0, "accepted_answer_id": 52254507, "answer_count": 1, "score": 0, "last_activity_date": 1536570814, "creation_date": 1535370539, "last_edit_date": 1535451208, "question_id": 52038661, "link": "https://stackoverflow.com/questions/52038661/execute-stored-procedure-dbi-perl", "title": "Execute stored procedure DBI Perl", "body": "<p>I need to use a stored procedure to gather some data from a database and for that, I've been provided with a sql code:</p>\n\n<pre><code>declare @p3 xml\nset @p3=convert(xml,N'&lt;root&gt;&lt;r i=\"XXXXXXXXXXXX\"/&gt;&lt;/root&gt;')\ndeclare @p8 xml\nset @p8=convert(xml,N'&lt;root&gt;&lt;r i=\"274\"/&gt;&lt;r i=\"276\"/&gt;&lt;r i=\"275\"/&gt;&lt;r i=\"155\"/&gt;&lt;r i=\"20\"/&gt;&lt;r i=\"520\"/&gt;&lt;r i=\"758\"/&gt;&lt;r i=\"760\"/&gt;&lt;r i=\"156\"/&gt;&lt;r i=\"172\"/&gt;&lt;/root&gt;')\nexec spu_SearchItems @siteName=N'XXXXXXXXXXXX',@searchString=N'*',@searchLocations=@p3,@includeChildren=0,@includeSearchLocations=0,@includeExtensions=0,@maxResults=501,@classIds=@p8\n</code></pre>\n\n<p>I've replaced sensitive data with XXXXXXXXXXXX. This query works when used in Microsoft SQL Management Studio and it fetches everything that I need to.</p>\n\n<p>My issue is that when I execute this same code on my perl script, it returns a hash reference, what leads me to think that either the I'm not using the sql statement properly or that I'm not being able to \"read\" the info back. </p>\n\n<p>I'm using this for setting up the sql statement:</p>\n\n<pre><code>sub newquery {\n\n    my $sql = q(declare @p3 xml\n        set @p3=convert(xml,N'&lt;root&gt;&lt;r i=\"XXXXXXXXXXXX\"/&gt;&lt;/root&gt;')\n        declare @p8 xml\n        set @p8=convert(xml,N'&lt;root&gt;&lt;r i=\"274\"/&gt;&lt;r i=\"276\"/&gt;&lt;r i=\"275\"/&gt;&lt;r i=\"155\"/&gt;&lt;r i=\"20\"/&gt;&lt;r i=\"520\"/&gt;&lt;r i=\"758\"/&gt;&lt;r i=\"760\"/&gt;&lt;r i=\"156\"/&gt;&lt;r i=\"172\"/&gt;&lt;/root&gt;')\n        exec spu_SearchItems @siteName=N'XXXXXXXXXXXX',@searchString=N'*',@searchLocations=@p3,@includeChildren=0,@includeSearchLocations=0,@includeExtensions=0,@maxResults=501,@classIds=@p8);\n\n    &amp;dbMasterSub($sql);\n}\n</code></pre>\n\n<p>and this for calling to the database.</p>\n\n<pre><code>sub dbMasterSub() {\n\n    my $sql = shift;\n    my @row;\n\n    # print $sql.\"\\n\";\n    my $port = 1443;\n    my $dsn  = \"Provider=sqloledb;Trusted Connection=yes;\";\n\n    $dsn .= \"Server=\" . $myServer . \";Database=$myDB;\";\n\n    eval {\n        my $dbh = DBI-&gt;connect( \"dbi:ADO:$dsn\", $myUser, $myPass, { RaiseError =&gt; 1, AutoCommit =&gt; 1 } );\n        my $sth;\n\n        if ( $sql eq \"ping\" ) {\n            my $ping = $dbh-&gt;ping();\n            return $ping;\n        }\n        else {\n            $sth = $dbh-&gt;prepare( $sql );\n\n            #Execute the statement\n            $sth-&gt;execute();\n\n            print \"sth -&gt; $sth\\n\";\n\n            open( my $fh, '&gt;:encoding(UTF-8)', $tagsPaths );\n            print $fh \"{\\n\";\n            my $index = 0;\n\n            while ( my $row = $sth-&gt;fetchrow_array() ) {\n\n                print \"$row\" . \"\\n\";\n\n                if ( $index == 0 ) {\n                    print $fh $row;\n                    $index = $index + 1;\n                }\n                else {\n                    print $fh \",\\n\" . $row;\n                }\n            }\n\n            print $fh \"\\n}\";\n            close $fh;\n\n            $sth-&gt;finish();\n        }\n\n        $dbh-&gt;disconnect();\n    };\n}\n</code></pre>\n\n<p>Also, I've tried to use fetchrow_hashref() instead of fetchrow_array(), but that makes no difference at all.</p>\n\n<p>Hope you can point me on the right direction. Thanks.</p>\n\n<p><strong>EDIT:</strong> I've runned the query on MS SQL and it returns 3 results set. Result set 1 is what I need, but don't know how to get to it.</p>\n"}, {"tags": ["windows", "perl", "firefox"], "comments": [{"owner": {"reputation": 3, "user_id": 10279081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64a591683c5da644524e4441b830ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen", "link": "https://stackoverflow.com/users/10279081/naveen"}, "edited": false, "score": 0, "creation_date": 1535365120, "post_id": 52036465, "comment_id": 91024397, "body": "chomp didn&#39;t help.. It is not executing the command and reading the outputstream of the command."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535431285, "post_id": 52036465, "comment_id": 91050724, "body": "Are trying to get just the version, or trying to create a filehandle with the version as filename?"}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 0, "last_activity_date": 1535469887, "last_edit_date": 1535469887, "creation_date": 1535427538, "answer_id": 52049740, "question_id": 52036465, "link": "https://stackoverflow.com/questions/52036465/execute-windows-command-with-spaces-in-perl/52049740#52049740", "title": "Execute Windows command with spaces in Perl", "body": "<p>With the backticks you can get the result directly without the <code>open</code>. Quote the command-line things that need to preserve their spaces:</p>\n\n<pre><code>use v5.10;\nmy $version = `\"C:\\\\Program Files\\\\Mozilla Firefox\\\\firefox.exe\" -version`;\nsay \"version is $version\";\n</code></pre>\n\n<p>If that directory is in your path, you don't need to fool around with that:</p>\n\n<pre><code>my $firefox = 'C:\\\\Program Files\\\\Mozilla Firefox';\n$ENV{PATH} .= \";$firefox\";\nmy $version = `firefox -version`;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10279081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64a591683c5da644524e4441b830ce37?s=128&d=identicon&r=PG&f=1", "display_name": "Naveen", "link": "https://stackoverflow.com/users/10279081/naveen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 52049740, "answer_count": 1, "score": 0, "last_activity_date": 1535469887, "creation_date": 1535362630, "last_edit_date": 1535427738, "question_id": 52036465, "link": "https://stackoverflow.com/questions/52036465/execute-windows-command-with-spaces-in-perl", "title": "Execute Windows command with spaces in Perl", "body": "<p>My firefox is installed in <em>C:\\Program Files\\Mozilla Firefox</em>.</p>\n\n<p>I amm trying to read the <em>firefox</em> version like this:</p>\n\n<pre><code>open (IN, \"\\\"C:\\\\Program\\ Files\\\\Mozilla\\ Firefox\\\\firefox.exe\\\" --version|\") or die \"Couldn't fork - $!\\n\";   \nmy $aarray = (IN); \nprint $fh \"=========Array Content========&gt; $aarray &lt;====\\n\";\n\nclose(IN);\n</code></pre>\n\n<p>This is working perfectly. But, when I put path or command in a variable and try to execute, it fails saying \"Couldn't fork\"</p>\n\n<pre><code>my $ffox = 'C:\\Program Files\\Mozilla Firefox\\firefox.exe';\n\n$ffox =~ s/\\\\/\\\\\\\\/g;  #Replacing single \\ with double \\\\\n\n$ffox =~ s/\\ /\\\\ /g;   # Adding escape character before space \nchop($firefoxVer);  # remove last \\n chr.\n\n$ffox =~ s/$/\\\\\\\"/g; # With the below two commands, massaging the command to become\n\n$ffox =~ s/^/\\\\\\\"/g; # \"C:\\\\Program\\ Files\\\\Mozilla\\Firefox\\\\firefox.exe\\\"\n\n$firefoxVer = $ffox.' --version|';  # Adding \"version|\" to the above command  \n$firefoxVer =~ s/$/\\\"/g;     # and make it look like:\n\n$firefoxVer =~ s/^/\\\"/g;   # \"\\\"C:\\\\Program\\ Files\\\\Mozilla\\\\Firefox\\\\firefox.exe\\\" --version|\"\n\nopen (IN, $firefoxVer) or die \"Couldn't fork - $!\\n\"; ==&gt; Fails\n</code></pre>\n"}, {"tags": ["mysql", "perl", "mks-integrity"], "comments": [{"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 0, "creation_date": 1535374412, "post_id": 52036180, "comment_id": 91030013, "body": "Are the member numbers only in the Excel file, or can you fetch these with some MKS command-line utility?   Also, what did you try writing in Perl?  (Do you have to use Perl?)"}, {"owner": {"reputation": 17, "user_id": 10091881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d53246bf36b42e62c04e3aa901a1a6e?s=128&d=identicon&r=PG&f=1", "display_name": "Bodaggnmo", "link": "https://stackoverflow.com/users/10091881/bodaggnmo"}, "reply_to_user": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 0, "creation_date": 1535378634, "post_id": 52036180, "comment_id": 91032750, "body": "Thanks for you answer, i solved my Problem:"}, {"owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 0, "creation_date": 1535378809, "post_id": 52036180, "comment_id": 91032883, "body": "Can you post the answer?  Thanks!"}, {"owner": {"reputation": 17, "user_id": 10091881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d53246bf36b42e62c04e3aa901a1a6e?s=128&d=identicon&r=PG&f=1", "display_name": "Bodaggnmo", "link": "https://stackoverflow.com/users/10091881/bodaggnmo"}, "reply_to_user": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "edited": false, "score": 0, "creation_date": 1535379301, "post_id": 52036180, "comment_id": 91033212, "body": "I wrote it right in the question"}], "answers": [{"tags": [], "owner": {"reputation": 4629, "user_id": 3474146, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rb7ih.jpg?s=128&g=1", "display_name": "alex", "link": "https://stackoverflow.com/users/3474146/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1535381860, "creation_date": 1535381860, "answer_id": 52042021, "question_id": 52036180, "link": "https://stackoverflow.com/questions/52036180/read-variable-from-integrity-and-get-it-with-perl-to-sql/52042021#52042021", "title": "Read Variable from Integrity, and get it with perl to sql", "body": "<p>Bodaggnmo solved his problem with the following Perl code:</p>\n\n<pre><code>my @result = `si revisioninfo --project=/Database/project.pj \u00b4Database.xlsm`; \nmy $integrity_version = @result[2];\nchomp $integrity_version;\nmy @fields = split(/: /,$integrity_version);\n$integrity_version = @fields[1];\nchomp $integrity_version;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10091881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d53246bf36b42e62c04e3aa901a1a6e?s=128&d=identicon&r=PG&f=1", "display_name": "Bodaggnmo", "link": "https://stackoverflow.com/users/10091881/bodaggnmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 52042021, "answer_count": 1, "score": -2, "last_activity_date": 1535381860, "creation_date": 1535361704, "last_edit_date": 1535378783, "question_id": 52036180, "link": "https://stackoverflow.com/questions/52036180/read-variable-from-integrity-and-get-it-with-perl-to-sql", "title": "Read Variable from Integrity, and get it with perl to sql", "body": "<p>I'm using PTC Integrity at my firm. Here we have an Excel file which I need to transfer to our SQL Database with a Perl script.</p>\n\n<p>In Integrity itself, there is a number for a Member Revision. I can see this Revision Number when I type:</p>\n\n<pre><code>echo %MKSSI_REVISION1%\n</code></pre>\n\n<p>in the command line. I tried to write this in Perl, but it's really hard for me. The Perl script should look for the Excel file Database.xlsx in the path <code>C:\\Integrity_Sandbox\\Database\\Database.xlsx</code>, then read the Member Revision number, and write this number to my SQL Database. </p>\n\n<p>Does anyone have any ideas on how I can manage to do this?</p>\n\n<p>Edit Solution:</p>\n\n<pre><code>my @result = `si revisioninfo --project=/Database/project.pj \u00b4Database.xlsm`; \nmy $integrity_version = @result[2];\nchomp $integrity_version;\nmy @fields = split(/: /,$integrity_version);\n$integrity_version = @fields[1];\n chomp $integrity_version;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1535360271, "post_id": 52035760, "comment_id": 91021537, "body": "To solve an internal Server error, it helps to take a look into Server logfiles"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1535360407, "post_id": 52035760, "comment_id": 91021617, "body": "Please click <code>edit</code> under your question and add the script. Then select the script with the mouse and click <code>{}</code> near <code>Bold</code> and <i>Italic</i> to format it as code."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535360471, "post_id": 52035760, "comment_id": 91021661, "body": "You should also <code>chomp $string;</code>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1535362616, "post_id": 52035760, "comment_id": 91022968, "body": "The warning is unrelated to the internal server error. Your code (as posted here) does not generate that warning, but it&#39;s not valid CGI either. However, it&#39;s horribly unsafe (shell injection / arbitrary code execution) and should really start with <code>use strict; use warnings;</code> (and a module to deal with parameter parsing)."}], "answers": [{"tags": [], "owner": {"reputation": 506, "user_id": 3359563, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/436f40e356a2a4f00ef7ff7de727db15?s=128&d=identicon&r=PG", "display_name": "Ramzendo", "link": "https://stackoverflow.com/users/3359563/ramzendo"}, "is_accepted": false, "score": 0, "last_activity_date": 1535387754, "last_edit_date": 1535387754, "creation_date": 1535360593, "answer_id": 52035879, "question_id": 52035760, "link": "https://stackoverflow.com/questions/52035760/500-internal-server-error-perl-cgi/52035879#52035879", "title": "500 internal server error Perl CGI", "body": "<p>It seems you don't have anything in your environment variable 'QUERY_STRING'.\nIf you don't need that, you could do:</p>\n\n<pre><code>$params= $ENV{'QUERY_STRING'} ? $ENV{'QUERY_STRING'} : 'foo';\n</code></pre>\n\n<p>This will avoid having the error \"Use of uninitialized value $params..\".\nYou can test this also by doing</p>\n\n<pre><code>perl videoplayback.pl\n</code></pre>\n\n<p>in your console.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1535553095, "last_edit_date": 1535553095, "creation_date": 1535549327, "answer_id": 52078643, "question_id": 52035760, "link": "https://stackoverflow.com/questions/52035760/500-internal-server-error-perl-cgi/52078643#52078643", "title": "500 internal server error Perl CGI", "body": "<p>Your CGI program expects query parameters. Query parameters are the (optional) bits of a URL that appear after the <code>?</code>. So in a URL that looks like this:</p>\n\n<pre><code>https://example.com/cgi/your_program.cgi?foo=1&amp;bar=2\n</code></pre>\n\n<p>The query parameters are <code>foo=1&amp;bar=2</code>.</p>\n\n<p>Inside a CGI program, you access the query parameters by parsing them out of <code>$ENV{QUERY_STRING}</code>. That's what the first few lines of your program do.</p>\n\n<p>But what happens if your program is called like this:</p>\n\n<pre><code>https://example.com/cgi/your_program.cgi\n</code></pre>\n\n<p>Then, there are no query parameters and there will be nothing in <code>$ENV{QUERY_STRING}</code>. That's what is generating the warning (and it's a warning, not an error) that you see. On line 4, you're trying to split <code>$params</code>, but <code>$params</code> has no data in it. Your program needs to deal with the case when it is passed no parameters.</p>\n\n<p>But that's not what is killing your program. As I said, it's a warning, not an error. The error is caused by a different problem.</p>\n\n<p>A CGI program is supposed to return two things - a set of headers and some content. You obviously know that as the bulk of your code is about printing headers and content. But what happens when there are no parameters? As <code>$params</code> is empty, <code>@tokens</code> will also contain no data. That means that your <code>foreach</code> loop body is never executed and no header ever gets returned.</p>\n\n<p>I bet that your web server error log contains something along the lines of \"no headers found\".</p>\n\n<p>A few more things to consider:</p>\n\n<ul>\n<li>Always add <code>use strict</code> and <code>use warnings</code> to your Perl code. And fix the problems they reveal (the most obvious one will be the need to declare all of your variables using <code>my</code>).</li>\n<li>Please think about using CGI.pm to parse your parameters and create your headers. There are complexities to this that you haven't considered. The people who wrote the module have considered them.</li>\n<li>A CGI program needs to emit exactly one set of headers. So putting your headers in a loop which can be executed zero times (as we have currently) or multiple times, seems strange. You'll want to reconsider this logic.</li>\n<li>Taking input from a user (e.g. <code>range</code>) and passing that directly to an operating system command is a recipe for disaster. Please ensure you clean up the user's input before using it in this way.</li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 10279011, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yMRODpPLbO0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNgiq55IvjpIqYo3h5GZQP_Cnorhg/mo/photo.jpg?sz=128", "display_name": "Joaqu&#237;n Rufo Gutierrez", "link": "https://stackoverflow.com/users/10279011/joaqu%c3%adn-rufo-gutierrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1535553095, "creation_date": 1535360146, "last_edit_date": 1535360396, "question_id": 52035760, "link": "https://stackoverflow.com/questions/52035760/500-internal-server-error-perl-cgi", "title": "500 internal server error Perl CGI", "body": "<p>I have a problem with my Perl CGI. When executes a Perl script i see me a error:</p>\n\n<p>Use of uninitialized value $params in split at videoplayback.pl line 4.</p>\n\n<p>So, i we get me a error:</p>\n\n<p>Internal Server Error</p>\n\n<p>The server encountered an internal error or misconfiguration and was unable to complete your request.</p>\n\n<p>Please contact the server administrator at [no address given] to inform them of the time this error occurred, and the actions you performed just before this error.</p>\n\n<p>More information about this error may be available in the server error log.</p>\n\n<p>Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request.</p>\n\n<p>Please fix.</p>\n\n<p>This is my code:</p>\n\n<pre><code>    #!/usr/bin/perl\n\n$params= $ENV{'QUERY_STRING'};\n@tokens=split('&amp;', $params);\n\nforeach $string (@tokens){ \n\n @mess=split('=', $string);\n\n if(index($params, \"audio\")!=-1){\n  if($mess[0] eq \"range\"){\n   $range=$mess[1];\n   $command=\"curl --header \\\"Range: bytes=${range}\\\" http://127.0.0.1/audio.mp4\";\n\n   print \"HTTP/1.1 200 OK\\r\\n\";\n   print \"Content-Length: \", length($command), \"\\r\\n\";\n   print \"Last-Modified: Fri, 28 Jun 2013 14:34:55 GMT\\r\\n\";\n   print \"Content-Type: audio/mp4\\r\\n\";\n   print \"Date: Wed, 17 Jul 2013 14:28:52 GMT\\r\\n\";\n   print \"Expires: Wed, 17 Jul 2013 14:28:52 GMT\\r\\nCache-Control: private, max-age=22303\\r\\nAccept-Ranges: bytes\\r\\nAccess-Control-Allow-Origin: http://www.youtube.com\\r\\nAccess-Control-Allow-Credentials: true\\r\\nTiming-Allow-Origin: http://www.youtube.com\\r\\nConnection: keep-alive\\r\\nX-Content-Type-Options: nosniff\\r\\nServer: gvs 1.0\\n\\r\\n\";\n\n   print `$command`;\n  }\n }\n\n elsif(index($params, \"video\")!=-1){\n  if($mess[0] eq \"range\"){\n   print \"Content-type: video/mp4\\n\\n\";\n   $range2=$mess[1];\n   $command2=\"curl --header \\\"Range: bytes=${range2}\\\" http://127.0.0.1/planet_360.mp4\";\n   print `$command2`;\n  }\n }\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1535356562, "post_id": 52034891, "comment_id": 91019798, "body": "Is it always just a single part of the string that changes?"}, {"owner": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 0, "creation_date": 1535357623, "post_id": 52034891, "comment_id": 91020260, "body": "Regex can&#39;t count, so if you do not know which is the increment you will have no chance with regex to find out. you could only maybe use one line as pattern and then use groups and back-references."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1535357822, "post_id": 52034891, "comment_id": 91020359, "body": "What output do you want from this?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1515, "user_id": 7189767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c979c9b4f88620e8ddbf74fb6a83824?s=128&d=identicon&r=PG&f=1", "display_name": "Fallenhero", "link": "https://stackoverflow.com/users/7189767/fallenhero"}, "edited": false, "score": 1, "creation_date": 1535358588, "post_id": 52034891, "comment_id": 91020731, "body": "@Fallen: This isn&#39;t about counting; it&#39;s about finding which substring is different between two strings that otherwise match."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "edited": false, "score": 0, "creation_date": 1535363159, "post_id": 52034891, "comment_id": 91023296, "body": "You didn&#39;t say what your final goal is, why do you need that changing number? Maybe a better way to approach that goal is using <a href=\"https://en.wikipedia.org/wiki/Natural_sort_order\" rel=\"nofollow noreferrer\">natural sorting</a>."}, {"owner": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535391097, "post_id": 52034891, "comment_id": 91039416, "body": "Edited: I want to find out how the sequence &#39;works&#39;, to do further checks/counts. I hope, that makes sense."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535393202, "post_id": 52034891, "comment_id": 91040393, "body": "<i>&quot;I want to find out how the sequence &#39;works&#39;, to do further checks/counts&quot;</i> Okay, but exactly what information do you need for these &quot;checks and counts&quot;. Be precise. It may help to explain your overall problem at a higher level."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535394541, "post_id": 52034891, "comment_id": 91040992, "body": "Thank you for the update, but it doesn&#39;t &quot;work&quot; for me completely.  I did update my answer, following the &quot;<i>Goal</i>&quot; update in the question."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535391177, "post_id": 52035461, "comment_id": 91039462, "body": "Sorry for not making myself clear. I want this to work on generic file sequences without even knowing their filename."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535393112, "post_id": 52035461, "comment_id": 91040353, "body": "So you want to find the differences between two filenames without seeing the filenames? That&#39;s clearly impossible."}, {"owner": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535393721, "post_id": 52035461, "comment_id": 91040647, "body": "I can see the filename, by taking for example the first two files. What i mean is, there is no predefined pattern, see my edited question. But yes, your approach seems to be my way to go."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535399788, "post_id": 52035461, "comment_id": 91043320, "body": "@dequid: No, I realise that, which is why I suggested that you find all numeric fields in the names and see which one is different. It would help a lot if you answered the repeated questions about what result you want from this: I don&#39;t understand why you&#39;re avoiding it."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535359005, "creation_date": 1535359005, "answer_id": 52035461, "question_id": 52034891, "link": "https://stackoverflow.com/questions/52034891/comparing-filenames-and-determine-their-incremental-digits/52035461#52035461", "title": "Comparing filenames and determine their incremental digits", "body": "<p>I suggest that you build a regex pattern by changing all digit sequences to <code>(\\d+)</code> and then see which captured values have changed</p>\n\n<p>For instance, with <code>segment8_400_av.ts</code> and\n<code>segment9_400_av.ts</code> you would generate a pattern <code>/segment(\\d+)_(\\d+)_av\\.ts/</code>. Note that <code>s/\\d+/(\\d+)/g</code> will return the number of numeric fields, which you will need for the subsequent check</p>\n\n<p>The first would capture <code>8</code> and <code>400</code> which the second would capture <code>9</code> and <code>400</code>. <code>8</code> is different from 9, so it is in that region of the string where the number varies</p>\n\n<p>I can't really write much code as you don't say what sort of result you want from this process</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535463994, "post_id": 52035831, "comment_id": 91069120, "body": "Your <code>split</code> calls can be achieved with <code>split &#47;(\\d+&#47;</code>."}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535467214, "post_id": 52035831, "comment_id": 91071262, "body": "Edited. Thanks, much better!"}], "tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": false, "score": 1, "last_activity_date": 1535467176, "last_edit_date": 1535467176, "creation_date": 1535360411, "answer_id": 52035831, "question_id": 52034891, "link": "https://stackoverflow.com/questions/52034891/comparing-filenames-and-determine-their-incremental-digits/52035831#52035831", "title": "Comparing filenames and determine their incremental digits", "body": "<p>See if this works for you:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub compare {\n    my ( $f1, $f2 ) = @_;\n\n    my @f1 = split /(\\d+)/sxm, $f1;\n    my @f2 = split /(\\d+)/sxm, $f2;\n\n    my $i    = 0;\n    my $out1 = q{};\n    my $out2 = q{};\n    foreach my $p (@f1) {\n        if ( $p eq $f2[$i] ) {\n            $out1 .= $p;\n            $out2 .= $p;\n        }\n        else {\n            $out1 .= sprintf ' ((%s)) ', $p;\n            $out2 .= sprintf ' ((%s)) ', $f2[$i];\n        }\n        $i++;\n    }\n\n    print $out1 . \"\\n\";\n    print $out2 . \"\\n\";\n    return;\n}\n\nprint \"Test1:\\n\";\ncompare( 'segment8_400_av.ts', 'segment9_400_av.ts' );\n\nprint \"\\n\\nTest2:\\n\";\ncompare( 'segment999_8_400_av.ts', 'segment999_9_400_av.ts' );\n</code></pre>\n\n<p>You basically split strings by starting/ending digits, the loop through the items and compare each of the 'pieces'. If they are equal, you accumulate. If not, then you highlight the differences and accumulate.</p>\n\n<p><strong>Output</strong> (I'm using ((number)) for the highlight)</p>\n\n<pre><code>Test1:\nsegment ((8)) _400_av.ts\nsegment ((9)) _400_av.ts\n\n\nTest2:\nsegment999_ ((8)) _400_av.ts\nsegment999_ ((9)) _400_av.ts\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535403062, "post_id": 52036071, "comment_id": 91044535, "body": "Still figuring out the counter &#39;detection&#39; part, but will give the method of storing the numbers to hashrefs definitely a try. Would have done it way more complicated."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535407193, "post_id": 52036071, "comment_id": 91045927, "body": "@dequid Thank you for feedback.  I simplified that part a little (changing the bit that finds the position) and added an explanation.  Let me know if isn&#39;t good enough."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1535481315, "last_edit_date": 1535481315, "creation_date": 1535361303, "answer_id": 52036071, "question_id": 52034891, "link": "https://stackoverflow.com/questions/52034891/comparing-filenames-and-determine-their-incremental-digits/52036071#52036071", "title": "Comparing filenames and determine their incremental digits", "body": "<p>I assume that only the counter differs across the strings </p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy ($fn1, $fn2) = ('segment8_400_av.ts', 'segment12_400_av.ts');\n\n# Collect all numbers from all strings    \nmy @nums = map { [ /([0-9]+)/g ] } ($fn1, $fn2);\n\nmy ($n, $pos);  # which number in the string, at what position\n\n# Find which differ\nNUMS: \nfor my $j (1..$#nums) {                           # strings\n    for my $i (0..$#{$nums[0]}) {                 # numbers in a string\n        if ($nums[$j]-&gt;[$i] != $nums[0]-&gt;[$i]) {  # it is i-th number\n            $n = $i;\n            $fn1 =~ /($nums[0]-&gt;[$i])/g;          # to find position\n            $pos = $-[$i];\n            say \"It is $i-th number in a string. Position: $pos\";\n            last NUMS;\n        }\n    }\n}\n</code></pre>\n\n<p>We loop over the array with arrayrefs of numbers found in each string, and over elements of each arrayref (eg <code>[8, 400]</code>). Each number  in a string (0th or 1st or ...) is compared to its counterpart in the 0-th string (array element); all other numbers are the same. </p>\n\n<p>The number of interest is the one that differs and we record which number in a string it is (<code>$n</code>-th).  </p>\n\n<p>Then its position in the string is found by matching it again and using <a href=\"https://perldoc.perl.org/perlvar.html#Variables-related-to-regular-expressions\" rel=\"nofollow noreferrer\"><code>@-</code> regex variable</a> with (the just established) index <code>$n</code>, so the offset of the start of the n-th match.  This part may be unneeded; while question edits helped I am still unsure whether the position may or not be useful.</p>\n\n<p>Prints, with position counting from 0</p>\n\n<pre>\nIt is 0-th number in a string. Position: 7\n</pre>\n\n<p>Note that, once it is found that it is the <code>$i</code>-th number, we can't use <code>index</code> to find its position; an number earlier in strings may happen to be the same as the <code>$i</code>-th one, in this string. </p>\n\n<p>To test, modify input strings by adding the same number to each, before the one of interest.</p>\n\n<hr>\n\n<p>Per question update, to examine the sequence (for missing files for instance), with the above findings you can collect counters for all strings in an array with hashrefs (num => filename)</p>\n\n<pre><code>use Data::Dump qw(dd);\n\nmy @seq =  map { { $num[$_]-&gt;[$n] =&gt; $fnames[$_] } } 0..$#fnames;\n\ndd \\@seq;\n</code></pre>\n\n<p>where <code>@fnames</code> contains filenames (like two picked for the example above, <code>$fn1</code> and <code>$fn2</code>). This assumes that the file list was sorted to begin with, or add the sort if it wasn't</p>\n\n<pre><code>my @seq =  \n    sort { (keys %$a)[0] &lt;=&gt; (keys %$b)[0] }\n    map { { $num[$_]-&gt;[$n] =&gt; $fnames[$_] } } \n    0..$#fnames;\n</code></pre>\n\n<p>The order is maintained by array.</p>\n\n<p>Adding this to the above example (with two strings) adds to the print</p>\n\n<pre>\n[\n  { 8 => \"segment8_400_av.ts\" },\n  { 12 => \"segment12_400_av.ts\" },\n]\n</pre>\n\n<p>With this all goals in \"<em>Edit 2</em>\" should be straighforward.</p>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535402814, "post_id": 52036077, "comment_id": 91044431, "body": "sorry, please see my both updates. The numeric segments can occur anywhere in the file name, even at the beginning and also there <i>can</i> be another numeric part."}, {"owner": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 0, "creation_date": 1535405031, "post_id": 52036077, "comment_id": 91045219, "body": "but don&#39;t you search for two numeric segments ( \\d++ ). What if there is only one, the counting one? But i see, i have to study perlre..."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "edited": false, "score": 1, "creation_date": 1535433481, "post_id": 52036077, "comment_id": 91051314, "body": "@dequid <code>( \\d++ )</code> is a group of 1 or more digits (possessive), meaning it will always match the maximum amount of currently available digits."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1535361322, "creation_date": 1535361322, "answer_id": 52036077, "question_id": 52034891, "link": "https://stackoverflow.com/questions/52034891/comparing-filenames-and-determine-their-incremental-digits/52036077#52036077", "title": "Comparing filenames and determine their incremental digits", "body": "<p>You tagged this question <code>regex</code>, so here's a regex-based solution:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $name1 = 'segment12_400_av.ts';\nmy $name2 = 'segment10_400_av.ts';\n\nif (\n    \"$name1\\0$name2\" =~ m{\n        \\A\n        ( \\D*+ (?: \\d++ \\D++ )* )  # prefix\n        ( \\d++ )                   # numeric segment 1\n        ( [^\\0]* )                 # suffix\n        \\0                         # separator\n        \\1                         # prefix\n        ( \\d++ )                   # numeric segment 2\n        \\3                         # suffix\n        \\z\n    }xa\n) {\n    print &lt;&lt;_EOT_;\nResult of comparing \"$name1\" and \"$name2\"\nCommon prefix: $1\nCommon suffix: $3\nVarying numeric parts: $2 / $4\nPosition of varying numeric part: $-[2]\n_EOT_\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Result of comparing \"segment12_400_av.ts\" and \"segment10_400_av.ts\"\nCommon prefix: segment\nCommon suffix: _400_av.ts\nVarying numeric parts: 12 / 10\nPosition of varying numeric part: 7\n</code></pre>\n\n<p>It assumes that</p>\n\n<ul>\n<li>the strings are different (guard the condition with <code>$name1 ne $name2 &amp;&amp; ...</code> if that's not guaranteed)</li>\n<li>there's only one substring that's different between the input strings (otherwise it won't find any match)</li>\n<li>the differing substring consists of digits only</li>\n<li>all digits surrounding the first point of difference are part of the varying increment (e.g. the example above recognizes <code>segment</code> as the common prefix, not <code>segment1</code>)</li>\n</ul>\n\n<p>The idea is to combine the two names into a single string (separated by NUL, which is unambiguous because filenames can't contain <code>\\0</code>), then let the regex engine do the hard work of finding the longest common prefix (using greediness and backtracking).</p>\n\n<p>Because we're in a regex, we can get a bit more fancy than just finding the longest common prefix: We can make sure that the prefix doesn't end with a digit (see the <code>segment1</code> vs. <code>segment</code> case above) and we can verify that the suffix is also the same.</p>\n"}], "owner": {"reputation": 245, "user_id": 2443551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nt39w.jpg?s=128&g=1", "display_name": "dequid", "link": "https://stackoverflow.com/users/2443551/dequid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1535481315, "creation_date": 1535356392, "last_edit_date": 1535405398, "question_id": 52034891, "link": "https://stackoverflow.com/questions/52034891/comparing-filenames-and-determine-their-incremental-digits", "title": "Comparing filenames and determine their incremental digits", "body": "<p>Imagine i have a sequence of files, e.g.:</p>\n\n<pre><code>...\nsegment8_400_av.ts\nsegment9_400_av.ts\nsegment10_400_av.ts\nsegment11_400_av.ts\nsegment12_400_av.ts\n...\n</code></pre>\n\n<p>When the filenames are known, i can match against the filenames with a regular expression like:</p>\n\n<pre><code>/segment(\\d+)_400_av\\.ts/\n</code></pre>\n\n<p>Because i <em>know</em> the incremental pattern.</p>\n\n<p>But what would be a generic approach to this? I mean how can i take two file names out of the list, compare them and find out where in the file name the counting part is, taking into account any other digits that can occur in the filename (the <code>400</code> in this case)?</p>\n\n<p><strong>Goal:</strong> What i want to do is to run the script against various file sequences to check for example for missing files, so this should be the first step to find out the numbering scheme. File sequences can occur in many different fashions, e.g.:</p>\n\n<pre><code>test_1.jpg (simple counting suffix)\ntest_2.jpg\n...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>segment9_400_av.ts  (counting part inbetween, with other static digits)\nsegment10_400_av.ts\n...\n</code></pre>\n\n<p>or</p>\n\n<pre><code>01_trees_00008.dpx  (padded with zeros)\n01_trees_00009.dpx\n01_trees_00010.dpx\n</code></pre>\n\n<p><strong>Edit 2:</strong> Probably my problem can be described more simple: With a given set of files, i want to:</p>\n\n<ol>\n<li>Find out, <em>if</em> they are a numbered sequence of files, with the rules below</li>\n<li>Get the first file number, get the last file number and file count</li>\n<li>Detect missing files (gaps in the sequence)</li>\n</ol>\n\n<p>Rules:</p>\n\n<ul>\n<li>As melpomene summarized in his answer, the file names only differ in one substring, which consists only of digits</li>\n<li>The counting digits can occur anywhere in the filename</li>\n<li>The digits can be padded with 0's (see example above) </li>\n</ul>\n\n<p>I can do #2 and #3, what i am struggling with is #1 as a starting point.</p>\n"}, {"tags": ["perl", "method-call", "template-toolkit"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1535349928, "post_id": 52032305, "comment_id": 91016832, "body": "Note: in the <code>VARIABLES</code> parameter you call <code>make_formatter</code>, perhaps you meant to provide a reference to the sub here instead? I.e. <code>VARIABLES =&gt; { make_formatter =&gt; \\&amp;make_formatter }</code>"}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1535350119, "post_id": 52032305, "comment_id": 91016899, "body": "You may get away with it when you would change <code>make_formatter =&gt; make_formatter</code> to <code>make_formatter =&gt; &amp;make_formatter</code>. You did assign to the <code>VARIABLES</code> hash the result of calling the function (without any arguments, hence <code>undef</code> or uninitialized), rather then storing the reference to the subroutine."}], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "is_accepted": false, "score": 3, "last_activity_date": 1535413712, "creation_date": 1535413712, "answer_id": 52048301, "question_id": 52032305, "link": "https://stackoverflow.com/questions/52032305/call-from-a-code-reference-in-template-toolkit/52048301#52048301", "title": "Call from a code reference in Template Toolkit", "body": "<p>First let me please point out that putting <code>use strict; use warnings;</code> at the beginning of your script is strongly advised.</p>\n\n<p>If you do that for your snippet generating the $template,\nyou will get a <code>Bareword \"make_formatter\" not allowed while \"strict subs\" in use</code> error, which should help you determine this is not a useful notation.</p>\n\n<p>Now if you call <code>make_formatter()</code> instead, this will output <code>&lt;h1&gt;[] MyFormatter&lt;/h1&gt;</code>. This makes sense: your function returned the sub, which is called with 'MyFormatter' in your template ( and $level is undef, as you called make_formatter with no input ).</p>\n\n<p>As Mr. Haegland pointed out,</p>\n\n<pre><code>my $template = Template-&gt;new({\nVARIABLES =&gt; {\n    make_formatter =&gt; \\&amp;make_formatter,\n}\n});\n</code></pre>\n\n<p>leads to the output I understand you want:</p>\n\n<p><code>&lt;h1&gt;[MyFormatter] Sample message&lt;/h1&gt;</code></p>\n\n<p>\\&amp;make_formatter gives you a subroutine reference,\nwhich in perl normally you could call using:\n<code>my $ref = \\&amp;make_formatter; $ref-&gt;( 'Input' );</code></p>\n\n<p>This can then be called in the first line of your template,\nreturning another code ref, which is then called in your second line.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 53, "user_id": 10276308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf54139b76d8967c960558bf961ae3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Henri Mirton", "link": "https://stackoverflow.com/users/10276308/henri-mirton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1535413712, "creation_date": 1535341417, "last_edit_date": 1535342763, "question_id": 52032305, "link": "https://stackoverflow.com/questions/52032305/call-from-a-code-reference-in-template-toolkit", "title": "Call from a code reference in Template Toolkit", "body": "<p>I have a simple higher-order function that builds a message formatter.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub make_formatter {\n    my $level = shift;\n    return sub {\n        my $message = shift;\n        return \"[$level] $message\";\n    }\n}\n</code></pre>\n\n<p>I use it from Perl like that:</p>\n\n<pre><code>my $component_formatter = make_formatter('ComponentError');\nprint $component_formatter-&gt;('Hello') . \"\\n\";\n</code></pre>\n\n<p>I want to use <code>make_formatter</code> from a Template Toolkit template. I have tried to do the following:</p>\n\n<pre><code>use Template;\nuse Template::Constants;\n\nmy $template = Template-&gt;new({\n#   DEBUG =&gt; Template::Constants::DEBUG_ALL,\n    VARIABLES =&gt; {\n        make_formatter =&gt; make_formatter,\n    }\n});\n\nmy $template_str = \"\n[% my_formatter = make_formatter('MyFormatter') %]\n&lt;h1&gt;[% my_formatter('Sample message') %]&lt;/h1&gt;\n\";\n\n$template-&gt;process(\\$template_str);\n</code></pre>\n\n<p>The output of this script is:</p>\n\n<pre><code>$ perl test.pl \nUse of uninitialized value $level in concatenation (.) or string at test.pl line 10.\n\n\n&lt;h1&gt;[] MyFormatter&lt;/h1&gt;\n</code></pre>\n\n<p>Is it possible to call <code>my_formatter</code> using only Template Toolkit syntax ? Calling external Perl code that is not callable by default from Template Toolkit is not an option.</p>\n"}, {"tags": ["xml", "perl", "xml-libxml"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1535330035, "post_id": 52030922, "comment_id": 91013020, "body": "It would help a lot to see the XML data. Missing it out is probably why you&#39;ve received two downvotes!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10277466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5790648663864fb2d7f092e5b928583?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10277466/james"}, "edited": false, "score": 0, "creation_date": 1535358934, "post_id": 52031268, "comment_id": 91020869, "body": "Hi Borodin thank you that answered my question perfectly. And apologies if my question was unclear, I&#39;m new to Stack overflow and PERL but will try to be clearer going forward. It would be nice if the people who had down voted my question had given me a reason at least. I&#39;ve included the source XML for reference in case it came in useful as a sample for people having the same issue in the future."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 10277466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5790648663864fb2d7f092e5b928583?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10277466/james"}, "edited": false, "score": 0, "creation_date": 1535359245, "post_id": 52031268, "comment_id": 91021014, "body": "@James: <i>&quot;It would be nice if the people who had down voted my question had given me a reason at least&quot;</i> That&#39;s understandable, and it&#39;s why I suggested a reason. But voting is anonymous for a reason, and the vast majority of voters won&#39;t give a reason. You need to get used to it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 10277466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5790648663864fb2d7f092e5b928583?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10277466/james"}, "edited": false, "score": 0, "creation_date": 1535359304, "post_id": 52031268, "comment_id": 91021043, "body": "@James: The language is spelled Perl, as you had in your subject line. It&#39;s not an acronym. (I have removed it from your subject line as it only duplicates information in the tags that you assigned). By the way, your question is nothing to do with XSLT!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11, "user_id": 10277466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5790648663864fb2d7f092e5b928583?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10277466/james"}, "edited": false, "score": 0, "creation_date": 1535359419, "post_id": 52031268, "comment_id": 91021109, "body": "@James: You should aim to write any question so that we can run the code ourselves and experience the same behaviour. That normally means a (reduced) program, input data, and a thorough description of the unwanted behaviour."}, {"owner": {"reputation": 11, "user_id": 10277466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5790648663864fb2d7f092e5b928583?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10277466/james"}, "edited": false, "score": 1, "creation_date": 1535371342, "post_id": 52031268, "comment_id": 91028031, "body": "thanks for your further advice, I\u2019ll make sure I\u2019m precise and provide all code for reproducing the problem in the future."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535339638, "last_edit_date": 1535339638, "creation_date": 1535329797, "answer_id": 52031268, "question_id": 52030922, "link": "https://stackoverflow.com/questions/52030922/how-to-return-separate-results-using-xmllibxml/52031268#52031268", "title": "How to return separate results using XML::LibXML", "body": "<p>You've already done the right thing by using <code>$node</code> for the tracks (although <code>$track</code> would have been a better name) and there's no need for the <code>./</code> at the start of the XPath expressions. Just open another loop for the <code>clipitem</code> elements, like this</p>\n\n<pre><code>for my $track ( $dom-&gt;findnodes('//xmeml/sequence/media/video/track') ) {\n\n    say 'Track Name: ',   $track-&gt;findvalue('@MZ.TrackName');\n\n    my $count;\n\n    for my $clip ( $track-&gt;findnodes('clipitem') ) {\n\n        say 'Clip item', ++$count;\n\n        say 'Frame Rate:   ', $clip-&gt;findvalue('rate/timebase');\n        say 'Timecode In:  ', $clip-&gt;findvalue('start');\n        say 'Timecode Out: ', $clip-&gt;findvalue('end');\n    }\n\n    say \"\";\n}\n</code></pre>\n\n<p>I also suspect that there's no need for the double slash <code>//</code> at the start of the XPath to <code>track</code>. It just makes LibXML search through the entire data instead of checking at the root element, and if <code>xmeml</code> is the root element then there's no need: just one slash is correct.</p>\n"}], "owner": {"reputation": 11, "user_id": 10277466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5790648663864fb2d7f092e5b928583?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10277466/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535359705, "creation_date": 1535325363, "last_edit_date": 1535359705, "question_id": 52030922, "link": "https://stackoverflow.com/questions/52030922/how-to-return-separate-results-using-xmllibxml", "title": "How to return separate results using XML::LibXML", "body": "\n\n<p>I'm currently trying to use the following Perl code to filter an XML document for specific values. </p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use 5.010;\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $filename = 'FF_BLADEII###_UNCP_12_Clips.xml';\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; $filename);\n\nmy $count = 1 ;\n\nforeach my $node($dom-&gt;findnodes('//xmeml/sequence/media/video/track')) {\n\n    say 'Track Name:', $node-&gt;findvalue('./@MZ.TrackName');\n\n    say 'Clip item',     $count++ ;\n    say 'Frame Rate:',   $node-&gt;findvalue('./clipitem/rate/timebase'),;\n    say 'Timecode In:',  $node-&gt;findvalue('./clipitem/start');\n    say 'Timecode Out:', $node-&gt;findvalue('./clipitem/end');\n} \n</code></pre>\n\n<p>The output I'm currently getting is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Track Name:FF_BLADEII###_UNCP\nClip item1\nFrame Rate:252525252525\nTimecode In:01125120004800093000138004\nTimecode Out:1125120004800093000138004179424\nTrack Name:CE_FF_BLADEII###_01_FUSED\nClip item2\nFrame Rate:252525252525\nTimecode In:01125120004800093000138004\nTimecode Out:1125120004800093000138004167125\n</code></pre>\n\n<p>Where for example each result for <code>Frame Rate</code> is displayed on one line. I know this is happening because there are six <code>timebase</code> elements within each <code>track</code>, but my desired result would be to list the <code>Track Name</code> attribute and then values from each <code>clipitem</code> element within it separately. For example</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Track Name:FF_BLADEII###_UNCP\nClip item1\nFrame Rate:25\nTimecode In:0\nTimecode Out:1125\nClip item2\nFrame Rate:25\nTimecode In:1125\nTimecode Out:12000\nClip item3\nFrame Rate:25\nTimecode In:12000\nTimecode Out:48000\nClip item4\nFrame Rate:25\nTimecode In:48000\nTimecode Out:93000\nClip item5\nFrame Rate:25\nTimecode In:93000\nTimecode Out:138004\nClip item6\nFrame Rate:25\nTimecode In:138004\nTimecode Out:179424\n\nTrack Name:CE_FF_BLADEII###_01_FUSED\nClip item1\nFrame Rate:25\nTimecode In:0\nTimecode Out:1125\nClip item2\nFrame Rate:25\nTimecode In:1125\nTimecode Out:12000\nClip item3\nFrame Rate:25\nTimecode In:12000\nTimecode Out:48000\nClip item4\nFrame Rate:25\nTimecode In:48000\nTimecode Out:93000\nClip item5\nFrame Rate:25\nTimecode In:93000\nTimecode Out:138004\nClip item6\nFrame Rate:25\nTimecode In:138004\nTimecode Out:167125\n</code></pre>\n\n<p>Here is the source XML I am using</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE xmeml&gt;\n&lt;xmeml version=\"4\"&gt;\n    &lt;sequence id=\"sequence-2\" TL.SQAudioVisibleBase=\"9\" TL.SQVideoVisibleBase=\"0\" TL.SQVisibleBaseTime=\"0\" TL.SQAVDividerPosition=\"0.5\" TL.SQHideShyTracks=\"0\" TL.SQHeaderWidth=\"184\" Monitor.ProgramZoomOut=\"499578347520000\" Monitor.ProgramZoomIn=\"474176747520000\" TL.SQTimePerPixel=\"11.015524079320114\" MZ.EditLine=\"487629434880000\" MZ.Sequence.PreviewFrameSizeHeight=\"1080\" MZ.Sequence.PreviewFrameSizeWidth=\"1920\" MZ.Sequence.PreviewRenderingClassID=\"1480868673\" MZ.Sequence.PreviewRenderingPresetCodec=\"107\" MZ.Sequence.EditingModeGUID=\"44cf6a27-e791-427a-a544-97439b366abf\" MZ.Sequence.VideoTimeDisplayFormat=\"109\" MZ.WorkOutPoint=\"1823062671360000\" MZ.WorkInPoint=\"0\" MZ.ZeroPoint=\"883975680000000\" explodedTracks=\"true\"&gt;\n        &lt;rate&gt;\n            &lt;timebase&gt;25&lt;/timebase&gt;\n            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n        &lt;/rate&gt;\n        &lt;name&gt;FF_BLADEII###_UNCP&lt;/name&gt;\n        &lt;media&gt;\n            &lt;video&gt;\n                &lt;track TL.SQTrackShy=\"0\" TL.SQTrackExpandedHeight=\"50\" TL.SQTrackExpanded=\"1\" MZ.TrackTargeted=\"1\" MZ.TrackName=\"FF_BLADEII###_UNCP\"&gt;\n                    &lt;clipitem id=\"clipitem-73\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-3&lt;/masterclipid&gt;\n                        &lt;name&gt;FF_BLADEII###_UNCP&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;181474&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;0&lt;/start&gt;\n                        &lt;end&gt;1125&lt;/end&gt;\n                        &lt;in&gt;0&lt;/in&gt;\n                        &lt;out&gt;1125&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-74\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-3&lt;/masterclipid&gt;\n                        &lt;name&gt;FF_BLADEII###_UNCP&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;181474&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;1125&lt;/start&gt;\n                        &lt;end&gt;12000&lt;/end&gt;\n                        &lt;in&gt;1175&lt;/in&gt;\n                        &lt;out&gt;12050&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-75\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-3&lt;/masterclipid&gt;\n                        &lt;name&gt;FF_BLADEII###_UNCP&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;181474&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;12000&lt;/start&gt;\n                        &lt;end&gt;48000&lt;/end&gt;\n                        &lt;in&gt;12550&lt;/in&gt;\n                        &lt;out&gt;48550&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-76\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-3&lt;/masterclipid&gt;\n                        &lt;name&gt;FF_BLADEII###_UNCP&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;181474&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;48000&lt;/start&gt;\n                        &lt;end&gt;93000&lt;/end&gt;\n                        &lt;in&gt;48550&lt;/in&gt;\n                        &lt;out&gt;93550&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-77\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-3&lt;/masterclipid&gt;\n                        &lt;name&gt;FF_BLADEII###_UNCP&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;181474&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;93000&lt;/start&gt;\n                        &lt;end&gt;138004&lt;/end&gt;\n                        &lt;in&gt;95050&lt;/in&gt;\n                        &lt;out&gt;140054&lt;/out&gt;\n\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-78\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-3&lt;/masterclipid&gt;\n                        &lt;name&gt;FF_BLADEII###_UNCP&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;181474&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;138004&lt;/start&gt;\n                        &lt;end&gt;179424&lt;/end&gt;\n                        &lt;in&gt;140054&lt;/in&gt;\n                        &lt;out&gt;181474&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                &lt;/track&gt;\n                &lt;track TL.SQTrackShy=\"0\" TL.SQTrackExpandedHeight=\"25\" TL.SQTrackExpanded=\"0\" MZ.TrackTargeted=\"0\" MZ.TrackName=\"CE_FF_BLADEII###_01_FUSED\"&gt;\n                    &lt;clipitem id=\"clipitem-79\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-4&lt;/masterclipid&gt;\n                        &lt;name&gt;CE_FF_BLADEII###_01&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;169175&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;0&lt;/start&gt;\n                        &lt;end&gt;1125&lt;/end&gt;\n                        &lt;in&gt;0&lt;/in&gt;\n                        &lt;out&gt;1125&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-80\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-4&lt;/masterclipid&gt;\n                        &lt;name&gt;CE_FF_BLADEII###_01&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;169175&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;1125&lt;/start&gt;\n                        &lt;end&gt;12000&lt;/end&gt;\n                        &lt;in&gt;1175&lt;/in&gt;\n                        &lt;out&gt;12050&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-81\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-4&lt;/masterclipid&gt;\n                        &lt;name&gt;CE_FF_BLADEII###_01&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;169175&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;12000&lt;/start&gt;\n                        &lt;end&gt;48000&lt;/end&gt;\n                        &lt;in&gt;12550&lt;/in&gt;\n                        &lt;out&gt;48550&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-82\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-4&lt;/masterclipid&gt;\n                        &lt;name&gt;CE_FF_BLADEII###_01&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;169175&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;48000&lt;/start&gt;\n                        &lt;end&gt;93000&lt;/end&gt;\n                        &lt;in&gt;48550&lt;/in&gt;\n                        &lt;out&gt;93550&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-83\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-4&lt;/masterclipid&gt;\n                        &lt;name&gt;CE_FF_BLADEII###_01&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;169175&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;93000&lt;/start&gt;\n                        &lt;end&gt;138004&lt;/end&gt;\n                        &lt;in&gt;95050&lt;/in&gt;\n                        &lt;out&gt;140054&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                    &lt;clipitem id=\"clipitem-84\" frameBlend=\"FALSE\"&gt;\n                        &lt;masterclipid&gt;masterclip-4&lt;/masterclipid&gt;\n                        &lt;name&gt;CE_FF_BLADEII###_01&lt;/name&gt;\n                        &lt;enabled&gt;TRUE&lt;/enabled&gt;\n                        &lt;duration&gt;169175&lt;/duration&gt;\n                        &lt;rate&gt;\n                            &lt;timebase&gt;25&lt;/timebase&gt;\n                            &lt;ntsc&gt;FALSE&lt;/ntsc&gt;\n                        &lt;/rate&gt;\n                        &lt;start&gt;138004&lt;/start&gt;\n                        &lt;end&gt;167125&lt;/end&gt;\n                        &lt;in&gt;140054&lt;/in&gt;\n                        &lt;out&gt;169175&lt;/out&gt;\n                    &lt;/clipitem&gt;\n                &lt;/track&gt;\n            &lt;/video&gt;\n        &lt;/media&gt;\n    &lt;/sequence&gt;\n&lt;/xmeml&gt;\n</code></pre>\n"}, {"tags": ["regex", "perl", "multiline", "multilinestring"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1535314561, "post_id": 52029737, "comment_id": 91010255, "body": "Or <code>s{\\n(?!\\\\.)}{}g;</code> with a suitably adjusted ~linefeed as in brian&#39;s answer. The <code>(?!...)</code> is a negative lookahead. It doesn&#39;t consume what it matches so you don&#39;t have to re-enter it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1535333644, "post_id": 52029737, "comment_id": 91013553, "body": "The <code>$&#47; = undef</code> does: (1) changes <code>$&#47;</code> for the whole unit; better put it inside the block and go <code>local $&#47;;</code> (2) Since <code>$&#47;</code> is <code>undef</code> the following <code>&lt;$in&gt;</code> reads (&quot;slurps&quot;) the whole file; I presume that that is your intent.  But then <code>while</code> is misleading; why not <code>my $text = &lt;$in&gt;</code> ?  //  An idiom of sorts is: <code>my $text = do { local $&#47;; open ... ; &lt;$fh&gt; };</code> and then process <code>$text</code>.  There are also modules that do this in one line, for instance <code>Path::Tiny</code>."}], "answers": [{"comments": [{"owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1535314304, "post_id": 52029839, "comment_id": 91010191, "body": "Great, that was it, thanks much!  Just one thing:  Is there any way to find out if an end of line is <code>\\r</code> or <code>\\n</code>?"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "edited": false, "score": 0, "creation_date": 1535315196, "post_id": 52029839, "comment_id": 91010389, "body": "I either use hexdump or see what my editor tells me if I&#39;m curious about the line ending. Many editors can convert them for you too."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 4, "last_activity_date": 1535383614, "last_edit_date": 1535383614, "creation_date": 1535313771, "answer_id": 52029839, "question_id": 52029737, "link": "https://stackoverflow.com/questions/52029737/matching-and-deleting-newline-character-in-mutiline-perl-regex/52029839#52029839", "title": "Matching and deleting newline character in mutiline perl regex", "body": "<p>I think your input has a carriage return-linefeed pair. You're only replacing the newline but the carriage return is still there.</p>\n\n<p>You can match <code>\\v</code> for vertical whitespace (a bit more than line endings), <code>\\R</code> for a generalized Unicode line ending, <code>[\\r\\n]+</code> to get either (singly or together), or <code>\\r\\n</code> if you're sure they will both be there. The trick is to choose one that works for you if the line ending changes. </p>\n\n<p>And, the <code>\\1</code> on the replacement side is better written as a <code>$1</code>. </p>\n"}], "owner": {"reputation": 249, "user_id": 5814380, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cc5247afa42014a646feaf185d52c6e2?s=128&d=identicon&r=PG&f=1", "display_name": "jan", "link": "https://stackoverflow.com/users/5814380/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52029839, "answer_count": 1, "score": 1, "last_activity_date": 1535383614, "creation_date": 1535312873, "question_id": 52029737, "link": "https://stackoverflow.com/questions/52029737/matching-and-deleting-newline-character-in-mutiline-perl-regex", "title": "Matching and deleting newline character in mutiline perl regex", "body": "<p>I know there are tons of questions about matching multiline regexes with perl on this site, however, I'm still having trouble figuring out how to do the below. So any help or links to the relevant questions would be highly appreciated. </p>\n\n<p>I have a text file <code>input.txt</code> that is structured with a field-label (identified by a backslash) and field-contents, like this: </p>\n\n<pre><code>\\x text\n\\y text text\ntext text\n\\z text\n</code></pre>\n\n<p>Field-contents can contain line breaks, but for further processing I need to make sure that all field contents are on one line. The following apparently is able to correctly <em>match</em> across multiple lines, however, it doesn't delete it but instead reinserts it.</p>\n\n<pre><code>#!/usr/bin/perl\n\n$/ =undef; \n\n{\nopen(my $in, \"&lt;\", \"input.txt\") or die \"impossible: $!\";\nopen(my $out, \"&gt;\", \"output.txt\") or die \"Can't open output.txt: $!\"; \n\nwhile (&lt;$in&gt;) {\n    s/\\n([^\\\\])/ \\1/g; # delete all line breaks unless followed by backslash and replace by a single space\n    print $out $_ ; \n    }       \n}\n</code></pre>\n\n<p>It adds the space to the front (so I know it correctly finds it) but nonetheless keeps the newline character. Output looks like this:</p>\n\n<pre><code>\\x text\n\\y text text\n text text\n\\z text\n</code></pre>\n\n<p>Whereas I was hoping to get this:</p>\n\n<pre><code>\\x text\n\\y text text text text\n\\z text\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 361156, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1535306591, "post_id": 52028945, "comment_id": 91008197, "body": "Please don&#39;t add unrelated tags."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1535308821, "post_id": 52028945, "comment_id": 91008728, "body": "I don&#39;t see how that output has the values sorted in ascending order. Please explain."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10183009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f920f96dfdb977198ded15c9de90f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Janardana Raju", "link": "https://stackoverflow.com/users/10183009/janardana-raju"}, "edited": false, "score": 0, "creation_date": 1535446017, "post_id": 52030044, "comment_id": 91057556, "body": "foreach  my  $k ( sort { @{$hash{$b}} &lt;=&gt; @{$hash{$a}} } keys %hash ) {         print &quot;$k &lt;=&gt; @{ $hash{$k} }\\n&quot;; }"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 9, "user_id": 10183009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f920f96dfdb977198ded15c9de90f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Janardana Raju", "link": "https://stackoverflow.com/users/10183009/janardana-raju"}, "edited": false, "score": 0, "creation_date": 1535457925, "post_id": 52030044, "comment_id": 91065051, "body": "If you have a new question, ask a new question instead of putting it in comments :)"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1535315557, "creation_date": 1535315557, "answer_id": 52030044, "question_id": 52028945, "link": "https://stackoverflow.com/questions/52028945/sorting-a-hash-of-arrays-using-perl/52030044#52030044", "title": "Sorting a hash of arrays using Perl", "body": "<p>I don't know what you mean about descending order. Can you show an example? I'll go by the output you show.</p>\n\n<p>I assumed that you didn't want to change the original data (which may not be the case) so I used the map-sort to create an intermediate one. I go through that intermediate result in order and do the fiddly bits to get what you want. Much of the ugliness is to get you the format you wanted.</p>\n\n<p>The <a href=\"https://www.effectiveperlprogramming.com/2014/09/use-postfix-dereferencing/\" rel=\"nofollow noreferrer\">postfix dereference</a> is useful here:</p>\n\n<pre><code>use v5.26;\nuse utf8;\nuse strict;\nuse warnings;\n\nmy %Hash = (\n   1111 =&gt; [5,6],\n   5555 =&gt; [3,4],\n   2222 =&gt; [3],\n   4444 =&gt; [3,1]\n);\n\n\nforeach my $tuple (\n    sort {\n        $b-&gt;[1][0] &lt;=&gt; $a-&gt;[1][0]\n        }\n    map {\n        [ $_, [ sort { $b &lt;=&gt; $a } $Hash{$_}-&gt;@* ] ];\n        }\n    keys %Hash\n    ) {\n    print my $string = \"$tuple-&gt;[0] =&gt; \";\n    my $indent = length $string;\n    foreach my $i ( 0 .. $tuple-&gt;[1]-&gt;$#* ) {\n        print ' ' x $indent if $i;\n        print $tuple-&gt;[1][$i];\n        print ',' if $i == $tuple-&gt;[1]-&gt;$#*;\n        print \"\\n\";\n        }\n    }\n</code></pre>\n\n<p>This produces:</p>\n\n<pre><code>1111 =&gt; 6\n        5,\n5555 =&gt; 4\n        3,\n4444 =&gt; 3\n        1,\n2222 =&gt; 3,\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10183009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f920f96dfdb977198ded15c9de90f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Janardana Raju", "link": "https://stackoverflow.com/users/10183009/janardana-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535465324, "creation_date": 1535306509, "last_edit_date": 1535465324, "question_id": 52028945, "link": "https://stackoverflow.com/questions/52028945/sorting-a-hash-of-arrays-using-perl", "title": "Sorting a hash of arrays using Perl", "body": "<pre><code>my %Hash = ( \n\n   1111 =&gt; [5,6] ,\n   5555 =&gt; [3,4],   \n   2222 =&gt; [3],\n   4444 =&gt; [3,1]\n\n)\n</code></pre>\n\n<p><p> How can i  sort hash by values in ascending order, so that all the values should display as sorting but if elements are equal , sorting of keys should be in descending order.</p></p>\n\n<pre><code>   &lt;p&gt;  Output:  \n    1111 =&gt; 6\n            5,\n\n    5555 =&gt; 4\n            3 ,\n\n    4444 =&gt; 3\n            1 ,\n\n    2222 =&gt; 3\n&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["perl", "backup", "cpanel", "dropbox", "whm"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 4216155, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-2Sm-9Sh4wBA/AAAAAAAAAAI/AAAAAAAAAV0/7ve5p_z84UU/photo.jpg?sz=128", "display_name": "Krishna Pariyar", "link": "https://stackoverflow.com/users/4216155/krishna-pariyar"}, "edited": false, "score": 0, "creation_date": 1535466824, "post_id": 52042288, "comment_id": 91071009, "body": "Thank You for your comment. Yes I already have opened issue at Github repo. I found there were already 2 issues which were unanswered and had not thought they would reply soon."}], "tags": [], "owner": {"reputation": 13778, "user_id": 1305693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da01d21aaa750b4cca96f2eb6017ce94?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1305693/greg"}, "is_accepted": false, "score": 0, "last_activity_date": 1535382811, "creation_date": 1535382811, "answer_id": 52042288, "question_id": 52027969, "link": "https://stackoverflow.com/questions/52027969/setting-dropbox-as-custom-backp-on-whm-cpanel-error/52042288#52042288", "title": "setting dropbox as custom backp on whm/cpanel error", "body": "<p>The error message is correctly indicating that <a href=\"https://www.dropbox.com/developers/documentation/http/documentation#path-formats\" rel=\"nofollow noreferrer\">the Dropbox API expects the value <code>\"\"</code> when referring to the root alone</a>. The code is instead sending the value <code>\"/\"</code>. This looks like a bug in the code.</p>\n\n<p>It looks like you've already opened an issue with the developer for this:</p>\n\n<p><a href=\"https://github.com/CpanelInc/backup-transport-dropbox/issues/3\" rel=\"nofollow noreferrer\">https://github.com/CpanelInc/backup-transport-dropbox/issues/3</a></p>\n\n<p>They should update the code to use <code>\"\"</code> when referring to the root folder on Dropbox.</p>\n"}], "owner": {"reputation": 61, "user_id": 4216155, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh5.googleusercontent.com/-2Sm-9Sh4wBA/AAAAAAAAAAI/AAAAAAAAAV0/7ve5p_z84UU/photo.jpg?sz=128", "display_name": "Krishna Pariyar", "link": "https://stackoverflow.com/users/4216155/krishna-pariyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535382811, "creation_date": 1535299314, "last_edit_date": 1535299910, "question_id": 52027969, "link": "https://stackoverflow.com/questions/52027969/setting-dropbox-as-custom-backp-on-whm-cpanel-error", "title": "setting dropbox as custom backp on whm/cpanel error", "body": "<p>I am trying to set dropbox as custom backup destination following below cpanel blog. The connection is working, but the backup files are not being transferred to DropBox. And when I press validate to custom backup destination it gives following error . </p>\n\n<p><a href=\"https://blog.cpanel.com/cpanel-whm-custom-backup-transport-example-dropbox/\" rel=\"nofollow noreferrer\">https://blog.cpanel.com/cpanel-whm-custom-backup-transport-example-dropbox/</a></p>\n\n<pre><code>Error: Validation for transport \u201cdropbox\u201d failed: Could not list files in \ndestination: Executed /usr/local/bin/backup_transport_dropbox.pl ls / \nremotehost remoteuser : 2018-08-26T15:54:21 [WebService::Dropbox] [ERROR] \nhttps://api.dropboxapi.com/2/files/list_folder {\"path\":\"/\"} -&gt; [400] Error in \ncall to API function \"files/list_folder\": request body: path: Specify the root \nfolder as an empty string rather than as \"/\". at \n/usr/local/share/perl5/WebService/Dropbox.pm line 184.\n</code></pre>\n\n<p>I am new to dropbox api and have no idea of perl so could not figure out what is discusses on below links.</p>\n\n<p><a href=\"https://github.com/silexlabs/unifile/issues/77\" rel=\"nofollow noreferrer\">https://github.com/silexlabs/unifile/issues/77</a></p>\n"}, {"tags": ["perl", "oop", "method-call"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 10276308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf54139b76d8967c960558bf961ae3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Henri Mirton", "link": "https://stackoverflow.com/users/10276308/henri-mirton"}, "edited": false, "score": 0, "creation_date": 1535296034, "post_id": 52027427, "comment_id": 91005195, "body": "Yes, it would be the &quot;normal way&quot; to do it, but I&#39;m only provided the <code>$obj</code> reference and I don&#39;t know the class of the object."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535295302, "creation_date": 1535295302, "answer_id": 52027427, "question_id": 52027313, "link": "https://stackoverflow.com/questions/52027313/call-method-without-self-parameter-in-perl/52027427#52027427", "title": "Call method without self parameter in Perl", "body": "<p>You would just call the function directly, and not as a method of an object:</p>\n\n<pre><code>myPackage::test(\"str\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 8, "last_activity_date": 1535298065, "last_edit_date": 1535298065, "creation_date": 1535297727, "answer_id": 52027768, "question_id": 52027313, "link": "https://stackoverflow.com/questions/52027313/call-method-without-self-parameter-in-perl/52027768#52027768", "title": "Call method without self parameter in Perl", "body": "<p>It's a little unorthodox, but <a href=\"https://metacpan.org/pod/UNIVERSAL#$obj-%3Ecan(-METHOD-)\" rel=\"noreferrer\"><code>UNIVERSAL::can</code></a> returns a code reference that you could call without the referent.</p>\n\n<pre><code>$obj-&gt;can(\"test\")-&gt;(\"str\");\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10276308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf54139b76d8967c960558bf961ae3d3?s=128&d=identicon&r=PG&f=1", "display_name": "Henri Mirton", "link": "https://stackoverflow.com/users/10276308/henri-mirton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 52027768, "answer_count": 2, "score": 3, "last_activity_date": 1535298065, "creation_date": 1535294432, "question_id": 52027313, "link": "https://stackoverflow.com/questions/52027313/call-method-without-self-parameter-in-perl", "title": "Call method without self parameter in Perl", "body": "<p>I would like to know if it is possible to call a method from an object without passing the self argument.</p>\n\n<p>As an example, I have a package:</p>\n\n<pre><code>package MyPackage;\n\nsub new {\n    my $class = shift;\n    return bless {}, $class;\n}\n\nsub test {\n    print(\"called(\" . join(', ', @_) . \")\\n\");\n}\n</code></pre>\n\n<p>From a script, I call the constructor and then the <code>test</code> method:</p>\n\n<pre><code>my $obj = MyPackage-&gt;new();\n$obj-&gt;test(\"str\");\n</code></pre>\n\n<p>giving me the following output:</p>\n\n<pre><code>called(MyPackage=HASH(0x55b05d481f48), str)\n</code></pre>\n\n<p>Is there any way (even if it's not a best practice or use some \"arcane\"\nfeatures of the language) to call the <code>test</code> method using only the reference\n<code>$obj</code> without having the \"self\"-parameter passed implicitly.</p>\n\n<p>In a word, is it possible to do something like this:</p>\n\n<pre><code>$objXXXXtest(\"str\");\n</code></pre>\n\n<p>with <code>XXXX</code> the hypothetical construct and get <code>called(str)</code> as output?</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535286522, "post_id": 52025433, "comment_id": 91002608, "body": "Use the prepared statement, but disable autocommit after every execute."}, {"owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535286722, "post_id": 52025433, "comment_id": 91002674, "body": "@Borodin: I tried it, and it was faster, but it still needed more than 1 hour."}, {"owner": {"reputation": 27828, "user_id": 5563083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab25f269dc3fd3b4a657ddd27cf8f349?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Spiegel", "link": "https://stackoverflow.com/users/5563083/paul-spiegel"}, "edited": false, "score": 0, "creation_date": 1535291477, "post_id": 52025433, "comment_id": 91003949, "body": "Why don&#39;t you use <code>LOAD DATA INFILE</code>?"}, {"owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "reply_to_user": {"reputation": 27828, "user_id": 5563083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab25f269dc3fd3b4a657ddd27cf8f349?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Spiegel", "link": "https://stackoverflow.com/users/5563083/paul-spiegel"}, "edited": false, "score": 0, "creation_date": 1535293457, "post_id": 52025433, "comment_id": 91004476, "body": "@PaulSpiegel: As far as I understand, LOAD DATA INFILE seems to be vulnerable too, so it seems to have the same security risks as my program 2."}, {"owner": {"reputation": 27828, "user_id": 5563083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab25f269dc3fd3b4a657ddd27cf8f349?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Spiegel", "link": "https://stackoverflow.com/users/5563083/paul-spiegel"}, "edited": false, "score": 0, "creation_date": 1535293971, "post_id": 52025433, "comment_id": 91004628, "body": "&quot;vulnerable&quot; - how? The data is never part of the query. Any sql code in the file will be just inserted into the table or will cause a parse error."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535308943, "post_id": 52025433, "comment_id": 91008760, "body": "<i>&quot;it still needed more than 1 hour&quot;</i> It should be hugely faster. You&#39;ll have to show your code."}, {"owner": {"reputation": 1853, "user_id": 1005136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa4e79e60474302c8225172649cbd35?s=128&d=identicon&r=PG", "display_name": "Alexander Hartmaier", "link": "https://stackoverflow.com/users/1005136/alexander-hartmaier"}, "edited": false, "score": 0, "creation_date": 1536128375, "post_id": 52025433, "comment_id": 91306612, "body": "This is also slow because of the round-trip time between the host executing the queries and the database server. By executing less queries the rtt will be added a lot less often."}], "answers": [{"comments": [{"owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "edited": false, "score": 0, "creation_date": 1535285275, "post_id": 52025549, "comment_id": 91002300, "body": "I already have been thinking of this solution, but your solutions has two problems: 1) When I use a SQL-statement with 5000 question marks, I will need to hand over 5000 variables in the execution-commant, which is one single Perl-statement. This would be a VERY long line of code! 2) For the non-5000 rest at the end: I need to build the SQL statement with the right numner of question marks (which is easy in a loop) but I also need <b>one single Perl-command</b> with a variable number of parameters. (The number is variable at runtime!) I have no idea how to solve this problem."}, {"owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "edited": false, "score": 0, "creation_date": 1535285702, "post_id": 52025549, "comment_id": 91002404, "body": "As far as I understand, <code>LOAD DATA INFILE</code> seems to be vulnerable too, so it seems to have the same security risks as my <i>program 2</i>."}, {"owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "edited": false, "score": 0, "creation_date": 1535287897, "post_id": 52025549, "comment_id": 91002965, "body": "I found a way to solve the problem. But I can&#39;t explain in a comment, so I will write an answer to my own question. My solution uses your idea. So thank you for that!"}], "tags": [], "owner": {"reputation": 6731, "user_id": 725163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Kgxeq.jpg?s=128&g=1", "display_name": "e.dan", "link": "https://stackoverflow.com/users/725163/e-dan"}, "is_accepted": false, "score": 3, "last_activity_date": 1535280976, "creation_date": 1535280976, "answer_id": 52025549, "question_id": 52025433, "link": "https://stackoverflow.com/questions/52025433/prepared-statement-for-fast-mass-insert/52025549#52025549", "title": "prepared statement for fast mass insert", "body": "<p>Your little note in italics is actually quite relevant:</p>\n\n<blockquote>\n  <p><em>(This is simplified, since the SQL statement would become too long to be accepted by MySQL. You need to split it up in sections of about 5000 values and execute them. But this is not important for the problem I'm talking about here.)</em></p>\n</blockquote>\n\n<p>I think your \"unprepared statement\" (not a real term) approach is faster because you're bulk-loading 5000 records at a time rather than one-by-one, not because it's not a prepared statement.</p>\n\n<p>Try building a prepared statement with 5000 <code>?</code>s like this:</p>\n\n<pre><code>my $SQL = 'INSERT INTO `mytable`(`word`) VALUES ' . '(?),'x4999 . '(?)';\n</code></pre>\n\n<p>Then build a list of 5000 words at a time and execute your prepared statement with that.  You'll have to deal with the last set of (presumably) less than 5000 words with a second dynamically-generated prepared statement of the appropriate number of words in the last batch.</p>\n\n<p>You could also look into <code>LOAD DATA INFILE</code> for bulk loading.</p>\n"}, {"comments": [{"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1535293548, "post_id": 52026595, "comment_id": 91004499, "body": "I would consider generalizing this to build chunks of the right size ( e.g. via splice ), then build a function to insert a chunk. This seems like a useful generalization, I&#39;ve used it talking to other (non-SQL) backends, it seems clearer and easier to change the chunk size without understanding the code."}], "tags": [], "owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "is_accepted": false, "score": 1, "last_activity_date": 1535289219, "creation_date": 1535289219, "answer_id": 52026595, "question_id": 52025433, "link": "https://stackoverflow.com/questions/52025433/prepared-statement-for-fast-mass-insert/52026595#52026595", "title": "prepared statement for fast mass insert", "body": "<p><sup><em>(This answer is written be the author of the question.)</em></sup></p>\n\n<p>e.dan brought me to the right idea with <a href=\"https://stackoverflow.com/a/52025549/1302716\">his answer</a>, so thank you, e.dan!</p>\n\n<p>Here is the fast solution that uses prepared statements:</p>\n\n<pre><code># The code above the SQL-Statement is exactly\n# the same as in the 1st program in the question\n#-------------------------------------------------\n# SQL statement\nmy $SQL = 'INSERT INTO `mytable`(`word`) VALUES ';\n# Counter\nmy $cnt   = 0;\n# initiate comma with empty string\nmy $comma = '';\n# An array to store the parameters (This array does the trick!)\nmy @param = ();\n# loop through all words\nforeach my $word (@list) {\n    # (no escaping needed)\n    # attach a question mark in brackets to the query string\n    $SQL .= $comma.\"(?)\";\n    # and push the value into the parameter-array\n    push(@param,$word);\n    # next time it must be a comma\n    $comma = ',';\n    # increment the counter\n    $cnt++;\n    # limit reached?\n    if ($cnt &gt;= 5000) {\n        # Yes, limit reached\n        # prepare the string with 5000 question marks\n        my $SH = $dbh-&gt;prepare($SQL);\n        # hand over a list of 5000 values and execute the prepared statement\n        # (for Perl a comma separated list and an array are equal\n        # if used as parameter for a function call)\n        $SH-&gt;execute(@param);\n        # Reset the variables\n        $SQL = 'INSERT INTO `mytable`(`word`) VALUES ';\n        $cnt = 0;\n        $comma = '';\n        @param = ();\n    }\n}\n# is there something left at the end?\nif ($comma ne '') {\n    # Yes, there is something left at the end\n    # prepare the string with many (but less than 5000) question marks\n    my $SH = $dbh-&gt;prepare($SQL);\n    # hand over the list of values and execute the prepared statement\n    $SH-&gt;execute(@param);\n}\n# disconnect from database\n$dbh-&gt;disconnect;\n# end of program\nexit(0);\n</code></pre>\n\n<p>The trick is, that, when you call a function or a method in Perl, you can hand over the parameters as scalars that are separated by commas:</p>\n\n<pre><code>object-&gt;method($scalar1, $scalar2, $scalar3);\n</code></pre>\n\n<p>But you can also hand over an array:</p>\n\n<pre><code>my $@array = ($scalar1, $scalar2, $scalar3);\nobject-&gt;method(@array);\n</code></pre>\n\n<p>And so, you can use an array to hand over a variable amount of parameters, and you also easily can hand over 5000 (or even more) parameters.</p>\n\n<p><strong>btw:</strong><br>\nThis version was even faster than version 2 from my question.</p>\n"}], "owner": {"reputation": 7788, "user_id": 1302716, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/LrNqp.png?s=128&g=1", "display_name": "Hubert Sch&#246;lnast", "link": "https://stackoverflow.com/users/1302716/hubert-sch%c3%b6lnast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1535289219, "creation_date": 1535280045, "question_id": 52025433, "link": "https://stackoverflow.com/questions/52025433/prepared-statement-for-fast-mass-insert", "title": "prepared statement for fast mass insert", "body": "<h2>In a nutshell</h2>\n\n<p>Is there a way in Perl to use prepared statements (to prevent SQL injection) to insert 1 million records within less than 2 minutes into a MySQL-table?</p>\n\n<hr>\n\n<h2>In detail</h2>\n\n<p>There is an online resource (<a href=\"https://dumps.wikimedia.org/dewiktionary/latest/\" rel=\"nofollow noreferrer\">Wikimedia</a>) from which I want to download a file (<em>dewiktionary-latest-all-titles-in-ns0.gz</em>) that contains almost 1 million titles of articles (each article is a descriptions of a German word in Wiktionary). I want to check this list once a week and then react on new or deleted titles. To do this, I want to automatically download this list once a week and insert it into a database.</p>\n\n<p>Although I trust Wikimedia, you never should trust anything coming from internet too much. So, to prevent SQL injection and other security issues, I always use prepared statements in Perl, do make sure, that the SQL interpreter has no chance to interpret content as code.</p>\n\n<p>Normally I would do this this way:</p>\n\n<p><strong>program 1</strong>  </p>\n\n<pre><code>#!/usr/bin/perl -w\n\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\nuse DBI;\n\n# DOWNLOAD FROM INTERNET =========================\n# create User-Agent:\nmy $ua = LWP::UserAgent-&gt;new;\n# read content from Internet\nmy $response = $ua-&gt;get('https://&lt;rest_of_URL&gt;');\n# decode content\nmy $content = $response-&gt;decoded_content;\n\n#turn into a list\nmy @list = split(/\\n/,$content);\n\n# STORE IN DATABASE ==============================\n# connect with database (create DataBase-Handle):\nmy $dbh = DBI-&gt;connect(\n    'DBI:mysql:database=&lt;name_of_DB&gt;;host=localhost',\n    '&lt;user&gt;','&lt;password&gt;',\n    {mysql_enable_utf8mb4 =&gt; 1}\n);\n# SQL statement\nmy $SQL = 'INSERT INTO `mytable`(`word`) VALUES(?)';\n# prepare statement (create Statement Handle)\nmy $SH = $dbh-&gt;prepare($SQL);\n#execute in a loop\nforeach my $word (@list) {\n    $SH-&gt;execute($word);\n}\n# disconnect from database\n$dbh-&gt;disconnect;\n# end of program\nexit(0);\n</code></pre>\n\n<p>Pay attention to this line (line 27):  </p>\n\n<pre><code>my $SQL = 'INSERT INTO `mytable`(`word`) VALUES(?)';\n</code></pre>\n\n<p>There is a question-mark as placeholder in the SQL command line.\nIn the next line this SQL command line is prepared (i.e. an prepared statement is created), and in the loop this statement is executed, which means, that each time a new value ($word) will be inserted into the table, without having any chance to execute this value, because the SQL-interpreter doesn't see this value. So, whatever an attacker might write into the file I downloaded, it never will cause a code injection.</p>\n\n<p><strong>But:</strong><br>\nThis is very slow. The download is done within a few seconds, but the insert-loop is running for more than four hours.</p>\n\n<hr>\n\n<p>There is a faster solution, it goes like this:</p>\n\n<p><strong>program 2</strong>  </p>\n\n<pre><code># The code above the SQL-Statement is exactly\n# the same as in the 1st program\n#-------------------------------------------------\n# SQL statement\nmy $SQL = 'INSERT INTO `mytable`(`word`) VALUES ';  # &lt;== NO '?'!\n# attach values in a loop\n# initiate comma with empty string\nmy $comma = '';\nforeach my $word (@list) {\n    # escape escapecharacter\n    $word =~ s/\\\\/\\\\\\\\/g;\n    # escape quotes\n    $word =~ s/'/\\\\'/g;\n    # put the value in quotes and then in brackets, add the comma\n    # and then append it to the SQL command string\n    $SQL .= $comma.\"('\".$word.\"')\";\n    # comma must be a comma\n    $comma = ',';\n}\n# Now prepare this mega-statement\nmy $SH = $dbh-&gt;prepare($SQL);\n# and execute it without any parameter\n$SH-&gt;execute();\n# disconnect from database\n$dbh-&gt;disconnect;\n# end of program\nexit(0);\n</code></pre>\n\n<p><sup><em>(This is simplified, since the SQL statement would become too long to be accepted by MySQL. You need to split it up in sections of about 5000 values and execute them. But this is not important for the problem I'm talking about here.)</em></sup></p>\n\n<p>This runs very fast. All values (almost 1 million rows in the new table) are inserted within less than 2 minutes, this is more than 100 times faster.</p>\n\n<p>As you can see, I create one big statement, but without placeholders. I write the values directly into the SQL command. I just needed to escape backslashes that would be interpreted as escape characters and single quotation marks that would be interpreted as the end of a string.</p>\n\n<p>But the rest of the values remains unprotected and is visible to the SQL interpreter. A potential attacker might find a way to insert SQL code into the values that will be executed. This can damage my database, or it even might grant the attacker superuser rights. (privilege escalation induced by code injection)</p>\n\n<hr>\n\n<h2>So, here is my question:</h2>\n\n<p>Is there a way to use prepared statements like in program 1 even for statements that are dynamically generated like in program 2?</p>\n\n<p>Or is there another possibility to <strong>fast and secure</strong> insert big amounts of data into a MySQL table?  </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 0, "creation_date": 1535280700, "post_id": 52025244, "comment_id": 91001179, "body": "Is it C#? JavaScript?"}, {"owner": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 1, "creation_date": 1535280881, "post_id": 52025244, "comment_id": 91001214, "body": "And why only 598? 440 is three digits too. Why namely 598?"}, {"owner": {"reputation": 1, "user_id": 4226495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3289bc4b1270fd05a468c5ef52fa0679?s=128&d=identicon&r=PG&f=1", "display_name": "Fokker", "link": "https://stackoverflow.com/users/4226495/fokker"}, "reply_to_user": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 0, "creation_date": 1535280991, "post_id": 52025244, "comment_id": 91001237, "body": "@JohnyL: Number 598 was only an example for me to understand the logic behing the regex,"}, {"owner": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 0, "creation_date": 1535281047, "post_id": 52025244, "comment_id": 91001257, "body": "What language is this?"}, {"owner": {"reputation": 1, "user_id": 4226495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3289bc4b1270fd05a468c5ef52fa0679?s=128&d=identicon&r=PG&f=1", "display_name": "Fokker", "link": "https://stackoverflow.com/users/4226495/fokker"}, "reply_to_user": {"reputation": 5847, "user_id": 3187033, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DfSEN.png?s=128&g=1", "display_name": "JohnyL", "link": "https://stackoverflow.com/users/3187033/johnyl"}, "edited": false, "score": 0, "creation_date": 1535281154, "post_id": 52025244, "comment_id": 91001276, "body": "its regex Perl5"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535286018, "post_id": 52025244, "comment_id": 91002477, "body": "Do you mean you want to find <i>every</i> three-digit number between the markers? Otherwise I don&#39;t see what&#39;s special about 598."}, {"owner": {"reputation": 1, "user_id": 4226495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3289bc4b1270fd05a468c5ef52fa0679?s=128&d=identicon&r=PG&f=1", "display_name": "Fokker", "link": "https://stackoverflow.com/users/4226495/fokker"}, "edited": false, "score": 0, "creation_date": 1535290492, "post_id": 52025244, "comment_id": 91003681, "body": "Every three-digit number that are less than for example 600 or whatever threshold"}], "answers": [{"tags": [], "owner": {"reputation": 1372, "user_id": 2891692, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/2Lf2V.jpg?s=128&g=1", "display_name": "SL5net", "link": "https://stackoverflow.com/users/2891692/sl5net"}, "is_accepted": false, "score": 1, "last_activity_date": 1535279368, "creation_date": 1535279368, "answer_id": 52025353, "question_id": 52025244, "link": "https://stackoverflow.com/questions/52025244/find-specific-number-combination-within-from-and-to-text/52025353#52025353", "title": "find specific number combination within from and to text", "body": "<p>With <code>\\b[0-5]\\d{2}\\b</code> you find all 3 digit number under 600.\nDemo: <a href=\"https://regex101.com/r/0ZSbbY/2\" rel=\"nofollow noreferrer\">https://regex101.com/r/0ZSbbY/2</a></p>\n"}, {"tags": [], "owner": {"reputation": 60, "user_id": 5223577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2a20c32b0a097a308d040f97313a23?s=128&d=identicon&r=PG&f=1", "display_name": "shaurun", "link": "https://stackoverflow.com/users/5223577/shaurun"}, "is_accepted": false, "score": 0, "last_activity_date": 1535310218, "last_edit_date": 1535310218, "creation_date": 1535279599, "answer_id": 52025382, "question_id": 52025244, "link": "https://stackoverflow.com/questions/52025244/find-specific-number-combination-within-from-and-to-text/52025382#52025382", "title": "find specific number combination within from and to text", "body": "<p>If you're searching for a specific number, like one that is close to 600, I would suggest to use regexp to collect all numbers and then use some algorythm to find matching number.</p>\n\n<p>This regexp will help you to check that your string matches pattern and to collect all numbers using group \"number\". </p>\n\n<pre><code>^Start (([^\\d]+ )*((?&lt;number&gt;\\d+) )*)*End$ \n</code></pre>\n\n<p>This simplier regexp will help you to collect numbers without checking all String:</p>\n\n<pre><code>\\d+\n</code></pre>\n\n<p>Iterate trough your numbers collection and find needed one.</p>\n\n<p>Sorry I don't noticed what language do you use to write code snippet.</p>\n"}, {"tags": [], "owner": {"reputation": 28228, "user_id": 7132550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1063981417044495/picture?type=large", "display_name": "Micha\u0142 Turczyn", "link": "https://stackoverflow.com/users/7132550/micha%c5%82-turczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1535281211, "creation_date": 1535281211, "answer_id": 52025563, "question_id": 52025244, "link": "https://stackoverflow.com/questions/52025244/find-specific-number-combination-within-from-and-to-text/52025563#52025563", "title": "find specific number combination within from and to text", "body": "<p>Try this pattern:</p>\n\n<pre><code>(?&lt;=^|\\D)[1-5]?\\d{2}(?!.+Start)(?=\\D.+End)\n</code></pre>\n\n<p><code>(?&lt;=^|\\D)[1-5]?\\d{1,2}</code> this will match all 1- or 2-digit numbers, as they are less than 600. It also findes also 1**, 2**, 3**, 4**, 5** numbers.</p>\n\n<p><code>(?!.+Start)(?=\\D.+End)</code> this lookahead assure that we are <strong>before</strong> <code>End</code> word and <strong>not before</strong> <code>Start</code> word, i.e. between them. It couldn't be done with positive lookbehind as @TimBiegeleisen stated, as it would have variable length.</p>\n\n<p><a href=\"https://regex101.com/r/b6y3gy/1\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 1, "last_activity_date": 1535294087, "creation_date": 1535294087, "answer_id": 52027255, "question_id": 52025244, "link": "https://stackoverflow.com/questions/52025244/find-specific-number-combination-within-from-and-to-text/52027255#52027255", "title": "find specific number combination within from and to text", "body": "<pre><code>#!/usr/bin/perl\nuse Modern::Perl;\nuse Data::Dumper;\n\nmy $str = 'Start 440 3 956 4 603 5 - 6 603 7 440 8 - 9 440 10 956 11 440 12 603 13 2005 14 440 15 598 16 1156 17 946 18 761 19 761 20 946 21 598 22 598 23 1156 24 2057 25 946 26 1194 27 946 28 946 - - - Zurich 2019 M T W T F S S - - - - 1 - 2 1058 3 542 4 852 5 - 6 1517 7 1058 8 - 9 1058 10 848 11 542 12 705 13 1306 14 1058 15 1258 16 2159 17 1617 18 700 19 863 20 700 21 1258 22 1911 23 1911 24 1617 25 1258 26 2759 27 1258 28 1258 - - - End';\n\nmy $threshold = 600;\nmy $re = qr/\n    (?:             # start non capture group\n        Start       # literally\n      |             # OR\n        \\G          # iterate from last match position\n    )               # end group\n    (?:(?!End).)*?  # make sure we don't have \"End\" before to number to find\n    (?&lt;!\\d)         # negative lookbehind, make sure we don't have a digit before\n    (\\d{3})         # 3 digit number\n    (?!\\d)          # negative lookahead, make sure we don't have a digit after\n/x;\n# Retrieve all 3 digit numbers between Start and End\nmy @numbers = $str =~ /$re/g;\n# Select numbers that are less than $threshold. In this case 600\n@numbers = grep { $_  &lt; $threshold } @numbers;\n\nsay Dumper \\@numbers;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>$VAR1 = [\n          440,\n          440,\n          440,\n          440,\n          440,\n          598,\n          598,\n          598,\n          542,\n          542\n        ];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4226495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3289bc4b1270fd05a468c5ef52fa0679?s=128&d=identicon&r=PG&f=1", "display_name": "Fokker", "link": "https://stackoverflow.com/users/4226495/fokker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1535351932, "creation_date": 1535278444, "last_edit_date": 1535351932, "question_id": 52025244, "link": "https://stackoverflow.com/questions/52025244/find-specific-number-combination-within-from-and-to-text", "title": "find specific number combination within from and to text", "body": "<p>I want only a match on a 3 digit number (under 600, in example below \"598\") when a specific number in string is visible between start wording and end wording. With below regular expression I get a match of everything, can anyone help?</p>\n\n<p>Regular expression: <code>(?&lt;=Start)(.*)(?=End)</code>.</p>\n\n<p>Test string:</p>\n\n<p><strong>Start</strong> 440 3 956 4 603 5 - 6 603 7 440 8 - 9 440 10 956 11 440 12 603 13 2005 \n14 440 15 598 16 1156 17 946 18 761 19 761 20 946 21 <strong>598</strong> 22 598 \n23 1156 24 2057 25 946 26 1194 27 946 28 946 - - - Zurich 2019 M T W T F S S - - - - 1 - 2 1058 3 542 4 852 5 - 6 1517 7 1058 8 - 9 1058 10 848 11 542 12 705 13 1306 14 1058 15 1258 16 2159 17 1617 18 700 19 863 20 700 21 1258 22 1911 23 1911 24 1617 25 1258 26 2759 27 1258 28 1258 - - - <strong>End</strong></p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 2, "creation_date": 1535238906, "post_id": 52021951, "comment_id": 90994266, "body": "It looks like you might be dereferencing the hash wrong. Try <code>@{$$main{_SessSeq}}</code> instead of <code>@($$main{_SessSeq})</code>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1535238914, "post_id": 52021951, "comment_id": 90994269, "body": "What does <i>this doesn&#39;t seem to work</i> mean?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535241758, "post_id": 52021951, "comment_id": 90994675, "body": "<code>@{...}</code> to dereference an array ref, not <code>@(...)</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535265194, "post_id": 52021951, "comment_id": 90997760, "body": "Are you dumping in the sub or outside of it? Keep in mind that you populated the <code>$main</code> you created in the sub, but not any similarly named variable outside the sub. If you pass in a reference to an array, the sub will add to the array. If you pass in undef, the sub won&#39;t modify anything in the caller."}, {"owner": {"reputation": 31, "user_id": 10216066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c3ee5e0452bed4206f68426ac0041af?s=128&d=identicon&r=PG&f=1", "display_name": "Frans b", "link": "https://stackoverflow.com/users/10216066/frans-b"}, "edited": false, "score": 0, "creation_date": 1535320232, "post_id": 52021951, "comment_id": 91011396, "body": "The remark of jja helped, i now get the right session. Actually i don&#39;t want to dump something of course i want to access the hash in the array of hashes. so: via my $hash = @{$$main{_SessSeq}}[1] ; i can now access the hash. but if i try @{$$main{_SessSeq}}[1]{name} it gives a compile error so this is not recognized. how can i address it directly?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 10216066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c3ee5e0452bed4206f68426ac0041af?s=128&d=identicon&r=PG&f=1", "display_name": "Frans b", "link": "https://stackoverflow.com/users/10216066/frans-b"}, "edited": false, "score": 0, "creation_date": 1535359999, "post_id": 52022298, "comment_id": 91021396, "body": "Your answer provided me the answer to the problem i had. i now know how to address it"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535243703, "last_edit_date": 1535243703, "creation_date": 1535243347, "answer_id": 52022298, "question_id": 52021951, "link": "https://stackoverflow.com/questions/52021951/looping-through-an-array-of-hashes-in-a-hash/52022298#52022298", "title": "looping through an array of hashes in a hash", "body": "<p>Assuming that your <code>foreach my $ses</code> loop is <em>inside</em> the <code>readAll</code> subroutine, the only thing you are doing wring is to use use parentheses <code>( ... )</code> instead of braces <code>{ ... }</code>in your dereferencing</p>\n\n<p><code>$$main{_SessSeq}</code> would be very much better written in modern terms as <code>$main-&gt;{_SessSeq}</code>, but both evaluate to the same thing: a reference to an array of hashes with the data from a database table row in each hash</p>\n\n<p>The correct loop will look like this</p>\n\n<pre><code>for my $ses ( @{ $main-&gt;{_SessSeq} } ) {\n    print STDERR Dumper $ses;\n}\n</code></pre>\n\n<p>but there is no real advantage over writing just</p>\n\n<pre><code>print STDERR Dumper $main-&gt;{_SessSeq}\n</code></pre>\n\n<p>You say nothing about what <strong><em>this doesn't seem to work</em></strong> might mean, but <code>print Dumper $ses</code> will output the contents of a table row each time around the loop</p>\n\n<p>If you need any further help then you must describe the problem properly, showing the output that you're getting and describing carefully what you expect</p>\n"}], "owner": {"reputation": 31, "user_id": 10216066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c3ee5e0452bed4206f68426ac0041af?s=128&d=identicon&r=PG&f=1", "display_name": "Frans b", "link": "https://stackoverflow.com/users/10216066/frans-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535243703, "creation_date": 1535238661, "last_edit_date": 1535241721, "question_id": 52021951, "link": "https://stackoverflow.com/questions/52021951/looping-through-an-array-of-hashes-in-a-hash", "title": "looping through an array of hashes in a hash", "body": "<p>I have the following code that uses references to hashes:</p>\n\n<pre><code>sub readAll {\n   my ( $main, $dbh ) = @_;\n\n   my @SessSeq = ();\n   my $sql;\n   my $rec = 0;\n   $sql  = \"SELECT * FROM sys_table \";\n   my $sth = PrepAndExecuteQuery( $dbh, $sql );\n   while ( my $result = $sth-&gt;fetchrow_hashref() ){\n      push @SessSeq, $result;\n      $rec++;\n   }\n   $$main{_SessSeq} = \\@SessSeq;\n}\n</code></pre>\n\n<p>Above code works. i get an array of hashes in the main hash\nI'm struggling to retrieve the data due to my lack of knowledge.\nthis doesnt seem to work:</p>\n\n<pre><code>foreach my $ses ( @($$main{_SessSeq}) ){\n    print STDERR Dumper $ses;\n}\n</code></pre>\n\n<p>what am i doing wrong?</p>\n"}, {"tags": ["perl", "module", "installation"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535241665, "post_id": 52021890, "comment_id": 90994663, "body": "Change <code>eval { require &quot;test&#47;classtest.pm&quot; } </code> to just <code>require &quot;test&#47;classtest.pm&quot; </code> and see if the <code>eval ...</code> is hiding any more errors."}, {"owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535245564, "post_id": 52021890, "comment_id": 90995122, "body": "this returns with: &quot;Can&#39;t locate test/classtest.pm in @INC  (you may need to install the test::classtest module)...&lt;snip&gt;&quot;. there is no such module."}, {"owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535246308, "post_id": 52021890, "comment_id": 90995209, "body": "because I have little idea of what I am doing I changed <code>require &quot;test&#47;classtest.pm&quot;</code> to <code>require &quot;.&#47;test&#47;classtest.pm&quot;</code>  which brought me to:&#39;Unescaped left brace in regex is illegal here in regex; marked by &lt;-- HERE in m/(\\S)( { &lt;-- HERE ) (\\S)/ at blib/lib/Class/HPLOO.pm line 1077. Compilation failed in require at ./test/classtest.pm line 2.&quot;"}, {"owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535247373, "post_id": 52021890, "comment_id": 90995325, "body": "One by one, following the errors, in each location having &quot;eval { require &lt;snip&gt; }&quot; I changed it to &quot;require ./&lt;snip&gt;&quot;. Eventually completing all tests without error. I returned through the file returning the &quot;eval { &lt;snip&gt; }&quot;. Again it completed all tests without error and I was able to move on to &quot;make install&quot; without visible faults.  Of course this leads me to the question of: what has changed where I needed to add the ./ at these location when once upon a time it was a working module? Although obviously not for me."}, {"owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535248306, "post_id": 52021890, "comment_id": 90995450, "body": "Mob, in my excitement of success I neglected to thank you. So, Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "edited": false, "score": 0, "creation_date": 1535253873, "post_id": 52022688, "comment_id": 90996137, "body": "Thanks Mob, I forgot about the unescaped left brace!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1535249851, "creation_date": 1535249851, "answer_id": 52022688, "question_id": 52021890, "link": "https://stackoverflow.com/questions/52021890/perl-module-classhploo-v0-23-install-issue-2/52022688#52022688", "title": "perl module Class::HPLOO v0.23 install issue #2", "body": "<p>There are three issues with <code>Class::HPLOO</code> (which as I noted before, hasn't been updated since 2005) that make it fail with modern perls.</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/52008870/perl-module-classhploo-v0-23-install-issue\">As discovered in the previous post</a>, \nthe obsolete construct <code>defined (@array)</code> is used once in <code>lib/Class/HPLOO.pm' and three times in</code>lib/Class/HPLOO/Base.pm`. This construction has been prohibited since v5.22</p></li>\n<li><p>The current directory (<code>.</code>) is no longer in <code>@INC</code> (as of v5.24, I think). So the lines in <code>test.pl</code> like</p>\n\n<pre><code>require \"test/classtest.pm\"\n</code></pre></li>\n</ol>\n\n<p>either all need to be rewritten as</p>\n\n<pre><code>    require \"./test/classtest.pm\"\n</code></pre>\n\n<p>or an easier fix is to put</p>\n\n<pre><code>    use lib '.';\n</code></pre>\n\n<p>at the top of the script.</p>\n\n<ol start=\"3\">\n<li><p>There is a regular expression in <code>lib/Class/HPLOO.pm</code>, line 1077, with an \"unescaped left brace\"</p>\n\n<pre><code>  $sub =~ s/(\\S)( {) (\\S)/$1$2\\n$FIRST_SUB_IDENT  $3/gs ;\n</code></pre></li>\n</ol>\n\n<p><code>{</code> is a regex metacharacter, and since v5.22 it has been illegal to use it in a context where it is not indicating a quantity. The fix, as the error message suggests, is to escape it.</p>\n\n<pre><code>      $sub =~ s/(\\S)( \\{) (\\S)/$1$2\\n$FIRST_SUB_IDENT  $3/gs ;\n</code></pre>\n\n<p>Make these three changes to the code you download from CPAN and the module should build on modern Perls. If you're feeling helpful, you can submit a bug report (linking to this post, if you want) or even a patch with an email to <code>bug-Class-HPLOO@rt.cpan.org</code></p>\n"}, {"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567328266, "post_id": 55416367, "comment_id": 101927399, "body": "Great! May also consider sending a patch to <code>bug-Class-HPLOO@rt.cpan.org</code> so the issue can be fixed in the official distribution also?"}], "tags": [], "owner": {"reputation": 1518, "user_id": 332348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/694d53039b1ff43bdfcd2033c90a1647?s=128&d=identicon&r=PG", "display_name": "echo", "link": "https://stackoverflow.com/users/332348/echo"}, "is_accepted": false, "score": 1, "last_activity_date": 1567410015, "last_edit_date": 1567410015, "creation_date": 1553858535, "answer_id": 55416367, "question_id": 52021890, "link": "https://stackoverflow.com/questions/52021890/perl-module-classhploo-v0-23-install-issue-2/55416367#55416367", "title": "perl module Class::HPLOO v0.23 install issue #2", "body": "<p>come across this issue today, so I fixed it following the answer above. if anyone want to save some time.</p>\n\n<p>I create a repo with the changes. <a href=\"https://github.com/swuecho/Class_HPLOO.git\" rel=\"nofollow noreferrer\">https://github.com/swuecho/Class_HPLOO.git</a></p>\n"}], "owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 52022688, "answer_count": 2, "score": 2, "last_activity_date": 1567410015, "creation_date": 1535238093, "last_edit_date": 1535315829, "question_id": 52021890, "link": "https://stackoverflow.com/questions/52021890/perl-module-classhploo-v0-23-install-issue-2", "title": "perl module Class::HPLOO v0.23 install issue #2", "body": "<p>Having the exact issue as described at:  <a href=\"https://stackoverflow.com/questions/52008870/perl-module-classhploo-v0-23-install-issue\">perl module Class::HPLOO v0.23 install issue</a>, I have attempted to correct the <code>defined(@array)</code> problem by editing to just <code>(@array)</code> and trying to rebuild the module. However I continue to get the return of:</p>\n\n<pre><code>$ make clean\n$ perl Makefile.PL\n$ make\n$ make test: *** No rule to\nmake target `clean:'.  Stop. Manifying 2 pod documents\nPERL_DL_NONLAZY=1 \"/opt/local/bin/perl5.26\" \"-Iblib/lib\" \"-Iblib/arch\"\ntest.pl\n1..42\n# Running under perl version 5.026002 for darwin\n# Current time local: Sun Aug 26 06:48:26 2018\n# Current time GMT:   Sat Aug 25 22:48:26 2018\n# Using Test.pm version 1.26 not ok 1\n# Failed test 1 in test.pl at line 9\n#  test.pl line 9 is:   ok(!$@) ; Can't locate object method \"new\" via package \"Foo\" at test.pl line 11. make: *** [test_dynamic] Error 2\n</code></pre>\n"}, {"tags": ["mongodb", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535237688, "post_id": 52016490, "comment_id": 90994088, "body": "What is the source of your data? In particular, what are the <code>ObjectId(...)</code> items? These make it invalid JSON, and there&#39;s not much you can do without sanitising it first."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535237838, "post_id": 52018302, "comment_id": 90994104, "body": "<i>&quot;I fixed up your data to make it JSON but that&#39;s not a big deal&quot;</i> I would have thought it was a <i>very</i> big deal, depending on what <code>ObjectId(...)</code> means. I don&#39;t think you can just strip those out without confirming with the OP, and even if you do you should be writing code to do it instead of just starting with a fixed version of the input."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1535239368, "post_id": 52018302, "comment_id": 90994339, "body": "The data weren&#39;t the important thing. It&#39;s getting at all the elements from an array of hashes that&#39;s in question. Once anyone knows how to do that, they can adjust that for their situation. Furthermore, it&#39;s quite obvious that the data used in the OP code example isn&#39;t that data."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1535207931, "creation_date": 1535207931, "answer_id": 52018302, "question_id": 52016490, "link": "https://stackoverflow.com/questions/52016490/perl-get-array-element-from-mongodb/52018302#52018302", "title": "Perl get array element from mongodb", "body": "<p>You are almost there. First, I fixed up your data to make it JSON but that's not a big deal:</p>\n\n<pre><code>my $json = q([{\n    \"_id\" : \"5b7fdb050cc3c23478005741\",\n    \"DBName\" : \"sample\",\n    \"DBServerURL\" : \"mongodb://localhost:27017/\",\n    \"Type\" : [\n        {\n            \"_id\" : \"5b801dc963f8c81df83891bd\"\n        },\n        {\n            \"_id\" : \"5b801dc963f8c81df83891be\"\n        },\n        {\n            \"_id\" : \"5b801dc963f8c81df83891bf\"\n        },\n        {\n            \"_id\" : \"5b801dc963f8c81df83891c0\"\n        }\n    ]\n} ]);\n\nuse JSON::XS;\nmy $perl = decode_json( $json );\n</code></pre>\n\n<p>That's a JSON array so you can go through it one element at a time. In Perl that shows up as an array reference Using the <a href=\"https://www.effectiveperlprogramming.com/2014/09/use-postfix-dereferencing/\" rel=\"nofollow noreferrer\">postfix dereference</a> introduced in v5.20 makes this palatable (but not so hard without it):</p>\n\n<pre><code>while(my $cur = shift $perl-&gt;@*){   # or @$perl\n    my $cid = $cur-&gt;{_id} ;\n    my $url = $cur-&gt;{DBServerURL} ;\n    my $name = $cur-&gt;{DBName} ;\n    foreach my $hash ( $cur-&gt;{Type}-&gt;@* ) {  # or @{ $cur-&gt;{Type} }\n        my $jid = $hash-&gt;{_id};\n        print \"$cid : $jid : $url : $name\\n\" ;\n    }\n}\n</code></pre>\n\n<p>The trick is that the <code>$jid</code> stuff is in another array and you want to go through those individually.  There's a <code>foreach</code> inside the <code>while</code> to do that. It runs once for each of those and outputs the lines.</p>\n"}], "owner": {"reputation": 47, "user_id": 3722133, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/82477ee67e2a1889eebe4bafe8422fff?s=128&d=identicon&r=PG&f=1", "display_name": "Paddy", "link": "https://stackoverflow.com/users/3722133/paddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1535207931, "creation_date": 1535193791, "last_edit_date": 1535206990, "question_id": 52016490, "link": "https://stackoverflow.com/questions/52016490/perl-get-array-element-from-mongodb", "title": "Perl get array element from mongodb", "body": "<p>I wanted to fetch array element and store in Perl variable. If I put <code>0</code> in replace of <code>?</code> in <code>$cur-&gt;{Type}[?]-&gt;{_id}</code> I'm able to get only one array element but I want all. below is my collection</p>\n\n<pre><code>{\n    \"_id\" : ObjectId(\"5b7fdb050cc3c23478005741\"),\n    \"DBName\" : \"sample\",\n    \"DBServerURL\" : \"mongodb://localhost:27017/\",\n    \"Type\" : [\n        {\n            \"_id\" : ObjectId(\"5b801dc963f8c81df83891bd\")\n        },\n        {\n            \"_id\" : ObjectId(\"5b801dc963f8c81df83891be\")\n        },\n        {\n            \"_id\" : ObjectId(\"5b801dc963f8c81df83891bf\")\n        },\n        {\n            \"_id\" : ObjectId(\"5b801dc963f8c81df83891c0\")\n        }\n    ]\n}\n</code></pre>\n\n<p>I'm trying to get <code>ObjectId</code> from all fields</p>\n\n<pre><code>$cursor = $CustColl-&gt;find(\n    {DBName =&gt; \"sample\",DBServerURL =&gt; \"mongodb://localhost:27017/\"},{'_id' =&gt; 1, 'Type.$._id' =&gt; 1, 'DBServerURL' =&gt; 1, 'DBName' =&gt; 1}\n);\nwhile(my $cur = $cursor-&gt;next){\n    my $cid = \"$cur-&gt;{_id}\" ;\n    my $jid = \"$cur-&gt;{Type}[?]-&gt;{_id}\" ;\n    my $url = \"$cur-&gt;{DBServerURL}\" ;\n    my $name = \"$cur-&gt;{DBName}\" ;\n    print \"$cid : $jid : $url : $name\\n\" ;\n}\n</code></pre>\n\n<p>I wanted an output like below:</p>\n\n<pre><code>5b7fdb050cc3c23478005741 : 5b801dc963f8c81df83891bd : mongodb://localhost:27017/ sample\n5b7fdb050cc3c23478005741 : 5b801dc963f8c81df83891be : mongodb://localhost:27017/ sample\n5b7fdb050cc3c23478005741 : 5b801dc963f8c81df83891bf : mongodb://localhost:27017/ sample\n5b7fdb050cc3c23478005741 : 5b801dc963f8c81df83891c0 : mongodb://localhost:27017/ sample\n</code></pre>\n"}, {"tags": ["c", "regex", "perl", "c-preprocessor"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1535153283, "post_id": 52012766, "comment_id": 90976460, "body": "That&#39;ll also print out every line that uses the macro. You need to include the <code>#define</code> part in your regular expression. Also, look up <i>capturing groups</i> and how to match a number."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1535172523, "post_id": 52012766, "comment_id": 90978687, "body": "You can use <code>gcc</code> to get the definitions in a clean format: <code>gcc -E -dM hdr.h | grep __SOFTWARE_REVISION__</code>. Unless you have some other reason to use Perl for this problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1535179642, "post_id": 52012766, "comment_id": 90979775, "body": "Following the comment by @rici I&#39;d perhaps recommend to use <code>gcc</code> to extract defines. (And then pick out the one you need in Perl. I am assuming that this comes up in a Perl program; I wouldn&#39;t choose Perl for just this.)  Added a comment to my answer."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1535316234, "post_id": 52012766, "comment_id": 91010624, "body": "A particular heinous approach would involve using <code>h2xs</code> for it&#39;s true purpose of converting C header files to Perl&#39;s XS glue. But, don&#39;t do that. :)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10271618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UfauRoOvuAs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNw9iHXhGshn8ANuLUfhj62YXyeEg/mo/photo.jpg?sz=128", "display_name": "brbni", "link": "https://stackoverflow.com/users/10271618/brbni"}, "edited": false, "score": 0, "creation_date": 1535382728, "post_id": 52012829, "comment_id": 91035292, "body": "Is there a need for unix end of line format? I am running windows perl and both ggorlen and zdim examples produce no output. The gcc method might be used with grep regex? No success with it also."}, {"owner": {"reputation": 11, "user_id": 10271618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UfauRoOvuAs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNw9iHXhGshn8ANuLUfhj62YXyeEg/mo/photo.jpg?sz=128", "display_name": "brbni", "link": "https://stackoverflow.com/users/10271618/brbni"}, "edited": false, "score": 0, "creation_date": 1535389291, "post_id": 52012829, "comment_id": 91038618, "body": "End up doing: grep &quot;&#40;[0-9][0-9][0-9]&#41;&quot; versions.h | tail -c6"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "reply_to_user": {"reputation": 11, "user_id": 10271618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UfauRoOvuAs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNw9iHXhGshn8ANuLUfhj62YXyeEg/mo/photo.jpg?sz=128", "display_name": "brbni", "link": "https://stackoverflow.com/users/10271618/brbni"}, "edited": false, "score": 0, "creation_date": 1535390096, "post_id": 52012829, "comment_id": 91038951, "body": "I&#39;m on Strawberry Perl on Win 10 (This is perl 5, version 26, subversion 1 (v5.26.1) built for MSWin32-x64-multi-thread). Is it loading the file working OK (i.e. can you just print)?"}], "tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 2, "last_activity_date": 1535154855, "last_edit_date": 1535154855, "creation_date": 1535153484, "answer_id": 52012829, "question_id": 52012766, "link": "https://stackoverflow.com/questions/52012766/perl-how-to-extract-defined-number-from-c-header-file/52012829#52012829", "title": "perl how to extract #define&#39;d number from C header file", "body": "<p>Here's an approach using regex to capture the version number if present in a line. Note that parenthesis in the regex delimit the capturing group and the variable <code>$1</code> is used to access the capture.</p>\n\n<pre><code>#!perl -w\nuse warnings;\nuse strict;\n\nmy $file = shift @ARGV;\nopen my $fh, \"&lt;\", $file or die $!;\n\nwhile (&lt;$fh&gt;) {\n    print \"$1\\n\" if /^#define +__SOFTWARE_REVISION__ +(\\d+)$/;\n}\n\nclose $fh;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>100\n</code></pre>\n\n<p>The regex is more selective than yours, which matches any instance of <code>__SOFTWARE_REVISION__</code> in a line. This regex matches <code>#define</code> at the beginning of line, followed by one or more spaces, followed by <code>__SOFTWARE_REVISION__</code>, followed by one or more spaces, followed by a one or more digit capturing group at the end of the line.</p>\n"}, {"comments": [{"owner": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1535161742, "post_id": 52012831, "comment_id": 90977531, "body": "There could be space after <code>#</code> and before <code>define</code>, so make it <code>#\\s*</code>. You could also technically have comments after the <code>#define</code>, but it would be really unlikely. I&#39;d prefer to just not specify any anchor for the end of the line."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2783, "user_id": 782570, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cbbf87d7ce9ed596faa7e64231114991?s=128&d=identicon&r=PG&f=1", "display_name": "giusti", "link": "https://stackoverflow.com/users/782570/giusti"}, "edited": false, "score": 0, "creation_date": 1535179181, "post_id": 52012831, "comment_id": 90979692, "body": "@giusti  Good points, thank you; there is no reason for any constraints on what follows <code>[0-9]+</code> or <code>\\S+</code>. Fixed, and added a note"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1607219331, "last_edit_date": 1607219331, "creation_date": 1535153505, "answer_id": 52012831, "question_id": 52012766, "link": "https://stackoverflow.com/questions/52012766/perl-how-to-extract-defined-number-from-c-header-file/52012831#52012831", "title": "perl how to extract #define&#39;d number from C header file", "body": "<p>The regex matches for any line that contains that literal phrase, not only where it is defined.  You need to specify the line far more precisely, and to <em>capture</em> the needed number.</p>\n<p>The code also proceeds to loop through the file needlessly.</p>\n<p>With a few more adjustments</p>\n<pre><code>use warnings;\nuse strict;\nuse feature qw(say);\n\nmy $file = shift @ARGV;\ndie &quot;Usage: $0 filename\\n&quot; if not $file or not -f $file;\n\nopen my $fh, '&lt;', $file or die &quot;Can't open $file: $!&quot;;\n\nwhile (&lt;$fh&gt;) {\n    if (/^\\s*#\\s*define\\s+__SOFTWARE_REVISION__\\s+([0-9]+)/) {\n        say &quot;Software revision: $1&quot;;\n        last;\n    }\n}\nclose $fh;\n</code></pre>\n<p>If the revision can be other than integer replace <code>[0-9]+</code> with a the pattern <code>[0-9.]+</code> that allows a period, or <code>[0-9.a-z]</code> if (low-case) letters are allowed in versioning ... or simply <code>\\S+</code>.</p>\n<p>I'd suggest to work through the tutorial <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> with reference <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> on hand.</p>\n<hr />\n<p>I assume that this need comes up in a Perl program (and not that Perl is the chosen tool for this).</p>\n<p>Still, note that there are other, more systemic, ways to retrieve this information using the compiler (see a comment on <code>gcc</code> by <a href=\"https://stackoverflow.com/users/1566221/rici\">rici</a> for example).</p>\n<p>While it is better to use Perl in a Perl script rather than go out to the system, <em>this</em> case may be one of exceptions: it may be better to use an external command rather than parse source files, a task well known to be treacherous.</p>\n"}], "owner": {"reputation": 11, "user_id": 10271618, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UfauRoOvuAs/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNw9iHXhGshn8ANuLUfhj62YXyeEg/mo/photo.jpg?sz=128", "display_name": "brbni", "link": "https://stackoverflow.com/users/10271618/brbni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1607219331, "creation_date": 1535152779, "last_edit_date": 1568092286, "question_id": 52012766, "link": "https://stackoverflow.com/questions/52012766/perl-how-to-extract-defined-number-from-c-header-file", "title": "perl how to extract #define&#39;d number from C header file", "body": "<p>I am looking for a Perl snippet to print the number <code>100</code>, contained in a C header, to the terminal.</p>\n\n<pre><code>#ifndef VERSIONS_H\n#define VERSIONS_H\n\n#define __SOFTWARE_REVISION__ 100\n\n#endif\n</code></pre>\n\n<p>I am able to extract the <code>#define</code> line, but the number.</p>\n\n<pre><code>#!perl -w\nuse warnings;\nuse strict;\nmy $line;\nmy $file = shift @ARGV;\nopen my $fh, \"&lt;\", $file or die $!;\nwhile (&lt;$fh&gt;) {\n        print if /__SOFTWARE_REVISION__/;\n}\nclose ($fh);\n</code></pre>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 3, "creation_date": 1535133432, "post_id": 52009547, "comment_id": 90969897, "body": "Add the line <code>print $outdir</code> after you set <code>$outdir</code> for enlightenment. Then familiarize yourself with Perl&#39;s quoting rules and the difference between &quot;double quotes&quot; and &#39;single quotes&#39;."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535133472, "post_id": 52009547, "comment_id": 90969916, "body": "You have <code>use warnings</code> turned on, so Perl should alert you to an issue when you run this script."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1535133710, "post_id": 52009547, "comment_id": 90970025, "body": "$outdir is missing the drive letter. But it does start with a backslash. This may well not be a valid path at all. Have you tried adding the drive letter, for example C: as in <code>C:\\users\\lisa\\desktop\\text</code> ?"}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "reply_to_user": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 3, "creation_date": 1535133825, "post_id": 52009547, "comment_id": 90970076, "body": "With rare exceptions, the win32 apis accept <code>&#47;</code> as a filepath separator these days.  also, @bytepusher - paths beginning with <code>&#47;</code> or `\\` are relative to the current drive, not directory (although you are correct that it&#39;s not <i>always</i> acceptable.  I suspect it&#39;s ok here, though.)"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1535134674, "post_id": 52009547, "comment_id": 90970388, "body": "fair enough. It&#39;s been a while since I had to deal with Windows"}, {"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1535136111, "post_id": 52009547, "comment_id": 90970961, "body": "Never assume any Windows API will support forward slashes for path handling unless explicitly documented."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1535140739, "post_id": 52009547, "comment_id": 90972860, "body": "@kayleeFrye_onDeck, Nonsense. The Windows API accepts <code>&#47;</code> as a directory separator"}, {"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535148440, "post_id": 52009547, "comment_id": 90975434, "body": "@ikegami If you have proof, then I&#39;ll rescind my nonsensical statement :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1535149712, "post_id": 52009547, "comment_id": 90975692, "body": "@kayleeFrye_onDeck, You know how Perl has always let you use <code>&#47;</code>, even on Windows? Well, it was never Perl. Perl simply passes the paths unchanged to the OS. <code>&#47;</code> was a valid directory separator even 20 years ago when I started with Perl 5.6. A quick search found a comment that <code>&#47;</code> has been supported since DOS 2.0!!! (Released in 1983, it the first version to support 5.25&quot; floppy discs)  Do note that many command-line utilities treat &quot;/&quot; as the start of a switch. (e.g. Compare <code>dir c:&#47;users</code> vs <code>dir &quot;c:&#47;users&quot;</code>), but we&#39;re talking about the Windows API."}, {"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1535405793, "post_id": 52009547, "comment_id": 91045489, "body": "You&#39;re saying always, zzxyz says almost always, and neither of you provide literature to verify it. I don&#39;t question your collective experience -- I asked for somewhere that says it&#39;s okay to assume OS functionality being leveraged by Perl is from a WinAPI that is guaranteed to accept <code>&#47;</code> as a path separator."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1535417313, "post_id": 52009547, "comment_id": 91048076, "body": "@kayleeFrye_onDeck, I wasn&#39;t speaking from experience, so your comment is moot. I researched it, and found it was accepted since DOS 2.0. I&#39;m not about to check every single API call to see if one of them doesn&#39;t accept standard Windows paths. That would be silly. DOS and Windows considers <code>&#47;</code> and <code>\\ </code> to be directory separators, and if zzxyz feels some Windows API calls don&#39;t accept Windows paths as a path, it&#39;s up to them to prove it."}, {"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535484669, "post_id": 52009547, "comment_id": 91080571, "body": "Fair enough, @ikegami. It would have been nice to see some of the literature you researched that specified this, but I understand that&#39;s not always possible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 1, "creation_date": 1535487444, "post_id": 52009547, "comment_id": 91081738, "body": "@kayleeFrye_onDeck, Apparently, DOS 2.0 was the first version of DOS that supported directories, so I was a bit misleading when I said &quot;/&quot; has only been supported since DOS 2.0. It would be more accurate to say that DOS and Windows have <i>always</i> supported &quot;/&quot;! Some <a href=\"https://blogs.msdn.microsoft.com/larryosterman/2005/06/24/why-is-the-dos-path-character/\" rel=\"nofollow noreferrer\">history</a> (Apparently, you used to be able to configure DOS to accept &quot;-&quot; instead of &quot;/&quot; for command-line utility switches.)"}, {"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1535502732, "post_id": 52009547, "comment_id": 91085910, "body": "That&#39;s pretty cool! As you mentioned earlier, <code>&#47;</code> won&#39;t work for all built-in CLIs unless you use double-quotes to wrap it. That sort of invalidates Larry&#39;s allusion that they should <i>all</i> work, with his <code>notepad</code> example vs your <code>dir</code> example. However, not wrapping paths with quotes is a bit of a cardinal sin of generic automation (thanks, whitespace!), and as I don&#39;t recommend doing that I submit to your statement with a <i>slight</i> modification; <i>double-quote-wrapped</i> paths can use <code>&#47;</code> safely :) Thanks for pulling that up!"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1535140921, "creation_date": 1535140921, "answer_id": 52011011, "question_id": 52009547, "link": "https://stackoverflow.com/questions/52009547/how-to-move-files-from-a-server-to-the-computer-using-perl/52011011#52011011", "title": "How to move files from a server to the computer using perl", "body": "<pre><code>use strict;\nuse warnings;\n\nmy $dir = \"\\\\172.18\\user\\folder\\folder2\";\nprint(\"$dir\\n\");\n\nmy $outdir = \"\\users\\lisa\\desktop\\test\";\nprint(\"$outdir\\n\");\n</code></pre>\n\n<p>outputs</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Unrecognized escape \\d passed through at a.pl line 7.\n\\172.18Ser?older?older2\nSersisadesktop  est\n</code></pre>\n\n<p>You need to escape your backslashes!</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $dir = \"\\\\\\\\172.18\\\\user\\\\folder\\\\folder2\";\nprint(\"$dir\\n\");\n\nmy $outdir = \"\\\\users\\\\lisa\\\\desktop\\\\test\";\nprint(\"$outdir\\n\");\n</code></pre>\n\n<p>Don't ignore warnings.</p>\n"}, {"tags": [], "owner": {"reputation": 705, "user_id": 6490359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711f0af849e984c1633fe69ae8354b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Silvar", "link": "https://stackoverflow.com/users/6490359/silvar"}, "is_accepted": true, "score": 1, "last_activity_date": 1535150843, "last_edit_date": 1535150843, "creation_date": 1535149629, "answer_id": 52012428, "question_id": 52009547, "link": "https://stackoverflow.com/questions/52009547/how-to-move-files-from-a-server-to-the-computer-using-perl/52012428#52012428", "title": "How to move files from a server to the computer using perl", "body": "<p>After your edit, the script works because the last directory separator in the string happens to be <code>/</code>, which is matched by the <code>\\/</code> in the regular expression. Even though you had <code>\\</code> in the input, the library you used to find the files added <code>/</code>s.</p>\n\n<hr>\n\n<p>I have some suggestions:</p>\n\n<ol>\n<li><p>You can avoid the need to escape (most) backslashes by using single quoted strings, unless you need the interpolation of the double quoted ones.</p>\n\n<p>Escaping backslashes is optional unless followed by a single quote or another backslash:</p>\n\n<pre><code>my $outdir = '\\users\\lisa\\desktop\\test';\n</code></pre>\n\n<p>but</p>\n\n<pre><code>my $outdir = '\\users\\lisa\\desktop\\test\\\\';\n$outdir = '\\users\\lisa\\desktop\\test\\\\\\'ere is a path';\n\nmy $not_a_path = 'three backslashes\\\\\\\\\\in between, all but the last need escaping';\n</code></pre>\n\n<p><code>'ere is a path</code> is the last element in that path.</p></li>\n<li><p>If you're dealing with Windows, consider using <code>[\\\\/]</code> in place of directory separator in regular expressions. (Or <code>[\\\\\\/]</code> if you absolutely must use <code>/</code> as regular expression delimiter.)</p>\n\n<p>Even if you have control over user input to only use <code>\\</code> in paths, libraries you use will usually add <code>/</code>, so it's better to be prepared for a combination of both.</p>\n\n<pre><code>$file =~ /(.*[\\\\\\/])(.*)/;\n$file =~ m{(.*[\\\\/])(.*)};\n$file =~ m\u00a4(.*[\\\\/])(.*)\u00a4;\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>I also removed the superfluous quotes from around <code>$file</code> in the <code>copy()</code> call. Final result:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nuse File::Copy;\n\n# directory where files live\nmy $dir = '\\\\172.18\\user\\folder\\folder2';\n\n# directory where TextGrids will be moved to\nmy $outdir = 'C:\\Users\\lisa\\desktop\\test';\n\nmy @files;\n\n@files = File::Find::Rule   -&gt; file()\n                            -&gt; name(\"*_clean.TextGrid\")\n                            -&gt; maxdepth()\n                            -&gt; in($dir);\n\nforeach my $file (@files) {\n    print \"$file\\n\";\n    $file =~ /(.*[\\\\\\/])(.*)/;\n    my $name = $2;\n    copy($file, \"$outdir\\\\$name\") or die \"Copy failed: $!\";\n}\n</code></pre>\n"}], "owner": {"reputation": 728, "user_id": 5209289, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3874e84d81711bf6751461e0be235976?s=128&d=identicon&r=PG&f=1", "display_name": "Lisa", "link": "https://stackoverflow.com/users/5209289/lisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 52012428, "answer_count": 2, "score": 1, "last_activity_date": 1535150843, "creation_date": 1535133197, "last_edit_date": 1535135744, "question_id": 52009547, "link": "https://stackoverflow.com/questions/52009547/how-to-move-files-from-a-server-to-the-computer-using-perl", "title": "How to move files from a server to the computer using perl", "body": "<p>I want to move files from a server that my Windows computer is connected to, to the actual computer. I have tried the code on my mac and it works fine, so I suspect the problem has to do with the fact that the files I wish to move are on a server or perhaps with Windows (I am unfamiliar with this OS). It is important to me to be able to use <code>File::Find::Rule</code> because there are many subdirectories within subdirectories that need to be searched.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nuse File::Copy;\n\n# directory where files live\n# my $dir = \"\\\\172.18\\user\\folder\\folder2\";\n\n# directory where TextGrids will be moved to\nmy $outdir = \"\\users\\lisa\\desktop\\test\";\n\nmy @files;\n\n@files = File::Find::Rule   -&gt; file()\n                             -&gt; name(\"*_clean.TextGrid\")\n                             -&gt; maxdepth()\n                             -&gt; in($dir);\n\nforeach my $file (@files) {\n    $file =~ /(.*\\\\)(.*)/;\n    my $name = $2;\n    copy(\"$file\", \"$outdir/$name\") or die \"Copy failed: $!\";\n    }\n</code></pre>\n\n<p>Edit: Ok, I've made some changes to the script below. But the strange thing is, that when I ask it to print each file, it gives me something like <code>\\\\172.18\\user\\folder\\folder/255/file.txt</code>. I changed the regex to be <code>(.*\\/)(.*)</code> and now the script works perfectly, though I don't know why!</p>\n\n<pre><code>use strict;\nuse warnings;\nuse File::Find::Rule;\nuse File::Copy;\n\n# directory where files live\nmy $dir = \"\\\\\\\\172.18\\\\user\\\\folder\\\\folder2\";\n\n# directory where TextGrids will be moved to\nmy $outdir = \"C:\\\\Users\\\\lisa\\\\desktop\\\\test\";\n\nmy @files;\n\n@files = File::Find::Rule   -&gt; file()\n                             -&gt; name(\"*_clean.TextGrid\")\n                             -&gt; maxdepth()\n                             -&gt; in($dir);\n\nforeach my $file (@files) {\n    print \"$file\\n\";\n    $file =~ /(.*\\\\)(.*)/;\n    my $name = $2;\n    copy(\"$file\", \"$outdir\\\\$name\") or die \"Copy failed: $!\";\n    }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1535131784, "post_id": 52008870, "comment_id": 90969082, "body": "I would also recommend using <a href=\"https://metacpan.org/pod/Moose\" rel=\"nofollow noreferrer\">Moose</a> for classes, it is the most modern approach"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1535570440, "post_id": 52008870, "comment_id": 91119643, "body": "Follow up question <a href=\"https://stackoverflow.com/questions/52021890/perl-module-classhploo-v0-23-install-issue-2\">here</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10270622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rNuVgVz0jL0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMjCTRn-FB4Wq3hA64DRr5Cc-fp3g/mo/photo.jpg?sz=128", "display_name": "Krunal Patel", "link": "https://stackoverflow.com/users/10270622/krunal-patel"}, "edited": false, "score": 0, "creation_date": 1535135104, "post_id": 52009245, "comment_id": 90970568, "body": "Thanks mob for your response. I am trying to install this as it is required by DBD module that I was trying to install and saw below error:  Can&#39;t locate Class/HPLOO/Base.pm in @INC (you may need to install the Class::HPLOO::Base module) (@INC contains: blib/lib blib/arch /opt/app/perl-5.28.0/lib/site_perl/5.28.0/x86_64-linux /opt/app/perl-5.28.0/lib/site_perl/5.28.0 /opt/app/perl-5.28.0/lib/5.28.0/x86_64-linux /opt/app/perl-5.28.0/lib/5.28.0 .) at blib/lib/HDB/Object.pm line 35."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 4, "last_activity_date": 1535131797, "creation_date": 1535131797, "answer_id": 52009245, "question_id": 52008870, "link": "https://stackoverflow.com/questions/52008870/perl-module-classhploo-v0-23-install-issue/52009245#52009245", "title": "perl module Class::HPLOO v0.23 install issue", "body": "<p>The <a href=\"http://matrix.cpantesters.org/?dist=Class-HPLOO+0.23\" rel=\"nofollow noreferrer\">CPAN testers matrix</a> shows this module is having trouble building on Perl v5.22 or better. If you are able to use and build this module on an earlier version of Perl, that is one option for you.</p>\n\n<p>The logs show the same issue you discovered: a deprecated regular expression construction, but that is not a fatal error (yet) and is not the reason your build fails.</p>\n\n<p>Drilling down and running the test script with Perl v5.24 in the debugger, I see that the line</p>\n\n<pre><code>eval { require \"test/classtest.pm\" } ;\n</code></pre>\n\n<p>sets <code>$@</code> (meaning that the <code>require</code> call failed) with the following message:</p>\n\n<pre><code>  DB&lt;1&gt; p $@                                                                                                                                                   \nCan't use 'defined(@array)' (Maybe you should just omit the defined()?) at test/classtest.pm line 5.\n at test/classtest.pm line 5.\n        require test/classtest.pm called at test.pl line 8\n        eval {...} called at test.pl line 8\nCompilation failed in require at test.pl line 8.\n</code></pre>\n\n<p>So we see that this package (which was last updated in 2005) is using the <code>defined(@array)</code> construction which has been deprecated for a long time and has been <a href=\"https://metacpan.org/pod/distribution/perl/pod/perl5220delta.pod#defined(@array)-and-defined(%hash)-are-now-fatal-errors\" rel=\"nofollow noreferrer\">prohibited since v5.22.0</a>.</p>\n\n<p>The <code>defined(@array)</code> construction is used 4 times in <code>lib/Class/HPLOO/Base.pm</code> and <code>lib/Class/HPLOO.pm</code>. You could try to fix them yourself and rebuild the module.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 10272755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FE9C9.jpg?s=128&g=1", "display_name": "Harry_", "link": "https://stackoverflow.com/users/10272755/harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1535254005, "last_edit_date": 1535254005, "creation_date": 1535248031, "answer_id": 52022562, "question_id": 52008870, "link": "https://stackoverflow.com/questions/52008870/perl-module-classhploo-v0-23-install-issue/52022562#52022562", "title": "perl module Class::HPLOO v0.23 install issue", "body": "<p>In addition the changes Mob suggested, you will need to edit your test.pl file for the module. In 4 locations you will find \"eval { require \"some/path>\" } ;\" change it to \"eval { require \"./some/path\" } ;\"</p>\n\n<p>Also an unescaped left brace will show up which will obviously need to be escaped.</p>\n\n<p>This allowed me to successfully get through the install of HPLOO and move on to the successful installation of DBD.</p>\n"}], "owner": {"reputation": 1, "user_id": 10270622, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rNuVgVz0jL0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMjCTRn-FB4Wq3hA64DRr5Cc-fp3g/mo/photo.jpg?sz=128", "display_name": "Krunal Patel", "link": "https://stackoverflow.com/users/10270622/krunal-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1535254005, "creation_date": 1535129970, "question_id": 52008870, "link": "https://stackoverflow.com/questions/52008870/perl-module-classhploo-v0-23-install-issue", "title": "perl module Class::HPLOO v0.23 install issue", "body": "<p>I am trying to install Class::HPLOO perl module and running into issue. I am using perl version 5.28.0. I desperately need help resolve this issue and I am trying to resolve this since last few days with no luck :(.</p>\n\n<p>I have tried to install via cpan and getting below error:</p>\n\n<pre><code># Running under perl version 5.028000 for linux\n# Current time local: Thu Aug 23 22:50:40 2018\n# Current time GMT:   Fri Aug 24 02:50:40 2018\n# Using Test.pm version 1.31\nUnescaped left brace in regex is deprecated here (and will be fatal in Perl 5.32), passed through in regex; marked by &lt;-- HERE in m/({ &lt;-- HERE \\s+)/ at blib/lib/Class/HPLOO.pm line 1072.\nUnescaped left brace in regex is deprecated here (and will be fatal in Perl 5.30), passed through in regex; marked by &lt;-- HERE in m/(\\S)( { &lt;-- HERE ) (\\S)/ at blib/lib/Class/HPLOO.pm line 1077.\nnot ok 1\n# Failed test 1 in test.pl at line 9\n#  test.pl line 9 is:   ok(!$@) ;\nUndefined subroutine &amp;Foo::new_call_BEGIN called at test/classtest.pm line 5.\nmake: *** [test_dynamic] Error 255\n</code></pre>\n\n<p>I have downloaded module from <a href=\"https://metacpan.org/pod/Class::HPLOO\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Class::HPLOO</a> website and tried to install manually but same issue.</p>\n\n<pre><code># Running under perl version 5.028000 for linux\n# Current time local: Fri Aug 24 12:42:24 2018\n# Current time GMT:   Fri Aug 24 16:42:24 2018\n# Using Test.pm version 1.31\nnot ok 1\n# Failed test 1 in test.pl at line 9\n#  test.pl line 9 is:   ok(!$@) ;\nCan't locate object method \"new\" via package \"Foo\" at test.pl line 11.\nmake: *** [test_dynamic] Error 2\n</code></pre>\n\n<p>Please help resolve this issue. Thanks in advance!</p>\n"}, {"tags": ["regex", "perl", "scripting"], "comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1535125850, "post_id": 52007408, "comment_id": 90966156, "body": "can a line have multiple occurrence of the string?"}], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 6, "last_activity_date": 1535124343, "creation_date": 1535124343, "answer_id": 52007529, "question_id": 52007408, "link": "https://stackoverflow.com/questions/52007408/using-perl-in-line-edits-how-do-you-insert-a-line-after-the-nth-occurence-of-a/52007529#52007529", "title": "Using Perl in-line edits, how do you insert a line after the Nth occurence of a string?", "body": "<p>The following will add a line of <code>xyz</code> after the second occurrence of the string <code>abc</code>:</p>\n\n<pre><code>perl -pi -e '/abc/&amp;&amp;++$n==2 and $_.=\"xyz\\n\"' inFile.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": false, "score": 1, "last_activity_date": 1535124598, "creation_date": 1535124598, "answer_id": 52007590, "question_id": 52007408, "link": "https://stackoverflow.com/questions/52007408/using-perl-in-line-edits-how-do-you-insert-a-line-after-the-nth-occurence-of-a/52007590#52007590", "title": "Using Perl in-line edits, how do you insert a line after the Nth occurence of a string?", "body": "<p>If you're looking to repeat after every fifth occurrence of the string, you can create a variable in a <code>BEGIN</code> block and monitor it:</p>\n\n<pre><code>perl -n -e 'BEGIN{$c=0;} print; $c++ if /one/; if ($c==5){print \"Put after fifth entry\\n\";$c=0}' inFile.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 2, "creation_date": 1535126471, "post_id": 52007763, "comment_id": 90966518, "body": "counter should be reset (or condition shouldn&#39;t be checked altogether once it is satisfied, depending on requirement) ... otherwise this will continue to print <code>Inserted</code> until counter changes.. for example, remove <code>time</code> from <code>Fourth time</code> line.."}, {"owner": {"reputation": 150, "user_id": 1773021, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f47260ac6af89b221d77f967ad2bf45?s=128&d=identicon&r=PG", "display_name": "Inetquestion", "link": "https://stackoverflow.com/users/1773021/inetquestion"}, "edited": false, "score": 0, "creation_date": 1535133344, "post_id": 52007763, "comment_id": 90969872, "body": "if the 4th line is removed and the script as shown, the insert occurs before the 3rd line instead of after.   ???   perl -pi -e &#39;print &quot;Inserted\\n&quot; if (/\\ time/ &amp;&amp; ++$c) == 3&#39; input.txt"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1535152955, "post_id": 52007763, "comment_id": 90976411, "body": "If you are using <code>-p</code> the output of the current line comes after the insertion. That&#39;s why I changed the number to be one larger in the second one-liner."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1535127101, "last_edit_date": 1535127101, "creation_date": 1535125239, "answer_id": 52007763, "question_id": 52007408, "link": "https://stackoverflow.com/questions/52007408/using-perl-in-line-edits-how-do-you-insert-a-line-after-the-nth-occurence-of-a/52007763#52007763", "title": "Using Perl in-line edits, how do you insert a line after the Nth occurence of a string?", "body": "<p>[<em>It's always nice to see someone checked the FAQ! <a href=\"https://perldoc.perl.org/perlfaq5.html#How-do-I-change%2c-delete%2c-or-insert-a-line-in-a-file%2c-or-append-to-the-beginning-of-a-file%3f\" rel=\"nofollow noreferrer\">How do I change, delete, or insert a line in a file, or append to the beginning of a file?</a>.</em>]</p>\n\n<p>Here's how I would do it:</p>\n\n<pre><code>% perl -ni -e 'print; print \"Inserted\\n\" if (/time/ &amp;&amp; ++$c) == 3' input.txt\n</code></pre>\n\n<p>The counter variable <code>$c</code> is incremented by the return value of the match operator. It's 0 if it doesn't match and 1 if it does match (it's used in scalar context so even with a <code>/g</code> it only matches once at most). After that update to <code>$c</code> it's compared to the value you want.</p>\n\n<p>Here's <em>input.txt</em>:</p>\n\n<pre><code> First time\n Second time\n Third time\n Fourth time\n</code></pre>\n\n<p>And the result:</p>\n\n<pre><code> First time\n Second time\n Third time\n Inserted\n Fourth time\n</code></pre>\n\n<p>Alternately, you make make this a little shorter with <code>-p</code> which automatically puts a <code>print</code> at the end. In that case you end up inserting the line <em>before</em> the next line instead of <em>after</em> the previous line (and that may be a problem if you don't have enough lines to come before something):</p>\n\n<pre><code>% perl -pi -e 'print \"Inserted\\n\" if (/time/ &amp;&amp; ++$c) == 4' input.txt\n</code></pre>\n\n<p>And, you might consider upgrading to v5.28 if you are not using it already. <a href=\"https://www.effectiveperlprogramming.com/2017/12/in-place-editing-gets-safer-in-v5-28/\" rel=\"nofollow noreferrer\">In-place editing gets a bit safer</a>  by writing to a temp file first then replacing the source file once the program completes successfully.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1535136352, "last_edit_date": 1535136352, "creation_date": 1535132351, "answer_id": 52009365, "question_id": 52007408, "link": "https://stackoverflow.com/questions/52007408/using-perl-in-line-edits-how-do-you-insert-a-line-after-the-nth-occurence-of-a/52009365#52009365", "title": "Using Perl in-line edits, how do you insert a line after the Nth occurence of a string?", "body": "<p>No need to initialize the count if warnings aren't enabled.</p>\n\n<pre><code>perl -pe'$_.=\"foo\\n\" if /bar/ &amp;&amp; ++$c == 5'\n</code></pre>\n\n<p>The modulus (<code>%</code>) operator is great for detecting every Nth.</p>\n\n<pre><code>perl -pe'$_.=\"foo\\n\" if /bar/ &amp;&amp; ++$c % 5 == 0'\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 1773021, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7f47260ac6af89b221d77f967ad2bf45?s=128&d=identicon&r=PG", "display_name": "Inetquestion", "link": "https://stackoverflow.com/users/1773021/inetquestion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 1, "accepted_answer_id": 52007529, "answer_count": 4, "score": 4, "last_activity_date": 1535136352, "creation_date": 1535123784, "question_id": 52007408, "link": "https://stackoverflow.com/questions/52007408/using-perl-in-line-edits-how-do-you-insert-a-line-after-the-nth-occurence-of-a", "title": "Using Perl in-line edits, how do you insert a line after the Nth occurence of a string?", "body": "<p>Looking for a method to insert a line after the Nth occurence of a given string.</p>\n\n<p>The following is close to what I'm looking for, but is line number based, versus based on the Nth occurrence of a given string.</p>\n\n<pre><code>perl -ni -e 'print; print \"Put after fifth line\\n\" if $. == 5' inFile.txt\n</code></pre>\n"}, {"tags": ["regex", "perl", "utf-8"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1535121977, "post_id": 52006793, "comment_id": 90963835, "body": "<code>use diagnostics</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1535136735, "post_id": 52006793, "comment_id": 90971245, "body": "Re &quot;<i><code>$$pstring</code></i>&quot;, Why do you have a reference to a scalar? It&#39;s possibly legit, but it&#39;s quite odd"}, {"owner": {"reputation": 205, "user_id": 7979451, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ff812d4d478f4dfcd8b584d533d31498?s=128&d=identicon&r=PG&f=1", "display_name": "reencode", "link": "https://stackoverflow.com/users/7979451/reencode"}, "edited": false, "score": 0, "creation_date": 1535356152, "post_id": 52006793, "comment_id": 91019591, "body": "Actually I had two consequent \\xA0 chars in my String.. $$pstring =~ s/\\xA0+/ /g; fixed it."}], "answers": [{"comments": [{"owner": {"reputation": 2208, "user_id": 4982691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3afef4e5dfd2ea621b98d4259cd149e1?s=128&d=identicon&r=PG&f=1", "display_name": "jumping_monkey", "link": "https://stackoverflow.com/users/4982691/jumping-monkey"}, "edited": false, "score": 0, "creation_date": 1579234867, "post_id": 52007516, "comment_id": 105706307, "body": "Nice descriptive answer, as always"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1535124295, "creation_date": 1535124295, "answer_id": 52007516, "question_id": 52006793, "link": "https://stackoverflow.com/questions/52006793/malformed-utf-8-character-when-matching-non-breaking-space/52007516#52007516", "title": "Malformed UTF-8 character when matching Non Breaking Space", "body": "<p>My guess is that you are dealing with a raw, UTF-8 encoded string. You haven't shown how you got it or said why you'd want to do that. A small and complete demonstration program that shows how you get the input, how you change it, and what ultimately complains, would help people find the problem. If you add that small demonstration program to your question I might be able to give a better (or even different) answer.</p>\n\n<p>The non-breaking space has code number U+00A0. Under UTF-8 it encodes to the two octets \\xC2 and \\xA0. Everything with a code number above U+007F has a multi-octet encoding under UTF-8. Everything under U+007F is really just ASCII, so ASCII works as UTF-8. </p>\n\n<p>If you have the UTF-8 encoded text with the non-breaking space and remove just the <code>\\xA0</code> octet, there's a lonely <code>\\xC2</code> left over. Depending on what comes after it, that may be a problem. UTF-8 is designed to recognize where the problem is and correct itself though. It could pick up at the next legally encoded character and leave a substitution character to mark the error. Or, the program can complain and give up.</p>\n\n<p>When you use the character class <code>[\\xC2\\xA0]</code>, I'm guessing that it gets rid of either of those octets anywhere they appear. Since you don't report any other errors, I'm guessing that <code>\\xC2</code> doesn't appear anywhere else. Otherwise, other characters might change. Or, you're dealing with extended ASCII and removing the <code>\\xC2</code> leaves the right Latin-1 encoding.  Does the number of substitutions reported by <code>s///</code> equal the number (or double that) of non-breaking spaces?</p>\n\n<p>If you have UTF-8 encoded text, read it as UTF-8:</p>\n\n<pre><code>open my $fh, '&lt;:utf8', $filename or die ...\n</code></pre>\n\n<p>After you've read the data, don't worry about the encoding. Use the code numbers and Perl will figure it out. Or use the code names so future programmers know what you are doing without looking up the character:</p>\n\n<pre><code>my $string =~ s/\\x{00A0}/ /g;\nmy $string =~ s/\\N{NO-BREAK SPACE}/ /g;\n</code></pre>\n\n<p>When you are done, write it as UTF-8 text:</p>\n\n<pre><code>open my $fh, '&gt;:utf8', $filename or die ...\n</code></pre>\n\n<p>The latest <a href=\"https://www.learning-perl.com/\" rel=\"nofollow noreferrer\">Learning Perl</a> has a Unicode primer in the back that covers quite a bit of this.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 205, "user_id": 7979451, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ff812d4d478f4dfcd8b584d533d31498?s=128&d=identicon&r=PG&f=1", "display_name": "reencode", "link": "https://stackoverflow.com/users/7979451/reencode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1107, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1535124295, "creation_date": 1535121544, "question_id": 52006793, "link": "https://stackoverflow.com/questions/52006793/malformed-utf-8-character-when-matching-non-breaking-space", "title": "Malformed UTF-8 character when matching Non Breaking Space", "body": "<p>I am using utf8 in my perl program and I have got the following code line:</p>\n\n<pre><code>$$pstring =~ s/\\xA0/ /g; \n</code></pre>\n\n<p>which should clean out non breaking spaces from the string.</p>\n\n<p>Under Ubuntu 16.04 and perl v5.22.1 this is not an issue but under Ubuntu 14.04 and v5.18.2 I get this Error:</p>\n\n<blockquote>\n  <p>Malformed UTF-8 character (fatal)</p>\n</blockquote>\n\n<p>Then I inspected the string I was trying to match and found that there were non-breaking spaces in there, which could be deleted by the regex</p>\n\n<pre><code>$$pstring =~ s/[\\xC2\\xA0]/ /g;\n</code></pre>\n\n<p>but not with</p>\n\n<pre><code>$$pstring =~ s/\\xC2\\xA0/ /g;\n</code></pre>\n\n<p>My question is : What is the difference between the last two (Why does it only work with brackets) and is there another way of solving this?</p>\n"}, {"tags": ["postgresql", "postgresql-9.2", "perl"], "comments": [{"owner": {"reputation": 6052, "user_id": 391445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e34e6e0346f46be3c5bebd065be5790b?s=128&d=identicon&r=PG", "display_name": "Colin &#39;t Hart", "link": "https://stackoverflow.com/users/391445/colin-t-hart"}, "edited": false, "score": 2, "creation_date": 1535121961, "post_id": 52121732, "comment_id": 91194699, "body": "You should be using some form of connection pooling. If not in your Perl code, then you could use <a href=\"https://pgbouncer.github.io/\" rel=\"nofollow noreferrer\">PgBouncer</a> or <a href=\"http://www.pgpool.net/\" rel=\"nofollow noreferrer\">Pgpool-II</a>"}, {"owner": {"reputation": 4012, "user_id": 100507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb7f4bcab811476b0d7e57d38d1f3af?s=128&d=identicon&r=PG", "display_name": "Carlos Lima", "link": "https://stackoverflow.com/users/100507/carlos-lima"}, "edited": false, "score": 0, "creation_date": 1535745290, "post_id": 52121732, "comment_id": 91195086, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13236160/is-there-a-timeout-for-idle-postgresql-connections\">Is there a timeout for idle PostgreSQL connections?</a>"}, {"owner": {"reputation": 4012, "user_id": 100507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb7f4bcab811476b0d7e57d38d1f3af?s=128&d=identicon&r=PG", "display_name": "Carlos Lima", "link": "https://stackoverflow.com/users/100507/carlos-lima"}, "edited": false, "score": 0, "creation_date": 1535745820, "post_id": 52121732, "comment_id": 91195283, "body": "If you are looking for help on how to handle the connection on the perl side, I would suggest that you provide a sample of your current code and how you expect it to behave."}, {"owner": {"reputation": 320, "user_id": 3815056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0282d0b4bd0f36dd236b2b598ebbcd20?s=128&d=identicon&r=PG&f=1", "display_name": "Abhee", "link": "https://stackoverflow.com/users/3815056/abhee"}, "edited": false, "score": 0, "creation_date": 1536672581, "post_id": 52121732, "comment_id": 91501947, "body": "This is more like a environment issue as I have upgraded to RHEL 7.5 and PostgreSQL 9.2."}], "answers": [{"tags": [], "owner": {"reputation": 13641, "user_id": 163024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9dec2f8ed018ccdfd74f506656a9e530?s=128&d=identicon&r=PG", "display_name": "Matt S", "link": "https://stackoverflow.com/users/163024/matt-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1536080668, "creation_date": 1536080668, "answer_id": 52171032, "question_id": 52121732, "link": "https://stackoverflow.com/questions/52121732/how-we-can-configure-postgresql-9-2-to-close-connections-older-then-some-time-in/52171032#52171032", "title": "How we can configure postgresql 9.2 to close connections older then some time interval?", "body": "<p>This SQL will kill active connections:</p>\n\n<pre><code>SELECT pg_terminate_backend(pg_stat_activity.pid)\nFROM pg_stat_activity\nWHERE pg_stat_activity.datname = 'database_name'\nAND pid &lt;&gt; pg_backend_pid();\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1313521200, "open_beta_date": 1294686000, "closed_beta_date": 1294081200, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/dba/Img/apple-touch-icon@2.png", "twitter_account": "StackDBAs", "favicon_url": "https://cdn.sstatic.net/Sites/dba/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/dba/Img/apple-touch-icon.png", "audience": "database professionals who wish to improve their database skills and learn from others in the community", "site_url": "https://dba.stackexchange.com", "api_site_parameter": "dba", "logo_url": "https://cdn.sstatic.net/Sites/dba/Img/logo.png", "name": "Database Administrators", "site_type": "main_site"}, "on_date": 1535744132, "question_id": 215784}, "owner": {"reputation": 320, "user_id": 3815056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0282d0b4bd0f36dd236b2b598ebbcd20?s=128&d=identicon&r=PG&f=1", "display_name": "Abhee", "link": "https://stackoverflow.com/users/3815056/abhee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1536672175, "creation_date": 1535120155, "last_edit_date": 1536672175, "question_id": 52121732, "link": "https://stackoverflow.com/questions/52121732/how-we-can-configure-postgresql-9-2-to-close-connections-older-then-some-time-in", "title": "How we can configure postgresql 9.2 to close connections older then some time interval?", "body": "<p>I am using <code>postgresql</code> version 9.2 which does not support the configuration parameter <code>idle_in_transaction_session_timeout</code>. I have a <code>perl</code> script which is giving below error and I can see there are open connection processes which are in ideal state for more then few days. I want to close this open connections. </p>\n\n<blockquote>\n  <p>failed: FATAL:  sorry, too many clients already at GA/MiddleTier/Pg.pm\n  line 72</p>\n</blockquote>\n\n<p>I have set <code>max_connections = 200</code> in my postgresql.conf file. Please help how this can be achieved. </p>\n"}, {"tags": ["perl", "active-directory"], "answers": [{"tags": [], "owner": {"reputation": 310, "user_id": 4287167, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/5swJx.jpg?s=128&g=1", "display_name": "Quiron", "link": "https://stackoverflow.com/users/4287167/quiron"}, "is_accepted": true, "score": 0, "last_activity_date": 1535119353, "creation_date": 1535119353, "answer_id": 52006162, "question_id": 52005856, "link": "https://stackoverflow.com/questions/52005856/dsmod-user-address-tab/52006162#52006162", "title": "Dsmod user address tab", "body": "<p>dsmod does not change Address-tab attributes so I think I've to make a ps1. </p>\n<strong>SOURCE</strong>: <a href=\"https://stackoverflow.com/questions/19037215/dsmod-or-other-command-to-edit-ad-user-attributes-street-p-o-box-city-state?rq=1\">dsmod or other command to edit AD user attributes (Street, P.O. Box, City, State, Zip)</a></p>\n"}], "owner": {"reputation": 310, "user_id": 4287167, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/5swJx.jpg?s=128&g=1", "display_name": "Quiron", "link": "https://stackoverflow.com/users/4287167/quiron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 52006162, "answer_count": 1, "score": 0, "last_activity_date": 1535119353, "creation_date": 1535118363, "question_id": 52005856, "link": "https://stackoverflow.com/questions/52005856/dsmod-user-address-tab", "title": "Dsmod user address tab", "body": "<p>I have the following code:</p>\n\n<pre><code>my $mod_order = qx /dsmod user \"CN=$user_new,$new_dn\" -title \"$title\" -dept \"$department\" -company \"$company\" -s $dc -u $Conn_Args-&gt;{logonname} -p $Conn_Args-&gt;{pwd} 2&gt;&amp;1/;`\n</code></pre>\n\n<p>I need to add the following attributes to the dsmod order:</p>\n\n<ul>\n<li>street Address</li>\n<li>postal Address</li>\n<li>city</li>\n<li>state</li>\n<li>postal Code</li>\n<li>Country</li>\n</ul>\n\n<p>As you can see I need to fill the Address tab. In order to do so I'd tried:</p>\n\n<pre><code>my $mod_order = qx /dsmod user \"CN=$user_new,$new_dn\" -title \"$title\" -dept \"$department\" -company \"$company\" -streetAddress \"$street\" -postalAddress \"$postalAddress\" -l \"$city\" -st \"$state\" -postalCode \"$postalCode\" -co \"$country\" -s $dc -u $Conn_Args-&gt;{logonname} -p $Conn_Args-&gt;{pwd} 2&gt;&amp;1/;\n</code></pre>\n\n<p>But all Address-related attributes can not be setted.</p>\nAlso I tried to change the name of attributes, for example: streetAddress -> street or l -> city but does not work either...</p>\nThanks for help!!</p></p>\n"}, {"tags": ["perl", "recursion"], "comments": [{"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1535114013, "post_id": 52003112, "comment_id": 90958503, "body": "If you look at the perl code (at least here <a href=\"https://github.com/Perl/perl5\" rel=\"nofollow noreferrer\">github.com/Perl/perl5</a> ), you&#39;ll see that the threshold for the warning <code>PERL_SUB_DEPTH_WARN</code> is used for both the warning and the actual limit. But, as others have said, you need to recompile your perl binary to change it."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1535125933, "post_id": 52003112, "comment_id": 90966202, "body": "Have you considered not using recursion? Most problems can be solved without it and then you could easily limit how many items they process."}, {"owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "reply_to_user": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 3, "creation_date": 1535128008, "post_id": 52003112, "comment_id": 90967301, "body": "@briandfoy The reason I&#39;m looking for this is to catch involuntary recursions, particularly in tests. There are no deep recursions in the codebase this would be for, so this would make sure that if a deep recursion <i>is</i> detected by Perl, then the test would fail without potentially bringing the machine down to a crawl."}], "answers": [{"comments": [{"owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "edited": false, "score": 0, "creation_date": 1535110912, "post_id": 52003619, "comment_id": 90956576, "body": "Hm. Not looking good. In any case, that applies to modifying the threshold for the <i>warning</i>. Being able to modify that threshold is not so important to me as being able to make Perl <code>die</code> if / when that warning fires."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 4, "last_activity_date": 1535110597, "creation_date": 1535110597, "answer_id": 52003619, "question_id": 52003112, "link": "https://stackoverflow.com/questions/52003112/how-can-set-a-hard-maximum-recursion-depth-in-perl/52003619#52003619", "title": "How can set a hard maximum recursion depth in Perl?", "body": "<p>According to <a href=\"https://perldoc.perl.org/perldiag.html\" rel=\"nofollow noreferrer\">perldoc perldiag</a>:</p>\n\n<blockquote>\n  <p><strong>Deep recursion on subroutine \"%s\" (W recursion)</strong><br>\n  This subroutine has\n  called itself (directly or indirectly) 100 times more than it has\n  returned. This probably indicates an infinite recursion, unless you're\n  writing strange benchmark programs, in which case it indicates\n  something else.</p>\n  \n  <p>This threshold can be changed from 100, by recompiling the perl\n  binary, setting the C pre-processor macro PERL_SUB_DEPTH_WARN to the\n  desired value.</p>\n</blockquote>\n\n<p>So it seems you cannot localize the behavior unless you modify the <code>perl</code> binary.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 9, "last_activity_date": 1535112673, "creation_date": 1535112673, "answer_id": 52004214, "question_id": 52003112, "link": "https://stackoverflow.com/questions/52003112/how-can-set-a-hard-maximum-recursion-depth-in-perl/52004214#52004214", "title": "How can set a hard maximum recursion depth in Perl?", "body": "<p>As a previous answer mentions, you can only change the level that triggers the warning, by recompiling Perl.</p>\n\n<p>But you can make the existing warning fatal like this:</p>\n\n<pre><code>use warnings FATAL =&gt; 'recursion';\n</code></pre>\n"}], "owner": {"reputation": 1781, "user_id": 807650, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5c8db490df81736445eee4097def2bc9?s=128&d=identicon&r=PG", "display_name": "jja", "link": "https://stackoverflow.com/users/807650/jja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 0, "accepted_answer_id": 52004214, "answer_count": 2, "score": 5, "last_activity_date": 1535112673, "creation_date": 1535108733, "last_edit_date": 1535111215, "question_id": 52003112, "link": "https://stackoverflow.com/questions/52003112/how-can-set-a-hard-maximum-recursion-depth-in-perl", "title": "How can set a hard maximum recursion depth in Perl?", "body": "<p>Although in some cases I might want to allow deep recursions in my code, I want to be able to disable it in certain cases (like while testing).</p>\n\n<p>I know that when using the debugger I can use <code>$DB::deep</code> to specify the maximum recursion depth, and the feature I'm after is basically the same but usable even when not in the debugger.</p>\n\n<p>I took a look in CPAN, but I couldn't find anything. And a search on PerlMonks lead me to a thread about <a href=\"https://www.perlmonks.org/?node_id=324564\" rel=\"nofollow noreferrer\">changing the behaviour of the deep recursion <em>warning</em></a>. What I'm after is a to be able to block recursions altogether (eg. <code>die</code> if the recursion gets too deep).</p>\n\n<p>Does this feature exist?</p>\n\n<p>Bonus points if the solution allows me to localise it, so that I can control the scope of a maximum recursion depth.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1535099822, "post_id": 52000426, "comment_id": 90950057, "body": "The question is asking about sharing a variable between two files without a package. While I would prefer the approach of using modules that you are suggesting, I think that&#39;s not really what the OP wants (or needs, homework?) to do. Please also note that <a href=\"https://www.effectiveperlprogramming.com/2017/01/v5-26-removes-dot-from-inc/\" rel=\"nofollow noreferrer\"><code>.</code> was removed from <code>@INC</code> only in Perl 5.26</a>, so the <code>use lib</code> <i>might not</i> be necessary. I&#39;d also like to point out that the tutorialspoint page you link to is horribly outdated and suggests bad style Perl code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1535099903, "post_id": 52000426, "comment_id": 90950102, "body": "(I haven&#39;t voted on your answer, because I think it&#39;s well-written and a good suggestion, but not a direct answer. If you flesh it out some more, add <code>use strict</code> and <code>use warnings</code> and explain <i>why</i> this is a good idea, you&#39;ll get my upvote :)"}, {"owner": {"reputation": 1339, "user_id": 5650224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tY2JZ.png?s=128&g=1", "display_name": "m4gic", "link": "https://stackoverflow.com/users/5650224/m4gic"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535100446, "post_id": 52000426, "comment_id": 90950384, "body": "It was never written that &quot;without a package&quot;. I wrote . because I don&#39;t like to use hardcoded paths in code and  I did not want to use another Perl module to figure out the current path. I did not want to suggest a module that needs to be installed in order to be able to use it, I assumed that the author has less experience with modules. This version is just an easy and fast solution, and IMHO it is a better approach than defining a global variable in the first file and using the require to call the others, as you suggested."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535100710, "post_id": 52000426, "comment_id": 90950535, "body": "Your use a package in a <code>.pm</code> file is what is commonly referred to as a <i>module</i> in Perl. That doesn&#39;t have to do a lot or come from CPAN. As I said, it&#39;s totally fine and a good solution, but I believe it needs more explanation in the answer on <i>why</i> it is a better solution than moving a variable through. The variable I used in my answer is not <i>global</i> though. It&#39;s a package variable in the <code>main::</code> package. There is a difference. It&#39;s not possible to define your own <i>global</i> variables in Perl, but some variables like <code>$a</code> or <code>@ARGV</code> are in fact global."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535100788, "post_id": 52000426, "comment_id": 90950583, "body": "I agree with your assessment that OP is less experienced with using modules. Hence I inferred <i>without a package</i> from the lack of <code>package</code> keywords and the use of <code>.pl</code> files instead of a <code>.pm</code> file in the question."}], "tags": [], "owner": {"reputation": 1339, "user_id": 5650224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tY2JZ.png?s=128&g=1", "display_name": "m4gic", "link": "https://stackoverflow.com/users/5650224/m4gic"}, "is_accepted": false, "score": 2, "last_activity_date": 1535101947, "last_edit_date": 1535101947, "creation_date": 1535099472, "answer_id": 52000426, "question_id": 51999198, "link": "https://stackoverflow.com/questions/51999198/calling-one-perl-program-from-another/52000426#52000426", "title": "Calling one Perl program from another", "body": "<p>You should convert your perl file you want to call to a perl module:</p>\n\n<p>Hello.pm</p>\n\n<pre><code>#!/usr/bin/perl\npackage Hello;\n\nuse strict;\nuse warnings;\n\nsub printHello { \n    print \"Hello $_[0]\\n\" \n}\n1;\n</code></pre>\n\n<p>Then you can call it:\ntest.pl</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\n# you have to put the current directory to the module search path\nuse lib (\".\");\nuse Hello;\n\nHello::printHello(\"a\");\n</code></pre>\n\n<p>I tested it in git bash on windows, maybe you have to do some modifications in your environment.</p>\n\n<p>In this way you can pass as many arguments as you would like to, and you don't have to look for the variables you are using and maybe not initialized (this is a less safe approach I think, e.g. sometimes you will delete something you did't really want) somewhere in the file you want to call. The disadvantage is that you need to learn a bit about perl modules but I think it definitely worths.</p>\n\n<p>A second approach could be to use the exec/system call (you can pass arguments in this way too; if forking a child process is acceptable), but that is an another story.</p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 9984548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c6d101dc9efad3bc87fea308e9fba5?s=128&d=identicon&r=PG&f=1", "display_name": "Pyjava", "link": "https://stackoverflow.com/users/9984548/pyjava"}, "edited": false, "score": 0, "creation_date": 1535101363, "post_id": 52000458, "comment_id": 90950948, "body": "How about setting filename as environment variable? Are there any loose ends of that?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 107, "user_id": 9984548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c6d101dc9efad3bc87fea308e9fba5?s=128&d=identicon&r=PG&f=1", "display_name": "Pyjava", "link": "https://stackoverflow.com/users/9984548/pyjava"}, "edited": false, "score": 1, "creation_date": 1535102447, "post_id": 52000458, "comment_id": 90951595, "body": "@Pyjava no, that would work too. <code>%ENV</code> is global (see discussion on the other answer) and will be accessible from the other code. When you <code>require</code> a file without a package it gets executed in the spot. The scope is different but the package stays the same. So there really is no difference in terms of the outcome."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 107, "user_id": 9984548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c6d101dc9efad3bc87fea308e9fba5?s=128&d=identicon&r=PG&f=1", "display_name": "Pyjava", "link": "https://stackoverflow.com/users/9984548/pyjava"}, "edited": false, "score": 0, "creation_date": 1535448217, "post_id": 52000458, "comment_id": 91058948, "body": "@Pyjava please take a moment to take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> to learn what to do when someone answers your question and solves the problem. Thanks."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 7, "last_activity_date": 1535102322, "last_edit_date": 1535102322, "creation_date": 1535099583, "answer_id": 52000458, "question_id": 51999198, "link": "https://stackoverflow.com/questions/51999198/calling-one-perl-program-from-another/52000458#52000458", "title": "Calling one Perl program from another", "body": "<p>The <code>require</code> keyword only takes one argument. That's either a file name or a package name. Your line </p>\n\n<blockquote>\n<pre><code>require \"a.pl\" \"abc.log\";\n</code></pre>\n</blockquote>\n\n<p>is wrong. It gives a syntax error along the lines of <em>String found where operator expected</em>.</p>\n\n<p>You can require one <code>.pl</code> file from another <code>.pl</code>, but that is very old-fashioned, badly written Perl code. </p>\n\n<p>If neither file defines a package then the code is implicitly placed in the <code>main</code> package. You can <a href=\"http://perldoc.perl.org/functions/our.html\" rel=\"nofollow noreferrer\">declare a package variable</a> in the outside file and use it in the one that is required.</p>\n\n<p>In <code>abc.pl</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# declare a package variable\nour $OUTFILE  = \"C://programs/perls/filename\";\n\n# load and execute the other program\nrequire 'a.pl';\n</code></pre>\n\n<p>And in <code>a.pl</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# do something with $OUTFILE, like use it to open a file handle\nprint $OUTFILE;\n</code></pre>\n\n<p>If you run this, it will print</p>\n\n<pre><code>C://programs/perls/filename\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1535126368, "creation_date": 1535126368, "answer_id": 52008039, "question_id": 51999198, "link": "https://stackoverflow.com/questions/51999198/calling-one-perl-program-from-another/52008039#52008039", "title": "Calling one Perl program from another", "body": "<p>I would do this another way. Have the program take the name of the log file as a command-line parameter:</p>\n\n<pre><code>% perl a.pl name-of-log-file\n</code></pre>\n\n<p>Inside <em>a.pl</em>, open that file to append to it then output whatever you like. Now you can run it from many other sorts of places besides another Perl program.</p>\n\n<pre><code># a.pl\nmy $log_file = $ARGV[0] // 'default_log_name';\nopen my $fh, '&gt;&gt;:utf8', $log_file or die ...;\nprint { $fh } $stuff_to_output;\n</code></pre>\n\n<p>But, you could also call if from another Perl program. The <code>$^X</code> is the path to the currently running <em>perl</em> and this uses <code>system</code> in the slightly-safer list form:</p>\n\n<pre><code>system $^X, 'a.pl', $name_of_log_file\n</code></pre>\n\n<p>How you get something into <code>$name_of_log_file</code> is up to you. In your example you already knew the value in your first program.</p>\n"}], "owner": {"reputation": 107, "user_id": 9984548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8c6d101dc9efad3bc87fea308e9fba5?s=128&d=identicon&r=PG&f=1", "display_name": "Pyjava", "link": "https://stackoverflow.com/users/9984548/pyjava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1535126368, "creation_date": 1535094570, "last_edit_date": 1535097364, "question_id": 51999198, "link": "https://stackoverflow.com/questions/51999198/calling-one-perl-program-from-another", "title": "Calling one Perl program from another", "body": "<p>I have two Perl files and I want to call one file from another with arguments</p>\n\n<h3>First file <code>a.pl</code></h3>\n\n<pre><code>$OUTFILE  = \"C://programs/perls/$ARGV[0]\";\n# this should be some out file created inside work like C://programs/perls/abc.log\n</code></pre>\n\n<h3>Second File <code>abc.pl</code></h3>\n\n<pre><code>require \"a.pl\" \"abc.log\";\n\n# $OUTFILE is a variable inside a.pl and want to append current file's name as log.\n</code></pre>\n\n<p>I want it to create an output file with the name of log as that of current file.</p>\n\n<p>One more constraint I have is to use <code>$OUTFILE</code> in both <code>a.pl</code> and <code>abc.pl</code>.</p>\n\n<p>If there is any better approach please suggest.</p>\n"}, {"tags": ["regex", "perl", "sed"], "comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1535093913, "post_id": 51998891, "comment_id": 90947124, "body": "This is a textbook example from the first or maybe second lesson in a basic Awk course. It should not be hard to find existing code examples. Realize that your sequence of lines constitute a &quot;record&quot; of related fields."}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 2217784, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/857b3873cd308333c30ece957fa3ec97?s=128&d=identicon&r=PG", "display_name": "Fenomatik", "link": "https://stackoverflow.com/users/2217784/fenomatik"}, "edited": false, "score": 0, "creation_date": 1535170165, "post_id": 52000000, "comment_id": 90978403, "body": "I have updated my question , also meanwhile I found the answer too but seems like its not replace ing after the first match and replace <code>perl -0 -pe &#39;s&#47;(CREATE TABLE [a-z]+\\.)([a-z\\_]+)(\\s[\\s\\S]*?\\&#47;user\\&#47;bbc\\&#47;test\\&#47;)ac(?ms)(.+&zwnj;&#8203;?(?=^CREATE|\\z))&#47;$1$&zwnj;&#8203;2$3$2$4&#47;&#39; replace.txt </code>  <a href=\"https://regex101.com/r/THxa3r/1\" rel=\"nofollow noreferrer\">regex101.com/r/THxa3r/1</a>"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 373, "user_id": 2217784, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/857b3873cd308333c30ece957fa3ec97?s=128&d=identicon&r=PG", "display_name": "Fenomatik", "link": "https://stackoverflow.com/users/2217784/fenomatik"}, "edited": false, "score": 1, "creation_date": 1535189251, "post_id": 52000000, "comment_id": 90981881, "body": "That&#39;s because I though your input was the whole content, I didn&#39;t think that it could be repeated several times, so my quantifiers where greedy. I updated my question to make them lazy. I also removed the first option since it does not make sense now."}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 373, "user_id": 2217784, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/857b3873cd308333c30ece957fa3ec97?s=128&d=identicon&r=PG", "display_name": "Fenomatik", "link": "https://stackoverflow.com/users/2217784/fenomatik"}, "edited": false, "score": 1, "creation_date": 1535189903, "post_id": 52000000, "comment_id": 90982055, "body": "Also, the <code>g</code> flag was missing."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535193585, "post_id": 52000000, "comment_id": 90982969, "body": "Note that <code>perl -0</code> should be <code>perl -0777</code>."}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535197408, "post_id": 52000000, "comment_id": 90983889, "body": "@Borodin changed, I just thought NUL would be safe enough"}, {"owner": {"reputation": 373, "user_id": 2217784, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/857b3873cd308333c30ece957fa3ec97?s=128&d=identicon&r=PG", "display_name": "Fenomatik", "link": "https://stackoverflow.com/users/2217784/fenomatik"}, "edited": false, "score": 0, "creation_date": 1535216191, "post_id": 52000000, "comment_id": 90989097, "body": "Can you explain both flags g and -0777"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 373, "user_id": 2217784, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/857b3873cd308333c30ece957fa3ec97?s=128&d=identicon&r=PG", "display_name": "Fenomatik", "link": "https://stackoverflow.com/users/2217784/fenomatik"}, "edited": false, "score": 1, "creation_date": 1535243651, "post_id": 52000000, "comment_id": 90994879, "body": "By default, when reading files, you read them line by line (separated by <code>\\n</code>) With <code>-0</code> you will read from <a href=\"https://en.wikipedia.org/wiki/Null_character\" rel=\"nofollow noreferrer\">NUL character</a> to NUL. Since  you probably won&#39;t find a NUL character on your file. This mean that you read the whole file at once. <code>-0</code> may be followed by 3 numbers. That will mean a character in octal. So in theory from <code>000</code> to <code>377</code> (0-255 decimal). So any number &gt; than 377 will read the whole file, since it is impossible. Sometimes instead of 378 it is just easier to write 777 which is the max number for 3 digit octal number. @Fenomatik"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 373, "user_id": 2217784, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/857b3873cd308333c30ece957fa3ec97?s=128&d=identicon&r=PG", "display_name": "Fenomatik", "link": "https://stackoverflow.com/users/2217784/fenomatik"}, "edited": false, "score": 1, "creation_date": 1535243821, "post_id": 52000000, "comment_id": 90994893, "body": "@Fenomatik the <code>g</code> flag means <code>global</code>. It is used to repeat the replacement until the end of the string, instead of stop on first replacement"}], "tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": true, "score": 1, "last_activity_date": 1535197061, "last_edit_date": 1535197061, "creation_date": 1535097808, "answer_id": 52000000, "question_id": 51998891, "link": "https://stackoverflow.com/questions/51998891/find-and-replace-in-a-different-line/52000000#52000000", "title": "Find and replace in a different line", "body": "<p>By default, sed works line by line. So in order to work with that patter you should make it to work with multiple lines. <a href=\"https://unix.stackexchange.com/questions/26284/how-can-i-use-sed-to-replace-a-multi-line-string\">See this Stackoverflow question</a>.</p>\n\n<p>A simpler alternative would be to use perl. Perl comes with almost any (if not all) linux distros and some UNIX systems.</p>\n\n<p>So you may use this: </p>\n\n<p><code>perl -0777 -pe 's/([\\s\\S]*?\\()([^)]+)(\\)[\\s\\S]*?\\/root\\/usr\\/)destination([\\s\\S]*?)/$1$2$3$2$4/g' file.txt</code></p>\n\n<p>The regex is this one:</p>\n\n<p><code>([\\s\\S]*?\\()([^)]+)(\\)[\\s\\S]*?\\/root\\/usr\\/)destination([\\s\\S]*?)</code></p>\n\n<p>Replace by: <code>$1$2$3$2$4</code></p>\n\n<p><strong><a href=\"https://regex101.com/r/uIQS7t/2/\" rel=\"nofollow noreferrer\">Demo.</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1535193513, "creation_date": 1535193513, "answer_id": 52016449, "question_id": 51998891, "link": "https://stackoverflow.com/questions/51998891/find-and-replace-in-a-different-line/52016449#52016449", "title": "Find and replace in a different line", "body": "\n\n<p>I'm concerned about your invented input data as it doesn't seem even close to anything that the \"answer\" in your comment could process correctly. However, here's a solution that reads from the integral <code>DATA</code> file handle. I've read the file a line at a time instead of slurping the whole thing, as it makes it easier to pick up new replacement strings</p>\n\n<p>The only other provisos are that</p>\n\n<ul>\n<li><p>The <code>destination</code> keyword never appears <em>before</em> the replacement word on the same line</p></li>\n<li><p>There is no need to distinguish occurrences of <code>destination</code> that are in a path string</p></li>\n<li><p>There are no parentheses in the input text except for those surrounding the replacement words</p></li>\n</ul>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy $rep;\n\nwhile ( &lt;DATA&gt; ) {\n    $rep = $1 if /\\(([^()]+)\\)/;\n    s/destination/$rep/g if defined $rep;\n    print;\n}\n\n\n__DATA__\nHere is the word that I need to select in braces (WORD1)\nSecond line\nThird line\nForth line \nPath where I want it to replace /root/usr/destination/\nfew more lines\n\nHere is the word that I need to select in braces (WORD2)\nSecond line\nThird line\nForth line \nPath where I want it to replace /root/usr/destination/\nfew more lines\n\nHere is the word that I need to select in braces (WORD3)\nSecond line\nThird line\nForth line \nPath where I want it to replace /root/usr/destination/\nfew more lines\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Here is the word that I need to select in braces (WORD1)\nSecond line\nThird line\nForth line\nPath where I want it to replace /root/usr/WORD1/\nfew more lines\n\nHere is the word that I need to select in braces (WORD2)\nSecond line\nThird line\nForth line\nPath where I want it to replace /root/usr/WORD2/\nfew more lines\n\nHere is the word that I need to select in braces (WORD3)\nSecond line\nThird line\nForth line\nPath where I want it to replace /root/usr/WORD3/\nfew more lines\n</code></pre>\n\n<p>Although I recommend against using them, the one-liner version of this is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl -pe '$rep = $1 if /\\(([^()]+)\\)/; s/destination/$rep/g if defined $rep;' myfile\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 2217784, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/857b3873cd308333c30ece957fa3ec97?s=128&d=identicon&r=PG", "display_name": "Fenomatik", "link": "https://stackoverflow.com/users/2217784/fenomatik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 52000000, "answer_count": 2, "score": 0, "last_activity_date": 1535197061, "creation_date": 1535093199, "last_edit_date": 1535185492, "question_id": 51998891, "link": "https://stackoverflow.com/questions/51998891/find-and-replace-in-a-different-line", "title": "Find and replace in a different line", "body": "<p>Lets say I have few lines where I have to select a string within braces and then use it to substitute it elsewhere few lines later</p>\n\n<pre><code>Here is the word that I need to select in braces (WORD)\nSecond line\nThird line\nForth line \nPath where I want it to replace /root/usr/destination/\nfew more lines\n</code></pre>\n\n<p>I want to pick <code>WORD</code> and substitute <code>destination</code> with <code>WORD</code>\nso that it looks like this</p>\n\n<pre><code>Here is the word that I need to select in braces (WORD1)\nSecond line\nThird line\nForth line \nPath where I want it to replace /root/usr/WORD1/\nfew more lines\n\nAlso how can I do this for tis to be recurring in a same file\nHere is the word that I need to select in braces (WORD2)\nSecond line\nThird line\nForth line\nPath where I want it to replace /root/usr/WORD2/\nfew more lines\n\nHere is another  word that I need to select in braces (WORD3)\nSecond set of lines\nThird line\nForth line\nPath where I want it to replace /root/usr/WORD3/\nfew more lines and pattern repeats like this so on\n</code></pre>\n"}, {"tags": ["php", "perl", "cookies"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535100110, "post_id": 51998358, "comment_id": 90950225, "body": "Could you please show the incoming HTTP request headers that contain the cookie? The easiest way to get them is through your brower&#39;s developer tools."}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535100806, "post_id": 51998358, "comment_id": 90950594, "body": "Actually as stated below I found the issue. The problem is that the cookie was set to &quot;secure&quot; which force the browser to send the cookie only over https. Since the perl page was accessed via http, the browser was not returning the cookie. Simple as that."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535100841, "post_id": 51998358, "comment_id": 90950606, "body": "Ha, didn&#39;t read all the comments. You should write your own answer. ;)"}, {"owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535101076, "post_id": 51998358, "comment_id": 90950763, "body": "Done, I posted my answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "is_accepted": true, "score": 1, "last_activity_date": 1535101030, "creation_date": 1535101030, "answer_id": 52000864, "question_id": 51998358, "link": "https://stackoverflow.com/questions/51998358/unable-to-read-a-cookie-from-perl-when-set-by-a-php-webpage/52000864#52000864", "title": "Unable to read a cookie from perl when set by a php webpage", "body": "<p>For anyone that had this issue. <strong>The solution was simple</strong>.</p>\n\n<p>The problem is that the cookie was set to <strong>\"secure\"</strong> which force the browser to send the cookie only over <strong>https</strong>. </p>\n\n<p>Since the perl page was accessed via <strong>http</strong>, the browser was not returning the cookie. Simple as that.</p>\n\n<p>Accessing the page via <strong>https</strong> fixed the issue.</p>\n"}], "owner": {"reputation": 1056, "user_id": 2360915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0452ec6dfdadecb7c8e7eecd8f1e0157?s=128&d=identicon&r=PG", "display_name": "user2360915", "link": "https://stackoverflow.com/users/2360915/user2360915"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 52000864, "answer_count": 1, "score": 1, "last_activity_date": 1535101030, "creation_date": 1535090526, "last_edit_date": 1535096460, "question_id": 51998358, "link": "https://stackoverflow.com/questions/51998358/unable-to-read-a-cookie-from-perl-when-set-by-a-php-webpage", "title": "Unable to read a cookie from perl when set by a php webpage", "body": "<p>I have 2 webpages under the same host. 1 in php and 1 in perl cgi.</p>\n\n<p>The php page is setting a cookie \"c\" under a domain \"d.com\" and path \"/\".</p>\n\n<p>In perl I am trying to read the value of the cookie \"c\".</p>\n\n<p>I tried the following code :</p>\n\n<pre><code>use CGI;    \nuse CGI::Cookie;\n\nmy $query = new CGI;\nprint $query-&gt;header();\n#... some more code ...\n$thecookie = $query-&gt;cookie(-name=&gt;'c', -domain=&gt;\"d.com\", -path=&gt;\"/\");\nprint $thecookie;\n</code></pre>\n\n<p>Any help/idea would be appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["xml", "perl"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1535049027, "post_id": 51991817, "comment_id": 90933952, "body": "How do you generate the XML? By direct <code>print</code>, using a Template, or using some module like <code>XML::LibXML</code>, <code>XML::Twig</code> or <code>XML::Simple</code> for example? Some code attempts will help to show what you tried and how it does not result in what you expect."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535051392, "post_id": 51991817, "comment_id": 90935090, "body": "Is your input HTML? Are there really no closing <code>&lt;&#47;h1</code> etc. tags? The only way to do this is to code explicitly for the <code>h1</code> -&gt; <code>h2</code> -&gt; <code>h3</code> hierarchy, as there no implication of it in HTML. Your input data should be better formed."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535053250, "post_id": 51991817, "comment_id": 90935917, "body": "This is quite difficult to do properly. You need to keep a stack of open header levels and close them in reverse order every time a new header comes along that is superior to the current one. Then all headers must be closed at the end."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535057358, "post_id": 51991817, "comment_id": 90937851, "body": "In general use a library, and <a href=\"https://metacpan.org/pod/XML::LibXML\" rel=\"nofollow noreferrer\">XML::LibXML</a>  is really good; search SO posts for how to write a new XML with it (here is <a href=\"https://stackoverflow.com/a/2934794/4653379\">one example</a>).  If your input indeed comes from (an incomplete) HTML file then it is difficult as @Borodin says; see their answer."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1535065326, "last_edit_date": 1535065326, "creation_date": 1535055220, "answer_id": 51993632, "question_id": 51991817, "link": "https://stackoverflow.com/questions/51991817/translating-malformed-html-to-hierarchical-xml/51993632#51993632", "title": "Translating malformed HTML to hierarchical XML", "body": "\n\n<p>Having said it was quite difficult, I thought the least I could do was to offer a solution!</p>\n\n<p>I've added some comments and I hope it's pretty much self-explanatory</p>\n\n<p>Note that it ignores all HTML tags except for the <code>&lt;h1&gt;</code> etc. and I haven't made an attempt to add the blank lines you show as there doesn't seem to be any logic behind them</p>\n\n<p>I'm wondering if this is <em>really</em> what you want, as putting multiple paragraphs inside a <code>&lt;h1&gt;</code> element is rather odd. Anyway, I hope this helps</p>\n\n<hr>\n\n<p><strong><em>Note</em></strong> for the inquisitive:</p>\n\n<p><em>I am pretty sure that this can be done with just a scalar count of preceding levels. I started off coding that way but ended up using a stack as it helped my thinking, but because <code>@stack</code> only ever contains <code>1..3</code> etc. I think it must be sufficient to use a scalar that is equivalent to the number of elements in <code>@stack</code>, and increment and decrement it in place of <code>pushing</code> and <code>popping</code> the array</em></p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\n# Read the file and split it on the header tags\n\nmy @blocks = do {\n    open my $fh, '&lt;', 'input.html';\n    local $/;\n    grep /\\S/, split /(&lt;h\\d&gt;)/, &lt;$fh&gt;;\n};\n\nmy @stack;\n\nwhile ( @blocks ) {\n\n    my $tag  = shift @blocks;\n    my $text = shift @blocks;\n    my @text = split /\\n/, $text;\n\n    s/\\A\\s+|\\s+\\z//g for @text;  # Trim text lines\n\n    die unless $tag =~ /h(\\d+)/; # Check well-formed tag\n    my $level = $1;              # and grab hierarchy level\n\n    # Close all outstanding tags until we reach this level\n    while ( @stack and $stack[-1] &gt;= $level ) {\n        my $l = $stack[-1];\n        print indent($l-1), \"&lt;/h$l&gt;\\n\";\n        pop @stack;\n    }\n\n    # Opening tag, on its own or with label and title if they're there\n    if ( $text[0] =~ /^\\b[\\d.]+\\b/ ) {\n\n        print indent($level-1), $tag, \"\\n\";\n\n        my ($label, $title) = split ' ', shift(@text), 2;\n\n        print indent($level), $_, \"\\n\" for\n                \"&lt;label&gt;$label&lt;/label&gt;\",\n                \"&lt;title&gt;$title&lt;/title&gt;\";\n    }\n    else {\n        print indent($level-1), $tag, shift @text, \"\\n\";\n    }\n\n    # Print the remaining text lines as paragraphs                \n    print indent($level), $_, \"\\n\" for map { \"&lt;p&gt;$_&lt;/p&gt;\" } @text;\n\n    # Remember that this tag needs closing\n    push @stack, $level;\n}\n\n# Close all outstanding tags\nwhile ( @stack ) {\n    my $l = $stack[-1];\n    print indent($l-1), \"&lt;/h$l&gt;\\n\";\n    shift @stack;\n}\n\n\nsub indent {\n    my $n = shift;\n    '  ' x $n;\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;\n  &lt;label&gt;1&lt;/label&gt;\n  &lt;title&gt;Top level heading&lt;/title&gt;\n  &lt;p&gt;Para text 1&lt;/p&gt;\n  &lt;p&gt;Para text 2&lt;/p&gt;\n  &lt;h2&gt;\n    &lt;label&gt;1.1&lt;/label&gt;\n    &lt;title&gt;Sub level heading&lt;/title&gt;\n    &lt;p&gt;Para text 3&lt;/p&gt;\n    &lt;p&gt;Para text 4&lt;/p&gt;\n    &lt;h3&gt;\n      &lt;label&gt;1.1.1&lt;/label&gt;\n      &lt;title&gt;Sub sub level heading&lt;/title&gt;\n      &lt;p&gt;Para text 5&lt;/p&gt;\n      &lt;p&gt;Para text 6&lt;/p&gt;\n    &lt;/h3&gt;\n  &lt;/h2&gt;\n  &lt;h2&gt;Sub level heading 2\n    &lt;p&gt;Para text 7&lt;/p&gt;\n    &lt;p&gt;Para text 8&lt;/p&gt;\n  &lt;/h2&gt;\n&lt;/h1&gt;\n&lt;h1&gt;Top level heading\n  &lt;p&gt;Para text 1&lt;/p&gt;\n  &lt;p&gt;Para text 2&lt;/p&gt;\n&lt;/h1&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24167, "user_id": 7388477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42e688ade97076d4fdd1939946e7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Valdi_Bo", "link": "https://stackoverflow.com/users/7388477/valdi-bo"}, "is_accepted": false, "score": -1, "last_activity_date": 1535262427, "last_edit_date": 1535262427, "creation_date": 1535261881, "answer_id": 52023491, "question_id": 51991817, "link": "https://stackoverflow.com/questions/51991817/translating-malformed-html-to-hierarchical-xml/52023491#52023491", "title": "Translating malformed HTML to hierarchical XML", "body": "<p>There is no need to print XML on your own, including\nindentation handling. I think, a simpler solution is\nto use a dedidated module, e.g. <em>XML::Writer</em>.</p>\n\n<p>Below you have a reworked version of program proposed\nby <em>Borodin</em>, using just <em>XML::Writer</em>.</p>\n\n<pre><code>use strict; use warnings; use autodie; use XML::Writer;\n\nmy @stack;\nmy $wr = XML::Writer-&gt;new(OUTPUT =&gt; 'self', DATA_MODE =&gt; 1,\n    DATA_INDENT =&gt; 2, UNSAFE =&gt; 1);\n\nsub endTags {\n    my $lev = shift;\n    while (@stack and $stack[-1] &gt;= $lev) {\n        pop(@stack);\n        $wr-&gt;endTag();\n    }\n}\n\nmy @blocks = do {\n    open my $fh, '&lt;', 'input.txt';\n    local $/;   # Slurp mode\n    grep /\\S/, split /&lt;(h\\d)&gt;/, &lt;$fh&gt;;\n};\n$wr-&gt;startTag('main');\npush @stack, 0;         # Treat \"main\" as 0 level node\nwhile (@blocks) {\n    my $tag  = shift @blocks;   # Tag name\n    my $text = shift @blocks;   # Content (up to the next &lt;h...&gt;)\n    my @text = split /\\n/, $text;\n    s/\\A\\s+|\\s+\\z//g for @text;\n    die unless $tag =~ /h(\\d)/;\n    my $level = $1;\n    endTags($level);\n    push @stack, $level;\n    $wr-&gt;startTag($tag);\n    if ($text[0] =~ /^\\b[\\d.]+\\b/) {\n        my ($label, $title) = split ' ', shift(@text), 2;\n        $wr-&gt;dataElement(label =&gt; $label);\n        $wr-&gt;dataElement(title =&gt; $title);\n    } else {\n        $wr-&gt;characters(shift(@text) . ' (no number prefix)');\n    }\n    $wr-&gt;dataElement('p' =&gt; $_) for @text;\n}\nendTags(0);\nmy $xml = $wr-&gt;end();\nprint $xml;\n</code></pre>\n\n<p>As you can see, some fragments are identical (no need to reinvent\nthe wheel), but e.g. closing (ending) of XML tags was moved to\na dedidated function, called twice.</p>\n\n<p>This program is also compliant with requirements concerning\nproper XML formatting, namely the XML file must have\na <strong>single</strong> root level node (here I called it <em>main</em>).</p>\n\n<p>I had to set <em>UNSAFE</em> option in <em>XML::Writer</em>, otherwise it complains\nabout <em>mixed content</em> (an element containing both text nodes and child elements).</p>\n\n<p>A quite clever trick is that I used <em>endTags</em> function also to end\n<em>main</em> tag. It was possible, because <em>XML::Writer</em> keeps track of tag\nnames opened by the user, so <em>endTag</em> function actually does not require\nthe name of the tag to be closed.</p>\n"}], "owner": {"reputation": 9, "user_id": 10266087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc9625582ca4acf4733d5689d1f69785?s=128&d=identicon&r=PG&f=1", "display_name": "Anamika", "link": "https://stackoverflow.com/users/10266087/anamika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1535456792, "creation_date": 1535047494, "last_edit_date": 1592644375, "question_id": 51991817, "link": "https://stackoverflow.com/questions/51991817/translating-malformed-html-to-hierarchical-xml", "title": "Translating malformed HTML to hierarchical XML", "body": "\n<p>I am currently looking for a way in Perl to write the following output in XML files</p>\n<ul>\n<li><p><code>h1</code> Is the parent level</p>\n</li>\n<li><p><code>h2</code> is the child level of <code>h1</code></p>\n</li>\n<li><p><code>h3</code> is a child level of <code>h2</code> (or a subchild of <code>h1</code>) etc.</p>\n</li>\n</ul>\n<h3>Example input</h3>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;1 Top level heading\nPara text 1\nPara text 2\n&lt;h2&gt;1.1 Sub level heading\nPara text 3\nPara text 4\n&lt;h3&gt;1.1.1 Sub sub level heading\nPara text 5\nPara text 6\n&lt;h2&gt;Sub level heading 2\nPara text 7\nPara text 8\n&lt;h1&gt;Top level heading\nPara text 1\nPara text 2\n</code></pre>\n<h1>Required output</h1>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;h1&gt;\n &lt;label&gt;1&lt;/label&gt;\n &lt;title&gt;Top level heading&lt;/title&gt;\n &lt;p&gt;Para text 1&lt;/p&gt;\n &lt;p&gt;Para text 2&lt;/p&gt;\n \n &lt;h2&gt;\n  &lt;label&gt;1.1&lt;/label&gt;\n  &lt;title&gt;Sub level heading&lt;/title&gt;\n  &lt;p&gt;Para text 3&lt;/p&gt;\n  &lt;p&gt;Para text 4&lt;/p&gt;\n\n  &lt;h3&gt;\n    &lt;label&gt;1.1&lt;/label&gt;\n    &lt;title&gt;Sub sub level heading&lt;/title&gt;\n    &lt;p&gt;Para text 5&lt;/p&gt;\n    &lt;p&gt;Para text 6&lt;/p&gt;\n  &lt;/h3&gt;\n &lt;/h2&gt;\n\n &lt;h2&gt;Sub level heading (no number prefix)\n  &lt;p&gt;Para text 7&lt;/p&gt;\n  &lt;p&gt;Para text 8&lt;/p&gt;\n &lt;/h2&gt;\n&lt;/h1&gt;\n\n&lt;h1&gt;Top level heading (no number prefix)\n&lt;p&gt;Para text 9&lt;/p&gt;\n&lt;p&gt;Para text 10&lt;/p&gt;\n&lt;/h1&gt;\n</code></pre>\n<p>I tried a lot but found no logic to achieve this.</p>\n<p>Could someone help me to get started?</p>\n<h3>Update</h3>\n<p><strong>@Borodin's</strong> code works well based on the above input snippet, but my actual requirement is as follows:</p>\n<h3>Input.txt</h3>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;art&gt;\u00c4rticle Title\n&lt;smry&gt;1 Summ\u00e5ry\n Summary paragragh 1...\n Summary paragragh 2...\n&lt;/smry&gt;\n&lt;subjg&gt;Subject Group Title\n subject 1; subject 2; subject 3\n&lt;/subjg&gt;\n\n&lt;h1&gt;1 Top level heading\n  Para text 1\n  &lt;img gr1.jpg&gt;\n  Para text 2\n\n  &lt;h2&gt;1.1 Sub level heading\n    Para text 3\n    Para text 4\n    &lt;img gr2.jpg&gt;\n\n  &lt;h2&gt;1.2 Sub level heading\n    Para text 5\n    Para text 6\n\n   &lt;h3&gt;1.1.1 Sub sub level heading\n     Para text 7\n     &lt;fcap&gt;Label 1: Text...\n     &lt;grp line1.png&gt;\n     Para text 8\n\n   &lt;h3&gt;1.1.2 Sub sub level heading\n     Para text 9\n     Para text 10\n  &lt;h2&gt;Sub level heading\n    &lt;fcap&gt;Text only...\n    &lt;grp line2.png&gt;\n    Para text 11\n    Para text 12\n\n&lt;h1&gt;Top level heading\n Para text 13\n Para text 14\n\n  &lt;h2&gt;Sub level heading\n    Para text 15\n    Para text 16\n\n&lt;blst&gt;Books\n [1] Book name 1...\n [2] Book name 2...\n [3] Book name 3...\n&lt;/blst&gt;\n\n&lt;art&gt;\n...\n&lt;art&gt;\n...\n</code></pre>\n<h3>Required Output.xml</h3>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;article&gt;\n  &lt;front&gt;\n    &lt;title&gt;&amp;#x00C4;rticle Title&lt;/title&gt;\n    &lt;summary&gt;\n      &lt;label&gt;1&lt;/label&gt;\n      &lt;title&gt;Summ&amp;#x00E5;ry&lt;/title&gt;\n      &lt;p&gt;Summary paragragh 1...&lt;/p&gt;\n      &lt;p&gt;Summary paragragh 2...&lt;/p&gt;\n    &lt;/summary&gt;\n    &lt;subj-group&gt;\n      &lt;title&gt;Subject Group Title&lt;/title&gt;\n      &lt;sub&gt;subject 1&lt;/sub&gt;\n      &lt;sub&gt;subject 2&lt;/sub&gt;\n      &lt;sub&gt;subject 3&lt;/sub&gt;\n    &lt;/subj-group&gt;\n  &lt;/front&gt;\n  &lt;body&gt;\n    &lt;h1 id=&quot;s1&quot;&gt;\n      &lt;label&gt;1&lt;/label&gt;\n      &lt;title&gt;Top level heading&lt;/title&gt;\n      &lt;p&gt;Para text 1&lt;/p&gt;\n      &lt;img src=&quot;gr1.jpg&quot; id=&quot;gr1&quot;/&gt;\n      &lt;p&gt;Para text 2&lt;/p&gt;\n      &lt;h2 id=&quot;s1a&quot;&gt;\n        &lt;label&gt;1.1&lt;/label&gt;\n        &lt;title&gt;Sub level heading&lt;/title&gt;\n        &lt;p&gt;Para text 3&lt;/p&gt;\n        &lt;p&gt;Para text 4&lt;/p&gt;\n        &lt;img src=&quot;gr2.jpg&quot; id=&quot;gr2&quot;/&gt;\n      &lt;/h2&gt;\n      &lt;h2 id=&quot;s1b&quot;&gt;\n        &lt;label&gt;1.2&lt;/label&gt;\n        &lt;title&gt;Sub level heading&lt;/title&gt;\n        &lt;p&gt;Para text 5&lt;/p&gt;\n        &lt;p&gt;Para text 6&lt;/p&gt;\n        &lt;h3 id=&quot;s1b1&quot;&gt;\n          &lt;label&gt;1.1.1&lt;/label&gt;\n          &lt;title&gt;Sub sub level heading&lt;/title&gt;\n          &lt;p&gt;Para text 7&lt;/p&gt;\n          &lt;figure id=&quot;grp1&quot;&gt;\n            &lt;label&gt;Label 1:&lt;/label&gt;\n            &lt;cap&gt;&lt;p&gt;Text...&lt;/p&gt;&lt;/cap&gt;\n            &lt;graphic src=&quot;line1.png&quot;/&gt;\n          &lt;/figure&gt;\n          &lt;p&gt;Para text 8&lt;/p&gt;\n        &lt;/h3&gt;\n        &lt;h3 id=&quot;s1b2&quot;&gt;\n          &lt;label&gt;1.1.2&lt;/label&gt;\n          &lt;title&gt;Sub sub level heading&lt;/title&gt;\n          &lt;p&gt;Para text 9&lt;/p&gt;\n          &lt;p&gt;Para text 10&lt;/p&gt;\n        &lt;/h3&gt;\n      &lt;/h2&gt;\n      &lt;h2 id=&quot;s1c&quot;&gt;\n        &lt;title&gt;Sub level heading 2&lt;/title&gt;\n        &lt;figure id=&quot;grp2&quot;&gt;\n          &lt;cap&gt;&lt;p&gt;Text only...&lt;/p&gt;&lt;/cap&gt;\n          &lt;graphic src=&quot;line2.png&quot;/&gt;\n        &lt;/figure&gt;\n        &lt;p&gt;Para text 11&lt;/p&gt;\n        &lt;p&gt;Para text 12&lt;/p&gt;\n      &lt;/h2&gt;\n    &lt;/h1&gt;\n    &lt;h1 id=&quot;s2&quot;&gt;\n      &lt;title&gt;Top level heading&lt;/title&gt;\n      &lt;p&gt;Para text 13&lt;/p&gt;\n      &lt;p&gt;Para text 14&lt;/p&gt;\n      &lt;h2 id=&quot;s2a&quot;&gt;\n        &lt;title&gt;Sub level heading 2&lt;/title&gt;\n        &lt;p&gt;Para text 15&lt;/p&gt;\n        &lt;p&gt;Para text 16&lt;/p&gt;\n      &lt;/h2&gt;\n    &lt;/h1&gt;\n  &lt;/body&gt;\n  &lt;back&gt;\n    &lt;booklist&gt;\n      &lt;title&gt;Books&lt;/title&gt;\n      &lt;bookname id=&quot;b1&quot;&gt;&lt;l&gt;[1]&lt;/l&gt;&lt;t&gt;Book name 1...&lt;/t&gt;&lt;/bookname&gt;\n      &lt;bookname id=&quot;b2&quot;&gt;&lt;l&gt;[2]&lt;/l&gt;&lt;t&gt;Book name 2...&lt;/t&gt;&lt;/bookname&gt;\n      &lt;bookname id=&quot;b3&quot;&gt;&lt;l&gt;[3]&lt;/l&gt;&lt;t&gt;Book name 3...&lt;/t&gt;&lt;/bookname&gt;\n    &lt;/booklist&gt;\n  &lt;/back&gt;\n&lt;/article&gt;\n</code></pre>\n<p>Could someone help me on this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1535040595, "post_id": 51989353, "comment_id": 90929713, "body": "I&#39;ve cleaned up your question a little bit to make it look nicer. I think there are now too many empty lines in the output. Please <a href=\"https://stackoverflow.com/posts/51989353/edit\">edit</a> the question and clean it up. Please also show us what the expected output is. What do you want the new file to look like when it&#39;s working. Please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1535042160, "post_id": 51989353, "comment_id": 90930625, "body": "I expect to get the following &gt;&gt;Checking duplicates records... 573103154377,1240 and 573103154377,1240, running whole code which are two dupicate lines"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535042366, "post_id": 51989353, "comment_id": 90930736, "body": "Are there really so many blank lines in the input and output?"}, {"owner": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "edited": false, "score": 0, "creation_date": 1535042618, "post_id": 51989353, "comment_id": 90930849, "body": "Actually, there are not blank lines. I put there to beautifier the view in here..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1535042900, "post_id": 51989353, "comment_id": 90930975, "body": "@Richard: It&#39;s important that you post accurate data, especially the tabs, spaces, newlines which are otherwise invisible. The presence of blank lines makes a big difference to the content of the code. There are also a lot of files here and it&#39;s far from clear which is which. Please can you label which contents belong to <code>log.txt</code>, <code>Verify.pl</code>, and <code>tbl_20180615.txt</code> and explain the other file contents that you show?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "edited": false, "score": 0, "creation_date": 1535044669, "post_id": 51990954, "comment_id": 90931847, "body": "It looks nice. However,  I need to show duplicates records just in case if there are..."}, {"owner": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "edited": false, "score": 0, "creation_date": 1535049659, "post_id": 51990954, "comment_id": 90934274, "body": "I have to build a file, just like you did but keeping in mind all records, after that I need to do other operation where one of them is check duplicates records which I&#39;m attempting and fail in this operation. I have my file called log.txt, which is almost the same the first one. So I need to chechk duplicates records and show them. Regards"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "edited": false, "score": 0, "creation_date": 1535065872, "post_id": 51990954, "comment_id": 90940346, "body": "@Richard: I&#39;m sorry, but if you can&#39;t use my answer to fulfil your complete requirements then you need to ask another question. I&#39;ve written code that solves what I understood your problem to be. If you need more then you must be much more careful about specifying your requirement <i>precisely</i>. What experience do you have in programming with Perl, or with any language?"}, {"owner": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "edited": false, "score": 0, "creation_date": 1535647514, "post_id": 51990954, "comment_id": 91154675, "body": "Actually you never answered my question, but it helps me to see in a different way the code. I appreciate it. On the other hand, it was my first code on Perl. I have kind of experience in Shell script..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "edited": false, "score": 0, "creation_date": 1535663603, "post_id": 51990954, "comment_id": 91161884, "body": "@Richard: Your question is <i>&quot;How can I solve this issue?&quot;</i> and I provided  a solution. How is that not answering your question?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1535065415, "last_edit_date": 1535065415, "creation_date": 1535043938, "answer_id": 51990954, "question_id": 51989353, "link": "https://stackoverflow.com/questions/51989353/writing-a-file-and-reading-it-in-perl/51990954#51990954", "title": "Writing a file and Reading it in Perl", "body": "\n\n<p>I think this does what you're asking for. It builds a unique list of derived keys before printing any of them, using a hash to check whether a key has already been generated</p>\n\n<p>Note that I have assigned values to <code>@ARGV</code> to emulate input values. You must remove that statement before running the program with input from the command line</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse autodie;  # Handle bad IO statuses automatically\n\nlocal @ARGV = qw/ 2 tbl_20180615.txt /; # For testing only\n\ntr/\"//d for @ARGV;  # \"\n\nmy ($key_fields, $input_file) = @ARGV;\nmy $output_file = 'log.txt';\n\nmy (@keys, %seen);\n\nprint \"Loading input ... \";\nopen my $in_fh, '&lt;', $input_file;\n\nwhile ( &lt;$in_fh&gt; ) {\n\n    chomp;\n    my @rec = split /,/;\n\n    my $key = join ',', @rec[0..$key_fields-1];\n\n    push @keys, $key unless $seen{$key}++;\n}\n\nprint \"Done\\n\";\n\nopen my $out_fh, '&gt;', $output_file;\nprint $out_fh \"$_\\n\" for @keys;\nclose $out_fh;\n</code></pre>\n\n<h3>output <code>log.txt</code></h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>573103150033,0664\n573103150033,0665\n573103150080,0659\n573103150080,0660\n573103154377,1240\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10111852, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jA6o1tAih7w/AAAAAAAAAAI/AAAAAAAAACM/U0ZmcoV7pyg/photo.jpg?sz=128", "display_name": "Richard", "link": "https://stackoverflow.com/users/10111852/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1535065415, "creation_date": 1535038258, "last_edit_date": 1535044221, "question_id": 51989353, "link": "https://stackoverflow.com/questions/51989353/writing-a-file-and-reading-it-in-perl", "title": "Writing a file and Reading it in Perl", "body": "\n\n<p>I'm trying to build a primary key into a new file from an original File which has the following structure (<strong>tbl_20180615.txt</strong>):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>573103150033,0664,54,MSS02VEN*',INT,zxzc,,,,,\n573103150033,0665,54,MSS02VEN,INT,zxzc,,,,,\n573103150080,0659,29,MSS05ARA',INT,zxzc,,,,,\n573103150080,0660,29,MSS05ARA ,INT,zxzc,,,,,\n573103154377,1240,72,MSSTRI01,INT,zxzc,,,,,\n573103154377,1240,72,MSSTRI01,INT,zxzc,,,,,\n</code></pre>\n\n<p>I launch my <code>perl Verify.pl</code> then I send the arguments, the first one is the number of columns to build the primary key in the new file, after I have to send the name of file (original file).</p>\n\n<p>(<strong>Verify.pl</strong>)\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $n1   = $ARGV[0];\nmy $name = $ARGV[1];\n\n$n1 =~ s/\"//g;\nmy $n2 = $n1 + 1;\n\nmy %seen;\n\nmy ( $file3 ) = qw(log.txt);\nopen my $fh3, '&gt;', $file3 or die \"Can't open $file3: $!\";\n\nprint \"Loading file ...\\n\";\nopen( my $file, \"&lt;\", \"$name\" ) || die \"Can't read file somefile.txt: $!\";\n\nwhile ( &lt;$file&gt; ) {\n\n    chomp;\n    my @rec = split( /,/, $_, $n2 );    #$n2 sirve para armar la primary key, hacer le split en los campos deseados\n\n    for ( my $i = 0; $i &lt; $n1; $i++ ) {\n        print $fh3 \"@rec[$i],\";\n    }\n\n    print $fh3 \"\\n\";\n}\n\nclose( $file );\n\nprint \"Done!\\n\";\n</code></pre>\n\n#########to check duplicates\n\n<pre class=\"lang-none prettyprint-override\"><code>my ($file4) = qw(log.txt);\n\nprint \"Checking duplicates records...\\n\\n\";\n\nopen (my $file4, \"&lt;\", \"log.txt\") || die \"Can't read file log.txt: $!\";\n\nwhile ( &lt;$file4&gt; ) { \n    print if $seen{$_}++;\n}\n\nclose($file4);\n</code></pre>\n\n<p>if I send the following instruction</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>perl Verify.pl 2 tbl_20180615.txt\n</code></pre>\n\n<p>this code build a new file called \"log.txt\" with the following structure, splitting the original file () into two columns given by the first argument:\n(<strong>log.txt</strong>)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>573103150033,0664,\n573103150033,0665,\n573103150080,0659,\n573103150080,0660,\n573103154377,1240,\n573103154377,1240,\n</code></pre>\n\n<p>That works ok, but if I want to read the new file <code>log.txt</code> to check duplicates, it doesn't work, but If I comment the lines to generate the file <code>log.txt</code> (listed above) before the line in the code (###############to check duplicates################) launch the next part of the code it works ok, giving me two duplicates lines and looks like this:\n(<strong>Result in command line</strong>)</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>573103154377,1240\n573103154377,1240\n</code></pre>\n\n<p>How can I solve this issue?</p>\n"}, {"tags": ["linux", "perl", "unix", "rsync"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1535027459, "post_id": 51985845, "comment_id": 90921033, "body": "Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask."}, {"owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1535028591, "post_id": 51985845, "comment_id": 90921787, "body": "@jww the OP is asking a question about Perl, not about <code>rsync</code>. It fits nicely here!"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1535027745, "creation_date": 1535027745, "answer_id": 51985963, "question_id": 51985845, "link": "https://stackoverflow.com/questions/51985845/is-that-proper-way-to-use-rsync-command/51985963#51985963", "title": "Is that proper way to use rsync command?", "body": "<p>No, but there is a proper way to use quotes.</p>\n\n<p>In Perl, the string <code>$var</code> is interpolated inside double quotes (and the double quote constructions <code>qq{...}</code>) but treated literally inside single quotes (and <code>q{...}</code>). So you just want to change your <code>system</code> call to</p>\n\n<pre><code>system \"rsync -av $var/.*pl /scripts/\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1535031420, "creation_date": 1535031420, "answer_id": 51987137, "question_id": 51985845, "link": "https://stackoverflow.com/questions/51985845/is-that-proper-way-to-use-rsync-command/51987137#51987137", "title": "Is that proper way to use rsync command?", "body": "<p>You can make your <code>system</code> call a little safer.</p>\n\n<p>There are two forms of <code>system</code>. The string form gives <code>system</code> one argument. The shell then interprets the string to figure out what to do. That might be something other than what you intend when you interpolate a variable. What is <code>$var</code> is something like <code>; rm -rf</code>? That <code>;</code> ends the command and allows you to start a new one.</p>\n\n<p>The list form is a bit safer. None of the arguments after the command are treated specially by the shell. If there's a shell metacharacter in <code>$var</code> it's just it's literal self in this form:</p>\n\n<pre><code> system 'rsync', '-av', \"$var/.*pl\", '/scripts/';\n</code></pre>\n\n<p>Perl also has \"taint-checking\" that marks data that has come from outside your program (user input, files, whatever). Tainted data is viral; use it with untainted data and you get more tainted data. When you try to use tainted data to do something outside your program (like a <code>system</code>), you get an error.</p>\n\n<p>Check out <a href=\"https://perldoc.perl.org/perlsec.html\" rel=\"nofollow noreferrer\">perlsec</a>. I also have a chapter on this in <a href=\"https://www.masteringperl.org/\" rel=\"nofollow noreferrer\">Mastering Perl</a>. Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7896367, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-auVp55Jd_yg/AAAAAAAAAAI/AAAAAAAAAN8/vSXqEtH0Sh4/photo.jpg?sz=128", "display_name": "Viliam Kocinsky", "link": "https://stackoverflow.com/users/7896367/viliam-kocinsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1535037990, "last_edit_date": 1535037990, "creation_date": 1535031664, "answer_id": 51987229, "question_id": 51985845, "link": "https://stackoverflow.com/questions/51985845/is-that-proper-way-to-use-rsync-command/51987229#51987229", "title": "Is that proper way to use rsync command?", "body": "<p>Try to use the Perl <a href=\"https://metacpan.org/pod/File::Rsync\" rel=\"nofollow noreferrer\">File::Rsync</a> module.</p>\n"}], "owner": {"reputation": 31, "user_id": 10264510, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5UEBbMtpojg/AAAAAAAAAAI/AAAAAAAAyiI/N37nMNAbNZM/photo.jpg?sz=128", "display_name": "shah darshil", "link": "https://stackoverflow.com/users/10264510/shah-darshil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "closed_date": 1535031985, "accepted_answer_id": 51985963, "answer_count": 3, "score": 0, "last_activity_date": 1535037990, "creation_date": 1535027385, "last_edit_date": 1535027584, "question_id": 51985845, "link": "https://stackoverflow.com/questions/51985845/is-that-proper-way-to-use-rsync-command", "closed_reason": "Duplicate", "title": "Is that proper way to use rsync command?", "body": "<pre><code>$var = \"/nfs/sc/disks/darshils/scripts/\";\n</code></pre>\n\n<p>here <code>$var</code> is a string</p>\n\n<pre><code>system 'rsync -av $var/.*pl /scripts/';\n</code></pre>\n\n<p>system command use for in perl lang I can execute any unix command  </p>\n\n<p>Is that way is it possible to use $var in rsync command?\nor anyother way to use $var in rsync command?</p>\n"}, {"tags": ["perl", "hyperlink", "perl-pod"], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1536040568, "post_id": 52146301, "comment_id": 91268840, "body": "Actually this does not solve the problem: <code>pod2html</code> now reports <code>Cannot find &quot;--some-option=some_value&quot; in podpath: cannot find suitable replacement path, cannot resolve link</code>, and the HTML generated essentially is <code>&lt;p&gt;See &lt;a&gt;&lt;b&gt;--some-option=&lt;&#47;b&gt;&lt;i&gt;some_value&lt;&#47;i&gt;&lt;&#47;a&gt; or &lt;a&gt;--some-option=some_value&lt;&#47;a&gt;.&lt;&#47;p&gt;</code>."}, {"owner": {"reputation": 201, "user_id": 829550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d171edb8b959fe8a4564c636bdd2d9e8?s=128&d=identicon&r=PG", "display_name": "haarg", "link": "https://stackoverflow.com/users/829550/haarg"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1536068767, "post_id": 52146301, "comment_id": 91285502, "body": "You didn&#39;t include the /"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1536154329, "post_id": 52146301, "comment_id": 91322544, "body": "I re-read the perlpod manual page, but couldn&#39;t find a reference to <code>&#47;</code>; is it that slash of <code>&#47;&quot;sec&quot;</code>?"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1536154936, "post_id": 52146301, "comment_id": 91322955, "body": "I improved your answer to be more direct and obvious -- sorry!"}, {"owner": {"reputation": 201, "user_id": 829550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d171edb8b959fe8a4564c636bdd2d9e8?s=128&d=identicon&r=PG", "display_name": "haarg", "link": "https://stackoverflow.com/users/829550/haarg"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1536320670, "post_id": 52146301, "comment_id": 91392230, "body": "Yes, slash is to indicate that you are linking to a section of a pod document.  In this case, the current document.  The error you got about searching podpath means it is searching for a pod file, not a section.  So I expect that means you didn&#39;t include the / in your link."}], "tags": [], "owner": {"reputation": 201, "user_id": 829550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d171edb8b959fe8a4564c636bdd2d9e8?s=128&d=identicon&r=PG", "display_name": "haarg", "link": "https://stackoverflow.com/users/829550/haarg"}, "is_accepted": true, "score": 2, "last_activity_date": 1535964833, "creation_date": 1535964833, "answer_id": 52146301, "question_id": 51981584, "link": "https://stackoverflow.com/questions/51981584/how-do-i-add-formatting-in-a-link-in-perl-pod/52146301#52146301", "title": "How do I add formatting in a link in Perl Pod?", "body": "<p>To nest formatting codes, the outer one needs an extra set of angle brackets and some white space.  The white space is ignored in the output.</p>\n\n<pre><code>L&lt;&lt; /B&lt;some-option=&gt;I&lt;some_value&gt; &gt;&gt;\n</code></pre>\n\n<p>This is documented in the <a href=\"https://metacpan.org/pod/perlpod#Formatting-Codes\" rel=\"nofollow noreferrer\">Formatting Codes section of perlpod</a> after the list of codes.</p>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 52146301, "answer_count": 1, "score": 3, "last_activity_date": 1536040426, "creation_date": 1535013611, "last_edit_date": 1536040426, "question_id": 51981584, "link": "https://stackoverflow.com/questions/51981584/how-do-i-add-formatting-in-a-link-in-perl-pod", "title": "How do I add formatting in a link in Perl Pod?", "body": "<p>I wonder: I have some POD with <code>=item</code>s like this:</p>\n\n<pre><code>=item B&lt;some-option=&gt;I&lt;some_value&gt;\n</code></pre>\n\n<p>When I try to create a link in the text, none of those works:</p>\n\n<pre><code>L&lt;B&lt;some-option=&gt;I&lt;some_value&gt;&gt;, L&lt;some-option=some_value&gt;\n</code></pre>\n\n<p>Using <code>pod2html</code> I see that there are <code>name=</code> for the <code>=item</code>s, but the <code>L&lt;..&gt;</code> command just produces <code>&lt;em&gt;...&lt;/em&gt;</code> output.</p>\n\n<p>How can I create a proper link for the <code>=item</code>?</p>\n\n<p>Here's a short sample POD:</p>\n\n<pre><code>=pod\n\nSee L&lt;B&lt;--some-option=&gt;I&lt;some_value&gt;&gt; or L&lt;--some-option=some_value&gt;.\n\n=over\n\n=item B&lt;--some-option=&gt;I&lt;some_value&gt;\n\nBlabla...\n\n=back\n</code></pre>\n\n<p>Also <code>podchecker --warnings --warnings --warnings</code> says <code>pod syntax OK.</code>.</p>\n"}, {"tags": ["regex", "bash", "perl", "regex-group"], "comments": [{"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 1, "creation_date": 1535011021, "post_id": 51980497, "comment_id": 90911426, "body": "Could you paste the error here?"}, {"owner": {"reputation": 81, "user_id": 8888083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b2ddb9a17ea4949a76c58e18654e2d?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/8888083/abhishek"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535011581, "post_id": 51980497, "comment_id": 90911747, "body": "@GerhardBarnard yes i am doing the same as u said"}, {"owner": {"reputation": 81, "user_id": 8888083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b2ddb9a17ea4949a76c58e18654e2d?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/8888083/abhishek"}, "edited": false, "score": 0, "creation_date": 1535011617, "post_id": 51980497, "comment_id": 90911765, "body": "just wanted to replace for e.g name() with name(&#39;filename&#39;)"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 3, "creation_date": 1535011817, "post_id": 51980497, "comment_id": 90911880, "body": "To my mind, if somebody has an error, the least he/she can do is put the error on the question. Even if the problem is obvious."}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 0, "creation_date": 1535014376, "post_id": 51980497, "comment_id": 90913261, "body": "I finally edited the question and added the error by myslef. Please, for future problems always include the errors you get."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "edited": false, "score": 0, "creation_date": 1535021945, "post_id": 51980497, "comment_id": 90917742, "body": "@Julio: Please don&#39;t do that. The error that you get from running the OP&#39;s code may be different from what they are experiencing for a number of reasons. Your edit has been rejected."}], "answers": [{"tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": false, "score": 0, "last_activity_date": 1535048895, "last_edit_date": 1535048895, "creation_date": 1535023746, "answer_id": 51984781, "question_id": 51980497, "link": "https://stackoverflow.com/questions/51980497/read-a-file-line-by-line-and-replace-a-string-print-to-out-file/51984781#51984781", "title": "Read a file line by line and replace a string, print to out file", "body": "<p>Could you please try with the following? I'm assuming that 'replaced' is found at current work directory.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tie::File;\nuse English qw(-no_match_vars);\n\nmy @files = grep {-f} &lt;*&gt;;\n\n-d './replaced/' or mkdir './replaced/';\n\nforeach my $file (@files) {\n    open my $fh, '&lt;:encoding(UTF-8)', $file\n      or die \"Could not open file '$file': $OS_ERROR\";\n    open my $newfh, '&gt;', \"./replaced/$file\"\n      or die \"Could not create new file './replaced/$file': $OS_ERROR\";\n    while (&lt;$fh&gt;) {\n        s/Insertstoredprocedure\\s*\\(/Insertstoredprocedure('$file'/g;\n        s/SuccessSp\\s*\\(/SuccessSp('$file'/g;\n        print {$newfh} $_;\n    }\n    close $fh or die $OS_ERROR;\n    close $newfh or die $OS_ERROR;\n    print 'DONE with file: '.$file.\"\\n\";\n}\n</code></pre>\n\n<p>Mandatory changes:</p>\n\n<ol>\n<li>filter (grep) <code>&lt;*&gt;</code> so that we discard directories. If not, you'll get a permission error trying to open a directory</li>\n<li>Scape (matching) parenthesis on regexes to <code>\\(</code></li>\n<li>Fix a bug on your code where you matched file line by line but you replaced <code>$_</code> variable instead of <code>$variable</code>. Now It always work with <code>$_</code></li>\n<li>Fixed last regex, It had some unneeded parenthesis</li>\n<li>You must print 'Done!' outside of the while loop, since that while is for every line.</li>\n</ol>\n\n<p>Recommended changes:</p>\n\n<ol>\n<li>added <code>use strict</code> and <code>use warnings</code> (<strong>Very recommended</strong>)</li>\n<li>Use English and reference <code>$!</code> as <code>$OS_ERROR</code></li>\n<li>Added <code>my</code> to the variable of the foreach</li>\n<li>Close files once read/written.</li>\n<li>Create 'replaced' folder if it does not exist</li>\n<li>For the output file, use lexical filehandle and 3-parameters open <code>open my $newfh, '&gt;', ...</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1535739018, "last_edit_date": 1535739018, "creation_date": 1535052333, "answer_id": 51992969, "question_id": 51980497, "link": "https://stackoverflow.com/questions/51980497/read-a-file-line-by-line-and-replace-a-string-print-to-out-file/51992969#51992969", "title": "Read a file line by line and replace a string, print to out file", "body": "<p>Direct errors and red flags:</p>\n\n<ul>\n<li><p>Once you assign <code>while ($variable = &lt;$fh&gt;)</code> the <code>$_</code> is <em>not set to what <code>&lt;$fh&gt;</code> read</em>; it is left as it has been (undefined here); so your regex, which matches it (by default), won't work </p></li>\n<li><p>Parentheses to be matched as literal characters in regex need be escaped</p></li>\n<li><p>The code processes all files from the current directory, <code>&lt;*&gt;</code> -- which in this code may well contain the script itself as well, and there are <em>no guards or checks</em> </p></li>\n</ul>\n\n<p>I assume that with <code>./replaced/</code> you mean <code>replaced/</code> in the directory in which the script is, not in the current working directory (as <code>pwd</code>); these are in general not the same. Please clarify.</p>\n\n<p>Corrected, with other changes</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature qw(say);\n\nuse FindBin qw($RealBin);\n\nuse open ':std', ':encoding(UTF-8)';\n\nmy @files = grep { -f } @ARGV;    # add further checks of user input\n\nmy $outdir = \"$RealBin/replaced\";\nmkdir $outdir if not -d $outdir;  # or use File::Path\n\nforeach my $file (@files) {\n    my $fout = \"$outdir/$file\";\n    open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n    open my $fh_out, '&gt;', $fout or die \"Can't open $fout: $!\";\n\n    while (my $line = &lt;$fh&gt;) {\n        $line =~ s/Insertstoredprocedure \\( / Insertstoredprocedure('$file',/g;\n        $line =~ s/SuccessSp\\(\\)/SuccessSp()('$file')/g;\n\n        print $fh_out $line;\n    }\n    say \"done, $file --&gt; $fout\";\n}\n</code></pre>\n\n<p>Comments on code in the question</p>\n\n<ul>\n<li><p><em>Always</em> start programs with <code>use warnings;</code> and <code>use strict;</code></p></li>\n<li><p>The <code>&lt;*&gt;</code> reads all entries from the current directory, what poses difficult questions; for one, that may include the script itself. More importantly, that way your script is hardwired with what data to process. Why not take user input instead? I changed it to use what is submitted on the command line, filenames presumably. Then on Linux you can invoke the script as</p>\n\n<pre><code>script.pl *.ext\n</code></pre>\n\n<p>You can still use <code>script.pl *</code> if you must but then you need more checks, in particular to make sure to skip the script itself (if run from its directory). See for example <a href=\"https://stackoverflow.com/a/90721/4653379\">this post</a></p></li>\n<li><p>Always check input as appropriate.  In this case you can at least ensure to process only plain files. I merely filter using <code>-f</code> <a href=\"https://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\">filetest operator</a> but another option is to take input as submitted and then check, so that you can inform the user about inadequate input  </p></li>\n<li><p>I see no need to introduce <code>$filename</code>; just use the topicalizer <code>$file</code></p></li>\n<li><p>If you work with UTF8 better use <a href=\"https://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open pragma</a>; then all files and streams are taken care of</p></li>\n<li><p>Use lexical filehandles for everything, so for a file to be written as well</p></li>\n<li><p>When reading a line from a file why not call it <code>$line</code>? The \"<code>$variable</code>\" in code is so generic that it provides no clue on what that variable is</p></li>\n<li><p>Once you assigned to a named variable in the <code>while</code> condition then <code>$_</code> not set to what is read; that happens only with <code>while (&lt;$fh&gt;)</code>. In this code it is undefined inside the loop body. So in the regex you need to use <em>that</em> variable, to which the line <em>is</em> assigned (and not leave it to default <code>$_</code>)</p></li>\n<li><p>Characters that have special meaning in regex must be escaped if you want to match them as literal characters, and parentheses are one of those. There are various ways to do that, I use your text and directly escape with <code>\\</code>  (No need to escape in the replacement part)</p></li>\n<li><p>It is in principle a good idea to define patterns as separate variables using <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\"><code>qr</code> operator</a>. Then you can escape all special characters in them using <a href=\"https://perldoc.perl.org/functions/quotemeta.html\" rel=\"nofollow noreferrer\">quotemeta</a></p></li>\n</ul>\n\n<p>I have no way to know whether your (corrected) regex does what is intended so I could only fix the obvious error. Please show samples of data and of needed output.</p>\n"}], "owner": {"reputation": 81, "user_id": 8888083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49b2ddb9a17ea4949a76c58e18654e2d?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/8888083/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 51992969, "answer_count": 2, "score": 1, "last_activity_date": 1535739018, "creation_date": 1535009483, "last_edit_date": 1535089199, "question_id": 51980497, "link": "https://stackoverflow.com/questions/51980497/read-a-file-line-by-line-and-replace-a-string-print-to-out-file", "title": "Read a file line by line and replace a string, print to out file", "body": "<p>Currently i am using following code to do find the string replace the string and print it to the out file with the same name of that in file but in the replaced folder</p>\n\n<pre><code>use Tie::File;\n@files = &lt;*&gt;;\nforeach $file (@files) {\n    my $filename = $file;\n    open(my $fh, '&lt;:encoding(UTF-8)', $filename) or die \"Could not open file '$filename' $!\";\n    open(NEWFILE,\"&gt; ./replaced/$filename\");\n\n   while(my $variable=&lt;$fh&gt;){\n\n      s/Insertstoredprocedure ( / Insertstoredprocedure('$filename',/g;\n      s/SuccessSp()/SuccessSp()('$filename')/g;\n\n  print NEWFILE \"$variable\";\n  print \"done\\n\";\n  }\n}\n</code></pre>\n\n<p>this script is intended to replace all the thing and put the file into the replace folder with the changes.... this is not working it gives errror... how can i replace and print the same for all the files in the present directory ..</p>\n"}, {"tags": ["windows", "perl", "unix"], "comments": [{"owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "edited": false, "score": 0, "creation_date": 1535009583, "post_id": 51980324, "comment_id": 90910619, "body": "On Solaris, I&#39;ve never executed any executable file created on Windows yet. I think I can execute it on Solaris if Wine is used, however I&#39;m finding a way to execute it using Perl."}, {"owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "edited": false, "score": 0, "creation_date": 1535009647, "post_id": 51980324, "comment_id": 90910657, "body": "I&#39;d like to know if there is any module on Perl to execute it such as Wine."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535032975, "post_id": 51980324, "comment_id": 90924813, "body": "I&#39;m voting to close this question as off-topic because what the question is asking for and what its author is looking for are not the same thing."}, {"owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535033975, "post_id": 51980324, "comment_id": 90925467, "body": "Let me explain. What I\u2019d like to do is that I execute .exe file created on Windows on Solaris. However I\u2019m not allowed to install Wine; so it would be happy if there was any module for Perl because I\u2019m allowed to install a perl module."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "edited": false, "score": 0, "creation_date": 1535023062, "post_id": 51980928, "comment_id": 90918402, "body": "Thanks for the response. Yes, I want something to emulate Windows on Solaris; I&#39;m finding it..."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1535035037, "post_id": 51980928, "comment_id": 90926202, "body": "<a href=\"https://en.m.wikipedia.org/wiki/Wine_(software)\" rel=\"nofollow noreferrer\">Wine</a> is short for &quot;wine is not an emulator&quot;. It works by mapping Windows system calls to local system calls. Doing that in Perl is near impossible."}], "tags": [], "owner": {"reputation": 587, "user_id": 2245633, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/SLpQK.gif?s=128&g=1", "display_name": "CodeGorilla", "link": "https://stackoverflow.com/users/2245633/codegorilla"}, "is_accepted": false, "score": 1, "last_activity_date": 1535021097, "last_edit_date": 1535021097, "creation_date": 1535011193, "answer_id": 51980928, "question_id": 51980324, "link": "https://stackoverflow.com/questions/51980324/how-to-execute-exe-file-created-on-windows-on-other-platform-using-perl/51980928#51980928", "title": "How to execute .exe file created on WIndows on other platform using Perl", "body": "<p>No.</p>\n\n<p>Perl is not an emulator.</p>\n\n<p>You need something to emulate windows (such as <code>wine</code>, or a virtual machine with Windows installed)</p>\n"}], "owner": {"reputation": 73, "user_id": 8824214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321c4b9a3b8d755482ef0322b07958?s=128&d=identicon&r=PG&f=1", "display_name": "K.Minoda", "link": "https://stackoverflow.com/users/8824214/k-minoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1535021097, "creation_date": 1535008836, "question_id": 51980324, "link": "https://stackoverflow.com/questions/51980324/how-to-execute-exe-file-created-on-windows-on-other-platform-using-perl", "title": "How to execute .exe file created on WIndows on other platform using Perl", "body": "<p>Is it possible to execute executable file (.exe) created on Windows on other platform such as Solaris using Perl ? Does Perl have any library to .exe file created on other platform ?</p>\n"}, {"tags": ["perl", "file", "loops", "output", "sh"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535006452, "post_id": 51979630, "comment_id": 90909069, "body": "&quot;<i>If I run the code in a non-loop way</i>&quot; - what&#39;s the exact command line you&#39;re using?"}, {"owner": {"reputation": 171, "user_id": 6171038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0i8Kh.jpg?s=128&g=1", "display_name": "Mathilde", "link": "https://stackoverflow.com/users/6171038/mathilde"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535007271, "post_id": 51979630, "comment_id": 90909458, "body": "Hi, I edited to post incl. the code line that works - was this what you meant?"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535007279, "post_id": 51979630, "comment_id": 90909465, "body": "@melpomene I think she runs it on a single file, instead of <code>$i</code> <i>EDIT</i>: there I see it is edited."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535007361, "post_id": 51979630, "comment_id": 90909511, "body": "@Mathilde yes, that is what he asked :)"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1535007541, "post_id": 51979630, "comment_id": 90909599, "body": "@GerhardBarnard Yes, but how? From the edit you can see that the <code>-out_file</code> argument is completely different (e.g. no <code>_filtered</code>)."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1535007648, "post_id": 51979630, "comment_id": 90909650, "body": "@melpomene yes, I see that :)"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 6171038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0i8Kh.jpg?s=128&g=1", "display_name": "Mathilde", "link": "https://stackoverflow.com/users/6171038/mathilde"}, "edited": false, "score": 0, "creation_date": 1535008356, "post_id": 51979986, "comment_id": 90910008, "body": "You guys are amazing! - THANK you. I cant get the reduction of &quot;.fastq&quot; to work though, but this is really a minor thing."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1535007506, "creation_date": 1535007506, "answer_id": 51979986, "question_id": 51979630, "link": "https://stackoverflow.com/questions/51979630/why-is-no-output-files-written-in-prinseqlite-perl-loop/51979986#51979986", "title": "Why is no output files written in prinseqlite perl loop?", "body": "<p>This problem has nothing to do with Perl at all.</p>\n\n<p><code>/proj/forhot/qfiltered/looptest/$i_filtered.fastq</code> is read by the shell as interpolating the contents of <code>i_filtered</code>. There is no such shell variable, so this argument turns into <code>/proj/forhot/qfiltered/looptest/.fastq</code> (<code>$i_filtered</code> turns into nothing).</p>\n\n<p>Therefore all of your <code>prinseq-lite.pl</code> executions place their output in the same file, which (because its name starts with a <code>.</code>) is \"hidden\": You need to use <code>ls -a</code> to see it, not just <code>ls</code>.</p>\n\n<p>Fix</p>\n\n<pre><code>... -out_good /proj/forhot/qfiltered/looptest/${i}_filtered.fastq\n</code></pre>\n\n<p>Note that this would give you e.g. <code>60782_merged_rRNA.fastq_filtered.fastq</code> for an input file of <code>60782_merged_rRNA.fastq</code>. If you want to get rid of the duplicate <code>.fastq</code> part, you need something like:</p>\n\n<pre><code>... -out_good /proj/forhot/qfiltered/looptest/\"${i%.fastq}\"_filtered.fastq\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 6171038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0i8Kh.jpg?s=128&g=1", "display_name": "Mathilde", "link": "https://stackoverflow.com/users/6171038/mathilde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 51979986, "answer_count": 1, "score": 2, "last_activity_date": 1535007506, "creation_date": 1535006095, "last_edit_date": 1535007214, "question_id": 51979630, "link": "https://stackoverflow.com/questions/51979630/why-is-no-output-files-written-in-prinseqlite-perl-loop", "title": "Why is no output files written in prinseqlite perl loop?", "body": "<p>I am completely new to this type of coding/command lines, so I am sorry if I am asking this question in a wrong way.</p>\n\n<p>I want to loop over all files in a directory (I am quality trimming DNA sequencing files (.fastq format))</p>\n\n<p>I have written this loop:</p>\n\n<pre><code>for i in *.fastq; do\nperl /apps/prinseqlite/0.20.4/prinseq-lite.pl -fastq $i -min_len 220 -max_len 240 -min_qual_mean 30  -ns_max_n 5 -trim_tail_right 15 -trim_tail_left 15 -out_good /proj/forhot/qfiltered/looptest/$i_filtered.fastq -out_bad null; done\n</code></pre>\n\n<p>The code itself seems to work, I can see in my terminal that it is taking the right files and it is doing the trimming (it is writing a summary log in the terminal as it goes), but no output files are generated  - i.e these ones: </p>\n\n<pre><code>-out_good /proj/forhot/qfiltered/looptest/$i_filtered.fastq\n</code></pre>\n\n<p>If I run the code in a non-loop way, just on one file it works (= the output is generated). link this example:</p>\n\n<pre><code>prinseq-lite.pl -fastq 60782_merged_rRNA.fastq -min_len 220 -max_len 240 -min_qual_mean 30  -ns_max_n 5 -trim_tail_right 15 -trim_tail_left 15 -out_good 60782_merged_rRNA_filt_codeTEST.fastq -out_bad null\n</code></pre>\n\n<p>Is there a simple reason/answer to this?</p>\n"}]