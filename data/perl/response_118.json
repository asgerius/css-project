[{"tags": ["perl", "text-parsing"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492035100, "post_id": 43379146, "comment_id": 73823004, "body": "<b><i>Always</i></b> <code>use strict</code> and<code>use warnings &#39;all&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1492030099, "last_edit_date": 1492030099, "creation_date": 1492029644, "answer_id": 43379262, "question_id": 43379146, "link": "https://stackoverflow.com/questions/43379146/perl-text-parsing-variable-fail-to-print/43379262#43379262", "title": "Perl text-parsing variable fail to print", "body": "<pre><code>while( my $line = $file_handle-&gt;getline() ) {\n    # parses string into value and unit\n    my ($val, $unit) = split /[\\n]/, $line;\n</code></pre>\n\n<p><code>getline</code> returns one line. By splitting it on a newline <code>[\\n]</code>, you get the line itself in <code>$val</code>, and nothing in <code>unit</code>. Maybe you wanted to <code>split ' '</code>?</p>\n\n<p>Using a hash for the unit conversion might shorten the code significantly why making it more readable:</p>\n\n<pre><code>my %units = ( in =&gt; [ cm =&gt; 2.54 ],\n              ft =&gt; [ m  =&gt; .3048 ],\n              yd =&gt; [ m  =&gt; .9144 ],\n              mi =&gt; [ km =&gt; 1.609347 ],\n);\n\nwhile (my $line = $file_handle-&gt;getline) {\n    my ($val, $unit) = split ' ', $line;\n    my ($val2, $unit2) = ($units{$unit}[1] * $val, $units{$unit}[0]);\n    print \"$val $unit is equal to $val2 $unit2\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4526963, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/7a09569383d927d9e7802fc529174c71?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/4526963/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 43379262, "answer_count": 1, "score": 0, "last_activity_date": 1492031290, "creation_date": 1492029183, "last_edit_date": 1492031290, "question_id": 43379146, "link": "https://stackoverflow.com/questions/43379146/perl-text-parsing-variable-fail-to-print", "title": "Perl text-parsing variable fail to print", "body": "<p>I have this perl program that is supposed to convert units, inches to centimeters and such. But it doesn't print the variables during the loop. It just prints the standard \" is equal to \" and says that $unit2 is uninitialized</p>\n\n<pre><code>Use of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 1.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 2.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 3.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 4.\n is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 5.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 6.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 7.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 8.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 9.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 10.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 11.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 12.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 13.\n  is equal to  \nUse of uninitialized value $unit2 in print at convert.pl line 47, &lt;GEN1&gt; line 14.\n  is equal to  \n</code></pre>\n\n<p>Here is my code</p>\n\n<pre><code>#!/usr/bin/perl\n#usage: perl convert.pl\n\nuse Path::Class;\nuse warnings;\nuse autodie; # die if problem reading or writing a file\n\nmy $dir = dir(\"./\");\n\nmy $file = $dir-&gt;file(\"distances.txt\");\n\n# Read in the entire contents of a file\nmy $content = $file-&gt;slurp();\n\n# openr() returns an IO::File object to read from\nmy $file_handle = $file-&gt;openr();\n\n# Read in line at a time\nwhile( my $line = $file_handle-&gt;getline() ) {\n    # parses string into value and unit\n    my ($val, $unit) = split /[\\n]/, $line;\n    # initialize values\n    my ($val2, $unit2) = \"\";\n    # check unit and apply corresponding math\n    if ($unit eq \"in\") {\n        $val2 = $val * 2.54;\n        $unit2 = \"cm\";\n    } \n    else {\n        if ($unit eq \"ft\") {\n            $val2 = $val * 0.3048;\n            $unit2 = \"m\";\n        } \n        else {\n            if ($unit eq \"yd\") {\n                $val2 = $val * 0.9144;\n                $unit2 = \"m\";\n            } \n            else {\n                if ($unit eq \"mi\") {\n                    $val2 = $val * 1.609347;\n                    $unit2 = \"km\";\n                }#close mile if statement\n            }#close else statement\n        }#close 2nd else statement\n    }#close 1st else statement\n    print $val, \" \", $unit, \" is equal to \", $val2, \" \", $unit2, \"\\n\";\n}\n</code></pre>\n\n<p>Here is the text file I'm using. </p>\n\n<pre><code>74 in\n10 in\n10 ft\n10 yd\n10 mi\n72 in\n6 ft\n2 yd\n300 ft\n100 yd\n158400 in\n13200 ft\n4400 yd\n2.5 mi\n</code></pre>\n"}, {"tags": ["perl", "asynchronous", "anyevent"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492028159, "post_id": 43378697, "comment_id": 73819813, "body": "<code>if ( $#queue != -1 )</code> is better written as <code>if ( @queue )</code>"}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492028439, "post_id": 43378697, "comment_id": 73819982, "body": "@Borodin thank you"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492057627, "post_id": 43378697, "comment_id": 73828751, "body": "Tip: You can safely call <code>http_request</code> in void context rather than doing those <code>$r</code> shenanigans."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492058376, "post_id": 43378697, "comment_id": 73828987, "body": "I don&#39;t know why you used timers except for the logger"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492058834, "post_id": 43378697, "comment_id": 73829132, "body": "Insufficient info. You say you want to exit when there are no active downloads, but it that&#39;s the case, it would exit before downloading anything. When exactly do you want to exit? After there are no active downloads ...and what? The job-grabbing <code>UPDATE</code> returns nothing? The <code>stop</code> file is found?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492059336, "post_id": 43378697, "comment_id": 73829303, "body": "That you are &quot;locking&quot; would indicate that you can have multiple tasks fetching jobs from the database, so you shouldn&#39;t have a <code>@queue</code>!!!! You could have idle tasks while another tasks has a queue of waiting jobs. You could use the queue if you made sure it never has more than The only way it would make sense to have a <code>@queue</code> is if you limited the number of elements to <code>300-($added-$finished)</code>, but that number would be zero most of the time. I suppose it also makes sense to pre-fetch a <i>few</i> extra elements if the HTTP requests are fast."}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492086531, "post_id": 43378697, "comment_id": 73845524, "body": "@ikegami Thanks for your comments. Jobs never end, they are sorted by time and after the finish they update in the database with the current time and are ready to queue again. Exit by the existence of a stop file. I would be grateful if you give an example of how you solved this problem. Thank you!"}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492096896, "post_id": 43378697, "comment_id": 73853208, "body": "@ikegami , I tried to apply your advice, comment please <a href=\"https://pastebin.com/zjd9xnkx\" rel=\"nofollow noreferrer\">pastebin.com</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "edited": false, "score": 0, "creation_date": 1492097244, "post_id": 43378697, "comment_id": 73853445, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/141661/discussion-between-ikegami-and-dmitry\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492119713, "post_id": 43401420, "comment_id": 73864853, "body": "Added to my answer. (At the top)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1492119642, "last_edit_date": 1492119642, "creation_date": 1492116412, "answer_id": 43401420, "question_id": 43378697, "link": "https://stackoverflow.com/questions/43378697/how-can-i-wait-for-the-completion-of-http-request-in-anyeventhttp/43401420#43401420", "title": "How can I wait for the completion of http_request in AnyEvent::HTTP?", "body": "<p>You basically need a three-state system:</p>\n\n<ol>\n<li>Running (new jobs accepted).</li>\n<li>Exiting (no new jobs accepted; waiting for existing jobs to complete).</li>\n<li>Exit (no jobs running).</li>\n</ol>\n\n<p>Both of your version fail because they only have two states:</p>\n\n<ol>\n<li>Running (new jobs accepted)</li>\n<li>Exit (jobs could still be running!!!)</li>\n</ol>\n\n<p>Here's a solution:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse AE             qw( );\nuse AnyEvent       qw( );\nuse AnyEvent::DBI  qw( );\nuse AnyEvent::HTTP qw( );\nuse Scalar::Util   qw( weaken );\nuse Sys::Hostname  qw( hostname );\n\nmy $capacity = 300;\n\nmy $exit_request = AE::cv();\nmy $done         = AE::cv();\nmy $exiting      = 0;\nmy $grabbing     = 0;\nmy $added        = 0;\nmy $finished     = 0;\n\nmy $uid = join('.', hostname(), $$, int(rand(65536)));\n\nmy $db = AnyEvent::DBI-&gt;new('DBI:mysql:dbname=;host=');\n\nsub worker {\n    my ($job, $cb) = @_;\n    http_request(\n        GET =&gt;  $job-&gt;{url},\n        sub {\n            my ($body, $header) = @_;\n            ...\n            $cb-&gt;();\n        },\n    );\n}\n\nsub manager {\n    my $active = $added - $finshed;\n    if ($exiting) {\n        $done-&gt;send() if !$active;\n        return;\n    }\n\n    my $avail_slots = $capacity - $active;\n    return if !$avail_slots;\n\n    return if $grabbing;\n\n    $grabbing = 1;\n    $db-&gt;exec(qq{UPDATE `jobs` SET `lock` = ? WHERE `status` = 'queued' AND `lock` = 0 ORDER BY `time` ASC LIMIT $avail_slots}, $uid, sub {\n        $db-&gt;exec(q{SELECT * FROM `jobs` WHERE `status` = 'queued' AND `lock` = ?}, $uid, sub {\n            my (undef, $jobs, undef) = @_;\n            $db-&gt;exec(q{UPDATE `jobs` SET `status = 'wip' WHERE `lock` = ?}, $uid, sub {\n                $grabbing = 0;\n                for my $job (@$jobs) {\n                    ++$added;\n                    worker($job, sub {\n                        ++$finished;\n                        $db-&gt;exec(q{UPDATE `jobs` SET `status = 'done', `lock` = 0, `time` = CURRENT_TIMESTAMP WHERE `id` = ?}, $job-&gt;{id}, sub { });\n                        manager();\n                    });\n                });\n            });\n        });\n    });\n};\n\nmy $db_poll_timer = AE::timer(5, 0.5, \\&amp;manager);\n\nmy $exit_check_timer = AE::timer(0, 2, sub {\n    $exit_request-&gt;send() if -f 'stop';\n});\n\nmy $log_timer = AE::timer(1, 3, sub {\n    printf(\"Added: %-6d Finished: %-6d Active: %-6d\\n\",\n        $added, $finished, $added-$finished);\n});\n\n$exit_request-&gt;recv();\nprint(\"Exiting...\\n\");\nundef $exit_check_timer;\n$exiting = 1;\n\n$done-&gt;recv();\nprint(\"Finished.\\n\");\nundef $db_poll_timer;\nundef $log_timer;\n</code></pre>\n\n<p>Features:</p>\n\n<ul>\n<li>Removed the <code>@queue</code> in order to avoid stealing work from other tasks.</li>\n<li>I separated the worker code from the worker management code. </li>\n<li>I removed any dependency of the worker being an <code>http_request</code>.</li>\n<li>Support for long-running workers (like your first version, but unlike your second version) through timer-based polling.</li>\n<li>Fixed a race-condition in the job-grabbing code (that existed in your first version, but not in your second version) using <code>$grabbing</code>.</li>\n</ul>\n\n<p>I went beyond the scope:</p>\n\n<ul>\n<li>Used the shortcuts from <a href=\"http://search.cpan.org/perldoc?AE\" rel=\"nofollow noreferrer\">AE</a>.</li>\n<li>I used a more reliable lock value. It's now a string which even identifies the machine and process that holds the lock.</li>\n<li>I added a field to the job table (<code>status</code>) indicating the state of the job rather than reusing the <code>lock</code> field.</li>\n</ul>\n\n<p>Future work:</p>\n\n<ul>\n<li>Use <a href=\"http://search.cpan.org/perldoc?AnyEvent::Filesys::Notify\" rel=\"nofollow noreferrer\">AnyEvent::Filesys::Notify</a> instead of a timer for the file check?</li>\n</ul>\n"}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 1, "accepted_answer_id": 43401420, "answer_count": 1, "score": 1, "last_activity_date": 1492119642, "creation_date": 1492027523, "last_edit_date": 1492097162, "question_id": 43378697, "link": "https://stackoverflow.com/questions/43378697/how-can-i-wait-for-the-completion-of-http-request-in-anyeventhttp", "title": "How can I wait for the completion of http_request in AnyEvent::HTTP?", "body": "<p>The program takes jobs from the database and executes AnyEvent::HTTP::http_request, how to correctly exit the program, after waiting for the completion of all requests?</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse AnyEvent;\nuse AnyEvent::DBI;\nuse AnyEvent::HTTP;\n\n\nmy @queue;\nmy $added = 0;\nmy $finished = 0;\nmy $uid = int(rand(900000)) + 100000;\nmy ($run, $jobs, $log, $quit);\n\nmy $db = AnyEvent::DBI-&gt;new('DBI:mysql:dbname=;host=');\n\nmy $cv = AnyEvent-&gt;condvar;\n\n$run = AnyEvent-&gt;timer(\n    after =&gt; 5,\n    interval =&gt; 0.1,\n    cb =&gt; sub {\n        if ($#queue != -1 &amp;&amp; $added - $finished &lt; 300) {\n            my $job = shift @queue;\n            my $r; $r = http_request(\n                GET =&gt; $job-&gt;{url},\n                sub {\n                    undef $r;\n                    my ($body, $header) = @_;\n                    ...\n                    $finished++;\n                }\n            );\n            $added++;\n        }\n    }\n);\n\n$jobs = AnyEvent-&gt;timer(\n    after =&gt; 0.1,\n    interval =&gt; 5,\n    cb =&gt; sub {\n        if ($#queue &lt; 1000) {\n            $db-&gt;exec(q{UPDATE `jobs` SET `lock` = ? WHERE `lock` = 0 ORDER BY `time` ASC LIMIT 1000}, $uid, sub {\n                $db-&gt;exec(q{SELECT * FROM `jobs` WHERE `lock` = ?}, $uid, sub {\n                    my ($db, $rows, $rv) = @_;\n                    push @queue, @$rows;\n                    $db-&gt;exec(q{UPDATE `jobs` SET `lock` = 1 WHERE `lock` = ?}, $uid, sub { });\n                });\n            });\n        }\n    }\n);\n\n$log = AnyEvent-&gt;timer(\n    after =&gt; 5,\n    interval =&gt; 3,\n    cb =&gt; sub {\n        printf \"Queue: %-6d Added: %-6d During: %-6d Total: %-6d\\n\", $#queue, $added, $added-$finished, $finished;\n    }\n);\n\n$quit = AnyEvent-&gt;timer(\n    after =&gt; 1,\n    interval =&gt; 10,\n    cb =&gt; sub {\n         if (-f 'stop') {\n            print \"Exit\\n\";\n            $cv-&gt;send;\n         }\n    }\n);\n\nmy $result = $cv-&gt;recv;\n</code></pre>\n\n<p>And maybe you know the best way to queue jobs and execute them, then show your templates in AnyEvent + AnyEvent::HTTP, I use AnyEvent timers, which is better and faster ?</p>\n\n<p>New version :</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse AnyEvent;\nuse AnyEvent::DBI;\nuse AnyEvent::HTTP;\n\nmy $pid = int(rand(900000)) + 100000;\nmy $run = 1;\nmy $capacity = 300;\nmy $added = 0;\nmy $finished = 0;\n\nmy $cv = AnyEvent-&gt;condvar;\n\nmy $dbh = AnyEvent::DBI-&gt;new('DBI:mysql:dbname=;host=');\n\nmy $log = AnyEvent-&gt;timer(\n    after =&gt; 1,\n    interval =&gt; 3,\n    cb =&gt; sub {\n        printf \"Added: %-6d Finished: %-6d Active: %-6d\\n\", $added, $finished, $AnyEvent::HTTP::ACTIVE if $finished;\n        if ($run == 0 &amp;&amp; $AnyEvent::HTTP::ACTIVE == 0) {\n            $cv-&gt;send;\n        }\n    }\n);\n\nwhile (! -f 'stop') {\n        my $done = AnyEvent-&gt;condvar;\n        $dbh-&gt;exec(q{UPDATE `jobs` SET `lock` = ? WHERE `lock` = 0 ORDER BY `time` ASC LIMIT ?}, $pid, $capacity, sub {\n            $dbh-&gt;exec(q{SELECT * FROM `jobs` WHERE `lock` = ?}, $pid, sub {\n                my ($dbh, $rows, $rv) = @_;\n                $dbh-&gt;exec(q{UPDATE `jobs` SET `lock` = 1 WHERE `lock` = ?}, $pid, sub {});\n                $done-&gt;send($rows);\n            });\n        });\n        my $jobs = $done-&gt;recv;\n\n        my $done = AnyEvent-&gt;condvar;\n        foreach my $job (@$jobs) {\n            my $content;\n            my $r; $r = http_request(\n                GET =&gt;  $job-&gt;{url},\n                sub {\n                    undef $r;\n                    my ($body, $header) = @_;\n                    ...\n                    $dbh-&gt;exec(q{UPDATE `jobs` SET `lock` = 0, `time` = CURRENT_TIMESTAMP WHERE `id` = ?}, $job-&gt;{id}, sub {});\n                    $done-&gt;send if $AnyEvent::HTTP::ACTIVE &lt; $capacity;\n                    $finished++;\n                }\n            );\n            $added++;\n        }\n        $done-&gt;recv;\n}\n$run = 0;\n$cv-&gt;recv;\n</code></pre>\n"}, {"tags": ["perl", "shell"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492023884, "post_id": 43377586, "comment_id": 73817356, "body": "Please show the whole <code>awk</code> commands used in the script. How do you run the command from the terminal window?"}, {"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492023953, "post_id": 43377586, "comment_id": 73817395, "body": "I know the <code>awk</code> commends are fine because the piping works fine without adding the file name. But they are:  <code>awk &#39;FNR == &#39;$i &lt;&quot;${d}&quot;.fasta</code> and <code>awk &#39;FNR == 2&#39; &lt;&quot;${d}&quot;.fasta</code>"}, {"owner": {"reputation": 484, "user_id": 7793322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0H5z.jpg?s=128&g=1", "display_name": "Roger Sinasohn", "link": "https://stackoverflow.com/users/7793322/roger-sinasohn"}, "edited": false, "score": 0, "creation_date": 1492024902, "post_id": 43377586, "comment_id": 73817940, "body": "Perhaps it might be worth copying your <code>~&#47;Desktop&#47;SNP...</code> command except changing the name of the <code>perl</code> program to <code>echo</code> to see what the <code>awk</code> commands (and the filename expansion) are becoming inside your script?  It seems that if it works from the command line but not within the script, there&#39;s something different in the environment inside the script (some variable not initialized or some other setting or a different location) that is causing the problem.  You know what the <code>awk</code> commands give you on the command line, but what about from inside the script?"}, {"owner": {"reputation": 484, "user_id": 7793322, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S0H5z.jpg?s=128&g=1", "display_name": "Roger Sinasohn", "link": "https://stackoverflow.com/users/7793322/roger-sinasohn"}, "edited": false, "score": 1, "creation_date": 1492025035, "post_id": 43377586, "comment_id": 73818021, "body": "That is, right before running the perl script, add these lines:  <code>echo $(awk &#39;FNR == &#39;$i &lt;&quot;${d}&quot;.fasta)</code>, <code>echo $(awk ...)</code>, and <code>echo &quot;${d}&quot;.txt</code> to see what you&#39;re actually getting.  It&#39;s likely different from what you think you&#39;re getting."}, {"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 0, "creation_date": 1492025314, "post_id": 43377586, "comment_id": 73818155, "body": "I got it to work turned out to be a pretty stupid mistake on my part (was editing the file on my desktop and not in my repo) will probably delete this question sorry about that"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1492025535, "post_id": 43377586, "comment_id": 73818274, "body": "@quantik  Nice that you caught it, but it seems to me that the question still raises valuable points, nicely addressed in the answer, too.  I&#39;d leave it (not delete)."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 2, "creation_date": 1492025643, "post_id": 43377586, "comment_id": 73818328, "body": "Few notes. Here isn&#39;t anything what you can done in <code>awk</code> and can&#39;t in <code>perl</code>. So, me suggesting you replace every <code>awk</code> piece with <code>perl</code> and you need master only one language. And for you the perl is especially good, because on the CPAN are zilion modules for dealing with FASTA files and much-much more modules for bio-informatics... Just my 2 cents. :)"}], "answers": [{"comments": [{"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 0, "creation_date": 1492024084, "post_id": 43377704, "comment_id": 73817464, "body": "I know the <code>awk</code> scripts are not returning empty because it works perfectly fine without passing the file name as a parameter to the perl script. But I shall try this."}, {"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 0, "creation_date": 1492024384, "post_id": 43377704, "comment_id": 73817645, "body": "Did not work. I believe it has to do with the passing of the text file as an argument not the <code>awk</code> scripts."}], "tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": true, "score": 3, "last_activity_date": 1492023938, "creation_date": 1492023938, "answer_id": 43377704, "question_id": 43377586, "link": "https://stackoverflow.com/questions/43377586/perl-not-recognizing-input-file-uninitialized-filename/43377704#43377704", "title": "Perl not recognizing input file uninitialized $filename", "body": "<p>The shell is performing word splitting. If your awk scripts return empty, the <code>\"${d}\".txt</code> parameter will end up as <code>$ARGV[1]</code> or <code>$ARGV[0]</code>. If your awk scripts return a string containing whitespace, it will end up further down...</p>\n\n<p>To avoid this, you should quote them, like this:</p>\n\n<pre><code>\"`awk ...`\"\n</code></pre>\n\n<p>Even better would be:</p>\n\n<pre><code>\"$(awk ...)\"\n</code></pre>\n"}], "owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 43377704, "answer_count": 1, "score": 1, "last_activity_date": 1492024257, "creation_date": 1492023539, "last_edit_date": 1492024257, "question_id": 43377586, "link": "https://stackoverflow.com/questions/43377586/perl-not-recognizing-input-file-uninitialized-filename", "title": "Perl not recognizing input file uninitialized $filename", "body": "<p>I am calling a perl program from a bash script. This Perl script works when I flag its arguments from the command line but when I call it from the bash script it gives an error.</p>\n\n<p>Here is the relevant part of the bash script:</p>\n\n<pre><code>for ((i=1; i&lt;=$z; i++))\ndo \n    if (($i%2 == 0)); then\n         ~/Desktop/SNP_finder.pl `awk 'FNR == '$i &lt;\"${d}\".fasta` `awk ...` \"${d}\".txt\n    else\n...\n</code></pre>\n\n<p>and the Perl script:</p>\n\n<pre><code>local $, = \"\\t\";\nmy @read = split('', $ARGV[0]);\nmy @reference = split('', $ARGV[1]);\nmy $filename = $ARGV[2];\n...\nopen(my $fh, '&gt;&gt;', $filename) or die;\nprint $fh \"Reference \", \"SNP \", \"Location\\n\";\n...\n</code></pre>\n\n<p>I can run <code>SNP_finder.pl</code> fine from the terminal window but when I pipe it to this Bash script it gives me the error <code>Use of unitialized value $filename</code> and claims the value of <code>$filename</code> is <code>''</code>.</p>\n"}, {"tags": ["regex", "perl", "file"], "answers": [{"tags": [], "owner": {"reputation": 408, "user_id": 4512384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdb84035d87b6928be7908114eed8294?s=128&d=identicon&r=PG&f=1", "display_name": "Ken H.", "link": "https://stackoverflow.com/users/4512384/ken-h"}, "is_accepted": false, "score": -2, "last_activity_date": 1492023483, "last_edit_date": 1492023483, "creation_date": 1492020951, "answer_id": 43376805, "question_id": 43376566, "link": "https://stackoverflow.com/questions/43376566/perl-reading-a-file-that-matches-a-pattern-having-a-variable/43376805#43376805", "title": "Perl-Reading a file that matches a pattern having a variable", "body": "<p>Try this:</p>\n\n<pre><code>use POSIX qw(strftime);\n\n$fileday = strftime \"%Y%m%d\", localtime;\nprint \"time = ${fileday}\\n\";\n$path = \".\\\\\";\n@files= &lt;*$fileday*&gt;; # for multiple files\nforeach (@files) {\n print \"$_  \\n\";\n}\n</code></pre>\n\n<p>It will find multiple files:</p>\n\n<pre><code>time = 20170412\nmyfile_20170412_junk.dat\nmyfile_20170412_junk2.dat\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492086206, "post_id": 43377248, "comment_id": 73845286, "body": "|@CoderHat: <code>glob</code> is <i>identical</i> to <code>&lt;...&gt;</code> except that it is clearer what is happening. <code>&lt;FILEHANDLE&gt;</code> is the same as <code>readline</code>, while <code>&lt;=&gt;</code> is the comparison operator, and they are easy to confuse."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492086476, "post_id": 43377248, "comment_id": 73845489, "body": "@l&#39;L&#39;l: As above, because <code>&lt;...&gt;</code> is the same as <code>glob</code>, <code>my $scan = glob &lt;&quot;${file}_*.DAT&quot;&gt;</code> is equivalent to <code>my $scan = glob glob qq&#47;&quot;$file_*.DAT&quot;&#47;</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492090773, "post_id": 43377248, "comment_id": 73848748, "body": "@l&#39;L&#39;l: There are still many issues with your code. I suggest that you test it. And <b><i>always</i></b> <code>use strict</code> and <code>use warnings &#39;all&#39;</code> at the top of <i>every</i> Perl program you write."}], "tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": true, "score": -1, "last_activity_date": 1492098444, "last_edit_date": 1492098444, "creation_date": 1492022440, "answer_id": 43377248, "question_id": 43376566, "link": "https://stackoverflow.com/questions/43376566/perl-reading-a-file-that-matches-a-pattern-having-a-variable/43377248#43377248", "title": "Perl-Reading a file that matches a pattern having a variable", "body": "<p>Your code has a few issues, the <code>date</code> was not formatted correctly, and no means for iterating files:</p>\n\n<p><strong>Update 2</strong> (using <em>strict</em> and <em>warnings</em>):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\nuse feature 'say';\nuse POSIX qw(strftime);\n\nmy $fday = strftime \"%Y%m%d\", localtime;\nmy $path = \"mydir/scripts/Employee_\" . $fday . \"_\" ;\nmy @file = glob \"$path\" .'[0-9]' x 4 . '.DAT';\n\nsay for @file;\n</code></pre>\n\n<p>Or you could even do the following to be non-date specific ...</p>\n\n<pre><code>my @list = glob \"mydir/scripts/Employee_\" . \n                '[0-9]' x 8 . '_' . \n                '[0-9]' x 4 . \n                '.DAT';\n\nsay for @list;\n</code></pre>\n\n<p>This is likely not the way people might normally do this, but it's a way \u2014  and one that conforms.</p>\n\n<p><strong>Result:</strong></p>\n\n<pre><code>mydir/scripts/Employee_20170412_2324.DAT\nmydir/scripts/Employee_20170413_2325.DAT\nmydir/scripts/Employee_20170413_2327.DAT\n</code></pre>\n\n<blockquote class=\"spoiler\">\n  <p> \u232b <a href=\"https://gist.github.com/anonymous/5be481f3be8f67b8add74ac2ea401319\" rel=\"nofollow noreferrer\">deprecated : no strict/warning examples</a>  </p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1492024034, "post_id": 43377646, "comment_id": 73817440, "body": "@jm666: Are you worried about whitespace in the file names? Because there aren&#39;t any here. Anyway, it would be better to <code>use File::Glob &#39;:bsd_glob&#39;</code> to fix that. Adding quotes as you have done just gives the same problem with quotes instead of whitespace."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1492023953, "last_edit_date": 1492023953, "creation_date": 1492023766, "answer_id": 43377646, "question_id": 43376566, "link": "https://stackoverflow.com/questions/43376566/perl-reading-a-file-that-matches-a-pattern-having-a-variable/43377646#43377646", "title": "Perl-Reading a file that matches a pattern having a variable", "body": "<p></p>\n\n<p>Note that <code>%M</code> is the minute field; you need <code>%m</code> for the month</p>\n\n<p>This will do what you need, but you need to be careful with the relative path <code>mydir/scripts</code> as it will give different results depending on the current directory when you run the program</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use utf8;\nuse strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Time::Piece;\n\nmy $path    = 'mydir/scripts';\nmy $pattern = localtime-&gt;strftime('Employee_%Y%m%d_*.DAT');\n\nsay $pattern;\n\nmy @files = glob \"$path/$pattern\";\n\nsay for @files;\n</code></pre>\n\n<h3>output</h3>\n\n<p>This shows only the representation of <code>$pattern</code>. The list of files depends on your own system</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Employee_20170412_*.DAT\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 0, "last_activity_date": 1492024752, "creation_date": 1492024752, "answer_id": 43377920, "question_id": 43376566, "link": "https://stackoverflow.com/questions/43376566/perl-reading-a-file-that-matches-a-pattern-having-a-variable/43377920#43377920", "title": "Perl-Reading a file that matches a pattern having a variable", "body": "<p>Because I have always installed the <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a> module, my soultion would be:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse 5.014;\nuse warnings;\nuse Time::Piece;\nuse Path::Tiny;\n\nmy $t = localtime;\nmy $filepatt = $t-&gt;strftime(\"Employee_%Y%m%d_.*.DAT\");\n\nmy $dirpath = path('mydir/scripts');\nsay for $dirpath-&gt;children( qr/^$filepatt$/ );\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7858081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3822aee182c342f7d0acd812d4e36ed6?s=128&d=identicon&r=PG&f=1", "display_name": "CoderHat", "link": "https://stackoverflow.com/users/7858081/coderhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 43377248, "answer_count": 4, "score": -1, "last_activity_date": 1492098444, "creation_date": 1492020035, "last_edit_date": 1492023402, "question_id": 43376566, "link": "https://stackoverflow.com/questions/43376566/perl-reading-a-file-that-matches-a-pattern-having-a-variable", "title": "Perl-Reading a file that matches a pattern having a variable", "body": "<p>I want to read a file using perl that matches a pattern.  For Ex: Suppose i have a filename like Employee_20170412_2324.DAT where 20170412 is today's date in YYYYMMDD format and 2324 is the time in HHmm format.  I want to match all the files with .DAT extension in scripts directory that matches the file name Employee with today's date irrespective of the time. I have written the code snippet below:  </p>\n\n<p><code>$fileday = date '+Y%M%d';\nchomp $fileday;\n$path = \"mydir/scripts/\";\n$file = &lt;$path/Employee_$fileday_*.DAT&gt;;</code>  </p>\n\n<p>In the above code, $path is recognized as \"mydir/scripts/\" but $fileday is not recognized as today's date. It is taking as \"$fileday\" itself.  I would appreciate any help on this.  Thank you.</p>\n"}, {"tags": ["perl", "perlscript"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1492021024, "post_id": 43376545, "comment_id": 73815781, "body": "Can you give us some <i>example</i> data. Because this is a really bad way of doing it, when you can just use perl to do the whole thing."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492021460, "post_id": 43376545, "comment_id": 73816030, "body": "Please show the <code>passwd.txt</code> file."}, {"owner": {"reputation": 129, "user_id": 5204037, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh3.googleusercontent.com/-A_LP91h7YUk/AAAAAAAAAAI/AAAAAAAAAL4/Rp7C-533Lt0/photo.jpg?sz=128", "display_name": "Sriram P", "link": "https://stackoverflow.com/users/5204037/sriram-p"}, "edited": false, "score": 0, "creation_date": 1492021761, "post_id": 43376545, "comment_id": 73816179, "body": "passwd.txt file has the output info of <code>#lsuser root</code> in aix operating system. I just taken into a file for experimenting on it, actually i need to use that command."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492021811, "post_id": 43376545, "comment_id": 73816209, "body": "Ok..Show the output anyway since it will help us create a solution for you."}, {"owner": {"reputation": 129, "user_id": 5204037, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh3.googleusercontent.com/-A_LP91h7YUk/AAAAAAAAAAI/AAAAAAAAAL4/Rp7C-533Lt0/photo.jpg?sz=128", "display_name": "Sriram P", "link": "https://stackoverflow.com/users/5204037/sriram-p"}, "edited": false, "score": 1, "creation_date": 1492021926, "post_id": 43376545, "comment_id": 73816273, "body": "passwd.txt data is : root id=0 pgrp=system minage=0 maxage=0 maxexpired=-1 minalpha=1 minother=1 mindiff=4 maxrepeats=8 minlen=8 histexpire=0"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6696125"}, "is_accepted": false, "score": 0, "last_activity_date": 1492020571, "creation_date": 1492020571, "answer_id": 43376727, "question_id": 43376545, "link": "https://stackoverflow.com/questions/43376545/how-to-awk-values-of-perl-array/43376727#43376727", "title": "how to awk values of perl array?", "body": "<p>Can you try this? </p>\n\n<pre><code>@arr1 = `cat passwd.txt | tr ' ' '\\n' | grep -i \"maxage|minage\"| sort`;\n$x = `$arr1[0] |  awk -F= {print $2}`; // maybe $3 is true index\nif ( x == 0 )\n  {\n      print  \"Then print task done\";\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1492022506, "creation_date": 1492022506, "answer_id": 43377272, "question_id": 43376545, "link": "https://stackoverflow.com/questions/43376545/how-to-awk-values-of-perl-array/43377272#43377272", "title": "how to awk values of perl array?", "body": "<p>You can do the whole process in Perl. For example:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy $fn = 'passwd.txt';\nopen ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\nmy @arr1 = sort grep /maxage|minage/i, split ' ', &lt;$fh&gt;;\nclose $fh;\nif ( (split /=/, shift @arr1)[1] == 0) {\n   say \"done\";\n}\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5204037, "user_type": "registered", "accept_rate": 19, "profile_image": "https://lh3.googleusercontent.com/-A_LP91h7YUk/AAAAAAAAAAI/AAAAAAAAAL4/Rp7C-533Lt0/photo.jpg?sz=128", "display_name": "Sriram P", "link": "https://stackoverflow.com/users/5204037/sriram-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492022506, "creation_date": 1492019983, "question_id": 43376545, "link": "https://stackoverflow.com/questions/43376545/how-to-awk-values-of-perl-array", "title": "how to awk values of perl array?", "body": "<p>I have an some attributes with values stored in an array as below, now i need to perform some checks on attribute values,Suggest me how can i proceed in perl.</p>\n\n<blockquote>\n  <p>@arr1 = `cat passwd.txt|tr ' ' '\\n'|egrep -i \"maxage|minage\"|sort'`;</p>\n</blockquote>\n\n<p>array arr1 contains info as \"maxage=0  minage=0\"</p>\n\n<p>In this i need to perform <strong>if condition</strong> on the value of maxage, is there any way like below, suggest me as i am new to perl.</p>\n\n<p><code>if ( @arr1[0]|awk -F= '{print $2}' == 0 )\n  {\n      printf  \"Then print task done\";\n  }</code></p>\n"}, {"tags": ["bash", "perl", "ldap", "base64"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1492021264, "post_id": 43376391, "comment_id": 73815920, "body": "What have you tried so far? Do you have access to the LDIF file?"}, {"owner": {"reputation": 3, "user_id": 7857939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b9c02c53b7de9817fa22ced8ae0f42?s=128&d=identicon&r=PG&f=1", "display_name": "Chronos511", "link": "https://stackoverflow.com/users/7857939/chronos511"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1492089190, "post_id": 43376391, "comment_id": 73847511, "body": "I&#39;m sorry for not replying sooner; I didn&#39;t see this comment hiding up here. I was still in the researching stage and hadn&#39;t tried anything yet. It&#39;s the entire LDAP database, not just one LDIF. But, it looks like I&#39;m onto an answer below. Thanks for chiming in! :-)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7857939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b9c02c53b7de9817fa22ced8ae0f42?s=128&d=identicon&r=PG&f=1", "display_name": "Chronos511", "link": "https://stackoverflow.com/users/7857939/chronos511"}, "edited": false, "score": 0, "creation_date": 1492021294, "post_id": 43376692, "comment_id": 73815936, "body": "I had noticed the double colon but didn&#39;t know if that was consistent with base64 entries in the LDAP or just an artifact of the data entry error. I doubt I could dump the entire database, but maybe I could write a script to cycle through it looking for that..."}, {"owner": {"reputation": 649, "user_id": 5602491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2426d2645029b0fa49495a956020ee66?s=128&d=identicon&r=PG&f=1", "display_name": "gilez", "link": "https://stackoverflow.com/users/5602491/gilez"}, "reply_to_user": {"reputation": 3, "user_id": 7857939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b9c02c53b7de9817fa22ced8ae0f42?s=128&d=identicon&r=PG&f=1", "display_name": "Chronos511", "link": "https://stackoverflow.com/users/7857939/chronos511"}, "edited": false, "score": 0, "creation_date": 1492022440, "post_id": 43376692, "comment_id": 73816569, "body": "Yes, the great internets will tell you :: means base64. Rather than dumping the entire db, something simple like this will at least get you dns: <code>slapcat [...] | awk &#39;&#47;^dn&#47; {dn=$0} &#47;::&#47; {print dn &quot;\\n&quot; $0}&#39;</code>"}, {"owner": {"reputation": 3, "user_id": 7857939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b9c02c53b7de9817fa22ced8ae0f42?s=128&d=identicon&r=PG&f=1", "display_name": "Chronos511", "link": "https://stackoverflow.com/users/7857939/chronos511"}, "edited": false, "score": 0, "creation_date": 1492089156, "post_id": 43376692, "comment_id": 73847478, "body": "It seems I don&#39;t have slapcat on the system and, of course, I can&#39;t install it. But, it looks like I can get a similar, if slower, result by repeatedly searching the LDAP with ldapsearch."}, {"owner": {"reputation": 3, "user_id": 7857939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b9c02c53b7de9817fa22ced8ae0f42?s=128&d=identicon&r=PG&f=1", "display_name": "Chronos511", "link": "https://stackoverflow.com/users/7857939/chronos511"}, "edited": false, "score": 0, "creation_date": 1492100643, "post_id": 43376692, "comment_id": 73855496, "body": "I wrote a perl script that pulls all the DNs from all the OUs, and then searches all of them, grepping for ::. Getting a nice CSV of all of the errors. Thanks for the :: hint! :-)"}], "tags": [], "owner": {"reputation": 649, "user_id": 5602491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2426d2645029b0fa49495a956020ee66?s=128&d=identicon&r=PG&f=1", "display_name": "gilez", "link": "https://stackoverflow.com/users/5602491/gilez"}, "is_accepted": true, "score": 1, "last_activity_date": 1492020453, "creation_date": 1492020453, "answer_id": 43376692, "question_id": 43376391, "link": "https://stackoverflow.com/questions/43376391/how-can-i-find-but-not-decode-base64-entries-in-an-ldap/43376692#43376692", "title": "How can I find, but not decode, BASE64 entries in an LDAP?", "body": "<p>One option is to use <code>slapcat</code> to dump a copy of the database somewhere, and then <code>grep</code> inside that file for double colons <code>::</code>. For example:</p>\n\n<pre><code>dn: [...]\nuserPassword:: e1NBU0x9amhhbGxlcg==\nobjectClass: inetLocalMailRecipient\nobjectClass: inetOrgPerson\n</code></pre>\n\n<p>In this example you can see that the password is base64 encoded, since it has a double colon. The <code>dn</code> value tells you which object that is for of course.</p>\n"}], "owner": {"reputation": 3, "user_id": 7857939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b9c02c53b7de9817fa22ced8ae0f42?s=128&d=identicon&r=PG&f=1", "display_name": "Chronos511", "link": "https://stackoverflow.com/users/7857939/chronos511"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 43376692, "answer_count": 1, "score": 0, "last_activity_date": 1492020453, "creation_date": 1492019514, "question_id": 43376391, "link": "https://stackoverflow.com/questions/43376391/how-can-i-find-but-not-decode-base64-entries-in-an-ldap", "title": "How can I find, but not decode, BASE64 entries in an LDAP?", "body": "<p>I have a rather large ODSEE LDAP that I need to find all base64 entries inside of. I do not need to decode them, merely find them. The majority of them are the result of bad data entry, such as a leading or trailing space.</p>\n\n<p>I've tried to find some code examples online, but everything I've found is how to decode the entries when encountered. Since decoding them would make the error harder to spot (is there a trailing space there? Can't tell!) I need to avoid that.</p>\n\n<p>I would prefer bash or perl answers. I'm limited on what perl modules I can use however due to restrictions placed by upper management.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1492018959, "post_id": 43376193, "comment_id": 73814679, "body": "Then what <i>would</i> you touch?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 0, "creation_date": 1492019018, "post_id": 43376193, "comment_id": 73814709, "body": "The executable I guess."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1492019342, "post_id": 43376193, "comment_id": 73814863, "body": "What &quot;executable&quot; -- is that compiled somehow? The one-liner you show will just print that. You can post-postprocess, filter these two things out of streams."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1492019513, "post_id": 43376193, "comment_id": 73814968, "body": "I mean the most stupid variation of this would be to make an alias of <code>perl</code> to <code>perl -e &#39;use v5.10; no warnings &#39;experimental::smartmatch&#39;; $code = some_magic(); eval $code</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1492023727, "post_id": 43376193, "comment_id": 73817284, "body": "That won&#39;t work if the code does <code>use warnings;</code> as it should."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1492024189, "post_id": 43376193, "comment_id": 73817540, "body": "That won&#39;t work if you launch a script with anything but just <code>perl</code> (with arguments)."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492023973, "post_id": 43376729, "comment_id": 73817411, "body": "Updated my answer with a practical solution"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1492065737, "post_id": 43376729, "comment_id": 73831950, "body": "Arf! With this <code>perl -e &#39;$SIG{__WARN__} = sub { warn(&quot;oops?&quot;) };</code> it doesn&#39;t work :( Do you know why?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1492066018, "post_id": 43376729, "comment_id": 73832105, "body": "What do you mean? It works for me (does absolutely nothing)."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1492066688, "post_id": 43376729, "comment_id": 73832446, "body": "Sorry, use this instead: <code>$ perl -e &#39;$SIG{__WARN__} = sub { warn(&quot;oops?&quot;) }; use v5.10; given(1) { when(1) {}}&#39; given is experimental at -e line 1. when is experimental at -e line 1.</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 1, "creation_date": 1492092191, "post_id": 43376729, "comment_id": 73849748, "body": "It&#39;s a compile time warning, but you&#39;re only setting up the handler at runtime. Use <code>BEGIN</code>"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492092706, "post_id": 43376729, "comment_id": 73850126, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/141654/discussion-between-nowox-and-ikegami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 17, "last_activity_date": 1596907510, "last_edit_date": 1596907510, "creation_date": 1492020579, "answer_id": 43376729, "question_id": 43376193, "link": "https://stackoverflow.com/questions/43376193/how-to-mute-that-when-and-given-are-experimental-in-perl/43376729#43376729", "title": "How to mute that when and given are experimental in Perl?", "body": "<p>First of all, note that smartmatching <a href=\"https://stackoverflow.com/q/16927024/589924\"><em>will</em></a> be removed or changed in a backwards incompatible manner. This may affect your <code>given</code> statements.</p>\n<hr />\n<p>To use <code>given</code>+<code>when</code> without warnings, one need the following:</p>\n<pre><code># 5.10+\nuse feature qw( switch );\nno if $] &gt;= 5.018, warnings =&gt; qw( experimental::smartmatch );\n</code></pre>\n<p>or</p>\n<pre><code># 5.18+\nuse feature qw( switch );\nno warnings qw( experimental::smartmatch );\n</code></pre>\n<p><a href=\"http://search.cpan.org/perldoc?experimental\" rel=\"nofollow noreferrer\">experimental</a> provides a shortcut for those two statements.</p>\n<pre><code>use experimental qw( switch );\n</code></pre>\n<hr />\n<p>Finally, you ask how to add this to your programs without changing them (and presumably without changing Perl). That leaves monkeypatching.</p>\n<p>I wouldn't recommend it. It's far easier to write a couple of one-liners to automatically fix up your programs that rewritting Perl's behaviour on the fly.</p>\n<p>But if you want to go in that direction, the simplest solution is probably to write a <code>$SIG{__WARN__}</code> handler that filters out the undesired warnings.</p>\n<pre><code>$SIG{__WARN__} = sub {\n   warn($_[0]) if $_[0] !~ /^(?:given|when) is experimental at /;\n};\n</code></pre>\n<p>(Of course, that won't work if your program makes use of <code>$SIG{__WARN__}</code> already.)</p>\n<p>To get it loaded without changing your programs or one-liners, all you have to do is place the patch in a module, and tell Perl to load the module as follows:</p>\n<pre><code>export PERL5OPT=-MMonkey::SilenceSwitchWarning\n</code></pre>\n<hr />\n<pre><code>$ cat Monkey/SilenceSwitchWarning.pm\npackage Monkey::SilenceSwitchWarning;\n\nuse strict;\nuse warnings;\n\n$SIG{__WARN__} = sub {\n    warn($_[0]) if $_[0] !~ /^(?:given|when) is experimental at /;\n};\n\n1;\n\n$ perl -e 'use v5.10; given (12) { when (12) { print &quot;Hello World\\n&quot; }}'\ngiven is experimental at -e line 1.\nwhen is experimental at -e line 1.\nHello World\n\n$ export PERL5OPT=-MMonkey::SilenceSwitchWarning\n\n$ perl -e 'use v5.10; given (12) { when (12) { print &quot;Hello World\\n&quot; }}'\nHello World\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 3, "last_activity_date": 1575995456, "creation_date": 1575995456, "answer_id": 59271698, "question_id": 43376193, "link": "https://stackoverflow.com/questions/43376193/how-to-mute-that-when-and-given-are-experimental-in-perl/59271698#59271698", "title": "How to mute that when and given are experimental in Perl?", "body": "<pre><code>no warnings 'experimental';\n</code></pre>\n\n<p>...works in version 5.22 at least.</p>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4850, "favorite_count": 2, "accepted_answer_id": 43376729, "answer_count": 2, "score": 14, "last_activity_date": 1596907510, "creation_date": 1492018762, "question_id": 43376193, "link": "https://stackoverflow.com/questions/43376193/how-to-mute-that-when-and-given-are-experimental-in-perl", "title": "How to mute that when and given are experimental in Perl?", "body": "<p>I am migrating an old toolchain to a new system and now I get plenty of notifications <code>given is experimental</code> or <code>when is experimental</code>. </p>\n\n<pre><code>$ perl -e 'use v5.10; given (12) { when (12) { print \"Hello World\" }}'\ngiven is experimental at -e line 1.\nwhen is experimental at -e line 1.\nHello World\n</code></pre>\n\n<p>I would like my new system to be fully compatible with the old one. By this I mean the exact same output. </p>\n\n<p>Is there a way to mute these notifications without touching the oneliners nor the scripts?</p>\n"}, {"tags": ["arrays", "perl", "hash", "printing"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1492014880, "post_id": 43374939, "comment_id": 73812441, "body": "We need some more information about your source data to answer."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1492015351, "post_id": 43375167, "comment_id": 73812713, "body": "... it&#39;s almost creepy how similar that code is, to the point where we&#39;ve both picked similar example data independently..."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1492015518, "post_id": 43375167, "comment_id": 73812817, "body": "yes... it happens sometimes :) you provided a more general solution though, allowing for variable row lengths"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 1, "last_activity_date": 1492015397, "last_edit_date": 1492015397, "creation_date": 1492015194, "answer_id": 43375167, "question_id": 43374939, "link": "https://stackoverflow.com/questions/43374939/print-hash-of-arrays-as-colums-to-file/43375167#43375167", "title": "Print hash of arrays as colums to file", "body": "<p>You can try this:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\n\nmy %out_hash = (\n    a =&gt; [1,2,3],\n    b =&gt; [3,4,5],\n);\n\nmy @keys = sort keys %out_hash;\nsay join \"\\t\", @keys;\nmy $N = 3;\nfor my $i (0 .. ($N-1)) {\n    my @row;\n    for my $key (@keys) {\n        push @row, $out_hash{$key}-&gt;[$i];\n    }\n    say join \"\\t\", @row;\n}\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>a   b\n1   3\n2   4\n3   5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "edited": false, "score": 0, "creation_date": 1492017236, "post_id": 43375199, "comment_id": 73813799, "body": "Thank both of you very much ! Both approaches worked perfectly. I actually thought about organizing the data differently but the main problem is that I need to group something and hash of arrays was the best approach to solve this. I thought about turning the HoA into a 2D Matrix but the thought of trying to transpose it in perl frightened me a little bit ( rather new to perl )."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1492015308, "creation_date": 1492015308, "answer_id": 43375199, "question_id": 43374939, "link": "https://stackoverflow.com/questions/43374939/print-hash-of-arrays-as-colums-to-file/43375199#43375199", "title": "Print hash of arrays as colums to file", "body": "<p>If I understand you correctly - you have a hash of arrays, that you want to print in columns. </p>\n\n<p>To do that:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy %test = (\n   a =&gt; [ 1, 2, 3 ],\n   b =&gt; [ 4, 5, 6, 7 ],\n);\n\nmy @header = sort keys %test;\n\nprint join (\",\", @header), \"\\n\";\nwhile ( map {@$_} values %test ) {\n   my @row;\n   push( @row, shift @{ $test{$_} } // '' ) for @header;\n   print join (\",\", @row ), \"\\n\";\n}\n</code></pre>\n\n<p>But you'd probably better off with a different data structure, that's got your data organise row-wise, and iterate row by row using a hash slice instead. </p>\n"}], "owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 43375199, "answer_count": 2, "score": 0, "last_activity_date": 1492015397, "creation_date": 1492014461, "question_id": 43374939, "link": "https://stackoverflow.com/questions/43374939/print-hash-of-arrays-as-colums-to-file", "title": "Print hash of arrays as colums to file", "body": "<p>Is there a way to print a hash of arrays to a file with the keys to the hash as header and the values of the arrays as tab ( or anything else ) delimited columns ?</p>\n\n<p>My last try was something like this:</p>\n\n<pre><code>foreach my $key(sort keys %outHash){\n\n    my $temp1 = join (\"\\n\",@{$outHash{$key}});\n\n    my $temp2 = $key.\"\\n\".$temp1;\n\n    print OUTPUT \"$temp2\\t\";\n    print OUTPUT \"\\n\";\n\n}\n</code></pre>\n\n<p>Which produces just horrible output.\nAny help would be greatly appreciated ! \nThank you.</p>\n"}, {"tags": ["perl", "unix", "sh", "keystore", "keytool"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 2, "creation_date": 1492013229, "post_id": 43374500, "comment_id": 73811448, "body": "The error is not from Perl, it&#39;s from the shell (see the <code>sh</code> in the beginning of the error message). Probably your your <code>$finali</code> variable is not defined or is the empty string."}, {"owner": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "edited": false, "score": 0, "creation_date": 1492014436, "post_id": 43374500, "comment_id": 73812173, "body": "yes sorry .corrected"}], "answers": [{"comments": [{"owner": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "edited": false, "score": 0, "creation_date": 1492013916, "post_id": 43374585, "comment_id": 73811845, "body": "edited code sample please check"}, {"owner": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "edited": false, "score": 0, "creation_date": 1492013941, "post_id": 43374585, "comment_id": 73811862, "body": "tried with &quot;\\n&quot; but still getting same issue"}, {"owner": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "edited": false, "score": 0, "creation_date": 1492015071, "post_id": 43374585, "comment_id": 73812550, "body": "i tried chomp(@test) but still getting this sh: -c: line 1: syntax error near unexpected token <code>|&#39; sh: -c: line 1: </code> | grep Valid &#39;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "edited": false, "score": 0, "creation_date": 1492015442, "post_id": 43374585, "comment_id": 73812771, "body": "oh, I see you&#39;ve updated your question. Updated my answer."}, {"owner": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "edited": false, "score": 0, "creation_date": 1492017458, "post_id": 43374585, "comment_id": 73813921, "body": "thanks ,but shellQuote and File::Rule feature is not availbale . Can&#39;t locate String/ShellQuote.pm in @INC (@INC contains: /usr/local/lib64/perl5"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "edited": false, "score": 0, "creation_date": 1492018170, "post_id": 43374585, "comment_id": 73814277, "body": "So install them"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1492016284, "last_edit_date": 1492016284, "creation_date": 1492013263, "answer_id": 43374585, "question_id": 43374500, "link": "https://stackoverflow.com/questions/43374500/perl-syntax-error-near-unexpected-token/43374585#43374585", "title": "Perl: Syntax error near unexpected token `|&#39;", "body": "<p><code>@test</code> contains newline-terminated items. This is causing <code>| grep Valid</code> to be executed as a separate (invalid) command.</p>\n\n<p>Change</p>\n\n<pre><code>my @test = `cd /usr/keystores; find . -name '\\*\\_old\\_id\\.jks'`;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>my @test = `cd /usr/keystores; find . -name '*_old_id.jks'`;\nchomp(@test);\n</code></pre>\n\n<p>and replace both</p>\n\n<pre><code>print \"@test\";\n</code></pre>\n\n<p>with</p>\n\n<pre><code>print \"$_\\n\" for @test;\n</code></pre>\n\n<hr>\n\n<p>Note:</p>\n\n<ul>\n<li>You'll have (other) problems if your file names contain special characters. [String::ShellQuote]'s <code>shell_quote</code> should be used to insert text into shell commands.</li>\n<li><code>s/\\.\\///g for @test;</code> should be <code>s/^\\.\\/// for @test;</code>. You only want to remove the leading <code>./</code>.</li>\n<li><code>foreach my $j(0 ..$#fus_res) { foreach my $i(0 .. $#test) { ... } }</code> should simply be <code>foreach my $j(0 ..$#fus_res) { my $i = $j; ... }</code>!!!</li>\n</ul>\n\n<p>Better version:</p>\n\n<pre><code>use strict;\nuse warnings qw( all );\nuse feature qw( say );\n\nuse File::Find::Rule   qw( );\nuse String::ShellQuote qw( shell_quote );\n\nmy @qfns =\n   Find::File::Rule\n      -&gt;relative\n      -&gt;name('*_old_id.jks')\n      -&gt;file\n      -&gt;in('/usr/keystores');\n\nsay for @qfns;\n\nfor my $qfn (@qfns) {\n     my $finali = $qfn;\n     my $finalj = substr($qfn, 0, -14);\n\n     my $cmd = shell_quote(\"keytool\", \"-list\", \"-v\", \"-storepass\", \"2xxpw\", \"-alias\", \"$finalj\", \"-keystore\", \"$finali\");\n\n     my @output = grep { /Valid/ } `cd /usr/keystores ; $cmd`;\n     # ...Error checking...\n\n     print \"test_final=@output\";\n}\n</code></pre>\n"}], "owner": {"reputation": 391, "user_id": 4481971, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8313300a909834776122b30a3562c3a3?s=128&d=identicon&r=PG&f=1", "display_name": "user092", "link": "https://stackoverflow.com/users/4481971/user092"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4659, "favorite_count": 0, "closed_date": 1492172119, "answer_count": 1, "score": -3, "last_activity_date": 1492016284, "creation_date": 1492013031, "last_edit_date": 1492014330, "question_id": 43374500, "link": "https://stackoverflow.com/questions/43374500/perl-syntax-error-near-unexpected-token", "closed_reason": "Not suitable for this site", "title": "Perl: Syntax error near unexpected token `|&#39;", "body": "<p>I am newbie to perl ,</p>\n\n<p>I am tring to get the valid date from keystore using keytool.</p>\n\n<p>Sample code :</p>\n\n<pre><code>my @test = `cd /usr/keystores; find . -name '\\*\\_old\\_id\\.jks'`;\nprint \"@test\";\n\nmy @fus_res=();\n\ns/\\.\\///g for @test;\nprint \"@test\";\n\n\nforeach $res(@test)\n{\n my $short =substr($res,0,-14);\n\n push(@fus_res,$short);\n}\n\n\n    foreach my $j(0 ..$#fus_res) {\n        foreach my $i(0 .. $#test) {\n            if ($i eq  $j) {\n                my $finali=\"$test[$i]\";\n                my $finalj=\"$fus_res[$j]\";\n                my @test1=`cd /usr/keystores;keytool -list -v -storepass \"2xxpw\" -alias $finalj -keystore $finali | grep Valid `;\n                print \"test_final=@test1\";\n            }\n        }\n    }\n</code></pre>\n\n<p>But keystore command is working , for grep part getting error as :</p>\n\n<pre><code>sh: -c: line 1: syntax error near unexpected token `|'\nsh: -c: line 1: ` |grep Valid '\n</code></pre>\n\n<p>Please suggest what mistake in this sample code </p>\n"}, {"tags": ["json", "postgresql", "perl", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492011517, "post_id": 43369755, "comment_id": 73810257, "body": "It seems you don&#39;t put anything into <code>@res_arr</code> (so it should be empty)? What is the format of the return value of <code>$q_hash-&gt;fetchrow_hashref()</code>?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492014780, "post_id": 43369755, "comment_id": 73812394, "body": "Your <code>%result</code> has one key set, <code>$result{$tab}</code> -- which should be <code>t1</code> by the JSON you show,  but it shows as <code>t2</code> in the final print.  The code shows that you print <code>%res_hash</code> but then the (top-level) keys should be <code>t1_1</code> and <code>t1_2</code>.  Unless I misread some of this lot. What data structure does the last print show?"}, {"owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492026249, "post_id": 43369755, "comment_id": 73818672, "body": "@zdim yes, i&#39;ve made a typo, just corrected - it&#39;s <code>t1</code> in return json, and <code>t1_1</code> and <code>t1_2</code> are actually in <code>t1</code>."}, {"owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492027035, "post_id": 43369755, "comment_id": 73819152, "body": "@H&#229;konH&#230;gland as i know - it&#39;s hash object with parametres from sql query. In first sql it&#39;s <code>type_id</code>, <code>name</code> and <code>r</code>. second query has <code>type_id</code> and <code>m</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492034777, "post_id": 43369755, "comment_id": 73822881, "body": "So the print out you show is of <code>%result</code>?  But that&#39;s precisely what the code does -- <code>$result{$tab}{$q_id}</code> = ...` creates the top-level <code>t1</code> key for a hashref, which gets two subkeys (<code>t1_1</code> and <code>t1_2</code>) obtained by <code>$q_id = $sq-&gt;{query_id};</code> in the loop over <code>subqueries</code> with two <code>&quot;query_id&quot;</code>&#39;s from JSON.  What should be different?  What do you mean by &quot;<i>it fetches the hash keys from every query into one</i>&quot; ?"}, {"owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492039451, "post_id": 43369755, "comment_id": 73824376, "body": "@zdim i mean, it fetches not only <code>t1_1</code>&#39;s <code>query</code>, but every <code>query</code> from other subqueries, and, as you can see in output json - the <code>t1_1</code> and <code>t1_2</code> have the exact same objects, what i defenetly don&#39;t want. That&#39;s the problem"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492052767, "post_id": 43369755, "comment_id": 73827564, "body": "OK, I see.  But I get dizzy from trying to trace such deeply nested structure.  Don&#39;t prints help?  Print out values at places where you know what you should get, then review that.  It is hard to follow through all this."}, {"owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492070519, "post_id": 43369755, "comment_id": 73834706, "body": "@zdim updated lil bit my code. Print #1 is ok in both queries. But second shows some strange things: <code>t1_1</code> data fetched ok, but <code>t1_2</code> returns empty data, attempt to print its content shows <code>Use of uninitialized value in concatenation (.) or string at &quot;***.pl&quot; line 154.</code> (print #2 line);"}, {"owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1492070656, "post_id": 43369755, "comment_id": 73834786, "body": "@H&#229;konH&#230;gland Updated missed info. When copied the code and cut unrelated pieces from original source, i missed pushing into <code>@res_arr</code>, but it exist and not empty. Used as an array of hashes for <code>%result</code> hash."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1492070707, "post_id": 43369755, "comment_id": 73834818, "body": "@genesi5 Ok :) thanks for the update. I deleted my comment about <code>@res_arr</code>."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1492154133, "post_id": 43387630, "comment_id": 73873462, "body": "Great that you found it!  I would draw the reason back to the complexity of all that nesting.  (When that gets too bad it often means it&#39;s time to write a class.  On the other hand, of course, sometimes we have to just dig into detail, <i>very</i> carefully.)"}], "tags": [], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "is_accepted": true, "score": 1, "last_activity_date": 1492073516, "creation_date": 1492073516, "answer_id": 43387630, "question_id": 43369755, "link": "https://stackoverflow.com/questions/43369755/wrong-hash-filling-to-json-perl/43387630#43387630", "title": "Wrong hash filling to JSON, Perl", "body": "<p>Well, seems like i initialized <code>@res_arr</code> and <code>@res_hash</code> in wrong level - gotta be in <code>foreach</code>. The output is kinda what i need. At least i don't have duplicates. </p>\n\n<p>Gotta be sleep more X(</p>\n\n<pre><code>.... \nmy $q_id;\nforeach my $sq (@{$data-&gt;{subqueries}}){\n    my %res_hash;\n    my @res_arr;\n\n    my $query = \"\";\n    $q_id = $sq-&gt;{query_id};\n    print \"\\n\";\n    print \"$q_id\\n\";\n    ..........\n}\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 5373538, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-GxkXfmMS09k/AAAAAAAAAAI/AAAAAAAAAVE/5swI3yJ70nE/photo.jpg?sz=128", "display_name": "genesi5", "link": "https://stackoverflow.com/users/5373538/genesi5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 43387630, "answer_count": 1, "score": 1, "last_activity_date": 1492073516, "creation_date": 1492000623, "last_edit_date": 1492072476, "question_id": 43369755, "link": "https://stackoverflow.com/questions/43369755/wrong-hash-filling-to-json-perl", "title": "Wrong hash filling to JSON, Perl", "body": "<p>So, i'm making a programm fetching the data as hash from PostgreSQL, which uses a couple JSONs as parameter file and output datafile respectively. And i had some problem with fetching what it shouldn't fetch. Here's parameter json:</p>\n\n<pre><code>{\n    \"queries\": [\n        {\n            \"table_name\" : \"t1\",\n            \"subqueries\": [\n                {\n                    \"query_id\" : \"t1_1\",\n                    \"query\": [\n                        .....some sql query\n                    ],\n                    \"to_hash\" : { \n                        \"target_by\" : \"type_id\",   // key to index by\n                        \"keys\" : [\n                            {\n                                \"source\" : \"name\", // key in hash from db\n                                \"target\" : \"name\"  // key in new hash\n                            },\n                            {\n                                \"source\" : \"r\",\n                                \"target\" : \"r\"\n                            }\n                        ]\n                    }\n                },\n                {\n                    \"query_id\" : \"t1_2\",\n                    \"query\": [\n                        .....some sql query\n                    ],\n                    \"to_hash\" : { \n                        \"target_by\" : \"type_id\",\n                        \"keys\" : [\n                            {\n                                \"source\" : \"m\",\n                                \"target\" : \"m\"\n                            }\n                        ]\n                    }\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>....and here's a perl subroutine:</p>\n\n<pre><code>my $fname = \"query_params.json\";\n\nmy $q_data_raw;\n{\n    local $/;\n    open(my $fh, \"&lt;:encoding(UTF-8)\", $fname) or oops(\"$fname: $!\");\n    $q_data_raw = &lt;$fh&gt;;\n    close($fh);\n}\nmy $q_data = JSON-&gt;new-&gt;utf8-&gt;decode($q_data_raw);\nmy %result;\n\nsub blabla {\n\n    my $data = shift;\n    my($tab, $i) = ($data-&gt;{table_name}, 0);\n\n    if ($data-&gt;{subqueries} ne \"false\"){\n        my %res_hash;\n        my @res_arr;\n        my $q_id;\n        foreach my $sq (@{$data-&gt;{subqueries}}){\n\n            my $query = \"\";\n            $q_id = $sq-&gt;{query_id};\n            print \"\\n\";\n            print \"$q_id\\n\";\n\n            for(@{$sq-&gt;{query}}){\n                $query .= \"$_\\n\"; \n            }\n\n            my $t_by = $sq-&gt;{to_hash}{target_by};\n            my $q_hash = $db_connection-&gt;prepare($query);           \n            $q_hash-&gt;execute() or die( \"Unable to get: \" . $db_connection-&gt;errstr);\n\n            while(my $res = $q_hash-&gt;fetchrow_hashref()) {\n                # print Dumper $res; #print #1\n                for(@{$sq-&gt;{to_hash}-&gt;{keys}}){\n                    # print \"\\nkey:\\t\" . $_-&gt;{target} . \"\\nvalue:\\t\".$res-&gt;{$_-&gt;{source}}; #print #2\n                    $res_hash{$q_id}{$res-&gt;{$t_by}}{$_-&gt;{target}} = $res-&gt;{$_-&gt;{source}};\n                }\n                $res_hash{$q_id}{$res-&gt;{$t_by}}{__id} = $res-&gt;{$t_by};\n                # print Dumper %res_hash; #print #3\n            }\n            push @res_arr, $res_hash{$q_id};\n            # print Dumper $res_hash{$q_id}; #print #4\n            # print Dumper @res_arr; print #5\n\n            $result{$tab}{$q_id} = \\@res_arr;\n            $q_hash-&gt;finish();\n        }\n    }\n}\n\nfor (@{$q_data-&gt;{queries}}){ // hash from parameter json\n     blabla($_);\n}\nmy $json = JSON-&gt;new-&gt;pretty-&gt;encode(\\%result);\n# to json file\n</code></pre>\n\n<p>....and there's what i get:</p>\n\n<pre><code>{\n    \"t1\" : {\n        \"t1_1\" : [\n            {\n                //type_id_1_* - from first query\n                \"type_id_1_1\" : {\n                    \"r\" : \"4746\",\n                    \"__id\" : \"type_id_1_1\",\n                    \"name\" : \"blablabla\"\n                },\n                \"type_id_1_2\" : {\n                    \"r\" : \"7338\",\n                    \"__id\" : \"type_id_1_2\",\n                    \"name\" : \"nbmnbcxv\"\n                },\n                ....\n            },\n            {\n                //type_id_2_* - from second query\n                \"type_id_2_1\" : {\n                   \"m\" : \"6\",\n                    \"__id\" : \"type_id_2_1\"\n                },\n                \"type_id_2_2\" : {\n                   \"m\" : \"3\",\n                   \"__id\" : \"type_id_2_2\"\n                },\n                ............\n            }\n        ],\n        \"t1_2\" : [\n            {\n                \"type_id_1_1\" : {\n                   \"r\" : \"4746\",\n                   \"__id\" : \"type_id_1_1\",\n                   \"name\" : \"blablabla\"\n                },\n                   \"type_id_1_2\" : {\n                      \"r\" : \"7338\",\n                      \"__id\" : \"type_id_1_2\",\n                      \"name\" : \"nbmnbcxv\"\n                   },\n                   ....\n            },\n            {\n                \"type_id_2_1\" : {\n                    \"m\" : \"6\",\n                    \"__id\" : \"type_id_2_1\"\n                },\n                \"type_id_2_2\" : {\n                   \"m\" : \"3\",\n                    \"__id\" : \"type_id_2_2\"\n                },\n                ............\n            }\n        ]\n    }\n}\n</code></pre>\n\n<p>Somehow, it fetches the queries from other subqueries, what i don't want. And loop seems to be ok, probably. What am i doing wrong?</p>\n"}, {"tags": ["perl", "svn2git"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491999013, "post_id": 43368696, "comment_id": 73799970, "body": "Something on the network doesn&#39;t reply. Could be a timeout from the SVN server. It&#39;s not a Perl problem, but one of the systems that program is talking to."}], "answers": [{"tags": [], "owner": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "is_accepted": false, "score": 0, "last_activity_date": 1492006499, "creation_date": 1492006499, "answer_id": 43372112, "question_id": 43368696, "link": "https://stackoverflow.com/questions/43368696/svn2git-broken-pipe-error/43372112#43372112", "title": "svn2git broken pipe error", "body": "<p>For a one-time migration <code>git-svn</code> is <strong>not</strong> the right tool for conversions of repositories or repository parts. It is a great tool if you want to use Git as frontend for an existing SVN server, but for one-time conversions you should <strong>not</strong> use <code>git-svn</code>, but <code>svn2git</code> which is much more suited for this use-case.</p>\n\n<p>There are plenty tools called <code>svn2git</code>, the probably best one is the KDE one from <a href=\"https://github.com/svn-all-fast-export/svn2git\" rel=\"nofollow noreferrer\">https://github.com/svn-all-fast-export/svn2git</a>. I strongly recommend using that <code>svn2git</code> tool. It is the best I know available out there and it is very flexible in what you can do with its rules files.</p>\n\n<p>The <code>svn2git</code> tool you use is based on <code>git-svn</code> and thus suffers from most of the same drawbacks.</p>\n\n<p>You will be easily able to configure <code>svn2git</code>s rule file to produce the result you want from your current SVN layout and you can also tell it to keep empty directories by giving it a commandline option that causes it to put empty <code>.gitignore</code> files in the directories to keep them.</p>\n\n<p>If you are not 100% about the history of your repository, <code>svneverever</code> from <a href=\"http://blog.hartwork.org/?p=763\" rel=\"nofollow noreferrer\">http://blog.hartwork.org/?p=763</a> is a great tool to investigate the history of an SVN repository when migrating it to Git.</p>\n\n<hr>\n\n<p>Even though <code>git-svn</code> (or the <code>svn2git</code> you used) is easier to start with, here are some further reasons why using the KDE <code>svn2git</code> instead of <code>git-svn</code> is superior, besides its flexibility:</p>\n\n<ul>\n<li>the history is rebuilt much better and cleaner by <code>svn2git</code> (if the correct one is used), this is especially the case for more complex histories with branches and merges and so on</li>\n<li>the tags are real tags and not branches in Git</li>\n<li>with <code>git-svn</code> the tags contain an extra empty commit which also makes them not part of the branches, so a normal <code>fetch</code> will not get them until you give <code>--tags</code> to the command as by default only tags pointing to fetched branches are fetched also. With the proper svn2git tags are where they belong</li>\n<li>if you changed layout in SVN you can easily configure this with <code>svn2git</code>, with <code>git-svn</code> you will loose history eventually</li>\n<li>with <code>svn2git</code> you can also split one SVN repository into multiple Git repositories easily</li>\n<li>or combine multiple SVN repositories in the same SVN root into one Git repository easily</li>\n<li>the conversion is a gazillion times faster with the correct <code>svn2git</code> than with <code>git-svn</code></li>\n</ul>\n\n<p>You see, there are many reasons why <code>git-svn</code> is worse and the KDE <code>svn2git</code> is superior. :-)</p>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 1180714, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e23dfb8b195d37b7f1fb345e2ad1390f?s=128&d=identicon&r=PG", "display_name": "Spencer Williams", "link": "https://stackoverflow.com/users/1180714/spencer-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1538514486, "creation_date": 1538514486, "answer_id": 52616413, "question_id": 43368696, "link": "https://stackoverflow.com/questions/43368696/svn2git-broken-pipe-error/52616413#52616413", "title": "svn2git broken pipe error", "body": "<p>From what I can tell, the \"broken pipe\" error is due to a problem receiving a file. It might be really big or there may be something else odd about it.</p>\n\n<p>If you run into the error, fortunately in most cases you can simply re-run the <code>git svn clone</code> command or other related command and usually it can seamlessly resume from where it left off.</p>\n\n<p>If you are using <code>git-svn</code> to do a one time migration of an SVN repo to Git, just be sure to follow <a href=\"https://www.atlassian.com/git/tutorials/migrating-overview\" rel=\"nofollow noreferrer\">Atlassian's guide</a>. They have a tool for properly converting the SVN tags to Git tags, but it is a destructive process and you won't be able to use the git repo to sync with SVN anymore, so only do this when you're finally ready to abandon the SVN repo.</p>\n"}], "owner": {"reputation": 9868, "user_id": 6077803, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a7abebd7e0f177743b3a9c2e7070ffc?s=128&d=identicon&r=PG&f=1", "display_name": "DenCowboy", "link": "https://stackoverflow.com/users/6077803/dencowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1538514486, "creation_date": 1491997686, "last_edit_date": 1492006390, "question_id": 43368696, "link": "https://stackoverflow.com/questions/43368696/svn2git-broken-pipe-error", "title": "svn2git broken pipe error", "body": "<p>I use <a href=\"https://github.com/nirvdrum/svn2git\" rel=\"nofollow noreferrer\">svn2git</a> but it fails always on the same line:\nMy command:</p>\n\n<pre><code>svn2git https://my-svn/proj/ --revision 1000:1001 --username xxx\n</code></pre>\n\n<p>After one houre this command stoped running and it fails with:</p>\n\n<pre><code>Broken pipe at /usr/lib64/perl5/vendor_perl/SVN/Ra.pm line\n623.\n</code></pre>\n\n<p>What would cause this issue?</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491993400, "post_id": 43364673, "comment_id": 73795919, "body": "The import list has nothing to do with loading, it only tells how to import symbols from the module into the current package&#39;s namespace. See also <a href=\"https://metacpan.org/pod/Exporter\" rel=\"nofollow noreferrer\">Exporter</a> and the section about symbol tables in <a href=\"https://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow noreferrer\">perlmod</a> for more information"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491994465, "post_id": 43364673, "comment_id": 73796734, "body": "It is possible to load parts of a module (but not so common), see for example <a href=\"http://perldoc.perl.org/perlsub.html#Autoloading\" rel=\"nofollow noreferrer\">Autoloading</a> in <code>perlsub</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1491988001, "post_id": 43364992, "comment_id": 73791787, "body": "For me, this is ambiguous: <i>Thus with <code>use</code> we <b>do load the whole module</b>. Nevertheless, by importing only what is needed <b>some resources are relieved</b>, as some modules bring along a lot of symbols.</i> Considering that un-imported methods are still call-able from the module&#39;s namespace, I don&#39;t see how resources are saved. Could you clarify?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 1, "creation_date": 1491991849, "post_id": 43364992, "comment_id": 73794732, "body": "@BramVanroy  Updated, thank you for calling it.  I may edit more, once I&#39;ve read it tomorrow."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1499419690, "last_edit_date": 1499419690, "creation_date": 1491987767, "answer_id": 43364992, "question_id": 43364673, "link": "https://stackoverflow.com/questions/43364673/save-resources-by-only-loading-parts-of-a-module/43364992#43364992", "title": "Save resources by only loading parts of a module?", "body": "<p>From <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a> we see that <code>use Module LIST;</code> means exactly</p>\n\n<blockquote>\n  <p><code>BEGIN { require Module; Module-&gt;import( LIST ); }</code></p>\n</blockquote>\n\n<p>On the other hand, from <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\">require</a> </p>\n\n<blockquote>\n  <p>Otherwise, <code>require</code> demands that a library file be included if it hasn't already been included. The file is included via the do-FILE mechanism, [...]</p>\n</blockquote>\n\n<p>and <code>do 'file'</code> executes <code>'file'</code> as a Perl script. Thus with <code>use</code> we load the whole module. </p>\n\n<p>\"Importing\" a sub means that its name is added (or overwritten) in the caller's <a href=\"http://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow noreferrer\">symbol table</a> (via the <code>CODE</code> slot for the typeglob, normally aliased), by the package's <code>import</code> function. The sub's code isn't copied. Now, <code>import</code> can be written any way the author wants to, but generally the import list in the <code>use</code> statement merely controls what symbols are brought into the namespace. The preferred way to provide <code>import</code> in a module is to use the <a href=\"http://perldoc.perl.org/Exporter.html\" rel=\"nofollow noreferrer\">Exporter</a>'s <code>import</code> method.</p>\n\n<p>Selective importing relieves the symbol table (and perhaps some related mechanisms), but I am not aware of practical benefits of this. The benefits are related to programming, via reduced chances for collisions.</p>\n\n<p>Another clear benefit is that it nicely documents what is used in the code.</p>\n"}, {"comments": [{"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1491998220, "post_id": 43368510, "comment_id": 73799372, "body": "So if I understand correctly, it all depends on the implementation of the module, as there is no &#39;standard best practice&#39; for building modules. One would expect that this was optimized, in a way, such that loading modules is as efficient as possible; or am I wrong?"}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1491999164, "post_id": 43368510, "comment_id": 73800065, "body": "Pretty much - yes. Check the AUTOLOAD link - it does have some automation tools. But you can&#39;t just optimize everything automatically. For example <code>Encoding</code> module have pretty heavy code for CJK languages and then even more heavy codepoint maps for each of them. Automated tool can&#39;t understand intent of your code, so it&#39;s up to author to dynamically load common CJK code and specific maps when they&#39;re required by algorithm. It&#39;s like that everywhere in optimization. Optimizing compiler will do lots of cool low-level tricks, but it won&#39;t replace your bubble sort with something better."}], "tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1491997747, "last_edit_date": 1491997747, "creation_date": 1491997174, "answer_id": 43368510, "question_id": 43364673, "link": "https://stackoverflow.com/questions/43364673/save-resources-by-only-loading-parts-of-a-module/43368510#43368510", "title": "Save resources by only loading parts of a module?", "body": "<p>Note that \"import list\" is just a convention. Module's <code>import</code> function is free to do whatever it pleases with this list and you can see it (ab)used by many so-called pragma modules. Therefore partial loading is NOT bound to <code>use</code> in any way. For example module can load heavy function stubs WHEREVER you've imported them or not and dynamically load heavy implementation on actual first call.</p>\n\n<p>Therefore <code>use</code> with partial import list may, or may not actually save any resources - it is all depends on actual implementation of <code>use</code>d module.</p>\n\n<p>While <code>require</code> and <code>use</code> indeed load entire <code>.pm</code> file - that file well could be just a lightweight stub and loader for actual code located elsewhere. There's another convention to call those modules <a href=\"https://metacpan.org/search?q=%3A%3AHeavy\" rel=\"nofollow noreferrer\"><code>::Heavy</code></a>.</p>\n\n<p>Modules are free to implement partial loading in any way they please as well. Here are just some possibilities how module can save resources:</p>\n\n<ol>\n<li><a href=\"http://perldoc.perl.org/perlsub.html#Autoloading\" rel=\"nofollow noreferrer\">AUTOLOAD</a> (with its complimentary  AutoLoader, AutoSplit, and SelfLoader modules).</li>\n<li>Use stubs that load necessary submodules.</li>\n<li>Dynamically load heavy data (i.e. dictionaries or encoding maps) when they are first accessed by their name.</li>\n<li>If you depend on other heavy modules, dynamically <code>require</code> them at runtime in functions that depend on them instead of compile-time <code>use</code> at the very start.</li>\n</ol>\n\n<p>Everything on this list could work automatically behind the scenes, exposed through <code>use</code> import list, or work/be called in other, completely arbitrary way. Once again, it's completely up to module's implementation.</p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 2, "accepted_answer_id": 43368510, "answer_count": 2, "score": 6, "last_activity_date": 1499419690, "creation_date": 1491986939, "last_edit_date": 1491994019, "question_id": 43364673, "link": "https://stackoverflow.com/questions/43364673/save-resources-by-only-loading-parts-of-a-module", "title": "Save resources by only loading parts of a module?", "body": "<p>I am reading through O'Reilly's Perl Objects, References &amp; Modules, more specifically its section about modules. It states that when using <code>use Some::Module</code> you can specify an <em>import list</em>. From its explanation it seems that the only benefit of using this list is for the sake of keeping your namespace clean. In other words, if you have a subroutine <code>some_sub</code> in your <code>main</code> package and the loaded module has a sub with the same name, your subroutine will be overridden. However, if you specify an <em>import list</em> and leave out <code>some_sub</code> from this list, you'll not have this conflict. You can then still run some_sub from the Module by declaring it like so: <code>Some::Module::some_sub</code>.</p>\n\n<p>Is there any other benefit than the one I described above? I am asking this because in some cases you load modules with <em>loads</em> of functionality, even though you are only interested in some of its methods. At first I thought that by specifying an import list you only loaded those methods and not bloating memory with methods you wouldn't use anyway. However, from the explanation above that does not seem the case. Can you selectively save resources by only loading parts of a module? Or is Perl smart enough to do this when compiling without the need of a programmer's intervention?</p>\n"}, {"tags": ["perl", "inheritance", "package", "subroutine"], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1491980068, "creation_date": 1491980068, "answer_id": 43362393, "question_id": 43361876, "link": "https://stackoverflow.com/questions/43361876/perl-how-to-call-a-specific-method-in-multiple-inheritance/43362393#43362393", "title": "Perl: How to call a specific method in multiple inheritance?", "body": "<p>You can create an alias to your preferred method.  Generally this is a bad idea unless you know what you are doing.  Have a look at <a href=\"https://perldoc.perl.org/perlmod.html#Symbol-Tables\" rel=\"nofollow noreferrer\">perldoc perlmod #Symbol Tables</a>.</p>\n\n<p>Update your main file to:</p>\n\n<pre><code> use strict;\n use warnings;\n use Child;\n\n my $childObj = new Child;\n\n $childObj-&gt;Parent2::foo();\n\n print \"------\\n\";\n no warnings; # Otherwise will complain about 'Name \"Child::baz\" used only once: possible typo'\n # Create an alias\n *Child::baz = *Parent2::baz;\n use warnings;\n $childObj-&gt;Parent2::foo();\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>Foo from Parent 2\nBaz from Parent 1\n------\nFoo from Parent 2\nBaz from Parent 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 5279526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584e0f8d11c0a5826c0d803f6cc5ac26?s=128&d=identicon&r=PG&f=1", "display_name": "jayaganthan", "link": "https://stackoverflow.com/users/5279526/jayaganthan"}, "edited": false, "score": 0, "creation_date": 1491986065, "post_id": 43362857, "comment_id": 73790306, "body": "Thanks Zdim. It is not possible for me to change the design . That&#39;s why I am trying to find other possible solutions."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 95, "user_id": 5279526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584e0f8d11c0a5826c0d803f6cc5ac26?s=128&d=identicon&r=PG&f=1", "display_name": "jayaganthan", "link": "https://stackoverflow.com/users/5279526/jayaganthan"}, "edited": false, "score": 0, "creation_date": 1491986753, "post_id": 43362857, "comment_id": 73790786, "body": "@jayaganthan OK, I expected that.You may have to get in there and hard code who&#39;s called when. To manually dispatch those calls. I see no way for <code>main</code> to inform <code>foo</code> which <code>baz</code> to call (without changing <code>@ISA</code>)."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 5, "last_activity_date": 1493366459, "last_edit_date": 1493366459, "creation_date": 1491981506, "answer_id": 43362857, "question_id": 43361876, "link": "https://stackoverflow.com/questions/43361876/perl-how-to-call-a-specific-method-in-multiple-inheritance/43362857#43362857", "title": "Perl: How to call a specific method in multiple inheritance?", "body": "<p>You can override the needed methods in the <code>Child</code> class, dispatching to fully qualified calls</p>\n\n<pre><code>package Child;\n\n...\n\nsub baz \n{\n    shift;\n    Parent2::baz(@_);\n}\n\n...\n</code></pre>\n\n<p>With this added to your code it prints as desired, with <code>Baz from Parent2</code>.</p>\n\n<p>This is a rather manual way to \"augment\" the interface of these classes, which clearly have not been designed for multiple inheritance. But the situation you describe is indeed unpleasant and one has to do something like this, or to hard-code specific <code>@ISA</code> manipulations.</p>\n\n<p>For more complex needs see <a href=\"http://perldoc.perl.org/mro.html\" rel=\"nofollow noreferrer\">mro</a>, expressly related to all this. It supports some introspection so you may be able to make decisions at runtime. You'd still have to have <code>Child::baz()</code> for it.</p>\n\n<p>Can you by any chance change the design and <em>not</em> use multiple inheritance?</p>\n"}, {"tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": true, "score": 4, "last_activity_date": 1491981751, "creation_date": 1491981751, "answer_id": 43362930, "question_id": 43361876, "link": "https://stackoverflow.com/questions/43361876/perl-how-to-call-a-specific-method-in-multiple-inheritance/43362930#43362930", "title": "Perl: How to call a specific method in multiple inheritance?", "body": "<p>If you had access to modify the base classes, you could do this by changing <code>$self-&gt;baz()</code> to <code>Parent2::baz($self)</code>, but you said you aren't able to do that.</p>\n\n<p>Since that isn't an option, how do you feel about <em>temporarily</em> changing the order of base classes?  In Perl, the list of base classes is actually just an array named <code>@ISA</code> within each package, so you can use <code>local</code> to create a localized copy of that array within a block:</p>\n\n<pre><code>#!/usr/bin/env perl    \n\nuse strict;\nuse warnings;\nuse 5.010;\n\npackage Parent1;\n\nsub foo { say 'foo1'; $_[0]-&gt;baz; }\nsub baz { say 'baz1'; }\n\npackage Parent2;\n\nsub foo { say 'foo2'; $_[0]-&gt;baz; }\nsub baz { say 'baz2'; }\n\npackage Child;\n\nuse base qw( Parent1 Parent2 );\n\nsub new { return bless {} }\n\npackage main;\n\nmy $childobj = Child-&gt;new;\n{\n  local @Child::ISA = qw( Parent2 Parent1 );\n  say 'In localized block';\n  $childobj-&gt;Parent2::foo;\n}\n\nsay 'Block has exited';\n$childobj-&gt;Parent2::foo;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>In localized block\nfoo2\nbaz2\nBlock has exited\nfoo2\nbaz1\n</code></pre>\n\n<p>So you can see that this provides your desired output within the block with the localized <code>@ISA</code> and then the original behavior is restored when the block exits.</p>\n\n<p>Also, a side note in closing:  Using <code>new Child</code> in Perl is called \"indirect object notation\" and it is generally considered a <a href=\"https://stackoverflow.com/questions/32955172/what-is-indirect-object-notation-why-is-it-bad-and-how-does-one-avoid-it\">Bad Thing</a>.  I recommend using <code>Child-&gt;new</code> instead.</p>\n"}], "owner": {"reputation": 95, "user_id": 5279526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/584e0f8d11c0a5826c0d803f6cc5ac26?s=128&d=identicon&r=PG&f=1", "display_name": "jayaganthan", "link": "https://stackoverflow.com/users/5279526/jayaganthan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 1, "accepted_answer_id": 43362930, "answer_count": 3, "score": 7, "last_activity_date": 1493366459, "creation_date": 1491978396, "question_id": 43361876, "link": "https://stackoverflow.com/questions/43361876/perl-how-to-call-a-specific-method-in-multiple-inheritance", "title": "Perl: How to call a specific method in multiple inheritance?", "body": "<p>I have a package in perl , which uses two other package as its base.</p>\n\n<p>Parent1:</p>\n\n<pre><code>package Parent1;\n\nuse strict;\nuse warnings;\n\nsub foo\n{\n    my $self = shift;\n    print (\"\\n Foo from Parent 1 \");\n    $self-&gt;baz();\n}\n\nsub baz\n{\n    my $self = shift;\n    print (\"\\n Baz from Parent 1 \");\n}\n1;\n</code></pre>\n\n<p>Parent 2:</p>\n\n<pre><code>package Parent2;\n\nuse strict;\nuse warnings;\n\nsub foo\n{\n    my $self = shift;\n    print (\"\\n Foo from Parent 2 \");\n    $self-&gt;baz();\n}\n\nsub baz\n{\n    my $self = shift;\n    print (\"\\n Baz from Parent 2 \");\n}\n1;\n</code></pre>\n\n<p>Child:\nThis uses the above two parent packages.</p>\n\n<pre><code>package Child;\n\nuse strict;\nuse warnings;\n\nuse base qw(Parent1);\nuse base qw(Parent2);\n\nsub new\n{\n    my $class = shift;\n    my $object = {};\n    bless $object,$class;\n    return $object;\n}\n1;\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Child;\n\nmy $childObj = new Child;\n\n$childObj-&gt;Parent2::foo();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> Foo from Parent 2 \n Baz from Parent 1 \n</code></pre>\n\n<p>My analysis:</p>\n\n<p>From the output, it is clear that child object is passed to parent2's foo method and from that foo method, It is making a call to baz method. It checks for baz method in Child package first because, I am calling it with child object. Since, baz method is not in child package, It checks for the method in the base class. Parent1 is the first base class for Child. So, it finds the method in Parent1 and calls baz method of Parent1.</p>\n\n<p>My question:</p>\n\n<p>Is it possible to call the baz method of Parent2 without changing the order of base class in child ?</p>\n\n<p>My Expected output:</p>\n\n<pre><code> Foo from Parent 2 \n Baz from Parent 2\n</code></pre>\n\n<p>The above example is just a analogy of my actual problem. I don't have access to modify the Base classes. I have only access to modify the Child class. So, Is it possible to change child class in such a way that it picks up both the methods from Parent2 without changing the order of base classes ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "loops"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1494437272, "post_id": 43360325, "comment_id": 74832024, "body": "<a href=\"/a/1829927/100754\">When you find yourself adding an integer suffix to variable names, think &quot;<b>I should have used an array.</b>&quot;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 5, "last_activity_date": 1491973409, "creation_date": 1491973409, "answer_id": 43360674, "question_id": 43360325, "link": "https://stackoverflow.com/questions/43360325/appending-number-to-a-variable-name-in-a-loop-in-perl/43360674#43360674", "title": "Appending number to a variable name in a loop in perl", "body": "<p>It would be better to use an actual testing library, such as <a href=\"https://perldoc.perl.org/Test/More.html\" rel=\"noreferrer\">Test::More</a> which will let you know if all of the tests passed, as well as providing many useful testing functions .  Then it is very simple to just iterate over your various parameter values and run tests.  Here is an example which passes various parameters to the <code>echo</code> command and then pipes the result to calculator program <code>bc</code> to see that addition works correctly:</p>\n\n<p><strong>test_add.t</strong></p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\nuse Test::More;\nfor my $aa ( 1..3 ) {\n    for my $bb ( 1..3 ) {\n        my $expected = $aa + $bb;\n        my $prog = \"echo $aa + $bb | bc\";\n        my $output = `$prog`;\n        ok( $expected == $output, \"$aa + $bb = $expected\" );\n    }\n}\ndone_testing();\n</code></pre>\n\n<p>Run the test file:</p>\n\n<pre><code>prove -v test_add.t\nok 1 - 1 + 1 = 2\nok 2 - 1 + 2 = 3\nok 3 - 1 + 3 = 4\nok 4 - 2 + 1 = 3\nok 5 - 2 + 2 = 4\nok 6 - 2 + 3 = 5\nok 7 - 3 + 1 = 4\nok 8 - 3 + 2 = 5\nok 9 - 3 + 3 = 6\n1..9\nok\nll tests successful.\nFiles=1, Tests=9,  0 wallclock secs ( 0.05 usr  0.01 sys +  0.04 cusr  0.00 csys =  0.10 CPU)\nResult: PASS\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1491986636, "creation_date": 1491986636, "answer_id": 43364573, "question_id": 43360325, "link": "https://stackoverflow.com/questions/43360325/appending-number-to-a-variable-name-in-a-loop-in-perl/43364573#43364573", "title": "Appending number to a variable name in a loop in perl", "body": "<p>Any time you are using a long list of numbered variables, then the tool for the job is <em>not</em> to dynamically work out variable names - that's called symbolic referencing, and it's nasty. </p>\n\n<p>What you should be doing is using a list of variables. </p>\n\n<pre><code>my @variablecheck = ( 1, 2, 1, 3, ); \n\nforeach my $value ( @variablecheck ) { \n    print \"Test passed\\n\" if $value == 1;\n}\n</code></pre>\n\n<p>If you are really set on symbolic naming - <a href=\"http://perl.plover.com/varvarname.html\" rel=\"nofollow noreferrer\">read this</a> before proceeding - it's from 1998, but it's <em>still</em> a bad idea. You can use hashes for a similar purpose - they're good if you've got arbitrary names - but for sequential numeric values, an array is the tool for the job. </p>\n\n<p>And so is using a testing library, like <a href=\"https://perldoc.perl.org/TAP/Harness.html\" rel=\"nofollow noreferrer\"><code>TAP::Harness</code></a> or <a href=\"https://perldoc.perl.org/Test/More.html\" rel=\"nofollow noreferrer\"><code>Test::More</code></a></p>\n"}], "owner": {"reputation": 61, "user_id": 7474325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-HRAn73LrBXc/AAAAAAAAAAI/AAAAAAAAABo/A31S4W4vv2k/photo.jpg?sz=128", "display_name": "Gopal Krishna", "link": "https://stackoverflow.com/users/7474325/gopal-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 0, "accepted_answer_id": 43360674, "answer_count": 2, "score": 0, "last_activity_date": 1491986636, "creation_date": 1491971369, "question_id": 43360325, "link": "https://stackoverflow.com/questions/43360325/appending-number-to-a-variable-name-in-a-loop-in-perl", "title": "Appending number to a variable name in a loop in perl", "body": "<p>I am writing perl test cases for checking C code . Here I am calling C file multiple times \nwith different values and checking whether it returns 1. \nMy perl file looks something like this:</p>\n\n<pre><code>my $variableCheck1,$variableCheck2,$variableCheck3.....\n.\n.\n.\n.\nif(($variableCheck1 == 1) &amp;&amp; ($variableCheck2 == 1) &amp;&amp; ($variableCheck3 == 1).....)\n{\n   print \"Test cases are passed\";\n}\n</code></pre>\n\n<p>The problem is there are many check variables.\nIs there a way so that I can run all the check variables in a loop while appending number to the check variable something like this</p>\n\n<pre><code>for($i=1 ; $i &lt; 12 ; $i++)\n{\n      if($variableCheck_$i   == 1)  \n    {\n    print \"Test cases are passed\";\n\n    }\n}\n</code></pre>\n\n<p>Append such that for each loop variable name changes depending                                                                         on value $i :variableCheck1,variableCheck2.</p>\n"}, {"tags": ["regex", "perl", "shell", "remote-access", "openssh"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "edited": false, "score": 0, "creation_date": 1491989930, "post_id": 43359892, "comment_id": 73793291, "body": "yes thank you for your reply. Now, it is not giving me an error but it is unable to get the matched patterns. That is, I am getting a &quot;find:no match&quot; when I store the same pattern in a variable but is running when I use value of pattern directly in command. Thanks again :)"}, {"owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "edited": false, "score": 0, "creation_date": 1491991058, "post_id": 43359892, "comment_id": 73794190, "body": "my $pattern = &quot;<i>40786</i>&quot;;      #This runs when I write  my @files = $ssh-&gt;capture2(qq(find /u1/temp  -name &quot;<i>40786</i>&quot;) );  #but returns not found when I use variable $pattern  Sorry if its a silly question. I am new to perl and couldn&#39;t find an explanation elsewhere."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "edited": false, "score": 0, "creation_date": 1492012986, "post_id": 43359892, "comment_id": 73811266, "body": "@emma That should work. Without the surrounding code, I can&#39;t tell you what&#39;s wrong. I&#39;d suggest you ask a new question and provide a complete program that doesn&#39;t work."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1491968658, "creation_date": 1491968658, "answer_id": 43359892, "question_id": 43359791, "link": "https://stackoverflow.com/questions/43359791/using-local-perl-variables-in-shell-command/43359892#43359892", "title": "Using local perl variables in shell command", "body": "<pre><code>q(find $path -name $pattern)\n</code></pre>\n\n<p>This is the literal string <code>find $path -name $pattern</code>, dollar signs and all.</p>\n\n<p>Perl has several different kinds of quotes. <code>\"\"</code> will interpolate variables (ie. replace them with their values), <code>''</code> will not. <code>q()</code> is another way to write <code>''</code>. You want <code>qq()</code>.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators\" rel=\"nofollow noreferrer\">Quote and Quote-Like Operators in perlop</a> for more info.</p>\n"}], "owner": {"reputation": 85, "user_id": 7854056, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d75dfefc367145352edc4341c08a4025?s=128&d=identicon&r=PG&f=1", "display_name": "emma", "link": "https://stackoverflow.com/users/7854056/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 43359892, "answer_count": 1, "score": 1, "last_activity_date": 1491968658, "creation_date": 1491967997, "question_id": 43359791, "link": "https://stackoverflow.com/questions/43359791/using-local-perl-variables-in-shell-command", "title": "Using local perl variables in shell command", "body": "<p>I am trying to run a remote find command but I have to pass it local variables whose value I get from command line arguments from user. But, I am getting an \"undefined variable\" error. I am doing something like :</p>\n\n<pre><code>my $ssh = Net::OpenSSH-&gt;new($host);\n#I am getting a part of the $path and $pattern from command line\n#I have to look for $pattern at the $path\nmy @files = $ssh-&gt;capture(q(find $path -name $pattern) );\n</code></pre>\n\n<p>This command runs fine when I give the exact path and pattern but I get error  when I replace it with variables.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1491969011, "post_id": 43359852, "comment_id": 73782198, "body": "thanks for your help, that really drive me crazy. and anyway right now it return empty string do you know why it does not match the sentence that contains  <code>machine learning is</code>"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "edited": false, "score": 0, "creation_date": 1491969509, "post_id": 43359852, "comment_id": 73782323, "body": "@kero Sorry, you&#39;d have to show how you&#39;re calling it."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1491968434, "creation_date": 1491968434, "answer_id": 43359852, "question_id": 43359701, "link": "https://stackoverflow.com/questions/43359701/how-to-extract-sentence-with-match-string-using-regex-in-perl/43359852#43359852", "title": "how to extract sentence with match string using regex in perl?", "body": "<p>You have a typo.</p>\n\n<pre><code>$out = $result= ~ m/\\s*\\'?$search\\'? $tobe (.*)\\s*\\./i;\n              ^^^\n</code></pre>\n\n<p>The <code>=~</code> operator cannot have a space in it. With a space it's assignment (<code>=</code>) and bitwise negation (<code>~</code>).</p>\n\n<p>Instead, <code>$result = ~ m/.../</code> means \"set $result equal to the bitwise negation of the result of <code>$_ =~ m/.../</code>. In other words, nonsense. (Many Perl operators and built in functions use <code>$_</code> if no variable is supplied.)</p>\n"}], "owner": {"reputation": 1754, "user_id": 5618172, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh6.googleusercontent.com/-5DWu2LJ3Neg/AAAAAAAAAAI/AAAAAAAAADs/4juP7qODSek/photo.jpg?sz=128", "display_name": "kero", "link": "https://stackoverflow.com/users/5618172/kero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 43359852, "answer_count": 1, "score": 1, "last_activity_date": 1491970382, "creation_date": 1491967448, "last_edit_date": 1491970382, "question_id": 43359701, "link": "https://stackoverflow.com/questions/43359701/how-to-extract-sentence-with-match-string-using-regex-in-perl", "title": "how to extract sentence with match string using regex in perl?", "body": "<p>i try to return sentence that match string. long story short, i am using <code>WWW::Wikipedia</code> module that search for keyword in wikipedia website and return page that contains these keywords and then searching through return page and try to find match sentence. \nexample: if return text like this below </p>\n\n<pre><code>'Machine learning' is the subfield of computer science that, according to\nArthur Samuel in 1959, gives \"computers the ability to learn without being\nexplicitly\nprogrammed.\"[https://www.cims.nyu.edu/~munoz/files/ml_optimization.pdf Machine\nLearning and Optimization] Evolved from the study of pattern recognition and\ncomputational learning theory in artificial intelligence,http://www.britannica.com/EBchecked/topic/1116194/machine-\nlearning machine learning explores the study and construction of algorithms\nthat can learn from and make predictions on data \u2013 such algorithms overcome\nfollowing strictly static program instructions by making data-driven\npredictions or decisions, through building a model from sample inputs. Machine\nlearning is employed in a range of computing tasks where designing and\nprogramming explicit algorithms with good performance is difficult or\nunfeasible example applications include email filtering, detection of network\nintruders or malicious insiders working towards a data breach, optical\ncharacter recognition OCR,Wernick, Yang, Brankov, Yourganov and Strother,\nMachine Learning in Medical Imaging, [[IEEE Signal Processing Society|IEEE\nSignal Processing Magazine]], vol. 27, no. 4, July 2010, pp. 25\u201338 \n</code></pre>\n\n<p>and i want to find sentence that contains <code>machine learning is</code>\nso i create this simple subroutine in perl using regex.</p>\n\n<pre><code>sub findSubject {\n   my ($question) = @_ ;\n   my $search;\n   my @words;\n   my $tobe;\n   my $tail=\"\";\n   my @verbs =('what','who','when','where');\n   $question =~ s/\\s*[.?!]$//gi;\n   $question =~ s/(^\\s+|\\s+)$//g;\n    if ($question =~ m/(who|what)/i){\n         $question =~ s/(who|what)//i;\n         @words=split /\\s+/,$question;\n         shift @words ;\n         $tobe = shift @words ;\n         $search = join \" \",@words;\n         return ($search,$tobe,$tail);\n     } elsif ($question =~ m/(when|where)/i)\n    {\n        $question =~ s/(where|when)//i;\n        @words=split /\\s+/,$question;\n        shift @words ;\n        $tail = pop @words;\n        $tobe = shift @words;\n        $search = join \" \",@words;\n        return ($search,$tobe,$tail);\n    }\n    else {\n         return undef;\n    }\n\n}\n\nsub findAnswer{\n    my ($result,$search,$tobe,$tail)=@_;\n\n    my $outFormat;\n    if ($tail eq \"\"){\n        $result =~s/[\\)\\(\\}\\{\\;]//gi;\n        print \"$result\\n\";\n        my $out = $result=~ m/\\b\\'?$search\\'?\\b\\s*\\b$tobe\\b\\s*(.*)\\./gi;\n        print \"$out\\n\";\n        $outFormat = \"$search $tobe $out\";\n        return $outFormat ;\n    }else {\n        return \"golden\";\n    }\n}\nsub main{\n   my $f2;\n   my @inputs= @ARGV;\n   my $searchInput = 'here';\n   my $searchOutput;\n   my $tobe;\n   my $tail;\n   openingStatement();\n   open($f2, \"&gt;:utf8\", $inputs[0]);\n    while(my $q = &lt;STDIN&gt;) {\n        my $wiki = WWW::Wikipedia-&gt;new( clean_html =&gt; 1 );\n        chomp $q;\n        $q = lc $q;\n\n        if ($q eq 'exit'){\n            exit;\n        }\n        else {\n            ($searchInput,$tobe,$tail) = findSubject($q);\n            if ($searchInput){\n                my $result = $wiki-&gt;search( $searchInput );\n                if ( $result ) {\n                   my $res = $result-&gt;fulltext();\n                   if ($res){\n                       $searchOutput = findAnswer($res,$searchInput,$tobe,$tail);\n                       binmode(STDOUT, \":utf8\");\n                       print \"$searchOutput\\n\" ;\n                       print $f2  \"$searchOutput\\n\";\n                   }\n\n                }else {\n                    print \"i dont know the answer \\n\";\n                }\n            }else {\n               print \"program accept only questions type {who, what, when, where}\\n\";\n            }\n\n        }\n    }\n\n   close $f2;\n}\n</code></pre>\n\n<p>where <code>$result</code> is prograph i am parsing, and <code>$search</code>, <code>$tobe</code> are words i am looking for ,in this case is <code>machine learning is</code>.</p>\n\n<p>but i am getting this weird error:</p>\n\n<pre><code>Use of uninitialized value $_ in pattern match (m//) at qa-system.pl line 52,\n    &lt;STDIN&gt; line 1 (#1)\n    (W uninitialized) An undefined value was used as if it were already\n    defined.  It was interpreted as a \"\" or a 0, but maybe it was a mistake.\n    To suppress this warning assign a defined value to your variables.\n\n    To help you figure out what was undefined, perl will try to tell you\n    the name of the variable (if any) that was undefined.  In some cases\n    it cannot do this, so it also tells you what operation you used the\n    undefined value in.  Note, however, that perl optimizes your program\n    anid the operation displayed in the warning may not necessarily appear\n    literally in your program.  For example, \"that $foo\" is usually\n    optimized into \"that \" . $foo, and the warning will refer to the\n    concatenation (.) operator, even though there is no . in\n    your program.\n</code></pre>\n\n<p>and subroutine return this strange value </p>\n\n<pre><code>machine learning is 18446744073709551615\n</code></pre>\n\n<p>any clue why i am getting this error. is there any error in my regex?</p>\n"}, {"tags": ["python", "perl", "code-translation"], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 6693849, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/49235a8b4bb0d633a0b33b2eacdff5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Cookies Monster", "link": "https://stackoverflow.com/users/6693849/cookies-monster"}, "edited": false, "score": 0, "creation_date": 1492531859, "post_id": 43359042, "comment_id": 74009763, "body": "Thank you, Chuck! That was indeed helpful. :)"}], "tags": [], "owner": {"reputation": 3971, "user_id": 2840714, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/s9vli.jpg?s=128&g=1", "display_name": "ChuckCottrill", "link": "https://stackoverflow.com/users/2840714/chuckcottrill"}, "is_accepted": false, "score": 0, "last_activity_date": 1491962950, "last_edit_date": 1495540947, "creation_date": 1491962950, "answer_id": 43359042, "question_id": 43358254, "link": "https://stackoverflow.com/questions/43358254/how-do-i-create-a-script-on-the-fly-to-execute-w-the-execution-manager-in-python/43359042#43359042", "title": "How do I create a script on the fly to execute w/the execution manager in Python?", "body": "<p>This is the perl idiom for opening a file for write (\"w+\"),</p>\n\n<pre><code>open my $fh, '&gt;', \"logger_exit_test.pl\" or die \"Unable to create logger_exit_test.pl\";\n</code></pre>\n\n<p>These lines in perl construct the file (what is the name of the #! (shebang) program to run this file?, $EXECUTABLE_NAME),</p>\n\n<pre><code>print {$fh} &lt;&lt;EOF;\n#!$EXECUTABLE_NAME\nISC::message( \\$ARGV[0], MESSAGE =&gt; \"test\" );\nEOF\nclose $fh;\n</code></pre>\n\n<p>You seem to be asking python to determine the path to python, but do you intend to use the python interpreter, or the perl interpreter to execute the file you constructed (you used the .py extension, so my guess is you want to use python)?</p>\n\n<pre><code>executable_name = sys.executable\n</code></pre>\n\n<p>This is the python idom for opening a file for write, and you will need to import the python library(ies) appropriately,</p>\n\n<pre><code>with open(\"logger_exit_test.py\", \"w+\") as fh:\n    fh.write(\"#!${}\\n\".format(executable_name))\n    fh.write(\"#import appropriate_package as ISC\\n\")\n    fh.write(\"\"\"ISC.message( sys.argv[0],  MESSAGE(\"test\");\\n\"\"\")\n#since you used with open(), close not needed,\n\nos.chmod(\"logger_exit_test.py\", stat.S_IRWXU)\n</code></pre>\n\n<p>Look here for how to execute the above file, <a href=\"https://stackoverflow.com/questions/43358467/printing-all-shell-commands-fired-from-python-script-onto-console-before-execut/43358757#43358757\">run child process from python</a></p>\n"}], "owner": {"reputation": 111, "user_id": 6693849, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/49235a8b4bb0d633a0b33b2eacdff5c8?s=128&d=identicon&r=PG&f=1", "display_name": "Cookies Monster", "link": "https://stackoverflow.com/users/6693849/cookies-monster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491962950, "creation_date": 1491956531, "last_edit_date": 1491957996, "question_id": 43358254, "link": "https://stackoverflow.com/questions/43358254/how-do-i-create-a-script-on-the-fly-to-execute-w-the-execution-manager-in-python", "title": "How do I create a script on the fly to execute w/the execution manager in Python?", "body": "<p>I'm trying to translate this PERL code into Python:</p>\n\n<pre><code># Create a script on the fly to execute w/ the execution manager\nunlink \"logger_exit_test.pl\";\nopen my $fh, '&gt;', \"logger_exit_test.pl\" or die \"Unable to create \nlogger_exit_test.pl\";\nprint {$fh} &lt;&lt;EOF;\n#!$EXECUTABLE_NAME\nISC::message( \\$ARGV[0], MESSAGE =&gt; \"test\" );\nEOF\nclose $fh;\n\nchmod 0750, \"logger_exit_test.pl\";\n</code></pre>\n\n<p>So far, I have this piece of Python code:</p>\n\n<pre><code>## Create a script on the fly to execute w/ the execution manager\ntry:\n    os.remove(\"logger_exit_test.py\")\nexcept OSError:\n    pass\n\nopen(\"logger_exit_test.py\", \"w+\")\nwith open('logger_exit_test.py') as fh:\n   for line in fh:\n       print line\n       if 'str' in line:\n          break\n\nexecutable_name = sys.executable()\n\nISC.message(sys.argv[0], MESSAGE(\"test\"))\n\nf.close()\n\nos.chmod(\"logger_exit_test.py\", stat.S_IRWXU)\n</code></pre>\n\n<p>So far I've been unsuccessful with creating an executable...this fails:</p>\n\n<p>executable_name = sys.executable()</p>\n"}, {"tags": ["perl", "twitter", "oauth"], "comments": [{"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1492002132, "post_id": 43356891, "comment_id": 73802362, "body": "If your app is a Mojo app, you could just use a plugin for this. <a href=\"https://metacpan.org/pod/Mojolicious::Plugin::Web::Auth\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojolicious::Plugin::Web::Auth</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10661, "user_id": 2430549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfc7728cf3e556a8b9da88e662f4fd3?s=128&d=identicon&r=PG", "display_name": "HoldOffHunger", "link": "https://stackoverflow.com/users/2430549/holdoffhunger"}, "edited": false, "score": 0, "creation_date": 1510348657, "post_id": 45157100, "comment_id": 81413228, "body": "You correctly describe the oauth process with Twitter -- but this merely authenticates and grants access.  What calls do you do to actually get the firstname, lastname, and email address with $nt?"}, {"owner": {"reputation": 21, "user_id": 5248682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d70049b4ebe5347accea787e6bd9e54?s=128&d=identicon&r=PG&f=1", "display_name": "regiov", "link": "https://stackoverflow.com/users/5248682/regiov"}, "reply_to_user": {"reputation": 10661, "user_id": 2430549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfc7728cf3e556a8b9da88e662f4fd3?s=128&d=identicon&r=PG", "display_name": "HoldOffHunger", "link": "https://stackoverflow.com/users/2430549/holdoffhunger"}, "edited": false, "score": 0, "creation_date": 1510525841, "post_id": 45157100, "comment_id": 81459972, "body": "Yes, this merely authenticates and grants access, which is exactly what the original question was asking for help. The next step would be something like:"}, {"owner": {"reputation": 21, "user_id": 5248682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d70049b4ebe5347accea787e6bd9e54?s=128&d=identicon&r=PG&f=1", "display_name": "regiov", "link": "https://stackoverflow.com/users/5248682/regiov"}, "reply_to_user": {"reputation": 10661, "user_id": 2430549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfc7728cf3e556a8b9da88e662f4fd3?s=128&d=identicon&r=PG", "display_name": "HoldOffHunger", "link": "https://stackoverflow.com/users/2430549/holdoffhunger"}, "edited": false, "score": 0, "creation_date": 1510525955, "post_id": 45157100, "comment_id": 81459999, "body": "<code>my $resp = $nt-&gt;verify_credentials({include_email =&gt; 1 });</code>"}, {"owner": {"reputation": 21, "user_id": 5248682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d70049b4ebe5347accea787e6bd9e54?s=128&d=identicon&r=PG&f=1", "display_name": "regiov", "link": "https://stackoverflow.com/users/5248682/regiov"}, "reply_to_user": {"reputation": 10661, "user_id": 2430549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfc7728cf3e556a8b9da88e662f4fd3?s=128&d=identicon&r=PG", "display_name": "HoldOffHunger", "link": "https://stackoverflow.com/users/2430549/holdoffhunger"}, "edited": false, "score": 0, "creation_date": 1510526012, "post_id": 45157100, "comment_id": 81460011, "body": "Then you could get what you want, like $resp-&gt;{&#39;name&#39;} and $resp-&gt;{&#39;email&#39;}"}], "tags": [], "owner": {"reputation": 21, "user_id": 5248682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d70049b4ebe5347accea787e6bd9e54?s=128&d=identicon&r=PG&f=1", "display_name": "regiov", "link": "https://stackoverflow.com/users/5248682/regiov"}, "is_accepted": false, "score": 1, "last_activity_date": 1500349396, "creation_date": 1500349396, "answer_id": 45157100, "question_id": 43356891, "link": "https://stackoverflow.com/questions/43356891/sign-in-by-twitter-and-users-verifier-nettwitterroleoauth/45157100#45157100", "title": "sign in by twitter and users verifier, Net::Twitter::Role::OAuth", "body": "<p>It's unclear from your question if you're trying to do PIN-Based or 3-Legged OAuth.</p>\n\n<p>In PIN-Based OAuth, you first redirect the user to the authorization URL:</p>\n\n<pre><code>use Net::Twitter;\n\nmy $nt = Net::Twitter-&gt;new(\n    traits          =&gt; ['API::RESTv1_1', 'OAuth'],\n    consumer_key    =&gt; \"YOUR-CONSUMER-KEY\",\n    consumer_secret =&gt; \"YOUR-CONSUMER-SECRET\",\n);\n\nmy $url = $nt-&gt;get_authorization_url();\n\nprint \"Location: \", $url, \"\\n\\n\";\n</code></pre>\n\n<p>After signing in, the user receives a PIN number that must be passed as the verifier parameter to get the access token:</p>\n\n<pre><code>my $pin = 'PIN-NUMBER-PROVIDED-AFTER-LOGIN';\n\nmy($access_token, $access_token_secret, $user_id, $screen_name) = $nt-&gt;request_access_token(verifier =&gt; $pin);\n</code></pre>\n\n<p>In 3-Legged OAuth, you start almost in the same way, except that you must specify a callback URL (the same that you registered for your app) when calling \"get_authorization_url\":</p>\n\n<pre><code>use Net::Twitter;\n\nmy $nt = Net::Twitter-&gt;new(\n    traits          =&gt; ['API::RESTv1_1', 'OAuth'],\n    consumer_key    =&gt; \"YOUR-CONSUMER-KEY\",\n    consumer_secret =&gt; \"YOUR-CONSUMER-SECRET\",\n);\n\nmy $url = $nt-&gt;get_authorization_url(callback =&gt; 'MY-CALLBACK-URL');\n\nprint \"Location: \", $url, \"\\n\\n\";\n</code></pre>\n\n<p>This time, after signing in, instead of giving the user a PIN number, Twitter automatically redirects to your callback URL passing two query string parameters: oauth_token and oauth_verifier, which you should use as key/secret request token to get the access token:</p>\n\n<pre><code>use Net::Twitter;\nuse CGI;\n\nmy $cgi = new CGI;\n\nmy $oauth_token = $cgi-&gt;param('oauth_token');\nmy $oauth_verifier = $cgi-&gt;param('oauth_verifier');\n\nmy $nt = Net::Twitter-&gt;new(\n    traits          =&gt; ['API::RESTv1_1', 'OAuth'],\n    consumer_key    =&gt; \"YOUR-CONSUMER-KEY\",\n    consumer_secret =&gt; \"YOUR-CONSUMER-SECRET\",\n);\n\n$nt-&gt;request_token($oauth_token);\n$nt-&gt;request_token_secret($oauth_verifier);\n\nmy($access_token, $access_token_secret, $user_id, $screen_name) = $nt-&gt;request_access_token(verifier =&gt; $oauth_verifier);\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 59, "user_id": 7261395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cb8db032eea597474e83a16939c3ec29?s=128&d=identicon&r=PG&f=1", "display_name": "user7261395", "link": "https://stackoverflow.com/users/7261395/user7261395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1500349396, "creation_date": 1491947887, "question_id": 43356891, "link": "https://stackoverflow.com/questions/43356891/sign-in-by-twitter-and-users-verifier-nettwitterroleoauth", "title": "sign in by twitter and users verifier, Net::Twitter::Role::OAuth", "body": "<p>Having a Twitter APP and a user signing in using a website and that app. We received the \u201coauth_verifier\u201d for that user.\nAfter signing in, the user should follow our Twitter account by default. \nAchieving this, I used the 1st example in Net::Twitter::Role::OAuth.</p>\n\n<p>Our \u201cconsumer_key\u201d and \u201cconsumer_secret\u201d, and </p>\n\n<pre><code>my($access_token, $access_token_secret, $user_id, $screen_name) = $nt-&gt;request_access_token(verifier =&gt; $verifier)\n</code></pre>\n\n<p>I cannot go further, getting a 401 error from Twitter: </p>\n\n<pre><code>auth_url =&gt; https://api.twitter.com/oauth/authorize?oauth_token=rhDMIgAAAAAA0FiXAAABW17hoRI\nNet::Twitter::Role::OAuth::request_access_token(): GET https://api.twitter.com/oauth/access_token failed: 401 Authorization Required at login.pl line xx\n</code></pre>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["perl", "anyevent"], "comments": [{"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 2, "creation_date": 1491945546, "post_id": 43355138, "comment_id": 73775914, "body": "It looks like ikegami&#39;s answer is almost certainly what you&#39;re looking for, but it&#39;s worth pointing out that the &#39;Range&#39; feature is built in to the HTTP protocol for exactly this type of request. If the server you are talking to supports it, you can add a header to your request like this: <code>Range: bytes=0-4096</code> to get the first 4KB."}, {"owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "reply_to_user": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "edited": false, "score": 0, "creation_date": 1492004065, "post_id": 43355138, "comment_id": 73803986, "body": "@GrantMcLean, Thank you, useful information!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492011426, "post_id": 43355612, "comment_id": 73810176, "body": "I meant to make <code>max_to_read</code> optional. Fixed. Also removed comment for code that was removed, and made parameter order consistent with the original function."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1492011715, "last_edit_date": 1492011715, "creation_date": 1491942431, "answer_id": 43355612, "question_id": 43355138, "link": "https://stackoverflow.com/questions/43355138/how-to-use-anyeventhttp-to-get-only-part-of-the-page/43355612#43355612", "title": "How to use AnyEvent::HTTP to get only part of the page?", "body": "<p><code>on_body</code> is called repeatedly as chunks arrive. Returning false from <code>on_body</code> terminates the download.</p>\n\n<pre><code>sub my_http_request {\n   my $cb = pop;\n   my ($method, $url, %args) = @_;\n\n   croak(\"Unsupported: on_body\")          if $args{on_body};\n   croak(\"Unsupported: want_body_handle\") if $args{want_body_handle};\n\n   my $max_to_read = delete($args{max_to_read});\n\n   my $data;\n   return http_request(\n      $method =&gt; $url,\n      %args,\n      on_body =&gt; sub {\n         #my ($chunk, $headers) = @_;\n         $data .= $_[0];\n         return !defined($max_to_read) || length($data) &lt; $max_to_read;\n      },\n      sub {\n         my (undef, $headers) = @_;\n         $cb-&gt;($data, $headers);\n      },\n   );\n}\n</code></pre>\n\n<hr>\n\n<p>Use <code>my_http_request</code> just like <code>http_request</code>, except it accepts an optional <code>max_to_read</code> parameter.</p>\n\n<p>For example,</p>\n\n<pre><code>my $cb = AnyEvent-&gt;condvar();\nmy_http_request(\n   GET =&gt; 'http://...',\n   ...\n   max_to_read =&gt; ...,\n   $cb,\n);\n\nmy ($data, $headers) = $cb-&gt;recv();\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>my $done = AnyEvent-&gt;condvar();\nmy_http_request(\n   GET =&gt; 'http://...',\n   ...\n   max_to_read =&gt; ...,\n   sub {\n      my ($data, $headers) = @_;\n      ...\n      $done-&gt;send();\n   },\n);\n\n$done-&gt;recv();\n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 7757812, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8bb8d0f617ac02473b73e4e66a8e5fa5?s=128&d=identicon&r=PG", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/7757812/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "accepted_answer_id": 43355612, "answer_count": 1, "score": 5, "last_activity_date": 1492011715, "creation_date": 1491940677, "question_id": 43355138, "link": "https://stackoverflow.com/questions/43355138/how-to-use-anyeventhttp-to-get-only-part-of-the-page", "title": "How to use AnyEvent::HTTP to get only part of the page?", "body": "<p>It is necessary to read only part of the page (n bytes) and close the connection, how to do this on AnyEvent::HTTP ?</p>\n"}, {"tags": ["perl", "geoip", "maxmind", "geoip2"], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 3631344, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a2fe6c5951d369ffcbd9bec635a1bc01?s=128&d=identicon&r=PG&f=1", "display_name": "Rabbit", "link": "https://stackoverflow.com/users/3631344/rabbit"}, "edited": false, "score": 0, "creation_date": 1492527888, "post_id": 43404781, "comment_id": 74006763, "body": "Thanks for the answer. I do what your said but unfortunately it does not work. I&#39;m getting the following error now .  Can&#39;t locate object method &quot;_encode_utf_string&quot; via package &quot;MaxMind::DB::Writer::Serializer&quot; at /usr/local/lib/perl/5.14.2/MaxMind/DB/Writer/Serializer.pm line 211."}], "tags": [], "owner": {"reputation": 21, "user_id": 7865273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8818189ce2d7997b78d547090bdc4ced?s=128&d=identicon&r=PG&f=1", "display_name": "J.Zero", "link": "https://stackoverflow.com/users/7865273/j-zero"}, "is_accepted": false, "score": 2, "last_activity_date": 1492145296, "last_edit_date": 1492145296, "creation_date": 1492140486, "answer_id": 43404781, "question_id": 43350806, "link": "https://stackoverflow.com/questions/43350806/custom-maxminddb-geoip2-with-private-ips/43404781#43404781", "title": "Custom MaxmindDB (geoip2) with Private IPs", "body": "<p>This is becuse the ip that your inputted is a private ip address.\nyou can solve it by editing the file:</p>\n\n<pre><code>/usr/local/lib64/perl5/MaxMind/DB/Writer/Tree.pm, line 307\n307  my @reserved_4 = qw(\n 308         0.0.0.0/8\n 309         10.0.0.0/8\n 310         100.64.0.0/10\n 311         127.0.0.0/8\n 312         169.254.0.0/16\n 313         172.16.0.0/12\n 314         192.0.0.0/29\n 315         192.0.2.0/24\n 316         192.88.99.0/24\n 317         192.168.0.0/16\n 318         198.18.0.0/15\n 319         198.51.100.0/24\n 320         203.0.113.0/24\n 321         224.0.0.0/4\n 322         240.0.0.0/4\n 323     );\n</code></pre>\n\n<p>This is all the private ip address. remove somethings so that it works!\nfor example:\nI remove \"10.0.0.0/8\", and execute the command: <code>perl examples/01-getting-started.pl</code> again.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 8978351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4261e8436b5512faa320158ec7c3d2c?s=128&d=identicon&r=PG&f=1", "display_name": "emcewees", "link": "https://stackoverflow.com/users/8978351/emcewees"}, "is_accepted": false, "score": 1, "last_activity_date": 1594801517, "last_edit_date": 1594801517, "creation_date": 1512481459, "answer_id": 47655106, "question_id": 43350806, "link": "https://stackoverflow.com/questions/43350806/custom-maxminddb-geoip2-with-private-ips/47655106#47655106", "title": "Custom MaxmindDB (geoip2) with Private IPs", "body": "<p>I used the <strong>remove_reserved_networks</strong> parameter in the constructor.</p>\n<pre><code>my $tree = MaxMind::DB::Writer::Tree-&gt;new(\n\n# &quot;database_type&quot; is some arbitrary string describing the database.  At\n# MaxMind we use strings like 'GeoIP2-City', 'GeoIP2-Country', etc.\ndatabase_type =&gt; 'GeoIP2-City',\n\n# &quot;description&quot; is a hashref where the keys are language names and the\n# values are descriptions of the database in that language.\ndescription =&gt;\n    { en =&gt; 'IP-Ranges', de =&gt; q{IP-Bereiche}, },\n\n# &quot;ip_version&quot; can be either 4 or 6\nip_version =&gt; 4,\n\n# add a callback to validate data going in to the database\nmap_key_type_callback =&gt; sub { $types{ $_[0] } },\n\n# &quot;record_size&quot; is the record size in bits.  Either 24, 28 or 32.\nrecord_size =&gt; 24,\n\nremove_reserved_networks =&gt; 0,\n);\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 3631344, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/a2fe6c5951d369ffcbd9bec635a1bc01?s=128&d=identicon&r=PG&f=1", "display_name": "Rabbit", "link": "https://stackoverflow.com/users/3631344/rabbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2484, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1594801517, "creation_date": 1491926028, "question_id": 43350806, "link": "https://stackoverflow.com/questions/43350806/custom-maxminddb-geoip2-with-private-ips", "title": "Custom MaxmindDB (geoip2) with Private IPs", "body": "<p>How to create a custom Maxmind database with PRIVATE IPs address. </p>\n\n<p>I need something like this <a href=\"https://github.com/threatstream/mhn/wiki/Customizing-Maxmind-IP-Geo-DB-for-Internal-Networks\" rel=\"nofollow noreferrer\">Customizing Maxmind DB</a>.</p>\n\n<p>I tried to following this <a href=\"https://blog.maxmind.com/2015/09/29/building-your-own-mmdb-database-for-fun-and-profit/\" rel=\"nofollow noreferrer\">Building Your Own MMDB Database for Fun and Profit</a> . So I changed the PERL script to the following: </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse feature qw( say );\n\nuse MaxMind::DB::Writer::Tree;\nuse Net::Works::Network;\n\nmy $filename = 'users.mmdb';\n\n# Your top level data structure will always be a map (hash).  The MMDB format\n# is strongly typed.  Describe your data types here.\n# See https://metacpan.org/pod/MaxMind::DB::Writer::Tree#DATA-TYPES\n\n\nmy %types = (\n    latitude =&gt; 'uint32',\n    longitude     =&gt; 'uint32',\n    city         =&gt; 'utf8_string',\n    country     =&gt; 'utf_string',\n);\n\nmy $tree = MaxMind::DB::Writer::Tree-&gt;new(\n\n    # \"database_type\" is some arbitrary string describing the database.  At\n    # MaxMind we use strings like 'GeoIP2-City', 'GeoIP2-Country', etc.\n    database_type =&gt; 'My-IP-Data',\n\n    # \"description\" is a hashref where the keys are language names and the\n    # values are descriptions of the database in that language.\n    description =&gt;\n        { en =&gt; 'My database of IP data', fr =&gt; q{Mon Data d'IP}, },\n\n    # \"ip_version\" can be either 4 or 6\n    ip_version =&gt; 4,\n\n    # add a callback to validate data going in to the database\n    map_key_type_callback =&gt; sub { $types{ $_[0] } },\n\n    # \"record_size\" is the record size in bits.  Either 24, 28 or 32.\n    record_size =&gt; 24,\n);\n\nmy %address_for_employee = (\n    '10.1.0.0/16' =&gt; {\n          latitude =&gt; -12.9608,\n        longitude      =&gt; 40.5078,\n        city         =&gt; 'Maputo',\n    country         =&gt; 'Mozambique',\n    },\n    '10.2.0.0/16' =&gt; {\n        latitude =&gt; -25.0519,\n        longitude      =&gt; 33.6442,\n        city         =&gt; 'Gaza',\n    country         =&gt; 'Mozambique',\n    },\n);\n\nfor my $address ( keys %address_for_employee ) {\n\n    # Create one network and insert it into our database\n    my $network = Net::Works::Network-&gt;new_from_string( string =&gt; $address );\n\n    $tree-&gt;insert_network( $network, $address_for_employee{$address} );\n}\n\n# Write the database to disk.\nopen my $fh, '&gt;:raw', $filename;\n$tree-&gt;write_tree( $fh );\nclose $fh;\n\nsay \"$filename has now been created\";\n</code></pre>\n\n<p>But no luck. \nNow Im getting the following error : \n<strong>Iteration is not currently allowed in trees with no nodes. Record type: empty at /usr/local/lib/perl/5.14.2/MaxMind/DB/Writer/Tree.pm line 292.</strong></p>\n\n<p>Can anybody help me creating a GEOIP2 DB with private ip address?</p>\n"}, {"tags": ["perl", "routes", "mojolicious"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491922871, "post_id": 43349379, "comment_id": 73762365, "body": "... <i>how many</i> <code>return</code> calls? You do realise the <code>sub</code> exits after the first one, right?"}, {"owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491923322, "post_id": 43349379, "comment_id": 73762689, "body": "Haha yes. Sorry i went a bit wild in trying to get this to work."}, {"owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491923566, "post_id": 43349379, "comment_id": 73762845, "body": "[Tue Apr 11 16:11:22 2017] [debug] Rendering cached template &quot;not_found.html.ep&quot; [Tue Apr 11 16:11:22 2017] [debug] 404 Not Found (0.001313s, 761.615/s) [Tue Apr 11 16:11:22 2017] [debug] Routing to controller &quot;Servers::Controller::Hosts&quot; and action &quot;get_host_id&quot; [Tue Apr 11 16:11:22 2017] [debug] Routing to controller &quot;Servers::Controller::SupportTickets&quot; and action &quot;support_tickets&quot;"}, {"owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491923809, "post_id": 43349379, "comment_id": 73763021, "body": "Nevermind managed to solve it thanks to only doing one return. Thanks Sobrique"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491929976, "post_id": 43349379, "comment_id": 73767187, "body": "Your call <code>return $self-&gt;reply-&gt;not_found</code> should work fine if <code>$self</code> is your context object."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1491930289, "post_id": 43349379, "comment_id": 73767362, "body": "@dipl0: Stack Overflow isn&#39;t a chat forum. If you have a solution then you need to write it up as an answer and accept it when you are permitted. You have asked the whole world for help, and very many people will be coming to this page hoping to solve a similar problem. <i>&quot;Thanks. Bye&quot;</i> isn&#39;t acceptable."}], "answers": [{"tags": [], "owner": {"reputation": 880, "user_id": 1145723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a97af4088a74752aa81dfb56bedf4d76?s=128&d=identicon&r=PG", "display_name": "Christopher Causer", "link": "https://stackoverflow.com/users/1145723/christopher-causer"}, "is_accepted": true, "score": 1, "last_activity_date": 1497531232, "creation_date": 1497531232, "answer_id": 44568070, "question_id": 43349379, "link": "https://stackoverflow.com/questions/43349379/perl-mojolicious-controllers-redirecting-to-not-found-page/44568070#44568070", "title": "Perl mojolicious controllers redirecting to not_found page", "body": "<blockquote>\n  <p>the method is called as part of an under statement</p>\n</blockquote>\n\n<p>Here's the problem I think. If you redirect, you then need to return false. From <a href=\"https://metacpan.org/pod/distribution/Mojolicious/lib/Mojolicious/Guides/Routing.pod#Under\" rel=\"nofollow noreferrer\">the docs</a></p>\n\n<blockquote>\n  <p>The actual action code for this destination needs to return a true value or the dispatch chain will be broken</p>\n</blockquote>\n\n<p>Looking at the <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.33/lib/Mojolicious/Plugin/DefaultHelpers.pm\" rel=\"nofollow noreferrer\">source code</a> for the not_found helper, the return value is always the controller object, which is true. As such, the under action will always continue to the next action regardless if a 404 has been rendered. This is not what you'd naively expect, or want.</p>\n\n<p>To fix this behaviour, you will need to write something like the following in place of <code>return $self-&gt;reply-&gt;not_found;</code></p>\n\n<pre><code>$self-&gt;reply-&gt;not_found and return;\n</code></pre>\n"}], "owner": {"reputation": 827, "user_id": 3353752, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2LunI.jpg?s=128&g=1", "display_name": "dipl0", "link": "https://stackoverflow.com/users/3353752/dipl0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 44568070, "answer_count": 1, "score": 1, "last_activity_date": 1497531232, "creation_date": 1491922303, "last_edit_date": 1491988506, "question_id": 43349379, "link": "https://stackoverflow.com/questions/43349379/perl-mojolicious-controllers-redirecting-to-not-found-page", "title": "Perl mojolicious controllers redirecting to not_found page", "body": "<p>So I am trying to return a 404 not found page in a mojolicious controller, the method is called as part of an under statement and although it temporarily redirects to the not_found page it eventually goes to the specified action and destination.</p>\n\n<pre><code>sub get_host_id {\nmy $self = shift;\nmy $host_id = $self-&gt;stash('host_id');\nreturn $self-&gt;redirect_to('not_found');\nreturn $self-&gt;render('not_found');\n\nreturn $self-&gt;reply-&gt;not_found;\n$self-&gt;render(text =&gt; '404 Not Found');\n$self-&gt;rendered(404);\nreturn $self-&gt;reply-&gt;not_found;\n            return $self-&gt;render(\n          status =&gt; 404,\n          template =&gt; 'not_found',\n);\n                    $self-&gt;reply-&gt;not_found;\n      }\n              template =&gt; 'not_found',\n    );\n                        $self-&gt;reply-&gt;not_found;\n}\n</code></pre>\n\n<p>solved:</p>\n\n<pre><code>  sub get_host_id {\n    my $self = shift;\n\n\n    return $self-&gt;redirect_to('/not_found');\n        }\n</code></pre>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 37580, "user_id": 1248114, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4XXrp.jpg?s=128&g=1", "display_name": "arkascha", "link": "https://stackoverflow.com/users/1248114/arkascha"}, "edited": false, "score": 0, "creation_date": 1491919621, "post_id": 43348277, "comment_id": 73759863, "body": "The exact same question has been asked about 2 hours ago."}, {"owner": {"reputation": 43, "user_id": 7849763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69f9da2ea93de69b4a78830e6d0e240?s=128&d=identicon&r=PG&f=1", "display_name": "Dem", "link": "https://stackoverflow.com/users/7849763/dem"}, "reply_to_user": {"reputation": 37580, "user_id": 1248114, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4XXrp.jpg?s=128&g=1", "display_name": "arkascha", "link": "https://stackoverflow.com/users/1248114/arkascha"}, "edited": false, "score": 0, "creation_date": 1491920015, "post_id": 43348277, "comment_id": 73760163, "body": "Sorry, I tried to delete the previous one."}, {"owner": {"reputation": 37580, "user_id": 1248114, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4XXrp.jpg?s=128&g=1", "display_name": "arkascha", "link": "https://stackoverflow.com/users/1248114/arkascha"}, "edited": false, "score": 0, "creation_date": 1491920042, "post_id": 43348277, "comment_id": 73760185, "body": "May we know <i>why</i> you deleted and recreated this question?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491929421, "post_id": 43348277, "comment_id": 73766881, "body": "Thanks for the update. Could you create a <a href=\"https://stackoverflow.com/help/mcve\">mcve</a>? Then we can try to reproduce this behavior.."}], "answers": [{"tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": true, "score": 2, "last_activity_date": 1491948865, "creation_date": 1491948865, "answer_id": 43357084, "question_id": 43348277, "link": "https://stackoverflow.com/questions/43348277/perl-tk-when-calling-external-scripts-how-to-prevent-other-buttons-to-be-click/43357084#43357084", "title": "Perl Tk: When calling external scripts, how to prevent other buttons to be clicked?", "body": "<p>Here's a script that disables all buttons before launching a command and then re-enables them when the command exits:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse Tk;\nuse Tk::Table;\nuse IO::Handle;\nuse Data::Dumper;\n\nmy $mw= tkinit;\n\nmy @buttons;\n\npush @buttons, $mw-&gt;Button(\n    -text     =&gt; 'Button One',\n    -command  =&gt; \\&amp;action_one,\n)-&gt;pack;\n\npush @buttons, $mw-&gt;Button(\n    -text     =&gt; 'Button Two',\n    -command  =&gt; \\&amp;action_two,\n)-&gt;pack;\n\npush @buttons, $mw-&gt;Button(\n    -text     =&gt; 'Button Three',\n    -command  =&gt; \\&amp;action_three,\n)-&gt;pack;\n\nMainLoop;\n\nexit;\n\n\nsub action_one {\n    run_external_command('xclock');\n}\n\n\nsub action_two {\n    run_external_command('xcalc');\n}\n\n\nsub action_three {\n    run_external_command('xlogo');\n}\n\nsub run_external_command {\n    disable_buttons();\n    open my $fh, '-|', @_;\n    $mw-&gt;fileevent($fh, 'readable', sub { command_read($fh) });\n}\n\n\nsub command_read {\n    my($fh) = @_;\n\n    my $buf = '';\n    if ( sysread($fh, $buf, 4096) ) {\n        print \"Read: '$buf'\";\n    }\n    else {\n        close($fh);\n        enable_buttons();\n    }\n}\n\n\nsub disable_buttons {\n    foreach my $b (@buttons) {\n        $b-&gt;configure(-state =&gt; 'disabled');\n    }\n}\n\n\nsub enable_buttons {\n    foreach my $b (@buttons) {\n        $b-&gt;configure(-state =&gt; 'normal');\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7849763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69f9da2ea93de69b4a78830e6d0e240?s=128&d=identicon&r=PG&f=1", "display_name": "Dem", "link": "https://stackoverflow.com/users/7849763/dem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 43357084, "answer_count": 1, "score": 1, "last_activity_date": 1491948865, "creation_date": 1491919484, "last_edit_date": 1491919662, "question_id": 43348277, "link": "https://stackoverflow.com/questions/43348277/perl-tk-when-calling-external-scripts-how-to-prevent-other-buttons-to-be-click", "title": "Perl Tk: When calling external scripts, how to prevent other buttons to be clicked?", "body": "<p>OS: Linux ( Scientific Linux ) Language and version: Perl 5.24</p>\n\n<p>1.When I click a button the calls an external script like</p>\n\n<pre><code>$mw-&gt;Button(-command =&gt; sub { \n   $value = \\`/root/desktop/script.pl\\`; chomp($value); \n} )-&gt; grind();\n</code></pre>\n\n<ol start=\"2\">\n<li><p>A GUI of the external script will pop out and let me fill up values.</p></li>\n<li><p>I am not done yet with the external script but I \"rapidly click\" a button from the main script (that will pop out a window if I clicked it, but only after the external script is closed).</p></li>\n<li><p>I closed the external script.</p></li>\n<li><p>Massive numbers of windows pops-out one at a time from the main script after I closed the external script.</p></li>\n</ol>\n\n<p>How to prevent the massive popout of windows from other buttons/widgets after closing the external script I called?</p>\n"}, {"tags": ["windows", "perl", "failed-installation", "pdl"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1491920864, "post_id": 43346886, "comment_id": 73760835, "body": "&quot;However, there were issues with the installation of Inline::C &quot; What issues? Show what happened"}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1491922932, "post_id": 43346886, "comment_id": 73762411, "body": "@Dr.Avalanche it kept giving a 255 error for dmake with one of the tests see edit."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1491990810, "post_id": 43350158, "comment_id": 73793986, "body": "So i downloaded GetGnuWin32-0.6.3 and installed that to C:/GnuWin23. Reran cpan -f Inline::C and and still getting the same &#39;diff&#39; and &#39;rm&#39; unknown command error. Is there a specific install location I should have chosen or do I need to undate the PATH variables?"}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1491991453, "post_id": 43350158, "comment_id": 73794487, "body": "Also, PGPLOT and OpenGL are failing as well, is there possibly Something wrong with my installation? I&#39;ve never had this much trouble correctly installing a module before...."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1491992032, "post_id": 43350158, "comment_id": 73794904, "body": "@NzFrancis hi, you need to add the path these programs got installed into, to the Windows PATH environment variable (look here: <a href=\"https://www.java.com/en/download/help/path.xml\" rel=\"nofollow noreferrer\">java.com/en/download/help/path.xml</a>). If you do it with the UI then you need to close and start a new command prompt before the changes will take effect. Please note that <code>cpanm</code> is much faster than <code>cpan</code> and also note that I suggest trying with <code>--notest</code>. These modules are complex and rely on third party tools. I can only answer specific questions"}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1491998165, "post_id": 43350158, "comment_id": 73799337, "body": "Thanks for your help so far. I changed the installation directory to match the PATH directory but still getting the same error, and even using &#39;--notest&#39; am still unable to install OpenGL and PGPLOT. See EDIT 3."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492001208, "post_id": 43350158, "comment_id": 73801582, "body": "@NzFrancis Regarding OpenGL, there&#39;s a fix here: <a href=\"https://sourceforge.net/p/pogl/bugs/26/\" rel=\"nofollow noreferrer\">sourceforge.net/p/pogl/bugs/26</a>"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492001367, "post_id": 43350158, "comment_id": 73801715, "body": "@NzFrancis Also, I&#39;m running a modern strawberry, you&#39;re running an old DMIM perl, your results will be different from mine since there&#39;s lots of changes. Specifically use the same version, use <code>cpanm</code>"}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492005512, "post_id": 43350158, "comment_id": 73805181, "body": "I tried the fix, copied replaced my files and ran cpanm again, got the same error message, maybe as you say it is too old a version."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492005634, "post_id": 43350158, "comment_id": 73805301, "body": "@NzFrancis lots of changes over the years. No problems on my setup."}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492006001, "post_id": 43350158, "comment_id": 73805636, "body": "Ok, well tomorrow maybe it would be Worth my Rolling forward again and getting a later version - and another IDE perhaps. Is Windows uninstall a reliable method for cleaning out a perl installation in your opinion or are more drastic means required?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492006171, "post_id": 43350158, "comment_id": 73805767, "body": "Uninstall, delete any left over files, if you&#39;ve altered your PATH change it. Strawberry is best results on Windows. Padre can be installed by cpanm. All this seems to work better under linux, so maybe consider a Virtual Machine/dual boot."}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492006728, "post_id": 43350158, "comment_id": 73806244, "body": "Ok, i&#39;ll try that tomorrow then and let you know how it works out. What version of strawberry do you use and is it x32 or x64 - just so I can more exactly copy your set-up and hence advice?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492006811, "post_id": 43350158, "comment_id": 73806317, "body": "I run 5.24.1 64bit"}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492074318, "post_id": 43350158, "comment_id": 73837020, "body": "So I restarted the process and it seemed to be going well until the Inline::C installation with still doesn&#39;t work. And installing diff doesn&#39;t seem to change anything, or else the .exe doesn&#39;t create the right pointers and I need to do Something else so that cmd can recognise it... log file has been added to the question."}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492074376, "post_id": 43350158, "comment_id": 73837048, "body": "I could just not test, as you suggested before, but does that mean some functionality will be lost? could it prevent me from being able to edit, display and then save image files from the imput data files?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492074572, "post_id": 43350158, "comment_id": 73837174, "body": "@NzFrancis I doubt it. Install with <code>cpanm --notest</code> then try some examples yourself, this will be much quicker (less time wasted) than trying to work around known problems."}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492092240, "post_id": 43350158, "comment_id": 73849785, "body": "I see what you mean. So I added the PDL module with --notest. &#39;cpanm OpenGL&#39; said it was already up to date. Running &#39;cpanm PGPLOT&#39; results in an error: &#39;&#39;dmake.exe:  Error code 129, while making &#39;PGPLOT.o&#39;&#39;&#39; (taken from build.log file) but &#39;cpanm PDL::Graphics::PGPLOT&#39; returns a &#39;this module is up to date&#39;. Yet when I run a PGPLOT test code it gives the error described in my latest edit."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "reply_to_user": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492097606, "post_id": 43350158, "comment_id": 73853681, "body": "Follow the win32 instructions: <a href=\"https://metacpan.org/source/KGB/PGPLOT-2.21/INSTALL-Win32\" rel=\"nofollow noreferrer\">metacpan.org/source/KGB/PGPLOT-2.21/INSTALL-Win32</a>"}, {"owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "edited": false, "score": 0, "creation_date": 1492163506, "post_id": 43350158, "comment_id": 73877444, "body": "The linked provided for the .dll and other files are no longer in use. I did find an alternative distribution i believe, here &lt;<a href=\"http://www.astro.caltech.edu/~tjp/pgplot/install.html\" rel=\"nofollow noreferrer\">astro.caltech.edu/~tjp/pgplot/install.html</a>&gt; but don&#39;t quite understand how to go about following these instructions as there is no <code>Makefile.pl</code> to use, or installers that I can see."}], "tags": [], "owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "is_accepted": false, "score": 2, "last_activity_date": 1491924301, "creation_date": 1491924301, "answer_id": 43350158, "question_id": 43346886, "link": "https://stackoverflow.com/questions/43346886/installing-perl-and-pdl/43350158#43350158", "title": "Installing Perl and PDL", "body": "<p>After translating from French I can see that you don't have <code>diff</code> in your system. Either install diff (part of gnu32: <a href=\"http://gnuwin32.sourceforge.net/\" rel=\"nofollow noreferrer\">http://gnuwin32.sourceforge.net/</a>) or just skip the tests. See also:</p>\n\n<p><a href=\"https://github.com/ingydotnet/inline-c-pm/issues/60\" rel=\"nofollow noreferrer\">https://github.com/ingydotnet/inline-c-pm/issues/60</a></p>\n\n<p>With Strawberry 5.24.1 simply type the following from the command prompt:</p>\n\n<pre><code>cpanm --notest PDL\n</code></pre>\n\n<p>or if you want to watch everything that's going on:</p>\n\n<pre><code>cpanm -v --notest PDL\n</code></pre>\n\n<p>This will take some time to run.</p>\n"}], "owner": {"reputation": 13, "user_id": 6552416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce893be6992a7f1edff69b1c41df09c2?s=128&d=identicon&r=PG&f=1", "display_name": "NzFrancis", "link": "https://stackoverflow.com/users/6552416/nzfrancis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 933, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492162203, "creation_date": 1491916149, "last_edit_date": 1492162203, "question_id": 43346886, "link": "https://stackoverflow.com/questions/43346886/installing-perl-and-pdl", "title": "Installing Perl and PDL", "body": "<p>I am currently trying - unsuccessfully to install perl PDL as I would like to automate some of my data analysis and graphics generation.</p>\n\n<p>Unfortunately I seem unable to even install the necessary modules without issue, let alone create a small script to deal with my data files.</p>\n\n<p>I have some rudementary experience with Perl but Nothing fancy and am using Windows 10 x64.</p>\n\n<p>Initially I went for the x64 strawberry perl v5.24 installation, followed by ppm installations of Astro::FITS::Header, Convert::UU, OpenGL and PDL - as instructed here <a href=\"http://pdl.perl.org/?page=install\" rel=\"nofollow noreferrer\">http://pdl.perl.org/?page=install</a>. However, there were issues with the installation of Inline::C and after trying the example listed on page 5 of the PDL_Book_Latest <a href=\"http://sourceforge.net/projects/pdl/files/PDL/2.4.10/PDL-Book-20120205.pdf/download\" rel=\"nofollow noreferrer\">http://sourceforge.net/projects/pdl/files/PDL/2.4.10/PDL-Book-20120205.pdf/download</a> there wasn't any image appearing, nor image file in any location I could think to search. Back to Google and still no luck finding any information on the source of this issue so I decided to go back to square one and use an older version in the hopes that it would be more well documented.</p>\n\n<p>So, uninstallation of strawberry perl through Windows installed programs dialog, deletion of strawberry folder and registry entries containing \"strawberry\". Then a new installation of perl, with the Padre IDE, v5.14 - maybe some debugging fonctionality will help pinpoint the errors. Started installing the same modules (Astro::FITS::Header, Convert::UU, OpenGL, PGPLOT). Astro and Convert worked fine, but the OpenGL started throwing errors about ExtUtils::F77 which I am apparently missing after a few more hours searching. I go to install this module and it keeps giving errors about 'gfortan' being an unknown command... It was my understanding that the idea of PDL was to avoid fortran and C, and I have found next to no information about this installation problem so far. </p>\n\n<p>So i decided to try an alternative approach. I installed the ppm module from cpan and repeated the initial installation process through the ppm command. This time i get:</p>\n\n<p>\"Unknown element 'PROVIDE' found inside SOFTPKG. at C:/Dwimperl/perl/site/lib/PPM.pm line 1462.\"</p>\n\n<p>So my question is as follows:</p>\n\n<p>Am I missing some critical step in the installation process? Is my system just handing this really badly, and if so is there any sort of possible work around? Is the fact that I tried two different versions liable to create path issues that could be at the root of this problem?</p>\n\n<p>Could anyone provide an alternative and preferably not too complex route to install PDL with a given perl installation on Windows 10?</p>\n\n<p>EDIT 1:</p>\n\n<p>Here is the code for the error I got trying to install Inline::C, an apparent pre-requisite for PDL</p>\n\n<p><code>code deleted to make space for updates...</code></p>\n\n<p>EDIT 3:</p>\n\n<p>I reinstalled GnuWin32 in the directory specified by PATH, rather that changing PATH, and the tried the installation again. Inline::C gave the same 'diff' and 'rm' errors. So i ran \"cpanm --notest 'package'\" to install Inline::C and then PDL, both said they were successful. However, even using '--notest' cpanm could not install OpenGL and PGPLOT.</p>\n\n<p>The final objectif is to be able to produce graphics using the fonctions from PGPLOT: for example</p>\n\n<pre><code># use PDL;\n# use PDL::Graphics::PGPLOT;\n# imag(sin(rvals(200,200)+1));\n</code></pre>\n\n<p>yet this doesn't work of course if PGPLOT can't install.</p>\n\n<p>EDIT 4:</p>\n\n<p>Tried the fix found by @Dr.Avalange at sourceforge <a href=\"https://sourceforge.net/p/pogl/bugs/26/\" rel=\"nofollow noreferrer\">https://sourceforge.net/p/pogl/bugs/26/</a> and noticed that I seem to have multiple copies of this file. </p>\n\n<p><a href=\"https://imgur.com/a/AkMVo\" rel=\"nofollow noreferrer\">Here</a></p>\n\n<p>Is this normal...?</p>\n\n<p>EDIT 5:\nSo i uninstalled perl, deleted any lingering files I could find in %APPDATA%, %USERPROFILE% and C:/DWIM, and then ran ccleaner just in case I missed anything.</p>\n\n<p>I then downloaded Strawberry perl 5.24.1 x64 for Windows and installed it.</p>\n\n<p>After this, I ran 'cpanm Astro::FITS::Header', cpanm 'Convert-UU' and 'cpanm OpenGL' as per <a href=\"http://pdl.perl.org/?page=install\" rel=\"nofollow noreferrer\">http://pdl.perl.org/?page=install</a>. This all worked fine. Then I ran 'cpanm PDL' which installed Inline, Pegex, Win32::Mutex and Module::Compile dependencies. However, if had the same error with Inline::C that you mentioned previously. </p>\n\n<p>I already had GetGnuWin32 installed before so not sure why this isn't working. The Windows 'Path' environment (not PATH - this doesn't exist according to the advaced system dialogue) is noted as </p>\n\n<p>%USERPROFILE%\\AppData\\Local\\Microsoft\\WindowsApps; \nIn this directory I have the folder GetGnuWin32 which should have installed all the packages from the link you provided, unless there is a supplementary step that I missed to install this correctly? So I redownloaded the DiffUtils setup and ran that, installing to \\programfiles(x86) (default option). I then reran 'cpanm PDL'.</p>\n\n<p>I still get the same 'diff' error message. So is DiffUtils, not installing properly? (I did close and re-open the commandline between tries and after the installation)</p>\n\n<p>EDIT 6:</p>\n\n<p>So after installing PDL and PGPLOT with --notest I tried to run the following test and it failed. See below</p>\n\n<pre><code>C:\\Windows\\system32&gt;perldl\nperlDL shell v1.357\n PDL comes with ABSOLUTELY NO WARRANTY. For details, see the file\n 'COPYING' in the PDL distribution. This is free software and you\n are welcome to redistribute it under certain conditions, see\n the same file for details.\nReadLines, NiceSlice, MultiLines  enabled\nReading PDL/default.pdl...\nFound docs database C:/Strawberry/perl/site/lib/PDL/pdldoc.db\nType 'help' for online help\nType 'demo' for online demos\nLoaded PDL v2.017 (supports bad values)\n\nNote: AutoLoader not enabled ('use PDL::AutoLoader' recommended)\n\n                                                                                                                        pdl&gt; use PDL::Graphics//PLplot\nUnknown regexp modifier \"/P\" at (eval 62) line 4, at end of line\nUnknown regexp modifier \"/L\" at (eval 62) line 4, at end of line\nUnknown regexp modifier \"/t\" at (eval 62) line 4, at end of line\nBEGIN not safe after errors--compilation aborted at (eval 62) line 5, &lt;DATA&gt; line 207.\n\n                                                                                                                        pdl&gt; use PDL::Graphics::PLplot\nCan't locate PDL/Graphics/PLplot.pm in @INC (you may need to install the PDL::Graphics::PLplot module) (@INC contains: C:/Strawberry/perl/site/lib/MSWin32-x64-multi-thread C:/Strawberry/perl/site/lib C:/Strawberry/perl/vendor/lib C:/Strawberry/perl/lib .) at (eval 72) line 5.\nBEGIN failed--compilation aborted\n\n                                                                                                                        pdl&gt; use PDL\n\n                                                                                                                        pdl&gt; use lib 'C:/Strawberry/perl/site/lib/PDL/Graphics'\n\n                                                                                                                        pdl&gt; use PGPLOT\n\n                                                                                                                        pdl&gt; use PDL::Graphics::PGPLOT\n\n                                                                                                                        pdl&gt; imag(sin(rvals(200,200)+1))\nUndefined subroutine &amp;PDL::Graphics::PGPLOT::pgqinf called at C:/Strawberry/perl/site/lib/PDL/Graphics/PGPLOT.pm line 408, &lt;DATA&gt; line 90.\n\n                                                                                                                        pdl&gt; exit\n\nC:\\Windows\\system32&gt;cpanm PDL::Graphics::PGPLOT::pgqinf\n! Finding PDL::Graphics::PGPLOT::pgqinf on cpanmetadb failed.\n! Finding PDL::Graphics::PGPLOT::pgqinf () on mirror http://www.cpan.org failed.\n! Couldn't find module or a distribution PDL::Graphics::PGPLOT::pgqinf\n\nC:\\Windows\\system32&gt;cpan PDL::Graphics::PGPLOT::pgqinf\nLoading internal null logger. Install Log::Log4perl for logging messages\nCPAN: CPAN::SQLite loaded ok (v0.211)\nDatabase was generated on Thu, 13 Apr 2017 13:49:14 GMT\n\n\nC:\\Windows\\system32&gt;\n</code></pre>\n\n<p>There was already a directory problem but I managed to point it in th right direction I had thought. Also tried installing the PLplot 'cpanm' said the installation was successful but there is no .pm file, only a .pd in another directory and so the use PDL::Graphics::PLplot fails as there is no .pm file to find.</p>\n\n<p>EDIT: 7\nSo retrying <code>ppm install http://www.sisyphusion.tk/ppm/PGPLOT.ppd</code> seemed to work this time as the links int he explanation you provided are no longer in use\n<a href=\"http://www.kalinabears.com.au/w32perl/pgplot-5.2.2-mingw32.tar.bz2\" rel=\"nofollow noreferrer\">http://www.kalinabears.com.au/w32perl/pgplot-5.2.2-mingw32.tar.bz2</a>\n<a href=\"http://jrfonseca.home.dyndns.org/projects/gnu-win32/software/ported/patches/pgplot-5.2.2-mingw32.diff.gz\" rel=\"nofollow noreferrer\">http://jrfonseca.home.dyndns.org/projects/gnu-win32/software/ported/patches/pgplot-5.2.2-mingw32.diff.gz</a>\nAnd while this seemed to work, there are no traces of the files that were listed as necessary for the installation, unless they were just for this specific method?</p>\n\n<pre><code>pgplot/bin/cpgplot.dll\npgplot/bin/pgplot.dll\npgplot/bin/grfont.dat\npgplot/include/cpgplot.h\npgplot/lib/cpgplot.a\npgplot/lib/pgplot.a\n</code></pre>\n\n<p>finally, trying the example again gives the following; no errors, but no image either...</p>\n\n<pre><code>Microsoft Windows [version 10.0.14393]\n(c) 2016 Microsoft Corporation. Tous droits r\u00e9serv\u00e9s.\n\nC:\\Windows\\system32&gt;perldl\nperlDL shell v1.357\n PDL comes with ABSOLUTELY NO WARRANTY. For details, see the file\n 'COPYING' in the PDL distribution. This is free software and you\n are welcome to redistribute it under certain conditions, see\n the same file for details.\nReadLines, NiceSlice, MultiLines  enabled\nReading PDL/default.pdl...\nFound docs database C:/Strawberry/perl/site/lib/PDL/pdldoc.db\nType 'help' for online help\nType 'demo' for online demos\nLoaded PDL v2.017 (supports bad values)\n\nNote: AutoLoader not enabled ('use PDL::AutoLoader' recommended)\n\npdl&gt; use PDL\n\npdl&gt; use PDL::Graphics::PGPLOT\n\npdl&gt; imag(rvals(200,200)+1)\n %PGPLOT, Unable to read font file: grfont.dat\n %PGPLOT, Use environment variable PGPLOT_FONT to specify the location of the PGPLOT grfont.dat file.\nDisplaying 200 x 200 image from 1 to 142.421356201172, using 240 colors (16-255)...\n\npdl&gt; $ENV{PGPLOT_FONT} = \"C:/Strawberry/perl/site/lib/PGPLOT/pgplot_supp\"\n\npdl&gt; imag(rvals(200,200)+1)\nDisplaying 200 x 200 image from 1 to 142.421356201172, using 240 colors (16-255)...\n\npdl&gt;\n</code></pre>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491919949, "post_id": 43344699, "comment_id": 73760110, "body": "You&#39;ve updated the crucial line <code>print $fh_out &#39;&lt;a href=&quot;&#39; .html &#39;&quot;&gt;&#39; . $word . &#39;&lt;&#47;a&gt;&#39;</code> a couple of times and now the code doesn&#39;t compile under strictures. Please can you make it match the code you&#39;re having trouble with? And make sure that you have <code>use strict</code> and <code>use warnings &#39;all&#39;</code> in place."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491920037, "post_id": 43344699, "comment_id": 73760178, "body": "Is this CGI code?"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491928362, "post_id": 43344699, "comment_id": 73766250, "body": "@Borodin: I don&#39;t it&#39;s CGI code - I think it&#39;s generating static HTML files."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1491935026, "post_id": 43344699, "comment_id": 73770226, "body": "@DaveCross: That&#39;s what it&#39;s <i>doing</i>, but people&#39;s write some strange stuff expecting it to appear on their browser! Also, they talk about <i>&quot;If I click the <code>Mus</code> folder it should open <code>Mus.html</code>&quot;</i> and I don&#39;t think they&#39;re talking about a file explorer."}, {"owner": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "edited": false, "score": 0, "creation_date": 1491969925, "post_id": 43344699, "comment_id": 73782431, "body": "Here my .html files contains contents with href links.Each href links points to directory and sub directory names.If i click href links(i.e links with directory names should point to the respected .html files from its represented directory names).Finally the links should open the represented .html files.@Borodin"}, {"owner": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "edited": false, "score": 0, "creation_date": 1491971085, "post_id": 43344699, "comment_id": 73782749, "body": "i had added my expected part queries in my question check with it let me know for any doubts@Borodin"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491986429, "post_id": 43344699, "comment_id": 73790567, "body": "@gore: Your edit didn&#39;t clarify anything at all. Please give us some sample inputs along with the expected output."}, {"owner": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "edited": false, "score": 0, "creation_date": 1491989034, "post_id": 43344699, "comment_id": 73792560, "body": "check now@DaveCross"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1492016635, "post_id": 43344699, "comment_id": 73813472, "body": "@gore: Do you not understand what I mean when I ask you to show us the expected output? As I understand it, the output you want is HTML, but the samples you&#39;ve edited into your question are plain text. Where are the HTML tags? Exactly what output do you need?"}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1491928270, "post_id": 43348626, "comment_id": 73766195, "body": "Or, even, just <code>print $fh_out qq[&lt;a href=&quot;$word.html&quot;&gt;$word&lt;&#47;a&gt;];</code>."}, {"owner": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "edited": false, "score": 0, "creation_date": 1491969136, "post_id": 43348626, "comment_id": 73782235, "body": "But the method which you showed is not linking its html file for its sub directories @Adam Taylor"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "edited": false, "score": 1, "creation_date": 1491986369, "post_id": 43348626, "comment_id": 73790525, "body": "@gore: If the answer doesn&#39;t do what you want it to do, that will because (even after your recent edits) your question is very unclear."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "edited": false, "score": 0, "creation_date": 1491987192, "post_id": 43348626, "comment_id": 73791115, "body": "@gore: As I said in a comment on the original question. You need to give us some sample input and the expected output. You haven&#39;t done that - and that makes it hard for us to help you."}, {"owner": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "edited": false, "score": 0, "creation_date": 1491988162, "post_id": 43348626, "comment_id": 73791923, "body": "check now@DaveCross"}], "tags": [], "owner": {"reputation": 6733, "user_id": 52116, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c2fdf17881a0a3d248f9d431f98e1bca?s=128&d=identicon&r=PG", "display_name": "Adam Taylor", "link": "https://stackoverflow.com/users/52116/adam-taylor"}, "is_accepted": false, "score": 1, "last_activity_date": 1491920369, "creation_date": 1491920369, "answer_id": 43348626, "question_id": 43344699, "link": "https://stackoverflow.com/questions/43344699/failed-to-link-folder-names-to-their-html-contents/43348626#43348626", "title": "Failed to link folder names to their *.html contents", "body": "<p>It's hard to tell what you're trying to achieve here, it's quite an old programming style you are using but is it as simple as changing the printing of the link?</p>\n\n<pre><code>print $fh_out '&lt;a href=\"' .html '\"&gt;' . $word . '&lt;/a&gt;';\n</code></pre>\n\n<p>to</p>\n\n<pre><code>print $fh_out '&lt;a href=\"' . $word . '.html\"&gt;' . $word . '&lt;/a&gt;';\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7844452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb36911e06654991e86122fd9f466d1f?s=128&d=identicon&r=PG&f=1", "display_name": "go re", "link": "https://stackoverflow.com/users/7844452/go-re"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1491988146, "creation_date": 1491910306, "last_edit_date": 1592644375, "question_id": 43344699, "link": "https://stackoverflow.com/questions/43344699/failed-to-link-folder-names-to-their-html-contents", "title": "Failed to link folder names to their *.html contents", "body": "\n<p>Here is my code and folder.</p>\n<h3>Folder structure:</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Mus\n|-- Mus.config\n|-- Mus.html\n`-- Mus_Digital\n    |-- Digi_Verification\n    |   |-- Digi_Verification.config\n    |   |-- Digi_Verification.html\n    |   `-- rev1\n    |       |-- _projects_Mus_Mus_Digi_Digi_Verification_rev1.config\n    |       `-- _projects_Mus_Mus_Digi_Digi_Verification_rev1.html\n    |-- Mus_Digital.config\n    `-- Mus_Digital.html\n</code></pre>\n<p>The above is my obtained directory structure from <code>$output_dir</code>. I need to convert all  <code>.config</code> files to <code>.html</code> format.</p>\n<p>If I click the <code>Mus</code> folder it should open <code>Mus.html</code>, if I click <code>Mus_Digital</code> it should open <code>Mus_Digital.html</code>, and so on. The same should apply to all folders and sub folders and also for <code>href</code> links.</p>\n<p>In my code the <code>href</code> links are not pointing to its *.html. Help to point directly to its <code>*.html</code> file when the folder is clicked.</p>\n<h3>My code:</h3>\n<pre class=\"lang-perl prettyprint-override\"><code>print &quot;Converting the .config files to .html files at destination location \\n&quot;;\n\n##HTML CONVERSION##\n\nmy @files = File::Find::Rule-&gt;file-&gt;name( '*.config' )-&gt;prune-&gt;in( $output_dir );\n\nforeach my $file ( @files ) {\n\n    my ( $name, $root, $ext ) = $file =~ m|(.*)/(.*)\\.(.*)|;\n\n    my $outfile = &quot;$name/$root.html&quot;;\n    open my $fh_out, '&gt;', $outfile or die &quot;Can't open $outfile: $!&quot;, &quot;\\n&quot;;\n\n    my $head = &quot;\n&lt;!doctype html&gt;\n&lt;html lang=\\&quot;en\\&quot;&gt; \n  &lt;head&gt;\n    &lt;meta charset=\\&quot;utf-8\\&quot;&gt;\n    &lt;title&gt;DCMS_CHECKLIST&lt;/title&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/head&gt; \n  &lt;body&gt;\n    &lt;table&gt;\n      &lt;th&gt;SL.NO&lt;/th&gt;\n      &lt;th&gt;CHECKLIST ITEM&lt;/th&gt;\n      &lt;th&gt;VALUE&lt;/th&gt;\n      &lt;th&gt;COMMENTS&lt;/th&gt;\n      &lt;th&gt;CONFIRMATION&lt;/th&gt;\n      &lt;style&gt;\n        .bold {\n          font-weight: bold;\n        }\n        .bold td\n        {\n        border: 0px;\n        }\n        table, th, td {\n          border: 1px solid black;\n        }\n      &lt;/style&gt;&quot;;\n\n    print $fh_out $head;    # write the header\n\n    open my $fh, '&lt;', $file or die &quot;Can't open $file: $!&quot;;\n    \n    while ( my $line = &lt;$fh&gt; ) {\n\n        chomp $line;\n\n        for ( $line ) {\n            s/\\&amp;//g;\n            #s/[\\\\\\_\\@\\_]//g;\n            s/COMMENT//g;\n        }\n\n        my @data  = split /:/, $line;\n        my $class = $data[0] ? 'normal' : 'bold';\n\n        print $fh_out qq[&lt;tr class=&quot;$class&quot;&gt;];\n\n        # my $href=&quot;http://iad.sd.aog.com/cps/dev/kb/cms/cms_prects/&quot;;\n\n        my $check  = 0;\n        my $dolink = $data[0] !~ m/[\\=\\%]/;\n\n        for my $word ( @data ) {\n\n            $check++;\n\n            print $fh_out '&lt;td&gt;';\n\n            if ( $check == 1 &amp;&amp; $dolink ) {\n                print $fh_out '&lt;a href=&quot;'$word'.html&quot;&gt;' . $word . '&lt;/a&gt;';   \n            }\n            else {\n                print $fh_out $word;\n            }\n\n            print $fh_out '&lt;/td&gt;';\n        }\n    }\n}\n</code></pre>\n<p><code>$href</code> is the default output directory. All the output directories will be under this path.</p>\n<p><strong>Expected part in the code is as follows:</strong></p>\n<p>Each .html file will have some contents with the href link.Those contents names are named with folder names.</p>\n<p>so,now if i click any of those links it should open the respected directories .html file.</p>\n<p>For example:</p>\n<p>Mus.html have the following contents .</p>\n<p>Tensil</p>\n<p>chip</p>\n<p>Mus_Digital</p>\n<p>Each row contents will have href link.So if i click Mus_Digital it should directly open the Mus_Digital.html.Inside Mus_Digital.html i have some other contents with href link(i.e Digi_verification Now if i click Digi verification it should open Digi_verification.html).Now it fails to open as i mentioned.</p>\n<p><strong>Re-consider:</strong></p>\n<p>1.Here you can able to see many .html files from parent folder and sub folders.</p>\n<p>2.So now if you open any one .html file you can view the folder names(such as Mus_Digital,Digi_verification,rev1)</p>\n<p>3.So now you can see the folder structure here Mus_Digital directly link to Mus_Digital.html,Digi_Verification directly link to Digi_Verification.html,rev1 directly link to _Projects_Mus_Mus_Digi_Digi_Verfication_rev1.html.</p>\n<p>4.Likewise now if you click any of the folder names which have href links it should open the linking .html file)</p>\n<p>For example consider Now you are inside the Mus.html.Here you have the following contents like Mus_Digital and Digi_Verification.If you click Mus_Digital it should open Mus_Digital.html .(For your reference you can check the folder structure).</p>\n<p><strong>sample output:</strong></p>\n<p>I had done this in termial:</p>\n<pre class=\"lang-none prettyprint-override\"><code>firefox file:///_projects/Mus/\n\nName    Size    Last Modified\nMuska.config 1 KB   04/12/2017  02:26:57 PM\nMuska.html   1 KB   04/12/2017  02:27:00 PM\nMuska_Digital           04/12/2017  02:27:00 PM\n</code></pre>\n<p>Now i click Muska.html it have the following contents with links</p>\n<pre class=\"lang-none prettyprint-override\"><code>SL.NO   CHECKLIST ITEM  VALUE   COMMENTS    CONFIRMATION\nTensilica   0%  0%\nChipTop     0%  0%\nMus_Digital     100.00%     100.00%\nOVERALL_STATUS=33.33%\nPARTIAL_STATUS=33.33%\n</code></pre>\n<p>Now if click Mus_Digital from the above it shows the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>File not found\n\nFirefox can't find the file at /_projects/Muska/Mus_Digital .html.\n\n    Check the file name for capitalization or other typing errors.\n    Check to see if the file was moved, renamed or deleted.\n\nSuppose if i click Mus_Digital folder from here firefox file:///_projects/Mus/\n\nI will open the following contents:\n\nName    Size    Last Modified\nDigi_Verification 04/12/2017    02:27:00 PM\nFile:Muska_Digital.config 1 KB  04/12/2017  02:26:57 PM\nFile:Muska_Digital.html 1 KB    04/12/2017  02:27:00 PM\n\nHere if i click Digi_verification it will open the following file with contents.\n\nName    Size    Last Modified\nFile:Digi_Verification.config\n    1 KB    04/12/2017  02:26:56 PM\nFile:Digi_Verification.html\n    1 KB    04/12/2017  02:27:00 PM\nrev1\n        04/12/2017  02:27:00 PM\n</code></pre>\n<p>Here if i click Digi_verification.html it will open the following contents:</p>\n<pre class=\"lang-none prettyprint-override\"><code>SL.NO   CHECKLIST ITEM  VALUE   COMMENTS    CONFIRMATION\nRevision1   100.00%     100.00%\nOVERALL_STATUS=100.00%\nPARTIAL_STATUS=100.00%\n</code></pre>\n<p>If i click Revision1 it shows following error;</p>\n<pre class=\"lang-none prettyprint-override\"><code>File not found\n\nFirefox can't find the file at /_projects/Mus/Mus_Digital/Digi_Verification/Revision1 .html.\n\n    Check the file name for capitalization or other typing errors.\n    Check to see if the file was moved, renamed or deleted.\n</code></pre>\n<p>Expected output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Links are broken and they are fetching from its right folder location\n</code></pre>\n"}, {"tags": ["regex", "perl", "split"], "answers": [{"tags": [], "owner": {"reputation": 105827, "user_id": 3037257, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/nq6Zo.jpg?s=128&g=1", "display_name": "Pranav C Balan", "link": "https://stackoverflow.com/users/3037257/pranav-c-balan"}, "is_accepted": true, "score": 3, "last_activity_date": 1491909849, "creation_date": 1491909849, "answer_id": 43344534, "question_id": 43344501, "link": "https://stackoverflow.com/questions/43344501/perl-split-regex-with-delimiter-prefix/43344534#43344534", "title": "Perl split regex with delimiter-prefix", "body": "<p>Use <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">negative look behind assertion</a> for that which checks backwards.</p>\n\n<pre><code>split (/(?&lt;!c),/, $str)\n</code></pre>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "accepted_answer_id": 43344534, "answer_count": 1, "score": 3, "last_activity_date": 1491909849, "creation_date": 1491909777, "question_id": 43344501, "link": "https://stackoverflow.com/questions/43344501/perl-split-regex-with-delimiter-prefix", "title": "Perl split regex with delimiter-prefix", "body": "<p>I want to split if in front of the delimiter if there is NOT a special character.</p>\n\n<pre><code>my $str = \"a,b,c,d,e\";\nmy @lst = split (/,/, $str);\n\n# gives me: (\"a\", \"b\", \"c\", \"d\", \"e\")\n\n# now I want to split after any , with not a character c in front of the ,.\n# (\"a\", \"b\", \"c,d\", \"e\")\n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>split (/(?!c),/, $str)\n</code></pre>\n\n<p>but it was not working as expected.</p>\n"}, {"tags": ["linux", "bash", "perl", "jenkins"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1491923790, "post_id": 43344040, "comment_id": 73763003, "body": "Thanks @ vipin kumar  two questions here is Link_A a kind of file ? what is feed_bts.ini ? is that a file what kind of file is it , with regards to the content?"}], "tags": [], "owner": {"reputation": 2682, "user_id": 6404949, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-ksf1VmNZnPA/AAAAAAAAAAI/AAAAAAAAExQ/uleAWJ-xbJg/photo.jpg?sz=128", "display_name": "VIPIN KUMAR", "link": "https://stackoverflow.com/users/6404949/vipin-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1491908412, "creation_date": 1491908412, "answer_id": 43344040, "question_id": 43343711, "link": "https://stackoverflow.com/questions/43343711/perl-and-shell-script-in-redhat/43344040#43344040", "title": "Perl and shell script in redhat", "body": "<p>See below to understand line by line use of your script - </p>\n\n<pre><code>#!/bin/bash #### Used to set the type of script \"bash\"\nset +xe  #### Used to execute the script in debug mode (set +x) and e is used to receive the input from terminal\n\nif [ x\"$Link_A\" == \"x\" ] ; then    ##### condition check if x appending something is equal to x means no value in variable LinK_A\necho \"Link_A parameter not set, DOESNOT execute FUNCTION\"   ##### print this line if above condition is true\nelse  ###### if above condition is not true do below operation\ncp -f ~/cached-resources/www.github.com/file1/executables/JenkinsScripts/jenkins_feed.pl ./jenkins_feed.pl\n#####above line copy the file jenkis_feed.pl from specified directory to current dir forcefully\nperl jenkins_feed.pl $JENKINS_HOME/feed_bts.ini $Link_A #### execute jenkil program which take two input parameter\nfi\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1491923552, "post_id": 43347678, "comment_id": 73762838, "body": "thanks for such a nice explanation. I have few questions here. 1. Is Link_A a file ?    2. what does feed_bts.ini means do i need to create a file like this explicitly if not present?          3. Do I need to keep the jenkins_feed.pl and feed_bts.ini in same directory to run the script?      4. from which path is the perl script executing?"}, {"owner": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1491933843, "post_id": 43347678, "comment_id": 73769527, "body": "Thank you very much :-) @ chicks"}, {"owner": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1492092999, "post_id": 43347678, "comment_id": 73850368, "body": "Can you help me with the perl script if Ok for you as I am not able to put the things in proper way. It would be great :-)"}, {"owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "reply_to_user": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1492095566, "post_id": 43347678, "comment_id": 73852303, "body": "Please edit the initial question to include the source code from the script and whatever specific questions you have about it."}, {"owner": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1492169500, "post_id": 43347678, "comment_id": 73880070, "body": "I have added the source code repo can you please help here"}, {"owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "reply_to_user": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1492229552, "post_id": 43347678, "comment_id": 73903002, "body": "I think I&#39;ve done a passable job at interpreting the script.  Have I covered what you hoped for?"}, {"owner": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "edited": false, "score": 0, "creation_date": 1492240732, "post_id": 43347678, "comment_id": 73905257, "body": "Great @chicks Thank you very much for so detailed explanation, appreciate a lot. So I would need a config file hardcoded the info in it and the perl script to run with the shell"}], "tags": [], "owner": {"reputation": 1901, "user_id": 2002471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/222d816f24fcb2d01e92937b6af01d34?s=128&d=identicon&r=PG", "display_name": "chicks", "link": "https://stackoverflow.com/users/2002471/chicks"}, "is_accepted": true, "score": 1, "last_activity_date": 1492229440, "last_edit_date": 1492229440, "creation_date": 1491918005, "answer_id": 43347678, "question_id": 43343711, "link": "https://stackoverflow.com/questions/43343711/perl-and-shell-script-in-redhat/43347678#43347678", "title": "Perl and shell script in redhat", "body": "<p>Here's another explanation:</p>\n\n<pre><code>#!/bin/bash\n\n# enable debug\nset +xe \n\n# this is an old school way to check for an empty variable    \n# modern shells can use [[ $foo == \"\" ]] to do this\nif [ x\"$Link_A\" == \"x\" ] ; then\n\n    # a normal error message for when the variable is not set\n    echo \"Link_A parameter not set, DOESNOT execute FUNCTION\"\nelse # the variable has a value so we can use it...\n\n    # copy this file to the current directory\n    cp -f ~/cached-resources/www.github.com/file1/executables/JenkinsScripts/jenkins_feed.pl ./jenkins_feed.pl\n\n    # run the script in perl with arguments that include variable\n    # substitution and some fixed text\n    perl jenkins_feed.pl $JENKINS_HOME/feed_bts.ini $Link_A\nfi\n</code></pre>\n\n<p>I also reformatted the script so the inner parts of the conditional are indented.</p>\n\n<h1>bonus questions from comments</h1>\n\n<blockquote>\n  <ol>\n  <li>Is Link_A a file ?</li>\n  </ol>\n</blockquote>\n\n<p><code>Link-A</code> is a variable.  A variable could point to a file or directory, but it isn't clear what the variable would contain in this case.  Examining the <code>perl</code> script would be necessary to answer this definitively.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>what does feed_bts.ini means do i need to create a file like this explicitly if not present?</li>\n  </ol>\n</blockquote>\n\n<p>I'd guess the perl script is expecting a file name as its first argument.  The shell script provides this and it expects the <code>feed_bts.ini</code> file to be in the <code>$JENKINS_HOME</code> (another variable) directory.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>Do I need to keep the jenkins_feed.pl and feed_bts.ini in same directory to run the script?</li>\n  </ol>\n</blockquote>\n\n<p>The <code>jenkins_feed.pl</code> ends up in the same directory as the shell script because of the <code>cp</code>.  It starts as <code>~/cached-resources/www.github.com/file1/executables/JenkinsScripts/jenkins_feed.pl</code>.  Note that <code>~</code> would the home directory of the user the script runs as.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>from which path is the perl script executing</li>\n  </ol>\n</blockquote>\n\n<p>This would probably be using whatever the stock perl installed with your distro is.  Technically the shell will look through all of the directories in your <code>$PATH</code> until it finds it or runs out of directories.</p>\n\n<h1>perl script analysis</h1>\n\n<ul>\n<li><p>The second argument <code>$Link_A</code> has three pieces of information in it.  On <a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L17\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L17</a> this gets split into three variables: <code>$Link_A,$skey,$priority</code>. </p>\n\n<ol>\n<li>The first part of this gets stuffed back into the same-named variable which only gets used at <a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L90\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L90</a>.  That looks like it is just arbitrary text that shows up in a particular place in the description (<code>$desc</code>) which ends up in the Jenkins XML field <code>IV_DESCRIPTION</code>.</li>\n<li>The <code>$skey</code> goes into the Jenkins XML field <code>IV_EVENT_KEY</code>.  There's a default value for this just in case at <a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L129\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L129</a>. </li>\n<li>The <code>$priority</code> goes into the Jenkins XML field <code>IV_PRIORITY</code>.</li>\n</ol></li>\n<li><p>I didn't find anything convenient to define what those fields are doing.  They are part of a SOAP call to \"<code>feed_issue_CREATION</code>\".</p></li>\n<li><p>The first argument to the script looks like a config file.</p>\n\n<ol>\n<li><a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L14\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L14</a> reads the first argument from the command line.  If it is missing you go to the <code>usage</code> subroutine. </li>\n<li>Then <a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L19\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L19</a> checks to make sure it exists and it is a file.  If not go to the <code>usage</code> subroutine again.  </li>\n<li><a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L49\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L49</a> calls the <code>readopeninc</code> subroutine with the config file name as the argument.</li>\n<li><a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L287\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L287</a> defines the <code>readopeninc</code> subroutine which seems to do a few things.  It ignores lines that start with a <code>#</code> as the absolute first character.  It strips any leading and trailing white space.  Then it assumes you're got variable assignments like the shell: <code>VAR_NAME=SOME_VALUE</code></li>\n<li>After that the it seems to use the values in there as jobs that need to be updated or closed.</li>\n</ol></li>\n<li>based on <a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L115\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L115</a> it looks like the <code>$inclog</code> aka <code>feed_INC.txt</code> is in the same format somehow.</li>\n<li>based on <a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl#L80\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl#L80</a> it is looking for the files to be in the current directory.</li>\n</ul>\n"}], "owner": {"reputation": 71, "user_id": 7728666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/50d15f9ebd3de7c0c5713875f3ca5938?s=128&d=identicon&r=PG&f=1", "display_name": "Rebbeca", "link": "https://stackoverflow.com/users/7728666/rebbeca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 43347678, "answer_count": 2, "score": 1, "last_activity_date": 1496642296, "creation_date": 1491907457, "last_edit_date": 1496642296, "question_id": 43343711, "link": "https://stackoverflow.com/questions/43343711/perl-and-shell-script-in-redhat", "title": "Perl and shell script in redhat", "body": "<p>I am pretty new to Perl, Linux and shell scripts.  Can anybody let me know what exactly is this piece of script doing? I have searched through internet and couldn't find answer.</p>\n\n<pre><code>#!/bin/bash\nset +xe\n\nif [ x\"$Link_A\" == \"x\" ] ; then\necho \"Link_A parameter not set, DOESNOT execute FUNCTION\"\nelse\ncp -f ~/cached-resources/www.github.com/file1/executables/JenkinsScripts/jenkins_feed.pl ./jenkins_feed.pl\nperl jenkins_feed.pl $JENKINS_HOME/feed_config.ini $Link_A\nfi\n</code></pre>\n\n<p>Any help is appreciated.</p>\n\n<p>I added the source code in Perl and edited the shell parameter names too.\nWhat do I need to change or append or place in system path to make this Perl file run.</p>\n\n<p>Source code: <a href=\"https://github.com/rebeccaus/perl/blob/master/feed.pl\" rel=\"nofollow noreferrer\">https://github.com/rebeccaus/perl/blob/master/feed.pl</a></p>\n"}, {"tags": ["perl", "exception", "exception-handling"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491907195, "post_id": 43343470, "comment_id": 73750191, "body": "The error is in <code>decrypt.pm</code>. On line 61. We need to see what&#39;s on line 61-70 to be able to answer."}, {"owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1491907567, "post_id": 43343470, "comment_id": 73750457, "body": "I dont want to prevent error. It is ok to have error. I create error on purpose in subroutine in decrypt.pm. I just want to handle the error in run.pl where i call the subroutine."}], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "edited": false, "score": 0, "creation_date": 1491909291, "post_id": 43343981, "comment_id": 73751649, "body": "Hi Borodin,Thanks for the answer. The problem is. $ret is always defined. the sub always returns $ret with some info. If there is error, it prints the error to screen. And says no error as $ret is filled with some info."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "edited": false, "score": 0, "creation_date": 1491910452, "post_id": 43343981, "comment_id": 73752515, "body": "@ivbtar Please read: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. After you should <a href=\"https://stackoverflow.com/posts/43343981/edit\">edit</a> your question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "edited": false, "score": 0, "creation_date": 1491918301, "post_id": 43343981, "comment_id": 73758775, "body": "@ivbtar: Please at least try my solution. <code>$ret</code> will be <code>undef</code> if there was any exception."}, {"owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "edited": false, "score": 0, "creation_date": 1491921291, "post_id": 43343981, "comment_id": 73761203, "body": "my $secret2 = &quot;28EDEFHRYD73SHD84DW43DSDSDM43UYRY34&quot;; my $rett = eval {     use warnings &#39;FATAL&#39;;     decrypt::decodeIt($secret2); };  if ( defined $rett ) {     print &quot;No Error: $rett\\n&quot;; } else {     print &quot;Error in decode\\n&quot;; }"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491921571, "post_id": 43343981, "comment_id": 73761409, "body": "You can trap warnings without making them fatal by using a signal handler for warn: <code>$SIG{__WARN__} = sub {my $warning = shift; ...};</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "edited": false, "score": 0, "creation_date": 1491928838, "post_id": 43343981, "comment_id": 73766515, "body": "@ivbtar: You need to show an example that I can run to see the same symptoms. I&#39;ve tried to imagine anything that you may be doing, and all of my tests are fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491929020, "post_id": 43343981, "comment_id": 73766634, "body": "@stevieb: Yes you can, but you would want to use <code>local $SIG{__WARN__} = ...</code> within a block, and that removes all possibility of retrieving the warning message. At least, if warnings are made fatal, the message is (probably) still in <code>$@</code>.  I didn&#39;t completely buy into the OP&#39;s request to hide <i>all</i> diagnostics!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491908227, "creation_date": 1491908227, "answer_id": 43343981, "question_id": 43343470, "link": "https://stackoverflow.com/questions/43343470/error-handling-in-perl/43343981#43343981", "title": "Error handling in perl", "body": "<p>You need to use the\n<a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><em>block version</em> of <code>eval</code></a>\nto handle exceptions</p>\n\n<p>However, most of the messages you are seeing are <em>warnings</em>, which aren't trapped by <code>eval</code>, and need to be escalated to fatal errors if you want to trap them</p>\n\n<p>In this code, <code>use warnings 'FATAL'</code> will make every warning fatal for the duration of the current lexical context. The <code>eval</code> block will return <code>undef</code> if there is a fatal error, otherwise it will return the value of the <code>decrypt::decodeIt</code> call</p>\n\n<p>I'm not very happy about masking the error message altogether. All you will be told is that there was a problem, without any indication of what it was. I think you should reconsider this</p>\n\n<pre><code>my $ret = eval {\n    use warnings 'FATAL';\n    decrypt::decodeIt($secret2);\n};\n\nif ( defined $ret ) {\n    print \"No Error: $ret\\n\";\n}\nelse {\n    print \"Error in decode\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491913678, "creation_date": 1491906726, "last_edit_date": 1491913678, "question_id": 43343470, "link": "https://stackoverflow.com/questions/43343470/error-handling-in-perl", "title": "Error handling in perl", "body": "<p>I have run.pl  and decrypt.pm</p>\n\n<p>run.pl :</p>\n\n<pre><code>my $secret2 = \"test password\";\nmy $ret=decrypt::decodeIt($secret2);\nprint $ret;\n</code></pre>\n\n<p>decrypt.pm :</p>\n\n<pre><code>sub decodeIt {\n$tmp=\"\";\n.........\n.........\n.........\nreturn $tmp\n}\n</code></pre>\n\n<p>I am calling decodeIt() sub in run.pl. But something goes wrong in decodeIt sub and run.pl throws errors. I dont want to see these error exception to be printed it the screen and i want to catch the error in run.pl and do something else if there is an error like below. I tried like below but couldnt catch error.</p>\n\n<pre><code>if(!decrypt::decodeIt($secret2)){\nprint \"Error in decode\";\n} else {\nmy $ret=decrypt::decodeIt($secret2);\nprint \"No Error :\".$ret;\n}\n</code></pre>\n\n<p>Now the errors i see in screen are;</p>\n\n<pre><code>Argument \"te\" isn't numeric in int at decrypt.pm line 61.\nIllegal hexadecimal digit 's' ignored at decrypt.pm line 64.\nIllegal hexadecimal digit ' ' ignored at decrypt.pm line 64.\nIllegal hexadecimal digit 's' ignored at decrypt.pm line 64.\nIllegal hexadecimal digit 's' ignored at decrypt.pm line 64.\nIllegal hexadecimal digit 'o' ignored at decrypt.pm line 64.\nsubstr outside of string at decrypt.pm line 68.\nUse of uninitialized value $string in length at decrypt.pm line 69.\n</code></pre>\n\n<p>I don't want to see these errors on screen. I just want to understand if there is an error and do some action if there is an error.</p>\n"}, {"tags": ["perl", "sequence", "precision", "tagging"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491899304, "post_id": 43340085, "comment_id": 73744255, "body": "Is there a question here?  Maybe if you showed some code."}, {"owner": {"reputation": 43, "user_id": 5260271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6b57d3ae5dfe8aa3015147022fb84c?s=128&d=identicon&r=PG&f=1", "display_name": "hoestelan", "link": "https://stackoverflow.com/users/5260271/hoestelan"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1492133908, "post_id": 43340085, "comment_id": 73868602, "body": "There is no question in the code. I just don&#39;t know how to understand the calculation of Precision, Recall and F1 score when evaluate the B-I-O sequence tagging."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1492134314, "post_id": 43340085, "comment_id": 73868681, "body": "Maybe a link to the script?  Otherwise, there is no way to clarify the calculations for you."}, {"owner": {"reputation": 43, "user_id": 5260271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6b57d3ae5dfe8aa3015147022fb84c?s=128&d=identicon&r=PG&f=1", "display_name": "hoestelan", "link": "https://stackoverflow.com/users/5260271/hoestelan"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1492134634, "post_id": 43340085, "comment_id": 73868744, "body": "well, sorry. Here is a link. <a href=\"https://github.com/robertostling/efselab/blob/master/3rdparty/conlleval.perl\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1492137330, "post_id": 43340085, "comment_id": 73869283, "body": "Do you need to know the formulas used?  Or the motivation?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1492140550, "post_id": 43340085, "comment_id": 73869947, "body": "<a href=\"http://cogcomp.cs.illinois.edu/papers/RatinovRo09.pdf\" rel=\"nofollow noreferrer\">cogcomp.cs.illinois.edu/papers/RatinovRo09.pdf</a>"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1492140561, "post_id": 43340085, "comment_id": 73869950, "body": "<a href=\"https://en.wikipedia.org/wiki/Precision_and_recall\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Precision_and_recall</a>"}, {"owner": {"reputation": 43, "user_id": 5260271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6b57d3ae5dfe8aa3015147022fb84c?s=128&d=identicon&r=PG&f=1", "display_name": "hoestelan", "link": "https://stackoverflow.com/users/5260271/hoestelan"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1492156300, "post_id": 43340085, "comment_id": 73874273, "body": "I know the formulas used in Presicion, Recall and F1 score for classification task. But in sequence tagging task in nueral language processing like slot filling using B-I-O tags I am confused how to understand it.  I can simply explain the task: a sentence like &quot;I want to fly from Beijing to New York.&quot; can be tagged as &quot;O O O O O B_from_loc O B_to_loc I_to_loc&quot; in which &#39;O&#39; means &#39;other tag&#39; and tags begin with &#39;B&#39; and &#39;I&#39; means the beginning and inter- of a named tag like from_location or to_location respectively.  Should I regard this as a multi-classification problem?"}], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 2598777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0tXrW.gif?s=128&g=1", "display_name": "mc2", "link": "https://stackoverflow.com/users/2598777/mc2"}, "is_accepted": true, "score": 2, "last_activity_date": 1507924808, "last_edit_date": 1507924808, "creation_date": 1507890755, "answer_id": 46727875, "question_id": 43340085, "link": "https://stackoverflow.com/questions/43340085/how-to-understand-the-script-conlleval-perl-for-evaluating-tagging/46727875#46727875", "title": "How to understand the script conlleval.perl for evaluating tagging?", "body": "<p>There is a simple definition in a book <em>Spoken Language Understanding: Systems for Extracting Semantic Information from Speech</em> (by Gokhan Tur, Renato De Mori), <a href=\"https://books.google.pl/books?id=RDLyT2FythgC&amp;lpg=RA1-PT35&amp;dq=precision%20and%20recall%20for%20slot%20detection&amp;hl=pl&amp;pg=RA1-PT36#v=onepage&amp;q=precision%20and%20recall%20for%20slot%20detection&amp;f=false\" rel=\"nofollow noreferrer\">chapter 3.1.5 Evaluation metrics</a>:</p>\n\n<p><em>Precision = # of reference slots correctly detected by SLU / # of total slots detected by SLU</em></p>\n\n<p><em>Recall = # of reference slots correctly detected by SLU / # of total reference slots</em></p>\n\n<p><em>F1 = 2 x Precision x Recall / (Precision + Recall)</em></p>\n\n<p>Note: for overall metrics <em>conlleval</em> uses <a href=\"https://datascience.stackexchange.com/a/16001/20395\">micro averaging</a>.</p>\n"}], "owner": {"reputation": 43, "user_id": 5260271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6b57d3ae5dfe8aa3015147022fb84c?s=128&d=identicon&r=PG&f=1", "display_name": "hoestelan", "link": "https://stackoverflow.com/users/5260271/hoestelan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1384, "favorite_count": 0, "accepted_answer_id": 46727875, "answer_count": 1, "score": 2, "last_activity_date": 1507924808, "creation_date": 1491897787, "question_id": 43340085, "link": "https://stackoverflow.com/questions/43340085/how-to-understand-the-script-conlleval-perl-for-evaluating-tagging", "title": "How to understand the script conlleval.perl for evaluating tagging?", "body": "<p>I always don't know how to evaluate a task for tagging including POS tagging or any other sequence tagging. I especially don't know how to calculate the Precision, Recall and F1 score of those tasks. \nI then found there is a script named conlleval.perl and we can directly use it for evaluating. But I don't know perl language and I still confused how P, R, F1 calculated in tagging tasks.\nIs there anyone can tell me?</p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 8781, "user_id": 90647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d5fc891ba21e96e1eef1dba9c7b6bf?s=128&d=identicon&r=PG", "display_name": "Tony Miller", "link": "https://stackoverflow.com/users/90647/tony-miller"}, "edited": false, "score": 0, "creation_date": 1492029892, "post_id": 43339834, "comment_id": 73820790, "body": "Which version of Windows?  What version of Perl?  Is it a distribution like ActiveState or Strawberry?"}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 8781, "user_id": 90647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d5fc891ba21e96e1eef1dba9c7b6bf?s=128&d=identicon&r=PG", "display_name": "Tony Miller", "link": "https://stackoverflow.com/users/90647/tony-miller"}, "edited": false, "score": 0, "creation_date": 1492062709, "post_id": 43339834, "comment_id": 73830507, "body": "Windows 7. Perl 5.22, Active Perl"}, {"owner": {"reputation": 8781, "user_id": 90647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d5fc891ba21e96e1eef1dba9c7b6bf?s=128&d=identicon&r=PG", "display_name": "Tony Miller", "link": "https://stackoverflow.com/users/90647/tony-miller"}, "edited": false, "score": 0, "creation_date": 1492091738, "post_id": 43339834, "comment_id": 73849411, "body": "The ActivState link for the Net::SSH::Perl module doesn&#39;t look good: <a href=\"http://code.activestate.com/ppm/Net-SSH-Perl/\" rel=\"nofollow noreferrer\">code.activestate.com/ppm/Net-SSH-Perl</a> but what happens if you do ppm install Net-SSH-Perl"}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 8781, "user_id": 90647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d5fc891ba21e96e1eef1dba9c7b6bf?s=128&d=identicon&r=PG", "display_name": "Tony Miller", "link": "https://stackoverflow.com/users/90647/tony-miller"}, "edited": false, "score": 0, "creation_date": 1492112363, "post_id": 43339834, "comment_id": 73861477, "body": "D:\\Users\\sujpadhi\\Desktop\\Scripts&gt;ppm install Net::SSH::Perl Downloading ActiveState Package Repository dbimage...done Syncing site PPM database with .packlists...done Syncing perl PPM database with .packlists...done No missing packages to install"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491897048, "creation_date": 1491897048, "question_id": 43339834, "link": "https://stackoverflow.com/questions/43339834/unable-to-install-netsshperl-module-on-windows-64-bit", "title": "Unable to Install Net::SSH::Perl module on Windows 64 bit", "body": "<p>I am trying to install Net::SSH::Perl module on Windows using CPAN, but it is failing with a windows prompt saying \"ar.exe has stopped working\".\nAttached screenshot.\nCan somebody please help.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HT4oi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HT4oi.jpg\" alt=\"Error Installing Net SSH Perl on windows\"></a></p>\n"}, {"tags": ["perl", "ssh"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491892210, "post_id": 43337975, "comment_id": 73739903, "body": "<a href=\"http://stackoverflow.com/questions/3689945/how-do-we-configure-ssh-using-perl-in-windows\" title=\"how do we configure ssh using perl in windows\">stackoverflow.com/questions/3689945/&hellip;</a>"}, {"owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491892755, "post_id": 43337975, "comment_id": 73740169, "body": "if Net::SSH::Any uses backend Net::SSH2, then why does it need cygwin ?"}], "owner": {"reputation": 192, "user_id": 1315772, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bd685e3c972c501e2795493a6691c492?s=128&d=identicon&r=PG", "display_name": "Sujeet Padhi", "link": "https://stackoverflow.com/users/1315772/sujeet-padhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1491890956, "creation_date": 1491890956, "question_id": 43337975, "link": "https://stackoverflow.com/questions/43337975/unable-to-connect-to-linux-host-from-windows-server-using-netsshany-perl-mod", "title": "Unable to connect to Linux host from Windows server using Net::SSH::Any Perl module", "body": "<p>I am trying to connect to a linux host from a Windows server with SSH using Net::SSH::Any Perl module, but Getting the below error.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>use Net::SSH::Any;\n\nmy $ssh = Net::SSH::Any-&gt;new('xx.xxx.xxx.xx', user =&gt; 'xxx', password =&gt; 'xxxx');\n\nmy @out = $ssh-&gt;capture('ls');\n\nprint @out;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>C:\\Users\\spectrum\\Desktop&gt;perl SSH_Any.pl\nPTYs are not supported on Windows at SSH_Any.pl line 5.\n</code></pre>\n\n<p>Can somebody please help.</p>\n"}, {"tags": ["arrays", "perl", "reference", "subroutine"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1491895157, "post_id": 43334282, "comment_id": 73741526, "body": "<code>my @ =</code> is a syntax error."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491917109, "post_id": 43334282, "comment_id": 73757735, "body": "The fact that you have included the syntax error <code>my @ =</code> indicates that you haven&#39;t pasted in the actual code that you have tested. That means that we can&#39;t trust anything else in your question. It looks like the problem is the confusion between <code>@array</code> and <code>$array</code> - but that could just be a typo. It&#39;s disrespectful to ask us to debug code that you haven&#39;t even run."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1491917331, "post_id": 43334282, "comment_id": 73757929, "body": "On further investigation, I notice that this code also fails to run because you have <code>use strict</code> but you don&#39;t declare <code>@array</code>. So running this program will die with a fatal error. At this point it seems that you don&#39;t really care about getting a solution to this problem, and I&#39;m moving on to help someone else."}, {"owner": {"reputation": 5, "user_id": 6840493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae5fa0244f9088897fceb15cdd596c2?s=128&d=identicon&r=PG&f=1", "display_name": "DragonRapide", "link": "https://stackoverflow.com/users/6840493/dragonrapide"}, "edited": false, "score": 0, "creation_date": 1491920962, "post_id": 43334282, "comment_id": 73760923, "body": "sorry for that Dave, just a typo. Running the code on a VM without GUI so could copy past it."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6840493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae5fa0244f9088897fceb15cdd596c2?s=128&d=identicon&r=PG&f=1", "display_name": "DragonRapide", "link": "https://stackoverflow.com/users/6840493/dragonrapide"}, "edited": false, "score": 0, "creation_date": 1491921005, "post_id": 43334506, "comment_id": 73760957, "body": "Iam not sure if I understood everything correctly. I posted a new try under the first one."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 1, "last_activity_date": 1491867556, "creation_date": 1491867556, "answer_id": 43334506, "question_id": 43334282, "link": "https://stackoverflow.com/questions/43334282/returning-arrays-from-subroutines-in-perl-and-using-them-in-another-subroutin/43334506#43334506", "title": "returning arrays from subroutines in perl and using them in another subroutin", "body": "<p><code>@array</code> is a completely different variable from <code>$array</code>.  To dereference <code>$array</code>, use <code>@$array</code> (see <a href=\"http://perlmonks.org/?node=References+quick+reference\" rel=\"nofollow noreferrer\">http://perlmonks.org/?node=References+quick+reference</a>).</p>\n\n<p>And it would be more efficient to just pass the reference to test2, so:</p>\n\n<pre><code>test2($array);\nsub test2 {\n    my ($array1) = @_;\n    foreach $values (@$array1) {\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6840493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae5fa0244f9088897fceb15cdd596c2?s=128&d=identicon&r=PG&f=1", "display_name": "DragonRapide", "link": "https://stackoverflow.com/users/6840493/dragonrapide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491921230, "creation_date": 1491865907, "last_edit_date": 1491921230, "question_id": 43334282, "link": "https://stackoverflow.com/questions/43334282/returning-arrays-from-subroutines-in-perl-and-using-them-in-another-subroutin", "title": "returning arrays from subroutines in perl and using them in another subroutin", "body": "<p>Hi I\u00b4am trying to learn Perl. I have a problem with creating an array and using references to use it in another subroutine.</p>\n\n<p>Sample code:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nsub test {\n\n  my @a = (\"a\",\"b\",\"c\");\n\n  return \\@a;\n}\n\n# code just for test, the reference would just be used in next subroutine\nmy $array = test();\nmy @arr   = @array;\n\nprint \"@arr\\n\"; # just for test\n\ntest2(@arr);\n\nsub test2 {\n\n  my @array1 = @_;\n\n  foreach $values (@array1) {\n    # do things\n  }\n}\n</code></pre>\n\n<p>The point is to use the array from the 1st sub in the second one.</p>\n\n<p>----------------- V2 -------------------------</p>\n\n<pre><code>#!/usr/bin/perl\n\n    use strict;\n    use warnings;\n    test();\n    sub test {\n\n      my @a = (\"a\",\"b\",\"c\");\n\n      return \\@a;\n    }\n\n    print \"\\@a\\n\";\n\n    test2(\\@a);\n\n    sub test2 { (my $array1) = @_;\n      foreach my $values (@array1) {\n        print \"$values\\n\";\n      }\n    }\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl", "sed"], "comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1491863003, "post_id": 43333757, "comment_id": 73731757, "body": "For a single variable with that content? A file with many lines like this one?"}, {"owner": {"reputation": 11, "user_id": 3044148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3R4RJ.png?s=128&g=1", "display_name": "tvo000", "link": "https://stackoverflow.com/users/3044148/tvo000"}, "reply_to_user": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 0, "creation_date": 1491866407, "post_id": 43333757, "comment_id": 73732809, "body": "@Benjamin W.    It&#39;s for the output of the find command:  find . -mindepth 2 -type d ! -path . ! -path ./foo"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491896615, "post_id": 43333757, "comment_id": 73742420, "body": "Even when will not talk about the missing piece of <b>your</b> code, the problem description is vague too. What should happen when the path will be one of the following?: <code>&#47;</code> or  <code>.</code> or  <code>..</code> or <code>.&#47;..</code> and like? Or? <code>.&#47;qoo&#47;qxx&#47;..&#47;..&#47;..&#47;some&#47;exotic&#47;beauty&#47;..&#47;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1491865756, "post_id": 43334015, "comment_id": 73732623, "body": "Nothing beats good old <i>parameter expansion with substring removal</i>, good job."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1491896139, "post_id": 43334015, "comment_id": 73742143, "body": "@DavidC.Rankin With the addition: <i>mostly</i>. :) This answer is nice and concise for the <i>most</i> cases. Examples when will not DWIM: <code>&#47;foo&#47;bar&#47;</code> , <code>&#47;foo&#47;bar&#47;&#47;</code> (e.g. trailing slash(es)) and corner cases like <code>..</code> (aka parent directory, or <code>.&#47;..</code> or <code>.&#47;..&#47;</code> and such exotic <i>(but valid)</i> paths.) So, yes - nice answer - but the: <i>nothing beats</i>.. isn&#39;t fully true. ;)"}], "tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1491864154, "creation_date": 1491864154, "answer_id": 43334015, "question_id": 43333757, "link": "https://stackoverflow.com/questions/43333757/how-to-extract-base-name-and-append-it-to-path/43334015#43334015", "title": "How to extract base name and append it to path", "body": "<p>For the general case of \"how do I append <code>/name</code> to <code>/path/to/name</code>\", you can use parameter expansion:</p>\n\n<pre><code>$ var='./foo/bar'\n$ echo \"$var/${var##*/}\"\n./foo/bar/bar\n</code></pre>\n\n<p><code>${var##*/}</code> expands to the value of <code>$var</code> with the longest possible match of <code>*/</code> (anything ending with a slash) removed from its beginning.</p>\n\n<p>If you have a file with one of these entries per line, you could do something like this with sed:</p>\n\n<pre><code>$ cat infile\n./foo/bar\n./foo/bar/baz\n./path/to/file\n$ sed 's/\\([^/]*\\)$/\\1\\/\\1/' infile\n./foo/bar/bar\n./foo/bar/baz/baz\n./path/to/file/file\n</code></pre>\n\n<p>This captures everything after the last <code>/</code> on each line and appends a slash and the captured sequence to the end of the line.</p>\n"}], "owner": {"reputation": 11, "user_id": 3044148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3R4RJ.png?s=128&g=1", "display_name": "tvo000", "link": "https://stackoverflow.com/users/3044148/tvo000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 43334015, "answer_count": 1, "score": -1, "last_activity_date": 1491864188, "creation_date": 1491862616, "last_edit_date": 1491864188, "question_id": 43333757, "link": "https://stackoverflow.com/questions/43333757/how-to-extract-base-name-and-append-it-to-path", "title": "How to extract base name and append it to path", "body": "<p>Basically, I want to transform <code>./foo/bar</code> to <code>./foo/bar/bar</code>.  I initially tried sed but the regex I came up with uses lookaround (<code>(?&lt;=s\\/)(.*)</code>) or the <code>\\K</code> escape sequence (<code>.*\\/\\K.*</code>), which sed does not support.  </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 6, "creation_date": 1491862586, "post_id": 43333482, "comment_id": 73731637, "body": "Remove space after <code>&lt;&lt;</code>."}, {"owner": {"reputation": 982, "user_id": 1602022, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e36f31b1645542323074d1ffc1bfbfc5?s=128&d=identicon&r=PG", "display_name": "theillien", "link": "https://stackoverflow.com/users/1602022/theillien"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1491863437, "post_id": 43333482, "comment_id": 73731895, "body": "Thanks! Please make that the answer so I can select it."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1491869870, "post_id": 43333482, "comment_id": 73733693, "body": "With the space, it is a shift operation <a href=\"http://perldoc.perl.org/perlop.html#Shift-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Shift-Operators</a> so Perl is interpreting your HTML as Perl code"}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": true, "score": 1, "last_activity_date": 1491890728, "last_edit_date": 1491890728, "creation_date": 1491890235, "answer_id": 43337795, "question_id": 43333482, "link": "https://stackoverflow.com/questions/43333482/creating-html-file-via-heredoc-in-perl-fails-with-bareword-error/43337795#43337795", "title": "Creating HTML file via heredoc in Perl fails with Bareword error", "body": "<p>Remove the space infront of the <code>&lt;&lt; \"EOF\";</code> as it is not interacting nicely with the filehandle print.</p>\n\n<p>Here are various working/non-working variants:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy $foo = &lt;&lt; \"EOF\";\nOK: with space into a variable\nEOF\n\nprint $foo;\n\nprint &lt;&lt;\"EOF\";\nOK: without space into a regular print\nEOF\n\nprint &lt;&lt; \"EOF\";\nOK: with space into a regular print\nEOF\n\nopen my $fh, \"&gt;foo\" or die \"Unable to open foo : $!\";\nprint $fh &lt;&lt;\"EOF\";\nOK: without space into a filehandle print\nEOF\n\n# Show file output\nclose $fh;\nprint `cat foo`;\n\n# This croaks\neval ' \nprint $fh &lt;&lt; \"EOF\";\nwith space into a filehandle print\nEOF\n';\nif ($@) {\n    print \"FAIL: with space into a filehandle print\\n\"\n}\n\n# Throws a bitshift warning:\nprint \"FAIL: space and filehandle means bitshift!\\n\";\nprint $fh &lt;&lt; \"EOF\";\nprint \"\\n\";\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>OK: with space into a variable\nOK: without space into a regular print\nOK: with space into a regular print\nOK: without space into a filehandle print\nFAIL: with space into a filehandle print\nFAIL: space and filehandle means bitshift!\nArgument \"EOF\" isn't numeric in left bitshift (&lt;&lt;) at foo.pl line 42.\n152549948\n</code></pre>\n"}], "owner": {"reputation": 982, "user_id": 1602022, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/e36f31b1645542323074d1ffc1bfbfc5?s=128&d=identicon&r=PG", "display_name": "theillien", "link": "https://stackoverflow.com/users/1602022/theillien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 43337795, "answer_count": 1, "score": 3, "last_activity_date": 1491890728, "creation_date": 1491861226, "last_edit_date": 1491863388, "question_id": 43333482, "link": "https://stackoverflow.com/questions/43333482/creating-html-file-via-heredoc-in-perl-fails-with-bareword-error", "title": "Creating HTML file via heredoc in Perl fails with Bareword error", "body": "<p>I'm trying to figure out how to create a simple HTML file using a heredoc in Perl but I keep getting </p>\n\n<pre><code>Bareword found where operator expected at pscratch.pl line 12, near \"&lt;title&gt;Test\"\n    (Missing operator before Test?)\nHaving no space between pattern and following word is deprecated at pscratch.pl line 13.\nsyntax error at pscratch.pl line 11, near \"head&gt;\"\nExecution of pscratch.pl aborted due to compilation errors.\n</code></pre>\n\n<p>I can't figure out what the issue is. This is the script in its entirety:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $fh;\nmy $file = \"/home/msadmin1/bin/testing/html.test\";\n\nopen($fh, '&gt;', $file) or die \"Cannot open $file: \\n $!\";\n\nprint $fh &lt;&lt; \"EOF\";\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Test&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;This is a test&lt;/h1&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEOF\n\nclose($fh);\n</code></pre>\n\n<p>I've tried using both single and double quotes around <code>EOF</code>. I've also tried escaping all of the <code>&lt;&gt;</code> tags which didn't help.</p>\n\n<p>What should I be doing to prevent this error?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I know there are modules out there that will simplify this, but I'd like to know what the problem is with this before I simplify the task with a module.</p>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>The error seems to indicate that Perl is looking at the text within the heredoc as a substitution due to the <code>/</code> in the closing tags. If I escape them part of the error goes away regarding <code>space between pattern and following word</code> but the rest of the error remains.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1491854710, "post_id": 43331950, "comment_id": 73728230, "body": "This works well thanks! I figured there would be a way to this without grep but this is probably the simplest solution I could find"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1491856109, "last_edit_date": 1491856109, "creation_date": 1491854608, "answer_id": 43332045, "question_id": 43331950, "link": "https://stackoverflow.com/questions/43331950/if-statement-with-multiple-conditions-in-perl/43332045#43332045", "title": "If statement with multiple conditions in perl", "body": "<p>It's possible with regular expression alternation.</p>\n\n<pre><code>if ($string_as_array[$i] =~ /^(?:Ham|bur)$/) {\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1491861175, "post_id": 43332063, "comment_id": 73731210, "body": "I&#39;d use <code>List::Util::any { $string_as_array[$1] eq $_ } qw(Ham bur)</code> instead if only to get the short-circuiting. However, hashes are probably better in this particular case."}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 1, "creation_date": 1491915494, "post_id": 43332063, "comment_id": 73756319, "body": "Not sure why this was downvoted, seems perfectly reasonable"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1491915537, "post_id": 43332063, "comment_id": 73756368, "body": "@Tanktalus definitely agree, the short circuiting would be nice"}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 1, "last_activity_date": 1491854675, "creation_date": 1491854675, "answer_id": 43332063, "question_id": 43331950, "link": "https://stackoverflow.com/questions/43331950/if-statement-with-multiple-conditions-in-perl/43332063#43332063", "title": "If statement with multiple conditions in perl", "body": "<p><code>||</code>, <code>&amp;&amp;</code>, <code>or</code>, and <code>and</code> are all binary operators, meaning they require two operands. Instead you can use <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\"><code>grep</code></a> which accepts a list of things and filters them by some predicate expression:</p>\n\n<pre><code>if ( grep { $string_as_array[$i] eq $_ } qw(Ham bur) ) {\n   ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 0, "creation_date": 1491856878, "post_id": 43332124, "comment_id": 73729338, "body": "If I have multiple keys pointing to the same value <code>&#39;Ham&#39;</code> and <code>&#39;bur&#39;</code> for instance in this case is there a way to combine them on the same line? I am curious because I have 30-40 3 letter keys pointing to the same value."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 0, "creation_date": 1491858213, "post_id": 43332124, "comment_id": 73729967, "body": "Replace <code>&#39;Ham&#39; =&gt; &#39;CHEESE&#39;, &#39;bur&#39; =&gt; &#39;CHEESE&#39;</code> with <code>( map { $_ =&gt; &#39;CHEESE&#39; } qw( Ham bur ) )</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1491856301, "last_edit_date": 1491856301, "creation_date": 1491854933, "answer_id": 43332124, "question_id": 43331950, "link": "https://stackoverflow.com/questions/43331950/if-statement-with-multiple-conditions-in-perl/43332124#43332124", "title": "If statement with multiple conditions in perl", "body": "<pre><code>my %map = (\n   'Ham' =&gt; 'CHEESE',\n   'bur' =&gt; 'CHEESE',\n   'ger' =&gt; 'WICH',\n);\n\nsay $string =~ s{(...)}{ $map{$1} // $1 }serg;\n</code></pre>\n\n<hr>\n\n<p>Other things are much more badly in need simplifying! </p>\n\n<p>The symbol soup</p>\n\n<pre><code>my $x=(scalar @string_as_array);\nfor (my $i=0; $i&lt;$x; $i++) \n</code></pre>\n\n<p>simplifies to</p>\n\n<pre><code>for (my $i=0; $i&lt;@string_as_array; $i++) \n</code></pre>\n\n<p>which simplifies to</p>\n\n<pre><code>for my $i (0 .. $#string_as_array)\n</code></pre>\n\n<p>But you don't actually need the index (just the elements), so replace that with</p>\n\n<pre><code>for my $part (@string_as_array)\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>for my $part ( $string =~ /.../sg )\n</code></pre>\n\n<p>That already gives us something cleaner:</p>\n\n<pre><code>for my $part ( $string =~ /.../sg ) {\n    if ($part eq \"Ham\" || $part eq \"bur\") {\n        print \"CHEESE\";\n    }\n    elsif ($part eq \"ger\")   {\n        print \"WICH\";\n    }\n    else {\n        print $part;\n    }\n}\n</code></pre>\n\n<p>That said, what we now have begs for a hash lookup.</p>\n\n<pre><code>my %map = (\n   'Ham' =&gt; 'CHEESE',\n   'bur' =&gt; 'CHEESE',\n   'ger' =&gt; 'WICH',\n);\n\nfor my $part ( $string =~ /.../sg ) {\n    print $map{$part} // $part;\n}\n\nprint(\"\\n\");\n</code></pre>\n\n<p><code>$part</code> is quite meaningless, so might as well save memory by switching to a while loop using <code>$1</code>.</p>\n\n<pre><code>while ( $string =~ /(...)/sg ) {\n    print $map{$1} // $1;\n}\n\nprint(\"\\n\");\n</code></pre>\n\n<p>A final transform:</p>\n\n<pre><code>say $string =~ s{(...)}{ $map{$1} // $1 }serg;\n</code></pre>\n"}], "owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6688, "favorite_count": 1, "accepted_answer_id": 43332124, "answer_count": 3, "score": 3, "last_activity_date": 1491856301, "creation_date": 1491854257, "question_id": 43331950, "link": "https://stackoverflow.com/questions/43331950/if-statement-with-multiple-conditions-in-perl", "title": "If statement with multiple conditions in perl", "body": "<p>I'm trying to construct an <code>if</code> statement with multiple conditions without being too verbose. Currently I have: </p>\n\n<pre><code>my $string = \"Hamburger\";\nmy @string_as_array = ( $string =~ m/.../g );\nmy $x=(scalar @string_as_array);\nfor(my $i=0; $i&lt;$x; $i++)   {\n    if ($string_as_array[$i] eq \"Ham\" || $string_as_array[$i] eq \"bur\") {\n        print \"CHEESE\";\n    }\n    elsif ($string_as_array[$i] eq \"ger\")   {\n        print \"WICH\";\n    }\n    else {\n        print $string_as_array[$i];\n    }\n}\nprint \"\\n\";\n</code></pre>\n\n<p>Ideally I'd like something like this for the first <code>if</code> statement if it is possible:</p>\n\n<pre><code>my $string = \"Hamburger\";\nmy @string_as_array = ( $string =~ m/.../g );\nmy $x=(scalar @string_as_array);\nfor(my $i=0; $i&lt;$x; $i++)   {\n    if ($string_as_array[$i] eq \"Ham\" || \"bur\") {\n        print \"CHEESE\";\n    }\n    elsif ($string_as_array[$i] eq \"ger\")   {\n        print \"WICH\";\n    }\n    else {\n        print $string_as_array[$i];\n    }\n}\nprint \"\\n\";\n</code></pre>\n\n<p>If it's possible. </p>\n"}, {"tags": ["perl", "optimization"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1491850008, "post_id": 43330638, "comment_id": 73725652, "body": "Does it matter which item among duplicates you take?"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1491850085, "post_id": 43330638, "comment_id": 73725701, "body": "Sorting the file seems unneeded here since you have to scan the entire file anyway, you can just choose to take the first or last item among a set of duplicates."}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1491850133, "post_id": 43330638, "comment_id": 73725729, "body": "No, at this point I want to avoid all the duplicates. In the previous example I don&#39;t want to keep neither of the lines that includes chr1.1.6.490869.491234"}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1491914731, "post_id": 43331456, "comment_id": 73755665, "body": "I just applied to my pipeline and it seems that it works fine. Some more tests to do and let you know. Thank you very much."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1492101586, "last_edit_date": 1492101586, "creation_date": 1491852388, "answer_id": 43331456, "question_id": 43330638, "link": "https://stackoverflow.com/questions/43330638/how-can-i-optimise-the-search-of-unique-lines/43331456#43331456", "title": "How can I optimise the search of unique lines?", "body": "<p>Given that you do not want to print lines that have duplicates at all, you need to see the whole file before any printing, to first find those lines with duplicates.  Then go back and print others.</p>\n\n<p>This can be done by keeping the whole file in memory along with ancillary data structures, or by making two passes.  Since the file is \"<em>very big</em>\" here is a less memory-straining way</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $file = 'skip.txt';\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy (%seen, %dupe);\nwhile (&lt;$fh&gt;) \n{\n    my $patt = (split)[3]; \n\n    # Record line numbers if the 4th field has been seen\n    if (exists $seen{$patt}) {\n        $dupe{ $seen{$patt} }++;   # num of line with it seen first, with count\n        $dupe{$.} = 1;             # this line's number as well\n    } \n    else { $seen{$patt} = $. }     # first time this 4th field is seen\n}\n\n# Now we know all lines which carry duplicate fourth field\nmy $outfile = 'filtered_' . $file;\nopen my $fh_out, '&gt;', $outfile  or die \"Can't open $outfile: $!\";\n\nseek $fh, 0, 0;   # rewind to the beginning\n$. = 0;           # seek doesn't reset $.\nwhile (&lt;$fh&gt;) {\n    print $fh_out $_  if not exists $dupe{$.}\n}\nclose $fh_out;\n</code></pre>\n\n<p>The first time a duplicate is found its original line also need be recorded, <code>$dupe{$seen{$patt}}++</code>, in that branch.  This need be done only once, and while we can check (whether it's already been recorded) we may well pick up a potentially useful duplicates' count instead.</p>\n\n<p>I've added a few more duplicates (some more than twice) to your posted sample and this produces the correct output.</p>\n\n<hr>\n\n<p><em>Comment on the posted code</em></p>\n\n<p>The posted code checks the fourth field on each line against the whole file, thus processing the file as many times as there are lines. That is a lot of work and it has to take time, specially for big files.</p>\n\n<p>Also, there is no reason to use external programs for that job.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1491859939, "post_id": 43331548, "comment_id": 73730716, "body": "No idea. . . . ."}, {"owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "edited": false, "score": 0, "creation_date": 1491914799, "post_id": 43331548, "comment_id": 73755716, "body": "I will try to translate it in a full script cause it will fit better in my pipe. Thank you."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": false, "score": 1, "last_activity_date": 1491854089, "last_edit_date": 1491854089, "creation_date": 1491852675, "answer_id": 43331548, "question_id": 43330638, "link": "https://stackoverflow.com/questions/43330638/how-can-i-optimise-the-search-of-unique-lines/43331548#43331548", "title": "How can I optimise the search of unique lines?", "body": "<p>As oneliner:</p>\n\n<pre><code>perl -F\"\\t\" -lanE 'push @l,[@F];$s{$F[3]}++}{say join\"\\t\",@$_ for grep{$s{$_-&gt;[3]}==1}@l' &lt;&lt;EOF \nscaffold1443    182629  182998  chr1.1.1.241051.241420  367 99.80\nscaffold1443    131948  132412  chr1.1.2.291778.292242  462 99.80\nscaffold1443    96142   96474   chr1.1.3.327471.327803  330 99.70\nscaffold1443    53153   53479   chr1.1.4.370342.370668  322 99.40\nscaffold526 2870014 2870523 chr1.1.5.488372.488881  507 99.90\nscaffold526 2865956 2866314 chr1.1.6.490869.491234  357 98.10\nscaffold526 2867666 2868024 chr1.1.6.490869.491234  357 98.10\nscaffold526 2485557 2485867 chr1.1.7.610677.610987  310 100.00\nEOF\n</code></pre>\n\n<p>output</p>\n\n<pre><code>scaffold1443    182629  182998  chr1.1.1.241051.241420  367 99.80\nscaffold1443    131948  132412  chr1.1.2.291778.292242  462 99.80\nscaffold1443    96142   96474   chr1.1.3.327471.327803  330 99.70\nscaffold1443    53153   53479   chr1.1.4.370342.370668  322 99.40\nscaffold526 2870014 2870523 chr1.1.5.488372.488881  507 99.90\nscaffold526 2485557 2485867 chr1.1.7.610677.610987  310 100.00\n</code></pre>\n\n<p>more readable:</p>\n\n<pre><code>perl -F\"\\t\" -lanE '\n    push @lines, [ @F ]; $seen{ $F[3] }++;\n    END {\n        say join(\"\\t\",@$_) for grep { $seen{ $_-&gt;[3] } == 1 } @lines\n    }\n'\n</code></pre>\n\n<p>You can translate it to full script if want, I created this as oneliner because you said: <em>it is a part of a larger pipeline</em>.</p>\n\n<p>Also note, the above reads the whole file into the memory first - so very the big files could cause problems.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1491858465, "last_edit_date": 1491858465, "creation_date": 1491857156, "answer_id": 43332615, "question_id": 43330638, "link": "https://stackoverflow.com/questions/43330638/how-can-i-optimise-the-search-of-unique-lines/43332615#43332615", "title": "How can I optimise the search of unique lines?", "body": "<p>The simple approach involves using an associative array to identify duplicates.</p>\n\n<pre><code>perl -F'\\t' -lane'\n   push @{ $h{ $F[3] } }, $_;\n   END {\n      for (values(%h)) {\n          print(@$_) if @$_ == 1;\n      }\n   }\n' file.tsv\n</code></pre>\n\n<p>The above approach requires as much memory as the file is large. That's a no-go if you files are truly large.</p>\n\n<hr>\n\n<p>If you have truly large files, the simple approach is to sort the file using the <code>sort</code> command line utility (which is rather fast, and can handle arbitrarily large files). By first rearranging the file such that duplicates are next to each other, we can easily filtered out the duplicates without worrying about memory issues.</p>\n\n<pre><code>sort -t$'\\t' -k 4,4 file.tsv | perl -F'\\t' -lane'\n   if ($key ne $F[3]) {\n      print(@buf) if @buf == 1;\n      @buf = ();\n   }\n\n   $key = $F[3];\n   push @buf, $_;\n\n   END { print(@buf) if @buf == 1; }\n'\n</code></pre>\n\n<hr>\n\n<p>If you have truly large files, another relatively simple approach is to load the data in a database (e.g. an sqlite3 database). You could easily maintain the original order with this approach.</p>\n"}], "owner": {"reputation": 175, "user_id": 2547263, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/326f46aef048b49d22957599ad3ce405?s=128&d=identicon&r=PG", "display_name": "Vasilis", "link": "https://stackoverflow.com/users/2547263/vasilis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 43331456, "answer_count": 3, "score": 2, "last_activity_date": 1492101586, "creation_date": 1491849684, "question_id": 43330638, "link": "https://stackoverflow.com/questions/43330638/how-can-i-optimise-the-search-of-unique-lines", "title": "How can I optimise the search of unique lines?", "body": "<p>I have large tab separated files like the following example:</p>\n\n<pre><code>scaffold1443    182629  182998  chr1.1.1.241051.241420  367     99.80\nscaffold1443    131948  132412  chr1.1.2.291778.292242  462     99.80\nscaffold1443    96142   96474   chr1.1.3.327471.327803  330     99.70\nscaffold1443    53153   53479   chr1.1.4.370342.370668  322     99.40\nscaffold526     2870014 2870523 chr1.1.5.488372.488881  507     99.90\nscaffold526     2865956 2866314 chr1.1.6.490869.491234  357     98.10\nscaffold526     2867666 2868024 chr1.1.6.490869.491234  357     98.10\nscaffold526     2485557 2485867 chr1.1.7.610677.610987  310     100.00\n</code></pre>\n\n<p>I want to print in a new file only the lines that the 4th column is unique.\nIn the previous example, all the lines should be printed except the 2 lines that have the \"chr1.1.6.490869.491234\" in the 4th column.</p>\n\n<p>The following script that I wrote (it is a part of a larger pipeline) does the job but it is extremely slow, especially when the input file is very big. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n#This script takes the best hits output and finds the unique elements that up to only one scaffold.\n\nmy $target = $ARGV[0];\nmy $chromosome = $ARGV[1];\nmy @mykeys = `cat OUTPUT_$target/psl_score_byname_$target/$chromosome.table| awk '{print \\$4}'| sort -u`;\n\nforeach (@mykeys)\n{\n    my $key = $_;\n    chomp($key);\n    my $command = \"cat   OUTPUT_$target/psl_score_byname_$target/$chromosome.table|grep -w $key\";\n    my @belongs= `$command`;\n    chomp(@belongs);\n    my $count = scalar(@belongs);\n    if ($count == 1)\n    {\n            open FILE, \"&gt;&gt;OUTPUT_$target/unique_hces_$target/$chromosome.txt\" or die $!;\n            print FILE \"@belongs\\n\";\n\n            @belongs = ();\n    }\n    else {\n\n            @belongs = ();\n    }\n}\n</code></pre>\n\n<p>Is there any smarter and faster way to do it?\nThank you very much in advance.</p>\n"}, {"tags": ["sql", "database", "perl", "odbc", "mojolicious"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491852957, "post_id": 43330532, "comment_id": 73727305, "body": "Do you have <code>Schema.pm</code> in <code>...\\moblo\\lib\\Moblo\\Moblo</code>? Otherwise your <code>use</code> won&#39;t find it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491852980, "post_id": 43330532, "comment_id": 73727320, "body": "What database engine would you prefer?"}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491853670, "post_id": 43330532, "comment_id": 73727686, "body": "@Borodin Yes I do have a Schema.pm but it is in <code>\\moblo\\lib\\Moblo</code> and I would rather a regular SQL ODBC connection."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491853766, "post_id": 43330532, "comment_id": 73727734, "body": "Then you need <code>use lib &#39;C:\\Users\\gflynn\\Desktop\\WorkingCopies\\MojoliciousAPP\\Mojoli&zwnj;&#8203;cious\\moblo\\lib&#39;</code> instead"}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "edited": false, "score": 0, "creation_date": 1491853431, "post_id": 43331683, "comment_id": 73727562, "body": "I guess I was a little un-clear in my question. Do I still need to define my table (as above) if I have an existing Database? Thank you for the information."}, {"owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "edited": false, "score": 0, "creation_date": 1491854221, "post_id": 43331683, "comment_id": 73727972, "body": "Thank you for the information! This will get me going again."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1491853876, "last_edit_date": 1491853876, "creation_date": 1491853226, "answer_id": 43331683, "question_id": 43330532, "link": "https://stackoverflow.com/questions/43330532/mojolicious-resultset-from-existing-database/43331683#43331683", "title": "Mojolicious: ResultSet from existing Database", "body": "<p>You simply have to modify</p>\n\n<pre><code>Moblo::Schema-&gt;connect('dbi:SQLite:moblo.db')\n</code></pre>\n\n<p>to an appropriate DSN (and username and password) for the database engine that you want to use</p>\n\n<p>Take a look at <a href=\"https://metacpan.org/pod/DBI\" rel=\"nofollow noreferrer\">DBI</a> for more help with the DSN</p>\n\n<p>Also note that <a href=\"https://metacpan.org/pod/DBIx::Class::Schema::Loader\" rel=\"nofollow noreferrer\">DBIx::Class::Schema::Loader</a> allows you to automatically create a schema from an existing database. It is probably better to do that than to guess what the correct settings are</p>\n"}], "owner": {"reputation": 360, "user_id": 7374617, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72a22b7b862547b5395402cb286f05a0?s=128&d=identicon&r=PG&f=1", "display_name": "gregnnylf94", "link": "https://stackoverflow.com/users/7374617/gregnnylf94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 43331683, "answer_count": 1, "score": 2, "last_activity_date": 1491853876, "creation_date": 1491849358, "question_id": 43330532, "link": "https://stackoverflow.com/questions/43330532/mojolicious-resultset-from-existing-database", "title": "Mojolicious: ResultSet from existing Database", "body": "<p>I am currently learning Mojolicious. It makes sense and is pretty straight forward, but I can't figure out how to get a ResultSet for an existing database. After vigorous searching I came across a pretty nice walk through <a href=\"http://oliverguenther.de/2014/04/applications-with-mojolicious-part-four-database-schemas-with-dbixclass/\" rel=\"nofollow noreferrer\">here</a>. However everything I read uses SQLite. If it doesn't use SQLite then it looks like you sare not able to use CRUD commands (which I think defeats the purpose of MVC model to a degree).\nCan someone point me in the right direction? Currently I have something like ..</p>\n\n<pre><code>use lib 'C:\\Users\\gflynn\\Desktop\\WorkingCopies\\MojoliciousAPP\\Mojolicious\n\n\\moblo\\lib\\Moblo';\nuse Moblo::Schema;\n\nmy $schema = Moblo::Schema-&gt;connect('dbi:ODBC:driver={SQL Server};Server=\"server\";database=\"db\";uid=\"username\";pwd=\"password\"') or \"Could not Connect!\";\n$schema-&gt;deploy();\n</code></pre>\n\n<p>.</p>\n\n<pre><code>    package Moblo::Schema::Result::Complaints;\nuse base qw/DBIx::Class::Core/;\n\n__PACKAGE__-&gt;table('Form_Complaints');\n\n__PACKAGE__-&gt;add_columns(\n  id =&gt; {\n    data_type =&gt; 'integer',\n    is_auto_increment =&gt; 1,\n  },\n\n  FirstName =&gt; {\n    data_type =&gt; 'text',\n  },\n\n  LastName =&gt; {\n    data_type =&gt; 'text',\n  },\n\n  Address =&gt; {\n    data_type =&gt; ' datetime',\n  },\n\n  City =&gt; {\n    data_type =&gt; 'text',\n  },\n\n  ZipCode =&gt; {\n    data_type =&gt; 'integer',\n  },\n\n  Phone =&gt; {\n    data_type =&gt; 'text',\n  },\n\n  AltPhone =&gt; {\n    data_type =&gt; 'text',\n  },\n\n  Email =&gt; {\n    data_type =&gt; 'text',\n  },\n\n  Complaint =&gt; {\n    data_type =&gt; 'text'\n  }\n\n);\n# Tell DBIC that 'id' is the primary key\n__PACKAGE__-&gt;set_primary_key('id');\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1491846238, "post_id": 43329242, "comment_id": 73723609, "body": "I don&#39;t see how that hit answers my question.  That guy wasn&#39;t running a Perl script."}], "answers": [{"comments": [{"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491845922, "post_id": 43329373, "comment_id": 73723432, "body": "Is that fairly new with Perl?  The &quot;xterm &gt;&amp; /dev/null &amp;&quot; works fine with Perl 5.10."}, {"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491846373, "post_id": 43329373, "comment_id": 73723699, "body": "If I put system(&quot;set &lt; LOG_SET&quot;) in a PERL script, then grep for SHELL in the output file LOG_SET, it says: SHELL=&#39;/bin/tcsh&#39;.  From that, I assumed that system() starts a tsch shell.  How did I go wrong?"}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491847236, "post_id": 43329373, "comment_id": 73724143, "body": "@JB_User That prints out the <code>$SHELL</code> environment variable, which is the user&#39;s preferred shell. That does not mean that it is used by <code>system</code>. In fact, POSIX <code>system</code> is specified to always use <code>sh</code>."}, {"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491848188, "post_id": 43329373, "comment_id": 73724661, "body": "Okay, well I guess I&#39;m just trying to figure out why my script works on some systems, but not others."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491848348, "post_id": 43329373, "comment_id": 73724781, "body": "Re &quot;<i>Is that fairly new with Perl?</i>&quot;, No, <code>system</code> has always used <code>&#47;bin&#47;sh</code> (except on Windows)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491848393, "post_id": 43329373, "comment_id": 73724810, "body": "Re &quot;<i>in a PERL script</i>&quot;, The name of the language is &quot;Perl&quot;."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491848569, "post_id": 43329373, "comment_id": 73724901, "body": "Re &quot;<i>How did I go wrong?</i>&quot;, Instead of reading the documentation, you assumed <code>system EXPR</code> used the <code>SHELL</code> env var. It doesn&#39;t. It wouldn&#39;t make any sense for <code>system EXPR</code> to use the <code>SHELL</code> env var since the programmer wouldn&#39;t know for which shell to write."}, {"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491859081, "post_id": 43329373, "comment_id": 73730340, "body": "Okay.  What part of documentation explains why my original script works on one machine, but not another.  I&#39;m happy to read."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491859143, "post_id": 43329373, "comment_id": 73730367, "body": "@JB_User, That wasn&#39;t the question you asked, but my answer also does answer that question:  It behaved differently on the two machines because <code>&#47;bin&#47;sh</code> behaved differently."}, {"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491914534, "post_id": 43329373, "comment_id": 73755522, "body": "Okay, thanks for helping out with this.  I think I full understand what was happening."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1491848834, "last_edit_date": 1491848834, "creation_date": 1491845123, "answer_id": 43329373, "question_id": 43329242, "link": "https://stackoverflow.com/questions/43329242/perl-sh-1-syntax-error-bad-fd-number/43329373#43329373", "title": "perl: sh: 1: Syntax error: Bad fd number", "body": "<pre><code>system(EXPR)\n</code></pre>\n\n<p>is short for<sup>[1]</sup></p>\n\n<pre><code>system(\"/bin/sh\", \"-c\", EXPR)\n</code></pre>\n\n<p>In other words, it takes a bourne shell command.</p>\n\n<pre><code>xterm &gt;&amp; /dev/null &amp;\n</code></pre>\n\n<p>isn't a valid bourne shell command. You want</p>\n\n<pre><code>xterm &gt;/dev/null 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>Maybe you used a different shell when you tested it outside of Perl.</p>\n\n<hr>\n\n<ol>\n<li><p>Technically, it's closer to</p>\n\n<pre><code>use Config qw( );\nsystem($Config::Config{sh}, \"-c\", EXPR)\n</code></pre>\n\n<p>Except in Windows.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491846635, "post_id": 43329432, "comment_id": 73723833, "body": "Thanks for the answers.  I did get it working.  Now I&#39;m trying to figure out why my original script works on some systems, but not others."}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491846987, "post_id": 43329432, "comment_id": 73724010, "body": "@JB_User Because <code>&#47;bin&#47;sh</code> is not the same everywhere. Some common Linux distros use Dash and others use Bash. BSDs mostly use ash."}, {"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491848055, "post_id": 43329432, "comment_id": 73724582, "body": "Is there a simple way to tell, beforehand, whether my original script will work?  Dash, Bash, or Ash?  I don&#39;t even know what they are.  There&#39;s no wikipedia page for Dash."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491848770, "post_id": 43329432, "comment_id": 73725003, "body": "@JB_User, Perl executes <code>&#47;bin&#47;sh -c command</code>. You can do the same. But you&#39;ll need to quote <code>command</code> for your current shell, of course."}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491848982, "post_id": 43329432, "comment_id": 73725111, "body": "@ikegami Or better yet, use the list form of <a href=\"http://perldoc.perl.org/functions/system.html\" rel=\"nofollow noreferrer\"><code>system</code></a>, e.g. <code>system &#39;bash&#39;, &#39;-c&#39;, &#39;command...&#39;</code>."}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491849021, "post_id": 43329432, "comment_id": 73725129, "body": "@JB_User Ash is <a href=\"https://en.wikipedia.org/wiki/Almquist_shell\" rel=\"nofollow noreferrer\">Almquist shell</a>, Dash is <a href=\"http://gondor.apana.org.au/~herbert/dash/\" rel=\"nofollow noreferrer\">Debian Almquist shell</a>, Bash is <a href=\"https://www.gnu.org/software/bash/\" rel=\"nofollow noreferrer\">Bourne Again SHell</a>. You may occasionally find systems that use <a href=\"https://en.wikipedia.org/wiki/KornShell\" rel=\"nofollow noreferrer\">KornShell</a>,  <a href=\"https://en.wikipedia.org/wiki/Bourne_shell\" rel=\"nofollow noreferrer\">Bourne Shell</a> or others. If you only use <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html\" rel=\"nofollow noreferrer\">POSIX features</a> they should all work. In practice you should at least check Bash and ash."}, {"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491859247, "post_id": 43329432, "comment_id": 73730421, "body": "Okay.  Thanks for explaining the shell names.  Here&#39;s what I&#39;m looking for.  How can I tell if this Perl command system(&quot;xterm &gt;&amp; /dev/null &amp;&quot;) will work on a system?  Right now I know of one system where it works, and one where it doesn&#39;t.  What key feature determines whether the next machine I log into can use one form of syntax, but not another???"}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491859493, "post_id": 43329432, "comment_id": 73730527, "body": "@JB_User If the system has Bash installed as <code>&#47;bin&#47;sh</code> then <code>&gt;&amp;&#47;dev&#47;null</code> will work (although I still recommend using <code>&amp;&gt;&#47;dev&#47;null</code> in Bash). If another shell is installed as <code>&#47;bin&#47;sh</code> it will likely not work. <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html\" rel=\"nofollow noreferrer\">POSIX</a> says nothing about shell syntax for redirecting stdout and stderr at the same time, so you should not be using this syntax in a portable script."}, {"owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491914492, "post_id": 43329432, "comment_id": 73755485, "body": "Okay, I get it.  /bin/sh is actually a symbolic link to either dash, bash, or whatever else.  That&#39;s what I was missing.  Thanks for responding!"}, {"owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "reply_to_user": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "edited": false, "score": 0, "creation_date": 1491929053, "post_id": 43329432, "comment_id": 73766649, "body": "@JB_User It&#39;s also possible that it is simply &quot;whatever else&quot; without being a symbolic link (e.g. on Solaris)."}], "tags": [], "owner": {"reputation": 179940, "user_id": 20713, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/09b9758a4a83cc25547eb93891f19df7?s=128&d=identicon&r=PG", "display_name": "ephemient", "link": "https://stackoverflow.com/users/20713/ephemient"}, "is_accepted": false, "score": 2, "last_activity_date": 1491845333, "creation_date": 1491845333, "answer_id": 43329432, "question_id": 43329242, "link": "https://stackoverflow.com/questions/43329242/perl-sh-1-syntax-error-bad-fd-number/43329432#43329432", "title": "perl: sh: 1: Syntax error: Bad fd number", "body": "<p>Firstly, the preferred syntax for redirecting both stdout and stderr in Bash is <code>&amp;&gt;</code>, not <code>&gt;&amp;</code>, because the latter can be confused with other redirection forms.</p>\n\n<p>Secondly, <code>system</code> uses <code>/bin/sh</code> which may behave differently than your default shell.</p>\n\n<p>Try writing it out explicitly, as in</p>\n\n<pre><code>system(\"xterm &gt;/dev/null 2&gt;&amp;1 &amp;\");\n</code></pre>\n\n<p>or skipping the shell altogether.</p>\n\n<pre><code>if (fork() == 0) {\n    open STDOUT, '&gt;', '/dev/null';\n    open STDERR, '&gt;&amp;', *STDOUT;\n    exec \"xterm\";\n    POSIX::_exit();\n}\n</code></pre>\n"}], "owner": {"reputation": 2851, "user_id": 2225050, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2a8b891028237d6b90ac867428f650d?s=128&d=identicon&r=PG", "display_name": "JB_User", "link": "https://stackoverflow.com/users/2225050/jb-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1877, "favorite_count": 0, "accepted_answer_id": 43329373, "answer_count": 2, "score": -1, "last_activity_date": 1491848834, "creation_date": 1491844670, "last_edit_date": 1491845139, "question_id": 43329242, "link": "https://stackoverflow.com/questions/43329242/perl-sh-1-syntax-error-bad-fd-number", "title": "perl: sh: 1: Syntax error: Bad fd number", "body": "<p>I have a very simple Perl script that fails with this error message:</p>\n\n<pre><code>sh: 1: Syntax error: Bad fd number\n</code></pre>\n\n<p>Here is the script (two lines)</p>\n\n<pre><code>#!/usr/bin/perl\nsystem(\"xterm &gt;&amp; /dev/null &amp;\");\n</code></pre>\n\n<p>If I run the same xterm command from the command-line, it works.  From the Perl script, it doesn't.  What is wrong? </p>\n"}, {"tags": ["perl", "oop", "inheritance", "delegation", "moo"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491845914, "post_id": 43328512, "comment_id": 73723424, "body": "I think since <code>Cat</code> has a <code>token</code> attribute, another attribute (here: <code>tiger</code>) cannot delegate an attribute that is already defined in <code>Cat</code> (here: <code>token</code>). What are you trying to achieve? ( You get &quot;deep recursion&quot; error because <code>Cat::Tiger</code> extends <code>Cat</code> and you construct a new <code>Cat::Tiger</code> object when constructing a <code>Cat</code>, which will create a new <code>Cat::Tiger</code>, which will create a new <code>Cat</code>, and so on"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491849762, "post_id": 43328512, "comment_id": 73725537, "body": "In other words, I&#39;d like to implement a partial <code>extend</code> : <code>package Cat::Tiger</code> must extend only <code>token</code> attribute and value of <code>package Cat</code>. It is possible to implement somehow with Moo or Moose ?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1491850174, "post_id": 43328512, "comment_id": 73725751, "body": "I am not sure I completely understand. So <code>Cat::Tiger</code> should not have access to <code>tiger</code> attribute of <code>Cat</code> even if it extends <code>Cat</code>? Why would you do that? It might help if you could give an example of this use case"}, {"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491856500, "post_id": 43328512, "comment_id": 73729166, "body": "It should. For example, right now I&#39;m working on improving my <a href=\"https://metacpan.org/pod/API::Google\" rel=\"nofollow noreferrer\">API::Google</a> module. <code>Cat</code> is like<code>API::Google</code> class, <code>Cat::Tiger</code> is <code>API::Google::Gmail</code> or <code>API::Google::Calendar</code>. I&#39;d like to simplify API call to <code>$gapi-&gt;Calendar-&gt;CalendarList-&gt;list</code>, for such method chaining I need that token attribute of <code>API::Google::Calendar::CalendarList</code> instance will same as <code>API::Google</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "is_accepted": false, "score": 2, "last_activity_date": 1491907644, "creation_date": 1491907644, "answer_id": 43343768, "question_id": 43328512, "link": "https://stackoverflow.com/questions/43328512/attribute-delegation-in-perl-moose-or-moo/43343768#43343768", "title": "Attribute delegation in Perl Moose or Moo", "body": "<p>Well, problem solved with moving token to separate class and using <a href=\"https://metacpan.org/pod/MooX::Singleton\" rel=\"nofollow noreferrer\">MooX::Singleton</a> for this class:</p>\n\n<pre><code>package Credentials;\nuse Moo;\nwith 'MooX::Singleton';\nhas 'token' =&gt; ( is =&gt; 'rw', default =&gt; '12345' );\n\npackage Cat;\nuse Moo;\nhas 'credentials' =&gt; ( is =&gt; 'rw', default =&gt; sub { Credentials-&gt;instance }, handles =&gt; [qw(token)] );\nhas 'tiger' =&gt; ( is =&gt; 'rw', default =&gt; sub { Cat::Tiger-&gt;new(token =&gt; shift-&gt;token) } );\n\npackage Cat::Tiger;\nuse Moo;\nhas 'credentials' =&gt; ( is =&gt; 'rw', default =&gt; sub { Credentials-&gt;instance }, handles =&gt; [qw(token)] );\n\n\npackage main;\nuse Data::Dumper;\nmy $cat = Cat-&gt;new;\nwarn $cat-&gt;token;\nwarn $cat-&gt;tiger-&gt;token;\n$cat-&gt;token('54321');\nwarn $cat-&gt;token;\nwarn $cat-&gt;tiger-&gt;token; # will be also 54321\n</code></pre>\n\n<p>If someone knows better solution you are welcome to suggest it :)</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492035026, "creation_date": 1491842000, "last_edit_date": 1492035026, "question_id": 43328512, "link": "https://stackoverflow.com/questions/43328512/attribute-delegation-in-perl-moose-or-moo", "title": "Attribute delegation in Perl Moose or Moo", "body": "<p>Initially topic was started <a href=\"https://groups.google.com/forum/#!topic/mojolicious/Mu3tlHJJPjw\" rel=\"nofollow noreferrer\">here</a>, but I need a working code example how to properly delegate attributes with Moo or Moose.</p>\n\n<p>Based on documentation I wrote this code to check:</p>\n\n<pre><code>package Cat;\nuse Moo;\n\nhas 'token' =&gt; ( is =&gt; 'rw', default =&gt; '12345' );\nhas 'tiger' =&gt; ( is =&gt; 'rw', default =&gt; sub { my $self = shift; Cat::Tiger-&gt;new(token =&gt; $self-&gt;token) }, handles =&gt; [ qw(token) ] );\n\npackage Cat::Tiger;\nuse Moo;\nextends 'Cat';\n# + some additional methods\n\n\npackage main;\nuse Data::Dumper;\n\nmy $cat = Cat-&gt;new(token=&gt;'54321');\nwarn $cat-&gt;token;\nwarn $cat-&gt;tiger-&gt;token;\n</code></pre>\n\n<p>But this code produce an error: </p>\n\n<blockquote>\n  <p>You cannot overwrite a locally defined method (token) with a\n  delegation at 3.pl line 5</p>\n</blockquote>\n\n<p>If I remove <code>handles =&gt; [ qw(token) ]</code> at line 5 code will return another error: </p>\n\n<blockquote>\n  <p>Deep recursion on subroutine \"Tiger::new\" at 3.pl line 5.</p>\n</blockquote>\n\n<p>So how to do?</p>\n\n<p>I need to set token of <code>Cat::Tiger</code> object (<code>$cat-&gt;tiger-&gt;token</code>) same as in <code>Cat</code> object (<code>$cat-token</code>) and syn\u0441 them everytime when token of <code>Cat</code> object changed.</p>\n"}, {"tags": ["perl", "oop", "watch", "mojolicious", "moo"], "comments": [{"owner": {"reputation": 19796, "user_id": 468327, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cc767569f5863a7c261991ee5b23f147?s=128&d=identicon&r=PG", "display_name": "Joel Berger", "link": "https://stackoverflow.com/users/468327/joel-berger"}, "edited": false, "score": 0, "creation_date": 1491941553, "post_id": 43326596, "comment_id": 73773852, "body": "The thing about Mojo::Base is that it isn&#39;t SUPPOSED to be a generic object system. It provides simple behavior and is very fast. We always support building your Mojolicious apps with Moo(se)? and when you want behavior like this, then that&#39;s the best solution!"}], "answers": [{"comments": [{"owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1491838175, "post_id": 43326921, "comment_id": 73718724, "body": "great, it works, many thanks for detailed explanation! would be glad if someone will review Mojo::Base + Scalar::Watcher part :) Now I&#39;m making some architecture decisions and would like to avoid using Moo or Moose for not to overweight app if it&#39;s possible."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "edited": false, "score": 0, "creation_date": 1491838258, "post_id": 43326921, "comment_id": 73718792, "body": "I&#39;m working on that. I don&#39;t think you can get that to work. Also, it&#39;s expensive. The docs of Scalar::Watcher even say you should only use it for debugging. Use Moo instead. It&#39;s very light-weight. Unless you run on a raspberry you should be fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491842275, "post_id": 43326921, "comment_id": 73721446, "body": "&quot;<i>If you run this, it will work a little bit, but crash with this error:&quot;</i> That part took me a while to understand because it looks like you&#39;re still talking about the <code>update</code> subroutine, whereas you&#39;re actually referring to the calling code in the <code>main</code> package of the OP&#39;s code."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491842378, "post_id": 43326921, "comment_id": 73721492, "body": "@Borodin I was in a hurry. I&#39;ll make it  clearer later. Feel free to edit if you want."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1491997229, "last_edit_date": 1491997229, "creation_date": 1491837274, "answer_id": 43326921, "question_id": 43326596, "link": "https://stackoverflow.com/questions/43326596/watch-change-of-attribute-inside-perl-class/43326921#43326921", "title": "Watch change of attribute inside Perl class", "body": "<h2>The Moo part</h2>\n\n<blockquote>\n  <p>got error here: Can't call method \"attr1\" on an undefined value</p>\n</blockquote>\n\n<p>This is because Moo expects a code reference as a <code>trigger</code> for <code>has</code>. You are passing the result of a call to <code>update</code>. The <code>&amp;</code> here doesn't give you a reference, but instead tells Perl to ignore the prototypes of the <code>update</code> function. You don't want that. </p>\n\n<p>Instead, create a reference with <code>\\&amp;foo</code> and do not add parenthesis <code>()</code>. You don't want to <em>call</em> the function, you want to <em>reference</em> it.</p>\n\n<pre><code>has 'attr1' =&gt; ( is =&gt; 'rw', default =&gt; 1, trigger =&gt; \\&amp;update );\n</code></pre>\n\n<p>Now once you've done that, you don't need the Scalar::Watcher any more. The trigger already does that. It gets called every time <code>attr1</code> gets changed.</p>\n\n<pre><code>sub update {\n    my $self = shift;\n    $self-&gt;attr2(3);\n    say \"meow\";\n};\n</code></pre>\n\n<p>If you run the whole thing now, it will work a little bit, but crash with this error:</p>\n\n<blockquote>\n  <p>Can't locate object method \"attr2\" via package \"3\" (perhaps you forgot to load \"3\"?) at</p>\n</blockquote>\n\n<p>That's because <code>attr1</code> returns the new value, and not a reference to <code>$self</code>. All Moo/Moose accessors work like that. And <code>3</code> is not an object, so it doesn't have a method <code>attr2</code></p>\n\n<pre><code>#       this returns 1\n#               |\n#               V\nsay $me-&gt;attr1(3)-&gt;attr2;\n</code></pre>\n\n<p>Instead, do this as two calls.</p>\n\n<pre><code>$me-&gt;attr1(3);\nsay $me-&gt;attr2;\n</code></pre>\n\n<p>Here's a complete example.</p>\n\n<pre><code>package Cat;\nuse Moo;\n\nuse feature 'say';\n\nhas 'attr1' =&gt; ( is =&gt; 'rw', default =&gt; 1, trigger =&gt; \\&amp;update );\nhas 'attr2' =&gt; ( is =&gt; 'rw', default =&gt; 1 );\n\nsub update {\n    my $self = shift;\n    $self-&gt;attr2(3);\n    say \"meow\";\n}\n\npackage main;\nmy $me = Cat-&gt;new;\n\nsay $me-&gt;attr2;\n$me-&gt;attr1(3);\nsay $me-&gt;attr2;\n</code></pre>\n\n<p>And the output:</p>\n\n<pre><code>1\nmeow\n3\n</code></pre>\n\n<h2>Why Scalar::Watcher does not work with Mojo</h2>\n\n<p>First of, Mojo::Base does not provide a trigger mechanism. But the way you implemented Scalar::Watcher could not work, because the <code>test</code> method was never called. I tried hooking around <code>new</code> in the Mojo::Base based class to do the <code>when_modified</code> call in a place where it would always be called.</p>\n\n<p>Everything from here is on is mere speculation.</p>\n\n<p>The following snippet is what I tried, but it does not work. I'll explain why further below.</p>\n\n<pre><code>package Cat;\nuse Mojo::Base -base;\nuse Scalar::Watcher qw(when_modified);\nuse feature 'say';\n\nhas 'attr1' =&gt; '1';\nhas 'attr2' =&gt; 'original';\n\nsub new {\n    my $class = shift;\n\n    my $self = $class-&gt;SUPER::new(@_);\n    when_modified $self-&gt;{attr1}, sub { $self-&gt;attr2('updated'); say \"meow\" };\n\n    return $self;\n}\n</code></pre>\n\n<p>As you can see, this is now part of the <code>new</code> call. The code does get executed. But it doesn't help.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/Scalar::Watcher#$canceller-=-when_modified-$variable,-$handler\" rel=\"nofollow noreferrer\">documentation of Scalar::Watcher states</a> that the watcher should be there until the variable goes out of scope.</p>\n\n<blockquote>\n  <p>If when_modified is invoked at void context, the watcher will be\n  active until the end of $variable's life; otherwise, it'll return a\n  reference to a canceller, to cancel this watcher when the canceller is\n  garbage collected.</p>\n</blockquote>\n\n<p>But we don't actually have a scalar variable. If we try to do</p>\n\n<pre><code>when_modified $self-&gt;foo\n</code></pre>\n\n<p>then Perl does a method call of <code>foo</code> on <code>$self</code> and <code>when_modified</code> will get that call's return value. I also tried reaching into the internals of the object above, but that didn't work either.</p>\n\n<p>My XS is not strong enough to understand what is going on <a href=\"https://metacpan.org/source/CINDY/Scalar-Watcher-0.002001/Watcher.xs#L71\" rel=\"nofollow noreferrer\">here</a>, but I think it is having some trouble attaching that magic. It can't work with hash ref values. Probably that's why it's called Scalar::Watch.</p>\n"}], "owner": {"reputation": 1445, "user_id": 1441592, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2a58917def8d1523a840b52ae7d59d21?s=128&d=identicon&r=PG", "display_name": "Paul Serikov", "link": "https://stackoverflow.com/users/1441592/paul-serikov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 43326921, "answer_count": 1, "score": 2, "last_activity_date": 1491997229, "creation_date": 1491836417, "question_id": 43326596, "link": "https://stackoverflow.com/questions/43326596/watch-change-of-attribute-inside-perl-class", "title": "Watch change of attribute inside Perl class", "body": "<p>Can anyone provide a code example how do you set watchers on variable change inside of class ? I tried to do it several ways using different features (<a href=\"https://metacpan.org/pod/Scalar::Watcher\" rel=\"nofollow noreferrer\">Scalar::Watcher</a>, <a href=\"https://metacpan.org/pod/Moo#trigger\" rel=\"nofollow noreferrer\">trigger attribute of Moo</a>) and OOP frameworks (Moo, Mojo::Base) and but all failed.</p>\n\n<p>Below is my failed code for better understanding of my task. In this example i need to update attr2 everytime when attr1 changed.</p>\n\n<p>Using Mojo::Base and Scalar::Watcher:</p>\n\n<pre><code>package Cat;\nuse Mojo::Base -base;\nuse Scalar::Watcher qw(when_modified);\nuse feature 'say';\n\nhas 'attr1' =&gt; 1;\nhas 'attr2' =&gt; 2;\n\nhas 'test' =&gt; sub { # \"fake\" attribute for getting access to $self\n  my $self = shift;\n  when_modified $self-&gt;attr1, sub { $self-&gt;attr2(3); say \"meow\" };\n};\n\n\npackage main;\nuse Data::Dumper;\n\nmy $me = Cat-&gt;new;\n$me-&gt;attr1;\nwarn Dumper $me;\nsay $me-&gt;attr1(3)-&gt;attr2; # attr2 is still 2, but must be 3\n</code></pre>\n\n<p>Using Moo and trigger:</p>\n\n<pre><code>package Cat;\nuse Moo;\nuse Scalar::Watcher qw(when_modified);\nuse feature 'say';\n\nhas 'attr1' =&gt; ( is =&gt; 'rw', default =&gt; 1, trigger =&gt; &amp;update() ); \nhas 'attr2' =&gt; ( is =&gt; 'rw', default =&gt; 1);\n\nsub update {\n  my $self = shift;\n  when_modified $self-&gt;attr1, sub { $self-&gt;attr2(3); say \"meow\" }; # got error here: Can't call method \"attr1\" on an undefined value\n};\n\n\npackage main;\nuse Data::Dumper;\n\nmy $me = Cat-&gt;new;\n$me-&gt;attr1;\nwarn Dumper $me;\nsay $me-&gt;attr1(3)-&gt;attr2;\n</code></pre>\n\n<p>Any suggestion is much appreciated.</p>\n"}, {"tags": ["regex", "linux", "string", "perl"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 4, "creation_date": 1491831355, "post_id": 43324619, "comment_id": 73713525, "body": "<code>\\w</code> matches digits, and <code>\\w+</code> is greedy"}, {"owner": {"reputation": 71, "user_id": 7506307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2be3dd91e62bf4e670e8bd0a1954dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Kraus", "link": "https://stackoverflow.com/users/7506307/chris-kraus"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1491831945, "post_id": 43324619, "comment_id": 73714009, "body": "@aschepler : Ok, I did not think about the possibility that &quot;word&quot; characters are also digits."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491838745, "post_id": 43324619, "comment_id": 73719118, "body": "Tip: <code>&#47;...\\w+&#47;</code>  can be simplified to <code>&#47;...\\w&#47;</code> (unless you use <code>$&amp;</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 4, "last_activity_date": 1491831364, "creation_date": 1491831364, "answer_id": 43324711, "question_id": 43324619, "link": "https://stackoverflow.com/questions/43324619/perl-regex-d-and-0-9-operators-show-only-single-digit-in-a-alpha-numeric-str/43324711#43324711", "title": "Perl regex \\d+ and [0-9] operators show only single digit in a alpha-numeric string", "body": "<p>The results you get are expected. In <code>/\\A\\w+(\\d+)\\w+/</code>, the first <code>\\w+</code> is a greedy pattern and will grab as many chars as it can match, and since <code>\\w</code> also matches digits.</p>\n\n<p>Either use lazy quantifier - <a href=\"https://regex101.com/r/gzLYEm/1/\" rel=\"nofollow noreferrer\"><code>/\\A\\w+?(\\d+)\\w+/</code></a>, or subtract the digit from <code>\\w</code> (e.g. like in <a href=\"https://regex101.com/r/gzLYEm/2\" rel=\"nofollow noreferrer\"><code>/\\A[^\\W\\d]+(\\d+)\\w+/</code></a>). The <code>\\w+?</code> will match 1 or more word chars (letters/digits/<code>_</code>) <em>as few as possible</em>, and <code>[^\\W\\d]</code> matches any letters or <code>_</code> symbols, thus, no need to use a lazy quantifier with this pattern.</p>\n"}, {"tags": [], "owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491831578, "creation_date": 1491831578, "answer_id": 43324800, "question_id": 43324619, "link": "https://stackoverflow.com/questions/43324619/perl-regex-d-and-0-9-operators-show-only-single-digit-in-a-alpha-numeric-str/43324800#43324800", "title": "Perl regex \\d+ and [0-9] operators show only single digit in a alpha-numeric string", "body": "<p>the problem is that digits are matched by \\w.</p>\n\n<p>You should replace \"\\w\" with \"\\D\" (\"not digit\").\nFor example : </p>\n\n<pre><code>perl -e 'for ($i = 199; $i &lt; 201; $i ++) { print \"words\".$i.\"words\\n\"}' | perl -ne 'if (/\\A\\D+(\\d+)\\D+/) {$num = $1; print $num,\"\\n\";}'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>199\n200\n</code></pre>\n\n<p>Of course, if your data can contain more than one occurrence of digits in a single string, you'll need some more precise regexp.</p>\n"}], "owner": {"reputation": 71, "user_id": 7506307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc2be3dd91e62bf4e670e8bd0a1954dd?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Kraus", "link": "https://stackoverflow.com/users/7506307/chris-kraus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 43324711, "answer_count": 2, "score": 3, "last_activity_date": 1491831578, "creation_date": 1491831123, "question_id": 43324619, "link": "https://stackoverflow.com/questions/43324619/perl-regex-d-and-0-9-operators-show-only-single-digit-in-a-alpha-numeric-str", "title": "Perl regex \\d+ and [0-9] operators show only single digit in a alpha-numeric string", "body": "<p>I encountered the following problem: If I use the code in the first example the variable <code>$1</code> includes only the last digit of each string. However, if I use the third example where each \"string\" is just a number the <code>$1</code> variable shows the full number with all digits. To me it appears that the <code>\\d+</code> operator works differently in alpha-numeric context and just numeric context.</p>\n\n<p>Here are my questions: Can you reproduce this? Is this behavior intended? How can I capture the full number in the alpha-numeric context using a regex operation in perl? If the nature of the <code>\\d</code> operator is by nature lazy, can I make it more greedy (if true, how would i do it?)?</p>\n\n<p>Example 1: </p>\n\n<pre><code>perl -e 'for ($i = 199; $i &lt; 201; $i ++) { print \"words\".$i.\"words\\n\"}' | perl -ne 'if (/\\A\\w+(\\d+)\\w+/) {$num = $1; print $num,\"\\n\";}'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>9\n0\n</code></pre>\n\n<p>Example 2:</p>\n\n<pre><code>perl -e 'for ($i = 199; $i &lt; 201; $i ++) { print \"words\".$i.\"words\\n\"}' | perl -ne 'if (/\\A\\w+([0-9]+)\\w+/) {$num = $1; print $num,\"\\n\";}'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>9\n0\n</code></pre>\n\n<p>Example 3:</p>\n\n<pre><code>perl -e 'for ($i = 199; $i &lt; 201; $i ++) { print \"words\".$i.\"words\\n\"}' | perl -ne 'if (/(\\d+)/) {$num = $1; print $num,\"\\n\";}'\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>199\n200\n</code></pre>\n\n<p>Thanks in advance. Any help is highly appreciated.</p>\n\n<p>Best,\nChris</p>\n"}, {"tags": ["perl", "mojolicious", "hypnotoad"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491828434, "post_id": 43322443, "comment_id": 73711236, "body": "The server is not the application. It&#39;s in front of the application. The Hypnotoad object has your Mojo::Server::Prefork object. I am not sure you can reach that from the application. See <a href=\"https://metacpan.org/pod/Mojo::Server::Hypnotoad#prefork\" rel=\"nofollow noreferrer\">metacpan.org/pod/Mojo::Server::Hypnotoad#prefork</a> - from looking <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.30/lib/Mojo/Server/Hypnotoad.pm#L12\" rel=\"nofollow noreferrer\">at the code</a> I think you would have to implement a subclass of either Mojo::Server::Prefork or Mojo::Server::Hypnotoad and put your <code>on(&quot;span&quot;)</code> handler there, then get Hypnotoad to use that. But I don&#39;t see how. Not familiar enough with Mojo, sorry."}, {"owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491831327, "post_id": 43322443, "comment_id": 73713502, "body": "Hmm... Maybe you know, how to run some code in the hypnotoad worker whenever it spawns? I tried Mojo::IOLopp-&gt;next_tick as described in the Mojo documentation, but it seems doesnt work"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491831597, "post_id": 43322443, "comment_id": 73713694, "body": "I&#39;m afraid I don&#39;t. I just read the documentation and took a look at the code. I can peek some more later, but I&#39;ve never actually used this stuff."}], "answers": [{"tags": [], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "is_accepted": false, "score": 0, "last_activity_date": 1492090186, "creation_date": 1492090186, "answer_id": 43393657, "question_id": 43322443, "link": "https://stackoverflow.com/questions/43322443/how-to-define-on-spawn-handler-for-mojoserverprefork/43393657#43393657", "title": "How to define on spawn handler for Mojo::Server::Prefork?", "body": "<p>Although i still dont know how to define handler fired on process \"spawn\", i can tell that absolutely the same thing can be done by using</p>\n\n<pre><code>Mojo::IOLoop-&gt;singleton-&gt;next_tick(sub {\n  doingSomethingOnProcSpawn()\n});\n</code></pre>\n\n<p>As it described in Mojolicious Cookbook (<a href=\"http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Pre-forking\" rel=\"nofollow noreferrer\">http://mojolicious.org/perldoc/Mojolicious/Guides/Cookbook#Pre-forking</a>):</p>\n\n<blockquote>\n  <p>During startup your application is preloaded in the manager process,\n  which does not run an event loop, so you can use \"next_tick\" in\n  Mojo::IOLoop to run code whenever a new worker process has been forked\n  and its event loop gets started.</p>\n</blockquote>\n\n<p>Hint: As i see in my real application, Mojo::IOLoop->singleton->next_tick and Mojo::IOLoop->next_tick works absolutely identically, so i dont know what is the difference between them.</p>\n"}], "owner": {"reputation": 675, "user_id": 1919254, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5dbd3912a0e2cefa932fadf4cd0beb90?s=128&d=identicon&r=PG", "display_name": "drvtiny", "link": "https://stackoverflow.com/users/1919254/drvtiny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1492090186, "creation_date": 1491825205, "question_id": 43322443, "link": "https://stackoverflow.com/questions/43322443/how-to-define-on-spawn-handler-for-mojoserverprefork", "title": "How to define on spawn handler for Mojo::Server::Prefork?", "body": "<p>I have simple web application written in perl/Mojolicious and running under hypnotoad.</p>\n\n<p>I need to define some handler for the \"spawn\" event (emited by Mojo::Server::Prefork). </p>\n\n<p>But i dont know, how to insert this hander definitiion in the code of startup method of Mojolicious application. <code>$self-&gt;on(\"spawn\"=&gt;sub {})</code> doesnt work :( And <code>Dumper($self)</code> was not helpful at all: there are no $self->server or $server->prefork ...</p>\n\n<p>Tell me please, how to do it.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491824856, "post_id": 43322212, "comment_id": 73708701, "body": "The arguments to the <code>-&gt;</code> call is evaluated first (i.e. <code>t4()</code>), then <code>call()</code> is called, then finally <code>call()</code> returns a coderef (<code>test()</code>) that is called"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491829826, "post_id": 43322212, "comment_id": 73712322, "body": "@H&#229;konH&#230;gland: But in case of <code>*</code> there first <code>m1()</code> then <code>m2</code>. So in case of <code>-&gt;</code> I also expect <code>call</code> then <code>t4</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491831197, "post_id": 43322212, "comment_id": 73713407, "body": "Good point. I think this is explained by the answers below.. <code>$ref-&gt;(@args)</code> is a TERM according to <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">perlop</a>, and it is not specified whether <code>$ref</code> or <code>@args</code> will be evaluated first. In this case it happens that <code>@args</code> is evaluated first."}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491831489, "post_id": 43322212, "comment_id": 73713615, "body": "@H&#229;konH&#230;gland: so for both operators <code>TERMS</code> are evaluated in different order."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1491832451, "post_id": 43322212, "comment_id": 73714399, "body": "That is not associativity"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1491826533, "post_id": 43322771, "comment_id": 73709875, "body": "If the parentheses had an effect on the evaluation order, <code>m2</code> would be called before <code>m1</code>. I think order is just not specified."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491835506, "post_id": 43322771, "comment_id": 73716776, "body": "Re &quot;<i>The reason the parenthesized argument list gets processed first is because parentheses are higher-precedence than <code>-&gt;</code>.</i>&quot;,  Totally wrong. Demo: <code>perl -E&#39;say(&quot;abc&quot;) + (say(&quot;def&quot;) + say(&quot;ghi&quot;))&#39;</code>"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491897178, "post_id": 43322771, "comment_id": 73742787, "body": "@ikegami Well, that&#39;s... interesting. Incorrect statement removed, but it would be nice to have an explanation of what&#39;s really going on, then. (But it seems unlikely that any such explanation is documented, so I doubt we&#39;ll ever get one, aside from the pragmatic &quot;UTSL&quot;.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491914513, "post_id": 43322771, "comment_id": 73755502, "body": "See my answer if you want an explanation"}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491916353, "post_id": 43322771, "comment_id": 73757076, "body": "@ikegami I read &quot;undefined (or at least undocumented) for many operators, including <code>-&gt;</code>&quot; as more of a statement that we don&#39;t have an explanation of how it&#39;s ordered and aren&#39;t likely to get one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491916854, "post_id": 43322771, "comment_id": 73757497, "body": "Then you misread. It means there&#39;s no official order. You can&#39;t explain something that doesn&#39;t exist. I even explained why there might not be an official order."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "edited": false, "score": 0, "creation_date": 1491919081, "post_id": 43322771, "comment_id": 73759446, "body": "I think I see now. You&#39;re talking about the <i>official</i> order, I&#39;m talking about the <i>actual</i> order. There is an actual order. That order is deterministic. There is a cause for that order. This cause can be explained and (probably) understood, even if it is not official, nor documented, nor intentional. (&quot;Probably&quot; because it could be the emergent result of a set of extremely complex interactions. But I don&#39;t think that&#39;s likely in this case.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491921266, "post_id": 43322771, "comment_id": 73761175, "body": "Re &quot;<i>I&#39;m talking about the actual order.</i>&quot;, It&#39;s silly to discuss the order of evaluation of a specific operator in a specific program in a specific run on a specific machine. No, it would not be &quot;nice&quot; to include this. /// Re &quot;<i>That order is deterministic</i>&quot;, No, not necessarily. /// Re &quot;<i>There is a cause for that order</i>&quot;, No, not necessarily."}, {"owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491982133, "post_id": 43322771, "comment_id": 73787799, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/141509/discussion-between-dave-sherohman-and-ikegami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 42833, "user_id": 18914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a20a39ae2ef47ae042a3eddd5b5bd19?s=128&d=identicon&r=PG", "display_name": "Dave Sherohman", "link": "https://stackoverflow.com/users/18914/dave-sherohman"}, "is_accepted": false, "score": 2, "last_activity_date": 1491897080, "last_edit_date": 1491897080, "creation_date": 1491826126, "answer_id": 43322771, "question_id": 43322212, "link": "https://stackoverflow.com/questions/43322212/please-explain-perl-operator-associativity/43322771#43322771", "title": "Please explain perl operator associativity", "body": "<p>Associativity describes the order that multiple operators of equal precedence are handled. It has nothing to do with whether the left arguments or the right arguments are processed first. <code>-&gt;</code> being left associative means that <code>a-&gt;b-&gt;c</code> is processed as <code>(a-&gt;b)-&gt;c</code>, not as <code>a-&gt;(b-&gt;c)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1491830134, "post_id": 43322889, "comment_id": 73712561, "body": "associativity define the order. do not? Look at @DaveSherohman example: <code>(a-&gt;b)-&gt;c</code>, so <code>(a)-&gt;b</code> and not <code>a-&gt;(b)</code> because of left associativity"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1491830448, "post_id": 43322889, "comment_id": 73712803, "body": "Associativity defines how the operations are placed into a parse tree. Some ordering constraints are implied by the parse tree, but the evaluation of the leaf operands can still happen in any order. If you want to argue that the order is well defined by parentheses and associativity, you need to explain why the rule you use for <code>-&gt;</code> doesn&#39;t apply to the <code>*</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 2, "creation_date": 1491830863, "post_id": 43322889, "comment_id": 73713140, "body": "By the way, one problem we face with perl is that as a single-implementation language, there&#39;s no clear line between officially defined behavior and coincidence. <a href=\"http://grokbase.com/t/perl/perl5-porters/107f90pnbn/order-of-evaluation-of-terms-was-peephole-optimiser-could-prune-more-dead-code/oldest\" rel=\"nofollow noreferrer\">Even the people who work on the perl core occasionally disagree with each other on how much of the evaluation order is guaranteed.</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 3, "last_activity_date": 1491826486, "creation_date": 1491826486, "answer_id": 43322889, "question_id": 43322212, "link": "https://stackoverflow.com/questions/43322212/please-explain-perl-operator-associativity/43322889#43322889", "title": "Please explain perl operator associativity", "body": "<p>Associativity is a rule that tells you how to parse an expression where the same operator appears twice, or more than one operator with the same precedence level appears. For example, associativity determines that:</p>\n\n<pre><code>foo()-&gt;bar()-&gt;baz()\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>(foo()-&gt;bar())-&gt;baz() # left associative\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>foo()-&gt;(bar()-&gt;baz()) # right associative\n</code></pre>\n\n<p>Since your code only hase one <code>-&gt;</code> operator in it, the associativity of that operator is irrelevant.</p>\n\n<p>You seem to be looking for a rule about the order of evaluation of operands to the <code>-&gt;</code> operator. As far as I know, there is no guaranteed order of evaluation for most operators in perl (much like C). If the order matters, you should split the expression into multiple statements with an explicit temporary variable:</p>\n\n<pre><code>my $tmp = call();\n$tmp-&gt;( @args, t4 );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1491843874, "post_id": 43326594, "comment_id": 73722257, "body": "So if for <code>-&gt;</code> operator the operand evaluation order is not documented I should not relay on <code>shift-&gt;( @_ )</code> should I?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1491845422, "post_id": 43326594, "comment_id": 73723132, "body": "Right. Both using and changing a variable in an expression should usually be avoided. You could use <code>$_[0]-&gt;(@_[1..$#_])</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1493509985, "last_edit_date": 1493509985, "creation_date": 1491836413, "answer_id": 43326594, "question_id": 43322212, "link": "https://stackoverflow.com/questions/43322212/please-explain-perl-operator-associativity/43326594#43326594", "title": "Please explain perl operator associativity", "body": "<p>You are asking about <em>operand evaluation order</em> (the order in which operands are evaluated), not <em>operator associativity</em> (the order in which operators of the same <em>operator precedence</em> are evaluated).</p>\n\n<p>The operand evaluation order is undefined (or at least undocumented) for many operators, including <code>-&gt;</code>. You will find it consistent, but one shouldn't rely on that.</p>\n\n<p>You can use statement breaks to force the desired order:</p>\n\n<pre><code>my $sub = call();\n$sub-&gt;( @args, t4 );\n</code></pre>\n\n<p>This would also work:</p>\n\n<pre><code>$_-&gt;( @args, t4 ) for call();\n</code></pre>\n\n<hr>\n\n<h2>Operator Associativity</h2>\n\n<p>Associativity is the order in which operators of the same precedence are evaluated.</p>\n\n<p>For example, <code>*</code> and <code>/</code> have the same precedence, so associativity determines that</p>\n\n<pre><code> 3 / 4 * 5 * 6\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code> ( ( 3 / 4 ) * 5 ) * 6 = 22.5\n</code></pre>\n\n<p>and not</p>\n\n<pre><code> 3 / ( 4 * ( 5 * 6 ) ) = 0.025\n</code></pre>\n\n<p>As you can see, associativity can have a direct effect on the outcome of the expression.</p>\n\n<hr>\n\n<h2>Operand Evaluation Order</h2>\n\n<p>Operand evaluation order is the order in which operands are evaluated.</p>\n\n<p>For example, operand evaluation order determines whether <code>1+2</code> is evaluated before <code>3+4</code>, or vice-versa in</p>\n\n<pre><code>( 1 + 2 ) * ( 3 + 4 )\n</code></pre>\n\n<p>Unless evaluating the operand has a side-effect (e.g. changing a variable or printing to the screen), then operand evaluation order has no effect on the outcome of the expression. As such, some languages leave it undefined to allow for optimization.</p>\n\n<p>In Perl, it's undefined (or at least undocumented) for many operators. It's only documented for the following:</p>\n\n<ul>\n<li>The comma operator (<code>,</code> and <code>=&gt;</code>): left to right</li>\n<li>Binary boolean operators (<code>and</code>, <code>or</code>, <code>&amp;&amp;</code>, <code>||</code> and <code>//</code>): left, then maybe right<sup>[1]</sup></li>\n<li>Conditional operators (<code>? :</code>): left, then either second or third<sup>[1]</sup></li>\n<li>List and scalar assignment operators (<code>=</code>): right, then left<sup>[2]</sup></li>\n<li>Binding operators (<code>=~</code> and <code>!~</code>): left, then right<sup>[3]</sup></li>\n</ul>\n\n<hr>\n\n<ol>\n<li>Required for short-circuited evaluation.</li>\n<li>Required for <code>my $x = $x;</code>.</li>\n<li>Required to function at all.</li>\n</ol>\n"}], "owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 43326594, "answer_count": 3, "score": 1, "last_activity_date": 1493509985, "creation_date": 1491824432, "last_edit_date": 1491829674, "question_id": 43322212, "link": "https://stackoverflow.com/questions/43322212/please-explain-perl-operator-associativity", "title": "Please explain perl operator associativity", "body": "<p>The <a href=\"http://perldoc.perl.org/perlop.html\" rel=\"nofollow noreferrer\">DOC</a> explains perl operator precedence and associativity. I am interesting at <code>-&gt;</code> and <code>*</code> operators. Both have <code>left</code> associativity.</p>\n\n<p>I have next example and it seems that <code>-&gt;</code> has right associativity. <strong>Not left</strong> as documentation states:</p>\n\n<pre><code>my @args;\nsub call { print \"call\\n\"; shift @args }\nsub test { print \"test\\n\"; 1 }\nsub t4 { print \"t4\\n\"; 4 }\n\n@args=( \\&amp;test, 2, 3 );\ncall()-&gt;( @args, t4 );\n\n\nsub m1 { print \"m1\\n\"; 2 }\nsub m2 { print \"m2\\n\"; 4 }\n\nm1()*(@args, m2);\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>t4\ncall\ntest\nm1\nm2\n</code></pre>\n\n<p><strong>Because <code>-&gt;</code> has left associativity I expect next output:</strong></p>\n\n<pre><code>call\nt4\ntest\nm1\nm2\n</code></pre>\n\n<p>What did I miss? Why <code>t4</code> is called before <code>call</code>?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491823655, "post_id": 43321673, "comment_id": 73707963, "body": "What&#39;s inside <code>@files</code>? Use Data::Dumper to check. Also note that the <code>.</code> is a meta character in regex. It means <i>any character</i>. So you might want to escape that in your pattern. On top of that, I wouldn&#39;t shell out for <code>date</code>, but use Time::Piece instead, which is included in the Perl core."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7819769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pgBax.jpg?s=128&g=1", "display_name": "akbharath", "link": "https://stackoverflow.com/users/7819769/akbharath"}, "edited": false, "score": 1, "creation_date": 1491825428, "post_id": 43322016, "comment_id": 73709081, "body": "Thanks for the answer, chomp $pattern and  Time::Piece module both worked fine.  can we combine pushing and pattern search to a single process so that  the array will have logs generated today  <code>find(      sub { push @files, $File::Find::name unless -d; },      $logDir ); foreach my $file (@files) {      if ($file =~ $pattern) { print &quot;$file\\n&quot;; } }</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491834971, "post_id": 43322016, "comment_id": 73716362, "body": "<code>my $pattern = &quot;harvester\\.log\\.$Date&quot;</code> doesn&#39;t escape the dots. In fact the backslashes don&#39;t make any difference to the resultant string at all. Since you&#39;re using the string as a regex pattern, it&#39;s best to compile it as such first. <code>my $pattern = qr&#47;harvester\\.log\\.$Date&#47;</code> is correct"}], "tags": [], "owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "is_accepted": true, "score": 1, "last_activity_date": 1491903668, "last_edit_date": 1491903668, "creation_date": 1491823802, "answer_id": 43322016, "question_id": 43321673, "link": "https://stackoverflow.com/questions/43321673/trying-to-push-log-files-to-an-array-with-perl-and-process-the-files/43322016#43322016", "title": "Trying to push log files to an array with perl and process the files", "body": "<p>Only one small mistake in your code please chomp the <code>$date</code> before making the <code>$pattern</code></p>\n\n<pre><code>chomp($Date);\nmy $pattern = qr/harvester\\.log\\.$Date/;\n</code></pre>\n\n<p>Or else chomp the <code>$pattern</code></p>\n\n<pre><code>my $pattern = qr/harvester\\.log\\.$Date/;\nchomp $pattern;\n</code></pre>\n\n<hr>\n\n<p>As per simbabque comment better use <a href=\"http://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow noreferrer\">Time::Piece</a> module so your code should be</p>\n\n<pre><code>my $Date = localtime-&gt;ymd(\"\") ;\n</code></pre>\n\n<p>And the final code is</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse File::Find;\nuse Time::Piece;\n\nmy @files;\nmy $logDir = \"yourdir\";\n\nmy $Date = localtime-&gt;ymd(\"\") ;\n\nmy $pattern = qr/harvester\\.log\\.$Date/; #dot will match the any character except new line so we should escape it. \n\nfind( \n    sub { push @files, $File::Find::name unless -d; }, \n    $logDir\n);\nforeach my $file (@files) {\n     if ($file =~ $pattern) { print \"$file\\n\"; }\n}\n</code></pre>\n\n<p>combining push and date check</p>\n\n<pre><code>find( \n    sub { push @files, $File::Find::name if($File::Find::name =~m/$pattern/ and -f) }, \n    $logDir\n);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7819769, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pgBax.jpg?s=128&g=1", "display_name": "akbharath", "link": "https://stackoverflow.com/users/7819769/akbharath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 43322016, "answer_count": 1, "score": 0, "last_activity_date": 1491903668, "creation_date": 1491822774, "last_edit_date": 1491823499, "question_id": 43321673, "link": "https://stackoverflow.com/questions/43321673/trying-to-push-log-files-to-an-array-with-perl-and-process-the-files", "title": "Trying to push log files to an array with perl and process the files", "body": "<p>The sample log files are as below,</p>\n\n<pre><code>/home/ajoy/alert-dc/testlogs/host1013/harvester.log.20170410   \n/home/ajoy/alert-dc/testlogs/host1013/harvester.log.20170303   \n/home/ajoy/alert-dc/testlogs/host1013/harvester.log.20170406   \n/home/ajoy/alert-dc/testlogs/host1011/harvester.log.20170307   \n/home/ajoy/alert-dc/testlogs/host1011/harvester.log.20170306   \n/home/ajoy/alert-dc/testlogs/host1012/harvester.log.20170405   \n/home/ajoy/alert-dc/testlogs/host1011/harvester.log.20170304   \n/home/ajoy/alert-dc/testlogs/host1014/harvester.log.20170305   \n/home/ajoy/alert-dc/testlogs/host1011/harvester.log.20170410   \n/home/ajoy/alert-dc/testlogs/host1011/harvester.log.20170303 \n</code></pre>\n\n<p>Trying to to push today's log files to an array. But it doesn't produce any output or any errors. </p>\n\n<p>The idea is to load today's log to array and process each file to search for \"Error\" and if it has an error then provide the output file name, file path and error (a sample one below),</p>\n\n<pre><code>HostName  |    Log Location  |      File Name   |    Error\nhost1011  |    /home/ajoy/alert-dc/testlogs/host1011/  | harvester.log.20170410    |    error: [Errno 110] Connection timed out\n</code></pre>\n\n\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse File::Find;\n\nmy @files;\nmy $logDir = \"/home/ajoy/alert-dc/testlogs\";\nmy $Date = `date +%Y%m%d`;\nmy $pattern = \"harvester.log.$Date\";\nchomp($Date);\nfind( \n    sub { push @files, $File::Find::name unless -d; }, \n    $logDir\n);\nforeach my $file (@files) {\n     if ($file =~ $pattern) { print \"$file\"; }\n}\n</code></pre>\n"}, {"tags": ["perl", "www-mechanize", "www-mechanize-firefox", "mozrepl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491835458, "post_id": 43320347, "comment_id": 73716737, "body": "<i>&quot; <code>MozRepl</code> does not allow backslashes or any special characters when putting the text into the text box&quot;</i> I think that&#39;s unlikely. What makes you think this is true? Also, I can see no backslashes in the message you&#39;re trying to display."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491899031, "post_id": 43320347, "comment_id": 73744059, "body": "Seems like if i put that string in single quotes it works, however i cannot interpolate the variable to complete the string (which is a directory)."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491899192, "post_id": 43320347, "comment_id": 73744183, "body": "<i>Unterminated string literal errors occur when any special characters are put in&quot;</i> The page you link to doesn&#39;t say that. I spent a lot of time with your previous question explaining how to escape special characters in the string, and you seem to have ignored all of that."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491899323, "post_id": 43320347, "comment_id": 73744268, "body": "@Borodin My previous question? I recall someone telling me what I have regurgitated, thats why I thought that it doesnt allow special characters."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491900927, "post_id": 43320347, "comment_id": 73745411, "body": "<a href=\"http://stackoverflow.com/questions/43142971\"><i>Issue with eval_in_page - Trying to interpolate an array</i></a>. You even have my code in this question <code>s&#47;([\\\\&quot;])&#47;\\\\$1&#47;g, s&#47;\\n&#47;\\\\n&#47;g for @para_text</code> but it&#39;s rendered mostly useless by your preceding <code>$para_text[0] =~ s&#47;[\\r\\n]&#47;&#47;gm</code>"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491984246, "post_id": 43320347, "comment_id": 73789112, "body": "@Borodin I needed that preceding line because the variables caused there to be newlines in that element, even with your code. I have just tried removing the preceding code to your line that you gave me, ran the program and still got the same error, with all due respect perhaps you arent well versed in this modules syntax?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492005486, "post_id": 43320347, "comment_id": 73805157, "body": "<i>&quot;with all due respect perhaps you arent well versed in this modules syntax?&quot;</i>  The module&#39;s syntax is Perl syntax. I have been writing Perl professionally for sixteen years and know it inside out. The problem is that you don&#39;t understand basic debugging techniques, and insist on using complex real-life data instead of testing with something simple to find out what escaping is necessary. You come up with nonsense like <i>&quot;<code>MozRepl</code> does not allow backslashes or any special characters&quot;</i>, and without a proper <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> I have had to rely on you to test for me."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492005787, "post_id": 43320347, "comment_id": 73805443, "body": "If this is how you are going to respond to my efforts to help you despite your pack of ability, then I will leave you to find someone else to help you. If you want anything more from me then please create an MCVE that uses a public site so that I can do the testing myself. You should also study the concept of escape characters and do your best to understand the code I have written, as it is doubtless the core of a proper solution."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492010802, "post_id": 43320347, "comment_id": 73809695, "body": "@Borodin You say that after rejecting that my issue even exists, And also it was you who told me that special characters arent allowed in what I was doing. MozRepl integrates with firefox through javascript. Thanks for your help. (I dont understand basic debugging techniques, did you when you were three weeks into perl?)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492011615, "post_id": 43320347, "comment_id": 73810320, "body": "<i>&quot;You say that after rejecting that my issue even exists&quot;</i> I am denying that `MozRepl has a thing about special characters, so in that sense no, your problem doesn&#39;t exist. See my recent answer. <i>&quot;it was you who told me that special characters arent allowed in what I was doing&quot;</i> I&#39;d like to know what I wrote that you misconstrued in that way. I said that JavaScript didn&#39;t allow literal newlines inside its strings, but that&#39;s a long way from saying that &quot;special characters&quot; aren&#39;t allowed in &quot;what you are doing&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492011719, "post_id": 43320347, "comment_id": 73810405, "body": "<i>&quot;I dont understand basic debugging techniques, did you when you were three weeks into perl?&quot;</i> Unless you&#39;ve never done any programming at all before, I expect you to know how to debug. Yes, I could debug a program long before Perl had even been imagined. If you&#39;re so naive with programming then you really shouldn&#39;t go around saying of others that you&#39;ve asked  to help you <i>&quot;perhaps you arent well versed in this modules syntax?&quot;</i>"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492094189, "post_id": 43320347, "comment_id": 73851256, "body": "Correction, &quot;Did you know how to debug three weeks into programming&quot; You also mentioned that the double quotes were causing the issue originally and that special characters arent allowed"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492111349, "post_id": 43320347, "comment_id": 73860931, "body": "Please add my tag to the start of comments addressed to me, otherwise I won&#39;t be alerted to your messages. I think you <i>still</i> don&#39;t understand what I have said. I wrote <i>&quot;I didn&#39;t realise that about JavaScript&quot;</i> That meant that I didn&#39;t realise that literal newlines within strings were illegal in JavaScript. It&#39;s very unusual, but that was my fault. You also can&#39;t put double quotes inside a double-quoted string; that applies to every language."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492111679, "post_id": 43320347, "comment_id": 73861106, "body": "I also wrote <i>&quot;You can escape all the special characters like that with <code>s&#47;([\\\\&quot;])&#47;\\\\$1&#47;g, s&#47;\\n&#47;\\\\n&#47;g for @para_text</code>&quot;</i> By <i>special characters like that</i> I meant &quot;like newline and double quote, and also backslash itself&quot;. I don&#39;t think most people would extrapolate that to meaning <b><i><code>MozRepl</code> does not allow backslashes or any special characters</i></b>, and therefore that I&#39;m <b><i>not well versed in this modules syntax</i></b>. I think I made it clear that the problem was a JavaScript one, and only very remotely to do with Perl or <code>WWW::Mechanize::Firefox</code> or <code>MozRepl</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492112011, "post_id": 43320347, "comment_id": 73861281, "body": "You can choose to be so naive that you shouldn&#39;t be expected to know how to debug your code, or so smart that you can call me out as lacking knowledge and expertise. You don&#39;t get to do both. If you can&#39;t even debug then don&#39;t dump your work on Stack Overflow: you must go away and <i>learn</i>. The problems that we get to fix here are generally from programmers with experience who have been unable to get past an issue despite their best efforts. I think you are far from putting your &quot;best efforts&quot; into this, and simply lack the skill and knowledge to fulfill your goals. We can&#39;t help you with that."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492005979, "post_id": 43364178, "comment_id": 73805615, "body": "Do you mean <code>s&#47;\\\\&#47;!&#47;g</code>?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492010614, "post_id": 43364178, "comment_id": 73809550, "body": "@Borodin No I dont, My code works, and if that code is a more efficient way of some sorts then I wouldnt expect to know it, something i need to read up on"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492011273, "post_id": 43364178, "comment_id": 73810057, "body": "So somewhere else you&#39;re replacing all exclamation marks <code>!</code> with backslashes again, and hoping the original text didn&#39;t contain any?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492011895, "post_id": 43364178, "comment_id": 73810532, "body": "This really doesn&#39;t make sense. It makes no difference at all If I add this statement to the code in your question, because there are no exclamation marks anywhere in <code>@para_text</code>, let alone <code>$para_text[4]</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492018700, "post_id": 43364178, "comment_id": 73814547, "body": "Please at least turn this into an answer that others can use. By far the most important utility of Stack Overflow is that a single answer will potentially help many people. This is of no use to anyone."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492094004, "post_id": 43364178, "comment_id": 73851109, "body": "@Borodin I removed the backslashes from my code and used the above line to substitute them in"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492094324, "post_id": 43364178, "comment_id": 73851362, "body": "This question can be deleted, I dont think its very helpful anyway for anyone who stumbles across it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492112420, "post_id": 43364178, "comment_id": 73861504, "body": "I&#39;ve edited that into your answer where it should have been in the first place, but it still makes no sense. If you&#39;ve removed the backslashes and there aren&#39;t any exclamation marks then there&#39;s still nothing to substitute. There&#39;s no need to write hack code like this, and I&#39;ve shown a working solution that keeps all backslashes and newlines from the original text. My only concern is that you&#39;ve probably done something horrible to get the contents of <code>@para_text</code> in the first place, and you haven&#39;t deigned to show that. Any old hack <b><i>will not do</i></b>; you should write software <i>properly</i>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492112626, "post_id": 43364178, "comment_id": 73861602, "body": "Your own answer has <i>three</i> downvotes, and none of them are mine. Perhaps you really are doing something wrongly?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492503746, "post_id": 43364178, "comment_id": 73989286, "body": "@Borodin Im not here to play your games and compete for votes, I couldnt care less, i got my solution, Bye"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492508390, "post_id": 43364178, "comment_id": 73992248, "body": "I feel that it is you who is playing games. I am simply trying to improve the content of Stack Overflow for others who happen upon this page. This answer doesn&#39;t make sense in the context of your question, as there are no exclamation marks anywhere to be substituted. Furthermore, there is no need to remove newlines and you can preserve the layout of the message as I described in my own answer. It is simply obstinate to ignore a solution that is far better quality than your own and has been demonstrated to work with test code and data."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492509000, "post_id": 43364178, "comment_id": 73992657, "body": "So if your code simply works, why am i here raising a problem? And why did altering code fix the issue if your code was perfect oh Holy Perl Master? &quot;Test code&quot; can never replicate my true environment."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492509546, "post_id": 43364178, "comment_id": 73993005, "body": "<i>&quot;why am I here raising a problem?&quot;</i> I don&#39;t know; you haven&#39;t explained yourself. <i>&#39;&quot;Test code&quot; can never replicate my true environment&#39;</i> no, but I was working with all the information I had, and I don&#39;t understand why you wouldn&#39;t provide more if it was incomplete. If my answer doesn&#39;t work for you then you should explain why so that I can improve it, not publish a nonsensical answer of your own."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1492510129, "post_id": 43364178, "comment_id": 73993436, "body": "As I&#39;ve already said, you don&#39;t have to take my word for this. Your answer has several downvotes as well, which should indicate to you that there is something wrong. It is you who are being so egotistical that you refuse to improve it even now."}], "tags": [], "owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "is_accepted": true, "score": -3, "last_activity_date": 1492112110, "last_edit_date": 1492112110, "creation_date": 1491985523, "answer_id": 43364178, "question_id": 43320347, "link": "https://stackoverflow.com/questions/43320347/how-to-enter-text-into-textbox-using-mozrepl-if-the-text-has-backslashes-in-it-a/43364178#43364178", "title": "How to enter text into textbox using MozRepl if the text has backslashes in it as part of the text?", "body": "<p>I removed the backslashes from my code and used this line to substitute them in</p>\n\n<pre><code>$para_text[4] =~ s{!}{\\\\}g;\n</code></pre>\n\n<p>Problem Solved. Substituting a character for the backslashes later on works.  </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1492011327, "last_edit_date": 1495540456, "creation_date": 1492011327, "answer_id": 43373935, "question_id": 43320347, "link": "https://stackoverflow.com/questions/43320347/how-to-enter-text-into-textbox-using-mozrepl-if-the-text-has-backslashes-in-it-a/43373935#43373935", "title": "How to enter text into textbox using MozRepl if the text has backslashes in it as part of the text?", "body": "<p>Take a look at this answer. I've had to create a local HTML file, and have assumed that you're using <code>&lt;textarea /&gt;</code>, as a simple <code>&lt;input type=\"text\" /&gt;</code> won't accept multiple lines</p>\n\n<h3>txtbdy.html</h3>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Textbox test&lt;/title&gt;\n    &lt;style type=\"text/css\"&gt;\n      #textbdy {\n        width:  800;\n        height: 300;\n        resize: none;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;form&gt;\n        &lt;textarea name=\"txtbdy\" id=\"textbdy\" /&gt;\n    &lt;/form&gt;\n  &lt;body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Here I've used the data from your question, with the exception of duplicating <code>$para_text[4]</code> to fix the interpolation of <code>$build</code> and to test double quotes (around <code>\"Athill\"</code>)</p>\n\n<h3>txtbdy.pl</h3>\n\n<pre><code>    use utf8;\n    use strict;\n    use warnings 'all';\n\n    use WWW::Mechanize::Firefox;\n\n    my $mech = WWW::Mechanize::Firefox-&gt;new(\n        tab      =&gt; qr/Textbox test/,\n        create   =&gt; 1,\n        activate =&gt; 1,\n    );\n    $mech-&gt;autoclose_tab( 0 );\n\n    $mech-&gt;get( 'file://E:/Perl/source/txtbdy.html' );\n\n    my $build  = \"BUILD\";\n    my $cut    = \"CUT\";\n    my $lifeid = \"LIFEID\";\n\n    my @para_text = (\n        \"The build of $build CUT$cut was started as requested and \nits progress can be monitored in Anthill here\",\n        \"\",\n        \"http://anthill:8080/tasks/project/BuildLifeTasks/viewBuildLife?\nbuildLifeId=$lifeid\",\n        \"\",\n        'If it completes successfully (Overall Anthill status will show as green \nComplete and all sub steps as green Success) the built output will be \navailable for deployment and testing by first copying the zip file from here \n\\\\\\mizar\\release\\AnthillRelease\\$build',\n        \"\",\n        qq{If it completes successfully (Overall \"Anthill\" status will show as green \nComplete and all sub steps as green Success) the built output will be \navailable for deployment and testing by first copying the zip file from here \n\\\\\\\\mizar\\\\release\\\\AnthillRelease\\\\$build},\n        \"\",\n        \"If the output exists but the anthill build was not completely \nsuccessful DO NOT attempt to copy and deploy the output. \\n\",\n        \"We will send the usual email detailing content etc. when the build \nfinishes. \\n\"\n    );\n\n    my $para_text = join \"\\n\", @para_text;\n\n    s/([\\\\\"])/\\\\$1/g, s/\\n/\\\\r\\\\n/g for $para_text;\n\n    $mech-&gt;eval_in_page( qq/document.getElementsByName(\"txtbdy\")[0].value = \"$para_text\"/ );\n</code></pre>\n\n<h3>output</h3>\n\n<p>This output correctly represents the \"awkward\" characters newline and double quote, which would invalidate the syntax of the JavaScript string. It uses exactly the same substitution that I proposed in my comments to your earlier question <a href=\"https://stackoverflow.com/questions/43142971\"><em>Trying to interpolate an array</em></a></p>\n\n<pre><code>s/([\\\\\"])/\\\\$1/g, s/\\n/\\\\n/g for @para_text;\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/qiaoo.png\" alt=\"output from txtbdy.pl\"></p>\n"}], "owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43364178, "answer_count": 2, "score": 0, "last_activity_date": 1492112110, "creation_date": 1491818873, "last_edit_date": 1491898730, "question_id": 43320347, "link": "https://stackoverflow.com/questions/43320347/how-to-enter-text-into-textbox-using-mozrepl-if-the-text-has-backslashes-in-it-a", "title": "How to enter text into textbox using MozRepl if the text has backslashes in it as part of the text?", "body": "<pre><code>my @para_text = (\n\"The build of $build CUT$cut was started as requested and \nits progress can be monitored in Anthill here\", \n\"\",\n\"http://anthill:8080/tasks/project/BuildLifeTasks/viewBuildLife?\nbuildLifeId=$lifeid\", \n\"\", \n'If it completes successfully (Overall Anthill status will show as green \nComplete and all sub steps as green Success) the built output will be \navailable for deployment and testing by first copying the zip file from here \n\\\\\\mizar\\release\\AnthillRelease\\$build', \n\"\", \"If the output exists but the anthill build was not completely \nsuccessful DO NOT attempt to copy and deploy the output. \\n\", \n\"We will send the usual email detailing content etc. when the build \nfinishes. \\n\");\n\n$para_text[0] =~ s/[\\r\\n]//gm;    # convert multiline to single line\n\n@para_text = join \"\\n\", @para_text;\n\ns/([\\\\\"])/\\\\$1/g, s/\\n/\\\\n/g for @para_text;\n\n$mech-&gt;eval_in_page( qq/document.getElementsByName(\"txtbdy\")[0].value = \"@para_text\", \"test\"/ );\n</code></pre>\n\n<p>I have the above code.</p>\n\n<p>The array holds a email template and the script is made around the Outlook webapp using <code>WWW::Mechanize::Firefox</code>.</p>\n\n<p>The email template has a directory in it which has backslashes.</p>\n\n<p><code>MozRepl</code> does not allow backslashes or any special characters when putting the text into the text box at the <code>$mech-&gt;eval_in_page</code> line.</p>\n\n<p>How can I put backslashes in the text if it's not allowed by the module?</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491773333, "post_id": 43310115, "comment_id": 73689149, "body": "Or <code>-&gt;at(&#39;div&#39;)-&gt;children(&#39;p&#39;)</code>"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491773809, "post_id": 43310115, "comment_id": 73689279, "body": "@Borodin yes, this is even better, because the my <code>find</code> will find the deeper nested <code>p</code>s too."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491774285, "post_id": 43310115, "comment_id": 73689397, "body": "That&#39;s what I thought. But the OP doesn&#39;t want to tell us anything useful about their problem so it&#39;s hard to tell what is required. I&#39;d like to know if they&#39;re <i>really</i> trying to process malformed HTML or something else. It&#39;s a poor question really."}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 3, "last_activity_date": 1491763694, "last_edit_date": 1491763694, "creation_date": 1491761086, "answer_id": 43310115, "question_id": 43308854, "link": "https://stackoverflow.com/questions/43308854/mojodom-manipulation/43310115#43310115", "title": "Mojo::DOM manipulation", "body": "<p>You probably want:</p>\n\n<pre><code>perl -Mojo -E'\nsay for @{ x(\"\n    &lt;div&gt;\n    &lt;p&gt;1&lt;div&gt;D&lt;/div&gt;&lt;/p&gt;\n\n    &lt;p&gt;2&lt;/p&gt;\n    &lt;/div&gt;\n  \")-&gt;find(\"div &gt; p\")}\n'\n</code></pre>\n\n<p>output</p>\n\n<pre><code>&lt;p&gt;1&lt;/p&gt;\n&lt;p&gt;2&lt;/p&gt;\n</code></pre>\n\n<p>But i'm unsure that this is what do you want..</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1491764941, "last_edit_date": 1491764941, "creation_date": 1491763610, "answer_id": 43310551, "question_id": 43308854, "link": "https://stackoverflow.com/questions/43308854/mojodom-manipulation/43310551#43310551", "title": "Mojo::DOM manipulation", "body": "<blockquote>\n  <p>Checked <code>children</code> method, but it also returns all descending nodes</p>\n</blockquote>\n\n<p>The example you show tries to parse invalid HTML, which has an illegal <code>&lt;div&gt;</code> element inside a <code>&lt;p&gt;</code> paragraph. The parser solves this by moving the closing <code>&lt;/p&gt;</code> to before the opening <code>&lt;div&gt;</code>, which is pretty much what a real browser would do. So the call to <code>children</code> is correctly finding all three children of the top-level <code>&lt;div&gt;</code>, not all descendants as you surmised</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Mojo::DOM;\n\nsay Mojo::DOM-&gt;new(&lt;&lt;END)-&gt;at('div');\n&lt;div&gt;\n  &lt;p&gt;1&lt;div&gt;D&lt;/div&gt;&lt;/p&gt;\n\n  &lt;p&gt;2&lt;/p&gt;\n&lt;/div&gt;\nEND\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>&lt;div&gt;\n  &lt;p&gt;1&lt;/p&gt;&lt;div&gt;D&lt;/div&gt;\n\n  &lt;p&gt;2&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But you don't need it to remove the first child <code>&lt;p&gt;</code> element of a <code>&lt;body&gt;</code> element. That would look like this</p>\n\n<pre><code>$dom-&gt;at('body &gt; p')-&gt;remove\n</code></pre>\n\n<p>To remove the <em>second</em> <code>&lt;p&gt;</code> child of a <code>&lt;div&gt;</code> would look like this</p>\n\n<pre><code>$dom-&gt;find('div &gt; p')-&gt;[1]-&gt;remove\n</code></pre>\n\n<p>but the <code>&lt;div&gt;</code> element really needs a better specification</p>\n"}], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "accepted_answer_id": 43310115, "answer_count": 2, "score": 0, "last_activity_date": 1491764941, "creation_date": 1491753617, "question_id": 43308854, "link": "https://stackoverflow.com/questions/43308854/mojodom-manipulation", "title": "Mojo::DOM manipulation", "body": "<p>I would like to remove second <code>&lt;p&gt;</code> node and its content from:</p>\n\n<pre><code> &lt;div&gt;\n   &lt;p&gt;1&lt;div&gt;D&lt;/div&gt;&lt;/p&gt;\n\n   &lt;p&gt;2&lt;/p&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p>Checked <a href=\"http://mojolicious.org/perldoc/Mojo/DOM#children\" rel=\"nofollow noreferrer\">children</a> method, but it also returns all descending nodes, while I would like to get first level <code>&lt;p&gt;</code> nodes.</p>\n\n<pre><code>perl -Mojo -E'\nsay for @{ x(\"\n    &lt;div&gt;\n    &lt;p&gt;1&lt;div&gt;D&lt;/div&gt;&lt;/p&gt;\n\n    &lt;p&gt;2&lt;/p&gt;\n    &lt;/div&gt;\n  \")-&gt;at(\"div\")-&gt;children }\n'\n</code></pre>\n\n<p>output</p>\n\n<pre><code>&lt;p&gt;1&lt;/p&gt;\n&lt;div&gt;D&lt;/div&gt;\n&lt;p&gt;2&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["perl", "nan", "division"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491741442, "post_id": 43306483, "comment_id": 73678256, "body": "Could you add more code so we can try reproduce the behavior?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491741685, "post_id": 43306483, "comment_id": 73678320, "body": "<code>looks_like_number</code> isn&#39;t very useful here. It simply stringifies the value and confirms that the resultant string &quot;looks like a number&quot; which, having been derived from one, it is pretty much bound to do. As has been said, we can&#39;t help you much unless you show the code that generated <code>$sum_drmsd</code> and <code>$k_dists_num</code>."}, {"owner": {"reputation": 49, "user_id": 7827408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f62752248a339901e5c851fe17f2b2?s=128&d=identicon&r=PG&f=1", "display_name": "EKtee", "link": "https://stackoverflow.com/users/7827408/ektee"}, "edited": false, "score": 0, "creation_date": 1491742267, "post_id": 43306483, "comment_id": 73678492, "body": "Thank you. $k_dists_num is a value immediately received by the function as an argument and $sum_drmsd is intialized to 0 and then used in a loop to add values that are received from a matrix. It would me many lines to post all the &quot;participating&quot; code. So, I assume there is no somewhat easy way to detect what may be going wrong in that final level of forming $num1."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1491757115, "post_id": 43306483, "comment_id": 73683428, "body": "show the output of <code>use Data::Dumper; print Data::Dumper-&gt;new([$sum_drmsd,$k_dists_num], [&quot;sum_drmsd&quot;,&quot;k_dists_num&quot;])-&gt;Dump, $Math::BigFloat::VERSION, &quot;\\n&quot;</code>; that should help us duplicate the problem"}, {"owner": {"reputation": 49, "user_id": 7827408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f62752248a339901e5c851fe17f2b2?s=128&d=identicon&r=PG&f=1", "display_name": "EKtee", "link": "https://stackoverflow.com/users/7827408/ektee"}, "edited": false, "score": 0, "creation_date": 1491778278, "post_id": 43306483, "comment_id": 73690375, "body": "Thank you. I added the output in each case."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491778820, "post_id": 43306483, "comment_id": 73690506, "body": "Are you setting <code>precision</code> or <code>accuracy</code> (or some such) anywhere?  That <code>10</code> could be getting rounded to <code>0</code>.   How does this behave if you use the module&#39;s <code>bdiv</code> instead of <code>&#47;</code>?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 2, "creation_date": 1491786773, "post_id": 43306483, "comment_id": 73692088, "body": "Unable to reproduce this.  Which version of perl?  Which version of Math::BigFloat?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1491811356, "post_id": 43306483, "comment_id": 73699970, "body": "I think this needs an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - we really need something reproducible."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1491831725, "last_edit_date": 1491831725, "creation_date": 1491831257, "answer_id": 43324668, "question_id": 43306483, "link": "https://stackoverflow.com/questions/43306483/mathbigfloat-sometimes-returns-nan-from-a-division/43324668#43324668", "title": "Math::BigFloat sometimes returns NaN from a division", "body": "\n\n<p>I'm sorry I've taken so long to get around to looking at this.</p>\n\n<p>The problem is that <code>use Math::BigFloat</code> doesn't automatically make all floating point arithmetic use the module; it just provides the code for creating <code>Math::BigFloat</code> objects if you write your program that way, like any other object-oriented module</p>\n\n<p>The module <em>overloads</em> the arithmetic operators, so that division <code>$x / $y</code> is executed as a call to <code>$x-&gt;bdiv($y)</code>. From that it's much clearer that <code>$x</code> must be an object (as simple numbers don't have a <code>bdiv</code> method) but in fact <code>$y</code> may be an object, a number, or a numeric string. The module will convert the second parameter to an object if a simple number is passed</p>\n\n<p>In your code <code>$sum_drmsd</code> is not a <code>Math::BigFloat</code> object, it is just a floating point value. That is why I asked you where the values came from, but your answer doesn't really help much as I need to know their <em>origins</em></p>\n\n<blockquote>\n  <p><code>$k_dists_num</code> is a value immediately received by the function as an argument and <code>$sum_drmsd</code> is intialized to 0 and then used in a loop to add values that are received from a matrix</p>\n</blockquote>\n\n<p>From the dumps you show, <code>$k_dists_num</code> is a <code>Math::BigInt</code> object, which is fine. But <code>$sum_drmsd</code> needs to be initialised to <code>Math::BigFloat-&gt;bzero</code> instead of just <code>0</code>, otherwise you're just accumulating ordinary numbers</p>\n\n<p>This code demonstrates the problem</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse Math::BigFloat;\n\nmy $k_dists_num = Math::BigInt-&gt;new('10');\nmy $sum_drmsd   = 0;\n\n$sum_drmsd += 10.9829799095931;\n\nmy $quot = $sum_drmsd / $k_dists_num;\n\nprint \"sum = $sum_drmsd / $k_dists_num = $quot\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sum = 10.9829799095931 / 10 = NaN\n</code></pre>\n\n<p>But if I change just the line</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my $sum_drmsd = 0\n</code></pre>\n\n<p>to</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $sum_drmsd = Math::BigFloat-&gt;bzero\n</code></pre>\n\n<p>then I get this correct output instead</p>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>sum = 10.9829799095931 / 10 = 1.09829799095931\n</code></pre>\n\n<p>Note that I also recommend removing the <code>:constant</code> option, as otherwise it's easy to become confused over which variables are <code>Math::BigFloat</code> objects and which are simple numbers (as you have done!)</p>\n"}], "owner": {"reputation": 49, "user_id": 7827408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57f62752248a339901e5c851fe17f2b2?s=128&d=identicon&r=PG&f=1", "display_name": "EKtee", "link": "https://stackoverflow.com/users/7827408/ektee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1491832033, "creation_date": 1491739570, "last_edit_date": 1491832033, "question_id": 43306483, "link": "https://stackoverflow.com/questions/43306483/mathbigfloat-sometimes-returns-nan-from-a-division", "title": "Math::BigFloat sometimes returns NaN from a division", "body": "<p>I can't figure out why the result of a division is NaN, when previously, the result is the expected, while seemingly performing the same division.</p>\n\n<p>When removing Math::BigFloat, Nan is not returned. But why is that happening?</p>\n\n<p>The corresponding code (Perl):</p>\n\n<pre><code>use Math::BigFloat ':constant';\n\n...\n\nmy $num1 = $sum_drmsd / $k_dists_num;\nprint \"\\nsum = $sum_drmsd DIV BY $k_dists_num = $num1\\n\";\n\nif(looks_like_number($sum_drmsd)){\n\n    print \"numerator check -&gt;&gt; yes, is num.\";\n}\n\nif (looks_like_number($k_dists_num)){\n    print \"\\ndenominator check -&gt;&gt; yes, is num.\";\n}\nprint \"\\n\";\n</code></pre>\n\n<p>The results:</p>\n\n<pre><code>sum = 11.2691792732961 DIV BY 10 = 1.12691792732961\nnumerator check -&gt;&gt; yes, is num.\ndenominator check -&gt;&gt; yes, is num.\n\nsum = 13.4679575690216 DIV BY 10 = 1.34679575690216\nnumerator check -&gt;&gt; yes, is num.\ndenominator check -&gt;&gt; yes, is num.\n\nsum = 10.9829799095931 DIV BY 10 = 1.09829799095931\nnumerator check -&gt;&gt; yes, is num.\ndenominator check -&gt;&gt; yes, is num.\n\nsum = 11.2691792732961 DIV BY 10 = NaN\nnumerator check -&gt;&gt; yes, is num.\ndenominator check -&gt;&gt; yes, is num.\n\nsum = 13.4679575690216 DIV BY 10 = NaN\nnumerator check -&gt;&gt; yes, is num.\ndenominator check -&gt;&gt; yes, is num.\n\nsum = 10.9829799095931 DIV BY 10 = NaN\nnumerator check -&gt;&gt; yes, is num.\ndenominator check -&gt;&gt; yes, is num.\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Data::Dumper output in each case:</p>\n\n<pre><code>$sum_drmsd = '10.9829799095931';\n$k_dists_num = '10';\n1.9997\n\n$sum_drmsd = '10.9829799095931';\n$k_dists_num = bless( {\n                        'sign' =&gt; '+',\n                        'value' =&gt; [\n                                     10\n                                   ]\n                      }, 'Math::BigInt' );\n1.9997\n</code></pre>\n"}, {"tags": ["perl", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 701, "user_id": 962265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df894f01b77470d0d3071e11e7f607da?s=128&d=identicon&r=PG", "display_name": "Jarrod Funnell", "link": "https://stackoverflow.com/users/962265/jarrod-funnell"}, "is_accepted": true, "score": 6, "last_activity_date": 1491722463, "last_edit_date": 1491722463, "creation_date": 1491721960, "answer_id": 43304030, "question_id": 43303979, "link": "https://stackoverflow.com/questions/43303979/extract-all-positive-and-negative-integers-in-a-string-in-perl/43304030#43304030", "title": "Extract all positive and negative integers in a string in Perl", "body": "<p>When extracting, you often want to look for what you <em>do</em> want, instead of splitting on what you don't want. Try a global regex match for this case:</p>\n\n<pre><code># Match each integer-like value, including sign:\nmy @b = $a =~ /-?\\d+/g;\n</code></pre>\n\n<p>Seems to do the trick.</p>\n"}], "owner": {"reputation": 123, "user_id": 2362482, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/605c788d71f9716e57ad373f2754bceb?s=128&d=identicon&r=PG", "display_name": "Maximus", "link": "https://stackoverflow.com/users/2362482/maximus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 43304030, "answer_count": 1, "score": 0, "last_activity_date": 1491722463, "creation_date": 1491721538, "last_edit_date": 1491722462, "question_id": 43303979, "link": "https://stackoverflow.com/questions/43303979/extract-all-positive-and-negative-integers-in-a-string-in-perl", "title": "Extract all positive and negative integers in a string in Perl", "body": "<p>I want to extract all positive and negative integers in a string using Perl. The string contains the following character and spaces - , { }</p>\n\n<p>Eg :</p>\n\n<pre><code>$a = \"{ { 0,256,0,0 },{ -2,256,2,0 },{ -4,256,4,0 },{ -6,255,7,0 }\n     ,{ -7,254,10,-1 },{ -8,252,13,-1 },{ -10,251,16,-1 }\n     ,{ -10,249,19,-2 },{ -12,247,23,-2 },{ -14,245,27,-2 }\n     ,{ -14,242,31,-3 },{ -15,239,35,-3 },{ -15,236,39,-4 }\n     ,{ -16,233,44,-5 },{ -17,230,48,-5 },{ -17,226,53,-6 }\n     ,{ -18,222,58,-6 },{ -18,218,63,-7 }\";\n</code></pre>\n\n<p>my o/p should be array <code>@b</code> containing 0, 256,0,0,-2,256,2,0 ... etc as its elements</p>\n\n<p>I have tried the following command but spaces/null elements are also added to my o/p array.</p>\n\n<pre><code>my @b = split (/[,{}\\s]/,$a);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491703295, "post_id": 43302184, "comment_id": 73669840, "body": "&quot;Incorrect&quot; for ampl? Then that&#39;s ampl&#39;s business. You are feeding an external program with data. It can do whatever it wants. It may exit with particular codes and you can catch that, but if it doesn&#39;t there is not much that the calling code can do. Do you have control over ampl source?"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491703559, "post_id": 43302184, "comment_id": 73669889, "body": "<code>ampl</code>&#39;s exit code will be nonzero when there&#39;s an error; still, I figure if I&#39;m piping things into <code>ampl</code>&#39;s STDIN, I can read things back from its STDERR (or STDOUT)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1491704173, "post_id": 43302184, "comment_id": 73669995, "body": "See <a href=\"http://stackoverflow.com/questions/10765311/how-to-read-to-and-write-from-a-pipe-in-perl\">How to read to and write from a pipe in Perl</a> (they asked about getting stdout but getting stderr is similar)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491705508, "post_id": 43302184, "comment_id": 73670199, "body": "Since you mention <code>STDERR</code> I take it that the <code>ampl</code> <i>doesn&#39;t</i> write to it on error, otherwise it would wind up on the terminal.  That&#39;s a problem. If, instead, you want to catch it in the calling program (rather than leaving it to go wherever it wants), then there are many posts about that (redirect X from an external program), for example the one <a href=\"http://stackoverflow.com/users/176646/thissuitisblacknot\">ThisSuitIsBlackNot</a> linked."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491705858, "post_id": 43302184, "comment_id": 73670265, "body": "Also, there are modules ... see for example <a href=\"http://search.cpan.org/~rjbs/IPC-Run3-0.048/lib/IPC/Run3.pm\" rel=\"nofollow noreferrer\">IPC::Run3</a> (and the linked post shows <code>IPC::Open3</code>)"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1491705944, "post_id": 43302184, "comment_id": 73670285, "body": "Right--though I may have more than one command that needs to be a part of a single interactive AMPL session."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491712063, "post_id": 43302184, "comment_id": 73671316, "body": "I don&#39;t understand that &quot;<i>more than one command</i>&quot; (not an AMPL user), but I can post a short example of how to use <code>IPC::Run3</code>. With a module like that you know for fact that you are hearing back from <code>AMPL</code>.   But it&#39;d be good to know what &quot;more than one command&quot; means ...?"}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1491712346, "post_id": 43302184, "comment_id": 73671365, "body": "That&#39;d actually be great. I updated my question to show what &quot;more than one command means&quot;: streaming commands into AMPL the same way one would stream them into the Python or <code>irb</code> REPL."}], "answers": [{"comments": [{"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1491712838, "post_id": 43303103, "comment_id": 73671447, "body": "This is really illuminating. Where do the <code>printf</code>s fit into this?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1491713215, "post_id": 43303103, "comment_id": 73671518, "body": "@aryamccarthy  Added code for your case.  Your <code>printf</code> feed the program, right?  Here that is done by the module -- it pipes whatever is in <code>@input</code> into the program it invokes (the syntax is to use <code>\\@input</code>). It also takes whatever the program prints and puts it into <code>$out</code> (and <code>$err</code>, if any)."}, {"owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1491713649, "post_id": 43303103, "comment_id": 73671588, "body": "I&#39;ve updated the question again to show the intent: this isn&#39;t passing command-line arguments to an invocation of <code>ampl</code>. It&#39;s interacting with the AMPL interpreter."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 0, "creation_date": 1491715182, "post_id": 43303103, "comment_id": 73671843, "body": "@aryamccarthy  Thanks for the reminder, adjusted some statements and code.  The module feeds the <code>STDIN</code> ... I am checking whether <i>interactive</i> actually works."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "edited": false, "score": 1, "creation_date": 1491716297, "post_id": 43303103, "comment_id": 73672038, "body": "@aryamccarthy  Corrected: need <code>undef</code> (for stdout) to see the output of the invoked program on <code>STDOUT</code>.  (The <code>\\undef</code> that I had sends it to <code>&#47;dev&#47;null</code> instead.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1491967344, "last_edit_date": 1495542336, "creation_date": 1491712678, "answer_id": 43303103, "question_id": 43302184, "link": "https://stackoverflow.com/questions/43302184/how-to-read-errors-from-a-child-process/43303103#43303103", "title": "How to read errors from a child process?", "body": "<p>Use a module, for example <a href=\"http://search.cpan.org/~rjbs/IPC-Run3-0.048/lib/IPC/Run3.pm\" rel=\"nofollow noreferrer\">IPC::Run3</a>, to get all that the calling program prints to streams.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse IPC::Run3;\n\nmy @cmd = ('xargs', '0', 'cat');  # display a file which name is piped in\n#my @cmd = ('wc', 'c');            # count characters in the passed string\n\nmy $cmd_stdin = shift || $0;      # file name, from cmdline or this script\n\nrun3 \\@cmd, [$cmd_stdin], \\my $out, \\my $err;\n\nprint $out if $out;  # Whatever was written by command to STDOUT\nprint $err if $err;  # ... and to STDERR\n</code></pre>\n\n<p>If the invoked program does not write to standard streams then that's out of caller's hands.</p>\n\n<p>In order to include a check of whether the command itself worked see <a href=\"https://stackoverflow.com/questions/40776912/how-to-test-the-exit-status-from-ipcrun3/40777096#4077709653\">this post</a>.</p>\n\n<hr>\n\n<p>With the question update, to feed strings to <code>STDIN</code> of <code>AMPL</code></p>\n\n<pre><code>my @cmd = ('ampl');\n\nmy @stdin = (\"arg_1\\n\", \"arg_2\\n\", ..., \"data $ARGV[0];\\n\");\n\nrun3 \\@cmd, \\@stdin, undef, \\my $stderr;\n</code></pre>\n\n<p>The syntax requires that the input be an arrayref.  The program's output is left to go to <code>STDOUT</code> by setting <code>undef</code> above, since if it's collected into <code>$out</code> variable it is not seen in real time.</p>\n"}], "owner": {"reputation": 7381, "user_id": 7802200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Adik7.png?s=128&g=1", "display_name": "Arya McCarthy", "link": "https://stackoverflow.com/users/7802200/arya-mccarthy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 43303103, "answer_count": 1, "score": 2, "last_activity_date": 1491967344, "creation_date": 1491702346, "last_edit_date": 1491940438, "question_id": 43302184, "link": "https://stackoverflow.com/questions/43302184/how-to-read-errors-from-a-child-process", "title": "How to read errors from a child process?", "body": "<p>I have a Perl script to call another program. One section looks like this:</p>\n\n<pre><code>open(AMPL,\"|ampl\");\nselect(AMPL);\nprintf \"option solver cplex;\\n\";\nprintf \"var x1;\\n\"\nprintf \"var x2;\\n\"\nprintf \"minimize z: 3*x1 + 2*x2;\\n\";\nprintf \"another_command;\\n\";\nprintf \"data $ARGV[0];\\n\";\n# More printfs\nclose(AMPL);\n</code></pre>\n\n<p>This code fails silently if instructions passed to <code>ampl</code> (that is, <a href=\"https://en.wikipedia.org/wiki/AMPL\" rel=\"nofollow noreferrer\">AMPL</a>) are incorrect. Can the failures be either printed to STDERR or otherwise caught to abort the script?</p>\n\n<hr>\n\n<p>EDIT: To clarify, this code pipes into an interactive session with the AMPL interpreter:</p>\n\n<pre><code>$ ampl\nampl: option solver cplex;\n&gt;&gt;&gt; var x1;\n&gt;&gt;&gt; var x2;\n&gt;&gt;&gt; minimize z: 3*x1 + 2*x2;\n&gt;&gt;&gt; another_command;\n&gt;&gt;&gt; data foo;\n</code></pre>\n"}, {"tags": ["perl", "loops", "hash"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491690836, "post_id": 43300911, "comment_id": 73667499, "body": "I am not sure I understand..You want to find all car companies that have a sedan version, then all companies that have a hatchback version and so on?"}, {"owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491693671, "post_id": 43300911, "comment_id": 73668110, "body": "lets say i dont know which versions each car company have. How can i get the versions. I will have a sub and when i give this hash to sub it will tell me ford company has sedan,hatchnack and truck versions."}], "answers": [{"tags": [], "owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "is_accepted": false, "score": 1, "last_activity_date": 1491727452, "last_edit_date": 1491727452, "creation_date": 1491695813, "answer_id": 43301595, "question_id": 43300911, "link": "https://stackoverflow.com/questions/43300911/iterating-on-hash-keys-in-perl/43301595#43301595", "title": "Iterating on hash keys in perl", "body": "<p>I solved it.</p>\n\n<pre><code>foreach my $key (keys %{$myhash-&gt;{'cars'}-&gt;{'ford'}}) { print $key.\"\\n\"; }\n</code></pre>\n\n<p>this gives:</p>\n\n<pre><code>sedan\nhatchback\ntruck\n</code></pre>\n\n<p>This was the output I wanted.</p>\n"}], "owner": {"reputation": 483, "user_id": 7095217, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/35256b21d3b6144cf17fefaf37059e92?s=128&d=identicon&r=PG&f=1", "display_name": "ivbtar", "link": "https://stackoverflow.com/users/7095217/ivbtar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491727912, "creation_date": 1491689966, "last_edit_date": 1491727912, "question_id": 43300911, "link": "https://stackoverflow.com/questions/43300911/iterating-on-hash-keys-in-perl", "title": "Iterating on hash keys in perl", "body": "<p>I have a hash like below.</p>\n\n<pre><code>(\n    'cars' =&gt; {\n        'citroen' =&gt; {\n            'sedan'    =&gt; { 'color' =&gt; 'red'   },\n            'hatchback =&gt; { 'color' =&gt; 'white' },\n            'truck'    =&gt; { 'color' =&gt; 'black' },\n        },\n        'ford' =&gt; {\n            'sedan'    =&gt; { 'color' =&gt; 'red'   },\n            'hatchback =&gt; { 'color' =&gt; 'white' },\n            'truck'    =&gt; { 'color' =&gt; 'black' },\n        },\n    },\n)\n</code></pre>\n\n<p>Car versions are sedan, hatchback and truck I want to get these versions and iterate over them. If sedan do.... If hatchback do...... If truck do....</p>\n\n<p>I tried:</p>\n\n<pre><code>foreach my $key ( keys %{ $myhash-&gt;{'cars'}-&gt;{$carCompany} } ) { \n    print \"\\nCarVersion:\" . $key;\n}\n</code></pre>\n\n<p>But I couldn't get these versions.</p>\n"}, {"tags": ["perl", "newline"], "answers": [{"comments": [{"owner": {"reputation": 1140, "user_id": 5459638, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/y93bL.png?s=128&g=1", "display_name": "XavierStuvw", "link": "https://stackoverflow.com/users/5459638/xavierstuvw"}, "edited": false, "score": 0, "creation_date": 1491685259, "post_id": 43300117, "comment_id": 73666223, "body": "Not inclined to edit the structure of the code for portability in future discussion (option 2). Re option 1, where should I add <code>chomp($program)</code> precisely? I see that the output of a <code>print chomp($program)</code> is a number which I did not expect"}, {"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "reply_to_user": {"reputation": 1140, "user_id": 5459638, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/y93bL.png?s=128&g=1", "display_name": "XavierStuvw", "link": "https://stackoverflow.com/users/5459638/xavierstuvw"}, "edited": false, "score": 2, "creation_date": 1491687831, "post_id": 43300117, "comment_id": 73666832, "body": "@XavierStuvw as per <code>perldoc -f chomp</code>, it returns the number of (newline) characters removed. It modifies the passed value(s), so just <code>chomp($value)</code> and use <code>$value</code>. I&#39;d recommend the <code>File::Basename</code> approach, though."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491732309, "post_id": 43300117, "comment_id": 73675720, "body": "<i>&quot;Not inclined to edit the structure of the code for portability&quot;</i> You have the choice between your code being correct or &quot;portably&quot; faulty."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1491684025, "creation_date": 1491684025, "answer_id": 43300117, "question_id": 43300094, "link": "https://stackoverflow.com/questions/43300094/how-not-to-get-a-new-line-in-the-assignment-with-a-call-to-a-shell-utility/43300117#43300117", "title": "How NOT to get a new line in the assignment with a call to a shell utility", "body": "<p>You could remove it</p>\n\n<pre><code>chomp($program);\n</code></pre>\n\n<p>Better yet, use</p>\n\n<pre><code>use File::Basename qw( basename );\n\nsub example {\n    if ( my $program = $ENV{FC} ) {\n        return basename($program);\n    }\n\n    for my $program (qw( gfortran g95 )) {\n        return $program if `which $program`;\n    }\n\n    return undef;\n}\n</code></pre>\n"}], "owner": {"reputation": 1140, "user_id": 5459638, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/y93bL.png?s=128&g=1", "display_name": "XavierStuvw", "link": "https://stackoverflow.com/users/5459638/xavierstuvw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523892720, "creation_date": 1491683825, "last_edit_date": 1523892720, "question_id": 43300094, "link": "https://stackoverflow.com/questions/43300094/how-not-to-get-a-new-line-in-the-assignment-with-a-call-to-a-shell-utility", "title": "How NOT to get a new line in the assignment with a call to a shell utility", "body": "<h3>Situation</h3>\n\n<p>I am absolutely new to Perl and have to modify a subroutine in an existing script. The starting point is:</p>\n\n<pre><code>sub example {\n\n    my $program = $ENV{'FC'};\n\n    unless ( $variable ) {\n\n        foreach ( 'gfortran', 'g95' ) {\n            $compiler = $_;\n            my $path  = `which $program`;\n            last if $path;\n        }\n    }\n\n    return $program;\n}\n</code></pre>\n\n<h3>Issue</h3>\n\n<p>This works perfectly when <code>FC=gfortran</code> and returns <code>gfortran</code>. In my case, however, the same environment variable has to be <code>FC=\\opt\\gcc\\bin\\gfortran</code></p>\n\n<h3>Research</h3>\n\n<p>I have tried to change the second line </p>\n\n<pre><code>my $program = $ENV{'FC'};  # original \n</code></pre>\n\n<p>into</p>\n\n<pre><code>my $program = `basename $ENV{'FC'}`;  # with a call to a shell utility\n</code></pre>\n\n<p>which works out as desired to an extent, since the function output contains an annoying extra new line:</p>\n\n<pre><code>'gfortran\n '\n</code></pre>\n\n<p>that spoils the functioning of the code father down. The assignment should be a plain <code>gfortran</code>.</p>\n\n<h3>Question</h3>\n\n<p>How can I suppress that automatic new line?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1491664251, "post_id": 43295019, "comment_id": 73658123, "body": "Your program doesn&#39;t even try to count individual letters. Perl strings aren&#39;t indexable like they are in other languages, but if they were then all your code would do is to print each character in a line on its own. I&#39;m sure this isn&#39;t a professional problem and you&#39;re probably in the process of learning to program, so I don&#39;t think that just giving you a solution will help you to learn anything."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491664904, "post_id": 43295019, "comment_id": 73658342, "body": "<code>echo &#39;Testing 123 for my letter count program.&#39; | perl -E &#39;$c{$_}++ for (map {lc} grep &#47;\\w&#47;, split &#47;&#47;, &lt;&gt;); say &quot;$_ = $c{$_}&quot; for keys %c&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "is_accepted": false, "score": 0, "last_activity_date": 1491675760, "creation_date": 1491675760, "answer_id": 43298776, "question_id": 43295019, "link": "https://stackoverflow.com/questions/43295019/how-to-get-some-alphabet-on-string-array-count-some-alphabet-in-perl/43298776#43298776", "title": "how to get some alphabet on string array &amp; count some alphabet in perl", "body": "<pre><code>#!/usr/bin/perl\nuse strict; use warnings;\n\nmy $input = 'Testing 123 for my letter count program.';\nmy %hash = ();\nmap { $hash{lc($_)}++ } grep /[a-zA-Z]/, split('', $input);\nprint \"Output: \";\nprint \"$_ = $hash{$_} \" for(keys %hash);\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>Output: e = 3 y = 1 a = 1 r = 4 s = 1 g = 2 c = 1 n = 2 l = 1 t = 5 i = 1 p = 1 f = 1 m = 2 u = 1 o = 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 7754747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vLYWI.jpg?s=128&g=1", "display_name": "Nicoraxes", "link": "https://stackoverflow.com/users/7754747/nicoraxes"}, "edited": false, "score": 0, "creation_date": 1491735779, "post_id": 43299572, "comment_id": 73676659, "body": "oh can you explain about &quot;my %seen&quot; and &quot;my @order&quot; in your code?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 7, "user_id": 7754747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vLYWI.jpg?s=128&g=1", "display_name": "Nicoraxes", "link": "https://stackoverflow.com/users/7754747/nicoraxes"}, "edited": false, "score": 0, "creation_date": 1491807334, "post_id": 43299572, "comment_id": 73697814, "body": "<code>@order</code> holds unique letters from the sentence and <code>%seen</code> hash holds number of occurrence for each letter. Please check <a href=\"https://perlmaven.com/unique-values-in-an-array-in-perl\" rel=\"nofollow noreferrer\">perlmaven.com/unique-values-in-an-array-in-perl</a>"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 1, "last_activity_date": 1491680345, "creation_date": 1491680345, "answer_id": 43299572, "question_id": 43295019, "link": "https://stackoverflow.com/questions/43295019/how-to-get-some-alphabet-on-string-array-count-some-alphabet-in-perl/43299572#43299572", "title": "how to get some alphabet on string array &amp; count some alphabet in perl", "body": "<pre><code>use strict;\nuse warnings;\n\nmy $input = 'Testing 123 for my letter count program.';\nmy %seen;\nmy @order = grep { !$seen{$_}++ } lc($input) =~ /([a-z])/ig;\nprint \"$_ = $seen{$_}\\n\" for @order;\n</code></pre>\n\n<p>output</p>\n\n<pre><code>t = 5\ne = 3\ns = 1\ni = 1\nn = 2\ng = 2\nf = 1\no = 3\nr = 4\nm = 2\ny = 1\nl = 1\nc = 1\nu = 1\np = 1\na = 1\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7754747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vLYWI.jpg?s=128&g=1", "display_name": "Nicoraxes", "link": "https://stackoverflow.com/users/7754747/nicoraxes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 43299572, "answer_count": 2, "score": -2, "last_activity_date": 1491680345, "creation_date": 1491659990, "last_edit_date": 1592644375, "question_id": 43295019, "link": "https://stackoverflow.com/questions/43295019/how-to-get-some-alphabet-on-string-array-count-some-alphabet-in-perl", "title": "how to get some alphabet on string array &amp; count some alphabet in perl", "body": "<blockquote>\n<p>for example:</p>\n<p>Input: Testing 123 for my letter count program.</p>\n<p>Output: t = 5 e = 3 g = 2 n = 2 c = 1 i = 1 p = 1 u = 1 r = 4 o = 3 m\n= 2 a = 1 f = 1 l = 1 s = 1 y = 1</p>\n</blockquote>\n<p>I try to code this question, but didn't worked. This is my code:</p>\n<pre><code>#!/usr/bin/perl\nuse utf8;\nuse warnings;\n\n$line = &lt;STDIN&gt;;\n$len = length($line);\n\n$count = 0;\nwhile($count &lt; $len){\n  print &quot;$line[$count]\\n&quot;;\n  $count += 1;\n}\n</code></pre>\n<p>So help me to code this question. Because i don't understand how to code this question</p>\n"}, {"tags": ["perl", "ebcdic"], "comments": [{"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1491659291, "post_id": 43294487, "comment_id": 73656529, "body": "I find this description very hard to understand. What are the 5,22,24 at the start of the source file? Where is the indicator in the source file - it seems to be in the format file?"}, {"owner": {"reputation": 231, "user_id": 1768029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9f2a51fe26badb08a8601bf9645a4ed5?s=128&d=identicon&r=PG", "display_name": "user1768029", "link": "https://stackoverflow.com/users/1768029/user1768029"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1491662773, "post_id": 43294487, "comment_id": 73657679, "body": "Sorry for the confusion.Added pipes above source file data to know the position of each field.Pipes are not part of source file data.Now,if we check format file, first field is SEQ_NO and it has 11 characters starting from 1st to 11th position in source file.INDICATOR is in format file.We need to read format file to know each field details in source file.Indicator of CTR_CONTRACT_AMT field in format file is A which says conversion is required.I hope this description clear your doubt @Mark Setchell"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1491664213, "post_id": 43294487, "comment_id": 73658111, "body": "It still doesn&#39;t make sense! If you have 10 fields to convert, you read the format file just <b>once</b> at the start, then as you read each line of the data file you make all 10 conversions and write the corresponding output line. You never have to store more than one line in memory as you never need any other line to process the current line so it cannot be a memory problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491665542, "post_id": 43294487, "comment_id": 73658518, "body": "So what you&#39;re trying to do at present is to convert the EBCDIC to ASCII and create a new file. Is that right?"}, {"owner": {"reputation": 231, "user_id": 1768029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9f2a51fe26badb08a8601bf9645a4ed5?s=128&d=identicon&r=PG", "display_name": "user1768029", "link": "https://stackoverflow.com/users/1768029/user1768029"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491670821, "post_id": 43294487, "comment_id": 73661327, "body": "@Borodin. Yes correct!! Now format file is read at once and store it in an array. Then source file will be read line by line.each field in a line is checked to find if it&#39;s eligible for conversion and do conversion if it&#39;s eligible.My concern here is , instead of looping line by line , is it possible in perl to do conversion in all the lines at a time like sed in unix."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491670837, "post_id": 43294487, "comment_id": 73661338, "body": "I don&#39;t understand how <code>{</code> is in any sense the EBCDIC version of zero. In fact none of it looks like EBCDIC to me. What is supposed to happen to the <code>A</code> and <code>J</code> which also appear as the last character of the fields to be converted? How did <code>-845.65</code> turn out to be negative?"}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "edited": false, "score": 0, "creation_date": 1491827308, "post_id": 43294487, "comment_id": 73710428, "body": "You have a bug in ebcdic conversion: 00008456J -&gt; -845.61. see <a href=\"http://www.3480-3590-data-conversion.com/article-signed-fields.html\" rel=\"nofollow noreferrer\">3480-3590-data-conversion.com/article-signed-fields.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 0, "last_activity_date": 1491898634, "last_edit_date": 1491898634, "creation_date": 1491823519, "answer_id": 43321929, "question_id": 43294487, "link": "https://stackoverflow.com/questions/43294487/design-approach-for-ebcdic-conversion/43321929#43321929", "title": "Design approach for EBCDIC conversion", "body": "<p>After some optimisation, I have:</p>\n\n<pre><code>my %ebcdic_fields;\n\nwhile (my $line = &lt;DATA&gt;) {\n    my (undef, undef, $start, undef, $length, $indicator) = split /,/, $line;\n    next if $indicator !~ m/^A/;\n    $ebcdic_fields{$start-1} = $length - 2;\n}\n\nwhile (my $line = &lt;&gt;) {\n    while (my ($start, $length) = each %ebcdic_fields) {\n        my $fpos = $start + $length + 1;\n        my $before = substr ($line, $start, $length);\n        my $format = substr ($line, $fpos, 1);\n        my $trimed_before = $before + 0; # keep at least one 0 before the dot\n        if ($format ge 'J' and $format ne '{') {\n            substr ($line, $fpos, 1) =~ tr/}JKLMNOPQR/0123456789/;\n            substr ($line, $start, $length) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.';\n        } else {\n            substr ($line, $fpos, 1) =~ tr/{ABCDEFGHI/0123456789/;\n            substr ($line, $start, $length) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.';\n        }\n    }\n    print $line;\n}\n__DATA__\n1,SEQ_NO,1,11,11,N\n2,CTR_REC_ID,12,14,3,N\n3,CTR_SEQ_AMT,15,23,9,A\n4,CTR_CONTRACT_NO,24,46,23,N\n5,CTR_CONTRACT_AMT,47,59,13,A\n6,CTR_TRACK_NO,60,62,3,N\n</code></pre>\n\n<p>Sadly, the fastest I have achieved is with this:</p>\n\n<pre><code>my %ebcdic_fields;\n\nwhile (my $line = &lt;DATA&gt;) {\n    my (undef, undef, $start, undef, $length, $indicator) = split /,/, $line;\n    next if $indicator !~ m/^A/;\n    $ebcdic_fields{$start-1} = $length - 2;\n}\n\nwhile (my $line = &lt;&gt;) {\n    while (my ($start, $length) = each %ebcdic_fields) {\n        my $format = substr ($line, $start + $length + 1, 1);\n        my $trimed_before = (substr ($line, $start, $length) + 0); # keep at least one 0 before the dot\n        if  ($format eq '{') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '0';\n        } elsif  ($format eq 'A') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '1';\n        } elsif  ($format eq 'B') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '2';\n        } elsif  ($format eq 'C') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '3';\n        } elsif  ($format eq 'D') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '4';\n        } elsif  ($format eq 'E') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '5';\n        } elsif  ($format eq 'F') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '6';\n        } elsif  ($format eq 'G') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '7';\n        } elsif  ($format eq 'H') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '8';\n        } elsif  ($format eq 'I') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 1) . $trimed_before . '.' . substr ($line, $start + $length, 1) . '9';\n        } elsif ($format eq '}') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '0';\n        } elsif ($format eq 'J') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '1';\n        } elsif ($format eq 'K') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '2';\n        } elsif ($format eq 'L') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '3';\n        } elsif ($format eq 'M') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '4';\n        } elsif ($format eq 'N') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '5';\n        } elsif ($format eq 'O') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '6';\n        } elsif ($format eq 'P') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '7';\n        } elsif ($format eq 'Q') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '8';\n        } elsif ($format eq 'R') {\n            substr ($line, $start, $length+2) = ' ' x ($length - length($trimed_before) - 2) . '-' . $trimed_before . '.' . substr ($line, $start + $length, 1) . '9';\n        }\n    }\n    print $line;\n}\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 1768029, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/9f2a51fe26badb08a8601bf9645a4ed5?s=128&d=identicon&r=PG", "display_name": "user1768029", "link": "https://stackoverflow.com/users/1768029/user1768029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491898634, "creation_date": 1491656836, "last_edit_date": 1491665198, "question_id": 43294487, "link": "https://stackoverflow.com/questions/43294487/design-approach-for-ebcdic-conversion", "title": "Design approach for EBCDIC conversion", "body": "\n\n<p>I have a format file with following contents</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>FIELD NO.,FIELD NAME,STARTING POSITION,ENDING POSITION,LENGTH,INDICATOR\n1,SEQ_NO,1,11,11,N\n2,CTR_REC_ID,12,14,3,N\n3,CTR_SEQ_AMT,15,23,9,A\n4,CTR_CONTRACT_NO,24,46,23,N\n5,CTR_CONTRACT_AMT,47,59,13,A\n6,CTR_TRACK_NO,60,62,3,N\n</code></pre>\n\n<p>The file gives details about each field's start position, end position and length.</p>\n\n<p>My script reads the format file and stores the contents into an array. Then the source file is read line by line and when the indicator in format file is <strong>A</strong> convert the EBCDIC character into suitable ASCII character.</p>\n\n<p>Here's a sample source file with an index showing the character positions and the fields listed in the format file. It is not part of the data file.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>         1         2         3         4         5         6         7\n1234567890123456789012345678901234567890123456789012345678901234567890\n[         ][ ][       ][                     ][           ][ ]\n</code></pre>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>         5|CTR00002173{09C00000000001         000000000201AE00      \n        22|CTR00002243A52C00000000007         000000002358JF00\n        24|CTR00008456J52C00000000008         000000002465{F00\n</code></pre>\n\n<p>As per the format file, the <code>CTR_SEQ_AMT</code> value of the first line is <code>00002173{</code>. <code>{</code> must be converted to <code>0</code> and replace leading zero with blank space and also make it a decimal value(decimal(9,2)). </p>\n\n<p>The final output will look like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>     5|CTR    217.3009C00000000001                  20.11E00\n    22|CTR    224.3152C00000000007                -235.85F00\n    24|CTR   -845.6552C00000000008                 246.50F00\n</code></pre>\n\n<blockquote>\n  <p>{ --> 0, A --> 1, J --> 5 (Convert the decimal value to negative).</p>\n</blockquote>\n\n<p>I have got the above output using Perl, but the performance of my script is bad.</p>\n\n<p>My source file can have a million records. As per my script I have 2 loops: one to read the format file and store data into an array, and another to read the source file line by line and do the conversion. So if a format file has 10 fields to be converted, my code will loop through those million lines 10 times.</p>\n\n<p>Instead of having two loops, can I have a single loop for reading the format file and when indicator of a field is A perform the following operations in all the lines at a time for a particular field:</p>\n\n<ul>\n<li>Replace leading zero with blank</li>\n<li>Convert EBCDIC character to ASCII character</li>\n<li>Make it a decimal value.</li>\n</ul>\n\n<p>Currently my code has following line to perform the above 3 steps.Here line has each line from source file.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>$f_cnt   = $start_pos - 1;\n$dec_cnt = $array_length[$cnt] - 2;\n$field   = substr(\"$line\",  $end_pos -1, 1);\n\nif ( $field  eq '{' ) {\n     print \"replacing { \\n\";\n     $x = substr($line, $f_cnt, $dec_cnt);\n     $x =~ s/^(0*)/' ' x length($1)/e;\n     substr($line, $f_cnt, $dec_cnt, \"$x.\");\n     substr($line, $end_pos, 1, \"0\") ;\n }\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1491645164, "post_id": 43292317, "comment_id": 73652295, "body": "<a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\"><code>perldoc perlop</code></a>: &quot;Binary <code>,</code> is the comma operator. In scalar context it evaluates its left argument, throws that value away, then evaluates its right argument and returns that value. This is just like C&#39;s comma operator.&quot;"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1491645198, "post_id": 43292317, "comment_id": 73652302, "body": "Always start with <code>use strict; use warnings;</code>. That would have told you that <code>@value</code> doesn&#39;t exist (it wasn&#39;t declared anywhere)."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3604153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fba517ed4064f7373b7f25e41615a6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Ratstail91", "link": "https://stackoverflow.com/users/3604153/ratstail91"}, "edited": false, "score": 0, "creation_date": 1491645273, "post_id": 43292370, "comment_id": 73652321, "body": "Thank you so much! This has been frustrating me for days."}], "tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 3, "last_activity_date": 1491644123, "last_edit_date": 1491644123, "creation_date": 1491643779, "answer_id": 43292370, "question_id": 43292317, "link": "https://stackoverflow.com/questions/43292317/storing-an-array-in-a-hash/43292370#43292370", "title": "Storing an array in a hash", "body": "<p>Use brackets <code>[ ]</code> to create an array reference, not parens <code>( )</code>;</p>\n\n<p>As written, your code throws away the first value <code>$lat</code>.  Write it like this instead:</p>\n\n<pre><code>$package{$key} = [$lat,$lng];\n</code></pre>\n\n<p>You can pull out the values like this:</p>\n\n<pre><code>my ($lat,$lng) = @{ $package{$key} };\n</code></pre>\n\n<p>In your code, you could print out the values by dereferencing them:</p>\n\n<pre><code>print \"$key: \" . $value-&gt;[0] . \" \" . $value-&gt;[1] . \"\\n\";\n</code></pre>\n\n<p>Have a look at <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perldoc perlreftut</a>.</p>\n"}], "owner": {"reputation": 29, "user_id": 3604153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fba517ed4064f7373b7f25e41615a6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Ratstail91", "link": "https://stackoverflow.com/users/3604153/ratstail91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1491644172, "creation_date": 1491643402, "last_edit_date": 1491644172, "question_id": 43292317, "link": "https://stackoverflow.com/questions/43292317/storing-an-array-in-a-hash", "title": "Storing an array in a hash", "body": "<p>So, this doesn't work, and I have no idea why. I've tried every possible variation. But nothing works. I'm ready to take a chainsaw to my server, but hopefully you can prevent that:</p>\n\n<pre><code>sub getQuestMarkers {\n  #database stuff\n  ...\n  my %package;\n  while(my ($key, $lat, $lng) = $sth-&gt;fetchrow_array()) {\n    $package{$key} = ($lat,$lng);\n  }\n\n  ...\n  return %package;\n}\n\nmy %markers = getQuestMarkers();\nwhile(my( $key, $value) = each %markers) {\n  print \"$key: @value - $value[0] $value[1]\\n\";\n}\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 118, "user_id": 1897481, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed736d8754281322ffa45c09a199c000?s=128&d=identicon&r=PG", "display_name": "wiredcontrol", "link": "https://stackoverflow.com/users/1897481/wiredcontrol"}, "edited": false, "score": 0, "creation_date": 1491661830, "post_id": 43289964, "comment_id": 73657354, "body": "Thank you. That worked. Could you elaborate on what this NUL was? I googled but couldn&#39;t find anything relevant to this example."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 118, "user_id": 1897481, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed736d8754281322ffa45c09a199c000?s=128&d=identicon&r=PG", "display_name": "wiredcontrol", "link": "https://stackoverflow.com/users/1897481/wiredcontrol"}, "edited": false, "score": 1, "creation_date": 1491671443, "post_id": 43289964, "comment_id": 73661596, "body": "First of all, there was a problem with my earlier answer. It has been fixed. /// <code>find</code>&#39;s default action is <code>-print</code>, which prints the paths followed by a newline. Instead, you used <code>-print0</code>, which prints the paths followed by a NUL. Most system calls including the <code>exec*</code> system call used by backticks accept a NUL-terminated string, so the command you build gets cut short."}, {"owner": {"reputation": 118, "user_id": 1897481, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed736d8754281322ffa45c09a199c000?s=128&d=identicon&r=PG", "display_name": "wiredcontrol", "link": "https://stackoverflow.com/users/1897481/wiredcontrol"}, "edited": false, "score": 0, "creation_date": 1491796114, "post_id": 43289964, "comment_id": 73694125, "body": "I misthought that using <code>-print0</code> would be a clever way to avoid using the <code>chomp</code> inside the for loop. Thank you for explaining the concept of NUL-terminated strings. I changed the code to use the default <code>-print</code> and <code>chomp</code> and it works as expected."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1491671276, "last_edit_date": 1491671276, "creation_date": 1491623262, "answer_id": 43289964, "question_id": 43289858, "link": "https://stackoverflow.com/questions/43289858/perl-system-command-changes-the-variable-values-and-throws-error/43289964#43289964", "title": "Perl system command changes the variable values and throws error", "body": "<p><code>-print0</code> prints the paths followed by a NUL, so</p>\n\n<ul>\n<li><p><code>$log_files[0]</code> contains</p>\n\n<pre><code>find_failing/foo/compile.log&lt;NUL&gt;find_failing/bar/compile.log&lt;NUL&gt;\n</code></pre></li>\n<li><p><code>$log_files[1]</code> contains</p>\n\n<pre><code>find_failing/foo/sim.log&lt;NUL&gt;find_failing/bar/sim.log&lt;NUL&gt;\n</code></pre></li>\n</ul>\n\n<p>Replace</p>\n\n<pre><code>$log_files[0] = (`find $path -name compile.log -print0`)[0];\n$log_files[1] = (`find $path -name sim.log     -print0`)[0];\n</code></pre>\n\n<p>with</p>\n\n<pre><code>( $log_files[0] ) = split /\\0/, `find $path -name compile.log -print0`;\n( $log_files[1] ) = split /\\0/, `find $path -name sim.log     -print0`;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>$log_files[0] = `find $path -name compile.log -print0`;\n$log_files[1] = `find $path -name sim.log     -print0`;\n\ns/\\0.*//s for @log_files;\n</code></pre>\n"}], "owner": {"reputation": 118, "user_id": 1897481, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed736d8754281322ffa45c09a199c000?s=128&d=identicon&r=PG", "display_name": "wiredcontrol", "link": "https://stackoverflow.com/users/1897481/wiredcontrol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43289964, "answer_count": 1, "score": 0, "last_activity_date": 1491671276, "creation_date": 1491622300, "question_id": 43289858, "link": "https://stackoverflow.com/questions/43289858/perl-system-command-changes-the-variable-values-and-throws-error", "title": "Perl system command changes the variable values and throws error", "body": "<p>I have the following script:</p>\n\n<pre><code>#! /bin/env perl \n\nuse File::Basename;\nmy @log_files;\nmy $log_dir = \"/tmp/\";\nmy $path = \"find_failing/\";\n$log_files[0] = (`find $path -name compile.log -print0`)[0];\n$log_files[1] = (`find $path -name sim.log     -print0`)[0];\nmy $rev = \"100\";\n\nprint \"@log_files &lt;&lt; \\n\";\n\nforeach (@log_files) {\n   if (-f $_) {\n      chomp;\n      my $dirn = sprintf \"%s/%s.%s\", $log_dir, basename ($_), $rev;\n      chomp $dirn;\n      my $cmd = \"cp -v $_ $dirn\";\n      chomp $cmd;\n      print \"C: $cmd\\n\";\n      system ($cmd);\n      system (\"cp\", \"-v\", $_, $dirn);\n      system (\"echo\");\n   }\n}\n</code></pre>\n\n<p>When I run this, I am getting the following output:</p>\n\n<pre><code>find_failing/simulation/tc_ctrl.rtl/compile/compile.log find_failing/simulation/tc_ctrl.rtl/test_prbs.nrz.16.prbs23/sim.log &lt;&lt; \nC: cp -v find_failing/simulation/tc_ctrl.rtl/compile/compile.log /tmp//compile.log.100\ncp: missing destination file operand after `find_failing/simulation/tc_ctrl.rtl/compile/compile.log'\nTry `cp --help' for more information.\n`find_failing/simulation/tc_ctrl.rtl/compile/compile.log' -&gt; `/tmp//compile.log'\n\nC: cp -v find_failing/simulation/tc_ctrl.rtl/test_prbs.nrz.16.prbs23/sim.log /tmp//sim.log.100\ncp: missing destination file operand after `find_failing/simulation/tc_ctrl.rtl/test_prbs.nrz.16.prbs23/sim.log'\nTry `cp --help' for more information.\n`find_failing/simulation/tc_ctrl.rtl/test_prbs.nrz.16.prbs23/sim.log' -&gt; `/tmp//sim.log'\n</code></pre>\n\n<p>The print of the command shows the correct expansions of the variables as I intended. However, when run using the system (), it throws an error saying the destination is missing.</p>\n\n<p>Further, when I issue the command by giving it as a list, the copy happens but the destination path is missing the \".$rev\" that is part of the $dirn.</p>\n\n<p>I ran with v5.8.8 and v5.24.0 and I'm getting the same output.</p>\n\n<p>What is happening? Why is system () behaving this way?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "perl"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1491616774, "post_id": 43289260, "comment_id": 73646571, "body": "Is it necessary to frame you question in terms of a Perl expression, thereby limiting answers to those familiar with both languages? Can you not simply explain what you want to do?"}, {"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1491617142, "post_id": 43289260, "comment_id": 73646626, "body": "@CarySwoveland Come on. Newb did a much better job than most in this case. I don&#39;t think we need to get <i>that</i> pedantic, do we?"}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1492869331, "post_id": 43289350, "comment_id": 74171059, "body": "I just noticed you&#39;re the <a href=\"http://data.stackexchange.com/stackoverflow/query/661694/users-with-golden-ruby-badge-and-silver-python-badge\" rel=\"nofollow noreferrer\">only SO user with Ruby and Python golden badges</a>. Congrats!"}], "tags": [], "owner": {"reputation": 312221, "user_id": 2225682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4958f4712d94ab82fe55fa471308e4b5?s=128&d=identicon&r=PG", "display_name": "falsetru", "link": "https://stackoverflow.com/users/2225682/falsetru"}, "is_accepted": true, "score": 2, "last_activity_date": 1491616391, "creation_date": 1491616391, "answer_id": 43289350, "question_id": 43289260, "link": "https://stackoverflow.com/questions/43289260/ruby-equivalent-perl-command-for-replace-newlines-from-file/43289350#43289350", "title": "ruby equivalent perl command for replace newlines from file?", "body": "<ul>\n<li><code>puts</code> print newline; use <code>print</code> which does not print newline.</li>\n<li>Using <code>$F[0]</code>, newline is not passed, you don't need to remove newline</li>\n</ul>\n\n<hr>\n\n<pre><code>ruby -a -ne 'print $F[0].gsub(/\\r?$/, \";\")' bbb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 3, "last_activity_date": 1491616476, "creation_date": 1491616476, "answer_id": 43289357, "question_id": 43289260, "link": "https://stackoverflow.com/questions/43289260/ruby-equivalent-perl-command-for-replace-newlines-from-file/43289357#43289357", "title": "ruby equivalent perl command for replace newlines from file?", "body": "<pre><code>% ruby -p -e 'sub(/\\r?\\n/, \",\")' bbb\ncentroid,100x50+0+0,28x22+39+9,19x22+68+12,15x23+5+13,15x24+22+10,\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7834674, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/43927c244ad0c3698de69d3acc91b4fe?s=128&d=identicon&r=PG&f=1", "display_name": "alberto", "link": "https://stackoverflow.com/users/7834674/alberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 43289350, "answer_count": 2, "score": 3, "last_activity_date": 1491661867, "creation_date": 1491615310, "last_edit_date": 1491661867, "question_id": 43289260, "link": "https://stackoverflow.com/questions/43289260/ruby-equivalent-perl-command-for-replace-newlines-from-file", "title": "ruby equivalent perl command for replace newlines from file?", "body": "<p>Im trying to get a equivalent ruby command of this perl command</p>\n\n<p>this is my file</p>\n\n<pre><code>centroid\n100x50+0+0\n28x22+39+9\n19x22+68+12\n15x23+5+13\n15x24+22+10\n</code></pre>\n\n<p>This is my reference perl command: </p>\n\n<pre><code>perl -pe 's/\\r?\\n/,/'  bbb\n</code></pre>\n\n<p>Im using this ruby command but it doesn't work:</p>\n\n<pre><code> ruby -a  -ne   'puts $F[0].gsub(/\\r?\\n/, \";\")' bbb\n</code></pre>\n\n<p>Please help me</p>\n"}, {"tags": ["regex", "perl", "memory-leaks"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1491616710, "post_id": 43288921, "comment_id": 73646562, "body": "How are you seeing this manifest? A memory leak is different than growing memory. Are you continuously pushing new things to the array during the run? Have you reproduced this <i>exactly</i> in a dev environment with the regexes that don&#39;t supposedly &#39;leak&#39;?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1491626733, "post_id": 43288921, "comment_id": 73648056, "body": "I copy-pasted your program and do not see anything unusual. It&#39;s been running for a few minutes, for the second time. The memory usage sits at fixed values (for example: VmRSS 2392 kB,  VmSize: 129916 kB), the CPU spins at 100%. On v5.16, multithreaded x86_64."}, {"owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "edited": false, "score": 2, "creation_date": 1491638198, "post_id": 43288921, "comment_id": 73650472, "body": "Could you try Perl versions 5.24.1 (current stable) and/or 5.25.11 (current dev) to see if they exhibit the same problem? There are git commits after the release of 5.24.0 that have to do precisely with memory leaks related to regexes."}], "answers": [{"comments": [{"owner": {"reputation": 1171, "user_id": 1813405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5df4d55a2258a0ed227ce388716175c5?s=128&d=identicon&r=PG", "display_name": "Sgt B", "link": "https://stackoverflow.com/users/1813405/sgt-b"}, "edited": false, "score": 2, "creation_date": 1491657847, "post_id": 43292145, "comment_id": 73656071, "body": "Thanks, that did it. I tested on 5.22.1 and 5.22.2 as well and there was no leak. I&#39;ll see about trying 5.25 as well, but this was it! Thanks for the help and thanks for the thorough testing as well, much obliged! :)"}], "tags": [], "owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "is_accepted": true, "score": 7, "last_activity_date": 1491642309, "creation_date": 1491642309, "answer_id": 43292145, "question_id": 43288921, "link": "https://stackoverflow.com/questions/43288921/perl-program-leaking-memory-when-compiling-regex/43292145#43292145", "title": "Perl program leaking memory when compiling regex", "body": "<p>The short answer: install either</p>\n\n<ul>\n<li><code>v5.16.3</code> or <code>v5.18.2</code> (older versions)</li>\n<li>or <code>5.25.10</code> (dev-version)</li>\n<li>the <code>v5.24.0</code> and <code>5.24.1</code> shows growing :) memory</li>\n</ul>\n\n<p>Other versions not tested.</p>\n\n<h3>The detailed results:</h3>\n\n<p>tested the above script <code>leak.pl</code> just added this line to the top of the script:</p>\n\n<pre><code>print \"version: $^V ($^X) PID: $$\\n\";\n</code></pre>\n\n<p>On the second terminal me running this <code>bash</code> script</p>\n\n<pre><code>while :; do\n    ps -o pid=,vsz=,rss=,command= | grep 'perl.*[l]eak'\n    sleep 0.5\ndone\n</code></pre>\n\n<p><strong>The results</strong></p>\n\n<p><strong>plenv <code>5.16.3</code></strong></p>\n\n<pre><code>$ plenv local 5.16.3\n$ perl leak.pl\nversion: v5.16.3 (/opt/anyenv/envs/plenv/versions/5.16.3/bin/perl5.16.3) PID: 4922\n^C\n</code></pre>\n\n<p>the <code>ps</code> (<code>pid=,vsz=,rss=,command=</code>)</p>\n\n<pre><code> 4922  2437208   3264 perl leak.pl\n 4922  2441304   3312 perl leak.pl\n ....\n 4922  2441304   3312 perl leak.pl\n # constant\n</code></pre>\n\n<p><strong>OS-default <code>v5.18.2</code></strong></p>\n\n<pre><code>$ perl leak.pl\nversion: v5.18.2 (/usr/bin/perl) PID: 5718\n#the ps constant\n 5718  2455608   3612 perl leak.pl\n 5718  2457656   3636 perl leak.pl\n ...\n 5718  2457656   3636 perl leak.pl\n</code></pre>\n\n<p><strong>plenv <code>5.24.0</code></strong></p>\n\n<pre><code>$ perl leak.pl\nversion: v5.24.0 (/opt/anyenv/envs/plenv/versions/5.24.0/bin/perl5.24.0) PID: 6342\n# GROWING\n 6342  2458172  10672 perl leak.pl\n 6342  2495036  40820 perl leak.pl\n 6342  2526784  70984 perl leak.pl\n 6342  2547268 101492 perl leak.pl\n 6342  2579012 132380 perl leak.pl\n 6342  2600516 163320 perl leak.pl\n 6342  2639432 193636 perl leak.pl\n 6342  2669128 223836 perl leak.pl\n 6342  2700872 254012 perl leak.pl\n 6342  2738760 284400 perl leak.pl\n 6342  2768456 314256 perl leak.pl\n 6342  2789960 344668 perl leak.pl\n</code></pre>\n\n<p><strong>plenv <code>5.24.1</code></strong></p>\n\n<pre><code>$ perl leak.pl\nversion: v5.24.1 (/opt/anyenv/envs/plenv/versions/5.24.1/bin/perl5.24.1) PID: 6518\n#GROWING\n 6518  2466296  23968 perl leak.pl\n 6518  2504188  51404 perl leak.pl\n 6518  2523644  78616 perl leak.pl\n 6518  2560512 105832 perl leak.pl\n 6518  2597376 133460 perl leak.pl\n 6518  2617856 160496 perl leak.pl\n 6518  2643460 187020 perl leak.pl\n 6518  2672132 214760 perl leak.pl\n 6518  2707972 241532 perl leak.pl\n 6518  2743812 269120 perl leak.pl\n 6518  2778628 296564 perl leak.pl\n 6518  2798084 323252 perl leak.pl\n 6518  2825732 350136 perl leak.pl\n</code></pre>\n\n<p><strong>plenv <code>5.25.10</code></strong></p>\n\n<pre><code>$ perl leak.pl\nversion: v5.25.10 (/opt/anyenv/envs/plenv/versions/5.25.10/bin/perl5.25.10) PID: 6732\n# perl adjusted few times the memory - but steady constant\n 6732  2445952   3760 perl leak.pl\n 6732  2445952   3760 perl leak.pl\n 6732  2446976   3772 perl leak.pl\n 6732  2448000   3784 perl leak.pl\n 6732  2448000   3784 perl leak.pl\n 6732  2448000   3784 perl leak.pl\n 6732  2448000   3784 perl leak.pl\n 6732  2450048   3808 perl leak.pl\n 6732  2450048   3812 perl leak.pl\n 6732  2450048   3812 perl leak.pl\n 6732  2450048   3812 perl leak.pl\n 6732  2450048   3812 perl leak.pl\n 6732  2450048   3812 perl leak.pl\n ...\n 6732  2450048   3812 perl leak.pl\n</code></pre>\n"}], "owner": {"reputation": 1171, "user_id": 1813405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5df4d55a2258a0ed227ce388716175c5?s=128&d=identicon&r=PG", "display_name": "Sgt B", "link": "https://stackoverflow.com/users/1813405/sgt-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 3, "accepted_answer_id": 43292145, "answer_count": 1, "score": 11, "last_activity_date": 1491642309, "creation_date": 1491611646, "last_edit_date": 1491625577, "question_id": 43288921, "link": "https://stackoverflow.com/questions/43288921/perl-program-leaking-memory-when-compiling-regex", "title": "Perl program leaking memory when compiling regex", "body": "<p>I have a program that's exhibiting what appears to be a memory leak, but I'm having trouble tracking it down. The test program I wrote to demonstrate this behaves rather strangely, and I want to make sure I understand why.</p>\n\n<p>In the example there are two arrays, one named regexLeak and another named noLeak. The noLeak arrays is simply there as a baseline using two simple regexes. The regexLeak array contains to regexes that use a character set.</p>\n\n<p>The test program takes the contents of an array, presumably filled with regex patterns, passes it to a function where the regexes are compiled and placed into an array that's passed as a reference back.</p>\n\n<p>When the \"test\" array is set to noLeak, there is no leak. When the \"test\" array is set to regexLeak, there is a notable memory leak. However, if the regexLeak array only contains one element, there is no leak. It doesn't matter which element either. Put both elements in the array though and memory use shoots through the roof.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @regexLeak;\nmy @noLeak;\n\n# Leaks only when both elements are added to @regexLeak\npush(@regexLeak,'user = ([a-zA-Z0-9-_.@]+)');\npush(@regexLeak,'admin = ([a-zA-Z0-9-_.@]+)');\n\n# No leaks\npush(@noLeak, 'simpleRegex');\npush(@noLeak, 'anotherSimpleOne');\n\nmy @test = @regexLeak;\n\nmy $compiled = compileRegex(@test);\n\nwhile (1) {\n\n    $compiled = compileRegex(@test);\n    # print scalar @{$compiled}.\"\\n\";\n    # select(undef, undef, undef, 0.25);\n}\n\nsub compileRegex {\n    my (@r) = @_;\n\n    my @compiled;\n\n    foreach my $regex (@r) {\n        my $c = qr/$regex/;\n        push(@compiled,$c);\n    }\n\n    return \\@compiled;\n}\n</code></pre>\n\n<p>Some elements of this were taken from a production program that's exhibiting this problem. The global $compiled variable, for example. I'd like to keep this in here as explaining through them would help me understand. This is also a long running program so leaks are a concern.</p>\n\n<p>Memory leak was observed using ps -aux and reviewing RSS and VSZ sizes.</p>\n\n<p>Any help or guidance would be appreciated, thanks!</p>\n\n<p>Edit:\nIf you need any other environment details let me know</p>\n\n<blockquote>\n  <p>Perl v5.24.0 built for x86_64-linux-thread-multi</p>\n</blockquote>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491619907, "post_id": 43288821, "comment_id": 73647008, "body": "That <code>grep { &#47;$RE{net}{IPv4}&#47; }</code> is unnecessary based on how you populate the file."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1491619972, "last_edit_date": 1491619972, "creation_date": 1491619528, "answer_id": 43289607, "question_id": 43288821, "link": "https://stackoverflow.com/questions/43288821/combine-two-perl-scripts/43289607#43289607", "title": "Combine Two Perl Scripts", "body": "<pre><code>use LWP::UserAgent qw( );\nuse Regexp::Common qw( net );\n\n# Obviously incomplete, but good enough for IP addresses.\nsub text_to_lit {\n   my ($s) = @_;\n   return qq{\"$s\"};\n}\n\nmy $url = 'https://...';\n\nmy $ua = LWP::UserAgent-&gt;new();\nmy $response = $ua-&gt;get($url);\n$response-&gt;is_success()\n   or die(\"Can't download $url: \" . $response-&gt;status_line() . \"\\n\");\n\nmy $content = $response-&gt;content();\n\nmy @ips = $content =~ /^.*?($RE{net}{IPv4})/mg;   # First per line\n   -or-\nmy @ips = $content =~ /$RE{net}{IPv4}/g;          # All of them\n\nprint \"(\".( join \" OR \", map text_to_lit($_), @ips ).\")\\n\";\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 43289607, "answer_count": 1, "score": -1, "last_activity_date": 1491619972, "creation_date": 1491610657, "last_edit_date": 1491619841, "question_id": 43288821, "link": "https://stackoverflow.com/questions/43288821/combine-two-perl-scripts", "title": "Combine Two Perl Scripts", "body": "<p>At this point, I am using two perl scripts to convert a text file into the format I want. One perl script downloads a file off the web using API, stores it as a file, then prints only the IP addresses (e.g. ips.txt) - I then direct the output into another text file (e.g. perl script1.pl > ips2.txt). The printed output looks like this:</p>\n\n<pre><code>222.187.221.224\n222.187.221.250\n222.187.239.35\n222.187.239.136\n222.215.230.79\n222.215.230.85\n</code></pre>\n\n<p>The second script takes the file I created to change the IPs into the following format:</p>\n\n<pre><code>(\"222.187.239.35\" OR \"222.187.239.136\" OR \"222.215.230.79\" OR \"222.215.230.85\")\n</code></pre>\n\n<p>My question is, how do I most efficiently combine these two perl scripts into one to perform all required actions? The file creations are unnecessary, it's just the only way I figured out how to do it so far. Help is greatly appreciated.</p>\n\n<p><strong>First script:</strong></p>\n\n<pre><code>#/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::Simple;\nuse Regexp::Common qw/net/;\n\ngetstore(\"https://&lt;redacted&gt;\", \"ips.txt\");\n\n\nopen(my $input, \"&lt;\", \"ips.txt\");\n\nwhile (&lt;$input&gt;) {\n    print $1, \"\\n\" if /($RE{net}{IPv4})/;\n}\n</code></pre>\n\n<p><strong>Second script:</strong></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::Simple;\nuse Regexp::Common qw/net/;\n\nopen(my $input, \"&lt;\", \"ips2.txt\");\n\nprint '(', join(' OR ', map { chomp; qq{\"$_\"} } grep { /$RE{net}{IPv4}/ } &lt;$input&gt;), \")\\n\";\n</code></pre>\n\n<p><strong>Desired printed output (many more IPs, this is just an example):</strong> </p>\n\n<pre><code>(\"222.187.239.35\" OR \"222.187.239.136\" OR \"222.215.230.79\" OR \"222.215.230.85\")\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1491604521, "post_id": 43287875, "comment_id": 73644179, "body": "Which line # is in the error message?"}, {"owner": {"reputation": 589595, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1491604548, "post_id": 43287875, "comment_id": 73644186, "body": "Add the value of <code>@expr_list</code> and <code>@string_list</code> to the question."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1491787349, "post_id": 43287875, "comment_id": 73692214, "body": "<a href=\"http://stackoverflow.com/questions/11122977/how-do-i-remove-all-undefs-from-array\" title=\"how do i remove all undefs from array\">stackoverflow.com/questions/11122977/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1491610685, "creation_date": 1491610685, "answer_id": 43288823, "question_id": 43287875, "link": "https://stackoverflow.com/questions/43287875/perl-use-of-uninitialized-variable-in-nested-foreach/43288823#43288823", "title": "Perl: use of uninitialized variable in nested foreach", "body": "<p>That means one of the elements of <code>@string_list</code> is <code>undef</code>.</p>\n"}], "owner": {"reputation": 83, "user_id": 7835045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9787c383842354c1319aa8d5b92b8561?s=128&d=identicon&r=PG&f=1", "display_name": "craybobnee", "link": "https://stackoverflow.com/users/7835045/craybobnee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 43288823, "answer_count": 1, "score": -1, "last_activity_date": 1491610685, "creation_date": 1491603465, "last_edit_date": 1491603897, "question_id": 43287875, "link": "https://stackoverflow.com/questions/43287875/perl-use-of-uninitialized-variable-in-nested-foreach", "title": "Perl: use of uninitialized variable in nested foreach", "body": "<p>Trying to check an array of strings against an array of regex 's.</p>\n\n<p>Throws:</p>\n\n<p>'Use of uninitialized value in $string in pattern match (m//) at myscript line '</p>\n\n<p>If I take out the if statement, it still gives warning but prints each\nelement in the @string_list</p>\n\n<pre><code>foreach my $expr (@expr_list) {\n   foreach my $string (@string_list) {\n     if ($string =~ $expr) {\n        print $string,\"\\n\"\n     }\n   }\n }\n</code></pre>\n"}, {"tags": ["c++", "perl", "gdb", "stdin"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7834659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08927a722e9fe66d49ea46e98ab6077b?s=128&d=identicon&r=PG&f=1", "display_name": "vergilEther", "link": "https://stackoverflow.com/users/7834659/vergilether"}, "edited": false, "score": 0, "creation_date": 1491616317, "post_id": 43286957, "comment_id": 73646494, "body": "Thanks, I&#39;ll test this out"}, {"owner": {"reputation": 33, "user_id": 7834659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08927a722e9fe66d49ea46e98ab6077b?s=128&d=identicon&r=PG&f=1", "display_name": "vergilEther", "link": "https://stackoverflow.com/users/7834659/vergilether"}, "edited": false, "score": 0, "creation_date": 1491618930, "post_id": 43286957, "comment_id": 73646891, "body": "Worked like a charm. Thanks!"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 2, "last_activity_date": 1491598488, "creation_date": 1491598488, "answer_id": 43286957, "question_id": 43286656, "link": "https://stackoverflow.com/questions/43286656/send-piped-input-in-gdb-at-breakpoint-rather-than-initially/43286957#43286957", "title": "Send piped input in GDB at breakpoint rather than initially", "body": "<p>Just use the <code>run</code> command. I'll demonstrate by feeding <code>/bin/cat</code> to gdb, and breaking in its <code>main()</code>, with standard input redirected:</p>\n\n<p>Example:</p>\n\n<pre><code>$ gdb /bin/cat\nGNU gdb (GDB) Fedora 7.12.1-47.fc25\n[ ... ]\n(gdb) b main\nBreakpoint 1 at 0x1bc0\n(gdb) run &lt;/etc/issue\nStarting program: /usr/bin/cat &lt;/etc/issue\n\nBreakpoint 1, 0x0000555555555bc0 in main ()\n(gdb) c\nContinuing.\n\\S\nKernel \\r on an \\m (\\l)\n\n[Inferior 1 (process 18190) exited normally]\n(gdb) \n</code></pre>\n\n<p>You should be able to start your program under <code>gdb</code>, set a breakpoint just before scanf, then <code>run</code> it with standard input redirected from an empty file. I don't expect that your program will attempt to read from its standard input until then, so it won't see the end-of-file condition on its redirected standard input.</p>\n\n<p>When the breakpoint hits you should have your memory addresses, then prepare your payload and simply append it to the zero-length file, then</p>\n\n<pre><code>c\n</code></pre>\n\n<p>the execution, which should then proceed and attempt to read the payload that's now available on its standard input.</p>\n\n<p>A variation of this technique that won't even require a debugger would be to use a named pipe that gets opened for writing, in advance, then run this program with its standard input redirected from the named pipe. The expected result would be the program printing the memory addresses, then blocking when it reads from the pipe. At this point you can prepare your payload, and write it to the pipe.</p>\n"}], "owner": {"reputation": 33, "user_id": 7834659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08927a722e9fe66d49ea46e98ab6077b?s=128&d=identicon&r=PG&f=1", "display_name": "vergilEther", "link": "https://stackoverflow.com/users/7834659/vergilether"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 43286957, "answer_count": 1, "score": 3, "last_activity_date": 1491598488, "creation_date": 1491597074, "last_edit_date": 1495541864, "question_id": 43286656, "link": "https://stackoverflow.com/questions/43286656/send-piped-input-in-gdb-at-breakpoint-rather-than-initially", "title": "Send piped input in GDB at breakpoint rather than initially", "body": "<p>I've researched this question, and the closest answer I could find was this.\n<a href=\"https://stackoverflow.com/questions/8422259/gdb-debugging-with-piped-input-not-arguments\">gdb - debugging with piped input (not arguments)</a></p>\n\n<p>I need to do exactly what this person was asking, however, I need to be able to send input AFTER having already viewed a portion of my program run.</p>\n\n<p>This is the code I'm looking at in GDB</p>\n\n<pre><code>#define SECRET1 0x44\n#define SECRET2 0x55\n\nint main(int argc, char *argv[])\n{\nchar user_input[100];\n\nint *secret;\nint int_input;\nint a, b, c, d; /* other variables, not used here.*/\n\n/* The secret value is stored on the heap */\nsecret = (int *) malloc(2*sizeof(int));\n\n/* getting the secret */\nsecret[0] = SECRET1; secret[1] = SECRET2;\n\nprintf(\"The variable secret\u2019s address is 0x%8x (on stack)\\n\", &amp;secret);\nprintf(\"The variable secret\u2019s value is 0x%8x (on heap)\\n\", secret);\nprintf(\"secret[0]\u2019s address is 0x%8x (on heap)\\n\", &amp;secret[0]);\nprintf(\"secret[1]\u2019s address is 0x%8x (on heap)\\n\", &amp;secret[1]);\n\nprintf(\"Please enter a decimal integer\\n\");\nscanf(\"%d\", &amp;int_input);  /* getting an input from user */\n\nprintf(\"Please enter a string\\n\");\nscanf(\"%s\", user_input); /* getting a string from user */\n\n/* Vulnerable place */\nprintf(user_input);\nprintf(\"\\n\");\n\n/* Verify whether your attack is successful */\nprintf(\"The original secrets: 0x%x -- 0x%x\\n\", SECRET1, SECRET2);\nprintf(\"The new secrets:      0x%x -- 0x%x\\n\", secret[0], secret[1]);\n\nreturn 0;\n}\n</code></pre>\n\n<p>I'm attempting to perform a format string attack on my virtual machine. To do that, I need to know what address the secrets are being stored. The program tells me this through output with these lines</p>\n\n<pre><code>  printf(\"The variable secret\u2019s address is 0x%8x (on stack)\\n\", &amp;secret);\n  printf(\"The variable secret\u2019s value is 0x%8x (on heap)\\n\", secret);\n  printf(\"secret[0]\u2019s address is 0x%8x (on heap)\\n\", &amp;secret[0]);\n  printf(\"secret[1]\u2019s address is 0x%8x (on heap)\\n\", &amp;secret[1]);\n</code></pre>\n\n<p>The nature of the attack requires that I send non-ASCII hex values as input for the 2nd scanf,so I can't simply type the input myself. I have accomplished setting up my input using perl here,</p>\n\n<pre><code>ramtest@ramtest-VirtualBox:/tmp$ perl -e 'print \"5\\x0a\"; print \"\\x08\\xb0\\x04\\x08%x.%x.%x.%x.%x.%x.%x\";' &gt; /tmp/input\n</code></pre>\n\n<p>I then run </p>\n\n<pre><code>$gdb ./vul_prog &lt; /tmp/input\n</code></pre>\n\n<p>I've gotten my method to work in an environment where memory randomization is off, as I can run the program once, look at the memory addresses, then change the perl script, and simply run it again. However, with memory randomization on, I can't know where the addresses will be before I run it, so I need to be able to see the portion of the program that tells me the addresses run before I create and send my input.</p>\n\n<p>I've attempted to do so in the way that seemed most intuitive here, but I just get a syntax error.</p>\n\n<pre><code>Starting program: /home/ramtest/Downloads/vulprog \nThe variable secret\u2019s address is 0xbfffefd8 (on stack)\nThe variable secret\u2019s value is 0x 804b008 (on heap)\nsecret[0]\u2019s address is 0x 804b008 (on heap)\nsecret[1]\u2019s address is 0x 804b00c (on heap)\nPlease enter a decimal integer\n1\nPlease enter a string\n\nBreakpoint 2, 0x0804858f in main ()\n(gdb) c &gt; /tmp/input\nA syntax error in expression, near `&gt; /tmp/input'.\n(gdb) c &lt; /tmp/input\nA syntax error in expression, near `&lt; /tmp/input'.\n</code></pre>\n\n<p>Is it possible for me to set a breakpoint in GDB right before I am prompted for input, then send the /tmp/input information as input somehow?</p>\n\n<p>If so, how would I go about that?</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491597271, "post_id": 43286102, "comment_id": 73641519, "body": "How do you distinguish between sentences? See also <a href=\"http://stackoverflow.com/q/42754472/2173773\">How to read text file sentence by sentence in perl?</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491597749, "post_id": 43286102, "comment_id": 73641712, "body": "For each sentence you might be able to search for words using an assembled regex. See for example <a href=\"https://metacpan.org/pod/Regexp::Assemble\" rel=\"nofollow noreferrer\">Regexp::Assemble</a>"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1491645002, "post_id": 43286102, "comment_id": 73652250, "body": "That sounds like you could just shove all the phrases into a regex and count the matches."}], "answers": [{"tags": [], "owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "is_accepted": false, "score": 2, "last_activity_date": 1491600018, "last_edit_date": 1491600018, "creation_date": 1491596461, "answer_id": 43286514, "question_id": 43286102, "link": "https://stackoverflow.com/questions/43286102/extracting-sentences-by-matching-dictionary-words/43286514#43286514", "title": "Extracting sentences by matching dictionary words", "body": "<p>Search for natural language processing (NLP) on cpan; e.g. <a href=\"https://metacpan.org/search?size=500&amp;q=Lingua%3A%3AEN&amp;search_type=modules\" rel=\"nofollow noreferrer\">Lingua::EN::*</a></p>\n\n<p>Also search for 'bag of words' online/journals for an intro to the field.</p>\n"}], "owner": {"reputation": 17, "user_id": 7700359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-wEdE_ERIePM/AAAAAAAAAAI/AAAAAAAAJGQ/k2ceucupQb4/photo.jpg?sz=128", "display_name": "ary", "link": "https://stackoverflow.com/users/7700359/ary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491644645, "creation_date": 1491594728, "last_edit_date": 1491644645, "question_id": 43286102, "link": "https://stackoverflow.com/questions/43286102/extracting-sentences-by-matching-dictionary-words", "title": "Extracting sentences by matching dictionary words", "body": "<p>I have a lot of strings but contain words or phrases of interest. For example:\n'I like the cherry blossoms when spring is here and I love to click photos for the same '</p>\n\n<p>contains the words/phrases of interest  \"cherry blossoms\", \"love\" and \"click \".</p>\n\n<p>My job is to find out the sentences with the words/phrases of interest .And if possible score each string so that strings that are composed of two or more words/phrases get a better score than strings that have lower count. </p>\n\n<p>Is this a job for recursive descent parsing, or is there a faster way to be doing this? For this task, I am willing to trade off a little speed for accuracy. </p>\n\n<p>My dictionary is going to consist of about 250,000 words. I can store them on the disk in any fashion I want. Is there any kind of format (perhaps some db file format) that would lend itself well to the kind of lookups that I am going to need to be doing?</p>\n\n<p>Is there a CPAN module that would be a good fit for me? Or is there a simple solution .</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "unix", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491588345, "post_id": 43284373, "comment_id": 73637219, "body": "<code>perl -anE &#39;$.==6 &amp;&amp; say substr $F[0],10,5&#39; infile.txt</code>"}], "answers": [{"comments": [{"owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "edited": false, "score": 1, "creation_date": 1491589411, "post_id": 43284512, "comment_id": 73637710, "body": "Thanks. I was too focused on the <code>sed</code> and <code>grep</code> and didn&#39;t know <code>awk</code> had a <code>substr</code> function. Sorry about the newbie question."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 2, "last_activity_date": 1491588298, "creation_date": 1491588298, "answer_id": 43284512, "question_id": 43284373, "link": "https://stackoverflow.com/questions/43284373/extract-a-substring-from-a-text-file-using-a-positional-argument/43284512#43284512", "title": "Extract a substring from a text file using a positional argument", "body": "<pre><code>print substr($1,10,6)\n</code></pre>\n\n<p>check the math depending what \"between\" means to you.</p>\n"}], "owner": {"reputation": 726, "user_id": 7780772, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/51e914134e488de42999994a203e24ec?s=128&d=identicon&r=PG&f=1", "display_name": "quantik", "link": "https://stackoverflow.com/users/7780772/quantik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 43284512, "answer_count": 1, "score": 1, "last_activity_date": 1491591062, "creation_date": 1491587735, "question_id": 43284373, "link": "https://stackoverflow.com/questions/43284373/extract-a-substring-from-a-text-file-using-a-positional-argument", "title": "Extract a substring from a text file using a positional argument", "body": "<p>I extract the specific line with <code>awk 'FNR == 6 {print $1}' infile.txt</code>. Suppose this line is <code>QWKEJQKSKMAOJISDKJFSDWESA</code>. What should I pipe with <code>awk</code> in order to extract the characters in between the 10th and 15th positions of this string? </p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1491585842, "post_id": 43283637, "comment_id": 73635916, "body": "If you have not modified <code>$&#47;</code> this <code>my $observations_json = &lt;$obserations_fh&gt;</code> will only read one line from the file. Maybe you did not read everything, and it became malformed?"}, {"owner": {"reputation": 154, "user_id": 1610511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dad3f964c9fb2be8bb7f2f2d2cef4dd?s=128&d=identicon&r=PG", "display_name": "Edward Kirton", "link": "https://stackoverflow.com/users/1610511/edward-kirton"}, "edited": false, "score": 0, "creation_date": 1491596660, "post_id": 43283637, "comment_id": 73641254, "body": "Hakon&#39;s right.  I suggest using File::Slurp; i.e. my $observations_json = read_file(&#39;observations.json&#39;);"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 7286703, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/49cbfcf670142b9fc6588268d8d208c1?s=128&d=identicon&r=PG&f=1", "display_name": "cookersjs", "link": "https://stackoverflow.com/users/7286703/cookersjs"}, "edited": false, "score": 0, "creation_date": 1491590597, "post_id": 43283978, "comment_id": 73638307, "body": "Yea, it turns out the JSON file was not downloaded fully, which is odd. I downloaded it using HTTP::Request so I am not really sure why that happened, but oh well now I at least know the source of the problem. Its a 106 MB JSON file, and I have two other JSON files that downloaded fully that are smaller, so the size of the file must have caused some kind of issue"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1491586225, "creation_date": 1491586225, "answer_id": 43283978, "question_id": 43283637, "link": "https://stackoverflow.com/questions/43283637/decoding-json-issue-in-perl-code-or-expected-while-parsing-array-at-charac/43283978#43283978", "title": "decoding JSON issue in Perl code: , or ] expected while parsing array, at character offset", "body": "<p>That probably indicates you have incomplete JSON in <code>$observations_json</code>. Your assumption that the entire file consists of just one line is probably incorrect. Use</p>\n\n<pre><code>my $observations;\n{\n    open (my $observations_fh, '&lt;', 'observations.json')\n        or die(\"Can't open observations.json: $!\\n\");\n\n    local $/;\n    my $observations_json = &lt;$obserations_fh&gt;;\n    $observations = decode_json($observations_json);\n}\n</code></pre>\n\n<p>If that doesn't help, <code>observations.json</code> doesn't contain valid JSON.</p>\n"}], "owner": {"reputation": 111, "user_id": 7286703, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/49cbfcf670142b9fc6588268d8d208c1?s=128&d=identicon&r=PG&f=1", "display_name": "cookersjs", "link": "https://stackoverflow.com/users/7286703/cookersjs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "accepted_answer_id": 43283978, "answer_count": 1, "score": 1, "last_activity_date": 1491586225, "creation_date": 1491584896, "last_edit_date": 1495539999, "question_id": 43283637, "link": "https://stackoverflow.com/questions/43283637/decoding-json-issue-in-perl-code-or-expected-while-parsing-array-at-charac", "title": "decoding JSON issue in Perl code: , or ] expected while parsing array, at character offset", "body": "<p>I have written Perl code that was working until recently, when I tried to run it again. The problem seems to originate from the JSON::XS \"decode_json\" method. </p>\n\n<p>Code Snippet:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse MooseX::Singleton;\nuse Array::Utils qw(:all);\nuse Data::Dumper;\nuse JSON::XS qw(encode_json decode_json);\nuse Storable;\nuse Tie::IxHash;\n\n    open (my $observations_fh, '&lt;', 'observations.json') or die \"Could not open observations.json\\n\";\n    my $observations_json = &lt;$obserations_fh&gt;;\n    my @decoded_observations = @{decode_json($observations_json)};\n</code></pre>\n\n<p>Usually, after this code I was able to go through each JSON component in a for loop and take specific information, but now I get the error:</p>\n\n<blockquote>\n  <p>, or ] expected while parsing array, at character offset 5144816\n  (before \"(end of string)\")</p>\n</blockquote>\n\n<p>I saw a similar question <a href=\"https://stackoverflow.com/questions/24959739/or-expected-while-parsing-object-hash-error-while-parsing-a-json-file\">here</a>, but it didn't resolve my problem. </p>\n\n<p>I also have similar json decoding going on that doesn't utilize @{decode_json($variable)}, but when I tried that with this observations.json file, the same error was output.</p>\n\n<p>I also tried just using the JSON module, but same error occurred.</p>\n\n<p>Any insight would be greatly appreciated!</p>\n\n<p>-cookersjs</p>\n"}, {"tags": ["perl", "ole"], "answers": [{"tags": [], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "is_accepted": true, "score": 1, "last_activity_date": 1491799231, "creation_date": 1491799231, "answer_id": 43315097, "question_id": 43280152, "link": "https://stackoverflow.com/questions/43280152/generate-mail-and-open-it-in-outlook-using-perl/43315097#43315097", "title": "Generate Mail and Open it in Outlook using Perl", "body": "<p>I just found an answer to it so thought of posting it also so that someone else needing an answer to this can get help. The key is to use the function Display() instead of Send(). PFB the modified code to open the mail and not send it.</p>\n\n<pre><code>sub Final_Mail_Outlook{\n\n    my($mailTo,$mailFrom,$subject,$body) = (@_);\n\n    my $Outlook = Win32::OLE-&gt;GetActiveObject('Outlook.Application') || Win32::OLE-&gt;new('Outlook.Application');\n\n    # Create Mail Item\n    my $item = $Outlook-&gt;CreateItem(0);  # 0 = mail item.\n\n    unless ($item)\n    {\n        die \"Outlook is not running, cannot send mail.\\n\";\n    }\n\n    $item-&gt;{'Subject'} = $subject;\n    $item-&gt;{'To'} = $mailTo;\n    $item-&gt;{'Body'} = $body;\n    $item-&gt;{'From'} = $mailFrom;\n    my $attach = $item-&gt;{'Attachments'};\n    my @outputFiles = glob(\"$OutputPath\\\\*.*\");\n    foreach my $file (@outputFiles){\n        $attach-&gt;add($file);\n    }\n    $item-&gt;Display();\n}\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 6897492, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d50889f9fb83f9a62eaec9df63aeb726?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit", "link": "https://stackoverflow.com/users/6897492/mohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 43315097, "answer_count": 1, "score": 1, "last_activity_date": 1491799231, "creation_date": 1491573881, "question_id": 43280152, "link": "https://stackoverflow.com/questions/43280152/generate-mail-and-open-it-in-outlook-using-perl", "title": "Generate Mail and Open it in Outlook using Perl", "body": "<p>Does anyone know as how can I make a mail in perl using outlook and not send it just open it on the screen at the end of making the mail and let the user verify and send the mail. I am using Win32::OLE for making the mail.</p>\n\n<p>PFB the code I am using:</p>\n\n<pre><code>sub Final_Mail_Outlook{\n\n    my($mailTo,$mailFrom,$subject,$body) = (@_);\n\n    my $Outlook = Win32::OLE-&gt;GetActiveObject('Outlook.Application') || Win32::OLE-&gt;new('Outlook.Application');\n\n    # Create Mail Item\n    my $item = $Outlook-&gt;CreateItem(0);  # 0 = mail item.\n\n    unless ($item)\n    {\n        die \"Outlook is not running, cannot send mail.\\n\";\n    }\n\n    $item-&gt;{'Subject'} = $subject;\n    $item-&gt;{'To'} = $mailTo;\n    $item-&gt;{'Body'} = $body;\n    $item-&gt;{'From'} = $mailFrom;\n    my $attach = $item-&gt;{'Attachments'};\n    my @outputFiles = glob(\"$OutputPath\\\\*.*\");\n    foreach my $file (@outputFiles){\n        $attach-&gt;add($file);\n    }\n    $item-&gt;Send();\n}\n</code></pre>\n\n<p>This sends the mail as I have called Send function, but I want to verify the mail generated. So is there a way to do so???  </p>\n"}, {"tags": ["excel", "perl", "spreadsheet", "substitution"], "answers": [{"comments": [{"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1491572339, "post_id": 43279552, "comment_id": 73627023, "body": "may I ask why the group?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491572545, "post_id": 43279552, "comment_id": 73627195, "body": "Thanks, it works! But could you explain it please or point me to somewhere that I can learn to understand it?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491572657, "post_id": 43279552, "comment_id": 73627289, "body": "Awesome, its just that I like to understand any code that people help me with rather than just being a copy and paste ninja :)"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1491572830, "post_id": 43279552, "comment_id": 73627444, "body": "No problems.. updated with a very basic explanation."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491572842, "post_id": 43279552, "comment_id": 73627459, "body": "So is &quot;Greedy&quot;, basically &quot;Everything&quot;"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1491572958, "post_id": 43279552, "comment_id": 73627557, "body": "what he used is ungreedy, the opposite. Be careful. <code>.</code> means anything, <code>*</code> is the quantifier. <code>*</code> is zero or more, as much as possible. <code>*?</code> zero or more the less possible (ungreedy). <code>\\(.*?\\)</code> means match a literal <code>(</code>, followed by anything as less as possible until you reach the literal <code>)</code>"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1491572987, "post_id": 43279552, "comment_id": 73627577, "body": "sorry, Jamal. it is ungreedy. will fix,"}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "edited": false, "score": 0, "creation_date": 1491573177, "post_id": 43279552, "comment_id": 73627736, "body": "something good to read here <a href=\"http://stackoverflow.com/questions/2301285/what-do-lazy-and-greedy-mean-in-the-context-of-regular-expressions\" title=\"what do lazy and greedy mean in the context of regular expressions\">stackoverflow.com/questions/2301285/&hellip;</a>"}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 0, "last_activity_date": 1491574604, "last_edit_date": 1491574604, "creation_date": 1491572115, "answer_id": 43279552, "question_id": 43279440, "link": "https://stackoverflow.com/questions/43279440/how-to-remove-text-within-brackets-in-a-string-while-still-keeping-the-other-tex/43279552#43279552", "title": "How to remove text within brackets in a string while still keeping the other text?", "body": "<pre><code>$send =~ s/\\(.*?\\)//;\n</code></pre>\n\n<p>Explained:</p>\n\n<p><code>s/</code> does the search\n<code>\\</code> escapes the bracket that comes next as it will be seen as part of the code if not escaped.\n<code>(.*?\\)</code> here we say what we are searching for an we use non-greedy .*? to match anything up to the last bracket again the last bracket is escaped by <code>\\</code>\n<code>/</code> begins the replace function for the search\n<code>/</code> ends the search and replace.</p>\n\n<p>So we Search for (*) and then replace with nothing.</p>\n\n<p>Explaing Non greedy vs Greedy.</p>\n\n<p>.* being greedy will match up until the last <code>)</code> found</p>\n\n<p>So if we have <code>string((substring)end)</code> <code>then s/(.*)//</code> will go from the first <code>(</code> up to the last <code>)</code> leaving you with <code>string</code></p>\n\n<p>non greedy will not, it will begin with the first <code>(</code> up to the first <code>)</code> leaving you with <code>stringend)</code> so it will be lazy and only match what you ask for which is from ( to ) where greedy will match grab everything, even if you have this <code>(string)(())((strings))()()strings)strings)</code></p>\n"}, {"tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 0, "last_activity_date": 1491572219, "creation_date": 1491572219, "answer_id": 43279596, "question_id": 43279440, "link": "https://stackoverflow.com/questions/43279440/how-to-remove-text-within-brackets-in-a-string-while-still-keeping-the-other-tex/43279596#43279596", "title": "How to remove text within brackets in a string while still keeping the other text?", "body": "<p>If you don't have nested parentheses, this single substitution can do it:</p>\n\n<pre><code>$send =~ s/\\(.*?\\)//;\n</code></pre>\n\n<p>If these parenthesis are <em>always</em> the last item in text, it can be further simplified to:</p>\n\n<pre><code>$send =~s/\\(.*//;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 43279552, "answer_count": 2, "score": 1, "last_activity_date": 1491574604, "creation_date": 1491571782, "last_edit_date": 1491571958, "question_id": 43279440, "link": "https://stackoverflow.com/questions/43279440/how-to-remove-text-within-brackets-in-a-string-while-still-keeping-the-other-tex", "title": "How to remove text within brackets in a string while still keeping the other text?", "body": "<pre><code>my $book = Spreadsheet::Read-&gt;new();\nmy $book = ReadData \n('D:\\Profiles\\jmahroof\\Desktop\\Scheduled_Build_Overview.xls');\nmy $cell = \"CD7\";\nmy $n = \"1\";\nmy $send = $book-&gt;[$n]{$cell};\n$send =~ s/\\(/ /g;\n$send =~ s/\\)//g;\n</code></pre>\n\n<p>I have the above code that gets data from an excel file and then picks out text from a specified cell and removes brackets from the string. I need to be able to remove everything within the brackets including the brackets themselves while leaving the rest of the text. The format of the string is exactly like the following : <code>text(text)</code></p>\n"}, {"tags": ["string", "perl", "operators"], "comments": [{"owner": {"reputation": 347, "user_id": 686962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1b1adf8c34a1d1dda72b64e2096595ab?s=128&d=identicon&r=PG", "display_name": "monucool", "link": "https://stackoverflow.com/users/686962/monucool"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1491571768, "post_id": 43279083, "comment_id": 73626650, "body": "Updated the code."}], "answers": [{"comments": [{"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "edited": false, "score": 0, "creation_date": 1491580410, "post_id": 43279407, "comment_id": 73632913, "body": "To the down voter, I must say that I will be pleased to make corrections to this answer as soon as the reasons for the negative rating are known to me. And apologies in advance if I overlooked something."}], "tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": true, "score": 0, "last_activity_date": 1491571689, "creation_date": 1491571689, "answer_id": 43279407, "question_id": 43279083, "link": "https://stackoverflow.com/questions/43279083/parsing-conditional-operators-as-strings-and-using-as-conditional-operators/43279407#43279407", "title": "parsing conditional operators as strings and using as conditional operators", "body": "<p>What you're willing to do (executing a  string as code) can be done with\n<a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\"><code>eval</code></a>. That doesn't  mean it is the most appropriate  way of doing\nit though. Do it  only if you guarantee your input  safety and check for\nit.</p>\n\n<p>A better  way would be checking  the operator your self  and determining\nhow to proceed. If you use  a recent Perl version, the <a href=\"https://perldoc.perl.org/perlsyn.html#Switch-Statements\" rel=\"nofollow noreferrer\"><code>given-when</code></a>\nfeature can be handy to do this:</p>\n\n<pre><code>use feature 'switch'; # not needed if you already use 5.010 or greater\n\ngiven ($sign) {\n    when ('&lt;') { say \"$cond less than $value\" }\n    when ('&gt;') { say \"$cond greater than $value\" }\n    default {\n        warn \"unrecognized operator `$sign'\\n\";\n        # decide what to do\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 686962, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1b1adf8c34a1d1dda72b64e2096595ab?s=128&d=identicon&r=PG", "display_name": "monucool", "link": "https://stackoverflow.com/users/686962/monucool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 43279407, "answer_count": 1, "score": 0, "last_activity_date": 1491571711, "creation_date": 1491570710, "last_edit_date": 1491571711, "question_id": 43279083, "link": "https://stackoverflow.com/questions/43279083/parsing-conditional-operators-as-strings-and-using-as-conditional-operators", "title": "parsing conditional operators as strings and using as conditional operators", "body": "<pre><code>my $line =\"Corner:Default,Output:fall_delay_slew_1,Mean=34.97p,Std-      dev=1.767p,Min=30.02p,Max=39.71p\";    #added semicolon\nmy $my_value=\"COND = Mean &gt; 3\"; #this has come from the parsed file.\n$my_value =~ m/(\\w+)\\s*(.)\\s*(\\d+)/;\nmy $cond=$1;\nmy $sign=$2;\nmy $value=$3;\nprint \"DEBUG:cond is $cond and sign $sign and value $value \\n\";\nif ( $line =~ m/$cond=(.*?),/) {\nif ( \"$value $sign $1\" ) {\n    print \"$value is $sign than $1\\n\";\n} else {\n    print \"actual value is less\\n\";\n }\n}\n</code></pre>\n\n<p>If you see in the above if statement always evaluates to true.</p>\n\n<p>How can I solve this kind of problem i.e <code>$sign = \"&lt;\"</code> (could be any operator)\nbut when I want to compare it with <code>$value</code> I want it to function as an\noperator and not as a string.</p>\n"}, {"tags": ["excel", "perl", "replace", "spreadsheet", "substitution"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 2, "creation_date": 1491565974, "post_id": 43277388, "comment_id": 73622624, "body": "Try to escape the meta character <code>(</code> : <code>$send =~ s&#47;\\(&#47; &#47;g</code>"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491566068, "post_id": 43277388, "comment_id": 73622683, "body": "Solved, Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": true, "score": 1, "last_activity_date": 1491566097, "creation_date": 1491566097, "answer_id": 43277491, "question_id": 43277388, "link": "https://stackoverflow.com/questions/43277388/how-to-remove-or-replace-brackets-in-a-string/43277491#43277491", "title": "How to remove or replace brackets in a string?", "body": "<p>The bracket is seen as part of the code, just escape it.</p>\n\n<pre><code>$send =~ s/\\(/ /;\nprint $send;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491567136, "post_id": 43277533, "comment_id": 73623382, "body": "That&#39;s really interesting that they get compiled at a compile time, I will definitely consider using this. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491567743, "post_id": 43277533, "comment_id": 73623817, "body": "@JamalMahroof that makes it harder to use it with dynamic patterns. It&#39;s a pain. But this usecase is exactly what it&#39;s for."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1491566378, "last_edit_date": 1491566378, "creation_date": 1491566244, "answer_id": 43277533, "question_id": 43277388, "link": "https://stackoverflow.com/questions/43277388/how-to-remove-or-replace-brackets-in-a-string/43277533#43277533", "title": "How to remove or replace brackets in a string?", "body": "<p>Since you only replace one char with another, you don't want a substitution, but a <em>transliteration</em>. That's the <a href=\"http://perldoc.perl.org/functions/tr.html\" rel=\"nofollow noreferrer\"><code>tr///</code> function in Perl</a>. Since the pattern is just a list of chars, and not an actual regex, you don't need to escape the open parenthesis <code>(</code>. There is also no <code>/g</code> flag. It just substitutes all occurrences.</p>\n\n<pre><code>$send =~ tr/(/ /;\n</code></pre>\n\n<p>The main difference to a regular expression substitution is that the transliterations get compiled at <em>compile time</em>, not at <em>run time</em>. That makes the <code>tr///</code> faster than a <code>s///</code>, especially in a loop.</p>\n\n<p>See the <a href=\"http://perldoc.perl.org/perlop.html#tr%2F_SEARCHLIST_%2F_REPLACEMENTLIST_%2Fcdsr\" rel=\"nofollow noreferrer\">full documentation in perlop</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 43277491, "answer_count": 2, "score": 1, "last_activity_date": 1491566378, "creation_date": 1491565805, "question_id": 43277388, "link": "https://stackoverflow.com/questions/43277388/how-to-remove-or-replace-brackets-in-a-string", "title": "How to remove or replace brackets in a string?", "body": "<pre><code>my $book = Spreadsheet::Read-&gt;new();\nmy $book = ReadData \n('D:\\Profiles\\jmahroof\\Desktop\\Scheduled_Build_Overview.xls');\nmy $cell = \"CD7\";\nmy $n = \"1\";\nmy $send = $book-&gt;[$n]{$cell};\n</code></pre>\n\n<p>The above code gets data from a spreadsheet, then prints the content of a cell that I know has text in. It has text of exactly the following format: text(text)</p>\n\n<p>I need to replace the open bracket with a empty space and I need to remove the close bracket. I have tried the below code to substitute the open bracket for an empty space however it does not seem to work. </p>\n\n<pre><code>$send =~ s/(/ /g;\nprint $send;\n</code></pre>\n"}, {"tags": ["perl", "perl-module", "file-copying"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 3, "creation_date": 1491560708, "post_id": 43275642, "comment_id": 73619240, "body": "Try print the error message in <code>$!</code>: <code>mkdir $_ or die &quot;Could not create folder &#39;$_&#39;: $!&quot;</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 4, "creation_date": 1491561124, "post_id": 43275642, "comment_id": 73619491, "body": "Se also <code>make_path</code> in <a href=\"https://metacpan.org/pod/File::Path\" rel=\"nofollow noreferrer\">File::Path</a> it will create all the nonexistent directories in one call"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 6, "creation_date": 1491561684, "post_id": 43275642, "comment_id": 73619854, "body": "Using <code>map</code> in a void context is a sign you probably should have been using <code>for</code> instead."}, {"owner": {"reputation": 33, "user_id": 3872179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03774d8d505705315f6a6a2f1346e0f1?s=128&d=identicon&r=PG&f=1", "display_name": "Anuraag", "link": "https://stackoverflow.com/users/3872179/anuraag"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491711672, "post_id": 43275642, "comment_id": 73671251, "body": "@H&#229;konH&#230;gland I tried printing the error msg but all I am getting is &quot;No such file or directory at run.pl line 11&quot;. And thanks for your help, <i>make_path</i> is working fine and is creating nonexistent directories as well but I am just curious to find out the problem with above mentioned code."}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 3, "last_activity_date": 1491822079, "last_edit_date": 1491822079, "creation_date": 1491820702, "answer_id": 43320996, "question_id": 43275642, "link": "https://stackoverflow.com/questions/43275642/perl-script-problems-with-mkdir-and-chdir/43320996#43320996", "title": "PERL Script : problems with mkdir and chdir", "body": "<p>The issue is that you <code>chdir</code> into all of your subdirectories of <code>checkAndCreateDirectory</code> but never return to where you started, so when you call <code>moveFiles</code>, you are in the wrong place and cannot find your <code>$destination_dir</code>.</p>\n\n<p>I would simplify your script like this:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse File::Copy::Recursive qw( dirmove );\nuse File::Path qw( make_path );\n\nmy $saml_handler_path = 'launchpad/config/com/adobe/granite/auth/saml/SamlAuthenticationHandler';\n\nmake_path $saml_handler_path\n    or die \"Unable to create path '$saml_handler_path' : $!\";\n\nmy $source_dir = \"SamlAuthenticationHandler\";\nmy $dest_dir = $saml_handler_path;\n\ndirmove( $source_dir, $dest_dir )\n    or die \"Unable to move $source_dir to $dest_dir : $!\";\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3872179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03774d8d505705315f6a6a2f1346e0f1?s=128&d=identicon&r=PG&f=1", "display_name": "Anuraag", "link": "https://stackoverflow.com/users/3872179/anuraag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491822079, "creation_date": 1491560445, "question_id": 43275642, "link": "https://stackoverflow.com/questions/43275642/perl-script-problems-with-mkdir-and-chdir", "title": "PERL Script : problems with mkdir and chdir", "body": "<pre><code>checkAndCreateDirectory();\nmoveFiles();\nsub checkAndCreateDirectory {\n    my $dirname = \"launchpad/config/com/adobe/granite/auth/saml/SamlAuthenticationHandler\";\n    my @folders = split /\\/|\\\\/, $dirname;\n    map { mkdir $_; chdir $_; } @folders;\n}\nsub moveFiles {\n    my $source_dir = \"SamlAuthenticationHandler\";\n    my $destination_dir = \"launchpad/config/com/adobe/granite/auth/saml/SamlAuthenticationHandler\";\n    opendir(my $DIR, $destination_dir) || die \"can't opendir $source_dir: $!\";\n    move(\"$source_dir\", \"$destination_dir\") or die \"FAIL : Unable to add config -&gt; $!\";\n}\n</code></pre>\n\n<p><strong>checkAndCreateDirectory()</strong> and <strong>moveFiles()</strong> subroutines are running fine with sepaerate script but when tried to run in same script it throws error : <strong>No such file or directory</strong> </p>\n\n<p>Can anyone please help me in figuring out the issue? Is there any issue with </p>\n\n<blockquote>\n  <p>map { mkdir $<em>; chdir $</em>; } @folders;</p>\n</blockquote>\n\n<p>?</p>\n"}, {"tags": ["windows", "perl", "parameters", "quotes"], "answers": [{"tags": [], "owner": {"reputation": 16761, "user_id": 1454708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSzgk.png?s=128&g=1", "display_name": "Nahuel Fouilleul", "link": "https://stackoverflow.com/users/1454708/nahuel-fouilleul"}, "is_accepted": true, "score": 2, "last_activity_date": 1491567152, "last_edit_date": 1495542749, "creation_date": 1491562918, "answer_id": 43276525, "question_id": 43275242, "link": "https://stackoverflow.com/questions/43275242/perl-passing-parameters-on-windows/43276525#43276525", "title": "perl passing parameters on windows", "body": "<p>Wilcard expansion is done by the shell, but not when the parameter is enclosed between quotes, on windows to port perl scripts there is a module Win32::AutoGlob <a href=\"https://stackoverflow.com/questions/7417991/making-perl-on-windows-work-like-linux-wildcarded-param-expansion\">see also this SO question</a></p>\n\n<p>A quick fix: replace ( @ARGV ) by ( glob \"@ARGV\" )</p>\n\n<pre><code>$op = shift or die \"Usage: rename expr [files]\\n\";\nchomp(@ARGV = &lt;STDIN&gt;) unless @ARGV;\nprint \"$op\";\n\nfor ( glob \"@ARGV\" )\n{\n  print \"$_\";\n  $was = $_;\n  eval $op;\n  die $@ if $@;\n  rename ( $was, $_ ) unless $was eq $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43276525, "answer_count": 1, "score": 0, "last_activity_date": 1491567152, "creation_date": 1491559286, "last_edit_date": 1491560368, "question_id": 43275242, "link": "https://stackoverflow.com/questions/43275242/perl-passing-parameters-on-windows", "title": "perl passing parameters on windows", "body": "<p>I have the following code :</p>\n\n<pre><code>$op = shift or die \"Usage: rename expr [files]\\n\";\nchomp(@ARGV = &lt;STDIN&gt;) unless @ARGV;\nprint \"$op\";\n\nfor ( @ARGV )\n{\n  print \"$_\";\n  $was = $_;\n  eval $op;\n  die $@ if $@;\n  rename ( $was, $_ ) unless $was eq $_;\n }\n</code></pre>\n\n<p>It produces the expected result on a linux machine, i.e. when I run </p>\n\n<pre><code>  perl massrenamer.pl 's/\\.txt/\\.txtla/' *.txt\n</code></pre>\n\n<p>I get proper results. I try to execute the same thing on a windows machine, with strawberry perl installed like</p>\n\n<pre><code>  perl massrenamer.pl 's/\\.txt/\\.txtla/' *.txt\n</code></pre>\n\n<p>and</p>\n\n<pre><code>  perl massrenamer.pl \"s/\\.txt/\\.txtla/\" *.txt\n</code></pre>\n\n<p>and  </p>\n\n<pre><code>  perl massrenamer.pl 's/\\.txt/\\.txtla/' \"*.txt\"\n</code></pre>\n\n<p>but I get no result. Could someone help?</p>\n"}, {"tags": ["perl", "perl-data-structures"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1491562456, "creation_date": 1491562456, "answer_id": 43276353, "question_id": 43274595, "link": "https://stackoverflow.com/questions/43274595/compare-files-and-print-difference-using-print-unless/43276353#43276353", "title": "Compare Files and print difference using print unless", "body": "<p>You can use a hash to do that. It's a bit like counting, just that you don't simply count, but keep a list of files in each key. It would look like this:</p>\n\n<pre><code>{\n    new =&gt; [\n        'file1',\n        'file3',\n    ],\n    deleted =&gt; [\n        'file4',\n    ],\n    changed =&gt; ]\n        'file5',\n    ],\n},\n</code></pre>\n\n<p>Create that hash (or in my example a hash reference) outside the loop, and then push into the array ref in the appropriate key. You don't even need to create the array ref, <em>autovivification</em> will take care of that for you.</p>\n\n<pre><code>my $diff; # we keep track here\nforeach my $file (@files) {\n\n# ...\n\nwhile (my $line = &lt;$a_fh&gt;) {\n        if ( exists $tmpDirFile{unpack 'A*', $line} ) {\n            # do stuff to check what the difference is \n            if ( find_diff($line) ){\n                push @{ $diff-&gt;{changed} }, $line;\n            } else {\n                push @{ $diff-&gt;{deleted} }, $line;\n            }\n        } else {\n             push @{ $diff-&gt;{new} }, $line;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 6925350, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QOc5uK0-RrU/AAAAAAAAAAI/AAAAAAAAACY/HmvMrw0bAc4/photo.jpg?sz=128", "display_name": "TheBadBossy", "link": "https://stackoverflow.com/users/6925350/thebadbossy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1491562456, "creation_date": 1491557482, "question_id": 43274595, "link": "https://stackoverflow.com/questions/43274595/compare-files-and-print-difference-using-print-unless", "title": "Compare Files and print difference using print unless", "body": "<p>i got the following function and dont know how to put the output into a variable.</p>\n\n<pre><code>sub checkFiles {\n# Declaration\nmy $origDir=\"/home/hbo/test/chksum/\";\nmy $tmpDir=\"/home/hbo/test/tmp/\";\n\n# get directory inventory\nopendir( DIR, $origDir);\nmy @files = sort ( grep { !/^\\.|\\.\\.}$/ } readdir(DIR) );\nclosedir(DIR);\nforeach my $file (@files) {\n  if ( !-r $origDir.$file) { print $origDir.$file, \"does not exist\"; next;}\n\n  # open filehandles\n  open my $a_fh, '&lt;', $origDir.$file or die \"$origDir.$file: $!\";\n  open my $b_fh, '&lt;', $tmpDir.$file or die \"$tmpDir.$file: $!\";\n\n  # map difference\n  my %tmpDirFile;\n  @tmpDirFile{map { unpack 'A*', $_ } &lt;$b_fh&gt;} = ();\n\n  # print difference\n  while (&lt;$a_fh&gt;) {\n    print unless exists $tmpDirFile{unpack 'A*', $_};\n  }\n  close $a_fh;\n  close $b_fh;\n  }\n}\n</code></pre>\n\n<p>The Line i got the questions is \"print unless exists $tmpDirFile{unpack 'A*', $_};\" i want to put this output into a variable like an array where i can decide between \"changed\" or \"deleted\" or \"new\". A short summary what my script will do: it builds a md5 sum of a directory, check if the directory differs from the version before and print the differences with flags like \"new\", \"deleted\", \"changed\". And yes I don't want to use additional libraries.</p>\n\n<p>The output on console is: </p>\n\n<pre><code>40567504a8a2f9f665695a49035b381b /home/hbo/test/somedir/some/some.conf\n</code></pre>\n\n<p>Now I want to show if the file has changed, deleted or is new. Because of this i need to put the output into a variable. Can someone help me?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491556255, "post_id": 43273974, "comment_id": 73616221, "body": "@teser: Have you seen my demo? What output do <i>you</i> expect? &quot;It-did-not-work&quot; does not help understanding <i>how</i> it should work."}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491556895, "post_id": 43273974, "comment_id": 73616684, "body": "My apologies. I get the below error. Bareword found where operator expected at 2.pl line 18, near &quot;s#,#|#gr&quot;"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491556978, "post_id": 43273974, "comment_id": 73616739, "body": "This issue is related to how you are using the solution in <i>your code</i>, see <a href=\"http://stackoverflow.com/questions/4833203/bareword-found-where-operator-expected\">this answer</a>."}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491557870, "post_id": 43273974, "comment_id": 73617388, "body": "perl -lpe &#39;s/(&#91;[^][]+])/$1=~s/,/|/&#39; str.txt  where str.txt has the input in it. But output is incorrect"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491557911, "post_id": 43273974, "comment_id": 73617415, "body": "You should not use the same regex delimiters in the replacement part. Use <code>#</code> as in my example. Or enclose it with <code>{...}</code>. But be sure to use the same modifiers as in my example above. I see you dropped them from the regex. Have a look at <a href=\"http://ideone.com/D9ZvuN\" rel=\"nofollow noreferrer\">this demo</a>."}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491558719, "post_id": 43273974, "comment_id": 73617993, "body": "I tried the same , but I get the below issue    echo &quot;F1,F2,[as1,as2],[as3,as4]&quot; | perl -lpe &#39;s/(&#91;[^][]+])/$1=~s#,#|#gr/ge&#39;                                                     Bareword found where operator expected at -e line 1, near &quot;s#,#|#gr&quot;  syntax error at -e line 1, near &quot;s#,#|#gr"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491558967, "post_id": 43273974, "comment_id": 73618154, "body": "Ok, see <a href=\"http://stackoverflow.com/questions/3923967/why-does-my-perl-one-liner-report-bareword-found-where-operator-expected\" title=\"why does my perl one liner report bareword found where operator expected\">stackoverflow.com/questions/3923967/&hellip;</a>"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491561514, "post_id": 43273974, "comment_id": 73619734, "body": "What is your Perl version? <code>r</code> modifier appeared in Perl 5.14."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491562782, "post_id": 43273974, "comment_id": 73620608, "body": "@tester: The <code>r</code> modifier appeared in Perl 5.14. Either upgrade your Perl, or use another solution I posted."}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491563494, "post_id": 43273974, "comment_id": 73621066, "body": "The new solution will not work if input is like [as1,as2,as3],[as4,as5]"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491564131, "post_id": 43273974, "comment_id": 73621456, "body": "Ok, I see, the greedy <code>*</code> should be replaced with a non-greedy, lazy, one, <code>*?</code>. See <a href=\"http://ideone.com/WFqHZj\" rel=\"nofollow noreferrer\">the final demo here</a>."}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491564815, "post_id": 43273974, "comment_id": 73621903, "body": "@tester: Glad it worked for you. Please consider accepting the answer."}, {"owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "edited": false, "score": 0, "creation_date": 1491565160, "post_id": 43273974, "comment_id": 73622140, "body": "can you tell me why have you used \\K and (\\G(?!^)"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1491565273, "post_id": 43273974, "comment_id": 73622197, "body": "<code>\\G</code> matches at the start of the string or end of the previous successful match, it is important to add <code>(?!^)</code>  that will subtract the start of string position. <code>\\K</code> is used for a more convenient replacement, otherwise, I&#39;d have to capture the <code>[^]]*</code> part and use a backreference in the replacement. <code>\\K</code> is just used for convenience. And one more thing: <code>&#39;s&#47;(?:\\[|\\G(?!^))[^],]*\\K,&#47;|&#47;g&#39;</code> seems to be the best pattern here as the <code>[^],]</code> matches any char but <code>]</code> and <code>,</code>, and the <code>*</code> can be left greedy."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1491564114, "last_edit_date": 1491564114, "creation_date": 1491555636, "answer_id": 43273974, "question_id": 43273809, "link": "https://stackoverflow.com/questions/43273809/replacing-multiple-occurrences-of-a-char-between-two-string-patterns/43273974#43273974", "title": "Replacing multiple occurrences of a char between two string patterns", "body": "<p>For the versions of Perl older than Perl 5.14, you can't but use a regex like</p>\n\n<pre><code>echo \"[as1,as2,as3],[as4,as5]\" | perl -lpe 's/(?:\\[|\\G(?!^))[^]]*?\\K,/|/g'\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/WFqHZj\" rel=\"nofollow noreferrer\">online demo</a>.</p>\n\n<p><strong>Pattern details</strong>:</p>\n\n<ul>\n<li><code>(?:\\[|\\G(?!^))</code> - either a literal <code>[</code> or the end of the previous match (<code>\\G(?!^)</code>)  </li>\n<li><code>[^]]*?</code> - zero or more chars other than <code>]</code>, as few as possible, are matched</li>\n<li><code>\\K</code> - the whole match value is dropped</li>\n<li><code>,</code> - a comma lands in the match (that is replaced with <code>|</code>).</li>\n</ul>\n\n<p>For Perl version 5.14 and newer (<em>where <code>r</code> modifier appeared</em>), you may match the <code>[...]</code> substrings with <code>\\[[^][]+]</code> regex (that matches <code>[</code>, then 1+ chars other than <code>[</code> and <code>]</code>, and then <code>]</code>) and perform the replacements inside these matches:</p>\n\n<pre><code>echo \"F1,F2,[as1,as2],[as3,as4]\" | perl -lpe 's/(\\[[^][]+])/$1=~s#,#|#gr/ge'\n# =&gt; F1,F2,[as1|as2],[as3|as4]\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/POUaH2\" rel=\"nofollow noreferrer\">online demo</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "is_accepted": false, "score": 1, "last_activity_date": 1491556455, "creation_date": 1491556455, "answer_id": 43274258, "question_id": 43273809, "link": "https://stackoverflow.com/questions/43273809/replacing-multiple-occurrences-of-a-char-between-two-string-patterns/43274258#43274258", "title": "Replacing multiple occurrences of a char between two string patterns", "body": "<p>A simple one-liner may solve your task:  </p>\n\n<p>input:  </p>\n\n<pre><code>F1,F2,[as1,as2],[as3,as4]\n\nF3,F4,F5,[as5,as6]\n</code></pre>\n\n<p><code>perl -lpe 's/\\[(.*?),(.*?)\\]/[$1|$2]/g' file</code>  </p>\n\n<p>the output:</p>\n\n<pre><code>F1,F2,[as1|as2],[as3|as4]\n\nF3,F4,F5,[as5|as6]\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 4711937, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/35ae8720d1676c12292012d312dd541c?s=128&d=identicon&r=PG&f=1", "display_name": "tester", "link": "https://stackoverflow.com/users/4711937/tester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 43273974, "answer_count": 2, "score": 2, "last_activity_date": 1536749420, "creation_date": 1491555211, "last_edit_date": 1536749420, "question_id": 43273809, "link": "https://stackoverflow.com/questions/43273809/replacing-multiple-occurrences-of-a-char-between-two-string-patterns", "title": "Replacing multiple occurrences of a char between two string patterns", "body": "<p>I have a file 1.txt with below content</p>\n\n<p>F1,F2,[as1,as2],[as3,as4]</p>\n\n<p>F3,F4,F5,[as5,as6]</p>\n\n<p>I require to write a regex in perl  so that I should change the delimiter ',' inbetween <code>[' and ']</code> to <code>|</code> . </p>\n\n<p>I tried below, but it did not work. </p>\n\n<pre><code>@qr = $st = /\\{(.*)(\\|)+\\}/;\n</code></pre>\n\n<p>where <code>$st</code> has the input string.</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491555453, "post_id": 43272124, "comment_id": 73615625, "body": "... or non-greedy <code>s&#47;\\bserial=.*?\\s+&#47;&#47;;</code> :)"}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": true, "score": 0, "last_activity_date": 1491549986, "creation_date": 1491549986, "answer_id": 43272124, "question_id": 43272039, "link": "https://stackoverflow.com/questions/43272039/remove-a-word-from-a-line-if-the-word-contains-a-particular-pattern-in-perl/43272124#43272124", "title": "Remove a word from a line if the word contains a particular pattern in perl", "body": "<p>Use this code:</p>\n\n<pre><code>my $string = \"append serial=xyx end\";\n$string =~ s/serial\\=.*\\s+//;\nwarn $string;\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>append end at test.pl line 3.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1491556215, "creation_date": 1491556215, "answer_id": 43274181, "question_id": 43272039, "link": "https://stackoverflow.com/questions/43272039/remove-a-word-from-a-line-if-the-word-contains-a-particular-pattern-in-perl/43274181#43274181", "title": "Remove a word from a line if the word contains a particular pattern in perl", "body": "<pre><code>s/serial\\S*//\n</code></pre>\n\n<p>Literally, match following and replace it with empty string:</p>\n\n<ol>\n<li><code>serial</code></li>\n<li><code>\\S</code> non-space</li>\n<li><code>*</code> zero or more times</li>\n</ol>\n"}], "owner": {"reputation": 13, "user_id": 2303907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bec7c91c99db3cae21dae439e31c488?s=128&d=identicon&r=PG", "display_name": "user2303907", "link": "https://stackoverflow.com/users/2303907/user2303907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 43272124, "answer_count": 2, "score": -1, "last_activity_date": 1491556215, "creation_date": 1491549708, "question_id": 43272039, "link": "https://stackoverflow.com/questions/43272039/remove-a-word-from-a-line-if-the-word-contains-a-particular-pattern-in-perl", "title": "Remove a word from a line if the word contains a particular pattern in perl", "body": "<p>I have a line say \"append serial=xyx end\";\nI will search the line for \"serial\" and if it is present in the line I was to remove until the next space character from current position. \nThe line will look like:\n\"append end\" after the operations are completed</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 73, "user_id": 3803978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad3fbcd40d1bf52e8f1f7241a8450ae?s=128&d=identicon&r=PG&f=1", "display_name": "user43102", "link": "https://stackoverflow.com/users/3803978/user43102"}, "edited": false, "score": 0, "creation_date": 1491547170, "post_id": 43270582, "comment_id": 73610832, "body": "my @lines =&lt;FILE_IN&gt;; foreach my $index (reverse 0..$#lines){ if ($lines[$index]=~m/\\s(\\w*)_region\\s){ splice @lines($index,0,&quot;/t$string\\n&quot;);} } this worked for me."}], "answers": [{"comments": [{"owner": {"reputation": 3234, "user_id": 545650, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/QLixx.png?s=128&g=1", "display_name": "PlusInfosys", "link": "https://stackoverflow.com/users/545650/plusinfosys"}, "edited": false, "score": 1, "creation_date": 1491552547, "post_id": 43271542, "comment_id": 73613863, "body": "Please consider adding some description. How this code will solve the problem."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1491556632, "post_id": 43271542, "comment_id": 73616498, "body": "Whilst this code snippet is welcome, and may provide some help, it would be <a href=\"//meta.stackexchange.com/q/114762\">greatly improved if it included an explanation</a> of <i>how</i> and <i>why</i> this solves the problem. Remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/43271542/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 1211, "user_id": 948212, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1ba5d38efed0cd3a8281edebb37db2b?s=128&d=identicon&r=PG", "display_name": "Anton Shevtsov", "link": "https://stackoverflow.com/users/948212/anton-shevtsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1491548113, "creation_date": 1491548113, "answer_id": 43271542, "question_id": 43270582, "link": "https://stackoverflow.com/questions/43270582/i-want-to-add-an-element-to-array-after-matching-pattern-found-using-perl/43271542#43271542", "title": "I want to add an element to array after matching pattern found using perl", "body": "<pre><code>open my $ifile,'&lt;:encoding(UTF-8)', '/path/to/file.txt' || die $!;\nwhile (my $line = &lt;$ifile&gt;) {\n    chomp $line;\n    if ($line =~m/\\s(\\w*)_region\\s/x) {\n        print $line\n    }   \n}\nclose $ifile;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3803978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ad3fbcd40d1bf52e8f1f7241a8450ae?s=128&d=identicon&r=PG&f=1", "display_name": "user43102", "link": "https://stackoverflow.com/users/3803978/user43102"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1491548113, "creation_date": 1491544195, "last_edit_date": 1491544914, "question_id": 43270582, "link": "https://stackoverflow.com/questions/43270582/i-want-to-add-an-element-to-array-after-matching-pattern-found-using-perl", "title": "I want to add an element to array after matching pattern found using perl", "body": "<p>I've copied all lines of a file to an array and looping this array for pattern matching once pattern matches, I want to add lines to same array and print in another file.</p>\n\n<pre><code>my @lines = &lt;FILE_IN&gt;;\nforeach my $line (@lines){\nif($line =~m/\\s(\\w*)_region\\s/){\nprint $line;\n}\n</code></pre>\n\n<p>I tried till pattern matching, and want to add an element after this search.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1491542044, "post_id": 43269526, "comment_id": 73608715, "body": "Variable scope is important. The <code>my</code> keyword declares variables that are lexically scoped, which means that they can&#39;t be accessed outside their block."}, {"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1491542803, "post_id": 43269526, "comment_id": 73608959, "body": "So should I locally scope them, or what?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1491542900, "post_id": 43269526, "comment_id": 73608996, "body": "You&#39;re the badass biological programmer. What do you think you should do?"}, {"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1491543000, "post_id": 43269526, "comment_id": 73609028, "body": "Haha! I just write that to make me feel more accomplished. I am a little self-absorbed, but it keeps me motivated, sorry."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1491543267, "post_id": 43269526, "comment_id": 73609109, "body": "You&#39;ve restricted their scope too much. You need to place their declarations such that they are visible to all code that uses them. Sounds like you want them outside the <code>while</code> loop."}, {"owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "edited": false, "score": 0, "creation_date": 1491544064, "post_id": 43269526, "comment_id": 73609403, "body": "Okay, I will see if that works."}], "owner": {"reputation": 611, "user_id": 7024991, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/515eb7cb8df03bf0475a7edf3b066492?s=128&d=identicon&r=PG&f=1", "display_name": "xyz123", "link": "https://stackoverflow.com/users/7024991/xyz123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1491597987, "creation_date": 1491538536, "last_edit_date": 1491597987, "question_id": 43269526, "link": "https://stackoverflow.com/questions/43269526/in-perl-how-do-i-reference-a-value-within-a-loop-after-i-exited-a-loop-still-in", "title": "In Perl, how do I reference a value within a loop after I exited a loop still in another loop", "body": "<p>I've been working on this for days. So, my project is to work with some protein data bank files (*.ent) using perl. I have a whole huge directory full of them, and I need to calculate the distance between the atoms CD1 and OD2. If OD2 is not present, then I calculate the distance between atom CD1 and OE2. Never are both atoms present in the file. This isn't an issue for me now, as I can directly print out those values in each file within an if and an elsif condtional.</p>\n\n<p>But when I exit that if/elsif conditional, the memory of those values in each file, goes away. Again, I've done a lot of hard work to open up a whole loop of files to print the solutions to for each file.</p>\n\n<p>Essentially, in order to calculate the distance, I need to calculate the radial distance for two points: P(x1,y1,z1) and Q(x2,y2,z2), where point P is the x,y,z coordinates of CD1 atom, and point Q is the x,y,z distance of OD2 or OE2. But I called them alternatives to CD1 atom coordinates. </p>\n\n<p>PQ distance = sqrt[(x2 - x1)^2 + (y2 - y1)^2 + (z2 - z1)^2]</p>\n\n<p>In order to deal with like 800 (*.ent) files, I used a foreach loop to iterative over all files in a directory, and a while loop to loop through them. There are several columns of the *.ent files are separated by variable amounts of white-space, so separated each line into an array based on those conditions, and the array was @fields, so $fields[2] is the counting from zero the third column of the .ent file being processed, or the 3rd column is the atom name. </p>\n\n<hr>\n\n<p>From all that I've parsed my *.ent files this is all you see, though the files do have more information. I just separated each line which if it contained ATOM. </p>\n\n<pre><code>ATOM      1  CB  GLU A   9      53.764  15.456  11.540  1.00  0.00           C\n\nATOM      2  CG  GLU A   9      53.265  15.125  12.928  1.00  0.00           C\n\nATOM      3  CD  GLU A   9      54.264  15.606  13.972  1.00  0.00           C\n\nATOM      4  OE1 GLU A   9      55.435  15.909  13.653  1.00  0.00           O\n\nATOM      5  OE2 GLU A   9      53.831  15.724  15.123  1.00  0.00           O1-\n\nATOM      6  CB  TRP A  16      51.989  19.241  13.113  1.00  0.00           C\n\nATOM      7  CG  TRP A  16      53.254  19.906  13.560  1.00  0.00           C\n\nATOM      8  CD1 TRP A  16      54.518  19.371  13.545  1.00  0.00           C\n\nATOM      9  CD2 TRP A  16      53.380  21.238  14.053  1.00  0.00           C\n\n...\n</code></pre>\n\n<p>There are more lines of ATOMS but this is all I need. \n-----------</p>\n\n<p>\\The first three columns containing decimals as you read the file right to left are the x-y-z coordinates. Starting counting from zero, column 2 is the atom name (this is very important to me as it's the basis of my calculation), and column three is an amino acid abbreviation for the two amino acids in my file. They are actually not important because the important atoms CD1, OD2, or OE2 are the only ones that matter, and they don't repeat repeat so I can't mix the atoms up, and I am referring to the right atoms in each residue. </p>\n\n<p>My entire perl script to calculate the distance looks like this. It's a lot! </p>\n\n<pre><code>    #!/usr/bin/perl\n    use strict;\n    use warnings;\n    use 5.010;\n    use Math::Complex;\n\n# This program will take all *.gjf files in a directory and calcualte the distance of OE2 of Glutamate to CD1 of Trypotphan,\n# It will also calculate the distance of OD2 of Aspartate to CD1 of Trypotphan.\n\n# Logic: If residue =~ Asp, then calculate distance of OD2 to CD1\n# Logic: If residue =~ GLU, then calculte distance of OE2 to CD1. \n\n# 3D distance = sqrt[(x2 - x1)^2 + (y2 - y1)^2 + (z2 - z1)^2]\n# This is the formula for the distance between points (x1, y1, z1), and (x2, y2, z2) in three-dimmensional space, or in a sphere. \n\n# x1, y1, z1 = OD2 atom of Aspartate, or OE2 atom of Glutamate.\n# x2, y2, z2 = CD1 atom of Tryptophan.\n\n\n    print \"Watch and Learn!\\n\"; # Because I'm a badass biological programmer solving a complex problem.  \n\n    my @files = &lt;*.ent&gt;; # Save all the files in current directory as an array. \n    my $file_array; # This will be used to calculate how many PDB files were in the directory \n\n    foreach my $file (@files) # A foreach loop loops through all the PDB files in the directory individually. \n    {\n\n\n    my ($base,$ext) = split (/\\./,$file); # split the files along the period (.) to a base and extension. \n    print \"filename is $file\\n\";\n    print \"basename = $base \\n\";\n    print \"extension = $ext \\n\";\n\n    my $OUTFILE_CD1_Distance = join('_', $base, \"CD1_dist\"); # *_CD1_dist.ent denotes that this is the file of the distance solution to the this file.\n       $OUTFILE_CD1_Distance = join('.', $OUTFILE_CD1_Distance, \"txt\"); # The PDB extension has to be added to the file. \n\n    open (my $fh, '&lt;:encoding(UTF-8)', $file) # open a file to read from. # This is my ent file.  \n    or die \"Could not open file $file $!\";\n    open(my $Coordinates, '&gt;', $OUTFILE_CD1_Distance)\n    or die \"Could not open file $OUTFILE_CD1_Distance $!\"; \\# open a file to write to. # Coordinates is for PDB coordinates. \n\n    my $counter; \n    $counter = 0; \n    while (my $line =&lt;$fh&gt;) # while loop goes through all the rows of the original PDB files till it reaches the end. \n    {\n    chomp $line;    \n    $counter++;\n\n    if ($line =~ m/ATOM/)\n    {\n    #  print \"$line\\n\";\n     my  @fields = split(/\\s+/, $line); \n     # save the fields 2,3, 6,7,8\n\n     my $Atom = $fields[2];\n     my $Residue = $fields[3];\n\n     my $x_coordinate = $fields[6];\n     my $y_coordinate = $fields[7];\n     my $z_coordinate = $fields[8];\n\n#        Now that everything is parsed, calculate the distance. \n#    my $delta_x = $x_CD1_coordinate - $x_alt_coordinate;\n#    my $delta_x_squared = $delta_x * $delta_x;\n\n#    my $delta_y = $y_CD1_coordinate - $y_alt_coordinate;\n#    my $delta_y_squared = $delta_y * $delta_y;\n\n#    my $delta_z = $z_CD1_coordinate - $z_alt_coordinate;\n#    my $delta_z_squared = $delta_z * $delta_z; \n\n#    my $sum_of_squares_diff = $delta_x_squared + $delta_y_squared + $delta_z_squared;\n\n#    my $CD1_distance = sqrt($sum_of_squares_diff);\n\n     if ($fields[2] =~ m /CD1/)\n     {\n         my $x_CD1_coordinate = $x_coordinate;\n         my $y_CD1_coordinate = $y_coordinate;\n         my $z_CD1_coordinate = $z_coordinate;\n\n         \\# print \"$x_CD1_coordinate\";\n        \\#   print \"$z_CD1_coordinate\\n\";\n     }\n     elsif ($fields[2] =~ m/OD2|OE2/)\n     {\n         my $x_alt_coordinate = $x_coordinate;\n         my $y_alt_coordinate = $y_coordinate;\n         my $z_alt_coordinate = $z_coordinate; \n\n     #    print \"$x_alt_coordinate\\n\";\n#        print \"$x_coordinate\";\n\n     }\n         print \"\\$x_CD1_coordinate\\n\";\n\n#   my $x_coordinate = $ echo $line | awk '{print $3}';\n#    print $x_coordinate; \n    }\n\n    } # ending while loop\n\n} #ending foreach loop \n\n    $file_array = scalar(@files);\n\n\n    print \"\\nI just processed $file_array ent files for you ... Computing the distance from CD1\\n\"; \n</code></pre>\n\n<p>End of script: </p>\n\n<p>What my issue is that while I can issue print statements in the if ($field  conditionals) to print the the 6 variables that I need to calculate the equation of the line, and it will print exactly those values. But when I exit that if conditional and try to print one of those 6 variables which is inside the if-conditional, while I am out of the if-conditional it will not work.</p>\n\n<p>Basically, the issue is that I'm in one room and my program is in another room when I try to execute the formula that I commented out in my program. But if I can only see the x,y,z coordinates for only one point when I am in the loop.</p>\n\n<p>Do you understand my problem? Can you offer some suggestions? </p>\n\n<p>Thank you! </p>\n\n<hr>\n\n<p>Hey, you know \nyou guys were right about the variable scope. I should have declared the my variables up higher up within the while loop of the program. I met with a colleague and we fixed the program! </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse 5.010;\nuse Math::Complex;\n\n# This program will take all *.gjf files in a directory and calcualte the distance of OE2 of Glutamate to CD1 of Trypotphan,\n# It will also calculate the distance of OD2 of Aspartate to CD1 of Trypotphan.\n\n# Logic: If residue =~ Asp, then calculate distance of OD2 to CD1\n# Logic: If residue =~ GLU, then calculte distance of OE2 to CD1. \n\n# 3D distance = sqrt[(x2 - x1)^2 + (y2 - y1)^2 + (z2 - z1)^2]\n# This is the formula for the distance between points (x1, y1, z1), and (x2, y2, z2) in three-dimmensional space, or in a sphere. \n\n# x1, y1, z1 = OD2 atom of Aspartate, or OE2 atom of Glutamate.\n# x2, y2, z2 = CD1 atom of Tryptophan.\n\n\nprint \"Watch and Learn!\\n\"; # Because I'm a badass biological programmer solving a complex problem.  \n\nmy @files = &lt;*.ent&gt;; # Save all the files in current directory as an array. \nmy $file_array; # This will be used to calculate how many PDB files were in the directory \n\n    foreach my $file (@files) # A foreach loop loops through all the PDB files in the directory individually. \n{\n\n\n    my ($base,$ext) = split (/\\./,$file); # split the files along the period (.) to a base and extension. \n    print \"filename is $file\\n\";\n    print \"basename = $base \\n\";\n    print \"extension = $ext \\n\";\n\n    my $OUTFILE_CD1_Distance = join('_', $base, \"CD1_dist\"); # *_CD1_dist.ent denotes that this is the file of the distance solution to the this file.\n    $OUTFILE_CD1_Distance = join('.', $OUTFILE_CD1_Distance, \"txt\"); # The PDB extension has to be added to the file. \n\n    open (my $fh, '&lt;:encoding(UTF-8)', $file) # open a file to read from. # This is my ent file.  \n    or die \"Could not open file $file $!\";\n    open(my $Coordinates, '&gt;', $OUTFILE_CD1_Distance)\n    or die \"Could not open file $OUTFILE_CD1_Distance $!\"; \\# open a file to write to. # Coordinates is for PDB coordinates. \n\n    my $counter;\n    $counter = 0;\n    my ($x_CD1_coordinate, $y_CD1_coordinate, $z_CD1_coordinate);\n    my ($x_alt_coordinate, $y_alt_coordinate, $z_alt_coordinate);\n    while (my $line =&lt;$fh&gt;) # while loop goes through all the rows of the original PDB files till it reaches the end. \n    {\n    chomp $line;    \n    $counter++;\n\n    if ($line =~ m/ATOM/)\n    {\n    #  print \"$line\\n\";\n    my  @fields = split(/\\s+/, $line); \n     # save the fields 2,3, 6,7,8\n\n    my $atom = $fields[2];\n    my $residue = $fields[3];\n    my $x_ref_CD1_coordinate;\n\n    my $x_coordinate = $fields[6];\n    my $y_coordinate = $fields[7];\n    my $z_coordinate = $fields[8];\n\n     if ($fields[2] =~ m/CD1/)\n     {\n          $x_CD1_coordinate = $x_coordinate;\n          $y_CD1_coordinate = $y_coordinate;\n          $z_CD1_coordinate = $z_coordinate;\n     #my $x_ref_CD1_coordinate = \\$x_CD1_coordinate; \n\n         # print \"$x_CD1_coordinate\";\n     #   print \"$z_CD1_coordinate\\n\";\n     }\n     elsif ($fields[2] =~ m/OD2|OE2/)\n     {\n          $x_alt_coordinate = $x_coordinate;\n          $y_alt_coordinate = $y_coordinate;\n          $z_alt_coordinate = $z_coordinate; \n\n     #    print \"$x_alt_coordinate\\n\";\n#        print \"$x_coordinate\";\n\n     }\n\n#    print ref $x_CD1_coordinate\n\n#   my $x_coordinate = $ echo $line | awk '{print $3}';\n#    print $x_coordinate; \n    }\n\n    } # ending while loop\n    print \"This is my x CD1 $x_CD1_coordinate\\n\";\n    print \"This is my y alt $y_alt_coordinate\\n\";\n\n#        Now that everything is parsed, calculate the distance.\n\n    my $delta_x = $x_CD1_coordinate - $x_alt_coordinate;\n    my $delta_x_squared = $delta_x * $delta_x;\n\n    my $delta_y = $y_CD1_coordinate - $y_alt_coordinate;\n    my $delta_y_squared = $delta_y * $delta_y;\n\n    my $delta_z = $z_CD1_coordinate - $z_alt_coordinate;\n    my $delta_z_squared = $delta_z * $delta_z; \n\n    my $sum_of_squares_diff = $delta_x_squared + $delta_y_squared + $delta_z_squared;\n\n    my $CD1_distance = sqrt($sum_of_squares_diff);\n\n    # Finally print the distance to the screen and also to files: \n    print \"This is the distance $CD1_distance\\n\";\n    print $Coordinates \"$CD1_distance\\n\";\n\n} #ending foreach loop \n\n$file_array = scalar(@files);\n\n\nprint \"\\nI just processed $file_array ent files for you ... Computing the distance from CD1\\n\"; \n</code></pre>\n\n<p>I'm glad I was able to right a script to do this. I've read some Perl scripts to calculate the distance between residues, but the function calls made zero sense to me, so I'm glad I was able to write a program to calculate the distance between two atoms!</p>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 16863, "user_id": 1767412, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/25izH.png?s=128&g=1", "display_name": "billynoah", "link": "https://stackoverflow.com/users/1767412/billynoah"}, "edited": false, "score": 0, "creation_date": 1491537504, "post_id": 43269349, "comment_id": 73607281, "body": "maybe because you&#39;ve got derived tables with no alias?"}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "reply_to_user": {"reputation": 16863, "user_id": 1767412, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/25izH.png?s=128&g=1", "display_name": "billynoah", "link": "https://stackoverflow.com/users/1767412/billynoah"}, "edited": false, "score": 0, "creation_date": 1491538224, "post_id": 43269349, "comment_id": 73607462, "body": "the above changes shows syntax error@billynoah"}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "reply_to_user": {"reputation": 16863, "user_id": 1767412, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/25izH.png?s=128&g=1", "display_name": "billynoah", "link": "https://stackoverflow.com/users/1767412/billynoah"}, "edited": false, "score": 0, "creation_date": 1491538448, "post_id": 43269349, "comment_id": 73607534, "body": "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;from (select jobs_wait,jobs_ok from files order by name limit -1 &#39; @billynoah"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "reply_to_user": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491538466, "post_id": 43269402, "comment_id": 73607538, "body": "Sorry, I&#39;ll leave it to GurV, but the syntax error could be lack of parenthesis."}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491538468, "post_id": 43269402, "comment_id": 73607540, "body": "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;from (select jobs_wait,jobs_ok from files order by name limit -1 &#39; @Learning"}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491538810, "post_id": 43269402, "comment_id": 73607664, "body": "I had tested with your coded line exactly.Here every paranthesis are closed in right mannee@Learning"}, {"owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "reply_to_user": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491538982, "post_id": 43269402, "comment_id": 73607713, "body": "If you change the -1 to 1? Why do you need -1 for the limit? What exactly are you trying to do?"}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491539203, "post_id": 43269402, "comment_id": 73607775, "body": "By using mysql query i tried to take the max of five rows and the remaining rows to be added and stored with new row name called &#39;others&#39;@Learning"}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491539743, "post_id": 43269402, "comment_id": 73607945, "body": "Is it possible to add type of the row name to the &#39;others&#39; row@Learning"}, {"owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "reply_to_user": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491539761, "post_id": 43269402, "comment_id": 73607953, "body": "If you need to show the next 5 then limit has to be 5 as well Limit 5 Offset 5 this will skip 5 records.(I could be wrong thou.)"}, {"owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "reply_to_user": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491539817, "post_id": 43269402, "comment_id": 73607969, "body": "I don&#39;t quite understand what you mean by add type of the row name? Can you elaborate on this one?"}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491539867, "post_id": 43269402, "comment_id": 73607985, "body": "yes but here the others shows the values as null.How to change the text type along with row name @Learning"}, {"owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "reply_to_user": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491539965, "post_id": 43269402, "comment_id": 73608029, "body": "I still cannot understand what you mean by change the text type along with row name. Can you site an example?"}, {"owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491540006, "post_id": 43269402, "comment_id": 73608043, "body": "Here we had added the new row name called &#39;others&#39;.The thing is it prints as follows ` others        |         NULL |         NULL `.Why it is not printing the sum of the values.Instead it prints as NULL@Learning"}, {"owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "reply_to_user": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491540414, "post_id": 43269402, "comment_id": 73608174, "body": "That only means that there&#39;s a mistake in your query. If the query do not return a expected result most likely there is something wrong with your sql query. I would suggest to give an example data of your files table and the desired output based on the example data that you are going to provide. It will be easier this way instead of making a lengthy discussion."}, {"owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "reply_to_user": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "edited": false, "score": 0, "creation_date": 1491541423, "post_id": 43269402, "comment_id": 73608501, "body": "Additionally, since its a different concern you should start a separate thread for that."}], "tags": [], "owner": {"reputation": 163, "user_id": 6930080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI3SA.png?s=128&g=1", "display_name": "Learning", "link": "https://stackoverflow.com/users/6930080/learning"}, "is_accepted": true, "score": 0, "last_activity_date": 1491542804, "last_edit_date": 1491542804, "creation_date": 1491537709, "answer_id": 43269402, "question_id": 43269349, "link": "https://stackoverflow.com/questions/43269349/every-derived-table-must-have-its-own-alias-error/43269402#43269402", "title": "Every derived table must have its own alias Error?", "body": "<p>Changed the limit value</p>\n\n<pre><code>\"select name,jobs_ok,jobs_wait from ((select name,jobs_ok,jobs_wait from files order by name limit 5) union all (select 'others',sum(jobs_wait)as jobs_wait,sum(jobs_ok) as jobs_ok from (select jobs_wait,jobs_ok from files order by name limit 0 offset 5) foo)) foo \";\n</code></pre>\n\n<p>Note: Not tested I just typed it here directly, but basically you need to put an alias to your sub queries.</p>\n"}], "owner": {"reputation": 3, "user_id": 7830460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127e78260bc91859ba8f340697ee3c62?s=128&d=identicon&r=PG&f=1", "display_name": "SRVVANI", "link": "https://stackoverflow.com/users/7830460/srvvani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 43269402, "answer_count": 1, "score": -2, "last_activity_date": 1491542804, "creation_date": 1491537295, "last_edit_date": 1491537841, "question_id": 43269349, "link": "https://stackoverflow.com/questions/43269349/every-derived-table-must-have-its-own-alias-error", "title": "Every derived table must have its own alias Error?", "body": "<hr>\n\n<p>Why my following sub routine throws an every derived table must have its own alias error?</p>\n\n<pre><code>sub ok_wait\n{\nmy $str= shift;\n$DBH = &amp;connect or die \"Cannot connect to the sql server \\n\";\n$DBH-&gt;do(\"USE $str;\");\nmy $stmt=\"select name,jobs_ok,jobs_wait from (select name,jobs_ok,jobs_wait from files order by name limit 5) t union all select 'others',sum(jobs_wait)as jobs_wait,sum(jobs_ok)as jobs_ok from(select jobs_wait,jobs_ok from files order by name limit -1 offset 5) t;\";\nmy $sth = $DBH-&gt;prepare( $stmt );\n$sth-&gt;execute() or die $sth-&gt;errstr;\nmy $tmp = 0;\nwhile(my @row_array=$sth-&gt;fetchrow_array)\n{\nif ($tmp == 0) {\n$var_ok .= \"\\[\\\"$row_array[0] \\($row_array[2]\\)\\\",$row_array[2]\\]\";\n$var_wait .= \"\\[\\\"$row_array[0] \\($row_array[1]\\)\\\",$row_array[1]\\]\";\n$tmp++;\n}\n$sth-&gt;finish;\n$DBH-&gt;disconnect();\n}\n</code></pre>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491533321, "post_id": 43268116, "comment_id": 73606212, "body": "Roughly how long is a call to <code>do_stuff</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491533597, "post_id": 43268116, "comment_id": 73606289, "body": "How busy is the CPU if you replace <code>$cpu-&gt;count</code> with <code>0</code>?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491539066, "post_id": 43268116, "comment_id": 73607735, "body": "Does the <code>$cpu-&gt;count</code> match what you would expect by looking at <code>&#47;proc&#47;cpuinfo</code> ?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491553194, "post_id": 43268116, "comment_id": 73614216, "body": "What <code>%options</code> are you passing to <code>Sys::Info</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 1946989, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e9b60d27fd737c2de09430341936a6f?s=128&d=identicon&r=PG&f=1", "display_name": "user1946989", "link": "https://stackoverflow.com/users/1946989/user1946989"}, "edited": false, "score": 0, "creation_date": 1492220639, "post_id": 43273158, "comment_id": 73901555, "body": "Sorry for late response, I finished executing the &quot;do stuff&quot; and got my results, after paying more attention it seems that the slowdown was related to commands which I call in the &quot;do stuff&quot; which worked with compressed files and not the parallel framework."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1491553181, "creation_date": 1491553181, "answer_id": 43273158, "question_id": 43268116, "link": "https://stackoverflow.com/questions/43268116/how-to-speed-up-parallelforkmanager-in-perl/43273158#43273158", "title": "How to speed up Parallel::ForkManager in perl", "body": "<p>The short answer is - we can't tell you, because it depends entirely on what 'do_stuff' is doing.</p>\n\n<p>The major reasons why parallel code doesn't create linear speed increases are:</p>\n\n<ul>\n<li>Process creation overhead - some 'work' is done to spawn a process, so if the children are trivially small, that 'wastes' effort. </li>\n<li>Contented resources - the most common is disk IO, but things like file locks, database handles, sockets, or interprocess communication can also play a part. </li>\n<li>something else causing a 'back off' that stalls a process. </li>\n</ul>\n\n<p>And without knowing what 'do_stuff' does, we can't second guess what it might be. </p>\n\n<p>However I'll suggest a couple of steps:</p>\n\n<ul>\n<li>Double the number of processes to twice CPU count. That's often a 'sweet spot' because it means that any non-CPU delay in a process just means one of the others get to go full speed. </li>\n<li>Try <code>strace -fTt &lt;yourprogram&gt;</code> (if you're on linux, the commands are slightly different on other Unix variants). Then do it again with <code>strace -fTtc</code> because the <code>c</code> will summarise syscall run times. Look at which ones take the most 'time'. </li>\n<li>Profile your code to see where the hot spots are. <a href=\"http://search.cpan.org/~timb/Devel-NYTProf-6.04/lib/Devel/NYTProf.pm\" rel=\"nofollow noreferrer\"><code>Devel::NYTProf</code></a> is one library you can use for this.</li>\n</ul>\n\n<p>And on a couple of minor points:</p>\n\n<pre><code>my $manager=new Parallel::ForkManager($cpu-&gt;count);\n</code></pre>\n\n<p>Would be better off written:</p>\n\n<pre><code>my $manager=Parallel::ForkManager -&gt; new ( $cpu-&gt;count);\n</code></pre>\n\n<p>Rather than using indirect object notation. </p>\n\n<p>If you are just iterating <code>@files</code> then it might be better to not use a loop count variable and instead:</p>\n\n<pre><code>foreach my $file ( @files ) { \n    $manager -&gt; start and next;\n    do_stuff($file);\n    $manager -&gt; finish;\n}\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 1946989, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8e9b60d27fd737c2de09430341936a6f?s=128&d=identicon&r=PG&f=1", "display_name": "user1946989", "link": "https://stackoverflow.com/users/1946989/user1946989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518742861, "creation_date": 1491527462, "last_edit_date": 1518742861, "question_id": 43268116, "link": "https://stackoverflow.com/questions/43268116/how-to-speed-up-parallelforkmanager-in-perl", "title": "How to speed up Parallel::ForkManager in perl", "body": "<p>I am using EC2 amazon server to perform data processing of 63 files, \nthe server i am using has 16 core but using perl Parallel::ForkManager with number of thread = number of core then it seems like half the core are sleeping and the working core are not at 100% and fluctuate around 25%~50%\nI also checked IO and it is mostly iddling.</p>\n\n<pre><code>use Sys::Info;\nuse Sys::Info::Constants qw( :device_cpu );\nmy $info = Sys::Info-&gt;new;\nmy $cpu  = $info-&gt;device( CPU =&gt; %options );\n\nuse Parallel::ForkManager;\nmy $manager=new Parallel::ForkManager($cpu-&gt;count);\n\nfor($i=0;$i&lt;=$#files_l;$i++)\n{\n        $manager-&gt;start and next;\n        do_stuff($files_l[$i]);\n        $manager-&gt;finish;\n} \n$manager-&gt;wait_all_children;\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491526726, "post_id": 43268020, "comment_id": 73604697, "body": "Maybe use a divide and conquer approach?  Split your large files into several smaller files, process them, aggregate the results."}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491527132, "post_id": 43268020, "comment_id": 73604801, "body": "That doesn&#39;t work because a given value of $item (say, &quot;apple&quot;) may appear 1000 times throughout the input file, each time with a different frequency. And I need to merge ALL instances of &quot;apple&quot; (or whatever) and sum ALL their frequencies. Dividing the input file into multiple files will only ever achieve this within each split file, and not globally."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1491527430, "post_id": 43268020, "comment_id": 73604869, "body": "The <i>globally</i> happens when merge and aggregate the results. You&#39;re not going to find a way to do it without splitting it somehow."}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1491527696, "post_id": 43268020, "comment_id": 73604925, "body": "I actually have split it already, in a pre-processing step in order to clean out invalid entries. That reduced the total file size by 3-5%, which still leaves me with massive files that I can&#39;t process when I merge them back.  The key, I believe, is that somehow I&#39;ve managed to get Perl to use 70+ GB of memory while processing a 3-6 GB file. Hence, I am <b>convinced</b> that I&#39;m doing something wrong at the programming level. I mean, let&#39;s be honest -- if there were an IgNobel prize for coding, I&#39;d have just won it."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491527826, "post_id": 43268020, "comment_id": 73604949, "body": "Possibly, however, none of the code you have posted would use up that much memory, given your input file size.  Perhaps we need to seem more code.  The construct of looping over rows of data and counting is usually rather efficient."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491527985, "post_id": 43268020, "comment_id": 73604995, "body": "<a href=\"http://stackoverflow.com/questions/1359771/perl-memory-usage-profiling-and-leak-detection\" title=\"perl memory usage profiling and leak detection\">stackoverflow.com/questions/1359771/&hellip;</a>"}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1491528572, "post_id": 43268020, "comment_id": 73605113, "body": "Thanks for the link, but I really can&#39;t make heads or tails of how I&#39;d implement memory profiling."}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1491528735, "post_id": 43268020, "comment_id": 73605144, "body": "Looping over rows of data and counting is probably not the issue. The massive array probably is, I&#39;m guessing."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1491529817, "post_id": 43268020, "comment_id": 73605375, "body": "Maybe..but there is no massive array in the code you presented."}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1491530613, "post_id": 43268020, "comment_id": 73605567, "body": "Sorry, I meant hash rather than array. Look for <code>%F</code> in the code."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1491531835, "post_id": 43268020, "comment_id": 73605830, "body": "Why do you have the <code>END { ... }</code> block inside the while loop?  That doesn&#39;t make much sense.  Are you sure the <code>%F</code> hash is the memory usage culprit?  Use <a href=\"https://metacpan.org/pod/Devel::Size\" rel=\"nofollow noreferrer\">Devel::Size</a> to verify it."}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 0, "creation_date": 1491532537, "post_id": 43268020, "comment_id": 73606005, "body": "Instead of building a large (memory footprint) data structure, you might want to consider storing it in a DB.  That &quot;should&quot; reduce the memory footprint, but will probably increase the CPU usage."}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1491534994, "post_id": 43268020, "comment_id": 73606674, "body": "Good catch on the <code>END</code> block. I&#39;ve moved it and am running the script on a 3.6 GB file right now. But nothing seems to have changed -- it&#39;s already consumed 10 GB of RAM in about 20 minutes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491539269, "post_id": 43268020, "comment_id": 73607797, "body": "Btw, a standard approach when data sizes start biting is to use a database.  Like <a href=\"https://www.sqlite.org/\" rel=\"nofollow noreferrer\">SQLite</a> via <a href=\"http://search.cpan.org/~ishigaki/DBD-SQLite-1.54/lib/DBD/SQLite.pm\" rel=\"nofollow noreferrer\">DBD::SQLite</a> in Perl, or mySQL.  More efficient at everything, in particular for sorting, and much easier to learn than Perl."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1491544986, "post_id": 43268020, "comment_id": 73609762, "body": "I combined my initial comments into an answer, let me know if explanations are needed. I suspect that there may be more going on in code that is not shown, so some debugging ideas: how is memory doing when you start dropping parts of the process?  Start with sorting -- write it out unsorted."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1491549295, "post_id": 43268020, "comment_id": 73611992, "body": "How many unique <code>$item</code>s do you have?"}, {"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1491553881, "post_id": 43268020, "comment_id": 73614635, "body": "@tripleee, in this file there are about 250 million lines (with 1 <code>$item</code> per line). And I&#39;ve got bigger files to process later!"}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1491553974, "post_id": 43268020, "comment_id": 73614682, "body": "The question is how many times is an <code>$item</code> repeated because that will dictate your approach.  If they are very sparse (meaning you have close to 250M unique items) keeping it all in memory is probably not feasible."}, {"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1491554181, "post_id": 43268020, "comment_id": 73614817, "body": "Depending on what the items look like and how many times you need to run this, you might consider running multiple passes over the input and processing just a subset of the matches.  For a simple example, if your range is 0-99, do only 0-24 on the first pass and just ignore items outside this range.  Repeat as necessary."}], "answers": [{"comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1491761167, "post_id": 43270307, "comment_id": 73684932, "body": "Comments are not for extended discussion; this conversation has been <a href=\"http://chat.stackoverflow.com/rooms/141294/discussion-on-answer-by-zdim-need-serious-help-optimizing-script-for-memory-use\">moved to chat</a>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1491779180, "post_id": 43270307, "comment_id": 73690585, "body": "@GilWilliams That long exchange got moved to chat, please review my last comment.  One important part: did you see my addition to the answer, under (edited) <b>Another approach</b> (or is there a reason that it won&#39;t work for you)?  It reads <i>and prints to file</i> line by line and should do away with memory problems."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1501720800, "last_edit_date": 1501720800, "creation_date": 1491542863, "answer_id": 43270307, "question_id": 43268020, "link": "https://stackoverflow.com/questions/43268020/need-serious-help-optimizing-script-for-memory-use/43270307#43270307", "title": "Need serious help optimizing script for memory use", "body": "<p><strong>UPDATE</strong> &nbsp; In my tests a hash takes 2.5 times the memory that its data \"alone\" would take. However, the <em>program</em> size for me is consistently 3-4 times as large as its variables. This would turn <code>6.3Gb</code> data file into a <code>~ 15Gb</code> hash, for a <code>~ 60Gb</code> program, just as reported in comments. </p>\n\n<p>So <code>6.3Gb == 60Gb</code>, so to say. This still improved the starting situation enough so to work for the current problem but is clearly not a solution. See the (updated) <strong>Another approach</strong> below for a way to run this processing without loading the whole hash. </p>\n\n<hr>\n\n<p>There is nothing obvious to lead to an order-of-magnitude memory blowup.  However, small errors and inefficiences can add up so let's first clean up.  See other approaches at end.</p>\n\n<p>Here is a simple re-write of the core of the program, to try first.   </p>\n\n<pre><code># ... set filenames, variables \nopen my $fh_in, '&lt;:encoding(utf8)', $input_file_name\n    or die \"\\nERROR: Can't open input file ($input_file_name): $!\";\n\nmy %F;    \nwhile (&lt;$fh_in&gt;) {    \n    chomp;\n    s/^\\s*//;                                              #/trim  leading space\n    my ($frequency, $item) = split /$split_char/, $_, 2;\n\n    # Skip lines with empty or undefined content, or spaces only in $item\n    next if not defined $frequency or $frequency eq '' \n         or not defined $item      or $item =~ /^\\s*$/;\n\n    # ... increment counters and aggregates and add to hash\n    # (... any other processing?)\n    $F{ lc($item) } += $frequency;\n}\nclose $fh_in;\n\n# Sort and print to file\n# (Or better write: \"value key-length key\" and sort later. See comments)\nopen my $fh_out, '&gt;:encoding(utf8)', $output_file_name \n    or die \"\\nERROR: Can't open output file ($output_file_name\\: $!\";\n\nforeach my $item ( sort { \n        $F{$b} &lt;=&gt; $F{$a} || length($b) &lt;=&gt; length($a) || $a cmp $b \n    } keys %F )\n{\n    print $fh_out $F{$item}, \"\\t\", $item, \"\\n\";\n}\nclose $fh_out;\n</code></pre>\n\n<p>A few comments, let me know if more is needed.</p>\n\n<ul>\n<li><p>Always add <code>$!</code> to error-related prints, to see the actual error.  See <a href=\"http://perldoc.perl.org/perlvar.html#Error-Variables\" rel=\"nofollow noreferrer\">perlvar</a>.</p></li>\n<li><p>Use lexical filehandles (<code>my $fh</code> rather than <code>IN</code>), it's better.</p></li>\n<li><p>If layers are specified in the three-argument <a href=\"https://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\">open</a> then layers set by <a href=\"http://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open pragma</a> are ignored, so there should be no need for <code>use open ...</code> (but it doesn't hurt either).</p></li>\n</ul>\n\n<p>The <a href=\"https://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> here has to at least copy its input, and with multiple conditions more memory is needed. </p>\n\n<p>That should take no more memory than 2-3 times the hash size. While initially I suspected a memory leak (or excessive data copying), by reducing the program to basics it was shown that the \"normal\" program size is the (likely) culprit.  This can be tweaked by devising custom data structures and packing the data economically.</p>\n\n<p>Of course, all this is fiddling if your files are going to grow larger and larger, as they tend to do.</p>\n\n<p><strong>Another approach</strong> is to write out the file unsorted and then sort using a separate program. That way you don't combine the possible memory swelling from processing with final sorting. </p>\n\n<p>But even this pushes the limits, due to the greatly increased memory footprint as compared to data, since hash takes 2.5 times the data size and the whole program is yet 3-4 as large. </p>\n\n<p>Then find an algorithm to write the data line-by-line to the output file. That is simple to do here since by the shown processing we only need to accumulate frequencies for each item </p>\n\n<pre><code>open my $fh_out, '&gt;:encoding(utf8)', $output_file_name \n    or die \"\\nERROR: Can't open output file ($output_file_name\\: $!\";\n\nmy $cumulative_freq;\n\nwhile (&lt;$fh_in&gt;) {\n    chomp;\n    s/^\\s*//;  #/ leading only\n    my ($frequency, $item) = split /$split_char/, $_, 2;\n\n    # Skip lines with empty or undefined content, or spaces only in $item\n    next if not defined $frequency or $frequency eq '' \n         or not defined $item      or $item =~ /^\\s*$/;\n\n    $cumulative_freq += $frequency;  # would-be hash value\n\n    # Add a sort criterion, $item's length, helpful for later sorting\n    say $fh_out $cumulative_freq, \"\\t\", length $item, \"\\t\", lc($item);\n\n    #say $fh_out $cumulative_freq, \"\\t\", lc($item);\n}\nclose $fh_out;\n</code></pre>\n\n<p>Now we can use the system's <code>sort</code>, which is optimized for very large files. Since we wrote a file with all sorting columns, <code>value key-length key</code>, run in a terminal</p>\n\n<pre><code>sort -nr -k1,1 -k2,2 output_file_name | cut -f1,3-  &gt; result\n</code></pre>\n\n<p>The command sorts numerically by the first and then by the second field (then it sorts by third itself) and reverses the order. This is piped into <code>cut</code> which pulls out the first and third fields from <code>STDIN</code> (with tab as default delimiter), what is the needed result.</p>\n\n<p>A <strong>systemic solution</strong> is to use a database, and a very convenient one is <a href=\"http://search.cpan.org/~ishigaki/DBD-SQLite-1.54/lib/DBD/SQLite.pm\" rel=\"nofollow noreferrer\">DBD::SQLite</a>.</p>\n\n<hr>\n\n<p>I used <a href=\"http://search.cpan.org/~nwclark/Devel-Size-0.80/lib/Devel/Size.pm\" rel=\"nofollow noreferrer\">Devel::Size</a> to see memory used by variables.</p>\n"}, {"comments": [{"owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1491675732, "post_id": 43296122, "comment_id": 73663056, "body": "Sorting is actually a breeze with the GNU <code>sort</code> utility! While it takes about 3 hours (on a Core i7) and 60+ GB of RAM and swap to run the Perl code that reads the source file and sums the frequencies of identical items on a 3.6 GB file, sorting the similarly sized output file with <code>sort</code> only uses about 10 GB of RAM and less than 20 minutes, using the <code>parallel=7</code> flag in order to use 7 of my 8 cores."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "reply_to_user": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "edited": false, "score": 0, "creation_date": 1491692717, "post_id": 43296122, "comment_id": 73667894, "body": "It probably uses the same principle. I know it uses temporary files on disk."}], "tags": [], "owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "is_accepted": false, "score": 0, "last_activity_date": 1558455380, "last_edit_date": 1558455380, "creation_date": 1491666471, "answer_id": 43296122, "question_id": 43268020, "link": "https://stackoverflow.com/questions/43268020/need-serious-help-optimizing-script-for-memory-use/43296122#43296122", "title": "Need serious help optimizing script for memory use", "body": "<p>Sorting input requires keeping all input in memory, so you can't do everything in a single process.</p>\n\n<p>However, sorting can be factored: you can easily sort your input into sortable buckets, then process the buckets, and produce the correct output by combining the outputs in reversed-sorted bucket order.  The frequency counting can be done per bucket as well.</p>\n\n<p>So just keep the program you have, but add something around it:</p>\n\n<ol>\n<li>partition your input into buckets, e.g. by the first character or the first two characters</li>\n<li>run your program on each bucket</li>\n<li>concatenate the output in the right order</li>\n</ol>\n\n<p>Your maximum memory consumption will be slightly more than what your original program takes on the biggest bucket.  So if your partitioning is well chosen, you can arbitrarily drive it down.</p>\n\n<p>You can store the input buckets and per-bucket outputs to disk, but you can even connect the steps directly with pipes (creating a subprocess for each bucket processor) - this will create a lot of concurrent processes, so the OS will be paging like crazy, but if you're careful, it won't need to write to disk.</p>\n\n<p>A drawback of this way of partitioning is that your buckets may end up being very uneven in size.  An alternative is to use a partitioning scheme that is guaranteed to distribute the input equally (e.g. by putting every <em>n</em>th line of input into the <em>n</em>th bucket) but that makes combining the outputs more complex.</p>\n"}], "owner": {"reputation": 259, "user_id": 1000261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/df5495ad3e153466d88d82b94258b0e6?s=128&d=identicon&r=PG", "display_name": "Gil Williams", "link": "https://stackoverflow.com/users/1000261/gil-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43270307, "answer_count": 2, "score": 1, "last_activity_date": 1558455380, "creation_date": 1491526552, "last_edit_date": 1491622917, "question_id": 43268020, "link": "https://stackoverflow.com/questions/43268020/need-serious-help-optimizing-script-for-memory-use", "title": "Need serious help optimizing script for memory use", "body": "<p>[I've changed the code below to reflect what I'm currently running after having implemented people's suggestions]</p>\n\n<p>Let me preface this by saying that I'm not a programmer, but just someone who uses Perl to get certain text processing things done the best I can.</p>\n\n<p>I've got a script that produces frequency lists. It essentially does the following: </p>\n\n<ul>\n<li>Reads in lines from a file having the format <code>$frequency \\t $item</code>. Any given <code>$item</code> may occur multiple times, with different values for <code>$frequency</code>.</li>\n<li>Eliminates certain lines depending on the content of <code>$item</code>.</li>\n<li>Sums the frequencies of all identical <code>$item</code>s, regardless of their case, and merges these entries into one.</li>\n<li>Performs a reverse natural sort on the resulting array.</li>\n<li>Prints the results to an output file.</li>\n</ul>\n\n<p>The script works perfectly well on input files of up to about 1 GB in size. However, I have files of up to 6 GB that I need to process, and this has proven impossible due to memory use. Though my machine has 32 GB of RAM, uses zRam, and has 64 GB of swap on SSD just for this purpose, the script will inevitably be killed by the Linux OOM service when combined memory use hits something around 70 GB (of the 92 GB total).</p>\n\n<p>The real issue, of course, is the vast amount of memory my script is using. I could try adding even more swap, but I've increased it twice now and it just gets eaten up.</p>\n\n<p>So I need to somehow optimize the script. And that's what I'm here asking for help with.</p>\n\n<p>Below is <strong>the actual version of the script that I'm running now</strong>, with some hopefully useful comments retained. </p>\n\n<p>I'd be <strong>enormously</strong> grateful if your comments and suggestions contained enough code to actually allow me to more or less drop it in to the existing script, as I'm <em>not</em> a programmer by trade, as I said above, and even something so apparently simple as piping the text being processed through some module or another would throw me for a serious curve.</p>\n\n<p>Thanks in advance!</p>\n\n<p>(By the way, I'm using Perl 5.22.1 x64 on Ubuntu 16.04 LTS x64.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse warnings qw(FATAL utf8);\nuse Getopt::Long qw(:config no_auto_abbrev);\n\n# DEFINE VARIABLES\nmy $delimiter            = \"\\t\";\nmy $split_char           = \"\\t\";\n\nmy $input_file_name  = \"\";\nmy $output_file_name = \"\";\nmy $in_basename      = \"\";\nmy $frequency        = 0;\nmy $item             = \"\";\n\n# READ COMMAND LINE OPTIONS\nGetOptions (\n             \"input|i=s\"         =&gt; \\$input_file_name,\n             \"output|o=s\"        =&gt; \\$output_file_name,\n           );\n\n# INSURE AN INPUT FILE IS SPECIFIED\nif ( $input_file_name eq \"\" ) {\n    die\n      \"\\nERROR: You must provide the name of the file to be processed with the -i switch.\\n\";\n}\n\n# IF NO OUTPUT FILE NAME IS SPECIFIED, GENERATE ONE AUTOMATICALLY\nif ( $output_file_name eq \"\" ) {\n\n    # STRIP EXTENSION FROM INPUT FILE NAME\n    $in_basename = $input_file_name;\n    $in_basename =~ s/(.+)\\.(.+)/$1/;\n\n    # GENERATE OUTPUT FILE NAME FROM INPUT BASENAME\n    $output_file_name = \"$in_basename.output.txt\";\n}\n\n# READ INPUT FILE\nopen( INPUTFILE, '&lt;:encoding(utf8)', $input_file_name )\n    or die \"\\nERROR: Can't open input file ($input_file_name): $!\";\n\n# PRINT INPUT AND OUTPUT FILE INFO TO TERMINAL\nprint STDOUT \"\\nInput file:\\t$input_file_name\";\nprint STDOUT \"\\nOutput file:\\t$output_file_name\";\nprint STDOUT \"\\n\\n\";\n\n# PROCESS INPUT FILE LINE BY LINE\nmy %F;\n\nwhile (&lt;INPUTFILE&gt;) {\n\n    chomp;\n\n    # PUT FREQUENCY IN $frequency AND THEN PUT ALL OTHER COLUMNS INTO $item\n    ( $frequency, $item ) = split( /$split_char/, $_, 2 );\n\n    # Skip lines with empty or undefined content, or spaces only in $item\n    next if not defined $frequency or $frequency eq '' or not defined $item or $item =~ /^\\s*$/;\n\n    # PROCESS INPUT LINES\n    $F{ lc($item) } += $frequency;\n}\nclose INPUTFILE;\n\n# OPEN OUTPUT FILE\nopen( OUTPUTFILE, '&gt;:encoding(utf8)', \"$output_file_name\" )\n    || die \"\\nERROR: The output file \\($output_file_name\\) couldn't be opened for writing!\\n\";\n\n# PRINT OUT HASH WITHOUT SORTING\nforeach my $item ( keys %F ) {\n    print OUTPUTFILE $F{$item}, \"\\t\", $item, \"\\n\";\n}\n\nclose OUTPUTFILE;\n\nexit;\n</code></pre>\n\n<p>Below is some sample input from the source file. It's tab-separated, and the first column is <code>$frequency</code>, while all the rest together is <code>$item</code>.</p>\n\n<pre><code>2   \u00fatil    volver  a   valdivia\n8   \u00fatil    volver  la  vista\n1   \u00fatil    v\u00e1lvula de  escape\n1   \u00fatil    v\u00eda de  escape\n2   \u00fatil    v\u00eda fax y\n1   \u00fatil    y   a   cabalidad\n43  \u00fatil    y   a   el\n17  \u00fatil    y   a   la\n1   \u00fatil    y   a   los\n21  \u00fatil    y   a   quien\n1   \u00fatil    y   a   ra\u00edz\n2   \u00fatil    y   a   uno\n</code></pre>\n"}, {"tags": ["sql", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1491518072, "post_id": 43266481, "comment_id": 73602228, "body": "Strictly speaking, this question is about creating what appears to be part of an SQL where clause and really has nothing to do with regular expressions."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1491519145, "post_id": 43266481, "comment_id": 73602580, "body": "If this is really about creating SQL, then please see <a href=\"http://bobby-tables.com/\" rel=\"nofollow noreferrer\">bobby-tables.com</a> before doing this."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1491526932, "post_id": 43266665, "comment_id": 73604748, "body": "Hello Matt. Thanks very much for your help. Is there any way to combine the two in order to the direct the IP addresses to the print you&#39;ve demonstrated? Right now I have it in two separate perl scripts. One to create the file spamhaus.txt (IP addresses), and one to read the spamhaus.txt file to produce the desired output (your script)."}, {"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1491527280, "post_id": 43266665, "comment_id": 73604838, "body": "I&#39;d like to use the output from my script to be read by your script."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1491528471, "post_id": 43266665, "comment_id": 73605099, "body": "@CodingNovice So, you don&#39;t care about the intermediate .txt file at all?"}, {"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1491569868, "post_id": 43266665, "comment_id": 73625355, "body": "The goal is to get the output as you had it at the end. The file creation is unnecessary, that&#39;s just the only way I figured out how to do it at this point by redirecting the IP addresses the initial script pulls from the API to a text file, then using that file in the &lt;DATA&gt; section."}, {"owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1491570650, "post_id": 43266665, "comment_id": 73625895, "body": "I&#39;m sorry, there&#39;s a piece missing from my script above. Initially, it pulls the file from the API, then stores the text. I fixed it to show what the script really does, save for the API which has credentials."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "edited": false, "score": 0, "creation_date": 1491588243, "post_id": 43266665, "comment_id": 73637156, "body": "@CodingNovice You can use <code>get()</code> instead of <code>getstore()</code> and split on <code>\\n</code>. I&#39;m not in front of a computer right now, but give that a shot."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 1, "last_activity_date": 1491518004, "last_edit_date": 1491518004, "creation_date": 1491517187, "answer_id": 43266665, "question_id": 43266481, "link": "https://stackoverflow.com/questions/43266481/how-can-i-generate-an-sql-where-clause-from-a-filtered-list-of-lines-in-a-file/43266665#43266665", "title": "How can I generate an SQL where clause from a filtered list of lines in a file?", "body": "<pre><code>use strict;\nuse warnings;\n\nuse Regexp::Common qw/net/;\n\nprint '(', join(' OR ', map { chomp; qq{\"$_\"} } grep { /$RE{net}{IPv4}/ } &lt;DATA&gt;), \")\\n\";\n\n__DATA__\n1.55.227.59\n5.1.80.127\n5.1.80.235\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(\"1.55.227.59\" OR \"5.1.80.127\" OR \"5.1.80.235\")\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5809159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8b8130f19106d7b64930dc33a6c0dfe7?s=128&d=identicon&r=PG&f=1", "display_name": "CodingNovice", "link": "https://stackoverflow.com/users/5809159/codingnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43266665, "answer_count": 1, "score": 0, "last_activity_date": 1491570719, "creation_date": 1491516115, "last_edit_date": 1491570719, "question_id": 43266481, "link": "https://stackoverflow.com/questions/43266481/how-can-i-generate-an-sql-where-clause-from-a-filtered-list-of-lines-in-a-file", "title": "How can I generate an SQL where clause from a filtered list of lines in a file?", "body": "<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::Simple;\nuse Regexp::Common qw/net/;\n\ngetstore(\"https://&lt;redacted&gt;\", \"ips.txt\");\n\nopen(my $input, \"&lt;\", \"ips.txt\");\n\nwhile (&lt;$input&gt;) {\n\nprint $1, \"\\n\" if /($RE{net}{IPv4})/;\n\n}\n</code></pre>\n\n<p>Hello all,</p>\n\n<p>I've created a perl script above that will pull down IP addresses from a website using the API (redacted), and store the IP addresses in a text file. The  text file looks like this (but with many more IP addresses):</p>\n\n<pre><code>1.55.227.59\n5.1.80.127 \n5.1.80.235\n</code></pre>\n\n<p>I am attempting to figure out how to add a line to make the script print an output to look like this for all IP addresses in the file:</p>\n\n<p>(\"1.55.227.59\" OR \"5.1.80.127\" OR \"5.1.80.235\")</p>\n\n<p>So far, attempts have been unsuccessful. Anyone have any ideas on how to accomplish this? Help would be greatly appreciated.</p>\n"}, {"tags": ["arrays", "perl", "hash", "hashtable"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "edited": false, "score": 0, "creation_date": 1491516356, "post_id": 43266374, "comment_id": 73601627, "body": "I used the Alternatively option, it works perfectly! @ikegami"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1491515549, "creation_date": 1491515549, "answer_id": 43266374, "question_id": 43266364, "link": "https://stackoverflow.com/questions/43266364/iterative-hash-set-up/43266374#43266374", "title": "Iterative Hash Set up", "body": "<p>Assigning to a hash&mdash;something you are doing each pass of the loop&mdash;replaces its contents. Replace</p>\n\n<pre><code>%hash = (\"$split[0]\", \"$split[1]\");\n</code></pre>\n\n<p>with</p>\n\n<pre><code>$hash{$split[0]} = $split[1];\n</code></pre>\n\n<hr>\n\n<p>Alternatively, replace everything with</p>\n\n<pre><code>my %hash = map { split } @array;\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 6831640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de100ceb0c44396a957282310aaccbce?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistry for Computers", "link": "https://stackoverflow.com/users/6831640/chemistry-for-computers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 43266374, "answer_count": 1, "score": 0, "last_activity_date": 1491515549, "creation_date": 1491515481, "question_id": 43266364, "link": "https://stackoverflow.com/questions/43266364/iterative-hash-set-up", "title": "Iterative Hash Set up", "body": "<p>I have the following array... </p>\n\n<pre><code>my @array=(\"100  2\", \"300  1\", \"200  3\");\n</code></pre>\n\n<p>From this array I want to iteratively construct a hash. </p>\n\n<p>Current Script:</p>\n\n<pre><code>my %hash; \nforeach (@array) {\n my @split = (split /\\s+/, $_);\n %hash = (\"$split[0]\", \"$split[1]\");\n} \n</code></pre>\n\n<p>Current Output:</p>\n\n<pre><code>$VAR1 = {\n         '200' =&gt; '3'\n        };\n</code></pre>\n\n<p>This is not what I want. My goal is... </p>\n\n<p>Goal Output: </p>\n\n<pre><code>$VAR1 = {\n         '100' =&gt; '2'\n         '300' =&gt; '1'\n         '200' =&gt; '3'\n        };\n</code></pre>\n\n<p>What do I need to do?</p>\n\n<p>I am using: Perl 5, Version 18</p>\n"}, {"tags": ["mysql", "sql", "perl", "union", "concat"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1491505756, "post_id": 43262997, "comment_id": 73596004, "body": "I&#39;ve edited your question. Please check what I&#39;ve changed and make sure that it still says what you meant.  That is unusually nice and clear Perl code: very well done. The only thing I would change is that things like <code>$$opts{&#39;status&#39;}</code> are better written as <code>$opts-&gt;{status}</code>."}, {"owner": {"reputation": 109, "user_id": 3049982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79e7f2fdbe260e91d3ab80c687b27fe4?s=128&d=identicon&r=PG&f=1", "display_name": "user3049982", "link": "https://stackoverflow.com/users/3049982/user3049982"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491507846, "post_id": 43262997, "comment_id": 73597265, "body": "Thank you for your assistance, I was afraid I was overly complicating my words. :)"}, {"owner": {"reputation": 2684, "user_id": 1465748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6775d4d73bd15afada6d34481575dff9?s=128&d=identicon&r=PG", "display_name": "Giorgos Altanis", "link": "https://stackoverflow.com/users/1465748/giorgos-altanis"}, "edited": false, "score": 0, "creation_date": 1491511782, "post_id": 43262997, "comment_id": 73599536, "body": "Could you post some sample data?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491512473, "post_id": 43262997, "comment_id": 73599933, "body": "@user3049982: Even so I think you may have confused us. Can you give examples?"}, {"owner": {"reputation": 109, "user_id": 3049982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79e7f2fdbe260e91d3ab80c687b27fe4?s=128&d=identicon&r=PG&f=1", "display_name": "user3049982", "link": "https://stackoverflow.com/users/3049982/user3049982"}, "edited": false, "score": 0, "creation_date": 1492448551, "post_id": 43262997, "comment_id": 73967305, "body": "Sorry for the long reply. I added the application and data results of the example method.  I want to tie alternative_titles table to the search function.  For example, if I have an alternative_title record for ident 2109, and that&#39;s &#39;Mario Buraz\u0101zu&#39; and the user searches for Buraz\u0101zu, I want to return the parent table&#39;s information. Essentially, the first dumper results."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 1, "creation_date": 1492711060, "post_id": 43262997, "comment_id": 74106521, "body": "You most certainly want to have a single alternate per row rather than several (you could then have multiple alternate lines for a single &quot;original&quot; line). This will yield queries that are easier to read, better performance, and unlimited alternatives."}, {"owner": {"reputation": 15906, "user_id": 3527940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k1R45.jpg?s=128&g=1", "display_name": "jcaron", "link": "https://stackoverflow.com/users/3527940/jcaron"}, "edited": false, "score": 1, "creation_date": 1492711527, "post_id": 43262997, "comment_id": 74106803, "body": "Also, you can simplify the prepare / execute / fetch loop with a single <code>selectall_arrayref</code>. Not sure why you handle the first select_stmts differently from the others. A single join over the whole array should be enough. But I definitely appreciate the way you compose your queries, it&#39;s so rare seing one do it correctly!"}], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 3049982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79e7f2fdbe260e91d3ab80c687b27fe4?s=128&d=identicon&r=PG&f=1", "display_name": "user3049982", "link": "https://stackoverflow.com/users/3049982/user3049982"}, "is_accepted": true, "score": 0, "last_activity_date": 1492710338, "last_edit_date": 1492710338, "creation_date": 1492709542, "answer_id": 43526210, "question_id": 43262997, "link": "https://stackoverflow.com/questions/43262997/complicated-join-using-multiple-tables/43526210#43526210", "title": "Complicated JOIN using multiple tables", "body": "<p>After a bit of headache and some intense googling I was able to come up with a solution.</p>\n\n<p>The most basic solution to my problem is:</p>\n\n<pre><code>my @profiles = ('art', 'music', 'sports');\nmy @results;\nmy $blah;\nmy $sql;\n\nforeach my $profile (@profiles) {\n    $sql = \"SELECT\n                $profile.ident,\n                $profile.title,\n                $profile.status\n             FROM $profile\n            LEFT JOIN alternate_titles ON $profile.ident = alternate_titles.parent_ident\n             WHERE title like '%$blah%' \n                OR \n                CONCAT_WS(' ',alternate_titles.alt_title_001,alternate_titles.alt_title_002,alternate_titles.alt_title_003,alternate_titles.alt_title_004\n                AND alternate_titles.parent_table = '$profile'\";\n}\nmy $sth = $schema-&gt;prepare($sql) or die $schema-&gt;errstr;\n$sth-&gt;execute() or die $sth-&gt;errstr;\n\nwhile (my $data = $sth-&gt;fetchrow_hashref()) {\n    push(@results, $data);\n}\n</code></pre>\n\n<p>This isn't immediately implementable in my code example, but this works as a great starting point.</p>\n\n<p>I don't know that this is efficient, if anyone has a better solution, I'd love to see it.</p>\n"}], "owner": {"reputation": 109, "user_id": 3049982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79e7f2fdbe260e91d3ab80c687b27fe4?s=128&d=identicon&r=PG&f=1", "display_name": "user3049982", "link": "https://stackoverflow.com/users/3049982/user3049982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "accepted_answer_id": 43526210, "answer_count": 1, "score": 4, "last_activity_date": 1492710338, "creation_date": 1491502984, "last_edit_date": 1492448346, "question_id": 43262997, "link": "https://stackoverflow.com/questions/43262997/complicated-join-using-multiple-tables", "title": "Complicated JOIN using multiple tables", "body": "<p>For example</p>\n\n<p>I have several profile tables, such as</p>\n\n<ul>\n<li><code>music_profile</code></li>\n<li><code>sports_profile</code></li>\n<li><code>art_profile</code></li>\n</ul>\n\n<p>All of these tables have matching names, and they all have a <code>title</code> column.</p>\n\n<p>A second table contains alternative titles per any given profile table's row.</p>\n\n<p>Their columns are essentially:</p>\n\n<pre><code>id, parent_id, parent_table, alt_title_001, alt_title_002, alt_title_003, alt_title_004, status, created, updated.\n</code></pre>\n\n<p>I want to</p>\n\n<blockquote>\n  <p>SELECT multiple column values<br>\n  FROM music_profile, sports_profile, art_profile<br>\n  WHERE title, alt_title_001, alt_title_002, alt_title_003, alt_title_004 <em>are like a value</em>  </p>\n</blockquote>\n\n<p>I can currently select columns using <code>WHERE title LIKE</code> and <code>UNION</code>, but I have no idea how to combine the <code>alternate_titles</code> table in the SELECT statement. </p>\n\n<p>I've provided my current code below. The table for <code>alternate_titles</code> has not been implemented here.</p>\n\n<p>I don't necessarily want a coded solution to this issue; I would just like a hint to get me on my way.</p>\n\n<pre><code>sub AdvancedSearchFormResults {\n    my $self = shift;\n    my $opts = ref $_[0] eq 'HASH' ? shift : {@_};\n\n    my $mode   = shift;\n    my $order  = shift;\n    my $limit  = shift;\n\n    my @array;\n    my $where;\n    my $mode = $$opts{mode};\n\n    my $left_join_clause;\n    my (@where_stmt, @where_vals, @join);\n\n    if (defined $$opts{platform}) {\n        $where = $$opts{platform};\n    }\n    if ($$opts{'title_like'}) {\n        push(@where_stmt, \"title like ?\");\n        push(@where_vals, '%'.$$opts{'title_like'}.'%');\n    }\n    if ($$opts{'publisher'}) {\n        push(@where_stmt, \"publisher = ?\");\n        push(@where_vals, $$opts{'publisher'});\n    }\n    if ($$opts{'status'}) {\n        push(@where_stmt, \"status = ?\");\n        push(@where_vals, $$opts{'status'});\n    }\n\n    my $left_join_clause = scalar @join ? join(\"\\n\", @join) : \"\";\n\n    my $where_clause = @where_stmt    ? \"WHERE \".join(\" AND \", @where_stmt) : \"\";\n    my $order_clause = length($order) ? \"ORDER BY $order\"                   : \"\";\n    my $limit_clause = length($limit) ? \"LIMIT $limit\"                      : \"\";\n\n    my $select_stmt;\n\n    if ($mode eq 'BUILD') {\n        $select_stmt = \"SELECT \n                            '$where' AS event,\n                            ident,\n                            title,\n                            publisher\n                        FROM $where\n                          $left_join_clause\n                          $where_clause\n                          $order_clause\n                          $limit_clause\";\n\n        my $sth = $schema-&gt;prepare($select_stmt) or die $schema-&gt;errstr;\n        $sth-&gt;execute(@where_vals) or die $sth-&gt;errstr;\n\n        while (my $row = $sth-&gt;fetchrow_hashref()) {\n            push(@array, $row);\n        }\n\n    }\n    elsif ($mode eq 'UNION') {\n\n        my @select_stmts;\n        my @platforms       = $self-&gt;ProfileTables();\n        my $total_platforms = -1;\n\n        foreach my $table (@platforms) {\n            $total_platforms++;\n            my $stmt = \"(SELECT '$table' AS event,ident,title,publisher,status FROM $table $where_clause)\";\n            push(@select_stmts, $stmt);\n        }\n\n        my $select_stmt .= \"$select_stmts[0] UNION ALL\";\n        $select_stmt    .= join(' UNION ALL ', @select_stmts[ 1 .. 28 ]);\n\n        my @new_vals = (@where_vals, (@where_vals) x $total_platforms);\n\n        my $sth = $schema-&gt;prepare($select_stmt) or die $schema-&gt;errstr;\n        $sth-&gt;execute(@new_vals) or die $sth-&gt;errstr;\n\n        while (my $row = $sth-&gt;fetchrow_hashref()) {\n            push(@array, $row);\n        }\n    }\n    elsif ($mode eq 'REFRESH') {\n        print '\n        &lt;div class=\"alert alert-danger\" role=\"alert\"&gt;\n             &lt;strong&gt;Please fill out at least one field.&lt;/strong&gt;\n        &lt;/div&gt;';\n    }\n\n    return @array;\n}\n</code></pre>\n\n<p>A practical application of the code is below. </p>\n\n<p>These variables are used as an example.  This data would normally be supplied via a form.</p>\n\n<pre><code>my $title     = 'Mario';\nmy $publisher = '';\n\nmy %params = (\n    title_like =&gt; $title,\n    publisher  =&gt; $publisher,\n    status     =&gt; 'a',\n);\n\nmy @results = $results-&gt;AdvancedSearchFormResults(\\%params);\n\nprint Data::Dumper::Dumper(\\@results);\n</code></pre>\n\n<p>Dumper Results</p>\n\n<pre><code>$VAR1 = [\n          {\n            'ident' =&gt; '2109',\n            'title' =&gt; 'Mario Bros.',\n            'publisher' =&gt; 'Atari'\n          },\n          {\n            'ident' =&gt; '30',\n            'title' =&gt; 'Mario Bros.',\n            'publisher' =&gt; 'Atari'\n          },\n          {\n            'publisher' =&gt; 'Atari',\n            'ident' =&gt; '43',\n            'title' =&gt; 'Mario Bros.'\n          },\n    ];\n</code></pre>\n"}, {"tags": ["postgresql", "perl", "ubuntu", "apt"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491502398, "post_id": 43262453, "comment_id": 73594117, "body": "Should have changed your app&#39;s shebang line rather than replacing <code>&#47;usr&#47;bin&#47;perl</code>! (In fact, its installer should have done that for you.)"}, {"owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492103750, "post_id": 43262453, "comment_id": 73857107, "body": "It would be wonderful if it were that easy. And in some cases (e.g., cronjobs) it is easy. But this is a huge legacy app that I&#39;ve inherited, with tons of touch points, and presently, given the business&#39; needs, there&#39;s not enough value in fixing all these hardcoded dependencies."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492104943, "post_id": 43262453, "comment_id": 73857714, "body": "That&#39;s total garbage. It would have taken less long to fix the issue than to write this comment. Aside that it&#39;s should be done automatically by the installer (as the standard Perl installers do), a simple one liner can fix any number of files instantly. (And no, it&#39;s not easier to fix the shebang line of scripts called by cronjobs than other scripts.)"}, {"owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1492118563, "post_id": 43262453, "comment_id": 73864403, "body": "That is something that&#39;s open for debate, but please leave insults out of the debate."}, {"owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492118611, "post_id": 43262453, "comment_id": 73864424, "body": "Oh, also, I was confused about what installer you&#39;re referring to? The application I&#39;m working with?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492128547, "post_id": 43262453, "comment_id": 73867469, "body": "I don&#39;t know what insults. /// No, it&#39;s objective (measurable), not subjective (open to debate). /// MM and MB. No idea what installer you used to install your app."}, {"owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492540222, "post_id": 43262453, "comment_id": 74014888, "body": "I just felt like the &#39;That&#39;s total garbage&#39; was unnecessary. Not that you were insulting me so much as the quality of the decisions I was making. There are a lot of decisions one has to triage in the course of the day, and sometimes what to the outside seems like an obvious choice might not be because of forces the outsider might not have considered. (E.g., more pressing matters than analyzing the most optimal way to get Perl working in an absolute mess of a codebase.) No installer; just a big lump of code that makes lots of assumptions about the environment."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492542787, "post_id": 43262453, "comment_id": 74016459, "body": "No. I didn&#39;t comment on the quality of your decisions; I pointed out your claims are totally false. // Whatever you want to call the process of putting your program on a machine. That should have adusted the shebang lines."}, {"owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492641620, "post_id": 43262453, "comment_id": 74069142, "body": "&quot;That should have adusted the shebang lines.&quot;  Would that I were so lucky :/ This is a pretty horrible app. The process of installing was <code>git clone ______</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1492652135, "post_id": 43262453, "comment_id": 74071954, "body": "Time to add a second line!"}, {"owner": {"reputation": 677, "user_id": 2397542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6c8fae2be31c002058fb7e49353af24f?s=128&d=identicon&r=PG", "display_name": "AnotherHowie", "link": "https://stackoverflow.com/users/2397542/anotherhowie"}, "edited": false, "score": 1, "creation_date": 1505289193, "post_id": 43262453, "comment_id": 79345844, "body": "Just a note that <code>perlbrew</code> (which is supposed to be the safer way to have non-system perls) will also get you into this mess. In that case, <code>perlbrew off</code> will get you back to the system perl for that specific session so that <code>apt</code> is happy. As someone who knows perl just fine, but postgres is very much a black box that apps require, this wasn&#39;t immediately obvious!"}], "tags": [], "owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "is_accepted": false, "score": 3, "last_activity_date": 1491501217, "creation_date": 1491501217, "answer_id": 43262453, "question_id": 43262452, "link": "https://stackoverflow.com/questions/43262452/cant-locate-pgcommon-pm-when-trying-to-uninstall-postgres-server/43262453#43262453", "title": "&quot;Can&#39;t locate PgCommon.pm&quot; when trying to uninstall Postgres server", "body": "<p>This can happen if you changed Perl interpreters since installing <code>postgres</code>. It can't find the package anymore because it was installed into a different modules directory. If this command</p>\n\n<pre><code>$ which perl\n</code></pre>\n\n<p>doesn't give this response</p>\n\n<pre><code>/usr/bin/perl\n</code></pre>\n\n<p>It's likely that you're just using the wrong Perl binary. In my case, I had symlinked <code>/usr/local/bin/perl</code> to my custom Perl binary (which my app needs in order to function) so I just renamed the symlink temporarily, ran <code>apt-get remove postgres</code> again, then put the symlink back where it was!</p>\n"}], "owner": {"reputation": 2619, "user_id": 183350, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cd0ac1afd622386fcc12926a23f5848c?s=128&d=identicon&r=PG", "display_name": "Paul d&#39;Aoust", "link": "https://stackoverflow.com/users/183350/paul-daoust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 750, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1491502514, "creation_date": 1491501217, "last_edit_date": 1491502514, "question_id": 43262452, "link": "https://stackoverflow.com/questions/43262452/cant-locate-pgcommon-pm-when-trying-to-uninstall-postgres-server", "title": "&quot;Can&#39;t locate PgCommon.pm&quot; when trying to uninstall Postgres server", "body": "<p>I'm trying to remove <code>postgres</code> from my Ubuntu machine, but when I do, I'm getting the error message</p>\n\n<pre><code>Can't locate PgCommon.pm (@INC is [... a list of paths ...])\n</code></pre>\n\n<p>Any idea why PostgreSQL would lose track of a file it installed itself?</p>\n"}, {"tags": ["perl", "unix", "data-dumper"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1491503927, "post_id": 43261588, "comment_id": 73594994, "body": "What exactly is your question? The best format for transformation would be whatever the &quot;thing&quot; that&#39;s going to read the data wants!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1491504083, "post_id": 43261588, "comment_id": 73595076, "body": "That looks like a simple transposal. Are the files fairly small? What problems have you had with coding a solution?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491504589, "post_id": 43261588, "comment_id": 73595370, "body": "Are the dots really in the data?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1491506718, "post_id": 43261588, "comment_id": 73596569, "body": "Have you got the &#39;Invaluable&#39; in the right column of the CSV output?  If so, how is it right?  (The double commas should be before, not after, &#39;Invaluable&#39; \u2014 I think.)"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1491521968, "post_id": 43261588, "comment_id": 73603494, "body": "When you say &#39;pretty huge amount of data&#39; is it so huge that it won&#39;t all fit into the memory of the computer processing the file? It is a speed and ease vs use of memory issue..."}, {"owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1491576456, "post_id": 43261588, "comment_id": 73630181, "body": "Not that huge @dawg , I simply have about 3 or 4 dozen of such reports, to which I would like to generate 3 or 4 dozen CSV dumps (which I am loading to a database to automatize a few analysis, but that don&#39;t come into the question matter), Memory is not a issue at all (in fact my server has 20+Gigs of <b>free</b> mem), the server is some form of high end one, designed to a big app, that requires lots of IO, but not that much ram, but it seems to be packaged in a way that we could&#39;t buy only the few Gigs we really needed, instead we end up with lots of unused RAM."}, {"owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491576609, "post_id": 43261588, "comment_id": 73630292, "body": "@Borodin Yes, the dos are there"}, {"owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1491576645, "post_id": 43261588, "comment_id": 73630321, "body": "@JonathanLeffler you are right, fixed"}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1491508477, "post_id": 43263508, "comment_id": 73597696, "body": "That doesn&#39;t look all that much like the desired output.  Granted, with only 2 records, it isn&#39;t too hard to work out what&#39;s going on, but even with only a dozen records with varying lists of attributes, the format you show is not manageable."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": -1, "last_activity_date": 1491504538, "creation_date": 1491504538, "answer_id": 43263508, "question_id": 43261588, "link": "https://stackoverflow.com/questions/43261588/parse-report-in-blocks-to-csv/43263508#43263508", "title": "Parse report in blocks to CSV", "body": "<p></p>\n\n<p>This seems to work with the data you've given</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nmy %data;\n\nwhile ( &lt;&gt; ) {\n\n    next unless /^(\\w+):\\W*(.*\\S)/;\n\n    push @{ $data{$1} }, $2;\n}\n\nuse Data::Dump;\ndd \\%data;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\n  Key1 =&gt; [\"Value\", \"Different value\"],\n  Key2 =&gt; [\"Other value\"],\n  Key3 =&gt; [\"Maybe another value yet\", \"Invaluable\"],\n  Key5 =&gt; [\"Has no value at all\"],\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1491507384, "last_edit_date": 1491507384, "creation_date": 1491507014, "answer_id": 43264207, "question_id": 43261588, "link": "https://stackoverflow.com/questions/43261588/parse-report-in-blocks-to-csv/43264207#43264207", "title": "Parse report in blocks to CSV", "body": "<p>This is fairly easy using hashes and the <a href=\"https://metacpan.org/pod/Text::CSV_XS\" rel=\"nofollow noreferrer\">Text::CSV_XS</a> module:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Text::CSV_XS;\n\nmy @rows;\nmy %headers;\n\n{\n    local $/ = \"\";\n\n    while (&lt;DATA&gt;) {\n        chomp;\n        my %record;\n\n        for my $line (split(/\\n/)) {\n            next unless $line =~ /^([^:]+):\\.+\\s(.+)/;\n            $record{$1} = $2;\n            $headers{$1} = $1;\n        }\n\n        push(@rows, \\%record);\n    }\n}\n\nunshift(@rows, \\%headers);\n\nmy $csv = Text::CSV_XS-&gt;new({binary =&gt; 1, auto_diag =&gt; 1, eol =&gt; $/});\n$csv-&gt;column_names(sort(keys(%headers)));\n\nfor my $row_ref (@rows) {\n    $csv-&gt;print_hr(*STDOUT, $row_ref);\n}\n\n__DATA__\nKey1:.............. Value\nKey2:.............. Other value\nKey3:.............. Maybe another value yet\n\nKey1:.............. Different value\nKey3:.............. Invaluable\nKey5:.............. Has no value at all\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Key1,Key2,Key3,Key5\nValue,\"Other value\",\"Maybe another value yet\",\n\"Different value\",,Invaluable,\"Has no value at all\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "edited": false, "score": 0, "creation_date": 1491577018, "post_id": 43273663, "comment_id": 73630600, "body": "Totally agree, and I would not have problems either, reading the file twice or using a lot of memory, my main problem was exactly need to read the file first to get the keys and them crafting some custom code to each keyset. I was just a bit loose trying to do exactly that colection of keys upfront and them dumping they corectly. I am learning a lot by studying your code, thanks!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1491555174, "last_edit_date": 1491555174, "creation_date": 1491554798, "answer_id": 43273663, "question_id": 43261588, "link": "https://stackoverflow.com/questions/43261588/parse-report-in-blocks-to-csv/43273663#43273663", "title": "Parse report in blocks to CSV", "body": "<p>If your CSV format is 'complicated' - e.g. it contains commas, etc. - then use one of the <code>Text::CSV</code> modules. But if it isn't - and this is often the case - I tend to just work with <code>split</code> and <code>join</code>.</p>\n\n<p>What's useful in your scenario, is that you can map key-values within a record quite easily using a regex. Then use a hash slice to output:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n#set paragraph mode - records are blank line separated. \nlocal $/ = \"\";\n\nmy @rows;\nmy %seen_header;\n\n#read STDIN or files on command line, just like sed/grep \nwhile ( &lt;&gt; ) {\n   #multi - line pattern, that matches all the key-value pairs,\n   #and then inserts them into a hash. \n   my %this_row = m/^(\\w+):\\.+ (.*)$/gm;\n   push ( @rows, \\%this_row ); \n\n   #add the keys we've seen to a hash, so we 'know' what we've seen. \n   $seen_header{$_}++ for keys %this_row; \n}\n\n#extract the keys, make them unique and ordered. \n#could set this by hand if you prefer.    \nmy @header = sort keys %seen_header;\n\n#print the header row\nprint join \",\", @header, \"\\n\";\n\n#iterate the rows\nforeach my $row ( @rows ) {\n    #use a hash slice to select the values matching @header.\n    #the map is so any undefined values (missing keys) don't report errors, they\n    #just return blank fields. \n    print join \",\", map { $_ // '' } @{$row}{@header},\"\\n\";\n}\n</code></pre>\n\n<p>This for you sample input, produces:</p>\n\n<pre><code>Key1,Key2,Key3,Key5,\nValue,Other value,Maybe another value yet,,\nDifferent value,,Invaluable,Has no value at all,\n</code></pre>\n\n<p>If you want to be really clever, then most of that initial building of the loop can be done with:</p>\n\n<pre><code>my @rows = map { { m/^(\\w+):\\.+ (.*)$/gm } } &lt;&gt;;\n</code></pre>\n\n<p>The problem then is - you would need to build up the 'headers' array still, and that means a bit more complicated:</p>\n\n<pre><code>$seen_header{$_}++ for map { keys %$_ } @rows;\n</code></pre>\n\n<p>It works, but I don't think it's as clear about what's happening. </p>\n\n<p>However the core of your problem may be the file size - that's where you have a bit of a problem, because you need to read the file twice - first time to figure out which headings exist throughout the file, and then second time to iterate and print:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nopen ( my $input, '&lt;', 'your_file.txt') or die $!;\nlocal $/ = \"\";\n\nmy %seen_header;\nwhile ( &lt;$input&gt; ) { \n    $seen_header{$_}++ for m/^(\\w+):/gm; \n}  \n\nmy @header = sort keys %seen_header; \n\n#return to the start of file:\nseek ( $input, 0, 0 ); \n\nwhile ( &lt;$input&gt; )  {\n   my %this_row = m/^(\\w+):\\.+ (.*)$/gm;\n   print join \",\", map { $_ // '' } @{$this_row}{@header},\"\\n\";\n}\n</code></pre>\n\n<p>This will be slightly slower, as it'll have to read the file twice. But it won't use nearly as much memory footprint, because it isn't holding the whole file in memory.</p>\n\n<p>Unless you know all your keys in advance, and you can just define them, you'll have to read the file twice. </p>\n"}], "owner": {"reputation": 2005, "user_id": 955143, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ae872b7caff52b2b1b64ec2611df7a6?s=128&d=identicon&r=PG", "display_name": "Rafareino", "link": "https://stackoverflow.com/users/955143/rafareino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1491576557, "creation_date": 1491498309, "last_edit_date": 1491576557, "question_id": 43261588, "link": "https://stackoverflow.com/questions/43261588/parse-report-in-blocks-to-csv", "title": "Parse report in blocks to CSV", "body": "\n\n<p>I have lots of data dumps in a pretty huge amount of data structured as follow</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Key1:.............. Value\nKey2:.............. Other value\nKey3:.............. Maybe another value yet\n\nKey1:.............. Different value\nKey3:.............. Invaluable\nKey5:.............. Has no value at all\n</code></pre>\n\n<p>Which I would like to transform to something like:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Key1,Key2,Key3,Key5\nValue,Other value,Maybe another value yet,\nDifferent value,,Invaluable,Has no value at all\n</code></pre>\n\n<p>I mean:</p>\n\n<ul>\n<li>Generate a collection of all the keys</li>\n<li>Generate a header line with all the Keys</li>\n<li>Map all the values to their correct \"columns\" (notice that in this example I have no \"Key4\", and Key3/Key5 interchanged)</li>\n<li>Possibly in Perl, since it would be easier to use in various environments.</li>\n</ul>\n\n<p>But I am not sure if this format is unusual, or if there is a tool that already does this.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491496727, "post_id": 43260625, "comment_id": 73590714, "body": "<code>%args = quotemeta %args</code> is very wrong, and you would have seen the warning <code>Odd number of elements in hash assignment</code>. Please don&#39;t ignore warnings. It&#39;s not obvious what you intend, but since you can&#39;t modify hash keys directly I would guess that you probably want to escape non-word characters in the hash <i>values</i>. That would go like this <code>$_ = quotemeta for values %args</code>. But are you sure that you want escaped characters in the body of your HTTP message?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491497302, "post_id": 43260625, "comment_id": 73591091, "body": "How have you generated that output? You should show the code that produced it in your question."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1491497471, "creation_date": 1491497471, "answer_id": 43261321, "question_id": 43260625, "link": "https://stackoverflow.com/questions/43260625/replace-backslash-in-hash-array/43261321#43261321", "title": "Replace backslash in hash array", "body": "<p>I suspect you have passed your arguments to the method as a hash reference</p>\n\n<pre><code>$self-&gt;raw_query( { a =&gt; 'b', c =&gt; 'd' } );\n</code></pre>\n\n<p>or perhaps</p>\n\n<pre><code>my %args = ( a =&gt; 'b', c =&gt; 'd' );\n\n$self-&gt;raw_query( \\%args );\n</code></pre>\n\n<p>This should be </p>\n\n<pre><code>$self-&gt;raw_query( a =&gt; 'b', c =&gt; 'd' );\n</code></pre>\n\n<p>or </p>\n\n<pre><code>$self-&gt;raw_query( %args );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 413, "user_id": 5370652, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9f3dde348a2ca993373b7c6aa66cdf5c?s=128&d=identicon&r=PG&f=1", "display_name": "user54", "link": "https://stackoverflow.com/users/5370652/user54"}, "is_accepted": true, "score": 0, "last_activity_date": 1491591399, "creation_date": 1491591399, "answer_id": 43285290, "question_id": 43260625, "link": "https://stackoverflow.com/questions/43260625/replace-backslash-in-hash-array/43285290#43285290", "title": "Replace backslash in hash array", "body": "<p>My problem was not with original source code, it was with source code of Perl module which was used in this code. Once I corrected it - everything worked out. Thanks everybody for help! </p>\n"}], "owner": {"reputation": 413, "user_id": 5370652, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/9f3dde348a2ca993373b7c6aa66cdf5c?s=128&d=identicon&r=PG&f=1", "display_name": "user54", "link": "https://stackoverflow.com/users/5370652/user54"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 43285290, "answer_count": 2, "score": 0, "last_activity_date": 1491591399, "creation_date": 1491495550, "question_id": 43260625, "link": "https://stackoverflow.com/questions/43260625/replace-backslash-in-hash-array", "title": "Replace backslash in hash array", "body": "<p>I have the next piece of code</p>\n\n<pre><code>sub raw_query {\n\n    my ($self,%args) = @_;\n\n    state $global_id = int(rand(10000));\n\n\n    $args{'jsonrpc'} = '2.0';\n    if ($self-&gt;cookie) { $args{'auth'} = $self-&gt;cookie; }\n    $args{'id'} = $global_id++;\n\n\n    if ($self-&gt;{verbosity} == 1) {\n       print Dumper(\\%args);\n    }\n    %args=quotemeta %args;\n    for (my $i=0; $i&lt; $self-&gt;{retries}; $i++){\n      my $response = eval { $self-&gt;{ua}-&gt;post($self-&gt;{server},\n                                              'Content-Type' =&gt; 'application/json-rpc',\n                                              'Content' =&gt; JSON-&gt;new-&gt;escape_slash-&gt;utf8-&gt;encode(\\%args)) };\n</code></pre>\n\n<p>it returns me back slashes for some values and thus JSON encoding fails:</p>\n\n<pre><code> \\{\n                                              'main' =&gt; '1',\n                                              'hostid' =&gt; '1',\n                                              'useip' =&gt; '1',\n                                              'type' =&gt; '2',\n                                              'bulk' =&gt; '1',\n                                              'interfaceid' =&gt; '1',\n                                              'ip' =&gt; '1.2.8.4',\n                                              'port' =&gt; '1',\n                                              'dns' =&gt; 'test'\n                                            }\n</code></pre>\n\n<p>Could you please help to replace this backslah: from \\{ to { ? </p>\n"}, {"tags": ["linux", "perl", "dependencies", "redhat"], "comments": [{"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1491507895, "post_id": 43258136, "comment_id": 73597304, "body": "First, there is no reason for anything to <a href=\"https://metacpan.org/pod/release/NANIS/Crypt-SSLeay-0.73_06/SSLeay.pm#DO-YOU-NEED-Crypt::SSLeay?\" rel=\"nofollow noreferrer\">have a dependency on <code>Crypt::SSLeay</code></a>. Second, I think you have borked your Perl install: <code>corelist version  Data for 2017-03-20 version was first released with perl v5.9.0</code>"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1491508623, "post_id": 43258136, "comment_id": 73597776, "body": "I filed a <a href=\"https://github.com/shirkdog/pulledpork/issues/258\" rel=\"nofollow noreferrer\">bug report with <code>pulledpork</code></a>. I don&#39;t see any reason it needs to depend on <code>Crypt::SSLeay</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3638, "user_id": 114904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8e7f89dbe697baaef1fb80098f6db29d?s=128&d=identicon&r=PG", "display_name": "MichielB", "link": "https://stackoverflow.com/users/114904/michielb"}, "is_accepted": false, "score": 1, "last_activity_date": 1492615078, "creation_date": 1492615078, "answer_id": 43499792, "question_id": 43258136, "link": "https://stackoverflow.com/questions/43258136/missing-version-pm-installing-cryptssleay-on-rhel7/43499792#43499792", "title": "Missing version.pm installing Crypt::SSLeay on RHEL7", "body": "<p>Red Hat Enterprise Linux (and Fedora) ship a subset of Perl in the <code>perl</code> package; this is why you're missing <code>version.pm</code> although the software assumes it's there; that's why Sinan mentions it is in <code>corelist</code>.</p>\n\n<p>The solution is to first install the <code>perl-core</code> package on your system, then your system will have all packages from core installed, and then you can install your software:</p>\n\n<pre><code>sudo yum install perl-core\n</code></pre>\n\n<p>By the way, you can also install Crypt::SSLeay via <code>yum</code>:</p>\n\n<pre><code>sudo yum install \"perl(Crypt::SSLeay)\"\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 5137464, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/5c5ef972d1f049462c8878aa8ae94022?s=128&d=identicon&r=PG&f=1", "display_name": "David Pham", "link": "https://stackoverflow.com/users/5137464/david-pham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1492617246, "creation_date": 1491488978, "last_edit_date": 1492617246, "question_id": 43258136, "link": "https://stackoverflow.com/questions/43258136/missing-version-pm-installing-cryptssleay-on-rhel7", "title": "Missing version.pm installing Crypt::SSLeay on RHEL7", "body": "<p>I am trying to install Crypt::SSLeay that is required to launch PulledPork from Snort. I am working on a fresh Red Hat Linux Enterprise 7 Server (in VM) with Perl 5.16-3.\nI am installing every Perl module from search.cpan.org and I need to get source code to compile myself.</p>\n\n<p>At first, I wanted to install Crypt::SSLeay with </p>\n\n<pre><code>perl Makefile.PL\nmake\nsudo make install\n</code></pre>\n\n<p>Then I got a bunch of dependencies to install first.</p>\n\n<ul>\n<li>ExtUtils::CBuilder </li>\n<li>ExtUtils::MakerMaker </li>\n<li>Perl::OSType</li>\n<li>IPC::Cmd</li>\n<li>Params::Check </li>\n<li>Locale::Maketext::Simple</li>\n<li>Module::Load::Conditional </li>\n<li>Module::Load</li>\n<li>Test::More</li>\n<li>ExtUtils::MM_Unix::tool_xsubpp</li>\n</ul>\n\n<p>But now I am stuck with this.</p>\n\n<pre><code>Can't locate version.pm in @INC (@INC contains: /usr/local/lib64/perl5\n/usr/local/share/perl5 /usr/lib64/perl5/vendor_perl\n/usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at\n/usr/local/share/perl5/Module/Load/Conditional.pm line 12. BEGIN\nfailed--compilation aborted at\n/usr/local/share/perl5/Module/Load/Conditional.pm line 12. Compilation\nfailed in require at /usr/local/share/perl5/IPC/Cmd.pm line 60. BEGIN\nfailed--compilation aborted at /usr/local/share/perl5/IPC/Cmd.pm line\n60. Compilation failed in require at /usr/local/share/perl5/ExtUtils/CBuilder/Base.pm line 10. BEGIN\nfailed--compilation aborted at\n/usr/local/share/perl5/ExtUtils/CBuilder/Base.pm line 10. Compilation\nfailed in require at\n/usr/local/share/perl5/ExtUtils/CBuilder/Platform/Unix.pm line 5.\nBEGIN failed--compilation aborted at\n/usr/local/share/perl5/ExtUtils/CBuilder/Platform/Unix.pm line 5.\nCompilation failed in require at (eval 1) line 2. BEGIN\nfailed--compilation aborted at (eval 1) line 2. Compilation failed in\nrequire at Makefile.PL line 5. BEGIN failed--compilation aborted at\nMakefile.PL line 5.\n</code></pre>\n\n<p>I install version (<a href=\"http://search.cpan.org/~jpeacock/version-0.9917/lib/version.pod\" rel=\"nofollow noreferrer\">http://search.cpan.org/~jpeacock/version-0.9917/lib/version.pod</a>) but it told me :</p>\n\n<pre><code>ERROR from evaluation of\n/home/pdavid/Downloads/version-0.9917/vutil/Makefile.PL:\nExtUtils::MM_Unix::tool_xsubpp : Can't find xsubpp at\n/usr/local/share/perl5/ExtUtils/MM_Unix.pm line 3753.\n</code></pre>\n"}, {"tags": ["python", "perl", "awk"], "comments": [{"owner": {"reputation": 688, "user_id": 3934904, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb37eab7ffaa3a64f2300cdcf156598d?s=128&d=identicon&r=PG&f=1", "display_name": "iafisher", "link": "https://stackoverflow.com/users/3934904/iafisher"}, "edited": false, "score": 1, "creation_date": 1491487814, "post_id": 43257539, "comment_id": 73583917, "body": "Could you edit your post to show your desired output for the data?"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1491488084, "post_id": 43257539, "comment_id": 73584143, "body": "I&#39;ve voted to close this question because it appears to be a request for a recommendation for a tool or solution, rather than a request for assistance with your own code. This makes your question off-topic for StackOverflow. If that assessment was incorrect, and you do indeed want help writing your own code, then please <a href=\"http://stackoverflow.com/posts/43257539/edit\">update your question</a> and I&#39;ll happily retract my close vote."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1491488261, "post_id": 43257539, "comment_id": 73584294, "body": "Input - <code>G70,ge,33,61,ge,CD,33,40,CD,in,-----40,50------,INt,CD,-----&zwnj;&#8203;-50,61------,CD</code> Output - <code>G70,ge,1,29,ge,CD,1,8,CD,in,------8,18------,INt,CD,------18&zwnj;&#8203;,29------,CD</code> As per your question there is not matched on your output. Please check the post."}, {"owner": {"reputation": 57, "user_id": 7827228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e7b4c4aea495d6b6dc57eefbbbfc8b?s=128&d=identicon&r=PG", "display_name": "zhongpingxu", "link": "https://stackoverflow.com/users/7827228/zhongpingxu"}, "edited": false, "score": 0, "creation_date": 1491488400, "post_id": 43257539, "comment_id": 73584389, "body": "Yes, I have  update my question and add the resulted I want to get."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1491488688, "post_id": 43257539, "comment_id": 73584637, "body": "Your math doesn&#39;t seem to add up.  Please verify second row."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491488883, "post_id": 43257539, "comment_id": 73584817, "body": "Now that you have a Perl answer and a Python answer, why have you removed the Perl and Python tags and the sentence saying that solutions using them were acceptable?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 0, "creation_date": 1491500727, "post_id": 43257539, "comment_id": 73593126, "body": "@ghoti: I don&#39;t understand how you can see this as a request for a recommendation for a tool. The OP says that they are trying to use an awk array to solve the problem and they show their non-working awk code, asking for help to fix it. This question is off topic in no way, and I think you should retract your votes."}], "answers": [{"comments": [{"owner": {"reputation": 14180, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "reply_to_user": {"reputation": 57, "user_id": 7827228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e7b4c4aea495d6b6dc57eefbbbfc8b?s=128&d=identicon&r=PG", "display_name": "zhongpingxu", "link": "https://stackoverflow.com/users/7827228/zhongpingxu"}, "edited": false, "score": 0, "creation_date": 1491501843, "post_id": 43257892, "comment_id": 73593813, "body": "@zhongpingxu, it covers the case you mentioned. Be aware of <code>item.isdigit()</code>."}, {"owner": {"reputation": 57, "user_id": 7827228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e7b4c4aea495d6b6dc57eefbbbfc8b?s=128&d=identicon&r=PG", "display_name": "zhongpingxu", "link": "https://stackoverflow.com/users/7827228/zhongpingxu"}, "edited": false, "score": 0, "creation_date": 1491502177, "post_id": 43257892, "comment_id": 73593991, "body": "I have a mistake. The same thread with awk script as Karafa&#39;s answer,  used <code>item.isdigit()</code>to find the digital columns."}], "tags": [], "owner": {"reputation": 14180, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "is_accepted": false, "score": 0, "last_activity_date": 1491488961, "last_edit_date": 1491488961, "creation_date": 1491488359, "answer_id": 43257892, "question_id": 43257539, "link": "https://stackoverflow.com/questions/43257539/rebase-numeric-columns-in-a-csv-file/43257892#43257892", "title": "Rebase numeric columns in a CSV file", "body": "<p>Here is a solution using Python.</p>\n\n<pre><code>import csv\n\nlists = list()\nwith open('test.csv', 'r') as f:\n    reader = csv.reader(f)\n    for row in reader:\n        v = int(row[2]) - 1\n        lists.append([int(item) - v if item.isdigit() else item for item in row])\n\n\nprint(lists)\n\"\"\"\n[['G70', 'ge', 1, 29, 'ge', 'CD', 1, 8, 'CD', 'in', 8, 18, 'INt', 'CD', 18, 29, 'CD'], \n['G83', 'ge', 1, 46, 'ge', 'CD', 1, 8, 'CD', 'in', 8, 16, 'INt', 'CD', 16, 23, 'CD', 23, 46, 'hg']]\n\"\"\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7827228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e7b4c4aea495d6b6dc57eefbbbfc8b?s=128&d=identicon&r=PG", "display_name": "zhongpingxu", "link": "https://stackoverflow.com/users/7827228/zhongpingxu"}, "edited": false, "score": 0, "creation_date": 1491489451, "post_id": 43257985, "comment_id": 73585293, "body": "For someone voted to close this question because he think  I need is a tool, rather than a request for assistance with my own code. So, I selected to  remove. Nice, your perl onelines is powerful."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 57, "user_id": 7827228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e7b4c4aea495d6b6dc57eefbbbfc8b?s=128&d=identicon&r=PG", "display_name": "zhongpingxu", "link": "https://stackoverflow.com/users/7827228/zhongpingxu"}, "edited": false, "score": 0, "creation_date": 1491500891, "post_id": 43257985, "comment_id": 73593239, "body": "@zhongpingxu: <b>ghoti</b> was wrong in their assessment of your question. It is on topic but very unclear until you added the desired output. Don&#39;t be bullied!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1491488577, "last_edit_date": 1592644375, "creation_date": 1491488577, "answer_id": 43257985, "question_id": 43257539, "link": "https://stackoverflow.com/questions/43257539/rebase-numeric-columns-in-a-csv-file/43257985#43257985", "title": "Rebase numeric columns in a CSV file", "body": "\n<p>There used to be a Perl tag on this question and a specific sentence saying that Perl or Python solutions were also acceptable. I don't know why that has been removed</p>\n<p>You may do this with Perl as follows</p>\n<pre class=\"lang-none prettyprint-override\"><code>perl -pe '$b = (split /,/, $_, 4)[2]-1; s/\\b(\\d+)\\b/$1-$b/eg;' myfile\n</code></pre>\n<p>Note that this assumes that none of the fields that need to be left unchanged contain decimal digits</p>\n<h3>output</h3>\n<pre class=\"lang-none prettyprint-override\"><code>G70,ge,1,29,ge,CD,1,8,CD,in,8,18,INt,CD,18,29,CD\nG83,ge,1,46,ge,CD,1,8,CD,in,8,16,INt,CD,16,23,CD,23,46,hg\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7827228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e7b4c4aea495d6b6dc57eefbbbfc8b?s=128&d=identicon&r=PG", "display_name": "zhongpingxu", "link": "https://stackoverflow.com/users/7827228/zhongpingxu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1491503731, "creation_date": 1491487454, "last_edit_date": 1491502793, "question_id": 43257539, "link": "https://stackoverflow.com/questions/43257539/rebase-numeric-columns-in-a-csv-file", "title": "Rebase numeric columns in a CSV file", "body": "\n\n<p>I have a data file as follows: </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>G70,ge,33,61,ge,CD,33,40,CD,in,40,50,INt,CD,50,61,CD\nG83,ge,53,98,ge,CD,53,60,CD,in,60,68,INt,CD,68,75,CD,75,98,hg\n</code></pre>\n\n<p>In each line, I need to rebase all the numeric columns relative to one less than the value in the third column.</p>\n\n<p>The final result should be as follows. In reality I have a much bigger file and the number of columns is different</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>G70,ge,1,29,ge,CD,1,8,CD,in,8,18,INt,CD,18,29,CD\nG83,ge,1,46,ge,CD,1,8,CD,in,8,15,INt,CD,15,23,CD,23,46,hg\n</code></pre>\n\n<p>I have tried this awk code, but it doesn't work for me</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>awk -F, 'BEGIN{for(i=3;i&lt;=NF;i+=4){array[i] = i+1;} {for(i in array) printf $i-$3+1\"\"$array[i]-$3+1\"\"FS;print \"\"}' \n</code></pre>\n\n<p>Please help me to get this working. Or alternatively a Perl or Python solution is fine.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "edited": false, "score": 3, "creation_date": 1491487507, "post_id": 43257186, "comment_id": 73583665, "body": "This is a nice question"}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 4, "creation_date": 1491489800, "post_id": 43257186, "comment_id": 73585558, "body": "For those, without strace, you can use for example this bash script <code>mycat</code> as <code>for i in aa bb cc; do echo &quot;${i}_$BASHPID&quot;; done</code> (ofc <code>chmod 755 mycat</code>). it will show different <code>$BASH_PID</code> for every loop. :)"}, {"owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "edited": false, "score": 1, "creation_date": 1491491984, "post_id": 43257186, "comment_id": 73587182, "body": "Maybe the backtick is reusing the same memory buffer and that fools the /g into thinking it is the same string."}, {"owner": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1491494213, "post_id": 43257186, "comment_id": 73588981, "body": "The <code>qx</code> strikes back. The episode V - why do not use backticks... :)"}], "answers": [{"comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1491996419, "post_id": 43271098, "comment_id": 73798205, "body": "Sounds like bug to be reported for me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1492018247, "post_id": 43271098, "comment_id": 73814313, "body": "@Oleg V. Volkov, It&#39;s a bug, but I can&#39;t figure out any benefit in fixing it. I can&#39;t figure out a situation in which it causes harm, and it actually helped in the OP&#39;s case"}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1493287647, "post_id": 43271098, "comment_id": 74356643, "body": "@ikegami While it helped, it is also confusing. An endless loop seems to be the naiv expectation."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1493302038, "post_id": 43271098, "comment_id": 74367471, "body": "@Micha Wiedenmann, Don&#39;t get me wrong, people shouldn&#39;t rely on the buggy behaviour. I&#39;m just saying that if they accidentally do, their program still works, and that&#39;s not a bad thing."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1493286745, "last_edit_date": 1493286745, "creation_date": 1491546397, "answer_id": 43271098, "question_id": 43257186, "link": "https://stackoverflow.com/questions/43257186/global-regex-match-in-while-on-backtick-result/43271098#43271098", "title": "Global regex match in while() on backtick result", "body": "<p>The position at which <code>//g</code> left off is stored in magic added to the scalar against which the matching was performed.</p>\n\n<pre><code>$ perl -MDevel::Peek -e'$_ = \"abc\"; Dump($_); /./g; Dump($_);'\nSV = PV(0x32169a0) at 0x3253ee0\n  REFCNT = 1\n  FLAGS = (POK,IsCOW,pPOK)\n  PV = 0x323bae0 \"abc\"\\0\n  CUR = 3\n  LEN = 10\n  COW_REFCNT = 1\nSV = PVMG(0x326c040) at 0x3253ee0\n  REFCNT = 1\n  FLAGS = (SMG,POK,IsCOW,pPOK)\n  IV = 0\n  NV = 0\n  PV = 0x323bae0 \"abc\"\\0\n  CUR = 3\n  LEN = 10\n  COW_REFCNT = 2\n  MAGIC = 0x323d050\n    MG_VIRTUAL = &amp;PL_vtbl_mglob\n    MG_TYPE = PERL_MAGIC_regex_global(g)\n    MG_FLAGS = 0x40\n      BYTES\n    MG_LEN = 1\n</code></pre>\n\n<p>This means the only way the behaviour observed is possible in the backticks example is if the match operator matched against the same scalar all four times it was evaluated! How is that possible? It's because backticks is one of the operators that uses a TARG.</p>\n\n<p>Creating a scalar is relatively expensive since it requires up to three memory allocations! In order to increase performance, a scalar called TARG is associated with each instance of some operators. When an operator with a TARG is evaluated, it may populate the TARG with the value to return and return the TARG (rather than allocating and returning a new one). </p>\n\n<p>\"So what?\", you might ask. After all, you've already demonstrated that assigning to a scalar resets the match position associated with that scalar. That's what's suppose to happen, but it doesn't for backticks.</p>\n\n<p>Magic not only allows information to be attached to a variable, it also attaches functions to be called under certain conditions. The magic added by <code>//g</code> attaches a function that should be called after the scalar is modified (which is indicated by the <code>SMG</code> flag in the dump above). This function is what clears the position when a value is assigned to the scalar.</p>\n\n<p>The assignment operator handles the magic properly, but not by the backticks operator. It doesn't expect magic to have been added to its TARG, so it doesn't check if there's any, so the function that clears the match position goes uncalled.</p>\n"}], "owner": {"reputation": 252, "user_id": 1952558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483fb7822798b5e5cacd9062d04b38f1?s=128&d=identicon&r=PG", "display_name": "MrCricket", "link": "https://stackoverflow.com/users/1952558/mrcricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 2, "accepted_answer_id": 43271098, "answer_count": 1, "score": 16, "last_activity_date": 1493286745, "creation_date": 1491486585, "question_id": 43257186, "link": "https://stackoverflow.com/questions/43257186/global-regex-match-in-while-on-backtick-result", "title": "Global regex match in while() on backtick result", "body": "<p>This script searches for lines with words and prints them, while <strong>rereading source file in each iteration</strong>:</p>\n\n<pre><code># cat mm.pl\n#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile( `cat aa` =~ /(\\w+)/g ) {\n    print \"$1\\n\";\n}\n</code></pre>\n\n<p>Input file:</p>\n\n<pre><code># cat aa\naa\nbb\ncc\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code># ./mm.pl\naa\nbb\ncc\n</code></pre>\n\n<p>Please explain me why running the script isn't <strong>endless</strong>.</p>\n\n<p>In every <em>while</em> iteration offset for regex engine <strong>should be reset</strong> because expression is changed (new <em>cat</em> is forked).</p>\n\n<p>I thought perl does some kind of caching for <em>cat</em> result, but strace claims that <em>cat</em> was spawned 4 times (3 for 3 lines + 1 for false while condition):</p>\n\n<pre><code># strace -f ./mm.pl 2&gt;&amp;1 | grep cat | grep -v ENOENT\n[pid 22604] execve(\"/bin/cat\", [\"cat\", \"aa\"], [/* 24 vars */] &lt;unfinished ...&gt;\n[pid 22605] execve(\"/bin/cat\", [\"cat\", \"aa\"], [/* 24 vars */] &lt;unfinished ...&gt;\n[pid 22606] execve(\"/bin/cat\", [\"cat\", \"aa\"], [/* 24 vars */] &lt;unfinished ...&gt;\n[pid 22607] execve(\"/bin/cat\", [\"cat\", \"aa\"], [/* 24 vars */] &lt;unfinished ...&gt;\n</code></pre>\n\n<p>On the other hand, following example <strong>runs forever</strong>:</p>\n\n<pre><code># cat kk.pl\n#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $d = 'aaa';\nwhile( $d =~ /(\\w+)/g ) {\n    print \"$1\\n\";\n    $d = 'aaa';\n}\n</code></pre>\n\n<p>Where is a difference between the two scripts? What am I missing?</p>\n"}, {"tags": ["java", "python", "perl", "export-to-csv", "xbrl"], "answers": [{"comments": [{"owner": {"reputation": 6356, "user_id": 284285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8lZ5E.jpg?s=128&g=1", "display_name": "Ghislain Fourny", "link": "https://stackoverflow.com/users/284285/ghislain-fourny"}, "edited": false, "score": 0, "creation_date": 1498291355, "post_id": 43257374, "comment_id": 76450342, "body": "Apologies, Borodin, I meant to upvote your answer, not downvote, but I don&#39;t manage to undo it as it says it&#39;s locked. Even though I put it in perspective, I believe that your answer is accurate technically, especially from a pragmatic and practical viewpoint, as XML tools are currently at a very high level of maturity and XBRL tools are more recent. If you do a tiny edit, I should be able to fix my vote if I understood how SO works."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 6, "last_activity_date": 1498294464, "last_edit_date": 1498294464, "creation_date": 1491487045, "answer_id": 43257374, "question_id": 43257092, "link": "https://stackoverflow.com/questions/43257092/xslt-equivalent-for-xbrl-that-allows-transformations-on-xbrl-like-xslt-does-to-x/43257374#43257374", "title": "XSLT equivalent for XBRL that allows transformations on XBRL like XSLT does to XML", "body": "<p>The <a href=\"https://en.wikipedia.org/wiki/XBRL\" rel=\"nofollow noreferrer\"><em>eXtensible Business Reporting Language</em> (XBRL)</a> is just a standard that says how to use XML documents and how they should be structured. XSLT will transform XBRL just fine because it is XML data.</p>\n"}, {"tags": [], "owner": {"reputation": 6356, "user_id": 284285, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8lZ5E.jpg?s=128&g=1", "display_name": "Ghislain Fourny", "link": "https://stackoverflow.com/users/284285/ghislain-fourny"}, "is_accepted": false, "score": 1, "last_activity_date": 1494337211, "last_edit_date": 1494337211, "creation_date": 1494336879, "answer_id": 43871343, "question_id": 43257092, "link": "https://stackoverflow.com/questions/43257092/xslt-equivalent-for-xbrl-that-allows-transformations-on-xbrl-like-xslt-does-to-x/43871343#43871343", "title": "XSLT equivalent for XBRL that allows transformations on XBRL like XSLT does to XML", "body": "<p>I think that the closest to a transformation language in XBRL would be <a href=\"http://www.xbrl.org/wgn/xbrl-formula-overview/pwd-2011-12-21/xbrl-formula-overview-wgn-pwd-2011-12-21.html\" rel=\"nofollow noreferrer\">XBRL Formula 1.0</a>, also standardized by XBRL international.</p>\n\n<p>The XBRL data model (which is to distinguish from the underlying XML syntax, which is a different, tree-based and semi-structured data model) involves facts reported against concepts and carrying contexts (period, entity, unit, dimensions). Transforming XBRL to XBRL means transforming input instance facts to output instance facts, and this is exactly what XBRL Formula does. </p>\n\n<p>This is analogous to XSLT transforming XML documents into new XML documents.</p>\n\n<p>Transforming XBRL into something <em>else</em> than XBRL is best done with an XBRL processor (some of them allow exporting instance facts as well as taxonomies to tabular/csv formats via APIs). XSLT itself, as suggested by Borodin, works as well on the underlying XML syntax, but may lead to semantic errors in the output, as XSLT is not aware of the XBRL data model.</p>\n"}], "owner": {"reputation": 41, "user_id": 6580040, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u-PzjZfvzyw/AAAAAAAAAAI/AAAAAAAAACQ/NP3IBka_gh4/photo.jpg?sz=128", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/6580040/jeremy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1500282188, "creation_date": 1491486348, "question_id": 43257092, "link": "https://stackoverflow.com/questions/43257092/xslt-equivalent-for-xbrl-that-allows-transformations-on-xbrl-like-xslt-does-to-x", "title": "XSLT equivalent for XBRL that allows transformations on XBRL like XSLT does to XML", "body": "<p>Is there an XSLT equivalent for XBRL? Something to allow me to do transformations on XBRL like XSLT does to XML. Another option would be a java/python program/perl or other easy to learn program that is open source and can run on Linux Ubuntu that would convert from XBRL to csv files in batch.</p>\n"}, {"tags": ["perl", "automation"], "comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 2, "creation_date": 1491484299, "post_id": 43256148, "comment_id": 73581052, "body": "consider the fact that you may have to use more than one module, and you may actually have to write some code of your own. There is no App::Jamal::Mahroof module on CPAN."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1491508712, "post_id": 43256148, "comment_id": 73597831, "body": "See <a href=\"https://metacpan.org/pod/Win32::OLE\" rel=\"nofollow noreferrer\">Win32::OLE</a>."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1491552330, "post_id": 43256148, "comment_id": 73613751, "body": "@Dr.Avalanche I am in no way skilled enough to write the code that would add such functionality otherwise why would i have asked the question? Maybe theres a Logic::Use::Brain module on CPAN?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1491552347, "post_id": 43256148, "comment_id": 73613765, "body": "Thanks @Sinan&#220;n&#252;r I will look into that :)"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1491558248, "post_id": 43256148, "comment_id": 73617663, "body": "@JamalMahroof this site is specifically for programming problems, not &#39;recommend a tool&#39;, if you can&#39;t program Perl why are you using it?"}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "reply_to_user": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1491560931, "post_id": 43256148, "comment_id": 73619378, "body": "@Dr.Avalanche I am programming a script to automate some tasks, problem: need a recommended way of approaching the PROGRAMMING problem. Thanks."}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1491563991, "post_id": 43256148, "comment_id": 73621377, "body": "@JamalMahroof you post no code, no effort, ask how to do this, without any research of your own. Write down a list of steps the program should take, implement them one at time by writing code. Post a specific problem. You have not posted a specific problem. This is not a recommendation site."}, {"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491565120, "post_id": 43256148, "comment_id": 73622113, "body": "I post no effort? You put no effort into the grammar in that comment, I am disappointed."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "edited": false, "score": 0, "creation_date": 1491561082, "post_id": 43273556, "comment_id": 73619470, "body": "This is perfect. I had no clue that this existed!"}], "tags": [], "owner": {"reputation": 48, "user_id": 6608856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfab3d50e083b62f937114eb4aa7182?s=128&d=identicon&r=PG", "display_name": "G. Swiec", "link": "https://stackoverflow.com/users/6608856/g-swiec"}, "is_accepted": true, "score": 1, "last_activity_date": 1491554486, "creation_date": 1491554486, "answer_id": 43273556, "question_id": 43256148, "link": "https://stackoverflow.com/questions/43256148/best-way-to-do-gui-automation-in-perl/43273556#43273556", "title": "Best way to do GUI automation in perl", "body": "<p>I would go with <a href=\"https://www.autohotkey.com/\" rel=\"nofollow noreferrer\">https://www.autohotkey.com/</a> and Inspect.exe from Windows SDK <a href=\"https://msdn.microsoft.com/pl-pl/library/windows/desktop/dd318521(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/pl-pl/library/windows/desktop/dd318521(v=vs.85).aspx</a>, for finding gui elements. </p>\n\n<p>You can also embed perl scripts inside.</p>\n"}], "owner": {"reputation": 23, "user_id": 7798131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b93dba452c476ca85b71d47889786a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Jamal Mahroof", "link": "https://stackoverflow.com/users/7798131/jamal-mahroof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "accepted_answer_id": 43273556, "answer_count": 1, "score": -2, "last_activity_date": 1491554486, "creation_date": 1491484034, "question_id": 43256148, "link": "https://stackoverflow.com/questions/43256148/best-way-to-do-gui-automation-in-perl", "title": "Best way to do GUI automation in perl", "body": "<p>I am trying to automate some outlook emails to be triggered on a certain event. I have tried using the Win32::GuiTest module however i cannot find a way to search through my email subjects for a certain string, which is required for my automation. I require more advanced functionality than the module provides me such as searching for a string through emails, triggering some code once a certain email is recieved (This email is always the same). If anyone could recommend a good way to do this in perl that would be extremely helpful.</p>\n"}, {"tags": ["perl", "getopt", "getopt-long"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491484396, "post_id": 43255890, "comment_id": 73581128, "body": "Check <code>scalar @ARGV</code> ? If <code>@ARGV &gt; 0</code> there are (nonoption) arguments not picked up by <code>GetOptions()</code> on the command line"}, {"owner": {"reputation": 143, "user_id": 6583493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20749c268f5d3e4d2c785499eb6a17c0?s=128&d=identicon&r=PG", "display_name": "abhishek", "link": "https://stackoverflow.com/users/6583493/abhishek"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1491485326, "post_id": 43255890, "comment_id": 73581861, "body": "@H&#229;konH&#230;gland that seems like it. I wish I could accept that an answer :)"}], "answers": [{"tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 1, "last_activity_date": 1491485305, "creation_date": 1491485305, "answer_id": 43256651, "question_id": 43255890, "link": "https://stackoverflow.com/questions/43255890/how-to-use-getoptions-to-detect-trailing-strings/43256651#43256651", "title": "How to use GetOptions to detect trailing strings?", "body": "<p>After calling <code>GetOptions</code>, check for any remaining command line options in the <code>@ARGV</code> array.  This assumes that all unexpected arguments will generate an error:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse Getopt::Long qw(GetOptions);\n\nmy $source_address;\nmy $dest_address;\n\nGetOptions('from=s' =&gt; \\$source_address,\n           'to=s' =&gt; \\$dest_address) or die \"Usage: $0 --from NAME --to NAME\\n\";\n\n@ARGV and die \"Error: unexpected args: @ARGV\";\n\nif ($source_address) {\n    say $source_address;\n}\n\nif ($dest_address) {\n    say $dest_address;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1491486839, "post_id": 43257053, "comment_id": 73583081, "body": "Why do you print <code>Error</code> if <code>--from</code> is not used?  It is an option.  Same for <code>--to</code>."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1491487875, "post_id": 43257053, "comment_id": 73583980, "body": "but the usage specifically says must be or <code>die &quot;Usage: $0 --from NAME --to NAME\\n&quot;;</code> which tells me you need both options. like for instance calculating distance from and to."}, {"owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1491487902, "post_id": 43257053, "comment_id": 73584002, "body": "Your answer is correct and is marked as such, I just added the additional stuff which made sense to me :)"}], "tags": [], "owner": {"reputation": 17619, "user_id": 7818749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec4a72453e116debb802d55e88c2572e?s=128&d=identicon&r=PG&f=1", "display_name": "Gerhard", "link": "https://stackoverflow.com/users/7818749/gerhard"}, "is_accepted": false, "score": 1, "last_activity_date": 1491486280, "creation_date": 1491486280, "answer_id": 43257053, "question_id": 43255890, "link": "https://stackoverflow.com/questions/43255890/how-to-use-getoptions-to-detect-trailing-strings/43257053#43257053", "title": "How to use GetOptions to detect trailing strings?", "body": "<p>I was busy answered and I see it is now answered, just some additional info.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse Getopt::Long qw(GetOptions);\n\nmy $source_address;\nmy $dest_address;\n\nGetOptions('from=s' =&gt; \\$source_address,\n       'to=s' =&gt; \\$dest_address) or die \"Usage: $0 --from NAME --to NAME\\n\";\n\n@ARGV and die \"To many arguments after --from or --to : @ARGV \";\n\nif ($source_address) {\nsay $source_address;\n} else {\nsay \"Error: No Source specified\"; #Check to see if --from is actually specified, else print error.\n}\n\nif ($dest_address) {\nsay $dest_address;\n} else {\nsay \"Error: No destination specified\"; #Check to see if --to is actually specified, else print error.\n}\n</code></pre>\n\n<p>so in short</p>\n"}], "owner": {"reputation": 143, "user_id": 6583493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20749c268f5d3e4d2c785499eb6a17c0?s=128&d=identicon&r=PG", "display_name": "abhishek", "link": "https://stackoverflow.com/users/6583493/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 43256651, "answer_count": 2, "score": 0, "last_activity_date": 1491486280, "creation_date": 1491483386, "last_edit_date": 1491485568, "question_id": 43255890, "link": "https://stackoverflow.com/questions/43255890/how-to-use-getoptions-to-detect-trailing-strings", "title": "How to use GetOptions to detect trailing strings?", "body": "<p>I am absolutely new to Perl and I am trying to figure out a problem with Perl script parsing script arguments.</p>\n\n<p>I have the following Perl script called sample-perl.pl:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse Getopt::Long qw(GetOptions);\n\nmy $source_address;\nmy $dest_address;\n\nGetOptions('from=s' =&gt; \\$source_address,\n           'to=s' =&gt; \\$dest_address) or die \"Usage: $0 --from NAME --to NAME\\n\";\nif ($source_address) {\n    say $source_address;\n}\n\nif ($dest_address) {\n    say $dest_address;\n}\n</code></pre>\n\n<p>And if I use a command like (<strong>where I forgot to enter the second option</strong>):</p>\n\n<pre><code>perl sample-perl.pl --from nyc lon\nOutput will be: nyc\n</code></pre>\n\n<p>How can I enforce that if there is an additional string at the end, it is detected and an error is displayed instead?</p>\n\n<p>Solution:</p>\n\n<p>adding this will help my case at least:</p>\n\n<pre><code>if(@ARGV){\n    //throw error\n}\n</code></pre>\n"}, {"tags": ["xml", "perl", "xml-twig"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491483023, "post_id": 43255247, "comment_id": 73580056, "body": "(Not my DV). Can I suggest some complete example XML input would help massively in understanding what your code currently does?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491483945, "post_id": 43255247, "comment_id": 73580743, "body": "You urgently need to read <a href=\"http://stackoverflow.com/questions/how-to-ask\"><i>How do I ask a good question?</i></a>  and <a href=\"http://stackoverflow.com/help/mcve\"><i>How to create a Minimal, Complete, and Verifiable example</i></a>. I can remember none of your many questions that gave anywhere near enough information even to properly understand your situation, never mind the MCVE ideal of being able to simply copy your code and data and run it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491484190, "post_id": 43255247, "comment_id": 73580951, "body": "Do you realise that <code>descendants_or_self</code> simply returns the object element and all of its descendants? You are looping through all of these elements and, for each of them, wrapping the root node of the whole document in a <code>tree</code> element, producing something like <code>&lt;tree&gt;&lt;tree&gt;&lt;tree&gt;&lt;tree&gt;&lt;tree&gt;...&lt;&#47;tree&gt;&lt;&#47;tree&gt;&lt;&#47;tree&gt;&lt;&#47;tree&zwnj;&#8203;&gt;&lt;&#47;tree&gt;</code>. I am sure that&#39;s not what you intend."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491484508, "post_id": 43255247, "comment_id": 73581227, "body": "@Borodin Err, what. For all my recent, non-theoretical, questions I have provided input, script, expected output, and output. I did not in this case, true. As my post states /clearly/ I suspect that the issue lies in my misunderstanding of what <code>root</code> signifies when going through <code>descendants</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1491487630, "post_id": 43255247, "comment_id": 73583760, "body": "@BramVanroy: Perhaps I&#39;ve been unlucky with the questions of yours that I noticed. However you now have an idea about why this question may have been downvoted. As I said, I also think you may be misunderstanding <code>descendants_or_self</code>, as I can&#39;t see you wanting to wrap all those elements in a document individually. <i>&quot;<code>root</code> of the special <code>$_</code> is actually the root of <code>$twig</code> and not the root of the sub tree itself&quot;</i> Yes, because the root of the subtree <code>$_</code> itself is just <code>$_</code>. These things are very straightforward to discover by just experimenting and printing the result of various methods."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 1, "last_activity_date": 1491483379, "last_edit_date": 1491483379, "creation_date": 1491482988, "answer_id": 43255730, "question_id": 43255247, "link": "https://stackoverflow.com/questions/43255247/understanding-xmltwigs-wrap-in/43255730#43255730", "title": "Understanding XML::Twig&quot;s wrap_in", "body": "<p>Normally when trying to create subdocuments like that, I just create a new one, and insert a copied node.</p>\n\n<p>Something like this:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig-&gt;new-&gt;parse( \\*DATA );\n\nforeach my $node ( $twig-&gt;get_xpath('./node') ) {\n\n   my $new_root =\n     XML::Twig::Elt-&gt;new( 'treebank', { id =&gt; \"someid\", c =&gt; \"d\" } );\n   my $new_doc = XML::Twig-&gt;new-&gt;set_root($new_root);\n   $new_doc-&gt;set_xml_version('1.0');\n   my $tree = $new_doc-&gt;root-&gt;insert_new_elt('trees')-&gt;insert_new_elt('tree');\n\n   $node-&gt;cut;\n   $node-&gt;paste( 'last_child', $tree );\n\n   $new_doc-&gt;set_pretty_print('indented');\n   $new_doc-&gt;print;\n}\n\n__DATA__\n&lt;xml&gt;\n &lt;node begin=\"0\" c=\"d\"&gt;\n   &lt;node a=\"b\"&gt;&lt;/node&gt;\n&lt;/node&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>But to address your specific points - yes, <code>root</code> does give the <em>document</em> root. It's a special case XML element, and <code>root</code> points you at the top level, because it's part of the  context of the node.</p>\n\n<p><code>wrap_in</code> is a special case for modifying a <em>node</em> but it won't work with a root node, because they're a special case. So you could (using my example above):</p>\n\n<pre><code>foreach my $node ( $twig-&gt;get_xpath('./node') ) {\n   my $new_doc = XML::Twig-&gt;new;\n   $new_doc-&gt;set_xml_version('1.0');\n\n   $node-&gt;cut;\n   $new_doc-&gt;set_root ($node);\n   $node-&gt;wrap_in( 'trees', treebank =&gt; { id =&gt; 'someid' } );\n   $new_doc-&gt;set_pretty_print('indented');\n   $new_doc-&gt;print;\n}\n</code></pre>\n\n<p>You can separate this out using the <code>cut</code> and <code>paste</code> methods of <code>XML::Twig</code>, </p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 43255730, "answer_count": 1, "score": 0, "last_activity_date": 1491483379, "creation_date": 1491481672, "last_edit_date": 1491482022, "question_id": 43255247, "link": "https://stackoverflow.com/questions/43255247/understanding-xmltwigs-wrap-in", "title": "Understanding XML::Twig&quot;s wrap_in", "body": "<p>I am looping through a twig's descendants, and in this loop I want to create new twigs to output later. Those new twigs are basically wrapped versions of the current looped item. Something like this:</p>\n\n<pre><code># $twig already exists.\nmy @descendants = $twig-&gt;root-&gt;first_child-&gt;descendants_or_self;\nforeach (@descendants) {\n  $_-&gt;root-&gt;wrap_in('tree');\n\n  my $treetop = XML::Twig-&gt;new()-&gt;set_root($_);\n\n  $treetop-&gt;root-&gt;wrap_in('trees', treebank =&gt; {\n    id =&gt; 'someid'\n  });\n\n  if (exists $hash{'somekey'}) {\n    $treetop-&gt;root-&gt;set_att(c =&gt; 'd');\n  }\n}\n</code></pre>\n\n<p>An example of <code>$_-&gt;sprint</code> in the loop:</p>\n\n<pre><code>&lt;node begin=\"0\"&gt;\n  &lt;node a=\"b\"&gt;&lt;/node&gt;\n&lt;/node&gt;\n</code></pre>\n\n<p>However, the result of this (after the last if-clause) is (<code>$treetop-&gt;sprint</code>):</p>\n\n<pre><code>&lt;node begin=\"0\" c=\"d\"&gt;\n  &lt;node a=\"b\"&gt;&lt;/node&gt;\n&lt;/node&gt;\n</code></pre>\n\n<p>In other words, the attribute is added to the initial 'root', and no wrapping happens. But what I'm trying to achieve is:</p>\n\n<pre><code>&lt;treebank id=\"someid\" c=\"d\"&gt;\n  &lt;trees&gt;\n    &lt;tree&gt;\n      &lt;node begin=\"0\"&gt;\n        &lt;node a=\"b\"&gt;&lt;/node&gt;\n      &lt;/node&gt;\n    &lt;/tree&gt;\n  &lt;/trees&gt;\n&lt;/treebank&gt;\n</code></pre>\n\n<p>Interestingly, when I call <code>$_-&gt;root</code> I get to see the original root (<code>$twig</code>'s root), so I guess the root is implicitly inherited as part of the object. I think that that's where most of my confusion lies: <code>root</code> of the special <code>$_</code> is actually the root of <code>$twig</code> and not the root of the sub tree itself.</p>\n\n<p>What is the right way to take an input twig descendant, turn it into a twig with a wrapping structure?</p>\n"}, {"tags": ["list", "perl", "matrix"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1491481466, "post_id": 43255121, "comment_id": 73578831, "body": "Your example has the wrong variable names."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491481613, "post_id": 43255121, "comment_id": 73578938, "body": "In order to help, we would need to understand what your downstream stuff needs. If you don&#39;t know that, tell us what you intend to do with the data later. The structure you have now is very typical. Looking at the data I would have done the same. You group by type, and then count the samples. This corresponds to the table you showed insofar that the first key is the row, and the second key is the column."}, {"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491481943, "post_id": 43255121, "comment_id": 73579200, "body": "Thanks for the heads up. Downstream I want to create an output file with the matrix structure in order to look which sample appears most often with which type but since the groupings are redundant I am not quite sure on how to get the data to a more R-readable format."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491482009, "post_id": 43255121, "comment_id": 73579244, "body": "So your question boils down to how to turn this into a CSV file?"}, {"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491482133, "post_id": 43255121, "comment_id": 73579330, "body": "Apparently so...I was hoping to learn something on how to properly create matrices in perl but now I feel kind of stupid. But it seems...yes..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491482218, "post_id": 43255121, "comment_id": 73579391, "body": "Well, there is no built-in data structure for a matrix. <a href=\"https://metacpan.org/search?q=matrix\" rel=\"nofollow noreferrer\">A quick search</a> reveals a few modules that might be helpful, but if all you want to do is transform the data so you can consume it easily with R, then a CSV file would be ideal, wouldn&#39;t it?"}, {"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491482394, "post_id": 43255121, "comment_id": 73579538, "body": "A CSV file would be ideal that is true. I already checked some modules for matrices but I wanted to avoid modules as much as possible in order to get better in Perl. But you are of course correct a CSV file would be ideal for R input."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491515302, "post_id": 43255121, "comment_id": 73601184, "body": "Learning what&#39;s on cpan, which one to use for what problems and how to use them effectively is exactly how you will get better with Perl. Most other things are just programming. But learning the ecosystem is essential to being really effective. If course you also needs to know the language&#39;s kinks and edges, but that will come naturally. The cpan is open source. Module are just code. Read it. That&#39;s the best way to learn. :-) do you need help with the csv file?"}, {"owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1491550625, "post_id": 43255121, "comment_id": 73612746, "body": "Thanks for the help simbabque ! I think I got it worked out after you boiled my problem down so efficiently :P . Gave me another look on how to solve it. I have some minor kinks to work out but I think I got it. I may have to update the question if I get stuck again. Thanks !"}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1492163704, "last_edit_date": 1492163704, "creation_date": 1492090193, "answer_id": 43393659, "question_id": 43255121, "link": "https://stackoverflow.com/questions/43255121/create-matrix-from-redundant-list/43393659#43393659", "title": "Create Matrix from redundant list", "body": "<p>You can \"munge\" your hash of hashes into an array of arrays and then input that into <a href=\"http://search.cpan.org/~kjetil/Acme-Tools-0.21/Tools.pm\" rel=\"nofollow noreferrer\">Acme::Tools</a>::pivot() or <a href=\"http://search.cpan.org/~bdulfer/Data-Pivot-0.05/Pivot.pm\" rel=\"nofollow noreferrer\">Data::Pivot</a>::pivot(). Like this:</p>\n\n<pre><code>use Acme::Tools;\nmy $data={\n    'Dirt' =&gt; {\n        'Sample1.16' =&gt; 4,\n        'Sample1.14' =&gt; 1\n    },\n    'Air' =&gt; {\n        'Sample1.16' =&gt; 1,\n        'Sample2.45' =&gt; 4\n    },\n    'Water' =&gt; {\n        'Sample1.14' =&gt; 3\n    }\n};\nmy @sample=uniq(sort map keys(%$_), values %$data);\nmy @element=sort keys %$data;\nmy $data2=[ map { my $x=$_; map [$x,$_,$$data{$x}{$_}||' 0'], @sample } @element ];\nprint tablestring([Acme::Tools::pivot($data2,\"Element\")]);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Element Sample1.14 Sample1.16 Sample2.45\n------- ---------- ---------- ---------- \nAir              0          1          4\nDirt             1          4          0\nWater            3          0          0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "is_accepted": true, "score": 1, "last_activity_date": 1492101731, "creation_date": 1492101731, "answer_id": 43397613, "question_id": 43255121, "link": "https://stackoverflow.com/questions/43255121/create-matrix-from-redundant-list/43397613#43397613", "title": "Create Matrix from redundant list", "body": "<p>The easiest way to create a unique list in Perl is to use the elements as hash keys with dummy values. After filling the hash you can get the unique list of values with <code>keys</code>.</p>\n\n<pre><code>my %samples;\n$samples{\"some value\"} = 1;\n$samples{\"some other value\"} = 1;\n$samples{\"some value\"} = 1;\nmy @samples = sort keys %samples;\n</code></pre>\n\n<p>If you want to make Perl behaving like <code>awk</code>, you can use the split function with a single space argument.  And if you want to assign the result of a split to two variables you can use Perl's list notation.</p>\n\n<pre><code>my ($a, $b) = split ' ';\n</code></pre>\n\n<p>The complicated part is to build the table. This can be done with <code>for</code> loops or by <code>map</code>.  The use of <code>for</code> loops might be easier to read, but <code>map</code>s allow a more compact notation.</p>\n\n<p>The following creates an array reference (square brackets) and fills the array with the return list of the <code>map</code> expression, prefixed by the <code>$t</code> value.  The <code>map</code> expression takes a pice of code and a list and executes the code for each element of the list.  The value of the current list element is available in the variable <code>$_</code>.</p>\n\n<pre><code>[ $t, map { $sampleHash{$t}{$_} or '0' } @samples ]\n</code></pre>\n\n<p>If you nest <code>map</code> expressions, you have to give the outer <code>$_</code> a name to  access it from the inner <code>map</code>, because the inner <code>$_</code> shadows the outer.</p>\n\n<p>A basic way to format tables in Perl is to use Perl's report feature <a href=\"http://perldoc.perl.org/perlform.html\" rel=\"nofollow noreferrer\">perlform</a>. For that you have to define a list of alternating lines: first a pattern line and then a value line.</p>\n\n<p>If you put all together your example becomes this</p>\n\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\n\nmy %sampleHash;\nmy %samples;\nmy %types;\n\nwhile (&lt;DATA&gt;)\n{\n  chomp;\n  my ($sample, $type) = split ' ';\n  $sampleHash{$type}{$sample} += 1;\n  $samples{$sample} = 1;\n  $types{$type} = 1;\n}\n\nmy @samples = sort keys %samples;\nmy @types = sort keys %types;\n\nmy @table =\n    (['', @samples],\n     map { my $t=$_; [ $t, map { $sampleHash{$t}{$_} or '0' } @samples ] } @types );\n\nmy $row;\nformat =\n@&lt;&lt;&lt;&lt;&lt;&lt;  @||||||||||  @||||||||||  @||||||||||\n@$row\n.\nfor $row (@table) { write; }\n\n__DATA__\nSample1.14  Water\nSample2.45  Air\nSample1.16  Dirt\nSample1.14  Water\nSample2.45  Air\nSample1.16  Dirt\nSample1.14  Water\nSample2.45  Air\nSample1.16  Dirt\nSample1.16  Dirt\nSample1.14  Dirt\nSample2.45  Air\nSample1.16  Air\n</code></pre>\n\n<p>which outputs this</p>\n\n<pre>\n         Sample1.14   Sample1.16   Sample2.45\nAir           0            1            4\nDirt          1            4            0\nWater         3            0            0\n</pre>\n\n<p><em>Note:</em> Your desired output does not match your input.</p>\n\n<p>In order to read a file you have to keep your code using <code>open</code>.  I have used the <code>__DATA__</code> section only to simplify the example in order to get a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>.</p>\n"}], "owner": {"reputation": 85, "user_id": 7629187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1393dec1c0b0bf744208e11f78d82ff6?s=128&d=identicon&r=PG&f=1", "display_name": "chrys", "link": "https://stackoverflow.com/users/7629187/chrys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 43397613, "answer_count": 2, "score": 1, "last_activity_date": 1492163704, "creation_date": 1491481372, "last_edit_date": 1491481674, "question_id": 43255121, "link": "https://stackoverflow.com/questions/43255121/create-matrix-from-redundant-list", "title": "Create Matrix from redundant list", "body": "<p>I have an Input with a redundant list which looks like this:</p>\n\n<pre><code>Sample1.14  Water\nSample2.45  Air\nSample1.16  Dirt\nSample1.14  Water\nSample2.45  Air\nSample1.16  Dirt\nSample1.14  Water\nSample2.45  Air\nSample1.16  Dirt\nSample1.16  Dirt\nSample1.14  Dirt\nSample2.45  Air\nSample1.16  Air\n</code></pre>\n\n<p>I created a hash which counts how often each sample gives the result Water,Air,Dirt (note this is just example data but the structure is identical).</p>\n\n<pre><code>    use warnings;\n    use strict;\n    my $inPut = \"ExampleSample\";\n    open(READ,$inPut) || die \"Coult not read $inPut: $!\";\n\n    my %sampleHash;\n\n    while (&lt;READ&gt;) {\n\n        chomp;\n        my @temp = split(\"\\t\",$_);\n\n        my $sample = $temp[0];\n\n        my $type = $temp[1];\n\n        $sampleHash{$type}{$sample} += 1;\n\n    }\n</code></pre>\n\n<p>This works as intended and gives as output:</p>\n\n<pre><code>$VAR1 = {\n          'Dirt' =&gt; {\n                      'Sample1.16' =&gt; 4,\n                      'Sample1.14' =&gt; 1\n                    },\n          'Air' =&gt; {\n                     'Sample1.16' =&gt; 1,\n                     'Sample2.45' =&gt; 4\n                   },\n          'Water' =&gt; {\n                       'Sample1.14' =&gt; 3\n                     }\n        };\n</code></pre>\n\n<p>Since this is quiet a bad data structure for further downstream stuff I would like to put this data into a matrix which I am somewhat lost at.</p>\n\n<p>Desired Output or the transposed of this example, does not really matter:</p>\n\n<pre><code>    Sample1.14  Sample2.45  Sample1.16\nAir     0           4           1\nDirt    4           0           4\nWater   3           0           0\n</code></pre>\n\n<p>I am really stuck here, any help would be very much appreciated! Thanks.</p>\n"}, {"tags": ["perl", "rest", "teamcity"], "answers": [{"comments": [{"owner": {"reputation": 142, "user_id": 6426359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a76843c6103644e078ab860ba9fb16a?s=128&d=identicon&r=PG&f=1", "display_name": "Amarula", "link": "https://stackoverflow.com/users/6426359/amarula"}, "edited": false, "score": 0, "creation_date": 1491562135, "post_id": 43270604, "comment_id": 73620157, "body": "that&#39;s all great, but I do not know the build ID you mentioned in the link (id:75105), all I have is build type Id(which is string value) and that I need only last successfull build. How do I manage to get artifacts in this case?  I&#39;ve tried using &#39;buildTypeId=mybtt&#39;, but it is prohibited: Invalid single value: &#39;buildTypeId=mybtt&#39;. Should be a number."}, {"owner": {"reputation": 94, "user_id": 5820698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab29ae059d551e5a64759b7c591c7ad?s=128&d=identicon&r=PG", "display_name": "JGooLaaR", "link": "https://stackoverflow.com/users/5820698/jgoolaar"}, "reply_to_user": {"reputation": 142, "user_id": 6426359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a76843c6103644e078ab860ba9fb16a?s=128&d=identicon&r=PG&f=1", "display_name": "Amarula", "link": "https://stackoverflow.com/users/6426359/amarula"}, "edited": false, "score": 0, "creation_date": 1502776342, "post_id": 43270604, "comment_id": 78331850, "body": "@Amarula You can do like this:   <code>$APIURL = &quot;${API_BaseUrl}&#47;httpAuth&#47;app&#47;rest&#47;builds&#47;?locator=buildType:&zwnj;&#8203;${API_BuildType},sta&zwnj;&#8203;te:finished,count:1&quot;</code>   Easy way to get top 1 successful build. Then, you obtain the &quot;ID&quot;"}], "tags": [], "owner": {"reputation": 94, "user_id": 5820698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab29ae059d551e5a64759b7c591c7ad?s=128&d=identicon&r=PG", "display_name": "JGooLaaR", "link": "https://stackoverflow.com/users/5820698/jgoolaar"}, "is_accepted": false, "score": 4, "last_activity_date": 1491544294, "creation_date": 1491544294, "answer_id": 43270604, "question_id": 43254750, "link": "https://stackoverflow.com/questions/43254750/get-the-list-of-artifacts-from-teamcity-build-and-download-only-exact-one/43270604#43270604", "title": "Get the list of artifacts from teamcity build and download only exact one", "body": "<p>TeamCity have api. Use it.\nList of artifacts:</p>\n\n<pre><code>http://teamcity:8008/httpAuth/app/rest/builds/id:75105/artifacts\n</code></pre>\n\n<p>In my case i have several folders in artifact directory, choosing one, getting list of files inside:</p>\n\n<pre><code>http://teamcity:8008/httpAuth/app/rest/builds/id:75105/artifacts/children/Scripts\n</code></pre>\n\n<p>It looks like:</p>\n\n<pre><code>&lt;files count=\"1\"&gt;\n&lt;file name=\"000-201704070732-000000-00000-0160609.07.Build-0088.01.Schema.sql\" size=\"88340\" modificationTime=\"20170407T074931+0300\" href=\"/httpAuth/app/rest/builds/id:75105/artifacts/metadata/Scripts/000-201704070732-000000-00000-0160609.07.Build-0088.01.Schema.sql\"&gt;\n&lt;content href=\"/httpAuth/app/rest/builds/id:75105/artifacts/content/Scripts/000-201704070732-000000-00000-0160609.07.Build-0088.01.Schema.sql\"/&gt;\n&lt;/file&gt;\n&lt;/files&gt;\n</code></pre>\n\n<p>Then just make GET of:</p>\n\n<pre><code>http://teamcity:8008/httpAuth/app/rest/builds/id:75105/artifacts/content/Scripts/000-201704070732-000000-00000-0160609.07.Build-0088.01.Schema.sql\n</code></pre>\n\n<p>And you will took file you need only, Thats all. :)</p>\n"}, {"tags": [], "owner": {"reputation": 142, "user_id": 6426359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a76843c6103644e078ab860ba9fb16a?s=128&d=identicon&r=PG&f=1", "display_name": "Amarula", "link": "https://stackoverflow.com/users/6426359/amarula"}, "is_accepted": true, "score": -1, "last_activity_date": 1491564728, "creation_date": 1491564728, "answer_id": 43277062, "question_id": 43254750, "link": "https://stackoverflow.com/questions/43254750/get-the-list-of-artifacts-from-teamcity-build-and-download-only-exact-one/43277062#43277062", "title": "Get the list of artifacts from teamcity build and download only exact one", "body": "<p>I think I've found solution.\nHere is the list of possible locators:</p>\n\n<pre><code>Supported dimensions are: [id, taskId, project, affectedProject, buildType, branch, \nagent, user, personal,  state, tag, property, compatibleAgent, number, status, canceled, \npinned, queuedDate, startDate, finishDate, sinceBuild, sinceDate, untilBuild,   untilDate, \nfailedToStart, snapshotDependency, \nartifactDependency, hanging, history, defaultFilter, $singleValue, start, lookupLimit]\n</code></pre>\n\n<p>specifying url using couple of them can provide one the arifacts list i.e. :\n<a href=\"http://teamcity/app/rest/builds/buildType:xxxx,state:finished/artifacts/\" rel=\"nofollow noreferrer\">http://teamcity/app/rest/builds/buildType:xxxx,state:finished/artifacts/</a></p>\n"}], "owner": {"reputation": 142, "user_id": 6426359, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6a76843c6103644e078ab860ba9fb16a?s=128&d=identicon&r=PG&f=1", "display_name": "Amarula", "link": "https://stackoverflow.com/users/6426359/amarula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1211, "favorite_count": 0, "accepted_answer_id": 43277062, "answer_count": 2, "score": 2, "last_activity_date": 1491579898, "creation_date": 1491480314, "last_edit_date": 1491579898, "question_id": 43254750, "link": "https://stackoverflow.com/questions/43254750/get-the-list-of-artifacts-from-teamcity-build-and-download-only-exact-one", "title": "Get the list of artifacts from teamcity build and download only exact one", "body": "<p>I am struggling to download only one artifact from <code>lastsuccessful</code> teamcity build.</p>\n\n<p>Ofc, I can download all artifacts and then find one on my storage using\n<a href=\"http://teamcity/repository/downloadAll/buildTypeId/.lastSuccessful/\" rel=\"nofollow noreferrer\">http://teamcity/repository/downloadAll/buildTypeId/.lastSuccessful/</a>\nbut it is a huge waste of time and traffic. </p>\n\n<p>How can I get the list of artifacts in the <code>lastSuccessful</code> build?\nIf I could get the list, then I would be able to form download request and get only the artifact I need.</p>\n\n<p>i.e. my build has:</p>\n\n<ul>\n<li>SetupSoft..buildId.zip</li>\n<li>Libs..buildId.zip</li>\n<li>Binaries..buildId.zip</li>\n</ul>\n\n<p>Suppose I need only Binaries.zip from that build, so if I am to find the list of artifacts, I would choose Binaries using regex(or whatever) and then create download link like so:</p>\n\n<p><a href=\"http://teamcity/repository/download/#buildTypeId#/#buildId#/binaries\" rel=\"nofollow noreferrer\">http://teamcity/repository/download/#buildTypeId#/#buildId#/binaries</a>&lt;..>.zip</p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 3, "creation_date": 1491480321, "post_id": 43254603, "comment_id": 73577944, "body": "<code>perl -ne &#39;print if (&#47;xx&#47; .. 0)&gt;1&#39; my.txt</code> =&gt; <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Range-Operators</a>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1491480329, "post_id": 43254603, "comment_id": 73577952, "body": "Try this: <code>perl -ne &#39;if(&#47;xx&#47;){$n=1;next};print if $n&#39; my.txt</code>"}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1491482319, "post_id": 43254603, "comment_id": 73579476, "body": "Hi, @\u0421\u0443\u0445\u043e\u043927 Thank you so much. I read the doc. But I still don&#39;t understand why <code>.. </code> expression can be compared to a number? Because the doc says <code>..</code> is boolean"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1491483738, "post_id": 43254603, "comment_id": 73580580, "body": "Yes, you can use it like boolean, but actually it is a sequence of numbers. (<code>The value returned is either the empty string for false, or a sequence number (beginning with 1) for true.</code>)"}, {"owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1491486286, "post_id": 43254603, "comment_id": 73582616, "body": "@\u0421\u0443\u0445\u043e\u043927 Thank you so much"}], "answers": [{"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1492084675, "creation_date": 1492084675, "answer_id": 43391711, "question_id": 43254603, "link": "https://stackoverflow.com/questions/43254603/perl-how-to-print-after-a-specific-line/43391711#43391711", "title": "perl : how to print after a specific line", "body": "<p>Before $n is defined it is interpreted as 0 (zero), meaning that $. > 1 will also be printed before xx. This might be what you wanted:</p>\n\n<pre><code>perl -nle 'if(/xx/){$n=$.}; print if defined($n) and $. &gt; $n+1' my.txt\n</code></pre>\n"}], "owner": {"reputation": 2061, "user_id": 1911722, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5728af95179355c1f422a77e54929928?s=128&d=identicon&r=PG", "display_name": "user15964", "link": "https://stackoverflow.com/users/1911722/user15964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1492084675, "creation_date": 1491479994, "question_id": 43254603, "link": "https://stackoverflow.com/questions/43254603/perl-how-to-print-after-a-specific-line", "title": "perl : how to print after a specific line", "body": "<p>For example, <code>my.txt</code> containts</p>\n\n<pre><code>a\nb\nxx\nc\nd\n</code></pre>\n\n<p>I want print from the second line below lines that contains xx</p>\n\n<p>I tried</p>\n\n<pre><code>perl -nle 'if(/xx/){$n=$.};print if $.&gt;($n+1)' my.txt\n</code></pre>\n\n<p>But it didn't work. It just print all lines.</p>\n"}, {"tags": ["perl", "perl-module", "perl-data-structures", "expect.pm"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 2, "creation_date": 1491479358, "post_id": 43254207, "comment_id": 73577181, "body": "Rewrite script 1 so that it takes a parameter rather than being interactive."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1491481151, "post_id": 43254207, "comment_id": 73578604, "body": "Please <a href=\"https://stackoverflow.com/posts/43254207/edit\">edit</a> your question to show <a href=\"http://whathaveyoutried.com\" rel=\"nofollow noreferrer\">what you have tried so far</a>.  You should include at least an outline (but preferably a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>) of the code that you are having problems with, then we can try to help with the specific problem. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1491483500, "post_id": 43254207, "comment_id": 73580419, "body": "Unless it does something funky, just piping might work: <code>script2.pl | scrpit1.pl</code>."}], "answers": [{"tags": [], "owner": {"reputation": 516, "user_id": 2224218, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f7db38a8b0010381be6cde932b0f8b7b?s=128&d=identicon&r=PG", "display_name": "Subhash", "link": "https://stackoverflow.com/users/2224218/subhash"}, "is_accepted": false, "score": 0, "last_activity_date": 1495093363, "creation_date": 1495093363, "answer_id": 44041561, "question_id": 43254207, "link": "https://stackoverflow.com/questions/43254207/passing-parameteres-to-interactive-script-programatically/44041561#44041561", "title": "Passing Parameteres to Interactive script programatically", "body": "<p>Try this,</p>\n\n<pre><code>#script2.pl\n\nuse strict;\nuse warnings;\n\nuse Getopt::Long;\n\nGetOptions (\n\"ipAddress=s\" =&gt; \\$ip,\n) or die(\"Enter IP address\");\n\nmy $cmd = \"perl script1.pl --ip=$ip\";\nsystem($cmd);\n</code></pre>\n\n<p>.</p>\n\n<pre><code>#script1.pl\n\nuse strict;\nuse warnings;\n\nuse Getopt::Long;\nGetOptions (\n\"ip=s\" =&gt; \\$ip,\n) or die(\"Enter IP address\");\n\nprint \"IP address is $ip\";\n</code></pre>\n\n<p>Execute like this.</p>\n\n<pre><code>perl script2.pl --ipAddress=10.11.12.13\n</code></pre>\n\n<p>If you want to execute script1 directly,  can execute like this,</p>\n\n<pre><code>perl script1.pl --ip=10.11.12.13\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7418843, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-HpPLoQdMr44/AAAAAAAAAAI/AAAAAAAAARo/Jqdc3VVsWe4/photo.jpg?sz=128", "display_name": "Nagasai", "link": "https://stackoverflow.com/users/7418843/nagasai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504624182, "creation_date": 1491478934, "last_edit_date": 1504624182, "question_id": 43254207, "link": "https://stackoverflow.com/questions/43254207/passing-parameteres-to-interactive-script-programatically", "title": "Passing Parameteres to Interactive script programatically", "body": "<p>We have an interactive script(Script 1)  which asks for an IP Address and continues it's execution process. Script 1 is called from script2. \n As we know the IP address we want to pass IP Automatically to script so that manual intervention is not required </p>\n\n<p>I looked into Expect Module. But i cannot install that module in PRODUCTION server.</p>\n\n<p>Can someone suggest a way to overcome this issue.</p>\n"}, {"tags": ["perl", "oop", "pass-by-reference"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1491499745, "post_id": 43249377, "comment_id": 73592606, "body": "Nit: <code>$p-&gt;a_method($value)</code> doesn&#39;t necessarily call a sub in the current package as that quote implies. <code>$p-&gt;a_method($value)</code> is closer to <code>my $sub = $p-&gt;can(&#39;a_method&#39;)-&gt;($p, $value);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1491500319, "post_id": 43249377, "comment_id": 73592911, "body": "<code>$p</code> is a reference (a pointer on which you can&#39;t do arithmetic), and the reference is passed by reference (because all arguments are passed by reference in Perl). Both of those (independently) make the size of the object irrelevant for a method call, and the former makes the size of the object irrelevant for <code>my $self = shift;</code> too."}], "answers": [{"comments": [{"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1491466579, "post_id": 43249485, "comment_id": 73568009, "body": "Thanks, I could not find anything about this. The example from PerlMaven also confused me even more, because how it&#39;s re-written it seems that it&#39;s passed by value."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491476190, "post_id": 43249485, "comment_id": 73574942, "body": "Well, it is - but only because the &quot;reference&quot; is a value. Bit like a pointer. (Not entirely though)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1491500249, "post_id": 43249485, "comment_id": 73592873, "body": "@Bram Vanroy, Re &quot;<i>it seems that it&#39;s passed by value</i>&quot;, All arguments are passed by reference in Perl, though we usually proceed to make a copy of them (<code>my ($arg) = @_;</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1491500525, "post_id": 43249485, "comment_id": 73593029, "body": "@choroba, Obviously a substantial edit. Feel free to revert."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 9, "last_activity_date": 1598211229, "last_edit_date": 1598211229, "creation_date": 1491466486, "answer_id": 43249485, "question_id": 43249377, "link": "https://stackoverflow.com/questions/43249377/perl-method-and-pass-by-reference/43249485#43249485", "title": "Perl method and pass by reference", "body": "<p><code>$p</code> already contains a reference to the object. Method calls require a reference to the object, and it's this reference that's passed to the sub. So, $self is always a reference. See <a href=\"http://p3rl.org/perlobj\" rel=\"nofollow noreferrer\">perlobj</a> and <a href=\"http://p3rl.org/bless\" rel=\"nofollow noreferrer\">bless</a>.</p>\n<pre><code>#! /usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\n\n{   package Class;\n\n    sub new { bless {}, __PACKAGE__ }\n    sub inf { ref shift }\n}\n\nmy $o = 'Class'-&gt;new;\nsay $o-&gt;inf ? 'reference' : 'not a reference';\n</code></pre>\n<p>Output:</p>\n<pre><code>reference\n</code></pre>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 43249485, "answer_count": 1, "score": 0, "last_activity_date": 1598211229, "creation_date": 1491466165, "question_id": 43249377, "link": "https://stackoverflow.com/questions/43249377/perl-method-and-pass-by-reference", "title": "Perl method and pass by reference", "body": "<p>For me, Perl references are a hard thing to grasp. When reading to some OO-like scripts that use object methods, I never saw the object used as a reference. Even for big objects, that would benefit from being used as a reference instead of being copied to a subroutine (method).</p>\n\n<p><a href=\"https://perlmaven.com/methods-functions-and-subroutines-in-perl\" rel=\"nofollow noreferrer\">PerlMaven</a> says that:</p>\n\n<blockquote>\n<pre><code>$p-&gt;a_method($value);\n</code></pre>\n  \n  <p>Behind the scenes, perl will run</p>\n\n<pre><code>a_method($p, $value);\n</code></pre>\n</blockquote>\n\n<p>But if <code>$p</code> is  huge object, wouldn't you want to pass it as a reference?</p>\n\n<pre><code>a_method(\\$p, $value)\n</code></pre>\n\n<p>I have always understood that passing by reference can lead to a significant speed increase if the object is large. In OO, it is quite likely that you are working with large objects (e.g. a huge <code>XML::Twig</code>). So how would you call a method on such an object, when actually passing it as a reference to the subroutine?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1491476237, "post_id": 43247002, "comment_id": 73574982, "body": "... especially if you need to parse the output of <code>ls</code>, which is not consistently structured."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 1, "last_activity_date": 1491458918, "creation_date": 1491458918, "answer_id": 43247002, "question_id": 43246940, "link": "https://stackoverflow.com/questions/43246940/performance-and-memory-wise-difference-between-chdir-and-cd/43247002#43247002", "title": "Performance and memory wise difference between chdir and cd", "body": "<p>Shell command <code>cd</code> would execute in a subshell and its effects would disappear when the subshell returned.  </p>\n\n<p>As to <code>ls</code>, running within the current process would be much more efficient than launching a new shell process just to execute <code>ls</code>.</p>\n"}], "owner": {"reputation": 532, "user_id": 6623469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ebc0962a7ca106f4294fe9cd3ba0c3?s=128&d=identicon&r=PG&f=1", "display_name": "krish___na", "link": "https://stackoverflow.com/users/6623469/krish-na"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1491458918, "creation_date": 1491458716, "question_id": 43246940, "link": "https://stackoverflow.com/questions/43246940/performance-and-memory-wise-difference-between-chdir-and-cd", "title": "Performance and memory wise difference between chdir and cd", "body": "<p>I wanted to know whether using chdir, opendir,readdir commands of perl should be used or shell commands such as cd and ls. Same functionality can be achieved in both cases, but in terms of memory and performance efficiency, which one is better to use? </p>\n"}, {"tags": ["json", "perl", "https", "lwp"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 610615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857dfc4e30ba3df73bc68d6ef1eb536b?s=128&d=identicon&r=PG", "display_name": "Sean Smith", "link": "https://stackoverflow.com/users/610615/sean-smith"}, "edited": false, "score": 0, "creation_date": 1491578475, "post_id": 43246014, "comment_id": 73631587, "body": "That helps a lot with processing the JSON still can&#39;t get my head around feeding the incoming data to JSON::SL."}], "tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": true, "score": 1, "last_activity_date": 1491478261, "last_edit_date": 1495541857, "creation_date": 1491454622, "answer_id": 43246014, "question_id": 43245652, "link": "https://stackoverflow.com/questions/43245652/how-to-read-a-https-json-stream-with-perl/43246014#43246014", "title": "How to read a https JSON stream with perl?", "body": "<p><a href=\"https://metacpan.org/pod/JSON::SL\" rel=\"nofollow noreferrer\">JSON::SL</a> can help you. </p>\n\n<p>Also see <a href=\"https://stackoverflow.com/a/12462153/257635\">Chas. Owens' answer</a> where he compares <a href=\"https://metacpan.org/pod/JSON::SL\" rel=\"nofollow noreferrer\">JSON::SL</a> and <a href=\"https://metacpan.org/pod/JSON::Streaming::Reader\" rel=\"nofollow noreferrer\">JSON::Streaming::Reader</a>. </p>\n"}], "owner": {"reputation": 83, "user_id": 610615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857dfc4e30ba3df73bc68d6ef1eb536b?s=128&d=identicon&r=PG", "display_name": "Sean Smith", "link": "https://stackoverflow.com/users/610615/sean-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 43246014, "answer_count": 1, "score": 3, "last_activity_date": 1491478261, "creation_date": 1491452471, "question_id": 43245652, "link": "https://stackoverflow.com/questions/43245652/how-to-read-a-https-json-stream-with-perl", "title": "How to read a https JSON stream with perl?", "body": "<p>Ok I'll try and be as detailed as possible.</p>\n\n<p>I need to connect to a https url that streams JSON data, and search for keywords via REGEX as the data streams then take the matching JSON element decode it and insert it into a database.</p>\n\n<p>The REGEX on is not the problem that's relatively simple.</p>\n\n<p>What I'm struggling with is reading the data line wise. I've tried a few examples I found online the use LWP but where the stream never stops loading the script hangs.</p>\n\n<p>Here's the closest I've gotten </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::Simple;\nuse IO::String;\n\nmy $handle = IO::String-&gt;new(get(\"https://stackoverflow.com\"));\nwhile (defined (my $line = &lt;$handle&gt;)) {\n  print $line; #Inserted for testing\n\n  #Decode and insert into DB here       \n}\nclose $handle;\n</code></pre>\n\n<p>The data comes in a fairly fast rate so the script has to be efficient. </p>\n\n<p>Any pointers as to how to get this done would be great.</p>\n\n<p>Thanks\nSean</p>\n"}]