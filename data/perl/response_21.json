[{"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433369305, "post_id": 30631458, "comment_id": 49328815, "body": "<code>FindBin</code> always resolves symlinks. Why do you want to use the link name?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433369694, "post_id": 30631458, "comment_id": 49328983, "body": "Also, <code>$FindBin::Bin</code> is always an absolute path, so passing it to <code>rel2abs</code> or <code>abs_path</code> is redundant."}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433369799, "post_id": 30631458, "comment_id": 49329022, "body": "it&#39;s complex to explain :(, my script has to pass-in the path without resolving the symlink to other script"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1433369985, "post_id": 30631458, "comment_id": 49329099, "body": "It can&#39;t be done with <code>FindBin</code>, unless you modify <a href=\"https://metacpan.org/source/RJBS/perl-5.22.0/lib/FindBin.pm\" rel=\"nofollow noreferrer\">the source</a>. This seems like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>; you&#39;ll probably get better answers if you explain exactly why you need to do this."}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433381285, "post_id": 30631458, "comment_id": 49332486, "body": "if we replace first dir name of the unix path with filer name and change / to \\, then we will get windows path, symlink should not be accounted for the same. I can use something equivalent instead of findbin if needed. thanks."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1433408024, "post_id": 30631458, "comment_id": 49342900, "body": "Do you need <code>$FindBin::Bin</code> or <code>$ENV{PWD}</code>?"}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 0, "creation_date": 1433422501, "post_id": 30631458, "comment_id": 49352738, "body": "Thanks, no, $ENV{PWD} will not help, as I need the location of the script even if I execute it from different location."}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433424020, "post_id": 30631458, "comment_id": 49353801, "body": "@ThisSuitIsBlackNot, Thanks for the help, I updated the title and content, hope I explained the problem in a better way now."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433427785, "post_id": 30631458, "comment_id": 49356617, "body": "@Krish I don&#39;t understand your comment about converting from a Unix to a Windows path. Do you mean something like <code>&#47;c&#47;cygwin&#47;foo</code> -&gt; <code>c:\\cygwin\\foo</code>? Please give an example. Also, what do you want to do if there are multiple symlinks pointing to your script? Which one do you want to use? Finally, I&#39;m still not clear <i>why</i> you need to do this. Can you try to explain in more detail? It might be best to <a href=\"https://stackoverflow.com/posts/30631458/edit\">edit</a> these details into your question instead of responding via comments."}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 0, "creation_date": 1433432986, "post_id": 30631458, "comment_id": 49360537, "body": "done editing, there will be only one symlink&#39;ed dir in the path to my script. thanks."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433438265, "post_id": 30631458, "comment_id": 49363683, "body": "@Krish Thanks for the edit, your question is much clearer now. One more question: why can&#39;t you use the resolved path? Is it because the symlink is in your samba share, but the resolved path is not?"}, {"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 1, "creation_date": 1433445894, "post_id": 30631458, "comment_id": 49368027, "body": "Thanks for looking at this again, in the example shown above, only <code>\\\\linux-machine-name\\one\\two\\3\\symlink_to_four</code> is available from windows side, <code>\\\\linux-machine-name\\one\\two\\3\\four</code> is not, because that&#39;s how samba is configured."}], "answers": [{"comments": [{"owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "edited": false, "score": 0, "creation_date": 1433507678, "post_id": 30657003, "comment_id": 49395214, "body": "Thanks, it will be easy if I can achieve this without installing Path::Tiny or any other new perl module."}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": true, "score": 1, "last_activity_date": 1433468378, "creation_date": 1433468378, "answer_id": 30657003, "question_id": 30631458, "link": "https://stackoverflow.com/questions/30631458/print-the-perl-scripts-path-without-resolving-symlink/30657003#30657003", "title": "Print the perl script&#39;s path without resolving symlink", "body": "<p>If I correctly understand what you're trying to achieve, you can do it with <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow\">Path::Tiny</a>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse Path::Tiny;\n\n\nmy $path =  path(__FILE__);\n\nprint $path-&gt;absolute-&gt;parent, \"\\n\";\n</code></pre>\n\n<p>Path::Tiny's <code>realpath</code> method would resolve symlinks, but the <code>absolute</code> method does not.</p>\n\n<p><code>__FILE__</code> is a special token that resolves to the name of the Perl source file it's contained in (either your main script or a module it loads).  You could also use <code>$0</code> which is the name of the script being executed.  Either of these could be absolute or relative depending on whether the script was invoked with a relative or an absolute path.</p>\n\n<p>If your scripts are always invoked with an absolute path then you could just use <code>$0</code> and not bother with an extra module.</p>\n"}, {"tags": [], "owner": {"reputation": 983, "user_id": 3419535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65fc0329501359ea67262fd819afaf03?s=128&d=identicon&r=PG&f=1", "display_name": "FantomX1", "link": "https://stackoverflow.com/users/3419535/fantomx1"}, "is_accepted": false, "score": 0, "last_activity_date": 1614247998, "creation_date": 1614247998, "answer_id": 66366538, "question_id": 30631458, "link": "https://stackoverflow.com/questions/30631458/print-the-perl-scripts-path-without-resolving-symlink/66366538#66366538", "title": "Print the perl script&#39;s path without resolving symlink", "body": "<p>Use Cwd::abs_path to get an absolute path.\nCwd is a core-module so you don't need to install anything extra.</p>\n<pre><code>use Cwd qw(abs_path);\nmy $absolute_path = abs_path (readlink $link);\n</code></pre>\n<p><a href=\"https://www.perlmonks.org/?node_id=977420\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=977420</a></p>\n"}], "owner": {"reputation": 2315, "user_id": 2748513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a57ccf0bf2588656bdef02373a0aaa71?s=128&d=identicon&r=PG&f=1", "display_name": "rodee", "link": "https://stackoverflow.com/users/2748513/rodee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 1, "accepted_answer_id": 30657003, "answer_count": 2, "score": 0, "last_activity_date": 1614247998, "creation_date": 1433368426, "last_edit_date": 1433446139, "question_id": 30631458, "link": "https://stackoverflow.com/questions/30631458/print-the-perl-scripts-path-without-resolving-symlink", "title": "Print the perl script&#39;s path without resolving symlink", "body": "<p>How do I print the script's directory path <strong>without</strong> resolving the symlink?</p>\n\n<p>EDIT: I realized from below comment that it is not possible using FindBin, but is there a way around to get the script's directory ?</p>\n\n<pre><code>use FindBin;\nuse Cwd;\nuse Cwd 'abs_path';\nuse File::Spec::Functions qw( rel2abs );\nBEGIN\n{\n   push @INC, \"$FindBin::Bin\";\n}\nprint \"rel2abs:\";\nprint rel2abs(\"$FindBin::Bin\");\nprint \"\\n\";\n\nprint \"abs_path:\";\nprint abs_path(\"$FindBin::Bin\");\nprint \"\\n\";\n</code></pre>\n\n<p>This script prints:</p>\n\n<pre><code>/tmp/one/two$ perl 3/symlink_to_four/test.pl \nrel2abs:/tmp/one/two/3/four\nabs_path:/tmp/one/two/3/four\n</code></pre>\n\n<p>I want it to print <em>/tmp/one/two/3/symlink_to_four</em></p>\n\n<pre><code> /tmp/one/two/3$ ls -l\n four\n symlink_to_four -&gt; four\n</code></pre>\n\n<p>Why I need this: samba is configured in the Linux box where my Perl script is going to run, if I replace first portion of the Linux path with <code>\\\\linux-machine-name</code>\n and rest of <code>/</code> with <code>\\</code>, I get windows path, which I will save it in a file and will get consumed by other script, for instance, in the above example, I am trying to convert <code>/tmp/one/two/3/symlink_to_four</code> to <code>\\\\linux-machine-name\\one\\two\\3\\symlink_to_four</code>, I know how to figure-out the <code>linux-machine-name</code>, I don't want the resolved path, because I cannot figure out the windows equivalent path with resolved path, only <code>\\\\linux-machine-name\\one\\two\\3\\symlink_to_four</code> is valid, not <code>\\\\linux-machine-name\\one\\two\\3\\four</code>, it's how samba is configured.</p>\n"}, {"tags": ["perl", "matrix", "determinants"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 3909489, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/368392c8cd5a495158377e5311d655a5?s=128&d=identicon&r=PG&f=1", "display_name": "Kolibrie", "link": "https://stackoverflow.com/users/3909489/kolibrie"}, "edited": false, "score": 0, "creation_date": 1433368755, "post_id": 30631465, "comment_id": 49328562, "body": "I thought it could be a good exercise to figure out how to (1) solve for a matrix&#39;s characteristic polynomial and (2) solve for the roots (eigenvalues) without using a library, but I guess it&#39;ll be much harder than I thought.  I think I&#39;ll start using some libraries soon.  Thanks!"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1433368476, "creation_date": 1433368476, "answer_id": 30631465, "question_id": 30630819, "link": "https://stackoverflow.com/questions/30630819/perl-determinant-of-matrix-containing-variables/30631465#30631465", "title": "Perl - Determinant of Matrix Containing Variables", "body": "<p>This is called symbolic math and is in the wheelhouse of <a href=\"http://en.wikipedia.org/wiki/List_of_computer_algebra_systems\" rel=\"nofollow\">tools like Mathematica</a>. For Perl, there are packages like <a href=\"http://metacpan.org/pod/Math::Symbolic\" rel=\"nofollow\"><code>Math::Synbolic</code></a> but I couldn't tell you how easy they are to use.</p>\n\n<p>On the other hand, if you are just interested in what values of <em>R</em> have a determinant of zero and not that interested in what the characteristic polynomial looks like, then you are looking for the <a href=\"http://mathworld.wolfram.com/Eigenvalue.html\" rel=\"nofollow\"><em>eigenvalues</em></a> of <em>A</em>. <a href=\"https://metacpan.org/pod/Math::MatrixDecomposition::Eigen\" rel=\"nofollow\">There are some Perl libraries for that</a>, too.</p>\n"}], "owner": {"reputation": 139, "user_id": 3909489, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/368392c8cd5a495158377e5311d655a5?s=128&d=identicon&r=PG&f=1", "display_name": "Kolibrie", "link": "https://stackoverflow.com/users/3909489/kolibrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 30631465, "answer_count": 1, "score": 0, "last_activity_date": 1433368935, "creation_date": 1433365873, "last_edit_date": 1433368935, "question_id": 30630819, "link": "https://stackoverflow.com/questions/30630819/perl-determinant-of-matrix-containing-variables", "title": "Perl - Determinant of Matrix Containing Variables", "body": "<p>I have a Perl program containing the following methods:</p>\n\n<ul>\n<li><strong>det</strong> To find the determinant of a matrix.</li>\n<li><strong>identityMatrix</strong> Return an n by n identity matrix (1s on the main diagnal, rest 0s).</li>\n<li><strong>matrixAdd</strong> To add two matrices together.</li>\n<li><strong>matrixScalarMultiply</strong> To multiply an integer by a matrix.</li>\n</ul>\n\n<p>I can easily find the determinant of, for example, a matrix <strong>A - I</strong> where</p>\n\n<p><img src=\"https://i.stack.imgur.com/Xg02X.png\" alt=\"enter image description here\"></p>\n\n<p>(It is 0)</p>\n\n<p>But what if I want to find the determinant of <strong>A - RI</strong>?</p>\n\n<p><img src=\"https://i.stack.imgur.com/2R6lo.png\" alt=\"enter image description here\"></p>\n\n<p>In this case, I want my program to solve for the characteristic polynomial solution (a.k.a. the determinant containing variables) along these lines instead of an integer value: </p>\n\n<p><img src=\"https://i.stack.imgur.com/Jf5n3.png\" alt=\"enter image description here\"></p>\n\n<p>Any suggestions on how to handle this?  Code below:</p>\n\n<pre><code>#!/usr/bin/perl\n#perl Solver.pl\n\nuse strict;\nuse warnings;\n\n### solve the characteristic polynomial det(A - RI) \n\nmy @A = ( # 3x3, det = -3\n   [1, 3, -3],\n   [1, 0, 0],\n   [0, 1, 0],\n);\n\n# test_matrix = A - I\nmy $test_matrix = matrixAdd( \\@A, \n    matrixScalarMultiply( identityMatrix(3), -1 ) );\n\nprint \"\\nTest:\\n\";\nfor( my $i = 0; $i &lt;= $#$test_matrix; $i++ ){ \n    print \"[\";\n    for( my $j = 0; $j &lt;= $#$test_matrix; $j++ ){\n        $j == $#$test_matrix ? print $test_matrix-&gt;[$i][$j], \"]\\n\" : \n            print $test_matrix-&gt;[$i][$j], \", \";\n    }\n}\n\nmy $dd = det ($test_matrix);\nprint \"det = $dd \\n\";\n\n\n\n# recursively find determinant of a real square matrix\n# only call on n by n matrices where n &gt;= 2\n#\n# arg0 = matrix reference\nsub det{\n    my ($A) = @_;\n\n    #base: 2x2 matrix\n    if( $#$A + 1 == 2 ){ #recall $#$A == last index of A\n        return $A-&gt;[0][0]*$A-&gt;[1][1] - $A-&gt;[1][0]*$A-&gt;[0][1];\n    }\n\n    #cofactor expansion for matrices &gt; 2x2\n    my $answer = 0;\n    for( my $col = 0; $col &lt;= $#$A; $col++ ){\n        my $m = (); #sub matrix\n        my $multiplier = $A-&gt;[0][$col];\n        if( $col % 2 == 1 ){    #+, -, +, -, ...\n            $multiplier *= -1;\n        }\n\n        for( my $i = 1; $i &lt;= $#$A; $i++ ){ \n            #j is indexer for A, k for m\n            for( my ($j, $k) = (0, 0); $j &lt;= $#$A; $j++ ){\n                $m-&gt;[$i-1][$k++] = $A-&gt;[$i][$j] unless $j == $col;\n            }\n        }\n\n        $answer += $multiplier*det( $m );\n    }#end cofactor expansion\n\n    return $answer;\n}#end det()\n\n\n# return reference to an n by n identity matrix\n# can do this in Perl!\n#\n# arg0 = dimension 'n'\nsub identityMatrix{\n    my $n = shift;\n    my @ret;\n\n    for (my $i = 0; $i &lt; $n; $i++ ){\n        for (my $j = 0; $j &lt; $n; $j++ ){\n            $ret[$i][$j] = $i == $j ? 1 : 0;\n        }\n    }\n\n    return \\@ret;   \n}\n\n\n# return reference to an n by n matrix which is the sum\n# of two different n by n matrices, \"a\" and \"b\"\n#\n# arg0, 1 = references to the pair of matrices to add\nsub matrixAdd{\n    my @ret;\n    my ($a, $b) = ($_[0], $_[1]);\n\n    for (my $i = 0; $i &lt;= $#$a; $i++ ){\n        for (my $j = 0; $j &lt;= $#$a; $j++ ){\n            $ret[$i][$j] = $a-&gt;[$i][$j] + $b-&gt;[$i][$j];\n        }\n    }\n\n    return \\@ret;\n}\n\n\n# return reference to a matrix multiplied by a given scalar\n#\n# arg0 = reference to matrix\n# arg1 = scalar to multiply by\nsub matrixScalarMultiply{\n    my @ret;\n    my ($a, $multiplier) = ($_[0], $_[1]);\n\n    for (my $i = 0; $i &lt;= $#$a; $i++ ){\n        for (my $j = 0; $j &lt;= $#$a; $j++ ){\n            $ret[$i][$j] = $a-&gt;[$i][$j] * $multiplier;\n        }\n    }\n\n    return \\@ret;\n}\n</code></pre>\n"}, {"tags": ["bash", "perl", "osx-yosemite"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1433365887, "post_id": 30630728, "comment_id": 49327206, "body": "YAML is used <code>cpan</code> to collect stats if it&#39;s there. There&#39;s no harm is missing it, and it&#39;s definitely not why the installation of Switch is failing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1433365985, "post_id": 30630728, "comment_id": 49327275, "body": "Most people strongly recommend avoiding Switch since it&#39;s based on a source filter, which makes it inherently fragile. This can result in very weird and hard to debug errors."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1433366042, "post_id": 30630728, "comment_id": 49327307, "body": "Please provide the output of <code>which perl ; which cpan ; head -n 3 &quot;$( which cpan )&quot; ; echo &quot;o conf&quot; | cpan | grep arg ; perl -E&#39;say &quot;$_: $ENV{$_}&quot; for grep &#47;^PERL&#47;, keys %ENV&#39;</code>"}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 1, "creation_date": 1433368332, "post_id": 30630728, "comment_id": 49328371, "body": "I am using LinuxOS which is similar to MacOS. Usually when I am installing a module through CPAN. Have you tried that? Here is a sample video [Installing Perl Module from CPAN into MAC ][1] that shows you the process on MacOS. If yes show us some output of the errors.     [1]: <a href=\"http://Installing%20Perl%20Module%20from%20CPAN%20into%20MAC\" rel=\"nofollow noreferrer\">Installing%20Perl%20Module%20from%20CPAN%20into%20MAC</a>"}, {"owner": {"reputation": 1720, "user_id": 27310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef10e56567f5d6e20bc3f7f4ab4e3254?s=128&d=identicon&r=PG", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/27310/gaurav"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433377370, "post_id": 30630728, "comment_id": 49331524, "body": "What does <code>helloworld.pl</code> look like? Running @ikegami&#39;s code would be a huge help in figuring out what&#39;s going on, if you can provide that!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1720, "user_id": 27310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef10e56567f5d6e20bc3f7f4ab4e3254?s=128&d=identicon&r=PG", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/27310/gaurav"}, "edited": false, "score": 1, "creation_date": 1433377477, "post_id": 30630728, "comment_id": 49331553, "body": "@Gaurav, Just pretend it&#39;s <code>use Switch;</code>"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1433396060, "post_id": 30630728, "comment_id": 49336329, "body": "You can try to install corresponding library(<code>libswitch-perl</code>) from repo and it will work. I use to do same way on my debian machine."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1433407094, "post_id": 30630728, "comment_id": 49342284, "body": "@shivams: A Debian solution is unlikely to work on a Mac :-)"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1433410631, "post_id": 30630728, "comment_id": 49344781, "body": "@DaveCross yeah i know that. What i meant to convey via my comment is that there might be library for switch on mac which you can try."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1433417937, "post_id": 30630728, "comment_id": 49349706, "body": "Probably worth pointing out that Switch.pm was first included with Perl&#39;s standard distribution with Perl 5.8.0. It was deprecated in Perl 5.12.0 and removed from Perl 5.14.0 (I got those values by asking <a href=\"http://perldoc.perl.org/corelist.html\" rel=\"nofollow noreferrer\">corelist</a> and translating dev version numbers to the next production release). So I guess you&#39;re trying to use a version of Perl that is more recent than that. We&#39;ll be able to help more if you tell us how you tried to install the module and <i>exactly</i> what error messages you get."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4971326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89459e81e1f4317573a3c9e72f84d73d?s=128&d=identicon&r=PG&f=1", "display_name": "Al_lyson", "link": "https://stackoverflow.com/users/4971326/al-lyson"}, "edited": false, "score": 0, "creation_date": 1433425284, "post_id": 30639777, "comment_id": 49354736, "body": "It won&#39;t run the script either way. It says I need to install Switch.pm and it doesn&#39;t run it."}, {"owner": {"reputation": 955, "user_id": 2152612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1429edc49cce4063c2b57c1a6ab1c826?s=128&d=identicon&r=PG", "display_name": "Emil Perhinschi", "link": "https://stackoverflow.com/users/2152612/emil-perhinschi"}, "reply_to_user": {"reputation": 11, "user_id": 4971326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89459e81e1f4317573a3c9e72f84d73d?s=128&d=identicon&r=PG&f=1", "display_name": "Al_lyson", "link": "https://stackoverflow.com/users/4971326/al-lyson"}, "edited": false, "score": 1, "creation_date": 1433430104, "post_id": 30639777, "comment_id": 49358504, "body": "the best option you have is to edit helloworld.pl and remove &quot;use Switch&quot; and replace the use of &quot;switch .. .case ...&quot; with if() ... else () ...   if you can share the code you&#39;ll get better feedback :)"}], "tags": [], "owner": {"reputation": 955, "user_id": 2152612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1429edc49cce4063c2b57c1a6ab1c826?s=128&d=identicon&r=PG", "display_name": "Emil Perhinschi", "link": "https://stackoverflow.com/users/2152612/emil-perhinschi"}, "is_accepted": false, "score": 0, "last_activity_date": 1433409338, "creation_date": 1433409338, "answer_id": 30639777, "question_id": 30630728, "link": "https://stackoverflow.com/questions/30630728/unable-to-run-perl-scripts-in-bash-cannot-locate-switch-pm/30639777#30639777", "title": "unable to run perl scripts in BASH &quot;Cannot Locate Switch.pm&quot;", "body": "<p>Switch.pm is deprecated and no longer distributed with the core modules. </p>\n\n<p>You should not use it in production code if you have the option.</p>\n"}], "owner": {"reputation": 11, "user_id": 4971326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89459e81e1f4317573a3c9e72f84d73d?s=128&d=identicon&r=PG&f=1", "display_name": "Al_lyson", "link": "https://stackoverflow.com/users/4971326/al-lyson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 994, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433409338, "creation_date": 1433365614, "last_edit_date": 1433379226, "question_id": 30630728, "link": "https://stackoverflow.com/questions/30630728/unable-to-run-perl-scripts-in-bash-cannot-locate-switch-pm", "title": "unable to run perl scripts in BASH &quot;Cannot Locate Switch.pm&quot;", "body": "<p>I'm trying to run perl in my bash terminal by typing </p>\n\n<pre><code>perl helloworld.pl \n</code></pre>\n\n<p>but when I try to do this an error message comes up.</p>\n\n<blockquote>\n  <p>Can't Locate Switch.pm in @INC (you may need to install the Switch\n  module) (@INC contains: /Library/Perl/5.18/darwin-thread-multi-2-level\n  ....)BEGIN failed --compilation aborted at...</p>\n</blockquote>\n\n<p>I've tried updating Switch.pm using CPAN but it either says it can't install because missing YAML module, (I installed that too.. and nothing), or it says its installed but then the same error message comes up. </p>\n\n<p>I'm using Yosemite on my mac. If anyone has run into this or knows where I can find a solution that'd be much appreciated. Thank you in advance!</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433365358, "post_id": 30630271, "comment_id": 49326950, "body": "You can&#39;t remove the elements from the record detail without inspecting the <code>@keys</code> array, but all you need is <code>delete @{$h}{@keys}</code>. It looks like you should be using <code>$dbh-&gt;selectall_arrayref( $sql, { Slice =&gt; {} } )</code> instead. That way you get just an array of hashes without the upper level keys"}], "answers": [{"comments": [{"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1433367445, "post_id": 30631162, "comment_id": 49327992, "body": "Everytime you answer my questions I learn so many things with Perl. Thank you Borodin. I didn&#39;t know <code>any</code> from <code>List::Util</code> and <code>@{$href}{@$keys}</code> is pretty."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1433367503, "post_id": 30631162, "comment_id": 49328011, "body": "@nowox: That&#39;s good to hear. Thank you, I&#39;m glad to help. <code>any</code> is much the same as <code>grep</code> except that it stops checking as soon as it finds an item in the list that matches the criterion. <code>grep</code> just checks all the items regardless"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1433367218, "creation_date": 1433367218, "answer_id": 30631162, "question_id": 30630271, "link": "https://stackoverflow.com/questions/30630271/how-to-dig-into-an-certain-hash-depth/30631162#30631162", "title": "How to dig into an certain hash depth?", "body": "<p>I think this does what you need. Essentially it recurses through the hash until it finds a layer where the hash values aren't references. Then it removes the elements from that layer with the keys in <code>@keys</code></p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse Data::Dump;\nuse List::Util 'any';\n\nmy $hash_ref = {\n  aphrodite =&gt; {\n    bar =&gt; { name =&gt; \"aphrodite\", foobar =&gt; \"bar\", a =&gt; 3, b =&gt; 4, },\n    foo =&gt; { name =&gt; \"aphrodite\", foobar =&gt; \"foo\", a =&gt; 1, b =&gt; 2, },\n  },\n  apollo =&gt; {\n    bar =&gt; { name =&gt; \"apollo\",    foobar =&gt; \"bar\", a =&gt; 7, b =&gt; 8, },\n    foo =&gt; { name =&gt; \"apollo\",    foobar =&gt; \"foo\", a =&gt; 5, b =&gt; 6, },\n  },\n  ares =&gt; {\n    bar =&gt; { name =&gt; \"ares\",      foobar =&gt; \"bar\", a =&gt; 11, b =&gt; 12, },\n    foo =&gt; { name =&gt; \"ares\",      foobar =&gt; \"foo\", a =&gt; 9,  b =&gt; 10, },\n  },\n};\n\nmy @keys = qw/ name foobar /;\n\nremove_dups($hash_ref, \\@keys);\n\ndd $hash_ref;\n\nsub remove_dups {\n  my ($href, $keys) = @_;\n  if ( any { ref } values %$href ) {\n    remove_dups($_, $keys) for values %$href;\n  }\n  else {\n    delete @{$href}{@$keys};\n  }\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>{\n  aphrodite =&gt; { bar =&gt; { a =&gt; 3, b =&gt; 4 }, foo =&gt; { a =&gt; 1, b =&gt; 2 } },\n  apollo =&gt; { bar =&gt; { a =&gt; 7, b =&gt; 8 }, foo =&gt; { a =&gt; 5, b =&gt; 6 } },\n  ares =&gt; { bar =&gt; { a =&gt; 11, b =&gt; 12 }, foo =&gt; { a =&gt; 9, b =&gt; 10 } },\n}\n</code></pre>\n"}], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 30631162, "answer_count": 1, "score": 3, "last_activity_date": 1433367218, "creation_date": 1433364152, "last_edit_date": 1592644375, "question_id": 30630271, "link": "https://stackoverflow.com/questions/30630271/how-to-dig-into-an-certain-hash-depth", "title": "How to dig into an certain hash depth?", "body": "<p>I have a hash where I don't know its depth. I got it with <code>DBI::selectall_hashref</code> where the second parameter is given by the user.</p>\n<p>So depending on the query I can have something like this for a 2-levels hash.</p>\n<pre><code>hash_ref = (\n   aphrodite =&gt; (\n      foo =&gt; (\n         name =&gt; aphrodite,\n         foobar =&gt; foo\n         a =&gt; 1,\n         b =&gt; 2,\n      )\n      bar =&gt; (\n         name =&gt; aphrodite,\n         foobar =&gt; bar\n         a =&gt; 1,\n         b =&gt; 2,\n      )\n   )\n   apollo =&gt; (\n      ...\n   )\n   ares =&gt; (\n      ...\n   )\n)\n</code></pre>\n<p>As you can see the <code>key</code> columns are redundant into the hash. I would like to remove the redundant keys.</p>\n<p>If I know that this is a 2-levels hash I can easily solve my problem with this:</p>\n<pre><code>for my $name (keys $hash_ref) {\n    for my $foobar (keys $hash_ref-&gt;{$name}) {\n        my $h = $hash_ref-&gt;{$name}{$foobar};\n        delete $h-&gt;{name};\n        delete $h-&gt;{foobar};\n    }\n}    \n</code></pre>\n<p>However with a 3-levels hash I will need 3 cascaded for-loop and so on.</p>\n<blockquote>\n<p>How can I dynamically remove the redundant keys from <code>$hash_ref</code> <em>i.e.</em> <code>name</code> and <code>foobar</code>?</p>\n</blockquote>\n<p>My initial idea was to recursively iterate trough my hash:</p>\n<pre><code>iterate($hash_ref, scalar @keys);\nsub iterate {\n    my ($ref, $depth) = @_;\n    for(keys $ref) {\n        if ($depth &gt; 0) { \n            iterate($ref-&gt;{$_}, $depth - 1);  \n        } \n        else {\n            delete $ref-&gt;{$_} for(@keys);\n        }\n    }\n}  \n</code></pre>\n<p>It works but It's ugly, very ugly... Before going any further I would like to know if I missed something. Perhaps the solution could be much simpler that I think.</p>\n<p>Any ideas?</p>\n<h3>More details?</h3>\n<p>I am writing a database fetcher that takes a user configuration that contains the SQL query <code>$sql</code> and the hash keys <code>@keys</code>. So I get the values from the database with:</p>\n<pre><code>$dbh-&gt;selecthall_hashref($sql, \\@keys, {}, @bind);\n</code></pre>\n<p>I also have to clean fetched data according to additional. Do apply these rules, I have to iterate into the deepest level of <code>$hash_ref</code> to access the keys/values.</p>\n"}, {"tags": ["javascript", "php", "perl", "cookies"], "comments": [{"owner": {"reputation": 1, "user_id": 4118464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238a4576759d59369d4e4ef43b305645?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4118464/oliver"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433359408, "post_id": 30628118, "comment_id": 49323602, "body": "I&#39;m sorry for the mistakes. Thanks @Borodin."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433361027, "post_id": 30628118, "comment_id": 49324483, "body": "Did you specify a path when you created the cookie? If you specified <code>&#47;cgi-bin</code>, then your PHP script won&#39;t see it. If you specified <code>&#47;</code> or if you didn&#39;t specify any, then your PHP script should see the cookie."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433363140, "post_id": 30628118, "comment_id": 49325746, "body": "Show the code you used to create the cookie"}, {"owner": {"reputation": 1, "user_id": 4118464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238a4576759d59369d4e4ef43b305645?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4118464/oliver"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433368029, "post_id": 30628118, "comment_id": 49328232, "body": "Of course, my perl code is ... &amp;SetCookies(&quot;USRINFO&quot;,$usuario.&quot;|&quot;.$passwd.&quot;|&quot;.$clave_usr);  and then when i tried to catch using php ... $myCookie = $_COOKIE[&#39;USRINFO&#39;];"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433375757, "post_id": 30628118, "comment_id": 49331145, "body": "That doesn&#39;t show how you built the cookie at all. What&#39;s <code>SetCookies</code>? And you have yet to answer my first question."}, {"owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "edited": false, "score": 0, "creation_date": 1433375789, "post_id": 30628118, "comment_id": 49331151, "body": "You should be using <a href=\"https://metacpan.org/pod/CGI\" rel=\"nofollow noreferrer\">metacpan.org/pod/CGI</a> instead of <a href=\"http://www.scriptarchive.com/readme/cookielib.html\" rel=\"nofollow noreferrer\">scriptarchive.com/readme/cookielib.html</a> ; also if you&#39;re using cookielib you&#39;re probably interested in <a href=\"http://nms-cgi.sourceforge.net/\" rel=\"nofollow noreferrer\">nms-cgi.sourceforge.net</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4118464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238a4576759d59369d4e4ef43b305645?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4118464/oliver"}, "edited": false, "score": 0, "creation_date": 1433361712, "post_id": 30628267, "comment_id": 49324889, "body": "i have already tried that and also with javascript (document.cookie) but I can not catch my cookie. Something else..."}], "tags": [], "owner": {"reputation": 2023, "user_id": 1741824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac8a9bfe475cf013642bbfff97e8fa1?s=128&d=identicon&r=PG", "display_name": "Kevin_Kinsey", "link": "https://stackoverflow.com/users/1741824/kevin-kinsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1433357373, "creation_date": 1433357373, "answer_id": 30628267, "question_id": 30628118, "link": "https://stackoverflow.com/questions/30628118/catch-an-specific-cookie-in-browser-made-by-my-script/30628267#30628267", "title": "Catch an specific cookie in browser made by my script", "body": "<p>Cookies are available from the browser at the time of page load.  If your CGI script set the cookie, and then the browser loads myphpfile.php, you would do something like this in myphpfile.php to get the cookie value into the PHP variable $myCookie:</p>\n\n<pre><code>&lt;?php\n$myCookie = $_COOKIE['name_of_cookie'];\n</code></pre>\n\n<p>Of course, this is assuming you know the name of the cookie and the domain and paths are set compatibly.</p>\n\n<p>You can read all about it at <a href=\"http://php.net/manual/en/features.cookies.php\" rel=\"nofollow\">http://php.net/manual/en/features.cookies.php</a></p>\n"}], "owner": {"reputation": 1, "user_id": 4118464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238a4576759d59369d4e4ef43b305645?s=128&d=identicon&r=PG&f=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4118464/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433358234, "creation_date": 1433356895, "last_edit_date": 1433358234, "question_id": 30628118, "link": "https://stackoverflow.com/questions/30628118/catch-an-specific-cookie-in-browser-made-by-my-script", "title": "Catch an specific cookie in browser made by my script", "body": "<p>I made a web site using Perl code (CGI) which uses cookies to manage our users. Now I need to make a new script but using PHP, so I'd like to use the cookie what was created by my browser. I have the cookie name but I can't catch it (document. cookie, $_cookie).</p>\n\n<p>The Perl site and the new script are in the same domain but in different directory.</p>\n\n<ul>\n<li>Perl (/cgi-bin/myperlfile.cgi) </li>\n<li>PHP (/myphpfile.php)</li>\n</ul>\n\n<p>What can I do to use that already created cookie?</p>\n"}, {"tags": ["performance", "perl"], "comments": [{"owner": {"reputation": 1915, "user_id": 792443, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1MO3b.jpg?s=128&g=1", "display_name": "loosebazooka", "link": "https://stackoverflow.com/users/792443/loosebazooka"}, "edited": false, "score": 2, "creation_date": 1433355280, "post_id": 30627568, "comment_id": 49321159, "body": "Can you add some detail about what you want to do? Also, why do you think this might be slow?"}, {"owner": {"reputation": 13013, "user_id": 475150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rOCEK.png?s=128&g=1", "display_name": "BRPocock", "link": "https://stackoverflow.com/users/475150/brpocock"}, "edited": false, "score": 0, "creation_date": 1433355405, "post_id": 30627568, "comment_id": 49321230, "body": "Is it necessary that you support the regex &quot;\\s+&quot; as a delimiter; and are third or subsequent fields actually useful/interesting? \u2014 or, can one assume each record is precisely (word) (space) (filespec without spaces) (newline) ?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1433374099, "last_edit_date": 1433374099, "creation_date": 1433357746, "answer_id": 30628383, "question_id": 30627568, "link": "https://stackoverflow.com/questions/30627568/reading-and-processing-files-word-by-word-efficiently-in-perl/30628383#30628383", "title": "Reading and processing files word by word efficiently in perl", "body": "<p>This is about as fast as your algorithm is going to go. The optimisations I have made are to use a single regex pattern to find either <code>first_word</code> or <code>second_word</code> at the beginning of the line, and to use the same pattern to capture the second field in the line</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nopen my $in_fh,  '&lt;', 'practicecase.txt';\n\nopen my $out_fh, '&gt;', 'extracted.txt';\nselect $out_fh;\n\nprint \"Extracting inputs\\n\";\n\nwhile ( &lt;$in_fh&gt; ) {\n    print \"$1\\n\" if / ^ (?:first|second)_word \\s+ (\\S+) /x;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": false, "score": -1, "last_activity_date": 1433366501, "creation_date": 1433366501, "answer_id": 30630987, "question_id": 30627568, "link": "https://stackoverflow.com/questions/30627568/reading-and-processing-files-word-by-word-efficiently-in-perl/30630987#30630987", "title": "Reading and processing files word by word efficiently in perl", "body": "<p>Slight modification on Borodin's code</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Cwd qw( abs_path );\nuse File::Basename;\nuse File::Basename qw( dirname );\n\nmy $file_in = dirname(abs_path($0)).\"/practicecase.txt\";\nmy $file_out = dirname(abs_path($0)).\"/extracted.txt\";\n\nopen my $in, \"&lt;$file_in\" or die \"$!\";\nopen my $out, \"&gt;$file_out\" or die \"$!\";\n\nprint \"Extracting inputs\\n\";\n\nwhile ( &lt;$in&gt; ) {\n    print $out \"$1\\n\" if / ^ (?:first|second)_word\\s+(.+?)$ /x;\n}\n\nclose($in);\nclose($out);\nexit;\n</code></pre>\n\n<p>Basically changed the regex to capture everything to the end of the line in case your original text file has spaces or other whitespace you may want to include.  Also don't forget to close your file handles</p>\n"}], "owner": {"reputation": 43, "user_id": 4970866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6034c75527159d9ef5eb0220ce64cc70?s=128&d=identicon&r=PG&f=1", "display_name": "chrisyyy", "link": "https://stackoverflow.com/users/4970866/chrisyyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 30628383, "answer_count": 2, "score": 0, "last_activity_date": 1433374099, "creation_date": 1433354962, "question_id": 30627568, "link": "https://stackoverflow.com/questions/30627568/reading-and-processing-files-word-by-word-efficiently-in-perl", "title": "Reading and processing files word by word efficiently in perl", "body": "<p>I'm very new to perl and wanted to know how I could make this bit here faster. Here is is my current code. Any help is very much appreciated.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen( FILE_IN, \"&lt;practicecase.txt\" ) or die \"$!\";\n\nopen( FILE_OUT, \"&gt;extracted.txt\" ) or die \"$!\";\n\nprint \"Extracting inputs\\n\";\n\nwhile (&lt;FILE_IN&gt;) {\n    if ( $_ =~ m/^second_word/ ) {\n        my @filepath2 = split (/\\s+/, $_);\n        print FILE_OUT $filepath2[1].\"\\n\";\n    }\n    if ($_ =~ m/^first_word/ ) {\n        my @filepath1 = split (/\\s+/, $_);\n        print FILE_OUT $filepath1[1].\"\\n\";\n    }\n}\n\nexit;\n</code></pre>\n\n<p>My input file, practicecase.txt, is simply:</p>\n\n<pre><code>first_word some/filepath\nsecond_word another/filepath\n</code></pre>\n\n<p>My output file, extracted.txt, looks like:</p>\n\n<pre><code>some/filepath\nanother/filepath\n</code></pre>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["perl", "dictionary", "substitution"], "comments": [{"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 0, "creation_date": 1433357476, "post_id": 30627562, "comment_id": 49322458, "body": "Do you mean to have two different <code>my $line</code> declarations?"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1433357263, "last_edit_date": 1433357263, "creation_date": 1433356595, "answer_id": 30628020, "question_id": 30627562, "link": "https://stackoverflow.com/questions/30627562/perl-search-and-replace/30628020#30628020", "title": "Perl: Search and Replace", "body": "<p>The problem seems to be that you are assigning the single field <code>$columns[3]</code> to array <code>@name</code>, and then expecting to find it in <code>$name</code>, which is a separate variable altogether. You even declare <code>$name</code> at the point of the comparison</p>\n\n<p>You are also executing the statement</p>\n\n<pre><code>$line =~ s/$name/$dictionary{$ref_nuc}/;\n</code></pre>\n\n<p>once for each key in the hash. That is unnecessary: it needs to be done only once. It is also better to change the value of <code>$columns[3]</code> to <code>$dictionary{$columns[3]}</code> instead of doing a search and replace on the whole line, as the target string may appear in other columns that you don't want to modify</p>\n\n<p>It is very simple to do by building a dictionary hash and replacing the fourth field of the input file with its dictionary lookup</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nopen my $fh, '&lt;', 'dictionary.txt';\nmy %dict;\nwhile ( &lt;$fh&gt; ) {\n  my ($k, $v) = (split)[2,1];\n  $dict{$k} = $v;\n}\n\nopen $fh, '&lt;', 'input.txt';\nwhile ( &lt;$fh&gt; ) {\n  my @fields = split;\n  $fields[3] = $dict{$fields[3]};\n  say join \"\\t\", @fields;\n}\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>1   N   22  H   MET\n1   H   32  HB  MET\n1   C   40  C   MET\n2   H   35  3HB ASP\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 30628020, "answer_count": 1, "score": 1, "last_activity_date": 1433357263, "creation_date": 1433354935, "last_edit_date": 1433356920, "question_id": 30627562, "link": "https://stackoverflow.com/questions/30627562/perl-search-and-replace", "title": "Perl: Search and Replace", "body": "<p>I'm trying to improve my script in which I hope to match characters in <code>input.txt</code> (column 4: <code>H1</code>, <code>2HB</code>, <code>CA</code>, <code>HB3</code>) to <code>dictionary.txt</code> and replace with appropriate characters from <code>dictionary.txt</code> (column 2: <code>H</code>, <code>HB</code>, <code>C</code>, <code>3HB</code>). Using <code>dictionary.txt</code> as a dictionary:</p>\n\n<p><strong>input.txt</strong></p>\n\n<pre><code>1  N  22  H1  MET\n1  H  32 2HB  MET\n1  C  40  CA  MET\n2  H  35  HB3 ASP\n</code></pre>\n\n<p><strong>dictionary.txt</strong></p>\n\n<pre><code>MET  H   H1\nMET  HB 2HB\nMET  C   CA\nASP 3HB  HB3\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>1  N  22  H  MET\n1  H  32  HB MET\n1  C  40  C  MET\n2  H  35 3HB ASP\n</code></pre>\n\n<p>I'm trying to approach this by first matching the word in <code>input.txt</code> (MET) and <code>dictionary.txt</code> (MET) and then performing the substitution. This is what I've written so far:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy %dictionary;\n\nopen my $dic_fh, '&lt;', 'dictionary.txt' or die \"Can't open file: $!\";\n\nwhile (my $ref = &lt;$dic_fh&gt;) {\n    chomp $ref;\n    my @columns  = split(/\\t/, $ref);\n    my $res_name = $columns[0];\n    my $ref_nuc  = $columns[1];\n    $dictionary{$res_name} = {$ref_nuc};\n\n    open my $in_fh, '&lt;', 'input.txt' or die \"Can't open file: $!\";\n\n    while (my $line = &lt;$in_fh&gt;) {\n        chomp $line;\n        my @columns = split(/\\t/, $line);\n        my @name = $columns[3];\n        if (my $name eq $res_name) {\n            my $line = $_;\n            foreach my $res_name (keys %dictionary) {\n                $line =~ s/$name/$dictionary{$ref_nuc}/;\n            }\n            print $line;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "loops", "for-loop"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433355353, "post_id": 30627482, "comment_id": 49321196, "body": "Use the <a href=\"http://perldoc.perl.org/functions/join.html\" rel=\"nofollow noreferrer\"><code>join</code></a> function."}], "answers": [{"tags": [], "owner": {"reputation": 876, "user_id": 1577347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5wJu.png?s=128&g=1", "display_name": "Chris Smeele", "link": "https://stackoverflow.com/users/1577347/chris-smeele"}, "is_accepted": true, "score": 0, "last_activity_date": 1433356038, "creation_date": 1433356038, "answer_id": 30627878, "question_id": 30627482, "link": "https://stackoverflow.com/questions/30627482/removing-excess-tab-from-loop-in-perl/30627878#30627878", "title": "removing excess tab from loop in perl", "body": "<p>As people have commented, <code>join</code> seems to be a nice solution for this problem.\nYou can do this in a single line:</p>\n\n<pre><code>print join(\"\\t\", $_, keys %{$hash{$_}}) . \"\\n\" foreach keys %hash;\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 3412393, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/791837855/picture?type=large", "display_name": "user3412393", "link": "https://stackoverflow.com/users/3412393/user3412393"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 30627878, "answer_count": 1, "score": 0, "last_activity_date": 1433356038, "creation_date": 1433354615, "last_edit_date": 1433355062, "question_id": 30627482, "link": "https://stackoverflow.com/questions/30627482/removing-excess-tab-from-loop-in-perl", "title": "removing excess tab from loop in perl", "body": "<p>a basic question involving loops. If I'm doing a basic loop where I want to generate a tab delimited table from a hash of hashes (format: $hash_of_table_data{$headers}{$entry} = 1) with example code:</p>\n\n<pre><code>foreach my $rowheader (keys %hash_of_table_data) {\n  print \"$rowheader\\t\";\n  foreach my $entry (keys %{ $hash_of_table_data{$rowheader}}) {\n    print \"$entry\\t\";\n  }\n  print \"\\n\";\n}\n</code></pre>\n\n<p>So, by doing loops like this, at the end of print my last element of each row, it will have an extra tab. Is there a simple way to generate a similar list but that wouldn't add the extra tab at the very end? Or some simple chomp like function that will remove the last tab added prior to doing the new line? (I want it to add tabs between every element, except the final element).</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1433354892, "post_id": 30627467, "comment_id": 49320941, "body": "Please show the results for the test that failed, not the test summary."}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433355026, "post_id": 30627467, "comment_id": 49321009, "body": "@TSBN Thanks for your reply. Okay, but I don&#39;t no how doing... @r"}, {"owner": {"reputation": 81037, "user_id": 8454, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2NlHs.png?s=128&g=1", "display_name": "Andy Lester", "link": "https://stackoverflow.com/users/8454/andy-lester"}, "edited": false, "score": 2, "creation_date": 1433355841, "post_id": 30627467, "comment_id": 49321496, "body": "@Arnold: There is a lot of other test output above the part that says &quot;Test Summary Output&quot;.  That&#39;s what we need to see.  Please edit your question to show all the output that you have, not just the summary."}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 1, "creation_date": 1433357987, "post_id": 30627467, "comment_id": 49322769, "body": "There&#39;s a bug report open against this - <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=71044\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=71044</a>.  Too bad we can&#39;t close this question as a dupe of that.  Regardless, the module needs a code change."}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 0, "creation_date": 1433796036, "post_id": 30627467, "comment_id": 49494853, "body": "I&#39;ve got a github pull request in with the author that fixes, I think, a few problems on Strawberry and Cygwin, if you want to test. <a href=\"https://github.com/DSolimano/number-format-perl\" rel=\"nofollow noreferrer\">github.com/DSolimano/number-format-perl</a>"}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "edited": false, "score": 0, "creation_date": 1433833297, "post_id": 30627467, "comment_id": 49507014, "body": "@@, I have see GitHub!. I will Stay with and us &quot;regex&quot;. But wath brings the future? Next month I start with Win 10... (at this moment I have one election version) Probable i get und have news probleme? Thanks @r"}, {"owner": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 0, "creation_date": 1433855622, "post_id": 30627467, "comment_id": 49522333, "body": "The module author just merged my changes, so you can go to his repo and get them.  Not sure when the release is scheduled, but hopefully soon."}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "reply_to_user": {"reputation": 8202, "user_id": 58074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/297b31165c5ef426c8fa89c3375b0d2a?s=128&d=identicon&r=PG", "display_name": "dsolimano", "link": "https://stackoverflow.com/users/58074/dsolimano"}, "edited": false, "score": 0, "creation_date": 1433873937, "post_id": 30627467, "comment_id": 49535597, "body": "@Dsolimano, Thanks. So I will Wait ... 20:17:10@r"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "edited": false, "score": 0, "creation_date": 1433358817, "post_id": 30628481, "comment_id": 49323272, "body": "@TSIBN, Hello Sir, Many thanks for answering! So I us regex..... At now you can close this topic. @r Nota Bene: with xml::twig i got : Falling back to Archive::Tar 2.04. But this is en under History. by"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "edited": false, "score": 1, "creation_date": 1433360892, "post_id": 30628481, "comment_id": 49324398, "body": "@Arnold, &quot;Falling back to Archive::Tar&quot; is not a problem. It displays that when the Perl module is used instead of the <code>tar</code> command-line utility, a utility not usually present on Windows systems."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 0, "last_activity_date": 1433358095, "creation_date": 1433358095, "answer_id": 30628481, "question_id": 30627467, "link": "https://stackoverflow.com/questions/30627467/why-does-installing-numberformat-on-win-64-fail/30628481#30628481", "title": "Why does installing Number::Format on Win 64 fail?", "body": "<p>There's already a <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=71044\" rel=\"nofollow\">bug report</a> for this. The issue hasn't been fixed yet, but somebody uploaded a patch that you can try:</p>\n\n<blockquote>\n  <p>Reason seems to be the POSIX module, which returns many \"-1\" values where Number::Format->new() expects missing hash keys... I was able to successfully test and install by using the attached patch as a workaround. But it might be smarter to fix this problem in the POSIX module.</p>\n</blockquote>\n\n<p>Any time a module fails to build, you should check the CPAN Testers report. The tests are <a href=\"http://matrix.cpantesters.org/?dist=Number-Format%201.73;os=mswin32;perl=5.20.0;reports=1\" rel=\"nofollow\">failing</a> for Perl 5.20.0 on Window x64, so it's not just you.</p>\n"}], "owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 30628481, "answer_count": 1, "score": 3, "last_activity_date": 1433358095, "creation_date": 1433354555, "last_edit_date": 1433357023, "question_id": 30627467, "link": "https://stackoverflow.com/questions/30627467/why-does-installing-numberformat-on-win-64-fail", "title": "Why does installing Number::Format on Win 64 fail?", "body": "<p>I'm trying to install <a href=\"https://metacpan.org/pod/Number::Format\" rel=\"nofollow\"><code>Number::Format</code></a> to use with Padre on Windows:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cpanm Number::Format\n</code></pre>\n\n<p>I get the following error. How can I fix this?</p>\n\n<pre><code>    cpanm (App::cpanminus) 1.7034 on perl 5.020002 built for MSWin32-x86-multi-thread-64int\nWork directory is C:\\Users\\admin/.cpanm/work/1433356714.11300\nYou have make C:\\STRAWB~1\\c\\bin\\dmake.exe\nYou have LWP 6.08\nFalling back to Archive::Tar 2.04\nSearching Number::Format () on cpanmetadb ...\n--&gt; Working on Number::Format\nFetching http://www.cpan.org/authors/id/W/WR/WRW/Number-Format-1.73.tar.gz\n-&gt; OK\nUnpacking Number-Format-1.73.tar.gz\nEntering Number-Format-1.73\nChecking configure dependencies from META.yml\nConfiguring Number-Format-1.73\nRunning Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a dmake-style Makefile\nWriting Makefile for Number::Format\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have POSIX 0 ... Yes (1.38_03)\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (6.98)\nChecking if you have Test::More 0 ... Yes (1.001014)\nChecking if you have Carp 0 ... Yes (1.3301)\nBuilding and testing Number-Format-1.73\ncp Format.pm blib\\lib\\Number\\Format.pm\nC:\\Perl\\bin\\perl.exe \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib\\lib', 'blib\\arch')\" t/*.t\nt/format_bytes.t ..... ok\nt/format_negative.t .. ok\nt/format_number.t .... ok\nt/format_picture.t ... ok\nt/format_price.t ..... ok\nInvalid sep_by_space value at t/locale.t line 77.\n# Looks like your test exited with 255 just after 5.\nt/locale.t ........... \nDubious, test returned 255 (wstat 65280, 0xff00)\nAll 5 subtests passed \n    (less 3 skipped subtests: 2 okay)\nt/object.t ........... ok\nt/round.t ............ ok\nt/unformat_number.t .. ok\n\nTest Summary Report\n-------------------\nt/locale.t         (Wstat: 65280 Tests: 5 Failed: 0)\n  Non-zero exit status: 255\nFiles=9, Tests=147,  1 wallclock secs ( 0.11 usr +  0.03 sys =  0.14 CPU)\nResult: FAIL\nFailed 1/9 test programs. 0/147 subtests failed.\ndmake.exe:  Error code 255, while making 'test_dynamic'\n-&gt; FAIL Installing Number::Format failed. See C:\\Users\\admin\\.cpanm\\work\\1433356714.11300\\build.log for details. Retry with --force to force install it.\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 1, "creation_date": 1433352129, "post_id": 30626245, "comment_id": 49319285, "body": "Looks like an OS vs. compile mismatch.  What does <code>uname -a</code>, <code>&#47;usr&#47;bin&#47;perl -V</code>, <code>ldd &#47;software6&#47;bioinfo&#47;apps&#47;mugqic_space&#47;software&#47; perl&#47;perl-5.18.2&#47;lib&#47;5.18.2&#47;x86_64-linux-thread-multi&#47;auto&#47;C&zwnj;&#8203;wd&#47;Cwd.so</code> and <code>file &#47;software6&#47;bioinfo&#47;apps&#47;mugqic_space&#47;software&#47; perl&#47;perl-5.18.2&#47;lib&#47;5.18.2&#47;x86_64-linux-thread-multi&#47;auto&#47;C&zwnj;&#8203;wd&#47;Cwd.so</code> output?"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433357030, "post_id": 30626245, "comment_id": 49322156, "body": "Install perl in your own home dir. <a href=\"http://weblog.bulknews.net/post/58079418600/plenv-alternative-for-perlbrew\" rel=\"nofollow noreferrer\">weblog.bulknews.net/post/58079418600/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 0, "creation_date": 1433352795, "post_id": 30626813, "comment_id": 49319659, "body": "Maybe if they add <code>&#47;software6&#47;bioinfo&#47;apps&#47;mugqic_space&#47;software&#47;perl&#47;perl-5.18&zwnj;&#8203;.2&#47;bin</code> in their path before <code>&#47;usr&#47;bin</code> it will use the Perl binary that matches their package&#39;s libraries."}, {"owner": {"reputation": 99, "user_id": 3537767, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5b99b6f43968bace258ed7a5f39132cd?s=128&d=identicon&r=PG&f=1", "display_name": "Yarmiz", "link": "https://stackoverflow.com/users/3537767/yarmiz"}, "edited": false, "score": 0, "creation_date": 1433425387, "post_id": 30626813, "comment_id": 49354811, "body": "Thank you! You answer helped me realize that 2 versions were installed."}, {"owner": {"reputation": 830, "user_id": 3928104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1758186afcb659bae03d821a2d2c9e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Swing", "link": "https://stackoverflow.com/users/3928104/swing"}, "edited": false, "score": 0, "creation_date": 1498462560, "post_id": 30626813, "comment_id": 76490590, "body": "So how to fix this?"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1433352374, "creation_date": 1433352374, "answer_id": 30626813, "question_id": 30626245, "link": "https://stackoverflow.com/questions/30626245/undefined-symbol-perl-xs-apiversion-bootcheck/30626813#30626813", "title": "&quot;undefined symbol: Perl_xs_apiversion_bootcheck&quot;", "body": "<p>Sounds like you have two installs of Perl, the system one (<code>/usr/bin/perl</code>), and one in <code>/software6/bioinfo/apps/mugqic_space/software/perl</code>, and the former is using files installed by the latter. The former should not have been told to even look at the files installed by the latter.</p>\n"}], "owner": {"reputation": 99, "user_id": 3537767, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5b99b6f43968bace258ed7a5f39132cd?s=128&d=identicon&r=PG&f=1", "display_name": "Yarmiz", "link": "https://stackoverflow.com/users/3537767/yarmiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13733, "favorite_count": 0, "accepted_answer_id": 30626813, "answer_count": 1, "score": 4, "last_activity_date": 1453294934, "creation_date": 1433350593, "last_edit_date": 1453294934, "question_id": 30626245, "link": "https://stackoverflow.com/questions/30626245/undefined-symbol-perl-xs-apiversion-bootcheck", "title": "&quot;undefined symbol: Perl_xs_apiversion_bootcheck&quot;", "body": "<p>I get this message when I try to run a Perl script used in a bioinformatic package named DISOPRED3:</p>\n\n<pre><code>/usr/bin/perl: symbol lookup error: /software6/bioinfo/apps/mugqic_space/software/\nperl/perl-5.18.2/lib/5.18.2/x86_64-linux-thread-multi/auto/Cwd/Cwd.so:\nundefined symbol: Perl_xs_apiversion_bootcheck\n</code></pre>\n\n<p>I used the exact same script on my local computer and it works. Now I have to work on a super-computer from a distance and that's where I get this message. I checked, and the Perl versions are the same on both computers.</p>\n"}, {"tags": ["perl", "perlbrew", "dist-zilla"], "answers": [{"comments": [{"owner": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "edited": false, "score": 0, "creation_date": 1433357427, "post_id": 30626428, "comment_id": 49322423, "body": "Thanks! So it works now. I hope you don&#39;t mind if I ask a few questions about your solution. This link (<a href=\"http://perlbrew.pl/Perlbrew-and-Friends.html\" rel=\"nofollow noreferrer\">perlbrew.pl/Perlbrew-and-Friends.html</a>) discusses installing all modules under <code>~&#47;perl5&#47;perlbrew&#47;bin</code> with cpanm so that when you switch perls you don&#39;t have to reinstall modules. That&#39;s what I did previously. Is that not the preferred solution? Should I instead be installing modules for each individual perl like you had me do? Also, how did you know dzil was installed for a different perl? Because of the error? Or because of what was included in <code>@INC</code>?"}, {"owner": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "edited": false, "score": 0, "creation_date": 1433357430, "post_id": 30626428, "comment_id": 49322427, "body": "And are all perlbrew installations not threaded, or just the one I have installed?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "edited": false, "score": 2, "creation_date": 1433360674, "post_id": 30626428, "comment_id": 49324291, "body": "@srchulo, There are some you would have to install anyway (e.g. Mouse) because they have architecture- or version-dependent elements. You&#39;re better off reinstalling them all because of issues with dependencies on such modules by modules that aren&#39;t arch- or version-dependent."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "edited": false, "score": 2, "creation_date": 1433360721, "post_id": 30626428, "comment_id": 49324312, "body": "@srchulo, You can build a threaded Perl by specifying <code>-Dusethreads</code> or the friendlier, perlbrew-specific alias <code>--thread</code>."}, {"owner": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "edited": false, "score": 0, "creation_date": 1433367479, "post_id": 30626428, "comment_id": 49328001, "body": "great. Thanks for the help!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1433352729, "last_edit_date": 1433352729, "creation_date": 1433351178, "answer_id": 30626428, "question_id": 30625955, "link": "https://stackoverflow.com/questions/30625955/use-perlbrew-with-dist-zilla-test/30626428#30626428", "title": "use perlbrew with dist zilla test", "body": "<p>You're trying to install it using the wrong <code>perl</code> since you're using <code>dzil</code> installed by a different <code>perl</code> than the one you want to use.</p>\n\n<p>Furthermore, you shouldn't see any of the following in your <code>perlbrew</code>ed <code>perl</code>'s <code>@INC</code>:</p>\n\n<ul>\n<li><code>/Users/user/perl5/lib/perl5/darwin-2level</code></li>\n<li><code>/Users/user/perl5/lib/perl5</code></li>\n<li><code>/opt/local/lib/perl5/vendor_perl/5.16.1/darwin-thread-multi-2level/</code> (You <code>perlbrew</code>ed <code>perl</code> isn't even threaded!!!)</li>\n</ul>\n\n<hr>\n\n<ol>\n<li><p>Let's clean up your environment.</p>\n\n<ol>\n<li><p>Unset env vars <code>PERL5LIB</code>, <code>PERLLIB</code>, <code>PERL5OPT</code>, <code>PERL_MM_OPT</code> and <code>PERL_MB_OPT</code>. Permanently. Get rid of them in your login scripts, then unset them from the current shell or log back in. (Make a note of what they were as a backup.)</p></li>\n<li><p>Clear <code>cpan'</code>s configuration item <code>makepl_arg</code>. From within <code>cpan</code>,</p>\n\n<pre><code>o conf makepl_arg      # Just to see its current value as a backup.\no conf makepl_arg ''\no conf commit\n</code></pre>\n\n<p>In particular, we want to remove anything that indicates an installation path, including <code>INSTALL_BASE</code>, <code>PREFIX</code> and <code>LIB</code>.</p></li>\n<li><p>Clear <code>cpan'</code>s configuration item <code>mbuildpl_arg</code>. From within <code>cpan</code>,</p>\n\n<pre><code>o conf mbuildpl_arg    # Just to see its current value as a backup.\no conf mbuildpl_arg ''\no conf commit\n</code></pre>\n\n<p>In particular, we want to remove anything that indicates an installation path, including <code>--install_base</code>, <code>--prefix</code> and <code>--lib</code>.</p></li>\n<li><p>Since you're there, do the following from within <code>cpan</code>:</p>\n\n<pre><code>o conf build_dir_reuse 0\no conf commit\n</code></pre>\n\n<p>This will restore the setting to its default, which will save you headaches if it was changed.</p></li>\n</ol></li>\n<li><p>Install the dependencies.</p>\n\n<pre><code>cpan Dist::Zilla Mouse\n</code></pre></li>\n</ol>\n\n<hr>\n\n<p>At this point, executing <code>which dzil</code> should give</p>\n\n<pre><code>/Users/user/perl5/perlbrew/perls/perl-5.16.0/bin/dzil\n</code></pre>\n\n<p>If so, you should be good to go.</p>\n\n<p>If not, do <code>hash -r</code> and try <code>which dzil</code> again. (This shouldn't be needed, but just to be sure.)</p>\n\n<p>If still not, provide the output of the following commands:</p>\n\n<pre><code>echo \"$PATH\"\nwhich cpan\nhead -n 3 \"$( which cpan )\"\necho 'o conf' | cpan | grep arg\nwhich dzil\nhead -n 3 \"$( which dzil )\"\nperl -V                           # Uppercase \"V\"\n</code></pre>\n"}], "owner": {"reputation": 4843, "user_id": 834140, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dba32ebf9d12c67b53f1c5e2d4737eca?s=128&d=identicon&r=PG", "display_name": "srchulo", "link": "https://stackoverflow.com/users/834140/srchulo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 30626428, "answer_count": 1, "score": 1, "last_activity_date": 1433352729, "creation_date": 1433349655, "question_id": 30625955, "link": "https://stackoverflow.com/questions/30625955/use-perlbrew-with-dist-zilla-test", "title": "use perlbrew with dist zilla test", "body": "<p>I am using the <a href=\"https://metacpan.org/pod/Dist::Zilla\" rel=\"nofollow\">Dist::Zilla</a> module to release and test my module. I am also using <a href=\"http://perlbrew.pl/\" rel=\"nofollow\">Perlbrew</a>. When I run a script using perlbrew that includes my module, the script runs fine:</p>\n\n<pre><code>use strict;\nuse My::Module;\n</code></pre>\n\n<p>However, whenever I run <code>dzil test</code>, on a test that just tries to include my module:</p>\n\n<pre><code>#!perl -T\nuse strict;\nuse warnings FATAL =&gt; 'all';\nuse Test::More;\n\nplan tests =&gt; 1;\n\nBEGIN {\n    use_ok( 'My::Module' ) || print \"Bail out!\\n\";\n}\n\ndiag( \"Testing My::Module $My::Module::VERSION, Perl $], $^X\" );\n</code></pre>\n\n<p>It fails with this error saying that it can't find the module Mouse (which my module includes):</p>\n\n<pre><code>Error:  Can't locate Mouse.pm in @INC (you may need to install the Mouse module) (@INC contains:\n/Users/user/github/My/Module/.build/HoKOnIQGYr/blib/lib\n/Users/user/github/My/Module/.build/HoKOnIQGYr/blib/arch\n/Users/user/perl5/lib/perl5/darwin-thread-multi-2level\n/Users/user/perl5/lib/perl5/darwin-thread-multi-2level\n/Users/user/perl5/lib/perl5\n/opt/local/lib/perl5/vendor_perl/5.16.1/darwin-thread-multi-2level/\n/Users/user/perl5/lib/perl5/darwin-thread-multi-2level\n/Users/user/perl5/lib/perl5\n/opt/local/lib/perl5/vendor_perl/5.16.1/darwin-thread-multi-2level/\n/Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18\n/Network/Library/Perl/5.18/darwin-thread-multi-2level\n/Network/Library/Perl/5.18\n/Library/Perl/Updates/5.18.2/darwin-thread-multi-2level\n/Library/Perl/Updates/5.18.2\n/System/Library/Perl/5.18/darwin-thread-multi-2level\n/System/Library/Perl/5.18\n/System/Library/Perl/Extras/5.18/darwin-thread-multi-2level\n/System/Library/Perl/Extras/5.18) at\n/Users/user/github/My/Module/.build/HoKOnIQGYr/blib/lib/My/Module.pm line 4.\n</code></pre>\n\n<p>It says that it cannot find Mouse.pm, which I know is located at </p>\n\n<pre><code>/Users/user/perl5/lib/perl5/darwin-2level\n</code></pre>\n\n<p>I see that for some reason that directory is not located in <code>@INC</code>, which is interesting because if I run this command to print out all the directories in <code>@INC</code>:</p>\n\n<pre><code>perl -e 'print \"$_\\n\" for @INC'\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>/Users/user/perl5/lib/perl5/darwin-2level\n/Users/user/perl5/lib/perl5\n/opt/local/lib/perl5/vendor_perl/5.16.1/darwin-thread-multi-2level/\n/Users/user/perl5/perlbrew/perls/perl-5.16.0/lib/site_perl/5.16.0/darwin-2level\n/Users/user/perl5/perlbrew/perls/perl-5.16.0/lib/site_perl/5.16.0\n/Users/user/perl5/perlbrew/perls/perl-5.16.0/lib/5.16.0/darwin-2level\n/Users/user/perl5/perlbrew/perls/perl-5.16.0/lib/5.16.0\n.\n</code></pre>\n\n<p>So when I run perl on the command line then the <code>darwin-2level</code> directory is present in <code>@INC</code>, but whenever I run <code>dzil test</code> it is not. This might not have much to do with <code>Dist::Zilla</code>, since I think <code>Dist::Zilla</code> just creates <code>Makefile.PL</code> and runs <code>make test</code> for you. Could this be because for testing an older version of perl is being required? Like so:</p>\n\n<pre><code>use 5.006;\n</code></pre>\n\n<p>But even so, some Perlbrew directories are present in <code>@INC</code> during the test such as </p>\n\n<pre><code>/Users/user/perl5/lib/perl5/darwin-thread-multi-2level\n</code></pre>\n\n<p>Does anyone know how I can make it so I can use the Mouse installation in my perl directory instead of installing a systemwide one? I had a previous error with another module that couldn't be found when I ran <code>dzil test</code>, and that module was in the same directory as <code>Mouse</code>. I was able to fix the issue by installing the module systemwide instead of locally in my home <code>perl5</code> directory, but I'd prefer to use the Mouse installed by Perlbrew and not mess with my system perl if possible. I am using Perlbrew version 0.73.</p>\n"}, {"tags": ["perl", "email", "smtp", "sendmail"], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 1753389, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/5DPUE.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/1753389/peter"}, "edited": false, "score": 0, "creation_date": 1433352346, "post_id": 30626357, "comment_id": 49319395, "body": "I put all the sendmail code in a separate file called sendemail.pl. Then I called that code like this: my $res = readpipe( &quot;./sendemail.pl \\&quot;$from\\&quot; \\&quot;$subject\\&quot; \\&quot;$to\\&quot; \\&quot;$bcc\\&quot; \\&quot;$errorsto\\&quot; \\&quot;$body\\&quot;&quot; ); it sends the email but I still don&#39;t capture the output. What am I missing? When I call readpipe( &#39;ls&#39; ) I can capture the output. But not with sendmail. ???"}, {"owner": {"reputation": 814, "user_id": 1753389, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/5DPUE.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/1753389/peter"}, "edited": false, "score": 0, "creation_date": 1433354526, "post_id": 30626357, "comment_id": 49320716, "body": "I&#39;m making progress. When I do this:          $res = readpipe( &quot;./sendemail.pl \\&quot;$from\\&quot; \\&quot;$subject\\&quot; \\&quot;$to\\&quot; \\&quot;$bcc\\&quot; \\&quot;$errorsto\\&quot; \\&quot;$copyofbody\\&quot; &gt; log.txt 2&gt;&amp;1&quot; );  I find that the output redirects to log.txt.  Now how do I get it into a variable?"}], "tags": [], "owner": {"reputation": 1354, "user_id": 1653270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c57d3d99827c5e6cdf0880292769472?s=128&d=identicon&r=PG", "display_name": "michael501", "link": "https://stackoverflow.com/users/1653270/michael501"}, "is_accepted": false, "score": 0, "last_activity_date": 1433350941, "creation_date": 1433350941, "answer_id": 30626357, "question_id": 30625841, "link": "https://stackoverflow.com/questions/30625841/capture-the-dialog-between-sendmail-and-smtp-server/30626357#30626357", "title": "Capture the dialog between sendmail and SMTP server", "body": "<p>Try this :</p>\n\n<pre><code> open(MAIL, \"|$sendmail -oi -t -v -v\");\n print MAIL \"From: $from\\n\";\n\n # redirect your script to get  all messages.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 814, "user_id": 1753389, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/5DPUE.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/1753389/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1433366642, "creation_date": 1433366642, "answer_id": 30631025, "question_id": 30625841, "link": "https://stackoverflow.com/questions/30625841/capture-the-dialog-between-sendmail-and-smtp-server/30631025#30631025", "title": "Capture the dialog between sendmail and SMTP server", "body": "<p>The best solution I can find is to redirect STDOUT to a file, then redirect STDERR to STDOUT and finally read the file into a variable which I then use.</p>\n\n<p>Bizarrely, when I redirect to a variable instead of a file, only STDOUT gets redirected but not STDERR.</p>\n"}], "owner": {"reputation": 814, "user_id": 1753389, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/5DPUE.jpg?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/1753389/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433366642, "creation_date": 1433349226, "last_edit_date": 1433361978, "question_id": 30625841, "link": "https://stackoverflow.com/questions/30625841/capture-the-dialog-between-sendmail-and-smtp-server", "title": "Capture the dialog between sendmail and SMTP server", "body": "<p>My objective is to verify undeliverables on the fly and update my database accordingly when sending emails.</p>\n\n<p>I am using <code>sendmail</code> like so</p>\n\n<pre><code>open(MAIL, \"|$sendmail -oi -t -v\");\nprint MAIL \"From: $from\\n\";\n</code></pre>\n\n<p>In verbose mode I get all the feedback from the remote server and can see the return codes when the recipient is not recognised. Unfortunately I have been unable to capture this text.</p>\n\n<p>I have tried [<code>Capture::Tiny</code>][Capture::Tiny] with no success. The output prints to the screen and the capture variable is empty.</p>\n\n<p>I have tried [<code>Mail::Sender</code>][Mail::Sender] with no success. It returns an OK response even when the recipient is undeliverable.</p>\n\n<p>I have tried all the commonly used techniques of redirecting <code>STDOUT</code> but sendmail always prints to the screen and my capture variable is always empty.</p>\n\n<p>I have tried [<code>Net::SMTP</code>][Net::SMTP] with no success. <code>$smtp-&gt;message()</code> does not return any information that would allow me to identify undeliverables.</p>\n\n<p>I have queried <code>$?</code> after printing to <code>sendmail</code>, but it always has a zero value.</p>\n\n<p>If I could capture the dialogue between <code>sendmail</code> and the remote SMTP server, I could parse it and identify undeliverables.</p>\n\n<p>Has anyone done this with success, and if so, how?</p>\n\n<p><strong>Afternote</strong></p>\n\n<p>I am aware that there are many reasons why a mail may not be delivered and it may take hours before a definitive response can be obtained. However the vast majority of my undeliverables are simply recipient not recognised and these can be handled immediately. This is what I am trying to do.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>I have continued working on this and have added the following code:</p>\n\n<pre><code>open(SAVEOUT, \"&gt;&amp;STDOUT\");\nopen(SAVEERR, \"&gt;&amp;STDERR\");\nclose(STDOUT);\nclose(STDERR);\nopen(STDOUT, '&gt;', \\$output) or die $!;\nopen(STDERR, \"&gt;&amp;STDOUT\") or die $!;\nprint \"error\\n\";\nprint STDOUT \"out\\n\";\nopen(MAIL, \"|$sendmail -oi -t -v\");\nprint MAIL \"From: $from\\n\";\n[...]\nclose( MAIL);\n</code></pre>\n\n<p>After closing MAIL, $output contains 'error' and 'out'. But id does not contain the output of sendmail, which no longer displays in the terminal because STDERR has been redirected. So the contents of $output demonstrate that STDERR has been redirected, the absence of sendmail output in the terminal demonstrates that sendmail is writing to STDERR, but we still can't capture the output from sendmail!</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1433351640, "creation_date": 1433351640, "answer_id": 30626582, "question_id": 30625839, "link": "https://stackoverflow.com/questions/30625839/replacing-xml-nodes-using-perl-and-mojodom/30626582#30626582", "title": "Replacing XML nodes using perl and Mojo::DOM", "body": "<p>It's very simple to just find the <code>&lt;div&gt;</code> element and use the <code>tag</code> method to change its tag</p>\n\n<p>This program demonstrates. The CSS selector <code>html &gt; div</code> finds the (first) <code>&lt;div&gt;</code> element that is a child of an <code>&lt;html&gt;</code> element</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Mojo::DOM;\n\nmy $xml = q~\n&lt;html&gt;\n    &lt;div&gt;\n        &lt;p&gt;1&lt;/p&gt;\n        &lt;p&gt;2&lt;/p&gt;\n        &lt;img /&gt;\n    &lt;/div&gt;\n&lt;/html&gt;\n~;\n\nmy $dom = Mojo::DOM-&gt;new($xml);\n\n$dom-&gt;at('html &gt; div')-&gt;tag('body');\n\nprint $dom, \"\\n\";\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>    &lt;html&gt;\n        &lt;body&gt;\n            &lt;p&gt;1&lt;/p&gt;\n            &lt;p&gt;2&lt;/p&gt;\n            &lt;img&gt;\n        &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 809, "user_id": 1151718, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/eb6505c0711f36325e0d1d68d73b4f82?s=128&d=identicon&r=PG", "display_name": "capfan", "link": "https://stackoverflow.com/users/1151718/capfan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 30626582, "answer_count": 1, "score": 0, "last_activity_date": 1433351640, "creation_date": 1433349211, "last_edit_date": 1433349951, "question_id": 30625839, "link": "https://stackoverflow.com/questions/30625839/replacing-xml-nodes-using-perl-and-mojodom", "title": "Replacing XML nodes using perl and Mojo::DOM", "body": "<p>I would like to exchange node in an XML file using <a href=\"https://metacpan.org/pod/Mojo::DOM\" rel=\"nofollow\">Mojo::DOM</a>. \nI'm pretty sure it is possible but I didn't find a way yet.</p>\n\n<p>Given the following XML:</p>\n\n<pre><code>my $xml = q~\n&lt;html&gt;\n    &lt;div&gt;\n        &lt;p&gt;1&lt;/p&gt;\n        &lt;p&gt;2&lt;/p&gt;\n        &lt;img /&gt;\n    &lt;/div&gt;\n&lt;/html&gt;\n~;\n</code></pre>\n\n<p>I would like to remove the div and instead insert a body tag, so that the result looks like this:</p>\n\n<pre><code>my $xml = q~\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;p&gt;1&lt;/p&gt;\n        &lt;p&gt;2&lt;/p&gt;\n        &lt;img /&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n~;\n</code></pre>\n\n<p>I thought about replace, but I didn't find an example where the replacement is the $dom of the replaced tag.</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1433346547, "post_id": 30624819, "comment_id": 49315849, "body": "Did you call <code>main</code>, or just define it?"}, {"owner": {"reputation": 384453, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1433346610, "post_id": 30624819, "comment_id": 49315883, "body": "Since the <code>perl</code> script just takes an output file name as an argument, you don&#39;t need to pre-create the file; just pass <code>&quot;test.hex&quot;</code> as the second argument , not <code>file</code>."}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 3, "last_activity_date": 1433346591, "creation_date": 1433346591, "answer_id": 30624928, "question_id": 30624819, "link": "https://stackoverflow.com/questions/30624819/how-to-invoke-a-perl-script-that-need-args-from-python/30624928#30624928", "title": "How to invoke a Perl script that need args from Python", "body": "<p>You cannot just give it a filehandle (or whatever that is called in Python). You are constructing a call to another program, and that program expects a filename, so pass the filename as a string.</p>\n\n<pre><code>subprocess.call([\"perl\", \"conv_intel_hex_2_verilog.pl\", input ,\"test.hex\"]);\n</code></pre>\n\n<p>You also don't need to open the file first.</p>\n"}, {"tags": [], "owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "is_accepted": true, "score": 4, "last_activity_date": 1433346607, "creation_date": 1433346607, "answer_id": 30624933, "question_id": 30624819, "link": "https://stackoverflow.com/questions/30624819/how-to-invoke-a-perl-script-that-need-args-from-python/30624933#30624933", "title": "How to invoke a Perl script that need args from Python", "body": "<p>As you've described it, the program you're running expects its second argument to be the name of a file, so that's what you need to give it. In your current code, you're giving it a Python file object, which is not the same as the string name of a file.</p>\n\n<pre><code>subprocess.call([\"perl\", \"conv_intel_hex_2_verilog.pl\", input, \"test.hex\"]);\n</code></pre>\n\n<p>There is no need to create the file object prior to running that code, either. The other program will surely create it for you, and might even balk if it finds that the file already exists.</p>\n"}], "owner": {"reputation": 245, "user_id": 4273382, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd236e189dd8b635132124c6d57a6883?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4273382/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1548, "favorite_count": 0, "accepted_answer_id": 30624933, "answer_count": 2, "score": 0, "last_activity_date": 1565139931, "creation_date": 1433346277, "last_edit_date": 1565139931, "question_id": 30624819, "link": "https://stackoverflow.com/questions/30624819/how-to-invoke-a-perl-script-that-need-args-from-python", "title": "How to invoke a Perl script that need args from Python", "body": "<p>I'm writing my script in Python, and I want to invoke a Perl script from it.</p>\n\n<p>This is the line I want to call:</p>\n\n<pre><code>perl conv_intel_hex_2_verilog.pl arg1 arg2\n</code></pre>\n\n<p>while arg1 is the input from the Python script and arg2 is a new file that I'm creating.</p>\n\n<p>So far I have this:</p>\n\n<pre><code>def main(argv):\n    file  = open(\"test.hex\", \"w\")\n    input = argv[0];\n    subprocess.call([\"perl\", \"conv_intel_hex_2_verilog.pl\", input]);\n    file.close();\n</code></pre>\n\n<p>This runs and does nothing.</p>\n\n<p>And when I'm changing the</p>\n\n<pre><code>subprocess.call([\"perl\", \"conv_intel_hex_2_verilog.pl\", input]);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>subprocess.call([\"perl\", \"conv_intel_hex_2_verilog.pl\", input ,file]);\n</code></pre>\n\n<p>it doesn't compile...</p>\n"}, {"tags": ["perl", "subroutine"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1433343411, "post_id": 30623603, "comment_id": 49313330, "body": "Single quotes don&#39;t interpolate variables. Use double quotes."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433344278, "post_id": 30623603, "comment_id": 49314045, "body": "<code>my ($self, $okey, $ikey)  = (@_, (&quot;&quot;) x 3-@_);</code>"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1433344356, "post_id": 30623603, "comment_id": 49314115, "body": "@\u0421\u0443\u0445\u043e\u043927 That&#39;s a little confusing to read. For me at least :|"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1433344443, "post_id": 30623603, "comment_id": 49314192, "body": "@HunterMcMillen yes, that&#39;s why I didn&#39;t write it as answer. Your approach is simpler and better."}], "answers": [{"tags": [], "owner": {"reputation": 758, "user_id": 4086509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmXxF.png?s=128&g=1", "display_name": "Sue D. Nymme", "link": "https://stackoverflow.com/users/4086509/sue-d-nymme"}, "is_accepted": false, "score": 1, "last_activity_date": 1433343717, "creation_date": 1433343717, "answer_id": 30623837, "question_id": 30623603, "link": "https://stackoverflow.com/questions/30623603/perl-function-call-with-arguments/30623837#30623837", "title": "perl function call with arguments", "body": "<p>Assign them the empty string if they're not set:</p>\n\n<pre><code>unless (defined $okey  &amp;&amp;  defined $ikey)\n{\n    $okey = $ikey = \"\";\n}\n</code></pre>\n\n<p>Also, as <code>choroba</code> pointed out, you need double quotes in your <code>execute</code> call, not single quotes.</p>\n"}, {"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 4, "last_activity_date": 1433344227, "last_edit_date": 1433344227, "creation_date": 1433343748, "answer_id": 30623852, "question_id": 30623603, "link": "https://stackoverflow.com/questions/30623603/perl-function-call-with-arguments/30623852#30623852", "title": "perl function call with arguments", "body": "<p>If you want them to be optional you need to actually write support for that in your <code>gre_testing</code> subroutine:</p>\n\n<pre><code>sub gre_testing {\n    my ($self, $okey, $ikey)  = @_;\n\n    # if these arguments are not passed\n    # use the empty string so no value is interpolated below\n    $okey //= ''; \n    $ikey //= ''; \n\n    $self-&gt;execute(\n       \"iptunnel add obs mode gre remote x.x.x.x local X.X.X.X ttl 225 $okey $ikey\"\n    ); \n    return 1;\n} \n</code></pre>\n\n<p>Another issue is that the string you are passing to execute is quoted with single quotes, so none of your variables will be interpolated. Use double-quotes. </p>\n\n<p>Now in the case that you don't want <code>$okey</code> and <code>$ikey</code> you simply say:</p>\n\n<pre><code>$self-&gt;gre_testing();\n</code></pre>\n\n<p>I noticed you defined <code>$self</code> above, but did not invoke your method on an object. I imagine you want to do this otherwise you will get an error when you try to <code>$self-&gt;execute(..)</code></p>\n"}], "owner": {"reputation": 173, "user_id": 3587025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dceb16be8b88ea27250fed2644f9e370?s=128&d=identicon&r=PG&f=1", "display_name": "user3587025", "link": "https://stackoverflow.com/users/3587025/user3587025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433344227, "creation_date": 1433343148, "question_id": 30623603, "link": "https://stackoverflow.com/questions/30623603/perl-function-call-with-arguments", "title": "perl function call with arguments", "body": "<p>I have written a function to execute a command on a remote machine.</p>\n\n<pre><code>Command : iptunnel add obs mode gre remote x.x.x.x local X.X.X.X ttl 225 $okey $ikey\n</code></pre>\n\n<p><code>$okey $ikey</code> values are passed as  arguments. </p>\n\n<p>Now ,Sometimes I want to execute the command WITHOUT $okey and $ikey values.</p>\n\n<pre><code>Command : iptunnel add obs mode gre remote x.x.x.x local X.X.X.X ttl 225\n</code></pre>\n\n<p>Now my question is ,How do i pass the $okey and $ikey values as optional arguments. If $okey and $ ikey values are NOT passed then the below command must be executed.</p>\n\n<pre><code>iptunnel add obs mode gre remote x.x.x.x local X.X.X.X ttl 225\n</code></pre>\n\n<p>If $okey and $ ikey values are passed then the following command must be executed.</p>\n\n<pre><code>iptunnel add obs mode gre remote x.x.x.x local X.X.X.X ttl 225 $okey $ikey\n</code></pre>\n\n<p>Function :</p>\n\n<pre><code> sub gre_testing {\n        my ($self,$okey,$ikey)  = @_;\n        $self-&gt;execute('iptunnel add obs mode gre remote x.x.x.x local X.X.X.X ttl 225 $okey $ikey'); \n        return 1;\n } \n</code></pre>\n\n<p>Function call :</p>\n\n<pre><code>gre_testing(1000,1000);\n</code></pre>\n"}, {"tags": ["perl", "perl-module", "cpan", "devel-cover", "metacpan"], "answers": [{"tags": [], "owner": {"reputation": 411, "user_id": 1030987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b766563b73ab8bac01ce0e3811c9cea7?s=128&d=identicon&r=PG", "display_name": "pjcj", "link": "https://stackoverflow.com/users/1030987/pjcj"}, "is_accepted": false, "score": 2, "last_activity_date": 1433629818, "creation_date": 1433629818, "answer_id": 30688213, "question_id": 30623294, "link": "https://stackoverflow.com/questions/30623294/in-develcoverreportdb-what-does-12-and-13-format-means/30688213#30688213", "title": "In Devel::CoverReport::DB what does .12 and .13 format means?", "body": "<p>The 12, 13 and 14 are the version numbers of the coverage DB.  It looks like Devel::CoverReport is reading the DB directly rather than going through the Devel::Cover API.</p>\n\n<p>So it seems that you won't be able to use this module until the author, or someone else, modifies it.  The changes from v13 to v14 were minimal, so a fix to read the v14 DB files would probably not be too difficult.  But the real fix is to use the Devel::Cover API so that things would still work when the DB moves to v15.</p>\n"}], "owner": {"reputation": 25, "user_id": 3101852, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/00154fc9bc7b5b8d3d1259947aec0947?s=128&d=identicon&r=PG&f=1", "display_name": "user3101852", "link": "https://stackoverflow.com/users/3101852/user3101852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1433629818, "creation_date": 1433342455, "last_edit_date": 1433399246, "question_id": 30623294, "link": "https://stackoverflow.com/questions/30623294/in-develcoverreportdb-what-does-12-and-13-format-means", "title": "In Devel::CoverReport::DB what does .12 and .13 format means?", "body": "<p>I am generating coverage using \"Devel::Cover\" cpan module, which generates cover_db and has a runs subdirecoty inside. Inside run directory i am getting the file cover.14. How to get .12 or .13 format file and what does this .12, .13 or .14 format means ?? When i am generating html report of this file using cover_report of \"Devel::CoverReport\" module it is mentioned as per below subroutine of the module like it supports .12 and .13 format but i am getting .14 format </p>\n\n<p>The below is the subroutine that is used in Devel::CoverReport::DB which shows .12 or .13 format.</p>\n\n<blockquote>\n  <p>read_db_file</p>\n  \n  <blockquote>\n    <p>Read and parse DB file, then return data structure as it is in the file.</p>\n    \n    <p>By default, it assumes, that file is a storeble data dump. When storable fails, it will try to use JSON to load the data.</p>\n    \n    <p>This method supports reading .12 and .13 file formats. It can auto-detect if it was serialized with storable or JSON. </p>\n  </blockquote>\n</blockquote>\n\n<p>If possible explain what this subroutine is means.</p>\n"}, {"tags": ["perl", "voip", "perl-module", "freeradius"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4758498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JyMjC.jpg?s=128&g=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/4758498/faisal"}, "edited": false, "score": 0, "creation_date": 1433487431, "post_id": 30644593, "comment_id": 49382799, "body": "this is not the issue i already have perl in small but i also try it with capital one. Actually i don&#39;t have the rlm_perl.so file. I don&#39;t know how to install the .so file. please help me in this."}, {"owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "reply_to_user": {"reputation": 23, "user_id": 4758498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JyMjC.jpg?s=128&g=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/4758498/faisal"}, "edited": false, "score": 0, "creation_date": 1433528860, "post_id": 30644593, "comment_id": 49408659, "body": "You need libperl.so, the perl binary EXTERN.h and perl.h else the build system will not build rlm_perl. Check you have the perl libraries and development headers installed."}, {"owner": {"reputation": 23, "user_id": 4758498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JyMjC.jpg?s=128&g=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/4758498/faisal"}, "edited": false, "score": 0, "creation_date": 1433747214, "post_id": 30644593, "comment_id": 49463873, "body": "what perl libraries i have to check? I have already installed dev package for perl"}], "tags": [], "owner": {"reputation": 5076, "user_id": 2117998, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/33e568baba35cd1512dcd8adacc393d7?s=128&d=identicon&r=PG", "display_name": "Arran Cudbard-Bell", "link": "https://stackoverflow.com/users/2117998/arran-cudbard-bell"}, "is_accepted": false, "score": 0, "last_activity_date": 1433423050, "creation_date": 1433423050, "answer_id": 30644593, "question_id": 30622995, "link": "https://stackoverflow.com/questions/30622995/freeradius-3-0-8-installation-error-of-rlm-perl/30644593#30644593", "title": "FreeRadius 3.0.8 installation error of rlm_perl", "body": "<p>It should be 'perl' not 'Perl' (you have the capitalisation wrong).</p>\n"}], "owner": {"reputation": 23, "user_id": 4758498, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JyMjC.jpg?s=128&g=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/4758498/faisal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1053, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433433071, "creation_date": 1433341754, "last_edit_date": 1592644375, "question_id": 30622995, "link": "https://stackoverflow.com/questions/30622995/freeradius-3-0-8-installation-error-of-rlm-perl", "title": "FreeRadius 3.0.8 installation error of rlm_perl", "body": "<p>I have installed freeradius 3.0.8 and I want to integrate or connect it with perl and for that I enter perl in /usr/local/etc/raddb/mods-available/perl and /usr/local/etc/raddb/sites-available/default is also edited as per instructions on <a href=\"http://wiki.freeradius.org/modules/Rlm_perl\" rel=\"nofollow noreferrer\">http://wiki.freeradius.org/modules/Rlm_perl</a>.</p>\n<p>After entering <code>radiusd -Xxx</code>, I got the following error:</p>\n<blockquote>\n<p>-Wed Jun  3 18:43:10 2015 : Error: /usr/local/etc/raddb/sites-enabled/default[477]: Failed to find &quot;Perl&quot; as a module or policy.</p>\n<p>-Wed Jun  3 18:43:10 2015 : Error: /usr/local/etc/raddb/sites-enabled/default[477]: Please verify that the configuration exists in /usr/local/etc/raddb/mods-enabled/Perl.</p>\n<p>-Wed Jun  3 18:43:10 2015 : Error: /usr/local/etc/raddb/sites-enabled/default[447]: Errors parsing authenticate section.</p>\n</blockquote>\n<p>However, I also created symbolic link and the error pasted above is after creating symbolic link.</p>\n<p>Please help me in resolving this issue.</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 2, "creation_date": 1433341159, "post_id": 30622356, "comment_id": 49311565, "body": "Take a look at <a href=\"http://search.cpan.org/~bingos/Module-Load-Conditional-0.64/lib/Module/Load/Conditional.pm\" rel=\"nofollow noreferrer\">Module::Load::Conditional</a>."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1433341899, "post_id": 30622356, "comment_id": 49312136, "body": "&quot;I&#39;d prefer for this to be largely a packaging exercise&quot; I&#39;m not quite sure what you mean by this, but ExtUtils::MakeMaker and Module::Build both allow you to specify the minimum required version of dependencies; the check happens at install time. In your code, you can do <code>use Module VERSION;</code> to specify the minimum required version of <code>Module</code>."}, {"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "edited": false, "score": 0, "creation_date": 1433342301, "post_id": 30622356, "comment_id": 49312457, "body": "use Module VERSION doesn&#39;t allow me to specify a particular version of a library, it just fails to load if a minimum version isn&#39;t available.  I want to have module A require version 1.2.0 of module B and module C require version 2.1.1 of module B.  i.e. different things using different versions of a module (yes the different versions need to be installed and available)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1433342475, "post_id": 30622356, "comment_id": 49312592, "body": "@skarface &quot;I want to have module A require version 1.2.0 of module B and module C require version 2.1.1 of module B&quot; Are you saying you want to use different versions of the same module simultaneously in your application?"}, {"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433342749, "post_id": 30622356, "comment_id": 49312797, "body": "@ThisSuitIsBlackNot  Yes.  If I have module A that&#39;s been written against the version 1 API of module B, and the version 1 API is still supported, I&#39;d like to allow module A to continue to use the version 1 API and leave module C free to use version 2 of module B&#39;s API.  I&#39;m not sure if this is even possible, but I&#39;ve really liked the way node/npm  handles this, and was trying to see if perl could do the same or similar.  I&#39;m not looking to install the modules globally, having them be installed in a directory local to the module using the particular version is fine.  Carton seems to get close."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1433342810, "post_id": 30622356, "comment_id": 49312831, "body": "@skarface I would <a href=\"https://stackoverflow.com/posts/30622356/edit\">edit</a> your question to clarify that point."}, {"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433343078, "post_id": 30622356, "comment_id": 49313049, "body": "@ThisSuitIsBlackNot  done.  Thanks for the recommendation."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1433343287, "post_id": 30622356, "comment_id": 49313224, "body": "I&#39;m not sure it&#39;s possible in every case. In Perl, you can&#39;t have two versions of the same subroutine in the same namespace, so using the module in a different version would overwrite the subroutines of the same names."}], "answers": [{"comments": [{"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "edited": false, "score": 0, "creation_date": 1433350117, "post_id": 30624316, "comment_id": 49318038, "body": "hmm, that may work nicely.  it&#39;s not strictly a web facing API (there is some of that) it&#39;s mostly module to module."}, {"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "edited": false, "score": 0, "creation_date": 1433515780, "post_id": 30624316, "comment_id": 49401187, "body": "I think this is the direction I&#39;d have to go ... this kinda worked <a href=\"https://gist.github.com/skarfacegc/5f69a92ea2e891d1575a\" rel=\"nofollow noreferrer\">gist.github.com/skarfacegc/5f69a92ea2e891d1575a</a>  but the namespace collision stops it from working.  Whatever version of the module that loads first wins (even if different modules ask for a different version)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "edited": false, "score": 0, "creation_date": 1433516593, "post_id": 30624316, "comment_id": 49401810, "body": "Well if all of those modules are under your controll you can still copy and rename them to have one in each possible version also. If not, well."}, {"owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "edited": false, "score": 1, "creation_date": 1433532658, "post_id": 30624316, "comment_id": 49410500, "body": "Yeah, I (well, my team) controls all of the code we&#39;d want to version.  I like the idea of Module::v1.1.0::Module over Module-v1.0.0 since the previous keeps the actual to level source directories a bit cleaner.  Thanks for the suggestion."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1433344952, "creation_date": 1433344952, "answer_id": 30624316, "question_id": 30622356, "link": "https://stackoverflow.com/questions/30622356/loading-a-specific-version-of-a-perl-module/30624316#30624316", "title": "Loading a specific version of a perl module", "body": "<p>I have solved this in the past by having a copy of the dependency in all versions, with the version in the namespace. That seems like it's code-duplication, but it's really just making sure you provide a stable API without relying on all the loading.</p>\n\n<pre><code>API::Version1::Dependency\nAPI::Version2::Dependency\n</code></pre>\n\n<p>If we are talking a web-faced API (maybe REST), you can have your APIs be seperate processes so they don't get conflicts of loading stuff, and call them with something like <code>http://www.example.org/api/1/frobnicate</code></p>\n"}], "owner": {"reputation": 850, "user_id": 258130, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8ffcb13424f6eae71cd96a1c1a7c1d2c?s=128&d=identicon&r=PG", "display_name": "skarface", "link": "https://stackoverflow.com/users/258130/skarface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 30624316, "answer_count": 1, "score": 4, "last_activity_date": 1433344952, "creation_date": 1433340054, "last_edit_date": 1495535212, "question_id": 30622356, "link": "https://stackoverflow.com/questions/30622356/loading-a-specific-version-of-a-perl-module", "title": "Loading a specific version of a perl module", "body": "<p>I'm looking for a way for a module (or script) to be able to load a specific version of a module (mainly looking at in-house modules, if the solution doesn't work with CPAN modules that's ok). </p>\n\n<p>I'd prefer for this to be largely a packaging exercise (like the way npm/nodejs works).  My code defines the versions of the module it wants, then when the use happens the correct module version is loaded.</p>\n\n<p>If it can't be done at the packaging level, is there a sane way to handle this in code?  I really don't want to litter the module (or the module's USE-er) with </p>\n\n<pre><code>if($api_ver eq '1.1'){    }\nelsif($ap_ver eq '2.0') {  }\n</code></pre>\n\n<p>More generally, I'm trying to come up with a sane way to track versioned APIs at the module level.</p>\n\n<p>I looked at <code>only</code> per this post <a href=\"https://stackoverflow.com/questions/14332254/how-can-i-use-specific-version-of-a-perl-cpan-module\">How can I &#39;use&#39; specific version of a perl CPAN module?</a> but the unit test report is fairly bad, and the module hasn't been touched in 6 years as far as I can tell  (still on my list to play with though)</p>\n\n<p>Edit:  Essentially I'm asking if different modules in my application can use different versions of the same module. Something like:</p>\n\n<pre><code>Module A\n   load version 1.0.1 of Module Foo\n\nModule B\n   load version 2.1.0 of Module Foo\n</code></pre>\n\n<p>Module A &amp; B are part of a larger piece of software and Module Foo is also locally written (as I said, I'm less concerned about CPAN versions)  I'd like to be able to make API breaking changes to Module Foo without having to uplift every module that uses it.  Yes, eventually version 1 of module Foo may end up deprecated, and code would have to be uplifted at that time.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1433340798, "post_id": 30622283, "comment_id": 49311267, "body": "this <code>s&#47;\\s.*&#47;&#47;g;</code> also does not work, am I missing something simple here?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433340874, "post_id": 30622283, "comment_id": 49311336, "body": "Works for me - outputs <code>123</code> when you run it."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1433340768, "creation_date": 1433340768, "answer_id": 30622639, "question_id": 30622283, "link": "https://stackoverflow.com/questions/30622283/using-sed-command-to-split-string-on-regex/30622639#30622639", "title": "using sed command to split string on regex", "body": "<p>OK, the trick with regex in general and perl in specific is being able to capture pieces of a regex. </p>\n\n<p>So in your example:</p>\n\n<pre><code>my $command_output = \"1243 test.txt\"; \nmy ( $command_code ) = ( $command_output =~ m/^(\\d+)/ );\nprint $command_code,\"\\n\";\n</code></pre>\n\n<p>This will 'capture' \"one or more digits\" and insert it into <code>$command_code</code>. </p>\n\n<p>This works quite nicely for parsing <code>STDIN</code> because you can read it via a while loop:</p>\n\n<pre><code>while ( &lt;STDIN&gt; ) {\n   my ( $command_code ) = m/^(\\d+)/;\n   print $command_code,\"\\n\"; \n}\n</code></pre>\n\n<p>When you capture with a regex - using brackets - it returns an array. We cheat a little, and assign the <em>first</em> element of that array to <code>$command_code</code> and discard anything else. Because there's only one match, that's fine. But you could capture more, if you wanted. </p>\n\n<p><em>by default</em> if no 'match target' is specified, <code>perl</code> uses the implicit variable <code>$_</code> in the match - which is assigned to 'the current line' in this <code>while</code> construct. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "is_accepted": false, "score": 0, "last_activity_date": 1433340981, "creation_date": 1433340981, "answer_id": 30622726, "question_id": 30622283, "link": "https://stackoverflow.com/questions/30622283/using-sed-command-to-split-string-on-regex/30622726#30622726", "title": "using sed command to split string on regex", "body": "<p>The issue was ideone. I created a simple perl script on my windows machine and ran it through Cygwin. It works great.</p>\n\n<p>Here is what I finished with:</p>\n\n<pre><code>my $command_return = '123 test.txt';\nprint \"the string to run sed command on: $command_return\";\n$command_return =~ s/\\s.*//g;\nprint \"\\n$command_return\";\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2993456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "closed_date": 1433363695, "accepted_answer_id": 30622639, "answer_count": 2, "score": 0, "last_activity_date": 1433340981, "creation_date": 1433339861, "last_edit_date": 1433339913, "question_id": 30622283, "link": "https://stackoverflow.com/questions/30622283/using-sed-command-to-split-string-on-regex", "closed_reason": "Needs details or clarity", "title": "using sed command to split string on regex", "body": "<p>I have been testing the sed command's functionality in ideone. I just want to use it to perform a regex match on a string, and then save only the portion of that string which matches back into that string variable.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>my $command_return = '123 test.txt';\n$command_return =~ s/'\\s.*'//g;\nprint $command_return;\n</code></pre>\n\n<p>In the real world, I will be using this to parse the results of a Linux system command. For testing, I just want to parse the string which you see above.</p>\n"}, {"tags": ["linux", "apache", "perl"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1433341822, "post_id": 30622110, "comment_id": 49312080, "body": "Does this thread help? <a href=\"http://stackoverflow.com/questions/5301776/directory-index-forbidden-by-options-directive\" title=\"directory index forbidden by options directive\">stackoverflow.com/questions/5301776/&hellip;</a>"}, {"owner": {"reputation": 313, "user_id": 3829086, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/15358ac3a1f4a45b835aea23ff065501?s=128&d=identicon&r=PG&f=1", "display_name": "user3829086", "link": "https://stackoverflow.com/users/3829086/user3829086"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1433342445, "post_id": 30622110, "comment_id": 49312567, "body": "I have tried above solution provided in stackoverflow.com/questions/5301776/ , I have added  Options  +Indexes in .htaccess file. But dint work for me"}], "owner": {"reputation": 313, "user_id": 3829086, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/15358ac3a1f4a45b835aea23ff065501?s=128&d=identicon&r=PG&f=1", "display_name": "user3829086", "link": "https://stackoverflow.com/users/3829086/user3829086"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1433342792, "answer_count": 0, "score": 0, "last_activity_date": 1433339439, "creation_date": 1433339439, "question_id": 30622110, "link": "https://stackoverflow.com/questions/30622110/directory-index-forbidden-by-options-directive-var-www-html-phoenix-cgi-bin-e", "closed_reason": "Duplicate", "title": "Directory index forbidden by Options directive: /var/www/html/Phoenix/cgi-bin/ Error in file upload", "body": "<p>I am trying to upload the file in UI using uploadify plugin. But file upload is not happening. I have given all file permission to all file.\n In  apache error log is showing following error :</p>\n\n<pre><code>Directory index forbidden by Options directive: /var/www/html/Phoenix/cgi-bin/, referer: http://m5labncibmsrv006.gcsc.att.com/Phoenix/uploadify/uploadify.swf?preventswfcaching=1433338019400\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1433338927, "post_id": 30621694, "comment_id": 49309758, "body": "<a href=\"http://p3rl.org/Number::Format\" rel=\"nofollow noreferrer\">Number::Format</a>"}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1433340819, "post_id": 30621694, "comment_id": 49311280, "body": "@choroba, thanks for your reply! but i was not able to install Number::Format. I have windows, so i would us regex. (also also xml::Twig i was unable to instal this module. greats @r"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1433341466, "post_id": 30621694, "comment_id": 49311806, "body": "How did you try to install it? What error did you get?"}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1433342328, "post_id": 30621694, "comment_id": 49312483, "body": "@Choroba, Thanks for your reply. I m not in remember. but i will do evinig and i open en news topic. at this moment i would so: .format_picture($number, &#39;## ### ### ###&#39;) ????? greats @r"}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433339014, "post_id": 30621822, "comment_id": 49309858, "body": "<a href=\"https://regex101.com/r/kQ3vQ0/3\" rel=\"nofollow noreferrer\">Here it will fail</a>."}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433339164, "post_id": 30621822, "comment_id": 49309986, "body": "@stribizhev I knew someone would point that out.. I must say.., unclear question!"}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433340161, "post_id": 30621822, "comment_id": 49310760, "body": "Hi to all. many thanks for your reply! The stuff from @stribiz works fin, but not individuelle. iha have used: oderwise with padre &quot; #!/usr/bin/perl  my $ins = &quot;14589965321&quot;; $ins =~ (?&lt;=\\d)(?&lt;=(\\d{3})); print &quot;$ins\\n&quot;;  This is unmatched. please i need ifo wy?"}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433341545, "post_id": 30621822, "comment_id": 49311864, "body": "@stribiz i can see :You seem to be using an outdated version of your browser which is no longer supported by regex101.com. It is highly recommended that you upgrade your browser. Sorry for the inconvenience."}], "tags": [], "owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "is_accepted": false, "score": 0, "last_activity_date": 1433338775, "creation_date": 1433338775, "answer_id": 30621822, "question_id": 30621694, "link": "https://stackoverflow.com/questions/30621694/use-perl-regex-to-insert-spaces-into-numbers/30621822#30621822", "title": "Use Perl regex to insert spaces into numbers", "body": "<p>You can use the following to match:</p>\n\n<pre><code>(?&lt;=\\d)(?=(\\d{3}))\n</code></pre>\n\n<p>And replace with <code>[ ]</code> (space)</p>\n\n<p>See <a href=\"https://regex101.com/r/kQ3vQ0/2\" rel=\"nofollow\">DEMO</a></p>\n"}, {"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433342131, "post_id": 30621910, "comment_id": 49312326, "body": "@Arnold: What do you mean? <a href=\"https://ideone.com/3cfFsL\" rel=\"nofollow noreferrer\">Here is an example code for <code>14589965321</code></a>. My regex works as expected. And regex101.com is working well in my browser, <a href=\"https://regex101.com/r/mY3fF0/1\" rel=\"nofollow noreferrer\">here is a demo</a>."}, {"owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "edited": false, "score": 0, "creation_date": 1433348196, "post_id": 30621910, "comment_id": 49316927, "body": "soorry &quot;1. 1. &quot; my error. all ist the beste Many thanks to Polska!! @r"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "edited": false, "score": 0, "creation_date": 1433361081, "post_id": 30621910, "comment_id": 49324507, "body": "You are welcome. Please consider also upvoting if my answer proved useful to you. :)"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 0, "last_activity_date": 1433338980, "creation_date": 1433338980, "answer_id": 30621910, "question_id": 30621694, "link": "https://stackoverflow.com/questions/30621694/use-perl-regex-to-insert-spaces-into-numbers/30621910#30621910", "title": "Use Perl regex to insert spaces into numbers", "body": "<p>You can use the following regex:</p>\n\n<pre><code>(\\d)(?=(\\d{3})+(?!\\d))\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/yY0iH3/1\" rel=\"nofollow\">regex demo</a> and <a href=\"https://ideone.com/wcQCQJ\" rel=\"nofollow\">IDEONE demo</a></p>\n\n<pre><code>#!/usr/bin/perl\n# your code goes here\nmy $ins = \"1290        15      46\\n372         4       -1914\\n670         8       -894\\n1016        12      554\";\n$ins =~ s/(\\d)(?=(\\d{3})+(?!\\d))/$1 /g;\nprint \"$ins\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1 290        15      46\n372          4       -1 914\n670          8       -894\n1 016        12      554\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4723683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bc63a2632bcb4e9eb611390e83adf143?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold", "link": "https://stackoverflow.com/users/4723683/arnold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1433350399, "accepted_answer_id": 30621910, "answer_count": 2, "score": -1, "last_activity_date": 1433361187, "creation_date": 1433338489, "last_edit_date": 1433361187, "question_id": 30621694, "link": "https://stackoverflow.com/questions/30621694/use-perl-regex-to-insert-spaces-into-numbers", "closed_reason": "Needs details or clarity", "title": "Use Perl regex to insert spaces into numbers", "body": "<p>I have the following text data:</p>\n\n<pre><code>1290        15      46 \n372         4       -1914 \n670         8       -894 \n1016        12      554 \n</code></pre>\n\n<p>I am trying this to insert spaces:</p>\n\n<pre><code>'1290' -replace \"(?&lt;=(\\d{3})),$&amp;\"\n'-1914' -replace \"(?&lt;=(\\d{3})),$&amp;\"\n</code></pre>\n\n<p>These regexps don't work.</p>\n\n<p>The output I need:</p>\n\n<pre><code>1 290\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>-1 914\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433335380, "post_id": 30620341, "comment_id": 49306815, "body": "Do periods &#39;count&#39;? E.g. &#39;.bravo&#39; = &#39;b&#39; but &#39;noperiod&#39; = &#39;n&#39;? And ... fundamentally no, you cannot sort a data set without reading the whole data set - otherwise how would you know if the last line needed to be output first?"}, {"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433337684, "post_id": 30620341, "comment_id": 49308732, "body": "No, periods don&#39;t count for sorting ... as per example."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1433336279, "last_edit_date": 1433336279, "creation_date": 1433335887, "answer_id": 30620656, "question_id": 30620341, "link": "https://stackoverflow.com/questions/30620341/sorting-a-sub-section-of-a-file/30620656#30620656", "title": "Sorting a sub-section of a file", "body": "<p>Depends what you mean by 'efficient'. I mean, a one liner is rarely <em>efficient</em> and it's also rarely concise or clear as to what it's doing. </p>\n\n<p>But in terms of efficiency? Well, it depends what you're doing already that's inefficient. I mean, pretty fundamentally, if you're sorting something you need to examine the whole data set. Otherwise how would you know that the last line in your file needs to be sorted to the top? </p>\n\n<p>But for what you're doing, I'd approach it like this:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nsub sort_noperiods {\n   my $a_np = $a;\n      $a_np =~ s/\\.//g;\n   my $b_np = $b; \n      $b_np =~ s/\\.//g; \n\n   return $a_np cmp $b_np;\n}\n\nwhile ( &lt;&gt; ) { \n   print;\n   last if m/Something Else/;\n}\n\nprint sort sort_noperiods &lt;&gt;;\n</code></pre>\n\n<p>Which for your sample input, prints:</p>\n\n<pre><code># A Comment\n# Another comment\n:127.100.100.255:Something\n.789\n.123\n.456\n:127.200.200.100:Something Else\n.an.example.com      # &lt;----  not ordered\n.bravo.example.com   # &lt;----\nnoperiod.example.com # &lt;----  This list is\n.some.example.com    # &lt;----\n</code></pre>\n\n<p>I'm keying off the 'Something Else' line in your file, as I couldn't quite tell how you'd identify the last line of the 'header' chunk. Anything else gets read in and sorted according to the 'noperiods' sort mechanism. (There may be a small efficiency gain by caching the result of the regular expressions, but I'm not sure of this). </p>\n\n<p>This can be 'one-linerified' by:</p>\n\n<pre><code>perl -e 'while ( &lt;&gt; ) { print; last if m/Something Else/ }; print sort { $a =~ s/\\.//gr cmp $b =~ s/\\.//gr } &lt;&gt;; '\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1433335937, "creation_date": 1433335937, "answer_id": 30620677, "question_id": 30620341, "link": "https://stackoverflow.com/questions/30620341/sorting-a-sub-section-of-a-file/30620677#30620677", "title": "Sorting a sub-section of a file", "body": "<p>You can sort that by the shell with a little help from Perl: Just prepend a line number to each line <em>before</em> the list, and for the list, use the number of its first line. Then sort numerically by the numbers, and secondary by the rest of the line:</p>\n\n<pre><code>perl -ne 'if (1 .. /^:127\\.200\\.200\\.100:.*/) {\n              print \"$.\\t$_\";\n          } else {\n              print $.--, \"\\t$_\"\n          }' file.txt \\\n| sort -k1,1n -k2 | cut -f2-\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 30620677, "answer_count": 2, "score": -3, "last_activity_date": 1433336279, "creation_date": 1433335115, "question_id": 30620341, "link": "https://stackoverflow.com/questions/30620341/sorting-a-sub-section-of-a-file", "title": "Sorting a sub-section of a file", "body": "<p>I'm in need of some Perl wisdom from those more experienced than myself.  </p>\n\n<p>So far, my answer to the below is to simply go through the file line-by line, and insert relevant elements into an array, sort the array and then append the contents.   But that seems like a bit long-winded and not very efficient.</p>\n\n<p>I have a file whose contents look something like this :</p>\n\n<pre><code># A Comment\n# Another comment\n:127.100.100.255:Something\n.789\n.123\n.456\n:127.200.200.100:Something Else\n.bravo.example.com   # &lt;----\nnoperiod.example.com # &lt;----  This list is\n.an.example.com      # &lt;----  not ordered\n.some.example.com    # &lt;----\n</code></pre>\n\n<p>Is there a clever way in Perl (ideally a one-liner that could be piped) to sort the second list ?  i.e. so you would get the following result :</p>\n\n<pre><code># A Comment\n# Another comment\n:127.100.100.255:Something\n.789\n.123\n.456\n:127.200.200.100:Something Else\n.an.example.com        # &lt;----\n.bravo.example.com     # &lt;---- NOW this list\nnoperiod.example.com   # &lt;---- IS ordered ;-)\n.some.example.com      # &lt;----\n</code></pre>\n\n<p>Four things  to note :</p>\n\n<ol>\n<li>The content to be sorted is always at the bottom of the file</li>\n<li>The header (\":127.200.200.100 etc.\") is always the same</li>\n<li>Names may or may not start with a period (i.e. .bravo.example.com vs noperiod.example.com)</li>\n<li>There may be a large number of items, so needs to be reasonably efficient</li>\n</ol>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1433335586, "post_id": 30620307, "comment_id": 49306975, "body": "Is <a href=\"https://regex101.com/r/cG9pZ1/1\" rel=\"nofollow noreferrer\"><code>[\\p{Pi}\\p{Pf}&#39;&quot;]</code></a> what you are looking for?"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1433335606, "post_id": 30620307, "comment_id": 49306998, "body": "Perhaps a good approach would be to reverse the reasoning and remove all but wanted chars like <code>s&#47;[^a-z0-9?._ \\t- ]&#47;&#47;g</code>"}, {"owner": {"reputation": 790, "user_id": 3560991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b080a14b538eb0c70f75abee636f12f9?s=128&d=identicon&r=PG&f=1", "display_name": "Wonko the Sane", "link": "https://stackoverflow.com/users/3560991/wonko-the-sane"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433336068, "post_id": 30620307, "comment_id": 49307369, "body": "@stribizhev - your solution seems to work well! Thank you."}, {"owner": {"reputation": 790, "user_id": 3560991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b080a14b538eb0c70f75abee636f12f9?s=128&d=identicon&r=PG&f=1", "display_name": "Wonko the Sane", "link": "https://stackoverflow.com/users/3560991/wonko-the-sane"}, "reply_to_user": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "edited": false, "score": 0, "creation_date": 1433336098, "post_id": 30620307, "comment_id": 49307397, "body": "@nowox - creative, but there is a risk I will lose something valuable. Thanks for the idea though!"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433336189, "post_id": 30620307, "comment_id": 49307475, "body": "@WonkotheSane: I posted that as answer since it worked for you."}], "answers": [{"comments": [{"owner": {"reputation": 790, "user_id": 3560991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b080a14b538eb0c70f75abee636f12f9?s=128&d=identicon&r=PG&f=1", "display_name": "Wonko the Sane", "link": "https://stackoverflow.com/users/3560991/wonko-the-sane"}, "edited": false, "score": 0, "creation_date": 1433337145, "post_id": 30620763, "comment_id": 49308259, "body": "Thanks mate, much appreciated. :)"}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1433337313, "last_edit_date": 1433337313, "creation_date": 1433336168, "answer_id": 30620763, "question_id": 30620307, "link": "https://stackoverflow.com/questions/30620307/removing-all-variations-of-quotes-and-apostrophes-using-perl-regex/30620763#30620763", "title": "Removing all variations of quotes and apostrophes using Perl regex", "body": "<p>In order to remove all quotation marks and apostrophies, you can use</p>\n\n<pre><code> [\\p{Pi}\\p{Pf}'\"]\n</code></pre>\n\n<p>And replace with empty string.</p>\n\n<p>See <a href=\"https://regex101.com/r/cG9pZ1/1\" rel=\"nofollow\">demo</a></p>\n\n<p>And <a href=\"https://ideone.com/73dhRw\" rel=\"nofollow\">IDEONE demo</a>:</p>\n\n<pre><code>#!/usr/bin/perl\nuse utf8;\nmy $st = \"\u201cQuotes1\u201d \u00abQuotes2\u00bb \u2018Quotes3\u2019 'Quotes4' \\\"Quotes5\\\"\";\nprint \"Before: $st\\n\";\n$st =~ s/[\\p{Pi}\\p{Pf}'\"]//g;\nprint \"After: $st\\n\";\n</code></pre>\n\n<p>\"Saying\"</p>\n\n<pre><code>Before: \u201cQuotes1\u201d \u00abQuotes2\u00bb \u2018Quotes3\u2019 'Quotes4' \"Quotes5\"\nAfter: Quotes1 Quotes2 Quotes3 Quotes4 Quotes5\n</code></pre>\n"}], "owner": {"reputation": 790, "user_id": 3560991, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b080a14b538eb0c70f75abee636f12f9?s=128&d=identicon&r=PG&f=1", "display_name": "Wonko the Sane", "link": "https://stackoverflow.com/users/3560991/wonko-the-sane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 0, "accepted_answer_id": 30620763, "answer_count": 1, "score": 4, "last_activity_date": 1433360203, "creation_date": 1433335016, "last_edit_date": 1433360203, "question_id": 30620307, "link": "https://stackoverflow.com/questions/30620307/removing-all-variations-of-quotes-and-apostrophes-using-perl-regex", "title": "Removing all variations of quotes and apostrophes using Perl regex", "body": "<p>I am trying to remove apostrophes and double quotes from a string, and have noticed there are various versions that create into the data I'm using depending on how its created. For instance, Word documents tend to use these:</p>\n\n<pre><code>It\u2019s raining again. \nWhat do you mean by \u201cweird\u201d?\n</code></pre>\n\n<p>Whereas text editors are like this:</p>\n\n<pre><code>It's raining again.\nWhat do you mean by \"weird\"?\n</code></pre>\n\n<p>As I go through the various character charts and data I've noticed that there are other variations of quotes and apostrophes, for example: <a href=\"http://www.fileformat.info/info/unicode/char/0022/index.htm\" rel=\"nofollow\">http://www.fileformat.info/info/unicode/char/0022/index.htm</a></p>\n\n<p>While I could go through and do a reasonable job of finding them all, is there an existing Perl regex or function that removes all variations of quotes and apostrophes?</p>\n"}, {"tags": ["bash", "perl", "replace"], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 746692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9b34a0235ac6cfce189f73d511c0ec2?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/746692/phil"}, "edited": false, "score": 0, "creation_date": 1433345249, "post_id": 30619830, "comment_id": 49314858, "body": "Brilliant - thanks @\u0421\u0443\u0445\u043e\u043927 , that&#39;s much more elegant."}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1433333731, "creation_date": 1433333731, "answer_id": 30619830, "question_id": 30619400, "link": "https://stackoverflow.com/questions/30619400/calling-bash-function-in-perl-find-replace/30619830#30619830", "title": "Calling bash function in perl find replace", "body": "<p>You don't need bash and unnecessary piping through multiple system utilities,</p>\n\n<pre><code>perl -i -pe'\n  BEGIN {\n    @chars = (\"a\" .. \"z\", \"A\" .. \"Z\", 0 .. 9);\n    push @chars, split //, \"!@#$%^&amp;*()-_ []{}&lt;&gt;~\\`+=,.;:/?|\";\n    sub salt { join \"\", map $chars[ rand @chars ], 1 .. 64 }\n  }\n  s/put your unique phrase here/salt()/ge\n' wp-config.php\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 746692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9b34a0235ac6cfce189f73d511c0ec2?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/746692/phil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 30619830, "answer_count": 1, "score": 2, "last_activity_date": 1433333731, "creation_date": 1433332494, "question_id": 30619400, "link": "https://stackoverflow.com/questions/30619400/calling-bash-function-in-perl-find-replace", "title": "Calling bash function in perl find replace", "body": "<p>I'm a scripting noob and trying to get this find/replace working that injects salt strings in a wp-config.php file, replacing multiple placeholders.</p>\n\n<pre><code>    #!/bin/bash -e\n    function salt() {\n        uniqSalt=$(cat /dev/urandom | env LC_CTYPE=C tr -dc \"a-zA-Z0-9!@#$%^&amp;*()-_ []{}&lt;&gt;~\\`+=,.;:/?|\" | fold -w 64 | head -n 1)\n        echo $uniqSalt\n    }\n    perl -pi -e \"s/put your unique phrase here/$(salt)/g\" wp-config.php\n</code></pre>\n\n<p>This works, but it only generates the salt once so they are all the same - of course it needs to generate it again for every match. </p>\n\n<p>Is it possible to modify this to do what I want? Or is there a better way?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["excel", "perl", "undef"], "comments": [{"owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 0, "creation_date": 1433328894, "post_id": 30617793, "comment_id": 49302168, "body": "What is <code>$line</code>? Do you mean <code>print Dumper (\\@line);</code> ?"}, {"owner": {"reputation": 51, "user_id": 4198004, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hDuM_m9_SAc/AAAAAAAAAAI/AAAAAAAABOs/jIbtPT1xJ14/photo.jpg?sz=128", "display_name": "James Jiimmy", "link": "https://stackoverflow.com/users/4198004/james-jiimmy"}, "reply_to_user": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 0, "creation_date": 1433329024, "post_id": 30617793, "comment_id": 49302260, "body": "Yes! Thanks, I was using Dumper incorrectly and the getvalue was actually working. Thanks for the help."}, {"owner": {"reputation": 5666, "user_id": 734304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c64a3cafb1fd129cd2b98951d624f15?s=128&d=identicon&r=PG", "display_name": "kobame", "link": "https://stackoverflow.com/users/734304/kobame"}, "edited": false, "score": 0, "creation_date": 1433336768, "post_id": 30617793, "comment_id": 49307946, "body": "Exactly such errors are very easy capture using: <code>use strict; use warnings;</code> You have a happy day, because is very common than nobody bother with questions what dosen&#39;t contains use strict and use warnings;."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4198004, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hDuM_m9_SAc/AAAAAAAAAAI/AAAAAAAABOs/jIbtPT1xJ14/photo.jpg?sz=128", "display_name": "James Jiimmy", "link": "https://stackoverflow.com/users/4198004/james-jiimmy"}, "edited": false, "score": 0, "creation_date": 1433328507, "post_id": 30617855, "comment_id": 49301896, "body": "sorry - typo, now fixed (however using push @line, $cell-&gt;value if defined($cell); also returns undef)"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 51, "user_id": 4198004, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hDuM_m9_SAc/AAAAAAAAAAI/AAAAAAAABOs/jIbtPT1xJ14/photo.jpg?sz=128", "display_name": "James Jiimmy", "link": "https://stackoverflow.com/users/4198004/james-jiimmy"}, "edited": false, "score": 0, "creation_date": 1433328686, "post_id": 30617855, "comment_id": 49302028, "body": "try changing <code>$value = $cell-&gt;value;</code> to <code>my $value = $cell-&gt;value;</code>."}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "reply_to_user": {"reputation": 51, "user_id": 4198004, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hDuM_m9_SAc/AAAAAAAAAAI/AAAAAAAABOs/jIbtPT1xJ14/photo.jpg?sz=128", "display_name": "James Jiimmy", "link": "https://stackoverflow.com/users/4198004/james-jiimmy"}, "edited": false, "score": 0, "creation_date": 1433328934, "post_id": 30617855, "comment_id": 49302207, "body": "@JamesJiimmy and when you do <code>push @line, \\$value</code> ?"}], "tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": true, "score": 2, "last_activity_date": 1433328373, "last_edit_date": 1433328373, "creation_date": 1433328284, "answer_id": 30617855, "question_id": 30617793, "link": "https://stackoverflow.com/questions/30617793/spreadsheetparseexcel-cell-value-returning-undef/30617855#30617855", "title": "Spreadsheet::ParseExcel $cell-&gt;value() returning undef", "body": "<p>You have to push <code>$cell-&gt;value</code>not <code>$value</code></p>\n\n<pre><code>push @line, $cell-&gt;value if defined($cell);\n</code></pre>\n\n<p>You should add <code>use strict</code> at the beginning of your program, so you get an error message in such a case.</p>\n"}], "owner": {"reputation": 51, "user_id": 4198004, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hDuM_m9_SAc/AAAAAAAAAAI/AAAAAAAABOs/jIbtPT1xJ14/photo.jpg?sz=128", "display_name": "James Jiimmy", "link": "https://stackoverflow.com/users/4198004/james-jiimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 30617855, "answer_count": 1, "score": 0, "last_activity_date": 1433328491, "creation_date": 1433328151, "last_edit_date": 1433328491, "question_id": 30617793, "link": "https://stackoverflow.com/questions/30617793/spreadsheetparseexcel-cell-value-returning-undef", "title": "Spreadsheet::ParseExcel $cell-&gt;value() returning undef", "body": "<p>I am new to perl and having trouble with the spreadsheet excel parser module.</p>\n\n<p>WHen I use $cell->value() on its own line, there appears to be no problem, however when I try to use this to insert the value into an array, it returns undef, code show below:</p>\n\n<pre><code>for my $row ($row_min .. $row_max) {\n    my @line;\n        for my $col ( $col_min .. $col_max) {\n                my $cell = $worksheet-&gt;get_cell( $row, $col );\n                $value = $cell-&gt;value;\n                push @line, $value if defined($cell);\n                print $cell-&gt;value;\n                print Dumper $line;\n                }\n\n         }\n}\n</code></pre>\n\n<p>Here print $cell->value; returns the contents of the cell but print Dumper $line; returns undef</p>\n"}, {"tags": ["regex", "linux", "perl", "find"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 2, "creation_date": 1433324788, "post_id": 30616338, "comment_id": 49299249, "body": "Did you tried anything from yourself?"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433328634, "post_id": 30616783, "comment_id": 49301994, "body": "Could you match the upper case to lower case transition to avoid problems with e.g. XML. I think changing the &#39;look behind&#39; to &#39;lower case character&#39; would deal with that?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433330001, "post_id": 30616783, "comment_id": 49302932, "body": "@Sobrique: It depends on what you expect. Just changing the <code>.</code> to <code>[[:lower:]]</code> doesn&#39;t seem right, though. Maybe changing <code>lcfirst</code> to <code>lc</code> at the same time..."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433330372, "post_id": 30616783, "comment_id": 49303161, "body": "Well, it does make: <code>camelCaseFile -&gt; camel_case_file   and XML2JSON_parser -&gt; XML2JSON_parser</code> - but you&#39;d still have to worry about <code>lcfirst</code>ing that second case."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 2, "last_activity_date": 1433325457, "creation_date": 1433325457, "answer_id": 30616783, "question_id": 30616338, "link": "https://stackoverflow.com/questions/30616338/change-file-names-by-perl/30616783#30616783", "title": "Change file names by Perl", "body": "<p>You can use a regular expression:</p>\n\n<pre><code>perl -e 'for $f (@ARGV) {\n             ($n = $f) =~ s/(?&lt;=.)([[:upper:]])/_\\l$1/g;\n             rename $f, lcfirst $n;\n         }' SomeCodeFiles*\n</code></pre>\n\n<ul>\n<li><code>[[:upper:]]</code> matches upper case letters.</li>\n<li><code>(?&lt;=.)</code> is a look behind assertion, i.e. the letter is preceded by something (we don't want <code>_some_code_file.ext</code>)</li>\n<li><code>\\l</code> changes the following letter to lowercase (similarly to <code>lcfirst</code>)</li>\n</ul>\n\n<p>Note that the result might be unpleasant in some situations (<code>x_m_l2_j_s_o_n.c</code>, <code>u_r_l__validator.cpp</code>).</p>\n"}], "owner": {"reputation": 2063, "user_id": 3448282, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/cadf6173fd340e6921318c56206e1b81?s=128&d=identicon&r=PG&f=1", "display_name": "user3448282", "link": "https://stackoverflow.com/users/3448282/user3448282"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "closed_date": 1433450830, "accepted_answer_id": 30616783, "answer_count": 1, "score": -2, "last_activity_date": 1433325457, "creation_date": 1433324420, "question_id": 30616338, "link": "https://stackoverflow.com/questions/30616338/change-file-names-by-perl", "closed_reason": "Not suitable for this site", "title": "Change file names by Perl", "body": "<p>How to change file names from notation like this: <code>SomeCodeFile.extension</code> to C/C++ notation: <code>some_code_file.extension</code>. I'd like to use Perl + Find + Regex to print those names.</p>\n"}, {"tags": ["regex", "windows", "perl", "utf-8", "stdin"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433324403, "post_id": 30616261, "comment_id": 49298976, "body": "<code>use open qw(:std :utf8);</code>"}, {"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433325168, "post_id": 30616261, "comment_id": 49299514, "body": "@\u0421\u0443\u0445\u043e\u043927 I added that to the top of my script, now when adding an accented character i get the following: <code>utf8 &quot;\\xA0&quot; does not map to Unicode at regex.pl line 20, &lt;STDIN&gt; line 1. Malformed UTF-8 character (unexpected end of string) in length at regex.pl line 22, &lt;STDIN&gt; line 1.</code>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433325765, "post_id": 30616261, "comment_id": 49299962, "body": "Are you using windows?"}, {"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433325829, "post_id": 30616261, "comment_id": 49300004, "body": "@\u0421\u0443\u0445\u043e\u043927 Yes, Windows 8 Pro x64"}], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 0, "creation_date": 1433325528, "post_id": 30616747, "comment_id": 49299794, "body": "Hmm... well I guess it could be an issue with the PC (I&#39;m on a company PC) Thanks though!"}, {"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 0, "creation_date": 1433325723, "post_id": 30616747, "comment_id": 49299938, "body": "Actually, i checked your reply, and tried it using <code>&lt;DATA&gt;</code> and that way it works for me as well, so i guess there has to be something different about <code>&lt;STDIN&gt;</code>"}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 0, "creation_date": 1433327257, "post_id": 30616747, "comment_id": 49301057, "body": "@WolfyD Can you provide the values of <code>echo $TERM</code> and <code>echo $LANG</code> ?"}, {"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 0, "creation_date": 1433327407, "post_id": 30616747, "comment_id": 49301162, "body": "I&#39;m not familiar with these, where should i find these values? Perl or somewhere else?"}, {"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 0, "creation_date": 1433327721, "post_id": 30616747, "comment_id": 49301385, "body": "--Also if they may be Linux variables, I&#39;m on Windows, so I won&#39;t be able to tell you."}, {"owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "reply_to_user": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 1, "creation_date": 1433328025, "post_id": 30616747, "comment_id": 49301591, "body": "Well, this means your terminal is not UTF-8. Windows console has different encoding and if your Perl Script is written in utf-8 it won&#39;t work. Try <code>chcp</code> on <code>cmd.exe</code>. Also maybe this can help you: <a href=\"http://superuser.com/questions/269818/change-default-code-page-of-windows-console-to-utf-8\">question</a>"}, {"owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "edited": false, "score": 0, "creation_date": 1433328386, "post_id": 30616747, "comment_id": 49301813, "body": "Thanks for your help, yes, <code>chcp</code> returns 852, so i guess I&#39;ll have to work around that"}], "tags": [], "owner": {"reputation": 18883, "user_id": 2612235, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/dpsjq.jpg?s=128&g=1", "display_name": "nowox", "link": "https://stackoverflow.com/users/2612235/nowox"}, "is_accepted": false, "score": 2, "last_activity_date": 1433327771, "last_edit_date": 1433327771, "creation_date": 1433325378, "answer_id": 30616747, "question_id": 30616261, "link": "https://stackoverflow.com/questions/30616261/regex-on-stdin-not-finding-matches-perl/30616747#30616747", "title": "Regex on &lt;STDIN&gt; not finding matches - Perl", "body": "<p>In my case with your program I get the expected result: </p>\n\n<pre><code>use strict;\nuse warnings;\n\n\nmy %replace = (\n    '\u00e9' =&gt; \"e\",\n    '\u00e1' =&gt; \"a\",\n    '\u0151' =&gt; \"o\",\n    '\u00f6' =&gt; \"o\",\n    '\u00f3' =&gt; \"o\",\n    '\u00fa' =&gt; \"u\",\n    '\u00fc' =&gt; \"u\",\n    '\u0171' =&gt; \"u\",\n    '\u00ed' =&gt; \"i\",    \n);\n\nmy $regex = join \"|\", keys %replace;\n$regex = qr/$regex/;\n\nmy $s = &lt;DATA&gt;;\n$s = substr $s, 0, length($s) - 1;\n\nmy $var = \"$s - \u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171\";\n\n$var =~ s/($regex)/$replace{$1}/g;\n\n$s = $var;\n\nprint \"$s\\n\";\n\n__DATA__\n\u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171\n</code></pre>\n\n<p>Where I get:</p>\n\n<pre><code>$ perl test.pl\nouooueau - ouooueau\n</code></pre>\n\n<p>So you have another problem such as an encoding issue. </p>\n\n<p>You can try to add to your program.</p>\n\n<pre><code>use utf8;\n</code></pre>\n\n<p>Also you can simplify your program like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %replace = (\n    '\u00e9' =&gt; \"e\",\n    '\u00e1' =&gt; \"a\",\n    '\u0151' =&gt; \"o\",\n    '\u00f6' =&gt; \"o\",\n    '\u00f3' =&gt; \"o\",\n    '\u00fa' =&gt; \"u\",\n    '\u00fc' =&gt; \"u\",\n    '\u0171' =&gt; \"u\",\n    '\u00ed' =&gt; \"i\",    \n);\n\nwhile(&lt;DATA&gt;) {\n    for my $key (keys %replace) {\n        s/$key/$replace{$key}/;\n    }\n    print;\n}\n\n__DATA__\n\u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 2192923, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ae3f9f93df9ae60d57654e128af240d8?s=128&d=identicon&r=PG", "display_name": "WolfyD", "link": "https://stackoverflow.com/users/2192923/wolfyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1433327771, "creation_date": 1433324215, "last_edit_date": 1433327258, "question_id": 30616261, "link": "https://stackoverflow.com/questions/30616261/regex-on-stdin-not-finding-matches-perl", "title": "Regex on &lt;STDIN&gt; not finding matches - Perl", "body": "<p>I'm trying to make a script that would take in a string with accented characters, and return their unaccented counterparts. </p>\n\n<p>I managed to make something that almost works after looking around for some help and tutorials, but I have a problem.</p>\n\n<p>My code does what I want, as long as I want it done on a simple string, but it does absolutely nothing when I want to use <code>&lt;STDIN&gt;</code>.</p>\n\n<p>My code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\n\nmy %replace = (\n    '\u00e9' =&gt; \"e\",\n    '\u00e1' =&gt; \"a\",\n    '\u0151' =&gt; \"o\",\n    '\u00f6' =&gt; \"o\",\n    '\u00f3' =&gt; \"o\",\n    '\u00fa' =&gt; \"u\",\n    '\u00fc' =&gt; \"u\",\n    '\u0171' =&gt; \"u\",\n    '\u00ed' =&gt; \"i\",    \n);\n\nmy $regex = join \"|\", keys %replace;\n$regex = qr/$regex/;\n\nmy $s = &lt;STDIN&gt;;\n$s = substr $s, 0, length($s) - 1;\n\nmy $var = \"$s - \u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171\";\n\n$var =~ s/($regex)/$replace{$1}/g;\n\n$s = $var;\n\nprint \"$s\\n\";\n</code></pre>\n\n<p>If i input \"\u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171\" to <code>&lt;STDIN&gt;</code> i get the following output:</p>\n\n<p><code>\u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171 - ouooueau</code></p>\n\n<p>Could someone tell me what I'm doing wrong?</p>\n\n<p>EDIT:</p>\n\n<p>I checked, and when using it like the following (with <code>&lt;DATA&gt;</code> instead of <code>&lt;STDIN&gt;</code>) it works properly:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %replace = (\n    '\u00e9' =&gt; \"e\",\n    '\u00e1' =&gt; \"a\",\n    '\u0151' =&gt; \"o\",\n    '\u00f6' =&gt; \"o\",\n    '\u00f3' =&gt; \"o\",\n    '\u00fa' =&gt; \"u\",\n    '\u00fc' =&gt; \"u\",\n    '\u0171' =&gt; \"u\",\n    '\u00ed' =&gt; \"i\",    \n);\n\nmy $regex = join \"|\", keys %replace;\n$regex = qr/$regex/;\n\nmy $s = &lt;DATA&gt;;\n$s = substr $s, 0, length($s) - 1;\n\nmy $var = \"$s - \u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171\";\n\n$var =~ s/($regex)/$replace{$1}/g;\n\n$s = $var;\n\nprint \"$s\\n\";\n\n__DATA__\n\u00f6\u00fc\u00f3\u0151\u00fa\u00e9\u00e1\u0171\n</code></pre>\n\n<p>EDIT2:</p>\n\n<p>I now did the following: <code>my $s = &lt;DATA&gt;.\" - \".&lt;&gt;;</code> so it reads in the characters from <code>&lt;DATA&gt;</code> as well as from <code>&lt;STDIN&gt;</code> and now I realized, that it still matches with <code>&lt;DATA&gt;</code> and does noting to <code>&lt;STDIN&gt;</code>, so i get the following output:</p>\n\n<p><code>uaeuoouoi - \u0171\u00e1\u00e9\u00fa\u0151\u00f3\u00fc\u00f6\u00ed - uaeuoouoi</code> from the following code:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\n\nmy %replace = (\n    '\u00e9' =&gt; \"e\",\n    '\u00e1' =&gt; \"a\",\n    '\u0151' =&gt; \"o\",\n    '\u00f6' =&gt; \"o\",\n    '\u00f3' =&gt; \"o\",\n    '\u00fa' =&gt; \"u\",\n    '\u00fc' =&gt; \"u\",\n    '\u0171' =&gt; \"u\",\n    '\u00ed' =&gt; \"i\",    \n);\n\nmy $regex = join \"|\", keys %replace;\n$regex = qr/$regex/;\n\n\n\nmy $s = &lt;DATA&gt;.\" - \".&lt;&gt;;\n$s = substr $s, 0, length($s) - 1;\n\nmy $var = \"$s - \u0171\u00e1\u00e9\u00fa\u0151\u00f3\u00fc\u00f6\u00ed\";\n\n$var =~ s/($regex)/$replace{$1}/g;\n\n$s = $var;\n\nprint \"$s\\n\";\n\n__DATA__\n\u0171\u00e1\u00e9\u00fa\u0151\u00f3\u00fc\u00f6\u00ed\n</code></pre>\n\n<p>where <code>&lt;STDIN&gt;</code> = \u0171\u00e1\u00e9\u00fa\u0151\u00f3\u00fc\u00f6\u00ed</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433305628, "post_id": 30610228, "comment_id": 49288557, "body": "Tested. qr//o was definitely broken in 5.6. The o was ignored."}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "reply_to_user": {"reputation": 233, "user_id": 3023269, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4b157517d920a26e69d4ffb9ceb03264?s=128&d=identicon&r=PG&f=1", "display_name": "Nam Ngo", "link": "https://stackoverflow.com/users/3023269/nam-ngo"}, "edited": false, "score": 2, "creation_date": 1433307179, "post_id": 30610228, "comment_id": 49289052, "body": "@NamNgo you&#39;re welcome. Just as  side note, I&#39;ve been using Perl for 15 years and there isn&#39;t <i>anyplace</i> I would recommend using <code>&#47;o</code>. At best it makes a very small performance improvement, easily outweighed by its potential for creating bugs."}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 7, "last_activity_date": 1433301381, "creation_date": 1433301381, "answer_id": 30610228, "question_id": 30610169, "link": "https://stackoverflow.com/questions/30610169/perl-does-not-reevaluate-regex-variable/30610228#30610228", "title": "Perl does not reevaluate regex variable", "body": "<ol>\n<li><p>The <code>o</code> modifier prevents re-evaluating variables substituted into regexes. It's curious that it didn't happen for you on 5.6, but it's probably because <code>qr</code> was still new in that version. Removing it (changing <code>/io</code> to <code>/i</code>) should make things work the way you expect.</p></li>\n<li><p>The <code>(?i-xsm)</code> encodes the regex modifier flags that are in effect (<code>i</code> is turned on, <code>x</code>, <code>s</code>, and <code>m</code> are turned off). Sometime around perl 5.14, Perl got some new regex modifier flags, which would change the stringification of all regexes. Since this was already a backwards-incompatible change, it was decided to do it in a way that would limit the hassle caused by adding any new flags down the road, and so the <code>^</code> character was used to represent the \"default\" set of flags. So <code>(?^i)</code> means \"the default flags, plus the <code>i</code> flag\". They both mean basically the same thing, and there's nothing you should worry about.</p></li>\n</ol>\n"}], "owner": {"reputation": 233, "user_id": 3023269, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4b157517d920a26e69d4ffb9ceb03264?s=128&d=identicon&r=PG&f=1", "display_name": "Nam Ngo", "link": "https://stackoverflow.com/users/3023269/nam-ngo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 30610228, "answer_count": 1, "score": 1, "last_activity_date": 1433806829, "creation_date": 1433300902, "last_edit_date": 1433806829, "question_id": 30610169, "link": "https://stackoverflow.com/questions/30610169/perl-does-not-reevaluate-regex-variable", "title": "Perl does not reevaluate regex variable", "body": "<p>I am in charge of upgrading this Perl script from Perl v5.6.1 (2001) to v5.20.2 (2015). I have these 2 regex variable:</p>\n\n<pre><code>foreach (@filelist) {\n    chomp;\n    my $File = $_;\n    if ( $File =~ qr/.+/o ) {\n        if ( $BaseLine ) {\n\n            $BaseLineRegExpA = qr/^\\Q$BaseLine\\E\\\\/io; #these 2 regexes\n            $BaseLineRegExpB = qr/^\\Q$BaseLine\\E;/io;  #these 2 regexes\n\n            if ( $File =~ /$BaseLineRegExpA/ ) {\n                #...\n\n            } elsif ( (!($File =~ /$BaseLineRegExpB/)) &amp;&amp; (!(lc( $File ) eq lc( $BaseLine ) )) ) {\n                $BaseLine = $File;\n            }\n        }\n     }\n}\n</code></pre>\n\n<p>So, I have 2 questions:</p>\n\n<ol>\n<li><p>In the old Perl version, the <code>$BaseLineRegExpA</code> and <code>$BaseLineRegExpB</code> gets reevaluate every time <code>$BaseLine</code> changes, but in the new Perl, it does not. How do I make it changes? I've tried my <code>$BaseLineRegExpA</code>, it still does not change.</p></li>\n<li><p>In the old Perl, <code>$BaseLineRegExpA</code> evals to: <code>(?i-xsm:^F:\\\\dd\\\\)</code>, and in the new Perl, it evals to <code>(?^i:^F:\\\\dd\\\\)</code>. My questions is, is there a different between <code>?i-xsm:^</code> and <code>?^i:^</code>?</p></li>\n</ol>\n\n<p>Thanks so much, unfortunately, these are legacy scripts and I don't know much about Perl.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 82, "user_id": 2523615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JNM0f.png?s=128&g=1", "display_name": "Sophia", "link": "https://stackoverflow.com/users/2523615/sophia"}, "edited": false, "score": 0, "creation_date": 1433300560, "post_id": 30610016, "comment_id": 49287363, "body": "It worked!  Thanks a lot!  Also, I&#39;ll try those you have suggested, first time seeing them."}], "tags": [], "owner": {"reputation": 2043, "user_id": 2335842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda02075da146f14d3d77844c9d5056f?s=128&d=identicon&r=PG", "display_name": "optional", "link": "https://stackoverflow.com/users/2335842/optional"}, "is_accepted": true, "score": 1, "last_activity_date": 1433299837, "creation_date": 1433299837, "answer_id": 30610016, "question_id": 30609475, "link": "https://stackoverflow.com/questions/30609475/using-httpserversimplecgi-how-do-i-get-the-headers/30610016#30610016", "title": "Using HTTP::Server::Simple::CGI, how do I get the headers?", "body": "<p>Add</p>\n\n<pre><code>sub headers {\n    my( $self, $headers ) = @_;\n    if( $headers ){\n        $self-&gt;{__last_headers} = { @$headers };\n    }\n    return $self-&gt;{__last_headers};\n}\n</code></pre>\n\n<p>Then inside <code>handle_request</code> use <code>my $header = $self-&gt;headers();</code> </p>\n\n<p>FWIW, i'm curious why you're using HTTP::Server::Simple::CGI instead of Mojolicious or Dancer or even HTTP::Server::Simple::PSGI.  <a href=\"https://metacpan.org/pod/PSGI\" rel=\"nofollow\">https://metacpan.org/pod/PSGI</a> is portability.</p>\n"}], "owner": {"reputation": 82, "user_id": 2523615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JNM0f.png?s=128&g=1", "display_name": "Sophia", "link": "https://stackoverflow.com/users/2523615/sophia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 753, "favorite_count": 0, "accepted_answer_id": 30610016, "answer_count": 1, "score": 0, "last_activity_date": 1433302855, "creation_date": 1433295890, "last_edit_date": 1433302855, "question_id": 30609475, "link": "https://stackoverflow.com/questions/30609475/using-httpserversimplecgi-how-do-i-get-the-headers", "title": "Using HTTP::Server::Simple::CGI, how do I get the headers?", "body": "<p>Basically, my question is similar to \n<a href=\"https://stackoverflow.com/questions/3093160/how-do-i-access-http-request-headers-in-httpserversimplecgi\">How do I access HTTP request headers in HTTP::Server::Simple::CGI?</a></p>\n\n<p>The answer was to use  parse_headers(), but there was no example how to use it properly.  I tried to use  parse_headers()  but I'm not getting any result, it just stops at  parse_headers() like the program is stucked.  I couldn't add a comment on the question above since I don't have enough rep to do so, so I created this new question.</p>\n\n<p>Below is my sample code, basically the example code from CPAN just added the parse_headers:</p>\n\n<pre><code>#!/usr/bin/perl\n{\npackage MyWebServer;\n\nuse HTTP::Server::Simple::CGI;\nour @ISA = qw(HTTP::Server::Simple::CGI);\nuse Data::Dumper;\n\nmy %dispatch = (\n    '/hello.cgi' =&gt; \\&amp;resp_hello,\n    # ...\n);\n\nsub handle_request {\n    my $self = shift;\n    my $cgi  = shift;\n\n    my $path = $cgi-&gt;path_info();\n    my $handler = $dispatch{$path};\n\n    my $header = $self-&gt;parse_headers();\n    open F,qq{&gt;&gt;~/MyWebServer.log};\n    my $dump = Data::Dumper-&gt;Dump([$header], [qw($header)]);\n    print F $dump;\n    close F;\n\n    if (ref($handler) eq \"CODE\") {\n        print \"HTTP/1.0 200 OK\\r\\n\";\n        $handler-&gt;($cgi);\n\n    } else {\n        print \"HTTP/1.0 404 Not found\\r\\n\";\n        print $cgi-&gt;header,\n              $cgi-&gt;start_html('Not found'),\n              $cgi-&gt;h1('Not found'),\n              $cgi-&gt;end_html;\n    }\n}\n\nsub resp_hello {\n    my $cgi  = shift;   # CGI.pm object\n    return if !ref $cgi;\n\n    my $who = $cgi-&gt;param('name');\n\n    print $cgi-&gt;header,\n          $cgi-&gt;start_html(\"Hello\"),\n          $cgi-&gt;h1(\"Hello $who!\"),\n          $cgi-&gt;end_html;\n}\n\n} # end of package MyWebServer\n\n# start the server on port 8080\nmy $pid = MyWebServer-&gt;new(8080)-&gt;background();\nprint \"Use 'kill $pid' to stop server.\\n\";\n</code></pre>\n\n<p>Only added this part:</p>\n\n<pre><code>    my $header = $self-&gt;parse_headers();\n    open F,qq{&gt;&gt;~/MyWebServer.log};\n    my $dump = Data::Dumper-&gt;Dump([$header], [qw($header)]);\n    print F $dump;\n    close F;\n</code></pre>\n\n<p>My objective is to get all the headers and dump it into a file.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 1, "creation_date": 1433294285, "post_id": 30609242, "comment_id": 49285812, "body": "Why don&#39;t you just let the argument indicate that you want to read from a file?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1433299915, "post_id": 30609242, "comment_id": 49287208, "body": "If the contents of the file is bigger than the command line can accept, you can&#39;t pass the contents of the file as a command line argument.  So, you have to work around it.  One way is to pass the file name (and an argument to tell the command to read the file); another is to redirect the file to a known file descriptor (0 or standard input is the commonest one, but not necessarily the best \u2014 and you might need an argument to tell the script to process it specially).  But that&#39;s about it \u2014 if it is too big, you are hosed unless you can increase the limit, but it&#39;ll just be a new, bigger limit."}], "answers": [{"tags": [], "owner": {"reputation": 14274, "user_id": 579078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xC5kj.png?s=128&g=1", "display_name": "\u11bc\u11ba\u11bc", "link": "https://stackoverflow.com/users/579078/%e1%86%bc%e1%86%ba%e1%86%bc"}, "is_accepted": false, "score": 1, "last_activity_date": 1433366844, "last_edit_date": 1433366844, "creation_date": 1433294620, "answer_id": 30609295, "question_id": 30609242, "link": "https://stackoverflow.com/questions/30609242/using-the-contents-of-a-file-as-a-perl-argument/30609295#30609295", "title": "Using the contents of a file as a perl argument", "body": "<p>This is not a limitation of Perl, but the OS/C library.</p>\n\n<p>You could try increasing the limit, see <a href=\"http://www.in-ulm.de/~mascheck/various/argmax/\" rel=\"nofollow\">here for more info</a>. </p>\n\n<p>Assuming you are using a modern Linux kernel, the limit is <code>stack size / 4</code>, to increase stack size, try <code>ulimit -s</code><em><code>number</code></em> where <em><code>number</code></em> is the new stack size limit.</p>\n"}, {"tags": [], "owner": {"reputation": 1827, "user_id": 1303827, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/46c6fe34f1fdce3edc463169a9b03763?s=128&d=identicon&r=PG", "display_name": "Tim S.", "link": "https://stackoverflow.com/users/1303827/tim-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1433295078, "creation_date": 1433295078, "answer_id": 30609354, "question_id": 30609242, "link": "https://stackoverflow.com/questions/30609242/using-the-contents-of-a-file-as-a-perl-argument/30609354#30609354", "title": "Using the contents of a file as a perl argument", "body": "<pre><code>perl something.pl -t happiness FILE.txt\n</code></pre>\n\n<p>Your first argument would be happiness (assuming this could be another word, otherwise just assign it inside something.pl) and then read FILE.txt separately, either one line at a time, or slurp the whole thing (though probably not recommended for 150k+ characters) and then process as you would normally.</p>\n\n<p>The idea behind redirecting of output becomes moot when you have access to the source of the script -- people redirect output from things like GNU tools (ie 'df -h') because they can't (easily) edit the tool's source code to do their bidding.</p>\n"}, {"comments": [{"owner": {"reputation": 14274, "user_id": 579078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xC5kj.png?s=128&g=1", "display_name": "\u11bc\u11ba\u11bc", "link": "https://stackoverflow.com/users/579078/%e1%86%bc%e1%86%ba%e1%86%bc"}, "edited": false, "score": 0, "creation_date": 1433330720, "post_id": 30611681, "comment_id": 49303414, "body": "Won&#39;t work as the resulting string is still too long"}], "tags": [], "owner": {"reputation": 1746, "user_id": 2636457, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29162c5b215ddb5b900c713c5eb2be9c?s=128&d=identicon&r=PG", "display_name": "Levi", "link": "https://stackoverflow.com/users/2636457/levi"}, "is_accepted": false, "score": 0, "last_activity_date": 1433310070, "creation_date": 1433310070, "answer_id": 30611681, "question_id": 30609242, "link": "https://stackoverflow.com/questions/30609242/using-the-contents-of-a-file-as-a-perl-argument/30611681#30611681", "title": "Using the contents of a file as a perl argument", "body": "<p>Perhaps you could try something along the lines of this (Only for *nix):</p>\n\n<pre><code>perl something.pl -t happiness=\"`cat FILE.txt`\"\n</code></pre>\n\n<p>This basically turns the contents of <code>FILE.txt</code> into a string which the command line can pass to your Perl script. I would not recommend doing it this way, and as others have suggested you should provide a file name and use that to read the file from within the script</p>\n"}], "owner": {"reputation": 9, "user_id": 2012481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2baa29d38804d4c80a054ed97b3662?s=128&d=identicon&r=PG", "display_name": "user2012481", "link": "https://stackoverflow.com/users/2012481/user2012481"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1433366844, "creation_date": 1433294181, "question_id": 30609242, "link": "https://stackoverflow.com/questions/30609242/using-the-contents-of-a-file-as-a-perl-argument", "title": "Using the contents of a file as a perl argument", "body": "<p>I am trying to do the followng</p>\n\n<pre><code>perl something.pl -t happiness=LONGSTRING\n</code></pre>\n\n<p>where the LONGSTRING is very long (150,000 chars).  It was long enough to get the following message: \"OSError: [Errno 7] Argument list too long\"</p>\n\n<p>I figured instead there would be a way to redirect the output of a file. I have not succeeded in doing so however.  </p>\n\n<p>What I am looking to do is something along the lines of:</p>\n\n<pre><code>perl something.pl -t happiness=&lt;&lt;&lt;FILE.txt\n</code></pre>\n\n<p>where FILE.txt contains a bunch of text.  I have struggled in that the &lt; or &lt;&lt;&lt; is treated literally by the perl script and I am actually pushing '=&lt;&lt;\n"}, {"tags": ["perl", "perlbrew"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 4967535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2ce03e0d44575898a77e53c5efaa4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Khiem Nguyen", "link": "https://stackoverflow.com/users/4967535/khiem-nguyen"}, "edited": false, "score": 0, "creation_date": 1433311933, "post_id": 30609334, "comment_id": 49291010, "body": "I found it, I forget to run perlbrew before plackup. Thanks for your help."}], "tags": [], "owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "is_accepted": true, "score": 1, "last_activity_date": 1433294903, "creation_date": 1433294903, "answer_id": 30609334, "question_id": 30609209, "link": "https://stackoverflow.com/questions/30609209/plackup-cannot-use-specific-perl-version/30609334#30609334", "title": "Plackup cannot use specific perl version", "body": "<p>Use <code>which plackup</code> to find the plackup script, then change the first line to use the full path of your Perl 5.16 install.</p>\n"}], "owner": {"reputation": 7, "user_id": 4967535, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2ce03e0d44575898a77e53c5efaa4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Khiem Nguyen", "link": "https://stackoverflow.com/users/4967535/khiem-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 30609334, "answer_count": 1, "score": -1, "last_activity_date": 1433294903, "creation_date": 1433293955, "question_id": 30609209, "link": "https://stackoverflow.com/questions/30609209/plackup-cannot-use-specific-perl-version", "title": "Plackup cannot use specific perl version", "body": "<p>My application is using plackup and it required perl version 5.16 for my app can run well. I used perlbrew  to downgrade current perl version(5.18) to 5.16 then here is perl --version output</p>\n\n<pre><code>This is perl 5, version 16, subversion 0 (v5.16.0) built for darwin-2level\n</code></pre>\n\n<p>(with 1 registered patch, see perl -V for more detail)</p>\n\n<p>Copyright 1987-2012, Larry Wall</p>\n\n<p>Perl may be copied only under the terms of either the Artistic License or the\nGNU General Public License, which may be found in the Perl 5 source kit.</p>\n\n<p>Complete documentation for Perl, including FAQ lists, should be found on\nthis system using \"man perl\" or \"perldoc perl\".  If you have access to the\nInternet, point your browser at <a href=\"http://www.perl.org/\" rel=\"nofollow\">http://www.perl.org/</a>, the Perl Home Page.</p>\n\n<p>But my app still include perl 5.18 and shows this error</p>\n\n<blockquote>\n  <p>Can't locate Text/MicroTemplate.pm in @INC (you may need to install the Text::MicroTemplate module) (@INC contains: lib ./lib /Library/Perl/5.18/darwin-thread-multi-2level /Library/Perl/5.18 /Network/Library/Perl/5.18/darwin-thread-multi-2level /Network/Library/Perl/5.18 /Library/Perl/Updates/5.18.2/darwin-thread-multi-2level /Library/Perl/Updates/5.18.2 /System/Library/Perl/5.18/darwin-thread-multi-2level /System/Library/Perl/5.18 /System/Library/Perl/Extras/5.18/darwin-thread-multi-2level /System/Library/Perl/Extras/5.18 .)</p>\n</blockquote>\n\n<p>Please help</p>\n"}, {"tags": ["perl", "error-handling", "warnings", "diamond-operator"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1433300292, "post_id": 30608919, "comment_id": 49287291, "body": "The other cases are not all that similar to the first.  In the first, there is no script (and the message says that Perl was unable to read a script from the non-existent file).  In the others, there is a Perl script; it is a file that you were expecting the code to operate upon that was not found.  The error messages shouldn&#39;t be the same \u2014 the problem is different.  Yes, a file is missing in all the cases, but in one case, it is the Perl script file that is missing, whereas in the others it is just a file that Perl was supposed to process as an argument."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1433308538, "post_id": 30608919, "comment_id": 49289496, "body": "In other words, your code is closer to <code>perl -ne&#39;print&#39; badfile || echo error!</code>, which doesn&#39;t echo <code>error!</code>."}, {"owner": {"reputation": 1812, "user_id": 268040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52942006944f73662535117cd8c220f6?s=128&d=identicon&r=PG", "display_name": "Daniel Patru", "link": "https://stackoverflow.com/users/268040/daniel-patru"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1433334899, "post_id": 30608919, "comment_id": 49306447, "body": "@JonathanLeffler: Thanks for pointing out my error. It seems like perl always ignores bad files (-p, -n, &lt;&gt;). I changed the question to make it clearer. The solution is still useful though."}], "answers": [{"tags": [], "owner": {"reputation": 1812, "user_id": 268040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52942006944f73662535117cd8c220f6?s=128&d=identicon&r=PG", "display_name": "Daniel Patru", "link": "https://stackoverflow.com/users/268040/daniel-patru"}, "is_accepted": false, "score": 1, "last_activity_date": 1433335489, "last_edit_date": 1433335489, "creation_date": 1433291915, "answer_id": 30608920, "question_id": 30608919, "link": "https://stackoverflow.com/questions/30608919/how-to-make-perl-throw-an-error-for-invalid-or-nonexistent-files/30608920#30608920", "title": "How to make perl throw an error for invalid or nonexistent files?", "body": "<p>Use <code>local $SIG{__WARN__} = sub { die @_ };</code> to set the warning handler to throw an error.</p>\n\n<pre><code>$ # Put handler code in BEGIN block for -p and -n:\n$ perl -pe 'BEGIN{$SIG{__WARN__}=sub{die @_}}' badfile || echo error\nCan't open badfile: No such file or directory.\nerror\n$\n$ perl -ne 'BEGIN{$SIG{__WARN__}=sub{die @_}}' badfile || echo error\nCan't open badfile: No such file or directory.\nerror\n$\n$ perl -e '$SIG{__WARN__}=sub{die @_}; print while &lt;&gt;;' badfile || echo error\nCan't open badfile: No such file or directory at -e line 1.\nerror\n$ \n</code></pre>\n"}], "owner": {"reputation": 1812, "user_id": 268040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/52942006944f73662535117cd8c220f6?s=128&d=identicon&r=PG", "display_name": "Daniel Patru", "link": "https://stackoverflow.com/users/268040/daniel-patru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1433335924, "creation_date": 1433291915, "last_edit_date": 1433335924, "question_id": 30608919, "link": "https://stackoverflow.com/questions/30608919/how-to-make-perl-throw-an-error-for-invalid-or-nonexistent-files", "title": "How to make perl throw an error for invalid or nonexistent files?", "body": "<p>Using perl with the -p or -n flags or with the diamond operator on non-existent files will not exit with an error:</p>\n\n<pre><code>$ perl -pe '' badfile || echo error\nCan't open badfile: No such file or directory.\n$\n$ perl -ne '' badfile || echo error\nCan't open badfile: No such file or directory.\n$\n$  perl -e 'print while &lt;&gt;' badfile || echo error\nCan't open badfile: No such file or directory at -e line 1.\n$\n</code></pre>\n\n<p>How can I force perl to throw an error, not just a warning, when given a bad file?</p>\n"}, {"tags": ["arrays", "perl", "gd-graph"], "answers": [{"comments": [{"owner": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "edited": false, "score": 0, "creation_date": 1433291883, "post_id": 30608896, "comment_id": 49285183, "body": "I&#39;ve seen that done before. However I am interested in combining multiple array variables into an array of arrays. I tried applying <code>my @data = ([@t],[@g]);</code> and it still does not like it."}, {"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "reply_to_user": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "edited": false, "score": 0, "creation_date": 1433294390, "post_id": 30608896, "comment_id": 49285842, "body": "OK, instead of the array constructor, you can use references.  @data = (\\@t, \\@g);"}, {"owner": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "edited": false, "score": 0, "creation_date": 1433294519, "post_id": 30608896, "comment_id": 49285869, "body": "The references worked. Also I had the <code>graph-&gt;plot</code> line wrong. I needed to use references there too."}], "tags": [], "owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "is_accepted": true, "score": 1, "last_activity_date": 1433291719, "creation_date": 1433291719, "answer_id": 30608896, "question_id": 30608764, "link": "https://stackoverflow.com/questions/30608764/creating-an-array-of-arrays-for-gdgraph/30608896#30608896", "title": "Creating an array of arrays for GD::Graph", "body": "<p>Looks like @data is just a single dimension array with 8 elements.</p>\n\n<p>You can define array of arrays by using the anonymous array constructor []</p>\n\n<pre><code>my @data = (\n    [1, 2, 3, 4],\n    [2, 4, 5, 6]\n);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 1, "creation_date": 1487266569, "post_id": 42279790, "comment_id": 71718480, "body": "Here&#39;s why: Perl 4 didn&#39;t have references, nor lists in lists, so it flattened all lists: <code>(@t, @g)</code> was the concatenation of <code>@t</code> and <code>@g</code>; obviously it would have broken a lot of code if Perl 5 had changed this."}], "tags": [], "owner": {"reputation": 438, "user_id": 1000756, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/84bbaab274ecb471236308e8382036fc?s=128&d=identicon&r=PG", "display_name": "taiko", "link": "https://stackoverflow.com/users/1000756/taiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1487263659, "last_edit_date": 1487263659, "creation_date": 1487263140, "answer_id": 42279790, "question_id": 30608764, "link": "https://stackoverflow.com/questions/30608764/creating-an-array-of-arrays-for-gdgraph/42279790#42279790", "title": "Creating an array of arrays for GD::Graph", "body": "<p>For me using array references did the trick</p>\n\n<pre><code>my @t = (1, 2, 3, 4);\nmy @g = (2, 4, 5, 6);\nmy @data = (\\@t, \\@g);\n</code></pre>\n\n<p>and the plot the chart with fro example:</p>\n\n<pre><code>my $graph = new GD::Graph::lines(800,600 );\nmy $gd = $graph-&gt;plot( \\@data );\nopen OUT, \"&gt;\",\"whatever.png\" or die \"Couldn't open for output: $!\";\nbinmode(OUT);\nprint OUT $gd-&gt;png( );\nclose OUT;\n</code></pre>\n"}], "owner": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 30608896, "answer_count": 2, "score": 0, "last_activity_date": 1487263659, "creation_date": 1433290753, "last_edit_date": 1433294561, "question_id": 30608764, "link": "https://stackoverflow.com/questions/30608764/creating-an-array-of-arrays-for-gdgraph", "title": "Creating an array of arrays for GD::Graph", "body": "<p>All right, I'm trying to make an array of arrays in Perl for use with the GD::Graph module. And I can't figure out why the following is not valid array of arrays for GD::Graph.</p>\n\n<pre><code>my @t = (1, 2, 3, 4);\nmy @g = (2, 4, 5, 6);\nmy @data = (@t, @g);\n</code></pre>\n\n<p>I've also tried constructing the data like below, and it still does not like it.</p>\n\n<pre><code>my @data;\npush @data, @t;\npush @data, @g;\n</code></pre>\n\n<p>I want to keep my values in seperate arrays and just combine them for use with GD::Graph, because that is what I've found to be the easiest way, even if it is ugly. How would I go about creating a valid structure for use with GD::Graph, that is created on the fly?</p>\n\n<p>It complains about it here.</p>\n\n<pre><code>my $gd = $graph-&gt;plot(\\@data) or die $graph-&gt;error;\n</code></pre>\n"}, {"tags": ["perl", "sorting"], "comments": [{"owner": {"reputation": 18344, "user_id": 119326, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b29825e83c1da695da0e22b4198a0105?s=128&d=identicon&r=PG", "display_name": "Cfreak", "link": "https://stackoverflow.com/users/119326/cfreak"}, "edited": false, "score": 2, "creation_date": 1433287176, "post_id": 30608175, "comment_id": 49283961, "body": "Numeric comparison is <code>==</code> in perl. <code>eq</code> is string comparison. You need <code>if( $gap == 0)</code>  Also <code>int</code> is a function. Perl doesn&#39;t do types."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1433287312, "post_id": 30608175, "comment_id": 49284004, "body": "No <code>use strict;</code> and no <code>use warnings;</code> and no <code>my</code> variables.  That bodes ill...  At the least, protect yourself from the implication that you don&#39;t know about these important tools by showing that you&#39;re using them."}, {"owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "edited": false, "score": 3, "creation_date": 1433287329, "post_id": 30608175, "comment_id": 49284012, "body": "Are you asking the compiler to show you as many errors as possible with <code>use strict</code> and <code>use warnings</code>?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 2, "creation_date": 1433287653, "post_id": 30608175, "comment_id": 49284083, "body": "Note that you should show us an MCVE (<a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>).  It isn&#39;t even very hard.  You could create <code>my @tab = ( 19, 13, 2, 5, 3, 11, 17, 7 );</code> and <code>my $n = scalar(@tab);</code>  and a printing function that shows the before and after state of the array. It&#39;s an extra 10 lines of code, but makes all the difference in how well your question will be received.  It is not unknown for there to be problems in the supporting code...showing it means we can fix it.  Did you print <code>$gap</code>?  <code>swap</code> isn&#39;t a core function; have you tested it? Show it!"}, {"owner": {"reputation": 107, "user_id": 4423659, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y71JC.png?s=128&g=1", "display_name": "Plusce", "link": "https://stackoverflow.com/users/4423659/plusce"}, "edited": false, "score": 0, "creation_date": 1433289300, "post_id": 30608175, "comment_id": 49284475, "body": "Ok, I improved the upper code. Earlier I copied unconverted function (I &#39;translate&#39; it from C++), my mistake. Now the sort still doesn&#39;t work - I can&#39;t print a count of $gap. What can I do? I also set &quot;use strict&quot; and &quot;use warnings&quot;. The compiler inform only, that my variables requires &quot;explicit package (I wrote my first larger program in Perl, and I use many times the same names of variables)."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 4423659, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y71JC.png?s=128&g=1", "display_name": "Plusce", "link": "https://stackoverflow.com/users/4423659/plusce"}, "edited": false, "score": 0, "creation_date": 1433346438, "post_id": 30609258, "comment_id": 49315768, "body": "Thank you :). Now everythig works like I wanted to. I will remember your advices."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": true, "score": 2, "last_activity_date": 1433294359, "last_edit_date": 1495542115, "creation_date": 1433294359, "answer_id": 30609258, "question_id": 30608175, "link": "https://stackoverflow.com/questions/30608175/comb-sort-doesnt-work-in-perl/30609258#30609258", "title": "Comb_sort doesn&#39;t work in Perl", "body": "<p>The revised code uses <code>$n</code> but never sets it.  If you used <code>use warnings;</code> and <code>use strict;</code>, you would have known about that problem.  With those directives, I get:</p>\n\n<pre><code>$ perl comb.pl\nGlobal symbol \"$n\" requires explicit package name at comb.pl line 20.\nExecution of comb.pl aborted due to compilation errors.\n$\n</code></pre>\n\n<p>There are only 5 variables in the code, including the <code>$n</code>, so there's only a need for <code>my</code> to appear 5 times.</p>\n\n<p>With <code>$n</code> set to the initial value of <code>$gap</code> (aka <code>scalar(@tab)</code>), the code sorts your data set OK, and mine.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy @tab = ( 19, 13, 2, 5, 3, 11, 17, 7 );\n#my @tab = (1,3,5,22,2,12,1);\nmy $gap = scalar(@tab);\nmy $replace = 1;\nmy $n = $gap;\n\nprint \"Unsorted array: @tab\\n\";\n\nwhile ($gap&gt;1 || $replace)\n{\n    $gap = ($gap * 10) / 13;\n    $gap = 1 if ($gap == 0);\n    print \"Gap = $gap\\n\";\n\n    $replace = 0;\n    for (my $i=0; $i+$gap &lt; $n; $i++)\n    {\n        if ($tab[$i]&gt;$tab[$i+$gap])\n        {\n            ($tab[$i], $tab[$i+$gap]) = ($tab[$i+$gap],$tab[$i]);\n            $replace = 1;\n        }\n    }\n}\n\nprint \"Sorted array: @tab\\n\";\n</code></pre>\n\n<p>Sample run &mdash; your data</p>\n\n<pre><code>Unsorted array: 1 3 5 22 2 12 1\nGap = 5.38461538461539\nGap = 4.14201183431953\nGap = 3.18616294947656\nGap = 2.45089457652043\nGap = 1.88530352040033\nGap = 1.45023347723102\nGap = 1.11556421325463\nGap = 0.85812631788818\nSorted array: 1 1 2 3 5 12 22\n</code></pre>\n\n<p>Sample run &mdash; my data</p>\n\n<pre><code>Unsorted array: 19 13 2 5 3 11 17 7\nGap = 6.15384615384615\nGap = 4.73372781065089\nGap = 3.64132908511607\nGap = 2.80102237316621\nGap = 2.15463259474323\nGap = 1.65740968826403\nGap = 1.27493052943387\nGap = 0.980715791872205\nSorted array: 2 3 5 7 11 13 17 19\n</code></pre>\n\n<p>If you plan to ask any more questions about Perl on SO, please make sure you've fixed all the obvious problems reported by using <code>use strict;</code> and <code>use warnings;</code> &mdash; or, if you can't, your question should be about how to fix the specific warning or error you're getting.</p>\n\n<p>Please remember to study how to create an MCVE (<a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>) or\nSSCCE (<a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">Short, Self-Contained, Correct Example</a>) &mdash; two names and links for the same basic idea.</p>\n"}], "owner": {"reputation": 107, "user_id": 4423659, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y71JC.png?s=128&g=1", "display_name": "Plusce", "link": "https://stackoverflow.com/users/4423659/plusce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 30609258, "answer_count": 1, "score": 0, "last_activity_date": 1433294359, "creation_date": 1433287065, "last_edit_date": 1433289520, "question_id": 30608175, "link": "https://stackoverflow.com/questions/30608175/comb-sort-doesnt-work-in-perl", "title": "Comb_sort doesn&#39;t work in Perl", "body": "<p>I wrote a comb sort in Perl. Everything looks good, but the program doesn't work and the compiler doesn't show any errors. I would like to ask you for help. The code is:</p>\n\n<pre><code>@tab = (1,3,5,22,2,12,1);\n$gap = scalar(@tab);\n$replace = 1;\n\nwhile ($gap&gt;1 || $replace)\n{\n    $gap = ($gap * 10) / 13;\n    if ($gap == 0)\n    {        \n        $gap = 1;\n    }\n\n    $replace = 0;\n    for ($i=0; $i+$gap &lt; $n ; $i++)\n    {\n        if ($tab[$i]&gt;$tab[$i+$gap])\n        {\n            ($tab[$i], $tab[$i+$gap]) = ($tab[$i+$gap],$tab[$i]);\n            $replace = 1;\n        }\n    }\n}\n\nprint \"Sorted array: @tab\";\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl", "replace", "command-line"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 2, "creation_date": 1433275609, "post_id": 30605326, "comment_id": 49279218, "body": "You need to use an HTML parser to extract only the href attribute for the a tag. <a href=\"https://stackoverflow.com/a/1732454/7552\">Obligatory link</a>"}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "edited": false, "score": 1, "creation_date": 1433275767, "post_id": 30605326, "comment_id": 49279283, "body": "<code>[^\\.jpg]</code> this doesn&#39;t mean what you think it is.."}, {"owner": {"reputation": 895, "user_id": 4859303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PW1Pz.png?s=128&g=1", "display_name": "Falt4rm", "link": "https://stackoverflow.com/users/4859303/falt4rm"}, "edited": false, "score": 0, "creation_date": 1433276431, "post_id": 30605326, "comment_id": 49279639, "body": "Hey karthik - If i learned correctly from your regex yesterday - It could be (?!\\.jpg) instead."}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "reply_to_user": {"reputation": 895, "user_id": 4859303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PW1Pz.png?s=128&g=1", "display_name": "Falt4rm", "link": "https://stackoverflow.com/users/4859303/falt4rm"}, "edited": false, "score": 0, "creation_date": 1433276628, "post_id": 30605326, "comment_id": 49279742, "body": "@Falt4rm yeah.. it could be..."}, {"owner": {"reputation": 181, "user_id": 854955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KkKlg.jpg?s=128&g=1", "display_name": "lizardhr", "link": "https://stackoverflow.com/users/854955/lizardhr"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1433280274, "post_id": 30605326, "comment_id": 49281519, "body": "@glenn jackman, thank you for the link, I&#39;m in the case of Kaitlin Duck Sherwood who explain exactly what I need now."}], "answers": [{"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433279435, "post_id": 30605831, "comment_id": 49281156, "body": "The basic flaw of this approach is that you do not check if you are in a <code>&lt;a&gt;</code> tag, you just check if there is no <code>.jpg</code> after the match. What if the extension is <code>png</code>? You need to extend the alternative list. The real way to get all the matches inside some markers is <code>\\G</code> operator."}, {"owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1433279787, "post_id": 30605831, "comment_id": 49281312, "body": "@stribizhev You right.. and i did so because we are not validating the pattern.. just replacing from pre existing pattern.. so there is no issue in the assumption i made.. also.. OP wants for <code>non .jpg</code> links..for which i think my solution is good enough.."}, {"owner": {"reputation": 181, "user_id": 854955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KkKlg.jpg?s=128&g=1", "display_name": "lizardhr", "link": "https://stackoverflow.com/users/854955/lizardhr"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433279850, "post_id": 30605831, "comment_id": 49281341, "body": "@stribizhev In this case I have only jpg but would be interesting see how  would you do with the \\G operator?"}], "tags": [], "owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "is_accepted": true, "score": 2, "last_activity_date": 1433276420, "creation_date": 1433276420, "answer_id": 30605831, "question_id": 30605326, "link": "https://stackoverflow.com/questions/30605326/regex-capture-and-replace-20-after-last-forward-slash/30605831#30605831", "title": "Regex capture and replace %20 after last forward slash", "body": "<blockquote>\n  <p>replace %20 after last forward slash of href attributes of non .jpg links</p>\n</blockquote>\n\n<p>You can use the following to match:</p>\n\n<pre><code>%20(?=(?:(?!\\.jpg\"&gt;)[^&gt;\\/])*&gt;)\n</code></pre>\n\n<p>And replace with <code>-</code></p>\n\n<p>See <a href=\"https://regex101.com/r/cS3iB6/3\" rel=\"nofollow\">DEMO</a></p>\n"}, {"comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1433280535, "post_id": 30606626, "comment_id": 49281628, "body": "I do not think this solution is good with large texts, but it is precise."}], "tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 2, "last_activity_date": 1433280291, "last_edit_date": 1433280291, "creation_date": 1433279327, "answer_id": 30606626, "question_id": 30605326, "link": "https://stackoverflow.com/questions/30605326/regex-capture-and-replace-20-after-last-forward-slash/30606626#30606626", "title": "Regex capture and replace %20 after last forward slash", "body": "<p>In order to match <code>%20</code> inside some delimiters, you can also make use of <code>\\G</code> operator (see <a href=\"http://docstore.mik.ua/orelly/perl2/prog/ch05_06.htm#ch05-sect-posit\" rel=\"nofollow\">\"Where You Left Off: The \\G Assertion\"</a>):</p>\n\n<blockquote>\n  <p>You can use <code>\\G</code> to specify the position just after the previous match.</p>\n</blockquote>\n\n<p>The regex you can use is</p>\n\n<pre><code>(&lt;a\\b[^&lt;]*?|(?&lt;!^)\\G)([^\\/]*?)%20(?=(?![^\\/]*\\.jpg\"&gt;)[^\\/\"]*\"&gt;)\n</code></pre>\n\n<p>Replace with </p>\n\n<pre><code>\\1\\2-\n</code></pre>\n\n<p>Here is <a href=\"https://regex101.com/r/gS2rS5/2\" rel=\"nofollow\">my demo</a></p>\n\n<p>In Perl-like notation, that will look like </p>\n\n<pre><code>s/(&lt;a\\b[^&lt;]*?|(?&lt;!^)\\G)([^\\/]*?)%20(?=(?![^\\/]*\\.jpg\"&gt;)[^\\/\"]*\"&gt;)/\\1\\2-/g\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 854955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KkKlg.jpg?s=128&g=1", "display_name": "lizardhr", "link": "https://stackoverflow.com/users/854955/lizardhr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 30605831, "answer_count": 2, "score": 1, "last_activity_date": 1433356320, "creation_date": 1433274632, "last_edit_date": 1433356320, "question_id": 30605326, "link": "https://stackoverflow.com/questions/30605326/regex-capture-and-replace-20-after-last-forward-slash", "title": "Regex capture and replace %20 after last forward slash", "body": "<p>I have a tsv file with a lot of HTML inside.</p>\n\n<p>I need to replace <code>%20</code> after last forward slash of href attributes of non .jpg links.\nI'm trying with Perl on command line, I need help with the regex.</p>\n\n<p>I have tried some regex, this is in the live test (link next below):</p>\n\n<pre><code>&lt;a\\ [^&gt;]*href=\"([^\"]+(%20)+)[^\\.jpg][^\\/]\"[^&gt;]?&gt;\n</code></pre>\n\n<p>It matches only one <code>&lt;a&gt;</code> tag and captures only the last occurrence of <code>%20</code>.</p>\n\n<p><a href=\"https://regex101.com/r/cS3iB6/1\" rel=\"nofollow\">Here a live test with a sample of tsv.</a></p>\n\n<p>I could have:</p>\n\n<pre><code>&lt;a href=\"http://example.com/path/to-some-folder/another%20folder/one%20more520folder/34%20-%20kv34%20-%20tomba%20di%20thumtmose%20iii\"&gt;text&lt;/a&gt;\n</code></pre>\n\n<p>I must match all of <code>%20</code> after the last forward slash and replace them with <code>-</code>.</p>\n\n<p>or:</p>\n\n<pre><code>&lt;a href=\"http://example.com/path/to-some-folder/another%20folder/one%20more520folder/uploads/2012/02/some%20folder/another%20folder/09%20antichi%20egizi%20-%20Tomba%20di%20Tutankhamen.jpg\"&gt; &lt;img border=\"0\" src=\"http://example.com/path/to-some-folder/another%20folder/one%20more520folder/uploads/2012/02/some%20folder/another%20folder/09%20antichi%20egizi%20-%20Tomba%20di%20Tutankhamen%20ante.jpg\" width=\"80\" height=\"92\" alt=\"09 antichi egizi - Tomba di Tutankhamen\" /&gt;&lt;/a&gt;\n</code></pre>\n\n<p>I <strong>must not</strong> match .jpg's href attributes so the last example above need to remain untouched. </p>\n\n<p>I have also tried this one that matches all expected<code>&lt;a&gt;</code> tags but I don't know how to capture only all of <code>%20</code> after the last slash to subsequently apply the replace:</p>\n\n<pre><code>&lt;a [^&gt;]*href=\"([^\"]+)[^\\.jpg][^\\/]\"[^&gt;]?&gt;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/cS3iB6/2\" rel=\"nofollow\">https://regex101.com/r/cS3iB6/2</a></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2954, "user_id": 2905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0eb53c993d09b1135375938f9727c28?s=128&d=identicon&r=PG", "display_name": "asjo", "link": "https://stackoverflow.com/users/2905/asjo"}, "edited": false, "score": 2, "creation_date": 1433268330, "post_id": 30603319, "comment_id": 49275042, "body": "Try printing $@ after the eval; you&#39;ll see any errors."}], "answers": [{"tags": [], "owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "is_accepted": true, "score": 7, "last_activity_date": 1433268251, "creation_date": 1433268251, "answer_id": 30603380, "question_id": 30603319, "link": "https://stackoverflow.com/questions/30603319/is-my-eval-wrong-or-do-i-not-understand-eq-vs-in-perl/30603380#30603380", "title": "Is my eval wrong or do I not understand eq vs == in Perl", "body": "<p>You're using barewords in strict mode, which is an error:</p>\n\n<pre><code>$ perl -e 'use strict; cat eq cat'\nBareword \"cat\" not allowed while \"strict subs\" in use at -e line 1.\nBareword \"cat\" not allowed while \"strict subs\" in use at -e line 1.\nExecution of -e aborted due to compilation errors.\n</code></pre>\n\n<p>Whenever you <code>eval</code> a string, you should check <code>$@</code> to see if there was an error.</p>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 3, "last_activity_date": 1433269486, "last_edit_date": 1433269486, "creation_date": 1433268264, "answer_id": 30603383, "question_id": 30603319, "link": "https://stackoverflow.com/questions/30603319/is-my-eval-wrong-or-do-i-not-understand-eq-vs-in-perl/30603383#30603383", "title": "Is my eval wrong or do I not understand eq vs == in Perl", "body": "<p>You have barewords, not strings, so you'll have to compare them as variables.</p>\n\n<pre><code>my $cmd = qq{\\$arg1 $op \\$arg2};\n</code></pre>\n\n<p>Instead of <code>eval</code>, consider using functions,</p>\n\n<pre><code>my %f = (\n  \"eq\" =&gt; sub { my ($x, $y) = @_; $x eq $y },\n  \"==\" =&gt; sub { my ($x, $y) = @_; $x == $y },\n  # ..\n);\n# ..\n$f{$op} or die \"unknown $op\";\nmy $rc = $f{$op}-&gt;($arg1, $arg2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1433276983, "last_edit_date": 1433276983, "creation_date": 1433269226, "answer_id": 30603667, "question_id": 30603319, "link": "https://stackoverflow.com/questions/30603319/is-my-eval-wrong-or-do-i-not-understand-eq-vs-in-perl/30603667#30603667", "title": "Is my eval wrong or do I not understand eq vs == in Perl", "body": "<p>You want</p>\n\n<pre><code>my $cmd = \"\\$arg1 $op \\$arg2\";\n</code></pre>\n\n<p>This will assign the string</p>\n\n<pre><code>$arg1 eq $arg2\n</code></pre>\n\n<p>to <code>$cmd</code> instead of</p>\n\n<pre><code>cat eq cat\n</code></pre>\n\n<p>which is illegal under <code>use strict;</code>. Had you checked the exception <code>eval</code> caught (<code>$@</code>), you would have known this.</p>\n\n<hr>\n\n<p>But why are you using <code>eval</code> at all?</p>\n\n<pre><code>my $rc;\nif ($op eq '=') {\n   $rc = $arg1 == $arg2;\n} else {\n   $rc = $arg1 eq $arg2;\n}\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>my $rc = $op eq '=' ? $arg1 == $arg2 : $arg1 eq $arg2;\n</code></pre>\n\n<p>If you actually have more than two ops, you might want to use use a dispatch table instead.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 4488367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cf78560f649ae3b47a96bead62f2f08?s=128&d=identicon&r=PG&f=1", "display_name": "wtong", "link": "https://stackoverflow.com/users/4488367/wtong"}, "is_accepted": false, "score": 0, "last_activity_date": 1433269711, "creation_date": 1433269711, "answer_id": 30603794, "question_id": 30603319, "link": "https://stackoverflow.com/questions/30603319/is-my-eval-wrong-or-do-i-not-understand-eq-vs-in-perl/30603794#30603794", "title": "Is my eval wrong or do I not understand eq vs == in Perl", "body": "<p>Hmm.. I don't really understand what you want from your script. But your eval expression is in fact expended into:</p>\n\n<p>eval cat eq cat || 0;</p>\n\n<p>which makes no sense at all.</p>\n\n<p>If you are trying to compare whether $arg1 is the same as $arg2, why not do it directly?</p>\n\n<p>$rc=0;\n$rc=1 if ($arg1 eq $arg2);</p>\n"}, {"comments": [{"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 1, "creation_date": 1433307274, "post_id": 30604086, "comment_id": 49289077, "body": "Nice and simple ... operators in a lookup table and no need for <code>overload</code>."}], "tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 8, "last_activity_date": 1433281576, "last_edit_date": 1433281576, "creation_date": 1433270623, "answer_id": 30604086, "question_id": 30603319, "link": "https://stackoverflow.com/questions/30603319/is-my-eval-wrong-or-do-i-not-understand-eq-vs-in-perl/30604086#30604086", "title": "Is my eval wrong or do I not understand eq vs == in Perl", "body": "<p>Others have pointed out the root of your problem. I am going to recommend you avoid using string <code>eval</code> for this purpose. Instead, you can use a lookup table:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nmy %ops = (\n'=' =&gt; sub { $_[0] eq $_[1] },\n);\n\nwhile(my $test = &lt;DATA&gt;) {\n    next unless $test =~ /\\S/;\n    $test =~ s/\\s+\\z//;\n    my ($arg1, $arg2, $op ) = split /,/, $test;\n    if ($ops{$op}-&gt;($arg1, $arg2)) {\n        print \"'$arg1' $op '$arg2' is true\\n\";\n    }\n}\n__DATA__\ncat,cat,=\n</code></pre>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 30603380, "answer_count": 5, "score": 4, "last_activity_date": 1433303572, "creation_date": 1433268011, "last_edit_date": 1433303572, "question_id": 30603319, "link": "https://stackoverflow.com/questions/30603319/is-my-eval-wrong-or-do-i-not-understand-eq-vs-in-perl", "title": "Is my eval wrong or do I not understand eq vs == in Perl", "body": "<p>I am having trouble understand eval or maybe I do not understand <code>eq</code> vs <code>==</code>.\nI have this short Perl script:</p>\n\n<pre><code>[red@tools-dev1 ~]$ cat so.pl\n#!/usr/local/bin/perl -w\nuse strict;\n\nwhile(&lt;DATA&gt;) {\n    chomp;\n    my ($arg1, $arg2, $op ) = split /,/;\n    if ( $op eq '=' ) {\n        $op = 'eq';\n    }\n    my $cmd = \"$arg1 $op $arg2\";\n    print \"[$cmd]\\n\";\n    my $rc = eval $cmd || 0;\n    print \"rc is [$rc]\\n\";\n}\n\n__DATA__\ncat,cat,=\n</code></pre>\n\n<p>When I execute it I get:</p>\n\n<pre><code>[red@tools-dev1 ~]$ ./so.pl\n[cat eq cat]\nrc is [0]\n</code></pre>\n\n<p>One would think that you'd get ...</p>\n\n<pre><code>[cat eq cat]\nrc is [1]\n</code></pre>\n\n<p>... since \"cat\" equals \"cat\", right?</p>\n"}, {"tags": ["perl", "cgi"], "comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 2, "creation_date": 1433268948, "post_id": 30603013, "comment_id": 49275412, "body": "You&#39;re pretty well going to have to go the CGI route in some fashion... otherwise you&#39;ll just have to create some intermediary translator which will certainly cause grief in the long term."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1433347847, "post_id": 30603013, "comment_id": 49316715, "body": "<code>Mojolicious::Lite</code> is perhaps a better place to look that CGI."}], "answers": [{"tags": [], "owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "is_accepted": false, "score": 1, "last_activity_date": 1434399941, "creation_date": 1434399941, "answer_id": 30854372, "question_id": 30603013, "link": "https://stackoverflow.com/questions/30603013/what-is-the-best-way-to-create-a-web-interface-to-an-interactive-perl-script/30854372#30854372", "title": "What is the best way to create a web interface to an interactive perl script?", "body": "<p>If you are using CGI these days you might as well be using something modern and fast like <a href=\"http://www.plackperl.org\" rel=\"nofollow\">Plack</a>. Since Plack will wrap a CGI style application you can even use a CGI application \"inside\" Plack to get modern features, pluggable middleware, etc., alongside olde-fashioned 1990's traditions.  </p>\n\n<p>Depending on how complex your application is there's a number of small frameworks and helper modules that can make working with Plack easier.  Converting a console application to use a web interface might be easier if you use something like <a href=\"https://metacpan.org/release/Squatting\" rel=\"nofollow\">Squatting</a> or <a href=\"https://github.com/naturalist/kelp\" rel=\"nofollow\">Kelp</a>.</p>\n"}], "owner": {"reputation": 613, "user_id": 1362234, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/6b38ca0583d3bf3c4227d869dbc54a5f?s=128&d=identicon&r=PG", "display_name": "XVirtusX", "link": "https://stackoverflow.com/users/1362234/xvirtusx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1434399941, "creation_date": 1433266980, "last_edit_date": 1433267627, "question_id": 30603013, "link": "https://stackoverflow.com/questions/30603013/what-is-the-best-way-to-create-a-web-interface-to-an-interactive-perl-script", "title": "What is the best way to create a web interface to an interactive perl script?", "body": "<p>I have a interactive perl shell script that asks the user for some input and accordingly with his choice the script returns another set of options to choose from.\nNow, soon I will have a demand to create a web interface for it. No more black terminals with blinking prompt for our users.\nI was wondering what is the best way to pull this off with minimum changes to the original script? How to keep the script running and wait for user input? What is the best way to send user input to the script and then return it?\nOr should I refactor the script to use CGI? I want to hear some general direction that I should take. I already know just the basic of Perl and CGI.</p>\n"}, {"tags": ["perl", "parsing"], "comments": [{"owner": {"reputation": 11125, "user_id": 1387174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c4cb458658b24227da74b4dea41075?s=128&d=identicon&r=PG", "display_name": "Serlite", "link": "https://stackoverflow.com/users/1387174/serlite"}, "edited": false, "score": 0, "creation_date": 1433265073, "post_id": 30602289, "comment_id": 49273163, "body": "Please indicate the language you are trying to parse the file with, and show us any code from your previous attempts at solving this problem. You&#39;ve given too little information to work off of."}, {"owner": {"reputation": 295, "user_id": 2950530, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d6003430e52ec5d90a7293fff4248f46?s=128&d=identicon&r=PG", "display_name": "AdrianP.", "link": "https://stackoverflow.com/users/2950530/adrianp"}, "reply_to_user": {"reputation": 11125, "user_id": 1387174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42c4cb458658b24227da74b4dea41075?s=128&d=identicon&r=PG", "display_name": "Serlite", "link": "https://stackoverflow.com/users/1387174/serlite"}, "edited": false, "score": 0, "creation_date": 1433265742, "post_id": 30602289, "comment_id": 49273592, "body": "I was wondering if a combination of bash/sed/awk would work? Unfortunately, I am not sure how to approach this problem."}], "answers": [{"tags": [], "owner": {"reputation": 295, "user_id": 2950530, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d6003430e52ec5d90a7293fff4248f46?s=128&d=identicon&r=PG", "display_name": "AdrianP.", "link": "https://stackoverflow.com/users/2950530/adrianp"}, "is_accepted": false, "score": 0, "last_activity_date": 1433281730, "creation_date": 1433281730, "answer_id": 30607215, "question_id": 30602289, "link": "https://stackoverflow.com/questions/30602289/add-a-line-after-every-string-match/30607215#30607215", "title": "Add a line after every string match", "body": "<p>The following perl script worked</p>\n\n<pre><code>my $in=shift;\nopen(IN, $in); while(&lt;IN&gt;){\n    print $_;\n    if ($_ =~ /gnl\\|CorradiLab\\|/) {\n        my $tmp = $_;\n        $tmp =~ s/protein_id/transcript_id/;\n            print $tmp;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1433347691, "creation_date": 1433347691, "answer_id": 30625312, "question_id": 30602289, "link": "https://stackoverflow.com/questions/30602289/add-a-line-after-every-string-match/30625312#30625312", "title": "Add a line after every string match", "body": "<p>Offering an update on existing answer because I feel it can be improved further:\nGenerally - the precise problem in the OP is this line:</p>\n\n<pre><code> if ($_ ~= /gnl\\|CorradiLab\\|/) {\n</code></pre>\n\n<p>Because you've got <code>~=</code> not <code>=~</code>. That's what <code>syntax error at test.pl line 3, near \"$_ ~\"</code> is trying to tell you. </p>\n\n<p>I would offer that improving on: </p>\n\n<pre><code>my $in=shift;\nopen(IN, $in); while(&lt;IN&gt;){\n    print $_;\n    if ($_ =~ /gnl\\|CorradiLab\\|/) {\n        my $tmp = $_;\n        $tmp =~ s/protein_id/transcript_id/;\n            print $tmp;\n    }\n}\n</code></pre>\n\n<ul>\n<li><code>while ( my $tmp = &lt;IN&gt; ) {</code> skips the need to assign <code>$_</code>. </li>\n<li>3 argument <code>open</code> with lexical filehandle is preferable. E.g. <code>open ( my $in, \"&lt;\", \"$input_filename\" ) or die $!;</code> (You should test whether the <code>open</code> worked too)</li>\n<li>Explicit open may well be unnecessary if you're just reading a filename from command line. Using <code>&lt;&gt;</code> either reads filenames (opening and processing) or <code>STDIN</code>, which means your script becomes a bit more versatile. </li>\n</ul>\n\n<p>Thus I would rewrite as:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile ( my $line = &lt;&gt; ) {\n    print $line;\n    if ( $line =~ /gnl\\|CorradiLab\\|/ ) {\n        $line =~ s/protein_id/transcript_id/;\n        print $line;\n    }\n}\n</code></pre>\n\n<p>Or alternatively:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nwhile (&lt;&gt;) {\n    print;\n    if (m/gnl\\|CorradiLab\\|/) {\n        s/protein_id/transcript_id/;\n        print;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 295, "user_id": 2950530, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/d6003430e52ec5d90a7293fff4248f46?s=128&d=identicon&r=PG", "display_name": "AdrianP.", "link": "https://stackoverflow.com/users/2950530/adrianp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1433347691, "creation_date": 1433264611, "last_edit_date": 1433274758, "question_id": 30602289, "link": "https://stackoverflow.com/questions/30602289/add-a-line-after-every-string-match", "title": "Add a line after every string match", "body": "<p>I have a sample file here <a href=\"http://pastebin.com/m5m40nGF\" rel=\"nofollow\">http://pastebin.com/m5m40nGF</a></p>\n\n<p>What I want to do is add a line after every instance of protein_id.\nprotein_id always has the same pattern:\nTAB-TAB-TAB-protein_id-TAB-gnl|CorradiLab|M715_#SOME_NUMBER</p>\n\n<p>What I need to do is to add this after every line of protein_id:\nTAB-TAB-TAB-transcript_id-TAB-gnl|CorradiLab|M715_mRNA_#SOME_NUMBER</p>\n\n<p>The catch is that #SOME_NUMBER has to stay the same.</p>\n\n<p>In the first case, it would look like this:\n94      1476    CDS\n                        protein_id      gnl|CorradiLab|M715_ECU01_0190\n                        transcript_id      gnl|CorradiLab|M715_mRNA_ECU01_0190\n                        product serine hydroxymethyltransferase\n                        label   serine hydroxymethyltransferase  </p>\n\n<p>Thanks! Adrian</p>\n\n<p>I tried a perl solution, but I get an error.</p>\n\n<pre><code>open(IN, $in); while(&lt;IN&gt;){\n   print $_;\n   if ($_ ~= /gnl\\|CorradiLab\\|/) {\n       $_ =~ s/tprotein_id/transcript_id/;\n       print $_;\n   }\n    }\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>syntax error at test.pl line 3, near \"$_ ~\"\nsyntax error at test.pl line 7, near \"}\"\nExecution of test.pl aborted due to compilation errors.\n</code></pre>\n"}, {"tags": ["perl", "signal-handling"], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433281241, "post_id": 30606567, "comment_id": 49281962, "body": "This doesn&#39;t work if you Ctrl-C to exit the debugger itself, which I assume is what the OP is asking about."}, {"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1433338850, "post_id": 30606567, "comment_id": 49309708, "body": "Yup! TSBN got it right! I&#39;d love to understand in some more depth why, and how to get it to work? I guess for that one needs to be <i>familiar with the debugger&#39;s internals</i>"}], "tags": [], "owner": {"reputation": 3414, "user_id": 40285, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1574e7851a08a81faca7e0f87575510e?s=128&d=identicon&r=PG", "display_name": "Len Jaffe", "link": "https://stackoverflow.com/users/40285/len-jaffe"}, "is_accepted": false, "score": 1, "last_activity_date": 1433348261, "last_edit_date": 1433348261, "creation_date": 1433279091, "answer_id": 30606567, "question_id": 30602157, "link": "https://stackoverflow.com/questions/30602157/cleanup-tmp-dirs-when-hitting-ctrl-c-from-perl-d-debug-session/30606567#30606567", "title": "Cleanup tmp dirs when hitting CTRL-C from perl -d debug session", "body": "<p>I like to use an END block.  The any clean exit from the program, especially a 'quit' from the debugger will trigger the END block an, in my case, delete all my test data.</p>\n\n<p>So put your clean up code in and END block have have you sig handler call exit() instead of remove_tree.</p>\n\n<pre><code> END {\n   remove_tree $work_dir;\n }\n\n sub signal_handler\n {\n     exit();\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1433339196, "post_id": 30607072, "comment_id": 49310015, "body": "nice workaround with the undef ... and, yes, normally I try to be civil and exit with <code>q</code>. However, in some cases when I forgot to put a proper <code>b</code>, I had to interrupt ... and sometimes with successive CTRL-C <i>stuff happens</i> and I was hoping/looking how to get around that! Thanks"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "edited": false, "score": 0, "creation_date": 1433343736, "post_id": 30607072, "comment_id": 49313606, "body": "You could always add your breakpoint and then restart with <code>R</code>. But I know what you mean, I Ctrl-C out of the debugger too, sometimes."}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1433297226, "last_edit_date": 1433297226, "creation_date": 1433281089, "answer_id": 30607072, "question_id": 30602157, "link": "https://stackoverflow.com/questions/30602157/cleanup-tmp-dirs-when-hitting-ctrl-c-from-perl-d-debug-session/30607072#30607072", "title": "Cleanup tmp dirs when hitting CTRL-C from perl -d debug session", "body": "<p>Your signal handler isn't doing what you think it does, because passing an object to <code>remove_tree</code> doesn't work:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse File::Path qw(remove_tree);\nuse File::Temp;\n\nmy $tmpdir = File::Temp-&gt;newdir(CLEANUP =&gt; 0);\nremove_tree $tmpdir;\n\nsay \"$tmpdir still exists\" if -d $tmpdir;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/tmp/lTfotn79RD still exists\n</code></pre>\n\n<p>The call to <code>remove_tree</code> in your signal handler <em>seems</em> to work when run outside of the debugger, but it's actually not doing anything. (You can prove this to yourself by commenting out the call to <code>remove_tree</code> and re-running your script.) So why does the directory get removed?</p>\n\n<p>If a signal handler doesn't <code>exit</code> or <code>die</code>, execution continues wherever it left off before the signal was caught. In your case, after the signal handler finishes, the program simply runs to completion. When the program terminates, any objects that are still in scope are cleaned up by calling their <code>DESTROY</code> methods. <code>File::Temp-&gt;newdir</code> returns a <code>File::Temp::Dir</code> object; this object's <code>DESTROY</code> method is what actually removes the directory from the filesystem (it uses <code>rmtree</code> under the hood).</p>\n\n<p>This doesn't work when you interrupt the debugger; I'm not familiar with the debugger's internals, but I'm guessing it keeps references to objects so that <code>DESTROY</code> isn't called, even when you step off the end of the program. If you <kbd>Ctrl</kbd>+<kbd>C</kbd> again at this point, the object is never cleaned up, and neither is the temporary directory.</p>\n\n<p>One way I found to work around this is to explicitly <code>undef</code> the object returned by <code>File::Temp-&gt;newdir</code> in your signal handler:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse File::Temp;\n\nuse sigtrap qw(handler cleanup normal-signals);\n\nmy $tmpdir = File::Temp-&gt;newdir;\n\nsub cleanup {\n    my ($sig) = @_;\n    say \"Caught signal SIG$sig\";\n    undef $tmpdir;\n    exit 0;\n}\n</code></pre>\n\n<p>This causes the <code>DESTROY</code> method to be called <em>before</em> the program exits, so you're not relying on the debugger to clean up. This seems like kind of a hack, though; why not just quit the debugger gracefully with <code>q</code>?</p>\n\n<p>Note that you could also pass the stringified version of <code>$tmpdir</code> to <code>remove_tree</code> like this:</p>\n\n<pre><code>remove_tree \"$tmpdir\";\n</code></pre>\n\n<p>But I wouldn't recommend this, since the documentation <a href=\"http://perldoc.perl.org/File/Temp.html#WARNING\" rel=\"nofollow\">strongly cautions</a> against relying on file names:</p>\n\n<blockquote>\n  <p>For maximum security, endeavour always to avoid ever looking at, touching, or even imputing the existence of the filename. You do not know that that filename is connected to the same file as the handle you have, and attempts to check this can only trigger more race conditions. It's far more secure to use the filehandle alone and dispense with the filename altogether.</p>\n</blockquote>\n"}], "owner": {"reputation": 751, "user_id": 3299282, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/669a479b873fa683ddd20e4b03d6751d?s=128&d=identicon&r=PG&f=1", "display_name": "lzc", "link": "https://stackoverflow.com/users/3299282/lzc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 30607072, "answer_count": 2, "score": 1, "last_activity_date": 1433348261, "creation_date": 1433264256, "question_id": 30602157, "link": "https://stackoverflow.com/questions/30602157/cleanup-tmp-dirs-when-hitting-ctrl-c-from-perl-d-debug-session", "title": "Cleanup tmp dirs when hitting CTRL-C from perl -d debug session", "body": "<p>For the temp directory I need in my script, I go with:</p>\n\n<pre><code>my $work_dir = File::Temp-&gt;newdir(TEMPLATE =&gt; \"/tmp/work.$$.XXXX\" ) or die \"Cannot create tempdir directory $!\";\n</code></pre>\n\n<p>My hope with <a href=\"http://search.cpan.org/~dagolden/File-Temp-0.2304/lib/File/Temp.pm#newdir\" rel=\"nofollow\">newdir()</a> is to get the promise of:</p>\n\n<p><strong>By default the directory is deleted when the object goes out of scope.</strong></p>\n\n<p>Only to learn that if I hit CTRL-C, $work_dir will <strong>NOT</strong> be removed.</p>\n\n<p>So I added signals:</p>\n\n<pre><code>use sigtrap qw(handler signal_handler normal-signals);\n</code></pre>\n\n<p>and then I simply use (File::Path 'remove_tree');</p>\n\n<pre><code>sub signal_handler\n{\n    remove_tree $work_dir;\n}\n</code></pre>\n\n<p>This helps if I hit CTRL-C while my script runs...</p>\n\n<p>However, it does NOT clean up while using the debugger, <strong>if</strong> I CTRL-C out of the debugger! If I quit out cleanly (with the q command) then it works/cleans fine, only if I CTRL-C out of the debug session, that's when $work_dir is not being removed.</p>\n\n<p>Is it possible, in any way, to have the signal handler being called automatically even within a perl debug session ?</p>\n\n<p>(or any other \"proper\" ways how to use/install signal handlers)</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433264411, "post_id": 30602168, "comment_id": 49272698, "body": "Doing <code>eval $cmd</code> is returning <code>[]</code> instead of <code>[0]</code> when <code>false</code>. Could you tell me why?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 2, "creation_date": 1433264585, "post_id": 30602168, "comment_id": 49272820, "body": "@Oktalist: no, false is a special value, not the empty string.  Compare <code>use warnings; $x = &quot;&quot;; print $x + 42;</code> to <code>use warnings; $x = 0==1; print $x + 42;</code>"}, {"owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "edited": false, "score": 0, "creation_date": 1433265378, "post_id": 30602168, "comment_id": 49273382, "body": "I was wonder how I can or if I need to use <code>eq</code> or <code>==</code>? I know that <code>==</code> works for numbers and I should use <code>eq</code> for strings, but I am not sure how to tell if a scalar is number of a string."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1433266660, "post_id": 30602168, "comment_id": 49274108, "body": "well, normally you know where the value comes from and whether you expect it to be a just a number or any string."}], "tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1433265410, "last_edit_date": 1433265410, "creation_date": 1433264280, "answer_id": 30602168, "question_id": 30602009, "link": "https://stackoverflow.com/questions/30602009/understanding-perls-eval/30602168#30602168", "title": "Understanding Perl&#39;s `eval`", "body": "<p>There are two forms of eval, and you are confusing them.  One (<code>eval BLOCK</code>) compiles BLOCK when the eval itself is compiled; the only thing it does is catch exceptions and store them in <code>$@</code>.  You are looking for <code>eval STRING</code>, which compiles and executes the Perl code in the given expression (storing any compile time errors or run time exceptions in <code>$@</code>).</p>\n\n<p>So say just <code>eval $cmd</code> instead of <code>eval { $cmd }</code>.</p>\n\n<p>Also note that the comparison operators return a special Boolean false value that is an empty string in string context but 0 in numeric context, so your output will have <code>rc is []</code>, not <code>rc is [0]</code>.</p>\n\n<p>When there is a compile error (which will happen for your <code>1 = 1</code> and <code>1 = 2</code>), eval will return undef (and as I mentioned, place the error in <code>$@</code>).</p>\n"}], "owner": {"reputation": 7936, "user_id": 759991, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/LFxFQ.jpg?s=128&g=1", "display_name": "Red Cricket", "link": "https://stackoverflow.com/users/759991/red-cricket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 30602168, "answer_count": 1, "score": 0, "last_activity_date": 1433265410, "creation_date": 1433263806, "question_id": 30602009, "link": "https://stackoverflow.com/questions/30602009/understanding-perls-eval", "title": "Understanding Perl&#39;s `eval`", "body": "<p>I am trying to understand Perl's <code>eval</code> function.\nHere is a test script I wrote:</p>\n\n<pre><code>[red@tools-dev1 ~]$ cat evaltest.pl \n#!/usr/local/bin/perl -w\nuse strict;\n\nwhile(&lt;DATA&gt;) {\n    chomp;\n    my ($arg1, $arg2, $op ) = split /,/;\n    my $cmd = \"$arg1 $op $arg2\";    \n    print \"$cmd\\n\"; \n    my $rc = eval { $cmd };\n    print \"rc is [$rc]\\n\";\n}\n\n\n__DATA__\n1,2,!=\n1,1,!=\n1,2,=\n1,1,=\n1,2,==\n2,3,&gt;\n3,2,&gt;\n3,3,&gt;\n2,3,&gt;=\n3,2,&gt;=\n3,3,&gt;=\n2,3,&lt;\n3,2,&lt;\n3,3,&lt;\n2,3,&lt;=\n3,2,&lt;=\n3,3,&lt;=\n</code></pre>\n\n<p>When I execute I get this output ...</p>\n\n<pre><code>[red@tools-dev1 ~]$ ./evaltest.pl \n1 != 2\nrc is [1 != 2]\n1 != 1\nrc is [1 != 1]\n1 = 2\nrc is [1 = 2]\n1 = 1\nrc is [1 = 1]\n1 == 2\nrc is [1 == 2]\n2 &gt; 3\nrc is [2 &gt; 3]\n3 &gt; 2\nrc is [3 &gt; 2]\n3 &gt; 3\nrc is [3 &gt; 3]\n2 &gt;= 3\nrc is [2 &gt;= 3]\n3 &gt;= 2\nrc is [3 &gt;= 2]\n3 &gt;= 3\nrc is [3 &gt;= 3]\n2 &lt; 3\nrc is [2 &lt; 3]\n3 &lt; 2\nrc is [3 &lt; 2]\n3 &lt; 3\nrc is [3 &lt; 3]\n2 &lt;= 3\nrc is [2 &lt;= 3]\n3 &lt;= 2\nrc is [3 &lt;= 2]\n3 &lt;= 3\nrc is [3 &lt;= 3]\n</code></pre>\n\n<p>... I was trying to get output that looks more like this:</p>\n\n<pre><code>1 != 2\nrc is [1]\n1 != 1\nrc is [0]\n1 = 2\nrc is [0]\n1 = 1\nrc is [1]\n1 == 2\nrc is [0]\n2 &gt; 3\nrc is [0]\n3 &gt; 2\nrc is [1]\n3 &gt; 3\nrc is [0]\n2 &gt;= 3\nrc is [0]\n3 &gt;= 2\nrc is [1]\n3 &gt;= 3\nrc is [1]\n2 &lt; 3\nrc is [1]\n3 &lt; 2\nrc is [0]\n3 &lt; 3\nrc is [0]\n2 &lt;= 3\nrc is [1]\n3 &lt;= 2\nrc is [0]\n3 &lt;= 3\nrc is [1]\n</code></pre>\n"}, {"tags": ["perl", "random", "hash", "key"], "comments": [{"owner": {"reputation": 1324, "user_id": 2884483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2j2D.jpg?s=128&g=1", "display_name": "Slade", "link": "https://stackoverflow.com/users/2884483/slade"}, "edited": false, "score": 0, "creation_date": 1433265358, "post_id": 30602004, "comment_id": 49273367, "body": "IIRC, the randomization is designed to kick in (exclusively?) in the event of a collision, in order to minimize the efficiency hit. I&#39;ll try to dig up the relevant mailing list discussions."}, {"owner": {"reputation": 5886, "user_id": 2019415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/645958eb08719fa5119052d7d1d079ff?s=128&d=identicon&r=PG", "display_name": "G. Cito", "link": "https://stackoverflow.com/users/2019415/g-cito"}, "edited": false, "score": 0, "creation_date": 1433270692, "post_id": 30602004, "comment_id": 49276437, "body": "Here&#39;s my attempt to answer a less sophisticated version of the question <a href=\"http://stackoverflow.com/a/30340150/2019415\">Why do the same hash keys have different order when printing?</a> TL:DR : post perl-5.18 there&#39;s several ways you can control the behaviour and many good reasons for the default :-)"}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 4, "last_activity_date": 1433264475, "last_edit_date": 1592644375, "creation_date": 1433264475, "answer_id": 30602237, "question_id": 30602004, "link": "https://stackoverflow.com/questions/30602004/how-are-hash-keys-sorted/30602237#30602237", "title": "How are hash keys sorted?", "body": "<p>How the hash keys are sorted depends on the version of <code>perl</code> you are using. You should not depend on any seeming order associated with any version. That includes assuming somehow that any randomization involved would be appropriate to be used in other circumstances where the statistical qualities of randomness actually matters.</p>\n<p>From the <a href=\"https://metacpan.org/pod/perl5180delta#Hash-overhaul\" rel=\"nofollow noreferrer\">5.18 Hash Overhaul</a>:</p>\n<blockquote>\n<h3>Hash overhaul</h3>\n<p>Changes to the implementation of hashes in perl v5.18.0 will be one of the most visible changes to the behavior of existing code.</p>\n<p>By default, two distinct hash variables with identical keys and values may now provide their contents in a different order where it was previously identical.</p>\n<p>When encountering these changes, the key to cleaning up from them is to accept that <strong>hashes are unordered collections</strong> and to act accordingly.</p>\n<h3>Hash randomization</h3>\n<p>The seed used by Perl's hash function is now random. This means that the order which keys/values will be returned from functions like keys(), values(), and each() will differ from run to run.</p>\n<p>This change was introduced to make Perl's hashes more robust to algorithmic complexity attacks, and also because we discovered that it exposes hash ordering dependency bugs and makes them easier to track down.</p>\n<p>Toolchain maintainers might want to invest in additional infrastructure to test for things like this. Running tests several times in a row and then comparing results will make it easier to spot hash order dependencies in code. Authors are strongly encouraged not to expose the key order of Perl's hashes to insecure audiences.</p>\n<p>Further, every hash has its own iteration order, which should make it much more difficult to determine what the current hash seed is.</p>\n</blockquote>\n"}], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455811860, "creation_date": 1433263800, "last_edit_date": 1495541251, "question_id": 30602004, "link": "https://stackoverflow.com/questions/30602004/how-are-hash-keys-sorted", "title": "How are hash keys sorted?", "body": "<p>Until <a href=\"https://stackoverflow.com/questions/30596682/random-flling-the-array-perl/30597387#30597387\">today</a>, I thought that hash keys were randomised when returned. However, the entry in <a href=\"http://perldoc.perl.org/functions/keys.html\" rel=\"nofollow noreferrer\">perldoc</a> on <code>keys</code> suggests otherwise:</p>\n\n<blockquote>\n  <p>Hash entries are returned in an apparently random order. The actual random order is specific to a given hash; the exact same series of operations on two hashes may result in a different order for each hash.</p>\n</blockquote>\n\n<p>There are other entries on SO that relate to this - most pertinent is the accepted answer to <a href=\"https://stackoverflow.com/questions/6685019/hash-randomization-in-perl-5\">this</a> question.</p>\n\n<p>The following code returns apparently randomised hash keys:</p>\n\n<pre><code> my %hash;\n $hash{$_}++ for 1 .. 100; \n\n say for keys %hash;\n</code></pre>\n\n<p>Can anyone help me understand how this is not <em>actually</em> random? </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433261899, "post_id": 30601120, "comment_id": 49271140, "body": "How about <code>s&#47;ACTUAL_WORD&#47;EXPECTED_WORD&#47;g</code>? Or are there lines that do not have the <code>(SOMETHING)</code> and you want to skip them?"}, {"owner": {"reputation": 347, "user_id": 4847158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b4531c13adea39e38a3e0134cd2129bf?s=128&d=identicon&r=PG&f=1", "display_name": "Orion", "link": "https://stackoverflow.com/users/4847158/orion"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433262110, "post_id": 30601120, "comment_id": 49271245, "body": "the something varies from line to line. need to edit both sides of the something its like &quot;ACTUAL_WORD&#40;<code>SOMETHING</code>&#41;ACTUAL_WORD&quot;"}, {"owner": {"reputation": 347, "user_id": 4847158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b4531c13adea39e38a3e0134cd2129bf?s=128&d=identicon&r=PG&f=1", "display_name": "Orion", "link": "https://stackoverflow.com/users/4847158/orion"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433262261, "post_id": 30601120, "comment_id": 49271334, "body": "or hello_something_shop"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433262356, "post_id": 30601120, "comment_id": 49271400, "body": "Can you give some sample text that you&#39;re trying to replace, and what to replace with?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433262363, "post_id": 30601120, "comment_id": 49271408, "body": "You should say that in the first place."}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1433262331, "creation_date": 1433262331, "answer_id": 30601499, "question_id": 30601120, "link": "https://stackoverflow.com/questions/30601120/rename-a-string-in-a-perl-script-eg-namethis-stays-the-same/30601499#30601499", "title": "rename a string in a perl script eg name(&quot;this stays the same&quot;)", "body": "<p>I think something like this should do it?</p>\n\n<pre><code>perl -pi-back -e 's/ACTUAL_WORD(.*)/EXPECTED_WORD($1)/g;' inputfile.txt \n</code></pre>\n\n<p>You capture the word in brackets and reuse it via <code>$1</code> in the replacement. (You may need more brackets - it's unclear if additional are required based on your input). </p>\n"}], "owner": {"reputation": 347, "user_id": 4847158, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b4531c13adea39e38a3e0134cd2129bf?s=128&d=identicon&r=PG&f=1", "display_name": "Orion", "link": "https://stackoverflow.com/users/4847158/orion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 30601499, "answer_count": 1, "score": 0, "last_activity_date": 1433262331, "creation_date": 1433261201, "last_edit_date": 1433261378, "question_id": 30601120, "link": "https://stackoverflow.com/questions/30601120/rename-a-string-in-a-perl-script-eg-namethis-stays-the-same", "title": "rename a string in a perl script eg name(&quot;this stays the same&quot;)", "body": "<pre><code>perl -pi-back -e 's/ACTUAL_WORD\\(`SOMETHING`\\)/EXPECTED_WORD\\(`SOMETHING`\\)/g;' \\\ninputfile.txt \n</code></pre>\n\n<p>I need the \"something\" to stay the same. something is like a variable that changes.</p>\n"}, {"tags": ["perl", "user-interface", "dialog", "show-hide", "tkx"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1433278889, "post_id": 30600582, "comment_id": 49280951, "body": "It seems like there is no options to ignore certain folders.. so either you make a custom dialog (build the gui from scratch), or let the user select the folder using <code>chooseDirectory</code> and validate the user input later.."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1433344597, "post_id": 30600582, "comment_id": 49314319, "body": "I currently have it set up to validate the input but it just feels so clunky to have all those extra folders... Obviously building the whole thing from scratch would be extreme overkill and would take a very long time so unless someone finds some magic way to do this I guess I&#39;ll have to settle with what I have..."}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1433260841, "creation_date": 1433259626, "last_edit_date": 1433260841, "question_id": 30600582, "link": "https://stackoverflow.com/questions/30600582/limiting-a-tkxtk-choosedirectory-search-to-specific-directories", "title": "Limiting a Tkx::tk___chooseDirectory() search to specific directories", "body": "<p>I have a Perl script that uses <code>Tkx::tk___chooseDirectory()</code> to allow the user to select a directory.</p>\n\n<p>The problem is only a few specific directories are valid for the actions that the script is going to perform.  Is there a way to limit the folders displayed by this function to show only folders below a specific subdirectory?</p>\n\n<hr>\n\n<p>Example:</p>\n\n<p><img src=\"https://i.stack.imgur.com/VXurk.png\" alt=\"Directory listing\"></p>\n\n<p>Say I wanted to only give the user the option to select \"Perl64\" or any of its subdirectories.  How can I force it to hide the other folders (like \"PerfLogs\" or \"Program Files\") and only display the valid folders.</p>\n\n<p>I know I can use the <code>-initialdir</code> option to make it start on \"Perl64\", but that doesn't hide the other choices.</p>\n"}, {"tags": ["perl", "perl-data-structures"], "comments": [{"owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 4, "creation_date": 1433259538, "post_id": 30600445, "comment_id": 49269562, "body": "You&#39;re use <code>{}</code> when creating <code>%ref</code> when you should be using <code>()</code>"}, {"owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 1, "creation_date": 1433259903, "post_id": 30600445, "comment_id": 49269825, "body": "You also want <code>my %perlobj = ( %ref,%rethash );</code>"}, {"owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 1, "creation_date": 1433259962, "post_id": 30600445, "comment_id": 49269872, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/350018/how-can-i-combine-hashes-in-perl\">How can I combine hashes in Perl?</a>"}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1433260934, "post_id": 30600445, "comment_id": 49270548, "body": "You are wildly mixing <code>()</code> parens and <code>{}</code> as well as hashes and hash-references. And you have found a rare instance of <code>,</code> as a sequence operator instead of a list constructor."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1433261631, "post_id": 30600445, "comment_id": 49270984, "body": "@PatrickJ.S. could you elaborate on the sequence operator? I cannot find that in perldoc."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433271406, "post_id": 30600445, "comment_id": 49276838, "body": "@simbabque: In the docs it&#39;s just called <a href=\"http://perldoc.perl.org/perlop.html#Comma-Operator\" rel=\"nofollow noreferrer\">&quot;comma&quot; operator</a>. I was reffering to <a href=\"https://en.wikipedia.org/wiki/Comma_operator#Syntax\" rel=\"nofollow noreferrer\">this usage of <i>sequence</i></a>. Admittedly the expresseion &quot;as a sequence operator&quot; is a bit sloppy and could have better been said with \u201cused the <code>,</code>-operator for sequencing\u201d,"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4965904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a96e080ae3eda5b2fbc8a3c4efeedf?s=128&d=identicon&r=PG&f=1", "display_name": "ingueni", "link": "https://stackoverflow.com/users/4965904/ingueni"}, "edited": false, "score": 0, "creation_date": 1433266378, "post_id": 30601221, "comment_id": 49273972, "body": "Thanks for breaking it down I really appreciate it, I was going through some old code and added warnings to a module and found this error."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1433261481, "creation_date": 1433261481, "answer_id": 30601221, "question_id": 30600445, "link": "https://stackoverflow.com/questions/30600445/unable-to-properly-merge-hashes/30601221#30601221", "title": "Unable to properly merge hashes", "body": "<p>What RobEarl is saying is correct. I'll give an explanation of that and add some more stuff.</p>\n\n<p>Your variable name <code>%ref</code> and the fact that you are using <code>{}</code> kinda implies you want a reference here. </p>\n\n<p>Let's take a look what value we will have in <code>%ref</code>. Consider this example.</p>\n\n<pre><code>use strict; use warnings;\nuse Data::Printer;\nmy %foo = { key =&gt; 'value' };\np %foo;\n</code></pre>\n\n<p>This will throw a warning <em>Reference found where even-sized list expected</em> on my Perl 5.20.2. The output will be:</p>\n\n<pre><code>{\n    HASH(0x7e33c0)   undef\n}\n</code></pre>\n\n<p>It's a hash with a hashref as the key and <code>undef</code> as a value. <code>HASH(0x07e33c0)</code> is what you get when you look at a hash reference without dereferencing it. (The <code>{}</code> are there because Data::Printer converts the hash to a hashref).</p>\n\n<p>Back to your code, the correct sigil for a reference is <code>$</code>. It does not matter what kind of reference it is. The reference is always a scalar (a pointer to the place in memory where the hash/array/something) is stored.</p>\n\n<pre><code>my $ref = { \n  dog     =&gt; $dog,\n  cat     =&gt; $cat,\n  mouse   =&gt; $rat,\n  chicken =&gt; '', # maybe this should be undef?\n};\n</code></pre>\n\n<p>Now you've got a hashref with the values of <code>$dog</code>, <code>$cat</code>, <code>$rat</code> and an empty string.</p>\n\n<p>Now you're assigning a variable named <code>$perlobj</code>, which implies it's an object. Instead you are assigning a scalar variable (the <code>$</code> makes it a scalar) with a list. If you do that, Perl will only assign the right-most value to the variable.</p>\n\n<pre><code>my $foo = (1, 2, 3); # $foo will be 3 and there's a warning\n</code></pre>\n\n<p>You are assigning a list of two references. The first one is disregarded and only <code>\\$rethash</code> gets assigned. That works because conveniently, <code>$perlobj</code> is a scalar, and references are also scalars. So now <code>$perlobj</code> is a reference of <code>%rethash</code>. That's why your Data::Dumper output looks like <code>%rethash</code>.</p>\n\n<hr>\n\n<p>I'm not sure what you want to do, so I cannot really help you with that. I suggest you read up on some stuff.</p>\n\n<ul>\n<li><a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"noreferrer\">perlreftut</a> is useful to learn how references work</li>\n<li>If you want to do Object Oriented Programming, check out <a href=\"https://metacpan.org/pod/Moose\" rel=\"noreferrer\">Moose</a></li>\n<li>It might also be useful to just go get a book to learn a bit more about basic Perl. <em>Learning Perl</em> by Randal L. Schwartz and <em>Beginning Perl</em> by Curtis Poe are both very good for that</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1433262353, "creation_date": 1433262353, "answer_id": 30601505, "question_id": 30600445, "link": "https://stackoverflow.com/questions/30600445/unable-to-properly-merge-hashes/30601505#30601505", "title": "Unable to properly merge hashes", "body": "<p>You are taking a list of hash references and assigning them to a scalar</p>\n\n<pre><code>my $perlobj = ( \\%ref, \\%rethash );  # same as  $perlobj = \\%rethash\n</code></pre>\n\n<p>Instead you want to take a reference to a merger of hashes</p>\n\n<pre><code>my $perlobj = { %ref, %rethash };\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4965904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a96e080ae3eda5b2fbc8a3c4efeedf?s=128&d=identicon&r=PG&f=1", "display_name": "ingueni", "link": "https://stackoverflow.com/users/4965904/ingueni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 30601221, "answer_count": 2, "score": 2, "last_activity_date": 1433266100, "creation_date": 1433259253, "last_edit_date": 1433266100, "question_id": 30600445, "link": "https://stackoverflow.com/questions/30600445/unable-to-properly-merge-hashes", "title": "Unable to properly merge hashes", "body": "<p>I currently have the following</p>\n\n<pre><code># $dog, $cat, $rat are all hash refs\n\n                my %rethash = ('success' =&gt; 'Your Cool'); \n\n                my %ref ={ 'dog' =&gt; $dog,  'cat' =&gt; $cat,  'mouse' =&gt; $rat,\n                                'chicken' =&gt; ''  };\n\n                my $perlobj = ( \\%ref,\\%rethash );      \n</code></pre>\n\n<p>When $perlobj is dumped this is the result</p>\n\n<pre><code> $VAR1 = {\n      'success' =&gt; 'Your Cool'\n    };\n</code></pre>\n\n<p>However when warnings are enabled I get the following message</p>\n\n<pre><code>Useless use of reference constructor in void context at ..\n</code></pre>\n\n<p>I realize there is something terribly wrong with how %ref is assigned using {}, What is wrong with this code? I can't seem to get rid of this warning....</p>\n\n<p>EDIT:\nOk I think I figured out whats going on, </p>\n\n<pre><code>my $perlobj = ( \\%ref,\\%rethash );\n</code></pre>\n\n<p>This does not merge but results in $perlobj becoming a reference to %rethash, this is obvious after reading your responses.</p>\n"}, {"tags": ["perl", "match"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1433259076, "post_id": 30600286, "comment_id": 49269258, "body": "What&#39;s the question?"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1433259823, "post_id": 30600286, "comment_id": 49269769, "body": "yeah what do you really want to ask? Please explain what problem you are facing(atleast) and what you have tried."}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 1, "creation_date": 1433260182, "post_id": 30600286, "comment_id": 49270008, "body": "Also you are not matching columns between both files anywhere. You should look into this too."}, {"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1433261167, "post_id": 30600286, "comment_id": 49270694, "body": "@choroba, thanks for your comments, I have tried the above script and get the error &#39;Use of uninitialized value in concatenation or string&#39;, I think it is because I&#39;m not matching the appropriate values. I was wondering if someone could point me in the right direction, with how to accomplish this."}], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "edited": false, "score": 0, "creation_date": 1433261999, "post_id": 30601130, "comment_id": 49271187, "body": "Thanks for your script, I can see how the if statement is being used to match the values in the two files."}], "tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 2, "last_activity_date": 1433261713, "last_edit_date": 1433261713, "creation_date": 1433261223, "answer_id": 30601130, "question_id": 30600286, "link": "https://stackoverflow.com/questions/30600286/perl-matching-data-in-two-files/30601130#30601130", "title": "Perl: matching data in two files", "body": "<p>Here's one way using split() hackery:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $f1 = 'file1.txt';\nmy $f2 = 'file2.txt';\n\nmy @pdb;\n\nopen my $pdb_file, '&lt;', $f2\n  or die \"Can't open the PDB file $f2: $!\";\n\nwhile (my $line = &lt;$pdb_file&gt;){\n    chomp $line;\n    push @pdb, $line; \n}\n\nclose $pdb_file;\n\nopen my $shifts_file, '&lt;', $f1\n  or die \"Can't open the SHIFTS file $f1: $!\";\n\nwhile (my $line = &lt;$shifts_file&gt;){\n\n    chomp $line;\n\n    my $pdb_line = shift @pdb;\n\n    # - inner split: get the third element from the $pdb_line\n    # - outer split: get the first element (character) from the\n    #   result of the inner split\n\n    my $criteria = (split('', (split('\\s+', $pdb_line))[2]))[0];\n\n    # - compare the 2nd element of the file1.txt line against\n    #   the above split() operations\n\n    if ((split('\\s+', $line))[1] eq $criteria){\n        print \"$pdb_line\\n\";\n    }\n    else {\n        print \"**** &gt;$pdb_line&lt; doesn't match &gt;$line&lt;\\n\";\n    }\n}\n</code></pre>\n\n<p>Files:</p>\n\n<p>file1.txt (note I changed line two to ensure a non-match worked):</p>\n\n<pre><code>1  H  35\n1  A  22\n1  H  20\n</code></pre>\n\n<p>file2.txt:</p>\n\n<pre><code>A  1 HB2 MET  1 \nA  2 CA  MET  1\nA  3 HA  MET  1\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>./app.pl\nA  1 HB2 MET  1 \n****&gt;A  2 CA  MET  1&lt; doesn't match &gt;1  A  22&lt;\nA  3 HA  MET  1\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 4573353, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/843bcb9df7ef490fdba185dcb76ebea7?s=128&d=identicon&r=PG&f=1", "display_name": "EA00", "link": "https://stackoverflow.com/users/4573353/ea00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "accepted_answer_id": 30601130, "answer_count": 1, "score": 0, "last_activity_date": 1433261713, "creation_date": 1433258766, "last_edit_date": 1495542112, "question_id": 30600286, "link": "https://stackoverflow.com/questions/30600286/perl-matching-data-in-two-files", "title": "Perl: matching data in two files", "body": "<p>I would like to match and print data from two files (File1.txt and File2.txt). Currently, I'm trying to match the first letter of the second column in File1 to the first letter of the third column in File2.txt.</p>\n\n<pre><code>File1.txt\n1  H  35\n1  C  22\n1  H  20\n\nFile2.txt\nA  1 HB2 MET  1 \nA  2 CA  MET  1\nA  3 HA  MET  1\n\nOUTPUT\n1  MET  HB2  35\n1  MET  CA   22\n1  MET  HA   20 \n</code></pre>\n\n<p>Here is my script, I've tried following this submission: <a href=\"https://stackoverflow.com/questions/30043537/in-perl-mapping-between-a-reference-file-and-a-series-of-files\">In Perl, mapping between a reference file and a series of files</a></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy %data;\n\nopen (SHIFTS,\"file1.txt\") or die;\nopen (PDB, \"file2.txt\") or die;\n\nwhile (my $line = &lt;PDB&gt;) {\n    chomp $line;\n    my @fields = split(/\\t/,$line);\n    $data{$fields[4]} = $fields[2];\n }\n\n close PDB;\n\n while (my $line = &lt;SHIFTS&gt;) {\n    chomp($line);\n    my @columns = split(/\\t/,$line);\n    my $value = ($columns[1] =~ m/^.*?([A-Za-z])/ );\n }\n    print \"$columns[0]\\t$fields[3]\\t$value\\t$data{$value}\\n\";\n\n close SHIFTS;\n exit;\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl", "file", "hash"], "answers": [{"tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": 1, "last_activity_date": 1433258944, "creation_date": 1433258944, "answer_id": 30600342, "question_id": 30600107, "link": "https://stackoverflow.com/questions/30600107/perl-variable-regex-issue-how-to-use-store-regex-matches-in-a-loop-preferably-w/30600342#30600342", "title": "Perl Variable/Regex Issue, how to use store regex matches in a loop preferably without using hashes", "body": "<pre><code>use warnings;\nuse strict; \n\nopen my $file1, '&lt;', 'in.txt' or die $!;\nopen my $out, '&gt;', 'out.txt' or die $!;\n\nprint \"Enter user entry \";\nchomp(my $entry = &lt;STDIN&gt;);\n\nprint \"Enter number: \";\nchomp(my $number = &lt;STDIN&gt;);\n\n\nmy $num;\nwhile(&lt;$file1&gt;){\n    chomp;\n    if (/^foo/){\n        ($num) = /(\\d+)/;\n        print $out \"$entry $number $entry\" if $num == $number;\n    }\n    print \"$_\\n\";\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4961610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61062fc7888a315d93d8c79dd1ff3c37?s=128&d=identicon&r=PG&f=1", "display_name": "XeroG", "link": "https://stackoverflow.com/users/4961610/xerog"}, "edited": false, "score": 0, "creation_date": 1433259884, "post_id": 30600349, "comment_id": 49269805, "body": "When I use this code, I receive the error &quot;Use of uninitialized value $_ in substitution &lt;s///&gt; at perl.pl line x&quot;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 37, "user_id": 4961610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61062fc7888a315d93d8c79dd1ff3c37?s=128&d=identicon&r=PG&f=1", "display_name": "XeroG", "link": "https://stackoverflow.com/users/4961610/xerog"}, "edited": false, "score": 0, "creation_date": 1433260164, "post_id": 30600349, "comment_id": 49269994, "body": "@XeroG: Have you modified the code, or have you run it copypasted from here?"}, {"owner": {"reputation": 37, "user_id": 4961610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61062fc7888a315d93d8c79dd1ff3c37?s=128&d=identicon&r=PG&f=1", "display_name": "XeroG", "link": "https://stackoverflow.com/users/4961610/xerog"}, "edited": false, "score": 0, "creation_date": 1433260627, "post_id": 30600349, "comment_id": 49270317, "body": "Okay, I fixed the error, and the code prints the correct results, however I need to now print those results to a new file. How your code into a write filehandle? My var for the write filehandle is $write."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 37, "user_id": 4961610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61062fc7888a315d93d8c79dd1ff3c37?s=128&d=identicon&r=PG&f=1", "display_name": "XeroG", "link": "https://stackoverflow.com/users/4961610/xerog"}, "edited": false, "score": 0, "creation_date": 1433263836, "post_id": 30600349, "comment_id": 49272309, "body": "@XeroG: You can redirect the output: <code>perl.pl &gt; output.txt</code>, or use <code>print {$write} $_;</code> instead of the sole <code>print</code>."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1433258964, "creation_date": 1433258964, "answer_id": 30600349, "question_id": 30600107, "link": "https://stackoverflow.com/questions/30600107/perl-variable-regex-issue-how-to-use-store-regex-matches-in-a-loop-preferably-w/30600349#30600349", "title": "Perl Variable/Regex Issue, how to use store regex matches in a loop preferably without using hashes", "body": "<p>No hashes nor arrays involved, just regular expressions:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $entry = 'user entry user entry $number user entry';\n\nwhile (&lt;DATA&gt;) {\n    if (s/^foo.*?([0-9]{1,9}).*/$entry/) {\n        my $number = $1;\n        s/\\$number/$number/;\n    }\n    print;\n}\n\n__DATA__\nblah blah durrr\nfoo hello 23425253 whatever\nsomething something who cares\n\nblah blah durrr\nfoo hello 78932124 whatever\nsomething something who cares\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4961610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61062fc7888a315d93d8c79dd1ff3c37?s=128&d=identicon&r=PG&f=1", "display_name": "XeroG", "link": "https://stackoverflow.com/users/4961610/xerog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 30600349, "answer_count": 2, "score": 1, "last_activity_date": 1433259752, "creation_date": 1433258341, "last_edit_date": 1433259752, "question_id": 30600107, "link": "https://stackoverflow.com/questions/30600107/perl-variable-regex-issue-how-to-use-store-regex-matches-in-a-loop-preferably-w", "title": "Perl Variable/Regex Issue, how to use store regex matches in a loop preferably without using hashes", "body": "<p>I apologize in advance if this is confusing however this is my issue:</p>\n\n<p>I am trying to write a Perl script that will read data from a long config file, and allow the use to edit and overwrite a certain reocurring line in that file. However, each line that is edited needs to include a number that is unique to that block of text. Let me show an example in order to clarify, the text looks something like this:</p>\n\n<pre><code>blah blah durrr\nfoo hello 23425253 whatever\nsomething something who cares\n\nblah blah durrr\nfoo hello 78932124 whatever\nsomething something who cares\n</code></pre>\n\n<p>Basically, I need to search the file for lines starting with <code>foo</code> containing a number between 1 and 9 digits, and replace that line with a user entered string that contains said digits, such that when the script is run with a user defined entry of <code>user entry user entry $number user entry</code>, the resulting text file will look like this: </p>\n\n<pre><code>blah blah durrr\nuser entry user entry 23425253 user entry\nsomething something who cares\n\nblah blah durrr\nuser entry user entry 78932124 user entry\nsomething something who cares\n</code></pre>\n\n<p>Basically the user needs to be able to replace a line that matches the above criteria, but still be able to enter a token such that the number from the old line will exist in a certain in the new line. Here is the relevant code in my file open/read loop that I have up to this point: </p>\n\n<pre><code>if($line =~ /^foo/)\n{       \n    $line =~ m/(\\d\\d?\\d?\\d?\\d?\\d?\\d?\\d?\\d?\\d?)/;\n    my $number = $1; \n    $entry =~ s/\\$number/$number/;\n    $line = $entry\\n;\n}\n</code></pre>\n\n<p>Basically I am trying to match the number in the line with a regex and store it using the temporary variable $1 (which worksso far), replace instances of <code>\"$number\"</code> in the user entry with the actual variable <code>$number</code> (which works so far), and then overwrite that line with the user's entry. (which works so far) My problem is that only the first number matched is ever stored, so instead of each text block having the appropriate number, the first number matched is placed throughout the entire text file, like so:</p>\n\n<pre><code>blah blah durrr\nuser entry user entry 23425253 user entry\nsomething something who cares\n\nblah blah durrr\nuser entry user entry 23425253 user entry\nsomething something who cares\n</code></pre>\n\n<p>I realize that this issue is because I am assigning my number value to $1, which only stores the first value matched. My first thought was to just assign $number to a match variable one higher each time the loop is run, i.e. $1, $2... $n, however this would require me to change the variable name, which doesnt appear to be possible to do in Perl. I have tried googling the answer which led me to solutions which used hashes and arrays. I am still very new to Perl, I literally jsut started learning it last week this is the first actual script I have written using it, I logically understand what is going on here, however I dont have the perl skills to put it into practice.</p>\n\n<p>If anyone here knows how I can address this issue it would be greatly appreciated!!!</p>\n"}, {"tags": ["string", "perl", "user-interface", "truncate", "tkx"], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1433345809, "post_id": 30622197, "comment_id": 49315312, "body": "Wow, that&#39;s a brilliant solution!  I tested it and it works like a charm and is very fast as well! Very impressive.  Too bad not too many people look at Perl Tkx questions and this won&#39;t get very much attention...  I would upvote multiple times if I could."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1433345948, "post_id": 30622197, "comment_id": 49315416, "body": "By the way, it still seems to work without <code>Tkx::package_require(&#39;tile&#39;);</code>."}, {"owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "reply_to_user": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1433356091, "post_id": 30622197, "comment_id": 49321629, "body": "The <code>Tkx::package_require(&#39;tile&#39;)</code> is there because I used the Ttk version of the label widget. Whether or not it&#39;s necessary depends on which version of Tk you&#39;re using; the tile stuff is built-in as of Tk 8.5. That&#39;s the version ActiveState has bundled with ActivePerl as tkkit since they introduced Tkx in Perl 5.10 so unless you&#39;re binding to your own installation of an old version of the Tcl interpreter you don&#39;t need it. I should probably break the habit of including it. :)"}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 0, "creation_date": 1433357027, "post_id": 30622197, "comment_id": 49322154, "body": "Wow your mind is like a Perl/Tk dictionary! Thanks for the help :)"}], "tags": [], "owner": {"reputation": 29951, "user_id": 8233, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5ed2571484765d12fcb3230f235a8ecc?s=128&d=identicon&r=PG", "display_name": "Michael Carman", "link": "https://stackoverflow.com/users/8233/michael-carman"}, "is_accepted": true, "score": 5, "last_activity_date": 1433339647, "creation_date": 1433339647, "answer_id": 30622197, "question_id": 30600005, "link": "https://stackoverflow.com/questions/30600005/how-to-get-the-width-of-a-string-to-be-used-in-a-tkx-label/30622197#30622197", "title": "How to get the &quot;width&quot; of a string to be used in a Tkx label", "body": "<p>When the docs say that <code>-width</code> for labels is interpreted as a number of characters it's probably using the average width of a character rather than the maximum width. As you discovered, when using fixed-width fonts you can work in characters and everything will come out nicely. When using variable-width fonts things get difficult quickly because there's no fixed relationship between characters and pixels.</p>\n\n<p>You need to work in consistent units (i.e. pixels) and shorten the text until it fits -- preferably with a good initial guess to keep your code fast. You can get the label width in pixels via <code>winfo reqwidth</code> and the text width in pixels (for a particular font) with <code>font measure</code>.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tkx;\nTkx::package_require('tile');\n\nmy $text;\nmy $mw    = Tkx::widget-&gt;new('.');\nmy $label = $mw-&gt;new_ttk__label(-width =&gt; 10, -textvariable =&gt; \\$text);\n\nTkx::pack($label, -side =&gt; 'left');\n\n$text = limit_text($label, 'abcdefghijklmnopqrstuvwxyz');\n\nTkx::MainLoop;\n\nsub limit_text {\n    my $label       = shift;\n    my $text        = shift;\n    my $font        = $label-&gt;cget('-font') || 'TkDefaultFont';\n    my $label_width = $label-&gt;g_winfo_reqwidth;\n    my $text_width  = Tkx::font_measure($font, $text);\n    my $i           = int length($text) * ($label_width / $text_width);\n\n    while ($text_width &gt; $label_width) {\n        $text       = substr($text, 0, --$i) . '...';\n        $text_width = Tkx::font_measure($font, $text);\n    }\n    return $text;\n}\n</code></pre>\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 1, "accepted_answer_id": 30622197, "answer_count": 1, "score": 4, "last_activity_date": 1433339647, "creation_date": 1433258078, "last_edit_date": 1433264734, "question_id": 30600005, "link": "https://stackoverflow.com/questions/30600005/how-to-get-the-width-of-a-string-to-be-used-in-a-tkx-label", "title": "How to get the &quot;width&quot; of a string to be used in a Tkx label", "body": "<p>I am making a simple application using Perl Tkx and allow the user to select a directory.  Rather than using text wrapping or stretching the box to a ridiculous length to show the whole directory name, if a name is too long I would like to truncate it and append \"...\" to the end.</p>\n\n<p>The problem is that the width of the label is defined to be some arbitrary value (like 40).  If this value was a measurement of how many characters the label could fit I could just truncate the string to 37 and append the \"...\" but this doesn't seem to be the case.</p>\n\n<p>Does anyone know what the <code>-width</code> of a label using Perl Tkx is actually a measurement of?  How can I find the amount of <code>-width</code> units my string will take up so I can figure out where the appropriate point is to truncate it?</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I found this answer in the <a href=\"https://www.tcl.tk/man/tcl8.4/TkCmd/label.htm#M8\" rel=\"nofollow\">tcl manual</a>:</p>\n\n<blockquote>\n  <p>Database Class: Width Specifies a desired width for the label. If an\n  image or bitmap is being displayed in the label then the value is in\n  screen units (i.e. any of the forms acceptable to Tk_GetPixels); for\n  text it is in characters.</p>\n  \n  <p>If this option isn't specified, the label's desired width is computed\n  from the size of the image or bitmap or text being displayed in it.</p>\n</blockquote>\n\n<p>This should mean that for a width of 40 to truncate the text I should just have to truncate the string to 37 characters and add \"...\".</p>\n\n<p>I tested this by filling the label with all \"M\"s. I used the letter \"M\" because it is typically the widest character (<a href=\"http://en.m.wikipedia.org/wiki/Em_(typography)\" rel=\"nofollow\">see here</a>).  I wrote code to truncate at 37 \"M\"s and add \"...\" to the end, but the \"M\"s seem to overflow past the end of the label after about 24 \"M\"s.  </p>\n\n<p>This means that it is not safe to assume that it just stretches the label to fit 40 of the widest character... thus my question is still unanswered.</p>\n\n<p><strong><em>How can I determine the \"width\" of my string so I can truncate it appropriately?</em></strong></p>\n\n<hr>\n\n<p><strong>EDIT2:</strong></p>\n\n<p>I found a workaround but it is still not the solution I was looking for.  If you change the text on the label to a fixed-width font it will work properly.  It doesn't look as nice though so I would really like a solution that works for non-fixed-width fonts.</p>\n"}, {"tags": ["perl", "api", "http"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1433257725, "post_id": 30599667, "comment_id": 49268292, "body": "According to the <a href=\"https://shuttlecloud.com/api-requests#URLSecurityParameters\" rel=\"nofollow noreferrer\">documentation</a>, the security parameters <code>appid</code>, <code>ts</code>, and <code>sig</code> belong in the URL, not in HTTP headers. See the examples on the <a href=\"https://shuttlecloud.com/api-common-uses\" rel=\"nofollow noreferrer\">common usage scenarios page</a>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1433257764, "post_id": 30599667, "comment_id": 49268325, "body": "For starters - you&#39;re using JSON without <code>use JSON;</code>. But I think the clue is in the error message: &quot;Missing parameter: timestamp"}, {"owner": {"reputation": 409, "user_id": 3751471, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c90be57c058861e813b9469729ac063b?s=128&d=identicon&r=PG&f=1", "display_name": "Kostiuk Aleksandr", "link": "https://stackoverflow.com/users/3751471/kostiuk-aleksandr"}, "edited": false, "score": 0, "creation_date": 1433260207, "post_id": 30599667, "comment_id": 49270027, "body": "I change code, but now receive <code>Resp Not a SCALAR reference</code>. When i use curl for POST with created url - result is similar: <code>{&quot;error&quot;: {&quot;msg&quot;: &quot;Missing parameter: timestamp&quot;, &quot;id&quot;: &quot;400&quot;}}</code>"}, {"owner": {"reputation": 569, "user_id": 421359, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c14a1122635b4ce9a1d4e04b88ec6bcd?s=128&d=identicon&r=PG", "display_name": "F&#233;lix", "link": "https://stackoverflow.com/users/421359/f%c3%a9lix"}, "edited": false, "score": 0, "creation_date": 1433329759, "post_id": 30599667, "comment_id": 49302757, "body": "Can you paste the url you&#39;re using with curl?"}, {"owner": {"reputation": 409, "user_id": 3751471, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c90be57c058861e813b9469729ac063b?s=128&d=identicon&r=PG&f=1", "display_name": "Kostiuk Aleksandr", "link": "https://stackoverflow.com/users/3751471/kostiuk-aleksandr"}, "edited": false, "score": 0, "creation_date": 1433331038, "post_id": 30599667, "comment_id": 49303651, "body": "when i POST created url (with parameters) its work, but when i try use parameters in <code>HTTP::Request</code> object - fail."}], "owner": {"reputation": 409, "user_id": 3751471, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c90be57c058861e813b9469729ac063b?s=128&d=identicon&r=PG&f=1", "display_name": "Kostiuk Aleksandr", "link": "https://stackoverflow.com/users/3751471/kostiuk-aleksandr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433260102, "creation_date": 1433257166, "last_edit_date": 1433260102, "question_id": 30599667, "link": "https://stackoverflow.com/questions/30599667/shuttlecloud-load-method-request-error", "title": "shuttlecloud &quot;load method&quot; request error", "body": "<p>I want use <a href=\"https://shuttlecloud.com/\" rel=\"nofollow\">shuttlecloud</a> for import contacts from services. When i try make request like described here, i receive response</p>\n\n<blockquote>\n  <p>{\"error\": {\"msg\": \"Missing parameter: timestamp\", \"id\": \"400\"}}</p>\n</blockquote>\n\n<p>Here me code:</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new;\n\nmy $url = 'https://demo.api.shuttlecloud.com/beta/load';\nmy $appid = 'some_app_id';\nmy $ts = int(time);\nmy $secret = 'some_secret';\nmy $sig = sha256_hex(\"{\".$appid.\":\".$secret.\":\".$ts.\"}\");\nmy $data = '{\n    \"userid\": {\n        \"email\": \"admin@gypost.com\"\n    }\n}';\nmy $json = decode_json($data);\n$url = $url.\"?appid=\".$appid.\"&amp;ts=\".$ts.\"&amp;sig=\".$sig.;\nmy $req = HTTP::Request-&gt;new(POST =&gt; $url);\n$req-&gt;content($json);\n\nmy $resp = $ua-&gt;request($req);\nmy $res = $resp-&gt;decoded_content;\nprint \"Resp $res\\n\";\n</code></pre>\n\n<p>What i do wrong?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1433252080, "post_id": 30597527, "comment_id": 49263707, "body": "What happened with <code>1</code>? Was the file created, but empty?"}, {"owner": {"reputation": 4101, "user_id": 204371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/alYsp.jpg?s=128&g=1", "display_name": "Brian Showalter", "link": "https://stackoverflow.com/users/204371/brian-showalter"}, "edited": false, "score": 0, "creation_date": 1433252198, "post_id": 30597527, "comment_id": 49263801, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/7799045/best-way-to-capture-output-from-system-command-to-a-text-file\">Best way to capture output from system command to a text file?</a>"}, {"owner": {"reputation": 345, "user_id": 493552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bcb964d304ff067df0787200bc1ca474?s=128&d=identicon&r=PG", "display_name": "Chandra Bhushan", "link": "https://stackoverflow.com/users/493552/chandra-bhushan"}, "edited": false, "score": 0, "creation_date": 1433252247, "post_id": 30597527, "comment_id": 49263847, "body": "Yes the file created but empty"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1433252414, "post_id": 30597527, "comment_id": 49263977, "body": "Your command is writing output to <code>STDERR</code>."}, {"owner": {"reputation": 345, "user_id": 493552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bcb964d304ff067df0787200bc1ca474?s=128&d=identicon&r=PG", "display_name": "Chandra Bhushan", "link": "https://stackoverflow.com/users/493552/chandra-bhushan"}, "edited": false, "score": 0, "creation_date": 1433254708, "post_id": 30597527, "comment_id": 49265896, "body": "Yes it is writing to stderr but not stdout .. Why is that so?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433254978, "post_id": 30597527, "comment_id": 49266129, "body": "Because that&#39;s how it was written."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 493552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bcb964d304ff067df0787200bc1ca474?s=128&d=identicon&r=PG", "display_name": "Chandra Bhushan", "link": "https://stackoverflow.com/users/493552/chandra-bhushan"}, "edited": false, "score": 0, "creation_date": 1433302889, "post_id": 30598813, "comment_id": 49287912, "body": "Thanks for your comments:) I dont need to use 2&gt;t.tmp when I execute impdp from a shell script. 1&gt;.t.tmp just works fine. I m not able to understand why do i need to write 2&gt;t.tmp from a perl prog and why not 1&gt;t.tmp as above"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 345, "user_id": 493552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bcb964d304ff067df0787200bc1ca474?s=128&d=identicon&r=PG", "display_name": "Chandra Bhushan", "link": "https://stackoverflow.com/users/493552/chandra-bhushan"}, "edited": false, "score": 0, "creation_date": 1433305193, "post_id": 30598813, "comment_id": 49288439, "body": "As I already said, you want to capture what the program writes to STDERR, so you need to redirect STDERR, and that&#39;s done using <code>2&gt;</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1433255014, "creation_date": 1433255014, "answer_id": 30598813, "question_id": 30597527, "link": "https://stackoverflow.com/questions/30597527/perl-impdp-from-perl/30598813#30598813", "title": "Perl - impdp from perl", "body": "<p><code>1&gt;t.tmp</code> (or just <code>&gt;t.tmp</code>) redirects STDOUT. Anything printed to STDOUT will end up in the file.</p>\n\n<p><code>2&gt;t.tmp</code> redirects STDERR. Anything printed to STDERR will end up in the file.</p>\n\n<p>You want to capture what your program writes to STDERR, so you need to use the latter, or <code>&gt;t.tmp 2&gt;&amp;1</code> which redirects both.</p>\n"}], "owner": {"reputation": 345, "user_id": 493552, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bcb964d304ff067df0787200bc1ca474?s=128&d=identicon&r=PG", "display_name": "Chandra Bhushan", "link": "https://stackoverflow.com/users/493552/chandra-bhushan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433255014, "creation_date": 1433251669, "question_id": 30597527, "link": "https://stackoverflow.com/questions/30597527/perl-impdp-from-perl", "title": "Perl - impdp from perl", "body": "<p>I am not able to re-direct the output of impdp command from system () perl to a file.</p>\n\n<pre><code>#!/usr/bin/perl\n$a=\"impdp GLS_UCELL_80TC5_DEV/comverse directory=DUMP_DIR_1028704 dumpfile=ACCESS_REGION_VALUES.dmp CONTENT=data_only\";\nsystem(\"$a 1&gt;t.tmp\");\n</code></pre>\n\n<p>However, upon changing the system command to <code>system(\"$a 2&gt;t.tmp\")</code>, t.tmp gets created.</p>\n\n<p>I want to understand why the re-direction 1>t.tmp not working in my case.</p>\n"}, {"tags": ["arrays", "perl", "random"], "comments": [{"owner": {"reputation": 862, "user_id": 3586150, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1f0969599955a953e592034929ed7a23?s=128&d=identicon&r=PG", "display_name": "Neil H Watson", "link": "https://stackoverflow.com/users/3586150/neil-h-watson"}, "edited": false, "score": 2, "creation_date": 1433249728, "post_id": 30596682, "comment_id": 49261756, "body": "Use a loop and the push command to put a new random number into the array with each loop iteration."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 3, "creation_date": 1433250559, "post_id": 30596682, "comment_id": 49262443, "body": "See <code>shuffle()</code> in <code>perldoc List::Util</code> <a href=\"http://perldoc.perl.org/List/Util.html#@values-=-shuffle-@values\" rel=\"nofollow noreferrer\">perldoc.perl.org/List/Util.html#@values-=-shuffle-@values</a> <code>List::Util</code> is a standard module that is installed with Perl. For a list of all the standard modules, see <code>perldoc perlmodlib</code> <a href=\"http://perldoc.perl.org/perlmodlib.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlmodlib.html</a>"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1433251431, "post_id": 30596682, "comment_id": 49263188, "body": "@shawnhcorey: <code>shuffle</code> returns a list in random order, it doesn&#39;t build random values."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1433251690, "post_id": 30596682, "comment_id": 49263411, "body": "@Toto, You&#39;d use <code>shuffle</code> if you wanted all ten elements to be different. See my answer."}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1433255089, "post_id": 30596682, "comment_id": 49266225, "body": "@Toto: See the first link in my above comment. It has an example of how to populate randomly with the numbers 0 .. 51."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433251260, "post_id": 30597347, "comment_id": 49263026, "body": "I was just typing that out with <code>1..10</code> :)"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433251334, "post_id": 30597347, "comment_id": 49263090, "body": "@simbabque: I&#39;ve saved one char. ;-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433251493, "post_id": 30597347, "comment_id": 49263244, "body": "You could save more by using <a href=\"http://p3rl.org/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a> and even get free colos! <code>p @r</code> =)"}], "tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": false, "score": 2, "last_activity_date": 1433252020, "last_edit_date": 1433252020, "creation_date": 1433251215, "answer_id": 30597347, "question_id": 30596682, "link": "https://stackoverflow.com/questions/30596682/random-flling-the-array-perl/30597347#30597347", "title": "Random flling the array - perl", "body": "<p>You can simply do:</p>\n\n<pre><code>my @r = map int(rand(60)), 0..9;\nsay Dumper\\@r;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433251436, "post_id": 30597387, "comment_id": 49263193, "body": "That is one arcane solution"}, {"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1433251717, "post_id": 30597387, "comment_id": 49263439, "body": "That&#39;s not really random, it gives the same result on each run."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 1, "creation_date": 1433252292, "post_id": 30597387, "comment_id": 49263884, "body": "@Toto, Not in newer versions of Perl, and not always in old versions of Perl, but I agree that&#39;s not the way to go. For starters, I think it&#39;s not completely random."}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1433252408, "post_id": 30597387, "comment_id": 49263971, "body": "@simbabque - I would say it&#39;s the least arcane answer here. It&#39;s also easier to understand for someone new to perl than <code>map</code> etc"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1433252527, "post_id": 30597387, "comment_id": 49264069, "body": "I don&#39;t agree with that, but I think that that discussion is best had over a beer or two.  ;)"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1433252584, "post_id": 30597387, "comment_id": 49264113, "body": "@simbabque Are you hitting on me?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1433258345, "post_id": 30597387, "comment_id": 49268720, "body": "It&#39;s moot talking about readability when you don&#39;t even have a working solution. Feel free to replace the <code>map</code> with a more complicated <code>for</code>+<code>push</code>, but don&#39;t replace <code>rand</code> with hash key orderings. What you posted is <b>awful</b>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1433259846, "post_id": 30597387, "comment_id": 49269783, "body": "@ikegami can join us for the beers =)"}, {"owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1433261093, "post_id": 30597387, "comment_id": 49270653, "body": "@simbabque sure, but <code>drinks</code> are on <b>him</b>"}], "tags": [], "owner": {"reputation": 5923, "user_id": 2105156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oRMc0.jpg?s=128&g=1", "display_name": "fugu", "link": "https://stackoverflow.com/users/2105156/fugu"}, "is_accepted": false, "score": -1, "last_activity_date": 1433251306, "creation_date": 1433251306, "answer_id": 30597387, "question_id": 30596682, "link": "https://stackoverflow.com/questions/30596682/random-flling-the-array-perl/30597387#30597387", "title": "Random flling the array - perl", "body": "<p>You could take advantage of perl's random sorting of hash keys. This will fill an array of 10 elements randomly each time you run it:</p>\n\n<pre><code>use warnings;\nuse strict; \n\nmy @nums = (1 .. 60);\n\nmy %data;\n\n$data{$_}++ foreach @nums;\n\nmy $count = 0;\nmy @random;\nforeach (keys %data){\n    $count++;\n    push @random, $_ if $count &lt;= 10;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1433252071, "post_id": 30597516, "comment_id": 49263699, "body": "I haven&#39;t considered use shuffle like this. +1"}, {"owner": {"reputation": 107, "user_id": 4423659, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y71JC.png?s=128&g=1", "display_name": "Plusce", "link": "https://stackoverflow.com/users/4423659/plusce"}, "edited": false, "score": 0, "creation_date": 1433258038, "post_id": 30597516, "comment_id": 49268522, "body": "So when I want fill an array contain &#39;n&#39; elements, can I use: &quot;@rand = map {int (rand(60)) } n;&quot;? Or create a loop &#39;for&#39; and enter counts in this way?: &quot;my $tab[$i] = map {int (rand(60)) };&quot;. I used second option before the moment and my compiler showed errors. What&#39;s wrong?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433258236, "post_id": 30597516, "comment_id": 49268650, "body": "The first will only assign one element, and I&#39;d be hard pressed to find something that isn&#39;t wrong with the second snippet."}, {"owner": {"reputation": 107, "user_id": 4423659, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y71JC.png?s=128&g=1", "display_name": "Plusce", "link": "https://stackoverflow.com/users/4423659/plusce"}, "edited": false, "score": 0, "creation_date": 1433259507, "post_id": 30597516, "comment_id": 49269543, "body": "So if nothing is wrong what about the compiler errors? Furthermore it seems my compiler isn&#39;t read prefix &quot;my&quot; (is not coloured)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433259951, "post_id": 30597516, "comment_id": 49269862, "body": "I didn&#39;t say nothing was wrong; I said it was completely wrong. It&#39;s like someone made up a sentence by picking random words from a dictionary."}, {"owner": {"reputation": 107, "user_id": 4423659, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y71JC.png?s=128&g=1", "display_name": "Plusce", "link": "https://stackoverflow.com/users/4423659/plusce"}, "edited": false, "score": 0, "creation_date": 1433266599, "post_id": 30597516, "comment_id": 49274080, "body": "Indeed, I misinterpreted. Finally I used this way: &quot;my @tab = { int (rand(60)) 1..$n+1&quot;. Work irreproachable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433266651, "post_id": 30597516, "comment_id": 49274101, "body": "That doesn&#39;t compile, and that returns n+1 results."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1433257398, "last_edit_date": 1433257398, "creation_date": 1433251631, "answer_id": 30597516, "question_id": 30596682, "link": "https://stackoverflow.com/questions/30596682/random-flling-the-array-perl/30597516#30597516", "title": "Random flling the array - perl", "body": "<p>I'm assuming you meant \"ten non-negative integers less than 60\".</p>\n\n<p>With possibility of repeats:</p>\n\n<pre><code>my @rands = map { int(rand(60)) } 1..10;\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>$ perl -E'say join \",\", map { int(rand(60)) } 1..10;'\n0,28,6,49,26,19,56,32,56,16       &lt;-- 56 is repeated\n\n$ perl -E'say join \",\", map { int(rand(60)) } 1..10;'\n15,57,50,16,51,58,46,7,17,53\n\n$ perl -E'say join \",\", map { int(rand(60)) } 1..10;'\n13,57,26,47,30,14,47,55,39,39     &lt;-- 47 and 39 are repeated\n</code></pre>\n\n<p>Without possibility of repeats:</p>\n\n<pre><code>use List::Util qw( shuffle );\n\nmy @rands = (shuffle 0..59)[0..9];\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>$ perl -MList::Util=shuffle -E'say join \",\", (shuffle 0..59)[0..9];'\n13,50,8,21,11,24,28,51,55,38\n\n$ perl -MList::Util=shuffle -E'say join \",\", (shuffle 0..59)[0..9];'\n1,0,58,46,47,49,52,33,5,13\n\n$ perl -MList::Util=shuffle -E'say join \",\", (shuffle 0..59)[0..9];'\n19,43,45,49,23,53,2,38,59,35\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4423659, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/y71JC.png?s=128&g=1", "display_name": "Plusce", "link": "https://stackoverflow.com/users/4423659/plusce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 30597516, "answer_count": 3, "score": -2, "last_activity_date": 1433257398, "creation_date": 1433249515, "question_id": 30596682, "link": "https://stackoverflow.com/questions/30596682/random-flling-the-array-perl", "title": "Random flling the array - perl", "body": "<p>I need to know how can I fill the array in perl randomly. For example: I want declare an array containing 10 elements smaller than 60. Can someone explain me how can I do it or send me any guide? I would be so grateful.</p>\n"}, {"tags": ["perl", "devel-cover"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1433251054, "post_id": 30596276, "comment_id": 49262852, "body": "Does it work if you don&#39;t run all your tests?"}, {"owner": {"reputation": 31, "user_id": 4951810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f51d898bfb70ec4cfc11751dd11d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/4951810/santosh"}, "edited": false, "score": 0, "creation_date": 1433253674, "post_id": 30596276, "comment_id": 49265003, "body": "If I run for some 100 it works. Not for more!"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4951810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f51d898bfb70ec4cfc11751dd11d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/4951810/santosh"}, "edited": false, "score": 0, "creation_date": 1433341504, "post_id": 30598917, "comment_id": 49311833, "body": "You mean to say to drop the cover db, then run the cover -test and then run the test files to capture coverage?"}, {"owner": {"reputation": 39, "user_id": 4773648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZzBmyH5vsCs/AAAAAAAAAAI/AAAAAAAABbY/jReCfKS7JXk/photo.jpg?sz=128", "display_name": "NeoNox NeoNox", "link": "https://stackoverflow.com/users/4773648/neonox-neonox"}, "reply_to_user": {"reputation": 31, "user_id": 4951810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f51d898bfb70ec4cfc11751dd11d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/4951810/santosh"}, "edited": false, "score": 0, "creation_date": 1433343203, "post_id": 30598917, "comment_id": 49313155, "body": "Yes, big db is useless in many cases, you should not regenerate html for the previous days."}, {"owner": {"reputation": 31, "user_id": 4951810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f51d898bfb70ec4cfc11751dd11d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/4951810/santosh"}, "edited": false, "score": 0, "creation_date": 1433390920, "post_id": 30598917, "comment_id": 49334712, "body": "But if I run cover -test, it displays, Deleting database cover_db cover: running make test &quot;OPTIMIZE=-O0 -fprofile-arcs -ftest-coverage&quot; &quot;OTHERLDFLAGS=-fprofile-arcs -ftest-coverage&quot; make: Nothing to be done for `test&#39;."}], "tags": [], "owner": {"reputation": 39, "user_id": 4773648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZzBmyH5vsCs/AAAAAAAAAAI/AAAAAAAABbY/jReCfKS7JXk/photo.jpg?sz=128", "display_name": "NeoNox NeoNox", "link": "https://stackoverflow.com/users/4773648/neonox-neonox"}, "is_accepted": false, "score": 0, "last_activity_date": 1433255252, "creation_date": 1433255252, "answer_id": 30598917, "question_id": 30596276, "link": "https://stackoverflow.com/questions/30596276/develcover-html-report-process-killed/30598917#30598917", "title": "Devel::Cover HTML report process killed", "body": "<p>Try to drop db and run test before you make result</p>\n\n<pre><code>cover -test\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 411, "user_id": 1030987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b766563b73ab8bac01ce0e3811c9cea7?s=128&d=identicon&r=PG", "display_name": "pjcj", "link": "https://stackoverflow.com/users/1030987/pjcj"}, "is_accepted": false, "score": 1, "last_activity_date": 1433629074, "creation_date": 1433629074, "answer_id": 30688105, "question_id": 30596276, "link": "https://stackoverflow.com/questions/30596276/develcover-html-report-process-killed/30688105#30688105", "title": "Devel::Cover HTML report process killed", "body": "<p>Each coverage run can create quite a lot of data, and in order to create the final report the runs need to be merged.  I suspect that this is the part of the process which is consuming the memory.</p>\n\n<p>It is quite likely that this process is using more memory than is necessary.</p>\n\n<p>It is also possible that it is the html report which is using the memory.  You could try using the text report to see whether that performs any better.</p>\n\n<p>If you know that some runs probably aren't contributing to the coverage you could also reduce the number of selenium tests being run.</p>\n\n<p>You should also ensure that you are only collecting coverage for the modules that you are interested in.</p>\n"}], "owner": {"reputation": 31, "user_id": 4951810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f51d898bfb70ec4cfc11751dd11d6a?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh", "link": "https://stackoverflow.com/users/4951810/santosh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1433629074, "creation_date": 1433248541, "question_id": 30596276, "link": "https://stackoverflow.com/questions/30596276/develcover-html-report-process-killed", "title": "Devel::Cover HTML report process killed", "body": "<p>I have test suite with over 200+ selenium test cases where in each I capture the coverage using Devel::Cover. After all the test cases are run, when I try to generate the HTML report using 'cover cover_db -report html' the process is killed after consuming all the memory nearly 16 GB with error out of memory. Any idea how to resolve this? Any help would be great</p>\n"}, {"tags": ["linux", "oracle", "perl", "dbi"], "comments": [{"owner": {"reputation": 4133, "user_id": 836215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96343cdb1ae4d50aa89067f4427dccca?s=128&d=identicon&r=PG", "display_name": "ibre5041", "link": "https://stackoverflow.com/users/836215/ibre5041"}, "edited": false, "score": 3, "creation_date": 1433250236, "post_id": 30596178, "comment_id": 49262174, "body": "Try to find Perl library <code>Oracle.so</code> and execute <code>ldd</code> on it. Also check env variables ORACLE_HOME, and LD_LIBRARY_PATH. Such an error is often caused by confusion of Oracle drivers: Instant one vs. tick one."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "edited": false, "score": 1, "creation_date": 1433419277, "post_id": 30643286, "comment_id": 49350623, "body": "Thanks you saved my day."}], "tags": [], "owner": {"reputation": 1620, "user_id": 4684597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SC21W.jpg?s=128&g=1", "display_name": "Zoran Pandovski", "link": "https://stackoverflow.com/users/4684597/zoran-pandovski"}, "is_accepted": true, "score": 3, "last_activity_date": 1433419164, "creation_date": 1433419164, "answer_id": 30643286, "question_id": 30596178, "link": "https://stackoverflow.com/questions/30596178/error-ocienvnlscreate-check-oracle-home-linux-env-var-or-path-windows-and-o/30643286#30643286", "title": "ERROR OCIEnvNlsCreate. Check ORACLE_HOME (Linux) env var or PATH (Windows) and or NLS settings, permissions, etc", "body": "<p>It seems like your apache can't find ORACLE_HOME. Try setting ORACLE_HOME variable in the envvars file located in apache home dir:\nexport ORACLE_HOME=/path/to/oracle/home</p>\n"}], "owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4753, "favorite_count": 0, "accepted_answer_id": 30643286, "answer_count": 1, "score": 2, "last_activity_date": 1433419164, "creation_date": 1433248297, "last_edit_date": 1433253843, "question_id": 30596178, "link": "https://stackoverflow.com/questions/30596178/error-ocienvnlscreate-check-oracle-home-linux-env-var-or-path-windows-and-o", "title": "ERROR OCIEnvNlsCreate. Check ORACLE_HOME (Linux) env var or PATH (Windows) and or NLS settings, permissions, etc", "body": "<p>I have perl script that uses DBD::Oracle to run a query and print the results. When I tried access through apache or the terminal I receive the same error.\nERROR OCIEnvNlsCreate. Check ORACLE_HOME (Linux) env var or PATH (Windows) and or NLS settings, permissions, etc.</p>\n\n<p>So I set ORACLE_HOME environment variable and it works fine from the terminal but the apache throws the same. Any suggestions?</p>\n"}, {"tags": ["perl", "encryption", "perl-module"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1433243060, "post_id": 30594206, "comment_id": 49256846, "body": "<code>perl -MO=Deparse script.pl</code>?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 2, "creation_date": 1433243708, "post_id": 30594206, "comment_id": 49257331, "body": "Are you trying to circumvent licensing restrictions? <a href=\"https://metacpan.org/pod/Filter::decrypt\" rel=\"nofollow noreferrer\">The module&#39;s documentation</a> lists some of the ways you can access the source code. Try those first, and later revise your question to show what you have tried etc. Voting to close."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1433243852, "post_id": 30594206, "comment_id": 49257423, "body": "I can&#39;t give an answer without some more detail - my &#39;answer&#39; would be to refer you to <code>Mastering Perl</code> which has a chapter on de-obfuscation. <a href=\"http://www.masteringperl.org/\" rel=\"nofollow noreferrer\">masteringperl.org</a>  Or see this answer to something similar: <a href=\"http://stackoverflow.com/questions/30287667/how-can-i-de-obfuscate-or-decode-this-perl-code/30299790#30299790\" title=\"how can i de obfuscate or decode this perl code\">stackoverflow.com/questions/30287667/&hellip;</a>  If you want a specific answer, we&#39;re going to need a bit more detail."}, {"owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "edited": false, "score": 0, "creation_date": 1433245010, "post_id": 30594206, "comment_id": 49258283, "body": "I am totally new at perl. Everything that I know is that when I try to open the perl scripts with some text editor I can see only the first line of the code.  use Filter::decrypt: So I installed Filter-1.37 that it was given together with the perl script. after installing this filter the perl script can be compiled but I can not open with text editor."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "edited": false, "score": 1, "creation_date": 1433245454, "post_id": 30594811, "comment_id": 49258573, "body": "I have tried perl -MO=Deparse Email.pm and this is the error I receive:  Aborting, Compiler detected at /usr/lib/perl/5.18/DynaLoader.pm line 207. Compilation failed in require at Email.pm line 1. BEGIN failed--compilation aborted at Email.pm line 1. use Filter::decrypt;"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 3, "last_activity_date": 1433244605, "last_edit_date": 1592644375, "creation_date": 1433244473, "answer_id": 30594811, "question_id": 30594206, "link": "https://stackoverflow.com/questions/30594206/how-to-open-and-edit-encrypted-perl-script/30594811#30594811", "title": "How to open and edit encrypted perl script?", "body": "<p>Pretty fundamentally - it's extremely difficult to make a script unreadable, simply because perl is an interpreted language. Exactly how to disentangle something is more a question of how it got tangled in the first place.</p>\n<p>So I would suggest as a first port of call - have a look through <a href=\"https://www.safaribooksonline.com/library/view/mastering-perl/9780596527242/ch07s03.html\" rel=\"nofollow noreferrer\"><code>Mastering Perl</code></a> which has a whole chapter on the subject of disassembling perl code.</p>\n<p>However if you just look at the <a href=\"https://metacpan.org/pod/Filter::decrypt\" rel=\"nofollow noreferrer\"><code>Filter::decrypt</code></a> module page, it indicates several places which the module simply cannot cover - you can only truly 'protect' code if you've control of the perl interpreter in the first place. However the things it suggests are:</p>\n<blockquote>\n<p>Strip the Perl binary to remove all symbols.</p>\n<p>Build the decrypt extension using static linking. If the extension is provided as a dynamic module, there is nothing to stop someone from linking it at run time with a modified Perl binary.</p>\n<p>Do not build Perl with -DDEBUGGING. If you do then your source can be retrieved with the <code>-Dp</code> command line option.</p>\n<p>The sample filter contains logic to detect the DEBUGGING option.</p>\n<p>Do not build Perl with C debugging support enabled.</p>\n<p>Do not implement the decryption filter as a sub-process (like the cpp source filter). It is possible to peek into the pipe that connects to the sub-process.</p>\n<p>Check that the Perl Compiler isn't being used.</p>\n<p>There is code in the BOOT: section of decrypt.xs that shows how to detect the presence of the Compiler. Make sure you include it in your module.</p>\n<p>Assuming you haven't taken any steps to spot when the compiler is in use and you have an encrypted Perl script called &quot;myscript.pl&quot;, you can get access the source code inside it using the perl Compiler backend, like this</p>\n<p><code>perl -MO=Deparse myscript.pl</code></p>\n<p>Note that even if you have included the BOOT: test, it is still possible to use the Deparse module to get the source code for individual subroutines.</p>\n</blockquote>\n<p>So:</p>\n<pre><code>perl -MO=Deparse yourscript\nperl -Dp yourscript\n</code></pre>\n<p>If these don't work - look at your local copy of <code>Filter::decrypt</code> and alter it so it prints the decrypted result.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1433250304, "last_edit_date": 1433250304, "creation_date": 1433246150, "answer_id": 30595405, "question_id": 30594206, "link": "https://stackoverflow.com/questions/30594206/how-to-open-and-edit-encrypted-perl-script/30595405#30595405", "title": "How to open and edit encrypted perl script?", "body": "<p>Best option: Just edit your unencrypted copy and reinstall it.</p>\n\n<p>Alternative: Use <a href=\"http://cpansearch.perl.org/src/RURBAN/Filter-1.54/decrypt/decr\" rel=\"nofollow\"><code>decr</code></a> (comes with Filter::decrypt) to decrypt an encrypted file.</p>\n"}], "owner": {"reputation": 83, "user_id": 4008429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ecd5ad49d4d856001a89bce7489ffaf?s=128&d=identicon&r=PG&f=1", "display_name": "Darko1991", "link": "https://stackoverflow.com/users/4008429/darko1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1800, "favorite_count": 0, "accepted_answer_id": 30595405, "answer_count": 2, "score": 0, "last_activity_date": 1433257757, "creation_date": 1433242888, "last_edit_date": 1433243512, "question_id": 30594206, "link": "https://stackoverflow.com/questions/30594206/how-to-open-and-edit-encrypted-perl-script", "title": "How to open and edit encrypted perl script?", "body": "<p>I have a perl script that is encrypted. This script can be compiled only if <a href=\"https://metacpan.org/pod/Filter::decrypt\" rel=\"nofollow\">Filter::decrypt</a> is installed. I have that Filter and I installed it and the script is compiled with no problem, but now I want to open that script with some text editor and edit it.</p>\n\n<p>Can someone help me and tell me how can I do this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1433233505, "post_id": 30590831, "comment_id": 49250716, "body": "Why are you limited to perl core modules?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4964077, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T9WPuTEYoeY/AAAAAAAAAAI/AAAAAAAAAFk/M8UZAQ1lhus/photo.jpg?sz=128", "display_name": "baski", "link": "https://stackoverflow.com/users/4964077/baski"}, "edited": false, "score": 1, "creation_date": 1433238480, "post_id": 30591044, "comment_id": 49253888, "body": "Thanks for your valuable information. The reason for limitation is the script will be run in client machine so, we can&#39;t expect any third party modules."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 13, "user_id": 4964077, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T9WPuTEYoeY/AAAAAAAAAAI/AAAAAAAAAFk/M8UZAQ1lhus/photo.jpg?sz=128", "display_name": "baski", "link": "https://stackoverflow.com/users/4964077/baski"}, "edited": false, "score": 0, "creation_date": 1433238578, "post_id": 30591044, "comment_id": 49253957, "body": "Generally I&#39;d suggest that&#39;s a false economy. I mean, CPAN is a well known and well supported resource for modules. Things like <code>Parallel::ForkManager</code> are really quite good for making better code overall - which hopefully you can see by the code illustrations."}, {"owner": {"reputation": 1001, "user_id": 3156898, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/53b9baf7830447e6294326a609b8e688?s=128&d=identicon&r=PG&f=1", "display_name": "thonnor", "link": "https://stackoverflow.com/users/3156898/thonnor"}, "edited": false, "score": 0, "creation_date": 1433240175, "post_id": 30591044, "comment_id": 49254978, "body": "@Sobrique, this is probably a daft question but I&#39;ll ask anyway. You created 10 threads/processes in your example. If there are 50 files to process, would Parallel::ForkManager queue the remaining 40 processes, similar to a threadpool?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1433240683, "post_id": 30591044, "comment_id": 49255274, "body": "Exactly that, yes. That &quot;10&quot; is a concurrency limit in <code>Parallel::ForkManager</code>. the OP indicated 3 files, so it&#39;s irrelevant to the example, but I&#39;d generally call it good form to set a limit so you don&#39;t accidentally forkbomb :)"}, {"owner": {"reputation": 1001, "user_id": 3156898, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/53b9baf7830447e6294326a609b8e688?s=128&d=identicon&r=PG&f=1", "display_name": "thonnor", "link": "https://stackoverflow.com/users/3156898/thonnor"}, "edited": false, "score": 1, "creation_date": 1433241543, "post_id": 30591044, "comment_id": 49255840, "body": "I was being lazy and just tried it. I tried a PF example a long time ago which was a lot more involved than yours. I tried yours and in 3 lines of code I have exactly what I need. Thank you."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433242217, "post_id": 30591044, "comment_id": 49256251, "body": "<code>Parallel::ForkManager</code> is one of the examples I use for why &#39;using mods&#39; is well worth doing. Because <code>fork</code> has a bunch of gotchas and slightly counter-intuitive things going on with it (like - <code>fork</code> in a loop, and each of the children also <code>fork</code> if you&#39;re not careful)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433246420, "post_id": 30591044, "comment_id": 49259275, "body": "The exit is indeed redundant with finish."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1433246497, "post_id": 30591044, "comment_id": 49259337, "body": "Shorter: <code>1 while wait &gt; 0;</code>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1433250959, "post_id": 30591044, "comment_id": 49262772, "body": "On Windows, process id&#39;s can be negative (or rather, &quot;process&quot; ids can be negative) and <code>wait</code> can return a negative value."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 3, "last_activity_date": 1433249188, "last_edit_date": 1495542608, "creation_date": 1433233860, "answer_id": 30591044, "question_id": 30590831, "link": "https://stackoverflow.com/questions/30590831/start-continue-parent-process-only-after-completing-child-process/30591044#30591044", "title": "start/continue parent process only after completing child process", "body": "<p>The problem here is - <code>fork</code> is all about parallel processing, and your <code>wait()</code> call doesn't necessarily wait on all children. Indeed - it only waits for the first, and returns the pid. See: <a href=\"http://perldoc.perl.org/functions/wait.html\" rel=\"nofollow noreferrer\"><code>perldoc wait</code></a> </p>\n\n<p>I will also point out though - you're probably not going to gain much by forking here. <code>fork</code> doesn't make anything go faster - it merely lifts some contention blocks, and lets you use certain resources (cpus) in parallel. Your limiting factor here is <em>probably</em> not the CPU (it might be, thanks to the decompression - if you weren't doing <code>.gz</code> files it almost certainly wouldn't be).  But disks are usually the slowest thing on your system, and that'll <em>likely</em> be your limiting factor. By parallel writing you won't therefore gain much speed at all. </p>\n\n<p>Also: You probably want the <code>z</code> flag in your tar command, because they look like <code>gzip</code> compressed files (I'm assuming they're also tarballs, because this makes no sense at all if they're not). </p>\n\n<p>By far the easiest way of doing this is the <code>Parallel::ForkManager</code> module:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Parallel::ForkManager;\n\nmy $manager = Parallel::ForkManager -&gt; new ( 10 ); \nforeach ('abc.gz','efg.gz','123.gz','xyz.gz')\n{\n    $manager -&gt; start and next;            \n        exec(\"tar -xvf $_\");\n        exit 0;   #probably redundant, because exec will mean it's not called. \n    $manager -&gt; finish;\n}\n$manager -&gt; wait_all_children\n`tar -xvf 'parent.gz'`;\n</code></pre>\n\n<p>However if you're set on not using extra modules (which really - is a limitation that comes up frequently, and is a bad limitation to apply). You could simply call <code>wait</code> 3 times, but I don't like that solution, because it can be tripped up by other implicit forks. </p>\n\n<p>So I would suggest use <code>waitpid()</code> instead. </p>\n\n<pre><code>my @pids; \nforeach ('abc.gz','efg.gz','123.gz','xyz.gz')\n{\n    my $pid = fork;\n    if ($pid == 0) {            \n        exec(\"tar -xvf $_\");\n        exit 0;\n    } \n    else { \n       push ( @pids, $pid ); \n    }\n}\nforeach my $pid ( @pids ) {\n   print \"Waiting for pid $pid\\n\"; \n   waitpid ( $pid, 0 ); \n}\n\n`tar -xvf 'parent.gz'`;\n</code></pre>\n\n<p>Alternatively, as a way to reap all children:</p>\n\n<pre><code>my $result = wait(); \nwhile ( $result &gt;= 0 ) {\n    $result = wait(); \n}\n</code></pre>\n\n<p><code>wait</code> should return <code>-1</code> if there's no children, which will break the loop. </p>\n\n<p>Or as <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a> points out this can be reduced to:</p>\n\n<pre><code>1 while wait &gt; 0;\n</code></pre>\n\n<p>(Which does the same thing, more concisely)</p>\n"}], "owner": {"reputation": 13, "user_id": 4964077, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T9WPuTEYoeY/AAAAAAAAAAI/AAAAAAAAAFk/M8UZAQ1lhus/photo.jpg?sz=128", "display_name": "baski", "link": "https://stackoverflow.com/users/4964077/baski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 30591044, "answer_count": 1, "score": 1, "last_activity_date": 1433249188, "creation_date": 1433233086, "question_id": 30590831, "link": "https://stackoverflow.com/questions/30590831/start-continue-parent-process-only-after-completing-child-process", "title": "start/continue parent process only after completing child process", "body": "<p>I want to do some parallel child process but, all the child process are done then only i want to start/continue my parent process. below is my sample code</p>\n\n<pre><code>    foreach ('abc.gz','efg.gz','123.gz','xyz.gz')\n    {\n        my $pid = fork;\n        if ($pid == 0) {            \n            exec(\"tar -xvf $_\");\n            exit 0;\n        }\n    }\n    wait();\n    `tar -xvf 'parent.gz'`;\n</code></pre>\n\n<p>in the above code i want to extract my \"parent.gz\" at the end of all the child process extraction. but, it is extracting the \"parent.gz\" in the middle of the child process. So, please help me.</p>\n\n<p>I can use only perl core modules, my perl version is v5.10.1</p>\n\n<p>Thanks \nBaski</p>\n"}, {"tags": ["c#", "perl"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 4809113, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/208955965798be1ef60282ba6ca6e360?s=128&d=identicon&r=PG&f=1", "display_name": "proton", "link": "https://stackoverflow.com/users/4809113/proton"}, "edited": false, "score": 0, "creation_date": 1433229540, "post_id": 30589673, "comment_id": 49248453, "body": "It worked. Can&#39;t believe it was so simple. Thank you!"}], "tags": [], "owner": {"reputation": 1461, "user_id": 4279830, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000678071733/picture?type=large", "display_name": "Alexis Peters", "link": "https://stackoverflow.com/users/4279830/alexis-peters"}, "is_accepted": true, "score": 4, "last_activity_date": 1433229225, "creation_date": 1433229225, "answer_id": 30589673, "question_id": 30589496, "link": "https://stackoverflow.com/questions/30589496/failure-to-run-a-perl-script-using-c/30589673#30589673", "title": "failure to run a perl script using C#", "body": "<p>maybe you've missed the whitespaces in Arguments ? </p>\n\n<pre><code>perlStartInfo.Arguments = \"C:\\\\e\\\\oa\\\\Evergreen\\\\evg\\\\scripts\\\\helper\\\\program.pl -config \" + config_location;\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 4809113, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/208955965798be1ef60282ba6ca6e360?s=128&d=identicon&r=PG&f=1", "display_name": "proton", "link": "https://stackoverflow.com/users/4809113/proton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 30589673, "answer_count": 1, "score": 0, "last_activity_date": 1433229225, "creation_date": 1433228627, "question_id": 30589496, "link": "https://stackoverflow.com/questions/30589496/failure-to-run-a-perl-script-using-c", "title": "failure to run a perl script using C#", "body": "<p>I am using this code to run a perl script from a C# program:</p>\n\n<pre><code>        String config_location = file_path\n        ProcessStartInfo perlStartInfo = new ProcessStartInfo(@\"C:\\Perl64\\bin\\perl.exe\");\n\n\n        perlStartInfo.Domain=\"C:\\\\e\\\\oa\\\\dir_path\";\n        perlStartInfo.FileName = \"C:\\\\Perl64\\\\bin\\\\perl.exe\";\n        perlStartInfo.Arguments = \"C:\\\\e\\\\oa\\\\Evergreen\\\\evg\\\\scripts\\\\helper\\\\program.pl\" + \"-config\" + config_location;\n        perlStartInfo.UseShellExecute = false;\n        perlStartInfo.RedirectStandardOutput = false;\n        perlStartInfo.RedirectStandardError = false;\n        perlStartInfo.RedirectStandardInput = false;\n        perlStartInfo.CreateNoWindow = false;\n        perlStartInfo.WorkingDirectory=\"C:\\\\e\\\\oa\\\\dir_path\";\n\n        Process perl = new Process(); \n        perl.StartInfo = perlStartInfo;\n        perl.Start();\n        perl.WaitForExit();\n</code></pre>\n\n<p>the code was basically obtained from here - <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/ea9455e1-b254-49e1-99df-41718ea80b5b/how-to-run-perl-scripts-in-c\" rel=\"nofollow\">https://social.msdn.microsoft.com/Forums/vstudio/en-US/ea9455e1-b254-49e1-99df-41718ea80b5b/how-to-run-perl-scripts-in-c</a></p>\n\n<p>file_path is an argument to the program.\ndir_path is where the program should look for the data it requires.\nprogram.pl is the perl script I am trying to use.</p>\n\n<p>running the script through the command line goes without problems.\nwhen runing using my code - it seems as though the perl script doesn't run at all (i'm not sure), and if it does and fail i'm not getting the program's output.</p>\n"}, {"tags": ["perl", "ftp"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433228294, "post_id": 30589234, "comment_id": 49247768, "body": "Please check <a href=\"http://search.cpan.org/~phred/Archive-Zip-1.46/lib/Archive/Zip.pm#SYNOPSIS\" rel=\"nofollow noreferrer\"><code>SYNOPSIS</code></a> &amp;&amp; <a href=\"http://search.cpan.org/~phred/Archive-Zip-1.46/lib/Archive/Zip.pm#When_not_to_use_Archive::Zip\" rel=\"nofollow noreferrer\"><code>When_not_to_use_Archive::Zip</code></a>"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433228945, "post_id": 30589234, "comment_id": 49248138, "body": "Also use ftp binary transfer, <a href=\"https://metacpan.org/pod/Net::FTP#binary\" rel=\"nofollow noreferrer\">metacpan.org/pod/Net::FTP#binary</a>"}, {"owner": {"reputation": 874, "user_id": 3649361, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/3cbaec70ec177be15919e4bb3d6d4406?s=128&d=identicon&r=PG&f=1", "display_name": "user3649361", "link": "https://stackoverflow.com/users/3649361/user3649361"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433229447, "post_id": 30589234, "comment_id": 49248395, "body": "@\u0421\u0443\u0445\u043e\u043927 how to do this in perl ??"}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433229554, "post_id": 30589234, "comment_id": 49248464, "body": "Call the method prior to transfer, <code>$ftp-&gt;binary;</code>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433229626, "post_id": 30589234, "comment_id": 49248520, "body": "@\u0421\u0443\u0445\u043e\u043927: it was stated that the downloaded file has the same size and that it can also be extracted with 7zip. So it is not a corrupt file."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1433230284, "post_id": 30589234, "comment_id": 49248914, "body": "@SteffenUllrich <a href=\"http://stackoverflow.com/questions/30589234/not-able-to-unzip-a-file-downloaded-through-ftp-get-in-perl?noredirect=1#comment49248003_30589370\" title=\"not able to unzip a file downloaded through ftp get in perl\">stackoverflow.com/questions/30589234/&hellip;</a>"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433231843, "post_id": 30589234, "comment_id": 49249791, "body": "@\u0421\u0443\u0445\u043e\u043927: you are right in that the file was manually downloaded when trying with 7zip. But it is stated in the question that the file size is the same. But the difference between binary and ASCII mode is that with ASCII <code>\\r\\n</code> might get translated to <code>\\n</code> or back (depending on source and target architecture).  Since this would change the file size no such transformation was done in this case."}, {"owner": {"reputation": 874, "user_id": 3649361, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/3cbaec70ec177be15919e4bb3d6d4406?s=128&d=identicon&r=PG&f=1", "display_name": "user3649361", "link": "https://stackoverflow.com/users/3649361/user3649361"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433232255, "post_id": 30589234, "comment_id": 49250028, "body": "@\u0421\u0443\u0445\u043e\u043927 I tried it with binary mode, it worked. Thanks, You can post it as an answer."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1433236548, "post_id": 30589234, "comment_id": 49252642, "body": "@SteffenUllrich you&#39;re right and it is possible that OP didn&#39;t notice a few bytes difference in file sizes."}], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 3649361, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/3cbaec70ec177be15919e4bb3d6d4406?s=128&d=identicon&r=PG&f=1", "display_name": "user3649361", "link": "https://stackoverflow.com/users/3649361/user3649361"}, "edited": false, "score": 0, "creation_date": 1433228723, "post_id": 30589370, "comment_id": 49248003, "body": "If I download the file manually from the server then then only I am able to unzip it using 7 zip and windows extract all also, but if I am trying to unzip a file downloaded through ftp then I am not able to extract it by any way."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 874, "user_id": 3649361, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/3cbaec70ec177be15919e4bb3d6d4406?s=128&d=identicon&r=PG&f=1", "display_name": "user3649361", "link": "https://stackoverflow.com/users/3649361/user3649361"}, "edited": false, "score": 0, "creation_date": 1433229518, "post_id": 30589370, "comment_id": 49248436, "body": "The <code>unzip</code> command line program has about the same limited format support as Archive::Zip. On UNIX/Linux you can try to use the <code>file</code> command line tool to check what format your file has, i.e. <code>file filename.zip</code>."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 2, "last_activity_date": 1433228183, "creation_date": 1433228183, "answer_id": 30589370, "question_id": 30589234, "link": "https://stackoverflow.com/questions/30589234/not-able-to-unzip-a-file-downloaded-through-ftp-get-in-perl/30589370#30589370", "title": "Not able to unzip a file downloaded through FTP get() in Perl", "body": "<blockquote>\n  <p>But when I am downloading the same file manually then I am able to unzip it manually using 7 zip.</p>\n</blockquote>\n\n<p>7zip can unpack a variety of formats, while Archive::Zip can only do a subset, i.e. mainly the original ZIP format. I suggest that your file is simply in a format supported by 7zip but not supported by Archive::Zip. If instead the file in question would have been created by Archive::Zip itself then the problem is probably different, because Archive::Zip should be able to unpack files it created itself.</p>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1433232702, "creation_date": 1433232702, "answer_id": 30590725, "question_id": 30589234, "link": "https://stackoverflow.com/questions/30589234/not-able-to-unzip-a-file-downloaded-through-ftp-get-in-perl/30590725#30590725", "title": "Not able to unzip a file downloaded through FTP get() in Perl", "body": "<p>If downloaded archive is corrupt, you can force binary transfer which doesn't do any of ftp translations,</p>\n\n<pre><code>$ftp-&gt;binary;\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 3649361, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/3cbaec70ec177be15919e4bb3d6d4406?s=128&d=identicon&r=PG&f=1", "display_name": "user3649361", "link": "https://stackoverflow.com/users/3649361/user3649361"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "accepted_answer_id": 30590725, "answer_count": 2, "score": 3, "last_activity_date": 1433232702, "creation_date": 1433227738, "question_id": 30589234, "link": "https://stackoverflow.com/questions/30589234/not-able-to-unzip-a-file-downloaded-through-ftp-get-in-perl", "title": "Not able to unzip a file downloaded through FTP get() in Perl", "body": "<p>I am using FTP get() to download a zip file from the server in perl, but when I am trying to unzip it I am not able to do it, both through perl and manually(I am using &amp; zip).\nBut when I am downloading the same file manually then I am able to unzip it manually using 7 zip.</p>\n\n<pre><code>$fpath = \"filename\";\nmy $dest = \"dest\";\n$ftp = Net::FTP-&gt;new($host, Debug =&gt; 0)||warn(\"connection not made\");\n$ftp-&gt;login($user, $pass) || die $ftp-&gt;message;\n$ftp-&gt;cwd($dir);\nmy $zipName = $ftp-&gt;get($fpath);\n\nmy $zip = Archive::Zip-&gt;new($zipName);\nmy $extractor = Archive::Extract-&gt;new( archive =&gt; $zipName );\nmy $ext = $extractor-&gt;extract(to=&gt;\"location\");\n</code></pre>\n\n<p>The size of the file is same as the server</p>\n\n<p>Can't figure out the problem.</p>\n"}, {"tags": ["regex", "perl", "file"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1433222990, "post_id": 30587911, "comment_id": 49245262, "body": "<code>use warnings; use diagnostics;</code> will give you self explanatory warning, and your code has errors."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433242527, "post_id": 30589641, "comment_id": 49256477, "body": "I think this answer would be improved by: More explanation of what&#39;s going on, rather than just &quot;try this&quot;. e.g. you&#39;ve slurped the file a different way, and amended how the regex works.  Also - <code>strict</code> and <code>warnings</code> - the OP doesn&#39;t use them, but they&#39;re bad practice to omit."}, {"owner": {"reputation": 142, "user_id": 4277620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5a3072c70061910402da089e5dac80?s=128&d=identicon&r=PG&f=1", "display_name": "sandeep", "link": "https://stackoverflow.com/users/4277620/sandeep"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1437030899, "post_id": 30589641, "comment_id": 50863580, "body": "This is just piece of code. No point of mentioning &quot;use strict; and use warnings;.&quot; all time in answer code. Of course the perl developer should know what strict and warnings means in perl."}], "tags": [], "owner": {"reputation": 142, "user_id": 4277620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c5a3072c70061910402da089e5dac80?s=128&d=identicon&r=PG&f=1", "display_name": "sandeep", "link": "https://stackoverflow.com/users/4277620/sandeep"}, "is_accepted": false, "score": -1, "last_activity_date": 1433229132, "creation_date": 1433229132, "answer_id": 30589641, "question_id": 30587911, "link": "https://stackoverflow.com/questions/30587911/matching-data-using-regular-expressions-in-perl/30589641#30589641", "title": "Matching data using Regular Expressions in perl", "body": "<p>Try this</p>\n\n<pre><code>undef $/;\nopen (FH,\"1.txt\");\nmy $string = &lt;FH&gt;;\nclose(FH);\n\n@arr = $string =~ /Session Id\\s+?:\\s+?(.*?)\\n/isg;\n\nprint \"@arr\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 4836333, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-o-kuVhOC4qA/AAAAAAAAAAI/AAAAAAAAAF0/mJkRfmD0zCk/photo.jpg?sz=128", "display_name": "sam", "link": "https://stackoverflow.com/users/4836333/sam"}, "edited": false, "score": 0, "creation_date": 1433238034, "post_id": 30591410, "comment_id": 49253603, "body": "It is not printing the output"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 43, "user_id": 4836333, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-o-kuVhOC4qA/AAAAAAAAAAI/AAAAAAAAAF0/mJkRfmD0zCk/photo.jpg?sz=128", "display_name": "sam", "link": "https://stackoverflow.com/users/4836333/sam"}, "edited": false, "score": 0, "creation_date": 1433238436, "post_id": 30591410, "comment_id": 49253858, "body": "When I run it - using the data you quoted above - I get: <code>fffffa800d461010-1,fffffa800d461010-0990wew</code> which was what you wanted? Try adding an <code>or die</code> to the open (code edited)"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1433238444, "last_edit_date": 1433238444, "creation_date": 1433234957, "answer_id": 30591410, "question_id": 30587911, "link": "https://stackoverflow.com/questions/30587911/matching-data-using-regular-expressions-in-perl/30591410#30591410", "title": "Matching data using Regular Expressions in perl", "body": "<p>OK, first off - rule 1 of perl troubleshooting. Turn on <code>use strict;</code> and <code>use warnings;</code>. </p>\n\n<p>Second: <code>while (&lt;FH&gt;) {  $Return .= $_; }</code> - you're reading the whole file into <code>$Return</code>. OK, if that's what you actually mean. But I don't think you need to. It's probably also better written as <code>local $/; $return = &lt;FH&gt;</code>.</p>\n\n<p>Thirdly: Please use a 3 argument open with lexical filehandles. 2 Arg has been deprecated quite some time, and that style of <code>FH</code> is a global variable, which is just bad form. </p>\n\n<p>Fourth: Your regular expression doesn't capture anything in it's match - so <code>$1</code> will always be empty.</p>\n\n<p>Fifth: Your regular expression doesn't have a <code>g</code> flag, so it only matches once against your whole file block of text. </p>\n\n<p>This should do what you want:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen( my $input, \"&lt;\", \"perll.txt\" ) or die $!;\n\nmy @session_ids;\nwhile ( &lt;$input&gt; ) {\n    my ( $session_id )= m/Session Id\\s+:\\s*(\\S+)/;\n    push ( @session_ids, $session_id ) if $session_id; \n}\nclose ( $input );\nprint join ( \",\", @session_ids );\n</code></pre>\n\n<ul>\n<li>We open your file as <code>$input</code>.</li>\n<li>iterate it, matching <code>Session Id</code> and capturing the id with <code>(\\S+)</code> (one or more non-spaces) into <code>$session_id</code>. (Note - needs to be a list context for this to work. </li>\n<li>If <code>$session_id</code> is present, we insert it into <code>@session_ids</code>. </li>\n</ul>\n\n<p>Note that it does this without needing to read your whole file into memory, which is generally a good thing to avoid unless necessary. (And it doesn't seem to be in your scenario). </p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433242596, "post_id": 30592846, "comment_id": 49256534, "body": "Why are you scoping <code>$Return</code> outside the loop? It seems redundant in your example? Of course, actually explicitly setting it to <code>$_</code> anyway seems somewhat redundant too, when you could: <code>while ( my $Return = &lt;FH&gt; ) {</code> which will do the same thing."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1433262602, "post_id": 30592846, "comment_id": 49271562, "body": "Also - my <i>opinion</i> is that answers are greatly improved by <code>use strict;</code> and <code>use warnings;</code>  because they serve as better future examples."}], "tags": [], "owner": {"reputation": 320, "user_id": 4882154, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/977930685580655/picture?type=large", "display_name": "Gowtham Ganesh", "link": "https://stackoverflow.com/users/4882154/gowtham-ganesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1433239936, "last_edit_date": 1433239936, "creation_date": 1433238977, "answer_id": 30592846, "question_id": 30587911, "link": "https://stackoverflow.com/questions/30587911/matching-data-using-regular-expressions-in-perl/30592846#30592846", "title": "Matching data using Regular Expressions in perl", "body": "<p>It doesnt work because, </p>\n\n<p>1) <strong>you're trying to copy the entire text in the file to the scalar</strong>  <code>$Return</code> and then trying to parse the scalar variable ( which is not the right thing to do ).</p>\n\n<p>Better approach is to <strong>parse the file line-by-line and when there is a match</strong> it should be pushed to the array.</p>\n\n<p>2) And, <strong>in the pattern matching there is no pattern to catch</strong> (you havent specified which pattern needs to be matched or in other words, what is $1? ). That needs to be corrected.</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $Return;\nmy @se;\nopen( FH, \"hello.txt\" );\nwhile (&lt;FH&gt;) {\n  $Return = $_;\n\n    if($Return =~ /Session Id\\s+:\\s+(.*)/)\n    {\n\n       push(@se,$1);\n    }\n}\nmy $output = join(\",\",@se);\nprint $output;\nclose(FH);\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4836333, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-o-kuVhOC4qA/AAAAAAAAAAI/AAAAAAAAAF0/mJkRfmD0zCk/photo.jpg?sz=128", "display_name": "sam", "link": "https://stackoverflow.com/users/4836333/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1433404850, "creation_date": 1433222440, "last_edit_date": 1433404850, "question_id": 30587911, "link": "https://stackoverflow.com/questions/30587911/matching-data-using-regular-expressions-in-perl", "title": "Matching data using Regular Expressions in perl", "body": "<p>In a perl file some text is there and I want to do pattern match. But it is not working? </p>\n\n<p>Example:</p>\n\n<pre><code>    open( FH, \"perll.txt\" );\n    while (&lt;FH&gt;) {  $Return .= $_; }\n    close(FH);\n    if($Return =~ /Session Id.*\\:\\s.*\\-\\w+/)\n    {\n       print \"data si$1\";\n        push(@se,$1);\n        next;\n        print \"yyyyyy@se\";\n    }\n</code></pre>\n\n<p>perll.txt</p>\n\n<pre><code>    Session Id             : fffffa800d461010-1\n          this is a good language\n    Session Id             : fffffa800d461010-0990wew\n</code></pre>\n\n<p>Output I need is:</p>\n\n<pre><code>    fffffa800d461010-1,fffffa800d461010-0990wew   in an array\n</code></pre>\n"}, {"tags": ["perl", "wget", "httpforbiddenhandler"], "comments": [{"owner": {"reputation": 542, "user_id": 3988574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58292bef33d998d93a507da6b6593769?s=128&d=identicon&r=PG&f=1", "display_name": "Caek", "link": "https://stackoverflow.com/users/3988574/caek"}, "edited": false, "score": 1, "creation_date": 1433221557, "post_id": 30587621, "comment_id": 49244764, "body": "403 is a server side code. Can you access the file in your web browser? If you need to log in to download it, you&#39;ll have to do the same thing in your script."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4422783, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/04e34ec0193d21b45fb9a281a23994cb?s=128&d=identicon&r=PG&f=1", "display_name": "VasaraBharat", "link": "https://stackoverflow.com/users/4422783/vasarabharat"}, "edited": false, "score": 0, "creation_date": 1433741895, "post_id": 30587785, "comment_id": 49461668, "body": "cleared:  it require agent to perform downloading.. I used wget with parameter Mozilla 5.0 and it works for me  the page i am accessing not allowed robots this is the reason for my error"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1433221717, "creation_date": 1433221717, "answer_id": 30587785, "question_id": 30587621, "link": "https://stackoverflow.com/questions/30587621/403-forbidden-error-in-perl-wget-command/30587785#30587785", "title": "403 forbidden error in perl wget command", "body": "<p>The most common case is that you need some kind of authorization to access the file. Apart from that there are systems which block access to content if the client does not look like a typical browser, i.e. wrong user-agent, missing or different HTTP headers etc.</p>\n\n<p>More information can probably not given based on the few information you provide. I recommend to try to access the file with a normal browser and if it does not work even there you have probably no authorization to access the data.</p>\n\n<p>Apart from that, since all you do with Perl is to call the wget command this issue has not really a relation to Perl.</p>\n"}], "owner": {"reputation": 81, "user_id": 4422783, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/04e34ec0193d21b45fb9a281a23994cb?s=128&d=identicon&r=PG&f=1", "display_name": "VasaraBharat", "link": "https://stackoverflow.com/users/4422783/vasarabharat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "closed_date": 1433245870, "accepted_answer_id": 30587785, "answer_count": 1, "score": 0, "last_activity_date": 1433221717, "creation_date": 1433220880, "question_id": 30587621, "link": "https://stackoverflow.com/questions/30587621/403-forbidden-error-in-perl-wget-command", "closed_reason": "Needs details or clarity", "title": "403 forbidden error in perl wget command", "body": "<p>i am trying to download a file using Perl script\nbut it is not working,</p>\n\n<pre><code> $u='http://www.example.com/dir/files/myfile.csv';\n    `wget -O $filename $u`;\n</code></pre>\n\n<p>i've tried this code but it gives me an error 403 forbidden.</p>\n"}, {"tags": ["perl", "http"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1433246263, "post_id": 30584971, "comment_id": 49259157, "body": "The $mech object itself has methods to do each of those things"}], "answers": [{"tags": [], "owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "is_accepted": true, "score": 2, "last_activity_date": 1433202440, "creation_date": 1433202440, "answer_id": 30585149, "question_id": 30584971, "link": "https://stackoverflow.com/questions/30584971/headless-browsing-wwwmechanize-and-httpresponse/30585149#30585149", "title": "headless browsing - WWW::Mechanize and HTTP::Response", "body": "<p>The <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow\">HTTP::Response</a> has everything you want back from the other site:</p>\n\n<ul>\n<li><code>$response-&gt;is_success()</code> will tell you if the request was successful,</li>\n<li><code>$response-&gt;code()</code> will return you the HTTP Response Code,</li>\n<li><code>$response-&gt;header('Content-Type')</code> will return the <code>Content-Type</code> HTTP Header,</li>\n<li><code>$response-&gt;content()</code> will give you the response content,</li>\n<li>etc.  Check out the perldoc on <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow\">HTTP::Response</a> for more details.</li>\n</ul>\n\n<p>As for <code>$mech</code>, you can continue to use it for links, etc.</p>\n\n<p>Check out <a href=\"https://metacpan.org/pod/WWW::Mechanize::Examples\" rel=\"nofollow\">WWW::Mechanize::Examples</a> for some good examples.</p>\n"}], "owner": {"reputation": 1228, "user_id": 4709524, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/wGrTV.jpg?s=128&g=1", "display_name": "beasy", "link": "https://stackoverflow.com/users/4709524/beasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 30585149, "answer_count": 1, "score": 0, "last_activity_date": 1433202440, "creation_date": 1433201266, "last_edit_date": 1433201922, "question_id": 30584971, "link": "https://stackoverflow.com/questions/30584971/headless-browsing-wwwmechanize-and-httpresponse", "title": "headless browsing - WWW::Mechanize and HTTP::Response", "body": "<p>I'm playing with <code>WWW::Mechanize</code>, i.e. </p>\n\n<pre><code>my $mech = WWW::Mechanize-&gt;new(\\%opts);\n$mech-&gt;get($url);\nmy $reponse = $mech-&gt;follow_link(regex_url =&gt; qr/some link/);\n</code></pre>\n\n<p><code>$response</code> is returned as an <code>HTTP::Response</code> object. My question is, can I use my <code>$mech</code> to continue to follow links in the response, submit forms, etc? What can I do with the <code>$response</code> object?</p>\n"}, {"tags": ["multithreading", "perl", "hash", "shared"], "answers": [{"tags": [], "owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "is_accepted": true, "score": 4, "last_activity_date": 1433200833, "last_edit_date": 1433200833, "creation_date": 1433200027, "answer_id": 30584772, "question_id": 30584406, "link": "https://stackoverflow.com/questions/30584406/using-shared-hash-in-perl/30584772#30584772", "title": "Using shared hash in Perl", "body": "<p>Use shared_clone() when using a variable (anonymous hash in this case) in an assignment.:</p>\n\n<pre><code>use threads;\nuse threads::shared;\nuse Data::Dumper;\n\nmy %h:shared;\n\nthreads-&gt;create(sub{\n    $h{manager} = shared_clone({\n        name =&gt; 'John',\n        surname =&gt; 'Doe',\n        age =&gt; 27\n    });\n})-&gt;detach;\n\nsleep 1;\n\nprint Dumper \\%h;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'manager' =&gt; {\n                         'surname' =&gt; 'Doe',\n                         'name' =&gt; 'John',\n                         'age' =&gt; 27\n                       } \n        };\n</code></pre>\n"}], "owner": {"reputation": 485, "user_id": 4108542, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Qflfs.jpg?s=128&g=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/4108542/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 30584772, "answer_count": 1, "score": 2, "last_activity_date": 1433200833, "creation_date": 1433197917, "question_id": 30584406, "link": "https://stackoverflow.com/questions/30584406/using-shared-hash-in-perl", "title": "Using shared hash in Perl", "body": "<p>Why I get this error?</p>\n\n<blockquote>\n  <p>Thread 1 terminated abnormally: Invalid value for shared scalar at thr_hash.pl line 8.</p>\n</blockquote>\n\n<pre><code>use threads;\nuse threads::shared;\nuse Data::Dumper;\n\nmy %h:shared;\n\nthreads-&gt;create(sub{\n    $h{manager} = {\n        name =&gt; 'John',\n        surname =&gt; 'Doe',\n        age =&gt; 27\n    };\n})-&gt;detach;\n\nsleep 1;\n\nprint Dumper \\%h;\n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 3909489, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/368392c8cd5a495158377e5311d655a5?s=128&d=identicon&r=PG&f=1", "display_name": "Kolibrie", "link": "https://stackoverflow.com/users/3909489/kolibrie"}, "edited": false, "score": 0, "creation_date": 1433193993, "post_id": 30583472, "comment_id": 49236941, "body": "Worked perfectly just to change DEFAULT to ALL, thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 7, "last_activity_date": 1433193521, "creation_date": 1433193521, "answer_id": 30583472, "question_id": 30583349, "link": "https://stackoverflow.com/questions/30583349/properly-use-this-perl-module/30583472#30583472", "title": "Properly Use this Perl Module", "body": "<p><code>:DEFAULT</code> has a builtin definition which takes precedence over yours. It exports all the symbols that are exported by default, which is to say all the symbols in <code>@EXPORT</code>. You should have used:</p>\n\n<pre><code>our @EXPORT      = qw( mergeSort );\nour @EXPORT_OK   = @EXPORT;\nour %EXPORT_TAGS = ( ALL =&gt; \\@EXPORT_OK );\n\nuse MergeSort;   # Same as: use MergeSort qw( :DEFAULT );\n</code></pre>\n\n<p>But I think explicitly listing one's imports is a good idea, so I'd use</p>\n\n<pre><code>our @EXPORT      = qw( );\nour @EXPORT_OK   = qw( mergeSort );\nour %EXPORT_TAGS = ( ALL =&gt; \\@EXPORT_OK );\n\nuse MergeSort qw( mergeSort );\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 3909489, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/368392c8cd5a495158377e5311d655a5?s=128&d=identicon&r=PG&f=1", "display_name": "Kolibrie", "link": "https://stackoverflow.com/users/3909489/kolibrie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 30583472, "answer_count": 1, "score": 1, "last_activity_date": 1433193898, "creation_date": 1433193034, "last_edit_date": 1433193898, "question_id": 30583349, "link": "https://stackoverflow.com/questions/30583349/properly-use-this-perl-module", "title": "Properly Use this Perl Module", "body": "<p>I've looked at several examples of using a Perl module and I still can't get it right.  I'm following this tutorial: <a href=\"http://www.perlmonks.org/?node_id=102347\" rel=\"nofollow\">http://www.perlmonks.org/?node_id=102347</a>.  For the following .pl and .pm files, I call </p>\n\n<p><code>$ perl Solver.pl</code> </p>\n\n<p>and have the below error.</p>\n\n<pre><code>Undefined subroutine &amp;main::mergeSort called at Solver.pl line 13.\n</code></pre>\n\n<p><strong>Solver.pl</strong></p>\n\n<pre><code>#!/usr/bin/perl\n#Program usage: perl  PROGRAM\n#example: \n#perl solver.pl\n\nuse strict;\nuse warnings;\nuse MergeSort qw(:DEFAULT);\n\n\n### MAIN ###\n\nmergeSort(\\@list); #ERROR;\n\n### END MAIN ###\n</code></pre>\n\n<p><strong>MergeSort.pm</strong></p>\n\n<pre><code>  package MergeSort;\n\n    use strict;\n    use Exporter;\n    use vars qw($VERSION @ISA @EXPORT @EXPORT_OK %EXPORT_TAGS);\n\n    $VERSION     = 1.00;\n    @ISA         = qw(Exporter);\n    @EXPORT      = ();\n    @EXPORT_OK   = qw(mergeSort);\n    %EXPORT_TAGS = ( DEFAULT =&gt; [qw(&amp;mergeSort)],\n                     Both    =&gt; [qw(&amp;mergeSort &amp;merge)]);\n\n\n    sub mergeSort{\n        ...(defined here\n    }#end mergeSort()\n\n    sub merge{\n        ...(defined here)\n    }#end merge()\n\n    1;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1433193842, "post_id": 30583231, "comment_id": 49236878, "body": "And if the number of items becomes unwieldy, you can create another hash for mapping keys to indexes, e.g. <code>my %mapping = (foo =&gt; 1, bar =&gt; 12); @{$byRobotNumber}{keys %mapping} = @{$tokens}[values %mapping];</code>"}], "tags": [], "owner": {"reputation": 11359, "user_id": 1323940, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/def1b1fd4342d9e332b7a3bf41f57a00?s=128&d=identicon&r=PG", "display_name": "SzG", "link": "https://stackoverflow.com/users/1323940/szg"}, "is_accepted": true, "score": 5, "last_activity_date": 1433192895, "last_edit_date": 1433192895, "creation_date": 1433192555, "answer_id": 30583231, "question_id": 30583198, "link": "https://stackoverflow.com/questions/30583198/assign-multiple-key-value-pairs-at-once/30583231#30583231", "title": "Assign multiple key/value pairs at once", "body": "<p>You can use hash slices, in our case hashref slices.</p>\n\n<p>The first trick is hash slices: if <code>%h</code> is a hash, <code>@h{LIST}</code> is a hash slice, returning the list of values corresponding to the LIST of keys. It can be an lvalue too.</p>\n\n<p>The second trick is that when you have a hashref <code>$hr</code>, <code>{$hr}</code> behaves the same way as the sigil-less core <code>h</code> of hash <code>%h</code>.</p>\n\n<p>The same thing works with arrays as well. Which leads us to this:</p>\n\n<pre><code>@{$byRobotNumber}{qw(inquiry rch serial)} = @{$tokens}[13,16,3];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": false, "score": 4, "last_activity_date": 1433192801, "creation_date": 1433192801, "answer_id": 30583293, "question_id": 30583198, "link": "https://stackoverflow.com/questions/30583198/assign-multiple-key-value-pairs-at-once/30583293#30583293", "title": "Assign multiple key/value pairs at once", "body": "<p>You can assign values to variables in parallel by using lists on each side of the equals sign:</p>\n\n<pre><code>( $byRobotNumber-&gt;{'inquiry'}, \n  $byRobotNumber-&gt;{'rch'}, \n  $byRobotNumber-&gt;{'serial'}\n) = ($tokens-&gt;[13], $tokens-&gt;[16], $tokens-&gt;[3]);\n</code></pre>\n\n<p>OR the simpler option is to use a hash slice and an array slice:</p>\n\n<pre><code>@{$byRobotNumber}{qw/inquiry rch serial/} = @{$tokens}[qw/13 16 3/]\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 3272445, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8ebca018305b782a22bdaa0359ae4a76?s=128&d=identicon&r=PG&f=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/3272445/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 30583231, "answer_count": 2, "score": 1, "last_activity_date": 1433192895, "creation_date": 1433192457, "question_id": 30583198, "link": "https://stackoverflow.com/questions/30583198/assign-multiple-key-value-pairs-at-once", "title": "Assign multiple key/value pairs at once", "body": "<p>Is it possible to do this assignment as some type of array assignment instead so it's not so verbose?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    $byRobotNumber-&gt;{'inquiry'} = $tokens-&gt;[13];\n    $byRobotNumber-&gt;{'rch'} = $tokens-&gt;[16];\n    $byRobotNumber-&gt;{'serial'} = $tokens-&gt;[3];\n</code></pre>\n\n<p>$byRobotNumber is obviously a reference to a hash here, and $tokens is a reference to an array.</p>\n"}, {"tags": ["perl", "oop"], "comments": [{"owner": {"reputation": 387, "user_id": 697895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05ce691b8b3ce3669b488ffbe47e248a?s=128&d=identicon&r=PG", "display_name": "jgrump2012", "link": "https://stackoverflow.com/users/697895/jgrump2012"}, "edited": false, "score": 0, "creation_date": 1433189204, "post_id": 30582114, "comment_id": 49234457, "body": "My attempts to explicitly specify a value for &#39;title&#39; within Doctor&#39;s BUILD() and START() methods was not successful.  I&#39;m unsure of where to go from here."}, {"owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "edited": false, "score": 2, "creation_date": 1433190987, "post_id": 30582114, "comment_id": 49235381, "body": "Class::Std is not recommended, is there a particular reason you&#39;re using it?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 5, "creation_date": 1433191948, "post_id": 30582114, "comment_id": 49235902, "body": "If you do not already have substantial investment in <code>Class::Std</code>, leave it behind. Damian has a lot of good ideas, but this one was a dud."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 6, "creation_date": 1433193150, "post_id": 30582114, "comment_id": 49236526, "body": "If you&#39;re really stuck with Class::Std, you can do this by overriding <code>new</code> in the subclass as described in <a href=\"http://www.perlmonks.org/?node_id=566829\" rel=\"nofollow noreferrer\">Overriding arguments in Class::Std superclass constructors</a> on PerlMonks."}, {"owner": {"reputation": 387, "user_id": 697895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05ce691b8b3ce3669b488ffbe47e248a?s=128&d=identicon&r=PG", "display_name": "jgrump2012", "link": "https://stackoverflow.com/users/697895/jgrump2012"}, "edited": false, "score": 0, "creation_date": 1433197426, "post_id": 30582114, "comment_id": 49238244, "body": "Moose is not available across all machines, neither is &#39;parent&#39;."}, {"owner": {"reputation": 387, "user_id": 697895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05ce691b8b3ce3669b488ffbe47e248a?s=128&d=identicon&r=PG", "display_name": "jgrump2012", "link": "https://stackoverflow.com/users/697895/jgrump2012"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1433197531, "post_id": 30582114, "comment_id": 49238279, "body": "Thanks @ThisSuitIsBlackNot :)"}], "owner": {"reputation": 387, "user_id": 697895, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05ce691b8b3ce3669b488ffbe47e248a?s=128&d=identicon&r=PG", "display_name": "jgrump2012", "link": "https://stackoverflow.com/users/697895/jgrump2012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1433189453, "creation_date": 1433188529, "last_edit_date": 1433189453, "question_id": 30582114, "link": "https://stackoverflow.com/questions/30582114/how-can-i-set-a-required-attribute-of-my-base-class-using-classstd", "title": "How can I set a required attribute of my base class using Class::Std?", "body": "<p>I am working with multiple different versions of Perl (all 5.8+) across different operating systems.  I am unable to manage modules on various machines which has led me to use a combination of Class::Std and the base pragma to facilitate OO Perl and inheritance.</p>\n\n<p>I want to set a required attribute of my base class when constructing the subclass object.  Additionally, I want to do so without explicitly specifying the value within the arguments sent to my subclass since it will be the same for all objects of the given subclass.  </p>\n\n<p>The following code (followed by a question) illustrates this scenario:</p>\n\n<p>My base class:</p>\n\n<pre><code>package Person;\n\nuse Class::Std;\n\n# class data\nmy %person_title                :ATTR( name =&gt; \"title\"      );\nmy %person_name                 :ATTR( name =&gt; \"name\"       );\n1;\n</code></pre>\n\n<p>My subclass:</p>\n\n<pre><code>package Doctor;\n\nuse Class::Std;\n\n# set inheritance\nuse base 'Person';\n\n# class data\nmy %doctor_specialty            :ATTR( name =&gt; \"specialty\"      );\n1;\n</code></pre>\n\n<p>My script (this currently fails with \"Missing initializer label for Person: 'title'\"):</p>\n\n<pre><code>use strict; \nuse warnings;\nuse Doctor;\n\nmy %args = (\n    \"name\"      =&gt; \"John Smith\",\n    \"specialty\" =&gt; \"Dentist\",\n);\n\nDoctor-&gt;new(\\%args);\n</code></pre>\n\n<p>When I create a Doctor object, I always want the 'title' to be 'Dr.'.  How can this be accomplished?</p>\n"}, {"tags": ["perl", "cygwin"], "comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 3, "creation_date": 1433181371, "post_id": 30579891, "comment_id": 49230073, "body": "Given that it&#39;s installed under <code>C:\\Perl64&#47;bin</code>, that&#39;s probably a Windows Perl installation (perhaps Strawberry?), which means it&#39;s not going to recognize Cygwin-style path names, and you might have problems using it from Cygwin. You  should consider installing the Cygwin version of Perl instead (using <code>setup-x86_64.exe</code>). That will put it in <code>&#47;usr&#47;bin</code>, which is already in your <code>$PATH</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1444, "user_id": 125344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca32d6118803a7598eb24f53e87f249b?s=128&d=identicon&r=PG", "display_name": "Kevin Condon", "link": "https://stackoverflow.com/users/125344/kevin-condon"}, "edited": false, "score": 0, "creation_date": 1433186170, "post_id": 30579891, "comment_id": 49232698, "body": "@KevinCondon: You should read <a href=\"http://stackoverflow.com/help/how-to-ask\"><b>How to Ask</b></a>. The OP&#39;s question is off-topic for Stack Overflow. Similarly, your comment is non-constructive and will eventually be deleted. This isn&#39;t a forum"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1433187335, "last_edit_date": 1433187335, "creation_date": 1433181099, "answer_id": 30579988, "question_id": 30579891, "link": "https://stackoverflow.com/questions/30579891/changing-the-cygwin-environment-variable-to-perl/30579988#30579988", "title": "Changing the Cygwin environment variable to &#39;perl&#39;", "body": "<pre class=\"lang-sh prettyprint-override\"><code>export PATH=\"/cygdrive/c/Perl64/bin:$PATH\"\n</code></pre>\n\n<hr>\n\n<p>Note that you might want to install cygwin's own build of Perl. If you continue using this Windows build of Perl, you'll need to pass Windows paths to it. If you need an automated means of converting cygwin paths to Windows paths, use <code>cygpath</code>.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># XXX\n$ perl /home/ikegami/a.pl\nCan't open perl script \"/home/ikegami/a.pl\": No such file or directory\n\n# OK\n$ perl \"$( cygpath -w '/home/ikegami/a.pl' )\"\nHello, World!\n</code></pre>\n\n<p>Handling variable lists arguments is harder.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code># XXX\n$ perl -E'for (@ARGV) { say \"$_: \", -e()?1:0 }' \"/cygdrive/c/Program Files\"/*\n/cygdrive/c/Program Files/ATI: 0\n/cygdrive/c/Program Files/Common Files: 0\n...\n\n# OK\n$ cygpath -w \"/cygdrive/c/Program Files\"/* | xargs -d\"\\n\" \\\n    perl -E'for (@ARGV) { say \"$_: \", -e()?1:0 }'\nC:\\Program Files\\ATI: 1\nC:\\Program Files\\Common Files: 1\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1444, "user_id": 125344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca32d6118803a7598eb24f53e87f249b?s=128&d=identicon&r=PG", "display_name": "Kevin Condon", "link": "https://stackoverflow.com/users/125344/kevin-condon"}, "is_accepted": false, "score": 0, "last_activity_date": 1433181237, "last_edit_date": 1433181237, "creation_date": 1433181109, "answer_id": 30579993, "question_id": 30579891, "link": "https://stackoverflow.com/questions/30579891/changing-the-cygwin-environment-variable-to-perl/30579993#30579993", "title": "Changing the Cygwin environment variable to &#39;perl&#39;", "body": "<p>You can add an alias to your <code>~/.bashrc</code> file, like this:</p>\n\n<p><code>alias perl='/cygdrive/c/Perl64/bin/perl.exe'</code></p>\n"}], "owner": {"reputation": 9, "user_id": 4962417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2ea28f5732fc94dd4792c645aa8aefa?s=128&d=identicon&r=PG&f=1", "display_name": "trinhhh", "link": "https://stackoverflow.com/users/4962417/trinhhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "closed_date": 1433451108, "accepted_answer_id": 30579988, "answer_count": 2, "score": -2, "last_activity_date": 1433187372, "creation_date": 1433180789, "last_edit_date": 1433187372, "question_id": 30579891, "link": "https://stackoverflow.com/questions/30579891/changing-the-cygwin-environment-variable-to-perl", "closed_reason": "Not suitable for this site", "title": "Changing the Cygwin environment variable to &#39;perl&#39;", "body": "<p>To execute Perl, I use</p>\n\n<pre><code>/cygdrive/c/Perl64/bin/perl.exe\n</code></pre>\n\n<p>Is there a way to replace that whole line with just <code>perl</code>?</p>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 1, "creation_date": 1433177485, "post_id": 30578861, "comment_id": 49227959, "body": "You should pre-compile the regular expression if you use it several times, or in this case use <code>in</code> instead: <code>if base_register in line:</code>."}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 1, "creation_date": 1433177937, "post_id": 30578861, "comment_id": 49228231, "body": "If you read the note to <a href=\"https://docs.python.org/3/library/re.html#re.compile\" rel=\"nofollow noreferrer\"><code>re.compile</code></a> you&#39;ll see: &quot;The compiled versions of the most recent patterns passed to re.compile() and the module-level matching functions are cached, so programs that use only a few regular expressions at a time needn\u2019t worry about compiling regular expressions.&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "edited": false, "score": 0, "creation_date": 1433277128, "post_id": 30578962, "comment_id": 49280042, "body": "How can I use <code>str.find</code> for a regex ?"}, {"owner": {"reputation": 1059, "user_id": 4055791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f63f0a332272108cf947228815bb43?s=128&d=identicon&r=PG&f=1", "display_name": "oxymor0n", "link": "https://stackoverflow.com/users/4055791/oxymor0n"}, "reply_to_user": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "edited": false, "score": 0, "creation_date": 1433280213, "post_id": 30578962, "comment_id": 49281487, "body": "oh <code>str.find</code> is not regex at all; it&#39;s a simple substring matching. I just noticed the <code>\\d+</code> part of your regex, so this might not be totally applicable, but if you only want to count the lines with <code>&quot;DramBaseAddress&quot;</code> in them (that is, if the trailing digits don&#39;t make a difference), then you can replace <code>if(re.search(base_register, line)):</code> with either <code>if &quot;DramBaseAddress&quot; in line:</code> or <code>if line.find(&quot;DramBaseAddress&quot;) &gt; -1:</code>. If the trailing digits are important, however, then your best bet is @Veedrac&#39;s answer below."}], "tags": [], "owner": {"reputation": 1059, "user_id": 4055791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f63f0a332272108cf947228815bb43?s=128&d=identicon&r=PG&f=1", "display_name": "oxymor0n", "link": "https://stackoverflow.com/users/4055791/oxymor0n"}, "is_accepted": true, "score": 5, "last_activity_date": 1433178299, "last_edit_date": 1495541815, "creation_date": 1433177503, "answer_id": 30578962, "question_id": 30578861, "link": "https://stackoverflow.com/questions/30578861/improve-python-code-performance/30578962#30578962", "title": "Improve Python code performance", "body": "<p>actually, regular expression is less efficient than the string methods in Python. From <a href=\"https://docs.python.org/2/howto/regex.html#use-string-methods\" rel=\"nofollow noreferrer\">https://docs.python.org/2/howto/regex.html#use-string-methods</a>: </p>\n\n<blockquote>\n  <p>Strings have several methods for performing operations with fixed\n  strings and they\u2019re usually much faster, because the implementation is\n  a single small C loop that\u2019s been optimized for the purpose, instead\n  of the large, more generalized regular expression engine.</p>\n</blockquote>\n\n<p>replacing <code>re.search</code> with <code>str.find</code> will give you better runtime. otherwise, using the <code>in</code> operator that others suggested would be optimized, too.</p>\n\n<p>as for the speed difference between the Python &amp; Perl version, i'll just chalk it up to the inherent quality of each language: <a href=\"https://stackoverflow.com/questions/12793562/text-processing-python-vs-perl-performance\">text processing - python vs perl performance</a></p>\n"}, {"tags": [], "owner": {"reputation": 33595, "user_id": 350890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/186bebdcf5f3045b53362efe34e56e8a?s=128&d=identicon&r=PG", "display_name": "Peter Tillemans", "link": "https://stackoverflow.com/users/350890/peter-tillemans"}, "is_accepted": false, "score": 1, "last_activity_date": 1433178115, "creation_date": 1433178115, "answer_id": 30579126, "question_id": 30578861, "link": "https://stackoverflow.com/questions/30578861/improve-python-code-performance/30579126#30579126", "title": "Improve Python code performance", "body": "<p>In this case you are using a fixed string, not a regular expression.</p>\n\n<p>For regular strings there are faster methods:</p>\n\n<pre><code>&gt;&gt;&gt; timeit.timeit('re.search(regexp, \"banana\")', setup = \"import re;     regexp=r'nan'\")\n1.2156920433044434\n&gt;&gt;&gt; timeit.timeit('\"banana\".index(\"nan\")')\n0.23752403259277344\n&gt;&gt;&gt; timeit.timeit('\"banana\".find(\"nan\")')\n0.2411658763885498\n</code></pre>\n\n<p>Now this kind of text processing is the sweet spot of Perl (aka Practical Extraction and Reporting Language) (aka Pathological Eclectic Rubbish Lister) and has been optimized extensively over the years. All that collective focus adds up.</p>\n"}, {"comments": [{"owner": {"reputation": 1059, "user_id": 4055791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f63f0a332272108cf947228815bb43?s=128&d=identicon&r=PG&f=1", "display_name": "oxymor0n", "link": "https://stackoverflow.com/users/4055791/oxymor0n"}, "edited": false, "score": 0, "creation_date": 1433261357, "post_id": 30579612, "comment_id": 49270814, "body": "do you have any test that validates the claim &quot;The overhead of calling re.compile, despite the caching, is massive.&quot;? I use a lot of <code>re.compile</code> lol"}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "reply_to_user": {"reputation": 1059, "user_id": 4055791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f63f0a332272108cf947228815bb43?s=128&d=identicon&r=PG&f=1", "display_name": "oxymor0n", "link": "https://stackoverflow.com/users/4055791/oxymor0n"}, "edited": false, "score": 1, "creation_date": 1433266490, "post_id": 30579612, "comment_id": 49274017, "body": "@oxymor0n I timed it. It was taking almost 2/3 of the time. Note that for one-off uses or searches of long strings, the overhead is likely to be amortized much better."}, {"owner": {"reputation": 1059, "user_id": 4055791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f63f0a332272108cf947228815bb43?s=128&d=identicon&r=PG&f=1", "display_name": "oxymor0n", "link": "https://stackoverflow.com/users/4055791/oxymor0n"}, "edited": false, "score": 0, "creation_date": 1433266777, "post_id": 30579612, "comment_id": 49274171, "body": "interesting, thanks. I always assume the caching performance would be better than that :/"}], "tags": [], "owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "is_accepted": false, "score": 1, "last_activity_date": 1433180089, "last_edit_date": 1433180089, "creation_date": 1433179772, "answer_id": 30579612, "question_id": 30578861, "link": "https://stackoverflow.com/questions/30578861/improve-python-code-performance/30579612#30579612", "title": "Improve Python code performance", "body": "<p>The overhead of calling <code>re.compile</code>, despite the caching, is massive. Use</p>\n\n<pre><code>is_wanted_line = re.compile(r\"DramBaseAddress\\d+\").search\n\nfor i, line in enumerate(open('rndcfg.cfg')):\n    if is_wanted_line(line):\n        j += 1\n</code></pre>\n\n<p>instead.</p>\n\n<p>Further, you can do</p>\n\n<pre><code>key = \"DramBaseAddress\"\nis_wanted_line = re.compile(r\"DramBaseAddress\\d+\").search\n\nfor i, line in enumerate(open('rndcfg.cfg')):\n    if key in line and is_wanted_line(line):\n        j += 1\n</code></pre>\n\n<p>to further reduce overhead.</p>\n\n<p>You can also consider doing your own buffering:</p>\n\n<pre><code>key = b\"DramBaseAddress\"\nis_wanted_line = re.compile(rb\"DramBaseAddress\\d+\").search\n\nwith open(\"rndcfg.cfg\", \"rb\") as file:\n    rest = b\"\"\n\n    for chunk in iter(lambda: file.read(32768), b\"\"):\n        i += chunk.count(b\"\\n\")\n        chunk, _, rest = (rest + chunk).rpartition(b\"\\n\")\n\n        if key in rest and is_wanted_line(chunk):\n            j += 1\n\n    if key in rest and is_wanted_line(rest):\n        j += 1\n</code></pre>\n\n<p>which removes the line-splitting and encoding overhead. (This isn't quite the same as it doesn't account for multiple instances per chunk. Such behaviour is relatively simple to add, but may not strictly be needed in your case.)</p>\n\n<p>This is a bit heavyweight, but thrice as fast as the Perl - 8x if you remove <code>i += chunk.count(b\"\\n\")</code>!</p>\n"}], "owner": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 1, "accepted_answer_id": 30578962, "answer_count": 3, "score": 3, "last_activity_date": 1433180089, "creation_date": 1433177156, "last_edit_date": 1433178209, "question_id": 30578861, "link": "https://stackoverflow.com/questions/30578861/improve-python-code-performance", "title": "Improve Python code performance", "body": "<p>How do I improve the performance of this simple piece of python code ?\nIsn't <code>re.search</code> the best way to find a matching line, since it is almost ~6x slower than Perl or am I doing something wrong ?</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport re\nimport time\nimport sys\n\ni=0\nj=0\ntime1=time.time()\nbase_register =r'DramBaseAddress\\d+'\nfor line in  open('rndcfg.cfg'):\n    i+=1\n    if(re.search(base_register, line)):\n        j+=1\ntime2=time.time()\n\nprint (i,j)\nprint (time2-time1)    \nprint (sys.version)\n</code></pre>\n\n<p>This code takes about 0.96 seconds to complete (Average of 10 runs)\n<br>Output:</p>\n\n<pre><code>168197 2688\n0.8597519397735596\n3.3.2 (default, Sep 24 2013, 15:14:17)\n[GCC 4.1.1]\n</code></pre>\n\n<p>while the following Perl code does it in 0.15 seconds.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Time::HiRes qw(time);\n\nmy $i=0;my $j=0;\nmy $time1=time;\nopen(my $fp, 'rndcfg.cfg');\nwhile(&lt;$fp&gt;)\n{\n    $i++;\n    if(/DramBaseAddress\\d+/)\n    {\n        $j++;\n    }\n}\nclose($fp);\nmy $time2=time;\n\nprintf(\"%d,%d\\n\",$i,$j);\nprintf(\"%f\\n\",$time2-$time1);\nprintf(\"%s\\n\",$]);\n</code></pre>\n\n<p><br>Output:</p>\n\n<pre><code>168197,2688\n0.135579\n5.012001\n</code></pre>\n\n<p>EDIT: Corrected regular expression - Which worsened the performance slightly</p>\n"}, {"tags": ["python", "perl", "bioinformatics", "dna-sequence"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1433171366, "creation_date": 1433171366, "answer_id": 30577003, "question_id": 30576602, "link": "https://stackoverflow.com/questions/30576602/homogenize-reads-length/30577003#30577003", "title": "Homogenize reads length", "body": "<pre><code>$str .= 'N' x (414 - length($str));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18644, "user_id": 50065, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8b1ed37a47da3547e6f0b6f60a916a3?s=128&d=identicon&r=PG", "display_name": "BioGeek", "link": "https://stackoverflow.com/users/50065/biogeek"}, "is_accepted": true, "score": 0, "last_activity_date": 1433173576, "last_edit_date": 1433173576, "creation_date": 1433173217, "answer_id": 30577639, "question_id": 30576602, "link": "https://stackoverflow.com/questions/30576602/homogenize-reads-length/30577639#30577639", "title": "Homogenize reads length", "body": "<p>Using <code>BioPython</code>. You might want to change the <code>default_phred_score_for_N</code> value and/or add behaviour if the sequence is longer than 414 bp.</p>\n\n<pre><code>from Bio import SeqIO\nfrom Bio import Seq\n\npath = r'C:\\path\\to\\file.fastq'\ndefault_phred_score_for_N = 60\n\ndef pad_sequence(record):\n    sequence = str(record.seq)\n    if len(sequence) &lt; 414:\n        #pad sequence\n        padding_length = 414 - len(sequence)\n        sequence += 'N' * padding_length\n\n        # pad annotation\n        annotation = record.letter_annotations['phred_quality']\n        annotation  += [default_phred_score_for_N] * padding_length\n        record.letter_annotations = {}\n\n        record.seq = Seq.Seq(sequence)\n        record.letter_annotations = {'phred_quality': annotation}\n        return record\n    return record\n\n\npadded_sequences = (pad_sequence(record) for record in \\\n                    SeqIO.parse(path, 'fastq'))\n\nSeqIO.write(padded_sequences, \"padded.fastq\", 'fastq')\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4961803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d42ca78e8c8d0375d7649ec9b47c272?s=128&d=identicon&r=PG&f=1", "display_name": "Franck Stefani", "link": "https://stackoverflow.com/users/4961803/franck-stefani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 30577639, "answer_count": 2, "score": 0, "last_activity_date": 1433173576, "creation_date": 1433170214, "question_id": 30576602, "link": "https://stackoverflow.com/questions/30576602/homogenize-reads-length", "title": "Homogenize reads length", "body": "<p>I have a data set of paired-end reads in fastq files which length ranges from 300 to 414 bp (fungal ITS2 sequences). \nI want all my reads (few millions) to be 414 long by padding with Ns the 3' end of the shorter reads. So if a read is 400 bp long, I want it to be 414 long by adding 14 Ns at the end of the sequence.\nDoes anybody know a python / perl script able to perform that task?</p>\n"}, {"tags": ["perl", "sorting", "hash"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1433170189, "post_id": 30576326, "comment_id": 49223217, "body": "See <a href=\"http://stackoverflow.com/q/3995537/176646\">Can I pass arguments to the compare subroutine of sort in Perl?</a>"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1433171525, "post_id": 30576326, "comment_id": 49224192, "body": "Also note that if you&#39;re just trying to sort <code>Data::Dumper</code> output, you can use <code>$Data::Dumper::Sortkeys</code>: &quot;Can also be set to a subroutine reference which will be called for each hash that is dumped. In this case <code>Data::Dumper</code> will call the subroutine once for each hash, passing it the reference of the hash. The purpose of the subroutine is to return a reference to an array of the keys that will be dumped, in the order that they should be dumped.&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1433174723, "post_id": 30576326, "comment_id": 49226387, "body": "by the way, <code>sort sort_binary_numbers keys %h;</code> can be shortened to <code>sort keys %h;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 4, "last_activity_date": 1433175676, "last_edit_date": 1433175676, "creation_date": 1433170089, "answer_id": 30576562, "question_id": 30576326, "link": "https://stackoverflow.com/questions/30576326/custom-sort-method-for-hashes-which-will-automatically-use-the-approporiate-hash/30576562#30576562", "title": "custom sort method for hashes which will automatically use the approporiate hash", "body": "<p>The sorting subroutine doesn't take parameters normally (i.e. unless prototypes are involved) through <code>@_</code>, but through <code>$a</code> and <code>$b</code>. <code>ref @array</code> can never return anything, as an array is never a reference.</p>\n\n<p>Wrapping by another function works, because you populate <code>@_</code> by parameters to the wrapper.</p>\n\n<p>Use a wrapper to sort any hash:</p>\n\n<pre><code>sub sort_by_value {\n    my %h = @_;\n    return sort { $h{$b} &lt;=&gt; $h{$a} } keys %h\n}\n\nprint Dumper(sort_by_value(%h));\n</code></pre>\n\n<p>You can also send the hash reference to the subroutine:</p>\n\n<pre><code>sub sort_by_value {\n    my ($h) = @_;\n    return sort { $h-&gt;{$b} &lt;=&gt; $h-&gt;{$a} } keys %$h\n}\n\nprint Dumper sort_by_value(\\%h);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 3, "last_activity_date": 1433174968, "creation_date": 1433174968, "answer_id": 30578213, "question_id": 30576326, "link": "https://stackoverflow.com/questions/30576326/custom-sort-method-for-hashes-which-will-automatically-use-the-approporiate-hash/30578213#30578213", "title": "custom sort method for hashes which will automatically use the approporiate hash", "body": "<p>So you want to have a generic sorting function such as</p>\n\n<pre><code>my $sorter = sub { $_[0]{$b} &lt;=&gt; $_[0]{$a} };\n</code></pre>\n\n<p>When it comes time to sort, just use</p>\n\n<pre><code>my @sorted_keys = sort { $sorter-&gt;(\\%h) } keys(%h);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 3, "last_activity_date": 1433175447, "last_edit_date": 1433175447, "creation_date": 1433175090, "answer_id": 30578264, "question_id": 30576326, "link": "https://stackoverflow.com/questions/30576326/custom-sort-method-for-hashes-which-will-automatically-use-the-approporiate-hash/30578264#30578264", "title": "custom sort method for hashes which will automatically use the approporiate hash", "body": "<p>You can use hash as a list, convert it to k/v aref pairs, perform sort on values (second element), and pick keys from sorted list (roughly it is Schwartzian transform in disguise).</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util 'pairs';\n\nmy %h = (\"1010\" =&gt; 1, \"1110\" =&gt; 0, \"0001\" =&gt; 3, \"1100\" =&gt; 2);\nmy @k = map $_-&gt;[0],\n   sort { $b-&gt;[1] &lt;=&gt; $a-&gt;[1] }\n   pairs %h;\n</code></pre>\n\n<p>without additional modules,</p>\n\n<pre><code>my @k = map $_-&gt;[0],\n   sort { $b-&gt;[1] &lt;=&gt; $a-&gt;[1] }\n   map [ $_, $h{$_} ],\n   keys %h;\n</code></pre>\n"}], "owner": {"reputation": 5856, "user_id": 1616488, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aCLot.jpg?s=128&g=1", "display_name": "Wakan Tanka", "link": "https://stackoverflow.com/users/1616488/wakan-tanka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 30576562, "answer_count": 3, "score": 2, "last_activity_date": 1433177030, "creation_date": 1433169394, "question_id": 30576326, "link": "https://stackoverflow.com/questions/30576326/custom-sort-method-for-hashes-which-will-automatically-use-the-approporiate-hash", "title": "custom sort method for hashes which will automatically use the approporiate hash", "body": "<p>My hash contains binary numbers as keys:</p>\n\n<pre><code>my %h = (\"1010\" =&gt; 1, \"1110\" =&gt; 0, \"0001\" =&gt; 3, \"1100\" =&gt; 2);\n</code></pre>\n\n<p>In perl I can use custom function for sorting hash. This is my function for sorting binary numbers from lowest to largest:</p>\n\n<pre><code>sub sort_binary_numbers {\n  my $a_dec = oct(\"0b\".$a);\n  my $b_dec = oct(\"0b\".$b);\n  return $a_dec &lt;=&gt; $b_dec;\n}\n</code></pre>\n\n<p>I can sort hash using this function following way:</p>\n\n<pre><code>print Dumper sort sort_binary_numbers keys %h;\n</code></pre>\n\n<p>And the result will be:</p>\n\n<pre><code>$VAR1 = '0001';\n$VAR2 = '1010';\n$VAR3 = '1100';\n$VAR4 = '1110';\n</code></pre>\n\n<p>I want to sort hash using values not keys. I can do following:</p>\n\n<pre><code>print Dumper sort { $h{$b} &lt;=&gt; $h{$a} } keys %h;\n</code></pre>\n\n<p>As you can see I have to use hash name in sorting block. The problem is how to rewrite this sorting block to function (as above examples) and automatically get the appropriate hash name in function. I've tried access hash name using <code>@_</code> but it was not printed e.g.</p>\n\n<pre><code>sub sort_by_value {\n  print Dumper @_; # This was not printed\n  print ref @_;    # This was not printed\n  return $b &lt;=&gt; $a;\n}\n</code></pre>\n\n<p>And call it following way:</p>\n\n<pre><code>print Dumper sort sort_by_value keys %h;\n</code></pre>\n\n<p>The interesting part is that when I wrap this sorting in to another function and call it in loop from this function I will get the output of data dumper that was previously missing (but I still did not get the output of ref command):</p>\n\n<pre><code>sub calling_from_function {\n  my %h = %{$_[0]};\n  foreach my $key (sort sort_by_value keys %h){\n  }\n}\n\n&amp;calling_from_function(\\%h);\n</code></pre>\n\n<p>Then I get this output:</p>\n\n<pre><code>$VAR1 = {\n          '0001' =&gt; 3,\n          '1010' =&gt; 1,\n          '1110' =&gt; 0,\n          '1100' =&gt; 2\n        };\n$VAR1 = {\n          '0001' =&gt; 3,\n          '1010' =&gt; 1,\n          '1110' =&gt; 0,\n          '1100' =&gt; 2\n        };\n$VAR1 = {\n          '0001' =&gt; 3,\n          '1010' =&gt; 1,\n          '1110' =&gt; 0,\n          '1100' =&gt; 2\n        };\n$VAR1 = {\n          '0001' =&gt; 3,\n          '1010' =&gt; 1,\n          '1110' =&gt; 0,\n          '1100' =&gt; 2\n        };\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>How can I replace sorting block in this command <code>print Dumper sort { $h{$b} &lt;=&gt; $h{$a} } keys %h;</code> with function and get the appropriate name of hash inside sortign function?</li>\n<li>Why wrapping from another function works?</li>\n<li>Why <code>ref</code> does not works?</li>\n</ol>\n"}, {"tags": ["regex", "perl", "file", "expression"], "answers": [{"tags": [], "owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "is_accepted": false, "score": 0, "last_activity_date": 1433168555, "creation_date": 1433168555, "answer_id": 30576023, "question_id": 30575939, "link": "https://stackoverflow.com/questions/30575939/tricky-regex-issue-matching-a-value-in-a-line-beginning-with-keyword/30576023#30576023", "title": "Tricky regex issue, matching a value in a line beginning with keyword", "body": "<p>You can use the following to match:</p>\n\n<pre><code>/^(?=foo\\b).*?\\b(bar)\\b.*/gm\n</code></pre>\n\n<p>And extract the matched value with <code>$1</code> (group 1)</p>\n\n<p>See <a href=\"https://regex101.com/r/nX6cI0/2\" rel=\"nofollow\">DEMO</a></p>\n"}, {"tags": [], "owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "is_accepted": false, "score": 0, "last_activity_date": 1433170190, "last_edit_date": 1433170190, "creation_date": 1433169886, "answer_id": 30576493, "question_id": 30575939, "link": "https://stackoverflow.com/questions/30575939/tricky-regex-issue-matching-a-value-in-a-line-beginning-with-keyword/30576493#30576493", "title": "Tricky regex issue, matching a value in a line beginning with keyword", "body": "<p>This will give you desire output:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nopen(my $fh, \"&lt;\", \"perltest.txt\") or die \"$!\";\n\nwhile(my $line = &lt;$fh&gt;)\n{\n    if($line =~ /^foo.*\\bbar\\b/)\n    {\n        print \"$line\";\n    }\n}\n\n_____DATA_____\nfoo dum diddly bar dee\nhello world bar hopping\nfoo how bar you\nfoo jingle jangle jingle\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>foo dum diddly bar dee\nfoo how bar you\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 1, "last_activity_date": 1433170052, "creation_date": 1433170052, "answer_id": 30576547, "question_id": 30575939, "link": "https://stackoverflow.com/questions/30575939/tricky-regex-issue-matching-a-value-in-a-line-beginning-with-keyword/30576547#30576547", "title": "Tricky regex issue, matching a value in a line beginning with keyword", "body": "<p>Try this:</p>\n\n<pre><code>while (&lt;DATA&gt;) {\n    print if m/^foo.*\\bbar\\b/\n}\n\n__DATA__\nfoo dum diddly bar dee\nhello world bar hopping\nfoo how bar you\nfoo jingle jangle jingle\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>foo dum diddly bar dee\nfoo how bar you\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4961610, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/61062fc7888a315d93d8c79dd1ff3c37?s=128&d=identicon&r=PG&f=1", "display_name": "XeroG", "link": "https://stackoverflow.com/users/4961610/xerog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 30576547, "answer_count": 3, "score": 0, "last_activity_date": 1447581460, "creation_date": 1433168328, "last_edit_date": 1447581460, "question_id": 30575939, "link": "https://stackoverflow.com/questions/30575939/tricky-regex-issue-matching-a-value-in-a-line-beginning-with-keyword", "title": "Tricky regex issue, matching a value in a line beginning with keyword", "body": "<p>I am trying to search a text file for a certain keyword, and match that keyword when the line that it is contained in starts with a certain value: For instance, I am trying to match instances of \"bar\" when those instances occur in lines that start with \"foo\". For example:</p>\n\n<pre><code>foo dum diddly bar dee\nhello world bar hopping\nfoo how bar you\nfoo jingle jangle jingle\n</code></pre>\n\n<p>Line one and three should match, however lines two and four should not match. I have tried using the lookbehind operator like this: <code>/(?&lt;=^foo)bar/</code> , specifically using the <code>^</code> operator in order to attempt to match the beginning of the line, however this does not work. I have also tested it without the <code>^</code> and with and without <code>\\b</code> around foo and bar in an attempt to isolate where the regex is going wrong. For reference I am using perl, and here is what the entirety of my code looks like:</p>\n\n<pre><code>use 5.14.2;\nuse strict;\nuse warnings;\nopen(my $fh, \"&lt;\", \"perltest.txt\") or die \"$!\";\nwhile(my $line = &lt;$fh&gt;)\n{\n    if($line =~ /(?&lt;=^foo)bar/)\n    {\n        print \"succeeded\\n\";\n    }\n    else\n    {\n        print \"failed\\n\"\n    }\n}\nprint \"finished\\n\";\n</code></pre>\n\n<p>I am getting failures to match on all of these lines. It doesn't appear to be an issue with my code, as I can successfulyl get matches with more basic regex evaluations, so I am fairly certain the issue lies with the lookbehind. I have tried regex101 to no avail as well. If anyone has any advice on how to create a successful regex for this, it would be incredible.</p>\n"}, {"tags": ["perl", "getopt-long"], "comments": [{"owner": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "edited": false, "score": 3, "creation_date": 1433167724, "post_id": 30575641, "comment_id": 49221326, "body": "looks like you have to invoke your command like this: <code>.&#47;abc.pl --aviad 4</code>"}, {"owner": {"reputation": 29, "user_id": 3205436, "user_type": "registered", "profile_image": "https://graph.facebook.com/624714720/picture?type=large", "display_name": "user3205436", "link": "https://stackoverflow.com/users/3205436/user3205436"}, "reply_to_user": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "edited": false, "score": 0, "creation_date": 1433167936, "post_id": 30575641, "comment_id": 49221480, "body": "can i change something in the code for use command line without this signs?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1433168204, "post_id": 30575641, "comment_id": 49221696, "body": "Yes. Read from <code>@ARGV</code>"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1433168461, "post_id": 30575641, "comment_id": 49221904, "body": "With Getopt::Long you can also say <code>abc.pl -a 4</code> as a short form of the long params."}, {"owner": {"reputation": 29, "user_id": 3205436, "user_type": "registered", "profile_image": "https://graph.facebook.com/624714720/picture?type=large", "display_name": "user3205436", "link": "https://stackoverflow.com/users/3205436/user3205436"}, "edited": false, "score": 0, "creation_date": 1433169629, "post_id": 30575641, "comment_id": 49222794, "body": "what is the meaning of &quot;Read from @ARGV&quot;??"}, {"owner": {"reputation": 1477, "user_id": 143613, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0efed282ec466413481639d354473990?s=128&d=identicon&r=PG", "display_name": "gnuchu", "link": "https://stackoverflow.com/users/143613/gnuchu"}, "edited": false, "score": 1, "creation_date": 1433170354, "post_id": 30575641, "comment_id": 49223327, "body": "\\@ARGV is an array of the arguments passed to a perl program. If you have &#39;perl test.pl 1 2 3 4&#39; on the command line, you can reference the passed parameters (in test.pl) via \\@ARGV. $ARGV[0] will equal 1, $ARGV[1] will equal 2 and so on.  (ignore \\ character above - trying to show perl syntax not send a message to a user)"}], "answers": [{"tags": [], "owner": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "is_accepted": false, "score": -1, "last_activity_date": 1433175664, "creation_date": 1433175664, "answer_id": 30578422, "question_id": 30575641, "link": "https://stackoverflow.com/questions/30575641/run-perl-script-with-argument-from-command-line/30578422#30578422", "title": "run perl script with argument from command line", "body": "<p>catching key/value pairs from the command-line without getopt (hence without using dashes) can be done like this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %opts = map { $ARGV[$_] =&gt; $ARGV[$_ + 1] } (grep {$_ % 2 == 0} 0..$#ARGV);\n\nif($opts{'aviad'}) {\n    printf(\"aaa:$opts{'aviad'}\\n\");\n} else {\n    printf(\"error\\n\");\n}\n</code></pre>\n\n<p>this will print <code>aaa:4</code> for invocations as the following:</p>\n\n<pre><code>perl myscript.pl aviad 4\nperl myscript.pl bviad 23 aviad 4\nperl myscript.pl cviad 12 aviad 4 bviad 23\n</code></pre>\n\n<p>A brief explanation:</p>\n\n<p><code>grep {$_  % 2 == 0} 0..$#ARGV</code> picks the even indices from <code>@ARGV</code>.</p>\n\n<p><code>map { $ARGV[$_] =&gt; $ARGV[$_ + 1] }</code> builds a hash where the even indices become keys and the odd ones the corresponding values.</p>\n"}], "owner": {"reputation": 29, "user_id": 3205436, "user_type": "registered", "profile_image": "https://graph.facebook.com/624714720/picture?type=large", "display_name": "user3205436", "link": "https://stackoverflow.com/users/3205436/user3205436"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1668, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1433175664, "creation_date": 1433167498, "last_edit_date": 1433169228, "question_id": 30575641, "link": "https://stackoverflow.com/questions/30575641/run-perl-script-with-argument-from-command-line", "title": "run perl script with argument from command line", "body": "<p>i wrote perl script that take argument from command line and print simple line with this argument. this is the code:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse Getopt::Long;\nuse strict;\n\nmy $aviad;\n\n\nGetOptions(\n            \"aviad:s\"  =&gt; \\$aviad,\n           );\n\nif($aviad){\n    printf (\"aaa: $aviad\\n\");\n}\nelse{\n        printf(\"error\\n\");\n}\n</code></pre>\n\n<p>i dont know why,but when i type the scriptname in command line like that: </p>\n\n<pre><code>./abc.pl aviad 4\n</code></pre>\n\n<p>i got <code>error</code> instead of <code>aaa:4</code></p>\n\n<p>Why it happened? and how can i solve it?</p>\n"}, {"tags": ["regex", "perl", "terminal"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1433164880, "post_id": 30574597, "comment_id": 49219276, "body": "<a href=\"http://stackoverflow.com/a/2147588/223226\">stackoverflow.com/a/2147588/223226</a>"}, {"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1433165401, "post_id": 30574597, "comment_id": 49219657, "body": "Are you not getting this error: <code>The filename, directory name, or volume label syntax is incorrect.</code>?"}, {"owner": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 2, "creation_date": 1433165510, "post_id": 30574597, "comment_id": 49219731, "body": "<code>perl -ne &#39;print unless m|&#47;&#47;###==###| ... m|&#47;&#47;###==###|&#39;</code>"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "reply_to_user": {"reputation": 7536, "user_id": 1691146, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RW9zE.jpg?s=128&g=1", "display_name": "RobEarl", "link": "https://stackoverflow.com/users/1691146/robearl"}, "edited": false, "score": 0, "creation_date": 1433176175, "post_id": 30574597, "comment_id": 49227174, "body": "@RobEarl&#39;s comment should be an answer.  That&#39;s how the range operator&#39;s used."}], "answers": [{"comments": [{"owner": {"reputation": 4742, "user_id": 1469465, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/6Q1bM.jpg?s=128&g=1", "display_name": "physicalattraction", "link": "https://stackoverflow.com/users/1469465/physicalattraction"}, "edited": false, "score": 0, "creation_date": 1433227818, "post_id": 30577512, "comment_id": 49247505, "body": "Thanks! :-) The option with -0777 seems to work fine. Is there a way to perform this on all files, and save the files in the same action?"}, {"owner": {"reputation": 4742, "user_id": 1469465, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/6Q1bM.jpg?s=128&g=1", "display_name": "physicalattraction", "link": "https://stackoverflow.com/users/1469465/physicalattraction"}, "edited": false, "score": 0, "creation_date": 1433228764, "post_id": 30577512, "comment_id": 49248027, "body": "This seems to work for that (font looks weird due to conflict os meaning of the apostrophe): $ perl -0777 -p -i -e &#39;s/(^\\s*^\\/\\/###==###.*?\\/\\/###==###\\s*)//gms&#39; <code>find . -type f -name &quot;index.php&quot;</code>"}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 2, "last_activity_date": 1433179179, "last_edit_date": 1433179179, "creation_date": 1433172849, "answer_id": 30577512, "question_id": 30574597, "link": "https://stackoverflow.com/questions/30574597/replace-multiline-string-in-all-files-in-terminal/30577512#30577512", "title": "Replace multiline string in all files in terminal", "body": "<p>You can use:</p>\n\n<pre><code>s/(^\\s*^\\/\\/###==###.*?\\/\\/###==###\\s*)//gms\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/dP1yM9/1\" rel=\"nofollow\">Working Demo</a></p>\n\n<p>Then in the terminal and in Perl. Given:</p>\n\n<pre><code>$ echo \"$tgt\"\nText to keep\n\n//###==###\nText to remove\n//###==###\n\nText to keep\n</code></pre>\n\n<p>Use the <code>-0777</code> command flag to slurp the whole file and then:</p>\n\n<pre><code>$ echo \"$tgt\" | perl -0777 -ple 's/(^\\s*^\\/\\/###==###.*?\\/\\/###==###\\s*)//gms'\nText to keep\nText to keep\n</code></pre>\n\n<p>Or, you can use the range operator. If done this way, you cannot remove the leading and trailing blank lines if that is your intent:</p>\n\n<pre><code>$ echo \"$tgt\" | perl -lne 'print unless (/\\/\\/###==###/ ... /\\/\\/###==###/)'\nText to keep\n\n\nText to keep\n</code></pre>\n"}], "owner": {"reputation": 4742, "user_id": 1469465, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/6Q1bM.jpg?s=128&g=1", "display_name": "physicalattraction", "link": "https://stackoverflow.com/users/1469465/physicalattraction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 0, "accepted_answer_id": 30577512, "answer_count": 1, "score": 2, "last_activity_date": 1433238095, "creation_date": 1433164681, "last_edit_date": 1495541748, "question_id": 30574597, "link": "https://stackoverflow.com/questions/30574597/replace-multiline-string-in-all-files-in-terminal", "title": "Replace multiline string in all files in terminal", "body": "<p>I have a couple of files in a directory, in which I have a piece of text between two separators.</p>\n\n<pre><code>Text to keep\n\n//###==###\nText to remove\n//###==###\n\nText to keep\n</code></pre>\n\n<p>After an extensive search, I found the following Mac OS X Terminal command, with which I can remove the separators themselves.</p>\n\n<pre><code>perl -pi -w -e 's|//###==###||g' `find . -type f`\n</code></pre>\n\n<p>However, I need something with a regex that does not only remove the separators themselves, but also what is in between. Something like this, although this line doesn't do anything.</p>\n\n<pre><code>perl -pi -w -e 's|//###==###(.*)//###==###||g' `find . -type f`\n</code></pre>\n\n<p><strong>EDIT AFTER DUPLICATE FLAG</strong></p>\n\n<p>I see something similar <a href=\"https://stackoverflow.com/questions/2146745/how-should-i-use-perls-scalar-range-operator\">here</a>, using the scalar range operator, but I cannot make it work for me. Failed attempts include:</p>\n\n<pre><code>perl -pi -w -e 's|//###==###..//###==###||g' `find . -type f`\nperl -pi -w -e 's|//###==###(..)//###==###||g' `find . -type f`\nperl -pi -w -e 's|//###==###[..]//###==###||g' `find . -type f`\n</code></pre>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>With the help of dawg below, the following oneliner will do exactly what I want:</p>\n\n<pre><code>$ perl -0777 -p -i -e 's/(^\\s*^\\/\\/###==###.*?\\/\\/###==###\\s*)//gms' `find . -type f -name \"index.php\"`\n</code></pre>\n"}, {"tags": ["linux", "perl"], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "edited": false, "score": 0, "creation_date": 1433160778, "post_id": 30572967, "comment_id": 49216292, "body": "<code>@dirs</code> contains no data after running the above line."}, {"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "reply_to_user": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "edited": false, "score": 0, "creation_date": 1433160885, "post_id": 30572967, "comment_id": 49216359, "body": "@ArunShankar comment all <code>map&#47;sort</code> lines; perhaps your filter doesn&#39;t work as you expect?"}, {"owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "edited": false, "score": 0, "creation_date": 1433164732, "post_id": 30572967, "comment_id": 49219161, "body": "Thanks it works.. The directory I had mentioned did not have the directories and it kept failing.. Thanks for the help !!!"}], "tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 2, "last_activity_date": 1433160369, "last_edit_date": 1433160369, "creation_date": 1433160059, "answer_id": 30572967, "question_id": 30572905, "link": "https://stackoverflow.com/questions/30572905/fetch-directories-as-per-updated-timestamp-in-a-directory-in-perl/30572967#30572967", "title": "Fetch Directories as per updated timestamp in a directory in Perl", "body": "<p>You can sort based on directory modification time relative to script start-up time <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow\"><code>-M</code></a></p>\n\n<pre><code>my @dirs = \n  map $_-&gt;[0],\n  sort { $b-&gt;[1] &lt;=&gt; $a-&gt;[1] }\n  map [ $_, -M \"$baseDir/$_\" ], \n  grep {-d \"$baseDir/$_\" &amp;&amp; ! /^\\.{1,2}$/ &amp;&amp; ! /^\\.[a-zA-Z]*/}\n  readdir($dh);\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 1677102, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/37d7fd63cc42d1332db097ab129cbe4b?s=128&d=identicon&r=PG", "display_name": "Arun Shankar", "link": "https://stackoverflow.com/users/1677102/arun-shankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 30572967, "answer_count": 1, "score": 0, "last_activity_date": 1433160369, "creation_date": 1433159876, "question_id": 30572905, "link": "https://stackoverflow.com/questions/30572905/fetch-directories-as-per-updated-timestamp-in-a-directory-in-perl", "title": "Fetch Directories as per updated timestamp in a directory in Perl", "body": "<p>I need to list directories based on the time stamp of the files modified inside the directory in ascending order. I have the below code which gets me all the directories. But, I needed directories in ascending order of timestamp.</p>\n\n<p>I know we can use <code>ls -ltr</code> but using awk on <code>ls -ltr</code> can give me unexpected results when I need only specific columns of output. If someone can help me, please let me know</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $baseDir = \"&lt;My base dir&gt;\";\n\nopendir my $dh, $baseDir\n  or die \"$0: opendir: $!\";\n\nmy @dirs = grep {-d \"$baseDir/$_\" &amp;&amp; ! /^\\.{1,2}$/ &amp;&amp; ! /^\\.[a-zA-Z]*/}        readdir($dh);\nprint \"DIRs is @dirs\\n\";\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl"], "comments": [{"owner": {"reputation": 33609, "user_id": 283078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27046ee7321f6c8a4c31c5a8ee066460?s=128&d=identicon&r=PG", "display_name": "cmbuckley", "link": "https://stackoverflow.com/users/283078/cmbuckley"}, "edited": false, "score": 1, "creation_date": 1433151055, "post_id": 30569534, "comment_id": 49210266, "body": "Can&#39;t you just put the debug statement in one place, as the first line in the <code>query</code> function? Seems much easier than this approach."}, {"owner": {"reputation": 335, "user_id": 2387196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/186078e5a0be34f6180806030dc7a7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/2387196/michael"}, "reply_to_user": {"reputation": 33609, "user_id": 283078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27046ee7321f6c8a4c31c5a8ee066460?s=128&d=identicon&r=PG", "display_name": "cmbuckley", "link": "https://stackoverflow.com/users/283078/cmbuckley"}, "edited": false, "score": 0, "creation_date": 1433158276, "post_id": 30569534, "comment_id": 49214748, "body": "Yes, but sometime query($query_to_exec) will be a custom function, some other times will be the standard mysqli function so I can&#39;t edit it! (tell me if I am wrong, just came back to php stuff) and as the code is not mine, I just need an automatic way to add debug info about queries in a simple way!"}], "answers": [{"tags": [], "owner": {"reputation": 1701, "user_id": 593515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db38a92a0b5bf67d03d9bf23c0ab949c?s=128&d=identicon&r=PG", "display_name": "OrenD", "link": "https://stackoverflow.com/users/593515/orend"}, "is_accepted": true, "score": 1, "last_activity_date": 1433150733, "creation_date": 1433150733, "answer_id": 30569911, "question_id": 30569534, "link": "https://stackoverflow.com/questions/30569534/script-to-add-line-with-part-of-the-pattern-used-to-find-the-line/30569911#30569911", "title": "Script to add line with part of the pattern used to find the line", "body": "<p>Given a file named <code>filename.php</code>, you can run the following command:</p>\n\n<pre><code>perl -pi -e 's/^(.+-&gt; query\\((.+?)\\).*)$/file_put_contents\\(\"php:\\/\\/stderr\", print_r\\($2, TRUE\\)\\);\\n$1/;' filename.php\n</code></pre>\n\n<p>It will update the file in-place with the substitution you intended to perform.</p>\n"}, {"tags": [], "owner": {"reputation": 876, "user_id": 1577347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z5wJu.png?s=128&g=1", "display_name": "Chris Smeele", "link": "https://stackoverflow.com/users/1577347/chris-smeele"}, "is_accepted": false, "score": 1, "last_activity_date": 1433150758, "creation_date": 1433150758, "answer_id": 30569924, "question_id": 30569534, "link": "https://stackoverflow.com/questions/30569534/script-to-add-line-with-part-of-the-pattern-used-to-find-the-line/30569924#30569924", "title": "Script to add line with part of the pattern used to find the line", "body": "<p>You can use perl's <code>-i</code> flag to edit the file in place.</p>\n\n<p>To only capture the query variable you need to add a capture group within the <code>()</code> part, as follows:</p>\n\n<pre><code> perl -i -pe 's/^(.*-&gt; query\\((.*)\\);)$/inserted_code_here($2);\\n$1/' x.php\n</code></pre>\n\n<p>Then replace <code>inserted_code_here</code> with whatever you want to put on the line before the query call.</p>\n"}, {"comments": [{"owner": {"reputation": 335, "user_id": 2387196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/186078e5a0be34f6180806030dc7a7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/2387196/michael"}, "edited": false, "score": 0, "creation_date": 1433158148, "post_id": 30569932, "comment_id": 49214675, "body": "didn&#39;t worked, I got: &quot;my&quot; variable $line masks earlier declaration in same statement at ./script.perl line 14. &quot;my&quot; variable $line masks earlier declaration in same scope at ./script.perl line 19. syntax error at ./script.perl line 13, near &quot;) {&quot; syntax error at ./script.perl line 23, near &quot;}&quot; Execution of ./script.perl aborted due to compilation errors. Anyway, $queryVar is one of the possible names of the variable that contains the query that will be executed!"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 335, "user_id": 2387196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/186078e5a0be34f6180806030dc7a7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/2387196/michael"}, "edited": false, "score": 0, "creation_date": 1433158523, "post_id": 30569932, "comment_id": 49214911, "body": "Oops, very minor typo. Fixed. This <i>should</i> cope with extracting a &#39;variable name&#39; rather than an actual argument. But it doesn&#39;t clobber the source, so it won&#39;t cause any harm either."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1433158485, "last_edit_date": 1433158485, "creation_date": 1433150801, "answer_id": 30569932, "question_id": 30569534, "link": "https://stackoverflow.com/questions/30569534/script-to-add-line-with-part-of-the-pattern-used-to-find-the-line/30569932#30569932", "title": "Script to add line with part of the pattern used to find the line", "body": "<p>You can use <code>perl</code> like <code>sed</code>. But really, by doing so you throw away a lot of its potential as a language. I couldn't quite tell from your question - is <code>$queryVar</code> a literal, or is it a variable you need to replace? </p>\n\n<p>Why not try this:</p>\n\n<p>#!/usr/bin/perl</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse File::Find;\n\nsub process_php {\n    next unless m/\\.php$/;\n    open( my $input, \"&lt;\", $File::Find::name ) or warn $!;\n    open( my $output, \"&gt;\", $File::Find::name . \".new\" )\n        or warn $!;\n    while ( my $line = &lt;$input&gt; ) {\n        my ($query_id) = ( $line =~ m/-&gt; query\\((.*)\\))/ );\n        if ($query_id) {\n            print {$output} \"file_put_contents('php://stderr', print_r(\",\n                $query_id, \" TRUE));\\n\";\n        }\n        print {$output} $line;\n    }\n    close($input);\n    close($output);\n}\n\nfind( \\&amp;process_php, \"/path/to/php/files\" );\n</code></pre>\n\n<p>This will:</p>\n\n<ul>\n<li>search all the '*.php' files under the directory path.</li>\n<li>traverse them looking for your string. </li>\n<li>If it exists, add a new line just before it. </li>\n<li>write a '.new' file, with the new content (Once you're happy this works, you can swap 'em over).</li>\n</ul>\n"}], "owner": {"reputation": 335, "user_id": 2387196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/186078e5a0be34f6180806030dc7a7b7?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/2387196/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 30569911, "answer_count": 3, "score": 1, "last_activity_date": 1433161804, "creation_date": 1433149448, "last_edit_date": 1495535210, "question_id": 30569534, "link": "https://stackoverflow.com/questions/30569534/script-to-add-line-with-part-of-the-pattern-used-to-find-the-line", "title": "Script to add line with part of the pattern used to find the line", "body": "<p>I'd like to parse all *.php files, and for each line like </p>\n\n<pre><code>$res = $DB -&gt; query($queryVar);\n</code></pre>\n\n<p>I need to get:</p>\n\n<pre><code>file_put_contents('php://stderr', print_r($queryVar, TRUE));\n$res = $DB -&gt; query($queryVar);\n</code></pre>\n\n<p>The name of the variable $queryVar may change! I need to get it from the code!</p>\n\n<p>My initial idea:</p>\n\n<pre><code>find  -not -path \"*/\\.\" -name \"*.php\" -type f -print0 | xargs -0 sed -i 's,SOMETHING,SOMETHING,'\n</code></pre>\n\n<p>but it seems to be not possible to get the name of the query variable with sed.</p>\n\n<p>I also started looking at Perl: <a href=\"https://stackoverflow.com/questions/17731078/perl-append-a-line-after-the-last-line-that-match-a-pattern-but-incrementing-p\">Perl: append a line after the last line that match a pattern (but incrementing part of the pattern)</a> </p>\n\n<p>But I was able to do only this:</p>\n\n<pre><code>perl -pe 's/(-&gt; query\\(.*\\))/AAAAA $1 AAAAA\\n$1/'  &lt; filename.php\n</code></pre>\n\n<p>With 2 problems: I get the result on standard output, I need something like sed to edit the original file, as I will call it from <code>find | xargs</code> and anyway I get the whole found line and not only the variable:</p>\n\n<pre><code>    $res = $DB AAAAA -&gt; query( $SQL) AAAAA\n-&gt; query( $SQL);\n</code></pre>\n"}, {"tags": ["perl", "encoding", "fileslurp"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4960633"}, "edited": false, "score": 0, "creation_date": 1433156508, "post_id": 30569662, "comment_id": 49213547, "body": "I tried your solution but still the same problem. I&#39;ve tested on another machine and the problem disappeared. I think it is a problem of OS environment."}], "tags": [], "owner": {"reputation": 2450, "user_id": 1186729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec301bbe6bfd4c849a29d715f6094745?s=128&d=identicon&r=PG", "display_name": "Denis Ibaev", "link": "https://stackoverflow.com/users/1186729/denis-ibaev"}, "is_accepted": false, "score": 2, "last_activity_date": 1433149865, "creation_date": 1433149865, "answer_id": 30569662, "question_id": 30569458, "link": "https://stackoverflow.com/questions/30569458/reading-utf8-files-with-fileslurp/30569662#30569662", "title": "Reading UTF8 files with File::Slurp", "body": "<p><code>\\u00e9</code> is not an UTF-8 character, is JavaScript represent of Unicode character. You need decode content of file with <a href=\"http://metacpan.org/pod/Encode::JavaScript::UCS\" rel=\"nofollow\">Encode::JavaScript::UCS</a> for example.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4960633"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1433175953, "creation_date": 1433149212, "last_edit_date": 1433175953, "question_id": 30569458, "link": "https://stackoverflow.com/questions/30569458/reading-utf8-files-with-fileslurp", "title": "Reading UTF8 files with File::Slurp", "body": "<p>I try to read an HTML file with the Perl module <a href=\"https://metacpan.org/pod/File::Slurp\" rel=\"nofollow\">File::Slurp</a>:</p>\n\n<pre><code>binmode STDOUT, ':utf8';\nmy $htmlcontent = read_file($file, {binmode =&gt; ':utf8'});\n</code></pre>\n\n<p>But when I print the <code>$htmlcontent</code> variable, some characters are not understood, due to French accents or special characters.</p>\n\n<p>For example : <code>\"Plus d'actualit\\u00e9s\"</code> should be <code>\"Plus d'actualit\u00e9s\"</code></p>\n\n<p>I also checked the encoding of the file and it's ok!</p>\n\n<pre><code>HTML document, UTF-8 Unicode text, with very long lines, with CRLF, LF line terminators\n</code></pre>\n\n<p>Is there a problem with this module?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["perl", "google-spreadsheet-api", "google-authentication", "google-oauth"], "comments": [{"owner": {"reputation": 3770, "user_id": 4731679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a9b39bb57049590b4ba59423630ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Doolittle", "link": "https://stackoverflow.com/users/4731679/edward-doolittle"}, "edited": false, "score": 1, "creation_date": 1433141187, "post_id": 30564833, "comment_id": 49205005, "body": "Are you pasting the code you got from your web browser exactly into your application?"}, {"owner": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "reply_to_user": {"reputation": 3770, "user_id": 4731679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a9b39bb57049590b4ba59423630ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Doolittle", "link": "https://stackoverflow.com/users/4731679/edward-doolittle"}, "edited": false, "score": 0, "creation_date": 1433192653, "post_id": 30564833, "comment_id": 49236266, "body": "Yes, the code starts with 4/ and ends with mwI. Total 77 characters."}, {"owner": {"reputation": 3770, "user_id": 4731679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66a9b39bb57049590b4ba59423630ef6?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Doolittle", "link": "https://stackoverflow.com/users/4731679/edward-doolittle"}, "edited": false, "score": 0, "creation_date": 1433218104, "post_id": 30564833, "comment_id": 49243716, "body": "Maybe Windows is interpreting the code before it gets copied to the <code>code</code> variable. Try pasting the code directly into your application, replacing the <code>$code = prompt(...)</code> line with <code>$code = &quot;... paste from browser...&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "edited": false, "score": 0, "creation_date": 1433203612, "post_id": 30583766, "comment_id": 49240223, "body": "I added # to the end of the code, but still having the same error.  Since I am getting to the Google page where it says &quot;Please copy this code, switch to your application and paste it there:&quot;, that means the client_id and client_secret should have been set correctly, right?  Is there any account setting that needs to be enabled beside the ones suggested in the solution page I referred to?"}, {"owner": {"reputation": 247, "user_id": 2574196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9wOZ.jpg?s=128&g=1", "display_name": "ELNJ", "link": "https://stackoverflow.com/users/2574196/elnj"}, "reply_to_user": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "edited": false, "score": 0, "creation_date": 1433205664, "post_id": 30583766, "comment_id": 49240729, "body": "Hmm, not sure.  Can you post more of your code?  (Blank out the client_id and client_secret of course.)  You could also try your code on the OAuth Playground at <a href=\"https://developers.google.com/oauthplayground/\" rel=\"nofollow noreferrer\">developers.google.com/oauthplayground</a> to see if you get a token there."}, {"owner": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "edited": false, "score": 0, "creation_date": 1433214405, "post_id": 30583766, "comment_id": 49242705, "body": "I put my code up above. I went to OAuth Playground, the Response:     HTTP/1.1 401 Unauthorized     Content-length: 74     X-xss-protection: 1; mode=block     X-content-type-options: nosniff     Expires: Tue, 02 Jun 2015 03:05:55 GMT     Vary: Origin,X-Origin     Server: GSE     Cache-control: private, max-age=0     Date: Tue, 02 Jun 2015 03:05:55 GMT     X-frame-options: SAMEORIGIN     Content-type: application/json; charset=UTF-8     Www-authenticate: Bearer realm=&quot;<a href=\"https://accounts.google.com/\" rel=\"nofollow noreferrer\">accounts.google.com</a>&quot;     {       &quot;error_description&quot;: &quot;Unauthorized&quot;,        &quot;error&quot;: &quot;unauthorized_client&quot;     }"}, {"owner": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "edited": false, "score": 0, "creation_date": 1433216555, "post_id": 30583766, "comment_id": 49243210, "body": "Scratch comment above, I was using the code from my script and trying to authorize OAuth Playground, of course it would say unauthorized client."}, {"owner": {"reputation": 247, "user_id": 2574196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9wOZ.jpg?s=128&g=1", "display_name": "ELNJ", "link": "https://stackoverflow.com/users/2574196/elnj"}, "reply_to_user": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "edited": false, "score": 0, "creation_date": 1433257595, "post_id": 30583766, "comment_id": 49268207, "body": "Looking at your code, the only difference from mine is that it required me to set <code>redirect_uri</code> as a parameter in the initial call to <code>Net::Google::DataAPI::Auth::OAuth2-&gt;new</code>.  But if you&#39;re getting a code back, you must be OK there.  I wonder if Edward Doolittle&#39;s comment above might be on the right track, that it&#39;s something about the <code>Term::Prompt</code> behavior in Windows that is messing things up.  Try having your script print the code back out after it reads it, and/or splitting your script in two (one to get the code, then the other in which you paste the code into your script hard-coded)."}, {"owner": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "edited": false, "score": 0, "creation_date": 1434173066, "post_id": 30583766, "comment_id": 49678249, "body": "Just an update, I still have not able to get this to work, but today the old way of connecting to Google Spreadsheet with username and password works again for some reason."}], "tags": [], "owner": {"reputation": 247, "user_id": 2574196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9wOZ.jpg?s=128&g=1", "display_name": "ELNJ", "link": "https://stackoverflow.com/users/2574196/elnj"}, "is_accepted": false, "score": 0, "last_activity_date": 1433194816, "creation_date": 1433194816, "answer_id": 30583766, "question_id": 30564833, "link": "https://stackoverflow.com/questions/30564833/netgoogledataapiauthoauth2-failed-oauth-call-access-token-received-erro/30583766#30583766", "title": "Net::Google::DataAPI::Auth::OAuth2 failed oauth call access token: received error: 400 Bad Request", "body": "<p>When I do this, I always get codes that start with 4/ and end with mwI#.  Maybe you're missing that last # character? </p>\n"}], "owner": {"reputation": 1, "user_id": 4959649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aeccd5d44ec46f1aa16ef50d306efb?s=128&d=identicon&r=PG&f=1", "display_name": "dkomo", "link": "https://stackoverflow.com/users/4959649/dkomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 560, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433214285, "creation_date": 1433125592, "last_edit_date": 1433214285, "question_id": 30564833, "link": "https://stackoverflow.com/questions/30564833/netgoogledataapiauthoauth2-failed-oauth-call-access-token-received-erro", "title": "Net::Google::DataAPI::Auth::OAuth2 failed oauth call access token: received error: 400 Bad Request", "body": "<p>I was following the solution in here: \n<a href=\"https://stackoverflow.com/questions/30476405/netgoogleauthsub-login-failed-with-new-google-drive-version/\">Net::Google::AuthSub login failed with new Google Drive version</a></p>\n\n<p>However, at this line:</p>\n\n<pre><code>my $token = $oauth2-&gt;get_access_token($code) or die;\n</code></pre>\n\n<p>I am getting error below:</p>\n\n<pre><code>failed oauth call access token: received error: 400 Bad Request\n{\n  \"error\" : \"invalid_request\"\n}\n</code></pre>\n\n<p>what could be the issue? Is it something in Net::Google::DataAPI::Auth::OAuth2 that I need to fix?\nI am using Strawberry Perl in windows.</p>\n\n<p>Edit: \nBelow is my code:</p>\n\n<pre><code>my $oauth2 = Net::Google::DataAPI::Auth::OAuth2-&gt;new(\n  client_id =&gt; 'XXXXXXX.apps.googleusercontent.com',\n  client_secret =&gt; 'XXXXXXXX',\n  scope =&gt; ['http://spreadsheets.google.com/feeds/'],\n);\n\nmy $url = $oauth2-&gt;authorize_url();\nprint \"OAuth URL, get code: $url\\n\";\nuse Term::Prompt;\nmy $code = prompt('x', 'paste the code: ', '', ''); \n\nmy $token = $oauth2-&gt;get_access_token($code) or die;\n</code></pre>\n"}, {"tags": ["perl", "pdf", "coordinates"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4959638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7bf6e1da379f15082f01ec804ab6193?s=128&d=identicon&r=PG&f=1", "display_name": "bernardo", "link": "https://stackoverflow.com/users/4959638/bernardo"}, "edited": false, "score": 0, "creation_date": 1438758422, "post_id": 31753791, "comment_id": 51574615, "body": "Thanks Chris, needed that push in the right direction. I created my own renderer and have overridden some functions from CAM::PDF::GS::NoText and am now getting the coordinates I need."}], "tags": [], "owner": {"reputation": 8537, "user_id": 14783, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7f7ebc731345d37a667c3242cf928703?s=128&d=identicon&r=PG", "display_name": "Chris Dolan", "link": "https://stackoverflow.com/users/14783/chris-dolan"}, "is_accepted": true, "score": 1, "last_activity_date": 1438370941, "creation_date": 1438370941, "answer_id": 31753791, "question_id": 30564218, "link": "https://stackoverflow.com/questions/30564218/is-there-a-way-in-perl-to-get-the-coordinates-of-a-path-from-a-pdf-in-the-same-c/31753791#31753791", "title": "Is there a way in Perl to get the coordinates of a Path from a PDF in the same coordinate system as the PDF text?", "body": "<p>I'm the author of CAM::PDF. Indeed, you're on the right track. Take a look at the implementation of <code>CAM::PDF::Renderer::Dump</code>, which is very simple. That class demonstrates how to capture the coordinates of a text command. Next, look at <code>CAM::PDF::GS::NoText</code> and see what other methods you can override in your own custom render class similar to <code>CAM::PDF::Renderer::Dump</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4959638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7bf6e1da379f15082f01ec804ab6193?s=128&d=identicon&r=PG&f=1", "display_name": "bernardo", "link": "https://stackoverflow.com/users/4959638/bernardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 31753791, "answer_count": 1, "score": 1, "last_activity_date": 1438370941, "creation_date": 1433119362, "last_edit_date": 1433120240, "question_id": 30564218, "link": "https://stackoverflow.com/questions/30564218/is-there-a-way-in-perl-to-get-the-coordinates-of-a-path-from-a-pdf-in-the-same-c", "title": "Is there a way in Perl to get the coordinates of a Path from a PDF in the same coordinate system as the PDF text?", "body": "<p>I have a PDF page that contains both paths and text. I need to find the coordinates of both the paths and the text in the same coordinate system. I can use <a href=\"https://metacpan.org/pod/CAM::PDF\" rel=\"nofollow\">CAM::PDF</a> to get the Text coordinates as per below:</p>\n\n<pre><code>use CAM::PDF;\nuse PDF::ToText;\n#open pdf file and look at pg1\nmy $pdf = CAM::PDF-&gt;new($pdfFileName);\nmy $contentTree = $pdf-&gt;getPageContentTree(1);\n$contentTree-&gt;render(\"PDF::ToText\");\n</code></pre>\n\n<p>I can't work out how to get the coordinates of the paths on the same PDF page. I can look at the PDF page contents and see the path coordinates but I think these need to be translated using the current transformation matrix, as I know that some specific text characters sit on the same location on the page as the path (like x marks the spot on a treasure map...) but there is no overlap in the coordinates that I can get (text and path are out by ~500 units). Is there a way to get the path coordinates using CAM::PDF (or some other some other Perl module?) in the same coordinate system (device space?) as the text?</p>\n"}, {"tags": ["perl", "mod-perl2"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1433108224, "post_id": 30562779, "comment_id": 49197112, "body": "<code>-f or warn &quot;please give me full path to $_&quot; for &#39;page_template.htm&#39;;</code>"}, {"owner": {"reputation": 1477, "user_id": 143613, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0efed282ec466413481639d354473990?s=128&d=identicon&r=PG", "display_name": "gnuchu", "link": "https://stackoverflow.com/users/143613/gnuchu"}, "edited": false, "score": 0, "creation_date": 1433170968, "post_id": 30562779, "comment_id": 49223788, "body": "Aswell as check full path check your server has the appropriate permisions."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3518089, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b517e2074c20600a58a02bbf7cdb2512?s=128&d=identicon&r=PG&f=1", "display_name": "user3518089", "link": "https://stackoverflow.com/users/3518089/user3518089"}, "edited": false, "score": 0, "creation_date": 1433254252, "post_id": 30563290, "comment_id": 49265509, "body": "I have not tested your solution yet &#39;cause before reading it i found on Apache docs what i could use ModPerl::PerlRunPrefork instead of ModPerl::PerlRun and it solved the problem. But i don&#39;t really know if it does have any disadvantage over your solution? I do use prefork anyway &#39;cause i don&#39;t know if all the modules i use are thread safe."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1433111292, "last_edit_date": 1433111292, "creation_date": 1433110534, "answer_id": 30563290, "question_id": 30562779, "link": "https://stackoverflow.com/questions/30562779/open-filehandle-not-working-under-mod-perl-modperlperlrun/30563290#30563290", "title": "Open filehandle not working under mod_perl ModPerl::PerlRun", "body": "<p><strong>Update</strong></p>\n\n<p>Note that <a href=\"https://metacpan.org/pod/distribution/mod_perl/docs/api/ModPerl/PerlRun.pod\" rel=\"nofollow\">the documentation for <code>ModPerl::PerlRun</code></a> has this to say</p>\n\n<blockquote>\n  <p>META: document that for now we don't chdir() into the script's dir, because it affects the whole process under threads.</p>\n</blockquote>\n\n<p>so it is probably not workable to simply do a <code>chdir</code> in your program's code, and the second option below should be used</p>\n\n<hr>\n\n<p><strong>Original*</strong></p>\n\n<p>The current working directory of your CGI program isn't what you think. It is most likely to tbe the root directory <code>/</code></p>\n\n<p>You can either use <code>chdir</code> to set the working directory of the script</p>\n\n<pre><code>use File::Basename 'dirname';\nchdir dirname(__FILE__);\n</code></pre>\n\n<p>or simply add the full path to the name of the file that you want to open, for instance</p>\n\n<pre><code>open my $fh, '&lt;:encoding(UTF-8)', '/perl/page_template.htm' or die $!;\n</code></pre>\n\n<p>Note that you can't use <code>FindBin</code>, as your program is being run as a subroutine of Apache's main mod_perl process, so <code>$FindBin::Bin</code> will be equal to the directory of the Apache executable <code>httpd</code> and not of your own program file</p>\n"}], "owner": {"reputation": 47, "user_id": 3518089, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b517e2074c20600a58a02bbf7cdb2512?s=128&d=identicon&r=PG&f=1", "display_name": "user3518089", "link": "https://stackoverflow.com/users/3518089/user3518089"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433111292, "creation_date": 1433106914, "last_edit_date": 1433111058, "question_id": 30562779, "link": "https://stackoverflow.com/questions/30562779/open-filehandle-not-working-under-mod-perl-modperlperlrun", "title": "Open filehandle not working under mod_perl ModPerl::PerlRun", "body": "<p>I'm at my first attempt to use mod_perl. I'm totally new to it. I opted for <a href=\"https://metacpan.org/pod/distribution/mod_perl/docs/api/ModPerl/PerlRun.pod\" rel=\"nofollow\"><code>ModPerl::PerlRun</code></a> because I don't want to make any modification to the scripts I already have</p>\n\n<p>I followed the instructions in <a href=\"http://41j.com/blog/2012/09/installing-apache2modperl-on-ubuntu-12-04/\" rel=\"nofollow\"><strong><em>Installing Apache2/Modperl on Ubuntu 12.04</em></strong></a></p>\n\n<p>I uploaded <code>script.pl</code> to <code>/perl</code>, and the script <em>looks like</em> it's running fine except for this</p>\n\n<pre><code>open(my $fh, '&lt;:encoding(UTF-8)', 'page_template.htm') or die $!;\n</code></pre>\n\n<p>It won't open the file and dies with the message</p>\n\n<pre><code>No such file or directory at /var/www/perl/script.pl\n</code></pre>\n"}, {"tags": ["python", "perl"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1433094745, "post_id": 30560647, "comment_id": 49192750, "body": "I think you&#39;d use <code>re.search</code>"}], "answers": [{"comments": [{"owner": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "edited": false, "score": 1, "creation_date": 1433095642, "post_id": 30560692, "comment_id": 49193037, "body": "Thanks. How is this supporting Python philosophy that &quot;Only one obvious way to do it&quot;.  Can <code>re.match</code> be replaced with <code>re.search(r&#39;^...&#39;)</code> ?"}], "tags": [], "owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "is_accepted": true, "score": 3, "last_activity_date": 1433094892, "creation_date": 1433094892, "answer_id": 30560692, "question_id": 30560647, "link": "https://stackoverflow.com/questions/30560647/python-regex-equivalent-for-perl/30560692#30560692", "title": "Python regex equivalent for perl", "body": "<p>You need to use <a href=\"https://docs.python.org/2.7/library/re.html#re.search\" rel=\"nofollow\"><code>re.search</code></a>, not <a href=\"https://docs.python.org/2.7/library/re.html#re.match\" rel=\"nofollow\"><code>re.match</code></a>.  <code>re.match</code> only matches as the beginning of the string, while <code>re.search</code> matches anywhere, like in Perl.</p>\n"}, {"tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": false, "score": 2, "last_activity_date": 1433094995, "last_edit_date": 1592644375, "creation_date": 1433094995, "answer_id": 30560708, "question_id": 30560647, "link": "https://stackoverflow.com/questions/30560647/python-regex-equivalent-for-perl/30560708#30560708", "title": "Python regex equivalent for perl", "body": "<p>See <a href=\"https://docs.python.org/3/library/re.html#re.search\" rel=\"nofollow noreferrer\">re \u2014 Regular expression operations</a> for an explanation</p>\n<blockquote>\n<p>re.match(pattern, string, flags=0)</p>\n<p>If zero or more characters at the <strong>beginning of string</strong> match the regular expression pattern, return a corresponding match object. Return None if the string does not match the pattern; note that this is different from a zero-length match.</p>\n<p>Note that even in MULTILINE mode, re.match() will only match <strong>at the beginning</strong> of the string and not at the beginning of each line.</p>\n<p>If you want to locate a match <strong>anywhere in string, use search() instead</strong> (see also search() vs. match()).</p>\n</blockquote>\n"}], "owner": {"reputation": 18319, "user_id": 472485, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eaad078400b012b1e37fa6f11dd5c089?s=128&d=identicon&r=PG", "display_name": "Jean", "link": "https://stackoverflow.com/users/472485/jean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 30560692, "answer_count": 2, "score": 2, "last_activity_date": 1433094995, "creation_date": 1433094635, "question_id": 30560647, "link": "https://stackoverflow.com/questions/30560647/python-regex-equivalent-for-perl", "title": "Python regex equivalent for perl", "body": "<p>what is the equivalent of following Perl condition in Python </p>\n\n<pre><code>if($line=~/DramBase/)\n</code></pre>\n\n<p>I tried the following but it didn't match(the line at the bottom)</p>\n\n<pre><code>if(re.match( r'DramBase', line)):\n</code></pre>\n\n<p>I had to change it to </p>\n\n<pre><code>if(re.match( r'.*DramBase', line)):\n</code></pre>\n\n<p>to match this line</p>\n\n<pre><code># -DF0.CCM0.DramBaseAddress1 0x00004001\n</code></pre>\n\n<p>Is there a flag to match it anywhere on the line without explicitly matching starting characters ?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": true, "score": 8, "last_activity_date": 1433093101, "creation_date": 1433093101, "answer_id": 30560358, "question_id": 30560315, "link": "https://stackoverflow.com/questions/30560315/why-does-my-first-hash-value-disappear-in-perl/30560358#30560358", "title": "Why does my first hash value disappear in Perl?", "body": "<p>Perl hash can only have unique keys, so </p>\n\n<pre><code>$wordcount{2} = \"apple\";\n</code></pre>\n\n<p>is later overwritten by </p>\n\n<pre><code>$wordcount{2} = \"cake\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 5, "last_activity_date": 1433187907, "last_edit_date": 1433187907, "creation_date": 1433093948, "answer_id": 30560537, "question_id": 30560315, "link": "https://stackoverflow.com/questions/30560315/why-does-my-first-hash-value-disappear-in-perl/30560537#30560537", "title": "Why does my first hash value disappear in Perl?", "body": "<p>What you probably wanted to do was:</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Data::Dumper;\n\nmy @array = (\"apple:2\", \"pie:4\", \"cake:2\");\nmy %wordcount;\nfor my $entry (@array) {\n    my ($word, $num) = split /:/, $entry;\n    push @{$wordcount{$num}}, $word;\n}\n\nprint Dumper (\\%wordcount);\n</code></pre>\n\n<p>This way, each entry in <code>%wordcount</code> relates a word count to an array of the words which appear that many times (assuming the <code>:n</code> in the notation indicates the count).</p>\n\n<p>It is OK to be a beginner, but it is not OK to assume other people can read your mind.</p>\n\n<p>Also, don't use global variables (<code>our</code>) when lexically scoped (<code>my</code>) will do.</p>\n"}], "owner": {"reputation": 41, "user_id": 4958998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2537c40f8ea0f5eee637248e1ef4d18a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.red", "link": "https://stackoverflow.com/users/4958998/mr-red"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 30560358, "answer_count": 2, "score": 3, "last_activity_date": 1433187907, "creation_date": 1433092908, "last_edit_date": 1433094355, "question_id": 30560315, "link": "https://stackoverflow.com/questions/30560315/why-does-my-first-hash-value-disappear-in-perl", "title": "Why does my first hash value disappear in Perl?", "body": "<p>Why does the hash remove the first value <code>apple:2</code> when I print the output?</p>\n\n<pre><code>use warnings;\nuse strict;\nuse Data::Dumper;\n\nmy @array = (\"apple:2\", \"pie:4\", \"cake:2\");\nmy %wordcount;\nour $curword;\nour $curnum;\nforeach (@array) {\n    ($curword, $curnum) = split(\":\",$_);\n    $wordcount{$curnum}=$curword;\n}\nprint Dumper (\\%wordcount);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1433072639, "post_id": 30556974, "comment_id": 49185621, "body": "you have to hardcode the order - how else would you decode the date??"}, {"owner": {"reputation": 1031, "user_id": 1516403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166ca8fb4b381fce571744421c9efbfa?s=128&d=identicon&r=PG", "display_name": "Odhran Roche", "link": "https://stackoverflow.com/users/1516403/odhran-roche"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1433073287, "post_id": 30556974, "comment_id": 49185866, "body": "I was thinking of linking the regex with an ordering string like &quot;YYYYMMDDHHMMSS&quot; but then you&#39;d need to parse that to rearrange the variables. You think the best option is to hardcode in the order for each? I&#39;m trying to keep it simple for others to add new date formats."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1433074052, "post_id": 30556974, "comment_id": 49186101, "body": "Yes, you could do that - but then one character per variable is enough...  You could also add it directly to the regex, that is, <code>&#39;^(YYYY)-(MM)-(DD) (HH):(mm):(SS)&#39;</code> (notice the distinction between M and m), and from that both fetch the order, and generate the regex."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1433090490, "post_id": 30556974, "comment_id": 49191208, "body": "&quot;I don&#39;t want to hardcode in the ordering for each type of date&quot; You have to. How could a program accurately guess that <code>11,01</code> represents January 11 and not November 1? That&#39;s not a standard date format."}], "answers": [{"tags": [], "owner": {"reputation": 5735, "user_id": 302283, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/07c83c182922a5e077f60102959be811?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/302283/alex"}, "is_accepted": false, "score": 2, "last_activity_date": 1433074809, "last_edit_date": 1433074809, "creation_date": 1433074754, "answer_id": 30557327, "question_id": 30556974, "link": "https://stackoverflow.com/questions/30556974/generic-way-to-parse-different-date-formats/30557327#30557327", "title": "Generic way to parse different date formats", "body": "<p>You can solve you immediate problem with named capture groups:</p>\n\n<pre><code>if ( $str =~ /(?&lt;year&gt;\\d\\d\\d\\d)-(?&lt;month&gt;\\d\\d)-(?&lt;day&gt;\\d\\d)/ ) {\n  $year = $+{year};\n  $month = $+{month};\n  $day = $+{day};\n}\n</code></pre>\n\n<p>Your more general problem is best addressed with the various DateTime::Format modules from cpan.</p>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1433091368, "creation_date": 1433091368, "answer_id": 30560047, "question_id": 30556974, "link": "https://stackoverflow.com/questions/30556974/generic-way-to-parse-different-date-formats/30560047#30560047", "title": "Generic way to parse different date formats", "body": "<p>You can use core <a href=\"http://perldoc.perl.org/Time/Piece.html\" rel=\"nofollow\"><code>Time::Piece</code></a> module to parse dates,</p>\n\n<pre><code>use Time::Piece;\n\nmy @arr = (\n  Time::Piece-&gt;strptime(Time::Piece-&gt;new-&gt;year .\"01,02 13:24:01\", \"%Y%d,%m %H:%M:%S\"),\n  Time::Piece-&gt;strptime(\"2015-02-01 13:24:01\", \"%Y-%m-%d %H:%M:%S\"),\n);\n\nfor my $t (@arr) {\n  my ($year, $day, $month, $hour, $minute, $second) = \n    ($t-&gt;year, $t-&gt;mday, $t-&gt;mon, $t-&gt;hour, $t-&gt;min, $t-&gt;sec);\n\n  print \"$year, $day, $month, $hour, $minute, $second\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1031, "user_id": 1516403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/166ca8fb4b381fce571744421c9efbfa?s=128&d=identicon&r=PG", "display_name": "Odhran Roche", "link": "https://stackoverflow.com/users/1516403/odhran-roche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1433135781, "creation_date": 1433072431, "last_edit_date": 1433094269, "question_id": 30556974, "link": "https://stackoverflow.com/questions/30556974/generic-way-to-parse-different-date-formats", "title": "Generic way to parse different date formats", "body": "<p>I have several different date formats to parse, for example:</p>\n\n<pre><code>$date1 = '^(\\d\\d),(\\d\\d) (\\d\\d):(\\d\\d):(\\d\\d)'; # DD,MM HH:MM:SS\n$date2 = '^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d) (\\d\\d):(\\d\\d):(\\d\\d)'; # YYYY-MM-DD HH:MM:SS\n</code></pre>\n\n<p>I want to be left with the variables</p>\n\n<pre><code>($year, $day, $month, $hour, $minute, $second)\n</code></pre>\n\n<p>to be populated correctly. I can capture the first date format in Perl with a pattern like:</p>\n\n<pre><code>($day, $month, $hour, $minute, $second) = $log_line =~ /$date1/;\n$year = current_year; # guess as date format has no year value\n</code></pre>\n\n<p>But to capture the second date, I would need to rearrange the order of the variables. I don't want to hardcode in the ordering for each type of date, but I know the info has to be contained somewhere.</p>\n\n<p>I want this program to be scalable and maintainable; is there a simple solution for my program to adapt to the different formats?</p>\n\n<p>EDIT: I realise the ordering has to be stored somewhere, I'm looking for the most concise option for doing this.</p>\n"}, {"tags": ["java", "perl", "base64"], "comments": [{"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1433061297, "post_id": 30555407, "comment_id": 49182701, "body": "Where is your perl code. Please provide your code while asking."}, {"owner": {"reputation": 963, "user_id": 3884173, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quIn8.jpg?s=128&g=1", "display_name": "prashanth-g", "link": "https://stackoverflow.com/users/3884173/prashanth-g"}, "reply_to_user": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1433061367, "post_id": 30555407, "comment_id": 49182723, "body": "@shivams added perl code"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1433061588, "post_id": 30555407, "comment_id": 49182782, "body": "Did you try to test this with any other string. Is this same issue for almost every string?"}, {"owner": {"reputation": 963, "user_id": 3884173, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quIn8.jpg?s=128&g=1", "display_name": "prashanth-g", "link": "https://stackoverflow.com/users/3884173/prashanth-g"}, "reply_to_user": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "edited": false, "score": 0, "creation_date": 1433061686, "post_id": 30555407, "comment_id": 49182808, "body": "@shivams Actually i am converting files into base64 string. I have tried with pdf, doc, rtf, txt files. All of them varies in perl and java base64 encode.."}], "answers": [{"comments": [{"owner": {"reputation": 963, "user_id": 3884173, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quIn8.jpg?s=128&g=1", "display_name": "prashanth-g", "link": "https://stackoverflow.com/users/3884173/prashanth-g"}, "edited": false, "score": 0, "creation_date": 1433064263, "post_id": 30555541, "comment_id": 49183402, "body": "got it. <a href=\"http://search.cpan.org/~kazuho/MIME-Base64-URLSafe-0.01/lib/MIME/Base64/URLSafe.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~kazuho/MIME-Base64-URLSafe-0.01/lib/MIME/&hellip;</a>"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 963, "user_id": 3884173, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quIn8.jpg?s=128&g=1", "display_name": "prashanth-g", "link": "https://stackoverflow.com/users/3884173/prashanth-g"}, "edited": false, "score": 0, "creation_date": 1433064323, "post_id": 30555541, "comment_id": 49183420, "body": "@Prashanth good for you. Also i get to learn something new. :)"}], "tags": [], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "is_accepted": false, "score": 0, "last_activity_date": 1433062214, "creation_date": 1433062214, "answer_id": 30555541, "question_id": 30555407, "link": "https://stackoverflow.com/questions/30555407/base64-encoded-string-differs-in-perl-and-java/30555541#30555541", "title": "Base64 encoded string differs in perl and Java", "body": "<p>I am quoting wikipedia here <code>The particular set of 64 characters chosen to represent the 64 place-values for the base varies between implementations.</code> </p>\n\n<p>This might be the reason for you to have different output with change in language. There are various implementations of base64 present out there and using various implementations might provide you different results. </p>\n\n<p>My best suggestion is to stick to one kind of implementation. If you have to work with various languages then it is best to find compatible modules/libraries in both languages that use same implementation of base64. It might be good for you to have a look <a href=\"http://en.wikipedia.org/wiki/Base64\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "is_accepted": true, "score": 1, "last_activity_date": 1433062631, "creation_date": 1433062631, "answer_id": 30555602, "question_id": 30555407, "link": "https://stackoverflow.com/questions/30555407/base64-encoded-string-differs-in-perl-and-java/30555602#30555602", "title": "Base64 encoded string differs in perl and Java", "body": "<p>The Java code is giving you URL-safe base64, i.e the output can be used in URLs. The Perl version is not. You can blindly replace the characters with the other values.</p>\n"}], "owner": {"reputation": 963, "user_id": 3884173, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quIn8.jpg?s=128&g=1", "display_name": "prashanth-g", "link": "https://stackoverflow.com/users/3884173/prashanth-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 500, "favorite_count": 0, "accepted_answer_id": 30555602, "answer_count": 2, "score": 2, "last_activity_date": 1433100801, "creation_date": 1433061198, "last_edit_date": 1433100801, "question_id": 30555407, "link": "https://stackoverflow.com/questions/30555407/base64-encoded-string-differs-in-perl-and-java", "title": "Base64 encoded string differs in perl and Java", "body": "<p>when i encode a pdf file into base64 binary(using commons lib) in java , I got string(sample) like  \"SGVsbG8gV_29y-bGQ=\"</p>\n\n<p>But if i encode the same file using perl , I got like \"SGVsbG8gV/29y+bGQ=\"</p>\n\n<p>Difference in string: / instead of _ , + instead of -</p>\n\n<p><strong>Why i am getting like this? Or, Is there any way to fix without string replace ?</strong></p>\n\n<p>in java </p>\n\n<pre><code>byte[] data;\n        try (java.io.FileInputStream fin = new java.io.FileInputStream(new java.io.File(\"file.pdf\"))) {\n            data = new byte[fin.available()];\n            fin.read(data);\n        }\n        return data;\nSystem.out.println(\"ecncoded value is \" + DatatypeConverter.printBase64Binary(data));\n</code></pre>\n\n<p>In Perl</p>\n\n<pre><code>use MIME::Base64;\n\nopen (PDF, \"file.pdf\") or die \"$!\";\n\n$raw_string = do{ local $/ = undef; &lt;PDF&gt;; };\n$encoded = encode_base64( $raw_string );\n\nprint \" \\n\";\nprint \" $encoded \";\n</code></pre>\n\n<p>// Java </p>\n\n<p><img src=\"https://i.stack.imgur.com/Ozpv9.png\" alt=\"enter image description here\"></p>\n\n<p>// Perl</p>\n\n<p><img src=\"https://i.stack.imgur.com/4InRQ.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["perl", "ssl", "paypal", "lwp", "lwp-useragent"], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 2744953, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/277529f3d005ce1516f2127f415ff562?s=128&d=identicon&r=PG&f=1", "display_name": "Bintz", "link": "https://stackoverflow.com/users/2744953/bintz"}, "edited": false, "score": 0, "creation_date": 1433058103, "post_id": 30554531, "comment_id": 49181969, "body": "Ok, so the following actions on my part solved the problem: as CPAN doesn&#39;t include a way to roll back modules (in this case Mozilla::CA), I downloaded the older CA bundle manually and copied it into the Mozilla::CA directory (<code>&#47;usr&#47;local&#47;share&#47;perl5&#47;Mozilla&#47;CA</code>), replacing the <code>cacert.pem</code> file.  I <i>thought</i> that LWP used Mozilla::CA for its certificates only if <code>use Mozilla::CA</code> was specified, and default behavior was to use the server&#39;s CA bundle, but I guess this is not the case?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 605, "user_id": 2744953, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/277529f3d005ce1516f2127f415ff562?s=128&d=identicon&r=PG&f=1", "display_name": "Bintz", "link": "https://stackoverflow.com/users/2744953/bintz"}, "edited": false, "score": 1, "creation_date": 1433070369, "post_id": 30554531, "comment_id": 49184980, "body": "The CPAN distribution of LWP::Protocol::https uses currently Mozilla::CA as the set of trusted CA&#39;s. Debian/Ubuntu patched it to use the system CA&#39;s instead. What the servers sends will of course be used too, but only for leaf and intermediate certificates and of course not for the trusted root which must be local."}, {"owner": {"reputation": 605, "user_id": 2744953, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/277529f3d005ce1516f2127f415ff562?s=128&d=identicon&r=PG&f=1", "display_name": "Bintz", "link": "https://stackoverflow.com/users/2744953/bintz"}, "edited": false, "score": 0, "creation_date": 1433104732, "post_id": 30554531, "comment_id": 49196094, "body": "Thank you for the explanation. All is now clear to me!"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 7, "last_activity_date": 1433054166, "last_edit_date": 1495542606, "creation_date": 1433053630, "answer_id": 30554531, "question_id": 30554222, "link": "https://stackoverflow.com/questions/30554222/perl-lwp-certificate-verify-failed-with-paypal-com/30554531#30554531", "title": "Perl, LWP &quot;certificate verify failed&quot; with paypal.com", "body": "<blockquote>\n  <p>Mozilla::CA 20141217 (note: I've tried the script both using Mozilla::CA and without it... results have been the same)</p>\n</blockquote>\n\n<p>In short:\nI don't know what \"without it\" means for RHEL6 but please try again with Mozilla::CA 20130114 or with the \"older ca-bundle\" linked from <a href=\"http://curl.haxx.se/docs/caextract.html\" rel=\"nofollow noreferrer\">http://curl.haxx.se/docs/caextract.html</a>.</p>\n\n<p>Details:\nThe certificate chain you get from www.paypal.com </p>\n\n<pre><code>[0] www.paypal.com\n[1] Symantec Class 3 EV SSL CA - G2\n[2] VeriSign Class 3 Public Primary Certification Authority - G5\n</code></pre>\n\n<p>The last certificate in the chain is signed by the 1024 certificate</p>\n\n<pre><code>/C=US/O=VeriSign, Inc./OU=Class 3 Public Primary Certification Authority\n</code></pre>\n\n<p>Since 1024 bit certificates where removed by Mozilla end of last year you will not find them in the current Mozilla::CA any longer. But browsers don't need the old certificate because the create the trust chain based on certificates [0] and [1] already because they use a built-in certificate instead of the certificate [2] send by the server.</p>\n\n<p>While this newer built-in certificate is also included in Mozilla::CA it will not be used because of a long-standing bug in how OpenSSL validates certificates: it will always try to validate the longest chain and not check if a shorter chain is possible.</p>\n\n<p>For more details about this problem see</p>\n\n<ul>\n<li><a href=\"http://rt.openssl.org/Ticket/Display.html?id=2732&amp;user=guest&amp;pass\" rel=\"nofollow noreferrer\">the original bug report against OpenSSL</a> from 2012</li>\n<li>a more recent description of the problem, which not only affects Perl but also python, ruby, curl, wget... - i.e. everything which uses OpenSSL:  <a href=\"https://stackoverflow.com/a/27826829/3081018\">https://stackoverflow.com/a/27826829/3081018</a></li>\n</ul>\n\n<p>The problem can be resolved by using the flag X509_V_FLAG_TRUSTED_FIRST which was introduced with OpenSSL 1.02 (released 4 month ago and probably not in RHEL yet) or by using an even newer and not yet released version of OpenSSL where they finally fixed the problem (see <a href=\"https://rt.openssl.org/Ticket/Display.html?id=3637&amp;user=guest&amp;pass=guest\" rel=\"nofollow noreferrer\">https://rt.openssl.org/Ticket/Display.html?id=3637&amp;user=guest&amp;pass=guest</a>). </p>\n\n<p>The problem can be worked around by having the older 1024 bit CA certificates still available, i.e either using an older Mozilla::CA or CA bundle or using the system CA store which usually includes these older CA. See also:</p>\n\n<ul>\n<li>A <a href=\"https://rt.cpan.org/Ticket/Display.html?ShowHeaders=1&amp;id=104759\" rel=\"nofollow noreferrer\">current bug report</a> against IO::Socket::SSL to use the X509_V_FLAG_TRUSTED_FIRST by default (if available). This flag gets set with 2.016 (not yet released) but needs a version of Net::SSLeay which exports this flag (not yet released) and OpenSSL 1.02 (not included in RHEL).</li>\n<li>A <a href=\"https://github.com/libwww-perl/lwp-protocol-https/pull/15\" rel=\"nofollow noreferrer\">pull request against LWP</a>  to use the default CA on the system instead of Mozilla::CA. This would probably save the problem for you too. Note that Debian/Ubuntu have a similar patch included. I don't know about the version of LWP shipped with RHEL.</li>\n</ul>\n"}], "owner": {"reputation": 605, "user_id": 2744953, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/277529f3d005ce1516f2127f415ff562?s=128&d=identicon&r=PG&f=1", "display_name": "Bintz", "link": "https://stackoverflow.com/users/2744953/bintz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1956, "favorite_count": 0, "accepted_answer_id": 30554531, "answer_count": 1, "score": 2, "last_activity_date": 1433054166, "creation_date": 1433050524, "question_id": 30554222, "link": "https://stackoverflow.com/questions/30554222/perl-lwp-certificate-verify-failed-with-paypal-com", "title": "Perl, LWP &quot;certificate verify failed&quot; with paypal.com", "body": "<p>Not 100% sure this is a Perl issue, but it seems to be. I have an IPN script that connects with PayPal to verify transactions. It was working fine until yesterday, when I installed LWP::Protocol::https. Since then, it's been failing with the error:</p>\n\n<pre><code>Can't connect to www.paypal.com:443 (certificate verify failed)\n\nLWP::Protocol::https::Socket: SSL connect attempt failed error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed at /usr/local/share/perl5/LWP/Protocol/http.pm line 47.\n</code></pre>\n\n<p>Running <code>GET https://www.paypal.com</code> from bash (which uses LWP) yields the same error message. OTOH, running <code>GET https://www.gmail.com</code> is successful. Running <code>openssl s_client -host paypal.com -port 443</code> returns (among other things) <code>Verify return code: 0 (ok)</code>. <code>curl \"https://www.paypal.com/cgi-bin/webscr?cmd=_notify-validate\"</code> successfully receives a response from PayPal. So it does seem to be Perl-specific.</p>\n\n<p>Module versions:</p>\n\n<pre><code>LWP 6.13\nLWP::Protocol::https 6.06\nIO::Socket::SSL 2.015\nMozilla::CA 20141217 (note: I've tried the script both using Mozilla::CA and without it... results have been the same)\n</code></pre>\n\n<p>Please let me know if there are other relevant modules. Perl version is 5.10.1. Server OS is RHEL 6.</p>\n"}, {"tags": ["performance", "perl", "object"], "comments": [{"owner": {"reputation": 2493, "user_id": 4866989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ea9d94abae12663ba3ad2564619081?s=128&d=identicon&r=PG&f=1", "display_name": "Tim3880", "link": "https://stackoverflow.com/users/4866989/tim3880"}, "edited": false, "score": 1, "creation_date": 1433043939, "post_id": 30553574, "comment_id": 49179488, "body": "did you check the performance without creating the $obj (or even %inputHash) ? the performance problem seems related to hashing."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 2, "creation_date": 1433048689, "post_id": 30553574, "comment_id": 49180169, "body": "If performance is a problem, then you should convert your <code>my $obj = Model::Object-&gt;new(%inputHash);</code> line to <code>my $obj = \\%inputHash</code>, just for the purpose of testing.  Benchmark again.  If the change makes nearly no difference, then <code>Model::Object</code> is not your problem.  if it makes a big difference, then it may well be."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1433049046, "post_id": 30553574, "comment_id": 49180235, "body": "Performance tuning is easier to do if you have some idea of what the best possible outcome could be before starting down a rabbit hole.  For all we know the real problem could be the code you&#39;ve passed over with <code>...</code>."}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1433050783, "post_id": 30553574, "comment_id": 49180527, "body": "@DavidO: While I generally agree with you that no code should be left out, in this case, the surroundings strongly suggest that its just 13 assignments into the <code>$inputHash</code>. Also, profiling is a much better way to find the slow line instead of &quot;shotgun profiling&quot;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433086123, "post_id": 30553574, "comment_id": 49189778, "body": "What is the structure inside <code>Model::Object</code>? Can you not simply say <code>$objects{$input_hash{col1}} = bless \\%input_hash, &#39;Model::Object&#39;</code> instead of invoking the constructor? And do you always want the data corresponding to the <i>last</i> value of <code>col1</code>? If the <i>first</i> one will do then you can save a lot of work building <code>%input_hash</code> when it is only going to be thrown away. You could also iterate backwards over <code>$result_set</code> to pick up the last values in the list"}, {"owner": {"reputation": 89, "user_id": 1341647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea471bd6bcd23fc8ca779d8a93eb87d1?s=128&d=identicon&r=PG", "display_name": "limeri", "link": "https://stackoverflow.com/users/1341647/limeri"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433158544, "post_id": 30553574, "comment_id": 49214925, "body": "Thank you all for the excellent suggestions!  I will try several of these, though it may take me a couple days.  I need to gain familiarity with the profiler and I have a couple other things to do in my job.  I will post back as soon as I can with what I discover. @borodin:  I gave a short desc of Model::Object.  It&#39;s mostly properties, but has a serialize method we need.  It needs the constructor."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433186727, "post_id": 30553574, "comment_id": 49233019, "body": "@limeri: Are you sure? I can&#39;t imagine that the contents of your object are very much different from what is in <code>%input_hash</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1433085531, "post_id": 30554212, "comment_id": 49189566, "body": "<b><i>...in the worst case as <code>my %options = @_;</code>. With that move, you recompute the hash for every key</i></b> very good point"}, {"owner": {"reputation": 89, "user_id": 1341647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea471bd6bcd23fc8ca779d8a93eb87d1?s=128&d=identicon&r=PG", "display_name": "limeri", "link": "https://stackoverflow.com/users/1341647/limeri"}, "edited": false, "score": 1, "creation_date": 1433277907, "post_id": 30554212, "comment_id": 49280428, "body": "Thank you all for the advice, especially about Devel::NYTPRof!  I&#39;ve been playing some with it and have found some interesting results.  We use Params::Validate in all of our classes and it is being called an extraordinary number of times and taking up the most time.  So I&#39;m investigating what in my logic is doing that.  I do have one question, the NYTProf returned a message for one module that said, &quot;variables that impact regex performance for whole application seen here&quot;.  I was trying to figure out what it meant, but Google wasn&#39;t very helpful.  Any ideas about that?"}, {"owner": {"reputation": 89, "user_id": 1341647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea471bd6bcd23fc8ca779d8a93eb87d1?s=128&d=identicon&r=PG", "display_name": "limeri", "link": "https://stackoverflow.com/users/1341647/limeri"}, "edited": false, "score": 0, "creation_date": 1433278244, "post_id": 30554212, "comment_id": 49280585, "body": "I found the answer to my question about the variables that impact regex performance.  Thanks!"}, {"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1433310856, "post_id": 30554212, "comment_id": 49290479, "body": "Just for future references: you probably use <code>$`</code>, $&amp; or <code>$&#39;</code> somewhere usage of these have a bad preformance impact on all regex matches. It&#39;s better to use the <code>p</code> flag and its corresponding variables."}], "tags": [], "owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "is_accepted": false, "score": 5, "last_activity_date": 1433076502, "last_edit_date": 1433076502, "creation_date": 1433050470, "answer_id": 30554212, "question_id": 30553574, "link": "https://stackoverflow.com/questions/30553574/perl-creates-objects-very-slowly/30554212#30554212", "title": "Perl creates objects very slowly", "body": "<p>First of all: <strong>Profile your program!</strong> You already have narrowed it down to one sub, with <a href=\"https://metacpan.org/pod/Devel::NYTProf\" rel=\"nofollow\"><code>Devel::NYTProf</code></a> (for example) you can narrow it down to the line that is the culprit.</p>\n\n<p>Here are some general considerations from my side:</p>\n\n<p>Just from glancing over it, some probable slowing factors immediately spring to mind, but you can't be sure if you don't <strong>profile your program</strong>:</p>\n\n<p>Mayhe hashing-allocation takes too long. As your <code>%objects</code> hash grows, perl will steadily allocate more memory.\nYou could pre-set the size of your <code>$objects</code> hash. This feature is <a href=\"https://metacpan.org/pod/distribution/perl/pod/perldata.pod#Scalar-values\" rel=\"nofollow\">documented here</a>. Since this is a memory allocation problem, you wouldn't recognize this, if you <strong>profile</strong> with a too small data set.</p>\n\n<pre><code># somewhere outside of the loop\nkeys(%objects) = $number_of_rows * 1.2;\n# the hash should be a little bigger than the objects to be stored in it\n</code></pre>\n\n<p>Secondly, it could be that the object-creation takes too long. Take a look at <code>Model::Object</code>. I don't know what's in there so I can't make a comment about that. But most certainly you should consider passing the <code>%inputHash</code> as a reference. With <code>Model::Object-&gt;new(%inputHash);</code>, You put the keys and values on the stack, and then retrieve it, in the worst case as <code>my %options = @_;</code>. With that move, you recompute the hash for every key.</p>\n\n<p>Maybe you can come up with a way to get rid of the small <code>$inputHash</code> completely. I quickly only can come up with some ways, that would be based on <code>defined</code>nes, but you are checking for truthyness (are you sure that's right, btw? <code>\"0\"</code> is false, for example).</p>\n\n<p>But again, most importantly: <strong>Profile your program.</strong> Maybe take a smaller data set, but you wouldn't be able to see the memory allocation problems as clearly then. But with <strong>profiling</strong> you will exactly see, at which point your program takes the most time.</p>\n\n<p><a href=\"http://perldoc.perl.org/perlperf.html\" rel=\"nofollow\"><code>The perldoc</code> has something to say about speeding up your program</a>. It has a nice chapter about <strong>profiling</strong>, too.</p>\n"}, {"comments": [{"owner": {"reputation": 2750, "user_id": 801553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/74c6e34ee0ad953bb3079f5bb5cd9497?s=128&d=identicon&r=PG", "display_name": "Patrick J. S.", "link": "https://stackoverflow.com/users/801553/patrick-j-s"}, "edited": false, "score": 0, "creation_date": 1433096920, "post_id": 30559350, "comment_id": 49193474, "body": "Small notice: You also could <code>use constant COLUMN_NAMES =&gt; qw&#47;\u2026&#47;</code> and access it with <code>$input_hash{(COLNAMES)[$i]} = $v;</code>. scrapes off a few milliseconds and reduces complexity. But I rarely use constants maybe there is something with that usage that I don&#39;t know about."}, {"owner": {"reputation": 89, "user_id": 1341647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea471bd6bcd23fc8ca779d8a93eb87d1?s=128&d=identicon&r=PG", "display_name": "limeri", "link": "https://stackoverflow.com/users/1341647/limeri"}, "edited": false, "score": 0, "creation_date": 1433158974, "post_id": 30559350, "comment_id": 49215190, "body": "Thank you for the extra hint.  In the real code, the column names are constants.  This code is a simplified and condensed version of the real code to make it to readable out of context.  In real life, I&#39;d never use &quot;col1&quot; for an identifier."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 89, "user_id": 1341647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea471bd6bcd23fc8ca779d8a93eb87d1?s=128&d=identicon&r=PG", "display_name": "limeri", "link": "https://stackoverflow.com/users/1341647/limeri"}, "edited": false, "score": 0, "creation_date": 1433186951, "post_id": 30559350, "comment_id": 49233149, "body": "@limeri: I guessed that. That&#39;s why I added the <code>COLUMN_NAMES</code> constant instead of auto-generating the column names. My code uses <code>COLUMN_NAMES-&gt;[$i]</code> instead of <code>&#39;col&#39;.($i+1)</code>. Remember that you shouldn&#39;t name variables according to the database column names either"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1433087308, "creation_date": 1433087308, "answer_id": 30559350, "question_id": 30553574, "link": "https://stackoverflow.com/questions/30553574/perl-creates-objects-very-slowly/30559350#30559350", "title": "Perl creates objects very slowly", "body": "<p>As you have read, it is imperative that you use a profiler to determine where the bottlenecks are in your code before you progress far with optimising. However, as I described in my comment, it is possible to rewrite your loop differently so that unused hashes aren't unnecessarily created and discarded</p>\n\n<p>You should also see an improvement from passing the hash by reference instead of as a simple list of keys and values</p>\n\n<p>Here's a modification of your code that should give you some ideas</p>\n\n<pre><code>use constant COLUMN_NAMES =&gt; [ qw/\n  col1  col2  col3  col4  col5\n  col6  col7  col8  col9  col10\n  col11 col12 col13 col14 col15 \n/ ];\n\nsub object_results {\n\n    my $dbh = DBI-&gt;connect($dsn, $user, $pass);\n    my $result_set = $dbh-&gt;selectall_arrayref($sql);\n    $dbh-&gt;disconnect;\n\n    my %objects;\n    for ( my $i = $#$result_set; $i &gt;= 0; --$i ) {\n        my $row = $result_set-&gt;[$i];\n        next if exists $objects{$row-&gt;[0]};\n\n        my %input_hash;\n        for my $i ( 0 .. $#$row ) {\n          my $v = $row-&gt;[$i];\n          next unless defined $v;\n          $input_hash{COLUMN_NAMES-&gt;[$i]} = $v;\n        }\n\n        $objects{$input_hash{col1}} = Model::Object-&gt;new(\\%input_hash);\n    }\n\n    values %objects;\n}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 1341647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea471bd6bcd23fc8ca779d8a93eb87d1?s=128&d=identicon&r=PG", "display_name": "limeri", "link": "https://stackoverflow.com/users/1341647/limeri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1433087308, "creation_date": 1433043325, "question_id": 30553574, "link": "https://stackoverflow.com/questions/30553574/perl-creates-objects-very-slowly", "title": "Perl creates objects very slowly", "body": "<p>I have a perl script that reads ~50,000 rows from a database and stores them in an array of hashes.  Standard DBI code.  Rather than work directly on hashes, I prefer to put the data into objects that I can pass to other code modules very cleanly.  The table I'm reading from has 15+ columns in it.  My code basically looks like:</p>\n\n<pre><code>my $db = DBI-&gt;connect(); # Just pretend you see a proper DBI connect here\nmy $resultSet = $db-&gt;selectall_arrayref($sql);\n$db-&gt;disconnect();\n\n# Here's where the problem starts.\nmy %objects;\nfor my $row (@{$resultSet}) {\n    my ($col1, $col2, ..., $col15) = @{$row};\n    my %inputHash;\n    $inputHash{col1} = $col1 if $col1;\n    ...\n    $inputHash{col15} = $col1 if $col15;\n    my $obj = Model::Object-&gt;new(%inputHash);\n    $objects{$col1} = $obj;\n}\nreturn values %objects;\n</code></pre>\n\n<p>It collects stuff into a hash to eliminate dups from the select.  The problem starts in the loop below the comment that says \"Here's where the problem starts\".  I've put a message in the loop to log a line for every 100 objects that are created.  The first 100 objects were created in 5 secs.  The next 100 took 16 secs.  Getting to 300 took 30 more secs.  It's up to 9000 objects and is taking 12+ minutes to create 100 objects.  I didn't think that 50,000 objects was large enough to create these kinds of issues.</p>\n\n<p>The Model::Object that's being created is a class with getters and setters for each of the properties.  It has a new method and a serialize method (essentially a toString) and that's it.  There's no logic to it.</p>\n\n<p>I'm running ActiveState Perl 5.16 on a Windows laptop with 8 GB of RAM, an i7 processor (3 yrs old) and an SSD drive with reasonable space.  I've seen this on a Linux machine with the same version of Perl, so I don't think it's a hardware thing.  I need to stay on 5.16 of AS Perl.  Any advice about how to improve performance would be appreciated.  Thanks.</p>\n"}, {"tags": ["regex", "bash", "perl", "command-line"], "comments": [{"owner": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 2, "creation_date": 1433030583, "post_id": 30552460, "comment_id": 49177261, "body": "Am I correct to assume that <code>src=d</code> is a typo <code>src=\\d</code>?"}, {"owner": {"reputation": 181, "user_id": 854955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KkKlg.jpg?s=128&g=1", "display_name": "lizardhr", "link": "https://stackoverflow.com/users/854955/lizardhr"}, "reply_to_user": {"reputation": 3169, "user_id": 4114124, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/k73hh.jpg?s=128&g=1", "display_name": "Politank-Z", "link": "https://stackoverflow.com/users/4114124/politank-z"}, "edited": false, "score": 0, "creation_date": 1433034961, "post_id": 30552460, "comment_id": 49177968, "body": "Yes correct, thank you @Politank-Z"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 854955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KkKlg.jpg?s=128&g=1", "display_name": "lizardhr", "link": "https://stackoverflow.com/users/854955/lizardhr"}, "edited": false, "score": 0, "creation_date": 1433035228, "post_id": 30552509, "comment_id": 49178024, "body": "Yes, it is! I had tried this but without <code>()</code> brackets.. It only needs to be correct in the regex that is \\d or \\d+"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "reply_to_user": {"reputation": 181, "user_id": 854955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KkKlg.jpg?s=128&g=1", "display_name": "lizardhr", "link": "https://stackoverflow.com/users/854955/lizardhr"}, "edited": false, "score": 0, "creation_date": 1433035718, "post_id": 30552509, "comment_id": 49178129, "body": "@lizardhr - just change the <code>d+</code> to <code>\\d+</code>"}], "tags": [], "owner": {"reputation": 2878, "user_id": 600360, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/t4VHw.jpg?s=128&g=1", "display_name": "Mort", "link": "https://stackoverflow.com/users/600360/mort"}, "is_accepted": true, "score": 4, "last_activity_date": 1433064193, "last_edit_date": 1433064193, "creation_date": 1433030171, "answer_id": 30552509, "question_id": 30552460, "link": "https://stackoverflow.com/questions/30552460/perl-regex-find-and-replace-with-variable-from-bash/30552509#30552509", "title": "perl regex find and replace with variable from bash", "body": "<p>I'm not exactly sure what you mean, but I think you want something like this, where the <code>()</code> brackets store the number and the <code>$1</code> replaces it back.</p>\n\n<pre><code>perl -pi -w -e 's/src=\"(\\d+)/src=\"http:\\/\\/website.com\\/$1/g\u2019 file.tsv\n</code></pre>\n\n<p>And you can avoid the so-called 'leaning toothpick syndrome by selecting a different delimiter for the <code>s///</code> operation like <code>s{}{}</code></p>\n\n<pre><code>perl -pi -w -e 's{src=\"(\\d+)}{src=\"http://website.com/$1}g\u2019 file.tsv\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 854955, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KkKlg.jpg?s=128&g=1", "display_name": "lizardhr", "link": "https://stackoverflow.com/users/854955/lizardhr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 30552509, "answer_count": 1, "score": 2, "last_activity_date": 1433064193, "creation_date": 1433029557, "last_edit_date": 1433039479, "question_id": 30552460, "link": "https://stackoverflow.com/questions/30552460/perl-regex-find-and-replace-with-variable-from-bash", "title": "perl regex find and replace with variable from bash", "body": "<p>I have this regex: <code>'src=\\d'</code> which match all src attributes who start with a number in a file.  I need to store it within a variable, cut <code>src=</code> out and write from there a new <code>$string</code> with <code>\\d</code> concatenated to it: <code>$string . $d</code>. Is it possible to store only <code>\\d</code> in a variable with a single command line? How to use <code>cut</code> and variable in a command line with perl? Is it possible?</p>\n\n<pre><code>perl -pi -w -e 's/src=\"\\d+/src=\"http:\\/\\/website.com\\/\\d+/g\u2019 file.tsv \n</code></pre>\n"}, {"tags": ["perl", "csv", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "edited": false, "score": 0, "creation_date": 1433007845, "post_id": 30549164, "comment_id": 49170873, "body": "Does your text contain any character outside ASCII? It yes, it should be no problem to determine the real encoding. Otherwise the encoding detector gives arbitary results."}, {"owner": {"reputation": 746, "user_id": 2205667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f011882ba4a1ef68859571fbbfc47b6?s=128&d=identicon&r=PG&f=1", "display_name": "H. Shindoh", "link": "https://stackoverflow.com/users/2205667/h-shindoh"}, "reply_to_user": {"reputation": 38299, "user_id": 3027266, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3249486ec6096e443cb8e93489fe0a09?s=128&d=identicon&r=PG&f=1", "display_name": "Wernfried Domscheit", "link": "https://stackoverflow.com/users/3027266/wernfried-domscheit"}, "edited": false, "score": 0, "creation_date": 1433009495, "post_id": 30549164, "comment_id": 49171438, "body": "Yes. I am dealing with a German text which contains a lot of &#252;."}, {"owner": {"reputation": 1720, "user_id": 27310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef10e56567f5d6e20bc3f7f4ab4e3254?s=128&d=identicon&r=PG", "display_name": "Gaurav", "link": "https://stackoverflow.com/users/27310/gaurav"}, "edited": false, "score": 0, "creation_date": 1433012618, "post_id": 30549164, "comment_id": 49172434, "body": "Try the top answer from <a href=\"http://stackoverflow.com/questions/627661/how-can-i-output-utf-8-from-perl\" title=\"how can i output utf 8 from perl\">stackoverflow.com/questions/627661/&hellip;</a> -- I&#39;m pretty sure that&#39;ll fix this for you!"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 13, "last_activity_date": 1467748566, "last_edit_date": 1467748566, "creation_date": 1433017924, "answer_id": 30551086, "question_id": 30549164, "link": "https://stackoverflow.com/questions/30549164/how-to-make-the-output-from-textcsv-utf8/30551086#30551086", "title": "How to make the output from Text::CSV utf8?", "body": "<p>You have set the encoding of the input file handle (which, by the way, should be <code>&lt;:encoding(utf8)</code> -- note the colon) but you haven't specified the encoding of the <em>output</em> channel, so Perl will send unencoded character values to the output</p>\n\n<p>The Unicode values for characters that will fit in a single byte -- Basic Latin (ASCII) between 0 and 0x7F, and Latin-1 Supplement between 0x80 and 0xFF -- are very similar to Windows code page 1252. In particular a small letter u with a diaresis is 0xFC in both Unicode and CP1252, so the text will look like CP1252 if it is output unencoded, instead of the two-byte sequence 0xC3 0xBC which is the same codepoint encoded in UTF-8</p>\n\n<p>If you use <code>binmode</code> on STDOUT to set the encoding then the data will be output correctly, but it is simplest to use the <code>open</code> pragma like this</p>\n\n<pre><code>use open qw/ :std :encoding(utf-8) /;\n</code></pre>\n\n<p>which will set the encoding for STDIN, STDOUT and STDERR, as well as any newly-opened file handles. That means you don't have to specify it when you open the CSV file, and your code will look like this</p>\n\n<p>Note that I have also added <code>use strict</code> and <code>use warnings</code>, which are essential in any Perl program. I have also \nused <code>autodie</code> to remove the need for checks on the status of all IO operations, and I have taken advantage of the way Perl interpolates arrays inside double quotes by putting a space between the elements which avoids the need for a <code>join</code> call</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse utf8;\nuse strict;\nuse warnings 'all';\nuse open qw/ :std :encoding(utf-8) /;\nuse autodie;\n\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new({ binary =&gt; 1, sep_char =&gt; ';' });\n\nopen my $fh, '&lt;', 'test.csv';\n\nwhile ( my $row = $csv-&gt;getline($fh) ) {\n    print \"@$row\\n\";\n}\n\nclose $fh;\n</code></pre>\n"}], "owner": {"reputation": 746, "user_id": 2205667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f011882ba4a1ef68859571fbbfc47b6?s=128&d=identicon&r=PG&f=1", "display_name": "H. Shindoh", "link": "https://stackoverflow.com/users/2205667/h-shindoh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3059, "favorite_count": 0, "accepted_answer_id": 30551086, "answer_count": 1, "score": 4, "last_activity_date": 1467748566, "creation_date": 1433006620, "last_edit_date": 1433007099, "question_id": 30549164, "link": "https://stackoverflow.com/questions/30549164/how-to-make-the-output-from-textcsv-utf8", "title": "How to make the output from Text::CSV utf8?", "body": "<p>I have a CSV file, say win.csv, whose text is encoded in windows-1252. First I use iconv to make it in utf8.</p>\n\n<pre><code>$iconv -o test.csv -f windows-1252 -t utf-8 win.csv\n</code></pre>\n\n<p>Then I read the converted CSV file with the following Perl script (utfcsv.pl).</p>\n\n<pre><code>#!/usr/bin/perl \nuse utf8;\nuse Text::CSV;\nuse Encode::Detect::Detector;\n\nmy $csv = Text::CSV-&gt;new({ binary =&gt; 1, sep_char =&gt; ';',});\nopen my $fh, \"&lt;encoding(utf8)\", \"test.csv\";\n\nwhile (my $row = $csv-&gt;getline($fh)) { \n  my $line = join \" \", @$row;\n  my $enc = Encode::Detect::Detector::detect($line);\n  print \"($enc) $line\\n\";\n}\n\n$csv-&gt;eof || $csv-&gt;error_diag();\nclose $fh;\n$csv-&gt;eol(\"\\r\\n\");\nexit;\n</code></pre>\n\n<p>Then the output is like the following.</p>\n\n<pre><code>(UFT-8) .........\n() .....\n</code></pre>\n\n<p>Namely the encoding of all lines are detected as UTF-8 (or ASCII). But the actual output does not seem to be UTF-8. In fact, if I save the output on a file</p>\n\n<pre><code>$./utfcsv.pl &gt; output.txt\n</code></pre>\n\n<p>then the encoding of output.txt is detected as windows-1252.</p>\n\n<p><strong>Question: How can I get the output text in UFT-8?</strong></p>\n\n<p>Notes:</p>\n\n<ol>\n<li>Environment: openSUSE 13.2 x86_64, perl 5.20.1</li>\n<li>I do not use Text::CSV::Encoded because the installation fails. (Because test.csv is converted in UTF-8, so it is strange to use Text::CSV::Encoded.)</li>\n<li>I use the following script to check the encoding. (I also use it to find out the encoding of the initial CSV file win.csv.)</li>\n</ol>\n\n<p>.</p>\n\n<pre><code>#!/usr/bin/perl \nuse Encode::Detect::Detector;\nopen my $in,  \"&lt;\",\"$ARGV[0]\" || die \"open failed\";\nwhile (my $line = &lt;$in&gt;) {\n  my $enc = Encode::Detect::Detector::detect($line);\n  chomp $enc;\n  if ($enc) {\n    print \"$enc\\n\";\n  }\n}\n</code></pre>\n"}, {"tags": ["java", "performance", "perl"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 3941336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58343334895e3d96a2995172df973446?s=128&d=identicon&r=PG&f=1", "display_name": "vareen", "link": "https://stackoverflow.com/users/3941336/vareen"}, "edited": false, "score": 1, "creation_date": 1433070203, "post_id": 30551119, "comment_id": 49184932, "body": "ok. thanks.. if i will change the perl code into java then will it be more faster ?"}], "tags": [], "owner": {"reputation": 731, "user_id": 2098733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a85255ad3255904cf3838d62b54f25?s=128&d=identicon&r=PG", "display_name": "Tim De Lange", "link": "https://stackoverflow.com/users/2098733/tim-de-lange"}, "is_accepted": true, "score": 0, "last_activity_date": 1433018125, "creation_date": 1433018125, "answer_id": 30551119, "question_id": 30547684, "link": "https://stackoverflow.com/questions/30547684/performance-in-running-perl-program-from-java-spring-controller/30551119#30551119", "title": "Performance in running perl program from java spring controller", "body": "<p>Well, it depends on how you are calling the perl program. When running a perl script, the perl interpreter starts, then compiles the script, then runs it. This means everytime you run program you spawn a new process, read the text file(s) containing the program, interpret them, and then get the results.</p>\n\n<p>This is not optimum. </p>\n\n<p>To optimize the process, write a wrapper in perl for you perl script that runs it continuously in a loop, waiting for input from your java process via a socket, named pipe, or file descriptor. This way, the process does not have to start over and over again. To support greater concurrency, run a pool of these.</p>\n"}], "owner": {"reputation": 43, "user_id": 3941336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58343334895e3d96a2995172df973446?s=128&d=identicon&r=PG&f=1", "display_name": "vareen", "link": "https://stackoverflow.com/users/3941336/vareen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 30551119, "answer_count": 1, "score": 2, "last_activity_date": 1433018125, "creation_date": 1432998274, "question_id": 30547684, "link": "https://stackoverflow.com/questions/30547684/performance-in-running-perl-program-from-java-spring-controller", "title": "Performance in running perl program from java spring controller", "body": "<p>I am creating a web application where user enters a query and i have a program in perl which tag the words in query. I am writing a spring controller to handle the Web request and then call the perl program from java class. Is this the optimized way. Is there any performance issue or time delay in calling perl program from java?</p>\n"}, {"tags": ["regex", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "edited": false, "score": 0, "creation_date": 1432996763, "post_id": 30547416, "comment_id": 49167186, "body": "Awesome, thanks !  Just need to wait 7 minutes and 30 seconds until I can accept your answer.  ;-)"}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 3, "last_activity_date": 1432996659, "creation_date": 1432996659, "answer_id": 30547416, "question_id": 30547373, "link": "https://stackoverflow.com/questions/30547373/perl-regex-matching-too-broadly/30547416#30547416", "title": "Perl regex matching too broadly", "body": "<p>You need to make it non-greedy by adding <code>?</code> to your regex :</p>\n\n<pre><code>(&lt;.*?&gt; -&gt; &lt;.*?&gt;)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/uO1gT9/1\" rel=\"nofollow\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433002030, "post_id": 30547426, "comment_id": 49168895, "body": "It&#39;s <i>non-greedy</i>, not <i>lazy</i>"}, {"owner": {"reputation": 1220, "user_id": 3209983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6baeca757673ce6c82dd2a42895cb321?s=128&d=identicon&r=PG", "display_name": "Cu3PO42", "link": "https://stackoverflow.com/users/3209983/cu3po42"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433002257, "post_id": 30547426, "comment_id": 49168967, "body": "@Borodin I have heard both terminologies being used, however, I will add the alternative to the answer for completeness&#39; sake."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433003257, "post_id": 30547426, "comment_id": 49169316, "body": "<i>lazy evaluation</i> refers to something else entirely, and is best not used as a synonym for <i>non-greedy</i> as well. The Perl documentation uses the latter throughout"}, {"owner": {"reputation": 1220, "user_id": 3209983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6baeca757673ce6c82dd2a42895cb321?s=128&d=identicon&r=PG", "display_name": "Cu3PO42", "link": "https://stackoverflow.com/users/3209983/cu3po42"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433003617, "post_id": 30547426, "comment_id": 49169419, "body": "I am aware that <i>lazy evaluation</i> is something else. The Perl documentation may use <code>non-greedy</code> throughout, but I have seen enough other documentation (for example the .NET documentation on RegEx) that refers to it as lazy to justify including both terms to make it more accessible to a large user base, seeing as the question does not rely on Perl&#39;s specific implementation. The question as to which is more appropriate remains a matter of opinion."}], "tags": [], "owner": {"reputation": 1220, "user_id": 3209983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6baeca757673ce6c82dd2a42895cb321?s=128&d=identicon&r=PG", "display_name": "Cu3PO42", "link": "https://stackoverflow.com/users/3209983/cu3po42"}, "is_accepted": false, "score": 2, "last_activity_date": 1433002274, "last_edit_date": 1433002274, "creation_date": 1432996729, "answer_id": 30547426, "question_id": 30547373, "link": "https://stackoverflow.com/questions/30547373/perl-regex-matching-too-broadly/30547426#30547426", "title": "Perl regex matching too broadly", "body": "<p>By default the quantifier <code>*</code> is greedy. It matches as much as it can, you need to make it lazy (a.k.a. non-greedy) by adding a <code>?</code> after it. Here is an <a href=\"https://regex101.com/r/hU1gC4/1\" rel=\"nofollow\">example</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "edited": false, "score": 0, "creation_date": 1433008937, "post_id": 30548308, "comment_id": 49171240, "body": "You learn a new thing every day ..... the x modifier in my case ! ;-)   (Your regex suggestion is very interesting in its own rights too, of course !). Thanks."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1433001961, "creation_date": 1433001961, "answer_id": 30548308, "question_id": 30547373, "link": "https://stackoverflow.com/questions/30547373/perl-regex-matching-too-broadly/30548308#30548308", "title": "Perl regex matching too broadly", "body": "<p>That is much more robustly written without the non-greedy option, and it is clearer if insignificant whitespace is added with the help of the <code>/x</code> modifier. Like so</p>\n\n<pre><code>$row =~ / ( &lt;[^&lt;&gt;]*&gt; \\s* -&gt; \\s* &lt;[^&lt;&gt;]*&gt; ) /x;\n</code></pre>\n"}], "owner": {"reputation": 1091, "user_id": 4474629, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/e3d1d6e41980939611b75370816b8843?s=128&d=identicon&r=PG&f=1", "display_name": "Little Code", "link": "https://stackoverflow.com/users/4474629/little-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 30547416, "answer_count": 3, "score": 2, "last_activity_date": 1433002274, "creation_date": 1432996326, "question_id": 30547373, "link": "https://stackoverflow.com/questions/30547373/perl-regex-matching-too-broadly", "title": "Perl regex matching too broadly", "body": "<p>I have a strings taken from Linux mail logs that look something like :</p>\n\n<pre><code>May 20 12:19:28 example-03 amavis[1445]: (01445-15) Passed SPAMMY {RelayedTaggedInbound}, [10.4.3.2]:49488 [10.4.3.2] &lt;offers-john=example.com@example.net&gt; -&gt; &lt;john@example.com&gt;, Queue-ID: C00OZs0w9DB, Message-ID: &lt;5ZCfDBMQyiUjOVD78ZFxg5%3D%3D@example.net&gt;, mail_id: aCUpU0wtUaR, Hits: 15.587, size: 21407, queued_as: dgzikuucQ9i, 438 ms\n</code></pre>\n\n<p>The element I need to extract is :</p>\n\n<pre><code>&lt;offers-john=example.com@example.net&gt; -&gt; &lt;john@example.com&gt;\n</code></pre>\n\n<p>I want to keep my regex as simple and clear as possible, so I don't want to go into regex for email address formats.  Not least because regexing email formats is a bug-prone process !</p>\n\n<p>I have tried :</p>\n\n<pre><code>$row =~ /(&lt;.*&gt; -&gt; &lt;.*&gt;,)/;\n</code></pre>\n\n<p>But, despite the presence of the comma delimiter, that syntax matches all the way to the end of the end of Message-ID with an output such as :</p>\n\n<pre><code>&lt;offers-john=example.com@example.net&gt; -&gt; &lt;john@example.com&gt;, Queue-ID: C00OZs0w9DB, Message-ID: &lt;5ZCfDBMQyiUjOVD78ZFxg5%3D%3D@example.net&gt;,\n</code></pre>\n"}, {"tags": ["arrays", "perl", "list", "grep", "uniq"], "comments": [{"owner": {"reputation": 18507, "user_id": 13317, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/47a9a5b4589057085336011863d2ee9a?s=128&d=identicon&r=PG", "display_name": "Kenster", "link": "https://stackoverflow.com/users/13317/kenster"}, "edited": false, "score": 2, "creation_date": 1432993049, "post_id": 30546624, "comment_id": 49166098, "body": "It would be helpful for you to provide a complete sample program that demonstrates your problem. Could you edit your sample code to show how you&#39;re initializing <code>@urls</code>?"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1432999712, "post_id": 30546624, "comment_id": 49168153, "body": "Looks like <code>@urls</code> is a list with the value &quot;6 6 6 6 6 6 6 6 6 6 6 6&quot; otherwise there would be newlines between each <code>6</code>..."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 1, "creation_date": 1433026432, "post_id": 30546624, "comment_id": 49176368, "body": "&quot;Uniq function in Perl not working&quot; ... yes it is. Seriously ... Other people have used it. Do you think such a problem went unnoticed? Yes, occasionally, <a href=\"https://connect.microsoft.com/VisualStudio/feedback/details/1304939\" rel=\"nofollow noreferrer\">there are bugs in tools in widespread use</a>, but, more often than not, <a href=\"http://c2.com/cgi/wiki?CompilerBug\" rel=\"nofollow noreferrer\">the bug is in your code</a>."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4956235, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/007bb82418440a19b46ea8f54e8bda51?s=128&d=identicon&r=PG&f=1", "display_name": "chint", "link": "https://stackoverflow.com/users/4956235/chint"}, "edited": false, "score": 0, "creation_date": 1433083557, "post_id": 30547131, "comment_id": 49188965, "body": "Thanks Jonathan. I would take care of your all comments going forward. your code works.  i had developed another workaround which also is working."}], "tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 1, "last_activity_date": 1433018641, "last_edit_date": 1495541665, "creation_date": 1432994748, "answer_id": 30547131, "question_id": 30546624, "link": "https://stackoverflow.com/questions/30546624/uniq-function-in-perl-not-working/30547131#30547131", "title": "Uniq function in Perl not working", "body": "<p>Please learn how to provide an MCVE (<a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable Example?</a>) or \nSSCCE (<a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">Short, Self-Contained, Correct Example</a>) \u2014 two names and links for the same basic idea.</p>\n\n<p>The <code>uniq</code> function does work.  Here is a completed, marginally fixed variant of your code converted into an MCVE.</p>\n\n<h3><code>listuniq.pl</code></h3>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;        # Always use these\nuse warnings;\n\nmy @urls = ( 6, 6, 6, 6, 6, 6, 6, 6, 6 );\n\nuse List::MoreUtils qw(uniq);\n\nprint \"Before:\\n\";\nprint \"$_\\n\" for @urls;    # Note the @ is missing\n\nmy @unique1 = uniq(@urls);\n\nprint \"After:\\n\";\nprint \"$_\\n\" for @unique1; # Note the @ is missing\n\n@urls = ();\n\npush @urls, \"http://www.google.com/\", \"http://www.yahoo.com/\" for (1..6);\n\nprint \"Before:\\n\";\nprint \"$_\\n\" for @urls;\n\n@unique1 = uniq(@urls);\n\nprint \"After:\\n\";\nprint \"$_\\n\" for @unique1;\n</code></pre>\n\n<p>The <code>@</code> symbols in <code>print \"@$_\\n\"</code> lead to complaints because of the <code>use strict;</code>.  Unless you were really planning something very fancy, you need to (a) use <code>use strict;</code> and <code>use warnings;</code> and (b) pay heed to them.</p>\n\n<h3>Example run</h3>\n\n<pre><code>$ perl listuniq.pl | so\nBefore:\n6\n6\n6\n6\n6\n6\n6\n6\n6\nAfter:\n6\nBefore:\nhttp://www.google.com/\nhttp://www.yahoo.com/\nhttp://www.google.com/\nhttp://www.yahoo.com/\nhttp://www.google.com/\nhttp://www.yahoo.com/\nhttp://www.google.com/\nhttp://www.yahoo.com/\nhttp://www.google.com/\nhttp://www.yahoo.com/\nhttp://www.google.com/\nhttp://www.yahoo.com/\nAfter:\nhttp://www.google.com/\nhttp://www.yahoo.com/\n$\n</code></pre>\n\n<h3>Other possibilities</h3>\n\n<p>This being Perl, TMTOWTDI \u2014 There's More Than One Way To Do It.  That includes more than one way of writing code that produces unexpected results \u2014 see the other <a href=\"https://stackoverflow.com/a/30547533/15168\">answer</a> and <a href=\"https://stackoverflow.com/questions/30546624/uniq-function-in-perl-not-working/30547131#comment49168130_30547533\">commentary</a> to the other answer for other possible ways to write code that gives confusing results.  Because you've not provided an MCVE, it is hard \u2014\u00a0essentially futile \u2014 for us to guess which option you've taken to get the unexpected result.  You will always improve your chances of getting the most relevant answer on SO (or any similar site) by providing a question which includes the minimal code necessary to reproduce the result you see.</p>\n"}, {"comments": [{"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 1, "creation_date": 1432999639, "post_id": 30547533, "comment_id": 49168130, "body": "It&#39;s either that or he has one single value, &quot;6 6 6 6 6 6 6 6 6 6 6 6&quot;. This is more likely since he, in the first loop, print each element of the array with a trailing newline, and there&#39;s only one newline in the output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 1, "creation_date": 1433001637, "post_id": 30547533, "comment_id": 49168770, "body": "@Kusalananda: Yes. That would be a single anonymous array though <code>[ &quot;6 6 6 6 6 6 6 6 6 6 6 6&quot; ]</code>. Strange"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1432997289, "last_edit_date": 1495540693, "creation_date": 1432997289, "answer_id": 30547533, "question_id": 30546624, "link": "https://stackoverflow.com/questions/30546624/uniq-function-in-perl-not-working/30547533#30547533", "title": "Uniq function in Perl not working", "body": "<p>What you appear to have in your <code>@urls</code> array is twelve anonymous arrays that contain the single element 6. In other words it looks like this</p>\n\n<pre><code>my @urls = ( [6], [6], [6], [6], [6], [6], [6], [6], [6], [6], [6], [6] );\n</code></pre>\n\n<p>What <code>uniq</code> does is to remove superfluous elements from the list if their <em>string value</em> is the same as that of a preceding element. The string value of an array reference is something like <code>ARRAY(0x1f6c6e4)</code></p>\n\n<p>If your array contained twelve references to the <em>same</em> anonymous array then <code>uniq</code> would have removed all but one. But it looks like you have twelve <em>distinct</em> arrays that just happen to contain the same value and <code>uniq</code> won't notice that</p>\n\n<p>It is hard to know how to help as, because <code>[6]</code> isn't much like a URL, the real data in your array is probably very different. Perhaps you have a bug in your code, or perhaps you really need to compare the contents of all the subsidiary arrays, but we cannot tell</p>\n\n<p>I suggest that you post another question that shows a dump (using <a href=\"https://metacpan.org/pod/Data::Dump\" rel=\"nofollow noreferrer\"><code>Data::Dump</code></a>) of your <code>@urls</code> array and describes what you want to do with it. It would also help you to read <a href=\"https://stackoverflow.com/help/how-to-ask\"><strong><em>How to Ask</em></strong></a> so that those of us who would help you aren't left with so many doubts about the real situation</p>\n"}], "owner": {"reputation": 59, "user_id": 4956235, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/007bb82418440a19b46ea8f54e8bda51?s=128&d=identicon&r=PG&f=1", "display_name": "chint", "link": "https://stackoverflow.com/users/4956235/chint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "closed_date": 1433035741, "answer_count": 2, "score": -2, "last_activity_date": 1433018641, "creation_date": 1432991532, "last_edit_date": 1432993943, "question_id": 30546624, "link": "https://stackoverflow.com/questions/30546624/uniq-function-in-perl-not-working", "closed_reason": "Not suitable for this site", "title": "Uniq function in Perl not working", "body": "<p>I am using Active Perl 5.20.2.</p>\n\n<p>uniq function when applied on an array returns the full array with duplicate values. Please refer to the code below and kindly let know any issues with it or any other way to get the unique values from a list.</p>\n\n<pre><code>use List::MoreUtils qw(uniq);\n\nprint \"@$_\\n\" for @urls;\n\n@unique1 = uniq(@urls);\n\nprint \"@$_\\n\" for @unique1;\n</code></pre>\n\n<p>Output </p>\n\n<p>urls array values - 6 6 6 6 6 6 6 6 6 6 6 6</p>\n\n<p>@unique 1         - 6 6 6 6 6 6 6 6 6 6 6 6</p>\n\n<hr>\n\n<p><em>I have even used the functions below with no luck \u2014 they're  available from searching Google.</em></p>\n\n<pre><code>*sub uniq{\n my %seen;\n grep !$seen{$_}++, @_;\n}\nforeach my $value (@urls) {\nif (!$seen{$value} ) \n{\npush @unique1, $value;\n$seen{$value} = 1;\n}*\n</code></pre>\n"}, {"tags": ["perl", "shell", "backgrounding"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1433122414, "post_id": 30541033, "comment_id": 49200207, "body": "Please provide a mininal runnable demonstration of the problem."}, {"owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1433182353, "post_id": 30541033, "comment_id": 49230566, "body": "I added the sample Perl code I was using to demonstrate the issue. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "edited": false, "score": 0, "creation_date": 1433121165, "post_id": 30542554, "comment_id": 49199924, "body": "Thanks for the reply. System works in the same way, it returns to shell after the child process terminates."}, {"owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "edited": false, "score": 0, "creation_date": 1433185060, "post_id": 30542554, "comment_id": 49232091, "body": "Hmm seems that redirecting the STDOUT to /dev/null does the trick. Thanks!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1433185211, "last_edit_date": 1433185211, "creation_date": 1432963077, "answer_id": 30542554, "question_id": 30541033, "link": "https://stackoverflow.com/questions/30541033/perl-on-background-when-invoked-from-another-env/30542554#30542554", "title": "Perl on background when invoked from another env", "body": "<p>If I understand correctly, you're saying that PHP is waiting for the grandchild to end even though the child exited.</p>\n\n<p><code>system</code> doesn't return since <code>php</code> collects the child's STDOUT, the same STDOUT that was inherited by the grandchild. On a Linux system, this can be seen by adding the following to the Perl script:</p>\n\n<pre><code>system(\"ls -l /proc/$$/fd\");\n</code></pre>\n\n<p>From shell:</p>\n\n<pre><code>lrwx------ 1 ikegami ikegami 64 Jun  1 14:07 1 -&gt; /dev/pts/0\n</code></pre>\n\n<p>From PHP:</p>\n\n<pre><code>l-wx------ 1 ikegami ikegami 64 Jun  1 14:08 1 -&gt; pipe:[10052926]\n</code></pre>\n\n<p>Normally, when you deamonize a process, you reopen its STDIN, STDOUT and STDERR, redirecting them to <code>/dev/null</code> or to a log file.</p>\n\n<pre><code>open(STDIN,  '&lt;',  '/dev/null') or die $!;\nopen(STDOUT, '&gt;',  '/dev/null') or die $!;\nopen(STDERR, '&gt;&gt;', '/var/log/application.log') or die $!;\n</code></pre>\n\n<p>Normally, when you deamonize a process, you also call <code>POSIX::setsid()</code>.</p>\n"}], "owner": {"reputation": 244, "user_id": 1413728, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/0b6c088d28447c8d83373aa9780038b1?s=128&d=identicon&r=PG", "display_name": "baa2w", "link": "https://stackoverflow.com/users/1413728/baa2w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 30542554, "answer_count": 1, "score": 1, "last_activity_date": 1433185211, "creation_date": 1432946462, "last_edit_date": 1433182303, "question_id": 30541033, "link": "https://stackoverflow.com/questions/30541033/perl-on-background-when-invoked-from-another-env", "title": "Perl on background when invoked from another env", "body": "<p>I have a Perl script that is supposed to do some work on background. This is well described - I fork, kill (return 0) the parent and do the work in the child. When I run it directly from shell, it works as expected (i.e. returns to shell right after killing the parent and continues on background). But if I run it from another environment, e.g. from PHP via executing </p>\n\n<pre><code>    php -r \"passthru('my-perl-script.pl')\"\n</code></pre>\n\n<p>it returns to shell after the child is done. Any ideas why is this happening?</p>\n\n<p>Thanks!</p>\n\n<p>EDIT:\nHere is the Perl code I was using:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nlocal $| = 1;\n\n# fork the process - returns child pid to the parent process and 0\n# to the child process\nprint ' [FORKING] ';\nmy $pid = fork();\nerror('Failed to fork: $@') and exit 1 if $@;\n\n# exit parent\nprint ' [KILLING PARENT] ';\nexit 0 if $pid;\n\n# continue as child process\nprint \" [CONTINUING AS CHILD] \\n\";\n\n# wait 3 secs (for testing) and exit\nsleep 3;\nprint \" [DONE]\\n\";\nexit 1;\n</code></pre>\n\n<p>Output when executed directly:</p>\n\n<pre><code>$ ./background-test.pl\n [FORKING]  [KILLING PARENT]  [KILLING PARENT]  [CONTINUING AS CHILD]\n$  [DONE] \n</code></pre>\n\n<p>Output when executed via PHP:</p>\n\n<pre><code>$ php -r \"system('./background-test.pl');\"\n$ [FORKING]  [KILLING PARENT]  [KILLING PARENT]  [CONTINUING AS CHILD]\n  # ... 3 seconds wait ... \n  [DONE]\n$\n</code></pre>\n\n<p>My question was why doesn't the Perl script disconnect when invoked from other environments (here PHP is just an example).</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "io", "stdin"], "comments": [{"owner": {"reputation": 2792, "user_id": 3125367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/650027e104822e3cd1be56bb90fa5271?s=128&d=identicon&r=PG&f=1", "display_name": "user3125367", "link": "https://stackoverflow.com/users/3125367/user3125367"}, "edited": false, "score": 0, "creation_date": 1432947505, "post_id": 30540998, "comment_id": 49155439, "body": "That&#39;s how open() is designed \u2014 documentation is explicit on this. 3-arg version allows to open file with any name including &#39;-&#39;, 2-arg version is a convenient wrapper around sml dup() at perl level."}], "answers": [{"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": true, "score": 2, "last_activity_date": 1432948714, "creation_date": 1432948714, "answer_id": 30541223, "question_id": 30540998, "link": "https://stackoverflow.com/questions/30540998/2-vs-3-argument-open-with/30541223#30541223", "title": "2- vs 3-argument open with &#39;-&#39;", "body": "<p><a href=\"https://metacpan.org/pod/perlfunc#open-FILEHANDLE-EXPR\" rel=\"nofollow\">perldoc -f open</a>:</p>\n\n<blockquote>\n  <p>In the two-argument (and one-argument) form, opening <code>&lt;-</code> or <code>-</code> opens <code>STDIN</code> and opening <code>&gt;-</code> opens <code>STDOUT</code>.</p>\n</blockquote>\n\n<p>I think this makes it clear that the special treatment of <code>-</code> is specific to the one- or two-argument forms.</p>\n\n<p>You could just assign <code>\\*STDIN</code> to your <code>$in</code>, or open a file based on user input.</p>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 2, "last_activity_date": 1432950287, "creation_date": 1432950287, "answer_id": 30541363, "question_id": 30540998, "link": "https://stackoverflow.com/questions/30540998/2-vs-3-argument-open-with/30541363#30541363", "title": "2- vs 3-argument open with &#39;-&#39;", "body": "<p>As already mentioned, you can use <code>STDIN</code> instead of opening it explicitly,</p>\n\n<pre><code>use autodie;\n\nmy $in;\n$in = ($file eq \"-\") ? \\*STDIN : open($in, \"&lt;\", $file) &amp;&amp; $in;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1432964752, "last_edit_date": 1432964752, "creation_date": 1432964371, "answer_id": 30542701, "question_id": 30540998, "link": "https://stackoverflow.com/questions/30540998/2-vs-3-argument-open-with/30542701#30542701", "title": "2- vs 3-argument open with &#39;-&#39;", "body": "<p>Three-arg open fails because there's no file named <code>-</code>. That's the whole point of three-arg open. Gotta have a way of opening files without the file names being treated as code!</p>\n\n<hr>\n\n<p>This should do the trick:</p>\n\n<pre><code>open(STDIN, '&lt;', $qfn)\n   if $qfn;\n</code></pre>\n\n<hr>\n\n<p>Technically, there is a way of opening STDIN with three-args <code>open</code>.</p>\n\n<pre><code># Creates a new system handle (file descriptor).\nopen(my $fh, '&lt;&amp;', fileno(STDIN));\nopen(my $fh, '&lt;&amp;', \\*STDIN);\nopen(my $fh, '&lt;', \"/proc/$$/fd/\".fileno(STDIN));  # Linux\n\n# Creates a new Perl handle for the existing system handle\nopen(my $fh, '&lt;&amp;=', fileno(STDIN));\nopen(my $fh, '&lt;&amp;=', \\*STDIN);\n</code></pre>\n"}], "owner": {"reputation": 5906, "user_id": 474819, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/90031dd96e51d2025f48ce6805b550ec?s=128&d=identicon&r=PG", "display_name": "Nate Glenn", "link": "https://stackoverflow.com/users/474819/nate-glenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 1, "accepted_answer_id": 30541223, "answer_count": 3, "score": 4, "last_activity_date": 1432964752, "creation_date": 1432946066, "question_id": 30540998, "link": "https://stackoverflow.com/questions/30540998/2-vs-3-argument-open-with", "title": "2- vs 3-argument open with &#39;-&#39;", "body": "<p>The following opens <code>STDIN</code> and then echos user input:</p>\n\n<pre><code>open my $in, '-';\nprint \"You said: $_\" while(&lt;$in&gt;);\n</code></pre>\n\n<p>However, the following snippet dies because it can't find any file called '-':</p>\n\n<pre><code>open my $in, '&lt;', '-'; # dies\nprint \"You said: $_\" while(&lt;$in&gt;);\n</code></pre>\n\n<p>Why does the two-argument <code>open</code> work for this but the three-argument <code>open</code> dies? I was hoping for a simple method of opening either a file or STDIN based on user input, and I don't want to use 2-argument open.</p>\n"}, {"tags": ["python", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1432940548, "post_id": 30540186, "comment_id": 49153991, "body": "Just to confirm, you want to change the line before the lines with an empty/missing 5th field?"}, {"owner": {"reputation": 183, "user_id": 1121187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35b83987b40f21cf6121e3de3eb841d2?s=128&d=identicon&r=PG", "display_name": "Reza", "link": "https://stackoverflow.com/users/1121187/reza"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1432940867, "post_id": 30540186, "comment_id": 49154070, "body": "@ikegami There is no need to change the fields in the existing line unless the fifth field in the next line is empty. I am new to bash scripts."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1432940929, "post_id": 30540186, "comment_id": 49154077, "body": "Save to a new file? Print? This is a little unclear..."}, {"owner": {"reputation": 183, "user_id": 1121187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35b83987b40f21cf6121e3de3eb841d2?s=128&d=identicon&r=PG", "display_name": "Reza", "link": "https://stackoverflow.com/users/1121187/reza"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1432941115, "post_id": 30540186, "comment_id": 49154117, "body": "@dawg If saved to a new file, how can one replace c1 and d1 in one file with c2 and d2 in another file?"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1432941592, "last_edit_date": 1432941592, "creation_date": 1432941385, "answer_id": 30540445, "question_id": 30540186, "link": "https://stackoverflow.com/questions/30540186/replacing-some-fields-in-a-line-with-the-fields-in-the-same-columns-in-the-next/30540445#30540445", "title": "replacing some fields in a line with the fields in the same columns in the next line", "body": "<p>One solution is to create a lookahead buffer of one line.</p>\n\n<ol>\n<li>Read a line and save it as \"Current Line\".</li>\n<li>While there are more lines to read,\n<ol>\n<li>Read a line and save it as \"Next Line\".</li>\n<li>If the Next Line has a missing or empty fifth field,\n<ol>\n<li>Modify the Current Line appropriately.</li>\n</ol></li>\n<li>Print the Current Line.</li>\n<li>Make the Next Line to the Current Line.</li>\n</ol></li>\n<li>Print the Current Line.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 0, "last_activity_date": 1432942000, "last_edit_date": 1432942000, "creation_date": 1432941689, "answer_id": 30540487, "question_id": 30540186, "link": "https://stackoverflow.com/questions/30540186/replacing-some-fields-in-a-line-with-the-fields-in-the-same-columns-in-the-next/30540487#30540487", "title": "replacing some fields in a line with the fields in the same columns in the next line", "body": "<p>Given:</p>\n\n<pre><code>$ cat so.txt\na0  b0  c0  d0  e0\na1  b1  c1  d1  e1\na2  b2  c2  d2  \na3  b3  c3  d3  e3\n</code></pre>\n\n<p>You can write a filter in Python:</p>\n\n<pre><code>#!/usr/bin/python\n\nimport fileinput\nfrom collections import deque\nd=deque(maxlen=1)\nfor line in fileinput.input():\n    sp=line.split()\n    if len(sp)==4 and d:\n        d[-1][2]=sp[2]\n        d[-1][3]=sp[3]\n    else:   \n        if d: print '\\t'.join(d[-1])\n        d.append(sp)\nelse:\n    print '\\t'.join(d[-1])\n</code></pre>\n\n<p>Since the <a href=\"https://docs.python.org/2/library/collections.html#collections.deque\" rel=\"nofollow\">deque</a> is specified with max length of 1, it will only hold 1 line in memory at any given time. That means this filter will never have more than two lines in memory. </p>\n\n<p>Then:</p>\n\n<pre><code>$ ./so.py so.txt\na0  b0  c0  d0  e0\na1  b1  c2  d2  e1\na3  b3  c3  d3  e3\n</code></pre>\n\n<p>And redirect that to the desired file.</p>\n\n<p>Notes: will not work if there are multiples lines in a row that are only four fields or if the first line has four fields. You did not specify those results however...</p>\n"}], "owner": {"reputation": 183, "user_id": 1121187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35b83987b40f21cf6121e3de3eb841d2?s=128&d=identicon&r=PG", "display_name": "Reza", "link": "https://stackoverflow.com/users/1121187/reza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 30540487, "answer_count": 2, "score": 0, "last_activity_date": 1432942000, "creation_date": 1432939545, "question_id": 30540186, "link": "https://stackoverflow.com/questions/30540186/replacing-some-fields-in-a-line-with-the-fields-in-the-same-columns-in-the-next", "title": "replacing some fields in a line with the fields in the same columns in the next line", "body": "<p>How can I parse the following tab delimited file to see if the 5th field is empty or not and if it is empty, replace c1 with c2 and d1 with d2. The actual file has a large number of rows with some having their 5th field empty.</p>\n\n<pre><code>a0  b0  c0  d0  e0\na1  b1  c1  d1  e1\na2  b2  c2  d2  \na3  b3  c3  d3  e3\n</code></pre>\n"}, {"tags": ["arrays", "perl", "subroutine"], "comments": [{"owner": {"reputation": 621, "user_id": 1713351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5f6f80d7ad92101ee021e9d013fafd?s=128&d=identicon&r=PG", "display_name": "kjpires", "link": "https://stackoverflow.com/users/1713351/kjpires"}, "edited": false, "score": 1, "creation_date": 1432937801, "post_id": 30539263, "comment_id": 49153122, "body": "Not that this will change your code, but why don&#39;t you read the file outside of <code>hashofarray</code> (e.g. in <code>readfile</code> instead)."}], "answers": [{"tags": [], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "is_accepted": false, "score": 0, "last_activity_date": 1432979937, "last_edit_date": 1432979937, "creation_date": 1432978055, "answer_id": 30544462, "question_id": 30539263, "link": "https://stackoverflow.com/questions/30539263/perl-splitting-file-into-array-and-reading-from-subroutine/30544462#30544462", "title": "Perl splitting File into array and reading from subroutine", "body": "<p>You are declaring <code>@fields</code> with my inside while loop. </p>\n\n<pre><code>while (&lt;DATA&gt;) { # calling the subroutine after reading DATA\nmy @fields = split /\\t/;\n</code></pre>\n\n<p>So scope of that variable is in that while loop only. Instead of doing this try to declare array <code>@fields</code> above while loop. </p>\n\n<p>Also please put these at top of your code.</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>You will have found this error if these lines were at top.</p>\n\n<p>Also you need to improve the way you are reading file. When you read <code>$fh</code> for first time seek pointer will reach at last and after that your code will never read anything from file. It will work on the hash created in first iteration. So if reading file one time is enough for you please take that reading part out of sub else if you want to read again and again then close <code>$fh</code> and reopen it again. </p>\n\n<p><code>if(my @index = grep { $fields[$_] eq $key1 } 0..$#fields) {</code> will not give actual word from <code>@fields</code> instead will give the index of matched word from <code>@fields</code> so at time of printing this should be used</p>\n\n<pre><code>print $fields[$address],\",\", $fields[$account_number], \"\\n\";\n</code></pre>\n\n<p>I hope after these changes you will be able to write a correct solution to your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1432984387, "last_edit_date": 1432984387, "creation_date": 1432983652, "answer_id": 30545320, "question_id": 30539263, "link": "https://stackoverflow.com/questions/30539263/perl-splitting-file-into-array-and-reading-from-subroutine/30545320#30545320", "title": "Perl splitting File into array and reading from subroutine", "body": "<p>OK, so. The core problem here is that your <code>hashofarray</code> function tries to read the file handle. You then iterates to the end of the file. And then... you call it again, when there's no more file left to read. </p>\n\n<p>But that isn't the only problem here - there's several. If you're grepping keys out of a hash of arrays... why not use a hash of hashes instead? The way <em>you're</em> doing it, you're getting - effectively - a search through an array, but then returning the zeroth index anyway. </p>\n\n<p>Likewise - <code>@fields</code> isn't globally scoped, so when you try and reuse it in <code>hashofarray</code> ... it's always going to be empty. </p>\n\n<p>Can I suggest taking a step back? Update your question (or ask a new one) with your actual problem spec? Include input data, and expected output. </p>\n\n<p>I think you've gone through a couple of cycles of fixing this code, and it's getting messy, so I think it's time to draw back a little and start over. I think you'll find there's a lot cleaner and more elegant solution. </p>\n\n<p>That said - if you're simply looking at extracting the 'header' line from your existing data block:</p>\n\n<pre><code>my @fields = split /\\t/,&lt;DATA&gt;; #read first line, split into array. \nwhile ( &lt;DATA&gt; ) { #etc.\n</code></pre>\n\n<p>You can - for example - translate your 'data' sement into a data structure like so:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Dumper;\nmy @all_records;\nmy $header_line = &lt;DATA&gt;;\nchomp($header_line);\nmy @headers = split /\\t/, $header_line;\nwhile (&lt;DATA&gt;) {\n    chomp;\n    my @columns = split /\\t/;\n    my %record;\n    @record{@headers} = @columns;\n    print Dumper \\%record;\n    push( @all_records, \\%record );\n}\n\nprint Dumper \\@all_records;\n\nforeach my $record ( @all_records ) { \n   print join \",\", $record -&gt; {'Account No'}, $record -&gt; {'location'},\"\\n\";\n}\n\n__DATA__\nAccount No  name1   name2   location\n1   josh    smith   411 s chirris ave. sometown st 12345\n1   josh    smith   411 s chirris ave. sometown st 12345\n1   josh    smith   411 s chirris ave. sometown st 12345\n1   josh    smith   411 s chirris ave. sometown st 12345\n</code></pre>\n\n<p>I would suggest though - you can use 'account number' as a unique key, probably so you don't actually need to use an array. You do in <em>this</em> case though, so I've done that in my code. </p>\n\n<p>This will print:</p>\n\n<pre><code>1,411 s chirris ave. sometown st 12345,\n1,411 s chirris ave. sometown st 12345,\n1,411 s chirris ave. sometown st 12345,\n1,411 s chirris ave. sometown st 12345,\n</code></pre>\n"}], "owner": {"reputation": 387, "user_id": 3842777, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bFxen.jpg?s=128&g=1", "display_name": "JDE876", "link": "https://stackoverflow.com/users/3842777/jde876"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432984387, "creation_date": 1432934486, "last_edit_date": 1432936758, "question_id": 30539263, "link": "https://stackoverflow.com/questions/30539263/perl-splitting-file-into-array-and-reading-from-subroutine", "title": "Perl splitting File into array and reading from subroutine", "body": "<p>I have created a subroutine that creates a HoA out of the tab delimted below.</p>\n\n<p>header_map.txt:</p>\n\n<pre><code>account_number_header   account\naccount_number_header   Account #\naccount_number_header   Account No.\naccount_number_header   Account number\naccount_number_header   Account_Id\nfirst_Name_header   name1\nfirst_Name_header   first name\nfirst_Name_header   account name1\nfirst_Name_header   first_name\nfirst_Name_header   f name\nlast_Name_header    name2\nlast_Name_header    last name\nlast_Name_header    account name2\nlast_Name_header    last_name\nlast_Name_header    l name\naddress_header  address1\naddress_header  address\naddress_header  addresses\naddress_header  place of residency\naddress_header  location\n</code></pre>\n\n<p>The sub then bounces the array off the values of given keys (shown below).\nWhere the values match the array, the index of the\nmatching array element is returned.\nWhat I want to do is instead of searching a predefined constant array,\nI want to search through an array that is read from a file, or in this case data.\nThe working code is below for the constant array.</p>\n\n<pre><code>my @fields = ('Account No.','name1','name2','location'); #array being searched\nmy $hm = \"header_map.txt\"; #declare variable to file\nmy $fh = (readfile($hm));  #declare variable to sub routine call\n\nmy $address_header = 'address_header'; #my given key\nmy $address = hashofarray($fh,$address_header); #looking for($fh,key) in sub\nmy $account_number_header = 'account_number_header'; #my given key\nmy $account_number = hashofarray($fh,$account_number_header); #looking for($fh,key) in sub\nprint $address,\",\",$account_number,\"\\n\"; #prints desired array indexes of given keys\n\nsub hashofarray {\n    my $fh = shift;\n    my $key = shift;\n    my %hash;\n    while (&lt;$fh&gt;) { # creating HoA\n        chomp;\n        my ( $key, $value  ) = split /\\t/;\n        push (@{ $header_map{$key} }, $value);\n    }\n    foreach my $key1 (@{$header_map{$key}}) {\n        if (my @index = grep { $fields[$_] eq $key1 } 0..$#fields) {\n            return $index[0];\n        }\n    }\n}\n\nsub readfile {\n    my $file = shift;\n    open my $f, '&lt;', $file or die $!;\n    return $f;\n}\n</code></pre>\n\n<p><strong>RESULTS</strong></p>\n\n<pre><code>location,Account No.\n</code></pre>\n\n<p>This is good and what I want, however I would like to read the array @fields from DATA file instead.\nHere is my attempt while reading DATA.</p>\n\n<p><strong>Failed Attempt</strong></p>\n\n<pre><code>my $hm = \"O:/josh/trade_data/mock_header_map.txt\"; # declare variable to file\nmy $fh = (readfile($hm)); # declare variable to sub routine call\n\nwhile (&lt;DATA&gt;) { # calling the subroutine after reading DATA\n    my @fields = split /\\t/;\n    my $address_header = 'address_header'; # my given key\n    my $address = hashofarray($fh, $address_header); # looking for($fh, key) in sub\n    my $account_number_header = 'account_number_header'; # my given key\n    # looking for($fh, key) in sub\n    my $account_number = hashofarray($fh, $account_number_header);\n    # prints desired array indexes of given keys\n    print $address, \",\", $account_number, \"\\n\";\n}\n\nsub hashofarray {\n    my $fh = shift;\n    my $key = shift;\n    my %hash;\n    while (&lt;$fh&gt;) {  #creating HoA\n        chomp;\n        my ( $key, $value  ) = split /\\t/;\n        push (@{ $header_map{$key} }, $value);\n    }\n    foreach my $key1 (@{$header_map{$key}}) {\n        if(my @index = grep { $fields[$_] eq $key1 } 0..$#fields) {\n            return $index[0];\n        } else {\n            print \"not found\";\n        }\n    }\n}\n\nsub readfile {\n    my $file = shift;\n    open my $f, '&lt;', $file or die $!;\n    return $f;\n}\n\n\n__DATA__\nAccount No  name1   name2   location\n1   josh    smith   411 s chirris ave. sometown st 12345\n1   josh    smith   411 s chirris ave. sometown st 12345\n1   josh    smith   411 s chirris ave. sometown st 12345\n1   josh    smith   411 s chirris ave. sometown st 12345\n</code></pre>\n\n<p><strong>My results</strong></p>\n\n<pre><code>,\n,\n,\n,\n,\n</code></pre>\n\n<p><strong>Desired Results</strong></p>\n\n<pre><code>1   411 s chirris ave. sometown st 12345\n1   411 s chirris ave. sometown st 12345\n1   411 s chirris ave. sometown st 12345\n1   411 s chirris ave. sometown st 12345\n</code></pre>\n\n<p>In the end, I would like to print the desired columns, which I would be able to do if I could read DATA into the array, instead I am getting empty strings   because the sub does not recognize @fields.\nI know I need to do something with array refernces but I'm a little off on those..any suggestions?  I hope this is clear.</p>\n"}, {"tags": ["perl", "stdin"], "comments": [{"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 3, "creation_date": 1432933641, "post_id": 30538865, "comment_id": 49151454, "body": "The reason the example program is correct is that the example program is about <code>-i.orig</code>, not about <code>-i</code> with no extension. I don&#39;t know why you expect the example program to behave like <code>-i</code> if you merely delete the <code>.orig</code> inside the program. (That&#39;s like seeing <code>5 * 5 == 25</code> and assuming that therefore <code>8 * 8 == 28</code>.) Its correctness has nothing to do with the &quot;and your system supports it&quot; clause, which is about whether your system supports keeping an open handle to an unlinked file."}, {"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 1, "creation_date": 1432933669, "post_id": 30538865, "comment_id": 49151468, "body": "(By the way, it&#39;s not <code>-i &#39;&#39;</code>, but just bare <code>-i</code> with no argument. And string comparison uses <code>eq</code>, not <code>==</code>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1432933858, "post_id": 30538865, "comment_id": 49151541, "body": "Though you could write it <code>-i&#39;&#39;</code>."}, {"owner": {"reputation": 764, "user_id": 66184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77Hll.jpg?s=128&g=1", "display_name": "Cary Millsap", "link": "https://stackoverflow.com/users/66184/cary-millsap"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 1, "creation_date": 1432935318, "post_id": 30538865, "comment_id": 49152163, "body": "@ruakh, I&#39;m sensitive to your point about <code>5 * 5</code>, but this is an example that is supposed to show how Perl works, and I don&#39;t think that it is irrational to have felt a little bit misled by the example. To follow your analogy, it&#39;s as if you told me that some function <code>f(a, b)</code> for <code>(a, b) = (5, 5)</code> is &quot;equivalent to&quot; the code <code>a * b</code>, but not mentioning that the code is different when <code>a</code> and <code>b</code> have other permissible values."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1432935602, "post_id": 30538865, "comment_id": 49152265, "body": "Are you actually trying to use this code in a script, or are you simply curious how <code>-i</code> works? If the former, you can include flags on the shebang line, e.g. <code>#!&#47;usr&#47;bin&#47;perl -pi</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1432935722, "post_id": 30538865, "comment_id": 49152315, "body": "No. It&#39;s supposed to show how <code>perl -p -i.orig -e &#39;s&#47;foo&#47;bar&#47;;&#39;</code> works."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1432935417, "post_id": 30539016, "comment_id": 49152193, "body": "and cygwin just quietly defaults bare -i to mean -i.bak (presumably for better support of existing shell scripts)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1432935615, "post_id": 30539016, "comment_id": 49152270, "body": "@ysth, Then odd thing is that the unlink trick works in cygwin. (No idea how.) Maybe it didn&#39;t used to work? Or maybe there&#39;s some limitations?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1432937386, "post_id": 30539016, "comment_id": 49152991, "body": "it&#39;s been a long time, so I probably misremember, but it was something like setting a delete on close flag in via the win32 api or actually deleting it in an exit handler or both?  and maybe with limitations (another process having it open too?)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1432937432, "post_id": 30539016, "comment_id": 49153007, "body": "@ysth, That wouldn&#39;t work. The file needs to be gone before it&#39;s closed. I&#39;m guessing it renames it to somewhere else on the disk."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1432937878, "post_id": 30539016, "comment_id": 49153151, "body": "I don&#39;t think it used to, see e.g. <a href=\"http://permalink.gmane.org/gmane.os.cygwin/79103\" rel=\"nofollow noreferrer\">permalink.gmane.org/gmane.os.cygwin/79103</a>.  But the cygwin source file cited there doesn&#39;t exist anymore, so maybe windows actually supports it now?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1432939406, "post_id": 30539016, "comment_id": 49153665, "body": "@ysth, If it used that, that explains the hack in Perl."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 12, "last_activity_date": 1550581893, "last_edit_date": 1550581893, "creation_date": 1432933378, "answer_id": 30539016, "question_id": 30538865, "link": "https://stackoverflow.com/questions/30538865/how-is-perl-i-really-implemented/30539016#30539016", "title": "How is perl -i *really* implemented?", "body": "<p><em>Perl 5.28 <a href=\"https://metacpan.org/pod/distribution/perl/pod/perl5280delta.pod#In-place-editing-with-perl-i-is-now-safer\" rel=\"nofollow noreferrer\">changed <code>-i</code></a>. This answer pertains to earlier versions of Perl.</em></p>\n\n<hr>\n\n<p>When an extension is provided:</p>\n\n<pre><code>open(my $fh_in,  '&lt;', $qfn);\nrename($qfn, \"$qfn$ext\");\nopen(my $fh_out, '&gt;', $qfn);\n</code></pre>\n\n<p>This can be seen using <code>strace</code>.</p>\n\n<pre><code>$ strace perl -i~ -pe1 a\n...\nopen(\"a\", O_RDONLY)                     = 3\nrename(\"a\", \"a~\")                       = 0\nopen(\"a\", O_WRONLY|O_CREAT|O_EXCL, 0600) = 4\n...\n</code></pre>\n\n<hr>\n\n<p>When no extension is provided:</p>\n\n<pre><code>open(my $fh_in,  '&lt;', $qfn);\nunlink($qfn);\nopen(my $fh_out, '&gt;', $qfn);\n</code></pre>\n\n<p>This can be seen using <code>strace</code>.</p>\n\n<pre><code>$ strace perl -i -pe1 a\n...\nopen(\"a\", O_RDONLY)                     = 3\nunlink(\"a\")                             = 0\nopen(\"a\", O_WRONLY|O_CREAT|O_EXCL, 0600) = 4\n...\n</code></pre>\n\n<hr>\n\n<p>Unix systems such as Macs support anonymous files. Windows does not, so <code>-i</code> requires an extension there.</p>\n\n<pre><code>&gt;perl -i.bak -pe1 a\n\n&gt;perl -i -pe1 a\nCan't do inplace edit without backup.\n</code></pre>\n\n<hr>\n\n<p>If we integrate this knowledge in the code you posted, we get the following:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $extension = '.orig';\nmy $oldargv = '';\nmy $backup;\nLINE: while (&lt;&gt;) {\n    if ($ARGV ne $oldargv) {\n        if (length($extension)) {\n            if ($extension !~ /\\*/) {\n                $backup = $ARGV . $extension;\n            } else {\n                ($backup = $extension) =~ s/\\*/$ARGV/g;\n            }\n            rename($ARGV, $backup);\n        } else {\n            die(\"Can't do inplace edit without backup.\\n\") if $^O eq 'MSWin32';\n            unlink($ARGV);\n        }\n        open(ARGVOUT, \"&gt;$ARGV\");\n        select(ARGVOUT);\n        $oldargv = $ARGV;\n    }\n    # Don't change anything; just copy.\n}\ncontinue {\n    print;\n}\nselect(STDOUT);\n</code></pre>\n"}], "owner": {"reputation": 764, "user_id": 66184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77Hll.jpg?s=128&g=1", "display_name": "Cary Millsap", "link": "https://stackoverflow.com/users/66184/cary-millsap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 30539016, "answer_count": 1, "score": 7, "last_activity_date": 1550581893, "creation_date": 1432932772, "last_edit_date": 1432934369, "question_id": 30538865, "link": "https://stackoverflow.com/questions/30538865/how-is-perl-i-really-implemented", "title": "How is perl -i *really* implemented?", "body": "<p>In the description of the Perl <code>-i[extension]</code> feature at <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"noreferrer\">http://perldoc.perl.org/perlrun.html</a>, code that is materially identical to the following program is given as \"an equivalent\" to using <code>perl -pi.orig ...</code>:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $extension = '.orig';\nmy $oldargv = '';\nmy $backup;\nLINE: while (&lt;&gt;) {\n    if ($ARGV ne $oldargv) {\n        if ($extension !~ /\\*/) {\n            $backup = $ARGV . $extension;\n        } else {\n            ($backup = $extension) =~ s/\\*/$ARGV/g;\n        }\n        rename($ARGV, $backup);\n        open(ARGVOUT, \"&gt;$ARGV\");\n        select(ARGVOUT);\n        $oldargv = $ARGV;\n    }\n    # Don't change anything; just copy.\n}\ncontinue {\n    print;\n}\nselect(STDOUT);\n</code></pre>\n\n<p>This works fine when <code>$extension eq '.orig'</code>; however, Perl defines <code>-i</code> with no extension as well (that is, for <code>$extension eq ''</code>). Perl's defined behavior is to edit the file in place, with no backup file created:</p>\n\n<blockquote>\n  <p>If no extension is supplied, and your system supports it, the original\n  file is kept open without a name while the output is redirected to a\n  new file with the original filename. When perl exits, cleanly or not,\n  the original file is unlinked.</p>\n</blockquote>\n\n<p>Perhaps my system (Mac OS X Yosemite 10.10.3) doesn't support it.</p>\n\n<p>If I set <code>$extension = ''</code> in this program, then the code will work fine for files smaller than one block of STDIN (4096 bytes in AcivePerl 5.10, but 8192 bytes by ActivePerl 5.16), but it will <strong>not</strong> work for files larger than one block.</p>\n\n<p>It looks to me that, on my system, if <code>$ARGV</code> and <code>$backup</code> have the same value (which they will if <code>$extension eq ''</code>, then the <code>open(ARGVOUT, \"&gt;$ARGV\")</code> call on line 17 clobbers the input file after one block of it has been read.</p>\n\n<p>I can work around this, of course, by writing to a temporary file and then renaming it at the end. But I'm a bit disappointed, after a couple hours of debugging, that the example in perlrun isn't as general-purpose as I had expected.</p>\n\n<ol>\n<li><p>Is there a standard, idiomatic way to deal with the <code>$extension eq ''</code> case?</p></li>\n<li><p>Is this <code>$extension eq ''</code> use-case important enough that perlrun should be edited? Of course, the \"and your system supports it\" clause means that the example is not incorrect, but the example would be more useful if it covered this case, too.</p></li>\n</ol>\n"}, {"tags": ["jquery", "ajax", "perl", "jquery-forms-plugin"], "comments": [{"owner": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "edited": false, "score": 0, "creation_date": 1432932034, "post_id": 30537007, "comment_id": 49150723, "body": "What do you mean the page refreshes? What are the HTTP headers?"}, {"owner": {"reputation": 21, "user_id": 616258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b94e526248dff85243f5862427db9e1?s=128&d=identicon&r=PG", "display_name": "user616258", "link": "https://stackoverflow.com/users/616258/user616258"}, "reply_to_user": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "edited": false, "score": 0, "creation_date": 1432947393, "post_id": 30537007, "comment_id": 49155418, "body": "I get a fresh version of the page, with no data. HTTPS"}, {"owner": {"reputation": 21, "user_id": 616258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b94e526248dff85243f5862427db9e1?s=128&d=identicon&r=PG", "display_name": "user616258", "link": "https://stackoverflow.com/users/616258/user616258"}, "reply_to_user": {"reputation": 4400, "user_id": 1452951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa59033112232be3423b6643c697816?s=128&d=identicon&r=PG", "display_name": "Dondi Michael Stroma", "link": "https://stackoverflow.com/users/1452951/dondi-michael-stroma"}, "edited": false, "score": 0, "creation_date": 1433102640, "post_id": 30537007, "comment_id": 49195438, "body": "Well, I inadvertently figured out what the problem was. It was a sneaky one! The issue is using both jquery form validation and the form plugin. I installed them separately. I was working on some customer changes and realized that BOTH validation AND the form plugin were submitting! It was due to timing issues that gave me 2 different paths to the page refreshing, especially since I was calling the valid() method in the ajaxsubmit function for the beforeSubmitting event! So validation was called twice, the second time to do it&#39;s own submit. My solution, remove the validation submit."}], "owner": {"reputation": 21, "user_id": 616258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b94e526248dff85243f5862427db9e1?s=128&d=identicon&r=PG", "display_name": "user616258", "link": "https://stackoverflow.com/users/616258/user616258"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432939111, "creation_date": 1432925500, "question_id": 30537007, "link": "https://stackoverflow.com/questions/30537007/jquery-forms-ajaxsubmit-refreshes-before-result-returns-but-during-debug-resul", "title": "jQuery Forms ajaxsubmit refreshes before result returns, but during debug, result displayed briefly then page refreshes(not wanted)", "body": "<p>Apache on Windows 7.</p>\n\n<p>I want to submit form to Perl cgi to save data in MySQL, returning json results (No \"Location\" returns!). If I don't put a js break point in, the page refreshes before the response is received. If I do breakpoint it, the response is received. The results are posted briefly, but then the page refreshes, which I don't want to happen!</p>\n\n<p>Standard form, no file upload</p>\n\n<p>ajaxSubmit options:</p>\n\n<pre><code>var formApplyOptions = {\n    url: \"/cgi-bin/saveApplicant.cgi\",\n    beforeSubmit: formValidate,\n    dataType: \"json\",\n    target: \"#applyResponse\",\n    success: showReceivedApplicant,\n    error: showError\n};\n</code></pre>\n\n<p>Form submit button function:</p>\n\n<pre><code>    $('#formData').submit(function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        alert(\"El Oh!\");\n        $('#formData').ajaxSubmit(formApplyOptions); \n    })\n</code></pre>\n\n<p>showError:</p>\n\n<pre><code>function showError(xhr, ajaxOptions, thrownError) {\n    //showResponse(responseText, statusText, xhr, $form);\n    $('div#errorMsg').text(\"responseText: \" + xhr.responseText \n      + \", textStatus: \" + xhr.statusText \n      + \", errorThrown: \" + thrownError);\n    $('div#error , form#formData').addClass(\"error\");\n}\n</code></pre>\n\n<p>showReceivedApplicant:</p>\n\n<pre><code>function showReceivedApplicant(data, statusText, xhr, $form) {\n    if (data.error) { // script returned data error\n      $('div#error').text(\"data.error: \" + data.error + \",\\n\"\n            + 'status: ' + statusText);\n      $('div#error, form#formData').addClass(\"error\");\n    } // if\n    else if (data.success) {\n        $('#applyResponse').append(data.success);\n        $('#formData').hide();\n        $('#received').show();\n    } //else\n}\n</code></pre>\n\n<p>formValidate:</p>\n\n<pre><code>function formValidate(formData, jqForm, options) { \n    return $('#formData').valid();\n}\n</code></pre>\n\n<p>One thing I did notice in my tracing: it seems that the responses are being handled by the functions, but when I used a non-minified version of jQuery, the jQuery.js code that runs right before the refresh is around 8605:</p>\n\n<pre><code>        complete(\n            xhrSuccessStatus[ xhr.status ] || xhr.status,\n            xhr.statusText,\n            // Support: IE9\n            // Accessing binary-data responseText throws an exception\n            // (#11426)\n            typeof xhr.responseText === \"string\" ? {\n                text: xhr.responseText\n            } : undefined,\n            xhr.getAllResponseHeaders() &lt;-----\n        );\n</code></pre>\n\n<p>Also at about 8278 jquery completes deferred callbacks(I think?)</p>\n\n<p>After this section of code, the page refreshes. I haven't been able to figure it out.</p>\n\n<p>I know it's probably something silly or stupid, but after 2 days of staring at this code, it's time for some fresh eyes.</p>\n\n<p>Any help will be greatly appreciated!</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1432920051, "post_id": 30535494, "comment_id": 49144617, "body": "I assume you&#39;re talking about <a href=\"http://perldoc.perl.org/File/Find.html#The-wanted-function\" rel=\"nofollow noreferrer\"><code>File::Find</code></a>?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1432920589, "post_id": 30535494, "comment_id": 49144877, "body": "Also, please explain what <code>$param1</code>, <code>$param2</code>, and the return value are supposed to represent. What exactly are you trying to accomplish?"}, {"owner": {"reputation": 2778, "user_id": 1165251, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28349ec7345e8736d64985993c4a753e?s=128&d=identicon&r=PG", "display_name": "mica", "link": "https://stackoverflow.com/users/1165251/mica"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1432920812, "post_id": 30535494, "comment_id": 49145003, "body": "I want to control the wantedFunction with parameters. For Example I want to calculate the minimal LEvenstein Distance for a given file, this file wold be an input parameter, the output would be the actual minimum Levenshtein Distanance and the corresponding found file."}], "answers": [{"comments": [{"owner": {"reputation": 2778, "user_id": 1165251, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28349ec7345e8736d64985993c4a753e?s=128&d=identicon&r=PG", "display_name": "mica", "link": "https://stackoverflow.com/users/1165251/mica"}, "edited": false, "score": 0, "creation_date": 1432921198, "post_id": 30535750, "comment_id": 49145233, "body": "Tnx: could you please explain what sub { push @found, wanted() } is syntactically"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 2778, "user_id": 1165251, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28349ec7345e8736d64985993c4a753e?s=128&d=identicon&r=PG", "display_name": "mica", "link": "https://stackoverflow.com/users/1165251/mica"}, "edited": false, "score": 1, "creation_date": 1432921388, "post_id": 30535750, "comment_id": 49145334, "body": "<code>sub foo { ... }</code> is basically <code>*foo = sub { ... }</code>, and when you do <code>\\&amp;foo</code>, you get the value <code>sub</code> returned. I simply skipped giving the sub a name."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1432922369, "post_id": 30535750, "comment_id": 49145879, "body": "<code>sub {...}</code> defines an anonymous sub and returns a reference to it, just like <code>[...]</code> or <code>{...}</code> define anonymous arrays and hashes and return references to them"}, {"owner": {"reputation": 2778, "user_id": 1165251, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28349ec7345e8736d64985993c4a753e?s=128&d=identicon&r=PG", "display_name": "mica", "link": "https://stackoverflow.com/users/1165251/mica"}, "edited": false, "score": 0, "creation_date": 1432924295, "post_id": 30535750, "comment_id": 49146957, "body": "Aren&#180;t ($param1, $param2, @found) kind of &quot;global&quot; in that file?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1432928198, "post_id": 30535750, "comment_id": 49148879, "body": "In the first snippet, yeah, which is part of why it&#39;s bad and why I recommended against it"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1432928416, "last_edit_date": 1432928416, "creation_date": 1432920898, "answer_id": 30535750, "question_id": 30535494, "link": "https://stackoverflow.com/questions/30535494/how-to-put-parameters-into-finds-wanted-function-and-get-a-return/30535750#30535750", "title": "How to put parameters into finds &quot;wanted function&quot; and get a return", "body": "<p>You could use the following:</p>\n\n<pre><code>my ($param1, $param2, @found);\nsub wanted {\n   push @found, $_\n      if is_within_lev_dist($_, $param1, $param2);\n}\n\n@found = ();\n($param1, $param2) = (..., ...);\nfind(\\&amp;wanted, $dir);\nsay for @found;\n</code></pre>\n\n<p>But that's suffers from <a href=\"https://en.wikipedia.org/wiki/Coupling_%28computer_programming%29\" rel=\"nofollow\">tight coupling</a>. I far prefer the following:</p>\n\n<pre><code>my @found;\nfind(sub {\n   push @found, $_\n      if is_within_lev_dist($_, $param1, $param2)\n}, $dir);\nsay for @found;\n</code></pre>\n\n<hr>\n\n<p><code>is_within_lev_dist</code> would look like</p>\n\n<pre><code>sub is_within_lev_dist {\n   my ($path, $param1, $param2) = @_;\n   ...\n   return $true_or_false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1432928342, "last_edit_date": 1432928342, "creation_date": 1432923921, "answer_id": 30536590, "question_id": 30535494, "link": "https://stackoverflow.com/questions/30535494/how-to-put-parameters-into-finds-wanted-function-and-get-a-return/30536590#30536590", "title": "How to put parameters into finds &quot;wanted function&quot; and get a return", "body": "<p>Bear in mind that when you're calling a sub repeatedly with <code>File::Find</code> then there will be multiple return codes. I'm not sure if you can easily \"capture\" that return code in the conventional sense. You could, however, pass in an array (or scope one) that holds the results. </p>\n\n<p>The general idiom for passing parameters <em>into</em> a callback sub (such as in <code>File::Find</code> or <code>XML::Twig</code>) is to wrap it in an anonymous sub - passing the arguments through. (Normally, theses are in <code>@_</code>, but File::Find uses <code>$_</code> to pass the path to the callback.)</p>\n\n<p>E.g.</p>\n\n<pre><code>sub wanted {\n    my ( $param1, $param2, $path ) = @_;\n}\n\nfind ( sub { wanted ( \"first\", \"second\", $_ ) }, \"/path/to/find\";\n</code></pre>\n\n<p>This way you create a mini anonymous subroutine (with no name) that just calls <code>wanted</code> with some extra parameters. </p>\n\n<p>For capturing the results - there's a variety of answers. Personally I think the simplest is a results array or hash (depending on exactly what you're trying to accomplish) that you update within your <code>wanted</code> sub. </p>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 1, "last_activity_date": 1432938180, "last_edit_date": 1495535212, "creation_date": 1432938180, "answer_id": 30539959, "question_id": 30535494, "link": "https://stackoverflow.com/questions/30535494/how-to-put-parameters-into-finds-wanted-function-and-get-a-return/30539959#30539959", "title": "How to put parameters into finds &quot;wanted function&quot; and get a return", "body": "<p>People have <a href=\"https://stackoverflow.com/q/12620423/176646\">asked</a> about returning values from <code>File::Find::find</code> before; it's easy enough to use an anonymous subroutine or a closure as <a href=\"https://stackoverflow.com/a/30535750/176646\">ikegami</a> and <a href=\"https://stackoverflow.com/a/30536590/176646\">Sobrique</a> described, but another common suggestion is to use a module like <a href=\"https://metacpan.org/pod/File::Finder\" rel=\"nofollow noreferrer\"><code>File::Finder</code></a>, which I think has a slightly cleaner interface.</p>\n\n<p>The following creates a hash of paths inside <code>/tmp</code> to their corresponding Levenshtein distance from a fixed string:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse Data::Dump;\nuse File::Find;\nuse File::Finder;\nuse Text::Levenshtein qw(distance);\n\nmy $start = '/tmp/foo';\n\nmy %distances = File::Finder-&gt;collect(\n    sub { $File::Find::name =&gt; distance($start, $File::Find::name) },\n    '/tmp'\n);\n\ndd \\%distances;\n</code></pre>\n\n<h3>Output:</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>{ \n  \"/tmp\" =&gt; 4,\n  \"/tmp/fie\" =&gt; 2,\n  \"/tmp/foe\" =&gt; 1,\n  \"/tmp/foo\" =&gt; 0,\n  \"/tmp/fum\" =&gt; 2,\n}\n</code></pre>\n"}], "owner": {"reputation": 2778, "user_id": 1165251, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/28349ec7345e8736d64985993c4a753e?s=128&d=identicon&r=PG", "display_name": "mica", "link": "https://stackoverflow.com/users/1165251/mica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 30539959, "answer_count": 3, "score": -1, "last_activity_date": 1432938180, "creation_date": 1432919966, "question_id": 30535494, "link": "https://stackoverflow.com/questions/30535494/how-to-put-parameters-into-finds-wanted-function-and-get-a-return", "title": "How to put parameters into finds &quot;wanted function&quot; and get a return", "body": "<p>I am rather new to perl.\nI have a find function to travers a directory structure which has a \"wanted function\" which is called for each found file.</p>\n\n<p>I want to put in parameters into that \"wanted function\" and get back a return value.</p>\n\n<p>I solved that with global variables and it works, but I don\u00b4t like the code ;-)</p>\n\n<pre><code>$param1 = \"value\";\n$param2 = \"value2\";\nfind(\\&amp;wantedFunction , $directory);\nprint $returnValue;\n\nsub wantedFunction\n{ #do something with $param1 and $param2\n  $returnValue = f1($param1);\";\n}\n</code></pre>\n\n<p>Is there a better way to do that?</p>\n"}, {"tags": ["perl", "dbi"], "answers": [{"comments": [{"owner": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 1, "creation_date": 1432919555, "post_id": 30535276, "comment_id": 49144323, "body": "As a small point, it&#39;s not clear that the Oracle engine throws ORA-00903 on the substituted identifier (on <code>&#39;DEV&#39;.HOSTGROUPS</code>), or whether it ignores the placeholder in a place placeholders can&#39;t be and errors on the unsubstituted identifier (<code>:p1.HOSTGROUPS</code>).  From the error message I&#39;d expect the latter.  Bad schema name specification, in any case."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 51391, "user_id": 132382, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/20fc7ee8f405aa42e36eb73e841e5a36?s=128&d=identicon&r=PG", "display_name": "pilcrow", "link": "https://stackoverflow.com/users/132382/pilcrow"}, "edited": false, "score": 0, "creation_date": 1432920516, "post_id": 30535276, "comment_id": 49144837, "body": "@pilcrow, I never claimed the substitution actually takes place. I just explained what the <code>?</code> <i>means</i>, and how it makes no sense to place it there."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1432919126, "creation_date": 1432919126, "answer_id": 30535276, "question_id": 30533814, "link": "https://stackoverflow.com/questions/30533814/perl-dbi-set-schema-name-as-bind-variable-in-query/30535276#30535276", "title": "Perl DBI - Set schema name as bind variable in query", "body": "<pre><code>SELECT * FROM Table WHERE X = ?\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>SELECT * FROM Table WHERE X = 'DEV'\n</code></pre>\n\n<p>so</p>\n\n<pre><code>MERGE INTO ?.HOSTGROUPS .... \n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>MERGE INTO 'DEV'.HOSTGROUPS ...\n</code></pre>\n\n<p>while you want</p>\n\n<pre><code>MERGE INTO DEV.HOSTGROUPS ...\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>\"MERGE INTO \".$dbh-&gt;quote_identifier($schema).\".HOSTGROUPS ...\"\n</code></pre>\n"}], "owner": {"reputation": 251, "user_id": 3816676, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ebf5d39c8f5ed5d9c5db30745464c2e4?s=128&d=identicon&r=PG&f=1", "display_name": "YonkeyDonk64", "link": "https://stackoverflow.com/users/3816676/yonkeydonk64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432919126, "creation_date": 1432914395, "question_id": 30533814, "link": "https://stackoverflow.com/questions/30533814/perl-dbi-set-schema-name-as-bind-variable-in-query", "title": "Perl DBI - Set schema name as bind variable in query", "body": "<p>I'm writing a script that executes the same merge statement across several different databases. The tables names and columns are the same in each schema I am connecting to, but the schema names themselves are different. Rather than define two separate queries, what I would prefer to do is define one merge statement as a string with the schema name set to '?', and then pass in the needed schema name during execution:</p>\n\n<p><code>my $hostgroup_merge = \"MERGE INTO ?.HOSTGROUPS .... \";</code></p>\n\n<p>And then later:</p>\n\n<pre><code>my $dev_schema  = 'DEV';\nmy $prod_schema = 'PROD';\n\n#do the merge in the dev schema\nmy $dbh = DBI-&gt;connect($dev_server,$user,$pass);\nmy $sth = $dbh-&gt;prepare($hostgroup_merge);\n$sth-&gt;execute($dev_schema);\n$sth-&gt;finish();\n$dbh-&gt;disconnect;\n\n#now do the same merge for the prod schema\n$dbh = DBI-&gt;connect($prod_server,$user,$pass);\n$sth = $dbh-&gt;prepare($hostgroup_merge);\n$sth-&gt;execute($prod_schema);\n$sth-&gt;finish();\n$dbh-&gt;disconnect;\n</code></pre>\n\n<p>This fails with an invalid table name error:</p>\n\n<p><code>DBD::Oracle::st execute failed: ORA-00903: invalid table name (DBD ERROR: error possibly near &lt;*&gt; indicator at char 19 in '\n    MERGE INTO :p1&lt;*&gt;.HOSTGROUPS ...</code></p>\n\n<p>However, it seems to be picking up the bind variable just fine, since it spits this out after the query:</p>\n\n<p><code>\" with ParamValues: :p1='DEV']</code></p>\n\n<p>I know its the bind variable that's causing the problem, because when I define separate merge statements and hard-code the schema names in, they work just fine.</p>\n\n<p>Since the only thing that's changing is the variable in the very beginning, I could probably hack the query together by defining the non-changing part of the statement in a string, and then concatenating the rest:</p>\n\n<p><code>my $dev_merge = 'MERGE INTO ' . $dev_schema . $merge_statement;</code></p>\n\n<p>And then just run the <code>prepare</code> on that, but is there a legitimate way to pass in the name via the query? If so, can anybody point out what's going wrong here?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 0, "creation_date": 1609195718, "post_id": 30533752, "comment_id": 115775075, "body": "I tend to use (of many ways, indeed!)  <code>my $year = shift &#47;&#47; 2001;</code>"}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": true, "score": 4, "last_activity_date": 1432914199, "creation_date": 1432914199, "answer_id": 30533752, "question_id": 30533685, "link": "https://stackoverflow.com/questions/30533685/running-script-and-defining-object-value-in-terminal-window/30533752#30533752", "title": "Running script and defining object value in terminal window", "body": "<p>One way (of many ways) to do this is:</p>\n\n<pre><code>my $year = (@ARGV) ? shift : 2001;\n</code></pre>\n\n<p>Then run it as:</p>\n\n<pre><code>perl test1.pl 2002\n</code></pre>\n\n<p>2001 will be the defualt if you don't specify a year on the command line.  See also: <code>perldoc -v @ARGV</code></p>\n"}, {"comments": [{"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1433173760, "post_id": 30535610, "comment_id": 49225743, "body": "Awesome!  Thanks for the response! Seems useful. What&#39;s the difference between your suggestion sand the other answer?"}, {"owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "reply_to_user": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1433221841, "post_id": 30535610, "comment_id": 49244890, "body": "@user1500158 I have explained difference between them in my answer. I hope this will help you. Please tell me if you need any other explanation."}], "tags": [], "owner": {"reputation": 2269, "user_id": 3016716, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/wCaTR.jpg?s=128&g=1", "display_name": "shivams", "link": "https://stackoverflow.com/users/3016716/shivams"}, "is_accepted": false, "score": 2, "last_activity_date": 1433228567, "last_edit_date": 1433228567, "creation_date": 1432920386, "answer_id": 30535610, "question_id": 30533685, "link": "https://stackoverflow.com/questions/30533685/running-script-and-defining-object-value-in-terminal-window/30535610#30535610", "title": "Running script and defining object value in terminal window", "body": "<p>If you want to give arguments from command line i would highly suggest using <code>Getopt::Long</code> module. You can use code in this way </p>\n\n<pre><code>use strict;\nuse warnings;\nuse Getopt::Long;\n\nmy $year = 2001;\n\nGetOptions (\n      'year|y=i' =&gt; \\$year\n);\n\nprint \"$year\\n\";\n</code></pre>\n\n<p>You will call this script in this way <code>perl test1.pl -y 2002</code> or <code>perl test1.pl -y=2002</code> or <code>perl test1.pl --year=2002</code> or <code>perl test1.pl --year 2002</code>. </p>\n\n<p>Default value of <code>$year</code> will be 2001 and if script is called as <code>perl test1.pl</code> the 2001 will be printed. </p>\n\n<p>Also <code>i</code> in <code>year|y=i</code> means that perl will be expecting you to provide integer type and non-int type will generate error here. </p>\n\n<p><strong>EDIT AFTER COMMENT</strong></p>\n\n<p>Both answers can solve your problem. But i prefer using <code>Getopt</code> more than the other approach. Reason for this are :-</p>\n\n<ol>\n<li><p>Using <code>ARGV</code> approach user has to be specific in position of arguments. Instead in this approach one can put arguments at any position. <code>perl a.pl -y 2 -z 3</code> is same as <code>per a.pl -z 3 -y 2</code>. </p></li>\n<li><p>Give more confidence to user as he/she knows which argument is meant for what purpose (given argument name are relevant).</p></li>\n<li><p>If you are making something for other to use then this way help a lot. Using <code>help</code> as argument and explaining them using such argument is way better than explaining them to put this argument in first position and that argument in second.</p></li>\n</ol>\n\n<p>I think that both way of approaching to your problem will technically solve the issue but personally i prefer my approach. It is more clean and really good if you are making programs with lot of options. </p>\n"}], "owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30533752, "answer_count": 2, "score": 2, "last_activity_date": 1609184556, "creation_date": 1432913973, "last_edit_date": 1609184556, "question_id": 30533685, "link": "https://stackoverflow.com/questions/30533685/running-script-and-defining-object-value-in-terminal-window", "title": "Running script and defining object value in terminal window", "body": "<p>When I run Perl scripts, I open up the Terminal window on my Mac and write &quot;<code>perl test1.pl</code>&quot; after moving to the folder containing the Perl script.</p>\n<p>Often I find myself wanting to run the same Perl many times, usually at the same time, but with very minor changes.</p>\n<p>For example say this Perl script &quot;<code>test1.pl</code>&quot; looks like this:</p>\n<pre><code>$year = 2001;\n&lt;rest of code that uses $year&gt;\n</code></pre>\n<p>I want to execute &quot;test1.pl&quot; where $year = 2001, where $year = 2002, etc. To do this I usually run the script where $year = 2001, then adjust the script so $year = 2002, save, open new terminal window, run again, repeat.</p>\n<p>Is there a way to submit the Perl script by designating in the terminal window the value for <code>$year</code>?</p>\n<p>I'm thinking something like:</p>\n<pre><code>perl test1.pl, $year = 2001\n</code></pre>\n"}, {"tags": ["python", "regex", "perl", "loops"], "comments": [{"owner": {"reputation": 4514, "user_id": 4248931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HijcJ.png?s=128&g=1", "display_name": "serenesat", "link": "https://stackoverflow.com/users/4248931/serenesat"}, "edited": false, "score": 0, "creation_date": 1432907224, "post_id": 30531187, "comment_id": 49136021, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/6063605/whats-the-fastest-way-to-count-the-number-of-words-in-a-string-in-perl\">What&#39;s the fastest way to count the number of words in a string in Perl?</a>"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1432908206, "post_id": 30531187, "comment_id": 49136752, "body": "do you match case, exact matches etc..? Also what about foo and foo!, are they both considered a match to foo?"}, {"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "reply_to_user": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1432908507, "post_id": 30531187, "comment_id": 49136969, "body": "@PadraicCunningham, usually I&#39;ve cleaned out all of the punctuation and changed the case of all the characters to be lower case."}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1432908537, "post_id": 30531187, "comment_id": 49136989, "body": "Then it is two lines in python, do you want to count more than one word?"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1432908679, "post_id": 30531187, "comment_id": 49137102, "body": "Also are the words on single lines or how are the delimited?"}, {"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "reply_to_user": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1432908774, "post_id": 30531187, "comment_id": 49137174, "body": "@PadraicCunningham words can be on many lines, separated by a \\n."}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1432908795, "post_id": 30531187, "comment_id": 49137197, "body": "@user1500158, but separated by whitespace?"}, {"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432909441, "post_id": 30531187, "comment_id": 49137641, "body": "yes, separated by a whitespace."}], "answers": [{"comments": [{"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432909169, "post_id": 30531825, "comment_id": 49137450, "body": "Cool! Definitely will look into this."}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432909233, "post_id": 30531825, "comment_id": 49137493, "body": "@user1500158, if you had one word per line you would use <code>counts = Counter(word.rstrip() for word in f</code>"}, {"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432909341, "post_id": 30531825, "comment_id": 49137567, "body": "If I had word phrases (e.g., &quot;word1 word2 word3&quot; I was looking for, this wouldn&#39;t work, right?"}, {"owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432909477, "post_id": 30531825, "comment_id": 49137664, "body": "@user1500158, it would be possible but would depend on the format of your file, if you were looking for phrases then a regex would probably be more appropriate, you could compile the regex to speed up the search"}], "tags": [], "owner": {"reputation": 159764, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1432910147, "last_edit_date": 1432910147, "creation_date": 1432908713, "answer_id": 30531825, "question_id": 30531187, "link": "https://stackoverflow.com/questions/30531187/perl-counting-many-words-in-many-strings-efficiently/30531825#30531825", "title": "Perl: counting many words in many strings efficiently", "body": "<p>If you have words separated by spaces use a <a href=\"https://docs.python.org/2/library/collections.html#collections.Counter\" rel=\"nofollow\">collections.Counter</a> dict using python to count all words:</p>\n\n<pre><code>from collections import Counter\n\nwith open(\"in.txt\") as f:\n    counts = Counter(word for line in f for word in line.split())\n</code></pre>\n\n<p>Then access by key to get the count of how many times each word appears for whatever words you want:</p>\n\n<pre><code> print(counts[\"foo\"])\n print(count[\"bar\"])\n .....\n</code></pre>\n\n<p>So one pass over the words in the file and you can get the count for all the words so if you have 1 or 10000 words to count you only have to build the dict once. Unlike  normal dicts any words/key that you try to access that are not in the dict won't raise a keyerror, <code>0</code> will be returned instead.</p>\n\n<p>If you wanted only certain words to be stored using a set to store the words you want to keep and doing a lookup for each word:</p>\n\n<pre><code>from collections import Counter\nwords = {\"foo\",\"bar\",\"foobar\"}\nwith open(\"out.txt\") as f:\n    counts = Counter(word for line in f for word in line.split() if word in words)\n</code></pre>\n\n<p>That would only store the count for the words in words, set lookups are on average <code>0(1)</code>.</p>\n\n<p>If you wanted to search for a phrase  then you could use sum and in but you would have to do it for each phrase so multiple passes over the file:</p>\n\n<pre><code>with open(\"in.txt\") as f:\n    count = sum(\"word1 word2 word3\"  in line for line in f)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432909990, "post_id": 30532111, "comment_id": 49138040, "body": "@Sobrique, two follow up questions. This is creating a hash where each key is a word from the word list, correct? Will this handle word phrases &quot;word5 word6 word7&quot; in the word list as well?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1432910111, "post_id": 30532111, "comment_id": 49138123, "body": "Essentially, yes. It will handle phrases, too because it&#39;s &#39;keying&#39; off the regular expression match. (Although, you can&#39;t use <code>qw</code> any more then :)) - although bear in mind because of the way regexes work, this won&#39;t work initially with overlapping phrases."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1432912144, "last_edit_date": 1432912144, "creation_date": 1432909492, "answer_id": 30532111, "question_id": 30531187, "link": "https://stackoverflow.com/questions/30531187/perl-counting-many-words-in-many-strings-efficiently/30532111#30532111", "title": "Perl: counting many words in many strings efficiently", "body": "<p>First off - what you're doing with <code>opendir</code> - I wouldn't and would suggest <code>glob</code> instead. </p>\n\n<p>And otherwise - there's another useful trick. Compile a regex for your \"words\". The reason this is useful, is because - with a variable in a regex, it needs to recompile the regex each time - in case the variable has changed. IF it's static, then you no longer need to. </p>\n\n<pre><code>use strict;\nuse warnings;\nuse autodie;\n\nmy @words = ( \"word1\", \"word2\", \"word3\", \"word4\", \"word5 word6\" );\nmy $words_regex = join( \"|\", map ( quotemeta, @words  ));\n$words_regex = qr/\\b($words_regex)\\b/;\n\nopen( my $output, \"&gt;\", \"/output/my_counts.csv\" );\n\nforeach my $file ( glob(\"/data/txt_files_for_counting\") ) {\n    open( my $input, \"&lt;\", $file );\n    my %count_of;\n    while (&lt;$input&gt;) {\n        foreach my $match (m/$words_regex/g) {\n            $count_of{$match}++;\n        }\n    }\n    print {$output} $file, \"\\n\";\n    foreach my $word (@words) {\n        print {$output} $word, \" =&gt; \", $count_of{$word} // 0, \"\\n\"; \n    }\n    close ( $input );\n}\n</code></pre>\n\n<p>With this approach - you no longer need to 'slurp' the whole file into memory in order to process it. (Which may not be as big an advantage, depending how large the files are). </p>\n\n<p>When fed data of:</p>\n\n<pre><code>word1\nword2\nword3 word4 word5 word6 word2 word5 word4\nword4 word5 word word 45 sdasdfasf\nword5 word6 \nsdfasdf\nsadf\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>word1 =&gt; 1\nword2 =&gt; 2\nword3 =&gt; 1\nword4 =&gt; 3\nword5 word6 =&gt; 2\n</code></pre>\n\n<p>I will note however - if you have overlapping substrings in your regex, then this won't work as is - it's possible though, you just need a different regex. </p>\n"}, {"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1432911631, "post_id": 30532286, "comment_id": 49139307, "body": "You are not able to count the occurances of each word with this, only the total number of hits for all words per file. That&#39;s not what the example output had."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1432911851, "post_id": 30532286, "comment_id": 49139483, "body": "@simbabque: Ye, the original prints the filename (without a following separator) and a list of word counts separated with commas and ending with a comma and a newline. I didn&#39;t really want to reproduce that, and I doubt if it&#39;s even close to what the OP needs"}, {"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432912339, "post_id": 30532286, "comment_id": 49139873, "body": "@Borodin I do need a CSV that has the counts for each word, not just the count of whether any of the words appear in the text string."}, {"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432912378, "post_id": 30532286, "comment_id": 49139909, "body": "@Borodin, Thanks for all of the advice!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432912701, "post_id": 30532286, "comment_id": 49140136, "body": "@user1500158: So presumbaly you want a comma after the file name (which may itself contain commas?) and no comma after the last word count? Is it okay for the counts to appear in isolation, without any way of tying them to their corresponding word?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432913034, "post_id": 30532286, "comment_id": 49140360, "body": "@user1500158: I think you need a much better problem description, including sample input file, sample word list, required output, and the code that you have written that gives the problem. You can&#39;t really keep coming up with <i>&quot;oh, and I&#39;d also like it to ...&quot;</i> as you&#39;re supposed to be a competent programmer with an insurmountable issue"}, {"owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "edited": false, "score": 0, "creation_date": 1432917914, "post_id": 30532286, "comment_id": 49143354, "body": "before executing this part of the perl script, I would have created a names line that has a variable name I can use to tie back to the word that is being counted."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 3, "last_activity_date": 1432911630, "last_edit_date": 1432911630, "creation_date": 1432909945, "answer_id": 30532286, "question_id": 30531187, "link": "https://stackoverflow.com/questions/30531187/perl-counting-many-words-in-many-strings-efficiently/30532286#30532286", "title": "Perl: counting many words in many strings efficiently", "body": "<p>Here's my take on how your code should be written. I'll spend a while explaining my choices and then update</p>\n\n<ul>\n<li><p><strong><em>Always</em></strong> <code>use strict</code> and <code>use warnings</code> at the top of <em>every</em> Perl program that you write. You will also have to <em>declare</em> every variable using <code>my</code> as close as possible to its first point of use. It is an essential habit to get into as it will reveal many simple errors. They are also <em>mandatory</em> before you ask for help, as without them  you will be seen to be negligent</p></li>\n<li><p>Don't comment source code that is self-evident. The encouragement to comment everything is a legacy from the 1970s, and has become an excuse for writing poor code. Most of the time, using identifiers and whitespace correctly will explain the function of your program far better than any comment </p></li>\n<li><p>You are correct to use the three-parameter form of <code>open</code>, but you should also use lexical file handles. And it is vital to check the result of every <code>open</code> and call <code>die</code> if it fails if the program cannot reasonably continue without access to the file. The <code>die</code> string must include the value of the variable <code>$!</code> to say <em>why</em> the <code>open</code> failed</p></li>\n<li><p>If your program opens many files then it is often more convenient to use the <code>autodie</code> pragma, which implicitly checks every IO operation for you</p></li>\n<li><p>You should read <a href=\"http://perldoc.perl.org/perlstyle.html\" rel=\"nofollow\"><code>perldoc perlstyle</code></a> to familiarise yourself with the format that most Perl prgrammers are comfortable with. Artifacts like</p>\n\n<pre><code>if ($file=~/^\\./)\n        {next;}\n</code></pre>\n\n<p>should be simply</p>\n\n<pre><code>next if $file =~ /^\\./;\n</code></pre></li>\n<li><p>You have caught onto the <code>do { local $/; ... }</code> idiom to read an entire file into memory but you have limited its scope. Your block</p>\n\n<pre><code>{\n    $P_file = $data_loc.\"/\".$file;\n    open (B, \"$P_file\") or die \"can't open the file: $P_file: $!\";\n    $text_of_txt_file = do {local $/; &lt;B&gt;}; \n    close B or die \"CANNOT CLOSE $P_file: $!\";      \n}\n</code></pre>\n\n<p>is better written</p>\n\n<pre><code>my $text_of_txt_file = do {\n  open my $fh, '&lt;', $file;\n  local $/;\n  &lt;$fh&gt;;\n};\n</code></pre></li>\n<li><p>Rather than looping over a list of words, it is faster and more concise to build a regular expression from your word list. My program below shows this</p></li>\n</ul>\n\n\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\nuse autodie;\n\nuse constant DATA_LOC    =&gt; '/data/txt_files_for_counting/';\nuse constant OUTPUT_FILE =&gt; '/output/my_counts.csv';\n\nmy @word_list = qw(word1 word2 word3 word4);\nmy $word_re   = join '|', map quotemeta, @word_list;\n$word_re      = qr/$word_re/;\n\nchdir DATA_LOC;\n\nmy @text_files = grep -f, glob '*.*';\n\nmy @find_counts;\n\nfor my $file ( @text_files ) {\n\n  next if $file =~ /^\\./;\n\n  my $text = do {\n    open my $in_fh, '&lt;', $file;\n    local $/;\n    &lt;$in_fh&gt;\n  }; \n\n  my $n_finds = $text =~ /\\b$word_re\\b/g;\n  push @find_counts, $n_finds;\n}\n\nopen my $out_fh, '&gt;', OUTPUT_FILE;\nprint $out_fh join(',', @find_counts), \"\\n\";\nclose $out_fh;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1432911178, "post_id": 30532550, "comment_id": 49138945, "body": "I wouldn&#39;t - that&#39;s exactly the kind of thing that gives <code>perl</code> a bad rep as a write-only language."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1432911342, "post_id": 30532550, "comment_id": 49139075, "body": "Why on earth would you prefer to write that?"}, {"owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "edited": false, "score": 0, "creation_date": 1432914212, "post_id": 30532550, "comment_id": 49141111, "body": "For portability:  First, I don&#39;t want these input file path and search words to be involved in a script file.  They should be passed from outside.  Second, couting words doesn&#39;t appear to the ultimate goal for me.  The output of this script could be compared with other files."}], "tags": [], "owner": {"reputation": 2749, "user_id": 482519, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff5fbaf09cb6d70cefb999871591b3de?s=128&d=identicon&r=PG", "display_name": "ernix", "link": "https://stackoverflow.com/users/482519/ernix"}, "is_accepted": false, "score": -3, "last_activity_date": 1432912171, "last_edit_date": 1432912171, "creation_date": 1432910691, "answer_id": 30532550, "question_id": 30531187, "link": "https://stackoverflow.com/questions/30531187/perl-counting-many-words-in-many-strings-efficiently/30532550#30532550", "title": "Perl: counting many words in many strings efficiently", "body": "<p>I would rather prefer using one-liner:</p>\n\n<p><code>$ for file in /data/txt_files_for_counting/*; do perl -F'/\\W+/' -nale 'BEGIN { @w = qw(word1 word2 word3 word4) } $h{$_}++ for map { $w = lc $_; grep { $_ eq $w } @w } @F; END { print join \",\", $ARGV, map { $h{$_} || 0 } @w; }' \"$file\"; done</code></p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1432933311, "last_edit_date": 1432933311, "creation_date": 1432913783, "answer_id": 30533628, "question_id": 30531187, "link": "https://stackoverflow.com/questions/30531187/perl-counting-many-words-in-many-strings-efficiently/30533628#30533628", "title": "Perl: counting many words in many strings efficiently", "body": "<p>Your biggest bottleneck is the speed at which data are read from the storage medium. <a href=\"http://www.nu42.com/2012/04/can-parallelforkmanager-speed-up.html\" rel=\"nofollow\">Using a small number of parallel processes</a>, your program may be able to read one file while processing others, thus speeding up the process. This is unlikely to yield any benefits unless the files themselves are large.</p>\n\n<p>Keep in mind, overlapping strings are hard. The code below prefers the longest match.</p>\n\n<h3>Non-parallelized version</h3>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse File::Spec::Functions qw( catfile );\nuse Text::CSV_XS;\n\ndie \"Need directory and extension\\n\" unless @ARGV == 2;\nmy ($data_dir, $ext) = @ARGV;\n\nmy $pat = join('|',\n    map quotemeta,\n    sort { (length($b) &lt;=&gt; length($a)) }\n    my @words = (\n        'Visual Studio',\n        'INCLUDE',\n        'Visual',\n    )\n);\n\nmy $csv= Text::CSV_XS-&gt;new;\n\nopendir my $dir, $data_dir\n    or die \"Cannot open directory: '$data_dir': $!\";\n\nmy %wanted_words;\n\nwhile (my $file = readdir $dir) {\n    next unless $file =~ /[.]\\Q$ext\\E\\z/;\n    my $path = catfile($data_dir, $file);\n    next unless -f $path;\n    open my $fh, '&lt;', $path\n        or die \"Cannot open '$path': $!\";\n    my $contents = do { local $/; &lt;$fh&gt; };\n    close $fh\n        or die \"Cannot close '$path': $!\";\n    while ($contents =~ /($pat)/go) {\n        $wanted_words{ $file }{ $1 } += 1;\n    }\n}\n\nfor my $file (sort keys %wanted_words) {\n    my $file_counts = $wanted_words{ $file };\n    my @fields = ($file, sort keys %$file_counts);\n    $csv-&gt;combine(@fields)\n        or die \"Failed to combine [@fields]\";\n    print $csv-&gt;string, \"\\n\";\n}\n</code></pre>\n\n<p>For a test, I ran the script in a directory containing some temporary batch files from a <a href=\"http://boost.org/\" rel=\"nofollow\">Boost</a> installation:</p>\n\n<pre>C:\\...\\Temp> perl count.pl . cmdb2_msvc_14.0_vcvarsall_amd64.cmd,INCLUDE,\"Visual Studio\"\nb2_msvc_14.0_vcvarsall_x86.cmd,INCLUDE,\"Visual Studio\"\nb2_msvc_14.0_vcvarsall_x86_arm.cmd,INCLUDE,\"Visual Studio\"</pre>\n\n<p>That is, all occurrences of <code>\"Visual\"</code> are ignored in favor of <code>\"Visual Studio\"</code>.</p>\n\n<p>For generating CSV output, you should use the <code>combine</code> method in <a href=\"https://metacpan.org/pod/Text::CSV_XS#combine\" rel=\"nofollow\">Text::CSV_XS</a>, instead of using <code>join(',' ...)</code>.</p>\n\n<h3>Version using Parallel::ForkManager</h3>\n\n<p>Whether this will get anything done faster depends on the sizes of the input files, and the speed of the storage medium. If there is an improvement, the <em>right</em> number of processes is likely to be between N/2 to N where N is the number of cores. I did not test this.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse File::Spec::Functions qw( catfile );\nuse Parallel::ForkManager;\nuse Text::CSV_XS;\n\ndie \"Need number of processes, directory, and extension\\n\" unless @ARGV == 3;\nmy ($procs, $data_dir, $ext) = @ARGV;\n\nmy $pat = join('|',\n    map quotemeta,\n    sort { (length($b) &lt;=&gt; length($a)) }\n    my @words = (\n        'Visual Studio',\n        'INCLUDE',\n        'Visual',\n    )\n);\n\nmy $csv= Text::CSV_XS-&gt;new;\n\nopendir my $dir, $data_dir\n    or die \"Cannot open directory: '$data_dir': $!\";\n\nmy $fm = Parallel::ForkManager-&gt;new($procs);\n\nENTRY:\nwhile (my $file = readdir $dir) {\n    next unless $file =~ /[.]\\Q$ext\\E\\z/;\n    my $path = catfile($data_dir, $file);\n    next unless -f $path;\n    my $pid = $fm-&gt;start and next ENTRY;\n\n    my %wanted_words;\n    open my $fh, '&lt;', $path\n        or die \"Cannot open '$path': $!\";\n    my $contents = do { local $/; &lt;$fh&gt; };\n    close $fh\n        or die \"Cannot close '$path': $!\";\n    while ($contents =~ /($pat)/go) {\n        $wanted_words{ $1 } += 1;\n    }\n    my @fields = ($file, sort keys %wanted_words);\n    $csv-&gt;combine(@fields)\n        or die \"Failed to combine [@fields]\";\n    print $csv-&gt;string, \"\\n\";\n    $fm-&gt;finish;\n}\n\n$fm-&gt;wait_all_children;\n</code></pre>\n"}], "owner": {"reputation": 342, "user_id": 1500158, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e6cdbca9fd45a591d46e5445d7383c4?s=128&d=identicon&r=PG", "display_name": "user1500158", "link": "https://stackoverflow.com/users/1500158/user1500158"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 30532111, "answer_count": 5, "score": 4, "last_activity_date": 1432933311, "creation_date": 1432906916, "last_edit_date": 1495539825, "question_id": 30531187, "link": "https://stackoverflow.com/questions/30531187/perl-counting-many-words-in-many-strings-efficiently", "title": "Perl: counting many words in many strings efficiently", "body": "<p>I often find myself needing to count the number of times words appear in a number of text strings. When I do this, I want to know how many times each word, individually, appears in each text string.</p>\n\n<p>I don't believe my approach is very efficient and any help you could give me would be great. </p>\n\n<p>Usually, I will write a loop that (1) pulls in a text from a txt file as a text string, (2) executes another loop that loops over the words I want to count using a regular expression to check how many times the a given word appears each time pushing the count to an array, (3) prints the array of counts separated by commas to a file. </p>\n\n<p>Here is an example:</p>\n\n<pre><code>#create array that holds the list of words I'm looking to count;\n@word_list = qw(word1 word2 word3 word4);\n\n#create array that holds the names of the txt files I want to count;\n$data_loc = \"/data/txt_files_for_counting/\"\nopendir(DIR1,\"$data_loc\")||die \"CAN'T OPEN DIRECTORY\";\nmy @file_names=readdir(DIR1);\n\n\n#create place to save results;\n$out_path_name = \"/output/my_counts.csv\";\nopen (OUT_FILE, \"&gt;&gt;\", $out_path_name);\n\n#run the loops;\nforeach $file(@file_names){\n    if ($file=~/^\\./)\n        {next;}\n    #Pull in text from txt filea;\n    {\n        $P_file = $data_loc.\"/\".$file;\n        open (B, \"$P_file\") or die \"can't open the file: $P_file: $!\"; \n        $text_of_txt_file = do {local $/; &lt;B&gt;}; \n        close B or die \"CANNOT CLOSE $P_file: $!\";      \n    }\n\n    #preserve the filename so counts are interpretable;\n    print OUT_FILE $file;\n\n    foreach $wl_word(@word_list){\n        #use regular expression to search for term without any context;\n        @finds_p = ();\n        @finds_p = $text_of_txt_file =~ m/\\b$wl_word\\b/g;\n        $N_finds = @finds_p;\n        print OUT_FILE \",\".$N_finds;\n    }\n    print OUT_FILE \",\\n\";\n}\nclose(OUT_FILE);\n</code></pre>\n\n<p>I've found this approach to be very inefficient (slow) as the number of txt files and the number of words I want to count grow.</p>\n\n<p>Is there a more efficient way to do this?</p>\n\n<p>Is there a perl package that does this?</p>\n\n<p>Could it be more efficient in python? (e.g., Is there a python package that will do this?)</p>\n\n<p>Thanks!</p>\n\n<p>EDIT: note, I don't want to count the number of words, rather the presence of certain words. Thus, the answer in this question \"<a href=\"https://stackoverflow.com/questions/6063605/whats-the-fastest-way-to-count-the-number-of-words-in-a-string-in-perl\">What's the fastest way to count the number of words in a string in Perl?</a>\" doesn't quite apply. Unless I'm missing something.</p>\n"}, {"tags": ["perl", "awk", "sed", "grep", "tcl"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 1, "creation_date": 1432894976, "post_id": 30526888, "comment_id": 49127600, "body": "You&#39;re not like to get anything particularly fast for this task. And you better have lots of RAM."}, {"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "edited": false, "score": 1, "creation_date": 1432895081, "post_id": 30526888, "comment_id": 49127675, "body": "You could just load all lines into a hash, where the key is the line content.and value is number of occurrences. Then extract all keys where value equal 1, the unique ones."}, {"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "reply_to_user": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "edited": false, "score": 1, "creation_date": 1432895226, "post_id": 30526888, "comment_id": 49127755, "body": "@Kim the issue with that approach is that the order is lost."}, {"owner": {"reputation": 445, "user_id": 4098466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7adf4028d6e536b23711192e22d7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Kim Ryan", "link": "https://stackoverflow.com/users/4098466/kim-ryan"}, "edited": false, "score": 0, "creation_date": 1432895884, "post_id": 30526888, "comment_id": 49128138, "body": "Good point. YOu could add a couter to each key, so it becomes 1:foo1, 2:foo2 . So order is  retained as you can now sort on key. Just need to split out the number section on retrieval."}, {"owner": {"reputation": 125, "user_id": 4940417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a020cfcf66bdaecb0e0a7ff63cdfc68?s=128&d=identicon&r=PG&f=1", "display_name": "valuable_asset", "link": "https://stackoverflow.com/users/4940417/valuable-asset"}, "reply_to_user": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1432896051, "post_id": 30526888, "comment_id": 49128233, "body": "@Wintermute I just want an efficient code. : )"}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "edited": false, "score": 0, "creation_date": 1432896392, "post_id": 30526888, "comment_id": 49128471, "body": "@valuable_asset Well, depending on the length of the lines in your file, you&#39;ll need quite a lot of RAM to store the whole file linewise in a hash map (and I do mean <b>quite</b> a lot). I encountered that problem a while ago with smaller files and short lines. If you have 4 GB of RAM, you&#39;ll have to tackle the problem in a different manner from the way you could use if you had 32 GB."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1432905204, "post_id": 30526888, "comment_id": 49134578, "body": "@valuable_asset: What is the typical length of the records in your file? Do you need trailing spaces to be ignored, as your example contains varying numbers of space characters?"}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1432942705, "post_id": 30526888, "comment_id": 49154479, "body": "How long is the typical line?"}, {"owner": {"reputation": 125, "user_id": 4940417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a020cfcf66bdaecb0e0a7ff63cdfc68?s=128&d=identicon&r=PG&f=1", "display_name": "valuable_asset", "link": "https://stackoverflow.com/users/4940417/valuable-asset"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1433133285, "post_id": 30526888, "comment_id": 49202256, "body": "@Borodin. Each line is about 4 characters in length"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 4940417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a020cfcf66bdaecb0e0a7ff63cdfc68?s=128&d=identicon&r=PG&f=1", "display_name": "valuable_asset", "link": "https://stackoverflow.com/users/4940417/valuable-asset"}, "edited": false, "score": 0, "creation_date": 1432896256, "post_id": 30527177, "comment_id": 49128379, "body": "I cannot sort. I require the patterns to be in sequence."}, {"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "reply_to_user": {"reputation": 125, "user_id": 4940417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a020cfcf66bdaecb0e0a7ff63cdfc68?s=128&d=identicon&r=PG&f=1", "display_name": "valuable_asset", "link": "https://stackoverflow.com/users/4940417/valuable-asset"}, "edited": false, "score": 0, "creation_date": 1432896358, "post_id": 30527177, "comment_id": 49128452, "body": "@valuable_asset the input to <code>grep</code> is sorted but the output is not, so that&#39;s not a problem."}], "tags": [], "owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "is_accepted": false, "score": 2, "last_activity_date": 1432895717, "last_edit_date": 1432895717, "creation_date": 1432895033, "answer_id": 30527177, "question_id": 30526888, "link": "https://stackoverflow.com/questions/30526888/deleting-duplicate-lines-along-with-original/30527177#30527177", "title": "Deleting duplicate lines along with original", "body": "<p>One possible solution would be this:</p>\n\n<pre><code>$ awk 'NR==FNR{++seen[$0];next}seen[$0]==1' file file\nfoo3\nfoo4\nfoo5\n</code></pre>\n\n<p>It reads the file twice, keeping a total of the number of occurrences of each line the first time round and printing the unique lines the second time.</p>\n\n<p>Another option, which uses more memory but only reads the file once:</p>\n\n<pre><code>$ awk '{++seen[$0];a[NR]=$0}END{for(i=1;i&lt;=NR;++i)if(seen[a[i]]==1)print a[i]}' file\nfoo3\nfoo4\nfoo5\n</code></pre>\n\n<p>This also stores each line in the array <code>a</code>, so instead of re-reading the file, a loop can be used to print the unique lines.</p>\n\n<p>I'm not sure how this would work under the hood (I guess that the memory requirements are probably similar) but you could also use a few standard tools:</p>\n\n<pre><code>$ sort file | uniq -u | grep -Fxf - file\nfoo3\nfoo4\nfoo5\n</code></pre>\n\n<p><code>sort file | uniq -u</code> obtains the unique lines and passes them to grep as a list of patterns to match. The <code>-F</code> switch matches fixed strings and the <code>-x</code> means that only lines matching the whole pattern are printed.</p>\n"}, {"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 1, "last_activity_date": 1432897914, "last_edit_date": 1432897914, "creation_date": 1432896120, "answer_id": 30527531, "question_id": 30526888, "link": "https://stackoverflow.com/questions/30526888/deleting-duplicate-lines-along-with-original/30527531#30527531", "title": "Deleting duplicate lines along with original", "body": "<p>This could perform well if there are lots of repeating lines,</p>\n\n<pre><code>perl -ne'\n  $h{$_}++ or push @r,$_;\n  END {\n    $h{$_} &lt;2 and print for @r\n  }\n' file\n</code></pre>\n\n<p>It loops through file and stores count of identical lines in <code>%h</code> hash, while populating <code>@r</code> array with unique lines. At the end of file processing it loops trough <code>@r</code> and prints only lines which occurred less than two times.</p>\n"}, {"comments": [{"owner": {"reputation": 64845, "user_id": 2088135, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YB10Q.jpg?s=128&g=1", "display_name": "Tom Fenech", "link": "https://stackoverflow.com/users/2088135/tom-fenech"}, "edited": false, "score": 3, "creation_date": 1432896755, "post_id": 30527533, "comment_id": 49128716, "body": "A nice inventive solution!"}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 4, "last_activity_date": 1432912659, "last_edit_date": 1432912659, "creation_date": 1432896127, "answer_id": 30527533, "question_id": 30526888, "link": "https://stackoverflow.com/questions/30526888/deleting-duplicate-lines-along-with-original/30527533#30527533", "title": "Deleting duplicate lines along with original", "body": "<p>The easiest way to do this is to walk over the file twice, count how often a line appears the first time and print the unique ones during the second pass as they are encountered.</p>\n\n<p>If you have enough RAM (this will take quite a bit), you can use</p>\n\n<pre><code>awk 'NR == FNR { seen[$0]++; next } seen[$0] == 1' file file\n</code></pre>\n\n<p>How much memory this requires depends on the average length of lines in the file. If the lines are very short, the overhead of the hash map will blow the memory usage far beyond the 1GB the pure input data requires. I've recently had a similar use case where <strong>awk ended up using over 8GB of RAM for ~300 MB of input data</strong> where lines were on average ~8 characters long. Rewriting the code in C++ made the problem less severe but remained impractical.</p>\n\n<p>We ended up solving the problem with sqlite, trading speed for RAM. For your use case, this might end up as</p>\n\n<pre><code>rm lcount.db\nawk -v q=\\' '\n  NR == 1 {\n    print \"CREATE TABLE lines (line text PRIMARY KEY, counter INTEGER, nr INTEGER);\"\n  }\n  {\n    sub(q, q q);  # hacky way to sanitize lines with quotes in them\n    print \"INSERT OR IGNORE INTO lines VALUES (\" q $0 q \", 0, \" NR \");\";\n    print \"UPDATE lines SET counter = counter + 1 WHERE line = \" q $0 q \";\"\n  }\n  END {\n    print \"SELECT line FROM lines WHERE counter = 1 ORDER BY nr;\"\n  }' file  | sqlite3 lcount.db\n</code></pre>\n\n<p>Surprisingly, this was still reasonably fast. How fast it is depends again on your available RAM -- the sqlite process will only use a few megabytes, but the speed depends largely on the available space for file system caching of the database file.</p>\n\n<p><strong>I'm not terribly happy with the SQL sanitation, mind you;</strong> I'm not convinced that it is entirely safe if the input data comes from an untrustworthy source. In the event that this is a worry, you can use the following:</p>\n\n<pre><code>perl -MDBI -e'\n   my $dbh = DBI-&gt;connect(\"dbi:SQLite:dbname=lcount.db\", \"\", \"\", { PrintError=&gt;0, RaiseError=&gt;1 });\n   $dbh-&gt;do(\"CREATE TABLE lines (line TEXT PRIMARY KEY, counter INTEGER, nr INTEGER)\");\n\n   my $ins_sth = $dbh-&gt;prepare(\"INSERT OR IGNORE INTO lines VALUES (?, 0, ?)\");\n   my $upd_sth = $dbh-&gt;prepare(\"UPDATE lines SET counter = counter + 1 WHERE line = ?\");\n   while (&lt;&gt;) {\n      $ins_sth-&gt;execute($_, $.);\n      $upd_sth-&gt;execute($_);\n   }\n\n   my $sth = $dbh-&gt;prepare(\"SELECT line FROM lines WHERE counter = 1 ORDER BY nr\");\n   print while ($_) = $sth-&gt;fetchrow_array;\n' file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1432901955, "creation_date": 1432901955, "answer_id": 30529460, "question_id": 30526888, "link": "https://stackoverflow.com/questions/30526888/deleting-duplicate-lines-along-with-original/30529460#30529460", "title": "Deleting duplicate lines along with original", "body": "<p>The core of your problem is this - because you need to delete the original, until you know it's a dupe, you have to hold it in memory until the whole file is parsed. </p>\n\n<p>There are two ways you can fundamentally do this - store the whole thing in memory or read the file twice from disk. </p>\n\n<p>So in perl - reading into memory (will use a <em>multiple</em> of the raw filesize, due to overheads).</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings; \n\nopen ( my $input_fh, \"&lt;\", \"data_file_name\" ) or die $!;\nmy @data = &lt;$input_fh&gt;; \nclose ( $input_fh ):\n\nmy %count_of;\n$count_of{$_}++ for @data;\n\nforeach my $line ( @data ) {\n   print $line if $count_of{$line} &lt;= 1;\n}\n</code></pre>\n\n<p>Reading file twice - will take longer, because disk IO, but lower memory usage (depends a bit on just how many duplicates there are). </p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen( my $input_fh, \"&lt;\", \"data_file_name\" ) or die $!;\nmy %count_of;\n$count_of{$_}++ for &lt;$input_fh&gt;;\n\nseek( $input_fh, 0, 0 );    #rewind - could close/reopen instead.\nforeach my $line (&lt;$input_fh&gt;) {\n    print $line if $count_of{$line} &lt;= 1;\n}\nclose($input_fh);\n</code></pre>\n\n<p>note - in both of the above, we use the line literally - including whitespace and linefeeds. So: <code>\"foo   \"</code> and <code>\"foo\"</code> will be considered different. You can deal with that quite easily with a \"sed like\" search and replaced, etc. <code>s/\\s+//g</code> to remove whitespace. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1432904281, "last_edit_date": 1432904281, "creation_date": 1432903872, "answer_id": 30530119, "question_id": 30526888, "link": "https://stackoverflow.com/questions/30526888/deleting-duplicate-lines-along-with-original/30530119#30530119", "title": "Deleting duplicate lines along with original", "body": "<p>A Perl solution. This program expects the path to the input file as a parameter on the command line</p>\n\n<p>The data in your question has variable numbers of trailing spaces. I have assumed that you <strong><em>don't</em></strong> need to trim these before comparing them</p>\n\n<p>1GB isn't so big for a file, and the fastest way to process it is to read it into memory. This solution keeps a hash to establish uniqueness and an array to maintain the order</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy (%count, @lines);\n$count{$_}++ or push @lines, $_ while &lt;&gt;;\nprint grep $count{$_} == 1, @lines;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>foo3\nfoo4\nfoo5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": false, "score": 0, "last_activity_date": 1432905723, "creation_date": 1432905723, "answer_id": 30530747, "question_id": 30526888, "link": "https://stackoverflow.com/questions/30526888/deleting-duplicate-lines-along-with-original/30530747#30530747", "title": "Deleting duplicate lines along with original", "body": "<p>The simplest way of solving this in Tcl is to use dictionaries, as they preserve the order of insertion of keys. In particular <code>dict incr</code> and <code>dict for</code> are very useful. As a stdin&rarr;stdout filter\u2026</p>\n\n<pre><code>set seen {}\nwhile {[gets stdin line] &gt;= 0} {\n    dict incr seen $line\n}\ndict for {line count} $seen {\n    if {$count == 1} {\n        puts $line\n    }\n}\n</code></pre>\n\n<p>This will use memory proportional to the number of <em>different</em> lines, and will read the input exactly once; it's going to be very difficult to do satisfy the problem requirements in less, as there could be an arbitrary number of lines to read before finding a duplicate for a line.</p>\n"}], "owner": {"reputation": 125, "user_id": 4940417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a020cfcf66bdaecb0e0a7ff63cdfc68?s=128&d=identicon&r=PG&f=1", "display_name": "valuable_asset", "link": "https://stackoverflow.com/users/4940417/valuable-asset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 30527533, "answer_count": 6, "score": 1, "last_activity_date": 1432912659, "creation_date": 1432894210, "last_edit_date": 1432894536, "question_id": 30526888, "link": "https://stackoverflow.com/questions/30526888/deleting-duplicate-lines-along-with-original", "title": "Deleting duplicate lines along with original", "body": "<p>I have a file which contains patterns on each line, some of which are repeating. i want only those patterns which <strong>do not</strong> repeat. So, I want to remove all repeating data along with the original pattern. I cannot use sort since i want the patterns to be in same sequence.</p>\n\n<p>file:  </p>\n\n<pre><code>foo1  \nfoo2   \nfoo3  \nfoo2  \nfoo4  \nfoo1  \nfoo1  \nfoo5\n</code></pre>\n\n<p>Desired output:  </p>\n\n<pre><code>foo3   \nfoo4  \nfoo5\n</code></pre>\n\n<p>Since it is a large file (about 1gb), I prefer something very fast. Thanks in advance</p>\n"}, {"tags": ["perl", "decimal", "perl-module"], "comments": [{"owner": {"reputation": 9, "user_id": 3949322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f06e4e510ed8dd892a9ce2c1b373200c?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Kumar", "link": "https://stackoverflow.com/users/3949322/vimal-kumar"}, "edited": false, "score": 0, "creation_date": 1432890392, "post_id": 30525228, "comment_id": 49124602, "body": "Yes its duplicate one."}], "answers": [{"tags": [], "owner": {"reputation": 8026, "user_id": 1320303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9020a80cda52e7a425d4824ad572b241?s=128&d=identicon&r=PG", "display_name": "mttrb", "link": "https://stackoverflow.com/users/1320303/mttrb"}, "is_accepted": false, "score": 0, "last_activity_date": 1432889749, "creation_date": 1432889749, "answer_id": 30525307, "question_id": 30525228, "link": "https://stackoverflow.com/questions/30525228/ways-to-round-the-numbers-by-removing-the-decimal-part-in-perl/30525307#30525307", "title": "Ways to round the numbers by removing the decimal part in perl", "body": "<p>You can do this with the <code>int</code> keyword.</p>\n\n<pre><code>my $value = 4.5;\nprint int( $value + 0.5 );\n</code></pre>\n\n<p>However, the <code>int</code> perl documentation warns against using <code>int</code> for rounding:</p>\n\n<blockquote>\n  <p>Returns the integer portion of EXPR.  If EXPR is omitted, uses $_. \n  You should not use this function for rounding: one because it\n  truncates towards 0, and two because machine representations of\n  floating-point numbers can sometimes produce\n                 counterintuitive results.  For example, \"int(-6.725/0.025)\" produces -268 rather than the correct -269; that's\n  because it's really more like -268.99999999999994315658 instead. \n  Usually, the \"sprintf\", \"printf\", or the \"POSIX::floor\" and\n                 \"POSIX::ceil\" functions will serve you better than will int().</p>\n</blockquote>\n"}], "owner": {"reputation": 9, "user_id": 3949322, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f06e4e510ed8dd892a9ce2c1b373200c?s=128&d=identicon&r=PG&f=1", "display_name": "Vimal Kumar", "link": "https://stackoverflow.com/users/3949322/vimal-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 843, "favorite_count": 0, "closed_date": 1432889969, "answer_count": 1, "score": 0, "last_activity_date": 1432889749, "creation_date": 1432889505, "question_id": 30525228, "link": "https://stackoverflow.com/questions/30525228/ways-to-round-the-numbers-by-removing-the-decimal-part-in-perl", "closed_reason": "Duplicate", "title": "Ways to round the numbers by removing the decimal part in perl", "body": "<p>I want to round the numeric data by removing the decimal part. I dont want to use \"<strong>sprintf</strong>\". Is there any other methods to do in perl. Please help me with this.\nFor instance,\nif the value is 4.5 then output should be 5 and for 4.2 its 4 and 4.7 its 5 respectively.\nPlease help me with this issue.</p>\n"}, {"tags": ["perl", "unix", "awk"], "answers": [{"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1432889110, "post_id": 30525058, "comment_id": 49123697, "body": "@fedorqui Which version of <code>awk</code> are you using? Which OS?"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1432889238, "post_id": 30525058, "comment_id": 49123811, "body": "I wasn&#39;t sure if the <code>;</code> was just a typo in the question, that&#39;s why I didn&#39;t added it (and removed it from the input file). I should have mentioned that."}, {"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432889479, "post_id": 30525058, "comment_id": 49123989, "body": "@ hek2mgl Thanks too much. I am able to find the maximum by your neat script provided. The <code>;</code> is not a typo. It happens in my file when it is meant to shift to another chemical."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1432889567, "post_id": 30525058, "comment_id": 49124044, "body": "For the <code>2.2</code> version, I would say <code>awk &#39;{val[$0]=$0} END{n=asort(val); for (i=n-1; i&gt;(n-1)-4; i--) print val[i]}&#39; RS=&quot;[,\\n;]&quot; file</code>."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1432889700, "post_id": 30525058, "comment_id": 49124133, "body": "@fedorqui Seems working and looks great! Can you post this as an answer? (Looks like I will not find something better at the moment)"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1432889775, "post_id": 30525058, "comment_id": 49124178, "body": "Feel free to use it! You did find the key point here by using this specific <code>RS</code>, so get all the credit :)"}, {"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1432889811, "post_id": 30525058, "comment_id": 49124202, "body": "@fedorqui Seems the script omitted <code>5.0003081213</code> as one of the candidates."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 1, "creation_date": 1432889855, "post_id": 30525058, "comment_id": 49124246, "body": "@nam not to me. In my case it returns 5.0003081213, 0.000421869,  0.0003385935 and 0.0002973858."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432889896, "post_id": 30525058, "comment_id": 49124271, "body": "@nam It is working for me too. Are we all working with the <i>same</i> input?"}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432890168, "post_id": 30525058, "comment_id": 49124458, "body": "@nam it can be a matter of changing the starting point of the <code>for</code> loop. I used <code>n-1</code> since I assumed it starts by 0, so it has n-1 elements. You can play around that and see what is best."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432890885, "post_id": 30525058, "comment_id": 49124906, "body": "@nam This is my terminal: <a href=\"https://i.na.cx/cj4465.png\" rel=\"nofollow noreferrer\">i.na.cx/cj4465.png</a>  I used a chinese website, wow!! Don&#39;t ask me what I&#39;ve clicked there!! :) I need to be AFK for an urgent task, I&#39;ll have a look here later again."}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1432889277, "last_edit_date": 1432889277, "creation_date": 1432888952, "answer_id": 30525058, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained/30525058#30525058", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p><code>awk</code> can work with numbers - even in scientific notation. You can use the following script the get the maximum:</p>\n\n<pre><code>awk '{m=(m&gt;$0)?m:$0}END{print m}' RS=\"[,\\n;]\" input.file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432897598, "post_id": 30525224, "comment_id": 49129287, "body": "Thank you for your help and I learned how to write a simple script to drive another file."}], "tags": [], "owner": {"reputation": 80, "user_id": 4025655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b708f7d61edb8730a8d2c5bf22afb1ed?s=128&d=identicon&r=PG&f=1", "display_name": "lamchob", "link": "https://stackoverflow.com/users/4025655/lamchob"}, "is_accepted": false, "score": 0, "last_activity_date": 1432889869, "last_edit_date": 1432889869, "creation_date": 1432889492, "answer_id": 30525224, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained/30525224#30525224", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p>if you really want to use a one line script, you can use this to get the largest value:</p>\n\n<pre><code>$/=undef;print \"largest: \" .(sort {$b &lt;=&gt; $a} split /,/ , scalar &lt;&gt; =~ tr/\\n ;//rd)[0] . \"\\n\";\n</code></pre>\n\n<p>And this to get the four largest Values:</p>\n\n<pre><code>$/=undef;print join (\",\" , (sort {$b &lt;=&gt; $a} split /,/ , scalar &lt;&gt; =~ tr/\\n ;//rd)[0..3]) . \"\\n\";\n</code></pre>\n\n<p>Save one of these lines into a file, say sort.pl, and execute\n<code>cat /path/to/input.txt | perl /path/to/sort.pl</code></p>\n\n<p>Although it does what should, it is not the prettiest solution.</p>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432897844, "post_id": 30525514, "comment_id": 49129473, "body": "Thanks. But I do not know how to get the files of few millions of lines into <code>$mydata</code> and thus I have adopted another the solutions. Thank you very much for your help too."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1432890323, "creation_date": 1432890323, "answer_id": 30525514, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained/30525514#30525514", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p>This solution is a very verbose and assumes you already know how to get the data into the program. There is no need to find numbers with regex. You can just <code>split</code> on comma, get a list and sort it by size.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse feature 'say';\nuse List::Util 'max';\n\n# I'm assuming you already have that data in one line in a variable\nmy $data = qq{0, 0, 0, 0, 0, 0, 0, 0, 3.043678e-05, 3.661498e-05, 2.070347e-05, 2.47175e-05, 1.49877e-05, 3.031176e-05, 2.12128e-05, 2.817522e-05, 1.802658e-05, 7.192285e-06, 8.467806e-06, 2.047874e-05, 9.621194e-05,4.467542e-05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.000421869,    5.0003081213, 0.0001938675, 8.70334e-05, 0.0002973858, 0.0003385935,8.763598e-05, 2.743326e-05, 0, 0.0001043894, 3.409237e-05, 0, 0, 0, 0, 0,0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;};\n\n# remove the semicolon\nchop $data;\n\n# split to a list on comma and possible whitespace\nmy @numbers = split /,\\s*/, $data;\n\n# this is from List::Util\nsay 'Max: ' . max(@numbers);\n\n# sort numerical and grab the highest 4\nsay $_ for ( reverse sort { $a &lt;=&gt; $b } @numbers )[ 0 .. 3 ];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432897714, "post_id": 30525642, "comment_id": 49129382, "body": "Thank you for your help too. It takes some time for me, a beginner to learn from your scripts."}], "tags": [], "owner": {"reputation": 1778, "user_id": 2740367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7OsG.png?s=128&g=1", "display_name": "leu", "link": "https://stackoverflow.com/users/2740367/leu"}, "is_accepted": false, "score": 1, "last_activity_date": 1432890758, "creation_date": 1432890758, "answer_id": 30525642, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained/30525642#30525642", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p>I understand your question in that way that you want to filter numbers from your huge input file. So, splitting at delimiters is not sufficient but instead you need to extract numbers by a regex.</p>\n\n<p>This is my attempt:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy(@numbers);\nwhile (my $line = &lt;&gt;) {\n    while($line =~ m|([-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?)|g) {\n        push @numbers, $1;\n    }\n}\n@numbers = sort { $b &lt;=&gt; $a } @numbers;\n\nprint \"largest value:\\n  $numbers[0]\\n\";\nprint \"next four numbers: \\n  \" . join(\"\\n  \",@numbers[1..4]) . \"\\n\";\n</code></pre>\n\n<p>It's not a one-liner but maybe better to read. </p>\n\n<p>Use it like this: <code>perl findNumbers.pl input.txt</code> where <code>findNumbers.pl</code> is the script as above.</p>\n"}, {"comments": [{"owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "edited": false, "score": 1, "creation_date": 1432895379, "post_id": 30525867, "comment_id": 49127837, "body": "If not bound to perl and the input is not extremely huge, I&#39;d go for this solution too instead of mine."}, {"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 1, "creation_date": 1432897439, "post_id": 30525867, "comment_id": 49129172, "body": "@fedorqui Thank you. It works amazingly! I have extracted a part (<a href=\"http://sprunge.us/XCeD\" rel=\"nofollow noreferrer\">sprunge.us/XCeD</a>) of my huge ascii file. It works with only one script! Thanks again :)"}, {"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1433158247, "post_id": 30525867, "comment_id": 49214728, "body": "@fedorqui May I know if I would like to make use of <code>grep -o &#39;[0-9e.-]*&#39; file | sort -rg | head -1</code> to grep specific lines from a file says, <code>Line 123</code> to <code>Line 456</code>, then what I should do? I know there is similar function in <code>sed</code> but do now know how to apply in this case. I appreciate your help so much."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1433158446, "post_id": 30525867, "comment_id": 49214858, "body": "@nam I don&#39;t understand what exactly you mean here. Could you update your question providing more insight?"}, {"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1433176790, "post_id": 30525867, "comment_id": 49227549, "body": "@fedorqui I have updated the question and I hope that I formulate my problem clearly."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1433194012, "post_id": 30525867, "comment_id": 49236956, "body": "@nam aaah now I understand what you meant. I would just add a command before the <code>grep</code>. Something like <code>awk &#39;NR==3,NR==6&#39; file</code>, or any variant you can find in <a href=\"http://stackoverflow.com/q/83329/1983854\">How can I extract a range of lines from a text file on Unix?</a>. All together it would be <code>awk &#39;NR==3,NR==6&#39; file | grep -o &#39;[0-9e.-]*&#39; | sort -rg | head -N</code>"}, {"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 1, "creation_date": 1433212273, "post_id": 30525867, "comment_id": 49242262, "body": "@fedorqui I appreciate your help again. Your script saves me a lot of time. I do no need to extract the content from the huge file with <code>sed</code> first but just apply your script. Thanks again :)"}], "tags": [], "owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "is_accepted": true, "score": 7, "last_activity_date": 1432900636, "last_edit_date": 1432900636, "creation_date": 1432891440, "answer_id": 30525867, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained/30525867#30525867", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p>I would use a combination of <code>grep</code> and <code>sort</code>:</p>\n\n<pre><code>grep -o '[0-9e.-]*' file | sort -rg | head -N\n</code></pre>\n\n<ul>\n<li>The command <code>grep -o '[0-9e.-]\\+'</code> (using the regex provided in the question) extracts all the numbers in the file.</li>\n<li>Then, <code>sort -g</code> sorts taking exponential values into consideration; by using <code>-r</code> we reverse the results, so that the top values show at the top.</li>\n<li>Finally, <code>head</code> gets the top N values.</li>\n</ul>\n\n<p>Top value:</p>\n\n<pre><code>$ grep -o '[0-9e.-]*' file | sort -rg | head -1\n5.0003081213\n</code></pre>\n\n<p>Top 4:</p>\n\n<pre><code>$ grep -o '[0-9e.-]*' file | sort -rg | head -4\n5.0003081213\n0.000421869\n0.0003385935\n0.0002973858\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "edited": false, "score": 0, "creation_date": 1432897548, "post_id": 30526686, "comment_id": 49129250, "body": "Thank you for your reminder of working with a huge file. I am at the state of working part of the big file and will refer to your kind advice later. I appreciate you so much."}], "tags": [], "owner": {"reputation": 9137, "user_id": 4295017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53186503963b4007f9107bd53e151966?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Egorov", "link": "https://stackoverflow.com/users/4295017/dmitry-egorov"}, "is_accepted": false, "score": 1, "last_activity_date": 1432894770, "last_edit_date": 1432894770, "creation_date": 1432893688, "answer_id": 30526686, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained/30526686#30526686", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p>UPDATE: The one-liner:</p>\n\n<pre><code>perl -nle 'foreach (split(\",|;\")) { $_ += 0; @top_n = sort {$b &lt;=&gt; $a} ($_, @top_n); pop @top_n if @top_n &gt; 4; } END { print foreach @top_n; }' input.txt\n</code></pre>\n\n<p>Nam, the other solutions are just fine and, I believe, have already helped you in solving you problem. However, they don't take into account the huge input. Even lue's solution implies storing the entire array in memory and performing sort operation against all these hundreds of megabytes. Although I totally support lue in his idea of not redefining the input record separator and reading line by line. This really helps when processing huge files.</p>\n\n<p>There're only about 5 lines of actual code. The rest are comments which will help you understand what's behind the scene and hopefully help you learn a bit of perl.</p>\n\n<pre><code>#!/usr/bin/perl -nl\n\n# 0) The -n from above would make the script read the input line by line\n# and the -l parameter would automatically strip off any newline chars\n# from input and add a newline to every output line\n\n# 1.1) So, the -n parameter made perl read a line from STDIN and place it\n# into $_ variable for you. The following code (excluding the END{} block)\n# is executed for every input line.\n# 1.2) split() takes this $_ string and breaks it into a series of numbers\n# (technically still sub-strings), returning the series as an array\n# 1.3) Then foreach loops through this array placing each array's item into\n# $_ again. (NB. Yes, we're losing the previous $_'s value which was an input\n# string but we don't care about it any longer since we've already processed\n# it with split().)\nforeach (split(\",|;\")) {\n\n    # 2) Ensure its stored internally as a numeral by adding zero to it.\n    # This would save us a bit of conversion when sorting values and also\n    # make final output nicer. Still, you'll get what you want if you\n    # comment the following line out.\n    $_ += 0;\n\n    # 3.1) Compose a new array by adding the current value ($_) to what\n    # we already have (@top_n). The new array is \"($_, @top_n)\". It's OK\n    # if @top_n has nothing in it or even undefined so far, perl will\n    # define and initialise it with an empty array when it encounters\n    # the @top_n variable first time. (Note: we should better use -w\n    # perl command line parameter and define @top_n explicitly beforehand\n    # but I'm omitting it here for the sake of simplicity.)\n    # 3.2) Then sort the new array. The \"$b &lt;=&gt; $a\" expression will make\n    # it sorted in descending order.\n    @top_n = sort {$b &lt;=&gt; $a} ($_, @top_n);\n\n    # 3.3) Finally, throw away the last item (pop does this) if our top-N\n    # array has grown beyond the lenth or interest (4 in this example).\n    # This helps keeps our sript's memory consumption reasonaably low.\n    # Without doing this we'd ended up with several hundreds of megabytes\n    # in memory which would require sorting.\n    pop @top_n if @top_n &gt; 4;\n}\n\n# 4) This block is only executed once, after all the input file is read and\n# processed.\nEND {\n    # 4.1) Here our old good foreach reads the @top_n array storing\n    # current value in $_ for each iteration.\n    # 4.2) Being called without parameters, print() outputs the value\n    # of $_ variable. Remember, it also adds a newline to the output\n    # - we told it doing so by adding -l in the very first line of the\n    # script.\n    print foreach @top_n;\n}\n</code></pre>\n\n<p>Usage: <code>perl top_n.pl input.txt</code>, provided top_n.pl is the script name.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1432903975, "last_edit_date": 1432903975, "creation_date": 1432903589, "answer_id": 30530011, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained/30530011#30530011", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p>From a perl perspective, what is useful to know <code>$/</code> is the record separator. By default, it's linefeed, but you can set it to anything you like. </p>\n\n<p>Looking at your sample data, therefore I'd say:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse List::Util qw ( max );\n\n$/ = ';';\n\nwhile (&lt;&gt;) {\n    s/;//g;\n    my @lines = split(\"\\n\");\n    s/\\s+//g;\n    my $block_max = max( split(\",\") );\n    last unless defined $block_max;\n    print $block_max, \"\\n\";\n\n    my @top;\n    foreach my $line (@lines) {\n        $line =~ s/\\s+//g;\n        my @numbers = split( \",\", $line );\n        my $max_num = max(@numbers);\n        if ( defined $max_num ) { push( @top, $max_num ) }\n    }\n\n    print \"Top 5:\\n\";\n    print join( \"\\n\", ( sort { $b &lt;=&gt; $a } (@top) )[ 0 .. 4 ] );\n}\n</code></pre>\n\n<p>What we do is:</p>\n\n<ul>\n<li>iterate your file based on <code>;</code>. </li>\n<li>Split on <code>\\n</code> to get some lines.</li>\n<li>split on <code>,</code> to get individual values.</li>\n<li>use <code>max</code> on the block - print that. </li>\n<li>use <code>max</code> on each line, stuff that in an array <code>@top</code>. </li>\n<li>print the sorted first 5 elements from <code>@top</code>. </li>\n</ul>\n\n<p>Then move on to the next <code>;</code> delimited 'chunk'. </p>\n\n<p>To extend - based on your original file, you can include in there a regex to extract numbers. </p>\n\n<p>E.g. </p>\n\n<pre><code>my @numbers = m/[\\d+.-]+/g;\n</code></pre>\n\n<p>because of the way perl handles regular expressions, it'll 'match' all the chunks that fit this particular 'format'. (Of course if someone includes <code>ee-44</code> in the file, that'll match too). </p>\n\n<p>I would suggest - don't go looking for one liners. It's a false economy. Far better to have a script that you can write out, comment and actually understand later, than a compact block of text that <em>no one</em> can tell what's going on in 12 months time. </p>\n"}], "owner": {"reputation": 207, "user_id": 3854076, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d376b7457f64575e9fad599a444458f3?s=128&d=identicon&r=PG&f=1", "display_name": "nam", "link": "https://stackoverflow.com/users/3854076/nam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 30525867, "answer_count": 7, "score": 0, "last_activity_date": 1433159157, "creation_date": 1432887358, "last_edit_date": 1433159157, "question_id": 30524542, "link": "https://stackoverflow.com/questions/30524542/find-the-maximum-and-a-set-of-largest-numbers-in-scientific-notation-contained", "title": "Find the maximum and a set of largest numbers (in scientific notation) contained in a huge ascii file", "body": "<p><strong>Background:</strong></p>\n\n<p>(1) Here is what I extract from a huge ascii file of around 700Mb:</p>\n\n<pre><code>0, 0, 0, 0, 0, 0, 0, 0, 3.043678e-05, 3.661498e-05, 2.070347e-05,\n    2.47175e-05, 1.49877e-05, 3.031176e-05, 2.12128e-05, 2.817522e-05,\n    1.802658e-05, 7.192285e-06, 8.467806e-06, 2.047874e-05, 9.621194e-05,\n    4.467542e-05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.000421869,\n    5.0003081213, 0.0001938675, 8.70334e-05, 0.0002973858, 0.0003385935,\n    8.763598e-05, 2.743326e-05, 0, 0.0001043894, 3.409237e-05, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0;\n</code></pre>\n\n<p>(2) I would like to do two tasks:</p>\n\n<p>(2.1) Find the maximum among the numbers separated by colons and semicolons.</p>\n\n<p>It is <code>5.0003081213</code> in the above extracted lines.</p>\n\n<p>(2.2) Find the largest 4 (says) values among the lines.</p>\n\n<p>It is <code>5.0003081213, 0.000421869, 0.0003385935 and 0.0002973858</code> in the above extracted lines.</p>\n\n<hr>\n\n<p><strong>My thought:</strong></p>\n\n<p>(3) I expect to do the work with <code>perl</code>.</p>\n\n<p>(4) I think that I can match the number with <code>([0-9.e-]+)</code>.</p>\n\n<hr>\n\n<p><strong>My Problem:</strong></p>\n\n<p>(5) However, I am new to <code>perl</code> and <code>unix</code> and I do not know how to proceed to find the maximum values.</p>\n\n<p>(6) I searched similar questions for a half day and found that I may make use of <code>List::Util</code>. I do not know it is an appropriate choice for my problem and actually I do not know how this subroutine can be adopted.</p>\n\n<p>(7) Says, the numbers are contained in a file, named <code>input.txt</code>. May I know if it is possible to finish the tasks with a one line script?</p>\n\n<p>Thanks for your understanding and I appreciate so much for your help.</p>\n\n<hr>\n\n<p><strong>Further Question raised:</strong></p>\n\n<p>Thanks to many warm replies and help from stack overflow users, I got the above question solved. However, if I would like to find out a maximum only from <strong>Line 3 to Line 6</strong> of the following data:</p>\n\n<pre><code>0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.193129938e-07, 0, 0, 0, 0, 0, 0,\n    0, 2.505016514e-05, 4.835713883e-05, 6.128770648e-05, 1.38018881e-05, 2.303402101e-05,\n    0, 0, 0, 0, 3.5838803e-05, 0.000104883779, 0, 0, 1.813278467e-05, 0.0001350646297,\n    0.0007846746908, 0.001728603877, 0.001082733652, 0.001511217708, 0.0009537032505,\n    0.0004436753321, 0.002182536356, 0.0005719495782, 9.055173127e-05, 1.245663419e-05,\n    0.0004568318755, 0.0003056741688, 3.186642459e-05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n    0.000101613512, 5.451410965e-05, 0, 0, 0, 0, 0.001172270099, 7.088900819e-05, 0,\n    1.848198352e-06, 0.0006870109246, 0.00276857581, 0.002038545509, 0.001111047938,\n    0.0007607533934, 0.0007915864957, 0.001105735631, 0.001456989534, 0.0007245351113,\n    0.0004262289031, 0.0003041285247, 0.0001528418892, 2.332078749e-05, 9.695149464e-05,\n    1.004024021e-07, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n</code></pre>\n\n<p>That is,</p>\n\n<pre><code>0, 0, 0, 0, 3.5838803e-05, 0.000104883779, 0, 0, 1.813278467e-05, 0.0001350646297,\n    0.0007846746908, 0.001728603877, 0.001082733652, 0.001511217708, 0.0009537032505,\n    0.0004436753321, 0.002182536356, 0.0005719495782, 9.055173127e-05, 1.245663419e-05,\n    0.0004568318755, 0.0003056741688, 3.186642459e-05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n</code></pre>\n\n<p>Then, how can I modify the script\n<code>grep -o '[0-9e.-]*' file | sort -rg | head -1</code> to achieve this purpose?</p>\n\n<p>I know that the command <code>sed</code> can work on lines of files by adding an option <code>(3,6p)</code>. So, I am wondering if I can modify the above scripts by adding an option like this. I appreciate your help again.</p>\n"}]