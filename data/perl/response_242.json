[{"tags": ["perl", "cpan", "cpanm"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 6994979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49d6246acd6103b3bf6187194e3b0e7d?s=128&d=identicon&r=PG", "display_name": "user4829160", "link": "https://stackoverflow.com/users/6994979/user4829160"}, "edited": false, "score": 1, "creation_date": 1574790010, "post_id": 57698017, "comment_id": 104352641, "body": "Yep, for me I needed: libdb5.3-dev"}], "tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 7, "last_activity_date": 1567016071, "creation_date": 1567016071, "answer_id": 57698017, "question_id": 57697992, "link": "https://stackoverflow.com/questions/57697992/perl-cpanm-cannot-install-db-file/57698017#57698017", "title": "Perl cpanm: Cannot install DB_File", "body": "<p>You need the libdb development library installed on your machine before you can build DB_File \u2014 this probably comes from a package called <code>libdb-dev</code> or <code>libdb-devel</code> in your system package manager.</p>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1601, "favorite_count": 0, "accepted_answer_id": 57698017, "answer_count": 1, "score": 1, "last_activity_date": 1567016071, "creation_date": 1567015937, "question_id": 57697992, "link": "https://stackoverflow.com/questions/57697992/perl-cpanm-cannot-install-db-file", "title": "Perl cpanm: Cannot install DB_File", "body": "<p>I am trying to install the Perl package <code>Vcf</code>, which has a LOT of dependencies.  One of these dependencies <code>DB_File</code> will not install.</p>\n\n<pre><code>con@VB:~$ cpanm DB_File\n--&gt; Working on DB_File\nFetching http://www.cpan.org/authors/id/P/PM/PMQS/DB_File-1.852.tar.gz ... OK\nConfiguring DB_File-1.852 ... OK\nBuilding and testing DB_File-1.852 ... FAIL\n! Installing DB_File failed. See /home/con/.cpanm/work/1567015698.27372/build.log for details. Retry with --force to force install it.\ncon@VB:~$ cat /home/con/.cpanm/work/1567015698.27372/build.log\ncpanm (App::cpanminus) 1.7044 on perl 5.030000 built for x86_64-linux\nWork directory is /home/con/.cpanm/work/1567015698.27372\nYou have make /usr/bin/make\nYou have LWP 6.39\nYou have /bin/tar: tar (GNU tar) 1.29\nCopyright (C) 2015 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n\nWritten by John Gilmore and Jay Fenlason.\nYou have /usr/bin/unzip\nSearching DB_File () on cpanmetadb ...\n--&gt; Working on DB_File\nFetching http://www.cpan.org/authors/id/P/PM/PMQS/DB_File-1.852.tar.gz\n-&gt; OK\nUnpacking DB_File-1.852.tar.gz\nEntering DB_File-1.852\nChecking configure dependencies from META.json\nConfiguring DB_File-1.852\nRunning Makefile.PL\nParsing config.in...\nLooks Good.\nChecking if your kit is complete...\nLooks good\nWarning (mostly harmless): No library found for -ldb\nGenerating a Unix-style Makefile\nWriting Makefile for DB_File\nWriting MYMETA.yml and MYMETA.json\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have ExtUtils::MakeMaker 0 ... Yes (7.34)\nBuilding and testing DB_File-1.852\ncp DB_File.pm blib/lib/DB_File.pm\nRunning Mkbootstrap for DB_File ()\nchmod 644 \"DB_File.bs\"\n\"/home/con/perl5/perlbrew/perls/perl-5.30.0/bin/perl\" -MExtUtils::Command::MM -e 'cp_nonempty' -- DB_File.bs blib/arch/auto/DB_File/DB_File.bs 644\ncc -c  -I/usr/local/BerkeleyDB/include -fwrapv -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O2   -DVERSION=\\\"1.852\\\" -DXS_VERSION=\\\"1.852\\\" -fPIC \"-I/home/con/perl5/perlbrew/perls/perl-5.30.0/lib/5.30.0/x86_64-linux/CORE\"  -D_NOT_CORE  -DmDB_Prefix_t=size_t -DmDB_Hash_t=u_int32_t   version.c\nversion.c:30:10: fatal error: db.h: No such file or directory\n #include &lt;db.h&gt;\n          ^~~~~~\ncompilation terminated.\nMakefile:353: recipe for target 'version.o' failed\nmake: *** [version.o] Error 1\n-&gt; FAIL Installing DB_File failed. See /home/con/.cpanm/work/1567015698.27372/build.log for details. Retry with --force to force install it\n</code></pre>\n"}, {"tags": ["regex", "perl", "command-line"], "comments": [{"owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "edited": false, "score": 0, "creation_date": 1567008628, "post_id": 57693353, "comment_id": 101837036, "body": "How do you read the file? Your code must be in a while loop that is done by <code>-p</code> option in one-liner."}], "answers": [{"tags": [], "owner": {"reputation": 7445, "user_id": 1529709, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3tKqC.jpg?s=128&g=1", "display_name": "zb226", "link": "https://stackoverflow.com/users/1529709/zb226"}, "is_accepted": true, "score": 0, "last_activity_date": 1566999365, "creation_date": 1566999365, "answer_id": 57693761, "question_id": 57693353, "link": "https://stackoverflow.com/questions/57693353/perl-add-a-pair-of-tags-to-the-beginning-and-the-end-of-file/57693761#57693761", "title": "Perl add a pair of tags to the beginning and the end of file", "body": "<p>Your code seems to work fine with perl 5.26.1, if I set it up like this:</p>\n\n<pre><code>use strict;\nopen my $fh, '&lt;', 'test.txt' or die $!;\nwhile (&lt;$fh&gt;) {\n    s/^/&lt;root&gt;/ if $.==1;\n    s/$/&lt;\\/root&gt;/ if eof;\n    print $_;\n}\n</code></pre>\n\n<p>Assuming <code>test.txt</code> only contains a single line</p>\n\n<pre><code>test123\n</code></pre>\n\n<p>...the output is:</p>\n\n<pre><code>&lt;root&gt;test123&lt;/root&gt;\n</code></pre>\n\n<p>This should be what is expected? I can only assume there's some shenanigans going on in other parts of the code which you haven't posted?</p>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 57693761, "answer_count": 1, "score": 1, "last_activity_date": 1566999365, "creation_date": 1566998158, "question_id": 57693353, "link": "https://stackoverflow.com/questions/57693353/perl-add-a-pair-of-tags-to-the-beginning-and-the-end-of-file", "title": "Perl add a pair of tags to the beginning and the end of file", "body": "<p>I use the following <code>Perl</code> code in order to add <code>&lt;root&gt;</code> and <code>&lt;/root&gt;</code> to the first line and the last line in the file respectively,</p>\n\n\n\n<pre><code>s/^/&lt;root&gt;/ if $.==1;\ns/$/&lt;\\/root&gt;/ if eof;\n</code></pre>\n\n<p>which gives this error:\n<code>Use of uninitialized value $_ in substitution (s///)</code> for the second substitution.</p>\n\n<p>But strangely this could work in the command line:</p>\n\n<p><code>perl -p -i -e 'eof &amp;&amp; s/$/&lt;\\/root&gt;/; s/^/&lt;root&gt;/ if $.==1;' 1.txt</code></p>\n"}, {"tags": ["perl", "ascii"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1566986568, "post_id": 57689428, "comment_id": 101824214, "body": "What do you get from this <code>open my $handle, &#39;&lt;&#39;, &#39;sample.txt&#39;; chomp(my @lines = &lt;$handle&gt;); close $handle; my @a = map {ord $_} split &#47;&#47;, $lines[0]; print Dumper \\@a;</code>"}, {"owner": {"reputation": 32298, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1566986585, "post_id": 57689428, "comment_id": 101824223, "body": "I&#39;d recommend dumping the file with a tool like <code>xxd</code> or <code>hexdump</code> to verify that input isn&#39;t being converted by perl in some unexpected way (as <code>0x1D</code> is 29, GS (group separator), not 166). If so you might benefit from calling <code>binmode</code> on your file handle (or using a PerlIO layer like <code>:encoding(ascii)</code>) to ensure it is read raw."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1566986860, "post_id": 57689428, "comment_id": 101824373, "body": "ASCII only has 128 characters. There is no character 166 in ASCII. People talk about &quot;<a href=\"https://en.wikipedia.org/wiki/Extended_ASCII\" rel=\"nofollow noreferrer\">extended ASCII</a> character sets&quot; but that&#39;s just a recipe for confusion because (as you&#39;ve seen) there are many conflicting definitions of those next 128 characters. It looks like your first link goes to a definition of the Windows character set <a href=\"https://en.wikipedia.org/wiki/Windows-1252\" rel=\"nofollow noreferrer\">CP1252</a>. I&#39;m not sure which character encoding your second link is talking about."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1566986896, "post_id": 57689428, "comment_id": 101824397, "body": "The most important thing you can do is to ask the people supplying your file what character encoding it is using."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "reply_to_user": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1566988608, "post_id": 57689428, "comment_id": 101825326, "body": "@JGNI : Added the output as an update to question"}, {"owner": {"reputation": 16645, "user_id": 402322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/GWEWt.gif?s=128&g=1", "display_name": "ceving", "link": "https://stackoverflow.com/users/402322/ceving"}, "edited": false, "score": 0, "creation_date": 1566991184, "post_id": 57689428, "comment_id": 101826657, "body": "Strings passed by the command line have the OS encoding. String literals in the source code have the Perl default encoding. This may differ."}, {"owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "edited": false, "score": 1, "creation_date": 1566995659, "post_id": 57689428, "comment_id": 101829258, "body": "If the file came from a mainframe, it was probably originally encoded in EBDIC, and some part of the file transfer process converted that to ASCII. 0x1D in EBCDIC is &quot;group separator&quot;, which the conversion process may have converted to 0xa6."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1567054655, "post_id": 57689428, "comment_id": 101849598, "body": "Re &quot;<i>ASCII for vertical broken bar to be 166.</i>&quot;, ASCII only goes up to 127"}], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "edited": false, "score": 0, "creation_date": 1566989353, "post_id": 57690233, "comment_id": 101825747, "body": "Guess I was not clea. my @c = split(/&#166;/, &#39;A&#166;B&#166;C&#39;); this works because the string A&#166;B&#166;C is done by hand by copying characters from notepad++. If I replace A&#166;B&#166;C with $lines[0], no luck. But as you already suggested, I will reach out to the source team asking for the encoding they have used."}, {"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "edited": false, "score": 0, "creation_date": 1567000814, "post_id": 57690233, "comment_id": 101832445, "body": "Tried and the splitting of string based on \\xA6 works like a charm. Thanks. I must admit, I need to go and read docs to better understand the core concepts like encoding, ascii, extended ascii....etc.. all are so evasive to me."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "edited": false, "score": 0, "creation_date": 1567110434, "post_id": 57690233, "comment_id": 101876329, "body": "@Soumya, You shouldn&#39;t have to worry about that. If you always encode and decode as you should, you don&#39;t have to worry about that"}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 2, "last_activity_date": 1566989487, "last_edit_date": 1566989487, "creation_date": 1566987823, "answer_id": 57690233, "question_id": 57689428, "link": "https://stackoverflow.com/questions/57689428/split-a-string-based-on-ascii-value/57690233#57690233", "title": "Split a string based on ASCII value", "body": "<p>When you receive an input file from an unknown source, the most important thing to need to know about it is \"what character encoding does it use?\" Without that information, any processing that you do on the file is based on guesswork.</p>\n\n<p>The problem isn't helped by people who talk about \"extended ASCII\" as though it's a meaningful term. ASCII only contains 128 characters. There are many definitions of what the next 128 character codes represent, and many of them are contradictory.</p>\n\n<p>It seems that you have a solution to your problem. Splitting on '\u00a6' (copied from Notepad++) does what you want. So I suggest you do that. If you want to use the actual character code, then you can convert 116 to hexadecimal (0xA6) and use that:</p>\n\n<pre><code>split /\\xA6/, ... ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1567054856, "creation_date": 1567054856, "answer_id": 57703250, "question_id": 57689428, "link": "https://stackoverflow.com/questions/57689428/split-a-string-based-on-ascii-value/57703250#57703250", "title": "Split a string based on ASCII value", "body": "<p>You should always decode your inputs and encode your outputs.</p>\n\n<pre><code>my $acp;\nBEGIN {\n   require Win32;\n   $acp = \"cp\".Win32::GetACP();\n}\n\nuse open ':std', \":encoding($acp)\";\n</code></pre>\n\n<p>Now, <code>@lines</code> will contain strings of Unicode Code Points. As such, you can now use the following:</p>\n\n<pre><code>use utf8;  # Source code is encoded using UTF-8.\nmy @b = split(/\u00a6/, $lines[0]);\n</code></pre>\n\n<p>Alternatively, every one of the following will also work now:</p>\n\n<pre><code>my @b = split(/\\N{BROKEN BAR}/, $lines[0]);\nmy @b = split(/\\N{U+00A6}/, $lines[0]);\nmy @b = split(/\\x{A6}/, $lines[0]);\nmy @b = split(/\\xA6/, $lines[0]);\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 57690233, "answer_count": 2, "score": 2, "last_activity_date": 1567054856, "creation_date": 1566985408, "last_edit_date": 1566988535, "question_id": 57689428, "link": "https://stackoverflow.com/questions/57689428/split-a-string-based-on-ascii-value", "title": "Split a string based on ASCII value", "body": "<p>I need to parse a delimited file.(generated by mainframe job and ftped over to windows).But got few <strong>Q</strong>ueries while using the split on delimiter.</p>\n\n<p>As per the documentation, the file is separated by <strong>'1D'</strong>. But when I open the file in notepad++(<em>when I check the encoding tab, it is set to 'Encode in ANSI'</em>), it seems to me like a 'vertical broken bar'. <strong>Q</strong>. Not sure what is '1D'?</p>\n\n<p><a href=\"https://i.stack.imgur.com/AIgFP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AIgFP.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>open my $handle, '&lt;', 'sample.txt';\nchomp(my @lines = &lt;$handle&gt;);\nclose $handle;\nmy @a = unpack(\"C*\", $lines[0]);\nprint Dumper \\@a;\n# $VAR1 = [65,166,66,166,67,166];\n</code></pre>\n\n<p>From dumper output, we see perl considers the ASCII for vertical broken bar to be 166.</p>\n\n<p>As per <a href=\"https://www.petefreitag.com/cheatsheets/ascii-codes/\" rel=\"nofollow noreferrer\">link1</a>, 166 is indeed vertical broken bar whereas as per <a href=\"https://theasciicode.com.ar/extended-ascii-code/feminine-ordinal-indicator-ascii-code-166.html\" rel=\"nofollow noreferrer\">link2</a>, 166 is feminine ordinal indicator.<strong>Q.</strong> Any suggestion as to why the difference ?</p>\n\n<pre><code>my $str = $lines[0];\nprint Dumper $str;\n# $VAR1 = 'A\u00aaB\u00aaC\u00aa';\n</code></pre>\n\n<p>We can see that the output contains 'feminine ordinal indicator' not 'vertical broken bar'.<strong>Q.</strong> Not sure why perl reads a 'bar' but then starts treating it as something else.</p>\n\n<pre><code># I copied the vertical broken bar from notepad++ for use below\nmy @b = split(/\u00a6/, $lines[0]);\nprint Dumper \\@b;\n# $VAR1 = [ 'A\u00aaB\u00aaC\u00aa' ];\n</code></pre>\n\n<p>Since perl has started treating bar to be something else, as expected, no split here.I thought to split by giving the ascii code of 166 directly. Seems split() doesn't support ASCII as an argument. <strong>Q</strong>. Any workaround to pass ASCII code to split() ?</p>\n\n<pre><code># I copied the vertical broken bar from notepad++ and created A\u00a6B\u00a6C\nmy @c = split(/\u00a6/, 'A\u00a6B\u00a6C');\nprint Dumper \\@c;\n#$VAR1 = [ 'A','B','C']; # works as expected, added here just for completion\n</code></pre>\n\n<p>Any pointers will be a great help!</p>\n\n<pre><code>Update:\nmy @a = map {ord $_} split //, $lines[0]; print Dumper \\@a;\n# $VAR1 = [ 65,166,66,166,67,166];\n</code></pre>\n"}, {"tags": ["perl", "html-parsing", "libxml2"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1566982563, "last_edit_date": 1592644375, "creation_date": 1566982563, "answer_id": 57688567, "question_id": 57688410, "link": "https://stackoverflow.com/questions/57688410/compilation-of-pattern-failed-at-libxml-pm/57688567#57688567", "title": "Compilation of pattern failed at LibXML.pm", "body": "<p>While a valid <em>XPath</em>, that isn't a valid <em>Pattern</em>.</p>\n<blockquote>\n<p><strong>Patterns are a small subset of XPath language</strong>, which is limited to (disjunctions of) location paths involving the child and descendant axes in abbreviated form as described by the extended BNF given below:</p>\n<pre class=\"lang-bnf prettyprint-override\"><code>Selector ::=     Path ( '|' Path )*\nPath     ::=     ('.//' | '//' | '/' )? Step ( '/' Step )*\nStep     ::=     '.' | NameTest\nNameTest ::=     QName | '*' | NCName ':' '*'\n</code></pre>\n<p>For readability, whitespace may be used in selector XPath expressions even though not explicitly allowed by the grammar: whitespace may be freely added within patterns before or after any token, where</p>\n<pre class=\"lang-bnf prettyprint-override\"><code>token     ::=     '.' | '/' | '//' | '|' | NameTest\n</code></pre>\n<p><strong>Note that no predicates or attribute tests are allowed.</strong></p>\n</blockquote>\n<p>(Emphasis mine.)</p>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 57688567, "answer_count": 1, "score": 0, "last_activity_date": 1566982563, "creation_date": 1566982078, "question_id": 57688410, "link": "https://stackoverflow.com/questions/57688410/compilation-of-pattern-failed-at-libxml-pm", "title": "Compilation of pattern failed at LibXML.pm", "body": "<p>I'm reading a large HTML file using <code>XML::LibXML</code>.\nWhen constructing a pattern like this:</p>\n\n\n\n<pre><code>XML::LibXML::Pattern-&gt;new('//span[@class=\"entry\"]');\n</code></pre>\n\n<p>It gives the following error:</p>\n\n<p><code>Compilation of pattern failed at /Users/chris/perl5/perlbrew/perls/perl-5.31.3/lib/site_perl/5.31.3/darwin-2level/XML/LibXML.pm line 2138.</code></p>\n\n<p>But this one is working fine:</p>\n\n\n\n<pre><code>XML::LibXML::Pattern-&gt;new('//span');\n</code></pre>\n\n<p>I'm not sure if the <code>[@class=\"entry\"]</code> part is not supported by <code>XML::LibXML::Pattern</code> or I'm just doing it wrong.</p>\n\n<p>Any information is appreciated. Thanks in advance.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566983465, "post_id": 57686908, "comment_id": 101822485, "body": "This <code>for(0..$newmatrix)</code> should probably be <code>$#newmatrix</code> since it is an array. Also I cannot see the closing brace <code>}</code> of that <code>for</code> loop"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566976767, "creation_date": 1566976767, "question_id": 57686908, "link": "https://stackoverflow.com/questions/57686908/replace-value-in-two-dimensional-array-perl", "title": "Replace value in two dimensional array - Perl", "body": "<p>I have a two lines of inputs and I need to change the ref val <code>\\ref{#1}</code> into the second line of first brace loop <code>{eq: AL element}</code></p>\n\n<p>Hence the output should be like</p>\n\n<pre><code>Rqs.~(\\ref{eq: AL Element})(\\ref{eq: BL Element})(\\ref{eq: CL Element})\n</code></pre>\n\n<p>Input<br>\n<code>my $newline = '\\newcommand{\\rqnnn}[3]{Rqs.~(\\ref{#1}), (\\ref{#2}) and (\\ref{#3})}'; #Ref value 'n' number of values\n my $texcnt = ' \\rqnnn {eq: AL element}{eq: BL element}{eq: CL element} '; #brace count should be matched with the first line ref counts</code></p>\n\n<p>Code:</p>\n\n<pre><code>my $CurBrLoopMany = qw/((?:[^{}]*(?:{(?:[^{}]*(?:{(?:[^{}]*(?:{[^{}]*})*[^{}]*)*})*[^{}]*)*})*[^{}]*)*)/;\nmy (@newmatrix,@matrix,$refs) = \"\"; my $refCnt = 3; my $brac = '{([^{}]*)}';\n$newline=~s#\\\\(?:re)?newcommand{\\\\([^\\{\\}]*)}\\[(?:[^[]]*)\\]\\{([^\\(]*)$CurBrLoopMany\\}#\n$matrix[0] = $1; $matrix[0][0] = $2; $matrix[0][1] = $3; $refs = $matrix[0][1]; \\#print \"R: $refs\\n\";\nwhile($refs=~m/\\(([^\\(\\)]+)\\)/g)\n{\n    push(@newmatrix, $1);\n}\nfor(0..$newmatrix){ my $ln  = $_;\n$texcnt=~s/\\\\$matrix[0]\\b$brac$brac$brac/$newmatrix[0]=~s{\\#}{$1}; /eg;\n\n\\#use Data::Dumper; print Dumper \\@newmatrix;\n\n#ge;\n</code></pre>\n\n<p>Output Should be:</p>\n\n<p><code>Rqs.~(\\ref{eq: AL Element})(\\ref{eq: BL Element})(\\ref{eq: CL Element})</code></p>\n\n<p>Could some please advice where I am doing wrong in my code.</p>\n"}, {"tags": ["perl", "perl-module", "xml-libxml"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1566973668, "last_edit_date": 1566973668, "creation_date": 1566973362, "answer_id": 57686170, "question_id": 57686138, "link": "https://stackoverflow.com/questions/57686138/xmllibxmlpattern-failed-to-install/57686170#57686170", "title": "XML::LibXML::Pattern failed to install", "body": "<p><code>XML::LibXML::Pattern</code> is a package populated by the <code>XML::LibXML</code> module (<code>XML/LibXML.pm</code>) of the <code>XML-LibXML</code> distribution, so the correct distribution was indeed installed.</p>\n\n<p>There's no <code>XML/LibXML/Pattern.pm</code>, so <code>use XML::LibXML::Pattern;</code> will fail. As the <a href=\"https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Pattern.pod\" rel=\"nofollow noreferrer\">documentation</a> shows, you need to use <code>use XML::LibXML;</code>.</p>\n"}], "owner": {"reputation": 784, "user_id": 1118630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466905ee415e4cd9667f29eea987f15b?s=128&d=identicon&r=PG", "display_name": "jonah_w", "link": "https://stackoverflow.com/users/1118630/jonah-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 57686170, "answer_count": 1, "score": 0, "last_activity_date": 1566973727, "creation_date": 1566973178, "last_edit_date": 1566973727, "question_id": 57686138, "link": "https://stackoverflow.com/questions/57686138/xmllibxmlpattern-failed-to-install", "title": "XML::LibXML::Pattern failed to install", "body": "<p>I'm using <code>XML::LibXML</code> to read a large xml file. Below is a snippet of the code:</p>\n\n\n\n<pre><code>use XML::LibXML::Pattern;\nnext unless $reader-&gt;matchesPattern($doc_pattern);\n</code></pre>\n\n<p>As you can see, I need to install the <code>XML::LibXML::Pattern</code> module. Here is the log info during the installation process of <code>XML::LibXML::Pattern</code>.</p>\n\n<p>It seems to have only installed the <code>XML::LibXML</code>, not the <code>XML::LibXML::Pattern</code>? Did I miss something? </p>\n\n<p>Oh, I needed the <code>XML::LibXML::Reader</code> module too, and its installation process went smooth. </p>\n\n<pre><code>`/Users/test/perl5/perlbrew/bin/perlbrew exec -q --with perl-5.31.3 \n\n/Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/cpan XML::LibXML::Pattern\nLoading internal logger. Log::Log4perl recommended for better logging\nReading '/Users/test/.cpan/Metadata'\n  Database was generated on Tue, 27 Aug 2019 22:41:03 GMT\nRunning install for module 'XML::LibXML::Pattern'\nChecksum for /Users/test/.cpan/sources/authors/id/S/SH/SHLOMIF/XML-LibXML-2.0201.tar.gz ok\n'YAML' not installed, will not store persistent state\nConfiguring S/SH/SHLOMIF/XML-LibXML-2.0201.tar.gz with Makefile.PL\nChecking if your kit is complete...\nLooks good\nGenerating a Unix-style Makefile\nWriting Makefile for XML::LibXML\nWriting MYMETA.yml and MYMETA.json\n  SHLOMIF/XML-LibXML-2.0201.tar.gz\n  /Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/perl5.31.3 Makefile.PL -- OK\nRunning make for S/SH/SHLOMIF/XML-LibXML-2.0201.tar.gz\ncp lib/XML/LibXML/InputCallback.pod blib/lib/XML/LibXML/InputCallback.pod\ncp lib/XML/LibXML/NodeList.pm blib/lib/XML/LibXML/NodeList.pm\ncp lib/XML/LibXML/PI.pod blib/lib/XML/LibXML/PI.pod\ncp lib/XML/LibXML/SAX/Generator.pm blib/lib/XML/LibXML/SAX/Generator.pm\ncp LibXML.pod blib/lib/XML/LibXML.pod\ncp lib/XML/LibXML/Element.pod blib/lib/XML/LibXML/Element.pod\ncp lib/XML/LibXML/Reader.pm blib/lib/XML/LibXML/Reader.pm\ncp lib/XML/LibXML/Schema.pod blib/lib/XML/LibXML/Schema.pod\ncp lib/XML/LibXML/DOM.pod blib/lib/XML/LibXML/DOM.pod\ncp lib/XML/LibXML/Attr.pod blib/lib/XML/LibXML/Attr.pod\ncp lib/XML/LibXML/Namespace.pod blib/lib/XML/LibXML/Namespace.pod\ncp lib/XML/LibXML/RegExp.pod blib/lib/XML/LibXML/RegExp.pod\ncp lib/XML/LibXML/Number.pm blib/lib/XML/LibXML/Number.pm\ncp lib/XML/LibXML/Dtd.pod blib/lib/XML/LibXML/Dtd.pod\ncp lib/XML/LibXML/Error.pod blib/lib/XML/LibXML/Error.pod\ncp lib/XML/LibXML/Devel.pm blib/lib/XML/LibXML/Devel.pm\ncp lib/XML/LibXML/Literal.pm blib/lib/XML/LibXML/Literal.pm\ncp lib/XML/LibXML/RelaxNG.pod blib/lib/XML/LibXML/RelaxNG.pod\ncp lib/XML/LibXML/SAX/Parser.pm blib/lib/XML/LibXML/SAX/Parser.pm\ncp lib/XML/LibXML/Reader.pod blib/lib/XML/LibXML/Reader.pod\ncp lib/XML/LibXML/Error.pm blib/lib/XML/LibXML/Error.pm\ncp lib/XML/LibXML/XPathContext.pm blib/lib/XML/LibXML/XPathContext.pm\ncp lib/XML/LibXML/XPathExpression.pod blib/lib/XML/LibXML/XPathExpression.pod\ncp lib/XML/LibXML/Common.pod blib/lib/XML/LibXML/Common.pod\ncp lib/XML/LibXML/Text.pod blib/lib/XML/LibXML/Text.pod\ncp lib/XML/LibXML/Parser.pod blib/lib/XML/LibXML/Parser.pod\ncp lib/XML/LibXML/XPathContext.pod blib/lib/XML/LibXML/XPathContext.pod\ncp lib/XML/LibXML/AttributeHash.pm blib/lib/XML/LibXML/AttributeHash.pm\ncp lib/XML/LibXML/DocumentFragment.pod blib/lib/XML/LibXML/DocumentFragment.pod\ncp lib/XML/LibXML/Node.pod blib/lib/XML/LibXML/Node.pod\ncp lib/XML/LibXML/SAX/Builder.pm blib/lib/XML/LibXML/SAX/Builder.pm\ncp lib/XML/LibXML/Comment.pod blib/lib/XML/LibXML/Comment.pod\ncp lib/XML/LibXML/SAX/Builder.pod blib/lib/XML/LibXML/SAX/Builder.pod\ncp lib/XML/LibXML/SAX.pod blib/lib/XML/LibXML/SAX.pod\ncp lib/XML/LibXML/CDATASection.pod blib/lib/XML/LibXML/CDATASection.pod\ncp lib/XML/LibXML/ErrNo.pm blib/lib/XML/LibXML/ErrNo.pm\ncp lib/XML/LibXML/SAX.pm blib/lib/XML/LibXML/SAX.pm\ncp lib/XML/LibXML/Document.pod blib/lib/XML/LibXML/Document.pod\ncp lib/XML/LibXML/Pattern.pod blib/lib/XML/LibXML/Pattern.pod\ncp lib/XML/LibXML/Common.pm blib/lib/XML/LibXML/Common.pm\ncp lib/XML/LibXML/ErrNo.pod blib/lib/XML/LibXML/ErrNo.pod\ncp LibXML.pm blib/lib/XML/LibXML.pm\ncp lib/XML/LibXML/Boolean.pm blib/lib/XML/LibXML/Boolean.pm\nRunning Mkbootstrap for LibXML ()\nchmod 644 \"LibXML.bs\"\n\"/Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/perl5.31.3\" -MExtUtils::Command::MM -e 'cp_nonempty' -- LibXML.bs blib/arch/auto/XML/LibXML/LibXML.bs 644\ncc -c   -I/usr/local/Cellar/libxml2/2.9.9_2/include/libxml2  -fno-common -DPERL_DARWIN -mmacosx-version-min=10.15 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"2.0201\\\" -DXS_VERSION=\\\"2.0201\\\"  \"-I/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/CORE\"  -DHAVE_UTF8 Av_CharPtrPtr.c\n\"/Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/perl5.31.3\" \"/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/ExtUtils/xsubpp\"  -typemap '/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/ExtUtils/typemap' -typemap '/Users/test/.cpan/build/XML-LibXML-2.0201-9/typemap'  Devel.xs &gt; Devel.xsc\nmv Devel.xsc Devel.c\ncc -c   -I/usr/local/Cellar/libxml2/2.9.9_2/include/libxml2  -fno-common -DPERL_DARWIN -mmacosx-version-min=10.15 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"2.0201\\\" -DXS_VERSION=\\\"2.0201\\\"  \"-I/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/CORE\"  -DHAVE_UTF8 Devel.c\n\"/Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/perl5.31.3\" \"/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/ExtUtils/xsubpp\"  -typemap '/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/ExtUtils/typemap' -typemap '/Users/test/.cpan/build/XML-LibXML-2.0201-9/typemap'  LibXML.xs &gt; LibXML.xsc\nmv LibXML.xsc LibXML.c\ncc -c   -I/usr/local/Cellar/libxml2/2.9.9_2/include/libxml2  -fno-common -DPERL_DARWIN -mmacosx-version-min=10.15 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"2.0201\\\" -DXS_VERSION=\\\"2.0201\\\"  \"-I/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/CORE\"  -DHAVE_UTF8 LibXML.c\ncc -c   -I/usr/local/Cellar/libxml2/2.9.9_2/include/libxml2  -fno-common -DPERL_DARWIN -mmacosx-version-min=10.15 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"2.0201\\\" -DXS_VERSION=\\\"2.0201\\\"  \"-I/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/CORE\"  -DHAVE_UTF8 dom.c\ncc -c   -I/usr/local/Cellar/libxml2/2.9.9_2/include/libxml2  -fno-common -DPERL_DARWIN -mmacosx-version-min=10.15 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"2.0201\\\" -DXS_VERSION=\\\"2.0201\\\"  \"-I/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/CORE\"  -DHAVE_UTF8 perl-libxml-mm.c\ncc -c   -I/usr/local/Cellar/libxml2/2.9.9_2/include/libxml2  -fno-common -DPERL_DARWIN -mmacosx-version-min=10.15 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"2.0201\\\" -DXS_VERSION=\\\"2.0201\\\"  \"-I/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/CORE\"  -DHAVE_UTF8 perl-libxml-sax.c\ncc -c   -I/usr/local/Cellar/libxml2/2.9.9_2/include/libxml2  -fno-common -DPERL_DARWIN -mmacosx-version-min=10.15 -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -I/opt/local/include -DPERL_USE_SAFE_PUTENV -O3   -DVERSION=\\\"2.0201\\\" -DXS_VERSION=\\\"2.0201\\\"  \"-I/Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/CORE\"  -DHAVE_UTF8 xpath.c\nrm -f blib/arch/auto/XML/LibXML/LibXML.bundle\nLD_RUN_PATH=\"/usr/local/Cellar/libxml2/2.9.9_2/lib\" cc  -mmacosx-version-min=10.15 -bundle -undefined dynamic_lookup -L/usr/local/lib -L/opt/local/lib -fstack-protector-strong  Av_CharPtrPtr.o Devel.o LibXML.o dom.o perl-libxml-mm.o perl-libxml-sax.o xpath.o  -o blib/arch/auto/XML/LibXML/LibXML.bundle  \\\n       -L/usr/local/Cellar/libxml2/2.9.9_2/lib -lxml2   \\\n\nchmod 755 blib/arch/auto/XML/LibXML/LibXML.bundle\nManifying 34 pod documents\n  SHLOMIF/XML-LibXML-2.0201.tar.gz\n  /usr/bin/make -- OK\nThe current configuration of allow_installing_outdated_dists is 'ask/yes', but for this option we would need 'CPAN::DistnameInfo' installed. Please install 'CPAN::DistnameInfo' as soon as possible. As long as we are not equipped with 'CPAN::DistnameInfo' this option does not take effect\nRunning make test for SHLOMIF/XML-LibXML-2.0201.tar.gz\n\"/Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/perl5.31.3\" -MExtUtils::Command::MM -e 'cp_nonempty' -- LibXML.bs blib/arch/auto/XML/LibXML/LibXML.bs 644\nPERL_DL_NONLAZY=1 \"/Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/perl5.31.3\" \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')\" t/*.t\nt/00-report-prereqs.t .............................. # \n# Versions for all modules listed in MYMETA.json (including optional ones):\n# \n# === Configure Requires ===\n# \n#     Module              Want     Have\n#     ------------------- ---- --------\n#     Alien::Libxml2       any     0.09\n#     Config               any 5.031003\n#     ExtUtils::MakeMaker  any     7.36\n# \n# === Build Requires ===\n# \n#     Module              Want Have\n#     ------------------- ---- ----\n#     ExtUtils::MakeMaker  any 7.36\n# \n# === Test Requires ===\n# \n#     Module       Want     Have\n#     ------------ ---- --------\n#     Config        any 5.031003\n#     Errno         any     1.30\n#     IO::File      any     1.41\n#     IO::Handle    any     1.41\n#     POSIX         any     1.89\n#     Scalar::Util  any     1.50\n#     Test::More    any 1.302166\n#     locale        any     1.09\n#     utf8          any     1.22\n# \n# === Runtime Requires ===\n# \n#     Module                    Want  Have\n#     ------------------------- ---- -----\n#     Carp                       any  1.50\n#     DynaLoader                 any  1.45\n#     Encode                     any  3.01\n#     Exporter                  5.57  5.74\n#     IO::Handle                 any  1.41\n#     Scalar::Util               any  1.50\n#     Tie::Hash                  any  1.05\n#     XML::NamespaceSupport     1.07  1.12\n#     XML::SAX                  0.11  1.02\n#     XML::SAX::Base             any  1.09\n#     XML::SAX::DocumentLocator  any undef\n#     XML::SAX::Exception        any  1.09\n#     base                       any  2.27\n#     constant                   any  1.33\n#     overload                   any  1.31\n#     parent                     any 0.237\n#     strict                     any  1.11\n#     vars                       any  1.05\n#     warnings                   any  1.45\n# \nt/00-report-prereqs.t .............................. ok\nt/01basic.t ........................................ 1/3 # \n# \n# Compiled against libxml2 version: 20909\n# Running libxml2 version:          20909\n# \nt/01basic.t ........................................ ok\nt/02parse.t ........................................ ok\nt/03doc.t .......................................... ok\nt/04node.t ......................................... ok\nt/05text.t ......................................... ok\nt/06elements.t ..................................... ok\nt/07dtd.t .......................................... ok\nt/08findnodes.t .................................... ok\nt/09xpath.t ........................................ ok\nt/10ns.t ........................................... ok\nt/11memory.t ....................................... skipped: These tests are for authors only!\nt/12html.t ......................................... ok\nt/13dtd.t .......................................... ok\nt/14sax.t .......................................... ok\nt/15nodelist.t ..................................... ok\nt/16docnodes.t ..................................... ok\nt/17callbacks.t .................................... ok\nt/18docfree.t ...................................... ok\nt/19die_on_invalid_utf8_rt_58848.t ................. ok\nt/19encoding.t ..................................... ok\nt/20extras.t ....................................... ok\nt/21catalog.t ...................................... ok\nt/23rawfunctions.t ................................. ok\nt/24c14n.t ......................................... ok\nt/25relaxng.t ...................................... ok\nt/26schema.t ....................................... ok\nt/27new_callbacks_simple.t ......................... ok\nt/28new_callbacks_multiple.t ....................... ok\nt/29id.t ........................................... ok\nt/30keep_blanks.t .................................. ok\nt/30xpathcontext.t ................................. ok\nt/31xpc_functions.t ................................ ok\nt/32xpc_variables.t ................................ ok\nt/35huge_mode.t .................................... ok\nt/40reader.t ....................................... ok\nt/40reader_mem_error.t ............................. ok\nt/41xinclude.t ..................................... ok\nt/42common.t ....................................... ok\nt/43options.t ...................................... ok\nt/44extent.t ....................................... ok\nt/45regex.t ........................................ ok\nt/46err_column.t ................................... ok\nt/47load_xml_callbacks.t ........................... ok\nt/48_memleak_rt_83744.t ............................ skipped: Test::LeakTrace is required for memory leak tests.\nt/48_reader_undef_warning_on_empty_str_rt106830.t .. ok\nt/48_removeChild_crashes_rt_80395.t ................ ok\nt/48_replaceNode_DTD_nodes_rT_80521.t .............. ok\nt/48_RH5_double_free_rt83779.t ..................... skipped: Test::LeakTrace is required.\nt/48_rt123379_setNamespace.t ....................... ok\nt/48_rt55000.t ..................................... ok\nt/48_rt93429_recover_2_in_html_parsing.t ........... ok\nt/48_SAX_Builder_rt_91433.t ........................ ok\nt/48importing_nodes_IDs_rt_69520.t ................. ok\nt/49_load_html.t ................................... ok\nt/49callbacks_returning_undef.t .................... ok\nt/49global_extent.t ................................ ok\nt/50devel.t ........................................ ok\nt/51_parse_html_string_rt87089.t ................... ok\nt/60error_prev_chain.t ............................. ok\nt/60struct_error.t ................................. ok\nt/61error.t ........................................ ok\nt/62overload.t ..................................... ok\nt/71overloads.t .................................... ok\nt/72destruction.t .................................. ok\nt/80registryleak.t ................................. ok\nt/90shared_clone_failed_rt_91800.t ................. skipped: no ithreads in this Perl\nt/90stack.t ........................................ ok\nt/90threads.t ...................................... skipped: no ithreads in this Perl\nt/91unique_key.t ................................... ok\nt/cpan-changes.t ................................... skipped: These tests are for authors only!\nt/pod-files-presence.t ............................. ok\nt/pod.t ............................................ skipped: These tests are for authors only!\nt/release-kwalitee.t ............................... skipped: These tests are for authors only!\nt/style-trailing-space.t ........................... skipped: These tests are for authors only!\nAll tests successful.\nFiles=75, Tests=2529, 14 wallclock secs ( 0.51 usr  0.22 sys +  9.62 cusr  2.02 csys = 12.37 CPU)\nResult: PASS\n  SHLOMIF/XML-LibXML-2.0201.tar.gz\n  /usr/bin/make test -- OK\nRunning make install for SHLOMIF/XML-LibXML-2.0201.tar.gz\n\"/Users/test/perl5/perlbrew/perls/perl-5.31.3/bin/perl5.31.3\" -MExtUtils::Command::MM -e 'cp_nonempty' -- LibXML.bs blib/arch/auto/XML/LibXML/LibXML.bs 644\nManifying 34 pod documents\nFiles found in blib/arch: installing files in blib/lib into architecture dependent library tree\nAppending installation info to /Users/test/perl5/perlbrew/perls/perl-5.31.3/lib/5.31.3/darwin-2level/perllocal.pod\n  SHLOMIF/XML-LibXML-2.0201.tar.gz\n  /usr/bin/make install  -- OK\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["perl", "gd-graph"], "comments": [{"owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1566995628, "post_id": 57684173, "comment_id": 101829233, "body": "Is it web-based?"}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "reply_to_user": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1566998884, "post_id": 57684173, "comment_id": 101831206, "body": "@Bruce no its not a web based"}, {"owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1566999246, "post_id": 57684173, "comment_id": 101831463, "body": "How are you running the script - command line, also Linux or Windows?"}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "reply_to_user": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567039810, "post_id": 57684173, "comment_id": 101846924, "body": "im using linux :U @Bruce"}, {"owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567063721, "post_id": 57684173, "comment_id": 101852807, "body": "So you are executing the script via the command line?"}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "reply_to_user": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "edited": false, "score": 0, "creation_date": 1567127129, "post_id": 57684173, "comment_id": 101880217, "body": "@Bruce im using script (perl)"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1567139290, "post_id": 57713478, "comment_id": 101882050, "body": "can u look at  my code if there is anything wrong with it ?? there is no error but the graph is shown with the y values start with a negative number"}], "tags": [], "owner": {"reputation": 337, "user_id": 1647792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47536c972ed2940b986e18528318843a?s=128&d=identicon&r=PG", "display_name": "jazzmasterkc", "link": "https://stackoverflow.com/users/1647792/jazzmasterkc"}, "is_accepted": false, "score": 2, "last_activity_date": 1567092728, "creation_date": 1567092728, "answer_id": 57713478, "question_id": 57684173, "link": "https://stackoverflow.com/questions/57684173/how-to-insert-mysql-data-into-perl-graph-editted/57713478#57713478", "title": "How to insert mysql data into perl graph (Editted)", "body": "<p>This is possible to do. One can use DBI to get data from MySQL. Then, you can arrange the data into a format to graph it using a graphing library. I have used GD::Graph and is easy to use.</p>\n\n<p>Links:\nMySQL: <a href=\"https://metacpan.org/pod/DBD::mysql\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBD::mysql</a>\nGraph: <a href=\"https://metacpan.org/pod/GD::Graph\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/GD::Graph</a></p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 1, "creation_date": 1567494701, "post_id": 57724961, "comment_id": 101968621, "body": "sorry for the late reply ... this works wonders .. thank u  @Bruce"}], "tags": [], "owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "is_accepted": true, "score": 0, "last_activity_date": 1567160597, "creation_date": 1567160597, "answer_id": 57724961, "question_id": 57684173, "link": "https://stackoverflow.com/questions/57684173/how-to-insert-mysql-data-into-perl-graph-editted/57724961#57724961", "title": "How to insert mysql data into perl graph (Editted)", "body": "<p>The data structure is not correct. </p>\n\n<p>Not sure of your database table, but if you have the time field in it then something like below should work.</p>\n\n<pre><code>    my $data = GD::Graph::Data-&gt;new();\n    my $sth = $dbh_mysql-&gt;prepare('SELECT hour, CPU_USER, CPU_System, CPU_Waiting FROM top1');\n    $sth-&gt;execute();\n    while (my @row = $sth-&gt;fetchrow_array) \n    {\n        $data-&gt;add_point(@row);\n    }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 57724961, "answer_count": 2, "score": 0, "last_activity_date": 1567160597, "creation_date": 1566957720, "last_edit_date": 1567128022, "question_id": 57684173, "link": "https://stackoverflow.com/questions/57684173/how-to-insert-mysql-data-into-perl-graph-editted", "title": "How to insert mysql data into perl graph (Editted)", "body": "<p>So my task is creating a graph of the data that is inside MySQL table (which is around 41 data with 7 rows) . I only did a basic graph  ... so is it possible for me to even create a graph using the data that is inside MySQL table using perl script.</p>\n\n<p>sorry for the lack of codding though since i dont even know how to create a perl graph using MySQL data</p>\n\n<p>Edit </p>\n\n<p>i tried doing the graph but it seems that the data isnt showing up as it attended . it only shown only an empty graph and the values start with a negative for some reason... is there something that i did wrong ?</p>\n\n<p>my sql table </p>\n\n<pre><code>create table Top_1 (\nCPU_User float, CPU_System float, CPU_Waiting float);\n\n</code></pre>\n\n<p>my script</p>\n\n<pre><code>\n#!/usr/bin/perl\n\nuse DBI;\nuse warnings;\nuse strict;\nuse autodie;\nuse Data::Dumper;\nuse GD::Graph::bars;\nuse GD::Graph::Data;\n\n\nmy $username = \"root\";\nmy $password = \"\";\nmy $db = \"Top_Data_1\";\nmy $host = \"127.0.0.1\";\nmy $port = \"3306\";\n\nmy $dsn = \"DBI:mysql:database=$db;host=$host;port=$port\";\nmy %attr = (PrintError=&gt;0,RaiseError=&gt;1 );\nmy $dbh = DBI-&gt;connect($dsn,$username,$password,\\%attr) or die $DBI::errstr;\n\nmy $sth = $dbh-&gt;prepare('CPU_User, CPU_System, CPU_Waiting from Top_1');\n$sth-&gt;execute();\nmy @row;\nwhile ( @row = $sth-&gt;fetchrow_array) {\n\n    print \"this is CPU_User\\n\";\n    print \"$row[0]\\n\";\n\n    print \"this is CPU_System \\n\";\n    print \"$row[1]\\n\";\n\n    print \"this is CPU_Waiting \\n\";\n    print \"$row[2]\\n\";\n\n\n                    }\n\nmy $data = GD::Graph::Data-&gt;new([ \n\n[\"8 am\",\"10 pm\",\"12 pm\"],\n['$row[0]'],\n['$row[1]'],\n['$row[2]'],\n]) or die GD::Graph::Data-&gt;error;  \n\nmy $graph = GD::Graph::bars-&gt;new;\n\n$graph-&gt;set( \n    x_label         =&gt; 'File_Name',\n    y_label         =&gt; 'Value',\n    title           =&gt; 'TOP CPU DISPLAY',\n\n    x_labels_vertical =&gt; 1,\n    bar_spacing =&gt; 10,\n    bar_width =&gt; 3,\n    long_ticks =&gt; 1,\n\n    ) or die $graph-&gt;error;\n\n$graph-&gt;set_legend_font(GD::gdMediumBoldFont);\n$graph-&gt;set_legend('CPU USER','CPU_System','CPU_Waiting');\n\n$graph-&gt;plot($data) or die $graph-&gt;error;\n\nmy $file = 'bars.png';\nprint \"Your Picture Has Been Added To Your Directory\\n\";\nopen(my $out, '&gt;', $file) or die \"Cannot open '$file' for write: $!\";\n\nbinmode $out;\nprint $out $graph-&gt;gd-&gt;png;\nclose $out;\n\n$sth-&gt;finish();\n$dbh-&gt;disconnect();\n</code></pre>\n"}, {"tags": ["mysql", "perl", "strawberry-perl"], "comments": [{"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567101549, "post_id": 57682296, "comment_id": 101873011, "body": "I understand you tried multiple perl installations, that might possibly have messed up things. First thing to check: Is &quot;C:/perlstrawberry/5.30.0.1/perl/vendor/lib&quot; actually in @INC (PERL5LIB in the environment)?"}, {"owner": {"reputation": 514, "user_id": 3477493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81be5771e545ed8340740b38d4c7edba?s=128&d=identicon&r=PG&f=1", "display_name": "user3477493", "link": "https://stackoverflow.com/users/3477493/user3477493"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567102186, "post_id": 57682296, "comment_id": 101873245, "body": "I took specific care are to avoid that possibility. Since Strawberry perl gives me the option of avoiding the windows installer in favor of a zip file, I used the zip in my custom directory. ActiveState uses a windows installer to install to c:\\perl64 by default."}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567103858, "post_id": 57682296, "comment_id": 101873889, "body": "Even more so important you make sure <code>PERL5LIB</code> points to the correct paths. Did you do that?"}, {"owner": {"reputation": 514, "user_id": 3477493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81be5771e545ed8340740b38d4c7edba?s=128&d=identicon&r=PG&f=1", "display_name": "user3477493", "link": "https://stackoverflow.com/users/3477493/user3477493"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567184772, "post_id": 57682296, "comment_id": 101901705, "body": "I do $SBPERLBIN/perl -e &quot;print qq(@INC)&quot; and the paths look correct for strawberry perl. I have .../perl/site/lib and .../perl/vender/lib and .../perl/lib. I confirmed that they all exist."}, {"owner": {"reputation": 514, "user_id": 3477493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81be5771e545ed8340740b38d4c7edba?s=128&d=identicon&r=PG&f=1", "display_name": "user3477493", "link": "https://stackoverflow.com/users/3477493/user3477493"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567184876, "post_id": 57682296, "comment_id": 101901745, "body": "I use the same command for ActiveState perl and @INC contains .../site/lib and .../lib and these directories exist."}, {"owner": {"reputation": 514, "user_id": 3477493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81be5771e545ed8340740b38d4c7edba?s=128&d=identicon&r=PG&f=1", "display_name": "user3477493", "link": "https://stackoverflow.com/users/3477493/user3477493"}, "reply_to_user": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567185004, "post_id": 57682296, "comment_id": 101901792, "body": "After google searching I still need help with PERL5LIB. Is this an environment variable? I have not defined it. What should it be defined to be?"}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 0, "creation_date": 1567185488, "post_id": 57682296, "comment_id": 101901985, "body": "Yes, it lives in the environment, just like PATH and points to where Perl is looking for modules. But I read the question again, and it looks like your are calling the wrong Perl. See, It&#39;s looking for modules in <code>C:&#47;perlstrawberry&#47;5.30.0.1&#47;...</code>, but the code that is doing that is located in <code>C:&#47;Users&#47;2207458&#47;Documents&#47;AppBin&#47;perlstrawberry&#47;5.30.0.1</code>. That seems very fishy."}], "answers": [{"tags": [], "owner": {"reputation": 514, "user_id": 3477493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81be5771e545ed8340740b38d4c7edba?s=128&d=identicon&r=PG&f=1", "display_name": "user3477493", "link": "https://stackoverflow.com/users/3477493/user3477493"}, "is_accepted": false, "score": 1, "last_activity_date": 1574180049, "creation_date": 1574180049, "answer_id": 58938466, "question_id": 57682296, "link": "https://stackoverflow.com/questions/57682296/how-to-access-mysql-v8-on-windows-v10-with-perl/58938466#58938466", "title": "How to access mysql V8 on windows V10 with perl?", "body": "<p><a href=\"https://lefred.be/content/perl-mysql-8-0/\" rel=\"nofollow noreferrer\">The answer for windows (and apparently linux) is here: Lefred's Blog</a></p>\n\n<p>I issued this command and reset the password:</p>\n\n<pre><code>alter user 'fred' identified   with 'mysql_native_password' by 'mysecurepasswd';\n</code></pre>\n\n<p>This worked for me using ActiveState Perl v5.4 and mysql 8.0.17-winx64.</p>\n\n<p>Apparently this is a security compromise because we are using an older plugin to compare passwords?</p>\n"}], "owner": {"reputation": 514, "user_id": 3477493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/81be5771e545ed8340740b38d4c7edba?s=128&d=identicon&r=PG&f=1", "display_name": "user3477493", "link": "https://stackoverflow.com/users/3477493/user3477493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574180049, "creation_date": 1566940116, "last_edit_date": 1567208214, "question_id": 57682296, "link": "https://stackoverflow.com/questions/57682296/how-to-access-mysql-v8-on-windows-v10-with-perl", "title": "How to access mysql V8 on windows V10 with perl?", "body": "<p>I'm mystified that this is so difficult.</p>\n\n<p>(1) With activate state perl v5.26.3 I use ppm.bat and search for mysql and DBD-mysql is missing. As per <a href=\"https://code.activestate.com/ppm/DBD-mysql/\" rel=\"nofollow noreferrer\">https://code.activestate.com/ppm/DBD-mysql/</a> I try </p>\n\n<pre><code>ppm install DBD-mysql\n</code></pre>\n\n<p>I get: </p>\n\n<pre><code>ppm install failed: Can't find any package that provides DBD-mysql\n</code></pre>\n\n<p>(2) With the same activestate perl's ppm.bat I see mysqlPP and this does not work with MySQL V8 either:</p>\n\n<pre><code>perl -MDBI -e '$cat=$ENV{\"MYSQLDATABASECATALOG\"}; $svr=$ENV{\"MYSQLHOST\"}; $user=$ENV{\"DATABASEUSER\"}; $pass=$ENV{\"DATABASECATALOGPASSWORD\"}; my $dbh=DBI-&gt;connect(\"dbi:mysqlPP:database=$cat;host=$svr\",$user,$pass,{ RaiseError =&gt; 1 }) or die \"Cannot connect to $data_source: $DBI::errstr\"; my $q=$ARGV[0]; my $sth=$dbh-&gt;prepare($q) or die \"Cannot prepare statement: $DBI::errstr\"; $sth-&gt;execute(); ... $sth-&gt;finish(); $dbh-&gt;disconnect;'  \"&lt;query goes here&gt;\"\n\nDBI connect('database=sqlpocket;host=localhost','sqlpocket',...) failed: #08004Client does not support authentication protocol requested by server; consider upgrading MySQL client at C:/Perl64/site/lib/DBD/mysqlPP.pm line 116.\n</code></pre>\n\n<p>(3) Strawberry perl is suppose to have DBD for mysql already installed and that does not work either:</p>\n\n<pre><code>perl -MDBI -e '$cat=$ENV{\"MYSQLDATABASECATALOG\"}; $svr=$ENV{\"MYSQLHOST\"}; $user=$ENV{\"DATABASEUSER\"}; $pass=$ENV{\"DATABASECATALOGPASSWORD\"}; my $dbh=DBI-&gt;connect(\"dbi:mysql:dbname=$cat\",$user,$pass,{ RaiseError =&gt; 1 }) or die \"Cannot connect to $data_source: $DBI::errstr\"; my $q=$ARGV[0]; my $sth=$dbh-&gt;prepare($q) or die \"Cannot prepare statement: $DBI::errstr\"; $sth-&gt;execute(); ... $sth-&gt;finish(); $dbh-&gt;disconnect;'  \"&lt;sql query goes here&gt;\"\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>install_driver(mysql) failed: Can't load 'C:/perlstrawberry/5.30.0.1/perl/vendor/lib/auto/DBD/mysql/mysql.xs.dll' for module DBD::mysql: load_file:The specified module could not be found at C:/Users/2207458/Documents/AppBin/perlstrawberry/5.30.0.1/perl/lib/DynaLoader.pm line 193.\nPerhaps a required shared library or dll isn't installed where expected.\n</code></pre>\n\n<p>This is odd because \"C:/perlstrawberry/5.30.0.1/perl/vendor/lib/auto/DBD/mysql/mysql.xs.dll\" exists and is accessible.</p>\n\n<p>30 Aug 2019 Update:</p>\n\n<p>I'm sorry, I was trying to be less verbose and got sloppy: I removed the \"Users/2207458/Documents/AppBin\" from the above file name (but I was not consistent). So C:/perlstrawberry/5.30.0.1/perl/vendor/lib/auto/DBD/mysql/mysql.xs.dll was really c:/Users/2207458/Documents/AppBin/perlstrawberry/5.30.0.1/perl/vendor/lib/auto/DBD/mysql/mysql.xs.dll.</p>\n\n<p>PERL5LIB has never been defined. Does it need to be?</p>\n"}, {"tags": ["perl", "ipc"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1566931702, "post_id": 57679883, "comment_id": 101807844, "body": "You get zombie processes when the parent doesn&#39;t  <code>wait</code> on the child&#39;s exit code. What does <code>status_ok()</code> do? Does that exit the program? Wait for the child? You should probably handle SIG_CHLD; <a href=\"https://stackoverflow.com/questions/1608017/no-child-process-error-from-waitpid-when-waiting-for-process-group\" title=\"no child process error from waitpid when waiting for process group\">stackoverflow.com/questions/1608017/&hellip;</a>  may be helpful."}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "reply_to_user": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 0, "creation_date": 1566932625, "post_id": 57679883, "comment_id": 101808250, "body": "This is in a web framework; <code>status_ok()</code> basically sends a message to the front end saying &quot;Your request is being processed; you should get e-mail shortly with full details&quot; and then exits (we send e-mail when the child&#39;s system command is complete). We don&#39;t handle <code>SIG_CHLD</code> anywhere, and I&#39;m not really sure how to. But again, this had been running for years with no problems until recently."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1566932856, "post_id": 57679883, "comment_id": 101808348, "body": "The comment should be changed to &quot;Ignore dead children to ensure they become zombies&quot;"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1566933763, "post_id": 57679883, "comment_id": 101808695, "body": "If the parent typically exits after sending a response, then the child gets inherited by pid 1 and is immediately waited on.  If you&#39;re now getting zombies, it&#39;s because the parent is not exiting.  Probably it is blocking when attempting to send the response."}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1566936412, "post_id": 57679883, "comment_id": 101809720, "body": "I would add some monitoring code.  In the parent, monitor the child with <code>kill 0, $child</code> and <code>ps</code>.  In the child, check the command before execution e.g. <code>ls -la $command[0]</code>.  Decode $? and $!. Try doing the spawn manually rather than with IPC::System::Simple.  Try IPC::Cmd.  Try manually running whatever <code>@command</code> contained at the shell prompt.  Try adding an <code>strace</code> in front of the command.  Commands failing to start can have bizarre causes.  Maybe you need to rebase.  Maybe a new library is hooking your process and breaking it. HTH."}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1566937050, "post_id": 57679883, "comment_id": 101809968, "body": "I may well be misunderstanding some (most/all) of what&#39;s happening, but: As far as we can tell there are no zombies. We have the &quot;No child processes&quot; error but don&#39;t actually know what that means; we get this even immediately after restarting the webservers, when resources should be available. As for the parent waiting on the child&#39;s exit code: We don&#39;t want to do this at all, that&#39;s the whole point of forking: The parent has to return a &quot;processing&quot; message and then go away, while the child is still doing its thing. (continued)"}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1566937057, "post_id": 57679883, "comment_id": 101809974, "body": "And the parent doesn&#39;t seem to be blocking; at least, the front end gets the &quot;processing&quot; message, which suggests that the parent is successfully sending its response. Regarding monitoring, we did move to regular <code>system()</code>, or backticks; this had no effect. The itself command itself runs fine when run manually on the commandline, but of course the command never runs in the first place."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567017286, "post_id": 57679883, "comment_id": 101840518, "body": "note that fork() returns &quot;the child pid to the parent process, 0 to the child process, or undef if the fork is unsuccessful&quot;.  you really should check for error, not assume you are in the child when it is unsuccessful."}], "answers": [{"comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1566955741, "post_id": 57683743, "comment_id": 101813930, "body": "also, checking if fork failed instead of assuming false means you are in the child is a good idea"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1566974357, "post_id": 57683743, "comment_id": 101817933, "body": "@ysth, Shouldn&#39;t that have been a comment to the OP? Anyway, there&#39;s obviously missing parts to the code (e.g. the lack of <code>exit</code> in the child), but I decided to simply answer the question rather than speculating about the OP&#39;s actual code. Similarly, the OP&#39;s code obviously needs a code review (e.g. the <code>use</code> statement in the middle of run-time code), but I didn&#39;t want to veer off-topic."}, {"owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "edited": false, "score": 0, "creation_date": 1567010791, "post_id": 57683743, "comment_id": 101837934, "body": "Yes, I did modify the code for simplicity&#39;s sake, and I apologize if it resulted in something confusing. The original does indeed have <code>CORE::exit(0);</code> in the child, and it doesn&#39;t actually have <code>use IPC::System::Simple</code> in the middle of the code, but I wanted to make it clear where <code>capture</code> was coming from without bothering to indicate that it&#39;s 300 lines above etc. In any event, this solution is working for me, so, thank you very much!"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1567017199, "post_id": 57683743, "comment_id": 101840487, "body": "@ikegami fair enough"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1566955926, "last_edit_date": 1566955926, "creation_date": 1566953213, "answer_id": 57683743, "question_id": 57679883, "link": "https://stackoverflow.com/questions/57679883/perl-fork-avoiding-zombie-processes-and-no-child-processes-error/57683743#57683743", "title": "Perl: fork(), avoiding zombie processes, and &quot;No child processes&quot; error", "body": "<blockquote>\n  <p><em>There was a suggestion to change $SIG{CHLD} from 'IGNORE' to 'DEFAULT', but then I have to worry about zombie processes.</em></p>\n</blockquote>\n\n<p>This isn't true.</p>\n\n<p>A zombie process is a process that has ended, but hasn't been reaped by its parent yet. A parent reaps its children using <code>wait</code>(2), <code>waitpid</code>(2) or similar. <code>capture</code> waits for its child to end, so it doesn't leave any zombie behind.</p>\n\n<p>In fact, the error you are getting is from <code>waitpid</code>. <code>capture</code> is waiting for the child to end to reap it and collect its error code, but the you instructed the OS to clean up the child as soon as it completes, leaving <code>waitpid</code> with no child to reap and no error code to collect.</p>\n\n<p>To fix this problem, simply place <code>local $SIG{CHLD} = 'DEFAULT';</code> before the call to <code>capture</code>.</p>\n"}], "owner": {"reputation": 497, "user_id": 1235777, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fa26410672147914cae5de97ad99bdf2?s=128&d=identicon&r=PG", "display_name": "user1235777", "link": "https://stackoverflow.com/users/1235777/user1235777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 57683743, "answer_count": 1, "score": 3, "last_activity_date": 1566955926, "creation_date": 1566928188, "question_id": 57679883, "link": "https://stackoverflow.com/questions/57679883/perl-fork-avoiding-zombie-processes-and-no-child-processes-error", "title": "Perl: fork(), avoiding zombie processes, and &quot;No child processes&quot; error", "body": "<p>I have a Perl app that's been running largely untroubled on a RH system for a few years. In one place, I have to run a system command that can take take many minutes to complete, so I do this in a child process. The overall structure is like this:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    $SIG{CHLD} = 'IGNORE'; # Ignore dead children, to avoid zombie processes\n    my $child = fork();\n\n    if ($child) {    # Parent; return OK\n       $self-&gt;status_ok();  \n    } else {         # Child; run system command\n         # do a bunch of data retrieval, etc.\n         my $output;\n         my @command = # generate system command here\n         use IPC::System::Simple 'capture';\n         eval { $output = capture(@command); };\n         $self-&gt;log-&gt;error(\"Error running @command: $@\") if $@;\n         # success: log $output, carry on\n    }\n</code></pre>\n\n<p>We recently changed some of our infrastructure, although not in ways that I expected would have any influence on this. (Still running on RH, still using nginx, etc.) However, now we find that almost every instance of running this code fails, logging 'Error running {command}: failed to start: \"No child processes\" at /path/to/code.pl'.</p>\n\n<p>I've looked around and can't figure out what the right solution is for this. There was a suggestion to change <code>$SIG{CHLD}</code> from 'IGNORE' to 'DEFAULT', but then I have to worry about zombie processes. </p>\n\n<p>What is causing the \"No child processes\" error, and how do we fix this?</p>\n"}, {"tags": ["perl", "gd"], "comments": [{"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1566921466, "post_id": 57678124, "comment_id": 101803697, "body": "i changed it to <code>my ($basename,$parentdir,$ext) = fileparse($file, qr&#47;\\.[^.]*$&#47;);</code> and still no go"}], "answers": [{"comments": [{"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1567086241, "post_id": 57709471, "comment_id": 101865324, "body": "Yep i figured that out"}, {"owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "reply_to_user": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1567086502, "post_id": 57709471, "comment_id": 101865482, "body": "Still got issues with it?"}, {"owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "edited": false, "score": 0, "creation_date": 1567129538, "post_id": 57709471, "comment_id": 101880556, "body": "no that did it i debugged it a few hours before you :)"}], "tags": [], "owner": {"reputation": 1534, "user_id": 189095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93335ee418c767bd4a62b3f641bc01ff?s=128&d=identicon&r=PG", "display_name": "Bruce", "link": "https://stackoverflow.com/users/189095/bruce"}, "is_accepted": true, "score": 0, "last_activity_date": 1567079058, "creation_date": 1567079058, "answer_id": 57709471, "question_id": 57678124, "link": "https://stackoverflow.com/questions/57678124/not-recognizing-png-files-for-image-processing/57709471#57709471", "title": "Not recognizing png files for image processing", "body": "<p>Check what value is being returned to $ext.</p>\n\n<p>Based on your code:</p>\n\n<pre><code>my $file = \"image_file.jpg\";\nmy ($ext) = $file =~ /(\\.[^.]+)$/;\nsay $ext; \n</code></pre>\n\n<p>This will print \".jpg\" which is why the code without the conditional works as the condtion will fail as it is for \"jpg\" and not \".jpg\"</p>\n"}], "owner": {"reputation": 8219, "user_id": 135605, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/7c56ff86a79852b167d84b3838756fba?s=128&d=identicon&r=PG", "display_name": "somejkuser", "link": "https://stackoverflow.com/users/135605/somejkuser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57709471, "answer_count": 1, "score": 1, "last_activity_date": 1567079058, "creation_date": 1566920272, "last_edit_date": 1566920945, "question_id": 57678124, "link": "https://stackoverflow.com/questions/57678124/not-recognizing-png-files-for-image-processing", "title": "Not recognizing png files for image processing", "body": "<p>I'm trying to add png resolution to our image processing code. I'm getting the following error which i do not know how to resolve.</p>\n\n<p><code>[Tue Aug 27 15:32:03.968126 2019] [cgi:error] [pid 3206] [client] AH01215: Can't call method \"getBounds\" on an undefined value</code></p>\n\n<p>Here's my code.</p>\n\n<pre><code>my $file = \"$datapath/$rs-&gt;{'path'}\";\nmy ($ext) = $file =~ /(\\.[^.]+)$/;\nif ($ext eq \"jpg\"){\n my $src=GD::Image-&gt;newFromJpeg(\"$datapath/$rs-&gt;{'path'}\",1);\n} else {\n my $src=GD::Image-&gt;newFromPng(\"$datapath/$rs-&gt;{'path'}\",1);\n}\nmy ($w,$h)=$src-&gt;getBounds();\n</code></pre>\n\n<p>When I have this code, which is just jpg, it works:</p>\n\n<pre><code>my $file = \"$datapath/$rs-&gt;{'path'}\";\nmy ($ext) = $file =~ /(\\.[^.]+)$/;\nmy $src=GD::Image-&gt;newFromJpeg(\"$datapath/$rs-&gt;{'path'}\",1);\nmy ($w,$h)=$src-&gt;getBounds();\n</code></pre>\n\n<p>UPDATE</p>\n\n<p>Now <code>jpegs</code> arent displaying.</p>\n\n<pre><code>my $file = \"$datapath/$rs-&gt;{'path'}\";\nmy ($ext) = $file =~ /(\\.[^.]+)$/;\nmy $src;\nif ($ext eq \"jpg\"){\n   $src=GD::Image-&gt;newFromJpeg(\"$datapath/$rs-&gt;{'path'}\",1);\n} else {\n   $src=GD::Image-&gt;newFromPng(\"$datapath/$rs-&gt;{'path'}\",1);\n}\nmy $img=GD::Image-&gt;new($ow,$oh,1);\n$img-&gt;copyResampled($src,$x,$y,0,0,$nw,$nh,$w,$h);\n$img-&gt;edgeImageSharpen(9);\n$img-&gt;edgeBrightnessContrast(8,1.1);\nif($ext eq \"jpg\"){\n  my $jpg=$img-&gt;jpeg(90);\n  print \"Content-Type: image/jpeg\\n\";\n  print \"Content-Length: \".length($jpg).\"\\n\\n\";\n  print $jpg;\n} else {\n  my $png=$img-&gt;png;\n  print \"Content-Type: image/png\\n\";\n  print \"Content-Length: \".length($png).\"\\n\\n\";\n  print $png;\n}\n</code></pre>\n"}, {"tags": ["arrays", "regex", "perl", "append"], "answers": [{"comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 1, "creation_date": 1566925134, "post_id": 57677459, "comment_id": 101805256, "body": "And that looks like <code>perl -lne &#39;print(split()[2]) if &#47;^M&#47;&#39; test.txt</code> to me"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566952588, "post_id": 57677459, "comment_id": 101813479, "body": "How can the script read all array at the same time at different part? It is because my real script will called certain column at different part."}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566954088, "post_id": 57677459, "comment_id": 101813700, "body": "another one, i still want to read data after &quot;+&quot; and append it to the previous line."}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1566997085, "post_id": 57677459, "comment_id": 101830094, "body": "Try loading the input file data that you want to keep into a data structure, where lines starting with <code>+</code> get appended to the previous.  Then close the input file, and use the data structure to generate output.  If you run into trouble, that&#39;s a separate question."}], "tags": [], "owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "is_accepted": false, "score": 3, "last_activity_date": 1566999543, "last_edit_date": 1566999543, "creation_date": 1566917845, "answer_id": 57677459, "question_id": 57676880, "link": "https://stackoverflow.com/questions/57676880/how-to-save-data-in-array-form-in-perl/57677459#57677459", "title": "how to save data in array form in perl?", "body": "<p>You can simplify the code this way</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nopen (my $f,'&lt;',\"test.txt\");\nwhile(my $k = &lt;$f&gt;)\n{\n    chomp $k;\n    print ((split(/\\s+/,$k))[2] . \"\\n\") if ($k=~ m/^M/);\n}\nclose $f;\n</code></pre>\n\n<p>Second version combines the lines into array and then prints the column you need</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @data;\nopen (my $f,'&lt;',\"test.txt\");\nwhile(my $k = &lt;$f&gt;) {\n    chomp $k;\n    if ($k =~ /^M/) {\n        push(@data, $k);\n    }\n    elsif($k =~ /^\\+(.+)/) {\n        $data[-1] .= $1;\n    }\n    else {}\n}\nclose $f;\nforeach my $line (@data) {\n    print ((split(/\\s+/,$line))[2] . \"\\n\");\n}\n</code></pre>\n\n<p>You could also split first and then create the array of array references to make the data structure mentioned in the comment.</p>\n"}], "owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566999543, "creation_date": 1566916000, "last_edit_date": 1566916126, "question_id": 57676880, "link": "https://stackoverflow.com/questions/57676880/how-to-save-data-in-array-form-in-perl", "title": "how to save data in array form in perl?", "body": "<p>I want to print each data in one line as in array form. \nMy input is shown below:</p>\n\n<pre><code>Mn1 o1 a ss vs nsvt 0.17 0.02 $$UNI\nMn2 o1 b n2 vs nsvt 0.272 0.02 $$UNI\nMn3 n2 c ss vs nsvt 0.272 0.02 $$UNI\nMp1 o1 a n1 vc  svt 0.476 0.02 $$UNI\nMp2 n1 b cc vcc xsvt 0.51 0.02 $$UNI\nMp3 n1 c cc vc svt 0.51 0.02 $$UNI\nMibit0e[0].g00.xxx camoutbit0p0 ibit0e[0].bit camblp0y[0] vs svt  \n+ 0.068 0.02 \nMibit0e[0].g00.bbb camoutbit0p0 ibit0e[0].bitx camblp0y[0] vc  \n+ pvt 0.068 0.02 \nMibit0e[0].g01.qqq camoutbit0p1 ibit0e[0].bit camblp1y[0] vs nsvt  \n+ 0.068 0.02 \nMibit0e[0].g01.sss camoutbit0p1 ibit0e[0].bitx camblp1y[0] vc  \n+ pxt 0.068 0.02 \n</code></pre>\n\n<p>current output:</p>\n\n<pre><code> Mn1 o1 a ss vs nsvt 0.17 0.02 $$UNI\n Mn2 o1 b n2 vs nsvt 0.272 0.02 $$UNI\n Mn3 n2 c ss vs nsvt 0.272 0.02 $$UNI\n Mp1 o1 a n1 vc  svt 0.476 0.02 $$UNI\n Mp2 n1 b cc vcc xsvt 0.51 0.02 $$UNI\n Mp3 n1 c cc vc svt 0.51 0.02 $$UNI\n Mibit0e[0].g00.xxx camoutbit0p0 ibit0e[0].bit camblp0y[0] vs svt  0.068 0.02 \n Mibit0e[0].g00.bbb camoutbit0p0 ibit0e[0].bitx camblp0y[0] vc  pvt 0.068 0.02 \n Mibit0e[0].g01.qqq camoutbit0p1 ibit0e[0].bit camblp1y[0] vs nsvt  0.068 0.02 \n Mibit0e[0].g01.sss camoutbit0p1 ibit0e[0].bitx camblp1y[0] vc  pxt 0.068 0.02 \n</code></pre>\n\n<p>when I change to <code>print\"$p[2]\\n\"</code>, the output is shown below: </p>\n\n<pre><code>Mn3 n2 c ss vs nsvt 0.272 0.02 $$UNI.\n</code></pre>\n\n<p>but my expected output are all data in third coluumn : </p>\n\n<pre><code>a\nb\nc\na\nb\nc\nibit0e[0].bit\nibit0e[0].bitx\nibit0e[0].bit\nibit0e[0].bitx\n</code></pre>\n\n<p>current code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nmy $k;\nmy $f;\nmy $a;\nmy $v;\nmy @p;\nmy @a;\nmy @array;\nmy $x;\nmy $h;\nmy @m;\nmy @n;\nmy $p;\nopen ($f,'&lt;',\"test.txt\");\nwhile($k = &lt;$f&gt;)\n{\nchomp $k;\n if ($k=~ m/^M/)\n  {\n   my @h= split (/\\s+/,$k);\n   my $h= @h;\n  if($h!=9)\n   {\n   my $v = &lt;$f&gt;;\n   $v =~ s/\\+//;\n   $x = \"$k $v\";\n   push @p,$x;\n   }\n  else \n   {\n  $x = \"$k\\n\";\n  push @p,$x;\n   }\n  }\n}\nclose $f;\nprint \"@p\\n\";\n</code></pre>\n\n<p>when i change to <code>print\"$p[2]\\n\",</code> the output is <code>Mn3 n2 c ss vs nsvt 0.272 0.02 $$UNI.</code>\nbut the output I want is the third column, not the third row. my expected output as shown below:</p>\n\n<pre><code>a\nb\nc\na\nb\nc\nibit0e[0].bit\nibit0e[0].bitx\nibit0e[0].bit\nibit0e[0].bitx\n</code></pre>\n"}, {"tags": ["perl", "xs"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1566912395, "post_id": 57675362, "comment_id": 101798528, "body": "I wonder if <a href=\"https://codereview.stackexchange.com\">Code Review</a> isn&#39;t better suited for this. I also wonder if there is any traffic at all for XS there."}], "answers": [{"tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": 2, "last_activity_date": 1566912514, "creation_date": 1566912514, "answer_id": 57675761, "question_id": 57675362, "link": "https://stackoverflow.com/questions/57675362/how-to-export-symbols-defined-in-a-c-library-as-perl-constants-using-xs/57675761#57675761", "title": "How to export symbols defined in a C library as Perl constants using XS?", "body": "<p>You can change </p>\n\n<pre><code>sub STRUCT_TYPE1 {\n    return $STRUCT_TYPE1;\n}\n\n...\n</code></pre>\n\n<p>To this.</p>\n\n<pre><code>for my $id ( 1 .. $MAX_SUB ) { # Max sub is the number of exported symbles\n    no strict 'refs';\n    my $struct = 'STRUCT_TYPE' . $id;\n    *{ $struct } = sub { $$struct };\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1566925152, "creation_date": 1566925152, "answer_id": 57679258, "question_id": 57675362, "link": "https://stackoverflow.com/questions/57675362/how-to-export-symbols-defined-in-a-c-library-as-perl-constants-using-xs/57679258#57679258", "title": "How to export symbols defined in a C library as Perl constants using XS?", "body": "<p>Here is way to avoid repetition of the symbol names in different files, and make hopefully make things easier to maintain. First I generated a JSON file:</p>\n\n<p><strong>symbols.json</strong>:</p>\n\n<pre><code>{\n   \"symbols\" : [\"my_symbol1\", \"my_symbol2\"],\n   \"perl_names\" : [\"STRUCT_TYPE1\", \"STRUCT_TYPE2\"]\n}\n</code></pre>\n\n<p>Then I created a perl script <code>gensymbols.pl</code> that generated three files based on the previous JSON file:</p>\n\n<p><strong>mysymbols.h</strong> (generated):</p>\n\n<pre><code>#include \"mylib.h\"\n\n#define MY_SYMBOLS_MIN 0\n#define MY_SYMBOLS_MAX 1\n\nstatic my_struct_type * my_symbols[2];\n</code></pre>\n\n<p><strong>my_setup_array.h</strong> (generated):</p>\n\n<pre><code>my_symbols[0] = my_symbol1;\nmy_symbols[1] = my_symbol2;\n</code></pre>\n\n<p><strong>lib/My/Symbols.pm</strong> (generated):</p>\n\n<pre><code>package My::Symbols;\nuse strict;\nuse warnings;\nuse Exporter qw(import);\n\nour $symbols = [\n    \"STRUCT_TYPE1\",\n    \"STRUCT_TYPE2\"\n];\nour @EXPORT = @$symbols;\n\nsub STRUCT_TYPE1 { 0 }\nsub STRUCT_TYPE2 { 1 }\n</code></pre>\n\n<p>Then I changed the XS file to:</p>\n\n<p><strong>XsTest.xs</strong>:</p>\n\n<pre><code>#define PERL_NO_GET_CONTEXT\n#include \"EXTERN.h\"\n#include \"perl.h\"\n#include \"XSUB.h\"\n#include \"mylib.h\"\n#include \"mysymbols.h\"\n\nMODULE = My::XsTest  PACKAGE = My::XsTest\nPROTOTYPES: DISABLE\n\nBOOT:\n#include \"my_setup_array.h\"\n\nvoid\nuse_struct(type)\n    int type\n\n    CODE:\n        if ( (type &lt; MY_SYMBOLS_MIN) || (type &gt;MY_SYMBOLS_MAX) ) {\n            croak(\"Unknown symbol type\");\n        }\n        else {\n            use_struct(my_symbols[type]);\n        }\n</code></pre>\n\n<p>and the perl module to:</p>\n\n<p><strong>lib/My/XsTest.pm</strong>:</p>\n\n<pre><code>package My::XsTest;\nour $VERSION = '0.01';\nuse strict;\nuse warnings;\nuse Exporter qw(import);\nuse My::Symbols;\nour %EXPORT_TAGS = ( 'symbols' =&gt; $My::Symbols::symbols );\n\nour @EXPORT_OK = ( @{ $EXPORT_TAGS{symbols} } );\nour @EXPORT = qw(use_struct);\n\nrequire XSLoader;\nXSLoader::load();\n1;\n</code></pre>\n\n<p>In this way I could move all information about the symbols to the JSON file, and the maintainer only has to care about this file. If he changes the file, he must remember to run the <code>gensymbols.pl</code> Perl script to regenerate the three files. Here is the script for completeness:</p>\n\n<p><strong>gensymbols.pl</strong></p>\n\n<pre><code>     #! /usr/bin/env perl\n\n{\n    GenSymbols-&gt;new(\n        c_symbol_array_name   =&gt; 'my_symbols',\n        perl_symbol_module_fn =&gt; 'lib/My/Symbols.pm',\n        symbols_fn            =&gt; 'symbols.json',\n        xs_include            =&gt; {\n            my_symbols_fn      =&gt; 'mysymbols.h',\n            my_setup_array_fn =&gt; 'my_setup_array.h'\n        },\n    );\n}\n\npackage GenSymbols;\nuse feature qw(say);\nuse strict;\nuse warnings;\n\nuse Data::Printer;\nuse JSON::XS;\nuse Clone qw(clone);\n\nsub new {\n    my ( $class, %temp ) = @_;\n\n    my $args = clone \\%temp;\n    my $self = bless $args, $class;\n\n    $self-&gt;read_json();\n    $self-&gt;write_xs_include_mysymbols();\n    $self-&gt;write_xs_include_my_setup_array();\n    $self-&gt;write_perl_symbol_module();\n}\n\nsub write_perl_symbol_module {\n    my ( $self ) = @_;\n\n    my $fn = $self-&gt;{perl_symbol_module_fn};\n    open ( my $fh, '&gt;', $fn ) or die \"Could not open file '$fn': $!\";\n    say $fh 'package My::Symbols;';\n    say $fh 'use strict;';\n    say $fh 'use warnings;';\n    say $fh 'use Exporter qw(import);';\n    print $fh \"\\n\";\n    my $names = $self-&gt;{perl_names_array};\n    say $fh 'our $symbols = [';\n    for my $i ( 0..$#$names ) {\n        my $name = $names-&gt;[$i];\n        $name = '    \"' . $name . '\"';\n        $name .= \",\" if $i &lt; $#$names;\n        say $fh $name;\n    }\n    say $fh '];';\n    say $fh 'our @EXPORT = @$symbols;';\n    print $fh \"\\n\";\n    for my $i ( 0..$#$names ) {\n        printf $fh ('sub %s { %d }' . \"\\n\"), $names-&gt;[$i], $i;\n    }\n    say $fh '1;';\n    close $fh;\n}\n\nsub write_xs_include_my_setup_array {\n    my ( $self ) = @_;\n\n    my $fn = $self-&gt;{xs_include}{my_setup_array_fn};\n    my $syms = $self-&gt;{sym_array};\n    open ( my $fh, '&gt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my $sym_arr_name = $self-&gt;{c_symbol_array_name};\n    for my $i (0..$#$syms) {\n        my $sym = $syms-&gt;[$i];\n        printf $fh \"%s[%d] = %s;\\n\", $sym_arr_name, $i, $sym;\n    }\n    close $fh;\n}\n\nsub write_xs_include_mysymbols {\n    my ( $self ) = @_;\n\n    my $fn = $self-&gt;{xs_include}{my_symbols_fn};\n    my $syms = $self-&gt;{sym_array};\n    open ( my $fh, '&gt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my $min_index = 0;\n    my $max_index = $#$syms;\n    my $sym_arr_name = $self-&gt;{c_symbol_array_name};\n    say $fh '#include \"mylib.h\"';\n    print $fh \"\\n\";\n    printf $fh \"#define MY_SYMBOLS_MIN %d\\n\", $min_index;\n    printf $fh \"#define MY_SYMBOLS_MAX %d\\n\", $max_index;\n    print $fh \"\\n\";\n    printf $fh \"static my_struct_type * %s[%d];\\n\", $sym_arr_name, $max_index + 1;\n    close $fh;\n}\n\n\nsub read_json {\n    my ( $self ) = @_;\n\n    my $fn = $self-&gt;{symbols_fn};\n    open ( my $fh, '&lt;', $fn ) or die \"Could not open file '$fn': $!\";\n    my $str = do { local $/; &lt;$fh&gt; };\n    close $fh;\n    my $hash = JSON::XS-&gt;new-&gt;decode( $str );\n    $self-&gt;{sym_array} = $hash-&gt;{symbols};\n    $self-&gt;{perl_names_array} = $hash-&gt;{perl_names};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": false, "score": 3, "last_activity_date": 1566929780, "creation_date": 1566929780, "answer_id": 57680233, "question_id": 57675362, "link": "https://stackoverflow.com/questions/57675362/how-to-export-symbols-defined-in-a-c-library-as-perl-constants-using-xs/57680233#57680233", "title": "How to export symbols defined in a C library as Perl constants using XS?", "body": "<p>You can register constants (actually subroutines) in the XS <code>BOOT</code> section with <a href=\"https://perldoc.perl.org/perlapi.html#newCONSTSUB\" rel=\"nofollow noreferrer\"><code>newCONSTSUB</code></a>. No sub definitions or <code>our</code> variables are required in the <code>.pm</code> file:</p>\n\n<pre><code>BOOT:\n    {\n        HV *stash = gv_stashpv(\"My::XsTest\", 0);\n\n        newCONSTSUB(stash, \"STRUCT_TYPE1\", newSViv(STRUCT_TYPE1));\n        newCONSTSUB(stash, \"STRUCT_TYPE2\", newSViv(STRUCT_TYPE2));\n    }\n</code></pre>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1566929780, "creation_date": 1566911145, "question_id": 57675362, "link": "https://stackoverflow.com/questions/57675362/how-to-export-symbols-defined-in-a-c-library-as-perl-constants-using-xs", "title": "How to export symbols defined in a C library as Perl constants using XS?", "body": "<p>I am working on an XS wrapper module for some functions in the GNU scientific library. Instead of using the library directly here, I have simpilfied the problem by creating my own library:</p>\n\n<p><strong>mylib/mylib.h</strong>:</p>\n\n<pre><code>typedef struct {\n    int foo;\n    double bar;\n} my_struct_type;\nextern my_struct_type *my_symbol1;\nextern my_struct_type *my_symbol2;\nvoid use_struct( my_struct_type *s );\n</code></pre>\n\n<p><strong>mylib/mylib.c</strong>:</p>\n\n<pre><code>#include \"mylib.h\"\n#include &lt;stdio.h&gt;\n\nstatic my_struct_type my_struct1 = { 3, 3.14 };\nstatic my_struct_type my_struct2 = { 2, 1.06 };\n\nmy_struct_type *my_symbol1 = &amp;my_struct1;\nmy_struct_type *my_symbol2 = &amp;my_struct2;\n\nvoid use_struct( my_struct_type *s ) {\n    printf( \"use_struct: foo = %d\\n\", s-&gt;foo);\n    printf( \"use_struct: bar = %g\\n\", s-&gt;bar);\n}\n</code></pre>\n\n<p>This is compiled into a shared library using:</p>\n\n<pre><code>$ gcc -c -o mylib.o mylib.c\n$ gcc -shared -o libmylib.so mylib.o\n</code></pre>\n\n<p>So I will use <code>mylib.so</code> as an example instead of <code>libgsl.so</code>. Now I would like to refer to the C symbols <code>my_symbol1</code> and <code>my_symbol2</code> from a Perl script. First I created an XS file:</p>\n\n<p><strong>XsTest.xs</strong>:</p>\n\n<pre><code>#define PERL_NO_GET_CONTEXT\n#include \"EXTERN.h\"\n#include \"perl.h\"\n#include \"XSUB.h\"\n#include \"mylib.h\"\n\n/* These definition are created ad hoc to provide an interface to the perl module */\n#define STRUCT_TYPE1 1\n#define STRUCT_TYPE2 2\n\nMODULE = My::XsTest  PACKAGE = My::XsTest\nPROTOTYPES: DISABLE\n\n # export STRUCT_TYPE1, STRUCT_TYPE2, ... to My::XsTest\n # NOTE: I would like to avoid having to repeat the string, e.g. \"STRUCT_TYPE1\"\n #  in the lines below (if possible?)\nBOOT:\n{   \n    SV* const_sv = get_sv( \"My::XsTest::STRUCT_TYPE1\", GV_ADD );\n    sv_setiv( const_sv, STRUCT_TYPE1 );\n    SvREADONLY_on( const_sv );\n    SV* const_sv2 = get_sv( \"My::XsTest::STRUCT_TYPE2\", GV_ADD );\n    sv_setiv( const_sv2, STRUCT_TYPE2 );\n    SvREADONLY_on( const_sv2 );\n}\n\nvoid\nuse_struct(type)\n    int type\n\n    CODE:\n        if (type == STRUCT_TYPE1 ) {\n            use_struct(my_symbol1);\n        }\n        else if (type == STRUCT_TYPE2) {\n            use_struct(my_symbol2);\n        }\n        else {\n            croak(\"Unknown struct type\");\n        }\n</code></pre>\n\n<p><strong>lib/My/XsTest.pm</strong>:</p>\n\n<pre><code>package My::XsTest;\nour $VERSION = '0.01';\nuse strict;\nuse warnings;\nuse Exporter qw(import);\n# NOTE: I would like to avoid having to define the line below here,\n#  it would be better if it was enough to define them in XsTest.xs\nour %EXPORT_TAGS = ( 'symbols' =&gt; [ qw( STRUCT_TYPE1 STRUCT_TYPE2 ) ] );\n\nour @EXPORT_OK = ( @{ $EXPORT_TAGS{symbols} } );\nour @EXPORT = qw(use_struct);\n\n# NOTE: I would like to avoid having to declare here the two line below.\n#  this should be done automatically from the .xs file\nour $STRUCT_TYPE1;\nour $STRUCT_TYPE2;\n\nrequire XSLoader;\nXSLoader::load();\n\n\n# NOTE: I would like to avoid having to define the subs below.\n#  This should be done automatically from the .xs file\nsub STRUCT_TYPE1 {\n    return $STRUCT_TYPE1;\n}\n\nsub STRUCT_TYPE2 {\n    return $STRUCT_TYPE2;\n}\n\n1;\n</code></pre>\n\n<p>Then to compile the extension, I used a <code>ExtUtils::MakeMaker</code>:</p>\n\n<p><strong>Makefile.PL</strong>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse utf8;\nuse ExtUtils::MakeMaker;\n\nmy $lib_dir = 'mylib';\n\nWriteMakefile(\n  NAME          =&gt; 'My::XsTest',\n  VERSION_FROM  =&gt; 'lib/My/XsTest.pm',\n  PREREQ_PM     =&gt; { 'ExtUtils::MakeMaker' =&gt; 0 },\n  ABSTRACT_FROM =&gt; 'lib/My/XsTest.pm',\n  AUTHOR        =&gt; 'H\u00e5kon H\u00e6gland &lt;hakon.hagland@gmail.com&gt;',\n  OPTIMIZE      =&gt; '-g3 -O0',\n  LICENSE       =&gt; 'perl',\n  LIBS          =&gt; [\"-L$lib_dir -lmylib\"],\n  INC           =&gt; \"-I$lib_dir\",\n);\n</code></pre>\n\n<p>and then compiling:</p>\n\n<pre><code>$ perl Makefile.PL\n$ make\n</code></pre>\n\n<p>Finally, I tested the module from a Perl script:</p>\n\n<p><strong>p.pl</strong>:</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse feature qw(say);\nuse strict;\nuse warnings;\nuse ExtUtils::testlib;\nuse My::XsTest qw(use_struct :symbols);\n\nuse_struct(STRUCT_TYPE1);\nuse_struct(STRUCT_TYPE2);\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>use_struct: foo = 3\nuse_struct: bar = 3.14\nuse_struct: foo = 2\nuse_struct: bar = 1.06\n</code></pre>\n\n<p>So this works, but it is not pretty. How can I improve this code and avoid all the repetition of the symbol names especially in the file <code>lib/My/XsTest.pm</code>?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 5455, "user_id": 3961170, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PtFol.jpg?s=128&g=1", "display_name": "mkHun", "link": "https://stackoverflow.com/users/3961170/mkhun"}, "edited": false, "score": 1, "creation_date": 1566909228, "post_id": 57674804, "comment_id": 101796589, "body": "Please share your code what you tried so far.?"}], "answers": [{"tags": [], "owner": {"reputation": 818, "user_id": 56565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8c65b603554811079a7ea9b7aab9c0?s=128&d=identicon&r=PG", "display_name": "gugod", "link": "https://stackoverflow.com/users/56565/gugod"}, "is_accepted": false, "score": 1, "last_activity_date": 1566909640, "creation_date": 1566909640, "answer_id": 57674937, "question_id": 57674804, "link": "https://stackoverflow.com/questions/57674804/is-there-a-regular-expression-for-foldernamemm-dd-yyyy/57674937#57674937", "title": "Is there a regular expression for &quot;foldernameMM_DD__YYYY&quot;", "body": "<p>Assuming your are looking for a date, followed by a string literal \"foldername\", an inaccurate version would be:</p>\n\n<pre><code>/foldername[0-9][0-9]_[0-9][0-9]_[0-9][0-9][0-9][0-9]/\n</code></pre>\n\n<p>It's inaccurate because it would match something like \"foldername98_76_5432\". However, it's a start and you could at least start perfecting it.</p>\n"}, {"comments": [{"owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "reply_to_user": {"reputation": 110, "user_id": 5379163, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-YYoszbKy3vA/AAAAAAAAAAI/AAAAAAAACuE/kFVfmsogtko/photo.jpg?sz=128", "display_name": "mayur manudhanya", "link": "https://stackoverflow.com/users/5379163/mayur-manudhanya"}, "edited": false, "score": 0, "creation_date": 1566911630, "post_id": 57674947, "comment_id": 101798060, "body": "Please accept the answer that best answered your question..."}], "tags": [], "owner": {"reputation": 15560, "user_id": 709439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/19b5c7e6c2772d88adcbd928daddc170?s=128&d=identicon&r=PG", "display_name": "MarcoS", "link": "https://stackoverflow.com/users/709439/marcos"}, "is_accepted": true, "score": 1, "last_activity_date": 1566998266, "last_edit_date": 1566998266, "creation_date": 1566909668, "answer_id": 57674947, "question_id": 57674804, "link": "https://stackoverflow.com/questions/57674804/is-there-a-regular-expression-for-foldernamemm-dd-yyyy/57674947#57674947", "title": "Is there a regular expression for &quot;foldernameMM_DD__YYYY&quot;", "body": "<pre><code>$foldername = \"abc\";\nif ($folder =~ m/^\\Q$foldername\\d{2}_\\d{2}_\\d{4}$/) {\n  rmdir $folder; // `rmdir` works if folder is empty; otherwise you could `use File::Path 'rmtree'`;\n}\n</code></pre>\n\n<p><em>Note: Be warned that this regexp accepts invalid dates too (i.e.: <strong>99_88_0000</strong>), but this should not be an issue for your use case... It is not easy at all to make a regexp to accept valid dates... It not even feasible to match leap years, for example, with a simple regexp...</em></p>\n"}], "owner": {"reputation": 110, "user_id": 5379163, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-YYoszbKy3vA/AAAAAAAAAAI/AAAAAAAACuE/kFVfmsogtko/photo.jpg?sz=128", "display_name": "mayur manudhanya", "link": "https://stackoverflow.com/users/5379163/mayur-manudhanya"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1566910393, "accepted_answer_id": 57674947, "answer_count": 2, "score": -2, "last_activity_date": 1566998266, "creation_date": 1566909170, "question_id": 57674804, "link": "https://stackoverflow.com/questions/57674804/is-there-a-regular-expression-for-foldernamemm-dd-yyyy", "closed_reason": "Needs more focus", "title": "Is there a regular expression for &quot;foldernameMM_DD__YYYY&quot;", "body": "<p>I am setting up Perl script that runs periodically and delete unwanted folders and to identity auto generated folder my organization following naming convention like </p>\n\n<blockquote>\n  <p>foldernameMM_DD_YYYY</p>\n</blockquote>\n\n<p>can someone please help me with this regex</p>\n"}, {"tags": ["perl", "matrix", "inverse"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1566881365, "post_id": 57666611, "comment_id": 101783733, "body": "<code>use strict</code> is redundant after <code>use 5.026</code>, but you&#39;re missing <code>use warnings</code>."}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 1, "creation_date": 1566881764, "post_id": 57666611, "comment_id": 101783843, "body": "Perhaps you could post a sample input matrix and inverted matrix along with the output of your script so we can see if there&#39;s a pattern to the wrongness."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1566884333, "post_id": 57666611, "comment_id": 101784441, "body": "@lordadmira: Can you tell what&#39;s not OK with the example given in the first code block?"}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1566933059, "post_id": 57666611, "comment_id": 101808425, "body": "Sorry but I&#39;m not really following that debugger output.  And unfortunately I haven&#39;t had time to study the algorithm."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566995427, "post_id": 57666611, "comment_id": 101829098, "body": "I think the problem is in step #7 in the referred to paper. Note that there is a prime on <code>a[i,p]</code> but not on <code>a[p,j]</code>. So I guess you have to save the element of <code>a[p,j]</code> ?"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567077032, "post_id": 57666611, "comment_id": 101859802, "body": "@H&#229;konH&#230;gland: The question contains: &quot;The pm() function is just a &quot;print matrix&quot; for debugging purposes:&quot; Also as <code>i</code> and <code>j</code> can never be <code>p</code> in step 7 (the nested loop), I don&#39;t really understand what you are referring to."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567080641, "post_id": 57666611, "comment_id": 101861878, "body": "@U.Windl Oh, I missed that about <code>pm</code>, I will delete that comment. Now about the second comment: Yes <code>i</code> and <code>j</code> can never be <code>p</code>, but <code>p</code> is still part of the formula. See my answer below. Please clarify what you don&#39;t understand"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1567110508, "post_id": 57666611, "comment_id": 101876357, "body": "@H&#229;konH&#230;gland: In <code>$rj-&gt;[$i] += $rp-&gt;[$j] * $m-&gt;[$i]-&gt;[$pp]</code> <code>$rp</code> refers to the pivot row. As the pivot row is not touched in the nested loop, it&#39;s OK to use the &quot;current&quot; instead of the &quot;previous&quot; values I thought."}], "answers": [{"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1566895740, "post_id": 57670354, "comment_id": 101789168, "body": "Sorry, the question was not how to write a module or how to test a module; I was wondering whether the algorithm presented is bad, or whether I misinterpreted the algorithm, or whether I don&#39;t see the obvious. Your answer doesn&#39;t really help me here."}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1566903437, "post_id": 57670354, "comment_id": 101793315, "body": "@U.Windl So you are looking for a way to determine whether (an implementation of) an algorithm is good or bad. There are multiple ways to do so - testing, debugging, logging (which you do with <code>pm</code>), code inspection (which you seem to be asking for), pair programming, proving correctness manually or using a proof assistant, etc - but writing a quick test is <i>the path of least effort</i>. It is simple, it does not involve other people, it is easy to reproduce and it leaves behind a useful artifact."}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1566903515, "post_id": 57670354, "comment_id": 101793348, "body": "As for my suggestion to use a module, of course it may be an overkill but you have self-contained code with well-defined behavior and modules are just natural habitat for that kind of things. And it is easier to write tests for a module than it is for a script."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1566910311, "post_id": 57670354, "comment_id": 101797269, "body": "Did you look at the paper? The algorithm was published in a magazine and there supposedly was a proof of correctness, but unfortunately that part is missing in the publicly available part. So I don&#39;t see the point of proving it&#39;s correctness; especially if I could, I would have written my own algorithm instead of relying to a published one."}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1566934574, "post_id": 57670354, "comment_id": 101809004, "body": "@U.Windl There is an improved version by the same authors &quot;An Efficient and Generic Algorithm for Matrix Inversion&quot; which can be read online. In my experience implementing algorithms there is no way around test cases. Develop test cases, use a simple but working implementation as a reference and compare the results of the simple algorithm with the improved one. I did it this way implementing <a href=\"https://github.com/wollmers/LCS-BV\" rel=\"nofollow noreferrer\">LCS-BV</a> and tuning <a href=\"https://github.com/wollmers/Lingua-Stem-Cistem\" rel=\"nofollow noreferrer\">Cistem stemmer</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 2, "creation_date": 1566954669, "post_id": 57670354, "comment_id": 101813792, "body": "@Helmut Wollmersdorfer, It&#39;s already known that the test cases will Fail. The question is why are they failing. Dallaylean&#39;s doesn&#39;t help the OP at all."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1566982853, "post_id": 57670354, "comment_id": 101822145, "body": "Yes, testing is helpful to show that some software is <i>not working as designed</i>, but it cannot prove the correctness. As I already knew that the software is not providing the expected results, I absolutely see no sense in testing the software further."}, {"owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567001674, "post_id": 57670354, "comment_id": 101832991, "body": "@U.Windl I think you&#39;re right, I misinterpreted the question somewhat. Still if I was confronted with the problems you specify I would start out with writing tests and identifying corner cases and <i>then</i> go into specific stages of the algorithm. My answer should have been a comment, if only SO supported such large comments."}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567111784, "post_id": 57670354, "comment_id": 101876832, "body": "OK, I verified that Wikipedia is correct using PostScript: <code>[2 5 1 3 0 0] matrix invertmatrix ==</code> prints <code>[3.0 -5.0 -1.0 2.0 0.0 0.0]</code>, so Wikipedia is correct (and my program is not)."}], "tags": [], "owner": {"reputation": 5138, "user_id": 280449, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/89f948c00bdba752360909d1cc585e12?s=128&d=identicon&r=PG", "display_name": "Dallaylaen", "link": "https://stackoverflow.com/users/280449/dallaylaen"}, "is_accepted": false, "score": 3, "last_activity_date": 1566893560, "creation_date": 1566893560, "answer_id": 57670354, "question_id": 57666611, "link": "https://stackoverflow.com/questions/57666611/bad-matrix-inversion-algorithm-or-implemented-incorrectly/57670354#57670354", "title": "Bad matrix inversion algorithm, or implemented incorrectly?", "body": "<p><strong>When in doubt, write tests.</strong></p>\n\n<p>First, put your code into a module (<code>lib/My/Matrix.pm</code> or whatever you want to call it):</p>\n\n<pre><code>package My::Matrix; # this must match the file name\n\nuse strict;\nuse warnings;\nuse Exporter qw(import);\n\nour @EXPORT_OK = qw( invert pm );\n\n# your code here ...\n\n1; # at end of module\n</code></pre>\n\n<p>There is a lot of documentation regarding writing modules, not sure if <a href=\"https://perldoc.perl.org/perlmod.html\" rel=\"nofollow noreferrer\">perldoc perlmod</a> is a good starting point. </p>\n\n<p>Now write a test - documentation is <a href=\"https://metacpan.org/pod/Test::More\" rel=\"nofollow noreferrer\">here</a> (t/001-invert.t):</p>\n\n<pre><code>#!perl\n\nuse strict;\nuse warnings;\nuse Test::More;\n\nuse Matrix qw(invert);\n\nok_invert( [[1,0], [0,1]], [[1,0], [0,1]], \"unit matrix\" );\n# insert more matrices here    \n\ndone_testing;\n\nsub ok_invert {\n    my ($input, $output, $msg) = @_;\n\n    invert( $output );\n    is_deeply $input, $output, $msg\n         or diag \"got: \", explain $input, \"expected: \", explain $output;\n};\n</code></pre>\n\n<p>Run the test as <code>perl -Ilib t/001-invert.t</code> or <code>prove -Ilib t</code> if you want to run multiple tests.</p>\n\n<p>You can now add simple corner cases to the test until the problem is isolated.</p>\n\n<p>Of course, finding the correct inverse matrix by hand is tedious, so you may want to use multiplication instead. So the next steps to improve your code would be:</p>\n\n<ul>\n<li>make sure invert does not modify its input and returns the inverted matrix instead;</li>\n</ul>\n\n<p><em>Sidenote. It's generally a good idea to make sure a function <a href=\"https://en.wikipedia.org/wiki/Pure_function\" rel=\"nofollow noreferrer\">returns the desired value and does not modify its arguments</a>. It's not always possible but when it is, it saves a ton of debugging time.</em></p>\n\n<ul>\n<li>implement multiplication;</li>\n<li>implement <code>is_unit_matrix</code> check;</li>\n<li>rewrite the test function as follows (the next snippet was not tested):</li>\n</ul>\n\n<pre><code>sub ok_invert {\n    my ($input, $msg) = @_;\n    my ($invert, $det) = invert( $input );\n    ok is_unit_matrix( multiply( $invert, $input ) ), $msg\n        or diag explain $invert, \" is not the inverse of \", explain $input;\n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1567107685, "post_id": 57692776, "comment_id": 101875368, "body": "You are on the right track, but your version did not produce what the Wikipedia article says. However if you undo the exchange of indices <code>$i</code> and <code>$j</code>, the result matches Wikipedia. As it turns out you basically moved step 5 of the algorithm after step 7 to fix the problem. As comments have limited abilities, I&#39;ll hijack your answer to place the correction in there."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567107861, "post_id": 57692776, "comment_id": 101875422, "body": "Ok, great! By the way I tested the code on a 3x3 matrix and it produced correct result, so I am not sure about exchanging those indices.."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567109053, "post_id": 57692776, "comment_id": 101875850, "body": "<a href=\"https://github.com/hakonhagland/perl-matrix-invert-debug\" rel=\"nofollow noreferrer\">I tested the original script on the 2x2 matrix</a>, and it gives the same result as you present for the modified script, can you see what the issue is?"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1567110081, "post_id": 57692776, "comment_id": 101876214, "body": "I&#39;m completely confused now: When I tried it the first time the matrix was mirrored on the diagonal, so I swapped the indexes you swapped back. The result was correct then, But now when I try to reproduce, the result is correct with your code, too! <code>$rj-&gt;[$i]</code> is a[i,j], and <code>$rp-&gt;[$i]</code> is a[p,i] (but that should be a[p,j]), while <code>$m-&gt;[$j]-&gt;[$pp]</code> is a[j,p]. To match Step 7, i and j should be swapped IMHO."}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 1, "creation_date": 1567136771, "post_id": 57692776, "comment_id": 101881668, "body": "@U.Windl This original version is correct and passes my 3 testcases as I wrote in my answer. Look into my code at Github, where I do a sanity check on the testcases <code>is_deeply( matmult($A, $Ainv), $I )</code> where <code>$I</code> is the Identity matrix. The cases are also tested against different implementations: my <code>invert_corr()</code>, <code>invert_hakon()</code>, and <code>Math::Matrix-&gt;invert()</code>. Maybe you are confused, because <code>$A</code> is changed in place, and needs to be cloned <code>$Ainv = invert( matclone($A) )</code> if more than one <code>invert()</code> is done on the same array."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567169061, "post_id": 57692776, "comment_id": 101894043, "body": "@U.Windl Based on this discussion, I suggest we rollback to the original version since it appears to be the correct one?"}, {"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567456111, "post_id": 57692776, "comment_id": 101960684, "body": "When the original <code>$rj-&gt;[$i] += $rp-&gt;[$j] * $m-&gt;[$i]-&gt;[$pp];</code> and your <code>$rj-&gt;[$i] += $rp-&gt;[$i] * $m-&gt;[$j]-&gt;[$pp];</code> produce the same results, what was your motivation for the change? IMHO the original version is what the algorithm says."}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 2, "last_activity_date": 1567143474, "last_edit_date": 1567143474, "creation_date": 1566996354, "answer_id": 57692776, "question_id": 57666611, "link": "https://stackoverflow.com/questions/57666611/bad-matrix-inversion-algorithm-or-implemented-incorrectly/57692776#57692776", "title": "Bad matrix inversion algorithm, or implemented incorrectly?", "body": "<p>According to the referred to paper, step #7 should be computed with the old pivot row values, so the following seems to work for me:</p>\n\n<pre><code>sub invert($)\n{\n    my $m = shift;          # matrix is an array of rows\n    my ($pp, $det);\n    my ($rp, $pe);\n    my $n = scalar(@$m);\n\n    for ($pp = 0, $det = 1.0; $pp &lt; $n; ++$pp) {\n        $rp = $m-&gt;[$pp];        # pivot row\n        $pe = $rp-&gt;[$pp];       # pivot element\n        last if ($pe == 0);      # Epsilon test?\n\n        $det *= $pe;\n        # calculate pivot column\n        for (my $i = 0; $i &lt; $n; ++$i) {\n            next if ($i == $pp);\n            $m-&gt;[$i][$pp] /= -$pe;\n        }\n        for (my $j = 0; $j &lt; $n; ++$j) { # row index\n            next if ($j == $pp);\n            for (my ($i, $rj) = (0, $m-&gt;[$j]); $i &lt; $n; ++$i) {\n                next if ($i == $pp);\n                $rj-&gt;[$i] += $rp-&gt;[$i] * $m-&gt;[$j]-&gt;[$pp];\n            }\n        }\n        # calculate pivot row\n        for (my $j = 0; $j &lt; $n; ++$j) {\n            next if ($j == $pp);\n            $rp-&gt;[$j] /= $pe;\n        }\n        $rp-&gt;[$pp] = 1.0 / $pe;\n    }\n\n    return ($pe != 0.0, $det);\n}\n</code></pre>\n\n<p>Fix required to match result in Wikipedia:</p>\n\n<pre><code>--- newinvert.pl~   2019-08-29 21:22:16.135160055 +0200\n+++ newinvert.pl    2019-08-29 21:32:10.995144732 +0200\n@@ -20,7 +20,7 @@\n             next if ($j == $pp);\n             for (my ($i, $rj) = (0, $m-&gt;[$j]); $i &lt; $n; ++$i) {\n                 next if ($i == $pp);\n-                $rj-&gt;[$i] += $rp-&gt;[$i] * $m-&gt;[$j]-&gt;[$pp];\n+                $rj-&gt;[$i] += $rp-&gt;[$j] * $m-&gt;[$i]-&gt;[$pp];\n             }\n         }\n         # calculate pivot row\n</code></pre>\n\n<p>Sample session (inluding my <code>pm()</code>):</p>\n\n<pre><code>&gt; perl -d printmatrix.pl\n\nLoading DB routines from perl5db.pl version 1.51\nEditor support available.\n\nEnter h or 'h h' for help, or 'man perldebug' for more help.\n\nmain::(printmatrix.pl:20):  1;\n  DB&lt;1&gt; require \"./newinvert.pl\" # this is ungly, forgive!\n./newinvert.pl did not return a true value at (eval 6)[/usr/lib/perl5/5.26.1/perl5db.pl:738] line 2.\n\n  DB&lt;2&gt; $m=[[2,5],[1,3]]\n  DB&lt;4&gt; pm($m)\n2x2:\n   2.000   5.000\n   1.000   3.000\n\n  DB&lt;5&gt; x invert($m)\n0  1\n1  1\n  DB&lt;6&gt; pm($m)\n2x2:\n   3.000  -5.000\n  -1.000   2.000\n</code></pre>\n\n<p>Result of regression tests:</p>\n\n<pre><code># https://github.com/wollmers/matrix-inverse-Farooq/blob/master/matrix_inversion_new.pl\n\n$ perl matrix_inversion_new.pl\n[...]\n(invert_hakon 01_wiki input $A) 2x2:\n   2.000   5.000\n   1.000   3.000\n(invert_hakon 01_wiki result $C) 2x2:\n   3.000  -5.000\n  -1.000   2.000\nok 10 - 01_wiki invert_hakon Ainv\nok 11 - 01_wiki invert_hakon det: 1\n(invert_hakon 02_wiki input $A) 2x2:\n   2.000   3.000\n   1.000   2.000\n(invert_hakon 02_wiki result $C) 2x2:\n   2.000  -3.000\n  -1.000   2.000\nok 12 - 02_wiki invert_hakon Ainv\nok 13 - 02_wiki invert_hakon det: 1\n(invert_hakon 03_author_1 input $A) 3x3:\n   1.000   1.000   3.000\n   1.000   3.000  -3.000\n  -2.000  -4.000  -4.000\n(invert_hakon 03_author_1 result $C) 3x3:\n   3.000   1.000   1.500\n  -1.250  -0.250  -0.750\n  -0.250  -0.250  -0.250\nok 14 - 03_author_1 invert_hakon Ainv\nok 15 - 03_author_1 invert_hakon det: -8\n[...]\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567109156, "post_id": 57710291, "comment_id": 101875879, "body": "So can we agree that the description of the algorithm is at least &quot;poor&quot;?"}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "reply_to_user": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "edited": false, "score": 0, "creation_date": 1567148241, "post_id": 57710291, "comment_id": 101884508, "body": "@U.Windl Yes, the description is poor and potentially misleading. This applies in my experience to 50% of the scientific papers written by mathematicians. Without code in a popular language (or unambiguous pseudocode) it&#39;s hard to verify the claims in the paper."}], "tags": [], "owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "is_accepted": false, "score": 2, "last_activity_date": 1567082745, "last_edit_date": 1567082745, "creation_date": 1567081878, "answer_id": 57710291, "question_id": 57666611, "link": "https://stackoverflow.com/questions/57666611/bad-matrix-inversion-algorithm-or-implemented-incorrectly/57710291#57710291", "title": "Bad matrix inversion algorithm, or implemented incorrectly?", "body": "<p>The pseudocode in the original paper is not correct.</p>\n\n<p>Steps I have done so far:</p>\n\n<ul>\n<li>inserted the pseudocode into the Perl source</li>\n<li>used the naming of the pseudocode</li>\n<li>test cases</li>\n<li>tested the test cases</li>\n<li>tested with <code>Math::Matrix</code> as a reference</li>\n<li>reviewed (many times)</li>\n</ul>\n\n<p>At least I read the note in paper:</p>\n\n<blockquote>\n  <p>Note that in step 7 of the following algorithm a'[i, p]\n  on the LHS means that the latest value of the pivot row\n  is to be used in the calculations.</p>\n</blockquote>\n\n<p>This note is not really precise. After additional attempts I gave up, wanted to post my findings here, and read the answer of H\u00e5kon H\u00e6gland. Yes, his solution works and he earns the honor.</p>\n\n<p>If the steps in the pseudocode are reordered it passes my 3 tests:</p>\n\n<pre><code>Step 1\nStep 2\nStep 3\nStep 4\nStep 6\nStep 7\nStep 5\nStep 8\nStep 9\nStep 10\n</code></pre>\n\n<p>Here is the version with pseudocode included and using the original naming:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub invert_corr($) {\n    my $A = shift;          # matrix is an array of rows\n    my $n = scalar(@$A);\n\n    # Step 1: Let p = 0, d = 1;\n    my $p   = 0;\n    my $det;\n    # Step 2: p &lt;= p +1\n    for (my $pi = 0,$det = 1.0; $pi &lt; $n; ++$pi) {\n        $p = $pi;\n\n        # Step 3: If a[p,p] == 0 then cannot calculate inverse, go to step 10.\n        if ($A-&gt;[$p]-&gt;[$p] == 0) { last; }\n\n        # Step 4: d &lt;= d x a[p, p]\n        $det = $det * $A-&gt;[$p]-&gt;[$p];\n\n        # Step 6: Calculate the new elements of the pivot column by:\n        #   a_new[i,p] &lt;= -(a[i,p] / a[p,p]) where  i = 1 .. n, i != p\n        STEP6: for (my $i = 0; $i &lt; $n; ++$i) {\n            if ($i == $p) { next STEP6; }\n            $A-&gt;[$i]-&gt;[$p] = -($A-&gt;[$i]-&gt;[$p] / $A-&gt;[$p]-&gt;[$p]);\n        }\n\n        # Step 7: Calculate the rest of the new elements by:\n        #   a_new[i,j] &lt;= a[i,j] + a[p,j] x a_new[i,p]\n        #     where i = 1 .. n, j = 1 .. n, &amp; i,j != p\n        OUTER7: for (my $i = 0; $i &lt; $n; ++$i) {\n            if ($i == $p) { next OUTER7; }\n            INNER7: for (my $j = 0; $j &lt; $n; ++$j) {\n                if ($j == $p) { next INNER7; }\n                # Note that in step 7 of the following algorithm a'[i, p]\n                # on the LHS means that the latest value of the pivot row\n                # is to be used in the calculations.\n                $A-&gt;[$i]-&gt;[$j] = $A-&gt;[$i]-&gt;[$j] + $A-&gt;[$p]-&gt;[$j] * $A-&gt;[$i]-&gt;[$p];\n            }\n        }\n\n        # Step 5: Calculate the new elements of the pivot row by:\n        #   a_new[p,j] &lt;= a[p,j] / a[p,p] where  j = 1 .. n, j != p\n        STEP5: for (my $j = 0; $j &lt; $n; ++$j) {\n            # next if ($j == $p);\n            if ($j == $p) { next STEP5; }\n            $A-&gt;[$p]-&gt;[$j] = $A-&gt;[$p]-&gt;[$j] / $A-&gt;[$p]-&gt;[$p];\n        }\n\n        # Step 8: Calculate the new value of the current pivot location:\n        #   a_new[p,p] &lt;= 1 / a_new[p,p]\n        $A-&gt;[$p]-&gt;[$p] = 1.0 / $A-&gt;[$p]-&gt;[$p];\n\n        # Step 9: If p &lt; n go to step 2 (n the dimension of the matrix A).\n    }\n\n    # Step 10: Stop. If inverse exists, A contains the inverse and d is the determinant.\n    if ($A-&gt;[$p]-&gt;[$p] != 0.0) {\n        return ($A-&gt;[$p]-&gt;[$p] != 0.0, $det, $A);\n    }\n    return ($A-&gt;[$p]-&gt;[$p] != 0.0);\n}\n</code></pre>\n\n<p>The complete code including tests is available on <a href=\"https://github.com/wollmers/matrix-inverse-Farooq/blob/master/matrix_inversion_new.pl\" rel=\"nofollow noreferrer\">github</a>, maybe useful for debugging.</p>\n"}, {"tags": [], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "is_accepted": false, "score": 1, "last_activity_date": 1567110915, "last_edit_date": 1567110915, "creation_date": 1567108976, "answer_id": 57717067, "question_id": 57666611, "link": "https://stackoverflow.com/questions/57666611/bad-matrix-inversion-algorithm-or-implemented-incorrectly/57717067#57717067", "title": "Bad matrix inversion algorithm, or implemented incorrectly?", "body": "<p>One of the problems when implementing a mathematical formula like (actually from <strong>Step 5</strong>)<br>\n<a href=\"https://i.stack.imgur.com/o3ez6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o3ez6.png\" alt=\"enter image description here\"></a><br>\nin a loop is: When will the \"new\" <code>a'</code> become the \"old\" <code>a</code>?<br>\nBefore the next step, before the next assignment, or before the next loop iteration?</p>\n\n<p>In a mathematical sense <code>a'</code> and <code>a</code> are different variables all the time, but in procedural programming languages the memory address for <code>a</code> is reused at some time.</p>\n\n<p>So the assignments from <strong>Step 5</strong> need to be delayed after <strong>Step 7</strong> (<a href=\"https://i.stack.imgur.com/axz5j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/axz5j.png\" alt=\"enter image description here\"></a>), it seems.</p>\n\n<p>As a computer scientist I had always felt that mathematical algorithms are described in a somewhat imprecise way. Maybe that's exactly the reason why programming languages were invented ;-)</p>\n"}], "owner": {"reputation": 1856, "user_id": 6607497, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f0a0b03f5bbd44186399f4b0aea38049?s=128&d=identicon&r=PG&f=1", "display_name": "U. Windl", "link": "https://stackoverflow.com/users/6607497/u-windl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1567457135, "creation_date": 1566868919, "last_edit_date": 1567457135, "question_id": 57666611, "link": "https://stackoverflow.com/questions/57666611/bad-matrix-inversion-algorithm-or-implemented-incorrectly", "title": "Bad matrix inversion algorithm, or implemented incorrectly?", "body": "<p>Trying to implement matrix inversion in Perl myself, I found <a href=\"http://www.irma-international.org/viewtitle/41011/\" rel=\"nofollow noreferrer\">An Efficient and Simple Algorithm for Matrix Inversion</a> (only two pages of the article).</p>\n\n<p>After my attempt to implement it in Perl, I see that it does not work.\nI had spend <strong>a lot</strong> of time trying to find out what's wrong, so I concluded that</p>\n\n<ul>\n<li>either the algorithm is not correct</li>\n<li>I misinterpreted the algorithm</li>\n<li>my implementation is not correct</li>\n</ul>\n\n<p>Before presenting the code, here's a debug session with an example from <a href=\"https://de.wikipedia.org/wiki/Inverse_Matrix#Beispiele\" rel=\"nofollow noreferrer\">Wikipedia: Inverse Matrix</a>:</p>\n\n<pre><code>  DB&lt;229&gt; $m=[[2,5],[1,3]]\n\n  DB&lt;230&gt; x invert($m)\npe[0] == 2\n(pivot row 0) 2x2:\n   2.000   2.500\n   1.000   3.000\n(pivot column 0) 2x2:\n   2.000   2.500\n  -0.500   3.000\n(rest 0) 2x2:\n   2.000   2.500\n  -0.500   1.750\n(pivot 0) 2x2:\n   0.500   2.500\n  -0.500   1.750\npe[1] == 1.75\n(pivot row 1) 2x2:\n   0.500   2.500\n  -0.286   1.750\n(pivot column 1) 2x2:\n   0.500  -1.429\n  -0.286   1.750\n(rest 1) 2x2:\n   0.908  -1.429\n  -0.286   1.750\n(pivot 1) 2x2:\n   0.908  -1.429\n  -0.286   0.571\n0  1\n1  3.5\n  DB&lt;231&gt; \n</code></pre>\n\n<p>So here's the code I wrote:</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse 5.026;\nuse strict;\n\n# invert matrix\n# An Efficient and Simple Algorithm for Matrix Inversion\n# Ahmad Farooq, King Khalid University, Saudi Arabia\n# Khan Hamid, National University of Computer and Emerging Sciences (NUCES),\n# Pakistan\nsub invert($)\n{\n    my $m = shift;          # matrix is an array of rows\n    my ($pp, $det);\n    my ($rp, $pe);\n    my $n = scalar(@$m);\n\n    for ($pp = 0, $det = 1.0; $pp &lt; $n; ++$pp) {\n        $rp = $m-&gt;[$pp];        # pivot row\n        $pe = $rp-&gt;[$pp];       # pivot element\n        print \"pe[$pp] == $pe\\n\";\n        last if ($pe == 0);      # Epsilon test?\n\n        $det *= $pe;\n        # calculate pivot row\n        for (my $j = 0; $j &lt; $n; ++$j) {\n            next if ($j == $pp);\n\n            $rp-&gt;[$j] /= $pe;\n        }\n\n        pm($m, \"pivot row $pp\");\n        # calculate pivot column\n        for (my $i = 0; $i &lt; $n; ++$i) {\n            next if ($i == $pp);\n\n            $m-&gt;[$i]-&gt;[$pp] /= -$pe;\n        }\n\n        pm($m, \"pivot column $pp\");\n        for (my $j = 0; $j &lt; $n; ++$j) {\n            next if ($j == $pp);\n\n            for (my ($i, $rj) = (0, $m-&gt;[$j]); $i &lt; $n; ++$i) {\n                next if ($i == $pp);\n\n                $rj-&gt;[$i] += $rp-&gt;[$j] * $m-&gt;[$i]-&gt;[$pp];\n            }\n        }\n\n        pm($m, \"rest $pp\");\n        $rp-&gt;[$pp] = 1.0 / $pe;\n        pm($m, \"pivot $pp\");\n    }\n\n    return ($pe != 0.0, $det);\n}\n</code></pre>\n\n<p>The <code>pm()</code> function is just a \"print matrix\" for debugging purposes:</p>\n\n<pre><code># print matrix\nsub pm($;$)\n{\n    my ($m, $label) = @_;\n    my $n = scalar(@$m);\n    print \"($label) \" if ($label);\n    print \"${n}x${n}:\\n\";\n    for (my $i = 0; $i &lt; $n; ++$i) {\n        for (my $j = 0; $j &lt; $n; ++$j) {\n            if (defined(my $v = $m-&gt;[$i]-&gt;[$j])) {\n                printf('%8.3f', $v);\n            } else {\n                print ' ???????';\n            }\n        }\n\n        print \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Any insights?</p>\n\n<p><strong>Hint for Reproduction</strong> (added 2019-08-28)</p>\n\n<p>I had thought it was obvious, but just in case:\nIf you want to reproduce the output shown in the debug session, maybe just add these two lines at the end of the code:</p>\n\n<pre><code>my $m=[[2,5],[1,3]];                 # matrix to invert\nprint join(', ', invert($m)), \"\\n\";  # invert $m, printing result\n</code></pre>\n\n<p><strong>Note</strong> (added 2019-09-02):</p>\n\n<p>The algorithm fails for the 3x3 matrix given in the Wikipedia article (<code>$m = [[1, 2, 0], [2, 4, 1], [2, 1, 0]]</code>), so real implementations should head towards the improved algorithm (that can select pivot elements outside the diagonal).</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 961, "user_id": 2964911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nYaHp.jpg?s=128&g=1", "display_name": "Iraj Hedayati", "link": "https://stackoverflow.com/users/2964911/iraj-hedayati"}, "edited": false, "score": 0, "creation_date": 1566849598, "post_id": 57663951, "comment_id": 101777240, "body": "Duplicate <a href=\"https://stackoverflow.com/questions/30721317/how-to-merge-two-arrays-in-a-zipper-like-fashion-in-bash\" title=\"how to merge two arrays in a zipper like fashion in bash\">stackoverflow.com/questions/30721317/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11980390"}, "edited": false, "score": 1, "creation_date": 1566850143, "post_id": 57663951, "comment_id": 101777452, "body": "Not sure if duplicate, as I cannot use arrays, it has to be 2 lines passed from the pipeline into another awk/perl/bash script."}, {"owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "edited": false, "score": 0, "creation_date": 1566852339, "post_id": 57663951, "comment_id": 101778205, "body": "I don&#39;t know why this got closed. Here is a Perl command you can pipe your output into that will do what you want: <code>perl -e &#39;@a=split &quot; &quot;,&lt;STDIN&gt;; @b=split &quot; &quot;,&lt;STDIN&gt;; while ($a=shift @a) {print $a,&quot; &quot;,(shift @b),&quot; &quot;}&#39;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566860589, "post_id": 57663951, "comment_id": 101780411, "body": "<code>&lt;&gt;</code> instead of <code>&lt;STDIN&gt;</code> would be more flexible."}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1566886188, "last_edit_date": 1566886188, "creation_date": 1566871888, "answer_id": 57666887, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced/57666887#57666887", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>Could you please try following, it will join every 2 lines in \"interlaced\" fashion as follows.</p>\n\n<pre><code>awk '\nFNR%2!=0 &amp;&amp; FNR&gt;1{\n  for(j=1;j&lt;=NF;j++){\n     printf(\"%s%s\",a[j],j==NF?ORS:OFS)\n     delete a\n  }\n}\n{\n  for(i=1;i&lt;=NF;i++){\n     a[i]=(a[i]?a[i] OFS:\"\")$i}\n  }\nEND{\n  for(j=1;j&lt;=NF;j++){\n     printf(\"%s%s\",a[j],j==NF?ORS:OFS)\n  }\n}'  Input_file\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 2, "creation_date": 1566883855, "post_id": 57666913, "comment_id": 101784313, "body": "This consumes quite a lot of memory if the input file is large. Processing each pair of lines as they come in would be more scalable (assuming you don&#39;t have individual lines which are several gigabytes)."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "reply_to_user": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1566885823, "post_id": 57666913, "comment_id": 101784893, "body": "@tripleee The solution is for two lines of program output, as described in the question. If the OP wants/has to post-process GB-large program output this way, the problem lays somewhere else. I really always keep the efficiency in mind, in this case it seemed off for me."}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 0, "last_activity_date": 1566874502, "last_edit_date": 1566874502, "creation_date": 1566872181, "answer_id": 57666913, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced/57666913#57666913", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>Multiline <code>awk</code> solution:</p>\n\n<p><em>interlaced.awk</em></p>\n\n<pre><code>{\n    a[NR] = $0\n}\n\nEND {\n    split(a[1], b)\n    split(a[2], c)\n    for (i in b) {\n        printf \"%s%s %s\", i==1?\"\":OFS, b[i], c[i]\n    }   \n    print ORS\n}\n</code></pre>\n\n<p>Run it like this:</p>\n\n<pre><code>foo_program | awk -f interlaced.awk\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "is_accepted": true, "score": 4, "last_activity_date": 1566897140, "last_edit_date": 1566897140, "creation_date": 1566878270, "answer_id": 57667498, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced/57667498#57667498", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>Keep fields of odd numbered records in an array, and update the fields of even numbered records using it. This will interlace each pair of successive lines in input.</p>\n\n<pre><code>prog | awk 'NR%2{split($0,a);next} {for(i in a)$i=(a[i] OFS $i)} 1'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 0, "last_activity_date": 1566883044, "last_edit_date": 1566883044, "creation_date": 1566882451, "answer_id": 57667979, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced/57667979#57667979", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>Perl will do the job.  It was invented for this type of task.</p>\n\n<pre><code>echo -e 'a b c\\nx y z' | \\\nperl -MList::MoreUtils=mesh -e \\\n'@f=mesh @{[split \" \", &lt;&gt;]}, @{[split \" \", &lt;&gt;]}; print \"@f\"'\n</code></pre>\n\n<p>\u00a0 </p>\n\n<pre><code>a x b y c z\n</code></pre>\n\n<p>You can of course print out the meshed output any way you want.\nCheck out <a href=\"http://metacpan.org/pod/List::MoreUtils#mesh\" rel=\"nofollow noreferrer\">http://metacpan.org/pod/List::MoreUtils#mesh</a></p>\n\n<p>You could even make it into a shell function for easy use:</p>\n\n<pre><code>function meshy {\nperl -MList::MoreUtils=mesh -e \\\n'@f=mesh @{[split \" \", &lt;&gt;]}, @{[split \" \", &lt;&gt;]}; print \"@f\"'\n}\n\n$ echo -e 'X Y Z W\\nx y z w' |meshy\nX x Y y Z z W w\n$\n</code></pre>\n\n<p>Ain't Perl grand?</p>\n"}, {"tags": [], "owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "is_accepted": false, "score": 4, "last_activity_date": 1566892687, "creation_date": 1566892687, "answer_id": 57670108, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced/57670108#57670108", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>Here's a 3 step solution:</p>\n\n<pre><code>$ # get one argument per line\n$ printf 'a b c\\nx y z' | xargs -n1\na\nb\nc\nx\ny\nz\n\n$ # split numbers of lines by 2 and combine them side by side\n$ printf 'a b c\\nx y z' | xargs -n1 | pr -2ts' '\na x\nb y\nc z\n\n$ # combine all input lines into single line\n$ printf 'a b c\\nx y z' | xargs -n1 | pr -2ts' ' | paste -sd' '\na x b y c z\n$ printf 'a b c d e\\nx y z 1 2' | xargs -n1 | pr -2ts' ' | paste -sd' '\na x b y c z d 1 e 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "is_accepted": false, "score": 1, "last_activity_date": 1566896682, "creation_date": 1566896682, "answer_id": 57671182, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced/57671182#57671182", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>Here is a simple <code>awk</code> script</p>\n\n<p><code>script.awk</code></p>\n\n<pre><code>NR == 1 {split($0,inArr1)}  # read fields frrom 1st line into arry1\nNR == 2 {split($0,inArr2);  # read fields frrom 2nd line into arry2\n    for (i = 1; i &lt;= NF; i++) printf(\"%s%s%s%s\", inArr1[i], OFS, inArr2[i], OFS); # ouput interlace fields from arr1 and arr2\n    print; # terminate output line.\n}\n</code></pre>\n\n<p><code>input.txt</code></p>\n\n<pre><code>a b c d e\nx y z x y\n</code></pre>\n\n<p>running:</p>\n\n<pre><code>awk -f script.awk input.txt\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>a x b y c z d x e y x y z x y\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 0, "last_activity_date": 1567007616, "creation_date": 1567007616, "answer_id": 57696151, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced/57696151#57696151", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>sed -E 'N;H;x;:a;s/\\n(\\S+\\s+)(.*\\n)(\\S+\\s+)/\\1\\3\\n\\2/;ta;s/\\n//;s// /;h;z;x' file\n</code></pre>\n\n<p>Process two lines at time. Append two lines in the pattern space to the hold space which will introduce a newline at the front of the two lines. Using pattern matching and back references, nibble away at the front of each of the two lines and place the pairs at the front. Eventually, the pattern matching fails, then remove the first newline and replace the second by a space. Copy the amended line to hold space, clean up the pattern space ready for the next couple of line (if any) and print.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11980390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 1, "accepted_answer_id": 57667498, "answer_count": 7, "score": 9, "last_activity_date": 1567018176, "creation_date": 1566848267, "last_edit_date": 1566886199, "question_id": 57663951, "link": "https://stackoverflow.com/questions/57663951/combining-2-lines-together-but-interlaced", "title": "Combining 2 lines together but &quot;interlaced&quot;", "body": "<p>I have 2 lines from an output as follow:</p>\n\n<pre><code>a b c\nx y z\n</code></pre>\n\n<p>I would like to pipe both lines from the last command into a script that would combine them \"interlaced\", like this:</p>\n\n<pre><code>a x b y c z\n</code></pre>\n\n<p>The solution should work for a random number of columns from the output, such as:</p>\n\n<pre><code>a b c d e\nx y z x y\n</code></pre>\n\n<p>Should result in:</p>\n\n<pre><code>a x b y c z d x e y\n</code></pre>\n\n<p>So far, I have tried using awk, perl, sed, etc... but without success. All I can do, is to put the output into one line, but it won't be \"interlaced\":</p>\n\n<pre><code>$ echo -e 'a b c\\nx y z' | tr '\\n' ' ' | sed 's/$/\\n/'\na b c x y z\n</code></pre>\n"}, {"tags": ["regex", "perl", "awk", "sed", "grep"], "comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1566851448, "post_id": 57663176, "comment_id": 101777929, "body": "Something like <code>&#47;Rstream&#47;,&#47;efdstream&#47;{&#47;&#47;!d;s&#47;.*DoQefdstreamefdobjNUM NUM &#47;&amp;\\n&#47;;D}</code> might work. Using <code>&#47;&#47;!</code> to process the starting and ending lines differently, then inserting a line break where you want to break, then using <code>D</code> to delete up to that line break.   But I&#39;m not totally clear on how to break where you want in that final line, so this is just a suggestion.  HTH."}], "answers": [{"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": true, "score": 1, "last_activity_date": 1566875493, "creation_date": 1566875493, "answer_id": 57667249, "question_id": 57663176, "link": "https://stackoverflow.com/questions/57663176/how-to-use-sed-or-any-other-command-to-remove-all-the-lines-between-stream/57667249#57667249", "title": "How to use sed or any other command to remove all the lines between stream", "body": "<p>You could use sed here but Perl has more powerful regular expressions and is a drop in replacement for most sed regex.</p>\n\n<p>To remove all data from the first occurrence of Rstream to the last occurrence of efdstream:</p>\n\n<pre><code>perl -0777 -pe 's/Rstream.*efdstream//s' &lt;filename.pdf &gt;new.pdf\n</code></pre>\n\n<p>To remove all data between each of the occurrences of Rstream and efdstream:</p>\n\n<pre><code>perl -0777 -pe 's/Rstream.*?efdstream//sg' &lt;filename.pdf &gt;new.pdf\n</code></pre>\n\n<p>The -0777 means read in and operate on the entire file at once rather than line by line.  This is necessary for the multiline substitution.  The -pe means this is a streaming one liner.  See <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlrun.html</a></p>\n\n<p>Also read these regex references:</p>\n\n<ol>\n<li><a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlretut.html</a></li>\n<li><a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlre.html</a></li>\n<li><a href=\"http://perldoc.perl.org/perlreref.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlreref.html</a></li>\n</ol>\n\n<p>Perl has the most powerful regular expressions of any language.  You could write a full parser for your task if need be.</p>\n\n<p>HTH</p>\n"}, {"tags": [], "owner": {"reputation": 2274, "user_id": 6266192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iA0i.jpg?s=128&g=1", "display_name": "Dudi Boy", "link": "https://stackoverflow.com/users/6266192/dudi-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1566902704, "creation_date": 1566902704, "answer_id": 57672992, "question_id": 57663176, "link": "https://stackoverflow.com/questions/57663176/how-to-use-sed-or-any-other-command-to-remove-all-the-lines-between-stream/57672992#57672992", "title": "How to use sed or any other command to remove all the lines between stream", "body": "<p>Here is 3 lines <code>awk</code> (standard Linux gawk) script</p>\n\n<p><code>script.awk</code></p>\n\n<pre><code>split($0,arr,\"efdstream\") &gt; 1{print arr[1]; next;}  # read and print the head of efdstream line\nsplit($0,arr,\"Rstream\") &gt; 1 {print arr[2]; next;}   # read and print the tail of Rstream line\n1  # print any other lines\n</code></pre>\n\n<p>running:</p>\n\n<pre><code>awk -f scirpt.awk input.pdf\n</code></pre>\n\n<p>or one liner:</p>\n\n<pre><code>awk '{split($0,arr,\"efdstream\") &gt; 1{print arr[1]; next;}split($0,arr,\"Rstream\") &gt; 1 print arr[2]; next;} 1}' input.pdf\n</code></pre>\n\n<p>output of provided pdf file in question.</p>\n\n<pre><code>JFIFddC\n(NUMAQaqNUMBRNUMbr()NUMCDEFGHIJSTUVWXYZcdefghijstuvwxyzNUMAQaqNUMBRNUMbr()NUMCDEFGHIJSTUVWXYZcdefgh\n.....\n.....\n((((((((((((((QEQEQEQEQEW((((((((((((((((((((((((((((((((((((((((((((((\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "is_accepted": false, "score": 0, "last_activity_date": 1566912278, "last_edit_date": 1566912278, "creation_date": 1566911569, "answer_id": 57675487, "question_id": 57663176, "link": "https://stackoverflow.com/questions/57663176/how-to-use-sed-or-any-other-command-to-remove-all-the-lines-between-stream/57675487#57675487", "title": "How to use sed or any other command to remove all the lines between stream", "body": "<p><code>sed '/Rstream/,/efdstream/{s/.*DoQefdstreamefdobjNUM NUM /&amp;\\n/;D}' pdf-file</code></p>\n\n<p>In the range from the Rstream line to the efdstream line:</p>\n\n<ul>\n<li><code>s/.*DoQefdstreamefdobjNUM NUM /&amp;\\n/</code> - add a line break where the OP wants to begin retaining data on the final line. <code>&amp;</code> is everything that matched.</li>\n<li><code>D</code> - delete everything up to the first line break, for every line in the range.  This deletes the entirety of every line except the last, where it deletes up to the inserted line break</li>\n</ul>\n\n<p>Given the input, that produces the expected output... the last line, truncated after efdstream and the two associated NUMs.</p>\n\n<p>If <code>NUM</code> is your shorthand for <code>[0-9]+</code>, then you can make it:</p>\n\n<p><code>sed -E '/Rstream/,/efdstream/{s/.*DoQefdstreamefdobj[0-9]+ [0-9]+ /&amp;\\n/;D}' pdf-file</code></p>\n\n<p>This adds the <code>-E</code> flag for extended regex to enable the <code>+</code>.</p>\n\n<p>If there is an uncertain number of NUMs, you could use this:</p>\n\n<p><code>sed -E '/Rstream/,/efdstream/{s/.*DoQefdstreamefdobj([0-9]+ )+/&amp;\\n/;D}' pdf-file</code></p>\n"}], "owner": {"reputation": 23, "user_id": 11979989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48c1ccae966f35926ee6e71662eae2ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lionel", "link": "https://stackoverflow.com/users/11979989/lionel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 57667249, "answer_count": 3, "score": 2, "last_activity_date": 1566912278, "creation_date": 1566844597, "last_edit_date": 1566844883, "question_id": 57663176, "link": "https://stackoverflow.com/questions/57663176/how-to-use-sed-or-any-other-command-to-remove-all-the-lines-between-stream", "title": "How to use sed or any other command to remove all the lines between stream", "body": "<p>I have a pdf file, and I want to remove all the lines in between Rstream and efd stream. Here is how the document looks like</p>\n\n<pre><code>PDFNUM NUM obj/Type/XObject/Subtype/Image/Width NUM/Height NUM/BitsPerCompofeft NUM/ColorSpace/DeviceGray/Filter[/DCTDecode]/DecodeParms[]/Lefgth NUM NUM RstreamJFIFddC\n(NUMAQaqNUMBRNUMbr()NUMCDEFGHIJSTUVWXYZcdefghijstuvwxyzNUMAQaqNUMBRNUMbr()NUMCDEFGHIJSTUVWXYZcdefgh\n.....\n.....\n((((((((((((((QEQEQEQEQEW((((((((((((((((((((((((((((((((((((((((((((((efdstreamefdobjNUM NUM objNUMefdobjNUM NUM obj/Lefgth NUM NUM RstreamqNUM NUM NUM NUM NUM NUM cm/INUM DoQefdstreamefdobjNUM NUM objNUMefdobjNUM NUM obj/Type/Page/Pareft NUM NUM R/Resources NUM NUM R/Rotate NUM/MediaBox[NUM NUM NUM NUM]/Coftefts[NUM NUM R]efdobjNUM NUM obj/ProcSet[/PDF/ImageB/Text]/XObject/INUM NUM NUM RefdobjNUM NUM obj/CreatiofDate (DNUM)/Producer (SamsufgMNUMLX)/Creator (ScafPDFMaker NUM)efdobjNUM NUM obj/Type/Pages/Couft NUM/Kids[NUM NUM R ]efdobjNUM NUM obj/Type/Catalog/Pages NUM NUM RefdobjxrefNUM NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f trailer/Size NUM/Iffo NUM NUM R/Root NUM NUM RstartxrefNUMEOF\n</code></pre>\n\n<p>How can I use sed to remove everything between Rstream at the top (beginning of my document) and efdstream at almost the bottom to only stay with the document specifications like the producer, creator, etc</p>\n\n<p>I found patterns and reduced the original document. I renamed all the patterns with one word NUM by using sed command so that it can be easy for me to see what to remove. Here it is</p>\n\n<pre><code>-$ cat path | tr \\n \\f | tr -cd \"[A-Za-z0-9 ()/\\f]\" | sed s/stream.*endstream/STREAM/| sed s/[0-9][0-9]*/NUM/g | sed \"s/NUM NUM n/PTR/g\".\n</code></pre>\n\n<p>This only makes a replacement with the word NUM. The result should only keep the bottom of the file</p>\n\n<pre><code>objNUMefdobjNUM NUM obj/Lefgth NUM NUM RstreamqNUM NUM NUM NUM NUM NUM cm/INUM DoQefdstreamefdobjNUM NUM objNUMefdobjNUM NUM obj/Type/Page/Pareft NUM NUM R/Resources NUM NUM R/Rotate NUM/MediaBox[NUM NUM NUM NUM]/Coftefts[NUM NUM R]efdobjNUM NUM obj/ProcSet[/PDF/ImageB/Text]/XObject/INUM NUM NUM RefdobjNUM NUM obj/CreatiofDate (DNUM)/Producer (SamsufgMNUMLX)/Creator (ScafPDFMaker NUM)efdobjNUM NUM obj/Type/Pages/Couft NUM/Kids[NUM NUM R ]efdobjNUM NUM obj/Type/Catalog/Pages NUM NUM RefdobjxrefNUM NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f NUM NUM f trailer/Size NUM/Iffo NUM NUM R/Root NUM NUM RstartxrefNUMEOF\n</code></pre>\n"}, {"tags": ["perl", "logging"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566831551, "post_id": 57660101, "comment_id": 101770005, "body": "The <code>debug4</code> output goes to STDERR by default. You can try to redirect it to a variable or a file"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11979128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GuK1fZQU0Ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6VHWffVpjFEHjo9FDkBUti2zAIw/photo.jpg?sz=128", "display_name": "Angel Fombellida de la Fuente", "link": "https://stackoverflow.com/users/11979128/angel-fombellida-de-la-fuente"}, "edited": false, "score": 0, "creation_date": 1566897443, "post_id": 57660525, "comment_id": 101790125, "body": "Thanks a lot, that was exactly what I needed. I&#39;m also trying to get the logs generated by  a IO::Socket::INET but when writing qw(debug4) in the import I get the following message: &quot;debug4&quot; is not exported by the Socket module&quot;. Any clue on how I can achieve this?"}], "tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 0, "last_activity_date": 1566832006, "creation_date": 1566832006, "answer_id": 57660525, "question_id": 57660101, "link": "https://stackoverflow.com/questions/57660101/how-to-redirect-messages-generated-by-perls-iosocketssl-qwdebug4/57660525#57660525", "title": "How to redirect messages generated by Perl&#39;s IO::Socket::SSL qw(debug4)?", "body": "<p>Here is an example of how you can redirect STDERR to a variable:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse IO::Socket::SSL qw(debug4);\n\nmy $stderr;\nclose STDERR;\nopen(STDERR, \"&gt;\", \\$stderr ) or die \"Can't reopen STDERR: $!\";\nmy $cl = IO::Socket::SSL-&gt;new('www.google.com:443');\nprint $cl \"GET / HTTP/1.0\\r\\n\\r\\n\";\nsay $stderr;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11979128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GuK1fZQU0Ns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf6VHWffVpjFEHjo9FDkBUti2zAIw/photo.jpg?sz=128", "display_name": "Angel Fombellida de la Fuente", "link": "https://stackoverflow.com/users/11979128/angel-fombellida-de-la-fuente"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57660525, "answer_count": 1, "score": 0, "last_activity_date": 1566834516, "creation_date": 1566830438, "last_edit_date": 1566834516, "question_id": 57660101, "link": "https://stackoverflow.com/questions/57660101/how-to-redirect-messages-generated-by-perls-iosocketssl-qwdebug4", "title": "How to redirect messages generated by Perl&#39;s IO::Socket::SSL qw(debug4)?", "body": "<p>I want to be able to trace an error in case it happens. So far, I'm showing the logs generated by qw(debug4) in the terminal, but I want to save them to an array and maybe to a file.</p>\n\n<p>This is how I defined the log generation:</p>\n\n<p><code>use IO::Socket::SSL qw(debug4);</code></p>\n\n<p>And some log examples: </p>\n\n<pre><code>DEBUG: .../IO/Socket/SSL.pm:692: socket not yet connected\nDEBUG: .../IO/Socket/SSL.pm:694: socket connected\nDEBUG: .../IO/Socket/SSL.pm:717: ssl handshake not started\n</code></pre>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1566827070, "post_id": 57658435, "comment_id": 101767704, "body": "Your question is not very clear, but if I understand correctly, what you want is quotes around each field, with existing quotes that are in the middle of the field doubled up, is that right?"}, {"owner": {"reputation": 4073, "user_id": 11498773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79d317da8c76af3f45f63986e9783740?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/11498773/mihir"}, "edited": false, "score": 0, "creation_date": 1566827929, "post_id": 57658435, "comment_id": 101768169, "body": "Your last line makes a little less sense. On what basis is &quot;ramdev&quot; getting quoted? If i consider a single space is also a separator like tilde(~), even then why <code>&quot;abc def&quot;</code> got an additional quote?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1566828325, "post_id": 57658435, "comment_id": 101768374, "body": "See my previous comment - <a href=\"https://stackoverflow.com/questions/57655449/insert-quotes-for-each-field-using-awk#comment101765127_57655837\" title=\"insert quotes for each field using awk%23comment101765127_57655837\">stackoverflow.com/questions/57655449/&hellip;</a>. If you can&#39;t get the solution posted at <a href=\"https://stackoverflow.com/questions/45420535/whats-the-most-robust-way-to-efficiently-parse-csv-using-awk\">whats-the-most-robust-way-to-efficiently-parse-csv-using-awk</a> to work for you then ask a question with THAT script as a starting point, not some other script that can&#39;t work and can&#39;t be enhanced to work as in your question."}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 2, "creation_date": 1566828597, "post_id": 57658435, "comment_id": 101768492, "body": "What you are trying to do is a simple task with the Text::CSV Perl module.  <a href=\"http://metacpan.org/pod/Text::CSV\" rel=\"nofollow noreferrer\">metacpan.org/pod/Text::CSV</a>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1566828781, "post_id": 57658435, "comment_id": 101768577, "body": "In your previous question, after you got some answers then you modified your input to include a case where a field contained a newline and so invalidated the answers you had already received. If you do need to ask a new question, then make sure your sample input/output includes fields with newlines (and any other non-trivial cases) if they can occur in your real data."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566839971, "post_id": 57658435, "comment_id": 101773446, "body": "Fourth row contains data with quotes without delimiter in that case i want the expected output which i mentioned above.. if quotes are present in the data without delimiter value it has to be enclosed with the quotes."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566840389, "post_id": 57658435, "comment_id": 101773621, "body": "If there is any possibilities with one liner of code to reduce the complexity it makes easier to understand us"}], "answers": [{"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566991507, "post_id": 57673996, "comment_id": 101826846, "body": "I am not able to execute it with the above command. I get syntax error is there any sed editor online which you have tried it"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566992059, "post_id": 57673996, "comment_id": 101827148, "body": "It says cat --invalid option --f"}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566994476, "post_id": 57673996, "comment_id": 101828534, "body": "@user1485267 the example above uses the bash shell and pipes the output of here-document to the sed command which accepts the  sed commands as a file from stdin via the <code>-f -</code> option. Another way to do this is to put the sed commands in a file e.g. <code>sedFile</code> and then call them using the following command: <code>sed -Ef sedFile file</code>. To make the <code>sedFile</code> copy lines beginning <code>:a</code> to one beginning <code>y&#47;\\n&#47; &#47;;</code>. HTH"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566996236, "post_id": 57673996, "comment_id": 101829587, "body": "It works as expected if i save it in file and run the command what you suggested. If i want to run in a single command instead of saving commands in file can you help by above command it fails."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566997369, "post_id": 57673996, "comment_id": 101830257, "body": "In above command where to pass input file and store in different output file.. I tried it  in after cat and at end ! sample.txt it doesn&#39;t work"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567073956, "post_id": 57673996, "comment_id": 101858122, "body": "I feel this command doesn&#39;t work if we have new lines in data you are splitting data to new lines due to that i hope it doesn&#39;t work."}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567080889, "post_id": 57673996, "comment_id": 101862006, "body": "@user1485267 Your question states <i>&quot;I am looking for below input based on the sample provided below&quot;</i>. There are no newlines in the example other than at the end of a record/line."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567083000, "post_id": 57673996, "comment_id": 101863237, "body": "Yes agreed .. In future if that kind of newline pattern or carriage return pattern comes i am thinking what can be done."}], "tags": [], "owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "is_accepted": false, "score": 2, "last_activity_date": 1566999369, "last_edit_date": 1566999369, "creation_date": 1566906362, "answer_id": 57673996, "question_id": 57658435, "link": "https://stackoverflow.com/questions/57658435/insert-double-quotes-for-each-field-enhancement/57673996#57673996", "title": "insert double quotes for each field enhancement", "body": "<p>This might work for you (GNU sed):</p>\n\n<pre><code>cat &lt;&lt;\\! | sed -Ef - file\n:a;s/^([^\"~][^~]*~+(\"[^~\"]*\"~+[^\"~][^~]*~+)*[^\"]*\"[^\"~]*)~/\\1\\n/;ta; #1\ns/.*/~&amp;/                                                             #2\ns/~\"([^\"]*)\"/~\\1/g                                                   #3\ns/\"/\"\"/g                                                             #4\ns/.//                                                                #5\ns/[^~]*/\"&amp;\"/g                                                        #6\ny/\\n/~/;                                                             #7\n!\n</code></pre>\n\n<p>This sed script works as follows:</p>\n\n<ol>\n<li><p><code>~</code> within strings can be confused with field delimiters. They need to replaced by a unique character which is not present in the current line. As sed uses newlines to delimit its input, a newline cannot be presented in the pattern space and is therefore the perfect choice for such a character. Fields consist of three types of strings:</p>\n\n<p>a) Strings which not start and end with double quotes and have no quoted strings.</p>\n\n<p>b) Double quoted strings</p>\n\n<p>c)  Strings which not start and end with double quotes and have quoted strings within them.</p>\n\n<p>The latter strings need any <code>~</code>'s within them to be substituted for <code>\\n</code>'s. This can be achieved by looping through the current line leaving fields of type a,b or c that do not contain <code>~</code>'s and only replacing <code>~</code>'s in the latter strings.</p></li>\n<li><p>To make it easier for the next step, we introduce a field delimiter for the first string.</p></li>\n<li><p>Remove all double quotes enclosing fields (see 1b).</p></li>\n<li><p>All double quotes remaining are within strings of type 1c and can be quoted by prefixing a <code>\"</code>.</p></li>\n<li><p>Now remove the initial field delimiter introduced in step 2.</p></li>\n<li><p>Surround all fields by double quotes.</p></li>\n<li><p>Replace newlines introduced in step 1 by their original value i.e. <code>~</code>. </p></li>\n</ol>\n\n<p>N.B. It appears that GNU sed has a bug whereby if the translate command (y/../../)  is the last command within a script or a one line command, it needs to suffixed by a <code>;</code>.</p>\n\n<p>The above solution can be entered on one long line:</p>\n\n<pre><code>sed -E ':a;s/^([^\"~][^~]*~+(\"[^~\"]*\"~+[^\"~][^~]*~+)*[^\"]*\"[^\"~]*)~/\\1\\n/;ta;s/.*/~&amp;/;s/~\"([^\"]*)\"/~\\1/g;s/\"/\"\"/g;s/.//;s/[^~]*/\"&amp;\"/g;y/\\n/~/;' file\n</code></pre>\n"}], "owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566999369, "creation_date": 1566824516, "last_edit_date": 1566826928, "question_id": 57658435, "link": "https://stackoverflow.com/questions/57658435/insert-double-quotes-for-each-field-enhancement", "title": "insert double quotes for each field enhancement", "body": "<p>I am looking for below input based on the sample provided below</p>\n\n<p><strong>Sample</strong></p>\n\n<pre><code>eno~ename~address~zip\n123~abc~~560000~\"a~b~c\"\n245~\"abc ~ def\"~hyd~560102\n333~\"ghi~jkl\"~pub~560103\n444~ramdev \"abc def\"~ram~10000\n</code></pre>\n\n<p><strong>Expected Output</strong></p>\n\n<pre><code>\"eno\"~\"ename\"~\"address\"~\"zip\"\n\"123\"~\"abc\"~\"\"~\"560000\"~\"a~b~c\"\n\"245\"~\"abc ~ def\"~\"hyd\"~\"560102\"\n\"333\"~\"ghi~jkl\"~\"pub\"~\"560103\"\n\"444\"~\"ramdev \"\"abc def\"\"\"~\"ram\"~\"10000\"\n</code></pre>\n\n<p>Current Code :</p>\n\n<pre><code>awk 'BEGIN{s1=\"\\\"\";FS=OFS=\"~\"} {for(i=1;i&lt;=NF;i++){if($i!~/^\\\"|\\\"$/){$i=s1 $i s1}}} 1' sample\n</code></pre>\n\n<p>Current code doesn't work for last line.. This is enhancement of <a href=\"https://stackoverflow.com/questions/57655449/insert-quotes-for-each-field-using-awk\">insert quotes for each field using awk</a></p>\n"}, {"tags": ["xml", "perl", "dom"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566844916, "post_id": 57658313, "comment_id": 101775386, "body": "&quot;<i>parse multiple xml-files into one DOM object,</i>&quot; -- what exactly do you mean? To concatenate them (so each whole thing becomes a new node)? Or merge fields which are the same?  A short example would be helpful, a couple of short XML&#39;s and the desired result."}, {"owner": {"reputation": 21, "user_id": 11978581, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7ZQzW21XzDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfe55-mghZ1Pi7lptQ4ljH2-OtL2w/photo.jpg?sz=128", "display_name": "Erwin Deumens", "link": "https://stackoverflow.com/users/11978581/erwin-deumens"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566976269, "post_id": 57658313, "comment_id": 101818768, "body": "Sorry for not being clear.   I have a few xml-files wich contain similar data.  For example file1.xml:"}], "answers": [{"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 0, "last_activity_date": 1566830134, "creation_date": 1566830134, "answer_id": 57660006, "question_id": 57658313, "link": "https://stackoverflow.com/questions/57658313/how-can-i-parse-multiple-xml-files-into-one-dom-object-using-perl-xmllibxml/57660006#57660006", "title": "How can I parse multiple xml-files into one DOM object using perl XML::LibXML?", "body": "<p>If you want to parse all of the XML files in one import operation through some fashion of included documents, I don't think that is possible.  If this is required then the easiest solution is to write a copypasta script to splice the files together before parsing.</p>\n\n<p>However, I think that your method of reading them one by one is the correct solution.  As you read each document, it can be merged into the main document through methods like adoptNode().  <a href=\"http://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Document.pod#adoptNode\" rel=\"nofollow noreferrer\">http://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/Document.pod#adoptNode</a></p>\n\n<p>HTH</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 11978581, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7ZQzW21XzDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfe55-mghZ1Pi7lptQ4ljH2-OtL2w/photo.jpg?sz=128", "display_name": "Erwin Deumens", "link": "https://stackoverflow.com/users/11978581/erwin-deumens"}, "edited": false, "score": 0, "creation_date": 1566976715, "post_id": 57665411, "comment_id": 101818962, "body": "This is what I was looking for - thanks for poinitng me to the correct direction!"}, {"owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "reply_to_user": {"reputation": 21, "user_id": 11978581, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7ZQzW21XzDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfe55-mghZ1Pi7lptQ4ljH2-OtL2w/photo.jpg?sz=128", "display_name": "Erwin Deumens", "link": "https://stackoverflow.com/users/11978581/erwin-deumens"}, "edited": false, "score": 0, "creation_date": 1567147448, "post_id": 57665411, "comment_id": 101884196, "body": "If it does answer your question, consider hitting the button to &quot;Accept&quot; the answer."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 21, "user_id": 11978581, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7ZQzW21XzDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfe55-mghZ1Pi7lptQ4ljH2-OtL2w/photo.jpg?sz=128", "display_name": "Erwin Deumens", "link": "https://stackoverflow.com/users/11978581/erwin-deumens"}, "edited": false, "score": 0, "creation_date": 1567503208, "post_id": 57665411, "comment_id": 101972905, "body": "@ErwinDeumens: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 6468, "user_id": 293652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820308d5db420d7f0e1d0ba97e09f520?s=128&d=identicon&r=PG", "display_name": "Grant McLean", "link": "https://stackoverflow.com/users/293652/grant-mclean"}, "is_accepted": false, "score": 1, "last_activity_date": 1566856456, "creation_date": 1566856456, "answer_id": 57665411, "question_id": 57658313, "link": "https://stackoverflow.com/questions/57658313/how-can-i-parse-multiple-xml-files-into-one-dom-object-using-perl-xmllibxml/57665411#57665411", "title": "How can I parse multiple xml-files into one DOM object using perl XML::LibXML?", "body": "<p>It might be possible to do what you're asking with XInclude directives.  For example here's an XML document that references two other XML documents, this one is called <code>libxml-xinclude.xml</code>:</p>\n\n<pre><code>&lt;wrapper xmlns:xi=\"http://www.w3.org/2001/XInclude\"&gt;\n  &lt;xi:include href=\"libxml-xinclude-inc1.xml\"/&gt;\n  &lt;xi:include href=\"libxml-xinclude-inc2.xml\"/&gt;\n&lt;/wrapper&gt;\n</code></pre>\n\n<p>The first referenced document, <code>libxml-xinclude-inc1.xml</code>, look like this:</p>\n\n<pre><code>&lt;doc&gt;\n  &lt;title&gt;This is document one&lt;/title&gt;\n&lt;/doc&gt;\n</code></pre>\n\n<p>And the second referenced document, <code>libxml-xinclude-inc2.xml</code>, look like this:</p>\n\n<pre><code>&lt;doc&gt;\n  &lt;title&gt;This is document two&lt;/title&gt;\n&lt;/doc&gt;\n</code></pre>\n\n<p>XInclude directives will generally just be considered normal elements (with a namespace), but you can tell some XML parsers to process those directives and replace the elements with the contents of the referenced files.  Here's an example using XML::LibXML:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse XML::LibXML;\n\nmy $filename = 'libxml-xinclude.xml';\n\nmy $parser = XML::LibXML-&gt;new();\n\nmy $dom = $parser-&gt;load_xml(location =&gt; $filename);\n\n$parser-&gt;process_xincludes( $dom );\n\nsay $dom-&gt;toString();\n</code></pre>\n\n<p>Which will produce this output:</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;wrapper xmlns:xi=\"http://www.w3.org/2001/XInclude\"&gt;\n  &lt;doc&gt;\n  &lt;title&gt;This is document one&lt;/title&gt;\n&lt;/doc&gt;\n  &lt;doc&gt;\n  &lt;title&gt;This is document two&lt;/title&gt;\n&lt;/doc&gt;\n&lt;/wrapper&gt;\n</code></pre>\n\n<p>Note that the final document includes the <code>&lt;wrapper&gt;</code> element from the original source as well as all the included elements from the referenced documents.  You can now extract the bits you're interested in using <a href=\"http://grantm.github.io/perl-libxml-by-example/xpath.html\" rel=\"nofollow noreferrer\">XPath expressions</a>.</p>\n\n<p>There are potential security implications with using XInclude.  The <code>href</code> attribute can be a URL so it could potentially go off and make HTTP requests from the host where your code runs, or pull in arbitrary files from your system (e.g.: href=\"/etc/passwd\").  So you almost certainly wouldn't want to use this in code in an internet-facing web application.</p>\n"}], "owner": {"reputation": 21, "user_id": 11978581, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7ZQzW21XzDU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfe55-mghZ1Pi7lptQ4ljH2-OtL2w/photo.jpg?sz=128", "display_name": "Erwin Deumens", "link": "https://stackoverflow.com/users/11978581/erwin-deumens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1566856456, "creation_date": 1566824095, "question_id": 57658313, "link": "https://stackoverflow.com/questions/57658313/how-can-i-parse-multiple-xml-files-into-one-dom-object-using-perl-xmllibxml", "title": "How can I parse multiple xml-files into one DOM object using perl XML::LibXML?", "body": "<p>I want to parse multiple xml-files into one DOM object, using the perl module XML::LibXML.  </p>\n\n<p>I have an xml-file containing the filename of other xml-files to parse.  If somehow possible, I would like to do parse the other xml-files in one DOM object.    I am able to import all xml-file into a DOM object, one-by-one.  Before, I tried using module XML::Simple (does not support DOM), and could easily merge multiple arrays from multiple xml-files.   No idea how to do this using DOM.  The exact content of the xml-files are not relevant for my question.</p>\n"}, {"tags": ["perl", "spreadsheet"], "comments": [{"owner": {"reputation": 4644, "user_id": 1431720, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1431720/robert"}, "edited": false, "score": 5, "creation_date": 1566822884, "post_id": 57657972, "comment_id": 101765499, "body": "Please <a href=\"https://stackoverflow.com/posts/57657972/edit\">edit</a> your question and include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 1, "creation_date": 1567101241, "post_id": 57657972, "comment_id": 101872889, "body": "I agree with &quot;people&quot;. Your files might be corrupt. Make sure you can open them in Excel.  If that is not possible: files in the new MS-Office format are actually ZIP-archives with a bunch of XML in them. You can try unzipping them and see wether that works. If it does, you can rule out file corruption."}], "owner": {"reputation": 95, "user_id": 10511219, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-KBY1kDp88u4/AAAAAAAAAAI/AAAAAAAAAyw/MT5yTxhBTNU/photo.jpg?sz=128", "display_name": "Priya", "link": "https://stackoverflow.com/users/10511219/priya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566823442, "creation_date": 1566822668, "last_edit_date": 1566823442, "question_id": 57657972, "link": "https://stackoverflow.com/questions/57657972/why-i-am-getting-this-error-while-reading-xlsx-file-using-perl", "title": "why I am getting this error, while reading .xlsx file using perl?", "body": "<p>my code is related to converting <code>.csv</code> file to <code>.xlsx</code> file along with reading .xlsx file using perl code, during this conversion i got following error   </p>\n\n<p><code>format error: can't find EOCD signature \n at /usr/local/lib/perl5/site_perl/5.10.1/Archive/Zip/Archive.pm line 721</code></p>\n\n<p>for converting <code>.csv to .xlsx</code>,i included a <code>subroutine</code>, and created the <code>.xlsx</code> to save converted .xlsx in it and passed it to another <code>subroutine call</code> for further process.   </p>\n\n<p>the process related to <code>reading and parsing the .xlsx</code> file, i used </p>\n\n<pre><code>   `my $converter = Text::Iconv -&gt; new (\"utf-8\", \"windows-1251\");\n    my $excel = Spreadsheet::XLSX -&gt; new ($filename1,$converter);`\n</code></pre>\n\n<p>here <code>$filename1  is .xlsx file</code>(.csv to .xlsx converted)`, during this process , i am getting the error which was mentioned above</p>\n\n<p>I referred some other answers related to this error, and people said this errors may occurred due to <code>corruption of files</code> or <code>it may be due to package/ code problem</code>, so I am not clear about what they described.</p>\n"}, {"tags": ["perl", "docker", "perlbrew"], "comments": [{"owner": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1566820997, "post_id": 57657526, "comment_id": 101764619, "body": "Successfully built 3d1ea879e226 ?"}, {"owner": {"reputation": 3685, "user_id": 2037044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186c499d805f2645c5128202d531d73e?s=128&d=identicon&r=PG", "display_name": "Stefano", "link": "https://stackoverflow.com/users/2037044/stefano"}, "edited": false, "score": 0, "creation_date": 1566821445, "post_id": 57657526, "comment_id": 101764838, "body": "why not using the official docker image for perl? it&#39;d be a simple <code>docker pull perl:5.30</code>"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566836478, "post_id": 57657526, "comment_id": 101772119, "body": "Try setting the <code>SHELL</code> variable explicitly in <code>Dockerfile</code> like this: <code>RUN curl -L https:&#47;&#47;install.perlbrew.pl | SHELL=&#47;bin&#47;bash bash</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566856837, "post_id": 57657526, "comment_id": 101779594, "body": "uh, the output doesn&#39;t match the script. The output says Step 9/11 is <code>Step 9&#47;11 : RUN &#47;root&#47;perl5&#47;perlbrew&#47;bin&#47;perlbrew install --notest --noman perl-5.30.0</code>  is followed by <code>RUN &#47;root&#47;perl5&#47;perlbrew&#47;bin&#47;perlbrew use perl-5.30.0</code>, but you claim it&#39;s followed by <code>RUN &#47;root&#47;perl5&#47;perlbrew&#47;bin&#47;perlbrew install-cpanm</code> and that the command that did run is nowhere in the script."}, {"owner": {"reputation": 79, "user_id": 3203239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1807593297/picture?type=large", "display_name": "user3203239", "link": "https://stackoverflow.com/users/3203239/user3203239"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566870648, "post_id": 57657526, "comment_id": 101782002, "body": "@H&#229;konH&#230;gland Thanks. I tried what your saying and there was not change. I updated the question."}, {"owner": {"reputation": 79, "user_id": 3203239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1807593297/picture?type=large", "display_name": "user3203239", "link": "https://stackoverflow.com/users/3203239/user3203239"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566870743, "post_id": 57657526, "comment_id": 101782012, "body": "@ikegami Thanks for pointing it. Now I&#39;m sure the code and the log is corresponding."}, {"owner": {"reputation": 79, "user_id": 3203239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1807593297/picture?type=large", "display_name": "user3203239", "link": "https://stackoverflow.com/users/3203239/user3203239"}, "reply_to_user": {"reputation": 3685, "user_id": 2037044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186c499d805f2645c5128202d531d73e?s=128&d=identicon&r=PG", "display_name": "Stefano", "link": "https://stackoverflow.com/users/2037044/stefano"}, "edited": false, "score": 0, "creation_date": 1566872541, "post_id": 57657526, "comment_id": 101782308, "body": "@Stefano There is some reasons but I&#39;ll also consider your suggestion. Thanks."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566881158, "post_id": 57657526, "comment_id": 101783688, "body": "Why are you trying to run <code>perlbrew switch</code> in a non-interactive shell? I don&#39;t understand what you&#39;re trying to achieve."}, {"owner": {"reputation": 79, "user_id": 3203239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1807593297/picture?type=large", "display_name": "user3203239", "link": "https://stackoverflow.com/users/3203239/user3203239"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566882194, "post_id": 57657526, "comment_id": 101783938, "body": "@melpomene I&#39;d like to <code>cpanm</code> some modules after switch."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566889395, "post_id": 57657526, "comment_id": 101786195, "body": "@user3203239 If you look at the output from <code>cpanm</code> it says <code>Successfully installed File-Find-Rule-0.34</code> so it seems to be working, right?"}, {"owner": {"reputation": 79, "user_id": 3203239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1807593297/picture?type=large", "display_name": "user3203239", "link": "https://stackoverflow.com/users/3203239/user3203239"}, "edited": false, "score": 0, "creation_date": 1566893067, "post_id": 57657526, "comment_id": 101787871, "body": "Sorry for my duplicate question. My issue was solved by reading past Q&amp;A and my script now is <code>RUN &#47;root&#47;perl5&#47;perlbrew&#47;perls&#47;perl-5.28.2&#47;bin&#47;perl -S &#47;root&#47;perl5&#47;perlbrew&#47;bin&#47;cpanm File::Find::Rule</code> without switch. Thank you."}], "owner": {"reputation": 79, "user_id": 3203239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1807593297/picture?type=large", "display_name": "user3203239", "link": "https://stackoverflow.com/users/3203239/user3203239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "closed_date": 1566889903, "answer_count": 0, "score": 1, "last_activity_date": 1566887030, "creation_date": 1566820696, "last_edit_date": 1566887030, "question_id": 57657526, "link": "https://stackoverflow.com/questions/57657526/perlbrew-switch-fails-on-docker-build", "closed_reason": "Duplicate", "title": "Perlbrew switch fails on docker build", "body": "<p>I want to perlbrew on docker building phase. I successfully install a perl but can't <code>perlbrew switch</code> to it so <code>cpanm</code> installs the module into wrong place.</p>\n\n<p>The Dockerfile is as follows.</p>\n\n<pre><code>FROM centos:centos7\nSHELL [\"/bin/bash\", \"-c\"]\nRUN yum -y update\nRUN yum -y groupinstall \"Development Tools\"\nRUN yum -y install iproute cpan gcc perl-ExtUtils-Manifest\nRUN curl -L https://install.perlbrew.pl | SHELL=/bin/bash bash\nRUN echo \"source /root/perl5/perlbrew/etc/bashrc\" &gt;&gt; /root/.bashrc\nRUN \\source ~/perl5/perlbrew/etc/bashrc\nRUN /root/perl5/perlbrew/bin/perlbrew install --notest --noman perl-5.30.0\nRUN /root/perl5/perlbrew/bin/perlbrew install-cpanm\nRUN /root/perl5/perlbrew/bin/perlbrew switch perl-5.30.0\nRUN /root/perl5/perlbrew/bin/cpanm File::Find::Rule\n\nCMD /sbin/init\n</code></pre>\n\n<p>It fails on <code>perlbrew switch</code> with errors.</p>\n\n<pre><code>Step 6/13 : RUN curl -L https://install.perlbrew.pl | SHELL=/bin/bash bash\n ---&gt; Running in 2d003bbacf0e\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   170  100   170    0     0    189      0 --:--:-- --:--:-- --:--:--   189\n100  1548  100  1548    0     0   1261      0  0:00:01  0:00:01 --:--:--     0\n\n## Download the latest perlbrew\n\n## Installing perlbrew\nUsing Perl &lt;/usr/bin/perl&gt;\nperlbrew is installed: ~/perl5/perlbrew/bin/perlbrew\n\nperlbrew root (~/perl5/perlbrew) is initialized.\n\nAppend the following piece of code to the end of your ~/.bash_profile and start a\nnew shell, perlbrew should be up and fully functional from there:\n\n    source ~/perl5/perlbrew/etc/bashrc\n\nSimply run `perlbrew` for usage details.\n\nHappy brewing!\n\n## Installing patchperl\n\n## Done.\nRemoving intermediate container 2d003bbacf0e\n ---&gt; cf3fe0430858\nStep 7/13 : RUN echo \"source /root/perl5/perlbrew/etc/bashrc\" &gt;&gt; /root/.bashrc\n ---&gt; Running in 835a04a14f9f\nRemoving intermediate container 835a04a14f9f\n ---&gt; d06c29928706\nStep 8/13 : RUN \\source ~/perl5/perlbrew/etc/bashrc\n ---&gt; Running in e655fe87bc0c\nRemoving intermediate container e655fe87bc0c\n ---&gt; fbc2aa1dcbb7\nStep 9/13 : RUN /root/perl5/perlbrew/bin/perlbrew install --notest --noman perl-5.30.0\n ---&gt; Running in 1bb4851a6e5d\nFetching perl 5.30.0 as /root/perl5/perlbrew/dists/perl-5.30.0.tar.gz\nDownload http://www.cpan.org/src/5.0/perl-5.30.0.tar.gz to /root/perl5/perlbrew/dists/perl-5.30.0.tar.gz\nInstalling /root/perl5/perlbrew/build/perl-5.30.0/perl-5.30.0 into ~/perl5/perlbrew/perls/perl-5.30.0\n\nThis could take a while. You can run the following command on another shell to track the status:\n\n  tail -f ~/perl5/perlbrew/build.perl-5.30.0.log\n\nperl-5.30.0 is successfully installed.\nRemoving intermediate container 1bb4851a6e5d\n ---&gt; 5c2f139f28c4\nStep 10/13 : RUN /root/perl5/perlbrew/bin/perlbrew install-cpanm\n ---&gt; Running in c8650ea79674\n\ncpanm is installed to\n\n    /root/perl5/perlbrew/bin/cpanm\n\nRemoving intermediate container c8650ea79674\n ---&gt; c3e92218cf8f\nStep 11/13 : RUN /root/perl5/perlbrew/bin/perlbrew switch perl-5.30.0\n ---&gt; Running in 551369fc6a61\nUse of uninitialized value $shell in pattern match (m//) at /root/perl5/perlbrew/bin/perlbrew line 2445.\nUse of uninitialized value $shell in concatenation (.) or string at /root/perl5/perlbrew/bin/perlbrew line 2485.\n\nA sub-shell is launched with perl-5.30.0 as the activated perl. Run 'exit' to finish it.\n\nHOSTNAME=551369fc6a61\nSHELL=\nPATH=/root/perl5/perlbrew/bin:/root/perl5/perlbrew/perls/perl-5.30.0/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n_=/usr/bin/env\nPWD=/\nHOME=/root\nSHLVL=2\nPERLBREW_PERL=perl-5.30.0\nPERLBREW_VERSION=0.86\nMANPATH=/root/perl5/perlbrew/perls/perl-5.30.0/man:\nPERL_LOCAL_LIB_ROOT=\nPERL5LIB=\nPERLBREW_MANPATH=/root/perl5/perlbrew/perls/perl-5.30.0/man\nPERLBREW_LIB=\nPERLBREW_SKIP_INIT=1\nPERLBREW_PATH=/root/perl5/perlbrew/bin:/root/perl5/perlbrew/perls/perl-5.30.0/bin\nPERLBREW_ROOT=/root/perl5/perlbrew\nRemoving intermediate container 551369fc6a61\n ---&gt; b76db56bd82f\nStep 12/13 : RUN /root/perl5/perlbrew/bin/cpanm File::Find::Rule\n ---&gt; Running in 5574895c6069\n--&gt; Working on File::Find::Rule\nFetching http://www.cpan.org/authors/id/R/RC/RCLAMP/File-Find-Rule-0.34.tar.gz ... OK\nConfiguring File-Find-Rule-0.34 ... OK\n==&gt; Found dependencies: Test::More, Text::Glob, Number::Compare\n--&gt; Working on Test::More\nFetching http://www.cpan.org/authors/id/E/EX/EXODIST/Test-Simple-1.302167.tar.gz ... OK\nConfiguring Test-Simple-1.302167 ... OK\nBuilding and testing Test-Simple-1.302167 ... OK\nSuccessfully installed Test-Simple-1.302167\n--&gt; Working on Text::Glob\nFetching http://www.cpan.org/authors/id/R/RC/RCLAMP/Text-Glob-0.11.tar.gz ... OK\nConfiguring Text-Glob-0.11 ... OK\nBuilding and testing Text-Glob-0.11 ... OK\nSuccessfully installed Text-Glob-0.11\n--&gt; Working on Number::Compare\nFetching http://www.cpan.org/authors/id/R/RC/RCLAMP/Number-Compare-0.03.tar.gz ... OK\nConfiguring Number-Compare-0.03 ... OK\nBuilding and testing Number-Compare-0.03 ... OK\nSuccessfully installed Number-Compare-0.03\nBuilding and testing File-Find-Rule-0.34 ... OK\nSuccessfully installed File-Find-Rule-0.34\n4 distributions installed\nRemoving intermediate container 5574895c6069\n ---&gt; b7cbd8213dcc\nStep 13/13 : CMD /sbin/init\n ---&gt; Running in 3180df4e4deb\nRemoving intermediate container 3180df4e4deb\n ---&gt; b6ebc0ca82a5\nSuccessfully built b6ebc0ca82a5\n</code></pre>\n\n<p>I also tried to switch/use perl-5.28.2 on centos7/ubuntu and results the same.\nIt fails only on building stage and I can <code>perlbrew switch</code> successfully by attaching to the container after building.</p>\n\n<p>The direct cause of this seems to be the lack of <code>shell</code> environment variable in the sub shell forked in perlbrew swich/use.</p>\n\n<pre><code>Use of uninitialized value $shell in pattern match (m//) at /root/perl5/perlbrew/bin/perlbrew line 2445.\n</code></pre>\n\n<p>How can I solve the problem?</p>\n\n<p>My environment is</p>\n\n<pre><code>App::Perlbrew 0.86\nDocker version 19.03.1, build 74b1e89\n</code></pre>\n"}, {"tags": ["perl", "awk", "sed"], "comments": [{"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 1, "creation_date": 1566813617, "post_id": 57655449, "comment_id": 101761187, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45420535/whats-the-most-robust-way-to-efficiently-parse-csv-using-awk\">What&#39;s the most robust way to efficiently parse CSV using awk?</a>. The only difference is the field separator"}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1566814457, "post_id": 57655449, "comment_id": 101761536, "body": "This is not really a duplicate but closely related."}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 2, "creation_date": 1566820444, "post_id": 57655449, "comment_id": 101764354, "body": "If you have a different input, make a new question.  Make sure you google before post as well."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 1, "creation_date": 1566813495, "post_id": 57655488, "comment_id": 101761138, "body": "What if there is a field like <code>&quot;a~b~c&quot;</code>?"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 1, "creation_date": 1566813645, "post_id": 57655488, "comment_id": 101761197, "body": "@oguzismail, ok didn&#39;t consider it since it was NOT in OP&#39;s samples, let me fix it now."}, {"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 1, "creation_date": 1566813695, "post_id": 57655488, "comment_id": 101761217, "body": "I wouldn&#39;t fix it, this is clearly a duplicate. See my comment on the question. Upvoted since the logic is clever though"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 2, "creation_date": 1566814621, "post_id": 57655488, "comment_id": 101761627, "body": "<code>123~abc~~560000&quot;a~b~c&quot;</code> this should not be a valid input, since you only use double quote around field, not not within field, and since <code>~</code> is used as FS, <code>560000&quot;a~b~c&quot;</code> this part will break all. Correct should be <code>560000~&quot;a~b~c&quot;</code>"}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 2, "creation_date": 1566815230, "post_id": 57655488, "comment_id": 101761912, "body": "It think its better to test if field not starts with double quote <code>if($i!~&#47;^\\&quot;&#47;)</code>, not contains double quote. <code>if($i !~ s1)</code>"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 1, "creation_date": 1566815370, "post_id": 57655488, "comment_id": 101761977, "body": "@Jotne, sure, added it now, thanks for letting know."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566818796, "post_id": 57655488, "comment_id": 101763581, "body": "@RavinderSingh13 : It didn&#39;t work exactly for second and third line. It gave invalid result"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566819129, "post_id": 57655488, "comment_id": 101763730, "body": "@user1485267, please check now, edited the solution."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566819306, "post_id": 57655488, "comment_id": 101763815, "body": "Should i consider the first message or explanation message to test it."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "edited": false, "score": 0, "creation_date": 1566819313, "post_id": 57655488, "comment_id": 101763818, "body": "@Jotne, we should actually add condition for checking lines ending with <code>&quot;</code> too, which I added that condition  now."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566819350, "post_id": 57655488, "comment_id": 101763840, "body": "@user1485267, refresh my answer. Yes please anyone you could try it out, I have edited both of them."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566819659, "post_id": 57655488, "comment_id": 101763992, "body": "Thanks Ravinder, It works as expected. I have two questions based on the above solution. 1) If my OFS value is different. It replace all FS values with OFS value. But it should not happen for the data. 2) If encoding characters like japanese/chinese values comes in data it should not create a problem."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566819952, "post_id": 57655488, "comment_id": 101764134, "body": "It doesn&#39;t work if we have a new line character in data which is in quotes"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566820046, "post_id": 57655488, "comment_id": 101764177, "body": "@user1485267, for <code>OFS</code> output field separator you could set it in <code>BEGIN</code> section. For other language characters I haven&#39;t tested it you could test it once."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566820074, "post_id": 57655488, "comment_id": 101764190, "body": "@user1485267, You haven&#39;t mentioned new line samples, so this code is not written as per it."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566820202, "post_id": 57655488, "comment_id": 101764240, "body": "For OFS i have modified your code in below way, It doesn&#39;t work. awk &#39;BEGIN{s1=&quot;\\&quot;&quot;;FS=&quot;~&quot;;OFS=&quot;~&quot;} {for(i=1;i&lt;=NF;i++){if($i!~/^\\&quot;|\\&quot;$/){$i=s1 $i s1}}} 1&#39; Input_file"}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566820325, "post_id": 57655488, "comment_id": 101764301, "body": "@user1485267, in my code it is already <code>FS=OFS=&quot;~&quot;</code> not sure which modification you had done to it?"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566820420, "post_id": 57655488, "comment_id": 101764344, "body": "Sorry, copy paste issue.. I am trying to rewrite sample output to comma delimiter awk &#39;BEGIN{s1=&quot;\\&quot;&quot;;FS=&quot;~&quot;;OFS=&quot;,&quot;} {for(i=1;i&lt;=NF;i++){if($i!~/^\\&quot;|\\&quot;$/){$i=s1 $i s1}}} 1&#39; Input_file"}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566820453, "post_id": 57655488, "comment_id": 101764356, "body": "I have added my input for new line data.."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1567084429, "post_id": 57655488, "comment_id": 101864164, "body": "@ravinder : Can i know about this  if($i!~/^\\&quot;|\\&quot;$/) what it does.. the tilda which is present in if condition is it delimiter value ? If yes, in case if my delimiter value is semi-colon it fails"}], "tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 2, "last_activity_date": 1566819032, "last_edit_date": 1566819032, "creation_date": 1566812851, "answer_id": 57655488, "question_id": 57655449, "link": "https://stackoverflow.com/questions/57655449/insert-quotes-for-each-field-using-awk/57655488#57655488", "title": "insert quotes for each field using awk", "body": "<p>Could you please try following(tested with provided samples only).</p>\n\n<pre><code>awk 'BEGIN{s1=\"\\\"\";FS=OFS=\"~\"} {for(i=1;i&lt;=NF;i++){if($i!~/^\\\"|\\\"$/){$i=s1 $i s1}}} 1' Input_file\n</code></pre>\n\n<p>Output will be as follows.</p>\n\n<pre><code>\"eno\"~\"ename\"~\"address\"~\"zip\"\n\"123\"~\"abc\"~\"\"~\"560000\"\n\"245\"~\"abc ~ def\"~\"hyd\"~\"560102\"\n\"333\"~\"ghi~jkl\"~\"pub\"~\"560103\"\n</code></pre>\n\n<p><strong><em>Explanation:</em></strong> Adding explanation for above code now.</p>\n\n<pre><code>awk '                       ##Starting awk program here.\nBEGIN{                      ##Starting BEGIN section of awk program here.\n  s1=\"\\\"\"                   ##Setting variable s1 to \" here.\n  FS=OFS=\"~\"                ##Setting value of FS and OFS as ~ here.\n}                           ##Closing BEGIN block of awk code here.\n{\n  for(i=1;i&lt;=NF;i++){       ##Starting for loop here from i=1 to till value of NF here.\n    if($i!~/^\\\"|\\\"$/){      ##Checking condition of value of current field is NOT having s1 value in it.\n      $i=s1 $i s1           ##Adding s1 variable before and after the value of $i.\n    }                       ##Closing block for if condition.\n  }                         ##Closing block for for loop here.\n}                           ##Closing main block here.\n1                           ##Mentioning 1 will print the lines of Input_file.\n'  Input_file               ##mentioning Input_file name here.\n</code></pre>\n\n<hr>\n\n<hr>\n"}, {"comments": [{"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566819204, "post_id": 57655837, "comment_id": 101763765, "body": "It is not working as expected for the last two lines."}, {"owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 1, "creation_date": 1566820127, "post_id": 57655837, "comment_id": 101764214, "body": "@user1485267 You example did not show that.  I rarely see that  that occur, but if you have, you need a new post with a new question for a new solution."}, {"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "reply_to_user": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566820655, "post_id": 57655837, "comment_id": 101764457, "body": "@user1485267, I totally agree with Jotne here, please always post correct samples which are near to your actual data, when you keep changing your samples it will be hard for all of us to help you too."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566821742, "post_id": 57655837, "comment_id": 101764974, "body": "Sorry for changing inputs.. I agree with your point. I will add in new post. Thanks for your solutions Jotne &amp; Ravindre"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 1, "creation_date": 1566822056, "post_id": 57655837, "comment_id": 101765127, "body": "You don&#39;t need to create a new post, <a href=\"https://stackoverflow.com/q/45420535/1745001\">the one your question was closed as a dup of</a> shows you how to solve your problem whether your input contains newlines or not. Just do what it shows there to separate the input into fields and then <code>gsub(&#47;^&quot;|&quot;$&#47;,&quot;&quot;,$i); $i=&quot;\\&quot;&quot;$i&quot;\\&quot;&quot;</code> in a loop to wrap every field in double quotes before printing the record."}, {"owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "edited": false, "score": 0, "creation_date": 1566840071, "post_id": 57655837, "comment_id": 101773492, "body": "I didnt understood where should i add that statement i am new to awk exploring based on the scenarios.."}], "tags": [], "owner": {"reputation": 38004, "user_id": 2341847, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/1HdBS.png?s=128&g=1", "display_name": "Jotne", "link": "https://stackoverflow.com/users/2341847/jotne"}, "is_accepted": false, "score": 0, "last_activity_date": 1566814156, "creation_date": 1566814156, "answer_id": 57655837, "question_id": 57655449, "link": "https://stackoverflow.com/questions/57655449/insert-quotes-for-each-field-using-awk/57655837#57655837", "title": "insert quotes for each field using awk", "body": "<p>Here you can use <code>FPAT</code> with <code>gnu awk</code></p>\n\n<pre><code>awk -v FPAT='([^~]*)|(\"[^\"]+\")' -v OFS=\"~\" '{for (i=1;i&lt;=NF;i++) if ($i!~/^\\\"/) $i=\"\\\"\"$i\"\\\"\"} 1' file\n\"eno\"~\"ename\"~\"address\"~\"zip\"\n\"123\"~\"abc\"~\"\"~\"560000\"\n\"245\"~\"abc ~ def\"~\"hyd\"~\"560102\"\n\"333\"~\"ghi~jkl\"~\"pub\"~\"560103\"\n</code></pre>\n\n<p>Instead of telling how the Field Separator looks like, we tell how the filed looks like.  Then test if field not has double quote, if no, add it.</p>\n\n<p>You can then easy change the Field Separator if you like:</p>\n\n<pre><code>awk -v FPAT='([^~]*)|(\"[^\"]+\")' -v OFS=\",\" '{for (i=1;i&lt;=NF;i++) if ($i!~/^\\\"/) $i=\"\\\"\"$i\"\\\"\"} 1' file\n\"eno\",\"ename\",\"address\",\"zip\"\n\"123\",\"abc\",\"\",\"560000\"\n\"245\",\"abc ~ def\",\"hyd\",\"560102\"\n\"333\",\"ghi~jkl\",\"pub\",\"560103\"\n</code></pre>\n"}], "owner": {"reputation": 1139, "user_id": 1485267, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8d2c4c986a7a1d64ddf42b4059d7b9a?s=128&d=identicon&r=PG", "display_name": "user1485267", "link": "https://stackoverflow.com/users/1485267/user1485267"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "closed_date": 1566820157, "answer_count": 2, "score": 0, "last_activity_date": 1566820405, "creation_date": 1566812684, "last_edit_date": 1566820405, "question_id": 57655449, "link": "https://stackoverflow.com/questions/57655449/insert-quotes-for-each-field-using-awk", "closed_reason": "Duplicate", "title": "insert quotes for each field using awk", "body": "<p>I am looking for below input based on the sample provided below</p>\n\n<p><strong>Sample :</strong></p>\n\n<pre><code>eno~ename~address~zip\n123~abc~~560000~\"a~b~c\"\n245~\"abc ~ def\"~hyd~560102\n333~\"ghi~jkl\"~pub~560103\n</code></pre>\n\n<p><strong>Expected output :</strong></p>\n\n<pre><code>\"eno\"~\"ename\"~\"address\"~\"zip\"\n\"123\"~\"abc\"~\"\"~\"560000\"~\"a~b~c\"\n\"245\"~\"abc ~ def\"~\"hyd\"~\"560102\"\n\"333\"~\"ghi~jkl\"~\"pub\"~\"560103\"\n</code></pre>\n\n<p>command which i tried in awk it doesn't work if the delimiter value contains in data. If there are any alternate suggestions with perl/sed/awk suggest.</p>\n\n<p>Below is the command : awk '{for (i=1;i&lt;=NF;i++) $i=\"\\\"\"$i\"\\\"\"}1' FS=\"~\" OFS=\"~\" sample</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 4627, "user_id": 608170, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Rwz4m.jpg?s=128&g=1", "display_name": "verisimilitude", "link": "https://stackoverflow.com/users/608170/verisimilitude"}, "edited": false, "score": 1, "creation_date": 1566796909, "post_id": 57652094, "comment_id": 101754387, "body": "Observing the docs of <code>BigInt</code> <a href=\"https://perldoc.perl.org/5.8.8/Math/BigInt.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/5.8.8/Math/BigInt.html</a>, it seems <code>brsft</code> returns a single integer shifted 8 places in your case. Your call     <code>($q,$r) = $bigint-&gt;brsft(8);</code> is expecting two."}, {"owner": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "reply_to_user": {"reputation": 4627, "user_id": 608170, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Rwz4m.jpg?s=128&g=1", "display_name": "verisimilitude", "link": "https://stackoverflow.com/users/608170/verisimilitude"}, "edited": false, "score": 1, "creation_date": 1566797072, "post_id": 57652094, "comment_id": 101754442, "body": "@verisimilitude, yes you are right. Thanks"}, {"owner": {"reputation": 4627, "user_id": 608170, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Rwz4m.jpg?s=128&g=1", "display_name": "verisimilitude", "link": "https://stackoverflow.com/users/608170/verisimilitude"}, "edited": false, "score": 0, "creation_date": 1566797502, "post_id": 57652094, "comment_id": 101754550, "body": "That link you shared has several interesting solutions, may be you can pick on of those - depending on how optimized you want your solution to be.."}, {"owner": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "reply_to_user": {"reputation": 4627, "user_id": 608170, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Rwz4m.jpg?s=128&g=1", "display_name": "verisimilitude", "link": "https://stackoverflow.com/users/608170/verisimilitude"}, "edited": false, "score": 0, "creation_date": 1566797713, "post_id": 57652094, "comment_id": 101754611, "body": "@verisimilitude I have picked the solution from the same link, however, due to not any experience in perl getting stuck."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1566802963, "post_id": 57652094, "comment_id": 101756320, "body": "As mentioned by Athanasius <a href=\"https://www.perlmonks.org/?node_id=11105037\" rel=\"nofollow noreferrer\">on PerlMonks</a>, <code>Math::BigInt</code> has a <code>to_bytes</code> method, which is available as of version 1.999807 (distributed with Perl 5.28), but if you&#39;re on an older version, you should be able to upgrade from CPAN."}], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "edited": false, "score": 0, "creation_date": 1566885081, "post_id": 57653474, "comment_id": 101784679, "body": "Thanks I need to do this on AWS RDS Postgre using <code>plperl</code> function. I think &#39;pack&#39; and &#39;unpack&#39; are not supported on RDS as I am getting <code>ERROR:  &#39;unpack&#39; trapped by operation mask at line 8</code>. Is there any alternate way?"}, {"owner": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "edited": false, "score": 0, "creation_date": 1566896110, "post_id": 57653474, "comment_id": 101789394, "body": "@ikegnami Thanks, for help, however, none of these workings on RDS as many functions are not available. Now I am getting <code>ERROR:  Can&#39;t call method &quot;as_hex&quot; without a package or object reference</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "edited": false, "score": 0, "creation_date": 1566896204, "post_id": 57653474, "comment_id": 101789451, "body": "That means <code>$bigint</code> isn&#39;t a Math::BigInt object."}, {"owner": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "edited": false, "score": 0, "creation_date": 1566896647, "post_id": 57653474, "comment_id": 101789703, "body": "@ikegnami yes, it is <code>numeric</code> data type of postgres for handling large numbers. Your answer is absolutely correct according to the question. However, now I am trying to use this function in <code>plperl</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "edited": false, "score": 0, "creation_date": 1566896724, "post_id": 57653474, "comment_id": 101789749, "body": "The question asked to convert a Math::BigInt"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1566885857, "last_edit_date": 1566885857, "creation_date": 1566804402, "answer_id": 57653474, "question_id": 57652094, "link": "https://stackoverflow.com/questions/57652094/how-to-convert-bigint-to-byte-array-in-perl-similar-as-java/57653474#57653474", "title": "How to convert bigint to byte array in perl similar as java", "body": "<p>This doesn't support negative numbers.</p>\n\n<pre><code>sub bigint_to_bytearray {\n   my $bigint = shift;\n   die \"Negative numbers not supported\" if $bigint-&gt;is_neg;\n\n   my @bytes = unpack('c*', $bigint-&gt;to_bytes);\n   unshift @bytes, 0x00 if $bytes[0] &lt; 0;  # Add sign bit if necessary.\n   return @bytes;\n}\n</code></pre>\n\n<p>The above requires a relatively new version of Math::BigInt. The following is less efficient, but it works on far older versions:</p>\n\n<pre><code>sub bigint_to_bytearray {\n   my $bigint = shift;\n   die \"Negative numbers not supported\" if $bigint-&gt;is_neg;\n\n   my @bytes = unpack('c*', pack('H*', substr($bigint-&gt;as_hex, 2)));\n   unshift @bytes, 0x00 if $bytes[0] &lt; 0;  # Add sign bit if necessary.\n   return @bytes;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>my @bytes = unpack('c*', $bigint-&gt;to_bytes);\n</code></pre>\n\n<p>can be replaced with</p>\n\n<pre><code>my @bytes =\n   map { $_ &gt;= 0x80 ? 0x100 - $_ : $_ }\n      map ord,\n         split //,\n            $bigint-&gt;to_bytes;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>my @bytes = unpack('c*', pack('H*', substr($bigint-&gt;as_hex, 2)));\n</code></pre>\n\n<p>can be replaced with</p>\n\n<pre><code>my $hex = substr($bigint-&gt;as_hex, 2);\n$hex = \"0$hex\" if length($hex) % 2;\nmy @bytes =\n   map { $_ &gt;= 0x80 ? 0x100 - $_ : $_ }\n      map hex,\n         $hex =~ /../g;\n</code></pre>\n"}], "owner": {"reputation": 1958, "user_id": 2598316, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/45e931915fb51fb01b471333779d8b3b?s=128&d=identicon&r=PG", "display_name": "Tajinder", "link": "https://stackoverflow.com/users/2598316/tajinder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 57653474, "answer_count": 1, "score": 1, "last_activity_date": 1566885857, "creation_date": 1566796443, "question_id": 57652094, "link": "https://stackoverflow.com/questions/57652094/how-to-convert-bigint-to-byte-array-in-perl-similar-as-java", "title": "How to convert bigint to byte array in perl similar as java", "body": "<p>I am trying to replicate some java code in perl.</p>\n\n<p>The operation, I need to perform is to convert Java BigInteger to byte array</p>\n\n<p><strong>Java Code:</strong></p>\n\n<pre><code>public class Main {\n    public static void main(String[] args) {\n         BigInteger n = new BigInteger(\"1677259342285725925376\");\n         System.out.println(Arrays.toString(n.toByteArray()));\n    }\n\n}\n</code></pre>\n\n<p>Output: <code>[90, -20, -90, 53, 78, -38, 2, -128, 0]</code></p>\n\n<p>As, new in perl, tried to search and got help from <a href=\"https://www.perlmonks.org/?node_id=229290\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=229290</a></p>\n\n<p><strong>Perl Code:</strong></p>\n\n<pre><code>sub bigint_to_bytearray {\n  my $bigint = shift;\n  my @bytes;\n  while(1) {\n    my ($q,$r) = $bigint-&gt;brsft(8);\n    push(@bytes,$r+0);\n    last if $q == 0;\n    $bigint = Math::BigInt-&gt;new($q);\n  }\n  return @bytes;\n}\n\n$n = new Math::BigInt('1677259342285725925376');\nmy @array  = bigint_to_bytearray($n);\nprint \"\\\\tOUTPUT ARRAY  = \", join ', ', @array, \"\\n\";\n</code></pre>\n\n<p>I am getting error</p>\n\n<pre><code>Use of uninitialized value $r in addition (+) at path/test.pl line 11.\nUse of uninitialized value $r in addition (+) at path/test.pl line 11.\nUse of uninitialized value $r in addition (+) at path/test.pl line 11.\nUse of uninitialized value $r in addition (+) at path/test.pl line 11.\nUse of uninitialized value $r in addition (+) at path/test.pl line 11.\nUse of uninitialized value $r in addition (+) at path/test.pl line 11.\nUse of uninitialized value $r in addition (+) at path/test.pl line 11.\nUse of uninitialized value $r in addition (+) at path/test.pl line 11.\n</code></pre>\n"}, {"tags": ["mysql", "perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1566799436, "post_id": 57651938, "comment_id": 101755133, "body": "Yes, there is a way."}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1566799984, "post_id": 57651938, "comment_id": 101755312, "body": "@ssr1012 sorry my bad  i edit back the post"}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1566800000, "post_id": 57651938, "comment_id": 101755316, "body": "@\u0421\u0443\u0445\u043e\u043927 if so how ?"}, {"owner": {"reputation": 458675, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 1, "creation_date": 1566801165, "post_id": 57651938, "comment_id": 101755671, "body": "In fact you&#39;re doing it the <i>slowest</i> way possible, opening a new database connection for every single row you insert. You might like my presentation <a href=\"https://www.slideshare.net/billkarwin/load-data-fast\" rel=\"nofollow noreferrer\">Load Data Fast!</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566804477, "post_id": 57652851, "comment_id": 101756904, "body": "is it wierd to not have disconnect and commit in the script ? because when i have those thing it gives me an error of segemntation fault (core dump) but when i remove it ... it works fine"}, {"owner": {"reputation": 195828, "user_id": 112968, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=128&g=1", "display_name": "knittl", "link": "https://stackoverflow.com/users/112968/knittl"}, "reply_to_user": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566804763, "post_id": 57652851, "comment_id": 101757009, "body": "You should still be able to handle multiple transactions within a single connection. Depending on your requirements, it might be enough to commit only once after all the datae has been inserted"}, {"owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566805141, "post_id": 57652851, "comment_id": 101757155, "body": "but the problem is that even without the commit and disconnect  statement it works fine"}, {"owner": {"reputation": 195828, "user_id": 112968, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=128&g=1", "display_name": "knittl", "link": "https://stackoverflow.com/users/112968/knittl"}, "reply_to_user": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566805592, "post_id": 57652851, "comment_id": 101757337, "body": "Once your program terminates, any open resource (such as database connections, file handles) will be closed automatically. I assume without any errors, any open transaction will auto-commit."}, {"owner": {"reputation": 195828, "user_id": 112968, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=128&g=1", "display_name": "knittl", "link": "https://stackoverflow.com/users/112968/knittl"}, "reply_to_user": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "edited": false, "score": 0, "creation_date": 1566816998, "post_id": 57652851, "comment_id": 101762715, "body": "@MiteMiteKyle It might also be, that the connection automatically creates a single transaction which can only be committed once. Consecutive <code>commit</code> probably create errors (or segfaults? Seems but bit weird, but well) If you want multiple transaction, you would have to create them manually (reusing the existing connection)."}, {"owner": {"reputation": 1702, "user_id": 880797, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/bace3dcc4a83523d93399ab2bd1f3728?s=128&d=identicon&r=PG", "display_name": "Andrey", "link": "https://stackoverflow.com/users/880797/andrey"}, "edited": false, "score": 0, "creation_date": 1566837163, "post_id": 57652851, "comment_id": 101772395, "body": "If you do not set AutoCommit to 0 (false), it is set to true by default. Hence, your insterts are commited automatically. That is why your code works without $dbh-&gt;commit();"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1566904027, "post_id": 57652851, "comment_id": 101793608, "body": "Another slight way to optimize is to put all insertions into a single <code>INSERT</code> statement, but that probably isn&#39;t worth it."}], "tags": [], "owner": {"reputation": 195828, "user_id": 112968, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zHTaT.png?s=128&g=1", "display_name": "knittl", "link": "https://stackoverflow.com/users/112968/knittl"}, "is_accepted": true, "score": 6, "last_activity_date": 1566801307, "creation_date": 1566801307, "answer_id": 57652851, "question_id": 57651938, "link": "https://stackoverflow.com/questions/57651938/how-to-optimize-this-script-performing-inserts-into-a-database/57652851#57652851", "title": "How to optimize this script performing INSERTS into a database?", "body": "<p>You are connecting to the database for every file that you want to insert (if I read your code correctly, there seems to be a closing curly brace missing, it won't actually compile). Opening new database connections is (comparably) slow.</p>\n\n<p>Open the connection once, before inserting the first file and re-use it for subsequent inserts into the database. Close the connection after your last file was inserted into the database. This should give you a noticable speed up.</p>\n\n<p>(Depending on the amount of data, 9 seconds might actually not be too bad; but since there is no information on that, it's hard to say).</p>\n"}], "owner": {"reputation": 5, "user_id": 11930007, "user_type": "registered", "profile_image": "https://graph.facebook.com/2303085156476923/picture?type=large", "display_name": "Mite Mite Kyle", "link": "https://stackoverflow.com/users/11930007/mite-mite-kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 1, "accepted_answer_id": 57652851, "answer_count": 1, "score": 0, "last_activity_date": 1566904093, "creation_date": 1566795201, "last_edit_date": 1566904093, "question_id": 57651938, "link": "https://stackoverflow.com/questions/57651938/how-to-optimize-this-script-performing-inserts-into-a-database", "title": "How to optimize this script performing INSERTS into a database?", "body": "<p>So i already complete a script that will insert data into mysql table and move those file into a directory until all files are none. There around 51 files and it took around 9 sec to complete the execution. So my question is . is there a better way to speed up the execution process?  </p>\n\n<p>the codes are </p>\n\n<pre><code>our $DIR=\"/home/aimanhalim/LOG\";\nour $FILENAME_REGEX = \"server_performance_\";\n# mariaDB config hash\nour %db_config = ( \"username\"=&gt;\"root\", \"password\"=&gt; \"\", \"db\"=&gt;\"Top_Data\", \"ip\" =&gt; \"127.0.0.1\", \"port\" =&gt; \"3306\");\nmain();\n\nexit;\n\n\nsub main()\n{\n    my $start = time();\n   print \"Searching file $FILENAME_REGEX in $DIR...\\n\";\n   opendir (my $dr , $DIR) or die \"&lt;ERROR&gt; Cannot open dir: $DIR \\n\";\n   while( my $file = readdir $dr )\n   {\n      print \"file in $DIR: [$file]\\n\";\n      next if (($file eq \".\") || ($file eq \"..\") || ($file eq \"DONE\"));   \n\n\n\n      #Opening The File in the directory\n      open(my $file_hndlr, \"&lt;$DIR/$file\");\n\n      #Making Variables.\n      my $line_count = 0;\n      my %data = ();\n      my $dataRef = \\%data;\n      my $move = \"$DIR/$file\";\n      print \"$file\\n\";\n      while (&lt;$file_hndlr&gt;) \n      { \n         my $line = $_;  \n         chomp($line);\n         print \"line[$line_count] - [$line]\\n\";\n         if($line_count == 0)\n         {\n            # get load average from line 0\n            ($dataRef) = get_load_average($line,$dataRef);\n\n            print Dumper($dataRef);\n\n         }\n         elsif ($line_count == 2)\n         {\n\n          ($dataRef) = get_Cpu($line,$dataRef);\n          print Dumper($dataRef);\n\n         }\n\n$line_count++;\n      }\n\n      #insert db\n      my ($result) = insert_record($dataRef,\\%db_config,$file);\n      my $Done_File=\"/home/aimanhalim/LOG/DONE\";\n\n\nsub insert_record(){\n\n my($data,$db_config,$file)=@_;\n my $result = -1; # -1 fail;  0 - succ\n\n  # connect to db\n  # connect to MySQL database\n  my $dsn = \"DBI:mysql:database=\".$db_config-&gt;{'db'}.\";host=\".$db_config-&gt;{'ip'}.\";port=\".$db_config-&gt;{'port'};\nmy $username = $db_config-&gt;{'username'};\nmy $password = $db_config-&gt;{'password'};\n\nmy %attr = (PrintError=&gt;0,RaiseError=&gt;1 );\nmy $dbh = DBI-&gt;connect($dsn,$username,$password,\\%attr) or die $DBI::errstr;\n\nprint \"We Have Successfully Connected To The Database \\n\";\n\n  $stmt-&gt;execute(@param_bind);\n  ****this line is insert data statement***\n  $stmt-&gt;finish();\n    print \"The Data Has Been Inserted Successfully\\n\";\n  $result = 0;\n  return($result);\n\n  # commit\n  $dbh-&gt;commit();\n  # return succ / if fail rollback and return fail\n  $dbh-&gt;disconnect();\n\n}\nexit;\n</code></pre>\n\n<p>editted </p>\n\n<p>so pretty much this is my code with some sniping here and there. </p>\n\n<p>i tried to put the 'insert_record' below the comment #insert db but i dont think that do anything :U</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "edited": false, "score": 5, "creation_date": 1566798089, "post_id": 57651895, "comment_id": 101754714, "body": "Someone put this on hold.  It&#39;s a question of fact, which was answered.  What is the &quot;opinion&quot; in question?"}, {"owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "edited": false, "score": 5, "creation_date": 1566798133, "post_id": 57651895, "comment_id": 101754738, "body": "There&#39;s obviously no opinions involved in this question. What gives?"}], "answers": [{"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 9, "last_activity_date": 1566797052, "creation_date": 1566797052, "answer_id": 57652174, "question_id": 57651895, "link": "https://stackoverflow.com/questions/57651895/when-was-the-p-option-removed-from-perl/57652174#57652174", "title": "When was the -P option removed from perl?", "body": "<p>The <code>-P</code> option was <a href=\"https://metacpan.org/pod/perl5100delta#Use-of-P-is-deprecated\" rel=\"noreferrer\">deprecated in perl 5.10.0</a> (December 2007) and <a href=\"https://metacpan.org/pod/distribution/perl/pod/perl5120delta.pod#Other-potentially-incompatible-changes\" rel=\"noreferrer\">removed in perl 5.12.0</a> (April 2010).</p>\n"}, {"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 4, "last_activity_date": 1566833888, "creation_date": 1566833888, "answer_id": 57660975, "question_id": 57651895, "link": "https://stackoverflow.com/questions/57651895/when-was-the-p-option-removed-from-perl/57660975#57660975", "title": "When was the -P option removed from perl?", "body": "<p>I often wonder about these questions when I'm writing about some Perl feature. Since I have most Perls installed, I can look at the right files from each version to discover when it disappears. Command-line switches show up in <a href=\"https://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a>, so I can look back at the each perlrun until I find where the switch disappears.</p>\n\n<p>I don't need to have all those Perls installed though. The <a href=\"https://github.com/Perl/perl5\" rel=\"nofollow noreferrer\">Perl source</a> is in GitHub, so you can look at the history of the perlrun file to find the change (and <a href=\"https://github.com/Perl/perl5/commit/4c84d7f2a03f1d29578b3894e1b6863673b307fb#diff-aeeb32f8642bab9eafbc8cbd70157b04\" rel=\"nofollow noreferrer\">here it is where you might start: \"Remove the -P switch\" - 4c84d7</a>).</p>\n\n<p>The <a href=\"https://perldoc.perl.org/perldelta.html\" rel=\"nofollow noreferrer\">perldelta</a> page also lists the changes for that version (and older versions' <em>perldelta</em> get moved to a versioned form, such as <a href=\"https://perldoc.perl.org/perl5100delta.html\" rel=\"nofollow noreferrer\">perl5100delta</a>). That's a bit more tedious to go through, especially since you can't bisect it.</p>\n\n<p>Beyond that, Perl 5 Porters will deprecate a feature for two major versions (such as v5.28 and v5.30) before it's actually removed. Back in v5.10 <a href=\"https://perldoc.perl.org/perlpolicy.html\" rel=\"nofollow noreferrer\">the policy</a> wasn't quite there yet, so that removal was a bit fast.</p>\n\n<p>The curious thing now is that many things were deprecated in v5.000, and Perl 5 Porters are now removing those long-deprecated features. </p>\n"}], "owner": {"reputation": 914, "user_id": 4114394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100006056441825/picture?type=large", "display_name": "Erik Bennett", "link": "https://stackoverflow.com/users/4114394/erik-bennett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 57652174, "answer_count": 2, "score": 7, "last_activity_date": 1567034688, "creation_date": 1566794817, "last_edit_date": 1567034688, "question_id": 57651895, "link": "https://stackoverflow.com/questions/57651895/when-was-the-p-option-removed-from-perl", "title": "When was the -P option removed from perl?", "body": "<p>When was the <code>-P</code> option removed from perl?</p>\n\n<blockquote>\n  <p>-P\n      causes your script to be run through the C preprocessor before compilation by Perl. (Because both comments and cpp directives begin\n  with the # character, you should avoid starting comments with any\n  words recognized by the C preprocessor such as <code>if</code>, <code>else</code>, or\n  <code>define</code>.)</p>\n</blockquote>\n\n<p>I was just curious about when it was removed.</p>\n"}, {"tags": ["perl", "vim", "filter", "latex"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10667280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3245675b99d99edf720f052f0d6a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Stepanek", "link": "https://stackoverflow.com/users/10667280/marek-stepanek"}, "edited": false, "score": 0, "creation_date": 1566738318, "post_id": 57645525, "comment_id": 101743500, "body": "Thank you Matt! That means I would have to enter <code>:!~&#47;.vim&#47;filter&#47;perl-filter.pl</code> ? Perhaps put a short cut or alias to this filter folder in .vimrc ? Any ideas?"}, {"owner": {"reputation": 45, "user_id": 10667280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3245675b99d99edf720f052f0d6a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Stepanek", "link": "https://stackoverflow.com/users/10667280/marek-stepanek"}, "edited": false, "score": 0, "creation_date": 1566738619, "post_id": 57645525, "comment_id": 101743563, "body": "Once again: this is a useful hint: <code>:help rtp</code> Thanks again!"}], "tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1566742336, "last_edit_date": 1566742336, "creation_date": 1566731897, "answer_id": 57645525, "question_id": 57645348, "link": "https://stackoverflow.com/questions/57645348/is-there-a-good-place-in-vim-folder-to-store-text-filters/57645525#57645525", "title": "Is there a good place in .vim folder to store text filters?", "body": "<p>You can safely create a subfolder with any name different from ones Vim uses itself (see <code>:h 'rtp'</code>). So this is ok:</p>\n\n<pre><code>:*!$HOME/.vim/filters/perl_filter.pl\n</code></pre>\n\n<p>Also Vim has a predefined interface for a general purpose filter called 'equalprg'. To make use of it simply set a global-local (i.e. both <code>set</code> and <code>setlocal</code> are meaningful) option <code>equalprg</code> to a fully qualified name of your script. Then hit <code>=</code> in visual mode to apply filter (or <code>={motion}</code> in normal mode). (Read <code>:h 'equalprg'</code> <code>:h =</code>).</p>\n\n<p>If you need several filters at once, and switching <code>equalprg</code> is not convenient, you can still try different options to reduce typing.</p>\n\n<p>For example, mappings, such as</p>\n\n<pre><code>vnoremap &lt;Leader&gt;f :!/path/to/my/filter&lt;CR&gt;\n</code></pre>\n\n<p>Then hitting <code>\\f</code> (or whatever is your \"leader\" key set) in the visual mode will result in the executing <code>:'&lt;,'&gt;!/path/to/my/filter</code> (note that the visual selection will be applied automatically).</p>\n\n<p>Another attempt is to set a dedicated environment variable (which will be inherited by all child processes including shell(s). For example,</p>\n\n<pre><code>:let $filters = '~/.vim/filters'\n:*!$filters/myfilter.pl\n</code></pre>\n\n<p>Of course, you can put those <code>set equalprg=...</code> <code>vnoremap ...</code> <code>let $filters=...</code> etc.etc. in your vimrc.</p>\n"}, {"tags": [], "owner": {"reputation": 6920, "user_id": 9447571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61737e0b179eb5d8e6078b6e72ccb776?s=128&d=identicon&r=PG", "display_name": "filbranden", "link": "https://stackoverflow.com/users/9447571/filbranden"}, "is_accepted": false, "score": 2, "last_activity_date": 1566742326, "creation_date": 1566742326, "answer_id": 57646791, "question_id": 57645348, "link": "https://stackoverflow.com/questions/57645348/is-there-a-good-place-in-vim-folder-to-store-text-filters/57646791#57646791", "title": "Is there a good place in .vim folder to store text filters?", "body": "<blockquote>\n  <p>I would like to create a filter folder, best inside <code>.vim</code> and be able to run a text filter just with one file name <code>:! filter.pl</code></p>\n</blockquote>\n\n<p>Simply add the script to somewhere within your <code>$PATH</code>. Or, if you really only intend to use that from within Vim, then add that directory to your <code>$PATH</code> in your <code>.vimrc</code>, so you have it available there.</p>\n\n<p>For example, if you'd like to use <code>~/.vim/scripts</code> for your external Perl or shell scripts, you can use this in your <code>~/.vimrc</code>:</p>\n\n<pre><code>call setenv('PATH', expand('~/.vim/scripts').':'.$PATH)\n</code></pre>\n\n<p>After that, you can simply use <code>:'&lt;,'&gt; !filter.pl</code> to run it. And Tab completion will work with the name of the script, type <code>:!fil&lt;Tab&gt;</code> and Vim will complete it to <code>filter.pl</code>, assuming it's a unique prefix.</p>\n\n<p>The snippet above for your <code>.vimrc</code> has one minor issue, that if you <code>:source</code> your <code>.vimrc</code> during Vim runtime, it will keep adding the entry to <code>$PATH</code> multiple times. That doesn't typically break anything, only the entry will become longer, you might run into variable length issues.</p>\n\n<p>You can fix it by checking whether that's present in path or not before updating it, perhaps with something like:</p>\n\n<pre><code>let scripts_dir = expand('~/.vim/scripts')\nif index(split($PATH, ':'), scripts_dir) &lt; 0\n    call setenv('PATH', scripts_dir.':'.$PATH)\nendif\n</code></pre>\n\n<hr>\n\n<p>But also, about this:</p>\n\n<blockquote>\n  <p>I put up a Perl text filter to change all special Characters in a LaTeX Math Formula</p>\n\n<pre><code>s/\\\\/\\\\backslash /g;\ns/([\\$\\#&amp;%_{}])/\\\\$1/g;\n</code></pre>\n</blockquote>\n\n<p>Consider writing that in Vim instead.</p>\n\n<p>In fact, almost the same syntax will work as a Vim function:</p>\n\n<pre><code>function! EscapeLatexMathFormula()\n    s/\\\\/\\\\backslash /eg\n    s/\\([$#&amp;%_{}]\\)/\\\\\\1/eg\nendfunction\n</code></pre>\n\n<p>You can call it on a range, with:</p>\n\n<pre><code>:'&lt;,'&gt;call EscapeLatexMathFormula()\n</code></pre>\n\n<p>Calling it without a range will affect the current line only.</p>\n\n<p>You can also make it into a command, with:</p>\n\n<pre><code>command! -range EscapeLatexMathFormula &lt;line1&gt;,&lt;line2&gt; call EscapeLatexMathFormula()\n</code></pre>\n\n<p>In which case you can simply use:</p>\n\n<pre><code>:'&lt;,'&gt;EscapeLatexMathFormula\n</code></pre>\n\n<p>You can use tab-completion for the function and command names (though, of course, you can pick shorter names if you'd like, as well.)</p>\n\n<p>Note that user-defined command names need to start with an uppercase letter. Function names can start with an uppercase letter too (there are more options for function names, but making this global with an uppercase is probably the easiest here.)</p>\n"}], "owner": {"reputation": 45, "user_id": 10667280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3245675b99d99edf720f052f0d6a78?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Stepanek", "link": "https://stackoverflow.com/users/10667280/marek-stepanek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 57645525, "answer_count": 2, "score": 2, "last_activity_date": 1566742336, "creation_date": 1566730186, "question_id": 57645348, "link": "https://stackoverflow.com/questions/57645348/is-there-a-good-place-in-vim-folder-to-store-text-filters", "title": "Is there a good place in .vim folder to store text filters?", "body": "<p>I would like to create a filter folder, best inside .vim and be able to run a text filter just with one file name:! filter.pl</p>\n\n<p>I put up a Perl text filter to change all special Characters in a LaTeX Math Formula, which is running fine so far - only problem it is running on the whole line not the selected formula, but I can live with it ...</p>\n\n<pre><code>#!/usr/bin/perl -np\n\nuse strict;\nuse warnings;\n\n# this filter transforms all special characters in Mathformular for LaTeX\n\ns/\\\\/\\\\backslash /g;\ns/([\\$\\#&amp;%_{}])/\\\\$1/g;\n</code></pre>\n\n<p>But to call this filter is cumbersome </p>\n\n<pre><code>: '&lt;,'&gt;!\"/Users/username/Library/Mobile Documents/com~apple~CloudDocs/my_vim_cheat_sheet/perl_filter.pl\" \n</code></pre>\n\n<p>Apple put in the path to the iCloud a white space, so I have to put \"\" around! Where I put a collection of text filters? </p>\n\n<p>Thank you for your answers</p>\n\n<p>marek</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566728163, "post_id": 57645034, "comment_id": 101741412, "body": "@H&#229;konH&#230;gland I&#39;m not sure I understand what you mean. I mentioned &quot;I have multiple variables&quot;. That was just an example of how the format is. For each of the variables having a string of that format, I would like to take the second portion of the string."}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566728295, "post_id": 57645134, "comment_id": 101741440, "body": "I&#39;m not looking for how to re-order the string. I just edited my question to explain further since."}], "tags": [], "owner": {"reputation": 590, "user_id": 10637327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UhloK.jpg?s=128&g=1", "display_name": "M__", "link": "https://stackoverflow.com/users/10637327/m"}, "is_accepted": false, "score": 0, "last_activity_date": 1566727972, "creation_date": 1566727972, "answer_id": 57645134, "question_id": 57645034, "link": "https://stackoverflow.com/questions/57645034/regular-expression-matching-perl-for-first-case-of-pattern/57645134#57645134", "title": "Regular Expression Matching Perl for first case of pattern", "body": "<p>You use brackets to capature then reorder the string, the first set of brackets () is $1 in the next part of the substitution, etc ... </p>\n\n<pre><code>my $string = \"some_text_here__what__i__want_here\";\n(my $newstring = $string) =~ s/(some_text_here)(__)(what__i__want_here)/$3$2$1/;\nprint $newstring;\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>what__i__want_here__some_text_here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566846704, "post_id": 57645197, "comment_id": 101776055, "body": "This does replace matches after double underscore, but for all of them. I just want it to replace matches after the FIRST appearance of a double underscore."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": 1, "last_activity_date": 1566729867, "last_edit_date": 1566729867, "creation_date": 1566728574, "answer_id": 57645197, "question_id": 57645034, "link": "https://stackoverflow.com/questions/57645034/regular-expression-matching-perl-for-first-case-of-pattern/57645197#57645197", "title": "Regular Expression Matching Perl for first case of pattern", "body": "<pre><code>my $text = 'some_text_here__what__i__want_here';\n# .*?     # Match a minimal number of characters - see \"man perlre\"\n# /s      # Make . match also newline - see \"man perlre\"\nmy ($var) =  $text =~ /^.*?__(.*)$/s;\n# $var is not defined when there is no __ in the string\nprint \"var=${var}\\n\" if defined($var);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": false, "score": 1, "last_activity_date": 1566837437, "creation_date": 1566837437, "answer_id": 57661778, "question_id": 57645034, "link": "https://stackoverflow.com/questions/57645034/regular-expression-matching-perl-for-first-case-of-pattern/57661778#57661778", "title": "Regular Expression Matching Perl for first case of pattern", "body": "<p>You might consider this an example of where <code>split</code>'s third parameter is useful. The third parameter to <code>split</code> constrains how many elements to return.  Here is an example:</p>\n\n<pre><code>my @examples = (\n    'some_text_here__what__i_want_here',\n    '__keep_this__part',\n    'nothing_found_here',\n    'nothing_after__',\n);\n\nforeach my $string (@examples) {\n    my $want = (split /__/, $string, 2)[1];\n    print \"$string =&gt; \", (defined $want ? $want : ''), \"\\n\";\n}\n</code></pre>\n\n<p>The output will look like this:</p>\n\n<pre><code>some_text_here__what__i_want_here =&gt; what__i_want_here\n__keep_this__part =&gt; keep_this__part\nnothing_found_here =&gt;\nnothing_after__ =&gt;\n</code></pre>\n\n<p>This line is a little dense:</p>\n\n<pre><code>my $want = (split /__/, $string, 2)[1];\n</code></pre>\n\n<p>Let's break that down:</p>\n\n<pre><code>my ($prefix, $want) = split /__/, $string, 2;\n</code></pre>\n\n<p>The <code>2</code> parameter tells <code>split</code> that no matter how many times the pattern <code>/__/</code> could match, we only want to split one time, the first time it's found.  So as another example:</p>\n\n<pre><code>my (@parts) = split /#/, \"foo#bar#baz#buzz\", 3;\n</code></pre>\n\n<p>The <code>@parts</code> array will receive these elements: 'foo', 'bar', 'baz#buzz', because we told it to stop splitting after the second split, so that we get a total maximum of three elements in our result.</p>\n\n<p>Back to your case, we set 2 as the maximum number of elements.  We then go one step further by eliminating the need for <code>my ($throwaway, $want) = ...</code>. We can tell Perl we only care about the second element in the list of things returned by <code>split</code>, by providing an index.</p>\n\n<pre><code>my $want = ('a', 'b', 'c', 'd')[2]; # c, the element at offset 2 in the list.\n\nmy $want = (split /__/, $string, 2)[1]; # The element at offset 1 in the list\n                                        # of two elements returned by split.\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1566846970, "creation_date": 1566727142, "last_edit_date": 1566846970, "question_id": 57645034, "link": "https://stackoverflow.com/questions/57645034/regular-expression-matching-perl-for-first-case-of-pattern", "title": "Regular Expression Matching Perl for first case of pattern", "body": "<p>I have multiple variables that have strings in the following format:</p>\n\n<p><code>some_text_here__what__i__want_here__andthen_some</code>\u00a0<br></p>\n\n<p>I want to be able to assign to a variable the <code>what__i__want_here</code> portion of the first variable. In other words, everything after the FIRST double underscore. There may be double underscores in the rest of the string but I only want to take the text after the FIRST pair of underscores. </p>\n\n<p>Ex.</p>\n\n<p>If I have <code>$var = \"some_text_here__what__i__want_here__andthen_some\"</code>, I would like to assign to a new variable only the second part like <code>$var2 = \"what__i__want_here__andthen_some\"</code></p>\n\n<p>I'm not very good at matching so I'm not quite sure how to do it so it just takes everything after the first double underscore.</p>\n"}, {"tags": ["regex", "linux", "perl", "glob"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1566729845, "post_id": 57644370, "comment_id": 101741746, "body": "<b>(1)</b> What OS?  The answer may be different on Windows than on Unix."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1566730173, "post_id": 57644370, "comment_id": 101741819, "body": "@cxw it&#39;s linux"}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566721764, "post_id": 57644414, "comment_id": 101739979, "body": "This specifies the extension type though. To do this I will have to go in and manually check all directories and do renames of strings for each file extension. I&#39;m looking for something that will allow me to do the rename without knowing the extension."}, {"owner": {"reputation": 830, "user_id": 11422830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIgil.jpg?s=128&g=1", "display_name": "champion-runner", "link": "https://stackoverflow.com/users/11422830/champion-runner"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566722033, "post_id": 57644414, "comment_id": 101740054, "body": "<b>Oh I see</b> , <a href=\"https://www.perlmonks.org/?node_id=632437\" rel=\"nofollow noreferrer\">link</a> check this out if it helps"}], "tags": [], "owner": {"reputation": 830, "user_id": 11422830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aIgil.jpg?s=128&g=1", "display_name": "champion-runner", "link": "https://stackoverflow.com/users/11422830/champion-runner"}, "is_accepted": false, "score": 0, "last_activity_date": 1566721654, "creation_date": 1566721654, "answer_id": 57644414, "question_id": 57644370, "link": "https://stackoverflow.com/questions/57644370/renaming-perl-files-with-any-extension/57644414#57644414", "title": "Renaming perl files with any extension", "body": "<p><strong>You can try applying the rename function directly</strong> </p>\n\n<p>Example</p>\n\n<ul>\n<li>rename(\"D:/GeeksforGeeks/GFG File.txt\", </li>\n<li>\"D:/GeeksforGeeks/GFG File 2.txt\") || </li>\n<li>die ( \"Error in renaming\" );</li>\n</ul>\n\n<p>to the same code this might work</p>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566724882, "post_id": 57644552, "comment_id": 101740676, "body": "I tried rename but it does not work. I tried using perl <code>rename</code> by matching with regexp but I am not able to get it working still."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566725032, "post_id": 57644552, "comment_id": 101740710, "body": "@sfr The <code>rename</code> I use is a binary in <code>&#47;bin&#47;rename</code> (on my CentOS7); there is at least one more utility out there with the same name -- see the man page of what you have.  The Perl code should work though; it does for me (but you <i>may</i> need to tweak it, I can&#39;t fully test now)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566725412, "post_id": 57644552, "comment_id": 101740790, "body": "@sfr Edited, so that Perl code (in the second part) now only prints as it stands, for easier testing.  Once it&#39;s all good uncomment the line with <code>#move...</code> to actually rename files"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 7, "last_activity_date": 1574619311, "last_edit_date": 1574619311, "creation_date": 1566722851, "answer_id": 57644552, "question_id": 57644370, "link": "https://stackoverflow.com/questions/57644370/renaming-perl-files-with-any-extension/57644552#57644552", "title": "Renaming perl files with any extension", "body": "<p>There is a tool <code>rename</code>, which I believe comes with most systems (CentOS7 has it, for instance)</p>\n\n<p>The man page is short with the synopsis and description</p>\n\n<blockquote>\n  <p><strong>rename</strong> [<em>options</em>] <em>expression</em> <em>replacement</em> <em>file</em>...  </p>\n  \n  <p><strong>rename</strong> will rename the specified files by replacing the first occurrence of <em>expression</em> in their name by <em>replacement</em>.</p>\n</blockquote>\n\n<p>followed by one, not exactly basic but hopefully clear and helpful, example.</p>\n\n<p>In your case</p>\n\n<pre><code>rename ExampleFile NewName ExampleFile.*\n</code></pre>\n\n<p>should be all you need.</p>\n\n<hr>\n\n<p>Another way is to do this in Perl</p>\n\n<pre><code>perl -MFile::Basename -MFile::Copy=move -wE'\n    for (@ARGV) {\n        ($name, $path, $ext) = fileparse($_, qr/\\.[^.]*/);\n        say \"Rename: $_  to  $path/NewName$ext\";\n        #move $_, \"$path/NewName$ext\" \n    }\n' ExampleFile*\n</code></pre>\n\n<p>This will rename all <code>ExampleFile.*</code> to <code>NewName</code> with same extensions, once you uncomment the line with <code>move</code>.  As it stands it only prints what it would do, so that it can be tested thoroughly first.</p>\n\n<p>It uses <a href=\"https://perldoc.perl.org/File/Basename.html\" rel=\"nofollow noreferrer\">File::Basename</a>::<code>fileparse</code>  to find components of the filename for each of the files submitted on the command line, and then <a href=\"https://perldoc.perl.org/File/Copy.html\" rel=\"nofollow noreferrer\">File::Copy</a> to rename each file. There are other ways to parse filenames and other modules to call upon. </p>\n\n<p>This is given as a command-line program for quick copy-paste testing; please cast it into a script, with due error checking. Then you can make a nice utility with better invocation using <a href=\"https://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow noreferrer\">Getopt::Long</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566730706, "post_id": 57645367, "comment_id": 101741931, "body": "My wording is incorrect. By perl one-liner, I was hoping it would be some way to use <code>rename</code> within the script because the patterns I want to replace are in-script variables. Is it possible to access to use the variable name from the script in the command line? (It seems by one-liner, I was suggesting perl from the command line)"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566755306, "post_id": 57645367, "comment_id": 101747359, "body": "@sfr Edited!  Yes, in Perl &quot;one-liner&quot; implies command line, as far as I know."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566763330, "post_id": 57645367, "comment_id": 101749113, "body": "<code>&quot;bsd_glob&quot; is not defined</code> is the error I got. Unfortunately, I&#39;m not able to install anything for perl either due to my work policy.  Is there anything else I can use besides bsd_glob? I did some research and couldn&#39;t seem to find a way around it except using a perl version that has it. i&#39;m using (v5.14) I see there is <code>:glob</code> but doesn&#39;t seem to be allowed for iterating."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566781215, "post_id": 57645367, "comment_id": 101752037, "body": "@sfr Don&#39;t have to use <code>File::Glob</code> -- it provides a <code>glob</code> better than the built-in one but it is by no means necessary.  The one-liner should work exactly the same, just drop <code>-MFile::Glob</code>. In the other snippet (for a script) remove <code>use File::Glob</code> statement and instead of <code>bsd_glob</code> use <code>glob</code>. And then watch out for names with spaces."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566841169, "post_id": 57645367, "comment_id": 101773964, "body": "*Updated comment: It is doing the rename of the string in the file name but instead of showing something like <code>FinalFile.txt</code>, it is showing <code>FinalFile.*</code>"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566844151, "post_id": 57645367, "comment_id": 101775104, "body": "@sfr Did you put the <code>.*</code> in <code>$replacestring</code>?  I am going with your code in the question - <code>$findstring = &#39;ExampleFile&#39;</code> and <code>$replacestring = &#39;FinalFile&#39;</code>."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566844869, "post_id": 57645367, "comment_id": 101775366, "body": "I did. I also put in an error statement and it says there is no such file or directory as the original one (which there is), and <code>&#39;1&#39; and &#39;1&#39; are identical (not copied) at script.pl line 23</code> where line 23 is the line containing the move."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566845023, "post_id": 57645367, "comment_id": 101775424, "body": "Here is what I noticed. If the directory has a single file extension with that string such as &quot;ExampleFile.*&quot;, it will change it to &quot;FinalFile.txt&quot;. If it has two file extension types such as &quot;ExampleFile.txt&quot; and &quot;ExampleFile.html&quot; in the directory, it will change neither names of the files in the directory."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566849142, "post_id": 57645367, "comment_id": 101777052, "body": "@sfr Would you please accept one of the answers to this question and ask a new question with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">runnable example</a> of the code you now have in your script?  I think we are past the limit of readability of the comments mechanism :) .  Thanks!"}], "tags": [], "owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "is_accepted": false, "score": 3, "last_activity_date": 1566827589, "last_edit_date": 1566827589, "creation_date": 1566730378, "answer_id": 57645367, "question_id": 57644370, "link": "https://stackoverflow.com/questions/57644370/renaming-perl-files-with-any-extension/57645367#57645367", "title": "Renaming perl files with any extension", "body": "<p>I agree with @zdim's answer and want to add a possible clarification.  I think you may be confusing regex replacement with globbing.  <em>Globbing</em> gives you the list of filenames so you don't have to specify the extension.  Then you can use a <em>regex</em> to build the new name.  Using rename(1) is the easiest, but if you must have a one-liner, something like this might work on Perl 5.14+ &mdash;</p>\n\n<pre><code>perl -MFile::Glob -MFile::Copy -E 'move($_, s/^ExampleFile/FinalFile/r) foreach &lt;ExampleFile.*&gt;'\n</code></pre>\n\n<p>The <code>&lt;...&gt;</code> is the glob, and makes a list of the matching filenames.  Then separately, the <code>move(, s///)</code> does the renaming.</p>\n\n<p>In the sample code in your question, you were using <code>.*</code> in a regex, but it appears you wanted that in a glob.  In @zdim's answer, the shell globs and Perl renames.</p>\n\n<p><strong>Edit</strong> within a script, the corresponding code should work (not tested):</p>\n\n<pre><code>use 5.014;\nuse File::Glob ':bsd_glob'; use File::Copy; \nmove($_, s/^\\Q$findstring/$replacestring/r) foreach bsd_glob(\"$findstring.*\");\n</code></pre>\n\n<p><strong>Edit 2</strong> without <code>File::Glob</code>:</p>\n\n<pre><code>use 5.014;\nuse File::Copy; \nmove($_, s/^\\Q$findstring/$replacestring/r) foreach &lt;$findstring.*&gt;;\n</code></pre>\n\n<p>The builtin <code>&lt;foo&gt;</code> operator, in list context, globs <code>foo</code> and returns a list of the matches.</p>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 57644552, "answer_count": 3, "score": 2, "last_activity_date": 1574619311, "creation_date": 1566721199, "last_edit_date": 1566730476, "question_id": 57644370, "link": "https://stackoverflow.com/questions/57644370/renaming-perl-files-with-any-extension", "title": "Renaming perl files with any extension", "body": "<p>I would like to be able to rename perl files of different extensions as long as the name of the file is the same. For example, </p>\n\n<p><code>ExampleFile.txt</code> <br><code>ExampleFile.html</code> <br><code>FirstFile.txt</code></p>\n\n<p>I would like a Perl one-liner I can use on Linux to change a file containing string \"ExampleFile\" as name, regardless of its extension to \"FinalFile\", but not for any other file such as \"FirstFile\". I was looking into <code>rename</code> but I can't seem to figure out how to use this for any file extension. </p>\n\n<p>Doing something like <code>rename \"$findstring.*\", \"$replacestring.*\";</code> doesn't seem to work because perl does not recognize <code>*</code> to represent any file extension. </p>\n\n<p>Here is a sample code to work with that shows my issue. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $findstring = \"ExampleFile\";\nmy $replacestring = \"FinalFile\";\n\nrename (\"myDir/$findstring.*\", \"myDir/$replacestring.*\"); \n\n</code></pre>\n"}, {"tags": ["perl", "dbi", "fetchall"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566717459, "post_id": 57643890, "comment_id": 101739116, "body": "Tip: The name of the language is &quot;Perl&quot;, not &quot;PERL&quot;. It&#39;s not an acronym."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566717474, "post_id": 57643890, "comment_id": 101739119, "body": "Tip: <code>eq</code> is for comparing strings. Use <code>==</code> to compare numbers."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566717505, "post_id": 57643890, "comment_id": 101739125, "body": "Tip: There&#39;s no point in putting <code>a</code> in front of array names."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566719712, "post_id": 57643890, "comment_id": 101739525, "body": "Tip: The final <code>doSomethingWithNames(\\@aParentRecords);</code> should be <code>doSomethingWithNames(\\@aParentRecords) if @aParentRecords;</code> (for when there are no records to fetch)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566720009, "post_id": 57643890, "comment_id": 101739582, "body": "Tip: Only use <code>and</code> and <code>or</code> when followed by <code>return</code>, <code>die</code>, <code>next</code>, <code>last</code> or some other flow-control operator. Use <code>&amp;&amp;</code> and <code>||</code> elsewhere."}], "answers": [{"comments": [{"owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "edited": false, "score": 0, "creation_date": 1566720668, "post_id": 57644223, "comment_id": 101739742, "body": "Works perfectly @ikegami. Thanks for the solution and for the tips!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1566719479, "creation_date": 1566719479, "answer_id": 57644223, "question_id": 57643890, "link": "https://stackoverflow.com/questions/57643890/iterating-the-results-returned-from-fetchall-arrayref/57644223#57644223", "title": "Iterating the results returned from fetchall_arrayref", "body": "<p>The trick is to postpone existing the loop by converting it into an infinite loop. This requires checking the loop-terminating condition (<code>!$rows</code>) twice, though.</p>\n\n<pre><code>my $rows = [];\nmy $prev_name = '';\nmy @group;\nwhile (1) {\n   $rows = $sth-&gt;fetchall_arrayref({}, 3) if !@$rows;\n\n   if (!$rows || $rows-&gt;[0]-&gt;{FULL_NAME} ne $prev_name)\n      if (@group) {\n         do_something(\\@group);\n         @group = ();\n      }\n\n      last if !$rows;\n   }\n\n   $prev_name = $rows-&gt;[0]-&gt;{FULL_NAME};\n   push @group, shift(@$rows);\n}\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 2178956, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6efb8df1c31a08f8eb04b075170fd1f5?s=128&d=identicon&r=PG", "display_name": "Soumya", "link": "https://stackoverflow.com/users/2178956/soumya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 57644223, "answer_count": 1, "score": 1, "last_activity_date": 1566719479, "creation_date": 1566716129, "question_id": 57643890, "link": "https://stackoverflow.com/questions/57643890/iterating-the-results-returned-from-fetchall-arrayref", "title": "Iterating the results returned from fetchall_arrayref", "body": "<p>I have a sql wherein I am fetching few records, sorted by full name.</p>\n\n<p>My requirement is to extract chunks of similar names and then do some operation on it.</p>\n\n<p>Say, the sql returns some records containing names like <code>[name1,name1,name2,name3,name3]</code></p>\n\n<p>I need to split them to <code>[name1,name1] , [name2] , [name3,name3]</code></p>\n\n<p>I am able to do it, but I am not happy with my implementation as I have to call <code>doSomethingWithNames()</code>twice.</p>\n\n<pre><code>while (my $paRecs = $pStatementHandle-&gt;fetchall_arrayref({}, 3)){\n   foreach my $phRec(@{$paRecs}){\n       my $pCurrentName = $phRec-&gt;{'FULL_NAME'};\n       if ((scalar(@aParentRecords) eq 0) or ($aParentRecords[-1] eq $pCurrentName)){\n           push(@aParentRecords, $pCurrentName);\n       } else {\n           doSomethingWithNames(\\@aParentRecords);\n           @aParentRecords= ();\n           push(@aParentRecords, $pCurrentName);\n       }\n   }\n};\ndoSomethingWithNames(\\@aParentRecords); # This should be inside while loop  \n</code></pre>\n\n<p>I believe am running into this issue because while doesn't go into the loop for \nthe last iteration as <code>fetch*</code> returns <code>undef</code>.</p>\n\n<p>Sounds basic PERL stuff, but tried many loop constructs with no luck.\nAny pointer will be a great help</p>\n"}, {"tags": ["perl", "intellij-idea", "tdd"], "comments": [{"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1566713797, "post_id": 57643645, "comment_id": 101738489, "body": "What does <code>C:&#47;Strawberry&#47;perl&#47;bin&#47;prove.bat</code> look like? What happens if you <code>use PassEnv</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566716038, "post_id": 57643645, "comment_id": 101738865, "body": "The error says that <code>prove</code> can&#39;t find a module. It&#39;s not a big surprise that you don;t get the error when you don&#39;t use <code>prove</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566716332, "post_id": 57643645, "comment_id": 101738912, "body": "Please don&#39;t use two different builds of <code>perl</code> in the same question!"}, {"owner": {"reputation": 562, "user_id": 3497293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qf4mD.jpg?s=128&g=1", "display_name": "Krishnom", "link": "https://stackoverflow.com/users/3497293/krishnom"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1566716385, "post_id": 57643645, "comment_id": 101738921, "body": "@JimGarrison I have updated the question with the information you need. I am not aware of this prove.bat script in strawberry Perl package. I am not able to decipher it too."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566716447, "post_id": 57643645, "comment_id": 101738931, "body": "<code>prove.bat</code> embeds <a href=\"https://metacpan.org/release/Test-Harness/source/bin/prove\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566716640, "post_id": 57643645, "comment_id": 101738963, "body": "Please provide the output of <code>perl -le&quot;require Config; print $Config{archname}; require App::Prove; print App::Prove-&gt;VERSION&quot;</code> (Adjust quotes to match your shell as necessary.)"}, {"owner": {"reputation": 562, "user_id": 3497293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qf4mD.jpg?s=128&g=1", "display_name": "Krishnom", "link": "https://stackoverflow.com/users/3497293/krishnom"}, "edited": false, "score": 0, "creation_date": 1566716697, "post_id": 57643645, "comment_id": 101738971, "body": "perl -le&quot;use Config; use App::Prove; print for $Config{archname}, App::Prove-&gt;VERSION&quot;&lt;br/&gt; <code>Can&#39;t locate TAP&#47;Harness&#47;Env.pm in @INC (you may need to install the TAP::Harness::Env module) (@INC contains: &#47;usr&#47;lib&#47;perl5&#47;site_perl &#47;usr&#47;share&#47;perl5&#47;site_perl &#47;usr&#47;lib&#47;perl5&#47;vendor_perl &#47;usr&#47;share&#47;perl5&#47;vendor_perl &#47;usr&#47;lib&#47;perl5&#47;core_perl &#47;usr&#47;share&#47;perl5&#47;core_perl) at &#47;usr&#47;share&#47;perl5&#47;core_perl&#47;App&#47;Prove.pm line 6. BEGIN failed--compilation aborted at &#47;usr&#47;share&#47;perl5&#47;core_perl&#47;App&#47;Prove.pm line 6. Compilation failed in require at -e line 1. BEGIN failed--compilation aborted at -e line 1.</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1566716776, "post_id": 57643645, "comment_id": 101738980, "body": "I said using your Strawberry Perl. There&#39;s no point running these commands on a different <code>perl</code> than the one you want fixed. (PS - I also made a change to the command I&#39;d like you to run)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566716865, "post_id": 57643645, "comment_id": 101738995, "body": "<code>C:\\Strawberry\\perl\\bin\\perl.exe</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566716925, "post_id": 57643645, "comment_id": 101739007, "body": "(It does seem that both of your Perl installations are messed up, though. How!?)"}, {"owner": {"reputation": 562, "user_id": 3497293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qf4mD.jpg?s=128&g=1", "display_name": "Krishnom", "link": "https://stackoverflow.com/users/3497293/krishnom"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566717097, "post_id": 57643645, "comment_id": 101739034, "body": "Ahh! I always have trouble with strawberry and git-bash on same windows env. I always struggle to use strawberry Perl uniformly. @ikegami I am still not sure if this problem is caused by Perl environment being messed up."}, {"owner": {"reputation": 562, "user_id": 3497293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qf4mD.jpg?s=128&g=1", "display_name": "Krishnom", "link": "https://stackoverflow.com/users/3497293/krishnom"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566717257, "post_id": 57643645, "comment_id": 101739065, "body": "@ikegami Here is the output <code>$ &#47;c&#47;Strawberry&#47;perl&#47;bin&#47;perl -le&quot;use Config; use App::Prove; print for $Config{archname}, App::Prove-&gt;VERSION&quot; HASH(0x30ce350) 3.42</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566717638, "post_id": 57643645, "comment_id": 101739149, "body": "You appear to be using a <code>bash</code> or similar. You need to use single quotes instead of double quotes. Still, I got what I wanted."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566717882, "post_id": 57643645, "comment_id": 101739194, "body": "Ah, I didn&#39;t notice the <code>-PPassEnv</code> before. I thought things were messed up because it was trying to load a dependency, but it&#39;s not a dependency. Posting an answer in two secs"}], "answers": [{"comments": [{"owner": {"reputation": 562, "user_id": 3497293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qf4mD.jpg?s=128&g=1", "display_name": "Krishnom", "link": "https://stackoverflow.com/users/3497293/krishnom"}, "edited": false, "score": 0, "creation_date": 1566719688, "post_id": 57644089, "comment_id": 101739519, "body": "Thanks @ikegami Above module depends on  &quot;ExtUtils::Manifest&quot; . After installing that, It installed perfectly. <code>&#47;c&#47;Strawberry&#47;perl&#47;bin&#47;cpanm  ExtUtils::Manifest  App::Prove::Plugin::PassEnv</code>. But when i run test again from IntelliJ, It fails for some other package(TAP::Formatter::Camelcade). But given your details comments, I may be able to take from this."}, {"owner": {"reputation": 562, "user_id": 3497293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qf4mD.jpg?s=128&g=1", "display_name": "Krishnom", "link": "https://stackoverflow.com/users/3497293/krishnom"}, "edited": false, "score": 0, "creation_date": 1566720080, "post_id": 57644089, "comment_id": 101739606, "body": "Bingo! After installing that last module, It worked. <code>Testing started at 13:25 ... C:&#47;Strawberry&#47;perl&#47;bin\\perl.exe C:&#47;Strawberry&#47;perl&#47;bin&#47;prove.bat -PPassEnv --formatter TAP::Formatter::Camelcade --merge --recurse --jobs 1 D:&#47;workspace&#47;code&#47;ReaConverter.t All tests successful. Files=1, Tests=1,  0 wallclock secs ( 0.08 usr +  0.02 sys =  0.09 CPU) Result: PASS</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1566718050, "creation_date": 1566718050, "answer_id": 57644089, "question_id": 57643645, "link": "https://stackoverflow.com/questions/57643645/running-perl-test-in-intellij-cant-load-module-passenv-at/57644089#57644089", "title": "Running perl test in intellij: Can&#39;t load module PassEnv at", "body": "<p>Because of the <code>-PPassEnv</code> option used, <code>prove</code> attempts to load App::Prove::Plugin::PassEnv. It hasn't been installed. Simply install the module.</p>\n\n<p>Note: You want to install it using Strawberry Perl, so the following appears to be the appropriate command from your preferred shell:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>/c/Strawberry/perl/bin/cpanm App::Prove::Plugin::PassEnv\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 3497293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qf4mD.jpg?s=128&g=1", "display_name": "Krishnom", "link": "https://stackoverflow.com/users/3497293/krishnom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "accepted_answer_id": 57644089, "answer_count": 1, "score": 2, "last_activity_date": 1566718050, "creation_date": 1566713198, "last_edit_date": 1566717824, "question_id": 57643645, "link": "https://stackoverflow.com/questions/57643645/running-perl-test-in-intellij-cant-load-module-passenv-at", "title": "Running perl test in intellij: Can&#39;t load module PassEnv at", "body": "<p>I want to created perl modules in intellij derived by Tests. I created following test in a new project as shown below</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Test::More;\n\ndone_testing();\n</code></pre>\n\n<p>But when i am trying to run the test (Shift+Alt+F10), it fails with below error</p>\n\n<blockquote>\n  <p>Testing started at 10:51 ...\n  C:/Strawberry/perl/bin\\perl.exe C:/Strawberry/perl/bin/prove.bat -PPassEnv --formatter TAP::Formatter::Camelcade --merge --recurse --jobs 1 D:/workspace/code/repo/Modules/ImageUtilities/ReaConverterTest.t\n  Can't load module PassEnv at C:/Strawberry/perl/bin/prove.bat line 26.<br> \n  Process finished with exit code 2</p>\n</blockquote>\n\n<p>But when I run the test from the command line it works fine</p>\n\n<pre><code>$ perl -w ReaConverterTest.t\n1..0\n</code></pre>\n\n<p>I see that there was an issue reported with intellij perl plugin(<a href=\"https://github.com/Camelcade/Perl5-IDEA/issues/1966\" rel=\"nofollow noreferrer\">https://github.com/Camelcade/Perl5-IDEA/issues/1966</a>) but it is closed. Looks like it was fixed in 2019.1 Perl but I am clueless why it's failing for me.</p>\n\n<p>Any idea on how to fix this?</p>\n\n<p>PS: I am using Git-Bash to run Perl scripts, IntelliJ using strawberry Perl installation on windows as Perl interpreter.</p>\n\n<hr>\n\n<h1>Update</h1>\n\n<p>When i run the script by adding \"use PassEnv\" it fails as there is no such module Searching from intellij also results in \"no such module\"</p>\n\n<pre><code>perl -w ReaConverter.t\nCan't locate PassEnv.pm in @INC (you may need to install the PassEnv module) (@INC contain\ns: /usr/lib/perl5/site_perl /usr/share/perl5/site_perl /usr/lib/perl5/vendor_perl /usr/sha\nre/perl5/vendor_perl /usr/lib/perl5/core_perl /usr/share/perl5/core_perl) at ReaConverter.\nt line 6.\nBEGIN failed--compilation aborted at ReaConverter.t line 6.\n</code></pre>\n"}, {"tags": ["perl", "makefile", "cpan", "dbd-mysql"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566709989, "post_id": 57641880, "comment_id": 101738035, "body": "DBD::mysql comes bundled with Strawberry Perl. Why do you need to install it manually?"}, {"owner": {"reputation": 667, "user_id": 8521468, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/W43ng.png?s=128&g=1", "display_name": "jonb", "link": "https://stackoverflow.com/users/8521468/jonb"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566734661, "post_id": 57641880, "comment_id": 101742754, "body": "It&#39;s a prerequisite for another thing I need to install: <a href=\"https://metacpan.org/pod/UMLS::Interface\" rel=\"nofollow noreferrer\">metacpan.org/pod/UMLS::Interface</a>  But thanks for that info, I will check how can I use the Strawberry&#39;s Perl DBD::mysql"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1566736133, "post_id": 57641880, "comment_id": 101743036, "body": "You&#39;re already using it; otherwise you&#39;d be getting a different error message."}], "owner": {"reputation": 667, "user_id": 8521468, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/W43ng.png?s=128&g=1", "display_name": "jonb", "link": "https://stackoverflow.com/users/8521468/jonb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566690217, "creation_date": 1566684887, "last_edit_date": 1566690217, "question_id": 57641880, "link": "https://stackoverflow.com/questions/57641880/cannot-install-dbd-mysql-on-windows", "title": "Cannot install DBD-mysql on windows", "body": "<p>I'm trying to install this package:\n<a href=\"https://metacpan.org/pod/DBD::mysql::INSTALL\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/DBD::mysql::INSTALL</a></p>\n\n<p>I have mysql configured on my system.</p>\n\n<p>I'm trying to perform the cmds:</p>\n\n<pre><code>perl Makefile.PL\nmake\nmake test\nmake install\n</code></pre>\n\n<p>This is the output of `perl Makefile.PL make</p>\n\n<pre><code>E:\\umls_perl\\DBD-mysql-4.050&gt;perl Makefile.PL\n\n\nPLEASE NOTE:\n\nFor 'make test' to run properly, you must ensure that the\ndatabase user '' can connect to your MySQL server\nand has the proper privileges that these tests require such\nas 'drop table', 'create table', 'drop procedure', 'create procedure'\nas well as others.\n\nmysql&gt; grant all privileges on test.* to ''@'localhost' identified by 's3kr1t';\n\nYou can also optionally set the user to run 'make test' with:\n\nperl Makefile.PL --testuser=username\n\nI will use the following settings for compiling and testing:\n\n  cflags        (mysql_config) = -IC:\\Strawberry\\c\\bin\\..\\include\\mysql50716\n  embedded      (guessed     ) =\n  ldflags       (guessed     ) =\n  libs          (mysql_config) = -LC:\\Strawberry\\c\\bin\\..\\lib -lmysql\n  mysql_config  (guessed     ) = mysql_config\n  nocatchstderr (default     ) = 0\n  nofoundrows   (default     ) = 0\n  nossl         (default     ) = 0\n  testdb        (default     ) = test\n  testhost      (default     ) =\n  testpassword  (default     ) =\n  testport      (default     ) =\n  testsocket    (default     ) =\n  testuser      (guessed     ) =\n\nTo change these settings, see 'perl Makefile.PL --help' and\n'perldoc DBD::mysql::INSTALL'.\n\nChecking if libs are available for compiling...\nLooks good.\n\nChecking if your kit is complete...\nLooks good\nMultiple copies of Driver.xst found in: C:/Strawberry/perl/site/lib/auto/DBI/ C:/Strawberry/perl/vendor/lib/auto/DBI/ at Makefile.PL line 896.\nUsing DBI 1.642 (for perl 5.030000 on MSWin32-x64-multi-thread) installed in C:/Strawberry/perl/site/lib/auto/DBI/\nGenerating a gmake-style Makefile\nWriting Makefile for DBD::mysql\nWriting MYMETA.yml and MYMETA.json\n\nE:\\umls_perl\\DBD-mysql-4.050&gt;make\ncp lib/Bundle/DBD/mysql.pm blib\\lib\\Bundle\\DBD\\mysql.pm\ncp lib/DBD/mysql/INSTALL.pod blib\\lib\\DBD\\mysql\\INSTALL.pod\ncp lib/DBD/mysql.pm blib\\lib\\DBD\\mysql.pm\ncp lib/DBD/mysql/GetInfo.pm blib\\lib\\DBD\\mysql\\GetInfo.pm\nRunning Mkbootstrap for mysql ()\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 644 \"mysql.bs\"\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command::MM -e cp_nonempty -- mysql.bs blib\\arch\\auto\\DBD\\mysql\\mysql.bs 644\ngcc -c  -IC:\\Strawberry\\perl\\site\\lib\\auto\\DBI -IC:\\Strawberry\\c\\bin\\..\\include\\mysql50716 -DDBD_MYSQL_WITH_SSL -g  -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -s -O2   -DVERSION=\\\"4.050\\\" -DXS_VERSION=\\\"4.050\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   dbdimp.c\nIn file included from C:\\Strawberry\\perl\\site\\lib\\auto\\DBI/DBIXS.h:38,\n                 from dbdimp.h:20,\n                 from dbdimp.c:15:\nC:\\Strawberry\\perl\\site\\lib\\auto\\DBI/dbipport.h:4471: warning: \"WIDEST_UTYPE\" redefined\n #  define WIDEST_UTYPE U64TYPE\n\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE/perl.h:2508,\n                 from C:\\Strawberry\\perl\\site\\lib\\auto\\DBI/DBIXS.h:23,\n                 from dbdimp.h:20,\n                 from dbdimp.c:15:\nC:\\STRAWB~1\\perl\\lib\\CORE/handy.h:1072: note: this is the location of the previous definition\n #   define WIDEST_UTYPE U64\n\ndbdimp.c: In function 'mysql_st_prepare':\ndbdimp.c:3207:24: warning: assignment to 'my_bool *' {aka 'char *'} from incompatible pointer type '_Bool *' [-Wincompatible-pointer-types]\n           bind-&gt;is_null=      (_Bool*) &amp;(fbind-&gt;is_null);\n                        ^\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -p -e \"s/~DRIVER~/mysql/g\" C:\\Strawberry\\perl\\site\\lib\\auto\\DBI\\Driver.xst &gt; mysql.xsi\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" \"C:\\Strawberry\\perl\\lib\\ExtUtils/xsubpp\"  -typemap C:\\STRAWB~1\\perl\\lib\\ExtUtils\\typemap  mysql.xs &gt; mysql.xsc\nWarning: duplicate function definition 'do' detected in mysql.xs, line 247\nWarning: duplicate function definition 'rows' detected in mysql.xs, line 683\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e mv -- mysql.xsc mysql.c\ngcc -c  -IC:\\Strawberry\\perl\\site\\lib\\auto\\DBI -IC:\\Strawberry\\c\\bin\\..\\include\\mysql50716 -DDBD_MYSQL_WITH_SSL -g  -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -s -O2   -DVERSION=\\\"4.050\\\" -DXS_VERSION=\\\"4.050\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   mysql.c\nIn file included from C:\\Strawberry\\perl\\site\\lib\\auto\\DBI/DBIXS.h:38,\n                 from dbdimp.h:20,\n                 from mysql.xs:12:\nC:\\Strawberry\\perl\\site\\lib\\auto\\DBI/dbipport.h:4471: warning: \"WIDEST_UTYPE\" redefined\n #  define WIDEST_UTYPE U64TYPE\n\nIn file included from C:\\STRAWB~1\\perl\\lib\\CORE/perl.h:2508,\n                 from C:\\Strawberry\\perl\\site\\lib\\auto\\DBI/DBIXS.h:23,\n                 from dbdimp.h:20,\n                 from mysql.xs:12:\nC:\\STRAWB~1\\perl\\lib\\CORE/handy.h:1072: note: this is the location of the previous definition\n #   define WIDEST_UTYPE U64\n\ngcc -c  -IC:\\Strawberry\\perl\\site\\lib\\auto\\DBI -IC:\\Strawberry\\c\\bin\\..\\include\\mysql50716 -DDBD_MYSQL_WITH_SSL -g  -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -s -O2   -DVERSION=\\\"4.050\\\" -DXS_VERSION=\\\"4.050\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   socket.c\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Mksymlists \\\n     -e \"Mksymlists('NAME'=&gt;\\\"DBD::mysql\\\", 'DLBASE' =&gt; 'mysql', 'DL_FUNCS' =&gt; {  }, 'FUNCLIST' =&gt; [], 'IMPORTS' =&gt; {  }, 'DL_VARS' =&gt; []);\"\ng++ mysql.def -o blib\\arch\\auto\\DBD\\mysql\\mysql.xs.dll -mdll -s -L\"C:\\STRAWB~1\\perl\\lib\\CORE\" -L\"C:\\STRAWB~1\\c\\lib\" dbdimp.o mysql.o socket.o   \"C:\\STRAWB~1\\perl\\lib\\CORE\\libperl530.a\" \"C:\\Strawberry\\c\\bin\\..\\lib\\libmysql.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libmoldname.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libkernel32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libuser32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libgdi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libwinspool.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libcomdlg32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libadvapi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libshell32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libole32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\liboleaut32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libnetapi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libuuid.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libws2_32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libmpr.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libwinmm.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libversion.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libodbc32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libodbccp32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libcomctl32.a\" -Wl,--enable-auto-image-base\ncollect2.exe: error: ld returned 5 exit status\nmake: *** [blib\\arch\\auto\\DBD\\mysql\\mysql.xs.dll] Error 1\n</code></pre>\n\n<p>I've added mysql to environment variables, tried to attach mysql config when I run the Makefile like this:</p>\n\n<pre><code>perl Makefile.PL --mysql_config=\"C:\\ProgramData\\MySQL\\MySQL Server 8.0\\my.ini\"\n</code></pre>\n\n<p>I've had a similar problem at Linux as well. I don't understand what is the proper way to install this package. Will be glad to get some advice on this subject. Thanks. </p>\n"}, {"tags": ["perl", "makefile", "cpan", "medical", "cpanm"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566726964, "post_id": 57641155, "comment_id": 101741104, "body": "I am not familiar with UMLS, but there are some information on how to install the module in the <a href=\"https://metacpan.org/source/BTMCINNES/UMLS-Interface-1.51/INSTALL\" rel=\"nofollow noreferrer\">INSTALL</a> file."}, {"owner": {"reputation": 667, "user_id": 8521468, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/W43ng.png?s=128&g=1", "display_name": "jonb", "link": "https://stackoverflow.com/users/8521468/jonb"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1566737601, "post_id": 57641155, "comment_id": 101743336, "body": "I saw it. The step relevant for me is Step 6. But I don&#39;t know what to do in order to overcome this problem. I&#39;ve tried supplying &quot;PREFIX&quot; as suggested in the Step 6 instructions but it didn&#39;t solve it..."}], "owner": {"reputation": 667, "user_id": 8521468, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/W43ng.png?s=128&g=1", "display_name": "jonb", "link": "https://stackoverflow.com/users/8521468/jonb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566679675, "creation_date": 1566676943, "last_edit_date": 1566679675, "question_id": 57641155, "link": "https://stackoverflow.com/questions/57641155/using-ulmssimilarity-perl-access-denied-for-mysql-user", "title": "Using ULMS:Similarity perl - Access denied for mysql user", "body": "<p>I'm getting a simple error but I don't know how to solve it. </p>\n\n<p>While performing make test on this perl package (Linux) <a href=\"https://metacpan.org/pod/UMLS::Interface\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/UMLS::Interface</a>:</p>\n\n<pre><code>DBI connect('umls;mysql_read_default_group=client;','',...) failed: Access denied for user 'jon'@'localhost' (using password: NO) at /home/jon/UMLS/UMLS-Interface-1.51/blib/lib/UMLS/Interface/CuiFinder.pm line 2465.\n</code></pre>\n\n<p>I have a password, but I don't know how can I supply it during the installation. </p>\n\n<p>My desire is to make the tests &amp; installation work for both the UMLS Interface/similarity in order to find similarity &amp; relatedness between words. \nIf there exists some web-server that I can query for similarity, it might be a good detour. </p>\n\n<h1>Tries:</h1>\n\n<ol>\n<li><p>Trying to install with cpanm</p>\n\n<p>(base) jon@jon:~/UMLS/UMLS-Interface-1.51$ sudo cpanm UMLS::Interface\nUMLS::Interface is up to date. (1.51)</p></li>\n</ol>\n\n<p>Here it looks installed ok, but then I have the same problem with UMLS-SIMILARITY on the make test. </p>\n\n<ol start=\"2\">\n<li><p>Trying to install with :</p>\n\n<p>perl Makefile.PL\nmake \nmake test\nmake install</p></li>\n</ol>\n\n<p>Output:</p>\n\n<pre><code>(base) jon@jon:~/UMLS/UMLS-Interface-1.51$ perl Makefile.PL\nChecking if your kit is complete...\nWarning: the following files are missing in your kit:\n    t/mysql.t\nPlease inform the author.\nGenerating a Unix-style Makefile\nWriting Makefile for UMLS::Interface\nWriting MYMETA.yml and MYMETA.json\n</code></pre>\n\n<p>And then on the <code>'make test'</code> I get the database error </p>\n\n<pre><code>(Access denied for user 'jon'@'localhost' (using password: NO)\n</code></pre>\n\n<ol start=\"3\">\n<li><p>I've searched where I can supply config file / mysql password in UMLS-Interface or UMLS-Similarity packages. Didn't find. </p></li>\n<li><p>I've tried to install DBI &amp; DBD in several methods, all routes gets me to the same error. </p></li>\n<li><p>I've tried the web-interface: \n<a href=\"https://metacpan.org/pod/distribution/UMLS-Similarity/utils/query-umls-similarity-webinterface.pl\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/UMLS-Similarity/utils/query-umls-similarity-webinterface.pl</a>\nBut get the following error:</p>\n\n<p>(base) jon@jon:~/UMLS/UMLS-Similarity-1.47/utils$ query-umls-similarity-webinterface.pl hand skull\nDefault Settings:\n  --default <a href=\"http://atlas.ahc.umn.edu/\" rel=\"nofollow noreferrer\">http://atlas.ahc.umn.edu/</a>\n  --measure path\n  --sab MSH\n  --rel PAR/CHD\nUser Settings:\n  No user defined settings</p>\n\n<p>500 Can't connect to atlas.ahc.umn.edu:80http://atlas.ahc.umn.edu//cgi-bin/umls_similarity.cgi?word1=hand&amp;word2=skull&amp;sab=MSH&amp;rel=PAR%2FCHD&amp;similarity=path&amp;button=Compute+Similarity&amp;sabdef=UMLS_ALL&amp;reldef=CUI%2FPAR%2FCHD%2FRB%2FRN&amp;relatedness=vector \n&lt;>()&lt;>()\n^C</p></li>\n<li><p>I tried on Windows as well. </p>\n\n<p>DBI connect('umls;mysql_read_default_group=client;','',...) failed: Can't connect to MySQL server on 'localhost' (10061) at E:\\umls_perl\\UMLS-Interface-1.51\\blib\\lib/UMLS/Interface/CuiFinder.pm line 2465</p></li>\n</ol>\n\n<p>How can I solve it? Thanks</p>\n"}, {"tags": ["arrays", "perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 10500417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lqs2wuzb-tM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVT92HTL5zhuL3XXyhn4btxjojg6A/mo/photo.jpg?sz=128", "display_name": "SaAsh Techs", "link": "https://stackoverflow.com/users/10500417/saash-techs"}, "edited": false, "score": 0, "creation_date": 1566674272, "post_id": 57640477, "comment_id": 101733476, "body": "Thanks a lot but I tried this <code>my $state_name = map { $_-&gt;[1] } grep { $_-&gt;[0] eq $state } @{$all_state_details-&gt;{$country}}; print $state_name</code> but $state_name value is returning 1"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 133, "user_id": 10500417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lqs2wuzb-tM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVT92HTL5zhuL3XXyhn4btxjojg6A/mo/photo.jpg?sz=128", "display_name": "SaAsh Techs", "link": "https://stackoverflow.com/users/10500417/saash-techs"}, "edited": false, "score": 0, "creation_date": 1566675424, "post_id": 57640477, "comment_id": 101733689, "body": "See <a href=\"https://stackoverflow.com/questions/2126365/whats-the-difference-between-my-variablename-and-my-variablename-in-perl\" title=\"whats the difference between my variablename and my variablename in perl\">stackoverflow.com/questions/2126365/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566676758, "post_id": 57640477, "comment_id": 101733964, "body": "Re &quot;<i>into an array suitable for use with <code>grep</code></i>&quot;,   Into the individual scalars contained in the array, as suitable for <code>grep</code>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 2, "last_activity_date": 1566670458, "creation_date": 1566670458, "answer_id": 57640477, "question_id": 57639337, "link": "https://stackoverflow.com/questions/57639337/get-the-value-of-2nd-index-by-mapping-1st-index-through-hash-of-arrays-in-perl/57640477#57640477", "title": "Get the value of 2nd index by mapping 1st index through Hash of Arrays in Perl", "body": "<p>The <code>@{ ... }</code> dereference operation is necessary to convert the array reference in <code>$all_state_details-&gt;{$country}</code> into an array suitable for use with <code>grep</code>.</p>\n\n<pre><code>print map { $_-&gt;[1] } \n     grep { $_-&gt;[0] eq $state } @{$all_state_details-&gt;{$country}};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 0, "last_activity_date": 1566711856, "creation_date": 1566711856, "answer_id": 57643553, "question_id": 57639337, "link": "https://stackoverflow.com/questions/57639337/get-the-value-of-2nd-index-by-mapping-1st-index-through-hash-of-arrays-in-perl/57643553#57643553", "title": "Get the value of 2nd index by mapping 1st index through Hash of Arrays in Perl", "body": "<p>The right way to do this kind of lookup is with a hash of hashes.</p>\n\n<p>e.g.</p>\n\n<pre><code>%all_state_details = (\n      IN =&gt; {\n                \"AP\" =&gt; \"Andhra Pradesh\",\n                \"AN\" =&gt; \"Andaman and Nicobar Islands\",\n            },\n);\n</code></pre>\n\n<p>Then you just do a direct lookup.</p>\n\n<pre><code>print $all_state_details{IN}{AN};\n</code></pre>\n\n<p>Read <a href=\"https://perldoc.perl.org/perldsc.html#HASHES-OF-HASHES\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perldsc.html#HASHES-OF-HASHES</a></p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 133, "user_id": 10500417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lqs2wuzb-tM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVT92HTL5zhuL3XXyhn4btxjojg6A/mo/photo.jpg?sz=128", "display_name": "SaAsh Techs", "link": "https://stackoverflow.com/users/10500417/saash-techs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57640477, "answer_count": 2, "score": 0, "last_activity_date": 1566711856, "creation_date": 1566660912, "last_edit_date": 1566664125, "question_id": 57639337, "link": "https://stackoverflow.com/questions/57639337/get-the-value-of-2nd-index-by-mapping-1st-index-through-hash-of-arrays-in-perl", "title": "Get the value of 2nd index by mapping 1st index through Hash of Arrays in Perl", "body": "<p>I have a Perl file code state.pl where I am trying to retrieve full name of State based on State code from Hash of Arrays. Following is the code:</p>\n\n<pre><code>my $all_state_details = {\n          IN =&gt; [\n                  [\n                    \"AP\",\n                    \"Andhra Pradesh\"\n                  ],\n                  [\n                    \"AN\",\n                    \"Andaman and Nicobar Islands\"\n                  ],\n                  [\n                    \"AR\",\n                    \"Arunachal Pradesh\"\n                  ],\n                ],\n        US =&gt; [\n                  [\n                    \"AL\",\n                    \"Alabama\"\n                  ],\n                  [\n                    \"AK\",\n                    \"Alaska\"\n                  ],\n                  [\n                    \"AS\",\n                    \"American Samoa\"\n                  ],\n                ],\n        };\n\nmy $state = 'AN';\nmy $country = 'IN';\n\nmy @states = $all_state_details-&gt;{$country};\nmy @state_name = grep { $_-&gt;[0] eq $state } @states;\nprint @state_name;\n</code></pre>\n\n<p>When I run the script, I get the blank output</p>\n\n<p>I want the output as just:</p>\n\n<pre><code>Andaman and Nicobar Islands\n</code></pre>\n"}, {"tags": ["regex", "perl", "substitution"], "answers": [{"comments": [{"owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 0, "creation_date": 1566655134, "post_id": 57635914, "comment_id": 101729292, "body": "ikegami, thank you for answer. Could you tell how <code>?:</code> works?"}, {"owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 0, "creation_date": 1566659401, "post_id": 57635914, "comment_id": 101730264, "body": "Does expression <code>$ENV{$1&#47;&#47;$2}&#47;&#47;$&amp;</code> the same as <code>defined $ENV{$1} ? $ENV{$1} : $&amp;</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 0, "creation_date": 1566676061, "post_id": 57635914, "comment_id": 101733820, "body": "Re &quot;<i>Could you tell how <code>?:</code> works?</i>&quot; <code>(?:...)</code> is to regex patterns as <code>(...)</code> is to Perl and Mathematics: It groups, overriding precedence.  For example, <code>ab|cd</code> matches <code>ab</code> and <code>cd</code>, while <code>a(?:b|c)d</code> matches <code>abd</code> and <code>acd</code>. I used it to avoid repeating <code>\\$</code>. As the leading character, that should make the matching more efficient."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "edited": false, "score": 1, "creation_date": 1566676145, "post_id": 57635914, "comment_id": 101733836, "body": "Re &quot;<i>the same as</i>&quot;, No. You don&#39;t even use <code>$2</code>. <code>f() &#47;&#47; g()</code> is equivalent to <code>defined(f()) ? f() : g()</code> except that <code>f()</code> is only evaluated once, so <code>$ENV{$1&#47;&#47;$2}&#47;&#47;$&amp;</code> is equivalent to <code>defined($ENV{ defined($1) ? $1 : $2 }) ? $ENV{ defined($1) ? $1 : $2 } : $&amp;</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1566632986, "last_edit_date": 1566632986, "creation_date": 1566631167, "answer_id": 57635914, "question_id": 57635730, "link": "https://stackoverflow.com/questions/57635730/match-substitute-and-expand-shell-variable-using-perl/57635914#57635914", "title": "Match, substitute and expand shell variable using perl", "body": "<pre><code>perl -pe's#\\$(?:([A-Za-z_]+)|\\{([A-Za-z_]+)\\})#$ENV{$1//$2}//$&amp;#eg'\n</code></pre>\n\n<p>Test:</p>\n\n<pre><code>$ export a=1 b=2 c=3\n\n$ echo '$a$b_${c}_'    | perl -pe's#\\$(?:([A-Za-z_]+)|\\{([A-Za-z_]+)\\})#$ENV{$1//$2}//$&amp;#eg'\n1$b_3_\n\n$ echo '${a-$b}_${c}_' | perl -pe's#\\$(?:([A-Za-z_]+)|\\{([A-Za-z_]+)\\})#$ENV{$1//$2}//$&amp;#eg'\n${a-2}_3_\n</code></pre>\n"}], "owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57635914, "answer_count": 1, "score": 0, "last_activity_date": 1566632986, "creation_date": 1566629052, "last_edit_date": 1566631653, "question_id": 57635730, "link": "https://stackoverflow.com/questions/57635730/match-substitute-and-expand-shell-variable-using-perl", "title": "Match, substitute and expand shell variable using perl", "body": "<p>The next code perfectly works for variables without curly braces <code>{}</code></p>\n\n<pre><code>export a=1 b=2 c=3\necho '$a$b_${c}_' | perl -pe 's#\\$([A-Za-z_]+)#defined $ENV{$1} ? $ENV{$1} : $&amp;#eg'\n</code></pre>\n\n<p>result <code>1$b_${c}_</code></p>\n\n<p><code>b_</code> will never expand properly. It's okay. That problem is solved using curly braces <code>{}</code>.</p>\n\n<p>The next attempt works at most good</p>\n\n<pre><code>echo '${a-$b}_${c}_' |perl -pe 's#\\$\\{?([A-Za-z_]+)\\}?#defined $ENV{$1} ? $ENV{$1} : $&amp;#eg'\n</code></pre>\n\n<p>result is <code>1-2_3_</code>. But <code>${a</code>,<code>$b}</code> should not be expanded.<br>\nI did not found a simple solution to match both braces.<br>\nCould you help with that? The problem is to match without braces or inside both braces otherwise do not match and do not substitute.</p>\n"}, {"tags": ["rest", "file", "perl", "post", "servicenow"], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 235961, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f8e403d928f09096477fd2b4f3c00560?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/235961/pradeep"}, "is_accepted": false, "score": 2, "last_activity_date": 1566639734, "creation_date": 1566639734, "answer_id": 57636793, "question_id": 57632619, "link": "https://stackoverflow.com/questions/57632619/perl-version-of-this-python-servicenow-script-posting-a-file/57636793#57636793", "title": "Perl version of this python servicenow script posting a file", "body": "<p>You can use <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> Perl module to achieve the same:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse LWP::UserAgent;\nuse HTTP::Request;\nuse Fcntl;\nuse JSON qw[decode_json];\nuse Data::Dumper;\n\nmy $ua = LWP::UserAgent-&gt;new;\n\nmy $url = 'https://instance.service-now.com/api/now/attachment/file?table_name=incident&amp;table_sys_id=d71f7935c0a8016700802b64c67c11c6&amp;file_name=Issue_screenshot.jpg';\n\nmy $user = 'admin';\nmy $pwd = 'admin';\n\n$ua-&gt;credentials( 'instance.service-now.com', '&lt;REALM&gt;', $user, $pwd);\n\nmy $file = 'Issue_screenshot.jpg';\n\nmy $request = HTTP::Request-&gt;new( POST =&gt; $url );\n\n$request-&gt;header( 'Content-Type' =&gt; 'image/jpeg');\n$request-&gt;header( 'Accept' =&gt; 'application/json');\n$request-&gt;header( 'Content-Length' =&gt; -s $file);\n\nsysopen(my $fh,$file,O_RDONLY);\n\n$request-&gt;content( sub {\n    sysread($fh,my $buf,1024);\n\n    return $buf;\n});\n\nmy $res = $ua-&gt;request($request);\n\nunless($res-&gt;code == 201) {\n    print 'Status: '.$res-&gt;code, 'Headers:',$res-&gt;headers_as_string,'Error Response:',$res-&gt;content;\n    exit;\n}\n\nmy $data = decode_json($res-&gt;content);\n\nprint Dumper($data);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 1428649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d49a641a462a637650ef1ede49c2718c?s=128&d=identicon&r=PG", "display_name": "user1428649", "link": "https://stackoverflow.com/users/1428649/user1428649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566639734, "creation_date": 1566591861, "question_id": 57632619, "link": "https://stackoverflow.com/questions/57632619/perl-version-of-this-python-servicenow-script-posting-a-file", "title": "Perl version of this python servicenow script posting a file", "body": "<p>So I am going over the Attachment API for ServiceNow, documented here: \n<a href=\"https://docs.servicenow.com/integrate/inbound_rest/reference/r_AttachmentAPI-POST.html\" rel=\"nofollow noreferrer\">https://docs.servicenow.com/integrate/inbound_rest/reference/r_AttachmentAPI-POST.html</a></p>\n\n<p>For an application I'm working on, I need to write up some Perl code to handle attachments. Unfortunately, the ServiceNow Perl API libraries do not handle attachments larger than 5mb, so I need to use the stock Attachment API that comes with the instance. </p>\n\n<p>From the above link, I saw this example on how to post files with this python code.</p>\n\n<pre><code>#Need to install requests package for python\n#easy_install requests\nimport requests\n\n# Set the request parameters\nurl = 'https://instance.service-now.com/api/now/attachment/file?table_name=incident&amp;table_sys_id=d71f7935c0a8016700802b64c67c11c6&amp;file_name=Issue_screenshot.jpg'\n\n# Specify the file To send. When specifying fles to send make sure you specify the path to the file, in\n# this example the file was located in the same directory as the python script being executed.\ndata = open('Issue_screenshot.jpg', 'rb').read()\n\n# Eg. User name=\"admin\", Password=\"admin\" for this code sample.\nuser = 'admin'\npwd = 'admin'\n\n# Set proper headers\nheaders = {\"Content-Type\":\"image/jpeg\",\"Accept\":\"application/json\"}\n\n# Do the HTTP request\nresponse = requests.post(url, auth=(user, pwd), headers=headers, data=data)\n\n# Check for HTTP codes other than 201\nif response.status_code != 201: \n    print('Status:', response.status_code, 'Headers:', response.headers, 'Error Response:',response.json())\n    exit()\n\n# Decode the JSON response into a dictionary and use the data\ndata = response.json()\nprint(data)\n</code></pre>\n\n<p>I've used REST::Client a lot for posting, but unfortunately, I can't find a good example on how to handle the above ^^ but in Perl. How does one use REST::Client to post a file like above?  </p>\n\n<p>I've done a temp workaround with this by invoking <code>curl</code> in my scripts, but using REST::Client would be more elegant.</p>\n"}, {"tags": ["arrays", "linux", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1566580122, "post_id": 57630368, "comment_id": 101714650, "body": "Do it all in Perl. There should be far fewer issues and tricks to deal with."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566580346, "post_id": 57630368, "comment_id": 101714747, "body": "@zdim I&#39;m not sure how to do it all in perl so I was just looking for quick linux commands to put together to have things done on the spot since I want to get this figured out by today."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1566580532, "post_id": 57630368, "comment_id": 101714833, "body": "To get lists of files/directories in a directory you can use <code>glob</code> or <code>opendir</code>+<code>readdir</code> ... but you seem to know what filenames to expect -- are those <code>@names</code> really to be hardcoded?"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566580630, "post_id": 57630368, "comment_id": 101714874, "body": "@zdim In my script, I am extracting two columns from a csv file and the first column is pushed into an array and the second column is pushed into another array. However, that part works fine and didn&#39;t seem relevant to my question so I did not include. In the end, I have arrays that are populated like I wrote above, with names from those columns in the excel sheet."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1566581065, "post_id": 57630368, "comment_id": 101715031, "body": "(1) Since you have names then you don&#39;t need <code>glob</code> and such -- just compose filenames to open and edit.  Rename files with <code>move</code> from <code>File::Copy</code>, for instance  (2) &quot;<i>opportunity to get real familiar with linux commands</i>&quot;  -- fair enough :).  I don&#39;t know that it&#39;s the best way though but it&#39;s a worthy purpose :)"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566581283, "post_id": 57630368, "comment_id": 101715108, "body": "@zdim Thanks for the tip! The reason I just used rename is that way I wouldn&#39;t have to add in that extra line to remove the original files after the <code>move</code>. (lazy much) However, my main issue is getting it to replace the instance of the previous name inside the file itself :/ Not the rename of the file."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566581513, "post_id": 57630368, "comment_id": 101715175, "body": "Right, I got that; the question is clear.  (I was just telling you how to do the job in Perl.)  I don&#39;t see what&#39;s wrong with <code>sed</code>-part of pipeline ... it doesn&#39;t get correct filenames from <code>xargs</code>?"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566587137, "post_id": 57630368, "comment_id": 101717076, "body": "@zdim It says there is no input file now for sed. Also it seems I will have to take your advice on doing <code>mv</code> in Perl because using <code>system</code> I cannot do <code>rename</code> with <code>.*</code> file extensions."}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566582892, "post_id": 57630910, "comment_id": 101715702, "body": "From what I understand, first grep is getting all file names that have <code>$old</code>, the second grep is getting contents with $old, then the sed is changing $old in content to $new?"}, {"owner": {"reputation": 759, "user_id": 2002086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oKNub.png?s=128&g=1", "display_name": "Roguebantha", "link": "https://stackoverflow.com/users/2002086/roguebantha"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566582996, "post_id": 57630910, "comment_id": 101715749, "body": "No - other way around. First grep gets all files that have $old in them, the second grep filters to only those FILENAMES that have $old in them, and the xargs sed should be changing all instances of $old in the files to $new."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566586988, "post_id": 57630910, "comment_id": 101717035, "body": "It says sed: no input files, when I do this."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566593714, "post_id": 57630910, "comment_id": 101719171, "body": "Note: I&#39;ve come to find that this is due to an issue with grep itself. I&#39;ll have to debug what&#39;s going on with grep that is failing to find the files."}, {"owner": {"reputation": 759, "user_id": 2002086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oKNub.png?s=128&g=1", "display_name": "Roguebantha", "link": "https://stackoverflow.com/users/2002086/roguebantha"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566675873, "post_id": 57630910, "comment_id": 101733759, "body": "It worked for me fine. It&#39;s possible perl isn&#39;t expanding your command right. Try to execute set -x before running your command, like &quot;set -x &amp;&amp; grep -rl...&quot;"}], "tags": [], "owner": {"reputation": 759, "user_id": 2002086, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/oKNub.png?s=128&g=1", "display_name": "Roguebantha", "link": "https://stackoverflow.com/users/2002086/roguebantha"}, "is_accepted": false, "score": 2, "last_activity_date": 1566582464, "creation_date": 1566582464, "answer_id": 57630910, "question_id": 57630368, "link": "https://stackoverflow.com/questions/57630368/doing-grep-and-sed-in-a-single-command-line/57630910#57630910", "title": "Doing grep and sed in a single command line", "body": "<p>So the issue here is that you're piping a list of filenames into xargs already which get passed to sed. You cannot have sed take the intersection of all filenames that have the desired words in them AND the contents of those files as well. You will need to first find all the files with the desired contents, filter out the filenames you do not care about, THEN feed that list into xargs sed. Try:</p>\n\n<pre><code>system(\"grep -rl $old /myDir/Names/$old/ | grep $old | xargs sed -i 's/$old/$new/g'\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566672770, "post_id": 57634979, "comment_id": 101733213, "body": "So I used data dumper to print the hash %namemap which gives the desired output. However ,when I do a print on $searchname it only prints about 4 of the keys and then the program dies saying no such file or directory at the last line. But when I do <code>print &quot;$_\\n&quot; for keys %namemap;</code> it prints everything out just fine...."}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566673265, "post_id": 57634979, "comment_id": 101733302, "body": "***3 of the keys"}, {"owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566719196, "post_id": 57634979, "comment_id": 101739421, "body": "$searchname doesn&#39;t seem to be each key like it should be. I&#39;ve tried varying the array size and each time, it only takes some of the hash keys for the foreach loop and not the rest so the program dies at <code>rename</code> because that key doesn&#39;t exist (even thought the hash looks perfectly fine when displaying content with data dumper)"}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "reply_to_user": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "edited": false, "score": 0, "creation_date": 1566759939, "post_id": 57634979, "comment_id": 101748388, "body": "Sorry but I don&#39;t understand what you&#39;re trying to say.  If a $searchname doesn&#39;t exist then the rename cannot even be reached.  I&#39;ll update the code with some diagnostics.  If it doesn&#39;t work, post the output showing the error message."}], "tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 0, "last_activity_date": 1566761077, "last_edit_date": 1566761077, "creation_date": 1566619191, "answer_id": 57634979, "question_id": 57630368, "link": "https://stackoverflow.com/questions/57630368/doing-grep-and-sed-in-a-single-command-line/57634979#57634979", "title": "Doing grep and sed in a single command line", "body": "<p>.Hi sfr.  This will do the job although there is no error checking.</p>\n\n<pre><code>#!perl\n\nuse strict;\nuse diagnostics;\nuse File::Glob \"bsd_glob\";\nuse List::MoreUtils \"mesh\";\nuse Data::Dumper \"Dumper\";\nour $basedir = \"/myDir/Names\";\nour @oldnames = qw/John Jack Jill/;\nour @newnames = qw/Mary Nick Joseph/;\nour %namemap = mesh @oldnames, @newnames;\nprintf \"oldnames:%s\\nnewnames: %s\\nnamemap:%s\\n\\n\", map Dumper($_), \\@oldnames, \\@newnames, \\%namemap;\n\nforeach my $searchname (keys %namemap) {\n    print \"searchname: $searchname, glob: $basedir/$searchname/*$searchname*\";\n    my @files = bsd_glob \"$basedir/$searchname/*$searchname*\";\n    printf \"files %s\\n\", Dumper \\@files;\n\n    next unless @files;\n    local $/;\n    foreach my $file (@files) {\n        print \"on file $file\\n\";\n        open my $F, \"+&lt;\", $file or die \"open $file: $!\";\n        my $text = readline $F;\n        print \"changing all $searchname to $namemap{$searchname}\\n\";\n        if (my $c = $text =~ s/\\b$searchname\\b/$namemap{$searchname}/g) {\n            print \"replaced $c occurrences\\n\";\n            seek $F, 0, 0 or die \"seek $file: $!\";\n            print $F $text or die \"print $file: $!\";\n            print \"wrote changes to file\\n\";\n            close $F or die \"closing $file: $!\";\n        }\n        else { print \"file did not contain any $searchname\\n\"; }\n        (my $newfile = $file) =~ s/\\b$searchname\\b/$namemap{$searchname}/g;\n        print \"renaming $file to $newfile\\n\";\n        rename $file, $newfile or die \"rename: $!\";\n    }\n}\n</code></pre>\n\n<p>LA</p>\n\n<p>EDIT: code updated</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1566786692, "post_id": 57644438, "comment_id": 101752674, "body": "Comment on your Perl loop (I use <code>for</code> instead of the more common <code>foreach</code> for brevity here; they are synonyms).  (1) To iterate over array <i>elements</i> you want <code>for my $elem (@ary)</code> (2) If you need to iterate over the <i>index</i>, a nice way is <code>for my $i (0..$#ary)</code>, where <code>$#ary</code> is syntax for the index of the last element.  (3) With a C-style <code>for</code> loop (needed <i>very</i> rarely) it&#39;d be <code>for (my $i = 0; $i &lt; @ary; ++$i)</code>, where we don&#39;t need the array size first since in <code>$i &lt; @ary</code> the array is in the scalar context and then its size is used."}], "tags": [], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "is_accepted": false, "score": 2, "last_activity_date": 1566721916, "creation_date": 1566721916, "answer_id": 57644438, "question_id": 57630368, "link": "https://stackoverflow.com/questions/57630368/doing-grep-and-sed-in-a-single-command-line/57644438#57644438", "title": "Doing grep and sed in a single command line", "body": "<p>I was having issues with grep that I was not able to entirely trace down so I used <code>find</code> instead which seems to do the trick. Here is what I'm using now that works just fine:</p>\n\n<p><code>find ./$old -name \"$old.*\" -exec gsed -i -e \"s/$old/$new/Ig\" {} +</code></p>\n\n<p>Another important issue to note that is not particularly related to the problem in the question is that I am incorrectly using the <code>foreach</code> loop. In order to match each element in the arrays, you have to iterate through the size of the array. </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $i = scalar @firstnames;\nfor ($i=0; $i &lt; @firstnames; $i++){\n.......\n }\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 7484043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c553310d1ad27e031be3aefb8127db4f?s=128&d=identicon&r=PG&f=1", "display_name": "programminglearner", "link": "https://stackoverflow.com/users/7484043/programminglearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1566761077, "creation_date": 1566579332, "last_edit_date": 1566587047, "question_id": 57630368, "link": "https://stackoverflow.com/questions/57630368/doing-grep-and-sed-in-a-single-command-line", "title": "Doing grep and sed in a single command line", "body": "<p>I have written a perl script with two arrays. My first array contains a list of names and my second array contains a list of names that I would like to replace the first names with. </p>\n\n<p>This is a quick and dirty script I'm writing just to get something done so I do not have to do the manual work. It's not something I am focusing on looking \"clean\" or super efficient. For that reason, I'm making use of <code>system</code> a lot.</p>\n\n<p>A sample directory that I am using would look like this:</p>\n\n<blockquote>\n  <p>/myDir/Names/John/ containing files John.log, John.txt, RandomFile.html</p>\n</blockquote>\n\n<p>John.log</p>\n\n<pre><code>John is an engineer.\nJack and John are friends.\n</code></pre>\n\n<p>John.txt</p>\n\n<pre><code>John is 48 years old. \n</code></pre>\n\n<p>where John is an element in my first array. I want to be able to replace John with, for example, Mary from my second array IN FILES THAT CONTAIN JOHN IN THE FILE NAME. I want the element of that array to change to the corresponding element number in the next array. Here is what I've come up with:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy @firstnames = (John, Jack, Jill);\nmy @secondnames = (Mary, Nick, Joseph);\n\nforeach my $old (@firstnames){\n    foreach my $new (@secondnames){\n         system(\"grep -rl $old /myDir/Names/$old/ | xargs sed -i 's/$old/$new/g' $old.* \");\n        system(\"rename '$old' '$new' /myDir/Names/$old.*\");\n     }\n}\n</code></pre>\n\n<p>Grep seems to work fine, Rename and Sed does not because of the '.*'. The issue is where I have <code>$old.*</code>. It appropriately substitutes $old with the correct element in the array but it looks for files called <code>John.*</code>, <code>Jack.*</code>, <code>Jill.*</code> instead of reading <code>.*</code> as any file extension. Clearly, I am not understanding how sed works entirely. I would like some help as to how I can do the sed command for all files containing <code>$old</code> wit ANY file extension, because there might be multiple files in the directories with same names and different extensions. The reason I specify the first name with any extension is because the file might contain something like <code>RandomFile.html</code> that I listed above and I only want files that contain <code>$old</code> before extension. </p>\n\n<p>This is the output that I want, where the files names along with the words found in the text will be replaced with the corresponding element from the second array:</p>\n\n<p>Mary.log</p>\n\n<pre><code>Mary is an engineer.\nJack and Mary are friends.\n</code></pre>\n\n<p>Mary.txt</p>\n\n<pre><code>Mary is 48 years old. \n</code></pre>\n\n<p>Note: The words that are in the file, match the name of the file they are in, which match the name of the directory they are in. That is the pattern of these Directories and their files. </p>\n\n<p>Please let me know if anything is unclear and I will edit my post.</p>\n"}, {"tags": ["mysql", "perl", "gzip"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566561323, "post_id": 57625550, "comment_id": 101705138, "body": "Please add <code>use autodie;</code> to check for failed syscalls, it reveals more information."}, {"owner": {"reputation": 2021, "user_id": 4500798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a935dafe246dd0e2c216542f50073cbe?s=128&d=identicon&r=PG", "display_name": "Stephen Kitt", "link": "https://stackoverflow.com/users/4500798/stephen-kitt"}, "edited": false, "score": 0, "creation_date": 1566561869, "post_id": 57625550, "comment_id": 101705409, "body": "Both variants work fine for me (on Fedora 29)."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 2021, "user_id": 4500798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a935dafe246dd0e2c216542f50073cbe?s=128&d=identicon&r=PG", "display_name": "Stephen Kitt", "link": "https://stackoverflow.com/users/4500798/stephen-kitt"}, "edited": false, "score": 0, "creation_date": 1566562370, "post_id": 57625550, "comment_id": 101705680, "body": "@StephenKitt oh wow. Yes, both work fine for me on my Arch system (<code>perl 5, version 30, subversion 0 (v5.30.0)</code>) and an Ubuntu system with <code>perl 5, version 26, subversion 1 (v5.26.1)</code>, but fail on two Ubuntu machines with (<code>perl 5, version 22, subversion 1 (v5.22.1)</code>. So I guess it was a weird bug that has since been fixed. Thanks!"}, {"owner": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1566562697, "post_id": 57625550, "comment_id": 101705841, "body": "(probably) Unrelated: Note also that you are opening <code>$filehandle</code>, but closing <code>$ff</code>. In the first piece of code, you also have no <code>my</code> in front of <code>$filehandle</code>."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566562699, "post_id": 57625550, "comment_id": 101705842, "body": "No, it&#39;s not the Perl version. Fails for me as described above. perl 5.30.0 DBI 1.642 DBD::mysql 4.050 libmariadb-devel 3.1.2 gzip 1.10"}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 12533, "user_id": 931027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lWhaB.jpg?s=128&g=1", "display_name": "Kusalananda", "link": "https://stackoverflow.com/users/931027/kusalananda"}, "edited": false, "score": 0, "creation_date": 1566562826, "post_id": 57625550, "comment_id": 101705906, "body": "@Kusalananda thanks. I was using a rough and ready version while testing but wanted a clean one here, so I added the stricter code but not carefully enough :) Neither of those is absolutely needed so I sometimes skip them when testing. Fixed now though, thanks."}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566562933, "post_id": 57625550, "comment_id": 101705962, "body": "@daxim oh. Interesting. I tried it on two other machines, with perl 5.30 (Arch) and perl 5.26 (Ubuntu) and it worked fine there. How do you check the versions of the packages like DBI? Presumably the difference will be there."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566563045, "post_id": 57625550, "comment_id": 101706024, "body": "<code>perl -mDBI -mDBD::mysql -E&#39;say DBI-&gt;VERSION; say DBD::mysql-&gt;VERSION&#39;</code>"}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1566563732, "post_id": 57625550, "comment_id": 101706408, "body": "@daxim Thanks. I added the versions to my answer below. I&#39;m really surprised that it fails for you with what looks like the same basic versions."}], "answers": [{"comments": [{"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "edited": false, "score": 1, "creation_date": 1566561875, "post_id": 57625860, "comment_id": 101705411, "body": "But why would it only have an issue when running with the unrelated DBI code and work fine without it?"}, {"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "edited": false, "score": 0, "creation_date": 1566562589, "post_id": 57625860, "comment_id": 101705794, "body": "Thanks, but it turns out it was a bug in the version I was using which has now been fixed. D&#39;oh!"}, {"owner": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "reply_to_user": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "edited": false, "score": 0, "creation_date": 1566567474, "post_id": 57625860, "comment_id": 101708453, "body": "Good to know. Could you add some info about the bad version, so that this won&#39;t leave others wondering?"}], "tags": [], "owner": {"reputation": 901, "user_id": 11953465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0a6079c8e80378148270b68e99c31c?s=128&d=identicon&r=PG&f=1", "display_name": "g_bor", "link": "https://stackoverflow.com/users/11953465/g-bor"}, "is_accepted": false, "score": 1, "last_activity_date": 1566561293, "creation_date": 1566561293, "answer_id": 57625860, "question_id": 57625550, "link": "https://stackoverflow.com/questions/57625550/perl-gives-gzip-stdout-broken-pipe-error-when-opening-gzipped-files-but-onl/57625860#57625860", "title": "Perl gives &quot;gzip: stdout: Broken pipe&quot; error when opening gzipped files, but only if connecting to a DB", "body": "<p>Most probably the following is happening:\ngzip tries to write to the pipe, the program on your side is not reading up to eof, the closes the pipe. Gzip then receives a SIGPIPE, and dies with this error message. Can you confirm that this is taking place?</p>\n"}, {"comments": [{"owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "edited": false, "score": 0, "creation_date": 1566567538, "post_id": 57626530, "comment_id": 101708498, "body": "On my Arch (see question for versions) I cannot reproduce it even when using <code>$SIG{PIPE} = &#39;IGNORE&#39;;</code>. On the machines where it fails, however, <code>$SIG{PIPE} = &#39;IGNORE&#39;;</code> is indeed sufficient to reproduce. So, given that the gzip versions are the same and I can reproduce without the DBI code, it looks like it is indeed a perl version thing."}], "tags": [], "owner": {"reputation": 45599, "user_id": 27727, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05b48b72766177b3b0a6ff4afdb70790?s=128&d=identicon&r=PG", "display_name": "derobert", "link": "https://stackoverflow.com/users/27727/derobert"}, "is_accepted": true, "score": 3, "last_activity_date": 1566567240, "last_edit_date": 1566567240, "creation_date": 1566563959, "answer_id": 57626530, "question_id": 57625550, "link": "https://stackoverflow.com/questions/57625550/perl-gives-gzip-stdout-broken-pipe-error-when-opening-gzipped-files-but-onl/57626530#57626530", "title": "Perl gives &quot;gzip: stdout: Broken pipe&quot; error when opening gzipped files, but only if connecting to a DB", "body": "<p>At least here, it appears that the MySQL libraries (probably) are masking (ignoring) SIGPIPE, and that's what you're seeing. Comparing strace outputs, I see a line like this in the MySQL run:</p>\n\n<pre><code>rt_sigaction(SIGPIPE, {sa_handler=SIG_IGN, sa_mask=[PIPE], sa_flags=SA_RESTORER|SA_RESTART, sa_restorer=0x7f78bdf16840}, {sa_handler=SIG_DFL, sa_mask=[], sa_flags=0}, 8) = 0\n</code></pre>\n\n<p>And it turns out you can duplicate the behavior easily w/o MySQL:</p>\n\n<pre><code>$SIG{PIPE} = 'IGNORE';\n\nopen (my $fileHandle, \"-|\", \"/bin/zcat $ARGV[0]\");\nmy $ff = &lt;$fileHandle&gt;;\nclose($ff);\n</code></pre>\n\n<p>Or, alternatively, you can reset the signal to the default handler to make the message go away, even after connecting to MySQL by setting it to <code>DEFAULT</code> instead of <code>IGNORE</code>.</p>\n\n<p>This is, by the way, <a href=\"https://dev.mysql.com/doc/refman/5.5/en/c-api-threaded-clients.html\" rel=\"nofollow noreferrer\">documented behavior of the MySQL library</a>:</p>\n\n<blockquote>\n  <p>To avoid aborting the program when a connection terminates, MySQL blocks SIGPIPE on the first call to mysql_library_init(), mysql_init(), or mysql_connect().</p>\n</blockquote>\n\n<p>(It may also depend on the gzip version; maybe some versions of gzip set up signal handlers on init.)</p>\n\n<p>Ultimately, what you're seeing is that if gzip gets a SIGPIPE, it just exits. If it gets an error back from write (because SIGPIPE is ignored), it prints an error message.</p>\n"}], "owner": {"reputation": 2792, "user_id": 1081936, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/B5cTn.png?s=128&g=1", "display_name": "terdon", "link": "https://stackoverflow.com/users/1081936/terdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2027, "favorite_count": 0, "accepted_answer_id": 57626530, "answer_count": 2, "score": 2, "last_activity_date": 1566567240, "creation_date": 1566560113, "last_edit_date": 1566567163, "question_id": 57625550, "link": "https://stackoverflow.com/questions/57625550/perl-gives-gzip-stdout-broken-pipe-error-when-opening-gzipped-files-but-onl", "title": "Perl gives &quot;gzip: stdout: Broken pipe&quot; error when opening gzipped files, but only if connecting to a DB", "body": "<p>Consider the following program, running on a Linux machine, which opens a gzipped input file:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\n\nopen (my $fileHandle, \"-|\", \"/bin/zcat $ARGV[0]\");\nmy $ff = &lt;$fileHandle&gt;;\nclose($fileHandle);\n</code></pre>\n\n<p>That works as expected (it does nothing, but prints no error):</p>\n\n<pre><code>$ bar.pl file.gz\n$\n</code></pre>\n\n<p>Now, if I use the same code but previously connect to a MySQL database, gzip will complain (you can run the code directly, this is an open DB and the credentials will work):</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#!/usr/bin/env perl\nuse DBI;\nuse strict;\nuse warnings;\n\nmy $dsn = \"DBI:mysql:database=hg19;host=genome-mysql.cse.ucsc.edu\";\nmy $db =  DBI-&gt;connect($dsn, 'genomep', 'password');\nmy $dbResults = $db-&gt;prepare(\"show tables\");\nmy $ret = $dbResults-&gt;execute();\n$dbResults-&gt;finish();\n$db-&gt;disconnect();\n\nopen (my $fileHandle, \"-|\", \"/bin/zcat $ARGV[0]\");\nmy $ff = &lt;$fileHandle&gt;;\nclose($ff);\n</code></pre>\n\n<p>Running the above gives:</p>\n\n<pre><code>$ foo.pl file.gz \n\ngzip: stdout: Broken pipe\n</code></pre>\n\n<p>This is obviously part of a much more complicated program, but I've managed to trim it down to this silly snippet that reproduces the issue. </p>\n\n<p>What's going on? Why does connecting to a DB affect how gzip behaves? Note that everything seems to work (in the actual program, I do something useful with the gzipped data) but why am I getting that error message?</p>\n\n<hr>\n\n<p>It turns out this behavior is specific to (slightly) older versions of Perl and/or DBI. On the machines where it failed, I have:</p>\n\n<ul>\n<li>Ubuntu</li>\n<li>Perl 5, version 22, subversion 1 (v5.22.1) built for x86_64-linux-gnu-thread-multi</li>\n<li>DBI 1.634</li>\n<li>DBD 4.033</li>\n<li>gzip 1.6</li>\n</ul>\n\n<p>However, on another two machines it did work. These had:</p>\n\n<ul>\n<li>Ubuntu</li>\n<li>Perl 5, version 26, subversion 1 (v5.26.1) built for x86_64-linux-gnu-thread-multi</li>\n<li>DBI 1.640</li>\n<li>DBD 4.033</li>\n<li>gzip 1.6</li>\n</ul>\n\n<p>And</p>\n\n<ul>\n<li>Arch Linux</li>\n<li>Perl 5, version 30, subversion 0 (v5.30.0) built for x86_64-linux-thread-multi</li>\n<li>DBI 1.642</li>\n<li>DBD 4.050</li>\n<li>gzip 1.10</li>\n</ul>\n"}, {"tags": ["python", "bash", "csv", "perl", "awk"], "comments": [{"owner": {"reputation": 5003, "user_id": 2255764, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/cc0cafd47f0ac53d13c4ddf9f6e0235c?s=128&d=identicon&r=PG", "display_name": "Alderven", "link": "https://stackoverflow.com/users/2255764/alderven"}, "edited": false, "score": 1, "creation_date": 1566558643, "post_id": 57624956, "comment_id": 101703774, "body": "Can you please explain transformation rules, e.g. for <code>402</code> to <code>5</code>?"}, {"owner": {"reputation": 1, "user_id": 10248678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JpnLA.jpg?s=128&g=1", "display_name": "oguz ismail", "link": "https://stackoverflow.com/users/10248678/oguz-ismail"}, "edited": false, "score": 1, "creation_date": 1566558656, "post_id": 57624956, "comment_id": 101703785, "body": "What is that <code>($0=522)</code> supposed to be? It&#39;s a typo right?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1566559374, "post_id": 57624956, "comment_id": 101704172, "body": "21986 is a typo for 12986"}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 1, "creation_date": 1566561097, "post_id": 57624956, "comment_id": 101705027, "body": "I&#39;d be more conscientious in eliminating <a href=\"https://unix.stackexchange.com/a/536976/74329\">that mistake</a>."}, {"owner": {"reputation": 89, "user_id": 11872873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y5y0RAxBRmA/AAAAAAAAAAI/AAAAAAAAAB4/hW_MWdxAAnI/photo.jpg?sz=128", "display_name": "Weiss Willy", "link": "https://stackoverflow.com/users/11872873/weiss-willy"}, "edited": false, "score": 0, "creation_date": 1566563599, "post_id": 57624956, "comment_id": 101706330, "body": "thanks, just notice it. Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 2, "last_activity_date": 1566559395, "last_edit_date": 1566559395, "creation_date": 1566559046, "answer_id": 57625267, "question_id": 57624956, "link": "https://stackoverflow.com/questions/57624956/indexing-values-from-file/57625267#57625267", "title": "Indexing values from file", "body": "<p>Run with <code>perl so-57624956.pl &lt; fileA</code></p>\n\n<pre><code>use 5.010;\nuse Set::IntSpan::Fast::XS qw();\nmy @intspans = map {\n    Set::IntSpan::Fast::XS-&gt;new($_)\n} (\n    '363-499,4645-4646',\n    '2174-2193',\n    '500,12308-12356',\n    '103-220,252-299,1980-1986,2921-2922',\n    '221-251,8085-8091,8350,12809-12945,16834-17033',\n    '300-362,522,2923-2925,3441-3442,4644,5677-5695,'\n    . '8082-8083,8093-8349,12946-12947,12986-13215,13309-13311',\n);\nwhile (&lt;&gt;) {\n    while (my ($index, $intspan) = each @intspans) {\n        say $index if $intspan-&gt;contains($_);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1898, "user_id": 10911932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iZ5XI.gif?s=128&g=1", "display_name": "j23", "link": "https://stackoverflow.com/users/10911932/j23"}, "is_accepted": true, "score": 2, "last_activity_date": 1566560562, "last_edit_date": 1566560562, "creation_date": 1566560131, "answer_id": 57625554, "question_id": 57624956, "link": "https://stackoverflow.com/questions/57624956/indexing-values-from-file/57625554#57625554", "title": "Indexing values from file", "body": "<p>What was the issue with the awk script? Here is the awk one liner with the ranges you specified and it works as expected.</p>\n\n<pre><code>awk '{ if( ($1&gt;=363 &amp;&amp; $1&lt;=499) || ($1&gt;=4645 &amp;&amp; $1&lt;=4646)){ print 0}  \nelse if( ($1&gt;=2174 &amp;&amp; $1&lt;=2193)) { print 1}  \nelse if( ($1==500) || ($1&gt;=12308 &amp;&amp; $1&lt;=12356)){ print 2} \nelse if( ($1&gt;=103 &amp;&amp; $1&lt;=220) || ($1&gt;=252 &amp;&amp; $1&lt;=299) || ($1&gt;=1980 &amp;&amp; $1&lt;=1986) || ($1&gt;=2921 &amp;&amp; $1&lt;=2922)){ print 3} \nelse if( ($1&gt;=221 &amp;&amp; $1&lt;=251) || ($1&gt;=8085 &amp;&amp; $1&lt;=8091) || ($1==8350) || ($1&gt;=12809 &amp;&amp; $1&lt;=12945) || ($1&gt;=16834 &amp;&amp; $1&lt;=17033)){ print 4} \nelse if( ($1&gt;=300 &amp;&amp; $1&lt;=362) || ($1=522) || ($1&gt;=2923 &amp;&amp; $1&lt;=2925) || ($1&gt;=3441 &amp;&amp; $1&lt;=3442) || ($1=4644)|| ($1&gt;=5677 &amp;&amp; $1&lt;=5695) || ($1&gt;=8082 &amp;&amp; $1&lt;=8083)|| ($1&gt;=8093 &amp;&amp; $1&lt;=8349) || ($1&gt;=12946 &amp;&amp; $1&lt;=12947) || ($1&gt;=21986 &amp;&amp; $1&lt;=13215) || ($1&gt;=13309 &amp;&amp; $1&lt;=13311)){ print 5}\n}' tmp &gt; tmp2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 11872873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y5y0RAxBRmA/AAAAAAAAAAI/AAAAAAAAAB4/hW_MWdxAAnI/photo.jpg?sz=128", "display_name": "Weiss Willy", "link": "https://stackoverflow.com/users/11872873/weiss-willy"}, "is_accepted": false, "score": -1, "last_activity_date": 1566563471, "creation_date": 1566563471, "answer_id": 57626386, "question_id": 57624956, "link": "https://stackoverflow.com/questions/57624956/indexing-values-from-file/57626386#57626386", "title": "Indexing values from file", "body": "<p>THANK YOU J23. You just save my job. If you ever visit London, say something, I own you a beer. \nSo, I solved the problem by your instructions, just by adding my rest of values. \nOne simple thing give me some trouble but it was easy to fix (no complain or anything).</p>\n\n<pre><code>($1=522)\n</code></pre>\n\n<p>must be </p>\n\n<pre><code>($1==522)\n</code></pre>\n\n<p>Now, if somebody will ever need to do something similar with my task, to monitor a csv and change data accordingly by adding an index to some values, just do what I did with the help of this community. </p>\n\n<pre><code>##print out your column from the target file. Just replace \"NR\" with your column number\ncsvtool col \"NR\" /path.to/the/file.csv &gt;tmp \n## Use AWK to look for the range and then act accordingly by replacing your value with the correct index. \nawk '{ \nif( ($1&gt;=363 &amp;&amp; $1&lt;=499) || ($1&gt;=4645 &amp;&amp; $1&lt;=4646)){ print 0}  \nelse if( ($1&gt;=2174 &amp;&amp; $1&lt;=2193)) { print 1}  \nelse if( ($1==500) || ($1&gt;=12308 &amp;&amp; $1&lt;=12356)){ print 2} \nelse if( ($1&gt;=103 &amp;&amp; $1&lt;=220) || ($1&gt;=252 &amp;&amp; $1&lt;=299) || ($1&gt;=1980 &amp;&amp; $1&lt;=1986) || ($1&gt;=2921 &amp;&amp; $1&lt;=2922)){ print 3} \nelse if( ($1&gt;=221 &amp;&amp; $1&lt;=251) || ($1&gt;=8085 &amp;&amp; $1&lt;=8091) || ($1==8350) || ($1&gt;=12809 &amp;&amp; $1&lt;=12945) || ($1&gt;=16834 &amp;&amp; $1&lt;=17033)){ print 4} \nelse if( ($1&gt;=300 &amp;&amp; $1&lt;=362) || ($1==522) || ($1&gt;=2923 &amp;&amp; $1&lt;=2925) || ($1&gt;=3441 &amp;&amp; $1&lt;=3442) || ($1==4644)|| ($1&gt;=5677 &amp;&amp; $1&lt;=5695) || ($1&gt;=8082 &amp;&amp; $1&lt;=8083)|| ($1&gt;=8093 &amp;&amp; $1&lt;=8349) || ($1&gt;=12946 &amp;&amp; $1&lt;=12947) || ($1&gt;=21986 &amp;&amp; $1&lt;=13215) || ($1&gt;=13309 &amp;&amp; $1&lt;=13311)){ print 5}\nelse if( ($1&gt;=501 &amp;&amp; $1&lt;=504) || ($1&gt;=566 &amp;&amp; $1&lt;=600) || ($1&gt;=613 &amp;&amp; $1&lt;=637) ||  ($1&gt;=2015 &amp;&amp; $1&lt;=2040) ||  ($1&gt;=2103 &amp;&amp; $1&lt;=2126) || ($1&gt;=2373 &amp;&amp; $1&lt;=2374) || ($1&gt;=3828 &amp;&amp; $1&lt;=4125) || ($1&gt;=4237 &amp;&amp; $1&lt;=4636) || ($1&gt;=4647 &amp;&amp; $1&lt;=4889) || ($1&gt;=4991 &amp;&amp; $1&lt;=5676) || ($1&gt;=5696 &amp;&amp; $1&lt;=5705) || ($1&gt;=6502 &amp;&amp; $1&lt;=6595) || ($1&gt;=8429 &amp;&amp; $1&lt;=8460) || ($1&gt;=8552 &amp;&amp; $1&lt;=8699) || ($1&gt;=10487 &amp;&amp; $1&lt;=10977) || ($1&gt;=11326 &amp;&amp; $1&lt;=11617) || ($1&gt;=11688 &amp;&amp; $1&lt;=11815) || ($1&gt;=11844 &amp;&amp; $1&lt;=11938) || ($1&gt;=12490 &amp;&amp; $1&lt;=12597) || ($1&gt;=12973 &amp;&amp; $1&lt;=12982) || ($1&gt;=13367 &amp;&amp; $1&lt;=13414)){ print 6}\nelse if( ($1&gt;=523 &amp;&amp; $1&lt;=548) || ($1&gt;=555 &amp;&amp; $1&lt;=565) || ($1&gt;=2005 &amp;&amp; $1&lt;=2014) || ($1&gt;=2041 &amp;&amp; $1&lt;=2063) || ($1&gt;=2091 &amp;&amp; $1&lt;=2102) ||  ($1==2394) || ($1&gt;=2407 &amp;&amp; $1&lt;=2411) || ($1&gt;=2926 &amp;&amp; $1&lt;=3008) || ($1&gt;=3443 &amp;&amp; $1&lt;=3473) || ($1&gt;=3486 &amp;&amp; $1&lt;=3813) || ($1&gt;=4132 &amp;&amp; $1&lt;=4144) || ($1&gt;=4637 &amp;&amp; $1&lt;=4643) || ($1&gt;=4916 &amp;&amp; $1&lt;=4981) || ($1&gt;=5711 &amp;&amp; $1&lt;=5741) || ($1&gt;=6403 &amp;&amp; $1&lt;=6405) || ($1&gt;=6415 &amp;&amp; $1&lt;=6466) || ($1&gt;=6701 &amp;&amp; $1&lt;=7002) || ($1&gt;=7035 &amp;&amp; $1&lt;=7048) || ($1&gt;=8426 &amp;&amp; $1&lt;=8428) || ($1&gt;=8496 &amp;&amp; $1&lt;=8541) || ($1&gt;=8857 &amp;&amp; $1&lt;=9323) || ($1&gt;=9429 &amp;&amp; $1&lt;=9618) || ($1&gt;=9674 &amp;&amp; $1&lt;=9789) || ($1&gt;=9802 &amp;&amp; $1&lt;=9811) || ($1&gt;=9850 &amp;&amp; $1&lt;=10009) || ($1&gt;=10131 &amp;&amp; $1&lt;=10136) || ($1&gt;=10396 &amp;&amp; $1&lt;=10402) || ($1&gt;=11000 &amp;&amp; $1&lt;=11175) || ($1==11618) || ($1&gt;=12100 &amp;&amp; $1&lt;=12111) || ($1&gt;=12212 &amp;&amp; $1&lt;=12219) || ($1==12489) || ($1&gt;=12807 &amp;&amp; $1&lt;=12808) || ($1==12983) || ($1&gt;=14616 &amp;&amp; $1&lt;=14627) || ($1&gt;=15723 &amp;&amp; $1&lt;=15897)){ print 7}\nelse if( ($1==521) || ($1==554) || ($1&gt;=601 &amp;&amp; $1&lt;=612) || ($1&gt;=651 &amp;&amp; $1&lt;=708) || ($1&gt;=1905 &amp;&amp; $1&lt;=1942) || ($1&gt;=1949 &amp;&amp; $1&lt;=1979) || ($1&gt;=1987 &amp;&amp; $1&lt;=1993) || ($1&gt;=2259 &amp;&amp; $1&lt;=2278) || ($1&gt;=2352 &amp;&amp; $1&lt;=2362) || ($1&gt;=2395 &amp;&amp; $1&lt;=2406) || ($1&gt;=2412 &amp;&amp; $1&lt;=2449) || ($1&gt;=2673 &amp;&amp; $1&lt;=2919) || ($1&gt;=3009 &amp;&amp; $1&lt;=3016) || ($1&gt;=3814 &amp;&amp; $1&lt;=3827) || ($1&gt;=4126 &amp;&amp; $1&lt;=4131) || ($1&gt;=4982 &amp;&amp; $1&lt;=4990) || ($1&gt;=5706 &amp;&amp; $1&lt;=5710) || ($1&gt;=6012 &amp;&amp; $1&lt;=6181) || ($1&gt;=6285 &amp;&amp; $1&lt;=6339) || ($1&gt;=6409 &amp;&amp; $1&lt;=6411) || ($1&gt;=6596 &amp;&amp; $1&lt;=6700) || ($1&gt;=7191 &amp;&amp; $1&lt;=7424) || ($1==8081) || ($1&gt;=8550 &amp;&amp; $1&lt;=8551) || ($1&gt;=8700 &amp;&amp; $1&lt;=8716) || ($1&gt;=9324 &amp;&amp; $1&lt;=9326) || ($1&gt;=9619 &amp;&amp; $1&lt;=9624) || ($1==9729) || ($1&gt;=10018 &amp;&amp; $1&lt;=10064) || ($1&gt;=10115 &amp;&amp; $1&lt;=10126) || ($1&gt;=10198 &amp;&amp; $1&lt;=10386) || ($1==10486) || ($1&gt;=12112 &amp;&amp; $1&lt;=12115) || ($1&gt;=12209 &amp;&amp; $1&lt;=12211)){ print 8}\nelse if( ($1&gt;=489 &amp;&amp; $1&lt;=498) || ($1&gt;=505 &amp;&amp; $1&lt;=520) || ($1&gt;=549 &amp;&amp; $1&lt;=553) || ($1&gt;=638 &amp;&amp; $1&lt;=650) || ($1&gt;=709 &amp;&amp; $1&lt;=1904) || ($1&gt;=1943 &amp;&amp; $1&lt;=1948) || ($1&gt;=1994 &amp;&amp; $1&lt;=2004) || ($1&gt;=2064 &amp;&amp; $1&lt;=2090) || ($1&gt;=2127 &amp;&amp; $1&lt;=2173) || ($1&gt;=2194 &amp;&amp; $1&lt;=2258) || ($1&gt;=2279 &amp;&amp; $1&lt;=2351) || ($1&gt;=2363 &amp;&amp; $1&lt;=2372) || ($1==2393) || ($1&gt;=2450 &amp;&amp; $1&lt;=2672) || ($1&gt;=3474 &amp;&amp; $1&lt;=3485) || ($1&gt;=4145 &amp;&amp; $1&lt;=4236) || ($1&gt;=4890 &amp;&amp; $1&lt;=4915) || ($1&gt;=5742 &amp;&amp; $1&lt;=6011) || ($1&gt;=7003 &amp;&amp; $1&lt;=7034) || ($1&gt;=7049 &amp;&amp; $1&lt;=7295) || ($1&gt;=7425 &amp;&amp; $1&lt;=8080) || ($1==8084) || ($1&gt;=8352 &amp;&amp; $1&lt;=8425) || ($1&gt;=8461 &amp;&amp; $1&lt;=8495) || ($1&gt;=8542 &amp;&amp; $1&lt;=8549) || ($1&gt;=8717 &amp;&amp; $1&lt;=8856) || ($1&gt;=9327 &amp;&amp; $1&lt;=9428) || ($1&gt;=9625 &amp;&amp; $1&lt;=9673) || ($1&gt;=9790 &amp;&amp; $1&lt;=9791) || ($1&gt;=9793 &amp;&amp; $1&lt;=9801) || ($1&gt;=9812 &amp;&amp; $1&lt;=9849) || ($1&gt;=10010 &amp;&amp; $1&lt;=10017) || ($1&gt;=10065 &amp;&amp; $1&lt;=10114) || ($1&gt;=10128 &amp;&amp; $1&lt;=10130) || ($1&gt;=10137 &amp;&amp; $1&lt;=10197) || ($1&gt;=10387 &amp;&amp; $1&lt;=10395) || ($1&gt;=10403 &amp;&amp; $1&lt;=10485) || ($1&gt;=10978 &amp;&amp; $1&lt;=10999) || ($1&gt;=11176 &amp;&amp; $1&lt;=11325) || ($1&gt;=11620 &amp;&amp; $1&lt;=11687) || ($1&gt;=11816 &amp;&amp; $1&lt;=11843) || ($1&gt;=11939 &amp;&amp; $1&lt;=12099) || ($1&gt;=12116 &amp;&amp; $1&lt;=12208) || ($1&gt;=12220 &amp;&amp; $1&lt;=12307) || ($1&gt;=12357 &amp;&amp; $1&lt;=12488) || ($1&gt;=12598 &amp;&amp; $1&lt;=12806) || ($1&gt;=12948 &amp;&amp; $1&lt;=12972) || ($1&gt;=13216 &amp;&amp; $1&lt;=13306) || ($1&gt;=13312 &amp;&amp; $1&lt;=13366) || ($1&gt;=13415 &amp;&amp; $1&lt;=14615) || ($1&gt;=14628 &amp;&amp; $1&lt;=15722) || ($1&gt;=15989 &amp;&amp; $1&lt;=16833) || ($1&gt;=17402 &amp;&amp; $1&lt;=17431)){ print 9}\n}' tmp &gt; tmp2\n</code></pre>\n\n<p>Now you got all your correct data in a separate file. Just <code>paste</code> it where you need it and remove it after.\nThank you once again to the community.</p>\n"}], "owner": {"reputation": 89, "user_id": 11872873, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-y5y0RAxBRmA/AAAAAAAAAAI/AAAAAAAAAB4/hW_MWdxAAnI/photo.jpg?sz=128", "display_name": "Weiss Willy", "link": "https://stackoverflow.com/users/11872873/weiss-willy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 57625554, "answer_count": 3, "score": 1, "last_activity_date": 1566626994, "creation_date": 1566557928, "last_edit_date": 1566626994, "question_id": 57624956, "link": "https://stackoverflow.com/questions/57624956/indexing-values-from-file", "title": "Indexing values from file", "body": "<p>I'm desperately trying to achieve a task from work and i just can not figure it out.</p>\n\n<p>Short brief: I must monitor a file, which produce some values. I manage to isolate the values into a separate file and I'm string to allocate an index for each value.</p>\n\n<p>Description:</p>\n\n<p>My given file (file A) will look like below, but with more then 10000 entries:</p>\n\n<pre><code>402\n506\n223\n123\n5667\n17430\n9921\n9232\n</code></pre>\n\n<p>All the values inside are basically integers numbers with a range between 103 and 17431. For each individual number from File A i must allocate an index value from 0 to 9. \nMy first approach was to use <code>sed</code> in order to literately replace each string from file A with the given value of its specific index, but is taking too long for my large file. \nAnother approach which was recommended to me was to use <code>awk</code> but I fail with that as well. My script was looking like this:</p>\n\n<pre><code>awk '($0&gt;=363 &amp;&amp; $0&lt;=499) || ($0&gt;=4645 &amp;&amp; $0&lt;=4646) {$0=\"0\"}1' tmp &gt;tmp2\n\nawk '($0&gt;=2174 &amp;&amp; $0&lt;=2193)  {$0=\"1\"}1' tmp &gt;tmp2\n\nawk '($0==500) || ($0&gt;=12308 &amp;&amp; $0&lt;=12356) {$0=\"2\"}1' tmp &gt;tmp2\n\nawk '($0&gt;=103 &amp;&amp; $0&lt;=220) || ($0&gt;=252 &amp;&amp; $0&lt;=299) || ($0&gt;=1980 &amp;&amp; $0&lt;=1986) || ($0&gt;=2921 &amp;&amp; $0&lt;=2922) {$0=\"3\"}1' tmp &gt;priority\n\nawk '($0&gt;=221 &amp;&amp; $0&lt;=251) || ($0&gt;=8085 &amp;&amp; $0&lt;=8091) || ($0==8350) || ($0&gt;=12809 &amp;&amp; $0&lt;=12945) || ($0&gt;=16834 &amp;&amp; $0&lt;=17033)  {$0=\"4\"}1' tmp &gt;tmp2\n\nawk '($0&gt;=300 &amp;&amp; $0&lt;=362) || ($0=522) || ($0&gt;=2923 &amp;&amp; $0&lt;=2925) || ($0&gt;=3441 &amp;&amp; $0&lt;=3442) || ($0=4644)|| ($0&gt;=5677 &amp;&amp; $0&lt;=5695) || ($0&gt;=8082 &amp;&amp; $0&lt;=8083)|| ($0&gt;=8093 &amp;&amp; $0&lt;=8349) || ($0&gt;=12946 &amp;&amp; $0&lt;=12947) || ($0&gt;=21986 &amp;&amp; $0&lt;=13215) || ($0&gt;=13309 &amp;&amp; $0&lt;=13311)  {$0=\"5\"}1' tmp &gt;tmp2\n</code></pre>\n\n<p>I was hoping for an output like:</p>\n\n<pre><code>5\n3\n3\n2\n1\n6\n7\n7\n</code></pre>\n\n<p>Is not happening. I declare the ranges for each index and I try to replace each value accordingly but is not working. I<code>m trying to take a</code>for loop<code>or an</code>if/else<code>approach but i do not know how just because I</code>m new to this. \nIf somebody can help me with some syntax that will help me?\nI was trying to write something similar with:</p>\n\n<pre><code>x=value from file list.csv\nfor x in rage1 or range2 or range3 \n replace x with 0\nfor x in range 3 or range 4 or range 5\n replace x with 1\n\nOR an if/else approach\n\nx=values from list.csv\nif x in range1 or range2 or range3 \n  then replace x with 0\nelse if x in range4 range5 range6\n  then replace x with 1\n</code></pre>\n\n<p>Can somebody help me with this? I'm trying to make it in every way that I can (bash ,pearl,python...) so any idea is welcome as long as is a bit explained, as I say I`m new to this. Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "edited": false, "score": 0, "creation_date": 1566555693, "post_id": 57623928, "comment_id": 101702273, "body": "you just want to remove the last comma ?"}, {"owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "reply_to_user": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "edited": false, "score": 0, "creation_date": 1566556179, "post_id": 57623928, "comment_id": 101702513, "body": "@xiawi Yes, that&#39;s enough, or even removing of first line comma is also enough instead of all lines like :: S.NO,NAME,S1,S2,S3,S4,S5"}, {"owner": {"reputation": 1640, "user_id": 3871961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15d1352dc24db7622120ce9b523a2b96?s=128&d=identicon&r=PG&f=1", "display_name": "xiawi", "link": "https://stackoverflow.com/users/3871961/xiawi"}, "edited": false, "score": 0, "creation_date": 1566560029, "post_id": 57623928, "comment_id": 101704518, "body": "Is it necessary to use <code>perl</code> or are you open to a simpler solution with bash commands ?"}, {"owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "edited": false, "score": 1, "creation_date": 1566565378, "post_id": 57623928, "comment_id": 101707234, "body": "Perl IS a bash command! perl -npe &quot;s/,$//&quot; file.csv &gt; new.csv"}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "edited": false, "score": 0, "creation_date": 1566557902, "post_id": 57624563, "comment_id": 101703389, "body": "I ran the code with the input from the question above and it produces the output from question above. Anyone can verify that my code works fine. \u2013\u2013\u2013 Have you <b>once again</b> silently changed the input, or used an input different from the one in the question? Then I shall be extremely put out."}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": false, "score": 0, "last_activity_date": 1566556602, "creation_date": 1566556602, "answer_id": 57624563, "question_id": 57623928, "link": "https://stackoverflow.com/questions/57623928/how-to-remove-the-last-column-from-a-csv-file-using-perl/57624563#57624563", "title": "How to remove the last column from a CSV file using perl", "body": "<p><code>munge_column_names</code> patch provided by <a href=\"https://stackoverflow.com/users/426120/tux\">Tux</a>. This makes up unique names for each unnamed column header.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse autodie;\nuse Text::CSV;\nmy @headers = qw(S.NO NAME S1 S2 S3 S4 S5);\nmy $csv_in = Text::CSV-&gt;new({binary =&gt; 1, auto_diag =&gt; 1});\nmy $csv_out = Text::CSV-&gt;new({binary =&gt; 1, auto_diag =&gt; 1});\nopen my $in, '&lt;:encoding(UTF-8)', 'a1.csv';\nopen my $out, '&gt;:encoding(UTF-8)', 'a2.csv';\nmy $eix = \"001\";\n$csv_in-&gt;header($in, {munge_column_names =&gt; sub { s/^$/\"E\".$eix++/er; }});\n$csv_out-&gt;say($out, [@headers]);\nwhile (my $row = $csv_in-&gt;getline_hr($in)) {\n    $csv_out-&gt;say($out, [$row-&gt;@{@headers}]);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1566557219, "creation_date": 1566557219, "answer_id": 57624732, "question_id": 57623928, "link": "https://stackoverflow.com/questions/57623928/how-to-remove-the-last-column-from-a-csv-file-using-perl/57624732#57624732", "title": "How to remove the last column from a CSV file using perl", "body": "<p>When processing a file a line at a time, it is better to use <code>while</code> (which also reads the file a line at a time) rather than <code>foreach</code> (which reads the whole file before giving you the first line).</p>\n\n<p>If you only want to remove the final comma, then there is no need to treat the file as a CSV file.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nopen my $inn, '&lt;', 'a1.csv' or die \"Cannot open file for input: $!\";\nopen my $outt, '&gt;', 'a2.csv' or die \"Cannot open file for output: $!\";\n\nwhile (&lt;$inn&gt;) {\n  # Remove trailing comma on first line\n  s/,$// if $. == 1;\n  print $outt $_;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6457185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d996813062924ee8e06d81f6567b18?s=128&d=identicon&r=PG&f=1", "display_name": "Shanmugam E", "link": "https://stackoverflow.com/users/6457185/shanmugam-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566559268, "creation_date": 1566554380, "last_edit_date": 1566559268, "question_id": 57623928, "link": "https://stackoverflow.com/questions/57623928/how-to-remove-the-last-column-from-a-csv-file-using-perl", "title": "How to remove the last column from a CSV file using perl", "body": "<p>How can I remove the trailing <code>,</code> from each row?</p>\n\n<p>Existing CSV file:        </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>S.NO,NAME,S1,S2,S3,S4,S5,       \n1,aaaaaaa,66,88,77,55,99,       \n2,bbbbbbb,55,66,88,99,77,           \n</code></pre>\n\n<p>The code is:</p>\n\n<pre><code> #!/usr/bin/perl\n\n\n  use strict;\n  use warnings;\n\n\n open my $inn, '&lt;', 'a1.csv' or die \"Cannot open file for input: $!\";\n open my $outt, '&gt;', 'a2.csv' or die \"Cannot open file for output: $!\";\n\nforeach my $line (&lt;$inn&gt;) {\n  chomp $line;\n  my @data = split /,/, $line;\n  printf $outt \"%s,%d\\n\", $data[0], scalar grep /^GO:/, @data;\n }   \n</code></pre>\n\n<p>My expected output CSV file:                            </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>S.NO,NAME,S1,S2,S3,S4,S5                  \n1,aaaaaaa,66,88,77,55,99          \n2,bbbbbbb,55,66,88,99,77\n</code></pre>\n"}, {"tags": ["perl", "unicode", "raku", "text-segmentation"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566551629, "post_id": 57622268, "comment_id": 101700245, "body": "Does the python example count as side-stepping?"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566552454, "post_id": 57622268, "comment_id": 101700667, "body": "No, it doesn&#39;t. It demonstrates customisation (implemented as a callback), but otherwise runs the correct segmentation algorithm."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1566600439, "post_id": 57622268, "comment_id": 101720691, "body": "&quot;[uniseg] ... runs the correct segmentation algorithm&quot; A fundamental issue with these libraries is their long term maintenance. Are you sure your uniseg is getting it right? When I looked around a year ago the most up-to-date fork of uniseg I found was using out of date grapheme segmentation rules. (Fwiw, the most promising looking python grapheme segmentation library I found was the then newish <a href=\"https://libraries.io/pypi/grapheme\" rel=\"nofollow noreferrer\">grapheme</a> which, for example, <a href=\"https://github.com/alvinlindstam/grapheme/commit/8d7b6cf096738a7f1e3a6e9e470e14f1b5a6810b\" rel=\"nofollow noreferrer\">implemented the Unicode 11 rule changes</a>)."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1566606740, "post_id": 57622268, "comment_id": 101721581, "body": "I should clarify. When I looked last year it seemed that <code>grapheme</code> was the most promising <i>pure Python</i> library. (Though, to be clear, it&#39;s only claiming alpha status. uniseg is a stage better &quot;on paper&quot; in that it claims beta status but then again it hasn&#39;t been updated in years afaict.) Based on my research last year the serious solution in the Python space is <a href=\"https://pypi.org/project/PyICU/\" rel=\"nofollow noreferrer\">the PyICU project</a> which wraps libraries from <a href=\"http://site.icu-project.org/home\" rel=\"nofollow noreferrer\">the ICU project</a>."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1566802650, "post_id": 57622268, "comment_id": 101756197, "body": "Any idea of thow that Python library works? It&#39;s probably enumerating all possible digraphs in all languages, is that correct?"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1566890632, "post_id": 57622268, "comment_id": 101786779, "body": "@raiph because it&#39;s selecting digraphs for Albanian; it might have others. ch is a digraph in Spanish, for instance."}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "reply_to_user": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 0, "creation_date": 1566894748, "post_id": 57622268, "comment_id": 101788648, "body": "@raiph as daxim says, writing your own segmentation is sidestepping the problem. There&#39;s an Unicode specification for grapheme clusters, which is where all such digraphs by language are defined. I think the Python implementation does that."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 1, "creation_date": 1566928315, "post_id": 57622268, "comment_id": 101806562, "body": "@jjmerelo &quot;how that Python library works?&quot;. Here&#39;s the &quot;official&quot; <a href=\"https://bitbucket.org/emptypage/uniseg-python/raw/e4077d17d026c36999b89c10081a85b219e1fb7b/uniseg/graphemecluster.py\" rel=\"nofollow noreferrer\"><code>uniseg</code> repo&#39;s <code>graphemecluster.py</code> that contains the <code>grapheme_clusters</code> function</a> daxim used. To use tailored (eg locale specific) grapheme clustering one must manually edit <code>break_table</code> and/or supply a custom callback as the <code>tailor</code> argument to, eg, <code>grapheme_clusters</code> as daxim did. It can&#39;t enumerate all possible digraphs because they conflict. It&#39;s only selecting Albanian cuz daxim manually wrote that."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1566929601, "post_id": 57622268, "comment_id": 101807092, "body": "@jjmerelo &quot;Unicode specification ... where all such digraphs by language are defined.&quot; There&#39;s a critically important reason why <b>the Unicode consortium</b> does <i>not</i> refer to most language/locale specific data as a &quot;specification&quot;. <a href=\"https://www.unicode.org/faq/ligature_digraph.html#Dig6\" rel=\"nofollow noreferrer\">&quot;How can I get Unicode implementations to recognize the digraph more generally?&quot;</a> links to the <a href=\"http://cldr.unicode.org/\" rel=\"nofollow noreferrer\">CLDR</a>. The CLDR will have Albanian digraph data but it may change from release to release without notice and is <i>not</i> <a href=\"http://cldr.unicode.org/index/cldr-spec\" rel=\"nofollow noreferrer\">a CLDR specification</a>."}, {"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1566930803, "post_id": 57622268, "comment_id": 101807537, "body": "@jjmerelo &quot;I think the Python implementation [uses the CLDR] where all such digraphs by language are defined.&quot; If by &quot;Python implementation&quot; you mean the library daxim used, the pure python <code>uniseg</code>, then not really. Someone can <i>manually edit</i> the module as explained in my first comment to you above but they must maintain it themselves. The <code>grapheme</code> library (which I linked in a comment above) <i>is</i> maintained but, afaik, also doesn&#39;t bundle CLDR data. Finally, the <code>PyICU</code> module (also linked above; it wraps C++ ICU libs) explicitly aims to track CLDR."}], "answers": [{"comments": [{"owner": {"reputation": 25859, "user_id": 1077672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f00f8b55b0ade2c4748e94fb73a40662?s=128&d=identicon&r=PG", "display_name": "raiph", "link": "https://stackoverflow.com/users/1077672/raiph"}, "edited": false, "score": 4, "creation_date": 1566570728, "post_id": 57626560, "comment_id": 101710198, "body": "I think the &quot;old Perl&quot; solution should be <a href=\"https://perldoc.perl.org/perlrebackslash.html#Misc\" rel=\"nofollow noreferrer\"><code>\\X</code></a> instead of <code>.</code>. If it doesn&#39;t make a difference for the given string that&#39;s because all the graphemes are single codepoints."}, {"owner": {"reputation": 5096, "user_id": 3646587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb1e27fe3d6e271ac02a47709e042d7c?s=128&d=identicon&r=PG&f=1", "display_name": "user0721090601", "link": "https://stackoverflow.com/users/3646587/user0721090601"}, "edited": false, "score": 0, "creation_date": 1566692558, "post_id": 57626560, "comment_id": 101736385, "body": "Also rather useful is the ability to reuse regexes.  <code>my $albanian = &#47;dh|.&#47;; say &quot;a.b.c.dh.e.f.g.h.&quot;.comb(&#47;$albanian &lt;punct&gt;&#47;)</code> --&gt; <code>(a. b. c. dh. e. f. g. h.)</code> In a grammar, <code>my token albanian { dh | . }</code> and then use <code>&lt;albanian&gt;</code> wherever you need to use that segmentation rule."}], "tags": [], "owner": {"reputation": 4524, "user_id": 8893864, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-mfBb3bzlcfw/AAAAAAAAAAI/AAAAAAAAADM/vILdjUEHHM8/photo.jpg?sz=128", "display_name": "Holli", "link": "https://stackoverflow.com/users/8893864/holli"}, "is_accepted": true, "score": 7, "last_activity_date": 1566564936, "last_edit_date": 1566564936, "creation_date": 1566564076, "answer_id": 57626560, "question_id": 57622268, "link": "https://stackoverflow.com/questions/57622268/how-do-you-customise-text-segmentation-to-not-break-between-a-digraph/57626560#57626560", "title": "How do you customise text segmentation to not break between a digraph?", "body": "<pre><code>D:\\&gt;perl6 -e \"'dhelp\u00ebror'.comb(/dh|./).say\"\n(dh e l p \u00eb r o r)\n</code></pre>\n\n<p>You can do the same in old Perl.</p>\n\n<pre><code>print join ' ', 'dhelp\u00ebror' =~ /dh|./g\n</code></pre>\n"}], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "accepted_answer_id": 57626560, "answer_count": 1, "score": 6, "last_activity_date": 1574709154, "creation_date": 1566548229, "last_edit_date": 1574709154, "question_id": 57622268, "link": "https://stackoverflow.com/questions/57622268/how-do-you-customise-text-segmentation-to-not-break-between-a-digraph", "title": "How do you customise text segmentation to not break between a digraph?", "body": "<p>Works:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\nfrom uniseg.graphemecluster import grapheme_clusters\ndef albanian_digraph_dh(s, breakables):\n    for i, breakable in enumerate(breakables):\n        if s.endswith('d', 0, i) and s.startswith('h', i):\n            yield 0\n        else:\n            yield breakable\n\nprint(list(grapheme_clusters('dhelp\u00ebror', albanian_digraph_dh)))\n#['dh', 'e', 'l', 'p', '\u00eb', 'r', 'o', 'r']\n</code></pre>\n\n<hr>\n\n<p>Needs improvement/customisation:</p>\n\n<pre><code>perl -C -Mutf8 -mUnicode::GCString -E'\n    say join \" \", Unicode::GCString\n        -&gt;new(\"dhelp\u00ebror\")-&gt;as_array\n'\n#d h e l p \u00eb r o r\n\nperl6 -e'\"dhelp\u00ebror\".comb.say'\n#(d h e l p \u00eb r o r)\n</code></pre>\n\n<p>NB: writing your own segmentation which is almost guaranteed to not implement UAX #29 correctly counts as side-stepping the problem.</p>\n"}, {"tags": ["regex", "perl", "escaping", "latex", "doxygen"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1566537308, "post_id": 57619481, "comment_id": 101694583, "body": "A simple way?  Write a script.  A one-liner is clearly pushing it, no?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566537779, "post_id": 57619481, "comment_id": 101694695, "body": "So escape <code>[_%]</code> only inside the <code>DoxyCode</code> (Latex) environment, unless it&#39;s <code>{%inside_braces}</code> (so leave these unescaped) ... correct? (And unless it&#39;s already escaped of course)"}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566551221, "post_id": 57619481, "comment_id": 101700019, "body": "You wrote that the problem might be a problem in doxygen (but you were not sure) and it it is always the best to fix a problem at the source of the problems. Would be good to know a couple of things: 1) which version of doxygen are you using? 2) when generating the doxygen LaTeX code can you also build the pdf in the <code>latex</code> directory? 3) can you give an example of the source code that gives the problems."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566551325, "post_id": 57619481, "comment_id": 101700076, "body": "@zdim creating a workaround is not the best way. One should not do this unless there is no other solution. Best is to see whether the problem can be solved in the generating program (or even in the source code being documented)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566551518, "post_id": 57619481, "comment_id": 101700176, "body": "@albert Sure, I absolutely agree. But that&#39;s not what they asked.  It&#39;s good to inquire with OP whether it is possible to get to the actual problem but please remember to also keep in mind what they actually asked.  Also, treating the error that causes this smells like a different question altogether."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566551983, "post_id": 57619481, "comment_id": 101700437, "body": "@zdim I hope OP comes up with some small code that provokes the problem."}, {"owner": {"reputation": 35, "user_id": 7254279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsW7Z.jpg?s=128&g=1", "display_name": "easybeso", "link": "https://stackoverflow.com/users/7254279/easybeso"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566575420, "post_id": 57619481, "comment_id": 101712560, "body": "zdim, that&#39;s the correct description of the problem. @albert, I&#39;m using doxygen 1.8.13, which is what&#39;s available with debian, but is a few years old. I have already worked a few issues with doxygen involving the tabu package and have had to pare down the doxygen.sty (and frankly, a lot of style doesn&#39;t make it into .docx anyway). The code base is LARGE, several years old, and not mine, and my task to document it is a fairly quick turnaround, so I don&#39;t have much patience or leeway to explore doxygen&#39;s idiosyncracies... To answer your question, I was not able to generate a PDF."}, {"owner": {"reputation": 35, "user_id": 7254279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsW7Z.jpg?s=128&g=1", "display_name": "easybeso", "link": "https://stackoverflow.com/users/7254279/easybeso"}, "edited": false, "score": 0, "creation_date": 1566575508, "post_id": 57619481, "comment_id": 101712611, "body": "The error message I get is : <code>Error at &quot;afile.tex&quot; (line 87, column 57): unexpected _ expecting \\end{alltt}</code> and this corresponds to a location inside the <code>DoxyCode</code> environment. There&#39;s nothing wrong with the code itself; it&#39;s appropriate for it to have <code>%</code> and <code>_</code> characters."}, {"owner": {"reputation": 35, "user_id": 7254279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsW7Z.jpg?s=128&g=1", "display_name": "easybeso", "link": "https://stackoverflow.com/users/7254279/easybeso"}, "edited": false, "score": 0, "creation_date": 1566575910, "post_id": 57619481, "comment_id": 101712809, "body": "And to clarify, the effort to create a PDF failed silently."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566576200, "post_id": 57619481, "comment_id": 101712929, "body": "Indeed doxygen 1.8.13 is from December 2016, since that time some things have changed. I would advise to get the doxygen version 1.8.16 (or even the master version) and compile it. There are some changes that you will benefit from  (will also help for the tabu problem). When you see that something is going wrong  it is probably quite easy to locate the file rom which the code comes and one can just try to generate the documentation for this file. Without more details it is not possible to fix the problems.I think investing just a little bit getting 1.8.16 will save you a lot of trouble."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566576534, "post_id": 57619481, "comment_id": 101713080, "body": "I don;t know why you choose pandoc to generate <code>.doxc</code> files from LaTeX as generated by doxygen, but did you have a look at the rtf output generated by doxygen (this is probably less perfect than the LaTeX output but maybe worthwhile do do a quick tests, and here I would certainly advise to use version 1.8.16)."}, {"owner": {"reputation": 35, "user_id": 7254279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsW7Z.jpg?s=128&g=1", "display_name": "easybeso", "link": "https://stackoverflow.com/users/7254279/easybeso"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566581658, "post_id": 57619481, "comment_id": 101715223, "body": "I didn&#39;t realize the pathway to docx from RTF would be so easy! Upon looking at the RTF output, I will go that route. MUCH simpler. Thanks for your time, @albert"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566583129, "post_id": 57619481, "comment_id": 101715798, "body": "@easybeso Great!  (So this question isn&#39;t of interest anymore?)"}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566584832, "post_id": 57619481, "comment_id": 101716394, "body": "Big question for me is why does one want to have source code documentation in word format. Note that doxygen also can do other types of documentation. E.g. the doxygen manual is generated by doxygen"}, {"owner": {"reputation": 35, "user_id": 7254279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsW7Z.jpg?s=128&g=1", "display_name": "easybeso", "link": "https://stackoverflow.com/users/7254279/easybeso"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1566854116, "post_id": 57619481, "comment_id": 101778716, "body": "@albert, I wish it weren&#39;t so, but it&#39;s not my choice to make. In my industry, word is unfortunately the standard for documenting software and everything else."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566845596, "post_id": 57648732, "comment_id": 101775618, "body": "How does this exclude stuff inside <code>{...}</code> (possibly nested), inside <code>DoxyCode</code>? One requirement"}, {"owner": {"reputation": 35, "user_id": 7254279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsW7Z.jpg?s=128&g=1", "display_name": "easybeso", "link": "https://stackoverflow.com/users/7254279/easybeso"}, "edited": false, "score": 0, "creation_date": 1566853994, "post_id": 57648732, "comment_id": 101778674, "body": "Thanks. I think this would get me the rest of the way."}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 0, "creation_date": 1566854614, "post_id": 57648732, "comment_id": 101778874, "body": "It wasn&#39;t clear if embedded {} were part of the problem.  Adding them is simple:  <code>$t =~ s{(\\\\\\\\ | \\{.+?\\} | \\\\?[_%])}</code>  Any non-single character exclude can be added to this list."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566861452, "post_id": 57648732, "comment_id": 101780579, "body": "&quot;<i>Adding them is simple:...</i>&quot; -- not so: What you show fails for nested ones (quite possible in Latex); if you were to relax the <code>?</code> then of course it wouldn&#39;t work at all.  Altogether this is a complex enough parsing problem (unless there are simplifications that OP can accept in their use cases)"}, {"owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "edited": false, "score": 1, "creation_date": 1566877074, "post_id": 57648732, "comment_id": 101783027, "body": "There was nothing about nested {} tags in the OP.  If there could only be one level inside the begin/end then my last is fine.  If there could be any depth of nested {} tags that&#39;s simple as well. Well kind of.  Full recursion: <code>$t =~ s{(\\\\\\\\ | (\\{ (?: [^\\{]++ | (?-1) )* \\}) | \\\\?[_%])}  </code>"}], "tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": true, "score": 1, "last_activity_date": 1566758608, "last_edit_date": 1566758608, "creation_date": 1566758239, "answer_id": 57648732, "question_id": 57619481, "link": "https://stackoverflow.com/questions/57619481/whats-the-correct-syntax-for-escapes-and-captures-in-a-perl-one-liner/57648732#57648732", "title": "What&#39;s the correct syntax for escapes and captures in a perl one-liner?", "body": "<p>Easy, while the \"right\" way to do this is with a regex parser, it's still simple enough that you could do it with a one liner.  The key is doing a two stage substitution.  I added a use case for literal backslashes (\\) that are not starting an escape for a _ or %.  If there could be other embedded {} then they can be excluded with the same paradigm.</p>\n\n<pre><code>$text = &lt;&lt;'EOF';\n\\begin{DoxyCode}\n17 This is some code that contains an_undersc_ore and\n18 an escaped\\_underscore. Plus another unescaped_unders_core\n19 for good measure. A literal \\ and a literal \\\\_.\n20 As if that was not \"bad\" enough, it also contains a %percent sign\n21 that is unescaped.\n\\end{DoxyCode}\n\nHere is some other stuff that may contain \\index{things_not_to_be_escaped}.\n\n\\begin{DoxyCode}\n17 This is some code that contains an_underscore and\n18 an escaped\\_underscore. Plus another unescaped_underscore\n19 for good measure. A literal \\\\%.\n20 As if that was not \"bad\" enough, it also contains a \\%percent sign\n21 that is escaped.\n\\end{DoxyCode}\nEOF\n\nprint \"before:\\n$text\\n\\n\";\n$text =~ s{\\Q\\begin{DoxyCode}\\E\\K(.+?)(\\Q\\end{DoxyCode}\\E)}{\n    my($t,$e) = ($1,$2);\n    $t =~ s{(\\\\\\\\ | \\\\?[_%])}{1==length $1 ? \"\\\\$1\" : $1}egsx; \"$t$e\";\n}egs;\nprint \"after:\\n$text\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>before:\n\\begin{DoxyCode}\n17 This is some code that contains an_undersc_ore and\n18 an escaped\\_underscore. Plus another unescaped_unders_core\n19 for good measure. A literal \\ and a literal \\\\_.\n20 As if that was not \"bad\" enough, it also contains a %percent sign\n21 that is unescaped.\n\\end{DoxyCode}\n\nHere is some other stuff that may contain \\index{things_not_to_be_escaped}.\n\n\\begin{DoxyCode}\n17 This is some code that contains an_underscore and\n18 an escaped\\_underscore. Plus another unescaped_underscore\n19 for good measure. A literal \\\\%.\n20 As if that was not \"bad\" enough, it also contains a \\%percent sign\n21 that is escaped.\n\\end{DoxyCode}\n\n\nafter:\n\\begin{DoxyCode}\n17 This is some code that contains an\\_undersc\\_ore and\n18 an escaped\\_underscore. Plus another unescaped\\_unders\\_core\n19 for good measure. A literal \\ and a literal \\\\\\_.\n20 As if that was not \"bad\" enough, it also contains a \\%percent sign\n21 that is unescaped.\n\\end{DoxyCode}\n\nHere is some other stuff that may contain \\index{things_not_to_be_escaped}.\n\n\\begin{DoxyCode}\n17 This is some code that contains an\\_underscore and\n18 an escaped\\_underscore. Plus another unescaped\\_underscore\n19 for good measure. A literal \\\\\\%.\n20 As if that was not \"bad\" enough, it also contains a \\%percent sign\n21 that is escaped.\n\\end{DoxyCode}\n</code></pre>\n\n<p>Also read <a href=\"http://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlre.html</a> and <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators</a>.  Pay special attention the \\G assertion and the /gc flags.  That is how you would write a proper parser for this task.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 35, "user_id": 7254279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GsW7Z.jpg?s=128&g=1", "display_name": "easybeso", "link": "https://stackoverflow.com/users/7254279/easybeso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 57648732, "answer_count": 1, "score": 2, "last_activity_date": 1566758608, "creation_date": 1566530326, "question_id": 57619481, "link": "https://stackoverflow.com/questions/57619481/whats-the-correct-syntax-for-escapes-and-captures-in-a-perl-one-liner", "title": "What&#39;s the correct syntax for escapes and captures in a perl one-liner?", "body": "<p>I'm attempting to use pandoc to convert latex files (which were automatically generated by doxygen) to .docx format. I have encountered an error, perhaps in doxygen, which allows <em>some</em> characters that should be escaped (<code>_</code> and <code>%</code>) to go unescaped in the <code>DoxyCode</code> latex environment. Some underscores occur in filenames, and are inside braces. Those should not be escaped. </p>\n\n<p>I wrote a perl one-liner that locates any underscores or percents that <em>aren't</em> between braces, and replaces them with a backslash followed by the same character:</p>\n\n<pre><code>perl -i -pe 's/(?&lt;!\\\\)([_%])(?![^{]+})/\\\\$1/g' test.tex\n</code></pre>\n\n<p>This works as expected. However, I then discovered that some of the files contain, e.g., an initializer list within braces, with some variables containing underscores, inside a <code>DoxyCode</code> environment. So I need a perl script that can recognize when the underscore or percent is between <code>\\begin{DoxyCode}</code> and <code>\\end{DoxyCode}</code> and insert a backslash if there be none.</p>\n\n<p>The regex for this command is working; see <a href=\"https://regex101.com/r/gsQm2L/2\" rel=\"nofollow noreferrer\">https://regex101.com/r/gsQm2L/2</a></p>\n\n<p>Although it only grabs the first match. I'm hoping perl can grab other matches, but I may be mistaken. </p>\n\n<p>The command I have is </p>\n\n<pre><code>perl -i -pe 's/(?&lt;=begin\\{DoxyCode})([\\s\\S]+?[^\\\\])([_%])([\\s\\S]+?)(?=end\\{DoxyCode})/$1\\\\$2$3/g' test.tex\n</code></pre>\n\n<p>but it fails to make any changes. (I tried not escaping the left braces, but I got an error: <code>Unescaped left brace in regex is deprecated, passed through in regex;</code> etc.) I can't tell whether it's failing to find matches or failing to replace them because my capture syntax is incorrect. </p>\n\n<p>For both the first and second example, the original contents of test.tex are as follows:</p>\n\n<pre><code>\\begin{DoxyCode}                                                                                                     \n17 This is some code that contains an_undersc_ore and                                                                \n18 an escaped\\_underscore. Plus another unescaped_unders_core                                                        \n19 for good measure.                                                                                                 \n20 As if that was not \"bad\" enough, it also contains a %percent sign                                                 \n21 that is unescaped.                                                                                                \n\\end{DoxyCode}                                                                                                       \n\nHere is some other stuff that may contain \\index{things_not_to_be_escaped}.                                          \n\n\\begin{DoxyCode}                                                                                                     \n17 This is some code that contains an_underscore and                                                                 \n18 an escaped\\_underscore. Plus another unescaped_underscore                                                         \n19 for good measure.                                                                                                 \n20 As if that was not \"bad\" enough, it also contains a \\%percent sign                                                \n21 that is escaped.                                                                                                  \n\\end{DoxyCode}     \n</code></pre>\n\n<p>The desired content of test.tex, after running the perl command, would be the following:</p>\n\n<pre><code>\\begin{DoxyCode}                                                                                                     \n17 This is some code that contains an\\_undersc\\_ore and                                                                \n18 an escaped\\_underscore. Plus another unescaped\\_unders\\_core                                                        \n19 for good measure.                                                                                                 \n20 As if that was not \"bad\" enough, it also contains a \\%percent sign                                                 \n21 that is unescaped.                                                                                                \n\\end{DoxyCode}                                                                                                       \n\nHere is some other stuff that may contain \\index{things_not_to_be_escaped}.                                          \n\n\\begin{DoxyCode}                                                                                                     \n17 This is some code that contains an\\_underscore and                                                                 \n18 an escaped\\_underscore. Plus another unescaped\\_underscore                                                         \n19 for good measure.                                                                                                 \n20 As if that was not \"bad\" enough, it also contains a \\%percent sign                                                \n21 that is escaped.                                                                                                  \n\\end{DoxyCode}     \n</code></pre>\n\n<p><strong>Why is my perl one-liner failing? And how do I get the desired output?</strong> I'm by no means a perl or regex expert, so I welcome feedback on other errors.</p>\n\n<p>In case it's relevant, I'm working on debian stretch, and <code>perl --version</code> returns </p>\n\n<pre><code>This is perl 5, version 24, subversion 1 (v5.24.1) built for x86_64-linux-gnu-thread-multi\n(with 85 registered patches, see perl -V for more detail)\n</code></pre>\n"}, {"tags": ["regex", "file", "perl"], "comments": [{"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566532428, "post_id": 57619079, "comment_id": 101693639, "body": "yes typo, i already fix it"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566539784, "post_id": 57619079, "comment_id": 101695234, "body": "yes, I want to get the 6th array data which is 0.408,0.612 or 0.34. but where I need to add that code?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566541263, "post_id": 57619079, "comment_id": 101695673, "body": "In your data the 6th column is <code>nx</code>.  The number is <i>the 7th column</i> ... correct ?"}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566541623, "post_id": 57619079, "comment_id": 101695783, "body": "yes correct..in simple way, I want to append the data after &#39;+&#39; to the previous line. can u suggest any code for that?"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566542926, "post_id": 57620891, "comment_id": 101696277, "body": "what is this code  ($line =~ /^\\s*\\+\\s*(.*)/) means?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566544557, "post_id": 57620891, "comment_id": 101696957, "body": "IT&#39;s a regex that checks whether the variable <code>$line</code> starts (<code>^</code>) with optional spaces (<code>\\s*</code>) then a plus (<code>\\+</code>) then more optional spaces ... then it captures the rest of the line (<code>(.*)</code>).  This is so to: (1) detect a line that starts with <code>+</code> (and optionally spaces around it), and extract the rest so to append to the previous line (you don&#39;t want the <code>+</code> there!)."}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566548264, "post_id": 57620891, "comment_id": 101698540, "body": "which line of ur code that function to append the data?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566548801, "post_id": 57620891, "comment_id": 101698786, "body": "yes, the <code>$prev_line . &#39;  &#39; . $1</code> appends the capture after <code>+</code> (that was the <code>(.*)</code> part, captured into <code>$1</code>), with a white-space in between (so that it&#39;s a next field), to the previous line.  That&#39;s how you merge those two lines."}, {"owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566550669, "post_id": 57620891, "comment_id": 101699709, "body": "can you give some suggestion if i want to use this code? \t\tif (/^A/) {              my @m = split (/\\s+/, $_); \t\t\t if (/^+/) { \t\t\t\t my @m = split (/\\s+/,$_); \t\t\t\t push @m, $1 \t\t\t }"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "edited": false, "score": 0, "creation_date": 1566551008, "post_id": 57620891, "comment_id": 101699900, "body": "Well, no, not really -- I don&#39;t understand what that code is supposed to do."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1566580862, "last_edit_date": 1566580862, "creation_date": 1566541639, "answer_id": 57620891, "question_id": 57619079, "link": "https://stackoverflow.com/questions/57619079/how-to-read-data-that-appear-in-next-line/57620891#57620891", "title": "How to read data that appear in next line?", "body": "<p>A line with <code>+</code> is a continuation line, that completes the \"full line\" when added to the previous one. Then we can process the completed line (extract the seventh field).  If the line doesn't start with a <code>+</code> then it's the first part of the next line to be assembled.</p>\n\n<p>Also, if there may be unbroken lines then they aren't followed by a line with <code>+</code> and we need to also check whether the previous line started with <code>+</code> (when the current line doesn't).</p>\n\n<p>In order to avoid tap dancing around the first line, when nothing is initialized (then <code>if</code> statements would have to always test for the first line!), I first read one line and only then enter the loop.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift // die \"Usage: $0 file\\n\";  #/    \nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy (@data, $full_line);\nmy $prev_line = &lt;$fh&gt;;   # Start it off -- the first line\n\nwhile (my $line = &lt;$fh&gt;) { \n    chomp $line;\n\n    # Continuation line?\n    if ($line =~ /^\\s*\\+\\s*(.*)/) { \n        $full_line = $prev_line . ' ' . $1; \n    }   \n    # Or was the previous line indeed one with a +\n    elsif ($prev_line =~ /^\\s*\\+/) {\n        $prev_line = $line;\n        next;\n    }   \n    # If not, then it was a complete line on its own, ready to process\n    else {\n        $full_line = $line;\n    }   \n\n    push @data, (split ' ', $full_line)[6];\n\n    $prev_line = $line;\n}\n\nsay for @data;\n</code></pre>\n\n<p>Some reasonable assumptions are used here, one being major: that a \"full\" line may be broken into at most two lines; so there can only be one <code>+</code> line.  This is easy to relax if need be.</p>\n\n<p>This prints expected output with the provided sample file.</p>\n\n<p>I don't understand the shown code which, among other things, tests for <code>=</code> etc. So I simply take the stated 7th column.</p>\n"}], "owner": {"reputation": 59, "user_id": 10436967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-F2zhTmO8C-Y/AAAAAAAAAAI/AAAAAAAAAFU/9ErSN65pMB0/photo.jpg?sz=128", "display_name": "siti nadhirah Zainurin", "link": "https://stackoverflow.com/users/10436967/siti-nadhirah-zainurin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571794019, "creation_date": 1566526630, "last_edit_date": 1571794019, "question_id": 57619079, "link": "https://stackoverflow.com/questions/57619079/how-to-read-data-that-appear-in-next-line", "title": "How to read data that appear in next line?", "body": "<p>My problem is to read data in the next line for input 2 same like we can read data as input 1. I expect that we can read input 2 as input 1. </p>\n\n<p>Here is input 1:</p>\n\n<pre><code>A1 clkout n0 vss vss nx 0.408 0.02 $$UNI\nA2 clkout n2 vss vss nx 0.612 0.02 $$UNI\nA3 clkin  n1 vss vss nx 0.34 0.02 $$UNI\n</code></pre>\n\n<p>Here is input 2: </p>\n\n<pre><code>A1 clkout n0 vss vss nx\n+ 0.408 0.02 $$UNI\nA2 clkout n2 vss vss nx 0.612  \n+ 0.02 $$UNI\nA3 clkin  n1 vss vss\n+ nx 0.34 0.02 $$UNI \n</code></pre>\n\n<p>The code to get the 6th column is shown below:</p>\n\n<pre><code>while (&lt;SN&gt;) {\n        chomp;\n        next if (/^\\$\\s*\\#+/);\n\n        if (/^M/) {\n\n            my @m = split (/\\s+/, $_);\n\n            if ($m[6] =~ /\\=/) {\n                $m[6] = $m[7];\n               $m[6] =~ s/W\\=(\\S+)u/$2/;\n\n            }\n\n            $CSV{cell}{$c}{tx}{$m[5]}{count} += 1;\n            $CSV{cell}{$c}{tx}{$m[5]}{totZ}  += $m[6];\n\n            if ($opt_grid_um) { \n               $g = $m[6] / $G{grid_um};\n            } else {\n               $g = $m[6];\n            }\n       close (SN);\n     }\n</code></pre>\n\n<p>I already tried to get data for the 6th column from input 1 but cannot read for input 2. I think there is some error at this line: <code>$m[6] =~ s/W\\=(\\S+)u/$2/;</code></p>\n\n<p>My expected result is to read input 2 format as input 1 by ignoring the '+' sign in front of the second line. Then, the script can read data in each column as input 1.</p>\n"}, {"tags": ["file", "perl"], "comments": [{"owner": {"reputation": 1080, "user_id": 11890657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e128d9b341fa1abad09bab0576aacd7f?s=128&d=identicon&r=PG&f=1", "display_name": "Chelmy88", "link": "https://stackoverflow.com/users/11890657/chelmy88"}, "edited": false, "score": 0, "creation_date": 1566509563, "post_id": 57617211, "comment_id": 101689464, "body": "Maybe good to post on the Spanish version of stack overflow."}, {"owner": {"reputation": 64493, "user_id": 272109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32170c62eb744820e8afdd023379a95a?s=128&d=identicon&r=PG", "display_name": "David Makogon", "link": "https://stackoverflow.com/users/272109/david-makogon"}, "edited": false, "score": 0, "creation_date": 1566509725, "post_id": 57617211, "comment_id": 101689504, "body": "Please edit and translate to English, or post to es.stackoverflow.com."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566512247, "post_id": 57617211, "comment_id": 101690101, "body": "I still have no clue what the beginning means ... ?  Since I can&#39;t answer until this gets reopened (if it does), here&#39;s couple of ways: (1) Read the whole file, putting lines in an array, and print <code>$lines[-2]</code> (one before last) (2) If the file is too big for this, first read through it to count lines and then read again where now you&#39;ll know which line to print.  If it bothers you to make two passes -- or the file is <i>really</i> large and it&#39;s slow -- then you can record (some) positions (<code>pos</code>) in the file while counting lines and then <code>seek</code> suitably instead of making the second full pass."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566513717, "post_id": 57617211, "comment_id": 101690427, "body": "@gama larios, If it can be a large file, use <a href=\"https://metacpan.org/pod/File::ReadBackwards\" rel=\"nofollow noreferrer\">File::ReadBackwards</a>. If it&#39;s a small file, you could also read the entire file into memory (<code>my @lines = &lt;&gt;; $lines[-2]</code>)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566513827, "post_id": 57617211, "comment_id": 101690443, "body": "@zdim, I strongly believe those are the contents of the file, in which case the files appear to contain size information about something. I don&#39;t really see how it could be anything else. Thus the edit."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566513955, "post_id": 57617211, "comment_id": 101690477, "body": "@zdim, Another problem for another day :) In theory, it could still work without decoding+encoding because the 8-bit clean nature of reading and writing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566514170, "post_id": 57617211, "comment_id": 101690511, "body": "@zdim, The OP Seems to have confirmed this (&quot;There are three or more lines that the document brings&quot; probably means &quot;the files have three or more lines&quot;)."}, {"owner": {"reputation": 31, "user_id": 11933034, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vg4Gc0e3Rug/AAAAAAAAAAI/AAAAAAAAACI/q4tpSfLlct8/photo.jpg?sz=128", "display_name": "gama larios", "link": "https://stackoverflow.com/users/11933034/gama-larios"}, "edited": false, "score": 0, "creation_date": 1566514225, "post_id": 57617211, "comment_id": 101690522, "body": "of the files at the beginning I just want the line before the last one to be returned to me, in the code I put in it I only list it"}, {"owner": {"reputation": 31, "user_id": 11933034, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vg4Gc0e3Rug/AAAAAAAAAAI/AAAAAAAAACI/q4tpSfLlct8/photo.jpg?sz=128", "display_name": "gama larios", "link": "https://stackoverflow.com/users/11933034/gama-larios"}, "edited": false, "score": 0, "creation_date": 1566514360, "post_id": 57617211, "comment_id": 101690553, "body": "I just want to print the line that is patted"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566514588, "post_id": 57617211, "comment_id": 101690607, "body": "I provided solutions in my first comment."}, {"owner": {"reputation": 31, "user_id": 11933034, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vg4Gc0e3Rug/AAAAAAAAAAI/AAAAAAAAACI/q4tpSfLlct8/photo.jpg?sz=128", "display_name": "gama larios", "link": "https://stackoverflow.com/users/11933034/gama-larios"}, "edited": false, "score": 0, "creation_date": 1566514677, "post_id": 57617211, "comment_id": 101690623, "body": "ikegami, My @lines = &lt;&gt;; $lines[-2] I insert this part of the code inside the while or outside"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566516828, "post_id": 57617211, "comment_id": 101691021, "body": "@gamalarios  You don&#39;t need the <code>while</code> for that.  The <code>&lt;&gt;</code> is a bit magical -- it opens files passed to the program on the command line and reads from them, and since you assign it to an array it will read and return <i>all</i> lines.  So after <code>my @lines = &lt;&gt;;</code> the <code>@lines</code> array has all lines from all files submitted to the program on the command line. So if you invoked it as <code>script.pl filename</code> then <code>@lines</code> has all lines from file <code>filename</code> (newlines included)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566519799, "post_id": 57617211, "comment_id": 101691522, "body": "Well, they can&#39;t actually use <code>&lt;&gt;</code> here, so it would actually be <code>&lt;$file&gt;</code> in this situation (although <code>$fh</code> would be a better name than the misnamed <code>$file</code>). I was giving a short generic answer and leaving the detailsto the OP"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566524766, "post_id": 57617211, "comment_id": 101692340, "body": "@gamalarios My previous comment is on use of <code>&lt;&gt;</code>.  But if you have names of multiple files (in an array like your <code>@FILES</code>) which you need to open and process individually then you can&#39;t use <code>&lt;&gt;</code>.  Instead, as you open a file (with a filehandle, say, <code>$fh</code>) you do <code>my @lines = &lt;$fh&gt;;</code> and now <code>@lines</code> has lines from the file (opened with <code>$fh</code>), etc.  (That <code>$file</code> is a misleading name for a variable that is in fact a <i>filehandle</i>.  It looks like a filename)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566525112, "post_id": 57617211, "comment_id": 101692410, "body": "So. like <code>for my $file (@files) { open my $fh, &#39;&lt;&#39;, $file or die $!; my @lines = &lt;$fh&gt;; print $lines[-2]; }</code>. Remember that each element of <code>@lines</code> ends with a newline."}, {"owner": {"reputation": 31, "user_id": 11933034, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vg4Gc0e3Rug/AAAAAAAAAAI/AAAAAAAAACI/q4tpSfLlct8/photo.jpg?sz=128", "display_name": "gama larios", "link": "https://stackoverflow.com/users/11933034/gama-larios"}, "edited": false, "score": 0, "creation_date": 1566857039, "post_id": 57617211, "comment_id": 101779646, "body": "tie my @lineas, &#39;Tie::File&#39;, $filename or die &quot;ERROR: $!\\n&quot;; while (my $row = &lt;$lineas[-2]&gt;) This is how my line is in the while"}, {"owner": {"reputation": 31, "user_id": 11933034, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vg4Gc0e3Rug/AAAAAAAAAAI/AAAAAAAAACI/q4tpSfLlct8/photo.jpg?sz=128", "display_name": "gama larios", "link": "https://stackoverflow.com/users/11933034/gama-larios"}, "edited": false, "score": 0, "creation_date": 1566857279, "post_id": 57617211, "comment_id": 101779709, "body": "Thanks for your help everyone, Regards !!"}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1566858955, "post_id": 57643614, "comment_id": 101780091, "body": "This assumes that the <code>tail</code> command is available. It&#39;s not likely to work on Windows, for example. Also, it doesn&#39;t handle the case where input is shorter than 2 lines."}], "tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": true, "score": 1, "last_activity_date": 1566712768, "creation_date": 1566712768, "answer_id": 57643614, "question_id": 57617211, "link": "https://stackoverflow.com/questions/57617211/is-there-a-function-or-arrangement-that-returns-the-penultimate-line-of-a-txt-fi/57643614#57643614", "title": "Is there a function or arrangement that returns the penultimate line of a txt file?", "body": "<p>Gama, there is no need for a complex script here.  The Unix tail command will do it for you.</p>\n\n<pre><code>@last_two_lines = `tail -n2 $filename`;\nprint $last_two_lines[0];\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566862038, "post_id": 57665692, "comment_id": 101780684, "body": "Don&#39;t need a call to <code>scalar</code> since in the &quot;scalar context&quot; (here set by <code>&gt;=</code>) an array is evaluated to its size and that is then used; so just <code>@last2 &gt;= 2</code>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1566864618, "post_id": 57665692, "comment_id": 101781113, "body": "@zdim: True, it&#39;s not needed, but this is a case where I like to be more explicit."}], "tags": [], "owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "is_accepted": false, "score": 1, "last_activity_date": 1566858910, "creation_date": 1566858910, "answer_id": 57665692, "question_id": 57617211, "link": "https://stackoverflow.com/questions/57617211/is-there-a-function-or-arrangement-that-returns-the-penultimate-line-of-a-txt-fi/57665692#57665692", "title": "Is there a function or arrangement that returns the penultimate line of a txt file?", "body": "<p>Requirement: Print the second to last line of input.</p>\n\n<p>The obvious solution is to slurp all of input into an array, but if the input is too large that's going to waste memory. You should also handle the case where input is less than two lines.</p>\n\n<p>My solution: Keep an array that holds just the last two lines. You won't know that you've seen the second to last line until you've reached the end of the input.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy @last2 = ();\nwhile (&lt;&gt;) {\n    if (scalar @last2 &gt;= 2) {\n        shift @last2;\n    }\n    push @last2, $_;\n}\nif (scalar @last2 &gt;= 2) {\n    print $last2[-2];\n}\nelse {\n    die \"Not enough input\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11933034, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Vg4Gc0e3Rug/AAAAAAAAAAI/AAAAAAAAACI/q4tpSfLlct8/photo.jpg?sz=128", "display_name": "gama larios", "link": "https://stackoverflow.com/users/11933034/gama-larios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57643614, "answer_count": 2, "score": 0, "last_activity_date": 1566858910, "creation_date": 1566508885, "last_edit_date": 1566514051, "question_id": 57617211, "link": "https://stackoverflow.com/questions/57617211/is-there-a-function-or-arrangement-that-returns-the-penultimate-line-of-a-txt-fi", "title": "Is there a function or arrangement that returns the penultimate line of a txt file?", "body": "<p>There are three or more lines that the document brings, that is the size of the list\n<code>doc03053220190606125901(1).txt.total.txt</code></p>\n\n<pre><code>Tamafo total: 512 MB\nTotal 43046\u2714\nTotal 14758\n</code></pre>\n\n<p><code>doc05889820190606122032(2).txt.total.txt</code></p>\n\n<pre><code>Tamano total: 1.0 GB\nTotal 156253\u2714\n, Total 761273\n</code></pre>\n\n<p>of the txt documents I want to print only line one before the last</p>\n\n<p>I tried to apply the pop function without the push function to run again pop and bring me the penultimate line\nor at the time of printing I give an example </p>\n\n<hr>\n\n<pre><code>my @arreglo = $row;\npop @arreglo \"$files\\n\"\nprint @arreglo[-1]\"\\n\"; \n\nforeach $filename (@FILES) {\n\n    ## muestra el contenido de la variable\n    print $filename, \"\\n\"; \n    ## abre el archivo o manda una excepcion \n    open(my $file, '&lt;', $filename) \n        or die \"Could not open file '$filename' $!\";\n\n    while (my $row = &lt;$file&gt;) {\n\n        chomp $row;   \n        print (\"$row\\n\");\n\n    }\n</code></pre>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1566502474, "post_id": 57615922, "comment_id": 101686946, "body": "The module does not end in<code>.pm</code>? What is the name of the file with the module code? Why wouldn&#39;t you put the code in a file called <code>the_module.pm</code>?"}, {"owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1566502670, "post_id": 57615922, "comment_id": 101687028, "body": "@mob It is a file I don&#39;t have privileges to touch.  Yes it had shoddy logic, but it also has a function that I need which is defined inside of it."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1566503047, "post_id": 57615922, "comment_id": 101687184, "body": "It is a file called <code>the_module</code>?"}, {"owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1566503259, "post_id": 57615922, "comment_id": 101687270, "body": "@mob its called scripting.  I updated it to be less confusing."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566503659, "post_id": 57616246, "comment_id": 101687433, "body": "The real difference between <code>do</code> and <code>require</code> is that <b><code>require</code> should only be used if the file have a <code>package</code> declaration matching the file name</b> which is obviously not the case here.  Also, both <code>do</code> and <code>require</code> require the file to result in a true value if you want to be able to perform any kind of error checking."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1566504653, "post_id": 57616246, "comment_id": 101687807, "body": "Re &quot;<i>is just syntactic sugar for</i>&quot;, That&#39;s not true. It&#39;s literally sugar for <code>BEGIN {     require Foo::Bar; Foo::Bar::-&gt;import( qw(stuff) ); }</code> and it&#39;s not quite equivalent to what you posted in a couple of ways."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1566505261, "last_edit_date": 1566505261, "creation_date": 1566503584, "answer_id": 57616246, "question_id": 57615922, "link": "https://stackoverflow.com/questions/57615922/how-do-i-import-a-perl-module-outside-of-inc-that-does-not-end-in-pm/57616246#57616246", "title": "How do I import a perl module outside of @INC that does not end in .pm?", "body": "<p>If the source file does not define new namespaces or classes and you just want to read the function definitions or data from a file, Perl provides the <code>do</code> and <code>require</code> functions.</p>\n\n<pre><code>do \"scripting\";\nrequire \"scripting\";\n</code></pre>\n\n<p>The difference between them is that <code>require</code> will look for the file to evaluate to a true value (it expects the last statement in the file to resolve to a non-zero, non-empty value), and will emit a fatal error if this does not happen. (You will often see naked <code>1;</code> statements at the end of modules to satisfy this requirement).</p>\n\n<p>If <code>scripting</code> really contains class code and you do need all the functionality that the <code>use</code> function provides, remember that</p>\n\n<pre><code>use Foo::Bar qw(stuff);\n</code></pre>\n\n<p>is just syntactic sugar for</p>\n\n<pre><code>BEGIN {\n    $file = &lt;find Foo/Bar.pm on @INC&gt;;\n    require \"$file\";\n    Foo::Bar-&gt;import( qw(stuff) )\n}\n</code></pre>\n\n<p>and suggests how you can workaround your inability to use <code>use</code>:</p>\n\n<pre><code>BEGIN {\n    require \"scripting\";\n    scripting-&gt;import()\n}\n</code></pre>\n\n<p>In theory, the file <code>scripting</code> might define some other package and begin with a line like <code>package Something::Else;</code>. Then you would load the package in this module with</p>\n\n<pre><code>BEGIN {\n    require \"scripting\";\n    Something::Else-&gt;import();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1566504845, "last_edit_date": 1566504845, "creation_date": 1566504260, "answer_id": 57616376, "question_id": 57615922, "link": "https://stackoverflow.com/questions/57615922/how-do-i-import-a-perl-module-outside-of-inc-that-does-not-end-in-pm/57616376#57616376", "title": "How do I import a perl module outside of @INC that does not end in .pm?", "body": "<p>If the file has a <code>package</code> directive, the file name and the package directive need to match, so simply fix the file name.</p>\n\n<hr>\n\n<p>If the file doesn't have a <code>package</code> directive, you don't have a <a href=\"https://stackoverflow.com/a/6379109/589924\">module</a>, and you shouldn't use <code>use</code> or <code>require</code>. This can cause problems.</p>\n\n<p>What you have is sometimes called a library, and you should use <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\"><code>do</code></a>.</p>\n\n<pre><code>do('/hard/coded/directory/scripting')\n   or die $@ || $!;\n</code></pre>\n\n<p>(For proper error checking, the file needs to result in a true value.)</p>\n\n<p>That said, you are probably trying to do something really awful. I'm guessing you're either have a configuration file written in Perl or a poorly written module. Perl is not a suitable choice of language for a configuration file, and avoiding namespaces is just bad programming with no benefit.</p>\n"}], "owner": {"reputation": 1140, "user_id": 8981474, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5S2rF.png?s=128&g=1", "display_name": "isakbob", "link": "https://stackoverflow.com/users/8981474/isakbob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 1, "accepted_answer_id": 57616376, "answer_count": 2, "score": 1, "last_activity_date": 1566505261, "creation_date": 1566501956, "last_edit_date": 1592644375, "question_id": 57615922, "link": "https://stackoverflow.com/questions/57615922/how-do-i-import-a-perl-module-outside-of-inc-that-does-not-end-in-pm", "title": "How do I import a perl module outside of @INC that does not end in .pm?", "body": "<h1>Background</h1>\n<p>I am attempting to import a perl module that does not end in <code>.pm</code> with a method similar to <a href=\"https://stackoverflow.com/a/185121/8981474\">this answer</a>:</p>\n<pre><code>use lib &quot;/hard/coded/directory&quot;; use scripting;\n</code></pre>\n<p>However, when I attempt to import a module in this way, I get the following error when running <a href=\"https://users.cs.cf.ac.uk/Dave.Marshall/PERL/node161.html#SECTION001820000000000000000\" rel=\"nofollow noreferrer\"><code>perl -c</code></a>:</p>\n<blockquote>\n<p>Can't locate scripting.pm in @INC (@INC contains: ... ... ... /hard/coded/directory) at <em>name of script</em> line 47.</p>\n<p>BEGIN failed--compilation aborted at <em>name of script</em> line 47.</p>\n</blockquote>\n<h1>Question</h1>\n<p>How do I import a perl module outside of @INC that does not have <code>.pm</code> at the end of the file?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1566489989, "post_id": 57613149, "comment_id": 101681704, "body": "you have made two changes; one is changing from using an if statement modifier to an if statement, and the other is changing from testing if $indx is true to testing if it is numerically equal to 0.  from your question, it seems like you only intended one of these changes, but I am not sure which?"}, {"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1566490260, "post_id": 57613149, "comment_id": 101681828, "body": "@ysth I am trying to write an if statement equivalent of the first code segment"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1566491438, "post_id": 57613149, "comment_id": 101682384, "body": "Simply add parentheses around the condition: <code>if ($indx) { $value = 1.0 - $value; }</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "edited": false, "score": 2, "creation_date": 1566489933, "post_id": 57613214, "comment_id": 101681671, "body": "This doesn&#39;t give the correct answer (this is a small part of a much larger program)"}, {"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1566494675, "post_id": 57613214, "comment_id": 101683703, "body": "<code>unless $index==0</code> or <code>if $index != 0</code>"}], "tags": [], "owner": {"reputation": 1110, "user_id": 9749458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001ed2d47a01593ee5c6463c2f5fe224?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Mitchell", "link": "https://stackoverflow.com/users/9749458/dave-mitchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1566489653, "creation_date": 1566489653, "answer_id": 57613214, "question_id": 57613149, "link": "https://stackoverflow.com/questions/57613149/perl-if-statement-without-equality/57613214#57613214", "title": "Perl if statement without equality", "body": "<pre><code>$value = 1.0 - $value if $indx == 0;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4590, "user_id": 3120884, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/116656a5f0b09d1a524808706d709d9c?s=128&d=identicon&r=PG&f=1", "display_name": "stevesliva", "link": "https://stackoverflow.com/users/3120884/stevesliva"}, "edited": false, "score": 0, "creation_date": 1566494583, "post_id": 57614242, "comment_id": 101683654, "body": "Could also use <code>unless</code> with the OP&#39;s backwards conditional."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1566505882, "post_id": 57614242, "comment_id": 101688223, "body": "FALSE: The number <code>0</code>, the strings<code>&#39;0&#39;</code> and <code>&#39;&#39;</code> (the empty string), the empty list <code>()</code>, and <code>undef</code>"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 1, "creation_date": 1566513467, "post_id": 57614242, "comment_id": 101690371, "body": "ah yes, left out the empty string. Fixed."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 6, "last_activity_date": 1566513449, "last_edit_date": 1566513449, "creation_date": 1566494290, "answer_id": 57614242, "question_id": 57613149, "link": "https://stackoverflow.com/questions/57613149/perl-if-statement-without-equality/57614242#57614242", "title": "Perl if statement without equality", "body": "<p>You start off with the postfix conditional form:</p>\n\n<pre><code>$value = 1.0 - $value if $indx;\n</code></pre>\n\n<p>To translate that the block form, you have:</p>\n\n<pre><code>if( $indx ) {\n   $value = 1.0 - $value \n   }\n</code></pre>\n\n<p>Both of these subtract <code>$value</code> from 1.0 if the value in <code>$indx</code> is true. In Perl, \"true\" is anything that is not false, and false is one of these values: 0, '0', the empty string, undef, and the empty list.</p>\n\n<p>You can't test for any particular true value because there are so many of them. The original code wants to execute that expression for any true value.</p>\n\n<p>You can check that you don't have a false value though. Using the numerical not-equal operator will coerce the value of undef to the numeric value 0:</p>\n\n<pre><code>if( $indx != 0 ) {\n   $value = 1.0 - $value \n   }\n</code></pre>\n\n<p>Similarly, you can check that you have a false value and negate that:</p>\n\n<pre><code>if( !($indx == 0) ) {\n   $value = 1.0 - $value \n   }\n</code></pre>\n\n<p>This is why your translation doesn't work. You start by running the code if the value in <code>$indx</code> is true to running the code if the value if false. You've flipped the test.</p>\n\n<p>But, this is really a lot of work when the postfix conditional (the way that apparently works in the old code) is the Perly way to do it.</p>\n\n<p>You don't say why you want it in another form. Perhaps you are trying to run additional statements. No matter what you want to do, you need to preserve the test.</p>\n"}], "owner": {"reputation": 4229, "user_id": 3973175, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/9c15391d610e59c350912be638b14074?s=128&d=identicon&r=PG", "display_name": "con", "link": "https://stackoverflow.com/users/3973175/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 57614242, "answer_count": 2, "score": 2, "last_activity_date": 1566513449, "creation_date": 1566489381, "last_edit_date": 1566491402, "question_id": 57613149, "link": "https://stackoverflow.com/questions/57613149/perl-if-statement-without-equality", "title": "Perl if statement without equality", "body": "<p>I am reading through code that looks like</p>\n\n<pre><code>$value = 1.0 - $value if $indx;\n</code></pre>\n\n<p>but I want it in the form </p>\n\n<pre><code>if ($indx == 0) {\n    $value = 1.0 - $value;\n }\n</code></pre>\n\n<p>However, the second code sample isn't a correct translation of the first.   There should be some operator after the <code>if $indx</code> statement (I like complete sentences). How can I write the first code sample like the second sample?</p>\n"}, {"tags": ["windows", "file", "perl", "replace", "ip-address"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566477411, "post_id": 57609310, "comment_id": 101674283, "body": "<a href=\"https://metacpan.org/pod/Regexp::Common\" rel=\"nofollow noreferrer\">Regexp::Common</a> is a good starting point for matching an IP address."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1566478560, "post_id": 57609742, "comment_id": 101674977, "body": "Use double quotes <code>... &quot;s&#47;$RE{net}{IPv4}&#47;10.10.111.222&#47;&quot;</code> on Windows command line"}, {"owner": {"reputation": 69, "user_id": 1726965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab68331ab2445c7432a1d3819678b2a?s=128&d=identicon&r=PG", "display_name": "emitter", "link": "https://stackoverflow.com/users/1726965/emitter"}, "edited": false, "score": 0, "creation_date": 1566479140, "post_id": 57609742, "comment_id": 101675373, "body": "Thank you to you both! It works on Windows using Regexp module and also without it:   <code>perl -MRegexp::Common=net -pe &quot;s&#47;$RE{net}{IPv4}&#47;10.10.111.222&#47;&quot; FtpCommands.txt &gt; FtpCommands_mod.txt</code>  &lt;br/&gt; <code>perl -pe &quot;s&#47;[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}&#47;10.10.111.222&zwnj;&#8203;&#47;&quot; FtpCommands.txt &gt; FtpCommands_mod.txt</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1566479533, "post_id": 57609742, "comment_id": 101675626, "body": "@mob Done. Looks funny, though. I assume the standard windows shell doesn&#39;t use $ for variable substitution then?"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 4, "last_activity_date": 1566479465, "last_edit_date": 1566479465, "creation_date": 1566478141, "answer_id": 57609742, "question_id": 57609310, "link": "https://stackoverflow.com/questions/57609310/how-to-replace-a-random-ip-address-in-a-file-perl-windows/57609742#57609742", "title": "How to replace a random IP-address in a file (Perl, Windows)", "body": "<p>If your file has an IPv4 address, using the <a href=\"https://metacpan.org/pod/Regexp::Common\" rel=\"nofollow noreferrer\">Regexp::Common</a> module makes this an easy one-liner:</p>\n\n<pre><code>perl -MRegexp::Common=net -pe \"s/$RE{net}{IPv4}/10.10.111.222/\" FtpCommands.txt &gt; FtpCommands_mod.txt\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 1726965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab68331ab2445c7432a1d3819678b2a?s=128&d=identicon&r=PG", "display_name": "emitter", "link": "https://stackoverflow.com/users/1726965/emitter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 57609742, "answer_count": 1, "score": 2, "last_activity_date": 1566479465, "creation_date": 1566476751, "last_edit_date": 1566478125, "question_id": 57609310, "link": "https://stackoverflow.com/questions/57609310/how-to-replace-a-random-ip-address-in-a-file-perl-windows", "title": "How to replace a random IP-address in a file (Perl, Windows)", "body": "<p>How can I replace a random (unknown) IP-address in a TXT file using Windows Perl?\n(unfortunately I only found solutions mostly for Linux/sed)</p>\n\n<p>My textfile contains FTP commands, containing only one IP address:</p>\n\n<pre><code>open ftp://user:password@123.123.123.123\ncd c:/temp\nmkdir newdir\n</code></pre>\n\n<p>etc.</p>\n\n<p>I tried this, but it did not change anything.</p>\n\n<pre><code>perl -pe s/[0-9]\\{1,3\\}.[0-9]\\{1,3\\}.[0-9]\\{1,3\\}.[0-9]\\{1,3\\}/10.10.111.222/g FtpCommands.txt &gt; FtpCommands_mod.txt\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["perl", "dbm"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11961733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0a9509fd23bee626192679bd4c2b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Becky Cribdon", "link": "https://stackoverflow.com/users/11961733/becky-cribdon"}, "edited": false, "score": 0, "creation_date": 1566914767, "post_id": 57607843, "comment_id": 101799992, "body": "Yes, Perl version conflict sounds likely. Unfortunately, I&#39;m stuck with Perl for the time being. But I&#39;ll look at YAML or JSON if I ever re-write this. Thanks!"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 23, "user_id": 11961733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0a9509fd23bee626192679bd4c2b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Becky Cribdon", "link": "https://stackoverflow.com/users/11961733/becky-cribdon"}, "edited": false, "score": 0, "creation_date": 1566980706, "post_id": 57607843, "comment_id": 101820916, "body": "@BeckyCribdon: It&#39;s not Perl that&#39;s the problem here. You would be likely to have similar problems with different versions of any programming language."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 3, "last_activity_date": 1566474201, "last_edit_date": 1566474201, "creation_date": 1566471600, "answer_id": 57607843, "question_id": 57607673, "link": "https://stackoverflow.com/questions/57607673/dbm-file-is-readable-by-perl-scripts-on-the-machine-that-made-it-but-inappropr/57607843#57607843", "title": "DBM file is readable by Perl scripts on the machine that made it, but &quot;Inappropriate file type or format&quot; on other machines", "body": "<p>It's very likely that your different versions of Perl were built using different versions of the DBM library that are incompatible at a binary level.</p>\n\n<p>I would recommend switching to a text-based interchange format like YAML or JSON.</p>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 11413106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb804df0cd07dea005f85e7b3e9a0d42?s=128&d=identicon&r=PG&f=1", "display_name": "lordadmira", "link": "https://stackoverflow.com/users/11413106/lordadmira"}, "is_accepted": false, "score": 0, "last_activity_date": 1566767666, "creation_date": 1566767666, "answer_id": 57649771, "question_id": 57607673, "link": "https://stackoverflow.com/questions/57607673/dbm-file-is-readable-by-perl-scripts-on-the-machine-that-made-it-but-inappropr/57649771#57649771", "title": "DBM file is readable by Perl scripts on the machine that made it, but &quot;Inappropriate file type or format&quot; on other machines", "body": "<p>If you create .dbm files on each machine, the file command may reveal the version mismatch.</p>\n\n<p>The problem could be anything from 32bit/64bit, the DB_File type, or hardware endianness.</p>\n\n<p>Since you mentioned version 1.852 that means the module's been updated.  v5.18.4 came with 1.827 and v5.26.2 came with 1.840.  One thing to try is to go back to the core lib versions and make the DB file on 1.827 and then see if 1.840 can read it.  And vice versa.</p>\n\n<p>HTH</p>\n"}], "owner": {"reputation": 23, "user_id": 11961733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0a9509fd23bee626192679bd4c2b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Becky Cribdon", "link": "https://stackoverflow.com/users/11961733/becky-cribdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1566768027, "creation_date": 1566470998, "last_edit_date": 1566768027, "question_id": 57607673, "link": "https://stackoverflow.com/questions/57607673/dbm-file-is-readable-by-perl-scripts-on-the-machine-that-made-it-but-inappropr", "title": "DBM file is readable by Perl scripts on the machine that made it, but &quot;Inappropriate file type or format&quot; on other machines", "body": "<p>I have a Perl script that makes a DBM index of a reference file using the <a href=\"https://metacpan.org/pod/DB_File#NAME\" rel=\"nofollow noreferrer\">DB_File</a> module. Another Perl script then uses that DBM file. It works fine if I run both the setup and usage scripts on the same machine.</p>\n\n<p>However, if I make the DBM file on machine A and copy it to machine B, the usage script on machine B can't use the DBM.</p>\n\n<ul>\n<li>Both machines have DB_File version 1.852.</li>\n<li>The DBM file is created with 0666 permissions, and sure enough, its permissions string from ls -ll is \"-rw-r--r--\".</li>\n<li>Machine A has Perl v5.26.2 and B has v5.18.4. Could this mismatch be the problem? B is a Mac and I've read that getting a newer version of Perl is not straightforward.</li>\n</ul>\n\n<p>The reference file (names.txt):</p>\n\n<pre><code>2   |   Bacteria    |   Bacteria &lt;bacteria&gt; |   scientific name |\n4640    |   Musa    |       |   scientific name |\n9606    |   Homo sapiens    |       |   scientific name |\n\n</code></pre>\n\n<p>The setup script that makes the DBM:</p>\n\n<pre><code>#!/usr/bin/perl\n\n    use strict;\n    use warnings;\n    use DB_File;\n    use Fcntl;\n\nmy $namesfile = \"names.txt\";\n\nmy $namesfileDBMids = $namesfile . '_IDs.dbm';     \nmy %namesfileDBMids = (); # Start the hash that will fill the DBM file.\ntie (%namesfileDBMids, \"DB_File\", $namesfileDBMids, O_RDWR|O_CREAT, 0666, $DB_HASH) or die \"Can't open $namesfileDBMids.\\n$!\\n\";\n\nopen (my $names_filehandle, $namesfile) or die \"Could not open $namesfile.\\n$!\\n\"; # Open the input file and fill the hash.\nwhile (1) { # Run this loop until \"last\" is called.\n            my $line = &lt;$names_filehandle&gt;; # Read the next line from the names file.\n\n            if (! defined $line) { last }; # If there is no next line, exit the loop. You've processed the whole file.\n\n            my @line = split(/\\|/, $line); # Otherwise, split the line by | characters.\n            my $name = $line[1];\n            $name =~ s/^\\s+|\\s+$//g; # Trim whitespace off the start and end.\n            my $ID = $line[0];\n            $ID =~ s/^\\s+|\\s+$//g;\n            $namesfileDBMids{$ID} = $name; # Store in the hash.\n}\n\nclose $names_filehandle;\nuntie %namesfileDBMids;\nprint \"Finished indexing.\\n\";  \n\n</code></pre>\n\n<p>And finally, this is the usage script that uses the DBM:</p>\n\n<pre><code>#!/usr/bin/perl\n\n    use strict;\n    use warnings;\n    use DB_File;\n    use Fcntl;\n\nmy $namesfileDBMids = \"names.txt_IDs.dbm\";\n\nmy $ID_to_look_up = 9606;\n\nmy %namesfileDBMids = (); # Set up a hash to hold the DBM file.\ntie (%namesfileDBMids, \"DB_File\", $namesfileDBMids) or die \"Can't open $namesfileDBMids: $!\\n\";\n\nif (exists $namesfileDBMids{$ID_to_look_up}) {\n    my $name = $namesfileDBMids{$ID_to_look_up};\n    print \"Found a name for ID $ID_to_look_up: $name\\n\";\n} else {\n    print \"Couldn't find $ID_to_look_up in the names file.\\n\";\n}\n\n</code></pre>\n\n<p>When the usage script can access the DBM file, it returns this line:</p>\n\n<p><code>Found a name for ID 9606: Homo sapiens</code></p>\n\n<p>When the usage script cannot access the DBM file, it either returns this (on machine B when the DBM was from A):</p>\n\n<p><code>Can't open names.dmp_IDs.dbm: Inappropriate file type or format</code></p>\n\n<p>Or this (on machine A when the DBM was from B):</p>\n\n<p><code>Can't open names.dmp_IDs.dbm:</code></p>\n\n<p>I'm not sure why there is no error message on A. It's a Linux server that I have limited access to.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3734, "user_id": 3537677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e05436d74c08a9efa7db860df7bbf01f?s=128&d=identicon&r=PG", "display_name": "Superlokkus", "link": "https://stackoverflow.com/users/3537677/superlokkus"}, "edited": false, "score": 0, "creation_date": 1566461896, "post_id": 57604807, "comment_id": 101665930, "body": "Welcome to SO! People are usually only able to help when you post either the full file, or better, a file with just the line that also reproduce the errors."}, {"owner": {"reputation": 26832, "user_id": 799163, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QGcz9.jpg?s=128&g=1", "display_name": "RemcoGerlich", "link": "https://stackoverflow.com/users/799163/remcogerlich"}, "edited": false, "score": 0, "creation_date": 1566462278, "post_id": 57604807, "comment_id": 101666111, "body": "That code is Perl. Changing it to /bin/bash would only work if the file were written in bash instead of in Perl. Your Perl file appears to have a bug."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1566462281, "post_id": 57604807, "comment_id": 101666114, "body": "<code>use warnings;</code> is better style than using the <code>-w</code> switch, btw. The former only affects the scope it&#39;s in, the latter affects all files (Which might include poor-quality modules that weren&#39;t written to avoid warnings...)."}, {"owner": {"reputation": 26832, "user_id": 799163, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QGcz9.jpg?s=128&g=1", "display_name": "RemcoGerlich", "link": "https://stackoverflow.com/users/799163/remcogerlich"}, "edited": false, "score": 0, "creation_date": 1566462454, "post_id": 57604807, "comment_id": 101666191, "body": "Changing <code>=~ ?</code> to <code>=~ m?</code> (so adding the initial m to the regex) is worth a try."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 8, "last_activity_date": 1570172220, "last_edit_date": 1570172220, "creation_date": 1566462452, "answer_id": 57605088, "question_id": 57604807, "link": "https://stackoverflow.com/questions/57604807/when-i-run-a-file-which-is-begin-with-usr-bin-perl-w-i-get-a-error-synt/57605088#57605088", "title": "When I run a file which is begin with &quot;#!/usr/bin/perl -w&quot;, I get a error: &quot;syntax error at line 153, near &quot;=~ ?&quot;&quot;", "body": "<p>That is Perl code so the first error message is meaningful.</p>\n\n<p>With delimiters other than <code>//</code> in the match operator you must have the explicit <code>m</code> for it, so </p>\n\n<pre><code>$output_volume =~ m?^([\\S]+).mnc?\n</code></pre>\n\n<p>It is only with <code>//</code> delimiters that the <code>m</code> may be omitted; from <a href=\"https://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">Regex Quote-Like Operators (perlop)</a></p>\n\n<blockquote>\n  <p>If <code>\"/\"</code> is the delimiter then the initial <code>m</code> is optional.</p>\n</blockquote>\n\n<p>See <a href=\"https://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a> for a tutorial introduction to regex and <a href=\"https://perldoc.perl.org/perlre.html\" rel=\"nofollow noreferrer\">perlre</a> for reference.</p>\n\n<p>Also note that the particular delimiters of <code>?</code> trigger specific regex behavior in a special case.  This is discussed by the end of the documentation section in <code>perlop</code> linked above.</p>\n"}, {"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 8, "last_activity_date": 1566462999, "last_edit_date": 1566462999, "creation_date": 1566462601, "answer_id": 57605134, "question_id": 57604807, "link": "https://stackoverflow.com/questions/57604807/when-i-run-a-file-which-is-begin-with-usr-bin-perl-w-i-get-a-error-synt/57605134#57605134", "title": "When I run a file which is begin with &quot;#!/usr/bin/perl -w&quot;, I get a error: &quot;syntax error at line 153, near &quot;=~ ?&quot;&quot;", "body": "<pre><code>$output_volume =~ ?^([\\S]+).mnc?\n</code></pre>\n\n<p>This <em>used</em> to be valid perl and thus might appear in old code and instructional material.</p>\n\n<p>From <a href=\"https://perldoc.pl/perlop#Regexp-Quote-Like-Operators\" rel=\"noreferrer\">perlop</a>:</p>\n\n<blockquote>\n  <p>In the past, the leading m in m?PATTERN? was optional, but omitting it would produce a deprecation warning. As of v5.22.0, omitting it produces a syntax error. If you encounter this construct in older code, you can just add m.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": true, "score": 5, "last_activity_date": 1566465147, "creation_date": 1566465147, "answer_id": 57605850, "question_id": 57604807, "link": "https://stackoverflow.com/questions/57604807/when-i-run-a-file-which-is-begin-with-usr-bin-perl-w-i-get-a-error-synt/57605850#57605850", "title": "When I run a file which is begin with &quot;#!/usr/bin/perl -w&quot;, I get a error: &quot;syntax error at line 153, near &quot;=~ ?&quot;&quot;", "body": "<p>You already have two answers that explain the problem.</p>\n\n<ul>\n<li><code>? ... ?</code> is no longer valid syntax for a match operator. You need <code>m? ... ?</code> instead.</li>\n<li>Until Perl 5.22, your syntax generated a warning. Now it's a fatal error (which is what you are seeing). So I assume you're now running this on a more recent version of Perl.</li>\n</ul>\n\n<p>There are, however, a few other points it is probably worth making.</p>\n\n<ol>\n<li>You say you tried to investigate this by changing the first line of your file from <code>#!/usr/bin/perl -w</code> to <code>#!/bin/bash</code>. I'm not sure how you think this was going to help. This line defines the program that is used to run your code. As you  have Perl code, you need to run it with Perl. Trying to run it with bash is very unlikely to be useful.</li>\n<li>The <code>m? ... ?</code> (or, formerly, <code>? ... ?</code>) syntax triggers an obscure and specialised behaviour. It seems to me that this behaviour isn't required in your case, so you can probably change it to the more usual <code>/ ... /</code>.</li>\n<li>Your regex contains an unescaped dot character. Given that you seem to be extracting the basename from a filename that has an extension, it seems likely that this should be escaped (using <code>\\.</code>) so that it matches an actual dot (rather than any character).</li>\n<li>If you are using this code to extract a file's basename, then using a regex probably isn't the best approach. Perhaps take a look at <a href=\"https://metacpan.org/pod/File::Basename\" rel=\"noreferrer\">File::Basename</a> instead.</li>\n</ol>\n"}], "owner": {"reputation": 73, "user_id": 9738607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/016UB.png?s=128&g=1", "display_name": "nove", "link": "https://stackoverflow.com/users/9738607/nove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 57605850, "answer_count": 3, "score": 7, "last_activity_date": 1570172220, "creation_date": 1566461368, "last_edit_date": 1566461898, "question_id": 57604807, "link": "https://stackoverflow.com/questions/57604807/when-i-run-a-file-which-is-begin-with-usr-bin-perl-w-i-get-a-error-synt", "title": "When I run a file which is begin with &quot;#!/usr/bin/perl -w&quot;, I get a error: &quot;syntax error at line 153, near &quot;=~ ?&quot;&quot;", "body": "<p>When I run a file which is begin with <code>#!/usr/bin/perl -w</code>, I get a error:</p>\n\n<blockquote>\n  <p>syntax error at line 153, near \"=~ ?\"</p>\n</blockquote>\n\n<p>I try to add \"#!/bin/bash\", this error is not append, but I get another </p>\n\n<blockquote>\n  <p>error:\n  \"line 34: syntax error near unexpected token `('\"</p>\n</blockquote>\n\n<p>line 153 in my file:</p>\n\n<pre><code>($output_volume =~ ?^([\\S]+).mnc?) &amp;&amp; ($base_name = $1) ||\n  die \"sharpen_volume failed: output volume does not appear to be\"\n  .\" a minc volume.\\n\";\n</code></pre>\n\n<p>line34 in my file:\nuse MNI::Startup qw(nocputimes);</p>\n"}]