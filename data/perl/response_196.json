[{"tags": ["perl", "reference"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 0, "creation_date": 1539212280, "post_id": 52749862, "comment_id": 92424080, "body": "Either work for me, but this doesn&#39;t answer my question. Not having to use {} is even more confusing for me!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 0, "creation_date": 1539212409, "post_id": 52749862, "comment_id": 92424112, "body": "@EdwardGargan (1) It shows you the syntax of &quot;<i>how to perform</i> [...]&quot; -- how does that not answer your question?  (2) Editing, with more discussion..."}, {"owner": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 0, "creation_date": 1539212582, "post_id": 52749862, "comment_id": 92424156, "body": "&quot;how can we perform [...] <i>if Perl struggles to understand</i>&quot;, I was looking for an explanation for <i>why</i> we can do something, now <i>how</i>, but thanks, I&#39;ll clarify this in the question."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 0, "creation_date": 1539212587, "post_id": 52749862, "comment_id": 92424157, "body": "@EdwardGargan  Completed my answer -- does this help?"}, {"owner": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 0, "creation_date": 1539213605, "post_id": 52749862, "comment_id": 92424405, "body": "It does thanks, but I was looking for a bit more of an explanation on how Perl was handling the code fragments, rather than just why they were going wrong. Sorry for not making this clear in the Q."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 1, "creation_date": 1539217720, "post_id": 52749862, "comment_id": 92425263, "body": "@EdwardGargan Edited a little more, for clarity and completeness, and by now there are other answers which go into other aspects of it :)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1539217995, "last_edit_date": 1539217995, "creation_date": 1539212092, "answer_id": 52749862, "question_id": 52749801, "link": "https://stackoverflow.com/questions/52749801/how-can-be-used-on-a-dereferenced-array-without-first-using/52749862#52749862", "title": "How can #? be used on a dereferenced array without first using @?", "body": "<p>The syntax is</p>\n\n<pre><code>my $lastindex = $#$array_reference;\n</code></pre>\n\n<p>which assigns to <code>$lastindex</code> the index of the last element of the anonymous array which reference is in the variable <code>$array_reference</code>.</p>\n\n<p>The code </p>\n\n<pre><code>my @ary = { $ra };  # works but you get a warning\n</code></pre>\n\n<p>doesn't throw \"an error\" but rather a warning. In other words, you do get <code>@ary</code> with one element, a reference to an anonymous hash. However, a hash need have an even number of elements so you also get a warning that that isn't so.</p>\n\n<p>Your last attempt dereferences the array with <code>@{$array_reference}</code> -- which returns a <em>list</em>, not an array <em>variable</em>.  A \"list\" is a fleeting collection of scalars in memory (think of copying scalars on stack to go elsewhere); there is no notion of \"index\" for such a thing. For this reason a <code>$#@{$ra}</code> isn't even parsed as intended and is a syntax error.</p>\n\n<p>The syntax <code>$#ary</code> works only with a <em>variable</em> <code>@ary</code>, and then there is the <code>$#$arrayref</code> syntax. You can in general write <code>$#{$arrayref}</code> since the curlies allow for an arbitrary expression that evaluates to an array reference but there is no reason for that since you do have a variable with an array reference.</p>\n\n<p>I'd agree readily that much of this syntax takes some getting-used-to, to put it that way.</p>\n"}, {"comments": [{"owner": {"reputation": 1812, "user_id": 205936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8CeA.png?s=128&g=1", "display_name": "S.R.I", "link": "https://stackoverflow.com/users/205936/s-r-i"}, "edited": false, "score": 1, "creation_date": 1539212508, "post_id": 52749906, "comment_id": 92424139, "body": "Sometimes... Sometimes... Sometimes... Lovely, that&#39;s the whole spirit of Perl. TIMTOWDI"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 1812, "user_id": 205936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8CeA.png?s=128&g=1", "display_name": "S.R.I", "link": "https://stackoverflow.com/users/205936/s-r-i"}, "edited": false, "score": 0, "creation_date": 1539212527, "post_id": 52749906, "comment_id": 92424142, "body": "@S.R.I Sure. &quot;Lovely&quot;."}, {"owner": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 0, "creation_date": 1539213300, "post_id": 52749906, "comment_id": 92424329, "body": "Christ -- I&#39;m working through &#39;Beginning Perl&#39; for this job I have coming up and I&#39;m really not enjoying all this ambiguity. Thanks for the descriptive answer man."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1539213317, "post_id": 52749906, "comment_id": 92424335, "body": "Just to make things even more confusing, these days you can use <code>get_array_reference()-&gt;@*</code> to dereference an arrayref too."}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 2, "creation_date": 1539213343, "post_id": 52749906, "comment_id": 92424344, "body": "@EdwardGargan Give <a href=\"http://modernperlbooks.com/books/modern_perl_2016/index.html\" rel=\"nofollow noreferrer\">Modern Perl</a> a try. It provides a more coherent narrative of why things are the way they are in Perl, especially for understanding sigils."}, {"owner": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "edited": false, "score": 0, "creation_date": 1539213407, "post_id": 52749906, "comment_id": 92424361, "body": "@Schwern I have that lined up next, just traipsing through this to get the basics down."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 6, "last_activity_date": 1539213287, "last_edit_date": 1539213287, "creation_date": 1539212446, "answer_id": 52749906, "question_id": 52749801, "link": "https://stackoverflow.com/questions/52749801/how-can-be-used-on-a-dereferenced-array-without-first-using/52749906#52749906", "title": "How can #? be used on a dereferenced array without first using @?", "body": "<p>tl;dr:  It's <code>$#{$array_reference}</code> to match the syntax of <code>$#array</code>.</p>\n\n<hr>\n\n<p><code>{}</code> is overloaded with many meanings and that's just how Perl is.</p>\n\n<p>Sometimes <code>{}</code> creates an anonymous hash. That's what <code>{$array_reference}</code> is doing, trying to make a hash where the key is the stringification of <code>$array_reference</code>, something like <code>\"ARRAY(0x7fb21e803280)\"</code> and there is no value. Because you're trying to create a hash with a key and no value you get an \"odd number of elements\" warning.</p>\n\n<p>Sometimes <code>{...}</code> is a block like <code>sub { ... }</code> or <code>if(...) { ... }</code>, or <code>do {...}</code> and so on.</p>\n\n<p>Sometimes it's a bare block like <code>{ local $/; ... }</code>.</p>\n\n<p>Sometimes it's indicating the key of a hash like <code>$hash{key}</code> or <code>$hash-&gt;{key}</code>.</p>\n\n<p>Preceeded with certain sigils <code>{}</code> makes dereferencing explicit. While you can write <code>$#$array_reference</code> or <code>@$array_reference</code> sometimes you want to dereference something that isn't a simple scalar. For example, if you had a function that returned an array reference you could get its size in one line with <code>$#{ get_array_reference() }</code>. It's <code>$#{$array_reference}</code> to match the syntax of <code>$#array</code>.</p>\n\n<p><code>$#{...}</code> dereferences an array and gets the index. <code>@{...}</code> dereferences an array. <code>%{...}</code> dereferences a hash. <code>${...}</code> dereferences a scalar. <code>*{...}</code> dereferences a glob.</p>\n\n<p>You might find <a href=\"http://modernperlbooks.com/books/modern_perl_2016/03-perl-language.html#VmFyaWFibGVOYW1lc2FuZFNpZ2lscw\" rel=\"noreferrer\">the section on Variable Names and Sigils in Modern Perl</a> helpful to see the pattern better.</p>\n\n<blockquote>\n  <p>It would make more sense to me if this looked like...</p>\n</blockquote>\n\n<p>There's a lot of things like that. Perl has been around since 1987. A lot of these design decisions were made decades ago. The code for deciding what <code>{}</code> means is particularly complex. That there is a distinction between an array and an array reference at all is a bit odd.</p>\n"}, {"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 3, "last_activity_date": 1539213975, "last_edit_date": 1539213975, "creation_date": 1539213640, "answer_id": 52750056, "question_id": 52749801, "link": "https://stackoverflow.com/questions/52749801/how-can-be-used-on-a-dereferenced-array-without-first-using/52750056#52750056", "title": "How can #? be used on a dereferenced array without first using @?", "body": "<blockquote>\n  <p>Perl is confused about the type</p>\n</blockquote>\n\n\n\n<blockquote>\n  <p>Perl struggles to understand that '{$array_reference}' is an array type</p>\n</blockquote>\n\n<p>Well, it's not an array type. Perl doesn't \"struggle\"; you just have wrong expectations.</p>\n\n<p>The <a href=\"https://perldoc.pl/perlreftut#Using-References\" rel=\"nofollow noreferrer\">general rule</a> (as explained in <a href=\"https://perldoc.pl/perlreftut\" rel=\"nofollow noreferrer\"><code>perldoc perlreftut</code></a>) is: You can always use a reference in curly braces in place of a variable name.</p>\n\n<p>Thus:</p>\n\n<pre><code>@array           # a whole array\n@{ $array_ref }  # same thing with a reference\n\n$array[$i]           # an array element\n${ $array_ref }[$i]  # same thing with a reference\n\n$#array           # last index of an array\n$#{ $array_ref }  # same thing with a reference\n</code></pre>\n\n<p>On the other hand, what's going on with</p>\n\n<pre><code>my @array = {$array_reference};\n</code></pre>\n\n<p>is that you're using the syntax for a hash reference constructor, <code>{ LIST }</code>. The warning occurs because the list in question is supposed to have an even number of elements (for keys and values):</p>\n\n<pre><code>my $hash_ref = {\n    key1 =&gt; 'value1',\n    key2 =&gt; 'value2',\n};\n</code></pre>\n\n<p>What you wrote is treated as</p>\n\n<pre><code>my @array = ({\n    $array_reference =&gt; undef,\n});\n</code></pre>\n\n<p>i.e. an array containing a single element, which is a reference to a hash containing a single key, which is a stringified reference (and whose value is <code>undef</code>).</p>\n\n<p>The syntactic difference between a dereference and a hashref constructor is that a dereference starts with a sigil (such as <code>$</code>, <code>@</code>, or <code>%</code>) whereas a hashref constructor starts with just a bare <code>{</code>.</p>\n\n<hr>\n\n<p>Technically speaking the <code>{</code> <code>}</code> in the dereference syntax form an actual block of code:</p>\n\n<pre><code>print ${\n    print \"one\\n\";  # yeah, I just put a statement in the middle of an expression\n    print \"two\\n\";\n    [\"three\"]  # the last expression in this block is implicitly returned\n               # (and dereferenced by the surrounding $ [0] construct outside)\n}[0], \"\\n\";\n</code></pre>\n\n<p>For (hopefully) obvious reasons, no one actually does this in real code.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 5, "last_activity_date": 1539238280, "last_edit_date": 1539238280, "creation_date": 1539228746, "answer_id": 52751759, "question_id": 52749801, "link": "https://stackoverflow.com/questions/52749801/how-can-be-used-on-a-dereferenced-array-without-first-using/52751759#52751759", "title": "How can #? be used on a dereferenced array without first using @?", "body": "\n\n<pre class=\"lang-none prettyprint-override\"><code>$array[$index]\n@array[@indexes]\n@array\n$#array\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>${ \\@array }[$index]\n@{ \\@array }[@indexes]\n@{ \\@array }\n$#{ \\@array }\n</code></pre>\n\n<p>See the pattern? Wherever the <code>NAME</code> of an array isused, you can use a <code>BLOCK</code> that returns a reference to an array instead. That means you can use</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>${ $ref }[$index]\n@{ $ref }[@indexes]\n@{ $ref }\n$#{ $ref }\n</code></pre>\n\n<p>This is illustrated in <a href=\"https://stackoverflow.com/a/46507723/589924\">Perl Dereferencing Syntax</a>.</p>\n\n<hr>\n\n<p>Note that you can omit the curlies if the <code>BLOCK</code> contains nothing but a simple scalar.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$$ref[$index]\n@$ref[@indexes]\n@$ref\n$#$ref\n</code></pre>\n\n<p>There's also an \"arrow\" syntax which is considered clearer.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ref-&gt;[$index]\n$ref-&gt;@[@indexes]\n$ref-&gt;@*\n$ref-&gt;$#*\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 7776989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7992301ccbc082bd6a876ee92de29252?s=128&d=identicon&r=PG&f=1", "display_name": "Edward Gargan", "link": "https://stackoverflow.com/users/7776989/edward-gargan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 52749906, "answer_count": 4, "score": 2, "last_activity_date": 1539238280, "creation_date": 1539211714, "last_edit_date": 1539214160, "question_id": 52749801, "link": "https://stackoverflow.com/questions/52749801/how-can-be-used-on-a-dereferenced-array-without-first-using", "title": "How can #? be used on a dereferenced array without first using @?", "body": "<p>An array in perl is dereferenced like so,</p>\n\n<pre><code>my @array = @{$array_reference};\n</code></pre>\n\n<p>When trying to assign an array to a dereference without the '@', like,</p>\n\n<pre><code>my @array = {$array_reference};\n</code></pre>\n\n<p>Perl throws the error, 'Odd number of elements in anonymous hash at ./sand.pl line 22.' We can't assign it to an array variable becauase Perl is confused about the type.</p>\n\n<p>So how can we perform...</p>\n\n<pre><code>my $lastindex = $#{$array_reference};\n</code></pre>\n\n<p>if Perl struggles to understand that '{$array_reference}' is an array type? It would make more sense to me if this looked like,</p>\n\n<pre><code>my $lastindex = $#@{$array_reference};\n</code></pre>\n\n<p>(despite looking much uglier).</p>\n"}, {"tags": ["perl", "reference", "dereference"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1539210477, "post_id": 52749107, "comment_id": 92423580, "body": "There&#39;s no need to use <code>&amp;</code> to call subroutines; in fact, it can have other effects you probably didn&#39;t intend as detailed in <a href=\"https://perldoc.pl/perlsub\" rel=\"nofollow noreferrer\">perlsub</a>."}, {"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539221711, "post_id": 52749107, "comment_id": 92426049, "body": "Woah! Makes current @_ visible to called subroutine?!? That&#39;s awesome! But, I am calling each subroutine from the main. I do utilize @ARGV to pull in a filename; I don&#39;t think that&#39;s happening here though. Perhaps, but not sure. I&#39;ll check my data before referencing it to make sure I do not have array references in my arrays before referencing them. These multidimensional arrays and hashes are intense!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539232014, "post_id": 52749107, "comment_id": 92428295, "body": "If you got <code>Entered get_lines_from_program sub ARRAY(0x81c20dc)</code>, it&#39;s because  <code>@this</code> contains a single element that&#39;s a reference to an array. In other words, it looks like you have a bug in the code you didn&#39;t show us"}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1539222254, "post_id": 52749574, "comment_id": 92426190, "body": "Thanks for the answer! I say I&#39;m brand new to Perl, but I&#39;m just masking my ineptitude at learning programming languages... any of them.. I have some formal education in perl, two classes provided through my employer, but I&#39;m having to sneak in my actual utilization of the tool with my normal job function. So, I go days, or over a week sometimes without having any exposure to it. I am aware of the multidimensional capabilities of arrays, and will eventually need to use the language to interface with SQL tables to maintain current information on thousands and thousands of our products. YAY!"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1539211025, "last_edit_date": 1539211025, "creation_date": 1539210209, "answer_id": 52749574, "question_id": 52749107, "link": "https://stackoverflow.com/questions/52749107/are-all-references-not-dereferenced-the-same/52749574#52749574", "title": "Are all references not dereferenced the same?", "body": "<p>It is likely that you stored this array reference in an array somewhere. This means you now have an array with one element: an array reference. (References are how you nest data structures in Perl; see <a href=\"https://perldoc.pl/perllol\" rel=\"nofollow noreferrer\">perllol</a>). When you interpolate this array into a string, the one element (array reference) is printed, and the stringified form of an array reference looks like the string you saw. Instead, store the array reference in a scalar variable wherever you retrieve it, which can be passed to your other subroutines as-is.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $aref = sub_returning_aref();\nother_sub($aref);\n\nsub sub_returning_aref {\n  my @stuff;\n  return \\@stuff;\n}\n\nsub other_sub {\n  my ($aref) = @_;\n  print \"@$aref\\n\";\n}\n</code></pre>\n\n<p>The key to remember is that <code>\\@array</code> returns a reference which is a scalar value, and can then be used as any other scalar, but must be dereferenced to yield the array contents.</p>\n\n<p><a href=\"https://perldoc.pl/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> is a good core tool for determining what exactly you have in a variable when debugging.</p>\n\n<pre><code>use Data::Dumper;\nprint Dumper \\@array;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "edited": false, "score": 0, "creation_date": 1539221943, "post_id": 52749592, "comment_id": 92426113, "body": "I had that backwards. As you probably noticed, I tried to camouflage the nature of my code, and failed. The sorted routine returns the value of the referenced array @sorted: <code>@sorted = sub(\\@reference_ar, \\@arraytosort_ar, \\@sorted);</code> When I finished writing that it occurred to me that it is dumb to pass a reference for an array I am setting equal to the returned value of the sub... Sheesh! Thanks!"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1579901675, "last_edit_date": 1579901675, "creation_date": 1539210295, "answer_id": 52749592, "question_id": 52749107, "link": "https://stackoverflow.com/questions/52749107/are-all-references-not-dereferenced-the-same/52749592#52749592", "title": "Are all references not dereferenced the same?", "body": "<p>This depends on what you do with those references in your subs. Here are some notes on that</p>\n\n<p>If you pass a reference and work with the reference</p>\n\n<pre><code>func(\\@ary);\n...\nsub func {\n    my ($ra) = @_;\n    ...\n    push @$ra, @some_values;  # changes @ary in the caller\n}\n</code></pre>\n\n<p>then you've just changed the <code>@ary</code> in the caller.</p>\n\n<p>However, if you create a local copy in the sub</p>\n\n<pre><code>sub func {\n    my ($ra) = @_;\n    my @local_ary = @$ra;\n    ...\n    return \\@local_ary;    # return reference to brand new @local_ary\n}\n</code></pre>\n\n<p>then changes to <code>@local_ary</code> don't affect the <code>@ary</code> in the caller (unless it's involved with the return of course -- being overwritten by it, or the return being <code>push</code>ed onto it).</p>\n\n<p>Another point: arguments passed to an array are aliased in <code>@_</code> so if in the sub you work with <code>$_[0]</code> (etc) then you are directly changing data in the caller.</p>\n\n<p>From what is shown it is clear that <code>@lines_r</code> has one element,  which itself is an array reference.  How it got there is hard to tell without seeing the code for that. One possibility is that you returned an arrayref from some function, <code>return \\@local_ary</code>, which you didn't dereference in the caller but merely added it to <code>@this</code> or <code>@that</code> (referenced by <code>$list_r</code>).</p>\n\n<hr>\n\n<p>A few comments on the code in the question</p>\n\n<p>The <code>&amp;</code> in front of a sub has subtle effects, which you almost certainly don't need.  It used to be needed a long, long time ago but now it isn't and shouldn't be used for a \"normal\" call.</p>\n\n<p>Arrays are passed to the sub by reference, which is good as it avoids possible massive amounts of data copy.  However, you clearly return a list, as it is assigned directly to arrays. If those arrays may have a lot of data better return the reference, and dereference it in the caller</p>\n\n<pre><code>my $ra = func(...);   # func() returns an array reference\nmy @ary = @$ra;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>my @ary = @{ func(...) };\n</code></pre>\n\n<p>I'd consider <em>always</em> returning a reference for an array with data (as opposed to a small collection of scalar variables to return in a list, where the choice depends merely on caller's preferences).</p>\n\n<p>But above all this, also consider that there is normally no reason to dereference the returned arrayref in order to create another array; it's yet more data copy, which is expensive, while you can do any and all that you need with the array reference anyway (see end of <a href=\"https://stackoverflow.com/a/59740467/4653379\">this post</a> for instance).</p>\n\n<p>Finally, be very, very careful with what you are doing if you pass an array by reference and assign the return to that same array.</p>\n"}], "owner": {"reputation": 125, "user_id": 8695634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KiBSw.jpg?s=128&g=1", "display_name": "WetCheerios", "link": "https://stackoverflow.com/users/8695634/wetcheerios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52749574, "answer_count": 2, "score": 1, "last_activity_date": 1579901675, "creation_date": 1539207257, "question_id": 52749107, "link": "https://stackoverflow.com/questions/52749107/are-all-references-not-dereferenced-the-same", "title": "Are all references not dereferenced the same?", "body": "<p>I am building a program with several routines I'd like to be able to use over and over. Oh, I'm also an absolute beginner with perl, so there's that. So, I have arrays that I fill with lines of text I pull out of files so I can parse, modify, compare, etc., with either user input or other bits of data I pull from (an)other file(s) depending on the program the subroutine is deployed in.</p>\n\n<p>So, I have one subroutine I pass three array references to:</p>\n\n<pre><code>@sorted = &amp;sort_arrays(\\@order, \\@ktms, \\@sorted);\n</code></pre>\n\n<p>I dereference the arrays after passing in the sub for a sanity check like so:</p>\n\n<pre><code>sub sort_arrays {\nmy ($ref_array, $list_array, $sorted_r) = @_;\nprint \"@{$ref_array} \\n\"; print \"@{$list_array} \\n\"; print \"@{$sorted_r} \\n\";\n</code></pre>\n\n<p>and I get the values of each cell of each array printed on a single line each with a single space between them. Great! I actually had this working as an individual program to sort a random generated file from a master based on the order the random values appear in the master. Now, I am trying to make other subroutines generic and reusable with references, but I'm not having the same luck with dereferencing them. For example:</p>\n\n<pre><code>@that = &amp;get_ktms_from_program(\\@this, \\@that);\n</code></pre>\n\n<p>But, when I try to dereference them, I get bad news!</p>\n\n<pre><code>    print \"\\nEntered get_lines_from_program sub\\n\"; \n    my ($lines_r, $parsed_r) = @_;\n    print \"@{$lines_r}\\n\";\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>Entered get_lines_from_program sub\nARRAY(0x81c20dc)\n</code></pre>\n\n<p>So, for some reason, I am unable to dereference THIS array with the same method used earlier. What gives? TIA for the help!</p>\n"}, {"tags": ["python", "perl", "awk"], "comments": [{"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1539198149, "post_id": 52747087, "comment_id": 92418740, "body": "Please add sample input and your desired output for that sample input to your question."}, {"owner": {"reputation": 15, "user_id": 7987148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c38dcd26452a3bfbedefd3b65d05ca?s=128&d=identicon&r=PG&f=1", "display_name": "Meghan Rudd", "link": "https://stackoverflow.com/users/7987148/meghan-rudd"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1539198213, "post_id": 52747087, "comment_id": 92418770, "body": "The files are too large to add a sample. I essentially want to extract lines from the PatientID.txt file where the first column value matches a given value.  Print all of those lines to a new file."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1539198221, "post_id": 52747087, "comment_id": 92418773, "body": "yes, you can write a perl or python script to do this."}, {"owner": {"reputation": 15, "user_id": 7987148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c38dcd26452a3bfbedefd3b65d05ca?s=128&d=identicon&r=PG&f=1", "display_name": "Meghan Rudd", "link": "https://stackoverflow.com/users/7987148/meghan-rudd"}, "edited": false, "score": 0, "creation_date": 1539198312, "post_id": 52747087, "comment_id": 92418816, "body": "Could you show me an example? I&#39;m not sure how to put these awk commands into either perl or python."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539200598, "post_id": 52747087, "comment_id": 92419858, "body": "You can also do it in a single awk script. Look up how to print to a file instead of standard outout in an awk manual."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7987148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c38dcd26452a3bfbedefd3b65d05ca?s=128&d=identicon&r=PG&f=1", "display_name": "Meghan Rudd", "link": "https://stackoverflow.com/users/7987148/meghan-rudd"}, "edited": false, "score": 0, "creation_date": 1539261504, "post_id": 52747703, "comment_id": 92443544, "body": "Thanks for the suggestions, will this work when my sample names are not sequential like Sample A, B, C, D etc?  I have over 300 samples and the names are like a bar code.  example xx27-03-A10X and xx27-7A-73F0"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "reply_to_user": {"reputation": 15, "user_id": 7987148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c38dcd26452a3bfbedefd3b65d05ca?s=128&d=identicon&r=PG&f=1", "display_name": "Meghan Rudd", "link": "https://stackoverflow.com/users/7987148/meghan-rudd"}, "edited": false, "score": 0, "creation_date": 1539263488, "post_id": 52747703, "comment_id": 92444818, "body": "there are better ways to handle that case, your question should be descriptive of your actual problem."}, {"owner": {"reputation": 15, "user_id": 7987148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c38dcd26452a3bfbedefd3b65d05ca?s=128&d=identicon&r=PG&f=1", "display_name": "Meghan Rudd", "link": "https://stackoverflow.com/users/7987148/meghan-rudd"}, "edited": false, "score": 0, "creation_date": 1539264887, "post_id": 52747703, "comment_id": 92445743, "body": "I&#39;ll try to rephrase my question.  I have a very large file with data for thousands of samples. I would like to extract data for a set of samples IDs contained in the large file.  How can I extract data that is specific for a list of sample IDs?"}], "tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 1, "last_activity_date": 1539200649, "creation_date": 1539200649, "answer_id": 52747703, "question_id": 52747087, "link": "https://stackoverflow.com/questions/52747087/combine-awk-commands-into-perl-or-python/52747703#52747703", "title": "Combine awk commands into perl or python", "body": "<p><code>awk</code> can do the same with ease</p>\n\n<pre><code>$ awk -F'\\t' '$1~/^Sample[A-F]$/{print &gt; ($1\".txt\")}' PatientID.txt\n$ cat Sample{A..F}.txt &gt; SampleX.txt\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7987148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c38dcd26452a3bfbedefd3b65d05ca?s=128&d=identicon&r=PG&f=1", "display_name": "Meghan Rudd", "link": "https://stackoverflow.com/users/7987148/meghan-rudd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1539369452, "answer_count": 1, "score": -1, "last_activity_date": 1539200649, "creation_date": 1539198036, "question_id": 52747087, "link": "https://stackoverflow.com/questions/52747087/combine-awk-commands-into-perl-or-python", "closed_reason": "Needs more focus", "title": "Combine awk commands into perl or python", "body": "<p>I'm relativity new using command line to manipulate files. \nI have a very large text file and I need to extract certain lines from the file. \nI can do this with awk</p>\n\n<pre><code>awk -F '\\t' '{ if ($1 == \"SampleA\") print $0}' PatientID.txt &gt; SampleA.txt\n</code></pre>\n\n<p>I would like to do this for many Samples at the same time and not have to wait for each to finish on the command line, can I write a perl or python script to do this?  I have run perl and python scripts others have written but have not written any of my own. </p>\n\n<p>Want to do</p>\n\n<pre><code>awk -F '\\t' '{ if ($1 == \"SampleA\") print $0}' PatientID.txt &gt; SampleA.txt\nawk -F '\\t' '{ if ($1 == \"SampleB\") print $0}' PatientID.txt &gt; SampleB.txt\nawk -F '\\t' '{ if ($1 == \"SampleC\") print $0}' PatientID.txt &gt; SampleC.txt\nawk -F '\\t' '{ if ($1 == \"SampleC\") print $0}' PatientID.txt &gt; SampleD.txt\nawk -F '\\t' '{ if ($1 == \"SampleE\") print $0}' PatientID.txt &gt; SampleE.txt\nawk -F '\\t' '{ if ($1 == \"SampleF\") print $0}' PatientID.txt &gt; SampleF.txt\n</code></pre>\n\n<p>AND then concatenate all of the SampleX.txt files into one file. </p>\n"}, {"tags": ["perl", "math", "ode", "gsl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539193955, "post_id": 52745985, "comment_id": 92416848, "body": "Needs more information. Sample input and expected output, C code you&#39;re trying to translate to perl, what you&#39;ve tried, etc."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1539194664, "post_id": 52745985, "comment_id": 92417141, "body": "Judged by the docs the interface should be &quot;the same&quot; as in the library, so you&#39;d have to tweak things around in Perl.  If you show us your code that isn&#39;t working then somebody may be able to help"}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1539364879, "post_id": 52745985, "comment_id": 92489959, "body": "Note, it seems <code>Math::GSL::ODEIV</code> only supports the old ODEIV library. If you want to use the new ODEIV2 library, see the module <a href=\"https://metacpan.org/pod/PerlGSL::DiffEq\" rel=\"nofollow noreferrer\">PerlGSL::DiffEq</a>"}], "owner": {"reputation": 11, "user_id": 10485623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/226b0739d10759d8746094b31e89e774?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Morgan", "link": "https://stackoverflow.com/users/10485623/tom-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539369131, "creation_date": 1539193421, "last_edit_date": 1539197765, "question_id": 52745985, "link": "https://stackoverflow.com/questions/52745985/trying-to-use-perl-mathgslodeiv", "title": "Trying to use perl Math::GSL::ODEIV", "body": "<p>I am trying to use the perl module <a href=\"https://metacpan.org/pod/Math::GSL::ODEIV\" rel=\"nofollow noreferrer\">Math::GSL::ODEIV</a> - the perl interface to the Gnu Scientific Library. I can follow the example given in the GSL docs to solve the van der Pol diff. Equation. However I am unable to see how to translate to the perl module functions. Has anyone used this module? If so, can I see some example perl code?</p>\n"}, {"tags": ["linux", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1539192216, "post_id": 52745684, "comment_id": 92416035, "body": "Sorry, this is not the way StackOverflow works. Questions of the form &quot;I want to do X, please give me tips and/or sample code&quot; are considered off-topic. Please visit the <a href=\"https://stackoverflow.com/help\">help center</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and especially read <a href=\"http://meta.stackoverflow.com/q/284236\">Why is \u201cCan someone help me?\u201d not an actual question?</a>"}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1539197264, "post_id": 52745684, "comment_id": 92418351, "body": "<a href=\"http://grymoire.com/Unix/Awk.html\" rel=\"nofollow noreferrer\">grymoire.com/Unix/Awk.html</a> is a good place to learn awk and do text processing.."}], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1539276654, "post_id": 52746910, "comment_id": 92453146, "body": "Hope it works.. consider giving an upvote"}], "tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": true, "score": -1, "last_activity_date": 1539197331, "creation_date": 1539197331, "answer_id": 52746910, "question_id": 52745684, "link": "https://stackoverflow.com/questions/52745684/extract-time-between-2-lines/52746910#52746910", "title": "extract time between 2 lines", "body": "<p>Check this Perl solution:</p>\n\n<pre><code>$ head win_app.dat\n7/26/2018 12:15:51.512 AWT-EventQueue-0 **Protecting** graphical interface\n7/26/2018 12:17:00.121 MULTITHREAD APP It goes to preserve the context of the destination window LARTVERT31RT3111C when setting the origin data DATA_ENTRY\n7/26/2018 12:52:48.681 MULTITHREAD NACAR **Unprotecting** graphic interface\n\"n lines\"\n7/26/2018 14:00:51.512 AWT-EventQueue-0 **Protecting** graphical interface\n7/26/2018 14:35:35.230 MULTITHREAD APP It goes to preserve the context of the destination window LAPEVEBIOMBIOM03C when setting the origin data DATA_ENTRY\n7/26/2018 14:52:48.681 MULTITHREAD NACAR **Unprotecting** graphic interface\n\"n lines\"\n7/26/2018 15:00:51.512 AWT-EventQueue-0 **Protecting** graphical interface\n7/26/2018 15:11:19.100 MULTITHREAD APP It goes to preserve the context of the destination window LAPEVEPE27PE2701C when setting the origin data DATA_ENTRY\n\n$ perl -lane ' { $x=sprintf(\"%s,%s\",$F[0],$F[1]) if /AWT-EventQueue/ ; $y=sprintf(\"%s\",$F[-7]) if /MULTITHREAD APP/; $z=sprintf(\"%s\",$F[1]) if /MULTITHREAD NACAR/ ; print \"$x,$z,$y\" if /n lines/ } ' win_app.dat\n7/26/2018,12:15:51.512,12:52:48.681,LARTVERT31RT3111C\n7/26/2018,14:00:51.512,14:52:48.681,LAPEVEBIOMBIOM03C\n7/26/2018,15:00:51.512,15:22:48.681,LAPEVEPE27PE2701C\n7/26/2018,15:00:51.512,15:22:48.681,LARTVEIT29IT2901C\n7/26/2018,15:30:53.512,15:49:48.681,LAPEVEPE27PE2701C\n7/26/2018,15:30:53.512,15:49:48.681,LAPEVEBIOMBIOM03C\n7/26/2018,15:30:53.512,15:49:48.681,LARTVERT31RT3111C\n7/26/2018,15:30:53.512,15:49:48.681,LAESVEES03ES0301C\n\n$\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10194161, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HGK1Axq8qek/AAAAAAAAAAI/AAAAAAAAA9Q/PA5js_qjGRk/photo.jpg?sz=128", "display_name": "kdetony", "link": "https://stackoverflow.com/users/10194161/kdetony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1539232252, "accepted_answer_id": 52746910, "answer_count": 1, "score": -2, "last_activity_date": 1539292651, "creation_date": 1539192150, "last_edit_date": 1539292651, "question_id": 52745684, "link": "https://stackoverflow.com/questions/52745684/extract-time-between-2-lines", "closed_reason": "Needs more focus", "title": "extract time between 2 lines", "body": "<p>I have a file with data of the form:</p>\n\n<pre><code>7/26/2018 10:01:52.084 MULTITHREAD APP It goes to preserve the context of the destination window LAESVEES03ES0301C when setting the origin data DATA_ENTRY\n\"n lines\"\n7/26/2018 12:15:51.512 AWT-EventQueue-0 **Protecting** graphical interface\n7/26/2018 12:17:00.121 MULTITHREAD APP It goes to preserve the context of the destination window LARTVERT31RT3111C when setting the origin data DATA_ENTRY\n7/26/2018 12:52:48.681 MULTITHREAD APP **Unprotecting** graphic interface\n\"n lines\"\n7/26/2018 14:00:51.512 AWT-EventQueue-0 **Protecting** graphical interface\n7/26/2018 14:35:35.230 MULTITHREAD APP It goes to preserve the context of the destination window LAPEVEBIOMBIOM03C when setting the origin data DATA_ENTRY\n7/26/2018 14:52:48.681 MULTITHREAD APP **Unprotecting** graphic interface\n\"n lines\"\n7/26/2018 15:00:51.512 AWT-EventQueue-0 **Protecting** graphical interface\n7/26/2018 15:11:19.100 MULTITHREAD APP It goes to preserve the context of the destination window LAPEVEPE27PE2701C when setting the origin data DATA_ENTRY\n7/26/2018 15:22:48.681 MULTITHREAD APP **Unprotecting** graphic interface\n\"n lines\"\n7/26/2018 15:00:51.512 AWT-EventQueue-0 **Protecting** graphical interface\n7/26/2018 15:11:19.100 MULTITHREAD APP It goes to preserve the context of the destination window LARTVEIT29IT2901C when setting the origin data DATA_ENTRY\n7/26/2018 15:22:48.681 MULTITHREAD APP **Unprotecting** graphic interface\n\"n lines\"\n7/26/2018 15:30:53.512 AWT-EventQueue-0 Protecting graphical interface\n7/26/2018 15:41:19.100 MULTITHREAD APP It goes to preserve the context of the destination window LAPEVEPE27PE2701C when setting the origin data DATA_ENTRY\n7/26/2018 15:49:48.681 MULTITHREAD APP Unprotecting graphic interface\n\"n lines\"\n7/26/2018 16:55:35.000 MULTITHREAD APP It goes to preserve the context of the destination window LAPEVEBIOMBIOM03C when setting the origin data DATA_ENTRY\n\"n lines\"\n7/26/2018 16:23:00.000 MULTITHREAD APP It goes to preserve the context of the destination window LARTVERT31RT3111C when setting the origin data DATA_ENTRY\n\"n lines\"\n7/26/2018 16:31:31.000 MULTITHREAD APP It goes to preserve the context of the destination window LAESVEES03ES0301C when setting the origin data DATA_ENTRY\n\"n lines\"\n</code></pre>\n\n<p>I want to get an exit in this way:\nDate,Hour_Start, Hour_End, Windows_APP</p>\n\n<p>for example:</p>\n\n<pre><code>7/26/2018,12:15:51.512,12:52:48.681,LARTVERT31RT3111C\n7/26/2018,14:00:51.512,14:52:48.681,LAPEVEBIOMBIOM03C\n7/26/2018,15:00:51.512,15:22:48.681,LAPEVEPE27PE2701C\n7/26/2018,15:00:51.512,15:22:48.681,LARTVEIT29IT2901C\n</code></pre>\n\n<p>I stop here because they start repeating LAPEVEPE27PE2701C,LAPEVEBIOMBIOM03C,LARTVERT31RT3111C and <strong>LAESVEES03ES0301C</strong>( here start )</p>\n\n<p>the file with this data weighs 3.5Mb aprox. and there are many lines</p>\n\n<p>someone could give me a hand how to do it with awk or similar ( perl or bash )</p>\n"}, {"tags": ["windows", "perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539188520, "post_id": 52744416, "comment_id": 92413974, "body": "The easiest workaround might be to use a regular Windows Perl like Strawberry Perl. Mixing Cygwin and Windows libs can be complicated."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539189608, "post_id": 52744416, "comment_id": 92414620, "body": "@Grinnz Tell me about it - but that involves changing all the build machines..."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539190911, "post_id": 52744416, "comment_id": 92415359, "body": "Cheap and cheerful workround:  I&#39;m running this all from a bash script anyway.  Just <code>rm -f NUL</code> after running the perl script."}], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1539288168, "creation_date": 1539187301, "question_id": 52744416, "link": "https://stackoverflow.com/questions/52744416/controlling-what-perl-considers-the-system-shell", "title": "Controlling what Perl considers the &#39;system shell&#39;", "body": "<p>I am running an externally supplied perl script (the OpenSSL configure script if you are interested).  It contains the line:</p>\n\n<pre><code>my $vew=`nasmw -v 2&gt;NUL`;\n</code></pre>\n\n<p>I am running on Windows, but I am using the version of perl which ships with  git version 2.19.0.windows.1, and this appears to by a Cygwin perl which uses sh to execute backticks.  The problem is that this creates a file called 'NUL' rather than throwing stderr away.  Amongst other things you can't delete such a file from Explorer or the command line.  (You can via bash).</p>\n\n<p>I have read <a href=\"https://stackoverflow.com/q/35668359/771073\">this question</a> but setting PERL5SHELL to <code>C:\\Windows\\System32\\cmd.exe /C</code> doesn't stop the file being created.</p>\n\n<p>Is there a way of controlling the shell that a Cygwin perl uses?</p>\n\n<p>Perl -v reports version 5.26.2</p>\n\n<p>(The obvious workround is to patch <code>NUL</code> to <code>/dev/null</code> but I'd rather not do that if I can avoid it.)</p>\n"}, {"tags": ["perl", "loops", "unix", "scripting", "sybase"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1539184134, "post_id": 52742789, "comment_id": 92411319, "body": "We could really do with some sample input as plain text, and desired output in the question - we don&#39;t really like links to images, because it makes replicating the data for testing purposes a lot harder (e.g. hidden characters, etc.)  But we also don&#39;t know what a &#39;spid&#39; and &#39; cid&#39; is, so we have to sort of guess based on what what you&#39;ve put in place."}, {"owner": {"reputation": 15, "user_id": 10484688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ETsJ.png?s=128&g=1", "display_name": "Mohammed Dirir", "link": "https://stackoverflow.com/users/10484688/mohammed-dirir"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1539185094, "post_id": 52742789, "comment_id": 92411959, "body": "i have took out the link to the images and got them listed down instead, can you check it out. Also the cid and the spid are two types of entries in a database, cid is the client id and each client id can have multiple spids."}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1539260608, "post_id": 52743842, "comment_id": 92442971, "body": "I&#39;m hesitant to correct the man that literally wrote the book on it, but surely <code>foreach @results</code> would be a much more elegant way to iterate?"}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1539269455, "post_id": 52743842, "comment_id": 92449121, "body": "I merely took the for loop from the question without thinking much about it. I typically don&#39;t care to push style on StackOverflow so I don&#39;t distract from the main point. Barraging people with all sorts of other things they didn&#39;t ask tends to make us look shrill."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": true, "score": 3, "last_activity_date": 1539185583, "creation_date": 1539185583, "answer_id": 52743842, "question_id": 52742789, "link": "https://stackoverflow.com/questions/52742789/sorting-split-variables-from-an-array-in-a-perl-script-into-this-specific-format/52743842#52743842", "title": "Sorting split variables from an array in a Perl script into this specific format?", "body": "<p>Use a hash to collect the values indexed on the <code>cid</code>. Once you've collected everything, output one line per key in the hash:</p>\n\n<pre><code>my %hash;\n\nfor (my $count = 0; $count &lt; $size; $count++)\n      {\n         my ($spid, $cid) = split /\\s+/, $results[$count];\n         # the hash value is an anonymous array\n         # it's created automatically for you when\n         # you treat the value as a reference\n         push @{ $hash{$cid} }, $spid;\n\n      }  \n\nforeach my $cid ( sort keys %hash ) \n    {\n      say \"$cid- \", join \" \", @{ $hash{$cid} };\n    }\n</code></pre>\n\n<p>This is a very common Perl technique. Most of the times when \"only once\" or \"unique\" show up in the problem, someone is going to reach for a hash.</p>\n"}], "owner": {"reputation": 15, "user_id": 10484688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ETsJ.png?s=128&g=1", "display_name": "Mohammed Dirir", "link": "https://stackoverflow.com/users/10484688/mohammed-dirir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 52743842, "answer_count": 1, "score": 1, "last_activity_date": 1551663785, "creation_date": 1539182414, "last_edit_date": 1551663785, "question_id": 52742789, "link": "https://stackoverflow.com/questions/52742789/sorting-split-variables-from-an-array-in-a-perl-script-into-this-specific-format", "title": "Sorting split variables from an array in a Perl script into this specific format?", "body": "<p>I have wrote a script that calls another script using two arguments where one is a log file and the other is a sql file, what i'm trying to capture is a spid and a cid (two entries) from the database, i have managed to capture the output into an array. for example 325 is a spid &amp; p58 is a cid.</p>\n\n<pre><code>325    p58\n525    p58\n591    p58\n1180   p85\n</code></pre>\n\n<p>but i am supposed to arrange it in a specific format where there can't be any repeated cids and each cid should have its spids printed next to it. I have managed to split the array and this is what i could come up with so far </p>\n\n<pre><code>p58- 325\np58- 525\np58- 591\np58- 1180 \n</code></pre>\n\n<p>and here's the required format.</p>\n\n<p>p58- 325, 525, 591, 1180</p>\n\n<pre><code>    my @results = capture( [0,1,2], $^X, \"/asp_batch/bin/clientquery.pl\", @ARGV);\n\n\n    my $size =  scalar(@results);\n\n\n    for (my $count = 0; $count &lt; $size; $count++)\n      {\n         my ($spid, $cid) = split /\\s+/, $results[$count];\n         print $cid, \"- \";\n         print $spid, \"\\n\";\n\n      }     \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 7, "creation_date": 1539166026, "post_id": 52737688, "comment_id": 92399992, "body": "you need to use the full path: <code>-s &quot;$dir&#47;$file&quot;</code>, just like you do in the line above"}, {"owner": {"reputation": 39, "user_id": 5654295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4387154a14c5671f6984db0970b4c7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Sproggit", "link": "https://stackoverflow.com/users/5654295/sproggit"}, "reply_to_user": {"reputation": 3269, "user_id": 93745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8F5Wc.jpg?s=128&g=1", "display_name": "tinita", "link": "https://stackoverflow.com/users/93745/tinita"}, "edited": false, "score": 0, "creation_date": 1539170677, "post_id": 52737688, "comment_id": 92402727, "body": "Thanks, this works  - I thought I had tried this previously and that it had failed, but I guess was mistaken."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1539176985, "post_id": 52737688, "comment_id": 92406742, "body": "Would someone mind answering this? It would be nice for it to not show up unanswered :)"}], "answers": [{"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1539180665, "creation_date": 1539180665, "answer_id": 52742210, "question_id": 52737688, "link": "https://stackoverflow.com/questions/52737688/cannot-get-the-size-of-a-file-from-its-directory-listing/52742210#52742210", "title": "Cannot get the size of a file from its Directory Listing", "body": "<p>Something like the below one liner would work..</p>\n\n<pre><code>/usr/libexec&gt; \\ls -1 | perl -ne '  while (&lt;&gt;) {chop($_); $size= -s \"$_\"; print \"$size, $_\\n\" if not -d $_ } '\n96168, gam_server\n18808, gnupg-pcsc-wrapper\n52232, gpg2keys_curl\n61120, gpg2keys_finger\n60888, gpg2keys_hkp\n66432, gpg2keys_ldap\n100344, gpg-check-pattern\n85616, gpg-preset-passphrase\n210416, gpg-protect-tool\n21096, hald-addon-acpi\n22352, hald-addon-generic-backlight\n24136, hald-addon-hid-ups\n17328, hald-addon-imac-backlight\n31448, hald-addon-input\n22776, hald-addon-ipw-killswitch\n26224, hald-addon-leds\n22384, hald-addon-macbook-backlight\n22672, hald-addon-macbookpro-backlight\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1539191941, "last_edit_date": 1539191941, "creation_date": 1539191582, "answer_id": 52745529, "question_id": 52737688, "link": "https://stackoverflow.com/questions/52737688/cannot-get-the-size-of-a-file-from-its-directory-listing/52745529#52745529", "title": "Cannot get the size of a file from its Directory Listing", "body": "<p>(as pointed out by @tinita) The file test operators require a relative or absolute path to the file, while readdir will return only the basename of the file, so you need to concatenate the directory you're iterating with the basename to get the file path.</p>\n\n<pre><code>my $size = -s \"$dir/$file\";\n</code></pre>\n\n<p>For fun, here's how this script might look using <a href=\"https://metacpan.org/pod/Path::Tiny\" rel=\"nofollow noreferrer\">Path::Tiny</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Path::Tiny;\n\nmy $dir = $ARGV[0];\n\nmy $fh = path('FileSize.txt')-&gt;openw;\n\nforeach my $file (grep { -f } path($dir)-&gt;children) {\n    my $basename = $file-&gt;basename;\n    my $size = -s $file;\n    print $fh \"$basename $size\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5654295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4387154a14c5671f6984db0970b4c7c3?s=128&d=identicon&r=PG&f=1", "display_name": "Sproggit", "link": "https://stackoverflow.com/users/5654295/sproggit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539191941, "creation_date": 1539165930, "last_edit_date": 1539178115, "question_id": 52737688, "link": "https://stackoverflow.com/questions/52737688/cannot-get-the-size-of-a-file-from-its-directory-listing", "title": "Cannot get the size of a file from its Directory Listing", "body": "<p>I am currently trying to get the  sizes of all the files in a directory listing (ignoring any sub-directories). I am using the <code>opendir</code> and <code>readdir</code> operations, and for each file I output the name and the size into a file. The File name is correctly output but not the size. I have tried this using the <code>-s</code> operator and the stat built-in function but with both I get the warning that the value is uninitialized.</p>\n\n<p>My code is:</p>\n\n<pre><code>   #!/usr/bin/perl\n\n    use strict;\n    use warnings;\n\n    my $dir = $ARGV[0];\n\n    opendir(DIR, $dir) or die \"Could not open directory '$dir' $!\";\n\n    my $filename = 'FileSize.txt';\n    open(my $fh, '&gt;', $filename) or die \"Could not open file '$filename' $!\";\n\n    while (my $file = readdir(DIR)) {\n\n        # Ignore Sub-Directories\n        next unless (-f \"$dir/$file\");\n        my $size = -s $file;\n        print $fh \"$file\",\" \",\"$size\\n\";\n\n    }\n\n    closedir(DIR);\n    exit 0;\n</code></pre>\n\n<p>I run the command from within the top level directory itself, including the name of the Sub-directory to be scanned, and get the following error, one for every file in the sub-directory that is processed</p>\n\n<pre><code>C:\\Users\\lafarnum\\Documents&gt;perl FileComp.pl DiskImage\nUse of uninitialized value $size in concatenation (.) or string at \nFileComp.pl line 18.\n</code></pre>\n\n<p>Consequently, the file names are correctly output to the output file, but not the file sizes. The output file looks like this</p>\n\n<pre><code>BuildState.txt\ndata1.cab \ndata1.hdr \ndata2.cab \nISSetup.dll \nlayout.bin \nREADME.doc \nsetup.bmp\nsetup.exe \nsetup.ini \nsetup.inx \nsetup.iss \nvcredist_x86.exe \n_Setup.dll \n</code></pre>\n\n<p>I think this has something to do with the way I am retrieving the file variable from <code>readdir</code>. All the examples of using the <code>-s</code> operator and the stat built-in function have been when users had hard coded the names of the files, not fetched them using <code>readdir</code>. I am new to using Perl, so apologies if I am making a basic error.</p>\n"}, {"tags": ["perl", "split"], "comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1539161938, "post_id": 52736290, "comment_id": 92397426, "body": "I&#39;m afraid your question isn&#39;t very clear. Can you please edit your question and add an example showing the output that you want to generate from your sample input. Also, this isn&#39;t really a free code-writing service. It would be good if you could try to fill in the code in the <code>while</code> loop - so we can see exactly what you&#39;re having trouble with."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 1, "creation_date": 1539162001, "post_id": 52736290, "comment_id": 92397468, "body": "By the way, you&#39;ve made an excellent start by using <code>strict</code> and <code>warnings</code> and opening the file using modern best practices :-)"}, {"owner": {"reputation": 2868, "user_id": 2582968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BKlgI.png?s=128&g=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/2582968/jan"}, "edited": false, "score": 0, "creation_date": 1539162243, "post_id": 52736290, "comment_id": 92397640, "body": "I edited your question (must still be reviewed) I think you accidently switched row with column. the expected result for those two sample columns would be (822-1)+1298-906) = 1213, right?"}, {"owner": {"reputation": 27, "user_id": 10482932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9a81ba13cb82aaec8135df1f08e2fb6?s=128&d=identicon&r=PG&f=1", "display_name": "Michelangelo", "link": "https://stackoverflow.com/users/10482932/michelangelo"}, "edited": false, "score": 0, "creation_date": 1539172031, "post_id": 52736290, "comment_id": 92403526, "body": "Yes, exactly. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 2868, "user_id": 2582968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BKlgI.png?s=128&g=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/2582968/jan"}, "edited": false, "score": 0, "creation_date": 1539167171, "post_id": 52736493, "comment_id": 92400678, "body": "If it is perl, it has to be a oneliner ;)"}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 2, "last_activity_date": 1539162254, "creation_date": 1539162254, "answer_id": 52736493, "question_id": 52736290, "link": "https://stackoverflow.com/questions/52736290/split-file-perl/52736493#52736493", "title": "Split file Perl", "body": "<p>As a one-liner:</p>\n\n<pre><code>perl -nE '$c += $2 - $1 if /^(\\d+)\\.\\.(\\d+)/; END { say $c }' input.txt\n</code></pre>\n\n<p>(Extracting the important part of that and putting it into your actual script should be easy to figure out).</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1539185981, "creation_date": 1539185981, "answer_id": 52743980, "question_id": 52736290, "link": "https://stackoverflow.com/questions/52736290/split-file-perl/52743980#52743980", "title": "Split file Perl", "body": "<p>Explicitly opening the file makes your code more complicated than it needs to be. Perl will automatically open any files passed on the command line and allow you to read from them using the empty file input operator, <code>&lt;&gt;</code>. So your code becomes as simple as this:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\nuse feature 'say';\n\nmy $total;\n\nwhile (&lt;&gt;) {\n  my ($min, $max) = /(\\d+)\\.\\.(\\d+)/;\n\n  next unless $min and $max;\n\n  $total += $max - $min;\n}\n\nsay $total;\n</code></pre>\n\n<p>If this code is in a file called <code>adder</code> and your input data is in <code>add.dat</code>, then you run it like this:</p>\n\n<pre><code>$ adder add.dat\n1213\n</code></pre>\n\n<p><strong>Update:</strong> And, to explain where you were going wrong...</p>\n\n<p>You only ever read a single line from your file:</p>\n\n<pre><code>my $line2 = &lt;$IN&gt;;\n</code></pre>\n\n<p>And then you continually assign that same value to another variable:</p>\n\n<pre><code>while(my $line = $line2){          # reading the file line by line\n</code></pre>\n\n<p>The comment in this line is wrong. I'm not sure where you got that line from.</p>\n\n<p>To fix your code, just remove the <code>my $line2 = &lt;$IN&gt;</code> line and replace your loop with:</p>\n\n<pre><code>while (my $line = &lt;$IN&gt;) {\n  # your code here\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10482932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9a81ba13cb82aaec8135df1f08e2fb6?s=128&d=identicon&r=PG&f=1", "display_name": "Michelangelo", "link": "https://stackoverflow.com/users/10482932/michelangelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539185981, "creation_date": 1539161600, "last_edit_date": 1539173960, "question_id": 52736290, "link": "https://stackoverflow.com/questions/52736290/split-file-perl", "title": "Split file Perl", "body": "<p>I want to split parts of a file. Here is what the start of the file looks like (it continues in same way):</p>\n\n<pre><code>Location    Strand  Length    PID      Gene \n1..822        +      273    292571599  CDS001\n906..1298     +      130    292571600   trxA\n</code></pre>\n\n<p>I want to split in Location column and subtract 822-1 and do the same for every row and add them all together. So that for these two results the value would be: (822-1)+1298-906) = 1213 \nHow? \nMy code right now, (I don't get any output at all in the terminal, it just continue to process forever):</p>\n\n<pre><code>use warnings;\nuse strict;\n\n\nmy $infile = $ARGV[0];             # Reading infile argument\nopen my $IN, '&lt;', $infile or die \"Could not open $infile: $!, $?\";\n\nmy $line2 = &lt;$IN&gt;;\n\n\nmy $coding = 0;                   # Initialize coding variable\nwhile(my $line = $line2){          # reading the file line by line\n    # TODO Use split and do the calculations\n     my @row = split(/\\.\\./, $line);\n     my @row2 = split(/\\D/, $row[1]);\n\n     $coding += $row2[0]- $row[0];\n\n}\n\nprint \"total amount of protein coding DNA: $coding\\n\";\n</code></pre>\n\n<p>So what I get from my code if I put:</p>\n\n<pre><code>print \"$coding \\n\";\n</code></pre>\n\n<p>at the end of the while loop just to test is:</p>\n\n<pre><code>821 \n1642\n</code></pre>\n\n<p>And so the first number is correct (822-1) but the next number doesn't make any sense to me, it should be (1298-906). What I want in the end outside the loop:</p>\n\n<pre><code>print \"total amount of protein coding DNA: $coding\\n\";\n</code></pre>\n\n<p>is the sum of all the subtractions of every line i.e. 1213. But I don't get anything, just a terminal that works on forever.</p>\n"}, {"tags": ["perl", "filehandle"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1539121803, "post_id": 52729767, "comment_id": 92384746, "body": "Can you show the one-liner? There are several possible ways how to process a file, <a href=\"http://p3rl.org/seek\" rel=\"nofollow noreferrer\">seeking</a> might or might not be possible."}, {"owner": {"reputation": 37, "user_id": 2697302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9fc22f32576e1f277fcc725cb3f98e?s=128&d=identicon&r=PG&f=1", "display_name": "user2697302", "link": "https://stackoverflow.com/users/2697302/user2697302"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1539122900, "post_id": 52729767, "comment_id": 92385104, "body": "my $command = &#39;perl -pi.bak -e \\&#39;my %commits; my @commits_to_delete; my @commits_to_edit; $/=&quot;========================================================&zwnj;&#8203;=========&quot;;                                    if ($. == 2)                {    # Deleted code because of character limit. } #                                      I want to go back through the file here.  I only work from the first &quot;===========================================================&zwnj;&#8203;======&quot; to the second.                                                                            } \\&#39; RELEASE_LOG_EXAMPLE.bak&#39;;"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 1, "creation_date": 1539123262, "post_id": 52729767, "comment_id": 92385202, "body": "There&#39;s no easy way to seek with <code>-i</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539123604, "post_id": 52729767, "comment_id": 92385305, "body": "If you are trying to run this oneliner in an existing Perl program, consider using <a href=\"https://metacpan.org/pod/Path::Tiny#edit_lines,-edit_lines_utf8,-edit_lines_raw\" rel=\"nofollow noreferrer\">Path::Tiny&#39;s edit_lines_utf8</a> instead, it&#39;s similar in implementation and purpose to the perl -i switch. But since you need to seek around <a href=\"https://metacpan.org/pod/Path::Tiny#edit,-edit_raw,-edit_utf8\" rel=\"nofollow noreferrer\">edit_utf8</a> could instead be used to operate on the whole file as a string."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1539132221, "post_id": 52729767, "comment_id": 92387222, "body": "@choroba  I see a concern but it works for me (see answer)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539141596, "post_id": 52729767, "comment_id": 92389230, "body": "You&#39;re usually better off just loading the file into memory."}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1539161238, "post_id": 52729767, "comment_id": 92397004, "body": "@user2697302: Please don&#39;t dump code in a comment like that. It&#39;s much better if you <a href=\"https://stackoverflow.com/posts/52729767/edit\">edit your question</a> to add more information."}], "answers": [{"comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1539157060, "post_id": 52730733, "comment_id": 92394721, "body": "You can&#39;t &quot;unprint&quot; lines printed in the first pass. <code>-n</code> will be needed instead."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1539158808, "post_id": 52730733, "comment_id": 92395703, "body": "@choroba Right, but they gave <code>-p</code> in a comment.  I am hoping for feedback.  Added a comment, thank you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1540196255, "last_edit_date": 1540196255, "creation_date": 1539128892, "answer_id": 52730733, "question_id": 52729767, "link": "https://stackoverflow.com/questions/52729767/how-to-get-back-to-the-beginning-of-a-file-in-a-perl-one-liner/52730733#52730733", "title": "How to get back to the beginning of a file in a perl one-liner?", "body": "<p>The filehandle is <a href=\"https://perldoc.perl.org/perlvar.html#ARGV\" rel=\"nofollow noreferrer\">ARGV</a>.  While <code>-i</code> may raise questions about seeking, it works in my tests</p>\n\n<pre><code>perl -i.bak -pe'\n    $_ = \"line: $_\"; \n    if ($. == 2) { seek ARGV, 0, 0 }\n' test.txt\n</code></pre>\n\n<p>If you see issues with <code>-i</code> or the backup (I don't) run without them and do that manually.</p>\n\n<p>With the <code>-p</code> <a href=\"https://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">switch</a> the <code>$_</code> is printed every time through.  Code shown in the comment uses it but the question seems to imply that not every line need be printed, as it wants to \"<em>remove entries</em>\" from the beginning.  If that is the case then use <code>-n</code> instead of <code>-p</code>, which also opens the file and iterates over its lines but does not print.  Then add print statements as needed.</p>\n\n<p>It is generally a very good idea to read <a href=\"https://perldoc.perl.org/perlop.html#I%2fO-Operators\" rel=\"nofollow noreferrer\">I/O Operators in perlop</a>, and once you are mucking about with this I'd really recommend it.</p>\n\n<p>It appears that there may be better approaches for your problem but we'd need more detail.</p>\n"}], "owner": {"reputation": 37, "user_id": 2697302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac9fc22f32576e1f277fcc725cb3f98e?s=128&d=identicon&r=PG&f=1", "display_name": "user2697302", "link": "https://stackoverflow.com/users/2697302/user2697302"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540196255, "creation_date": 1539121484, "question_id": 52729767, "link": "https://stackoverflow.com/questions/52729767/how-to-get-back-to-the-beginning-of-a-file-in-a-perl-one-liner", "title": "How to get back to the beginning of a file in a perl one-liner?", "body": "<p>After going through a file once, I would like to go back to the beginning of the file and remove entries based on my original pass through the file, but I do not know how to go back to the beginning of the file.  I have the name of the input file to the one-liner but not the filehandle.  Do I need to have the filehandle?  How do I get it from the filename?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 4, "creation_date": 1539116978, "post_id": 52728578, "comment_id": 92382891, "body": "Minor point: the language is called Perl, not PERL."}], "answers": [{"comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1539116697, "post_id": 52728665, "comment_id": 92382773, "body": "Nice explanation"}, {"owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "edited": false, "score": 0, "creation_date": 1539117081, "post_id": 52728665, "comment_id": 92382928, "body": "Thanks, @Grinnz for the great explanation. It helped :-)"}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 8, "last_activity_date": 1539116463, "last_edit_date": 1539116463, "creation_date": 1539116082, "answer_id": 52728665, "question_id": 52728578, "link": "https://stackoverflow.com/questions/52728578/storing-variables-dynamically-in-perl/52728665#52728665", "title": "Storing variables dynamically in Perl", "body": "<p>You are correct that a hash is a good solution to this problem. You have two problems in your code. First, <code>$VarStore{'var'$counter}</code> is not valid syntax, you need to use the <code>.</code> operator to concatenate strings <code>$VarStore{'var'.$counter}</code>, or you can use double quotes to interpolate variables into strings <code>$VarStore{\"var$counter\"}</code>.</p>\n\n<p>Unlike variables, you can't directly interpolate function calls into strings, so the length() call should be done separately. Or alternatively you can concatenate strings with the function call. <code>print \"Variable $counter is \" . length($VarStore{\"var$counter\"}). \" long\\n\";</code></p>\n\n<p>Second problem is that after your first while loop completes, the $counter variable you reuse for the next while loop will already be greater than $varNum, so you need to reset it to 1. <code>$counter = 1;</code></p>\n\n<p>It may be simpler to use <a href=\"https://perldoc.pl/perlsyn#Foreach-Loops\" rel=\"noreferrer\">foreach loops</a> to iterate through the count. Also, sub main is not needed but if you use it you need to actually call <code>main();</code> somewhere so it will run.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %VarStore;\n\nprint (\"How many variables to create: \");\nchomp(my $varNum = &lt;STDIN&gt;);\n\nforeach my $counter (1..$varNum) {\n    print \"Enter text to variable $counter: \\n\";\n    chomp(my $buffer = &lt;STDIN&gt;);\n    $VarStore{\"var$counter\"} = $buffer;\n}\n\nforeach my $counter (1..$varNum) {\n    my $length = length($VarStore{\"var$counter\"});\n    print \"Variable $counter is $length character  long \\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 52728665, "answer_count": 1, "score": 1, "last_activity_date": 1539166252, "creation_date": 1539115688, "last_edit_date": 1539166252, "question_id": 52728578, "link": "https://stackoverflow.com/questions/52728578/storing-variables-dynamically-in-perl", "title": "Storing variables dynamically in Perl", "body": "<p>I am trying to store and print variables dynamically in Perl, by asking user to input number of variables to create, then asking for each of the created variables to add information then output the length of text contained in each of them. In my head I came up with this:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nsub main {\n\n    my %VarStore = ();\n\n    print (\"How many variables to create: \");\n    chomp(my $varNum = &lt;STDIN&gt;);\n\n    my $counter = 1\n    while ($counter &lt;= $varNum) {\n        print \"Enter text to variable $counter: \\n\";\n        chomp(my $buffer = &lt;STDIN&gt;);\n        $VarStore{'var'$counter} = $buffer;\n        $counter ++;\n    }\n\n    while ($counter &lt;= $varNum) {\n        print \"Variable $counter is length($VarStore{'var'$counter}) character  long \\n\";\n        $counter ++;\n    }\n\n\n}\n</code></pre>\n\n<p>What I would like is:</p>\n\n<pre><code>&gt; How many variables to create: 3\n&gt; Enter text to variable 1: ABCQWEPOL\n&gt; Enter text to variable 2: xJSAG!HHKSKASK\n&gt; Enter text to variable 3: KakA\n&gt; Variable 1 is 9 character long\n&gt; Variable 2 is 14 character long\n&gt; Variable 3 is 4 character long\n</code></pre>\n\n<p>Any clue why my code is not working? I thought of a hash here so that I can create dynamic variables say with keys var1, var2, var3, etc depending on the input the user gives to create them. Thanks in advance.</p>\n"}, {"tags": ["perl", "error-handling", "scripting"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539114395, "post_id": 52728109, "comment_id": 92381705, "body": "According to its documentation, Net::Mac objects don&#39;t have a <code>die</code> method... What exactly happens with an invalid address? Any error messages etc.?"}, {"owner": {"reputation": 107, "user_id": 816645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/683076a6c1f49e2d16e81b54cd22e296?s=128&d=identicon&r=PG", "display_name": "dutsnekcirf", "link": "https://stackoverflow.com/users/816645/dutsnekcirf"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539114482, "post_id": 52728109, "comment_id": 92381759, "body": "I get something like the following if I enter bogus stuff like; 39568jkl: &quot;discovery of MAC address metadata failed, invalid characters in MAC address &quot;00:00:39:56:8j:kl&quot; at ./RTTest.pl line 124&quot;  I want to be able to test on that and loop back around and ask the user to re-enter the MAC address again."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539116565, "post_id": 52728109, "comment_id": 92382714, "body": "I need to sit down and actually play with the code, but error handling in this module is really strange. When die is 0, it just stores an error message and keeps on trying to do its thing, causing more errors. It&#39;ll print the error using carp if die is 0 and verbose is 1, but it shouldn&#39;t croak if die is 0."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539116971, "post_id": 52728109, "comment_id": 92382884, "body": "Looks like you should be using <code>$tempMac-&gt;get_error()</code> and seeing if it returns <code>undef</code> or not for checking to see if there was an error. I wonder if <code>tempMac-&gt;die()</code> is calling the built in <code>die</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 1, "last_activity_date": 1539115442, "creation_date": 1539115442, "answer_id": 52728528, "question_id": 52728109, "link": "https://stackoverflow.com/questions/52728109/error-handling-with-invalid-mac-entry-with-perl-netmac-module/52728528#52728528", "title": "Error handling with invalid MAC entry with Perl Net::MAC module", "body": "<p>See <a href=\"https://mvp.kablamo.org/essentials/die-eval\" rel=\"nofollow noreferrer\">https://mvp.kablamo.org/essentials/die-eval</a> for some info on how exceptions work in Perl and how to handle them. Consider <a href=\"https://metacpan.org/pod/Syntax::Keyword::Try\" rel=\"nofollow noreferrer\">Syntax::Keyword::Try</a> for a familiar try/catch paradigm.</p>\n\n<pre><code>use Syntax::Keyword::Try;\nmy $newMac;\ntry {\n    my $tempMac = Net::MAC-&gt;new('mac' =&gt; $mac);\n    $newMac = $tempMac-&gt;convert('base' =&gt; 16,'bit_group' =&gt; 8,'delimeter' =&gt; \":\");\n    $proceed = \"yes\";\n} catch {\n    print \"Looks like you entered an invalid MAC address. Error: $@ Please try again.\\n\";\n}\n</code></pre>\n\n<p>You can also validate the mac address before passing it to Net::MAC using something like <a href=\"https://metacpan.org/pod/Regexp::Common::net#$RE%7Bnet%7D%7BMAC%7D\" rel=\"nofollow noreferrer\">Regexp::Common</a>.</p>\n\n<pre><code>use Regexp::Common 'net';\nmy $newMac;\nif ($mac =~ m/$RE{net}{MAC}/) {\n    my $tempMac = Net::MAC-&gt;new('mac' =&gt; $mac);\n    $newMac = $tempMac-&gt;convert('base' =&gt; 16,'bit_group' =&gt; 8,'delimeter' =&gt; \":\");\n    $proceed = \"yes\";\n} else {\n    print \"Looks like you entered an invalid MAC address. Please try again.\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 816645, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/683076a6c1f49e2d16e81b54cd22e296?s=128&d=identicon&r=PG", "display_name": "dutsnekcirf", "link": "https://stackoverflow.com/users/816645/dutsnekcirf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52728528, "answer_count": 1, "score": 0, "last_activity_date": 1539115442, "creation_date": 1539113399, "question_id": 52728109, "link": "https://stackoverflow.com/questions/52728109/error-handling-with-invalid-mac-entry-with-perl-netmac-module", "title": "Error handling with invalid MAC entry with Perl Net::MAC module", "body": "<p>I'm attempting write a Perl script that asks the user to enter a MAC address.  I'm using the Net::MAC module to convert whatever format MAC address the user enters to a standard format for me to use later in the script.  I've got most of it working but I can't seem to figure out how to handle a situation in which they enter an invalid MAC.  Something that couldn't possibly be a MAC address.  Such as an entry that includes letters that aren't A-F.</p>\n\n<p>I'm thinking something like the following should work but when it dies it just flat out kills the entire script rather than re-asks the user to enter the MAC again.</p>\n\n<pre><code>    use Net::MAC;\n\n    my $proceed = \"no\";\n    while ($proceed eq \"no\"){\n        print \"Enter the MAC address: \";\n        my $mac;\n        $mac = &lt;&gt;;\n        chomp($mac);\n        my $tempMac = Net::MAC-&gt;new('mac' =&gt; $mac, 'die' =&gt; 0);\n        if ($tempMac-&gt;die() eq \"0\"){\n            print \"Looks like you entered an invalid MAC address.  Please try again.\\n\";\n        } else {\n            my $newMac = $tempMac-&gt;convert('base' =&gt; 16,'bit_group' =&gt; 8,'delimeter' =&gt; \":\");\n            $proceed = \"yes\";\n        }\n    }\n</code></pre>\n\n<p>Should this instead use something like a Try, Catch statement?  I think in other words, I need to know how to appropriately handle the die() event without having the script completely bail on me.</p>\n"}, {"tags": ["regex", "perl", "vim"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1539113440, "post_id": 52727790, "comment_id": 92381345, "body": "It seems that the OP wants to start the counter at 1, so why not <code>++$i</code>?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539116702, "post_id": 52727790, "comment_id": 92382778, "body": "@zdim: I&#39;m not sure where the OP wants to start: <code>0..100</code> seems to start at 0."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539118561, "post_id": 52727790, "comment_id": 92383520, "body": "Ah, that, right ... I was looking at the desired output.  Either way, a detail"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539156426, "post_id": 52727790, "comment_id": 92394371, "body": "@ikegami: I tested the code and it worked. Rolling back."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539156577, "post_id": 52727790, "comment_id": 92394452, "body": "wut. I always thought <code>$i++</code> does what you said does (&quot;$i++ returns the value of $i and adds 1 to it.&quot;), but it doesn&#39;t! You need to fix your description, then"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539157096, "post_id": 52727790, "comment_id": 92394736, "body": "@ikegami: Yes, it also forces numeric context."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539157154, "post_id": 52727790, "comment_id": 92394773, "body": "I was referring to the fact that it <i>doesn&#39;t</i> return the the value of $i when undef."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1539210753, "post_id": 52727790, "comment_id": 92423661, "body": "Yes, ++ has special behavior on undef specifically to optimize this case: <code>undef is always treated as numeric, and in particular is changed to 0 before incrementing (so that a post-increment of an undef value will return 0 rather than undef).</code>"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 3, "last_activity_date": 1539157109, "last_edit_date": 1539157109, "creation_date": 1539112020, "answer_id": 52727790, "question_id": 52727760, "link": "https://stackoverflow.com/questions/52727760/replace-each-match-with-an-incremented-number/52727790#52727790", "title": "Replace each match with an incremented number", "body": "<p><code>-p</code> already processes the input line by line, so <code>-n</code> is redundant.</p>\n\n<pre><code>perl -pe 's/XYZ/$i++/ge'\n</code></pre>\n\n<p><code>$i++</code> returns the value of <code>$i</code> in numeric context and adds 1 to it.</p>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1539112966, "last_edit_date": 1539112966, "creation_date": 1539112623, "answer_id": 52727923, "question_id": 52727760, "link": "https://stackoverflow.com/questions/52727760/replace-each-match-with-an-incremented-number/52727923#52727923", "title": "Replace each match with an incremented number", "body": "<p>Using Perl's <a href=\"https://perldoc.pl/JSON::PP\" rel=\"nofollow noreferrer\">built in JSON parser</a> (in 5.14+) you don't need to deal with strings that may show up elsewhere, whether strings and numbers should be quoted or not, or other complications, you can just modify the JSON as a data structure (code will probably need to be altered to modify the correct part of your full JSON structure):</p>\n\n<pre><code>perl -0777 -MJSON::PP -E'my $data = decode_json readline; $_-&gt;{id} = ++$i foreach @$data; print encode_json $data'\n</code></pre>\n\n<p>Even better would be to use <a href=\"https://metacpan.org/pod/JSON::MaybeXS\" rel=\"nofollow noreferrer\">JSON::MaybeXS</a> as that will install and use a much faster parser by default.</p>\n\n<p>The <code>-0777</code> switch is a <a href=\"https://perldoc.pl/perlrun#-0%5Boctal/hexadecimal%5D\" rel=\"nofollow noreferrer\">convention</a> for one-liners to cause readline or the <code>&lt;&gt;</code> operator (also used by the -p switch) to return the whole input at once.</p>\n"}, {"comments": [{"owner": {"reputation": 485, "user_id": 1755152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yjcH.png?s=128&g=1", "display_name": "D_________", "link": "https://stackoverflow.com/users/1755152/d"}, "edited": false, "score": 0, "creation_date": 1539116779, "post_id": 52728124, "comment_id": 92382811, "body": "Sadly, don&#39;t have Vim compiled with <code>+perl</code>, but up-voting since your 3rd suggestion is the same as @choroba &#39;s"}, {"owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "reply_to_user": {"reputation": 485, "user_id": 1755152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yjcH.png?s=128&g=1", "display_name": "D_________", "link": "https://stackoverflow.com/users/1755152/d"}, "edited": false, "score": 0, "creation_date": 1539122944, "post_id": 52728124, "comment_id": 92385117, "body": "@D_________ <code>:perldo</code> is just a quick replacement for the basic filtering example, but there are more nice features involved with this integration. If you use both tools (Perl and Vim) I highly recommend getting a <code>+perl</code> Vim and checking the documentation for those commands. a"}], "tags": [], "owner": {"reputation": 51553, "user_id": 557306, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OAmpG.jpg?s=128&g=1", "display_name": "sidyll", "link": "https://stackoverflow.com/users/557306/sidyll"}, "is_accepted": false, "score": 4, "last_activity_date": 1539113512, "creation_date": 1539113512, "answer_id": 52728124, "question_id": 52727760, "link": "https://stackoverflow.com/questions/52727760/replace-each-match-with-an-incremented-number/52728124#52728124", "title": "Replace each match with an incremented number", "body": "<p>If  you are  doing  this in  Vim and  you  have the  <code>+perl</code>\nfeature then:</p>\n\n<pre><code>:%perldo s/XYZ/++$i/e\n</code></pre>\n\n<p>If you want to do it with plain Vim commands, you can follow\nthe same logic  and use a variable. However, it  needs to be\ncreated beforehand and  incremented after each substitution.\nThus you may need a help from <code>:g</code> to execute two commands:</p>\n\n<pre><code>:let i=0\n:g/XYZ/let i+=1|s//\\=i\n</code></pre>\n\n<p>The empty <code>s//</code> reuses the pattern from <code>:g</code>.</p>\n\n<p>Alternatively,  just  filter  it  through Perl  as  you  did\noriginally:</p>\n\n<pre><code>:%!perl -pe 's/XYZ/++$i/e'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 153428, "user_id": 813602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1844cebf36374d83a83c0e69003cd42?s=128&d=identicon&r=PG", "display_name": "Ingo Karkat", "link": "https://stackoverflow.com/users/813602/ingo-karkat"}, "is_accepted": false, "score": 1, "last_activity_date": 1539156583, "last_edit_date": 1539156583, "creation_date": 1539154762, "answer_id": 52734402, "question_id": 52727760, "link": "https://stackoverflow.com/questions/52727760/replace-each-match-with-an-incremented-number/52734402#52734402", "title": "Replace each match with an incremented number", "body": "<p>For those looking for a pure Vim solution, here's a more canonical and general solution than in @sidyll's answer that doesn't require <code>:perldo</code> nor <code>:global</code>, and would also work with multiple matches in a line (adding the <code>g</code> flag to <code>:substitute</code>):</p>\n\n<h3>With built-in substitute</h3>\n\n<p>In Vim, you can use <a href=\"https://vimhelp.appspot.com/change.txt.html#sub-replace-expression\" rel=\"nofollow noreferrer\"><code>:help sub-replace-expression</code></a> to replace text with arbitrary expressions. Unfortunately, incrementing a variable is a <em>statement</em> in Vim, not an expression. Either one has to resort to tricks like using the length of a List as the counter (<code>add()</code> can be used in an expression):</p>\n\n<pre><code>:let c = [] | %substitute/XYZ/\\=len(add(c, 0))/\n</code></pre>\n\n<p>Or you have to define a separate function (once):</p>\n\n<pre><code>function! Increment()\n    let g:i += 1\n    return g:i\nendfunction\nlet g:i = 0 | %substitute/XYZ/\\=Increment()/\n</code></pre>\n\n<h3>With plugin</h3>\n\n<p>The expression syntax is a bit weird (but if you're into Perl, you're used to much worse :-). Also, the explicit separate initialization of the counter (and function) is cumbersome. My <a href=\"http://www.vim.org/scripts/script.php?script_id=4602\" rel=\"nofollow noreferrer\">PatternsOnText plugin</a> improves on the built-in <code>:substitute</code> command with several variants. Among them <code>:SubstituteExecute</code>, which benefits from a predefined context object:</p>\n\n<pre><code>:%SubstituteExecute /XYZ/ let v:val.n += 1 | return v:val.n\n</code></pre>\n\n<p>Renumbering is such a frequent task that the plugin even has a special command for it:</p>\n\n<pre><code>:Renumber /XYZ/\n</code></pre>\n\n<h3>Caveats</h3>\n\n<ul>\n<li>A structured but flexible syntax like HTML or JSON is ill suited for parsing with regular expressions, unless you confidently know that the used subset of the allowed syntax is very regular (e.g. because you know the input source and/or have passed the input through a pretty-printer). Prefer specialized tools over generic ones (i.e. use <code>xmlstarlet</code> for XML and <code>jq</code> for JSON instead of <code>grep</code> and <code>sed</code>).</li>\n</ul>\n"}], "owner": {"reputation": 485, "user_id": 1755152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yjcH.png?s=128&g=1", "display_name": "D_________", "link": "https://stackoverflow.com/users/1755152/d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 52727790, "answer_count": 4, "score": 0, "last_activity_date": 1539157109, "creation_date": 1539111868, "last_edit_date": 1539115835, "question_id": 52727760, "link": "https://stackoverflow.com/questions/52727760/replace-each-match-with-an-incremented-number", "title": "Replace each match with an incremented number", "body": "<p>I need to add an ID property to a list of objects in a JSON file. I found <a href=\"https://stackoverflow.com/a/12735006/1755152\">this</a> useful in-line Perl script that replaces each match with a random int.</p>\n\n<pre><code>:%! perl -pne 's/XYZ/int(rand 1000)/ge'\n</code></pre>\n\n<p>Assuming I don't know the list's length in advance, how would I replace something like this</p>\n\n<pre><code>{\n    \"id\" : XYZ\n},\n{\n    \"id\" : XYZ\n},\n{ ... }\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>{\n    \"id\" : 1\n},\n{\n    \"id\" : 2\n},\n{ ... }\n</code></pre>\n\n<p>I've tried this:</p>\n\n<pre><code>:%! perl -pne 's/XYZ/(0..100)/ge'\n</code></pre>\n\n<p>but that assumes I know the length of the list in advance and also does not work as expected. I know I can get a number of matches using something like this:</p>\n\n<pre><code>:%s/\"id\" : XYZ//gn\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539107824, "post_id": 52723489, "comment_id": 92378787, "body": "Can this be well served by a simple server? (Specially with those callbacks.) It seems to me that this pope joggling may be pushing it."}], "answers": [{"comments": [{"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1539102172, "post_id": 52724546, "comment_id": 92376093, "body": "Thank you. Doing more testing - seems to work the way I want!. You said this is a proof of concept. Any key issues that I need to investigate that you&#39;ve left as an exercise?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539102871, "post_id": 52724546, "comment_id": 92376436, "body": "As a start, you should check the return value of syscalls like <a href=\"https://perldoc.pl/functions/pipe\" rel=\"nofollow noreferrer\">pipe</a> and whether <a href=\"https://perldoc.pl/functions/fork\" rel=\"nofollow noreferrer\">fork</a> returns undef to indicate failure."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539102999, "post_id": 52724546, "comment_id": 92376488, "body": "It&#39;s generally a good idea to use lexical filehandles instead of global barewords, to prevent clashing with code elsewhere, it also means they&#39;ll close automatically when they go out of scope which can be easier to manage. <code>pipe(my $reader, my $writer) or die &quot;pipe failed: $!&quot;;</code> You should also be using <code>strict</code> and <code>warnings</code>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539103354, "post_id": 52724546, "comment_id": 92376637, "body": "You can also use an event loop like <a href=\"https://metacpan.org/pod/Mojo::IOLoop\" rel=\"nofollow noreferrer\">Mojo::IOLoop</a> or <a href=\"https://metacpan.org/pod/IO::Async\" rel=\"nofollow noreferrer\">IO::Async</a> which are designed to do exactly this sort of thing (either at a similar low level, or managing everything itself) rather than managing a select loop and waitpid yourself. I can come up with an example if you&#39;re interested."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539107703, "post_id": 52724546, "comment_id": 92378719, "body": "@mob A couple of questions/concerns: from what I see the write-end in all kids is the exact same resource -- aren&#39;t there going to be conflicts when they write around the same time (overlapping data read by the parent)?  (Also, this parent doesn&#39;t write so can it not close its write end right away?)"}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539107734, "post_id": 52724546, "comment_id": 92378733, "body": "Thank you @Grinnz - yes, I&#39;ve put my checks around those critical calls. With respect to your kind offer on the other event loops - this current code seems to meet my needs well so far, so I&#39;ll stick with it for now. Thanks again."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1539108046, "post_id": 52724546, "comment_id": 92378886, "body": "Second-order issues: synchronization of write operations, reading too slowly from the pipe so the pipe fills and writers are blocked, checking return values of all function calls for errors.  @zdim - you can&#39;t close the write end in the parent until you are sure that you are not going to spawn any more children that will use the write end."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1539108051, "post_id": 52724546, "comment_id": 92378889, "body": "@user1361529 A comment on the &quot;proof of concept&quot; -- I&#39;d take that phrase to be intended to remind to work through this to ensure that there are no race conditions, all synchronization and buffering etc is taken care of, no resource is left hanging, etc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539261965, "post_id": 52724546, "comment_id": 92443851, "body": "@zdim, It would really suck if the data from two children would be intermixed, but I think POSIX makes certain guarantees about this (like the writes being atomic if under a certain size), but I&#39;m not sure what those guarantees are if they exist."}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1539427176, "post_id": 52724546, "comment_id": 92504651, "body": "I can only offer anecdotal evidence - I am using @mobs code in an alarm notification server with 8 cameras pumping alarms as people walk by. Lots of overlapping forks as each child invokes neural net models that take time for image classification. So far his code is working like Bruce Lee&#39;s kung-fu."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1539628246, "post_id": 52724546, "comment_id": 92562511, "body": "@user1361529 Great, and that&#39;s an interesting application.  The fact that each child does considerable work helps, since I&#39;d expect any mixing (if possible) to relate to a race condition. And there&#39;s far less chance for that if jobs take a while."}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1540932787, "post_id": 52724546, "comment_id": 93043875, "body": "@mob so related problem here <a href=\"https://stackoverflow.com/questions/53072736/perl-non-blocking-pipe-only-getting-one-message\" title=\"perl non blocking pipe only getting one message\">stackoverflow.com/questions/53072736/&hellip;</a>"}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 3, "last_activity_date": 1539112953, "last_edit_date": 1539112953, "creation_date": 1539098950, "answer_id": 52724546, "question_id": 52723489, "link": "https://stackoverflow.com/questions/52723489/perl-one-parent-many-children-single-pipe-reader-in-parent/52724546#52724546", "title": "perl: one parent, many children - single pipe reader in parent?", "body": "<p>I don't think it's necessary to <code>close WRITER</code> in the parent. It may be a good practice, but since you can't reuse the same pipe for new child processes after you close it, that's a good excuse not to do it. If you keep <code>WRITER</code> open until you are done launching all your child processes, you can reuse the pipe with multiple child processes. Here's a proof of concept:</p>\n\n<pre><code>use IO::Handle;\nuse POSIX ':sys_wait_h';\npipe(READER,WRITER);\nWRITER-&gt;autoflush(1);\n\nsub child_process {\n    my $stage = shift;\n    close READER;  # also a best but optional practice\n    srand($$);\n    do {\n        sleep 1 + 5*rand();\n        print WRITER \"Child Pid $$ ($stage) is sending this\\n\";\n    } while (rand &gt; 0.5);\n    exit;\n}\n\n# initial set of children\nfor (my $i=0; $i&lt;5; $i++) {\n    if (fork() == 0) {\n        child_process(\"LAUNCH\");\n    }\n}\n\n# parent\nmy ($rin,$rout) = ('');\nvec($rin,fileno(READER),1) = 1;\nwhile (1) {\n     # non-blocking read on pipe\n     my $read_avail = select($rout=$rin, undef, undef, 0.0);\n     if ($read_avail &lt; 0) {\n         if (!$!{EINTR}) {\n             warn \"READ ERROR: $read_avail $!\\n\";\n             last;\n         }\n     } elsif ($read_avail &gt; 0) {\n         chomp(my $line = &lt;READER&gt;);\n         print \"Read in Parent $$: '$line'\\n\";\n     } else {\n         print STDERR \"No input ... do other stuff\\n\";\n         # start some run-time child processes\n         if (time-$^T &gt; 5 &amp;&amp; time-$^T &lt; 10) {\n             # launch a few more children in the middle of the program\n             if (fork() == 0) {\n                 child_process(\"RUN\");\n             }\n         }\n         sleep 1;\n     }\n     last if waitpid(-1,&amp;WNOHANG) &lt; 0;    # no more children are alive\n}\nclose WRITER;  # now it is safe to do this ...\n</code></pre>\n"}], "owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 2, "accepted_answer_id": 52724546, "answer_count": 1, "score": 2, "last_activity_date": 1539112953, "creation_date": 1539095472, "question_id": 52723489, "link": "https://stackoverflow.com/questions/52723489/perl-one-parent-many-children-single-pipe-reader-in-parent", "title": "perl: one parent, many children - single pipe reader in parent?", "body": "<p>is it possible in perl to establish a pipe in such a way that the parent has only one READER pipe and many children write to it as they come to life/exit?</p>\n\n<p>The typical cookbook code is:</p>\n\n<pre><code>#!/usr/bin/perl -w\n# pipe2 - use pipe and fork so child can send to parent\n\nuse IO::Handle;\npipe(READER, WRITER);\nWRITER-&gt;autoflush(1);\n\nif ($pid = fork) {\n    close WRITER;\n    chomp($line = &lt;READER&gt;);\n    print \"Parent Pid $$ just read this: `$line'\\n\";\n   // do what you need\n} else {\n    die \"cannot fork: $!\" unless defined $pid;\n    close READER;\n    print WRITER \"Child Pid $$ is sending this\\n\";\n    close WRITER;  # this will happen anyway\n    exit;\n}\n</code></pre>\n\n<p>Let's instead assume a case where I need my parent \"READER\" to get messages from multiple children, is it possible to do this without keeping a list of pipes, one per child? I can't close WRITER in the parent because the next child won't get a valid handle to write to. I also need the parent to continue its regular operation and not block on any client data from the pipe.</p>\n\n<p>Pseudocode of what I need:</p>\n\n<pre><code># parent code\npipe (READER, WRITER)\nfork_random_number_of_children(READER,WRITER)\n\non_some_tick =&gt; {\n    my $data = read_from(READER, non_blocking)\n    if (data) print \"Hey some child sent me: $data\"\n    else print \"No data, going back life\"\n    do_other_things_before_next_tick()\n}\n\nchild_job(R,W) { # lets assume this is called for each child fork\n  close (R); # no problem, its a copy\n  sleep (random duration)\n  print W, \"Message from child with pid $$\"\n  exit 0\n}\n</code></pre>\n"}, {"tags": ["perl", "http-proxy"], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1539105577, "last_edit_date": 1539105577, "creation_date": 1539102418, "answer_id": 52725479, "question_id": 52723199, "link": "https://stackoverflow.com/questions/52723199/how-can-i-make-httpproxy-work-with-https-urls/52725479#52725479", "title": "How can I make HTTP::Proxy work with HTTPS URLs?", "body": "<p>There is a bug in HTTP::Proxy in that it returns the wrong response to a CONNECT request:</p>\n\n<pre><code>-- Client &lt;&lt;&lt; Server (https://www.yahoo.com)\nHTTP/1.1 200 OK\\x0d\nDate: Tue, 09 Oct 2018 12:02:54 GMT\\x0d\nTransfer-Encoding: chunked\\x0d\nServer: HTTP::Proxy/0.304\\x0d\n\\x0d\n</code></pre>\n\n<p>The response to a CONNECT request can have no body which means that it should not have a HTTP header announcing a body like <code>Transfer-Encoding: chunked</code> does. This bug happens with all clients which do a <code>CONNECT</code> request using <code>HTTP/1.1</code>. If the <code>CONNECT</code> is instead done with <code>HTTP/1.0</code> the problem vanishes since <code>Transfer-Encoding: chunked</code>  is not defined with <code>HTTP/1.0</code> yet and thus HTTP::Proxy does not send it.</p>\n\n<p>The same problem happens when trying to use <code>curl</code> with HTTP::Proxy, thus this is not a problem solely of Mojo::UserAgent. I`ve made a patch to HTTP::Proxy to respond properly. See <a href=\"https://github.com/book/HTTP-Proxy/pull/9\" rel=\"nofollow noreferrer\">this pull request</a> for the details and for the (small) diff you need to apply.</p>\n"}], "owner": {"reputation": 911, "user_id": 211029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/660d3cca0f3de0bf1ee1e8be322a8c27?s=128&d=identicon&r=PG", "display_name": "pcronin", "link": "https://stackoverflow.com/users/211029/pcronin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 52725479, "answer_count": 1, "score": 1, "last_activity_date": 1539105577, "creation_date": 1539094502, "question_id": 52723199, "link": "https://stackoverflow.com/questions/52723199/how-can-i-make-httpproxy-work-with-https-urls", "title": "How can I make HTTP::Proxy work with HTTPS URLs?", "body": "<p>In the following code sample, I start a proxy server using <code>HTTP::Proxy</code> and attempt to use it to request an HTTPS URL, but the proxy server either doesn't actually make the request, or doesn't return the response. However, if I make the URL use HTTP (not secure), the request succeeds. I've installed both <code>IO::Socket::SSL</code> and <code>LWP::UserAgent::https</code> (yay secret deps!), but am still unable to get HTTPS requests to go through the proxy. How can I get <code>HTTP::Proxy</code> to work with HTTPS URLs?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Printer;\nuse HTTP::Proxy ':log';\nuse Mojo::UserAgent ();\n\nmy $URL = 'https://www.yahoo.com';\nmy $PROXY_PORT = 8667;\n\nmy $pid = fork();\n\nif ($pid) { # I am the parent\n    print \"Press ^c to kill proxy server...\\n\";\n    my $proxy = HTTP::Proxy-&gt;new( port =&gt; $PROXY_PORT );\n    $proxy-&gt;logmask(ALL);\n    $proxy-&gt;via(q{});\n    $proxy-&gt;x_forwarded_for(0);\n    $proxy-&gt;start;\n\n    waitpid $pid, 0;\n}\nelsif ($pid == 0) { # I am the child\n    sleep 3; # Allow the proxy server to start\n\n    my $ua = Mojo::UserAgent-&gt;new;\n    $ua-&gt;proxy\n        -&gt;http(\"http://127.0.0.1:$PROXY_PORT\")\n        -&gt;https(\"http://127.0.0.1:$PROXY_PORT\");\n\n    my $tx = $ua-&gt;get($URL);\n\n    if ($tx-&gt;error) {\n        p $tx-&gt;error;\n    }\n    else {\n        print \"Success!\\n\";\n    }\n}\nelse {\n    die 'Unknown result after forking';\n}\n</code></pre>\n\n<p>Saving the above script as testcase-so.pl and running it:</p>\n\n<pre><code>$ MOJO_CLIENT_DEBUG=1 ./testcase-so.pl\nPress ^c to kill proxy server...\n-- Blocking request (https://www.yahoo.com)\n-- Connect c66a92739c09c76fa24029e8079808c7 (https://www.yahoo.com:443)\n-- Client &gt;&gt;&gt; Server (https://www.yahoo.com)\nCONNECT www.yahoo.com:443 HTTP/1.1\\x0d\nUser-Agent: Mojolicious (Perl)\\x0d\nContent-Length: 0\\x0d\nHost: www.yahoo.com\\x0d\nAccept-Encoding: gzip\\x0d\n\\x0d\n\n-- Client &gt;&gt;&gt; Server (https://www.yahoo.com)\n\n[Tue Oct  9 12:02:54 2018] (12348) PROCESS: Forked child process 12352\n[Tue Oct  9 12:02:54 2018] (12352) SOCKET: New connection from 127.0.0.1:45312\n[Tue Oct  9 12:02:54 2018] (12352) REQUEST: CONNECT www.yahoo.com:443\n[Tue Oct  9 12:02:54 2018] (12352) REQUEST: Accept-Encoding: gzip\n[Tue Oct  9 12:02:54 2018] (12352) REQUEST: Host: www.yahoo.com\n[Tue Oct  9 12:02:54 2018] (12352) REQUEST: User-Agent: Mojolicious (Perl)\n[Tue Oct  9 12:02:54 2018] (12352) REQUEST: Content-Length: 0\n[Tue Oct  9 12:02:54 2018] (12352) RESPONSE: 200 OK\n[Tue Oct  9 12:02:54 2018] (12352) RESPONSE: Date: Tue, 09 Oct 2018 12:02:54 GMT\n[Tue Oct  9 12:02:54 2018] (12352) RESPONSE: Transfer-Encoding: chunked\n[Tue Oct  9 12:02:54 2018] (12352) RESPONSE: Server: HTTP::Proxy/0.304\n-- Client &lt;&lt;&lt; Server (https://www.yahoo.com)\nHTTP/1.1 200 OK\\x0d\nDate: Tue, 09 Oct 2018 12:02:54 GMT\\x0d\nTransfer-Encoding: chunked\\x0d\nServer: HTTP::Proxy/0.304\\x0d\n\\x0d\n\n[Tue Oct  9 12:03:14 2018] (12352) CONNECT: Connection closed by the client\n[Tue Oct  9 12:03:14 2018] (12352) PROCESS: Served 1 requests\n[Tue Oct  9 12:03:14 2018] (12352) CONNECT: End of CONNECT proxyfication\n\\ {\n    message   \"Proxy connection failed\"\n}\n[Tue Oct  9 12:03:15 2018] (12348) PROCESS: Reaped child process 12349\n[Tue Oct  9 12:03:15 2018] (12348) PROCESS: 1 remaining kids: 12352\n[Tue Oct  9 12:03:15 2018] (12348) PROCESS: Reaped child process 12352\n[Tue Oct  9 12:03:15 2018] (12348) PROCESS: 0 remaining kids:\n^C[Tue Oct  9 12:04:04 2018] (12348) STATUS: Processed 2 connection(s)\n$\n</code></pre>\n\n<p>And with the <code>$URL</code> switched to not use <code>https</code>:</p>\n\n<pre><code>$ MOJO_CLIENT_DEBUG=1 ./testcase-so.pl\nPress ^c to kill proxy server...\n-- Blocking request (http://www.yahoo.com)\n-- Connect f792ee97a0362ab493575d8116e69e59 (http://127.0.0.1:8667)\n-- Client &gt;&gt;&gt; Server (http://www.yahoo.com)\nGET http://www.yahoo.com HTTP/1.1\\x0d\nAccept-Encoding: gzip\\x0d\nContent-Length: 0\\x0d\nHost: www.yahoo.com\\x0d\nUser-Agent: Mojolicious (Perl)\\x0d\n\\x0d\n\n[Tue Oct  9 12:09:38 2018] (12656) PROCESS: Forked child process 12659\n-- Client &gt;&gt;&gt; Server (http://www.yahoo.com)\n\n[Tue Oct  9 12:09:38 2018] (12659) SOCKET: New connection from 127.0.0.1:58288\n[Tue Oct  9 12:09:38 2018] (12659) REQUEST: GET http://www.yahoo.com\n[Tue Oct  9 12:09:38 2018] (12659) REQUEST: Accept-Encoding: gzip\n[Tue Oct  9 12:09:38 2018] (12659) REQUEST: Host: www.yahoo.com\n[Tue Oct  9 12:09:38 2018] (12659) REQUEST: User-Agent: Mojolicious (Perl)\n[Tue Oct  9 12:09:38 2018] (12659) REQUEST: Content-Length: 0\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: 301 Moved Permanently\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Cache-Control: no-store, no-cache\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Date: Tue, 09 Oct 2018 14:10:01 GMT\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Transfer-Encoding: chunked\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Via: http/1.1 media-router-fp1006.prod.media.bf1.yahoo.com (ApacheTrafficServer [c s f ])\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Location: https://www.yahoo.com/\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Server: ATS\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Content-Language: en\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Content-Length: 8\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Content-Type: text/html\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: Content-Security-Policy: sandbox allow-forms allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox allow-presentation; report-uri https://csp.yahoo.com/beacon/csp?src=ats&amp;site=frontpage&amp;region=US&amp;lang=en-US&amp;device=desktop&amp;yrid=&amp;partner=;\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: X-Frame-Options: SAMEORIGIN\n[Tue Oct  9 12:09:38 2018] (12659) RESPONSE: X-XSS-Protection: 1; report=\"https://csp.yahoo.com/beacon/csp?src=fp-hpkp-www\"\n-- Client &lt;&lt;&lt; Server (http://www.yahoo.com)\nHTTP/1.1 301 Moved Permanently\\x0d\nCache-Control: no-store, no-cache\\x0d\nDate: Tue, 09 Oct 2018 14:10:01 GMT\\x0d\nTransfer-Encoding: chunked\\x0d\nVia: http/1.1 media-router-fp1006.prod.media.bf1.yahoo.com (ApacheTrafficServer [c s f ])\\x0d\nLocation: https://www.yahoo.com/\\x0d\nServer: ATS\\x0d\nContent-Language: en\\x0d\nContent-Length: 8\\x0d\nContent-Type: text/html\\x0d\nContent-Security-Policy: sandbox allow-forms allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox allow-presentation; report-uri https://csp.yahoo.com/beacon/csp?src=ats&amp;site=frontpage&amp;region=US&amp;lang=en-US&amp;device=desktop&amp;yrid=&amp;partner=;\\x0d\nX-Frame-Options: SAMEORIGIN\\x0d\nX-XSS-Protection: 1; report=\"https://csp.yahoo.com/beacon/csp?src=fp-hpkp-www\"\\x0d\n\\x0d\n\n-- Client &lt;&lt;&lt; Server (http://www.yahoo.com)\n8\\x0d\nredirect\\x0d\n0\\x0d\n\\x0d\n\nSuccess!\n[Tue Oct  9 12:09:38 2018] (12659) SOCKET: Getting request failed: Client closed\n[Tue Oct  9 12:09:39 2018] (12656) PROCESS: Reaped child process 12657\n[Tue Oct  9 12:09:39 2018] (12656) PROCESS: 1 remaining kids: 12659\n[Tue Oct  9 12:09:39 2018] (12656) PROCESS: Reaped child process 12659\n[Tue Oct  9 12:09:39 2018] (12656) PROCESS: 0 remaining kids:\n^C[Tue Oct  9 12:09:45 2018] (12656) STATUS: Processed 2 connection(s)\n$\n</code></pre>\n"}, {"tags": ["regex", "perl", "regex-lookarounds", "regex-group"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1539093891, "post_id": 52722927, "comment_id": 92371265, "body": "Try <code>(chcem)[^yn]*(?:n(?!eco)[^yn]*)*?y</code>"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1539094204, "post_id": 52722927, "comment_id": 92371446, "body": "Your requirements are not clear. To me it looks like as simple as <code>chcem +y</code> right now."}, {"owner": {"reputation": 1, "user_id": 10440007, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217291458863435/picture?type=large", "display_name": "Honza Drda", "link": "https://stackoverflow.com/users/10440007/honza-drda"}, "edited": false, "score": 0, "creation_date": 1539094887, "post_id": 52722927, "comment_id": 92371910, "body": "Ok, i try to make better example with english &quot;stream url stream url stream url payed stream url&quot; and i want to match url between &quot;stream&quot; and &quot;payed&quot;"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1539095387, "post_id": 52722927, "comment_id": 92372237, "body": "If you&#39;re looking to match <code>chcem</code> as a full word, then you can simply use word boundaries: <code>\\bchcem\\b</code>"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1539095531, "post_id": 52722927, "comment_id": 92372328, "body": "This <code>(?&lt;=stream )url(?= payed)</code> fits your example."}, {"owner": {"reputation": 1, "user_id": 10440007, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217291458863435/picture?type=large", "display_name": "Honza Drda", "link": "https://stackoverflow.com/users/10440007/honza-drda"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1539095848, "post_id": 52722927, "comment_id": 92372566, "body": "@revo Thanks, but its not working, when between stream url and payed some other text(How i said i have a large texts), this is only small example, because, when i try my regex on large text, i get catastrophic backtracking. I want to know if here is any other function which i can use :)"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1539096098, "post_id": 52722927, "comment_id": 92372707, "body": "It depends on what you really want. It could be <code>(?&lt;=stream )url(?:(?!payed).)*payed</code> or <code>(?&lt;=stream )url(?:(?!stream).)*payed</code>. It doesn&#39;t result in a catastrophic backtracking either."}, {"owner": {"reputation": 1, "user_id": 10440007, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217291458863435/picture?type=large", "display_name": "Honza Drda", "link": "https://stackoverflow.com/users/10440007/honza-drda"}, "edited": false, "score": 0, "creation_date": 1539097309, "post_id": 52722927, "comment_id": 92373486, "body": "&quot;(?&lt;=stream ).*(url)(?:(?!stream ).)*payed&quot; i need this, but when i use this on my data, i get error &quot;catastrophic backtracking&quot;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539104141, "post_id": 52722927, "comment_id": 92376992, "body": "Are you doing this in Perl or in an application using libpcre? PCRE is not Perl regex, and in Perl the best solution can often be multiple regexes or other tools, so it might help to clarify."}], "answers": [{"tags": [], "owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "is_accepted": false, "score": 0, "last_activity_date": 1539131912, "creation_date": 1539131912, "answer_id": 52731077, "question_id": 52722927, "link": "https://stackoverflow.com/questions/52722927/lookbehind-and-lookahead-prce/52731077#52731077", "title": "Lookbehind and lookahead PRCE", "body": "<p>The word \"chcem\" that you are trying to capture can be done with word boundary \\b.\nCheck this Perl solution</p>\n\n<pre><code>$ export str=\"neco nechcem neco nechcem neco chcem y neco nechcem\"\n\n$ perl -e 'BEGIN { $x=$ENV{str}; while($x=~/(\\bchcem\\b)/g) { print \"$1\\n\" } } '\nchcem\n\n$ export str=\"neco nechcem neco nechcem neco chcem y neco nechcem dasd chcem ab\"\n\n$ perl -e 'BEGIN { $x=$ENV{str}; while($x=~/(\\bchcem\\b)/g) { print \"$1\\n\" } } '\nchcem\nchcem\n\n$\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10440007, "user_type": "registered", "profile_image": "https://graph.facebook.com/10217291458863435/picture?type=large", "display_name": "Honza Drda", "link": "https://stackoverflow.com/users/10440007/honza-drda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1539131912, "creation_date": 1539093645, "last_edit_date": 1539095338, "question_id": 52722927, "link": "https://stackoverflow.com/questions/52722927/lookbehind-and-lookahead-prce", "title": "Lookbehind and lookahead PRCE", "body": "<p>please, i have this example text:</p>\n\n<blockquote>\n  <p>neco nechcem neco nechcem neco chcem y neco nechcem</p>\n</blockquote>\n\n<p>and i want to capture text: </p>\n\n<blockquote>\n  <p>\"chcem\"</p>\n</blockquote>\n\n<p>(Is same as nechcem, but for this example i rename it)</p>\n\n<p>My question is I have this regex: </p>\n\n<pre><code>(chcem)(?:(?&lt;!neco).)*?y\n</code></pre>\n\n<p>Is there any other way to write it? Because, when I use this regex for large text I get catastrophic backtracking?</p>\n"}, {"tags": ["windows", "perl", "cpan"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1539075617, "post_id": 52717064, "comment_id": 92359654, "body": "Are you using Active State&#39;s version of Perl or Strawberry Perl or some other version?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1539080600, "post_id": 52717064, "comment_id": 92362774, "body": "Also, what module are you trying to install, and what error messages do you actually get? Please paste them here instead of describing them."}, {"owner": {"reputation": 31, "user_id": 8675930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66293f1027d95190307c5ff408442ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tobbes", "link": "https://stackoverflow.com/users/8675930/tobbes"}, "edited": false, "score": 0, "creation_date": 1539084286, "post_id": 52717064, "comment_id": 92364946, "body": "Sorry I have updated above, I am using active state&#39;s perl."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1539109518, "post_id": 52717064, "comment_id": 92379569, "body": "I&#39;ve updated my reply for the module you&#39;re trying to use. <code>Inline::Python</code> can&#39;t work on Windows. But your pastebin doesn&#39;t include your above error message, so maybe there is something else wrong?!"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539089319, "post_id": 52718762, "comment_id": 92368024, "body": "ActivePerl will automatically install dmake+mingw"}, {"owner": {"reputation": 31, "user_id": 8675930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66293f1027d95190307c5ff408442ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tobbes", "link": "https://stackoverflow.com/users/8675930/tobbes"}, "edited": false, "score": 0, "creation_date": 1539158891, "post_id": 52718762, "comment_id": 92395749, "body": "Thank you,, I will have to find another module to use then."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 0, "last_activity_date": 1539119231, "last_edit_date": 1539119231, "creation_date": 1539080730, "answer_id": 52718762, "question_id": 52717064, "link": "https://stackoverflow.com/questions/52717064/making-cpan-run-properly-on-windows-10/52718762#52718762", "title": "Making cpan run properly on windows 10", "body": "<p>From your vague description, I assume that the build tools (compiler, linker) are not available on your development machine. If you tell us the module name you're trying to install and the command you're using to install, we can likely provide better answers that also help you. Please also post the <em>exact</em> error message(s) you're getting.</p>\n\n<p><a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> comes with the C compiler and linker included.</p>\n\n<p>For ActiveState Perl, you can install them by typing the following commands at the command line:</p>\n\n<pre><code>ppm install MinGW\n</code></pre>\n\n<p>Regarding your update, you are installing <a href=\"https://metacpan.org/pod/distribution/Inline-Python/Python.pod\" rel=\"nofollow noreferrer\">Inline::Python</a> and it fails for you:</p>\n\n<pre><code>        2. LIBRARY option. The location of the python library.\n           Inline::Python needs to link against it to use Python.\n\n        Here are the libraries I know about:\n           1) C:/Python26/libs/python26.lib\n\nWhich? Or enter another. [1] C:\\ProgramData\\Anaconda3\n...\nUsing These Settings:\n   Extra Libs:\n   Python Lib:  -LC:/ProgramData Anaconda3\n   Includes:    -IC:/Python26/include\n   Extra Flags: none (perl Makefile.PL --help for details)\n</code></pre>\n\n<p>This looks wrong:</p>\n\n<pre><code>   Python Lib:  -LC:/ProgramData Anaconda3\n\n...\nWarning (mostly harmless): No library found for Anaconda3\n</code></pre>\n\n<p>The above warning is not harmless, as it mostly means that Inline::Python is looking for a library <code>Anaconda3</code>, which is wrong.</p>\n\n<p>My suggestion is that you try entering the library with forward slashes:</p>\n\n<pre><code>Which? Or enter another. [1] C:/ProgramData/Anaconda3\n</code></pre>\n\n<p>or maybe</p>\n\n<pre><code>Which? Or enter another. [1] C:/ProgramData/Anaconda3/python\n</code></pre>\n\n<p>Also, you can much better and easier debug the installation and compilation of a module if you manually perform its install steps, but before you start, see below! In your case, the steps would be:</p>\n\n<p>Launch the <code>cpan</code> client</p>\n\n<pre><code>cpan\n</code></pre>\n\n<p>Download and unpack Inline::Python</p>\n\n<pre><code>look Inline::Python\n</code></pre>\n\n<p>Run the <code>Makefile.PL</code> build process</p>\n\n<pre><code>perl Makefile.PL\nnmake\nnmake test\nnmake install\n</code></pre>\n\n<p>Ideally, none of the above steps should fail.</p>\n\n<p>You have the same problem with <a href=\"https://metacpan.org/release/Proc-ProcessTable\" rel=\"nofollow noreferrer\">Proc::ProcessTable</a>, and the problem here is that this module does not work on Windows. I don't know why <code>Inline::Python</code> relies on it, but unless you find a precompiled Inline::Python for Windows, you will not be able to use either module.</p>\n\n<h3>See also</h3>\n\n<p><a href=\"https://www.activestate.com/blog/2009/01/ppm-install-mingw\" rel=\"nofollow noreferrer\">ActiveState documentation</a></p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 8675930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66293f1027d95190307c5ff408442ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tobbes", "link": "https://stackoverflow.com/users/8675930/tobbes"}, "edited": false, "score": 0, "creation_date": 1539085528, "post_id": 52720250, "comment_id": 92365681, "body": "Ah, so it is impossible to run cpan with active state&#39;s version of perl?"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 31, "user_id": 8675930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66293f1027d95190307c5ff408442ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tobbes", "link": "https://stackoverflow.com/users/8675930/tobbes"}, "edited": false, "score": 0, "creation_date": 1539087357, "post_id": 52720250, "comment_id": 92366741, "body": "It might work for a pure Perl module, but without a lot of work you will have problems with anything that compile up from source code other than Perl"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 31, "user_id": 8675930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66293f1027d95190307c5ff408442ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tobbes", "link": "https://stackoverflow.com/users/8675930/tobbes"}, "edited": false, "score": 0, "creation_date": 1539088374, "post_id": 52720250, "comment_id": 92367385, "body": "@Tobbes, You most definitely can. Ignore JGNI&#39;s claims."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539097380, "post_id": 52720250, "comment_id": 92373530, "body": "@ikegami I&#39;d like to know how. Can you add an answer describing how you would do it?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539110130, "post_id": 52720250, "comment_id": 92379884, "body": "<code>cpan Inline::Python</code>. It automatically installs dmake and mingw if you don&#39;t have them"}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1539156689, "post_id": 52720250, "comment_id": 92394527, "body": "From the Supported Platforms section of the Inline::Python documentation  <code>Inline::Python has been tested on RedHat Linux 6.2 with a variety of different Perl and Python configurations. It also seems to be running pretty well on openSUSE at least from 10.3 to 13.1 and on Solaris. Previous versions of Inline::Python worked on Windows and Cygwin -- this version has never been tested there. I strongly suspect it will require patching. Please send me patches.</code> So it looks like it simply won&#39;t work on Windows at the moment"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539156735, "post_id": 52720250, "comment_id": 92394549, "body": "@JGNI, What does that have to do with me? All I said is that your claims about AP are all wrong. You&#39;re not stuck if it&#39;s not in their repository any more than you are with SP. AP will automatically install and use dmake and mingw if necessary, allowing one to use <code>cpan</code> with <code>AP</code> just as one can with <code>SP</code>."}, {"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539156829, "post_id": 52720250, "comment_id": 92394608, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/181598/discussion-between-jgni-and-ikegami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": false, "score": -1, "last_activity_date": 1539085366, "creation_date": 1539085366, "answer_id": 52720250, "question_id": 52717064, "link": "https://stackoverflow.com/questions/52717064/making-cpan-run-properly-on-windows-10/52720250#52720250", "title": "Making cpan run properly on windows 10", "body": "<p>From your update Active state's version of Perl uses a script called <code>ppm</code> to install pre-compiled packages from their repository. If the module you want isn't in their repository then you are stuck.</p>\n\n<p>In that case I'd advise installing <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">Strawberry Perl</a> which comes with a complete tool chain and will handle any cpan module created with Windows in mind.</p>\n"}], "owner": {"reputation": 31, "user_id": 8675930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66293f1027d95190307c5ff408442ee?s=128&d=identicon&r=PG&f=1", "display_name": "Tobbes", "link": "https://stackoverflow.com/users/8675930/tobbes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 52718762, "answer_count": 2, "score": -1, "last_activity_date": 1539119231, "creation_date": 1539075421, "last_edit_date": 1539084246, "question_id": 52717064, "link": "https://stackoverflow.com/questions/52717064/making-cpan-run-properly-on-windows-10", "title": "Making cpan run properly on windows 10", "body": "<p>I am trying to make cpan work on windows 10 professional.\nI have Perl 5.26 installed as well as dmake. But whenever I try to install anything<br>\nit comes up with errors. is there anything more I need in order to run cpan properly?</p>\n\n<p>I get errors like Warning: Prerequisite 'invoker => 0' for 'AUDREYT/methods-0.12.tar.gz' failed when processing</p>\n\n<p>And also that it is missing the link command.\nIs it possible to get cpan to work properly on windows or should I just leave it be and just use precompiled modules?\nHere is the output of trying to install Inline::Python.\nI have put it on pastebin as it is fairly long:\nThe command is</p>\n\n<pre><code>    install Inline::Python  \n</code></pre>\n\n<p><a href=\"https://pastebin.com/1gSQt3Rm%22here%22\" rel=\"nofollow noreferrer\">pastebin</a></p>\n"}, {"tags": ["perl", "soap", "soaplite"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1539074826, "post_id": 52716577, "comment_id": 92359135, "body": "The <code>#</code> looks odd. Do you know where that is coming from?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539074852, "post_id": 52716577, "comment_id": 92359151, "body": "SOAP::Lite uses LWP under the hood. LWP::ConsoleLogger might be a good debugging aid."}, {"owner": {"reputation": 3, "user_id": 6409353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3029f3c280423ab73dae7f889994a615?s=128&d=identicon&r=PG&f=1", "display_name": "rjx5", "link": "https://stackoverflow.com/users/6409353/rjx5"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539114005, "post_id": 52716577, "comment_id": 92381557, "body": "Hi @simbabque, Thanks for your reply. I have added the header info from LWP::ConsoleLogger. I see the # sign everywhere with uri in the trace. Not sure, where its coming from."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539160323, "post_id": 52716577, "comment_id": 92396520, "body": "If you can pick what you want to use, take a look at XML::Compile::SOAP. It has a bit of a learning curve, but it&#39;s actually quite nice."}, {"owner": {"reputation": 3, "user_id": 6409353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3029f3c280423ab73dae7f889994a615?s=128&d=identicon&r=PG&f=1", "display_name": "rjx5", "link": "https://stackoverflow.com/users/6409353/rjx5"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539211302, "post_id": 52716577, "comment_id": 92423825, "body": "thanks @simbabque, I will give it a try too."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6409353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3029f3c280423ab73dae7f889994a615?s=128&d=identicon&r=PG&f=1", "display_name": "rjx5", "link": "https://stackoverflow.com/users/6409353/rjx5"}, "edited": false, "score": 0, "creation_date": 1539211199, "post_id": 52736671, "comment_id": 92423803, "body": "Thanks @ulix, I overlooked the on_action method. It works after adding this. <code>$client-&gt;on_action( sub { join &#39;&#39;, @_  } );</code>"}], "tags": [], "owner": {"reputation": 185, "user_id": 2842468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sx6Oc.gif?s=128&g=1", "display_name": "ulix", "link": "https://stackoverflow.com/users/2842468/ulix"}, "is_accepted": true, "score": 0, "last_activity_date": 1539168826, "last_edit_date": 1539168826, "creation_date": 1539162854, "answer_id": 52736671, "question_id": 52716577, "link": "https://stackoverflow.com/questions/52716577/calling-a-simple-soap-api-using-perls-soaplite/52736671#52736671", "title": "Calling a simple Soap API using Perl&#39;s Soap::Lite", "body": "<p>URI and method name (<code>Add</code>) are concatenated to build an http header\nnamed SOAPAction.</p>\n\n<p>URI must end with \"/\". SOAP::Lite merge them with \"#\".  </p>\n\n<p>Long time ago I got the same problem. Found that .NET based webservices are disappointed to see \"#\" and read about this solution - from man pages - by mean of on_action handler which simply concatenates URI and method name. \nAll this is well documented in man SOAP::Lite</p>\n\n<pre><code>my $client = SOAP::Lite-&gt;new(\n  readable =&gt; 1,\n  # uri is the same as package/class name into cgi file; must end with \"/\"\n  uri =&gt; $ns, \n  # on action corrects SOAPAction to make .NET happy. .NET dislike the '#' \n  # $_[1] will contain method name on $client-&gt;call('someMethName')\n  on_action =&gt; sub { return '\"'. $ns . $_[1] .'\"'; },  \n  # proxy is the full resource URL of aspx/php/cgi/pl wich implements method name \n  proxy =&gt; $proxy);\n# rest of your code...\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6409353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3029f3c280423ab73dae7f889994a615?s=128&d=identicon&r=PG&f=1", "display_name": "rjx5", "link": "https://stackoverflow.com/users/6409353/rjx5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 52736671, "answer_count": 1, "score": 0, "last_activity_date": 1539168826, "creation_date": 1539073836, "last_edit_date": 1539113199, "question_id": 52716577, "link": "https://stackoverflow.com/questions/52716577/calling-a-simple-soap-api-using-perls-soaplite", "title": "Calling a simple Soap API using Perl&#39;s Soap::Lite", "body": "<p>I am trying to make simple API call (at least that's what I thought initially when I started ) using SOAP::Lite module. I am using one of the publicly available SOAP API <a href=\"http://www.dneonline.com/calculator.asmx\" rel=\"nofollow noreferrer\">here</a> to add two numbers. I am getting following error:</p>\n\n<blockquote>\n  <p>Server did not recognize the value of HTTP Header SOAPAction:\n  <a href=\"http://tempuri.org/#Add\" rel=\"nofollow noreferrer\">http://tempuri.org/#Add</a>.</p>\n</blockquote>\n\n<p>I enabled the debug in SOAP::Lite and it seems my request is not formed correctly. I suspect the type specified (xsi:type=\"xsd:int\") in intA and intB is causing issue. </p>\n\n<p>Request from debug:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; &lt;soap:Envelope\n    soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"\n    xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:soapenc=\"http://schemas.xmlsoap.org/soap/encoding/\"\n    xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;   \n  &lt;soap:Body&gt;\n    &lt;Add xmlns=\"http://tempuri.org/\"&gt;\n      &lt;intA xsi:type=\"xsd:int\"&gt;5&lt;/intA&gt;\n      &lt;intB xsi:type=\"xsd:int\"&gt;10&lt;/intB&gt;\n    &lt;/Add&gt;   \n &lt;/soap:Body&gt; &lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>Here is my Perl code:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse SOAP::Lite;\n#use SOAP::Lite +trace =&gt; 'all';    \n\n    SOAP::Lite-&gt;import(trace =&gt; 'debug');\n\n    #my $uri = 'http://tempuri.org/';\n    my $proxy = 'http://www.dneonline.com/calculator.asmx';\n    my $ns = 'http://tempuri.org/'; \n\n    my $client = SOAP::Lite\n            -&gt;readable(1)\n            -&gt;uri($ns)\n            -&gt;proxy($proxy);\n\n    my $param1 = SOAP::Data-&gt;name(\"intA\" =&gt; $x);\n    my $param2 = SOAP::Data-&gt;name(\"intB\" =&gt; $y);\n\n    my $response = $client-&gt;Add($param1,$param2);\n\n    print \"Result is $response \\n\";\n</code></pre>\n\n<p>Note: I tried loading the WSDL in SOAPUI tool and the API works fine there. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As @simbabque suggested, I tried debuging using LWP::ConsoleLogger</p>\n\n<p>Header looks like this:</p>\n\n<pre><code>.---------------------------------+-----------------------------------------.\n| Request (before sending) Header | Value                                   |\n+---------------------------------+-----------------------------------------+\n| Accept                          | text/xml, multipart/*, application/soap |\n| Content-Length                  | 549                                     |\n| Content-Type                    | text/xml; charset=utf-8                 |\n| SOAPAction                      | \"http://tempuri.org/#Add\"               |\n| User-Agent                      | SOAP::Lite/Perl/1.27                    |\n'---------------------------------+-----------------------------------------'\n</code></pre>\n\n<p>I have no idea where # is coming from. Maybe I will try SOAP::Simple and see if it helps.</p>\n\n<p>Cheers</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 4, "creation_date": 1539073164, "post_id": 52716163, "comment_id": 92358125, "body": "Welcome to SO. To persuade other people to help you it would be beneficial if you included some test data, the current output from the test data and the expected output."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1539078255, "post_id": 52716163, "comment_id": 92361310, "body": "Maybe you could try add <code>m</code> and <code>g</code> modifiers to your regexp? See <a href=\"http://perldoc.perl.org/perlre.html#Modifiers\" rel=\"nofollow noreferrer\">perlre</a> for more information. In this way you can count multiple occurrences of <code>\\R</code>  in <code>$text</code>"}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 1, "creation_date": 1539078636, "post_id": 52716163, "comment_id": 92361562, "body": "Your regexp only matches one \\R at the end of the line, so I don&#39;t see how it would ever do any counting."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539087881, "post_id": 52716163, "comment_id": 92367069, "body": "There&#39;s not even an attempt to count anything in that code. You simply check if the string contains a line-ending."}], "answers": [{"comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1539082512, "post_id": 52718185, "comment_id": 92363916, "body": "Note: the number of matches is returned if you impose list context. So you could also use the idiom <code>$num_matches = () = $text =~ &#47;....&#47;</code>"}, {"owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "reply_to_user": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1539086456, "post_id": 52718185, "comment_id": 92366237, "body": "True, I&#39;ll add that to the answer. Thanks"}], "tags": [], "owner": {"reputation": 4446, "user_id": 7500028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbf0e88580cccb9004735bcb92be952e?s=128&d=identicon&r=PG&f=1", "display_name": "Julio", "link": "https://stackoverflow.com/users/7500028/julio"}, "is_accepted": false, "score": 2, "last_activity_date": 1539086502, "last_edit_date": 1539086502, "creation_date": 1539078965, "answer_id": 52718185, "question_id": 52716163, "link": "https://stackoverflow.com/questions/52716163/why-does-this-not-count-crlf-at-the-end-of-a-string/52718185#52718185", "title": "Why does this not count CRLF at the end of a string?", "body": "<p>There are a couple of problems. You need to use global match in order to find several matches. Also your regex just matches the last <code>\\R</code></p>\n\n<p>So, for the regex, use this <code>m/\\R(?=\\R*$)/g</code>, that matches <code>\\R</code> that must be followed by 0 or more <code>\\R</code> and then the end of string.</p>\n\n<p>Another problem is that this <code>my $number = ( $text =~ /\\R$/ );</code> does not return the number of matches. It returns <code>1</code> if there is a match. You should use a while loop for that (with <code>g</code> flag for the regex)</p>\n\n<p>Finally, the last line should be <code>printf</code> instead of <code>sprintf</code>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $text = \"ASD\nASD\nASD\nASD\n\n\n\n\n\n\";\n\nprintf \"text is [%s]\", $text;   # debug this\n\nmy $number = 0;\n$number++ while $text =~ m/\\R(?=\\R*$)/g;\n# # or use this instead:\n# my $number = () = $text =~ m/\\R(?=\\R*$)/g;\n\n\nprintf \"\\n\\nFile has [%i] errant CRLFs at the EOF\\n\", $number;\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>text is [ASD\nASD\nASD\nASD\n\n\n\n\n\n]\n\nFile has [6] errant CRLFs at the EOF\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6399023, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154098218601798/picture?type=large", "display_name": "DavidA", "link": "https://stackoverflow.com/users/6399023/davida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539086502, "creation_date": 1539072371, "question_id": 52716163, "link": "https://stackoverflow.com/questions/52716163/why-does-this-not-count-crlf-at-the-end-of-a-string", "title": "Why does this not count CRLF at the end of a string?", "body": "<p>I have this code which I hope will count the CRLFs at the end of the string.\nIt doesn't currently work and I can't see why.</p>\n\n<pre><code>printf \"text is [%s]\", $text;   # debug this\nmy $number = ( $text =~ /\\R$/ );\nsprintf \"File has [%i] errant CRLFs at the EOF\\n\", $number;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "numbers", "match"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1539071543, "post_id": 52715145, "comment_id": 92357237, "body": "<code>undef $hash{$values[0]};</code> What are you trying to do with that line?"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1539069826, "post_id": 52715361, "comment_id": 92356269, "body": "I use $line at $line &gt;= $min &amp;&amp; $line &lt;= $max. to check the number is in the number range or not"}, {"owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 0, "creation_date": 1539069935, "post_id": 52715361, "comment_id": 92356331, "body": "I used to  try $hash{ $value[1] }, but still can not work. I got the error message about the hash"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "edited": false, "score": 1, "creation_date": 1539074336, "post_id": 52715361, "comment_id": 92358836, "body": "What error message? Maybe you have whitespace at the end of your input lines? <code>s&#47;\\s+$&#47;&#47;;</code> after (or instead of the) <code>chomp</code> can help there."}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1539069567, "creation_date": 1539069567, "answer_id": 52715361, "question_id": 52715145, "link": "https://stackoverflow.com/questions/52715145/how-to-match-a-number-values-from-two-files-by-perl/52715361#52715361", "title": "how to match a number values from two files by perl", "body": "<p>You never assign or use <code>$line</code> in your second loop except for that single comparison. What is its purpose. Did you maybe want to use <code>$hash{ $value[1] }</code> instead?</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1539070068, "creation_date": 1539070068, "answer_id": 52715514, "question_id": 52715145, "link": "https://stackoverflow.com/questions/52715145/how-to-match-a-number-values-from-two-files-by-perl/52715514#52715514", "title": "how to match a number values from two files by perl", "body": "<p>The variable <code>$line</code> is not used in the second loop at all. In the first loop, you declare another <code>$line</code> shadowing the outer variable. It's better not to declare variables in wider scope than actually needed.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nmy %hash;\nopen my $IN1, '&lt;', 'file1.txt' or die $!;\nwhile (&lt;$IN1&gt;) {\n    my @values = split;\n    $hash{ $values[0] } = $values[1];\n}\n\nopen my $IN2, '&lt;', 'file2.txt' or die $!;\nwhile (&lt;$IN2&gt;) {\n    my @values = split;\n    my ($min, $max) = @values[2, 3];\n    print if exists $hash{ $values[1] }\n          &amp;&amp; $hash{ $values[1] } &gt; $min\n          &amp;&amp; $hash{ $values[1] } &lt; $max;\n}\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 52715514, "answer_count": 2, "score": 0, "last_activity_date": 1539070068, "creation_date": 1539068768, "last_edit_date": 1539069517, "question_id": 52715145, "link": "https://stackoverflow.com/questions/52715145/how-to-match-a-number-values-from-two-files-by-perl", "title": "how to match a number values from two files by perl", "body": "<p>I have a two text file separate by tab.<br>\nfile 1:  </p>\n\n<pre><code> 21             114352848          \n  6             73853300       \n 17             53191768      \n 13             28008170          \n 35             34642708  \n 25             18912643  \n</code></pre>\n\n<p>file2:  </p>\n\n<pre><code>ABHD17B  1     85806534    85893402    \nACAT2    1     49011742    49029143    \nACTN4    21    114352846   114428174    \nADGRG6   1     33969266    34107014        \nAFDN     17    55435472    55536326       \nAGTPBP1  6     73853296    74033587       \nAHI1     13    28008167    28198117       \nAIG1     35    34642706    34886059       \nAKAP12   25    41614908    41711677        \nAKAP7    25    69361015    69483139        \nAKT2     16    113380376   113406769         \nALDH16A1  1    107032288   107047268  \n</code></pre>\n\n<p>output:  </p>\n\n<pre><code>ACTN4    21    114352846   114428174  \nAGTPBP1  6     73853296    74033587  \nAHI1     13    28008167    28198117    \nAIG1     35    34642706    34886059    \n</code></pre>\n\n<p>I want to do the regex match by column.\nfirst, I want to check the column 1 from file 1 match with column 2 from file 2. If yes, then check the column 2 from file 1 whether location at number range between column 3 and column 4 in file 2.</p>\n\n<p>my perl code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nmy %hash;\nmy @values;\nmy @value;\nmy $line;\nmy $min;\nmy $max;\nopen my $IN1, '&lt;', 'file1.txt' or die $!;\nwhile (&lt;$IN1&gt;) {\nmy @values = split;\nmy $line = $values[1];\nundef $hash{$values[0]};\n}\nclose $IN1;\nopen my $IN2, '&lt;', 'file2.txt' or die $!;\nwhile (&lt;$IN2&gt;) {\nchomp;\nmy @value = split;\nmy $min = $value[2];\nmy $max = $value[3];\nif (exists $hash{$value[1]}) {\nif ($line &gt;= $min &amp;&amp; $line &lt;= $max){\n  print \"$_\\n\";\n   }\n }\n}\nclose $IN2;\n</code></pre>\n\n<p>I am not sure why my code doesn't work. \nI got the waring:\nUse of uninitialized value $line in numeric ge (>=) at .pl line XX</p>\n\n<p>Then, I would like to know are there other effective way to write scripts for this example. </p>\n"}, {"tags": ["performance", "benchmarking", "micro-optimization", "perl"], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "edited": false, "score": 0, "creation_date": 1539071340, "post_id": 52715561, "comment_id": 92357107, "body": "But WHY is scalar creation slow?  This is really more of a perlguts question: it&#39;s unclear to me why this would be the case.  In C, for example, scalar creation just makes the stack 4 bytes bigger.  There should be no performance difference.  Why does it matter here?  What&#39;s the real break-even point?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "edited": false, "score": 0, "creation_date": 1539071695, "post_id": 52715561, "comment_id": 92357330, "body": "@GregKennedy Scalar in Perl is an object (so to speak), with a bunch of properties/fields.  It&#39;s at least 12 bytes (I think). Of course that it takes some time to get it up and going."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539072220, "post_id": 52715561, "comment_id": 92357620, "body": "It&#39;s not just the SV (internal storage of the scalar value), it also has to create that SV scoped to that lexical block and tear it down at the end. Without having to create that SV the compiler is possibly optimizing away that scope entirely, I know it does this with simpler blocks at least. I see that your benchmarks are more complex though so probably not that."}, {"owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "edited": false, "score": 0, "creation_date": 1539077679, "post_id": 52715561, "comment_id": 92360955, "body": "I tried two things for another test: replacing ITERATIONS constant with a loop (so I can see the switch-over point), and adding another version that updates a global variable instead of defining it in local. Global is marginally faster than Local, but neither is faster than direct array access until ~7 iterations.  The results are here: <a href=\"https://pastebin.com/cTEZZe18\" rel=\"nofollow noreferrer\">pastebin.com/cTEZZe18</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "edited": false, "score": 1, "creation_date": 1539105515, "post_id": 52715561, "comment_id": 92377659, "body": "@GregKennedy This is all interesting but I don&#39;t think that such detailed and precise benchmarks can be reliable down to counting single iterations. I get similar behavior and the number at which it turns around is about what you quote -- but fluctuates a lot between runs. This isn&#39;t C and there are too many random factors in each run of the interpreter.   Altogether, yes a scalar is expensive (comparatively speaking of data."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "edited": false, "score": 0, "creation_date": 1539105612, "post_id": 52715561, "comment_id": 92377709, "body": "@GregKennedy  Btw, note that in an array each element needs a full-blown scalar constructed as well (on top of constructing the array &quot;object&quot; itself).  The total size of the array is two to three times the size of its data. There is even more to do for a hash, which is bigger and slower than an array.  These things cost in Perl, as something has to pay for all the conveniences."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1539070274, "creation_date": 1539070274, "answer_id": 52715561, "question_id": 52714932, "link": "https://stackoverflow.com/questions/52714932/performance-of-local-variable-vs-array-access/52715561#52715561", "title": "Performance of local variable vs. array access", "body": "<p>Let's first turn the statement: Caching the lookup is expected to be faster as it avoids the repeated lookups, even as it does cost some, and it starts being faster once more than 7 lookups are done. Now that's not so shocking, I think. </p>\n\n<p>As to why it's slower for fewer than seven iterations ... I'll guess that the cost of the scalar creation is still greater than those few lookups. It is surely greater than one lookup, yes? How about two, then? I'd say that \"a few\" may well be a good measure.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1539131696, "post_id": 52729713, "comment_id": 92387119, "body": "That&#39;s an interesting additional analysis. I&#39;d suggest to find what kinds of things a &quot;scalar&quot; has (in perlguts?); it will become immediately clear that it is a bit expensive.  Another good resource are various backends for the module <a href=\"http://perldoc.perl.org/O.html\" rel=\"nofollow noreferrer\">O</a>. Try <code>perl -MO=Concise -e&#39;my $v; $v=1&#39;</code>. (Also, an assignment is in principle more expensive than a read.)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539131728, "post_id": 52729713, "comment_id": 92387130, "body": "Can&#39;t help it: This is not C. This is not C. This is not C."}], "tags": [], "owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "is_accepted": false, "score": 1, "last_activity_date": 1539121198, "creation_date": 1539121198, "answer_id": 52729713, "question_id": 52714932, "link": "https://stackoverflow.com/questions/52714932/performance-of-local-variable-vs-array-access/52729713#52729713", "title": "Performance of local variable vs. array access", "body": "<p>I've done more poking around at this today, and what I've determined is that <em>scalar <strong>assignment</strong> of any sort</em> is an expensive operation, relative to the overhead of one-deep array lookup.</p>\n\n<p>This seems like it's just restating the initial question, but I feel I have found more clarity.  If, for example, I modify my local_variable subroutine to do another assignment like so:</p>\n\n<pre><code>my $index = int(rand(scalar @array));\nmy $val = 0; # &lt;- this is new\n$val = $array[$index];\nmy $ret = '';\n</code></pre>\n\n<p>...the code suffers an additional 5% speed penalty beyond the single-assignment version - even though it does nothing but a dummy assignment to the variable.</p>\n\n<p>I also tested to see if scope caused setup/teardown of <code>$var</code> to impede performance, by switching it to global instead of local scoped one.  The difference is negligible (see comments to @zdim above), pointing <em>away</em> from construct/destruct as the performance bottleneck.</p>\n\n<hr>\n\n<p>In the end, my confusion was based on <strong>faulty assumptions</strong> that <strong>scalar assignment should be fast</strong>.  I am used to working in C, where copying a value to a local variable is an extremely quick operation (1-2 asm instructions).</p>\n\n<p>As it turns out, this is not the case in Perl (though I don't know <em>exactly</em> why, it's ok).  Scalar assignment is a relatively \"slow\" operation... Whatever Perl internals are doing to get at the nth element of an Array object is actually quite fast by comparison.  The \"multiply and add\" I mentioned in the initial post is still far less work than the code for scalar assignment.</p>\n\n<p>That is why it takes so many lookups to match the performance of caching the result: simply assigning to the \"cache\" variable is ~7 times slower (for my setup).</p>\n"}], "owner": {"reputation": 315, "user_id": 5490719, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-obsSHHWf_o8/AAAAAAAAAAI/AAAAAAAAALk/tZpZCJsA4C8/photo.jpg?sz=128", "display_name": "Greg Kennedy", "link": "https://stackoverflow.com/users/5490719/greg-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1539121198, "creation_date": 1539067926, "last_edit_date": 1539067984, "question_id": 52714932, "link": "https://stackoverflow.com/questions/52714932/performance-of-local-variable-vs-array-access", "title": "Performance of local variable vs. array access", "body": "<p>I was doing some benchmarking of Perl performance, and ran into a case that I thought was somewhat odd.  Suppose you have a function which uses a value from an array multiple times. In this case, you often see some code as:</p>\n\n<pre><code>sub foo {\n  my $value = $array[17];\n\n  do_something_with($value);\n  do_something_else_with($value);\n}\n</code></pre>\n\n<p>The alternative is not to create a local variable at all:</p>\n\n<pre><code>sub foo {\n  do_something_with($array[17]);\n  do_something_else_with($array[17]);\n}\n</code></pre>\n\n<p>For readability, the first is clearer.  I assumed that performance would be at least equal (or better) for the first case too - array lookup requires a multiply-and-add, after all.</p>\n\n<hr>\n\n<p>Imagine my surprise when this test program showed the opposite.  On my machine, re-doing the array lookup is actually <em>faster</em> than storing the result, until I increase ITERATIONS to 7; in other words, for me, creating a local variable is only worthwhile if it's used at least 7 times!</p>\n\n<pre><code>use Benchmark qw(:all);\n\nuse constant { ITERATIONS =&gt; 4, TIME =&gt; -5 };\n\n# sample array\nmy @array = (1 .. 100);\n\ncmpthese(TIME, {\n  # local variable version\n  'local_variable' =&gt; sub {\n    my $index = int(rand(scalar @array));\n    my $val = $array[$index];\n    my $ret = '';\n\n    for (my $i = 0; $i &lt; ITERATIONS; $i ++) {\n       $ret .= $val;\n     }\n\n    return $ret;\n  },\n\n  # multiple array access version\n  'multi_access' =&gt; sub {\n    my $index = int(rand(scalar @array));\n    my $ret = '';\n\n    for (my $i = 0; $i &lt; ITERATIONS; $i ++) {\n      $ret .= $array[$index];\n    }\n\n    return $ret;\n  }\n});\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>                   Rate local_variable   multi_access\nlocal_variable 245647/s             --            -5%\nmulti_access   257907/s             5%             --\n</code></pre>\n\n<p>It's not a HUGE difference, but it brings up my question: <strong>why is it slower to create a local variable and cache the array lookup, than to do the lookup again?</strong>  Reading other S.O. posts, I've seen that other languages / compilers do have the expected outcome, and sometimes even transform these into the same code.  What is Perl doing?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1539061485, "post_id": 52712967, "comment_id": 92352907, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539103694, "post_id": 52712967, "comment_id": 92376786, "body": "Note that in <a href=\"https://perldoc.pl/functions/do\" rel=\"nofollow noreferrer\">recent docs for do</a> it&#39;s clarified that you actually should do <code>do &#39;.&#47;test.pl&#39;;</code> (or preferably an absolute path) because it actually searches <code>@INC</code> similar to <code>require</code> otherwise. It is sadly impossible to tell the difference between a file that returns false and an error loading the file, so make sure your file returns a true value."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10476223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc43110ad472e8aee8af69dea8748413?s=128&d=identicon&r=PG&f=1", "display_name": "junbon", "link": "https://stackoverflow.com/users/10476223/junbon"}, "edited": false, "score": 0, "creation_date": 1539155071, "post_id": 52716023, "comment_id": 92393636, "body": "I actually found out the mistake myself but didn&#39;t update the question. Thanks for your time, will upvote this!"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 1, "last_activity_date": 1539071929, "creation_date": 1539071929, "answer_id": 52716023, "question_id": 52712967, "link": "https://stackoverflow.com/questions/52712967/do-file-throws-exception-when-checking-if-file-exists/52716023#52716023", "title": "do FILE throws exception when checking if file exists", "body": "<p><code>$!</code> is only meaningful if an error occurred, so your code claims an error occurred when none did.</p>\n\n<p>Change</p>\n\n<pre><code>use Path::Tiny;\npath('anything')-&gt;exists;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>use Path::Tiny;\npath('anything')-&gt;exists;\n1;\n</code></pre>\n\n<p>and change</p>\n\n<pre><code>do 'test.pl';\nwarn 'error 1: ' . $@ if $@;\nwarn 'error 2: ' . $! if $!;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>do('test.pl')\n   or die($@ || $!);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10476223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc43110ad472e8aee8af69dea8748413?s=128&d=identicon&r=PG&f=1", "display_name": "junbon", "link": "https://stackoverflow.com/users/10476223/junbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52716023, "answer_count": 1, "score": 0, "last_activity_date": 1539071929, "creation_date": 1539055924, "last_edit_date": 1539056273, "question_id": 52712967, "link": "https://stackoverflow.com/questions/52712967/do-file-throws-exception-when-checking-if-file-exists", "title": "do FILE throws exception when checking if file exists", "body": "<p>I am having problem understanding why the following code throws errors.</p>\n\n<p>I have a simple script:</p>\n\n<p>do_test.pl</p>\n\n<pre><code>use strict;\nuse warnings;\n\ndo 'test.pl';\nwarn 'error 1: ' . $@ if $@;\nwarn 'error 2: ' . $! if $!;\n</code></pre>\n\n<p>test.pl</p>\n\n<pre><code>use Path::Tiny;\n\npath('anything')-&gt;exists;\n</code></pre>\n\n<p>I am not entirely clear why <code>test.pl</code> runs just fine and <code>do_test.pl</code> throws an error: <code>error 2: No such file or directory</code></p>\n\n<p>This is a simplified version of my code.</p>\n"}, {"tags": ["html", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1539044114, "post_id": 52711594, "comment_id": 92349352, "body": "What do you mean by &quot;not just HTML code text&quot;?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1539044355, "post_id": 52711594, "comment_id": 92349406, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1333097/how-to-send-a-html-email-with-the-bash-command-sendmail\">How to send a html email with the bash command &quot;sendmail&quot;?</a>"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539045222, "post_id": 52711594, "comment_id": 92349562, "body": "Make sure you have not HTML-escaped your HTML. Otherwise, the problem is not how you are sending the text, but how the client is interpreting the body based on your headers. Instead of shelling out to sendmail consider using a module like <a href=\"https://metacpan.org/pod/Email::Stuffer\" rel=\"nofollow noreferrer\">Email::Stuffer</a> which among other things makes it easy to specify HTML contents with html_body (and defaults to using sendmail to send the mail you&#39;ve constructed)."}, {"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1539073157, "post_id": 52711594, "comment_id": 92358118, "body": "@MattJacob What I mean by that is that I do not just want the text to show up, but the table instead."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "edited": false, "score": 0, "creation_date": 1539073231, "post_id": 52712541, "comment_id": 92358170, "body": "Hello, thanks for the response. Is &#39;$html&#39; a keyword?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "edited": false, "score": 0, "creation_date": 1539087589, "post_id": 52712541, "comment_id": 92366901, "body": "No. The variable holding your HTML document"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1539052428, "creation_date": 1539052428, "answer_id": 52712541, "question_id": 52711594, "link": "https://stackoverflow.com/questions/52711594/perl-how-to-convert-html-code-text-into-html-table-in-an-e-mail/52712541#52712541", "title": "Perl - How to convert HTML code text into HTML table in an e-mail", "body": "<p>You ended the header too early.</p>\n\n<p>You effectively have the following:</p>\n\n<pre><code>print MAIL \"To: $to\\n\";\nprint MAIL \"From: $from\\n\";\nprint MAIL \"Subject: $subject\\n\";\nprint MAIL \"\\n\";\nprint MAIL \"Content-type: text/html\\n\";\nprint MAIL $html;\n</code></pre>\n\n<p>You want the following:</p>\n\n<pre><code>print MAIL \"To: $to\\n\";\nprint MAIL \"From: $from\\n\";\nprint MAIL \"Subject: $subject\\n\";\nprint MAIL \"Content-type: text/html\\n\";\nprint MAIL \"\\n\";\nprint MAIL $html;\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 10377474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066fbba87b33a9807ecbfd2a393f8afa?s=128&d=identicon&r=PG&f=1", "display_name": "JohnEgg", "link": "https://stackoverflow.com/users/10377474/johnegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539052428, "creation_date": 1539043457, "question_id": 52711594, "link": "https://stackoverflow.com/questions/52711594/perl-how-to-convert-html-code-text-into-html-table-in-an-e-mail", "title": "Perl - How to convert HTML code text into HTML table in an e-mail", "body": "<p>I have my html code inside my array</p>\n\n<pre><code>   @array //contains all HTML table code\n</code></pre>\n\n<p>I want to send an e-mail that sends this html code through and converts into the HTML table it is meant to be (not just html code text)</p>\n\n<pre><code>$to = 'my@email.com';\n$from = 'my@email.com';\n$subject = 'Test';\n@message = @array;\n\n\nopen(MAIL, \"|/usr/sbin/sendmail -t\");\n\n# Email Header\nprint MAIL \"To: $to\\n\";\nprint MAIL \"From: $from\\n\";\nprint MAIL \"Subject: $subject\\n\\n\";\nprint MAIL \"Content-type: text/html\\n\";\n# Email Body\nprint MAIL @message;\n\nclose(MAIL);\nprint \"Email Sent Successfully\\n\";\n\n\n}\n</code></pre>\n\n<p>Right now this sends me an e-mail with all the html code as just lines of code and text, however I want it to convert into the html table as it does normally. I tried using MIME but could not get it to work. Help would be greatly appreciated.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539051496, "post_id": 52711166, "comment_id": 92350688, "body": "Are the user chosen substitutions global -- that they apply to each occurrence of given characters, in any words?  If not (catching <code>h@cker</code> would mess up <code>name@host.org</code>?), is it feasible that the user supplies fixes (<code>@a</code> or such) <i>and</i> the words that they apply to (or even those that they mangled, so either <code>hacker</code> or <code>h@cker</code> )?"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 10475607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529d9dee77b15c4a0587613e556bef20?s=128&d=identicon&r=PG&f=1", "display_name": "kaylani2", "link": "https://stackoverflow.com/users/10475607/kaylani2"}, "edited": false, "score": 0, "creation_date": 1539042236, "post_id": 52711410, "comment_id": 92348974, "body": "Sadly the possible substitutions are arbitrarily defined by an user and I can&#39;t be sure if there will be more than one &quot;normalized form&quot;. I guess I&#39;ll implement this substitution just in case. Nice catch on the quotemeta. My test file with the strings to be searched didn&#39;t contain any problematic characters, so I didn&#39;t run into the problem. I&#39;ll adjust that in my code. Thanks a lot."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 83, "user_id": 10475607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529d9dee77b15c4a0587613e556bef20?s=128&d=identicon&r=PG&f=1", "display_name": "kaylani2", "link": "https://stackoverflow.com/users/10475607/kaylani2"}, "edited": false, "score": 0, "creation_date": 1539042386, "post_id": 52711410, "comment_id": 92349003, "body": "Can you edit your question to include that (and maybe how) the substitutions are defined by the user?"}, {"owner": {"reputation": 83, "user_id": 10475607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529d9dee77b15c4a0587613e556bef20?s=128&d=identicon&r=PG&f=1", "display_name": "kaylani2", "link": "https://stackoverflow.com/users/10475607/kaylani2"}, "edited": false, "score": 0, "creation_date": 1539043868, "post_id": 52711410, "comment_id": 92349290, "body": "I&#39;ve added how the user could define it. I still have to set these rules in the body of the routine and the blacklist is still just a text file with some words in it."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 2, "last_activity_date": 1539041756, "creation_date": 1539041756, "answer_id": 52711410, "question_id": 52711166, "link": "https://stackoverflow.com/questions/52711166/including-regex-on-variable-before-matching-string/52711410#52711410", "title": "Including regex on variable before matching string", "body": "<p>This is sort of a full-text search problem, so one method is to normalize the document strings before matching against them.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Data::Munge 'list2re';\n...\nmy %norms = (\n  '@' =&gt; 'a',\n  '1' =&gt; 'i',\n  ...\n);\nmy $re = list2re keys %norms;\ns/($re)/$norms{$1}/ge for @wordArray;\n</code></pre>\n\n<p>This approach only works if there's only a single possible \"normalized form\" for any given word, and may be less efficient anyway than just trying every possible variation of the search string if your document is large enough and you recompute this every time you search it.</p>\n\n<p>As a note your regex <code>m/$randomString/gi</code> should be <code>m/\\Q$randomString/gi</code>, as you don't want any regex metacharacters in $randomString to be interpreted that way. See docs for <a href=\"https://perldoc.pl/functions/quotemeta\" rel=\"nofollow noreferrer\">quotemeta</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 10475607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529d9dee77b15c4a0587613e556bef20?s=128&d=identicon&r=PG&f=1", "display_name": "kaylani2", "link": "https://stackoverflow.com/users/10475607/kaylani2"}, "edited": false, "score": 0, "creation_date": 1539130187, "post_id": 52712576, "comment_id": 92386794, "body": "This extension ended up solving a problem that I would have encountered later on the project. Thank you for that."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 83, "user_id": 10475607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529d9dee77b15c4a0587613e556bef20?s=128&d=identicon&r=PG&f=1", "display_name": "kaylani2", "link": "https://stackoverflow.com/users/10475607/kaylani2"}, "edited": false, "score": 0, "creation_date": 1539130502, "post_id": 52712576, "comment_id": 92386865, "body": "@kaylani2  Great.  I&#39;d say that fuzzy matching is better if your problem isn&#39;t clean-cut while a manual approach may be better if you do have clear and straight requirements.  Let me know if questions come up, or if your requirements &quot;crystalize.&quot;"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1539715321, "last_edit_date": 1539715321, "creation_date": 1539052647, "answer_id": 52712576, "question_id": 52711166, "link": "https://stackoverflow.com/questions/52711166/including-regex-on-variable-before-matching-string/52712576#52712576", "title": "Including regex on variable before matching string", "body": "<p>There are parts of the problem which aren't specified precisely enough (yet). </p>\n\n<p>Some of the roll-your-own approaches, that depend on the details, are</p>\n\n<ul>\n<li><p>If user defined substitutions are global (replace every occurrence of a character in every string) the user can submit a mapping, as a hash say, and you can fix them all. The process will identify all candidates for the words (along with the actual, unmangled, words, if found). There may be false positives so also plan on some post-processing</p></li>\n<li><p>If the user can supply a list of substitutions <em>along with</em> words that they apply to (the mangled or the corresponding unmangled ones) then we can have a more targeted run</p></li>\n</ul>\n\n<p>Before this is clarified, here is another way: use a module for approximate (\"fuzzy\") matching.</p>\n\n<p>The <a href=\"https://metacpan.org/pod/String::Approx\" rel=\"nofollow noreferrer\">String::Approx</a> seems to fit quite a few of your requirements. </p>\n\n<p>The match of the target with a given string relies on the notion of the <em>Levenshtein edit distance</em>: how many insertions, deletions, and replacements (\"edits\") it takes to make the given string into the sought target. The maximum accepted number of edits can be set.</p>\n\n<p>A simple-minded example:</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse String::Approx qw(amatch);\n\nmy $target = qq(russianhacker);\n\nmy @text = qw(that h@cker was a russ1@anh@ck3r);\n\nmy @matches = amatch($target, [\"25%\"], @text);\n\nsay for @matches;     #==&gt;  russ1@anh@ck3r\n</code></pre>\n\n<p>See documentation for what the module avails us, but at least two comments are in place.</p>\n\n<p>First, note that the second argument in <code>amatch</code> specifies the percentile-deviation from the target string that is acceptable. For this particular example we need to allow every fourth character to be \"edited.\" So much room for tweaking can result in accidental matches which then need be filtered out, so there will be some post-processing to do.</p>\n\n<p>Second -- we didn't catch the easier one, <code>h@cker</code>. The module takes a fixed \"pattern\" (target), not a regex, and can search for only one at a time. So, in principle, you need a pass for each target string. This can be improved a lot, but there'll be more work to do.</p>\n\n<p>Please study the documentation; the module offers a whole lot more than this simple example.</p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 10475607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529d9dee77b15c4a0587613e556bef20?s=128&d=identicon&r=PG&f=1", "display_name": "kaylani2", "link": "https://stackoverflow.com/users/10475607/kaylani2"}, "is_accepted": true, "score": 1, "last_activity_date": 1539130530, "creation_date": 1539130530, "answer_id": 52730934, "question_id": 52711166, "link": "https://stackoverflow.com/questions/52711166/including-regex-on-variable-before-matching-string/52730934#52730934", "title": "Including regex on variable before matching string", "body": "<p>I've ended solving the problem by including the regex directly on the variable that I'll use to match against the lines of my file. It looks something like this:</p>\n\n<pre><code>sub getOccurrenceOfMungedStringInFile\n{\n  my $fileName = $_[0];\n  my $mungedWordToCount = $_[1];\n  my $numberOfOccurrences = 0;\n\n  open (my $inputFile, \"&lt;\", $fileName) or die \"Can't open file: $!\";\n\n  $mungedWordToCount =~ s/a/\\[a\\@4\\]/gi;\n\n  while (my $currentLine = &lt;$inputFile&gt;)\n  {\n    chomp ($currentLine);\n    $numberOfOccurrences += () = ($currentLine =~ m/$mungedWordToCount/gi);\n  }\n\n  close ($inputFile) or die \"Can't open file: $!\";\n\n  return $numberOfOccurrences;\n}\n</code></pre>\n\n<p>Where the line:</p>\n\n<pre><code>$mungedWordToCount =~ s/a/\\[a\\@4\\]/gi;\n</code></pre>\n\n<p>Is just one of the substitutions that are needed and others can be added similarly.\nI didn't know that Perl would just interpret the regex inside of the variable since I've tried that before and could only get the wanted results defining the variables inside the function using single quotes. I must've done something wrong the first time.</p>\n\n<p>Thanks for the suggestions, people.</p>\n"}], "owner": {"reputation": 83, "user_id": 10475607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529d9dee77b15c4a0587613e556bef20?s=128&d=identicon&r=PG&f=1", "display_name": "kaylani2", "link": "https://stackoverflow.com/users/10475607/kaylani2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 52730934, "answer_count": 3, "score": 2, "last_activity_date": 1539715321, "creation_date": 1539039915, "last_edit_date": 1539043719, "question_id": 52711166, "link": "https://stackoverflow.com/questions/52711166/including-regex-on-variable-before-matching-string", "title": "Including regex on variable before matching string", "body": "<p>I'm trying to find and extract the occurrence of words read from a text file in a text file. So far I can only find when the word is written correctly and not munged (a changed to @ or i changed to 1). Is it possible to add a regex to my strings for matching or something similar? This is my code so far:</p>\n\n<pre><code>sub getOccurrenceOfStringInFileCaseInsensitive\n{\n  my $fileName = $_[0];\n  my $stringToCount = $_[1];\n  my $numberOfOccurrences = 0;\n  my @wordArray = wordsInFileToArray ($fileName);\n\n  foreach (@wordArray)\n  {\n    my $numberOfNewOccurrences = () = (m/$stringToCount/gi);\n    $numberOfOccurrences += $numberOfNewOccurrences;\n  } \n\n\n  return $numberOfOccurrences;\n}\n</code></pre>\n\n<p>The routine receives the name of a file and the string to search. The routine wordsInFileToArray () just gets every word from the file and returns an array with them.\nIdeally I would like to perform this search directly reading from the file in one go instead of moving everything to an array and iterating through it. But the main question is how to hard code something into the function that allows me to capture munged words.</p>\n\n<p>Example: I would like to extract both lines from the file.\nexample.txt:</p>\n\n<p>russ1@anh@ck3r</p>\n\n<p>russianhacker</p>\n\n<pre><code># this variable also will be read from a blacklist file\n$searchString = \"russianhacker\";\ngetOccurrenceOfStringInFileCaseInsensitive (\"example.txt\", $searchString);\n</code></pre>\n\n<p>Thanks in advance for any responses.</p>\n\n<p>Edit:</p>\n\n<p>The possible substitutions will be defined by an user and the regex must be set to fit. A user could say that a common substitution is to change the letter \"a\" to \"@\" or even \"1\". The possible change is completely arbitrary.\nWhen searching for a specific word (\"russian\" for example) this could be done with something like:</p>\n\n<pre><code>(m/russian/i); # would just match the word as it is\n(m/russi[a@1]n/i); # would match the munged word\n</code></pre>\n\n<p>But I'm not sure how to do that if I have the string to match stored in a variable, such as:</p>\n\n<pre><code>$stringToSearch = \"russian\";\n</code></pre>\n"}, {"tags": ["perl", "hash"], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539046100, "post_id": 52710990, "comment_id": 92349727, "body": "@StarGeek  I got the question backwards, updated (and fixed an error)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1539046065, "last_edit_date": 1539046065, "creation_date": 1539038394, "answer_id": 52710990, "question_id": 52710832, "link": "https://stackoverflow.com/questions/52710832/perl-split-string-into-keyvalue-pairs-for-hash-with-lowercase-keys-without-tem/52710990#52710990", "title": "Perl, Split string into Key:Value pairs for hash with lowercase keys without temporary array", "body": "<p>Since the key-value pair has to be around the <code>|</code> you can use a regex</p>\n\n<pre><code>my $v = \"KEY1|Value1|kEy2|Value2|KeY3|Value3\";\n\nmy %h = split /\\|/, $v =~ s/([^|]+) \\| ([^|]+)/lc($1).q(|).$2/xger;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3221, "user_id": 3525475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a3e5e7036697bc76954b0d02d71c15?s=128&d=identicon&r=PG&f=1", "display_name": "StarGeek", "link": "https://stackoverflow.com/users/3525475/stargeek"}, "edited": false, "score": 0, "creation_date": 1539039601, "post_id": 52711052, "comment_id": 92348374, "body": "My apologies, I forgot to mention that I can&#39;t use an external module for this.  Edited question to reflect this.  And thank you for the note about $a and $b.  While I only used them in this case as an example, it&#39;s a good thing for me to remember."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 3221, "user_id": 3525475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a3e5e7036697bc76954b0d02d71c15?s=128&d=identicon&r=PG&f=1", "display_name": "StarGeek", "link": "https://stackoverflow.com/users/3525475/stargeek"}, "edited": false, "score": 0, "creation_date": 1539039750, "post_id": 52711052, "comment_id": 92348421, "body": "@StarGeek List::Util is not an external module, it&#39;s core."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 3221, "user_id": 3525475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a3e5e7036697bc76954b0d02d71c15?s=128&d=identicon&r=PG&f=1", "display_name": "StarGeek", "link": "https://stackoverflow.com/users/3525475/stargeek"}, "edited": false, "score": 1, "creation_date": 1539040224, "post_id": 52711052, "comment_id": 92348522, "body": "@StarGeek If your List::Util is too old for pairmap (pre-5.20 Perl and you can&#39;t upgrade modules) then you will pretty much need an ugly one-liner or a pretty two-liner, as covered in the other answers."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539040719, "post_id": 52711052, "comment_id": 92348634, "body": "This solution isn&#39;t the most efficient, but it&#39;s definitely the clearest. And despite what the OP thinks, efficiency is NOT key here."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 5, "last_activity_date": 1539039365, "last_edit_date": 1539039365, "creation_date": 1539038916, "answer_id": 52711052, "question_id": 52710832, "link": "https://stackoverflow.com/questions/52710832/perl-split-string-into-keyvalue-pairs-for-hash-with-lowercase-keys-without-tem/52711052#52711052", "title": "Perl, Split string into Key:Value pairs for hash with lowercase keys without temporary array", "body": "<p>You can use <a href=\"https://perldoc.pl/List::Util#pairmap\" rel=\"nofollow noreferrer\">pairmap</a> from List::Util to do this without an intermediate array at all.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse List::Util 1.29 'pairmap';\nmy $str=\"KEY1|Value1|kEy2|Value2|KeY3|Value3\";\nmy %hash = pairmap { lc($a) =&gt; $b } split /\\|/, $str;\n</code></pre>\n\n<p>Note: you should never use <a href=\"https://perldoc.pl/variables/$a\" rel=\"nofollow noreferrer\">$a or $b</a> outside of sort (or List::Util pair function) blocks. They are special global variables for sort, and just declaring <code>my $a</code> in a scope can break all sorts (and List::Util pair functions) in that scope. An easy solution is to immediately replace them with <code>$x</code> and <code>$y</code> whenever you find yourself starting to use them as example variables.</p>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 1, "last_activity_date": 1539039061, "creation_date": 1539039061, "answer_id": 52711063, "question_id": 52710832, "link": "https://stackoverflow.com/questions/52710832/perl-split-string-into-keyvalue-pairs-for-hash-with-lowercase-keys-without-tem/52711063#52711063", "title": "Perl, Split string into Key:Value pairs for hash with lowercase keys without temporary array", "body": "<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $i;\nmy %hash = map { $i++ % 2 ? $_ : lc } split(/\\|/, 'KEY1|Value1|kEy2|Value2|KeY3|Value3');\n\nprint Dumper(\\%hash);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$VAR1 = {\n          'key1' =&gt; 'Value1',\n          'key2' =&gt; 'Value2',\n          'key3' =&gt; 'Value3'\n        };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1539039884, "last_edit_date": 1539039884, "creation_date": 1539039472, "answer_id": 52711111, "question_id": 52710832, "link": "https://stackoverflow.com/questions/52710832/perl-split-string-into-keyvalue-pairs-for-hash-with-lowercase-keys-without-tem/52711111#52711111", "title": "Perl, Split string into Key:Value pairs for hash with lowercase keys without temporary array", "body": "<p>For fun, here are two additional approaches.</p>\n\n<p>A cheaper one than the original (since the elements are aliased rather than copied into <code>@_</code>):</p>\n\n<pre><code>my %hash = sub { map { $_ % 2 ? $_[$_] : lc($_[$_]) } 0..$#_ }-&gt;( ... );\n</code></pre>\n\n<p>A more expensive one than the original:</p>\n\n<pre><code>my %hash = ...;\n@hash{ map lc, keys(%hash) } = delete( @hash{ keys(%hash) } );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5900, "user_id": 931154, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/bTrZd.jpg?s=128&g=1", "display_name": "Gregory Nisbet", "link": "https://stackoverflow.com/users/931154/gregory-nisbet"}, "is_accepted": false, "score": 0, "last_activity_date": 1539040338, "creation_date": 1539040338, "answer_id": 52711223, "question_id": 52710832, "link": "https://stackoverflow.com/questions/52710832/perl-split-string-into-keyvalue-pairs-for-hash-with-lowercase-keys-without-tem/52711223#52711223", "title": "Perl, Split string into Key:Value pairs for hash with lowercase keys without temporary array", "body": "<p>Here's a solution that avoids mutating the input string, constructing a new string of the same length as the input string, or creating an intermediate array in memory.</p>\n\n<p>The solution here changes the <code>split</code> into looping over a match statement.</p>\n\n<pre><code>#! /usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse Data::Dumper;\n\nmy $a=\"KEY1|Value1|kEy2|Value2|KeY3|Value3\";\n\nsub normalize_alist_opt {\n  my ($input) = @_;\n\n  my %c;\n  my $last_key;\n  while ($input =~ m/([^|]*(\\||\\z)?)/g) {\n    my $s = $1;\n    next unless $s ne '';\n    $s =~ s/\\|\\z//g;\n    if (defined $last_key) {\n      $c{ lc($last_key) } = $s;\n      $last_key = undef;\n    } else {\n      $last_key = $s;\n    }\n  }\n\n  return \\%c;\n}\n\nprint Dumper(normalize_alist_opt($a));\n</code></pre>\n\n<p>A potential solution that operates over the <code>split</code> directly. Perl <em>might</em> recognize and optimize the special case. Although based on discussions <a href=\"https://www.perlmonks.org/?node_id=1194593\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.perlmonks.org/?node_id=594208\" rel=\"nofollow noreferrer\">here</a>, I'm not sure.</p>\n\n<pre><code>sub normalize_alist {\n  my ($input) = @_;\n\n  my %c;\n  my $last_key;\n  foreach my $s (split /\\|/, $input) {\n    if (defined $last_key) {\n      $c{ lc($last_key) } = $s;\n      $last_key = undef;\n    } else {\n      $last_key = $s;\n    }\n  }\n\n  return \\%c;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": false, "score": 1, "last_activity_date": 1539044476, "creation_date": 1539044476, "answer_id": 52711713, "question_id": 52710832, "link": "https://stackoverflow.com/questions/52710832/perl-split-string-into-keyvalue-pairs-for-hash-with-lowercase-keys-without-tem/52711713#52711713", "title": "Perl, Split string into Key:Value pairs for hash with lowercase keys without temporary array", "body": "<p>More possible solutions using regexes to do all the work, but not very pretty unless you really like regex:</p>\n\n<pre><code>use strict;\nuse warnings;\nmy $str=\"KEY1|Value1|kEy2|Value2|KeY3|Value3\";\nmy %hash;\nmy $copy = $str;\n$hash{lc $1} = $2 while $copy =~ s/^([^|]*)\\|([^|]*)\\|?//;\n\nuse strict;\nuse warnings;\nmy $str=\"KEY1|Value1|kEy2|Value2|KeY3|Value3\";\nmy %hash;\n$hash{lc $1} = $2 while $str =~ m/\\G([^|]*)\\|([^|]*)\\|?/g;\n\nuse strict;\nuse warnings;\nmy $str=\"KEY1|Value1|kEy2|Value2|KeY3|Value3\";\nmy %hash = map { my ($k, $v) = split /\\|/, $_, 2; (lc($k) =&gt; $v) }\n  $str =~ m/([^|]*\\|[^|]*)\\|?/g;\n</code></pre>\n"}], "owner": {"reputation": 3221, "user_id": 3525475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53a3e5e7036697bc76954b0d02d71c15?s=128&d=identicon&r=PG&f=1", "display_name": "StarGeek", "link": "https://stackoverflow.com/users/3525475/stargeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 0, "accepted_answer_id": 52711052, "answer_count": 6, "score": 2, "last_activity_date": 1539046065, "creation_date": 1539037194, "last_edit_date": 1539039481, "question_id": 52710832, "link": "https://stackoverflow.com/questions/52710832/perl-split-string-into-keyvalue-pairs-for-hash-with-lowercase-keys-without-tem", "title": "Perl, Split string into Key:Value pairs for hash with lowercase keys without temporary array", "body": "<p>Given a string of Key:Value pairs, I want to create a lookup hash but with lowercase values for the keys.  I can do so with this code</p>\n\n<pre><code>my $a=\"KEY1|Value1|kEy2|Value2|KeY3|Value3\";\nmy @a = split '\\|', $a;\nmy %b = map { $a[$_] = (  !($_ % 2) ? lc($a[$_]) : $a[$_])  } 0 .. $#a ;\n</code></pre>\n\n<p>The resulting Hash would look like this Dumper output:  </p>\n\n<pre><code>$VAR1 = {\n          'key3' =&gt; 'Value3',\n          'key2' =&gt; 'Value2',\n          'key1' =&gt; 'Value1'\n        };\n</code></pre>\n\n<p>Would it be possible to directly create hash %b without using temporary array @a or is there a more efficient way to achieve the same result?</p>\n\n<p><em>Edit:</em>  I forgot to mention that I cannot use external modules for this.  It needs to be basic Perl.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 1, "creation_date": 1539024215, "post_id": 52708109, "comment_id": 92342873, "body": "See also <a href=\"https://stackoverflow.com/q/41980796/2173773\">Can&#39;t use &#39;defined(@array)&#39; warning in converting .obj to .h</a> and <a href=\"https://stackoverflow.com/q/48809624/2173773\">Replacing deprecated \u201cdefined(@array)\u201d in a ternary operation</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 8, "last_activity_date": 1539023367, "creation_date": 1539023367, "answer_id": 52708146, "question_id": 52708109, "link": "https://stackoverflow.com/questions/52708109/perl-error-cant-use-definedarray-how-can-i-fix-this/52708146#52708146", "title": "Perl error, cant use defined(@array). How can i fix this?", "body": "<p><a href=\"https://perldoc.pl/functions/defined\" rel=\"noreferrer\">defined</a> tests whether a scalar value is undef, therefore it's nonsensical on an array. You can test whether the scalar is defined before using it as an arrayref, or if you're trying to test if the array is empty, just removed the defined() as the error message says.</p>\n\n<pre><code># if this hash value is defined\nif (defined $linkbot{$nroboton}) {\n\n# if this referenced array has elements\nif (@{ $linkbot{$nroboton} }) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1539030834, "last_edit_date": 1539030834, "creation_date": 1539023530, "answer_id": 52708187, "question_id": 52708109, "link": "https://stackoverflow.com/questions/52708109/perl-error-cant-use-definedarray-how-can-i-fix-this/52708187#52708187", "title": "Perl error, cant use defined(@array). How can i fix this?", "body": "<p>Use <code>define</code> on the variable <code>$nroboton</code> itself, and/or <code>if (@{$linkbot{$nroboton}})</code> for the anonymous array whose reference is the value for that key, as explained.</p>\n\n<p>Once you need to check on any of that it stands to reason that you may well also need to test whether there is a key <code>$nroboton</code> in the hash <code>%linkbot</code>, with <a href=\"http://perldoc.perl.org/functions/exists.html\" rel=\"nofollow noreferrer\">exists</a></p>\n\n<pre><code>if ( exists $linkbot{$nroboton} ) { ... }   # warning if $nroboton undef\n</code></pre>\n\n<p>so altogether</p>\n\n<pre><code>if (defined $nroboton and exists $linkbot{$nroboton}) { ... }\n</code></pre>\n\n<p>and now you can check and work with the data in the arrayref, <code>@{$linkbot{$nroboton}}</code>.</p>\n\n<p>Note that there is no need to double-quote that variable; it will be evaluated.</p>\n"}], "owner": {"reputation": 61, "user_id": 8414108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lSj3V4vOlsI/AAAAAAAAAAI/AAAAAAAAAO0/xTBiqn3mwWU/photo.jpg?sz=128", "display_name": "popeonhabbo123", "link": "https://stackoverflow.com/users/8414108/popeonhabbo123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1889, "favorite_count": 0, "accepted_answer_id": 52708146, "answer_count": 2, "score": 2, "last_activity_date": 1539030834, "creation_date": 1539023201, "question_id": 52708109, "link": "https://stackoverflow.com/questions/52708109/perl-error-cant-use-definedarray-how-can-i-fix-this", "title": "Perl error, cant use defined(@array). How can i fix this?", "body": "<p>I am getting this error -> \"Can't use 'defined(@array)' (Maybe you should just omit the defined()?)\" </p>\n\n<p>On this line of code:</p>\n\n<pre><code>if ( defined( @{ $linkbot{\"$nroboton\"} } ) ) {\n</code></pre>\n\n<p>How can i fix this?</p>\n"}, {"tags": ["perl", "md5sum"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539022868, "post_id": 52707982, "comment_id": 92342299, "body": "Base64 and Base54 are different, which did you mean? It doesn&#39;t really matter though, two different strings will have two different md5sums and there&#39;s nothing you can do about that."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1539023711, "post_id": 52707982, "comment_id": 92342669, "body": "Figure out a way to normalize the data to a consistent form before hashing it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1539030870, "post_id": 52707982, "comment_id": 92345602, "body": "For example, instruct the console to hide the cursor. It&#39;s not like you need it in an automated test suite. But you could also just overwrite the pixels of the image file where the cursor is expected to be"}], "answers": [{"tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1539031180, "creation_date": 1539031180, "answer_id": 52709783, "question_id": 52707982, "link": "https://stackoverflow.com/questions/52707982/generating-md5-for-a-blinking-cursor-with-perl/52709783#52709783", "title": "Generating md5 for a blinking cursor with perl", "body": "<blockquote>\n  <p>The problem is the $base64_encoded_string is for a image of a machine console with blinking cursor , so the $md5_add_hex has two values. one when cursor is present in the image and other when its missing.</p>\n</blockquote>\n\n<p>I'm not really sure that I understand what you mean but the only explanation I have so far is that the image you are talking about is some animated GIF or PNG with a blinking cursor. Your assumption is then that there will be two different MD5 depending on when you run your program - because it sometimes with the cursor and sometimes without.</p>\n\n<p>Only, it does not work this way. An animated GIF or PNG is just data consisting of a series of images together with instructions on how fast to switch between the images. It does not have any inherent state which would change over time. And, MD5 has no idea of images at all. It only takes the data, no matter if these data might be interpreted as a series of images, as a video, as some text document or whatever. </p>\n"}], "owner": {"reputation": 65, "user_id": 5508051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1215450155138332/picture?type=large", "display_name": "Sudhir Mishra", "link": "https://stackoverflow.com/users/5508051/sudhir-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539031180, "creation_date": 1539022615, "last_edit_date": 1539022968, "question_id": 52707982, "link": "https://stackoverflow.com/questions/52707982/generating-md5-for-a-blinking-cursor-with-perl", "title": "Generating md5 for a blinking cursor with perl", "body": "<p>I am trying the get the md5sum of a Base64 string using perl.Below is the sample code. </p>\n\n<pre><code>#!/usr/bin/perl \n\nuse strict; \nuse warnings; \nuse Digest::MD5;\nmy $md5 =  Digest::MD5-&gt;new();\nmy $base64_encoded_string = \"base64_encoded_string\";\nmy $md5_add =  $md5-&gt;add($base64_encoded_string);\nmy $md5_add_hex = $md5-&gt;hexdigest;\n</code></pre>\n\n<p>The problem is the $base64_encoded_string is for a image of a machine console with blinking cursor , so the $md5_add_hex has two values. one when  cursor is present in the image and other when its missing.</p>\n\n<p>Need advice how can i get the unique md5 value , without cursor in the final $md5_add_hex.</p>\n"}, {"tags": ["java", "file", "perl", "cgi", "require"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539018531, "post_id": 52706984, "comment_id": 92340369, "body": "Perl programs are interpreted, and <code>require</code> loads and interprets another source file at <i>run-time</i>, while Java programs are compiled, and later run in a separate process, which makes loading additional code at run-time not the typical way of doing things. You probably don&#39;t want to convert Perl to Java. You want to rewrite an old CGI script as a modern Java application, because the CGI technology is what&#39;s outdated, not the Perl (or the Java). If you don&#39;t understand what any of this means, you are probably way out of your depths and require background knowledge that we cannot teach you here."}, {"owner": {"reputation": 185, "user_id": 10411651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d234526fd125b27fcf07a5eb1d93db8?s=128&d=identicon&r=PG&f=1", "display_name": "Anudeep", "link": "https://stackoverflow.com/users/10411651/anudeep"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539018673, "post_id": 52706984, "comment_id": 92340421, "body": "I understand that it would be better to write whole application as modern Java application. But all my employers want is just to convert only that Perl script to Java program. Is there any good tutorial or some documentaion to follow?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539018882, "post_id": 52706984, "comment_id": 92340512, "body": "I don&#39;t know. I am a Perl developer, and know very little about Java. Requesting off-site tutorials is off-topic on Stack Overflow though, so I doubt someone will give you any practical help. Good luck. :)"}, {"owner": {"reputation": 185, "user_id": 10411651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d234526fd125b27fcf07a5eb1d93db8?s=128&d=identicon&r=PG&f=1", "display_name": "Anudeep", "link": "https://stackoverflow.com/users/10411651/anudeep"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539019018, "post_id": 52706984, "comment_id": 92340578, "body": "Please. Before downvoting any question, give a proper reason. No one will be asking questions here on Stackoverflow if they can be found just with google search. Why would anyone waste their time typing lengthy self explanatory questions when they can find answers by googling? If someone posts a question here, it means that they already tried something but couldn&#39;t find what they want and came here with hope of finding the answer. What is the meaning of this simply downvoting the questions without providing any proper reason?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539019249, "post_id": 52706984, "comment_id": 92340682, "body": "There is a close-vote as <i>too broad</i> on your question that you can probably not see. Your question will get closed when five high reputation users vote to close (or an elected moderator). The person who cast that close vote probably also downvoted."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539019393, "post_id": 52706984, "comment_id": 92340758, "body": "On a different note, why do you want the equivalent of <code>require</code> at all? Even as a simple, stand alone program that does CGI (however that works in Java), you&#39;d still want to use classes. You probably know how to load those. You need to translate/convert everything anyway. Keeping the same program architecture makes very little sense, since Java pretty much requires you to be object oriented, while (I guess) your Perl program is more of an old spaghetti mess, as those old CGI programs often are. So you can probably circumvent the need for a translation of <code>require</code> altogether."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1539024562, "post_id": 52706984, "comment_id": 92343010, "body": "In Java, if you want to use classes from different packages, you <code>import</code> them. It doesn&#39;t do the same thing as Perl&#39;s <code>require</code>, though, because that&#39;s not how Java works."}], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 0, "last_activity_date": 1539019852, "creation_date": 1539019852, "answer_id": 52707374, "question_id": 52706984, "link": "https://stackoverflow.com/questions/52706984/what-is-the-java-equivalent-for-perls-require-command/52707374#52707374", "title": "What is the java equivalent for Perl&#39;s require command?", "body": "<p>The paradigms do not map at all. In Perl, <a href=\"https://perldoc.pl/functions/require\" rel=\"nofollow noreferrer\">require</a> simply reads a file and runs the code in it, and everything else happens as side effects of that. In Java, your code must be compiled, and classes are included automatically when you compile your program. See <a href=\"https://stackoverflow.com/questions/880662/extend-a-java-class-from-one-file-in-another-java-file/1440851\">Extend a java class from one file in another java file</a> for more answers on this topic.</p>\n"}], "owner": {"reputation": 185, "user_id": 10411651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d234526fd125b27fcf07a5eb1d93db8?s=128&d=identicon&r=PG&f=1", "display_name": "Anudeep", "link": "https://stackoverflow.com/users/10411651/anudeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1539055711, "accepted_answer_id": 52707374, "answer_count": 1, "score": -2, "last_activity_date": 1539019852, "creation_date": 1539018093, "question_id": 52706984, "link": "https://stackoverflow.com/questions/52706984/what-is-the-java-equivalent-for-perls-require-command", "closed_reason": "Needs more focus", "title": "What is the java equivalent for Perl&#39;s require command?", "body": "<p>I am completely new to cgi concepts.</p>\n\n<p>I'm given a task to convert a Perl cgi script to Java program.</p>\n\n<p>I understood that the <code>require 'file.ext'</code> command in Perl includes the file available for code in the Perl script.</p>\n\n<p>Because of the very limited resources and improper documentation I couldn't find any proper info.</p>\n\n<p>Is there any Java equivalent to do the same action that <code>require</code> in Perl does?</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1539010444, "post_id": 52704746, "comment_id": 92336363, "body": "It would make more sense to use two different databases and simply have different credentials based on which <i>mode</i> you are running in. These modes are often called <i>environment</i>, and you would just provide different config files for them. In addition to that, have you considered using DBIx::Class instead of building your own queries from text?"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539010577, "post_id": 52704746, "comment_id": 92336457, "body": "Using another database is not a solution to his project unfortunately. Basically I am looking for a one liner to read a key value from my_app.conf (without using a sub)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539010611, "post_id": 52704746, "comment_id": 92336474, "body": "I&#39;m going to sound like a broken record, but here goes: why?"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539012512, "post_id": 52704746, "comment_id": 92337523, "body": "The project has access to only one database. Another database can&#39;t be requested for this project..."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1539013514, "post_id": 52704746, "comment_id": 92338086, "body": "That&#39;s not what I meant. Why do you want a one-liner?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1539017625, "post_id": 52704746, "comment_id": 92339958, "body": "Your Main_Queries module will have no access to your application or config unless you pass one of those in. Setting them in globals in the module is a bad idea, it means you can never use two versions of it in the same application. You might consider making it an object class instead and instantiating it (creating an object with -&gt;new) with the config it needs. What are you trying to accomplish?"}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1539019360, "post_id": 52704746, "comment_id": 92340736, "body": "I am trying to get into $config the values of the key from my_app.conf and by using this i can set up development tables and production tables. I am pretty sure I saw somewhere a one liner for this in Mojo, something like app-&gt;config-&gt;{&#39;key_name&#39;} or something like but I can&#39;t find it anymore"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539019894, "post_id": 52704746, "comment_id": 92340995, "body": "I think it would make more sense to something like a render layer towards the DB that you pass your queries through. Use placeholders in your queries, like <code>SELECT * FROM {{blabla}} WHERE foo=?</code>. Then pass that through a helper, like <code>$c-&gt;dbh-&gt;prepare($c-&gt;sql_renderer($sql_with_table_placeholde&zwnj;&#8203;rs))</code>. With  this <code>sql_renderer</code> method, you wrap an object that keeps configuration (or the whole thing is built at startup as a code ref) and knows about your mode, and then replaces the placeholders with the actual names with or without any suffixes."}, {"owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "edited": false, "score": 0, "creation_date": 1539020755, "post_id": 52704746, "comment_id": 92341347, "body": "So what im trying to do is not possible?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539074289, "post_id": 52704746, "comment_id": 92358801, "body": "It certainly isn&#39;t the way we&#39;d do it. If two professional developers independently suggest that it is not a good idea that might be cause to reconsider. ;)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1539074379, "post_id": 52704746, "comment_id": 92358865, "body": "On a different note, I see you&#39;re from the UK. If you happen to be from London, there&#39;s the <a href=\"https://www.meetup.com/London-Perl-Mongers/events/253969340/\" rel=\"nofollow noreferrer\">London Perl Mongers tech meetup this Thursday</a> in Central London. It&#39;s a free evening mini conference with food and drinks. If you&#39;re in town, come and say hi!"}], "owner": {"reputation": 145, "user_id": 6150003, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/3153eed198c13a08fc7ba7ca1f57e5e1?s=128&d=identicon&r=PG&f=1", "display_name": "rooger", "link": "https://stackoverflow.com/users/6150003/rooger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539009812, "creation_date": 1539009812, "question_id": 52704746, "link": "https://stackoverflow.com/questions/52704746/how-to-load-app-conf-into-module-without-subroutine", "title": "How to load app conf into Module without subroutine", "body": "<p>Im currently having an Mojolicious app with this structure inside lib folder:  </p>\n\n<pre><code> /my_app.conf  - contains secrets, perldoc = 1 and app_mode  = (0 or 1)   \n /lib/MyApp.pm (config is loaded here my $config = $self-&gt;plugin('Config');)\n /lib/MyApp/Controller/Home.pm   \n /lib/MyApp/Queries/Main_Queries.pm\n</code></pre>\n\n<p>In /lib/MyApp/Queries/Main_Queries.pm I have queries like   </p>\n\n<pre><code>our $query1 = \"Select * FROM $TBL_ONE\";    \n</code></pre>\n\n<p>How can i get app_mode from my_app.conf to /lib/MyApp/Queries/Main_Queries.pm <strong>without</strong> using:   </p>\n\n<pre><code> sub get_config {\n     my $self = shift;\n     my $config = $self-&gt;app-&gt;config-&gt;{app_mode}\n     return $config;\n }\n</code></pre>\n\n<p>I am trying something like:   </p>\n\n<pre><code>#/lib/MyApp/Queries/Main_Queries.pm   \npackage MyApp.. etc\nuse MOJO::Base\nuse strict;\nuse warnings;\n\nuse Exporter; \netc \n\nmy $config = app-&gt;config-&gt;{app_mode}; #no success\nmy $TBL_ONE;\n# what i want to do next\nif ($config == 0) {\n    $TBL_ONE = 'blabla';\n} else {\n    $TBL_ONE = 'blabla_test';\n}\n\nour $query1 = \"Select * FROM $TBL_ONE\";    \n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 2, "creation_date": 1539008662, "post_id": 52704375, "comment_id": 92335304, "body": "Shirinsh, could you give us a runnable example that shows the problem?   As a reminder, don&#39;t forget the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help/how-to-ask\">how-to-ask page</a> for more about asking questions that will attract quality answers.  You can <a href=\"https://stackoverflow.com/posts/52704375/edit\">edit your question</a> to include more information."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 1, "creation_date": 1539009475, "post_id": 52704375, "comment_id": 92335815, "body": "also you should be consistent in the way you write your blocks. I mean you can place the <code>{</code> on the same line as <code>for</code> <code>if</code> <code>else</code> <code>foreach</code> or on the next line, but please use always the same way to do so. it will make easier to read your code"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539017778, "post_id": 52704375, "comment_id": 92340037, "body": "Are you using autodie or IPC::System::Simple? <a href=\"https://perldoc.pl/functions/system\" rel=\"nofollow noreferrer\">system</a> does not die on error by default."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539020353, "post_id": 52704375, "comment_id": 92341167, "body": "Yes, you can nicely nest BLOCK form <code>eval</code>s.  This is in general a way to control exceptions at cascading levels.  (How exactly to organize that is a bigger question of your overall design.)  But it&#39;d be good to see what may happen in that <code>$condition2</code> and how it &quot;<i>fails</i>.&quot;"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539054887, "post_id": 52704375, "comment_id": 92351365, "body": "Also note that testing <code>$@</code> is not a preferred way of checking for exceptions because there are several ways <code>$@</code> can become false before you check it, especially before Perl 5.14. See <a href=\"https://metacpan.org/pod/Try::Tiny#BACKGROUND\" rel=\"nofollow noreferrer\">metacpan.org/pod/Try::Tiny#BACKGROUND</a> for more details and <a href=\"http://mvp.kablamo.org/cpan/exceptions/\" rel=\"nofollow noreferrer\">mvp.kablamo.org/cpan/exceptions</a> for a good writeup of the options."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539066016, "post_id": 52704375, "comment_id": 92354493, "body": "@Grinnz I have to disagree with that. For one, it&#39;s been fixed (and 5.14 was a long time ago). Then, why not provide a link that talks about the problems that <code>Try::Tiny</code> has, as well? One reason would be a cleaner syntax, but then we do have that reverse sense there; most other modules have at least something to worry about. It&#39;s not such a clean cut. The link you provide is much more reserved and balanced about the choice, btw."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539070555, "post_id": 52704375, "comment_id": 92356673, "body": "@zdim Some of it was fixed, but there are still two or three ways that <code>if ($@)</code> can fail to accurately detect that an exception was thrown, and the remaining cases aren&#39;t bugs. I linked Try::Tiny&#39;s docs only because they have a thorough explanation of the pitfalls of eval; I recommend Syntax::Keyword::Try now overall, for the reasons explained in that tutorial."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539070720, "post_id": 52704375, "comment_id": 92356755, "body": "Using eval is still perfectly fine, but only if you understand why you need to use it like: <code>unless (eval { ... code ...; 1 }) { my $error = $@; ... handle exception ... }</code>, with an additional step of localizing <code>$@</code> in module code. This is a lot to explain to a beginner for them not to fall into that trap; Syntax::Keyword::Try is much simpler."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539070737, "post_id": 52704375, "comment_id": 92356764, "body": "@Grinnz Well, sure that there may be issues with <code>$@</code> (only if you stray off of the reservation, btw) -- but so is the case with others (except that it&#39;s hidden in pretty syntax). I&#39;d love to be able to simply recommend a module and for <code>$@</code> say &quot;don&#39;t use that archaic stuff.&quot;  But I honestly can&#39;t.  And there is nothing terribly wrong with it: use it in <i>this way</i> and you&#39;re fine.  Using exceptions correctly is far, far harder than following a particular prescription/syntax.  Note, if you know what you are doing then there are no problems."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539070964, "post_id": 52704375, "comment_id": 92356892, "body": "@Grinnz I only disagreed with &quot;<i>not preferred</i>.&quot; I think that there cannot be a consensus on that, given the state of the matter. We should also keep in mind that Perl&#39;s &quot;exception&quot; (one!) is, um, sketchy at best (is that a good way to call it?); perhaps basic and raw handling suits it just fine."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539071340, "post_id": 52704375, "comment_id": 92357105, "body": "Please read <a href=\"https://metacpan.org/pod/Syntax::Keyword::Try#OTHER-MODULES\" rel=\"nofollow noreferrer\">metacpan.org/pod/Syntax::Keyword::Try#OTHER-MODULES</a> ; you keep saying the others have issues, but the only issue I&#39;m aware of with that module is that it requires a relatively recent perl and a compiler."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539071437, "post_id": 52704375, "comment_id": 92357178, "body": "@Grinnz The <code>Syntax::Keyword::Try</code> adds keywords to the language. That&#39;s cool ... to the point of giving me a chill.  brrr.  Seriously, it&#39;s interesting and I liked it but it is a biggy step to take.  It&#39;s also at a ripe old age of 0.09.  Recall that there is <i>nothing</i> about <code>$@</code> that we don&#39;t know.  Again, I like what I see about that module but I&#39;d say that it&#39;s  too soon to throw all else in trash."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539071905, "post_id": 52704375, "comment_id": 92357445, "body": "@zdim Keywords were pretty messy when they were using hacks like Devel::Declare but since 5.14-ish we have the keyword API which is supported by core and also used by popular extensions like Function::Parameters. Anyway I apologize for my wording, I am just trying to steer people away from footguns that have caused many problems over the years."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539072487, "post_id": 52704375, "comment_id": 92357743, "body": "@Grinnz Well, that&#39;s fine but I disagree with &quot;steering people away&quot; so I offered my opinion.  I&#39;m not up for &quot;steering people away&quot; from a fully understood and simple prescription to, at best, a new module that hasn&#39;t been tested (in the wild) well enough yet."}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539017865, "post_id": 52704851, "comment_id": 92340076, "body": "I think we should wait for more information before suggesting to remove error checking."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539024501, "post_id": 52704851, "comment_id": 92342986, "body": "@grinnz OP asks that the script does not stop when an error occurs. So yeah, that&#39;s not safe but I think this is the only way to fulfill the requirements"}], "tags": [], "owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "is_accepted": false, "score": 0, "last_activity_date": 1539010180, "creation_date": 1539010180, "answer_id": 52704851, "question_id": 52704375, "link": "https://stackoverflow.com/questions/52704375/perl-eval-block-nested-eval/52704851#52704851", "title": "Perl eval block (nested eval ?)", "body": "<pre><code>die $@ if $@;\n</code></pre>\n\n<p>tells your program to abort if something went wrong in the <code>eval</code> block.\nif you remove this line, it should be fine.</p>\n\n<p>after removing it you can replace your last line by something like:</p>\n\n<pre><code>return $@ ? 'something went wrong' : $status;\n</code></pre>\n\n<p>if you still want to detect if something went wrong without stopping everything, but this is not mandatory</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1540196880, "last_edit_date": 1540196880, "creation_date": 1539033335, "answer_id": 52710212, "question_id": 52704375, "link": "https://stackoverflow.com/questions/52704375/perl-eval-block-nested-eval/52710212#52710212", "title": "Perl eval block (nested eval ?)", "body": "<p>The BLOCK form of <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a> is the builtin mechanism for handling of \"exceptions\" in Perl, which is the <a href=\"https://perldoc.perl.org/functions/die.html\" rel=\"nofollow noreferrer\">die</a>.</p>\n\n<p>As such it is natural to \"nest\" it, in the sense that each level has its own</p>\n\n<pre><code>eval { func(...) }; if ($@) { ... }\n\nsub func {\n    ...\n    eval { func_lower(...) };\n    if ($@) {\n        # handle it: recover or re-throw for the higher-level handlers\n    }\n    ...\n}\n\nsub func_lower {\n    ...\n    eval { func_lower_yet(...) };\n    if ($@) {\n        # handle it: recover or re-throw for the higher-level handlers\n    }\n    ...\n}\n</code></pre>\n\n<p>So at each level one can decide whether the exceptional behavior can be resolved, and if not then re-throw (issue a <code>die</code> again) as the higher level may be better informed to deal with it. </p>\n\n<p>The exceptions in Perl also \"bubble up,\" so if an exception is uncaught at one level  it is propagated up the call stack and the next level up can still deal with it (the program isn't terminated until the main is hit with an exception that it doesn't handle).</p>\n\n<p>Such a typical structure of nested calls is a little crammed in your if-elsif sequence but it still fits </p>\n\n<pre><code>eval {\n    if    ($condition1) { ... }\n    elsif ($condition2) { \n        eval {\n            ...\n        };\n        if ($@) {\n            # issue a warning, perhaps set some flag, and continue \n            # or throw a die for the higher-level eval \n        }\n    }\n    elsif ...\n};\nif ($@) {\n    # interrogate details\n}\n</code></pre>\n\n<p>Now you can isolate errors from <code>$condition2</code> so that they don't have to trigger the outer <code>eval</code>.</p>\n\n<p>Note that you can \"throw\" objects in <code>die</code>, for example of a simple class you write to pull together your needs, which allows far more flexibility for the handlers.  Also note that there are modules on CPAN for all of this.</p>\n"}], "owner": {"reputation": 11, "user_id": 7540756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21485b71ad537ccad150ce39b02972e0?s=128&d=identicon&r=PG&f=1", "display_name": "Shirinsh", "link": "https://stackoverflow.com/users/7540756/shirinsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1540196880, "creation_date": 1539008544, "question_id": 52704375, "link": "https://stackoverflow.com/questions/52704375/perl-eval-block-nested-eval", "title": "Perl eval block (nested eval ?)", "body": "<p>I am executing some command within if elsif else based on some condition and store the return code\nas $status. </p>\n\n<pre><code>eval {\n    if ($condition1)\n    {\n      $status = system ...\n    }\n    elsif ($condition2)\n    {\n      foreach my $scenario (@setting) {\n         next unless $scenario;\n         $status = system &lt;somecommand&gt; \n         }\n    }\n    elsif ($condition3)\n    {\n      $status = system ...\n    }\n    else\n    {\n      $status = system ...\n    }\n};\ndie $@ if $@;\nreturn ($status !=0);\n</code></pre>\n\n<p>I need to handle the below code , as this fails sometimes for some cases so \nI don't want program to abort completely in middle and keep on running. \nHow I can handle this ?</p>\n\n<pre><code>elsif ($condition2)\n{\n  foreach my $scenario (@setting) {\n     next unless $scenario;\n     $status = system &lt;somecommand&gt; \n     }\n}\n</code></pre>\n"}, {"tags": ["perl", "pagination", "catalyst", "paginate", "paginator"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1538988226, "post_id": 52696685, "comment_id": 92323412, "body": "So you want an URL <code>example.org&#47;list?page=1</code>, right? There&#39;s no <code>book</code> in there, and we are talking about an URL parameter, not a path parameter like <code>example.org&#47;list&#47;1</code>. Is your question more about how to get the parameter into Catalyst, or about making DBIC do the pagination for you? It looks like you&#39;ve done neither yet."}, {"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538992069, "post_id": 52696685, "comment_id": 92325507, "body": "The DBIC pagination is what I want to implement here."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1538999052, "post_id": 52700442, "comment_id": 92329434, "body": "It complains, telling me that it can not create pager for a non-paged rs."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1539000059, "post_id": 52700442, "comment_id": 92330052, "body": "@K&#233;rdez&#246;sk&#246;d\u0151Indi&#225;n it should be paged once it has the <code>page</code> attribute in it. Strange. I couldn&#39;t actually run this code, so this is just from the docs. You might need to play around with it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 0, "last_activity_date": 1538995012, "creation_date": 1538995012, "answer_id": 52700442, "question_id": 52696685, "link": "https://stackoverflow.com/questions/52696685/how-to-paginate-long-lists/52700442#52700442", "title": "How to paginate long lists", "body": "<p>There are two things you need to do to get this to work. Overall, it's quite straight-forward. It's described in the <a href=\"https://metacpan.org/pod/distribution/DBIx-Class/lib/DBIx/Class/Manual/Cookbook.pod#Paged-results\" rel=\"nofollow noreferrer\">DBIC Cookbook</a>.</p>\n\n<h2>Controller</h2>\n\n<p>Your <code>list</code> method as it is only lists the full unpaginated list of books, which was stashed in your <code>base</code> chained method. You now need to add code to take an URL parameter and reduce the list.</p>\n\n<pre><code>sub list :Chained('base'): PathPart('list'): Args(0) {\n    my ($self, $c) = @_;\n\n    if (my $page = $c-&gt;req-&gt;params-&gt;{page}) {\n        # TODO: validate $page\n\n        my $rs = $c-&gt;stash-&gt;{books};\n        $c-&gt;stash-&gt;{books} = $rs-&gt;search(undef, {\n             page =&gt; $page,\n             rows =&gt; 10,    # or how many you want\n        });\n    }\n\n    $c-&gt;stash(template =&gt; 'book/list.tt2');\n}\n</code></pre>\n\n<p>This code will replace your stashed resultset with a new one, that's got a <code>LIMIT</code> attached to it. Remember that resultsets can chain to stack, so with every new <code>-&gt;search</code> you call one a resultset object, a new one that's further drilled down is returned. No SQL is run until later in your template, where you use it in list context, which implies a call to <code>-&gt;all</code>.</p>\n\n<p>There is no need to make any changes to the template for displaying the smaller list.</p>\n\n<p>However, you probably want to control your pagination. You can do that with a <a href=\"https://metacpan.org/pod/Data::Page\" rel=\"nofollow noreferrer\">Data::Page</a> object. Your resultset conveniently provides this for you. However, this comes at the cost of an additional <code>COUNT</code> query. Turn on the <code>DBIC_TRACE=1</code> environment variable to take a look at the queries run in the background if you are interested in what's happening.</p>\n\n<p>In your <code>list</code> method, where we just added the above code, stash the pager as well.</p>\n\n<pre><code>my $rs = $c-&gt;stash-&gt;{books};\n$c-&gt;stash-&gt;{books} = $rs-&gt;search(undef, {\n     page =&gt; $page,\n     rows =&gt; 10,    # or how many you want\n});\n\n$c-&gt;stash-&gt;{pager} = $rs-&gt;pager;\n</code></pre>\n\n<h2>Template</h2>\n\n<p>Now we need to display some controls in the template. I'll not show all of them, but only give you an idea. Since we are still supporting a full list, we can only show the controls if there is a pager.</p>\n\n<pre><code>&lt;table&gt;\n    [%# ... %]\n    &lt;tbody&gt;\n        [% FOREACH book IN books -%]\n        &lt;tr&gt;\n            [%# ... %]\n        &lt;/tr&gt;\n        [% END -%]\n    &lt;/tbody&gt;\n&lt;/table&gt;\n\n[% IF pager %]\n&lt;ul&gt;\n    &lt;li&gt;&lt;a href=\"?page=[% pager.first_page %]\"&gt;First page&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n[% END %]\n</code></pre>\n\n<p>There's no need to use <code>c.uri_for</code> here, because all we do is add an URL parameter. The user's browser is smart enough to make this relative URL with only params point at the same thing it was already on. So if the user is viewing <code>https://example.org/list?page=2</code>, clicking the <em>First page</em> link <code>?page=1</code> will actually take them to <code>https://example.org/list?page=1</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1539023650, "creation_date": 1539023650, "answer_id": 52708208, "question_id": 52696685, "link": "https://stackoverflow.com/questions/52696685/how-to-paginate-long-lists/52708208#52708208", "title": "How to paginate long lists", "body": "<p>I managed to get rid of that non-paged error:</p>\n\n<pre><code>sub list :Chained('base'): PathPart('list'): Args(0) {\n    my ($self, $c) = @_;\n    if (my $page = $c-&gt;req-&gt;params-&gt;{page}) {\n        my $rs = $c-&gt;stash-&gt;{books_rs}-&gt;search({}, {\n             page =&gt; $page,\n             rows =&gt; 5,\n        });\n        $c-&gt;stash-&gt;{books_rs} = $rs;\n        $c-&gt;stash-&gt;{pager} = $rs-&gt;pager;\n    }\n    $c-&gt;stash(template =&gt; 'book/list.tt2');\n}\n</code></pre>\n\n<p>but it still displays all the books. The value passed using the <strong>page</strong> parameter has no effect on the result set.</p>\n"}], "owner": {"reputation": 401, "user_id": 4748387, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/h8kAO.jpg?s=128&g=1", "display_name": "K&#233;rdez&#246;sk&#246;d\u0151 Indi&#225;n", "link": "https://stackoverflow.com/users/4748387/k%c3%a9rdez%c3%b6sk%c3%b6d%c5%91-indi%c3%a1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539023650, "creation_date": 1538980809, "last_edit_date": 1538988077, "question_id": 52696685, "link": "https://stackoverflow.com/questions/52696685/how-to-paginate-long-lists", "title": "How to paginate long lists", "body": "<p>I am (still) learning the Catalyst Framework for Perl. And I need to paginate a long list of books. What I do not know what to use to paginate and how to used it. Second, if I want to pass a \"page=1\" parameter to my list method (in it form now) the passed value doesn't apper. If I modify the number of Args to 1, then it complains that it can not find the page.</p>\n\n<p>These are my files:</p>\n\n<p><strong>Book.pm</strong> (the ORM file)</p>\n\n<pre><code>use utf8;\npackage Library::Schema::Result::Books;\n\nuse strict;\nuse warnings;\n\nuse Moose;\nuse MooseX::NonMoose;\nuse MooseX::MarkAsMethods autoclean =&gt; 1;\nextends 'DBIx::Class::Core';\n\n__PACKAGE__-&gt;load_components(\"InflateColumn::DateTime\");\n__PACKAGE__-&gt;table(\"books\");\n__PACKAGE__-&gt;add_columns(\n  \"id\",\n  {\n    data_type =&gt; \"uuid\",\n    default_value =&gt; \\\"uuid_generate_v4()\",\n    is_nullable =&gt; 0,\n    size =&gt; 16,\n  },\n  \"title\",\n  { data_type =&gt; \"varchar\", is_nullable =&gt; 0, size =&gt; 128 },\n);\n\n__PACKAGE__-&gt;set_primary_key(\"id\");\n__PACKAGE__-&gt;add_unique_constraint(\"uk_books\", [\"title\"]);\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\n1;\n</code></pre>\n\n<p><strong>Book.pm</strong> (the controller)</p>\n\n<pre><code>package Library::Controller::Book;\nuse Moose;\nuse namespace::autoclean;\nuse utf8;\nuse Data::Validate::UUID qw(is_uuid);\n\nBEGIN { extends 'Catalyst::Controller'; }\n\nsub base :Chained('/'): PathPart('book'): CaptureArgs(0) {\n    my ($self, $c) = @_;\n    $c-&gt;stash(books_rs =&gt; $c-&gt;model('DB::Books'));\n    $c-&gt;stash(books =&gt; [$c-&gt;stash-&gt;{books_rs}-&gt;search(\n        {},\n        {order_by =&gt; 'title ASC'})]\n    );\n}\n\nsub list :Chained('base'): PathPart('list'): Args(0) {\n    my ($self, $c) = @_;\n    $c-&gt;stash(template =&gt; 'book/list.tt2');\n}\n\nsub index :Path :Args(0) {\n    my ( $self, $c ) = @_;\n    return $c-&gt;res-&gt;redirect(\n        $c-&gt;uri_for($c-&gt;controller('Book')-&gt;action_for('list'))\n    );\n}\n\nsub book :Chained('base'): PathPart(''): CaptureArgs(1) {\n    my ($self, $c, $bookid) = @_;\n    if(!is_uuid(uc($bookid))) {\n        die \"Invalid book ID.\";\n    }\n    my $book = $c-&gt;stash-&gt;{books_rs}-&gt;find(\n        { id =&gt; $bookid },\n        { key =&gt; 'primary' }\n    );\n    die \"No such user\" if(!$book);\n    $c-&gt;stash(book =&gt; $book);\n}\n\nsub add :Chained('base'): PathPart('add'): Args(0) {\n    my ($self, $c) = @_;\n    if(lc $c-&gt;req-&gt;method eq 'post') {\n        my $params = $c-&gt;req-&gt;params;\n        my $books_rs = $c-&gt;stash-&gt;{books_rs};\n        my $newbook = $books_rs-&gt;create({\n            title =&gt; $params-&gt;{newBookTitle},\n        });\n        return $c-&gt;res-&gt;redirect(\n            $c-&gt;uri_for($c-&gt;controller('Book')-&gt;action_for('list')\n        ));\n    }\n}\n\nsub edit :Chained('book') :PathPart('edit'): Args(0) {\n    my ($self, $c) = @_;\n    if(lc $c-&gt;req-&gt;method eq 'post') {\n        my $params = $c-&gt;req-&gt;params;\n        my $book = $c-&gt;stash-&gt;{book};\n        $book-&gt;update({\n            title =&gt; $params-&gt;{title},\n        });\n        return $c-&gt;res-&gt;redirect( $c-&gt;uri_for(\n            $c-&gt;controller('Book')-&gt;action_for('list'),\n            [ $book-&gt;id ]\n        ));\n    }\n}\n\nsub remove :Chained('book'): PathPart('remove'): Args() {\n    my ($self, $c) = @_;\n    my $book = $c-&gt;stash-&gt;{book};\n    $book-&gt;delete();\n    return $c-&gt;res-&gt;redirect(\n        $c-&gt;uri_for($c-&gt;controller('Book')-&gt;action_for('list'))\n    );\n}\n\n__PACKAGE__-&gt;meta-&gt;make_immutable;\n\n1;\n</code></pre>\n\n<p>and the relevant part on my <strong>books/list.tt</strong> file:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;&lt;/th&gt;\n            &lt;th&gt;Book title&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        [% FOREACH book IN books -%]\n        &lt;tr&gt;\n            &lt;td&gt;\n                &lt;a href=\"[%- c.uri_for(c.controller('Book').action_for('remove'), [book.id]) %]\"&gt;\n                    &lt;img src=\"../../images/trash.png\" width=\"22\" height=\"22\"&gt;\n                &lt;/a&gt;\n            &lt;/td&gt;\n            &lt;td&gt;[% book.title %]&lt;/td&gt;\n        &lt;/tr&gt;\n        [% END -%]\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": ["perl", "google-cloud-storage"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538942080, "post_id": 52692119, "comment_id": 92311484, "body": "According to <a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects/patch\" rel=\"nofollow noreferrer\">cloud.google.com/storage/docs/json_api/v1/objects/patch</a> , you need to have <code>OWNER</code> on the object, but I don&#39;t see any documentation how Admin includes (or doesn&#39;t include) <code>OWNER</code> ..."}, {"owner": {"reputation": 1158, "user_id": 2779629, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9OCH1xMxP2c/AAAAAAAAAAI/AAAAAAAAABc/ysbFYiQdY5k/photo.jpg?sz=128", "display_name": "Peter Scott", "link": "https://stackoverflow.com/users/2779629/peter-scott"}, "edited": false, "score": 0, "creation_date": 1539050613, "post_id": 52692119, "comment_id": 92350548, "body": "are you able to run in the <a href=\"https://cloud.google.com/storage/docs/json_api/v1/buckets/patch\" rel=\"nofollow noreferrer\">API explorer</a> It also lists the following scope requirements: <a href=\"https://www.googleapis.com/auth/cloud-platform\" rel=\"nofollow noreferrer\">googleapis.com/auth/cloud-platform</a> and  <a href=\"https://www.googleapis.com/auth/devstorage.full_control\" rel=\"nofollow noreferrer\">googleapis.com/auth/devstorage.full_control</a>"}, {"owner": {"reputation": 497, "user_id": 9908267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eGIbU.jpg?s=128&g=1", "display_name": "Yurci", "link": "https://stackoverflow.com/users/9908267/yurci"}, "edited": false, "score": 0, "creation_date": 1539092739, "post_id": 52692119, "comment_id": 92370462, "body": "Alternatively can you try the <a href=\"https://cloud.google.com/storage/docs/viewing-editing-metadata#edit\" rel=\"nofollow noreferrer\">gsutil</a> tool to edit the metadata?"}], "answers": [{"tags": [], "owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "is_accepted": true, "score": 4, "last_activity_date": 1538942924, "creation_date": 1538942924, "answer_id": 52692438, "question_id": 52692119, "link": "https://stackoverflow.com/questions/52692119/which-permissions-are-needed-to-edit-google-storage-object-metadata/52692438#52692438", "title": "Which permissions are needed to edit Google Storage object metadata?", "body": "<p>To update the object metadata ones needs the <code>storage.objects.update</code> permission.  From <a href=\"https://cloud.google.com/storage/docs/access-control/iam-permissions\" rel=\"nofollow noreferrer\">Cloud Storage IAM Permissions</a>:</p>\n\n<blockquote>\n  <p>Object permissions</p>\n  \n  <p>...</p>\n\n<pre><code>storage.objects.update    Update object metadata, excluding ACLs.\n</code></pre>\n</blockquote>\n\n<p>But both <code>roles/storage.objectAdmin</code> and <code>roles/storage.admin</code> roles (assuming that's what you mean by the roles you listed) <em>should</em> already include that permission, so something else may be at work. From <a href=\"https://cloud.google.com/storage/docs/access-control/iam-roles#standard-roles\" rel=\"nofollow noreferrer\">Standard roles</a>:</p>\n\n<pre><code>roles/storage.objectAdmin  Full control over objects, including listing,    storage.objects.*\n                           creating, viewing, and deleting objects.\n                           Does not grant permission to read or edit \n                           bucket metadata.\nroles/storage.admin        Full control of buckets and objects.             storage.buckets.*\n                           When applied to an individual bucket, control    storage.objects.*\n                           only to the specified bucket and objects within\n                           the bucket.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 9599232, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-V7ySSBOosr4/AAAAAAAAAAI/AAAAAAAAAKw/k5GEcrHcgFE/photo.jpg?sz=128", "display_name": "coryan", "link": "https://stackoverflow.com/users/9599232/coryan"}, "is_accepted": false, "score": 3, "last_activity_date": 1539034500, "creation_date": 1539034500, "answer_id": 52710418, "question_id": 52692119, "link": "https://stackoverflow.com/questions/52692119/which-permissions-are-needed-to-edit-google-storage-object-metadata/52710418#52710418", "title": "Which permissions are needed to edit Google Storage object metadata?", "body": "<p>The name of the attribute in the Object resource is <code>contentType</code>, you are passing <code>content-type</code>:</p>\n\n<p><a href=\"https://cloud.google.com/storage/docs/json_api/v1/objects\" rel=\"nofollow noreferrer\">https://cloud.google.com/storage/docs/json_api/v1/objects</a></p>\n"}], "owner": {"reputation": 4450, "user_id": 856090, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/fa49a1c90a6af7544d764c5b22ff780d?s=128&d=identicon&r=PG", "display_name": "porton", "link": "https://stackoverflow.com/users/856090/porton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 52692438, "answer_count": 2, "score": 2, "last_activity_date": 1539034500, "creation_date": 1538940670, "question_id": 52692119, "link": "https://stackoverflow.com/questions/52692119/which-permissions-are-needed-to-edit-google-storage-object-metadata", "title": "Which permissions are needed to edit Google Storage object metadata?", "body": "<p>I have the following Perl code:</p>\n\n<pre><code>  $response = $process-&gt;request('PATCH',\n                                \"https://www.googleapis.com/storage/v1/b/$Bucket/o/$EscapedName\",\n                                '{\"content-type\": \"image/jpeg\"}',\n#                                 '{\"metadata\": {\"Content-Type\": \"image/jpeg\"}}',\n                                {'Content-Type' =&gt; 'application/json'});\n  unless ($response-&gt;is_success) {\n    print \"Content-Type: text/plain\\n\\n\";\n    print $response-&gt;status_line . \"\\n\" . $response-&gt;decoded_content . \"\\n\" ;\n    exit;\n  }\n</code></pre>\n\n<p>It produces</p>\n\n<pre><code>403 Forbidden\n{\n \"error\": {\n  \"errors\": [\n   {\n    \"domain\": \"global\",\n    \"reason\": \"insufficientPermissions\",\n    \"message\": \"Insufficient Permission\"\n   }\n  ],\n  \"code\": 403,\n  \"message\": \"Insufficient Permission\"\n }\n}\n</code></pre>\n\n<p>despite I have:</p>\n\n<ul>\n<li>Storage Admin</li>\n<li>Storage Object Admin</li>\n<li>Storage Object Creator</li>\n<li>Storage Object Viewer</li>\n</ul>\n\n<p>enabled for my user.</p>\n\n<p>Why does it not work?</p>\n\n<p>Simple uploading of objects does work, but I cannot set this metadata.</p>\n"}, {"tags": ["string", "perl", "substr"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538941558, "post_id": 52689094, "comment_id": 92311354, "body": "<code>substr</code> modified the string in-place"}, {"owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538986002, "post_id": 52689094, "comment_id": 92322202, "body": "Thanks, @ikegami. Didn&#39;t know."}], "answers": [{"comments": [{"owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "edited": false, "score": 0, "creation_date": 1538921522, "post_id": 52689271, "comment_id": 92305557, "body": "That did the trick. I am starting with Perl. So was trying to understand how to handle the substr. Thanks a lot."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "edited": false, "score": 1, "creation_date": 1538921557, "post_id": 52689271, "comment_id": 92305566, "body": "@feijao If you&#39;re not already doing so, I recommend starting every Perl file you write with <code>use strict; use warnings;</code>."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 4, "last_activity_date": 1538921250, "creation_date": 1538921250, "answer_id": 52689271, "question_id": 52689094, "link": "https://stackoverflow.com/questions/52689094/replacing-a-character-in-a-string-based-on-position/52689271#52689271", "title": "Replacing a character in a string based on position", "body": "<p>Quoting <a href=\"https://perldoc.pl/functions/substr\" rel=\"nofollow noreferrer\"><code>perldoc -f substr</code></a>:</p>\n\n<blockquote>\n  <p>An alternative to using <code>substr</code> as an lvalue is to specify the replacement string as the 4th argument. This allows you to replace parts of the EXPR and <strong>return what was there before</strong> in one operation, just as you can with <a href=\"https://perldoc.pl/functions/splice\" rel=\"nofollow noreferrer\"><code>splice</code></a>.</p>\n</blockquote>\n\n<p>(Emphasis mine.)</p>\n\n<p>In other words, <code>substr</code> always returns a substring of the original string. If you want to print the modified string, do it in two steps:</p>\n\n<pre><code>substr $seq, $pos, 1, $rep;\n# or alternatively:\n#  substr($seq, $pos, 1) = $rep;\nprint \"The modified string is $seq\\n\";\n</code></pre>\n"}], "owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 52689271, "answer_count": 1, "score": 1, "last_activity_date": 1538921282, "creation_date": 1538919907, "last_edit_date": 1538921282, "question_id": 52689094, "link": "https://stackoverflow.com/questions/52689094/replacing-a-character-in-a-string-based-on-position", "title": "Replacing a character in a string based on position", "body": "<p>I am trying to use Perl to replace a character in a string based on its position.</p>\n\n<p>Here's what I have done:</p>\n\n<pre><code>my ($pos, $rep) = @ARGV;\n\nprint (\"Give me the string: \");\nchomp(my $string = &lt;STDIN&gt;);\n\nprint (\"The modified string is \", substr($seq, $pos, 1, $rep),\"\\n\");\n</code></pre>\n\n<p>When I run in terminal:</p>\n\n<pre><code>perl myprogram.pl 4 B\nGive me the string: eeeeee\nThe modified string is e\n</code></pre>\n\n<p>What I want as output is: <strong>eeeeBe</strong></p>\n\n<p>Any clue what is wrong?</p>\n"}, {"tags": ["python", "python-3.x", "perl", "header", "cgi"], "comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538916440, "post_id": 52688527, "comment_id": 92304259, "body": "Most systems nowadays have Perl installed or just two clicks away for installing. See <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">strawberryperl.com</a> for installing Perl on Windows. Please look at the documentation of the CGI module ( <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod\" rel=\"nofollow noreferrer\">metacpan.org/pod/distribution/CGI/lib/CGI.pod</a> ), where your questions can be answered directly."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1538916501, "post_id": 52688527, "comment_id": 92304279, "body": "CGI programs work by sending HTML through the standard output stream, so that&#39;s what the print statement is doing.  It is sending the header.  <code>q</code> is a reference to an an object of class <code>CGI</code>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538995401, "post_id": 52688527, "comment_id": 92327417, "body": "If you want to convert code from one language to another it generally helps knowing what the code does. Running it is quite helpful for that. You cannot reverse-engineer something without understanding its quirks, and you can&#39;t know about them without running it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1538995448, "post_id": 52688527, "comment_id": 92327451, "body": "Your question title talks about an <code>html</code> content type, but your body talks about <code>text</code>. Neither answer has said anything to either of these shortcuts. What is it? Text, HTML or a specific type?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8981533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb3c12d5146f3ffd2594adaf502e0f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sukumar", "link": "https://stackoverflow.com/users/8981533/sukumar"}, "edited": false, "score": 0, "creation_date": 1538919656, "post_id": 52688612, "comment_id": 92305076, "body": "So, that means <code>print $q-&gt;header(-type=&gt;&#39;text&#39;);</code> sets the <code>Content-Type</code> to <code>text&#47;plain</code> and returns <code>true</code> or <code>false</code> based on the result. Finally print will print <b>true</b> or <b>false</b>. Am I correct?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538927120, "post_id": 52688612, "comment_id": 92307181, "body": "No, that is false, The <code>header</code> method returns the string. That&#39;s why the string is printed. See the documentation."}, {"owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "reply_to_user": {"reputation": 33, "user_id": 8981533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb3c12d5146f3ffd2594adaf502e0f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sukumar", "link": "https://stackoverflow.com/users/8981533/sukumar"}, "edited": false, "score": 0, "creation_date": 1538930243, "post_id": 52688612, "comment_id": 92308135, "body": "@Sukumar No, as @Corion says <code>header</code> method returns a string which in-turn sent through the standard output stream by the print statement."}, {"owner": {"reputation": 33, "user_id": 8981533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb3c12d5146f3ffd2594adaf502e0f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sukumar", "link": "https://stackoverflow.com/users/8981533/sukumar"}, "edited": false, "score": 0, "creation_date": 1538993007, "post_id": 52688612, "comment_id": 92326094, "body": "Thank you all. I got it now."}], "tags": [], "owner": {"reputation": 3071, "user_id": 7992142, "user_type": "registered", "profile_image": "https://graph.facebook.com/1605532469479504/picture?type=large", "display_name": "Nipun Sampath", "link": "https://stackoverflow.com/users/7992142/nipun-sampath"}, "is_accepted": true, "score": 1, "last_activity_date": 1538916282, "creation_date": 1538916282, "answer_id": 52688612, "question_id": 52688527, "link": "https://stackoverflow.com/questions/52688527/what-does-the-header-type-text-print-in-cgi-in-perl/52688612#52688612", "title": "What does the header(-type=&gt;&#39;text&#39;) print in cgi in Perl", "body": "<p><strong>Starting the output</strong></p>\n\n<blockquote>\n  <p>We use the CGI object to print out the HTTP header\n  for the output:</p>\n\n<pre><code>print $q-&gt;header; \n</code></pre>\n  \n  <p>This gives you the following HTTP header:</p>\n\n<pre><code>Content-Type: text/html; charset=ISO-8859-1 \n</code></pre>\n  \n  <p>If you need to have any extra options in your header, for example you may not want the\n  default 'type', you can just pass them in to the header method:</p>\n\n<pre><code>print $q-&gt;header(-type =&gt; \"text/plain\"); \n</code></pre>\n  \n  <p>This gives you the following HTTP header:</p>\n\n<pre><code>Content-Type: text/plain; charset=ISO-8859-1\n</code></pre>\n</blockquote>\n\n<p>For more info visit <a href=\"http://perlmeme.org/tutorials/cgi_script.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1538916572, "last_edit_date": 1592644375, "creation_date": 1538916572, "answer_id": 52688657, "question_id": 52688527, "link": "https://stackoverflow.com/questions/52688527/what-does-the-header-type-text-print-in-cgi-in-perl/52688657#52688657", "title": "What does the header(-type=&gt;&#39;text&#39;) print in cgi in Perl", "body": "<p>Quoting the <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#Creating-a-standard-http-header\" rel=\"nofollow noreferrer\">CGI.pm documentation</a></p>\n<blockquote>\n<p><code>header()</code> returns the <code>Content-type:</code> header. You can provide your own MIME type if you choose, otherwise it defaults to <code>text/html</code>. An optional second parameter specifies the status code and a human-readable message. For example, you can specify 204, &quot;No response&quot; to create a script that tells the browser to do nothing at all. Note that RFC 2616 expects the human-readable phase to be there as well as the numeric status code.</p>\n<pre><code>print $cgi-&gt;header( -Content_length =&gt; 3002 );\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 417, "user_id": 168161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/db1c27523043366c2ba1c9be1fa3fa23?s=128&d=identicon&r=PG", "display_name": "Dave Jacoby", "link": "https://stackoverflow.com/users/168161/dave-jacoby"}, "is_accepted": false, "score": 0, "last_activity_date": 1539473291, "creation_date": 1539473291, "answer_id": 52798216, "question_id": 52688527, "link": "https://stackoverflow.com/questions/52688527/what-does-the-header-type-text-print-in-cgi-in-perl/52798216#52798216", "title": "What does the header(-type=&gt;&#39;text&#39;) print in cgi in Perl", "body": "<p>\"What does it do?\"</p>\n\n<p><code>my $q = new CGI</code> creates a new https://metacpan.org/pod/CGI object, which can do a great many things for you. The best things are the params, the path info and the headers.</p>\n\n<p><code>print $q-&gt;header(-type=&gt;'text')</code> prints the header, which tells the browser what is being generated. <code>-type=&gt;'text'</code> is insufficient; it <em>should</em> be a complete MIME type, such as <code>text/plain</code>, <code>text/html</code>, <code>text/csv</code>, <code>application/json</code> or a great many others. You can even generate an image and make the type <code>image/jpeg</code> or something.</p>\n\n<p>It will also print the status, which would be <strong>200</strong>, for <strong>OK</strong>. Your program <em>should</em> work without it, but no harm in adding it. </p>\n\n<p>You're trying to port this to Python, and I don't know what options Python has to write this, but you likely don't need it. Just separate whatever header entries you want to throw in, such as expires tags, with newlines (<code>\\n</code>), then add another one to separate the header from the body. </p>\n"}], "owner": {"reputation": 33, "user_id": 8981533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb3c12d5146f3ffd2594adaf502e0f5?s=128&d=identicon&r=PG&f=1", "display_name": "Sukumar", "link": "https://stackoverflow.com/users/8981533/sukumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "accepted_answer_id": 52688612, "answer_count": 3, "score": -1, "last_activity_date": 1539473291, "creation_date": 1538915640, "last_edit_date": 1539121671, "question_id": 52688527, "link": "https://stackoverflow.com/questions/52688527/what-does-the-header-type-text-print-in-cgi-in-perl", "title": "What does the header(-type=&gt;&#39;text&#39;) print in cgi in Perl", "body": "<p>I'm really new to cgi and trying to convert a Perl cgi script to Python.</p>\n\n<p>I came across these statements in the script.</p>\n\n<pre><code>my $q = new CGI;\nprint $q-&gt;header(-type=&gt;'text');\n</code></pre>\n\n<p>By looking at it I can understand that q is a scalar variable which possess the form data from which the CGI script is being called.</p>\n\n<p>But what does the print statement above do?</p>\n\n<p>Will it check if the type header's value in form header dictionary and print True or False based on that?</p>\n\n<p>I don't have Perl interpreter to execute and check the output.</p>\n"}, {"tags": ["perl", "hash", "whitespace"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1538904899, "post_id": 52687156, "comment_id": 92301636, "body": "No, the very same code is used for hashing the key in both operators, and any character can be used in hash keys. You probably have a trailing line feed in one place but not the other."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1538906889, "post_id": 52687156, "comment_id": 92302066, "body": "Can you please show us a stand-alone program that reproduces the problem? Most likely @ikegami is correct in that your <code>$searchKey</code> contains newlines or other whitespace, while <code>$key1</code> and <code>$key2</code> don&#39;t. Maybe use <a href=\"https://metacpan.org/pod/Data::Dumper\" rel=\"nofollow noreferrer\">metacpan.org/pod/Data::Dumper</a> and inspect the data you have."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538907098, "post_id": 52687156, "comment_id": 92302131, "body": "If you use Data::Dumper, you&#39;ll get best results by doing <code>$Data::Dumper::Useqq = 1;</code> first"}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1538929767, "post_id": 52687156, "comment_id": 92307993, "body": "Your repetitive use of <i>absurd</i> may be absurd"}], "answers": [{"comments": [{"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1538930015, "post_id": 52690511, "comment_id": 92308063, "body": "It seems like majority of this post explains a condition that the OP has not described: using a non-scalar as a key.  It&#39;s not incorrect, but was a lot to read when it may not apply to the experienced problem."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "reply_to_user": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1538930172, "post_id": 52690511, "comment_id": 92308111, "body": "I answer questions for future searchers. These are the problems I commonly see when the person isn&#39;t using the hash key they expect.  The first paragraph probably solves this person&#39;s problem though."}, {"owner": {"reputation": 35763, "user_id": 183181, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f6642797870d2dd20e4a5c8df347562c?s=128&d=identicon&r=PG", "display_name": "vol7ron", "link": "https://stackoverflow.com/users/183181/vol7ron"}, "edited": false, "score": 0, "creation_date": 1538930238, "post_id": 52690511, "comment_id": 92308130, "body": "Understood, might I propose a horizontal rule to separate these concerns?"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1538929655, "last_edit_date": 1538929655, "creation_date": 1538929354, "answer_id": 52690511, "question_id": 52687156, "link": "https://stackoverflow.com/questions/52687156/using-white-space-in-key-value-for-hashing-in-perl/52690511#52690511", "title": "Using white space in key value for hashing in perl", "body": "<p>What absurd results do you get? The hash doesn't care what you have in the keys. Are you sure that you have the right thing in <code>$searchKey</code>? If you are taking that from user input, is there an extra newline on the end?</p>\n\n<p>This works as it should:</p>\n\n<pre><code>my %newhash;\n\nmy $key1=\"Dave 2314\";\nmy $key2=\"John 3212\";\n\n$newhash{$key1} = 35;\n$newhash{$key2} = 46;\n\nprint \"Found\\n\" if exists $newhash{$key1};\n</code></pre>\n\n<p>But, there's another issue. You can have code in the braces for the hash element single access. When you have just a scalar variable it works. This is a syntax error because there's a bare word <code>Dave</code>, a space, and a literal number <code>1234</code>:</p>\n\n<pre><code>print \"Found\\n\" if exists $newhash{Dave 2314};\n</code></pre>\n\n<p>This is not a syntax error though, because there's a function named <code>Dave</code> (that just happens to return a key that exists). I'm confident this isn't your problem:</p>\n\n<pre><code>sub Dave { 'John 3212' }\nprint \"Found\\n\" if exists $newhash{Dave 2314};\n</code></pre>\n\n<p>Written another way:</p>\n\n<pre><code>sub Dave { 'John 3212' }\nprint \"Found\\n\" if exists $newhash{ Dave(2314) };\n</code></pre>\n\n<p>And yet another way:</p>\n\n<pre><code>print \"Found\\n\" if exists $newhash{ join ' ', qw(John 3212 ) };\n</code></pre>\n\n<p>You should have quoted that key if it was literal:</p>\n\n<pre><code>print \"Found\\n\" if exists $newhash{'Dave 2314'};\n</code></pre>\n\n<p>You can have unquoted strings if they don't look like code. This looks like <code>'Dave'</code>:</p>\n\n<pre><code>print \"Found\\n\" if exists $newhash{Dave};\n</code></pre>\n\n<p>But what about this? That dot is actually the string concatenation operator and it thinks <code>Dave</code> is a bare word. It you haven't defined a subroutine, this is a syntax error:</p>\n\n<pre><code>print \"Found\\n\" if exists $newhash{Dave.John};\n</code></pre>\n\n<p>This works though. The thing before the dot is a subroutine call but the thing after is a string:</p>\n\n<pre><code>sub Dave { 'John 3212' }\nprint \"Found\\n\" if exists $newhash{Dave.John};\n</code></pre>\n\n<p>So there are some weird edge cases. But I typically don't have this problem because I always quote literal keys.</p>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 2854259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36c4f4fed0dc56e9b372a88b53b570a?s=128&d=identicon&r=PG&f=1", "display_name": "user2854259", "link": "https://stackoverflow.com/users/2854259/user2854259"}, "is_accepted": false, "score": 0, "last_activity_date": 1539052049, "creation_date": 1539052049, "answer_id": 52712498, "question_id": 52687156, "link": "https://stackoverflow.com/questions/52687156/using-white-space-in-key-value-for-hashing-in-perl/52712498#52712498", "title": "Using white space in key value for hashing in perl", "body": "<p>Thanks to all for investing your time. \nThe issue was in my code itself. The entire logic was based on a flag variable which i didnt reset properly as and when required. \nSo to answer my own question, whitespaces in between the key string should not be a problem. </p>\n"}], "owner": {"reputation": 27, "user_id": 2854259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a36c4f4fed0dc56e9b372a88b53b570a?s=128&d=identicon&r=PG&f=1", "display_name": "user2854259", "link": "https://stackoverflow.com/users/2854259/user2854259"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539052049, "creation_date": 1538904590, "last_edit_date": 1538908058, "question_id": 52687156, "link": "https://stackoverflow.com/questions/52687156/using-white-space-in-key-value-for-hashing-in-perl", "title": "Using white space in key value for hashing in perl", "body": "<p>Can we safely use hash tables where the key value would include white spaces in between. For ex:</p>\n\n<pre><code>my $key1=\"Dave 2314\";\nmy $key2=\"John 3212\";\n\n$newhash{$key1}= 35;\n$newhash{$key2}= 46;\n</code></pre>\n\n<p>I used similar piece of code in one of my program. I feel like the hashing do work, but exists function don't go well=> </p>\n\n<pre><code>print \"Found\\n\" if (exists $newhash{$searchKey}) \n</code></pre>\n\n<p>This gives absurd results. Sometimes it works well and return correct response if the key is present and sometimes it doesn't for the very same input. Is having white spaces in the keys the reason for such absurd functioning? </p>\n"}, {"tags": ["file", "perl", "recursion", "filehandle", "recursive-datastructures"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538884151, "post_id": 52685208, "comment_id": 92298186, "body": "Use strict and warnings, it may catch several issues here. Don&#39;t use bareword (global) filehandles or global variables (they should be declared with <a href=\"https://perldoc.pl/functions/my\" rel=\"nofollow noreferrer\">my</a>), and error check your opens: do <code>open my $file, &#39;file1.txt&#39; or die &quot;Open file1.txt failed: $!&quot;;</code>. <code>&lt;$array[$set]&gt;</code> won&#39;t work, as the <code>&lt;&gt;</code> operator has weird parsing rules and will interpret that as a glob, you can do <code>readline($array[$set])</code> instead (it&#39;s the same operation)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538887607, "post_id": 52685208, "comment_id": 92298582, "body": "Please format the explanation so that it is readable ... ? At least start and we&#39;ll help.  I tried to edit but I can&#39;t fully makes sense of it."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538890362, "post_id": 52685208, "comment_id": 92298926, "body": "What do you mean by &quot;<i>without destroying the filehandles</i>&quot;? Keep them all, opened? Please clarify."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538893350, "post_id": 52685208, "comment_id": 92299345, "body": "I did clean up and format your question but I don&#39;t understand the listing of files.  Please edit to clarify.  (If you don&#39;t like my edit you can undo it by clicking on &quot;edited (time)&quot; link right below the question, and then click on &quot;rollback&quot; under the previous version)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538905873, "post_id": 52685208, "comment_id": 92301847, "body": "Always use <code>use strict; use warnings qw( all );</code>!!!"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1577601063, "last_edit_date": 1577601063, "creation_date": 1538887835, "answer_id": 52685554, "question_id": 52685208, "link": "https://stackoverflow.com/questions/52685208/how-to-open-a-file-which-name-is-found-in-another-file-recursively/52685554#52685554", "title": "How to open a file which name is found in another file, recursively", "body": "<p>My take on the problem: read a file and if filenames are found (judged by <code>.txt</code>) open and read those, and carry on recursively. The posted code has some basic errors, discussed below. </p>\n\n<p>I assume that all lines of a file need be printed first and then we go into the next file(s) (if found). The code below allows the filehandles to be closed; a slight variation of it that keeps them in an array and opened follows below.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nmy $file = shift @ARGV || 'file.txt';\n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nrecurse_open($fh);\n\nsub recurse_open {\n    my ($fh) = shift;\n    my @files;\n    while (&lt;$fh&gt;) {\n        print;\n        if (/\\b(.+?\\.txt)\\b/) {\n            push @files, $1; \n        }   \n    }   \n    say '---';\n    foreach my $file (@files) {\n        open my $fh_next, '&lt;', $file  or do {\n            warn \"Can't open $file: $!\";\n            next;\n        };\n        recurse_open($fh_next);\n    }   \n}\n</code></pre>\n\n<p>This prints </p>\n\n<pre>\nmain file\nfile1.txt is in it\nend of main file\n---\nfile one, with\na line with file2.txt\nend of one\n---\nfile two, which has\na line with file3.txt\nend of two\n---\nJust the file3,\nno more filenames.\n---\n</pre>\n\n<p>where the content of the <code>file.txt</code> and files 1..3, used for testing, is clear I hope (separated by <code>---</code>).  This follows up on all filenames present in a file, if it happens that there is more than one.</p>\n\n<p>If the phrase \"<em>without destroying the filehandles</em>\" in the title means that the filehandles should be kept open (and collected), then just add them to an array as they are opened</p>\n\n<pre><code>open my $fh, '&lt;', $file or die \"Can't open $file: $!\";\nmy @filehandles = ($fh);\n\nrecurse_open($fh, \\@filehandles);\n\nsub recurse_open {\n    my ($fh, $handles) = @_;\n    ...\n    foreach my $file (@files) {\n        open my $fh_next, '&lt;', $file  or do {\n            warn \"Can't open $file: $!\";\n            next;\n        };    \n        push @$handles, $fh_next;\n        recurse_open($fh_next, $handles);\n    }\n}\n</code></pre>\n\n<p>Normally a (lexical) filehandle is closed when it goes out of scope. However, since each is now copied into an array defined in a larger scope they are kept as there is a reference for each.</p>\n\n<hr>\n\n<p>Comments on the code in the question.</p>\n\n<p>The most serious error is an apparent misunderstanding of what a filehandle is and does. The expression <code>&lt;$fh&gt;</code> reads from the file that was associated with the filehandle <code>$fh</code> when it was opened, where <code>&lt;&gt;</code> is the operator version of <a href=\"https://perldoc.perl.org/functions/readline.html\" rel=\"nofollow noreferrer\">readline</a>. See <a href=\"https://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\">I/O Operators in perlop</a>.</p>\n\n<p>This returns a line in the file and <em>that</em> is what you should work on, with <code>chomp</code>, <code>m//</code> etc, and not on the <code>$fh</code> itself.  With <code>while (&lt;$fh&gt;)</code> (nothing else in the condition) the line is assigned to the <a href=\"https://perldoc.perl.org/perlvar.html#$_\" rel=\"nofollow noreferrer\">special variable</a> <code>$_</code>, which is default for many things in Perl. The code above makes use of that.</p>\n\n<p>Next, you don't actually match on and capture the filename but only match on <code>.txt</code>. (That match uses the filehandle instead of a variable containing the line, and <code>open</code> uses that filehandle in place of a filename, which is the filehandle confusion mentioned above.)</p>\n\n<p>Then, I don't see the need for that dance around <code>$set</code>, incrementing and decrementing it. Since you nicely relegated all this to a subroutine just use the filehandle in a variable. So I did away with the array. Please restore it if it is needed for some other reasons.</p>\n\n<p>Finally:</p>\n\n<ul>\n<li><p><em>Always</em> start the program with <code>use warnings;</code> and <code>use strict;</code>.  This is not some pedantry but <em>directly</em> helps catching errors, and enforces some very good practices, too.</p></li>\n<li><p><em>Always</em> check your <code>open</code> call (<code>open ...  or ...</code>)</p></li>\n<li><p>Use lexical filehandles (<code>my $fh</code>) instead of globs (<code>FH</code>), they are much better. Use three-argument version of <code>open</code></p></li>\n</ul>\n\n<p>If this is the whole purpose you might as well pass the filename to the recursive sub and have it open and read the file.</p>\n"}], "owner": {"reputation": 9, "user_id": 10388219, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ki6JHVGzz-o/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaO9LRDJkImD5KUVg7kb5ad9ZspNTQ/mo/photo.jpg?sz=128", "display_name": "Mike", "link": "https://stackoverflow.com/users/10388219/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1577601063, "creation_date": 1538882830, "last_edit_date": 1577600772, "question_id": 52685208, "link": "https://stackoverflow.com/questions/52685208/how-to-open-a-file-which-name-is-found-in-another-file-recursively", "title": "How to open a file which name is found in another file, recursively", "body": "<p>Recursive file openings without destroying the filehandles in perl</p>\n\n<pre><code>#!usr/bin/perl\n   $set=1; \n   open (MYFILE, 'file1.txt'); \n   $array[$set]=\\*MYFILE; \n   printit ($array[$set]); \n\n   sub printit {    \n     ($array[$set])=shift;    \n     $fh=&lt;$array[$set]&gt;;\n     while (&lt;$fh&gt;) {\n       chomp($fh); \n       #print data in the file\n       if($fh=~/\\.txt/){\n           #print $fh;\n           open (files,\"$fh\");\n           $set=$set+1;\n           printit(*files);\n           $set=$set-1;\n          }\n    } \n}   \n</code></pre>\n\n<pre>\nfile1.txt -file2.txt,file3.txt #assume file2.txt comes before file3.txt \nfile2.txt-file4.txt file3.txt \n</pre>\n\n<p>I want to open a file1.txt and print data in    file1 and if i find \n    file2.txt in the file open the file print the data and goes recursively \n    until the file does not contain and .txt files present in it and comes back \n    (transverse a tress) in our case file1->file2->file4->file3->file1 end \n     program. I don't know why my program is not work. Thanks in advance*</p>\n"}, {"tags": ["perl", "sorting", "scripting-language", "interpreted-language"], "answers": [{"tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 4, "last_activity_date": 1538878798, "creation_date": 1538878798, "answer_id": 52684942, "question_id": 52684311, "link": "https://stackoverflow.com/questions/52684311/sorting-an-array-in-perl-and-returning-the-result-in-one-line/52684942#52684942", "title": "Sorting an array in perl and returning the result in one line", "body": "<p>Input from the readline operator (<code>&lt;&gt;</code>) will generally contain the newline at the end of the line, so you need to pass it to <a href=\"https://perldoc.pl/functions/chomp\" rel=\"nofollow noreferrer\">chomp</a>. Then, you can interpolate the array directly into the string rather than passing it as additional arguments to print. Interpolating an array separates each argument with <a href=\"https://perldoc.pl/variables/$&quot;\" rel=\"nofollow noreferrer\">$\"</a> which defaults to a space, while separate arguments to print are separated by <a href=\"https://perldoc.pl/variables/$,\" rel=\"nofollow noreferrer\">$,</a> which doesn't have a default, but is commonly set to a newline.</p>\n\n<pre><code>my @texts;\n\nprint (\"Enter text 1: \");\nchomp(my $text1 = &lt;STDIN&gt;);\npush @texts, $text1;\nprint (\"Enter text 2: \");\nchomp(my $text2 = &lt;STDIN&gt;);\npush @texts, $text2;\nprint (\"Enter text 3: \");\nchomp(my $text3 = &lt;STDIN&gt;);\npush @texts, $text3;\n\nmy @sorted_texts = sort { lc($b) cmp lc($a) } @texts;\n\nprint \"Your texts are: @sorted_texts\\n\";\n</code></pre>\n\n<p>Since chomp can also operate on a list, you can just add one chomp call instead after reading all the input.</p>\n\n<pre><code>chomp(@texts);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "is_accepted": false, "score": -1, "last_activity_date": 1539619178, "creation_date": 1539619178, "answer_id": 52820583, "question_id": 52684311, "link": "https://stackoverflow.com/questions/52684311/sorting-an-array-in-perl-and-returning-the-result-in-one-line/52820583#52820583", "title": "Sorting an array in perl and returning the result in one line", "body": "<p>Isn't the main answer that you have $a and $b reversed?\nThe operative line should be:</p>\n\n<pre><code>my @sorted_texts = sort { lc($a) cmp lc($b) } @texts;\n</code></pre>\n"}], "owner": {"reputation": 717, "user_id": 7785387, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/eY4ka.jpg?s=128&g=1", "display_name": "tavalendo", "link": "https://stackoverflow.com/users/7785387/tavalendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 52684942, "answer_count": 2, "score": 2, "last_activity_date": 1539619178, "creation_date": 1538870044, "question_id": 52684311, "link": "https://stackoverflow.com/questions/52684311/sorting-an-array-in-perl-and-returning-the-result-in-one-line", "title": "Sorting an array in perl and returning the result in one line", "body": "<p>I am trying to sort an array in Perl from Z to A and return the sorted array in one line.</p>\n\n<p>What I am doing is:</p>\n\n<pre><code>sub mainTexts {\n\n    my @texts = ();\n\n    print (\"Enter text 1: \");\n    my $text1 = &lt;STDIN&gt;;\n    push @texts, $text1;\n    print (\"Enter text 2: \");\n    my $text2 = &lt;STDIN&gt;;\n    push @texts, $text2;\n    print (\"Enter text 3: \");\n    my $text3 = &lt;STDIN&gt;;\n    push @texts, $text3;\n\n    my @sorted_texts = sort { lc($b) cmp lc($a) } @texts;\n\n    print \"Your texts are: \", @sorted_texts;\n\n\n}\n\nmainTexts();\n</code></pre>\n\n<p>This results in:</p>\n\n<blockquote>\n  <p>Your texts are: ZSAHS </p>\n  \n  <p>FGDSJ</p>\n  \n  <p>ABCNA</p>\n</blockquote>\n\n<p>While the result I want is:</p>\n\n<blockquote>\n  <p>Your texts are: ZSAHS FGDSJ ABCNA</p>\n</blockquote>\n\n<p>Any clue how to achieve this from the code above? Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "perl", "cgi"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538869802, "post_id": 52684098, "comment_id": 92296436, "body": "Specifically <code>$|=1</code> is equivalent to setting the autoflush property of the currently selected output handle, causing it to flush whenever it&#39;s printed to rather than buffering."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538905282, "post_id": 52684098, "comment_id": 92301725, "body": "Is there really a point to using <code>$| = 1;</code> in a CGI script???"}, {"owner": {"reputation": 185, "user_id": 10411651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d234526fd125b27fcf07a5eb1d93db8?s=128&d=identicon&r=PG&f=1", "display_name": "Anudeep", "link": "https://stackoverflow.com/users/10411651/anudeep"}, "edited": false, "score": 0, "creation_date": 1538907225, "post_id": 52684098, "comment_id": 92302160, "body": "No Idea why they mentioned <b>$|=1</b>. The script was written a decade ago. I&#39;m just trying to convert it to Python."}], "answers": [{"tags": [], "owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "is_accepted": true, "score": 3, "last_activity_date": 1538869177, "creation_date": 1538869177, "answer_id": 52684235, "question_id": 52684098, "link": "https://stackoverflow.com/questions/52684098/what-is-the-python-equivalent-to-1-in-perl/52684235#52684235", "title": "What is the python equivalent to $|=1 in Perl", "body": "<p>I'd consider not worrying about porting this line for the time being, as flushing stdout after every <code>print</code> will likely be the least of your porting worries.</p>\n\n<p>But if it is, you have many options:</p>\n\n<ul>\n<li>Simply add the <code>flush=True</code> keyword argument to your <a href=\"https://docs.python.org/3/library/functions.html#print\" rel=\"nofollow noreferrer\"><code>print</code></a> function call.</li>\n<li>Run Python in <a href=\"https://docs.python.org/3/using/cmdline.html#cmdoption-u\" rel=\"nofollow noreferrer\">\"unbuffered\" mode with the <code>-u</code> switch</a>.</li>\n<li>Re-open stdout in unbuffered mode (e.g. the final <code>0</code> in):\n\n<ul>\n<li><code>sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)</code></li>\n</ul></li>\n<li>Write a <code>print</code> wrapper function that shadows the builtin <code>print</code> and flushes stdout</li>\n<li>Write a <code>TextIOWrapper</code> object that wraps <code>sys.stdout</code> and flushes</li>\n</ul>\n\n<p>I'll try to find some links for the rest of the points and edit them in.</p>\n"}], "owner": {"reputation": 185, "user_id": 10411651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d234526fd125b27fcf07a5eb1d93db8?s=128&d=identicon&r=PG&f=1", "display_name": "Anudeep", "link": "https://stackoverflow.com/users/10411651/anudeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 52684235, "answer_count": 1, "score": 1, "last_activity_date": 1538907280, "creation_date": 1538867353, "last_edit_date": 1538907280, "question_id": 52684098, "link": "https://stackoverflow.com/questions/52684098/what-is-the-python-equivalent-to-1-in-perl", "title": "What is the python equivalent to $|=1 in Perl", "body": "<p>Hi I'm very new to Perl and CGI.</p>\n\n<p>I'm trying to convert a perl script to python.</p>\n\n<p>It is mentioned <strong>$|=1</strong> in the script. What I understood is it clears the buffer.</p>\n\n<p>I am searching if there is any python equivalent to do the exact thing.</p>\n\n<p>Any suggestions??</p>\n"}, {"tags": ["json", "perl", "cpan"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1538852809, "post_id": 52682304, "comment_id": 92293015, "body": "Sounds like your Perl installation is incomplete. It&#39;s missing some headers."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538869704, "post_id": 52682304, "comment_id": 92296428, "body": "I think this can happen when certain libraries are updated after installing Perl. Try reinstalling Perl?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538906029, "post_id": 52682304, "comment_id": 92301876, "body": "Like @melpomene said, you are missing key parts of Perl itself. Lots of linux distros only install parts Perl by default, and leave it to you to install the left-out bits as needed using their package manager (<code>apt</code> / <code>yum</code>). It might be the same for MacBooks?"}], "answers": [{"tags": [], "owner": {"reputation": 1158, "user_id": 2779629, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9OCH1xMxP2c/AAAAAAAAAAI/AAAAAAAAABc/ysbFYiQdY5k/photo.jpg?sz=128", "display_name": "Peter Scott", "link": "https://stackoverflow.com/users/2779629/peter-scott"}, "is_accepted": false, "score": 19, "last_activity_date": 1542080075, "last_edit_date": 1542080075, "creation_date": 1540500846, "answer_id": 52997962, "question_id": 52682304, "link": "https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules/52997962#52997962", "title": "&quot;Fatal error: &#39;EXTERN.h&#39; file not found&quot; while installing Perl modules", "body": "<p>Since OS X El Capitan, Apple introduced <a href=\"https://en.wikipedia.org/wiki/System_Integrity_Protection\" rel=\"noreferrer\">System Integrity Protection</a> which restricts writing to /usr/lib /usr/bin and other sensitive directories (even to root or sudo user) that are used by the installation of Perl bundled with the Operating System. This can cause issues when it comes to installing new modules and also if trying to install XS modules ( those linked to external C libraries ).</p>\n\n<p>For this reason you should not consider the default Perl installation as a working development environment, especially if you are installing custom modules. </p>\n\n<p>Check out <a href=\"https://www.perlmonks.org/?node_id=955807\" rel=\"noreferrer\">this thread on PM</a> and others. I had since El-Capitan managed to solve this before by manually building from tarball and adding a few params or environment variables to set the paths believing that it would be best to retain use of the system Perl but this is not the way to go. This makes your environment difficult to build but also brittle and sensitive to OS updates that may either break things in many different ways.</p>\n\n<p>The best practice seems to be starting with a Perl using <code>brew install perl</code> and work in this environment, remembering to setup your bash_profile as directed by the installer. </p>\n\n<p>Also worth remembering to do a <code>brew link perl</code>. If you receive warnings about this clobbering what looks like system Perl libraries don't worry - these are likely modules that were installed by you over the top and it will cause you less trouble to link over these. If you have concerns, make a note of which module installs will be cleared and re-install them once your environment is configured ( ie your module installer approach is configured using <code>cpanm</code> or sticking with the old <code>perl -MCPAN -e shell</code> etc)</p>\n\n<p>This new Perl setup from brew eliminates the need to continuing running sudo which adds another layer of things that can go wrong as environment variables don't follow through and permission conflicts arise etc. </p>\n\n<p>Finally to simplify package/module installation I suggest doing a <code>brew install cpanminus</code>. If you had previously already installed this, you can ensure the paths etc are configured by doing a <code>brew reinstall cpanminus</code></p>\n\n<p>If you want to take it another step further then you can install perlbrew as well which will give you the ability to run multiple versions of Perl as your user and configure these with their own libs and modules which can be very useful particularly if aligning with your production environment for testing etc.</p>\n\n<p>One problem you may face if moving from system Perl to this kind of approach is needing to deal with any hangovers from installing things with sudo. It wis worth taking a little time to get all this set up right though and your issues going forward will be greatly reduced and you won't be left with that nagging feeling that you don't want to change anything for fear of it all breaking.</p>\n\n<p>I have also come across a <a href=\"http://blogs.perl.org/users/atoomic/2018/10/using-perlbrew-after-macos-mojave-1014-update.html\" rel=\"noreferrer\">Perl Blog Article that suggests a fix for XS issues with perlbrew on Mojave</a></p>\n\n<p>This <a href=\"https://gist.github.com/pscott-au/f8c14ef0d70fc2872483691f24bae171\" rel=\"noreferrer\">Gist</a> described updating your cpan shell install root though this shouldn't be necessary unless your cpan is stuck in an old config after taking steps above.</p>\n\n<p>I've also raised this as a new issue on <a href=\"https://www.perlmonks.org/?node_id=1224716\" rel=\"noreferrer\">PerlMonks</a></p>\n"}, {"comments": [{"owner": {"reputation": 150, "user_id": 9850416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHtZ9.png?s=128&g=1", "display_name": "Yehor Levchenko", "link": "https://stackoverflow.com/users/9850416/yehor-levchenko"}, "edited": false, "score": 0, "creation_date": 1553371056, "post_id": 55305353, "comment_id": 97362484, "body": "Yeah, thanks for your input. My problem was solved after complete deletion and clean, <i>proper</i> re-installation. Seems like i messed up something."}, {"owner": {"reputation": 1079, "user_id": 1037567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e9890a50f2152b06275956c664f67ff?s=128&d=identicon&r=PG", "display_name": "godzillante", "link": "https://stackoverflow.com/users/1037567/godzillante"}, "edited": false, "score": 0, "creation_date": 1562747408, "post_id": 55305353, "comment_id": 100469972, "body": "executing /Library/Developer/CommandLineTools/Packages/macOS_SDK_heade&zwnj;&#8203;rs_for_macOS_10.14.p&zwnj;&#8203;kg fixed that for me even if I had Xcode10 and command line tools already installed.  Thanks!"}], "tags": [], "owner": {"reputation": 426, "user_id": 571150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5421e55c3b5c75f8c6acbff1e7e5a37?s=128&d=identicon&r=PG", "display_name": "maarten", "link": "https://stackoverflow.com/users/571150/maarten"}, "is_accepted": false, "score": 10, "last_activity_date": 1575527533, "last_edit_date": 1575527533, "creation_date": 1553277420, "answer_id": 55305353, "question_id": 52682304, "link": "https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules/55305353#55305353", "title": "&quot;Fatal error: &#39;EXTERN.h&#39; file not found&quot; while installing Perl modules", "body": "<p>After reading <a href=\"https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes#3035624\" rel=\"nofollow noreferrer\">https://developer.apple.com/documentation/xcode_release_notes/xcode_10_release_notes#3035624</a> and installing the Additional  headers via</p>\n\n<pre><code>sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /\n</code></pre>\n\n<p>I successfully compiled without the missing 'EXTERN.h' error</p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 7203861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/195e424f743cc19a615e17d26a87e5dc?s=128&d=identicon&r=PG&f=1", "display_name": "HRitter", "link": "https://stackoverflow.com/users/7203861/hritter"}, "is_accepted": false, "score": 4, "last_activity_date": 1580013092, "last_edit_date": 1580013092, "creation_date": 1580011154, "answer_id": 59915448, "question_id": 52682304, "link": "https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules/59915448#59915448", "title": "&quot;Fatal error: &#39;EXTERN.h&#39; file not found&quot; while installing Perl modules", "body": "<p>In order to follow the common advice I also tried with <strong>Perlbrew</strong> to install a dedicated  development version of Perl. Especially with the advice in mind <strong>First, do <em>not</em> use the system Perl on MacOS. The installed version is for Apple, not for you</strong> (see the discussion here: <a href=\"https://www.perlmonks.org/?node_id=1224727\" rel=\"nofollow noreferrer\">https://www.perlmonks.org/?node_id=1224727</a>).</p>\n\n<p>Unfortunately, the following error occurred:</p>\n\n<pre><code>Test Summary Report\n-------------------\nporting/libperl.t                                                (Wstat: 65280 Tests: 35 Failed: 0)\n  Non-zero exit status: 255\n  Parse errors: No plan found in TAP output\nFiles=2653, Tests=1217766, 708 wallclock secs (52.74 usr  9.40 sys + 395.38 cusr 49.90 csys = 507.42 CPU)\nResult: FAIL\nmake: *** [test_harness] Error 1\n##### Brew Failed #####\n</code></pre>\n\n<p>Therefore, I decided to install it the following way (and not following the advice due to the error).</p>\n\n<p>Even after having the above mentioned macOS SDK headers already installed on Catalina (macOS 10.15.2) it didn't work for me. I faced the issue during the installation of the Perl module <em>Mac-SystemDirectory-0.13</em>. The following steps (by identifying the missing file in hope of having a more generic approach for more or less equivalent issues) did the trick:</p>\n\n<ol>\n<li><p>Locate the header file (in this case <strong>EXTERN.h</strong>)</p>\n\n<pre><code>sudo find /Library -type f -name EXTERN.h\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE/EXTERN.h\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/System/Library/Perl/5.28/darwin-thread-multi-2level/CORE/EXTERN.h\n/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE/EXTERN.h\n</code></pre></li>\n<li><p>Ensure the installed Perl version (here <strong>5.18</strong>) match the header file:</p>\n\n<pre><code>perl -v | grep version \nThis is perl 5, version 18, subversion 4 (v5.18.4) built for darwin-thread-multi-2level\n</code></pre></li>\n<li><p>Export the path for the C-Compiler (note MacOSX10.15.sdk for Catalina and Perl Version 5.18)</p>\n\n<pre><code>export CPATH=/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE\n</code></pre></li>\n<li><p>Invoke the Makefile.PL with perl</p>\n\n<pre><code>perl Makefile.PL\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 2236869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g0Uq2.png?s=128&g=1", "display_name": "DabeDotCom", "link": "https://stackoverflow.com/users/2236869/dabedotcom"}, "is_accepted": false, "score": 1, "last_activity_date": 1612314993, "creation_date": 1612314993, "answer_id": 66019903, "question_id": 52682304, "link": "https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules/66019903#66019903", "title": "&quot;Fatal error: &#39;EXTERN.h&#39; file not found&quot; while installing Perl modules", "body": "<p>BTW \u2014\u00a0For anybody who's still struggling with this, my workaround was:</p>\n<pre><code>bash% module=&quot;Sub::Util&quot;    # For example\n\nbash% cpanm --configure-args=&quot;INC=-I/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/System/Library/Perl/5.18/darwin-thread-multi-2level/CORE&quot; &quot;$module&quot;\n</code></pre>\n"}], "owner": {"reputation": 150, "user_id": 9850416, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MHtZ9.png?s=128&g=1", "display_name": "Yehor Levchenko", "link": "https://stackoverflow.com/users/9850416/yehor-levchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7953, "favorite_count": 2, "answer_count": 4, "score": 13, "last_activity_date": 1612314993, "creation_date": 1538851792, "last_edit_date": 1597969414, "question_id": 52682304, "link": "https://stackoverflow.com/questions/52682304/fatal-error-extern-h-file-not-found-while-installing-perl-modules", "title": "&quot;Fatal error: &#39;EXTERN.h&#39; file not found&quot; while installing Perl modules", "body": "<p>While trying to install Perl modules like JSON::XS or YAML::XS, i receive the same error:</p>\n<blockquote>\n<p>XS.xs:1:10: fatal error: 'EXTERN.h' file not found</p>\n</blockquote>\n<p>I use MacBook, xCode is up to date, everything else that could help is up to date too.</p>\n"}, {"tags": ["perl", "conda"], "comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538780358, "post_id": 52673949, "comment_id": 92277986, "body": "ExtUtils::MakeMaker will rewrite the shebang of each script it installs to the perl interpreter you run Makefile.PL with. But note there is a <a href=\"https://github.com/Perl-Toolchain-Gang/ExtUtils-MakeMaker/issues/58\" rel=\"nofollow noreferrer\">bug</a> where it won&#39;t do this if the shebang is <code>#!&#47;usr&#47;bin&#47;env perl</code> (which is otherwise recommended for non-installed scripts). I don&#39;t know anything about conda and can&#39;t quite figure out what this build process has to do with the location of the Perl interpreter for the shebang."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538845863, "post_id": 52673949, "comment_id": 92291184, "body": "Cona creates an environment for each build that can be loaded/unloaded (similar to the module command). Perl is installed in the environment too so as to be independent from other environments. Thus, I need to know where that perl interpreter is going to go so that the shebang is correct. Even if I put an env on the shebang, to be conda-correct, I would have to use the env command that&#39;s in the independent environment for the install."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538847691, "post_id": 52673949, "comment_id": 92291614, "body": "Can you run the installation with that perl interpreter after it&#39;s in the correct location? This would rewrite the shebang correctly."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538874306, "post_id": 52673949, "comment_id": 92297006, "body": "I think you\u2019re right. I had thought that any command (e.g. env) would have to be specific to the environment, but someone else on bioconda recommended the same thing. So I\u2019ll use it. I\u2019m sure it will work. This is my first Conda recipe. I just wanted to make sure I was doing it correctly."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539032266, "post_id": 52673949, "comment_id": 92346203, "body": "So using <code>#!&#47;usr&#47;bin&#47;env perl</code> at the top of the script allows the script to run without the interpreter error, but the next error is that it can&#39;t find the module in @INC that&#39;s also installed as a part of the package..."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539032965, "post_id": 52673949, "comment_id": 92346466, "body": "As mentioned <code>#!&#47;usr&#47;bin&#47;env perl</code> will not be rewritten as part of the installation process. This also means that after installation, it will use whatever perl is first in the user&#39;s PATH, not necessarily the one it (+dependencies) was installed to."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539033681, "post_id": 52673949, "comment_id": 92346697, "body": "Right... I understand that.  The module is installed with the script though.  It comes with it.  Conda is moving things around though (if I understand it correctly).  Outside of conda, that&#39;s not a problem.  <code>make install</code> puts the module somewhere in @INC.  But in conda, I can tell <code>perl Makefile.PL</code> where to put the module with things like <code>INSTALLDIRS=site INSTALL_BASE=$PREFIX</code>, but the entire <code>@INC</code> array in the error doesn&#39;t include the path where it put the module. The &quot;PREFIX&quot; part is different. Seems like the same deal as where the script went vs the shebang..."}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539033971, "post_id": 52673949, "comment_id": 92346802, "body": "Conda tells me where it&#39;s putting the module: <code>Installing &#47;opt&#47;conda&#47;conda-bld&#47;vcfsamplecompare_1539033227804&#47;_build_e&zwnj;&#8203;nv&#47;lib&#47;site_perl&#47;5.2&zwnj;&#8203;6.2&#47;CommandLineInter&zwnj;&#8203;face.pm</code>, but the @INC in the test from <code>meta.yaml</code> is different: <code>@INC contains: &#47;opt&#47;conda&#47;conda-bld&#47;vcfsamplecompare_1539033227804&#47;_test_en&zwnj;&#8203;v_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_placehol&zwnj;&#8203;d_placehold_pla&#47;lib&#47;&zwnj;&#8203;site_perl&#47;5.26.2&#47;x86&zwnj;&#8203;_64-linux-thread-mul&zwnj;&#8203;ti &#47;opt&#47;conda&#47;conda-bld&#47;vcfsamplecompare_1539033227804&#47;_...</code>"}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539034411, "post_id": 52673949, "comment_id": 92346975, "body": "Conda is installing perl as a part of the conda recipe. It should (ostensibly) be the first perl in the path, so I don&#39;t know why the module is ending up installed elsewhere... As I understand it, @INC is populated at the time perl is compiled and it&#39;s obviously being created during the vcfsamplecompare installation because the paths in @INC include the package name I&#39;m installing. Conda told me that it installed the module - but why is <code>_build_env</code> different from the ridiculously long <code>_test_env_placehold_...</code> component of the path?"}, {"owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "reply_to_user": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1539109449, "post_id": 52673949, "comment_id": 92379547, "body": "A colleague of mine figured it out. I had included perl under both the build &amp; host sections under requirements in the meta.yaml file. It was not clear to me from the doc that this wasn&#39;t what you should do. In fact, I had used the meta.yaml file from another recipe as a template, so when it was recommended I should have perl under the &#39;host&#39; section, I added it, but it didn&#39;t occur to me that it should then be removed from &#39;build&#39;. After all, I was calling perl in the build script &amp; the doc says to have stuff there you need for the build... Such an easy solution, but invisible to a noob."}], "answers": [{"tags": [], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "is_accepted": true, "score": 1, "last_activity_date": 1539190363, "creation_date": 1539190363, "answer_id": 52745209, "question_id": 52673949, "link": "https://stackoverflow.com/questions/52673949/how-to-set-each-perl-scripts-perl-path-for-a-conda-build/52745209#52745209", "title": "How to set each perl script&#39;s perl path for a conda build", "body": "<p>As I had suspected, you shouldn't have to provide <code>INSTALL_BASE=${PREFIX}</code> or even <code>PREFIX=${PREFIX}</code> to Makefile.PL in order for it to work.  The fact that the script being found on the PATH has the wrong perl interpreter path suggests that there may be some compiled version of perl that is available when running the script which is different from the one that was used when building the script.  This is consistent with the issue with the different paths in <code>@INC</code>.</p>\n\n<p>It turned out that the <code>meta.yaml</code> file had perl in 2 places: under <code>requirements:build:</code> and <code>requirements:host:</code> and thus 2 different versions of perl were in use during the build versus running on the host.  By removing the one under <code>requirements:build:</code> in the meta.yaml file, there's only 1 version of perl and the conflict is resolved.  All that's needed in the build.sh file is:</p>\n\n<pre><code>perl Makefile.PL INSTALLDIRS=site\nmake\nmake install\n</code></pre>\n\n<p>Just be sure that the meta.yaml has:</p>\n\n<pre><code>requirements:\n  build:\n    - make\n  host:\n    - perl\n  run:\n    - perl\n</code></pre>\n\n<p>It may be tempting to put <code>perl</code> under the build section because you're using a call to perl in the build.sh script, but it's there on the host when the build is done.</p>\n"}], "owner": {"reputation": 618, "user_id": 2057516, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sEoLL.jpg?s=128&g=1", "display_name": "hepcat72", "link": "https://stackoverflow.com/users/2057516/hepcat72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 632, "favorite_count": 0, "accepted_answer_id": 52745209, "answer_count": 1, "score": 1, "last_activity_date": 1539190363, "creation_date": 1538778234, "question_id": 52673949, "link": "https://stackoverflow.com/questions/52673949/how-to-set-each-perl-scripts-perl-path-for-a-conda-build", "title": "How to set each perl script&#39;s perl path for a conda build", "body": "<p>I've been banging my head against this for awhile now and I need some help.  I have a nice little perl package I developed.  Works great.  It has a simple install procedure:</p>\n\n<pre><code>perl makefile.PL\nmake\nmake install\n</code></pre>\n\n<p>I've been trying to write my first ever conda recipe so that I can eventually use it to create a package on galaxy that automatically installs via bioconda.</p>\n\n<p>The problem is that the procedure above isn't enough for a conda build.sh script and I don't know how to make the shebang line of the installed perl script have the correct perl path.  I first tried this:</p>\n\n<pre><code>perl Makefile.PL INSTALL_BASE=${PREFIX} INSTALLDIRS=site\nmake\nmake install\n</code></pre>\n\n<p>based on stuff I've seen in other recipes, but this results in an error:</p>\n\n<pre><code>/Users/rleach/local/miniconda3/conda-bld/vcfsamplecompare_1538773699290/test_tmp/run_test.sh: /Users/rleach/local/miniconda3/conda-bld/vcfsamplecompare_1538773699290/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla/bin/vcfSampleCompare.pl: /Users/rleach/local/miniconda3/conda-bld/vcfsamplecompare_1538773699290/_build: bad interpreter: No such file or directory\nTests failed for vcfsamplecompare-v2.005-pl526_0.tar.bz2 - moving package to /Users/rleach/local/miniconda3/conda-bld/broken\n</code></pre>\n\n<p>I noticed in the build output a note like this:</p>\n\n<pre><code>Renaming build prefix directory,  /Users/rleach/local/miniconda3/conda-bld/vcfsamplecompare_1538773699290/_build_env  to  /Users/rleach/local/miniconda3/conda-bld/vcfsamplecompare_1538773699290/build_prefix_moved_vcfsamplecompare-v2.005-pl526_0_osx-64\n</code></pre>\n\n<p>So on a hunch, I added this after my <code>make install</code>:</p>\n\n<pre><code>sed -i.bak 's|_build_env|build_prefix_moved_vcfsamplecompare-v2.005-pl526_0_osx-64|g' ${PREFIX}/bin/vcfSampleCompare.pl\n</code></pre>\n\n<p>And that worked!  (Anyway, it got me past the first error - now it complains about the module it was also supposed to install not being in @INC.  - one thing at a time though...)</p>\n\n<p>The problem is, I don't know where to find the string \"build_prefix_moved_vcfsamplecompare-v2.005-pl526_0_osx-64\".  It's obviously going to be different on different systems.  If I assume that \"build_prefix_moved_\" is static, I know which environment variables will give me \"vcfsamplecompare\", \"v2.005\", and \"64\" (maybe even \"osx\") - but I cannot find anything that has the value \"pl526_0\", so I don't seem to have the ability to fully build the string on my own...</p>\n\n<p>So what's the conventional wisdom here?  How should I be setting the perl interpreter path at the top of the scripts in the package?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 342, "user_id": 6242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f23e14013b897e15a7852bec2ec762?s=128&d=identicon&r=PG&f=1", "display_name": "jwal", "link": "https://stackoverflow.com/users/6242321/jwal"}, "edited": false, "score": 0, "creation_date": 1538769833, "post_id": 52672370, "comment_id": 92274932, "body": "looks like name(b) is a regex and is matching /b/ in your expected list."}, {"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "reply_to_user": {"reputation": 342, "user_id": 6242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f23e14013b897e15a7852bec2ec762?s=128&d=identicon&r=PG&f=1", "display_name": "jwal", "link": "https://stackoverflow.com/users/6242321/jwal"}, "edited": false, "score": 0, "creation_date": 1538770549, "post_id": 52672370, "comment_id": 92275197, "body": "@jwal Yes it looks like, but if you change the name of <code>dir&#47;a&#47;b</code> to <code>dir&#47;a&#47;bb</code> you will get matches from <code>dir&#47;a&#47;bb</code> also. So <code>name(&#39;b&#39;)</code> is not discarding <code>bb</code> in the first alternative. Which indicates that <code>name(&#39;b&#39;)</code> is not a regex, but <code>name(qr&#47;b&#47;)</code> would be a regex according to the documentation."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1538789338, "last_edit_date": 1538789338, "creation_date": 1538774569, "answer_id": 52673434, "question_id": 52672370, "link": "https://stackoverflow.com/questions/52672370/how-to-use-mindepth-and-maxdepth-in-or-alternative-in-filefindrule/52673434#52673434", "title": "How to use mindepth and maxdepth in `or` alternative in File::Find::Rule?", "body": "<p>Just like with the <code>find</code> command-line tool, <code>maxdepth</code> doesn't limit where a match can occur; it limits the actual traversal.</p>\n\n<blockquote>\n  <p><code>maxdepth( $level )</code></p>\n  \n  <p>Descend at most <code>$level</code> (a non-negative integer) levels of directories below the starting point.</p>\n</blockquote>\n\n<p>Just like the <code>find</code> command-line tool, <code>mindepth</code> prevents all tests from being performed before a certain depth.</p>\n\n<blockquote>\n  <p><code>mindepth( $level )</code></p>\n  \n  <p>Do not apply any tests at levels less than <code>$level</code> (a non-negative integer).</p>\n</blockquote>\n\n<p>Given what they do, they affect the entire search. As such, it's no surprise the <code>mindepth</code> and <code>maxdepth</code> from the outer rule object is the one used and the others are ignored.<sup>[1]</sup></p>\n\n<hr>\n\n<p>The same solution that applies to the <code>find</code> command-line tool can be used here.</p>\n\n<p><code>find</code>:</p>\n\n<pre><code>$ find dir -wholename dir/b -prune -o -name '*.txt' -print\ndir/a/b/c.txt\ndir/a/b/d.txt\ndir/a/c/q.txt\ndir/q.txt\n</code></pre>\n\n<p>File::Find::Rule:</p>\n\n<pre><code>$ perl -MFile::Find::Rule -e'\n   my ($dir) = @ARGV;\n   CORE::say for\n      File::Find::Rule\n         -&gt;or(\n            File::Find::Rule-&gt;exec(sub { $_[2] eq \"$dir/b\" })-&gt;prune-&gt;discard,\n            File::Find::Rule-&gt;name(\"*.txt\"),\n         )\n         -&gt;in($dir);\n' dir\ndir/q.txt\ndir/a/b/c.txt\ndir/a/b/d.txt\ndir/a/c/q.txt\n</code></pre>\n\n<p>Another approach would be to use File::Find::Rule to build a list of directories to search, then search those directories with another use of File::Find::Rule. (The Perl equivalent of <code>find ... -print0 | xargs -0 -I{} find {} ...</code>.)</p>\n\n<hr>\n\n<ol>\n<li><p>The <code>find</code> command-line utility handles the misplaced inputs differently. </p>\n\n<pre><code>$ find dir -type d -mindepth 1 -maxdepth 1 -name b -prune -o -name '*.txt' -print\nfind: warning: you have specified the -mindepth option after a non-option argument (, but options are not positional (-mindepth affects tests specified before it as well as those specified after it).  Please specify options before other arguments.\n\nfind: warning: you have specified the -maxdepth option after a non-option argument (, but options are not positional (-maxdepth affects tests specified before it as well as those specified after it).  Please specify options before other arguments.\n\ndir/q.txt\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 52673434, "answer_count": 1, "score": 4, "last_activity_date": 1538789338, "creation_date": 1538768678, "last_edit_date": 1538772441, "question_id": 52672370, "link": "https://stackoverflow.com/questions/52672370/how-to-use-mindepth-and-maxdepth-in-or-alternative-in-filefindrule", "title": "How to use mindepth and maxdepth in `or` alternative in File::Find::Rule?", "body": "<p>I have the following folder structure (as a minimal example):</p>\n\n<pre><code>dir\n\u251c\u2500\u2500 a\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 b\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 c.txt\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 d.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 c\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 q.txt\n\u251c\u2500\u2500 b\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bb.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 d\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 dd.txt\n\u2514\u2500\u2500 q.txt\n</code></pre>\n\n<p>I want to find all <code>.txt</code> files but exclude everything in <code>dir/b</code> from the search using <a href=\"https://metacpan.org/pod/File::Find::Rule\" rel=\"nofollow noreferrer\"><code>File::Find::Rule</code></a> (I know I could do this easily using <a href=\"https://metacpan.org/pod/File::Find\" rel=\"nofollow noreferrer\"><code>File::Find</code></a> but that would require a substantial refactoring of my code).</p>\n\n<p>I tried the following:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse File::Find::Rule;\n\nmy $dir = 'dir';\nmy @files = File::Find::Rule-&gt;or(\n    File::Find::Rule-&gt;directory-&gt;mindepth(1)-&gt;maxdepth(1)\n                    -&gt;name( 'b' )-&gt;prune-&gt;discard,\n    File::Find::Rule-&gt;name('*.txt'),\n)-&gt;in( $dir );\nsay for @files;\n</code></pre>\n\n<p><strong>Output</strong>:</p>\n\n<pre><code>dir/q.txt\ndir/a/c/q.txt\n</code></pre>\n\n<p><strong>Expected output</strong>:</p>\n\n<pre><code>dir/q.txt\ndir/a/b/d.txt\ndir/a/b/c.txt\ndir/a/c/q.txt\n</code></pre>\n\n<p>Seems like <code>maxdepth()</code> and <code>mindepth()</code> are not working inside the <code>or()</code> function.</p>\n"}, {"tags": ["perl", "stdout", "stdin"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538777885, "post_id": 52672031, "comment_id": 92277444, "body": "What are your clients going to be (and how will they connect)? Terminal, or software (and what tools will you use to write them)?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538808870, "post_id": 52672031, "comment_id": 92282035, "body": "The clients just write to server (print if connected via <code>telnet</code>, or print to socket obtained when connecting via <code>IO::Socket::INET</code>) and that comes on the server&#39;s <code>STDIN</code>. There is nothing to do for that, just write from a client.  Try: copy paste the few lines from synopsis for the server, start it, and then connect to it with <code>telnet</code> (or copy paste code for a basic client from somewhere using <code>IO::Socket::INET</code>), and print. Note that for asynchronous handling you need to use a &#39;personality&#39; to set up the server."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538809083, "post_id": 52672031, "comment_id": 92282087, "body": "What do you want those (&quot;ideal-world&quot; :) filehandles for?  That&#39;s all there."}, {"owner": {"reputation": 1853, "user_id": 3191124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5e371ea00ef56e2b0aa0897dac2bf6?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Rapier", "link": "https://stackoverflow.com/users/3191124/chris-rapier"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539023836, "post_id": 52672031, "comment_id": 92342724, "body": "This is an interface the to the ExaBGP service. ExaBGP can be configured to accept commands via an external handler that write these commands to STDOUT. A few people have developed a RESTful API but the level of security with this is somewhat lacking. As such, I&#39;m rolling my own that incorporates PFS via signed Diffie Hellman keys."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1539031962, "post_id": 52672031, "comment_id": 92346082, "body": "Sounds great. But it&#39;s not clear (to me) how that brings up a problem with the server&#39;s <code>STDIN</code>? It appears clear that you know full well how all this works in principle, so the question is probably far more involved. (Your server will be an intermediary that forms input for the service, I guess with its own input from its clients, and prints it to the service?) Perhaps provide more detail (or add more specific terms to the title or tags to the question, starting with &quot;<i>ExaBGP</i>&quot;)?"}], "answers": [{"comments": [{"owner": {"reputation": 1853, "user_id": 3191124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5e371ea00ef56e2b0aa0897dac2bf6?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Rapier", "link": "https://stackoverflow.com/users/3191124/chris-rapier"}, "edited": false, "score": 0, "creation_date": 1539024134, "post_id": 52673740, "comment_id": 92342845, "body": "I thought about this using public keys. However, this is going to be an interface to ExaBGP and I&#39;m not sure if there is a good way turn sshd into a valid interface for ExaBGP (largely because of how sshd forks a child). RESTful APIs could work but they don&#39;t really have the level of security I&#39;d like for critical infrastructure that could bring down a regional network if it&#39;s compromised in anyway. I&#39;m more than open to suggestions though."}], "tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1538776647, "creation_date": 1538776647, "answer_id": 52673740, "question_id": 52672031, "link": "https://stackoverflow.com/questions/52672031/handling-stdin-stdout-with-perls-netserver/52673740#52673740", "title": "Handling STDIN/STDOUT with perl&#39;s Net::Server", "body": "<p>Have you thought about just using <code>ssh</code>? With ssh your can run commands on a remote computer (server) which redirects your stdin to that command, and the stdout from that command to yours. Simple demo:</p>\n\n<pre><code>$ echo \"hello, world\" | md5sum\n22c3683b094136c3398391ae71b20f04  -\n\n$ echo \"hello, world\" | ssh myserver.com md5sum\n22c3683b094136c3398391ae71b20f04  -\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>$ echo \"hello, world\" | ssh user@myserver.com \"/path/any/command --with --args x y z\"\n</code></pre>\n\n<p>(You can set up ssh for automatic login with ip check by <code>ssh-keygen</code> and <code>~/.ssh/authorized_keys</code> wont say more about that here)</p>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 3191124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5e371ea00ef56e2b0aa0897dac2bf6?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Rapier", "link": "https://stackoverflow.com/users/3191124/chris-rapier"}, "is_accepted": true, "score": 0, "last_activity_date": 1539289379, "creation_date": 1539289379, "answer_id": 52768364, "question_id": 52672031, "link": "https://stackoverflow.com/questions/52672031/handling-stdin-stdout-with-perls-netserver/52768364#52768364", "title": "Handling STDIN/STDOUT with perl&#39;s Net::Server", "body": "<p>Turns out I could do this by overloading post_accept to change how STDIN/STDOUT were being used. I was able to create two distinct filehandles so I could refer to the client IN/OUT without breaking the servers IO. That said, Net::Server kept getting in the way of what IO wanted to do so I abandoned it and just rolled my own forking server. Ended up being easier overall. </p>\n"}], "owner": {"reputation": 1853, "user_id": 3191124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5e371ea00ef56e2b0aa0897dac2bf6?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Rapier", "link": "https://stackoverflow.com/users/3191124/chris-rapier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "accepted_answer_id": 52768364, "answer_count": 2, "score": 1, "last_activity_date": 1539289379, "creation_date": 1538767066, "question_id": 52672031, "link": "https://stackoverflow.com/questions/52672031/handling-stdin-stdout-with-perls-netserver", "title": "Handling STDIN/STDOUT with perl&#39;s Net::Server", "body": "<p>I am trying to build a perl based server that will accept incoming requests and, based on that request, read/write data to server's STDIN/OUT. So I need to accept data from the client STDIN, write it to the server's STDIN (where it is handled by another process), capture the results of that request from the server's STDOUT and then ship it to the client. </p>\n\n<p>I was hoping to build this off of Net::Server but I cannot, for the life of me, figure out how to direct data specifically to the server's STDIN. In my ideal world I'd have a set of file handles like CLISTDIN, CLISTDOUT, SRVSTDIN, and SRVSTDOUT that I could discretely address and manage. I'm just at a loss of how to go about it in Net::Server. </p>\n\n<p>I don't have to use Net::Server so other suggestions are welcome. Net::Server just has a number of other features I would like to use. </p>\n\n<p>Thanks for any insight. </p>\n"}, {"tags": ["perl", "websocket"], "comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1538749313, "post_id": 52666354, "comment_id": 92265213, "body": "I&#39;m not sure if I really understand your problem. First, since there does not seem to be any <code>exec</code> involved here attempts to do <code>close-on-exec</code> and similar make no sense. Then: a simple TCP socket will not be closed if the socket is on both parent and child and the child just exits. A SSL socket is different since the user space SSL state gets out of sync if the same socket is used in parent and child. I recommend that you actually create a <b>minimal</b> program which shows the <b>full</b> problem you face and where others can <b>reproduce</b> it. The currently shown code does not help much."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 1, "creation_date": 1538750321, "post_id": 52666354, "comment_id": 92265822, "body": "Part of the problem might be some destructor running at exit, in which case <code>POSIX::_exit</code> could help. But the SSL state is probably going to kill you anyway."}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1538750897, "post_id": 52666354, "comment_id": 92266194, "body": "ok, I&#39;ll write up a small client/server that exactly illustrates the problem."}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1538754920, "post_id": 52666354, "comment_id": 92268471, "body": "I think @WumpusQ.Wumbley is on the right track as far as SSL state. Reworked and re-posted the Q"}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1538757813, "post_id": 52666354, "comment_id": 92269880, "body": "After working on the reduced test case and realizing the problem is in SSL+fork, it looks like there are many posts on the same subject. I&#39;ll look around for a workable solution where I can do what I need and share data between the parent and child (Looks like threads doesn&#39;t share data by default...)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1538761963, "post_id": 52666354, "comment_id": 92271630, "body": "I&#39;ve recently seen another question about TLS and fork, but I can&#39;t find it now. The main answer is to put one process in charge of all the TLS sockets and have all the other processes feed it with pipes. But an alternative Linux-only answer is to use <a href=\"https://github.com/torvalds/linux/blob/master/Documentation/networking/tls.txt\" rel=\"nofollow noreferrer\">kernel-mode TLS</a>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1538767535, "post_id": 52666354, "comment_id": 92274017, "body": "I would keep the socket in the main process and run the child code in a &quot;real&quot; subprocess and forward the output in the main process. Unfortunately, all the AnyEvent::(Sub)Process modules themselves fork(), so you will need to roll your own there..."}], "answers": [{"comments": [{"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1538772732, "post_id": 52672524, "comment_id": 92275991, "body": "Yup, what a pain. I really thought this would be simple. Thanks for asking me to work on a reduced test case - it got me to what the core problem was. Is there a reference I can read (not RFC, something easier) that tells me what really is the problem with SSL states that makes this hard to do?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 1, "creation_date": 1538773241, "post_id": 52672524, "comment_id": 92276173, "body": "@user1361529: it has nothing to do with an RFC. It is simply that most implementations of SSL are done as user-space library and thus the SSL state (i.e. encryption keys, sequence counter...) is kept in user space process memory. And it is a property of fork that the process memory gets copied and thus parent and child end up with their own  versions of the SSL state which get independently updated. But there can only be a single valid SSL state for a specific SSL connection, i.e. either in parent or in child."}, {"owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "edited": false, "score": 0, "creation_date": 1538773428, "post_id": 52672524, "comment_id": 92276236, "body": "Ah perfect explanation. Thanks."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1538769705, "last_edit_date": 1538769705, "creation_date": 1538769350, "answer_id": 52672524, "question_id": 52666354, "link": "https://stackoverflow.com/questions/52666354/perl-forking-an-wss-connection-results-in-closure-of-the-socket-when-child-exit/52672524#52672524", "title": "Perl: forking an WSS connection results in closure of the socket when child exits (doesn&#39;t happen with WS)", "body": "<blockquote>\n  <p>Therefore, my conclusion is SSL+fork == problem.</p>\n</blockquote>\n\n<p>Yes, the problem is first doing the SSL handshake and then forking. This way a user space SSL state will be created in the parent and with the fork duplicated in the child and these two SSL states get out of sync on the first SSL data send or received. This means it is not possible to deal with the same SSL socket from two processes.</p>\n\n<p>If it is really necessary that both parent and child process use the same SSL connection to the peer than the child must use the parent as a \"proxy\", i.e. the child does not communicate directly with the SSL peer but the child needs to communicate in plain with the parent (for example by using a socketpair) which then can forward the communication to the SSL peer. This way the SSL state is only maintained in the parent process.</p>\n\n<p>But given that only a single message should be handled at a time for a single connection it might be possible instead to not fork for a single tick but fork a child for each connection which handles then all messages in this connection. In this case the SSL handshake can be done in full in the child by listening in the parent to a TCP and not SSL socket, forking <code>on_connect</code> and then upgrading the connection to SSL in the client using <code>IO::Socket::start_SSL</code>. This would also have the advantage that the blocking SSL handshake (which involves several round trips and thus takes some time) would be done in the forked child and would not make the parent block.</p>\n"}], "owner": {"reputation": 2347, "user_id": 1361529, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/820E7.jpg?s=128&g=1", "display_name": "user1361529", "link": "https://stackoverflow.com/users/1361529/user1361529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 52672524, "answer_count": 1, "score": 1, "last_activity_date": 1538769705, "creation_date": 1538744893, "last_edit_date": 1538767738, "question_id": 52666354, "link": "https://stackoverflow.com/questions/52666354/perl-forking-an-wss-connection-results-in-closure-of-the-socket-when-child-exit", "title": "Perl: forking an WSS connection results in closure of the socket when child exits (doesn&#39;t happen with WS)", "body": "<p>(Edited to provide a reduced test case as per comments below)</p>\n\n<p>I'm facing an odd situation, where if I fork a \"WSS\" connection to send a message, the socket gets closed when the child exits. However, when I fork to process a \"WS\" connection, the connection remains open when the child exits.</p>\n\n<ul>\n<li>Server Details: Perl 5.26, Ubuntu 16 </li>\n<li>Client Details: Perl 5.18, OSX</li>\n</ul>\n\n<p>Server code:</p>\n\n<pre><code>use Net::WebSocket::Server;\nuse IO::Socket::SSL;\n\n$SIG{CHLD}='IGNORE';\n\nmy $enable_ssl = 1; # If you make this one the problem reveals itself\n\n# you need to point this to your own certs\nmy $ssl_cert_file =  \"/etc/letsencrypt/live/mydomain/fullchain.pem\";\nmy $ssl_key_file =  \"/etc/letsencrypt/live/mydomain/privkey.pem\";\n\n# To show the problem, all I'm doing is I'm forking and sending current time\nsub process {\n    my $serv = shift;\n    my $pid = fork();\n    if ($pid == 0 ) {\n        print (\"fork start\\n\");\n        $_-&gt;send_utf8(time) for $serv-&gt;connections;\n        print (\"fork end\\n\");\n        exit 0;\n    }\n}\n\nmy $ssl_server;\n\nif ($ssl_enable) {\n$ssl_server = IO::Socket::SSL-&gt;new(\n              Listen        =&gt; 10,\n              LocalPort     =&gt; 9000,\n              Proto         =&gt; 'tcp',\n              Reuse     =&gt; 1,\n              ReuseAddr     =&gt; 1,\n              SSL_cert_file =&gt; $ssl_cert_file,\n              SSL_key_file  =&gt; $ssl_key_file\n            );\n }\n\nNet::WebSocket::Server-&gt;new(\n    listen =&gt; $enable_ssl? $ssl_server: 9000,\n    tick_period=&gt;5,\n    on_tick=&gt; sub {\n        my ($serv) = @_;\n        process($serv);\n        #$_-&gt;send_utf8(time) for $serv-&gt;connections;\n    },\n )-&gt;start;\n</code></pre>\n\n<p>Here is the client code:</p>\n\n<pre><code>my $client = AnyEvent::WebSocket::Client-&gt;new;\n\n# replace with your server\n$client-&gt;connect(\"wss://myserver:9000\")-&gt;cb(sub {\n  our $connection = eval { shift-&gt;recv };\n  if($@) {\n    print (\"connection error\");\n    warn $@;\n    return;\n  }\n\n  # recieve message from the websocket...\n  $connection-&gt;on(each_message =&gt; sub {\n    my($connection, $message) = @_;\n    my $msg = $message-&gt;body;\n    print (\"GOT $msg\\n\");\n  });\n\n\n});\n\nAnyEvent-&gt;condvar-&gt;recv;\n</code></pre>\n\n<p><strong>Expected behavior</strong></p>\n\n<p>The client will keep displaying timestamps</p>\n\n<p><strong>Observed behavior</strong></p>\n\n<p>The client gets the very first message and prints it.\nWhen the server exits its fork, the client stops getting any more messages and the connection terminates</p>\n\n<p><strong>How to make it work</strong></p>\n\n<p>We have two options:</p>\n\n<ol>\n<li>Don't fork in server. Send the message directly in process sub</li>\n<li>Don't use SSL</li>\n</ol>\n\n<p>Therefore, my conclusion is SSL+fork == problem.</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538736714, "post_id": 52663548, "comment_id": 92257759, "body": "<code>$snd.age</code> is a syntax error."}, {"owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538739974, "post_id": 52663548, "comment_id": 92259597, "body": "any example. that would be good coz i tried a millions way but failed. even i got more examples from different people but all failed"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 2, "creation_date": 1538741175, "post_id": 52663548, "comment_id": 92260190, "body": "The real solution is to stop copy/pasting random &quot;examples&quot; from different sources without understanding the code. For example, why do you have that <code>foreach $row</code> loop in your program at all? It doesn&#39;t do anything."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1538747285, "post_id": 52663548, "comment_id": 92263940, "body": "Crossposted from <a href=\"https://perlmonks.org/?node_id=1223472\" rel=\"nofollow noreferrer\">perlmonks.org/?node_id=1223472</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 0, "creation_date": 1538739967, "post_id": 52663981, "comment_id": 92259595, "body": "any example. that would be good coz i tried a millions way but failed. even i got more examples from different people but all failed"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 0, "creation_date": 1538741053, "post_id": 52663981, "comment_id": 92260127, "body": "Standalone example created."}, {"owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 0, "creation_date": 1538743838, "post_id": 52663981, "comment_id": 92261679, "body": "this is wat confuse people and everyone do it in his on way where by cant be helped. the city, age and country are in table msg not table users. i have a reason why i made it like that. the problem is not getting info. the problem is selecting from table msg  to bring these city age and country. try to add these columns city age and country to table msg not users. i appreciate your help"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 0, "creation_date": 1538746283, "post_id": 52663981, "comment_id": 92263250, "body": "@mikejoe: Then you SQL query is wrong. Please try to help us to help you by providing all the details and trying not to confuse us."}, {"owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 0, "creation_date": 1538747117, "post_id": 52663981, "comment_id": 92263834, "body": "i already posted the sql query. but everyone is bypassing the problem and give me other alternative way. which i dont want"}, {"owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 0, "creation_date": 1538747310, "post_id": 52663981, "comment_id": 92263952, "body": "<code>TABLE users  userid   firstname    lastname 1         JOHN         DEO 2         JANE         DEO  TABLE msg  msg_id    msg_from     msg_to      received   age  city  country 1         userid(1)    userid(2)   null       26   any   any my $data = $DBH-&gt;prepare(&quot;SELECT SND.userid, SND.firstname, SND.lastname, SND.age, SND.city, SND.country FROM msg as M JOIN users as SND    ON SND.userid = M.msg_from WHERE M.msg_to = ?    AND M.received IS NULL&quot;); $data-&gt;execute($janedeo_id); while (my $row = $data-&gt;fetchrow_hashref) {         } }</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "edited": false, "score": 1, "creation_date": 1538747913, "post_id": 52663981, "comment_id": 92264347, "body": "@mikejoe Please edit your original question if you\u2019re going to include additional info. Nobody wants to read an unformatted wall of text in a comment."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 0, "last_activity_date": 1538741041, "last_edit_date": 1538741041, "creation_date": 1538736725, "answer_id": 52663981, "question_id": 52663548, "link": "https://stackoverflow.com/questions/52663548/getting-results-from-sql-join-using-perl/52663981#52663981", "title": "getting results from sql join using perl", "body": "<p>This is really weird:</p>\n\n<pre><code>while (my $row = $data-&gt;fetchrow_hashref) {\n    foreach $row ( @$data) {\n        ($userid, $snd_firstname, $snd_lastname, $snd.age, $snd.city, $snd.country) = @$data;\n    }\n}\n</code></pre>\n\n<p>You fetch one row from the result as a hash reference. You than iterate over <code>@$data</code> which is a statement handle - this can't work. Use the fetched <code>$row</code> in the loop.</p>\n\n<p>Also, <code>.</code> is the concatenation operator. What do you mean by <code>$snd.city</code>?</p>\n\n<p>You can use <a href=\"http://p3rl.org/Data::Dumper\" rel=\"nofollow noreferrer\">Data::Dumper</a> to see what structure is returned:</p>\n\n<pre><code>use Data::Dumper;\n\n...\nwhile (my $row = $data-&gt;fetchrow_hashref) {\n    print Dumper $row;\n}\n</code></pre>\n\n<p>Here's a standalone example:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse DBI;\nuse Template;\n\n# Fake the database\nmy $dbh = 'DBI'-&gt;connect('dbi:SQLite:dbname=:memory:', \"\", \"\");\n$dbh-&gt;do('CREATE TABLE USERS (id INT, firstname VARCHAR(20), lastname VARCHAR(20), age INT, city VARCHAR(20), country VARCHAR(20))');\n$dbh-&gt;do('INSERT INTO USERS VALUES(1, \"John\", \"Doe\", 30, \"Mumbai\", \"India\")');\n$dbh-&gt;do('INSERT INTO USERS VALUES(2, \"Jane\", \"Doe\", 20, \"New York\", \"USA\")');\n\n$dbh-&gt;do('CREATE TABLE msg (id INT, msg_from VARCHAR(20), msg_to VARCHAR(20), received BOOL)');\n$dbh-&gt;do('INSERT INTO msg VALUES (1, 2, 1, NULL)');\n\n# Template.\nmy $templ = &lt;&lt; '__HTML__';\n&lt;!DOCTYPE html&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\"/&gt;\n&lt;title&gt;Untitled Document&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n[% FOREACH user IN list %]\n&lt;p&gt;userid    [% user.id %] &lt;/p&gt;\n&lt;p&gt;firstname [% user.firstname %] &lt;/p&gt;\n&lt;p&gt;lastname  [% user.lastname %] &lt;/p&gt;\n&lt;p&gt;city      [% user.city %] &lt;/p&gt;\n&lt;p&gt;age       [% user.age %] &lt;/p&gt;\n&lt;p&gt;country   [% user.country %] &lt;/p&gt;\n[% END %]\n&lt;/body&gt;\n&lt;/html&gt;\n__HTML__\n\n\nmy $data = $dbh-&gt;prepare(&lt;&lt; '__SQL__');\n    SELECT u.id, u.firstname, u.lastname, age, u.city, u.country\n    FROM msg as m\n    JOIN users as u\n        ON u.id = m.msg_from\n    WHERE m.msg_to = ?\n        AND m.received IS NULL\n__SQL__\n\n$data-&gt;execute(1);\nmy @output;\nwhile (my $row = $data-&gt;fetchrow_hashref) {\n    push @output, $row;\n}\n'Template'-&gt;new-&gt;process (\\$templ, { list =&gt; \\@output })\n        or die $templ-&gt;error;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 1, "creation_date": 1538751382, "post_id": 52668206, "comment_id": 92266514, "body": "<code>msg_to</code> contains numbers, but you compare it to strings in <code>WHERE M.msg_to = &#39;userid -1&#39;</code> ? This cannot be right."}, {"owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "reply_to_user": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 0, "creation_date": 1538752874, "post_id": 52668206, "comment_id": 92267383, "body": "msg_to ya. contains numbers bt no problem with that i just remove to WHERE M.msg_to = ?. it was just fixing sql query first to move to next step"}], "tags": [], "owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "is_accepted": false, "score": -1, "last_activity_date": 1538750827, "creation_date": 1538750827, "answer_id": 52668206, "question_id": 52663548, "link": "https://stackoverflow.com/questions/52663548/getting-results-from-sql-join-using-perl/52668206#52668206", "title": "getting results from sql join using perl", "body": "<p>i got this fixed by doing </p>\n\n<pre><code>SELECT SND.userid, SND.firstname, SND.lastname, M.age, M.city, M.country\nFROM msg as M\nJOIN users as SND \nON SND.userid = M.msg_from\nWHERE M.msg_to = 'userid -1'\nAND M.received IS NULL\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 0, "last_activity_date": 1539082129, "last_edit_date": 1539082129, "creation_date": 1539079540, "answer_id": 52718375, "question_id": 52663548, "link": "https://stackoverflow.com/questions/52663548/getting-results-from-sql-join-using-perl/52718375#52718375", "title": "getting results from sql join using perl", "body": "<p>You seem very, very confused. I don't think you are actually showing us the code that you are running. Look at this code:</p>\n\n<pre><code>my $data = $DBH-&gt;prepare(\"SELECT SND.userid, SND.firstname, \n                                 SND.lastname\n                            FROM msg as M\n                            JOIN users as SND \n                              ON SND.userid = M.msg_from\n                           WHERE M.msg_to = ? \n                             AND M.received IS NULL\");\n\n$data-&gt;execute($janedeo_id);\nwhile (my $row = $data-&gt;fetchrow_hashref) {\n    foreach $row ( @$data) {\n        ($userid, $snd_firstname, $snd_lastname,\n         $snd.age, $snd.city, $snd.country) = @$data;\n    }\n}\n</code></pre>\n\n<p>This is your first code example - the code that you claim works. But it can't possibly work.</p>\n\n<p>You have a variable called <code>$data</code> which contains your DBI statement handle (I know that because it's returned from a <code>$DBH-&gt;prepare()</code> call). It would be more usual to call this variable <code>$sth</code>.</p>\n\n<p>You, correctly, call <code>execute()</code> on this object and then start to call <code>fetchrow_hashref()</code> in a loop. You store the hash reference you get in a variable called <code>$row</code>. So far so good.</p>\n\n<p>But then it all goes wrong.</p>\n\n<p>You ignore the hash reference you have and overwrite it with the data that is stored in <code>$data</code>. But there's no data in <code>$data</code> - it's a statement handle. You treat it as an array reference (<code>@$data</code>) but it's not an array reference, so this would throw a fatal runtime error.</p>\n\n<p>You then ignore the second value you have put in <code>$row</code> and switch to using individual variables to, presumably, store the data that you're getting back from the database. Once again, you treat <code>$data</code> as an array reference and once again, it won't work and will throw a fatal runtime error. Oh, and you're using variable names (for example, <code>$snd.age</code>) which are invalid in Perl and which would almost certainly give you a syntax error.</p>\n\n<p>By claiming that this code works, you are wasting our time. It doesn't work. It doesn't even compile. We are very happy to help people here, but you need to show us actual code that we can run.</p>\n\n<p>I don't know what your programming background is. But in order to be successful in this career, you are going to have to pay a lot more attention to detail.</p>\n"}], "owner": {"reputation": 27, "user_id": 7816650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47efba308a0b838afc8a58adde68618?s=128&d=identicon&r=PG&f=1", "display_name": "mike joe", "link": "https://stackoverflow.com/users/7816650/mike-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1539082129, "creation_date": 1538735256, "last_edit_date": 1538736665, "question_id": 52663548, "link": "https://stackoverflow.com/questions/52663548/getting-results-from-sql-join-using-perl", "title": "getting results from sql join using perl", "body": "<p>this works</p>\n\n<pre><code>TABLE users\n\nuserid  firstname   lastname\n1        JOHN          DEO\n2        JANE          DEO\n\nTABLE msg\n\nmsg_id    msg_from     msg_to      received   \n1         userid(1)    userid(2)   null       \n</code></pre>\n\n\n\n<pre><code>$janedeo_id = 2;\n\n\nmy $data = $DBH-&gt;prepare(\"SELECT SND.userid, SND.firstname, SND.lastname\nFROM msg as M\nJOIN users as SND \n  ON SND.userid = M.msg_from\nWHERE M.msg_to = ? \n  AND M.received IS NULL\");\n$data-&gt;execute($janedeo_id);\nwhile (my $row = $data-&gt;fetchrow_hashref) {\n    foreach $row ( @$data) {\n        ($userid, $snd_firstname, $snd_lastname) = @$data;\n}\n}\nmy $templ    = &lt;&lt;START_HTML;\n&lt;!DOCTYPE html&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\n+\" /&gt;\n&lt;title&gt;Untitled Document&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n[% FOREACH name IN list %]\n&lt;p&gt;userid    [% name.0 %] &lt;/p&gt;\n&lt;p&gt;firstname [% name.1 %] &lt;/p&gt;\n&lt;p&gt;lastname  [% name.2 %] &lt;/p&gt;\n[% END %]\n&lt;/body&gt;\n&lt;/html&gt;\n\nSTART_HTML\n\n$template-&gt;process (\\$templ, { list =&gt; \\@$data })\n        or die $template-&gt;error;\n</code></pre>\n\n<p>this doesn't work. when i try to add age city country and results it fails cant works </p>\n\n<pre><code>TABLE users\n\nuserid   firstname    lastname\n1         JOHN         DEO\n2         JANE         DEO\n\nTABLE msg\n\nmsg_id    msg_from     msg_to      received   age  city  country\n1         userid(1)    userid(2)   null       26   any   any\n</code></pre>\n\n\n\n<pre><code>$janedeo_id = 2;\n\n\nmy $data = $DBH-&gt;prepare(\"SELECT SND.userid, SND.firstname, SND.lastname, SND.age, SND.city, SND.country\nFROM msg as M\nJOIN users as SND \n  ON SND.userid = M.msg_from\nWHERE M.msg_to = ? \n  AND M.received IS NULL\");\n$data-&gt;execute($janedeo_id);\nwhile (my $row = $data-&gt;fetchrow_hashref) {\n    foreach $row ( @$data) {\n        ($userid, $snd_firstname, $snd_lastname, $snd.age, $snd.city, $snd.country) = @$data;\n}\n}\nmy $templ    = &lt;&lt;START_HTML;\n&lt;!DOCTYPE html&gt;\n&lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n&lt;head&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\"/&gt;\n&lt;title&gt;Untitled Document&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n[% FOREACH name IN list %]\n&lt;p&gt;userid    [% name.0 %] &lt;/p&gt;\n&lt;p&gt;firstname [% name.1 %] &lt;/p&gt;\n&lt;p&gt;lastname  [% name.2 %] &lt;/p&gt;\n&lt;p&gt;city      [% name.3 %] &lt;/p&gt;\n&lt;p&gt;age       [% name.4 %] &lt;/p&gt;\n&lt;p&gt;country   [% name.5 %] &lt;/p&gt;\n[% END %]\n&lt;/body&gt;\n&lt;/html&gt;\n\nSTART_HTML\n\n$template-&gt;process (\\$templ, { list =&gt; \\@$data })\n        or die $template-&gt;error;\n</code></pre>\n\n<p>am failing to get results when i try to add city age country to table msg and getting them printed out. am just getting blank response. even the script just printing error. cant find anything in database. so am just confused i don't know the problem</p>\n"}, {"tags": ["perl", "smartmatch"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 1, "creation_date": 1538729122, "post_id": 52661508, "comment_id": 92253437, "body": "What you are doing is the way I&#39;d do it. you could wrap the smart match inside a string eval like <code>if (eval &quot;\\$line ~~ $array[0]&quot;)</code> but you would have to be very sure that your data didn&#39;t hold any surprises. I&#39;d also suspect the using eval this way would be slower"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1538730290, "post_id": 52661508, "comment_id": 92254120, "body": "Smartmatch is deprecated."}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1538732807, "post_id": 52661508, "comment_id": 92255590, "body": "Why use smartmatch (which is deprecated) when you can just use <code>$array[0] &lt;= $line and $line &lt;= $array[1])</code> ?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1538735356, "post_id": 52661508, "comment_id": 92257042, "body": "While smartmaching should be avoided, <a href=\"https://stackoverflow.com/q/16927024/589924\">it&#39;s experimental</a> (unreleased and subject to change or removal), not deprecated (intended to be removed)"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1538735107, "last_edit_date": 1538735107, "creation_date": 1538734795, "answer_id": 52663425, "question_id": 52661508, "link": "https://stackoverflow.com/questions/52661508/how-to-make-a-column-value-as-an-number-range-for-smartmatch/52663425#52663425", "title": "How to make a column value as an number range for smartmatch", "body": "<pre><code>$line ~~ [ do { my ($min, $max) = split(/\\.\\./, $array[0]); $min..$max } ]\n</code></pre>\n\n<p>The inefficiencies here are insane. Why do you want to create arrays with 10s of thousands of elements just to smartmatch? Even if smartmatch wasn't still flagged as experimental after all these years for being broken, you should be using the following instead:</p>\n\n<pre><code>my ($min, $max) = split(/\\.\\./, $array[0]);\n$line &gt;= $min &amp;&amp; $line &lt;= $max\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9426481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d9e5d67bf0ef6f703fffa820ba1a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor.H", "link": "https://stackoverflow.com/users/9426481/victor-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 1, "accepted_answer_id": 52663425, "answer_count": 1, "score": 0, "last_activity_date": 1538735107, "creation_date": 1538728342, "last_edit_date": 1538729395, "question_id": 52661508, "link": "https://stackoverflow.com/questions/52661508/how-to-make-a-column-value-as-an-number-range-for-smartmatch", "title": "How to make a column value as an number range for smartmatch", "body": "<p>I have the txt file with the column value look like  </p>\n\n<p>85806534..85893402<br>\n49011742..49029143<br>\n114352846..114428174</p>\n\n<p>I want to do the smartmatch. I put thses values into @array[0]</p>\n\n<pre><code>if ($line ~~$array[0]){do something here}\n</code></pre>\n\n<p>How can I make $array[0] as a number range?</p>\n\n<p>if I split by .. then put the values into array [0] and array [1]</p>\n\n<pre><code>if ($line ~~[$array[0]..$array[1]){....}\n</code></pre>\n\n<p>this perl code is working for me.</p>\n"}, {"tags": ["json", "perl", "double-quotes"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538748215, "post_id": 52660897, "comment_id": 92264547, "body": "Keys in a JSON object are unordered, so they might appear as if they were shuffled on each successive run. Don\u2019t rely on the order of the keys in a JSON object!"}], "answers": [{"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1538757724, "post_id": 52661098, "comment_id": 92269846, "body": "Floats possibly losing precision is why JSON encoders usually encode (and decode) them as strings, after all."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 6, "last_activity_date": 1538732622, "last_edit_date": 1538732622, "creation_date": 1538726930, "answer_id": 52661098, "question_id": 52660897, "link": "https://stackoverflow.com/questions/52660897/perl-json-float-quotes/52661098#52661098", "title": "Perl, JSON, float, quotes", "body": "<p>That's why <a href=\"http://p3rl.org/Cpanel::JSON::XS\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS</a> has <a href=\"http://p3rl.org/Cpanel::JSON::XS::Type\" rel=\"nofollow noreferrer\">Cpanel::JSON::XS::Type</a>. Note that the floats might lose precision.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Cpanel::JSON::XS;\nuse Cpanel::JSON::XS::Type;\n\nmy $type = json_type_arrayof({\n    dt      =&gt; JSON_TYPE_STRING,\n    nt      =&gt; JSON_TYPE_INT,\n    flt_sm  =&gt; JSON_TYPE_FLOAT,\n    str     =&gt; JSON_TYPE_STRING,\n    str_flt =&gt; JSON_TYPE_FLOAT,\n    flt_lg  =&gt; JSON_TYPE_FLOAT,\n});\n\n\nmy $data = [{\n    dt      =&gt; \"2018-10-05 09:42:43.483\",\n    nt      =&gt; 1234,\n    flt_sm  =&gt; \".0123\",\n    str     =&gt; \"Hello there\",\n    str_flt =&gt; \"0.0123\",\n    flt_lg  =&gt; \"10.1234\",\n}];\n\nmy $jsonizer = Cpanel::JSON::XS-&gt;new-&gt;canonical-&gt;pretty;\nprint $jsonizer-&gt;encode($data, $type);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2626, "user_id": 849967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/137c89ef80ed860b95e68b42e0d5353e?s=128&d=identicon&r=PG", "display_name": "Kjetil S.", "link": "https://stackoverflow.com/users/849967/kjetil-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1538777679, "creation_date": 1538777679, "answer_id": 52673872, "question_id": 52660897, "link": "https://stackoverflow.com/questions/52660897/perl-json-float-quotes/52673872#52673872", "title": "Perl, JSON, float, quotes", "body": "<p>Try something like this to turn your numeric fields into numbers by adding 0. Something similar worked for me once. Using JSON::XS version 3.02.</p>\n\n<pre><code>use JSON::XS 3.02;\n...\nmy @numfield=qw( nt flt_sm str_flt flt_lg );\nfor my $f (@numfield) {\n  defined $$_{$f} and $$_{$f}+=0 for @$rows;\n}\n...\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4781674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VtYcTVJPA6I/AAAAAAAAAAI/AAAAAAAABvQ/AQeeIG1Xeoo/photo.jpg?sz=128", "display_name": "Bal&#225;zs Eigner", "link": "https://stackoverflow.com/users/4781674/bal%c3%a1zs-eigner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 52661098, "answer_count": 2, "score": 0, "last_activity_date": 1538777679, "creation_date": 1538726207, "question_id": 52660897, "link": "https://stackoverflow.com/questions/52660897/perl-json-float-quotes", "title": "Perl, JSON, float, quotes", "body": "<p>We have a Perl application which creates JSONs from DB queries. Unfortunately, it handles floats wrong, as it puts double quotes around floats. </p>\n\n<p>E.g.:</p>\n\n<pre><code>use DBI;\nuse JSON::MaybeXS;\n\nmy $dbs=\"dbi:ODBC:myconnection,myuser,mypwd,\";\nmy @ARR=split/,/ ,$dbs;\n$dbh = DBI-&gt;connect(@ARR, { PrintError=&gt;0, RaiseError=&gt;1,  LongReadLen=&gt;60000}) ;\nmy $sql = \"SELECT 'Hello there' str, '0.0123' str_flt, 0.0123 flt_sm, 10.1234 flt_lg, 1234 nt, getdate() dt\";\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute();\n\nmy $rows = $sth-&gt;fetchall_arrayref({});\n\nprint \"Structure of result is: \\n\\n\";\nmy $num_fields = $sth-&gt;{NUM_OF_FIELDS};\nfor ( my $i=0; $i&lt; $num_fields; $i++ ) {\n    my $field = $sth-&gt;{NAME}-&gt;[$i];\n    my $type = $sth-&gt;{TYPE}-&gt;[$i];\n    my $precision = $sth-&gt;{PRECISION}-&gt;[$i]; # e.g. VARCHAR(50) has a precision of 50\n    print \"Field $field is of type $type, with precision $ precision\\n\";\n}\n\n$sth-&gt;finish();\n$dbh-&gt;disconnect;\n\nmy $json_opts = JSON::MaybeXS-&gt;new(utf8 =&gt; 1, pretty =&gt; 1);\nmy $json_maybe = $json_opts-&gt;encode($rows);\n\nprint(\"\\nJSON::MaybeXS:\\n\");\nprint($json_maybe);\n</code></pre>\n\n<p>The output looks like:</p>\n\n<pre><code>Structure of result is:\n\nField str is of type -8, with precision 11\nField str_flt is of type -8, with precision 6\nField flt_sm is of type 2, with precision 4\nField flt_lg is of type 2, with precision 6\nField nt is of type 4, with precision 10\nField dt is of type 93, with precision 23\n\nJSON::MaybeXS:\n[\n   {\n      \"dt\" : \"2018-10-05 09:42:43.483\",\n      \"nt\" : 1234,\n      \"flt_sm\" : \".0123\",\n      \"str\" : \"Hello there\",\n      \"str_flt\" : \"0.0123\",\n      \"flt_lg\" : \"10.1234\"\n   }\n]\n</code></pre>\n\n<p>Perl version: 5.18.2</p>\n\n<p>Intalled JSON libraries: JSON, JSON-Any, JSON-PP, JSON-XS, Cpanel-JSON-XS, JSON-MaybeXS, Parse-CPAN-Meta </p>\n\n<p>One thing that the output shuffles the fields and each run results in a different order in the JSON. The main problem is the double quotes around the floats, which causes problems when consuming it in another application, as it recognises these fields as strings and has to parse them one by one. DBI recognises the field types correctly, it somehow lost during the json encoding... Any idea how to fix it? (Yes, I could easily fix it using regex, but that wouldn't be so nice...)</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538714389, "post_id": 52658428, "comment_id": 92247322, "body": "Just to be clear... the seventh column is always two characters and you want them split up with a tab between them, effectively adding a column to the output?"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538720451, "post_id": 52658541, "comment_id": 92249076, "body": "<code>BEGIN { $, = &quot;\\t&quot; } say @F</code> is more clearly and more concisely written as <code>say join &quot;\\t&quot;, @F</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538720550, "post_id": 52658541, "comment_id": 92249123, "body": "<code>s&#47;^(.)&#47;$1\\t&#47;</code> can be replaced with the more efficient and more concise <code>s&#47;^.\\K&#47;\\t&#47;s</code>"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538725573, "post_id": 52658541, "comment_id": 92251633, "body": "@ikegami I really don&#39;t see a purpose or point to using join when printing a list in a one-liner when you can get the same result more cleanly by taking advantage of <code>$OFS</code> (Though, granted the plain variable is cryptic, but I&#39;m not going to use English in a one-liner). In a bigger program it <i>might</i> be different, depending on many things."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538732151, "post_id": 52658541, "comment_id": 92255229, "body": "Using global variables to affect a different part of the program is the very definition of <i>less</i> clean."}], "tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 0, "last_activity_date": 1538717391, "last_edit_date": 1538717391, "creation_date": 1538715180, "answer_id": 52658541, "question_id": 52658428, "link": "https://stackoverflow.com/questions/52658428/how-to-seperat-field-of-one-column-in-bash/52658541#52658541", "title": "how to seperat field of one column in bash?", "body": "<p>If the answer to the question in my comment is yes, try this:</p>\n\n<pre><code>awk -v FS=\"\\t\" -v OFS=\"\\t\" '{ sub(/^./, \"&amp;\\t\", $7); print }' ped1 &gt; ped2\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Perl version:</p>\n\n<pre><code>perl -F\"\\t\" -lanE 'BEGIN { $, = \"\\t\" } $F[6] =~ s/^(.)/$1\\t/; say @F' ped1 &gt; ped2\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10093785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23cce6d73e071351ec68a56aeedf56fe?s=128&d=identicon&r=PG&f=1", "display_name": "mary", "link": "https://stackoverflow.com/users/10093785/mary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 52658541, "answer_count": 1, "score": 0, "last_activity_date": 1538720708, "creation_date": 1538714204, "last_edit_date": 1538720708, "question_id": 52658428, "link": "https://stackoverflow.com/questions/52658428/how-to-seperat-field-of-one-column-in-bash", "title": "how to seperat field of one column in bash?", "body": "<p>I have the following tab-delimited file:</p>\n\n<pre><code>1 1 0 0 2 -9 BB A A B A B ...\n2 2 0 0 2 -9 AA B B A B A ...\n3 3 0 0 2 -9 AB B A B A B ...\n</code></pre>\n\n<p>As you can see, the genotypes in 7th column have not been separated. I need the following tab-delimited file:</p>\n\n<pre><code>1 1 0 0 2 -9 B B A A B A B ...\n2 2 0 0 2 -9 A A B B A B A ...\n3 3 0 0 2 -9 A B B A B A B ...\n</code></pre>\n\n<p>I tried the following command:</p>\n\n<pre><code>perl -ne '\n   ($id, $tmp) = split( / /, $_, 2 );\n   $tmp =~ s/ //g;\n   print \"$id \";\n   print join(\" \", split( //, $tmp ) );\n' ped1 &gt; ped2\n</code></pre>\n\n<p>Does anyone have a solution?</p>\n"}, {"tags": ["regex", "perl", "elf"], "answers": [{"tags": [], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "is_accepted": true, "score": 2, "last_activity_date": 1538740479, "last_edit_date": 1538740479, "creation_date": 1538719761, "answer_id": 52659274, "question_id": 52658101, "link": "https://stackoverflow.com/questions/52658101/reading-data-from-elf-file-in-perl/52659274#52659274", "title": "Reading data from ELF file in Perl", "body": "<p>You can use <a href=\"https://metacpan.org/pod/Binutils::Objdump\" rel=\"nofollow noreferrer\"><code>Binutils::Objdump</code></a>.</p>\n\n<p><strong>hello.c</strong>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main() {\n    printf(\"Hello world!\\n\");\n}\n</code></pre>\n\n<p><strong>Create ELF</strong>:</p>\n\n<pre><code>gcc -g hello.c -o hello\n</code></pre>\n\n<p><strong>objdump.pl</strong>:</p>\n\n<pre><code>use feature qw(say);\nuse strict;\nuse warnings;\nuse Binutils::Objdump (); # Seems like this module is missing Exporter interface!??\n\nmy $search_string = 'hello.c';\n\nBinutils::Objdump::objdumpopt('-t');\nBinutils::Objdump::objdumpwrap(\"SYMBOL TABLE\" =&gt; sub { mysymtab( $search_string, @_ ) });\nBinutils::Objdump::objdump('hello');\n\nsub mysymtab {\n    my ($search_string, @lines) = @_;\n\n    for my $line (@lines) {\n        say $line if $line =~ /\\Q$search_string\\E/;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 1, "last_activity_date": 1538738879, "creation_date": 1538738879, "answer_id": 52664643, "question_id": 52658101, "link": "https://stackoverflow.com/questions/52658101/reading-data-from-elf-file-in-perl/52664643#52664643", "title": "Reading data from ELF file in Perl", "body": "<p>For casual script you can simply do</p>\n\n<pre><code>my $search_str = 'minor';\nfor (grep {chop; s/.*(0x[0-9a-f]+\\s+\\S*$search_str\\S*)$/$1/x} `objdump -t a.exe`) {\n  my ($addr, $name) = split / +/;\n  print \"$name: $addr\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7638839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5038c673427355a03fe67cabf748537f?s=128&d=identicon&r=PG&f=1", "display_name": "Krithi", "link": "https://stackoverflow.com/users/7638839/krithi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 52659274, "answer_count": 2, "score": 1, "last_activity_date": 1538740479, "creation_date": 1538711398, "question_id": 52658101, "link": "https://stackoverflow.com/questions/52658101/reading-data-from-elf-file-in-perl", "title": "Reading data from ELF file in Perl", "body": "<p>I need to read data from an ELF file or AXF file and search for a data in that file and return its address. \nIn Linux I tried <code>objdump -t filename.axf | grep search_string</code> and got the result.</p>\n\n<p>How to do that in Perl. I tried Parse::Readelf too but it did not work.\nThanks in advance.</p>\n"}, {"tags": ["regex", "bash", "perl", "grep", "gnu"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538707999, "post_id": 52657524, "comment_id": 92245937, "body": "The lookahead says that the next character should be a c, f, or i (Should be using <code>[cfi]</code> for that, btw), but then you try to match a newline as the next character. Both parts cannot both match."}, {"owner": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1538715421, "post_id": 52657524, "comment_id": 92247545, "body": "Please add your desired output for that sample input to your question."}, {"owner": {"reputation": 278, "user_id": 3329877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00507fdc5de0533354e06359e6ef1b82?s=128&d=identicon&r=PG&f=1", "display_name": "VaNa", "link": "https://stackoverflow.com/users/3329877/vana"}, "reply_to_user": {"reputation": 68617, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1538724249, "post_id": 52657524, "comment_id": 92250907, "body": "@Cyrus Done. Basically I want to output first part of a row, then nothing from the second part and then newline (does not matter what the concrete regexes are)."}], "answers": [{"comments": [{"owner": {"reputation": 278, "user_id": 3329877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00507fdc5de0533354e06359e6ef1b82?s=128&d=identicon&r=PG&f=1", "display_name": "VaNa", "link": "https://stackoverflow.com/users/3329877/vana"}, "edited": false, "score": 0, "creation_date": 1538724765, "post_id": 52658856, "comment_id": 92251194, "body": "Thanks! That is the gist of what&#39;s wrong there. I did not think about it that way. Is there a consuming lookahead assertion so the newline can be part of the output of grep? I want the output string to be &quot;ab\\nde\\ngh\\n&quot; not &quot;abdegh&quot;"}, {"owner": {"reputation": 278, "user_id": 3329877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00507fdc5de0533354e06359e6ef1b82?s=128&d=identicon&r=PG&f=1", "display_name": "VaNa", "link": "https://stackoverflow.com/users/3329877/vana"}, "edited": false, "score": 0, "creation_date": 1538726416, "post_id": 52658856, "comment_id": 92252048, "body": "Or better yet make an array out of the matches. Desired array: <code>(&quot;ab&quot; &quot;de&quot; &quot;gh&quot;)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 278, "user_id": 3329877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00507fdc5de0533354e06359e6ef1b82?s=128&d=identicon&r=PG&f=1", "display_name": "VaNa", "link": "https://stackoverflow.com/users/3329877/vana"}, "edited": false, "score": 1, "creation_date": 1538732087, "post_id": 52658856, "comment_id": 92255181, "body": "<code>grep -oP &#39;\\w{2}(?=(?:c|f|i)\\z)&#39;</code>"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1538717266, "creation_date": 1538717266, "answer_id": 52658856, "question_id": 52657524, "link": "https://stackoverflow.com/questions/52657524/grep-opz-gnu-grep-3-1-does-not-match-n-after-positive-lookahead/52658856#52658856", "title": "grep -oPz (GNU grep 3.1) does not match \\n after positive lookahead", "body": "<p><code>ab</code> means <code>a</code> followed by <code>b</code>, and continue matching after the <code>b</code>.</p>\n\n<p><code>a(?=b)</code> means <code>a</code> followed by <code>b</code>, and continue matching after the <code>a</code>.</p>\n\n<p>So, for <code>(?=c|f|i)\\n</code> to match, there must be a position that matches both <code>c</code> and <code>\\n</code>, both <code>f</code> and <code>\\n</code>, or by both <code>i</code> and <code>\\n</code>. That's impossible.</p>\n"}], "owner": {"reputation": 278, "user_id": 3329877, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/00507fdc5de0533354e06359e6ef1b82?s=128&d=identicon&r=PG&f=1", "display_name": "VaNa", "link": "https://stackoverflow.com/users/3329877/vana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 52658856, "answer_count": 1, "score": 0, "last_activity_date": 1538724537, "creation_date": 1538706181, "last_edit_date": 1538724537, "question_id": 52657524, "link": "https://stackoverflow.com/questions/52657524/grep-opz-gnu-grep-3-1-does-not-match-n-after-positive-lookahead", "title": "grep -oPz (GNU grep 3.1) does not match \\n after positive lookahead", "body": "<p>As a simplified example I have <code>printf \"abc\\ndef\\nghi\\n\" | grep -oPz '\\w{2}(?=c|f|i)\\n'</code> and that does not match anything, however <code>grep -oPz '\\w{2}(?=(c|f|i)\\n)'</code> does. Why is that? I need the newline in the output.</p>\n\n<p>Desired output is to match the rows and output them without the lookahead part eg. <code>ab\\n</code></p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538705547, "post_id": 52657260, "comment_id": 92245503, "body": "If you want to talk to a HTTP server, you should use a HTTP client module..."}, {"owner": {"reputation": 1, "user_id": 10381797, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jUR81zb5xyg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaeLwA7dUIKDvvzBabwgtlBzjeqw/mo/photo.jpg?sz=128", "display_name": "Maani Delaavari", "link": "https://stackoverflow.com/users/10381797/maani-delaavari"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538705903, "post_id": 52657260, "comment_id": 92245559, "body": "can you give me an example please..."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538705992, "post_id": 52657260, "comment_id": 92245581, "body": "Anyways, what&#39;s timing out? The read?  (A HTTP server isn&#39;t going to send any data until you send a request) And how? Where is there a timeout in the code you posted?"}, {"owner": {"reputation": 1, "user_id": 10381797, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jUR81zb5xyg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaeLwA7dUIKDvvzBabwgtlBzjeqw/mo/photo.jpg?sz=128", "display_name": "Maani Delaavari", "link": "https://stackoverflow.com/users/10381797/maani-delaavari"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538706689, "post_id": 52657260, "comment_id": 92245700, "body": "socket (my $sock, AF_INET, SOCK_STREAM, $protocol) or die &quot;can&#39;t make socket: $!&quot;; connect ($sock, $destination) or die &quot;can&#39;t connect: $!&quot;; it can not connect and timed out"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538707641, "post_id": 52657260, "comment_id": 92245860, "body": "That line doesn&#39;t appear in the code you posted. You should show what you&#39;re actually using."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538708110, "post_id": 52657260, "comment_id": 92245961, "body": "You connect alright but there&#39;s nothing to read (it waits on the next line).  Send something, like <code>say $sock &quot;hi&quot;;</code>, and you&#39;ll get something back (400 in this case)."}, {"owner": {"reputation": 1, "user_id": 10381797, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jUR81zb5xyg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaeLwA7dUIKDvvzBabwgtlBzjeqw/mo/photo.jpg?sz=128", "display_name": "Maani Delaavari", "link": "https://stackoverflow.com/users/10381797/maani-delaavari"}, "edited": false, "score": 0, "creation_date": 1538708653, "post_id": 52657260, "comment_id": 92246083, "body": "THNX, you are right... what should I send to get proper response?"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1538717325, "post_id": 52657260, "comment_id": 92248120, "body": "@MaaniDelaavari: if you want to get a proper response you need to send a proper HTTP request. In the most simple case this is <code>GET &#47; HTTP&#47;1.0\\r\\nHost: www.google.com\\r\\n\\r\\n</code>. But note that HTTP is way more complex than this small example and there is usually also TLS involved today for HTTPS. I recommend to study the actual standard if you really want to write your own HTTP client instead of using existing libraries."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1538772053, "post_id": 52657260, "comment_id": 92275755, "body": "Talking HTTP directly with the server is (needlessly) low-level. Why do you want to do that?  If it&#39;s for play and learning then I&#39;d recommend that you read and learn about it first, as it is not so simple (see the comment by @SteffenUllrich).  Otherwise, there are excellent tools and frameworks in Perl, such as <code>LWP::UserAgent</code>, <code>Mojo::UserAgent</code>, ..."}], "answers": [{"tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 3, "last_activity_date": 1538713617, "creation_date": 1538713617, "answer_id": 52658350, "question_id": 52657260, "link": "https://stackoverflow.com/questions/52657260/why-iosocket-always-gets-timeout/52658350#52658350", "title": "why IO::Socket always gets TIMEOUT?", "body": "<p>In a conversation with a web server, the user-agent speaks first. You haven't sent a request. The server waits for you to send the request then gives up. If you want to make web requests, something like <a href=\"https://mojolicious.org/perldoc/Mojo/UserAgent\" rel=\"nofollow noreferrer\">Mojo::UserAgent</a> will do most of the work for you.</p>\n\n<p>Also realize that some hosts may be wise to you. It's better to test this sort of stuff locally instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 10381797, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jUR81zb5xyg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DWaeLwA7dUIKDvvzBabwgtlBzjeqw/mo/photo.jpg?sz=128", "display_name": "Maani Delaavari", "link": "https://stackoverflow.com/users/10381797/maani-delaavari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1538713617, "creation_date": 1538704197, "question_id": 52657260, "link": "https://stackoverflow.com/questions/52657260/why-iosocket-always-gets-timeout", "title": "why IO::Socket always gets TIMEOUT?", "body": "<p>whenever I try to connect with perl Socket it gets timeout... like this code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse v5.26;\nuse IO::Socket;\n\n\nmy $sock = IO::Socket::INET-&gt;new(PeerAddr=&gt; 'www.google.com',\n                             PeerPort =&gt; 'http(80)',\n                             Proto    =&gt; 'tcp') or die $!;\n\nmy $line = &lt;$sock&gt;;\nsay $line;\n</code></pre>\n\n<p>can anyone tell me why...</p>\n"}, {"tags": ["apache", "perl", "fastcgi", "mod-perl2"], "comments": [{"owner": {"reputation": 3605, "user_id": 36532, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/cyMAs.png?s=128&g=1", "display_name": "LuRsT", "link": "https://stackoverflow.com/users/36532/lurst"}, "edited": false, "score": 0, "creation_date": 1538683987, "post_id": 52654263, "comment_id": 92240308, "body": "Craig, I couldn&#39;t find the question in your post, could you be more explicit about what question you&#39;re asking?"}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1538943109, "post_id": 52654263, "comment_id": 92311747, "body": "What mpm are you using?  IMO using anything but prefork is a disaster with Perl.  But regardless of mpm, you should be compiling all the modules you will be loading at startup, not during a request."}, {"owner": {"reputation": 31, "user_id": 10458503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QRppYeNVNjM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUcoHj82TpEIkgKBn_F0ZFV6k9Nwg/mo/photo.jpg?sz=128", "display_name": "Craig James", "link": "https://stackoverflow.com/users/10458503/craig-james"}, "edited": false, "score": 1, "creation_date": 1539032638, "post_id": 52654263, "comment_id": 92346343, "body": "LuRsT -- Sorry, I thought the question was pretty clear. mod_perl2 gets corrupted in some way by ordinary use, and can&#39;t recover. It requires restarting Apache. That&#39;s not acceptable behavior for a web server. What is making this happen? Is it a serious bug in mod_perl2, or are we doing something stupid?"}, {"owner": {"reputation": 31, "user_id": 10458503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QRppYeNVNjM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUcoHj82TpEIkgKBn_F0ZFV6k9Nwg/mo/photo.jpg?sz=128", "display_name": "Craig James", "link": "https://stackoverflow.com/users/10458503/craig-james"}, "edited": false, "score": 0, "creation_date": 1539033137, "post_id": 52654263, "comment_id": 92346528, "body": "ysth -- We used all standard modules from Debian. According to Apache documentation, that means we&#39;re using the &quot;event&quot; mpm."}, {"owner": {"reputation": 31, "user_id": 10458503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QRppYeNVNjM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUcoHj82TpEIkgKBn_F0ZFV6k9Nwg/mo/photo.jpg?sz=128", "display_name": "Craig James", "link": "https://stackoverflow.com/users/10458503/craig-james"}, "edited": false, "score": 0, "creation_date": 1539033481, "post_id": 52654263, "comment_id": 92346633, "body": "We solved this problem by using PerlModule in the config file to preload/compile the modules. This, I believe, matches ysth&#39;s comment above that everything should be compile at startup rather than when the specific Perl program is loaded. The problem disappeared entirely; we could run 100 requests simultaneously, and never found a problem."}], "owner": {"reputation": 31, "user_id": 10458503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QRppYeNVNjM/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUcoHj82TpEIkgKBn_F0ZFV6k9Nwg/mo/photo.jpg?sz=128", "display_name": "Craig James", "link": "https://stackoverflow.com/users/10458503/craig-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1538683072, "creation_date": 1538683072, "question_id": 52654263, "link": "https://stackoverflow.com/questions/52654263/mod-perl2-randomly-fails-with-heavy-usage-wont-recover", "title": "mod_perl2 randomly fails with heavy usage, won&#39;t recover", "body": "<p>On a new Ubuntu server, our Apache2 mod_perl2 system randomly fails when more than 8 clients connect. Once it fails, it won't recover -- all further fast-CGI activities fail, and Apache must be restarted. The error is very peculiar: it says there are syntax errors in standard Perl modules that it's trying to reload. Clearly this is wrong since it already loaded them many times before, and these are standard Perl modules.</p>\n\n<p>Here is the Perl stack trace we get:</p>\n\n<pre><code>    [Thu Oct 04 18:33:09.222314 2018] [perl:error] [pid 11191:tid 139899223140096] [client 10.100.1.61:38632] failed to resolve handler `Che\\\nmAxonServer': syntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 65, near \"croak \"usage: $class-&gt;new()\"\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 73, near \"croak \"usage: $class-&gt;new_from_fd(FD, MODE)\"\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 99, near \"croak \"IO::Handle: bad open mode: $mode\"\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 104, near \"croak 'usage: $io-&gt;fdopen(FD, MODE)'\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 123, near \"croak 'usage: $io-&gt;close()'\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 137, near \"croak 'usage: $io-&gt;opened()'\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 142, near \"croak 'usage: $io-&gt;fileno()'\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 147, near \"croak 'usage: $io-&gt;getc()'\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 152, near \"croak 'usage: $io-&gt;eof()'\"\nsyntax error at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm line 157, near \"croak 'usage: $io-&gt;print(ARGS)'\"\n/usr/lib/x86_64-linux-gnu/perl/5.22/IO/Handle.pm has too many errors.\nCompilation failed in require at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Seekable.pm line 9.\nBEGIN failed--compilation aborted at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/Seekable.pm line 9.\nCompilation failed in require at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/File.pm line 11.\nBEGIN failed--compilation aborted at /usr/lib/x86_64-linux-gnu/perl/5.22/IO/File.pm line 11.\nCompilation failed in require at /usr/share/perl/5.22/IO/Compress/Base.pm line 11.\nBEGIN failed--compilation aborted at /usr/share/perl/5.22/IO/Compress/Base.pm line 11.\nCompilation failed in require at /usr/share/perl/5.22/IO/Compress/RawDeflate.pm line 9.\nBEGIN failed--compilation aborted at /usr/share/perl/5.22/IO/Compress/RawDeflate.pm line 9.\nCompilation failed in require at /usr/share/perl/5.22/IO/Compress/Gzip.pm line 11.\nBEGIN failed--compilation aborted at /usr/share/perl/5.22/IO/Compress/Gzip.pm line 11.\nCompilation failed in require at /emi/src/trunk/public_html_chemaxon/fcgi/ChemAxonServer.pm line 29.\nBEGIN failed--compilation aborted at /emi/src/trunk/public_html_chemaxon/fcgi/ChemAxonServer.pm line 29.\nCompilation failed in require at (eval 3) line 2.\n</code></pre>\n\n<p>Further attempts to use the system result in repeated errors, like this:</p>\n\n<pre><code>[Thu Oct 04 18:33:09.514512 2018] [perl:error] [pid 11191:tid 139899072071424] [client 10.100.1.61:38686] failed to resolve handler `ChemAxonServer': Attempt to reload ChemAxonServer.pm aborted.\\nCompilation failed in require at (eval 9) line 2.\\n\n</code></pre>\n\n<p>As far as we can tell, there are no significant differences between the old and new servers:</p>\n\n<p>Ubuntu 14.04\nApache 2.4.18</p>\n\n<p>I can only guess that it's hitting some resource limit, like memory or files, and once that happens it can't recompile the modules, and assumes that compiler's error message is real, when in reality the compiler is hitting a resource limit. But this is just a guess.</p>\n\n<p>Thanks,\nCraig</p>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538676481, "post_id": 52652465, "comment_id": 92237496, "body": "<a href=\"https://metacpan.org/pod/Text::AutoCSV\" rel=\"nofollow noreferrer\">Text::AutoCSV</a> is one of my favorites for working with csv files. In particular read up on the <code>out_fields</code> option."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1538676794, "post_id": 52652465, "comment_id": 92237641, "body": "Re: &quot;<i>I didnt find the any suitable method in Text CSV.</i>&quot; -- See under <a href=\"https://metacpan.org/pod/Text::CSV#getline_hr\" rel=\"nofollow noreferrer\">getline_hr</a>, where the docs give sample code for two ways to do this."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1539064783, "post_id": 52652465, "comment_id": 92353989, "body": "Please see <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": false, "score": 0, "last_activity_date": 1538680047, "creation_date": 1538680047, "answer_id": 52653567, "question_id": 52652465, "link": "https://stackoverflow.com/questions/52652465/how-to-filter-columns-from-csv-file-based-on-names-of-columns/52653567#52653567", "title": "How to filter columns from CSV file based on names of columns", "body": "<p>Actual example using Text::AutoCSV to remove given named columns from arbitrary CSV files like in your posted code (More complicated than the examples in the documentation for only writing specific columns):</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse Text::AutoCSV qw/remove_accents/;\n\nsub remove_columns {\n  my ($infile, $outfile, $drop) = @_;\n  my $csv = Text::AutoCSV-&gt;new(in_file =&gt; $infile, out_file =&gt; $outfile);\n  # Normalize column names the same way that Text::AutoCSV does\n  my %drops = map { my $h = remove_accents $_;\n                    $h =~ s/[^[:alnum:]_]//gi;\n                    $h = uc $h;\n                    $h =&gt; 1 } @$drop;\n  my @cols = grep { not exists $drops{$_} } $csv-&gt;get_fields_names;\n  # Hack to avoid reading the file twice.\n  $csv-&gt;{out_fields} = \\@cols;\n  $csv-&gt;write();\n}\n\nremove_columns \"in.csv\", \"out.csv\", [ \"user\", \"timestamp\" ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1538761276, "last_edit_date": 1538761276, "creation_date": 1538680214, "answer_id": 52653610, "question_id": 52652465, "link": "https://stackoverflow.com/questions/52652465/how-to-filter-columns-from-csv-file-based-on-names-of-columns/52653610#52653610", "title": "How to filter columns from CSV file based on names of columns", "body": "<p>See <a href=\"https://metacpan.org/pod/Text::CSV#getline_hr\" rel=\"nofollow noreferrer\">getline_hr</a></p>\n\n<pre><code>use warnings;\nuse strict;\nuse feature 'say';\n\nuse List::MoreUtils qw(any);\nuse Text::CSV;\n\nmy $file = shift @ARGV || die \"Usage: $0 filename\\n\";\n\nmy @exclude_cols = qw(user timestamp);\n\nmy $csv = Text::CSV-&gt;new ( { binary =&gt; 1 } ) \n    or die \"Cannot use CSV: \".Text::CSV-&gt;error_diag (); \n\nopen my $fh, '&lt;', $file or die \"Can't open $file: $!\";\n\nmy @cols  = @{ $csv-&gt;getline($fh) };\n\nmy @wanted_cols = grep { \n    my $name = $_; \n    not any { $name eq $_ } @exclude_cols;\n} @cols;\n\nmy $row = {}; \n$csv-&gt;bind_columns (\\@{$row}{@cols});\n\nwhile ($csv-&gt;getline($fh)) {\n    my @wanted_fields = @$row{ @wanted_cols };\n    say \"@wanted_fields\";\n}\n</code></pre>\n\n<p>The syntax <code>@$row{@wanted_cols}</code> is for a hash <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slice</a>, which returns a list of values for the keys in <code>@wanted_cols</code> from the hashref <code>$row</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "is_accepted": false, "score": 0, "last_activity_date": 1538759558, "creation_date": 1538759558, "answer_id": 52670453, "question_id": 52652465, "link": "https://stackoverflow.com/questions/52652465/how-to-filter-columns-from-csv-file-based-on-names-of-columns/52670453#52670453", "title": "How to filter columns from CSV file based on names of columns", "body": "<p>If you want to modify your CSV in other ways, too, and if SQL would be convenient for those modifications, then consider using <code>DBD::CSV</code>.</p>\n\n<p>You can then open a database handle on your CSV file, select the desired columns with a <code>SELECT</code> query, and write the results with <code>Text::CSV</code> or <code>Text::CSV_XS</code>.</p>\n\n<p>For more details, see <a href=\"https://metacpan.org/pod/DBD::CSV\" rel=\"nofollow noreferrer\">the DBD::CSV documentation</a> or e.g. <a href=\"http://www.win.tue.nl/~rp/laquso-bin/csvsql\" rel=\"nofollow noreferrer\">this simple wrapper script for querying CSV files</a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 10183009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f920f96dfdb977198ded15c9de90f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Janardana Raju", "link": "https://stackoverflow.com/users/10183009/janardana-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1538761276, "creation_date": 1538674374, "last_edit_date": 1538680089, "question_id": 52652465, "link": "https://stackoverflow.com/questions/52652465/how-to-filter-columns-from-csv-file-based-on-names-of-columns", "title": "How to filter columns from CSV file based on names of columns", "body": "<p>I am using the CSV data like below. I don't want to use user and timestamp from csv file. I may add few columns or delete columns.</p>\n\n<p>I didnt find the any suitable method in Text CSV. \nPlease let me know if any method or module is available</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>UniqueId, Name, description, user,timestamp     \n1,jana,testing,janardar,12-10-2018:00:\n</code></pre>\n\n\n\n<pre><code>sub _filter_common_columns_from_csv{\n\n    my $csvfile = shift;\n    my $CSV = Text::CSV_XS-&gt;new(\n                                {\n                                    binary =&gt; 1,\n                                    auto_diag =&gt; 3,\n                                    allow_quotes =&gt; 0,\n                                    eol =&gt; $/ \n                                });\n    my $_columns ||= do {\n    open(my $fh, '&lt;', $csvfile) or die $!;\n    my @cols = @{ $CSV-&gt;getline($fh) };\n    close $fh or die $!;\n    for (@cols) { s/^\\s+//; s/\\s+$//; }\n        \\@cols;\n    };\n    my @columns = @{ $_columns };     \n    my %deleted;                        \n    my @regexes = qw(user timestamp);\n    foreach my $regex (@regexes) {\n            foreach my $i (0 .. ($#columns - 1)) {\n                    my $col = $columns[$i];\n                       $deleted{$i} = $col if $col =~ /$regex/;\n            }\n    }\n\n    my @wanted_columns = grep { !$deleted{$_} } 0 .. $#columns - 1;\n    my $input_temp = \"$ENV{HOME}/output/temp_test.csv\";\n\n\n    open my $tem, \"&gt;\",$input_temp or die \"$input_temp: $!\";\n\n    open(my $fh, '&lt;', $csvfile) or die $!;\n\n    while (my $row = $CSV-&gt;getline($fh)) {\n           my @fields = @$row;\n              $CSV-&gt;print($tem, [ @fields[@wanted_columns] ]) or $CSV-&gt;error_diag;\n    }\n    close $fh or die $!;\n    close $tem or die $!;\n\n    return $input_temp;\n}\n</code></pre>\n"}, {"tags": ["multithreading", "perl", "memory", "centos", "thread-safety"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1538675767, "post_id": 52652292, "comment_id": 92237171, "body": "<code>use diagnostics;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538681978, "post_id": 52652292, "comment_id": 92239426, "body": "I seriously doubt the code you presented gives the issue you describe. (It doesn&#39;t even run, for starters.) /// I suspect an XS-based module that isn&#39;t thread-safe. /// I&#39;ve had problems passing arguments to threads before, so you might want to try replacing <code>\\&amp;sub1, $arg1, $arg2 , $arg2, $THREADS1, $THREADS2</code> with <code>sub { sub1($arg1, $arg2 , $arg2, $THREADS1, $THREADS2) }</code> /// Could also try using Thread::Queue::Any instead of Thread::Queue."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538682203, "post_id": 52652292, "comment_id": 92239533, "body": "What&#39;s with using <code>our</code> instead of <code>my</code>???"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538689315, "post_id": 52652292, "comment_id": 92242385, "body": "<code>for(my $i = 0; $i&lt;$var; $i++)</code> is better written <code>for my $i (0..$var-1)</code>"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538748739, "post_id": 52652292, "comment_id": 92264867, "body": "@ikegami I wanted to share the <code>$THREADS1</code> to all the  threads. to send <code>undef</code> to the number of <code>$THREADS1</code> when all the work items are completed."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538755180, "post_id": 52652292, "comment_id": 92268606, "body": "<code>our</code> doesn&#39;t help you do that"}, {"owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "edited": false, "score": 0, "creation_date": 1538808310, "post_id": 52652292, "comment_id": 92281943, "body": "I have added more details to my question as how I am handling the stopping of threads..."}], "owner": {"reputation": 366, "user_id": 4488775, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-c7dUxZESZzs/AAAAAAAAAAI/AAAAAAAAAGI/OxEft3Nihy4/photo.jpg?sz=128", "display_name": "Bala Krishnan", "link": "https://stackoverflow.com/users/4488775/bala-krishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1538808281, "creation_date": 1538673638, "last_edit_date": 1538808281, "question_id": 52652292, "link": "https://stackoverflow.com/questions/52652292/scalars-leaked-2-scalars-leaked-2-warning-in-a-multi-threaded-perl-script", "title": "Scalars leaked: -2 Scalars leaked: 2 warning in a multi threaded perl script", "body": "<p>During the end of my multi threaded perl script, I get error like below. The number changes from time to time.</p>\n\n<pre><code>Scalars leaked: -2 \nScalars leaked:2\n</code></pre>\n\n<p>What could be the cause of this problem? Are they just warnings?</p>\n\n<p>I have created my threads in the following way:</p>\n\n<pre><code>    our $threads1=3;\n    our $threads2=3;\n\n    for(my $i = 0; $i&lt;$threads1; $i++)\n    {\n        $threadpool1[$i] = threads-&gt;create( \\&amp;sub1, $arg1, $arg2 , $arg2, $threads1, $threads2);\n    }\n\n\n    #Add work to queue1\n    foreach my $work (keys %{$workobj})\n    {\n        $queue1-&gt;enqueue( $work );\n    }\n\n    for(my $i = 0; $i&lt;$threads2; $i++)\n    {\n        $threadpool2[$i] = threads-&gt;create( \\&amp;sub2, $arg1 , $arg2);\n    }\n\n    #Wait until worker threads complete the work\n    $_-&gt;join for @threadpool1;\n    $_-&gt;join for @threadpool2;\n\n    sub sub1($arg1, $arg2 , $arg2, $threads1, $threads2)\n    {\n        while($queue1-&gt;dequeue)\n        {\n              #do some work\n              #send work to queue 2\n              $queue2-&gt;enqueue(work);\n              $queue1-&gt;enqueue(undef x threads1);\n        }\n        # if all work has been sent to second queue, send undef to second set of threads\n        $queue1-&gt;enqueue(undef x $threads2);\n        return;\n    }\n\n    sub sub1($arg1, $arg2)\n    {\n        while($queue2-&gt;dequeue)\n        {\n              #do some work\n        }\n        return;\n    }\n</code></pre>\n\n<p>Any ideas on where I am going wrong?</p>\n"}, {"tags": ["html", "perl", "rfc3986"], "comments": [{"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1538685418, "post_id": 52649532, "comment_id": 92240939, "body": "The first two // after the : are part of the scheme (or fixed after the scheme more precisely), not the relative path. The examples are relative paths, based off a starting URL. Otherwise the path is opaque, it is the problem of the webserver to see if <code>&#47;&#47;</code> means <code>&#47;</code> to mean or not (for unix based ones without redirection rules, it will be, but it is not a property of the protocol). Also URIs are kind of superseded by IRIs (RFC3987) so that you even have more stranger cases to take into account, like direction of writing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "edited": false, "score": 0, "creation_date": 1538733955, "post_id": 52649532, "comment_id": 92256238, "body": "@Patrick Mevzek, Re &quot;<i>The first two // after the : are part of the scheme</i>&quot;, Nit: They are associated with the authority (the host). For example, <code>http:foo&#47;bar</code> is a valid URI, and so is <code>&#47;&#47;stackoverflow.com</code>"}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 0, "creation_date": 1538666194, "post_id": 52649713, "comment_id": 92232184, "body": "Yes, it may be simplified by browsers, but is original url valid still?"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": -1, "last_activity_date": 1538664688, "creation_date": 1538664688, "answer_id": 52649713, "question_id": 52649532, "link": "https://stackoverflow.com/questions/52649532/resolve-uri-with-multiple-slashes-in-relative-part/52649713#52649713", "title": "Resolve URI with multiple slashes in relative part", "body": "<p>No - <code>///g</code> would seem more equivalent to <code>/g</code> . The \"dot-segments\" <code>..</code> and <code>.</code> are what is used to navigate up and down the hierarchy with <code>http</code> URLs. See also the <a href=\"https://metacpan.org/pod/URI\" rel=\"nofollow noreferrer\">URI</a> module for handling paths in URIs.</p>\n"}, {"comments": [{"owner": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 0, "creation_date": 1538672549, "post_id": 52651267, "comment_id": 92235722, "body": "Ok, but this doesn&#39;t explain to me what to do next )"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538688974, "post_id": 52651267, "comment_id": 92242258, "body": "You&#39;ve found a bug in Mojo::URL! It doesn&#39;t properly follow &#167;5.2.2 of the aforementioned spec. <code>&#47;&#47;&#47;g</code> should produce <code>http:&#47;&#47;&#47;g</code> (not <code>http:&#47;&#47;a&#47;g</code>) and <code>&#47;&#47;&#47;&#47;g</code> should produce <code>http:&#47;&#47;&#47;&#47;g</code> (not <code>http:&#47;&#47;a&#47;&#47;g</code>).  <a href=\"https://pastebin.com/z1EWAwep\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538689081, "post_id": 52651267, "comment_id": 92242295, "body": "Now, <code>http:&#47;&#47;&#47;g</code> is a useless URI (having a blank authority). It would be interesting to see how web browsers handle <code>&#47;&#47;&#47;g</code>, but it&#39;ll have to wait."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 0, "creation_date": 1538949340, "post_id": 52651267, "comment_id": 92313264, "body": "I don&#39;t think this is a bug in Mojo::URL, but here&#39;s <a href=\"https://github.com/mojolicious/mojo/issues/1269\" rel=\"nofollow noreferrer\">issue #1269</a>. I think it&#39;s following 5.2.2 better than URI because that module changes the host to an empty string when it&#39;s a false value. It rests on what you think is between // and / and if you think a blank authority is defined. Is &quot;A component is undefined if its associated delimiter does not appear in the URI reference&quot; the only way to be undefined? That&#39;s not what it says, and that only applies to the base."}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 1, "last_activity_date": 1538669577, "creation_date": 1538669577, "answer_id": 52651267, "question_id": 52649532, "link": "https://stackoverflow.com/questions/52649532/resolve-uri-with-multiple-slashes-in-relative-part/52651267#52651267", "title": "Resolve URI with multiple slashes in relative part", "body": "<p>I was curious what <a href=\"https://mojolicious.org/perldoc/Mojo/URL\" rel=\"nofollow noreferrer\">Mojo::URL</a> would do so I checked. There's a big caveat because it doesn't claim to be strictly compliant:</p>\n\n<blockquote>\n  <p>Mojo::URL implements a subset of RFC 3986, RFC 3987 and the URL Living Standard for Uniform Resource Locators with support for IDNA and IRIs.</p>\n</blockquote>\n\n<p>Here's the program.</p>\n\n<pre><code>my @urls = qw(/g //g ///g ////g h//g g////h h///g:f\n    https:///stackoverflow.com////////a/////10161264/////6618577\n    );\nmy @parts = qw(scheme host port path query);\nmy $template = join \"\\n\", map { \"$_: %s\" } @parts;\n\nmy $base_url = Mojo::URL-&gt;new( 'http://a/b/c/d;p?q' );\n\nforeach my $u ( @urls ) {\n    my $url = Mojo::URL-&gt;new( $u )-&gt;base( $base_url )-&gt;to_abs;\n\n    no warnings qw(uninitialized);\n    say '-' x 40;\n    printf \"%s\\n$template\", $u, map { $url-&gt;$_() } @parts\n    }\n</code></pre>\n\n<p>Here's the output:</p>\n\n<pre><code>----------------------------------------\n/g\nscheme: http\nhost: a\nport:\npath: /g\nquery: ----------------------------------------\n//g\nscheme: http\nhost: g\nport:\npath:\nquery: ----------------------------------------\n///g\nscheme: http\nhost: a\nport:\npath: /g\nquery: ----------------------------------------\n////g\nscheme: http\nhost: a\nport:\npath: //g\nquery: ----------------------------------------\nh//g\nscheme: http\nhost: a\nport:\npath: /b/c/h/g\nquery: ----------------------------------------\ng////h\nscheme: http\nhost: a\nport:\npath: /b/c/g/h\nquery: ----------------------------------------\nh///g:f\nscheme: http\nhost: a\nport:\npath: /b/c/h/g:f\nquery: ----------------------------------------\nhttps:///stackoverflow.com////////a/////10161264/////6618577\nscheme: https\nhost:\nport:\npath: /stackoverflow.com////////a/////10161264/////6618577\nquery:\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 0, "creation_date": 1538731373, "post_id": 52655382, "comment_id": 92254744, "body": "Really great explanation. But even this took a certain amount of time to understand and to move on. I&#39;m trying to reproduce that steps by myself. Anyway, it looks like only your answer push me to the right direction."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 0, "creation_date": 1538733315, "post_id": 52655382, "comment_id": 92255885, "body": "There&#39;s a limit to how much I&#39;ll put in an answer! But I presented my answer in a way that made it easier to learn whatever the reader needed to learn to understand the answer. Glad it worked :)"}, {"owner": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 0, "creation_date": 1538733358, "post_id": 52655382, "comment_id": 92255907, "body": "You should write a &quot;rfc guide for dummies&quot; :)  One more question - empty authority  (&quot;&quot;) is the same in terms of rfc3986 as undefined?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 1, "creation_date": 1538733488, "post_id": 52655382, "comment_id": 92255982, "body": "No. &quot;<i>A component is undefined if its associated delimiter does not appear in the URI reference</i>&quot;. <code>&#47;g</code> has an undefined authority, and <code>&#47;&#47;&#47;g</code> has an empty one. &#167;5.2.2 specifically checks for an (un)defined one."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 0, "creation_date": 1538733714, "post_id": 52655382, "comment_id": 92256108, "body": "There&#39;s no disctinction between an empty path and an undefined path, however."}, {"owner": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "edited": false, "score": 1, "creation_date": 1538735595, "post_id": 52655382, "comment_id": 92257166, "body": "Eventually, I&#39;ve managed to fix bug in huge application which is based on this problem. Thank you! Think about writing guides, blogs, you&#39;re pretty good."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1538775924, "last_edit_date": 1538775924, "creation_date": 1538688413, "answer_id": 52655382, "question_id": 52649532, "link": "https://stackoverflow.com/questions/52649532/resolve-uri-with-multiple-slashes-in-relative-part/52655382#52655382", "title": "Resolve URI with multiple slashes in relative part", "body": "<p>I'll start by confirming that all the URIs you provided are valid, and by providing the outcome of the URI resolutions you mentioned (and the outcome of a couple of my own):</p>\n\n<pre><code>$ perl -MURI -e'\n   for my $rel (qw( /g //g ///g ////g h//g g////h h///g:f )) {\n      my $uri = URI-&gt;new($rel)-&gt;abs(\"http://a/b/c/d;p?q\");\n      printf \"%-20s + %-7s = %-20s   host: %-4s   path: %s\\n\",\n         \"http://a/b/c/d;p?q\", $rel, $uri, $uri-&gt;host, $uri-&gt;path;\n   }\n\n   for my $base (qw( http://host/a/b/c/d http://host/a/b/c//d )) {\n      my $uri = URI-&gt;new(\"../../e\")-&gt;abs($base);\n      printf \"%-20s + %-7s = %-20s   host: %-4s   path: %s\\n\",\n         $base, \"../../e\", $uri, $uri-&gt;host, $uri-&gt;path;\n   }\n'\nhttp://a/b/c/d;p?q   + /g      = http://a/g             host: a      path: /g\nhttp://a/b/c/d;p?q   + //g     = http://g               host: g      path:\nhttp://a/b/c/d;p?q   + ///g    = http:///g              host:        path: /g\nhttp://a/b/c/d;p?q   + ////g   = http:////g             host:        path: //g\nhttp://a/b/c/d;p?q   + h//g    = http://a/b/c/h//g      host: a      path: /b/c/h//g\nhttp://a/b/c/d;p?q   + g////h  = http://a/b/c/g////h    host: a      path: /b/c/g////h\nhttp://a/b/c/d;p?q   + h///g:f = http://a/b/c/h///g:f   host: a      path: /b/c/h///g:f\nhttp://host/a/b/c/d  + ../../e = http://host/a/e        host: host   path: /a/e\nhttp://host/a/b/c//d + ../../e = http://host/a/b/e      host: host   path: /a/b/e\n</code></pre>\n\n<hr>\n\n<p>Next, we'll look at the syntax of relative URIs, since that's what your question circles around.</p>\n\n<pre><code>relative-ref  = relative-part [ \"?\" query ] [ \"#\" fragment ]\n\nrelative-part = \"//\" authority path-abempty\n              / path-absolute\n              / path-noscheme\n              / path-empty\n\npath-abempty  = *( \"/\" segment )\npath-absolute = \"/\" [ segment-nz *( \"/\" segment ) ]\npath-noscheme = segment-nz-nc *( \"/\" segment )\npath-rootless = segment-nz *( \"/\" segment )\n\nsegment       = *pchar         ; 0 or more &lt;pchar&gt;\nsegment-nz    = 1*pchar        ; 1 or more &lt;pchar&gt;   nz = non-zero\n</code></pre>\n\n<p>The key things from these rules for answering your question:</p>\n\n<ul>\n<li>An absolute path (<code>path-absolute</code>) can't start with <code>//</code>. The first segment, if provided, must be non-zero in length. If the relative URI starts with <code>//</code>, what follows must be an <code>authority</code>.</li>\n<li><code>//</code> can otherwise occur in a path because segments can have zero-length.</li>\n</ul>\n\n<hr>\n\n<p>Now, let's look at each of the resolutions you provided in turn.</p>\n\n<p><code>/g</code> is an absolute path <code>path-absolute</code>, and thus a valid relative URI (<code>relative-ref</code>), and thus a valid URI (<code>URI-reference</code>).</p>\n\n<ul>\n<li><p>Parsing the URIs (say, using the regular expression in Appendix B) gives us the following:</p>\n\n<pre><code>Base.scheme:    \"http\"       R.scheme:    undef\nBase.authority: \"a\"          R.authority: undef\nBase.path:      \"/b/c/d;p\"   R.path:      \"/g\"\nBase.query:     \"q\"          R.query:     undef\nBase.fragment:  undef        R.fragment:  undef\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.2.2, we get:</p>\n\n<pre><code>T.path:         \"/g\"      ; remove_dot_segments(R.path)\nT.query:        undef     ; R.query\nT.authority:    \"a\"       ; Base.authority\nT.scheme:       \"http\"    ; Base.scheme\nT.fragment:     undef     ; R.fragment\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.3, we get:</p>\n\n<pre><code>http://a/g\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p><code>//g</code> is different. <code>//g</code> <em>isn't</em> an absolute path (<code>path_absolute</code>) because an absolute path can't start with an empty segment (<code>\"/\" [ segment-nz *( \"/\" segment ) ]</code>).</p>\n\n<p>Instead, it's follows the following pattern:</p>\n\n<pre><code>\"//\" authority path-abempty\n</code></pre>\n\n<ul>\n<li><p>Parsing the URIs (say, using the regular expression in Appendix B) gives us the following:</p>\n\n<pre><code>Base.scheme:    \"http\"       R.scheme:    undef\nBase.authority: \"a\"          R.authority: \"g\"\nBase.path:      \"/b/c/d;p\"   R.path:      \"\"\nBase.query:     \"q\"          R.query:     undef\nBase.fragment:  undef        R.fragment:  undef\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.2.2, we get the following:</p>\n\n<pre><code>T.authority:    \"g\"           ; R.authority\nT.path:         \"\"            ; remove_dot_segments(R.path)\nT.query:        \"\"            ; R.query\nT.scheme:       \"http\"        ; Base.scheme\nT.fragment:     undef         ; R.fragment\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.3, we get the following:</p>\n\n<pre><code>http://g\n</code></pre></li>\n</ul>\n\n<p><strong>Note</strong>: This contacts server <code>g</code>!</p>\n\n<hr>\n\n<p><code>///g</code> is similar to <code>//g</code>, except the authority is blank! This is surprisingly valid.</p>\n\n<ul>\n<li><p>Parsing the URIs (say, using the regular expression in Appendix B) gives us the following:</p>\n\n<pre><code>Base.scheme:    \"http\"       R.scheme:    undef\nBase.authority: \"a\"          R.authority: \"\"\nBase.path:      \"/b/c/d;p\"   R.path:      \"/g\"\nBase.query:     \"q\"          R.query:     undef\nBase.fragment:  undef        R.fragment:  undef\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.2.2, we get the following:</p>\n\n<pre><code>T.authority:    \"\"        ; R.authority\nT.path:         \"/g\"      ; remove_dot_segments(R.path)\nT.query:        undef     ; R.query\nT.scheme:       \"http\"    ; Base.scheme\nT.fragment:     undef     ; R.fragment\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.3, we get the following:</p>\n\n<pre><code>http:///g\n</code></pre></li>\n</ul>\n\n<p><strong>Note</strong>: While valid, this URI is useless because the server name (<code>T.authority</code>) is blank!</p>\n\n<hr>\n\n<p><code>////g</code> is the same as <code>///g</code> except the <code>R.path</code> is <code>//g</code>, so we get </p>\n\n<pre><code>    http:////g\n</code></pre>\n\n<p><strong>Note</strong>: While valid, this URI is useless because the server name (<code>T.authority</code>) is blank!</p>\n\n<hr>\n\n<p>The final three (<code>h//g</code>, <code>g////h</code>, <code>h///g:f</code>) are all relative paths (<code>path-noscheme</code>).</p>\n\n<ul>\n<li><p>Parsing the URIs (say, using the regular expression in Appendix B) gives us the following:</p>\n\n<pre><code>Base.scheme:    \"http\"       R.scheme:    undef\nBase.authority: \"a\"          R.authority: undef\nBase.path:      \"/b/c/d;p\"   R.path:      \"h//g\"\nBase.query:     \"q\"          R.query:     undef\nBase.fragment:  undef        R.fragment:  undef\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.2.2, we get the following:</p>\n\n<pre><code>T.path:         \"/b/c/h//g\"    ; remove_dot_segments(merge(Base.path, R.path))\nT.query:        undef          ; R.query\nT.authority:    \"a\"            ; Base.authority\nT.scheme:       \"http\"         ; Base.scheme\nT.fragment:     undef          ; R.fragment\n</code></pre></li>\n<li><p>Following the algorithm in \u00a75.3, we get the following:</p>\n\n<pre><code>http://a/b/c/h//g         # For h//g\nhttp://a/b/c/g////h       # For g////h\nhttp://a/b/c/h///g:f      # For h///g:f\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>I don't think the examples are suitable for answering what I think you really want to know, though.</p>\n\n<p>Take a look at the following two URIs. They <em>aren't</em> equivalent.</p>\n\n<pre><code>http://host/a/b/c/d     # Path has 4 segments: \"a\", \"b\", \"c\", \"d\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>http://host/a/b/c//d    # Path has 5 segments: \"a\", \"b\", \"c\", \"\", \"d\"\n</code></pre>\n\n<p>Most servers will treat them the same &mdash;which is fine since servers are free to interpret paths in any way they wish&mdash; but it makes a difference when applying relative paths. For example, if these were the base URI for <code>../../e</code>, you'd get</p>\n\n<pre><code>http://host/a/b/c/d + ../../e = http://host/a/e\n</code></pre>\n\n<p>and</p>\n\n<pre><code>http://host/a/b/c//d + ../../e = http://host/a/b/e\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 1984631, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nAflJ.jpg?s=128&g=1", "display_name": "Sergius", "link": "https://stackoverflow.com/users/1984631/sergius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 52655382, "answer_count": 3, "score": 0, "last_activity_date": 1538775924, "creation_date": 1538664152, "last_edit_date": 1538666272, "question_id": 52649532, "link": "https://stackoverflow.com/questions/52649532/resolve-uri-with-multiple-slashes-in-relative-part", "title": "Resolve URI with multiple slashes in relative part", "body": "<p>I have to write a script in perl which parses uris from html. Anyway, the real problem is how to resolve relative uris.</p>\n\n<p>I have base URI (base href in html) for example <a href=\"http://a/b/c/d;p?q\" rel=\"nofollow noreferrer\">http://a/b/c/d;p?q</a> (let's go through <a href=\"https://tools.ietf.org/html/rfc3986#section-5.4.1\" rel=\"nofollow noreferrer\">rfc3986</a>) and different other URIs:</p>\n\n<p>/g, //g, ///g, ////g, h//g, g////h, h///g:f</p>\n\n<p>In this RFC, section 5.4.1 (link above) there is only example of //g:</p>\n\n<p>\"//g\"           =  \"<a href=\"http://g\" rel=\"nofollow noreferrer\">http://g</a>\"</p>\n\n<p>What about all other cases? As far as I understood from <a href=\"https://tools.ietf.org/html/rfc3986#section-3.3\" rel=\"nofollow noreferrer\">rfc 3986, section 3.3</a>, multiple slashes are allowed. So, is following resolution \ncorrect?</p>\n\n<p>\"///g\"          = \"<a href=\"http://a/b/c///g\" rel=\"nofollow noreferrer\">http://a/b/c///g</a>\"</p>\n\n<p>Or what is should be? Does anyone can explain it better and prove it with not obsoleted rfc or documentation?</p>\n\n<p><strong>Update #1</strong>:\nTry to look at this working url - <a href=\"https:///stackoverflow.com////////a/////10161264/////6618577\" rel=\"nofollow noreferrer\">https:///stackoverflow.com////////a/////10161264/////6618577</a> </p>\n\n<p>What's going on here?</p>\n"}, {"tags": ["perl", "updates", "cpan"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1538666008, "post_id": 52648746, "comment_id": 92232049, "body": "It updates <b>all</b> outdated modules, not just those installed by a cpan client. That includes core ones and ones installed by your OS&#39;s package manager."}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538668275, "post_id": 52648746, "comment_id": 92233547, "body": "Another common tool for this task is <a href=\"https://metacpan.org/pod/cpan-outdated\" rel=\"nofollow noreferrer\">cpan-outdated</a> which can be used with either cpan or cpanm. Unfortunately there is no way to rollback updating CPAN modules in place without a package manager except by reinstalling the old versions again."}, {"owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "edited": false, "score": 2, "creation_date": 1538671131, "post_id": 52648746, "comment_id": 92235022, "body": "Of course there&#39;s a way to rollback changes. Use source control :)"}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 6026166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b65c865a36c1f49db8d99b0bddef16a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6026166/j-doe"}, "edited": false, "score": 0, "creation_date": 1538663229, "post_id": 52648876, "comment_id": 92230245, "body": "Thanks for the answer! Unfortunately I didn&#39;t make a backup (we are talking about <code>cpan -a</code>, right?). Guess I&#39;ll roll back to a system-backup if anything broke.  I still wonder why <code>cpan -u</code> updated modules, even though I had updated the systems software via the package manager shortly before. Shouldn&#39;t that include updates for the installed distribution?"}, {"owner": {"reputation": 1050, "user_id": 1636683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f282a2b7d41f9a3e3f9eced4c3fcf7?s=128&d=identicon&r=PG", "display_name": "Ron Bergin", "link": "https://stackoverflow.com/users/1636683/ron-bergin"}, "edited": false, "score": 1, "creation_date": 1538666205, "post_id": 52648876, "comment_id": 92232197, "body": "The repositories the system package managers point to often don&#39;t have the most current versions of perl modules and this is especially true on RedHat systems.  The cpan tool will pull the latest version available."}, {"owner": {"reputation": 10661, "user_id": 2430549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfc7728cf3e556a8b9da88e662f4fd3?s=128&d=identicon&r=PG", "display_name": "HoldOffHunger", "link": "https://stackoverflow.com/users/2430549/holdoffhunger"}, "edited": false, "score": 0, "creation_date": 1538671500, "post_id": 52648876, "comment_id": 92235207, "body": "If you update the CPAN JSON lib to 2.27, <code>print(0 ne JSON::true());</code> yields <code>&quot;Operation &quot;ne&quot;: no method found.&quot;</code>, but previously it yielded <code>&quot;1&quot;</code>.  Just wanted to throw in an actual example, good answer, upvoted."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 14, "last_activity_date": 1538662223, "creation_date": 1538662223, "answer_id": 52648876, "question_id": 52648746, "link": "https://stackoverflow.com/questions/52648746/why-should-i-not-update-all-my-cpan-modules/52648876#52648876", "title": "Why should I not update all my CPAN modules?", "body": "<blockquote>\n  <p>Why should this break anything?</p>\n</blockquote>\n\n<p>It shouldn't, but complex systems are complex and sometimes things do break (e.g. if a module is updated with a non-backwards compatible change, or depends on a C library which has bugs which only show up in combination with specific dependencies). </p>\n\n<blockquote>\n  <p>And how should I keep my CPAN modules up to date otherwise;</p>\n</blockquote>\n\n<p>Just keep backups in case things break.</p>\n\n<blockquote>\n  <p>Why did cpan -u upgrade stuff for ~15min even though I haven't installed a single CPAN module?</p>\n</blockquote>\n\n<p>Perl is distributed with a <a href=\"https://perldoc.perl.org/index-modules-A.html\" rel=\"noreferrer\">large collection of modules</a>, and other modules may have been installed by your distribution.</p>\n\n<blockquote>\n  <p>Can I revert the cpan -u? </p>\n</blockquote>\n\n<p>You can overwrite it with the backup that the documentation recommended you take.</p>\n\n<blockquote>\n  <p>Is it enough to delete ~/.cpan for this?</p>\n</blockquote>\n\n<p>No. That directory is used by the installer tool to cache data about available modules, to store source code, and to hold build artefacts. The installed files are written to your <code>lib</code> like any other library.</p>\n"}, {"comments": [{"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 0, "creation_date": 1538671451, "post_id": 52651656, "comment_id": 92235187, "body": "Tools like cpanm and Carton also make it easy to install modules to a localized local::lib on the fly, which may make it easier to test updates in a more isolated way."}, {"owner": {"reputation": 164, "user_id": 6026166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b65c865a36c1f49db8d99b0bddef16a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6026166/j-doe"}, "edited": false, "score": 0, "creation_date": 1538672799, "post_id": 52651656, "comment_id": 92235841, "body": "Thanks for the response! I don&#39;t really want a &quot;fresher&quot; perl (not 100% sure what that means), all I want is a way to keep the CPAN modules I use in projects secure and up to date. I find the idea of using git cool, but am not sure which directory I&#39;ll have to look for. Is it <code>~&#47;perl5</code>? And could I revert my <code>cpan -u</code> by deleting this directory?"}], "tags": [], "owner": {"reputation": 121105, "user_id": 2766176, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/edd8638efe875601bfe394a8aea5b16d?s=128&d=identicon&r=PG", "display_name": "brian d foy", "link": "https://stackoverflow.com/users/2766176/brian-d-foy"}, "is_accepted": false, "score": 2, "last_activity_date": 1538671018, "creation_date": 1538671018, "answer_id": 52651656, "question_id": 52648746, "link": "https://stackoverflow.com/questions/52648746/why-should-i-not-update-all-my-cpan-modules/52651656#52651656", "title": "Why should I not update all my CPAN modules?", "body": "<ol>\n<li><p>New or update code is new or updated bugs. I have the opposite view of Quentin: why would changing a bunch of stuff keep not break things? That's what I expect with most updates. However, the Perl 5 porters take great pains to test <em>perl</em> distributions against as much of CPAN as they can. That doesn't mean that your particular use of a module (and how you've worked around existing bugs) is stable.</p></li>\n<li><p>Some modules that come with perl are also on CPAN. These are \"dual-lived\" modules and they might update from CPAN.</p></li>\n<li><p>The cpan tool doesn't revert anything for you, but you can do what I do sometimes. Make your installation a git repo. Branch when you change it. Try the branch with your code. If anything goes wrong you can always switch back to master. You don't even need to commit the changes! Tools such as <a href=\"https://metacpan.org/pod/Pinto\" rel=\"nofollow noreferrer\">Pinto</a> help you manage sets of Perl modules.</p></li>\n</ol>\n\n<hr/>\n\n<p>There are some other things to consider. </p>\n\n<p>First, I recommend that you don't mess with the system <em>perl</em>. Let the system do that. If you want a fresher <em>perl</em> that you manage yourself, install a different one. You might like <a href=\"https://perlbrew.pl\" rel=\"nofollow noreferrer\">perlbrew</a> for that (I don't, but that's no big deal).</p>\n\n<p>You can screw up that one as much as you like and the system won't start doing weird things. Consider major changes like <a href=\"https://www.effectiveperlprogramming.com/2017/01/v5-26-removes-dot-from-inc/\" rel=\"nofollow noreferrer\">removing . from @INC</a> and <a href=\"https://www.effectiveperlprogramming.com/2017/04/you-must-escape-the-left-brace-in-a-regex/\" rel=\"nofollow noreferrer\">Deprecating unescaped left braces in regexes</a>. Those were changes in <em>perl</em> but they broke some important things.</p>\n\n<p>Second, you can configure cpan to install somewhere besides the system directories. The <code>-I</code> switch will use <a href=\"https://metacpan.org/pod/local::lib\" rel=\"nofollow noreferrer\">local::lib</a> for you. Besides that, you can <a href=\"https://stackoverflow.com/a/543918/2766176\">configure it manually</a>.</p>\n"}], "owner": {"reputation": 164, "user_id": 6026166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b65c865a36c1f49db8d99b0bddef16a?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6026166/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "accepted_answer_id": 52648876, "answer_count": 2, "score": 6, "last_activity_date": 1538671041, "creation_date": 1538661839, "last_edit_date": 1538671041, "question_id": 52648746, "link": "https://stackoverflow.com/questions/52648746/why-should-i-not-update-all-my-cpan-modules", "title": "Why should I not update all my CPAN modules?", "body": "<p>I thought it would be a good idea in general to update all software on my computer regularly. Since CPAN modules are not managed by my package manager I figured I should do <code>cpan -u</code> every once in a while. It was only after executing this that I read the man page note on this:</p>\n\n<pre><code>-u  Upgrade all installed modules. Blindly doing this can really break\n   things, so keep a backup.\n</code></pre>\n\n<ol>\n<li>Why should this break anything? And how should I keep my CPAN modules up to date otherwise; do I need to keep track of all manually installed modules (<code>cpan</code> doesn't seem to do this) and only update those regularly? How about the dependencies of my manually installed modules?</li>\n<li>Why did <code>cpan -u</code> upgrade stuff for ~15min even though I haven't installed a single CPAN module?</li>\n<li>Can I revert the <code>cpan -u</code>? Is it enough to delete <code>~/.cpan</code> for this?</li>\n</ol>\n"}, {"tags": ["perl", "tk", "perltk"], "answers": [{"comments": [{"owner": {"reputation": 5634, "user_id": 4601149, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/x0fdS.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4601149/dan"}, "edited": false, "score": 0, "creation_date": 1538727349, "post_id": 52648975, "comment_id": 92252531, "body": "Thanks for the answer. That is what I was after"}], "tags": [], "owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "is_accepted": true, "score": 3, "last_activity_date": 1539008152, "last_edit_date": 1539008152, "creation_date": 1538662511, "answer_id": 52648975, "question_id": 52648702, "link": "https://stackoverflow.com/questions/52648702/stringify-struct-in-perl/52648975#52648975", "title": "Stringify Struct in Perl", "body": "<p><strong>Massive Edit</strong></p>\n\n<p>Change </p>\n\n<pre><code>@updateableList = @{$hashOfArraysOfStruct{$listBox1-&gt;get($listBox1-&gt;curselection)}};\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@updateableList = map { $_-&gt;name() } @{$hashOfArraysOfStruct{$listBox1-&gt;get($listBox1-&gt;curselection)}};\n</code></pre>\n\n<p>To extract the list of names from the list of structs;</p>\n"}], "owner": {"reputation": 5634, "user_id": 4601149, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/x0fdS.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/4601149/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 52648975, "answer_count": 1, "score": 3, "last_activity_date": 1539008152, "creation_date": 1538661710, "last_edit_date": 1538725111, "question_id": 52648702, "link": "https://stackoverflow.com/questions/52648702/stringify-struct-in-perl", "title": "Stringify Struct in Perl", "body": "<p>In my program, I have a section of code that updates a list box depending on the value of another list box.</p>\n\n<p>The code that does this looks a little like this.</p>\n\n<pre><code>$listBox1-&gt;bind('&lt;&lt;ListboxSelect&gt;&gt;' =&gt; sub {\n    $listBox2-&gt;delete(0, 'end');\n    for(@{$hashOfArraysOfStruct{$listBox1-&gt;get($listBox1-&gt;curselection)}}) {\n        $listBox2-&gt;insert('end', $_-&gt;name);\n    }\n});\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/CfrvFm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CfrvFm.png\" alt=\"enter image description here\"></a></p>\n\n<p>This works fine. However, I have found it easier to simply use a list and manipulate the list on the <code>&lt;&lt;ListboxSelect&gt;&gt;</code>. I have bound this list to the list box using <code>-listvariable</code>.</p>\n\n<p>The code to do this looks a bit like</p>\n\n<pre><code>$listBox1-&gt;bind('&lt;&lt;ListboxSelect&gt;&gt;' =&gt; sub {\n    @updateableList = @{$hashOfArraysOfStruct{$listBox1-&gt;get($listBox1-&gt;curselection)}};\n});\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rEY9sm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rEY9sm.png\" alt=\"enter image description here\"></a></p>\n\n<p>The problem with this approach is, as <code>hashOfArraysOfStruct</code>, contains structures, the list box contains values such as <code>MyStruct=HASH(0x31d7e3c)</code>.</p>\n\n<p>Is there any way to display the <code>name</code> variable of the struct <code>MyStruct</code> without looping through the whole array and individually inserting each result into the list box?</p>\n\n<hr>\n\n<p><strong>MCVE</strong></p>\n\n<pre><code>use strict;\nuse warnings;\nuse Tk;\nuse Class::Struct;\n\nstruct MyStruct =&gt; {\n    name =&gt; '$',\n    group =&gt; '$'\n};\n\nmy %hashOfArraysOfStruct = (\n    A =&gt; [ \n        MyStruct-&gt;new(name =&gt; 'Phil', group =&gt; 'A'),\n        MyStruct-&gt;new(name =&gt; 'Ian', group =&gt; 'A'),\n        MyStruct-&gt;new(name =&gt; 'George', group =&gt; 'A')\n    ],\n    B =&gt; [ \n        MyStruct-&gt;new(name =&gt; 'Mac', group =&gt; 'B'),\n        MyStruct-&gt;new(name =&gt; 'Will', group =&gt; 'B')\n    ],\n    C =&gt; [ \n        MyStruct-&gt;new(name =&gt; 'Cath', group =&gt; 'C'),\n        MyStruct-&gt;new(name =&gt; 'Thom', group =&gt; 'C'),\n        MyStruct-&gt;new(name =&gt; 'Richard', group =&gt; 'C'),\n        MyStruct-&gt;new(name =&gt; 'Paul', group =&gt; 'C'),\n        MyStruct-&gt;new(name =&gt; 'Nick', group =&gt; 'C')\n    ]\n);\n\nmy $mainWindow = MainWindow-&gt;new();\n\nmy @listOne = sort(keys %hashOfArraysOfStruct);\n\n############################################\n#Route One\n#Less efficient as has to loop through all the values\n#But it displays the name variable of MyStruct\nmy $listBox1 = $mainWindow-&gt;Scrolled(\"Listbox\", -scrollbars =&gt; \"osoe\", -selectmode =&gt; \"single\", -listvariable =&gt; \\@listOne)-&gt;pack;\nmy $listBox2 = $mainWindow-&gt;Scrolled(\"Listbox\", -scrollbars =&gt; \"osoe\", -selectmode =&gt; \"single\")-&gt;pack;\n\n$listBox1-&gt;bind('&lt;&lt;ListboxSelect&gt;&gt;' =&gt; sub {\n    $listBox2-&gt;delete(0, 'end');\n    for(@{$hashOfArraysOfStruct{$listBox1-&gt;get($listBox1-&gt;curselection)}}) {\n        $listBox2-&gt;insert('end', $_-&gt;name);\n    }\n});\n############################################\n\n############################################\n#Route Two\n#Works but displays in the form of MyStruct=HASH(0x31d7e3c)\n#my @updateableList;\n#my $listBox1 = $mainWindow-&gt;Scrolled(\"Listbox\", -scrollbars =&gt; \"osoe\", -selectmode =&gt; \"single\", -listvariable =&gt; \\@listOne)-&gt;pack;\n#my $listBox2 = $mainWindow-&gt;Scrolled(\"Listbox\", -scrollbars =&gt; \"osoe\", -selectmode =&gt; \"single\", -listvariable =&gt; \\@updateableList)-&gt;pack;\n\n#$listBox1-&gt;bind('&lt;&lt;ListboxSelect&gt;&gt;' =&gt; sub {\n#   @updateableList = @{$hashOfArraysOfStruct{$listBox1-&gt;get($listBox1-&gt;curselection)}};\n#});\n############################################\n\n############################################\n#What I would like to happen\n#I would like to use route two but when the struct is displayed\n#in the list box, instead of being in Route Twos format, it should\n#display the name variable of MyStruct.\n############################################\n\nMainLoop;\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1538662217, "post_id": 52647965, "comment_id": 92229523, "body": "Thanks, good idea! Could you please give a look at the updated question?"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "reply_to_user": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "edited": false, "score": 0, "creation_date": 1538662510, "post_id": 52647965, "comment_id": 92229729, "body": "I don&#39;t understand what you want to do there. What is the string <code>&amp;My::Package::A::V1</code> supposed to be? How is <code>Some::Package::Z</code> different from <code>My::Package::Z</code> ?"}, {"owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "edited": false, "score": 1, "creation_date": 1538668450, "post_id": 52647965, "comment_id": 92233637, "body": "Another option for functions that doesn&#39;t require turning off strict: <code>my $subref = &quot;My::Package::A&quot;-&gt;can($api_version)</code>"}], "tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": true, "score": 3, "last_activity_date": 1538663200, "last_edit_date": 1538663200, "creation_date": 1538659690, "answer_id": 52647965, "question_id": 52647643, "link": "https://stackoverflow.com/questions/52647643/different-new-based-on-condition/52647965#52647965", "title": "Different new based on condition", "body": "<p>You can store the class in a string and use it to reference the package:</p>\n\n<pre><code>my $api_version;\nif($someCondition) {\n    $api_version = 'V1';\n} else {\n    $api_version = 'V2';\n}\ndie \"No API version found\" unless $api_version;\n\nmy $A = \"My::Package::A::$api_version\"-&gt;new();\nmy $B = \"My::Package::B::$api_version\"-&gt;new();\nmy $C = \"My::Package::C::$api_version\"-&gt;new();\n\n# Have fun with $C\n</code></pre>\n\n<p>If you also want to call functions in the namespaces (as you do with your expanded question), the easy approach is to switch off <code>strict</code> and just call the functions using their name:</p>\n\n<pre><code>my $make_A;\n{\n    no strict 'refs';\n    $make_A = \\&amp;{ \"My::Package::A::$api_version\" };\n}\nmy $C = Some::Package::Z-&gt;new(\n  myPackageA =&gt; $make_A-&gt;(),\n);\n</code></pre>\n"}], "owner": {"reputation": 5320, "user_id": 4480180, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1970535e346ac19a4642c5ac27c97998?s=128&d=identicon&r=PG&f=1", "display_name": "justHelloWorld", "link": "https://stackoverflow.com/users/4480180/justhelloworld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 52647965, "answer_count": 1, "score": 1, "last_activity_date": 1538663200, "creation_date": 1538658756, "last_edit_date": 1538662800, "question_id": 52647643, "link": "https://stackoverflow.com/questions/52647643/different-new-based-on-condition", "title": "Different new based on condition", "body": "<p>I have this Perl code:</p>\n\n<pre><code>my $C;\n\nif($someCondition) {\n    my $A = My::Package::A::V1-&gt;new();\n    my $B = My::Package::B::V1-&gt;new();\n    $C = My::Package::C::V1-&gt;new();\n} else {\n    my $A = My::Package::A::V2-&gt;new();\n    my $B = My::Package::B::V2-&gt;new();\n    $C = My::Package::C::V2-&gt;new();\n}\n# Have fun with $C\n</code></pre>\n\n<p>I find this very redundant, considering that the only difference is <code>V1</code> or <code>V2</code> based on <code>$someCondition</code>. Is there any way to do something like <code>my $A = My::Package::A::V{$someCondition ? 1 : 2}-&gt;new();</code>?</p>\n\n<hr>\n\n<p>What if I have also:</p>\n\n<pre><code>my $C;\nif($someCondition) {\n    my $C = Some::Package::Z-&gt;new(\n      myPackageA =&gt; &amp;My::Package::A::V1\n    );\n} else {\n    my $C = Some::Package::Z-&gt;new(\n      myPackageA =&gt; &amp;My::Package::A::V2\n    );\n}\n</code></pre>\n\n<p>For this one I tried:</p>\n\n<pre><code>my $api_version;\nif($someCondition) {\n    $api_version = 'V1';\n} else {\n    $api_version = 'V2';\n}\nmy $C = Some::Package::Z-&gt;new(\n    myPackageA =&gt; \"&amp;My::Package::A::$api_version\"\n);\n</code></pre>\n\n<p>But I get the error: <code>Can't call method new on an undefined value</code></p>\n"}, {"tags": ["perl", "reference", "hashmap", "dereference"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1538658421, "post_id": 52647468, "comment_id": 92226792, "body": "Seems like the hash <code>%hash</code> is undefined: <code>&#39;HASH(0x55948e0b06b0)&#39; =&gt; undef</code>"}, {"owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "edited": false, "score": 2, "creation_date": 1538658613, "post_id": 52647468, "comment_id": 92226950, "body": "Look at the documentation of ` $vars-&gt;getVarHash` - it returns a hash reference, not a hash. Use <code>my $hash =  $vars-&gt;getVarHash; print Dumper $hash;</code> instead."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1538659812, "post_id": 52647468, "comment_id": 92227774, "body": "Always <code>use strict; use warnings;</code>. You should&#39;ve gotten a warning for that hash assignment."}, {"owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "edited": false, "score": 0, "creation_date": 1538724742, "post_id": 52647468, "comment_id": 92251177, "body": "thanks for your help, very solid answers here, you guys solved my problem. sadly dont have the reputation to upvote yet."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "edited": false, "score": 0, "creation_date": 1538724661, "post_id": 52648181, "comment_id": 92251132, "body": "thank you very much, thats a great answer. sadly, i dont have the reputation to upvote yet. this prints out the entire hash, which seems to be a hash of hashes of hashes, now i only have to figure out how to store the values of the &quot;most inner&quot; hash in arrays, but even for that you already gave me a link."}, {"owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "edited": false, "score": 0, "creation_date": 1538725078, "post_id": 52648181, "comment_id": 92251369, "body": "i changed the title of the question since you said that dereferencing makes no sense here"}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 8, "last_activity_date": 1538660271, "creation_date": 1538660271, "answer_id": 52648181, "question_id": 52647468, "link": "https://stackoverflow.com/questions/52647468/unknown-hash-of-hashes-of-hashes/52648181#52648181", "title": "Unknown Hash of Hashes of Hashes", "body": "<p>The basic problem is that you can only dereference references. A hash is not a reference, so \"dereference a hash\" doesn't make sense.</p>\n\n<p>Your dumper output,</p>\n\n<pre><code>$VAR1 = {\n          'HASH(0x55948e0b06b0)' =&gt; undef\n        };\n</code></pre>\n\n<p>doesn't show a nested data structure or reference or anything. It's literally a one-element hash whose (single) key is the string <code>\"HASH(0x55948e0b06b0)\"</code> and whose value is <code>undef</code>. There's nothing you can do with this structure.</p>\n\n<p>What probably happened is that <code>getVarHash</code> returns a reference to a hash (a single value), which (by assigning to a hash) you've implicitly converted to a key whose corresponding value is <code>undef</code>. Hash keys are always strings, so the original reference value was lost.</p>\n\n<p>Perl can tell you about this particular problem. You should always start your Perl files with</p>\n\n<pre><code>use strict;\nuse warnings;\n</code></pre>\n\n<p>The warning for this particular mistake is</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Reference found where even-sized list expected at foo.pl line 123.\n</code></pre>\n\n<hr>\n\n<p>The solution is to store the returned reference in a scalar variable:</p>\n\n<pre><code>my $hash = $vars-&gt;getVarHash;\nprint Dumper($hash);\n</code></pre>\n\n<p>Then you can use all the usual methods (as described in e.g. <a href=\"https://perldoc.pl/perlreftut#Using-References\" rel=\"noreferrer\"><code>perldoc perlreftut</code></a>) to dereference it and access its contents, such as <code>keys %$hash</code>, <code>$hash-&gt;{$key}</code>, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "edited": false, "score": 0, "creation_date": 1538724363, "post_id": 52648591, "comment_id": 92250970, "body": "thank you very much, great answer, sadly i dont have the reputation to upvote yet."}], "tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1538661402, "creation_date": 1538661402, "answer_id": 52648591, "question_id": 52647468, "link": "https://stackoverflow.com/questions/52647468/unknown-hash-of-hashes-of-hashes/52648591#52648591", "title": "Unknown Hash of Hashes of Hashes", "body": "<p>I'm not sure where <code>getVarHash()</code> is defined, but (as others have said) it looks like it returns a hash reference, not a hash as you're assuming.</p>\n\n<p>You could store the returned hash reference in a scalar and use it as a reference:</p>\n\n<pre><code>my $hash = $vars-&gt;getVarHash;\nprint Dumper($hash);\n</code></pre>\n\n<p>That's probably the best approach, but it has one disadvantage. If you have code that accesses your hash:</p>\n\n<pre><code>say $hash{foo}; # or whatever\n</code></pre>\n\n<p>Then you'll need to rewrite it to use a hash reference instead:</p>\n\n<pre><code>say $hash-&gt;{foo}; # or whatever\n</code></pre>\n\n<p>An alternative approach is to dereference the value that comes back from the method so that you can use it as a hash.</p>\n\n<pre><code>my %hash = %{ $vars-&gt;getVarHash };\n</code></pre>\n\n<p>That way, the rest of your code will work as expected without making changes.</p>\n"}], "owner": {"reputation": 51, "user_id": 10456591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc461f0401c3ef75676c41ede4899f3?s=128&d=identicon&r=PG&f=1", "display_name": "CaptainCovfefe", "link": "https://stackoverflow.com/users/10456591/captaincovfefe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 52648181, "answer_count": 2, "score": 2, "last_activity_date": 1538724806, "creation_date": 1538658234, "last_edit_date": 1538724806, "question_id": 52647468, "link": "https://stackoverflow.com/questions/52647468/unknown-hash-of-hashes-of-hashes", "title": "Unknown Hash of Hashes of Hashes", "body": "<p>i can fetch data from a Database with the following perl code:</p>\n\n<pre><code>my %hash = $vars-&gt;getVarHash;   #load data into a hash\nprint Dumper(\\%hash);\n</code></pre>\n\n<p>The output of the Dumper looks like this:</p>\n\n<pre><code>$VAR1 = {\n          'HASH(0x55948e0b06b0)' =&gt; undef\n        };\n</code></pre>\n\n<p>Now i know that this hash points to a hash of variables, and each of them points to a list of options for each variable (i guess a \"hash of hashes\"), sth like this:</p>\n\n<pre><code>HASH(0x55948e0b06b0) --&gt; Variable_a --&gt; Option_a_1, Option_a_2 ...\n                     --&gt; Variable_b --&gt; Option_b_1, Option_b_2 ...\n                     --&gt; Variable_c --&gt; ...\n</code></pre>\n\n<p><strong>How do i correctly dereference this hash so i can get the values of the Variables and each of is Options?</strong></p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 3649, "user_id": 10404329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c51b790b37922d4e80d59b9873cec?s=128&d=identicon&r=PG", "display_name": "Corion", "link": "https://stackoverflow.com/users/10404329/corion"}, "is_accepted": false, "score": 1, "last_activity_date": 1538655783, "creation_date": 1538655783, "answer_id": 52646618, "question_id": 52643924, "link": "https://stackoverflow.com/questions/52643924/reading-xlsx-from-another-xlsx-file/52646618#52646618", "title": "Reading Xlsx from another Xlsx file", "body": "<p>This is easy on Windows if your target machine also has Microsoft Excel installed.</p>\n\n<p>Use the <a href=\"https://metacpan.org/pod/Win32::OLE\" rel=\"nofollow noreferrer\">Win32::OLE</a> module to create an instance of Excel, open your master file <code>A.xlsx</code> and then iterate over its <code>-&gt;{OLEObjects}</code> property:</p>\n\n<pre><code>#!perl\nuse strict;\nuse warnings;\nuse Win32::OLE 'in';\n$ex = Win32::OLE-&gt;new('Excel.Application') or die \"oops\\n\";\nmy $Axlsx = $ex-&gt;Open('C:\\\\Path\\\\To\\\\A.xlsx');\nmy $i=0;\nfor my $embedded (in $Axlsx-&gt;OLEObjects) {\n    $embedded-&gt;Object-&gt;Activate();\n    $embedded-&gt;Object-&gt;SaveAs(\"test$i++.xlsx\");\n    $embedded-&gt;Object-&gt;Close;\n}\n</code></pre>\n\n<p>After saving them, you can treat them as normal Excel files. Alternatively, you can work directly with <code>$embedded-&gt;Object</code>, but as you haven't told us what exactly you need to do, it's hard to give specific advice.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/29913191/save-as-an-excel-file-embedded-in-another-excel-file\">Save as an Excel file embedded in another Excel file</a></p>\n"}], "owner": {"reputation": 1, "user_id": 10455870, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JJ1tHl5-hlg/AAAAAAAAAAI/AAAAAAAAANI/LNrXp5mSQHk/photo.jpg?sz=128", "display_name": "Viswarka Chainulu", "link": "https://stackoverflow.com/users/10455870/viswarka-chainulu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1538655783, "creation_date": 1538647184, "question_id": 52643924, "link": "https://stackoverflow.com/questions/52643924/reading-xlsx-from-another-xlsx-file", "title": "Reading Xlsx from another Xlsx file", "body": "<p>I have few Xlsx files say X.xlsx,Y.xlsx,Z.XLSX and I kept those three Xlsx files in another xlsx file say A.xlsx. Now I want to ready the content in the three xlsx files(x,y,z) at a time through A.xlsx.</p>\n\n<p>Can any one help me on this.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["perl", "xml-attribute", "xml-libxml"], "comments": [{"owner": {"reputation": 3509, "user_id": 4243840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaeabd769bae1bf82fd4b8882fed6653?s=128&d=identicon&r=PG", "display_name": "JGNI", "link": "https://stackoverflow.com/users/4243840/jgni"}, "edited": false, "score": 0, "creation_date": 1538643894, "post_id": 52642855, "comment_id": 92218041, "body": "What type of object is $body, and what is the data it&#39;s accessing."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 5, "creation_date": 1538644466, "post_id": 52642855, "comment_id": 92218386, "body": "You search for <code>a</code> elements in the entire document (because you used  <code>&#47;&#47;a</code> instead of <code>.&#47;&#47;a</code> or <code>descendant::a</code>), and it&#39;s possible there are 100 <code>a</code> elements in the document, but that none that are descendants of <code>$body</code>. But we can&#39;t tell for sure, because you didn&#39;t demonstrate the problem you are having. Please provide a minimal, runnable demonstration of the problem. (See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 3, "creation_date": 1538644550, "post_id": 52642855, "comment_id": 92218433, "body": "Note that preceding your snippet with <code>use XML::LibXML; my $doc = XML::LibXML-&gt;new-&gt;parse_string(&#39;&lt;body&gt;&lt;a&gt;&lt;&#47;a&gt;&lt;a&gt;&lt;&#47;a&gt;&lt;&#47;body&gt;&#39;&zwnj;&#8203;); my $body = $doc;</code> or <code>use XML::LibXML; my $doc = XML::LibXML-&gt;new-&gt;parse_string(&#39;&lt;body&gt;&lt;a&gt;&lt;&#47;a&gt;&lt;a&gt;&lt;&#47;a&gt;&lt;&#47;body&gt;&#39;&zwnj;&#8203;); my ($body) = $doc-&gt;findnodes(&#39;body&#39;);</code> does not yield the output you claim."}], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 1118719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47edd1ee4d973c50bbe7991bb063d09d?s=128&d=identicon&r=PG", "display_name": "Dan Jacobson \u7a4d\u4e39\u5c3c", "link": "https://stackoverflow.com/users/1118719/dan-jacobson-%e7%a9%8d%e4%b8%b9%e5%b0%bc"}, "is_accepted": false, "score": 0, "last_activity_date": 1575210507, "last_edit_date": 1575210507, "creation_date": 1538760001, "answer_id": 52670562, "question_id": 52642855, "link": "https://stackoverflow.com/questions/52642855/setattribute-doesnt-affect-tostring-of-containing-element/52670562#52670562", "title": "setAttribute doesn&#39;t affect toString of containing element", "body": "<p>As described <a href=\"https://stackoverflow.com/questions/52642855/setattribute-doesnt-affect-tostring-of-containing-element#comment92218386_52642855\">in the comment from Ikegami</a>:</p>\n\n<blockquote>\n  <p>You search for a elements in the entire document (because you used //a\n  instead of .//a or descendant::a), and it's possible there are 100 a\n  elements in the document, but that none that are descendants of $body</p>\n</blockquote>\n\n<p>typing <code>'.//a'</code> instead of <code>'//a'</code> is the correct way here.</p>\n"}], "owner": {"reputation": 160, "user_id": 1118719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47edd1ee4d973c50bbe7991bb063d09d?s=128&d=identicon&r=PG", "display_name": "Dan Jacobson \u7a4d\u4e39\u5c3c", "link": "https://stackoverflow.com/users/1118719/dan-jacobson-%e7%a9%8d%e4%b8%b9%e5%b0%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1575210507, "creation_date": 1538643563, "question_id": 52642855, "link": "https://stackoverflow.com/questions/52642855/setattribute-doesnt-affect-tostring-of-containing-element", "title": "setAttribute doesn&#39;t affect toString of containing element", "body": "<p>This prints 100 WOWs, but not a single WOW in the toString. Why?</p>\n\n<pre><code>for my $node ( $body-&gt;findnodes('//a') ) {\n    $node-&gt;setAttribute( 'href', \"WOW\" );\n}\nfor my $node ( $body-&gt;findnodes('//a') ) {\n    print $node-&gt;getAttribute('href');\n}\n\nprint $body-&gt;toString(2);\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538628143, "post_id": 52638997, "comment_id": 92210816, "body": "The directory in which the <code>DEBTOR...</code> resides is itself not in <code>@INC</code>, so <code>ENVRC.pl</code> is indeed not found in <code>@INC</code> ((unless there is a link to that <code>&#47;apps&#47;...</code> in some directory in <code>@INC</code>?) How is <code>DEBTOR...</code> program started?"}, {"owner": {"reputation": 188, "user_id": 10132413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9edc46b5027af3fac9e510299a7bca19?s=128&d=identicon&r=PG&f=1", "display_name": "mo-ta-to", "link": "https://stackoverflow.com/users/10132413/mo-ta-to"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538631934, "post_id": 52638997, "comment_id": 92211907, "body": "Usually we run this    &#39;DEBTOR_VERIFICATION.pl&#39; program by connecting through putty. It runs fine without any issues.  lincacsgqld.ams.com:/apps/CACSGDEV/springbatch/perlscript&gt; DEBTOR_VERIFICATION.pl                                                                               Executing program DebtorVerification  return_code == 0 All transactions are processed without any validation errors Job Finished"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538632093, "post_id": 52638997, "comment_id": 92211980, "body": "Ah.  When you run the program directly there is no need for <code>@INC</code>. When a file is to be loaded that&#39;s when <code>@INC</code> is searched for it.  So, the directory of <code>ENVRC.pl</code> is not in <code>@INC</code> and the program can&#39;t be found. The other one runs OK because it is directly executed, not needing <code>@INC</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538641732, "post_id": 52638997, "comment_id": 92216773, "body": "<a href=\"https://stackoverflow.com/q/46549671/589924\">See also</a>"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538641871, "post_id": 52639884, "comment_id": 92216847, "body": "Re &quot;<i>But if you know for fact that this program (DEBTOR_VERIFICATION.pl) will always stay in this directory, [...] it is better to use FindBin</i>&quot;, Other way around. The FindBin approach will continue to work if you move the files."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538641976, "post_id": 52639884, "comment_id": 92216904, "body": "@ikegami If both are moved, yes. The comment is on the possibility that  the program is moved but the required file isn&#39;t. But how I put it isn&#39;t clear, editing.."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538641999, "post_id": 52639884, "comment_id": 92216918, "body": "That&#39;s far less likely. Or rather, if one of the files is moved and not the other, it&#39;s probably the module, in which case both solutions will break"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1550612236, "last_edit_date": 1550612236, "creation_date": 1538632438, "answer_id": 52639884, "question_id": 52638997, "link": "https://stackoverflow.com/questions/52638997/plink-cant-locate-pl-in-inc-error-while-running-a-perl-script-located-on-a-r/52639884#52639884", "title": "plink- Can&#39;t locate .pl in @INC error while running a perl script located on a remote linux server using a python program from windows", "body": "<p>The program <code>DEBTOR_VERIFICATION.pl</code> is directly executed and thus it doesn't need to have its directory in <a href=\"https://perldoc.perl.org/perlvar.html#@INC\" rel=\"nofollow noreferrer\">@INC</a>. On the other hand, when a file need be loaded via <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow noreferrer\">require</a> (or <a href=\"https://perldoc.perl.org/functions/use.html\" rel=\"nofollow noreferrer\">use</a>, which uses <code>require</code>) then it is precisely the directories in <code>@INC</code> that are searched for it. Since <code>/apps/..</code>, where <code>ENVRC.pl</code> resides, is not there the file cannot be found.</p>\n\n<p>You need to add that directory to <code>@INC</code> and a good way to do it is via <a href=\"http://perldoc.perl.org/lib.html\" rel=\"nofollow noreferrer\"><code>lib</code> pragma</a></p>\n\n<pre><code>use warnings;\nuse strict;\n...\nuse lib \"/apps/CACSGDEV/springbatch/perlscript\";\n...\n</code></pre>\n\n<p>But if this program (<code>DEBTOR_VERIFICATION.pl</code>) and the <code>require</code>d file <code>ENVRC.pl</code> will always stay in the same directory it is better to use <a href=\"http://perldoc.perl.org/FindBin.html\" rel=\"nofollow noreferrer\">FindBin</a> instead of hard coding the path</p>\n\n<pre><code>use warnings;\nuse strict;\n...\nuse FindBin qw($RealBin);\nuse lib $RealBin;\n</code></pre>\n\n<p>In either case the files in that directory can now be found by <code>use</code> and <code>require</code> (and <code>do</code>).</p>\n\n<p>The <code>DEBTOR</code> program works when executed right from its directory, in older Perls, since the <code>.</code> (the current working directory) used to be included in <code>@INC</code> by default. We see that this is the case from <code>@INC</code> printed in the error message. So <code>.</code> gets searched and <code>ENVRC.pl</code> is found.  </p>\n\n<p>Relying on that has really always been a bad practice, but <a href=\"https://metacpan.org/pod/release/XSAWYERX/perl-5.26.0/pod/perldelta.pod#Removal-of-the-current-directory-%28%22.%22%29-from-@INC\" rel=\"nofollow noreferrer\">as of perl v5.26.0 (perldelta)</a> (May 2017) the <code>.</code> directory is not in <code>@INC</code> anymore.</p>\n\n<p>So you should add the above <code>use lib</code> statement to the <code>DEBTOR...</code> program anyway.</p>\n"}], "owner": {"reputation": 188, "user_id": 10132413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9edc46b5027af3fac9e510299a7bca19?s=128&d=identicon&r=PG&f=1", "display_name": "mo-ta-to", "link": "https://stackoverflow.com/users/10132413/mo-ta-to"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 52639884, "answer_count": 1, "score": 2, "last_activity_date": 1550612236, "creation_date": 1538627195, "last_edit_date": 1538642346, "question_id": 52638997, "link": "https://stackoverflow.com/questions/52638997/plink-cant-locate-pl-in-inc-error-while-running-a-perl-script-located-on-a-r", "title": "plink- Can&#39;t locate .pl in @INC error while running a perl script located on a remote linux server using a python program from windows", "body": "<p>I'm trying to run a perl script that is located in a remote linux server from windows using the python program. I'm using the <code>subprocess.call</code> method. </p>\n\n<p>This is the python line of code</p>\n\n<pre><code>returnCd = subprocess.call(['plink', '-ssh', \\\n    '%s@%s' %('******','*****.***.com'), '-pw', '****', \\\n    'perl', '/apps/CACSGDEV/springbatch/perlscript/DEBTOR_VERIFICATION.pl'], \\\n    shell=True)\n</code></pre>\n\n<p>And this is what i see in the console (broken over lines for readability)</p>\n\n<pre>\nCan't locate ENVRC.pl in @INC (@INC contains: /usr/local/lib64/perl5 \n    /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl \n    /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) \nat /apps/CACSGDEV/springbatch/perlscript/DEBTOR_VERIFICATION.pl line 16.\n</pre>\n\n<p>The file <code>DEBTOR_VERIFICATION.pl</code> has the following @ line 16</p>\n\n<pre><code>require \"ENVRC.pl\";\n</code></pre>\n\n<p>The file <code>ENVRC.pl</code> is in the same path as that of the <code>DEBTOR_VERIFICATION.pl</code>. Can anyone please suggest?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1538616838, "post_id": 52637581, "comment_id": 92208480, "body": "<code>@_</code> contains one element, which is a reference to an array. Does that help at all?"}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538617974, "post_id": 52637581, "comment_id": 92208669, "body": "It does make sense that it should be <code>my $arr = shift;</code>, however I put <code>print &quot;@_\\n&quot;</code> at the top of <code>sort</code> and I get no output when I run it. Not sure what&#39;s going on."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1538618408, "post_id": 52637581, "comment_id": 92208767, "body": "<code>sort</code> is a built-in function in Perl, and that&#39;s what you&#39;re calling. There are ways to get around a user-defined function with the same name, but it&#39;s easier and better to just pick a different name."}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1538618787, "post_id": 52637581, "comment_id": 92208848, "body": "Thank you, I was wondering why <code>strict</code> was complaining about a useless call to <code>sort</code>. I figured out you get the values by calling <code>@$arr[..]</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538618895, "post_id": 52637581, "comment_id": 92208871, "body": "Also, Perl arrays are 0-indexed."}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538618956, "post_id": 52637581, "comment_id": 92208882, "body": "Yes I just noticed I copied that down wrong from my pseudocode."}], "answers": [{"comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538619027, "post_id": 52638006, "comment_id": 92208896, "body": "This will work, but the more typical form of dereferencing that you&#39;ll see is <code>$arr-&gt;[$i]</code>"}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1538620197, "post_id": 52638006, "comment_id": 92209131, "body": "I had seen the operator but it said something about object members. Thanks for the tip"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538620674, "post_id": 52638006, "comment_id": 92209219, "body": "Are you sure you want to use array slices here?"}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538620745, "post_id": 52638006, "comment_id": 92209235, "body": "@Shawn tbh, I don&#39;t know what those are unless you point them out."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538620925, "post_id": 52638006, "comment_id": 92209269, "body": "<code>@foo[bar]</code> returns an array, not a single element of an array. See <a href=\"https://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">the documentation</a>."}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538621389, "post_id": 52638006, "comment_id": 92209342, "body": "Your code only works at all because of this: <i>Slices in scalar context return the last item of the slice.</i> and being a bunch of 1-element slices. The more normal way would be to use scalars instead, either <code>$arr-&gt;[$i]</code> as was already mentioned, or <code>$$arr[$i]</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1538621797, "post_id": 52638006, "comment_id": 92209417, "body": "ALWAYS use <code>use strict; use warnings qw( all );</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538621840, "post_id": 52638006, "comment_id": 92209434, "body": "Tip: <code>for (my $i = 0; $i &lt; $len-1; $i++)</code> is better written <code>for my $i (0..$len-2)</code>. Similarly, the inner loop is better written <code>for my $j ($i+1..$len-1)</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1538621879, "post_id": 52638006, "comment_id": 92209447, "body": "Tip: You don&#39;t need a temp to swap; you can use <code>($x,$y)=($y,$x);</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1538622533, "post_id": 52638006, "comment_id": 92209587, "body": "@Shawn, <code>@foo[bar]</code> returns scalars (not an array), and it could very well return a single element of an array. But it&#39;s seen as bad form to use a slice (<code>@a[$i]</code>) when an element lookup (<code>$a[$i]</code>) would suffice."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1538628274, "post_id": 52638006, "comment_id": 92210844, "body": "Also: you don&#39;t need the <code>scalar</code> in <code>my $len = scalar @$arr;</code>. Assigning an array to a scalar puts it in the scalar context so that its size is returned, so <code>my $len = @$arr;</code>."}, {"owner": {"reputation": 377, "user_id": 6583638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zobe.jpg?s=128&g=1", "display_name": "Flying_whale", "link": "https://stackoverflow.com/users/6583638/flying-whale"}, "edited": false, "score": 0, "creation_date": 1538639730, "post_id": 52638006, "comment_id": 92215731, "body": "another solution would be to pass the entire array to your function (not the reference) then returning it at the end of your sort. This way you can keep your original array untouched. you will be then calling your function this way: <code>my @sorted=selection_sort(@nums);</code> (this is how you use built-in <code>sort</code> function btw)"}], "tags": [], "owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "is_accepted": true, "score": 2, "last_activity_date": 1538618909, "creation_date": 1538618909, "answer_id": 52638006, "question_id": 52637581, "link": "https://stackoverflow.com/questions/52637581/unable-to-modify-array-parameter/52638006#52638006", "title": "Unable to modify array parameter", "body": "<p>@Matt Jacob helped me out with this one. This is what I was looking for.</p>\n\n<pre><code>#! /usr/bin/env perl\n\nsub selection_sort {\n    my $arr = shift;\n    my $len = scalar @$arr;\n\n    for (my $i = 0; $i &lt; $len-1; $i++) {\n        my $max = $i;\n        for (my $j = $i + 1; $j &lt; $len; $j++) {\n            if (@$arr[$j] &gt; @$arr[$max]) {\n                $max = $j\n            }\n        }\n        my $temp = @$arr[$max];\n        @$arr[$max] = @$arr[$i];\n        @$arr[$i] = $temp;\n    }\n}\n\nprint \"Enter 10 numbers: \";\nmy $input = &lt;STDIN&gt;;\nmy @integers = split ' ', $input;\n\nprint \"Unsorted: @integers\\n\";\nselection_sort \\@integers;\nprint \"Sorted: @integers\\n\";\n</code></pre>\n"}], "owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52638006, "answer_count": 1, "score": 0, "last_activity_date": 1538618909, "creation_date": 1538615091, "question_id": 52637581, "link": "https://stackoverflow.com/questions/52637581/unable-to-modify-array-parameter", "title": "Unable to modify array parameter", "body": "<p>This is supposed to put the contents of <code>nums</code> into decreasing order, however <code>sort</code> does not change the contents of <code>nums</code>. Many sites I read have said to pass by reference, but I don't think I'm dereferencing the argument correctly. Bear with me, this is my first Perl program :)</p>\n\n<pre><code>#! /usr/bin/env perl\n\nsub sort {\n    my @arr = @_;\n    my $len = scalar @arr;\n\n    for (my $i = 1; $i &lt; $len-1; $i = $i + 1) {\n        my $max = $i;\n        for (my $j = $i + 1; $j &lt; $len; $j = $j + 1) {\n            if ($arr[$j] &gt; $arr[$max]) {\n                $max = $j\n            }\n        }\n        $temp = $arr[$max];\n        $arr[$max] = $arr[$i];\n        $arr[$i] = $temp;\n    }\n}\n\nprint \"Enter 10 numbers: \";\nmy $numbers = &lt;STDIN&gt;;\nmy @nums = split ' ', $numbers;\n\nprint \"Unsorted: @nums\\n\";\nsort \\@nums;\nprint \"Sorted: @nums\\n\";\n</code></pre>\n"}]