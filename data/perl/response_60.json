[{"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1456965837, "post_id": 35760375, "comment_id": 59195245, "body": "When you&#39;re asking a question on <a href=\"https://stackoverflow.com\">Stack Overflow</a>, you should <b>always</b> run the exact code in your question and make sure that any output matches up."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1457010522, "post_id": 35760375, "comment_id": 59217369, "body": "<code>&#47;&#47;</code> isn&#39;t a comment in <code>perl</code>. Your code cannot work."}, {"owner": {"reputation": 1536, "user_id": 4078249, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/86dafd29ac331022197e140c692f25eb?s=128&d=identicon&r=PG&f=1", "display_name": "learningMyWayThru", "link": "https://stackoverflow.com/users/4078249/learningmywaythru"}, "edited": false, "score": 0, "creation_date": 1457373760, "post_id": 35760375, "comment_id": 59367087, "body": "Sorry about the //. I added it in Stackoverflow editor so as to make code readability better."}], "answers": [{"tags": [], "owner": {"reputation": 31168, "user_id": 424509, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3941ac49eb00335044b3ec91153141fb?s=128&d=identicon&r=PG", "display_name": "CanSpice", "link": "https://stackoverflow.com/users/424509/canspice"}, "is_accepted": true, "score": 2, "last_activity_date": 1456961750, "creation_date": 1456961750, "answer_id": 35760403, "question_id": 35760375, "link": "https://stackoverflow.com/questions/35760375/perl-hashed-array-size/35760403#35760403", "title": "Perl Hashed Array Size", "body": "<p>You need to change your print statement to:</p>\n\n<pre><code>print \"Number of nodes in the facility : \" . scalar(@{$map{$facility}}) . \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 2, "last_activity_date": 1456965703, "last_edit_date": 1456965703, "creation_date": 1456963791, "answer_id": 35760738, "question_id": 35760375, "link": "https://stackoverflow.com/questions/35760375/perl-hashed-array-size/35760738#35760738", "title": "Perl Hashed Array Size", "body": "<p>Function calls and expressions are not interpolated within double-quoted strings*, so you'd need to do one of the following:</p>\n\n<ul>\n<li>Break out of string context (e.g. concatenation)</li>\n<li>Store the result in a variable before printing and use the variable instead</li>\n<li>Use <a href=\"http://perldoc.perl.org/functions/printf.html\" rel=\"nofollow\">printf</a></li>\n</ul>\n\n<p>Here's an illustration of each technique:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy %hash = (\n    foo =&gt; [1, 2, 3],\n    bar =&gt; [qw(a b c d e f g)],\n    baz =&gt; [0 .. 99],\n);\n\nfor my $key (keys(%hash)) {\n    # concatenation\n    print \"Number of elements for $key: \" . @{$hash{$key}} . \"\\n\";\n\n    # temporary variable\n    my $count = @{$hash{$key}};\n    print \"Number of elements for $key: $count\\n\";\n\n    # printf\n    printf(\"Number of elements for $key: %d\\n\", scalar(@{$hash{$key}}));\n}\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>Number of elements for bar: 7\nNumber of elements for bar: 7\nNumber of elements for bar: 7\nNumber of elements for baz: 100\nNumber of elements for baz: 100\nNumber of elements for baz: 100\nNumber of elements for foo: 3\nNumber of elements for foo: 3\nNumber of elements for foo: 3\n</code></pre>\n\n<hr>\n\n<p>*There's a hack that you can use to force this, but it'll severely hinder the readability of your code, and it might cause future maintainers of your code to wish ill upon you:</p>\n\n<pre><code>print \"Number of elements for $key: ${\\(scalar(@{$hash{$key}}))}\\n\";\n</code></pre>\n\n<p>Or the equally bad equivalent using an array reference:</p>\n\n<pre><code>print \"Number of elements for $key: @{[scalar(@{$hash{$key}})]}\\n\";\n</code></pre>\n"}], "owner": {"reputation": 1536, "user_id": 4078249, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/86dafd29ac331022197e140c692f25eb?s=128&d=identicon&r=PG&f=1", "display_name": "learningMyWayThru", "link": "https://stackoverflow.com/users/4078249/learningmywaythru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 35760403, "answer_count": 2, "score": 0, "last_activity_date": 1456965703, "creation_date": 1456961575, "last_edit_date": 1456962848, "question_id": 35760375, "link": "https://stackoverflow.com/questions/35760375/perl-hashed-array-size", "title": "Perl Hashed Array Size", "body": "<p>I am new to Perl. I am trying to identify how to print the size of hash of array. Below are snippets of my code.</p>\n\n<pre><code>my %map = ();    // Initialization\n\nwhile ($line = &lt;&gt;) {\n    chomp($line);\n    // Logic to split the $line\n    push( @{$map{$first_var}}, $rest );       \n}\n\n// Print the amp\nforeach my $value (sort keys %map) {\n    print \"$value: @{$map{$value}}\\n\";\n}\n</code></pre>\n\n<p>On printing I get output in below format</p>\n\n<pre><code>valA: (num1 num2 num3 num4)\nvalb: (num2 num4)\nvalC: (num1 num3 num4)\n</code></pre>\n\n<p>I wish to identify the how many elements are associated with each key (valA, valB,valc). </p>\n\n<p>I tried: <code>print \"Number of nodes in the facility : scalar @{$map{$facility1}}\\n\";</code></p>\n\n<p>However it gives out as </p>\n\n<pre><code>valA: scalar (num1 num2 num3 num4)\nvalb: scalar (num2 num4)\nvalC: scalar (num1 num3 num4)\n</code></pre>\n\n<p>I wish the output to show 4, 2, 3 for valA, valB,valC respectively. I maybe misunderstanding but scalar provides length of array.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["methods", "runtime-error", "perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456964197, "post_id": 35760278, "comment_id": 59194767, "body": "What is your <code>define_pattern</code> meant to be?  You are invoking it with curlies (and not qualifying it btw.)"}, {"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456964263, "post_id": 35760278, "comment_id": 59194787, "body": "@zdim It&#39;s normally a bit longer, but it essentially does what it shows, except the full version does some checking and modification of the input parameters."}], "answers": [{"comments": [{"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "edited": false, "score": 0, "creation_date": 1456963957, "post_id": 35760675, "comment_id": 59194691, "body": "No; it&#39;s in the same file. There&#39;s a <i>long</i> list of really messy reasons, but just assume that it&#39;s necessary..."}, {"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "edited": false, "score": 0, "creation_date": 1456964006, "post_id": 35760675, "comment_id": 59194706, "body": "Also, the code <i>compiles</i>, but it doesn&#39;t <i>run</i>. The error is in <code>Internal::func</code>."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1559984019, "last_edit_date": 1559984019, "creation_date": 1456963333, "answer_id": 35760675, "question_id": 35760278, "link": "https://stackoverflow.com/questions/35760278/cant-locate-object-method-via-package-even-though-im-not-using-methods/35760675#35760675", "title": "Can&#39;t locate object method via package, even though I&#39;m not using methods", "body": "<p>Since the sub <code>define_pattern</code> need be invoked with <code>()</code> this would only be a syntax error, except for the indirect object syntax that kicks in and  tries to run it as a method on an object supposedly computed inside the <code>{}</code> block (as explained in ThisSuitIsBlackNot's answer).  </p>\n\n<p>However, I'd also change namespaces properly, and you need to qualify the call to <code>define_pattern</code>.  Since there is a restriction that the package lives in the same compilation unit we leave it at that </p>\n\n<pre><code>use warnings;\nuse strict;\n\npackage Internal;\nour @patterns;\nsub func { \n    main::define_pattern ( pattern =&gt; qr/(.*)\\.c$/ );\n}\n\npackage main;\n\nInternal::func;\n\nmy @array = @Internal::patterns;\n\nprint \"Copied onto \\@array: |@array|\\n\";\n\nsub define_pattern { \n  my %in = @_;\n  push @Internal::patterns, $in{'pattern'}; \n}\n#sub define_pattern { push @Internal::patterns, $_[0]; }\n</code></pre>\n\n<p><em>Note</em>. The <code>Internal::func</code> call is needed to trigger the action of <code>define_pattern</code> so any use of the global <code>@Internal::patterns</code> has to come <em>after</em> that call (in this code). So they are switched around. Regex is built using <code>qr</code>. The sub is changed (minimally) so to actually store the pattern in the global array.  Code prints the specified pattern:</p>\n\n<pre>\nCopied onto @array: |(?-xism:(.*)\\.c$)|\n</pre>\n\n<p>To be able to at least store patterns dynamically, with minimal changes</p>\n\n<pre><code>package Internal;\nour @patterns;\nsub func {\n    my ($arg) = @_;\n    main::define_pattern ( pattern =&gt; qr/$arg/ );\n}\n\npackage main;\n\nInternal::func('(.*)\\.c$/');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 4, "last_activity_date": 1456967692, "last_edit_date": 1456967692, "creation_date": 1456965587, "answer_id": 35761024, "question_id": 35760278, "link": "https://stackoverflow.com/questions/35760278/cant-locate-object-method-via-package-even-though-im-not-using-methods/35761024#35761024", "title": "Can&#39;t locate object method via package, even though I&#39;m not using methods", "body": "<p>You're being bitten by <a href=\"http://perldoc.perl.org/5.8.9/perlobj.html#Indirect-Object-Syntax\" rel=\"nofollow\">indirect object syntax</a>. Perl interprets this:</p>\n\n<pre><code>define_pattern { pattern =&gt; '(.*)\\.c$' };\n</code></pre>\n\n<p>as the name of a method followed by a block that returns the invocant. You can see this with the <code>indirect</code> pragma:</p>\n\n<pre><code>no indirect;\n\nsub define_pattern { push @Internal::patterns, $_[0]; }\n\npackage Internal {\n    our @patterns = ();\n\n    sub func { define_pattern { pattern =&gt; '(.*)\\.c$' }; }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Indirect call of method \"define_pattern\" on a block at foo line 10.\n</code></pre>\n\n<p>Why does the parser think that <code>define_pattern</code> is a method and not a regular subroutine? Because there's no subroutine named <code>define_pattern</code> in the <code>Internal</code> package; you defined it in <code>main</code>.</p>\n\n<p>If you call a non-exported subroutine from another package, you have to use the fully-qualified subroutine name:</p>\n\n<pre><code>main::define_pattern({ pattern =&gt; '(.*)\\.c$' });\n</code></pre>\n\n<p>(The parentheses are optional if <code>define_pattern</code> is declared before you call it.)</p>\n"}], "owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4072, "favorite_count": 0, "accepted_answer_id": 35760675, "answer_count": 2, "score": 1, "last_activity_date": 1559984019, "creation_date": 1456961155, "question_id": 35760278, "link": "https://stackoverflow.com/questions/35760278/cant-locate-object-method-via-package-even-though-im-not-using-methods", "title": "Can&#39;t locate object method via package, even though I&#39;m not using methods", "body": "<p>I have code roughly like this:</p>\n\n<pre><code>sub define_pattern { push @Internal::patterns, $_[0]; }\n\npackage Internal {\n    our @patterns = ();\n\n    sub func { define_pattern { pattern =&gt; '(.*)\\.c$' }; }\n}\n\nInternal::func;\n</code></pre>\n\n<p>(Of course, this is a simplified version!) Now, when I run it, it outputs:</p>\n\n<pre><code>Can't locate object method \"define_pattern\" via package \"pattern\" (perhaps you forgot to load \"pattern\"?) at x.pl line 6.\n</code></pre>\n\n<p>I already Googled this error and looked at several similar SO questions, but none of them seem to have the solution to this. Why does Perl think <code>define_pattern</code> is a method and <code>pattern</code> is a package? I thought this error only occurred when using <code>-&gt;</code> like <code>pattern-&gt;define_method</code>.</p>\n"}, {"tags": ["perl", "apache-kafka", "kafka-producer-api"], "answers": [{"comments": [{"owner": {"reputation": 1342, "user_id": 1113981, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/15f4d01ef6b946e9edaeb67c19c72365?s=128&d=identicon&r=PG", "display_name": "Vibhuti", "link": "https://stackoverflow.com/users/1113981/vibhuti"}, "edited": false, "score": 0, "creation_date": 1457018837, "post_id": 35764131, "comment_id": 59224007, "body": "Hi Marty, actually connection is not a problem in my case, as for 3 producers, it&#39;s working fine while it&#39;s throwing can&#39;t find error  if i am increasing number of producers. I think it might be related to some producer settings, Also, if i am running multiple producer and sending data for different topics it was not throwing that error."}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 1, "last_activity_date": 1456984630, "last_edit_date": 1456984630, "creation_date": 1456983848, "answer_id": 35764131, "question_id": 35757752, "link": "https://stackoverflow.com/questions/35757752/kafka-cant-bind-topic-error/35764131#35764131", "title": "kafka: Can&#39;t bind: topic error", "body": "<p>It's simply failing to connect at the TCP level - network problem, perhaps?</p>\n\n<p>From the early lines of your trace dump, its clear that Kafka uses <a href=\"https://metacpan.org/pod/Exception::Class\" rel=\"nofollow\">Exception::Class</a> for error handling.  The specific Exception being thrown is <strong>Kafka::Exception::Connection</strong> and the message is <strong>\"Can't bind: topic = 'testing_producer'\"</strong> which, according to <a href=\"https://metacpan.org/pod/Kafka::Connection#DIAGNOSTICS\" rel=\"nofollow\">the doco</a> is caused by:</p>\n\n<pre><code>A successful TCP connection cant be established on given host and port.\n</code></pre>\n\n<p>As its TCP, you can do a quick and easy test if the client has a <a href=\"https://en.wikipedia.org/wiki/Telnet\" rel=\"nofollow\">\"Telnet client\"</a>.  Simply enter the hostname/IP and port number of the server into the Telnet client and click \"connect\".  If it connects, simply drop the connection - you will have confirmed that its not the network.  If it fails, you will have confirmed that it <em>is</em> a network issue.</p>\n"}], "owner": {"reputation": 1342, "user_id": 1113981, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/15f4d01ef6b946e9edaeb67c19c72365?s=128&d=identicon&r=PG", "display_name": "Vibhuti", "link": "https://stackoverflow.com/users/1113981/vibhuti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1475765952, "creation_date": 1456951746, "last_edit_date": 1475765952, "question_id": 35757752, "link": "https://stackoverflow.com/questions/35757752/kafka-cant-bind-topic-error", "title": "kafka: Can&#39;t bind: topic error", "body": "<p>I am getting below error, when i am increasing number of kafka producer.\nAny one has idea what can be the problem here?</p>\n\n<p>Please find my producer settings:\n<a href=\"https://gist.github.com/Vibhuti/dbf1c24962b91f2bc217\" rel=\"nofollow\">https://gist.github.com/Vibhuti/dbf1c24962b91f2bc217</a></p>\n\n<p>Error logs:</p>\n\n<pre><code>main::catch {...} (\"&lt;UNKNOWN&gt; Can't bind: topic = 'testing_producer' at /opt/adp/\"...) called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Try/Tiny.pm line 104\nTry::Tiny::try(CODE(0xabdf8d0), Try::Tiny::Catch=REF(0xabdb938)) called at ./stream_binary_hadoop.pl line 184\nmain::stream(HASH(0xac5fde0)) called at ./stream_binary_hadoop.pl line 347\nmain::file_split(HASH(0xabe71e0)) called at ./stream_binary_hadoop.pl line 406\n\n&lt;UNKNOWN&gt; &lt;UNKNOWN&gt; Can't bind: topic = 'testing_producer' at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Exception/Class/Base.pm line 85.\nException::Class::Base::throw(\"Kafka::Exception::Connection\", \"code\", -1004, \"message\", \"Can't bind: topic = 'testing_producer'\") called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Kafka/Connection.pm line 1303\nKafka::Connection::_error(Kafka::Connection=HASH(0x176f9f40), -1004, \"topic = 'testing_producer'\") called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Kafka/Connection.pm line 814\nKafka::Connection::receive_response_to_request(Kafka::Connection=HASH(0x176f9f40), HASH(0x17767738), undef) called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Kafka/Producer.pm line 363\nKafka::Producer::send(Kafka::Producer=HASH(0x176fa1f8), \"testing_producer\", 0, \"56b4b2b23c24c3608376d1f0,/obj/i386/junos/lib/librtsock/iff_ms\"...) called at ./stream_binary_hadoop.pl line 171\nmain::try {...} () called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Try/Tiny.pm line 81\neval {...} called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Try/Tiny.pm line 72\nTry::Tiny::try(CODE(0x1776fa40), Try::Tiny::Catch=REF(0x1776a6b0)) called at ./stream_binary_hadoop.pl line 184\nmain::stream(HASH(0x1775f6c0)) called at ./stream_binary_hadoop.pl line 347\nmain::file_split(HASH(0x1775e790)) called at ./stream_binary_hadoop.pl line 406\n</code></pre>\n\n<p>For reference, my kafka code:</p>\n\n<pre><code>my $arcs_val = join( ',', @arc_a );\nmy $hadoop_str = $testid . ',' . $gcda_file_name . ',' . $arcs_val;\nutf8::downgrade($hadoop_str);\ntry {\n        #my $topic = utf8::downgrade($testid);;\n        my $topic = utf8::downgrade($testid);\n        my $partition = 0;\n        my $response = $producer-&gt;send(\n              \"testing_producer\",             # topic\n              $partition,                  # partition\n              $hadoop_str\n        );\n} catch {\n        my $error = $_;\n        if ( blessed( $error ) &amp;&amp; $error-&gt;isa( 'Kafka::Exception' ) ) {             warn 'Error: (', $error-&gt;code, ') ',  $error-&gt;message, \"\\n\";\n              exit;\n        } else {\n              die $error;\n        }\n};\n</code></pre>\n"}, {"tags": ["python", "perl", "7zip"], "answers": [{"comments": [{"owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "edited": false, "score": 0, "creation_date": 1456942717, "post_id": 35754963, "comment_id": 59183367, "body": "Thanks for the advice. That doesn&#39;t work because zipfile doesn&#39;t work on other .zip formats like .7z or .rar."}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "reply_to_user": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "edited": false, "score": 0, "creation_date": 1456942816, "post_id": 35754963, "comment_id": 59183438, "body": "Use py7zlib in such case"}, {"owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "edited": false, "score": 0, "creation_date": 1456942928, "post_id": 35754963, "comment_id": 59183517, "body": "I did but it has problems handling corrupt files. Which is why I would like to use system commands."}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1456943200, "post_id": 35754963, "comment_id": 59183668, "body": "in that case add shell=True to your subprocess call"}, {"owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "edited": false, "score": 0, "creation_date": 1457048719, "post_id": 35754963, "comment_id": 59241939, "body": "if downvote please leave a comment, so i would know how to correct the answer, otherwise your downvote is useless"}, {"owner": {"reputation": 401, "user_id": 7516643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IadxY.jpg?s=128&g=1", "display_name": "mnis.p", "link": "https://stackoverflow.com/users/7516643/mnis-p"}, "edited": false, "score": 0, "creation_date": 1530874076, "post_id": 35754963, "comment_id": 89398158, "body": "we can specify the specific path in <code>z.extractall(path)</code> to extract the files at a particular location."}], "tags": [], "owner": {"reputation": 4421, "user_id": 3789676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/aUh8k.jpg?s=128&g=1", "display_name": "midori", "link": "https://stackoverflow.com/users/3789676/midori"}, "is_accepted": false, "score": 3, "last_activity_date": 1456943298, "last_edit_date": 1456943298, "creation_date": 1456942319, "answer_id": 35754963, "question_id": 35754898, "link": "https://stackoverflow.com/questions/35754898/use-subprocess-python-library-to-unzip-a-file-using-7zip/35754963#35754963", "title": "Use subprocess python library to unzip a file using 7zip", "body": "<p>Why not use python <strong>zip</strong>:</p>\n\n<pre><code>import zipfile\n\nwith zipfile.ZipFile(logfile_path, 'r') as z:\n    z.extractall()\n</code></pre>\n\n<p>Or using subprocess:</p>\n\n<pre><code>subprocess.call(['zip_exe_path','x','logfile_path','-y'], shell=True)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1577959153, "post_id": 35761803, "comment_id": 105290434, "body": "Switching from <code>call</code> to <code>Popen</code> is not an  improvement here. Requiring a shell is also not an improvement."}], "tags": [], "owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "is_accepted": false, "score": 0, "last_activity_date": 1456970584, "creation_date": 1456970584, "answer_id": 35761803, "question_id": 35754898, "link": "https://stackoverflow.com/questions/35754898/use-subprocess-python-library-to-unzip-a-file-using-7zip/35761803#35761803", "title": "Use subprocess python library to unzip a file using 7zip", "body": "<p>Figured it out:</p>\n\n<pre><code>import subprocess\n\nsubprocess.Popen(zip_exe+' x '+file+' -o'+output_loc,stdout=subprocess.PIPE)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137100, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "is_accepted": true, "score": 2, "last_activity_date": 1577959077, "creation_date": 1577959077, "answer_id": 59561381, "question_id": 35754898, "link": "https://stackoverflow.com/questions/35754898/use-subprocess-python-library-to-unzip-a-file-using-7zip/59561381#59561381", "title": "Use subprocess python library to unzip a file using 7zip", "body": "<p>The error is that you are passing the <em>strings</em> <code>'zip_exe_path'</code> and <code>'logfile_path'</code> instead of the values of those variables.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import subprocess\nzip_exe_path = \"C:\\\\Dropbox\\\\7-zip\\\\7z.exe\"\nlogfile_path = \"C:\\\\Temp\\\\zipped_file.7z\"\nsubprocess.call([zip_exe_path, 'x', logfile_path, '-y'])\n</code></pre>\n\n<p>You can of course pass the command as a single string with <code>shell=True</code> but the shell does not add any value and <a href=\"/questions/3172470/actual-meaning-of-shell-true-in-subprocess\">incurs some overhead (and risk!)</a></p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 10772661, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WBNmQu4U5fE/AAAAAAAAAAI/AAAAAAAAJKk/O4dIDG7uYLI/photo.jpg?sz=128", "display_name": "divyansh srivastava", "link": "https://stackoverflow.com/users/10772661/divyansh-srivastava"}, "is_accepted": false, "score": 3, "last_activity_date": 1603958978, "creation_date": 1603958978, "answer_id": 64587184, "question_id": 35754898, "link": "https://stackoverflow.com/questions/35754898/use-subprocess-python-library-to-unzip-a-file-using-7zip/64587184#64587184", "title": "Use subprocess python library to unzip a file using 7zip", "body": "<p><strong>This work like a charm for me :)</strong></p>\n<p>first, install py7zr library:</p>\n<pre><code>pip install py7zr\n</code></pre>\n<p>for extracting all files in .7z:</p>\n<pre><code>from py7zr import py7zr\n\nwith py7zr.SevenZipFile('7z file_location', mode='r') as z:\n    z.extractall()\n</code></pre>\n<p>for extracting a single file:</p>\n<pre><code>from py7zr import py7zr\n\nwith py7zr.SevenZipFile('7z file_location', mode='r') as z:\n    z.extract(targets=['rootdir/filename'])\n</code></pre>\n"}], "owner": {"reputation": 7518, "user_id": 5405782, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/KLF69.jpg?s=128&g=1", "display_name": "sparrow", "link": "https://stackoverflow.com/users/5405782/sparrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2857, "favorite_count": 0, "accepted_answer_id": 59561381, "answer_count": 4, "score": 1, "last_activity_date": 1603958978, "creation_date": 1456942153, "last_edit_date": 1456942326, "question_id": 35754898, "link": "https://stackoverflow.com/questions/35754898/use-subprocess-python-library-to-unzip-a-file-using-7zip", "title": "Use subprocess python library to unzip a file using 7zip", "body": "<p>I would like to unzip a file with Python using 7zip executable. In Perl this is pretty straightforward:</p>\n\n<pre><code>$zip_exe_path = \"C:\\\\Dropbox\\\\7-zip\\\\7z.exe\";\n$logfile_path = \"C:\\\\Temp\\\\zipped_file.7z\";\nsystem (\"$zip_exe_path x $log_file_path -y\");\n</code></pre>\n\n<p>I tried this:</p>\n\n<pre><code>import subprocess\nzip_exe_path = \"C:\\\\Dropbox\\\\7-zip\\\\7z.exe\"\nlogfile_path = \"C:\\\\Temp\\\\zipped_file.7z\"\nsubprocess.call(['zip_exe_path','x','logfile_path','-y'])\n</code></pre>\n\n<p>When I do so I get this error:</p>\n\n<pre><code>FileNotFoundError: [WinError 2] The system cannot find the file specified\n</code></pre>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["perl", "map-function"], "comments": [{"owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "edited": false, "score": 0, "creation_date": 1456941896, "post_id": 35754762, "comment_id": 59182863, "body": "What is your input, and what output would you  like to achieve ?  Possibly this can be done with grep or sed alone."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456945045, "post_id": 35754762, "comment_id": 59184839, "body": "Just <code>@missing = map &#47;^prefix:\\s+(.+):\\s+suffix$&#47;, @lines</code> should have the effect you want. But I can&#39;t imagine what value in <code>@lines</code> would cause your <code>map</code> to return an empty string. Can you show a sample of your data please?"}], "answers": [{"comments": [{"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 0, "creation_date": 1456992260, "post_id": 35754918, "comment_id": 59204750, "body": "Yes, but i wanted  to avoid the grep somehow."}], "tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": false, "score": 0, "last_activity_date": 1456942194, "creation_date": 1456942194, "answer_id": 35754918, "question_id": 35754762, "link": "https://stackoverflow.com/questions/35754762/simplifying-perl-map-and-grep/35754918#35754918", "title": "simplifying perl map and grep", "body": "<p>Isn't that equivalent to the simpler:</p>\n\n<pre><code>my @missing = grep /./, map { $1 if m/^prefix:\\s+(.+):\\s+suffix$/ } @lines;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1456942584, "creation_date": 1456942584, "answer_id": 35755054, "question_id": 35754762, "link": "https://stackoverflow.com/questions/35754762/simplifying-perl-map-and-grep/35755054#35755054", "title": "simplifying perl map and grep", "body": "<p>I think you can handle it all in just <code>map</code> by returning empty list when no match is found:</p>\n\n<pre><code>my @missing = map { /^prefix:\\s+(.+):\\s+suffix$/ ? $1 : () } @lines;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 8, "last_activity_date": 1456942598, "creation_date": 1456942598, "answer_id": 35755057, "question_id": 35754762, "link": "https://stackoverflow.com/questions/35754762/simplifying-perl-map-and-grep/35755057#35755057", "title": "simplifying perl map and grep", "body": "<p>Returning <code>()</code> in a map doesn't add any elements to the output, so you could use a ternary conditional like</p>\n\n<pre><code>my @missing = map { m/^prefix:\\s+(.+):\\s+suffix$/ ? $1 : () } @lines;\n</code></pre>\n\n<p>But <code>m/...(...).../</code> already returns a non-empty list on a match and an empty list otherwise, so I think you can just say</p>\n\n<pre><code>my @missing = map { m/^prefix:\\s+(.+):\\s+suffix$/ } @lines;\n</code></pre>\n"}], "owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 35755057, "answer_count": 3, "score": 1, "last_activity_date": 1456992008, "creation_date": 1456941651, "last_edit_date": 1456992008, "question_id": 35754762, "link": "https://stackoverflow.com/questions/35754762/simplifying-perl-map-and-grep", "title": "simplifying perl map and grep", "body": "<p>I have a requirement to find a particular piece of subtext in all the lines in some set, and I've ended up with this:</p>\n\n<pre><code>my @missing = grep { $_ ne '' } map { $1 if m/^prefix:\\s+(.+):\\s+suffix$/ } @lines;\n</code></pre>\n\n<p>Which works fine. But that grep at the start (to get rid of all the emty lines for when the match doesn't happen) looks horrible. </p>\n\n<p>Is there a cleaner way of doing this?</p>\n\n<p>Just to clarify, here is example input and the output I get without the grep:</p>\n\n<pre><code>my @lines = (\n    'drivel',\n    'prefix: matches: suffix',\n    'stuff',\n    'prefix: more: suffix'\n);\n\nmy @selected = map { $1 if m/^prefix:\\s+(.+):\\s+suffix$/ } @lines;\nprint \"found: $_\\n\" foreach @selected;\n</code></pre>\n\n<p>Output wanted:</p>\n\n<pre><code>found: matches\nfound: more\n</code></pre>\n\n<p>Output got with the above:</p>\n\n<pre><code>found:\nfound: matches\nfound:\nfound: more\n</code></pre>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1456935491, "post_id": 35752509, "comment_id": 59178394, "body": "<code>use Carp::Always</code> and get a full stack trace of this warning (not error) message"}, {"owner": {"reputation": 868, "user_id": 1785053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cd53ede57f938ef42fdb22d1c9cf7bbd?s=128&d=identicon&r=PG", "display_name": "ilce", "link": "https://stackoverflow.com/users/1785053/ilce"}, "edited": false, "score": 0, "creation_date": 1456935679, "post_id": 35752509, "comment_id": 59178566, "body": "Win32.pm line 388. But I think that this is not related to the module but something in my code. On line 388 there is :ucfirst($1);"}, {"owner": {"reputation": 376, "user_id": 2717257, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000368169336/picture?type=large", "display_name": "Inquisitive", "link": "https://stackoverflow.com/users/2717257/inquisitive"}, "edited": false, "score": 1, "creation_date": 1456936079, "post_id": 35752509, "comment_id": 59178884, "body": "Does the script gets terminated when this message appears or it continues after that?"}, {"owner": {"reputation": 868, "user_id": 1785053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cd53ede57f938ef42fdb22d1c9cf7bbd?s=128&d=identicon&r=PG", "display_name": "ilce", "link": "https://stackoverflow.com/users/1785053/ilce"}, "edited": false, "score": 0, "creation_date": 1456936128, "post_id": 35752509, "comment_id": 59178930, "body": "No, it&#39;s just a warning I think."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1456936703, "post_id": 35752509, "comment_id": 59179386, "body": "What version of File::Spec::Win32 do you have? Check by running <code>perl -MFile::Spec::Win32 -e&quot;print $File::Spec::Win32::VERSION&quot;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456936936, "post_id": 35752509, "comment_id": 59179551, "body": "Can you please upload your <code>C:\\Program Files\\perl\\lib\\File\\Spec\\Win32.pm</code> to <a href=\"http://pastebin.com/\" rel=\"nofollow noreferrer\">pastebin.com</a> or something? I strongly suspect it&#39;s been corrupted."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467625192, "last_edit_date": 1467625192, "creation_date": 1456937916, "answer_id": 35753542, "question_id": 35752509, "link": "https://stackoverflow.com/questions/35752509/how-to-resolve-useless-use-of-ucfirst-in-void-context-at-c-program-files-perl/35753542#35753542", "title": "How to resolve &quot;Useless use of ucfirst in void context at C:/Program Files/perl/lib/File/Spec/Win32.pm&quot;?", "body": "<p>There is a problem with your <code>File/Spec/Win32.pm</code> file. You should reinstall the whole of <code>File::Spec</code> from the command line with</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cpan File::Spec\n</code></pre>\n\n<p>The latest version 3.62 has this long statement at line 385</p>\n\n<pre><code>my $volume = $first =~ s{ \\A ([A-Za-z]:) ([\\\\/]?) }{}x  # drive letter\n           ? ucfirst( $1 ).( $2 ? \"\\\\\" : \"\" )\n       : $first =~ s{ \\A (?:\\\\\\\\|//) ([^\\\\/]+)\n             (?: [\\\\/] ([^\\\\/]+) )?\n                 [\\\\/]? }{}xs           # UNC volume\n       ? \"\\\\\\\\$1\".( defined $2 ? \"\\\\$2\" : \"\" ).\"\\\\\"\n       : $first =~ s{ \\A [\\\\/] }{}x         # root dir\n       ? \"\\\\\"\n       : \"\";\n</code></pre>\n\n<p>and there is no way that that use of <code>ucfirst</code> can cause the <em>Useless use</em> warning.</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>You may also be interested in this refactoring of your code, which avoids a few less than ideal constructs</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse LWP::UserAgent;\nuse URI;\n\nmy ( $idividi, $tocka ) = qw/ www.idividi.com.mk tocka.com.mk /;\n\ncheck_servers( $idividi, $tocka );\n\nsub check_servers {\n    my @url_list = @_;\n\n    print \"Checking server availability...\\n\";\n\n    my $ua  = LWP::UserAgent-&gt;new;\n    my $url = URI-&gt;new('http://example.com/');\n\n    for my $server (@url_list) {\n\n        $url-&gt;host($server);\n        my $response = $ua-&gt;get($url);\n        my $avail = length( $response-&gt;decoded_content ) != 0;\n\n        printf \"%s ---&gt; HTTPS network connectivity: %s\\n\",\n            $server,\n            $avail ? 'AVAILABLE' : 'NOT AVAILABLE';\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>Checking server availability...\nwww.idividi.com.mk ---&gt; HTTPS network connectivity: AVAILABLE\ntocka.com.mk ---&gt; HTTPS network connectivity: AVAILABLE\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2422, "user_id": 234594, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f4d8d75d8584692a80fd0144c8720840?s=128&d=identicon&r=PG", "display_name": "kaklon", "link": "https://stackoverflow.com/users/234594/kaklon"}, "edited": false, "score": 0, "creation_date": 1457018703, "post_id": 35754144, "comment_id": 59223899, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post. - <a href=\"/review/low-quality-posts/11481702\">From Review</a>"}, {"owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "reply_to_user": {"reputation": 2422, "user_id": 234594, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f4d8d75d8584692a80fd0144c8720840?s=128&d=identicon&r=PG", "display_name": "kaklon", "link": "https://stackoverflow.com/users/234594/kaklon"}, "edited": false, "score": 0, "creation_date": 1457019657, "post_id": 35754144, "comment_id": 59224688, "body": "@kaklon Er, this is definitely an answer to the question. The problem (i.e, the warnings) is being caused by the inappropriate use of the <code>-w</code> flag; replacing it with <code>use warnings</code> is the solution."}, {"owner": {"reputation": 2422, "user_id": 234594, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f4d8d75d8584692a80fd0144c8720840?s=128&d=identicon&r=PG", "display_name": "kaklon", "link": "https://stackoverflow.com/users/234594/kaklon"}, "edited": false, "score": 0, "creation_date": 1457020278, "post_id": 35754144, "comment_id": 59225219, "body": "Sorry about that, It wasn&#39;t clear to me that this was in fact the answer to the problem."}], "tags": [], "owner": {"reputation": 170445, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": false, "score": 0, "last_activity_date": 1456939701, "creation_date": 1456939701, "answer_id": 35754144, "question_id": 35752509, "link": "https://stackoverflow.com/questions/35752509/how-to-resolve-useless-use-of-ucfirst-in-void-context-at-c-program-files-perl/35754144#35754144", "title": "How to resolve &quot;Useless use of ucfirst in void context at C:/Program Files/perl/lib/File/Spec/Win32.pm&quot;?", "body": "<p>Don't use <code>perl -w</code>. It enables warnings <em>globally</em>, even within modules that may not have been written with those warnings in mind.</p>\n\n<p>If you want to enable warnings, <code>use warnings</code> will enable that for the current file.</p>\n"}], "owner": {"reputation": 868, "user_id": 1785053, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cd53ede57f938ef42fdb22d1c9cf7bbd?s=128&d=identicon&r=PG", "display_name": "ilce", "link": "https://stackoverflow.com/users/1785053/ilce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1467625192, "creation_date": 1456935169, "last_edit_date": 1456935585, "question_id": 35752509, "link": "https://stackoverflow.com/questions/35752509/how-to-resolve-useless-use-of-ucfirst-in-void-context-at-c-program-files-perl", "title": "How to resolve &quot;Useless use of ucfirst in void context at C:/Program Files/perl/lib/File/Spec/Win32.pm&quot;?", "body": "<pre><code>#!/usr/bin/perl  -w\nuse strict;\n\nuse LWP::UserAgent;\nuse HTTP::Request;\n\nmy $idividi = \"http://www.idividi.com.mk\";\nmy $tocka = \"http://tocka.com.mk\";\n\nsub check_server() {\n  my @urlList = ($idividi, $tocka);\n  print \"Checking server availability...\\n\";\n\n  foreach my $server_endpoint (@urlList){\n     my $uaObject = LWP::UserAgent-&gt;new;\n     my $request = HTTP::Request-&gt;new(GET =&gt; $server_endpoint);\n     my $response = $uaObject-&gt;request($request);\n\n     if(length($response-&gt;decoded_content) != 0) {\n        print \"$server_endpoint ---&gt; HTTPS network connectivity:        AVAILABLE\\n\";\n     } else {\n        print \"$server_endpoint ---&gt; HTTPS network connectivity: NOT AVAILABLE\\n\";\n     } \n }\n</code></pre>\n\n<p>}</p>\n\n<hr>\n\n<p>When I try to run this, I got the error:\n\"Useless use of ucfirst in void context at C:/Program Files/perl/lib/File/Spec/Win32.pm\". </p>\n\n<p>I can not find any possible solution on the net.</p>\n"}, {"tags": ["excel", "perl"], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1456932049, "creation_date": 1456932049, "answer_id": 35751287, "question_id": 35751069, "link": "https://stackoverflow.com/questions/35751069/perl-format-yyyy-mm-dd-hhmmss-to-yyyy-mm-dd-in-excel/35751287#35751287", "title": "Perl Format yyyy-mm-dd HH:mm:ss to yyyy-mm-dd in Excel", "body": "<p>Just replace the space <code></code> in your timestamps with a <code>T</code> with a regular expression. If the timestamps are consistent, that will work. </p>\n\n<pre><code>write_date_time( $row, $col, $date_string =~ tr/ /T/r, $format );\n</code></pre>\n\n<p>This transliterates spaces <code></code> into capital Ts <code>T</code> and returns the result instead of changing in-place.</p>\n\n<p>See <a href=\"http://perldoc.perl.org/perlop.html#Quote-Like-Operators\" rel=\"nofollow\">perlop</a>. The <code>/r</code> flag requires at least Perl 5.14.</p>\n"}], "owner": {"reputation": 1540, "user_id": 4807625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/825e21cf278fa7a7f40ff21e6cc218ab?s=128&d=identicon&r=PG&f=1", "display_name": "PTN", "link": "https://stackoverflow.com/users/4807625/ptn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 35751287, "answer_count": 1, "score": -1, "last_activity_date": 1456932049, "creation_date": 1456931546, "question_id": 35751069, "link": "https://stackoverflow.com/questions/35751069/perl-format-yyyy-mm-dd-hhmmss-to-yyyy-mm-dd-in-excel", "title": "Perl Format yyyy-mm-dd HH:mm:ss to yyyy-mm-dd in Excel", "body": "<p>I am trying to write to an <code>Excel</code> sheet using <code>Excel::Writer:XLSX</code>.</p>\n\n<p>I know that it is possible to do date time format using <code>write_date_time( $row, $col, $date_string, $format )</code></p>\n\n<p>However, <code>$date_string</code> has to be one of these formats (the T is required)</p>\n\n<pre><code>yyyy-mm-ddThh:mm:ss.sss         # Standard format\nyyyy-mm-ddT                     # No time\n          Thh:mm:ss.sss         # No date\nyyyy-mm-ddThh:mm:ss.sssZ        # Additional Z (but not time zones)\nyyyy-mm-ddThh:mm:ss             # No fractional seconds\nyyyy-mm-ddThh:mm                # No seconds\n</code></pre>\n\n<p>The problem is the string I have right now is in the format <code>yyyy-mm-dd HH:mm:ss</code>. Is there a workaround for this?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1456927003, "post_id": 35749164, "comment_id": 59171552, "body": "Just for reference, could you post the managers hash too?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1456927221, "post_id": 35749164, "comment_id": 59171728, "body": "So <code>manager</code> is the <i>parent</i> id?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456927318, "post_id": 35749164, "comment_id": 59171806, "body": "Yes. Each employee has a <code>DN</code> in LDAP, and a <code>manager</code> DN (which references the same directory)."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456927354, "post_id": 35749164, "comment_id": 59171834, "body": "And it&#39;s a 1:N relationship?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456927530, "post_id": 35749164, "comment_id": 59171986, "body": "Yes. Each person has exactly one &#39;manager&#39;. (I don&#39;t think there are any loops - that would be weird)."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456929537, "post_id": 35750247, "comment_id": 59173645, "body": "@HunterMcMillen I was just commenting how to change the data structure so it would work with your code when you deleted. :P"}, {"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1456932311, "post_id": 35750247, "comment_id": 59175940, "body": "oops, I guess I misunderstood. I was pretty sure the algorithm was correct; but got caught up in other things so I couldn&#39;t revisit it this morning"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1456932363, "post_id": 35750247, "comment_id": 59175987, "body": "@hunter it&#39;s correct, you just assumed the wrong original structure. :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 2, "last_activity_date": 1456929487, "last_edit_date": 1495542166, "creation_date": 1456929487, "answer_id": 35750247, "question_id": 35749164, "link": "https://stackoverflow.com/questions/35749164/turning-a-set-of-parent-child-relationships-into-a-hierarchical-structure/35750247#35750247", "title": "Turning a set of parent-child relationships into a hierarchical structure", "body": "<p>@Hunter McMillen <a href=\"https://stackoverflow.com/a/35749695/1331451\">unfortunately deleted his very good but slightly off answer</a>. Here is my attempt to augment his code by turning the relationship from <em>underling -> boss</em> towards <em>boss -> underlings</em>.</p>\n\n<p>To simulate the LDAP responses, I created a simple Moose class.</p>\n\n<pre><code>package Person;\nuse Moose;\n\nhas name =&gt; ( is =&gt; 'ro' );\nhas boss =&gt; ( is =&gt; 'ro', predicate =&gt; 'has_boss' );\n\npackage main;\nuse strict;\nuse warnings;\nuse Data::Printer;\n\n# make a randomized list of people\nmy %people = map { $_-&gt;name =&gt; $_ }\n    map { \n      Person-&gt;new( \n        name =&gt; $_-&gt;[0], ( $_-&gt;[1] ? ( boss =&gt; $_-&gt;[1] ) : () ) \n      ) \n    } (\n      [qw( ceo )],                       [qw( head_of_dept ceo)],\n      [qw( person head_of_dept)],        [qw( person_with_staff head_of_dept )],\n      [qw( person3 person_with_staff )], [qw( person4 person_with_staff )],\n    );\n\nmy %manages;\nforeach my $p (values %people) {\n    push @{ $manages{ $p-&gt;boss } }, $p-&gt;name if $p-&gt;has_boss;\n}\n\n# this part shamelessly stolen from @HunterMcMillen's deleted answer\nsub build_tree {\n    my ($person) = @_;\n\n    my @subtrees;\n    foreach my $managee ( @{ $manages{$person} } ) {\n        push @subtrees, build_tree($managee);\n    }\n\n    return { $person =&gt; \\@subtrees };\n}\n\np build_tree 'ceo';\n</code></pre>\n\n<p>Here's the output.</p>\n\n<pre><code>\\ {\n    ceo   [\n        [0] {\n            head_of_dept   [\n                [0] {\n                    person   []\n                },\n                [1] {\n                    person_with_staff   [\n                        [0] {\n                            person4   []\n                        },\n                        [1] {\n                            person3   []\n                        }\n                    ]\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>This should be more or less what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456930700, "post_id": 35750442, "comment_id": 59174625, "body": "That looks to be what I&#39;m after, but I&#39;m going to have to do a bit more reading to figure it out."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456931320, "post_id": 35750442, "comment_id": 59175162, "body": "I&#39;d like to print a tree-style org chart as my starting point. (With a view to extracting JSON -&gt; D3)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1456931701, "post_id": 35750442, "comment_id": 59175466, "body": "With my data set - I get a lot of results for &quot;source_vertices&quot; and given I&#39;m pretty sure most of my entries have a &#39;manager&#39; this seems unexpected."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456932060, "post_id": 35750442, "comment_id": 59175728, "body": "@Sobrique: You should check your raw data. It may be useful to export it as a list of manager -&gt; worker pairs directly from the LDAP data. The nodes listed by <code>source_vertices</code> certainly have no parent/predecessor and you should be able to see why. A chart would probably be best written as a recursive subroutine that starts at any of the nodes in the <code>source_vertices</code> list and (recursively) creates a list of workers using <code>$node-&gt;successors</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456933631, "post_id": 35750442, "comment_id": 59176986, "body": "@Sobrique: It does sound like it. Unfortunately my knowledge of LDAP is minimal. My example of  a call to <code>successors</code> should have been <code>$g-&gt;successors($node)</code>. I&#39;ve added to my solution some simple code that dumps your example data as a tree structure"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1456934098, "post_id": 35750442, "comment_id": 59177339, "body": "Found the problem - some genius has decided that &#39;GB&#39; needs to be lower case in the manager field, but upper case in the dn."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1467554945, "last_edit_date": 1467554945, "creation_date": 1456929948, "answer_id": 35750442, "question_id": 35749164, "link": "https://stackoverflow.com/questions/35749164/turning-a-set-of-parent-child-relationships-into-a-hierarchical-structure/35750442#35750442", "title": "Turning a set of parent-child relationships into a hierarchical structure", "body": "<p>What you need is a <em>directed graph</em>, and I suggest using the <a href=\"http://metacpan.org/module/Graph::Directed\" rel=\"nofollow\"><code>Graph::Directed</code></a> module, whose methods are documented in <a href=\"http://metacpan.org/module/Graph\" rel=\"nofollow\"><code>Graph</code></a></p>\n\n<p>This program will build the graph for you, but without any data I couldn't test it beyond making sure it compiles</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Net::LDAP;\nuse Graph::Directed;\nuse Data::Dumper;\n\nmy $ldap   = Net::LDAP-&gt;new('my_ldap_server');\nmy $result = $ldap-&gt;bind('bind_dn');\ndie if $result-&gt;code;\n\nmy $search = $ldap-&gt;search(\n    base   =&gt; 'ou=yaddayadda',\n    scope  =&gt; 'subtree',\n    filter =&gt; 'objectClass=person',\n    attrs  =&gt; ['manager'],\n);\n\nmy $g = Graph::Directed-&gt;new;\n\nfor my $found ( $search-&gt;entries ) {\n    my $mgr = $found-&gt;get_value('manager');\n    my $dn  = $result-&gt;dn;\n    $g-&gt;add_edge($mgr, $dn);\n}\n\nsay $g;\n</code></pre>\n\n<p>The resulting <code>Graph::Directed</code> object has a stringification overload so you can examine it superficially by simply printing it, but when you want to interrogate the structure further you will need to know some of the terms of <a href=\"https://en.wikipedia.org/wiki/Graph_%28discrete_mathematics%29\" rel=\"nofollow\"><em>graph theory</em></a>. For instance, <code>$g-&gt;source_vertices</code> will return a list of all nodes that have descendants but no parents\u2014in this case, a list of senior management, or <code>$g-&gt;is_cyclic</code> will return <em>true</em> if your data has any loops anywhere</p>\n\n<p><br/></p>\n\n<hr>\n\n<p>Here's an example of a program that uses your brief sample data to display a hierarchical tree of nodes</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\nuse Graph::Directed;\n\nmy $data = {\n    'cn=Firstname Lastname,ou=OrgUnit' =&gt; [\n        'cn=Personame Lastname,ou=OrgUnit',\n        'cn=AnotherPerson NameHere,ou=OrgUnit',\n    ],\n    'cn=AnotherPerson NameHere,ou=OrgUnit' =&gt;\n        [ 'cn=Someone Else,ou=OrgUnit', ]\n};\n\nmy $g = Graph::Directed-&gt;new;\n\nfor my $mgr ( keys %$data ) {\n    $g-&gt;add_edge($mgr, $_) for @{ $data-&gt;{$mgr} };\n}\n\ndump_tree($_) for $g-&gt;source_vertices;\n\n\nsub dump_tree {\n    my ($node, $level) = ( @_, 0);\n    print '   ' x $level, $node, \"\\n\";\n    dump_tree($_, $level+1) for $g-&gt;successors($node);\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>cn=Firstname Lastname,ou=OrgUnit\n   cn=AnotherPerson NameHere,ou=OrgUnit\n      cn=Someone Else,ou=OrgUnit\n   cn=Personame Lastname,ou=OrgUnit\n</code></pre>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 1, "accepted_answer_id": 35750442, "answer_count": 2, "score": 6, "last_activity_date": 1467554945, "creation_date": 1456926835, "last_edit_date": 1456935251, "question_id": 35749164, "link": "https://stackoverflow.com/questions/35749164/turning-a-set-of-parent-child-relationships-into-a-hierarchical-structure", "title": "Turning a set of parent-child relationships into a hierarchical structure", "body": "<p>I have an LDAP directory that I'm querying using <a href=\"http://metacpan.org/module/Net::LDAP\" rel=\"nofollow\"><code>Net::LDAP</code></a>. This gives me a set of parent-child relationships.</p>\n\n<p>It's a directory of people - and includes a 'manager' DN (which is another field within the directory). </p>\n\n<p>I'm having real trouble turning this manager->person set of records into a hierarchical structure. </p>\n\n<p>What I've got so far is:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Net::LDAP;\nuse Data::Dumper;\n\nmy %people;\n\nmy $ldap   = Net::LDAP-&gt;new('my_ldap_server');\nmy $result = $ldap-&gt;bind('bind_dn');\ndie if $result-&gt;code;\n\nmy $search = $ldap-&gt;search(\n    base   =&gt; 'ou=yaddayadda',\n    scope  =&gt; 'subtree',\n    filter =&gt; 'objectClass=person',\n    attrs  =&gt; ['manager'],\n);\nforeach my $found ( $search-&gt;entries ) {\n    my $mgr = $found-&gt;get_value('manager');\n    my $dn  = $result-&gt;dn;\n    push( @{ $people{$mgr} }, $dn );\n}\n</code></pre>\n\n<p>What this gives me is a hash of managers and the people who work for them (using DN, which is unique).</p>\n\n<p>An entry from <code>%people</code> looks like:</p>\n\n<pre><code>$VAR1 = { \n            'cn=Firstname Lastname,ou=OrgUnit' =&gt; [\n                          'cn=Personame Lastname,ou=OrgUnit',\n                          'cn=AnotherPerson NameHere,ou=OrgUnit', \n                         ],\n            'cn=AnotherPerson NameHere,ou=OrgUnit' =&gt; [\n                         'cn=Someone Else,ou=OrgUnit', \n                         ]\n           };\n</code></pre>\n\n<p>But I'm having trouble with turning that parent-child mapping into a hierarchical structure. </p>\n\n<p>e.g.:</p>\n\n<pre><code>'ceo' =&gt; [\n             'pa' =&gt; [],\n             'head_of_dept' =&gt; [ \n                       'person' =&gt; [],\n                       'person_with_staff' =&gt; [ 'person3', 'person4' ]\n                    ]\n          ]\n</code></pre>\n\n<p>I'm at something of a loss for how to accomplish this. It seems it shouldn't be too hard to do, given that each person is unique within the organisation structure. </p>\n\n<p>NB - in the above, I've got <code>cn=AnotherPerson NameHere,ou=OrgUnit</code> who has a subordinate, and I'm after making a nested mapping out of this:</p>\n\n<p>e.g.:</p>\n\n<pre><code>$VAR1 = {\n          'cn=Firstname Lastname,ou=OrgUnit' =&gt; [\n                                                  'cn=Personame Lastname,ou=OrgUnit',\n                                                  'cn=AnotherPerson NameHere,ou=OrgUnit',\n                                                  [\n                                                    'cn=Someone Else,ou=OrgUnit'\n                                                  ]\n                                                ]\n        };\n</code></pre>\n"}, {"tags": ["perl", "file", "compare", "line"], "comments": [{"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1456926707, "post_id": 35748972, "comment_id": 59171292, "body": "use <code>eq</code> to compare strings: if($line_filter eq $line_base). also <code>use strict</code> to see Errors in your program"}, {"owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "reply_to_user": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1456927424, "post_id": 35748972, "comment_id": 59171902, "body": "worked with eq, i editted my question. Thank you Jens!"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 1, "creation_date": 1456927488, "post_id": 35748972, "comment_id": 59171957, "body": "You should not Change the question, because the question makes no sence after editing"}, {"owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "edited": false, "score": 0, "creation_date": 1456927588, "post_id": 35748972, "comment_id": 59172040, "body": "I have added my comment as Answer. Feel free to accept and/or uvote it"}], "answers": [{"tags": [], "owner": {"reputation": 60461, "user_id": 3636601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/69a1b4f750ece89db0e49c94519f1a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Jens", "link": "https://stackoverflow.com/users/3636601/jens"}, "is_accepted": false, "score": 2, "last_activity_date": 1456927559, "creation_date": 1456927559, "answer_id": 35749455, "question_id": 35748972, "link": "https://stackoverflow.com/questions/35748972/file-comparison-in-perl-by-line-or-substring/35749455#35749455", "title": "File comparison in Perl - by line or substring", "body": "<p>Use <code>eq</code> to compare strings: </p>\n\n<p><code>if($line_filter eq $line_base)</code>. </p>\n\n<p>Also use <code>use strict</code> to see errors in your program </p>\n"}, {"tags": [], "owner": {"reputation": 82, "user_id": 2920468, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SI2cO.jpg?s=128&g=1", "display_name": "crustycollins", "link": "https://stackoverflow.com/users/2920468/crustycollins"}, "is_accepted": true, "score": 0, "last_activity_date": 1460723810, "last_edit_date": 1460723810, "creation_date": 1456933867, "answer_id": 35751992, "question_id": 35748972, "link": "https://stackoverflow.com/questions/35748972/file-comparison-in-perl-by-line-or-substring/35751992#35751992", "title": "File comparison in Perl - by line or substring", "body": "<p>I would do it a little different\nObviously you probably done want to push the file into an array if they are large.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\nmy $file_base = '1.TXT';\nmy $file_filter = '2.TXT';\n\nopen ( FILTER, \"&lt;$file_filter\" ) \n        or die \"Die: Could not open $file_filter: $!\";\n\nopen ( BASE, \"&lt;$file_base\" )\n    or die \"Die: Could not open $file_base: $!\";\n\nmy @filterArray = &lt;FILTER&gt;;\nmy @baseArray = &lt;BASE&gt;;\nclose BASE;\nclose FILTER;\n\nunless( arrayDiff( \\@filterArray , \\@baseArray ) )\n{\n    print \"Success!\";\n}\n\nsub arrayDiff {\n    my $array1 = shift(@_);\n    my $array2 = shift(@_); \n\n    my %array1_hash;\n    my %array2_hash;\n\n    # Create a hash entry for each element in @array1\n    for my $element ( @{$array1} ) {\n       $array1_hash{$element} = @{$array1};\n    }\n\n    # Same for @array2: This time, use map instead of a loop\n    map { $array2_hash{$_} = 1 } @{$array2};\n\n    for my $entry ( @{$array2} ) {\n        if ( not $array1_hash{$entry} ) {\n            return 1;  #Entry in @array2 but not @array1: Differ\n        }\n    }\n    if ( keys %array1_hash != keys %array2_hash ) {\n       return 1;   #Arrays differ\n    }\n        else {\n       return 0;   #Arrays contain the same elements\n    }\n}\n</code></pre>\n\n<p>perl  1156663.pl</p>\n\n<p>Success!</p>\n"}], "owner": {"reputation": 697, "user_id": 5449244, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/131ad184c67440a0a499852f247b4ea6?s=128&d=identicon&r=PG&f=1", "display_name": "onlyf", "link": "https://stackoverflow.com/users/5449244/onlyf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 35751992, "answer_count": 2, "score": -2, "last_activity_date": 1460723810, "creation_date": 1456926310, "last_edit_date": 1456927627, "question_id": 35748972, "link": "https://stackoverflow.com/questions/35748972/file-comparison-in-perl-by-line-or-substring", "title": "File comparison in Perl - by line or substring", "body": "<p>i m trying to compare 2 text files and i got down the following perl script, but for some reason even when i use the /same/ file as a base and filter, it doesnt output anything. I m really new to Perl, so apologies if any of this sounds base.</p>\n\n<pre><code>my $file_base = 'CSP8216.TXT';\nmy $file_filter = 'CSP8216.TXT';\n\nopen my $info_filter, $file_filter or die \"Die: Could not open $file_filter: $!\";\nwhile(my $line_filter = &lt;$info_filter&gt;)\n{\n    open my $info_base, $file_base or die \"Die: Could not open $file_base: $!\";\n        while(my $line_base = &lt;$info_base&gt;)\n        {\n            if(\"$line_filter\"==\"$line_base\")\n            #if(substr($line_filter, 0, 11)==substr($line_base, 0, 11))\n            {\n                print $line_base; \n            }\n\n\n        }\n        close $info_bae;\n\n\n}\nclose $info_filter;\n</code></pre>\n\n<p>Could someone point out why this doesnt seem to work?</p>\n"}, {"tags": ["mysql", "perl", "dbix-class"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1456923490, "post_id": 35747779, "comment_id": 59168933, "body": "From the link you posted &quot;You can pass any DBIx::Class::Schema::Loader::Base constructor option using <code>-o &lt;option&gt;=&lt;value&gt;</code>.&quot; Following the provided link, you get &quot;<i>Normally database names are lowercased and split by underscore, use [<code>-o preserve_case=1</code>] if you have CamelCase database names.</i>&quot; As for <code>InflateColumn::DateTime</code>, &quot;<i>Auto-create DateTime objects from date and datetime columns.</i>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1456926653, "post_id": 35748197, "comment_id": 59171255, "body": "Hi what do you mean by <i>if there is only one schema</i>? Am i missing something? Should i create this ONE SCHEMA? And how? I though that command relies entirely on the database schema. Thanks"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "edited": false, "score": 0, "creation_date": 1456927054, "post_id": 35748197, "comment_id": 59171603, "body": "@Cadz I was referring to the rather confusing documentation quote, where they dump two DBs into two Schema classes at the same time. Just run the command I posted. I tested it. A simple way to verify is to run <code>tree</code> on the <code>MyApp&#47;Schema</code> folder. If it contains a load of files, it didn&#39;t work. ;)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 6, "last_activity_date": 1456924320, "creation_date": 1456924320, "answer_id": 35748197, "question_id": 35747779, "link": "https://stackoverflow.com/questions/35747779/how-to-use-the-dbicdump-to-only-dump-specific-table/35748197#35748197", "title": "How to use the dbicdump to only dump specific table", "body": "<p>You can pass <a href=\"https://metacpan.org/pod/DBIx::Class::Schema::Loader::Base#constraint\" rel=\"noreferrer\">the option <code>constraint</code></a> to the underlying DBIx::Class::Schema::Loader instance so it only selects certain tables. The documentation is a bit vague on this.</p>\n\n<blockquote>\n  <p>These can be specified either as a regex (preferrably on the qr//\n  form), or as an arrayref of arrayrefs. Regexes are matched against the\n  (unqualified) table name, while arrayrefs are matched according to\n  \"moniker_parts\".</p>\n  \n  <p>For example:</p>\n\n<pre><code>db_schema =&gt; [qw(some_schema other_schema)],\nmoniker_parts =&gt; [qw(schema name)],\nconstraint =&gt; [\n    [ qr/\\Asome_schema\\z/ =&gt; qr/\\A(?:foo|bar)\\z/ ],\n    [ qr/\\Aother_schema\\z/ =&gt; qr/\\Abaz\\z/ ],\n],\n</code></pre>\n  \n  <p>In this case only the tables foo and bar in some_schema and baz in\n  other_schema will be dumped.</p>\n</blockquote>\n\n<p>So what you need to pass to <code>dbicdump</code> would look something like this.</p>\n\n<pre><code>dbicdump \\\n  -o dump_directory=./lib \\\n  -o components='[\"InflateColumn::DateTime\"]' \\\n  -o preserve_case=1 \\\n  -o constraint='qr/^(?:foo|bar|baz)$/' \\\n   MyApp::Schema dbi:mysql:database=database_name user pass;\n</code></pre>\n\n<p>That will only give you the tables <em>foo</em>, <em>bar</em> and <em>baz</em>. You need the quoted regular expression without array refs if there is only one schema, and you don't want to use manually preset monikers (which are names used for tables in the generated Schema class).</p>\n"}], "owner": {"reputation": 365, "user_id": 1701831, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1641053119/picture?type=large", "display_name": "Cadz", "link": "https://stackoverflow.com/users/1701831/cadz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 1, "accepted_answer_id": 35748197, "answer_count": 1, "score": 5, "last_activity_date": 1551792770, "creation_date": 1456923122, "last_edit_date": 1551792770, "question_id": 35747779, "link": "https://stackoverflow.com/questions/35747779/how-to-use-the-dbicdump-to-only-dump-specific-table", "title": "How to use the dbicdump to only dump specific table", "body": "<p>I just need to dump specific tables from my database such that these <strong>specific tables (3 tables to be exact out of 200 tables)</strong> will now be implemented by <code>DBIx::Class::Schema</code>.</p>\n\n<p>Here is the command from the docs (<a href=\"https://metacpan.org/pod/dbicdump\" rel=\"noreferrer\">https://metacpan.org/pod/dbicdump</a>): </p>\n\n<pre><code>dbicdump -o dump_directory=./lib   -o components='[\"InflateColumn::DateTime\"]'   -o preserve_case=1   MyApp::Schema dbi:mysql:database=database_name user pass;\n</code></pre>\n\n<p>I tried appending the table name after the database_name but no luck, it still dumps all the tables in the specified database. Need help. I can't find anything in the docs.</p>\n\n<p>Also Out of topic question : </p>\n\n<p>What does these means? <code>-o components='[\"InflateColumn::DateTime\"]'   -o preserve_case=1</code> I also cant find their explanation in the docs.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1456937295, "post_id": 35745176, "comment_id": 59179832, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/23932924/unable-to-store-array-as-a-hash-value\">Unable to store array as a hash value</a> or <a href=\"http://stackoverflow.com/questions/28480241/how-do-i-store-an-array-as-a-value-in-a-perl-hash\">How do I store an array as a value in a Perl hash?</a>"}, {"owner": {"reputation": 188, "user_id": 756518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98211ed3df0c3f3b68730ea0ec6f35f1?s=128&d=identicon&r=PG", "display_name": "Mondongo", "link": "https://stackoverflow.com/users/756518/mondongo"}, "edited": false, "score": 0, "creation_date": 1456952079, "post_id": 35745176, "comment_id": 59189056, "body": "Please mark Sobrique answer as the correct one!"}, {"owner": {"reputation": 766, "user_id": 2725344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ffadefaa4b88511585e9967edead84?s=128&d=identicon&r=PG&f=1", "display_name": "john zhao", "link": "https://stackoverflow.com/users/2725344/john-zhao"}, "edited": false, "score": 0, "creation_date": 1456969890, "post_id": 35745176, "comment_id": 59196434, "body": "I think Sobrique answer is better than answers of Unable to store array as a hash value or How do I store an array as a value in a Perl hash"}], "answers": [{"comments": [{"owner": {"reputation": 67098, "user_id": 1235698, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90fd9ad4efef8eb93209f42183c48f3e?s=128&d=identicon&r=PG", "display_name": "Marcin Orlowski", "link": "https://stackoverflow.com/users/1235698/marcin-orlowski"}, "edited": false, "score": 0, "creation_date": 1456916317, "post_id": 35745232, "comment_id": 59163781, "body": "you may want to add the print output you are getting for other readers to see the difference"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 12, "last_activity_date": 1456918096, "last_edit_date": 1456918096, "creation_date": 1456916258, "answer_id": 35745232, "question_id": 35745176, "link": "https://stackoverflow.com/questions/35745176/can-array-be-value-of-hash-in-perl/35745232#35745232", "title": "Can array be value of Hash in Perl", "body": "<p>Yes, it can. </p>\n\n<p>In <code>perl</code> multi-dimensional structures are done via references:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse JSON;\n\nmy @array;\n@array=(1, 2, 35);\nmy %hash;\n$hash{\"teams\"}=\\@array;\nmy $json = encode_json(\\%hash);\nprint $json.\"\\n\";\n</code></pre>\n\n<p>The way this works is - your hash value can <em>only</em> be single scalar value. This should be a reference to an array. </p>\n\n<p>This prints:</p>\n\n<pre><code>{\"teams\":[1,2,35]}\n</code></pre>\n\n<p>You could accomplish the same result with:</p>\n\n<pre><code>$hash{\"teams\"}=[@array];\n</code></pre>\n\n<p>Which is similar, in that it <em>copies</em> <code>@array</code> into an anonymous array.</p>\n\n<p>The distinction comes if you re-use <code>@array</code>:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse JSON;\n\nmy @array;\n@array=(1, 2, 35);\nmy %hash;\n$hash{\"teams\"}=\\@array;\n@array = ( 3, 4, 5 ) ;\n$hash{\"more\"} = \\@array;\nmy $json = encode_json(\\%hash);\nprint $json.\"\\n\";\n</code></pre>\n\n<p>This will actually print:</p>\n\n<pre><code>{\"teams\":[3,4,5],\"more\":[3,4,5]}\n</code></pre>\n\n<p>Because you've altered the array, and used a reference to the same array twice.</p>\n\n<p>But if you do:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse JSON;\n\nmy @array;\n@array=(1, 2, 35);\nmy %hash;\n$hash{\"teams\"}=[@array];\n@array = ( 3, 4, 5 ) ;\n$hash{\"more\"} = [@array];\nmy $json = encode_json(\\%hash);\nprint $json.\"\\n\";\n</code></pre>\n\n<p>You get:</p>\n\n<pre><code>{\"more\":[3,4,5],\"teams\":[1,2,35]}\n</code></pre>\n\n<p>You can see what's going on with the rather handy <code>Data::Dumper</code> module:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse JSON;\nuse Data::Dumper;\n\nmy @array;\n@array = ( 1, 2, 35 );\nmy %hash;\n$hash{\"teams\"} = @array;\nprint Dumper \\%hash;\n</code></pre>\n\n<p>You'll see that what's in <code>hash</code> is:</p>\n\n<pre><code>$VAR1 = {\n          'teams' =&gt; 3\n        };\n{\"teams\":3}\n</code></pre>\n\n<p>Why you might ask? Well, because the entry in a hash can <em>only</em> be a scalar.</p>\n\n<p>So you are accessing your array in a scalar context. And an array in a scalar context, prints it's number of elements:</p>\n\n<pre><code>print scalar @array; # prints 3\n</code></pre>\n\n<p>Which is what's happening in your example. </p>\n"}], "owner": {"reputation": 766, "user_id": 2725344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ffadefaa4b88511585e9967edead84?s=128&d=identicon&r=PG&f=1", "display_name": "john zhao", "link": "https://stackoverflow.com/users/2725344/john-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1457115487, "accepted_answer_id": 35745232, "answer_count": 1, "score": 2, "last_activity_date": 1456918096, "creation_date": 1456916105, "last_edit_date": 1456917747, "question_id": 35745176, "link": "https://stackoverflow.com/questions/35745176/can-array-be-value-of-hash-in-perl", "closed_reason": "Duplicate", "title": "Can array be value of Hash in Perl", "body": "<p>Now I need to get <code>{\"teams\":[1, 2, 35]}</code>, I wrote below code.</p>\n\n<pre><code>use JSON\n\nmy @array;\n@array=(1, 2, 35);\nmy %hash;\n$hash{\"teams\"}=@array;\n$json = encode_json(\\%hash);\nprint $json.\"\\n\";\n</code></pre>\n\n<p>but I just get <code>{\"teams\":3}</code>.</p>\n\n<p>My question is can array be value of Hash in Perl?</p>\n"}, {"tags": ["linux", "apache", "perl", "bugzilla"], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "is_accepted": false, "score": 1, "last_activity_date": 1458038955, "creation_date": 1458038955, "answer_id": 36009111, "question_id": 35742834, "link": "https://stackoverflow.com/questions/35742834/mod-perl-so-for-apache-2-4-required-by-bugzilla/36009111#36009111", "title": "mod_perl.so for apache 2.4 required by bugzilla", "body": "<p>The best answer to this question is: Don't use mod_perl! mod_perl seams to be deprecated and there is simply no mean to make it work. Use CGI instead! This works. My fault was having forgotten this. I set up bugzille 2009 using cgi. I have forgotten this fact because since it was just working fine. I never touched again until upgrading for new versions. While mod_php is still in use, for perl use cgi and reverse proxy!</p>\n"}], "owner": {"reputation": 351, "user_id": 2496001, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/843cbaf3ec1c12f8074dff03789b0575?s=128&d=identicon&r=PG", "display_name": "juerg", "link": "https://stackoverflow.com/users/2496001/juerg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1458038955, "creation_date": 1456910078, "question_id": 35742834, "link": "https://stackoverflow.com/questions/35742834/mod-perl-so-for-apache-2-4-required-by-bugzilla", "title": "mod_perl.so for apache 2.4 required by bugzilla", "body": "<p>Environment:</p>\n\n<pre><code>    SuSE SLES11 SP4, Kernel 3.0.101-68-default\n    http-Server: apache 2.4.18 with OpenSSL 1.0.2e\n    MySQL 5.6.29\n</code></pre>\n\n<p>Further either:</p>\n\n<pre><code>    SLES 11 preinstalled SW:\n    Perl 5.10.0 with mod_perl v2.000004 and\n    bugzilla 4.2.4 being running before.\n</code></pre>\n\n<p>Or\nnew versions built from source i.e.</p>\n\n<pre><code>    perl 5.22.1 and mod_perl 2.0.9 and bugzilla -5.0.2\n</code></pre>\n\n<p>Starting position:</p>\n\n<p>The SLES 11 preinstalled http-server Apache 2.2 with OpenSSL 0.9.8 doesn't support TLS1.2 as required today.\nHence Apache 2.4 with the mentioned OpenSSL was compiled, built and installed. This runs well. To run bugzilla as before perl and mod_perl is required. Though trying hard, no attempt was successful. Neither with the preinstalled perl / mod_perl, nor with the versions built from source!</p>\n\n<p>Try 1:</p>\n\n<p>copy the mod_perl.so from /usr/lib64/apache2/ to the modules directory of the apache 2.4 installation and load the module within the http.conf. This results in error:</p>\n\n<pre><code>    modules/mod_perl.so: undefined symbol: ap_log_error.\n</code></pre>\n\n<p>Hence going on this way much more errors may appear!</p>\n\n<p>Try 2:</p>\n\n<p>using preinstalled perl 5.10.0 and source mod-perl 2.0.9 to build and install, using:</p>\n\n<pre><code>    perl Makefile.PL MP_APXS=/opt/apache/http/bin/apxs\n</code></pre>\n\n<p>this results in:</p>\n\n<pre><code>    Please repair your Module::CoreList at lib/Apache2/Build.pm line 50.\n    BEGIN failed--compilation aborted at lib/Apache2/Build.pm line 65.\n    Compilation failed in require at Makefile.PL line 38.\n    BEGIN failed--compilation aborted at Makefile.PL line 38.\n</code></pre>\n\n<p>Apparently a problem with incompatible perl versions. No go!</p>\n\n<p>Try 3:</p>\n\n<p>Compile, build and install perl-5.22.1</p>\n\n<p>In fact this was never a real problem all possible mutations tried, resulted in pass for all tests using make test. make install was always OK too, but building mod-perl failed with:</p>\n\n<pre><code>    [  error] Using Perl 5.022001 w/o ithreads and httpd-2.4.\n    [  error] Failed requirements:\n    [  error]   - Perl built with ithreads (build perl with -Duseithreads)\n</code></pre>\n\n<p>A frustrating exercise, because even using -Duseithreads I got the same error again, even after make clean. Finally after deleting the source unpacking from tar and the command:</p>\n\n<pre><code>    ./Configure -Dprefix=/opt/perl -Duseithreads -Accflags=-fPIC\n</code></pre>\n\n<p>I got a mod_perl.so as desired.\nHowever starting the apache server resulted in:</p>\n\n<pre><code>    ./apachectl: line 79:  5760 Segmentation fault      $HTTPD \"$@\"\n</code></pre>\n\n<p>I got stuck! I lost enough time! Is anybody out there with experience of this kind of problems?\nI appreciate any useful hint. </p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1456905223, "post_id": 35741294, "comment_id": 59156245, "body": "If you allow everything, use <code>^.*$</code> and restrict it with a lookahead disallowing the <code>locales&#47;(?:DE|FR)</code> at the beginning: <a href=\"https://regex101.com/r/vF1fZ3/3\" rel=\"nofollow noreferrer\"><code>&#47;^(?!locales\\&#47;(?:DE|FR)).*$&#47;</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456906759, "post_id": 35741456, "comment_id": 59157077, "body": "I believe he wants to skip every file in locale i.e <code>locales&#47;*</code> except <code>locale&#47;US</code>."}, {"owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456906853, "post_id": 35741456, "comment_id": 59157124, "body": "Based on this line in question <code>This works for locales but fails to include the other root folders.</code> I think OP wants to exclude <code>locales&#47;US</code> only"}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456906974, "post_id": 35741456, "comment_id": 59157195, "body": "His regex works for <code>locales</code>, so he is talking about <code>public</code>, <code>test</code> as other root folders."}], "tags": [], "owner": {"reputation": 658023, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 2, "last_activity_date": 1456905473, "creation_date": 1456905473, "answer_id": 35741456, "question_id": 35741294, "link": "https://stackoverflow.com/questions/35741294/perl-regex-match-all-folders-except-a-certain-subfolder-pattern/35741456#35741456", "title": "Perl Regex: Match all folders except a certain subfolder pattern", "body": "<p>To match anything EXCEPT <code>locales/US</code>, you can use negative lookahead:</p>\n\n<pre><code>/^(?!locales\\/US).*/m\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/rO4jD0/1\" rel=\"nofollow\">RegEx Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 1334, "user_id": 674033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/cc717715a1581d90638854e3c3f4e2ef?s=128&d=identicon&r=PG&f=1", "display_name": "AVProgrammer", "link": "https://stackoverflow.com/users/674033/avprogrammer"}, "edited": false, "score": 0, "creation_date": 1584330260, "post_id": 35741712, "comment_id": 107394756, "body": "This is nice, but the point of a regex is to remove verbosity. You want to define a rule and apply it in one line."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1456907175, "last_edit_date": 1456907175, "creation_date": 1456906495, "answer_id": 35741712, "question_id": 35741294, "link": "https://stackoverflow.com/questions/35741294/perl-regex-match-all-folders-except-a-certain-subfolder-pattern/35741712#35741712", "title": "Perl Regex: Match all folders except a certain subfolder pattern", "body": "<p>You can use two regular expressions instead of cluttering it up in one. Below is an attempt: </p>\n\n<pre><code>my @folders =\n  qw (locales/DE/en locales/FR/en locales/US/en locales/US/fr public test);\n\nforeach (@folders) {\n    if (/^locales/) {\n        next if ( $_ !~ /^locales\\/US/ ); # skip everything except locales/US\n    }\n    print $_,\"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 4969, "user_id": 95175, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/91958ffd49486ecc65236951c7d44aa1?s=128&d=identicon&r=PG", "display_name": "Jamis Charles", "link": "https://stackoverflow.com/users/95175/jamis-charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5857, "favorite_count": 0, "closed_date": 1457115669, "answer_count": 2, "score": 0, "last_activity_date": 1456907355, "creation_date": 1456904837, "last_edit_date": 1456905169, "question_id": 35741294, "link": "https://stackoverflow.com/questions/35741294/perl-regex-match-all-folders-except-a-certain-subfolder-pattern", "closed_reason": "Duplicate", "title": "Perl Regex: Match all folders except a certain subfolder pattern", "body": "<p>Given these folder names:</p>\n\n<pre><code>locales/DE/en    \nlocales/FR/en\nlocales/US/en\nlocales/US/fr\npublic\ntest\n[...]\n</code></pre>\n\n<p>I want to match everything EXCEPT the first 2 patterns. There are other folders in the root, and other subfolders in the <code>locales</code> folder. I really want to just exclude everything in <code>locales/*</code> EXCEPT <code>locales/US</code></p>\n\n<p>This works for <code>locales</code> but fails to include the other root folders.<br>\n<code>/(locales)\\/(US)/</code></p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["regex", "perl", "ag"], "comments": [{"owner": {"reputation": 6468, "user_id": 2057509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0bKBt.jpg?s=128&g=1", "display_name": "gregory", "link": "https://stackoverflow.com/users/2057509/gregory"}, "edited": false, "score": 0, "creation_date": 1484085596, "post_id": 35740753, "comment_id": 70363326, "body": "Isn&#39;t this really a duplicate of <a href=\"http://stackoverflow.com/questions/37037307/expand-command-line-exclude-pattern-with-zsh/37056810#37056810\" title=\"expand command line exclude pattern with zsh\">stackoverflow.com/questions/37037307/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "is_accepted": false, "score": 0, "last_activity_date": 1456907016, "creation_date": 1456907016, "answer_id": 35741866, "question_id": 35740753, "link": "https://stackoverflow.com/questions/35740753/ag-search-all-folders-except-for-foldername-subfolder-perl-regex/35741866#35741866", "title": "ag: Search all folders except for folderName/subFolder (Perl Regex)", "body": "<p>If it is perl regular expressions this should give you the expected result:</p>\n\n<pre><code>^(?:locales/US/en|(?!locales))\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>^   = anchor regular expression to start of string.\n(?: = group which is not captured\n|   = Alternation for alternative capture\n(?! = negative look ahead assertion - ensures that the string isnt starting with locales, unless it is starting with locales/US/en\n</code></pre>\n"}], "owner": {"reputation": 4969, "user_id": 95175, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/91958ffd49486ecc65236951c7d44aa1?s=128&d=identicon&r=PG", "display_name": "Jamis Charles", "link": "https://stackoverflow.com/users/95175/jamis-charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 582, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456907016, "creation_date": 1456902926, "last_edit_date": 1456903388, "question_id": 35740753, "link": "https://stackoverflow.com/questions/35740753/ag-search-all-folders-except-for-foldername-subfolder-perl-regex", "title": "ag: Search all folders except for folderName/subFolder (Perl Regex)", "body": "<p>I have these folders that have subfolders in them... </p>\n\n<pre><code>locales/US/en\nlocales/US/fr\nlocales/FR/en\nlocales/FR/fr\nlocales/DE/en\nlocales/DE/fr\npublic\ntest\n[...]\n</code></pre>\n\n<p>I want Silver Searcher to ignore <code>locales/*</code> EXCEPT for <code>locales/US/en/*</code> (essentially I only care about <code>US/en</code> locale files)</p>\n\n<p>This works, EXCEPT that it doesn't show the other folders in root (public and test):<br>\n<code>ag -l -G '(locales)/(US)'</code></p>\n\n<p>I believe AG uses Perl Regexes. Any thoughts?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456902059, "post_id": 35739140, "comment_id": 59154673, "body": "Questions: 1) finding &#39;1,2,3&#39; is a condition -- if not found don&#39;t bother, is this correct?  2) column 1 in both files are given the same in the example ... are they different?  3) once the match is found, are the whole rows (of the match) guarranted to be equal? 4) does the order of lines to write out matter?"}, {"owner": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456902933, "post_id": 35739140, "comment_id": 59155061, "body": "@zdim, Questions: 1) correct 2) they are different 3) if the match is found, print the file 2 row fully 4) order is doesn&#39;t matter"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456945912, "post_id": 35739140, "comment_id": 59185371, "body": "Can there be (legitimate) empty fields in your files? If the answer is &#39;<i>no</i>&#39; you can use the much simpler version in my answer. If the answer is &#39;<i>no, never</i>&#39; I should probably remove the part with checks etc.  If the data may be messier (various fields missing) one should have more checks. Please let me know."}], "answers": [{"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": 1, "last_activity_date": 1456909894, "last_edit_date": 1456909894, "creation_date": 1456903244, "answer_id": 35740819, "question_id": 35739140, "link": "https://stackoverflow.com/questions/35739140/compare-within-the-file-and-then-between-the-files/35740819#35740819", "title": "compare within the file and then between the files", "body": "<p>Your description is a little ambiguous - setting aside the check for <strong>\"1,2,3\"</strong> for a moment - your description talks of comparing columns 1 and 2 but column 1 has the same thing on every line in both files - i.e. <strong>\"chr\"</strong>.  As you've highlighted the numbers in columns 2 &amp; 3 and as they appear in the <strong>\"Output.txt\"</strong> file, I presume you mean those two columns not 1 and 2 - that's the basis I'm proceeding on.</p>\n\n<p>Before moving onto the solution, I just want to highlight a couple of problems with your existing code - firstly, you are <em>string concatenating</em> the two columns.  What if columns 2 &amp; 3 have <strong>\"46\"</strong> &amp; <strong>\"123\"</strong> respectively in one file; and in the other its <strong>\"461\"</strong> &amp; <strong>\"23\"</strong>, then your concat is going to give you a false match.  Now maybe, that just <strong>\"ain't going to happen\"</strong> and if you know your data that well, then fair enough - but you need to be aware of the possibility.</p>\n\n<p>More importantly, the hash keeping track of the <em>numbers previously seen</em> is insufficient for the task you need of it - what happens if there are two lines with the same content in columns 2 &amp; 3 <strong>in the same file?</strong>  What happens if there are two lines the same in one file, and one line the same in the other file, giving a <strong>total of 3 but your only looking for a tally of 2?</strong>.  Again, you may know that these combinations are not going to show up in your data but you need to be aware of the lurking bug.</p>\n\n<p>One other thing - it's not clear (to me, at least) if the match of columns 2 &amp; 3 have to be on the same line of each file respectively.  In your test data, columns 2 &amp; 3 on lines 4 &amp; 5 are matching lines 4 &amp; 5 respectively in the other file - is that necessary?  Or, (again, setting aside the <strong>\"1,2,3\"</strong> thing for a minute) can columns 2 &amp; 3 on line 4 of the first file happily match columns 2 &amp; 3 of line 7 in the second?</p>\n\n<p>I don't mean to be difficult here but obviously these things are very relevant to finding the right solution.</p>\n\n<p>If you want the minimalist change to your existing code because none of these things I'm pointing out are going to matter, all you need to do is \"bail out\" of the first loop unless <strong>\"1,2,3\"</strong> is in column 5, that is <code>$arr1[4]</code> or - after the split - <code>$hit5</code>.  Well, just add exactly that;</p>\n\n<pre><code>chomp;\nmy($hit1,$hit2,$hit3,$hit4,$hit5,$rest)=split(/\\t/);\nnext unless $hit4 eq \"1,2,3\";   # &lt;-- Added line\nmy $ckey=\"$hit1$hit2\";\n$chash{$ckey}=1; \n</code></pre>\n\n<p><strong>'next'</strong> immediately terminates the current loop run, so <code>$chash</code> will not get updated with the contents of columns 2 &amp; 3 - but, I have to repeat, the end result is pretty precarious code.</p>\n\n<p>Here is an alternative implementation:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse v5.12;\n\nmy $file1 = $ARGV[0];\nmy $file2 = $ARGV[1];\nopen(FILE1, $file1) or die \"$file1: $!\\n\";\nopen(FILE2, $file2) or die \"$file2: $!\\n\";\nopen my $f, '&gt;', \"output.txt\" or die \"Cannot open output.txt: $!\";\n\nmy @arr1 = map [split(\" \", $_)], &lt;FILE1&gt;;\nmy @arr2 = map [split(\" \", $_)], &lt;FILE2&gt;;\nclose FILE1;\nclose FILE2;\n\nmy $i = 0;\nfor my $arr1row (@arr1) {\n    # Grab the same row in file 2\n    my $arr2row = $arr2[$i++] ;\n\n    # bail unless we have \"1,2,3\" in col 5\n    next unless $arr1row-&gt;[4] eq \"1,2,3\" ;\n\n    # bail if we dont have a line from file 2 because its shorter\n    next unless defined $arr2row ;\n\n    # If col2 and col3 are the same from each file ...\n    if ($arr1row-&gt;[1] == $arr2row-&gt;[1] &amp;&amp;\n        $arr1row-&gt;[2] == $arr2row-&gt;[2] )  {\n\n        # print out all fields from file 2\n        say $f join(\"\\t\", @$arr2row);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 2, "last_activity_date": 1560839193, "last_edit_date": 1560839193, "creation_date": 1456908144, "answer_id": 35742182, "question_id": 35739140, "link": "https://stackoverflow.com/questions/35739140/compare-within-the-file-and-then-between-the-files/35742182#35742182", "title": "compare within the file and then between the files", "body": "<p>The shown code is a bit too complicated. Also, it is not clear how the hashes will do if any words between files happen to be the same. Further, one also needs to keep the whole lines <em>and</em> coordinate that with places of match. You'd need extra data structures.  Here is a simpler approach.</p>\n\n<p>Join the first two fields on each line and put that string on an array. While passing through <code>file1</code> also check for the condition, if not found exit.  Form and store same strings for <code>file2</code>, also storing whole lines. Then iterate through index of either array and when strings match select the corresponding line of <code>file2</code> (per requirement). These lines are our output. Code can be simpler, see <em>Notes</em>.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $patt = '1,2,3';\n\n# Join cols 1,2 into a string, store; check condition\nopen my $fh1, '&lt;', 'file1.txt';\nmy @f1;\nmy $go = 0;\nwhile (my $line = &lt;$fh1&gt;) {\n    next if $line =~ /^\\s*$/;\n    my @cols = split '\\s+', $line;\n    my ($c1, $c2) = @cols[0,1];\n    next if not $c1 or not $c2;\n    push @f1, join '_', $c1, $c2;\n    $go = 1 if $cols[4] and $patt eq $cols[4];\n}\nclose $fh1;\n\nif (not $go) {\n    print \"Condition not satisfied, exiting.\\n\";    \n    exit 0;\n}\n\n# Join cols 1, 2 from file2, store; store lines\nmy (@f2, @lines);\nopen my $fh2, '&lt;', 'file2.txt';\nwhile (&lt;$fh2&gt;) {\n    next if /^\\s*$/;\n    my ($c1, $c2) = (split)[0,1];\n    next if not $c1 or not $c2;\n    push @f2, join('_', $c1, $c2);\n    push @lines, $_;\n}\nclose $fh2;\n\n# Find matches: compare strings from arrays\n# Print corresponding lines file2\nmy @output;\nforeach my $i (0..$#f2) {\n    push(@output, $lines[$i]) if $f1[$i] eq $f2[$i];\n} \nprint \"$_\\n\" for @output;\n</code></pre>\n\n<p><strong>Note</strong>.  By the problem description most lines of two sample files match, having equal first two fields. The shown expected output disagrees with this but the description is fairly explicit.  </p>\n\n<p>With extra empty lines removed by hand for space, this prints</p>\n\n<pre>\ncol1       col2        col3   col4      col5    col6     col7    col8       \nchr1    1361651     1361652    G       data5   data6    data7....data16\nchr1    3329147     3329148   ........\nchr1    8421092     8421093   ........ \nchr1    13802362    13802363   ........        \nchr1    43315088    43315089   ........        \nchr1    52256664    52256665   ........\n</pre>\n\n<p><em>Notes</em>.   For mere comparison fields can be just joined; having a recognizible sequence (just <code>_</code> here) allows us to restore them if needed. Some reasonable assumptions are clearly made: files are of same lengths, with same structure (same columns missing). If they don't hold it is easy to adjust this step-by-step processing. While reading the file we guard against: either of first two fields missing, missing fourth column. If this is surely not needed </p>\n\n<pre><code>while (&lt;$fh1&gt;) {\n    next if /^\\s*$/;\n    my ($c1, $c2, $c4) = (split)[0,1,4];\n    push @f1, join '_', $c1, $c2;\n    $go = 1 if $patt eq $cols[4];\n}\nexit if not $go;\nwhile (&lt;$fh2&gt;) {\n    next if /^\\s*$/;\n    push @f2, join '_', (split)[0,1];\n    push @lines, $_;\n}\n@output = map { $lines[$_] } grep { $f1[$_] eq $f2[$_] } (0..$#f2);\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 35742182, "answer_count": 2, "score": 1, "last_activity_date": 1560839464, "creation_date": 1456896300, "last_edit_date": 1560839464, "question_id": 35739140, "link": "https://stackoverflow.com/questions/35739140/compare-within-the-file-and-then-between-the-files", "title": "compare within the file and then between the files", "body": "<p>File 1:</p>\n\n<pre>\ncol1    col2     col3   col4   col5    col6     col7    col8       \n\nchr1    1361651 1361652 1       3       0       0       1\nchr1    1421915 1421916 1       1       1       0       0\nchr1    3329147 3329148 2       2,3     0       1       1\nchr1    8421092 8421093 3       1,2,3   1       1       1\nchr1    13802362        13802363        3       1,2,3   1       1       1\nchr1    43315088        43315089        2       1,2     1       1       0\nchr1    52256664        52256665        2       1,3     1       0       1\n</pre>\n\n<p>File 2 :</p>\n\n<pre>\ncol1      col2       col3     col4     col5    col6     col7.....col16    \n\nchr1    1361651     1361652    G       data5   data6    data7....data16\nchr1    2468066     2468067   G       data5   data6    data7....data16\nchr1    3329147     3329148   ........\nchr1    8421092     8421093   ........ \nchr1    13802362    13802363   ........        \nchr1    43315088    43315089   ........        \nchr1    52256664    52256665   ........\n</pre>\n\n<p>Output.txt</p>\n\n<p>check the column 5 of file 1 has 1,2,3 then compare the column 1 and column 2 betwen the file 1 and two and print the match in seperate file</p>\n\n<pre>\ncol1      col2       col3     col4     col5    col6     col7.....col16\n\nchr1    8421092     8421093   ........ \nchr1    13802362    13802363   ........        \n</pre>\n\n<p>my code helps me to compare two files, but first i need to compare with in the file and then across the file.</p>\n\n<pre><code>my $file1 = $ARGV[0];\nmy $file2 = $ARGV[1];\nopen(FILE1, $file1);\nopen(FILE2, $file2);\nopen my $f, '&gt;', \"output.txt\" or die \"Cannot open output.txt: $!\";\nmy @arr1=&lt;FILE1&gt;;\nmy @arr2=&lt;FILE2&gt;;\nclose FILE1;\nclose FILE2;\nfor (@arr1)\n{\n    chomp;\n    my($hit1,$hit2,$hit3,$hit4,$hit5,$rest)=split(/\\t/);\n    my $ckey=\"$hit1\\_$hit2\";\n    $chash{$ckey}=1;\n}\nfor (@arr2)\n{\n    chomp;\n    my($val1,$val2,$val3,$val4,$val5,$rest)=split(/\\t/);\n    my $ckey=\"$val1\\_$val2\";\n    $chash{$ckey}++;\n    if( $chash{$ckey} == 2 )\n    {\n    # this key has been seen in both previous files\n    print $f \"$_\\n\";\n    }\n}\n</code></pre>\n"}, {"tags": ["perl", "http-headers", "httpresponse", "perl-module"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456897438, "post_id": 35739104, "comment_id": 59152497, "body": "Then, what is your problem?"}, {"owner": {"reputation": 649, "user_id": 2784466, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100001914302787/picture?type=large", "display_name": "Boontawee Home", "link": "https://stackoverflow.com/users/2784466/boontawee-home"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456908877, "post_id": 35739104, "comment_id": 59158343, "body": "Sometime jpeg broken or lost connection on slow internet.  Is there a way to check that we receive data correctly ?"}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1456900989, "post_id": 35739254, "comment_id": 59154100, "body": "And how do you get the size of the file before download?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456920984, "post_id": 35739254, "comment_id": 59167171, "body": "Easy! If you don&#39;t have a complete header, you didn&#39;t get the entire response. If the responses uses a Content-Length header, you have the size of the response in advance. If the server uses a chunked response, you have the size of the next check in advance. If the server uses neither, party like it&#39;s 1999. It&#39;s possible to detect shortened responses. The question is Net::HTTP/LWP::Protocol::http detect thems. (It definitely does in the case of network failure, but I&#39;m not sure what happens if the sockets gets closed prematurely (e.g. if the web server segfaults).)"}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1456957246, "post_id": 35739254, "comment_id": 59191993, "body": "Checking for <code>$response-&gt;header(&#39;X-Died&#39;)</code> can be helpful."}], "tags": [], "owner": {"reputation": 1, "user_id": 6003656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affe606e04b816b1a40c60a57b18c97e?s=128&d=identicon&r=PG&f=1", "display_name": "Kick Smit", "link": "https://stackoverflow.com/users/6003656/kick-smit"}, "is_accepted": false, "score": 0, "last_activity_date": 1456896845, "creation_date": 1456896845, "answer_id": 35739254, "question_id": 35739104, "link": "https://stackoverflow.com/questions/35739104/how-to-verify-httpresponse-data-is-really-complete-100-downloaded/35739254#35739254", "title": "How to verify HTTP::Response data is really complete 100% downloaded", "body": "<p>To check download complete, You should get total size of file before download. Then You can check download complete easily.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456921190, "post_id": 35740211, "comment_id": 59167329, "body": "Re &quot;<i>And as far as I can see there are no information [if the server uses chunked Transfer-Encoding] which let you determine if the download was complete or not</i>&quot;, What? The entire reason chunked is used is to provide that information!!!"}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456928318, "post_id": 35740211, "comment_id": 59172630, "body": "@ikegami: in theory chunked encoding provides this information. But from looking at HTTP::Methods::read_entity_body it looks for me that  it is not propagated to the user if the final chunk was received or if the server closed the connection before the final chunk was received. Which means that you cannot verify if the download was complete."}], "tags": [], "owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": false, "score": 0, "last_activity_date": 1456900820, "creation_date": 1456900820, "answer_id": 35740211, "question_id": 35739104, "link": "https://stackoverflow.com/questions/35739104/how-to-verify-httpresponse-data-is-really-complete-100-downloaded/35740211#35740211", "title": "How to verify HTTP::Response data is really complete 100% downloaded", "body": "<p>It depends on the response from the server.<br>\nIf the server sends a Content-Length header then you could use this to verify the length. But if the server uses chunked Transfer-Encoding or simply closes the connection at the end of the response you cannot use this information. Such kind of responses are typical for dynamically generated content. And as far as I can see there are no information in these cases which let you determine if the download was complete or not.</p>\n"}], "owner": {"reputation": 649, "user_id": 2784466, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/100001914302787/picture?type=large", "display_name": "Boontawee Home", "link": "https://stackoverflow.com/users/2784466/boontawee-home"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1456900820, "creation_date": 1456896142, "last_edit_date": 1456896612, "question_id": 35739104, "link": "https://stackoverflow.com/questions/35739104/how-to-verify-httpresponse-data-is-really-complete-100-downloaded", "title": "How to verify HTTP::Response data is really complete 100% downloaded", "body": "<pre><code>$url = \"http://203.155.220.231/radar/pics/radarh.jpg\";\n\nuse LWP::UserAgent; \n$ua         = new LWP::UserAgent;   \n$request    = new HTTP::Request;\n$request-&gt;method('GET');\n$request-&gt;url($url);\n$response   = $ua-&gt;request($request);   \n\nif ( $response-&gt;is_error or \n     $response-&gt;header('Content-Type')   ne 'image/jpeg' or \n     $response-&gt;header('Content-Length') ne length($response-&gt;content)\n   )\n{\n    print $response-&gt;status_line . \"\\n\";\n    print $response-&gt;header('Content-Length') . \"\\n\";\n    print length($response-&gt;content) . \"\\n\";\n    die \"$!\";\n}\n</code></pre>\n\n<p>By checking $response->header('Content-Length') compare with length($response->content) is easiest way to verify data is really complete 100% downloaded ?</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 701, "user_id": 1850567, "user_type": "registered", "accept_rate": 49, "profile_image": "https://lh4.googleusercontent.com/-iXjLHlkT1tQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-irfOfcur2sH35gOr0EiOqwDISU1Q/mo/photo.jpg?sz=128", "display_name": "mo0206", "link": "https://stackoverflow.com/users/1850567/mo0206"}, "edited": false, "score": 0, "creation_date": 1456896205, "post_id": 35739099, "comment_id": 59152033, "body": "ps:unable to frame a correct question title for this. :-/"}, {"owner": {"reputation": 705, "user_id": 4290096, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8505a29c2e5418b0d015bf50c1175de2?s=128&d=identicon&r=PG&f=1", "display_name": "Arun Xavier", "link": "https://stackoverflow.com/users/4290096/arun-xavier"}, "edited": false, "score": 0, "creation_date": 1456896363, "post_id": 35739099, "comment_id": 59152100, "body": "can you add a specific language tag ?(javascript ??)"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 1, "creation_date": 1456896984, "post_id": 35739099, "comment_id": 59152316, "body": "Isn&#39;t this <code>JSON</code> ? Why don&#39;t you use an appropriate parser? If not, the IDs are numeric, sth. as simple as <code>&quot;id&quot;:(\\d+)</code> <a href=\"https://regex101.com/r/iQ5jL0/1\" rel=\"nofollow noreferrer\">will probably do</a>."}], "answers": [{"tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1456899105, "creation_date": 1456899105, "answer_id": 35739787, "question_id": 35739099, "link": "https://stackoverflow.com/questions/35739099/in-regex-get-a-single-match-just-before-the-match-pattern/35739787#35739787", "title": "in regex get a single match just before the match pattern?", "body": "<p>As an answer here as well. Either use appropriate <code>JSON</code> functions, if not, a simple regex like:</p>\n\n<pre><code>\"id\":(\\d+)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/iQ5jL0/1\" rel=\"nofollow\">will probably do</a> as the IDs are numeric.</p>\n"}], "owner": {"reputation": 701, "user_id": 1850567, "user_type": "registered", "accept_rate": 49, "profile_image": "https://lh4.googleusercontent.com/-iXjLHlkT1tQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-irfOfcur2sH35gOr0EiOqwDISU1Q/mo/photo.jpg?sz=128", "display_name": "mo0206", "link": "https://stackoverflow.com/users/1850567/mo0206"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456899105, "creation_date": 1456896103, "last_edit_date": 1456896655, "question_id": 35739099, "link": "https://stackoverflow.com/questions/35739099/in-regex-get-a-single-match-just-before-the-match-pattern", "title": "in regex get a single match just before the match pattern?", "body": "<p>I have a response like below</p>\n\n<pre><code>{\"id\":9,\"announcementName\":\"Test\",\"announcementText\":\"&lt;p&gt;TestAssertion&lt;/p&gt;\\n\",\"effectiveStartDate\":\"03/01/2016\",\"effectiveEndDate\":\"03/02/2016\",\"updatedDate\":\"02/29/2016\",\"status\":\"Active\",\"moduleName\":\"Individual Portal\"}\n{\"id\":103,\"announcementName\":\"d3mgcwtqhdu8003\",\"announcementText\":\"&lt;p&gt;This announcement is a test announcement\u201d,\"effectiveStartDate\":\"03/01/2016\",\"effectiveEndDate\":\"03/02/2016\",\"updatedDate\":\"02/29/2016\",\"status\":\"Active\",\"moduleName\":\"Individual Portal\"}\n{\"id\":113,\"announcementName\":\"asdfrtwju3f5gh7f21\",\"announcementText\":\"&lt;p&gt;This announcement is a test announcement\u201d,\"effectiveStartDate\":\"03/02/2016\",\"effectiveEndDate\":\"03/03/2016\",\"updatedDate\":\"02/29/2016\",\"status\":\"InActive\",\"moduleName\":\"Individual Portal\"}\n</code></pre>\n\n<p>I am trying get the value of id (103) of announcementName d3mgcwtqhdu8003.</p>\n\n<p>I am using below regEx pattern to get the id</p>\n\n<pre><code> \"id\":(.*?),\"announcementName\":\"${announcementName}\",\"announcementText\":\"\n</code></pre>\n\n<p>But it is matching everything from the first id to the announcementName. and returning </p>\n\n<pre><code>9,\"announcementName\":\"Test\",\"announcementText\":\"&lt;p&gt;TestAssertion&lt;/p&gt;\\n\",\"effectiveStartDate\":\"03/01/2016\",\"effectiveEndDate\":\"03/02/2016\",\"updatedDate\":\"02/29/2016\",\"status\":\"Active\",\"moduleName\":\"Individual Portal\"}\n{\"id\":103,\"announcementName\":\"d3mgcwtqhdu8003\",\"announcementText\":\n</code></pre>\n\n<p>But I want to match only from the id <strong>just before</strong> the required announcementName.</p>\n\n<p>How can I do this in RegEx . Can someone please help me on this ?</p>\n"}, {"tags": ["perl", "parallel-processing"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1456908250, "post_id": 35736441, "comment_id": 59157909, "body": "Are you sure this is the full code? It looks like <code>@devices</code> is has not been declared. The program should not compile. About <code>%cache</code>: it&#39;s declared inside of the <code>if</code>. <i>Lexical</i> variables with <code>my</code> in Perl always live in the enclosing <i>scope</i>, which in this case is the <code>{}</code> block of the <code>if</code>. So in each iteration of the loop, it will create an entirely new <code>$result</code> and <code>%cache</code>, and GC will take care of them once they go <i>out of scope</i>. But the <code>%cache</code> is indeed not necessary. You can replace each <code>$cache{foo}</code> with <code>$result-&gt;{foo}</code>. I don&#39;t know about <code>share</code> though."}, {"owner": {"reputation": 129, "user_id": 1393165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/01352cf505d8640e4b008f084d9ce7a2?s=128&d=identicon&r=PG", "display_name": "Lokicat", "link": "https://stackoverflow.com/users/1393165/lokicat"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456953732, "post_id": 35736441, "comment_id": 59190036, "body": "Yes, @devices is being declared, was just caught up in the slimming for this post. Sorry!"}, {"owner": {"reputation": 129, "user_id": 1393165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/01352cf505d8640e4b008f084d9ce7a2?s=128&d=identicon&r=PG", "display_name": "Lokicat", "link": "https://stackoverflow.com/users/1393165/lokicat"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456956181, "post_id": 35736441, "comment_id": 59191448, "body": "I&#39;m also quite happy for alternative methods. The guy before me had been writing results to a database but since he had to open, write and close the database in each fork, it was often failing due to being unable to open files."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 1393165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/01352cf505d8640e4b008f084d9ce7a2?s=128&d=identicon&r=PG", "display_name": "Lokicat", "link": "https://stackoverflow.com/users/1393165/lokicat"}, "edited": false, "score": 0, "creation_date": 1458607822, "post_id": 36093234, "comment_id": 59926434, "body": "Thanks for the info! For the record, my temporary solution was to throw a lot of RAM at it (which is hardly a solution but got it working for now). Extra RAM allowed me to keep the maxProcs high. CPU usage never gets very high and the high amount of maxProcs works well with the latency issues. Will look into threads and shared though :)"}], "tags": [], "owner": {"reputation": 1133, "user_id": 2185890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/330b262ed789de0997e720dce8ee1af0?s=128&d=identicon&r=PG", "display_name": "LaintalAy", "link": "https://stackoverflow.com/users/2185890/laintalay"}, "is_accepted": true, "score": 0, "last_activity_date": 1458331281, "creation_date": 1458331281, "answer_id": 36093234, "question_id": 35736441, "link": "https://stackoverflow.com/questions/35736441/why-does-a-program-with-parallelloops-exhaust-my-memory/36093234#36093234", "title": "Why does a program with Parallel::Loops exhaust my memory?", "body": "<p>Documentation of the module can be found in the CPAN <a href=\"http://search.cpan.org/~pmorch/Parallel-Loops/lib/Parallel/Loops.pm\" rel=\"nofollow\">here</a>.</p>\n\n<p>There's one part talking about the performance:</p>\n\n<blockquote>\n  <p>Also, if each loop sub returns a massive amount of data, this needs to\n  be communicated back to the parent process, and again that could\n  outweigh parallel performance gains unless the loop body does some\n  heavy work too.</p>\n</blockquote>\n\n<p>You are probably moving around complete copies of the variables in memory, pushing to the machine's limit if the MIB to poll and number of machines are big enough.</p>\n\n<p>Since what you are doing is an I/O intensive task and not a CPU task that could benefit of parallel CPU processing, I would reconsider the approach of launching so many (50!) threads for polling. </p>\n\n<ul>\n<li>Run the program with <code>$maxProcs</code> down to 1 to 5 processes and see how it behaves. Do some profiling of your code, attaching <code>Devel::NYTProf</code> to check where you are consuming time and if increasing the number of processes actually leads to a better performance.</li>\n<li>Reconsider using <code>Parallel::Loops</code> for this task. You may get better performance with <code>use threads</code><a href=\"http://perldoc.perl.org/threads.html\" rel=\"nofollow\">[1]</a> and a hash shared between the different threads (<code>use threads::shared</code>). </li>\n</ul>\n\n<p>Apologies if this could have been a comment. Starting in SO is difficult due to all the limitations that are in place :(</p>\n\n<p>If you already found a solution it would be great if you could share with us your findings. I didn't know <code>Parallel::Loops</code> before and I think I can give it some use.</p>\n"}], "owner": {"reputation": 129, "user_id": 1393165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/01352cf505d8640e4b008f084d9ce7a2?s=128&d=identicon&r=PG", "display_name": "Lokicat", "link": "https://stackoverflow.com/users/1393165/lokicat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 36093234, "answer_count": 1, "score": 1, "last_activity_date": 1458331281, "creation_date": 1456879498, "last_edit_date": 1456953800, "question_id": 35736441, "link": "https://stackoverflow.com/questions/35736441/why-does-a-program-with-parallelloops-exhaust-my-memory", "title": "Why does a program with Parallel::Loops exhaust my memory?", "body": "<p>I've inherited some code at work i'm trying to improve on. My Perl skills are somewhat lacking so would love some assistance!</p>\n\n<p>Essentially this script is SNMP polling a network of thousands of nodes to update it's local interface index cache. I've found it's hitting a problem where it's exhausting it's memory and failing. Code as follows (heavily reduced but i think you'll get the jist)</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Parallel::Loops;\n\nmy %snmp_results;\nmy $maxProcs = 50;\n\nmy @exceptions;\nmy @devices;\nmy %snmp_results;\n\nmy $pl = Parallel::Loops-&gt;new($maxProcs);\n$pl-&gt;share(\\%snmp_results, \\@exceptions );\n\nload_devices();\nget_snmp_interfaces();\n\nsub get_snmp_interfaces {\n    $pl-&gt;foreach( \\@devices, sub {\n        my ($name, $community, $snmp_ver) = @$_;\n        # Create the new ifindex cache, and return an array reference to the new entries\n\n        my $result = getSNMPIFFull($name, $community, $snmp_ver);\n        if (defined $result &amp;&amp; $result ne \"\") {\n            my %cache = %{$result};\n            print \"Got cache for $name\\n\";\n            # Build hash of all the links polled through SNMP\n            # [ifindex, ifdesc, ifalias, ifspeed, ip]\n            for my $link (keys %cache) {            \n                $snmp_results{$name}{$cache{$link}[0]} = [$cache{$link}[0], $cache{$link}[1], $cache{$link}[2], $cache{$link}[3], $cache{$link}[4]];            \n            }\n        }\n        else {\n            push(@exceptions, \"Unable to poll $name - $community - $snmp_ver\");\n        }\n    });\n}\n</code></pre>\n\n<p>This particular VM has 3.1GB of ram alloctable and is idling on about 83MB usage when this script is not running. If i drop the maxProcs down to 25, it will finish fine but this script can already take a long time given the sheer number of devices + latency so would rather keep the parallelism high!</p>\n\n<p>I have a feeling that the <code>$pl-&gt;share()</code> is sharing the ever-expanding <code>%snmp_results</code> with each forked process which is definitely not necessary since it's not reading/modifying other entries: just adding new entries. Is there a better way I can be doing this?</p>\n\n<p>I'm also slightly unsure about <code>my %cache = %{$result};</code>. If this is just creating a pointer as a hash then cool but if it's doing a copy, that's also a bit wasteful!</p>\n\n<p>Any help will be greatly appreciated!</p>\n"}, {"tags": ["perl", "concurrency", "parallel-processing", "fork"], "comments": [{"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 6, "creation_date": 1456876580, "post_id": 35735848, "comment_id": 59146265, "body": "As a general rule, it is reasonable to set the max number of processes to some small multiple of the total number of processors available (2x is a common choice).  But it really depends on your application, and you definitely need to test different settings to see what works best for you."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1456877140, "post_id": 35735848, "comment_id": 59146454, "body": "@WilliamPursell Well, the server in question has 1 physical processor and 30 virtual processors. I seem to be able to fork 30 processes with no trouble."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 1, "creation_date": 1456877320, "post_id": 35735848, "comment_id": 59146510, "body": "Make the statment &quot;I seem to be able to...&quot; more precise.  Identify key metrics that matter to you, then change the parameter and see how those metrics are impacted."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1456877551, "post_id": 35735848, "comment_id": 59146603, "body": "It just works with no obvious problems.  I haven&#39;t measured anything.  I wouldn&#39;t really know how to.  This is a server in a work environment which I don&#39;t have administrator/root privileges on.  The sample code for the perl module does 30 processes."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1456878113, "post_id": 35735848, "comment_id": 59146765, "body": "I like to set it to a number lesser than the number of available processors. That way I have a every chance that each thing runs in its own core, and I don&#39;t take the whole machine.  If your code is actually concurrent (and not purely parallel) then it may make more sense running multiple processes on one core.  Time the speedup with dfferent choices, that shouldn&#39;t be difficult."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1456878899, "post_id": 35735848, "comment_id": 59146991, "body": "The limit to how many you <i>can</i> fork is probably very high, so it will work without problems if you run 30 or 60.  The question is what is optimal, ie. how much you are gaining (if any!) as you keep increasing that.  First time your program with different choices, you don&#39;t need any privilages for that.  As you keep increasing the number you&#39;ll see that the speedup drops at some point, and then it drops sharply."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456879752, "post_id": 35735848, "comment_id": 59147216, "body": "@zdim I am using it download a large number of files in parallel. So if I fork 30 processes then the speed increase is 30 times."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 3, "creation_date": 1456880149, "post_id": 35735848, "comment_id": 59147325, "body": "Oh, with that it&#39;s a little different, that will be I/O bound.  Try to go further and time it.  The first concern is that you don&#39;t jam the system or annoy other people.  I would think that it is going to be more important how much you&#39;re pushing the I/O . I wouldn&#39;t go beyond the &quot;reasonable&quot; as <a href=\"http://stackoverflow.com/users/140750/william-pursell\">William Pursell</a> told you, but that&#39;s just me.  You do have a server you say but I&#39;d look into I/O loads and behavior.  Speficy your situation further (edit) and hopefully some more knowledgable people will pitch in."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1456880499, "post_id": 35735848, "comment_id": 59147426, "body": "Downloading files is I/O bound, not CPU bound, so you may not get much improvement by forking. Your biggest bottlenecks will be the network and file I/O, not CPU usage."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456880938, "post_id": 35735848, "comment_id": 59147556, "body": "@ThisSuitIsBlackNot If it takes 5 seconds to download each file then by forking 30 processes it will mean the first 30 downloads will take 5 seconds instead of 150 seconds."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1456881280, "post_id": 35735848, "comment_id": 59147659, "body": "@CJ7 &quot;Anything running in parallel will be quicker.&quot; Wrong. You can only download a fixed amount of data per second through a network interface, and you can only write a fixed amount of data to disk per second. It doesn&#39;t matter how many processes you fork or how many cores you use, you can only shove so much data through a network interface at a time. In fact, in some cases, forking actually decreases performance because it creates extra overhead."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456881349, "post_id": 35735848, "comment_id": 59147677, "body": "@ThisSuitIsBlackNot see my edited comment. Each download has to wait to finish.  By running them in parallel you are not waiting.  30 downloads can occur simultaneously.  My script is taking about 5 mins to run when it used to take over an hour."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456881635, "post_id": 35735848, "comment_id": 59147750, "body": "@ThisSuitIsBlackNot There is a bottleneck when an HTTP connection is made.  This has nothing to do with bandwidth.  These connections can occur in parallel."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1456881760, "post_id": 35735848, "comment_id": 59147786, "body": "@CJ7 30 downloads can occur simultaneously, but if you&#39;re constrained by network and/or disk I/O, each one will take longer to finish than if they were run serially. Forking does not magically increase your network bandwidth or disk speed. The only way to know if it improves performance for your particular system is to benchmark it."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456885461, "post_id": 35735848, "comment_id": 59148821, "body": "@ThisSuitIsBlackNot While I understand the point you are making, my own evidence is that a script is taking minutes instead of hours to run. That&#39;s what I am trying to explain.  I think it is because the HTTP connection operation is time consuming which is something quite apart from the downloading operation which I agree is just a function of bandwidth."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1456888417, "post_id": 35735848, "comment_id": 59149704, "body": "Oh, I just noticed that you did do a rough benchmark. Think about it this way: you multiplied your number of processes by 30, but you only multiplied your throughput by about 18 (if downloading 150 files total, you have 150 files/5 minutes = 30 files/minute compared to 150 files/&gt;1 hour, say 150 files/90 minutes = 1.67 files/minute). That&#39;s a good boost, but if you had a CPU-bound process, your performance multiplier would be a lot closer to 30. Anyway, you should test with different numbers of processes until you find the sweet spot for your application and system."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1456892306, "post_id": 35735848, "comment_id": 59150782, "body": "You are almost certainly going to depend on I/O capabilities of your server, and on typical loads (from other jobs) at the time at which you do this.  At some machines you&#39;ll see saturation at 4-5 simultaneous I/O bound processes, some can take far more. You can probably push the number of processes but at some point your I/O will start coughing.  Time it, step by step.  Also watch some measure of I/O loads. I wouldn&#39;t push it past 2-per-core anyway -- at some point you will just have too many processes, regardless of performance."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1456892894, "post_id": 35735848, "comment_id": 59150967, "body": "If you share the machine with others I&#39;d advise you to be careful.  Jamming I/O isn&#39;t funny.  People can&#39;t work anymore. I&#39;d do the following: Time in steps, from say 5 processes upward.  When you notice that the speed up drops, back up a bit.  If it drops at 15, work at 10 or 12.  Better go for 10 sec rather than 5 -- but not hurt others.  If this runs for a long time (or often) you&#39;d want to back up far more. This affects many other things."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1456946295, "post_id": 35735848, "comment_id": 59185637, "body": "Just realized a critical piece: Are you downloading files from a web server? If you hit a server with 50 requests a second they&#39;ll shut you down (blacklist the IP) very quickly, and that&#39;s that.  When you go to a server you <i>wait</i>, not fork.  More than say 2/s is not &quot;polite&quot; (an important word in that business), for all I know.  I normally <code>sleep</code> for a second, or more if my timing sees that the server is busy. If you go to a &#39;normal&#39; web server then that&#39;s your bottleneck."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1456956045, "post_id": 35735848, "comment_id": 59191370, "body": "@zadim Yes I am downloading files from a web server.  I am experiencing some failed downloads with the response described in this question: <a href=\"http://stackoverflow.com/questions/35714411/cant-download-file-using-user-agent\" title=\"cant download file using user agent\">stackoverflow.com/questions/35714411/&hellip;</a>"}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 1, "creation_date": 1472102840, "post_id": 35735848, "comment_id": 65619135, "body": "I&#39;m not sure why you&#39;ve placed a bounty. The <i>only</i> possible  useful answer to this question is that you must experiment to find what works best for <i>this particular</i> workload, and you&#39;ve already been told that. You also seem to be supremely confident in your assertions about the behavior of the system (&quot;If it takes 5 seconds to download... &quot;), which, again, makes it hard to understand what you&#39;re looking for that you don&#39;t already know or can&#39;t find out through experimentation. You also received quite a bit of interesting information in the comments, so...what more do you want?"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1472103476, "post_id": 35735848, "comment_id": 65619345, "body": "@KyleStrand I want to know how many processes should generally be run in parallel.  This might depend on factors such as number of CPUs (or cores), RAM etc."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1472104380, "post_id": 35735848, "comment_id": 65619656, "body": "@KyleStrand I want to know how many processes I can run without the server grinding to a halt or crashing."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 2, "creation_date": 1472105048, "post_id": 35735848, "comment_id": 65619931, "body": "@CJ7 Having taken a class on analyzing the effect of multiprocessing on different workloads, the main takeaway was &quot;it depends.&quot; Seriously. This is something you <i>must</i> simply benchmark for yourself. As for crashing the server, you should see massive slowdown with fewer processes than the number required to <i>crash</i> the server, so I wouldn&#39;t worry about that."}, {"owner": {"reputation": 555, "user_id": 5071598, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-32mDN1SXPKI/AAAAAAAAAAI/AAAAAAAAAAA/FQIq7RpsTQk/photo.jpg?sz=128", "display_name": "Gary Jackson", "link": "https://stackoverflow.com/users/5071598/gary-jackson"}, "edited": false, "score": 2, "creation_date": 1472263022, "post_id": 35735848, "comment_id": 65695534, "body": "To put a fine point on what KyleStrand is saying, your question is one that cannot be answered the way you stated it. zdim outlines the procedure for benchmarking your program, but there&#39;s a step you need to take before you even do that: you need to define what you mean by &quot;overload the system&quot;. Do you mean crash the system? Make it temporarily unresponsive? Saturate the network? After that, the benchmarking is up to you since it depends directly on the behavior of your program and your hardware."}], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 5, "last_activity_date": 1472588299, "creation_date": 1472588299, "answer_id": 39236396, "question_id": 35735848, "link": "https://stackoverflow.com/questions/35735848/how-many-parallel-processes/39236396#39236396", "title": "How many parallel processes?", "body": "<p>In downloading files, this really depends on</p>\n\n<ol>\n<li>how many different hosts you're downloading from, and</li>\n<li>how fast they will give you the requested files compared to your maximum bandwidth.</li>\n</ol>\n\n<p>If you're downloading files from a single machine to a single machine on a local network, 2-3 is about max.  If you're downloading files from 30 different servers on the internet, all of which are slow, but you have a fat pipe, then 30 might be reasonable.</p>\n\n<p>There is no one universal right answer here.  Unless you count \"it depends.\"</p>\n"}, {"comments": [{"owner": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 2, "creation_date": 1472633939, "post_id": 39241849, "comment_id": 65826218, "body": "Can you explain why?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 930, "user_id": 6594367, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/03c046cae270605c2376680482e52f6d?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6594367/john-doe"}, "edited": false, "score": 4, "creation_date": 1472644868, "post_id": 39241849, "comment_id": 65833846, "body": "@John Because grizzly bears."}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 0, "last_activity_date": 1472623433, "creation_date": 1472623433, "answer_id": 39241849, "question_id": 35735848, "link": "https://stackoverflow.com/questions/35735848/how-many-parallel-processes/39241849#39241849", "title": "How many parallel processes?", "body": "<p>You should set the maximum number of processes to 60.</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 4, "last_activity_date": 1472726446, "last_edit_date": 1472726446, "creation_date": 1472623493, "answer_id": 39241865, "question_id": 35735848, "link": "https://stackoverflow.com/questions/35735848/how-many-parallel-processes/39241865#39241865", "title": "How many parallel processes?", "body": "<p>The purpose of \"<em>downloading files</em>\" was mentioned, but in comments a while ago and I take the question as stated, to also be more general.</p>\n\n<hr>\n\n<p>The only relevant measure is when you start reaching saturation in performance gains, with particular software on that system. The formal limits are huge and meaningless while rules of thumb are very general.</p>\n\n<p>Let's imagine to run 10 processes and the time to complete the job drops 10 times. Increase to 20 processes and the time drops 20 times -- but for 30 processes the gain is the factor of 10. At this point we <em>have</em> loaded the system.  Push further and the performance will degrade rapidly, and for everyone.  At that point the server <em>is</em> overloaded, even though it allows, say, 1024 processes per user (and really ten or more times that for a server).</p>\n\n<p>With a few processes per core the machine is engaged and I'd say that that is a good rule of thumb. However, it is too general. I doubt that you'd gain much in performance by going to that many processes, given the many other factors that affect it.</p>\n\n<p><strong>Accessing one web server</strong> &nbsp; The server's capability is the gospel. They may have posted how many requests per seconds they are happy with. Or they may have a limit on number of processes per user, say 10 or 20. If that means that many simultaneous downloads then that's your limit. But I'd be careful -- if the site is close and fast a request may complete in as little as 0.1 or 0.2 seconds. Then, with 10 processes you may be hitting the server 100 times a second. I do not recommend that. If there is no information I'd say keep it to a few requests per second. The performance and server load also depend on the content -- big downloads are different from pulling many skinny web pages. The I/O on your side may matter but I'd expect the server to set the limit.  If you are going to use their service a lot why not send an email and ask what they are OK with.</p>\n\n<p><strong>I/O, network (many servers) or disk</strong> &nbsp;  With network the performance depends on every piece of hardware in the path as well as on software.  Nobody can tell without trying it out.  The disk I/O is very complex.  To add to trouble it is unclear whether it'd be your disks or network that is the bottleneck.  I'd expect clear performance gains up to a few tens of processes, and probably fewer.</p>\n\n<p><strong>CPU or memory bound</strong> &nbsp;  This may be easiest -- processing that can be broken up in parallel on 30 cores can enjoy close to a factor of 30 speedup (given no other bottlenecks).  Going beyond the number of cores clearly leads to reduced performance gain. Concurrent (but not parallel) processing is far more complicated. If your code is memory intensive that is yet completely different.</p>\n\n<p>Useful basic tools for assessing above components are <code>iostat -xzn</code>, <code>netstat -I</code>, and <code>vmstat</code>.  But there is a bit of a curve to learning how to interpret their output and hopefully it doesn't come to that.</p>\n\n<hr>\n\n<p>The conclusion is that you have to time it. Take your real application and time it running in one process. Do this 3 to 5 times and see the average (throw away obvious outliers). Then repeat with 5 processes, then with 10, etc.  I'd expect that the trend will start slowing down far sooner than the 30 processors you mention.  Once it gets to that the system is loaded and whoever works on it will notice. Very soon after that the performance will likely degrade rapidly. Proper benchmarking tools, like <a href=\"http://perldoc.perl.org/Benchmark.html\" rel=\"nofollow\"><code>Benchmark</code></a>, are far more sophisticated but this may well settle the issue.  If you see strange or inconsistent behavior you may have to dig into details, starting with tools mentioned above.  </p>\n\n<p>What \"<em>overloaded</em>\" means is a bit unclear.  I like to cap my use of resources well before other people are affected.  But it may be possible to push it, in particular if you can run when it's quiet.  I doubt that you'll keep having a worthy gain all the way to the number of available processors.</p>\n\n<p>So there is no concern about \"<em>overloading</em>\" the server if you first time things.  The performance limit will tell you when to stop. I'd say that your limit of 30 is very reasonable. Unless this is really about downloading files, in which case the web server is likely all that matters.</p>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1080, "favorite_count": 1, "answer_count": 3, "score": 9, "last_activity_date": 1472726446, "creation_date": 1456875801, "last_edit_date": 1472100768, "question_id": 35735848, "link": "https://stackoverflow.com/questions/35735848/how-many-parallel-processes", "title": "How many parallel processes?", "body": "<p>I am running some code in parallel by using a forking module in <code>perl</code> called <code>Parallel::ForkManager</code>. I have currently setting the maximum number of processes to <code>30</code>:</p>\n\n<pre><code>my $pm = Parallel::ForkManager-&gt;new(30);\n</code></pre>\n\n<p>What would be an advisable maximum number of processes to create?  I am doing this on a commercial grade Solaris server, but I still don't want to overload the system.</p>\n"}, {"tags": ["wordpress", "perl"], "answers": [{"tags": [], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "is_accepted": false, "score": 0, "last_activity_date": 1456874115, "creation_date": 1456874115, "answer_id": 35735530, "question_id": 35734833, "link": "https://stackoverflow.com/questions/35734833/possible-to-automate-posts-to-wordpress-containing-nonstandard-fields-created-by/35735530#35735530", "title": "Possible to automate posts to WordPress containing nonstandard fields created by a plugin?", "body": "<p>So using <code>WordPress::XMLRPC</code> I did something like this:</p>\n\n<pre><code>my $post = { \n  title =&gt; 'test',\n  mt_allow_comments =&gt; 0,\n  description =&gt; '&lt;p&gt;description here&lt;/p&gt;',\n  custom_fields =&gt; [{key =&gt; 'enclosure', value =&gt; 'http://example.com/files/156842076.mp3'}],\n};\n\n$site-&gt;newPost($post, 0);\n</code></pre>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456874115, "creation_date": 1456871074, "last_edit_date": 1456871950, "question_id": 35734833, "link": "https://stackoverflow.com/questions/35734833/possible-to-automate-posts-to-wordpress-containing-nonstandard-fields-created-by", "title": "Possible to automate posts to WordPress containing nonstandard fields created by a plugin?", "body": "<p>I'm using a Perl script to post to a WordPress site using <a href=\"http://metacpan.org/module/WWW::Mechanize\" rel=\"nofollow\"><code>WWW::Mechanize</code></a>. </p>\n\n<p>I'm thinking of making the script more robust by using an existing CPAN module like <a href=\"http://metacpan.org/module/WordPress::XMLRPC\" rel=\"nofollow\"><code>WordPress::XMLRPC</code></a> for posting content to the site.</p>\n\n<p>Before I dive in, I want to be sure I will be able to add data to fields on the post form that are not generated by WordPress but by a plugin. The plugin I'm using generates a text field on the post form which accepts the URL of an MP3 file. I want to be able to input data into this field using the API.</p>\n\n<p>If it's not possible, I'll just stick with <code>WWW::Mechanize</code>.</p>\n"}, {"tags": ["perl", "hash", "data-dumper"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1456869553, "post_id": 35734341, "comment_id": 59143203, "body": "<a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a> (the Perl data structures cookbook) might be helpful. It shows how to create and iterate through various data structures, like arrays of hashes."}], "answers": [{"comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1456869574, "post_id": 35734405, "comment_id": 59143223, "body": "<code>$out-&gt;{data}</code> is a list reference, not a hash reference."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1456869651, "post_id": 35734405, "comment_id": 59143269, "body": "Yeah, I missed that originally. Answer fixed.  Note the title is incorrect, which I will correct."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1456871027, "post_id": 35734405, "comment_id": 59143959, "body": "@mob: There&#39;s no such thing as a list reference. <code>$out-&gt;{data}</code> is an array reference"}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 0, "last_activity_date": 1456869605, "last_edit_date": 1456869605, "creation_date": 1456869514, "answer_id": 35734405, "question_id": 35734341, "link": "https://stackoverflow.com/questions/35734341/iterating-through-an-array-of-hashes/35734405#35734405", "title": "Iterating through an array of hashes", "body": "<p>Here's how to iterate over the array</p>\n\n<pre><code>for my $cur (@{$out-&gt;{data}})\n{\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1456870391, "last_edit_date": 1456870391, "creation_date": 1456870071, "answer_id": 35734568, "question_id": 35734341, "link": "https://stackoverflow.com/questions/35734341/iterating-through-an-array-of-hashes/35734568#35734568", "title": "Iterating through an array of hashes", "body": "<p>Your <code>$out</code> is a reference to a single-element hash which has an array reference for the value of its <code>data</code> element</p>\n\n<p>It's best to extract the reference into a separate variable so that you can access the contents more simply. Suppose you wrote</p>\n\n<pre><code>my $data = $out-&gt;{data};\n</code></pre>\n\n<p>Thereafter, the array is accessible as <code>@$data</code>, the number of elements it contains is <code>scalar @$data</code>, and the indices are <code>0 .. $#$data</code>. You can access each element of the array with <code>$data-&gt;[0]</code>, <code>$data-&gt;[1]</code> etc.</p>\n\n<p>Your code would become</p>\n\n<pre><code>my $out  = decode_json $client-&gt;responseContent;\nmy $data = $out-&gt;{data};\n\nfor my $i ( 0 .. $#$data ) {\n    my $item = $data-&gt;[$i];\n    my $b4 = $item-&gt;{b4};\n    print \"$b4\\n\";\n}\n</code></pre>\n\n<p>But note that, unless you need the array index for other purposes, you are probably better off iterating over the array elements themselves rather than its indices. This code would do the same thing</p>\n\n<pre><code>my $out  = decode_json $client-&gt;responseContent;\nmy $data = $out-&gt;{data};\n\nfor my $item ( @$data ) {\n    my $b4 = $item-&gt;{b4};\n    print \"$b4\\n\";\n}\n</code></pre>\n\n<p>Or even just</p>\n\n<pre><code>print \"$_-&gt;{b4}\\n\" for @$data;\n</code></pre>\n\n<p>if you don't need to do anything else within your loop</p>\n"}], "owner": {"reputation": 71, "user_id": 5999681, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fb80e00717636611840103533ae2ebb7?s=128&d=identicon&r=PG&f=1", "display_name": "lollan", "link": "https://stackoverflow.com/users/5999681/lollan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 35734568, "answer_count": 2, "score": 0, "last_activity_date": 1456870391, "creation_date": 1456869304, "last_edit_date": 1456869771, "question_id": 35734341, "link": "https://stackoverflow.com/questions/35734341/iterating-through-an-array-of-hashes", "title": "Iterating through an array of hashes", "body": "<p>I have wrote the below routine, to iterate through hashes 0 - 7 and print out the value of a specific key in each.  I need to grab the value of 'b4' in each hash.</p>\n\n<p>I would like to do away with the (0..7), with something smarter for when there are different numbers of hashes.  For instance, sometimes there is only 2 or there may be 160.</p>\n\n<pre><code>my $out = decode_json $client-&gt;responseContent();\n\n#print \"\\nOutput is :\\n\\n\" . Dumper $out;\nfor my $slice (0..7) {\n    my $out = $out-&gt;{data}[$slice]{b4};\n    print \" $out \\n\";\n}\n</code></pre>\n\n<p>The data is structured as such:</p>\n\n<pre><code>  DB&lt;1&gt; x $out\n0  HASH(0x125fb5e0)\n   'data' =&gt; ARRAY(0x1260d760)\n      0  HASH(0x121765d0)\n            'b1' =&gt; '21'\n            'b2' =&gt; '22'\n            'b3' =&gt; '23'\n            'b4' =&gt; '24'\n            'b5' =&gt; '25'\n            'b6' =&gt; '26'\n            'b7' =&gt; '27'\n      1  HASH(0x125fb650)\n            'b1' =&gt; '21'\n            'b2' =&gt; '22'\n            'b3' =&gt; '23'\n            'b4' =&gt; '24'\n            'b5' =&gt; '25'\n            'b6' =&gt; '26'\n            'b7' =&gt; '27'\n      2  HASH(0x1236b960)\n            'b1' =&gt; '21'\n            'b2' =&gt; '22'\n            'b3' =&gt; '23'\n            'b4' =&gt; '24'\n            'b5' =&gt; '25'\n            'b6' =&gt; '26'\n            'b7' =&gt; '27'\n      3  HASH(0x12177030)\n            'b1' =&gt; '21'\n            'b2' =&gt; '22'\n            'b3' =&gt; '23'\n            'b4' =&gt; '24'\n            'b5' =&gt; '25'\n            'b6' =&gt; '26'\n            'b7' =&gt; '27'\n      4  HASH(0x1260da00)\n            'b1' =&gt; '21'\n            'b2' =&gt; '22'\n            'b3' =&gt; '23'\n            'b4' =&gt; '24'\n            'b5' =&gt; '25'\n            'b6' =&gt; '26'\n            'b7' =&gt; '27'\n</code></pre>\n"}, {"tags": ["perl", "parsing", "latex"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "edited": false, "score": 0, "creation_date": 1457031635, "post_id": 35732426, "comment_id": 59232831, "body": "Thanks very much for your answer. I misunderstood the meaning of &quot;prefix&quot;, obviously. The piece of code you provided works for all LaTeX commands, not only \\footnote. But what I am interested in is extracting footnotes only... more precisely, what I ultimately want to do is remove any \\footnote nested in a \\footnote (please do not ask why I am facing such nesting, it is no worth explaining !). Any ideas ?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "edited": false, "score": 0, "creation_date": 1457046680, "post_id": 35732426, "comment_id": 59241177, "body": "@YvesdeSaint-Pern If you change the pattern to <code>&#39;.*\\\\\\footnote&#39;</code> you can extract the contents of the most nested footnote, including the curly braces. Is that what you want?"}, {"owner": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "edited": false, "score": 0, "creation_date": 1457111373, "post_id": 35732426, "comment_id": 59273427, "body": "I want to convert <code>\\footnote{abc \\footnote{...} def \\emph{!!!} ghi}</code>  into: <code>\\footnote{abc ... def \\emph{!!!} ghi}</code>"}, {"owner": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "edited": false, "score": 0, "creation_date": 1457201981, "post_id": 35732426, "comment_id": 59303454, "body": "Very interesting but unfortunately the content of the footnote (... in my example above) is removed with your suggestion. I would like to keep it (as plain text, not as a nested footnote)."}, {"owner": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "edited": false, "score": 0, "creation_date": 1457204973, "post_id": 35732426, "comment_id": 59304649, "body": "I further note that your suggestion does not handle correctly the following string <code>my $text = &#39;\\footnote{abc {...} def \\emph{!!!} ghi}&#39;;</code> sinces it matches its unique footnote although it is not a nested one..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "edited": false, "score": 0, "creation_date": 1457205602, "post_id": 35732426, "comment_id": 59304879, "body": "Ah, I misunderstood what you wanted, see update. Let me reiterate that Text::Balanced works for the limited input you&#39;ve given, but won&#39;t work as a general LaTeX parser; don&#39;t expect it to work for all inputs. You need a real parser for that."}, {"owner": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "edited": false, "score": 0, "creation_date": 1457210279, "post_id": 35732426, "comment_id": 59306605, "body": "Thanks very much for your help !"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 2, "last_activity_date": 1457205446, "last_edit_date": 1457205446, "creation_date": 1456862823, "answer_id": 35732426, "question_id": 35731060, "link": "https://stackoverflow.com/questions/35731060/why-doesnt-textbalancedextract-bracketed-extract-the-text-inside-a-latex-ta/35732426#35732426", "title": "Why doesn&#39;t Text::Balanced::extract_bracketed extract the text inside a LaTeX tag?", "body": "<p>Text::Balanced sets <code>$@</code> on failure so you can get <a href=\"https://metacpan.org/pod/Text::Balanced#DIAGNOSTICS\" rel=\"nofollow\">details about the cause</a>:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nuse Text::Balanced qw(extract_bracketed);\n\nmy $text = 'xxx \\footnote{...} yyy';\nmy ($substring, $remainder, $prefix) = extract_bracketed($text, '{}', '\\footnote');\n\nwarn $@ if $@;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Did not find prefix: /\\footnote/, detected at offset 0 at balanced line 12.\n</code></pre>\n\n<p>The prefix didn't match because:</p>\n\n<ul>\n<li><p>it has to match from the beginning of the string all the way to the first occurrence of the delimiter</p></li>\n<li><p><code>\\f</code> matches a form feed, not a literal backslash followed by the letter f</p></li>\n</ul>\n\n<p>The following prefix matches everything up to the first curly brace:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nuse Text::Balanced qw(extract_bracketed);\n\nmy $text = 'xxx \\footnote{...} yyy';\n\nmy ($substring, $remainder, $prefix) = extract_bracketed($text, '{}', '[^{}]*');\nsay \"&lt;$_&gt;\" for $prefix, $substring, $remainder;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;xxx \\footnote&gt;\n&lt;{...}&gt;\n&lt; yyy&gt;\n</code></pre>\n\n<p>To actually <em>remove</em> a nested footnote tag from the text, leaving its contents, you need to use <code>extract_tagged</code>:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse 5.010;\n\nuse Text::Balanced qw(extract_tagged);\n\nmy $text = '\\footnote{abc \\footnote{...} def \\emph{!!!} ghi}';\n\nmy @pieces = extract_tagged(\n    $text, \n    '\\\\\\footnote{', \n    '}', \n    '(?s).*\\\\\\footnote{.*(?=\\\\\\footnote{)'\n);\n\nmy ($remainder, $prefix, $contents) = @pieces[1, 2, 4];\n\nsay $prefix . $contents . $remainder;\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\\footnote{abc ... def \\emph{!!!} ghi}\n</code></pre>\n\n<hr>\n\n<p>Note that this approach works for the simple input you gave, but won't work as a general-purpose LaTeX parser. There are a couple of LaTeX parsers on CPAN, but <a href=\"https://metacpan.org/pod/LaTeX::TOM\" rel=\"nofollow\">LaTeX::TOM</a> looks fairly limited and <a href=\"https://metacpan.org/pod/LaTeX::Parser\" rel=\"nofollow\">LaTeX::Parser</a> hasn't been updated since 2000.</p>\n\n<p>If you need to do more complex parsing, you may need to write your own parser.</p>\n"}], "owner": {"reputation": 13, "user_id": 6004161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QNUy9gzUSDk/AAAAAAAAAAI/AAAAAAAABOs/03q0sm-n7XA/photo.jpg?sz=128", "display_name": "Yves de Saint-Pern", "link": "https://stackoverflow.com/users/6004161/yves-de-saint-pern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 35732426, "answer_count": 1, "score": 1, "last_activity_date": 1457205446, "creation_date": 1456858423, "last_edit_date": 1456863817, "question_id": 35731060, "link": "https://stackoverflow.com/questions/35731060/why-doesnt-textbalancedextract-bracketed-extract-the-text-inside-a-latex-ta", "title": "Why doesn&#39;t Text::Balanced::extract_bracketed extract the text inside a LaTeX tag?", "body": "<p>I am trying to parse balanced text (actually, text written in LaTeX) using <a href=\"https://metacpan.org/pod/Text::Balanced#extract_bracketed\" rel=\"nofollow\"><code>extract_bracketed</code></a> from Text::Balanced. However, I did not get a correct match with the following code:</p>\n\n<pre><code>use Text::Balanced qw(extract_bracketed);\n\nmy $data = 'xxx \\footnote{...} yyy';\n(my $ext, my $rem, my $pre) = extract_bracketed($data, '{}', '\\footnote');\nprint \"\\$ext = $ext\\n\";\nprint \"\\$rem = $rem\\n\";\nprint \"\\$pre = $pre\\n\";\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>$ext =                                                                                                                  \n$rem = xxx \\footnote{...} yyy                                                                                           \n$pre =\n</code></pre>\n\n<p>According to the <a href=\"https://metacpan.org/pod/Text::Balanced#extract_bracketed\" rel=\"nofollow\">documentation</a>, this output means that a failure occurred, but I do not understand why.</p>\n\n<p>What I actually want to extract is <code>...</code>, i.e. the contents of the <code>\\footnote</code> command.</p>\n\n<p>Why is this happening and how can I fix it?</p>\n"}, {"tags": ["perl", "bugzilla", "mod-perl"], "answers": [{"comments": [{"owner": {"reputation": 364, "user_id": 997244, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LTMsU.jpg?s=128&g=1", "display_name": "cjoy", "link": "https://stackoverflow.com/users/997244/cjoy"}, "edited": false, "score": 0, "creation_date": 1456860651, "post_id": 35731439, "comment_id": 59138158, "body": "thank you, I&#39;ve checked the execution order and my logs tell me you are right."}, {"owner": {"reputation": 364, "user_id": 997244, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LTMsU.jpg?s=128&g=1", "display_name": "cjoy", "link": "https://stackoverflow.com/users/997244/cjoy"}, "edited": false, "score": 0, "creation_date": 1456861303, "post_id": 35731439, "comment_id": 59138546, "body": "one thing I fail to understand though: how can <code>if ($extension-&gt;can($name))</code> evaluate to true, if the code is not loaded?"}, {"owner": {"reputation": 364, "user_id": 997244, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LTMsU.jpg?s=128&g=1", "display_name": "cjoy", "link": "https://stackoverflow.com/users/997244/cjoy"}, "edited": false, "score": 0, "creation_date": 1458743149, "post_id": 35731439, "comment_id": 59996797, "body": "turns out the issue was much simpler: mod_perl sets a different cwd compared to using cgi. Combine this with relative paths and you have the problem"}], "tags": [], "owner": {"reputation": 19, "user_id": 6004285, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aAA4HHcKz7Q/AAAAAAAAAAI/AAAAAAAAIic/AOkFIkQCIuU/photo.jpg?sz=128", "display_name": "Dylan Hardison", "link": "https://stackoverflow.com/users/6004285/dylan-hardison"}, "is_accepted": false, "score": 1, "last_activity_date": 1456861744, "last_edit_date": 1456861744, "creation_date": 1456859613, "answer_id": 35731439, "question_id": 35730721, "link": "https://stackoverflow.com/questions/35730721/custom-bugzilla-hook-not-invoked-when-using-mod-perl/35731439#35731439", "title": "Custom Bugzilla hook not invoked when using mod_perl", "body": "<p>I'm guessing that <code>_template_base_directories()</code> is called before <code>extensions</code> are <code>loaded</code> under <code>mod_perl</code>. If that's the case, it's a bug and should be fixed.</p>\n"}, {"tags": [], "owner": {"reputation": 364, "user_id": 997244, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LTMsU.jpg?s=128&g=1", "display_name": "cjoy", "link": "https://stackoverflow.com/users/997244/cjoy"}, "is_accepted": true, "score": 0, "last_activity_date": 1458744163, "creation_date": 1458744163, "answer_id": 36181258, "question_id": 35730721, "link": "https://stackoverflow.com/questions/35730721/custom-bugzilla-hook-not-invoked-when-using-mod-perl/36181258#36181258", "title": "Custom Bugzilla hook not invoked when using mod_perl", "body": "<p>While the <code>cwd</code> is usually the Bugzilla root when using <code>cgi</code>, it can be anything when using <code>mod_perl</code> (e.g. the apache home).</p>\n\n<p>When using file paths in Bugzilla extensions, always <strong>prefix relative paths</strong>:</p>\n\n<pre><code>use File::Basename qw(dirname);\nour $BASEDIR = dirname(__FILE__);\n\nsub template_dirs_alter {\n    my ($self, $args) = @_;\n    my ($template_dirs) = @$args{qw(template_dirs)};\n\n    if($something) {\n        push(@$template_dirs, $BASEDIR . \"some/dir/path\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 364, "user_id": 997244, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/LTMsU.jpg?s=128&g=1", "display_name": "cjoy", "link": "https://stackoverflow.com/users/997244/cjoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 36181258, "answer_count": 2, "score": 0, "last_activity_date": 1458744163, "creation_date": 1456857311, "last_edit_date": 1456859703, "question_id": 35730721, "link": "https://stackoverflow.com/questions/35730721/custom-bugzilla-hook-not-invoked-when-using-mod-perl", "title": "Custom Bugzilla hook not invoked when using mod_perl", "body": "<p>I have added a custom hook to <code>Bugzilla/Install/Util.pm</code>:</p>\n\n<pre><code># Used by template_include_path.\nsub _template_base_directories {\n    # ...\n    Bugzilla::Hook::process('template_dirs_alter', { template_dirs =&gt; \\@template_dirs });\n    # ...\n    return \\@template_dirs;\n}\n</code></pre>\n\n<p>When executed via cgi, everything works fine, but using <code>mod_perl</code> I can see using <code>warn()</code> statements that the process statement above is executed for the custom hook, but the actual hook implementation is never invoked.</p>\n\n<p>In <code>Bugzilla/Hook.pm</code>:</p>\n\n<pre><code>sub process {\n    my ($name, $args) = @_;\n    # ...\n\n    foreach my $extension (@{ Bugzilla-&gt;extensions }) {\n        if ($extension-&gt;can($name)) {\n            # log shows the expected hook name and extension\n            # so the hook implementation is found\n            $extension-&gt;$name($args); # should invoke hook implementation, but doesn't\n        }\n    }\n    # ...\n}\n</code></pre>\n\n<p>The hook is implemented in an Extension.pm like so:</p>\n\n<pre><code>sub template_dirs_alter {\n    my ($self, $args) = @_;\n    my ($template_dirs) = @$args{qw(template_dirs)};\n\n    if($something) {\n        push(@$template_dirs, \"some/dir/path\");\n    }\n}\n</code></pre>\n\n<p>Any obvious gotchas with mod_perl and/or the Bugzilla hook/extension system I am missing here?</p>\n"}, {"tags": ["arrays", "database", "perl", "hash"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1456854416, "post_id": 35729717, "comment_id": 59134460, "body": "Replace <code>.=</code> with <code>push</code>. BTW, neither <code>.=</code>, nor <code>push</code> needs else branch for previously non-existing value. It will do right thing by itself. Use <code>MLDBM</code> module to allow multilevel structures."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1456854701, "post_id": 35729717, "comment_id": 59134647, "body": "@OlegV.Volkov So, remove if-else, and simply use <code>push($HASH{$compcat}, $bf)</code>? And I can then access that array as I proposed at the end?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1456854732, "post_id": 35729717, "comment_id": 59134672, "body": "Berkeley databases can only store strings; they can&#39;t store arbitrary Perl data structures. The typical solution is to use <a href=\"https://metacpan.org/pod/distribution/DBM-Deep/lib/DBM/Deep.pod\" rel=\"nofollow noreferrer\">DBM::Deep</a>; if you really can&#39;t use that, then you&#39;ll have to serialize your values by hand before storing them."}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1456854911, "post_id": 35729717, "comment_id": 59134782, "body": "Rather <code>push(@{$HASH{$compcat}}, $bf)</code>. Newer Perl can handle your syntax, but better not count on it. <code>MLDBM</code> will handle transparent serializing/deserealizing, but be sure to check its docs for some peculiarities with tied interface. And also while it is simple, I&#39;m not sure this is most fastest/efficient way. You could roll somewhat more complex solution with better serializing yourself if you agree to abandon &quot;should just work like plain hash&quot; requirement."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1456858089, "post_id": 35729717, "comment_id": 59136597, "body": "@OlegV.Volkov Hm, you have my attention. If you want you can post an answer without that restriction, but please provide an example how to store and access the database. Als note I removed the restriction concerning modules."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456858322, "post_id": 35729717, "comment_id": 59136724, "body": "@ThisSuitIsBlackNot Thank you for the confirmation. It seems that additional modules would greatly simplify things, so I edited my post."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1456868490, "post_id": 35729717, "comment_id": 59142590, "body": "I think your starting point of using a <code>DB_File</code> tied hash is the wrong one. On the face of it a simple <code>Data::Dumper</code> string would be better choice than a tied hash. What are your requirements for multiple access? Do you need many scripts to be able to access this data <i>simultaneously</i> or do you simply need to store the information to disk for later retrieval? From what I&#39;ve read I think a simple two-table SQLite database, which can be memory-resident if you wish, would be the best solution. But you&#39;ve talked far more about your preconceptions than any requirements that you may have"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456911505, "post_id": 35729717, "comment_id": 59160237, "body": "It seems that in editing, some finer details went missing which may have caused down-voting and the vote to close @Borodin After the edit it wasn&#39;t clear any more what my current output was, and what I wanted to achieve. I have reinstated that information. I hope then that downvoters will reconsider. I always try to make my posts as clear as possible."}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456917458, "post_id": 35729717, "comment_id": 59164650, "body": "@Borodin I read through the documentation of <code>Data::Dumper</code> and it isn&#39;t clear to me how to use this. Feel free, however to provide an answer that involves this module. If you do not have the time, I understand."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456927800, "post_id": 35729717, "comment_id": 59172198, "body": "@BramVanroy: I am, sorry that I misrepresented you. I moved your example of an array to a line of its own, but couldn&#39;t make head or tail of what you had written yourself so made my best guess. I also thought an example for <i>&quot;string of tab-separated values&quot;</i> was unnecessary as the phrase is self-explanatory, but I agree that it is nicer to have the same data represented in the two alternative ways."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456928013, "post_id": 35729717, "comment_id": 59172373, "body": "@BramVanroy: It sounds like all you&#39;re asking for is a way to <i>serialise</i> your data so that it can be stored and recovered by several different programs. I don&#39;t think you&#39;re expecting to give multiple programs simultaneous access, is that right? I suggest you take a look at this <a href=\"http://blogs.perl.org/users/steven_haryanto/2010/09/comparison-of-perl-serialization-modules.html\" rel=\"nofollow noreferrer\"><b>Comparison of Perl serialization modules</b></a> and perhaps anything similar that you might find with Google. Note that the article is wrong that <code>eval</code> is necessary to read the dumped data. A simple <code>do</code> will work fine."}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1456854903, "post_id": 35729908, "comment_id": 59134776, "body": "This won&#39;t work for the OP&#39;s use case because Berkeley databases can only store strings; they can&#39;t store Perl data structures. There are modules like MLDBM and DBM::Deep to get around that, but the OP supposedly only has access to DB_File."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456855061, "post_id": 35729908, "comment_id": 59134867, "body": "@ThisSuitIsBlackNot Perhaps, but wouldn&#39;t that be a separate issue? This question specifically asks how to create a hash of arrays."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456855147, "post_id": 35729908, "comment_id": 59134909, "body": "The OP said &quot;I want to create a hash of arrays, with a focus on efficient processing and access, <i>that can be saved on disk with DB_File.</i>&quot; I don&#39;t think this answer addresses that."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456855721, "post_id": 35729908, "comment_id": 59135270, "body": "@ThisSuitIsBlackNot Then the question is fundamentally flawed. &quot;I have an apple that I want to turn into apple pie. The only requirement is that I don&#39;t have and can&#39;t get any flour, sugar, butter, or salt. How can I make an apple pie using only apples?&quot;"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1456855765, "post_id": 35729908, "comment_id": 59135298, "body": "@Matt Jacob, You can explain that&#39;s it&#39;s not possible, and suggest an alternative, such as <code>$_ = join(&quot;;&quot;, @$_) for values %data;</code>"}, {"owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1456858436, "post_id": 35729908, "comment_id": 59136790, "body": "I edited my question and removed the restriction on modules. I wasn&#39;t aware that it was completely impossible, I just thought it was hard to do. Do note however that the focus is on efficiency.  So any other solution is welcome as well."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "edited": false, "score": 0, "creation_date": 1456858912, "post_id": 35729908, "comment_id": 59137086, "body": "@BramVanroy Then you would just use <a href=\"https://metacpan.org/pod/MLDBM\" rel=\"nofollow noreferrer\">MLDBM</a> as mentioned in the documentation for DB_File."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 0, "last_activity_date": 1456856001, "last_edit_date": 1456856001, "creation_date": 1456854753, "answer_id": 35729908, "question_id": 35729717, "link": "https://stackoverflow.com/questions/35729717/hash-from-to-string-to-array-and-save-to-disk-with-db-file-module/35729908#35729908", "title": "Hash from to string to array, and save to disk with DB_File module", "body": "<p>Just <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow\"><code>push</code></a> onto an array reference, and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">autovivificaiton</a> will take care of the rest. <a href=\"https://metacpan.org/pod/DB_File#How-do-I-store-complex-data-structures-with-DB_File\" rel=\"nofollow\">You can't store complex data structures with DB_File</a>, and since you can't use any other modules for whatever reason, you'll need to create simple string values using the separator of your choice (<code>,</code> in this example).</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dump;\n\nmy %data;\n\nwhile (&lt;DATA&gt;) {\n    my @fields = split;\n    my $key = join('', @fields[0, 1]);\n    push(@{$data{$key}}, $fields[2]);\n}\n\nfor my $value (values(%data)) {\n    $value = join(',', @$value);\n}\n\ndd(\\%data);\n\n__DATA__\nWRPPI   smain   hd%ww_mod%oti_obj2%vnw_vc%cp\nWRUEA   smain   hd%_mod%_mod%pp_mod%pp_predc%ppart_su%\nWSUEA   smain   hd%ww_mod%advp_obj2%vg\nWRPPI   smain   hd%ww_mod%bw_mod%np_mod%pp_mod%pp_predm%cp_su%np\nWRPPI   ssub    hd%vnw_predc%vz_su%ww\nWSUEA   smain   hd%ww_svp%vnw_vc%svan\nWSUEA   smain   ld%pp_mod%bw_mod%bw_mod%pp_mod%ww_su%spec\nWSUEA   ppart   mod%bw_mod%n_mod%np_obj2%np_su%\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{\n  WRPPIsmain =&gt; \"hd%ww_mod%oti_obj2%vnw_vc%cp,hd%ww_mod%bw_mod%np_mod%pp_mod%pp_predm%cp_su%np\",\n  WRPPIssub  =&gt; \"hd%vnw_predc%vz_su%ww\",\n  WRUEAsmain =&gt; \"hd%_mod%_mod%pp_mod%pp_predc%ppart_su%\",\n  WSUEAppart =&gt; \"mod%bw_mod%n_mod%np_obj2%np_su%\",\n  WSUEAsmain =&gt; \"hd%ww_mod%advp_obj2%vg,hd%ww_svp%vnw_vc%svan,ld%pp_mod%bw_mod%bw_mod%pp_mod%ww_su%spec\",\n}\n</code></pre>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 35729908, "answer_count": 1, "score": -1, "last_activity_date": 1456928223, "creation_date": 1456854120, "last_edit_date": 1456928223, "question_id": 35729717, "link": "https://stackoverflow.com/questions/35729717/hash-from-to-string-to-array-and-save-to-disk-with-db-file-module", "title": "Hash from to string to array, and save to disk with DB_File module", "body": "<p>I have four tab-separated files with millions of lines that look like this</p>\n\n<pre><code>WRPPI   smain   hd%ww_mod%oti_obj2%vnw_vc%cp\nWRUEA   smain   hd%_mod%_mod%pp_mod%pp_predc%ppart_su%\nWSUEA   smain   hd%ww_mod%advp_obj2%vg\nWRPPI   smain   hd%ww_mod%bw_mod%np_mod%pp_mod%pp_predm%cp_su%np\nWRPPI   ssub    hd%vnw_predc%vz_su%ww\nWSUEA   smain   hd%ww_svp%vnw_vc%svan\nWSUEA   smain   ld%pp_mod%bw_mod%bw_mod%pp_mod%ww_su%spec\nWSUEA   ppart   mod%bw_mod%n_mod%np_obj2%np_su%\n</code></pre>\n\n<p>I want to create a hash of arrays, with a focus on efficient processing and access, that can be saved on disk with the <a href=\"http://metacpan.org/module/DB_File\" rel=\"nofollow\"><code>DB_File</code></a> module.</p>\n\n<p>I do not have access to other modules\u2014only to <code>DB_File</code> and the default Perl v5.10 modules.</p>\n\n<p><strong>Edit</strong>: <em>it seems that the best approaches require additional modules, so I guess I can allow it. I will have to contact our IT guy. So other modules are allowed but please keep it to a minimum.</em></p>\n\n<p>The hash keys would be a concatenation of the first two columns, and the corresponding values would be an array of values from the third column. For instance</p>\n\n<pre><code>'WRPPIsmain' =&gt; [\n    'hd%ww_mod%oti_obj2%vnw_vc%cp',\n    'hd%ww_mod%bw_mod%np_mod%pp_mod%pp_predm%cp_su%np'\n]\n</code></pre>\n\n<p>What I have so far creates a hash with the concatenation as a keys as I want, but a string of tab-separated values for values. But I can imagine that when accessing the hash, this is not efficient at all, especially when that string can be very long when a lot of values are concatenated.</p>\n\n<p>So instead of the expected output above, I have a tab-separated string.</p>\n\n<pre><code>'WRPPIsmain' =&gt; 'hd%ww_mod%oti_obj2%vnw_vc%cp    hd%ww_mod%bw_mod%np_mod%pp_mod%pp_predm%cp_su%np'\n</code></pre>\n\n<p>This is my code so far</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse DB_File;\n\n# Convert files in directory to DBM file so it\n# can be used as a hash.\n# COMPONENT.CAT =&gt; bfpattern1   bfpattern2  ...\n\n# arg1: directory where overview files are stored\n\n# perl basexcontent2db.pl contents;\n\ntie my %HASH, \"DB_File\", '/some/path/content.db',\n    or die \"Cannot open DB_File: $!\";\n\nmy $path = shift(@ARGV);    # e.g. some/path/\nopendir( DIR, $path );\n\nwhile ( defined( my $file = readdir(DIR) ) ) {\n\n    next if $file =~ /^\\.\\.?$/;\n\n    print STDERR \"\\nProcessing $file\\n\";\n    open( FILE, \"$path/$file\" ) or die \"Cannot open file $path/$file\";\n\n    my $linenr = 0;\n\n    while (&lt;FILE&gt;) {\n        $linenr++;\n        print STDERR \"$linenr\\r\";\n        chomp;\n\n        my ( $comp, $cat, $bf ) = split(/\\t/);\n        my $compcat = $comp . $cat;\n\n        if ( $HASH{$compcat} ) {\n            $HASH{$compcat} .= \"\\t$bf\";\n        }\n        else {\n            $HASH{$compcat} = $bf;\n        }\n    }\n\n    close(FILE);\n}\n\nclosedir(DIR);\n\nuntie %HASH;\n</code></pre>\n\n<p>How can I convert this to a hash from string to array without losing the ability to save this to disk as a hash which in turn is accessible for another script?</p>\n\n<p>Please also provide an example of how I would then access all keys for a value.</p>\n\n<p>Preferably I want some easy access such as </p>\n\n<pre><code>tie my %BFHASH, \"DB_File\", '/some/path/scripts/content.db'\n    or die \"Cannot open database file: $!\\n\";\n\nmy @dbases = $BFHASH{'WRPPIsmain'};\n</code></pre>\n\n<p>Requirements: the processing of the data <em>to</em> a hash database (or other) is not important, but the access and information retrieval should be very fast. The database can be accessed multiple times at the same time, but this will not occur too often. Also, once created, the database will never change. SQL is an option, especially if it's performance-wise the best option, but I am not experienced in this field. If your answer includes SQL, please provide details on how to access that database from a Perl script.</p>\n\n<p><strong>Note</strong>: it seems that in editing by @Borodin, some finer details went missing which may have caused down-voting and the vote to close. After the edit it wasn't clear any more what my current output was, and what I wanted to achieve. I have reinstated that information. I hope then that down-voters will reconsider. I always try to make my posts as clear as possible and put a lot of time in them.</p>\n"}, {"tags": ["perl", "hash"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1456850948, "post_id": 35728566, "comment_id": 59132225, "body": "That&#39;s not valid Perl. Please fix!"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 3, "last_activity_date": 1456851054, "creation_date": 1456851054, "answer_id": 35728683, "question_id": 35728566, "link": "https://stackoverflow.com/questions/35728566/access-first-part-of-hash-value/35728683#35728683", "title": "Access first part of hash value?", "body": "<p>What you have written isn't valid Perl. Your hash presumably looks like this</p>\n\n<pre><code>my %parameters = (\n    RamSize  =&gt; \"1000\",\n    PageSize =&gt; \"200, 200\",\n    SysClock =&gt; \"1\",\n);\n</code></pre>\n\n<p>The element <code>$parameters{PageSize}</code> is a simple string, and you have to process it explicitly to extract substrings from it.</p>\n\n<p>It's unclear what you might need in the general case, but if you simply want all integer values that appear in the string then a global regex match will do that for you. Like this</p>\n\n<pre><code>my ($ps1, $ps2) = $parameters{PageSize} =~ /\\d+/g;\n\nsay $ps1;\nsay $ps2;\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>200\n200\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1456851197, "creation_date": 1456851197, "answer_id": 35728740, "question_id": 35728566, "link": "https://stackoverflow.com/questions/35728566/access-first-part-of-hash-value/35728740#35728740", "title": "Access first part of hash value?", "body": "<p>What you posted doesn't make sense. I'm assuming you actually have the following:</p>\n\n<pre><code>my %parameters = (\n    RamSize  =&gt; \"1000\",\n    PageSize =&gt; \"200, 200\",\n    SysClock =&gt; \"1\",\n);\n</code></pre>\n\n<p>If so, you can use the following:</p>\n\n<pre><code>my ($x, $y) = split /\\s*,\\s*/, $parameters{PageSize};\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 4214304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7f3428e7f4045ccf9400def1f74875e5?s=128&d=identicon&r=PG&f=1", "display_name": "SilentUK", "link": "https://stackoverflow.com/users/4214304/silentuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1457115734, "accepted_answer_id": 35728683, "answer_count": 2, "score": -5, "last_activity_date": 1456851197, "creation_date": 1456850734, "last_edit_date": 1456851057, "question_id": 35728566, "link": "https://stackoverflow.com/questions/35728566/access-first-part-of-hash-value", "closed_reason": "Not suitable for this site", "title": "Access first part of hash value?", "body": "<p>I have a hash that looks like the following:</p>\n\n<pre><code>my %parameters= (\nRamSize =&gt; \"1000\"\nPageSize =&gt; \"200, 200\"\nSysClock =&gt; \"1\"\n);\n</code></pre>\n\n<p>I need to access PageSize id of this hash but I need to access this as 200 and 200 separately rather than \"200, 200\".  I cannot change how this is input so what is the easiest way to access it as 200?</p>\n"}, {"tags": ["regex", "perl", "awk", "sed", "gawk"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 6, "creation_date": 1456849812, "post_id": 35728121, "comment_id": 59131334, "body": "You should choose which output you want ..."}], "answers": [{"tags": [], "owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "is_accepted": true, "score": 2, "last_activity_date": 1456850065, "creation_date": 1456850065, "answer_id": 35728335, "question_id": 35728121, "link": "https://stackoverflow.com/questions/35728121/how-to-edit-following-line-in-sed-awk-or-anything-else/35728335#35728335", "title": "how to edit following line in sed, awk or anything else", "body": "<pre><code>$ awk -F'[{,}]' '{print $1, $4, $NF}' file\n2016-03-01 06:08:26      \"msid\":\"199033\"   batch is running \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "is_accepted": false, "score": 3, "last_activity_date": 1456874432, "creation_date": 1456874432, "answer_id": 35735593, "question_id": 35728121, "link": "https://stackoverflow.com/questions/35728121/how-to-edit-following-line-in-sed-awk-or-anything-else/35735593#35735593", "title": "how to edit following line in sed, awk or anything else", "body": "<p>The safest way would be to parse the json string with a json parser, like <a href=\"https://metacpan.org/pod/JSON\" rel=\"nofollow\"><code>JSON</code></a>:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse JSON;\n\nmy $str = '2016-03-01 06:08:26     {\"id\":\"778640\",\"cuid\":\"1\",\"msid\":\"199033\",\"lid\":\"582\",\"Started\":\"1\",\"qid\":\"9401\"}  batch is running';\nmy ($date, $time, $json, $msg) = split ' ', $str, 4;\nmy $hash = decode_json($json);\nprint join \" \", $date, $time, \"msid=\" . $hash-&gt;{msid}, $msg;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2016-03-01 06:08:26 msid=199033 batch is running\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6003534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a8096cd372f1ab2067dae209d5a29aa?s=128&d=identicon&r=PG&f=1", "display_name": "solaris", "link": "https://stackoverflow.com/users/6003534/solaris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 35728335, "answer_count": 2, "score": -2, "last_activity_date": 1456874432, "creation_date": 1456849496, "last_edit_date": 1456849784, "question_id": 35728121, "link": "https://stackoverflow.com/questions/35728121/how-to-edit-following-line-in-sed-awk-or-anything-else", "title": "how to edit following line in sed, awk or anything else", "body": "<p><strong>how to edit following line in sed, awk or anything else:</strong></p>\n\n<pre><code>root@laptop002:/tmp# cat /tmp/log\n2016-03-01 06:08:26     {\"id\":\"778640\",\"cuid\":\"1\",\"msid\":\"199033\",\"lid\":\"582\",\"Started\":\"1\",\"qid\":\"9401\"}  batch is running \n</code></pre>\n\n<p><strong>to make it look like following:</strong></p>\n\n<pre><code>2016-03-01 06:08:26     \"msid\":\"199033\"  batch is running \n</code></pre>\n\n<p>or </p>\n\n<pre><code>2016-03-01 06:08:26     msid is 199033  batch is running \n</code></pre>\n\n<p>or</p>\n\n<pre><code>2016-03-01 06:08:26     msid=199033  batch is running \n</code></pre>\n"}, {"tags": ["perl", "csv"], "comments": [{"owner": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1456846928, "post_id": 35726973, "comment_id": 59129121, "body": "only the first 7 columns of csv"}, {"owner": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1456847240, "post_id": 35726973, "comment_id": 59129369, "body": "yes, can you help me?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456849113, "post_id": 35726973, "comment_id": 59130823, "body": "Is there anything wrong with <code>print &quot;Hour;peco1In;peco1Out;peco1WorkTime;peco2In;peco2Out;peco2W&zwnj;&#8203;orkTime\\n&quot;</code>?"}, {"owner": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "edited": false, "score": 0, "creation_date": 1456849729, "post_id": 35726973, "comment_id": 59131270, "body": "because is to run with other files with other values"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456850638, "post_id": 35726973, "comment_id": 59131991, "body": "It&#39;s very disappointing that the only effort you seem to have made is to find a Perl one-liner that does something comparable to your own needs, and copy it into a Stack Overflow question. Don&#39;t you think you could have done something more than rely on the internet for a solution?"}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456850522, "post_id": 35728367, "comment_id": 59131894, "body": "It is best to declare all of your variables as <i>late</i> as possible, rather than writing a block of declarations at the top of your code, like old-fashioned C. It&#39;s also best to avoid Python-style identifers, so a name like <code>$newHead</code> should look like <code>$new_head</code>. The declaration of both <code>@head</code> and <code>$new_head</code> should be <i>inside</i> the first <code>if</code> block. Also, the test should probably be <code>if ( $. == 1 )</code> rather than checking the contents of the line"}], "tags": [], "owner": {"reputation": 1058, "user_id": 3241027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8874c36ce5ee1710dcfc8bc9c9439a9?s=128&d=identicon&r=PG&f=1", "display_name": "Seekheart", "link": "https://stackoverflow.com/users/3241027/seekheart"}, "is_accepted": false, "score": 0, "last_activity_date": 1456850149, "creation_date": 1456850149, "answer_id": 35728367, "question_id": 35726973, "link": "https://stackoverflow.com/questions/35726973/how-i-export-some-columns-from-file-csv-in-perl/35728367#35728367", "title": "How i export some columns from file .csv in Perl?", "body": "<p>since you only want to trim the header line then that isn't too bad.</p>\n\n<pre><code>my $infile = 'peco1.csv';\n\nopen(my $fh, \"&lt;\", $infile) or die \"Can't open file!\";\nmy @head = ();\nmy $newHead = '';\nwhile (&lt;$fh&gt;){\n     chomp;\n     if ($_ =~ m/'Hour'/){\n          @head = split(';' , $_);\n          @head = splice(@head, 0, 7);\n          $newHead = join(';', @head);\n          print(\"newHead\\n\");\n     }\n     else{\n          print(\"$_\\n\");\n     }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "edited": false, "score": 0, "creation_date": 1456866994, "post_id": 35728426, "comment_id": 59141770, "body": "I don&#39;t understand your question. Text files generally end at the end, and you shouldn&#39;t have to worry yourself about placing and end of file. Please explain what you mean by <i>&quot;this works good but not stop&quot;</i>. What result are you getting that you don&#39;t want?"}, {"owner": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "edited": false, "score": 0, "creation_date": 1457091683, "post_id": 35728426, "comment_id": 59259988, "body": "when i run this in windows cmd don&#180;t stop... i need press ctrl+C to stop"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "edited": false, "score": 0, "creation_date": 1457102172, "post_id": 35728426, "comment_id": 59266898, "body": "Have you run the program according to the command line I showed at the top? Is <code>peco1.csv</code> an ordinary static file, or are you using a pipe? If I use the data that you showed in your question then my solution runs and produces the output I have shown. You need to tell me what may be different about your situation that causes it to run endlessly, otherwise I can&#39;t help"}, {"owner": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "edited": false, "score": 0, "creation_date": 1457103763, "post_id": 35728426, "comment_id": 59268061, "body": "the result file is ok and all off the data is good but don&#39;t stop... i don&#39;t know why..."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1467624595, "last_edit_date": 1467624595, "creation_date": 1456850329, "answer_id": 35728426, "question_id": 35726973, "link": "https://stackoverflow.com/questions/35726973/how-i-export-some-columns-from-file-csv-in-perl/35728426#35728426", "title": "How i export some columns from file .csv in Perl?", "body": "<p>I think what you have done is to find an example of something similar and applied it to your own data without changing it. It's clear that your one-liner copies the first, third, and fourth columns from the input file, which is nothing to do with your own requirement. It also uses all the default options for <code>Text::CSV_XS</code>, which include using a comma <code>,</code> for the separator character. You are using semicolons <code>;</code> so it is highly unlikely to work as it stands</p>\n\n<p>This program seems to do what you require. If you save it as, say, <code>7col_csv.pl</code> then you can run it as</p>\n\n<pre><code>perl 7col_csv.pl peco1.csv &gt; new.csv\n</code></pre>\n\n<p><br/></p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Text::CSV;\n\nmy $csv = Text::CSV-&gt;new({\n    binary   =&gt; 1,\n    sep_char =&gt; ';',\n    eol      =&gt; $/,\n});\n\nwhile ( my $row = $csv-&gt;getline(\\*ARGV)) {\n    $csv-&gt;print( \\*STDOUT, [ @$row[0 .. 6] ] );\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Hour;peco1In;peco1Out;peco1WorkTime;peco2In;peco2Out;peco2WorkTime\n10;26;31;100;26;19;100\n11;30;43;100;48;27;100\n12;26;35;100;36;27;100\n13;26;41;100;41;25;100\n14;32;43;100;57;32;100\n15;23;44;100;77;60;100\n16;44;48;100;59;42;100\n17;60;67;100;52;49;100\n18;35;56;100;48;39;100\n19;39;48;100;58;37;100\n20;18;29;100;28;30;100\n21;24;26;100;16;14;100\n22;18;13;100;10;3;100\n23;0;0;0;0;0;0\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 3332475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100000432266701/picture?type=large", "display_name": "user3332475", "link": "https://stackoverflow.com/users/3332475/user3332475"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 35728426, "answer_count": 2, "score": 0, "last_activity_date": 1467624595, "creation_date": 1456846436, "last_edit_date": 1592644375, "question_id": 35726973, "link": "https://stackoverflow.com/questions/35726973/how-i-export-some-columns-from-file-csv-in-perl", "title": "How i export some columns from file .csv in Perl?", "body": "<p>I have this CSV file with name <code>peco1.csv</code> and I need to use Perl to separate only the first seven columns for another CSV file</p>\n<h3>peco1.csv</h3>\n<pre class=\"lang-none prettyprint-override\"><code>Hour;peco1In;peco1Out;peco1WorkTime;peco2In;peco2Out;peco2WorkTime;peco3In;peco3Out;peco3WorkTime;peco4In;peco4Out;peco4WorkTime;peco5In;peco5Out;peco5WorkTime;peco6In;peco6Out;peco6WorkTime;peco7In;peco7Out;peco7WorkTime;peco8In;peco8Out;peco8WorkTime\n10;26;31;100;26;19;100\n11;30;43;100;48;27;100\n12;26;35;100;36;27;100\n13;26;41;100;41;25;100\n14;32;43;100;57;32;100\n15;23;44;100;77;60;100\n16;44;48;100;59;42;100\n17;60;67;100;52;49;100\n18;35;56;100;48;39;100\n19;39;48;100;58;37;100\n20;18;29;100;28;30;100\n21;24;26;100;16;14;100\n22;18;13;100;10;3;100\n23;0;0;0;0;0;0\n</code></pre>\n<p>And I execute this in command line of Windows</p>\n<pre class=\"lang-none prettyprint-override\"><code>perl -MText::CSV_XS -e &quot;my $csv = Text::CSV_XS-&gt;new();while(my $row = $csv-&gt;getline(ARGV)){$csv-&gt;print(STDOUT, [@$row[0,2,3]])}&quot; peco1.csv &gt; new.csv\n</code></pre>\n<p>How can I show only the first seven columns?</p>\n<p>Like this result:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Hour;peco1In;peco1Out;peco1WorkTime;peco2In;peco2Out;peco2WorkTime\n10;26;31;100;26;19;100\n11;30;43;100;48;27;100\n12;26;35;100;36;27;100\n13;26;41;100;41;25;100\n14;32;43;100;57;32;100\n15;23;44;100;77;60;100\n16;44;48;100;59;42;100\n17;60;67;100;52;49;100\n18;35;56;100;48;39;100\n19;39;48;100;58;37;100\n20;18;29;100;28;30;100\n21;24;26;100;16;14;100\n22;18;13;100;10;3;100\n23;0;0;0;0;0;0\n</code></pre>\n"}, {"tags": ["perl", "geoserver", "www-mechanize"], "comments": [{"owner": {"reputation": 3844, "user_id": 711654, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Eyh5u.jpg?s=128&g=1", "display_name": "Boris Ivanov", "link": "https://stackoverflow.com/users/711654/boris-ivanov"}, "edited": false, "score": 0, "creation_date": 1457340156, "post_id": 35726626, "comment_id": 59344935, "body": "At which step of ur program?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7453436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a944e93d7bc47c4edb00740221b16c96?s=128&d=identicon&r=PG&f=1", "display_name": "javascriptlover", "link": "https://stackoverflow.com/users/7453436/javascriptlover"}, "is_accepted": false, "score": 0, "last_activity_date": 1485618487, "creation_date": 1485618487, "answer_id": 41911699, "question_id": 35726626, "link": "https://stackoverflow.com/questions/35726626/session-expires-when-using-wwwmechanize-on-geoserver/41911699#41911699", "title": "Session expires when using WWW::Mechanize on GeoServer", "body": "<p>Try setting timeout parameter while declaring $agent</p>\n"}], "owner": {"reputation": 1730, "user_id": 5918127, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-u_7Bd1JCdBk/AAAAAAAAAAI/AAAAAAAAABQ/UT3oNwtq2uI/photo.jpg?sz=128", "display_name": "MaxiReglisse", "link": "https://stackoverflow.com/users/5918127/maxireglisse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1485618487, "creation_date": 1456845443, "last_edit_date": 1457339210, "question_id": 35726626, "link": "https://stackoverflow.com/questions/35726626/session-expires-when-using-wwwmechanize-on-geoserver", "title": "Session expires when using WWW::Mechanize on GeoServer", "body": "<p>I try to use WWW::Mechanize in order to automate a session with GeoServer.</p>\n\n<p>GeoServer comes with a REST API, which can be used with curl. But at the moment, it is impossible to create a datastore for ImageMosaicJDBC with the REST API, so i would like to add the new raster data source with a Perl script. it is based on WWW::Mechanize.</p>\n\n<p>but it fails, with this message : </p>\n\n<pre><code>your session has expired.\n</code></pre>\n\n<p>The script is just below...</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nuse WWW::Mechanize;\nuse HTML::TreeBuilder;\nuse HTML::Tree;\nuse Getopt::Long;\nuse HTTP::Cookies;\n\nmy %CONF = (\n    username     =&gt; 'admin',\n    password     =&gt; 'geoserver',\n);\n\nGetOptions( \\%CONF, \"username=s\", \"password=s\" ) or die \"Bad options\";\n\nmy $netloc   = \"193.55.67.151:8080\";\nmy $url      = \"http://$netloc/geoserver/web/?wicket:bookmarkablePage=:org.geoserver.web.GeoServerLoginPage\";\n\nmy $cookie_jar = HTTP::Cookies-&gt;new;\nmy $agent      = WWW::Mechanize-&gt;new( cookie_jar =&gt; $cookie_jar );\n$agent-&gt;agent('User-Agent=Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:44.0) Gecko/20100101 Firefox/44.0');\n\n# auth\n$agent-&gt;get($url);\ndie $agent-&gt;res-&gt;status_line unless $agent-&gt;success;\n$agent-&gt;set_fields(%CONF);\n$agent-&gt;submit;\ndie $agent-&gt;res-&gt;status_line unless $agent-&gt;success;\n\n# adding data store\n$url = \"http://$netloc/geoserver/web?wicket:bookmarkablePage=:org.geoserver.web.data.store.NewDataPage\";\nmy $content = $agent-&gt;get($url);\ndie $agent-&gt;res-&gt;status_line unless $agent-&gt;success;\nmy $tree    = HTML::Tree-&gt;new();\n$tree-&gt;parse($content);\nprint $agent-&gt;content;\n\n# storeform\n$url = \"http://$netloc/geoserver/web/?wicket:interface=:5:storeForm::IFormSubmitListener::\";\nmy $content = $agent-&gt;post($url);\ndie $agent-&gt;res-&gt;status_line unless $agent-&gt;success;\nmy $tree    = HTML::Tree-&gt;new();\n$tree-&gt;parse($content);\nprint $agent-&gt;content;\n\n# newdatapage\n$url = \"http://$netloc/geoserver/web/?wicket:interface=:6::::\";\nmy $ref = \"http://$netloc/geoserver/web/?wicket:bookmarkablePage=:org.geoserver.web.data.store.NewDataPage\";\nmy $content = $agent-&gt;get( $url, referer =&gt; $ref);\ndie $agent-&gt;res-&gt;status_line unless $agent-&gt;success;\nmy $tree    = HTML::Tree-&gt;new();\n$tree-&gt;parse($content);\nprint $agent-&gt;content;\n</code></pre>\n\n<p>I cannot see where the problem comes from... In particular, i used WireShark to inspect the HTTP exchanges, but every thing was ok for me. The JSESSIONID cookie was for example correctly rescueing.</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 24016, "user_id": 233014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XyJIf.jpg?s=128&g=1", "display_name": "Christoffer Hammarstr&#246;m", "link": "https://stackoverflow.com/users/233014/christoffer-hammarstr%c3%b6m"}, "edited": false, "score": 3, "creation_date": 1456825762, "post_id": 35719452, "comment_id": 59114321, "body": "<code>$arr[0]</code> is a single scalar, <code>@arr[0]</code> is a list of one scalar."}], "answers": [{"comments": [{"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 2, "creation_date": 1456830673, "post_id": 35720321, "comment_id": 59117468, "body": "Is it really &quot;old-fashioned&quot;? Was that how it worked with really old versions of Perl? In the twenty years I&#39;ve been using Perl it&#39;s always just been wrong :-)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1456831125, "post_id": 35720321, "comment_id": 59117737, "body": "@dave I think you&#39;re right. It just didn&#39;t warn about it, I guess. I am trying to find some reference for that, as I think it might be a Perl 4 leftover, but it&#39;s really hard to find any documentation that old."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1456831590, "post_id": 35720321, "comment_id": 59118015, "body": "@dave I think this will make it more clear. it&#39;s not wrong per se, it&#39;s just a different thing :)"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 5, "last_activity_date": 1456831543, "last_edit_date": 1495541254, "creation_date": 1456827780, "answer_id": 35720321, "question_id": 35719452, "link": "https://stackoverflow.com/questions/35719452/what-is-differnece-between-arr0-and-arr0-in-perl/35720321#35720321", "title": "what is differnece between $arr[0] and @arr[0] in perl?", "body": "<p>Using the <code>@</code> sigil with an array element is using <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">an array slice</a> with a single element list. If you turn on <code>use warnings</code> it will tell you:</p>\n\n<blockquote>\n  <p>scalar value @arr[0] better written as $arr[0] at foo.pl line 709</p>\n</blockquote>\n\n<p>If you also <code>use diagnostics</code>, it will explain quite a bit.</p>\n\n<blockquote>\n  <p>Scalar value @arr[0] better written as $arr[0] at foo.pl line 709 (#1)</p>\n  \n  <p>(W syntax) You've used an array slice (indicated by @) to select a\n  single element of an array.  Generally it's better to ask for a scalar\n  value (indicated by $).  The difference is that $foo[&amp;bar] always\n  behaves like a scalar, both when assigning to it and when evaluating\n  its argument, while @foo[&amp;bar] behaves like a list when you assign to\n  it, and provides a list context to its subscript, which can do weird\n  things if you're expecting only one subscript.</p>\n  \n  <p>On the other hand, if you were actually hoping to treat the array\n  element as a list, you need to look into how references work, because\n  Perl will not magically convert between scalars and lists for you. \n  See perlref.</p>\n</blockquote>\n\n<p>So in general, you should use the sigil of the type of thing a variable call returns. For a single array element, that is <em>scalar</em>, so you use <code>$</code>. </p>\n\n<p>Using <code>@</code> implies it returns a list. An array itself returns a list, and so does an array slice. Here you did a slice with one element. That is not a big problem, but also not the way it's intended, which is why Perl warns you about it.</p>\n\n<p>Just <code>use warnings</code>, and also <code>use strict</code> (and declare your variables with <code>my</code>), and always use the correct sigil.</p>\n\n<p>Don't put <code>use diagnostics</code> into your production code, as it slows everything down quite a bit. Just use it if you don't understand a warning.</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/a/154086/1331451\">this answer by brian d foy</a>.</p>\n"}], "owner": {"reputation": 766, "user_id": 4445448, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/3fbf664dc5d850436aac1fd98700c0ae?s=128&d=identicon&r=PG&f=1", "display_name": "SSN", "link": "https://stackoverflow.com/users/4445448/ssn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "closed_date": 1456846947, "answer_count": 1, "score": 0, "last_activity_date": 1456831543, "creation_date": 1456825518, "last_edit_date": 1456825746, "question_id": 35719452, "link": "https://stackoverflow.com/questions/35719452/what-is-differnece-between-arr0-and-arr0-in-perl", "closed_reason": "Duplicate", "title": "what is differnece between $arr[0] and @arr[0] in perl?", "body": "<p>I have perl coding like this</p>\n\n<pre><code>@arr = qw(1 2 3 4);\n\nprint $arr[0],\"\\n\";\nprint @arr[0],\"\\n\";\n</code></pre>\n\n<p>Both output answer is 1 then, What is the difference?\nIs it any difference in memory storage?</p>\n"}, {"tags": ["perl", "mojolicious"], "comments": [{"owner": {"reputation": 23, "user_id": 6001065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3d3344019295333494c54c5673dbe8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel. B", "link": "https://stackoverflow.com/users/6001065/pavel-b"}, "edited": false, "score": 0, "creation_date": 1456818269, "post_id": 35716888, "comment_id": 59110342, "body": "I&#39;m so sorry, but /vlan doesn&#39;t work too. Only work routes is /, /login, /logout"}, {"owner": {"reputation": 23, "user_id": 6001065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3d3344019295333494c54c5673dbe8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel. B", "link": "https://stackoverflow.com/users/6001065/pavel-b"}, "edited": false, "score": 0, "creation_date": 1456819457, "post_id": 35716888, "comment_id": 59110878, "body": "I found error. Wrong name of controller. pm file end with VLAN, but must Vlan :) Dummy, Dummy, Dummy :)"}], "answers": [{"tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 4, "last_activity_date": 1456819495, "creation_date": 1456819495, "answer_id": 35717589, "question_id": 35716888, "link": "https://stackoverflow.com/questions/35716888/controller-not-found-in-mojolicious/35717589#35717589", "title": "Controller not found in Mojolicious", "body": "<p>Your controller name is <code>PDNController::Controller::VLAN</code>,but your route says:</p>\n\n<pre><code>$auth-&gt;get('/vlan')-&gt;to('vlan#index');\n</code></pre>\n\n<p>That means you are searching for controller <code>PDNController::Controller::Vlan</code>(The controller-names are changed into initcap by Mojolicious ) which obviously does not exist.</p>\n\n<p>There is two solutions for this: </p>\n\n<ol>\n<li>Change your controller name <code>PDNController::Controller::VLAN</code> to <code>PDNController::Controller::Vlan</code> and the file inside Controller directory  to <code>Vlan.pm</code>.</li>\n<li><p>OR Change the route to below. </p>\n\n<p><code>$auth-&gt;get('/vlan')-&gt;to('VLAN#index');</code></p></li>\n</ol>\n\n<blockquote>\n  <p>Why controller name PDNController::Vlan and not\n  PDNController::Controller::Vlan</p>\n</blockquote>\n\n<p><code>PDNController::Vlan</code> in the error message points to controller <code>PDNController::Controller::Vlan</code>. The error message is designed to give you more clarity.</p>\n\n<p>When it is saying <code>Controller \"PDNController::Vlan\"</code> that means it is controller Vlan of PDNController app(all controllers of your app resides in Controller directory) i.e it is saying about <code>PDNController::Controller::Vlan</code>.  </p>\n"}], "owner": {"reputation": 23, "user_id": 6001065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e3d3344019295333494c54c5673dbe8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel. B", "link": "https://stackoverflow.com/users/6001065/pavel-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "accepted_answer_id": 35717589, "answer_count": 1, "score": 2, "last_activity_date": 1456819495, "creation_date": 1456816780, "question_id": 35716888, "link": "https://stackoverflow.com/questions/35716888/controller-not-found-in-mojolicious", "title": "Controller not found in Mojolicious", "body": "<p>I have some strange result in routing.</p>\n\n<p>Reference code in <strong>PDNController.pm</strong></p>\n\n<pre><code>    my $r = $self-&gt;routes;\n\n    my $auth = $r-&gt;under('/' =&gt; sub {\n    my $self = shift ;\n    $self-&gt;redirect_to('/login') and return undef unless ($self-&gt;is_user_authenticated);\n    return 1;\n    });\n\n    $r-&gt;get('/login')-&gt;to('login#index');\n\n    $r-&gt;post('/login')-&gt;to('login#auth');\n\n    $r-&gt;get('/logout')-&gt;to('login#logout');\n\n    $auth-&gt;get('/')-&gt;to('index#index');\n\n    $auth-&gt;get('/vlan')-&gt;to('vlan#index');\n\n    $auth-&gt;get('/api/vlan/add')-&gt;to('vlan#add');\n</code></pre>\n\n<p>Reference code in <strong>PDNController/Controller/VLAN.pm</strong></p>\n\n<pre><code>package PDNController::Controller::VLAN;\nuse Mojo::Base 'Mojolicious::Controller';\n\nsub index {\n  my $self = shift;\n  $self-&gt;render();\n}\n\nsub add {\n    my $self = shift;\n    my %h;\n    $h{error} = '';\n    $self-&gt;res-&gt;headers-&gt;add( 'Access-Control-Allow-Origin' =&gt; '*' );\n    $self-&gt;render(json =&gt; {%h}});  \n}\n\n\n1;\n</code></pre>\n\n<p>All routes from this example except /api/vlan/add work fine but with last i have an error</p>\n\n<pre><code>[Tue Mar  1 16:54:02 2016] [debug] GET \"/api/vlan/add\"\n[Tue Mar  1 16:54:02 2016] [debug] Routing to a callback\n[Tue Mar  1 16:54:02 2016] [debug] Controller \"PDNController::Vlan\" does not exist\n[Tue Mar  1 16:54:02 2016] [debug] Template \"vlan/add.html.ep\" not found\n[Tue Mar  1 16:54:02 2016] [debug] Template \"not_found.development.html.ep\" not found\n[Tue Mar  1 16:54:02 2016] [debug] Template \"not_found.html.ep\" not found\n[Tue Mar  1 16:54:02 2016] [debug] Rendering template \"mojo/debug.html.ep\"\n[Tue Mar  1 16:54:02 2016] [debug] Rendering template \"mojo/menubar.html.ep\"\n[Tue Mar  1 16:54:02 2016] [debug] 404 Not Found (0.052532s, 19.036/s)\n</code></pre>\n\n<p>Why controller name PDNController::Vlan and not PDNController::Controller::Vlan ?</p>\n\n<p><strong><em>Mojolicious 6.51</em></strong></p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1456809729, "post_id": 35713772, "comment_id": 59106748, "body": "That <code>@array</code> contains only one element."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1456809902, "post_id": 35713772, "comment_id": 59106805, "body": "@DavidO That array isn&#39;t even a valid array. In fact, it&#39;s just a syntax error as it&#39;s currently written."}], "answers": [{"tags": [], "owner": {"reputation": 481, "user_id": 5916150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c209005186a84dd1820b220d7b78527e?s=128&d=identicon&r=PG&f=1", "display_name": "Arif Burhan", "link": "https://stackoverflow.com/users/5916150/arif-burhan"}, "is_accepted": false, "score": -2, "last_activity_date": 1456802631, "creation_date": 1456802631, "answer_id": 35714087, "question_id": 35713772, "link": "https://stackoverflow.com/questions/35713772/linux-perl-how-to-simply-arrange-content-of-an-array/35714087#35714087", "title": "Linux Perl: How to simply arrange content of an array", "body": "<p>Use Schwartzian Transformation ( google  Schwarzian Transformation in perl )</p>\n\n<p>Done by creating a new array {index,string} , sorting on index, but printing out only string ( without any further processing ).</p>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1458718946, "last_edit_date": 1458718946, "creation_date": 1456805438, "answer_id": 35714494, "question_id": 35713772, "link": "https://stackoverflow.com/questions/35713772/linux-perl-how-to-simply-arrange-content-of-an-array/35714494#35714494", "title": "Linux Perl: How to simply arrange content of an array", "body": "<p>Reverse each string, sort as desired (descending), reverse them back.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy @array = (   \n    'Machine1, 01/02/2016, 02/01/2016, 26', \n    'Machine2, 02/01/2016, 02/01/2016, 1',\n    'Machine3, 02/01/2016, 02/01/2016, 78'\n);\n\nmy @sorted = map { my $s = reverse; $s }\n             sort { $b cmp $a } \n             map { my $s = reverse; $s }  @array;\n\nprint \"$_\\n\" for @sorted;\n</code></pre>\n\n<p>This prints</p>\n\n<pre>\nMachine3, 02/01/2016, 02/01/2016, 78\nMachine1, 01/02/2016, 02/01/2016, 26\nMachine2, 02/01/2016, 02/01/2016, 1\n</pre>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "edited": false, "score": 0, "creation_date": 1456812094, "post_id": 35715094, "comment_id": 59107666, "body": "Wow! Thanks a lot! What is the dd(\\@array);?"}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 2, "last_activity_date": 1456849314, "last_edit_date": 1495542650, "creation_date": 1456808940, "answer_id": 35715094, "question_id": 35713772, "link": "https://stackoverflow.com/questions/35713772/linux-perl-how-to-simply-arrange-content-of-an-array/35715094#35715094", "title": "Linux Perl: How to simply arrange content of an array", "body": "<p>It's not ideal to start with an array of strings when an <a href=\"http://perldoc.perl.org/perldsc.html#ARRAYS-OF-ARRAYS\" rel=\"nofollow noreferrer\">array of arrays</a> would be better, but we can work with that by <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a>-ing each string into its component parts. Then we just sort on the element you're interested in, and Bob's your uncle.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dump;\n\nmy @array = (\n    'Machine1, 01/02/2016, 02/01/2016, 26',\n    'Machine2, 02/01/2016, 02/01/2016, 1',\n    'Machine3, 02/01/2016, 02/01/2016, 78',\n);\n\n@array = sort { $b-&gt;[3] &lt;=&gt; $a-&gt;[3] }\n         map  { [ split(/,\\s*/) ] }\n         @array;\n\ndd(\\@array);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[\n  [\"Machine3\", \"02/01/2016\", \"02/01/2016\", 78],\n  [\"Machine1\", \"01/02/2016\", \"02/01/2016\", 26],\n  [\"Machine2\", \"02/01/2016\", \"02/01/2016\", 1],\n]\n</code></pre>\n\n<p>If you need to keep the data in the original format, you can use a <a href=\"https://stackoverflow.com/questions/6483475/schwartzian-transform-in-perl\">Schwartzian transform</a>:</p>\n\n<pre><code>@array = map  { $_-&gt;[0] }\n         sort { $b-&gt;[1] &lt;=&gt; $a-&gt;[1] }\n         map  { [ $_, (split(/,\\s*/))[3] ] }\n         @array;\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[\n  \"Machine3, 02/01/2016, 02/01/2016, 78\",\n  \"Machine1, 01/02/2016, 02/01/2016, 26\",\n  \"Machine2, 02/01/2016, 02/01/2016, 1\",\n]\n</code></pre>\n"}], "owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 3, "accepted_answer_id": 35715094, "answer_count": 3, "score": -4, "last_activity_date": 1458718946, "creation_date": 1456800545, "last_edit_date": 1456802859, "question_id": 35713772, "link": "https://stackoverflow.com/questions/35713772/linux-perl-how-to-simply-arrange-content-of-an-array", "title": "Linux Perl: How to simply arrange content of an array", "body": "<p>I have read a lot of guides, maybe I just don't get it.</p>\n\n<p>I have a string and converted it to an array. Now I need to arrange its content in a descending order based on the last column. Here is how my array looks like in a \"string view\":</p>\n\n<pre><code>   @array = [\n\n   Machine1, 01/02/2016, 02/01/2016, 26\n\n   Machine2, 02/01/2016, 02/01/2016, 1\n\n   Machine3, 02/01/2016, 02/01/2016, 78\n\n   ]\n</code></pre>\n\n<p>In this array, the whole <strong>\"Machine1, 01/02/2016, 02/01/2016, 26\"</strong> is considered a whole string in an array, and based last column (which I consider) which is: 26, 1, 78 &lt;- I wish I could order then in a descending order: 78, 26, 1.</p>\n\n<p>Sorry for the childish question.</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["perl", "error-handling", "architecture"], "answers": [{"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": true, "score": 1, "last_activity_date": 1456803927, "creation_date": 1456803927, "answer_id": 35714261, "question_id": 35713566, "link": "https://stackoverflow.com/questions/35713566/what-would-be-the-most-scalable-extensible-way-to-design-an-error-messaging-syst/35714261#35714261", "title": "What would be the most scalable/extensible way to design an error messaging system for an application? I will be using Perl.", "body": "<p>When you say;</p>\n\n<p><em>The error messages themselves are also hashes containing status codes and the error messages in the application. Then where the error occurs in the code of the application I just have the die function which creates a new error and uses the name of the error from the script containing the list of errors.</em></p>\n\n<p>... you, more or less, are describing exception objects.  This simple exception class <a href=\"http://c2.com/cgi/wiki?ExceptionHandlingInPerl\" rel=\"nofollow\">(taken from here)</a></p>\n\n<pre><code>package Exception;\n\nsub new\n{\n    my $class = shift;\n    bless { msg=&gt;\"@_\" }, $class;\n}\n\nsub what\n{\n    my ($self) = @_;\n    return sprintf \"Exception: %s\\n\", $self-&gt;{msg};\n}\n</code></pre>\n\n<p>accomplishes a lot for its size and is used like this;</p>\n\n<pre><code>sub try(&amp;)   { eval {$_[0]-&gt;()}  }\nsub throw($) { die $_[0]         }\nsub catch(&amp;) { $_[0]-&gt;($@) if $@ }\n\n# The main program\ntry {\n    throw Exception-&gt;new(\"A real exception\");\n};\ncatch {\n    print $@-&gt;what;\n};\n</code></pre>\n\n<p>This object has only one attribute, <strong>msg</strong> (called as <strong>->what</strong>), but you could obviously have attributes for error codes, apps, app phases and so on.  Notice that <code>&amp;throw</code> is a small wrapper around <strong>die</strong> and the exception object is created at the spot its need - much like your statement <em>\"... where the error occurs in the code of the application I just have the die function which creates a new error...\"</em></p>\n\n<p>Your <em>\"script with a hash of all the error messages\"</em> then becomes a (sub) module of your app dedicated to exception objects which either </p>\n\n<p>1) pre-creates them all and indexes them by some error code; or    </p>\n\n<p>2) (better) creates a small hierarchy of general to\n    increasingly specific exception classes from which you likewise create on-the-fly exception objects as errors are detected (much like the above)</p>\n\n<p>Finally, depending on your circumstances, you may want to go with a pre-canned, full-bells-and-whistles solution from cpan. I haven't used it myself but <a href=\"https://metacpan.org/pod/Exception::System\" rel=\"nofollow\">Exception::System</a> looks pretty good.</p>\n"}, {"tags": [], "owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "is_accepted": false, "score": 0, "last_activity_date": 1456842695, "last_edit_date": 1592644375, "creation_date": 1456842695, "answer_id": 35725606, "question_id": 35713566, "link": "https://stackoverflow.com/questions/35713566/what-would-be-the-most-scalable-extensible-way-to-design-an-error-messaging-syst/35725606#35725606", "title": "What would be the most scalable/extensible way to design an error messaging system for an application? I will be using Perl.", "body": "<p><a href=\"https://metacpan.org/pod/Exception::Base\" rel=\"nofollow noreferrer\">Exception::Base</a> is excellent.</p>\n<blockquote>\n<p>This class implements a fully OO exception mechanism similar to <code>Exception::Class</code> or <code>Class::Throwable</code>. It provides a simple interface allowing programmers to declare exception classes. These classes can be thrown and caught. Each uncaught exception prints full stack trace if the default verbosity is increased for debugging purposes.</p>\n<p>The features of <code>Exception::Base</code>:</p>\n<ul>\n<li><p>fast implementation of the exception class</p>\n</li>\n<li><p>fully OO without closures and source code filtering</p>\n</li>\n<li><p>does not mess with <code>$SIG{__DIE__}</code> and <code>$SIG{__WARN__}</code></p>\n</li>\n<li><p>no external run-time modules dependencies, requires core Perl modules only</p>\n</li>\n<li><p>the default behavior of exception class can be changed globally or just for the thrown exception</p>\n</li>\n<li><p>matching the exception by class, message or other attributes</p>\n</li>\n<li><p>matching with string, regex or closure function</p>\n</li>\n<li><p>creating automatically the derived exception classes (&quot;use&quot; in perlfunc interface)</p>\n</li>\n<li><p>easily expendable, see <code>Exception::System</code> class for example</p>\n</li>\n<li><p>prints just an error message or dumps full stack trace</p>\n</li>\n<li><p>can propagate (rethrow) an exception</p>\n</li>\n<li><p>can ignore some packages for stack trace output</p>\n</li>\n<li><p>some defaults (i.e. verbosity) can be different for different exceptions</p>\n</li>\n</ul>\n</blockquote>\n"}], "owner": {"reputation": 169, "user_id": 6000354, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/1122424037792331/picture?type=large", "display_name": "Paul Russell", "link": "https://stackoverflow.com/users/6000354/paul-russell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1457538679, "accepted_answer_id": 35714261, "answer_count": 2, "score": 2, "last_activity_date": 1456842695, "creation_date": 1456798992, "question_id": 35713566, "link": "https://stackoverflow.com/questions/35713566/what-would-be-the-most-scalable-extensible-way-to-design-an-error-messaging-syst", "closed_reason": "Needs more focus", "title": "What would be the most scalable/extensible way to design an error messaging system for an application? I will be using Perl.", "body": "<p>I just need a general architecture for this design. Currently I am thinking of creating a script with a hash of all the error messages. The error messages themselves are also hashes containing status codes and the error messages in the application. Then where the error occurs in the code of the application I just have the die function which creates a new error and uses the name of the error from the script containing the list of errors. I don't know if this is the best or most efficient way to design such a system. I am trying to design it in such a way so that if more errors have to be added. Any ideas or guidance would be much appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 3595231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5451a5e41eae7299deb485e11dc5041?s=128&d=identicon&r=PG&f=1", "display_name": "user3595231", "link": "https://stackoverflow.com/users/3595231/user3595231"}, "edited": false, "score": 0, "creation_date": 1456798531, "post_id": 35713276, "comment_id": 59103516, "body": "Thank you so much !  I have a feeling this &quot;$_&quot; was not interpret the way I had thought during this &quot;grep&quot; call. I  just could not find out why it happens that way."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 7, "last_activity_date": 1456797051, "creation_date": 1456797051, "answer_id": 35713276, "question_id": 35713064, "link": "https://stackoverflow.com/questions/35713064/using-grep-in-the-perl-script/35713276#35713276", "title": "using grep in the perl script", "body": "<p>Because you are abusing the <code>$_</code> variable.</p>\n\n<p>Inside the expression of a <code>grep EXPR, LIST</code> construction, <code>$_</code> is aliased to an element of the list and the expression is evaluated. The previous value of <code>$_</code> is not restored until the end of the <code>grep</code> statement.</p>\n\n<p>Since a naked <code>/.../</code> expression is equivalent to <code>$_ =~ /.../</code>, your <code>grep</code> statement is just</p>\n\n<pre><code>grep $_ =~ /$_/, @list\n</code></pre>\n\n<p>with <code>$_</code> aliased to an element of <code>@list</code>, and which is true for most normal values of <code>$_</code>.</p>\n\n<p>The lesson is to not make <code>$_</code> do too much work for you. Say</p>\n\n<pre><code>foreach $var (@vars) {\n    if ( grep(/$var/, @list)) {\n        print \"1\\t\";\n    }else{\n        print \"0\\t\";\n    }\n}\n</code></pre>\n\n<p>instead. Anyone who looks at your code six months from now (including your future self) will thank you.</p>\n"}], "owner": {"reputation": 479, "user_id": 3595231, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d5451a5e41eae7299deb485e11dc5041?s=128&d=identicon&r=PG&f=1", "display_name": "user3595231", "link": "https://stackoverflow.com/users/3595231/user3595231"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456854840, "creation_date": 1456795628, "last_edit_date": 1456854840, "question_id": 35713064, "link": "https://stackoverflow.com/questions/35713064/using-grep-in-the-perl-script", "title": "using grep in the perl script", "body": "<p>I have a perl script, such as: </p>\n\n<pre>\n\n    #!/usr/bin/perl -w\n\n    use strict;\n\n    my @vars = split(\" \", \"aaa bbb\");\n    my @list = split(\" \", \"aaa\");\n\n    foreach(@vars) {\n        if ( grep(/$_/, @list)) {\n            print \"1\\t\";\n        }else{\n            print \"0\\t\";\n        }\n    }\n\n</pre>\n\n<p>I was hoping it gives \"1   0\" in return, but it is always \"1 1\". Does anyone know why ?  I am using perl 5.8.8. </p>\n\n<p>Thanks. </p>\n\n<p>Chun</p>\n"}, {"tags": ["regex", "perl", "slurp"], "comments": [{"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1456795758, "post_id": 35712977, "comment_id": 59102717, "body": "It reads as though it takes the 20 characters each side of the word &#39;pledge&#39; whatever <code>$searchword</code> is set to?  Can you clarify?"}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1456796696, "post_id": 35712977, "comment_id": 59103007, "body": "Also, other than &quot;searchword found&quot; it doesn&#39;t print anything that we can see - i.e. presumably <code>&amp;write_excel</code> does something but you haven&#39;t posted its contents."}, {"owner": {"reputation": 13, "user_id": 5975804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PVnW-m9-s4I/AAAAAAAAAAI/AAAAAAAABIk/5SIGY0Boo94/photo.jpg?sz=128", "display_name": "A Roeschley", "link": "https://stackoverflow.com/users/5975804/a-roeschley"}, "reply_to_user": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1456925037, "post_id": 35712977, "comment_id": 59170006, "body": "I&#39;m sorry pledge should have read &quot;fun&quot;. Also, this is a sub routine and the write to excel portion is later in my code. I can post it all if that is helpful."}], "answers": [{"tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": true, "score": 0, "last_activity_date": 1456800942, "last_edit_date": 1495541269, "creation_date": 1456800570, "answer_id": 35713776, "question_id": 35712977, "link": "https://stackoverflow.com/questions/35712977/using-perl-to-print-multiple-lines/35713776#35713776", "title": "Using Perl to print multiple lines", "body": "<p>Your code as is seems to</p>\n\n<ol>\n<li>Take 20 chars each side of <strong>'pledge'</strong> not <code>$searchword</code>; </li>\n<li>Have an unmatched '{' at the start; </li>\n<li>Doesn't print any file contents save for &amp;write_excel which we can't examine; and </li>\n<li>Has a logic problem in that if <code>$searchword</code> is found, <code>$goodline</code> is unconditionally set to '1' and then tested to see if its '1' and finally reset to '0'</li>\n</ol>\n\n<p>Putting that aside, the question as to whether to read in the whole file depends on your circumstances some what - how big are the files you're going to be searching, does your machine have plenty of memory; is the machine a shared resource and so on.  I'm going to presume you can read in the whole file as that's the more common position in my experience (those who disagree please keep in mind (a) I've acknowledge that its debatable; and (b) its very dependant on the circumstances that only the OP knows)</p>\n\n<p>Given that, there are several ways to read in a whole file but the <a href=\"https://stackoverflow.com/questions/206661/what-is-the-best-way-to-slurp-a-file-into-a-string-in-perl\">consensus seems to be</a> to go with the module <code>File::Slurp</code>.  Given those parameters, the answer looks like this;</p>\n\n<pre><code>#!/usr/bin/env perl\nuse v5.12;\nuse File::Slurp;\n\nmy $searchword = 'fun';\nmy $inputfile  = \"file.txt\";\nmy $contents   = read_file($inputfile);\n\nmy $line = '\\N*\\n';\nif ( $contents =~ /(\n       $line?\n       $line?\n       \\N* $searchword \\N* \\n?\n       $line?\n       $line?\n   )/x) {\n  say \"Found:\\n\" . $1 ;\n}\nelse {\n  say \"Not found.\"\n}\n</code></pre>\n\n<p><code>File::Slurp</code> prints a reasonable error message if the file isn't present (or something else goes wrong), so I've left out the typical <code>or die...</code>.  Whenever working with regexes - particularly if your trying to match stuff on multiple lines, it pays to use \"extended mode\" (by putting an 'x' after the final '/') to allow <strong>insignificant</strong> whitespace in the regex.  This allows a clearer layout.</p>\n\n<p>I've also separated out the definition of a line for added clarity which consists of 0, 1 or more non-newlines characters, <code>\\N*</code>, followed by a new line, <code>\\n</code>.  However, if your target is on the first, second, second-last or last line I presume you still want the information, so the requested preceding and following pairs of lines are optionally matched. <code>$line?</code></p>\n\n<p>Please note that regular expressions are pedantic and there are inevitably 'fine details' that effect the definition of a successful match vs an unwanted match - ie. Don't expect this to do <strong>exactly</strong> what you want in all circumstances.  Expect that you'll have to experiment and tweek things a bit.</p>\n"}, {"tags": [], "owner": {"reputation": 10469, "user_id": 519360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f90aeb577f276cbaee4db1b7bdf622a?s=128&d=identicon&r=PG", "display_name": "Adam Katz", "link": "https://stackoverflow.com/users/519360/adam-katz"}, "is_accepted": false, "score": 0, "last_activity_date": 1456802815, "creation_date": 1456802815, "answer_id": 35714112, "question_id": 35712977, "link": "https://stackoverflow.com/questions/35712977/using-perl-to-print-multiple-lines/35714112#35714112", "title": "Using Perl to print multiple lines", "body": "<p>I'm not sure I understand your code block (what purpose does \"pledge\" have?  what is <code>&amp;write_excel</code>?), but I can answer your question itself.</p>\n\n<p>First, is this grep command acceptable?  It's far faster and cleaner:</p>\n\n<pre><code>grep -i -C2 --color \"fun\" \"file\"\n</code></pre>\n\n<p>The <code>-C NUM</code> flag tells <code>grep</code> to provide NUM lines of context surrounding each pattern match.  Obviously, <code>--color</code> is optional, but it may help you find the matches on really long lines.</p>\n\n<p>Otherwise, here's a bit of perl:</p>\n\n<pre><code>#!/usr/bin/perl\n\nmy $searchword = \"fun\";\nmy $inputfile = \"file\";\n\nmy $blue = \"\\e[1;34m\";    # change output color to blue\nmy $green = \"\\e[1;32m\";   # change output color to green\nmy $nocolor = \"\\e[0;0m\";  # reset output to no color\n\nmy $prev1 = my $prev2 = my $result = \"\";\n\nopen (INPUT, '&lt;', $inputfile) or die \"fatal error reading the file \\n\";\nwhile(&lt;INPUT&gt;) {\n  if (/$searchword/i) {\n    $result .= $prev2 . $prev1 . $_;  # pick up last two lines\n    $prev2 = $prev1 = \"\";             # prevent reusing last two lines\n    for (1..2) {                      # for two more non-matching lines\n      while (&lt;INPUT&gt;) {               # parse them to ensure they don't match\n        $result .= $_;                # pick up this line\n        last unless /$searchword/i;   # reset counting if it matched\n      }\n    }\n  } else {\n    $prev2 = $prev1;                  # save last line as $prev2\n    $prev1 = $_;                      # save current line as $prev1\n  }\n}\nclose $inputfile;\n\nexit 1 unless $result;                # return with failure if without matches\n\n$result =~                            # add colors (okay to remove this line)\n  s/([^\\e]{0,20})($searchword)([^\\e]{0,20})/$blue$1$green$2$blue$3$nocolor/g;\nprint \"$result\";                      # print the result\nprint \"\\n\" unless $result =~ /\\n\\Z/m; # add newline if there wasn't already one\n</code></pre>\n\n<p>Bug: this assumes that the two lines before and the two lines after are actually 20+ characters.  If you need to fix this, it goes in the <code>else</code> stanza.</p>\n"}], "owner": {"reputation": 13, "user_id": 5975804, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PVnW-m9-s4I/AAAAAAAAAAI/AAAAAAAABIk/5SIGY0Boo94/photo.jpg?sz=128", "display_name": "A Roeschley", "link": "https://stackoverflow.com/users/5975804/a-roeschley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "accepted_answer_id": 35713776, "answer_count": 2, "score": 1, "last_activity_date": 1456924842, "creation_date": 1456795083, "last_edit_date": 1456924842, "question_id": 35712977, "link": "https://stackoverflow.com/questions/35712977/using-perl-to-print-multiple-lines", "title": "Using Perl to print multiple lines", "body": "<p>This code grabs a keyword 'fun' from text files that I have and then prints the 20 characters before and after the keyword. However, I also want it to print the previous 2 lines and the next two lines, and I'm not sure how to do that. I wasn't sure if it is easier to change the code with this or just read the whole file at one time.</p>\n\n<pre><code>{my $inputfile = \"file\";\n$searchword = 'fun';\nopen (INPUT, '&lt;', $inputfile)  or die \"fatal error reading the file \\n\";\nwhile ($line1=&lt;INPUT&gt;)\n{  \n#read in a line of the file\n if ($line1 =~m/$searchword/i)\n {print \"searchword found\\n\";\n  $keepline = $line1;\n    $goodline =1;\n\n    $keepline =~/(.{1,20})(fun)(.{1,20})/gi;\n\n    if ($goodline==1)\n    {&amp;write_excel};\n $goodline =0;                \n }\n</code></pre>\n"}, {"tags": ["bash", "perl", "awk", "sed", "grep"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5988446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b63a6101a3a0d1d0061e76eee8f8268?s=128&d=identicon&r=PG", "display_name": "user553637", "link": "https://stackoverflow.com/users/5988446/user553637"}, "edited": false, "score": 0, "creation_date": 1456803053, "post_id": 35712525, "comment_id": 59104800, "body": "No output is coming,its just blank after i executed the code"}, {"owner": {"reputation": 1790, "user_id": 2926055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec33a10c7a355ea0266d08e0808a35?s=128&d=identicon&r=PG&f=1", "display_name": "user2926055", "link": "https://stackoverflow.com/users/2926055/user2926055"}, "reply_to_user": {"reputation": 35, "user_id": 5988446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b63a6101a3a0d1d0061e76eee8f8268?s=128&d=identicon&r=PG", "display_name": "user553637", "link": "https://stackoverflow.com/users/5988446/user553637"}, "edited": false, "score": 0, "creation_date": 1456803449, "post_id": 35712525, "comment_id": 59104904, "body": "Oops, 2nd version had a syntax error (now fixed), but the first one should work as-is. Maybe try combining all 5 lines into one? Are you copy-pasting the whole thing as a single command?"}, {"owner": {"reputation": 1790, "user_id": 2926055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec33a10c7a355ea0266d08e0808a35?s=128&d=identicon&r=PG&f=1", "display_name": "user2926055", "link": "https://stackoverflow.com/users/2926055/user2926055"}, "reply_to_user": {"reputation": 35, "user_id": 5988446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b63a6101a3a0d1d0061e76eee8f8268?s=128&d=identicon&r=PG", "display_name": "user553637", "link": "https://stackoverflow.com/users/5988446/user553637"}, "edited": false, "score": 0, "creation_date": 1456803626, "post_id": 35712525, "comment_id": 59104942, "body": "Also, <code>dumpsys notification</code> is producing output for perl to look through, right? I&#39;m unfamiliar with <code>dumpsys</code>, but maybe re-running it multiple times in a row produces different (or zero) output? Maybe redirect <code>dumpsys</code> to a file to make sure it&#39;s doing something? <code>dumpsys notification &gt; &#47;tmp&#47;output.txt; cat &#47;tmp&#47;output.txt; cat output.txt | perl -lne &#39;...&#39;</code>"}, {"owner": {"reputation": 35, "user_id": 5988446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b63a6101a3a0d1d0061e76eee8f8268?s=128&d=identicon&r=PG", "display_name": "user553637", "link": "https://stackoverflow.com/users/5988446/user553637"}, "edited": false, "score": 0, "creation_date": 1456951775, "post_id": 35712525, "comment_id": 59188864, "body": "It works now,thanks!! :) I actually forgot to tell u,hence the delay.Just had to make a few changes,but your example inspired me.Thanks again :)"}], "tags": [], "owner": {"reputation": 1790, "user_id": 2926055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec33a10c7a355ea0266d08e0808a35?s=128&d=identicon&r=PG&f=1", "display_name": "user2926055", "link": "https://stackoverflow.com/users/2926055/user2926055"}, "is_accepted": true, "score": 0, "last_activity_date": 1456803389, "last_edit_date": 1456803389, "creation_date": 1456792326, "answer_id": 35712525, "question_id": 35712328, "link": "https://stackoverflow.com/questions/35712328/get-package-name-and-corr-data-from-file/35712525#35712525", "title": "Get package name and corr. data from file", "body": "<p>I would suggest perl over awk, because you'll be storing whether you're inside the <code>extras=...</code> block in a variable:</p>\n\n<pre><code>dumpsys notification | perl -lne '\n    print $1 if /^Notif.*?: pkg=(\\S+)/;\n    $in_extras = 0 if /^  \\}/;\n    print if $in_extras;\n    $in_extras = 1 if /^  extras=\\{/'\n</code></pre>\n\n<p>Oh, if you want the extra <code>pkg:</code> and <code>extras=</code> text, slight modification:</p>\n\n<pre><code>dumpsys notification | perl -lne '\n    print \"pkg: $1\" if /^Notif.*?: pkg=(\\S+)/;\n    $in_extras = 1 if /^  extras=\\{/;\n    print if $in_extras;\n    $in_extras = 0 if /^  \\}/;'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1837, "user_id": 2244664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56cdee629e35288e2676f209ca0930e7?s=128&d=identicon&r=PG", "display_name": "Joao Morais", "link": "https://stackoverflow.com/users/2244664/joao-morais"}, "is_accepted": false, "score": 0, "last_activity_date": 1456793187, "creation_date": 1456793187, "answer_id": 35712667, "question_id": 35712328, "link": "https://stackoverflow.com/questions/35712328/get-package-name-and-corr-data-from-file/35712667#35712667", "title": "Get package name and corr. data from file", "body": "<p>Sed version:</p>\n\n<pre><code>dumpsys notification |\\\n  sed -n 's/.*pkg=\\([^ ]*\\).*/pkg:\\1/p;/^  extras={$/,/^  }$/s/^  //p'\n</code></pre>\n\n<p>I'm assuming you always have two spaces in front of <code>extras={</code> and <code>}</code> and you also want to remove these spaces.</p>\n"}, {"tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": false, "score": 1, "last_activity_date": 1456805403, "last_edit_date": 1456805403, "creation_date": 1456805000, "answer_id": 35714422, "question_id": 35712328, "link": "https://stackoverflow.com/questions/35712328/get-package-name-and-corr-data-from-file/35714422#35714422", "title": "Get package name and corr. data from file", "body": "<p>If you have <em>GNU</em> <code>awk</code>, try the following:</p>\n\n<pre><code>awk -v RS='(^|\\n)NotificationRecord\\\\([^=]+=' \\\n  'NF { print \"pkg:\" $1; print gensub(/^.*\\n\\s*(extras=\\{[^}]+\\}).*$/, \"\\\\1\", 1) }' file\n</code></pre>\n\n<ul>\n<li><p><code>-v RS='(^|\\n)NotificationRecord\\\\([^=]+='</code> breaks the input into records by lines starting with <code>NotificationRecord(</code> up to and including the following <code>=</code> char.</p>\n\n<ul>\n<li>In effect, that means you get records starting with the package names (<code>com.android.systemui</code>, ...`)</li>\n</ul></li>\n<li><p><code>NF</code> is a condition that only executes the following block if it evaluates to nonzero; <code>NF</code> is the count of fields in the record, so as long as at least 1 field is present, the block is evaluated - in effect, this skips the implied empty record before the very first line.</p></li>\n<li><p><code>print \"pkg:\" $1</code> prints the package name, prefixed with literal <code>pkg:</code>.</p></li>\n<li><p><code>gensub(/^.*\\n\\s*(extras=\\{[^}]+\\}).*$/, \"\\\\1\", 1)</code> matches the entire record and replaces it with the <code>extras</code> property captured via a capture group, effectively returning the <code>extras</code> property only.</p></li>\n</ul>\n"}], "owner": {"reputation": 35, "user_id": 5988446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b63a6101a3a0d1d0061e76eee8f8268?s=128&d=identicon&r=PG", "display_name": "user553637", "link": "https://stackoverflow.com/users/5988446/user553637"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 35712525, "answer_count": 3, "score": 1, "last_activity_date": 1456805403, "creation_date": 1456790999, "question_id": 35712328, "link": "https://stackoverflow.com/questions/35712328/get-package-name-and-corr-data-from-file", "title": "Get package name and corr. data from file", "body": "<p>I've been banging my head lately,trying to parse dumpsys output.</p>\n\n<p>Here is the output:</p>\n\n<pre><code>NotificationRecord(0x4297d448: pkg=com.android.systemui user=UserHandle{0} id=273 tag=null score=0: Notification(pri=0 icon=7f020148 contentView=com.android.systemui/0x1090069 vibrate=null sound=null defaults=0x0 flags=0x2 when=0 ledARGB=0x0 contentIntent=N deleteIntent=N contentTitle=6 contentText=15 tickerText=6 kind=[null]))\n  uid=10012 userId=0\n  icon=0x7f020148 / com.android.systemui:drawable/stat_sys_no_sim\n  pri=0 score=0\n  contentIntent=null\n  deleteIntent=null\n  tickerText=No SIM\n  contentView=android.widget.RemoteViews@429c1f58\n  defaults=0x00000000 flags=0x00000002\n  sound=null\n  vibrate=null\n  led=0x00000000 onMs=0 offMs=0\n  extras={\n    android.title=No SIM\n    android.subText=null\n    android.showChronometer=false\n    android.icon=2130837832\n    android.text=Insert SIM card\n    android.progress=0\n    android.progressMax=0\n    android.showWhen=true\n    android.infoText=null\n    android.progressIndeterminate=false\n    android.scoreModified=false\n  }\nNotificationRecord(0x427e1878: pkg=jackpal.androidterm user=UserHandle{0} id=1 tag=null score=0: Notification(pri=0 icon=7f02000d contentView=jackpal.androidterm/0x1090069 vibrate=null sound=null defaults=0x0 flags=0x62 when=1456782124817 ledARGB=0x0 contentIntent=Y deleteIntent=N contentTitle=17 contentText=27 tickerText=27 kind=[null]))\n  uid=10094 userId=0\n  icon=0x7f02000d / jackpal.androidterm:drawable/ic_stat_service_notification_icon\n  pri=0 score=0\n  contentIntent=PendingIntent{42754f78: PendingIntentRecord{42802aa0 jackpal.androidterm startActivity}}\n  deleteIntent=null\n  tickerText=Terminal session is running\n  contentView=android.widget.RemoteViews@4279b510\n  defaults=0x00000000 flags=0x00000062\n  sound=null\n  vibrate=null\n  led=0x00000000 onMs=0 offMs=0\n  extras={\n    android.title=Terminal Emulator\n    android.subText=null\n    android.showChronometer=false\n    android.icon=2130837517\n    android.text=Terminal session is running\n    android.progress=0\n    android.progressMax=0\n    android.showWhen=true\n    android.infoText=null\n    android.progressIndeterminate=false\n    android.scoreModified=false\n  }\nNotificationRecord(0x429381f8: pkg=com.droidsail.dsapp2sd user=UserHandle{0} id=128 tag=null score=0: Notification(pri=0 icon=7f020000 contentView=com.droidsail.dsapp2sd/0x1090069 vibrate=null sound=null defaults=0x0 flags=0x10 when=1456786729004 ledARGB=0x0 contentIntent=Y deleteIntent=N contentTitle=13 contentText=35 tickerText=35 kind=[null]))\n  uid=10107 userId=0\n  icon=0x7f020000 / com.droidsail.dsapp2sd:drawable/appicon\n  pri=0 score=0\n  contentIntent=PendingIntent{42955a60: PendingIntentRecord{4286db18 com.droidsail.dsapp2sd startActivity}}\n  deleteIntent=null\n  tickerText=Detected new app can be moved to SD\n  contentView=android.widget.RemoteViews@42a891a8\n  defaults=0x00000000 flags=0x00000010\n  sound=null\n  vibrate=null\n  led=0x00000000 onMs=0 offMs=0\n  extras={\n    android.title=New app to SD\n    android.subText=null\n    android.showChronometer=false\n    android.icon=2130837504\n    android.text=Detected new app can be moved to SD\n    android.progress=0\n    android.progressMax=0\n    android.showWhen=true\n    android.infoText=null\n    android.progressIndeterminate=false\n    android.scoreModified=false\n  }\nNotificationRecord(0x423708b0: pkg=android user=UserHandle{-1} id=17041135 tag=null score=0: Notification(pri=0 icon=1080399 contentView=android/0x1090069 vibrate=null sound=null defaults=0x0 flags=0x1002 when=0 ledARGB=0x0 contentIntent=Y deleteIntent=N contentTitle=19 contentText=17 tickerText=N kind=[android.system.imeswitcher]))\n  uid=1000 userId=-1\n  icon=0x1080399 / android:drawable/ic_notification_ime_default\n  pri=0 score=0\n  contentIntent=PendingIntent{425a8960: PendingIntentRecord{426f84b0 android broadcastIntent}}\n  deleteIntent=null\n  tickerText=null\n  contentView=android.widget.RemoteViews@428846b8\n  defaults=0x00000000 flags=0x00001002\n  sound=null\n  vibrate=null\n  led=0x00000000 onMs=0 offMs=0\n  extras={\n    android.title=Choose input method\n    android.subText=null\n    android.showChronometer=false\n    android.icon=17302425\n    android.text=Hacker's Keyboard\n    android.progress=0\n    android.progressMax=0\n    android.showWhen=true\n    android.infoText=null\n    android.progressIndeterminate=false\n    android.scoreModified=false\n  }\n</code></pre>\n\n<p>I want to get the package name and the corresponding extras={}\nfor each of them.</p>\n\n<p>For example:</p>\n\n<pre><code>pkg:com.android.systemui\nextras={\n  .....\n }\n</code></pre>\n\n<p>So far I've tried:</p>\n\n<pre><code>dumpsys notification | awk '/pkg=/,/\\n}/'\n</code></pre>\n\n<p>But without any success.</p>\n\n<p>I'm a newbie to awk,and if possible I want to do it with awk or perl.Of course,any other tool like sed or grep is fine by me too,I just wanna parse it somehow.\nCan anyone help me?</p>\n"}, {"tags": ["json", "perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1456790824, "post_id": 35712162, "comment_id": 59101205, "body": "<code>my $obj = decode_json($json); print &quot;$_-&gt;{id}\\n&quot; for @{$obj-&gt;{content}};</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1456791199, "post_id": 35712162, "comment_id": 59101359, "body": "In your first attempt, you&#39;re trying to treat a string as an array reference. That&#39;s not going to work (obviously). Your second attempt is closer, but now you&#39;re treating a hash reference as an array reference. You need to access the <code>content</code> key in the resultant hash reference and dereference <i>that</i> as an array reference."}], "answers": [{"tags": [], "owner": {"reputation": 1268, "user_id": 3270760, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8505accdc0bfdcc56690aa876c7e691b?s=128&d=identicon&r=PG&f=1", "display_name": "user3270760", "link": "https://stackoverflow.com/users/3270760/user3270760"}, "is_accepted": true, "score": 3, "last_activity_date": 1456790975, "creation_date": 1456790975, "answer_id": 35712327, "question_id": 35712162, "link": "https://stackoverflow.com/questions/35712162/convert-json-to-array-using-perl/35712327#35712327", "title": "Convert json to array using Perl", "body": "<p>Thank you to Matt Jacob:</p>\n\n<pre><code>my $deserialized = decode_json($resources); \nprint \"$_-&gt;{id}\\n\" for @{$deserialized-&gt;{content}};\n</code></pre>\n"}], "owner": {"reputation": 1268, "user_id": 3270760, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8505accdc0bfdcc56690aa876c7e691b?s=128&d=identicon&r=PG&f=1", "display_name": "user3270760", "link": "https://stackoverflow.com/users/3270760/user3270760"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1732, "favorite_count": 1, "accepted_answer_id": 35712327, "answer_count": 1, "score": 2, "last_activity_date": 1456790975, "creation_date": 1456790121, "question_id": 35712162, "link": "https://stackoverflow.com/questions/35712162/convert-json-to-array-using-perl", "title": "Convert json to array using Perl", "body": "<p>I have a chunk of json that has the following format:</p>\n\n<pre><code>{\"page\":{\"size\":7,\"number\":1,\"totalPages\":1,\"totalElements\":7,\"resultSetId\":null,\"duration\":0},\"content\":[{\"id\":\"787edc99-e94f-4132-b596-d04fc56596f9\",\"name\":\"Verification\",\"attributes\":{\"ruleExecutionClass\":\"VerificationRule\"},\"userTags\":[],\"links\":[{\"rel\":\"self\",\"href\":\"/endpoint/787edc99-e94f-4132-b596-d04fc56596f9\",\"id\":\"787edc99-e94f-...\n</code></pre>\n\n<p>Basically the size attribute (in this case) tells me that there are 7 parts to the content section. How do I convert this chunk of json to an array in Perl, and can I do it using the size attribute? Or is there a simpler way like just using decode_json()?</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>my $resources = get_that_json_chunk();  # function returns exactly the json you see, except all 7 resources in the content section\nmy @decoded_json = @$resources;\n\nforeach my $resource (@decoded_json) {\n</code></pre>\n\n<p>I've also tried something like this:</p>\n\n<pre><code>my $deserialize = from_json( $resources );\nmy @decoded_json = (@{$deserialize});\n</code></pre>\n\n<p>I want to iterate over the array and handle the data. I've tried a few different ways because I read a little about array refs, but I keep getting \"Not an ARRAY reference\" errors and \"Can't use string (\"{\"page\":{\"size\":7,\"number\":1,\"to\"...) as an ARRAY ref while \"strict refs\" in use\"</p>\n"}, {"tags": ["arrays", "perl", "hash", "data-dumper"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1456781274, "post_id": 35709891, "comment_id": 59096809, "body": "<code>$out-&gt;{data}[0]{a4}{b4}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 5999681, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fb80e00717636611840103533ae2ebb7?s=128&d=identicon&r=PG&f=1", "display_name": "lollan", "link": "https://stackoverflow.com/users/5999681/lollan"}, "edited": false, "score": 0, "creation_date": 1456838246, "post_id": 35711298, "comment_id": 59122494, "body": "Schwern, this is great help and answers my question.  Thank you!  If I may ask one further question, if I want to iterate through the hash multiple times and obtain value &#39;B4&#39; from multiple &#39;A4&#39; hashes, how would I do that?  The below works by statically defining a range of [0..8] but I would like for it to iterate through each hash and grab the &#39;B4&#39; output programatically.   \tfor my $slice (0..8) { \t\tmy $out = $out-&gt;{data}[$slice]{wwpn}; \t\tprint &quot; $out \\n&quot;; \t}"}, {"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 71, "user_id": 5999681, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fb80e00717636611840103533ae2ebb7?s=128&d=identicon&r=PG&f=1", "display_name": "lollan", "link": "https://stackoverflow.com/users/5999681/lollan"}, "edited": false, "score": 0, "creation_date": 1456858037, "post_id": 35711298, "comment_id": 59136566, "body": "@lollan That would be best handled by asking another Stack Overflow question."}, {"owner": {"reputation": 71, "user_id": 5999681, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fb80e00717636611840103533ae2ebb7?s=128&d=identicon&r=PG&f=1", "display_name": "lollan", "link": "https://stackoverflow.com/users/5999681/lollan"}, "edited": false, "score": 0, "creation_date": 1456869350, "post_id": 35711298, "comment_id": 59143085, "body": "Thanks again!  <a href=\"http://stackoverflow.com/questions/35734341/iterating-through-a-hash-of-hashes\" title=\"iterating through a hash of hashes\">stackoverflow.com/questions/35734341/&hellip;</a>"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1456786107, "creation_date": 1456786107, "answer_id": 35711298, "question_id": 35709891, "link": "https://stackoverflow.com/questions/35709891/obtaining-a-value-from-a-nested-hash-array-data-structure/35711298#35711298", "title": "Obtaining a value from a nested hash/array data structure", "body": "<p><code>$out</code> is not a hash, it is a hash reference.  If you're not sure about references in Perl, read the <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">Perl Reference Tutorial</a>.  References are dereferenced with <code>-&gt;</code>.  Instead of <code>$out{key}</code> it is <code>$out-&gt;{key}</code>.</p>\n\n<p>In your specific case you have a hash reference to a list to a hash with another hash.  Dealing with these is covered in the <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow\">Perl Data Structures Cookbook</a>.  Since <code>b4</code> is several layers down, you need to specify each layer.  <code>$out-&gt;{data}[0]{a4}{b4}</code>.</p>\n\n<hr>\n\n<p><code>$out{key}</code> is accessing the hash <code>%out</code>.  The sigil (ie. <code>$</code>, <code>@</code> and <code>%</code>) changes according to how the variable is being used, but <code>$out{key}</code> is still <code>%out</code>.</p>\n\n<p>Because <code>$out{key}</code> accesses a different variable, you should have gotten an error like <code>Global symbol \"%out\" requires explicit package name</code>.  Unfortunately, Perl doesn't do this by default, you have to turn it on with <code>use strict</code>.  This should be one of the first things at the top of your program.  <a href=\"https://stackoverflow.com/questions/8023959/why-use-strict-and-warnings\">You should really, really, really use strict and warnings</a>.  It will catch many frustrating mistakes like this one.</p>\n"}], "owner": {"reputation": 71, "user_id": 5999681, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fb80e00717636611840103533ae2ebb7?s=128&d=identicon&r=PG&f=1", "display_name": "lollan", "link": "https://stackoverflow.com/users/5999681/lollan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 35711298, "answer_count": 1, "score": 0, "last_activity_date": 1456786107, "creation_date": 1456780919, "question_id": 35709891, "link": "https://stackoverflow.com/questions/35709891/obtaining-a-value-from-a-nested-hash-array-data-structure", "title": "Obtaining a value from a nested hash/array data structure", "body": "<p>I am doing some API queries using Perl and using Data::Dumper to print the contents and hopefully assign several keys as variables.</p>\n\n<pre><code>   $client-&gt;request( \"GET\", \"interfaces/detail\", $opts );\n    my $out = decode_json $client-&gt;responseContent();\n    print Dumper $out;\n</code></pre>\n\n<p>However, I am unable to print a specific key's (b4) output or define it as a variable.  </p>\n\n<pre><code>print $out{'b4'};\n</code></pre>\n\n<p>I think that this is due to the nested data structure of HASH/ARRAY/HASH/HASH/Key=>Value in JSON format.</p>\n\n<pre><code>  DB&lt;1&gt; x $out\n0  HASH(0x493f290)\n   'data' =&gt; ARRAY(0x494e2e0)\n      0  HASH(0x4475160)\n         'a1' =&gt; '11'\n         'a2' =&gt; '12'\n         'a3' =&gt; '13'\n         'a4' =&gt; HASH(0x494e560)\n            'b1' =&gt; '21'\n            'b2' =&gt; 22\n            'b3' =&gt; '23'\n            'b4' =&gt; '24'\n            'b5' =&gt; '25'\n            'b6' =&gt; '26'\n            'b7' =&gt; '27'\n         'a5' =&gt; '14'\n</code></pre>\n\n<p>How can I obtain the value \"24\" from the referenced layout?</p>\n"}, {"tags": ["perl", "apache-kafka"], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1113981, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/15f4d01ef6b946e9edaeb67c19c72365?s=128&d=identicon&r=PG", "display_name": "Vibhuti", "link": "https://stackoverflow.com/users/1113981/vibhuti"}, "is_accepted": true, "score": 2, "last_activity_date": 1458074247, "creation_date": 1458074247, "answer_id": 36021607, "question_id": 35709825, "link": "https://stackoverflow.com/questions/35709825/perl-kafkaproducer-kafkaexceptionproducer-code-1000-message-i/36021607#36021607", "title": "perl Kafka::Producer, &quot;Kafka::Exception::Producer&quot;, &quot;code&quot;, -1000, &quot;message&quot;, &quot;Invalid argument", "body": "<p>I was able to solve by wrapping my string with utf8::downgrade. Somehow it was taking my string as utf-8, and kafka producer, had check for need non utf-8 string.</p>\n\n<p>My working code:</p>\n\n<pre><code> my $arcs_val = join( ',', @arc_a );\n        my $hadoop_str = $testid . ',' . $gcda_file_name . ',' . $arcs_val;\n        utf8::downgrade($hadoop_str);\n         try {\n                my $topic = $inputs[0];\n                my $partition = $inputs[1];\n                my $response = $producer-&gt;send(\n                    $topic,                      # topic\n                    $partition,                  # partition\n                    $hadoop_str\n               );\n</code></pre>\n"}], "owner": {"reputation": 1342, "user_id": 1113981, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/15f4d01ef6b946e9edaeb67c19c72365?s=128&d=identicon&r=PG", "display_name": "Vibhuti", "link": "https://stackoverflow.com/users/1113981/vibhuti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "accepted_answer_id": 36021607, "answer_count": 1, "score": 2, "last_activity_date": 1458074247, "creation_date": 1456780652, "last_edit_date": 1456782973, "question_id": 35709825, "link": "https://stackoverflow.com/questions/35709825/perl-kafkaproducer-kafkaexceptionproducer-code-1000-message-i", "title": "perl Kafka::Producer, &quot;Kafka::Exception::Producer&quot;, &quot;code&quot;, -1000, &quot;message&quot;, &quot;Invalid argument", "body": "<p>I wrote kafka producer using kafka perl api, But i am getting error when i am passing variable for sending message while if i am hardcoding the message data it's not giving any error.</p>\n\n<p>Perl program, where i added kafka producer code:</p>\n\n<pre><code>try {\n    $kafka_connection = Kafka::Connection-&gt;new( host =&gt; $hadoop_server, port =&gt; '6667' );\n    $producer = Kafka::Producer-&gt;new( Connection =&gt; $kafka_connection );\n    my $topic = 'test1';\n    my $partition = 0;\n    my $message = $hadoop_str;\n    my $response = $producer-&gt;send(\n        $topic,             # topic\n        $partition,                  # partition\n        #\"56b4b2b23c24c3608376d1ea,/obj/i386/ui/lib/access/daemon_map.So.gcda,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0\"         # message\n        $hadoop_str\n        #\"t1,f9,1,1,1\"\n    );\n} catch {\n    my $error = $_;\n    if ( blessed( $error ) &amp;&amp; $error-&gt;isa( 'Kafka::Exception' ) ) {\n        warn 'Error: (', $error-&gt;code, ') ',  $error-&gt;message, \"\\n\";\n        exit;\n    } else {\n        die $error;\n    }\n};\n#                CCLib::run_system_cmd( $cmd );\n}\n</code></pre>\n\n<p>Error Log:</p>\n\n<pre><code>-bash-3.2$ ./stream_binary_hadoop.pl\nprint (...) interpreted as function at ./stream_binary_hadoop.pl line 429.\n&lt;UNKNOWN&gt; &lt;UNKNOWN&gt; Invalid argument: message = 56b4b2b23c24c3608376d1ea,/obj/i386/junos/usr.sbin/lmpd/lmpd_repl_msg_idr.gcda,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Exception/Class/Base.pm line 85.\nException::Class::Base::throw(\"Kafka::Exception::Producer\", \"code\", -1000, \"message\", \"Invalid argument: message = 56b4b2b23c24c3608376d1ea,/obj/i38\"...) called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Kafka/Producer.pm line 374\nKafka::Producer::_error(Kafka::Producer=HASH(0x36955f8), -1000, \"message = 56b4b2b23c24c3608376d1ea,/obj/i386/junos/usr.sbin/l\"...) called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Kafka/Producer.pm line 331\nKafka::Producer::send(Kafka::Producer=HASH(0x36955f8), \"test1\", 0, \"56b4b2b23c24c3608376d1ea,/obj/i386/junos/usr.sbin/lmpd/lmpd_r\"...) called at ./stream_binary_hadoop.pl line 175\nmain::try {...} () called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Try/Tiny.pm line 81\neval {...} called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Try/Tiny.pm line 72\nTry::Tiny::try(CODE(0x3692888), Try::Tiny::Catch=REF(0x3692c78)) called at ./stream_binary_hadoop.pl line 190\nmain::stream(HASH(0x3692708)) called at ./stream_binary_hadoop.pl line 354\nmain::file_split(HASH(0x36927b0)) called at ./stream_binary_hadoop.pl line 413\n\nat ./stream_binary_hadoop.pl line 188.\n   main::catch {...} (\"&lt;UNKNOWN&gt; Invalid argument: message = 56b4b2b23c24c3608376d1e\"...) called at /opt/adp/projects/code_coverage/perl//5.10/lib/site_perl/5.10.1/Try/Tiny.pm line 104\n   Try::Tiny::try(CODE(0x3692888), Try::Tiny::Catch=REF(0x3692c78)) called at ./stream_binary_hadoop.pl line 190\n   main::stream(HASH(0x3692708)) called at ./stream_binary_hadoop.pl line 354\n   main::file_split(HASH(0x36927b0)) called at ./stream_binary_hadoop.pl line 413\n</code></pre>\n"}, {"tags": ["perl", "int"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1456779090, "post_id": 35709315, "comment_id": 59095511, "body": "<a href=\"http://www.perlmonks.org/?node=How%20do%20I%20determine%20whether%20a%20scalar%20is%20a%20number%2Fwhole%2Finteger%2Ffloat%3F\" rel=\"nofollow noreferrer\">perlmonks.org/&hellip;</a>"}, {"owner": {"reputation": 1169, "user_id": 1112547, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HgeC8.gif?s=128&g=1", "display_name": "vmeln", "link": "https://stackoverflow.com/users/1112547/vmeln"}, "edited": false, "score": 0, "creation_date": 1456779204, "post_id": 35709315, "comment_id": 59095587, "body": "Use modulo operator <a href=\"http://perldoc.perl.org/perlop.html#Multiplicative-Operators\" rel=\"nofollow noreferrer\">described here</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1456779278, "post_id": 35709315, "comment_id": 59095628, "body": "You mean like... <code>$ perl -e &#39;print 2016 % 4&#39;</code>?"}, {"owner": {"reputation": 101, "user_id": 4081154, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yYBc8fROXeI/AAAAAAAAAAI/AAAAAAAAACo/Y6RUcXS7pBY/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/4081154/richard-jones"}, "edited": false, "score": 0, "creation_date": 1456779317, "post_id": 35709315, "comment_id": 59095649, "body": "no, in a perl Script..."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1456779317, "post_id": 35709315, "comment_id": 59095650, "body": "<code>print &quot;Not evenly divisible.\\n&quot; if $dividend % $divisor;</code>"}, {"owner": {"reputation": 101, "user_id": 4081154, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yYBc8fROXeI/AAAAAAAAAAI/AAAAAAAAACo/Y6RUcXS7pBY/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/4081154/richard-jones"}, "edited": false, "score": 0, "creation_date": 1456779418, "post_id": 35709315, "comment_id": 59095702, "body": "so if I go: $_str1 = 2016; $_str2 = $_str1 / 4; print &quot;Not Even\\n&quot; if $_str1 % 4; that works?"}, {"owner": {"reputation": 101, "user_id": 4081154, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yYBc8fROXeI/AAAAAAAAAAI/AAAAAAAAACo/Y6RUcXS7pBY/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/4081154/richard-jones"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456779449, "post_id": 35709315, "comment_id": 59095720, "body": "@MattJacob - correct in a perl script. sorry, I did not make that clear. My bad."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 1, "creation_date": 1456779480, "post_id": 35709315, "comment_id": 59095742, "body": "The modulo operator returns the &quot;remainder&quot; of a dividend divided by a divisor. In elementary school we learned that a remainder only exists if the dividend is not evenly divisible by the divisor. You are asking exactly that; is there a way to detect if a dividend is not evenly divisible by a divisor.  Oh, and MattJacob did provide @Richard Jones with a Perl script. The part after the -e, between the &#39; and &#39; is a Perl script."}, {"owner": {"reputation": 101, "user_id": 4081154, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yYBc8fROXeI/AAAAAAAAAAI/AAAAAAAAACo/Y6RUcXS7pBY/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/4081154/richard-jones"}, "reply_to_user": {"reputation": 52821, "user_id": 632407, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AfGWW.jpg?s=128&g=1", "display_name": "jm666", "link": "https://stackoverflow.com/users/632407/jm666"}, "edited": false, "score": 0, "creation_date": 1456779542, "post_id": 35709315, "comment_id": 59095782, "body": "@jm666 I&#39;m using it in my Perl script."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 5, "creation_date": 1456784542, "post_id": 35709315, "comment_id": 59098542, "body": "Re. your edit: you should really use a date-time library for this. For example, the core module <a href=\"https://metacpan.org/pod/Time::Piece\" rel=\"nofollow noreferrer\">Time::Piece</a> has the methods <code>is_leap_year</code> and <code>month_last_day</code>. Writing your own date-time logic is error-prone: your current solution <a href=\"https://en.wikipedia.org/wiki/Leap_year#Gregorian_calendar\" rel=\"nofollow noreferrer\">incorrectly</a> says that the year 2100 is a leap year."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1456787254, "post_id": 35709315, "comment_id": 59099859, "body": "The rule is that a year is a leap year if it is divisible by 4, <i>unless</i> it is a century, when it is a leap year only if It is divisible by 400. So 2000 was a leap year, but 1900 was not."}], "answers": [{"tags": [], "owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "is_accepted": true, "score": 2, "last_activity_date": 1456804360, "last_edit_date": 1456804360, "creation_date": 1456779952, "answer_id": 35709636, "question_id": 35709315, "link": "https://stackoverflow.com/questions/35709315/how-to-check-if-a-number-is-whole-number-or-contains-a-decimal/35709636#35709636", "title": "how to check if a number is whole number or contains a decimal", "body": "<p>If you want to know if the result of dividing a <code>$dividend</code> by a <code>$divisor</code> is going to be a whole number or a number with a fractional portion, you can test that condition first:</p>\n\n<pre><code>if (my $remainder = $dividend % $divisor) {\n    print \"$dividend cannot be divided evenly by $divisor.\",\n          \" There is a remainder of $remainder.\\n\";\n}\nelse {\n    print \"$dividend is evenly divisible by $divisor,\",\n          \" and the result is \", $divident / $divisor, \"\\n\";\n}\n</code></pre>\n\n<p>*EDIT: * This answer was posted in response to the original, un-edited question, which asked how to determine if the result of division contains a decimal portion.  Now that the sense of the question changed toward date math, I agree that a DateTime solution is much better.</p>\n"}], "owner": {"reputation": 101, "user_id": 4081154, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-yYBc8fROXeI/AAAAAAAAAAI/AAAAAAAAACo/Y6RUcXS7pBY/photo.jpg?sz=128", "display_name": "Richard Jones", "link": "https://stackoverflow.com/users/4081154/richard-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 0, "accepted_answer_id": 35709636, "answer_count": 1, "score": -6, "last_activity_date": 1456804360, "creation_date": 1456778869, "last_edit_date": 1456783875, "question_id": 35709315, "link": "https://stackoverflow.com/questions/35709315/how-to-check-if-a-number-is-whole-number-or-contains-a-decimal", "title": "how to check if a number is whole number or contains a decimal", "body": "<p>If a number is <code>2017</code> and I divide it by <code>4</code>, I get <code>504.25</code>.</p>\n\n<p>if the number is <code>2016</code> an I divide it by <code>4</code>, I get <code>504</code>.</p>\n\n<p>My question is, is there a way to use perl to check if a number that was divided, if the answer is a whole number and has <code>NO</code> decimal at all?</p>\n\n<p>UPDATE: I got it working from the answer I selected below. I was trying to check if this is leap year, because today my code broke, because my code ran from the cron job as set to run on the last day of every month. Typically for feb, that is the 28th, so it ran on the 28th and shut the website done for the end of month maintenance. so what I have it do now is run on both Feb 28th and Feb 29th (For if there is a 29th) and in the code, I have it check if it is leap year now like this:</p>\n\n<pre><code>my $_leapNum = 4; # Leap year is always divisible by 4 with no remainder...\nmy $_NotLeapRemain = $_lTimeYYYY % $_leapNum; # I have $_lTimeYYYY built for the year only - longyear\n\nif($_NotLeapRemain) {\n    my $_isLeapYear = 0;\n} else {\n    my $_isLeapYear = 1;\n}\n</code></pre>\n\n<p>Then later I check if it is leap year. If it is, then I check if the day is 28th, if it is, then it just exits. If it is the 29th, then it does what it was intended to do.</p>\n\n<p>I tested it and it works perfectly now.</p>\n\n<p>Thank you for your help.\n-Rich</p>\n"}, {"tags": ["linux", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 4, "creation_date": 1456767449, "post_id": 35705807, "comment_id": 59088374, "body": "Your <code>while</code> loop won&#39;t do anything because you read the contents of <code>$infile</code> into <code>@lines</code> and don&#39;t rewind to the beginning of the file. Is that your question?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1456770107, "post_id": 35705807, "comment_id": 59090036, "body": "Did you just copy and paste bits of code you found in different places? Do you understand what&#39;s actually going on?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456770171, "post_id": 35705807, "comment_id": 59090070, "body": "Please also indent your code properly. It&#39;s important for you to be able to more easily read what you have written, but only good manners if you&#39;re asking for help with it from others"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1456772005, "last_edit_date": 1456772005, "creation_date": 1456770710, "answer_id": 35706907, "question_id": 35705807, "link": "https://stackoverflow.com/questions/35705807/perl-how-to-add-users-from-a-txt-file-in-linux/35706907#35706907", "title": "Perl: How to add users from a .txt file in Linux", "body": "<p>You are a long way from having your code working, and you seem to be guessing what you should write. That's not a good way to learn to code well</p>\n\n<p>This will <code>print</code> each command to STDOUT. I hope you're able to alter it so that the commands are executed instead of being printed?</p>\n\n<pre class=\"lang-bash prettyprint-override\"><code>perl -aF, -lne 'print \"useradd -m $F[0] -g $F[1]\"' users.txt\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>useradd -m ac -g Chester Arthur\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5861428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f71b687c8e63cba479970119d078d387?s=128&d=identicon&r=PG&f=1", "display_name": "emoprincess", "link": "https://stackoverflow.com/users/5861428/emoprincess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1456772005, "creation_date": 1456767281, "question_id": 35705807, "link": "https://stackoverflow.com/questions/35705807/perl-how-to-add-users-from-a-txt-file-in-linux", "title": "Perl: How to add users from a .txt file in Linux", "body": "<p>I am making a perl program that take names and usernames from a .txt file and add them as users in Linux.</p>\n\n<p>ex of the .txt file formate</p>\n\n<blockquote>\n  <p>ac,Chester Arthur</p>\n</blockquote>\n\n<p>This is the code I have written.</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nif (@ARGV != 2) {\nexit;\n};\n\nmy $infile = $ARGV[0];\n\n\nopen (FHIN, $infile) or die \"Can't open input file.\";\nchomp (my @lines = &lt;FHIN&gt;);\nmy %users;\n\nwhile (my $line = &lt;FHIN&gt;)\n{\nnext if $line =~ /^[A-Z]/g;\nchomp($line);\nmy ($username, $fullname)\n    = split /\\,/, $line;\n$users{$username} = $fullname;\n}\n\nclose(FHIN);\n\nforeach $username(key %users)\n{\n    system(\"useradd -m $username -g groupname\");\n}\n\nmy $errorfile = $ARGV[1];\n\nopen(STDERR, '&gt;', '$errorfile') or die \"Can't open log\";\n</code></pre>\n"}, {"tags": ["python", "perl", "rest", "post", "http-status-code-405"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 3, "creation_date": 1456762669, "post_id": 35704284, "comment_id": 59085269, "body": "You&#39;ll need to <a href=\"https://stackoverflow.com/posts/35704284/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> if you expect to receive any useful answers."}, {"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 3, "creation_date": 1456762778, "post_id": 35704284, "comment_id": 59085352, "body": "If you are able to get a successful result from one client, and fail with another, I would look at the clients, not the server. Fire up wireshark and watch the traffic from both clients, and look for the discrepancy."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1456763785, "post_id": 35704284, "comment_id": 59086036, "body": "As a side note, you should <code>use strict; use warnings &#39;all&#39;;</code> in every Perl script you write."}, {"owner": {"reputation": 21, "user_id": 5920377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ba303353dbc9b654d7b2d9289c26c1?s=128&d=identicon&r=PG&f=1", "display_name": "LittlePig", "link": "https://stackoverflow.com/users/5920377/littlepig"}, "reply_to_user": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1456764117, "post_id": 35704284, "comment_id": 59086262, "body": "@PaulMcGuire thanks will try it out"}, {"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 0, "creation_date": 1456769192, "post_id": 35704284, "comment_id": 59089477, "body": "<code>encode_json</code> is almost certainly not what you want there. The endpoint is probably expecting the parameters to be URL encoded (e.g. <code>a=1&amp;b=2</code>)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 2, "creation_date": 1456774971, "post_id": 35704284, "comment_id": 59093026, "body": "Okay, I <i>think</i> I see the issue. (REST::Client actually uses LWP::UserAgent behind the scenes, so your latest edit helped narrow things down a lot.) REST::Client is calling <a href=\"https://metacpan.org/pod/LWP::UserAgent#ua-simple_request-request\" rel=\"nofollow noreferrer\"><code>$ua-&gt;simple_request</code></a> instead of <code>$ua-&gt;request</code>: &quot;The difference from <code>request()</code> is that <code>simple_request()</code> will not try to handle redirects or authentication responses.&quot; I&#39;m guessing authentication is getting in the way. I think this is a bug in REST::Client. Voted to reopen your question."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 0, "last_activity_date": 1456874307, "creation_date": 1456874307, "answer_id": 35735574, "question_id": 35704284, "link": "https://stackoverflow.com/questions/35704284/why-do-i-get-405-method-not-allowed-when-i-send-a-post-request-with-perls-re/35735574#35735574", "title": "Why do I get &quot;405: Method Not Allowed&quot; when I send a POST request with Perl&#39;s REST::Client, but not with Perl&#39;s LWP::UserAgent or Python?", "body": "<p>Your REST::Client code and your LWP::UserAgent code generate nearly identical requests.* However, REST::Client, which uses LWP::UserAgent under the hood, sends the request with <code>$ua-&gt;simple_request()</code>, while your LWP::UserAgent code uses <code>$ua-&gt;request()</code>.</p>\n\n<p>According to the <a href=\"https://metacpan.org/pod/LWP::UserAgent#ua-simple_request-request\" rel=\"nofollow\">documentation</a>:</p>\n\n<blockquote>\n  <p>The difference from <code>request()</code> is that <code>simple_request()</code> will not try to handle redirects or authentication responses.</p>\n</blockquote>\n\n<p>I'm guessing authentication is causing the issue. I'm also guessing that the API you're using doesn't require authentication for GET requests, since you said those are working with REST::Client.</p>\n\n<hr>\n\n<p>To fix, set the <a href=\"https://metacpan.org/pod/REST::Client#follow\" rel=\"nofollow\"><code>follow</code></a> option to <code>1</code> in the constructor:</p>\n\n<pre><code>my $client = REST::Client-&gt;new(follow =&gt; 1);\n</code></pre>\n\n<p>or call the <code>setFollow</code> method:</p>\n\n<pre><code>my $client = REST::Client-&gt;new();\n$client-&gt;setFollow(1);\n</code></pre>\n\n<p>This will handle authentication responses properly, but it will also follow redirects. Unfortunately, you can't set the behavior for redirects and authentication independently, which is a <a href=\"https://rt.cpan.org/Public/Bug/Display.html?id=65804\" rel=\"nofollow\">long-standing bug</a>.</p>\n\n<hr>\n\n<p>* The only difference is that REST::Client adds a <code>Content-length</code> header, which I don't think matters.</p>\n\n<p>Dump of REST::Client request before sending:</p>\n\n<pre><code>$VAR1 = bless( { \n                 '_content' =&gt; '{\"sid\":\"001\",\"pid\":\"c7b3d83\",\"file\":[{\"location\":\"folderA\",\"name\":\"file1.txt\"},{\"location\":\"folderB\",\"name\":\"file2.txt\"}]}',\n                 '_uri' =&gt; bless( do{\\(my $o = 'http://www.example.com')}, 'URI::http' ),\n                 '_headers' =&gt; bless( { \n                                        'auth' =&gt; '04211b77df',\n                                        'content-type' =&gt; 'application/json',\n                                        'accept' =&gt; 'application/json',\n                                        'content-length' =&gt; 122,\n                                        '::std_case' =&gt; { \n                                                          'auth' =&gt; 'Auth'\n                                                        }\n                                      }, 'HTTP::Headers' ),\n                 '_method' =&gt; 'POST'\n               }, 'HTTP::Request' );\n</code></pre>\n\n<p>Dump of LWP::UserAgent request before sending:</p>\n\n<pre><code>$VAR1 = bless( { \n                 '_content' =&gt; '{\"sid\":\"001\",\"pid\":\"c7b3d83\",\"file\":[{\"location\":\"folderA\",\"name\":\"file1.txt\"},{\"location\":\"folderB\",\"name\":\"file2.txt\"}]}',\n                 '_uri' =&gt; bless( do{\\(my $o = 'http://www.example.com')}, 'URI::http' ),\n                 '_headers' =&gt; bless( { \n                                        'auth' =&gt; '04211b77df',\n                                        'content-type' =&gt; 'application/json',\n                                        'accept' =&gt; 'application/json',\n                                        '::std_case' =&gt; { \n                                                          'auth' =&gt; 'Auth'\n                                                        }\n                                      }, 'HTTP::Headers' ),\n                 '_method' =&gt; 'POST'\n               }, 'HTTP::Request' );\n</code></pre>\n\n<p>There will be other minor differences when the requests are actually sent, like the user-agent string, but I don't think they're related to your problem.</p>\n"}], "owner": {"reputation": 21, "user_id": 5920377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75ba303353dbc9b654d7b2d9289c26c1?s=128&d=identicon&r=PG&f=1", "display_name": "LittlePig", "link": "https://stackoverflow.com/users/5920377/littlepig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2128, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1456874307, "creation_date": 1456762543, "last_edit_date": 1456776698, "question_id": 35704284, "link": "https://stackoverflow.com/questions/35704284/why-do-i-get-405-method-not-allowed-when-i-send-a-post-request-with-perls-re", "title": "Why do I get &quot;405: Method Not Allowed&quot; when I send a POST request with Perl&#39;s REST::Client, but not with Perl&#39;s LWP::UserAgent or Python?", "body": "<p>When I send a POST request with Perl's <a href=\"https://metacpan.org/pod/REST::Client\" rel=\"nofollow\"><code>REST::Client</code></a>, I get the following response:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>405: Method Not Allowed\n</code></pre>\n\n<p>However, when I send a POST request to the same URL with Perl's <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow\"><code>LWP::UserAgent</code></a> or Python's <code>Requests</code>, I get a \"success\" response. GET requests work with both <code>REST::Client</code> and Python.</p>\n\n<p>How can I fix this?</p>\n\n<hr>\n\n<p>Here's the code that uses <code>REST::Client</code> (returns HTTP 405):</p>\n\n<pre><code>use REST::Client;\nuse JSON;\n$header = {\n    'Auth' =&gt; '04211b77df',\n    'Accept' =&gt; 'application/json',\n    'Content-type' =&gt; 'application/json'\n};\n\n%body = (\n    'sid' =&gt; '001',\n    'pid' =&gt; 'c7b3d83',\n    'file' =&gt; [\n        {\n            'name' =&gt; 'file1.txt',\n            'location' =&gt; 'folderA'\n        },\n        {\n            'name' =&gt; 'file2.txt',\n            'location' =&gt; 'folderB'\n        }\n    ]\n);\n\n$client = REST::Client-&gt;new();\n$client-&gt;POST('URL', encode_json(\\%body), $header);\n</code></pre>\n\n<p>Here's the code that uses <code>LWP::UserAgent</code> (returns HTTP 200):</p>\n\n<pre><code>#!/use/bin/perl -w\nuse strict;\nuse LWP::UserAgent;\nuse Data::Dumper;\nuse JSON;\n\nmy $ua = LWP::UserAgent-&gt;new; \nmy $req = HTTP::Request-&gt;new(POST =&gt; 'URL');\n\n$req-&gt;header('Auth' =&gt; '04211b77df');\n$req-&gt;header('Content-type' =&gt; 'application/json');\n$req-&gt;header('Accept' =&gt; 'application/json');\n\nmy %body = (\n    'sid' =&gt; '001',\n    'pid' =&gt; 'c7b3d83',\n    'file' =&gt; [\n        {\n            'name' =&gt; 'file1.txt',\n            'location' =&gt; 'folderA'\n        },\n        {\n            'name' =&gt; 'file2.txt',\n            'location' =&gt; 'folderB'\n        }\n    ]\n);\n$req-&gt;content(encode_json(\\%body));\n$ua-&gt;request($req);\n</code></pre>\n\n<p>Here's the Python code (returns HTTP 200):</p>\n\n<pre><code>import requests, json, sys\nheaders = {\n    'Auth': '04211b77df'\n    'Accept': 'application/json'\n    'Content-type': 'application/json'\n}\ndata={\n    'sid': '001',\n    'pid': 'c7b3d83',\n    'file': [\n        {\n            'name': 'file1.txt',\n            'location': 'folderA'\n        },\n        {\n            'name': 'file2.txt',\n            'location': 'folderB'\n        }\n    ]\n}\n\nrequests.request('POST', 'URL', data=data, headers=headers)\n</code></pre>\n"}, {"tags": ["regex", "xml", "perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1456762062, "post_id": 35704029, "comment_id": 59084813, "body": "What are you trying to get of this?"}, {"owner": {"reputation": 451, "user_id": 4731782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4d21d08a6606c69444eb2af67e6d1885?s=128&d=identicon&r=PG&f=1", "display_name": "EmmetOT", "link": "https://stackoverflow.com/users/4731782/emmetot"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456762234, "post_id": 35704029, "comment_id": 59084948, "body": "@Sobrique I believe I give an example in my question - I need a list where each element is a list containing, in the first index, the sentence, and the other indices being the sentiment polarity of each corresponding term. (Or a similar structure)"}], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 4, "last_activity_date": 1456763913, "last_edit_date": 1495541296, "creation_date": 1456762368, "answer_id": 35704219, "question_id": 35704029, "link": "https://stackoverflow.com/questions/35704029/regular-expression-to-match-any-number-of-tags-in-an-xml-style-document/35704219#35704219", "title": "Regular expression to match any number of tags in an XML style document", "body": "<ul>\n<li><a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags\">Don't use regex to parse XML.</a></li>\n<li><a href=\"https://stackoverflow.com/questions/33267765/why-is-xmlsimple-discouraged\">Don't use XML::Simple to parse XML</a></li>\n</ul>\n\n<p>Use a parser.  By doing so you get access to <code>xpath</code> which is quite a lot like <code>regex</code> but \"context aware\" - it understands the structure of <code>XML</code> which means a lot of the problems that regex can cause, just go away again.</p>\n\n<p>Something like this (I'll leave formatting details to one side - but your above looks like you could output a <code>JSON</code> arrray and get the desired result) </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse XML::Twig;\n\nmy $twig = XML::Twig -&gt; parse ( \\*DATA );\n\nforeach my $sentence ( $twig -&gt; get_xpath('//sentence') ) {\n    print \"Text:\", $sentence -&gt; text,\"\\n\";\n    print \"Polarities:\", join( \",\", map { $_ -&gt; att('polarity')} $sentence -&gt; get_xpath('.//aspectTerm/')),\"\\n\";\n}\n\n__DATA__\n&lt;xml&gt;\n&lt;sentence id=\"2339\"&gt;\n    &lt;text&gt;I charge it at night and skip taking the cord with me because of the good battery life.&lt;/text&gt;\n    &lt;aspectTerms&gt;\n        &lt;aspectTerm term=\"cord\" polarity=\"neutral\" from=\"41\" to=\"45\"/&gt;\n        &lt;aspectTerm term=\"battery life\" polarity=\"positive\" from=\"74\" to=\"86\"/&gt;\n    &lt;/aspectTerms&gt;\n&lt;/sentence&gt;\n&lt;sentence id=\"812\"&gt;\n    &lt;text&gt;I bought a HP Pavilion DV4-1222nr laptop and have had so many problems with the computer.&lt;/text&gt;\n&lt;/sentence&gt;\n&lt;sentence id=\"1316\"&gt;\n    &lt;text&gt;The tech guy then said the service center does not do 1-to-1 exchange and I have to direct my concern to the \"sales\" team, which is the retail shop which I bought my netbook from.&lt;/text&gt;\n    &lt;aspectTerms&gt;\n        &lt;aspectTerm term=\"service center\" polarity=\"negative\" from=\"27\" to=\"41\"/&gt;\n        &lt;aspectTerm term=\"&amp;quot;sales&amp;quot; team\" polarity=\"negative\" from=\"109\" to=\"121\"/&gt;\n        &lt;aspectTerm term=\"tech guy\" polarity=\"neutral\" from=\"4\" to=\"12\"/&gt;\n    &lt;/aspectTerms&gt;\n&lt;/sentence&gt;\n&lt;/xml&gt;\n</code></pre>\n\n<p>This prints:</p>\n\n<pre><code>Text:I charge it at night and skip taking the cord with me because of the good battery life.\nPolarities:neutral,positive\nText:I bought a HP Pavilion DV4-1222nr laptop and have had so many problems with the computer.\nPolarities:\nText:The tech guy then said the service center does not do 1-to-1 exchange and I have to direct my concern to the \"sales\" team, which is the retail shop which I bought my netbook from.\nPolarities:negative,negative,neutral\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467889879, "last_edit_date": 1467889879, "creation_date": 1456763012, "answer_id": 35704459, "question_id": 35704029, "link": "https://stackoverflow.com/questions/35704029/regular-expression-to-match-any-number-of-tags-in-an-xml-style-document/35704459#35704459", "title": "Regular expression to match any number of tags in an XML style document", "body": "<p>In general it's impossible to parse XML properly using regular expressions, unless the data is very well-behaved, consistent, and uses a simple subset of the XML specification. It's always far better to use a purpose-built XML parser module, such as <a href=\"http://metacpan.org/module/XML::Twig\" rel=\"nofollow\"><code>XML::Twig</code></a> or <a href=\"http://metacpan.org/module/XML::LibXML\" rel=\"nofollow\"><code>XML::LibXML</code></a>. The resulting programs are usually much simpler to read, and especially so once you get used to the <a href=\"https://www.w3.org/TR/DOM-Level-3-Core/core.html\" rel=\"nofollow\">XML DOM specification</a></p>\n\n<p>LibXML has bindings libraries for many languages including Ruby, Python, and PHP as well as Perl, so it is very widely supported</p>\n\n<p>You don't say how your XML data is wrapped. An XML document may have only a single root node, so I've imagined that it's enclosed in <code>&lt;root&gt; ... &lt;/root&gt;</code> tags</p>\n\n<p>This program uses <code>XML::LibXML</code> to process your data and generate the structure that I think you want. It expects the path to the input XML file as a parameter on the command line</p>\n\n<p>I've used <a href=\"http://metacpan.org/module/Data::Dump\" rel=\"nofollow\"><code>Data::Dump</code></a> to display the final contents of <code>@data</code> which corresponds with the expected output in your question</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse XML::LibXML;\n\nmy $dom = XML::LibXML-&gt;load_xml(location =&gt; shift);\n\nmy @data;\n\nfor my $sentence ( $dom-&gt;findnodes('/root/sentence') ) {\n\n    push @data, [\n        $sentence-&gt;findvalue('text'),\n        map $_-&gt;getValue, $sentence-&gt;findnodes('aspectTerms/aspectTerm/@polarity')\n    ];\n}\n\nuse Data::Dump;\ndd \\@data;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[\n  [\n    \"I charge it at night and skip taking the cord with me because of the good battery life.\",\n    \"neutral\",\n    \"positive\",\n  ],\n  [\n    \"I bought a HP Pavilion DV4-1222nr laptop and have had so many problems with the computer.\",\n  ],\n  [\n    \"The tech guy then said the service center does not do 1-to-1 exchange and I have to direct my concern to the \\\"sales\\\" team, which is the retail shop which I bought my netbook from.\",\n    \"negative\",\n    \"negative\",\n    \"neutral\",\n  ],\n]\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 4731782, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4d21d08a6606c69444eb2af67e6d1885?s=128&d=identicon&r=PG&f=1", "display_name": "EmmetOT", "link": "https://stackoverflow.com/users/4731782/emmetot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 35704219, "answer_count": 2, "score": -2, "last_activity_date": 1467889879, "creation_date": 1456761766, "last_edit_date": 1456763991, "question_id": 35704029, "link": "https://stackoverflow.com/questions/35704029/regular-expression-to-match-any-number-of-tags-in-an-xml-style-document", "title": "Regular expression to match any number of tags in an XML style document", "body": "<p>I have an XML style document which looks like this:</p>\n\n<pre><code>&lt;sentence id=\"2339\"&gt;\n    &lt;text&gt;I charge it at night and skip taking the cord with me because of the good battery life.&lt;/text&gt;\n    &lt;aspectTerms&gt;\n        &lt;aspectTerm term=\"cord\" polarity=\"neutral\" from=\"41\" to=\"45\"/&gt;\n        &lt;aspectTerm term=\"battery life\" polarity=\"positive\" from=\"74\" to=\"86\"/&gt;\n    &lt;/aspectTerms&gt;\n&lt;/sentence&gt;\n&lt;sentence id=\"812\"&gt;\n    &lt;text&gt;I bought a HP Pavilion DV4-1222nr laptop and have had so many problems with the computer.&lt;/text&gt;\n&lt;/sentence&gt;\n&lt;sentence id=\"1316\"&gt;\n    &lt;text&gt;The tech guy then said the service center does not do 1-to-1 exchange and I have to direct my concern to the \"sales\" team, which is the retail shop which I bought my netbook from.&lt;/text&gt;\n    &lt;aspectTerms&gt;\n        &lt;aspectTerm term=\"service center\" polarity=\"negative\" from=\"27\" to=\"41\"/&gt;\n        &lt;aspectTerm term=\"&amp;quot;sales&amp;quot; team\" polarity=\"negative\" from=\"109\" to=\"121\"/&gt;\n        &lt;aspectTerm term=\"tech guy\" polarity=\"neutral\" from=\"4\" to=\"12\"/&gt;\n    &lt;/aspectTerms&gt;\n&lt;/sentence&gt;\n</code></pre>\n\n<p>I want a regular expression which matches 1. the sentence and 2. the polarities of any aspect terms corresponding to the sentence. In other words, a list like this:</p>\n\n<pre><code>[\n    [\n        \"I charge it at night and skip taking the cord with me because of the good battery life.\",\n        \"neutral\",\n        \"positive\"\n    ],\n    [\n        \"I bought a HP Pavilion DV4-1222nr laptop and have had so many problems with the computer.\"\n    ], \n    [\n        \"The tech guy then said the service center does not do 1-to-1 exchange and I have to direct my concern to the \"sales\" team, which is the retail shop which I bought my netbook from.\",\n        \"negative\",\n        \"negative\",\n        \"neutral\"\n    ]\n]\n</code></pre>\n\n<p>My problem is that I can only match the last polarity for each sentence's set of aspect terms. I get that this has something to do with repeating my capture group, but no combination of symbols has worked for me so far.</p>\n\n<p>Here is my current regex:</p>\n\n<pre><code>/&lt;sentence .*?&gt;.*?&lt;text&gt;(.+?)&lt;\\/text&gt;.*?(?:&lt;aspectTerm.*?polarity=\"(.+?)\".*?)*?&lt;\\/sentence&gt;/gs\n</code></pre>\n\n<p>(I am using this regex in perl.)</p>\n"}, {"tags": ["ruby", "regex", "perl", "language-comparisons"], "comments": [{"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1456757875, "post_id": 35702575, "comment_id": 59081692, "body": "You can use named matches with gsub, so you don&#39;t have to rely on <code>$1</code> and <code>$2</code>. Pass them down to the block as you would any other block arguments."}], "answers": [{"comments": [{"owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "edited": false, "score": 0, "creation_date": 1456759406, "post_id": 35702910, "comment_id": 59082862, "body": "Thanks, I&#39;ve ended up doing the latter, but I infer from your response that there isn&#39;t a gsub that provides the match object as its parameter?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "edited": false, "score": 0, "creation_date": 1456759797, "post_id": 35702910, "comment_id": 59083172, "body": "There is not, unfortunately. Or, one might think it is by design, since you always have an access to global <a href=\"http://rocket-science.ru/tips/2013/02/26/ruby-predefined-globals/#tilde\" rel=\"nofollow noreferrer\"><code>$~</code></a>, returning the last successful match. Since ruby was designed single-threaded, <code>gsub</code> returning last match seems to be redundant. (All the above is just my assumption.)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1456759113, "last_edit_date": 1456759113, "creation_date": 1456758542, "answer_id": 35702910, "question_id": 35702575, "link": "https://stackoverflow.com/questions/35702575/whats-the-ruby-equivalent-of-perls-se/35702910#35702910", "title": "What&#39;s the Ruby equivalent of Perl&#39;s s{}{}e?", "body": "<p>Once you do not want to use <code>$1</code> as you did in perl, you might use named matches:</p>\n\n<pre><code>\"-out AAA -out BBB\".gsub(/(?&lt;leading&gt;\\s|^)(?&lt;out&gt;-out)\\s+(?&lt;rest&gt;\\S+)/) do\n  \"#{$~[:leading]}#{$~[:out]} BLOCK\"\nend\n#\u21d2\u00a0\"-out BLOCK -out BLOCK\"\n</code></pre>\n\n<p>Another option would be to shut rubocop up, since you know what you are doing:</p>\n\n<pre><code>#rubocop:disable Style/PerlBackrefs\n\"-out AAA -out BBB\".gsub(/(\\s|^)(-out)\\s+(\\S+)/) do\n  \"#{$1}#{$2} BLOCK\"\nend\n#rubocop:enable Style/PerlBackrefs\n</code></pre>\n"}], "owner": {"reputation": 2955, "user_id": 444234, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3a0f29f3fd3f8ed687656de9fa22bcc7?s=128&d=identicon&r=PG", "display_name": "android.weasel", "link": "https://stackoverflow.com/users/444234/android-weasel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 35702910, "answer_count": 1, "score": 0, "last_activity_date": 1598195688, "creation_date": 1456757549, "last_edit_date": 1598195688, "question_id": 35702575, "link": "https://stackoverflow.com/questions/35702575/whats-the-ruby-equivalent-of-perls-se", "title": "What&#39;s the Ruby equivalent of Perl&#39;s s{}{}e?", "body": "<p>I'm trying to rewrite a command to replace output files with the same files in a different directory, building up a translation map. In Perl I could do something like this:</p>\n<pre><code>s{(-o|--out)\\s((?:\\S+\\/)?(\\S+))}{ &quot;$1 &quot; . ($m{$2}=&quot;foo/$3&quot;) }eg\n</code></pre>\n<p>I'm not clear how to do the same under Ruby, because:</p>\n<pre><code>&quot;-out AAA -out yeah/BBB&quot;.\ngsub(/((?:\\s|^)-out)\\s+((?:\\S+\\/)?(\\S+))/) { |f|\n  &quot;#{f[1]} #{m[f[2]] = &quot;temp/#{f[3]}&quot;}&quot;\n}\n</code></pre>\n<p>results in</p>\n<pre><code>&quot;o temp/t- temp/u&quot;\n</code></pre>\n<p>because 'm' is the matched string, not a match object, so <code>#{m[1]}</code> is just the second character of the matched string.</p>\n<p>I don't want to use <code>$1</code>, <code>$2</code> because Rubocop says they're evil, and I'd prefer not to use 'Regexp.last_match' because it's quite remarkably verbose and turns this one-liner into a do-block.</p>\n<p>Is there no built-in that gives me the match object as the parameter?</p>\n"}, {"tags": ["perl", "sed"], "comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1456752092, "post_id": 35700633, "comment_id": 59077513, "body": "Add a one time use variable and a conditional, such as <code>$a++ || ...</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456759261, "post_id": 35700633, "comment_id": 59082735, "body": "Why does this question have a Perl tag?"}], "answers": [{"comments": [{"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 4, "creation_date": 1456753893, "post_id": 35700853, "comment_id": 59078862, "body": "Why don&#39;t you add an explanation for this code you are presenting so that someone might learn from it."}, {"owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "reply_to_user": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 0, "creation_date": 1456758783, "post_id": 35700853, "comment_id": 59082390, "body": "@TLP explanation was added. Hope it is clear enough."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456759428, "post_id": 35700853, "comment_id": 59082882, "body": "Please add hyperlinks for <i>&quot;has used sed&#39;s address&quot;</i> and <i>&quot;sed&#39;s Info page&quot;</i>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456764403, "post_id": 35700853, "comment_id": 59086465, "body": "@Kent: I know that, but suppose I had only a WIndows system to hand?"}], "tags": [], "owner": {"reputation": 172306, "user_id": 164835, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ayYoh.jpg?s=128&g=1", "display_name": "Kent", "link": "https://stackoverflow.com/users/164835/kent"}, "is_accepted": true, "score": 5, "last_activity_date": 1456759383, "last_edit_date": 1456759383, "creation_date": 1456752660, "answer_id": 35700853, "question_id": 35700633, "link": "https://stackoverflow.com/questions/35700633/sed-remove-first-occurence-of-string-from-file/35700853#35700853", "title": "Sed - remove first occurence of string from file", "body": "<p>This sed one-liner will help you:</p>\n\n<pre><code>sed '0,/test3/{/test3/d}' file\ntest1\ntest2\ntest4\ntest5\ntest3\n</code></pre>\n\n<p>This sed command has used sed's address. Sed has different address expressions, this was explained in detail in sed's Info page. </p>\n\n<p>For this command, <code>0, /pattern/</code> will focus from the first line till the first line matching <code>/pattern/</code>, then do the action: <code>/pattern/d</code>, that is, remove the first matching line. After this was done, all following lines will not be satisfied with address <code>0,/pattern/</code>, thus default action was taken: print as they are.</p>\n"}, {"comments": [{"owner": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1456772373, "post_id": 35701141, "comment_id": 59091429, "body": "Your explanation of why this works only makes partial sense, however the method is sound."}, {"owner": {"reputation": 12658, "user_id": 5920214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4bbe6feca39eebe96274d3f07c44d9?s=128&d=identicon&r=PG", "display_name": "tfb", "link": "https://stackoverflow.com/users/5920214/tfb"}, "reply_to_user": {"reputation": 46858, "user_id": 967492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/526ea226101e199d029049dda22a4e58?s=128&d=identicon&r=PG", "display_name": "potong", "link": "https://stackoverflow.com/users/967492/potong"}, "edited": false, "score": 0, "creation_date": 1456776955, "post_id": 35701141, "comment_id": 59094229, "body": "@potong: I&#39;ve elaborated the explanation a bit."}], "tags": [], "owner": {"reputation": 12658, "user_id": 5920214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4bbe6feca39eebe96274d3f07c44d9?s=128&d=identicon&r=PG", "display_name": "tfb", "link": "https://stackoverflow.com/users/5920214/tfb"}, "is_accepted": false, "score": 2, "last_activity_date": 1456776922, "last_edit_date": 1456776922, "creation_date": 1456753428, "answer_id": 35701141, "question_id": 35700633, "link": "https://stackoverflow.com/questions/35700633/sed-remove-first-occurence-of-string-from-file/35701141#35701141", "title": "Sed - remove first occurence of string from file", "body": "<p>Another approach (not as good as Kent's I think) to rely on the hold space:</p>\n\n<pre><code>sed -e '/test3/{\n                x\n                /^$/d\n               }'\n</code></pre>\n\n<p>This looks for the pattern, then if it sees it it exchanges it with the hold space which will be empty on the first hit, and then nukes the remaining blank line.  For subsequent hits the hold space will contain the line itself, swapped in by the first hit, so the exchange will do nothing, and the blank-line-nuking will fail.</p>\n\n<p>I think, however, the real answer is don't use <code>sed</code>: I almost always find it easier to use Perl, or almost anything else, when things get complicated enough to need any thought.</p>\n"}, {"comments": [{"owner": {"reputation": 48798, "user_id": 223226, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/iGqE4.png?s=128&g=1", "display_name": "mpapec", "link": "https://stackoverflow.com/users/223226/mpapec"}, "edited": false, "score": 1, "creation_date": 1456754798, "post_id": 35701559, "comment_id": 59079488, "body": "<code>print() </code> is in <code>continue{ }</code> for <code>-p</code> switch, so $_=&quot;&quot; instead of <code>next</code>"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1456759580, "last_edit_date": 1456759580, "creation_date": 1456754540, "answer_id": 35701559, "question_id": 35700633, "link": "https://stackoverflow.com/questions/35700633/sed-remove-first-occurence-of-string-from-file/35701559#35701559", "title": "Sed - remove first occurence of string from file", "body": "<p>In Perl</p>\n\n<pre><code> perl -pe 'next if /test3/ and not $seen++' test.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1456759532, "creation_date": 1456759532, "answer_id": 35703240, "question_id": 35700633, "link": "https://stackoverflow.com/questions/35700633/sed-remove-first-occurence-of-string-from-file/35703240#35703240", "title": "Sed - remove first occurence of string from file", "body": "<p>Another Perl sledgehammer way</p>\n\n<pre><code>perl -0777 -p's/text3\\n//' test.txt\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 241593, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3d7e4eed5740c864a766640424643d5b?s=128&d=identicon&r=PG", "display_name": "Jaron787", "link": "https://stackoverflow.com/users/241593/jaron787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 373, "favorite_count": 0, "accepted_answer_id": 35700853, "answer_count": 4, "score": 0, "last_activity_date": 1456776922, "creation_date": 1456751984, "last_edit_date": 1456752038, "question_id": 35700633, "link": "https://stackoverflow.com/questions/35700633/sed-remove-first-occurence-of-string-from-file", "title": "Sed - remove first occurence of string from file", "body": "<p>I have a file called test.txt which contains the following:</p>\n\n<pre><code>test1\ntest2\ntest3\ntest4\ntest5\ntest3\n</code></pre>\n\n<p>I am using the following code to remove <code>\"test3\"</code> from the file:</p>\n\n<pre><code>sed -i '/test3/d' test.txt\n</code></pre>\n\n<p>However I only want to remove only the first occurrence of <code>\"test3\"</code></p>\n"}, {"tags": ["perl", "file", "perl-module"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1456743923, "post_id": 35697921, "comment_id": 59072401, "body": "Why do you think you need to escape the <code>r</code> in the first place?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1456744585, "post_id": 35697921, "comment_id": 59072811, "body": "That&#39;s more likely because you forgot to <code>chomp</code> when you read it."}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456744627, "post_id": 35697921, "comment_id": 59072829, "body": "Because I was getting errors saying that there is a new line in the name and when i print the file name, this is the output,file name = /home/test/files/10.6.502.0 ootpass Unsuccessful stat on filename containing newline at ReadFile.pl line 106. No read permissions on password file /home/test/files/10.6.502.0 ootpass. The /home/test/files/10.6.502.0 is the path to the file. And rootpass is being printed in a new line as ootpass"}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1456744680, "post_id": 35697921, "comment_id": 59072852, "body": "You ADDED newline. <code>\\r</code> IS new line. Remove slash. Also remove <code>&#39;</code> around <code>$rootpass</code>. It doesn&#39;t needs quoting at all and single quotes don&#39;t do variable expansion."}, {"owner": {"reputation": 3923, "user_id": 3640699, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NxDM0.jpg?s=128&g=1", "display_name": "Karthikeyan.R.S", "link": "https://stackoverflow.com/users/3640699/karthikeyan-r-s"}, "edited": false, "score": 0, "creation_date": 1456744724, "post_id": 35697921, "comment_id": 59072879, "body": "You no need to escape the <code>r</code>. You can just use it as it is."}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456744883, "post_id": 35697921, "comment_id": 59072957, "body": "Are you saying that &quot;my $passfile = &quot;$jobDir/rootpass&quot;; will make it work? And I can open the file like open ROOTPASS, &#39;$passfile&#39;; ?"}, {"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1456744935, "post_id": 35697921, "comment_id": 59072985, "body": "Just <code>open ROOTPASS, $passfile;</code>. <code>&#39;</code> actually will break it because you&#39;ll be looking for file literally named &quot;$passfile&quot;, not &quot;rootpass&quot;."}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456744941, "post_id": 35697921, "comment_id": 59072988, "body": "I tried that and I get the following, file name = /home/test/files/10.6.502.0   /rootpass Unsuccessful stat on filename containing newline at ReadFile.pl line 106"}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456745090, "post_id": 35697921, "comment_id": 59073090, "body": "The &quot;/home/test/files/10.6.502.0&quot; and &quot; /rootpass&quot; are in two different lines. I am not able to write the comment like that here.."}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456745270, "post_id": 35697921, "comment_id": 59073192, "body": "I tried not check -e on the file name and directly opened it and this is the error I get, Unsuccessful open on filename containing newline at ReadFile.pl line 108. readline() on closed filehandle ROOTPASS at ReadFile.pl"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456745298, "post_id": 35697921, "comment_id": 59073210, "body": "Where do you get <code>$jobDir</code> from? Any chance <i>that</i> contains a new line?"}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456745730, "post_id": 35697921, "comment_id": 59073496, "body": "I create $jobDir as, $jobDir = &quot;/home/test/files/$process_build&quot;; and $process_build will be a string like 10.0.9.7 or something similar"}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456746103, "post_id": 35697921, "comment_id": 59073717, "body": "I get the same error even after I changed the name to &quot;passroot&quot; instead of &quot;rootpass&quot;!!!! There is some other issue.."}, {"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456746177, "post_id": 35697921, "comment_id": 59073749, "body": "I got the issue! After I changed the statement, my $passfile = &quot;$jobDir/\\rootpass&quot;; to my $passfile = &#39;$jobDir/\\rootpass&#39;; Issue went away! Can someone explain what happened?"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1456752397, "post_id": 35697921, "comment_id": 59077723, "body": "This reminds me of <a href=\"http://stackoverflow.com/a/35535728/5830574\">this discussion</a> a few days ago."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1456752733, "post_id": 35697921, "comment_id": 59078006, "body": "That&#39;s because the single quotes <code>&#39;</code> (as opposed to the double quotes <code>&quot;</code>) do not interpolate variables inside, i.e. now you are looking for a file called (literally!) <code>dollar-jay-ouh-bee-Dee-i-arr-slash-backslash-arr-ouh-ouh</code>... And that file doesn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456765883, "post_id": 35701987, "comment_id": 59087448, "body": "Like <a href=\"http://metacpan.org/module/Modern::Perl\" rel=\"nofollow noreferrer\"><code>use Modern::Perl</code></a>, a <code>use VERSION</code> statement isn&#39;t very transparent about what it does, and generally needs commenting to explain why it&#39;s there. If you want strictures and <code>say</code> then you should write <code>use strict</code> and <code>use feature &#39;say&#39;</code> although if you  know for sure which version of Perl is required for your program then it can be useful to add a <code>use VERSION</code> as well for that version. For instance, <code>use autodie</code> wasn&#39;t available until Perl v5.14.1, so a <code>use v5.14.1</code> statement is more useful than getting <code>Can&#39;t locate diagnostics.pm</code> message"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456766276, "post_id": 35701987, "comment_id": 59087679, "body": "Don&#39;t get too focused on the <i>modern features</i> comment. You may feel bang up to date now, but unless you revise your entire code base regularly they won&#39;t be &quot;modern&quot; for long (in fact, isn&#39;t the word &quot;modern&quot; a little pass&#233;?!) and your code will look silly. Just <code># For strictures and &#39;say&#39;</code> is plenty. No comment on <code>autodie</code> is necessary at all, and certainly <code># Gets rid of newline</code> is bloat. I&#39;m sorry, I&#39;m writing a code review when I shouldn&#39;t. I hope it&#39;s useful anyway"}], "tags": [], "owner": {"reputation": 6130, "user_id": 299242, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f9bda794bc71267206358bf04ea0a179?s=128&d=identicon&r=PG", "display_name": "mscha", "link": "https://stackoverflow.com/users/299242/mscha"}, "is_accepted": false, "score": 0, "last_activity_date": 1456756239, "last_edit_date": 1456756239, "creation_date": 1456755920, "answer_id": 35701987, "question_id": 35697921, "link": "https://stackoverflow.com/questions/35697921/not-able-to-open-a-file-to-read-since-file-name-starts-with-r/35701987#35701987", "title": "Not able to open a file to read since file name starts with &#39;r&#39;", "body": "<p>A lot of good comments on the original question, but you also:</p>\n\n<ul>\n<li>shouldn't be using global file handles</li>\n<li>should be using three-argument open</li>\n<li>are checking if the file <em>exists</em>, but give the error message that it's not readable.  If the file exists but isn't readable, your script won't work, without giving a useful error message.</li>\n</ul>\n\n<p>Here's a modern perl version of your script:</p>\n\n<pre><code>use 5.012;      # enables \"use strict;\" and modern features like \"say\"\nuse warnings;\nuse autodie;    # dies on I/O errors, with a useful error message\n\nmy $jobDir = '/path/to/job/directory';\n\nmy $passfile = \"$jobDir/rootpass\";\nsay \"filename: '$passfile'\";\n\n# No need for explicit error handling, \"use autodie\" takes care of this.\nopen (my $fh, '&lt;', $passfile);\nmy $rootpass = &lt;$fh&gt;; chomp($rootpass);  # Gets rid of newline\nsay \"password: '$rootpass'\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "edited": false, "score": 0, "creation_date": 1456803532, "post_id": 35705170, "comment_id": 59104925, "body": "thankyou Borodin! thta was really useful!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 0, "last_activity_date": 1456765144, "creation_date": 1456765144, "answer_id": 35705170, "question_id": 35697921, "link": "https://stackoverflow.com/questions/35697921/not-able-to-open-a-file-to-read-since-file-name-starts-with-r/35705170#35705170", "title": "Not able to open a file to read since file name starts with &#39;r&#39;", "body": "<p>This line</p>\n\n<pre><code>my $passfile = \"$jobDir/\\rootpass\";\n</code></pre>\n\n<p>will put a carriage-return character\u2014hex 0D\u2014where <code>\\r</code> is in the string. You presumable mean just</p>\n\n<pre><code>my $passfile = \"$jobDir/rootpass\";\n</code></pre>\n\n<p>The line</p>\n\n<pre><code>open ROOTPASS, '$passfile';\n</code></pre>\n\n<p>will try to open a file called\u2014literally\u2014<code>$passfile</code>. You want</p>\n\n<pre><code>open ROOTPASS, $passfile;\n</code></pre>\n\n<p>or, much better</p>\n\n<pre><code>open my $pass_fh, '&lt;', $passfile or die $!;\n</code></pre>\n\n<p>Here's a summary</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $jobdir   = '/path/to/jobdir';\nmy $passfile = \"$jobdir/rootpass\";\n\nprint \"file name = $passfile\\n\";\n\nopen my $pass_fh, '&lt;', $passfile or die qq{Failed to open \"$passfile\" for input: $!};\nmy $rootpass = &lt;$pass_fh&gt;;\nprint \"$rootpass\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>file name = /path/to/jobdir/rootpass\nFailed to open \"/path/to/jobdir/rootpass\" for input: No such file or directory at E:\\Perl\\source\\rootpass.pl line 9.\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 3184532, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/62c15703e6ac95a451a0dcbf1817d34a?s=128&d=identicon&r=PG&f=1", "display_name": "quickdraw", "link": "https://stackoverflow.com/users/3184532/quickdraw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "closed_date": 1456765392, "accepted_answer_id": 35705170, "answer_count": 2, "score": -5, "last_activity_date": 1456765144, "creation_date": 1456743805, "last_edit_date": 1456744096, "question_id": 35697921, "link": "https://stackoverflow.com/questions/35697921/not-able-to-open-a-file-to-read-since-file-name-starts-with-r", "closed_reason": "Not suitable for this site", "title": "Not able to open a file to read since file name starts with &#39;r&#39;", "body": "<p>My file's name is \"rootpass\" and I am trying to read it like this,</p>\n\n<pre><code>my $rootpass;\nmy $passfile = \"$jobDir/\\rootpass\";\nprint \"file name = $passfile\\n\";\nif( -e $passfile)\n{    \n    open ROOTPASS, '$passfile';\n    $rootpass = &lt;ROOTPASS&gt;;\n    print \"$rootpass\\n\";\n}\nelse\n{\n    print \"No read permissions on password file $passfile\\n\";\n    exit 1;\n}\n</code></pre>\n\n<p>I get an error like this,</p>\n\n<pre><code>Unsuccessful stat on filename containing newline at ReadFile.pl line 106. \n</code></pre>\n\n<p>106 is the if() line. I have tried the following,</p>\n\n<ol>\n<li>made it <code>my $passfile = \"$jobDir\\/rootpass\";</code>\nto escape the escape char</li>\n<li>made it <code>my $passfile = \"$jobDir//rootpass\";</code>\nto escape the 'r' so it wont think I have a return char in the file name</li>\n</ol>\n\n<p>How do I read the file whose name is <code>rootpass</code> under the directory name  contained in the variable <code>$jobDir</code>?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1456740740, "post_id": 35696615, "comment_id": 59070368, "body": "Maybe also check out <a href=\"http://www.slideshare.net/Tim.Bunce/dbi-advanced-tutorial-2007\" rel=\"nofollow noreferrer\">the excellent slides of Tim Bunce&#39;s presentation on advanced DBI at OSCON</a>."}, {"owner": {"reputation": 1246, "user_id": 4577456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10152662960092727/picture?type=large", "display_name": "Liam Fell", "link": "https://stackoverflow.com/users/4577456/liam-fell"}, "edited": false, "score": 0, "creation_date": 1456741169, "post_id": 35696615, "comment_id": 59070657, "body": "That&#39;s a fantastic answer thanks for that. I seem to be pulling an error: &quot;Global symbol &quot;$dbh&quot; requires explicit package name&quot; I&#39;m just looking in to that."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1246, "user_id": 4577456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10152662960092727/picture?type=large", "display_name": "Liam Fell", "link": "https://stackoverflow.com/users/4577456/liam-fell"}, "edited": false, "score": 0, "creation_date": 1456741210, "post_id": 35696615, "comment_id": 59070686, "body": "@Liam did you load DBI and connect to the database at all?"}, {"owner": {"reputation": 1246, "user_id": 4577456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10152662960092727/picture?type=large", "display_name": "Liam Fell", "link": "https://stackoverflow.com/users/4577456/liam-fell"}, "edited": false, "score": 1, "creation_date": 1456741659, "post_id": 35696615, "comment_id": 59071014, "body": "I&#39;ve just changed the config of the connection and have this working! Thank you"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456743533, "post_id": 35696615, "comment_id": 59072186, "body": "<code>$prod_id</code> needs to be declared and definec"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456743627, "post_id": 35696615, "comment_id": 59072250, "body": "@Borodin true, I implied that&#39;s the stuff that happens. But I&#39;ll add it explicitly."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456771610, "post_id": 35696615, "comment_id": 59090944, "body": "@simbabque: I realise that. But it didn&#39;t sit right that you had <code>use strict</code> in there without the necessary declaration. I think you should either write a code fragment or a working program, and it should be clear somehow which of those it is. Not that I always succeed myself :-/"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1246, "user_id": 4577456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10152662960092727/picture?type=large", "display_name": "Liam Fell", "link": "https://stackoverflow.com/users/4577456/liam-fell"}, "edited": false, "score": 1, "creation_date": 1456771889, "post_id": 35696615, "comment_id": 59091133, "body": "@Liam: I think it would help you a lot if you submitted your working code to <a href=\"http://codereview.stackexchange.com/\"><i>Code Review</i></a>. You will be treated very gently there unless you post crap like code that won&#39;t even compile, and it may well help you to learn some of the subtleties of the language"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456784833, "post_id": 35696615, "comment_id": 59098708, "body": "@borodin I agree, it&#39;s more consistent. And I agree with the code review as well. Maybe I should head over to CR a bit more often, but the Perl tag seems very slow and then people jump on new questions even more than here."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 10, "last_activity_date": 1456743652, "last_edit_date": 1456743652, "creation_date": 1456740054, "answer_id": 35696615, "question_id": 35696185, "link": "https://stackoverflow.com/questions/35696185/prepared-sql-statement-in-perl/35696615#35696615", "title": "Prepared SQL statement in Perl", "body": "<p>You're pretty far already. It's great that you already have <a href=\"https://metacpan.org/pod/DBI#Placeholders-and-Bind-Values\" rel=\"noreferrer\">the placeholders (<code>?</code>)</a>. All you need to do is pass the parameter <a href=\"https://metacpan.org/pod/DBI#execute\" rel=\"noreferrer\">as an argument to <code>execute</code></a>. It will fill them into the placeholders automatically, in the order they appear in your query.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse DBI;\n\nmy $dbh = DBI-&gt;connect('dsn goes here', 'user', 'password') or die $DBI::errstr;\n\n# stuff happens ...\n\nmy $prod_id = 1337; # or whatever\n\nmy $sql =\n    'SELECT \n        node_id \n    FROM \n        pagenodes\n    INNER JOIN \n        pageproducts \n    ON \n        pagenodes.node_id = pageproducts.nodeid\n    INNER JOIN \n        products \n    ON \n        pageproducts.prodid = products.prodid \n    WHERE \n        products.prodid  = ?\n    LIMIT 1';\n\nmy $sth = $dbh-&gt;prepare($sql);\n$sth-&gt;execute($prod_id);     # no `my` here!\n</code></pre>\n\n<p>The <code>LIMIT</code> in this case doesn't matter. It will also work in a loop.</p>\n\n<p>Note that you had a <code>my</code> in front of the <code>execute</code> line. That is wrong syntax. <code>my</code> is used to <em>declare</em> variables, but in that line you only call a method on the already existing statement handle object. There is a return value for the <code>execute</code> method, but it is usually not assigned to a variable. If the return value is true, the <code>execute</code> was successful. If it's false, something went wrong. You can also use <code>or</code> to <a href=\"https://metacpan.org/pod/DBI#errstr\" rel=\"noreferrer\">check for errors</a>.</p>\n\n<pre><code>$sth-&gt;execute or die $dbh-&gt;errstr;\n</code></pre>\n\n<p>Now to get your single value from the database, you can <a href=\"https://metacpan.org/pod/DBI#fetchrow_array\" rel=\"noreferrer\">use <code>fetchrow_array</code> in list context</a>.</p>\n\n<pre><code>( my $node_id ) = $sth-&gt;fetchrow_array;\n</code></pre>\n\n<p>This will give you the single <code>node_id</code>, once.</p>\n\n<hr>\n\n<p>If you intend to only get one value and only call this once, you can also save some lines of code and <a href=\"https://metacpan.org/pod/DBI#selectrow_array\" rel=\"noreferrer\">use <code>selectrow_array</code> instead</a>.</p>\n\n<pre><code>( my $node_id ) = $dbh-&gt;selectrow_array('SELECT node_id FROM foo WHERE prodid=? LIMIT 1', undef, $prod_id);\n</code></pre>\n\n<p>Again, the list context is important, because <code>fetchrow_array</code> and <code>selectrow_array</code> return lists, not array references. Without the <code>()</code> around the left hand side, it would assign the number of results (because of scalar context).</p>\n\n<p>If, however, you want to do all this in a loop for a bunch of values, it looks a bit different. In that case, do your prepare outside of the loop and just <code>execute</code> and <code>fetchrow_array</code> (or any of the other <code>fetchrow_*</code> methods) inside of the loop. That will make it considerably faster.</p>\n\n<pre><code>my $sth = $dbh-&gt;prepare($sql);\nforeach my $prod_id ( @prod_ids ) {\n  $sth-&gt;execute($prod_id);\n  ( my $node_id ) = $sth-&gt;fetchrow_array;\n  print \"$node_id\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1246, "user_id": 4577456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10152662960092727/picture?type=large", "display_name": "Liam Fell", "link": "https://stackoverflow.com/users/4577456/liam-fell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3010, "favorite_count": 0, "accepted_answer_id": 35696615, "answer_count": 1, "score": 4, "last_activity_date": 1456743652, "creation_date": 1456738821, "question_id": 35696185, "link": "https://stackoverflow.com/questions/35696185/prepared-sql-statement-in-perl", "title": "Prepared SQL statement in Perl", "body": "<p>I'm very new to Perl, I'm trying to overcome the initial learning curve. </p>\n\n<p>I have the following SQL statement:</p>\n\n<pre><code>        SELECT \n            node_id \n        FROM \n            pagenodes\n        INNER JOIN \n            pageproducts \n        ON \n            pagenodes.node_id = pageproducts.nodeid\n        INNER JOIN \n            products \n        ON \n            pageproducts.prodid = products.prodid \n        WHERE \n            products.prodid  = ?\n        LIMIT 1\n</code></pre>\n\n<p>As you can see this has LIMIT 1 set in the query, I'm trying to perform this query from a Perl script, and set the result to a variable. </p>\n\n<p>So far I have the following:</p>\n\n<pre><code>my $sql =\n    'SELECT \n        node_id \n    FROM \n        pagenodes\n    INNER JOIN \n        pageproducts \n    ON \n        pagenodes.node_id = pageproducts.nodeid\n    INNER JOIN \n        products \n    ON \n        pageproducts.prodid = products.prodid \n    WHERE \n        products.prodid  = ?\n    LIMIT 1';\n\n    my $sth = $dbh-&gt;prepare($sql);\n    my $sth-&gt;execute();\n</code></pre>\n\n<p>My question is, how can I pass in <code>$prod_id</code> as the WHERE paramater, and how can I set the result to a variable. Thanks</p>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1456730065, "post_id": 35693746, "comment_id": 59064686, "body": "This might help: <a href=\"http://stackoverflow.com/questions/4006267/what-is-the-best-way-to-handle-exceptions-in-perl\">What is the best way to handle exceptions in Perl?</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 4, "creation_date": 1456731822, "post_id": 35693746, "comment_id": 59065415, "body": "I think you&#39;ll probably have to ask your supervisor! As far as I&#39;m concerned, global exception handling in Perl involves writing a <code>die</code> handler by assigning a subroutine to <code>$SIG{__DIE__}</code> (as described in <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">perlvar</a>). And it&#39;s something that&#39;s really only good for debugging. On the other hand, <code>eval</code> allows you to handle errors in only one block of the code. I guess if you had a <code>main()</code> subroutine that executed the whole program, like in C, then you could put that in an <code>eval { main(); }</code> block, but I&#39;m not sure I see the point."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456735371, "post_id": 35693746, "comment_id": 59067088, "body": "You got great advice and information from <a href=\"http://stackoverflow.com/users/240443/amadan\">Amadan</a> and <a href=\"http://stackoverflow.com/users/622310/borodin\">Borodin</a>, whose comment also expresses the fact that it is not quite clear what your situation is; &quot;global exception handling&quot; is a strange term to me.  Here are a few questions:  How much/often do you call functions from those modules?  At what level -- buried deep inside subs or in <code>main::</code>?  What are the modules?  What is the size and structure of the whole project?  In a nutshell, I mean."}, {"owner": {"reputation": 23, "user_id": 5599403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/209a7e5ee419c7ad0f47c334eff37811?s=128&d=identicon&r=PG&f=1", "display_name": "nithin", "link": "https://stackoverflow.com/users/5599403/nithin"}, "edited": false, "score": 0, "creation_date": 1456738448, "post_id": 35693746, "comment_id": 59068927, "body": "It&#39;s a pretty small project consisting of around 400 lines of code. What my supervisor needs is - totally I have 4 programs (one main program and three sub modules which are called from main). For each program he wants me to have an exception handling where in if something goes wrong it will be highlighted and it becomes easy for us to debug."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456759064, "post_id": 35693746, "comment_id": 59082575, "body": "@nithin: But that already happens. If your code encounters a fatal error then it dies with a message giving the reason, as well as the source file and line number being executed at the time. Your supervisor has clearly flummoxed me and many other Stack Overflow subscribers, as you have had no answers so far at all. Are they asking for a stack backtrace? It may not be enough to know where in the code the failure occurred because the cause is ultimately due to wrong parameters being passed to a subroutine. Ask your supervisor for an <i>example</i> of an error and the information they would like"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1456769215, "creation_date": 1456769215, "answer_id": 35706432, "question_id": 35693746, "link": "https://stackoverflow.com/questions/35693746/global-level-exception-handling-in-perl/35706432#35706432", "title": "global level exception handling in perl", "body": "<blockquote>\n  <p><em>For each program he wants me to have an exception handling where in if something goes wrong it will be highlighted and it becomes easy for us to debug.</em></p>\n</blockquote>\n\n<p>When an uncaught exception occurs, it is printed to STDERR. Your highlighting requirement is already being met.</p>\n\n<p>Exceptions messages already include the line number at which they were thrown (unless specifically suppressed), so some information to help debug is already available.</p>\n\n<pre><code>$ perl -e'sub f { die \"bar\" } f(\"foo\")'\nbar at -e line 1.\n</code></pre>\n\n<p>Adding <code>use Carp::Always;</code> to your scripts will cause a stack backtrace to be provided as well, providing more information.</p>\n\n<pre><code>$ perl -e'use Carp::Always; sub f { die \"bar\" } f(\"foo\")'\nbar at -e line 1.\n        main::f(\"foo\") called at -e line 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1457165887, "last_edit_date": 1495535312, "creation_date": 1456779459, "answer_id": 35709487, "question_id": 35693746, "link": "https://stackoverflow.com/questions/35693746/global-level-exception-handling-in-perl/35709487#35709487", "title": "global level exception handling in perl", "body": "<p>The problem you are given seems imprecise.  \"Global\" and <code>eval</code> are somewhat contradictory, as \n<a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a> explained in his comment. Another way to do things \"global\" is given in <a href=\"https://stackoverflow.com/users/589924/ikegami\">ikegami</a>'s answer.  However, since mentioning <code>eval</code> <em>is</em>  specific here is a rundown on a very basic use of that.</p>\n\n<p>You use <code>eval</code> on a block of code (or an expression but that is not what you want here). If a <code>die</code> is thrown anywhere inside that block, the <code>eval</code> catches that in the sense that you get the control back, the program won't just die. The variable <code>$@</code> gets filled with the error message. Then you can interrogate what happened, print out diagnostics, and possibly recover from the error.</p>\n\n<pre><code>eval {  run_some_code(@args) };\nif ($@) {\n    carp \"Error in `run_some_code()`: $@ --\";\n    # Do further investigation, print, recover ...\n}\n</code></pre>\n\n<p>You can have any code in the <code>eval</code> block above, it needn't be a single function call.  Note that <code>eval</code> itself returns values that convey what happened (aside from <code>$@</code> being set).</p>\n\n<p>As for the \"global\" in your problem statement, one thing that comes to mind is that you use <code>eval</code> at the level of <code>main::</code> -- wrap in it any subs that themselves invoke functions from the modules. </p>\n\n<p>A crucial thing about exceptions is that they \"bubble up\". When a <code>die</code> (Perl's sole exception) is thrown in a sub and the caller doesn't <code>eval</code> it, it goes up the call chain ... eventually showing up in <code>main::</code>, and if it is not caught (<code>eval</code>-ed) there <em>then</em> the program dies.  So you can <code>eval</code> the top-level call in <code>main::</code> and get to know whether anything anywhere below went wrong.</p>\n\n<pre><code>eval { top_level_call(); };\nif ($@) {\n    warn \"Error from somewhere in `top_level_call(): $@\";\n}\n\n# Functions\nsub top_level_call {\n    # doing some work ...\n    another_sub();\n    # doing more ...\n}\nsub another_sub {\n    # do work, no eval checks\n}\n</code></pre>\n\n<p>If an error triggering a <code>die</code> happens in <code>another_sub()</code> its processing stops immediately and the control is returned to the caller, the <code>top_level_call()</code>. Since that sub doesn't check (no <code>eval</code> there) its execution stops at that point as well, and the control returns to its caller (in this example the <code>main::</code> itself).  So it eventually hits <code>main::</code>, and <code>eval</code>-ing there lets you know about errors and your program won't just exit.  </p>\n\n<p>Perhaps that's what was meant by \"global\" exception handling using <code>eval</code>.</p>\n\n<p>You can do far more along these lines, if this is what you need to be doing. See <a href=\"http://perldoc.perl.org/functions/eval.html\" rel=\"nofollow noreferrer\">eval</a> for starters.\nUpdate your question with clarifications, so you get more discussion here. </p>\n\n<p>In practical terms, I would say that you equip yourself with some understanding of <code>eval</code> use as well as some of \"global\" error reporting, and then ask your supervisor for clarification and/or examples, as suggested by <a href=\"https://stackoverflow.com/users/622310/borodin\">Borodin</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5599403, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/209a7e5ee419c7ad0f47c334eff37811?s=128&d=identicon&r=PG&f=1", "display_name": "nithin", "link": "https://stackoverflow.com/users/5599403/nithin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1457165887, "creation_date": 1456729764, "question_id": 35693746, "link": "https://stackoverflow.com/questions/35693746/global-level-exception-handling-in-perl", "title": "global level exception handling in perl", "body": "<p>I have written a perl program which internally calls three perl modules. My supervisor after reviewing the code asked me add global exception handling. I didn't understand what he meant by this. He also said use Eval to accomplish this.I am not sure how to use Eval so that it catches any exception in the enire perl module. Can anyone help me by providing links or by providing explanation?\nThanks in advance.</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456763701, "post_id": 35693663, "comment_id": 59085982, "body": "This post is pretty much entirely wrong. 1) Exit codes are not limited to one byte in general, only on his system. 2) the information in the full exit code consists of: whether the program ended successfully, the exit code passed to <code>exit</code>, the signal that terminated it, and whether a core dump was produced. 3) The signal number and core dump flag is in the lower bits, so a larger exit code would not conflict with reporting of the signal that killed the process. 4) Exit codes have nothing to do with signal delivery. 5) The value of exit is NOT always masked with <code>0xff</code>, only on some systems."}, {"owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456764986, "post_id": 35693663, "comment_id": 59086855, "body": "@ikegami : well, I talked about most of the unix implementations. it&#39;s of course platform specific. Regarding signal delivery - I meant to the parent process, note it&#39;s not limited to exit only, but also temporary conditions like stopped, tty blocked etc."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456765493, "post_id": 35693663, "comment_id": 59087195, "body": "Re &quot;<i>I talked about most of the unix implementations</i>&quot;, You said &quot;<i>always</i>.&quot; not &quot;<i>for some unix implementations</i>&quot;. That is wrong. /// Re &quot;<i>note it&#39;s not limited to exit only</i>&quot;, Yes, it is. When a process becomes blocked, it does not set its parent shell&#39;s <code>$?</code>. Only when it exits (normally, or when killed by a signal). It&#39;s not called the exit status for nothing."}, {"owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456766259, "post_id": 35693663, "comment_id": 59087666, "body": "@ikegami : Please read the context. The delivery of stopped notification uses exactly the same mechanism and set of functions in the client as notification about exit."}, {"owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456766707, "post_id": 35693663, "comment_id": 59087953, "body": "@ikegami : check WIFSTOPPED for example."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456767130, "post_id": 35693663, "comment_id": 59088197, "body": "No idea what you&#39;re going on about, but it doesn&#39;t appear to have to do with the question or answer. <a href=\"http://chat.stackoverflow.com/rooms/104902/ikegami-kvr000\">chat</a>"}], "tags": [], "owner": {"reputation": 16507, "user_id": 4787126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a822df86c907c77c792a8f91b2bab41?s=128&d=identicon&r=PG&f=1", "display_name": "Zbynek Vyskovsky - kvr000", "link": "https://stackoverflow.com/users/4787126/zbynek-vyskovsky-kvr000"}, "is_accepted": true, "score": 1, "last_activity_date": 1456729390, "creation_date": 1456729390, "answer_id": 35693663, "question_id": 35693556, "link": "https://stackoverflow.com/questions/35693556/perl-script-behavior-while-exiting-with-256/35693663#35693663", "title": "Perl script behavior while exiting with 256", "body": "<p>Yes, the exit return codes are limited to single byte - 0 to 255.</p>\n\n<p>The full exit code consists of the exit code itself and flags which say how the program exited - whether regularly or because of some signal (being killed, interrupted, temporarily stopped etc.).</p>\n\n<p>So the value to <code>exit()</code> function is always masked with <code>0xff</code> in order to not conflict with signal delivery.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1456764509, "last_edit_date": 1592644375, "creation_date": 1456764509, "answer_id": 35704952, "question_id": 35693556, "link": "https://stackoverflow.com/questions/35693556/perl-script-behavior-while-exiting-with-256/35704952#35704952", "title": "Perl script behavior while exiting with 256", "body": "<p>On Linux (and most unix systems), the status passed to <code>exit</code> is limited to 8 bits (0 to 255).</p>\n<blockquote>\n<p><code>void exit(int status);</code></p>\n<p>The <code>exit()</code> function causes normal process termination and the value of <code>status &amp; 0377</code> is returned to the parent (see <code>wait</code>(2)).</p>\n</blockquote>\n<p>The reason it's limited to 8 bits is to support systems with 16-bit <code>int</code>. In an <code>int</code>, <code>wait</code> must convey the following information:</p>\n<ul>\n<li>Whether the process existed normally (e.g. via <code>exit</code>).</li>\n<li>If it exited normally,\n<ul>\n<li>The status passed to <code>exit</code>.</li>\n</ul>\n</li>\n<li>If it was terminated by a signal,\n<ul>\n<li>The number of the signal that killed the process.</li>\n<li>Whether a core dump was produced.</li>\n</ul>\n</li>\n</ul>\n<p>On Windows, the status passed to <code>exit</code> is limited to 16-bits (0 to 65535).</p>\n"}], "owner": {"reputation": 1083, "user_id": 2688175, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1fd9f59324bbd9827b57575de10f625f?s=128&d=identicon&r=PG&f=1", "display_name": "Niraj", "link": "https://stackoverflow.com/users/2688175/niraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 35693663, "answer_count": 2, "score": 1, "last_activity_date": 1456764509, "creation_date": 1456728924, "last_edit_date": 1456729263, "question_id": 35693556, "link": "https://stackoverflow.com/questions/35693556/perl-script-behavior-while-exiting-with-256", "title": "Perl script behavior while exiting with 256", "body": "<p>My perl script temp.pl looks like:</p>\n\n<pre><code>exit 256;\n</code></pre>\n\n<p>If i do following:</p>\n\n<pre><code>perl temp.pl\necho $?\n</code></pre>\n\n<p>Answer is 0.</p>\n\n<p>If i change, perl script to </p>\n\n<pre><code>exit 255;\n</code></pre>\n\n<p>And do again then, answer is 255.</p>\n\n<p>is there anything wrong ?</p>\n"}, {"tags": ["javascript", "php", "html", "perl", "localhost"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "edited": false, "score": 0, "creation_date": 1456733939, "post_id": 35694418, "comment_id": 59066406, "body": "Amazing! Many many many thanks. You solve my problem! I spent 2 weeks diving!"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1456734702, "last_edit_date": 1456734702, "creation_date": 1456732589, "answer_id": 35694418, "question_id": 35693404, "link": "https://stackoverflow.com/questions/35693404/the-result-of-an-application-in-localhost-is-pending-until-refresh-the-browser/35694418#35694418", "title": "The result of an application in localhost is pending until refresh the browser", "body": "<p>The <code>start /b perl file.pl \"$x1\" \"$x2\"</code> command will return immediately the perl process has been started. It will not wait for it to complete</p>\n\n<p>To also wait for the perl process to complete you need to use</p>\n\n<pre><code>start /b /wait perl file.pl \"$x1\" \"$x2\"\n</code></pre>\n\n<p>However, all your Perl code seems to do is to create three disk files and then exit</p>\n"}], "owner": {"reputation": 175, "user_id": 5996017, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/813d01591e0c1b403436a30938ea7c7b?s=128&d=identicon&r=PG&f=1", "display_name": "Alaa", "link": "https://stackoverflow.com/users/5996017/alaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 35694418, "answer_count": 1, "score": 1, "last_activity_date": 1456734702, "creation_date": 1456728150, "last_edit_date": 1456733637, "question_id": 35693404, "link": "https://stackoverflow.com/questions/35693404/the-result-of-an-application-in-localhost-is-pending-until-refresh-the-browser", "title": "The result of an application in localhost is pending until refresh the browser", "body": "<p>Hope I can state my problem clearly.\nI develop an application on my localhost with HTML file for the interface and javascript, PHP, Perl files for the functionality. \nThere is a button on the interface that should submit user input to the other files and then display the result. \nWhen I click that button, the result is generated after a long time. I discover now that when I click that button and then refresh the page, the result is generated! \nIt seems that the result is pending. \nAlso, when I click that button and open another tab in my browser and open another localhost application, the result is generated although the two application are different.</p>\n\n<p>HTML:</p>\n\n<pre><code>&lt;input type='button' value='search' onclick=\"jsFunction(document.getElementsByName('x1')[0].value,document.getElementById('x2').options[document.getElementById('x2').selectedIndex].value);\"&gt;\n</code></pre>\n\n<p>JAVASCRIPT:</p>\n\n<pre><code>function jsFunction(x1,x2) \n{\n    var url = \"file.php\";\n    var params = \"x1=\"+x1+\"&amp;x2=\"+x2;\n    var xhttp = new XMLHttpRequest();\n    xhttp.onreadystatechange = function() \n    {\n        if (xhttp.readyState == 4 &amp;&amp; xhttp.status == 200) \n          document.getElementById(\"result\").innerHTML = xhttp.responseText;\n        }\nxhttp.open(\"POST\", url, true);\nxhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\nxhttp.send(params);\n}\n</code></pre>\n\n<p>file.php:</p>\n\n<pre><code>$x1= (empty($_POST['x1'])) ? '' : $_POST['x1'];\n$x2= (empty($_POST['x2'])) ? '' : $_POST['x2'];\necho \"This echo before perl statement    \";\npclose(popen(\"start /b perl file.pl \\\"$x1\\\" \\\"$x2\\\"\", \"r\"));\necho \"This echo after perl statement\";\n</code></pre>\n\n<p>The above two echo are displayed.</p>\n\n<p>Perl file.pl: call cmd application and generate the result in files</p>\n\n<pre><code>open LOG, \"&gt;$dataPath/$jobid.log\";\nopen OUT1, \"&gt;$dataPath/$jobid.string.txt\";\nopen OUT2, \"&gt;$dataPath/$jobid.result.txt\";\n</code></pre>\n\n<p>The above perl result is not generated until I refresh the browser or it take a long time to be generated.</p>\n\n<p>Any clarification or help is highly appreciated.\nThanks.</p>\n"}, {"tags": ["arrays", "json", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456731103, "post_id": 35692214, "comment_id": 59065089, "body": "Your <a href=\"http://stackoverflow.com/questions/35690380/use-a-perls-datadumper-format-array-in-php\">original question</a> stated very clearly that your data file had only a single array"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456768642, "post_id": 35692439, "comment_id": 59089102, "body": "<code>require</code> is for files with a <code>package</code> statement. The OP&#39;s use of <code>do</code> was more appropriate."}], "tags": [], "owner": {"reputation": 30275, "user_id": 4272464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fa45261dec56004145c653832504920?s=128&d=identicon&r=PG&f=1", "display_name": "bgoldst", "link": "https://stackoverflow.com/users/4272464/bgoldst"}, "is_accepted": true, "score": 0, "last_activity_date": 1456723121, "creation_date": 1456723121, "answer_id": 35692439, "question_id": 35692214, "link": "https://stackoverflow.com/questions/35692214/encode-perls-datadumper-to-json/35692439#35692439", "title": "Encode Perl&#39;s Data::Dumper to JSON", "body": "<p>You don't have two arrays. You have two hashes.</p>\n\n<p>Your code calls <code>do</code> and passes its return value as the only argument of <code>encode_json()</code>. From the <a href=\"http://perldoc.perl.org/functions/do.html\" rel=\"nofollow\">perldoc</a>:</p>\n\n<blockquote>\n  <p>If the file is successfully compiled, do returns the value of the last expression evaluated.</p>\n</blockquote>\n\n<p>What that means is you're passing the value of the last expression in your <code>data.txt</code> file as the argument to <code>encode_json()</code>. That value is the hash that was assigned to <code>$lines</code>.</p>\n\n<p>Possible solutions:</p>\n\n<ol>\n<li><p>Combine the two hashes into a single array of hashes when generating data.txt.</p></li>\n<li><p>Execute the <code>data.txt</code> file prior to the <code>encode_json()</code> call, ignoring its return value. Then, combine the two variables into an anonymous array by referencing them by package-qualified name. Because their declarations were not preceded by <code>my</code>, and they were declared inside the <code>main</code> package implicitly, the package will be <code>main</code>. Here's how it would look:</p></li>\n</ol>\n\n<hr>\n\n<pre><code>require('data.txt');\nprint encode_json([$main::stats,$main::lines]), \"\\n\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467889891, "last_edit_date": 1467889891, "creation_date": 1456730989, "answer_id": 35694062, "question_id": 35692214, "link": "https://stackoverflow.com/questions/35692214/encode-perls-datadumper-to-json/35694062#35694062", "title": "Encode Perl&#39;s Data::Dumper to JSON", "body": "<p>To access the hash references in your data file separately, you need to <em>declare</em> them using <code>our</code> before executing the <code>do</code></p>\n\n<p>Like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse JSON;\n\nour ( $stats, $lines );\n\ndo 'data.txt' or die $!;\n\nprint encode_json( $stats ), \"\\n\";\nprint encode_json( $lines ), \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code>{\"day_times\":[null,[8,0,0,0]],\"actions\":{\"microbe\":1},\"lines\":{\"microbe\":3,\"Sky\":1},\"days\":1,\"lastnick\":\"Sky\",\"oldtime\":\"04\",\"words\":{\"Sky\":1,\"microbe\":9},\"lastnormal\":\"[04:35:01] &lt;Sky&gt; ;algkagkaga\\n\",\"times\":{\"04\":8},\"joins\":{\"Sky\":1,\"microbe\":1},\"totallines\":8,\"monocount\":0,\"lastvisited\":{\"Parts:\":1,\"microbe\":1,\"Sky\":1},\"word_times\":{\"microbe\":[9],\"Sky\":[1]},\"line_times\":{\"Sky\":[1],\"microbe\":[3]},\"parsedlines\":8,\"lengths\":{\"Sky\":11,\"microbe\":36},\"day_lines\":[null,8]}\n{\"sayings\":{\"microbe\":[\"Hello\"],\"Sky\":[\";algkagkaga\"]},\"actionlines\":{\"microbe\":[\"[04:33:53] * microbe is doing just a test\\n\"]}}\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 1190700, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vFAGu.jpg?s=128&g=1", "display_name": "Math", "link": "https://stackoverflow.com/users/1190700/math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1256, "favorite_count": 0, "accepted_answer_id": 35692439, "answer_count": 2, "score": -2, "last_activity_date": 1467889891, "creation_date": 1456721649, "question_id": 35692214, "link": "https://stackoverflow.com/questions/35692214/encode-perls-datadumper-to-json", "title": "Encode Perl&#39;s Data::Dumper to JSON", "body": "<p>I have a Perl Data::Dumper file (data.txt) with two arrays that i need to convert into JSON.</p>\n\n<p>Here's what looks like my data.txt:</p>\n\n<pre><code>$stats = {\n  'oldtime' =&gt; '04',\n  'parsedlines' =&gt; 8,\n  'day_lines' =&gt; [\n    undef,\n    8\n  ],\n  'actions' =&gt; {\n    'microbe' =&gt; 1\n  },\n  'lastnick' =&gt; 'Sky',\n  'words' =&gt; {\n    'Sky' =&gt; 1,\n    'microbe' =&gt; 9\n  },\n  'times' =&gt; {\n    '04' =&gt; 8\n  },\n  'totallines' =&gt; 8,\n  'word_times' =&gt; {\n    'microbe' =&gt; [\n      9\n    ],\n    'Sky' =&gt; [\n      1\n    ]\n  },\n  'lastvisited' =&gt; {\n    'microbe' =&gt; 1,\n    'Parts:' =&gt; 1,\n    'Sky' =&gt; 1\n  },\n  'line_times' =&gt; {\n    'microbe' =&gt; [\n      3\n    ],\n    'Sky' =&gt; [\n      1\n    ]\n  },\n  'lengths' =&gt; {\n    'microbe' =&gt; 36,\n    'Sky' =&gt; 11\n  },\n  'lastnormal' =&gt; '[04:35:01] &lt;Sky&gt; ;algkagkaga\n',\n  'day_times' =&gt; [\n    undef,\n    [\n      8,\n      0,\n      0,\n      0\n    ]\n  ],\n  'days' =&gt; 1,\n  'joins' =&gt; {\n    'microbe' =&gt; 1,\n    'Sky' =&gt; 1\n  },\n  'monocount' =&gt; 0,\n  'lines' =&gt; {\n    'Sky' =&gt; 1,\n    'microbe' =&gt; 3\n  }\n};\n$lines = {\n  'actionlines' =&gt; {\n    'microbe' =&gt; [\n      '[04:33:53] * microbe is doing just a test\n'\n    ]\n  },\n  'sayings' =&gt; {\n    'Sky' =&gt; [\n      ';algkagkaga'\n    ],\n    'microbe' =&gt; [\n      'Hello'\n    ]\n  }\n};\n</code></pre>\n\n<p>So as you can see, there is 2 arrays: $stats and $lines.<br>\nI want to convert them in JSON.<br>\nSomeone on here (Borodin) came with a working solution, but it output only the second array ($lines).  Here's his solution:  </p>\n\n<pre><code>use strict;\nuse warnings qw/ all FATAL /;\n\nuse JSON;\n\nprint encode_json( do 'data.txt' or die $! ), \"\\n\";  \n</code></pre>\n\n<p>But here's what it output: </p>\n\n<pre><code>{\n\n    \"actionlines\":{\n        \"microbe\":[\n            \"[04:33:53] * microbe is doing just a test\\n\"\n        ]\n    },\n    \"sayings\":{\n        \"microbe\":[\n            \"Hello\"\n        ],\n        \"Sky\":[\n            \";algkagkaga\"\n        ]\n    }\n\n}\n</code></pre>\n\n<p>So it output only $lines array... Any idea of what i can do to have it working ?</p>\n"}, {"tags": ["perl", "cgi"], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "is_accepted": false, "score": 0, "last_activity_date": 1456730580, "creation_date": 1456730580, "answer_id": 35693947, "question_id": 35692031, "link": "https://stackoverflow.com/questions/35692031/the-server-is-overloaded-or-there-was-an-error-in-a-cgi-script/35693947#35693947", "title": "the server is overloaded or there was an error in a CGI script", "body": "<p>It means that the server is timing out for some reason. :) \nTo get an answer here, you need to be more specific and limit your question to a shot bit of code, you are in doubt about. But check the server's log file for more information. A path may be wrong or a pathname misspelled. Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1456733013, "creation_date": 1456733013, "answer_id": 35694521, "question_id": 35692031, "link": "https://stackoverflow.com/questions/35692031/the-server-is-overloaded-or-there-was-an-error-in-a-cgi-script/35694521#35694521", "title": "the server is overloaded or there was an error in a CGI script", "body": "<p>Almost certainly your <code>example.pl</code> CGI program is failing before it has sent a proper response to the browser. Have you tried running it on the command line? You should check the server's error log to see why the program failed</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 4948068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jlc2S.jpg?s=128&g=1", "display_name": "cecukemon", "link": "https://stackoverflow.com/users/4948068/cecukemon"}, "is_accepted": false, "score": 0, "last_activity_date": 1456744209, "creation_date": 1456744209, "answer_id": 35698050, "question_id": 35692031, "link": "https://stackoverflow.com/questions/35692031/the-server-is-overloaded-or-there-was-an-error-in-a-cgi-script/35698050#35698050", "title": "the server is overloaded or there was an error in a CGI script", "body": "<p>Try running your script on the command line (shell) with options <code>-cw</code> - <strong>c</strong> will check the syntax without executing the script, <strong>w</strong> will output warnings.</p>\n\n<pre><code>perl -cw localhost/perl/folder\\ name/example.pl\n</code></pre>\n\n<p>You should also check the web server's error log file.</p>\n"}], "owner": {"reputation": 27, "user_id": 5475182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f6ea3150993460b6611f4cf1a6f9c67d?s=128&d=identicon&r=PG&f=1", "display_name": "phyo", "link": "https://stackoverflow.com/users/5475182/phyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1456744209, "creation_date": 1456720426, "last_edit_date": 1456720934, "question_id": 35692031, "link": "https://stackoverflow.com/questions/35692031/the-server-is-overloaded-or-there-was-an-error-in-a-cgi-script", "title": "the server is overloaded or there was an error in a CGI script", "body": "<p>When I run my folder,this error occurs.I want to run localhost/perl/folder name/eample.pl.How to solve it?.Sorry for this easy question.Please help me.</p>\n"}, {"tags": ["perl", "refresh", "mechanize"], "answers": [{"comments": [{"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1456714323, "post_id": 35690626, "comment_id": 59060009, "body": "I have to say that it doesn&#39;t work.  I tried <code>$mech-&gt;follow_meta_redirect; </code> and the response content was what was there before.  I extracted the refresh link myself and did a <code>get</code> and I was able to get it.  I think that Plugin must be faulty."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 1, "creation_date": 1456715331, "post_id": 35690626, "comment_id": 59060223, "body": "@CJ7: See my update. But if the HTML is exactly as you show, then note that it is invalid because <code>&lt;meta&gt;</code> tags must appear within the <code>&lt;head&gt;</code> element. <code>WWW::Mechanize</code> may well be ignoring ones that appear in the <code>&lt;body&gt;</code>. Does the URL appear in the list given by <code>print $_-&gt;url for $mech-&gt;links</code>?"}, {"owner": {"reputation": 5099, "user_id": 406224, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bc79fa6fa58e2a4f5e6c2f803cabc48?s=128&d=identicon&r=PG", "display_name": "oalders", "link": "https://stackoverflow.com/users/406224/oalders"}, "edited": false, "score": 0, "creation_date": 1500322890, "post_id": 35690626, "comment_id": 77274967, "body": "<code>$mech-&gt;follow_link(tag =&gt; &#39;meta&#39;);</code> is a nice solution."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1456714890, "last_edit_date": 1456714890, "creation_date": 1456709855, "answer_id": 35690626, "question_id": 35690540, "link": "https://stackoverflow.com/questions/35690540/mechanize-to-follow-meta-refresh-link/35690626#35690626", "title": "Mechanize to follow meta refresh link", "body": "<p>You can use the plugin module <a href=\"http://metacpan.org/module/WWW::Mechanize::Plugin::FollowMetaRedirect\" rel=\"nofollow\"><code>WWW::Mechanize::Plugin::FollowMetaRedirect</code></a></p>\n\n<p>Since you say that's not working for you, I suggest you use</p>\n\n<pre><code>$mech-&gt;follow_link(tag =&gt; 'meta');\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456714890, "creation_date": 1456709089, "question_id": 35690540, "link": "https://stackoverflow.com/questions/35690540/mechanize-to-follow-meta-refresh-link", "title": "Mechanize to follow meta refresh link", "body": "<p>How can I get <code>Mechanize get()</code> to follow a meta refresh link?</p>\n\n<p>My <code>get()</code> call is returning:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body text=\"#000000\"&gt;\n&lt;META HTTP-EQUIV=\"refresh\" CONTENT=\"0; URL=/TMP/4254358.41083527.html\"&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>How can I cause the link to be followed?</p>\n"}, {"tags": ["php", "arrays", "perl", "type-conversion", "perl-data-structures"], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1467889908, "last_edit_date": 1467889908, "creation_date": 1456710173, "answer_id": 35690673, "question_id": 35690380, "link": "https://stackoverflow.com/questions/35690380/use-a-perls-datadumper-format-array-in-php/35690673#35690673", "title": "Use a Perl&#39;s Data::Dumper format array in PHP", "body": "<p>Don't use <code>Data::Dumper</code> to export your data. It's primarily for debugging purposes, not for data serialisation, and especially not for input to an alien language</p>\n\n<p>Use the Perl <a href=\"http://metacpan.org/module/JSON\" rel=\"nofollow\"><code>JSON</code></a> module's <code>encode_json</code> call to create a JSON string from the Perl hash, and PHP's <a href=\"http://php.net/manual/en/function.json-decode.php\" rel=\"nofollow\"><code>json_decode</code></a> to convert it into a PHP associative array</p>\n\n<p>For instance, say your output from <code>Data::Dumper</code> is in file <code>stats.data</code>, then a short Perl program like this will print the JSON equivalent to STDOUT</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse JSON;\n\nprint encode_json( do 'stats.data' or die $! ), \"\\n\";\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\"lengths\":{\"Jeanne-\":904,\"Piwee\":269,\"kaAnar\":340},\"days\":25}\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 1190700, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vFAGu.jpg?s=128&g=1", "display_name": "Math", "link": "https://stackoverflow.com/users/1190700/math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 35690673, "answer_count": 1, "score": 0, "last_activity_date": 1467889908, "creation_date": 1456707846, "last_edit_date": 1495539971, "question_id": 35690380, "link": "https://stackoverflow.com/questions/35690380/use-a-perls-datadumper-format-array-in-php", "title": "Use a Perl&#39;s Data::Dumper format array in PHP", "body": "<p>I need to acces an array wich is outputed by Perl's Data::Dumper.<br>\nArray is in a raw file, and I need to acces it with php.<br>\nArray is formated as this:  </p>\n\n<pre><code>$stats = {\n  'days' =&gt; 25,\n  'lengths' =&gt; {\n    'Piwee' =&gt; 269,\n    'Jeanne-' =&gt; 904,\n    'kaAnar' =&gt; 340,\n[... Very Big ARRAY....]\n</code></pre>\n\n<p>I found <a href=\"https://stackoverflow.com/a/12353205/1190700\">this solution</a> on here, but i dont want to use eval() because this array will have user-input data.\nSince i will always need to eval() output in case of a str_replace solution, i think i need to find another way to do it.<br>\nMaybe convert to XML or by direct PHP parsing ?<br>\nI'm not sure about what would be the best solution here. </p>\n\n<p>A perl / PHP / bash solution would be okay</p>\n\n<p>note 1: I cant edit the Perl code that output this raw file<br>\nnote 2: I dont code in Perl so i dont know how to work with such datas</p>\n"}, {"tags": ["perl", "filehandle"], "comments": [{"owner": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 2, "creation_date": 1456708224, "post_id": 35690300, "comment_id": 59058680, "body": "Why is /dev/null not good enough? Is the execution of the print itself too costly? Then you need to put a conditional in your code. The target filehandle cannot stop the print from happening (you might redefine print, though...)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 240678, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1456708403, "post_id": 35690300, "comment_id": 59058720, "body": "@Thilo  Well, it is good enough.  The execution cost won&#39;t hurt.  But in principle I&#39;d rather not execute void statements. Also, I was really curious whether it is possible to set a filehandle to something that will tell Perl &#39;do not print here&#39;."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1456710462, "post_id": 35690300, "comment_id": 59059177, "body": "@zdim: If <code>&#47;dev&#47;null</code> is <i>&quot;good enough&quot;</i> and <i>&quot;The execution cost won&#39;t hurt&quot;</i> then you have your answer. If you&#39;re creating a temporary hack to get the job done then you can&#39;t really afford to be fussy about executing <i>&quot;void statements&quot;</i>. Open your file handle to <code>&#47;dev&#47;null</code>. This is exactly the sort of case it is intended for"}, {"owner": {"reputation": 715, "user_id": 4630350, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--Dv4_vchBTQ/AAAAAAAAAAI/AAAAAAAAAAA/JlAVdHNIOdg/photo.jpg?sz=128", "display_name": "Q the Platypus", "link": "https://stackoverflow.com/users/4630350/q-the-platypus"}, "edited": false, "score": 0, "creation_date": 1456715299, "post_id": 35690300, "comment_id": 59060216, "body": "No matter what you do with the file handle &#39;print $fh do_something_expensive();&#39; is always going to run do_something_expensive()."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456717299, "post_id": 35690300, "comment_id": 59060667, "body": "@Borodin Yeah, good point.  Was hoping that there would be some hidden channel of comminication with Perl (<i>shh, don&#39;t actually print here</i>).  It&#39;s a good point, <code>&#47;dev&#47;null</code> is for that, and this is a hack."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 715, "user_id": 4630350, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--Dv4_vchBTQ/AAAAAAAAAAI/AAAAAAAAAAA/JlAVdHNIOdg/photo.jpg?sz=128", "display_name": "Q the Platypus", "link": "https://stackoverflow.com/users/4630350/q-the-platypus"}, "edited": false, "score": 0, "creation_date": 1456717394, "post_id": 35690300, "comment_id": 59060696, "body": "@QthePlatypus  Yes, that was the question.  Can I somehow set <code>$fh</code> to avoid running the print.  It&#39;s not expensive -- this was not about &#39;optimization&#39;, I should&#39;ve made that clear.  It&#39;s just ugly to run a few million pointless statements."}, {"owner": {"reputation": 715, "user_id": 4630350, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--Dv4_vchBTQ/AAAAAAAAAAI/AAAAAAAAAAA/JlAVdHNIOdg/photo.jpg?sz=128", "display_name": "Q the Platypus", "link": "https://stackoverflow.com/users/4630350/q-the-platypus"}, "edited": false, "score": 0, "creation_date": 1456717623, "post_id": 35690300, "comment_id": 59060760, "body": "@zdim no you can&#39;t.  Perl uses eager evaluation for the most part so that type of optimization isn&#39;t possible."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456707812, "post_id": 35690365, "comment_id": 59058577, "body": "Alright, thank you.  I&#39;d rather not print at all, if possible. In my understanding prints to <code>&#47;dev&#47;null</code> still go and I&#39;d rather not do all those prints at all, if possible.  But this is next best."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 4, "creation_date": 1456710850, "post_id": 35690365, "comment_id": 59059258, "body": "@zdim: Don&#39;t think about it. Unless you&#39;ve profiled your code and optimised the most severe bottlenecks then there are probably far worse atrocities in there that you don&#39;t know about. This is just premature optimisation"}], "tags": [], "owner": {"reputation": 715, "user_id": 4630350, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--Dv4_vchBTQ/AAAAAAAAAAI/AAAAAAAAAAA/JlAVdHNIOdg/photo.jpg?sz=128", "display_name": "Q the Platypus", "link": "https://stackoverflow.com/users/4630350/q-the-platypus"}, "is_accepted": false, "score": 3, "last_activity_date": 1456707627, "creation_date": 1456707627, "answer_id": 35690365, "question_id": 35690300, "link": "https://stackoverflow.com/questions/35690300/set-a-filehandle-so-that-prints-to-it-are-quietly-skipped/35690365#35690365", "title": "Set a filehandle so that prints to it are quietly skipped?", "body": "<p>If you are on a unix operating system you can use '/dev/null'</p>\n\n<pre><code>open my $fh, '&gt;', '/dev/null' or die 'This should never happen';\n</code></pre>\n\n<p>Dev null will silently accept all input.</p>\n"}, {"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1456714666, "post_id": 35691049, "comment_id": 59060088, "body": "That&#39;s a step in the wrong direction since it not only involves the OS, it writes to disk."}, {"owner": {"reputation": 715, "user_id": 4630350, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--Dv4_vchBTQ/AAAAAAAAAAI/AAAAAAAAAAA/JlAVdHNIOdg/photo.jpg?sz=128", "display_name": "Q the Platypus", "link": "https://stackoverflow.com/users/4630350/q-the-platypus"}, "edited": false, "score": 0, "creation_date": 1456715441, "post_id": 35691049, "comment_id": 59060249, "body": "Anon temp files like this are a pain in the ass for systems administrators as they can consume all the disk space and there is no way to see that this is happening."}, {"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1456718142, "post_id": 35691049, "comment_id": 59060894, "body": "1) The OP never stated there was not to be involvement of the OS"}], "tags": [], "owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "is_accepted": false, "score": -1, "last_activity_date": 1456713303, "creation_date": 1456713303, "answer_id": 35691049, "question_id": 35690300, "link": "https://stackoverflow.com/questions/35690300/set-a-filehandle-so-that-prints-to-it-are-quietly-skipped/35691049#35691049", "title": "Set a filehandle so that prints to it are quietly skipped?", "body": "<p>You can use <a href=\"http://perldoc.perl.org/functions/open.html\" rel=\"nofollow\">an anonymous, temporary file</a> (about a quarter of the way down the perldoc page) like so;</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse Getopt::Long;\n\nmy $fh;\nmy $need_log = 2;\nprint \"Intitial need_log: $need_log\\n\";\n\nGetOptions('flag!' =&gt; \\$need_log);\nprint \"After option processing, need_log: \", $need_log, \"\\n\";\n\nif ($need_log) {\n  open($fh, '&gt;', \"log.txt\") or die \"Failed to open log: $!\\n\";\n}\nelse {\n  open($fh, '&gt;', undef);\n}\n\nprint $fh \"Hello World... NOT\\n\";\nexit 0;\n</code></pre>\n\n<p>Here is a few runs with different use of the <strong>--flag</strong> option;</p>\n\n<pre><code>User@Ubuntu:~$ ls -l log.txt\nls: cannot access log.txt: No such file or directory\nUser@Ubuntu:~$ ./nf.pl\nIntitial need_log: 2\nAfter option processing, need_log: 2\nUser@Ubuntu:~$ cat log.txt\nHello World... NOT\nUser@Ubuntu:~$ rm log.txt\nUser@Ubuntu:~$\nUser@Ubuntu:~$\nUser@Ubuntu:~$ ./nf.pl --flag\nIntitial need_log: 2\nAfter option processing, need_log: 1\nUser@Ubuntu:~$ cat log.txt\nHello World... NOT\nUser@Ubuntu:~$ rm log.txt\nUser@Ubuntu:~$\nUser@Ubuntu:~$\nUser@Ubuntu:~$ ./nf.pl --noflag\nIntitial need_log: 2\nAfter option processing, need_log: 0\nUser@Ubuntu:~$ cat log.txt\ncat: log.txt: No such file or directory\nUser@Ubuntu:~$\n</code></pre>\n\n<p>I've initialized the <code>$need_log</code> variable to <strong>'2'</strong> so that we can tell if it has a <em>'True'</em> value as a result of the <code>flag</code> option being present (in which case it will have the value <strong>1</strong>) or as a result of no mention of the flag option at all (in which case it will have the value <strong>2</strong>).</p>\n\n<p>Specifying <strong>'--noflag'</strong> triggers the else clause which has <strong>'undef'</strong> as the third argument which creates the <em>anonymous temporary file.</em>  This doesn't perfectly match your question of not writing at all, but if the file is temporary and you're not putting gigabytes in it, this will hopefully suffice.</p>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456717072, "post_id": 35691210, "comment_id": 59060604, "body": "This pretty much answers it, if this is the only way. This was not at all about optimization, sorry if the question was unclear on that point.  I love system calls :). Just wanted to avoid executing a pointless statement a few million times. (The log is big.)  It&#39;s just ugly. I thought that there may be a way to tell Perl &#39;no prints here.&#39;  It appears that that is not possible.  Then it&#39;s going to be <code>&#47;dev&#47;null</code>.  Thank you.  This is a piece of magic :)."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564379238, "post_id": 35691210, "comment_id": 100995846, "body": "A simpler system-avoiding solution has occurred to me: One could create a PerlIO layer (e.g. see <a href=\"https://perldoc.perl.org/PerlIO/via.html\" rel=\"nofollow noreferrer\">PerlIO::via</a>) that&#39;s a sink (silently discards what&#39;s sent to it)."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564381791, "post_id": 35691210, "comment_id": 100996603, "body": "Wow, that&#39;s really interesting. I had no idea about it -- thank you :).  Will try it out :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564382231, "post_id": 35691210, "comment_id": 100996799, "body": "I found PerlIO::via lacking. I can&#39;t remember exactly what the problem was --something about inability to determine how much buffer space is available in the lower layer?-- but it meant that that you basically had to build the whole file in memory before sending it. The C API on which PerlIO::via is based didn&#39;t have the problem, so XS code could build a proper layer. But what you could do with PerlIO::via layers was limited. Obviously, not sending data to the lower layer until the handle is closed is not a problem when you are building a  sink :)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564469357, "post_id": 35691210, "comment_id": 101030275, "body": "Yup, easy as pie (for what I need) -- thank you!  There&#39;s still a method call  for each print (even as it does <i>nothing</i>, so overhead only), but well OK it&#39;s got to do <i>something</i> :).  And I need to go through <code>&#47;proc</code> to delete the file in <code>DESTROY</code>  (and can&#39;t do that everywhere), but, again, the whole issue presumes that a file <i>does</i> get opened; can always blow it away at the end of program.  It&#39;s cool (for what it is, a pure-Perl hook of sorts).  Thanks for warnings, too!"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564469513, "post_id": 35691210, "comment_id": 101030352, "body": "Combine with <code>open \\$var</code>, and no system file handle is open. (Even if there was, what&#39;s that about <code>&#47;proc</code>?!?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564469556, "post_id": 35691210, "comment_id": 101030374, "body": "I mean as I stay with empty file it&#39;d be good to delete it (in <code>DESTROY</code>), since if it&#39;s opened with this layer it&#39;s not needed; however, I don&#39;t have a way to get the filename, so it seems :("}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564469710, "post_id": 35691210, "comment_id": 101030430, "body": "&quot;<i>Combine with open <code>\\$var</code>, ...</i>&quot;  -- ah, nice :)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564469897, "post_id": 35691210, "comment_id": 101030514, "body": "Or override <code>OPEN</code>,<code>FDOPEN</code> and <code>SYSOPEN</code>."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1564470629, "post_id": 35691210, "comment_id": 101030864, "body": "Yes, writing to  in-memory (instead of file) takes care of it.  I didn&#39;t realize from docs that <code>OPEN</code> &amp; Co allow me to override those calls ... will try it out, this is fun and I can see even some uses :).  I wonder how it compares to tie-ing efficiency wise, will benchmark (should be better?)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1456714786, "last_edit_date": 1456714786, "creation_date": 1456714468, "answer_id": 35691210, "question_id": 35690300, "link": "https://stackoverflow.com/questions/35690300/set-a-filehandle-so-that-prints-to-it-are-quietly-skipped/35691210#35691210", "title": "Set a filehandle so that prints to it are quietly skipped?", "body": "<p>Through magic, you could create a magical handle for which operations are always successful.</p>\n\n<pre><code>perl -e'\n   {\n      package Handle::Dummy;\n      use Tie::Handle qw( );\n      use Symbol qw( gensym );\n      our @ISA = qw( Tie::Handle );\n      sub new { my $fh = gensym; tie *$fh, $_[0]; $fh }\n      sub TIEHANDLE { bless(\\my $dummy, $_[0]) }\n      sub READ  { return 1; }\n      sub WRITE { return 1; }\n      sub CLOSE { return 1; }\n   }\n\n   my $fh = Handle::Dummy-&gt;new();   \n   print($fh \"abc\\n\") or die $!;\n   close($fh) or die $!;\n   print(\"ok\\n\");\n'\nok\n</code></pre>\n\n<p>That avoids the systems calls, but it replaces them with expensive Perl subroutine calls.</p>\n\n<p>It's far simpler and more reliable<sup>[1]</sup> to simply use <code>/dev/null</code>. It could very well be faster too.</p>\n\n<hr>\n\n<blockquote>\n  <p><em>Are prints marked to go to <code>/dev/null</code> possibly optimized</em></p>\n</blockquote>\n\n<p>No. Perl doesn't know anything about <code>/dev/null</code>.</p>\n\n<p>How slow do you think a system call is? This doesn't sound like the right thing to optimize!</p>\n\n<hr>\n\n<ol>\n<li>The magical file handle is not associated with a system file handle, so it can't be passed to a C library, it won't survive <code>exec</code>, etc.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456722048, "post_id": 35692219, "comment_id": 59061877, "body": "Alright, that is interesting :).  I do <code>use warnings;</code> so much so that dropping them counts as something else. Seriously: There&#39;s a lot of other I/O running so this could be dangerous -- it disables it globally, for everything, right? Good idea though, didn&#39;t think of that."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 2, "last_activity_date": 1456721700, "creation_date": 1456721700, "answer_id": 35692219, "question_id": 35690300, "link": "https://stackoverflow.com/questions/35690300/set-a-filehandle-so-that-prints-to-it-are-quietly-skipped/35692219#35692219", "title": "Set a filehandle so that prints to it are quietly skipped?", "body": "<p>Closing your filehandle</p>\n\n<pre><code>close $fh;\n</code></pre>\n\n<p>will make all your <code>prints</code> to that file handle fail. Run</p>\n\n<pre><code>no warnings 'closed';\n</code></pre>\n\n<p>to suppress all the warning messages that would generate (you do <code>use warnings</code>, right?)</p>\n"}], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 35691210, "answer_count": 4, "score": 3, "last_activity_date": 1456736968, "creation_date": 1456707092, "last_edit_date": 1456736968, "question_id": 35690300, "link": "https://stackoverflow.com/questions/35690300/set-a-filehandle-so-that-prints-to-it-are-quietly-skipped", "title": "Set a filehandle so that prints to it are quietly skipped?", "body": "<p>This strange interest comes from expanding requirements and no time to change design (refactor).  This is not good design, sure,  but I need to deal with it now and hope to refactor later.</p>\n\n<p>There are a few log files opened early on which are printed to throughout code.  The new requirement implies that with a (new) command-line option (<code>--noflag</code>) one of these log files is irrelevant.</p>\n\n<p>All I could do at the moment is to pad the definition (<code>open my $fh, ...</code>) and <em>all uses</em> of it (<code>print $fh ...</code>) with <code>if $flag</code>. This is clearly bad design and it is error prone (it isn't pretty either).</p>\n\n<p>Is there a way to do something with <code>$fh</code> when it is associated with the file\nso that any following <code>print $fh ...</code> is accepted by intepreter but will result in simply not running the <code>print</code>, without error? (Let me imagine something like, say, <code>$fh = VOID if $flag;</code>.) Or, is there some <code>NULL</code> stream or such? All I know of are <code>STDOUT</code> (1), <code>STDERR</code> (2), and <code>STDIN</code> (0).</p>\n\n<p>I do not want <code>$fh</code> to print anywhere else, ideally not even to <code>/dev/null</code> (if that is possible?).  I did look around and couldn't find anything related. I'd appreciate being pointed to information if in fact it is out there already.\nAny ideas are appreciated.</p>\n\n<p><em>PS. First question ever asked here (after years of using SO), please let me know if it's off.</em></p>\n\n<p><br>\n<em>UPDATE</em></p>\n\n<p>Thanks for responses.  They prompt me to add to/refine this question: Are prints marked to go to <code>/dev/null</code> possibly optimized, so that the 'printing' actually doesn't happen? (While I am still interested in whether it is possible to set a filehandle so to tell to Perl 'do not print here'.)</p>\n\n<p>I am trying to avoid running void (print) statements, without adding conditionals.</p>\n\n<p><br>\n<em>Update/Clarification</em></p>\n\n<p>To summarize a bit from comments (thank you!): This was not a quest for performance optimization. I completely agree with everything said in comments on this. It is simply that executing pointless statements (typically around a million) makes me uneasy.  Also, I was curious about some possible dark corner of Perl that I haven't run into. (Most of this has been addressed in answers/comments.)</p>\n"}, {"tags": ["apache", "perl", ".htaccess", "mod-rewrite"], "answers": [{"tags": [], "owner": {"reputation": 18252, "user_id": 4175750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99b9dcc927d69a760e7025e097e6bf32?s=128&d=identicon&r=PG", "display_name": "Croises", "link": "https://stackoverflow.com/users/4175750/croises"}, "is_accepted": true, "score": 2, "last_activity_date": 1456693434, "creation_date": 1456693434, "answer_id": 35688246, "question_id": 35687656, "link": "https://stackoverflow.com/questions/35687656/htaccess-rewriterule-for-abc-xyz-myfiles-t/35688246#35688246", "title": ".htaccess RewriteRule for abc/xyz/myfile?s=t", "body": "<p>You need to use:</p>\n\n<pre><code>RewriteEngine On\nRewriteCond %{QUERY_STRING}  ^(.+)$\nRewriteRule ^abc/([_0-9a-z]+)/([_0-9a-z]+)$ index.php?id=abc&amp;a=$1&amp;b=$2.xml&amp;%1 [NC]\n</code></pre>\n\n<p>Because the query string is not part of the rewriterule left url.</p>\n"}], "owner": {"reputation": 138, "user_id": 5099952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/x5SAE.png?s=128&g=1", "display_name": "Seiten", "link": "https://stackoverflow.com/users/5099952/seiten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 35688246, "answer_count": 1, "score": 2, "last_activity_date": 1456693434, "creation_date": 1456690198, "last_edit_date": 1456693039, "question_id": 35687656, "link": "https://stackoverflow.com/questions/35687656/htaccess-rewriterule-for-abc-xyz-myfiles-t", "title": ".htaccess RewriteRule for abc/xyz/myfile?s=t", "body": "<p>I'm a newb. I want a rewrite rule that translates URLs on the form:</p>\n\n<pre><code>abc/xyz/myfile?s=t\n</code></pre>\n\n<p>to</p>\n\n<pre><code>index.php?id=abc&amp;a=xyz&amp;b=myfile.xml&amp;s=t\n</code></pre>\n\n<p>abc is a fixed prefix. xyz, myfile and the query string are back referenced.</p>\n\n<p>This is the .htaccess file:</p>\n\n<pre><code>RewriteEngine On\nRewriteRule ^abc/([_0-9a-z]+)/([_0-9a-z]+)\\?(.+)$ index.php?id=abc&amp;a=$1&amp;b=$2.xml&amp;$3 [NC]\n</code></pre>\n\n<p>It doesn't work. I debugged the rewrite rule with the following perl script:</p>\n\n<pre><code>#!perl\nuse strict;\nuse autodie;\n$_ = \"abc/xyz/myfile?s=t\";\nif ( /^abc\\/([_0-9a-z]+)\\/([_0-9a-z]+)\\?(.+)$/ ) {\n    print \"index.php?id=abc&amp;a=$1&amp;b=$2.xml&amp;$3\";\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>index.php?id=abc&amp;a=xyz&amp;b=myfile.xml&amp;s=t\n</code></pre>\n\n<p>Why doesn't the .htaccess file work?</p>\n\n<p><strong>Edit:</strong> Seems like the last parameter (s=t) in the result URL is ignored.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456754613, "post_id": 35687169, "comment_id": 59079361, "body": "I am not pressing you to vote on or accept one of the answers, but you may find it useful to read <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456697102, "post_id": 35687688, "comment_id": 59055445, "body": "Austin - I found an error in your line <code>if ($have_age_col &amp;&amp; &#47;^\\s*(\\d+)&#47;)</code>. It is picking up the percent field right before the &#39;THN&#39; line instead of the age value in the line just before the percent line. This could be fixed by a change to the regular expression capturing the age. <code>&#47;^\\s*(?&gt;(\\d+))(?!%)&#47;</code> captures all the digits (without backtracking) not followed by a <code>%</code> sign. The nonbacktracking is there to prevent the expression from backing up a digit (so that the following char would not be a <code>%</code>. and thus allow in unwanted match)."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456706468, "post_id": 35687688, "comment_id": 59058236, "body": "You&#39;re right! Thanks, @ChrisCharley. I&#39;ve modified it with a simple range restriction on the leading <code>\\s</code>, which gets the same effect."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456714240, "post_id": 35687688, "comment_id": 59059981, "body": "<code>$age_col = substr &quot;    &quot;.$1, -5</code> is probably better written as <code>$age_col = sprintf &#39;%5d&#39;, $1</code>"}, {"owner": {"reputation": 353, "user_id": 3529474, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/9f5cdfff81c7ad3743905b036deaf497?s=128&d=identicon&r=PG&f=1", "display_name": "jlb333333", "link": "https://stackoverflow.com/users/3529474/jlb333333"}, "edited": false, "score": 0, "creation_date": 1456747007, "post_id": 35687688, "comment_id": 59074270, "body": "Thank you @Austin-Hastings for your comments and code. I have tried to run it from the command line but it does not output to the file I specify.(Blank file) Obviously I must modify the last line. I tried removing the STDOUT without success. Could you help with enabling me to test this code please. Thank you again for the help."}, {"owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "edited": false, "score": 0, "creation_date": 1456785774, "post_id": 35687688, "comment_id": 59099165, "body": "You can change it to the &quot;OUTPUT&quot; file you were using in your own code. You didn&#39;t show how that was opened, so I didn&#39;t include it in my own."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1456706491, "last_edit_date": 1456706491, "creation_date": 1456690367, "answer_id": 35687688, "question_id": 35687169, "link": "https://stackoverflow.com/questions/35687169/perl-regex-more-than-one-line-to-match-and-output-in-a-given-format-completely/35687688#35687688", "title": "Perl regex: More than one line to match and output in a given format: Completely revised", "body": "<p>I copied and modified your example data, so this hasn't had a really good test. And I'm printing to STDOUT for testing purposes, but that should be easy to change.</p>\n\n<p>The trick is to recognize that you've got line matching to do, which is great with regexes, and other processing, which is probably better with plain old code. So build a little loop, and process the lines with equal precedence (this is important for detecting errors in the file - don't try to nest things too much). Put in some state variables to help keep track of what comes next, and be sure to reset them appropriately.</p>\n\n<p>Also, one thing I noticed in your example code is that you spent a lot if time getting spacing and number-of-digits right for the fields. That was almost certainly wasted time in this context, since the key was the \"THN\" at the start of the line. One trick with processing text is to focus on the things you really need, and use <code>.*</code> for the other stuff. That way, line noise or a syntax error or some strange formatting glitch won't screw up your program. (Sometimes <code>.*</code> becomes <code>[^\"]*</code> or whatever, but you take the point...)</p>\n\n<pre><code>my $line_prefix, $have_age_col, $age_col;\nwhile (&lt;&gt;) {\n    if (/^1\\(P1\\).*\\s(?P&lt;two_vars&gt;\\w+\\s+\\w+)\\s+PROCESSED .* TIME .* KSINA=.*$/) {\n        # Start new section\n        $line_prefix = $+{two_vars};\n        $have_age_col = 0;\n        $age_col = undef;\n    }\n    if (/^AGE /) {\n        $have_age_col = 1;\n    }\n    if ($have_age_col &amp;&amp; /^\\s{0,5}(\\d+)/) {\n        $age_col = substr \"    \".$1, -5;\n    }\n    if (/^THN /) {\n        die \"THN encountered without header\"\n            unless $line_prefix;\n        die \"THN encountered without age column\"\n            unless $have_age_col and $age_col;\n\n        s/^THN \\s*//;\n        s/\\s+$//;\n        my $output = \"$line_prefix $age_col $_\\n\";\n        print STDOUT $output;\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 3529474, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/9f5cdfff81c7ad3743905b036deaf497?s=128&d=identicon&r=PG&f=1", "display_name": "jlb333333", "link": "https://stackoverflow.com/users/3529474/jlb333333"}, "edited": false, "score": 0, "creation_date": 1456745865, "post_id": 35690543, "comment_id": 59073571, "body": "Thank you for your comments and code @Borodin. I have run it with an input file of 100,000 lines and the output at this stage, where I have not checked each line, seems to be 100% correct. I don&#39;t understand how the $age = $fields[0] picks up the age applicable to each specific thinning. How does it know to to pick the correct one?? Thank you very much."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 353, "user_id": 3529474, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/9f5cdfff81c7ad3743905b036deaf497?s=128&d=identicon&r=PG&f=1", "display_name": "jlb333333", "link": "https://stackoverflow.com/users/3529474/jlb333333"}, "edited": false, "score": 0, "creation_date": 1456749805, "post_id": 35690543, "comment_id": 59075996, "body": "@jlb333333: It just overwrites <code>$age</code> with the first field from every line if it is all-numeric, so when it arrives at a line starting with <code>THN</code> it contains the <i>most recent</i> value of the <code>AGE</code> column, which is the value required"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1467624860, "last_edit_date": 1467624860, "creation_date": 1456709110, "answer_id": 35690543, "question_id": 35687169, "link": "https://stackoverflow.com/questions/35687169/perl-regex-more-than-one-line-to-match-and-output-in-a-given-format-completely/35690543#35690543", "title": "Perl regex: More than one line to match and output in a given format: Completely revised", "body": "<p>This is much more simply done using <code>split</code> to separate each line into space-delimited fields, and quite straightforward if you maintain <em>state</em> variables for the two fields from the header row, and the age from any row whose first field is entirely digits. Then all that is necessary is to print these three values before the numbers on any line that starts with <code>THN</code></p>\n\n<p>Note that it's simplest to pass the name of the input file as a parameter on the command line. Then all you have to do is read from <code>&lt;&gt;</code>. All the opening and error handling are already done for you</p>\n\n<p>The output format you've asked for is rather esoteric. I can't see any pattern to the column widths and I've had to write a custom <code>printf</code> format to recreate it. If you need something else then all the values in each output line are in the <code>@data</code> array, which you can use as you wish</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nmy ($c1, $c2, $age);\n\nwhile ( &lt;&gt; ) {\n\n    next unless /\\S/;\n\n    my @fields = split;\n\n    if ( $fields[0] eq '1(P1)' ) {\n        ($c1, $c2) = @fields[10,11];\n    }\n    elsif ( $fields[0] !~ /\\D/ ) {\n        $age = $fields[0];\n    }\n    elsif ( $fields[0] eq 'THN' ) {\n        my @data = ( $c1, $c2, $age, @fields[1..13] );\n        printf \"%4s %5s %5d %5.1f%5.1f%7.4f%5d%4d%7d%3d%6d%5d%5d%5d%5d%5d\\n\", @data;\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre><code> C03   104     7  11.4  6.7 0.0230  164   2      4  1     3    2    0    0    0    0\n C03   104    13  17.5 12.2 0.1044  265   6     28  2    25    8   15    3    0    0\n C03   104    18  21.6 15.9 0.2142  220   8     47  2    45    6   19   20    0    0\n</code></pre>\n"}], "owner": {"reputation": 353, "user_id": 3529474, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/9f5cdfff81c7ad3743905b036deaf497?s=128&d=identicon&r=PG&f=1", "display_name": "jlb333333", "link": "https://stackoverflow.com/users/3529474/jlb333333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 35690543, "answer_count": 2, "score": 1, "last_activity_date": 1467624860, "creation_date": 1456687497, "question_id": 35687169, "link": "https://stackoverflow.com/questions/35687169/perl-regex-more-than-one-line-to-match-and-output-in-a-given-format-completely", "title": "Perl regex: More than one line to match and output in a given format: Completely revised", "body": "<p>If one can understand how to store stuff in memory, know where it is and how to get it out again in an orderly way it will go a long way to achieving results in Perl.(And probably all programming languages)</p>\n\n<p>I am not a programmer.</p>\n\n<p>I am trying to extract data from 'older program' output and import it into a SQL database. The extraction is the thing.</p>\n\n<p>My previous question was largely incorrect, as I found out when importing data into the table, as I did not have enough data from the 'old program' output file.</p>\n\n<p>I would like to learn from my mistake and re-ask my previous question, hopefully correctly this time.</p>\n\n<p>I have included my poor effort at extracting the data, exactly as it was last time. It doesn't come anywhere near getting the correct data out.</p>\n\n<p>I believe this is quite a complex question but maybe it isn't.\nIt is certainly above my level of Perl at present, and maybe ever.</p>\n\n<p>Answers to my incorrectly phrased question have been partially understood. Thank you very much for them.</p>\n\n<p>If I could summarize it, my main problem with this task is dealing with the type of question: 'If a line contains ... get data from two lines up and insert it at the beginning of ....  Seemingly impossible for me.\nI tried regex over the end of line searches but was unable to get that to work.\nI was unable also to arrange successive loops to insert data in lines as I wanted. If one loop worked, the next did not and so on. I was prepared to work on successive files in a step by step process but the 'two lines up' question stumped me completely.</p>\n\n<p>I was able to extract other data from these output files relatively easily as they are very orderly files, but this particular question has me stumped.</p>\n\n<p>My revised question is:</p>\n\n<p>My input file consists of batches of data(+-50 - 70 lines long) in the following format:</p>\n\n<pre><code>1(P1)      3 P.ell    05/0120 W/P068819 0 12.0 98/99  380 380           C03     104          PROCESSED 21/02/16 TIME 22.16.52 KSINA=8\n\nAGE   SPH   %THN  %INC     SV SI   MAI20  HTPC  VIPC   AGE BA  DBH   HT  SPH   CIH% CIV%    CVD BCON    CMAI      C0   C0CAL    SI20\n0  1100     .0  89.0%SPH  2  2     .00    .0    .0 20.00  1   .0 17.3    0     .0   .0     .0   .0    .0000    .000    0%      .00\n 7   815   25.9    .0      2  2    9.90  75.5  47.2 20.00  1 26.6 17.3  330     .0   .0     .0 13.0    .2099   1.005   .000   17.30\n13   550   32.5    .0                                                                                                              \n18   330   40.0    .0                                                                                                              \n45     0  100.0    .0                                                                                                              \n0SQ     -4  -4  -4  = SI20  17 17 17              PLANTN---104 GREEN MEADOWS       MODEL---P.ELLIOTTII MAC MAC   SQ    10 SI20  22.90\nHTPC   76  76  76  =MAI20  10 10 10 FROM HTPC                                                                   HTPC 100 MAI20 20.71\nVIPC   47  47  47  =MAI20  10 10 10              HTPC/VIPC REGRESSION---P.ELLIOTTII GENERAL 1/83                VIPC 100 MAI20 20.99\n                 MAIDBH     0                                                                                                    \n                 INMAI==&gt;   0                                                                                                    \n0INPUT FOR CALCULATING HTPC &amp; VIPC =  HT  ---- ----                                                                                  \n\nAGE  DBH   HT  VTREE  SPH  BA  TOTAL WS  UTIL    S    A    B    C    D   TCAI CTCAI  TMAI   UCAI CUCAI  UMAI   SCAI CSCAI  SMAI IAGE\n\n1   .0   .2  .0000  979   0      0  0     0    0    0    0    0    0     .0     0    .0     .0     0    .0     .0     0    .0  1.0\n2   .0   .9  .0000  979   0      0  0     0    0    0    0    0    0     .0     0    .0     .0     0    .0     .0     0    .0  2.0\n3  3.9  2.0  .0007  979   1      1  1     0    0    0    0    0    0     .7     1    .2     .0     0    .0     .0     0    .0  3.0\n4  7.1  3.4  .0041  979   4      4  3     1    1    0    0    0    0    3.4     4   1.0     .6     1    .2     .0     0    .0  4.0\n5  9.4  4.6  .0102  979   7     10  5     5    5    0    0    0    0    5.9    10   2.0    4.1     5    .9     .0     0    .0  5.0\n6 11.3  5.7  .0188  979  10     18  6    12   12    1    0    0    0    8.4    18   3.1    7.5    12   2.0     .0     0    .0  6.0\n7 13.0  6.7  .0293  979  13     29  7    22   19    3    0    0    0   10.3    29   4.1    9.7    22   3.1     .0     0    .0  7.0\n                   17%                                                                                                           \nTHN 11.4  6.7  .0230  164   2      4  1     3    2    0    0    0    0                                                              \nREM 13.4  6.7  .0315  815  12     26  6    20   17    3    0    0    0                                                              \n\n 8 15.0  7.6  .0453  815  14     37  6    31   21   10    0    0    0   11.2    40   5.0   10.9    33   4.1     .0     0    .0  7.6\n 9 16.4  8.5  .0607  815  17     49  6    43   23   20    0    0    0   12.5    52   5.8   12.2    45   5.0     .2     0    .0  8.6\n10 17.4  9.4  .0771  815  19     63  7    56   24   30    2    0    0   13.4    66   6.6   13.1    58   5.8    1.3     2    .2  9.6\n11 18.3 10.3  .0941  815  21     77  7    70   24   41    5    0    0   13.9    80   7.3   13.6    72   6.5    3.0     5    .4 10.6\n12 19.0 11.3  .1118  815  23     91  7    84   24   50   10    0    0   14.4    94   7.8   14.1    86   7.2    5.4    10    .8 11.6\n13 19.6 12.2  .1299  815  25    106  8    98   24   56   18    0    0   14.7   109   8.4   14.4   100   7.7    8.0    18   1.4 12.6\n                   33%                                                                                                           \nTHN 17.5 12.2  .1044  265   6     28  2    25    8   15    3    0    0                                                              \nREM 20.6 12.2  .1421  550  18     78  5    73   16   42   15    0    0                                                              \n\n14 21.3 13.0  .1636  550  20     90  6    84   16   44   25    0    0   11.8   121   8.6   11.6   112   8.0   10.0    28   2.0 10.4\n15 22.0 13.7  .1864  550  21    103  6    97   16   45   36    0    0   12.5   133   8.9   12.3   124   8.3   11.0    39   2.6 11.2\n16 22.7 14.5  .2100  550  22    116  6   109   15   46   48    0    0   13.0   146   9.1   12.7   137   8.6   12.0    51   3.2 12.0\n17 23.3 15.3  .2345  550  23    129  6   123   15   46   61    0    0   13.5   160   9.4   13.2   150   8.8   12.9    64   3.8 12.8\n18 23.9 15.9  .2598  550  25    143  7   136   15   46   74    1    0   13.9   174   9.6   13.6   164   9.1   13.8    78   4.3 13.6\n                   40%                                                                                                           \nTHN 21.6 15.9  .2142  220   8     47  2    45    6   19   20    0    0                                                              \nREM 25.3 15.9  .2901  330  17     96  4    92    9   28   54    1    0                                                              \n\n19 26.0 16.6  .3203  330  17    106  4   101    9   27   63    3    0   10.0   184   9.7    9.8   174   9.1   10.5    88   4.6 11.0\n20 26.6 17.3  .3519  330  18    116  5   112    9   27   71    5    0   10.4   194   9.7   10.2   184   9.2   10.6    99   4.9 11.7\n21 27.2 18.0  .3849  330  19    127  5   122    9   27   80    8    0   10.9   205   9.8   10.7   194   9.3   11.1   110   5.2 12.4\n22 27.9 18.7  .4192  330  20    138  5   133    8   26   87   11    0   11.3   216   9.8   11.1   206   9.3   11.5   121   5.5 13.2\n23 28.4 19.3  .4546  330  21    150  5   145    8   26   94   16    0   11.7   228   9.9   11.4   217   9.4   11.8   133   5.8 14.0\n24 29.0 20.0  .4914  330  22    162  5   157    8   26  101   22    0   12.2   240  10.0   11.9   229   9.5   12.3   145   6.1 14.9\n25 29.6 20.6  .5292  330  23    175  6   169    8   25  106   29    0   12.5   253  10.1   12.2   241   9.6   12.6   158   6.3 15.7\n26 30.2 21.2  .5682  330  24    188  6   182    8   25  112   37    0   12.9   265  10.2   12.6   254   9.8   13.0   171   6.6 16.5\n27 30.7 21.8  .6083  330  25    201  6   194    8   25  115   46    0   13.2   279  10.3   13.0   267   9.9   13.3   184   6.8 17.3\n28 31.3 22.4  .6492  330  25    214  7   208    8   24  119   56    1   13.5   292  10.4   13.2   280  10.0   13.6   198   7.1 18.2\n29 31.9 23.0  .6908  330  26    228  7   221    8   24  122   65    2   13.7   306  10.5   13.5   293  10.1   13.8   212   7.3 19.0\n30 32.4 23.5  .7332  330  27    242  7   235    8   24  123   77    3   14.0   320  10.7   13.7   307  10.2   14.0   226   7.5 19.8\n31 33.0 23.9  .7766  330  28    256  7   249    8   24  125   88    5   14.3   334  10.8   14.0   321  10.4   14.3   240   7.7 20.4\n32 33.6 24.4  .8202  330  29    271  8   263    8   23  126   99    7   14.4   349  10.9   14.1   335  10.5   14.4   255   8.0 21.0\n</code></pre>\n\n<p>Firstly the two variables in the first line(1(P1...): in this case 'C03    104' need to be extracted from it and be sent to OUTPUT.(Same as previous question, but the output position changes.)</p>\n\n<p>Secondly, all lines beginning with 'THN' need to be extracted as they are except that the THN can be dropped.\nIf there are two, three, four or even five etc. 'THN' lines, they all need to be extracted from the batch and sent to OUTPUT.(+- same as previous question)</p>\n\n<p>Thirdly, although sequentially the second step, the last figure in the 'AGE' column of the main tabular data just before the 'THN' line, needs to be attached to the extracted 'THN' line directly below it.(in this case the figures 7, 13 and 18) These need to be added to their respective THN lines. See expected output below where the ages have been inserted after the two 'C03 104' variables in each line.</p>\n\n<p>If there are no 'THN' lines in a given batch, the entire batch should be ignored, with no output, and the next batch(starting with a '1(P1)' again) considered.</p>\n\n<p>The correct output expected from the above batch is:</p>\n\n<pre><code> CO3   104     7  11.4  6.7  .0230  164   2      4  1     3    2    0    0    0    0\n CO3   104    13  17.5 12.2  .1044  265   6     28  2    25    8   15    3    0    0\n CO3   104    18  21.6 15.9  .2142  220   8     47  2    45    6   19   20    0    0\n</code></pre>\n\n<p>As will be seen from this, the two variables from the top line are inserted at the start of the output THN data line. The age figure read from the input batch is then inserted into its respective THN line and thereafter the rest of the THN line data is attached.</p>\n\n<p>My effort some time ago but not updated is as follows:</p>\n\n<pre><code>while ( my $line = &lt;INPUT&gt; ) {\n\n                if($line =~ /\\s{6,11}(\\w{1}\\d{1}\\w{0,5})\\s{0,5}(\\d{3})/) {\n                my @c_no = \"$1,$2\\n\";   \n                foreach (@c_no) {\n                print OUTPUT $_;                    \n                }\n                if ($line =~ /^(\\s{1}THN)(\\s{1,3}\\d{0,2}.\\d)(\\s{1,3}\\d{0,2}.\\d)(\\s{1,2}\\d{0,1}.\\d{4})(\\s{1,2}\\d{2,4})\n                            (\\s{2,3}\\d{1,2})(\\s{1,6}\\d{1,4})(\\s{1,2}\\d{1,2})(\\s{1,5}\\d{1,4})(\\s{1,4}\\d{1,4})\n                            (\\s{1,4}\\d{1,4})(\\s{1,4}\\d{1,4})(\\s{1,4}\\d{1,4})(\\s{1,4}\\d{1,4})|(^1(P1))/x){\n\n                print OUTPUT \"$1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14\\n\";\n                }           \n                }\n                }\n</code></pre>\n\n<p>Advice, guidance and help would be greatly appreciated.</p>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "is_accepted": true, "score": 4, "last_activity_date": 1456729992, "creation_date": 1456729992, "answer_id": 35693814, "question_id": 35685112, "link": "https://stackoverflow.com/questions/35685112/why-fall-back-to-cwd-if-getcwd-does-not-have-access/35693814#35693814", "title": "Why fall back to cwd() if getcwd() does not have access?", "body": "<p>As the comment says, <code>getcwd()</code> can fail if the process doesn't have enough access to the current directory (and all its ancestors). <code>cwd()</code> has the potential to shell out to a possibly-setuid external <code>pwd</code> command and get the directory even in that case.</p>\n\n<p>More generally, <code>getcwd()</code> is documented to behave like the POSIX <code>getcwd</code> call. <code>cwd()</code> is documented as being more flexible. The difference between them will likely be very small on Linux, but both the <code>Cwd</code> and <code>FindBin</code> modules are intended to work on all the platforms that Perl support. Those include Windows, VMS, pre-OSX MacOS, IBM z/OS and a bucketload of others. On those, the difference between the commands may well be significant.</p>\n"}], "owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 35693814, "answer_count": 1, "score": 4, "last_activity_date": 1456729992, "creation_date": 1456676940, "last_edit_date": 1495541250, "question_id": 35685112, "link": "https://stackoverflow.com/questions/35685112/why-fall-back-to-cwd-if-getcwd-does-not-have-access", "title": "Why fall back to cwd() if getcwd() does not have access?", "body": "<p>The <a href=\"https://metacpan.org/pod/FindBin\" rel=\"nofollow noreferrer\"><code>FindBin</code></a> module determines the current working directory at compile time using this function (see source code <a href=\"https://metacpan.org/source/SHAY/perl-5.22.1/lib/FindBin.pm\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>sub cwd2 {\n   my $cwd = getcwd();\n   # getcwd might fail if it hasn't access to the current directory.\n   # try harder.\n   defined $cwd or $cwd = cwd();\n   $cwd;\n}\n</code></pre>\n\n<p>where <code>cwd()</code> and <code>getcwd()</code> are both imported from the <a href=\"https://metacpan.org/pod/Cwd\" rel=\"nofollow noreferrer\"><code>Cwd</code></a> module. In which cases would <code>getcwd()</code> fail but <code>cwd()</code> still work? ( I am most interested in the Linux platform if that matters )</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/25219996/2173773\">How do Perl Cwd::cwd and Cwd::getcwd functions differ?</a></li>\n<li><a href=\"http://www.dagolden.com/index.php/2312/why-you-should-use-getcwd-and-not-cwd/\" rel=\"nofollow noreferrer\">Why you should use getcwd and not cwd</a></li>\n</ul>\n"}, {"tags": ["perl", "perl-module"], "comments": [{"owner": {"reputation": 30517, "user_id": 774499, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/sju2a.jpg?s=128&g=1", "display_name": "David Hammen", "link": "https://stackoverflow.com/users/774499/david-hammen"}, "edited": false, "score": 1, "creation_date": 1456676134, "post_id": 35684864, "comment_id": 59047266, "body": "There&#39;s no reason to use <code>&quot;$name&quot;</code>. Just use <code>$name</code>. But you have to trim the newline at the end of <code>$name</code> before you do the comparison."}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "edited": false, "score": 0, "creation_date": 1456676991, "post_id": 35684864, "comment_id": 59047549, "body": "Although it&#39;s valid like you wrote it (by accident, I guess), please call your subroutines like this: <code>Granted();</code>, i.e. with parens <code>()</code> and a final <code>;</code>. The <code>;</code> <i>may</i> be omitted after the last statement in a block (like you do), but it&#39;s ugly."}, {"owner": {"reputation": 61610, "user_id": 725418, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/82ac2dc3e1ad4b7187f245c416528df9?s=128&d=identicon&r=PG", "display_name": "TLP", "link": "https://stackoverflow.com/users/725418/tlp"}, "edited": false, "score": 1, "creation_date": 1456679425, "post_id": 35684864, "comment_id": 59048508, "body": "When in doubt: <code>use Data::Dumper; $Data::Dumper::Useqq=1; print Dumper $name;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1456676038, "last_edit_date": 1456676038, "creation_date": 1456676008, "answer_id": 35684922, "question_id": 35684864, "link": "https://stackoverflow.com/questions/35684864/how-to-do-an-if-statement-in-perl/35684922#35684922", "title": "How to do an if statement in perl?", "body": "<p>You've misdiagnosed the problem. The <code>if</code> is fine, the problem is the data you are comparing to the input.</p>\n\n<p>When you read from a file handle, you include the record separator character (by default that is a new line).</p>\n\n<p>You are comparing <code>\"jake\\n\"</code> to <code>\"jake\"</code>.</p>\n\n<p>See also <code>chomp</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 5911380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1725212014392629/picture?type=large", "display_name": "Mumat Ayub Ali", "link": "https://stackoverflow.com/users/5911380/mumat-ayub-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1456681861, "answer_count": 1, "score": -2, "last_activity_date": 1456676038, "creation_date": 1456675709, "question_id": 35684864, "link": "https://stackoverflow.com/questions/35684864/how-to-do-an-if-statement-in-perl", "closed_reason": "Duplicate", "title": "How to do an if statement in perl?", "body": "<p>Having a problem with if statement in Perl, my if statement is not working. What am I doing wrong, because I'm using strict and warnings module, but still my if statement is not working.</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\n\n\nsub Granted\n{\n    print \"\\n\\nAccess Granted\\n\\n\";\n}\n\n\nsub Access\n{\n    print \"\\n\\n\\n\\n\";\n    sleep 1;\n    print \"Enter your name: \";\n    my $name = &lt;STDIN&gt;;\n    sleep 1;\n\n    if (\"$name\" eq \"jake\")\n    {\n        Granted\n    }\n\n}\n\nAccess \n</code></pre>\n"}, {"tags": ["regex", "perl", "vim", "sed"], "answers": [{"comments": [{"owner": {"reputation": 155597, "user_id": 1745001, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99a3ebae89496eb16afe453aae97f5be?s=128&d=identicon&r=PG", "display_name": "Ed Morton", "link": "https://stackoverflow.com/users/1745001/ed-morton"}, "edited": false, "score": 0, "creation_date": 1456677397, "post_id": 35684237, "comment_id": 59047679, "body": "FYI in awk you wouldn&#39;t need to duplicate the <code>&#47;11&#47;</code>: <code>awk &#39;gsub(&#47;11&#47;,&quot;00&quot;){gsub(&#47;22&#47;,&quot;11&quot;)}1&#39;</code>."}], "tags": [], "owner": {"reputation": 7747, "user_id": 4086774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa70eacd799b083b10a8a43b418e2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Lars Fischer", "link": "https://stackoverflow.com/users/4086774/lars-fischer"}, "is_accepted": true, "score": 2, "last_activity_date": 1456672883, "last_edit_date": 1456672883, "creation_date": 1456672568, "answer_id": 35684237, "question_id": 35684190, "link": "https://stackoverflow.com/questions/35684190/multiple-substitute-commands-when-matching-some-lines-in-sed/35684237#35684237", "title": "Multiple substitute commands when matching some lines in sed", "body": "<p>You could use:</p>\n\n<pre><code>echo \"-&gt;11,22&lt;-\n-&gt;01,20&lt;-\" | sed '/11/ {s/11/00/g; s/22/11/g}'\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>-&gt;00,11&lt;-\n-&gt;01,20&lt;-\n</code></pre>\n\n<ul>\n<li>the <code>/11/</code> restricts the <code>s</code> commands inside its <code>{ ... }</code> block only to  matching lines</li>\n</ul>\n"}], "owner": {"reputation": 8726, "user_id": 29246, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f16f99fb7a80c71d880a1b92ce3498ad?s=128&d=identicon&r=PG", "display_name": "Mert Nuhoglu", "link": "https://stackoverflow.com/users/29246/mert-nuhoglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 35684237, "answer_count": 1, "score": 1, "last_activity_date": 1456672883, "creation_date": 1456672325, "question_id": 35684190, "link": "https://stackoverflow.com/questions/35684190/multiple-substitute-commands-when-matching-some-lines-in-sed", "title": "Multiple substitute commands when matching some lines in sed", "body": "<p>With Vim's global command, it is possible to chain multiple commands with <code>|</code> (pipe) symbol when matching some lines, for example:</p>\n\n<pre><code>g/match/ s/11/00/ | s/22/11/g\n</code></pre>\n\n<p>Is this also possible with sed without repeating the <code>match</code> regex?</p>\n\n<pre><code>sed -e '/match/ s/11/00/ ; /match/ s/22/11/g ' $file\n</code></pre>\n\n<p>If not, is it possible to do this with perl?</p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456664931, "post_id": 35682449, "comment_id": 59043203, "body": "Is this homework? It&#39;s fine to ask homework questions, but you should say if so as the sort of answer you get should be more tailored to help you learn than just to get a result"}, {"owner": {"reputation": 27, "user_id": 5991691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9579c172e09bdafc0c6839946a05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Rabs", "link": "https://stackoverflow.com/users/5991691/rabs"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456666103, "post_id": 35682449, "comment_id": 59043603, "body": "no it isn&#39;t, just a tutorial that I&#39;m doing to increase my perl knowledge"}, {"owner": {"reputation": 5334, "user_id": 5830574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/kCmqs.png?s=128&g=1", "display_name": "PerlDuck", "link": "https://stackoverflow.com/users/5830574/perlduck"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456674577, "post_id": 35682449, "comment_id": 59046669, "body": "@Borodin He goes <a href=\"http://stackoverflow.com/q/35676307/5830574\">step by step</a> and asks if he gets stuck. I appreciate that."}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1467625103, "last_edit_date": 1467625103, "creation_date": 1456664686, "answer_id": 35682883, "question_id": 35682449, "link": "https://stackoverflow.com/questions/35682449/perl-how-to-only-add-numbers-in-each-row-of-a-file/35682883#35682883", "title": "Perl, how to only add numbers in each row of a file", "body": "<p>Reading a file into an array and then iterating over the array isn't generally an improvement over just iterating over the file. You shouldn't read the whole file into memory unless you particularly need to for some reason like requiring random access to the data</p>\n\n<p>Your data format isn't very usable unless you actually have <em>tabs</em> separating the name from the surrounding fields. Otherwise there is no way to distinguish parts of the name from the rest of the fields</p>\n\n<p>This program works by repeatedly adding together the last two fields of each line until the last field but one isn't numeric. It assumes the last field of every line is always numeric and doesn't make any checks for this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nwhile ( &lt;DATA&gt; ) {\n\n    my @fields = split;\n\n    while ( $fields[-2] =~ /\\A\\d+\\z/ ) {\n        push @fields, pop(@fields) + pop(@fields);\n    }\n\n    print \"@fields\\n\";\n}\n\n__DATA__\n1 Bob J Smith 3 4 2 1 10 8\n2 James Miller 5 3 82 3 44 1\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>1 Bob J Smith 28\n2 James Miller 138\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 5889745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6e1d09e53789c17ad12bef08a52e3e?s=128&d=identicon&r=PG&f=1", "display_name": "Jorgen", "link": "https://stackoverflow.com/users/5889745/jorgen"}, "is_accepted": false, "score": 0, "last_activity_date": 1456669006, "creation_date": 1456669006, "answer_id": 35683596, "question_id": 35682449, "link": "https://stackoverflow.com/questions/35682449/perl-how-to-only-add-numbers-in-each-row-of-a-file/35683596#35683596", "title": "Perl, how to only add numbers in each row of a file", "body": "<p>Or use regular expressions to divide each line into name and numbers and then total the numbers.</p>\n\n<pre><code>while (&lt;DATA&gt;)\n{  \n    chomp;\n    next if /^$/;\n    my $total = 0;\n    /\\d+ ([A-Za-z ]+) ([\\s\\d]+)$/;\n    my @numbers = split(' ', $2);\n    $total += $_ for (@numbers);\n    print \"$1: $total\\n\";\n}\n\n__DATA__\n1 Bob J Smith 3 4 2 1 10 8\n2 James Miller 5 3 82 3 44 1\n3 Allan X Smith 5 4 82 3 44 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 5983598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48d539e9b534f278c139ce01cadf7b70?s=128&d=identicon&r=PG", "display_name": "mr_ron", "link": "https://stackoverflow.com/users/5983598/mr-ron"}, "is_accepted": false, "score": 0, "last_activity_date": 1456670081, "creation_date": 1456670081, "answer_id": 35683781, "question_id": 35682449, "link": "https://stackoverflow.com/questions/35682449/perl-how-to-only-add-numbers-in-each-row-of-a-file/35683781#35683781", "title": "Perl, how to only add numbers in each row of a file", "body": "<p>Possibly simpler and more straight forward:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse List::Util 'sum';\n\nwhile ( &lt;DATA&gt; ) {\n    my @row = split;\n\n    print shift @row, ' '; # print row number\n\n    while (@row and $row[0] !~ /^\\d+$/) { # print name\n        print shift @row, ' ';\n    }\n\n    print sum(@row, 0), $/;\n}\n\n__DATA__\n1 Bob J Smith 3 4 2 1 10 8\n2 James Miller 5 3 82 3 44 1\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5991691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9579c172e09bdafc0c6839946a05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Rabs", "link": "https://stackoverflow.com/users/5991691/rabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467625103, "creation_date": 1456662052, "last_edit_date": 1456664394, "question_id": 35682449, "link": "https://stackoverflow.com/questions/35682449/perl-how-to-only-add-numbers-in-each-row-of-a-file", "title": "Perl, how to only add numbers in each row of a file", "body": "<p>I have a text file, looking similar to this:</p>\n\n<pre><code>1 Bob J Smith 3 4 2 1 10 8\n2 James Miller 5 3 82 3 44 1\n3 ...\n</code></pre>\n\n<p>What I'm trying to achieve is to only add the numbers in each row and give total per person. But has to skip past the first number (that is before the name) and text and only compute numbers. My <code>@lines</code> array holds the file I need to work with. </p>\n\n<pre><code>my $total;\nmy @row;\nforeach(@lines){\n        @row=split;\n        $total=0;\n        $total+=$_ for @row[3..$#row];\n        print \"$row[0]: $total\\n\";\n}\nprint \"$row[0]: $total\\n\";\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"tags": [], "owner": {"reputation": 1790, "user_id": 2926055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec33a10c7a355ea0266d08e0808a35?s=128&d=identicon&r=PG&f=1", "display_name": "user2926055", "link": "https://stackoverflow.com/users/2926055/user2926055"}, "is_accepted": false, "score": 7, "last_activity_date": 1456626777, "creation_date": 1456626777, "answer_id": 35678030, "question_id": 35677918, "link": "https://stackoverflow.com/questions/35677918/illegal-division-by-zero-when-running-perl-script/35678030#35678030", "title": "Illegal division by zero when running perl script", "body": "<p>First, <code>use strict; use warnings;</code> at the top of every single perl script you ever write. This will tell you about the second issue:</p>\n\n<p>Second, you are attempting to read from filehandles named <code>Imax</code> and <code>Imin</code>, so of course you're getting a divide-by-zero (or rather, undefined that is getting cast to zero in this case). These filehandles do not exist in your script.</p>\n"}], "owner": {"reputation": 11, "user_id": 5991425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa8e0dbb17ac3e8b0617876b6c865480?s=128&d=identicon&r=PG", "display_name": "xyz", "link": "https://stackoverflow.com/users/5991425/xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1549, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458719081, "creation_date": 1456625622, "last_edit_date": 1456625695, "question_id": 35677918, "link": "https://stackoverflow.com/questions/35677918/illegal-division-by-zero-when-running-perl-script", "title": "Illegal division by zero when running perl script", "body": "<p>I am running the following Perl script:</p>\n\n<pre><code>#!/usr/bin/env perl\n\n$file1 = $ARGV[0];\n\nsystem(\"analyze $file1 M | grep Moments -A 4 &gt; inertia.dat\");\n\nopen(INFILE, \"inertia.dat\") or die \"Can't open file: $!\";\n\n$line = &lt;INFILE&gt;;\n$line = &lt;INFILE&gt;;\n$line = &lt;INFILE&gt;;\n$line = &lt;INFILE&gt;;\n$line = &lt;INFILE&gt;;\n\n$I1 = substr($line,16,12);\n$line = &lt;INFILE&gt;;\n$I2  = substr($line,16,12);\n$line = &lt;INFILE&gt;;\n$I3  = substr($line,16,12);\n$line = &lt;INFILE&gt;;    \n\nif (($I1&gt;$I2) &amp;&amp; ($I1&gt;$I3)) {$I1 = &lt;Imax&gt;;}\nif (($I2&gt;$I1) &amp;&amp; ($I2&gt;$I3)) {$I2 = &lt;Imax&gt;;}\nif (($I3&gt;$I1) &amp;&amp; ($I31&gt;$I2)) {$I3 = &lt;Imax&gt;;}\nif (($I1&lt;$I2) &amp;&amp; ($I1&lt;$I3)) {$I1 = &lt;Imin&gt;;}\nif (($I2&lt;$I1) &amp;&amp; ($I2&lt;$I3)) {$I2 = &lt;Imin&gt;;}\nif (($I3&lt;$I1) &amp;&amp; ($I3&lt;$I2)) {$I3 =&lt;Imin&gt;;}\n\n$delta = ((&lt;Imax&gt;)-(&lt;Imin&gt;))/(&lt;Imax&gt;);\nprint \"$I1 $I2 $I3\\n\";\n\nclose INFILE;\n</code></pre>\n\n<p>When I run the file, I get \"Illegal division by zero at line 45\"</p>\n\n<p>Line 45 is</p>\n\n<pre><code>$delta = ((&lt;Imax&gt;)-(&lt;Imin&gt;))/(&lt;Imax&gt;);\n</code></pre>\n\n<p>An example of the inertia.dat file is:</p>\n\n<p>Moments of Inertia and Principal Axes :</p>\n\n<pre><code>         Moments (amu Ang^2)          X-, Y- and Z-Components of Axes\n\n             102508.853              0.096680    0.000809   -0.995315\n             114243.409              0.393377   -0.918614    0.037464\n             118155.898             -0.914280   -0.395156   -0.089130\n</code></pre>\n"}, {"tags": ["arrays", "perl", "file", "lines"], "answers": [{"comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "reply_to_user": {"reputation": 27, "user_id": 5991691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9579c172e09bdafc0c6839946a05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Rabs", "link": "https://stackoverflow.com/users/5991691/rabs"}, "edited": false, "score": 0, "creation_date": 1456613563, "post_id": 35676382, "comment_id": 59031557, "body": "also if Perl is not a strict requirement here, you can do it with many other linux command line tools. For instance, using <code>head</code> and <code>tail</code> you could say: <code>head -15 filename | tail -n +2</code>"}, {"owner": {"reputation": 27, "user_id": 5991691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9579c172e09bdafc0c6839946a05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Rabs", "link": "https://stackoverflow.com/users/5991691/rabs"}, "edited": false, "score": 0, "creation_date": 1456614785, "post_id": 35676382, "comment_id": 59031952, "body": "thank you, this has helped alot. what im trying to do, is in each line there are a few columns of numbers separated by spaces. First column is a name and then onward are about 5 columns of numbers. Each line has a different name and different set of numbers. if this makes sense. So trying to add each line total. Quite tricky for a novice. So thought to start out is to store the lines that I&#39;m wanting into an array."}], "tags": [], "owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "is_accepted": true, "score": 0, "last_activity_date": 1456612983, "creation_date": 1456612983, "answer_id": 35676382, "question_id": 35676307, "link": "https://stackoverflow.com/questions/35676307/storing-lines-of-file-into-array/35676382#35676382", "title": "Storing lines of file into array", "body": "<p>Perl actually has a variable, <code>$.</code>, that represents the current line from the most recently used File handle:</p>\n\n<p>From <code>perldoc -v $.</code>:</p>\n\n<blockquote>\n  <p>HANDLE->input_line_number( EXPR ) </p>\n  \n  <p>$INPUT_LINE_NUMBER</p>\n  \n  <p>$NR </p>\n  \n  <p>$.</p>\n  \n  <p>Current line number for the last filehandle accessed.</p>\n  \n  <p>Each filehandle in Perl counts the number of lines that have been read\n  from it. (Depending on the value of $/ , Perl's idea of what\n  constitutes a line may not match yours.) When a line is read from a\n  filehandle (via readline() or &lt;> ), or when tell() or seek() is called\n  on it, $. becomes an alias to the line counter for that filehandle.</p>\n</blockquote>\n\n<p>You can use this variable to drastically simplify your code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = 'info.text';\nopen(FILE, $filename) \n   or die \"Could not read from $filename, program halting.\";\n\nmy @lines;\nwhile(&lt;FILE&gt;){\n    next unless $. &gt;= 2 &amp;&amp; $. &lt;= 15;\n    push @lines, $_;\n}\nclose FILE;\nprint @lines;\n</code></pre>\n\n<p>You can wrap this code, or a modified version in a subroutine that accepts a filehandle, starting line, and ending line to make it more flexible. </p>\n\n<p>Another note that is unrelated to your problem at hand, it is recommended that you <a href=\"http://modernperlbooks.com/mt/2010/04/three-arg-open-migrating-to-modern-perl.html\" rel=\"nofollow\">always use three argument open</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 1, "creation_date": 1456613829, "post_id": 35676487, "comment_id": 59031647, "body": "The only downside of this is that the entire file is read into memory, otherwise it is a lot cleaner."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1456613629, "creation_date": 1456613629, "answer_id": 35676487, "question_id": 35676307, "link": "https://stackoverflow.com/questions/35676307/storing-lines-of-file-into-array/35676487#35676487", "title": "Storing lines of file into array", "body": "<p>Much simpler to do it numerically:</p>\n\n<pre><code>my @lines = (&lt;FILE&gt;)[1..14];\n</code></pre>\n\n<p>(Note - <code>perl</code> arrays start at zero - your 'first' line is <code>0</code> in the above)</p>\n\n<p>But you can alternatively keep what you're doing, and test <code>$.</code>:</p>\n\n<pre><code>while ( my $line = &lt;FILE&gt; ) {\n    chomp; \n    next unless $. &gt; 2; \n    push ( @lines, $line ); \n    last if $. &gt; 15; \n}\n</code></pre>\n\n<p>Which should do much the same. </p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1456622431, "creation_date": 1456622431, "answer_id": 35677566, "question_id": 35676307, "link": "https://stackoverflow.com/questions/35676307/storing-lines-of-file-into-array/35677566#35677566", "title": "Storing lines of file into array", "body": "<p>There is actually very little wrong with your code. The only reason it doesn't work is that you call <code>exit</code> when the last line of the range has been found. That means the program stops immediately and never executes the <code>print @lines</code> statement</p>\n\n<p>You also open the input file twice for no apparent reason, but that doesn't cause any problems</p>\n\n<p>Here's how I would write it. Note that I've used the <code>autodie</code> pragma so that I don't need to explicitly code error handlers for any of the IO operations</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.14.1;\nuse autodie;\n\nuse constant FILE       =&gt; 'info.text';\nuse constant FIRST_LINE =&gt; 2;\nuse constant LAST_LINE  =&gt; 15;\n\nopen my $fh, '&lt;', FILE;\n\nmy @lines;\n\nwhile ( &lt;$fh&gt; ) {\n    push @lines, $_ if FIRST_LINE .. LAST_LINE;\n    last if $. == LAST_LINE;\n}\n\nprint @lines;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5991691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd9579c172e09bdafc0c6839946a05ec?s=128&d=identicon&r=PG&f=1", "display_name": "Rabs", "link": "https://stackoverflow.com/users/5991691/rabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 994, "favorite_count": 0, "accepted_answer_id": 35676382, "answer_count": 3, "score": 2, "last_activity_date": 1456622431, "creation_date": 1456612528, "question_id": 35676307, "link": "https://stackoverflow.com/questions/35676307/storing-lines-of-file-into-array", "title": "Storing lines of file into array", "body": "<p>So I'm pretty new to Perl, only been learning it for 1 week. I'm trying to read only a specific range of lines into an array. If I print $_ inside the if statement, it list exactly what i want stored into my array. But storing $_ into my array and then print @array outside the while shows nothing. I'm not sure what I should do. Reason why I'm trying to store it into an array is too get certain information from the columns, therefore needing an array to do so. Thanks for your help. Its probably really simple for you guys</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $filename = 'info.text';\nopen my $info, $filename or die \"Could not open $filename: $!\";\nmy $first_line = 2;\nmy $last_line = 15;\n\nopen(FILE, $filename) or die \"Could not read from $filename, program halting.\";\n\nmy $count = 1;\nmy @lines;\n\nwhile(&lt;FILE&gt;){\n    if($count &gt; $last_line){\n        close FILE;\n        exit;\n    }\n    if($count &gt;= $first_line){\n        #print $_;\n        push @lines, $_;\n    }\n    $count++;\n}\nprint @lines;\n</code></pre>\n"}, {"tags": ["perl", "google-maps-api-3"], "comments": [{"owner": {"reputation": 147337, "user_id": 1210329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d432c94998d9fb0a28f6bf2af22cdf96?s=128&d=identicon&r=PG", "display_name": "geocodezip", "link": "https://stackoverflow.com/users/1210329/geocodezip"}, "edited": false, "score": 0, "creation_date": 1456600939, "post_id": 35674250, "comment_id": 59027454, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/2952493/perl-client-ssl-warning-peer-certificate-not-verified\">perl Client-SSL-Warning: Peer certificate not verified</a>"}, {"owner": {"reputation": 147337, "user_id": 1210329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d432c94998d9fb0a28f6bf2af22cdf96?s=128&d=identicon&r=PG", "display_name": "geocodezip", "link": "https://stackoverflow.com/users/1210329/geocodezip"}, "edited": false, "score": 0, "creation_date": 1456601014, "post_id": 35674250, "comment_id": 59027482, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/6795030/how-to-ignore-certificate-verify-failed-error-in-perl\">How to ignore &#39;Certificate Verify Failed&#39; error in perl?</a>"}, {"owner": {"reputation": 147337, "user_id": 1210329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d432c94998d9fb0a28f6bf2af22cdf96?s=128&d=identicon&r=PG", "display_name": "geocodezip", "link": "https://stackoverflow.com/users/1210329/geocodezip"}, "edited": false, "score": 1, "creation_date": 1456601064, "post_id": 35674250, "comment_id": 59027496, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/74358/how-can-i-get-lwp-to-validate-ssl-server-certificates\">How can I get LWP to validate SSL server certificates?</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456607752, "post_id": 35674250, "comment_id": 59029771, "body": "Cross-posted on <a href=\"http://www.perlmonks.org/?node_id=1156330\" rel=\"nofollow noreferrer\">www.perlmonks.org</a>"}, {"owner": {"reputation": 56, "user_id": 1536624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f86340b3739b9b7095029b97fce19686?s=128&d=identicon&r=PG", "display_name": "B-K", "link": "https://stackoverflow.com/users/1536624/b-k"}, "edited": false, "score": 0, "creation_date": 1456617289, "post_id": 35674250, "comment_id": 59032609, "body": "Unfortunately the links you have attempt to say are duplicates do not provide any form of assistance answering my question. I do not understand how they even are applicable to this."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456623666, "post_id": 35674250, "comment_id": 59033918, "body": "While it may be acceptable to cross-post the same question to multiple sites, it is considered to be bad form unless you say clearly that you have done so. It is unfair to keep people working on a solution to your problem when it may have been solved already by subscribers to a different site altogether"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1467624810, "last_edit_date": 1467624810, "creation_date": 1456623472, "answer_id": 35677706, "question_id": 35674250, "link": "https://stackoverflow.com/questions/35674250/google-maps-api-error-in-perl/35677706#35677706", "title": "Google Maps API error in Perl", "body": "<p>The code you have written works fine as it stands\u2014you don't need an API key. The problem is that your Secure Socket Layer support for the HTTPS is incomplete</p>\n\n<p>You should start by reinstalling the <a href=\"http://metacpan.org/module/LWP\" rel=\"nofollow\"><code>LWP</code></a> library to make sure that it is up to date. You should also install <a href=\"http://metacpan.org/module/Mozilla::CA\" rel=\"nofollow\"><code>Mozilla::CA</code></a> to make sure that the Certificates of Authority are current. (This is the most likely cause of the problem given the error message that you're getting.)</p>\n\n<p>If it is still not working after that, then the only other culprits I can think of are <a href=\"http://metacpan.org/module/IO::Socket::SSL\" rel=\"nofollow\"><code>IO::Socket::SSL</code></a> and <a href=\"http://metacpan.org/module/Crypt::SSLeay\" rel=\"nofollow\"><code>Crypt::SSLeay</code></a>, but I would be surprised if they are out of date as they should be updated as dependencies of <code>LWP</code></p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings 'all';\n\nuse Geo::Coder::Google;\n\nmy $geocoder = Geo::Coder::Google-&gt;new( apiver =&gt; 3 );\nmy $info = $geocoder-&gt;geocode( location =&gt; 'Mount Vernon, IN' );\n\nmy $location = $info-&gt;{geometry}{location};\n\nprintf \"%s %s\\n\", $location-&gt;{lat}, $location-&gt;{lng};\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>37.9322662 -87.8950267\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1081, "user_id": 1010644, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/GNmwF.png?s=128&g=1", "display_name": "landonandrey", "link": "https://stackoverflow.com/users/1010644/landonandrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1515690114, "creation_date": 1515690114, "answer_id": 48212340, "question_id": 35674250, "link": "https://stackoverflow.com/questions/35674250/google-maps-api-error-in-perl/48212340#48212340", "title": "Google Maps API error in Perl", "body": "<p>Try:</p>\n\n<p><code>sudo cpan</code></p>\n\n<p><code>install LMP::UserAgen Mozilla::CA</code></p>\n"}], "owner": {"reputation": 56, "user_id": 1536624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f86340b3739b9b7095029b97fce19686?s=128&d=identicon&r=PG", "display_name": "B-K", "link": "https://stackoverflow.com/users/1536624/b-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 35677706, "answer_count": 2, "score": -3, "last_activity_date": 1515690114, "creation_date": 1456600624, "question_id": 35674250, "link": "https://stackoverflow.com/questions/35674250/google-maps-api-error-in-perl", "title": "Google Maps API error in Perl", "body": "<p>Okay I'm working on finding the latitude and longitude of cities using Perl. I found the Geo::Coder::Google module and have it installed properly, but I'm getting an error when attempting to use it. The first time I got the error I went out and got an API key from Google thinking that was what I was missing, but that didn't solve the error either. Can someone help me figure out what I'm missing?</p>\n\n<p>Here is the error I'm receiving:</p>\n\n<p>Google Maps API returned error: 500 Can't verify SSL peers without knowing which Certificate Authorities to trust at test.pl line 7.</p>\n\n<p>Here is the code I'm using right now:</p>\n\n<pre><code>1:#!/usr/bin/perl\n2:use strict;\n3:use warnings;\n4:\n5:use Geo::Coder::Google;\n6:my $geocoder = Geo::Coder::Google-&gt;new( apiver =&gt; 3, gl =&gt; 'us', apikey =&gt; 'My API Key Here' );\n7:my $location = $geocoder-&gt;geocode( location =&gt; 'Mount Vernon, IN' );\n8:\n9:print \"$location-&gt;{'geometry'}-&gt;{'location'}-&gt;{'lat'}\";\n10:print \"$location-&gt;{'geometry'}-&gt;{'location'}-&gt;{'lng'}\";\n</code></pre>\n"}, {"tags": ["perl", "pipe", "stdin"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1456596450, "post_id": 35673186, "comment_id": 59025828, "body": "By writing a server to receive and execute arbitrary software you&#39;ll create a far, far bigger security hole than having a program sitting on a disk of a secured server. Unless your goal is to protect your code from being stolen? In which case I have to ask why your code is worth adding a glaring security hole. And all this is predicated on the idea that someone already owns your server. I would suggest cutting this whole thing down to just &quot;how can I execute Perl code from memory&quot; or &quot;how can I ensure the code my server runs is my own&quot;."}, {"owner": {"reputation": 113221, "user_id": 100754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/7804ebae32fbadef38537d74a915c22f?s=128&d=identicon&r=PG", "display_name": "Sinan &#220;n&#252;r", "link": "https://stackoverflow.com/users/100754/sinan-%c3%9cn%c3%bcr"}, "edited": false, "score": 0, "creation_date": 1456602005, "post_id": 35673186, "comment_id": 59027832, "body": "If it is not safe to store your program on disk, how is it safe to have it in memory?"}], "answers": [{"tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 4, "last_activity_date": 1456597449, "creation_date": 1456597449, "answer_id": 35673634, "question_id": 35673186, "link": "https://stackoverflow.com/questions/35673186/execute-program-from-upload/35673634#35673634", "title": "Execute program from upload", "body": "<p>The goal here seems to not be to secure the server, but to protect your source code from being stolen. That's the first flawed premise: <strong><em>hackers want your data, not your code</em></strong>. Hackers rarely care about your source code except to find security holes (which, if they control your server, they've already found). They're not stealing your code for industrial espionage, they want your data to either sell or hold ransom. Credit cards. Customer information. Passwords. Encryption keys. Any of that.</p>\n\n<p>Second, if this theoretical hacker can alter the server code to add <code>print</code> statements then executing the program from memory or STDIN won't help that.  If they control the server code they can print whatever they want no matter where the server reads it from.  <strong><em>If they can edit the code, they can replace the entire server program</em></strong>.</p>\n\n<p>This idea is a non-starter.  You need to rethink your premises.</p>\n"}], "owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1456678475, "creation_date": 1456595116, "question_id": 35673186, "link": "https://stackoverflow.com/questions/35673186/execute-program-from-upload", "title": "Execute program from upload", "body": "<p>This is mainly curiousity. I may implement it, not sure.</p>\n\n<p>I had this idea... Rather than leave a script on a server, per chance a hacker got to it, I could send the full script to the server from a secondary site, run it, and then delete it. OK in theory ...</p>\n\n<p>The LWP::UserAgent on the 'sending' server would need to connect to a script on the 'receiving' server. The way I would do it at present would be to save the incoming param to a file using open filehandle etc, then a \"require\" to run the script, followed by an unlink to destroy the file. </p>\n\n<pre><code> $d=param('d');open (D, \"&gt;sc.pl\");print D $d;close(D);require \"sc.pl\";unlink \"sc.pl\";\n</code></pre>\n\n<p>But a hacker could put a suitable \"print\" between most of those entries, and see what data was being sent.</p>\n\n<p>So I wondered if a similar thing could be achieved WITHOUT writing the code to a file, ie to be executed whilst in memory. It might have something to do with a \"while(&lt;>){\" or a pipe from STDIN to ???</p>\n\n<p>Just a thought</p>\n"}, {"tags": ["database", "perl", "jdbc"], "comments": [{"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 0, "creation_date": 1456598762, "post_id": 35672477, "comment_id": 59026690, "body": "I see no clear question, please clarify what it is you want to know. Note that exact behavior is not generic for JDBC and depends on the driver implementation. If you want to have any chance of an answer, you need to specify which driver you are using."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456609439, "post_id": 35672477, "comment_id": 59030256, "body": "The behaviour of Perl&#39;s DBI also depends on the design of the driver. You must specify which DBD module you are using -- i.e. what sort of database is this. In general, drivers will reuse the data space for subsequent fetch operations, so a first guess would be to retrieve your data in chunks of, say, 100 rows using the <code>OFFSET</code> and <code>LIMIT</code> options"}, {"owner": {"reputation": 131, "user_id": 5990807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b00f6f919d439013a48cdf569e41043?s=128&d=identicon&r=PG&f=1", "display_name": "Learner_101", "link": "https://stackoverflow.com/users/5990807/learner-101"}, "edited": false, "score": 0, "creation_date": 1456627652, "post_id": 35672477, "comment_id": 59034678, "body": "I will look into the limit option in jdbc. For perl , i will check if there is such option."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1456633832, "post_id": 35672477, "comment_id": 59035678, "body": "Which DBD are you using?  Show the first parameter to DBI-&gt;connect"}, {"owner": {"reputation": 131, "user_id": 5990807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b00f6f919d439013a48cdf569e41043?s=128&d=identicon&r=PG&f=1", "display_name": "Learner_101", "link": "https://stackoverflow.com/users/5990807/learner-101"}, "edited": false, "score": 0, "creation_date": 1456638885, "post_id": 35672477, "comment_id": 59036549, "body": "my $dbh = DBI-&gt;connect(&#39;dbi:Sybase:&#39;, $user, $passwd);"}], "answers": [{"tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 0, "last_activity_date": 1456598760, "creation_date": 1456598760, "answer_id": 35673908, "question_id": 35672477, "link": "https://stackoverflow.com/questions/35672477/db-query-retrieval-of-large-data-set/35673908#35673908", "title": "DB Query retrieval of large data set", "body": "<blockquote>\n  <p>Is there any way to reduce the memory footprint</p>\n</blockquote>\n\n<p>There could be, at least for JDBC; it would depend on the implementation of the JDBC driver. For example, the default behavior for MySQL Connector/J is to retrieve the entire ResultSet immediately. However, you can tell the JDBC connection to \"stream\" the results by specifying <code>setFetchSize(Integer.MIN_VALUE)</code> for the <code>Statement</code> object.</p>\n"}], "owner": {"reputation": 131, "user_id": 5990807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b00f6f919d439013a48cdf569e41043?s=128&d=identicon&r=PG&f=1", "display_name": "Learner_101", "link": "https://stackoverflow.com/users/5990807/learner-101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 35673908, "answer_count": 1, "score": -1, "last_activity_date": 1456627585, "creation_date": 1456591674, "last_edit_date": 1456627585, "question_id": 35672477, "link": "https://stackoverflow.com/questions/35672477/db-query-retrieval-of-large-data-set", "title": "DB Query retrieval of large data set", "body": "<p>When we use JDBC (Java) or DBD (Perl) and fire a query, we get results.</p>\n\n<p>Now in my program, I just write the results to a file.</p>\n\n<p>The data set is huge (millions of rows).</p>\n\n<p>Is there any way to reduce the memory footprint.</p>\n\n<p>What I observed in Perl is that it does not release the memory used for binding the data to the variables.</p>\n\n<h1>Pseudocode</h1>\n\n<h3>Perl</h3>\n\n<p>1) Establish Connection. Execute Query</p>\n\n<pre><code>my $data ;\n\nwhile ( $dbh-&gt;next )\n{\n\n    # Bind variables ;\n\n    $data = ..\n\n    writeToFile ( data  =&gt;  $ data ) ;\n\n}\n</code></pre>\n\n<h3>Java</h3>\n\n<p>In JDBC, if I set the bound data variables/objects to null, would it release memory while performing garbage collection</p>\n\n<p>1) Establish connection</p>\n\n<pre><code>while ( results-&gt;hasNext() )\n{\n\n    Data data ;      \n\n    writeToFile ( data ) ;\n\n    data = null ;\n}\n</code></pre>\n\n<p>PERL DBD Driver.</p>\n\n<pre><code>I have not installed any special driver. Whatever was installed by unix admin with perl module.\n</code></pre>\n\n<p>JDBC Driver.</p>\n\n<pre><code>Standard sybase driver. \n</code></pre>\n"}, {"tags": ["bash", "perl", "escaping", "hex", "ascii"], "comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1456595157, "post_id": 35672271, "comment_id": 59025260, "body": "Is this what you want <code>echo -en &quot;\\x48\\x32\\x35\\x45 \\x90\\xc1\\xe2\\x7a&quot;</code>? Or even <code>echo -en &quot;\\x48\\x32\\x35\\x45 \\x90\\xc1\\xe2\\x7a&quot; | cat -A</code> ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456599419, "post_id": 35672271, "comment_id": 59026905, "body": "Any character codes above 0x7F are not ASCII. Are you saying you want anything less than 0x2o to be displayed as <code>^@</code> etc and anything over 0x7E to appear as <code>&lt;7F&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 2414, "user_id": 5379657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ab4a9ac2ee2c7a27f5d976d6a787970?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Y", "link": "https://stackoverflow.com/users/5379657/jeff-y"}, "is_accepted": true, "score": 0, "last_activity_date": 1456602019, "creation_date": 1456602019, "answer_id": 35674541, "question_id": 35672271, "link": "https://stackoverflow.com/questions/35672271/perl-print-hex-ascii-from-arg-input/35674541#35674541", "title": "perl print hex ascii from arg input", "body": "<p>You need <code>eval</code>s (and extra double quotes) to make perl \"interpret\" the hex escapes:</p>\n\n<pre><code>echo \"\\x48\\x32\\x35\\x45 \\x90\\xc1\\xe2\\x7a\" | perl -e '@string = split \" \",&lt;&gt;; print eval \"\\\"$string[0]\\\"\",chr(0),eval \"\\\"$string[1]\\\"\";'\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4911257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f9f53387dfa82856a7820ed6915ca0a?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/4911257/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 35674541, "answer_count": 1, "score": -1, "last_activity_date": 1456602019, "creation_date": 1456590539, "question_id": 35672271, "link": "https://stackoverflow.com/questions/35672271/perl-print-hex-ascii-from-arg-input", "title": "perl print hex ascii from arg input", "body": "<p>I'm piping some hex ascii into perl and would like to use it's print function to print this stuff to a file. however the hex is not printed as ascii but as normal string</p>\n\n<pre><code>echo \"\\x48\\x32\\x35\\x45\" \"\\x90\\xc1\\xe2\\x7a\" | perl -e' @string =  split \" \",&lt;&gt;; print ${string[0]},chr(0),\"$string[1]\";' &gt; input.txt \n</code></pre>\n\n<p>This gives however the following in input.txt</p>\n\n<pre><code>\\x48\\x32\\x35\\x45^@\\x90\\xc1\\xe2\\x7a\n</code></pre>\n\n<p>where it should more look like</p>\n\n<pre><code>H25E^@&lt;90&gt;&lt;C1&gt;&lt;E2&gt;z\n</code></pre>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "edited": false, "score": 0, "creation_date": 1456632682, "post_id": 35672460, "comment_id": 59035503, "body": "I want the column of data present in file 3 along with file 1 col 5.... Because except first four column all others are different in all three files."}, {"owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "reply_to_user": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "edited": false, "score": 0, "creation_date": 1456634720, "post_id": 35672460, "comment_id": 59035803, "body": "In that case save <code>$col5</code> value like this       <code>$chash{$ckey}=[1, $col5]</code>  And increment like this      <code>$chash{$ckey}[0]++;</code>  And check and write like this       if($chash{$ckey}[0] == 3)             {                     # this key has been seen in both previous files                     print $f &quot;$_ $cahsh{$ckey}[1]\\n&quot;;             }"}, {"owner": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "edited": false, "score": 0, "creation_date": 1456635964, "post_id": 35672460, "comment_id": 59036036, "body": "I am getting the error msg &quot; Can&#39;t use string (&quot;3&quot;) as an ARRAY ref while &quot;strict refs&quot; in use at ./gms_script.pl line 57&quot; while i print $f &quot;$_ $cahsh{$ckey}[1]\\n&quot;; }"}, {"owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "reply_to_user": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "edited": false, "score": 0, "creation_date": 1456637365, "post_id": 35672460, "comment_id": 59036286, "body": "<code>use strict</code> prevents having different type in array. Since using <code>use strict</code> is a good idea, keep that. Instead save $col5 in a different hash.  Define <code>my %foohash;</code> and save $col5 in that hash when you populate $chash. <code>$chash{$ckey}=1; $foohash{$ckey} = $col5;</code> And add that when you print <code>print $f &quot;$_ $foohash{$ckey}\\n&quot;;</code>"}, {"owner": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "edited": false, "score": 0, "creation_date": 1456645922, "post_id": 35672460, "comment_id": 59038082, "body": "Thank you i got the perfect answer"}, {"owner": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "edited": false, "score": 0, "creation_date": 1456724807, "post_id": 35672460, "comment_id": 59062809, "body": "I want to improve this code like &quot; i need a output of common in file 1 and 2 but not present in file 3.&quot; i used if(( $ahash{$akey} == 2 ) &amp;&amp; ( ($bhash{$akey}) != ($ahash{$akey}) == 2)) . ahash for file 1 and 2, bhash for file3. But it doesn&#39;t work."}], "tags": [], "owner": {"reputation": 2755, "user_id": 5976265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yYNs9.jpg?s=128&g=1", "display_name": "Hun", "link": "https://stackoverflow.com/users/5976265/hun"}, "is_accepted": false, "score": 0, "last_activity_date": 1456591588, "creation_date": 1456591588, "answer_id": 35672460, "question_id": 35672078, "link": "https://stackoverflow.com/questions/35672078/perl-to-compare-three-files-based-on-column-and-extract-specific-column/35672460#35672460", "title": "perl to compare three files based on column and extract specific column", "body": "<p>By the time you reached print statement, $col5 value is out of scope. So process the files in reverse order so that $col5 is in scope when print statement is used.</p>\n\n<pre><code>for (@arr3)\n{\n    chomp;\n    my($val1,$val2,$val3,$val4,$rest)=split(/\\t/);\n    my $ckey=\"$val1$val2$val3$val4\";\n    $chash{$ckey} =1;\n}\nfor (@arr2)\n{\n    chomp;\n    my($hit1,$hit2,$hit3,$hit4,$rest)=split(/\\t/); # you don't need $hit5 here\n    my $ckey=\"$hit1$hit2$hit3$hit4\";\n    $chash{$ckey}++;\n}\nfor (@arr1)\n{\n    chomp;\n    my($col1,$col2,$col3,$col4,$col5,$rest)=split(/\\t/);\n    my $ckey=\"$col1$col2$col3$col4\";\n    $chash{$ckey}++;\n\n    if($chash{$ckey} == 3)\n    {\n        # this key has been seen in both previous files\n        print $f \"$_, $col5\\n\"; # $col5 is in scope\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2767090, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/650fa1007a97725e2a8944b91d65694e?s=128&d=identicon&r=PG&f=1", "display_name": "user2767090", "link": "https://stackoverflow.com/users/2767090/user2767090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456646079, "creation_date": 1456589632, "last_edit_date": 1456646079, "question_id": 35672078, "link": "https://stackoverflow.com/questions/35672078/perl-to-compare-three-files-based-on-column-and-extract-specific-column", "title": "perl to compare three files based on column and extract specific column", "body": "<p>File 1 :</p>\n\n<p>col1 col2 col3 col4 ..... col 15</p>\n\n<p>File 2 :</p>\n\n<p>col1 col2 col3 col4 ..... col 15</p>\n\n<p>File 3 :</p>\n\n<p>col1 col2 col3 col4 ..... col 15\nEach column of the files has data.</p>\n\n<p>I need to compare first four column of the three files and output the common from the files 3 along with the file 1 col5.</p>\n\n<p>output :</p>\n\n<p>File 3(col1 col2 col3 col4 ..... col 15)+File 1(col5)</p>\n\n<p>My code :</p>\n\n<pre><code>    #!/usr/bin/perl -w\n    use strict;\n    use warnings;\n\n    my $file1 = $ARGV[0];\n    my $file2 = $ARGV[1];\n    my $file3 = $ARGV[2];\n\n    if($file1 eq \"\" || $file2 eq \"\" || $file3 eq \"\")\n    {\n             print \"Incomplete parameters!\\n\";\n             exit;\n    }\n\n    open(FILE1, $file1);\n    open(FILE2, $file2);\n    open(FILE3, $file3);\n    open my $f, '&gt;', \"output.txt\" or die \"Cannot open output.txt: $!\";\n\n    my @arr1=&lt;FILE1&gt;;\n    my @arr2=&lt;FILE2&gt;;\n    my @arr3=&lt;FILE3&gt;;\n    close FILE1;\n    close FILE2;\n    close FILE3;\n    my %chash;\n    for (@arr1)\n    {\n            chomp;\n            my($col1,$col2,$col3,$col4,$col5,$rest)=split(/\\t/);\n            my $ckey=\"$col1$col2$col3$col4\";\n            $chash{$ckey}=1;\n    }\n\n    for (@arr2)\n    {\n            chomp;\n            my($hit1,$hit2,$hit3,$hit4,$hit5,$rest)=split(/\\t/);\n            my $ckey=\"$hit1$hit2$hit3$hit4\";\n            $chash{$ckey}++;\n    }\n    for (@arr3)\n    {\n            chomp;\n            my($val1,$val2,$val3,$val4,$rest)=split(/\\t/);\n            my $ckey=\"$val1$val2$val3$val4\";\n            $chash{$ckey}++;\n            if($chash{$ckey} == 3)\n            {\n                    # this key has been seen in both previous files\n                    print $f \"$_\\n\";\n            }\n    }\n</code></pre>\n\n<p>This code just give the common lines. Any body help me to extract the file 1 col5 along with the File 3 common line.</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1456590017, "post_id": 35672039, "comment_id": 59023237, "body": "Accessing the hash references themselves is simple (<code>$sortJobs[ $some_index ]</code>). Are you asking about how to access the fields in the hashes? What does the <code>Jobs.conf</code> look like?"}, {"owner": {"reputation": 119, "user_id": 4214304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7f3428e7f4045ccf9400def1f74875e5?s=128&d=identicon&r=PG&f=1", "display_name": "SilentUK", "link": "https://stackoverflow.com/users/4214304/silentuk"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1456591170, "post_id": 35672039, "comment_id": 59023684, "body": "@Kenney  I updated the main post hopefully it makes my intentions clearer."}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1456591713, "post_id": 35672039, "comment_id": 59023875, "body": "A little, thanks - just missing some details about where you want to put the hashes - based on what condition etc. I think you could just <code>shift</code> the first hash from the sorted list and put it somewhere else - but that&#39;s probably too trivial?"}, {"owner": {"reputation": 119, "user_id": 4214304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7f3428e7f4045ccf9400def1f74875e5?s=128&d=identicon&r=PG&f=1", "display_name": "SilentUK", "link": "https://stackoverflow.com/users/4214304/silentuk"}, "reply_to_user": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "edited": false, "score": 0, "creation_date": 1456591883, "post_id": 35672039, "comment_id": 59023925, "body": "I&#39;m trying to make a simulation &quot;memory manager&quot; for my university assignment.  so basically I want to take this list of sorted jobs and move it to an array called @queue.  I just looked it up and I think shift will work.  So I would just type @queue(shift @sortJobs)? Thanks for the help."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4214304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7f3428e7f4045ccf9400def1f74875e5?s=128&d=identicon&r=PG&f=1", "display_name": "SilentUK", "link": "https://stackoverflow.com/users/4214304/silentuk"}, "edited": false, "score": 0, "creation_date": 1456592426, "post_id": 35672624, "comment_id": 59024117, "body": "Thanks, this is sort of what I need.  How can I do this with one hash at a time instead of moving the entire contents at once?"}, {"owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "reply_to_user": {"reputation": 119, "user_id": 4214304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7f3428e7f4045ccf9400def1f74875e5?s=128&d=identicon&r=PG&f=1", "display_name": "SilentUK", "link": "https://stackoverflow.com/users/4214304/silentuk"}, "edited": false, "score": 0, "creation_date": 1456592480, "post_id": 35672624, "comment_id": 59024134, "body": "That&#39;s what the <code>while</code> is for - the <code>push @queue, shift @sortJobs</code> only moves 1 element."}, {"owner": {"reputation": 119, "user_id": 4214304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7f3428e7f4045ccf9400def1f74875e5?s=128&d=identicon&r=PG&f=1", "display_name": "SilentUK", "link": "https://stackoverflow.com/users/4214304/silentuk"}, "edited": false, "score": 0, "creation_date": 1456592507, "post_id": 35672624, "comment_id": 59024147, "body": "Thank you very much @kenney"}], "tags": [], "owner": {"reputation": 8677, "user_id": 2378910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5516f058929cbdca03b0319e61bf8?s=128&d=identicon&r=PG", "display_name": "Kenney", "link": "https://stackoverflow.com/users/2378910/kenney"}, "is_accepted": true, "score": 1, "last_activity_date": 1456592923, "last_edit_date": 1456592923, "creation_date": 1456592362, "answer_id": 35672624, "question_id": 35672039, "link": "https://stackoverflow.com/questions/35672039/moving-an-unnamed-hash-in-perl/35672624#35672624", "title": "Moving an unnamed hash in perl?", "body": "<p>To copy <code>@sortJobs</code> into a new <code>@queue</code> you could simply do</p>\n\n<pre><code>@queue = @sortJobs;\n</code></pre>\n\n<p>To move the elements, you could do </p>\n\n<pre><code>while ( @sortJobs ) {\n    push @queue, shift @sortJobs;\n}\n</code></pre>\n\n<p>These are identical, except that <code>@sortJobs</code> will be empty in the second case.</p>\n\n<p>Here we use the <a href=\"http://perldoc.perl.org/functions/shift.html\" rel=\"nofollow\">shift</a> function to remove one element from the 'head' of the array, and <a href=\"http://perldoc.perl.org/functions/push.html\" rel=\"nofollow\">push</a> to append it.</p>\n\n<p>Note that it doesn't matter what's in <code>@sortJobs</code> - could be scalars, hashrefs, arrayrefs, etc..</p>\n\n<p>Here's one more example, illustrating how to access the data in the hashrefs, to put them in different queues:</p>\n\n<pre><code>while ( @sortJobs ) {\n   my $jobRef = shift @sortJobs;             # $job is a hashref\n   my %job    = %{$jobRef};                  # dereference it to a normal hash\n\n   if ( $jobRef-&gt;{JobName} == 'D' ) {        # using the hashref\n       push @myDQueue, $jobRef;\n   } elsif ( $job{JobName} == 'C' ) {        # using the hash \n       push @myCQueue, $jobRef;\n   } else {\n       push @myNormalQueue, $jobRef;\n   }\n}\n</code></pre>\n\n<p>Much more on this in <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow\">PerlRefTut</a>.</p>\n"}], "owner": {"reputation": 119, "user_id": 4214304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7f3428e7f4045ccf9400def1f74875e5?s=128&d=identicon&r=PG&f=1", "display_name": "SilentUK", "link": "https://stackoverflow.com/users/4214304/silentuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 35672624, "answer_count": 1, "score": 0, "last_activity_date": 1456592923, "creation_date": 1456589468, "last_edit_date": 1456591143, "question_id": 35672039, "link": "https://stackoverflow.com/questions/35672039/moving-an-unnamed-hash-in-perl", "title": "Moving an unnamed hash in perl?", "body": "<p>I created an array in perl called @jobs.  Its an array to hold hashes of my job lists.</p>\n\n<p>I populate it and sort into another array with the following code:</p>\n\n<pre><code>open(my $JOBLIST, '&lt;:crlf', 'Jobs.conf') \n    or die \"Unable to open file, $!\";\n\n#Store Hashes into jobs array\n\nwhile (&lt;$JOBLIST&gt;) {\n    push(@jobs, {split(/:\\s*|\\n/)});\n}\n\n#sort jobs array by JobArrival\n\nmy @sortJobs = sort { $a-&gt;{JobArrival} &lt;=&gt; $b-&gt;{JobArrival} } @jobs;\n</code></pre>\n\n<p>How do I access the hashes in @sortJobs and move them to other arrays etc?  I understand how to push but I don't think that these hashes are named so i'm unsure how i access them?</p>\n\n<p>EDIT for clarity:</p>\n\n<p>My jobs.conf file looks like:</p>\n\n<pre><code>JobName: A\nJobSize: 100\nJobArrival: 4\nJobExe: 100\n\nJobName: C\nJobSize: 100\nJobArrival: 2\nJobExe: 100\n\nJobName: B\nJobSize: 100\nJobArrival: 3\nJobExe:100\n\nJobName: D\nJobSize: 100\nJobArrival: 1\nJobExe: 100\n</code></pre>\n\n<p>When i have have sorted it, my array of hashes looks like this:</p>\n\n<pre><code>[\n  { JobArrival =&gt; 1, JobExe =&gt; 100, JobName =&gt; \"D\", JobSize =&gt; 100 },\n  { JobArrival =&gt; 2, JobExe =&gt; 100, JobName =&gt; \"C\", JobSize =&gt; 100 },\n  { JobArrival =&gt; 3, JobExe =&gt; 100, JobName =&gt; \"B\", JobSize =&gt; 100 },\n  { JobArrival =&gt; 4, JobExe =&gt; 100, JobName =&gt; \"A\", JobSize =&gt; 100 },\n]\n</code></pre>\n\n<p>What i need to do is take the first job from that array \"D\", and move it to another array.  Once i've done that I need to access the next one and move that, etc until I have moved all of the hashes from this array.</p>\n\n<p>Normally i would use the hash name but as far as i can see these hashes are unnamed and that is confusing me.</p>\n"}, {"tags": ["perl", "padre"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456601597, "post_id": 35671687, "comment_id": 59027689, "body": "Check Tools -&gt; Preferences -&gt; Indentation."}, {"owner": {"reputation": 1947, "user_id": 2501936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BdTN9.jpg?s=128&g=1", "display_name": "Jirong Hu", "link": "https://stackoverflow.com/users/2501936/jirong-hu"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456757252, "post_id": 35671687, "comment_id": 59081193, "body": "Finally I figured out. First download the plugin gzip from here:<a href=\"http://search.cpan.org/~azawawi/Padre-Plugin-PerlTidy-0.22/lib/Padre/Plugin/PerlTidy.pm\" rel=\"nofollow noreferrer\">search.cpan.org/~azawawi/Padre-Plugin-PerlTidy-0.22/lib&zwnj;&#8203;/Padre/&hellip;</a>, then installed from Tools --&gt; Module Tools --&gt; Install Local Distribution. Then from Tools --&gt; Plugin Manager, enable the Perl Tidy. Finally I can see this menu: Tools/Perl Tidy/Tidy the Active Document, as mentioned here <a href=\"http://padre.perlide.org/features/perl-tidy.html\" rel=\"nofollow noreferrer\">padre.perlide.org/features/perl-tidy.html</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1947, "user_id": 2501936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BdTN9.jpg?s=128&g=1", "display_name": "Jirong Hu", "link": "https://stackoverflow.com/users/2501936/jirong-hu"}, "edited": false, "score": 0, "creation_date": 1456698692, "post_id": 35681666, "comment_id": 59056027, "body": "After spending half an hour trying to figure out how to install a plugin, I found this:<a href=\"http://perltidy.sourceforge.net/INSTALL.html\" rel=\"nofollow noreferrer\">perltidy.sourceforge.net/INSTALL.html</a>, and was again shocked by the complication of the installation. I was expecting like install a plugin to Jenkins, or any other modern tools. Guess need more time to figure out how to use it. But thanks a lot, have to have to drink before the installation."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 1947, "user_id": 2501936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BdTN9.jpg?s=128&g=1", "display_name": "Jirong Hu", "link": "https://stackoverflow.com/users/2501936/jirong-hu"}, "edited": false, "score": 0, "creation_date": 1456699441, "post_id": 35681666, "comment_id": 59056305, "body": "@jir I don&#39;t know about the Padre plug-in, but perltidy is just a perl module. Install it from cpan."}, {"owner": {"reputation": 760, "user_id": 4802664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R2sAh.jpg?s=128&g=1", "display_name": "Hassan Tareq", "link": "https://stackoverflow.com/users/4802664/hassan-tareq"}, "edited": false, "score": 2, "creation_date": 1505455029, "post_id": 35681666, "comment_id": 79428554, "body": "I am using  Padre 0.94 &amp; Perl Tidy is already installed but need to enable: <code>tools &gt; Plug-in manager &gt; select Perl Tidy &gt; enable it </code>"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1456657397, "creation_date": 1456657397, "answer_id": 35681666, "question_id": 35671687, "link": "https://stackoverflow.com/questions/35671687/perl-ide-padre-how-to-format-the-source-code/35681666#35681666", "title": "Perl IDE Padre: how to format the source code", "body": "<p>There is a tool called <a href=\"https://metacpan.org/pod/distribution/Perl-Tidy/lib/Perl/Tidy.pod\" rel=\"nofollow\">Perl::Tidy</a> which is <a href=\"http://perltidy.sourceforge.net/\" rel=\"nofollow\">highly configurable</a> that does auto formatting of Perl code. Padre has a plugin to use it. You can <a href=\"http://padre.perlide.org/features/perl-tidy.html\" rel=\"nofollow\">find the documentation here</a>.</p>\n\n<blockquote>\n  <p>Padre has a plugin called Padre::Plugin::PerlTidy that provides integration with the above module. It uses the default settings of perltidy or the settings of the current project to tidy the current file or the current selection in the editor.</p>\n</blockquote>\n\n<p>It probably will use the <code>.perltidyrc</code> config file in your project directoy, though I am note sure about that.</p>\n"}, {"comments": [{"owner": {"reputation": 1947, "user_id": 2501936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BdTN9.jpg?s=128&g=1", "display_name": "Jirong Hu", "link": "https://stackoverflow.com/users/2501936/jirong-hu"}, "edited": false, "score": 0, "creation_date": 1457040450, "post_id": 35702558, "comment_id": 59238136, "body": "However, the problem is the latest Padre IDE: dwimperl-5.14.2.1-v7-32bit.exe, doesn&#39;t work well in Windows 2012 64bit. The mouse wheel doesn&#39;t work, click files in Show Project Browser always being blank. Is there a 64bit of Padre IDE?"}], "tags": [], "owner": {"reputation": 1947, "user_id": 2501936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BdTN9.jpg?s=128&g=1", "display_name": "Jirong Hu", "link": "https://stackoverflow.com/users/2501936/jirong-hu"}, "is_accepted": true, "score": 1, "last_activity_date": 1456757500, "creation_date": 1456757500, "answer_id": 35702558, "question_id": 35671687, "link": "https://stackoverflow.com/questions/35671687/perl-ide-padre-how-to-format-the-source-code/35702558#35702558", "title": "Perl IDE Padre: how to format the source code", "body": "<p>Finally I figured out. First download the plugin gzip from here: search.cpan.org/~azawawi/Padre-Plugin-PerlTidy-0.22/lib/Padre/\u2026, then install it from Tools --> Module Tools --> Install Local Distribution. Then from Tools --> Plugin Manager, enable the Perl Tidy. Finally I can see this menu: Tools/Perl Tidy/Tidy the Active Document, as mentioned here padre.perlide.org/features/perl-tidy.html.</p>\n"}], "owner": {"reputation": 1947, "user_id": 2501936, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BdTN9.jpg?s=128&g=1", "display_name": "Jirong Hu", "link": "https://stackoverflow.com/users/2501936/jirong-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 35702558, "answer_count": 2, "score": 1, "last_activity_date": 1456757500, "creation_date": 1456587557, "question_id": 35671687, "link": "https://stackoverflow.com/questions/35671687/perl-ide-padre-how-to-format-the-source-code", "title": "Perl IDE Padre: how to format the source code", "body": "<p>How can I have something like in eclipse, highlight the lines, right click Source --> Format, and make the code line up nicely.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456599651, "post_id": 35671654, "comment_id": 59026997, "body": "This looks oddly familiar. Have you asked something similar before?"}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456599744, "post_id": 35671654, "comment_id": 59027028, "body": "@Sobrique yes  but did not get the answer and the solution i was looking for"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456599874, "post_id": 35671654, "comment_id": 59027076, "body": "I&#39;m actually pretty sure I&#39;ve written a solution that does exactly what you request, down to using the same data. But I can&#39;t find it any more."}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456600041, "post_id": 35671654, "comment_id": 59027150, "body": "@Sobrique .why is my code not working?what am i doing wrong?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1456600397, "post_id": 35671654, "comment_id": 59027279, "body": "What is it doing that is undesirable? How is it &quot;not working&quot;?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456708168, "post_id": 35671654, "comment_id": 59058666, "body": "@Sobrique And I think I vaguely recall a solution of yours to something just like this."}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456776447, "post_id": 35671654, "comment_id": 59093917, "body": "@Sobrique this should extracting rang data from a file save each range to a separate file .but the code above only extract every data"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456777104, "post_id": 35671654, "comment_id": 59094318, "body": "@lord-ivan &quot;Only extracts every data&quot;---what does that mean?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456603375, "post_id": 35674369, "comment_id": 59028312, "body": "@jpi It still does not extract the data from the log file. i get only an empty file"}], "tags": [], "owner": {"reputation": 49, "user_id": 5903930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdb8dc86c6b37365733e6eae133cc988?s=128&d=identicon&r=PG&f=1", "display_name": "jpj", "link": "https://stackoverflow.com/users/5903930/jpj"}, "is_accepted": false, "score": -1, "last_activity_date": 1456601173, "creation_date": 1456601173, "answer_id": 35674369, "question_id": 35671654, "link": "https://stackoverflow.com/questions/35671654/extracting-rang-data-from-a-file-saving-each-range-to-a-separate-file/35674369#35674369", "title": "Extracting rang data from a file ,saving each range to a separate file", "body": "<p>Well, as far as I understand, you must open a file when you meet 'TRANSACTION START' and close it when you meet  'TRANSACTION END'. So you should rewrite your loop. Something like that:</p>\n\n<pre><code>while (&lt;$fh&gt;) {  \n    if (/TRANSACTION STARTED/) {\n        $outputfile= \"${outdir}TRANSACTION$filenumber\";\n        open ($ofh, \"&gt; $outputfile\") or die \"Could not open file '$outfile' $!\";\n        print $ofh $_;     \n    } elsif (/TRANSACTION END/) {\n        print $ofh $_;     \n        close $ofh; \n        $filenumber++;\n    } else {\n        print $ofh $_;     \n    }\n}  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456658011, "post_id": 35675524, "comment_id": 59041096, "body": "thank you for your loop but it only copies the log file and pasts it in a .txt file. it dose not &quot;create sequential files, one per transaction.&quot;"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456667867, "post_id": 35675524, "comment_id": 59044229, "body": "@lord-ivan Did you even run the code?"}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456776543, "post_id": 35675524, "comment_id": 59093978, "body": "yes i did.i have u can.check from my post"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456777061, "post_id": 35675524, "comment_id": 59094295, "body": "@lord-ivan What happens when you run the code in my answer? It creates two files named <code>TRANSACTION0.txt</code> and <code>TRANSACTION1.txt</code>, doesn&#39;t it? If that&#39;s <i>not</i> what you want, then I didn&#39;t understand the question and you&#39;ll have to be more clear."}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456778067, "post_id": 35675524, "comment_id": 59094870, "body": "What is what i want But it only create TRANSACTION0.txt and does not extract   what is with TRANSACTION START&#39;  &#39;TRANSACTION END&#39; but extract the original log file data back to be"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456778106, "post_id": 35675524, "comment_id": 59094893, "body": "@lord-ivan You are mistaken. It does exactly that."}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456778337, "post_id": 35675524, "comment_id": 59095015, "body": "i have to code in my post and i will be sending the link to the TRANSACTION0.txt file for u to see  <a href=\"https://www.dropbox.com/s/69atr3x5b5vbz7j/TRANSACTION0.txt?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/69atr3x5b5vbz7j/TRANSACTION0.txt?dl=0</a>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456779144, "post_id": 35675524, "comment_id": 59095549, "body": "@lord-ivan I&#39;m not going to click on some external link when I&#39;ve already provided you a working answer based on the question you asked."}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456780253, "post_id": 35675524, "comment_id": 59096235, "body": "can you have a look at the code i posted"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456780584, "post_id": 35675524, "comment_id": 59096412, "body": "@lord-ivan It looks fine. I suspect you&#39;re either running an old file that you <i>think</i> is the current file, or there&#39;s something else going on and you&#39;ve left out some important details somewhere."}, {"owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456783488, "post_id": 35675524, "comment_id": 59098052, "body": "important details like What?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "edited": false, "score": 0, "creation_date": 1456783912, "post_id": 35675524, "comment_id": 59098236, "body": "@lord-ivan If I knew, I would have told you. But if the code I provided in my answer works correctly, and then you copy it and modify it, and now it <i>doesn&#39;t</i> work correctly, I think we can all agree that you&#39;ve introduced some errors somewhere."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 0, "last_activity_date": 1456607691, "creation_date": 1456607691, "answer_id": 35675524, "question_id": 35671654, "link": "https://stackoverflow.com/questions/35671654/extracting-rang-data-from-a-file-saving-each-range-to-a-separate-file/35675524#35675524", "title": "Extracting rang data from a file ,saving each range to a separate file", "body": "<p>We set set a flag when we see the start marker, and we turn off the flag when we see the end marker. If the flag is enabled, we print lines. You'll have to adjust the paths to your situation, but this code will definitely create sequential files, one per transaction.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $count = 0;\nmy $spew  = 0;\nmy $out;\n\nwhile (&lt;DATA&gt;) {\n    if (/TRANSACTION STARTED/) {\n        open($out, '&gt;', \"TRANSACTION$count.txt\") or die $!;\n        $spew = 1;\n        $count++;\n    }\n\n    if ($spew) {\n        print $out $_;\n    }\n\n    if (/TRANSACTION END/) {\n        close($out);\n        $spew = 0;\n    }\n}\n\n__DATA__\n*TRANSACTION STARTED*\n[020t CARD INSERTED\n[020tCARD: *************5845\nDATE 01-02-16    TIME 05:45:52\n 05:46:26 GENAC 1 : ARQC\nEXTERNAL AUTHENTICATE: NO ARPC\n 05:46:30 GENAC 2 : AAC\n 01 FEB 2016     05:47:41      10160021\n\n     WITHDRAW\n     FROM XXXXXXXX    ?\nINVALID TRANSCATION ON TERMINAL.\n-----------------------\n[020t 05:47:05 CARD TAKEN\n[020t 05:47:07 TRANSACTION END\n[0r(1)2[000p[040qe1w3h162[020t*742*02/01/2016*05:47*\n     *TRANSACTION STARTED*\n[020t CARD INSERTED\n[020tCARD: *************2584\nDATE 01-02-16    TIME 05:47:27\n 05:48:00 GENAC 1 : ARQC\n 05:48:05 GENAC 2 : TC\n[020t 05:48:16 CARD TAKEN\n[020t 05:48:22 NOTES PRESENTED 0,0,2,0\n 01 FEB 2016     05:48:52      10160021\n\n     WITHDRAW\n     FROM XXXXXXXX    ?\nAMT   GHC40.00\n[020t 05:48:31 TRANSACTION END\n[0r(1)2[000p[040qe1w3h162[020t*743*02/01/2016*05:57*\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4491889, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ecd4a14aa981fd48ccddbfe61962004a?s=128&d=identicon&r=PG&f=1", "display_name": "lord-ivan", "link": "https://stackoverflow.com/users/4491889/lord-ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1456660011, "accepted_answer_id": 35675524, "answer_count": 2, "score": -1, "last_activity_date": 1456658346, "creation_date": 1456587344, "last_edit_date": 1456658346, "question_id": 35671654, "link": "https://stackoverflow.com/questions/35671654/extracting-rang-data-from-a-file-saving-each-range-to-a-separate-file", "closed_reason": "Duplicate", "title": "Extracting rang data from a file ,saving each range to a separate file", "body": "<p>I have been pulling my hair out for 4 days now i still not this to work .I i have to log file and i am i am trying to extracting rang data from the log file and save each range to a separate file. How can i  extract rang data from the log file and save each range to a separate file.</p>\n\n<pre><code> #! /usr/bin/perl/ \n   use warnings;\n    use strict;\n\n    my $outdir   = \"/home/lord-ivan/Soures_Code/Perl/projects/EJ/Queue/\";  \n    my $somefile = \"/home/lord-ivan/Soures_Code/Perl/projects/Data/EJDATA.LOG\";  \n    my $count = 0;\n    my $spew  = 0;\n    my $out;\n\n    open (my $fh, \"&lt;  $somefile\" ) or die \"Could not open file '$somefile' $!\";   \n    print \"$somefile open\\n\";  \n\n    while (&lt;$fh&gt;) {\n        if (/TRANSACTION STARTED/) {\n            open($out, '&gt;', \"${outdir}TRANSACTION$count.txt\") or die $!;\n            $spew = 1;\n            $count++;\n\n        }\n\n        if ($spew) {\n            print $out $_;\n        }\n\n        if (/TRANSACTION END/) {\n            close($out);\n            $spew = 0;\n        }\n    }\n</code></pre>\n\n<p>This is how the log file looks like </p>\n\n<pre><code>*TRANSACTION STARTED* \n[020t CARD INSERTED \n[020tCARD: *************5845 \nDATE 01-02-16    TIME 05:45:52 \n 05:46:26 GENAC 1 : ARQC \nEXTERNAL AUTHENTICATE: NO ARPC \n 05:46:30 GENAC 2 : AAC \n 01 FEB 2016     05:47:41      10160021 \n\n     WITHDRAW \n     FROM XXXXXXXX    ? \nINVALID TRANSCATION ON TERMINAL. \n----------------------- \n[020t 05:47:05 CARD TAKEN \n[020t 05:47:07 TRANSACTION END \n[0r(1)2[000p[040qe1w3h162[020t*742*02/01/2016*05:47* \n     *TRANSACTION STARTED* \n[020t CARD INSERTED \n[020tCARD: *************2584 \nDATE 01-02-16    TIME 05:47:27 \n 05:48:00 GENAC 1 : ARQC \n 05:48:05 GENAC 2 : TC \n[020t 05:48:16 CARD TAKEN \n[020t 05:48:22 NOTES PRESENTED 0,0,2,0 \n 01 FEB 2016     05:48:52      10160021 \n\n     WITHDRAW \n     FROM XXXXXXXX    ? \nAMT   GHC40.00 \n[020t 05:48:31 TRANSACTION END \n[0r(1)2[000p[040qe1w3h162[020t*743*02/01/2016*05:57*\n</code></pre>\n\n<p>The Desired output should look like this on each .txt file</p>\n\n<pre><code>*TRANSACTION STARTED* \n    [020t CARD INSERTED \n    [020tCARD: *************2584 \n    DATE 01-02-16    TIME 05:47:27 \n     05:48:00 GENAC 1 : ARQC \n     05:48:05 GENAC 2 : TC \n    [020t 05:48:16 CARD TAKEN \n    [020t 05:48:22 NOTES PRESENTED 0,0,2,0 \n     01 FEB 2016     05:48:52      10160021 \n\n         WITHDRAW \n         FROM XXXXXXXX    ? \n    AMT   GHC40.00 \n    [020t 05:48:31 TRANSACTION END \n</code></pre>\n"}, {"tags": ["jquery", "linux", "perl", "jquery-ui", "cgi"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 2, "creation_date": 1456587220, "post_id": 35671572, "comment_id": 59022348, "body": "You&#39;ll need to show some Perl code if you expect us to have any idea what&#39;s going on."}, {"owner": {"reputation": 1, "user_id": 2801559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9538ef609067e6d6a842dfef189b77d2?s=128&d=identicon&r=PG", "display_name": "guest271314", "link": "https://stackoverflow.com/users/2801559/guest271314"}, "edited": false, "score": 1, "creation_date": 1456587696, "post_id": 35671572, "comment_id": 59022494, "body": "See <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\" rel=\"nofollow noreferrer\">w3.org/Protocols/rfc2616/rfc2616-sec10.html</a> , <a href=\"http://stackoverflow.com/questions/15656514/return-http-error-code-from-cgi-c-module\" title=\"return http error code from cgi c module\">stackoverflow.com/questions/15656514/&hellip;</a>"}, {"owner": {"reputation": 2746, "user_id": 5142412, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/357437104426850/picture?type=large", "display_name": "Harish Kommuri", "link": "https://stackoverflow.com/users/5142412/harish-kommuri"}, "edited": false, "score": 0, "creation_date": 1456588341, "post_id": 35671572, "comment_id": 59022709, "body": "See <a href=\"http://api.jquery.com/jQuery.post/\" rel=\"nofollow noreferrer\">api.jquery.com/jQuery.post</a>  it might be useful to you"}, {"owner": {"reputation": 115, "user_id": 643979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/802beb530b5853dfcdd7edd03a874d61?s=128&d=identicon&r=PG", "display_name": "Scorpious", "link": "https://stackoverflow.com/users/643979/scorpious"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456630706, "post_id": 35671572, "comment_id": 59035187, "body": "@Matt added the server side perl code &amp; guest271314 also experimented with print(&quot;HTTP/1.1 400 Bad Request\\n&quot;); but no luck yet."}, {"owner": {"reputation": 1, "user_id": 2801559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9538ef609067e6d6a842dfef189b77d2?s=128&d=identicon&r=PG", "display_name": "guest271314", "link": "https://stackoverflow.com/users/2801559/guest271314"}, "edited": false, "score": 0, "creation_date": 1456632022, "post_id": 35671572, "comment_id": 59035408, "body": "@Scorpious What is response to ajax using <code>print(&quot;HTTP&#47;1.1 400 Bad Request\\n&quot;);</code> ? Have you added <code>.fail(function(jqxhr, textStatus, errorThrown) { console.log(textStatus, errorThrown)})</code> chained to <code>$.post()</code> to handle error response ?"}, {"owner": {"reputation": 115, "user_id": 643979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/802beb530b5853dfcdd7edd03a874d61?s=128&d=identicon&r=PG", "display_name": "Scorpious", "link": "https://stackoverflow.com/users/643979/scorpious"}, "reply_to_user": {"reputation": 1, "user_id": 2801559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9538ef609067e6d6a842dfef189b77d2?s=128&d=identicon&r=PG", "display_name": "guest271314", "link": "https://stackoverflow.com/users/2801559/guest271314"}, "edited": false, "score": 0, "creation_date": 1456635828, "post_id": 35671572, "comment_id": 59036005, "body": "@guest271314  I have tested using the status string, it comes to success all the time."}, {"owner": {"reputation": 1, "user_id": 2801559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9538ef609067e6d6a842dfef189b77d2?s=128&d=identicon&r=PG", "display_name": "guest271314", "link": "https://stackoverflow.com/users/2801559/guest271314"}, "edited": false, "score": 0, "creation_date": 1456638379, "post_id": 35671572, "comment_id": 59036457, "body": "Have you tried <code>die &quot;Bad error here&quot;;</code> <a href=\"http://perldoc.perl.org/CGI/Carp.html#MAKING-PERL-ERRORS-APPEAR-IN-THE-BROWSER-WINDOW\" rel=\"nofollow noreferrer\">perldoc.perl.org/CGI/&hellip;</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 1522, "user_id": 1721199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODAjY.jpg?s=128&g=1", "display_name": "Nikolai Saiko", "link": "https://stackoverflow.com/users/1721199/nikolai-saiko"}, "edited": false, "score": 0, "creation_date": 1456588458, "post_id": 35671734, "comment_id": 59022738, "body": "fix your syntax in json: use not &quot;=&quot;, but &quot;:&quot; for separating key from value. And &quot;,&quot; after last key-value pair is syntax error."}], "tags": [], "owner": {"reputation": 1, "user_id": 5987811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f25fcb389476d52cf7a9cd64a85f4ed?s=128&d=identicon&r=PG", "display_name": "nam3less", "link": "https://stackoverflow.com/users/5987811/nam3less"}, "is_accepted": false, "score": 0, "last_activity_date": 1456590916, "last_edit_date": 1456590916, "creation_date": 1456587828, "answer_id": 35671734, "question_id": 35671572, "link": "https://stackoverflow.com/questions/35671572/simulating-failure-case-in-jquery-post-method/35671734#35671734", "title": "Simulating failure case in jQuery post method", "body": "<p>The status returned by jQuery's post function is the HTTP-statuscode. Everytime you print something in your script it will be sent to the browser by your webserver with 200 OK Status.</p>\n\n<p>Now one of your options is to indicate the error in the responded data.\nExample using a json-encoded server-response:</p>\n\n<pre><code>{\n    \"error\": true\n}\n</code></pre>\n\n<p>One other option is to set the HTTP-Statuscode to something else (for your case the code 400, which means 'Bad Request' could be appropiate).</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 643979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/802beb530b5853dfcdd7edd03a874d61?s=128&d=identicon&r=PG", "display_name": "Scorpious", "link": "https://stackoverflow.com/users/643979/scorpious"}, "edited": false, "score": 0, "creation_date": 1456642997, "post_id": 35671768, "comment_id": 59037464, "body": "How can I make perl return the HTTP response status code?"}, {"owner": {"reputation": 135, "user_id": 1164005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/566109190/picture?type=large", "display_name": "Francis Chartrand", "link": "https://stackoverflow.com/users/1164005/francis-chartrand"}, "reply_to_user": {"reputation": 115, "user_id": 643979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/802beb530b5853dfcdd7edd03a874d61?s=128&d=identicon&r=PG", "display_name": "Scorpious", "link": "https://stackoverflow.com/users/643979/scorpious"}, "edited": false, "score": 1, "creation_date": 1456672998, "post_id": 35671768, "comment_id": 59046025, "body": "I&#39;m not familiar with Perl, but see : <a href=\"http://stackoverflow.com/a/19873204/1164005\">stackoverflow.com/a/19873204/1164005</a>"}], "tags": [], "owner": {"reputation": 135, "user_id": 1164005, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/566109190/picture?type=large", "display_name": "Francis Chartrand", "link": "https://stackoverflow.com/users/1164005/francis-chartrand"}, "is_accepted": false, "score": 0, "last_activity_date": 1456587999, "creation_date": 1456587999, "answer_id": 35671768, "question_id": 35671572, "link": "https://stackoverflow.com/questions/35671572/simulating-failure-case-in-jquery-post-method/35671768#35671768", "title": "Simulating failure case in jQuery post method", "body": "<p>If you want to test a failed Ajax call, your Pearl code should return a 400, ..., 403, 404 or 500 HTTP-statuscode.</p>\n"}], "owner": {"reputation": 115, "user_id": 643979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/802beb530b5853dfcdd7edd03a874d61?s=128&d=identicon&r=PG", "display_name": "Scorpious", "link": "https://stackoverflow.com/users/643979/scorpious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1456630538, "creation_date": 1456586828, "last_edit_date": 1456630538, "question_id": 35671572, "link": "https://stackoverflow.com/questions/35671572/simulating-failure-case-in-jquery-post-method", "title": "Simulating failure case in jQuery post method", "body": "<p>I am using the jQuery post method from : <a href=\"http://www.w3schools.com/jquery/jquery_ajax_get_post.asp\" rel=\"nofollow\">http://www.w3schools.com/jquery/jquery_ajax_get_post.asp</a></p>\n\n<pre><code>$(\"button\").click(function(){\n    $.post(\"demo_test_post.pl\",\n    {\n        name: \"Donald Duck\",\n        city: \"Duckburg\"\n    },\n    function(data, status){\n        alert(\"Data: \" + data + \"\\nStatus: \" + status);\n    });\n});\n</code></pre>\n\n<p>The server side script is in perl.\nThe print statements in perl are getting in the data parameter of the callback function. And I am always getting status as \"success\"</p>\n\n<p>Basically I need to propagate an error condition to the front-end which I am not able to simulate. I have tried die, exit and return with different values but in all cases I get status as \"success\".</p>\n\n<p>How can I get the non-success status for this jQuery function?</p>\n\n<p>Also Is there a cleaner way to receive the error condition from the back-end perl server?</p>\n\n<p>Below is the perl code on the server side:</p>\n\n<pre><code>#!/usr/bin/env perl\n#|++\n\nuse CGI;\nuse CGI::Carp qw(fatalsToBrowser);\n\nmy $q = new CGI;\n\nmain();\n\nsub main()\n{\n  if($q-&gt;param())\n  {\n     my $name = $q-&gt;param('name');\n     my $city = $q-&gt;param('city');\n\n    print('You entered'.$name.' and '.$city);\n  }\n}\n</code></pre>\n\n<p>With above code I have experimented with return, die &amp; exit but I always get success as status.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1456600016, "post_id": 35671316, "comment_id": 59027139, "body": "You have a subtle bug. If a line contains the same key twice only the first one will be replaced.  Your <code>s&#47;&#47;&#47;</code> needs a <code>&#47;g</code> to fix this."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1456600260, "post_id": 35671316, "comment_id": 59027237, "body": "<code>split</code> permits a &quot;limit&quot; argument permitting you to stop searching for the split character after you find it. This would speed up the first loop a bit."}], "answers": [{"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1456600116, "post_id": 35674025, "comment_id": 59027180, "body": "There are many subtle edge cases when combining a regex. I would highly recommend <a href=\"https://metacpan.org/pod/Regexp::Assemble\" rel=\"nofollow noreferrer\">Regexp::Assemble</a> to do it."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 1, "last_activity_date": 1456599807, "last_edit_date": 1456599807, "creation_date": 1456599377, "answer_id": 35674025, "question_id": 35671316, "link": "https://stackoverflow.com/questions/35671316/any-way-to-speed-up-this-perl-script/35674025#35674025", "title": "Any way to speed up this Perl script?", "body": "<p>Concatenate your patterns (keys) into a single large regex:</p>\n\n<pre><code>/(a|b|c|d|...|zzz)/\n</code></pre>\n\n<p>Compile the large regex once, and use the group <code>$1</code> as your key in a lookup.</p>\n\n<pre><code>s/$big_re/$1 . $addtext{$1}/ge;\n</code></pre>\n\n<p>(The <code>/e</code> flag makes the replacement an expression, not text. You are writing <code>$1 . $text</code> but may want to do other things within the expression (call a function, make it lower case, add more formatting, etc.). See docs <a href=\"http://perldoc.perl.org/perlop.html#s%2f_PATTERN_%2f_REPLACEMENT_%2fmsixpodualngcer\" rel=\"nofollow\">here</a>, look for <code>/e</code> flag in examples.</p>\n"}, {"comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1456600130, "post_id": 35674034, "comment_id": 59027188, "body": "There are many subtle edge cases when combining a regex. I would highly recommend <a href=\"https://metacpan.org/pod/Regexp::Assemble\" rel=\"nofollow noreferrer\">Regexp::Assemble</a> to do it."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1456599431, "creation_date": 1456599431, "answer_id": 35674034, "question_id": 35671316, "link": "https://stackoverflow.com/questions/35671316/any-way-to-speed-up-this-perl-script/35674034#35674034", "title": "Any way to speed up this Perl script?", "body": "<p>This bit you can speed up quite handily:</p>\n\n<pre><code>for my $name (keys %ids) {\n    s/$name/${name} $ids{$name}/;\n}\n</code></pre>\n\n<p>Compile it into a regex:</p>\n\n<pre><code>my $search = join \"|\", map {quotemeta} keys %ids; \n   $search = qr/\\b($search)\\b/;\n</code></pre>\n\n<p>And then in the loop:</p>\n\n<pre><code>s/$search/$1 $ids{$1}/g; \n</code></pre>\n\n<p>Note - I've added <code>\\b</code> for word break matching, because that's less likely to trip you up with substrings and sort orders. Obviously, you don't need to. </p>\n\n<p>But it means you're not then doing a loop of regex matches each iteration. </p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 4031181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a1c1252c2989758cc55203d362d7803?s=128&d=identicon&r=PG&f=1", "display_name": "Systematis", "link": "https://stackoverflow.com/users/4031181/systematis"}, "edited": false, "score": 0, "creation_date": 1456618853, "post_id": 35674131, "comment_id": 59032971, "body": "Thank you for such a comprehensive answer. <code>my $text = do { local $&#47;; &lt;$fh&gt; };</code> did its job. I&#39;ve tested the script on a sample text and it works 21 times faster than before (14s vs 304s)! Also I tried to use Regex::Assemble, but for some reason this script works slower with it (39s)."}, {"owner": {"reputation": 119, "user_id": 963183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c867babb1b402c48e4b9a84f0b82dc?s=128&d=identicon&r=PG", "display_name": "Bruce Van Allen", "link": "https://stackoverflow.com/users/963183/bruce-van-allen"}, "edited": false, "score": 1, "creation_date": 1457403379, "post_id": 35674131, "comment_id": 59380853, "body": "Seven times as fast instead of 21 times might seem worthwhile if you discovered that the substitution for &#39;TARGET TEXT 1&#39; also eats &#39;TARGET TEXT 10&#39; and more. Just one example. Schwern is being a persistent wise voice about combining regular expressions - take heed."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 6, "last_activity_date": 1456600325, "last_edit_date": 1456600325, "creation_date": 1456599978, "answer_id": 35674131, "question_id": 35671316, "link": "https://stackoverflow.com/questions/35671316/any-way-to-speed-up-this-perl-script/35674131#35674131", "title": "Any way to speed up this Perl script?", "body": "<p>Loops with in loops are always suspicious, especially when there's IO involved.</p>\n\n<pre><code>while (&lt;$fh&gt;) {\n    for my $name (keys %ids) {\n        s/$name/${name} $ids{$name}/;\n    }\n    print $fho $_;\n}\n</code></pre>\n\n<p>The best performance improvement you can do here is to not do it line by line.  Instead, read the whole file in and work on it as a single piece of text.  40 megs is not that much memory these days, if you read the whole file in as a single string you could do the whole thing once.  This eliminates a lot of Perl and IO overhead.</p>\n\n<pre><code># Or use File::Slurp or Path::Tiny\nmy $text = do { local $/; &lt;$fh&gt; };\n\nfor my $name (keys %ids) {\n    # The /g is important to replace all instances of each key\n    $text =~ s/$name/${name} $ids{$name}/g;\n}\nprint $fho $text;\n</code></pre>\n\n<p>Clever buffering could make this more memory efficient.  Rather than reading the whole file, you can use <code>read()</code> to read the file in large blocks while still ensuring <code>$text</code> always ends on a newline.  That general technique for reading files deserves its own question and probably already has an answer, so I leave that to you.</p>\n\n<hr>\n\n<p>Next improvement is to not loop over each key.  Instead, combine all the keys together into a single regex, get all the keys which match on each line, and apply them.  Use <a href=\"https://metacpan.org/pod/Regexp::Assemble\">Regex::Assemble</a> to do the combining.</p>\n\n<pre><code>my $all_keys = Regexp::Assemble-&gt;new;\n$all_keys-&gt;add( keys %ids );\nmy $all_keys_re = $all_keys-&gt;re;\n\n# Get all the matched keys at once, the /g is important.\nmy @matches = $text =~ /($all_keys_re)/g;\n\n# Replace all the matched keys. Use uniq to avoid doing the replacement twice.\nfor my $match (uniq @matches) {\n    # Use /g to replace multiple copies of the same key on a line.\n    $text =~ s/$match/$match $ids{$match}/g;\n}\nprint $fho $text;\n</code></pre>\n\n<p>This will be a win if each file contains a low percentage of the total possible keys.  The regex will be significantly faster because it will use a more efficient algorithm than brute force rescanning the text for each key.  It will also be executed in the regex engine which is generally more efficient than Perl bytecode.</p>\n\n<p>This can be made even more efficient by using the suggestions from the other answers and doing it all in a single <code>s///</code>.</p>\n\n<pre><code>my $text = do { local $/; &lt;&gt; };\n\n$text =~ s{($all_keys_re)}{$1 $ids{$1}}g;\n\nprint $text;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 4196566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8Ti7Wo00kMQ/AAAAAAAAAAI/AAAAAAAAEWQ/dXI0-UENGmk/photo.jpg?sz=128", "display_name": "JUNPA", "link": "https://stackoverflow.com/users/4196566/junpa"}, "is_accepted": false, "score": 0, "last_activity_date": 1458207409, "creation_date": 1458207409, "answer_id": 36056610, "question_id": 35671316, "link": "https://stackoverflow.com/questions/35671316/any-way-to-speed-up-this-perl-script/36056610#36056610", "title": "Any way to speed up this Perl script?", "body": "<p>Though it might look plausible, the above answers have assumed that the application of the replace patterns is independent of the order of <b> pattern </b> defined in <b> add.txt </b>.</p>\n\n<p>The original question should be clarified more to answer correctly.</p>\n\n<p>For example, <code>&lt;b&gt; input.txt &lt;/b&gt; can be changed only once</code>, etc.</p>\n\n<p>What if one pattern in <b> add.txt </b> changes some lines, and then the other pattern in <b> add.txt </b> changes the previously changed ones?</p>\n"}], "owner": {"reputation": 53, "user_id": 4031181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a1c1252c2989758cc55203d362d7803?s=128&d=identicon&r=PG&f=1", "display_name": "Systematis", "link": "https://stackoverflow.com/users/4031181/systematis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 1, "accepted_answer_id": 35674131, "answer_count": 4, "score": 3, "last_activity_date": 1458207409, "creation_date": 1456585487, "last_edit_date": 1456593087, "question_id": 35671316, "link": "https://stackoverflow.com/questions/35671316/any-way-to-speed-up-this-perl-script", "title": "Any way to speed up this Perl script?", "body": "<p>I have this script which combines two texts based on the identical parts.</p>\n\n<pre><code>use warnings;\nuse strict;\nuse utf8;\nuse open ':encoding(utf8)';\nbinmode(STDOUT, \":utf8\");\n\nmy $f1 = 'input.txt';\nmy $f2 = 'add.txt';\nmy $f3 = 'output.txt';\n\nmy %ids;\nmy $fh;\n\nopen $fh, '&lt;', $f2 or die \"Can't read the file with replacements: $!\";\nwhile (&lt;$fh&gt;) {\n    chomp;\n    my ($name, $id) = split /=/;\n    $ids{$name} = $id;\n}\nclose $fh;\n\nopen my $fho, '&gt;', $f3 or die \"Can't write output file: $!\";\nopen $fh, '&lt;', $f1 or die \"Can't read input file: $!\";\nwhile (&lt;$fh&gt;) {\n    for my $name (keys %ids) {\n        s/$name/${name} $ids{$name}/;\n    }\n    print $fho $_;\n}\n\nclose $fh;\nclose $fho;\n</code></pre>\n\n<p>For example.</p>\n\n<p>input.txt - \"text stream\" without particular structure</p>\n\n<pre><code>random text random text, TARGET TEXT 1 \u2014 random\ntextTARGET TEXT 2! random text random text\nrandom text random text random text\nTARGET TEXT 3 random text random text TARGET TEXT 4 random text\n</code></pre>\n\n<p>add.txt - list of text to add</p>\n\n<pre><code>TARGET TEXT 1=ADDITIONAL TEXT 1\nTARGET TEXT 2=ADDITIONAL TEXT 2\nTARGET TEXT 3=ADDITIONAL TEXT 3\nTARGET TEXT 4=ADDITIONAL TEXT 4\n</code></pre>\n\n<p>output.txt will be:</p>\n\n<pre><code>random text random text, TARGET TEXT 1 ADDITIONAL TEXT 1 \u2014 random\ntextTARGET TEXT 2 ADDITIONAL TEXT 2! random text random text\nrandom text random text random text\nTARGET TEXT 3 ADDITIONAL TEXT 3 random text random text TARGET TEXT 4 ADDITIONAL TEXT 4\n</code></pre>\n\n<p>I have a fairly large text files to combine (~40Mb) and the script doing its work super slow. Is there any way to speed it up? Or maybe someone knows a tool that can do the exact same thing.</p>\n"}, {"tags": ["perl", "vbscript", "command-prompt"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 14263772, "user_type": "registered", "profile_image": "https://graph.facebook.com/2754178584858700/picture?type=large", "display_name": "Kian Gabriel Arambulo", "link": "https://stackoverflow.com/users/14263772/kian-gabriel-arambulo"}, "is_accepted": false, "score": 0, "last_activity_date": 1599888891, "creation_date": 1599888891, "answer_id": 63857179, "question_id": 35670984, "link": "https://stackoverflow.com/questions/35670984/writing-to-multiple-lines-in-command-prompt-vbscript/63857179#63857179", "title": "Writing to multiple lines in command prompt VBSCript", "body": "<p>Separate commands with &amp; sign.</p>\n"}], "owner": {"reputation": 21, "user_id": 5990456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24aa4489cbc2ee607058d9b2be3d5ec1?s=128&d=identicon&r=PG", "display_name": "petek", "link": "https://stackoverflow.com/users/5990456/petek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1599888891, "creation_date": 1456583537, "question_id": 35670984, "link": "https://stackoverflow.com/questions/35670984/writing-to-multiple-lines-in-command-prompt-vbscript", "title": "Writing to multiple lines in command prompt VBSCript", "body": "<p>I am writing code in VB script.</p>\n\n<p>The script will executing commands for programming, erasing, verfying hex code on microcontrollers in serial production.</p>\n\n<p>The vbscript executes Commad line interface which is running similar like windows command prompt. </p>\n\n<p>After Ppcli.exe is started from VBScript, some commands are sent to the com port. The commamds are shown below:</p>\n\n<p>Get port, OpenPort , SetPowerVoltage 3.3, SetProtocol, EraseAll,Program, ...etc.</p>\n\n<p>Everything works great, but here is the problem. I can send commands in sigle string (Open Port, Set Power, Erase... etc.) but this kind of sending has a big issue. </p>\n\n<p>I can't read the response for the sigle command (OK or not OK) and I can't send the whole hex file at once, because programmer only supports programming, verifying line by line. This means I have to read line from file and send it to microcontroller 128 times.</p>\n\n<p>I have to send 128 commands for write lines in sigle string which is really not the good solution.</p>\n\n<p>I would like to write do while loop, but every time I close command prompt window, the ports is automaticly closed and the communication is lost :(</p>\n\n<p>I would like to know if is it possible to write to command line in the way to send:</p>\n\n<ol>\n<li><p>Open Port</p></li>\n<li><p>Read if it is OK or not OK</p></li>\n<li><p>Program line form hex file 1</p></li>\n<li><p>Verify line 1</p></li>\n<li><p>Program Line 2</p></li>\n<li><p>Verify line 2 </p></li>\n<li><p>etc.</p></li>\n</ol>\n\n<p>I really don't know what to do, since I am not able to communicate with the programmer in any other way than single string sending. But the string is then very long and there is no diagnostic if something goes wrong while programming:(</p>\n\n<p>I was sure that CLI (command line interface) would be the best choice to program microcontrollers but now I am stuck, since I didn't know that it is only possible programming row by row and not the whole hex program at once :(</p>\n\n<p>If you have any solution for me I would be glad.</p>\n\n<p>Can I run Perl code from VBS? I also have working pearl example for programming devices?</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["windows", "perl"], "answers": [{"comments": [{"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1456597734, "post_id": 35668597, "comment_id": 59026287, "body": "<i>puts on Burns&#39; voice</i> ...  egggggcellent"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1456759170, "post_id": 35668597, "comment_id": 59082667, "body": "@BillyONeal: At a guess <i>Burns</i> is someone known to US residents? To me he&#39;s the Scottish poet, who would have pronounced his gees rather differently"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1456771052, "post_id": 35668597, "comment_id": 59090637, "body": "@BillyONeal: Ah <i>that</i> Mr Burns :)  We do know about Springfield here but he&#39;s not the first &quot;Burns&quot; that most people would think of! Glad to have helped. Cheers"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 6, "last_activity_date": 1456570603, "last_edit_date": 1456570603, "creation_date": 1456569006, "answer_id": 35668597, "question_id": 35668359, "link": "https://stackoverflow.com/questions/35668359/how-can-i-change-the-system-shell-used-by-perl-for-system-qx-and-friends/35668597#35668597", "title": "How can I change the system shell used by perl for system(), qx//, and friends?", "body": "<p>Perl ignores the value of <code>COMSPEC</code>, but you can set the environment variable <code>PERL5SHELL</code> to the path to a shell program file, together with any switches that you want to use. For instance</p>\n\n<pre><code>C:\\Windows\\System32\\cmd.exe /d /c\n</code></pre>\n\n<p>Perl will use this to run command strings that you pass to <code>qx//</code> and <code>system($command)</code> where <code>$command</code> contains shell metacharacters</p>\n\n<p>But there is no bash shell on Windows by default, and you will have to install something like <a href=\"https://www.cygwin.com\" rel=\"noreferrer\">Cygwin</a> or <a href=\"http://win-bash.sourceforge.net\" rel=\"noreferrer\">win-bash</a> before you can use a bash-type shell</p>\n"}], "owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 35668597, "answer_count": 1, "score": 2, "last_activity_date": 1456570603, "creation_date": 1456567288, "question_id": 35668359, "link": "https://stackoverflow.com/questions/35668359/how-can-i-change-the-system-shell-used-by-perl-for-system-qx-and-friends", "title": "How can I change the system shell used by perl for system(), qx//, and friends?", "body": "<p>I'd like to replace the shell perl uses for <code>system</code>; for example to replace <code>cmd.exe</code> on Windows with bash. Is there a supported mechanism to tell perl what  shell to use?</p>\n"}, {"tags": ["perl", "redirect", "state", "post-redirect-get", "session-management"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1456566495, "post_id": 35667841, "comment_id": 59015798, "body": "What do you mean by <i>&quot;isn&#39;t working&quot;</i>? Does your browser get the 302 message? What is <code>$q</code>?"}, {"owner": {"reputation": 165, "user_id": 3913435, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a801da8d7c3a1479343d4966f4786beb?s=128&d=identicon&r=PG&f=1", "display_name": "Ybarra", "link": "https://stackoverflow.com/users/3913435/ybarra"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456566932, "post_id": 35667841, "comment_id": 59015910, "body": "$q = new CGI;  When I uncomment the line &quot;#print $q-&gt;header( -cookie=&gt;$cookie );&quot; the page works, but the redirect is printed onto the html document (because it is no longer the first header) and It says &quot;OK the document has moved here&quot; with a link. But if the line &quot;#print $q-&gt;header( -cookie=&gt;$cookie );&quot; is commented out, when the user logs in it tries to download the cgi file...weird. Very new to perl, so I don&#39;t really know whats going on! Thanks for the response. @borodin"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1456568725, "post_id": 35667841, "comment_id": 59016431, "body": "From <a href=\"https://metacpan.org/pod/distribution/CGI/lib/CGI.pod#CGI.pm-HAS-BEEN-REMOVED-FROM-THE-PERL-CORE\" rel=\"nofollow noreferrer\">the manual</a>: <i>CGI.pm is no longer considered good practice for developing web applications, including quick prototyping and small web scripts. There are far better, cleaner, quicker, easier, safer, more scalable, more extensible, more modern alternatives available at this point in time. These will be documented with <a href=\"https://metacpan.org/pod/CGI::Alternatives\" rel=\"nofollow noreferrer\">CGI::Alternatives</a>.</i>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1456569204, "post_id": 35667841, "comment_id": 59016560, "body": "@Quentin: That&#39;s a useful warning, but largely irrelevant to the OP&#39;s situation. This is a question regarding a class assignment about  CGI web applications"}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 3913435, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a801da8d7c3a1479343d4966f4786beb?s=128&d=identicon&r=PG&f=1", "display_name": "Ybarra", "link": "https://stackoverflow.com/users/3913435/ybarra"}, "edited": false, "score": 0, "creation_date": 1456569334, "post_id": 35668576, "comment_id": 59016605, "body": "But when I take out that first line you mention &quot;print $q-&gt;header( -cookie=&gt;$cookie );&quot;, the code just ceases to work. Any idea why? I was just printing the cookie for test purposes, definitely gonna take it out! @Quentin"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "reply_to_user": {"reputation": 165, "user_id": 3913435, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a801da8d7c3a1479343d4966f4786beb?s=128&d=identicon&r=PG&f=1", "display_name": "Ybarra", "link": "https://stackoverflow.com/users/3913435/ybarra"}, "edited": false, "score": 0, "creation_date": 1456570234, "post_id": 35668576, "comment_id": 59016890, "body": "@Ybarra \u2014 That isn&#39;t the line I told you to take out. The line I told you to take out is <code>print $cookie</code>, which is generating the HTTP body before you finished generating the headers."}, {"owner": {"reputation": 165, "user_id": 3913435, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a801da8d7c3a1479343d4966f4786beb?s=128&d=identicon&r=PG&f=1", "display_name": "Ybarra", "link": "https://stackoverflow.com/users/3913435/ybarra"}, "edited": false, "score": 0, "creation_date": 1456571260, "post_id": 35668576, "comment_id": 59017198, "body": "I did take it out, it still is doing the same thing. At the bottom of my page it displays the server message, which says &quot;OK the document has moved here,&quot; where &#39;here&#39; is a link to the next cgi script, which works when I click on the link. But taking out <code>print $cookie</code> didn&#39;t change anything unfortunately."}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1456568915, "creation_date": 1456568915, "answer_id": 35668576, "question_id": 35667841, "link": "https://stackoverflow.com/questions/35667841/perl-302-redirecting-to-another-cgi-script/35668576#35668576", "title": "Perl: 302 Redirecting to another cgi script", "body": "<blockquote>\n<pre><code>print $q-&gt;header( -cookie=&gt;$cookie ); \n</code></pre>\n</blockquote>\n\n<p>The above takes the cookie and outputs it in an HTTP header</p>\n\n<blockquote>\n<pre><code>print $cookie;\n</code></pre>\n</blockquote>\n\n<p>The above takes the cookie, converts it to a string, then outputs it in the HTTP <em>body</em>.</p>\n\n<blockquote>\n  <p>print $q->redirect(</p>\n</blockquote>\n\n<p>The above generates a redirect HTTP header \u2026 but you have already started the HTTP body \u2026 so it gets output as text instead.</p>\n\n<hr>\n\n<p>Don't print the text of the cookie.</p>\n"}, {"tags": [], "owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "is_accepted": false, "score": 1, "last_activity_date": 1456743144, "creation_date": 1456743144, "answer_id": 35697703, "question_id": 35667841, "link": "https://stackoverflow.com/questions/35667841/perl-302-redirecting-to-another-cgi-script/35697703#35697703", "title": "Perl: 302 Redirecting to another cgi script", "body": "<p>As others have already pointed out, you are printing out too many things. All you should print is the redirection instruction.</p>\n\n<pre><code>print $q-&gt;redirect(\n    -uri=&gt;\"http://jadran.sdsu.edu/perl/jadrn015/proj1_scripts/main_app.cgi\",\n    -status=&gt;302,\n    -cookie=&gt;$cookie\n);\n</code></pre>\n\n<p>All other print statements need to be removed.</p>\n\n<p>You say:</p>\n\n<blockquote>\n  <p>if I delete</p>\n\n<pre><code>print $q-&gt;header( -cookie=&gt;$cookie );\n</code></pre>\n  \n  <p>Then nothing works, after logging in, my browser either says that the\n  file is not found or it tries to download the script.</p>\n</blockquote>\n\n<p>It seems to me that this is evidence that it <strong>is</strong> working. Looks like your browser is being redirected correctly and the errors that you are seeing are down to your second URL (the one that you redirect to) being either incorrect or misconfigured.</p>\n\n<p>There are a couple of simple tests that you can run to demonstrate that it's working correctly.</p>\n\n<ol>\n<li><p>Use <code>curl</code> or something like that to make the HTTP request and see that you're getting the correct 302 response. Browsers are a terrible way to debug redirection problems as they go out of their way to hide what is actually going on.</p></li>\n<li><p>Try visiting the redirection URL directly. I suspect you'll get the same problems, which will prove that the problems are down to the URL, not your redirection code.</p></li>\n</ol>\n"}], "owner": {"reputation": 165, "user_id": 3913435, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a801da8d7c3a1479343d4966f4786beb?s=128&d=identicon&r=PG&f=1", "display_name": "Ybarra", "link": "https://stackoverflow.com/users/3913435/ybarra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456743144, "creation_date": 1456564066, "last_edit_date": 1456568316, "question_id": 35667841, "link": "https://stackoverflow.com/questions/35667841/perl-302-redirecting-to-another-cgi-script", "title": "Perl: 302 Redirecting to another cgi script", "body": "<p>For an assignment I'm building a web application that starts with a user logging in. After logging in a session is created, but upon refreshing, new session IDs are being created, so state isn't being preserved. I've read about using the POST-REDIRECT-GET method to not resubmit the login form, and I'm trying to do this with my scripts. Maybe I'm misunderstanding how and what to redirect to, but this code below isn't working. It's a subroutine that is run once the user is authenticated. Any ideas of what's going wrong?</p>\n\n<pre><code>sub send_to_main {\n    my $session = new CGI::Session(undef, undef, {Directory=&gt;'/tmp'});\n    $session-&gt;expires('+1d');\n    my $cookie = $q-&gt;cookie(\n        -name       =&gt; 'jadrn015SID',\n        -value      =&gt; $session-&gt;id,\n        -expires    =&gt; '+1h');\n    print $q-&gt;header( -cookie=&gt;$cookie ); \n    my $sid = $session-&gt;id;\n    $session-&gt;param('user',$user); #added to make session more unique\n    print $cookie;\n    print $q-&gt;redirect(\n         -uri=&gt;\"http://jadran.sdsu.edu/perl/jadrn015/proj1_scripts/main_app.cgi\",\n         -status=&gt;302,\n         -cookie=&gt;$cookie\n     );  \n</code></pre>\n\n<p>EDIT:\nI am getting the 302 message back from the server, but it is being printed to my html document (I know this is because I am printing a header before I do the redirection). However, if I delete</p>\n\n<pre><code>print $q-&gt;header( -cookie=&gt;$cookie );\n</code></pre>\n\n<p>Then nothing works, after logging in, my browser either says that the file is not found or it tries to download the script.</p>\n"}, {"tags": ["perl", "file"], "comments": [{"owner": {"reputation": 1833, "user_id": 3763293, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Ainye.png?s=128&g=1", "display_name": "Akshay Arora", "link": "https://stackoverflow.com/users/3763293/akshay-arora"}, "edited": false, "score": 1, "creation_date": 1456557810, "post_id": 35666963, "comment_id": 59013546, "body": "Use commas and full stops. Please."}, {"owner": {"reputation": 11, "user_id": 5912113, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YjUM69ZVg8w/AAAAAAAAAAI/AAAAAAAAAKc/G5jTUv9bwYc/photo.jpg?sz=128", "display_name": "maria khalid", "link": "https://stackoverflow.com/users/5912113/maria-khalid"}, "edited": false, "score": 0, "creation_date": 1456559146, "post_id": 35666963, "comment_id": 59013844, "body": "no there are two files one is having keywords such as dream and play while other is having multiple lines having dream and play. what we need is to take keyword from 1st file and find total no. of keyword occurences in other"}, {"owner": {"reputation": 11, "user_id": 5912113, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YjUM69ZVg8w/AAAAAAAAAAI/AAAAAAAAAKc/G5jTUv9bwYc/photo.jpg?sz=128", "display_name": "maria khalid", "link": "https://stackoverflow.com/users/5912113/maria-khalid"}, "edited": false, "score": 0, "creation_date": 1456559404, "post_id": 35666963, "comment_id": 59013889, "body": "so play=2 and dream=3 this should be output expected"}], "answers": [{"comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 11, "user_id": 5912113, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YjUM69ZVg8w/AAAAAAAAAAI/AAAAAAAAAKc/G5jTUv9bwYc/photo.jpg?sz=128", "display_name": "maria khalid", "link": "https://stackoverflow.com/users/5912113/maria-khalid"}, "edited": false, "score": 0, "creation_date": 1456560459, "post_id": 35667199, "comment_id": 59014127, "body": "<code>%</code> is sigil used to declare a hash in Perl. Hashes are data type in Perl,  for more info you should check <a href=\"http://perldoc.perl.org/perldata.html\" rel=\"nofollow noreferrer\">perldata</a>"}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1456559627, "creation_date": 1456559627, "answer_id": 35667199, "question_id": 35666963, "link": "https://stackoverflow.com/questions/35666963/match-sting-in-files-and-calculate-total-number-of-occurance/35667199#35667199", "title": "Match sting in files and calculate total number of occurance", "body": "<p>You can use a hash to count the no of occurrences of the words. Keywords as key of hash and count as value. </p>\n\n<pre><code>while (/$regex/g){\n    $hash{$1}++;\n}\n\n# print the hash    \nforeach(keys %hash){\n    print \"$_ : $hash{$_}\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5912113, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YjUM69ZVg8w/AAAAAAAAAAI/AAAAAAAAAKc/G5jTUv9bwYc/photo.jpg?sz=128", "display_name": "maria khalid", "link": "https://stackoverflow.com/users/5912113/maria-khalid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456565049, "creation_date": 1456557698, "last_edit_date": 1456565049, "question_id": 35666963, "link": "https://stackoverflow.com/questions/35666963/match-sting-in-files-and-calculate-total-number-of-occurance", "title": "Match sting in files and calculate total number of occurance", "body": "<p>I have two file one is keyword file other as search file</p>\nsearch.txt</p>\n\n<pre><code>play       dream\ndream      play\ndream\n</code></pre>\n\n<p>keyword.txt</p>\n\n<pre><code>play\ndream\n</code></pre>\n\n<p>I want to calculate total occurrences for play and dream, such as <code>play= 2, dream =3</code></p>\n\n<p>Code i have tried so far is:</p>\n\n<pre><code>#!usr/bin/perl\nuse strict;\nuse warnings;\n\n#Lexical variable for filehandle is preferred, and always error check opens.\nopen my $keywords,    '&lt;', 'keyword.txt' or die \"Can't open keywords: $!\";\nopen my $search_file, '&lt;', 'search.txt'   or die \"Can't open search file: $!\";\nmy $count=0;\nmy $keyword_or = join '|', map {chomp;qr/\\Q$_\\E/} &lt;$keywords&gt;;\nmy $regex = qr|\\b($keyword_or)\\b|;\n\nwhile (&lt;$search_file&gt;)\n{\n\n    while (/$regex/g)\n    {\n    $count++;\n        print \"$.: $1\\n\";\n        print($count);\n\n\n    }\n}\n</code></pre>\n\n<p>But it is counting total occurrences for i.e 5</p>\n"}, {"tags": ["xml", "perl"], "answers": [{"comments": [{"owner": {"reputation": 1303, "user_id": 1765397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/27097058d247934f6ca0ece3867cac4f?s=128&d=identicon&r=PG", "display_name": "kdubs", "link": "https://stackoverflow.com/users/1765397/kdubs"}, "edited": false, "score": 0, "creation_date": 1456578058, "post_id": 35667686, "comment_id": 59019222, "body": "I&#39;ll check this out. Thanks"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 1303, "user_id": 1765397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/27097058d247934f6ca0ece3867cac4f?s=128&d=identicon&r=PG", "display_name": "kdubs", "link": "https://stackoverflow.com/users/1765397/kdubs"}, "edited": false, "score": 0, "creation_date": 1456581789, "post_id": 35667686, "comment_id": 59020517, "body": "@kdubs: I&#39;ve had a reply already from the library maintainers. The fix, exactly as I wrote it here, has been incorporated into version 2.0124 and will be available on CPAN once it gets uploaded"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 4, "last_activity_date": 1456570436, "last_edit_date": 1456570436, "creation_date": 1456563050, "answer_id": 35667686, "question_id": 35666006, "link": "https://stackoverflow.com/questions/35666006/perl-with-xml-why-to-i-need-check-if-the-attribute-is-defined-shouldnt-node/35667686#35667686", "title": "perl with xml : why to I need check if the Attribute is defined, shouldn&#39;t $node-&gt;attributes already do that?", "body": "<p>This is because of what I believe is a bug in <code>XML::LibXML::Text::attributes</code>, which looks like this</p>\n\n<pre><code>sub attributes { return undef; }\n</code></pre>\n\n<p>This should be</p>\n\n<pre><code>sub attributes { return }\n</code></pre>\n\n<p>which will return <code>undef</code> in scalar context and an empty list in list context</p>\n\n<p>You can fix it yourself if you want. In the latest version of the module -- 2.0123 -- it's on line 1789 of <code>LibXML.pm</code> in your <code>XML::LibXML</code> installation. You can discover where the file is by running</p>\n\n<pre><code>perldoc -l XML::LibXML\n</code></pre>\n\n<p>I will raise a bug report with the maintainers</p>\n"}], "owner": {"reputation": 1303, "user_id": 1765397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/27097058d247934f6ca0ece3867cac4f?s=128&d=identicon&r=PG", "display_name": "kdubs", "link": "https://stackoverflow.com/users/1765397/kdubs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 35667686, "answer_count": 1, "score": 0, "last_activity_date": 1456570436, "creation_date": 1456550081, "question_id": 35666006, "link": "https://stackoverflow.com/questions/35666006/perl-with-xml-why-to-i-need-check-if-the-attribute-is-defined-shouldnt-node", "title": "perl with xml : why to I need check if the Attribute is defined, shouldn&#39;t $node-&gt;attributes already do that?", "body": "<p>I'm trying to use perl to parse XML and I've run across something that seems odd. When I call $node->attributes() it seems to return an undefined value in some cases. If you look at the line labeled problem, you can see the if I've added. I would have thought that that if the node had no attributes then the foreach wouldn't have had anything to loop on. if I uncomment the if on that line all works. (I know I could put the check outside the loop, but I'm wondering why I need the check at all)</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse strict;\nuse warnings;\n\nmy $filename = 'lib.xml';\nuse XML::LibXML;\n\nmy $parser = XML::LibXML-&gt;new();\n$parser-&gt;keep_blanks(0);\n\nmy $doc    = $parser-&gt;parse_file($filename);\n\nsub process_node {\n    my $level = shift;\n    my $node = shift;\n\n    printf (\"%*s\", $level, \"\");\n    print $node-&gt;nodeName;\n    print \"&lt;\", $node-&gt;nodeValue,\"&gt;\" if (defined($node-&gt;nodeValue));\n    print \"\\n\";\n\n    print \"attrs:\\n\";\n\n    foreach ($node-&gt;attributes()){\n    print $_-&gt;name,\":\",$_-&gt;value,\" \" ;# if (defined($_)); ### problem\n    }\n\n    print \"\\n\";\n\n    for my $child ($node-&gt;childNodes) {\n        process_node($level+1, $child);\n    }\n}\n\nprocess_node(1, $doc-&gt;documentElement);\n</code></pre>\n\n<p>here's the contents of lib.xml:</p>\n\n<pre><code>&lt;data size=\"4\"&gt;\n&lt;stuff src=\"one\" dst=\"two\" /&gt;\nhmm\n&lt;/data&gt;\n</code></pre>\n\n<p>and here's the \"bad\" output:</p>\n\n<pre><code>&gt;&gt;&gt; ./xml.pl \n data\nattrs:\nsize:4 \n  stuff\nattrs:\nsrc:one dst:two \n  text&lt;\nhmm\n&gt;\nattrs:\nCan't call method \"name\" on an undefined value at ./xml.pl line 26.\n</code></pre>\n\n<p>and the good when I uncomment the if</p>\n\n<pre><code>&gt;&gt;&gt; ./xml.pl \n data\nattrs:\nsize:4 \n  stuff\nattrs:\nsrc:one dst:two \n  text&lt;\nhmm\n&gt;\nattrs:\n</code></pre>\n"}, {"tags": ["arrays", "perl", "merge"], "comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456629265, "post_id": 35665899, "comment_id": 59034952, "body": "I don&#39;t believe there is a way to <code>specify_behavior</code>, but I am not familiar with this module. I believe it is doing expected behavior by merging 2 arrays of hash references into 1 array of hash references. I think to deep merge you would have to write some more code. But then, I really don&#39;t know this module. Note: you want an array with 1 element (a hash reference) and you might be better served by having a hash reference with the deep elements instead. Just an observation."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 1, "last_activity_date": 1456569362, "last_edit_date": 1456569362, "creation_date": 1456553994, "answer_id": 35666478, "question_id": 35665899, "link": "https://stackoverflow.com/questions/35665899/perl-deep-merge-with-per-element-arrays-merge/35666478#35666478", "title": "perl: deep merge with per-element arrays merge", "body": "<p>I think that <code>specify_behaviour</code> is used to specify how to handle conflicts, or uneven structures to merge.  The documentation doesn't actually say much. But try it, go through defined shortcuts, or try to set them yourself. For your data structure you could try </p>\n\n<pre><code>SCALAR =&gt; ARRAY =&gt; sub { [ %{$_0}, %{$_[0]} ] }\nSCALAR =&gt; ARRAY =&gt; HASH =&gt; sub { [ $_[0], $_[0] ] }\n</code></pre>\n\n<p>If you tried and it didn't work you may have found a bug in the module? By what you show it just didn't go \"deep\" enough. Here it is without the module. I've enlarged your sample structures.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy %a = ( \n    'arr1' =&gt; [ { a =&gt; 'A', a1 =&gt; 'A1' } ],\n    'arr2' =&gt; [ { aa =&gt; 'AA', aa1 =&gt; 'AA1' } ] \n);\nmy %b = ( \n    'arr1' =&gt; [ { b =&gt; 'B', b1 =&gt; 'B1' } ], \n    'arr2' =&gt; [ { bb =&gt; 'BB', bb1 =&gt; 'BB1' } ] \n);\n# Copy top level, %a to our target %c\nmy %c;\n@c{keys %a} = values %a;\n# Iterate over hash keys, then through array\nforeach my $key (sort keys %c) {\n    my $arr_len = @{$c{$key}};\n    foreach my $i (0..$arr_len-1) {\n        my %hb = %{ ${$b{$key}}[$i] };\n        # merge: add %b to %c\n        @{ ${$c{$key}}[$i] }{keys %hb} = values %hb;\n    }\n}\n# Print it out\nforeach my $key (sort keys %c) {\n    print \"$key: \";\n    my $arr_len = @{$c{$key}};\n    foreach my $i (0..$arr_len-1) {\n        my %hc = %{ ${$c{$key}}[$i] };\n        print \"$_ =&gt; $hc{$_}, \" for sort keys %hc;\n    }\n    print \"\\n\";\n}\n</code></pre>\n\n<p>This prints the contents of <code>%c</code> (aligned manually here)</p>\n\n<pre>\n\n   arr1: a  => A,  a1  => A1,  b  => B,  b1  => B1, \n   arr2: aa => AA, aa1 => AA1, bb => BB, bb1 => BB1,\n\n</pre>\n\n<p>Code does not handle arrays/hashes of unequal sizes but checks can be added readily. </p>\n"}, {"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 0, "last_activity_date": 1457229315, "creation_date": 1457229315, "answer_id": 35822172, "question_id": 35665899, "link": "https://stackoverflow.com/questions/35665899/perl-deep-merge-with-per-element-arrays-merge/35822172#35822172", "title": "perl: deep merge with per-element arrays merge", "body": "<p>Another solution (that handles uneven hash elements in %a and %b).</p>\n\n<pre><code>my %c;\n\nforeach my $key (keys %a, keys %b) {\n    my $a_ref = $a{$key};\n    my $b_ref = $b{$key};\n    $c{$key} = { map %$_, @$a_ref, @$b_ref };\n}\n\nuse Data::Dumper;\nprint Dumper \\%c;\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 1810909, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bf3601d3de9c78fc54fff90cdd31d6d8?s=128&d=identicon&r=PG", "display_name": "eprst", "link": "https://stackoverflow.com/users/1810909/eprst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 1, "accepted_answer_id": 35666478, "answer_count": 2, "score": 0, "last_activity_date": 1457229315, "creation_date": 1456549205, "question_id": 35665899, "link": "https://stackoverflow.com/questions/35665899/perl-deep-merge-with-per-element-arrays-merge", "title": "perl: deep merge with per-element arrays merge", "body": "<p>I'm trying to merge two hashes and <code>Hash::Merge</code> does almost exactly what I need, except for arrays. Instead of concatenating arrays I need it to do per-element merge.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use Hash::Merge qw (merge);\n\nmy %a = ( 'arr' =&gt; [ { 'a' =&gt; 'b' } ] );\nmy %b = ( 'arr' =&gt; [ { 'c' =&gt; 'd' } ] );\n\nmy %c = %{ merge( \\%a, \\%b) };\n</code></pre>\n\n<p>Desired result is <code>('arr'=&gt;[{'a'=&gt;'b','c'=&gt;'d'}])</code>, actual result is <code>('arr'=&gt;[{'a'=&gt;'b'},{'c'=&gt;'d'}])</code></p>\n\n<p>Can this be done by using <code>specify_behavior</code> or is there some other way?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 1, "creation_date": 1456526544, "post_id": 35663040, "comment_id": 59006295, "body": "A good resource: <a href=\"http://perldoc.perl.org/perlsub.html\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsub.html</a>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1456526576, "post_id": 35663040, "comment_id": 59006312, "body": "By the way, your prototypes (<code>()</code>) are incorrect (they indicate the subs accept no arguments), which is why you had to override them by using <code>&amp;</code>. Get rid of both the prototypes and <code>&amp;</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1456526613, "post_id": 35663040, "comment_id": 59006335, "body": "You&#39;ll see the problem better if you change <code>1..5</code> to <code>4..9</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1456527169, "post_id": 35663040, "comment_id": 59006560, "body": "Re &quot;<i>when a list is coerced into a scalar context, the value becomes the size of the list.</i>&quot;, That&#39;s not true. Context doesn&#39;t coerce values, it affects what the operator returns in the first place. <code>@_</code> doesn&#39;t return a list that is coerced; <code>@_</code> returns the number of elements it contains."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1456527191, "post_id": 35663040, "comment_id": 59006566, "body": "I had read something that said that only newer versions of Perl fully supported subroutine parameters, and that prototypes in Perl didn&#39;t work the way some expected them to.  Unfortunately I&#39;m still figuring out Perl best practice vs what is allowed for the older version of Perl I am required to use."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456527234, "post_id": 35663040, "comment_id": 59006584, "body": "My comment about prototypes pertains to all existing version of Perl 5."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1456527432, "post_id": 35663040, "comment_id": 59006665, "body": "I guess I&#39;m still confused. My understanding is that @_ is a list object, and that as such, it has one or more scalar values, represented by an index, as well as a count of those scalars (and the count itself is a scalar).  When the list is coerced into scalar context, Perl automatically returns the count,, whereas $(@_[0]) would return the first scalar value.  Am I still not getting Perl?  :)"}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1456527920, "post_id": 35663040, "comment_id": 59006884, "body": "Actually, I think it was the PERLSUB page discussion of PROTO vs signatures that had left me more confused than when I started.  From what I could gather on that page, more recent versions of Perl have been transitioning to a subroutine pattern that more closely resembles other languages, where the parameter signature is fully preserved, rather than having all parameters joined into a list."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1456530178, "post_id": 35663040, "comment_id": 59007616, "body": "@ByronJones: It seems to be your efforts to interpret Perl code in C++ terms that is tripping you up. <code>@_</code> is not a <i>list object</i>, it is an <i>array</i>. When an array is used in <i>scalar context</i> it evaluates to the number of elements in the array. (When it is used in <i>list context</i> it evaluates to a list of the values of its elements.) The first element of any array <code>@xx</code> is a <i>scalar</i> value and so has a dollar prefix <code>$xx[0]</code>. <code>$(@_[0]) </code> isn&#39;t anything special and is a syntax error. You should be ignoring prototypes for now. Their purpose is far more esoteric in Perl than in other languages."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456530566, "post_id": 35663040, "comment_id": 59007720, "body": "@ByronJones: Likewise, subroutine signatures are an <i>experimental</i> facility and you should also ignore those. I&#39;m unclear what you may mean by <i>&quot;where the parameter signature is fully preserved, rather than having all parameters joined into a list&quot;</i>. If you remember that Perl scalars are multi-typed, and may have a string value and an integer value (or a string value and a float value) simultaneously, then it may help you to understand why no more than an array of values is necessary, except perhaps to pass named parameters out of order or to omit optional parameters"}, {"owner": {"reputation": 62184, "user_id": 7231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b76985f3985e35492e25880493d045?s=128&d=identicon&r=PG", "display_name": "Dave Cross", "link": "https://stackoverflow.com/users/7231/dave-cross"}, "edited": false, "score": 0, "creation_date": 1456580502, "post_id": 35663040, "comment_id": 59020049, "body": "<a href=\"http://friedo.com/blog/2013/07/arrays-vs-lists-in-perl\" rel=\"nofollow noreferrer\">Arrays are not lists</a>."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1456526747, "post_id": 35663068, "comment_id": 59006399, "body": "Yes, you&#39;re absolutely right. Coming from a more C/C++/C# history, the Perl way of handling variables is something that is tripping me up far more than I would like."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456531362, "post_id": 35663068, "comment_id": 59007935, "body": "Why bother answering a question that&#39;s so obviously a duplicate?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1456531759, "post_id": 35663068, "comment_id": 59008045, "body": "@Matt Jacob, Because so-called duplicates rarely are. Best to answer <i>and</i> to close."}, {"owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "edited": false, "score": 0, "creation_date": 1456759162, "post_id": 35663068, "comment_id": 59082659, "body": "In defense, I <i>did</i> search for other questions involving @_.  I did not find the previous question.  I assume that &#39;@_&#39; versus &quot;@_&quot; was tripping up the search algorithm."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1456526451, "creation_date": 1456526451, "answer_id": 35663068, "question_id": 35663040, "link": "https://stackoverflow.com/questions/35663040/perl-not-providing-expected-input/35663068#35663068", "title": "Perl &#39;@_&#39; not providing expected input", "body": "<pre><code>my $Test2 = @_;\n</code></pre>\n\n<p>evaluates <code>@_</code> in scalar context, which evalutes to the number of elements in the array. You want</p>\n\n<pre><code>my ($Test2) = @_;\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 5004592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e15eac9a7badf496af04b782adb0d045?s=128&d=identicon&r=PG", "display_name": "Byron Jones", "link": "https://stackoverflow.com/users/5004592/byron-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1456527987, "answer_count": 1, "score": 0, "last_activity_date": 1456526988, "creation_date": 1456526296, "last_edit_date": 1456526988, "question_id": 35663040, "link": "https://stackoverflow.com/questions/35663040/perl-not-providing-expected-input", "closed_reason": "Duplicate", "title": "Perl &#39;@_&#39; not providing expected input", "body": "<p>My understanding from PERLVARS is that the '@_' variable is the list of parameters supplied to a subroutine. My understanding is that the 'shift' function pops the first value from that list, but that the elements of @_ can also be accessed directly, as with any other list.  The problem I am seeing is that when a subroutine is called more than once, the @_ list always contains the values from the very first call, and the values don't seem to be updated.</p>\n\n<pre><code>#!/usr/bin/perl\n\n#Test the shift command\nforeach(1..5) {\n    print \"Input: $_    \";\n    &amp;Test_Shift($_);\n}\n\n#Test the @_ list\nforeach(1..5) {\n    print \"Input: $_    \";\n    &amp;Test_List($_);\n}\n\n\nsub Test_Shift() {\n    my $Test1 = shift;\n    print \"Returns: $Test1 \\n\";\n}\n\n\nsub Test_List() {\n    my $Test2 = @_;\n    print \"Returns: $Test2 \\n\"; \n}\n</code></pre>\n\n<p>Results</p>\n\n<pre><code>Input: 1    Returns: 1 \nInput: 2    Returns: 2 \nInput: 3    Returns: 3 \nInput: 4    Returns: 4 \nInput: 5    Returns: 5 \nInput: 1    Returns: 1 \nInput: 2    Returns: 1 \nInput: 3    Returns: 1 \nInput: 4    Returns: 1 \nInput: 5    Returns: 1 \n</code></pre>\n\n<p>What am I doing wrong or misunderstanding?</p>\n\n<p>UPDATE</p>\n\n<p>As recommended by Ikegami, I changed the following line</p>\n\n<pre><code>#Original\nmy $Test2 = @_;\n\n#New\nmy ($Test2) = @_;\n</code></pre>\n\n<p>This results in the expected output.  As Ikegami has reminded me, when a list is coerced into a scalar context, the value becomes the size of the list.</p>\n"}, {"tags": ["perl", "overriding"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 1255327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4227abb33d1836c99942158b5b758c95?s=128&d=identicon&r=PG", "display_name": "ummon", "link": "https://stackoverflow.com/users/1255327/ummon"}, "edited": false, "score": 0, "creation_date": 1456534864, "post_id": 35663002, "comment_id": 59009001, "body": "Thanks! After little fiddling I was able to get it to work. So awesome to see this working properly."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 2, "last_activity_date": 1456526145, "creation_date": 1456526145, "answer_id": 35663002, "question_id": 35662805, "link": "https://stackoverflow.com/questions/35662805/how-to-override-calls-to-a-module-function-and-then-reference-that-original-func/35663002#35663002", "title": "How to override calls to a module function and then reference that original function in override?", "body": "<pre><code>my $old_f = \\&amp;f;\nmy $new_f = sub { ... $old_f-&gt;(...) ... };\nno warnings qw( redefine );\n*f = $new_f;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 1255327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4227abb33d1836c99942158b5b758c95?s=128&d=identicon&r=PG", "display_name": "ummon", "link": "https://stackoverflow.com/users/1255327/ummon"}, "is_accepted": false, "score": 2, "last_activity_date": 1456534793, "creation_date": 1456534793, "answer_id": 35664409, "question_id": 35662805, "link": "https://stackoverflow.com/questions/35662805/how-to-override-calls-to-a-module-function-and-then-reference-that-original-func/35664409#35664409", "title": "How to override calls to a module function and then reference that original function in override?", "body": "<p>Thanks to ikegami for the basics, I was able to get the following code working:</p>\n\n<pre><code>use strict;\nuse SomePackage::SomeModule;\nuse Devel::Timer;\n\nmy $t = Devel::Timer-&gt;new();\n\n$someThing = new SomePackage::SomeModule();\n\nmy $someFunctionRef = \\&amp;SomePackage::SomeModule::someFunction;\n\nmy $someFunctionTrack = sub {\n    $t-&gt;mark('start someFunction');\n    $someFunctionRef-&gt;(@_);\n    $t-&gt;mark('end someFunction');\n};\n\nno warnings qw( redefine );\n*SomePackage::SomeModule::someFunction = $someFunctionTrack;\n\n$someThing-&gt;someFunction('test1','test2');\n\n$t-&gt;mark('END');\n$t-&gt;report();\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1255327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4227abb33d1836c99942158b5b758c95?s=128&d=identicon&r=PG", "display_name": "ummon", "link": "https://stackoverflow.com/users/1255327/ummon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 35663002, "answer_count": 2, "score": 2, "last_activity_date": 1456534793, "creation_date": 1456525147, "question_id": 35662805, "link": "https://stackoverflow.com/questions/35662805/how-to-override-calls-to-a-module-function-and-then-reference-that-original-func", "title": "How to override calls to a module function and then reference that original function in override?", "body": "<p>I've got a huge perl script that has hundreds of calls to a couple functions in a module, and I need to track how much time has elapsed during execution of those functions.</p>\n\n<p>Problem: I can't install <code>Devel::NYTProf</code> (won't compile on perl 5.8.8 on my machine), and adding <code>Devel::Timer</code> calls around each instance of those two functions would be extremely time consuming.</p>\n\n<p>I thought about overriding the calls to those two functions, and within my overrides execute those two functions with just a couple <code>Devel::Timer</code> calls wrapped around it. My initial tries ended up in a recursive loop.</p>\n\n<p>For example:</p>\n\n<pre><code>use strict;\nUse SomePackage::SomeModule;\nUse Devel::Timer;\n\nmy $t = Devel::Timer-&gt;new();\n\n$someThing = new SomePackage::SomeModule();\n$someThing-&gt;someFunction('test1','test2');\n\n$t-&gt;mark('END');\n$t-&gt;report();\n\nsub SomePackage::SomeModule::someFunction {\n    $t-&gt;mark('start someFunction');\n    $someThing-&gt;someFunction(@_)\n    $t-&gt;mark('end someFunction');\n}\n</code></pre>\n\n<p>That obviously doesn't work, but I have no clear leads on a solution.</p>\n\n<p>Any ideas or tips to point me to the correct way?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456522558, "post_id": 35662110, "comment_id": 59004499, "body": "You haven&#39;t posted any code, and my mind-reading skills are rusty. Can you <a href=\"https://stackoverflow.com/posts/35662110/edit\">edit</a> your question to show us what you&#39;ve tried so far?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456523004, "post_id": 35662110, "comment_id": 59004747, "body": "@MattJacob  It is not a duplicate.  It is similar, but this is a follow-up that altogether forms a sufficiently different problem.  There are critical differences in this question&#39;s requirements.  The post you link to can be understood as a module/sub-problem for this one.  However, in this form an altogether different approach may be needed. I think that it&#39;s a completely fair new question."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1456523687, "post_id": 35662110, "comment_id": 59005082, "body": "@zdim This question is: how can I use command line arguments to render a template? The other question is: how can I use command line arguments to render a template?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456524014, "post_id": 35662110, "comment_id": 59005247, "body": "@MattJacob  Please read these questions carefully is you haven&#39;t, if you wish to call it a duplicate.  How you reduce the questions is incorrect. They ask how to process template files which are sufficiently different: one has a list of &#39;random&#39; line-pairs, the other has multiple sections, with headers, with line-pairs in order that must be kept.  If you change text on the lines in two cases there will be only one similarity remaining (that lines are paired).  There may well be answers on SO that fit this, but unrelated to the other question you link to."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456524103, "post_id": 35662110, "comment_id": 59005285, "body": "@MattJacob I think I understand now what you mean -- it is not about the command-line arguments, really;  it is about the template-file format, and that is different enough in the two cases."}, {"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 1, "creation_date": 1456524107, "post_id": 35662110, "comment_id": 59005288, "body": "I think my post has gone too complicated! My issue was just that I was not able to get the output in same order as the input template file. The input file in other post did have subsections, so order did not matter. I am working on reading the file into two hashes (which I guess might be little complicated for a perl newbie like me). I will update if my troubleshooting works. Thanks!"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456524530, "post_id": 35662110, "comment_id": 59005484, "body": "I think that your post is fine.  It clearly spells out what you want to do, clearly shows formats you work with, and (now) discusses with code what you tried or are trying.  In my opinion it is a good question."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456525070, "post_id": 35662110, "comment_id": 59005703, "body": "I thjink we are missing a lot of information here. You don&#39;t explain what effect your <code>[module]</code> headers should have, or what variation of inputs and templates you need to cope with. In particular the last line <code>$;OTHER_ARGS$; = --v</code> of your sample template is particularly cryptic."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456526483, "post_id": 35662110, "comment_id": 59006271, "body": "@Borodin  I very strongly disagree with marking it a duplicate. An &quot;exact&quot; duplicate? The requirements here make it a far more complicated problem: there are now sections in the file and order matters. I assure you that the answer to the &quot;duplicate&quot; does not answer this question;  I answered that one. Did you review it? If &quot;yes&quot;, I will not comment on this again. (I am commenting so much here because I suggested to AnkP to make a new question as the requirements on the previous one evolved too far.)"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "edited": false, "score": 0, "creation_date": 1456525504, "post_id": 35662713, "comment_id": 59005895, "body": "Thanks for your reply. the [module1]...[module2] tags in the template will be used by another program to parse/read the values provided under corresponding module (after its is populated with user input). Eg the information/lines under [module1] will be used by one program, [module2] information&#39;lines will be used by a different program. So the order of Modules+their sections matters for this script"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1467563473, "last_edit_date": 1467563473, "creation_date": 1456524710, "answer_id": 35662713, "question_id": 35662110, "link": "https://stackoverflow.com/questions/35662110/use-user-input-to-populate-a-template-config-file-having-different-subsections-w/35662713#35662713", "title": "Use user input to populate a template config file having different subsections while maintaining the order", "body": "<p>I think you can get some way towards what you need by storing a list of your hash keys in the order that you add them to the hash</p>\n\n<p>Here's an example</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse v5.14.1;\nuse autodie;\n\nmy ($template_name, $seq_file, $seq2_file, $reference) = @ARGV;\n\nmy (%fields, @keys);\n\n{\n    open my $fh, '&lt;', $template_name;\n\n    while ( &lt;$fh&gt; ) {\n        next unless /\\S/;\n        next if /^\\s*#/;\n\n        s/^\\s+//; s/\\s+\\z//;\n\n        if ( /^;;/ ) {\n            push @keys, $_;\n        }\n        elsif ( /^\\$;/ ) {\n            $fields{$keys[-1]} = $_;\n        }\n    }\n}\n\nprint \"$_ =&gt; $fields{$_}\\n\" for @keys;\n</code></pre>\n\n<p>However I'm not clear what you will gain by writing what is essentially your own custom template format</p>\n"}], "owner": {"reputation": 551, "user_id": 5621995, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2fbc9889325c4e90e235b64ff5fe018b?s=128&d=identicon&r=PG&f=1", "display_name": "AnkP", "link": "https://stackoverflow.com/users/5621995/ankp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "closed_date": 1456525210, "answer_count": 1, "score": 1, "last_activity_date": 1467563473, "creation_date": 1456522204, "last_edit_date": 1456962625, "question_id": 35662110, "link": "https://stackoverflow.com/questions/35662110/use-user-input-to-populate-a-template-config-file-having-different-subsections-w", "closed_reason": "Duplicate", "title": "Use user input to populate a template config file having different subsections while maintaining the order", "body": "<p>I am trying to read in a template config file (template.config) that looks like this (the number of required input options can increase):</p>\n\n<pre><code>[module1]\n\n;;path to speedseq package binary directory\n$;SPEEDSEQ_BIN_DIR$; = /usr/local/packages/\n;;Sequence file 1\n$;Seq1File$; =\n;;Sequence file 2\n$;Seq2File$; =\n;;Read Group\n$;Read_Group$;='@RG\\tID:NA12878\\tSM:NA12878\\tPL:ILLUMINA\\tLB:NA12878\\tPU:NA12878'\n;;Reference\n$;Reference$; =\n\n[module2]\n\n;;Output Chromosome\n$;Chromosome$; = \n;;use --v for verbose summary\n$;OTHER_ARGS$; = --v\n</code></pre>\n\n<p>whose fields will get populated by user input on the command line, e.g.:</p>\n\n<pre><code>perl script.pl template.config USER_INPUT.txt USER_INPT2.txt USER_INPUT_REF.txt USER_INPUT_CHR.txt\n</code></pre>\n\n<p>and it will output a new populated config file like this: </p>\n\n<pre><code>[module1]\n\n;;path to speedseq package binary directory\n$;SPEEDSEQ_BIN_DIR$; = /usr/local/packages/\n;;Sequence file 1\n$;Seq1File$; = \"USER_INPUT.txt\"\n;;Sequence file 2\n$;Seq2File$; = \"USER_INPT2.txt\"\n;;Read Group\n$;Read_Group$;='@RG\\tID:NA12878\\tSM:NA12878\\tPL:ILLUMINA\\tLB:NA12878\\tPU:NA12878'\n;;Reference\n$;Reference$; = \"USER_INPUT_REF.txt\"\n\n[module2]\n\n;;Output Chromosome\n$;Chromosome$; = \"USER_INPUT_CHR.txt\"\n;;use --v for verbose summary\n$;OTHER_ARGS$; = --v\n</code></pre>\n\n<p>The lines within each module should remain same and but order of modules can vary eg Module2 can come before Module1. How can I do this?</p>\n\n<p>When I am trying to print out the hash keys to a file, the order is not same as the order in the input file. I even tried sort keys option but does not work. Can anyone please suggest? I am trying to make a hash of/in hash </p>\n\n<ol>\n<li>To store the headers in <code>[format]</code></li>\n<li>To store the lines under each header</li>\n</ol>\n\n<p>What I am using so far is -\nI wrote a script to create two hashes but I am not able to get the desired order, can someone please point out what I am missing? </p>\n\n<pre><code>open($template.config, \"&lt;$sConfigFile\") or die \"Error! Cannot open $sConfigFile for reading: $!\";\n\n        while (&lt;$template.config&gt;) {\n                $_ =~ s/\\s+$//;\n                next if ($_ =~ /^#/);\n                next if ($_ =~ /^$/);\n\n                if ($_ =~ m/^\\[(\\S+)\\]$/) {\n                $sComponent = $1;\n                    next;\n                }\n                elsif ($_ =~ m/^;;\\s*(.*)/) {\n                    $sDesc .= \"$1.\";\n                    next;\n                }\n                elsif ($_ =~ m/\\$;(\\S+)\\$;\\s*=\\s*(.*)/) {\n                    $sParam = $1;\n                    $sValue = $2;\n\n                    }\n\n                    $sParam = $sValue = $sDesc = \"\";\n                    next;\n                }\n            }\n</code></pre>\n\n<p><strong>Which does not consider the <code>[module1] , [mpdule2]</code> as subsections or headers and prints out all the filled keys in random order</strong></p>\n"}, {"tags": ["perl", "optional-arguments"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456522093, "post_id": 35661880, "comment_id": 59004276, "body": "I take it that &quot;plgerp&quot; is the name of a Perl script which takes arguments, and not some other program?  (I like to keep <code>.pl</code> on my scripts so I, and others, can always tell.)"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456522568, "post_id": 35661880, "comment_id": 59004503, "body": "Matter of taste that. I tend not to, because I don&#39;t think it should be relevant. (And there are some snobs out there that think anything in <code>perl</code> is wrong)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456522686, "post_id": 35661880, "comment_id": 59004561, "body": "@zdim, The language in which a program is written shouldn&#39;t to a tool&#39;s user, so they shouldn&#39;t have enter an extension (whether <code>.pl</code>, <code>.sh</code> or <code>.exe</code>). I&#39;m not sure, but I think the standard Perl installers removes the <code>.pl</code> extension when it installs a script. (On Windows, the installer wraps the script and changes the extension to <code>.bat</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 2, "last_activity_date": 1459537712, "last_edit_date": 1459537712, "creation_date": 1456521583, "answer_id": 35661939, "question_id": 35661880, "link": "https://stackoverflow.com/questions/35661880/read-optional-command-line-arguments-in-perl/35661939#35661939", "title": "Read optional command-line arguments in Perl", "body": "<p>Use <a href=\"http://perldoc.perl.org/Getopt/Long.html\" rel=\"nofollow\">Getopt::Long</a>.  You could, of course, parse <code>@ARGV</code> by hand (which contains command line arguments), but there is no reason to do that with the existence of good modules for the job.</p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Getopt::Long;   \n\n# Set up defaults here if you wish\nmy ($flag, $integer, $float, $string); \n\nusage(), exit  if not GetOptions(\n    'f|flag!'   =&gt; \\$flag, \n    'integer:i' =&gt; \\$integer, \n    'float:f'   =&gt; \\$float,\n    'string:s'  =&gt; \\$string\n); \n\n# The script now goes. Has the flag been supplied?\nif (defined($flag)) { print \"Got flag: $flag\\n\" } # it's 1 \nelse {\n    # $flag variable is 'undef'\n}\n\nsub usage {\n    print \"Usage: $0 [options]\\n\";  # -f or -flag, etc\n}\n</code></pre>\n\n<p>The <code>$flag</code> can simply be tested for truth as well, if that is sufficient.  To only check whether <code>-f</code> is there or not, need just: <code>GetOptions('f' =&gt; \\$flag); if ($flag) { };</code>.</p>\n\n<p>The module checks whether the invocation specifies arguments as they are expected. These need not be entered, they are \"options.\"  However, for an unexpected invocation a <code>die</code> or <code>warn</code> message is printed (and in the above code our usage message is also printed and the script exits). So for <code>script.pl -a</code> the script exits with messages (from module and sub). </p>\n\n<p>Abbreviations of option names are OK, if unambiguous; <code>script.pl -fl 0.5</code> exits with messages (<code>-flag</code> or <code>-float</code>?) while <code>script.pl -i 5</code> is OK and <code>$integer</code> is set to 5.  On the other hand, if an integer is <em>not</em> supplied after <code>-i</code> that is an error, since that option is defined to take one.  Multiple names for options can be specified, like <code>f|flag</code>. Etc. There is far more.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1467624613, "last_edit_date": 1467624613, "creation_date": 1456522073, "answer_id": 35662058, "question_id": 35661880, "link": "https://stackoverflow.com/questions/35661880/read-optional-command-line-arguments-in-perl/35662058#35662058", "title": "Read optional command-line arguments in Perl", "body": "<p>All of the parameters passed to your program appear in the array <code>@ARGV</code>, so you can simply check whether any of the array elements contain the string <code>-f</code></p>\n\n<p>But if you are writing a program that uses many different options in combination, you may find it simpler to use the <a href=\"http://metacpan.org/module/Getopt::Long\" rel=\"nofollow\"><code>Getopt::Long</code></a> module, which allows you to specify which parameters are optional, which take values, whether there are multiple synonynms for an option etc.</p>\n\n<p>A call to <code>GetOptions</code> allows you to specify the parameters that your program expects, and will remove from <code>@ARGV</code> any that appear in the command line, saving indicators in simple Perl variables that reflect which were provided and what values, if any, they had</p>\n\n<p>For instance, in the simple case that you describe, you could write your code like this</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Getopt::Long;\nuse Data::Dump;\n\nsay \"\\nBefore GetOptions\";\ndd \\@ARGV;\n\nGetOptions( f =&gt; \\my $f_option);\n\nsay \"\\nAfter GetOptions\";\ndd $f_option;\ndd \\@ARGV;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>Before GetOptions\n[\"-f\", \"regexp\", \"file\"]\n\nAfter GetOptions\n1\n[\"regexp\", \"file\"]\n</code></pre>\n\n<p>So you can see that before the call to <code>GetOptions</code>, <code>@ARGV</code> contains all of the data in the command line. But afterwards, the <code>-f</code> has been removed and variable <code>$f_option</code> is set to 1 to indicate that the option was specified</p>\n"}], "owner": {"reputation": 23, "user_id": 5431723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2792ff22609a520bc21957bd6d3789ac?s=128&d=identicon&r=PG&f=1", "display_name": "Sudowudo", "link": "https://stackoverflow.com/users/5431723/sudowudo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 0, "accepted_answer_id": 35662058, "answer_count": 2, "score": 2, "last_activity_date": 1467624613, "creation_date": 1456521326, "last_edit_date": 1456525486, "question_id": 35661880, "link": "https://stackoverflow.com/questions/35661880/read-optional-command-line-arguments-in-perl", "title": "Read optional command-line arguments in Perl", "body": "<p>I am new to Perl and I'm confused with its handling of optional arguments.</p>\n\n<p>If I have a perl script that's invoked with something along the lines of:</p>\n\n<pre><code>plgrep [-f] &lt; perl regular expression &gt; &lt; file/directory list &gt; \n</code></pre>\n\n<p>How would I determine whether or not the <code>-f</code> operator is given or not on the command line?</p>\n"}, {"tags": ["perl", "command-line-arguments"], "answers": [{"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1456534890, "post_id": 35663338, "comment_id": 59009009, "body": "That&#39;s what I was afraid of. Thanks."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 1, "creation_date": 1456534987, "post_id": 35663338, "comment_id": 59009043, "body": "BTW, <code>perl -F, -an</code> is technically redundant; <code>-F</code> by itself implies both <code>-a</code> and <code>-n</code> (which you can override by manually specifying <code>-p</code>). Probably clearer to include them, although clarity is not usually a priority when you&#39;re writing a one-liner instead of a script to be saved. :)"}], "tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": true, "score": 5, "last_activity_date": 1456527872, "creation_date": 1456527872, "answer_id": 35663338, "question_id": 35661654, "link": "https://stackoverflow.com/questions/35661654/get-value-of-autosplit-delimiter/35663338#35663338", "title": "Get value of autosplit delimiter?", "body": "<p>Looking at the <a href=\"https://github.com/Perl/perl5/blob/maint-5.22/toke.c#L4703\" rel=\"noreferrer\">source</a>, I don't think the delimiter is saved anywhere. When you run</p>\n\n<pre><code>perl -F, -an\n</code></pre>\n\n<p>the lexer actually generates the code</p>\n\n<pre><code>LINE: while (&lt;&gt;) {our @F=split(q\\0,\\0);\n</code></pre>\n\n<p>and parses it. At this point, any information about the delimiter is lost.</p>\n\n<hr>\n\n<p>Your best option is to <code>split</code> by hand:</p>\n\n<pre><code>perl -ne'BEGIN { $F=\",\" } @F=split(/$F/); print join($F, @F)' foo.csv\n</code></pre>\n\n<p>or to pass the delimiter as an argument to your script:</p>\n\n<pre><code>F=,; perl -F$F -sane'print join($F, @F)' -- -F=$F foo.csv\n</code></pre>\n\n<p>or to pass the delimiter as an environment variable:</p>\n\n<pre><code>export F=,; perl -F$F -ane'print join($ENV{F}, @F)' foo.csv\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1456534918, "post_id": 35663723, "comment_id": 59009020, "body": "Well, that is impressive, but a little overkillish for my application.  I&#39;ll just do non-auto splitting."}], "tags": [], "owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "is_accepted": false, "score": 1, "last_activity_date": 1583272669, "last_edit_date": 1583272669, "creation_date": 1456529991, "answer_id": 35663723, "question_id": 35661654, "link": "https://stackoverflow.com/questions/35661654/get-value-of-autosplit-delimiter/35663723#35663723", "title": "Get value of autosplit delimiter?", "body": "<p>As @ThisSuitIsBlackNot says it looks like the delimiter is not saved anywhere.</p>\n\n<p>This is how the <a href=\"https://github.com/Perl/perl5/blob/0ba44c6301b83c358a9289cfe8c7bfc9cb38130d/perl.c#L3165\" rel=\"nofollow noreferrer\">perl.c</a> stores the <code>-F</code> parameter</p>\n\n<pre><code>case 'F':\nPL_minus_a = TRUE;\nPL_minus_F = TRUE;\n    PL_minus_n = TRUE;\nPL_splitstr = ++s;\nwhile (*s &amp;&amp; !isSPACE(*s)) ++s;\nPL_splitstr = savepvn(PL_splitstr, s - PL_splitstr);\nreturn s;\n</code></pre>\n\n<p>And then the lexer generates the code</p>\n\n<pre><code>LINE: while (&lt;&gt;) {our @F=split(q\\0,\\0);\n</code></pre>\n\n<p>However this is of course compiled, and if you run it with B::Deparse you can see what is stored. </p>\n\n<pre><code>$ perl -MO=Deparse -F/e/ -e ''\nLINE: while (defined($_ = &lt;ARGV&gt;)) {\n    our(@F) = split(/e/, $_, 0);\n}\n-e syntax OK\n</code></pre>\n\n<p>Being perl there is always a way, however ugly. (And this is some of the ugliest code I have written in a while):</p>\n\n<pre><code>use B::Deparse;\nuse Capture::Tiny qw/capture_stdout/;\nBEGIN {\n    my $f_var;\n}\n\nunless ($f_var) {\n    $stdout = capture_stdout {\n        my $sub = B::Deparse::compile();\n        &amp;{$sub}; # Have to capture stdout, since I won't bother to setup compile to return the text, instead of printing\n    };\n\n    my (undef, $split_line, undef) = split(/\\n/, $stdout, 3);\n    ($f_var) = $split_line =~ /our\\(\\@F\\) = split\\((.*)\\, \\$\\_\\, 0\\);/;\n    print $f_var,\"\\n\";  \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ perl -Fe/\\\\\\(\\\\[\\\\\\&lt;\\\\{\\\"e  testy.pl\nm#e/\\(\\[\\&lt;\\{\"e#\n</code></pre>\n\n<p>You could possible traverse the bytecode instead, since the start probably will be identical every time until you reach the pattern.</p>\n"}], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 35663338, "answer_count": 2, "score": 6, "last_activity_date": 1583272669, "creation_date": 1456520410, "question_id": 35661654, "link": "https://stackoverflow.com/questions/35661654/get-value-of-autosplit-delimiter", "title": "Get value of autosplit delimiter?", "body": "<p>If I run a script with <code>perl -F</code><em>something</em>, is that <em>something</em> value saved anywhere in the Perl environment where the script can find it?  I'd like to write a script that by default reuses the input delimiter (if it's a string and not a regular expression) as the output delimiter.</p>\n"}, {"tags": ["perl", "return", "conditional"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456508490, "post_id": 35658205, "comment_id": 58996872, "body": "What is your actual question? Can <code>if (EXPR) { return EXPR; }</code> be written as <code>return EXPR if EXPR;</code> in Perl? If so, the answer is yes."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456508530, "post_id": 35658205, "comment_id": 58996893, "body": "Unfortunately a comment has to be longer than 3 characters, so I added this sentence. No!"}], "answers": [{"comments": [{"owner": {"reputation": 6410, "user_id": 1051115, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b37fdf7928b7aecd15a973b250979333?s=128&d=identicon&r=PG", "display_name": "Krazy Glew", "link": "https://stackoverflow.com/users/1051115/krazy-glew"}, "edited": false, "score": 0, "creation_date": 1474070633, "post_id": 35658290, "comment_id": 66396959, "body": "I have more experience with Perl, but now that I am also writing a lot of Python I miss Python&#39;s TrueValue-IfCondition-FalseValue syntax for IF-expressions.  ($cond?$trueValue:$falseValue) can de less readable.  Q: is there any Perl idiom that allows the Python order?"}, {"owner": {"reputation": 1952, "user_id": 89093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/876677002e723528c43feaa15d720bf8?s=128&d=identicon&r=PG", "display_name": "plusplus", "link": "https://stackoverflow.com/users/89093/plusplus"}, "edited": false, "score": 0, "creation_date": 1476174090, "post_id": 35658290, "comment_id": 67225301, "body": "^ do you mean ternary operators? In Perl: <code>my $value = $cond ? $value_if_true : $value_if_false;</code> or <code>return $cond ? $value_if_true : $value_if_false;</code>"}], "tags": [], "owner": {"reputation": 2549, "user_id": 5765298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d109e4a14d083bccf645ffd660672e61?s=128&d=identicon&r=PG&f=1", "display_name": "Garrett R", "link": "https://stackoverflow.com/users/5765298/garrett-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1456508467, "creation_date": 1456508467, "answer_id": 35658290, "question_id": 35658205, "link": "https://stackoverflow.com/questions/35658205/one-line-conditional-boolean-return-statement/35658290#35658290", "title": "One line conditional boolean return statement", "body": "<p>Something like a ternary operator perhaps (in python).  </p>\n\n<pre><code>return True if foo == 'foo' else bar == 'bar'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 5987307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7eafd03001b07767011547808800d7d?s=128&d=identicon&r=PG", "display_name": "ezib", "link": "https://stackoverflow.com/users/5987307/ezib"}, "edited": false, "score": 0, "creation_date": 1456510150, "post_id": 35658463, "comment_id": 58997867, "body": "Lovely, that&#39;s close to what I wanted. And thanks for the simplification example, wouldn&#39;t have thought that way."}, {"owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 1, "creation_date": 1456510676, "post_id": 35658463, "comment_id": 58998131, "body": "I&#39;d avoid the simplification.  It can be good to have sub calls in a separate statement for easier debugging.  The original code in the question is perfect from that perspective."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "edited": false, "score": 0, "creation_date": 1456518691, "post_id": 35658463, "comment_id": 59002564, "body": "@ysth, It&#39;s premature to add debugging hooks. There&#39;s absolutely no indication that any are needed."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1456509600, "last_edit_date": 1456509600, "creation_date": 1456509043, "answer_id": 35658463, "question_id": 35658205, "link": "https://stackoverflow.com/questions/35658205/one-line-conditional-boolean-return-statement/35658463#35658463", "title": "One line conditional boolean return statement", "body": "<p>In Perl, you can't return the value returned by the comparison if said value is true, but</p>\n\n<pre><code>if ($foo eq 'foo') { return 1; }\n</code></pre>\n\n<p>can be written as</p>\n\n<pre><code>return 1 if $foo eq 'foo';\n</code></pre>\n\n<p>Like flow control statements, statement modifiers are documented in <a href=\"http://perldoc.perl.org/perlsyn.html\" rel=\"nofollow\">perlsyn</a>.</p>\n\n<hr>\n\n<p>By the way, the entirety of the code you posted can be simplified to the following:</p>\n\n<pre><code>return $foo eq 'foo' || GetBar() eq 'bar';\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87649, "user_id": 17389, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/cd06d1314817ce946ab796af8750b56a?s=128&d=identicon&r=PG", "display_name": "ysth", "link": "https://stackoverflow.com/users/17389/ysth"}, "is_accepted": false, "score": 2, "last_activity_date": 1456510502, "creation_date": 1456510502, "answer_id": 35658864, "question_id": 35658205, "link": "https://stackoverflow.com/questions/35658205/one-line-conditional-boolean-return-statement/35658864#35658864", "title": "One line conditional boolean return statement", "body": "<p>You say \"Return value of $foo eq \"foo\" only if $foo eq \"foo\" is true.\"</p>\n\n<p>You can do that simply by</p>\n\n<pre><code>return 1 if $foo eq 'foo';\n</code></pre>\n\n<p>if <code>eq</code> isn't overloaded and 1 is the only possible true value.</p>\n\n<p>If it is overloaded and might return something other than false or 1, you can do:</p>\n\n<pre><code>$_ and return $_ for $foo eq 'foo';\n</code></pre>\n\n<p>but only if your goal is to try to produce bad code.</p>\n\n<pre><code>my $foofoo = $foo eq 'foo';\nreturn $foofoo if $foofoo;\n</code></pre>\n\n<p>would be much better.</p>\n"}], "owner": {"reputation": 49, "user_id": 5987307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7eafd03001b07767011547808800d7d?s=128&d=identicon&r=PG", "display_name": "ezib", "link": "https://stackoverflow.com/users/5987307/ezib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 35658463, "answer_count": 3, "score": -5, "last_activity_date": 1456510502, "creation_date": 1456508173, "last_edit_date": 1456509535, "question_id": 35658205, "link": "https://stackoverflow.com/questions/35658205/one-line-conditional-boolean-return-statement", "title": "One line conditional boolean return statement", "body": "<p>Lately I came to this Perl code segment:</p>\n\n<pre><code>if($foo eq \"foo\") {\n    return 1;   \n}\nmy $bar = GetBar();\nreturn ($bar eq \"bar\")\n</code></pre>\n\n<p>If the value of <code>$foo</code> was ever equals to <code>foo</code>, it would return true immediately, without calling <code>GetBar</code>. Assuming that this would only occur whenever the statement <code>$foo eq \"foo\"</code> was true, isn't there a oneline conditional boolean return statement that looks like:</p>\n\n<pre><code>return only if $foo eq \"foo\";\n</code></pre>\n\n<p>Meaning: Return value of <code>$foo eq \"foo\"</code> only if <code>$foo eq \"foo\"</code> is true.</p>\n\n<p>I'm curious if there is such statement in any coding language.</p>\n"}, {"tags": ["perl", "events", "alarm"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456510421, "post_id": 35658069, "comment_id": 58997999, "body": "You only call <code>alarm($timeout);</code> once, so the alarm only fires once. You need to call it every time you get a new access token."}, {"owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456511300, "post_id": 35658069, "comment_id": 58998484, "body": "I thought it would be called multiple times because <code>$SIG{ALRM}</code> is set to call the <code>wrapper()</code> subroutine, which includes a call to <code>getSomeIDs()</code>, which calls <code>alarm($timeout)</code>."}, {"owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456512058, "post_id": 35658069, "comment_id": 58998869, "body": "I just tried adding <code>alarm($timeout)</code> in the <code>getAccessToken()</code> subroutine -- it did not change the behaviour in the slightest."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456519987, "post_id": 35658069, "comment_id": 59003242, "body": "What sort of duration is your authorisation valid for? I would be inclined to request a code only when I know I don&#39;t have one (i.e. it&#39;s the first time I&#39;ve used the API this session) or when I make a request that returns an &quot;unauthorised&quot; status. Trying to do this by timing will result in all kinds of problems like the code being valid when the request is <i>sent</i> but not when the server <i>receives</i> it, which you still have to handle"}, {"owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "edited": false, "score": 0, "creation_date": 1456521432, "post_id": 35658069, "comment_id": 59003964, "body": "Well, it /may/ be for an hour (3600 secs) but given that the token request will return a token and an expire time, my guess is that the API reserves the right to set whatever time they want. The good thing is you know with each refreshed token what that time is.  An earlier answer (now deleted for some reason) also suggested the &quot;wait for token expiration notice&quot; approach, but if you do that you get a penalty and have to wait a certain amount of time (specified in the error response) before you can access the API again."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "edited": false, "score": 0, "creation_date": 1456511412, "post_id": 35658700, "comment_id": 58998537, "body": "Yes, of course, but I had hoped to avoid hundreds if not thousands of calls to <code>time()</code> for each access token."}, {"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "reply_to_user": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "edited": false, "score": 0, "creation_date": 1456511885, "post_id": 35658700, "comment_id": 58998783, "body": "I will update the solution with alarm also, give me some time. Choose what suits you best."}, {"owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "edited": false, "score": 0, "creation_date": 1456513341, "post_id": 35658700, "comment_id": 58999558, "body": "Thanks, looking forward to it!"}, {"owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "edited": false, "score": 0, "creation_date": 1456520105, "post_id": 35658700, "comment_id": 59003301, "body": "I&#39;ve added a response to your answer. Not sure how to add a long response w/out doing this, as the comments must be reasonably short."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1456520594, "post_id": 35658700, "comment_id": 59003572, "body": "Microoptimization. <code>time</code> calls are extraordinarily cheap relative to, say, a call to a typical public API"}, {"owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1456521162, "post_id": 35658700, "comment_id": 59003847, "body": "Thanks, @mob, was wondering about that. Perhaps I&#39;ll stop trying to get cute and go back to basics."}], "tags": [], "owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1456514508, "last_edit_date": 1456514508, "creation_date": 1456509915, "answer_id": 35658700, "question_id": 35658069, "link": "https://stackoverflow.com/questions/35658069/perl-repeatedly-call-subroutine-after-possibly-changing-time-delay/35658700#35658700", "title": "Perl: repeatedly call subroutine after (possibly changing) time delay", "body": "<p>This is trivial to solve, if expiration time is given by the API. This is  an approach using <a href=\"http://perldoc.perl.org/functions/time.html\" rel=\"nofollow\"><code>time</code></a> and simple arithmetic.</p>\n\n<pre><code>sub get_access_token {\n    # some token generation code\n    return ( $token, $expire_time );\n}\n\nmy ( $token, $expire_time ) = get_access_token;\nmy $expire_timestamp = time + $expire_time;\n\nwhile (1) {\n    if ( time &gt; $expire_timestamp ) {\n        ( $token, $expire_time ) = get_access_token;\n        $expire_timestamp = time + $expire_time;\n    }\n\n    # make requests using $token\n}\n</code></pre>\n\n<p>I am not so familiar with <a href=\"http://perldoc.perl.org/functions/alarm.html\" rel=\"nofollow\">alarm</a> but my attempt(according to docs) will be like  below i.e set a SIGALRM handler to call your <code>get_access_token()</code> that will renew your <code>token_expire_timing</code> and then set again the alarm to that <code>token_expire_timing</code>.   </p>\n\n<pre><code>my ( $token, $expire_time ) = get_access_token();\n\neval {\n    local $SIG{ALRM} = sub {\n        ( $token, $expire_time ) = get_access_token();\n    };\n    alarm $expire_time;    # schedule alarm in $expire_time\n    while (1) {\n        # your API requests here with $token\n    }\n    alarm 0; #cancel the alarm\n};\nif ($@) {\n    die \"$@\\n\"; #propagate some other errors\n}\n\nsub get_access_token {\n\n    # some token generation code\n    ( $token, $expire_time );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1456524532, "creation_date": 1456524532, "answer_id": 35662691, "question_id": 35658069, "link": "https://stackoverflow.com/questions/35658069/perl-repeatedly-call-subroutine-after-possibly-changing-time-delay/35662691#35662691", "title": "Perl: repeatedly call subroutine after (possibly changing) time delay", "body": "<p>Okay, so <code>time()</code> and arithmetic it is; cuteness goes out the window. Thanks to all who gave suggestions:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nmy $counter = 0;\n\nmy ($token, $expire_time, $expire_ts) = get_access_token();\n\nmy $loop = 1;\nwhile ($loop) {\n    if (time() &gt; $expire_ts) {\n        ($token, $expire_time, $expire_ts) = get_access_token();\n    }\n    if ($counter == 14) { $loop = 0; }\n    say \"[ $token ] $counter\";\n    $counter = $counter + 1;\n    sleep(1);\n}\n\nexit;\n\n\n### subroutines\n\nsub get_access_token {\n    my $token = localtime(time());\n    my $expire_time = 3;\n    my $expire_ts = time() + $expire_time;\n    # some token generation code\n    return ( $token, $expire_time, $expire_ts );\n}\n</code></pre>\n\n<p><em>output</em>:</p>\n\n<pre><code>$ ./timeTest.pl\n[ Fri Feb 26 17:05:46 2016 ] 0\n[ Fri Feb 26 17:05:46 2016 ] 1\n[ Fri Feb 26 17:05:46 2016 ] 2\n[ Fri Feb 26 17:05:46 2016 ] 3\n[ Fri Feb 26 17:05:50 2016 ] 4\n[ Fri Feb 26 17:05:50 2016 ] 5\n[ Fri Feb 26 17:05:50 2016 ] 6\n[ Fri Feb 26 17:05:50 2016 ] 7\n[ Fri Feb 26 17:05:54 2016 ] 8\n[ Fri Feb 26 17:05:54 2016 ] 9\n[ Fri Feb 26 17:05:54 2016 ] 10\n[ Fri Feb 26 17:05:54 2016 ] 11\n[ Fri Feb 26 17:05:58 2016 ] 12\n[ Fri Feb 26 17:05:58 2016 ] 13\n[ Fri Feb 26 17:05:58 2016 ] 14\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5987240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de901b287c415540d26c3ed440344ed7?s=128&d=identicon&r=PG&f=1", "display_name": "rwatkins", "link": "https://stackoverflow.com/users/5987240/rwatkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 35658700, "answer_count": 2, "score": 1, "last_activity_date": 1456524532, "creation_date": 1456507751, "last_edit_date": 1456511623, "question_id": 35658069, "link": "https://stackoverflow.com/questions/35658069/perl-repeatedly-call-subroutine-after-possibly-changing-time-delay", "title": "Perl: repeatedly call subroutine after (possibly changing) time delay", "body": "<p>Okay, so I'm stumped. Here's the thing I can't seem to solve: In making calls a public API, the first thing required is an access token -- let's call my method get_access_token(). Once I've got the access token I will use it to get data from the public API. Now, the token expires after a certain number of seconds, that number being provided with the access token. So, the idea is to set up some sort of timer that will refresh the access token by calling get_access_token() again once the previous token expires, so that I can continue to get data from the API, always with a valid access token.</p>\n\n<p>I've tried using:</p>\n\n<ul>\n<li>alarm</li>\n<li>AnyEvent</li>\n<li>Time::HiRes qw(setitimer ITIMER_VIRTUAL time)</li>\n</ul>\n\n<p>But I can't get any of these to work. I'm not wedded to any particular approach; I know I could solve it with a simple \"check every so often to see if the access token is about to expire\" using time() and arithmetic, but I thought I'd try something a little more sophisticated. Evidently too sophisticated for me!</p>\n\n<p>Yes, I know that usually one posts code, but obviously my code is all crap, so really I'm just looking for some pointers about how best to approach this particular use case. Any help would be appreciated.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>For @ThisSuitIsBlackNot, here's the alarm test (no actual API calls made). The alarm fires once but never again:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse Time::HiRes;\n\nmy $timeout = 7;\nmy $counter = 0;\n\nmy $rv = wrapper();\nsay $rv;\n\nexit;\n\n\n### subroutines\n\nsub getAccessToken {\n    return localtime(time());\n}\n\nsub getSomeIDs {\n    my $accessToken = shift;\n\n    say \"getting IDs: timeout == $timeout\";\n\n    eval {\n        local $SIG{'ALRM'} = sub { wrapper(); };\n        alarm($timeout);\n        while (1) {\n            if ($counter == 25) { return; }\n            say \"[ $accessToken ] $counter\";\n            $counter = $counter + 1;\n            alarm_resistant_sleep(1);\n        }\n        alarm(0);\n    };\n    alarm(0);\n\n    return \"counter at $counter\";\n}\n\nsub wrapper {\n    my $at = getAccessToken();\n    return getSomeIDs($at);\n}\n\nsub alarm_resistant_sleep {\n    my $end = Time::HiRes::time() + shift();\n    for (;;) {\n        my $delta = $end - Time::HiRes::time();\n        last if $delta &lt;= 0;\n        select(undef, undef, undef, $delta);\n    }\n}\n</code></pre>\n\n<p>And here's the attempt to use AnyEvent. Originally I didn't use the closure thing, but read another post that suggested doing so (still didn't work):</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse AnyEvent;\n\nmy $accessToken;\nmy $timeout = 7;\nmy $cv = AE::cv;\n\nmy $counter = 0;\n\nmy $f1 = makeClosure(\\&amp;refreshAccessToken);\nmy $f2 = makeClosure(\\&amp;getSomeIDs);\n\n$f1-&gt;();\n$f2-&gt;();\n$cv-&gt;recv();\n\nexit;\n\n\n### subroutines\n\nsub makeClosure {\n    my $sub = shift;\n    return $sub;\n}\n\nsub getAccessToken {\n    $accessToken = localtime(time());\n}\n\nsub refreshAccessToken {\n    my $t1; $t1 = AE::timer 0, $timeout,\n        sub {\n            say \"callback called\";\n            $timeout--;\n            $accessToken = localtime(time());\n            #getAccessToken();\n            undef $t1;\n        };\n    say \"calling refreshAccessToken()\";\n}\n\nsub getSomeIDs {\n    my $t2; $t2 = AE::timer 0, 1,\n        sub {\n            if ($counter &gt;= 16) { undef $t2; }\n            say \"[ $accessToken ] $counter\";\n            $counter = $counter + 1;\n        };\n    say \"getting IDs: timeout == $timeout\";\n}\n</code></pre>\n\n<p>And, finally, here's the <code>Time::HiRes</code> test. Again, this code went through many modifications trying to get it to work. The ridiculous value tested against <code>$counter</code> was simply to see if the timer was called at any point, which it was not:</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse 5.010;\nuse strict;\nuse warnings;\n\nuse Time::HiRes qw(setitimer ITIMER_VIRTUAL time);\n\nmy $accessToken;\n\nmy $counter = 0;\n\n$SIG{VTALRM} = \\&amp;refreshAccessToken;\nsetitimer(ITIMER_VIRTUAL, 1, 5);\n\nTime::HiRes::sleep(2);\n\ngetAccessToken();\ngetSomeIDs();\n\nexit;\n\n\n### subroutines\n\nsub refreshAccessToken {\n    my $timeout = getAccessToken();\n    local $SIG{VTALRM} = \\&amp;refreshAccessToken;\n    setitimer(ITIMER_VIRTUAL, $timeout, $timeout);\n    die;\n}\n\nsub getAccessToken {\n    say \"getting access token\";\n    $accessToken = localtime(time());\n    return 2;\n}\n\nsub getSomeIDs {\n\n    my $loop = 1;\n\n    #say \"getting IDs: timeout == $timeout\";\n\n    while ($loop) {\n        if ($counter &gt;= 1600000000) { $loop = 0; }\n        say \"[ $accessToken ] $counter\";\n        $counter = $counter + 1;\n    };\n}\n</code></pre>\n"}, {"tags": ["windows", "perl", "batch-file"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456502915, "post_id": 35656410, "comment_id": 58993304, "body": "Unless there&#39;s more in this file than you&#39;ve shown, it&#39;s a Perl source file, not a Windows batch file. Is this exactly what you have? Also, note that only Windows support volume letters like <code>G:\\My_Workspaces</code>"}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456503082, "post_id": 35656410, "comment_id": 58993427, "body": "@Borodin : The value of variable <code>$basedir</code> will change for mac. This is the only part of my perl code which uses directory names. Any idea why am I getting the error? Thanks !"}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 1, "creation_date": 1456503352, "post_id": 35656410, "comment_id": 58993631, "body": "Don&#39;t escape <code>&#47;</code>, it&#39;s a normal character. <code>X:&#47;foo&#47;bar</code> should work on Windows."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456503993, "post_id": 35656410, "comment_id": 58994077, "body": "Is that error message coming from Perl, or from Windows? Also, you don&#39;t need to invoke your script from a batch file in order to call it via a Windows scheduled task."}], "answers": [{"comments": [{"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "edited": false, "score": 0, "creation_date": 1456504046, "post_id": 35656632, "comment_id": 58994117, "body": "It worked like charm. Thanks for letting me know this new thing <code>pl2bat</code> today."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1456503765, "last_edit_date": 1456503765, "creation_date": 1456503367, "answer_id": 35656632, "question_id": 35656410, "link": "https://stackoverflow.com/questions/35656410/perl-why-do-i-get-error-the-file-name-directory-name-or-volume-label-syntax/35656632#35656632", "title": "Perl: Why do I get error &quot;The file name, directory name, or volume label syntax is incorrect.&quot;", "body": "<p>If that is exactly the contents of your file, then you're asking Windows' command interpreter to process Perl source code, which it can't do</p>\n\n<p>If you really need to create a batch file that has your Perl code embedded in it, then take a look at the <a href=\"http://search.cpan.org/~jhi/perl-5.8.1/win32/bin/pl2bat.pl\" rel=\"nofollow\"><code>pl2bat</code></a> utility, which will do exactly that</p>\n\n<p>A command like</p>\n\n<pre><code>pl2bat myperl.pl\n</code></pre>\n\n<p>will create a file <code>myperl.bat</code> that will run on the Windows command line and has your Perl source code embedded inside it. But that file is non-portable because it uses Windows commands that aren't recognised on a Mac or Linux platform</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1456522082, "creation_date": 1456522082, "answer_id": 35662061, "question_id": 35656410, "link": "https://stackoverflow.com/questions/35656410/perl-why-do-i-get-error-the-file-name-directory-name-or-volume-label-syntax/35662061#35662061", "title": "Perl: Why do I get error &quot;The file name, directory name, or volume label syntax is incorrect.&quot;", "body": "<p>Either something doesn't know how to execute your Perl script, or your Perl script is being interpreted by something other than <code>perl</code>.</p>\n\n<p>This could due to a problem with your file associations (or a lack thereof). Determining the exact cause would require more information.</p>\n\n<p>In any case, executing <code>perl</code> with your script as a parameter rather than executing the script directly should solve the problem.</p>\n\n<p>In other words, execute</p>\n\n<pre><code>perl script.pl\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>script.pl\n</code></pre>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 966, "favorite_count": 0, "accepted_answer_id": 35656632, "answer_count": 2, "score": 1, "last_activity_date": 1456522082, "creation_date": 1456502687, "last_edit_date": 1456503387, "question_id": 35656410, "link": "https://stackoverflow.com/questions/35656410/perl-why-do-i-get-error-the-file-name-directory-name-or-volume-label-syntax", "title": "Perl: Why do I get error &quot;The file name, directory name, or volume label syntax is incorrect.&quot;", "body": "<p>I am trying to run the below perl code from Windows batch file but getting error <code>The file name, directory name, or volume label syntax is incorrect.</code>\nThe script ran fine in eclipse.My ultimate goal is to run this perl script periodically using windows task scheduler, hence running it from a batch file. <br><br>\nIs there any other ways with which we can achieve my goal of running perl script on windows periodically?<br><br>\nI want my script to be functional across platforms, coz I have plans to run it from a mac as well.</p>\n\n<pre><code>  use strict;\n  use warnings;\n  use Data::Dumper;\n  use File::Find::Rule;\n\n my $basedir=\"G:\\/My_Workspaces\";\n my @exclude_dirs= qw(.foo);\n\n#Fetching all the workspaces under base dir excluding the ones in @exclude_dirs\nmy @subdirs =\n              File::Find::Rule\n              -&gt;mindepth(1)\n              -&gt;maxdepth(1)\n              -&gt;not_name(@exclude_dirs)\n              -&gt;directory\n              -&gt;in($basedir);\n\n#Formating list of workspaces by removing the full path\ns{^\\Q$basedir\\E/}{} for @subdirs;\n</code></pre>\n"}, {"tags": ["perl", "template-toolkit"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1456502081, "post_id": 35656147, "comment_id": 58992697, "body": "The equivalent of a function is a <code>BLOCK</code>. Don&#39;t know if they can be called recursively, but it wouldn&#39;t surprise me if they could. If not, you can pre-flatten the recursive structure into an array with a depth attached to each element. (<code>[ [ 0, $root ], [ 1, $child1_of_root ], [ 2, $child1_of_child1_of_root ], ... ]</code>)"}], "answers": [{"comments": [{"owner": {"reputation": 1437, "user_id": 2518556, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/7mTHZ.jpg?s=128&g=1", "display_name": "yahermann", "link": "https://stackoverflow.com/users/2518556/yahermann"}, "edited": false, "score": 1, "creation_date": 1501991040, "post_id": 35656448, "comment_id": 78016999, "body": "<code>PROCESS</code> uses global versions of your variables.  In some cases it may be necessary to use <code>INCLUDE</code> instead, to use local copies for recursion.  Example, if you want to track nesting:  <code>[% INCLUDE  nesting_level=nesting_level+1 %]</code> &lt;-- won&#39;t work with <code>PROCESS</code>.  <a href=\"http://www.template-toolkit.org/docs/modules/Template.html#section_INCLUDE\" rel=\"nofollow noreferrer\">template-toolkit.org/docs/modules/Template.html#section_INCL&zwnj;&#8203;UDE</a>"}], "tags": [], "owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "is_accepted": true, "score": 5, "last_activity_date": 1456502813, "creation_date": 1456502813, "answer_id": 35656448, "question_id": 35656147, "link": "https://stackoverflow.com/questions/35656147/how-to-print-recursive-data-structure-with-template-toolkit/35656448#35656448", "title": "How to print recursive data structure with Template Toolkit?", "body": "<p>You can use <code>PROCESS</code> to pass data into a <code>BLOCK</code> which you can do recursively. For example:</p>\n\n<pre><code>[%\n\nSET element = {\n    description = \"A\",\n    children= [\n        {\n            description= \"AA\",\n            children= [\n                { description = \"AAA\" }\n            ]\n        },\n        {\n            description= \"AB\",\n            children= [\n                { \n                    description = \"ABA\",\n                    children = [\n                        { \n                            description = \"ABAA\"\n                        }\n                    ]\n\n                },\n                { description = \"ABB\" }\n            ]\n        }\n    ]\n};\n\n%]\n\n\n[% BLOCK show_element %]\n    [% my_element.description | html %]\n    [% IF my_element.children %]\n        &lt;ul&gt;\n            [% FOR child_element IN my_element.children %]\n                &lt;li&gt;[% PROCESS show_element my_element=child_element %]&lt;/li&gt;\n            [% END %]\n        &lt;/ul&gt;\n    [% END %]\n[% END %]\n\n[% PROCESS show_element my_element=element %]\n</code></pre>\n"}], "owner": {"reputation": 234, "user_id": 1901336, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e0123adbfd7edb8400aba0f919d5d9ed?s=128&d=identicon&r=PG", "display_name": "Andreas Z&#246;llner", "link": "https://stackoverflow.com/users/1901336/andreas-z%c3%b6llner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 35656448, "answer_count": 1, "score": 2, "last_activity_date": 1456502813, "creation_date": 1456501953, "question_id": 35656147, "link": "https://stackoverflow.com/questions/35656147/how-to-print-recursive-data-structure-with-template-toolkit", "title": "How to print recursive data structure with Template Toolkit?", "body": "<p>I am trying to print a recursive data structure using Template Toolkit. How can I describe this in my template file?</p>\n\n<p>I have a data structure (Hash Array) with some elements like this</p>\n\n<pre><code>ELEMENT\n-&gt; Description: XYXY\n-&gt; Childs: [Array of Child ELEMENTS of same type]\n</code></pre>\n\n<p>Where childs can contain an array of child elements. I want now recursively print all contents including the elements childs and those childs and so on.</p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["html", "perl", "batch-file"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1456501435, "post_id": 35655903, "comment_id": 58992274, "body": "Is your entire script really indented like that? The end-of-string identifier for your here-doc can&#39;t be indented."}, {"owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1456501698, "post_id": 35655903, "comment_id": 58992439, "body": "removing the indentation cleared the issue.Thanks !"}], "answers": [{"tags": [], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "is_accepted": true, "score": 2, "last_activity_date": 1456503379, "last_edit_date": 1456503379, "creation_date": 1456501760, "answer_id": 35656077, "question_id": 35655903, "link": "https://stackoverflow.com/questions/35655903/why-do-i-get-the-error-cant-find-string-terminator-end-html-anywhere-before/35656077#35656077", "title": "Why do I get the error &#39;Can&#39;t find string terminator &quot;END_HTML&quot; anywhere before EOF&#39;?", "body": "<p>As documented in <a href=\"http://perldoc.perl.org/perlop.html#%3C%3C_EOF_\" rel=\"nofollow\">perlop</a>, there should not be any space before or after <code>END_HTML</code>:</p>\n\n<blockquote>\n  <p>The terminating string must appear by itself (unquoted and with no surrounding whitespace) on the terminating line.</p>\n</blockquote>\n\n<p>Clearing out the indentation removed the error.</p>\n"}], "owner": {"reputation": 1535, "user_id": 2175642, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/438be96ab62abdf3194b7b1b0f85507b?s=128&d=identicon&r=PG", "display_name": "Jill448", "link": "https://stackoverflow.com/users/2175642/jill448"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 589, "favorite_count": 0, "accepted_answer_id": 35656077, "answer_count": 1, "score": -2, "last_activity_date": 1456503379, "creation_date": 1456501279, "last_edit_date": 1456503226, "question_id": 35655903, "link": "https://stackoverflow.com/questions/35655903/why-do-i-get-the-error-cant-find-string-terminator-end-html-anywhere-before", "title": "Why do I get the error &#39;Can&#39;t find string terminator &quot;END_HTML&quot; anywhere before EOF&#39;?", "body": "<p>I have the following Perl code:</p>\n\n<pre><code>          use strict;\n          use warnings;\n          use MIME::Lite;\n          use HTML::Entities;\n          use Time::localtime;\n          use Sys::Hostname;\n\n          my $ti = localtime;\n          my ($day,$month,$year)=($ti-&gt;mday,$ti-&gt;fullmonth,$ti-&gt;year);\n          my $HOSTNAME =hostname();\n\n          my $greeting = &lt;&lt;END_HTML;     \n          &lt;p style=\"width:600px;margin:0 100px\"&gt;&lt;font face=\"Arial\" size=\"3\"&gt;&lt;strong&gt;$month $day, $year&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;&lt;br&gt;\n          &lt;p style=\"width:600px;margin:0 100px\"&gt;&lt;font face=\"Arial\" size=\"3\" color=\"#3a7df9\"&gt;&lt;strong&gt;Status of Update on '$HOSTNAME' machine&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;&lt;br&gt;\n          END_HTML\n          my $html = '&lt;table style=\"width:600px;margin:0 100px\" border=\"1\" BORDERCOLOR=\"#000000\"&gt;\n          &lt;thead&gt;&lt;th bgcolor=\"#9fc0fb\"&gt;Successful Update&lt;/th&gt;&lt;th bgcolor=\"#9fc0fb\"&gt;Failed Update&lt;/th&gt;&lt;/thead&gt;\n          &lt;tbody&gt;'; \n</code></pre>\n\n<p>It works fine in Eclipse, but when I try running it from a Windows batch file, it fails with the error:</p>\n\n<blockquote>\n  <p>Can't find string terminator \"END_HTML\" anywhere before EOF</p>\n</blockquote>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["regex", "perl", "sas"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456500878, "post_id": 35655679, "comment_id": 58991881, "body": "Your regex validates <i>some</i> email addresses. But it&#39;s not according to the RFC."}, {"owner": {"reputation": 21654, "user_id": 107331, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cf6d0868b2b4c69bac3e6f265a32b6a7?s=128&d=identicon&r=PG", "display_name": "Daniel Martin", "link": "https://stackoverflow.com/users/107331/daniel-martin"}, "edited": false, "score": 0, "creation_date": 1456501460, "post_id": 35655679, "comment_id": 58992289, "body": "Could you explain what happened when you ended your regular expression with a <code>$</code>, beyond &quot;didn&#39;t work&quot;? What didn&#39;t work - did it still match those invalid examples, or did it fail to match some valid examples? What if instead of <code>email</code>, you make the second argument to the <code>prxmatch</code> function <code>trim(email)</code> ?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1456758676, "post_id": 35655679, "comment_id": 59082312, "body": "Please take a look at <a href=\"http://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 58518, "user_id": 1623007, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40931bddde219f1a9e4514d2f4cfa826?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1623007/joe"}, "edited": false, "score": 0, "creation_date": 1456780874, "post_id": 35656076, "comment_id": 59096586, "body": "SAS doesn&#39;t have VARCHAR concept, unfortunately, so in SAS $ is very easy to misuse."}, {"owner": {"reputation": 11858, "user_id": 1417694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adedbee0609fe9349993fedfd446acdc?s=128&d=identicon&r=PG", "display_name": "Squashman", "link": "https://stackoverflow.com/users/1417694/squashman"}, "edited": false, "score": 0, "creation_date": 1486756957, "post_id": 35656076, "comment_id": 71500406, "body": "It was my understanding that you do not have to escape special characters inside a class grouping.  This should be fine: <code>[a-z0-9_.+-]</code> Or am I wrong about that?  Are not all characters inside the brackets treated as literal except for the caret at the beginning?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11858, "user_id": 1417694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adedbee0609fe9349993fedfd446acdc?s=128&d=identicon&r=PG", "display_name": "Squashman", "link": "https://stackoverflow.com/users/1417694/squashman"}, "edited": false, "score": 0, "creation_date": 1486757102, "post_id": 35656076, "comment_id": 71500475, "body": "@Squashman: I don&#39;t know about &quot;should be&quot;.; it works perfectly well as it is. I simply copied the OP&#39;s pattern so as to avoid confusing things by changing more than necessary. Note that backslashes and hyphens that aren&#39;t at the beginning or end of the character class <b><i>do</i></b> need escaping"}, {"owner": {"reputation": 11858, "user_id": 1417694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adedbee0609fe9349993fedfd446acdc?s=128&d=identicon&r=PG", "display_name": "Squashman", "link": "https://stackoverflow.com/users/1417694/squashman"}, "edited": false, "score": 0, "creation_date": 1486757501, "post_id": 35656076, "comment_id": 71500666, "body": "One more question.  What is the <b>x</b> doing at the end of the regular expression?  Was reading <a href=\"http://support.sas.com/documentation/cdl/en/lrdict/64316/HTML/default/viewer.htm#a003288497.htm\" rel=\"nofollow noreferrer\">this</a>  but could not determine what is was doing. Thanks"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 11858, "user_id": 1417694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adedbee0609fe9349993fedfd446acdc?s=128&d=identicon&r=PG", "display_name": "Squashman", "link": "https://stackoverflow.com/users/1417694/squashman"}, "edited": false, "score": 0, "creation_date": 1486757975, "post_id": 35656076, "comment_id": 71500900, "body": "@Squashman: It&#39;s documented under <b>Flag Options</b> on a <a href=\"http://userguide.icu-project.org/strings/regexp#TOC-Flag-Options\" rel=\"nofollow noreferrer\">different page</a>. They&#39;re more often called <i>modifiers</i>."}, {"owner": {"reputation": 11858, "user_id": 1417694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adedbee0609fe9349993fedfd446acdc?s=128&d=identicon&r=PG", "display_name": "Squashman", "link": "https://stackoverflow.com/users/1417694/squashman"}, "edited": false, "score": 0, "creation_date": 1486758646, "post_id": 35656076, "comment_id": 71501199, "body": "Thanks @Borodin, just wanted to make sure I was covering all my bases before I post my own question.  I am using a slightly different regular expression that is approved by the client who is providing the data but I can&#39;t get it to work.  We are moving it from an AWK script that ran on Unix to a SAS program on z/OS.  I have used PXPARSE and PRXMATCH successfully in SAS in the past but not sure why I can&#39;t get this one to work. Probably post my question on Monday.  Thanks Again."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1456502096, "last_edit_date": 1456502096, "creation_date": 1456501759, "answer_id": 35656076, "question_id": 35655679, "link": "https://stackoverflow.com/questions/35655679/email-validation-in-sas-using-regexp-not-catching-comma-or-several-email-adres/35656076#35656076", "title": "Email validation in SAS using regexp - not catching comma or several email adresses in one field", "body": "<p>The solution is undoubtedly to anchor the pattern at the end with <code>$</code> in the same way as your <code>^</code> anchors the start</p>\n\n<p>Just to be sure, this is what you should have. Please try it and explain what you mean by <em>doesn't work</em>. Is there any chance you're trying to match email strings with trailing whitespace or a newline, which the original pattern would ignore in the same way as it ignores spurious commas?</p>\n\n<p>I've separated out the assignment of the pattern and used the <code>/x</code> modifier so that insignificant whitespace can be added to the pattern to separate its elements and make it more readable</p>\n\n<pre><code>pattern = '/ ^ [a-z0-9_\\.\\+-]+ ( \\. [a-z0-9_\\+-]+ )* @ [a-z0-9-]{2,} ( \\. [a-z0-9-]+ )* \\. [a-z]{2,8} $ /x';\nif prxmatch(pattern, email) = 1 then prx = 1;\nelse prx = 0;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 532, "user_id": 716119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/64d3d8eb46cc0ed153c42b25a76c131f?s=128&d=identicon&r=PG", "display_name": "SparkeyG", "link": "https://stackoverflow.com/users/716119/sparkeyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1456506921, "creation_date": 1456506921, "answer_id": 35657822, "question_id": 35655679, "link": "https://stackoverflow.com/questions/35655679/email-validation-in-sas-using-regexp-not-catching-comma-or-several-email-adres/35657822#35657822", "title": "Email validation in SAS using regexp - not catching comma or several email adresses in one field", "body": "<p>If you can use modules from the cpan, I recommend <code>Email::Valid</code> to validate your email address instead of a regexp. Here is a sample:</p>\n\n<pre><code>use Email::Valid;\n\nmy @data = qw|some@email.com, some@email.com,someother@email.com some@email.com/someother@email.com|;\n\nforeach my $addy (@data) {\n   if (Email::Valid-&gt;address($addy)) {\n        print \"Valid Email $addy\\n\";\n   } else {\n        print \"Invalid email $addy\\n\";\n   }\n}\n__DATA___\nInvalid email some@email.com,\nInvalid email some@email.com,someother@email.com\nInvalid email some@email.com/someother@email.com\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 58518, "user_id": 1623007, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/40931bddde219f1a9e4514d2f4cfa826?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/1623007/joe"}, "is_accepted": false, "score": 0, "last_activity_date": 1456780829, "creation_date": 1456780829, "answer_id": 35709873, "question_id": 35655679, "link": "https://stackoverflow.com/questions/35655679/email-validation-in-sas-using-regexp-not-catching-comma-or-several-email-adres/35709873#35709873", "title": "Email validation in SAS using regexp - not catching comma or several email adresses in one field", "body": "<p><code>$</code> can be tricky in SAS, because <em>every</em> SAS string has space padding unless it happens to be the exact maximum length of the field (which is rare or never in cases like this, if you set your length right).  </p>\n\n<p>As such, you need to either:</p>\n\n<ol>\n<li>Trim your string before passing it to prxmatch (using <code>trim</code>, <code>strip</code>, or similar)</li>\n<li>Tell your regexp that any number of spaces is allowed before the <code>$</code>.</li>\n</ol>\n\n<p>I prefer 1:</p>\n\n<pre><code>prx_matched = prxmatch(pattern,trim(email));\n</code></pre>\n\n<p>But 2 is also fine, particularly if you need speed:</p>\n\n<pre><code>if prxmatch('/^[a-z0-9_\\.\\+-]+(\\.[a-z0-9_\\+-]+)*@[a-z0-9-]{2,}(\\.[a-z0-9-]+)*\\.([a-z]{2,8})\\s*$/', email) = 1 then prx =1 ;\nelse prx = 0;\n</code></pre>\n\n<p><code>\\s</code> is the space metacharacter, and matches things other than space; however, it should be safe for email validation if you're properly dealing with your input.</p>\n\n<hr>\n\n<p>In addition to the above, you need to add the <code>o</code> modifier to your regexp (and possibly <code>i</code>).  <code>o</code> prevents SAS from recompiling that static regexp every data step loop (which is very expensive).  <code>i</code> means <code>case insensitive</code> which you probably should be using also (unless you're really very sure you never have Capital Letters in your emails).</p>\n"}], "owner": {"reputation": 537, "user_id": 3032519, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/80538c6cc4ed8ff212429b80208eb6a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ullsokk", "link": "https://stackoverflow.com/users/3032519/ullsokk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1491, "favorite_count": 1, "accepted_answer_id": 35656076, "answer_count": 3, "score": 1, "last_activity_date": 1456780829, "creation_date": 1456500698, "question_id": 35655679, "link": "https://stackoverflow.com/questions/35655679/email-validation-in-sas-using-regexp-not-catching-comma-or-several-email-adres", "title": "Email validation in SAS using regexp - not catching comma or several email adresses in one field", "body": "<p>I am using the following PERL regexp function in SAS to validate emails:</p>\n\n<pre><code>if prxmatch('/^[a-z0-9_\\.\\+-]+(\\.[a-z0-9_\\+-]+)*@[a-z0-9-]{2,}(\\.[a-z0-9-]+)*\\.([a-z]{2,8})/', email) = 1 then prx =1 ;\nelse prx = 0;\n</code></pre>\n\n<p>This works for most emails, but in these cases, the code fails to catch invalids:</p>\n\n<p>some@email.com, (with a comma at the end)</p>\n\n<p>some@email.com, someother@email.com (Two separate emails in one string variable, separated by comma)</p>\n\n<p>some@email.com/someother@email.com (Two separate emails in one string variable, separated by /) </p>\n\n<p>These are easy to detect by using index(epost,','), but I recon there must be a way to include these in the prxmatch function, but I cant find the sollution. The regexp function is something I found, not something I have written myself, and although I understand most of it, I cant find the correct syntax. </p>\n\n<p>Tried something like @{1} to denote only one @ allowed, but cant fingure how to work it in. Also tried a $/ at the end, but this also didnt work.</p>\n"}, {"tags": ["bash", "perl"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1456495677, "post_id": 35653816, "comment_id": 58987861, "body": "<code>grep &quot;myRule.*cat&quot; &lt;filename&gt;</code> -- <a href=\"http://linux.die.net/man/1/grep\" rel=\"nofollow noreferrer\">man grep</a> -- once you are satisfied with the results of your regular expression, you can use it in Perl as well (e.g. with the <code>=~</code> operator or other Perl functions)."}], "answers": [{"tags": [], "owner": {"reputation": 7747, "user_id": 4086774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faa70eacd799b083b10a8a43b418e2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Lars Fischer", "link": "https://stackoverflow.com/users/4086774/lars-fischer"}, "is_accepted": true, "score": 1, "last_activity_date": 1456496564, "creation_date": 1456496564, "answer_id": 35654179, "question_id": 35653816, "link": "https://stackoverflow.com/questions/35653816/how-can-i-get-only-special-strings-by-condition-from-file/35654179#35654179", "title": "How can i get only special strings (by condition) from file?", "body": "<p>Is it correct, that each entry is two lines long? Then you can use <code>sed</code>:</p>\n\n<pre><code>sed -n '/myRule/ {N }; /myRule.*cat/ {p}'\n</code></pre>\n\n<ul>\n<li>the first rule appends the nextline to patternspace when <code>myRule</code> matches</li>\n<li>the second rule tries to match <code>myRule</code> followed by a <code>cat</code> in the patternspace , if found it prints patternspace </li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1456500876, "creation_date": 1456500876, "answer_id": 35655740, "question_id": 35653816, "link": "https://stackoverflow.com/questions/35653816/how-can-i-get-only-special-strings-by-condition-from-file/35655740#35655740", "title": "How can i get only special strings (by condition) from file?", "body": "<p>If your file is truly huge to the extent that it won't fit in memory (although files up to a few gigabytes are fine in modern computer systems) then the only way is to either change the record separator or to read the lines in pairs</p>\n\n<p>This shows the first way, and assumes that the second line of every pair ends with a double quote followed by a newline</p>\n\n<pre><code>perl -ne'BEGIN{$/ = qq{\"\\n}} print if /myRule/ and /cat/' huge_file.txt\n</code></pre>\n\n<p>and this is the second</p>\n\n<pre><code>perl -ne'$_ .= &lt;&gt;; print if /myRule/ and /cat/' huge_file.txt\n</code></pre>\n\n<p>When given your sample data as input, both methods produce this output</p>\n\n<pre><code>[2/Nov/2015][rule=\"myRule\"]\"GET\n   http://uselesssotialnetwork.com/picturewithcat.jpg\"\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 4414738, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1375411755/picture?type=large", "display_name": "Rovny Art", "link": "https://stackoverflow.com/users/4414738/rovny-art"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 35654179, "answer_count": 2, "score": 0, "last_activity_date": 1456500876, "creation_date": 1456495572, "question_id": 35653816, "link": "https://stackoverflow.com/questions/35653816/how-can-i-get-only-special-strings-by-condition-from-file", "title": "How can i get only special strings (by condition) from file?", "body": "<p>I have a huge text file with strings of a special format. How can i quickly create another file with only strings corresponding to my condition?</p>\n\n<p>for example, file contents:</p>\n\n<pre><code>[2/Nov/2015][rule=\"myRule\"]\"GET\n   http://uselesssotialnetwork.com/picturewithcat.jpg\"\n[2/Nov/2015][rule=\"mySecondRule\"]\"GET\n   http://anotheruselesssotialnetwork.com/picturewithdog.jpg\"\n[2/Nov/2015][rule=\"myRule\"]\"GET\n   http://uselesssotialnetwork.com/picturewithzombie.jpg\"\n</code></pre>\n\n<p>and i only need string with \"myRule\" and \"cat\"?\nI think it should be perl, or bash, but it doesn't matter.\nThanks a lot, sorry for noob question.</p>\n"}, {"tags": ["perl", "email", "mime-types", "email-attachments"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 6, "creation_date": 1456493619, "post_id": 35652984, "comment_id": 58986286, "body": "You might find the module <a href=\"https://metacpan.org/pod/File::LibMagic\" rel=\"nofollow noreferrer\">File::LibMagic</a> useful"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456498910, "post_id": 35652984, "comment_id": 58990401, "body": "Is the content-type in your headers the literal string <code>changed&#47;manipulated</code>?"}, {"owner": {"reputation": 69, "user_id": 5783418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809ef3d102efe5f275225d574ff3b1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/5783418/bharat"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456732865, "post_id": 35652984, "comment_id": 59065901, "body": "@simbabque no, i mean the values are altered or changed by any man (OR woman :P) in middle of communication"}], "owner": {"reputation": 69, "user_id": 5783418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/809ef3d102efe5f275225d574ff3b1ee?s=128&d=identicon&r=PG&f=1", "display_name": "Bharat", "link": "https://stackoverflow.com/users/5783418/bharat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456493256, "creation_date": 1456493256, "question_id": 35652984, "link": "https://stackoverflow.com/questions/35652984/identify-actual-mime-type-based-on-content-of-attachments-not-from-content-type", "title": "Identify actual mime type based on content of attachments NOT from content-type value", "body": "<p>I have an email in which content-type values are <strong>changed/manipulated</strong> in header.</p>\n\n<p>How can i know actual content type of attachment, by analyzing the content data. Encoding is base-64.</p>\n"}, {"tags": ["perl", "module", "tumblr"], "answers": [{"tags": [], "owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1456490917, "creation_date": 1456490917, "answer_id": 35652169, "question_id": 35651960, "link": "https://stackoverflow.com/questions/35651960/perl-tumblr-module-proxy/35652169#35652169", "title": "Perl Tumblr Module Proxy", "body": "<p>Quick glance at source shows that instances have undocumented <code>ua</code> property that contains instance of <a href=\"http://p3rl.org/LWP::UserAgent\" rel=\"nofollow\"><code>LWP::UserAgent</code></a> object used to perform actual requests. You can configure it however you like.</p>\n\n<p>For example:</p>\n\n<pre><code>$my_www_tumblr-&gt;ua-&gt;proxy(['http', 'ftp'], 'http://example.com/');\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3899559, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9384e275eb0534e16f579e48f19d563e?s=128&d=identicon&r=PG&f=1", "display_name": "Salway", "link": "https://stackoverflow.com/users/3899559/salway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 35652169, "answer_count": 1, "score": 0, "last_activity_date": 1456490917, "creation_date": 1456490239, "question_id": 35651960, "link": "https://stackoverflow.com/questions/35651960/perl-tumblr-module-proxy", "title": "Perl Tumblr Module Proxy", "body": "<p>I'm using this <a href=\"https://github.com/damog/www-tumblr\" rel=\"nofollow\">https://github.com/damog/www-tumblr</a> Module to manage some of my bigger Tumblr Accounts.</p>\n\n<p>Everything is working greate, but now i want to add more then just 3 Tumblr Accounts and manage them trought the Tumblr Api, because managing every Account on his own will cost me about 2 Hours every Day.</p>\n\n<p>Tumblr don't allow multiple accounts so i would like to use some http proxy to hide the requests.</p>\n\n<p>How can i add Proxy Support to this Module <a href=\"http://search.cpan.org/~damog/WWW-Tumblr-5.00/lib/WWW/Tumblr.pm\" rel=\"nofollow\">http://search.cpan.org/~damog/WWW-Tumblr-5.00/lib/WWW/Tumblr.pm</a></p>\n\n<p>Hope someone can help me. Kind regards.</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 6, "creation_date": 1456489025, "post_id": 35651425, "comment_id": 58983132, "body": "It means an error. Throw it away."}], "answers": [{"comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456499847, "post_id": 35652228, "comment_id": 58991088, "body": "The expression <code>%par-&gt;{&#39;a&#39;}{&#39;b&#39;}</code> is compiled as <code>\\(%par)-&gt;{&#39;a&#39;}{&#39;b&#39;}</code> in all versions of perl before 5.22, so the existence of the hash reference <code>$par</code> is irrelevant. If instead you declared <code>my %par = ( a =&gt; { b =&gt; 1, c =&gt; 2, d =&gt; 3 } )</code> and tested on Perl v5.20 or earlier then <code>Data::Dump</code> would at least show something useful, even though the syntax is certainly wrong and has been deprecated for a long time"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1456500514, "post_id": 35652228, "comment_id": 58991638, "body": "@Borodin I see. I&#39;ll add my Perl version to the answer."}, {"owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1490007507, "post_id": 35652228, "comment_id": 72903170, "body": "@Borodin so what ever the code($sc1 = %par-&gt;{&#39;a&#39;}{&#39;b&#39;};) that i have posted in the above question make sense?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1456500558, "last_edit_date": 1456500558, "creation_date": 1456491083, "answer_id": 35652228, "question_id": 35651425, "link": "https://stackoverflow.com/questions/35651425/what-are-the-different-ways-to-access-the-hash-variables-in-perl/35652228#35652228", "title": "What are the different ways to access the hash variables in perl", "body": "<p>All three variants you posted will produce a syntax error while under <code>use strict</code>, and an additional warning with <code>use warnings</code> on Perls older than Perl 5.22. The output I show here is from Perl 5.20.1.</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $par = { a =&gt; { b =&gt; 1, c =&gt; 2, d =&gt; 3 } };\n\nmy $sc1 = %par-&gt;{'a'}{'b'};\nmy @a1 = %par-&gt;{'a'}{'c'};\nmy %c3 = %par-&gt;{'a'}{'d'};\n\n__END__\nUsing a hash as a reference is deprecated at /home/foo/code/scratch.pl line 700.\nUsing a hash as a reference is deprecated at /home/foo/code/scratch.pl line 701.\nUsing a hash as a reference is deprecated at /home/foo/code/scratch.pl line 702.\nGlobal symbol \"%par\" requires explicit package name at /home/foo/code/scratch.pl line 700.\nGlobal symbol \"%par\" requires explicit package name at /home/foo/code/scratch.pl line 701.\nGlobal symbol \"%par\" requires explicit package name at /home/foo/code/scratch.pl line 702.\nExecution of /home/foo/code/scratch.pl aborted due to compilation errors.\n</code></pre>\n\n<p>Without <code>strict</code> and <code>warnings</code>, it will compile, but produce nonsense.</p>\n\n<pre><code>no strict;\nno warnings;\nuse Data::Printer;\n\nmy $par = { a =&gt; { b =&gt; 1, c =&gt; 2, d =&gt; 3 } };\n\nmy $sc1 = %par-&gt;{'a'}{'b'};\nmy @a1 = %par-&gt;{'a'}{'c'};\nmy %c3 = %par-&gt;{'a'}{'d'};\n\np $sc1;\np @a1;\np %c3;\n\n__END__\n\nundef\n[\n    [0] undef\n]\n{\n    ''   undef\n}\n</code></pre>\n\n<p>That said, always <code>use strict</code> and <code>use warnings</code> for your Perl programs, and listen to the warnings it shows you.</p>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1456499612, "creation_date": 1456499612, "answer_id": 35655284, "question_id": 35651425, "link": "https://stackoverflow.com/questions/35651425/what-are-the-different-ways-to-access-the-hash-variables-in-perl/35655284#35655284", "title": "What are the different ways to access the hash variables in perl", "body": "<p>This originates as an issue with earlier perl releases whereby an expression like</p>\n\n<pre><code>%par-&gt;{'a'}\n</code></pre>\n\n<p>would be silently interpreted as</p>\n\n<pre><code>(\\%par)-&gt;{'a'}\n</code></pre>\n\n<p>I'm unclear whether this was a bug, or if it was intended behaviour. Either way it has been declared undesirable, and was first documented to be deprecated, then changed to cause deprecation warnings, and finally in Perl v5.22 it causes a fatal error so your code won't even compile any longer</p>\n\n<blockquote>\n  <p>Can't use a hash as a reference</p>\n</blockquote>\n\n<p>Either of these should properly be written as just</p>\n\n<pre><code>$par{'a'}\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/perldelta.html#Using-a-hash-or-an-array-as-a-reference-are-now-fatal-errors\" rel=\"nofollow\">perldelta document for version 22 of Perl 5</a> has this</p>\n\n<blockquote>\n  <p><strong>Using a hash or an array as a reference are now fatal errors</strong></p>\n  \n  <p>For example, <code>%foo-&gt;{\"bar\"}</code> now causes a fatal compilation error. These have been deprecated since before v5.8, and have raised deprecation warnings since then.</p>\n</blockquote>\n\n<p>In general, the three lines that you quote should be fixed by replacing <code>%par-&gt;</code> with <code>$par</code></p>\n\n<pre><code>$sc1 = $par{'a'}{'b'};\n@a1  = $par{'a'}{'c'};\n%c3  = $par{'a'}{'d'};\n</code></pre>\n\n<p>However the second will set <code>@a1</code> to have a single element and could perhaps better be written as <code>@a1 = ( $par{'a'}{'c'} )</code> to emphasise that it is a list assignment, and the third is assigning a single scalar to a hash, which will cause the warning</p>\n\n<blockquote>\n  <p>Odd number of elements in hash assignment</p>\n</blockquote>\n\n<p>so the semantic is wrong as well as the syntax</p>\n"}], "owner": {"reputation": 99, "user_id": 5985980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1039509692788914/picture?type=large", "display_name": "Suneeldatta Kolipakula", "link": "https://stackoverflow.com/users/5985980/suneeldatta-kolipakula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1456500558, "creation_date": 1456488767, "last_edit_date": 1456489262, "question_id": 35651425, "link": "https://stackoverflow.com/questions/35651425/what-are-the-different-ways-to-access-the-hash-variables-in-perl", "title": "What are the different ways to access the hash variables in perl", "body": "<p>According to my basic understanding we can access the values of an hash as follows:</p>\n\n<pre><code>$hash_name{key1}{key2};       #In case of an nested hash \n$hash_reference-&gt;{key1}{key2} #if we have the reference to the hash instead of the hash we can access as \n</code></pre>\n\n<p>But in in one the archived code I have seen as follows:</p>\n\n<pre><code>$sc1 = %par-&gt;{'a'}{'b'};\n@a1 = %par-&gt;{'a'}{'c'};\n%c3 = %par-&gt;{'a'}{'d'};\n</code></pre>\n\n<p>What does it actually mean? Can some one help me on this?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 19681, "user_id": 936986, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/075f0ea7418371ace9bba5b901409ab1?s=128&d=identicon&r=PG", "display_name": "Oleg V. Volkov", "link": "https://stackoverflow.com/users/936986/oleg-v-volkov"}, "edited": false, "score": 0, "creation_date": 1456489117, "post_id": 35651339, "comment_id": 58983176, "body": "You can string <code>eval</code> <code>use</code> as well."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 5, "last_activity_date": 1456489072, "last_edit_date": 1456489072, "creation_date": 1456488554, "answer_id": 35651339, "question_id": 35651264, "link": "https://stackoverflow.com/questions/35651264/show-error-if-pm-library-doesnt-exist/35651339#35651339", "title": "Show error if pm library doesn&#39;t exist", "body": "<p>This is to do with when the error can be 'noticed'. <a href=\"http://perldoc.perl.org/functions/use.html\" rel=\"nofollow\"><code>use</code></a> happens at <em>compile</em> time. Thus - you can't do many of the normal program flow things that you'd do. (There are a few exceptions).</p>\n\n<p>But what you can do instead, is <a href=\"http://perldoc.perl.org/functions/require.html\" rel=\"nofollow\"><code>require</code></a> which loads things at run time - at a point where you can do the sort of tests you would want. </p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\neval { require \"Not_here.pm\" };\nwarn \"Couldn't load: $@\" if $@;\nprint \"fish\";\n</code></pre>\n\n<p>Although, you may also need to <code>import</code> the routines you want, after <code>requiring</code> the module, because <code>use</code> does:</p>\n\n<pre><code> BEGIN { require Module; Module-&gt;import( LIST ); }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 0, "creation_date": 1456506558, "post_id": 35652980, "comment_id": 58995828, "body": "At present - until advised to the contrary - I have made a &quot;mash&quot; of the two. ideas. I used:  eval(require &quot;x.pm&quot;); if ($@){print error}else{BEGIN{eval &quot;use x&quot;} qfrvjqf 1_!l_I1_1nbjm_obsg1_ldhj-ajm1_lnk_fq ... data to be decoded by library no x}  So if the first require can&#39;t find the file, prints an error, but if it is found, the BEGIN within else statement loads the library and decodes the data. It works, but whether it follows the correct convention I don&#39;t know."}, {"owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "reply_to_user": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "edited": false, "score": 2, "creation_date": 1456511184, "post_id": 35652980, "comment_id": 58998412, "body": "This is not advisable. First of all the <code>BEGIN</code> block will be run anyway, and before anything else in your script. Second of all trying to require it after it is used might have side-effects. (I have not thought too much about this.) You should use either my version or @Sobrique&#39;s"}], "tags": [], "owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "is_accepted": false, "score": 2, "last_activity_date": 1456493241, "creation_date": 1456493241, "answer_id": 35652980, "question_id": 35651264, "link": "https://stackoverflow.com/questions/35651264/show-error-if-pm-library-doesnt-exist/35652980#35652980", "title": "Show error if pm library doesn&#39;t exist", "body": "<p>I use string <code>eval</code> to check if a module exists, if I can run without it.</p>\n\n<pre><code>our $have_unac = 0;\nBEGIN {\n    eval \"use Text::Unaccent::PurePerl\";\n    $have_unac = 1 if (!$@);\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 2799655, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/x8L1s.jpg?s=128&g=1", "display_name": "Cristofayre", "link": "https://stackoverflow.com/users/2799655/cristofayre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1456493241, "creation_date": 1456488339, "question_id": 35651264, "link": "https://stackoverflow.com/questions/35651264/show-error-if-pm-library-doesnt-exist", "title": "Show error if pm library doesn&#39;t exist", "body": "<p><strong>\"Interesting\" dilemma this one</strong>.</p>\n\n<p>To use a lib in perl, you obviously include \"use lib x\" command ... but what can you do if \"x.pm\" doesn't exist, (or more correctly per chance deleted by server admin)</p>\n\n<p>In short, I 'hide' this file in with the .htaccess and other files in the root of my account, ie below the \"public_html\" folder - to keep it away from prying eyes. So I can set the path in the script such as \"use /home/account/x\" and all is well.</p>\n\n<p>In the past, I think security measures mean this file sometimes gets removed. So when the script runs, the viewer sees a glorious \"500 Error\"</p>\n\n<p>I tried:</p>\n\n<pre><code> If (-e 'use /home/account/x'){\n use 'home/account/x';\n ...\n }\n else{\n print \"error\";\n }\n</code></pre>\n\n<p>But all that does is say it cannot find the use command on the line below \"If\"</p>\n\n<p>Tried:</p>\n\n<pre><code>use 'home/account/x' || die ('cannot find file')\n</code></pre>\n\n<p>But that syntax is wrong. Is there any simple way around this?</p>\n"}, {"tags": ["perl", "image-processing", "imagemagick", "gaussian", "gaussianblur"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1456483507, "post_id": 35649413, "comment_id": 58979449, "body": "Does the type of blur matter?"}], "answers": [{"comments": [{"owner": {"reputation": 47592, "user_id": 346063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Riibs.png?s=128&g=1", "display_name": "Thariama", "link": "https://stackoverflow.com/users/346063/thariama"}, "edited": false, "score": 1, "creation_date": 1456487055, "post_id": 35650023, "comment_id": 58981813, "body": "thx, that was exactly, what i was looking for. I had googled a bit, but had not found it myself."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 5, "last_activity_date": 1456484506, "creation_date": 1456484506, "answer_id": 35650023, "question_id": 35649413, "link": "https://stackoverflow.com/questions/35649413/imagemagick-looking-for-a-fast-way-to-blur-an-image/35650023#35650023", "title": "ImageMagick: Looking for a fast way to blur an image", "body": "<p>The <a href=\"http://www.imagemagick.org/Usage/blur/#blur_gaussian\" rel=\"noreferrer\">documentation speaks of the difference between <em>Blur</em> and <em>GaussianBlur</em></a>.</p>\n\n<blockquote>\n  <p>There has been some confusion as to which operator, \"-blur\" or the\n  \"-gaussian-blur\" is better for blurring images. First of all \"-blur\"\n  is faster, but it does this using two stage technique. First in one\n  axis, then in the other. The \"-gaussian-blur\" operator on the other\n  hand is more mathematically correct as it blurs in all directions\n  simultaneously. The speed cost between the two can be enormous, by a\n  factor of 10 or more, depending on the amount of bluring involved.</p>\n  \n  <p>[...]</p>\n  \n  <p>In summary, the two operators are slightly different, but only\n  minimally. As \"-blur\" is much faster, use it. I do in just about all\n  the examples involving blurring. Large</p>\n</blockquote>\n\n<p>That would simply be:</p>\n\n<pre><code>$image-&gt;Blur( 'x' . $level );\n</code></pre>\n\n<p>But the <a href=\"http://www.imagemagick.org/www/perl-magick.html#manipulate\" rel=\"noreferrer\">Perl ImageMagick documentation</a> has the same text on both <code>Blur</code> and <code>GaussianBlur</code> (emphasis mine). I can't try now, you would have to benchmark it yourself.</p>\n\n<blockquote>\n  <p><em>Blur:</em> reduce image noise and reduce detail levels with a Gaussian operator of the given radius and standard deviation (sigma).</p>\n  \n  <p><em>GaussianBlur:</em> reduce image noise and reduce detail levels with a Gaussian operator of the given radius and standard deviation (sigma).</p>\n</blockquote>\n\n<p>An <a href=\"http://www.imagemagick.org/Usage/blur/#blur_resize\" rel=\"noreferrer\">alternative that the documentation also lists</a> is resizing the image to be very tiny, and then enlarging again.</p>\n\n<blockquote>\n  <p>Using large sigma values for image bluring is very slow. But onw\n  technique can be used to speed up this process. This however is only a\n  rough method and could use some mathematicaly rigor to improve\n  results. Essentually the reason large blurs are slow is because you\n  need a large window or 'kernel' to merge lots of pixels together, for\n  each and every pixel in the image. However resize (making image\n  smaller) does the same thing but generates fewer pixels in the\n  process. The technique is basically shrink the image, then enlarge it\n  again to generate the heavilly blured result. The Gaussian Filter is\n  especially useful for this as you can directly specify a Gaussian\n  Sigma define.</p>\n</blockquote>\n\n<p>The example command line code is this:</p>\n\n<blockquote>\n<pre><code>convert  rose: -blur 0x5   rose_blur_5.png\nconvert rose: -filter Gaussian -resize 50% \\\n      -define filter:sigma=2.5 -resize 200%  rose_resize_5.png\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 51015, "user_id": 356849, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/INqgP.jpg?s=128&g=1", "display_name": "NullVoxPopuli", "link": "https://stackoverflow.com/users/356849/nullvoxpopuli"}, "edited": false, "score": 1, "creation_date": 1525787135, "post_id": 48443430, "comment_id": 87487669, "body": "I have a 4k screen, and this still took 1s with an i7 (laptop, don&#39;t remember speed atm).  but scaling down to 5%, and going up 20k% took 0.2s"}], "tags": [], "owner": {"reputation": 1119, "user_id": 7403220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bjw8YOnUR10/AAAAAAAAAAI/AAAAAAAALRk/GrGq_vVktHA/photo.jpg?sz=128", "display_name": "Alexander Svetkin", "link": "https://stackoverflow.com/users/7403220/alexander-svetkin"}, "is_accepted": false, "score": 7, "last_activity_date": 1516884930, "creation_date": 1516884930, "answer_id": 48443430, "question_id": 35649413, "link": "https://stackoverflow.com/questions/35649413/imagemagick-looking-for-a-fast-way-to-blur-an-image/48443430#48443430", "title": "ImageMagick: Looking for a fast way to blur an image", "body": "<p>I found that <a href=\"http://www.imagemagick.org/Usage/blur/#blur_resize\" rel=\"noreferrer\">the suggested method</a> of resizing image for blur imitation makes output look very pixelated for very large values of sigma like 25 or more. So I finally came to an idea of downscale-blur-enlarge, which makes very nice result (almost indistinguishable from simple blur with large sigma):</p>\n\n<pre><code># plain slow blur\nconvert -blur 0x25 sample.jpg blurred_slow.jpg\n# much faster\nconvert -scale 10% -blur 0x2.5 -resize 1000% sample.jpg blurred_fast.jpg\n</code></pre>\n\n<p>On my i5 2.7Ghz it shows up to 10x speed up. </p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 5410083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4a5f024f398511d5850027558457638?s=128&d=identicon&r=PG&f=1", "display_name": "Scareactor", "link": "https://stackoverflow.com/users/5410083/scareactor"}, "is_accepted": false, "score": 3, "last_activity_date": 1558192784, "last_edit_date": 1558192784, "creation_date": 1558190889, "answer_id": 56200032, "question_id": 35649413, "link": "https://stackoverflow.com/questions/35649413/imagemagick-looking-for-a-fast-way-to-blur-an-image/56200032#56200032", "title": "ImageMagick: Looking for a fast way to blur an image", "body": "<p>Not sure if I could still help OP with this, but I recently tried the same for a blurred screenlock picture.\nI found that <strong>omitting the -blur</strong> part saves even more calculation time and is still delivering great results for a 4K picture:</p>\n\n<pre><code>convert in.png -scale 2.5% -resize 4000% out.png\n# real: 0.174s user: 0.144s size: 1.2MiB\n\nconvert in.png -scale 10% -blur 0x2.5 -resize 1000% out.png\n# real: 0.136s user: 2.117s size: 1.2MiB\n\nconvert in.png -blur 0x25 out.png\n# real: 2.425s user: 21.408s size: 1KiB\n</code></pre>\n\n<p>However, you couldn't go lower than 2.5% with 3840x2160. It will resize the image. I guess the eps value differs for pictures of other sizes.</p>\n\n<p>It should be noted, that the resulting image sizes differ noticably!</p>\n"}], "owner": {"reputation": 47592, "user_id": 346063, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Riibs.png?s=128&g=1", "display_name": "Thariama", "link": "https://stackoverflow.com/users/346063/thariama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5919, "favorite_count": 1, "accepted_answer_id": 35650023, "answer_count": 3, "score": 7, "last_activity_date": 1558192784, "creation_date": 1456482924, "last_edit_date": 1456483396, "question_id": 35649413, "link": "https://stackoverflow.com/questions/35649413/imagemagick-looking-for-a-fast-way-to-blur-an-image", "title": "ImageMagick: Looking for a fast way to blur an image", "body": "<p>I am searching for a <strong>faster way to blur</strong> an image than to use the <strong>GaussianBlur</strong>.<br>\nThe <strong>solution</strong> I am looking for <strong>can be a command line solution</strong>, but I prefer code in perl notation.</p>\n\n<p>Actually, we use the Perl image magick API to blur images:</p>\n\n<pre><code># $image is our Perl object holding a imagemagick perl image\n# level is a natural number between 1 and 10\n$image-&gt;GaussianBlur('x' . $level);\n</code></pre>\n\n<p>This works fine, but with the level height the amount of time it consumes seems to grow exponentially. </p>\n\n<p><strong>Question:</strong> How can I improve the time used for the bluring operation?\nIs there another faster approach to blur images? </p>\n"}, {"tags": ["regex", "perl", "substitution", "capturing-group"], "comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1456477014, "post_id": 35647187, "comment_id": 58974957, "body": "did you hear above <code>e</code> modifier?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1456477025, "post_id": 35647187, "comment_id": 58974962, "body": "How do you want the regex itself to do that -- how would you use it? The <code>m&#47;</code> just returns matches, I think.  In the <code>s&#47;</code>? That changes the string, is that OK?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1456477216, "post_id": 35647187, "comment_id": 58975070, "body": "I love the example data! :)"}], "answers": [{"comments": [{"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 1, "creation_date": 1456477177, "post_id": 35647369, "comment_id": 58975050, "body": "this <code>s&#47;(a)([0-9]+)&#47;$1 x $2&#47;eg;</code> would be more appropriate."}, {"owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "reply_to_user": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "edited": false, "score": 0, "creation_date": 1456477228, "post_id": 35647369, "comment_id": 58975079, "body": "Yes. Depending on OP&#39;s requirements."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1456477688, "post_id": 35647369, "comment_id": 58975374, "body": "I am saving these nasty regex tricks, do you guys realize that?  Is that OK? :)"}], "tags": [], "owner": {"reputation": 6592, "user_id": 3005251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5331f7e467aae3d581fe8bc814ef572?s=128&d=identicon&r=PG", "display_name": "bolav", "link": "https://stackoverflow.com/users/3005251/bolav"}, "is_accepted": true, "score": 5, "last_activity_date": 1456477397, "last_edit_date": 1456477397, "creation_date": 1456477073, "answer_id": 35647369, "question_id": 35647187, "link": "https://stackoverflow.com/questions/35647187/is-it-possible-to-repeat-a-captured-group-in-the-substitution-in-regular-express/35647369#35647369", "title": "Is it possible to repeat a captured group in the substitution in regular expressions?", "body": "<p>In perl this regular expression will give you the expected result, your regexp is a match, while the <code>s</code> regular expression is a substitution:</p>\n\n<pre><code>s/(a)([0-9])/$1 x $2/eg;\n</code></pre>\n\n<p>Like this:</p>\n\n<pre><code>my $str = 'ba1na3na2';\n$str =~ s/(a)([0-9])/$1 x $2/eg;\nprint $str;\n</code></pre>\n\n<blockquote>\n  <p>banaaanaa</p>\n</blockquote>\n\n<ul>\n<li>The <code>e</code> modifier evaluates the right-hand side as an expression.</li>\n<li>The <code>x</code> operator repeates the string.</li>\n</ul>\n\n<p><strong>Update:</strong></p>\n\n<p>As @AvinashRaj says it might be <code>s/(a)([0-9]+)/$1 x $2/eg;</code> is more approriate. Depending on if you want\n<code>ba20nana</code> to become </p>\n\n<ul>\n<li>baa0nana</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>baaaaaaaaaaaaaaaaaaaanana</li>\n</ul>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 1, "closed_date": 1456477229, "accepted_answer_id": 35647369, "answer_count": 1, "score": 3, "last_activity_date": 1456477397, "creation_date": 1456476457, "question_id": 35647187, "link": "https://stackoverflow.com/questions/35647187/is-it-possible-to-repeat-a-captured-group-in-the-substitution-in-regular-express", "closed_reason": "Duplicate", "title": "Is it possible to repeat a captured group in the substitution in regular expressions?", "body": "<p>Is it possible with regex to repeat a captured group an amount of times with the added restriction that the amount to repeat is also found in a capture group?</p>\n\n<p>Example:</p>\n\n<pre><code>Regex: /(a)([0-9])/g\nString: ba1na3na2\nExpected result: banaaanaa\n</code></pre>\n\n<p>I have never seen anything that does this, but maybe I have been looking in the wrong places. Note: I am using Perl - but I am interested to see answers for other flavours as well.</p>\n"}, {"tags": ["regex", "perl", "hash"], "comments": [{"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 1, "creation_date": 1456475558, "post_id": 35646894, "comment_id": 58974142, "body": "Re: &quot;I&#39;m not sure if this [...] would even work&quot;: But surely you tried it before posting?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1456477501, "post_id": 35646894, "comment_id": 58975255, "body": "@Bram wow, you&#39;re on a real Perl spree. I wonder if the question limit is in effect for high rep users..."}], "answers": [{"comments": [{"owner": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 1, "creation_date": 1456502301, "post_id": 35647423, "comment_id": 58992885, "body": "Re: &quot;if pairing doesn&#39;t work out right there&#39;ll be a nasty bug&quot;: Could you elaborate on this? I don&#39;t see how <code>&#47;f=([a-z]+)&amp;c=([0-9]+)&#47;g</code> could ever <i>not</i> generate results in pairs. (Maybe give an example of input that triggers the bug, and the resulting output?)"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 155387, "user_id": 978917, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/92d059913eace78a868a3e87f98e0a57?s=128&d=identicon&r=PG", "display_name": "ruakh", "link": "https://stackoverflow.com/users/978917/ruakh"}, "edited": false, "score": 0, "creation_date": 1457002467, "post_id": 35647423, "comment_id": 59211818, "body": "@ruakh I dropped the statement about a &quot;nasty bug,&quot; in the process correcting a faulty statement. I do know what itches me but can&#39;t come up with code to articulate that.  Thank you."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1457002119, "last_edit_date": 1457002119, "creation_date": 1456477285, "answer_id": 35647423, "question_id": 35646894, "link": "https://stackoverflow.com/questions/35646894/assign-all-capturing-groups-of-one-regex-to-a-hash/35647423#35647423", "title": "Assign all capturing groups of one regex to a hash", "body": "<p>Just feed the hash with the list of pairs (matches)</p>\n\n<pre><code>%countedfruit = $string =~ /f=([a-z]+)&amp;c=([0-9]+)/g;\n</code></pre>\n\n<p>This will issue a warning if there isn't an even-numbered list (with warnings enabled), otherwise key-value pairs in the hash are formed of pairs of consecutive matches in the list returned by <code>m/</code>.</p>\n"}], "owner": {"reputation": 22591, "user_id": 1150683, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4171d32ed59549af71dff8c1682f17cc?s=128&d=identicon&r=PG&f=1", "display_name": "Bram Vanroy", "link": "https://stackoverflow.com/users/1150683/bram-vanroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 35647423, "answer_count": 1, "score": 0, "last_activity_date": 1457002119, "creation_date": 1456475378, "last_edit_date": 1456477580, "question_id": 35646894, "link": "https://stackoverflow.com/questions/35646894/assign-all-capturing-groups-of-one-regex-to-a-hash", "title": "Assign all capturing groups of one regex to a hash", "body": "<p>Let's say you have a string that you know will match a regex at least once. That regex has two capturing groups and you want to assign each couple to a key-value pair in a hash.</p>\n\n<p>I was thinking something like this, but I'm not sure if this is the <em>Perl way</em> to go - or if it would even work.</p>\n\n<pre><code>$string = 'f=banana&amp;c=3;f=strawberry&amp;c=1;f=coconut&amp;c=6';\nmy %countedfruit;\n($countedfruit{$1} = $2) = $string =~ /f=([a-z]+)&amp;c=([0-9]+)/g;\n\nfor my $fruit (keys %countedfruit) {\n    print \"The count of '$fruit' is $countedfruit{$fruit}\\n\";\n}\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>The count of 'banana' is 3\nThe count of strawberry is 1\nThe count of coconut is 6\n</code></pre>\n\n<p>Actual result:</p>\n\n<pre><code>The count of 'coconut' is \n</code></pre>\n"}, {"tags": ["regex", "perl", "freeze"], "comments": [{"owner": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456464461, "post_id": 35644092, "comment_id": 58969132, "body": "Please show the HTML you are trying to parse. Anyways, regex is not the right tool to parse HTML, why don&#39;t you use a HTML parser?"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 5, "creation_date": 1456464704, "post_id": 35644092, "comment_id": 58969225, "body": "<a href=\"http://stackoverflow.com/a/1732454/18157\">Required reading for anyone trying to parse XML/HTML with regex</a>.  Summary: Don&#39;t parse HTML/XML with regex, use an appropriate parser."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456465201, "post_id": 35644092, "comment_id": 58969435, "body": "Agree with the above, but if you need to do it this one time, how about breaking that nasty line up with <code>qr</code>?  It&#39;d be far easier to look at."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "edited": false, "score": 0, "creation_date": 1456466302, "post_id": 35644092, "comment_id": 58969837, "body": "I&#39;d prefer some answers/comments about how maybe the regex above would result in &#39;catastrophic backtracking&#39;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456466669, "post_id": 35644092, "comment_id": 58969967, "body": "As for me, I can&#39;t see exactly what it&#39;s doing.  And as for my comment, it was meant to be constructive: if that was broken up via <code>qr</code> it would be much easier to see its structure and then maybe to notice where it could be spinning.  But, with best intentions (please take no offense): I&#39;ve had good experience with <code>HTML::TableExtract;</code>."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456482891, "post_id": 35644092, "comment_id": 58979010, "body": "Enable <code>use re &#39;debug&#39;;</code> and you will see what the regex engine is doing."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456486284, "post_id": 35644092, "comment_id": 58981293, "body": "@Sobrique what will the output be?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1456487082, "post_id": 35644092, "comment_id": 58981826, "body": "It&#39;ll print what the regex engine is doing. It may be very verbose, but it&#39;ll help you see how many &#39;steps&#39; are involved in the process (and thus if backtracking is happening)"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 3327, "user_id": 1604311, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/0frKT.jpg?s=128&g=1", "display_name": "Arunesh Singh", "link": "https://stackoverflow.com/users/1604311/arunesh-singh"}, "edited": false, "score": 0, "creation_date": 1456526052, "post_id": 35644092, "comment_id": 59006098, "body": "@AruneshSingh I have give the HTML. See my edit to the question."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1456526165, "post_id": 35644092, "comment_id": 59006139, "body": "@JimGarrison Why would you refer to that question with that bizarre and unhelpful answer?  The HTML parsing modules use regex. Why can&#39;t I?"}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1456526861, "post_id": 35644092, "comment_id": 59006437, "body": "Which HTML parsing modules?  They might use regex at the individual lexical <i>token</i> level (many lexers use regex at the core) but not at the tag level.  HTML and XML are not regular languages, and trying to use regex is asking for trouble in the long run.  It&#39;s like using a chainsaw to carve a turkey.  The referenced answer embodies the sentiment shared by all experienced developers who have been asked &quot;how do I use regex to parse HTML&quot;.  The only acceptable answer is &quot;Don&#39;t use regex, use a real HTML or XML parser&quot;."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456550240, "post_id": 35644092, "comment_id": 59011930, "body": "It doesn&#39;t hang for me.  It orderly exits <code>while</code> after 2 (two) iterations.  (I think I see the problem, though. Will get to it later.)"}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456569855, "post_id": 35644092, "comment_id": 59016757, "body": "@zdim I tried it at home and at work and it hangs after 2 iterations.  It&#39;s interesting that it&#39;s exiting for you."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1457323107, "post_id": 35644092, "comment_id": 59338613, "body": "@JimGarrison That answer doesn&#39;t embody anything.  It is just someone trolling.  Everyone is treating it like the emperor wearing no clothes."}, {"owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1457329481, "post_id": 35644092, "comment_id": 59340397, "body": "I don&#39;t know why regexes are so mystical.  Yes, they can be powerful when used to parse regular languages.  I guess every person that learns regexes for the first time imbues them with magical powers and they seem to be the solution for all parsing problems.  If you&#39;ve had to clean up somebody else&#39;s code that misused regexes you&#39;d identify with that answer.  It&#39;s not trolling, it&#39;s a heartfelt plea for people to stop worshipping at the regex altar and learn how an when they are appropriate.  It&#39;s also very funny."}, {"owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "reply_to_user": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "edited": false, "score": 0, "creation_date": 1457349949, "post_id": 35644092, "comment_id": 59350622, "body": "@JimGarrison Ok, give me an example of a perl HTML parser that you would recommend.  I will look at the source to see if it uses regex."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1457504966, "post_id": 35644092, "comment_id": 59431118, "body": "@CJ7 I am curious, how did this work?  I could never get it to hang but this may still go around whatever the problem is."}], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 1, "last_activity_date": 1501821973, "last_edit_date": 1501821973, "creation_date": 1457140292, "answer_id": 35808789, "question_id": 35644092, "link": "https://stackoverflow.com/questions/35644092/global-matching-regex-hanging/35808789#35808789", "title": "Global matching regex hanging", "body": "<p>I take this problem as a matter of debugging old code. (Still, see the end for a parser example.)</p>\n\n<p>The reported problem is that the regex hangs.  For me it exits after a few matches, on the first line.  The first suspect to me is a loose new line; <code>/s</code> modifier only makes <code>.</code> match a new line.  Another suspect is <code>rgRow</code> phrase explicitely matched for -- it is also an attribute in <code>&lt;td&gt;</code> tags, so matched under <code>.*</code>, too -- a conflict? Finally, the regex explicitly seeks each cell while <code>/g</code> modifier is used as well. For reference, this is the regex, used in code with <code>/sg</code> modifiers.</p>\n\n<pre><code>$patt = qr/rgRow.*? \n    &lt;td&gt;   (.*?)&lt;\\/td&gt;\n    &lt;td.*?&gt;(.*?)&lt;\\/td&gt; \n    &lt;td.*?&gt;(.*?)&lt;\\/td&gt; \n    &lt;td.*?&gt; .*? &lt;\\/td&gt; \n    &lt;td.*?&gt;(.*?)&lt;\\/td&gt; \n    &lt;td.*?&gt; &lt;nobr&gt;(.*?)&lt;\\/nobr&gt; &lt;\\/td&gt;\n/x; \n</code></pre>\n\n<p>Picking through the source char by char is not pleasant, and it doesn't work in general.  We can do the following instead: remove new lines, then capture contents of <code>&lt;td&gt;</code> tags into an array. The purpose, stated in regex, is precisely to get that.  (I change regex delimiter to avoid editor coloring.)</p>\n\n<pre><code>use warnings;\nuse strict;\n\nmy $msg = 'pulled_from_url';\n(my $msg_nonl = $msg) =~ s%\\n%%g;\n\nmy @raw_cells = $msg_nonl =~ |&lt;td.*?&gt;(.*?)&lt;\\/td&gt;|g;\n\n# Once we are at it: strip &lt;nobr&gt;, &amp;nbsp;, drop empty elements\n@cells = grep { !/^\\s*$/ } map {  s%&lt;\\/?nobr&gt;|&amp;nbsp;%%g; $_ } @raw_cells;\n# Get links (\"View Document\") out as well\n@content = grep  {  !/&lt;a.*?\\/a&gt;/ } @cells;\nprint \"Total of \" . scalar(@raw_cells) . \" cells. \";\nprint \"Cleaned up, down to \" . scalar(@content) . \" cells.\\n\";\nprint \"$_\\n\" for @content;\n</code></pre>\n\n<p>This prints cells' content, edited here for space</p>\n\n<pre>\nTotal of 280 cells. Cleaned up, down to 82 cells.\nCONSIDERATION OF REPORTS SUBMITTED BY ... DUE IN 1974 / MOROCCO\nState party's report\n...\n21 Feb 1974\n...\nTrue\nCONSIDERATION OF REPORTS SUBMITTED BY ... DUE IN 1972 / MOROCCO\nState party's report\n...\n17 Jan 1972\n...\nTrue\n</pre>\n\n<p>By inspecting the HTML we can see that the contents is pulled correctly.</p>\n\n<p>I do not mean to judge poster's motives or, rather, restrictions. However, I can't help it but compare the above guess work and careful source reading with the following. </p>\n\n<pre><code>use HTML::TableExtract;   \nmy $te = HTML::TableExtract-&gt;new( keep_html =&gt; 1 );\n$te-&gt;parse( \"&lt;table&gt; \" . $msg . \"&lt;/table&gt;\" );\n# We have one table, use top-level 'rows()' shorthand method\nforeach my $row ($te-&gt;rows) {\n    print join(',', @$row), \"\\n\";\n}\n</code></pre>\n\n<p>This reports the same 280 cells (when counting is added), and prints the same lines as one of the steps above.  I only needed to glance at the source to see that it was missing <code>&lt;table&gt;</code> tags. The <a href=\"http://search.cpan.org/dist/HTML-TableExtract/lib/HTML/TableExtract.pm\" rel=\"nofollow noreferrer\">HTML::TableExtract</a> is a subclass of \n<a href=\"http://search.cpan.org/dist/HTML-Parser/Parser.pm\" rel=\"nofollow noreferrer\">HTML::Parser</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "is_accepted": false, "score": 0, "last_activity_date": 1467921131, "creation_date": 1467921131, "answer_id": 38254160, "question_id": 35644092, "link": "https://stackoverflow.com/questions/35644092/global-matching-regex-hanging/38254160#38254160", "title": "Global matching regex hanging", "body": "<p>Your regex requires the sixth column to contain <code>&lt;nobr&gt;...&lt;/nobr&gt;</code> tags, which only happens in the first two rows. It hangs after that because non-greedy quantifiers can only do so much.  When no match is possible, they're just as susceptible to catastrophic backtracking as the greedy variety.  </p>\n\n<p>Instead of relying on <code>.*?</code> all the time, try to be specific about what you <em>don't</em> want to match.  In this case, that's simple: the TD's you're matching never contain other tags, so you can use <code>[^&lt;&gt;]*</code> to capture their contents.  In fact, you should use that everywhere you're currently using <code>.*?</code>.</p>\n\n<p>In the regex below, I also made the NOBR tags optional, plus I extended it to match the whole opening TR tag, more for readability's sake that anything else.</p>\n\n<pre><code>while ($content =~ \n  m!&lt;tr\\s+class=\"rgRow[^&lt;&gt;]*&gt;\\s*\n    &lt;td[^&lt;&gt;]*&gt;([^&lt;&gt;]*)&lt;/td&gt;\n    &lt;td[^&lt;&gt;]*&gt;([^&lt;&gt;]*)&lt;/td&gt;\n    &lt;td[^&lt;&gt;]*&gt;([^&lt;&gt;]*)&lt;/td&gt;\n    &lt;td[^&lt;&gt;]*&gt;[^&lt;&gt;]*&lt;/td&gt;\n    &lt;td[^&lt;&gt;]*&gt;([^&lt;&gt;]*)&lt;/td&gt;\n    &lt;td[^&lt;&gt;]*&gt;(?:&lt;nobr&gt;)?([^&lt;&gt;]*)(?:&lt;/nobr&gt;)?&lt;/td&gt;\n  !sxg) {\n    # do stuff\n}\n</code></pre>\n"}], "owner": {"reputation": 20550, "user_id": 327528, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/dfea36f0a3ab8c5f8ad73bcc6cea241a?s=128&d=identicon&r=PG", "display_name": "CJ7", "link": "https://stackoverflow.com/users/327528/cj7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 1, "answer_count": 2, "score": -4, "last_activity_date": 1501821973, "creation_date": 1456464186, "last_edit_date": 1456542903, "question_id": 35644092, "link": "https://stackoverflow.com/questions/35644092/global-matching-regex-hanging", "title": "Global matching regex hanging", "body": "<p>I have the following perl code:</p>\n\n<pre><code># $content is the text of a webpage\nwhile ($content =~ /rgRow.*?&lt;td&gt;(.*?)&lt;\\/td&gt;&lt;td.*?&gt;(.*?)&lt;\\/td&gt;&lt;td.*?&gt;(.*?)&lt;\\/td&gt;&lt;td.*?&gt;.*?&lt;\\/td&gt;&lt;td.*?&gt;(.*?)&lt;\\/td&gt;&lt;td.*?&gt;&lt;nobr&gt;(.*?)&lt;\\/nobr&gt;&lt;\\/td&gt;/sg) {\n   # do stuff\n}\n</code></pre>\n\n<p>I have worked out that the code is hanging at this regex call.  It gets about 2-3 iterations into the while loop and then it just hangs.  I have left it for about 30 mins and it has not proceeded.</p>\n\n<p>What could be the problem?</p>\n\n<p>The purpose of the code is to go through some HTML and extract some data out of it.</p>\n\n<p>Here is the HTML that I am setting <code>$content</code> to:</p>\n\n<pre><code>&lt;tbody&gt;\n        &lt;tr class=\"rgRow InnerItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__0\"&gt;\n            &lt;td&gt;CONSIDERATION OF REPORTS SUBMITTED BY STATES PARTIES UNDER ARTICLE 9 OF THE CONVENTION : SECOND PERIODIC REPORT OF STATES PARTIES DUE IN 1974 / MOROCCO&lt;/td&gt;&lt;td&gt;State party's report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Morocco&lt;/td&gt;&lt;td&gt;CERD/C/R.65/Add.1&lt;/td&gt;&lt;td&gt;&lt;nobr&gt;21 Feb 1974&lt;/nobr&gt;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl04_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=CERD%2fC%2fR.65%2fAdd.1&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;E&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;CERD/C/R.65/Add.1&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerAlernatingItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__1\"&gt;\n            &lt;td&gt;CONSIDERATION OF REPORTS SUBMITTED BY STATES PARTIES UNDER ARTICLE 9 OF THE CONVENTION : INITIAL REPORTS OF STATES PARTIES WHICH ARE DUE IN 1972 / MOROCCO&lt;/td&gt;&lt;td&gt;State party's report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Morocco&lt;/td&gt;&lt;td&gt;CERD/C/R.33/Add.1&lt;/td&gt;&lt;td&gt;&lt;nobr&gt;17 Jan 1972&lt;/nobr&gt;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl06_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=CERD%2fC%2fR.33%2fAdd.1&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;E&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;CERD/C/R.33/Add.1&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__2\"&gt;\n            &lt;td&gt;Annex I to ALGERIA's Report&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Algeria&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl08_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fAIS%2fDZA%2f13691&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;E&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_AIS_DZA_13691_E.doc&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/AIS/DZA/13691&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerAlernatingItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__3\"&gt;\n            &lt;td&gt;Annex II to ALGERIA's report&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Algeria&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl10_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fAIS%2fDZA%2f13692&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;E&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_AIS_DZA_13692_E.doc&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/AIS/DZA/13692&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__4\"&gt;\n            &lt;td&gt;Annex III to ALGERIA's report&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Algeria&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl12_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fAIS%2fDZA%2f13693&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;E&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_AIS_DZA_13693_E.doc&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/AIS/DZA/13693&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerAlernatingItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__5\"&gt;\n            &lt;td&gt;CERD-C-NZ-18-20_Annexes&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;New Zealand&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl14_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fADR%2fNZL%2f13731&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;E&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_ADR_NZL_13731_E.doc&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/ADR/NZL/13731&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__6\"&gt;\n            &lt;td&gt;CERD.C.RUS.20-22_Annex1&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Russian Federation&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl16_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fADR%2fRUS%2f13732&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;R&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_ADR_RUS_13732_R.doc&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/ADR/RUS/13732&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerAlernatingItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__7\"&gt;\n            &lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Poland&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl18_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fADR%2fPOL%2f15432&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;E&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_ADR_POL_15432_E.doc&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/ADR/POL/15432&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__8\"&gt;\n            &lt;td&gt;Annexe X&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Belgium&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl20_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fADR%2fBEL%2f15561&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;F&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_ADR_BEL_15561_F.pdf&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/ADR/BEL/15561&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n        &lt;/tr&gt;&lt;tr class=\"rgRow InnerAlernatingItemStyle\" id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00__9\"&gt;\n            &lt;td&gt;Annexe XI&lt;/td&gt;&lt;td&gt;Annex to State party report&lt;/td&gt;&lt;td&gt;CERD&lt;/td&gt;&lt;td&gt;Belgium&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td&gt;\n                                            &lt;a id=\"ctl00_PlaceHolderMain_radResultsGrid_ctl00_ctl22_MoreDocs\" title=\"View document\" href=\"http://tbinternet.ohchr.org/_layouts/treatybodyexternal/Download.aspx?symbolno=INT%2fCERD%2fADR%2fBEL%2f15562&amp;amp;Lang=en\" target=\"_blank\" style=\"text-decoration:underline;\"&gt;View document&lt;/a&gt;&amp;nbsp; \n                                        &lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;F&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT_CERD_ADR_BEL_15562_F.pdf&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;INT/CERD/ADR/BEL/15562&lt;/td&gt;&lt;td style=\"display:none;\"&gt;&amp;nbsp;&lt;/td&gt;&lt;td style=\"display:none;\"&gt;True&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>I am trying the following line to see how it goes instead:</p>\n\n<pre><code>while ($content =~ m/rgRow.+?&lt;td&gt;(.+?)&lt;\\/td&gt;&lt;td&gt;(.+?)&lt;\\/td&gt;&lt;td&gt;(.+?)&lt;\\/td&gt;&lt;td&gt;(.+?)&lt;\\/td&gt;&lt;td&gt;(.+?)&lt;\\/td&gt;&lt;td&gt;(.+?)&lt;\\/td&gt;/gs)\n</code></pre>\n\n<p>The original code was not mine.</p>\n"}, {"tags": ["perl", "data-structures", "hash", "subroutine"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456446525, "post_id": 35641054, "comment_id": 58963794, "body": "It doesn&#39;t look like you&#39;ve tried anything so far. How do you think you should go about it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456446780, "post_id": 35641054, "comment_id": 58963847, "body": "I have tried to use <code>my ($UsersToCheck) = shift @_;     inituserlogins() unless %loginData;     return $loginData{$UsersToCheck} ? $loginData{$UsersToCheck} : 0;</code> but in this case I have to pass usernames to script, which is not allowed."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456447185, "post_id": 35641054, "comment_id": 58963957, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8782038/sort-hash-keys-of-nested-hash\">Sort hash keys of nested hash</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "edited": false, "score": 0, "creation_date": 1456446668, "post_id": 35641125, "comment_id": 58963822, "body": "Thank you for answer, could you provide any example of what you are saying?"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456447442, "post_id": 35641125, "comment_id": 58964040, "body": "<code>map { [ $hash{$_}-&gt;{logins}, $_ ] }</code> should be <code>map { [ $hash-&gt;{$_}{logins}, $_ ] }</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "edited": false, "score": 0, "creation_date": 1456448013, "post_id": 35641125, "comment_id": 58964197, "body": "Where does my $hash get values from? Can&#39;t fit into my script due errors."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456453923, "post_id": 35641125, "comment_id": 58965841, "body": "@ChrisCharley That&#39;s an optional shorthand, I believe. It runs fine as-is in my Perl."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1456454119, "post_id": 35641125, "comment_id": 58965890, "body": "@MagomedSegaIsmailov You really need to do more learning about the Perl language.  See the complete code above."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456461400, "post_id": 35641125, "comment_id": 58968056, "body": "Odd. When run under <code>use strict</code>, it won&#39;t compile with msg. <i>Global symbol &quot;%hash&quot; requires explicit package name at t33.pl line 29 Execution of t33.pl aborted due to compilation errors.</i>. Wonder why it works ok without strict. I think it should not recognize <code>%hash</code> even when not run under <code>strict</code>."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456546823, "post_id": 35641125, "comment_id": 59011287, "body": "@ChrisCharley Sorry there was a missing <code>-&gt;</code>.  Ought to be okay now. Not sure why it worked at all. Perl is a beast."}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1456546982, "post_id": 35641125, "comment_id": 59011317, "body": "Yes Gene, I was working with it today to try to understand the behavior."}], "tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": false, "score": 0, "last_activity_date": 1456547263, "last_edit_date": 1456547263, "creation_date": 1456446504, "answer_id": 35641125, "question_id": 35641054, "link": "https://stackoverflow.com/questions/35641054/perl-sort-values-in-multidimensional-hash/35641125#35641125", "title": "Perl: Sort values in multidimensional hash", "body": "<p>You can't sort a hash. From the Perl docs:</p>\n\n<blockquote>\n  <p>Hash entries are returned in an apparently random order. </p>\n</blockquote>\n\n<p>You can, compute a list of keys that index the hash in the order you like. </p>\n\n<p>Something like this:</p>\n\n<pre><code>use Data::Dumper;\n\nour $hash = {\n     'user1' =&gt; {\n             'oldpassword' =&gt; 0,\n             'filesize' =&gt; '14360',\n             'logins' =&gt; 1\n      },\n      'user2' =&gt; {\n             'oldpassword' =&gt; 0,\n             'filesize' =&gt; '1220',\n             'logins' =&gt; 15\n      },\n      'user3' =&gt; {\n             'oldpassword' =&gt; 1,\n             'filesize' =&gt; '1780',\n             'logins' =&gt; 7\n      }\n};\n\nsub KeysByLogins {\n  my $hash = shift;\n  map { $_-&gt;[1] }\n  sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] }\n  map { [ $hash-&gt;{$_}-&gt;{logins}, $_ ] } keys %$hash;\n}\n\nforeach my $key (KeysByLogins($hash)) {\n  print Data::Dumper-&gt;Dump([$hash-&gt;{$key}], [$key]) . \"\\n\";\n}\n</code></pre>\n\n<p>Then...</p>\n\n<pre><code>$ perl foo.pl\n$user3 = {\n           'oldpassword' =&gt; 1,\n           'logins' =&gt; 7,\n           'filesize' =&gt; '1780'\n         };\n\n$user2 = {\n           'filesize' =&gt; '1220',\n           'logins' =&gt; 15,\n           'oldpassword' =&gt; 0\n         };\n\n$user1 = {\n           'filesize' =&gt; '14360',\n           'logins' =&gt; 1,\n           'oldpassword' =&gt; 0\n         };\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2690, "user_id": 5869736, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b18e361761e0643fd9003f9eae40ba45?s=128&d=identicon&r=PG&f=1", "display_name": "Marty", "link": "https://stackoverflow.com/users/5869736/marty"}, "edited": false, "score": 0, "creation_date": 1456448164, "post_id": 35641184, "comment_id": 58964243, "body": "Your answer is correct IMHO, just one nitpick: DataDumper called the array $VAR1 - maybe better to refer to the hash as %loginData"}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 2, "last_activity_date": 1456460592, "last_edit_date": 1456460592, "creation_date": 1456446837, "answer_id": 35641184, "question_id": 35641054, "link": "https://stackoverflow.com/questions/35641054/perl-sort-values-in-multidimensional-hash/35641184#35641184", "title": "Perl: Sort values in multidimensional hash", "body": "<p>Here's a canonical solution for accessing elements of a hash in some order based on an attribute of the value (in this case <code>logins</code>):</p>\n\n<pre><code>for (sort { $loginData{$b}-&gt;{logins} &lt;=&gt;  $loginData{$a}-&gt;{logins} } keys %loginData)\n{\n    ... \n}\n</code></pre>\n\n<p>Note reversal of <code>$b</code> and <code>$a</code> to achieve a reverse sort (most logins first).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4839151"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456547263, "creation_date": 1456446077, "last_edit_date": 1456450390, "question_id": 35641054, "link": "https://stackoverflow.com/questions/35641054/perl-sort-values-in-multidimensional-hash", "title": "Perl: Sort values in multidimensional hash", "body": "<p>I have a subroutine that looks likes this:</p>\n\n<pre><code>...\n\nsub UserLogins { \n  my %loginData; \n  my @logins = qx(last) or die;\n\n  foreach my $row (@logins) {\n    if ( $row=~ /^(\\w+)\\s+/ and ((\"$1\" ne \"reboot\") and (\"$1\" ne \"wtmp\")) ) {\n      $loginData{$1}{\"logins\"}++; \n    }\n  }\n\nreturn \\%loginData\n}\n\n...\n</code></pre>\n\n<p>Using this subroutine in main script, I get following output:</p>\n\n<pre><code>...\n\n$VAR1 = {\n     'user1' =&gt; {\n             'oldpassword' = 0,\n             'filesize' =&gt; '14360',\n             'logins' =&gt; 1\n      },\n      'user2' =&gt; {\n             'oldpassword' = 0,\n             'filesize' =&gt; '1220',\n             'logins' =&gt; 15\n      },\n      'user3' =&gt; {\n             'oldpassword' = 1,\n             'filesize' =&gt; '1780',\n             'logins' =&gt; 7\n      }\n}\n\n...\n</code></pre>\n\n<p>I wonder how I should sort my <code>%loginData</code> hash so user with largest number of logins gets printed first (in this case user2, user3, user1). </p>\n\n<p>I have also tried to sort values in this way:</p>\n\n<pre><code>foreach my $test_sort (sort {$a &lt;=&gt; $b} values %loginData) {\n    say $test_sort;\n}\n</code></pre>\n\n<p>But this function doesn't work at all.</p>\n\n<p>Another thing I tried and didn't work:</p>\n\n<pre><code>print \"$_\\n\" foreach sort {$loginData{$b}-&gt;{logins} &lt;=&gt; $loginData{$a}-&gt;{logins}} keys %loginData;\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>This function actually works, but shows errors massages:</p>\n\n<pre><code>print \"$_\\n\" foreach sort {$userData{$b}-&gt;{'logins'} &lt;=&gt; $userData{$a}-&gt;{'logins'}} keys %userData;\n</code></pre>\n\n<p>Errors: </p>\n\n<pre><code>Use of uninitialized values in numeric comparison (&lt;=&gt;)\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456442631, "post_id": 35640127, "comment_id": 58962355, "body": "What kind of structure are you trying to parse this data into?"}, {"owner": {"reputation": 53, "user_id": 5816202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc8ba3b46c0988692d0cf2a4de0a79?s=128&d=identicon&r=PG&f=1", "display_name": "DaveS", "link": "https://stackoverflow.com/users/5816202/daves"}, "reply_to_user": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 0, "creation_date": 1456443079, "post_id": 35640127, "comment_id": 58962500, "body": "Typically I would do a hash with an array. In this case my key would be the number field which should be unique throughout the file and the array would be the fields that follow until the next number field."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456445114, "post_id": 35640127, "comment_id": 58963326, "body": "So you want to process many files with this?  Each would populate its own number-key with an array-ref?  (It&#39;d be probably more readable if it had a hash-ref, keyed by the field names.)  If it is an array, you put a ... zero/empty string when there is no such record?  This should be (relatively) straightforward, did you try something? Is it not working or do you not know how to do it?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1456445394, "post_id": 35640127, "comment_id": 58963423, "body": "Is what you show in one file, or are you showing many (3) files?  Does every section &quot;Net Number Ass..&quot; has its own (unique) number?"}, {"owner": {"reputation": 53, "user_id": 5816202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc8ba3b46c0988692d0cf2a4de0a79?s=128&d=identicon&r=PG&f=1", "display_name": "DaveS", "link": "https://stackoverflow.com/users/5816202/daves"}, "edited": false, "score": 0, "creation_date": 1456492169, "post_id": 35640127, "comment_id": 58985279, "body": "This is a sample of 3 of the records that are all in one file.  The file actually contains 1000s of records."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5816202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc8ba3b46c0988692d0cf2a4de0a79?s=128&d=identicon&r=PG&f=1", "display_name": "DaveS", "link": "https://stackoverflow.com/users/5816202/daves"}, "edited": false, "score": 0, "creation_date": 1456493465, "post_id": 35640930, "comment_id": 58986167, "body": "Logically this is probably how I would have tackled this after many many hours of frustration.  I am a database guy who is used to all the data being on one line with a comma or a tab as a separator.  Thanks for the help."}], "tags": [], "owner": {"reputation": 80882, "user_id": 18157, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d3de78b198076dd5a5006abd17cb0f8?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Garrison", "link": "https://stackoverflow.com/users/18157/jim-garrison"}, "is_accepted": false, "score": 1, "last_activity_date": 1456445384, "creation_date": 1456445384, "answer_id": 35640930, "question_id": 35640127, "link": "https://stackoverflow.com/questions/35640127/using-perl-to-read-non-delimited-text-file/35640930#35640930", "title": "Using Perl to read non-delimited text file", "body": "<p>This is conceptually simple but somewhat tedious.  The canonical version of this type of parsing solution looks like this:</p>\n\n<pre><code>#!/usr/bin/perl\nmy $all = {};  # A hash to hold all number entries indexed by IP\nmy $cur = {};  # A hash to hold the current entry we are parsing\nwhile(&lt;&gt;)\n{\n    chomp;\n    if (my ($ip) = /^Number\\s+(.*)/)\n    {\n        # If we have a current entry, save it in the $all hash\n        $all-&gt;{$cur-&gt;{number}} = $cur if ($cur-&gt;{number});\n\n        $cur = {};\n        $cur-&gt;{number} = $ip;\n    }\n    elsif (my ($mask) = /^Netmask in \\/## Form\\s+(\\d+)/)\n    {\n        $cur-&gt;{mask} = $mask;\n    }\n    elsif ... # Handle remaining input line types, saving what you want in $cur\n}\n# This is to save the last entry\n$all-&gt;{$cur-&gt;{number}} = $cur if ($cur-&gt;{number});\n\n# Your code to process the accumulated entries\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5816202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc8ba3b46c0988692d0cf2a4de0a79?s=128&d=identicon&r=PG&f=1", "display_name": "DaveS", "link": "https://stackoverflow.com/users/5816202/daves"}, "edited": false, "score": 0, "creation_date": 1456493380, "post_id": 35641083, "comment_id": 58986109, "body": "You make it look so easy."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 2, "last_activity_date": 1456446268, "creation_date": 1456446268, "answer_id": 35641083, "question_id": 35640127, "link": "https://stackoverflow.com/questions/35640127/using-perl-to-read-non-delimited-text-file/35641083#35641083", "title": "Using Perl to read non-delimited text file", "body": "<p>I would recommend an array of hashes as the ideal data structure for the file you've presented. </p>\n\n<p>We set the <a href=\"http://perldoc.perl.org/perlvar.html#%24INPUT_RECORD_SEPARATOR\" rel=\"nofollow\">input record separator</a> to <code>''</code> to treat two or more consecutive empty lines as a single empty line. Then, within each record, we just <code>split</code> each line by two or more spaces, which preserves your keys that contain spaces. The <code>split</code> is limited to 2 fields total to prevent additional fields from being created for values that contain two or more consecutive spaces (e.g., <code>ITG  INTERNAL</code>).</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dump;\n\nlocal $/ = '';\nmy @data;\n\nwhile (&lt;DATA&gt;) {\n    chomp;\n    next if $_ eq 'Net Number Assignments';\n    my %record;\n\n    for my $line (split(/\\n/)) {\n        my ($key, $value) = split(/\\s\\s+/, $line, 2);\n        $record{$key} = $value;\n    }\n\n    push(@data, \\%record);\n}\n\ndd(\\@data);\n\n__DATA__\nNet Number Assignments\n\n\nNumber  xxx.xxx.xxx.xxx\nNetmask in /## Form     30\nType    IP\nStatus  InUse\nDescription     mpirpd-cjdn\nNotes   mgmt\nEntry-Id        000000000026450\nSubmitter       John Doe\nCreate-date     2009-07-01-13:55:24\nContact-Data    INTERNAL/555-555-5555\nContact-Id      CON-000028508\n\n\n\n\nNet Number Assignments\n\n\nNumber  xxx.xxx.xxx.xxx\nNetmask in /## Form     32\nType    IP\nStatus  InUse\nDescription     switch Lo0 -- switch unnamed\nNotes   Reverved for Lan Management Loop Backs and links\nEntry-Id        000000000032710\nSubmitter       John Doe\nCreate-date     2015-11-25-10:59:27\nLast-modified-by        John Doe\nModified-date   2015-11-25-11:30:06\nContact-Data    INTERNAL/555-555-5555\nContact-Id      CON-000028508\n\n\n\n\nNet Number Assignments\n\n\nNumber  xxx.xxx.xxx.xxx\nNetmask in /## Form     32\nType    IP\nStatus  InUse\nDescription     mplsfe9-hub\nArea    mpls\nEntry-Id        000000000024150\nSubmitter       Russ Reilly\nCreate-date     2007-05-02-18:26:20\nLast-modified-by        John Doe\nModified-date   2013-05-06-19:09:37\nContact Name    ITG  INTERNAL\nContact Phone   555-555-5555\nContact E-mail  me@home.com\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[\n  {\n    \"Contact-Data\"        =&gt; \"INTERNAL/555-555-5555\",\n    \"Contact-Id\"          =&gt; \"CON-000028508\",\n    \"Create-date\"         =&gt; \"2009-07-01-13:55:24\",\n    \"Description\"         =&gt; \"mpirpd-cjdn\",\n    \"Entry-Id\"            =&gt; \"000000000026450\",\n    \"Netmask in /## Form\" =&gt; 30,\n    \"Notes\"               =&gt; \"mgmt\",\n    \"Number\"              =&gt; \"xxx.xxx.xxx.xxx\",\n    \"Status\"              =&gt; \"InUse\",\n    \"Submitter\"           =&gt; \"John Doe\",\n    \"Type\"                =&gt; \"IP\",\n  },\n  {\n    \"Contact-Data\"        =&gt; \"INTERNAL/555-555-5555\",\n    \"Contact-Id\"          =&gt; \"CON-000028508\",\n    \"Create-date\"         =&gt; \"2015-11-25-10:59:27\",\n    \"Description\"         =&gt; \"switch Lo0 -- switch unnamed\",\n    \"Entry-Id\"            =&gt; \"000000000032710\",\n    \"Last-modified-by\"    =&gt; \"John Doe\",\n    \"Modified-date\"       =&gt; \"2015-11-25-11:30:06\",\n    \"Netmask in /## Form\" =&gt; 32,\n    \"Notes\"               =&gt; \"Reverved for Lan Management Loop Backs and links\",\n    \"Number\"              =&gt; \"xxx.xxx.xxx.xxx\",\n    \"Status\"              =&gt; \"InUse\",\n    \"Submitter\"           =&gt; \"John Doe\",\n    \"Type\"                =&gt; \"IP\",\n  },\n  {\n    \"Area\"                =&gt; \"mpls\",\n    \"Contact E-mail\"      =&gt; \"me\\@home.com\",\n    \"Contact Name\"        =&gt; \"ITG  INTERNAL\",\n    \"Contact Phone\"       =&gt; \"555-555-5555\",\n    \"Create-date\"         =&gt; \"2007-05-02-18:26:20\",\n    \"Description\"         =&gt; \"mplsfe9-hub\",\n    \"Entry-Id\"            =&gt; \"000000000024150\",\n    \"Last-modified-by\"    =&gt; \"John Doe\",\n    \"Modified-date\"       =&gt; \"2013-05-06-19:09:37\",\n    \"Netmask in /## Form\" =&gt; 32,\n    \"Number\"              =&gt; \"xxx.xxx.xxx.xxx\",\n    \"Status\"              =&gt; \"InUse\",\n    \"Submitter\"           =&gt; \"Russ Reilly\",\n    \"Type\"                =&gt; \"IP\",\n  },\n]\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5816202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96bc8ba3b46c0988692d0cf2a4de0a79?s=128&d=identicon&r=PG&f=1", "display_name": "DaveS", "link": "https://stackoverflow.com/users/5816202/daves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 35641083, "answer_count": 2, "score": 0, "last_activity_date": 1456455935, "creation_date": 1456441135, "last_edit_date": 1456441692, "question_id": 35640127, "link": "https://stackoverflow.com/questions/35640127/using-perl-to-read-non-delimited-text-file", "title": "Using Perl to read non-delimited text file", "body": "<p>I have a file that has a standard input but in a form that I haven't tried to read into a Perl program before.</p>\n\n<p>The format of the file is this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Net Number Assignments\n\n\nNumber  xxx.xxx.xxx.xxx\nNetmask in /## Form     30\nType    IP\nStatus  InUse\nDescription     mpirpd-cjdn\nNotes   mgmt\nEntry-Id        000000000026450\nSubmitter       John Doe\nCreate-date     2009-07-01-13:55:24\nContact-Data    INTERNAL/555-555-5555\nContact-Id      CON-000028508\n\n\n\n\nNet Number Assignments\n\n\nNumber  xxx.xxx.xxx.xxx\nNetmask in /## Form     32\nType    IP\nStatus  InUse\nDescription     switch Lo0 -- switch unnamed\nNotes   Reverved for Lan Management Loop Backs and links\nEntry-Id        000000000032710\nSubmitter       John Doe\nCreate-date     2015-11-25-10:59:27\nLast-modified-by        John Doe\nModified-date   2015-11-25-11:30:06\nContact-Data    INTERNAL/555-555-5555\nContact-Id      CON-000028508\n\n\n\n\nNet Number Assignments\n\n\nNumber  xxx.xxx.xxx.xxx\nNetmask in /## Form     32\nType    IP\nStatus  InUse\nDescription     mplsfe9-hub\nArea    mpls\nEntry-Id        000000000024150\nSubmitter       Russ Reilly\nCreate-date     2007-05-02-18:26:20\nLast-modified-by        John Doe\nModified-date   2013-05-06-19:09:37\nContact Name    ITG  INTERNAL\nContact Phone   555-555-5555\nContact E-mail  me@home.com\n</code></pre>\n\n<p>Not all of the fields are always used (example: Contact Name and Contact Phone could be missing in the next record).</p>\n\n<p>I don't necessarily need the field headings as they are consistently in the same location for each record.</p>\n\n<p>I am sure this has been done before and probably has a simple solution so I am asking the question before I recreate the wheel.  </p>\n"}]