[{"tags": ["perl", "testing"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485382938, "post_id": 41862725, "comment_id": 70909282, "body": "Test::More has <a href=\"https://metacpan.org/pod/Test::More#Module-tests\" rel=\"nofollow noreferrer\"><code>use_ok</code></a> and <code>require_ok</code>...is there any particular reason you&#39;re using Test.pm instead of Test::More? Test::More is pretty standard."}, {"owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485383098, "post_id": 41862725, "comment_id": 70909353, "body": "I am using <code>Test::More</code>. I did try those tests but they only seem to see if my test script can load the package. I&#39;d like to test if my target script, run from another file, is loading the package."}], "answers": [{"tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": true, "score": 3, "last_activity_date": 1485383227, "creation_date": 1485383227, "answer_id": 41862816, "question_id": 41862725, "link": "https://stackoverflow.com/questions/41862725/write-a-test-to-ensure-perl-script-loads-a-particular-module/41862816#41862816", "title": "Write a test to ensure Perl script loads a particular module", "body": "<p>If I'm understanding you correctly, you want to check whether a piece of code loads a certain module.</p>\n\n<p>You can do that by running the piece of code, then checking <a href=\"http://perldoc.perl.org/perlvar.html#%INC\" rel=\"nofollow noreferrer\"><code>%INC</code></a> afterwards:</p>\n\n<pre><code># run your script (e.g. via 'do' or 'require')\n# ...\n\nok $INC{'URI/URL.pm'}, \"URI::URL was loaded\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485384305, "post_id": 41862953, "comment_id": 70909889, "body": "This works fine in this context, but beware: In list context, <code>is_loaded</code> returns nothing (an empty list) on failure (instead of false). This weird behavior is undocumented and can trip you up: <code>foo(is_loaded(&quot;Weird::Stuff&quot;))</code> actually calls <code>foo()</code> without arguments."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485386168, "post_id": 41862953, "comment_id": 70910586, "body": "@zdim It&#39;s all fun and games until you do something like <code>my %hash = (foo =&gt; 1, bar =&gt; is_loaded($module), baz =&gt; 2)</code> and then <code>is_loaded</code> suddenly returns an empty list and your subsequent keys become values and vice versa. And then you have a security hole in your bugzilla or CGI code (see the infamous &quot;Perl Jam&quot; talk). There the culprit was <code>$cgi-&gt;param()</code>, which is at least documented to return a list!"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485386700, "post_id": 41862953, "comment_id": 70910764, "body": "@zdim No, if <code>is_loaded</code> always returns a scalar (including <code>undef</code>), all is fine."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1485388397, "post_id": 41862953, "comment_id": 70911239, "body": "@melpomene: You will find that a large number of library subroutines do exactly the same thing, because that is what a bare <code>return</code> statement does by design. Your example of building a list that includes a subroutine call is not a problem with the module, but a mistake in coding the list. <code>bar =&gt; scalar is_loaded($module)</code> would be correct. The difference is at the heart of the Perl language, and is far from being <i>weird behaviour</i>."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485465595, "post_id": 41862953, "comment_id": 70948620, "body": "@Borodin It is a problem with the module because all built-in boolean-result operators always return 1 value. The name <code>is_loaded</code> implies the function is a predicate (and so does its documentation). Nothing indicates the function goes out of its way to do a bare <code>return;</code> to return &quot;false&quot;. Speaking generally, IMHO when you&#39;re writing a subroutine, you should decide up front whether it returns exactly one value or a list (multiple values). Playing games with <code>wantarray</code> (or bare <code>return</code>) should be done very sparingly, because it is so error prone: Most people don&#39;t add <code>scalar</code> everywhere."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485465950, "post_id": 41862953, "comment_id": 70948828, "body": "@Borodin PS: Lots of things in Perl are weird :-). That includes scalar <code>..</code> (and <code>...</code>), <code>reset</code>, hashes in scalar context, <code>open</code> using a normal return value <i>and</i> an output parameter <i>and</i> a global variable to communicate results back to its caller, etc. That doesn&#39;t mean you have to use them. (I know Damian Conway recommends <code>return;</code> in PBP, but this is one thing I think he got completely backwards.)"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485471324, "post_id": 41862953, "comment_id": 70951317, "body": "@melpomene: Then I think it&#39;s fair to say that you&#39;re in the minority and simply don&#39;t &quot;get&quot; Perl. Perhaps you shouldn&#39;t be answering questions on a language you think is so weird. A lot of it falls into place if you remember that it&#39;s structured around  a natural language grammar."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485472115, "post_id": 41862953, "comment_id": 70951651, "body": "@Borodin &quot;<i>Perhaps you shouldn&#39;t be answering questions on a language you think is so weird</i>&quot; - Dude, I know Perl (and (parts of) perl), I like Perl, and I like helping people with Perl. I didn&#39;t know that being a fanboy was a requirement, too."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485548599, "post_id": 41862953, "comment_id": 70986979, "body": "@melpomene: I just think it detracts from any answers you write if you can&#39;t resist making irrelevant comments on the weirdness of the language."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1485549351, "post_id": 41862953, "comment_id": 70987348, "body": "@melpomene  Design wise, I think that equally good arguments can be made for both.  In a language that allows flat list returns (and uses them liberally) I find it natural to get an empty list for false. As for a function <code>is_...</code> I expect a scalar use so I&#39;ll be careful if it&#39;s in a list context. But if I may want a list back I&#39;d rather have an empty one. I agree that it may get tricky but Perl freely mixes low and high level features so that&#39;s not so unusual. I completely agree that module docs should make a clear statement."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485610908, "post_id": 41862953, "comment_id": 71002068, "body": "@Borodin My original comment called the semantics of <code>is_loaded</code> weird. This has nothing to do with the language."}], "tags": [], "owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "is_accepted": false, "score": 4, "last_activity_date": 1485383895, "last_edit_date": 1485383895, "creation_date": 1485383691, "answer_id": 41862953, "question_id": 41862725, "link": "https://stackoverflow.com/questions/41862725/write-a-test-to-ensure-perl-script-loads-a-particular-module/41862953#41862953", "title": "Write a test to ensure Perl script loads a particular module", "body": "<p>It might be better to use the module <code>Module::Loaded</code> instead of parsing <code>%INC</code>. It is a core module since perl 5.9.4.</p>\n\n<p><a href=\"http://perldoc.perl.org/Module/Loaded.html\" rel=\"nofollow noreferrer\">http://perldoc.perl.org/Module/Loaded.html</a></p>\n\n<pre><code>use Module::Loaded;\n\nif (is_loaded('URI::URL')) {\n  print \"Is loaded\\n\";\n} else {\n  print \"Is NOT loaded\\n\";\n}\n</code></pre>\n\n<p>Hope that solves your problem.</p>\n"}], "owner": {"reputation": 2287, "user_id": 1641112, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/00bee18fb974a0057fb61a56faf66052?s=128&d=identicon&r=PG", "display_name": "StevieD", "link": "https://stackoverflow.com/users/1641112/stevied"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 41862816, "answer_count": 2, "score": 0, "last_activity_date": 1485383895, "creation_date": 1485382802, "last_edit_date": 1485382970, "question_id": 41862725, "link": "https://stackoverflow.com/questions/41862725/write-a-test-to-ensure-perl-script-loads-a-particular-module", "title": "Write a test to ensure Perl script loads a particular module", "body": "<p>I'm writing a testing script using CPAN's <a href=\"https://metacpan.org/pod/Test\" rel=\"nofollow noreferrer\"><code>Test</code></a> module. I'd like the script to test to see if my program loads the URI::URL package. Is this possible?</p>\n"}, {"tags": ["list", "perl", "hash"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 1, "creation_date": 1485377763, "post_id": 41860863, "comment_id": 70906684, "body": "The 3rd error (that you haven&#39;t gotten to yet): line 11 you&#39;re passing a structure with a <code>structures</code> key, not <code>structure</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485380117, "post_id": 41860863, "comment_id": 70907888, "body": "Bug: <code>ref($s) eq &quot;LIST&quot;</code> should be <code>ref($s) eq &quot;ARRAY&quot;</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485380177, "post_id": 41860863, "comment_id": 70907918, "body": "Tip: <code>$s-&gt;[$c] = addtwo({ structures =&gt; $e });</code> should be <code>push @$s, addtwo({ structures =&gt; $e });</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1485380570, "post_id": 41860863, "comment_id": 70908100, "body": "@user3047080: I think you&#39;ve written far too much at once. Writing a program generally proceeds in tiny steps: you should enter a few lines and run your program to make sure that it compiles and runs. Then you have something to build on. The pyramids weren&#39;t built by putting millions of stone blocks in place and then running away, fingers crossed."}], "answers": [{"comments": [{"owner": {"reputation": 2674, "user_id": 4745607, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/I9Qwp.jpg?s=128&g=1", "display_name": "Devendra Singh", "link": "https://stackoverflow.com/users/4745607/devendra-singh"}, "edited": false, "score": 0, "creation_date": 1535136167, "post_id": 41862007, "comment_id": 90970982, "body": "Would you please elaborate some more?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1485381632, "last_edit_date": 1485381632, "creation_date": 1485379808, "answer_id": 41862007, "question_id": 41860863, "link": "https://stackoverflow.com/questions/41860863/having-hash-reference-issue-with-perl/41862007#41862007", "title": "Having HASH reference issue with perl", "body": "<p><strong><em>Please</em></strong> add <code>use strict</code> and <code>use warnings 'all'</code> to the top of <em>every</em> Perl program you write. It's not a beginner's safety net: it's essential for any professional programming</p>\n\n<p>As well as <code>%s</code>, you haven't declared <code>$c</code> or <code>$e</code>, and there's very little point in using <code>my</code> at all unless you have at least <code>use strict</code> in effect</p>\n\n<p>To offer a \"solution\" would be to rewrite most of what you have put down, so I think it's best that you implement the advice that you've been given so far</p>\n\n<p>But please do try, as I wrote in my comment, to write tiny bits of your program at a time, and to make sure that you have a solid basis when you want to add some more functionality</p>\n"}], "owner": {"reputation": 3, "user_id": 3047080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3cd187df560ae90f5e72328dedfe3fa?s=128&d=identicon&r=PG&f=1", "display_name": "user3047080", "link": "https://stackoverflow.com/users/3047080/user3047080"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 41862007, "answer_count": 1, "score": 0, "last_activity_date": 1485381632, "creation_date": 1485375304, "last_edit_date": 1485380239, "question_id": 41860863, "link": "https://stackoverflow.com/questions/41860863/having-hash-reference-issue-with-perl", "title": "Having HASH reference issue with perl", "body": "<p>Having the following errors:</p>\n\n<blockquote>\n  <p>Name \"main::s\" used only once: possible typo at line 22.</p>\n  \n  <p>Not a HASH reference at line 5.</p>\n</blockquote>\n\n<pre><code>sub addtwo {\n\n    my $params = shift;\n\n    my $s = $params-&gt;{structure};\n\n    if ( ref( $s ) eq \"LIST\" ) {\n\n        $c = 0;\n\n        foreach $e ( @{$s} ) {\n            $s-&gt;[$c] = addtwo( { structures =&gt; $e } );\n            $c++;\n        }\n    }\n    elsif ( ref( $s ) eq \"HASH\" ) {\n\n        if ( scalar keys %{$s} == 0 ) {\n            return undef;\n        }\n        else {\n            foreach my $e ( values %{$s} ) {\n                $s{$e} = addtwo( { structure =&gt; $s-&gt;{$e} } );\n            }\n        }\n    }\n    else {\n        $s = 1;\n    }\n\n    return $c;\n}\n\nprint addtwo(\n    [\n        { a =&gt; 1, b =&gt; 2, c =&gt; 3 },\n        { d =&gt; 4, e =&gt; 5 },\n        [ 6, 7, 8 ],\n        9,\n        10,\n        11,\n        [ 12, 13, 14 ]\n    ]\n);\n</code></pre>\n"}, {"tags": ["perl", "ssl", "https", "get", "lwp-useragent"], "comments": [{"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 3, "creation_date": 1485375455, "post_id": 41860689, "comment_id": 70905456, "body": "A badly installed module? Your code works like a charm for me. So it&#39;s related to your own settings. I&#39;d try first by reinstalling the module, then checking whether querying https is allowed from the machine where the script is ran."}, {"owner": {"reputation": 45, "user_id": 6634654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76f66c4cfb1bbceaecbab001de34c85?s=128&d=identicon&r=PG&f=1", "display_name": "tr0in", "link": "https://stackoverflow.com/users/6634654/tr0in"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1485375654, "post_id": 41860689, "comment_id": 70905565, "body": "Which code? Script 1 or Script 2?"}, {"owner": {"reputation": 45, "user_id": 6634654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76f66c4cfb1bbceaecbab001de34c85?s=128&d=identicon&r=PG&f=1", "display_name": "tr0in", "link": "https://stackoverflow.com/users/6634654/tr0in"}, "reply_to_user": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1485377590, "post_id": 41860689, "comment_id": 70906607, "body": "@DavidVerdin  I reinstalled ActivePerl and now the script is working fine. Thank you for your answer."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 0, "creation_date": 1485425527, "post_id": 41860689, "comment_id": 70924141, "body": "I supposed it was something like this; I&#39;ll just post my comment as an answer to close the subject."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5389751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6149446a157b93ce5541c8a500200dfc?s=128&d=identicon&r=PG", "display_name": "Warren", "link": "https://stackoverflow.com/users/5389751/warren"}, "is_accepted": false, "score": 1, "last_activity_date": 1614194000, "creation_date": 1614194000, "answer_id": 66357403, "question_id": 41860689, "link": "https://stackoverflow.com/questions/41860689/perl-how-to-request-https-website/66357403#66357403", "title": "Perl - How to request HTTPS website", "body": "<p>https calls will fail if you do not have the LWP::Protocol::https module installed.</p>\n"}], "owner": {"reputation": 45, "user_id": 6634654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76f66c4cfb1bbceaecbab001de34c85?s=128&d=identicon&r=PG&f=1", "display_name": "tr0in", "link": "https://stackoverflow.com/users/6634654/tr0in"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4019, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1614194000, "creation_date": 1485374765, "question_id": 41860689, "link": "https://stackoverflow.com/questions/41860689/perl-how-to-request-https-website", "title": "Perl - How to request HTTPS website", "body": "<p>I am trying to access a HTTPS website, but it gives me error. I tried with this scripts:</p>\n\n<p>Script 1:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\n\nmy $B = new LWP::UserAgent (agent =&gt; 'Mozilla/5.0', cookie_jar =&gt;{});\n\nmy $GET = $B-&gt;get('https://moz.com')-&gt;content;\nprint $GET;\n</code></pre>\n\n<p>Script 2:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\nuse Mozilla::CA;\n\nmy $B = new LWP::UserAgent (agent =&gt; 'Mozilla/5.0', cookie_jar =&gt;{});\n$B-&gt;ssl_opts( SSL_ca_file =&gt; Mozilla::CA::SSL_ca_file() );\n$B-&gt;ssl_opts( verify_hostname =&gt; 1 );\n\nmy $GET = $B-&gt;get('https://moz.com')-&gt;content;\nprint $GET;\n</code></pre>\n\n<p>I get this error with both:</p>\n\n<pre><code>Can't connect to moz.com:443\n\nLWP::Protocol::https::Socket: SSL connect attempt failed with unknown error error:00000000:lib(0):func(0):reason(0) at C:/Perl/site/lib/LWP/Protocol/http.pm line 47.\n</code></pre>\n\n<p>I'm using <strong>ActivePerl 5.16.1 Build 1601</strong> on <strong>Windows 7 Ultimate</strong>.</p>\n\n<p>Any idea how to access a HTTPS website using Perl?</p>\n"}, {"tags": ["jquery", "ajax", "perl", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485378101, "post_id": 41860406, "comment_id": 70906845, "body": "By wrappers you mean your Template wrapper? Your content is a block of HTML? Is it created via a template, or do you set it directly in your controller? Please <a href=\"https://stackoverflow.com/posts/41860406/edit\">edit</a> your question and include the part of the controller that renders the page, and the template."}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485378615, "post_id": 41860406, "comment_id": 70907098, "body": "Yes, I meant Template Wrappers. The ajax response created content is more like a string containing various values that I parse directly in the javascript."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485379605, "post_id": 41860406, "comment_id": 70907660, "body": "If it&#39;s not even created by your templates then you can also just use a different View. You would typically use <a href=\"https://metacpan.org/pod/Catalyst::View::JSON\" rel=\"nofollow noreferrer\">metacpan.org/pod/Catalyst::View::JSON</a> for aja[xj]."}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485402599, "post_id": 41860406, "comment_id": 70915666, "body": "Yeah! I&#39;d actually consider this option if I have to handle more AJAX requests. This was supposed to be a quick fix and I am not familiar with JSON (though I do recognize is a great tool :P). Thanks a lot for the tip :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485417798, "post_id": 41860406, "comment_id": 70920057, "body": "Quick fixes are the kind of thing that make your life hard later. Use the json view. Making it will take you a minute, and then you only need two lines of code in your controller. The rest will just work. You put your Perl data structure in the stash and it becomes json. In the frontend your jquery just treads it as a Javascript variable."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485378497, "post_id": 41861658, "comment_id": 70907042, "body": "I was just going to write that. Well done that you found it yourself. :)"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485378545, "post_id": 41861658, "comment_id": 70907062, "body": "But you could also build a different View just for the AJAX stuff. I believe there are use cases where that makes sense."}], "tags": [], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "is_accepted": true, "score": 3, "last_activity_date": 1485402477, "last_edit_date": 1485402477, "creation_date": 1485378434, "answer_id": 41861658, "question_id": 41860406, "link": "https://stackoverflow.com/questions/41860406/avoiding-wrappers-in-ajax-response-using-catalyst/41861658#41861658", "title": "Avoiding wrappers in AJAX response using Catalyst", "body": "<p>I found the answer digging a little bit more into catalyst documentation. Turns out you can configure the wrappers to appear conditionally, like this:</p>\n\n<pre><code>[% IF no_wrapper or template.name.match('\\.(css|js|txt)');\n  debug(\"Passing page through as text: $template.name\");\n  content;\n ELSE;\n  debug(\"Applying HTML page layout wrappers to $template.name\\n\");\n  content WRAPPER site/html + site/layout;\n END; -%]\n</code></pre>\n\n<p>And then send the <strong>no_wrapper</strong> value along with the <strong>$c->stash->{no_wrapper}</strong></p>\n\n<p>Source: <a href=\"http://wiki.catalystframework.org/wiki/gettingstarted/howtos/disabling_a_tt_wrapper_for_ajax_requests\" rel=\"nofollow noreferrer\">http://wiki.catalystframework.org/wiki/gettingstarted/howtos/disabling_a_tt_wrapper_for_ajax_requests</a></p>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 41861658, "answer_count": 1, "score": 3, "last_activity_date": 1485402477, "creation_date": 1485373802, "question_id": 41860406, "link": "https://stackoverflow.com/questions/41860406/avoiding-wrappers-in-ajax-response-using-catalyst", "title": "Avoiding wrappers in AJAX response using Catalyst", "body": "<p>I'm trying to process an AJAX request using catalyst to resolve some dynamic html generation trough jQuery. Simply put, I need to fill a <code>&lt;select&gt; &lt;/select&gt;</code> tag (created through jQuery, along with some other fields, on user input). To fill this tag I thought I could extend the code block creating the tags to perform a simple AJAX request for data I need... Something like this:</p>\n\n<pre><code> $.post(\"../ajax/simple_query\", 'get=\"family_precedents\"' );\n</code></pre>\n\n<p>And then process this very simple request on a perl script using Catalyst::Request like I normally would.</p>\n\n<p>The problem is that AJAX response contains the Catalyst App wrappers and makes it really messy to both understand and use. <strong>Is there any way to avoid wrappers on an AJAX response using catalyst?</strong></p>\n"}, {"tags": ["c", "perl", "perl-io"], "comments": [{"owner": {"reputation": 7787, "user_id": 1257035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHLC8.png?s=128&g=1", "display_name": "a3f", "link": "https://stackoverflow.com/users/1257035/a3f"}, "edited": false, "score": 2, "creation_date": 1485372970, "post_id": 41860022, "comment_id": 70904064, "body": "<code>errno</code>&#39;s value is only relevant if a function that sets <code>errno</code> failed. Functions aren&#39;t required to (and usually don&#39;t) reset <code>errno</code>. Also <code>errno</code> is required by POSIX to be threadsafe and mscvrt seems to define it that way too."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1485373142, "post_id": 41860022, "comment_id": 70904173, "body": "Re &quot;<i>Functions aren&#39;t required to (and usually don&#39;t) reset <code>errno</code></i>&quot;, They may even set it even if no error occur."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485373201, "post_id": 41860022, "comment_id": 70904209, "body": "What is this <code>io.h</code> you mention?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485378071, "post_id": 41860022, "comment_id": 70906831, "body": "@Karl: I had trouble following your post so I started to edit it. It has turned into a major revision, so please check that I have reflected your meaning properly. You&#39;re welcome to roll it back if you don&#39;t like what I&#39;ve done."}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "edited": false, "score": 0, "creation_date": 1485417266, "post_id": 41860407, "comment_id": 70919827, "body": "good, so it has to be checked in the way you suggested - thank you. The only interesting thing is, that on WIN32, Perl&#39;s <code>dup2()</code> which in fact is win32_dup2(), indeed returns 0 on success and not the newfd. That&#39;s to keep in mind. But checking for <code>&gt;= 0</code> does the trick anyway. (I&#39;m using 5.14.1 btw.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1485373804, "creation_date": 1485373804, "answer_id": 41860407, "question_id": 41860022, "link": "https://stackoverflow.com/questions/41860022/perlapio-perlio-findfile-works-but-sets-errno-to-illegal-seek-espipe-29/41860407#41860407", "title": "perlapio - PerlIO_findFILE() works but sets errno to &quot;illegal seek&quot; (ESPIPE 29)", "body": "<p><code>errno</code> is meaningless unless a C library call or a system call reports an error, so it can't be used to determine if an error occurred. Notably, these calls aren't required to (and usually don't) reset <code>errno</code> on success. It's not even safe to clear <code>errno</code> before the call, because the call may set <code>errno</code> even if no error occurred.</p>\n\n<p>As best as I can tell, Perl's <a href=\"https://perl5.git.perl.org/perl.git/blob/443bd156a6baaf7a8fe6b6b05fcf6c4178140ed2:/util.c#l2826\" rel=\"nofollow noreferrer\">emulation</a> of <code>dup2</code> returns the same value as the POSIX one (<code>-1</code> on error, <code>newfd</code> on success).</p>\n\n<pre><code>#ifndef HAS_DUP2\nint\ndup2(int oldfd, int newfd)\n{\n#if defined(HAS_FCNTL) &amp;&amp; defined(F_DUPFD)\n    if (oldfd == newfd)\n        return oldfd;\n    PerlLIO_close(newfd);\n    return fcntl(oldfd, F_DUPFD, newfd);\n#else\n#define DUP2_MAX_FDS 256\n    int fdtmp[DUP2_MAX_FDS];\n    I32 fdx = 0;\n    int fd;\n\n    if (oldfd == newfd)\n        return oldfd;\n    PerlLIO_close(newfd);\n    /* good enough for low fd's... */\n    while ((fd = PerlLIO_dup(oldfd)) != newfd &amp;&amp; fd &gt;= 0) {\n        if (fdx &gt;= DUP2_MAX_FDS) {\n            PerlLIO_close(fd);\n            fd = -1;\n            break;\n        }\n        fdtmp[fdx++] = fd;\n    }\n    while (fdx &gt; 0)\n        PerlLIO_close(fdtmp[--fdx]);\n    return fd;\n#endif\n}\n#endif\n</code></pre>\n\n<p>(From 5.24.1)</p>\n\n<p>This means that we can detect an error in a platform-independent fashion, despite your claim to the contrary. As such, the proper usage is</p>\n\n<pre><code>if ( dup2(fdPipeStdOut[1], fdStdOutOriginal) &gt;= 0 ) {\n    //do some funny stuff\n} else {\n    //report error\n}\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 4533661, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a0c9c418921324d71b4d9b1380ab4990?s=128&d=identicon&r=PG&f=1", "display_name": "Semonit", "link": "https://stackoverflow.com/users/4533661/semonit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 41860407, "answer_count": 1, "score": 2, "last_activity_date": 1485417452, "creation_date": 1485372483, "last_edit_date": 1485417452, "question_id": 41860022, "link": "https://stackoverflow.com/questions/41860022/perlapio-perlio-findfile-works-but-sets-errno-to-illegal-seek-espipe-29", "title": "perlapio - PerlIO_findFILE() works but sets errno to &quot;illegal seek&quot; (ESPIPE 29)", "body": "\n\n<p>This issue is more or less related to <a href=\"https://stackoverflow.com/questions/41549508/embedded-perl-in-c-perlapio-interoperability-with-stdio\">embedded perl in C, perlapio - interoperability with STDIO</a> which I think I have solved for the Windows environment. I will post a complete solution if this new issue is solved too.</p>\n\n<p>In the linked question,\n<strong>StoryTeller</strong> <a href=\"https://stackoverflow.com/questions/41549508/embedded-perl-in-c-perlapio-interoperability-with-stdio#comment70305613_41549508\">gave me the hint</a>\nto use <code>PerlIO_findFILE()</code> which solved the immediate problem, but the same code on Linux behaves strangely.</p>\n\n<p>Perl's <code>dup2()</code> seems to have a different behaviour on Win32, where <code>dup2()</code> is a macro for <code>win32_dup2()</code>, which as far as I understand simply uses the <code>dup2()</code> from <code>io.h</code> .</p>\n\n<p>On Win32, Perl's version returns zero on success and non-zero on error, but on Linux the default ANSI <code>dup2()</code> will be used, which instead returns the new file descriptor. Then, I'll have to check <code>errno</code> if everything went fine.</p>\n\n<p>If a call to <code>PerlIO_findFILE()</code> sets <code>errno</code> to \"illegal seek\" (errno 29 - <code>ESPIPE</code>), then after <code>dup</code>, <code>dup2</code>, <code>pipe</code> etc. <code>errno</code> is still set to \"illegal seek\", and any further checks on <code>errno</code> still see the same error.</p>\n\n<p>(In practice everything has worked for me because there was no actual error. Also, the solution by checking <code>errno</code> is not thread safe, since between the syscall and the check another tread may reset errno.)</p>\n\n<p>Note that I have</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#define PERLIO_NOT_STDIO 0\n</code></pre>\n\n<p>in effect and I'm using Perl5.14.1.</p>\n\n<p>Am I doing something really wrong here?</p>\n\n<p>Here's a simplified code snippet:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>stdOutFILE = PerlIO_findFILE(PerlIO_stderr()); // convert Perl's stdout to stdio FILE handle\n\nfdStdOutOriginal = fileno(stdOutFILE);         // get descriptor\n\nif ( fdStdOutOriginal &gt;= 0 ) {\n\n    relocatedStdOut = dup(fdStdOutOriginal);   // relocate stdOut for external writing\n\n    if ( relocatedStdOut &gt;= 0 )\n    {\n        if ( pipe(fdPipeStdOut) == 0 )         // create pipe for forwarding to stderr\n        {\n            // this has to be done on win32:\n            // if ( dup2(fdPipeStdOut[1], fdStdOutOriginal)  == 0 ) // hang pipe on stdOut\n\n            dup2(fdPipeStdOut[1], fdStdOutOriginal);\n\n            if( errno == 0 ) {\n                // do some funny stuff\n            } else {\n                // report error\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["sql", "perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 3, "creation_date": 1485361314, "post_id": 41856237, "comment_id": 70896811, "body": "That&#39;s not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so this could just be a transcription error, but you never closed the <code>qq</code> in the statement <code>$sql = qq{&lt;MY SQL STATEMENT HERE&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7469649, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155020530917754/picture?type=large", "display_name": "Grant Brennan", "link": "https://stackoverflow.com/users/7469649/grant-brennan"}, "edited": false, "score": 0, "creation_date": 1485429696, "post_id": 41856770, "comment_id": 70926349, "body": "Thanks very much this worked like a charm and I appreciate you being constructive."}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 2, "last_activity_date": 1485361899, "creation_date": 1485361899, "answer_id": 41856770, "question_id": 41856237, "link": "https://stackoverflow.com/questions/41856237/execute-sql-only-on-certain-day-of-the-month/41856770#41856770", "title": "Execute SQL only on certain day of the month", "body": "<p>The easiest method here is just to die immediately, e.g.:</p>\n\n<pre><code>die \"Today is not a valid rundate\\n\" unless 25 == $mday;\n</code></pre>\n\n<p>The rest of your code doesn't change (assuming it's working already).  I would assume you don't want to send the email every day saying that it's not a valid rundate.</p>\n\n<p>Personally, I wouldn't do this, and would just specify the day of month in the crontab entry, which allows me to easily change the day if needed.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 7469649, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155020530917754/picture?type=large", "display_name": "Grant Brennan", "link": "https://stackoverflow.com/users/7469649/grant-brennan"}, "edited": false, "score": 0, "creation_date": 1485366681, "post_id": 41857777, "comment_id": 70900410, "body": "Thanks alot i appreciate the comments and i agree with the fact that i need to stop execution when the argument is not true but i was not completely sure how to construct that. Also, the reason i removed the line numbers was because i have removed the SQL as it was sensitive information which renders them rather useless. I should have highlighted the lines for you but i thought that &quot;near &quot;, else&quot; made it obvious as its the only occurrence in the code. Thanks again"}, {"owner": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "edited": false, "score": 0, "creation_date": 1485366908, "post_id": 41857777, "comment_id": 70900549, "body": "If you are *NIX, you could use a CRON job. That way the script can be set up to run whenever you like. You get huge flexibility in when they run &amp; they are triggered automatically."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 230, "user_id": 7322508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aDE1.jpg?s=128&g=1", "display_name": "Duncan Carr", "link": "https://stackoverflow.com/users/7322508/duncan-carr"}, "edited": false, "score": 0, "creation_date": 1485367133, "post_id": 41857777, "comment_id": 70900697, "body": "@DuncanCarr: The problem with cron jobs is that they can mysteriously stop running, and no one will notice for months. There&#39;s also no reason to assume that the program should be run <i>every</i> 25th of the month."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 17, "user_id": 7469649, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155020530917754/picture?type=large", "display_name": "Grant Brennan", "link": "https://stackoverflow.com/users/7469649/grant-brennan"}, "edited": false, "score": 0, "creation_date": 1485367474, "post_id": 41857777, "comment_id": 70900910, "body": "@GrantBrennan: Yes, it&#39;s the only occurrence in the code that you show. But, as you say, you&#39;ve clearly removed a bunch of stuff from what you&#39;ve shown us, including some <code>use</code> statements that could have been very useful and aren&#39;t sensitive at all, so as far as we know there could be a dozen more <code>else</code> lines that we can&#39;t see, and the line that appears to be the problem may well have just been hacked that way as part of sanitising your code."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1485364905, "creation_date": 1485364905, "answer_id": 41857777, "question_id": 41856237, "link": "https://stackoverflow.com/questions/41856237/execute-sql-only-on-certain-day-of-the-month/41857777#41857777", "title": "Execute SQL only on certain day of the month", "body": "<p>If the code you have shown is what you're running then it's pretty clear that the problem is you haven't closed the string <code>qq{&lt;MY SQL STATEMENT HERE&gt;</code>. You've used a similar contruct later on, so it looks like you know what it should look like</p>\n\n<p>But it doesn't make sense, if the current day isn't the 25th, to just print a message and carry on anyway. You leave <code>$sql</code> undefined and then try to <code>prepare</code> and <code>execute</code> as if nothing had happened</p>\n\n<p>You need to stop execution altogether, and you should write something like</p>\n\n<pre><code>if ( $mday != 25 ) {\n    say \"Today is not a valid rundate\";\n    exit;\n}\n\nmy $sql = qq{&lt;MY SQL STATEMENT HERE&gt;};\nmy $sth = $dbh-&gt;prepare( $sql ) or die \"Failed to prepare SQL: \" . $dbh-&gt;errstr;\n$sth-&gt;execute() or die \"Failed to execute SQL: \" . $dbh-&gt;errstr;\n</code></pre>\n\n<p>Or you could use <code>die</code> instead of <code>say</code>, which avoids the need for <code>exit</code></p>\n\n<p>I would also say that you should keep your delimiters consistent. You're using a mixture of <code>qq</code> with braces or pipes, as well as ordinary double quotes <code>\"...\"</code> for no particular reason that I can see. Just select one of these and stick with it</p>\n\n<p>You should also pay attention to any error messages you get. If you had looked at the line numbers in the error I bet you could have figured out the problem to yourself, but you replace them with <code>XXX</code> as if they are irrelevant and of no use at all</p>\n"}], "owner": {"reputation": 17, "user_id": 7469649, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155020530917754/picture?type=large", "display_name": "Grant Brennan", "link": "https://stackoverflow.com/users/7469649/grant-brennan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 41856770, "answer_count": 2, "score": 0, "last_activity_date": 1485364905, "creation_date": 1485360357, "last_edit_date": 1485364357, "question_id": 41856237, "link": "https://stackoverflow.com/questions/41856237/execute-sql-only-on-certain-day-of-the-month", "title": "Execute SQL only on certain day of the month", "body": "<p>I am trying to execute a SQL statement based on the day of the month e.g \"if today is the 25th then execute SQL, else say \"Today is not a valid rundate\".</p>\n\n<p>Essentially I'm using <code>DBI</code> to connect and run some SQL before building some HTML to be automatically emailed out.</p>\n\n<p>However, I'm getting syntax errors like the following:</p>\n\n<blockquote>\n  <p>Syntax error at XXXXX, near \", else\"\n  (might be a runaway multi-line {} string starting on line XX)\n  Missing right curly or square bracket at XXXXX at end of line.</p>\n</blockquote>\n\n<p>I have read that you cannot directly embed an instruction inside an expression (which I believe I may be doing). The script worked fine without the day element and the <code>else</code> statement.</p>\n\n<pre><code># Get the current day of the month (along with other date parts we can ignore)\nmy ( $sec, $min, $hour, $mday, $mon, $year, $wday, $yday, $isdst ) = localtime( time );\n\n## Filter based on day of week\n\nmy $sql;\n\nif ( $mday == 25 ) {\n    $sql = qq{&lt;MY SQL STATEMENT HERE&gt;\n}\nelse {\n    say \"Today is not a valid rundate\";\n}\n\n## Prepare and execute the SQL\n\nmy $sth = $dbh-&gt;prepare( $sql ) or die \"Failed to prepare SQL: \" . $dbh-&gt;errstr;\n$sth-&gt;execute() or die \"Failed to execute SQL: \" . $dbh-&gt;errstr;\n\n## Start building the HTML output\n\nmy $html = qq{\n&lt;table style=\"width:100%\"&gt;&lt;thead&gt;\n    &lt;tr&gt;\n        &lt;th&gt;#&lt;/th&gt;\n        &lt;th&gt;col1&lt;/th&gt;\n        &lt;th&gt;col2&lt;/th&gt;\n        &lt;th&gt;col3&lt;/th&gt;\n    &lt;/tr&gt;\n&lt;/thead&gt;\n};\n\n## Loop round each row in the result set, and add to the HTML output for each one.\n\nmy $count = 0;\n\nwhile ( my $row = $sth-&gt;fetchrow_hashref ) {\n    #\n    # process rows\n\n    $count++;\n\n    #say Dumper $row;\n    #say \"$row-&gt;{col1}, $row-&gt;{col2}, $row-&gt;{col3}\";\n    $html .= qq|\n    &lt;tr&gt;\n        &lt;td align=\"right\"&gt;$count.&lt;/td&gt;\n        &lt;td&gt;$row-&gt;{col1}&lt;/td&gt;\n        &lt;td&gt;$row-&gt;{col2}&lt;td&gt;\n        &lt;td&gt;$row-&gt;{col3}&lt;/td&gt;\n    &lt;/tr&gt;\n    |;\n}\n\n## Close the HTML\n\n$html .= \"&lt;/table&gt;\";\n\nsay \"$count rows processed.\";\n\n$html .= \"&lt;h2&gt;Report SQL&lt;/h2&gt;The report was produced with the following SQL&lt;p&gt;&lt;pre&gt;$sql&lt;/pre&gt;\";\n\n## Send the mail\nmy $sender = new Mail::Sender();\n\n$sender-&gt;Open( {\n    from     =&gt; 'email1',\n    to       =&gt; $maildest,\n    subject  =&gt; $mailsubj,\n    ctype    =&gt; \"text/html\",\n    encoding =&gt; \"quoted-printable\",\n    smtp     =&gt; \"localhost\"\n} ) or die $Mail::Sender::Error, \"\\n\";\n\n$sender-&gt;SendEnc( $html );\n$sender-&gt;Close();\n\n$dbh-&gt;disconnect;\n</code></pre>\n"}, {"tags": ["perl", "m"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485359233, "post_id": 41855749, "comment_id": 70895284, "body": "Please <a href=\"https://stackoverflow.com/posts/41855749/edit\">edit</a> your question and include the Perl code you&#39;ve already written.  Even if the code doesn&#39;t do what you want. We cannot help you if we don&#39;t know what you&#39;re doing."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1485359798, "post_id": 41855749, "comment_id": 70895755, "body": "This sounds less like a programming assistance request, and more like you want to hire a programmer. There are a number of &#39;write some code to my spec&#39; sites out there that might be well suited to this sort of problem."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485365694, "post_id": 41855749, "comment_id": 70899803, "body": "It is very odd to add the Perl tag to a question that doesn&#39;t contain any Perl code at all. Why have you added the M tag?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7469682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d0345d11baecf79f1905088ac5e899?s=128&d=identicon&r=PG&f=1", "display_name": "ConfusedResearcher", "link": "https://stackoverflow.com/users/7469682/confusedresearcher"}, "edited": false, "score": 0, "creation_date": 1485518804, "post_id": 41857981, "comment_id": 70968996, "body": "I added Perl because that is the only language I know a little bit about. But we found someone from inside our building that has experience with programming and he is going to help us, maybe that is easier :)  thank you for the feedback"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 1, "last_activity_date": 1485365581, "creation_date": 1485365581, "answer_id": 41857981, "question_id": 41855749, "link": "https://stackoverflow.com/questions/41855749/how-do-i-chop-up-a-row-of-numbers-into-columns-with-perl/41857981#41857981", "title": "how do I chop up a row of numbers into columns with Perl", "body": "<p></p>\n\n<h3>how do I chop up a row of numbers into columns with Perl</h3>\n\n<p>Using the <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\"><code>split</code></a> operator</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $row = '0    -3.554688    3.457031   ';\nmy @row = split ' ', $row;\nsay for @row;\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>0\n-3.554688\n3.457031\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7469682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22d0345d11baecf79f1905088ac5e899?s=128&d=identicon&r=PG&f=1", "display_name": "ConfusedResearcher", "link": "https://stackoverflow.com/users/7469682/confusedresearcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1485371623, "answer_count": 1, "score": 0, "last_activity_date": 1485365625, "creation_date": 1485358980, "last_edit_date": 1485365625, "question_id": 41855749, "link": "https://stackoverflow.com/questions/41855749/how-do-i-chop-up-a-row-of-numbers-into-columns-with-perl", "closed_reason": "Not suitable for this site", "title": "how do I chop up a row of numbers into columns with Perl", "body": "<p></p>\n\n<p>I am trying to convert data that is currently being processed by hand into an easier format but I am not a programmer so i really could use some help. Our tab delimited .txt datafile looks as following:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Date                :       \nTime                :            \nSample name         :       \nTemperature         :       \n                    :  \n-4000     4.882813E-03    4.882813E-03   \n-3000     4.882813E-03    4.882813E-03   \n-2000     0   0  \n-1000    -.1367188    .1367188   \n0    -3.554688    3.457031   \n1000     -3.632813    3.491211   \n2000     -3.657227    3.496094   \n3000     -3.686523    3.491211   \n4000     -3.710938    3.496094   \n5000     -3.735352    3.496094   \n6000     -3.754883    3.491211   \n7000     -3.774414    3.496094   \n8000     -3.793945    3.496094  \n</code></pre>\n\n<p>the text and all data until column A reaches 0 is of no importance and should be removed. once column A reaches 0 the script should start scanning column C and once column C changes by say 5% it should cut or copy the next 100 datapoints of column B and put it in colum D, upon the next change the data matching with those points should be placed in column E etc till the end of the file is reached.</p>\n\n<p>with easier numbers:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0   1   2\n1000    1   2\n2000    1   2\n3000    1   2\n4000    1   2\n5000    1   2\n6000    1   2\n7000    1   2\n8000    0   3\n9000    0   3\n10000   0   3\n11000   0   3\n12000   0   3\n</code></pre>\n\n<p>should be transformed into:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>0000    1   2   0\n1000    1   2   0\n2000    1   2   0\n3000    1   2   0\n4000    1   2   0\n5000    1   2\n6000    1   2\n7000    1   2\n</code></pre>\n\n<p>I'm a bit at a loss since i know no programming languages except a little bit of perl from years ago, can someone give me some hint on how to do this because right now I can read my text file and display the data in the terminal window of Padre but I have trouble manipulating the data</p>\n\n<p>thank you in advance for any tips tricks and help, other non programming solutions are welcome too because right now me and my colleague are looking at doing this kind of manipulation by hand on ten thousands of these changes</p>\n"}, {"tags": ["regex", "linux", "perl"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 6812415, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/02d474fc529a5b9c35031755bd9cb424?s=128&d=identicon&r=PG&f=1", "display_name": "King David", "link": "https://stackoverflow.com/users/6812415/king-david"}, "edited": false, "score": 0, "creation_date": 1485356492, "post_id": 41854721, "comment_id": 70893305, "body": "I tried it but all lines are printed without delete the relevant line ( my perl version - v5.10.1 )"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 370, "user_id": 6812415, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/02d474fc529a5b9c35031755bd9cb424?s=128&d=identicon&r=PG&f=1", "display_name": "King David", "link": "https://stackoverflow.com/users/6812415/king-david"}, "edited": false, "score": 0, "creation_date": 1485357080, "post_id": 41854721, "comment_id": 70893711, "body": "@Jogeff: The answer is fine; you&#39;ve made a mistake in your environment variable. You have <code>&#47;ME&#47;UK&#47;</code> instead of <code>&#47;MES&#47;UK&#47;</code> in your <code>export</code> command."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1485356218, "creation_date": 1485356218, "answer_id": 41854721, "question_id": 41854555, "link": "https://stackoverflow.com/questions/41854555/perl-delete-the-line-only-if-match-the-exactly-string-in-line/41854721#41854721", "title": "perl + delete the line only if match the exactly string in line", "body": "<p>Why don't you just include the double quotes in the regex pattern?</p>\n\n<pre><code>perl -i -ne 'print unless /\"\\Q$ENV{A}\\E\"/' file1\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 6812415, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/02d474fc529a5b9c35031755bd9cb424?s=128&d=identicon&r=PG&f=1", "display_name": "King David", "link": "https://stackoverflow.com/users/6812415/king-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 41854721, "answer_count": 1, "score": 1, "last_activity_date": 1485357884, "creation_date": 1485355791, "last_edit_date": 1485356493, "question_id": 41854555, "link": "https://stackoverflow.com/questions/41854555/perl-delete-the-line-only-if-match-the-exactly-string-in-line", "title": "perl + delete the line only if match the exactly string in line", "body": "<p>I work on the following file:</p>\n\n<pre><code>more file1\n\n\nname=\"UAT/CC/Global/MES/UK/adWerum-UK\" \nname=\"UAT/CC/Global/MES/UK/adWerum-UK-Adapter\" \nname=\"UAT/CC/Global/MES/UK/adWerum-UK1\" \nname=\"HOME/UAT/CC/Global/ME/UK/adWerum-UK\" \n</code></pre>\n\n<p>I created the following perl command  in order to delete only exactly string with backslashes </p>\n\n<pre><code>UAT/CC/Global/ME/UK/adWerum-UK\n</code></pre>\n\n<p>the perl syntax:</p>\n\n<pre><code>perl -n -i -e 'print unless m/\\Q$ENV{A}\\E/' file1\n</code></pre>\n\n<p>the problem is perl removing all lines that contain the line:</p>\n\n<pre><code>UAT/CC/Global/ME/UK/adWerum-UK    \n</code></pre>\n\n<p>example</p>\n\n<pre><code>A=UAT/CC/Global/MES/UK/adWerum-UK\nexport A=UAT/CC/Global/ME/UK/adWerum-UK\nperl -n -i -e 'print unless m/\\Q$ENV{A}\\E/' file1\n</code></pre>\n\n<p>.</p>\n\n<pre><code>more file1\n\nfile is empty\n</code></pre>\n\n<p>While the expected results are</p>\n\n<pre><code>name=\"UAT/CC/Global/MES/UK/adWerum-UK-Adapter\" \nname=\"UAT/CC/Global/MES/UK/adWerum-UK1\" \nname=\"HOME/UAT/CC/Global/ME/UK/adWerum-UK\" \n</code></pre>\n\n<p>please advise what need to change in my perl syntax in order to remove only the line with the match string between the double quota </p>\n"}, {"tags": ["perl", "log4perl"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485355480, "post_id": 41853974, "comment_id": 70892594, "body": "Are you saying you want to temporarily change the logging level (like in a small section of a single script) without making changes to the config? Or do you want a separate logger for each script?"}, {"owner": {"reputation": 823, "user_id": 6605797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f0668cfbeb382e47c22cd5e5afb4c240?s=128&d=identicon&r=PG&f=1", "display_name": "A_B", "link": "https://stackoverflow.com/users/6605797/a-b"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485355850, "post_id": 41853974, "comment_id": 70892844, "body": "I&#39;d like to be able to temporarily change the logging level for a single script without affecting the other scripts.   Not sure the best way to accomplish that."}], "answers": [{"tags": [], "owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "is_accepted": false, "score": 0, "last_activity_date": 1485374784, "creation_date": 1485374784, "answer_id": 41860695, "question_id": 41853974, "link": "https://stackoverflow.com/questions/41853974/defining-multiple-log-levels-in-log4perl/41860695#41860695", "title": "Defining multiple log levels in Log4Perl", "body": "<p>You can use the <a href=\"https://metacpan.org/pod/Log::Log4perl#Changing-the-Log-Level-on-a-Logger\" rel=\"nofollow noreferrer\"><code>level</code></a> method to adjust the logging level inside your program:</p>\n\n<pre><code>use strict;\nuse warnings 'all';\n\nuse Log::Log4perl;\nuse Log::Log4perl::Level;\n\nLog::Log4perl-&gt;init(\\*DATA);\n\nmy $logger = Log::Log4perl-&gt;get_logger;\n\n$logger-&gt;info('before');\n$logger-&gt;level($INFO);\n$logger-&gt;info('after');\n\n__DATA__\nlog4perl.rootLogger             = WARN, Screen\nlog4perl.appender.Screen        = Log::Log4perl::Appender::Screen\nlog4perl.appender.Screen.layout = Log::Log4perl::Layout::PatternLayout\nlog4perl.appender.Screen.layout.ConversionPattern = %d %p&gt; %m%n\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2017/01/25 12:59:58 INFO&gt; after\n</code></pre>\n\n<p>This will not affect other scripts that use the same config file, since they will each have their own Log::Log4perl instance.</p>\n\n<p>Alternatively, you can use the <code>more_logging</code>/<code>inc_level</code> or <code>less_logging</code>/<code>dec_level</code> methods, which take a delta value instead of an absolute logging level.</p>\n"}], "owner": {"reputation": 823, "user_id": 6605797, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f0668cfbeb382e47c22cd5e5afb4c240?s=128&d=identicon&r=PG&f=1", "display_name": "A_B", "link": "https://stackoverflow.com/users/6605797/a-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485374784, "creation_date": 1485354097, "question_id": 41853974, "link": "https://stackoverflow.com/questions/41853974/defining-multiple-log-levels-in-log4perl", "title": "Defining multiple log levels in Log4Perl", "body": "<p>I have the following log4perl.conf configuration file that I'm using for multiple scripts.  It is configured to show messages from all log levels.</p>\n\n<pre><code># Log4perl configuration file\n\nlog4perl.rootLogger = ALL, screen, file\n\nlog4perl.appender.screen = Log::Log4perl::Appender::Screen\nlog4perl.appender.screen.stderr = 0\nlog4perl.appender.screen.layout = PatternLayout\nlog4perl.appender.screen.layout.ConversionPattern = %d %p&gt; %m%n\n\nlog4perl.appender.file = Log::Log4perl::Appender::File\nlog4perl.appender.file.filename = sub { my $script=$0; $script =~ s/(dev|test|prod)\\/script/log/; $script =~ s/\\.[^.]+$//; return \"$script.log\" }\nlog4perl.appender.file.mode = append\nlog4perl.appender.file.layout = PatternLayout\nlog4perl.appender.file.layout.ConversionPattern = %d %p&gt; %m%n\n</code></pre>\n\n<p>The scripts use this code snippet to initialize it:</p>\n\n<pre><code>use Log::Log4perl;\n# Logger configuration\nLog::Log4perl-&gt;init('/etc/log4perl.conf');\n$logger = Log::Log4perl-&gt;get_logger();\n</code></pre>\n\n<p>What is the best way to adjust the logging level without having to modify the configuration file each time since there are multiple scripts using the same config.   </p>\n\n<p>Can I create a new logger and have the script use that one instead of the root logger?</p>\n"}, {"tags": ["perl", "mime"], "comments": [{"owner": {"reputation": 917, "user_id": 3014263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rFh51.jpg?s=128&g=1", "display_name": "AbhiNickz", "link": "https://stackoverflow.com/users/3014263/abhinickz"}, "edited": false, "score": 0, "creation_date": 1485345610, "post_id": 41851071, "comment_id": 70885938, "body": "<a href=\"https://wiki.koha-community.org/wiki/How_to_install_missing_Perl_modules_on_Debian\" rel=\"nofollow noreferrer\">Look into this</a>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485346419, "post_id": 41851071, "comment_id": 70886405, "body": "If you are hoping to prevent malicious attacks then <code>File::MimeInfo</code> won&#39;t help you much. All it does is guess a MIME type from the name of the file, which is trivial to spoof."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485346511, "post_id": 41851071, "comment_id": 70886477, "body": "Are you having problems with the Perl documentation? I think it is particularly clear about how to install a module, and you should describe what you have read that you don&#39;t understand."}, {"owner": {"reputation": 13, "user_id": 3478670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e293d87d4b928669feba58c7fd60b962?s=128&d=identicon&r=PG&f=1", "display_name": "Rejeesh K.Nair", "link": "https://stackoverflow.com/users/3478670/rejeesh-k-nair"}, "edited": false, "score": 0, "creation_date": 1485346843, "post_id": 41851071, "comment_id": 70886694, "body": "The project which we currently working on is a government/PSU project, so we have to implement certain security feature like MIME Type checking."}, {"owner": {"reputation": 13, "user_id": 3478670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e293d87d4b928669feba58c7fd60b962?s=128&d=identicon&r=PG&f=1", "display_name": "Rejeesh K.Nair", "link": "https://stackoverflow.com/users/3478670/rejeesh-k-nair"}, "edited": false, "score": 0, "creation_date": 1485347158, "post_id": 41851071, "comment_id": 70886870, "body": "We find no issues in installing MIME module in perl , but when it comes to KOHA (written in perl) we could not install the MimeInfo module."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485353144, "post_id": 41851071, "comment_id": 70890911, "body": "You don&#39;t install a module into an application - you install it into the Perl system. Do you have multiple Perl installations? And you&#39;re missing my point about MIME types. If you have a file called <code>file.jpg</code> then <code>File::MimeInfo</code> will tell you that it has a MIME type of <code>image&#47;jpeg</code> regardless of what it contains. It may be an executable file containing a virus, and the module won&#39;t notice. If a hacker only has to rename the file to get past your security then it&#39;s no security at all."}, {"owner": {"reputation": 658, "user_id": 5543203, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/bdYF4.png?s=128&g=1", "display_name": "Henrik supports the community", "link": "https://stackoverflow.com/users/5543203/henrik-supports-the-community"}, "edited": false, "score": 0, "creation_date": 1485358011, "post_id": 41851071, "comment_id": 70894392, "body": "As said in another comment File::MimeInfo only does a guess based on the filename. If you want to actually analyse the file, you could look at File::MMagic::XS. I&#39;ve never heard of ILS, so I have no idea how you could integrate it into that."}, {"owner": {"reputation": 13, "user_id": 3478670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e293d87d4b928669feba58c7fd60b962?s=128&d=identicon&r=PG&f=1", "display_name": "Rejeesh K.Nair", "link": "https://stackoverflow.com/users/3478670/rejeesh-k-nair"}, "edited": false, "score": 0, "creation_date": 1486533280, "post_id": 41851071, "comment_id": 71380653, "body": "I implemented  File::MMagic::XS in ILS-KOHA. But it will always return &#39;text/plain&#39; when I upload jpg,pdf and png files.Can anyone help me on this issue?"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6447967, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4kt-uhK8pQk/AAAAAAAAAAI/AAAAAAAAADM/d7KEkgnoFOw/photo.jpg?sz=128", "display_name": "Shaka Flex", "link": "https://stackoverflow.com/users/6447967/shaka-flex"}, "is_accepted": false, "score": 0, "last_activity_date": 1485352865, "last_edit_date": 1485352865, "creation_date": 1485351832, "answer_id": 41853205, "question_id": 41851071, "link": "https://stackoverflow.com/questions/41851071/how-to-check-a-files-mime-type/41853205#41853205", "title": "How to check a file&#39;s MIME type", "body": "<p>What I use is <a href=\"http://search.cpan.org/~exiftool/Image-ExifTool-10.40/lib/Image/ExifTool.pod\" rel=\"nofollow noreferrer\" title=\"Image::ExifTool\">Image::ExifTool</a> it can do a format check on some of the mime types and point out files with errors. Its not made as a security  program so it can have some faults in that area, but its an active distribution.</p>\n\n<p>You can install the module by placing the folder /lib in the modules tarball on the server then add this line of Perl code to your script <code>use lib '/path/to/lib';</code> .</p>\n"}], "owner": {"reputation": 13, "user_id": 3478670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e293d87d4b928669feba58c7fd60b962?s=128&d=identicon&r=PG&f=1", "display_name": "Rejeesh K.Nair", "link": "https://stackoverflow.com/users/3478670/rejeesh-k-nair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 844, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1485357982, "creation_date": 1485345499, "last_edit_date": 1485346329, "question_id": 41851071, "link": "https://stackoverflow.com/questions/41851071/how-to-check-a-files-mime-type", "title": "How to check a file&#39;s MIME type", "body": "<p>I am working with <em>Koha</em> \u2014 An Integrated Library System (ILS) written in Perl. I need to check the MIME type of each uploaded file for security purposes.</p>\n\n<p>Some search results from Google suggest that we can do it with the help of the <a href=\"https://metacpan.org/pod/File::MimeInfo\" rel=\"nofollow noreferrer\"><code>File::MimeInfo</code></a> Perl module.</p>\n\n<p>How can we install the <code>File::MimeInfo</code> module in Koha and check the MIME types, or is there some better way?</p>\n"}, {"tags": ["perl", "email", "perl-module", "maildir"], "answers": [{"tags": [], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "is_accepted": false, "score": 1, "last_activity_date": 1485321745, "creation_date": 1485321745, "answer_id": 41843988, "question_id": 41843918, "link": "https://stackoverflow.com/questions/41843918/does-mailboxmanager-handle-qmail-maildir-format/41843988#41843988", "title": "Does Mail::Box::Manager handle Qmail maildir format?", "body": "<p><a href=\"http://search.cpan.org/~markov/Mail-Box-2.120/lib/Mail/Box-Overview.pod\" rel=\"nofollow noreferrer\">http://search.cpan.org/~markov/Mail-Box-2.120/lib/Mail/Box-Overview.pod</a></p>\n\n<blockquote>\n  <p>Each folder maintains a list of messages. Much effort is made to hide differences between folder types and kinds of messages. Your program can be used for MBOX, MH, Maildir, and POP3 folders with no change at all (as long as you stick to the rules).</p>\n</blockquote>\n"}], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485321745, "creation_date": 1485321409, "question_id": 41843918, "link": "https://stackoverflow.com/questions/41843918/does-mailboxmanager-handle-qmail-maildir-format", "title": "Does Mail::Box::Manager handle Qmail maildir format?", "body": "<p>It's not obvious which format this module supports. No mention of 'qmail' nor 'maildir'.</p>\n\n<p><a href=\"http://search.cpan.org/~markov/Mail-Box-2.120/lib/Mail/Box/Manager.pod\" rel=\"nofollow noreferrer\">http://search.cpan.org/~markov/Mail-Box-2.120/lib/Mail/Box/Manager.pod</a></p>\n\n<p>It has functions to move between folders, which sounds like maildir, but then it also hints that it encapsulates  Mail::Box::Mbox, which sounds like the single file mbox format. </p>\n\n<p>Here is a description of maildir format: <a href=\"http://wiki.dovecot.org/MailboxFormat/Maildir\" rel=\"nofollow noreferrer\">http://wiki.dovecot.org/MailboxFormat/Maildir</a>, and description of both: <a href=\"http://www.postfix.org/virtual.8.html\" rel=\"nofollow noreferrer\">http://www.postfix.org/virtual.8.html</a></p>\n"}, {"tags": ["oracle", "perl", "encoding", "utf-8", "encode"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485323752, "post_id": 41842900, "comment_id": 70873220, "body": "<i>&quot;I am not sure if the multi-byte Chinese gets destroyed in the conversion because of the unsupported code page&quot;</i> Are you saying you don&#39;t know whether it gets destroyed (you should find out!) or that it gets destroyed but you don&#39;t know whether it&#39;s because of the unsupported code page."}, {"owner": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "edited": false, "score": 0, "creation_date": 1485324939, "post_id": 41842900, "comment_id": 70873727, "body": "Perl version 5.8.8 is over a decade old. Lots and lots of work on character encodings, including EBCDIC, have happened since. I strongly recommend that you get a less ancient Perl version."}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1485338812, "post_id": 41842900, "comment_id": 70881431, "body": "@Bordodin Sorry I can&#39;t tell. I know nothing about chinese characters in EBCDIC data and my environment can&#39;t display them."}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "reply_to_user": {"reputation": 4663, "user_id": 3967089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d00715119003023d62918dcc603ca7?s=128&d=identicon&r=PG&f=1", "display_name": "Calle Dybedahl", "link": "https://stackoverflow.com/users/3967089/calle-dybedahl"}, "edited": false, "score": 0, "creation_date": 1485338826, "post_id": 41842900, "comment_id": 70881447, "body": "@CalleDybedahl I would like to but sorry I&#39;m just working with what I have at the moment."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485356229, "post_id": 41842900, "comment_id": 70893119, "body": "Can&#39;t you get Oracle to convert the data to UTF-8 for you? With MySQL, all you have to do is set the connection&#39;s encoding to UTF-8, and the DB will automatically convert everything to UTF-8 for you."}, {"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485418580, "post_id": 41842900, "comment_id": 70920409, "body": "@ikegami yes but I&#39;m trying to do it manually with perl.  Like: EBCDIC data &gt; Perl &gt; ASCII / UTF-8  provided I still preserve the correct chinese data"}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "edited": false, "score": 0, "creation_date": 1487670616, "post_id": 41845813, "comment_id": 71877617, "body": "Thanks @Borodin sorry got kind of busy lately but going back I have checked and its not supported. So it means that I can&#39;t use Text::Iconv since 937 is not supported correct?  iconv -l  Is it possible to install this manually?"}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 0, "last_activity_date": 1485329534, "creation_date": 1485329534, "answer_id": 41845813, "question_id": 41842900, "link": "https://stackoverflow.com/questions/41842900/how-do-ebcdic-to-ascii-utf-8-conversion-using-perl-by-imitating-oracle-sql-loa/41845813#41845813", "title": "How do EBCDIC to ASCII / UTF-8 conversion using Perl by imitating Oracle SQL load?", "body": "<p>I suggest that you take a look at the <a href=\"https://metacpan.org/pod/Text::Iconv\" rel=\"nofollow noreferrer\"><code>Text::Iconv</code></a> module, which is likely to be more comprehensive than <code>Encode</code></p>\n\n<p>I can't say for sure whether your <code>libiconv</code> will support code page 937, as it will depend on what is supplied with your system, bur running <code>iconv --list</code> on the command line will give you a good idea</p>\n\n<p>Instead of using the module, you may prefer to open the file  piped through the <code>iconv</code> utility like this</p>\n\n<pre><code>open my $fh, '-|:encoding(utf-8)', qw/ iconv -f CP937 -t UTF-8 my_ebcdic_file / or die $!;\n</code></pre>\n\n<p>Then you can read decoded lines from the file in the usual way with <code>&lt;$fh&gt;</code></p>\n"}], "owner": {"reputation": 263, "user_id": 4995259, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c4d0fa9012306fa48b9ef275998c4a18?s=128&d=identicon&r=PG&f=1", "display_name": "criz", "link": "https://stackoverflow.com/users/4995259/criz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 780, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485504124, "creation_date": 1485314889, "last_edit_date": 1485504124, "question_id": 41842900, "link": "https://stackoverflow.com/questions/41842900/how-do-ebcdic-to-ascii-utf-8-conversion-using-perl-by-imitating-oracle-sql-loa", "title": "How do EBCDIC to ASCII / UTF-8 conversion using Perl by imitating Oracle SQL load?", "body": "<p>Usually, I use Oracle SQL developer to load EBCDIC data using ZHT16DBCS (Traditional Multi byte Chinese).</p>\n\n<p>I don't know if I am asking the right question but I'm trying to imitate conversion of EBCDIC data into readable text using Perl v5.8.8. I have been successful so far by using the Encode and Convert modules in Perl but I am not sure if the multi-byte Chinese gets destroyed in the conversion because of the unsupported code page.</p>\n\n<p>I've read that ZHT16DBCS uses code page 937.\nFound here: <a href=\"https://docs.oracle.com/cd/B19306_01/gateways.102/b16217/a_nls.htm\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/B19306_01/gateways.102/b16217/a_nls.htm</a></p>\n\n<p>But cp937 is not supported in  Perl Encode and Convert module</p>\n\n<pre><code>@all_encodings = Encode-&gt;encodings(\":all\");\n</code></pre>\n\n<p>Is it possible to imitate cp937 conversion using perl? I would like to check if the output I generate in Perl will have the same data that I loaded</p>\n\n<pre><code>SELECT * from EBCDIC_DATA_TABLE\n</code></pre>\n\n<p>Thanks</p>\n\n<p>[EDIT]\nMaybe I should rephrase this. How hard is it to create a EBCDIC CP937 to UTF-8 Conversion table? Thanks :)</p>\n"}, {"tags": ["perl", "gcc", "module", "compiler-errors", "installation"], "comments": [{"owner": {"reputation": 77017, "user_id": 463304, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/s77Za.jpg?s=128&g=1", "display_name": "700 Software", "link": "https://stackoverflow.com/users/463304/700-software"}, "edited": false, "score": 0, "creation_date": 1485302720, "post_id": 41841143, "comment_id": 70867504, "body": "Is this the right site to ask this question, or should I ask on UNIX &amp; Linux?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485303596, "post_id": 41841143, "comment_id": 70867758, "body": "I&#39;d say it&#39;s on-topic in both, but I don&#39;t know which one might yield better answers, if any. Perlmonks might be good, or irc.perl.org as this is quite specific. Have you looked at cpantesters for that module?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485309170, "post_id": 41841143, "comment_id": 70869286, "body": "I&#39;m not familiar with OmniOS, but It looks like sys/types.h is in the <code>system&#47;header</code> package (at least, it&#39;s listed in the <a href=\"http://pkg.omniti.com/omnios/r151020/manifest/0/system%2Fheader@0.5.11%2C5.11-0.151020%3A20161230T213755Z\" rel=\"nofollow noreferrer\">manifest</a>)."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485309554, "post_id": 41841143, "comment_id": 70869361, "body": "Related? <a href=\"http://stackoverflow.com/q/8773535\">stackoverflow.com/q/8773535</a>"}, {"owner": {"reputation": 77017, "user_id": 463304, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/s77Za.jpg?s=128&g=1", "display_name": "700 Software", "link": "https://stackoverflow.com/users/463304/700-software"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485350653, "post_id": 41841143, "comment_id": 70889108, "body": "@ThisSuitIsBlackNot, Please post as an answer! Thanks!"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485357123, "post_id": 41841143, "comment_id": 70893738, "body": "Since OmniOS is an OpenSolaris derivative, maybe you could just tweak your earlier question to mention it too. Not sure we need a separate question about sys/types.h for every distro based on Solaris."}, {"owner": {"reputation": 77017, "user_id": 463304, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/s77Za.jpg?s=128&g=1", "display_name": "700 Software", "link": "https://stackoverflow.com/users/463304/700-software"}, "edited": false, "score": 0, "creation_date": 1485357963, "post_id": 41841143, "comment_id": 70894352, "body": "Oh my! I duplicated my own question. So sorry about that!"}], "owner": {"reputation": 77017, "user_id": 463304, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/s77Za.jpg?s=128&g=1", "display_name": "700 Software", "link": "https://stackoverflow.com/users/463304/700-software"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "closed_date": 1485358104, "answer_count": 0, "score": 1, "last_activity_date": 1485350719, "creation_date": 1485302534, "last_edit_date": 1485350719, "question_id": 41841143, "link": "https://stackoverflow.com/questions/41841143/trouble-installing-compiled-perl-module-on-omnios-illumos-types-h-is-missing", "closed_reason": "Duplicate", "title": "Trouble installing compiled Perl module on OmniOS / Illumos - types.h is missing", "body": "<p>I'm running OmniOS r151020 which is the current stable release. Decided to install some Perl modules. I'm installing them in a custom libraries directory. Here is how I'm installing.</p>\n\n<pre><code>sudo pkg install gnu-tar gnu-make gcc51\nexport MAKE=gmake\nmkdir /bailey/lib/perl; cd /bailey/lib/perl\nln -s perl5/lib/perl5 cpan # so that my apps can add /bailey/lib/perl/cpan to their @INC\ncurl -L https://cpanmin.us | perl - App::cpanminus --local-lib=/bailey/lib/perl/perl5 # installs cpanm\nperl5/bin/cpanm --local-lib=/bailey/lib/perl/perl5 local::lib &amp;&amp; eval $(perl -I /bailey/lib/perl/cpan -Mlocal::lib) # sets default installation dir\nperl5/bin/cpanm Crypt::Eksblowfish::Bcrypt\n</code></pre>\n\n<p>Unfortunately, the last command, which is to install a natively compiled module, results in an error:<br>\n<strong><code>/usr/perl5/5.16.1/lib/i86pc-solaris-thread-multi-64int/CORE/perl.h:610:24: fatal error: sys/types.h: No such file or directory</code></strong></p>\n\n<p>Full transcript:</p>\n\n<pre><code>george@bedford:/bailey/lib/perl$ perl5/bin/cpanm Crypt::Eksblowfish::Bcrypt\n--&gt; Working on Crypt::Eksblowfish::Bcrypt\nFetching http://www.cpan.org/authors/id/Z/ZE/ZEFRAM/Crypt-Eksblowfish-0.009.tar.gz ... OK\nConfiguring Crypt-Eksblowfish-0.009 ... OK\nBuilding and testing Crypt-Eksblowfish-0.009 ... FAIL\n! Installing Crypt::Eksblowfish::Bcrypt failed. See /home/george/.cpanm/work/1485301763.12637/build.log for details. Retry with --force to force install it.\ngeorge@bedford:/bailey/lib/perl$ more /home/george/.cpanm/work/1485301763.12637/build.log\ncpanm (App::cpanminus) 1.7042 on perl 5.016001 built for i86pc-solaris-thread-multi-64int\nWork directory is /home/george/.cpanm/work/1485301763.12637\nYou have make /usr/gnu/bin/make\nYou have /usr/bin/wget\nYou have /usr/gnu/bin/tar, /usr/bin/gzip and /usr/bin/bzip2\nYou have /usr/bin/unzip\nSearching Crypt::Eksblowfish::Bcrypt () on cpanmetadb ...\n--&gt; Working on Crypt::Eksblowfish::Bcrypt\nFetching http://www.cpan.org/authors/id/Z/ZE/ZEFRAM/Crypt-Eksblowfish-0.009.tar.gz\n-&gt; OK\nUnpacking Crypt-Eksblowfish-0.009.tar.gz\nEntering Crypt-Eksblowfish-0.009\nChecking configure dependencies from META.json\nChecking if you have warnings 0 ... Yes (1.13)\nChecking if you have strict 0 ... Yes (1.07)\nChecking if you have Module::Build 0.38 ... Yes (0.39_01)\nChecking if you have ExtUtils::Install 1.46 ... Yes (1.58)\nConfiguring Crypt-Eksblowfish-0.009\nRunning Build.PL\nCreated MYMETA.yml and MYMETA.json\nCreating new 'Build' script for 'Crypt-Eksblowfish' version '0.009'\n-&gt; OK\nChecking dependencies from MYMETA.json ...\nChecking if you have warnings 0 ... Yes (1.13)\nChecking if you have XSLoader 0 ... Yes (0.16)\nChecking if you have parent 0 ... Yes (0.225)\nChecking if you have Exporter 0 ... Yes (5.66)\nChecking if you have Carp 0 ... Yes (1.26)\nChecking if you have Test::More 0 ... Yes (0.98)\nChecking if you have strict 0 ... Yes (1.07)\nChecking if you have Class::Mix 0.001 ... Yes (0.005)\nChecking if you have MIME::Base64 2.21 ... Yes (3.13)\nChecking if you have Module::Build 0 ... Yes (0.39_01)\nChecking if you have ExtUtils::CBuilder 0.15 ... Yes (0.280206)\nBuilding and testing Crypt-Eksblowfish-0.009\nBuilding Crypt-Eksblowfish\ngcc -I/usr/perl5/5.16.1/lib/i86pc-solaris-thread-multi-64int/CORE -DXS_VERSION=\"0.009\" -DVERSION=\"0.009\" -fPIC -c -D_REENTRANT -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_TS_ERRNO -DPTR_IS_LONG -fno-strict-aliasing -pipe -D_LARGEFILE_\nSOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -O3 -o lib/Crypt/Eksblowfish.o lib/Crypt/Eksblowfish.c\nIn file included from lib/Crypt/Eksblowfish.xs:3:0:\n/usr/perl5/5.16.1/lib/i86pc-solaris-thread-multi-64int/CORE/perl.h:610:24: fatal error: sys/types.h: No such file or directory\ncompilation terminated.\nerror building lib/Crypt/Eksblowfish.o from 'lib/Crypt/Eksblowfish.c' at /usr/perl5/5.16.1/lib/ExtUtils/CBuilder/Base.pm line 177.\n-&gt; FAIL Installing Crypt::Eksblowfish::Bcrypt failed. See /home/george/.cpanm/work/1485301763.12637/build.log for details. Retry with --force to force install it.\ngeorge@bedford:/bailey/lib/perl$\n</code></pre>\n\n<p>There does exist a <code>types.h</code> file in <code>/usr/include/net-snmp</code>. How can I reconcile this difference between the compilation requirements and my system environment. Should I symlink the <code>types.h</code> file to exist where the compiler is looking for it? How can I do this, or is there a better option?</p>\n"}, {"tags": ["regex", "perl", "sed"], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": false, "score": 1, "last_activity_date": 1485310198, "last_edit_date": 1485310198, "creation_date": 1485299554, "answer_id": 41840660, "question_id": 41839849, "link": "https://stackoverflow.com/questions/41839849/sed-or-perl-regex-replace-section-in-file/41840660#41840660", "title": "sed or perl regex replace section in file", "body": "<p>In your command line spec <code>-00ne</code>, you are asking for 'paragraph' mode (two zeros). I think you want to slurp the file if I'm understanding your problem correctly. That would use one zero.</p>\n\n<p>I used <code>perl -0777 -pe 's/^\\s+flannel:.+?(?=^\\s+etcd2)//ms' file.txt</code> to get what I think you want:</p>\n\n<p>Note the flags <code>ms</code>. <code>m</code> makes the <code>^</code> match at the beginning of a 'line' instead of the default behavior of matching at the beginning of a 'string'. And the <code>s</code> flag allows dot (.) to also match newlines which is needed in the solution I gave.</p>\n\n<pre><code>#cloud-config\ncoreos:\n  update:\n    reboot-strategy: \"off\"\n  etcd2:\n    name: controller\n    advertise-client-urls: http://$private_ipv4:2379\n    initial-advertise-peer-urls: http://$private_ipv4:2380\n    listen-client-urls: http://0.0.0.0:2379\n    listen-peer-urls: http://0.0.0.0:2380\n    initial-cluster: controller=http://$private_ipv4:2380\n  units:\n    - name: etcd2.service\n      command: start\n      runtime: true\n\n    - name: docker.service\n      drop-ins:\n        - name: 40-flannel.conf\n          content: |\n            [Unit]\n            Requires=flanneld.service\n            After=flanneld.service\n            [Service]\n            EnvironmentFile=/etc/kubernetes/cni/docker_opts_cni.env\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 1012135, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0d1c2bbed4eb29c7b26c3beeabd7da3b?s=128&d=identicon&r=PG", "display_name": "user1012135", "link": "https://stackoverflow.com/users/1012135/user1012135"}, "edited": false, "score": 0, "creation_date": 1485309951, "post_id": 41840661, "comment_id": 70869455, "body": "thanks  perl -0777 -ne &#39;s/flannel:[^}]+}}//; print&#39; file.txt worked..was just missing an extra } from your original answer"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1485310114, "post_id": 41840661, "comment_id": 70869495, "body": "<b>But a proper way to slurp a file is to specify anything greater than -0400 and -0777</b> Good explanation. As stated in the docs."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1485372499, "post_id": 41840661, "comment_id": 70903843, "body": "@ChrisCharley  Yeah, I may have seen that page a few times :)  I had learned over time to appreciate the precision and authority of the documentation (in Perl), and standards and the like (in other languages).  Most of the time it is the only ultimate answer. (In Perl the true ultimate is the source code  of course.)"}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 3, "last_activity_date": 1485372027, "last_edit_date": 1485372027, "creation_date": 1485299562, "answer_id": 41840661, "question_id": 41839849, "link": "https://stackoverflow.com/questions/41839849/sed-or-perl-regex-replace-section-in-file/41840661#41840661", "title": "sed or perl regex replace section in file", "body": "<p>Given the exact text you show</p>\n\n<pre><code>perl -0777 -ne 's/flannel:[^}]+}//; print' file.txt\n</code></pre>\n\n<p>This works by observation that there is no <code>}</code> inside the text to be removed. It thus uses the <em>negated character class</em>, <code>[^}]</code> which matches any character other than <code>}</code>. So with <code>+</code> it matches all up to the first <code>}</code>. See this <a href=\"http://perldoc.perl.org/perlretut.html#Using-character-classes\" rel=\"nofollow noreferrer\">in perlretut</a> and <a href=\"http://perldoc.perl.org/perlrecharclass.html#Bracketed-Character-Classes\" rel=\"nofollow noreferrer\">in perlrecharclass</a>.\nPlease adjust for other text.</p>\n\n<p>Or use</p>\n\n<pre><code>perl -0777 -ne 's/flannel:.+?(?=etcd2:)+//s; print' file.txt\n</code></pre>\n\n<p>which uses the <em>positive lookahead</em> <code>(?=...)</code>. It is a <em>zero width assertion</em>, meaning that it matches <em>up to</em> that pattern and does not consume it. It just \"looks\" (asserts) that it's there. See it <a href=\"http://perldoc.perl.org/perlretut.html#Looking-ahead-and-looking-behind\" rel=\"nofollow noreferrer\">in perlretut</a>.  In this case we also need the <em>modifier</em> <code>/s</code>, which makes <code>.</code> match the newline, too.</p>\n\n<p>The <code>-0[oct/hex]</code> switch sets the <em>input record separator</em> <code>$/</code>. The <code>-00</code> sets it to an empty line thus reading by paragraphs, which isn't what you need. The <code>-0</code> splits input by <code>null</code> character, which is very unlikely to be in a file so it normally \"works\" for reading the whole file at once. But a proper way to slurp a file is to specify anything greater than <code>-0400</code> and <code>-0777</code> is customary. See <a href=\"http://perldoc.perl.org/perlrun.html#Command-Switches\" rel=\"nofollow noreferrer\">Command line switches in perlrun</a></p>\n\n<p>Here you can use <code>-p</code> instead of <code>-n</code> and then drop <code>print</code>, since <code>-p</code> prints <code>$_</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1485335803, "creation_date": 1485335803, "answer_id": 41847600, "question_id": 41839849, "link": "https://stackoverflow.com/questions/41839849/sed-or-perl-regex-replace-section-in-file/41847600#41847600", "title": "sed or perl regex replace section in file", "body": "<p>It's YAML so use a YAML parser.</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse YAML::XS;\nuse Data::Dumper;\n\n# &lt;&gt; is the magic file handle, it reads files on command line or STDIN. \n# much like grep/sed/awk do.     \nmy $conf = Load ( do { local $/; &lt;&gt; } );\n#print for debugging. \nprint Dumper $conf;\n\n#delete the key you don't want. \ndelete $conf-&gt;{coreos}{flannel};\n\n#print output to STDOUT. \n#You can hack this into in place editing if you\n#want. \nprint Dump $conf;\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 1012135, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0d1c2bbed4eb29c7b26c3beeabd7da3b?s=128&d=identicon&r=PG", "display_name": "user1012135", "link": "https://stackoverflow.com/users/1012135/user1012135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 41840661, "answer_count": 3, "score": 0, "last_activity_date": 1485372027, "creation_date": 1485295624, "last_edit_date": 1485335933, "question_id": 41839849, "link": "https://stackoverflow.com/questions/41839849/sed-or-perl-regex-replace-section-in-file", "title": "sed or perl regex replace section in file", "body": "<p>I have a file, and am trying to regex to remove the the lines that has:</p>\n\n<pre><code>flannel:\n    interface: $private_ipv4\n    etcd_endpoints: {{ .ETCDEndpoints }}\n</code></pre>\n\n<p>I tried to to use this perl command, it ends up removing everything from #cloud-config till -- name: docker.service</p>\n\n<pre><code>perl -i -00ne 'print unless /(flannel:).*([^ ]+).*([^ ]+).*}}/' file.txt\n</code></pre>\n\n<p>file.txt:</p>\n\n<pre><code>#cloud-config\ncoreos:\n  update:\n    reboot-strategy: \"off\"\n  flannel:\n    interface: $private_ipv4\n    etcd_endpoints: {{ .ETCDEndpoints }}\n  etcd2:\n    name: controller\n    advertise-client-urls: http://$private_ipv4:2379\n    initial-advertise-peer-urls: http://$private_ipv4:2380\n    listen-client-urls: http://0.0.0.0:2379\n    listen-peer-urls: http://0.0.0.0:2380\n    initial-cluster: controller=http://$private_ipv4:2380\n  units:\n    - name: etcd2.service\n      command: start\n      runtime: true\n\n    - name: docker.service\n      drop-ins:\n        - name: 40-flannel.conf\n          content: |\n            [Unit]\n            Requires=flanneld.service\n            After=flanneld.service\n            [Service]\n            EnvironmentFile=/etc/kubernetes/cni/docker_opts_cni.env\n            ...\n</code></pre>\n"}, {"tags": ["ajax", "list", "perl", "catalyst"], "comments": [{"owner": {"reputation": 4191, "user_id": 1466640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0630f2d5ac5fb844675c58d3d2dfa57?s=128&d=identicon&r=PG&f=1", "display_name": "AKHolland", "link": "https://stackoverflow.com/users/1466640/akholland"}, "edited": false, "score": 2, "creation_date": 1485291361, "post_id": 41838669, "comment_id": 70862884, "body": "The problem is with whatever code is setting <code>$params-&gt;{parameter_with_many_values}</code>. It&#39;s ending up as a literal string &quot;1&quot;."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 2, "creation_date": 1485291833, "post_id": 41838669, "comment_id": 70863150, "body": "There&#39;s a comma missing before <code>field4</code>."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "edited": false, "score": 1, "creation_date": 1485292198, "post_id": 41838669, "comment_id": 70863340, "body": "That means that $params-&gt;{parameter_with_many_values} does not contain a reference to an array. It contain the scalar value &quot;1&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1485302393, "post_id": 41838992, "comment_id": 70867423, "body": "Yes to all above. Unfortunately I can&#39;t change the module that processes the requests, but I&#39;ll post the workaround once I got it. Thanks for the input :)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1485292302, "last_edit_date": 1485292302, "creation_date": 1485291949, "answer_id": 41838992, "question_id": 41838669, "link": "https://stackoverflow.com/questions/41838669/are-single-element-lists-allowed-in-perl/41838992#41838992", "title": "Are single element lists allowed in perl?", "body": "<p>First of all, you are asking about arrays (a type of variable), not lists (a vague term which can take on numerous definitions, none of which are pertinent here).</p>\n\n<p>Yes, you can have an array with only one element.</p>\n\n<pre><code>$ perl -e'my @a = \"ele\"; CORE::say 0+@a; CORE::say for @a;'\n1\nele\n</code></pre>\n\n<p>That's not the problem. The problem is that </p>\n\n<pre><code>@{$params-&gt;{parameter_with_many_values}}\n</code></pre>\n\n<p>expects</p>\n\n<pre><code>$params-&gt;{parameter_with_many_values}\n</code></pre>\n\n<p>to contain a reference to an array, but it contains <code>1</code> instead. It was probably set using</p>\n\n<pre><code>$params-&gt;{parameter_with_many_values} = @a;   # Assigns number of elements\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>$params-&gt;{parameter_with_many_values} = \\@a;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 1, "creation_date": 1485302223, "post_id": 41839002, "comment_id": 70867374, "body": "Population comes from Catalyst::Request perl module and unfortunately that&#39;s the way it works (meaning that a given paramater could either be a scalar or an array depending on how many inputs carry the same name in the form). Didn&#39;t try mapping but seems like a good workaround. Lemme test..."}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 1, "creation_date": 1485302949, "post_id": 41839002, "comment_id": 70867578, "body": "Oh, it seems you need <code>my $value_or_values = $params-&gt;{param_with_many_values}; my @list_of_values = ref $value_or_values ? @$value_or_values : $value_or_values;</code> and you need to check the value exists at all to prevent <code>undef</code> creeping into the array."}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1485303308, "post_id": 41839002, "comment_id": 70867678, "body": "I just did that and was about to post the answer. That worked like a charm. Thanks a lot for your help :)"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 5, "last_activity_date": 1485303354, "last_edit_date": 1485303354, "creation_date": 1485292010, "answer_id": 41839002, "question_id": 41838669, "link": "https://stackoverflow.com/questions/41838669/are-single-element-lists-allowed-in-perl/41839002#41839002", "title": "Are single element lists allowed in perl?", "body": "<p>Yes, single element lists are OK in Perl, as are arrays and references to such arrays.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\n\nsub new {\n    print Dumper \\@_;\n}\n\nmy $table_model = 'main';\n\nfor my $values ( [ 'a' .. 'c' ],\n                 [ 'd' ]\n) {\n    my $params = { parameter_with_many_values =&gt; $values };\n    my @listofvalues = @{ $params-&gt;{parameter_with_many_values} };\n    my @another_listofvalues = map uc, @listofvalues;\n\n    for my $key (0 .. $#listofvalues) {\n        my $x = rand;\n        $table_model-&gt;new({\n            field1 =&gt; $listofvalues[$key],\n            field2 =&gt; $x,\n            field3 =&gt; $another_listofvalues[$key]\n        });\n    }\n}\n</code></pre>\n\n<p>How do you populate <code>$params-&gt;{parameter_with_many_values}</code>?</p>\n\n<h2>Update</h2>\n\n<p>It seems <a href=\"http://p3rl.org/Catalyst::Request\" rel=\"nofollow noreferrer\">Catalyst::Request</a> should mention that their \"safe\" parameters should be handled as follows:</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\n\nuse Data::Dumper;\n\nfor my $params ( { param_with_many_values =&gt; 'a' },\n                 { param_with_many_values =&gt; [ 'a' .. 'e' ] },\n                 { something =&gt; 'else' }\n) {\n    my $value_or_values = $params-&gt;{param_with_many_values};\n    my @list_of_values = ref $value_or_values     ? @$value_or_values\n                       : defined $value_or_values ? $value_or_values\n                                                  : ();\n    print Dumper \\@list_of_values;\n}\n</code></pre>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 41839002, "answer_count": 2, "score": 2, "last_activity_date": 1485303354, "creation_date": 1485290674, "question_id": 41838669, "link": "https://stackoverflow.com/questions/41838669/are-single-element-lists-allowed-in-perl", "title": "Are single element lists allowed in perl?", "body": "<p>I'm trying to dynamically create a list of values from an AJAX request (using Catalyst), like this:</p>\n\n<pre><code>my @listofvalues         = @{$params-&gt;{parameter_with_many_values}};\n</code></pre>\n\n<p>Then I loop through the list to make database insertions (one for each value). Since I need to loop through various lists like the one above, I need to access the index of the list. I am currently doing it like this:</p>\n\n<pre><code>foreach my $key (0 .. $#listofvalues){\n  $table_model-&gt;new({\n    field1                =&gt; $listofvalues[$key],\n    field2                =&gt; $x,\n    field3                =&gt; $another_listofvalues[$key]\n    field4                =&gt; $yet_another_listofvalues[$key]\n  });\n} \n</code></pre>\n\n<p>This seems to work fine when <strong>two or more</strong> elements are received in the request. Whenever a single element is received, I get an error like</p>\n\n<pre><code>[error] Caught exception in pbitdb::Controller::Subjects-&gt;add \"Can't use string (\"1\") as an ARRAY ref while \"strict refs\" in use at /home/lioneluranl/svn/pbitdb/pbitdb/script/../lib/pbitdb/Controller/Subjects.pm line 119.\"\n</code></pre>\n\n<p>Where, in this case, <strong>1</strong> is the value received and <strong>line 119</strong> is the line where @listofvalues is being declared. </p>\n\n<p>Now I've tried several to workaround this issue, but haven't found anything that works both ways (for a single or for various values). Any suggestions?</p>\n"}, {"tags": ["perl", "file", "path", "substitution"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1485289821, "post_id": 41838376, "comment_id": 70862058, "body": "Welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>. Please read about how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and <a href=\"https://stackoverflow.com/posts/41838376/edit\">edit</a> your question appropriately."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7459112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58c1e17928a332d06e0ba42fd4889cb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Ackerman", "link": "https://stackoverflow.com/users/7459112/tom-ackerman"}, "edited": false, "score": 0, "creation_date": 1486733107, "post_id": 41838497, "comment_id": 71485932, "body": "Thanks everyone - I appreciate the help and the alternative code provided!"}], "tags": [], "owner": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "is_accepted": false, "score": 0, "last_activity_date": 1485290056, "creation_date": 1485290056, "answer_id": 41838497, "question_id": 41838376, "link": "https://stackoverflow.com/questions/41838376/perl-global-substitution-of-a-file-path/41838497#41838497", "title": "Perl global substitution of a file path", "body": "<p>The first problem is that you need to use a different set of delimiters for the substitution operator.  Instead of <code>s///</code>, you can use <code>s{}{}</code>.  Another problem is that you should not use <code>\\Q</code> and <code>\\E</code> on the right side of <code>s///</code> because the right side is not a regular expression.  In your case, you don't need Q/E at all:</p>\n\n<pre><code>s{psoft/batch/cs}{/psoft/batch/csprd}g;\n</code></pre>\n\n<p>Refer to <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">s/PATTERN/REPLACEMENT/</a></p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 2, "last_activity_date": 1485355816, "last_edit_date": 1485355816, "creation_date": 1485295584, "answer_id": 41839833, "question_id": 41838376, "link": "https://stackoverflow.com/questions/41838376/perl-global-substitution-of-a-file-path/41839833#41839833", "title": "Perl global substitution of a file path", "body": "<p>You can't use <code>\\Q</code> to escape a delimiter. For example,</p>\n\n<pre><code>s/\\Qa*b//\n</code></pre>\n\n<p>is equivalent to </p>\n\n<pre><code>s/a\\*b//\n</code></pre>\n\n<p>and not</p>\n\n<pre><code>s/a\\*b\\/\\/...\n</code></pre>\n\n<p>That means </p>\n\n<pre><code>$xl[$idx] =~ s/\\Qpsoft/batch/cs\\E/\\Q/psoft/batch/csprd\\E/g;  \n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>$xl[$idx] =~ s/psoft/batch/cs &lt;junk&gt;\n</code></pre>\n\n<p>Solution:</p>\n\n<pre><code>$xl[$idx] =~ s/psoft\\/batch\\/cs/\\/psoft\\/batch\\/csprd/g;\n</code></pre>\n\n<p>Better:</p>\n\n<pre><code>$xl[$idx] =~ s{psoft/batch/cs}{/psoft/batch/csprd}g;\n</code></pre>\n\n<hr>\n\n<h2>In more details</h2>\n\n<p>There are three steps to parsing an <code>m//</code>, <code>qr//</code> or <code>s///</code> operator.</p>\n\n<p>The first step is to obtain the trailing flags that affect how the regex pattern is parsed (e.g. <code>x</code>, <code>s</code>, <code>m</code>, <code>i</code>, etc). Since Perl doesn't yet know how to parse the regex pattern and to keep costs down, Perl simply looks for the delimiter marking the end of the pattern and the end of the substitution (usually <code>/</code>), paying attention to no other character other than backslashes (<code>\\</code>). <code>\\Q</code> is ignored at this point.</p>\n\n<p>The second step is where the double-quoted string escapes (e.g. <code>\\Q</code>, <code>\\L</code>, etc) and interpolation occurs. Perl won't have a regex pattern until these are processed.</p>\n\n<p>Finally, Perl has a regex pattern and knows how to compile it, so the third step is to compile the regex pattern.</p>\n"}], "owner": {"reputation": 1, "user_id": 7459112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c58c1e17928a332d06e0ba42fd4889cb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Ackerman", "link": "https://stackoverflow.com/users/7459112/tom-ackerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1485355816, "creation_date": 1485289593, "last_edit_date": 1485295372, "question_id": 41838376, "link": "https://stackoverflow.com/questions/41838376/perl-global-substitution-of-a-file-path", "title": "Perl global substitution of a file path", "body": "<p>I am reading a tab delimited file using Perl; and want to apply a global substitution to a file path within this file.  I have read that I need to incorporate Q and E into my substitution command; but I'm not able to get the substitution to work.  I want to replace the partial string psoft/batch/cs with ps/bat/csprd.</p>\n\n<pre><code>$xl[$idx] =~ s/\\Qpsoft/batch/cs\\E/\\Q/psoft/batch/csprd\\E/g;  \n</code></pre>\n"}, {"tags": ["perl", "bioinformatics", "fasta", "fastq", "sequencing"], "answers": [{"tags": [], "owner": {"reputation": 997, "user_id": 1146551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5591d055c85cf5242fb1f159b67aa6a1?s=128&d=identicon&r=PG", "display_name": "heathobrien", "link": "https://stackoverflow.com/users/1146551/heathobrien"}, "is_accepted": false, "score": 0, "last_activity_date": 1485351236, "creation_date": 1485351236, "answer_id": 41852984, "question_id": 41838349, "link": "https://stackoverflow.com/questions/41838349/eliminate-empty-files-in-a-subroutine-in-perl/41852984#41852984", "title": "eliminate empty files in a subroutine in perl", "body": "<p>The easiest thing to do is probably to add a counter to your subroutine to keep track of the number of sequences in the outfile:</p>\n\n<pre><code>sub fastq_fasta {\n    my $counter1 = 0;\n    my $file = shift;\n    ($file_name = $file) =~ s/(.*)$fastq_extension.*/$1/;\n\n# eliminate old files \n\n    my $oldfiles= $file_name.\".fasta\";\n\n    if ($oldfiles){\n        unlink $oldfiles;\n    }\n\n    open LINE,    '&lt;',   $file             or die \"can't read or open $file\\n\";\n    open OUTFILE, '&gt;&gt;', \"$file_name.fasta\" or die \"can't write $file_name\\n\";\n\n    while (\n        defined(my $head    = &lt;LINE&gt;)       &amp;&amp;\n        defined(my $seq     = &lt;LINE&gt;)       &amp;&amp;\n        defined(my $qhead   = &lt;LINE&gt;)       &amp;&amp;\n        defined(my $quality = &lt;LINE&gt;)\n    ) {\n            $counter1 ++;\n            substr($head, 0, 1, '&gt;');\n\n\n            if (!$N_repeat){\n                print OUTFILE $head, $seq;\n\n\n            }\n\n            elsif ($N_repeat){\n\n                    my $number_n=$N_repeat-1;\n\n                if ($seq=~ m/(n)\\1{$number_n}/ig){\n                    $counter1 --;\n                    next;\n                }\n                else{\n                    print OUTFILE $head, $seq;\n                }\n            }\n    }\n\n    close OUTFILE;\n    close LINE;\n    return $counter1;\n}\n</code></pre>\n\n<p>You can then delete files when the returned count is zero:</p>\n\n<pre><code>if (-f $infile) {           # -f es para folder !!\n    fastq_fasta($infile);\n}\nelse {\n    foreach my $file (glob(\"$infile/*.fastq\")) {\n        if (fastq_fasta($file) == 0) { \n            $file =~ s/(.*)$fastq_extension.*/$1.fasta/;\n            unlink $file; \n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 341, "user_id": 4951980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d7e3d14a650ca28c6163781baa4fad1?s=128&d=identicon&r=PG", "display_name": "Frank F&#246;rster", "link": "https://stackoverflow.com/users/4951980/frank-f%c3%b6rster"}, "is_accepted": true, "score": 0, "last_activity_date": 1485352058, "creation_date": 1485352058, "answer_id": 41853283, "question_id": 41838349, "link": "https://stackoverflow.com/questions/41838349/eliminate-empty-files-in-a-subroutine-in-perl/41853283#41853283", "title": "eliminate empty files in a subroutine in perl", "body": "<p>you should check, if something was written to your new file at the end of our <code>fastq_fasta</code> subroutine. Just put your code after the <code>close OUTFILE</code> statement:</p>\n\n<pre><code>close OUTFILE;\nclose LINE;\n\nmy $outfile = $file_name.\".fasta\";\nif (-z $outfile)\n{\n   unlink $outfile || die \"Error while deleting '$outfile': $!\";\n}\n</code></pre>\n\n<p>Additionally, it will be better to add the <code>die/warn</code> statement also to the other unlink line. Empty files should be deleted.</p>\n\n<p>Maybe another solution if you are not fixed to perl, but allowed to use sed and a bash loop:</p>\n\n<pre><code>for i in *.fastq\ndo\n   out=$(dirname \"$i\")/$(basename \"$i\" .fastq).fasta\n   sed -n '1~4{s/^@/&gt;/;N;p}' \"$i\" &gt; \"$out\"\n   if [ -z $out ]\n   then\n      echo \"Empty output file $out\"\n      rm \"$out\"\n   fi\ndone\n</code></pre>\n\n<p>Hope that helps!</p>\n\n<p>Best Frank</p>\n"}], "owner": {"reputation": 311, "user_id": 9097452, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8073dda6ba748ee30788aed8a1e82f0d?s=128&d=identicon&r=PG", "display_name": "abraham", "link": "https://stackoverflow.com/users/9097452/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 41853283, "answer_count": 2, "score": 0, "last_activity_date": 1485352058, "creation_date": 1485289504, "question_id": 41838349, "link": "https://stackoverflow.com/questions/41838349/eliminate-empty-files-in-a-subroutine-in-perl", "title": "eliminate empty files in a subroutine in perl", "body": "<p>I want to a add a code in the next script to eliminate those empty output files. </p>\n\n<p>The script convert a single fastq file or all the fastq files in a folder to fasta format, all the output fasta files keep the same name of the fastq file; the script present an option to exclude all the sequences that present a determinate number of NNN repeats (NNNNNNNNNNNNNNNNNNATAGTGAAGAATGCGACGTACAGGATCATCTA), I added this option because some sequences present only NNNNN in the sequences, example: if the -n option is equal to 15 (-n 15) it will exclude all the sequences that present 15 o more N repeats, to this point the code works well, but it generate an empty files (in those fastq files that all the sequences present 15 or more N repeats are excluded). I want to eliminate all the empty files (without sequences) and add a count of how many files were eliminate because it were empty. </p>\n\n<p>Code:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\nuse Getopt::Long;\n\nmy ($infile, $file_name, $file_format, $N_repeat, $help, $help_descp,\n    $options, $options_descrp, $nofile, $new_file, $count);\n\nmy $fastq_extension = \"\\\\.fastq\";\n\nGetOptions (\n    'in=s'      =&gt; \\$infile,\n    'N|n=i'     =&gt;\\$N_repeat,\n    'h|help'    =&gt;\\$help,\n    'op'        =&gt;\\$options\n);\n\n # Help\n\n $help_descp =(qq(              \n              Ussaje:\n              fastQF -in fastq_folder/ -n 15\n                      or\n              fastQF -in file.fastq -n 15\n              ));\n\n $options_descrp =(qq(\n\n            -in      infile.fastq or fastq_folder/                  required\n            -n       exclude sequences with more than N repeat      optional\n            -h       Help description                               optional\n            -op      option section                                 optional\n                   ));\n\n $nofile =(qq(\n            ERROR:  \"No File or Folder Were Chosen !\"\n\n                Usage:\n                    fastQF -in folder/\n\n                Or See -help or -op section\n           ));\n\n # Check Files \n\n    if ($help){\n        print \"$help_descp\\n\";\n        exit;\n    }\n    elsif ($options){\n        print \"$options_descrp\\n\";\n        exit;\n    }\n\n    elsif (!$infile){\n        print \"$nofile\\n\";\n        exit;\n    }\n\n\n #Subroutine to convert from fastq to fasta\n\n    sub fastq_fasta {\n\n        my $file = shift;\n        ($file_name = $file) =~ s/(.*)$fastq_extension.*/$1/;\n\n# eliminate old files \n\n        my $oldfiles= $file_name.\".fasta\";\n\n        if ($oldfiles){\n            unlink $oldfiles;\n        }\n\n        open LINE,    '&lt;',   $file             or die \"can't read or open $file\\n\";\n        open OUTFILE, '&gt;&gt;', \"$file_name.fasta\" or die \"can't write $file_name\\n\";\n\n        while (\n            defined(my $head    = &lt;LINE&gt;)       &amp;&amp;\n            defined(my $seq     = &lt;LINE&gt;)       &amp;&amp;\n            defined(my $qhead   = &lt;LINE&gt;)       &amp;&amp;\n            defined(my $quality = &lt;LINE&gt;)\n        ) {\n                substr($head, 0, 1, '&gt;');\n\n\n                if (!$N_repeat){\n                    print OUTFILE $head, $seq;\n\n\n                }\n\n                elsif ($N_repeat){\n\n                        my $number_n=$N_repeat-1;\n\n                    if ($seq=~ m/(n)\\1{$number_n}/ig){\n                        next;\n                    }\n                    else{\n                        print OUTFILE $head, $seq;\n                    }\n                }\n        }\n\n        close OUTFILE;\n        close LINE;\n    }\n\n # execute the subrutine to extract the sequences\n\n    if (-f $infile) {           # -f es para folder !!\n        fastq_fasta($infile);\n    }\n    else {\n        foreach my $file (glob(\"$infile/*.fastq\")) {\n        fastq_fasta($file);\n        }\n    }\n\n exit;\n</code></pre>\n\n<p>I have tried to use the next code outside of the subroutine (before exit) but it just work for the last file :</p>\n\n<pre><code>$new_file =$file_name.\".fasta\";\n        foreach ($new_file){\n\n            if (-z $new_file){\n                $count++;\n                if ($count==1){\n                    print \"\\n\\\"The choosen File present not sequences\\\"\\n\";\n                    print \" \\\"or was excluded due to -n $N_repeat\\\"\\n\\n\";\n\n                }\n                elsif ($count &gt;=1){\n                    print \"\\n\\\"$count Files present not sequences\\\"\\n\";\n                    print \" \\\" or were excluded due to -n $N_repeat\\\"\\n\\n\";\n\n                }\n\n                unlink $new_file;\n            }\n        }\n</code></pre>\n\n<p>and I just have tried something similar inside of the subroutine but this last code don\u00b4t work !!!!</p>\n\n<p>Any Advise !!!!???</p>\n\n<p>Thanks So Much !!!</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 3, "creation_date": 1485284671, "post_id": 41836856, "comment_id": 70859140, "body": "Explode on tabs, then analyze it?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1485284850, "post_id": 41836856, "comment_id": 70859241, "body": "This is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Please create one and <a href=\"https://stackoverflow.com/posts/41836856/edit\">edit</a> your question."}, {"owner": {"reputation": 211, "user_id": 6595879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97b48577f35bec769668efcc531a1901?s=128&d=identicon&r=PG&f=1", "display_name": "King of NES", "link": "https://stackoverflow.com/users/6595879/king-of-nes"}, "edited": false, "score": 0, "creation_date": 1538674567, "post_id": 41836856, "comment_id": 92236679, "body": "The answer I was looking for originally has already been done. Modified my question to reflect what I was actually asking"}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485286502, "post_id": 41837064, "comment_id": 70860214, "body": "No need to shorten the regex as you did. 5.10+ uses a trie for alternations, so you shouldn&#39;t get any performance benefits from the groupings."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1485287547, "post_id": 41837064, "comment_id": 70860880, "body": "Also, the original regex was more readable.  And when the US annexes Canada, the original will be easier to add the extra state(s)! :D  (kidding about the politics, but not about the maintainability)"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485287764, "post_id": 41837064, "comment_id": 70861001, "body": "OK, OK, removed the shorter part."}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": true, "score": 1, "last_activity_date": 1485287753, "last_edit_date": 1485287753, "creation_date": 1485285169, "answer_id": 41837064, "question_id": 41836856, "link": "https://stackoverflow.com/questions/41836856/perl-regex-return-the-results-of-the-regex/41837064#41837064", "title": "Perl Regex-Return the results of the regex", "body": "<p>You need list context to get the matched substring back. You can force list context by enclosing the argument to <code>my</code> into parentheses:</p>\n\n<pre><code>if (my ($stateCode) = $token =~ /\\b(AL|AK|AS|AZ|AR|CA|CO|CT|DE|DC|FL|GA|GU|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MH|MA|MI|FM|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|MP|OH|OK|OR|PW|PA|PR|RI|SC|SD|TN|TX|UT|VT|VA|VI|WA|WV|WI|WY)\\s{1,} \\d{5,}\\b/) {\n    print $stateCode, \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 6595879, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97b48577f35bec769668efcc531a1901?s=128&d=identicon&r=PG&f=1", "display_name": "King of NES", "link": "https://stackoverflow.com/users/6595879/king-of-nes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 41837064, "answer_count": 1, "score": -4, "last_activity_date": 1538674519, "creation_date": 1485284259, "last_edit_date": 1538674519, "question_id": 41836856, "link": "https://stackoverflow.com/questions/41836856/perl-regex-return-the-results-of-the-regex", "title": "Perl Regex-Return the results of the regex", "body": "<p>I have a file with a series of strings. I need the 2 letter state and zip.</p>\n\n<pre><code>12354   Jane Jones     123 S Park Ave Kansas City KS 65012\n\n\nmy @token = split $line, \\t;\nforeach my $token(@token){\n&gt; $stateCode = $token =~ /\\b(AL|AK|AS|AZ|AR|CA|CO|CT|DE|DC|FL|GA|GU|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MH|MA|MI|FM|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|MP|OH|OK|OR|PW|PA|PR|RI|SC|SD|TN|TX|UT|VT|VA|VI|WA|WV|WI|WY)\\s{1,} \\d{5,}\\b/;}\n</code></pre>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1485286503, "post_id": 41835772, "comment_id": 70860216, "body": "fail_on_error: Affects the behaviour of response handling when a 4xx or 5xx response code is received. In your example the host &#39;sdfsdfsdf24.com&#39; does not even return anything as it doesn&#39;t exist. So this parameter will not have any affect."}, {"owner": {"reputation": 11, "user_id": 7464122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a9c86a0308a59357b9a37d57f40266?s=128&d=identicon&r=PG&f=1", "display_name": "user7464122", "link": "https://stackoverflow.com/users/7464122/user7464122"}, "reply_to_user": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1485286685, "post_id": 41835772, "comment_id": 70860334, "body": "Regardless of the fail_on_error boolean setting, when the program reaches sdfsdfsdf24.com it quits and doesn&#39;t go onto the next URL which would be msn.com. I&#39;m trying to resolve this so that it continues to continue, on to msn.com and eventually many more URLs."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1485289584, "post_id": 41835772, "comment_id": 70861931, "body": "I don&#39;t see any solution at the moment to solve this as I don&#39;t know the module very well either, but you should try to run a function which does first try resolve all hosts and filter out the bad ones. The fatal error happens because the host cannot be resolved (not because it&#39;s not online). Hosts that are simply not online should not make trouble. I made a concurrent call example in this topic <a href=\"http://stackoverflow.com/questions/41252427/cant-fork-more-than-200-processes-sometimes-less-depending-on-memory-cpu-us/41253458#41253458\" title=\"cant fork more than 200 processes sometimes less depending on memory cpu us\">stackoverflow.com/questions/41252427/&hellip;</a> with another module, maybe it suits you."}, {"owner": {"reputation": 11, "user_id": 7464122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a9c86a0308a59357b9a37d57f40266?s=128&d=identicon&r=PG&f=1", "display_name": "user7464122", "link": "https://stackoverflow.com/users/7464122/user7464122"}, "reply_to_user": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1485290866, "post_id": 41835772, "comment_id": 70862590, "body": "I tried mojo IOLoop::Delay, but it just did not perform the way I was hoping (asynchronously) . I&#39;m not sure what the solution is. This seemed to have a chance except that it throws itself dead when a host can&#39;t be resolved or doesn&#39;t respond to a http/s request. I may just go back to threads or better yet hire someone. I&#39;m completely out of ideas on how to fix this."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1485294399, "post_id": 41835772, "comment_id": 70864335, "body": "The Mojo is performing the calls concurrent like in your example. The result are then posted into the callback once finished. Regarding your code: I would just try to add a function which resolves the hosts in @urls then onyl continue with resolvable hosts. According to the Net::Async::HTTP documentation failed connections are not fatal, but unresolvable hosts seem to be fatal, Resolving hosts can be done very fast. I don&#39;t find any parameter to handle unresolvable hosts errors in the Net::Async:HTTP documentation."}, {"owner": {"reputation": 11, "user_id": 7464122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a9c86a0308a59357b9a37d57f40266?s=128&d=identicon&r=PG&f=1", "display_name": "user7464122", "link": "https://stackoverflow.com/users/7464122/user7464122"}, "reply_to_user": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 1, "creation_date": 1485298313, "post_id": 41835772, "comment_id": 70866090, "body": "I could do that easy. The problem is, is that its failing with a bad proxy set. When the proxy doesnt work, then it can&#39;t resolve the address, and thus it fails and quits. I&#39;&#39;d easily do that if it solved the problem. It works fine, and wonderfull when the proxy that is being used is working. The program itself is a proxy tester, and the URL being tested is actually always valid when the proxy is working."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485299759, "post_id": 41835772, "comment_id": 70866616, "body": "This might sound naive as I&#39;ve never used concurrent stuff, but can&#39;t you just wrap the whole <code>$http-&gt;GET()...;</code> call into an <code>eval</code> or <code>try</code> block to catch actual failures? Of course that assumes it <code>dies</code>."}, {"owner": {"reputation": 11, "user_id": 7464122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a9c86a0308a59357b9a37d57f40266?s=128&d=identicon&r=PG&f=1", "display_name": "user7464122", "link": "https://stackoverflow.com/users/7464122/user7464122"}, "edited": false, "score": 0, "creation_date": 1485300840, "post_id": 41835772, "comment_id": 70866936, "body": "I&#39;m using a proxy_host and proxy_port setting in the RT testing, which fails the get $URL almost 99% of the time. I did not include that part because I get the same result with a bad URL (which would be bad when a proxy can&#39;t resolve it)."}, {"owner": {"reputation": 11, "user_id": 7464122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a9c86a0308a59357b9a37d57f40266?s=128&d=identicon&r=PG&f=1", "display_name": "user7464122", "link": "https://stackoverflow.com/users/7464122/user7464122"}, "edited": false, "score": 0, "creation_date": 1485301710, "post_id": 41835772, "comment_id": 70867217, "body": "A bad URL needs to be handled in a way that isn&#39;t fatal, which appears to be the case when it can&#39;t resolve it, which can happen with a bad host, such as with sdfsdfsdf24.com, which is in my example, or when a bad proxy is set, such in my RealTime program, with means every $url would be bad, but the first occurrence is fatal and kills the program"}], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 0, "last_activity_date": 1485457594, "last_edit_date": 1592644375, "creation_date": 1485457594, "answer_id": 41881045, "question_id": 41835772, "link": "https://stackoverflow.com/questions/41835772/cant-use-concurrent-ascynrounous-urls-with-netasynchttp-it-quits-and-doe/41881045#41881045", "title": "Can&#39;t use concurrent ascynrounous URLs with Net::Async::HTTP .. It quits and doesn&#39;t goto the next URL", "body": "<p>Your example really works well without any proxy, I tested and did some changes:</p>\n<pre><code>Fetching URL: '. $url;\n\n        $http-&gt;GET($url)-&gt;on_done(\n            sub {\n                my $response = shift;\n                say &quot;Response: &quot;.$response-&gt;code();\n            }\n          )-&gt;on_fail(\n            sub {\n                my $fail = shift;\n                say &quot;Failed: &quot; . $fail;\n            }\n          );\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>Fetching URL: http://cnn.com\nResponse: 200\nFetching URL: http://google.com\nResponse: 302\nFetching URL: http://sdfsdfsdf24.com\nResponse: 403\nFetching URL: http://msn.net\nResponse: 200\n</code></pre>\n<p>As this example is not doing async call's the URL's are on a queue and being processed one by one.</p>\n<p>Behind the scenes when you are doing a request to a target in your case to some URL's, at the low level the connection is made through a socket connection.</p>\n<p>If you have a proxy which is not configured between your script and the intenet, there is no connection and it will raise an exception and your script will die like:</p>\n<pre><code>Fetching URL: http://cnn.com\nFailed: Timed out\n</code></pre>\n<p>The variable <code>$!</code> is set and the error &quot;<strong>Operation now in progress</strong>&quot; appears, in fact your request didn't established any connection it just tried to establish one without success.</p>\n<p>There are some points which you can check for example:</p>\n<blockquote>\n<p>1 - Is the proxy working ?</p>\n<p>2 - Do I have internet connection ?</p>\n<p>3 - Is the URL I am testing working ?</p>\n</blockquote>\n<p>If you are having problems with proxy, your script need a small adjust that you can get more info in the <a href=\"http://search.cpan.org/%7Epevans/Net-Async-HTTP-0.41/lib/Net/Async/HTTP.pm#proxy_host_=%3E_STRING\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>$http-&gt;configure( proxy_host =&gt; 'xx.xx.xx.xx');<br />\n$http-&gt;configure( proxy_port =&gt; 1234);</p>\n</blockquote>\n<p>Supposing that your proxy is configured, you can check if you have fully access to the internet and aim some target like that URL's.</p>\n<p>Trying to access the URLs it will provide you a response code and depending on the code you can do something.</p>\n<p>As an alternative solution you could use <a href=\"http://search.cpan.org/%7Eoalders/libwww-perl-6.16/lib/LWP/UserAgent.pm\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> to make simple requests and check the response code.</p>\n<pre><code>use LWP::UserAgent;\n\n my $ua = LWP::UserAgent-&gt;new;\n $ua-&gt;timeout(10);\n $ua-&gt;env_proxy;\n\n my $response = $ua-&gt;get('http://search.cpan.org/');\n\n if ($response-&gt;is_success) {\n     print $response-&gt;decoded_content;  # or whatever\n }\n else {\n     die $response-&gt;status_line;\n }\n</code></pre>\n<p>And even with some bad stats like 4XX for example Net::Async::HTTP won't be friendly to use this module for a simple purpose as it can't handle the exceptions like you want.</p>\n"}], "owner": {"reputation": 11, "user_id": 7464122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85a9c86a0308a59357b9a37d57f40266?s=128&d=identicon&r=PG&f=1", "display_name": "user7464122", "link": "https://stackoverflow.com/users/7464122/user7464122"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485457594, "creation_date": 1485280598, "last_edit_date": 1485282711, "question_id": 41835772, "link": "https://stackoverflow.com/questions/41835772/cant-use-concurrent-ascynrounous-urls-with-netasynchttp-it-quits-and-doe", "title": "Can&#39;t use concurrent ascynrounous URLs with Net::Async::HTTP .. It quits and doesn&#39;t goto the next URL", "body": "<p>Using the concurrent asynchronous URL example for Net::Async::HTTP, the first encounter of bad URL (timeout, doesn't exist, etc) error causes the program to fail and exit completely, without continuing to the next URL in the array. Is the problem my code or the module? </p>\n\n<p>I tried setting fail_on_error to 0, and even 1, but it had no obvious results.</p>\n\n<pre><code> #!/bin/perl\n\n use IO::Async::Loop;\n use Net::Async::HTTP;\n use Future::Utils qw(fmap_void);\n use strict;\n use warnings;\n use feature 'say';\n\n my $ua_string = \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/43.0.2357.81 Safari/537.36\";\n my $timeout = 10;\n my $max_redirects = 10;\n my $max_in_flight = 10;\n my $max_connections_per_host = 10;\n my $stall_timeout = 10;\n my $max_recurse            = \"10\";\n my $max_per_host           = \"10\";\n\n my @URLs = ( \"http://cnn.com\", \"http://google.com\", \"http://sdfsdfsdf24.com\", \"http://msn.net\" );\n my $loop   = IO::Async::Loop-&gt;new();\n my $http = Net::Async::HTTP-&gt;new();\n\n $loop-&gt;add($http);\n my $future = fmap_void {\n     my ( $url ) = @_;\n     $http-&gt;configure(user_agent =&gt; $ua_string);\n     $http-&gt;configure(timeout =&gt; $timeout );\n     $http-&gt;configure(max_redirects =&gt; $max_redirects);\n     $http-&gt;configure(max_in_flight =&gt; $max_in_flight);\n     $http-&gt;configure(max_connections_per_host =&gt; $max_connections_per_host);\n     $http-&gt;configure(stall_timeout =&gt; $stall_timeout);\n     $http-&gt;configure(fail_on_error =&gt; '0' );\n\n     $http-&gt;GET($url)-&gt;on_done(\n         sub {\n             my $response = shift;\n             say \"Response: $response-&gt;code\";\n           }\n       )-&gt;on_fail(\n         sub {\n             my $fail = shift;\n             say \"Failed: $fail\";\n         }\n       );\n }\n foreach =&gt; \\@URLs;\n $loop-&gt;await($future);\n</code></pre>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 0, "creation_date": 1485274119, "post_id": 41832817, "comment_id": 70852489, "body": "so <code>&quot;Lorem&quot; ipsum dolor sit amet, &quot;consectetur&quot; adipiscing elit.</code> should give <code>Lorem&quot; ipsum dolor sit amet, &quot;consectetur&quot; adipiscing elit.</code>?"}, {"owner": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "reply_to_user": {"reputation": 1371, "user_id": 5798435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46e85c028ee4f738679c57821206d870?s=128&d=identicon&r=PG&f=1", "display_name": "Mukesh Ingham", "link": "https://stackoverflow.com/users/5798435/mukesh-ingham"}, "edited": false, "score": 0, "creation_date": 1485274487, "post_id": 41832817, "comment_id": 70852748, "body": "nope, all quotes inside line should be save.  Sorry for the inaccurate explanation"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1485274558, "post_id": 41832817, "comment_id": 70852813, "body": "This looks like an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\"><code>XY problem</code></a>. Can you expand a bit on the problem you&#39;re trying to solve?"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1485275351, "post_id": 41832817, "comment_id": 70853397, "body": "Please <a href=\"https://stackoverflow.com/posts/41832817/edit\">edit</a> your question to show what output you want to generate for each line of the example data."}, {"owner": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "edited": false, "score": 0, "creation_date": 1485275681, "post_id": 41832817, "comment_id": 70853634, "body": "Sorry for that.   I have file with data /example above/. I have to go line by line with regex. It should remove all quotes on beginning and end /with semicolon sometimes/ of the line but only in this case &quot;content&quot;;"}, {"owner": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "edited": false, "score": 0, "creation_date": 1485275710, "post_id": 41832817, "comment_id": 70853653, "body": "Yes all inside should be save. So lines from my example - line 3 and 4 should be untouched."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 1, "creation_date": 1485278673, "post_id": 41832817, "comment_id": 70855585, "body": "There&#39;s no way to do that without diving to something from far more complicated. Consider this case: <code>&quot;Lorem&quot; ipsum dolor sit amet, consectetur adipiscing &quot;elit&quot;</code>: I don&#39;t think you want this kind of result: <code>Lorem&quot; ipsum dolor sit amet, consectetur adipiscing &quot;elit</code>?"}, {"owner": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "edited": false, "score": 0, "creation_date": 1485282489, "post_id": 41832817, "comment_id": 70857998, "body": "You have right, I don&#39;t want but I can agree with that. Something is better that nothing. If regex will work for three lines as I expected and for one of them not, it is acceptable for me."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "edited": false, "score": 0, "creation_date": 1485275177, "post_id": 41833149, "comment_id": 70853271, "body": "Yep it will match but whole line, I need to match this kind of line but only quotes. If will be possible to use lookahead for this (.+) to take out match."}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1485274760, "creation_date": 1485274760, "answer_id": 41833149, "question_id": 41832817, "link": "https://stackoverflow.com/questions/41832817/regex-how-to-remove-inital-and-final-quotes-from-lines/41833149#41833149", "title": "Regex: how to remove inital and final quotes from lines", "body": "<p>This might solve your problem:</p>\n\n<pre><code>^\"(.+)\";?$\n</code></pre>\n\n<p>See it <a href=\"https://regex101.com/r/Db3GhQ/1\" rel=\"nofollow noreferrer\"><strong>working on regex101.com</strong></a> (and mind the modifiers!).</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "edited": false, "score": 0, "creation_date": 1485276696, "post_id": 41833473, "comment_id": 70854314, "body": "Good idea but I&#39;m able only to put regex. Basically it should works in notepad++, just only regex. I know that it complicated a lot."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "edited": false, "score": 0, "creation_date": 1485276937, "post_id": 41833473, "comment_id": 70854484, "body": "@Martin I don&#39;t understand your comment. <code>&#47;^(&quot;?)(.+?)\\1;?$&#47;</code> is a regex."}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "reply_to_user": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "edited": false, "score": 0, "creation_date": 1485276996, "post_id": 41833473, "comment_id": 70854519, "body": "To &quot;remove content&quot;, <code>s&#47;^(&quot;?)(.+?)\\1;?$&#47;$2&#47;</code> will do the job."}], "tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": false, "score": 0, "last_activity_date": 1485275605, "creation_date": 1485275605, "answer_id": 41833473, "question_id": 41832817, "link": "https://stackoverflow.com/questions/41832817/regex-how-to-remove-inital-and-final-quotes-from-lines/41833473#41833473", "title": "Regex: how to remove inital and final quotes from lines", "body": "<pre><code>my (undef, $result) = $input =~ /^(\"?)(.+?)\\1;?$/;\n</code></pre>\n\n<p>When the line begins with a quote and ends with a quote (plus-or-minus a semi-colon), the data inside the quotes is captured.\nIf a quote doesn't appear at both the beginning and the end of the line, then any other quotes are included in the result.</p>\n\n<p>The payload is in the second captured group, so you want to ignore the first result (or take <code>$2</code> after running the pattern match).</p>\n\n<pre><code>while (&lt;DATA&gt;) {\n    if (/^(\"?)(.+?)\\1;?$/) {\n        print $2;\n    } else {\n        print \"No match: $_\";\n    }\n}\n__DATA__\n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\"\n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\";\nLorem ipsum dolor sit amet, \"consectetur\" adipiscing elit.\n\"Lorem\" ipsum dolor sit amet, \"consectetur\" adipiscing elit.\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit.\nLorem ipsum dolor sit amet, consectetur adipiscing elit.\nLorem ipsum dolor sit amet, \"consectetur\" adipiscing elit.\n\"Lorem\" ipsum dolor sit amet, \"consectetur\" adipiscing elit.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 0, "last_activity_date": 1485278637, "last_edit_date": 1485278637, "creation_date": 1485276558, "answer_id": 41833796, "question_id": 41832817, "link": "https://stackoverflow.com/questions/41832817/regex-how-to-remove-inital-and-final-quotes-from-lines/41833796#41833796", "title": "Regex: how to remove inital and final quotes from lines", "body": "<p>I think you mean all of the line, <em>except</em> completely surrounding quotes.</p>\n\n<p>Backreferences are the key here. Using a character class, you can even use both single and double quotes:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nmy $data = &lt;&lt;'DATA';\n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\"\n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\";\nLorem ipsum dolor sit amet, \"consectetur\" adipiscing elit.\n\"Lorem\" ipsum dolor sit amet, \"consectetur\" adipiscing elit.\nDATA\n\nfor ( split /^/, $data ) {\n    printf '-&gt;%s&lt;-'.$/, $2 if /^([\"']?)(.*)\\g1;?$/;\n}\n</code></pre>\n\n<p>The last example with your updated question doesn't work with this solution.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1485334040, "last_edit_date": 1485334040, "creation_date": 1485281836, "answer_id": 41836120, "question_id": 41832817, "link": "https://stackoverflow.com/questions/41832817/regex-how-to-remove-inital-and-final-quotes-from-lines/41836120#41836120", "title": "Regex: how to remove inital and final quotes from lines", "body": "<p>Try this:</p>\n\n<pre><code>$s = $1 if $s =~ /^\"([^\"]*)\";$/;\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 7463639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80cd2faca1bfadba960f8c69703a3aee?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7463639/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 2, "answer_count": 4, "score": -1, "last_activity_date": 1485334040, "creation_date": 1485273917, "last_edit_date": 1485279126, "question_id": 41832817, "link": "https://stackoverflow.com/questions/41832817/regex-how-to-remove-inital-and-final-quotes-from-lines", "title": "Regex: how to remove inital and final quotes from lines", "body": "<p>I would like you to ask for help in creation regex.\nI have something like notepad++ and I have only one field to put regex /this software uses perl to parse/ so I can not use the programming language.\nRegex should match quotes on beginning and end of the line /sometimes with semicolon after final quote/ but without content because I'm using it to remove mentioned quotes. </p>\n\n<p>Input data:  </p>\n\n<pre><code>\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\"\n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\";\nLorem ipsum dolor sit amet, \"consectetur\" adipiscing elit.\n\"Lorem\" ipsum dolor sit amet, \"consectetur\" adipiscing \"elit.\"\n</code></pre>\n\n<p>Expected result:  </p>\n\n<pre><code>Lorem ipsum dolor sit amet, consectetur adipiscing elit\nLorem ipsum dolor sit amet, consectetur adipiscing elit.\nLorem ipsum dolor sit amet, \"consectetur\" adipiscing elit.\n\"Lorem\" ipsum dolor sit amet, \"consectetur\" adipiscing \"elit\"\n</code></pre>\n\n<p>Thanks,<br>\nMartin </p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485273872, "post_id": 41832420, "comment_id": 70852309, "body": "To the close-vote: I don&#39;t think it&#39;s unclear, it&#39;s just a bit unstructured. Jonathan, please take a moment to <a href=\"https://stackoverflow.com/posts/41832420/edit\">edit</a> your question and remove typos. Try to get a bit more structure in. So you want to measure how ofter per second you are running some code. Is this for a benchmark, as a debug output, or part of what your program is supposed to do as some sort of status? Do you know how to send the requests? (I think yo do). No need to feel dumb. Your approach is correct, but you need to do some calculations. Some of your pseudo-code is very high-level. We need to drill it down more."}, {"owner": {"reputation": 133, "user_id": 342111, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ekbgw.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/342111/jonathan"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485282059, "post_id": 41832420, "comment_id": 70857737, "body": "Hello @simbabque, do you think it&#39;s better now? thx"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485289834, "post_id": 41832420, "comment_id": 70862071, "body": "Yes. Thank you. So have you researched how to do it yourself? I&#39;m not at a computer so I cannot write code now, but it&#39;s pretty clear what you need to do. With each iteration you check the time delta, and whenever it increases by a full number you generate output."}, {"owner": {"reputation": 133, "user_id": 342111, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ekbgw.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/342111/jonathan"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485292685, "post_id": 41832420, "comment_id": 70863555, "body": "I&#39;m still trying to calc this time delta, still no success. An example would be very helpful!"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485294632, "post_id": 41832420, "comment_id": 70864442, "body": "You will need Time::HiRes to get micro seconds. Then you need two variables to count. One with the int and one to add time per iteration. After that you check if the micro time variable is higher than the int. If yes, output the count of request and reset it. Then increment the int var."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1485294730, "post_id": 41832420, "comment_id": 70864478, "body": "@Jonathan And please show us what you are trying. Once you have some sensible code add it.  (It doesn&#39;t have to be <i>correct</i> -- that is the question.)  It is much easier to help you out that way, and you generally get far more advice than expected, and you&#39;ll find that people are very ready to do so when you post what you have done."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485297355, "post_id": 41832420, "comment_id": 70865635, "body": "@zdim I think he&#39;s already done some good improvements, even without code. I am at a computer now and will try to hack something quick. But I still don&#39;t understand <i>why</i> he needs those numbers."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485298995, "post_id": 41832420, "comment_id": 70866347, "body": "@simbabque  I think the numbers would be just to keep track of things. I remember timing response (and averages) to deduce the server&#39;s load, so to make my requests more sparse when the load increases."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485299075, "post_id": 41832420, "comment_id": 70866379, "body": "@simbabque  Thanks for other info -- I do know that. It&#39;s just that sometimes it makes it easier to scan through comments when they&#39;re tagged, in situtations when OP responds to a particular user without tagging them. Then we end up with a stream of comments between various people. So I add &#39;at&#39;."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485299224, "post_id": 41832420, "comment_id": 70866437, "body": "Makes sense @zdim. Just checking. :) I&#39;ve only done rate-limiting in general to make sure we don&#39;t do more than we are allowed. But I think I&#39;ve got an okish implementation in my answer below."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485301057, "post_id": 41832420, "comment_id": 70866999, "body": "@simbabque Yes, that&#39;s pretty much it I think.  They could also opt for simply timing each request and saving those times, and then later analyze performance, take various avergaes, etc."}], "answers": [{"comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1485301292, "post_id": 41840568, "comment_id": 70867072, "body": "Perhaps add a note that they should make sure not to bombard the server with too much? (With the timing it can even be custom, dynamic. What could be their unstated purpose.)"}, {"owner": {"reputation": 133, "user_id": 342111, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ekbgw.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/342111/jonathan"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1485348895, "post_id": 41840568, "comment_id": 70887905, "body": "No @zdim, I had no unstated purposes. I just wanted to know how to calc the req/s of my application. Using the Time::HiRes did the trick. Thx @simbabque. To add the req/min I added <b>$sum_towards_minute</b> and <b>$req_per_minute</b>, then I did the same <i>IF</i> but <i>&gt; 60</i> for the new <i>minute</i> vars. To control and test, I changed the <i>do_request</i> to <code>sub do_request {     sleep(0.5); }</code> of course I had to overwrite the old <i>sleep</i> and use Time::HiRes <i>sleep</i>."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 133, "user_id": 342111, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ekbgw.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/342111/jonathan"}, "edited": false, "score": 0, "creation_date": 1485349143, "post_id": 41840568, "comment_id": 70888073, "body": "@Jonathan excellent! I&#39;m glad this was helpful and that you actually learned something. :) We don&#39;t have a lot of people around here who are interested in learning recently it seems."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 133, "user_id": 342111, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ekbgw.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/342111/jonathan"}, "edited": false, "score": 0, "creation_date": 1485371034, "post_id": 41840568, "comment_id": 70902992, "body": "@Jonathan Thanks for the explanation, I see now the comment on that in your question. I thought that you may want to regulate how often you go to the server, thus the timing. (I used to do similar things.) Didn&#39;t mean to complain about it -- and doing it just so is fine, of course :)  I time things all the time."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 2, "last_activity_date": 1485299096, "creation_date": 1485299096, "answer_id": 41840568, "question_id": 41832420, "link": "https://stackoverflow.com/questions/41832420/how-to-code-an-function-to-print-my-transactions-per-second-min/41840568#41840568", "title": "How to code an function to print my transactions per second/min", "body": "<p>I've prepared an example for you. Your algorithm is pretty sound. Here's an implementation that does the seconds only. You should be able to go from there.</p>\n\n<p>It uses <a href=\"https://metacpan.org/pod/Time::HiRes\" rel=\"nofollow noreferrer\">Time::HiRes</a>, which is included with your old Perl. We need <code>usleep</code> only to simulate the requests. The<code>tv_interval</code> function gets the delta between two microsecond-times, and <code>gettimeofday</code> grabs the current microsecond-time.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Time::HiRes qw(tv_interval usleep gettimeofday);\n\n$|++; # disable output buffer\n\nmy $req_per_second     = 0; # count requests per second\nmy $sum_towards_second = 0; # sum intervals towards one full second\nmy $last_timeofday     = [gettimeofday]; # start of each interval\n\nforeach my $i ( 1 .. 10000 ) {\n    do_request();\n\n    my $new_timeofday = [gettimeofday]; # end for delta\n    my $elapsed = tv_interval( $last_timeofday, $new_timeofday ); # get the delta\n    $last_timeofday = $new_timeofday; # new time is old time for the next round\n    $sum_towards_second += $elapsed; # add elapsed time to go towards one second\n    $req_per_second++; # we did one request within the current second\n\n    # when we arrive at a full second we reset\n    if ( $sum_towards_second &gt; 1.0 ) {\n        printf \"approximately %d req/s\\n\", $req_per_second;\n        $sum_towards_second = $req_per_second = 0;\n    }\n}\n\nsub do_request {\n    usleep rand 1000;    # emulate the request\n}\n</code></pre>\n\n<p>This algorithm is close to your idea, and also close to what I sketched out in my comment. In every iteration we start with doing the request, then take the current timestamp. We calculate the delta to the last timestamp and add it to a counter. If that counter reaches <code>1</code>, we print the number of requests we've done in that second. Then we can reset both the time counter and the request counter.</p>\n\n<p>The output looks like this.</p>\n\n<pre><code>approximately 1785 req/s\napproximately 1761 req/s\napproximately 1759 req/s\napproximately 1699 req/s\napproximately 1757 req/s\n</code></pre>\n\n<p>I'll leave counting minutes as an exercise to the reader. </p>\n"}], "owner": {"reputation": 133, "user_id": 342111, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Ekbgw.png?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/342111/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 41840568, "answer_count": 1, "score": 1, "last_activity_date": 1485349175, "creation_date": 1485272872, "last_edit_date": 1485349175, "question_id": 41832420, "link": "https://stackoverflow.com/questions/41832420/how-to-code-an-function-to-print-my-transactions-per-second-min", "title": "How to code an function to print my transactions per second/min", "body": "<p>I have perl v5.8.4, I cannot install any lib/module, I need to use the vanila version.\nI have an <strong>perl script that sends HTTP request to an webserver</strong>. I'm trying to code an function to print how many requests I'm sending per sec and per minute to the webserver. The idea is to print once per second and then once per minute.\nI was thinking on something like the logic below:</p>\n\n<pre><code># First I get the time I started the script\n$time = the time the script started\n# Then, for each request I increase $req(for sec) and $reqmin(for minute)\nfor each request, $req++ and $reqmin++\n# When $time hits one sec of load, I will print the number of requests I sent and then I will set back $req to 0, so I can reuse the var for the next second\nif $time passed 1 sec, print $req (I think this may give me the TPS)\n$req = 0\n# Same as above, but for minutes\nif $time passed 60sec, print $reqmin\n$reqmin = 0\n</code></pre>\n\n<p>The above is not an perl code, but the explanation of what I'm trying to achieve. I'm not trying to get the runtime, control the traffic or do any benchmarking. I'm just trying to get how many requests I'm sending per sec and per min.</p>\n\n<p>I'm not sure if the logic, explained above, is the correct path that I should follow to calculate the TPS(transactions per second) in my code.\nThe other problem that I have, is that I'm not sure how to calculate the time using perl. Like, I need to know that 1 second has past since the first run to print the <em>requests per second</em>, same for 1 minute. I believe I should use perl's time but I'm not sure.</p>\n"}, {"tags": ["perl", "comparison-operators"], "answers": [{"tags": [], "owner": {"reputation": 19192, "user_id": 257635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/El2tc.jpg?s=128&g=1", "display_name": "Chankey Pathak", "link": "https://stackoverflow.com/users/257635/chankey-pathak"}, "is_accepted": false, "score": 3, "last_activity_date": 1485264496, "creation_date": 1485264496, "answer_id": 41829462, "question_id": 41829395, "link": "https://stackoverflow.com/questions/41829395/perl-one-line-script-with-condition/41829462#41829462", "title": "perl one line script with condition", "body": "<p>Use <code>eq</code> for string comparison instead of <code>==</code> which is used for numeric comparison.</p>\n\n<pre><code>perl -F\";\" -e 'print if $F[1] eq \"one\" ' test.txt\n</code></pre>\n\n<p>Edit: As toolic has suggested in his comment, if you had used warnings, you could have easily spot the issue.</p>\n\n<pre><code>$ perl -F\";\" -e 'use warnings; print if $F[1] == \"one\" ' test.txt \nArgument \"one\" isn't numeric in numeric eq (==) at -e line 1, &lt;&gt; line 1.\nArgument \"one\" isn't numeric in numeric eq (==) at -e line 1, &lt;&gt; line 1.\n1;one;111\nArgument \"two\" isn't numeric in numeric eq (==) at -e line 1, &lt;&gt; line 2.\n2;two;222\nArgument \"two\" isn't numeric in numeric eq (==) at -e line 1, &lt;&gt; line 3.\n22;two;222\nArgument \"three\" isn't numeric in numeric eq (==) at -e line 1, &lt;&gt; line 4.\n3;three;333\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2586648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc1794cd99b398c4fd8748ecdb20a97?s=128&d=identicon&r=PG", "display_name": "user2586648", "link": "https://stackoverflow.com/users/2586648/user2586648"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485270439, "creation_date": 1485264337, "last_edit_date": 1485270439, "question_id": 41829395, "link": "https://stackoverflow.com/questions/41829395/perl-one-line-script-with-condition", "title": "perl one line script with condition", "body": "<p>I have some text file. E.g.</p>\n\n<pre><code>1;one;111\n2;two;222\n22;two;222\n3;three;333\n</code></pre>\n\n<p>I try to select line that contains \"one\" using perl-oneliner:</p>\n\n<pre><code>perl -F\";\" -lane 'print if $F[1]==\"one\"' forPL.txt\n</code></pre>\n\n<p>But I get all lines from file. \nI don't need use regular expression(reg exp helps in this case), I need exactly match on second field.\nThank you in advance</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485249675, "post_id": 41824274, "comment_id": 70835850, "body": "Does the <code>files</code> folder exist in your current working directory? The file would end up in a folder called <code>files</code> in the directory that you ran your program from."}, {"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1485249860, "post_id": 41824274, "comment_id": 70835989, "body": "<code>getstore</code> does not attempt to create the destination directory, if it doesn&#39;t exist."}, {"owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "edited": false, "score": 0, "creation_date": 1485250039, "post_id": 41824274, "comment_id": 70836101, "body": "Thanks!  I  tried without an unexistant destination directory, but just with the name of the file, and it loaded it in the current directory."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485250076, "post_id": 41824274, "comment_id": 70836129, "body": "I am trying to find where the error message goes. It&#39;s not <code>$!</code> and it&#39;s not <code>$@</code>. It also doesn&#39;t die. WTF."}, {"owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "edited": false, "score": 0, "creation_date": 1485250287, "post_id": 41824274, "comment_id": 70836250, "body": "It actually worked, there&#39;s no mistake."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485251303, "post_id": 41824274, "comment_id": 70836891, "body": "It should complain somehow when it cannot open the file. I want to know where that complaint goes."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1485268965, "post_id": 41825528, "comment_id": 70848764, "body": "@ThisSuitIsBlackNot yeah, I didn&#39;t actually go looking but I figured there might have been a bug report already. Thanks for finding it."}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 3, "last_activity_date": 1485253043, "creation_date": 1485253043, "answer_id": 41825528, "question_id": 41824274, "link": "https://stackoverflow.com/questions/41824274/how-to-make-perl-download-files-from-the-internet-in-the-current-directory-on-ub/41825528#41825528", "title": "How to make Perl download files from the internet in the current directory on Ubuntu?", "body": "<p><strong>Your file is never being created</strong>. </p>\n\n<p>Your directory <code>files</code> does not exist in your current working directory. LWP does not make that directory for you. Instead, it fails, but doesn't really tell you about it.</p>\n\n<p><a href=\"https://metacpan.org/pod/LWP::Simple\" rel=\"nofollow noreferrer\">LWP::Simple</a> uses <a href=\"https://metacpan.org/pod/LWP::UserAgent\" rel=\"nofollow noreferrer\">LWP::UserAgent</a> under the hood. That in turn uses the <a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.16/lib/LWP/Protocol/http.pm#\" rel=\"nofollow noreferrer\">LWP::Protocol::http</a> to do the actual request, which inherits from <a href=\"https://metacpan.org/pod/LWP::Protocol\" rel=\"nofollow noreferrer\">LWP::Protocol</a>. Saving the file is done there, <a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.16/lib/LWP/Protocol.pm#L105\" rel=\"nofollow noreferrer\">in the <code>collect</code> method</a>. It does not create any folders, but it does <code>die</code> on error.</p>\n\n<blockquote>\n<pre><code>open(my $fh, \"&gt;\", $arg) or die \"Can't write to '$arg': $!\";\n</code></pre>\n</blockquote>\n\n<p>So at this point there is an error message. But where did it go?</p>\n\n<p>The <a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.16/lib/LWP/Protocol/http.pm#L125\" rel=\"nofollow noreferrer\"><code>LWP::Protocol::http::request</code> method</a> (which at some point calls <code>collect</code>) gets invoked in <code>LWP::UserAgent::send_request</code>, <a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.16/lib/LWP/UserAgent.pm#L188\" rel=\"nofollow noreferrer\">in an <code>eval</code> block</a>.</p>\n\n<blockquote>\n<pre><code># we eval, and turn dies into responses below\neval {\n    $response = $protocol-&gt;request($request, $proxy, $arg, $size, $self-&gt;{timeout}) ||\n        die \"No response returned by $protocol\";\n};\n</code></pre>\n</blockquote>\n\n<p>Note the comment. Right below that, it looks at <code>$@</code>, which contains errors thrown by <code>eval</code>, and stuffs the error message into an <a href=\"https://metacpan.org/pod/HTTP::Response\" rel=\"nofollow noreferrer\">HTTP::Response</a>. That gets returned.</p>\n\n<p>Let's try.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::UserAgent;\n\nmy $ua = LWP::UserAgent-&gt;new;\nmy $res = $ua-&gt;get(\"http://example.org/\", \":content_file\" =&gt; \"./foo/bar.html\");\nprint  $res-&gt;as_string;\n</code></pre>\n\n<p>Here it is, in the <code>X-Died</code> header.</p>\n\n<pre><code>HTTP/1.1 200 OK\nCache-Control: max-age=604800\nConnection: close\nDate: Tue, 24 Jan 2017 10:04:21 GMT\nETag: \"359670651+gzip+ident\"\nServer: ECS (phl/9D2C)\nVary: Accept-Encoding\nContent-Length: 1270\nContent-Type: text/html\nExpires: Tue, 31 Jan 2017 10:04:21 GMT\nLast-Modified: Fri, 09 Aug 2013 23:54:35 GMT\nClient-Aborted: die\nClient-Date: Tue, 24 Jan 2017 10:04:21 GMT\nClient-Peer: 2606:2800:220:1:248:1893:25c8:1946:80\nClient-Response-Num: 1\nX-Cache: HIT\nX-Died: Can't write to './foo/bar.html': No such file or directory at /home/simbabque/perl5/perlbrew/perls/perl-5.20.1/lib/site_perl/5.20.1/LWP/Protocol.pm line 105.\nX-Ec-Custom-Error: 1\n</code></pre>\n\n<p>Unfortunately the status code is <code>200</code>, so <code>$res-&gt;is_success</code> will be true.</p>\n\n<p><strong>But why don't you see that error when you use <a href=\"https://metacpan.org/pod/LWP::Simple#getstore($url,-$file)\" rel=\"nofollow noreferrer\"><code>getstore</code> from LWP::Simple</a>?</strong></p>\n\n<p><a href=\"https://metacpan.org/source/OALDERS/libwww-perl-6.16/lib/LWP/Simple.pm#L78\" rel=\"nofollow noreferrer\"><code>getstore</code> only returns the <code>$res-&gt;code</code></a>. And that's 200. The <code>$res</code> is discarded, so <strong>unfortunately you have no way to know if this succeeded</strong> or not, because you cannot get to the headers.</p>\n\n<blockquote>\n<pre><code>sub getstore ($$)\n{\n    my($url, $file) = @_;\n    my $request = HTTP::Request-&gt;new(GET =&gt; $url);\n    my $response = $ua-&gt;request($request, $file);\n\n    $response-&gt;code;\n}\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 157, "user_id": 4234065, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/880adc30c370216c76c21791ff3fc479?s=128&d=identicon&r=PG&f=1", "display_name": "mirchev1977", "link": "https://stackoverflow.com/users/4234065/mirchev1977"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 41825528, "answer_count": 1, "score": 1, "last_activity_date": 1485253043, "creation_date": 1485249459, "question_id": 41824274, "link": "https://stackoverflow.com/questions/41824274/how-to-make-perl-download-files-from-the-internet-in-the-current-directory-on-ub", "title": "How to make Perl download files from the internet in the current directory on Ubuntu?", "body": "<p>I want to download an html file from the internet called www.caveofprogramming.com, and save it in the local directory:</p>\n\n<pre><code>use LWP::Simple;\nsub main {\n    print \"Downloading...\";\n    getstore('http://www.caveofprogramming.com', \"./files/file.html\");\n    print \"Finished\\n\";\n}\nmain();\n</code></pre>\n\n<p>When I run the program, it indicates that the file is Downloading..., and \nthat it has Finished.</p>\n\n<p>However I can't find the file where expected.\nActually, I don't know at all where it has been downloaded.</p>\n\n<p>Could someone tell me where this could be and how I can make it that the file is downloaded where I have specified?</p>\n"}, {"tags": ["multithreading", "performance", "perl"], "answers": [{"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 3, "last_activity_date": 1485264607, "last_edit_date": 1485264607, "creation_date": 1485247763, "answer_id": 41823693, "question_id": 41822949, "link": "https://stackoverflow.com/questions/41822949/forkmanager-finishes-quicker-under-debug-mode/41823693#41823693", "title": "ForkManager finishes quicker under debug mode", "body": "<p>That's because data sent from a child to a parent are written to disk (see RETRIEVING DATASTRUCTURES in <a href=\"http://p3rl.org/Parallel::ForkManager\" rel=\"nofollow noreferrer\">Parallel::ForkManager</a>):</p>\n\n<blockquote>\n  <p>The data structure\n         referenced in a given child process is serialized and written out to a file by\n         Storable. The file is subsequently read back into memory and a new data structure\n         belonging to the parent process is created. Please consider the performance\n         penalty it can imply, so try to keep the returned structure small.</p>\n</blockquote>\n\n<p>In debugging mode, no fork happens, so the structure can be passed directly without being saved and loaded.</p>\n\n<p><a href=\"http://p3rl.org/Thread::Queue\" rel=\"nofollow noreferrer\">Thread::Queue</a> might produce better results.</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nuse threads;\nuse Thread::Queue;\n\nsub read_table {\n    map [ map rand, 1 .. 100 ], 1 .. 100;\n}\nsub foo {\n    [ @_ ]\n}\n\nmy $cpu_count = 20; my $epsilon = 1e-16;\nmy @tt = read_table('tt.csv');\nmy @tc = read_table('tc.csv');\nmy @nm = ($epsilon) x scalar @tc;\nmy @results;\n\nmy ($q_in, $q_out) = map 'Thread::Queue'-&gt;new, 1, 2;\nmy @workers = map threads-&gt;create(sub{\n    while(defined(my $i = $q_in-&gt;dequeue)) {\n        warn $i;\n        my @r;\n        if (scalar @{$tt[$i]} &gt; 1) {\n            for my $j (0 .. $#tc) {\n                if (scalar @{$tc[$j]} &gt; 1) {\n                    push @r, foo(scalar @{$tt[$i]}, scalar @{$tc[$j]}, \\@{$tt[$i]}, \\@{$tc[$j]});\n                } else {\n                    push @r, $epsilon; \n                }\n            }\n        } else {\n            @r = @nm;\n        }\n        $q_out-&gt;enqueue([$i, @r]);\n    }\n}), 1 .. $cpu_count;\n\n$q_in-&gt;enqueue(0 .. $#tt);\n$q_in-&gt;end;\n\n\nfor (0 .. $#tt) {\n    my $r = $q_out-&gt;dequeue;\n    my $i = shift @$r;\n    warn \"$i: $r-&gt;[2][2][1]\";\n}\n$_-&gt;join for @workers;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1485281776, "creation_date": 1485281776, "answer_id": 41836100, "question_id": 41822949, "link": "https://stackoverflow.com/questions/41822949/forkmanager-finishes-quicker-under-debug-mode/41836100#41836100", "title": "ForkManager finishes quicker under debug mode", "body": "<p>It's because your worker does so little that the overhead of creating the process and more significantly, transferring the data back to the parent is larger than the actual work load.</p>\n\n<p>Suggestions:</p>\n\n<ul>\n<li>Instead of assigning a single element of <code>@tt</code> to a child, assigning a group of elements.</li>\n<li>Handle the case when <code>@{$tt[$i]}</code> is empty in the parent.</li>\n</ul>\n\n<p>choroba's solution reduces the overhead, but kept the inefficiencies of the original program. Their solution could be made to be much faster by also implementing my suggestions.</p>\n\n<hr>\n\n<p>By the way, <code>$pm-&gt;finish($i, [@r]);</code> is better written as <code>$pm-&gt;finish($i, \\@r);</code>. No need to create a new array.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7461580"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1485281776, "creation_date": 1485245050, "question_id": 41822949, "link": "https://stackoverflow.com/questions/41822949/forkmanager-finishes-quicker-under-debug-mode", "title": "ForkManager finishes quicker under debug mode", "body": "<p>I am trying to figure out how to properly implement ForkManager for a part of a project I am working on, but have run into a situation where FM seems to be spawning processes and doing stuff, but takes forever.</p>\n\n<p>However, when I try FM in debug code (by setting the max processes to 0), the code completes within a reasonable and expected timeframe.</p>\n\n<p>Here is the code I am having trouble with...</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Parallel::ForkManager;\n\nsub read_table {\n  # takes a filename and reads in a CSV file.\n  # works fine and thus is omitted here\n}\nsub foo {\n  # originally an Inline::C subroutine\n  # for purpose of debugging replaced with randgen\n  return rand;\n}\n\nmy $cpu_count = 0; my $epsilon = 1e-16;\nmy @tt = read_table('tt.csv');\nmy @tc = read_table('tc.csv');\nmy @nm = ($epsilon) x scalar @tc;\nmy @results;\nmy $pm = new Parallel::ForkManager($cpu_count);\n$pm-&gt;run_on_finish(sub{\n  my $i = $_[1]; my $m = $_[5]; \n  $results[$i] = $m;\n});\nforeach my $i (0..$#tt) {\n  $pm-&gt;start and next;\n  my @r;\n  if (scalar @{$tt[$i]} &gt; 1) {\n    foreach my $j (0..$#tc) {\n        if (scalar @{$tc[$j]} &gt; 1) {\n            push @r, foo(scalar @{$tt[$i]}, scalar @{$tc[$j]}, \\@{$tt[$i]}, \\@{$tc[$j]});\n          } else {\n              push @r, $epsilon; \n          }\n      }\n  } else {\n      @r = @nm;\n  }\n  $pm-&gt;finish($i, [@r]);\n  undef @r;\n}\n$pm-&gt;wait_all_children;\n</code></pre>\n\n<p>So if I set <code>$cpu_count</code> to 0, the process completes fine without a problem, with the original C code complete in a couple of minutes (with <code>sub foo {return rand;}</code> only ~ 2 seconds), but when FM is turned on, it would then seem to go on for a long time. It did seem like it was running however when I put in print statements like <code>print \"at rows $i and $j\"</code> to diagnose the problem.</p>\n\n<p>The runtime was the same if I took out all FM-related codes and just tried to have regular double foreach loops instead.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["macos", "perl", "cpan"], "comments": [{"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "edited": false, "score": 0, "creation_date": 1485235890, "post_id": 41820395, "comment_id": 70829169, "body": "which osx are you using?"}, {"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 2, "creation_date": 1485261150, "post_id": 41820395, "comment_id": 70843368, "body": "You need to post the actual test failures, this is output on screen."}], "answers": [{"comments": [{"owner": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 1, "creation_date": 1485264708, "post_id": 41822315, "comment_id": 70845750, "body": "It would be prudent to find out which test is failing and why before blindly force installing, especially for software that will be manipulating data (DB backend in this case), so I&#39;d recommend the <code>cpan</code> and <code>cpanm</code> commands along with the manual build before recommending force."}, {"owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "reply_to_user": {"reputation": 8273, "user_id": 1334695, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/431ae6e9f7610b9d6a6a6cdebd0244d5?s=128&d=identicon&r=PG", "display_name": "stevieb", "link": "https://stackoverflow.com/users/1334695/stevieb"}, "edited": false, "score": 0, "creation_date": 1485290987, "post_id": 41822315, "comment_id": 70862660, "body": "Agreed. I edited the answer accordingly. Though if it is installed on osx it is probably not production."}, {"owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "edited": false, "score": 0, "creation_date": 1485897265, "post_id": 41822315, "comment_id": 71114039, "body": "Its failing here  <code>&#39;Running make test PERL_DL_NONLAZY=1 &quot;&#47;usr&#47;bin&#47;perl&quot; &quot;-MExtUtils::Command::MM&quot; &quot;-MTest::Harness&quot; &quot;-e&quot; &quot;undef *Test::Harness::Switches; test_harness(0, &#39;blib&#47;lib&#39;, &#39;blib&#47;arch&#39;)&quot; t&#47;*.t t&#47;00base.t .............................. 1&#47;6 Bailout called.  Further testing stopped:  Unable to load DBD::mysql  #   Failed test &#39;use DBD::mysql;&#39; #   at t&#47;00base.t line 15.</code>"}], "tags": [], "owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "is_accepted": false, "score": 0, "last_activity_date": 1485290923, "last_edit_date": 1485290923, "creation_date": 1485242589, "answer_id": 41822315, "question_id": 41820395, "link": "https://stackoverflow.com/questions/41820395/error-installing-perl-module/41822315#41822315", "title": "Error installing perl module", "body": "<p><strong><em>EDIT:</strong> Agreeing with comments by @stevieb, I change the order of my recommendations, manual install and cpanm first, THEN careful force install.</em></p>\n\n<p>Try installing it manually:</p>\n\n<pre><code>cd /tmp\nwget https://cpan.metacpan.org/authors/id/M/MI/MICHIELB/DBD-mysql-4.041.tar.gz\ntar zxvf DBD-mysql-4.041.tar.gz\ncd DBD-mysql-4.041\nperl Makefile.PL\nmake\nmake test\nmake install\n</code></pre>\n\n<p>At best, you should be able to install the module.\nAt the very least, you should have details about why it did not install. You could then add these details to your original post and get more enlightened answers.</p>\n\n<p>Another solution could be to use cpanminus. I don't know why: sometimes, a module that wouldn't install with CPAN would with cpanminus.</p>\n\n<p>If you don't have cpanminus :</p>\n\n<pre><code>cpan -i App::cpanminus\n</code></pre>\n\n<p>then</p>\n\n<pre><code>cpanm -i DBD::mysql\n</code></pre>\n\n<p>If nothing works and the errors from the test don't seem too important, try to force the install.</p>\n\n<p>in the CPAN shell :</p>\n\n<pre><code>force install DBD::mysql\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1148, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1485290923, "creation_date": 1485234407, "question_id": 41820395, "link": "https://stackoverflow.com/questions/41820395/error-installing-perl-module", "title": "Error installing perl module", "body": "<p>Trying to install a  a Perl Module from CPAN, </p>\n\n<p>Using the commands </p>\n\n<pre><code> get DBD::mysql\n make DBD::mysql`\n</code></pre>\n\n<p>Its successful until I reach I do these commands. </p>\n\n<pre><code>test DBD::mysql` \n</code></pre>\n\n<p>and </p>\n\n<pre><code> install DBD::mysql`\n</code></pre>\n\n<p>I get this error</p>\n\n<pre><code>#   Failed test 'use DBD::mysql;'\n\nFAILED--Further testing stopped: Unable to load DBD::mysql\nmake: *** [test_dynamic] Error 255\nMICHIELB/DBD-mysql-4.041.tar.gz\n/usr/bin/make test -- NOT OK\n</code></pre>\n\n<p>Really confused about what to do to get the module to install and get the module functioning.</p>\n\n<p>Any ideas ? </p>\n"}, {"tags": ["macos", "perl", "cpan"], "comments": [{"owner": {"reputation": 4890, "user_id": 6398044, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f71218cef5ac99acbfc45fa3a9a531?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6398044/daniel"}, "edited": false, "score": 0, "creation_date": 1485223963, "post_id": 41818026, "comment_id": 70825955, "body": "On Linux Ubuntu 16.04 command <code>sudo cpan install File::MMagic</code> works ok. So problem probably id connected with operating system."}, {"owner": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1485244590, "post_id": 41818026, "comment_id": 70832978, "body": "yes it does. NO, DON&#39;T. - install cpanm first (curl -L <a href=\"https://cpanmin.us\" rel=\"nofollow noreferrer\">cpanmin.us</a> | perl - App::cpanminus), then install any module of your liking like the above with: cpanm File::MMagic"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 946, "user_id": 1765406, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Koqta.jpg?s=128&g=1", "display_name": "vanHoesel", "link": "https://stackoverflow.com/users/1765406/vanhoesel"}, "edited": false, "score": 0, "creation_date": 1485282380, "post_id": 41818026, "comment_id": 70857935, "body": "@vanHoesel, That&#39;s not gonna help at all. Please refrain from posting advertisements of your personal preferences."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485282574, "post_id": 41818026, "comment_id": 70858033, "body": "Re &quot;<i>I&#39;ve tried installing File::MMagic in CPAN using</i>&quot;, &quot;Tried&quot;? What happened? Also, please provide the output of <code>set | grep ^PERL ; echo &#39;o conf&#39; | cpan | grep &#39;make\\|mbuild&#39;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1786, "user_id": 1820650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ce47757627908a1013e0951158f4c2e6?s=128&d=identicon&r=PG", "display_name": "Dr.Avalanche", "link": "https://stackoverflow.com/users/1820650/dr-avalanche"}, "edited": false, "score": 0, "creation_date": 1485266227, "post_id": 41819637, "comment_id": 70846846, "body": "&quot;When it installs File::MMagic the directory structure it creates doesn&#39;t include a File directory.&quot; it literally does <code>Installing &#47;usr&#47;local&#47;share&#47;perl&#47;5.14.2&#47;File&#47;MMagic.pm</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 7460356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69ced90f77e4f8e798c3cf83e910f3c?s=128&d=identicon&r=PG&f=1", "display_name": "LancedJack", "link": "https://stackoverflow.com/users/7460356/lancedjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1485229320, "creation_date": 1485229320, "answer_id": 41819637, "question_id": 41818026, "link": "https://stackoverflow.com/questions/41818026/installing-filemmagic-using-cpan-but-cant-be-found-in-inc/41819637#41819637", "title": "Installing File::MMagic using CPAN but can&#39;t be found in @INC", "body": "<p>So I solved this. The answer could be found in the error message. When it installs File::MMagic the directory structure it creates doesn't include a File directory. The script is trying to call File/MMagic.pm. By creating a new directory and calling it File and putting MMagic.pm in there it ran successfully.</p>\n"}], "owner": {"reputation": 1, "user_id": 7460356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f69ced90f77e4f8e798c3cf83e910f3c?s=128&d=identicon&r=PG&f=1", "display_name": "LancedJack", "link": "https://stackoverflow.com/users/7460356/lancedjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485229320, "creation_date": 1485217389, "last_edit_date": 1485217793, "question_id": 41818026, "link": "https://stackoverflow.com/questions/41818026/installing-filemmagic-using-cpan-but-cant-be-found-in-inc", "title": "Installing File::MMagic using CPAN but can&#39;t be found in @INC", "body": "<p>I've tried installing File::MMagic in CPAN using</p>\n\n<pre><code>install File::MMagic\n</code></pre>\n\n<p>in CPAN. </p>\n\n<p>When I try to call my script and associated variable (which uses File::MMagic) it fails telling me that File/MMagic.pm can't be found in @INC. Unsure how to proceed, all suggestions welcome! I'm on Mac OS Sierra</p>\n"}, {"tags": ["linux", "perl", "sockets", "ssl"], "comments": [{"owner": {"reputation": 21, "user_id": 3486363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000771494072/picture?type=large", "display_name": "user3486363", "link": "https://stackoverflow.com/users/3486363/user3486363"}, "edited": false, "score": 0, "creation_date": 1485222994, "post_id": 41817463, "comment_id": 70825705, "body": "I forgot to mention that the exact same code was in production and working fine on a different linux server.  Verio &quot;migrated&quot; my server and broke many things."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485226012, "post_id": 41817463, "comment_id": 70826409, "body": "What do you mean by &quot;cycling through the ports&quot;?"}, {"owner": {"reputation": 21, "user_id": 3486363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000771494072/picture?type=large", "display_name": "user3486363", "link": "https://stackoverflow.com/users/3486363/user3486363"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485233206, "post_id": 41817463, "comment_id": 70828232, "body": "There are hundreds (thousands?) of attempts to bind to a socket with lots of different port numbers."}, {"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1485234703, "post_id": 41817463, "comment_id": 70828681, "body": "Connection timed out is a problem at the TCP level already and not related to SSL settings at all. This means that fiddling with certificates, openssl version etc will not help. If a web browser can access the site <b>from the same machine</b> then check if the browser is using a proxy and your script not or the other way around and if there is a proxy involved make sure that they use the same proxy settings. If a proxy is involved make also sure that you have at least LWP version 6.06."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485239761, "post_id": 41817463, "comment_id": 70830694, "body": "What do you mean, &quot;attempts to bind with different port numbers&quot;? It should only be binding to port 0 (which tells the OS to provide a free port). Furthermore, there should only be one call to <code>bind</code> per socket, so what makes you think it tries to bind the same socket more than once?"}], "answers": [{"comments": [{"owner": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1485329269, "post_id": 41838002, "comment_id": 70875646, "body": "If the resolver returns the wrong address and this address exists but simply drops packets then it is impossible to get from the TCP stack and thus the Perl program a better message than that the attempt to reach the server timed out, i.e. exactly what you got.  The program does not know the underlying reason, i.e. if there is no such server, if there is a firewall blocking traffic, if the internet is slow or if it is a configuration error like in your case and thus cannot give a message which points to the real problem."}, {"owner": {"reputation": 21, "user_id": 3486363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000771494072/picture?type=large", "display_name": "user3486363", "link": "https://stackoverflow.com/users/3486363/user3486363"}, "reply_to_user": {"reputation": 89568, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1485383475, "post_id": 41838002, "comment_id": 70909531, "body": "Interesting, thanks, and makes sense.  However it would be possible (right?) and fabulously helpful to return something like &quot;TCP: connection attempt timed out&quot; rather than &quot;connection timed out in ..perl5/LWP/Protocol/http.pm&quot;.   It&#39;s certainly possible that I should have extrapolated the problem from that message and I&#39;m just not linux-savvy enough to have done so, but it would be better for the error handling to be more explicit.  If you can&#39;t report the problem, you can at least say where it happened."}], "tags": [], "owner": {"reputation": 21, "user_id": 3486363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000771494072/picture?type=large", "display_name": "user3486363", "link": "https://stackoverflow.com/users/3486363/user3486363"}, "is_accepted": false, "score": 1, "last_activity_date": 1485289363, "last_edit_date": 1485289363, "creation_date": 1485288363, "answer_id": 41838002, "question_id": 41817463, "link": "https://stackoverflow.com/questions/41817463/perl-cant-get-ssl-socket-on-linux/41838002#41838002", "title": "perl can&#39;t get SSL socket on linux", "body": "<p>Thank you Stephen Ullrich - it was a tcp configuration issue.  The resolvers were configured incorrectly; with the right addresses in there everything is working.</p>\n\n<p>(It would have bene really nice to get an error message of some kind, or at least know where the timeout was coming from...)</p>\n\n<p>Thanks to those who commented!</p>\n"}], "owner": {"reputation": 21, "user_id": 3486363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000771494072/picture?type=large", "display_name": "user3486363", "link": "https://stackoverflow.com/users/3486363/user3486363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485289363, "creation_date": 1485213718, "last_edit_date": 1485233551, "question_id": 41817463, "link": "https://stackoverflow.com/questions/41817463/perl-cant-get-ssl-socket-on-linux", "title": "perl can&#39;t get SSL socket on linux", "body": "<p>Apache accesses sites with ssl and the certificate seems fine, but I cannot get it to work with perl/cgi.  I get the following error:</p>\n\n<pre><code>LWP::Protocol::https::Socket: connect: Connection timed out at\n/usr/local/share/perl5/LWP/Protocol/http.pm line 52.\n</code></pre>\n\n<p>The code causing this error:</p>\n\n<pre><code>my $useragent = LWP::UserAgent-&gt;new(\"local_address\" =&gt; \"$local_ip\");\nmy $request = POST( $post_url, $post_values );\nmy $reply_data = $useragent-&gt;request( $request );\n</code></pre>\n\n<p>although i've tried it with and without passing the local address.  I noticed the LWP function didn't dump the local address in debugging, so I specifically handed it over, but the same problem happens either way.</p>\n\n<p>I'm always using:</p>\n\n<pre><code>use HTTP::Request::Common qw(POST);\nuse LWP::UserAgent;\n</code></pre>\n\n<p>and I've tried with and without</p>\n\n<pre><code>use NET::SSL;\n</code></pre>\n\n<p>Tried this with and without passing the port:</p>\n\n<pre><code>@LWP::Protocol::https::EXTRA_SOCK_OPTS = (LocalAddr =&gt; '$local_ip',\n            #LocalPort =&gt; '443' );\n</code></pre>\n\n<p>To make sure perl is seeing the certificate, I've tried this:</p>\n\n<pre><code>my $ua = LWP::UserAgent-&gt;new(\nssl_opts =&gt; {\n    #SSL_use_cert =&gt; 1,\n    #SSL_cert_file   =&gt; \"path-to-cert.crt\",\n    #SSL_key_file    =&gt; \"path-to-key.key\",\n    },\n);\n</code></pre>\n\n<p>as well as environment variables:</p>\n\n<pre><code>$ENV{PERL_NET_HTTPS_SSL_SOCKET_CLASS}=\"IO::Socket::SSL\";\n$ENV{HTTPS_CERT_FILE} = \"path-to-cert.crt\";\n$ENV{HTTPS_KEY_FILE} = \"path-to-key.key\";\n</code></pre>\n\n<p>Also randomly tried this:\n    $ENV{PERL_NET_HTTPS_SSL_SOCKET_CLASS}=\"IO::Socket::SSL\";</p>\n\n<p>I've tried two different versions of perl (5.10.1 and 5.24.1)</p>\n\n<p>and installed openssl 1.0.2j</p>\n\n<p>Someone suggested this workaround:</p>\n\n<pre><code># workaround for ssl bug\nuse LWP::Protocol::https10 ();\nLWP::Protocol::implementor('https', 'LWP::Protocol::https10');\n</code></pre>\n\n<p>but it didn't work.</p>\n\n<p>There is no firewall or anything that I know about configured on linux that would prevent outward bound sockets, but I feel like this is where the problem must be.</p>\n\n<p>I watched the program go through the perl debugger and it appears to be cycling through all of the ports over and over until it hits a timeout.</p>\n\n<p>Please help!!!!  I'm going insane.  Does anyone know of something at the linux system level that could be causing me to be unable to use ssl from perl?</p>\n\n<p>P.S.  Also tried adding this to my user agent:</p>\n\n<pre><code>ssl_opts =&gt;  {verify_hostname =&gt; 0},\nprotocols_allowed =&gt; [\"https\"]\n</code></pre>\n"}, {"tags": ["perl", "exchange-server", "outlook-redemption", "pst"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7459782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9bca229d2e4e1c3c690f9b34aa9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Nagare", "link": "https://stackoverflow.com/users/7459782/amit-nagare"}, "edited": false, "score": 0, "creation_date": 1485270041, "post_id": 41815687, "comment_id": 70849519, "body": "Thank you very much Dimitry. The issue is resolved after using the 64 bit Perl along with 64 bit redemption."}], "tags": [], "owner": {"reputation": 56418, "user_id": 332059, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cSNOK.png?s=128&g=1", "display_name": "Dmitry Streblechenko", "link": "https://stackoverflow.com/users/332059/dmitry-streblechenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1485206255, "last_edit_date": 1485206255, "creation_date": 1485205877, "answer_id": 41815687, "question_id": 41815554, "link": "https://stackoverflow.com/questions/41815554/how-to-open-a-pst-with-cdo-installed-on-exchange-server-machine/41815687#41815687", "title": "How to open a PST with CDO installed on exchange server machine?", "body": "<p>The error means the <code>$session</code> variable is undefined. Is your code running in 32 bit?</p>\n\n<p>Also note that Outlook can be installed on a server just fine - MS does not recommend <strong>using</strong> Outlook on a server since there is no interactive user there. </p>\n"}, {"tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 0, "last_activity_date": 1485257853, "creation_date": 1485257853, "answer_id": 41827271, "question_id": 41815554, "link": "https://stackoverflow.com/questions/41815554/how-to-open-a-pst-with-cdo-installed-on-exchange-server-machine/41827271#41827271", "title": "How to open a PST with CDO installed on exchange server machine?", "body": "<p>Independent of other problems: Beware of your inadvertently use of metacharacters in the file string: '\\t' and '\\s' in your doublequoted string are most likely not, what you want, is it?</p>\n\n<p>Either use a singlequoted string or double the backslashes...</p>\n\n<pre><code>$session-&gt;LogonPstStore('C:\\test\\ssn1.pst'); \n</code></pre>\n\n<p>or</p>\n\n<pre><code>$session-&gt;LogonPstStore(\"C:\\\\test\\\\ssn1.pst\"); \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7459782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa9bca229d2e4e1c3c690f9b34aa9f24?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Nagare", "link": "https://stackoverflow.com/users/7459782/amit-nagare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485257853, "creation_date": 1485205276, "last_edit_date": 1485211320, "question_id": 41815554, "link": "https://stackoverflow.com/questions/41815554/how-to-open-a-pst-with-cdo-installed-on-exchange-server-machine", "title": "How to open a PST with CDO installed on exchange server machine?", "body": "<p>I want to read a standalone PST file on Exchange server machine. As Microsoft suggested we can't install the Outlook client on exchange server.I have installed the Exchange client and CDO 1.2 library on server. But still I am not able to open the PST file using redemption library. Here is the sample Perl code. It returns the error <em>\"Can't call method \"LogonPstStore\" on an undefined value\"</em>.</p>\n\n<pre><code>$session = Win32::OLE-&gt;CreateObject(\"Redemption.RDOSession\");\n$session-&gt;LogonPstStore(\"C:\\test\\ssn1.pst\"); \n</code></pre>\n\n<p>The same code works well if I have the outlook installed on the machine. Any help will be appreciated. </p>\n"}, {"tags": ["perl", "strawberry-perl"], "comments": [{"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485183516, "post_id": 41809250, "comment_id": 70806472, "body": "In what encoding did you save your script? If it&#39;s UTF-8, where&#39;s <code>use utf8;</code>?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485183553, "post_id": 41809250, "comment_id": 70806497, "body": "You need to use your machine&#39;s &quot;ANSI&quot; encoding (cp1252? returned by <code>Win32::GetACP()</code>) for the builtin system calls. (chcp changes the terminal&#39;s OEM code page, which has nothing to do with the ANSI code page used by system calls.) Win32::Unicode provides functions that accept UTF-8 or Unicode strings (I can&#39;t remember which). Remember that <code>-e</code> is just a wrapper for <code>stat</code>."}, {"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485184798, "post_id": 41809250, "comment_id": 70807284, "body": "@ikegami if I encode the filename in cp1252 it should work, but I get the same output then too.  <code>$file = encode(&quot;cp1252&quot;, $file);</code> I jsut added this line but still I get the same output."}, {"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485184839, "post_id": 41809250, "comment_id": 70807310, "body": "@choroba Why would i need to use UTF-8?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485184947, "post_id": 41809250, "comment_id": 70807382, "body": "1) Did you check that cp1252 is the correct encoding? 2) You have at least one other problem: <code>$file</code> can&#39;t possibly contain the value you claim it does. Encode the source file using UTF-8 and add <code>use utf8;</code> to tell Perl you did."}, {"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485185153, "post_id": 41809250, "comment_id": 70807522, "body": "@ikegami I just checked, my source code is saved in UTF-8 and I added <code>use utf8;</code> but still it would return &quot;Not Exists&quot;. Also I have encoded $file in cp1252 now."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485185275, "post_id": 41809250, "comment_id": 70807609, "body": "What about my question?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485185437, "post_id": 41809250, "comment_id": 70807718, "body": "Also provide the output of: <code>perl -e&quot;opendir($dh, &#39;&lt;SOME DIR PATH&gt;&#39;) or die $!; while (defined($_ = readdir($dh))) { printf(qq{%v02X\\n}, $_); }&quot;</code>"}, {"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485185681, "post_id": 41809250, "comment_id": 70807894, "body": "@ikegami I checked for the encoding now, it returned <code>1252</code>"}, {"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485185803, "post_id": 41809250, "comment_id": 70807980, "body": "@ikegami This is the output <code>2E 2E.2E 63.6C.69.70.63.61.6E.76.61.73.5F.31.34.33.34.38.5F.50.72.6F.&zwnj;&#8203;52.65.73.48.51.5F.50&zwnj;&#8203;.41.4C.2E.6D.6F.76 E1.E9.ED.F3.FA.2E.6D.6F.76 2D.43.4F.50.59.7E.31.2E.4D.4F.56</code>"}, {"owner": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1485186716, "post_id": 41809250, "comment_id": 70808531, "body": "I had a similar issue and found that if I changed directory to the directory containing the file, and then tested for its existence without any path in front of its name, it worked fine. Never did get to the bottom of it."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485187166, "post_id": 41809250, "comment_id": 70808835, "body": "The file name is indeed the cp1252 encoding of <code>&#225;&#233;&#237;&#243;&#250;.mov</code>. So problem lies with <code>$file</code>. What&#39;s the output of <code>printf(qq{%v02X\\n}, $file);</code> before you call <code>encode</code>."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 144799, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1485187351, "post_id": 41809250, "comment_id": 70808968, "body": "@Mark Setchell, Your problem was probably that you did <code>my $dir = &lt;&gt;; open(my $fh, &#39;&lt;&#39;, &quot;$dir&#47;foo.txt&quot;)</code> instead of <code>my $dir = &lt;&gt;; chomp($dir); open(my $fh, &#39;&lt;&#39;, &quot;$dir&#47;foo.txt&quot;)</code>"}, {"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485187529, "post_id": 41809250, "comment_id": 70809106, "body": "@ikegami Here is the output before encoding - 44.3A.2F.57.6F.72.6B.2F.54.69.6D.65.49.6E.63.56.69.64.65.6F.&zwnj;&#8203;46.78.2F.7A.6F.6F.6D&zwnj;&#8203;.5F.76.69.64.65.6F.5&zwnj;&#8203;F.69.6E.67.65.73.74.&zwnj;&#8203;2F.31.30.5F.6E.65.73&zwnj;&#8203;.74.65.64.5F.66.6F.6&zwnj;&#8203;C.64.65.72.73.2F.66.&zwnj;&#8203;31.2F.C3.A1.C3.A9.C3&zwnj;&#8203;.AD.C3.B3.C3.BA.2E.6&zwnj;&#8203;D.6F.76"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1485188796, "post_id": 41809250, "comment_id": 70810025, "body": "That&#39;s encoded using UTF-8. You didn&#39;t add <code>use utf8;</code> as instructed."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "edited": false, "score": 0, "creation_date": 1485234132, "post_id": 41811301, "comment_id": 70828497, "body": "Thanks, it worked and I realized my blunders. Just out of curiosity, what were the outputs for (that you asked) in the previous comments section and if I want to learn more about this where can I head to?"}, {"owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "edited": false, "score": 0, "creation_date": 1485236937, "post_id": 41811301, "comment_id": 70829544, "body": "Also when I put all the use statements in a BEGIN block, the above code again gives output as File does not exists. Why?"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "edited": false, "score": 1, "creation_date": 1485239619, "post_id": 41811301, "comment_id": 70830636, "body": "The value of the characters that make up the strings (in hex). /// <code>use utf8;</code> is lexically-scoped."}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 5, "last_activity_date": 1485191247, "last_edit_date": 1485191247, "creation_date": 1485189664, "answer_id": 41811301, "question_id": 41809250, "link": "https://stackoverflow.com/questions/41809250/why-does-the-e-file-existence-test-always-return-false-for-a-filename-containin/41811301#41811301", "title": "Why does the -e file existence test always return false for a filename containing non-ASCII characters?", "body": "<pre><code>use strict;\nuse warnings;\n\n# Properly decode source code, which is expected to be UTF-8.\n# This allows non-ASCII characters in the source.\nuse utf8;\n\n# Properly decode text received from STDIN.\n# Properly encode text sent to STDOUT and STDERR.\nuse Win32 qw( );\nmy ( $enc_in, $enc_out, $enc_syscall );\nBEGIN {\n   $enc_input   = 'cp'.Win32::GetConsoleCP();\n   $enc_output  = 'cp'.Win32::GetConsoleOutputCP();\n   $enc_syscall = 'cp'.Win32::GetACP();\n\n   binmode STDIN,  \":encoding($enc_input)\";\n   binmode STDOUT, \":encoding($enc_output)\";\n   binmode STDERR, \":encoding($enc_output)\";\n}\n\nuse Encode qw( encode );\n\nmy $file = '\u00e1\u00e9\u00ed\u00f3\u00fa.mov';\n\nif (-e encode($enc_syscall, $file, Encode::FB_CROAK | Encode::LEAVE_SRC)) {\n   print(\"$file exists\\n\");\n}\nelsif ($!{ENOENT}) {\n   print(\"$file doesn't exist\\n\");\n}\nelse {\n   die(\"Can't determine if \\\"$file\\\" exists: $!\\n\");\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>use strict;\nuse warnings;\n\n# Properly decode source code, which is expected to be UTF-8.\n# This allows non-ASCII characters in the source.\nuse utf8;\n\n# Properly decode text received from STDIN.\n# Properly encode text sent to STDOUT and STDERR.\nuse Win32 qw( );\nmy ( $enc_in, $enc_out, $enc_syscall );\nBEGIN {\n   $enc_input   = 'cp'.Win32::GetConsoleCP();\n   $enc_output  = 'cp'.Win32::GetConsoleOutputCP();\n   $enc_syscall = 'cp'.Win32::GetACP();\n\n   binmode STDIN,  \":encoding($enc_input)\";\n   binmode STDOUT, \":encoding($enc_output)\";\n   binmode STDERR, \":encoding($enc_output)\";\n}\n\nuse Win32::Unicode::File qw( statW );\n\nmy $file = '\u00e1\u00e9\u00ed\u00f3\u00fa.mov';\n\nif (statW($file)) {\n   print(\"$file exists\\n\");\n}\nelsif ($!{ENOENT}) {\n   print(\"$file doesn't exist\\n\");\n}\nelse {\n   die(\"Can't determine if \\\"$file\\\" exists: $^E\\n\");\n}\n</code></pre>\n\n<p>The latter isn't limited to paths containing characters of the machine's ANSI charset.</p>\n"}], "owner": {"reputation": 55, "user_id": 5921778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f224ca55e0e14969854ac395b60d6d?s=128&d=identicon&r=PG&f=1", "display_name": "N. Pamnani", "link": "https://stackoverflow.com/users/5921778/n-pamnani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 1, "accepted_answer_id": 41811301, "answer_count": 1, "score": 3, "last_activity_date": 1485191247, "creation_date": 1485183396, "last_edit_date": 1485186867, "question_id": 41809250, "link": "https://stackoverflow.com/questions/41809250/why-does-the-e-file-existence-test-always-return-false-for-a-filename-containin", "title": "Why does the -e file existence test always return false for a filename containing non-ASCII characters?", "body": "<p>I am doing an existence check for a file containing non-ASCII characters in its name, using Perl. Even though the file exists, the check always returns false. I am using Strawberry Perl v5.24.0 on a Windows 10 machine.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Encode;\n\nmy $file = '&lt;SOME DIR PATH&gt; / \u00e1\u00e9\u00ed\u00f3\u00fa.mov';\nif (-e $file) {\n  print \"$file exists\";\n} else {\n  print \" $file does not exists\" ;\n}\n</code></pre>\n\n<p>I also changed the code page in the cmd shell by running <code>chcp 65001</code>. cmd was then able to recognize the characters but somehow it always returns \"Not Exists\" for this file.</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["arrays", "perl", "object"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485162014, "post_id": 41802232, "comment_id": 70792420, "body": "What is <code>ImportConfig::get</code>? That&#39;s not part of Config::IniFiles."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485162229, "post_id": 41802232, "comment_id": 70792542, "body": "I can&#39;t see any &quot;<i>object properties</i>&quot; to be an arrayref (cannot actually be &quot;<i>an array</i>&quot;) ...?  Where is the line with <code>ImportConfig::get</code> from?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485165161, "post_id": 41802232, "comment_id": 70794308, "body": "Is this code inside of <i>your class</i>, where you use <code>Config::IniFiles</code>? Is that what &quot;<i>from init method - called inside constructor</i>&quot; means?"}, {"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485165289, "post_id": 41802232, "comment_id": 70794398, "body": "No, it&#39;s actually outside in another class."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1485167165, "post_id": 41802232, "comment_id": 70795681, "body": "The code that you show doesn&#39;t do what you say it does. <code>$self-&gt;{_junk} = @junk</code> will set <code>$self-&gt;{_junk}</code> to 3, the number of elements in <code>@junk</code>, so <code>say @patterns</code> in your second code block will also print 3"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 2, "creation_date": 1485167349, "post_id": 41802232, "comment_id": 70795807, "body": "<i>&quot;I changed it, see above&quot;</i> Please don&#39;t do that. You have made nonsense out of some people&#39;s comments as well as the rest of your own question, because <code>$self-&gt;{_junk} = [&#39;Test1&#39;, &#39;test2&#39;]</code> produces different results from <code>$self-&gt;{_junk} = @junk</code>"}], "answers": [{"comments": [{"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485162994, "post_id": 41802476, "comment_id": 70793002, "body": "I removed the line with test data. After replacing the return statement of my getter with your suggestion, I get <code>Can&#39;t use string (&quot;3&quot;) as an ARRAY ref while &quot;strict refs&quot;</code>  Im inside a package, just dropped the first lines to keep it clear."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485163128, "post_id": 41802476, "comment_id": 70793094, "body": "@Corni then please also show how you are setting it. You probably assigend an <i>array</i> to <code>$self-&gt;{_junk}</code>, but you need to make that a ref too."}, {"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485164003, "post_id": 41802476, "comment_id": 70793637, "body": "Thanks a lot, @simbabque and @zdim!"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": true, "score": 4, "last_activity_date": 1485163217, "last_edit_date": 1485163217, "creation_date": 1485162217, "answer_id": 41802476, "question_id": 41802232, "link": "https://stackoverflow.com/questions/41802232/store-an-array-in-an-object-and-use-a-getter-method/41802476#41802476", "title": "Store an array in an object and use a getter method", "body": "<p>You are mixing up arrays and array references.</p>\n\n<p>Your line <code>$self-&gt;{_junk} = ['Test1', 'test2']</code> sets the value of the <code>_junk</code> key to an <em>array reference</em>. You can tell that from the square brackets <code>[]</code>.</p>\n\n<p>To get the array out of the reference, you need to <em>dereference</em> it. You can either do that in your getter like this:</p>\n\n<pre><code>return @{ $self-&gt;{_junk} };\n</code></pre>\n\n<p>Or you define your interface as an array reference and let the user deref it.</p>\n\n<pre><code>my @patterns = @{ $self-&gt;getJunkPatterns() };\n</code></pre>\n\n<p>Of course you need to have an array reference inside of that key in the first place. It's not possible to put an array inside anything. Data structures with more than one level <strong>have to be references</strong> in Perl.</p>\n\n<p>So wherever you set it, it needs to look something like this:</p>\n\n<pre><code>sub setJunkPatterns {\n    my ($self, @patterns) = @_;\n    $self-&gt;{_junk} = \\@patterns;\n}\n</code></pre>\n\n<p>See <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a> and <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> for more information.</p>\n\n<hr>\n\n<p>You are using <code>$self</code> throughout the code, but it appears that you are not inside of a class. <code>$self</code> in Perl is used similar to <code>this</code> in some other languages. It's the reference to the instantiated object of a class that you are working with, <em>inside</em> of that class. So when you instantiate an object of a certain class <em>outside</em>, you would <strong>never</strong> call that <code>$self</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485163225, "post_id": 41802548, "comment_id": 70793161, "body": "It&#39;s clear that it&#39;s a scalar. Bt is it possible to get an array directly from <code>IniFiles</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485163275, "post_id": 41802548, "comment_id": 70793187, "body": "I was going to include <code>wantarray</code>, but I decided to not do that because I figured it&#39;s too complicated. Also I didn&#39;t want to explain that it should be called <code>wantlist</code> really. ;)"}, {"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485164757, "post_id": 41802548, "comment_id": 70794083, "body": "@value = ... does not help. Then I still get an array with one entry, not with three entries. So I might use the wrong ini format?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485164951, "post_id": 41802548, "comment_id": 70794199, "body": "@Corni  Right, if you simply use <code>new</code> and then <code>my @values = $ini-&gt;val(...)</code> you are directly using the classes methods.  They are correct.  Then it&#39;d be something with data."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485165277, "post_id": 41802548, "comment_id": 70794389, "body": "@Corni I think I got it.  That code in the beginning is in the constructor of your own class?  If so, then when you do <code>$self-&gt;{_junk} = @junk;</code> you are setting your data to the length of the list.  See the last few paragraphs in my answer.  Then, when you later retrieve that ... yep, it&#39;s a number."}, {"owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 0, "creation_date": 1485167578, "post_id": 41802548, "comment_id": 70795954, "body": "No. The <code>@junk = $ini-&gt;val()</code> call returns an array with one entry instead of an array with three entries. This happens directly after the call, in the next line. It must be something with my ini format. Dont really know how to put array data in here...Maybe there is a special syntax?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "edited": false, "score": 1, "creation_date": 1485168202, "post_id": 41802548, "comment_id": 70796343, "body": "@Corni Oh, already that line ... then it would be something with data.  I can&#39;t readily help with .ini format, sorry.  (It should be explained in <code>Config::IniFiles</code> docs?)  However, the other thing is wrong, no question. And there is probably more puzzles, since the output you show last can&#39;t be. The <code>_self</code> would be a <i>number</i>, not an arrayref.  I updated my answer, you may want to read it over again."}], "tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": false, "score": 3, "last_activity_date": 1486769833, "last_edit_date": 1592644375, "creation_date": 1485162479, "answer_id": 41802548, "question_id": 41802232, "link": "https://stackoverflow.com/questions/41802232/store-an-array-in-an-object-and-use-a-getter-method/41802548#41802548", "title": "Store an array in an object and use a getter method", "body": "<p>I take it that the code section with <code>$ini-&gt;val(...)</code> is <em>inside of a class</em> and that <code>_junk</code> that the data is written to is intended to be an array reference, the only meaningful option.</p>\n<p><strong>First</strong>, you can have <code>val</code> from <a href=\"http://search.cpan.org/%7Eshlomif/Config-IniFiles-2.94/lib/Config/IniFiles.pm#val_%28$section,_$parameter_%5B,_$default%5D_%29\" rel=\"nofollow noreferrer\">Config::IniFiles</a> return data <em>either</em> as a list <em>or</em> as a string</p>\n<blockquote>\n<p>If you want a multi-line/value field returned as an array, just specify an array as the receiver:</p>\n<pre><code>@values = $cfg-&gt;val('Section', 'Parameter');\n</code></pre>\n</blockquote>\n<p>So instead of assigning to a scalar and splitting into lines just assign to an array.</p>\n<p><strong>Next</strong>, the assignment <code>$self-&gt;{_junk} = @junk;</code> is most likely wrong, as follows.</p>\n<p>The array <code>@junk</code> is being assigned to a scalar, the only thing a hash value can be. This means that the operation is in the <em>scalar context</em>, in which case what gets assigned is the <em>number of elements of the array</em>. So after that line <code>_junk</code> has a number instead of being an arrayref, as seen in the ouput. See <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context in perldata</a>.</p>\n<p>So assign an arrayref, <code>[@junk]</code> (or more efficiently <code>\\@junk</code>, if the surrounding code allows it).</p>\n<p><strong>Finally</strong>, in your getter you can simply choose to return those lines either as a list or as a reference to that list, as the <a href=\"https://stackoverflow.com/a/41802476/4653379\">answer by simbabque</a> shows.</p>\n<p>But you can also consider returning it like <code>val</code> does, as either a string or a list, depending on the <a href=\"http://perldoc.perl.org/perldata.html#Context\" rel=\"nofollow noreferrer\">context</a> in which the method is called. To do this check for the context using <a href=\"http://perldoc.perl.org/functions/wantarray.html\" rel=\"nofollow noreferrer\">wantarray</a>. If the method is called in the <em>list context</em> we return a list, while in the <em>scalar context</em> we return a scalar.</p>\n<pre><code>sub getJunkPatterns {\n    my ($self) = @_;\n    return (wantarray)\n        ? @{$self-&gt;{_junk}};\n        : join &quot;\\n&quot;, @{$self-&gt;{_junk}};\n}\n</code></pre>\n<p>The elements are joined by newline for the scalar return, to mimic what <code>val</code> does.  If you'd rather return the reference change the scalar return to <code>: $self-&gt;{_junk};</code>.</p>\n<p>Then you can use it either as</p>\n<pre><code>my @patterns = $object-&gt;getJunkPatterns();\n</code></pre>\n<p>or</p>\n<pre><code>my $pattern_string = $object-&gt;getJunkPatterns(); \n</code></pre>\n<p>If you choose to return a reference to that list in the scalar context, instead of the string with lines, change the getter accordingly and then the returned scalar is an arrayref.</p>\n"}], "owner": {"reputation": 547, "user_id": 2726335, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7b8847e469590296a5c982b44773becd?s=128&d=identicon&r=PG", "display_name": "Corni", "link": "https://stackoverflow.com/users/2726335/corni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 41802476, "answer_count": 2, "score": 0, "last_activity_date": 1486769833, "creation_date": 1485161402, "last_edit_date": 1485167704, "question_id": 41802232, "link": "https://stackoverflow.com/questions/41802232/store-an-array-in-an-object-and-use-a-getter-method", "title": "Store an array in an object and use a getter method", "body": "\n\n<p>I'm struggling with the difference between arrays and scalars. </p>\n\n<p>I initialize an object from <a href=\"https://metacpan.org/pod/Config::IniFiles\" rel=\"nofollow noreferrer\"><code>Config::IniFiles</code></a>. One of the object properties is an array. During the init method, I can print the array values and the array size. </p>\n\n<h3>My ini file</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>[project]\njunk = Perl\njunk = is\njunk = complicated\n</code></pre>\n\n<p>From the init method, called inside constructor</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my $ini = Config::IniFiles-&gt;new( -file =&gt; \"config.ini\", -default =&gt; 'Default' );\nmy $junk = $ini-&gt;val( 'project', 'junk' );\nmy @junk = split( /\\n/, $junk );\n\nsay scalar @junk;\n\nforeach ( @junk ) {\n    say $_;\n}\n\n$self-&gt;{_junk} = @junk;\n</code></pre>\n\n<h3>Output, as expected</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>3\nPerl\nis\ncomplicated\n</code></pre>\n\n<p>Now, I implemented the getter method:</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>sub getJunkPatterns {\n\n    my ($self) = @_;\n    return $self-&gt;{_junk};\n}\n</code></pre>\n\n<p>And call it like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>my @patterns = $self-&gt;getJunkPatterns();    \nsay scalar @patterns;\nsay @patterns;\n</code></pre>\n\n<p>The result is not what I expected</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>3\n3\n</code></pre>\n\n<p>For scalar (not array) properties this works fine. Could anyone tell me what I'm doing wrong with arrays? Does anyone know how to properly get arrays from <code>Config::IniFiles</code> without the need to split them? </p>\n"}, {"tags": ["apache", "perl", "mojolicious", "mod-perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485162866, "post_id": 41801600, "comment_id": 70792933, "body": "Did you load any mojo-related stuff in that second example? Doesn&#39;t look like it. How would it know that there is a <code>get</code> function? Mojolicious has a way to interface to mod_perl. I don&#39;t know how it works, but there is documentation. I suspect it works through PSGI. You would probably make your new functionality into a separate app that <i>could</i> go into its own file(s), load it here, and use it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485162919, "post_id": 41801600, "comment_id": 70792963, "body": "Sorry, yes there is use Mojolicious::Lite; in the second example. Just forgot to copy it."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485162942, "post_id": 41801600, "comment_id": 70792971, "body": "Please <a href=\"https://stackoverflow.com/posts/41801600/edit\">edit</a> and include more of that code. Also a package name if there is one."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485206794, "post_id": 41814287, "comment_id": 70820050, "body": "Great explanation. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "edited": false, "score": 0, "creation_date": 1486027454, "post_id": 41814287, "comment_id": 71173351, "body": "Hi. Thanks. One Question, ive created a virtual host like in your example (but only with port 8080 because of another Webapp which is running on 80. In folder home I created a folder called &quot;sri&quot; and in this folder I created a folder &quot;myapp&quot;. In this folder I created the MyApp.pm with your content. But if I run <a href=\"http://server:8080\" rel=\"nofollow noreferrer\">server:8080</a> I get &quot;This site can&#39;t be reached&quot; Is there something wrong with the paths?"}], "tags": [], "owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "is_accepted": false, "score": 7, "last_activity_date": 1485200428, "creation_date": 1485200428, "answer_id": 41814287, "question_id": 41801600, "link": "https://stackoverflow.com/questions/41801600/mojolicious-in-apache-mod-perl/41814287#41814287", "title": "Mojolicious in Apache mod_perl", "body": "<p>If you want the benefits of Mojolicious you should not use Apache requests directly.</p>\n\n<p>First you need a special virtual host configuration. See <a href=\"https://github.com/kraih/mojo/wiki/Apache-deployment\" rel=\"noreferrer\">https://github.com/kraih/mojo/wiki/Apache-deployment</a> and scroll down to the chapter <strong>Apache/mod_perl (PSGI/Plack)</strong>. I authored this chapter, because I run a dozen of Mojo applications under mod_perl and it was a bit of trial and error to find a working way.</p>\n\n<p>Here the Apache config file as an example:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n  ServerName myapp.local\n  DocumentRoot /home/sri/myapp\n\n  PerlOptions +Parent\n\n  &lt;Perl&gt;\n    $ENV{PLACK_ENV} = 'production';\n    $ENV{MOJO_HOME} = '/home/sri/myapp';\n    $ENV{MOJO_MODE} = 'deployment';\n  &lt;/Perl&gt;\n\n  &lt;Location /&gt;\n    SetHandler perl-script\n    PerlResponseHandler Plack::Handler::Apache2\n    PerlSetVar psgi_app /home/sri/myapp/script/myapp\n  &lt;/Location&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>Second your module <code>MyApp.pm</code> should look like this:</p>\n\n<pre><code>package MyApp;\nuse Mojo::Base 'Mojolicious';\n\nsub startup {\n  my $app = shift;\n\n  my $routes = $app-&gt;routes;\n\n  $routes-&gt;get('/:foo' =&gt; sub {\n    my $self = shift;\n    my $foo  = $self-&gt;param('foo');\n    $self-&gt;render(text =&gt; \"Hello from $foo.\");\n  });\n\n}\n\n1;\n</code></pre>\n\n<p>That's all you need. The <code>Plack::Handler::Apache2</code> builds a layer between <code>mod_perl</code> and <code>Mojolicious</code>. Of course you need a script <code>myapp</code>. This script also allows you to run the web application from the console of your desktop e. g. during development and testing.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1485200428, "creation_date": 1485158610, "last_edit_date": 1485161879, "question_id": 41801600, "link": "https://stackoverflow.com/questions/41801600/mojolicious-in-apache-mod-perl", "title": "Mojolicious in Apache mod_perl", "body": "<p>i've got an ~15year old Perl-Application.\nThe application runs on Apache, example-code looks like:</p>\n\n<pre><code>use Apache2::RequestUtil ();\nuse Apache2::RequestRec ();\nuse Apache2::Const -compile =&gt; qw(OK);\n\nsub handler {\n  my $r = shift;\n  Apache2::RequestUtil-&gt;request($r)                                     \n  $r-&gt;subprocess_env;                      \n\n  $r = Apache2::RequestUtil-&gt;request; \n\n  $r-&gt;content_type(\"text/html\");\n  $r-&gt;print(\"Hello World\");\n  };\n\n return Apache2::Const::OK;              \n}\n1;\n</code></pre>\n\n<p>This works, but now I want to use Mojolicious for my new functionalily of this application.\nBut how can I integrate Mojolicious to this app?\nWhen I do the following</p>\n\n<pre><code>    use Apache2::RequestUtil ();\nuse Apache2::RequestRec ();\nuse Apache2::Const -compile =&gt; qw(OK);\n\nsub handler {\n  my $r = shift;\n  Apache2::RequestUtil-&gt;request($r                                     \n  $r-&gt;subprocess_env;                      \n\n  $r = Apache2::RequestUtil-&gt;request; \n\n  get '/:foo' =&gt; sub {\n    my $self = shift;\n    my $foo  = $self-&gt;param('foo');\n    $self-&gt;render(text =&gt; \"Hello from $foo.\");\n  };\n\n return Apache2::Const::OK;              \n}\napp-&gt;start;\n1;\n</code></pre>\n\n<p>I get a blank page. Is it possible to integrate Mojo to my app at all?</p>\n"}, {"tags": ["xml", "perl", "soapui"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485159866, "post_id": 41801525, "comment_id": 70791386, "body": "Yes, that&#39;s possible. I&#39;ll write an answer later."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485168172, "post_id": 41801525, "comment_id": 70796320, "body": "Do you have a WSDL file or anything else describing the SOAP endpoint? If you&#39;ve got a WSDL, <a href=\"http://stackoverflow.com/a/11991202/1331451\">stackoverflow.com/a/11991202/1331451</a> help."}], "answers": [{"tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": 1, "last_activity_date": 1485215138, "last_edit_date": 1485215138, "creation_date": 1485214750, "answer_id": 41817637, "question_id": 41801525, "link": "https://stackoverflow.com/questions/41801525/perl-soap-web-service-call-with-xml/41817637#41817637", "title": "Perl SOAP Web Service Call With XML", "body": "<p>You can use the <a href=\"https://de.wikipedia.org/wiki/Heredoc\" rel=\"nofollow noreferrer\">heredoc</a> style and submit your whole soap data as normal post request. </p>\n\n<p>You can also then make use of the non-blocking style in case the SOAP response from the remote host takes too long and you have to run other code in meanwhile.</p>\n\n<p>The designers of the SOAP protocol are not happy about this simplified use, because it's too simple.</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Mojo::UserAgent;\nmy $ua = Mojo::UserAgent-&gt;new;\n\nmy $username = \"MyUsername\";\nmy $password = \"MyPassword\";\n\nmy $hash;\n$hash-&gt;{variable} = \"SomeText\";\n\nmy $SOAP_request = &lt;&lt;\"END_MESSAGE\";\n&lt;soapenv:Envelope \n    xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" \n    xmlns:int=\"xxx\"&gt;\n       &lt;soapenv:Header/&gt;\n       &lt;soapenv:Body&gt;\n          &lt;int:method&gt;\n             &lt;!--Optional:--&gt;\n             &lt;int:userName&gt;$username&lt;/int:userName&gt;\n             &lt;!--Optional:--&gt;\n             &lt;int:password&gt;$password&lt;/int:password&gt;\n             &lt;!--Optional:--&gt;\n             &lt;int:variable&gt;@{[$hash-&gt;{variable}]}\n           ............\n           ...........   \n           &lt;/int:method&gt;\n       &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\nEND_MESSAGE\n</code></pre>\n\n<p><strong>Blocking</strong> </p>\n\n<pre><code>my $res = $ua-&gt;post('http:///www.example.com' =&gt; $SOAP_request);\nprint $res-&gt;body;\n</code></pre>\n\n<p><strong>Non-Blocking</strong></p>\n\n<pre><code>$ua-&gt;post('http://www.example.com' =&gt; $SOAP_request =&gt; sub { \n   my ($c, $tx) = @_; \n   print $tx-&gt;res-&gt;body;              \n});\n</code></pre>\n\n<p><strong>Reading the response</strong></p>\n\n<pre><code>use SOAP::Lite;\nmy $som = SOAP::Deserializer-&gt;deserialize($tx-&gt;res-&gt;text);\n\n# Simple xPath navigation through tags\n$som-&gt;valueof('//Response//SomeInformation//Details');\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 3050035, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/f6a68c414ec87ff9498e005268526e57?s=128&d=identicon&r=PG&f=1", "display_name": "kadir_beyazli", "link": "https://stackoverflow.com/users/3050035/kadir-beyazli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485215138, "creation_date": 1485158227, "last_edit_date": 1485169048, "question_id": 41801525, "link": "https://stackoverflow.com/questions/41801525/perl-soap-web-service-call-with-xml", "title": "Perl SOAP Web Service Call With XML", "body": "<p>I am calling SOAP web services by using Perl with the <a href=\"https://metacpan.org/pod/SOAP::Lite\" rel=\"nofollow noreferrer\"><code>SOAP::Lite</code></a> module as follows:</p>\n\n<pre><code>my $soap = SOAP::Lite-&gt;on_action( sub { join '/', @_ } )\n        -&gt;readable( 1 )\n        -&gt;uri( $uri )\n        -&gt;proxy( $proxy )\n        -&gt;ns( $ns );\n\n$soap-&gt;call(\n        'method' =&gt; ( SOAP::Data-&gt;name( ... ) )\n);\n</code></pre>\n\n<p>Is there any way of calling customer web service by using XML definition displayed at SOAPUI instead of writing <code>SOAP::Data</code> etc? It would be easier if there is an option to do this. </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:int=\"xxx\"&gt;\n  &lt;soapenv:Header/&gt;\n  &lt;soapenv:Body&gt;\n    &lt;int:method&gt;\n      &lt;!--Optional:--&gt;\n      &lt;int:userName&gt;?&lt;/int:userName&gt;\n      &lt;!--Optional:--&gt;\n      &lt;int:password&gt;?&lt;/int:password&gt;\n      &lt;!--Optional:--&gt;\n      ...\n    &lt;/int:method&gt;\n  &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n\n<p>For example, is something below possible?</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>    my $xml_string = qq((&lt;soapenv:Envelope \n    xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" \n    xmlns:int=\"xxx\"&gt;\n       &lt;soapenv:Header/&gt;\n       &lt;soapenv:Body&gt;\n          &lt;int:method&gt;\n             &lt;!--Optional:--&gt;\n             &lt;int:userName&gt;$username&lt;/int:userName&gt;\n             &lt;!--Optional:--&gt;\n             &lt;int:password&gt;$password&lt;/int:password&gt;\n             &lt;!--Optional:--&gt;\n           ............\n           ...........   \n           &lt;/int:method&gt;\n       &lt;/soapenv:Body&gt;\n    &lt;/soapenv:Envelope&gt;\n));\n$xml_string-&gt;process;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "catalyst"], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1485188962, "post_id": 41799647, "comment_id": 70810139, "body": "Well both did pretty good. Thanks a lot, @Tanktalus. I personally think second option is a little bit easier to read, so I&#39;m going with that one, but both worked :)"}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1485289334, "post_id": 41799647, "comment_id": 70861817, "body": "I was doing some testing and it seems like this works fine ONLY when 2 or more elements are being sent.  I receive this error whenever 1 element (minimum acceptable for request) is sent:  <code>[error] Caught exception in pbitdb::Controller::Subjects-&gt;add &quot;Can&#39;t use string (&quot;1&quot;) as an ARRAY ref while &quot;strict refs&quot; in use at &#47;home&#47;lioneluranl&#47;svn&#47;pbitdb&#47;pbitdb&#47;script&#47;..&#47;lib&#47;pbitdb&#47;Con&zwnj;&#8203;troller&#47;Subjects.pm line 119.&quot;</code>  ... where in this case &quot;1&quot; is the value sent... and the line referenced is the one where I declare the list:  <code>my @type_consents         = @{$params-&gt;{type_consent}};</code> Any ideas?"}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "reply_to_user": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 1, "creation_date": 1485293246, "post_id": 41799647, "comment_id": 70863823, "body": "IMO, it&#39;s poor design to have dynamic types - a key that can have a scalar value <i>or</i> an array (reference) value. However, if the API you&#39;re calling is not under your control, you may have to deal with it in your code: <code>my @type_consent = ref $params-&gt;{type_consent} ? @{$params-&gt;{type_consent}} : $params-&gt;{type_consent};</code> Similar for keeping as reference: <code>my $tc = ref $params-&gt;{type_consent} ? $params-&gt;{type_consent} : [ $params-&gt;{type_consent} ]</code>"}, {"owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "edited": false, "score": 0, "creation_date": 1485301853, "post_id": 41799647, "comment_id": 70867270, "body": "Yeah... unfortunately that&#39;s the way the API works :( . I didn&#39;t even know I could do that &quot;either one or the other&quot; thing in perl. Thanks A LOT. &lt;3"}], "tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": true, "score": 1, "last_activity_date": 1485148674, "creation_date": 1485148674, "answer_id": 41799647, "question_id": 41798826, "link": "https://stackoverflow.com/questions/41798826/iterating-through-a-perl-array-from-an-ajax-request/41799647#41799647", "title": "Iterating through a Perl array from an AJAX request", "body": "<p>The only values you can store in a hash are scalars.  Thus, <code>$params-&gt;{type_consent}</code> is a scalar, not a list.  However, since references to things (scalars, arrays, hashes, objects, globs, etc.) are also scalars, you can store references in a hash.</p>\n\n<p>What <code>$params-&gt;{type_consent}</code> is, therefore, is a reference to an array, not an array or list itself.</p>\n\n<p>What I think you want, then, is either to assign that to <code>my $type_consent = $params-&gt;{type_consent};</code> and then use <code>@$type_consent</code> as your array (and thus they both point at the same array - changing something through <code>@$type_consent</code> changes that array in <code>%$params</code>), <em>or</em> copy the array by saying <code>my @type_consent = @{$params-&gt;{type_consent}};</code>.</p>\n\n<p>Which one I choose to use is situational, but I tend towards the reference option if only to keep memory usage down if there is no reason to copy it.</p>\n"}], "owner": {"reputation": 518, "user_id": 6146264, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-YPMqqSeGAMU/AAAAAAAAAAI/AAAAAAAAAoA/AIMsmwe_vc8/photo.jpg?sz=128", "display_name": "Leitouran", "link": "https://stackoverflow.com/users/6146264/leitouran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 41799647, "answer_count": 1, "score": 4, "last_activity_date": 1485169496, "creation_date": 1485141782, "last_edit_date": 1592644375, "question_id": 41798826, "link": "https://stackoverflow.com/questions/41798826/iterating-through-a-perl-array-from-an-ajax-request", "title": "Iterating through a Perl array from an AJAX request", "body": "<p>I'm working on a Catalyst database project and trying to do some AJAX requests via jQuery. Parameters are being sent OK, as can be seen in image 1.</p>\n<p><img src=\"https://i.stack.imgur.com/ein2Y.png\" alt=\"List of parameters and values received in AJAX request\" /></p>\n<p>Notice that both &quot;diagnosis&quot; and &quot;type_consents&quot; (and their corresponding dates) are sent as an array of values (value 1, value 2, ... value n).</p>\n<p>Now for the server side treatment, <a href=\"https://metacpan.org/pod/Catalyst::Request\" rel=\"nofollow noreferrer\"><code>Catalyst::Request</code></a> allows for easy data retrieval through <code>$req-&gt;parameters</code>, but it doesn't seem to be working for me.</p>\n<p>I'm doing it like this:</p>\n<pre><code>my $params = $c-&gt;request-&gt;parameters; #Retrieving all parameters\n\nmy @type_consents         = $params-&gt;{type_consent};\nmy @date_consents         = $params-&gt;{date_consent};\nmy @diagnosis             = $params-&gt;{diagnosis};\nmy @date_diagnosis        = $params-&gt;{date_diagnosis};\n</code></pre>\n<p>Then I need to loop these arrays and make an insertion for each pair of values <code>(diagnosis|date , consent|date)</code>. Plus, I need to store and process all transactions and execute them all at once in an <code>eval()</code> block, so I'm doing it like this:</p>\n<pre><code>my %transactions;\n\n# Diagnosis\nmy $diag_index = 0;\n\nforeach my $key ( 0 .. $#diagnosis ) {\n    $transactions{diagnosis}{$diag_index} = $diagnosis_mod-&gt;new(\n        {\n            subject_id          =&gt; $subject_id,\n            diagnosis_date      =&gt; $date_diagnosis[$key],\n            diagnosis           =&gt; $diagnosis[$key],\n            diagnosis_comment   =&gt; &quot;&quot;,\n            suggested_treatment =&gt; &quot;&quot;\n        }\n    );\n\n    print STDERR &quot;\\n&quot; . $date_diagnosis[$diag_index];\n    print STDERR &quot;\\n DEBUG: $date_diagnosis[$diag_index] | $diagnosis[$diag_index] | key: $diag_index&quot;;\n    print STDERR &quot;\\n DEBUG2:&quot; . Dumper( @date_diagnosis ) . &quot; | &quot; . Dumper( @diagnosis );\n\n    $diag_index++;\n}\n\n# I'm avoiding evaluating and performing the transactions so neither eval() nor database impact are shown above.\n</code></pre>\n<p>Those debugs print the following:</p>\n<p><img src=\"https://i.stack.imgur.com/1fvdW.png\" alt=\"Debugs of array iteration\" /></p>\n<p>Does this suggest that my &quot;array&quot; is just a unidimensional variable with a string? I tried splitting it but that doesn't work either.</p>\n"}, {"tags": ["bash", "perl", "sorting", "add"], "comments": [{"owner": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1485123611, "post_id": 41796692, "comment_id": 70781829, "body": "Have you written anything?"}, {"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "reply_to_user": {"reputation": 28476, "user_id": 6862601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ppP5k.jpg?s=128&g=1", "display_name": "codeforester", "link": "https://stackoverflow.com/users/6862601/codeforester"}, "edited": false, "score": 0, "creation_date": 1485123993, "post_id": 41796692, "comment_id": 70781957, "body": "@codeforester I haven&#39;t I can&#39;t think of how I could manipulate the numbers to do that"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485124515, "post_id": 41796692, "comment_id": 70782099, "body": "Why is 300 - 400 &quot;+1&quot;? I&#39;m getting +2."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "edited": false, "score": 0, "creation_date": 1485129351, "post_id": 41796692, "comment_id": 70783218, "body": "@choroba: I agree. It&#39;s within only the first three ranges: 0 .. 5000 (+1), 100 .. 400 (-1), and 300 .. 500 (+2). The total is +2."}], "answers": [{"comments": [{"owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1485127121, "post_id": 41796853, "comment_id": 70782719, "body": "What do you mean exactly by delta value"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "edited": false, "score": 0, "creation_date": 1485129119, "post_id": 41796853, "comment_id": 70783180, "body": "@Bob: I mean your column four. It always helps if you name your data fields in your question so that we have terms to use that we can both understand."}], "tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1485124200, "creation_date": 1485124200, "answer_id": 41796853, "question_id": 41796692, "link": "https://stackoverflow.com/questions/41796692/calculating-gains-and-losses-of-overlapping-number-regions/41796853#41796853", "title": "Calculating gains and losses of overlapping number regions", "body": "<p>For each distinct value of the first column, create a list of all start and end points of the ranges that it's divided into.</p>\n\n<p>Sort those points</p>\n\n<p>For each line of data, add the delta value to all ranges between the limits</p>\n\n<p>(You may combine multiple ranges if they are adjacent and end up with the same value)</p>\n\n<p>Print the result</p>\n"}, {"tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1485124770, "creation_date": 1485124770, "answer_id": 41796923, "question_id": 41796692, "link": "https://stackoverflow.com/questions/41796692/calculating-gains-and-losses-of-overlapping-number-regions/41796923#41796923", "title": "Calculating gains and losses of overlapping number regions", "body": "<p>Store the data in a hash table. The topmost key is the id (the 1<sup>st</sup> column). Second level keys are the \"breaks\", i.e. the borders of the regions where the gain changes. The values are how much the gain changes.</p>\n\n<p>When printing the output, just keep a running gain and add the stored value to it; print if the result isn't zero. Note that the output is different to your expected one, but I got mine when trying to solve the problem by pen and paper, too.</p>\n\n<pre><code>#!/usr/bin/perl\nuse warnings;\nuse strict;\nuse feature qw{ say };\n\nmy %table;\n\nwhile (&lt;&gt;) {\n    my ($id, $from, $to, $gain) = split;\n    $table{$id}{$from} += $gain;\n    $table{$id}{$to} -= $gain;\n}\n\nfor my $id (sort { $a &lt;=&gt; $b } keys %table) {\n    my $previous;\n    my $gain = 0;\n    for my $break (sort { $a &lt;=&gt; $b } keys %{ $table{$id} }) {\n        if (defined $previous) {\n            $gain += $table{$id}{$previous};\n            say join \"\\t\", $id, $previous, $break, $gain\n                if $gain;\n        }\n        $previous = $break;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1       50      100     1\n1       300     400     2\n1       400     500     3\n1       500     1000    1\n1       1000    1100    2\n1       1100    1200    4\n1       1200    5000    1\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 41796853, "answer_count": 2, "score": -2, "last_activity_date": 1485124770, "creation_date": 1485122933, "last_edit_date": 1485124057, "question_id": 41796692, "link": "https://stackoverflow.com/questions/41796692/calculating-gains-and-losses-of-overlapping-number-regions", "title": "Calculating gains and losses of overlapping number regions", "body": "<p>The numbers in the second and third column specify a range. What I want is (if the number in the first column is the same) to calculate overlapping regions, and calculate how many in a range are gained or lost as determined by the number on the right(+1 = one gained, -1 = one lost). \nFor example if I have </p>\n\n<pre><code>1   0   300  +2\n1   100 200  -1\n2   100 200  -1\n</code></pre>\n\n<p>This means I actually have</p>\n\n<pre><code>1   0   100   +2\n1   100 200   +1\n1   200 300   +2\n2   100 200   -1\n</code></pre>\n\n<p>because <code>1   100 200</code> overlaps with <code>1   0   300</code> creating <code>0   100   +2</code>, <code>100 200   +1</code> and <code>200 300   +2</code> but <code>2   100 200</code> has no overlaps and simply prints out <code>2   100 200   -1</code></p>\n\n<p>Sample input</p>\n\n<pre><code>1   0   5000    +1\n1   100 400 -1\n1   300 500 +2\n1   1000    1200    +3\n1   1000    1100    -2\n1   0   50  -1\n</code></pre>\n\n<p>expected result</p>\n\n<pre><code>1  50   100 +1\n1  300  400 +1\n1  400  500 +3\n1  1000 1100    -1\n1  1100 1200    +2\n1  1200 5000    +1\n</code></pre>\n\n<p>Some sort of pseudocode for how to accomplish this would be nice</p>\n\n<p>But languages which would work for me are bash, perl, awk or sed</p>\n"}, {"tags": ["mysql", "perl", "dbi", "dbd"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1485117347, "post_id": 41795778, "comment_id": 70779852, "body": "Have you tried deleting the file <code>&#47;Users&#47;Zhiang&#47;.cpan&#47;Bundle&#47;DBD&#47;mysql.pm</code> as the error message suggests?"}, {"owner": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 1, "creation_date": 1485117426, "post_id": 41795778, "comment_id": 70779876, "body": "&quot;When I try to download DBD::mysql from CPAN&quot; \u2014 How are you doing this?"}, {"owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485120325, "post_id": 41795778, "comment_id": 70780795, "body": "@simbabque should i just delete the mysql.pm, or the whole &quot;.cpan/Bundle/DBD&quot; and reinstall DBD ?"}, {"owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "reply_to_user": {"reputation": 793701, "user_id": 19068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2d3229ed1961d2bd81853242493247?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/19068/quentin"}, "edited": false, "score": 0, "creation_date": 1485120775, "post_id": 41795778, "comment_id": 70780955, "body": "@Quentin going on CPAN via the shell, <code>get DBD::mysql</code>"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485130326, "post_id": 41795778, "comment_id": 70783400, "body": "If you had used <code>get DBD::mysql</code> then <code>cpan</code> would have downloaded and untarred <code>DBD-mysql.4.041.tar.gz</code> into a temporary directory. Whatever you did next is wrong. What gave you the idea to mess with <code>Bundle&#47;DBD&#47;mysql.pm</code>? You shouldn&#39;t be touching anything in that directory except perhaps <code>Makefile.PL</code>. It&#39;s best not to guess when installing stuff."}, {"owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485136568, "post_id": 41795778, "comment_id": 70784726, "body": "@Borodin , thats literally all I did, but that was after I had all those errors from the script, I only used the <code>get DBD::mysql</code> at CPAN, just in case, and Im still getting the bundle errors. I have NOT messed with the <code>Bundle&#47;DBD&#47;mysql.pm</code> at all."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485136989, "post_id": 41795778, "comment_id": 70784813, "body": "So exactly what do you do to get <code>The bundle file &quot;&#47;Users&#47;Zhiang&#47;.cpan&#47;Bundle&#47;DBD&#47;mysql.pm&quot; may be a broken bundlefile</code>?"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485137887, "post_id": 41795778, "comment_id": 70785037, "body": "Have you used <code>use lib</code> in your program, or set the <code>PERLLIB</code> or <code>PERL5LIB</code> environment variables? There&#39;s no way an ordinary Perl program will go searching through the private <code>.cpan</code> directory tree without being told to."}, {"owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485138950, "post_id": 41795778, "comment_id": 70785269, "body": "@Borodin I used the <code>use lib</code> function, didnt work, got the same error.  Heck stil getting this error <code>install_driver(mysql) failed: Can&#39;t locate DBD&#47;mysql.pm in @INC</code>. So it looks like a a broken bundle file, the question i have for you is, how to fix a broken bundle file, when redownloading download from CPAN doesnt work."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485142184, "post_id": 41795778, "comment_id": 70785976, "body": "It sounds very much like you have never installed <code>DBD::mysql</code>. I still want to know what you were doing to get a message about <code>.cpan&#47;Bundle&#47;DBD&#47;mysql.pm</code>. Nothing should be looking in there."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485142493, "post_id": 41795778, "comment_id": 70786080, "body": "I should be in bed -- it&#39;s 3:30am. Write a new question and include the code of your Perl program and the log that shows you running <code>cpan</code> and <code>get DBD::mysql</code> to create the <i>broken bundlefile</i> message. I&#39;ll take a look in the morning."}, {"owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485232942, "post_id": 41795778, "comment_id": 70828162, "body": "@Borodin  ok I deleted <code>&#47;Users&#47;Zhiang&#47;.cpan&#47;Bundle&#47;DBD&#47;mysql.pm</code>, still not working. Then tried <code>get  DBD::mysql</code>, worked, <code>make DBD::mysql</code> worked, ` test DBD::mysql` get this error  <code>#   Failed test &#39;use DBD::mysql;&#39; #   at t&#47;00base.t line 15. #     Tried to use &#39;DBD::mysql&#39;.&#39;</code> , also install get the same error."}], "owner": {"reputation": 5, "user_id": 7061829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb47808fde0eb68332e7af6ed07e4008?s=128&d=identicon&r=PG&f=1", "display_name": "Dcdw51", "link": "https://stackoverflow.com/users/7061829/dcdw51"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "closed_date": 1485118517, "answer_count": 0, "score": 0, "last_activity_date": 1485117310, "creation_date": 1485116848, "last_edit_date": 1485117310, "question_id": 41795778, "link": "https://stackoverflow.com/questions/41795778/trying-to-access-mysql-with-perl-script", "closed_reason": "Duplicate", "title": "Trying to access MySQL with perl script", "body": "<p>Learning to use Perl DBI, with MySql.</p>\n\n<p>Need to do the equivalent of this command </p>\n\n<pre><code>/usr/local/mysql/bin/mysql -u root -p\n</code></pre>\n\n<p>In a Perl Script.</p>\n\n<p>Here is the script I am using:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse v5.10; # for say() function\nuse DBI;\n\nmy $dsn = \"DBI:mysql:youtube_data_tmp:localhost\";\nmy $username = \"root\";\nmy $password = '';\n\nsay \"Perl MySQL INSERT Demo\";\n\nmy %attr = (PrintError=&gt;0,RaiseError=&gt;1 );\nmy $dbh = DBI-&gt;connect($dsn,$username,$password,\\%attr);\n</code></pre>\n\n<p>The error I keep getting is:</p>\n\n<pre><code>install_driver(mysql) failed: Can't locate DBD/mysql.pm in @INC (you may need to install the DBD::mysql module)\n</code></pre>\n\n<p>When I try to download DBD::mysql from CPAN I keep getting this error:</p>\n\n<blockquote>\n  <p>The bundle file \"/Users/Zhiang/.cpan/Bundle/DBD/mysql.pm\" may be a broken\n  bundlefile. It seems not to contain any bundle definition.\n  Please check the file and if it is bogus, please delete it.\n  Sorry for the inconvenience.</p>\n</blockquote>\n\n<p>I am really lost, and have know idea where to go from here. Is this a Perl script problem or an issue with the module ?</p>\n"}, {"tags": ["arrays", "perl", "hash"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485120095, "post_id": 41788492, "comment_id": 70780720, "body": "If you need to &quot;<i>identify which element of the array corresponds to a given value of a hash element</i>&quot; then you don&#39;t need a sorted array that you are asking about, but rather a lookup mechanism like in Borodin&#39;s answer.  Also, I&#39;d suggest to read through some docs on these things. Tutorial on references is <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a> and for complex data structures there is the cookbook <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>"}, {"owner": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485120862, "post_id": 41788492, "comment_id": 70780989, "body": "@zdim, Thanks for the tip) I will study these docs"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485121529, "post_id": 41788492, "comment_id": 70781174, "body": "Just in case ... I take it that your &quot;<i>description</i>&quot; is in reality varied text, and not always the same word. But, if by any chance you actually have hashes with a single pair and each has the <i>same word</i> for the key then you should change the design (no need for two data structures, but use either an array or a hash).  Also, it appears awkward to sort the array by hash <i>values</i> -- how are you going to look them up?  How are you going to retrieve the element for, say, the value <code>hard</code>? You&#39;d have to iterate, denying the purpose of the hash.  Perhaps you should explain the purpose of all this."}, {"owner": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "reply_to_user": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485122874, "post_id": 41788492, "comment_id": 70781596, "body": "@zdim, data structure represented in this case is an abstraction and a stripped-down version of the real data (and as shown by the discussion - not the most successful, unfortunately). In real task it&#39;s more complicated, but (as I thought) to clarify the matter - should be enough of these data."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1485124800, "post_id": 41788492, "comment_id": 70782168, "body": "Alright, thanks for confirming that :)  I am still unsure about the utility of an array sorted by hash values, but that may have been lost in abstraction -- you know your real data and problem."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "edited": false, "score": 0, "creation_date": 1485084104, "post_id": 41789293, "comment_id": 70769313, "body": "In context of your solutionwas one sub-question: how to dinamically @aoh transform to array of hash references.  Simple loop transformation doesn&#39;t work in my hand! That&#39;s need to <code>(%h1, %h2, %h3, %h4, %h5, %h6, %h7, %h8, %h9)</code> transform to <code>(\\%h1, \\%h2, \\%h3, \\%h4, \\%h5, \\%h6, \\%h7, \\%h8, \\%h9)</code>"}, {"owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "reply_to_user": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "edited": false, "score": 2, "creation_date": 1485092950, "post_id": 41789293, "comment_id": 70771811, "body": "@John I do not know any nice way to do that. Inside PERL lists, hashes are are not distinguishable because they are automatically broken into a sequence of keys and values. You may like to use hashrefs from the start like <code>my $h0 = { description =&gt; &quot;yo value&quot; };</code>."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 3, "creation_date": 1485103565, "post_id": 41789293, "comment_id": 70775240, "body": "The <i>reference operator</i> <code>\\ </code>  is <i>distributive</i>, so <code>my @aoh = ( \\%h1, \\%h2, \\%h3, \\%h4, \\%h5, \\%h6, \\%h7, \\%h8, \\%h9 )</code> may be more conveniently written as <code>my @aoh = \\ ( %h1, %h2, %h3, %h4, %h5, %h6, %h7, %h8, %h9 );</code>"}, {"owner": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1485108327, "post_id": 41789293, "comment_id": 70776819, "body": "@Borodin, thanks, that&#39;s good and important addition to understanding of the case"}], "tags": [], "owner": {"reputation": 2494, "user_id": 1921546, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fe4ac75c43b846d9665f422cdac5cb03?s=128&d=identicon&r=PG", "display_name": "pii_ke", "link": "https://stackoverflow.com/users/1921546/pii-ke"}, "is_accepted": true, "score": 1, "last_activity_date": 1485107456, "last_edit_date": 1485107456, "creation_date": 1485077260, "answer_id": 41789293, "question_id": 41788492, "link": "https://stackoverflow.com/questions/41788492/find-an-array-element-from-the-value-of-an-element-of-the-hashes-it-contains/41789293#41789293", "title": "Find an array element from the value of an element of the hashes it contains", "body": "<p>The following code uses an array of hash references and sorts it according to the value of <code>description</code> key. A backslash before hash variable name (<code>\\%h1</code>) represents a reference to that hash. The <code>sort</code> function uses a custom comparison block, lookup <code>perldoc -f sort</code> for more information about it and <code>perldoc perlcheat</code> to learn how to work with references.</p>\n\n<pre><code>        #!/usr/bin/perl\n        use warnings;\n        use strict;\n\n        my %h1 = ('description', 'greate one');\n        my %h2 = ('description', 'fool');\n        my %h3 = ('description', 'easy');\n        my %h4 = ('description', 'intermediate');\n        my %h5 = ('description', 'hard');\n        my %h6 = ('description', 'beauty');\n        my %h7 = ('description', 'dark');\n        my %h8 = ('description', 'yellow');\n        my %h9 = ('description', 'red');\n        my @aoh = (\\%h1, \\%h2, \\%h3, \\%h4, \\%h5, \\%h6, \\%h7, \\%h8, \\%h9);\n\n        my @sorted = sort { $a-&gt;{description} cmp $b-&gt;{description} } @aoh;\n        use Data::Dumper;\n        print Dumper(\\@sorted);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "edited": false, "score": 0, "creation_date": 1485083331, "post_id": 41789677, "comment_id": 70769110, "body": "oh, thanks.. This solution looks not so universal as from@pii_ke, because if i do a little bit complex for every hashes, output of this code remains the same (only with pair &#39;description&#39;-&gt;value).  Maybe it&#39;s looks so for my, beginner position only"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "reply_to_user": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "edited": false, "score": 1, "creation_date": 1485103929, "post_id": 41789677, "comment_id": 70775383, "body": "@JohnSmith: You must put <i>all your requirements</i> into your question. If you want to add something non-trivial to your question then you should write a new question. It is unfair to accept one answer over another because it happens to fulfil requirements that you didn&#39;t specify."}, {"owner": {"reputation": 83, "user_id": 2057152, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2b20250a7ef717cedcb3a3e70a3d6939?s=128&d=identicon&r=PG", "display_name": "anil funde", "link": "https://stackoverflow.com/users/2057152/anil-funde"}, "reply_to_user": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "edited": false, "score": 0, "creation_date": 1485106318, "post_id": 41789677, "comment_id": 70776180, "body": "k , agreed , @JohnSmith , but that answer again can&#39;t be universal being hard check for key &#39;description&#39; , i did mention in my comments abt leveraging unique key among all other hasesh."}, {"owner": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "edited": false, "score": 0, "creation_date": 1485108224, "post_id": 41789677, "comment_id": 70776784, "body": "@Birodin, my original question was about how to return the entire hash via using hash value of one of its key.. I suppose that, as tests have shown, using a different array of hashes (with many key-value pairs) in the decision still does not return the entire hash"}], "tags": [], "owner": {"reputation": 83, "user_id": 2057152, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2b20250a7ef717cedcb3a3e70a3d6939?s=128&d=identicon&r=PG", "display_name": "anil funde", "link": "https://stackoverflow.com/users/2057152/anil-funde"}, "is_accepted": false, "score": -1, "last_activity_date": 1485079994, "creation_date": 1485079994, "answer_id": 41789677, "question_id": 41788492, "link": "https://stackoverflow.com/questions/41788492/find-an-array-element-from-the-value-of-an-element-of-the-hashes-it-contains/41789677#41789677", "title": "Find an array element from the value of an element of the hashes it contains", "body": "<p>how about leveraging unique key name across ll hasesh</p>\n\n<pre><code>use Data::Dumper;\nmy %h1 = ('description', 'great one');\nmy %h2 = ('description', 'fool');\nmy %h3 = ('description', 'easy');\nmy %h4 = ('description', 'intermediate');\nmy %h5 = ('description', 'hard');\nmy %h6 = ('description', 'beauty');\nmy %h7 = ('description', 'dark');\nmy %h8 = ('description', 'yellow');\nmy %h9 = ('description', 'red');\nmy @aoh =  sort map { values $_ } (\\%h1, \\%h2, \\%h3, \\%h4, \\%h5, \\%h6, \\%h7, \\%h8, \\%h9);\nmy @hash = map { {\"description\" =&gt; $_}} @aoh;\nprint  Dumper(\\@hash);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1485123128, "last_edit_date": 1485123128, "creation_date": 1485114748, "answer_id": 41795449, "question_id": 41788492, "link": "https://stackoverflow.com/questions/41788492/find-an-array-element-from-the-value-of-an-element-of-the-hashes-it-contains/41795449#41795449", "title": "Find an array element from the value of an element of the hashes it contains", "body": "\n\n<p>As has been explained, your array <code>@aoh</code> isn't an array of hashes, it's just an array of scalar data. It looks like this</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>(\n  \"description\",\n  \"great one\",\n  \"description\",\n  \"fool\",\n  \"description\",\n  \"easy\",\n  \"description\",\n  \"intermediate\",\n  \"description\",\n  \"hard\",\n  \"description\",\n  \"beauty\",\n  \"description\",\n  \"dark\",\n  \"description\",\n  \"yellow\",\n  \"description\",\n  \"red\",\n)\n</code></pre>\n\n<p>The identity of the hashes has been lost, and the data is flattened into a single list. Perl implements nested structures by using <em>references</em></p>\n\n<p>You don't say where your data is coming from, but rather than starting with a number of individually-named hashes and then copying their references into an array, it is probably best to use the elements of the array directly, so <code>$h1{description}</code> becomes <code>$aoh[0]{description}</code> etc.</p>\n\n<p>This solution starts with <code>@aoh</code> built like this, so there are no named hashes. </p>\n\n<p><em>(By the way, names like <code>%h1</code> and <code>@aoh</code> are very poor. Identifiers should describe the notion of their contents, so <code>%people</code>, or <code>@sales_figures</code>, not the nature of data structure that they are. The leading <code>%</code> or <code>@</code> in Perl tells you that anyway, but the same applies to identifiers in any language.)</em></p>\n\n<p>If you often find yourself needing to access what value corresponds to another in a program, then it's usually best to build a separate hash to store that relationship. Here I've built hash <code>%desc_to_index</code> which relates the values of each hash's <code>description</code> element to the index of the array where it's found</p>\n\n<p>I've dumped the resulting structure at the end so that you can see what it contains</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>use strict;\nuse warnings 'all';\n\nuse List::Util 'max';\n\nmy @aoh = (\n    { description =&gt; 'great one' },\n    { description =&gt; 'fool' },\n    { description =&gt; 'easy' },\n    { description =&gt; 'intermediate' },\n    { description =&gt; 'hard' },\n    { description =&gt; 'beauty' },\n    { description =&gt; 'dark' },\n    { description =&gt; 'yellow' },\n    { description =&gt; 'red' },\n);\n\nmy %desc_to_index = map { $aoh[$_]{description} =&gt; $_ } 0 .. $#aoh;\n\n{\n    my $len = max map { length } keys %desc_to_index;\n\n    for my $desc ( sort keys %desc_to_index ) {\n        printf \"%*s =&gt; %d\\n\", $len, $desc, $desc_to_index{$desc};\n    }\n}\n</code></pre>\n\n<h3>output</h3>\n\n<pre class=\"lang-none prettyprint-override\"><code>      beauty =&gt; 5\n        dark =&gt; 6\n        easy =&gt; 2\n        fool =&gt; 1\n   great one =&gt; 0\n        hard =&gt; 4\nintermediate =&gt; 3\n         red =&gt; 8\n      yellow =&gt; 7\n</code></pre>\n\n<p>I hope you'll agree that the <code>map</code> statement that builds <code>%desc_to_index</code> is neat and concise, but it may baffle you. If you prefer, you may write a for loop instead which does the same thing, like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>my %desc_to_index;\n\nfor my $i ( 0 .. $#aoh ) {\n    my $desc = $aoh[$i]{description};\n    $desc_to_index{$desc} = $i;\n}\n</code></pre>\n\n<p>which produces identical results</p>\n\n<p>Note also that your loop</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>while ( my ($index, $value) = each @aoh ) { ... }\n</code></pre>\n\n<p>uses <code>each</code> on an array, which is unusual and unnecessary here. It is also unavailable before Perl 5 v12, and <code>each</code> can produce awkward errors if the loop is exited prematurely</p>\n\n<p>You don't need <code>each</code> because you never use the value of <code>$value</code>, preferring <code>$aoh[$index]</code> instead, which is much more common. Your loop would be better written with a simple <code>for</code> loop like this</p>\n\n<pre class=\"lang-perl prettyprint-override\"><code>for my $index ( 0 .. $#aoh ) { ... }\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6909325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42dfa8ad4babf605aaf629b9f947e1b3?s=128&d=identicon&r=PG&f=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/6909325/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 41789293, "answer_count": 3, "score": 1, "last_activity_date": 1485123128, "creation_date": 1485070727, "last_edit_date": 1485115944, "question_id": 41788492, "link": "https://stackoverflow.com/questions/41788492/find-an-array-element-from-the-value-of-an-element-of-the-hashes-it-contains", "title": "Find an array element from the value of an element of the hashes it contains", "body": "<p>I'm try to sort an array of hashes <code>@aoh</code>, and at the moment I extract certain keys' values and sort this list. I extract the value for the key <code>description</code> from each hash.</p>\n\n<p>Now I want to be able to identify which element of the array corresponds to a given value of a hash element.</p>\n\n<p>I think I need to use hash references, but how to do it?</p>\n\n<p>Example of my code is below</p>\n\n<pre><code>#!/usr/bin/perl\n\nuse warnings;\nuse strict;\n\nmy %h1 = ('description', 'great one');\nmy %h2 = ('description', 'fool');\nmy %h3 = ('description', 'easy');\nmy %h4 = ('description', 'intermediate');\nmy %h5 = ('description', 'hard');\nmy %h6 = ('description', 'beauty');\nmy %h7 = ('description', 'dark');\nmy %h8 = ('description', 'yellow');\nmy %h9 = ('description', 'red');\n\nmy @aoh = ( %h1, %h2, %h3, %h4, %h5, %h6, %h7, %h8, %h9 );\n\nmy @vals;\n\nwhile ( my ($index, $value) = each @aoh ) {\n\n    if ( $aoh[$index] ne 'description' ) {\n        push @vals, $aoh[$index];\n    }\n}\n\nmy @sorted = sort @vals;\n\nprintf \"@sorted\\n\";\n</code></pre>\n\n<p>In an result I would like to get <code>@sorted_aoh</code> like this:</p>\n\n<pre><code>@sorted_aoh = (\n    'description'-&gt;'beauty',\n    'description'-&gt;'dark',\n    'description'-&gt;'easy',\n    'description'-&gt;'fool',\n    'description'-&gt;'great one',\n    'description'-&gt;'one',\n    'description'-&gt;'hard',\n    'description'-&gt;'intermediate',\n    'description'-&gt;'red',\n);\n</code></pre>\n"}, {"tags": ["perl", "foreach"], "comments": [{"owner": {"reputation": 3472, "user_id": 4990392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89acc35f0339a9c7e6ae36443a23e2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Dada", "link": "https://stackoverflow.com/users/4990392/dada"}, "edited": false, "score": 7, "creation_date": 1484994550, "post_id": 41778211, "comment_id": 70747101, "body": "See <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">perldoc -f print</a> : <i>If LIST is omitted, prints $_ to the currently selected output handle.</i> <code>$_</code> is the default argument for print, meaning that if you just call <code>print</code> without argument, <code>$_</code> gets printed."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 2, "creation_date": 1484995990, "post_id": 41778211, "comment_id": 70747509, "body": "See about <code>$_</code> in <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">General Variables in perlvar</a>. There are <i>many</i> things in Perl that use it as default, and it is one of <i>the</i> most common devices."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485000088, "post_id": 41778211, "comment_id": 70748646, "body": "Is anyone going to write an answer? It&#39;s a valid question, though reading the docs should be enough. Just finding that specific doc is hard. We basically have the answer with the comments above, but comments are not for answers. I&#39;m going to wait in case one of you guys decides to write the answer."}, {"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1485001297, "post_id": 41778211, "comment_id": 70748969, "body": "So I did @simbabque"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 1, "creation_date": 1485168995, "post_id": 41778211, "comment_id": 70796881, "body": "@simbabque  Thanks for prompting for answers, you were completely right. The question at first appeared to me as right out of docs, but it did need and warrant proper answers."}], "answers": [{"tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 2, "last_activity_date": 1485002302, "last_edit_date": 1485002302, "creation_date": 1485001137, "answer_id": 41779247, "question_id": 41778211, "link": "https://stackoverflow.com/questions/41778211/how-are-the-values-printed-in-the-foreach-statement/41779247#41779247", "title": "How are the values printed in the foreach statement?", "body": "<p>If you are not declaring any variable in your <code>foreach</code> loop it sets by default <code>$_</code> </p>\n\n<p>From <a href=\"http://perldoc.perl.org/5.18.0/perlsyn.html#Foreach-Loops\" rel=\"nofollow noreferrer\">perldoc about foreach</a>:</p>\n\n<blockquote>\n  <p>The foreach keyword is actually a synonym for the for keyword, so you\n  can use either. If VAR is omitted, $_ is set to each value.</p>\n</blockquote>\n\n<p>So it explains the first loop.</p>\n\n<p>The second loop, as you already know now that <code>$_</code> is set with each element from your array, will works because you are omitting the $<code>var</code>.</p>\n\n<p>You could use foreach loop with explicit variable like this:</p>\n\n<pre><code>foreach my $item ( @list )\n{\n\n print \"My item is: $item\\n\";\n\n} \n</code></pre>\n\n<p>Or you can omit like you did and  <a href=\"http://perldoc.perl.org/functions/print.html\" rel=\"nofollow noreferrer\">print</a>  will still work as @Dada said because:</p>\n\n<blockquote>\n  <p>If FILEHANDLE is omitted, prints to the last selected (see select)\n  output handle. If LIST is omitted, prints $_ to the currently selected\n  output handle.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 3789861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee16f95896c5299feada37720fbd5b71?s=128&d=identicon&r=PG&f=1", "display_name": "linuxtestside", "link": "https://stackoverflow.com/users/3789861/linuxtestside"}, "is_accepted": false, "score": 0, "last_activity_date": 1485858593, "last_edit_date": 1485858593, "creation_date": 1485003540, "answer_id": 41779657, "question_id": 41778211, "link": "https://stackoverflow.com/questions/41778211/how-are-the-values-printed-in-the-foreach-statement/41779657#41779657", "title": "How are the values printed in the foreach statement?", "body": "<p>I will explain why you getting same results with the different syntax:</p>\n\n<p>If you omit the control variable from the beginning of the foreach\nloop, Perl uses its favorite default variable, $_ . This is (mostly) just like any other scalar variable, except for its unusual name. For example:</p>\n\n<pre><code>foreach ('hickory','dickory','doc') {\n  print $_;\n  print \"\\n\";\n}\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>hickory\ndickory\ndoc\n</code></pre>\n\n<p>Although this isn\u2019t Perl\u2019s only default by a long shot, it\u2019s Perl\u2019s most common default. You\u2019ll see many other cases in which Perl will automatically use $_ when you don\u2019t tell it to use some other variable or value, thereby saving the programmer from the heavy labor of having to think up and type a new variable name. So as not to keep you in suspense, one of those cases is \nprint , which will print $_ if given no other argument:</p>\n\n<pre><code>foreach ('hickory','dickory','doc') {\n  print; # prints $_ by default\n  print \"\\n\";\n}\n</code></pre>\n\n<p>Output :- </p>\n\n<pre><code>hickory\ndickory\ndoc\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1559288593, "last_edit_date": 1559288593, "creation_date": 1485031376, "answer_id": 41784276, "question_id": 41778211, "link": "https://stackoverflow.com/questions/41778211/how-are-the-values-printed-in-the-foreach-statement/41784276#41784276", "title": "How are the values printed in the foreach statement?", "body": "<p>Your question about <code>print</code> in <code>foreach</code> being answered, here is a little more on <code>$_</code>.</p>\n\n<p>From <a href=\"http://perldoc.perl.org/perlvar.html#General-Variables\" rel=\"nofollow noreferrer\">General Variables in perlvar</a></p>\n\n<blockquote>\n  <p>Here are the places where Perl will assume <code>$_</code> even if you don't use it:   </p>\n  \n  <ul>\n  <li><p>The following functions use <code>$_</code> as a default argument:  </p>\n  \n  <ul>\n  <li>abs, alarm, chomp, chop, chr, chroot, cos, defined, eval, evalbytes, exp, fc, glob, hex, int, lc, lcfirst, length, log, lstat, mkdir, oct, ord, pos, print, printf, quotemeta, readlink, readpipe, ref, require, reverse (in scalar context only), rmdir, say, sin, split (for its second argument), sqrt, stat, study, uc, ucfirst, unlink, unpack.</li>\n  </ul></li>\n  <li><p>All file tests (<code>-f</code> , <code>-d</code> ) except for <code>-t</code> , which defaults to STDIN. See <a href=\"http://perldoc.perl.org/functions/-X.html\" rel=\"nofollow noreferrer\"><code>-X</code></a></p></li>\n  <li><p>The pattern matching operations <code>m//</code>, <code>s///</code> and <code>tr///</code> (aka <code>y///</code>) when used without an <code>=~</code> operator.</p></li>\n  <li><p>The default iterator variable in a <code>foreach</code> loop if no other variable is supplied.</p></li>\n  <li><p>The implicit iterator variable in the <code>grep()</code> and <code>map()</code> functions.</p></li>\n  <li><p>The implicit variable of <code>given()</code>.</p></li>\n  <li><p>The default place to put the next value or input record when a <code>&lt;FH&gt;</code>, <code>readline</code>, <code>readdir</code> or <code>each</code> operation's result is tested by itself as the sole criterion of a <code>while</code> test. Outside a <code>while</code> test, this will not happen.</p></li>\n  <li><p><code>$_</code> is by default a global variable. </p></li>\n  </ul>\n</blockquote>\n\n<p>As you can see, it is available nearly everywhere and it is indeed used a lot. Note that the <a href=\"http://perldoc.perl.org/perlvar.html\" rel=\"nofollow noreferrer\">perlvar</a> page describes a whole lot more of similar variables, many of them good to know about.</p>\n\n<p>Here is an example.  Consider that we read lines from a file, want to discard the ones which have only spaces or start with <code>#</code> (comments), and for others want to split them by spaces into words.  </p>\n\n<pre><code>open my $fh, '&lt;', $file  or die \"Can't open $file: $!\";\n\nwhile (&lt;$fh&gt;) \n{\n    next if not /\\S/;\n    next if /^\\s*#/;\n\n    my @words = split;\n\n    # do something with @words ...\n}\n</code></pre>\n\n<p>Let's see how many uses of <code>$_</code> are in the above example.  Here is an equivalent program</p>\n\n<pre><code>while (my $line = &lt;$fh&gt;) \n{\n    next if not $line =~ m/\\S/;    # if not matching any non-space character\n    next if $line =~ m/^\\s*#/;     # if matching # after only (possible) spaces\n\n    my @words = split ' ', $line;  # split $line by ' ' (any white space)\n\n    # do something with @words ...\n}\n</code></pre>\n\n<p>Compare these two</p>\n\n<ul>\n<li><p>the filehandle read <code>&lt;$fh&gt;</code> in the <code>while</code> condition assigns to <code>$_</code>, then available in the loop.</p></li>\n<li><p>regular expression's <em>match operator</em> by default works on <code>$_</code>. The <code>m</code> itself can be dropped.</p></li>\n<li><p><code>split</code> by default splits <code>$_</code>.  We also use the other default, for the pattern to split the string by, which is <code>' '</code> (any amount of any white space).</p></li>\n<li><p>once we do <code>$line = &lt;$fh&gt;</code> the deal with <code>$_</code> is off (it is undefined in the loop) and we have to use <code>$line</code> everywhere.  So <em>either</em> do this <em>or</em> do <code>while (&lt;$fh&gt;)</code> and use <code>$_</code>.</p></li>\n</ul>\n\n<p>To illustrate all this a bit further, let us find the longest capitalized word on each line</p>\n\n<pre><code>use List::Util 'max';\n\nmy $longest_cap = max map { length } grep { /^[A-Z]/ } @words;\n</code></pre>\n\n<p>The <a href=\"http://perldoc.perl.org/functions/grep.html\" rel=\"nofollow noreferrer\">grep</a> takes the list in <code>@words</code> and applies the block to each element. Each element is assigned to <code>$_</code> and is thus available to the code inside the block as <code>$_</code>. This is what the regex uses by default. The ones that satisfy the condition are  passed to <a href=\"http://perldoc.perl.org/functions/map.html\" rel=\"nofollow noreferrer\">map</a>, which also iterates assigning them to <code>$_</code>, what is of course the default for <a href=\"http://perldoc.perl.org/functions/length.html\" rel=\"nofollow noreferrer\">length</a>. Finally <code>max</code> from <a href=\"http://perldoc.perl.org/List/Util.html\" rel=\"nofollow noreferrer\">List::Util</a> picks the largest one.  </p>\n\n<p>Note that <code>$_</code> is never actually written and no temporary variable is needed.</p>\n\n<p>Here is some of the relevant documentation.  The <a href=\"http://perldoc.perl.org/perlop.html#I/O-Operators\" rel=\"nofollow noreferrer\">I/O Operators in perlop</a> discusses <code>while (&lt;$fh&gt;)</code> and all manner of related things. The regex part is in <a href=\"http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators\" rel=\"nofollow noreferrer\">Regexp Quote-Like Operators in perlop</a> and in <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>. Also have a look at <a href=\"http://perldoc.perl.org/functions/split.html\" rel=\"nofollow noreferrer\">split</a>. </p>\n\n<hr>\n\n<p>Defaults are used regularly and to read code written by others you must understand them.  When you <em>write</em> your own code though you can choose whether to use <code>$_</code> or not, as one can always introduce a lexical variable instead of it.  </p>\n\n<p>So, when to use <code>$_</code> as default (which need not be written) and when not to?</p>\n\n<p>Correct use of defaults, <code>$_</code> in particular, can lead to clearer and more readable code. What generally means <em>better</em> code. But it is quite possible to push this too far and end up with obscure, tricky, and brittle code. So good taste is required.</p>\n\n<p>Another case is when some parts of the code benefit from having <code>$_</code> for their defaults while at other places you then have to use <code>$_</code> explicitly. I'd say that if <code>$_</code> is seen more than once or twice in a section of code it means that there should be a properly named variable instead.</p>\n\n<p>Overall, if in doubt simply name everything. </p>\n"}], "owner": {"reputation": 449, "user_id": 7368555, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BzlYb.jpg?s=128&g=1", "display_name": "sureshkumar", "link": "https://stackoverflow.com/users/7368555/sureshkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 41784276, "answer_count": 3, "score": 4, "last_activity_date": 1559288593, "creation_date": 1484994392, "last_edit_date": 1510727926, "question_id": 41778211, "link": "https://stackoverflow.com/questions/41778211/how-are-the-values-printed-in-the-foreach-statement", "title": "How are the values printed in the foreach statement?", "body": "<p>I am very very new to perl programming.</p>\n\n<p>While reading about the loops, for the foreach loop I got two examples. </p>\n\n<p>The one example is,</p>\n\n<pre><code>foreach ('hickory','dickory','doc') {\n   print $_;\n   print \"\\n\";\n}\n</code></pre>\n\n<p>Output:-</p>\n\n<pre><code>hickory\ndickory\ndoc\n</code></pre>\n\n<p>The $_ variable contains the each item. So, it prints.</p>\n\n<p>In another example, they said did not specified the $_ variable in print statement. The empty print statement only there. How it prints the foreach arguments.</p>\n\n<pre><code>foreach ('hickory','dickory','doc') {\n   print;\n   print \"\\n\";\n}\n</code></pre>\n\n<p>Output:-</p>\n\n<pre><code>hickory\ndickory\ndoc\n</code></pre>\n\n<p>For this also the same output. How it prints the values. In that book they did not given any explanation for that. I was searched in internet. But I am not able to find anything.</p>\n"}, {"tags": ["perl", "net-snmp", "mib", "oid"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1484999937, "post_id": 41777965, "comment_id": 70748601, "body": "How are you doing this? Please <a href=\"https://stackoverflow.com/posts/41777965/edit\">edit</a> your question and include your code."}], "answers": [{"tags": [], "owner": {"reputation": 1351, "user_id": 7326901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CgLWO.png?s=128&g=1", "display_name": "Gambit Support", "link": "https://stackoverflow.com/users/7326901/gambit-support"}, "is_accepted": false, "score": 0, "last_activity_date": 1485191331, "creation_date": 1485191331, "answer_id": 41811813, "question_id": 41777965, "link": "https://stackoverflow.com/questions/41777965/how-to-replace-oid-with-string-in-net-snmp-agent-perl/41811813#41811813", "title": "How to replace oid with string in net-snmp agent perl", "body": "<p>It looks like you are trying to add entries to a table with OCTET STRING\nindex. You can google for how those are indexed, and the MIB will likely\nsay that they are variable-sized, so your index will be of the form:</p>\n\n<p>n.subid1.subid2....subidn</p>\n\n<p>where n is the length of the OCTET STRING, and subidj is the ASCII value\nof the j-th character in the OCTET STRING.</p>\n"}], "owner": {"reputation": 1, "user_id": 7449778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/772aefda4731623730c1fec7b3ebd0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/7449778/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 369, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1485191331, "creation_date": 1484992739, "last_edit_date": 1484994438, "question_id": 41777965, "link": "https://stackoverflow.com/questions/41777965/how-to-replace-oid-with-string-in-net-snmp-agent-perl", "title": "How to replace oid with string in net-snmp agent perl", "body": "<p>I am struggling with the problem of building a snmp agent to receive a snmpwalk  like this:</p>\n\n<blockquote>\n  <p>NET-SNMP-TMC-MIB::nsTMCState.\"tmcd\" = INTEGER: 3 <br>\n  NET-SNMP-TMC-MIB::nsTMCState.\"drecd\" = INTEGER: 3 <br>\n  NET-SNMP-TMC-MIB::nsTMCInfo.\"tmcd\" = \"\" <br>\n  NET-SNMP-TMC-MIB::nsTMCInfo.\"drecd\" = STRING: \"Apps: FDPser[1]\" <br>\n  NET-SNMP-TMC-MIB::nsTMCErrors.\"tmcd\" = \"\"<br>\n  NET-SNMP-TMC-MIB::nsTMCErrors.\"drecd\" = \"\"<br></p>\n</blockquote>\n\n<p>For now, I am able to get response:</p>\n\n<blockquote>\n  <p>NET-SNMP-TMC-MIB::nsTMCState.1 = INTEGER: 3<br>\n  NET-SNMP-TMC-MIB::nsTMCState.2 = INTEGER: 3<br>\n  NET-SNMP-TMC-MIB::nsTMCInfo.1 = \"\"<br> NET-SNMP-TMC-MIB::nsTMCInfo.2 =\n  STRING: \"Apps: FDPser[1]\"<br> NET-SNMP-TMC-MIB::nsTMCErrors.1 = \"\"<br>\n  NET-SNMP-TMC-MIB::nsTMCErrors.2 = \"\"<br></p>\n</blockquote>\n\n<p>It is there a way to do this with perl ?<br>\nAll responses are appreciated </p>\n"}, {"tags": ["perl", "port", "skype", "dbi", "freetds"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484989534, "post_id": 41777491, "comment_id": 70745789, "body": "Is this about the Microsoft chat software Skype?"}, {"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484989681, "post_id": 41777491, "comment_id": 70745820, "body": "@simbabque i dont know exactly.i use this database to find all skype calls happen for a specific comoany!"}, {"owner": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1485016857, "post_id": 41777491, "comment_id": 70753726, "body": "I take it you mean Sybase, not MySQL, as that&#39;s what the driver name says? So it seems your ops decided to run the database server on a nonstandard port and you just have to connect to it. As they probably won&#39;t be changing port assignments every day it sounds reasonable to find the port once and change the config file accordingly. Actually this should be documented somewhere so you don&#39;t have to monkey around with netstat ..."}, {"owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "edited": false, "score": 0, "creation_date": 1485059065, "post_id": 41777491, "comment_id": 70764276, "body": "FreeTDS can be used to connect to SQL Server or Sybase. First, find out which one, because that will affect what TDS version you should use. As for finding the port, getting it documented and standardized is the way to go. Using netstat or something like that will likely end in pitchforks, torches, and tears!"}, {"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "reply_to_user": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "edited": false, "score": 0, "creation_date": 1485065910, "post_id": 41777491, "comment_id": 70765475, "body": "@FlipperPA   yes its Sybase.port is documented but in real world it first connect to that port then been negotiate to right port and here is where freetds cant work so i have to find the negotiated port manually.i asked for better way!"}, {"owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "reply_to_user": {"reputation": 927, "user_id": 5403907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3lnS.jpg?s=128&g=1", "display_name": "mbethke", "link": "https://stackoverflow.com/users/5403907/mbethke"}, "edited": false, "score": 0, "creation_date": 1485065955, "post_id": 41777491, "comment_id": 70765481, "body": "@mbethke plx read the above reply."}], "answers": [{"tags": [], "owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "is_accepted": false, "score": 0, "last_activity_date": 1485086404, "creation_date": 1485086404, "answer_id": 41790620, "question_id": 41777491, "link": "https://stackoverflow.com/questions/41777491/finding-right-port-to-connect-to-skype-database/41790620#41790620", "title": "finding right port to connect to skype database", "body": "<p>If I understand correctly, you need to connect to a database to find the port of the secondary database. You can provide the <code>PORT</code> as part of the connection string, even as a variable. Here's an example connection string which should help:</p>\n\n<pre><code>my $port = \"1433\";\nmy $dbh = DBI-&gt;connect('DBI:ODBC:DRIVER={FreeTDS};SERVER=yourfullserver.com;PORT=' . $port . ';DATABASE=yourdbname;TDS_Version=7.2', 'user', 'password', {PrintError =&gt; 1});\n</code></pre>\n\n<p>That'll let you connect to a dynamic port. So, connect to your first server, get the port number you need from the DB and save it to a variable, then connect to the second database. Good luck!</p>\n"}], "owner": {"reputation": 319, "user_id": 5524404, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sRuy8.jpg?s=128&g=1", "display_name": "farzane", "link": "https://stackoverflow.com/users/5524404/farzane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485086404, "creation_date": 1484989408, "last_edit_date": 1485085197, "question_id": 41777491, "link": "https://stackoverflow.com/questions/41777491/finding-right-port-to-connect-to-skype-database", "title": "finding right port to connect to skype database", "body": "<p>I am trying to connect to a Sybase database with metadata about Skype called <code>skype2</code>. The code in in Perl, and I'm use the DBI module to connect.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>  my $dbh = DBI-&gt;connect(\"dbi:Sybase:server=skype2;database=*****\", 'user', 'pass', {PrintError =&gt; 1});   \n</code></pre>\n\n<p>I've set up a <code>[skype2]</code> DSN in <code>freetds.conf</code>, located in <code>/etc</code>:</p>\n\n<pre><code>[skype2]\n    host = **.**.**.**\n    port = 49396\n    tds version = 7.0\n</code></pre>\n\n<p>The problem is that I need to find the port dynamically through a database query (here, it is 49396). Should I use netstat to connect and search for the proper port, or is there a better way?</p>\n\n<p>Thank you for your response.</p>\n"}, {"tags": ["perl", "undefined"], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 1, "creation_date": 1484949276, "post_id": 41772902, "comment_id": 70737362, "body": "It&#39;s not the empty string, it&#39;s a dualvar. It acts like the empty string when used as a string, and zero when used as a number. See <a href=\"http://perldoc.perl.org/perlsyn.html#Truth-and-Falsehood\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlsyn.html#Truth-and-Falsehood</a> and <a href=\"http://perldoc.perl.org/perlop.html#Relational-Operators\" rel=\"nofollow noreferrer\">perldoc.perl.org/perlop.html#Relational-Operators</a>"}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1484949304, "post_id": 41772902, "comment_id": 70737374, "body": "So the less than or greater than operator resolves to 1 on successful and &quot;falsey&#39; on fail, which is an empty string, and not undef."}, {"owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "edited": false, "score": 0, "creation_date": 1484949550, "post_id": 41772902, "comment_id": 70737474, "body": "I just see that the result off 5 &gt; 6 is nothing, or undef. So if I assign the result of 5 &gt; 6 to the variable, you would think that the result of 5 &gt; 6, which does not seem defined, would get assigned to the variable . However by assigning that to the variable - you define it."}, {"owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "edited": false, "score": 1, "creation_date": 1484950146, "post_id": 41772902, "comment_id": 70737742, "body": "Casper, the expression <code>5 &gt; 6</code> is  not nothing (or <code>undef</code>) but instead a <b>defined</b> falsey value. Try this ternary to see: <code>print defined(5 &gt; 6) ? &#39;def&#39; : &#39;undef&#39;</code>"}], "tags": [], "owner": {"reputation": 2177, "user_id": 3124587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adc0af022f8a3b35bcde0a4405e4c673?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/3124587/joshua"}, "is_accepted": false, "score": 4, "last_activity_date": 1484961280, "last_edit_date": 1484961280, "creation_date": 1484949028, "answer_id": 41772902, "question_id": 41772847, "link": "https://stackoverflow.com/questions/41772847/undef-value-assigned-to-variable/41772902#41772902", "title": "Undef value assigned to variable.", "body": "<p><code>5 &gt; 6</code> is not undefined, but it is a false value. In this case, a <code>dualvar</code> that acts like an empty string when used as a string, or <code>0</code> when used as a number.</p>\n\n<p>Because the value is false, you can just do</p>\n\n<pre><code>if ( $wiz ) { ... }\n</code></pre>\n\n<p>If you really want <code>$wiz</code> to be undefined, you could do something like this.</p>\n\n<pre><code>my $wiz = 5 &gt; 6 || undef;\n</code></pre>\n\n<p>Now, if the expression <code>5 &gt; 6</code> is true, <code>$wiz</code> will be <code>1</code>, otherwise it will be <code>undef</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 4, "last_activity_date": 1484962910, "last_edit_date": 1484962910, "creation_date": 1484961989, "answer_id": 41774832, "question_id": 41772847, "link": "https://stackoverflow.com/questions/41772847/undef-value-assigned-to-variable/41774832#41774832", "title": "Undef value assigned to variable.", "body": "<blockquote>\n  <p>How do I pass the value of a statement using a comparison operator that resolves to undef on failure? </p>\n</blockquote>\n\n<p>Generally speaking, Perl doesn't promise to return any specific true or false value from its operators, and <code>&lt;</code> is no exception. If you want specific values, you will need something like</p>\n\n<pre><code>$boolean ? $value_for_true : $value_for_false\n</code></pre>\n\n<p>so</p>\n\n<pre><code>my $wiz = 5 &gt; 6 ? 1 : undef;\n</code></pre>\n\n<p>If you only care about the value you get for false, you could also use the following:</p>\n\n<pre><code>my $wiz = 5 &gt; 6 || undef;\n</code></pre>\n\n<p>The two options turn out to be equivalent, but this isn't guaranteed.</p>\n\n<hr>\n\n<blockquote>\n  <p>The return value of 5 > 6 is undef. However when I assign the value of 5 > 6 to a variable </p>\n</blockquote>\n\n<p>That's not true. The variable is assigned a defined value because <code>5 &gt; 6</code> evaluated to a defined value. While Perl doesn't specify what false value it returns from it's operators, it usually returns the scalar <code>sv_no</code>, which is a dualvar that appears to be an empty string when treated as a string, and zero when treated as a number.</p>\n\n<pre><code>$ perl -wE'say \"&gt; \", \"\".( undef )'\nUse of uninitialized value in concatenation (.) or string at -e line 1.\n&gt;\n\n$ perl -wE'say \"&gt; \", \"\".( \"\" )'\n&gt;\n\n$ perl -wE'say \"&gt; \", \"\".( 0 )'\n&gt; 0\n\n$ perl -wE'say \"&gt; \", \"\".( 5&gt;6 )'\n&gt;                                     # Behaves as \"\"\n</code></pre>\n\n<p>&#x20;</p>\n\n<pre><code>$ perl -wE'say \"&gt; \", 0+( undef )'\nUse of uninitialized value in addition (+) at -e line 1.\n&gt; 0\n\n$ perl -wE'say \"&gt; \", 0+( \"\" )'\nArgument \"\" isn't numeric in addition (+) at -e line 1.\n&gt; 0\n\n$ perl -wE'say \"&gt; \", 0+( 0 )'\n&gt; 0\n\n$ perl -wE'say \"&gt; \", 0+( 5&gt;6 )'\n&gt; 0                                   # Behaves as 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 2057152, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/2b20250a7ef717cedcb3a3e70a3d6939?s=128&d=identicon&r=PG", "display_name": "anil funde", "link": "https://stackoverflow.com/users/2057152/anil-funde"}, "is_accepted": false, "score": -1, "last_activity_date": 1485081187, "creation_date": 1485081187, "answer_id": 41789861, "question_id": 41772847, "link": "https://stackoverflow.com/questions/41772847/undef-value-assigned-to-variable/41789861#41789861", "title": "Undef value assigned to variable.", "body": "<p>Boolean false and undef are two different things ... </p>\n\n<p>comparison assignments are executed in Boolean context only returning boolean values only and undef is not boolean thing\nchk this </p>\n\n<pre><code>if(defined false){\n    print \"false is also defined thing..\"\n}else{\n    print \"else ..\"\n}\n</code></pre>\n\n<p>So back to question , seems like comparisons can't return undef  </p>\n"}], "owner": {"reputation": 2167, "user_id": 824282, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/8f0cb967adb644f6408e5ff3df8c8a0f?s=128&d=identicon&r=PG", "display_name": "capser", "link": "https://stackoverflow.com/users/824282/capser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 1, "accepted_answer_id": 41774832, "answer_count": 3, "score": 3, "last_activity_date": 1485081187, "creation_date": 1484948766, "question_id": 41772847, "link": "https://stackoverflow.com/questions/41772847/undef-value-assigned-to-variable", "title": "Undef value assigned to variable.", "body": "<p>The return value of  5 > 6 is undef. However when I assign the value of 5 > 6 to a variable that variable is defined. How do I pass the value of a statement using a comparison operator that resolves to undef on failure? </p>\n\n<pre><code>#!/usr/bin/perl\nuse strict ;\nuse warnings;\nprint'Five is more than six ? ',      5 &gt;  6, \"\\n\";\nprint 'Five is less than six ? ' , 5 &lt; 6 , \"\\n\";\nmy $wiz = 5 &gt; 6 ;\n\nif (defined($wiz)) {\n    print '$wiz is defined' ;\n    } else {\n    print '$wiz is undefined' ;\n}\n\n\n$ ./lessthan\nFive is more than six ?\nFive is less than six ? 1\n$wiz is defined\n</code></pre>\n"}, {"tags": ["regex", "perl", "variables"], "comments": [{"owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 3, "creation_date": 1484941217, "post_id": 41771122, "comment_id": 70733745, "body": "<code>$value</code> is uninitialized and you never use <code>$variable</code>. I think you have typo."}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1484941222, "post_id": 41771122, "comment_id": 70733746, "body": "Please read docs, starting with say <a href=\"http://perldoc.perl.org/perlretut.html\" rel=\"nofollow noreferrer\">perlretut</a>.  The <code>$var =~ &#47;$patt&#47;</code> attemtps to match <code>$patt</code> in <code>$var</code>.  If you use capturing parens <code>$var =~ &#47;($patt)&#47;</code> then the match, if found, is in <code>$1</code>.  Or assign as: <code>my ($match) = $var =~ &#47;other($patt)stuff&#47;;</code>, if it&#39;s one match.You still need <code>()</code> to supply <i>list context</i> to the match operator, so that it does return the actual match and not just the number. Also,  without parens in regex, <code>($patt)</code>, the whole thing is returned (if matched). Please read docs."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7385080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RSBdFYzBgi4/AAAAAAAAAAI/AAAAAAAAAAs/HSVCicH0aa0/photo.jpg?sz=128", "display_name": "Christopher Collins", "link": "https://stackoverflow.com/users/7385080/christopher-collins"}, "is_accepted": true, "score": -2, "last_activity_date": 1484941474, "creation_date": 1484941474, "answer_id": 41771222, "question_id": 41771122, "link": "https://stackoverflow.com/questions/41771122/assigning-a-regex-pattern-match-to-a-variable-in-perl/41771222#41771222", "title": "Assigning a regex pattern match to a variable in perl", "body": "<p>I usually do it like this</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\n# the variable\nmy $variable = 'iaw75w8yu';\n\n# the value\nmy $value;\n\n# regex for the variable\nif ( $variable =~ /(w[0-9][0-9]\\w[0-9])/ ) {\n    $value = $1;\n}\nelse {\n    $value = \"regex not found\";\n}\nprint $value;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": -1, "last_activity_date": 1484959935, "last_edit_date": 1484959935, "creation_date": 1484942594, "answer_id": 41771474, "question_id": 41771122, "link": "https://stackoverflow.com/questions/41771122/assigning-a-regex-pattern-match-to-a-variable-in-perl/41771474#41771474", "title": "Assigning a regex pattern match to a variable in perl", "body": "<blockquote>\n  <p>This should be printing <code>w78w8</code></p>\n</blockquote>\n\n<p>No, it shouldn't! Even if your code was correct, it would <em>never</em> print <code>w78w8</code> because the source string you're trying to match against doesn't contain <code>w78w8</code>. In the examples below, I'm going to assume you meant to say <code>w75w8</code>.</p>\n\n<p>The problem is that you're trying to match an undefined value, the result of which is undefined. Your code is printing warnings, which is exactly what it should be printing since you specified <code>-w</code>.</p>\n\n<p>If you want to capture something, you need a <a href=\"http://perldoc.perl.org/perlre.html#Capture-groups\" rel=\"nofollow noreferrer\">capture group</a>:</p>\n\n<pre><code>use strict;\nuse warnings;\n\nuse Data::Dumper;\n\n'iaw75w8yu' =~ /(w\\d\\dw\\d)/;\nprint Dumper($1);\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>$VAR1 = 'w75w8';\n</code></pre>\n\n<p>If you want to store the matches in a variable of your choosing, you need to evaluate the expression in list context:</p>\n\n<pre><code>my @matches = ('iaw75w8yu' =~ /(w\\d\\dw\\d)/);\nprint Dumper(\\@matches);\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>$VAR1 = [\n          'w75w8'\n        ];\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 7400458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e295f678c85d4289bd3f2b886db25d9e?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastien Dufresne", "link": "https://stackoverflow.com/users/7400458/sebastien-dufresne"}, "is_accepted": false, "score": 2, "last_activity_date": 1484943954, "creation_date": 1484943954, "answer_id": 41771810, "question_id": 41771122, "link": "https://stackoverflow.com/questions/41771122/assigning-a-regex-pattern-match-to-a-variable-in-perl/41771810#41771810", "title": "Assigning a regex pattern match to a variable in perl", "body": "<p>This works too:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nmy $variable = 'iaw75w8yu';\n\nmy $value = $1 if ($variable =~ /(w[0-9][0-9]\\w[0-9])/);\n\nprint $value if defined ($value);\n</code></pre>\n\n<p>It seems closer to what you initialy intended to try. But the shortfall of this method is that it could happen that your value doesn't get defined. It's something important to keep in mind when you start having optional captures in a m// statement.</p>\n"}], "owner": {"reputation": 414, "user_id": 6331353, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd7f6cc42c46c3a65c58ff594d962597?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/6331353/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3412, "favorite_count": 0, "accepted_answer_id": 41771222, "answer_count": 3, "score": -2, "last_activity_date": 1567893476, "creation_date": 1484940989, "last_edit_date": 1567893476, "question_id": 41771122, "link": "https://stackoverflow.com/questions/41771122/assigning-a-regex-pattern-match-to-a-variable-in-perl", "title": "Assigning a regex pattern match to a variable in perl", "body": "<p>I want to match a regex pattern and assign the matched pattern to a variable.</p>\n\n<p>I then want to print the value assigned to the variable.</p>\n\n<hr>\n\n<p>My attempt</p>\n\n<pre><code>#!/usr/bin/perl -w\nuse strict;\n\nmy $variable = 'iaw75w8yu';\nmy $value =~ /w[0-9][0-9]w[0-9]/;\nprint $value;\n</code></pre>\n\n<hr>\n\n<p>Desired output</p>\n\n<pre><code>w75w8\n</code></pre>\n\n<hr>\n\n<p>Actual output </p>\n\n<pre><code>Use of uninitialized value $value in pattern match (m//) at ./temp.pl line 5.\nUse of uninitialized value $value in print at ./temp.pl line 6.\n</code></pre>\n"}, {"tags": ["perl", "date", "posix", "strftime"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 2, "creation_date": 1484933508, "post_id": 41769158, "comment_id": 70729977, "body": "That format is not very <i>conistent</i>.  It&#39;s the same as the one you had before. Just with <code>&#47;</code> instead of <code>.</code>."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484934267, "post_id": 41769158, "comment_id": 70730354, "body": "@simbabque has made a good point. All you&#39;re doing is <code>s&lt;\\.&gt;&lt;&#47;&gt;g</code>!"}, {"owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1484934624, "post_id": 41769158, "comment_id": 70730541, "body": "This is just a test case. In the real case I wouldn&#39;t know beforehand what the format would be? I am passing 3 arguments (month day year). What am I missing here?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 2, "creation_date": 1484934667, "post_id": 41769158, "comment_id": 70730566, "body": "Do you at least know the ordering of day/month/year? (and whether year is 2 digit or 4?) Because if you don&#39;t, you&#39;re stuck - 10/11/12 is inherently ambiguous, and there&#39;s no way to resolve that."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484942637, "post_id": 41769158, "comment_id": 70734392, "body": "Re &quot;<i>What am I missing here?</i>&quot;, As toolic pointer out, wrong number of arguments. They&#39;re also in the wrong order. Your usage: <code>strftime(fmt, mon, mday, year)</code> Actual usage: <code>strftime(fmt, sec, min, hour, mday, mon, year)</code>. Spend two seconds actually reading the error messages you get!!!"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1484934854, "post_id": 41769602, "comment_id": 70730660, "body": "Decode_Date_US takes care of parsing any date format. It is part of Date::Calc"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "reply_to_user": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1484935271, "post_id": 41769602, "comment_id": 70730835, "body": "In which case - parse it, feed it into a Time::Piece object, and use the inbuilt <code>strftime</code> rather than the posix one. (edited answer)"}, {"owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1484935670, "post_id": 41769602, "comment_id": 70731029, "body": "Running the above script crashes Perl command line interpreter."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1484937005, "post_id": 41769602, "comment_id": 70731744, "body": "@Bappa Nope. Must be something else you&#39;re doing."}, {"owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1484945422, "post_id": 41769602, "comment_id": 70735705, "body": "Very strange. The above script keeps crashing for dates earlier than 1/1/1970."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484952938, "post_id": 41769602, "comment_id": 70738822, "body": "Unix dates start in the first of January 1970."}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1484960809, "post_id": 41769602, "comment_id": 70740762, "body": "@Bappa Define &quot;crashing&quot;. This produces <code>1969-07-20</code> on my system: <code>perl -MTime::Piece -e &#39;print Time::Piece-&gt;strptime(&quot;1969&#47;07&#47;20&quot;, &quot;%Y&#47;%m&#47;%d&quot;)-&gt;strftime(&quot;%Y-%m-%d&quot;)&#39;</code>"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485085609, "post_id": 41769602, "comment_id": 70769674, "body": "I could reproduce on strawberry Perl / windows. Think there must be some bad handling of pre epoch."}, {"owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "edited": false, "score": 0, "creation_date": 1485203162, "post_id": 41769602, "comment_id": 70818130, "body": "I think it has to do with dates pre -1970. Doesn&#39;t &quot;crash&quot; for dates later than 1970."}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1484935180, "last_edit_date": 1484935180, "creation_date": 1484934620, "answer_id": 41769602, "question_id": 41769158, "link": "https://stackoverflow.com/questions/41769158/perl-format-dates/41769602#41769602", "title": "Perl Format dates", "body": "<p>Just use <code>Time::Piece</code> and <code>strptime</code></p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Time::Piece;\n\nmy $date = '01.01.1963';\nmy $timestamp = Time::Piece-&gt;strptime( $date, \"%m.%d.%Y\" );\nprint $timestamp -&gt; strftime( \"%m/%d/%Y\")\n</code></pre>\n\n<p>But if the format is inconsistent, then you're onto a loser - for starters, there's plenty of places that transpose day/month ordering, or represent year as two digits (that sometimes will clash with month or day).</p>\n\n<p>It's inherently ambiguous. You can - at best - apply some very crude guessing by grabbing groups of digits and <em>assuming</em> that they're in a consistent order.</p>\n\n<p>E.g.</p>\n\n<pre><code>my ( $day, $month, $year ) = m/(\\d{2}).*(\\d{2}).*(\\d{4})/; \n\n$timestamp = Time::Piece -&gt; strptime ( \"$year-$month-$day\", \"%Y-%m-%d\" ); \n</code></pre>\n\n<p>But you'll be tripped up by dates like <code>10/11/12</code> because you simply can't know which number is which field. You can try guessing, by <code>eval</code>ing the <code>strptime</code> and just retrying different formats until you get one that <em>does</em> decode to something valid. </p>\n\n<p>As you indicate - Decode_Date_US basically does this so:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse Date::Calc qw(:all);\nuse Time::Piece;\nmy $a1 = '01.01.1963';\nmy ($year, $month, $day) = Decode_Date_US($a1);\nmy $time = Time::Piece -&gt; strptime(\"$year/$month/$day\", \"%Y/%m/%d\");\nprint $time-&gt;strftime(\"%Y-%m-%d\"),\"\\n\";\n</code></pre>\n\n<p>Also - <code>use strict; use warnings;</code> is good.</p>\n\n<p>And - there's <em>one</em> <a href=\"https://xkcd.com/1179/\" rel=\"nofollow noreferrer\">correct way to write dates</a>. If you're going to reformat at all, then the one that isn't ambiguous is the best choice. </p>\n"}, {"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1485085550, "post_id": 41775595, "comment_id": 70769665, "body": "Pretty sure that&#39;s a Windows thing, rather than a Perl thing."}], "tags": [], "owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "is_accepted": false, "score": 0, "last_activity_date": 1484971269, "creation_date": 1484971269, "answer_id": 41775595, "question_id": 41769158, "link": "https://stackoverflow.com/questions/41769158/perl-format-dates/41775595#41775595", "title": "Perl Format dates", "body": "<p>I ended up using DateTime module's strftime function which can handle dates earlier than 1970. \n\"Crashing\" -Perl command line interpreter has stopped working. If it helps, I am using a windows machine and a very infrequent perl user.</p>\n\n<p>this worked for me</p>\n\n<pre><code>use Date::Calc qw(:all);\nuse DateTime;\n$dateformat = \"%m/%d/%Y\";\n($year, $month, $day) = Decode_Date_US($date);\n$date = DateTime-&gt;new(\n                  year=&gt;$year,\n                  month=&gt;$month,\n                  day=&gt;$day,            \n        );\n$date = $date-&gt;strftime($dateformat);\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7059461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d94f1661958df907678dbcc21d29902f?s=128&d=identicon&r=PG&f=1", "display_name": "Bappa", "link": "https://stackoverflow.com/users/7059461/bappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484971269, "creation_date": 1484932956, "question_id": 41769158, "link": "https://stackoverflow.com/questions/41769158/perl-format-dates", "title": "Perl Format dates", "body": "<pre><code>use Date::Calc qw(:all);\nuse Time::Piece;\nuse POSIX qw(strftime);\n$a1 = '01.01.1963';\n($year, $month, $day) = Decode_Date_US($a1);\nprint \"$year $month $day\\n\";\n$formatted = strftime('%m/%d/%Y',$month,$day,$year);\nprint \"$formatted\\n\";\n</code></pre>\n\n<p>I am trying to format dates in a consistent format using POSIX(strftime). I am uncertain what the input format might be. I am using Decode_Date_US to extract the relevant year, month, day information. I am then trying to format the dates in consistent manner using strftime. I am getting following error \n<strong>Usage: POSIX::strftime(fmt, sec, min, hour, mday, mon, year, wday = -1, yday = -1, isdst = -1) at test_dates.pl line 60</strong></p>\n\n<p>Any help would appreciated. \n\"use Time::Piece\" would be eventually used to sort the dates.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["apache", "perl", "mod-perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484937971, "post_id": 41768004, "comment_id": 70732216, "body": "It means the binary component of the module (the .so) can&#39;t be found. How did you install MyHandler::ModPerl20?"}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485162961, "post_id": 41768004, "comment_id": 70792984, "body": "MyHandler::ModPerl20 is a pure Perl Handler written by me. It does not have any .so File. It does work @ the same installation without any problem for a few days."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485163074, "post_id": 41768004, "comment_id": 70793059, "body": "What is the loadable Object &#39;main&#39; for a PerResponseHandler in mod_perl?"}, {"owner": {"reputation": 15304, "user_id": 4632019, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8937eb40752cf51c7da61bd4a322a4ef?s=128&d=identicon&r=PG&f=1", "display_name": "Eugen Konkov", "link": "https://stackoverflow.com/users/4632019/eugen-konkov"}, "edited": false, "score": 0, "creation_date": 1485440223, "post_id": 41768004, "comment_id": 70932545, "body": "After restarting apache. Does this error appear again?"}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1485446295, "post_id": 41768004, "comment_id": 70937206, "body": "After restarting apache, everything is fine (This is  currently the workaround we use, to restart the apache once every 24h per cron-job). But i was afraid I have made a &quot;mistake&quot; buried deep inside and want to know, where i have to look for errors made by me."}], "answers": [{"comments": [{"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1485770664, "post_id": 41914540, "comment_id": 71046591, "body": "@INC is set up correctly (I updated the question with the code used). Anyway how could it be functioning correctly for a few hundreds requests, and then crash with the message given? And why is the Apache/mod_perl looking for module main in my Handler?"}, {"owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "reply_to_user": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1485813409, "post_id": 41914540, "comment_id": 71072529, "body": "Because from vague memory I had a similar problem that was solved by changing how to set up @INC. The result can change depending on how Apache/its child are being started. You loose nothing by trying the <code>PerlSwitches</code> statement suggested and even putting your MyHandler::ModPerl20 perl module in one of the path hardcoded in perl default @INC on your site to see if it makes your problem disappear."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1485947825, "post_id": 41914540, "comment_id": 71134387, "body": "I cannot imagine that this is the problem, sorry :( IF the @INC gets wrong, I would get an error-message like: <code>failed to resolve handler &#39;MyHandler::ModPerl20&#39;: Can&#39;t locate MyHandler&#47;ModPerl20.pm in @INC</code> and not <code>Can&#39;t locate loadable object</code>"}], "tags": [], "owner": {"reputation": 7502, "user_id": 6368697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yq4cG.jpg?s=128&g=1", "display_name": "Patrick Mevzek", "link": "https://stackoverflow.com/users/6368697/patrick-mevzek"}, "is_accepted": false, "score": 2, "last_activity_date": 1485635557, "creation_date": 1485635557, "answer_id": 41914540, "question_id": 41768004, "link": "https://stackoverflow.com/questions/41768004/cant-locate-loadable-object-for-module-main-in-inc/41914540#41914540", "title": "Can&#39;t locate loadable object for module main in @INC", "body": "<p>Make sure <code>@INC</code> is set up correctly, in order to find the path in which <code>MyHandler::ModPerl20</code> is installed (I think what happens is that when Apache recycles some child, the one starting fresh do not have the correct <code>@INC</code> value, hence not finding your module anymore).</p>\n\n<p>Try to add a\n<code>PerlSwitches -I/your/path/for/myhandler/</code> in httpd.conf to see if it fixes your problem.</p>\n\n<p>If that changes things, have a look at <a href=\"http://perl.apache.org/docs/2.0/user/config/config.html#Adjusting_C__INC_\" rel=\"nofollow noreferrer\">Adjusting @INC</a> in modperl documentation to see all details.</p>\n"}, {"comments": [{"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1485947615, "post_id": 41954574, "comment_id": 71134259, "body": "How can one check IO-Modules? What exactly does this mean?"}], "tags": [], "owner": {"reputation": 7, "user_id": 7393704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b9f0515fa6ffb79fcadd6bb32ebde9?s=128&d=identicon&r=PG", "display_name": "thenortonsetup", "link": "https://stackoverflow.com/users/7393704/thenortonsetup"}, "is_accepted": false, "score": 0, "last_activity_date": 1485856882, "creation_date": 1485856882, "answer_id": 41954574, "question_id": 41768004, "link": "https://stackoverflow.com/questions/41768004/cant-locate-loadable-object-for-module-main-in-inc/41954574#41954574", "title": "Can&#39;t locate loadable object for module main in @INC", "body": "<p>I have seen something similar other times, not only with SAS, but with other products as well.</p>\n\n<p>I would ask your system admin to check the IO modules in your Linux server. I think they need re-installation, or maybe just check the authorizations on the relative folders.</p>\n"}, {"tags": [], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "is_accepted": true, "score": 0, "last_activity_date": 1590398477, "last_edit_date": 1590398477, "creation_date": 1493380378, "answer_id": 43679568, "question_id": 41768004, "link": "https://stackoverflow.com/questions/41768004/cant-locate-loadable-object-for-module-main-in-inc/43679568#43679568", "title": "Can&#39;t locate loadable object for module main in @INC", "body": "<p>Changing the MPM Apache configuration from mpm_event to mpm_prefork solved my problem.</p>\n\n<p>It does not explain the error message though :( Any hints on this are appreciated.</p>\n"}], "owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1750, "favorite_count": 0, "accepted_answer_id": 43679568, "answer_count": 3, "score": 8, "last_activity_date": 1590398477, "creation_date": 1484928997, "last_edit_date": 1485770486, "question_id": 41768004, "link": "https://stackoverflow.com/questions/41768004/cant-locate-loadable-object-for-module-main-in-inc", "title": "Can&#39;t locate loadable object for module main in @INC", "body": "<p>In a mod_perl application running on ubuntu 16.04 after a certain while where everything functions fine (a few days) we get a fatal message in the errorlog:</p>\n\n<blockquote>\n  <p>failed to resolve handler <code>MyHandler::ModPerl20</code> Can't locate loadable object for module main in @INC </p>\n</blockquote>\n\n<p>MyHander::ModPerl20 is defined in a location block</p>\n\n<pre><code>&lt;Perl&gt;\n     unshift @INC, '/path/to/my/code';\n&lt;/Perl&gt;\n&lt;Location ~ \"/imp($|/)\"&gt;\n    SetHandler modperl\n    PerlResponseHandler MyHandler::ModPerl20\n&lt;/Location&gt;\n</code></pre>\n\n<p>The ubuntu Perl Version is 5.22. Apache 2.4</p>\n\n<p>Can this be the problem?\n<a href=\"http://blog.feature-addons.de/2016-05-15-otrs-apache-mod-perl-perl-5-22\" rel=\"noreferrer\">http://blog.feature-addons.de/2016-05-15-otrs-apache-mod-perl-perl-5-22</a></p>\n\n<p>Any ideas how to fix this? Do I really have to set up nginx/uwsgi?</p>\n"}, {"tags": ["perl", "keyboard", "stdin"], "comments": [{"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "edited": false, "score": 0, "creation_date": 1484926815, "post_id": 41767277, "comment_id": 70726037, "body": "One solution that I see is creating a sub process and do the main task while parent will keep looking for a input if user enters q then parent will kill the sub proccess"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "reply_to_user": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "edited": false, "score": 0, "creation_date": 1484926931, "post_id": 41767277, "comment_id": 70726129, "body": "@PrashantPokhriyal Your meaning is I use <code>fork()</code> for the reading <code>key</code> ?"}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "edited": false, "score": 0, "creation_date": 1484927008, "post_id": 41767277, "comment_id": 70726188, "body": "Yes Create a fork"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "reply_to_user": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "edited": false, "score": 0, "creation_date": 1484927116, "post_id": 41767277, "comment_id": 70726247, "body": "@PrashantPokhriyal It is worth to examine, thank :)"}, {"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1484928010, "post_id": 41767277, "comment_id": 70726808, "body": "Have you tried to use Term::ReadLine ? <a href=\"http://perldoc.perl.org/Term/ReadLine.html\" rel=\"nofollow noreferrer\">doc</a>"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "reply_to_user": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1484928209, "post_id": 41767277, "comment_id": 70726925, "body": "@carlosn NO. How can it help me?"}, {"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1484928905, "post_id": 41767277, "comment_id": 70727339, "body": "@k-five as you are doing a loop to print some info, you could also check for some user input each time your loop start"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "reply_to_user": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "edited": false, "score": 0, "creation_date": 1484929086, "post_id": 41767277, "comment_id": 70727473, "body": "@carlosn No, my friend I cannot, because <code>STDIN</code> will stop my simple animation to show on the screen"}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484931808, "post_id": 41767277, "comment_id": 70729099, "body": "You can use <a href=\"https://metacpan.org/pod/Term::ReadLine\" rel=\"nofollow noreferrer\">Term::ReadLine</a>  to <i>check</i> whether there is any input, and just continue if not."}, {"owner": {"reputation": 2092, "user_id": 2678168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5a048ca5e77e9683d0197b5455b3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Georg Mavridis", "link": "https://stackoverflow.com/users/2678168/georg-mavridis"}, "edited": false, "score": 0, "creation_date": 1484932879, "post_id": 41767277, "comment_id": 70729655, "body": "you might consider using an event-loop like <a href=\"https://metacpan.org/release/AnyEvent\" rel=\"nofollow noreferrer\">metacpan.org/release/AnyEvent</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484932334, "post_id": 41768845, "comment_id": 70729389, "body": "Of course I am WORRIED, this is not a good solution, thanks though for attempting"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484935214, "post_id": 41768845, "comment_id": 70730807, "body": "here is your comment: <b>Have you tried to use Term::ReadLine</b> you told to use <b>Readline</b>"}], "tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": -1, "last_activity_date": 1484934659, "last_edit_date": 1484934659, "creation_date": 1484931793, "answer_id": 41768845, "question_id": 41767277, "link": "https://stackoverflow.com/questions/41767277/reading-a-key-from-keyboard-while-the-process-is-running/41768845#41768845", "title": "reading a key from keyboard while the process is running", "body": "<p>If you are not worried about a little delay, you can play with <code>select</code> and <code>alarm</code> to try to handle user input.</p>\n\n<p>Using select you can handle the <code>STDIN</code> and using <code>alarm</code> you can wait for a few seconds or less for user input.</p>\n\n<pre><code>#!/usr/bin/env perl \n\nuse common::sense;\n\nuse IO::Select;\n\nmy $sel = IO::Select-&gt;new();\n$sel-&gt;add( \\*STDIN );\n\n$|++;\n\nmy $running = 1;\n\nwhile ($running) {\n\n    eval {\n\n        local $SIG{ALRM} = sub { die 'Time Out'; };\n\n        alarm 0.5;\n\n        if ( $sel-&gt;can_read(0) ) {\n\n            my $input = &lt;STDIN&gt;;\n\n            chomp $input;\n\n            print \"STDIN &gt; $input\\n\";\n\n            $running = 0;\n\n        }\n    };\n\n    if ( !$@ ) {\n\n        select( undef, undef, undef, 0.5 );\n\n        print \".\";\n\n    }\n}\n\nprint \"\\nEnd Of Script\\n\";\n</code></pre>\n\n<p>I told you to try to use Term::ReadKey :-)</p>\n\n<p>Here we go:</p>\n\n<pre><code>!/usr/bin/env perl \n\nuse common::sense;\nuse Term::ReadKey;\n\nmy $running = 1;\nmy $key;\n\nwhile ($running) {\n    ReadMode 4;    # Turn off controls keys\n    while ( not defined( $key = ReadKey(-1) ) ) {\n\n        select( undef, undef, undef, 0.5 );\n\n        print '.';\n\n    }\n    print \"\\nSTDIN&gt; $key\\n\";\n    ReadMode 0;  \n\n}\n\nprint \"\\nEnd Of Script\\n\";\n</code></pre>\n\n<p>Now you just have to handle signals like quit or int to exit the loop, but using this you can capture the input and do whatever you want.</p>\n"}, {"comments": [{"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484935100, "post_id": 41769182, "comment_id": 70730756, "body": "I have doubt that it can manage more than <code>one key</code> or not. And I see it cannot mange more than one key in the second while(1), Am I right or not?"}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484935171, "post_id": 41769182, "comment_id": 70730791, "body": "Yes you are right I gave only one option i.e, &#39;q&#39;. You can provide as many option as you want in the if block"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484936126, "post_id": 41769182, "comment_id": 70731270, "body": "It works but It cannot handle more than one key. I added <code>h</code> key for show the help, and after that <b>no keys works</b>, thanks anyway"}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484936298, "post_id": 41769182, "comment_id": 70731361, "body": "@k-five You mean to say you want additional support for help by pressing h key and q key to quit. Am I right?"}, {"owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484936678, "post_id": 41769182, "comment_id": 70731562, "body": "Yes, I can simply tell the user to press <code>Ctrrl + C</code> if I just would want only one key or exit from the program. I looking for solution with any key."}, {"owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "reply_to_user": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "edited": false, "score": 0, "creation_date": 1484936763, "post_id": 41769182, "comment_id": 70731607, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/133668/discussion-between-prashant-pokhriyal-and-k-five\">continue this discussion in chat</a>."}, {"owner": {"reputation": 7056, "user_id": 19966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f85931a014ee72300ee526dd314914?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/19966/bart"}, "edited": false, "score": 0, "creation_date": 1580382939, "post_id": 41769182, "comment_id": 106083169, "body": "This works fine, with the following changes:  1) in Windows, you have to replace the &#39;kill&#39; command with the <a href=\"https://perldoc.perl.org/functions/kill.html\" rel=\"nofollow noreferrer\">kill keyword</a>. It&#39;s not a bad idea on Linux or OSX, either:  <code>kill -9, $pid;</code>  2) Don&#39;t do <code>ReadKey(-1)</code>, do <code>ReadKey(0)</code> (blocking read) instead, or else that child process will be very actively busy waiting."}], "tags": [], "owner": {"reputation": 3105, "user_id": 4816207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jKNv2qYjH3g/AAAAAAAAAAI/AAAAAAAACnA/ZdLmPpJCAas/photo.jpg?sz=128", "display_name": "Prashant Pokhriyal", "link": "https://stackoverflow.com/users/4816207/prashant-pokhriyal"}, "is_accepted": true, "score": 0, "last_activity_date": 1558677785, "last_edit_date": 1558677785, "creation_date": 1484933019, "answer_id": 41769182, "question_id": 41767277, "link": "https://stackoverflow.com/questions/41767277/reading-a-key-from-keyboard-while-the-process-is-running/41769182#41769182", "title": "reading a key from keyboard while the process is running", "body": "<p>This will work for you</p>\n\n<pre><code>use 5.010;\nuse strict;\nuse Term::ReadKey;\n\nReadMode 4; # It will turn off controls keys (eg. Ctrl+c)\n\nmy $key; \n\n# It will create a child so from here two processes will run.\n# So for parent process fork() will return child process id\n# And for child process fork() will return 0 id\n\nmy $pid = fork(); \n\n# This if block will execute by the child process and not by \n# parent because for child $pid is 0     \n\nif(not $pid){\n\n   while(1){\n\n        # Do your main task here\n        say \"hi I'm sub process and contains the main task\";\n        sleep 2;\n    }\n}\n\n# Parent will skip if block and will follow the following code\nwhile (1) {\n\n   $key = ReadKey(-1); # ReadKey(-1) will perform a non-blocked read\n\n   if($key eq 'q'){    # if key pressed is 'q'\n\n      `kill -9 $pid`;   # then if will run shell command kill and kill\n                        # the child process\n       ReadMode 0;      # Restore original settings for tty.\n\n       exit;            # Finally exit from script\n\n    } elsif( $key eq 'h' ) {\n\n         say \"Hey! you pressed $key key for help\";\n    } elsif( $key ne '' ) {\n\n        say \"Hey! You pressed $key\";\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://metacpan.org/pod/Term::ReadKey\" rel=\"nofollow noreferrer\">Term::ReadKey</a></li>\n<li><a href=\"https://perlmaven.com/fork\" rel=\"nofollow noreferrer\">Fork in Perl</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": false, "score": 2, "last_activity_date": 1484937149, "creation_date": 1484937149, "answer_id": 41770238, "question_id": 41767277, "link": "https://stackoverflow.com/questions/41767277/reading-a-key-from-keyboard-while-the-process-is-running/41770238#41770238", "title": "reading a key from keyboard while the process is running", "body": "<p>Assuming your program has a central loop, or if you can simply fit keyboard checks into the processing, you are better off using <a href=\"https://metacpan.org/pod/Term::ReadKey\" rel=\"nofollow noreferrer\"><code>Term::ReadKey</code></a> than trying to fit in <code>fork</code> and handling the necessary inter-process communication</p>\n\n<p>Calling <code>ReadKey(-1)</code> will do a non-blocking read, which will return a single character if a key has been hit, or <code>undef</code> otherwise. (You may supply a second parameter which is the IO channel to be used, but it will default to STDIN.)</p>\n\n<p>I suggest you run this example. I have used <code>sleep 1</code> as a dummy for your loop processing</p>\n\n<pre><code>use strict;\nuse warnings 'all';\nuse feature 'say';\n\nuse Term::ReadKey;\n\nmy $n;\n\nwhile () {\n\n    my $key = ReadKey(-1);\n\n    say \"key $key entered\" if defined $key;\n\n    sleep 1;\n\n    say ++$n;\n}\n</code></pre>\n"}], "owner": {"reputation": 13460, "user_id": 4643584, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d2144be3b64be35ece8bff8f02c606a6?s=128&d=identicon&r=PG&f=1", "display_name": "Shakiba Moshiri", "link": "https://stackoverflow.com/users/4643584/shakiba-moshiri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 0, "accepted_answer_id": 41769182, "answer_count": 3, "score": 3, "last_activity_date": 1558677785, "creation_date": 1484926583, "last_edit_date": 1484936516, "question_id": 41767277, "link": "https://stackoverflow.com/questions/41767277/reading-a-key-from-keyboard-while-the-process-is-running", "title": "reading a key from keyboard while the process is running", "body": "<p>I wrote a simple script to manage the download time ( start and finish ) with <strong>wget</strong> in Linux-Gnu with <strong>Perl</strong>. There is no problem and everything works good, except I wish <strong>I could read a key from keyboard when the process is running</strong>.<br>\nI show a simple movement animation on the screen that I do not want to stop it and then read the key.  </p>\n\n<p>for example like <strong>mplayer</strong> or <strong>mpv</strong> that when you run it on the comman-line, you can press <code>q</code> to exit or <code>s</code> to take a picture from the screen.</p>\n\n<p>A part of the script:</p>\n\n<pre><code>do {\n    system( \"clear\" );\n    ($h, $m, $s) = k5mt::second_to_clock(  $till_shutdown );\n\n    set_screen();\n    set_screen( 24 );\n\n    set_screen();\n    say \"download was started ...\";\n\n    set_screen();\n    set_screen( 24 );\n\n    set_screen();\n    printf \"till finish:    %02d %02d %02d\\n\", $h, $m, $s;\n\n    set_screen();\n    set_screen( 24 );\n\n    set_screen();\n    say \"wget pid: [$wget_pid]\";\n\n    set_screen();\n    set_screen( 24 );\n\n    set_screen();\n    $waiting_temp .= $animation[ $counter_animation++ ];\n    say $waiting_temp;\n    if( length( $waiting ) == $counter_animation ){\n        $waiting_temp = \"\";\n        $counter_animation = 0;\n    }\n\n    set_screen();\n    set_screen( 24 );\n\n    sleep 1;\n    $till_shutdown--;\n\n} while( $till_shutdown );  \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/XzMsW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XzMsW.png\" alt=\"enter image description here\"></a></p>\n\n<p>the words <strong>waiting till finish.....</strong> is shown consecutively ( without interruption ) and I want to read a key like <code>q</code> to exit from the program.</p>\n\n<p><strong>UPDATE</strong>  </p>\n\n<p>I am looking for a solution with as many option as I want, if I have wanted just for exit from the program I simply tell the user to press <code>Ctrl + C</code>  </p>\n\n<p>Is it possible with scripting in Perl? or not? If it is, How?  </p>\n\n<blockquote>\n  <p>NOTE: if it is possible without any modules please say the solution\n  without any module, and if not, okay no problem</p>\n</blockquote>\n\n<p>However, thank you so much.</p>\n"}, {"tags": ["angularjs", "json", "perl", "mojolicious", "mojolicious-lite"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484910733, "post_id": 41760648, "comment_id": 70715888, "body": "You are not supposed to <code>print</code> in Mojo. You need to return something. Also, how are you running your app? With <code>morbo</code>?"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484922849, "post_id": 41760648, "comment_id": 70723386, "body": "Please <a href=\"https://stackoverflow.com/posts/41760648/edit\">edit</a> the new information you posted as an answer into your question with the <a href=\"https://stackoverflow.com/posts/41760648/edit\">edit</a> link. Then please delete that answer. It will be downvoted and deleted by the community if don&#39;t do it yourself."}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1484924618, "post_id": 41760648, "comment_id": 70724546, "body": "Don&#39;t use print() you use $self-&gt;app-&gt;log-&gt;debug($self-&gt;dumper(...)). Print() is unreliable."}, {"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1485205172, "post_id": 41760648, "comment_id": 70819256, "body": "If you dumper <code>$json-&gt;{test}</code> you don&#39;t know if <code>test</code> existed because of autovivification. You should dumper <code>$json</code> and look if it&#39;s undef or an empty hashref or whatever. If you want to print directly, then write <code>print STDERR $foo;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 1, "creation_date": 1485204176, "post_id": 41762479, "comment_id": 70818712, "body": "I think, he gets 404 because nothing is rendered."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "reply_to_user": {"reputation": 402, "user_id": 3631856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aUUwT.jpg?s=128&g=1", "display_name": "Helmut Wollmersdorfer", "link": "https://stackoverflow.com/users/3631856/helmut-wollmersdorfer"}, "edited": false, "score": 0, "creation_date": 1485206241, "post_id": 41762479, "comment_id": 70819780, "body": "@Helmut possible, but is that really a <i>not found</i>?"}], "tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 1, "last_activity_date": 1484911319, "creation_date": 1484911319, "answer_id": 41762479, "question_id": 41760648, "link": "https://stackoverflow.com/questions/41760648/mojolicious-angular-post-json/41762479#41762479", "title": "Mojolicious Angular POST JSON", "body": "<p>The <a href=\"https://metacpan.org/pod/Mojo::Message#json\" rel=\"nofollow noreferrer\">docs for the <code>json</code> method</a> say that <code>undef</code> is returned if decoding didn't work or if the request was empty. You should first look at the request body. </p>\n\n<pre><code>warn Dumper $self-&gt;req-&gt;body;\n</code></pre>\n\n<p>This will output the raw request body to your application console or log. If you run <code>morbo app.pl</code>, that's your console window. Look at what you see. Is the content there? Is the content-type correct?</p>\n\n<p>Then take it from there.</p>\n\n<hr>\n\n<p>You can't just <code>print</code> in the  middle of your route handler. You need to use the application object to <code>render</code> your content.</p>\n\n<pre><code>post '/post' =&gt; sub {\n    my $self = shift;\n    my $json = $self-&gt;req-&gt;json;\n\n    $self-&gt;render( text =&gt; $json-&gt;{test} );\n};\n</code></pre>\n\n<p>This way, Mojolicious takes care of everything for you. There is also no need to set the content type explicitly. It's going to use something sensible automatically.</p>\n\n<p>However, you're getting a 404 back. That might be because of the <code>print</code>, but I'm not sure.</p>\n"}, {"tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": false, "score": 1, "last_activity_date": 1484934260, "creation_date": 1484934260, "answer_id": 41769509, "question_id": 41760648, "link": "https://stackoverflow.com/questions/41760648/mojolicious-angular-post-json/41769509#41769509", "title": "Mojolicious Angular POST JSON", "body": "<ol>\n<li><p>The    <code>404 Not Found</code> indicates the resource is not found. Please double check if your application is available under <code>http://localhost/perltest/perltest.pl/post</code>.</p></li>\n<li><p>You should not use print(), because it's not reliable (sometimes it works and sometimes not). If you want to log text into your console, please use $self->app->log->debug(). Mojolicious also has $self->dumper, you do not need to include the external module <code>Data::Dumper</code>.</p></li>\n<li><p>Check the data which is actually send. You can use a service like <a href=\"http://requestb.in/\" rel=\"nofollow noreferrer\">http://requestb.in/</a>. If you recieve correct JSON; I would strongly expect the URL is not correct (see point 1.)</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1474, "user_id": 751910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4d4ee1e65bd8c86f66c43eecfe42a3e6?s=128&d=identicon&r=PG", "display_name": "alexk", "link": "https://stackoverflow.com/users/751910/alexk"}, "is_accepted": false, "score": 0, "last_activity_date": 1485062274, "creation_date": 1485062274, "answer_id": 41787613, "question_id": 41760648, "link": "https://stackoverflow.com/questions/41760648/mojolicious-angular-post-json/41787613#41787613", "title": "Mojolicious Angular POST JSON", "body": "<p>I don't think you're supposed to JSON-stringify your object.</p>\n\n<p>Try replacing your first angular line with this:</p>\n\n<pre><code>var datainput = {test: \"orcl\"};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14762, "user_id": 282475, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/OZWIJ.jpg?s=128&g=1", "display_name": "shaneburgess", "link": "https://stackoverflow.com/users/282475/shaneburgess"}, "is_accepted": false, "score": 2, "last_activity_date": 1488150876, "creation_date": 1488150876, "answer_id": 42475441, "question_id": 41760648, "link": "https://stackoverflow.com/questions/41760648/mojolicious-angular-post-json/42475441#42475441", "title": "Mojolicious Angular POST JSON", "body": "<p>Angular passes posts in via the body of the request, so this is how I handle those.</p>\n\n<pre><code>post '/post' =&gt; sub {\n    my $self = shift;\n    my $json = $self-&gt;req-&gt;body;\n    #use Mojo::JSON qw(decode_json encode_json) at top of app\n    my $perl_hash = decode_json($json)\n    #Do something with the hash, like pass to a helper or model\n    $self-&gt;render(json =&gt; $return_from_model_or_helper);\n};\n</code></pre>\n\n<p>Jquery posts will use the params and not the body.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7445564"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 582, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1488150876, "creation_date": 1484906020, "question_id": 41760648, "link": "https://stackoverflow.com/questions/41760648/mojolicious-angular-post-json", "title": "Mojolicious Angular POST JSON", "body": "<p>i am new to Perl and Mojo and i've got one problem by receiving POST-Data from Angular:</p>\n\n<p>My AngularCode is</p>\n\n<pre><code>var datainput = JSON.stringify({\"test\":\"orcl\"});\n$http.post('http://localhost/perltest/perltest.pl/post', datainput)\n        .success(function(data, status, headers, config) {\n        console.log(\"post geschickt\");\n        console.log(headers());\n        console.log(data);\n        console.log(\"data back: \" + JSON.stringify(data));\n        alert(JSON.stringify(data));\n    })\n</code></pre>\n\n<p>My Mojo-Sub looks like:</p>\n\n<pre><code>post '/post' =&gt; sub {\nmy $self = shift;\n\nmy $json = $self-&gt;req-&gt;json;\nprint header(-type =&gt; \"text/html\"); \nprint Dumper($json-&gt;{test});\n};\napp-&gt;start;\n</code></pre>\n\n<p>The Result i get is:\n$VAR1 = undef; Content-Length: 0 Status: 404 Not Found Date: Fri, 20 Jan 2017 09:49:57 GMT</p>\n\n<p>What is wrong?\nIt seems to me that $json = $self->req->json is not getting the JSON-String from POST ?</p>\n"}, {"tags": ["perl", "awk", "sed", "escaping", "comments"], "comments": [{"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "edited": false, "score": 0, "creation_date": 1484968307, "post_id": 41758892, "comment_id": 70741928, "body": "As for your own tries: The 1st try fails, because the value of <code>$line</code> contains characters that need escaping for use with <code>s</code> (the crux of the matter; in this <i>particular</i> case, using <code>|</code> as the delimiter would have worked, but that&#39;s not a general solution). The 2nd try makes matters worse, because the <i>unquoted</i> use of <code>$line</code> now causes the shell to perform word-splitting and globbing on the value."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 0, "creation_date": 1484914865, "post_id": 41759172, "comment_id": 70718496, "body": "This adds a # for every line in file.txt"}, {"owner": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 0, "creation_date": 1484915328, "post_id": 41759172, "comment_id": 70718793, "body": "Thnx, that worked, but how would we adjust this syntax do to it the other way around?"}, {"owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "reply_to_user": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 0, "creation_date": 1484915461, "post_id": 41759172, "comment_id": 70718884, "body": "@Swifting: What do you mean by &quot;other way around&quot;?"}, {"owner": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 0, "creation_date": 1484915563, "post_id": 41759172, "comment_id": 70718925, "body": "Changing #$ENV{line} in $ENV{line} again."}, {"owner": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 0, "creation_date": 1484920671, "post_id": 41759172, "comment_id": 70721967, "body": "The line variable needed an export first in order for your line to work. But I was wondering how to change the syntax to revert the line back to the original, without the # in front of it."}, {"owner": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 0, "creation_date": 1484920804, "post_id": 41759172, "comment_id": 70722058, "body": "Might be something like &#39;s/#ENV{line}/ENV{line}/g&#39;?"}], "tags": [], "owner": {"reputation": 198290, "user_id": 1030675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/957956ce51706d03f19a4dc85a767bb1?s=128&d=identicon&r=PG", "display_name": "choroba", "link": "https://stackoverflow.com/users/1030675/choroba"}, "is_accepted": false, "score": 1, "last_activity_date": 1485006708, "last_edit_date": 1485006708, "creation_date": 1484901054, "answer_id": 41759172, "question_id": 41758892, "link": "https://stackoverflow.com/questions/41758892/escaping-a-variable-with-special-characters-within-sed-comment-and-uncomment-a/41759172#41759172", "title": "Escaping a variable with special characters within sed - comment and uncomment an arbitrary line of source code", "body": "<p>Perl has ways to do the quoting/escaping for you:</p>\n\n<pre><code>line=$line perl -i~ -pe '$regex = quotemeta $ENV{line}; s/^$regex/#$ENV{line}/' -- input.txt\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 1, "creation_date": 1485161045, "post_id": 41774189, "comment_id": 70791935, "body": "Thnx for the extensive answer."}, {"owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "reply_to_user": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "edited": false, "score": 0, "creation_date": 1485176273, "post_id": 41774189, "comment_id": 70801470, "body": "@Swifting My pleasure; glad it helped; I amended the question&#39;s title and tags a little to make the question easier to discover by future readers."}], "tags": [], "owner": {"reputation": 239138, "user_id": 45375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6e2dc52425b1e08027c01bb880be0?s=128&d=identicon&r=PG", "display_name": "mklement0", "link": "https://stackoverflow.com/users/45375/mklement0"}, "is_accepted": true, "score": 1, "last_activity_date": 1484968550, "last_edit_date": 1495540373, "creation_date": 1484956255, "answer_id": 41774189, "question_id": 41758892, "link": "https://stackoverflow.com/questions/41758892/escaping-a-variable-with-special-characters-within-sed-comment-and-uncomment-a/41774189#41774189", "title": "Escaping a variable with special characters within sed - comment and uncomment an arbitrary line of source code", "body": "<p><a href=\"https://stackoverflow.com/a/41759172/45375\">choroba's helpful answer</a> shows an effective solution using <code>perl</code>.</p>\n\n<hr>\n\n<h3><code>sed</code> solution</h3>\n\n<p>If you want to use <code>sed</code>, you must <strong>use a separate <code>sed</code> command just to escape the <code>$line</code> variable value</strong>, because <strong><code>sed</code> has <em>no</em> built-in way to escape strings for use as literals in a regex context</strong>:</p>\n\n<pre><code>lineEscaped=$(sed 's/[^^]/[&amp;]/g; s/\\^/\\\\^/g' &lt;&lt;&lt;\"$line\") # escape $line for use in regex\nsed -i \"s/^$lineEscaped\\$/#&amp;/\" file.txt # Note the \\$ to escape the end-of-line anchor $\n</code></pre>\n\n<p><sup>With BSD/macOS <code>sed</code>, use <code>-i ''</code> instead of just <code>-i</code> for in-place updating without backup.</sup></p>\n\n<p>And the reverse (<em>un</em>-commenting):</p>\n\n<pre><code>sed -i \"s/^#\\($lineEscaped\\)\\$/\\1/\" file.txt\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/a/29613573/45375\">this answer</a> of mine for an explanation of the <code>sed</code> command used for escaping, which should work with any input string.</p>\n\n<p>Also note how variable <code>$lineEscaped</code> is only referenced <em>once</em>, in the <em>regex</em> portion of the <code>s</code> command, whereas the <em>substitution-string</em> portion simply references what the regex matched (which avoids the need to escape the variable again, using different rules):<br>\n<code>&amp;</code> in the substitution string represents the entire match, and <code>\\1</code> the first capture group (parenthesized subexpression, <code>\\(...\\)</code>).</p>\n\n<p>For simplicity, the second <code>sed</code> command uses double quotes in order to embed the value of shell variable <code>$lineEscaped</code> in the <code>sed</code> script, but it is generally preferable to use <em>single</em>-quoted scripts so as to avoid confusion between what the shell interprets up front vs. what <code>sed</code> ends up seeing.  </p>\n\n<p>For instance, <code>$</code> is special to both the shell and <code>sed</code>, and in the above script the end-of-line anchor <code>$</code> in the <code>sed</code> regex must therefore be escaped as <code>\\$</code> to prevent the shell from interpreting it.<br>\nOne way to avoid confusion is to selectively splice double-quoted shell-variable references into the otherwise single-quoted script:</p>\n\n<pre><code>sed -i 's/^'\"$lineEscaped\"'$/#&amp;/' file.txt\n</code></pre>\n\n<hr>\n\n<h3><code>awk</code> solution</h3>\n\n<p><strong><code>awk</code> offers literal string matching</strong>, which obviates the need for escaping:</p>\n\n<pre><code>awk -v line=\"$line\" '$0 == line { $0 = \"#\" $0 } 1' file.txt &gt; $$.tmp &amp;&amp; mv $$.tmp file.txt\n</code></pre>\n\n<p><sup>If you have <em>GNU</em> Awk v4.1+, you can use <code>-i inplace</code> for in-place updating.</sup></p>\n\n<p>And the reverse (<em>un</em>-commenting):</p>\n\n<pre><code>awk -v line=\"#$line\" '$0 == line { $0 = substr($0, 2) } 1' file.txt &gt; $$.tmp &amp;&amp; \n  mv $$.tmp file.txt\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 4342608, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e45d390e6c29808dc37309d8d8c0b758?s=128&d=identicon&r=PG&f=1", "display_name": "Swifting", "link": "https://stackoverflow.com/users/4342608/swifting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 1, "accepted_answer_id": 41774189, "answer_count": 2, "score": 1, "last_activity_date": 1485176214, "creation_date": 1484899909, "last_edit_date": 1485176214, "question_id": 41758892, "link": "https://stackoverflow.com/questions/41758892/escaping-a-variable-with-special-characters-within-sed-comment-and-uncomment-a", "title": "Escaping a variable with special characters within sed - comment and uncomment an arbitrary line of source code", "body": "<p>I need to comment out a line in a crontab file through a script, so it contains directories, spaces and symbols. This specific line is stored in a variable and I am starting to get mixed up on how to escape the variable. Since the line changes on a regular basis I dont want any escaping in there. I don't want to simply add # in front of it, since I also need to switch it around and replace the line again with the original without the #. </p>\n\n<p>So the goal is to replace $line with #$line (comment) with the possibility to do it the other way around (uncomment).</p>\n\n<p>So I have a variable:</p>\n\n<pre><code>line=\"* * * hello/this/line &amp; /still/this/line\"\n</code></pre>\n\n<p>This is a line that occurs in a file, file.txt. Wich needs to get comment out.</p>\n\n<p>First try: </p>\n\n<pre><code>sed -i \"s/^${line}/#${line}/\" file.txt\n</code></pre>\n\n<p>Second try:</p>\n\n<pre><code>sed -i 's|'${line}'|'\"#${line}\"'|g' file.txt\n</code></pre>\n"}, {"tags": ["multithreading", "perl"], "comments": [{"owner": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1484898674, "post_id": 41758080, "comment_id": 70708703, "body": "why you are using the <code>threads</code>."}, {"owner": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "reply_to_user": {"reputation": 2415, "user_id": 4251338, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/UNbCO.png?s=128&g=1", "display_name": "ssr1012", "link": "https://stackoverflow.com/users/4251338/ssr1012"}, "edited": false, "score": 0, "creation_date": 1484899346, "post_id": 41758080, "comment_id": 70708999, "body": "I need to run this script for multiple url at the same time"}], "answers": [{"comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484908854, "post_id": 41758832, "comment_id": 70714627, "body": "I&#39;d also note - for this sort of model, spawning a new thread per request is a really inefficient way of doing it, and you&#39;d be far better off doing something worker-threads style <a href=\"http://stackoverflow.com/questions/26296206/perl-daemonize-with-child-daemons\">something like this</a>. But <code>LWP::Parallel</code> is probably a better choice in this scenario :)"}, {"owner": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484910119, "post_id": 41758832, "comment_id": 70715468, "body": "I appreciate the tips of @Sobrique. The answer of Schwern is correct, thanks!!"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1484899689, "last_edit_date": 1592644375, "creation_date": 1484899689, "answer_id": 41758832, "question_id": 41758080, "link": "https://stackoverflow.com/questions/41758080/perl-getstore-in-thread/41758832#41758832", "title": "perl getstore in thread", "body": "<p>Because &quot;detach&quot; doesn't do what you'd expect. Detached threads are terminated when the program exits. <a href=\"https://metacpan.org/pod/threads#DESCRIPTION\" rel=\"nofollow noreferrer\">From the docs...</a></p>\n<blockquote>\n<p>$thr-&gt;detach()</p>\n<p>Makes the thread unjoinable, and causes any eventual return value to be discarded. <em><strong>When the program exits, any detached threads that are still running are silently terminated.</strong></em></p>\n</blockquote>\n<p>You should have gotten a message like this.</p>\n<pre><code>Perl exited with active threads:\n    1 running and unjoined\n    0 finished and unjoined\n    0 running and detached\n</code></pre>\n<p>Instead of detaching, you should wait until all threads are complete at the end of your program.</p>\n<pre><code>for my $thread (threads-&gt;list(threads::running)) {\n    $thread-&gt;join;\n}\n</code></pre>\n<hr />\n<p>If all you want is to make parallel HTTP requests, there's no need for threads. <a href=\"https://metacpan.org/pod/LWP::Parallel\" rel=\"nofollow noreferrer\">LWP::Parallel</a> will probably be more efficient.</p>\n"}], "owner": {"reputation": 1036, "user_id": 449284, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MdJBf.jpg?s=128&g=1", "display_name": "Mauro Sala", "link": "https://stackoverflow.com/users/449284/mauro-sala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 41758832, "answer_count": 1, "score": 2, "last_activity_date": 1484899689, "creation_date": 1484896749, "last_edit_date": 1484898382, "question_id": 41758080, "link": "https://stackoverflow.com/questions/41758080/perl-getstore-in-thread", "title": "perl getstore in thread", "body": "<p>In the following script:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse LWP::Simple;\nuse threads;\nthreads-&gt;create(sub { \n    my $url = \"http://www.example.com/logo.jpg\"; \n    my $file = \"/var/www/html/logo.jpg\"; \n    getstore($url, $file);\n    threads-&gt;detach();\n});\n</code></pre>\n\n<p>when I launch this it doesn't save the image, but if I launch the same code not in thread it works, why?</p>\n"}, {"tags": ["perl", "message-queue"], "comments": [{"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1484894456, "post_id": 41756529, "comment_id": 70706868, "body": "When a Perl binding or implementation is written for libraries in other languages changes are often made to the interface.  Often things need not be passed, or may be passed behind scenes if Perl&#39;s implementation is object oriented.  However, this question doesn&#39;t provide even the basic description of the problem.  It is way too broad, and not focused on a problem with code but rather on operation of a software library."}, {"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 4, "creation_date": 1484909147, "post_id": 41756529, "comment_id": 70714833, "body": "<a href=\"https://perl5.git.perl.org/perl.git/blob/HEAD:/doio.c#l2350\" rel=\"nofollow noreferrer\">This</a> is how it works."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1485183786, "post_id": 41756529, "comment_id": 70806665, "body": "<code>int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg);</code> doesn&#39;t look like Perl..."}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 1, "last_activity_date": 1485190538, "last_edit_date": 1485190538, "creation_date": 1485183953, "answer_id": 41809424, "question_id": 41756529, "link": "https://stackoverflow.com/questions/41756529/message-queue-function-msgsnd-with-less-arguments/41809424#41809424", "title": "Message queue function msgsnd with less arguments", "body": "<p>The <a href=\"http://perldoc.perl.org/functions/msgsnd.html\" rel=\"nofollow noreferrer\">usage</a> is actually</p>\n\n<pre><code>msgsnd ID,MSG,FLAGS\n</code></pre>\n\n<p>Perl strings aren't NUL-terminated like in C; string scalars (such as <code>MSG</code>) contain a field with the length of the data in the string buffer in addition to the string buffer itself, so all the necessary information is available in those three parameters to make the underlying <code>msgsnd()</code> call.</p>\n\n<p><a href=\"https://perl5.git.perl.org/perl.git/blob/443bd156a6baaf7a8fe6b6b05fcf6c4178140ed2:/doio.c#l2356\" rel=\"nofollow noreferrer\">Here</a> is the implementation of Perl's <code>msgsnd</code> operator.</p>\n"}], "owner": {"reputation": 165, "user_id": 2021257, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3a1277105bea48339ae462a37bcfa872?s=128&d=identicon&r=PG", "display_name": "Kranthi", "link": "https://stackoverflow.com/users/2021257/kranthi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485190538, "creation_date": 1484889159, "question_id": 41756529, "link": "https://stackoverflow.com/questions/41756529/message-queue-function-msgsnd-with-less-arguments", "title": "Message queue function msgsnd with less arguments", "body": "<p>The 'msgsnd' function actual declaration is below</p>\n\n<pre><code>int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg);\n</code></pre>\n\n<p>But, there is a perl program which used in the following manner</p>\n\n<pre><code>msgsnd($qid, pack(\"l! l! a*\", $type, $type, $cmd), 1)\n</code></pre>\n\n<p>This has only 3 arguments. How does this works?</p>\n"}, {"tags": ["perl"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7444082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67779bc688f31868fb48266cbab09be8?s=128&d=identicon&r=PG&f=1", "display_name": "perln00b", "link": "https://stackoverflow.com/users/7444082/perln00b"}, "edited": false, "score": 0, "creation_date": 1484890289, "post_id": 41755206, "comment_id": 70705357, "body": "i think i broke the script now?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 9, "user_id": 7444082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67779bc688f31868fb48266cbab09be8?s=128&d=identicon&r=PG&f=1", "display_name": "perln00b", "link": "https://stackoverflow.com/users/7444082/perln00b"}, "edited": false, "score": 0, "creation_date": 1484890968, "post_id": 41755206, "comment_id": 70705592, "body": "@perln00b I have no idea. Did you?"}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484908960, "post_id": 41755206, "comment_id": 70714707, "body": "I&#39;ve tended to use <code>Time::Piece</code> on account of it being core as of 5.9.5.  But the functionality of it is similar <code>my $t = Time::Piece-&gt;strptime($time_str, $format );</code>"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1484925753, "post_id": 41755206, "comment_id": 70725305, "body": "@Sobrique I like the fact that it&#39;s core, but the poor time zone handling and lack of manipulation features make it not worth the hassle for me."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484928172, "post_id": 41755206, "comment_id": 70726903, "body": "Timezone is fair enough - it took a bit of faff to parse <code>PST</code>. What do you mean by manipulation features though?"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484933415, "post_id": 41755206, "comment_id": 70729929, "body": "@Sobrique Sure, so something like <code>$dt-&gt;truncate(to =&gt; &#39;month&#39;)-&gt;subtract(days =&gt; 1)</code> to get the last day of the previous month."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484934198, "post_id": 41755206, "comment_id": 70730318, "body": "Well, there isn&#39;t a truncate, but: <code>$start -= $start-&gt;day_of_month * ONE_DAY;</code> Or perhaps something like: <code>$start = $start -&gt; add_months(-1); $start += ONE_DAY * ($start -&gt; month_last_day - $start -&gt; day_of_month);</code> It&#39;s not like it&#39;s totally crippled in that regard."}, {"owner": {"reputation": 9, "user_id": 7444082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67779bc688f31868fb48266cbab09be8?s=128&d=identicon&r=PG&f=1", "display_name": "perln00b", "link": "https://stackoverflow.com/users/7444082/perln00b"}, "edited": false, "score": 0, "creation_date": 1484983958, "post_id": 41755206, "comment_id": 70744576, "body": "so this essentially takes the raw data from an html email file which has the date in the format  Date: 05/Feb/2017 21:30:00 PST - 06/Feb/2017 06:00:00 PST"}, {"owner": {"reputation": 9, "user_id": 7444082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67779bc688f31868fb48266cbab09be8?s=128&d=identicon&r=PG&f=1", "display_name": "perln00b", "link": "https://stackoverflow.com/users/7444082/perln00b"}, "edited": false, "score": 0, "creation_date": 1485045792, "post_id": 41755206, "comment_id": 70762144, "body": "so the code that was working earlier, was the Time::Piece script which I added more details to above. that was meant to fetch the date and time from this    Duration:\t   START DATE Wednesday 28th September 2011 23:59 Hrs PST \t\t   END DATE Thursday 29th September 2011 06:00 Hrs PST  I dont want to change the libraries and risk breaking it. could you give me any pointers on how to make changes so that it can fetch the date from the new format  appreciate it heaps"}, {"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "reply_to_user": {"reputation": 9, "user_id": 7444082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67779bc688f31868fb48266cbab09be8?s=128&d=identicon&r=PG&f=1", "display_name": "perln00b", "link": "https://stackoverflow.com/users/7444082/perln00b"}, "edited": false, "score": 0, "creation_date": 1485046373, "post_id": 41755206, "comment_id": 70762245, "body": "@perln00b This is getting too long for a discussion in the comments. If you have a different problem, you should ask a new question. Be sure to include a self-contained test case that reproduces the problem (a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": false, "score": 0, "last_activity_date": 1484879970, "creation_date": 1484879970, "answer_id": 41755206, "question_id": 41754945, "link": "https://stackoverflow.com/questions/41754945/perl-date-fetch-script-assistance/41755206#41755206", "title": "perl date fetch script assistance", "body": "<p>If you use the <a href=\"https://metacpan.org/pod/DateTime\" rel=\"nofollow noreferrer\">DateTime</a> module, parsing and formatting those date strings is trivial:</p>\n\n<pre><code>use strict;\nuse warnings;\nuse 5.010;\n\nuse DateTime;\nuse DateTime::Format::Strptime;\n\nmy $fmt = DateTime::Format::Strptime-&gt;new(pattern =&gt; '%d/%b/%Y %H:%M:%S');\n\nmy $line = 'Date: 05/Feb/2017 21:30:00 PST - 06/Feb/2017 06:00:00 PST';\n$line =~ s/^Date: //;\nmy @dates = split(/\\s*-\\s*/, $line);\n\nfor my $date (@dates) {\n    my $dt = $fmt-&gt;parse_datetime($date);\n    say $dt-&gt;ymd . ' ' . $dt-&gt;hms;\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>2017-02-05 21:30:00\n2017-02-06 06:00:00\n</code></pre>\n\n<p>You can adjust the formatting as you see fit.</p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 2, "last_activity_date": 1484909631, "creation_date": 1484909631, "answer_id": 41761889, "question_id": 41754945, "link": "https://stackoverflow.com/questions/41754945/perl-date-fetch-script-assistance/41761889#41761889", "title": "perl date fetch script assistance", "body": "<p>Offering a solution using <code>Time::Piece</code> which I prefer - both because I like the interface, but also because it's core as of perl 5.9.5</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nuse Time::Piece;\n\nmy $input_format  = '%d/%b/%Y %H:%M:%S';\nmy $output_format = '%Y-%m-%d %H:%M:%S';\n\nwhile (&lt;DATA&gt;) {\n   if ( my ( $start_str, $end_str ) = m/Date: (.*) PST - (.*) PST/ ) {\n      my $start = Time::Piece-&gt;strptime( $start_str, $input_format );\n      my $end   = Time::Piece-&gt;strptime( $end_str,   $input_format );\n\n      print \"Start:\\t\", $start-&gt;strftime($output_format), \"\\n\";\n      print \"End:  \\t\", $end  -&gt;strftime($output_format), \"\\n\";\n   }\n}\n\n\n__DATA__\nDate: 05/Feb/2017 21:30:00 PST - 06/Feb/2017 06:00:00 PST\n</code></pre>\n\n<p>The reason I like it is because the <code>$start</code> and <code>$end</code> in the above, are 'time objects' so you can do things like:</p>\n\n<pre><code>print $start -&gt; epoch;\nprint \"Elapsed time: \", $end - $start, \"s\\n\";\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 7444082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67779bc688f31868fb48266cbab09be8?s=128&d=identicon&r=PG&f=1", "display_name": "perln00b", "link": "https://stackoverflow.com/users/7444082/perln00b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484909631, "creation_date": 1484877946, "last_edit_date": 1484878632, "question_id": 41754945, "link": "https://stackoverflow.com/questions/41754945/perl-date-fetch-script-assistance", "title": "perl date fetch script assistance", "body": "<p>I was just having a go at perl. I was trying to extract the date and time from a line in a text file that begins with</p>\n\n<blockquote>\n  <p>Date:    05/Feb/2017 21:30:00 PST - 06/Feb/2017 06:00:00 PST</p>\n</blockquote>\n\n<p>I have managed to scavenge a script but Im trying to modify it so it extracts the above to </p>\n\n<pre><code>start date - 2017-02-05 21:30:00\nend date   - 2017-02-06 06:00:00\n</code></pre>\n\n<p>any help would be appreciated</p>\n\n<pre><code> #Is it a reg date\n    } elsif (!$start &amp;&amp; $line[$i] =~ /^Date: (.+?) - (.+)$/i) {\n        $regstartdate = $1;\n        $regenddate = $2;\n\n    } elsif (!$start &amp;&amp; $line[$i] =~ /^Date: (.+)$/i) {\n        #Monday 3rd July 2006\n        #Friday 30th June 2006 01:00 Hrs EST\n        $regstartdate = $1;\n\n        eval{\n            $start = &amp;dateconv($regstartdate);\n            $end = $start;\n            1;\n        }\n        or do{\n           warn \"Could not process start date: $regstartdate\";\n        };\n    } elsif (!$start &amp;&amp; $line[$i] =~ /^Time:\\s*(\\d+:\\d+)[\\s\\-]+\\s+(\\d+:\\d+)\\s+[hH][rR][sS]\\s+(\\w+)$/i) {\n        $tz = $3;\n        $twestartdate = $regstartdate . \" \".$1.\" Hrs \".$3;\n        $tweenddate = $regenddate . \" \".$2.\" Hrs \".$3;\n        $start = &amp;dateconv($regstartdate);\n        $end = &amp;dateconv($regenddate);\n\n    } elsif (!$start &amp;&amp; $line[$i] =~ /^Time:\\s*(\\d+:\\d+)[\\s*\\-]+\\s*(\\d+:\\d+)\\s+(\\w+)$/i) {\n        $tz = $3;\n        $regstartdate = $regstartdate . \" \".$1.\" Hrs \".$3;\n        $regenddate = $regenddate . \" \".$2.\" Hrs \".$3;\n        $start = &amp;dateconv($regstartdate);\n        $end = &amp;dateconv($regenddate);\n\n    #Is it a reg Time\n    } elsif (!$start &amp;&amp; $line[$i] =~ /^Interruption Time: (\\d+:\\d+)[\\s\\-]+(\\d+:\\d+) (\\w+)/i) {\n        $regstartdate = $regstartdate . \" \" . $1 . \" Hrs \" . $3;\n        $regenddate = $regenddate . \" \" . $2 . \" Hrs \" . $3;\n\n\n        $start = &amp;dateconv($regstartdate);\n        $end = &amp;dateconv($regenddate);\n\n    #Is is the start time ?\n    } elsif (!$start &amp;&amp; $line[$i] =~ /^Duration:\\s*START DATE (.*)/i) {\n      $start = &amp;dateconv($1);\n\n    #Is it the end time ?\n    } elsif (!$end &amp;&amp; $line[$i] =~ /^END DATE (.*)/i) {\n      my $endtime = $1;\n      $end = &amp;dateconv($endtime);\n      $endtime =~ m/(\\w{1,2}ST)/g;\n      $tz = $1;\n</code></pre>\n"}, {"tags": ["arrays", "perl", "hash", "dereference"], "comments": [{"owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "edited": false, "score": 1, "creation_date": 1484867719, "post_id": 41753296, "comment_id": 70699405, "body": "I can&#39;t tell what the actual question is here, but the answer is to read <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a>"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 1, "creation_date": 1484867748, "post_id": 41753296, "comment_id": 70699415, "body": "Dereference from the hashref, <code>$build_numbers-&gt;{$job_name}</code>, then dereference that value since it&#39;s an arrayref, <code>@{$build_numbers-&gt;{$job_name}}</code>. You need curlies in <code>@{ ... }</code> for precedence rules.  The second <code>@</code> in your code is extra.  That&#39;s basics, there are many ways to work with these.  Yes, you need to go through levels to get to the bottom, how else? You should read the relevant docs, life will be much better afterwards."}, {"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 0, "creation_date": 1484907161, "post_id": 41753296, "comment_id": 70713510, "body": "Is this parsed content of some kind? You usually get complicated data structures when parsing XML or JSON or something."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484919045, "post_id": 41753296, "comment_id": 70720969, "body": "You should start by dumping your data structure. <code>Data::Dumper</code> is okay, and is a core module, while <code>Data::Dump</code> is superior but may need installing."}], "answers": [{"comments": [{"owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "edited": false, "score": 0, "creation_date": 1485294636, "post_id": 41753564, "comment_id": 70864445, "body": "The reason I did it like that is because I didn&#39;t want to use the -&gt; notation (as used in your and carlosns answer), but wanted to use a shorter/more readable version.  I thought that @$hash_ref{$job} is equivalent to @{$hash_ref-&gt;{$job}}. But if I use that notation, my print returns the hexa code for the array itself and not it&#39;s content. I then tried to add another @{} to deref it again and this time it seemed to print out the contents of the array.  Your format is actually clearer than the one that I found to work."}], "tags": [], "owner": {"reputation": 6258, "user_id": 82262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ce15931410b388a52eb2df4a864137f?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jacob", "link": "https://stackoverflow.com/users/82262/matt-jacob"}, "is_accepted": true, "score": 4, "last_activity_date": 1484869335, "last_edit_date": 1484869335, "creation_date": 1484868368, "answer_id": 41753564, "question_id": 41753296, "link": "https://stackoverflow.com/questions/41753296/de-reference-x-number-of-times-for-x-number-of-data-structures/41753564#41753564", "title": "De-reference x number of times for x number of data structures", "body": "<p>Line 3 is taking a <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slice</a> of your hash reference, but it's a very strange way to do what you're trying to do because a) you normally wouldn't slice a single element and b) there's cleaner and more obvious syntax that would make your code easier to read.</p>\n\n<p>If your data looks something like this:</p>\n\n<pre><code>my $data = {\n    foo =&gt; [0 .. 9],\n    bar =&gt; ['A' .. 'F'],\n};\n</code></pre>\n\n<p>Then the correct version of your example would be:</p>\n\n<pre><code>for my $key (keys(%$data)) {\n    print \"$key =&gt; \";\n\n    for my $val (@{$data-&gt;{$key}}) {\n        print \"$val \";\n    }\n\n    print \"\\n\";\n}\n</code></pre>\n\n<p>Which produces:</p>\n\n<pre><code>bar =&gt; A B C D E F\nfoo =&gt; 0 1 2 3 4 5 6 7 8 9\n</code></pre>\n\n<p>If I understand your second question, the answer is that you can access precise locations of complex data structures if you use the correct syntax. For example:</p>\n\n<pre><code>print \"$data-&gt;{bar}-&gt;[4]\\n\";\n</code></pre>\n\n<p>Will print <code>E</code>.</p>\n\n<p>Additional recommended reading: <a href=\"http://perldoc.perl.org/perlref.html\" rel=\"nofollow noreferrer\">perlref</a>, <a href=\"http://perldoc.perl.org/perlreftut.html\" rel=\"nofollow noreferrer\">perlreftut</a>, and <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">perldsc</a> </p>\n"}, {"comments": [{"owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "edited": false, "score": 0, "creation_date": 1485293937, "post_id": 41753861, "comment_id": 70864151, "body": "I tried the syntax you suggested @{$hash_ref-&gt;{$job}} to create my array and it worked. While I&#39;ve seen this syntax being used in the docs I used; I tried using the shorter version ie without the -&gt; and my version also works. @{@$build_numbers{$job_name}}."}, {"owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "reply_to_user": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "edited": false, "score": 0, "creation_date": 1485378101, "post_id": 41753861, "comment_id": 70906847, "body": "So It&#39;s all fine :-)"}], "tags": [], "owner": {"reputation": 403, "user_id": 7349485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzfEj.jpg?s=128&g=1", "display_name": "carlosn", "link": "https://stackoverflow.com/users/7349485/carlosn"}, "is_accepted": false, "score": 0, "last_activity_date": 1484870223, "creation_date": 1484870223, "answer_id": 41753861, "question_id": 41753296, "link": "https://stackoverflow.com/questions/41753296/de-reference-x-number-of-times-for-x-number-of-data-structures/41753861#41753861", "title": "De-reference x number of times for x number of data structures", "body": "<p>Working with data structures can be hard depending on how it was made.</p>\n\n<p>I am not sure if your \"job\" data structure is exactly this but: </p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse strict;\nuse warnings;\nuse diagnostics;\n\n\nmy $hash_ref = {\n\n job_one =&gt; [ 'one', 'two'],\n job_two =&gt; [ '1','2'],\n\n};\n\nforeach my $job ( keys %{$hash_ref} ){\n\n print \" Job =&gt; $job\\n\";\n\n my @array = @{$hash_ref-&gt;{$job}};\n\n foreach my $item ( @array )\n {\n\n        print \"Job: $job Item $item\\n\";\n }\n\n}\n</code></pre>\n\n<p>You have an hash reference which you iterate the keys that are arrays. But each item of this array could be another reference or a simple scalar.</p>\n\n<p>Basically you can work with the ref or undo the ref like you did in the first loop.</p>\n\n<p>There is a piece of documentation you can check for more details <a href=\"http://perldoc.perl.org/perldsc.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>So answering your question:</p>\n\n<blockquote>\n  <p>Final question being: - When dealing with perl hashes of hashes of\n  arrays etc; to extract the elements at the \"bottom\" of the respective\n  data structure \"tree\" we have to dereference each level in turn to\n  reach the original data structures, until we obtain our desired level\n  of elements?</p>\n</blockquote>\n\n<p>It depends on how your data structure was made and if you already know what you are looking for it would be simple to get the value for example:</p>\n\n<blockquote>\n  <p>%city_codes = (</p>\n  \n  <p>a => 1,  b => 2,</p>\n  \n  <p>);</p>\n  \n  <p>my $value = $city_codes{a};</p>\n</blockquote>\n\n<p>Complex data structures comes with complex code.</p>\n"}], "owner": {"reputation": 1033, "user_id": 1535666, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/82b3874f463469e9c48455b3bcf9c903?s=128&d=identicon&r=PG", "display_name": "sSmacKk", "link": "https://stackoverflow.com/users/1535666/ssmackk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 41753564, "answer_count": 2, "score": 0, "last_activity_date": 1484920061, "creation_date": 1484866823, "last_edit_date": 1484920061, "question_id": 41753296, "link": "https://stackoverflow.com/questions/41753296/de-reference-x-number-of-times-for-x-number-of-data-structures", "title": "De-reference x number of times for x number of data structures", "body": "<p>I've come across an obstacle in one of my perl scripts that I've managed to solve, but I don't really understand why it works the way it works. I've been scouring the internet but I haven't found a proper explanation.</p>\n\n<p>I have a subroutine that returns a reference to a hash of arrays. The hash keys are simple strings, and the values are references to arrays.</p>\n\n<p>I print out the elements of the array associated with each key, like this</p>\n\n<pre><code>for my $job_name (keys %$build_numbers) {\n    print \"$job_name =&gt; \";\n    my @array = @{@$build_numbers{$job_name}};  # line 3\n    for my $item ( @array ) {\n        print \"$item \\n\";\n    } \n}\n</code></pre>\n\n<p>While I am able to print out the keys &amp; values, I don't really understand the syntax behind line 3.</p>\n\n<p>Our data structure is as follows:</p>\n\n<p>Reference to a hash whose values are references to the populated arrays.</p>\n\n<p>To extract the elements of the array, we have to:\n- dereference the hash reference so we can access the keys\n- dereference the array reference associated to a key to extract elements.</p>\n\n<p>Final question being:</p>\n\n<ul>\n<li>When dealing with perl hashes of hashes of arrays etc; to extract the elements at the \"bottom\" of the respective data structure \"tree\" we have to dereference each level in turn to reach the original data structures, until we obtain our desired level of elements?</li>\n</ul>\n\n<p>Hopefully somebody could help out by clarifying.</p>\n"}, {"tags": ["perl", "signals"], "answers": [{"tags": [], "owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "is_accepted": false, "score": 1, "last_activity_date": 1484865305, "creation_date": 1484865305, "answer_id": 41752976, "question_id": 41752829, "link": "https://stackoverflow.com/questions/41752829/perl-signal-handler-cant-use-an-undefined-value-as-a-symbol-reference/41752976#41752976", "title": "Perl: Signal handler: Can&#39;t use an undefined value as a symbol reference", "body": "<p>I'm going to suggest that <code>$fh</code> is the undefined symbol reference.  The <code>use</code> is run during the compilation phase (as if in a <code>BEGIN {...}</code> block), and, depending on where you think you're calling it, the <code>$fh</code> may never have been opened, or its scope may not be what you think.</p>\n\n<p>Add some debugging to your handler to show, for example, the value of $fh and the <code>refaddr</code> of $fh.  Also add to your open/flock code the same.  I bet the refaddr isn't the same.</p>\n\n<p>Since the sigtrap is registered globally, you may be best off with a global, e.g.:</p>\n\n<pre><code>my @handlers;\nuse sigtrap handler =&gt; sub { $_-&gt;() for grep defined, @handlers }, 'normal-signals';\n\n{\n  my ($fh, @list);\n  open my $fh, ...\n  flock $fh, LOCK_EX;\n  my $handler = sub { flock $fh, LOCK_UN };\n\n  @handlers = map { weaken $_ } grep defined, @handlers, $handler;\n  # ... do stuff. When $handler goes out of scope, it'll go undef in @handlers\n}\n</code></pre>\n"}], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1484867623, "creation_date": 1484864569, "question_id": 41752829, "link": "https://stackoverflow.com/questions/41752829/perl-signal-handler-cant-use-an-undefined-value-as-a-symbol-reference", "title": "Perl: Signal handler: Can&#39;t use an undefined value as a symbol reference", "body": "<p>I have the following:</p>\n\n<pre><code>#! /usr/bin/perl\nuse Fcntl ':flock';\nuse strict;\n...\n    my (@list, $fh);\n    open $fh, \"&lt;:encoding(utf8)\", $file or die \"$file: $!\";\n    flock $fh, LOCK_EX;\n    use sigtrap 'handler' =&gt; sub {flock($fh, LOCK_UN);}, 'normal-signals'; # line 72\n</code></pre>\n\n<p>It runs but gives an error when I press <code>^C</code>:</p>\n\n<pre><code>$ verify.pl\n...\nCan't use an undefined value as a symbol reference at ./verify.pl line 72.\n</code></pre>\n\n<p>The docs says it's OK</p>\n\n<pre><code>$ perldoc sigtrap\n...\n        use sigtrap 'handler' =&gt; \\&amp;my_handler, 'normal-signals';\n</code></pre>\n\n<p>I can't figure out what's wrong.</p>\n"}, {"tags": ["apache", "perl", "mojolicious", "mod-perl"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484856138, "post_id": 41750243, "comment_id": 70693719, "body": "You had me at <i>works most of the time</i>. :)"}], "answers": [{"tags": [], "owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "is_accepted": false, "score": 4, "last_activity_date": 1484927943, "last_edit_date": 1495541333, "creation_date": 1484858038, "answer_id": 41751175, "question_id": 41750243, "link": "https://stackoverflow.com/questions/41750243/mojolicious-template-cache-is-stale/41751175#41751175", "title": "Mojolicious template cache is stale", "body": "<h1>For old answer see below.</h1>\n\n<p>I turned the findings of this answer into a plugin and released it on CPAN as <a href=\"https://metacpan.org/pod/Mojolicious::Plugin::Renderer::WithoutCache\" rel=\"nofollow noreferrer\">Mojolicious::Plugin::Renderer::WithoutCache</a> after discussing wit <a href=\"https://stackoverflow.com/users/5848200/grinnz\">Grinnz</a> on IRC, where they encouraged a release.</p>\n\n<p>You can use it like this:</p>\n\n<pre><code>use Mojolicious::Lite;\nplugin 'Renderer::WithoutCache';\n</code></pre>\n\n<p>It will create a new Cache object that does nothing, and install that globally into the renderer. That way, it doesn't need to be created every time like my initial answer below did.</p>\n\n<p>In theory, this should be faster than <a href=\"https://stackoverflow.com/a/41751645/1331451\">Grinnz' approach</a> (which is more sensible), and since you explicitly don't want to cache, you obviously want things to be as fast as possible, right? It's supposedly faster because the real Mojo::Cache would still need to go and try to set the cache, but then abort because there are no more free keys, and it also would try to look up the values from the cache every time. </p>\n\n<p>I benchmarked this with both <a href=\"https://metacpan.org/pod/Dumbbench\" rel=\"nofollow noreferrer\">Dumbbench</a> and <a href=\"https://metacpan.org/pod/Benchmark\" rel=\"nofollow noreferrer\">Benchmark</a>. Both of them showed negligible results. I ran them each a couple of times, but they fluctuated a lot, and it's not clear which one is faster. I included output of a run where my implementation was faster, but it still shows how minuscule the difference is. </p>\n\n<p><strong>Benchmark with Dumbbench:</strong></p>\n\n<pre><code>use Dumbbench;\nuse Mojolicious::Renderer;\nuse Mojolicious::Controller;\nuse Mojolicious::Plugin::Renderer::WithoutCache::Cache;\n\nmy $controller         = Mojolicious::Controller-&gt;new;\nmy $renderer_zero_keys = Mojolicious::Renderer-&gt;new;\n$renderer_zero_keys-&gt;cache-&gt;max_keys(0);\n\nmy $renderer_nocache = Mojolicious::Renderer-&gt;new;\n$renderer_nocache-&gt;cache( Mojolicious::Plugin::Renderer::WithoutCache::Cache-&gt;new );\n\nmy $bench = Dumbbench-&gt;new(\n    target_rel_precision =&gt; 0.005,\n    initial_runs         =&gt; 5000,\n);\n\n$bench-&gt;add_instances(\n    Dumbbench::Instance::PerlSub-&gt;new(\n        name =&gt; 'max_keys',\n        code =&gt; sub {\n            $renderer_zero_keys-&gt;render( $controller, { text =&gt; 'foobar' } );\n        }\n    ),\n    Dumbbench::Instance::PerlSub-&gt;new(\n        name =&gt; 'WithoutCache',\n        code =&gt; sub {\n            $renderer_nocache-&gt;render( $controller, { text =&gt; 'foobar' } );\n        }\n    ),\n);\n\n$bench-&gt;run;\n$bench-&gt;report;\n\n__END__\nmax_keys: Ran 8544 iterations (3335 outliers).\nmax_keys: Rounded run time per iteration: 5.19018e-06 +/- 4.1e-10 (0.0%)\nWithoutCache: Ran 5512 iterations (341 outliers).\nWithoutCache: Rounded run time per iteration: 5.0802e-06 +/- 5.6e-09 (0.1%)\n</code></pre>\n\n<p><strong>Benchmark with Benchmark:</strong></p>\n\n<pre><code>use Benchmark 'cmpthese';\nuse Mojolicious::Renderer;\nuse Mojolicious::Controller;\nuse Mojolicious::Plugin::Renderer::WithoutCache::Cache;\n\nmy $controller         = Mojolicious::Controller-&gt;new;\nmy $renderer_zero_keys = Mojolicious::Renderer-&gt;new;\n$renderer_zero_keys-&gt;cache-&gt;max_keys(0);\n\nmy $renderer_nocache = Mojolicious::Renderer-&gt;new;\n$renderer_nocache-&gt;cache( Mojolicious::Plugin::Renderer::WithoutCache::Cache-&gt;new );\n\ncmpthese(\n    -5,\n    {\n        'max_keys' =&gt; sub {\n            $renderer_zero_keys-&gt;render( $controller, { text =&gt; 'foobar' } );\n        },\n        'WithoutCache' =&gt; sub {\n            $renderer_nocache-&gt;render( $controller, { text =&gt; 'foobar' } );\n        },\n    }\n);\n\n__END__\n                 Rate     max_keys WithoutCache\nmax_keys     190934/s           --          -2%\nWithoutCache 193846/s           2%           --\n</code></pre>\n\n<p>I recon in a heavy load environment with lots of calls it would eventually make a difference, but that is very hard to prove. So if you don't like to think about the internals of the cache, this plugin might be useful.</p>\n\n<hr>\n\n<p><strong>Old answer:</strong></p>\n\n<p>Looking at <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.20/lib/Mojolicious/Plugin/EPRenderer.pm\" rel=\"nofollow noreferrer\">Mojolicious::Plugin::EPRenderer</a> I found out that there is a <code>cache</code>. It's a <a href=\"https://metacpan.org/pod/Mojo::Cache\" rel=\"nofollow noreferrer\">Mojo::Cache</a> instance, which has the methods <code>get</code>, <code>set</code> and <code>max_keys</code>, and inherits from <a href=\"https://metacpan.org/pod/Mojo::Base\" rel=\"nofollow noreferrer\">Mojo::Base</a> (like probably everything in Mojolicious).</p>\n\n<p>The <a href=\"https://metacpan.org/source/SRI/Mojolicious-7.20/lib/Mojolicious/Plugin/EPRenderer.pm#L23\" rel=\"nofollow noreferrer\">::EPRenderer gets a <code>$renderer</code></a>, which is a <a href=\"https://metacpan.org/pod/Mojolicious::Renderer\" rel=\"nofollow noreferrer\">Mojolicious::Renderer</a>. It holds the Mojo::Cache instance. I looked at <code>$c</code> with <a href=\"https://metacpan.org/pod/Data::Printer\" rel=\"nofollow noreferrer\">Data::Printer</a>, and found out that there is a <code>$c-&gt;app</code> that holds all of those.</p>\n\n<p>Knowing this, you can easily make your own cache class that does nothing.</p>\n\n<pre><code>package Renderer::NoCache;\nuse Mojo::Base -base;\n\nsub get {}\nsub set {}\nsub max_keys {}\n</code></pre>\n\n<p>Now you stick it into <code>$c</code>.</p>\n\n<pre><code>package Foo;\nuse Mojolicious::Lite;\n\nget '/' =&gt; sub {\n    my $c = shift;\n\n    $c-&gt;app-&gt;renderer-&gt;cache( Renderer::NoCache-&gt;new );\n\n    $c-&gt;render(template =&gt; 'foo', name =&gt; 'World');\n};\n\napp-&gt;start;\n\n__DATA__\n\n@@ foo.html.ep\nHello &lt;%= $name =%&gt;.\n</code></pre>\n\n<p>Now every attempt to <code>get</code> or <code>set</code> the cache simply does nothing. It will try caching, but it will never find anything. </p>\n\n<p>Of course it's not great to make a new object every time. It would be better to make that object once at startup and get it into the internal permanent version of <code>app</code>. You have CGI, so it might not make a difference.</p>\n\n<hr>\n\n<p>You could also just monkey-patch the <code>get</code> out of <code>Mojo::Cache</code>. This more hacky approach will do the same thing:</p>\n\n<pre><code>package Foo;\nuse Mojolicious::Lite;\n\n*Mojo::Cache::get = sub { };\n\nget '/' =&gt; sub {\n    my $c = shift;\n\n    $c-&gt;render(template =&gt; 'foo', name =&gt; 'World');\n};\n\napp-&gt;start;\n</code></pre>\n\n<p><strong>But beware</strong>: we just disabled fetching from <strong>every cache</strong> in your application that uses Mojo::Cache. This might not be what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 850, "user_id": 4580729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac46efd39b35cac8c51a4b4b2e7163d5?s=128&d=identicon&r=PG", "display_name": "Tom Hunt", "link": "https://stackoverflow.com/users/4580729/tom-hunt"}, "edited": false, "score": 0, "creation_date": 1484868547, "post_id": 41751645, "comment_id": 70699681, "body": "I&#39;ve been in the habit of doing development in this environment without anything special; in theory it&#39;s a CGI environment, which means every new page load should have its own process. I guess mod_perl breaks that invariant somehow. Regardless, disabling the cache works."}], "tags": [], "owner": {"reputation": 8718, "user_id": 5848200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8072aaf76dcb4fe5027964252f16382?s=128&d=identicon&r=PG", "display_name": "Grinnz", "link": "https://stackoverflow.com/users/5848200/grinnz"}, "is_accepted": true, "score": 8, "last_activity_date": 1484859729, "creation_date": 1484859729, "answer_id": 41751645, "question_id": 41750243, "link": "https://stackoverflow.com/questions/41750243/mojolicious-template-cache-is-stale/41751645#41751645", "title": "Mojolicious template cache is stale", "body": "<blockquote>\n  <p>How can I make the app notice template changes reliably?</p>\n</blockquote>\n\n<p>This is what the <a href=\"https://metacpan.org/pod/Mojolicious::Guides::Tutorial#Reloading\" rel=\"noreferrer\">morbo</a> development server is for. Morbo wouldn't be used for your live code deployment, but for a development environment where you are continually changing your code and templates. Generally changes to live code and templates are meant to be handled by restarting the application server, or Apache in your case. (<a href=\"https://metacpan.org/pod/Mojolicious::Guides::Cookbook#Hypnotoad\" rel=\"noreferrer\">Hypnotoad</a> has a hot-restart capability for this purpose)</p>\n\n<blockquote>\n  <p>Alternatively, how can I disable template caching completely?</p>\n</blockquote>\n\n<p>To do this, add the following setup code (outside of routes, after <code>use Mojolicious::Lite</code>):</p>\n\n<pre><code>app-&gt;renderer-&gt;cache-&gt;max_keys(0);\n</code></pre>\n"}], "owner": {"reputation": 850, "user_id": 4580729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac46efd39b35cac8c51a4b4b2e7163d5?s=128&d=identicon&r=PG", "display_name": "Tom Hunt", "link": "https://stackoverflow.com/users/4580729/tom-hunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 1, "accepted_answer_id": 41751645, "answer_count": 2, "score": 4, "last_activity_date": 1484927943, "creation_date": 1484854689, "question_id": 41750243, "link": "https://stackoverflow.com/questions/41750243/mojolicious-template-cache-is-stale", "title": "Mojolicious template cache is stale", "body": "<p>I'm currently developing a small single-page Web app using Mojolicious. The app has a Javascript frontend (using Backbone) that talks to a REST-ish API; the layout of the source is roughly:</p>\n\n<pre><code>use Mojolicious::Lite;\n\n# ... setup code ...\n\nget '/' =&gt; sub {\n    my $c = shift;\n    # fetch+stash data for bootstrapped collections...\n    $c-&gt;render('app_template');\n};\n\nget '/api_endpoint' =&gt; sub {\n    my $c = shift;\n    # fetch appropriate API data...\n    $c-&gt;render(json =&gt; $response);\n};\n\n# ... more API endpoints ...\n\napp-&gt;start;\n</code></pre>\n\n<p>The app template uses EP, but very minimally; the only server-side template directives just insert JSON for bootstrapped collections. It's deployed via Apache as a plain CGI script. (This isn't optimal, but it's for low-traffic internal use, and more intricate server configuration is problematic in context.) Perl CGI is configured via <code>mod_perl</code>.</p>\n\n<p>This works most of the time, but occasionally the renderer somehow gets the idea that it should cache the template and ignore changes to it. The debug records in <code>error_log</code> show \"Rendering cached template\" rather than the normal \"Rendering template\", and my new changes to the template stop appearing in the browser. I can't find a reliable way to stop this, though it will eventually stop on its own according to conditions I can't discern.</p>\n\n<p>How can I make the app notice template changes reliably? Alternatively, how can I disable template caching completely?</p>\n"}, {"tags": ["regex", "perl", "pcre"], "comments": [{"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 2, "creation_date": 1484849505, "post_id": 41748661, "comment_id": 70690080, "body": "You shouldn&#39;t escape a dot with a backslash inside a character class. Only outside. So either <code>\\.</code> or <code>[.]</code> (there are other flavors of regexes that might fail when presented with superfluous backslash escapes, so it&#39;s best to avoid it). Anyway, that&#39;s not the problem here."}, {"owner": {"reputation": 37458, "user_id": 2734189, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bdd4c02158892b034c80f00eff30e6d5?s=128&d=identicon&r=PG&f=1", "display_name": "Don&#39;t Panic", "link": "https://stackoverflow.com/users/2734189/dont-panic"}, "edited": false, "score": 1, "creation_date": 1484849749, "post_id": 41748661, "comment_id": 70690218, "body": "The character classes themselves appear to be superfluous."}, {"owner": {"reputation": 1536, "user_id": 5522036, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/39442788c11224caa742c0d87e60b25f?s=128&d=identicon&r=PG&f=1", "display_name": "Ish Thomas", "link": "https://stackoverflow.com/users/5522036/ish-thomas"}, "reply_to_user": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484849968, "post_id": 41748661, "comment_id": 70690331, "body": "@blubberdiblub thanks for a suggestion, but it didn&#39;t work :("}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1484850113, "post_id": 41748661, "comment_id": 70690411, "body": "Use <code>$test =~ &#47;(\\d*\\.?\\d+)oz\\b&#47;;</code>"}, {"owner": {"reputation": 1536, "user_id": 5522036, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/39442788c11224caa742c0d87e60b25f?s=128&d=identicon&r=PG&f=1", "display_name": "Ish Thomas", "link": "https://stackoverflow.com/users/5522036/ish-thomas"}, "reply_to_user": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484850690, "post_id": 41748661, "comment_id": 70690700, "body": "@WiktorStribi\u017cew yeah! that worked, thanks! this should be an answer. Btw. I&#39;m not sure why this q was downvoted"}, {"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484852191, "post_id": 41748661, "comment_id": 70691519, "body": "Good, I posted with a bit of an explanation."}, {"owner": {"reputation": 1536, "user_id": 5522036, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/39442788c11224caa742c0d87e60b25f?s=128&d=identicon&r=PG&f=1", "display_name": "Ish Thomas", "link": "https://stackoverflow.com/users/5522036/ish-thomas"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484854605, "post_id": 41748661, "comment_id": 70692831, "body": "@ikegami You should have read one more line: <b>EDIT: Sorry, actually it doesn&#39;t work here either :( damn..</b> I edited my question at least 30 min before your comment. But really appreciate the afford, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1484852162, "creation_date": 1484852162, "answer_id": 41749573, "question_id": 41748661, "link": "https://stackoverflow.com/questions/41748661/how-to-catch-a-dot-in-perl-regex/41749573#41749573", "title": "How to catch a dot in Perl regex?", "body": "<p>You are using the first capturing group. In your pattern, <code>([\\d]+)([\\.]?[\\d]+)*oz\\b</code>, the first capturing group matches one or more digits. To capture the whole float or integer number before <code>oz</code>, use</p>\n\n<pre><code>$test =~ /(\\d*\\.?\\d+)oz\\b/;\n          ^         ^\n</code></pre>\n\n<p>where <code>\\d*\\.?\\d+</code> will match 0+ digits, an optional dot (note it is escaped outside a character class) and 1+ digits.</p>\n"}, {"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 4, "last_activity_date": 1484947267, "last_edit_date": 1484947267, "creation_date": 1484852563, "answer_id": 41749677, "question_id": 41748661, "link": "https://stackoverflow.com/questions/41748661/how-to-catch-a-dot-in-perl-regex/41749677#41749677", "title": "How to catch a dot in Perl regex?", "body": "<p>The strings you want to match are matched by</p>\n\n<pre><code>(?:\\d+(?:\\.\\d+)?|\\.\\d+)oz\n</code></pre>\n\n<p>(Wiktor Stribi\u017cew posted something shorter, but far less efficient.)</p>\n\n<p>So you want</p>\n\n<pre><code>if ( my ($match) = $test =~ /(\\d+(?:\\.\\d+)?|\\.\\d+)oz/ ) {\n   say $match;\n}\n</code></pre>\n\n<hr>\n\n<p>You can't possibly match <code>0.15</code> if your input <code>.15</code> or <code>..15</code>. Simply fix up the string independently of the match.</p>\n\n<pre><code>$match = \"0\".$match if $match =~ /^\\./;\n</code></pre>\n\n<p>Similarly, trimming leading zeros is best done outside of the match.</p>\n\n<pre><code>$match =~ s/^0+(?!\\.)//;\n</code></pre>\n\n<hr>\n\n<p>All together, we get</p>\n\n<pre><code>if ( my ($match) = $test =~ /(\\d+(?:\\.\\d+)?|\\.\\d+)oz/ ) {\n   $match =~ s/^0+(?!\\.)//;\n   $match = \"0\".$match if $match =~ /^\\./;\n   say $match;\n}\n</code></pre>\n"}], "owner": {"reputation": 1536, "user_id": 5522036, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/39442788c11224caa742c0d87e60b25f?s=128&d=identicon&r=PG&f=1", "display_name": "Ish Thomas", "link": "https://stackoverflow.com/users/5522036/ish-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1649, "favorite_count": 0, "accepted_answer_id": 41749573, "answer_count": 2, "score": 2, "last_activity_date": 1525363204, "creation_date": 1484848953, "last_edit_date": 1592644375, "question_id": 41748661, "link": "https://stackoverflow.com/questions/41748661/how-to-catch-a-dot-in-perl-regex", "title": "How to catch a dot in Perl regex?", "body": "<p>I'm trying to execute this lines of code:</p>\n<pre><code>  my $test = 'test .15oz test';\n  $test =~ /([\\d]+)([\\.]?[\\d]+)*oz\\b/;\n  print(&quot;test=$1\\n&quot;);\n</code></pre>\n<p>The output of this is:</p>\n<pre><code>  test=15\n</code></pre>\n<p>I want to catch that dot. What am I doing wrong?\nThe best would be to catch <strong>0.15</strong> somehow, but for now I can't even get a dot.</p>\n<p>Any help with getting 0.15 from <code>regex</code> would be appreciated, so:</p>\n<blockquote>\n<p>0.15 -&gt; 0.15</p>\n<p>.15 -&gt; 0.15</p>\n<p>..15 -&gt; 0.15</p>\n<p>0.0.0.15 -&gt; 0.15</p>\n<p>000.15 -&gt; 0.15</p>\n<p>15 -&gt; 15</p>\n</blockquote>\n<p>I tried also:</p>\n<pre><code>$test =~ /([\\d]+)(\\.?[\\d]+)*oz\\b/;\n$test =~ /([\\d]+)([.]?[\\d]+)*oz\\b/;\n</code></pre>\n<p>But with no success. Still getting &quot;15&quot;.</p>\n"}, {"tags": ["perl", "testing"], "comments": [{"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1484847984, "post_id": 41748221, "comment_id": 70689272, "body": "<code>{ stdout =&gt; \\$out }</code> ?"}, {"owner": {"reputation": 134, "user_id": 4118218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d57fc7313172808dd11aea598255743?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Baldassari", "link": "https://stackoverflow.com/users/4118218/boris-baldassari"}, "reply_to_user": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 0, "creation_date": 1484853228, "post_id": 41748221, "comment_id": 70692042, "body": "@toolic Nope, I want to perform more advanced testing/matching on the output and I feel more comfortable with the full stdout."}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 4118218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d57fc7313172808dd11aea598255743?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Baldassari", "link": "https://stackoverflow.com/users/4118218/boris-baldassari"}, "edited": false, "score": 1, "creation_date": 1484853131, "post_id": 41748802, "comment_id": 70691989, "body": "Ouahou. It works perfectly.. I have to admit I don&#39;t use scalar refs very often. Thank you @schwern!"}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1484849396, "creation_date": 1484849396, "answer_id": 41748802, "question_id": 41748221, "link": "https://stackoverflow.com/questions/41748221/how-to-get-the-stdout-from-a-testscript-run/41748802#41748802", "title": "How to get the stdout from a Test::Script run?", "body": "<p>You've almost got it. You need to <a href=\"https://metacpan.org/pod/Test::Script#script_runs\">give the <code>stdout</code> option a reference</a>. Otherwise you're just passing in <code>undef</code> and it will ignore the option.</p>\n\n<pre><code>script_runs(['testme.pl'], {\"stdout\"=&gt;\\$out}, 'run_script');\n</code></pre>\n"}], "owner": {"reputation": 134, "user_id": 4118218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d57fc7313172808dd11aea598255743?s=128&d=identicon&r=PG&f=1", "display_name": "Boris Baldassari", "link": "https://stackoverflow.com/users/4118218/boris-baldassari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 41748802, "answer_count": 1, "score": 1, "last_activity_date": 1484849396, "creation_date": 1484847400, "question_id": 41748221, "link": "https://stackoverflow.com/questions/41748221/how-to-get-the-stdout-from-a-testscript-run", "title": "How to get the stdout from a Test::Script run?", "body": "<p>I want to test of Perl script, say testme.pl, with the <a href=\"http://search.cpan.org/~plicease/Test-Script-1.14/lib/Test/Script.pm\" rel=\"nofollow noreferrer\">Test::Script</a> module and get the stdout of the executed script. I get an <code>undef</code> so far.</p>\n\n<p>Here is what I tried (test file <code>test.t</code>):</p>\n\n<pre><code>use Test::More tests =&gt; 2;\nuse Test::Script;       \nuse Data::Dumper;\nscript_compiles('testme.pl');\nmy $out;\nscript_runs(['testme.pl'], {\"stdout\"=&gt;$out}, 'run_script');\nprint \"Out is \" . Dumper($out);\n</code></pre>\n\n<p>And the script to be tested (<code>testme.pl</code>)</p>\n\n<pre><code>print \"catchme if you can\\n\";\n\nboris@midkemia artif_get_file $ perl perl_test.pl \n1..2\nok 1 - Script testme.pl compiles\nok 2 - run_script\nOut is $VAR1 = undef;\n</code></pre>\n\n<p>I also tried using an array ref \\@out instead of $out, still no luck. Any idea? Thanks!</p>\n"}, {"tags": ["bash", "perl", "grep", "pipe"], "comments": [{"owner": {"reputation": 61700, "user_id": 5291015, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZFijZ.jpg?s=128&g=1", "display_name": "Inian", "link": "https://stackoverflow.com/users/5291015/inian"}, "edited": false, "score": 0, "creation_date": 1484852261, "post_id": 41747867, "comment_id": 70691553, "body": "Can you provide feedback on the provided answers @millsofmn?"}], "answers": [{"tags": [], "owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "is_accepted": true, "score": 1, "last_activity_date": 1484846491, "creation_date": 1484846491, "answer_id": 41747928, "question_id": 41747867, "link": "https://stackoverflow.com/questions/41747867/how-can-i-pipe-the-results-of-grep-to-a-perl-one-liner/41747928#41747928", "title": "How can I pipe the results of grep to a perl one liner?", "body": "<p>With the <code>$(...)</code> bash syntax.</p>\n\n<pre><code>perl -p -i.bak -e 's{/env/file1/}{/env/file2/}g' $(grep -Irc \"/env/file1/\" /env/scripts/ | cut -d':' -f1 | sort | uniq)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 470, "user_id": 6193608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dliye.jpg?s=128&g=1", "display_name": "David Verdin", "link": "https://stackoverflow.com/users/6193608/david-verdin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484851491, "last_edit_date": 1484851491, "creation_date": 1484849297, "answer_id": 41748769, "question_id": 41747867, "link": "https://stackoverflow.com/questions/41747867/how-can-i-pipe-the-results-of-grep-to-a-perl-one-liner/41748769#41748769", "title": "How can I pipe the results of grep to a perl one liner?", "body": "<p>I'd forget the perl one liner to use xargs and sed instead.</p>\n\n<pre><code>grep -Irc \"/env/file1/\" /env/scripts/ | cut -d':' -f1 | sort | uniq  | xargs sed -ibak ':/env/file1/:/env/file2/:'\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 1715932, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1c3210c29196c06bb79d007714d5d0a6?s=128&d=identicon&r=PG", "display_name": "millsofmn", "link": "https://stackoverflow.com/users/1715932/millsofmn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 1, "accepted_answer_id": 41747928, "answer_count": 2, "score": 0, "last_activity_date": 1484851491, "creation_date": 1484846262, "question_id": 41747867, "link": "https://stackoverflow.com/questions/41747867/how-can-i-pipe-the-results-of-grep-to-a-perl-one-liner", "title": "How can I pipe the results of grep to a perl one liner?", "body": "<p>I have a grep command that find the files that need a value replaced. Then I have a perl one liner that needs to be executed on each file to replace a variables found in that file.</p>\n\n<p>How can I pipe the results of my grep command to the perl one liner?</p>\n\n<pre><code>grep -Irc \"/env/file1/\" /env/scripts/ | cut -d':' -f1 | sort | uniq\n\n/env/scripts/config/MainDocument.pl\n/env/scripts/config/MainDocument.pl2\n/env/scripts/config/MainDocument.pl2.bak\n\n\nperl -p -i.bak -e 's{/env/file1/}{/env/file2/}g' /env/scripts/config/MainDocument.pl\n</code></pre>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["perl", "posix"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 1, "creation_date": 1484845767, "post_id": 41747555, "comment_id": 70688022, "body": "What did you  see to make you believe that both modules call a thing named <code>NULL</code>?"}, {"owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "edited": false, "score": 1, "creation_date": 1484846000, "post_id": 41747555, "comment_id": 70688159, "body": "If <code>$days</code> will never be negative, <code>int</code> will give the same value as <code>floor</code>.  Just food for thought."}, {"owner": {"reputation": 1488, "user_id": 6395052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-XKoXECLm9OM/AAAAAAAAAAI/AAAAAAAAADw/PIOmJsiX89U/photo.jpg?sz=128", "display_name": "aschultz", "link": "https://stackoverflow.com/users/6395052/aschultz"}, "reply_to_user": {"reputation": 45481, "user_id": 197758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628da6ba2a6c70e35c009b7e3c3a430a?s=128&d=identicon&r=PG", "display_name": "toolic", "link": "https://stackoverflow.com/users/197758/toolic"}, "edited": false, "score": 0, "creation_date": 1484846777, "post_id": 41747555, "comment_id": 70688545, "body": "@toolic thanks. That solves the problem nicely. Also, fixed not printing the warning message. I thought I checked for it, but I didn&#39;t.  Mr.Llama, that&#39;s a good idea. I just started using floor years ago but never changed it. I suppose the question was more about clashing modules, but I&#39;m glad to be able to incorporate other tweaks into my code."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 4, "creation_date": 1484855205, "post_id": 41749223, "comment_id": 70693146, "body": "Not importing from Win32 (<code>use Win32 qw( );</code>) would be good too. It only exports a few rarely-used constants (no functions!)."}], "tags": [], "owner": {"reputation": 126333, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 5, "last_activity_date": 1484850888, "last_edit_date": 1592644375, "creation_date": 1484850888, "answer_id": 41749223, "question_id": 41747555, "link": "https://stackoverflow.com/questions/41747555/why-does-posix-in-conjunction-with-win32-throw-a-warning-with-floor/41749223#41749223", "title": "Why does POSIX in conjunction with Win32 throw a warning with floor()?", "body": "<p>You're correct, both POSIX and Win32 export, by default, <code>NULL</code>.</p>\n<p>POSIX is a poorly behaved module that exports far, far, far too much by default (list at the bottom). To account for this, only import the functions you need.</p>\n<pre><code>use Win32;\nuse POSIX qw(floor);\n</code></pre>\n<p>POSIX uses Exporter to accomplish this. See <a href=\"https://metacpan.org/pod/Exporter#How-to-Import\" rel=\"noreferrer\">How To Import</a> for more detail about controlling what gets imported.</p>\n<blockquote>\n<p>$ perl -wle 'use POSIX; print join &quot;, &quot;, @POSIX::EXPORT'</p>\n<p>isupper, isspace, fabs, F_GETLK, strncpy, EBADMSG, localeconv, SIGTRAP, ctermid, S_ISUID, fwrite, pow, strcoll, S_ISBLK, _POSIX_STREAM_MAX, EACCES, putc, FILENAME_MAX, tolower, sinh, EMLINK, ESOCKTNOSUPPORT, EDESTADDRREQ, DBL_MIN, fopen, TOSTOP, strncat, LINK_MAX, ENXIO, INLCR, TCION, NAME_MAX, EINPROGRESS, SIGILL, NDEBUG, VEOF, SEEK_END, ungetc, SEEK_CUR, STDOUT_FILENO, VEOL, ftell, UINT_MAX, ENOTEMPTY, DBL_EPSILON, INPCK, WIFSIGNALED, B134, remove, LC_TIME, SIGSEGV, _POSIX_PATH_MAX, F_RDLCK, SIG_BLOCK, VINTR, SA_NOCLDSTOP, PATH_MAX, isdigit, log10, O_RDWR, ENOTCONN, TMP_MAX, signal, F_SETLKW, qsort, O_TRUNC, _SC_TZNAME_MAX, _POSIX_NGROUPS_MAX, LC_COLLATE, _PC_NO_TRUNC, SCHAR_MAX, EHOSTUNREACH, fputs, ctime, fgetc, O_APPEND, _POSIX_ARG_MAX, EWOULDBLOCK, TCSAFLUSH, strstr, _exit, execle, malloc, DBL_MANT_DIG, _POSIX_SSIZE_MAX, puts, _SC_JOB_CONTROL, ttyname, B150, EMFILE, CS6, _POSIX_LINK_MAX, asin, mblen, _POSIX_PIPE_BUF, sigsuspend, B600, SIGPROF, L_ctermid, _SC_CLK_TCK, ceil, ECHILD, tmpfile, isprint, ECHOE, memset, ENOLINK, atexit, MAX_CANON, EADDRINUSE, sigprocmask, stderr, fscanf, modf, setpgid, tcgetpgrp, toupper, ENETRESET, B2400, raise, S_ISDIR, _SC_PAGESIZE, DBL_MAX_EXP, sysconf, EIDRM, F_SETFD, O_NOCTTY, EHOSTDOWN, FLT_MAX, CSTOPB, S_IRWXU, EPROTO, TCSANOW, S_IRWXO, setbuf, strchr, strerror, FLT_MIN_EXP, TCIOFF, tan, SIGCONT, EDQUOT, MB_CUR_MAX, _PC_PATH_MAX, SIGTTOU, SIGXCPU, EROFS, fdopen, _PC_VDISABLE, CHILD_MAX, ETXTBSY, S_ISCHR, SIGTTIN, VERASE, ESRCH, LONG_MAX, mbtowc, pause, sscanf, MB_LEN_MAX, O_WRONLY, fstat, _PC_MAX_INPUT, F_SETLK, SIGHUP, S_IXUSR, ETIME, DBL_MAX_10_EXP, execvp, ENOTSOCK, DBL_MIN_10_EXP, TCSADRAIN, isalnum, getchar, EMSGSIZE, TCIOFLUSH, _SC_NGROUPS_MAX, FLT_RADIX, ENOTDIR, _PC_LINK_MAX, strspn, S_IRWXG, _POSIX_NO_TRUNC, EXIT_SUCCESS, VKILL, acos, ERESTART, vprintf, EPFNOSUPPORT, IGNCR, _PC_MAX_CANON, STDIN_FILENO, strxfrm, _SC_VERSION, isxdigit, setsid, _POSIX_NAME_MAX, fmod, VSTART, B9600, FLT_MANT_DIG, islower, EXIT_FAILURE, clock, ENETDOWN, CS7, strrchr, SIGUSR2, tcdrain, INT_MIN, LDBL_DIG, _POSIX_JOB_CONTROL, SIG_UNBLOCK, _SC_STREAM_MAX, X_OK, F_UNLCK, ETIMEDOUT, CHAR_BIT, tmpnam, W_OK, sigpending, cfgetospeed, IEXTEN, geteuid, SIGRTMAX, E2BIG, LDBL_MIN, _SC_CHILD_MAX, CLK_TCK, NCCS, tzset, ENOMEM, gets, BRKINT, EDOM, ENODATA, ENOBUFS, ISTRIP, CLOCKS_PER_SEC, LDBL_MIN_EXP, SHRT_MIN, PARODD, EOF, asctime, ENFILE, EPROCLIM, freopen, sigaction, F_DUPFD, O_ACCMODE, FLT_MAX_10_EXP, difftime, TCOFLUSH, EINTR, ENOMSG, L_cuserid, B4800, EAGAIN, TCOON, setjmp, TZNAME_MAX, S_IWOTH, cuserid, PIPE_BUF, strtol, HUGE_VAL, F_GETFD, IGNPAR, EBUSY, memmove, ENOTBLK, getgid, SIGINT, EUSERS, SIGURG, EDEADLK, EOWNERDEAD, creat, _POSIX_MAX_CANON, _POSIX_CHOWN_RESTRICTED, execlp, F_SETFL, stdout, SIG_DFL, ldiv, SIGKILL, VSUSP, ENOTRECOVERABLE, B300, B200, HUPCL, WTERMSIG, offsetof, clearerr, tanh, getcwd, LDBL_MAX_10_EXP, SIG_SETMASK, ECHONL, O_NONBLOCK, S_IXOTH, ECONNABORTED, F_OK, tcflush, _POSIX_SAVED_IDS, SIGPIPE, _PC_NAME_MAX, ECANCELED, SIGCHLD, EREMOTE, FLT_MAX_EXP, SEEK_SET, getpid, B1800, NOFLSH, SIGUSR1, ECONNRESET, wcstombs, ESPIPE, WSTOPSIG, rewind, BUFSIZ, SIGABRT, STREAM_MAX, vsprintf, tcsendbreak, LDBL_MIN_10_EXP, pathconf, S_IRGRP, _SC_SAVED_IDS, OPOST, execv, feof, O_EXCL, access, sigsetjmp, mktime, fread, B1200, LC_MESSAGES, EXDEV, S_IROTH, longjmp, SA_RESETHAND, LC_ALL, ENOSYS, calloc, B110, FLT_EPSILON, assert, VQUIT, B50, ICANON, IXON, ECONNREFUSED, strftime, _PC_PIPE_BUF, ERANGE, SA_ONSTACK, ispunct, _POSIX_MAX_INPUT, WIFSTOPPED, ldexp, ENOLCK, EOTHER, _PC_CHOWN_RESTRICTED, PARENB, O_CREAT, STDERR_FILENO, ARG_MAX, ETOOMANYREFS, isatty, S_ISFIFO, SIGQUIT, abort, EPIPE, isalpha, USHRT_MAX, SA_RESTART, bsearch, IGNBRK, stdin, EPROTONOSUPPORT, ENOSPC, fgets, getegid, EAFNOSUPPORT, setvbuf, SIGTSTP, getuid, ESHUTDOWN, LONG_MIN, fgetpos, _POSIX_VERSION, frexp, %SIGRT, EADDRNOTAVAIL, F_WRLCK, lseek, EISDIR, atol, cfsetospeed, SIGALRM, fpathconf, B38400, L_tmpname, _POSIX_OPEN_MAX, ESTALE, LC_CTYPE, S_ISREG, WIFEXITED, EPROTOTYPE, SIG_IGN, EIO, ENAMETOOLONG, EPERM, atoi, isgraph, ENOENT, errno, MAX_INPUT, setuid, _SC_OPEN_MAX, S_IRUSR, siglongjmp, getenv, CS8, EINVAL, NULL, ECHO, LDBL_EPSILON, SCHAR_MIN, ENETUNREACH, uname, DBL_MAX, ENOPROTOOPT, SIGSTOP, strtoul, SA_NODEFER, CREAD, SIGBUS, mbstowcs, EFBIG, cfsetispeed, ISIG, FLT_MIN, SA_NOCLDWAIT, fsync, LDBL_MAX_EXP, ENOTTY, VMIN, strtod, TCIFLUSH, SA_SIGINFO, fclose, strcspn, strpbrk, SIGTERM, ENOSTR, ULONG_MAX, LC_NUMERIC, scanf, getgroups, vfprintf, ENOSR, FLT_ROUNDS, EEXIST, S_IWGRP, ENOEXEC, SIGVTALRM, SIGPOLL, memcmp, atan, putchar, _POSIX_CHILD_MAX, fflush, fsetpos, WEXITSTATUS, atof, EFAULT, memchr, strcat, VSTOP, _POSIX_TZNAME_MAX, LDBL_MAX, strlen, setlocale, FLT_MIN_10_EXP, cosh, tcgetattr, realloc, div, CHAR_MAX, fprintf, UCHAR_MAX, execve, B75, ICRNL, strcpy, ECHOK, FD_CLOEXEC, cfgetispeed, iscntrl, strtok, SSIZE_MAX, SIGSYS, S_ISGID, strncmp, EISCONN, labs, CLOCAL, R_OK, memcpy, F_GETFL, VTIME, dup, EALREADY, fseek, strcmp, SIGXFSZ, dup2, wctomb, SHRT_MAX, SIGFPE, SIG_ERR, _SC_ARG_MAX, setgid, execl, RAND_MAX, CSIZE, tcflow, CS5, LC_MONETARY, TCOOFF, _POSIX_VDISABLE, PARMRK, perror, mkfifo, ENODEV, S_IXGRP, WNOHANG, ferror, WUNTRACED, floor, INT_MAX, EOPNOTSUPP, OPEN_MAX, LDBL_MANT_DIG, DBL_DIG, SIGRTMIN, CHAR_MIN, tzname, O_RDONLY, B0, tcsetattr, tcsetpgrp, ELOOP, EOVERFLOW, S_IWUSR, IXOFF, EILSEQ, DBL_MIN_EXP, ENOTSUP, EBADF, B19200, free, fputc, NGROUPS_MAX, FLT_DIG</p>\n</blockquote>\n"}], "owner": {"reputation": 1488, "user_id": 6395052, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-XKoXECLm9OM/AAAAAAAAAAI/AAAAAAAAADw/PIOmJsiX89U/photo.jpg?sz=128", "display_name": "aschultz", "link": "https://stackoverflow.com/users/6395052/aschultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 41749223, "answer_count": 1, "score": 3, "last_activity_date": 1484850888, "creation_date": 1484845291, "last_edit_date": 1484846687, "question_id": 41747555, "link": "https://stackoverflow.com/questions/41747555/why-does-posix-in-conjunction-with-win32-throw-a-warning-with-floor", "title": "Why does POSIX in conjunction with Win32 throw a warning with floor()?", "body": "<p>I wrote the following relatively simple code below, to throw a popup box to remind me of daily tasks.</p>\n\n<pre><code>#use Math::Round;\nuse POSIX;\nuse Win32;\n\nuse strict;\nuse warnings;\n\nmy $basetime = 1484784000;\n\n#code with POSIX\nmy $days = floor((time()-$basetime) / 86400);\n\n#code without POSIX\n#my $days = sprintf(\"%d\", (time()-$basetime) / 86400);\n\n#code with Math::Round\n#my $days = Math::Round::nearest_floor(1, (time()-$basetime) / 86400);\n\nmy $bigString = \"We've been going for $days days.\\n\";\n\nWin32::MsgBox($bigString);\n</code></pre>\n\n<p>Now, the code works but throws a warning. The other two <code>my $days</code> work as well without throwing a warning. Here is the warning the POSIX function shows.</p>\n\n<pre><code>Constant subroutine main::NULL redefined at C:/Strawberry/perl/lib/Exporter.pm line 66.\n at C:\\coding\\perl\\posix-win32.pl line 3.\nPrototype mismatch: sub main::NULL () vs none at C:/Strawberry/perl/lib/Exporter.pm line 66.\n at C:\\coding\\perl\\posix-win32.pl line 3.\n</code></pre>\n\n<p>I don't think I ever used <code>POSIX</code> in conjunction with <code>Win32</code>, before, and I can see they're both calling a similarly named function, <code>NULL</code>. But I don't know what to do about it.</p>\n\n<p>I like using both modules, but obviously, I wouldn't want this cropping up in more complicated projects.</p>\n\n<p>What is going on to throw the warning, and how could I avoid it simply?</p>\n"}, {"tags": ["perl", "unicode"], "comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484842370, "post_id": 41745993, "comment_id": 70685780, "body": "Related: <a href=\"http://stackoverflow.com/questions/37663788/getting-all-unicode-aliases-for-a-codepoint\">Getting all Unicode aliases for a codepoint</a> (initially flagged as a duplicate, but it sounds like you&#39;re asking for all the things you can use in <code>\\N{}</code> for that codepoint, not just Unicode aliases)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484842389, "post_id": 41745993, "comment_id": 70685796, "body": "@ThisSuitIsBlackNot, Not quite. <code>greek:alpha</code> is something Perl generated; it&#39;s not (directly) from the UCD."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484842407, "post_id": 41745993, "comment_id": 70685811, "body": "@ikegami Yep, just retracted my vote."}], "answers": [{"comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484850286, "post_id": 41747856, "comment_id": 70690494, "body": "@ThisSuitIsBlackNot, No, it has nothing to do with the UCD other than it uses it. I could be placed on CPAN in a separate module, but it&#39;s of very limited use since it doesn&#39;t produce anything comparable. It&#39;s kinda like asking for a sub that produces all strings a regex pattern will match. The function I posted does little more than document <code>\\N{}</code>, and even then, it only does so with all the accompanying notes which are longer than the actual  <a href=\"http://search.cpan.org/perldoc?charnames\" rel=\"nofollow noreferrer\">documentation</a> for <code>\\N{}</code>."}, {"owner": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "edited": false, "score": 0, "creation_date": 1484921237, "post_id": 41747856, "comment_id": 70722349, "body": "Just great! Exactly what I was searching for"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 3, "last_activity_date": 1484855797, "last_edit_date": 1484855797, "creation_date": 1484846228, "answer_id": 41747856, "question_id": 41745993, "link": "https://stackoverflow.com/questions/41745993/how-can-i-get-all-values-that-can-be-used-in-n-to-produce-a-particular-code-p/41747856#41747856", "title": "How can I get all values that can be used in \\N{} to produce a particular code point?", "body": "<p>There's no single list against which these are checked.</p>\n\n<p>Based on the <a href=\"http://search.cpan.org/perldoc?charnames\" rel=\"nofollow noreferrer\">documentation</a> of <code>\\N{}</code>, the following will do the trick: </p>\n\n<pre><code>use List::Util   qw( max );\nuse Unicode::UCD qw( charscripts charinfo charprop );\n\nmy $re_scripts = join '|', map { quotemeta uc s/_/ /gr } keys %{ charscripts() };\nmy $re_letter = qr/^($re_scripts) (?:(CAPITAL|SMALL) )?LETTER (\\S.*)/;\n\n{\n   @ARGV == 1\n     or die(\"usage\\n\");\n\n   my $ucp = hex( $ARGV[0] =~ s/^(?:U\\+|0x)//r );\n\n   my @names;\n   push @names, [ \"\", sprintf('U+%X', $ucp) ];\n\n   if ( my $charinfo = charinfo($ucp) ) {\n      my $name = $charinfo-&gt;{name};\n      push @names, [ \":full\", $name ] if length($name) &amp;&amp; $name ne '&lt;control&gt;';\n\n      for my $alias (map s/:.*//sr, split /,/, charprop($ucp, 'Name_Alias')) {\n         push @names, [ \":full\", $alias ];\n      }\n\n      if ( my ($script_name, $type, $short_char_name) = $name =~ $re_letter ) {\n         my $uc = ( $type // 'CAPITAL' ) eq 'CAPITAL';\n         my $lc = ( $type // 'SMALL'   ) eq 'SMALL';\n         push @names, [ \":short\", join(\":\", $script_name, uc($short_char_name)) ] if $uc;\n         push @names, [ \":short\", join(\":\", $script_name, lc($short_char_name)) ] if $lc;\n         push @names, [ $script_name, uc($short_char_name) ] if $uc;\n         push @names, [ $script_name, lc($short_char_name) ] if $lc;\n      }\n   }\n\n   my $longuest = max map length($_-&gt;[0]), @names;\n   say sprintf(\"use charnames qw( %-*s ); \\\"\\\\N{%s}\\\"\", $longuest, @$_) for @names;\n}\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>$ ./script.pl U+03B1\nuse charnames qw(        ); \"\\N{U+3B1}\"\nuse charnames qw( :full  ); \"\\N{GREEK SMALL LETTER ALPHA}\"\nuse charnames qw( :short ); \"\\N{GREEK:alpha}\"\nuse charnames qw( GREEK  ); \"\\N{alpha}\"\n\n$ ./script.pl U+0391\nuse charnames qw(        ); \"\\N{U+391}\"\nuse charnames qw( :full  ); \"\\N{GREEK CAPITAL LETTER ALPHA}\"\nuse charnames qw( :short ); \"\\N{GREEK:ALPHA}\"\nuse charnames qw( GREEK  ); \"\\N{ALPHA}\"\n\n$ perl a.pl 1C00\nuse charnames qw(        ); \"\\N{U+1C00}\"\nuse charnames qw( :full  ); \"\\N{LEPCHA LETTER KA}\"\nuse charnames qw( :short ); \"\\N{LEPCHA:KA}\"\nuse charnames qw( :short ); \"\\N{LEPCHA:ka}\"\nuse charnames qw( LEPCHA ); \"\\N{KA}\"\nuse charnames qw( LEPCHA ); \"\\N{ka}\"\n\n$ ./script.pl 20\nuse charnames qw(       ); \"\\N{U+20}\"\nuse charnames qw( :full ); \"\\N{SPACE}\"\nuse charnames qw( :full ); \"\\N{SP}\"\n</code></pre>\n\n<p>Notes:</p>\n\n<ul>\n<li>Script names in charnames.pm import parameters are case-insensitive.</li>\n<li>Instances of <code>use charnames qw( );</code> in the output (i.e. directives loading charnames.pm with no parameters) are not actually necessary.</li>\n<li>Since Perl 5.16, charnames.pm is implicitly loaded using <code>use charnames qw( :full :short );</code> if it's otherwise loaded before a <code>\\N{}</code> is encountered.</li>\n<li>Custom aliases in effect are not listed. (Technically, there aren't any unless you modify the script.)</li>\n<li>The names must be provided exactly as output, with the following exceptions:\n\n<ul>\n<li>The number that follows <code>U+</code> is case-insensitive.</li>\n<li>The number that follows <code>U+</code> may have leading zeroes.</li>\n<li>The script name in <code>:short</code> names is case-insensitive.</li>\n<li>Upper-case character names in <code>:short</code> and in script character names are case-insensitive, but must contain at least one upper-case character.</li>\n<li>Using <code>use charnames qw( :loose );</code> allows further variations of the displayed strings.</li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 41747856, "answer_count": 1, "score": 2, "last_activity_date": 1484855797, "creation_date": 1484840642, "last_edit_date": 1495539948, "question_id": 41745993, "link": "https://stackoverflow.com/questions/41745993/how-can-i-get-all-values-that-can-be-used-in-n-to-produce-a-particular-code-p", "title": "How can I get all values that can be used in \\N{} to produce a particular code point?", "body": "<p>While performing debugging for <a href=\"https://stackoverflow.com/questions/41738241/perl-unknown-charname-nalpha\">this question</a>, I asked myself: How do I find all values that I can use in <code>\\N{}</code> for a given Unicode code point?</p>\n\n<p>For example, I want to know all aliases for U+03B1 (GREEK SMALL LETTER ALPHA). How would I find out that <code>\\N{greek:alpha}</code> could be used for this?</p>\n"}, {"tags": ["perl", "sorting", "reference"], "comments": [{"owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "edited": false, "score": 1, "creation_date": 1484838628, "post_id": 41744656, "comment_id": 70683094, "body": "Sorted by all three keys? Or just a particular one?"}, {"owner": {"reputation": 110113, "user_id": 168657, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f14e7610fca39322ebbf23530def15f8?s=128&d=identicon&r=PG", "display_name": "mob", "link": "https://stackoverflow.com/users/168657/mob"}, "edited": false, "score": 2, "creation_date": 1484838960, "post_id": 41744656, "comment_id": 70683323, "body": "<a href=\"https://metacpan.org/pod/Data::Dumper#Configuration-Variables-or-Methods\" rel=\"nofollow noreferrer\"><code>$Data::Dumper::Sortkeys = 1</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7440952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ad0abce48322ba7fdf15b389ebbb0f?s=128&d=identicon&r=PG&f=1", "display_name": "Sunella", "link": "https://stackoverflow.com/users/7440952/sunella"}, "edited": false, "score": 0, "creation_date": 1484900208, "post_id": 41745223, "comment_id": 70709439, "body": "Did not know I can use slice with a hash. Many thanks!"}], "tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": true, "score": 2, "last_activity_date": 1484838705, "creation_date": 1484838705, "answer_id": 41745223, "question_id": 41744656, "link": "https://stackoverflow.com/questions/41744656/perl-how-do-i-get-values-of-the-nested-hash-sorted-by-the-keys/41745223#41745223", "title": "Perl: How do I get values of the nested hash sorted by the keys?", "body": "<p>Hashes as I'm sure you know, don't store any sort of ordering, just key and value mappings.</p>\n\n<p>But the <code>sort</code> function can take pretty much arbitrary code, that returns position dependant negative/0/positive to define sort order.</p>\n\n<p>But you need to sort your 'top level' based on a subkey.</p>\n\n<p>If you need to output values in a particular order - remember hashes are unordered you can use a <a href=\"http://perldoc.perl.org/perldata.html#Slices\" rel=\"nofollow noreferrer\">slice</a>. </p>\n\n<p>So:</p>\n\n<pre><code>#!/usr/bin/env perl\n\nuse JSON::XS;\nuse Data::Dumper;\n\n#use diagnostics;\nuse strict;\nuse warnings;\n\nmy @things = qw ( pet name age );\n\nmy $school_data = {\n   'School' =&gt; '156',\n   'Pupils' =&gt; [\n      {  'Person' =&gt; { name =&gt; 'Alice', age =&gt; 10, pet =&gt; 'cat' },\n         'id'     =&gt; 56\n      },\n      { 'Person' =&gt; { name =&gt; 'John', age =&gt; 9, pet =&gt; 'dog' }, id =&gt; 4 }\n   ]\n};\n\nprint \"\\$school_data:\" . Dumper( $school_data-&gt;{Pupils} );\n\nforeach my $pupil ( sort { $_ -&gt; {Person} -&gt; {name} \n                       cmp $_ -&gt; {Person} -&gt; {name} } \n                               @{ $school_data-&gt;{Pupils} } )\n{\n   print join \" \", @{$pupil-&gt;{Person}}{@things}, \"\\n\";\n}\n</code></pre>\n\n<p>For multi-key sort, sort works just fine - provided the thing it returns is a numeric value.</p>\n\n<p>So you could:</p>\n\n<pre><code>sort { $_ -&gt; {Person} -&gt; {name} cmp $_ -&gt; {Person} -&gt; {name}\n    || $_ -&gt; {Person} -&gt; {age} &lt;=&gt; $_ -&gt; {Person} -&gt; {age}\n    || $_ -&gt; {Person} -&gt; {pet} &lt;=&gt; $_ -&gt; {Person} -&gt; {pet} } \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7440952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20ad0abce48322ba7fdf15b389ebbb0f?s=128&d=identicon&r=PG&f=1", "display_name": "Sunella", "link": "https://stackoverflow.com/users/7440952/sunella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 41745223, "answer_count": 1, "score": 1, "last_activity_date": 1484838705, "creation_date": 1484837137, "last_edit_date": 1484838493, "question_id": 41744656, "link": "https://stackoverflow.com/questions/41744656/perl-how-do-i-get-values-of-the-nested-hash-sorted-by-the-keys", "title": "Perl: How do I get values of the nested hash sorted by the keys?", "body": "<p>I am experimenting with a nested data structures in Perl these days. Let's say I have hash of array of hashes and I'd like to get values sorted by keys alphabetically. How do I do it?</p>\n\n<p>The code:</p>\n\n<pre><code>#!/usr/bin/perl\nuse JSON::XS;\nuse Data::Dumper;\n#use diagnostics;\nuse warnings;\n\nmy $school_data = {'School' =&gt; '156', 'Pupils' =&gt; [{'Person' =&gt; {name =&gt; 'Alice', age =&gt; 10, pet =&gt; 'cat'},'id' =&gt; 56},{'Person' =&gt; {name =&gt; 'John', age =&gt; 9, pet =&gt; 'dog'},id =&gt; 4}]};\n\nprint \"\\$school_data:\" . Dumper ($school_data);\n\nmy $ref = $school_data-&gt;{Pupils};\nforeach $pupil (@$ref){\n    my @temp = sort (values $pupil-&gt;{'Person'});\n    print \"\\n@temp\\n\";\n}\n</code></pre>\n\n<p>Gives me an output:</p>\n\n<pre><code>    $school_data: $VAR1 = {\n              'School' =&gt; '156',\n              'Pupils' =&gt; [\n                            {\n                              'id' =&gt; 56,\n                              'Person' =&gt; {\n                                            'pet' =&gt; 'cat',\n                                            'name' =&gt; 'Alice',\n                                            'age' =&gt; 10\n                                          }\n                            },\n                            {\n                              'Person' =&gt; {\n                                            'age' =&gt; 9,\n                                            'name' =&gt; 'John',\n                                            'pet' =&gt; 'dog'\n                                          },\n                              'id' =&gt; 4\n                            }\n                          ]\n            };\n\n\n\n10 Alice cat\n\n9 John dog\n</code></pre>\n\n<p>And I wish to get values sorted by keys alphabetically (pet name age):</p>\n\n<pre><code>cat Alice 10\n\ndog John 9\n</code></pre>\n\n<p>Looking forward to your help. Thank you.</p>\n"}, {"tags": ["regex", "perl", "sed", "pattern-matching"], "comments": [{"owner": {"reputation": 481636, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484836455, "post_id": 41744196, "comment_id": 70681391, "body": "Try <code>&#39;s&#47;^((?:(?!\\);).)*)-\\);&#47;$1_);&#47;&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": false, "score": 0, "last_activity_date": 1484837246, "creation_date": 1484837246, "answer_id": 41744697, "question_id": 41744196, "link": "https://stackoverflow.com/questions/41744196/replace-all-hyphens-before-the-first-bracket-within-a-file/41744697#41744697", "title": "Replace all hyphens before the first bracket within a file", "body": "<p><code>(?:(?!PAT).)*</code> is to <code>PAT</code> as <code>[^CHAR]</code> is to <code>CHAR</code>, so</p>\n\n<pre><code>s/\\G (?: (?! \\); | - ) . )* \\K - /_/xsg\n</code></pre>\n\n<p>Alternative:</p>\n\n<pre><code>s/\\G (?: (?! \\); ) [^-] )* \\K - /_/xg\n</code></pre>\n\n<p>Fastest:</p>\n\n<pre><code>s/\\G (?: [^)-]++ | \\)(?!;) )* \\K - /_/xg\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "is_accepted": false, "score": 0, "last_activity_date": 1484838620, "last_edit_date": 1484838620, "creation_date": 1484837582, "answer_id": 41744824, "question_id": 41744196, "link": "https://stackoverflow.com/questions/41744196/replace-all-hyphens-before-the-first-bracket-within-a-file/41744824#41744824", "title": "Replace all hyphens before the first bracket within a file", "body": "<p>With GNU sed:</p>\n\n<pre><code>sed -E ':a;s/^([^)]*)-([^)]*\\);)/\\1_\\2/;ta;'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "edited": false, "score": 0, "creation_date": 1484838424, "post_id": 41744887, "comment_id": 70682945, "body": "Nice one. I didn&#39;t know you could use <code>t</code> command without a label."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 14395, "user_id": 1344961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7ad173373ce2a48950108f5adc4b6d?s=128&d=identicon&r=PG", "display_name": "SLePort", "link": "https://stackoverflow.com/users/1344961/sleport"}, "edited": false, "score": 1, "creation_date": 1484838474, "post_id": 41744887, "comment_id": 70682981, "body": "@SLePort: in fact, you need a label, but this one has an empty name."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1823037"}, "edited": false, "score": 0, "creation_date": 1484838926, "post_id": 41744887, "comment_id": 70683298, "body": "Thanks.  Both of these appear to translate all hyphens into underscores, even those after the first instance of );."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1484839152, "post_id": 41744887, "comment_id": 70683466, "body": "@uint32: I answered to the first version of your question, the one without a multiline example. So my answer and others are designed to work by line. Now your question is totally different."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1823037"}, "edited": false, "score": 0, "creation_date": 1485252173, "post_id": 41744887, "comment_id": 70837509, "body": "@Casimir et Hippolyte:  Thanks for your input.  Apologies that my initial questions wasn&#39;t as clear as it should have been."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 0, "last_activity_date": 1484841649, "last_edit_date": 1484841649, "creation_date": 1484837753, "answer_id": 41744887, "question_id": 41744196, "link": "https://stackoverflow.com/questions/41744196/replace-all-hyphens-before-the-first-bracket-within-a-file/41744887#41744887", "title": "Replace all hyphens before the first bracket within a file", "body": "<p><em>[EDIT]</em><br>\nWith awk:</p>\n\n<pre><code>awk -v RS=');' -v ORS=');' '/^CREATE TABLE/{gsub(\"-\",\"_\")}1'\n</code></pre>\n\n<p>With perl:</p>\n\n<pre><code>perl -pe'BEGIN{$/=\");\"} /^CREATE TABLE/&amp;&amp;y/-/_/'\n</code></pre>\n\n<p>With sed:</p>\n\n<pre><code>sed '/^CREATE TABLE/{:;/);/!{N;b};y/-/_/;}'\n</code></pre>\n\n<p>The awk and perl ways are the same, they use a record separator <code>);</code>, check if this one starts with \"CREATE TABLE\" and translate each hyphen to an underscore.</p>\n\n<p>The sed version isn't very different except that you need to build the text block yourself, appending each line until the <code>);</code>. <em>(Note that this way assumes that there no more code after the <code>);</code> in the same line)</em>:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>{\n  :  # define an empty label\n  /);/! # if ); doesn't match\n  {\n    N # append a newline to the pattern space\n    b # go to the label\n  }\n  y/-/_/ # translate\n}\n</code></pre>\n\n<hr>\n\n<p><em>[OLD ANSWER: only works by line]</em><br>\nWith sed:</p>\n\n<pre><code>sed -E ':;s/^(([^)-]|\\)[^;-])*\\)*)-/\\1_/;t'\n</code></pre>\n\n<p>or with perl:</p>\n\n<pre><code>perl -pe's/.*?\\);|.+/$&amp;=~y|-|_|r/e'\n</code></pre>\n\n<p><em>(This way matches all until the first <code>);</code> or the end of the string, then each hyphen in the match is translated to an underscore using <code>y///</code>)</em> </p>\n"}, {"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 0, "last_activity_date": 1484839272, "creation_date": 1484839272, "answer_id": 41745452, "question_id": 41744196, "link": "https://stackoverflow.com/questions/41744196/replace-all-hyphens-before-the-first-bracket-within-a-file/41745452#41745452", "title": "Replace all hyphens before the first bracket within a file", "body": "<p>I wouldn't try and tackle it with a magic regex, but rather:</p>\n\n<pre><code>#!/usr/bin/env perl\nuse strict;\nuse warnings;\n\nwhile ( &lt;DATA&gt; ) {\n   if ( m/CREATE TABLE/ .. /\\);/ ) { \n      s/-/_/g;\n   }\n   print;\n}\n\n\n__DATA__\nCREATE TABLE e_00_90 (\nLast_Name nvarchar(50),\n  Initials nvarchar(3),\n  Company_Division nvarchar(50),\n  Status nvarchar(12),\n  Ckeyword5 nvarchar(15),\n  Value_of_Contract_-_Overh decimal(20,2)\n);\ninsert into export_00_90 values ('Sample-One', 'R', 'Div 1', 'Expired', 'ANONYTR', 5000);\ninsert into export_00_90 values ('Sample Two', 'R', 'Div_2', 'Expired', 'WISHBONE', 13000);\n</code></pre>\n\n<p>The range operator lets you test if you're between two delimiters, and only apply the expression there. </p>\n\n<p>As a one liner, this would be:</p>\n\n<pre><code>perl -pi -e 'm/CREATE TABLE/ .. /\\);/ &amp;&amp; s/-/_/g' 00-90.sql\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1823037"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 41744887, "answer_count": 4, "score": 0, "last_activity_date": 1484841649, "creation_date": 1484835983, "last_edit_date": 1484838035, "question_id": 41744196, "link": "https://stackoverflow.com/questions/41744196/replace-all-hyphens-before-the-first-bracket-within-a-file", "title": "Replace all hyphens before the first bracket within a file", "body": "<p>I'm trying to use sed or perl to replace all hyphens which occur in a file before the first instance of );</p>\n\n<p>So far I have the following which replaces all hyphens in my file but I can't get it to only match upto the first instance of \");\".</p>\n\n<pre><code>perl -pi -e 's/[^.*);]?-/_/' 00-90.sql\n</code></pre>\n\n<p>Further information:</p>\n\n<p>I'm trying to remove the invalid hyphens from create table SQL which has been generated, we have 1k+ files to get through but anything I hit it with replaces all hyphens.</p>\n\n<p>Example of text to be cleansed:</p>\n\n<pre><code>CREATE TABLE e_00_90 (\nLast_Name nvarchar(50),\n  Initials nvarchar(3),\n  Company_Division nvarchar(50),\n  Status nvarchar(12),\n  Ckeyword5 nvarchar(15),\n  Value_of_Contract_-_Overh decimal(20,2)\n);\ninsert into export_00_90 values ('Sample-One', 'R', 'Div 1', 'Expired', 'ANONYTR', 5000);\ninsert into export_00_90 values ('Sample Two', 'R', 'Div_2', 'Expired', 'WISHBONE', 13000);\n</code></pre>\n\n<p>I only need the Create Table block to have hyphens removed.</p>\n"}, {"tags": ["regex", "perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484837476, "post_id": 41743435, "comment_id": 70682179, "body": "Doesn&#39;t handle <code>[^()]</code>"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484837496, "post_id": 41743435, "comment_id": 70682197, "body": "Doesn&#39;t handle <code># ()</code> (when <code>&#47;x</code> is used)"}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484837522, "post_id": 41743435, "comment_id": 70682224, "body": "Doesn&#39;t handle <code>(?{ () })</code> and similar."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484837578, "post_id": 41743435, "comment_id": 70682265, "body": "Re &quot;<i>but I have no right to install packages in my environment</i>&quot;, You need no special permissions to install modules."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 1, "creation_date": 1484837704, "post_id": 41743435, "comment_id": 70682366, "body": "If you won&#39;t install modules, I don&#39;t see what you want from us."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484843033, "post_id": 41743435, "comment_id": 70686257, "body": "Why do you want to know before actually matching against something?"}, {"owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "edited": false, "score": 0, "creation_date": 1484849844, "post_id": 41743435, "comment_id": 70690264, "body": "I think you summed it up nicely with &quot;<i>it would be nicer</i>&quot; ... but it&#39;s very messy and complicated. You want to <i>parse a regex</i> and that is hard. If you are unwilling to use modules i&#39;d say it&#39;s not worth the effort.  It&#39;d be a little project in its own right."}, {"owner": {"reputation": 19969, "user_id": 23512, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tUj1I.png?s=128&g=1", "display_name": "Tanktalus", "link": "https://stackoverflow.com/users/23512/tanktalus"}, "edited": false, "score": 0, "creation_date": 1484861580, "post_id": 41743435, "comment_id": 70696682, "body": "Once you write the code to do this properly, you should package it up so you can reuse it elsewhere.  Once you&#39;ve done that, you should put it up on CPAN ..."}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "reply_to_user": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484912105, "post_id": 41743435, "comment_id": 70716746, "body": "@ikegami Thank you for your answer! You listed some more patterns, which are not handled. Thanks! Frankly speaking I can install modules, but only onto the dev environment and it is quite a procedure to implement in other places. If you have a solution with some module to be added, I greatly appreciate it. I surly can read clues from it!"}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484912206, "post_id": 41743435, "comment_id": 70716816, "body": "@ThisSuitIsBlackNot This is the compile time vs runtime checking question. IMHO if I can check if the configuration is complete at the beginning it better then fail after a long running process."}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1484914936, "post_id": 41743435, "comment_id": 70718550, "body": "After some more digging I found Regexp::Parser on CPAN. It is 6 years old and designed for Perl 5.8.4&#39;s regex, but It may give some clues..."}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484929153, "post_id": 41743435, "comment_id": 70727523, "body": "@TrueY What configuration? Are you using regexes provided by the user? Could you please explain more about your application?"}, {"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484994582, "post_id": 41743435, "comment_id": 70747116, "body": "@ThisSuitIsBlackNot The script colours the output of a console program which is running in the background (launched by open3). The colour settings are stored in a configuration file and done by somebody else. This file contains the patterns and the colouring styles attached to them."}], "answers": [{"comments": [{"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1484915079, "post_id": 41752506, "comment_id": 70718647, "body": "Thanks for your answer! As I see you just repacked my trying. Nice RE and I can learn a lot from it, but unfortunately it is still far not complete."}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": false, "score": 1, "last_activity_date": 1484863222, "creation_date": 1484863222, "answer_id": 41752506, "question_id": 41743435, "link": "https://stackoverflow.com/questions/41743435/how-can-i-detect-how-many-capture-groups-are-in-a-perl-regexp/41752506#41752506", "title": "How can I detect how many capture groups are in a Perl Regexp?", "body": "<p>Regex:</p>\n\n<pre><code>\\\\.(*SKIP)(?!)|\\((?(?=\\?)\\?(P?['&lt;]\\w+['&gt;]))\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>\\\\.                     # Match any escaped character\n(*SKIP)(?!)             # Discard it\n|                       # OR\n\\(                      # Match a single `(`\n(?(?=\\?)                # Which if is followed by `?`\n    \\?                      # Match `?`\n    P?['&lt;]\\w+['&gt;]           # Next characters should be matched as ?P'name', ?&lt;name&gt; or ?'name'\n)                       # End of conditional statement\n</code></pre>\n\n<p>Perl:</p>\n\n<pre><code>my @offsets = ();\nwhile ('XXAB(CD)DE\\FG\\X(X)' =~ /\\\\.(*SKIP)(?!)|\\((?(?=\\?)\\?(P?['&lt;]\\w+['&gt;]))/g){\n    push @offsets, \"$-[0]\";\n}\nprint join(\", \", @offsets);\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>4, 15\n</code></pre>\n\n<p>Which represents existence of two capturing groups in input string.</p>\n"}, {"comments": [{"owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "edited": false, "score": 0, "creation_date": 1485954339, "post_id": 41826367, "comment_id": 71138603, "body": "Good point! Actually after 5.10.0 <a href=\"https://stackoverflow.com/questions/tagged/perl\">perl</a> in perlre there is a method to reset the numbering in alternative capture groups (<code>(?|pattern)</code> - &quot;branch reset&quot; pattern). But anyway a pattern can have non-deterministic number of capture groups."}], "tags": [], "owner": {"reputation": 251, "user_id": 7095760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1075cc785326ad3cb890f95b3446009e?s=128&d=identicon&r=PG&f=1", "display_name": "SREagle", "link": "https://stackoverflow.com/users/7095760/sreagle"}, "is_accepted": false, "score": 1, "last_activity_date": 1485255366, "creation_date": 1485255366, "answer_id": 41826367, "question_id": 41743435, "link": "https://stackoverflow.com/questions/41743435/how-can-i-detect-how-many-capture-groups-are-in-a-perl-regexp/41826367#41826367", "title": "How can I detect how many capture groups are in a Perl Regexp?", "body": "<p>Without any limiting requirements for the occuring regexes, there is no definitive answer to the number of capture groups, I think. Just think of alternatives with a differing capture group count and the possibility of this occuring again in each branch:</p>\n\n<pre><code>my $re = qr/ A(B)C | A(D|(E(G+|H))F /x;\n</code></pre>\n\n<p>This regex can obviously have up to 3 capture groups. You could recursively parse each branch, and take the highest number as your result - but I honestly cannot come up with a practical way to do this in a short time. For 'linear' regexes not using alternatives or non-basic regex features, the task of determining the count of capture groups is possible, but I don't think it's feasible with more advanced ones.</p>\n"}, {"tags": [], "owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "is_accepted": true, "score": 0, "last_activity_date": 1488410167, "creation_date": 1488410167, "answer_id": 42543956, "question_id": 41743435, "link": "https://stackoverflow.com/questions/41743435/how-can-i-detect-how-many-capture-groups-are-in-a-perl-regexp/42543956#42543956", "title": "How can I detect how many capture groups are in a Perl Regexp?", "body": "<p>As <a href=\"https://hu.wikipedia.org/wiki/Barack_Obama\" rel=\"nofollow noreferrer\">Mr. Obama</a> said: <em>\"Yes We Can!\"</em></p>\n\n<p>I found a solution which does not require additional module and handles all the possible capturing group events (as I know). As ikegami mentioned it needs reparsing of the regexp, but <a href=\"/questions/tagged/perl\" class=\"post-tag\" title=\"show questions tagged &#39;perl&#39;\" rel=\"tag\">perl</a> does it for us.</p>\n\n<p>During digging in the haystack of Perl modules on CPAN I found a very interesting one called <a href=\"http://search.cpan.org/~kpawar/warnings-regex-recompile-0.01/lib/warnings/regex/recompile.pm\" rel=\"nofollow noreferrer\">warnings::regex::recompile</a>. It generates a warning message each time a regexp is re-compiled. Analyzing the source I found the solution of my problem.</p>\n\n<p>Using <code>use re qw/Debug DUMP/;</code> Perl returns the parsed regex to <code>STDERR</code>. In the original module result is dumped to a real file and then reread to process. I modified the code to use in-memory file.</p>\n\n<p>My solution is:</p>\n\n<pre><code>sub dumpre {\n  use re qw(eval Debug DUMP);\n  my $buf = ''; \n\n  open OLDERR, '&gt;&amp;', STDERR or die \"$!\";\n  close STDERR or die \"$!\";\n  open STDERR, '&gt;', \\$buf or die \"$!\";\n\n  my $re = qr/$_[0]/;\n\n  close STDERR or die \"$!\";\n  open STDERR, '&gt;&amp;', OLDERR or die \"$!\";\n  close OLDERR or die \"$!\";\n\n  no re 'debug'; # Needed because of split\n\n  return [ split '\\n', $buf ];\n}\n</code></pre>\n\n<p>This function turns on DUMP when compiling a regexp. Enables <code>eval</code> to be able to handle <code>(?{...})</code> and <code>(??{...})</code> expressions.</p>\n\n<pre><code>my $re = 'aa(?:(a\\d)+x)?((b\\d)*d)*c*(d\\d)?(e*)((f)+)(g)+';\nmy $r = dumpre $re;\nprint join \"\\n\", @$r;\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>Compiling REx \"aa(?:(a\\d)+x)?((b\\d)*d)*c*(d\\d)?(e*)((f)+)(g)+\"\nFinal program:\n   1: EXACT &lt;aa&gt; (3)\n   3: CURLYX[0] {0,1} (19)\n   5:   CURLYM[1] {1,32767} (16)\n   9:     EXACT &lt;a&gt; (11)\n  11:     POSIXU[\\d] (14)\n  14:     SUCCEED (0)\n  15:   NOTHING (16)\n  16:   EXACT &lt;x&gt; (18)\n  18: WHILEM (0)\n  19: NOTHING (20)\n  20: CURLYX[1] {0,32767} (40)\n  22:   OPEN2 (24)\n  24:     CURLYM[3] {0,32767} (35)\n  28:       EXACT &lt;b&gt; (30)\n  30:       POSIXU[\\d] (33)\n  33:       SUCCEED (0)\n  34:     NOTHING (35)\n  35:     EXACT &lt;d&gt; (37)\n  37:   CLOSE2 (39)\n  39: WHILEM[1/7] (0)\n  40: NOTHING (41)\n  41: STAR (44)\n  42:   EXACT &lt;c&gt; (0)\n  44: CURLYM[4] {0,1} (55)\n  48:   EXACT &lt;d&gt; (50)\n  50:   POSIXU[\\d] (53)\n  53:   SUCCEED (0)\n  54: NOTHING (55)\n  55: OPEN5 (57)\n  57:   STAR (60)\n  58:     EXACT &lt;e&gt; (0)\n  60: CLOSE5 (62)\n  62: OPEN6 (64)\n  64:   CURLYN[7] {1,32767} (74)\n  66:     NOTHING (68)\n  68:     EXACT &lt;f&gt; (0)\n  72:   WHILEM (0)\n  73:   NOTHING (74)\n  74: CLOSE6 (76)\n  76: CURLYN[8] {1,32767} (86)\n  78:   NOTHING (80)\n  80:   EXACT &lt;g&gt; (0)\n  84: WHILEM (0)\n  85: NOTHING (86)\n  86: END (0)\nanchored \"aa\" at 0 floating \"fg\" at 2..9223372036854775807 (checking floating) minlen 4 \n</code></pre>\n\n<p>So the lines with <code>OPEN\\d+</code>, <code>CURLYM[\\d+]</code>, <code>CURLYN[\\d+]</code> shows capturing bracket expressions (Line syntax: segment_no: regex command (next segment)). (Note: CURLYX is a non-capturing bracket expression like (?:...)+). The number after OPEN/CURLY[MN} shows the ordinal number of capturing group. The last has to be found. Which is 8 in this case.</p>\n\n<p>Unfortunately it does not handle if the <code>(??{...})</code> returns a bracket expression, but this is not really needed for me now.\nI suppose the format is not fixed, so it can differ from version to version. But it is ok for me.</p>\n"}], "owner": {"reputation": 6728, "user_id": 2156952, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/3mMoE.gif?s=128&g=1", "display_name": "TrueY", "link": "https://stackoverflow.com/users/2156952/truey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 42543956, "answer_count": 3, "score": 6, "last_activity_date": 1488410167, "creation_date": 1484833825, "question_id": 41743435, "link": "https://stackoverflow.com/questions/41743435/how-can-i-detect-how-many-capture-groups-are-in-a-perl-regexp", "title": "How can I detect how many capture groups are in a Perl Regexp?", "body": "<p>I have a bunch of <a href=\"/questions/tagged/perl\" class=\"post-tag\" title=\"show questions tagged &#39;perl&#39;\" rel=\"tag\">perl</a> <a href=\"/questions/tagged/regexp\" class=\"post-tag\" title=\"show questions tagged &#39;regexp&#39;\" rel=\"tag\">regexp</a>s in a script. I would like to know how many capture groups are in them. More precisely I'd like to know how many items would be added to the @- and @+ arrays if they matched before actually use them in a real match op.</p>\n\n<p>An example:</p>\n\n<pre><code>'XXAB(CD)DE\\FG\\XX' =~ /(?i)x(ab)\\(cd\\)(?:de)\\\\(fg\\\\)x/\n    and print \"'@-', '@+'\\n\";\n</code></pre>\n\n<p>In this case the output is:</p>\n\n<pre><code>'1 2 11', '15 4 14'\n</code></pre>\n\n<p>So after matching I know that the 0th item is the matched part of the string, and there are two capture group expressions. Would it be possible to know right before the actual match?</p>\n\n<p>I tried to concentrate onto the opening brackets. So I removed the '\\\\' patterns first to make easier to detect the escaped brackets. Then I removed '\\(' strings. Then came '(?'. Now I can count the remaining opening brackets.</p>\n\n<pre><code>my $re = '(?i)x(ab)\\(cd\\)(?:de)\\\\\\\\(fg\\\\\\\\)x'; print \"ORIG: '$re'\\n\";\n'XXAB(CD)DE\\FG\\XX' =~ /$re/ and print \"RE: '@-', '@+'\\n\";\n$re =~ s/\\\\\\\\//g; print \"\\\\\\\\: '$re'\\n\";\n$re =~ s/\\\\\\(//g; print \"\\\\(: '$re'\\n\";\n$re =~ s/\\(\\?//g; print \"\\\\?: '$re'\\n\";\nmy $n = ($re =~ s/\\(//g); print \"n=$n\\n\";\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ORIG: '(?i)x(ab)\\(cd\\)(?:de)\\\\(fg\\\\)x'\nRE: '1 2 11', '15 4 14'\n\\\\: '(?i)x(ab)\\(cd\\)(?:de)(fg)x'\n\\(: '(?i)x(ab)cd\\)(?:de)(fg)x'\n\\?: 'i)x(ab)cd\\):de)(fg)x'\nn=2\n</code></pre>\n\n<p>So here I know that 2 capture groups are in this <a href=\"/questions/tagged/regexp\" class=\"post-tag\" title=\"show questions tagged &#39;regexp&#39;\" rel=\"tag\">regexp</a>. But maybe there is an easier way and this is definitely not complete (e.g. this treats <code>(?&lt;foo&gt;...)</code> and <code>(?'foo'...)</code> as a non-caputre groups).</p>\n\n<p>Another way would be to dump the internal data structures of <code>regcomp</code> function. Maybe the package <a href=\"http://search.cpan.org/~dconway/Regexp-Debugger-0.001022/lib/Regexp/Debugger.pm\">Regexp::Debugger</a> could solve the issue, but I have no right to install packages in my environment.</p>\n\n<p>Actually the <a href=\"/questions/tagged/regexp\" class=\"post-tag\" title=\"show questions tagged &#39;regexp&#39;\" rel=\"tag\">regexp</a>s are keys to some ARRAY refs and I'd like to check if the referenced ARRAY contains the proper amount of values before actually applying the <a href=\"/questions/tagged/regexp\" class=\"post-tag\" title=\"show questions tagged &#39;regexp&#39;\" rel=\"tag\">regexp</a>s. Of course this checking can be done right after the pattern matching, but it would be nicer if I could do it in the loading stage of the script.</p>\n\n<p>Thank you for your help and comments in advance!</p>\n"}, {"tags": ["perl", "asynchronous", "cloud", "daemon", "catalyst"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 3, "creation_date": 1484832551, "post_id": 41742950, "comment_id": 70678722, "body": "Doing the upload as an asynchronous request would make sense. Return a job ID and have the Action set a flag in a Model when it&#39;s done. Then have your page poll the backend asynchronously regularly (like every 10s) and if it gets a <i>done</i>, refresh the page. I&#39;ll type up an answer in a bit."}, {"owner": {"reputation": 1523, "user_id": 4204037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab78fa882cbf4a03c4fd2a0b92622dc5?s=128&d=identicon&r=PG&f=1", "display_name": "bytepusher", "link": "https://stackoverflow.com/users/4204037/bytepusher"}, "edited": false, "score": 0, "creation_date": 1484864077, "post_id": 41742950, "comment_id": 70697903, "body": "With regards to your hoster question it really depends on the use case. Amazon or other cloud services have the advantage of being easy to scale up if necessary, but may be more expensive than having your own server, in addition to other considerations. That question should probably best be posted separately and elsewhere."}, {"owner": {"reputation": 63, "user_id": 7331889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b283001a43a08753ac4c1f78ae0e093?s=128&d=identicon&r=PG&f=1", "display_name": "sega.dev", "link": "https://stackoverflow.com/users/7331889/sega-dev"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484910318, "post_id": 41742950, "comment_id": 70715600, "body": "@simbabque If you have the time, hints for useful tools/plugins or some example code would be very helpful.  Thanks bytepusher, I&#39;ll consider that when the app goes into production"}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484910545, "post_id": 41742950, "comment_id": 70715757, "body": "The answer from Julien below is helpful in terms of the pure backend. But we need to know a bit more. You are talking about parallel processing and stuff like that. Does your application have an academic research background? Is it ok if it takes a while because there are not many users? Or is this commercial and should be as fast as possible?"}, {"owner": {"reputation": 63, "user_id": 7331889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b283001a43a08753ac4c1f78ae0e093?s=128&d=identicon&r=PG&f=1", "display_name": "sega.dev", "link": "https://stackoverflow.com/users/7331889/sega-dev"}, "edited": false, "score": 0, "creation_date": 1484912028, "post_id": 41742950, "comment_id": 70716703, "body": "It is a bioinformatics app for research purposes. Maybe later also for commercial use. Basically it searches for text strings in a large file, extracts sequences, stores results in the DB, and visualizes them. In the initial phase, the app will mostly be used only by 1 or 2 persons simultaneously. Anyway, in my local dev environment I use 32 threads with ForkManager so that one run takes approx. 1 minute which is ok. Computation increases sevenfold if the task isn&#39;t parallelized."}], "answers": [{"comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484910621, "post_id": 41756151, "comment_id": 70715816, "body": "This is pretty much what I was going to say too."}, {"owner": {"reputation": 63, "user_id": 7331889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b283001a43a08753ac4c1f78ae0e093?s=128&d=identicon&r=PG&f=1", "display_name": "sega.dev", "link": "https://stackoverflow.com/users/7331889/sega-dev"}, "edited": false, "score": 0, "creation_date": 1484911223, "post_id": 41756151, "comment_id": 70716227, "body": "Thanks for your advice Julien. I&#39;m new to using Perl for &quot;complex&quot; web apps. I couldn&#39;t figure out how to use File::Queue. Would you mind writing some example code for queuing and polling out of Catalyst? Apart from that, do you think I could adapt this approch using TheSchwartz: <a href=\"http://fayland.me/perl/2007/10/04/use-theschwartz-job-queue-to-handle/\" rel=\"nofollow noreferrer\">fayland.me/perl/2007/10/04/use-theschwartz-job-queue-to-hand&zwnj;&#8203;le</a> ?"}, {"owner": {"reputation": 5509, "user_id": 55111, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a33e543897ba8a58877f290ef74db204?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/55111/julien"}, "edited": false, "score": 0, "creation_date": 1484945398, "post_id": 41756151, "comment_id": 70735698, "body": "The doc for File::Queue has examples: <a href=\"http://search.cpan.org/perldoc?File%3A%3AQueue\" rel=\"nofollow noreferrer\">search.cpan.org/perldoc?File%3A%3AQueue</a>"}], "tags": [], "owner": {"reputation": 5509, "user_id": 55111, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a33e543897ba8a58877f290ef74db204?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/55111/julien"}, "is_accepted": false, "score": 1, "last_activity_date": 1484945382, "last_edit_date": 1484945382, "creation_date": 1484886712, "answer_id": 41756151, "question_id": 41742950, "link": "https://stackoverflow.com/questions/41742950/how-to-manage-a-long-running-process-in-a-catalyst-app/41756151#41756151", "title": "How to manage a long running process in a Catalyst App?", "body": "<p>Put the job in a queue and do it in a different process, outside of the Web application. While you Catalyst process is busy, even if using Catalyst::Plugin::RunAfterRequest, it cannot be used to process other web requests. </p>\n\n<p>There are very simple queuing systems, like <a href=\"http://search.cpan.org/perldoc?File%3A%3AQueue\" rel=\"nofollow noreferrer\">File::Queue</a>. Basically, you assign a job ID to the document, put it in the queue. Another process checks the queue and picks up new jobs.</p>\n\n<p>You can save the job status in a database, or anything accessible any the web applications. On the front end, you can poll the job status every X seconds or minutes to give feedback to the user.</p>\n\n<p>You have to figure out how much memory and CPU you need. Multi-core CPU or multiple CPUs may not be required, even if you have several processes running. Choosing between a dedicated server or cloud like EC2 is more about the flexibility (resizing, snapshot, etc.) vs. price. </p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 7331889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b283001a43a08753ac4c1f78ae0e093?s=128&d=identicon&r=PG&f=1", "display_name": "sega.dev", "link": "https://stackoverflow.com/users/7331889/sega-dev"}, "is_accepted": false, "score": 2, "last_activity_date": 1485535648, "last_edit_date": 1485535648, "creation_date": 1485534785, "answer_id": 41898696, "question_id": 41742950, "link": "https://stackoverflow.com/questions/41742950/how-to-manage-a-long-running-process-in-a-catalyst-app/41898696#41898696", "title": "How to manage a long running process in a Catalyst App?", "body": "<p>Somehow I couldn't get the idea of File::Queue. For non-blocking parallel execution, I ended up using a combination of <a href=\"http://search.cpan.org/~jfearn/TheSchwartz-1.12/lib/TheSchwartz.pm\" rel=\"nofollow noreferrer\">TheSchwartz</a> and Parallel::Prefork like it is implemented in the <a href=\"https://github.com/fayland/foorum\" rel=\"nofollow noreferrer\">Foorum Catalyst App</a>.\nBasically, there are 5 important elements. Maybe this summary will be helpful to others.</p>\n\n<p>1) <a href=\"http://cpansearch.perl.org/src/BRADFITZ/TheSchwartz-1.04/doc/schema.sql\" rel=\"nofollow noreferrer\">TheSchwartz DB</a></p>\n\n<p>2) A client (DB handle) for the TheSchwartz DB</p>\n\n<pre><code>package MyApp::TheSchwartz::Client;\n\nuse TheSchwartz;    \nsub theschwartz {\n    my $theschwartz = TheSchwartz-&gt;new(\n        databases =&gt; [ {\n            dsn  =&gt; 'dbi:mysql:theschwartz',\n            user =&gt; 'user',\n            pass =&gt; 'pass',\n        } ],\n        verbose =&gt; 1,\n    );\n    return $theschwartz;\n}\n</code></pre>\n\n<p>3) A job worker (where the actual work is done)</p>\n\n<pre><code>package MyApp::TheSchwartz::Worker::Test;\n\nuse base qw( TheSchwartz::Moosified::Worker );  \nuse MyApp::Model::DB;      # Catalyst DB connect_info\nuse MyApp::Schema;         # Catalyst DB schema   \n\nsub work {\n    my $class = shift;\n    my $job = shift;    \n    my ($args) = $job-&gt;arg;\n    my ($arg1, $arg2) = @$args;\n\n    # re-use Catalyst DB schema    \n    my $connect_info = MyApp::Model::DB-&gt;config-&gt;{connect_info};\n    my $schema = MyApp::Schema-&gt;connect($connect_info);\n\n    # do the heavy lifting\n\n    $job-&gt;completed();\n}\n</code></pre>\n\n<p>4) A worker process <code>TheSchwartzWorker.pl</code> that monitors the table <em>job</em> non-stop</p>\n\n<pre><code>use MyApp::TheSchwartz::Client qw/theschwartz/;    # db connection\nuse MyApp::TheSchwartz::Worker::Test;\nuse Parallel::Prefork;\n\nmy $client = theschwartz();\n\nmy $pm = Parallel::Prefork-&gt;new({\n    max_workers  =&gt; 16,\n    trap_signals =&gt; {\n        TERM =&gt; 'TERM',\n        HUP  =&gt; 'TERM',\n        USR1 =&gt; undef,\n    }\n});\n\nwhile ($pm-&gt;signal_received ne 'TERM') {\n    $pm-&gt;start and next;\n\n    $client-&gt;can_do('MyApp::TheSchwartz::Worker::Test');    \n    my $delay = 10;    # When no job is available, the working process will sleep for $delay seconds\n    $client-&gt;work( $delay );\n\n    $pm-&gt;finish;\n}    \n$pm-&gt;wait_all_children();\n</code></pre>\n\n<p>5) In the Catalyst controller: insert a new job into the table <em>job</em> and pass some arguments</p>\n\n<pre><code>use MyApp::TheSchwartz::Client qw/theschwartz/;\nsub start : Chained('base') PathPart('start') Args(0) {\n    my ($self, $c ) = @_;\n\n    $client = theschwartz();\n    $client-&gt;insert(\u2018MyApp::TheSchwartz::Worker::Test\u2019, [ $arg1, $arg2 ]);\n\n    $c-&gt;response-&gt;redirect(\n        $c-&gt;uri_for(\n            $self-&gt;action_for('archive'),\n            {mid =&gt; $c-&gt;set_status_msg(\"Run '$name' started\")}\n        )\n    );\n}\n</code></pre>\n\n<p>The new run is greyed out on the \"archive\" page until all results are available in the database.</p>\n"}], "owner": {"reputation": 63, "user_id": 7331889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b283001a43a08753ac4c1f78ae0e093?s=128&d=identicon&r=PG&f=1", "display_name": "sega.dev", "link": "https://stackoverflow.com/users/7331889/sega-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1485535648, "creation_date": 1484832411, "question_id": 41742950, "link": "https://stackoverflow.com/questions/41742950/how-to-manage-a-long-running-process-in-a-catalyst-app", "title": "How to manage a long running process in a Catalyst App?", "body": "<p>This is my first Catalyst app and I'm not sure how to solve the following problem.</p>\n\n<p>The user enters some data in a form and selects a file (up to 100MB) for uploading. After submitting the form, the actual computation takes up to 5 minutes and the results are stored in a DB.</p>\n\n<p>What I want to do is to run this process (and maybe also the file upload) in the <em>background</em> to avoid a server timeout. There should be some kind of feedback to the user (like a message \"Job has been started\" or a progress bar). The form should be blocked while the job is still running. A result page should be displayed once the job finished.</p>\n\n<p>In hours of reading I stumbled upon concepts like asynchronous requests, job queues, daemons, <a href=\"http://gearman.org/\" rel=\"nofollow noreferrer\">Gearman</a>, or <a href=\"http://search.cpan.org/~flora/Catalyst-Plugin-RunAfterRequest-0.04/lib/Catalyst/Plugin/RunAfterRequest.pm\" rel=\"nofollow noreferrer\">Catalyst::Plugin::RunAfterRequest</a>.</p>\n\n<p>How would you do it?\nThanks for helping a web dev novice!</p>\n\n<p>PS: In my current local app the work is done in parallel with <em>Parallel::ForkManager</em>. For the real app, would it be advisable to use a cloud computing service like Amazon EC2? Or just find a hoster who offers multi-core servers?</p>\n"}, {"tags": ["perl"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 2, "creation_date": 1484832372, "post_id": 41742890, "comment_id": 70678605, "body": "I got tired of pasting the answer into every question answered with a Perl one-liner solution."}], "answers": [{"comments": [{"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1603941038, "post_id": 41742892, "comment_id": 114197531, "body": "This is very useful. Can you also add how to use perl in -exec option of find command."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1603943919, "post_id": 41742892, "comment_id": 114198057, "body": "@stack0114106, It&#39;s already there. It&#39;s the first one."}, {"owner": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1603951125, "post_id": 41742892, "comment_id": 114199568, "body": "Thank you.. I thought that requires a for loop."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "reply_to_user": {"reputation": 7646, "user_id": 6867048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b939fdb5809fed8097c38bdf4370747b?s=128&d=identicon&r=PG&f=1", "display_name": "stack0114106", "link": "https://stackoverflow.com/users/6867048/stack0114106"}, "edited": false, "score": 0, "creation_date": 1604937378, "post_id": 41742892, "comment_id": 114492802, "body": "@stack0114106, Perl&#39;s <code>-n</code>/<code>-p</code> will happily read from each file provided on the command line in turn. All three version can pass multiple files to a single invocation of <code>perl</code>. Use <code>-exec perl ... \\;</code> (GNU <code>find</code> or otherwise) to get only one file per invocation of <code>perl</code> (e.g. if you want to do something on a per-file basis in <code>END{}</code>.)"}], "tags": [], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "is_accepted": true, "score": 6, "last_activity_date": 1604938122, "last_edit_date": 1604938122, "creation_date": 1484832229, "answer_id": 41742892, "question_id": 41742890, "link": "https://stackoverflow.com/questions/41742890/specifying-file-to-process-to-perl-one-liner/41742892#41742892", "title": "Specifying file to process to Perl one-liner", "body": "<p>Documentation on how to launch <code>perl</code> is found in the <a href=\"http://perldoc.perl.org/perlrun.html\" rel=\"nofollow noreferrer\">perlrun</a> man page.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>perl -pe'...' -i~ file [file [...]]   # Modifies named file(s) in place with backup.\nperl -pe'...' -i file [file [...]]    # Modifies named file(s) in place without backup.\nperl -pe'...' file.in &gt;file.out       # Reads from named file(s), outputs to STDOUT.\nperl -pe'...' &lt;file.in &gt;file.out      # Reads from STDIN, outputs to STDOUT.\n</code></pre>\n<p>If the file's name could start with a <code>-</code>, you can use <code>--</code>.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>perl -pe'...' [-i[~]] -- &quot;$file&quot; [...]\n</code></pre>\n<p>If you wanted to modify multiple files, you could use any of the following:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>find ... -exec               perl -pe'...' -i~ {} +   # GNU find required\nfind ...         | xargs -r  perl -pe'...' -i~        # Doesn't support newlines in names\nfind ... -print0 | xargs -r0 perl -pe'...' -i~\n</code></pre>\n<p>In all of the above, square brackets (<code>[]</code>) denote something optional. They should not appear in the actual command. On the other hand, the <code>{}</code> in the <code>-exec</code> clause should appear as-is.</p>\n<hr />\n<p>Note: Some one-liners use <code>-n</code> and explicit prints instead of <code>-p</code>. All of the above applies to these as well.</p>\n"}], "owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 2, "accepted_answer_id": 41742892, "answer_count": 1, "score": 3, "last_activity_date": 1604938122, "creation_date": 1484832229, "last_edit_date": 1484832726, "question_id": 41742890, "link": "https://stackoverflow.com/questions/41742890/specifying-file-to-process-to-perl-one-liner", "title": "Specifying file to process to Perl one-liner", "body": "<p>I was given a Perl one-liner. It has the following form:</p>\n\n<pre><code>perl -pe'...'\n</code></pre>\n\n<p>How do I specify the file to process to the program?</p>\n"}, {"tags": ["perl", "web-services", "soap", "wsdl"], "owner": {"reputation": 49, "user_id": 4772174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46f4f2be73d974abc63a5aaadf869cd?s=128&d=identicon&r=PG&f=1", "display_name": "Paul259", "link": "https://stackoverflow.com/users/4772174/paul259"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 319, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1484818453, "creation_date": 1484818453, "question_id": 41738261, "link": "https://stackoverflow.com/questions/41738261/how-to-send-file-as-a-dime-attachment-using-soap-request-in-perl", "title": "How to send file as a dime attachment using SOAP request in Perl?", "body": "<p>My WSDL has a SOAP action 'TransferFile' that takes a file as a DIME attachment and stores it on remote device file system. The Path to the desired location on the remote device where the file is to be transferred is a parameter for the SOAP action.</p>\n\n<pre><code>my $soap = SOAP::Lite\n            -&gt; proxy('http://'.$ipAddress.':$port',\n                     cookie_jar =&gt; HTTP::Cookies-&gt;new(ignore_discard =&gt; 1)\n                    )\n           -&gt; uri('idws');\n\n$soap-&gt;autotype(0);\n\nmy $ent = build MIME::Entity\n    Type        =&gt; \"file\",\n#   Encoding    =&gt; \"base64\",\n    Path        =&gt; \"$file_path\",\n    Filename    =&gt; \"test_tr_files\",\n    Disposition =&gt; \"attachment\";\n\nmy $som_ent = $soap-&gt;parts([$ent]);\n\nmy $som_tf = $soap-&gt;TransferFile(SOAP::Data-&gt;name(\"RemotePath\"=&gt;\"$rpath\"));\n</code></pre>\n\n<p><strong>$som_tf->result</strong> always return false and the file is not transferred to the device.</p>\n\n<p>Using Trace and debug for SOAP::Lite module shows an error with  $soap->parts([$ent]). \nSOAP::Transport::HTTP::Client::send_receive: HTTP/1.1 500 Internal Server Error</p>\n\n<p>No luck even with SOAPui.</p>\n\n<p>Is there a different Library that can be used for the same purpose or am I doing it wrong?</p>\n\n<p>The soap connection is fine as other SOAP calls which do not require a dime attachment are running without any trouble.</p>\n"}, {"tags": ["perl", "installation", "aix"], "comments": [{"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484828994, "post_id": 41738241, "comment_id": 70676336, "body": "Re &quot;<i>I am trying to build Encode 2.88-3 from CPAN</i>&quot;, There&#39;s no such thing on CPAN."}, {"owner": {"reputation": 320771, "user_id": 589924, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2cf53d5a3d25f95c0db4e025aed4153?s=128&d=identicon&r=PG", "display_name": "ikegami", "link": "https://stackoverflow.com/users/589924/ikegami"}, "edited": false, "score": 0, "creation_date": 1484829679, "post_id": 41738241, "comment_id": 70676774, "body": "When Perl is built, tables are built from the Unicode database (a collection of text files that define the characters and their properties). This is a problem with those files. Not sure what to do about it. Have you tried installing Perl into your home directory rather than messing with the system <code>perl</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484936185, "post_id": 41765666, "comment_id": 70731307, "body": "mktables is included with the perl source, but isn&#39;t copied into the installation directory (on any platform) because it&#39;s not necessary for running perl, only for building it. You should submit a bug report using the <code>perlbug</code> utility so the maintainers can figure out why unicore/Name.pl wasn&#39;t generated and can fix it."}], "tags": [], "owner": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "is_accepted": false, "score": 1, "last_activity_date": 1484921671, "creation_date": 1484921671, "answer_id": 41765666, "question_id": 41738241, "link": "https://stackoverflow.com/questions/41738241/perl-unknown-charname-nalpha/41765666#41765666", "title": "Perl: Unknown charname \\N{alpha}", "body": "<p>I figured it out. The errors on AIX came up because <code>unicore/Name.pl</code> was missing in AIX 7.2 for whatever reason.</p>\n\n<p>As Name.pl is generated during the compilation of perl, the necessary program <code>mktables</code> was not to be found on the AIX System, as I does not seem to be delivered with a packaged perl.</p>\n\n<p>Solution to this:\nDownload the perl-Version which is installed from CPAN into a temporary directory. On AIX 7.2 I have perl 5.20, so I download perl 5.20 from cpan (<a href=\"http://www.cpan.org/src/\" rel=\"nofollow noreferrer\">http://www.cpan.org/src/</a>).</p>\n\n<p>Extract it, and cd to <code>lib/unicore</code>. There you can find the mktables program. \nThen generate the unicode files:</p>\n\n<pre><code>chmod 755 mktables\n./mktables\n</code></pre>\n\n<p>This generates a bunch of files, including Name.pl. I diffed all newly generated files against the ones from my systems perl and found no difference, so I only copied Name.pl to my systems unicore-path. The Errors then vanished.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8207472, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/089d1ffa753391da4ca797bba4ad2cf3?s=128&d=identicon&r=PG", "display_name": "Paul Lemmons", "link": "https://stackoverflow.com/users/8207472/paul-lemmons"}, "is_accepted": false, "score": 0, "last_activity_date": 1498259802, "creation_date": 1498259802, "answer_id": 44731134, "question_id": 41738241, "link": "https://stackoverflow.com/questions/41738241/perl-unknown-charname-nalpha/44731134#44731134", "title": "Perl: Unknown charname \\N{alpha}", "body": "<p>While I agree that there is a problem with the distribution and it needs to be fixed upstream. I appreciate the answer provided that gets me past the problem at hand. </p>\n\n<p>For me it looks like:</p>\n\n<pre><code>wget http://www.cpan.org/src/5.0/perl-5.20.1.tar.gz\ngunzip -c ../perl-5.20.1.tar.gz | tar xvf -\ncd perl-5.20.1/lib/unicore/\nchmod 755 ./mktables\n./mktables # Note there is no output... just wait. It will complete\nsudo cp Name.pl /usr/opt/perl5/lib/5.20.1/unicore\n</code></pre>\n\n<p>And life was good again</p>\n"}], "owner": {"reputation": 307, "user_id": 6013979, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9a594885e641ccaa827d19d1ca303c4?s=128&d=identicon&r=PG&f=1", "display_name": "yulivee", "link": "https://stackoverflow.com/users/6013979/yulivee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1498259802, "creation_date": 1484818404, "last_edit_date": 1484844078, "question_id": 41738241, "link": "https://stackoverflow.com/questions/41738241/perl-unknown-charname-nalpha", "title": "Perl: Unknown charname \\N{alpha}", "body": "<p>I am trying to build Encode 2.88-3 from CPAN on AIX 7.2. During the make test phase I receive various errors about unknown characters:</p>\n\n<pre><code>Use of uninitialized value $txt in pattern match (m//) at /usr/opt/perl5/lib/5.20.1/_charnames.pm line 499.\nUnknown charname 'alpha' at t/Encode.t line 44, within string\nBEGIN not safe after errors--compilation aborted at t/Encode.t line 148.\nt/Encode.t ................. \nUse of uninitialized value $txt in pattern match (m//) at /usr/opt/perl5/lib/5.20.1/_charnames.pm line 459.\nUnknown charname 'LATIN SMALL LETTER SHARP S' at t/encoding.t line 77, within string\nBEGIN not safe after errors--compilation aborted at t/encoding.t line 165.\nt/encoding.t ............... \n\nUse of uninitialized value $txt in pattern match (m//) at /usr/opt/perl5/lib/5.20.1/_charnames.pm line 459.\nUnknown charname 'POUND SIGN' at t/mime-header.t line 166, within string\nExecution of t/mime-header.t aborted due to compilation errors.\n# Looks like your test exited with 2 just after 1.\nt/mime-header.t ............ \n</code></pre>\n\n<p>To test whether this is an AIX problem or a problem with the Encode-Testcase, I tried to build the same version on my linux system (Ubuntu 14.04), where Encode installs just fine.</p>\n\n<p>To pick the first error:</p>\n\n<pre><code>is \"\\N{alpha}\",substr($uni,0,1),\"alpha does not map to symbol 'a'\";\n</code></pre>\n\n<p>It seems AIX perl is unable to find the \\N{alpha} character. I am a bit lost here - where does perl usually search for characters like this?</p>\n\n<p>I need a hint into the direction I have to search for with this problem. Can someone provide some debugging tips?</p>\n\n<pre><code>perl -V\nSummary of my perl5 (revision 5 version 20 subversion 1) configuration:\n\n  Platform:\n    osname=aix, osvers=6.1.0.0, archname=aix-thread-multi\n    uname='aix blade08 1 6 00003c3ad100 '\n    config_args='-d -Dprefix=/usr/opt/perl5 -Dcc=xlc_r -Duseshrplib -Dusethreads'\n    hint=recommended, useposix=true, d_sigaction=define\n    useithreads=define, usemultiplicity=define\n    use64bitint=undef, use64bitall=undef, uselongdouble=undef\n    usemymalloc=n, bincompat5005=undef\n  Compiler:\n    cc='xlc_r -q32', ccflags ='-D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -qmaxmem=-1 -qnoansialias -qlanglvl=extc99 -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT -q32 -D_LARGE_FILES',\n    optimize='-O',\n    cppflags='-D_ALL_SOURCE -D_ANSI_C_SOURCE -D_POSIX_SOURCE -qmaxmem=-1 -qnoansialias -qlanglvl=extc99 -DUSE_NATIVE_DLOPEN -DNEED_PTHREAD_INIT'\n    ccversion='12.1.0.9', gccversion='', gccosandvers=''\n    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=4321\n    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=8\n    ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8\n    alignbytes=8, prototype=define\n  Linker and Libraries:\n    ld='ld', ldflags =' -brtl -bdynamic -b32'\n    libpth=/lib /usr/lib /usr/ccs/lib\n    libs=-lbind -lnsl -ldbm -ldl -lld -lm -lcrypt -lpthreads -lc\n    perllibs=-lbind -lnsl -ldl -lld -lm -lcrypt -lpthreads -lc\n    libc=, so=a, useshrplib=true, libperl=libperl.a\n    gnulibc_version=''\n  Dynamic Linking:\n    dlsrc=dl_aix.xs, dlext=so, d_dlsymun=undef, ccdlflags='  -bE:/usr/opt/perl5/lib/5.20.1/aix-thread-multi/CORE/perl.exp'\n    cccdlflags=' ', lddlflags='-bhalt:4 -G -bI:$(PERL_INC)/perl.exp -bE:$(BASEEXT).exp -bnoentry -lpthreads -lc -lm'\n\n\nCharacteristics of this binary (from libperl): \n  Compile-time options: HAS_TIMES MULTIPLICITY PERLIO_LAYERS\n                        PERL_DONT_CREATE_GVSV\n                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD\n                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP\n                        PERL_NEW_COPY_ON_WRITE PERL_PRESERVE_IVUV\n                        USE_ITHREADS USE_LARGE_FILES USE_LOCALE\n                        USE_LOCALE_COLLATE USE_LOCALE_CTYPE\n                        USE_LOCALE_NUMERIC USE_PERLIO USE_PERL_ATOF\n                        USE_REENTRANT_API\n  Built under aix\n  Compiled at Feb  6 2015 14:54:29\n  %ENV:\n    PERL5LIB=\"/home/perl_ss/perl5/lib/perl5/aix-thread-multi:/home/perl_ss/perl5/lib/perl5:/usr/local/lib/site_perl/5.8.8:/usr/local/site_perl/common\"\n    PERL5OPT=\"\"\n    PERL5_CPANPLUS_IS_RUNNING=\"9961732\"\n    PERL5_CPAN_IS_RUNNING=\"9961732\"\n    PERL_LOCAL_LIB_ROOT=\"/home/perl_ss/perl5\"\n    PERL_MB_OPT=\"--install_base /home/perl_ss/perl5\"\n    PERL_MM_OPT=\"INSTALL_BASE=/home/perl_ss/perl5\"\n  @INC:\n    /home/perl_ss/perl5/lib/perl5/aix-thread-multi\n    /home/perl_ss/perl5/lib/perl5/aix-thread-multi\n    /home/perl_ss/perl5/lib/perl5\n    /usr/local/lib/site_perl/5.8.8/aix-thread-multi\n    /usr/local/lib/site_perl/5.8.8\n    /usr/local/site_perl/common\n    /usr/opt/perl5/lib/site_perl/5.20.1/aix-thread-multi\n    /usr/opt/perl5/lib/site_perl/5.20.1\n    /usr/opt/perl5/lib/5.20.1/aix-thread-multi\n    /usr/opt/perl5/lib/5.20.1\n    /usr/opt/perl5/lib/site_perl/5.8.8\n    /usr/opt/perl5/lib/site_perl\n</code></pre>\n\n<p><strong>UPDATE:</strong>\nFurther inspection of the problem leads me to the conclusion that this may not be related to encode. I fired up my Debugger and performed some tests. Notice how the Character \\N{greek:alpha} was found on Linux, but not on AIX:\nAIX 7.2:</p>\n\n<pre><code> DB&lt;1&gt; use charnames qw(greek)\n\n  DB&lt;2&gt; print \"\\N{alpha}\"\nUse of uninitialized value $txt in pattern match (m//) at /usr/opt/perl5/lib/5.20.1/_charnames.pm line 459.\n [...]\nUnknown charname 'alpha' at (eval 9)[/usr/opt/perl5/lib/5.20.1/perl5db.pl:732] line 2, within string\n\n  DB&lt;3&gt; print \"\\N{U+03B1}\"\nWide character in print at (eval 10)[/usr/opt/perl5/lib/5.20.1/perl5db.pl:732] line 2.\n [...]\n\n  DB&lt;4&gt; print \"\\N{greek:alpha}\"  \nUse of uninitialized value $txt in pattern match (m//) at /usr/opt/perl5/lib/5.20.1/_charnames.pm line 459.\n [...]\nUnknown charname 'greek:alpha' at (eval 11)[/usr/opt/perl5/lib/5.20.1/perl5db.pl:732] line 2, within string\n</code></pre>\n\n<p>Ubuntu 14.04</p>\n\n<pre><code>DB&lt;1&gt; use charnames qw(greek)\n\n DB&lt;2&gt; print \"\\N{alpha}\"\n Unknown charname 'alpha' at (eval 8)[/usr/share/perl/5.18/perl5db.pl:732] line 2, within string\n\n DB&lt;3&gt; print \"\\N{U+03B1}\"\n Wide character in print at (eval 9)[/usr/share/perl/5.18/perl5db.pl:732] line 2.\n\n\n DB&lt;4&gt; print \"\\N{greek:alpha}\"\n Wide character in print at (eval 10)[/usr/share/perl/5.18/perl5db.pl:732] line 2.\n</code></pre>\n\n<p>Guess there is something messed up with the AIX character-table?</p>\n\n<p><strong>UPDATE 2:</strong>\nI am starting to get to the bottom of this.</p>\n\n<p>Name.pl is missing in AIX:</p>\n\n<pre><code>perl@t72:/usr/opt/perl5/lib/5.20.1/unicore $ ls\nBlocks.txt          Decomposition.pl    Name.pm             SpecialCasing.txt   UCD.pl\nCombiningClass.pl   Heavy.pl            NamedSequences.txt  To                  lib\n</code></pre>\n\n<p>In contrast to Linux:</p>\n\n<pre><code>perl@pod-racer:/usr/share/perl/5.18/unicore $ ls\nBlocks.txt         Decomposition.pl  lib                 Name.pl  SpecialCasing.txt  UCD.pl\nCombiningClass.pl  Heavy.pl          NamedSequences.txt  Name.pm  To                 version\n</code></pre>\n"}, {"tags": ["perl", "tk"], "comments": [{"owner": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1484834826, "post_id": 41735960, "comment_id": 70680232, "body": "Why is this too broad?  It is asking a specific question in a specific case."}, {"owner": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1484835021, "post_id": 41735960, "comment_id": 70680370, "body": "Well, since the people listed above don&#39;t understand your question, I can&#39;t create an answer.  One method that might work is to do a <code>bind . &lt;Leave&gt; exit</code>.   When the cursor leaves the primary window, the application will exit.  This will work well if your primary windows receives the focus and mouse cursor is in your primary window upon startup."}, {"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "reply_to_user": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1484894116, "post_id": 41735960, "comment_id": 70706739, "body": "@BradLanam can you remove the HOLD if possible? So I can answer my own question."}, {"owner": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1484911131, "post_id": 41735960, "comment_id": 70716160, "body": "I can&#39;t remove the hold.  I flagged the question with a note hoping to get a moderator to fix it, but no luck."}, {"owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "reply_to_user": {"reputation": 5004, "user_id": 1930666, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BiEzi.jpg?s=128&g=1", "display_name": "Brad Lanam", "link": "https://stackoverflow.com/users/1930666/brad-lanam"}, "edited": false, "score": 0, "creation_date": 1485129764, "post_id": 41735960, "comment_id": 70783290, "body": "But still, thanks alot! :)"}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 2051109, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/216009d45e1b8e34f936173142f0648f?s=128&d=identicon&r=PG", "display_name": "BOC", "link": "https://stackoverflow.com/users/2051109/boc"}, "is_accepted": false, "score": 2, "last_activity_date": 1484822533, "creation_date": 1484822533, "answer_id": 41739762, "question_id": 41735960, "link": "https://stackoverflow.com/questions/41735960/linux-perl-tk-how-to-know-if-the-window-of-my-script-is-the-active-window-or-no/41739762#41739762", "title": "Linux Perl TK: How to know if the window of my script is the active window or not?", "body": "<p>The method GetInputFocus in package <a href=\"http://search.cpan.org/~ctrondlp/X11-GUITest-0.28/GUITest.pm\" rel=\"nofollow noreferrer\">GUITest</a> will tell you witch window has the keyboard focus.</p>\n"}], "owner": {"reputation": 142, "user_id": 2155231, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/NpIdz.png?s=128&g=1", "display_name": "Demonic_Dog", "link": "https://stackoverflow.com/users/2155231/demonic-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 2, "closed_date": 1484824718, "answer_count": 1, "score": 0, "last_activity_date": 1484822533, "creation_date": 1484810416, "question_id": 41735960, "link": "https://stackoverflow.com/questions/41735960/linux-perl-tk-how-to-know-if-the-window-of-my-script-is-the-active-window-or-no", "closed_reason": "Needs more focus", "title": "Linux Perl TK: How to know if the window of my script is the active window or not?", "body": "<p>I have a Perl script using TK for gui, I just need to know upon calling it and during the time its active if it is still the \"ACTIVE WINDOW\" on your screen.</p>\n\n<p>I want it to commit suicide(exit or die) if its no longer the \"ACTIVE WINDOW\" on your screen.</p>\n\n<p>Example 1: I executed it, normally, its the active window, so nothing will happen.\nExample 2: While its active, I clicked another gui application, so my current script is not ACTIVE WINDOW on my screen anymore, so now it must commit suicide and kill itself.</p>\n"}, {"tags": ["perl", "visual-studio-code"], "comments": [{"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484817367, "post_id": 41734738, "comment_id": 70669048, "body": "In <a href=\"https://code.visualstudio.com/Docs/editor/debugging\" rel=\"nofollow noreferrer\">this doc</a> it says <i>Please note that the attributes available in these launch configurations vary from debugger to debugger. You can use IntelliSense to find out which attributes exist for a specific debugger.</i>"}, {"owner": {"reputation": 28133, "user_id": 2065039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7wqQg.jpg?s=128&g=1", "display_name": "Guruprasad J Rao", "link": "https://stackoverflow.com/users/2065039/guruprasad-j-rao"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484819828, "post_id": 41734738, "comment_id": 70670664, "body": "@simbabque Agreed, and it is as expected and creates its own auto-generated <code>launch.json</code> file and according to its auto generated file, it is as similar as what we execute in command line.."}, {"owner": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484822897, "post_id": 41734738, "comment_id": 70672623, "body": "Unfortunately I don&#39;t have access to a Windows box where I am allowed to install an ActivePerl so I cannot try. It certainly looks right. Is there some way to get what it&#39;s doing into the log panel of your VSCode?"}, {"owner": {"reputation": 28133, "user_id": 2065039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7wqQg.jpg?s=128&g=1", "display_name": "Guruprasad J Rao", "link": "https://stackoverflow.com/users/2065039/guruprasad-j-rao"}, "reply_to_user": {"reputation": 50468, "user_id": 1331451, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/4ZPmj.png?s=128&g=1", "display_name": "simbabque", "link": "https://stackoverflow.com/users/1331451/simbabque"}, "edited": false, "score": 0, "creation_date": 1484835348, "post_id": 41734738, "comment_id": 70680604, "body": "I wish I could give you the details if it gets logged but unfortunately nothing logs in the Editor.."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1042976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a87f2ad341a6ce787ac99d652dbc2261?s=128&d=identicon&r=PG", "display_name": "seifel", "link": "https://stackoverflow.com/users/1042976/seifel"}, "is_accepted": false, "score": 0, "last_activity_date": 1604574435, "last_edit_date": 1604574435, "creation_date": 1491253675, "answer_id": 43194289, "question_id": 41734738, "link": "https://stackoverflow.com/questions/41734738/debugging-perl-with-visual-studio-code/43194289#43194289", "title": "Debugging Perl with Visual Studio Code", "body": "<p>I ran Visual Studio Code on a Mac and changed</p>\n<pre><code>&quot;program&quot;: &quot;${workspaceRoot}/${command.AskForProgramName}&quot;\n</code></pre>\n<p>to</p>\n<pre><code>&quot;program&quot;: &quot;${file}&quot;\n</code></pre>\n<p>to get the current file to debug.</p>\n"}, {"comments": [{"owner": {"reputation": 1978, "user_id": 1705829, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/85YCp.gif?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/1705829/timo"}, "edited": false, "score": 0, "creation_date": 1607454117, "post_id": 50748706, "comment_id": 115276134, "body": "For what is the Per-Debug remote?"}], "tags": [], "owner": {"reputation": 143, "user_id": 473093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7e55a646043b5f04e82dfcb1985edc9?s=128&d=identicon&r=PG", "display_name": "jonasbn", "link": "https://stackoverflow.com/users/473093/jonasbn"}, "is_accepted": false, "score": 3, "last_activity_date": 1607421095, "last_edit_date": 1607421095, "creation_date": 1528399011, "answer_id": 50748706, "question_id": 41734738, "link": "https://stackoverflow.com/questions/41734738/debugging-perl-with-visual-studio-code/50748706#50748706", "title": "Debugging Perl with Visual Studio Code", "body": "<p>I tried with a newer version of the plugin: <a href=\"https://marketplace.visualstudio.com/items?itemName=mortenhenriksen.perl-debug\" rel=\"nofollow noreferrer\">Perl Debug</a> version 0.2.0.</p>\n<p>This works out of the box. The proposed configuration looks as follows:</p>\n<pre class=\"lang-javascript prettyprint-override\"><code>{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    &quot;version&quot;: &quot;0.2.0&quot;,\n    &quot;configurations&quot;: [\n        {\n            &quot;type&quot;: &quot;perl&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;name&quot;: &quot;Perl-Debug local&quot;,\n            &quot;program&quot;: &quot;${workspaceFolder}/${relativeFile}&quot;,\n            &quot;exec&quot;: &quot;perl&quot;,\n            &quot;execArgs&quot;: [],\n            &quot;root&quot;: &quot;${workspaceRoot}/&quot;,\n            &quot;inc&quot;: [],\n            &quot;args&quot;: [],\n            &quot;env&quot;: {},\n            &quot;stopOnEntry&quot;: true\n        },\n        {\n            &quot;type&quot;: &quot;perl&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;name&quot;: &quot;Perl-Debug remote&quot;,\n            &quot;program&quot;: &quot;${workspaceFolder}/${relativeFile}&quot;,\n            &quot;root&quot;: &quot;${workspaceRoot}/&quot;,\n            &quot;stopOnEntry&quot;: true,\n            &quot;port&quot;: 5000\n        }\n    ]\n}\n</code></pre>\n<p>Do note I tried this out on a Mac, with Visual Studio Code version 1.24.0.</p>\n"}], "owner": {"reputation": 28133, "user_id": 2065039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7wqQg.jpg?s=128&g=1", "display_name": "Guruprasad J Rao", "link": "https://stackoverflow.com/users/2065039/guruprasad-j-rao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14917, "favorite_count": 1, "answer_count": 2, "score": 10, "last_activity_date": 1607421095, "creation_date": 1484805349, "last_edit_date": 1604574409, "question_id": 41734738, "link": "https://stackoverflow.com/questions/41734738/debugging-perl-with-visual-studio-code", "title": "Debugging Perl with Visual Studio Code", "body": "<p>I have just started with Perl today and installed <a href=\"https://en.wikipedia.org/wiki/ActivePerl\" rel=\"nofollow noreferrer\">ActivePerl</a> 5.24.1 and everything went well. I was able to create my test program <code>testPerl.pl</code> with simple a <code>print</code> command and run it through <code>console</code>.</p>\n<p>Now I wanted to use Visual Studio Code to run my Perl script, and so I opened the project folder [testPerl.pl location] with Visual Studio Code and tried to debug the code. I have installed the <a href=\"https://marketplace.visualstudio.com/items?itemName=mortenhenriksen.perl-debug\" rel=\"nofollow noreferrer\"><code>Perl-Debug</code></a> extension in the editor and when I hit <kbd>F5</kbd>, Visual Studio Code asked me to <strong>Select Environment</strong> and I chose the <strong>Perl Debug</strong> option, which actually created the <code>launch.json</code> file for me with the below contents.</p>\n<pre><code>{\n    &quot;version&quot;: &quot;0.0.2&quot;,\n    &quot;configurations&quot;: [\n        {\n            &quot;type&quot;: &quot;perl&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;exec&quot;: &quot;perl&quot;,\n            &quot;name&quot;: &quot;Perl-Debug&quot;,\n            &quot;root&quot;: &quot;${workspaceRoot}/&quot;,\n            &quot;program&quot;: &quot;${workspaceRoot}/${command.AskForProgramName}&quot;,\n            &quot;inc&quot;: [],\n            &quot;stopOnEntry&quot;: true\n        }\n    ]\n}\n</code></pre>\n<p>I have kept default values as it, and when I hit <kbd>F5</kbd> again, it asked me for a command with default value <code>test.pl</code>. It is because of <code>${command.AskForProgramName}</code>, I assume. I entered my file name <code>testPerl.pl</code> in the command, but then nothing happens. It starts and ends without any <code>print</code> in console.</p>\n<p>How can I actually configure this <code>launch.json</code> file or is there another way I need to do this?</p>\n"}, {"tags": ["arrays", "perl"], "comments": [{"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 7, "creation_date": 1484801845, "post_id": 41733893, "comment_id": 70662160, "body": "Only scalar values can be <code>undef</code>, and it&#39;s meaningless to test an array for definedness. If you want to set <code>@a</code> to <code>@h</code> if <code>@h</code> is non-empty, otherwise set it to the empty list then you can write just <code>@a = @h</code>."}, {"owner": {"reputation": 223, "user_id": 4372146, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45b0f2c118e605902e76db6d6a4cb598?s=128&d=identicon&r=PG", "display_name": "halfo", "link": "https://stackoverflow.com/users/4372146/halfo"}, "reply_to_user": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1484802685, "post_id": 41733893, "comment_id": 70662412, "body": "Ah, yes. You are right. Thanks! @Borodin"}], "answers": [{"tags": [], "owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "is_accepted": true, "score": 2, "last_activity_date": 1484833184, "last_edit_date": 1484833184, "creation_date": 1484830281, "answer_id": 41742228, "question_id": 41733893, "link": "https://stackoverflow.com/questions/41733893/perl-array-in-logical-defined-or/41742228#41742228", "title": "Perl array in logical defined-or", "body": "<p>Only scalar values can be <code>undef</code>, and it's meaningless to test an array for definedness. If you want to set <code>@a</code> to <code>@h</code> if <code>@h</code> is non-empty, else set it to the empty list, then you can write just <code>@a = @h</code>. </p>\n"}], "owner": {"reputation": 223, "user_id": 4372146, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45b0f2c118e605902e76db6d6a4cb598?s=128&d=identicon&r=PG", "display_name": "halfo", "link": "https://stackoverflow.com/users/4372146/halfo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 41742228, "answer_count": 1, "score": 1, "last_activity_date": 1484833184, "creation_date": 1484800919, "question_id": 41733893, "link": "https://stackoverflow.com/questions/41733893/perl-array-in-logical-defined-or", "title": "Perl array in logical defined-or", "body": "<p>I was trying to assign an empty array if a given array is undefined, otherwise assign that given array. But it looks like perl array is being executed in scalar context in logical defined-or.</p>\n\n<p>Example: </p>\n\n<pre><code>@h = 1 .. 5;\n@a = @h // ();\n@b = defined @h ? @h : ();\n\nprint @a; #5  \nprint @b; #12345\n</code></pre>\n\n<p>Is there a workaround so I can do in similar fashion like in the second line of the code?</p>\n"}, {"tags": ["list", "perl", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 53041, "user_id": 4653379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3953dbedd0dabff5cbc3db9b0835b14?s=128&d=identicon&r=PG&f=1", "display_name": "zdim", "link": "https://stackoverflow.com/users/4653379/zdim"}, "is_accepted": true, "score": 5, "last_activity_date": 1576034281, "last_edit_date": 1576034281, "creation_date": 1484798648, "answer_id": 41733541, "question_id": 41733333, "link": "https://stackoverflow.com/questions/41733333/perl-merging-results-of-maps/41733541#41733541", "title": "Perl merging results of maps", "body": "<p>The list returned by the second <code>map</code> is a part of the input list for the first one, following <code>0..1,</code>.</p>\n\n<p>The parenthesis can fix that </p>\n\n<pre><code>use warnings;\nuse strict;\n\nuse Data::Dump;\n\nmy $test = { \n    'foo' =&gt; [ \n        ( map { { i =&gt; $_ } } 0..1 ),\n        ( map { { j =&gt; $_ } } 0..1 )\n    ],  \n};\n\ndd($test);\n</code></pre>\n\n<p>since they delimit the expression so now the first <code>map</code> takes only <code>0..1</code> as its input list and computes and returns a list, which is then merged with the second <code>map</code>'s returned list.  (Strictly speaking you need parenthesis only around the first <code>map</code>.)</p>\n\n<p>This prints</p>\n\n<pre>\n{ foo => [{ i => 0 }, { i => 1 }, { j => 0 }, { j => 1 }] }\n</pre>\n\n<p>I've removed unneeded quotes, please restore them if/as needed in your application.</p>\n\n<p>Without parenthesis the <code>map</code> after the comma is taken to be a part of the expression generating the input list for the first <code>map</code>, so producing the next element(s) of the input list after <code>0..1</code>, effectively</p>\n\n<pre><code>map { i =&gt; $_ } (0..1, LIST);\n</code></pre>\n\n<p>Consider</p>\n\n<pre><code>my @arr = (\n    map { { 'i', $_ } } \n        0..1, \n        qw(a b),\n        map { ( { 'j', $_ } ) } 0..1\n);\ndd(\\@arr);\n</code></pre>\n\n<p>It prints</p>\n\n<pre>[\n  { i => 0 },\n  { i => 1 },\n  { i => \"a\" },\n  { i => \"b\" },\n  { i => { j => 0 } },\n  { i => { j => 1 } },\n]\n</pre>\n\n<p>This is also seen from your output, where all keys are <code>i</code> (no <code>j</code>s).</p>\n"}], "owner": {"reputation": 199, "user_id": 3291222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/962a70bd530eb5f0f4fe29b18e7fc9b4?s=128&d=identicon&r=PG&f=1", "display_name": "ohcamel", "link": "https://stackoverflow.com/users/3291222/ohcamel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 41733541, "answer_count": 1, "score": 1, "last_activity_date": 1576034547, "creation_date": 1484797329, "last_edit_date": 1576034547, "question_id": 41733333, "link": "https://stackoverflow.com/questions/41733333/perl-merging-results-of-maps", "title": "Perl merging results of maps", "body": "<p>How do I concatenate the output of two maps to form a single flat array?</p>\n\n<p>I was attempting to use this:\n</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>my $test = { 'foo' =&gt; [\n    map { \n        { 'i' =&gt; \"$_\" } \n    } 0..1,\n    map {\n        { 'j' =&gt; \"$_\" }\n    } 0..1\n] };\n</code></pre>\n\n<p>To achieve the result of this:</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>my $test = {'foo' =&gt; [\n        {\n            'i' =&gt; '0'\n        },\n        {\n            'i' =&gt; '1'\n        },\n        {\n            'j' =&gt; '0'\n        },\n        {\n            'j' =&gt; '1'\n        },\n    ]}\n</code></pre>\n\n<p>However, this is what I got in <code>$test</code> instead:</p>\n\n<pre class=\"lang-pl prettyprint-override\"><code>{\n    'foo' =&gt; [\n        {\n            'i' =&gt; '0'\n        },\n        {\n            'i' =&gt; '1'\n        },\n        {\n            'i' =&gt; 'HASH(0x7f90ad19cd30)'\n        },\n        {\n            'i' =&gt; 'HASH(0x7f90ae200908)'\n        }\n    ]\n};\n</code></pre>\n\n<p>Looks like the result of the second <code>map</code> gets iterated over by the first <code>map</code>.</p>\n"}]